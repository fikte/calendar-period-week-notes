'use strict';

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */

/**
 * Represents the BINARY value type, which contains extra methods for encoding and decoding.
 *
 * @memberof ICAL
 */
class Binary {
  /**
   * Creates a binary value from the given string.
   *
   * @param {String} aString        The binary value string
   * @return {Binary}               The binary value instance
   */
  static fromString(aString) {
    return new Binary(aString);
  }

  /**
   * Creates a new ICAL.Binary instance
   *
   * @param {String} aValue     The binary data for this value
   */
  constructor(aValue) {
    this.value = aValue;
  }

  /**
   * The type name, to be used in the jCal object.
   * @default "binary"
   * @constant
   */
  icaltype = "binary";

  /**
   * Base64 decode the current value
   *
   * @return {String}         The base64-decoded value
   */
  decodeValue() {
    return this._b64_decode(this.value);
  }

  /**
   * Encodes the passed parameter with base64 and sets the internal
   * value to the result.
   *
   * @param {String} aValue      The raw binary value to encode
   */
  setEncodedValue(aValue) {
    this.value = this._b64_encode(aValue);
  }

  _b64_encode(data) {
    // http://kevin.vanzonneveld.net
    // +   original by: Tyler Akins (http://rumkin.com)
    // +   improved by: Bayron Guevara
    // +   improved by: Thunder.m
    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +   bugfixed by: Pellentesque Malesuada
    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +   improved by: Rafał Kukawski (http://kukawski.pl)
    // *     example 1: base64_encode('Kevin van Zonneveld');
    // *     returns 1: 'S2V2aW4gdmFuIFpvbm5ldmVsZA=='
    // mozilla has this native
    // - but breaks in 2.0.0.12!
    //if (typeof this.window['atob'] == 'function') {
    //    return atob(data);
    //}
    let b64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ" +
              "abcdefghijklmnopqrstuvwxyz0123456789+/=";
    let o1, o2, o3, h1, h2, h3, h4, bits, i = 0,
      ac = 0,
      enc = "",
      tmp_arr = [];

    if (!data) {
      return data;
    }

    do { // pack three octets into four hexets
      o1 = data.charCodeAt(i++);
      o2 = data.charCodeAt(i++);
      o3 = data.charCodeAt(i++);

      bits = o1 << 16 | o2 << 8 | o3;

      h1 = bits >> 18 & 0x3f;
      h2 = bits >> 12 & 0x3f;
      h3 = bits >> 6 & 0x3f;
      h4 = bits & 0x3f;

      // use hexets to index into b64, and append result to encoded string
      tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);
    } while (i < data.length);

    enc = tmp_arr.join('');

    let r = data.length % 3;

    return (r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3);

  }

  _b64_decode(data) {
    // http://kevin.vanzonneveld.net
    // +   original by: Tyler Akins (http://rumkin.com)
    // +   improved by: Thunder.m
    // +      input by: Aman Gupta
    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +   bugfixed by: Onno Marsman
    // +   bugfixed by: Pellentesque Malesuada
    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +      input by: Brett Zamir (http://brett-zamir.me)
    // +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // *     example 1: base64_decode('S2V2aW4gdmFuIFpvbm5ldmVsZA==');
    // *     returns 1: 'Kevin van Zonneveld'
    // mozilla has this native
    // - but breaks in 2.0.0.12!
    //if (typeof this.window['btoa'] == 'function') {
    //    return btoa(data);
    //}
    let b64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ" +
              "abcdefghijklmnopqrstuvwxyz0123456789+/=";
    let o1, o2, o3, h1, h2, h3, h4, bits, i = 0,
      ac = 0,
      dec = "",
      tmp_arr = [];

    if (!data) {
      return data;
    }

    data += '';

    do { // unpack four hexets into three octets using index points in b64
      h1 = b64.indexOf(data.charAt(i++));
      h2 = b64.indexOf(data.charAt(i++));
      h3 = b64.indexOf(data.charAt(i++));
      h4 = b64.indexOf(data.charAt(i++));

      bits = h1 << 18 | h2 << 12 | h3 << 6 | h4;

      o1 = bits >> 16 & 0xff;
      o2 = bits >> 8 & 0xff;
      o3 = bits & 0xff;

      if (h3 == 64) {
        tmp_arr[ac++] = String.fromCharCode(o1);
      } else if (h4 == 64) {
        tmp_arr[ac++] = String.fromCharCode(o1, o2);
      } else {
        tmp_arr[ac++] = String.fromCharCode(o1, o2, o3);
      }
    } while (i < data.length);

    dec = tmp_arr.join('');

    return dec;
  }

  /**
   * The string representation of this value
   * @return {String}
   */
  toString() {
    return this.value;
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


const DURATION_LETTERS = /([PDWHMTS]{1,1})/;
const DATA_PROPS_TO_COPY = ["weeks", "days", "hours", "minutes", "seconds", "isNegative"];

/**
 * This class represents the "duration" value type, with various calculation
 * and manipulation methods.
 *
 * @memberof ICAL
 */
class Duration {
  /**
   * Returns a new ICAL.Duration instance from the passed seconds value.
   *
   * @param {Number} aSeconds       The seconds to create the instance from
   * @return {Duration}             The newly created duration instance
   */
  static fromSeconds(aSeconds) {
    return (new Duration()).fromSeconds(aSeconds);
  }

  /**
   * Checks if the given string is an iCalendar duration value.
   *
   * @param {String} value      The raw ical value
   * @return {Boolean}          True, if the given value is of the
   *                              duration ical type
   */
  static isValueString(string) {
    return (string[0] === 'P' || string[1] === 'P');
  }

  /**
   * Creates a new {@link ICAL.Duration} instance from the passed string.
   *
   * @param {String} aStr       The string to parse
   * @return {Duration}         The created duration instance
   */
  static fromString(aStr) {
    let pos = 0;
    let dict = Object.create(null);
    let chunks = 0;

    while ((pos = aStr.search(DURATION_LETTERS)) !== -1) {
      let type = aStr[pos];
      let numeric = aStr.slice(0, Math.max(0, pos));
      aStr = aStr.slice(pos + 1);

      chunks += parseDurationChunk(type, numeric, dict);
    }

    if (chunks < 2) {
      // There must be at least a chunk with "P" and some unit chunk
      throw new Error(
        'invalid duration value: Not enough duration components in "' + aStr + '"'
      );
    }

    return new Duration(dict);
  }

  /**
   * Creates a new ICAL.Duration instance from the given data object.
   *
   * @param {Object} aData                An object with members of the duration
   * @param {Number=} aData.weeks         Duration in weeks
   * @param {Number=} aData.days          Duration in days
   * @param {Number=} aData.hours         Duration in hours
   * @param {Number=} aData.minutes       Duration in minutes
   * @param {Number=} aData.seconds       Duration in seconds
   * @param {Boolean=} aData.isNegative   If true, the duration is negative
   * @return {Duration}                   The createad duration instance
   */
  static fromData(aData) {
    return new Duration(aData);
  }

  /**
   * Creates a new ICAL.Duration instance.
   *
   * @param {Object} data                 An object with members of the duration
   * @param {Number=} data.weeks          Duration in weeks
   * @param {Number=} data.days           Duration in days
   * @param {Number=} data.hours          Duration in hours
   * @param {Number=} data.minutes        Duration in minutes
   * @param {Number=} data.seconds        Duration in seconds
   * @param {Boolean=} data.isNegative    If true, the duration is negative
   */
  constructor(data) {
    this.wrappedJSObject = this;
    this.fromData(data);
  }

  /**
   * The weeks in this duration
   * @type {Number}
   * @default 0
   */
  weeks = 0;

  /**
   * The days in this duration
   * @type {Number}
   * @default 0
   */
  days = 0;

  /**
   * The days in this duration
   * @type {Number}
   * @default 0
   */
  hours = 0;

  /**
   * The minutes in this duration
   * @type {Number}
   * @default 0
   */
  minutes = 0;

  /**
   * The seconds in this duration
   * @type {Number}
   * @default 0
   */
  seconds = 0;

  /**
   * The seconds in this duration
   * @type {Boolean}
   * @default false
   */
  isNegative = false;

  /**
   * The class identifier.
   * @constant
   * @type {String}
   * @default "icalduration"
   */
  icalclass = "icalduration";

  /**
   * The type name, to be used in the jCal object.
   * @constant
   * @type {String}
   * @default "duration"
   */
  icaltype = "duration";

  /**
   * Returns a clone of the duration object.
   *
   * @return {Duration}      The cloned object
   */
  clone() {
    return Duration.fromData(this);
  }

  /**
   * The duration value expressed as a number of seconds.
   *
   * @return {Number}             The duration value in seconds
   */
  toSeconds() {
    let seconds = this.seconds + 60 * this.minutes + 3600 * this.hours +
                  86400 * this.days + 7 * 86400 * this.weeks;
    return (this.isNegative ? -seconds : seconds);
  }

  /**
   * Reads the passed seconds value into this duration object. Afterwards,
   * members like {@link ICAL.Duration#days days} and {@link ICAL.Duration#weeks weeks} will be set up
   * accordingly.
   *
   * @param {Number} aSeconds     The duration value in seconds
   * @return {Duration}           Returns this instance
   */
  fromSeconds(aSeconds) {
    let secs = Math.abs(aSeconds);

    this.isNegative = (aSeconds < 0);
    this.days = trunc(secs / 86400);

    // If we have a flat number of weeks, use them.
    if (this.days % 7 == 0) {
      this.weeks = this.days / 7;
      this.days = 0;
    } else {
      this.weeks = 0;
    }

    secs -= (this.days + 7 * this.weeks) * 86400;

    this.hours = trunc(secs / 3600);
    secs -= this.hours * 3600;

    this.minutes = trunc(secs / 60);
    secs -= this.minutes * 60;

    this.seconds = secs;
    return this;
  }

  /**
   * Sets up the current instance using members from the passed data object.
   *
   * @param {Object} aData                An object with members of the duration
   * @param {Number=} aData.weeks         Duration in weeks
   * @param {Number=} aData.days          Duration in days
   * @param {Number=} aData.hours         Duration in hours
   * @param {Number=} aData.minutes       Duration in minutes
   * @param {Number=} aData.seconds       Duration in seconds
   * @param {Boolean=} aData.isNegative   If true, the duration is negative
   */
  fromData(aData) {
    for (let prop of DATA_PROPS_TO_COPY) {
      if (aData && prop in aData) {
        this[prop] = aData[prop];
      } else {
        this[prop] = 0;
      }
    }
  }

  /**
   * Resets the duration instance to the default values, i.e. PT0S
   */
  reset() {
    this.isNegative = false;
    this.weeks = 0;
    this.days = 0;
    this.hours = 0;
    this.minutes = 0;
    this.seconds = 0;
  }

  /**
   * Compares the duration instance with another one.
   *
   * @param {Duration} aOther             The instance to compare with
   * @return {Number}                     -1, 0 or 1 for less/equal/greater
   */
  compare(aOther) {
    let thisSeconds = this.toSeconds();
    let otherSeconds = aOther.toSeconds();
    return (thisSeconds > otherSeconds) - (thisSeconds < otherSeconds);
  }

  /**
   * Normalizes the duration instance. For example, a duration with a value
   * of 61 seconds will be normalized to 1 minute and 1 second.
   */
  normalize() {
    this.fromSeconds(this.toSeconds());
  }

  /**
   * The string representation of this duration.
   * @return {String}
   */
  toString() {
    if (this.toSeconds() == 0) {
      return "PT0S";
    } else {
      let str = "";
      if (this.isNegative) str += "-";
      str += "P";
      let hasWeeks = false;
      if (this.weeks) {
        if (this.days || this.hours || this.minutes || this.seconds) {
          str += (this.weeks * 7 + this.days) + "D";
        } else {
          str += (this.weeks + "W");
          hasWeeks = true;
        }
      } else if (this.days) {
        str += (this.days + "D");
      }

      if (!hasWeeks) {
        if (this.hours || this.minutes || this.seconds) {
          str += "T";
          if (this.hours) {
            str += this.hours + "H";
          }

          if (this.minutes) {
            str += this.minutes + "M";
          }

          if (this.seconds) {
            str += this.seconds + "S";
          }
        }
      }

      return str;
    }
  }

  /**
   * The iCalendar string representation of this duration.
   * @return {String}
   */
  toICALString() {
    return this.toString();
  }
}

/**
 * Internal helper function to handle a chunk of a duration.
 *
 * @private
 * @param {String} letter type of duration chunk
 * @param {String} number numeric value or -/+
 * @param {Object} dict target to assign values to
 */
function parseDurationChunk(letter, number, object) {
  let type;
  switch (letter) {
    case 'P':
      if (number && number === '-') {
        object.isNegative = true;
      } else {
        object.isNegative = false;
      }
      // period
      break;
    case 'D':
      type = 'days';
      break;
    case 'W':
      type = 'weeks';
      break;
    case 'H':
      type = 'hours';
      break;
    case 'M':
      type = 'minutes';
      break;
    case 'S':
      type = 'seconds';
      break;
    default:
      // Not a valid chunk
      return 0;
  }

  if (type) {
    if (!number && number !== 0) {
      throw new Error(
        'invalid duration value: Missing number before "' + letter + '"'
      );
    }
    let num = parseInt(number, 10);
    if (isStrictlyNaN(num)) {
      throw new Error(
        'invalid duration value: Invalid number "' + number + '" before "' + letter + '"'
      );
    }
    object[type] = num;
  }

  return 1;
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 * @ignore
 * @typedef {import("./types.js").jCalComponent} jCalComponent
 * Imports the 'occurrenceDetails' type from the "types.js" module
 */

/**
 * This class represents the "period" value type, with various calculation and manipulation methods.
 *
 * @memberof ICAL
 */
class Period {
  /**
   * Creates a new {@link ICAL.Period} instance from the passed string.
   *
   * @param {String} str            The string to parse
   * @param {Property} prop         The property this period will be on
   * @return {Period}               The created period instance
   */
  static fromString(str, prop) {
    let parts = str.split('/');

    if (parts.length !== 2) {
      throw new Error(
        'Invalid string value: "' + str + '" must contain a "/" char.'
      );
    }

    let options = {
      start: Time.fromDateTimeString(parts[0], prop)
    };

    let end = parts[1];

    if (Duration.isValueString(end)) {
      options.duration = Duration.fromString(end);
    } else {
      options.end = Time.fromDateTimeString(end, prop);
    }

    return new Period(options);
  }

  /**
   * Creates a new {@link ICAL.Period} instance from the given data object.
   * The passed data object cannot contain both and end date and a duration.
   *
   * @param {Object} aData                  An object with members of the period
   * @param {Time=} aData.start             The start of the period
   * @param {Time=} aData.end               The end of the period
   * @param {Duration=} aData.duration      The duration of the period
   * @return {Period}                       The period instance
   */
  static fromData(aData) {
    return new Period(aData);
  }

  /**
   * Returns a new period instance from the given jCal data array. The first
   * member is always the start date string, the second member is either a
   * duration or end date string.
   *
   * @param {jCalComponent} aData           The jCal data array
   * @param {Property} aProp                The property this jCal data is on
   * @param {Boolean} aLenient              If true, data value can be both date and date-time
   * @return {Period}                       The period instance
   */
  static fromJSON(aData, aProp, aLenient) {
    function fromDateOrDateTimeString(aValue, dateProp) {
      if (aLenient) {
        return Time.fromString(aValue, dateProp);
      } else {
        return Time.fromDateTimeString(aValue, dateProp);
      }
    }

    if (Duration.isValueString(aData[1])) {
      return Period.fromData({
        start: fromDateOrDateTimeString(aData[0], aProp),
        duration: Duration.fromString(aData[1])
      });
    } else {
      return Period.fromData({
        start: fromDateOrDateTimeString(aData[0], aProp),
        end: fromDateOrDateTimeString(aData[1], aProp)
      });
    }
  }

  /**
   * Creates a new ICAL.Period instance. The passed data object cannot contain both and end date and
   * a duration.
   *
   * @param {Object} aData                  An object with members of the period
   * @param {Time=} aData.start             The start of the period
   * @param {Time=} aData.end               The end of the period
   * @param {Duration=} aData.duration      The duration of the period
   */
  constructor(aData) {
    this.wrappedJSObject = this;

    if (aData && 'start' in aData) {
      if (aData.start && !(aData.start instanceof Time)) {
        throw new TypeError('.start must be an instance of ICAL.Time');
      }
      this.start = aData.start;
    }

    if (aData && aData.end && aData.duration) {
      throw new Error('cannot accept both end and duration');
    }

    if (aData && 'end' in aData) {
      if (aData.end && !(aData.end instanceof Time)) {
        throw new TypeError('.end must be an instance of ICAL.Time');
      }
      this.end = aData.end;
    }

    if (aData && 'duration' in aData) {
      if (aData.duration && !(aData.duration instanceof Duration)) {
        throw new TypeError('.duration must be an instance of ICAL.Duration');
      }
      this.duration = aData.duration;
    }
  }


  /**
   * The start of the period
   * @type {Time}
   */
  start = null;

  /**
   * The end of the period
   * @type {Time}
   */
  end = null;

  /**
   * The duration of the period
   * @type {Duration}
   */
  duration = null;

  /**
   * The class identifier.
   * @constant
   * @type {String}
   * @default "icalperiod"
   */
  icalclass = "icalperiod";

  /**
   * The type name, to be used in the jCal object.
   * @constant
   * @type {String}
   * @default "period"
   */
  icaltype = "period";

  /**
   * Returns a clone of the duration object.
   *
   * @return {Period}      The cloned object
   */
  clone() {
    return Period.fromData({
      start: this.start ? this.start.clone() : null,
      end: this.end ? this.end.clone() : null,
      duration: this.duration ? this.duration.clone() : null
    });
  }

  /**
   * Calculates the duration of the period, either directly or by subtracting
   * start from end date.
   *
   * @return {Duration}      The calculated duration
   */
  getDuration() {
    if (this.duration) {
      return this.duration;
    } else {
      return this.end.subtractDate(this.start);
    }
  }

  /**
   * Calculates the end date of the period, either directly or by adding
   * duration to start date.
   *
   * @return {Time}          The calculated end date
   */
  getEnd() {
    if (this.end) {
      return this.end;
    } else {
      let end = this.start.clone();
      end.addDuration(this.duration);
      return end;
    }
  }

  /**
   * Compare this period with a date or other period. To maintain the logic where a.compare(b)
   * returns 1 when a > b, this function will return 1 when the period is after the date, 0 when the
   * date is within the period, and -1 when the period is before the date. When comparing two
   * periods, as soon as they overlap in any way this will return 0.
   *
   * @param {Time|Period} dt    The date or other period to compare with
   */
  compare(dt) {
    if (dt.compare(this.start) < 0) {
      return 1;
    } else if (dt.compare(this.getEnd()) > 0) {
      return -1;
    } else {
      return 0;
    }
  }

  /**
   * The string representation of this period.
   * @return {String}
   */
  toString() {
    return this.start + "/" + (this.end || this.duration);
  }

  /**
   * The jCal representation of this period type.
   * @return {Object}
   */
  toJSON() {
    return [this.start.toString(), (this.end || this.duration).toString()];
  }

  /**
   * The iCalendar string representation of this period.
   * @return {String}
   */
  toICALString() {
    return this.start.toICALString() + "/" +
           (this.end || this.duration).toICALString();
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 *
 * @ignore
 * @typedef {import("./types.js").weekDay} weekDay
 * Imports the 'weekDay' type from the "types.js" module
 *
 * @ignore
 * @typedef {import("./types.js").timeInit} timeInit
 * Imports the 'timeInit' type from the "types.js" module
 */

/**
 * @classdesc
 * iCalendar Time representation (similar to JS Date object).  Fully
 * independent of system (OS) timezone / time.  Unlike JS Date, the month
 * January is 1, not zero.
 *
 * @example
 * var time = new ICAL.Time({
 *   year: 2012,
 *   month: 10,
 *   day: 11
 *   minute: 0,
 *   second: 0,
 *   isDate: false
 * });
 *
 *
 * @memberof ICAL
*/
class Time {
  static _dowCache = {};
  static _wnCache = {};

  /**
   * Returns the days in the given month
   *
   * @param {Number} month      The month to check
   * @param {Number} year       The year to check
   * @return {Number}           The number of days in the month
   */
  static daysInMonth(month, year) {
    let _daysInMonth = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    let days = 30;

    if (month < 1 || month > 12) return days;

    days = _daysInMonth[month];

    if (month == 2) {
      days += Time.isLeapYear(year);
    }

    return days;
  }

  /**
   * Checks if the year is a leap year
   *
   * @param {Number} year       The year to check
   * @return {Boolean}          True, if the year is a leap year
   */
  static isLeapYear(year) {
    if (year <= 1752) {
      return ((year % 4) == 0);
    } else {
      return (((year % 4 == 0) && (year % 100 != 0)) || (year % 400 == 0));
    }
  }

  /**
   * Create a new ICAL.Time from the day of year and year. The date is returned
   * in floating timezone.
   *
   * @param {Number} aDayOfYear     The day of year
   * @param {Number} aYear          The year to create the instance in
   * @return {Time}                 The created instance with the calculated date
   */
  static fromDayOfYear(aDayOfYear, aYear) {
    let year = aYear;
    let doy = aDayOfYear;
    let tt = new Time();
    tt.auto_normalize = false;
    let is_leap = (Time.isLeapYear(year) ? 1 : 0);

    if (doy < 1) {
      year--;
      is_leap = (Time.isLeapYear(year) ? 1 : 0);
      doy += Time.daysInYearPassedMonth[is_leap][12];
      return Time.fromDayOfYear(doy, year);
    } else if (doy > Time.daysInYearPassedMonth[is_leap][12]) {
      is_leap = (Time.isLeapYear(year) ? 1 : 0);
      doy -= Time.daysInYearPassedMonth[is_leap][12];
      year++;
      return Time.fromDayOfYear(doy, year);
    }

    tt.year = year;
    tt.isDate = true;

    for (let month = 11; month >= 0; month--) {
      if (doy > Time.daysInYearPassedMonth[is_leap][month]) {
        tt.month = month + 1;
        tt.day = doy - Time.daysInYearPassedMonth[is_leap][month];
        break;
      }
    }

    tt.auto_normalize = true;
    return tt;
  }

  /**
   * Returns a new ICAL.Time instance from a date string, e.g 2015-01-02.
   *
   * @deprecated                Use {@link ICAL.Time.fromDateString} instead
   * @param {String} str        The string to create from
   * @return {Time}             The date/time instance
   */
  static fromStringv2(str) {
    return new Time({
      year: parseInt(str.slice(0, 4), 10),
      month: parseInt(str.slice(5, 7), 10),
      day: parseInt(str.slice(8, 10), 10),
      isDate: true
    });
  }

  /**
   * Returns a new ICAL.Time instance from a date string, e.g 2015-01-02.
   *
   * @param {String} aValue     The string to create from
   * @return {Time}             The date/time instance
   */
  static fromDateString(aValue) {
    // Dates should have no timezone.
    // Google likes to sometimes specify Z on dates
    // we specifically ignore that to avoid issues.

    // YYYY-MM-DD
    // 2012-10-10
    return new Time({
      year: strictParseInt(aValue.slice(0, 4)),
      month: strictParseInt(aValue.slice(5, 7)),
      day: strictParseInt(aValue.slice(8, 10)),
      isDate: true
    });
  }

  /**
   * Returns a new ICAL.Time instance from a date-time string, e.g
   * 2015-01-02T03:04:05. If a property is specified, the timezone is set up
   * from the property's TZID parameter.
   *
   * @param {String} aValue         The string to create from
   * @param {Property=} prop        The property the date belongs to
   * @return {Time}                 The date/time instance
   */
  static fromDateTimeString(aValue, prop) {
    if (aValue.length < 19) {
      throw new Error(
        'invalid date-time value: "' + aValue + '"'
      );
    }

    let zone;
    let zoneId;

    if (aValue.slice(-1) === 'Z') {
      zone = Timezone.utcTimezone;
    } else if (prop) {
      zoneId = prop.getParameter('tzid');

      if (prop.parent) {
        if (prop.parent.name === 'standard' || prop.parent.name === 'daylight') {
          // Per RFC 5545 3.8.2.4 and 3.8.2.2, start/end date-times within
          // these components MUST be specified in local time.
          zone = Timezone.localTimezone;
        } else if (zoneId) {
          // If the desired time zone is defined within the component tree,
          // fetch its definition and prefer that.
          zone = prop.parent.getTimeZoneByID(zoneId);
        }
      }
    }

    const timeData = {
      year: strictParseInt(aValue.slice(0, 4)),
      month: strictParseInt(aValue.slice(5, 7)),
      day: strictParseInt(aValue.slice(8, 10)),
      hour: strictParseInt(aValue.slice(11, 13)),
      minute: strictParseInt(aValue.slice(14, 16)),
      second: strictParseInt(aValue.slice(17, 19)),
    };

    // Although RFC 5545 requires that all TZIDs used within a file have a
    // corresponding time zone definition, we may not be parsing the full file
    // or we may be dealing with a non-compliant file; in either case, we can
    // check our own time zone service for the TZID in a last-ditch effort.
    if (zoneId && !zone) {
      timeData.timezone = zoneId;
    }

    // 2012-10-10T10:10:10(Z)?
    return new Time(timeData, zone);
  }

  /**
   * Returns a new ICAL.Time instance from a date or date-time string,
   *
   * @param {String} aValue         The string to create from
   * @param {Property=} prop        The property the date belongs to
   * @return {Time}                 The date/time instance
   */
  static fromString(aValue, aProperty) {
    if (aValue.length > 10) {
      return Time.fromDateTimeString(aValue, aProperty);
    } else {
      return Time.fromDateString(aValue);
    }
  }

  /**
   * Creates a new ICAL.Time instance from the given Javascript Date.
   *
   * @param {?Date} aDate             The Javascript Date to read, or null to reset
   * @param {Boolean} [useUTC=false]  If true, the UTC values of the date will be used
   */
  static fromJSDate(aDate, useUTC) {
    let tt = new Time();
    return tt.fromJSDate(aDate, useUTC);
  }

  /**
   * Creates a new ICAL.Time instance from the the passed data object.
   *
   * @param {timeInit} aData          Time initialization
   * @param {Timezone=} aZone         Timezone this position occurs in
   */
  static fromData = function fromData(aData, aZone) {
    let t = new Time();
    return t.fromData(aData, aZone);
  };

  /**
   * Creates a new ICAL.Time instance from the current moment.
   * The instance is “floating” - has no timezone relation.
   * To create an instance considering the time zone, call
   * ICAL.Time.fromJSDate(new Date(), true)
   * @return {Time}
   */
  static now() {
    return Time.fromJSDate(new Date(), false);
  }

  /**
   * Returns the date on which ISO week number 1 starts.
   *
   * @see Time#weekNumber
   * @param {Number} aYear                  The year to search in
   * @param {weekDay=} aWeekStart           The week start weekday, used for calculation.
   * @return {Time}                         The date on which week number 1 starts
   */
  static weekOneStarts(aYear, aWeekStart) {
    let t = Time.fromData({
      year: aYear,
      month: 1,
      day: 1,
      isDate: true
    });

    let dow = t.dayOfWeek();
    let wkst = aWeekStart || Time.DEFAULT_WEEK_START;
    if (dow > Time.THURSDAY) {
      t.day += 7;
    }
    if (wkst > Time.THURSDAY) {
      t.day -= 7;
    }

    t.day -= dow - wkst;

    return t;
  }

  /**
   * Get the dominical letter for the given year. Letters range from A - G for
   * common years, and AG to GF for leap years.
   *
   * @param {Number} yr           The year to retrieve the letter for
   * @return {String}             The dominical letter.
   */
  static getDominicalLetter(yr) {
    let LTRS = "GFEDCBA";
    let dom = (yr + (yr / 4 | 0) + (yr / 400 | 0) - (yr / 100 | 0) - 1) % 7;
    let isLeap = Time.isLeapYear(yr);
    if (isLeap) {
      return LTRS[(dom + 6) % 7] + LTRS[dom];
    } else {
      return LTRS[dom];
    }
  }

  static #epochTime = null;
  /**
   * January 1st, 1970 as an ICAL.Time.
   * @type {Time}
   * @constant
   * @instance
   */
  static get epochTime() {
    if (!this.#epochTime) {
      this.#epochTime = Time.fromData({
        year: 1970,
        month: 1,
        day: 1,
        hour: 0,
        minute: 0,
        second: 0,
        isDate: false,
        timezone: "Z"
      });
    }
    return this.#epochTime;
  }

  static _cmp_attr(a, b, attr) {
    if (a[attr] > b[attr]) return 1;
    if (a[attr] < b[attr]) return -1;
    return 0;
  }

  /**
   * The days that have passed in the year after a given month. The array has
   * two members, one being an array of passed days for non-leap years, the
   * other analog for leap years.
   * @example
   * var isLeapYear = ICAL.Time.isLeapYear(year);
   * var passedDays = ICAL.Time.daysInYearPassedMonth[isLeapYear][month];
   * @type {Array.<Array.<Number>>}
   */
  static daysInYearPassedMonth = [
    [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 365],
    [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335, 366]
  ];

  static SUNDAY = 1;
  static MONDAY = 2;
  static TUESDAY = 3;
  static WEDNESDAY = 4;
  static THURSDAY = 5;
  static FRIDAY = 6;
  static SATURDAY = 7;

  /**
   * The default weekday for the WKST part.
   * @constant
   * @default ICAL.Time.MONDAY
   */
  static DEFAULT_WEEK_START = 2; // MONDAY

  /**
   * Creates a new ICAL.Time instance.
   *
   * @param {timeInit} data           Time initialization
   * @param {Timezone} zone           timezone this position occurs in
   */
  constructor(data, zone) {
    this.wrappedJSObject = this;

    /**
     * @type {timeInit}
     * @private
     */
    this._time = Object.create(null);

    /* time defaults */
    this._time.year = 0;
    this._time.month = 1;
    this._time.day = 1;
    this._time.hour = 0;
    this._time.minute = 0;
    this._time.second = 0;
    this._time.isDate = false;

    this.fromData(data, zone);
  }

  /**
   * The class identifier.
   * @constant
   * @type {String}
   * @default "icaltime"
   */
  icalclass = "icaltime";
  _cachedUnixTime = null;

  /**
   * The type name, to be used in the jCal object. This value may change and
   * is strictly defined by the {@link ICAL.Time#isDate isDate} member.
   * @type {String}
   * @default "date-time"
   */
  get icaltype() {
    return this.isDate ? 'date' : 'date-time';
  }

  /**
   * The timezone for this time.
   * @type {Timezone}
   */
  zone = null;

  /**
   * Internal uses to indicate that a change has been made and the next read
   * operation must attempt to normalize the value (for example changing the
   * day to 33).
   *
   * @type {Boolean}
   * @private
   */
  _pendingNormalization = false;

  /**
   * The year of this date.
   * @type {Number}
   */
  get year() {
    return this._getTimeAttr('year');
  }

  set year(val) {
    this._setTimeAttr('year', val);
  }

  /**
   * The month of this date.
   * @type {Number}
   */
  get month() {
    return this._getTimeAttr('month');
  }

  set month(val) {
    this._setTimeAttr('month', val);
  }

  /**
   * The day of this date.
   * @type {Number}
   */
  get day() {
    return this._getTimeAttr('day');
  }

  set day(val) {
    this._setTimeAttr('day', val);
  }

  /**
   * The hour of this date-time.
   * @type {Number}
   */
  get hour() {
    return this._getTimeAttr('hour');
  }

  set hour(val) {
    this._setTimeAttr('hour', val);
  }

  /**
   * The minute of this date-time.
   * @type {Number}
   */
  get minute() {
    return this._getTimeAttr('minute');
  }

  set minute(val) {
    this._setTimeAttr('minute', val);
  }

  /**
   * The second of this date-time.
   * @type {Number}
   */
  get second() {
    return this._getTimeAttr('second');
  }

  set second(val) {
    this._setTimeAttr('second', val);
  }

  /**
   * If true, the instance represents a date (as opposed to a date-time)
   * @type {Boolean}
   */
  get isDate() {
    return this._getTimeAttr('isDate');
  }

  set isDate(val) {
    this._setTimeAttr('isDate', val);
  }

  /**
   * @private
   * @param {String} attr             Attribute to get (one of: year, month,
   *                                  day, hour, minute, second, isDate)
   * @return {Number|Boolean}         Current value for the attribute
   */
  _getTimeAttr(attr) {
    if (this._pendingNormalization) {
      this._normalize();
      this._pendingNormalization = false;
    }

    return this._time[attr];
  }

  /**
   * @private
   * @param {String} attr             Attribute to set (one of: year, month,
   *                                  day, hour, minute, second, isDate)
   * @param {Number|Boolean} val      New value for the attribute
   */
  _setTimeAttr(attr, val) {
    // Check if isDate will be set and if was not set to normalize date.
    // This avoids losing days when seconds, minutes and hours are zeroed
    // what normalize will do when time is a date.
    if (attr === "isDate" && val && !this._time.isDate) {
      this.adjust(0, 0, 0, 0);
    }
    this._cachedUnixTime = null;
    this._pendingNormalization = true;
    this._time[attr] = val;
  }

  /**
   * Returns a clone of the time object.
   *
   * @return {Time}              The cloned object
   */
  clone() {
    return new Time(this._time, this.zone);
  }

  /**
   * Reset the time instance to epoch time
   */
  reset() {
    this.fromData(Time.epochTime);
    this.zone = Timezone.utcTimezone;
  }

  /**
   * Reset the time instance to the given date/time values.
   *
   * @param {Number} year             The year to set
   * @param {Number} month            The month to set
   * @param {Number} day              The day to set
   * @param {Number} hour             The hour to set
   * @param {Number} minute           The minute to set
   * @param {Number} second           The second to set
   * @param {Timezone} timezone       The timezone to set
   */
  resetTo(year, month, day, hour, minute, second, timezone) {
    this.fromData({
      year: year,
      month: month,
      day: day,
      hour: hour,
      minute: minute,
      second: second,
      zone: timezone
    });
  }

  /**
   * Set up the current instance from the Javascript date value.
   *
   * @param {?Date} aDate             The Javascript Date to read, or null to reset
   * @param {Boolean} [useUTC=false]  If true, the UTC values of the date will be used
   */
  fromJSDate(aDate, useUTC) {
    if (!aDate) {
      this.reset();
    } else {
      if (useUTC) {
        this.zone = Timezone.utcTimezone;
        this.year = aDate.getUTCFullYear();
        this.month = aDate.getUTCMonth() + 1;
        this.day = aDate.getUTCDate();
        this.hour = aDate.getUTCHours();
        this.minute = aDate.getUTCMinutes();
        this.second = aDate.getUTCSeconds();
      } else {
        this.zone = Timezone.localTimezone;
        this.year = aDate.getFullYear();
        this.month = aDate.getMonth() + 1;
        this.day = aDate.getDate();
        this.hour = aDate.getHours();
        this.minute = aDate.getMinutes();
        this.second = aDate.getSeconds();
      }
    }
    this._cachedUnixTime = null;
    return this;
  }

  /**
   * Sets up the current instance using members from the passed data object.
   *
   * @param {timeInit} aData          Time initialization
   * @param {Timezone=} aZone         Timezone this position occurs in
   */
  fromData(aData, aZone) {
    if (aData) {
      for (let [key, value] of Object.entries(aData)) {
          // ical type cannot be set
          if (key === 'icaltype') continue;
        this[key] = value;
      }
    }

    if (aZone) {
      this.zone = aZone;
    }

    if (aData && !("isDate" in aData)) {
      this.isDate = !("hour" in aData);
    } else if (aData && ("isDate" in aData)) {
      this.isDate = aData.isDate;
    }

    if (aData && "timezone" in aData) {
      let zone = TimezoneService.get(
        aData.timezone
      );

      this.zone = zone || Timezone.localTimezone;
    }

    if (aData && "zone" in aData) {
      this.zone = aData.zone;
    }

    if (!this.zone) {
      this.zone = Timezone.localTimezone;
    }

    this._cachedUnixTime = null;
    return this;
  }

  /**
   * Calculate the day of week.
   * @param {weekDay=} aWeekStart
   *        The week start weekday, defaults to SUNDAY
   * @return {weekDay}
   */
  dayOfWeek(aWeekStart) {
    let firstDow = aWeekStart || Time.SUNDAY;
    let dowCacheKey = (this.year << 12) + (this.month << 8) + (this.day << 3) + firstDow;
    if (dowCacheKey in Time._dowCache) {
      return Time._dowCache[dowCacheKey];
    }

    // Using Zeller's algorithm
    let q = this.day;
    let m = this.month + (this.month < 3 ? 12 : 0);
    let Y = this.year - (this.month < 3 ? 1 : 0);

    let h = (q + Y + trunc(((m + 1) * 26) / 10) + trunc(Y / 4));
    { // eslint-disable-line no-constant-condition
      h += trunc(Y / 100) * 6 + trunc(Y / 400);
    }

    // Normalize to 1 = wkst
    h = ((h + 7 - firstDow) % 7) + 1;
    Time._dowCache[dowCacheKey] = h;
    return h;
  }

  /**
   * Calculate the day of year.
   * @return {Number}
   */
  dayOfYear() {
    let is_leap = (Time.isLeapYear(this.year) ? 1 : 0);
    let diypm = Time.daysInYearPassedMonth;
    return diypm[is_leap][this.month - 1] + this.day;
  }

  /**
   * Returns a copy of the current date/time, rewound to the start of the
   * week. The resulting ICAL.Time instance is of icaltype date, even if this
   * is a date-time.
   *
   * @param {weekDay=} aWeekStart
   *        The week start weekday, defaults to SUNDAY
   * @return {Time}      The start of the week (cloned)
   */
  startOfWeek(aWeekStart) {
    let firstDow = aWeekStart || Time.SUNDAY;
    let result = this.clone();
    result.day -= ((this.dayOfWeek() + 7 - firstDow) % 7);
    result.isDate = true;
    result.hour = 0;
    result.minute = 0;
    result.second = 0;
    return result;
  }

  /**
   * Returns a copy of the current date/time, shifted to the end of the week.
   * The resulting ICAL.Time instance is of icaltype date, even if this is a
   * date-time.
   *
   * @param {weekDay=} aWeekStart
   *        The week start weekday, defaults to SUNDAY
   * @return {Time}      The end of the week (cloned)
   */
  endOfWeek(aWeekStart) {
    let firstDow = aWeekStart || Time.SUNDAY;
    let result = this.clone();
    result.day += (7 - this.dayOfWeek() + firstDow - Time.SUNDAY) % 7;
    result.isDate = true;
    result.hour = 0;
    result.minute = 0;
    result.second = 0;
    return result;
  }

  /**
   * Returns a copy of the current date/time, rewound to the start of the
   * month. The resulting ICAL.Time instance is of icaltype date, even if
   * this is a date-time.
   *
   * @return {Time}      The start of the month (cloned)
   */
  startOfMonth() {
    let result = this.clone();
    result.day = 1;
    result.isDate = true;
    result.hour = 0;
    result.minute = 0;
    result.second = 0;
    return result;
  }

  /**
   * Returns a copy of the current date/time, shifted to the end of the
   * month.  The resulting ICAL.Time instance is of icaltype date, even if
   * this is a date-time.
   *
   * @return {Time}      The end of the month (cloned)
   */
  endOfMonth() {
    let result = this.clone();
    result.day = Time.daysInMonth(result.month, result.year);
    result.isDate = true;
    result.hour = 0;
    result.minute = 0;
    result.second = 0;
    return result;
  }

  /**
   * Returns a copy of the current date/time, rewound to the start of the
   * year. The resulting ICAL.Time instance is of icaltype date, even if
   * this is a date-time.
   *
   * @return {Time}      The start of the year (cloned)
   */
  startOfYear() {
    let result = this.clone();
    result.day = 1;
    result.month = 1;
    result.isDate = true;
    result.hour = 0;
    result.minute = 0;
    result.second = 0;
    return result;
  }

  /**
   * Returns a copy of the current date/time, shifted to the end of the
   * year.  The resulting ICAL.Time instance is of icaltype date, even if
   * this is a date-time.
   *
   * @return {Time}      The end of the year (cloned)
   */
  endOfYear() {
    let result = this.clone();
    result.day = 31;
    result.month = 12;
    result.isDate = true;
    result.hour = 0;
    result.minute = 0;
    result.second = 0;
    return result;
  }

  /**
   * First calculates the start of the week, then returns the day of year for
   * this date. If the day falls into the previous year, the day is zero or negative.
   *
   * @param {weekDay=} aFirstDayOfWeek
   *        The week start weekday, defaults to SUNDAY
   * @return {Number}     The calculated day of year
   */
  startDoyWeek(aFirstDayOfWeek) {
    let firstDow = aFirstDayOfWeek || Time.SUNDAY;
    let delta = this.dayOfWeek() - firstDow;
    if (delta < 0) delta += 7;
    return this.dayOfYear() - delta;
  }

  /**
   * Get the dominical letter for the current year. Letters range from A - G
   * for common years, and AG to GF for leap years.
   *
   * @param {Number} yr           The year to retrieve the letter for
   * @return {String}             The dominical letter.
   */
  getDominicalLetter() {
    return Time.getDominicalLetter(this.year);
  }

  /**
   * Finds the nthWeekDay relative to the current month (not day).  The
   * returned value is a day relative the month that this month belongs to so
   * 1 would indicate the first of the month and 40 would indicate a day in
   * the following month.
   *
   * @param {Number} aDayOfWeek   Day of the week see the day name constants
   * @param {Number} aPos         Nth occurrence of a given week day values
   *        of 1 and 0 both indicate the first weekday of that type. aPos may
   *        be either positive or negative
   *
   * @return {Number} numeric value indicating a day relative
   *                   to the current month of this time object
   */
  nthWeekDay(aDayOfWeek, aPos) {
    let daysInMonth = Time.daysInMonth(this.month, this.year);
    let weekday;
    let pos = aPos;

    let start = 0;

    let otherDay = this.clone();

    if (pos >= 0) {
      otherDay.day = 1;

      // because 0 means no position has been given
      // 1 and 0 indicate the same day.
      if (pos != 0) {
        // remove the extra numeric value
        pos--;
      }

      // set current start offset to current day.
      start = otherDay.day;

      // find the current day of week
      let startDow = otherDay.dayOfWeek();

      // calculate the difference between current
      // day of the week and desired day of the week
      let offset = aDayOfWeek - startDow;


      // if the offset goes into the past
      // week we add 7 so it goes into the next
      // week. We only want to go forward in time here.
      if (offset < 0)
        // this is really important otherwise we would
        // end up with dates from in the past.
        offset += 7;

      // add offset to start so start is the same
      // day of the week as the desired day of week.
      start += offset;

      // because we are going to add (and multiply)
      // the numeric value of the day we subtract it
      // from the start position so not to add it twice.
      start -= aDayOfWeek;

      // set week day
      weekday = aDayOfWeek;
    } else {

      // then we set it to the last day in the current month
      otherDay.day = daysInMonth;

      // find the ends weekday
      let endDow = otherDay.dayOfWeek();

      pos++;

      weekday = (endDow - aDayOfWeek);

      if (weekday < 0) {
        weekday += 7;
      }

      weekday = daysInMonth - weekday;
    }

    weekday += pos * 7;

    return start + weekday;
  }

  /**
   * Checks if current time is the nth weekday, relative to the current
   * month.  Will always return false when rule resolves outside of current
   * month.
   *
   * @param {weekDay} aDayOfWeek                 Day of week to check
   * @param {Number} aPos                        Relative position
   * @return {Boolean}                           True, if it is the nth weekday
   */
  isNthWeekDay(aDayOfWeek, aPos) {
    let dow = this.dayOfWeek();

    if (aPos === 0 && dow === aDayOfWeek) {
      return true;
    }

    // get pos
    let day = this.nthWeekDay(aDayOfWeek, aPos);

    if (day === this.day) {
      return true;
    }

    return false;
  }

  /**
   * Calculates the ISO 8601 week number. The first week of a year is the
   * week that contains the first Thursday. The year can have 53 weeks, if
   * January 1st is a Friday.
   *
   * Note there are regions where the first week of the year is the one that
   * starts on January 1st, which may offset the week number. Also, if a
   * different week start is specified, this will also affect the week
   * number.
   *
   * @see Time.weekOneStarts
   * @param {weekDay} aWeekStart                  The weekday the week starts with
   * @return {Number}                             The ISO week number
   */
  weekNumber(aWeekStart) {
    let wnCacheKey = (this.year << 12) + (this.month << 8) + (this.day << 3) + aWeekStart;
    if (wnCacheKey in Time._wnCache) {
      return Time._wnCache[wnCacheKey];
    }
    // This function courtesty of Julian Bucknall, published under the MIT license
    // http://www.boyet.com/articles/publishedarticles/calculatingtheisoweeknumb.html
    // plus some fixes to be able to use different week starts.
    let week1;

    let dt = this.clone();
    dt.isDate = true;
    let isoyear = this.year;

    if (dt.month == 12 && dt.day > 25) {
      week1 = Time.weekOneStarts(isoyear + 1, aWeekStart);
      if (dt.compare(week1) < 0) {
        week1 = Time.weekOneStarts(isoyear, aWeekStart);
      } else {
        isoyear++;
      }
    } else {
      week1 = Time.weekOneStarts(isoyear, aWeekStart);
      if (dt.compare(week1) < 0) {
        week1 = Time.weekOneStarts(--isoyear, aWeekStart);
      }
    }

    let daysBetween = (dt.subtractDate(week1).toSeconds() / 86400);
    let answer = trunc(daysBetween / 7) + 1;
    Time._wnCache[wnCacheKey] = answer;
    return answer;
  }

  /**
   * Adds the duration to the current time. The instance is modified in
   * place.
   *
   * @param {Duration} aDuration         The duration to add
   */
  addDuration(aDuration) {
    let mult = (aDuration.isNegative ? -1 : 1);

    // because of the duration optimizations it is much
    // more efficient to grab all the values up front
    // then set them directly (which will avoid a normalization call).
    // So we don't actually normalize until we need it.
    let second = this.second;
    let minute = this.minute;
    let hour = this.hour;
    let day = this.day;

    second += mult * aDuration.seconds;
    minute += mult * aDuration.minutes;
    hour += mult * aDuration.hours;
    day += mult * aDuration.days;
    day += mult * 7 * aDuration.weeks;

    this.second = second;
    this.minute = minute;
    this.hour = hour;
    this.day = day;

    this._cachedUnixTime = null;
  }

  /**
   * Subtract the date details (_excluding_ timezone).  Useful for finding
   * the relative difference between two time objects excluding their
   * timezone differences.
   *
   * @param {Time} aDate     The date to subtract
   * @return {Duration}      The difference as a duration
   */
  subtractDate(aDate) {
    let unixTime = this.toUnixTime() + this.utcOffset();
    let other = aDate.toUnixTime() + aDate.utcOffset();
    return Duration.fromSeconds(unixTime - other);
  }

  /**
   * Subtract the date details, taking timezones into account.
   *
   * @param {Time} aDate  The date to subtract
   * @return {Duration}   The difference in duration
   */
  subtractDateTz(aDate) {
    let unixTime = this.toUnixTime();
    let other = aDate.toUnixTime();
    return Duration.fromSeconds(unixTime - other);
  }

  /**
   * Compares the ICAL.Time instance with another one, or a period.
   *
   * @param {Time|Period} aOther                  The instance to compare with
   * @return {Number}                             -1, 0 or 1 for less/equal/greater
   */
  compare(other) {
    if (other instanceof Period) {
      return -1 * other.compare(this);
    } else {
      let a = this.toUnixTime();
      let b = other.toUnixTime();

      if (a > b) return 1;
      if (b > a) return -1;
      return 0;
    }
  }

  /**
   * Compares only the date part of this instance with another one.
   *
   * @param {Time} other                  The instance to compare with
   * @param {Timezone} tz                 The timezone to compare in
   * @return {Number}                     -1, 0 or 1 for less/equal/greater
   */
  compareDateOnlyTz(other, tz) {
    let a = this.convertToZone(tz);
    let b = other.convertToZone(tz);
    let rc = 0;

    if ((rc = Time._cmp_attr(a, b, "year")) != 0) return rc;
    if ((rc = Time._cmp_attr(a, b, "month")) != 0) return rc;
    if ((rc = Time._cmp_attr(a, b, "day")) != 0) return rc;

    return rc;
  }

  /**
   * Convert the instance into another timezone. The returned ICAL.Time
   * instance is always a copy.
   *
   * @param {Timezone} zone      The zone to convert to
   * @return {Time}              The copy, converted to the zone
   */
  convertToZone(zone) {
    let copy = this.clone();
    let zone_equals = (this.zone.tzid == zone.tzid);

    if (!this.isDate && !zone_equals) {
      Timezone.convert_time(copy, this.zone, zone);
    }

    copy.zone = zone;
    return copy;
  }

  /**
   * Calculates the UTC offset of the current date/time in the timezone it is
   * in.
   *
   * @return {Number}     UTC offset in seconds
   */
  utcOffset() {
    if (this.zone == Timezone.localTimezone ||
        this.zone == Timezone.utcTimezone) {
      return 0;
    } else {
      return this.zone.utcOffset(this);
    }
  }

  /**
   * Returns an RFC 5545 compliant ical representation of this object.
   *
   * @return {String} ical date/date-time
   */
  toICALString() {
    let string = this.toString();

    if (string.length > 10) {
      return design.icalendar.value['date-time'].toICAL(string);
    } else {
      return design.icalendar.value.date.toICAL(string);
    }
  }

  /**
   * The string representation of this date/time, in jCal form
   * (including : and - separators).
   * @return {String}
   */
  toString() {
    let result = this.year + '-' +
                 pad2(this.month) + '-' +
                 pad2(this.day);

    if (!this.isDate) {
        result += 'T' + pad2(this.hour) + ':' +
                  pad2(this.minute) + ':' +
                  pad2(this.second);

      if (this.zone === Timezone.utcTimezone) {
        result += 'Z';
      }
    }

    return result;
  }

  /**
   * Converts the current instance to a Javascript date
   * @return {Date}
   */
  toJSDate() {
    if (this.zone == Timezone.localTimezone) {
      if (this.isDate) {
        return new Date(this.year, this.month - 1, this.day);
      } else {
        return new Date(this.year, this.month - 1, this.day,
                        this.hour, this.minute, this.second, 0);
      }
    } else {
      return new Date(this.toUnixTime() * 1000);
    }
  }

  _normalize() {
    if (this._time.isDate) {
      this._time.hour = 0;
      this._time.minute = 0;
      this._time.second = 0;
    }
    this.adjust(0, 0, 0, 0);

    return this;
  }

  /**
   * Adjust the date/time by the given offset
   *
   * @param {Number} aExtraDays       The extra amount of days
   * @param {Number} aExtraHours      The extra amount of hours
   * @param {Number} aExtraMinutes    The extra amount of minutes
   * @param {Number} aExtraSeconds    The extra amount of seconds
   * @param {Number=} aTime           The time to adjust, defaults to the
   *                                    current instance.
   */
  adjust(aExtraDays, aExtraHours, aExtraMinutes, aExtraSeconds, aTime) {

    let minutesOverflow, hoursOverflow,
        daysOverflow = 0, yearsOverflow = 0;

    let second, minute, hour, day;
    let daysInMonth;

    let time = aTime || this._time;

    if (!time.isDate) {
      second = time.second + aExtraSeconds;
      time.second = second % 60;
      minutesOverflow = trunc(second / 60);
      if (time.second < 0) {
        time.second += 60;
        minutesOverflow--;
      }

      minute = time.minute + aExtraMinutes + minutesOverflow;
      time.minute = minute % 60;
      hoursOverflow = trunc(minute / 60);
      if (time.minute < 0) {
        time.minute += 60;
        hoursOverflow--;
      }

      hour = time.hour + aExtraHours + hoursOverflow;

      time.hour = hour % 24;
      daysOverflow = trunc(hour / 24);
      if (time.hour < 0) {
        time.hour += 24;
        daysOverflow--;
      }
    }


    // Adjust month and year first, because we need to know what month the day
    // is in before adjusting it.
    if (time.month > 12) {
      yearsOverflow = trunc((time.month - 1) / 12);
    } else if (time.month < 1) {
      yearsOverflow = trunc(time.month / 12) - 1;
    }

    time.year += yearsOverflow;
    time.month -= 12 * yearsOverflow;

    // Now take care of the days (and adjust month if needed)
    day = time.day + aExtraDays + daysOverflow;

    if (day > 0) {
      for (;;) {
        daysInMonth = Time.daysInMonth(time.month, time.year);
        if (day <= daysInMonth) {
          break;
        }

        time.month++;
        if (time.month > 12) {
          time.year++;
          time.month = 1;
        }

        day -= daysInMonth;
      }
    } else {
      while (day <= 0) {
        if (time.month == 1) {
          time.year--;
          time.month = 12;
        } else {
          time.month--;
        }

        day += Time.daysInMonth(time.month, time.year);
      }
    }

    time.day = day;

    this._cachedUnixTime = null;
    return this;
  }

  /**
   * Sets up the current instance from unix time, the number of seconds since
   * January 1st, 1970.
   *
   * @param {Number} seconds      The seconds to set up with
   */
  fromUnixTime(seconds) {
    this.zone = Timezone.utcTimezone;
    // We could use `fromJSDate` here, but this is about twice as fast.
    // We could also clone `epochTime` and use `adjust` for a more
    // ical.js-centric approach, but this is about 100 times as fast.
    let date = new Date(seconds * 1000);
    this.year = date.getUTCFullYear();
    this.month = date.getUTCMonth() + 1;
    this.day = date.getUTCDate();
    if (this._time.isDate) {
      this.hour = 0;
      this.minute = 0;
      this.second = 0;
    } else {
      this.hour = date.getUTCHours();
      this.minute = date.getUTCMinutes();
      this.second = date.getUTCSeconds();
    }

    this._cachedUnixTime = null;
  }

  /**
   * Converts the current instance to seconds since January 1st 1970.
   *
   * @return {Number}         Seconds since 1970
   */
  toUnixTime() {
    if (this._cachedUnixTime !== null) {
      return this._cachedUnixTime;
    }
    let offset = this.utcOffset();

    // we use the offset trick to ensure
    // that we are getting the actual UTC time
    let ms = Date.UTC(
      this.year,
      this.month - 1,
      this.day,
      this.hour,
      this.minute,
      this.second - offset
    );

    // seconds
    this._cachedUnixTime = ms / 1000;
    return this._cachedUnixTime;
  }

  /**
   * Converts time to into Object which can be serialized then re-created
   * using the constructor.
   *
   * @example
   * // toJSON will automatically be called
   * var json = JSON.stringify(mytime);
   *
   * var deserialized = JSON.parse(json);
   *
   * var time = new ICAL.Time(deserialized);
   *
   * @return {Object}
   */
  toJSON() {
    let copy = [
      'year',
      'month',
      'day',
      'hour',
      'minute',
      'second',
      'isDate'
    ];

    let result = Object.create(null);

    let i = 0;
    let len = copy.length;
    let prop;

    for (; i < len; i++) {
      prop = copy[i];
      result[prop] = this[prop];
    }

    if (this.zone) {
      result.timezone = this.zone.tzid;
    }

    return result;
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 *
 * @ignore
 * @typedef {import("./types.js").parserState} parserState
 * Imports the 'parserState' type from the "types.js" module
 * @typedef {import("./types.js").designSet} designSet
 * Imports the 'designSet' type from the "types.js" module
 */

const CHAR = /[^ \t]/;
const VALUE_DELIMITER = ':';
const PARAM_DELIMITER = ';';
const PARAM_NAME_DELIMITER = '=';
const DEFAULT_VALUE_TYPE$1 = 'unknown';
const DEFAULT_PARAM_TYPE = 'text';
const RFC6868_REPLACE_MAP$1 = { "^'": '"', "^n": "\n", "^^": "^" };

/**
 * Parses iCalendar or vCard data into a raw jCal object. Consult
 * documentation on the {@tutorial layers|layers of parsing} for more
 * details.
 *
 * @function ICAL.parse
 * @memberof ICAL
 * @variation function
 * @todo Fix the API to be more clear on the return type
 * @param {String} input      The string data to parse
 * @return {Object|Object[]}  A single jCal object, or an array thereof
 */
function parse(input) {
  let state = {};
  let root = state.component = [];

  state.stack = [root];

  parse._eachLine(input, function(err, line) {
    parse._handleContentLine(line, state);
  });


  // when there are still items on the stack
  // throw a fatal error, a component was not closed
  // correctly in that case.
  if (state.stack.length > 1) {
    throw new ParserError(
      'invalid ical body. component began but did not end'
    );
  }

  state = null;

  return (root.length == 1 ? root[0] : root);
}

/**
 * Parse an iCalendar property value into the jCal for a single property
 *
 * @function ICAL.parse.property
 * @param {String} str
 *   The iCalendar property string to parse
 * @param {designSet=} designSet
 *   The design data to use for this property
 * @return {Object}
 *   The jCal Object containing the property
 */
parse.property = function(str, designSet) {
  let state = {
    component: [[], []],
    designSet: designSet || design.defaultSet
  };
  parse._handleContentLine(str, state);
  return state.component[1][0];
};

/**
 * Convenience method to parse a component. You can use ICAL.parse() directly
 * instead.
 *
 * @function ICAL.parse.component
 * @see ICAL.parse(function)
 * @param {String} str    The iCalendar component string to parse
 * @return {Object}       The jCal Object containing the component
 */
parse.component = function(str) {
  return parse(str);
};


/**
 * An error that occurred during parsing.
 *
 * @param {String} message        The error message
 * @memberof ICAL.parse
 * @extends {Error}
 */
class ParserError extends Error {
  name = this.constructor.name;
}

// classes & constants
parse.ParserError = ParserError;


/**
 * Handles a single line of iCalendar/vCard, updating the state.
 *
 * @private
 * @function ICAL.parse._handleContentLine
 * @param {String} line          The content line to process
 * @param {parserState} state    The current state of the line parsing
 */
parse._handleContentLine = function(line, state) {
  // break up the parts of the line
  let valuePos = line.indexOf(VALUE_DELIMITER);
  let paramPos = line.indexOf(PARAM_DELIMITER);

  let lastParamIndex;
  let lastValuePos;

  // name of property or begin/end
  let name;
  let value;
  // params is only overridden if paramPos !== -1.
  // we can't do params = params || {} later on
  // because it sacrifices ops.
  let params = {};

  /**
   * Different property cases
   *
   *
   * 1. RRULE:FREQ=foo
   *    // FREQ= is not a param but the value
   *
   * 2. ATTENDEE;ROLE=REQ-PARTICIPANT;
   *    // ROLE= is a param because : has not happened yet
   */
    // when the parameter delimiter is after the
    // value delimiter then it is not a parameter.

  if ((paramPos !== -1 && valuePos !== -1)) {
    // when the parameter delimiter is after the
    // value delimiter then it is not a parameter.
    if (paramPos > valuePos) {
      paramPos = -1;
    }
  }

  let parsedParams;
  if (paramPos !== -1) {
    name = line.slice(0, Math.max(0, paramPos)).toLowerCase();
    parsedParams = parse._parseParameters(line.slice(Math.max(0, paramPos)), 0, state.designSet);
    if (parsedParams[2] == -1) {
      throw new ParserError("Invalid parameters in '" + line + "'");
    }
    params = parsedParams[0];
    // Handle parameter values with multiple entries
    let parsedParamLength;
    if (typeof parsedParams[1] === 'string') {
      parsedParamLength = parsedParams[1].length;
    } else {
      parsedParamLength = parsedParams[1].reduce((accumulator, currentValue) => {
        return accumulator + currentValue.length;
      }, 0);
    }
    lastParamIndex = parsedParamLength + parsedParams[2] + paramPos;
    if ((lastValuePos =
      line.slice(Math.max(0, lastParamIndex)).indexOf(VALUE_DELIMITER)) !== -1) {
      value = line.slice(Math.max(0, lastParamIndex + lastValuePos + 1));
    } else {
      throw new ParserError("Missing parameter value in '" + line + "'");
    }
  } else if (valuePos !== -1) {
    // without parmeters (BEGIN:VCAENDAR, CLASS:PUBLIC)
    name = line.slice(0, Math.max(0, valuePos)).toLowerCase();
    value = line.slice(Math.max(0, valuePos + 1));

    if (name === 'begin') {
      let newComponent = [value.toLowerCase(), [], []];
      if (state.stack.length === 1) {
        state.component.push(newComponent);
      } else {
        state.component[2].push(newComponent);
      }
      state.stack.push(state.component);
      state.component = newComponent;
      if (!state.designSet) {
        state.designSet = design.getDesignSet(state.component[0]);
      }
      return;
    } else if (name === 'end') {
      state.component = state.stack.pop();
      return;
    }
    // If it is not begin/end, then this is a property with an empty value,
    // which should be considered valid.
  } else {
    /**
     * Invalid line.
     * The rational to throw an error is we will
     * never be certain that the rest of the file
     * is sane and it is unlikely that we can serialize
     * the result correctly either.
     */
    throw new ParserError(
      'invalid line (no token ";" or ":") "' + line + '"'
    );
  }

  let valueType;
  let multiValue = false;
  let structuredValue = false;
  let propertyDetails;
  let splitName;
  let ungroupedName;

  // fetch the ungrouped part of the name
  if (state.designSet.propertyGroups && name.indexOf('.') !== -1) {
    splitName = name.split('.');
    params.group = splitName[0];
    ungroupedName = splitName[1];
  } else {
    ungroupedName = name;
  }

  if (ungroupedName in state.designSet.property) {
    propertyDetails = state.designSet.property[ungroupedName];

    if ('multiValue' in propertyDetails) {
      multiValue = propertyDetails.multiValue;
    }

    if ('structuredValue' in propertyDetails) {
      structuredValue = propertyDetails.structuredValue;
    }

    if (value && 'detectType' in propertyDetails) {
      valueType = propertyDetails.detectType(value);
    }
  }

  // attempt to determine value
  if (!valueType) {
    if (!('value' in params)) {
      if (propertyDetails) {
        valueType = propertyDetails.defaultType;
      } else {
        valueType = DEFAULT_VALUE_TYPE$1;
      }
    } else {
      // possible to avoid this?
      valueType = params.value.toLowerCase();
    }
  }

  delete params.value;

  /**
   * Note on `var result` juggling:
   *
   * I observed that building the array in pieces has adverse
   * effects on performance, so where possible we inline the creation.
   * It is a little ugly but resulted in ~2000 additional ops/sec.
   */

  let result;
  if (multiValue && structuredValue) {
    value = parse._parseMultiValue(value, structuredValue, valueType, [], multiValue, state.designSet, structuredValue);
    result = [ungroupedName, params, valueType, value];
  } else if (multiValue) {
    result = [ungroupedName, params, valueType];
    parse._parseMultiValue(value, multiValue, valueType, result, null, state.designSet, false);
  } else if (structuredValue) {
    value = parse._parseMultiValue(value, structuredValue, valueType, [], null, state.designSet, structuredValue);
    result = [ungroupedName, params, valueType, value];
  } else {
    value = parse._parseValue(value, valueType, state.designSet, false);
    result = [ungroupedName, params, valueType, value];
  }
  // rfc6350 requires that in vCard 4.0 the first component is the VERSION
  // component with as value 4.0, note that 3.0 does not have this requirement.
  if (state.component[0] === 'vcard' && state.component[1].length === 0 &&
          !(name === 'version' && value === '4.0')) {
    state.designSet = design.getDesignSet("vcard3");
  }
  state.component[1].push(result);
};

/**
 * Parse a value from the raw value into the jCard/jCal value.
 *
 * @private
 * @function ICAL.parse._parseValue
 * @param {String} value          Original value
 * @param {String} type           Type of value
 * @param {Object} designSet      The design data to use for this value
 * @return {Object} varies on type
 */
parse._parseValue = function(value, type, designSet, structuredValue) {
  if (type in designSet.value && 'fromICAL' in designSet.value[type]) {
    return designSet.value[type].fromICAL(value, structuredValue);
  }
  return value;
};

/**
 * Parse parameters from a string to object.
 *
 * @function ICAL.parse._parseParameters
 * @private
 * @param {String} line               A single unfolded line
 * @param {Number} start              Position to start looking for properties
 * @param {Object} designSet          The design data to use for this property
 * @return {Array}                    Array containing key/valye pairs of parsed parameters, the
 *                                      parsed value, and the position of the last parameter found
 */
parse._parseParameters = function(line, start, designSet) {
  let lastParam = start;
  let pos = 0;
  let delim = PARAM_NAME_DELIMITER;
  let result = {};
  let name, lcname;
  let value, valuePos = -1;
  let type, multiValue, mvdelim;

  // find the next '=' sign
  // use lastParam and pos to find name
  // check if " is used if so get value from "->"
  // then increment pos to find next ;

  while ((pos !== false) &&
         (pos = line.indexOf(delim, pos + 1)) !== -1) {

    name = line.slice(lastParam + 1, pos);
    if (name.length == 0) {
      throw new ParserError("Empty parameter name in '" + line + "'");
    }
    lcname = name.toLowerCase();
    mvdelim = false;
    multiValue = false;

    if (lcname in designSet.param && designSet.param[lcname].valueType) {
      type = designSet.param[lcname].valueType;
    } else {
      type = DEFAULT_PARAM_TYPE;
    }

    if (lcname in designSet.param) {
      multiValue = designSet.param[lcname].multiValue;
      if (designSet.param[lcname].multiValueSeparateDQuote) {
        mvdelim = parse._rfc6868Escape('"' + multiValue + '"');
      }
    }

    let nextChar = line[pos + 1];
    if (nextChar === '"') {
      valuePos = pos + 2;
      pos = line.indexOf('"', valuePos);
      if (multiValue && pos != -1) {
          let extendedValue = true;
          while (extendedValue) {
            if (line[pos + 1] == multiValue && line[pos + 2] == '"') {
              pos = line.indexOf('"', pos + 3);
            } else {
              extendedValue = false;
            }
          }
        }
      if (pos === -1) {
        throw new ParserError(
          'invalid line (no matching double quote) "' + line + '"'
        );
      }
      value = line.slice(valuePos, pos);
      lastParam = line.indexOf(PARAM_DELIMITER, pos);
      let propValuePos = line.indexOf(VALUE_DELIMITER, pos);
      // if either no next parameter or delimeter in property value, let's stop here
      if (lastParam === -1 || (propValuePos !== -1 && lastParam > propValuePos)) {
        pos = false;
      }
    } else {
      valuePos = pos + 1;

      // move to next ";"
      let nextPos = line.indexOf(PARAM_DELIMITER, valuePos);
      let propValuePos = line.indexOf(VALUE_DELIMITER, valuePos);
      if (propValuePos !== -1 && nextPos > propValuePos) {
        // this is a delimiter in the property value, let's stop here
        nextPos = propValuePos;
        pos = false;
      } else if (nextPos === -1) {
        // no ";"
        if (propValuePos === -1) {
          nextPos = line.length;
        } else {
          nextPos = propValuePos;
        }
        pos = false;
      } else {
        lastParam = nextPos;
        pos = nextPos;
      }

      value = line.slice(valuePos, nextPos);
    }

    const length_before = value.length;
    value = parse._rfc6868Escape(value);
    valuePos += length_before - value.length;
    if (multiValue) {
      let delimiter = mvdelim || multiValue;
      value = parse._parseMultiValue(value, delimiter, type, [], null, designSet);
    } else {
      value = parse._parseValue(value, type, designSet);
    }

    if (multiValue && (lcname in result)) {
      if (Array.isArray(result[lcname])) {
        result[lcname].push(value);
      } else {
        result[lcname] = [
          result[lcname],
          value
        ];
      }
    } else {
      result[lcname] = value;
    }
  }
  return [result, value, valuePos];
};

/**
 * Internal helper for rfc6868. Exposing this on ICAL.parse so that
 * hackers can disable the rfc6868 parsing if the really need to.
 *
 * @function ICAL.parse._rfc6868Escape
 * @param {String} val        The value to escape
 * @return {String}           The escaped value
 */
parse._rfc6868Escape = function(val) {
  return val.replace(/\^['n^]/g, function(x) {
    return RFC6868_REPLACE_MAP$1[x];
  });
};

/**
 * Parse a multi value string. This function is used either for parsing
 * actual multi-value property's values, or for handling parameter values. It
 * can be used for both multi-value properties and structured value properties.
 *
 * @private
 * @function ICAL.parse._parseMultiValue
 * @param {String} buffer           The buffer containing the full value
 * @param {String} delim            The multi-value delimiter
 * @param {String} type             The value type to be parsed
 * @param {Array.<?>} result        The array to append results to, varies on value type
 * @param {String} innerMulti       The inner delimiter to split each value with
 * @param {designSet} designSet     The design data for this value
 * @return {?|Array.<?>}            Either an array of results, or the first result
 */
parse._parseMultiValue = function(buffer, delim, type, result, innerMulti, designSet, structuredValue) {
  let pos = 0;
  let lastPos = 0;
  let value;
  if (delim.length === 0) {
    return buffer;
  }

  // split each piece
  while ((pos = unescapedIndexOf(buffer, delim, lastPos)) !== -1) {
    value = buffer.slice(lastPos, pos);
    if (innerMulti) {
      value = parse._parseMultiValue(value, innerMulti, type, [], null, designSet, structuredValue);
    } else {
      value = parse._parseValue(value, type, designSet, structuredValue);
    }
    result.push(value);
    lastPos = pos + delim.length;
  }

  // on the last piece take the rest of string
  value = buffer.slice(lastPos);
  if (innerMulti) {
    value = parse._parseMultiValue(value, innerMulti, type, [], null, designSet, structuredValue);
  } else {
    value = parse._parseValue(value, type, designSet, structuredValue);
  }
  result.push(value);

  return result.length == 1 ? result[0] : result;
};

/**
 * Process a complete buffer of iCalendar/vCard data line by line, correctly
 * unfolding content. Each line will be processed with the given callback
 *
 * @private
 * @function ICAL.parse._eachLine
 * @param {String} buffer                         The buffer to process
 * @param {function(?String, String)} callback    The callback for each line
 */
parse._eachLine = function(buffer, callback) {
  let len = buffer.length;
  let lastPos = buffer.search(CHAR);
  let pos = lastPos;
  let line;
  let firstChar;

  let newlineOffset;

  do {
    pos = buffer.indexOf('\n', lastPos) + 1;

    if (pos > 1 && buffer[pos - 2] === '\r') {
      newlineOffset = 2;
    } else {
      newlineOffset = 1;
    }

    if (pos === 0) {
      pos = len;
      newlineOffset = 0;
    }

    firstChar = buffer[lastPos];

    if (firstChar === ' ' || firstChar === '\t') {
      // add to line
      line += buffer.slice(lastPos + 1, pos - newlineOffset);
    } else {
      if (line)
        callback(null, line);
      // push line
      line = buffer.slice(lastPos, pos - newlineOffset);
    }

    lastPos = pos;
  } while (pos !== len);

  // extra ending line
  line = line.trim();

  if (line.length)
    callback(null, line);
};

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


const OPTIONS = ["tzid", "location", "tznames", "latitude", "longitude"];

/**
 * Timezone representation.
 *
 * @example
 * var vcalendar;
 * var timezoneComp = vcalendar.getFirstSubcomponent('vtimezone');
 * var tzid = timezoneComp.getFirstPropertyValue('tzid');
 *
 * var timezone = new ICAL.Timezone({
 *   component: timezoneComp,
 *   tzid
 * });
 *
 * @memberof ICAL
 */
class Timezone {
  static _compare_change_fn(a, b) {
    if (a.year < b.year) return -1;
    else if (a.year > b.year) return 1;

    if (a.month < b.month) return -1;
    else if (a.month > b.month) return 1;

    if (a.day < b.day) return -1;
    else if (a.day > b.day) return 1;

    if (a.hour < b.hour) return -1;
    else if (a.hour > b.hour) return 1;

    if (a.minute < b.minute) return -1;
    else if (a.minute > b.minute) return 1;

    if (a.second < b.second) return -1;
    else if (a.second > b.second) return 1;

    return 0;
  }

  /**
   * Convert the date/time from one zone to the next.
   *
   * @param {Time} tt                  The time to convert
   * @param {Timezone} from_zone       The source zone to convert from
   * @param {Timezone} to_zone         The target zone to convert to
   * @return {Time}                    The converted date/time object
   */
  static convert_time(tt, from_zone, to_zone) {
    if (tt.isDate ||
        from_zone.tzid == to_zone.tzid ||
        from_zone == Timezone.localTimezone ||
        to_zone == Timezone.localTimezone) {
      tt.zone = to_zone;
      return tt;
    }

    let utcOffset = from_zone.utcOffset(tt);
    tt.adjust(0, 0, 0, - utcOffset);

    utcOffset = to_zone.utcOffset(tt);
    tt.adjust(0, 0, 0, utcOffset);

    return null;
  }

  /**
   * Creates a new ICAL.Timezone instance from the passed data object.
   *
   * @param {Component|Object} aData options for class
   * @param {String|Component} aData.component
   *        If aData is a simple object, then this member can be set to either a
   *        string containing the component data, or an already parsed
   *        ICAL.Component
   * @param {String} aData.tzid      The timezone identifier
   * @param {String} aData.location  The timezone locationw
   * @param {String} aData.tznames   An alternative string representation of the
   *                                  timezone
   * @param {Number} aData.latitude  The latitude of the timezone
   * @param {Number} aData.longitude The longitude of the timezone
   */
  static fromData(aData) {
    let tt = new Timezone();
    return tt.fromData(aData);
  }

  /**
   * The instance describing the UTC timezone
   * @type {Timezone}
   * @constant
   * @instance
   */
  static #utcTimezone = null;
  static get utcTimezone() {
    if (!this.#utcTimezone) {
      this.#utcTimezone = Timezone.fromData({
        tzid: "UTC"
      });
    }
    return this.#utcTimezone;
  }

  /**
   * The instance describing the local timezone
   * @type {Timezone}
   * @constant
   * @instance
   */
  static #localTimezone = null;
  static get localTimezone() {
    if (!this.#localTimezone) {
      this.#localTimezone = Timezone.fromData({
        tzid: "floating"
      });
    }
    return this.#localTimezone;
  }

  /**
   * Adjust a timezone change object.
   * @private
   * @param {Object} change     The timezone change object
   * @param {Number} days       The extra amount of days
   * @param {Number} hours      The extra amount of hours
   * @param {Number} minutes    The extra amount of minutes
   * @param {Number} seconds    The extra amount of seconds
   */
  static adjust_change(change, days, hours, minutes, seconds) {
    return Time.prototype.adjust.call(
      change,
      days,
      hours,
      minutes,
      seconds,
      change
    );
  }

  static _minimumExpansionYear = -1;
  static EXTRA_COVERAGE = 5;

  /**
   * Creates a new ICAL.Timezone instance, by passing in a tzid and component.
   *
   * @param {Component|Object} data options for class
   * @param {String|Component} data.component
   *        If data is a simple object, then this member can be set to either a
   *        string containing the component data, or an already parsed
   *        ICAL.Component
   * @param {String} data.tzid      The timezone identifier
   * @param {String} data.location  The timezone locationw
   * @param {String} data.tznames   An alternative string representation of the
   *                                  timezone
   * @param {Number} data.latitude  The latitude of the timezone
   * @param {Number} data.longitude The longitude of the timezone
   */
  constructor(data) {
    this.wrappedJSObject = this;
    this.fromData(data);
  }


  /**
   * Timezone identifier
   * @type {String}
   */
  tzid = "";

  /**
   * Timezone location
   * @type {String}
   */
  location = "";

  /**
   * Alternative timezone name, for the string representation
   * @type {String}
   */
  tznames = "";

  /**
   * The primary latitude for the timezone.
   * @type {Number}
   */
  latitude = 0.0;

  /**
   * The primary longitude for the timezone.
   * @type {Number}
   */
  longitude = 0.0;

  /**
   * The vtimezone component for this timezone.
   * @type {Component}
   */
  component = null;

  /**
   * The year this timezone has been expanded to. All timezone transition
   * dates until this year are known and can be used for calculation
   *
   * @private
   * @type {Number}
   */
  expandedUntilYear = 0;

  /**
   * The class identifier.
   * @constant
   * @type {String}
   * @default "icaltimezone"
   */
  icalclass = "icaltimezone";

  /**
   * Sets up the current instance using members from the passed data object.
   *
   * @param {Component|Object} aData options for class
   * @param {String|Component} aData.component
   *        If aData is a simple object, then this member can be set to either a
   *        string containing the component data, or an already parsed
   *        ICAL.Component
   * @param {String} aData.tzid      The timezone identifier
   * @param {String} aData.location  The timezone locationw
   * @param {String} aData.tznames   An alternative string representation of the
   *                                  timezone
   * @param {Number} aData.latitude  The latitude of the timezone
   * @param {Number} aData.longitude The longitude of the timezone
   */
  fromData(aData) {
    this.expandedUntilYear = 0;
    this.changes = [];

    if (aData instanceof Component) {
      // Either a component is passed directly
      this.component = aData;
    } else {
      // Otherwise the component may be in the data object
      if (aData && "component" in aData) {
        if (typeof aData.component == "string") {
          // If a string was passed, parse it as a component
          let jCal = parse(aData.component);
          this.component = new Component(jCal);
        } else if (aData.component instanceof Component) {
          // If it was a component already, then just set it
          this.component = aData.component;
        } else {
          // Otherwise just null out the component
          this.component = null;
        }
      }

      // Copy remaining passed properties
      for (let prop of OPTIONS) {
        if (aData && prop in aData) {
          this[prop] = aData[prop];
        }
      }
    }

    // If we have a component but no TZID, attempt to get it from the
    // component's properties.
    if (this.component instanceof Component && !this.tzid) {
      this.tzid = this.component.getFirstPropertyValue('tzid');
    }

    return this;
  }

  /**
   * Finds the utcOffset the given time would occur in this timezone.
   *
   * @param {Time} tt         The time to check for
   * @return {Number}         utc offset in seconds
   */
  utcOffset(tt) {
    if (this == Timezone.utcTimezone || this == Timezone.localTimezone) {
      return 0;
    }

    this._ensureCoverage(tt.year);

    if (!this.changes.length) {
      return 0;
    }

    let tt_change = {
      year: tt.year,
      month: tt.month,
      day: tt.day,
      hour: tt.hour,
      minute: tt.minute,
      second: tt.second
    };

    let change_num = this._findNearbyChange(tt_change);
    let change_num_to_use = -1;
    let step = 1;

    // TODO: replace with bin search?
    for (;;) {
      let change = clone(this.changes[change_num], true);
      if (change.utcOffset < change.prevUtcOffset) {
        Timezone.adjust_change(change, 0, 0, 0, change.utcOffset);
      } else {
        Timezone.adjust_change(change, 0, 0, 0,
                                        change.prevUtcOffset);
      }

      let cmp = Timezone._compare_change_fn(tt_change, change);

      if (cmp >= 0) {
        change_num_to_use = change_num;
      } else {
        step = -1;
      }

      if (step == -1 && change_num_to_use != -1) {
        break;
      }

      change_num += step;

      if (change_num < 0) {
        return 0;
      }

      if (change_num >= this.changes.length) {
        break;
      }
    }

    let zone_change = this.changes[change_num_to_use];
    let utcOffset_change = zone_change.utcOffset - zone_change.prevUtcOffset;

    if (utcOffset_change < 0 && change_num_to_use > 0) {
      let tmp_change = clone(zone_change, true);
      Timezone.adjust_change(tmp_change, 0, 0, 0, tmp_change.prevUtcOffset);

      if (Timezone._compare_change_fn(tt_change, tmp_change) < 0) {
        let prev_zone_change = this.changes[change_num_to_use - 1];

        let want_daylight = false; // TODO

        if (zone_change.is_daylight != want_daylight &&
            prev_zone_change.is_daylight == want_daylight) {
          zone_change = prev_zone_change;
        }
      }
    }

    // TODO return is_daylight?
    return zone_change.utcOffset;
  }

  _findNearbyChange(change) {
    // find the closest match
    let idx = binsearchInsert(
      this.changes,
      change,
      Timezone._compare_change_fn
    );

    if (idx >= this.changes.length) {
      return this.changes.length - 1;
    }

    return idx;
  }

  _ensureCoverage(aYear) {
    if (Timezone._minimumExpansionYear == -1) {
      let today = Time.now();
      Timezone._minimumExpansionYear = today.year;
    }

    let changesEndYear = aYear;
    if (changesEndYear < Timezone._minimumExpansionYear) {
      changesEndYear = Timezone._minimumExpansionYear;
    }

    changesEndYear += Timezone.EXTRA_COVERAGE;

    if (!this.changes.length || this.expandedUntilYear < aYear) {
      let subcomps = this.component.getAllSubcomponents();
      let compLen = subcomps.length;
      let compIdx = 0;

      for (; compIdx < compLen; compIdx++) {
        this._expandComponent(
          subcomps[compIdx], changesEndYear, this.changes
        );
      }

      this.changes.sort(Timezone._compare_change_fn);
      this.expandedUntilYear = changesEndYear;
    }
  }

  _expandComponent(aComponent, aYear, changes) {
    if (!aComponent.hasProperty("dtstart") ||
        !aComponent.hasProperty("tzoffsetto") ||
        !aComponent.hasProperty("tzoffsetfrom")) {
      return null;
    }

    let dtstart = aComponent.getFirstProperty("dtstart").getFirstValue();
    let change;

    function convert_tzoffset(offset) {
      return offset.factor * (offset.hours * 3600 + offset.minutes * 60);
    }

    function init_changes() {
      let changebase = {};
      changebase.is_daylight = (aComponent.name == "daylight");
      changebase.utcOffset = convert_tzoffset(
        aComponent.getFirstProperty("tzoffsetto").getFirstValue()
      );

      changebase.prevUtcOffset = convert_tzoffset(
        aComponent.getFirstProperty("tzoffsetfrom").getFirstValue()
      );

      return changebase;
    }

    if (!aComponent.hasProperty("rrule") && !aComponent.hasProperty("rdate")) {
      change = init_changes();
      change.year = dtstart.year;
      change.month = dtstart.month;
      change.day = dtstart.day;
      change.hour = dtstart.hour;
      change.minute = dtstart.minute;
      change.second = dtstart.second;

      Timezone.adjust_change(change, 0, 0, 0, -change.prevUtcOffset);
      changes.push(change);
    } else {
      let props = aComponent.getAllProperties("rdate");
      for (let rdate of props) {
        let time = rdate.getFirstValue();
        change = init_changes();

        change.year = time.year;
        change.month = time.month;
        change.day = time.day;

        if (time.isDate) {
          change.hour = dtstart.hour;
          change.minute = dtstart.minute;
          change.second = dtstart.second;

          if (dtstart.zone != Timezone.utcTimezone) {
            Timezone.adjust_change(change, 0, 0, 0, -change.prevUtcOffset);
          }
        } else {
          change.hour = time.hour;
          change.minute = time.minute;
          change.second = time.second;

          if (time.zone != Timezone.utcTimezone) {
            Timezone.adjust_change(change, 0, 0, 0, -change.prevUtcOffset);
          }
        }

        changes.push(change);
      }

      let rrule = aComponent.getFirstProperty("rrule");

      if (rrule) {
        rrule = rrule.getFirstValue();
        change = init_changes();

        if (rrule.until && rrule.until.zone == Timezone.utcTimezone) {
          rrule.until.adjust(0, 0, 0, change.prevUtcOffset);
          rrule.until.zone = Timezone.localTimezone;
        }

        let iterator = rrule.iterator(dtstart);

        let occ;
        while ((occ = iterator.next())) {
          change = init_changes();
          if (occ.year > aYear || !occ) {
            break;
          }

          change.year = occ.year;
          change.month = occ.month;
          change.day = occ.day;
          change.hour = occ.hour;
          change.minute = occ.minute;
          change.second = occ.second;
          change.isDate = occ.isDate;

          Timezone.adjust_change(change, 0, 0, 0, -change.prevUtcOffset);
          changes.push(change);
        }
      }
    }

    return changes;
  }

  /**
   * The string representation of this timezone.
   * @return {String}
   */
  toString() {
    return (this.tznames ? this.tznames : this.tzid);
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


let zones = null;

/**
 * @classdesc
 * Singleton class to contain timezones.  Right now it is all manual registry in
 * the future we may use this class to download timezone information or handle
 * loading pre-expanded timezones.
 *
 * @exports module:ICAL.TimezoneService
 * @memberof ICAL
 */
const TimezoneService = {
  get count() {
    if (zones === null) {
      return 0;
    }

    return Object.keys(zones).length;
  },

  reset: function() {
    zones = Object.create(null);
    let utc = Timezone.utcTimezone;

    zones.Z = utc;
    zones.UTC = utc;
    zones.GMT = utc;
  },
  _hard_reset: function() {
    zones = null;
  },

  /**
   * Checks if timezone id has been registered.
   *
   * @param {String} tzid     Timezone identifier (e.g. America/Los_Angeles)
   * @return {Boolean}        False, when not present
   */
  has: function(tzid) {
    if (zones === null) {
      return false;
    }

    return !!zones[tzid];
  },

  /**
   * Returns a timezone by its tzid if present.
   *
   * @param {String} tzid               Timezone identifier (e.g. America/Los_Angeles)
   * @return {Timezone | undefined}     The timezone, or undefined if not found
   */
  get: function(tzid) {
    if (zones === null) {
      this.reset();
    }

    return zones[tzid];
  },

  /**
   * Registers a timezone object or component.
   *
   * @param {Component|Timezone} timezone
   *        The initialized zone or vtimezone.
   *
   * @param {String=} name
   *        The name of the timezone. Defaults to the component's TZID if not
   *        passed.
   */
  register: function(timezone, name) {
    if (zones === null) {
      this.reset();
    }

    // This avoids a breaking change by the change of argument order
    // TODO remove in v3
    if (typeof timezone === "string" && name instanceof Timezone) {
      [timezone, name] = [name, timezone];
    }

    if (!name) {
      if (timezone instanceof Timezone) {
        name = timezone.tzid;
      } else {
        if (timezone.name === 'vtimezone') {
          timezone = new Timezone(timezone);
          name = timezone.tzid;
        }
      }
    }

    if (!name) {
      throw new TypeError("Neither a timezone nor a name was passed");
    }

    if (timezone instanceof Timezone) {
      zones[name] = timezone;
    } else {
      throw new TypeError('timezone must be ICAL.Timezone or ICAL.Component');
    }
  },

  /**
   * Removes a timezone by its tzid from the list.
   *
   * @param {String} tzid     Timezone identifier (e.g. America/Los_Angeles)
   * @return {?Timezone}      The removed timezone, or null if not registered
   */
  remove: function(tzid) {
    if (zones === null) {
      return null;
    }

    return (delete zones[tzid]);
  }
};

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * Helper functions used in various places within ical.js
 * @module ICAL.helpers
 */

/**
 * Compiles a list of all referenced TZIDs in all subcomponents and
 * removes any extra VTIMEZONE subcomponents. In addition, if any TZIDs
 * are referenced by a component, but a VTIMEZONE does not exist,
 * an attempt will be made to generate a VTIMEZONE using ICAL.TimezoneService.
 *
 * @param {Component} vcal     The top-level VCALENDAR component.
 * @return {Component}         The ICAL.Component that was passed in.
 */
function updateTimezones(vcal) {
  let allsubs, properties, vtimezones, reqTzid, i;

  if (!vcal || vcal.name !== "vcalendar") {
    //not a top-level vcalendar component
    return vcal;
  }

  //Store vtimezone subcomponents in an object reference by tzid.
  //Store properties from everything else in another array
  allsubs = vcal.getAllSubcomponents();
  properties = [];
  vtimezones = {};
  for (i = 0; i < allsubs.length; i++) {
    if (allsubs[i].name === "vtimezone") {
      let tzid = allsubs[i].getFirstProperty("tzid").getFirstValue();
      vtimezones[tzid] = allsubs[i];
    } else {
      properties = properties.concat(allsubs[i].getAllProperties());
    }
  }

  //create an object with one entry for each required tz
  reqTzid = {};
  for (i = 0; i < properties.length; i++) {
    let tzid = properties[i].getParameter("tzid");
    if (tzid) {
      reqTzid[tzid] = true;
    }
  }

  //delete any vtimezones that are not on the reqTzid list.
  for (let [tzid, comp] of Object.entries(vtimezones)) {
    if (!reqTzid[tzid]) {
      vcal.removeSubcomponent(comp);
    }
  }

  //create any missing, but registered timezones
  for (let tzid of Object.keys(reqTzid)) {
    if (!vtimezones[tzid] && TimezoneService.has(tzid)) {
      vcal.addSubcomponent(TimezoneService.get(tzid).component);
    }
  }

  return vcal;
}

/**
 * Checks if the given type is of the number type and also NaN.
 *
 * @param {Number} number     The number to check
 * @return {Boolean}          True, if the number is strictly NaN
 */
function isStrictlyNaN(number) {
  return typeof(number) === 'number' && isNaN(number);
}

/**
 * Parses a string value that is expected to be an integer, when the valid is
 * not an integer throws a decoration error.
 *
 * @param {String} string     Raw string input
 * @return {Number}           Parsed integer
 */
function strictParseInt(string) {
  let result = parseInt(string, 10);

  if (isStrictlyNaN(result)) {
    throw new Error(
      'Could not extract integer from "' + string + '"'
    );
  }

  return result;
}

/**
 * Creates or returns a class instance of a given type with the initialization
 * data if the data is not already an instance of the given type.
 *
 * @example
 * var time = new ICAL.Time(...);
 * var result = ICAL.helpers.formatClassType(time, ICAL.Time);
 *
 * (result instanceof ICAL.Time)
 * // => true
 *
 * result = ICAL.helpers.formatClassType({}, ICAL.Time);
 * (result isntanceof ICAL.Time)
 * // => true
 *
 *
 * @param {Object} data       object initialization data
 * @param {Object} type       object type (like ICAL.Time)
 * @return {?}                An instance of the found type.
 */
function formatClassType(data, type) {
  if (typeof(data) === 'undefined') {
    return undefined;
  }

  if (data instanceof type) {
    return data;
  }
  return new type(data);
}

/**
 * Identical to indexOf but will only match values when they are not preceded
 * by a backslash character.
 *
 * @param {String} buffer         String to search
 * @param {String} search         Value to look for
 * @param {Number} pos            Start position
 * @return {Number}               The position, or -1 if not found
 */
function unescapedIndexOf(buffer, search, pos) {
  while ((pos = buffer.indexOf(search, pos)) !== -1) {
    if (pos > 0 && buffer[pos - 1] === '\\') {
      pos += 1;
    } else {
      return pos;
    }
  }
  return -1;
}

/**
 * Find the index for insertion using binary search.
 *
 * @param {Array} list            The list to search
 * @param {?} seekVal             The value to insert
 * @param {function(?,?)} cmpfunc The comparison func, that can
 *                                  compare two seekVals
 * @return {Number}               The insert position
 */
function binsearchInsert(list, seekVal, cmpfunc) {
  if (!list.length)
    return 0;

  let low = 0, high = list.length - 1,
      mid, cmpval;

  while (low <= high) {
    mid = low + Math.floor((high - low) / 2);
    cmpval = cmpfunc(seekVal, list[mid]);

    if (cmpval < 0)
      high = mid - 1;
    else if (cmpval > 0)
      low = mid + 1;
    else
      break;
  }

  if (cmpval < 0)
    return mid; // insertion is displacing, so use mid outright.
  else if (cmpval > 0)
    return mid + 1;
  else
    return mid;
}

/**
 * Clone the passed object or primitive. By default a shallow clone will be
 * executed.
 *
 * @param {*} aSrc            The thing to clone
 * @param {Boolean=} aDeep    If true, a deep clone will be performed
 * @return {*}                The copy of the thing
 */
function clone(aSrc, aDeep) {
  if (!aSrc || typeof aSrc != "object") {
    return aSrc;
  } else if (aSrc instanceof Date) {
    return new Date(aSrc.getTime());
  } else if ("clone" in aSrc) {
    return aSrc.clone();
  } else if (Array.isArray(aSrc)) {
    let arr = [];
    for (let i = 0; i < aSrc.length; i++) {
      arr.push(aDeep ? clone(aSrc[i], true) : aSrc[i]);
    }
    return arr;
  } else {
    let obj = {};
    for (let [name, value] of Object.entries(aSrc)) {
      if (aDeep) {
        obj[name] = clone(value, true);
      } else {
        obj[name] = value;
      }
    }
    return obj;
  }
}

/**
 * Performs iCalendar line folding. A line ending character is inserted and
 * the next line begins with a whitespace.
 *
 * @example
 * SUMMARY:This line will be fold
 *  ed right in the middle of a word.
 *
 * @param {String} aLine      The line to fold
 * @return {String}           The folded line
 */
function foldline(aLine) {
  let result = "";
  let line = aLine || "", pos = 0, line_length = 0;
  //pos counts position in line for the UTF-16 presentation
  //line_length counts the bytes for the UTF-8 presentation
  while (line.length) {
    let cp = line.codePointAt(pos);
    if (cp < 128) ++line_length;
    else if (cp < 2048) line_length += 2;//needs 2 UTF-8 bytes
    else if (cp < 65536) line_length += 3;
    else line_length += 4; //cp is less than 1114112
    if (line_length < ICALmodule.foldLength + 1)
      pos += cp > 65535 ? 2 : 1;
    else {
      result += ICALmodule.newLineChar + " " + line.slice(0, Math.max(0, pos));
      line = line.slice(Math.max(0, pos));
      pos = line_length = 0;
    }
  }
  return result.slice(ICALmodule.newLineChar.length + 1);
}

/**
 * Pads the given string or number with zeros so it will have at least two
 * characters.
 *
 * @param {String|Number} data    The string or number to pad
 * @return {String}               The number padded as a string
 */
function pad2(data) {
  if (typeof(data) !== 'string') {
    // handle fractions.
    if (typeof(data) === 'number') {
      data = parseInt(data);
    }
    data = String(data);
  }

  let len = data.length;

  switch (len) {
    case 0:
      return '00';
    case 1:
      return '0' + data;
    default:
      return data;
  }
}

/**
 * Truncates the given number, correctly handling negative numbers.
 *
 * @param {Number} number     The number to truncate
 * @return {Number}           The truncated number
 */
function trunc(number) {
  return (number < 0 ? Math.ceil(number) : Math.floor(number));
}

/**
 * Poor-man's cross-browser object extension. Doesn't support all the
 * features, but enough for our usage. Note that the target's properties are
 * not overwritten with the source properties.
 *
 * @example
 * var child = ICAL.helpers.extend(parent, {
 *   "bar": 123
 * });
 *
 * @param {Object} source     The object to extend
 * @param {Object} target     The object to extend with
 * @return {Object}           Returns the target.
 */
function extend(source, target) {
  for (let key in source) {
    let descr = Object.getOwnPropertyDescriptor(source, key);
    if (descr && !Object.getOwnPropertyDescriptor(target, key)) {
      Object.defineProperty(target, key, descr);
    }
  }
  return target;
}

var helpers = /*#__PURE__*/Object.freeze({
  __proto__: null,
  binsearchInsert: binsearchInsert,
  clone: clone,
  extend: extend,
  foldline: foldline,
  formatClassType: formatClassType,
  isStrictlyNaN: isStrictlyNaN,
  pad2: pad2,
  strictParseInt: strictParseInt,
  trunc: trunc,
  unescapedIndexOf: unescapedIndexOf,
  updateTimezones: updateTimezones
});

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This class represents the "utc-offset" value type, with various calculation and manipulation
 * methods.
 *
 * @memberof ICAL
 */
class UtcOffset {
  /**
   * Creates a new {@link ICAL.UtcOffset} instance from the passed string.
   *
   * @param {String} aString    The string to parse
   * @return {Duration}         The created utc-offset instance
   */
  static fromString(aString) {
    // -05:00
    let options = {};
    //TODO: support seconds per rfc5545 ?
    options.factor = (aString[0] === '+') ? 1 : -1;
    options.hours = strictParseInt(aString.slice(1, 3));
    options.minutes = strictParseInt(aString.slice(4, 6));

    return new UtcOffset(options);
  }

  /**
   * Creates a new {@link ICAL.UtcOffset} instance from the passed seconds
   * value.
   *
   * @param {Number} aSeconds       The number of seconds to convert
   */
  static fromSeconds(aSeconds) {
    let instance = new UtcOffset();
    instance.fromSeconds(aSeconds);
    return instance;
  }

  /**
   * Creates a new ICAL.UtcOffset instance.
   *
   * @param {Object} aData          An object with members of the utc offset
   * @param {Number=} aData.hours   The hours for the utc offset
   * @param {Number=} aData.minutes The minutes in the utc offset
   * @param {Number=} aData.factor  The factor for the utc-offset, either -1 or 1
   */
  constructor(aData) {
    this.fromData(aData);
  }

  /**
   * The hours in the utc-offset
   * @type {Number}
   */
  hours = 0;

  /**
   * The minutes in the utc-offset
   * @type {Number}
   */
  minutes = 0;

  /**
   * The sign of the utc offset, 1 for positive offset, -1 for negative
   * offsets.
   * @type {Number}
   */
  factor = 1;

  /**
   * The type name, to be used in the jCal object.
   * @constant
   * @type {String}
   * @default "utc-offset"
   */
  icaltype = "utc-offset";

  /**
   * Returns a clone of the utc offset object.
   *
   * @return {UtcOffset}     The cloned object
   */
  clone() {
    return UtcOffset.fromSeconds(this.toSeconds());
  }

  /**
   * Sets up the current instance using members from the passed data object.
   *
   * @param {Object} aData          An object with members of the utc offset
   * @param {Number=} aData.hours   The hours for the utc offset
   * @param {Number=} aData.minutes The minutes in the utc offset
   * @param {Number=} aData.factor  The factor for the utc-offset, either -1 or 1
   */
  fromData(aData) {
    if (aData) {
      for (let [key, value] of Object.entries(aData)) {
        this[key] = value;
      }
    }
    this._normalize();
  }

  /**
   * Sets up the current instance from the given seconds value. The seconds
   * value is truncated to the minute. Offsets are wrapped when the world
   * ends, the hour after UTC+14:00 is UTC-12:00.
   *
   * @param {Number} aSeconds         The seconds to convert into an offset
   */
  fromSeconds(aSeconds) {
    let secs = Math.abs(aSeconds);

    this.factor = aSeconds < 0 ? -1 : 1;
    this.hours = trunc(secs / 3600);

    secs -= (this.hours * 3600);
    this.minutes = trunc(secs / 60);
    return this;
  }

  /**
   * Convert the current offset to a value in seconds
   *
   * @return {Number}                 The offset in seconds
   */
  toSeconds() {
    return this.factor * (60 * this.minutes + 3600 * this.hours);
  }

  /**
   * Compare this utc offset with another one.
   *
   * @param {UtcOffset} other             The other offset to compare with
   * @return {Number}                     -1, 0 or 1 for less/equal/greater
   */
  compare(other) {
    let a = this.toSeconds();
    let b = other.toSeconds();
    return (a > b) - (b > a);
  }

  _normalize() {
    // Range: 97200 seconds (with 1 hour inbetween)
    let secs = this.toSeconds();
    let factor = this.factor;
    while (secs < -43200) { // = UTC-12:00
      secs += 97200;
    }
    while (secs > 50400) { // = UTC+14:00
      secs -= 97200;
    }

    this.fromSeconds(secs);

    // Avoid changing the factor when on zero seconds
    if (secs == 0) {
      this.factor = factor;
    }
  }

  /**
   * The iCalendar string representation of this utc-offset.
   * @return {String}
   */
  toICALString() {
    return design.icalendar.value['utc-offset'].toICAL(this.toString());
  }

  /**
   * The string representation of this utc-offset.
   * @return {String}
   */
  toString() {
    return (this.factor == 1 ? "+" : "-") + pad2(this.hours) + ':' + pad2(this.minutes);
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * Describes a vCard time, which has slight differences to the ICAL.Time.
 * Properties can be null if not specified, for example for dates with
 * reduced accuracy or truncation.
 *
 * Note that currently not all methods are correctly re-implemented for
 * VCardTime. For example, comparison will have undefined results when some
 * members are null.
 *
 * Also, normalization is not yet implemented for this class!
 *
 * @memberof ICAL
 * @extends {Time}
 */
class VCardTime extends Time {
  /**
   * Returns a new ICAL.VCardTime instance from a date and/or time string.
   *
   * @param {String} aValue     The string to create from
   * @param {String} aIcalType  The type for this instance, e.g. date-and-or-time
   * @return {VCardTime}        The date/time instance
   */
  static fromDateAndOrTimeString(aValue, aIcalType) {
    function part(v, s, e) {
      return v ? strictParseInt(v.slice(s, s + e)) : null;
    }
    let parts = aValue.split('T');
    let dt = parts[0], tmz = parts[1];
    let splitzone = tmz ? design.vcard.value.time._splitZone(tmz) : [];
    let zone = splitzone[0], tm = splitzone[1];

    let dtlen = dt ? dt.length : 0;
    let tmlen = tm ? tm.length : 0;

    let hasDashDate = dt && dt[0] == '-' && dt[1] == '-';
    let hasDashTime = tm && tm[0] == '-';

    let o = {
      year: hasDashDate ? null : part(dt, 0, 4),
      month: hasDashDate && (dtlen == 4 || dtlen == 7) ? part(dt, 2, 2) : dtlen == 7 ? part(dt, 5, 2) : dtlen == 10 ? part(dt, 5, 2) : null,
      day: dtlen == 5 ? part(dt, 3, 2) : dtlen == 7 && hasDashDate ? part(dt, 5, 2) : dtlen == 10 ? part(dt, 8, 2) : null,

      hour: hasDashTime ? null : part(tm, 0, 2),
      minute: hasDashTime && tmlen == 3 ? part(tm, 1, 2) : tmlen > 4 ? hasDashTime ? part(tm, 1, 2) : part(tm, 3, 2) : null,
      second: tmlen == 4 ? part(tm, 2, 2) : tmlen == 6 ? part(tm, 4, 2) : tmlen == 8 ? part(tm, 6, 2) : null
    };

    if (zone == 'Z') {
      zone = Timezone.utcTimezone;
    } else if (zone && zone[3] == ':') {
      zone = UtcOffset.fromString(zone);
    } else {
      zone = null;
    }

    return new VCardTime(o, zone, aIcalType);
  }


  /**
   * Creates a new ICAL.VCardTime instance.
   *
   * @param {Object} data                           The data for the time instance
   * @param {Number=} data.year                     The year for this date
   * @param {Number=} data.month                    The month for this date
   * @param {Number=} data.day                      The day for this date
   * @param {Number=} data.hour                     The hour for this date
   * @param {Number=} data.minute                   The minute for this date
   * @param {Number=} data.second                   The second for this date
   * @param {Timezone|UtcOffset} zone               The timezone to use
   * @param {String} icaltype                       The type for this date/time object
   */
  constructor(data, zone, icaltype) {
    super(data, zone);
    this.icaltype = icaltype || "date-and-or-time";
  }

  /**
   * The class identifier.
   * @constant
   * @type {String}
   * @default "vcardtime"
   */
  icalclass = "vcardtime";

  /**
   * The type name, to be used in the jCal object.
   * @type {String}
   * @default "date-and-or-time"
   */
  icaltype = "date-and-or-time";

  /**
   * Returns a clone of the vcard date/time object.
   *
   * @return {VCardTime}     The cloned object
   */
  clone() {
    return new VCardTime(this._time, this.zone, this.icaltype);
  }

  _normalize() {
    return this;
  }

  /**
   * @inheritdoc
   */
  utcOffset() {
    if (this.zone instanceof UtcOffset) {
      return this.zone.toSeconds();
    } else {
      return Time.prototype.utcOffset.apply(this, arguments);
    }
  }

  /**
   * Returns an RFC 6350 compliant representation of this object.
   *
   * @return {String}         vcard date/time string
   */
  toICALString() {
    return design.vcard.value[this.icaltype].toICAL(this.toString());
  }

  /**
   * The string representation of this date/time, in jCard form
   * (including : and - separators).
   * @return {String}
   */
  toString() {
    let y = this.year, m = this.month, d = this.day;
    let h = this.hour, mm = this.minute, s = this.second;

    let hasYear = y !== null, hasMonth = m !== null, hasDay = d !== null;
    let hasHour = h !== null, hasMinute = mm !== null, hasSecond = s !== null;

    let datepart = (hasYear ? pad2(y) + (hasMonth || hasDay ? '-' : '') : (hasMonth || hasDay ? '--' : '')) +
                   (hasMonth ? pad2(m) : '') +
                   (hasDay ? '-' + pad2(d) : '');
    let timepart = (hasHour ? pad2(h) : '-') + (hasHour && hasMinute ? ':' : '') +
                   (hasMinute ? pad2(mm) : '') + (!hasHour && !hasMinute ? '-' : '') +
                   (hasMinute && hasSecond ? ':' : '') +
                   (hasSecond ? pad2(s) : '');

    let zone;
    if (this.zone === Timezone.utcTimezone) {
      zone = 'Z';
    } else if (this.zone instanceof UtcOffset) {
      zone = this.zone.toString();
    } else if (this.zone === Timezone.localTimezone) {
      zone = '';
    } else if (this.zone instanceof Timezone) {
      let offset = UtcOffset.fromSeconds(this.zone.utcOffset(this));
      zone = offset.toString();
    } else {
      zone = '';
    }

    switch (this.icaltype) {
      case "time":
        return timepart + zone;
      case "date-and-or-time":
      case "date-time":
        return datepart + (timepart == '--' ? '' : 'T' + timepart + zone);
      case "date":
        return datepart;
    }
    return null;
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 *
 * @ignore
 * @typedef {import("./types.js").weekDay} weekDay
 * Imports the 'weekDay' type from the "types.js" module
 */

/**
 * An iterator for a single recurrence rule. This class usually doesn't have to be instanciated
 * directly, the convenience method {@link ICAL.Recur#iterator} can be used.
 *
 * @memberof ICAL
 */
class RecurIterator {
  static _indexMap = {
    "BYSECOND": 0,
    "BYMINUTE": 1,
    "BYHOUR": 2,
    "BYDAY": 3,
    "BYMONTHDAY": 4,
    "BYYEARDAY": 5,
    "BYWEEKNO": 6,
    "BYMONTH": 7,
    "BYSETPOS": 8
  };

  static _expandMap = {
    "SECONDLY": [1, 1, 1, 1, 1, 1, 1, 1],
    "MINUTELY": [2, 1, 1, 1, 1, 1, 1, 1],
    "HOURLY": [2, 2, 1, 1, 1, 1, 1, 1],
    "DAILY": [2, 2, 2, 1, 1, 1, 1, 1],
    "WEEKLY": [2, 2, 2, 2, 3, 3, 1, 1],
    "MONTHLY": [2, 2, 2, 2, 2, 3, 3, 1],
    "YEARLY": [2, 2, 2, 2, 2, 2, 2, 2]
  };

  static UNKNOWN = 0;
  static CONTRACT = 1;
  static EXPAND = 2;
  static ILLEGAL = 3;

  /**
   * Creates a new ICAL.RecurIterator instance. The options object may contain additional members
   * when resuming iteration from a previous run.
   *
   * @param {Object} options                The iterator options
   * @param {Recur} options.rule            The rule to iterate.
   * @param {Time} options.dtstart          The start date of the event.
   * @param {Boolean=} options.initialized  When true, assume that options are
   *        from a previously constructed iterator. Initialization will not be
   *        repeated.
   */
  constructor(options) {
    this.fromData(options);
  }

  /**
   * True when iteration is finished.
   * @type {Boolean}
   */
  completed = false;

  /**
   * The rule that is being iterated
   * @type {Recur}
   */
  rule = null;

  /**
   * The start date of the event being iterated.
   * @type {Time}
   */
  dtstart = null;

  /**
   * The last occurrence that was returned from the
   * {@link RecurIterator#next} method.
   * @type {Time}
   */
  last = null;

  /**
   * The sequence number from the occurrence
   * @type {Number}
   */
  occurrence_number = 0;

  /**
   * The indices used for the {@link ICAL.RecurIterator#by_data} object.
   * @type {Object}
   * @private
   */
  by_indices = null;

  /**
   * If true, the iterator has already been initialized
   * @type {Boolean}
   * @private
   */
  initialized = false;

  /**
   * The initializd by-data.
   * @type {Object}
   * @private
   */
  by_data = null;

  /**
   * The expanded yeardays
   * @type {Array}
   * @private
   */
  days = null;

  /**
   * The index in the {@link ICAL.RecurIterator#days} array.
   * @type {Number}
   * @private
   */
  days_index = 0;

  /**
   * Initialize the recurrence iterator from the passed data object. This
   * method is usually not called directly, you can initialize the iterator
   * through the constructor.
   *
   * @param {Object} options                The iterator options
   * @param {Recur} options.rule            The rule to iterate.
   * @param {Time} options.dtstart          The start date of the event.
   * @param {Boolean=} options.initialized  When true, assume that options are
   *        from a previously constructed iterator. Initialization will not be
   *        repeated.
   */
  fromData(options) {
    this.rule = formatClassType(options.rule, Recur);

    if (!this.rule) {
      throw new Error('iterator requires a (ICAL.Recur) rule');
    }

    this.dtstart = formatClassType(options.dtstart, Time);

    if (!this.dtstart) {
      throw new Error('iterator requires a (ICAL.Time) dtstart');
    }

    if (options.by_data) {
      this.by_data = options.by_data;
    } else {
      this.by_data = clone(this.rule.parts, true);
    }

    if (options.occurrence_number)
      this.occurrence_number = options.occurrence_number;

    this.days = options.days || [];
    if (options.last) {
      this.last = formatClassType(options.last, Time);
    }

    this.by_indices = options.by_indices;

    if (!this.by_indices) {
      this.by_indices = {
        "BYSECOND": 0,
        "BYMINUTE": 0,
        "BYHOUR": 0,
        "BYDAY": 0,
        "BYMONTH": 0,
        "BYWEEKNO": 0,
        "BYMONTHDAY": 0
      };
    }

    this.initialized = options.initialized || false;

    if (!this.initialized) {
      try {
        this.init();
      } catch (e) {
        if (e instanceof InvalidRecurrenceRuleError) {
          // Init may error if there are no possible recurrence instances from
          // the rule, but we don't want to bubble this error up. Instead, we
          // create an empty iterator.
          this.completed = true;
        } else {
          // Propagate other errors to consumers.
          throw e;
        }
      }
    }
  }

  /**
   * Initialize the iterator
   * @private
   */
  init() {
    this.initialized = true;
    this.last = this.dtstart.clone();
    let parts = this.by_data;

    if ("BYDAY" in parts) {
      // libical does this earlier when the rule is loaded, but we postpone to
      // now so we can preserve the original order.
      this.sort_byday_rules(parts.BYDAY);
    }

    // The BYYEARDAY may only appear with BYDAY
    if ("BYYEARDAY" in parts) {
      if ("BYMONTH" in parts || "BYWEEKNO" in parts ||
          "BYMONTHDAY" in parts) {
        throw new Error("Invalid BYYEARDAY rule");
      }
    }

    // BYWEEKNO and BYMONTHDAY rule parts may not both appear
    if ("BYWEEKNO" in parts && "BYMONTHDAY" in parts) {
      throw new Error("BYWEEKNO does not fit to BYMONTHDAY");
    }

    // For MONTHLY recurrences (FREQ=MONTHLY) neither BYYEARDAY nor
    // BYWEEKNO may appear.
    if (this.rule.freq == "MONTHLY" &&
        ("BYYEARDAY" in parts || "BYWEEKNO" in parts)) {
      throw new Error("For MONTHLY recurrences neither BYYEARDAY nor BYWEEKNO may appear");
    }

    // For WEEKLY recurrences (FREQ=WEEKLY) neither BYMONTHDAY nor
    // BYYEARDAY may appear.
    if (this.rule.freq == "WEEKLY" &&
        ("BYYEARDAY" in parts || "BYMONTHDAY" in parts)) {
      throw new Error("For WEEKLY recurrences neither BYMONTHDAY nor BYYEARDAY may appear");
    }

    // BYYEARDAY may only appear in YEARLY rules
    if (this.rule.freq != "YEARLY" && "BYYEARDAY" in parts) {
      throw new Error("BYYEARDAY may only appear in YEARLY rules");
    }

    this.last.second = this.setup_defaults("BYSECOND", "SECONDLY", this.dtstart.second);
    this.last.minute = this.setup_defaults("BYMINUTE", "MINUTELY", this.dtstart.minute);
    this.last.hour = this.setup_defaults("BYHOUR", "HOURLY", this.dtstart.hour);
    this.last.day = this.setup_defaults("BYMONTHDAY", "DAILY", this.dtstart.day);
    this.last.month = this.setup_defaults("BYMONTH", "MONTHLY", this.dtstart.month);

    if (this.rule.freq == "WEEKLY") {
      if ("BYDAY" in parts) {
        let [, dow] = this.ruleDayOfWeek(parts.BYDAY[0], this.rule.wkst);
        let wkdy = dow - this.last.dayOfWeek(this.rule.wkst);
        if ((this.last.dayOfWeek(this.rule.wkst) < dow && wkdy >= 0) || wkdy < 0) {
          // Initial time is after first day of BYDAY data
          this.last.day += wkdy;
        }
      } else {
        let dayName = Recur.numericDayToIcalDay(this.dtstart.dayOfWeek());
        parts.BYDAY = [dayName];
      }
    }

    if (this.rule.freq == "YEARLY") {
      // Some yearly recurrence rules may be specific enough to not actually
      // occur on a yearly basis, e.g. the 29th day of February or the fifth
      // Monday of a given month. The standard isn't clear on the intended
      // behavior in these cases, but `libical` at least will iterate until it
      // finds a matching year.
      // CAREFUL: Some rules may specify an occurrence that can never happen,
      // e.g. the first Monday of April so long as it falls on the 15th
      // through the 21st. Detecting these is non-trivial, so ensure that we
      // stop iterating at some point.
      const untilYear = this.rule.until ? this.rule.until.year : 20000;
      while (this.last.year <= untilYear) {
        this.expand_year_days(this.last.year);
        if (this.days.length > 0) {
          break;
        }
        this.increment_year(this.rule.interval);
      }

      if (this.days.length == 0) {
        throw new InvalidRecurrenceRuleError();
      }

      // If there's no occurrence in this year, try the following years. This
      // would only happen looking for day 366 or -366.
      if (!this._nextByYearDay() && !this.next_year() && !this.next_year() && !this.next_year()) {
        // This should not be possible, but just in case it is, stop.
        throw new InvalidRecurrenceRuleError();
      }
    }

    if (this.rule.freq == "MONTHLY") {
      if (this.has_by_data("BYDAY")) {
        let tempLast = null;
        let initLast = this.last.clone();
        let daysInMonth = Time.daysInMonth(this.last.month, this.last.year);

        // Check every weekday in BYDAY with relative dow and pos.
        for (let bydow of this.by_data.BYDAY) {
          this.last = initLast.clone();
          let [pos, dow] = this.ruleDayOfWeek(bydow);
          let dayOfMonth = this.last.nthWeekDay(dow, pos);

          // If |pos| >= 6, the byday is invalid for a monthly rule.
          if (pos >= 6 || pos <= -6) {
            throw new Error("Malformed values in BYDAY part");
          }

          // If a Byday with pos=+/-5 is not in the current month it
          // must be searched in the next months.
          if (dayOfMonth > daysInMonth || dayOfMonth <= 0) {
            // Skip if we have already found a "last" in this month.
            if (tempLast && tempLast.month == initLast.month) {
              continue;
            }
            while (dayOfMonth > daysInMonth || dayOfMonth <= 0) {
              this.increment_month();
              daysInMonth = Time.daysInMonth(this.last.month, this.last.year);
              dayOfMonth = this.last.nthWeekDay(dow, pos);
            }
          }

          this.last.day = dayOfMonth;
          if (!tempLast || this.last.compare(tempLast) < 0) {
            tempLast = this.last.clone();
          }
        }
        this.last = tempLast.clone();

        //XXX: This feels like a hack, but we need to initialize
        //     the BYMONTHDAY case correctly and byDayAndMonthDay handles
        //     this case. It accepts a special flag which will avoid incrementing
        //     the initial value without the flag days that match the start time
        //     would be missed.
        if (this.has_by_data('BYMONTHDAY')) {
          this._byDayAndMonthDay(true);
        }

        if (this.last.day > daysInMonth || this.last.day == 0) {
          throw new Error("Malformed values in BYDAY part");
        }
      } else if (this.has_by_data("BYMONTHDAY")) {
        // Change the day value so that normalisation won't change the month.
        this.last.day = 1;

        // Get a sorted list of days in the starting month that match the rule.
        let normalized = this.normalizeByMonthDayRules(
          this.last.year,
          this.last.month,
          this.rule.parts.BYMONTHDAY
        ).filter(d => d >= this.last.day);

        if (normalized.length) {
          // There's at least one valid day, use it.
          this.last.day = normalized[0];
          this.by_data.BYMONTHDAY = normalized;
        } else {
          // There's no occurrence in this month, find the next valid month.
          // The longest possible sequence of skipped months is February-April-June,
          // so we might need to call next_month up to three times.
          if (!this.next_month() && !this.next_month() && !this.next_month()) {
            throw new InvalidRecurrenceRuleError();
          }
        }
      }
    }
  }

  /**
   * Retrieve the next occurrence from the iterator.
   * @return {Time}
   */
  next(again = false) {
    let before = (this.last ? this.last.clone() : null);

    if ((this.rule.count && this.occurrence_number >= this.rule.count) ||
        (this.rule.until && this.last.compare(this.rule.until) > 0)) {
      this.completed = true;
    }

    if (this.completed) {
      return null;
    }

    if (this.occurrence_number == 0 && this.last.compare(this.dtstart) >= 0) {
      // First of all, give the instance that was initialized
      this.occurrence_number++;
      return this.last;
    }

    let valid;
    let invalid_count = 0;
    do {
      valid = 1;

      switch (this.rule.freq) {
      case "SECONDLY":
        this.next_second();
        break;
      case "MINUTELY":
        this.next_minute();
        break;
      case "HOURLY":
        this.next_hour();
        break;
      case "DAILY":
        this.next_day();
        break;
      case "WEEKLY":
        this.next_week();
        break;
      case "MONTHLY":
        valid = this.next_month();
        if (valid) {
          invalid_count = 0;
        } else if (++invalid_count == 336) {
          // We've been through all 91 month variations and not found a recurrence. Stop.
          // (12 months and 29-day February × 7 starting days.)
          this.completed = true;
          return null;
        }
        break;
      case "YEARLY":
        valid = this.next_year();
        if (valid) {
          invalid_count = 0;
        } else if (++invalid_count == 28) {
          // We've been through all 14 year variations and not found a recurrence. Stop.
          // (365-day and 366-day years × 7 starting days.)
          this.completed = true;
          return null;
        }
        break;

      default:
        return null;
      }
    } while (!this.check_contracting_rules() ||
             this.last.compare(this.dtstart) < 0 ||
             !valid);

    if (this.last.compare(before) == 0) {
      if (again) {
        throw new Error("Same occurrence found twice, protecting you from death by recursion");
      }
      this.next(true);
    }

    if (this.rule.until && this.last.compare(this.rule.until) > 0) {
      this.completed = true;
      return null;
    } else {
      this.occurrence_number++;
      return this.last;
    }
  }

  next_second() {
    return this.next_generic("BYSECOND", "SECONDLY", "second", "minute");
  }

  increment_second(inc) {
    return this.increment_generic(inc, "second", 60, "minute");
  }

  next_minute() {
    return this.next_generic("BYMINUTE", "MINUTELY",
                             "minute", "hour", "next_second");
  }

  increment_minute(inc) {
    return this.increment_generic(inc, "minute", 60, "hour");
  }

  next_hour() {
    return this.next_generic("BYHOUR", "HOURLY", "hour",
                             "monthday", "next_minute");
  }

  increment_hour(inc) {
    this.increment_generic(inc, "hour", 24, "monthday");
  }

  next_day() {
    let this_freq = (this.rule.freq == "DAILY");

    if (this.next_hour() == 0) {
      return 0;
    }

    if (this_freq) {
      this.increment_monthday(this.rule.interval);
    } else {
      this.increment_monthday(1);
    }

    return 0;
  }

  next_week() {
    let end_of_data = 0;

    if (this.next_weekday_by_week() == 0) {
      return end_of_data;
    }

    if (this.has_by_data("BYWEEKNO")) {
      this.by_indices.BYWEEKNO++;

      if (this.by_indices.BYWEEKNO == this.by_data.BYWEEKNO.length) {
        this.by_indices.BYWEEKNO = 0;
        end_of_data = 1;
      }

      // HACK should be first month of the year
      this.last.month = 1;
      this.last.day = 1;

      let week_no = this.by_data.BYWEEKNO[this.by_indices.BYWEEKNO];

      this.last.day += 7 * week_no;

      if (end_of_data) {
        this.increment_year(1);
      }
    } else {
      // Jump to the next week
      this.increment_monthday(7 * this.rule.interval);
    }

    return end_of_data;
  }

  /**
   * Normalize each by day rule for a given year/month.
   * Takes into account ordering and negative rules
   *
   * @private
   * @param {Number} year         Current year.
   * @param {Number} month        Current month.
   * @param {Array}  rules        Array of rules.
   *
   * @return {Array} sorted and normalized rules.
   *                 Negative rules will be expanded to their
   *                 correct positive values for easier processing.
   */
  normalizeByMonthDayRules(year, month, rules) {
    let daysInMonth = Time.daysInMonth(month, year);

    // XXX: This is probably bad for performance to allocate
    //      a new array for each month we scan, if possible
    //      we should try to optimize this...
    let newRules = [];

    let ruleIdx = 0;
    let len = rules.length;
    let rule;

    for (; ruleIdx < len; ruleIdx++) {
      rule = parseInt(rules[ruleIdx], 10);
      if (isNaN(rule)) {
        throw new Error('Invalid BYMONTHDAY value');
      }

      // if this rule falls outside of given
      // month discard it.
      if (Math.abs(rule) > daysInMonth) {
        continue;
      }

      // negative case
      if (rule < 0) {
        // we add (not subtract it is a negative number)
        // one from the rule because 1 === last day of month
        rule = daysInMonth + (rule + 1);
      } else if (rule === 0) {
        // skip zero: it is invalid.
        continue;
      }

      // only add unique items...
      if (newRules.indexOf(rule) === -1) {
        newRules.push(rule);
      }

    }

    // unique and sort
    return newRules.sort(function(a, b) { return a - b; });
  }

  /**
   * NOTES:
   * We are given a list of dates in the month (BYMONTHDAY) (23, etc..)
   * Also we are given a list of days (BYDAY) (MO, 2SU, etc..) when
   * both conditions match a given date (this.last.day) iteration stops.
   *
   * @private
   * @param {Boolean=} isInit     When given true will not increment the
   *                                current day (this.last).
   */
  _byDayAndMonthDay(isInit) {
    let byMonthDay; // setup in initMonth
    let byDay = this.by_data.BYDAY;

    let date;
    let dateIdx = 0;
    let dateLen; // setup in initMonth
    let dayLen = byDay.length;

    // we are not valid by default
    let dataIsValid = 0;

    let daysInMonth;
    let self = this;
    // we need a copy of this, because a DateTime gets normalized
    // automatically if the day is out of range. At some points we
    // set the last day to 0 to start counting.
    let lastDay = this.last.day;

    function initMonth() {
      daysInMonth = Time.daysInMonth(
        self.last.month, self.last.year
      );

      byMonthDay = self.normalizeByMonthDayRules(
        self.last.year,
        self.last.month,
        self.by_data.BYMONTHDAY
      );

      dateLen = byMonthDay.length;

      // For the case of more than one occurrence in one month
      // we have to be sure to start searching after the last
      // found date or at the last BYMONTHDAY, unless we are
      // initializing the iterator because in this case we have
      // to consider the last found date too.
      while (byMonthDay[dateIdx] <= lastDay &&
             !(isInit && byMonthDay[dateIdx] == lastDay) &&
             dateIdx < dateLen - 1) {
        dateIdx++;
      }
    }

    function nextMonth() {
      // since the day is incremented at the start
      // of the loop below, we need to start at 0
      lastDay = 0;
      self.increment_month();
      dateIdx = 0;
      initMonth();
    }

    initMonth();

    // should come after initMonth
    if (isInit) {
      lastDay -= 1;
    }

    // Use a counter to avoid an infinite loop with malformed rules.
    // Stop checking after 4 years so we consider also a leap year.
    let monthsCounter = 48;

    while (!dataIsValid && monthsCounter) {
      monthsCounter--;
      // increment the current date. This is really
      // important otherwise we may fall into the infinite
      // loop trap. The initial date takes care of the case
      // where the current date is the date we are looking
      // for.
      date = lastDay + 1;

      if (date > daysInMonth) {
        nextMonth();
        continue;
      }

      // find next date
      let next = byMonthDay[dateIdx++];

      // this logic is dependent on the BYMONTHDAYS
      // being in order (which is done by #normalizeByMonthDayRules)
      if (next >= date) {
        // if the next month day is in the future jump to it.
        lastDay = next;
      } else {
        // in this case the 'next' monthday has past
        // we must move to the month.
        nextMonth();
        continue;
      }

      // Now we can loop through the day rules to see
      // if one matches the current month date.
      for (let dayIdx = 0; dayIdx < dayLen; dayIdx++) {
        let parts = this.ruleDayOfWeek(byDay[dayIdx]);
        let pos = parts[0];
        let dow = parts[1];

        this.last.day = lastDay;
        if (this.last.isNthWeekDay(dow, pos)) {
          // when we find the valid one we can mark
          // the conditions as met and break the loop.
          // (Because we have this condition above
          //  it will also break the parent loop).
          dataIsValid = 1;
          break;
        }
      }

      // It is completely possible that the combination
      // cannot be matched in the current month.
      // When we reach the end of possible combinations
      // in the current month we iterate to the next one.
      // since dateIdx is incremented right after getting
      // "next", we don't need dateLen -1 here.
      if (!dataIsValid && dateIdx === dateLen) {
        nextMonth();
        continue;
      }
    }

    if (monthsCounter <= 0) {
      // Checked 4 years without finding a Byday that matches
      // a Bymonthday. Maybe the rule is not correct.
      throw new Error("Malformed values in BYDAY combined with BYMONTHDAY parts");
    }


    return dataIsValid;
  }

  next_month() {
    let data_valid = 1;

    if (this.next_hour() == 0) {
      return data_valid;
    }

    if (this.has_by_data("BYDAY") && this.has_by_data("BYMONTHDAY")) {
      data_valid = this._byDayAndMonthDay();
    } else if (this.has_by_data("BYDAY")) {
      let daysInMonth = Time.daysInMonth(this.last.month, this.last.year);
      let setpos = 0;
      let setpos_total = 0;

      if (this.has_by_data("BYSETPOS")) {
        let last_day = this.last.day;
        for (let day = 1; day <= daysInMonth; day++) {
          this.last.day = day;
          if (this.is_day_in_byday(this.last)) {
            setpos_total++;
            if (day <= last_day) {
              setpos++;
            }
          }
        }
        this.last.day = last_day;
      }

      data_valid = 0;
      let day;
      for (day = this.last.day + 1; day <= daysInMonth; day++) {
        this.last.day = day;

        if (this.is_day_in_byday(this.last)) {
          if (!this.has_by_data("BYSETPOS") ||
              this.check_set_position(++setpos) ||
              this.check_set_position(setpos - setpos_total - 1)) {

            data_valid = 1;
            break;
          }
        }
      }

      if (day > daysInMonth) {
        this.last.day = 1;
        this.increment_month();

        if (this.is_day_in_byday(this.last)) {
          if (!this.has_by_data("BYSETPOS") || this.check_set_position(1)) {
            data_valid = 1;
          }
        } else {
          data_valid = 0;
        }
      }
    } else if (this.has_by_data("BYMONTHDAY")) {
      this.by_indices.BYMONTHDAY++;

      if (this.by_indices.BYMONTHDAY >= this.by_data.BYMONTHDAY.length) {
        this.by_indices.BYMONTHDAY = 0;
        this.increment_month();
        if (this.by_indices.BYMONTHDAY >= this.by_data.BYMONTHDAY.length) {
          return 0;
        }
      }

      let daysInMonth = Time.daysInMonth(this.last.month, this.last.year);
      let day = this.by_data.BYMONTHDAY[this.by_indices.BYMONTHDAY];

      if (day < 0) {
        day = daysInMonth + day + 1;
      }

      if (day > daysInMonth) {
        this.last.day = 1;
        data_valid = this.is_day_in_byday(this.last);
      } else {
        this.last.day = day;
      }
    } else {
      this.increment_month();
      let daysInMonth = Time.daysInMonth(this.last.month, this.last.year);
      if (this.by_data.BYMONTHDAY[0] > daysInMonth) {
        data_valid = 0;
      } else {
        this.last.day = this.by_data.BYMONTHDAY[0];
      }
    }

    return data_valid;
  }

  next_weekday_by_week() {
    let end_of_data = 0;

    if (this.next_hour() == 0) {
      return end_of_data;
    }

    if (!this.has_by_data("BYDAY")) {
      return 1;
    }

    for (;;) {
      let tt = new Time();
      this.by_indices.BYDAY++;

      if (this.by_indices.BYDAY == Object.keys(this.by_data.BYDAY).length) {
        this.by_indices.BYDAY = 0;
        end_of_data = 1;
      }

      let coded_day = this.by_data.BYDAY[this.by_indices.BYDAY];
      let parts = this.ruleDayOfWeek(coded_day);
      let dow = parts[1];

      dow -= this.rule.wkst;

      if (dow < 0) {
        dow += 7;
      }

      tt.year = this.last.year;
      tt.month = this.last.month;
      tt.day = this.last.day;

      let startOfWeek = tt.startDoyWeek(this.rule.wkst);

      if (dow + startOfWeek < 1) {
        // The selected date is in the previous year
        if (!end_of_data) {
          continue;
        }
      }

      let next = Time.fromDayOfYear(startOfWeek + dow, this.last.year);

      /**
       * The normalization horrors below are due to
       * the fact that when the year/month/day changes
       * it can effect the other operations that come after.
       */
      this.last.year = next.year;
      this.last.month = next.month;
      this.last.day = next.day;

      return end_of_data;
    }
  }

  next_year() {
    if (this.next_hour() == 0) {
      return 0;
    }

    if (this.days.length == 0 || ++this.days_index == this.days.length) {
      this.days_index = 0;
      this.increment_year(this.rule.interval);
      if (this.has_by_data("BYMONTHDAY")) {
        this.by_data.BYMONTHDAY = this.normalizeByMonthDayRules(
          this.last.year,
          this.last.month,
          this.rule.parts.BYMONTHDAY
        );
      }
      this.expand_year_days(this.last.year);
      if (this.days.length == 0) {
        return 0;
      }
    }

    return this._nextByYearDay();
  }

  _nextByYearDay() {
    let doy = this.days[this.days_index];
    let year = this.last.year;

    if (Math.abs(doy) == 366 && !Time.isLeapYear(this.last.year)) {
      return 0;
    }

    if (doy < 1) {
        // Time.fromDayOfYear(doy, year) indexes relative to the
        // start of the given year. That is different from the
        // semantics of BYYEARDAY where negative indexes are an
        // offset from the end of the given year.
        doy += 1;
        year += 1;
    }
    let next = Time.fromDayOfYear(doy, year);
    this.last.day = next.day;
    this.last.month = next.month;

    return 1;
  }

  /**
   * @param dow (eg: '1TU', '-1MO')
   * @param {weekDay=} aWeekStart The week start weekday
   * @return [pos, numericDow] (eg: [1, 3]) numericDow is relative to aWeekStart
   */
  ruleDayOfWeek(dow, aWeekStart) {
    let matches = dow.match(/([+-]?[0-9])?(MO|TU|WE|TH|FR|SA|SU)/);
    if (matches) {
      let pos = parseInt(matches[1] || 0, 10);
      dow = Recur.icalDayToNumericDay(matches[2], aWeekStart);
      return [pos, dow];
    } else {
      return [0, 0];
    }
  }

  next_generic(aRuleType, aInterval, aDateAttr, aFollowingAttr, aPreviousIncr) {
    let has_by_rule = (aRuleType in this.by_data);
    let this_freq = (this.rule.freq == aInterval);
    let end_of_data = 0;

    if (aPreviousIncr && this[aPreviousIncr]() == 0) {
      return end_of_data;
    }

    if (has_by_rule) {
      this.by_indices[aRuleType]++;
      let dta = this.by_data[aRuleType];

      if (this.by_indices[aRuleType] == dta.length) {
        this.by_indices[aRuleType] = 0;
        end_of_data = 1;
      }
      this.last[aDateAttr] = dta[this.by_indices[aRuleType]];
    } else if (this_freq) {
      this["increment_" + aDateAttr](this.rule.interval);
    }

    if (has_by_rule && end_of_data && this_freq) {
      this["increment_" + aFollowingAttr](1);
    }

    return end_of_data;
  }

  increment_monthday(inc) {
    for (let i = 0; i < inc; i++) {
      let daysInMonth = Time.daysInMonth(this.last.month, this.last.year);
      this.last.day++;

      if (this.last.day > daysInMonth) {
        this.last.day -= daysInMonth;
        this.increment_month();
      }
    }
  }

  increment_month() {
    this.last.day = 1;
    if (this.has_by_data("BYMONTH")) {
      this.by_indices.BYMONTH++;

      if (this.by_indices.BYMONTH == this.by_data.BYMONTH.length) {
        this.by_indices.BYMONTH = 0;
        this.increment_year(1);
      }

      this.last.month = this.by_data.BYMONTH[this.by_indices.BYMONTH];
    } else {
      if (this.rule.freq == "MONTHLY") {
        this.last.month += this.rule.interval;
      } else {
        this.last.month++;
      }

      this.last.month--;
      let years = trunc(this.last.month / 12);
      this.last.month %= 12;
      this.last.month++;

      if (years != 0) {
        this.increment_year(years);
      }
    }

    if (this.has_by_data("BYMONTHDAY")) {
      this.by_data.BYMONTHDAY = this.normalizeByMonthDayRules(
        this.last.year,
        this.last.month,
        this.rule.parts.BYMONTHDAY
      );
    }
  }

  increment_year(inc) {
    // Don't jump into the next month if this.last is Feb 29.
    this.last.day = 1;
    this.last.year += inc;
  }

  increment_generic(inc, aDateAttr, aFactor, aNextIncrement) {
    this.last[aDateAttr] += inc;
    let nextunit = trunc(this.last[aDateAttr] / aFactor);
    this.last[aDateAttr] %= aFactor;
    if (nextunit != 0) {
      this["increment_" + aNextIncrement](nextunit);
    }
  }

  has_by_data(aRuleType) {
    return (aRuleType in this.rule.parts);
  }

  expand_year_days(aYear) {
    let t = new Time();
    this.days = [];

    // We need our own copy with a few keys set
    let parts = {};
    let rules = ["BYDAY", "BYWEEKNO", "BYMONTHDAY", "BYMONTH", "BYYEARDAY"];
    for (let part of rules) {
      if (part in this.rule.parts) {
        parts[part] = this.rule.parts[part];
      }
    }

    if ("BYMONTH" in parts && "BYWEEKNO" in parts) {
      let valid = 1;
      let validWeeks = {};
      t.year = aYear;
      t.isDate = true;

      for (let monthIdx = 0; monthIdx < this.by_data.BYMONTH.length; monthIdx++) {
        let month = this.by_data.BYMONTH[monthIdx];
        t.month = month;
        t.day = 1;
        let first_week = t.weekNumber(this.rule.wkst);
        t.day = Time.daysInMonth(month, aYear);
        let last_week = t.weekNumber(this.rule.wkst);
        for (monthIdx = first_week; monthIdx < last_week; monthIdx++) {
          validWeeks[monthIdx] = 1;
        }
      }

      for (let weekIdx = 0; weekIdx < this.by_data.BYWEEKNO.length && valid; weekIdx++) {
        let weekno = this.by_data.BYWEEKNO[weekIdx];
        if (weekno < 52) {
          valid &= validWeeks[weekIdx];
        } else {
          valid = 0;
        }
      }

      if (valid) {
        delete parts.BYMONTH;
      } else {
        delete parts.BYWEEKNO;
      }
    }

    let partCount = Object.keys(parts).length;

    if (partCount == 0) {
      let t1 = this.dtstart.clone();
      t1.year = this.last.year;
      this.days.push(t1.dayOfYear());
    } else if (partCount == 1 && "BYMONTH" in parts) {
      for (let month of this.by_data.BYMONTH) {
        let t2 = this.dtstart.clone();
        t2.year = aYear;
        t2.month = month;
        t2.isDate = true;
        this.days.push(t2.dayOfYear());
      }
    } else if (partCount == 1 && "BYMONTHDAY" in parts) {
      for (let monthday of this.by_data.BYMONTHDAY) {
        let t3 = this.dtstart.clone();
        if (monthday < 0) {
          let daysInMonth = Time.daysInMonth(t3.month, aYear);
          monthday = monthday + daysInMonth + 1;
        }
        t3.day = monthday;
        t3.year = aYear;
        t3.isDate = true;
        this.days.push(t3.dayOfYear());
      }
    } else if (partCount == 2 &&
               "BYMONTHDAY" in parts &&
               "BYMONTH" in parts) {
      for (let month of this.by_data.BYMONTH) {
        let daysInMonth = Time.daysInMonth(month, aYear);
        for (let monthday of this.by_data.BYMONTHDAY) {
          if (monthday < 0) {
            monthday = monthday + daysInMonth + 1;
          }
          t.day = monthday;
          t.month = month;
          t.year = aYear;
          t.isDate = true;

          this.days.push(t.dayOfYear());
        }
      }
    } else if (partCount == 1 && "BYWEEKNO" in parts) ; else if (partCount == 2 &&
               "BYWEEKNO" in parts &&
               "BYMONTHDAY" in parts) ; else if (partCount == 1 && "BYDAY" in parts) {
      this.days = this.days.concat(this.expand_by_day(aYear));
    } else if (partCount == 2 && "BYDAY" in parts && "BYMONTH" in parts) {
      for (let month of this.by_data.BYMONTH) {
        let daysInMonth = Time.daysInMonth(month, aYear);

        t.year = aYear;
        t.month = month;
        t.day = 1;
        t.isDate = true;

        let first_dow = t.dayOfWeek();
        let doy_offset = t.dayOfYear() - 1;

        t.day = daysInMonth;
        let last_dow = t.dayOfWeek();

        if (this.has_by_data("BYSETPOS")) {
          let by_month_day = [];
          for (let day = 1; day <= daysInMonth; day++) {
            t.day = day;
            if (this.is_day_in_byday(t)) {
              by_month_day.push(day);
            }
          }

          for (let spIndex = 0; spIndex < by_month_day.length; spIndex++) {
            if (this.check_set_position(spIndex + 1) ||
                this.check_set_position(spIndex - by_month_day.length)) {
              this.days.push(doy_offset + by_month_day[spIndex]);
            }
          }
        } else {
          for (let coded_day of this.by_data.BYDAY) {
            let bydayParts = this.ruleDayOfWeek(coded_day);
            let pos = bydayParts[0];
            let dow = bydayParts[1];
            let month_day;

            let first_matching_day = ((dow + 7 - first_dow) % 7) + 1;
            let last_matching_day = daysInMonth - ((last_dow + 7 - dow) % 7);

            if (pos == 0) {
              for (let day = first_matching_day; day <= daysInMonth; day += 7) {
                this.days.push(doy_offset + day);
              }
            } else if (pos > 0) {
              month_day = first_matching_day + (pos - 1) * 7;

              if (month_day <= daysInMonth) {
                this.days.push(doy_offset + month_day);
              }
            } else {
              month_day = last_matching_day + (pos + 1) * 7;

              if (month_day > 0) {
                this.days.push(doy_offset + month_day);
              }
            }
          }
        }
      }
      // Return dates in order of occurrence (1,2,3,...) instead
      // of by groups of weekdays (1,8,15,...,2,9,16,...).
      this.days.sort(function(a, b) { return a - b; }); // Comparator function allows to sort numbers.
    } else if (partCount == 2 && "BYDAY" in parts && "BYMONTHDAY" in parts) {
      let expandedDays = this.expand_by_day(aYear);

      for (let day of expandedDays) {
        let tt = Time.fromDayOfYear(day, aYear);
        if (this.by_data.BYMONTHDAY.indexOf(tt.day) >= 0) {
          this.days.push(day);
        }
      }
    } else if (partCount == 3 &&
               "BYDAY" in parts &&
               "BYMONTHDAY" in parts &&
               "BYMONTH" in parts) {
      let expandedDays = this.expand_by_day(aYear);

      for (let day of expandedDays) {
        let tt = Time.fromDayOfYear(day, aYear);

        if (this.by_data.BYMONTH.indexOf(tt.month) >= 0 &&
            this.by_data.BYMONTHDAY.indexOf(tt.day) >= 0) {
          this.days.push(day);
        }
      }
    } else if (partCount == 2 && "BYDAY" in parts && "BYWEEKNO" in parts) {
      let expandedDays = this.expand_by_day(aYear);

      for (let day of expandedDays) {
        let tt = Time.fromDayOfYear(day, aYear);
        let weekno = tt.weekNumber(this.rule.wkst);

        if (this.by_data.BYWEEKNO.indexOf(weekno)) {
          this.days.push(day);
        }
      }
    } else if (partCount == 3 &&
               "BYDAY" in parts &&
               "BYWEEKNO" in parts &&
               "BYMONTHDAY" in parts) ; else if (partCount == 1 && "BYYEARDAY" in parts) {
      this.days = this.days.concat(this.by_data.BYYEARDAY);
    } else if (partCount == 2 && "BYYEARDAY" in parts && "BYDAY" in parts) {
      let daysInYear = Time.isLeapYear(aYear) ? 366 : 365;
      let expandedDays = new Set(this.expand_by_day(aYear));

      for (let doy of this.by_data.BYYEARDAY) {
        if (doy < 0) {
          doy += daysInYear + 1;
        }

        if (expandedDays.has(doy)) {
          this.days.push(doy);
        }
      }
    } else {
      this.days = [];
    }

    let daysInYear = Time.isLeapYear(aYear) ? 366 : 365;
    this.days.sort((a, b) => {
      if (a < 0) a += daysInYear + 1;
      if (b < 0) b += daysInYear + 1;
      return a - b;
    });

    return 0;
  }

  expand_by_day(aYear) {

    let days_list = [];
    let tmp = this.last.clone();

    tmp.year = aYear;
    tmp.month = 1;
    tmp.day = 1;
    tmp.isDate = true;

    let start_dow = tmp.dayOfWeek();

    tmp.month = 12;
    tmp.day = 31;
    tmp.isDate = true;

    let end_dow = tmp.dayOfWeek();
    let end_year_day = tmp.dayOfYear();

    for (let day of this.by_data.BYDAY) {
      let parts = this.ruleDayOfWeek(day);
      let pos = parts[0];
      let dow = parts[1];

      if (pos == 0) {
        let tmp_start_doy = ((dow + 7 - start_dow) % 7) + 1;

        for (let doy = tmp_start_doy; doy <= end_year_day; doy += 7) {
          days_list.push(doy);
        }

      } else if (pos > 0) {
        let first;
        if (dow >= start_dow) {
          first = dow - start_dow + 1;
        } else {
          first = dow - start_dow + 8;
        }

        days_list.push(first + (pos - 1) * 7);
      } else {
        let last;
        pos = -pos;

        if (dow <= end_dow) {
          last = end_year_day - end_dow + dow;
        } else {
          last = end_year_day - end_dow + dow - 7;
        }

        days_list.push(last - (pos - 1) * 7);
      }
    }
    return days_list;
  }

  is_day_in_byday(tt) {
    if (this.by_data.BYDAY) {
      for (let day of this.by_data.BYDAY) {
        let parts = this.ruleDayOfWeek(day);
        let pos = parts[0];
        let dow = parts[1];
        let this_dow = tt.dayOfWeek();

        if ((pos == 0 && dow == this_dow) ||
            (tt.nthWeekDay(dow, pos) == tt.day)) {
          return 1;
        }
      }
    }

    return 0;
  }

  /**
   * Checks if given value is in BYSETPOS.
   *
   * @private
   * @param {Numeric} aPos position to check for.
   * @return {Boolean} false unless BYSETPOS rules exist
   *                   and the given value is present in rules.
   */
  check_set_position(aPos) {
    if (this.has_by_data('BYSETPOS')) {
      let idx = this.by_data.BYSETPOS.indexOf(aPos);
      // negative numbers are not false-y
      return idx !== -1;
    }
    return false;
  }

  sort_byday_rules(aRules) {
    for (let i = 0; i < aRules.length; i++) {
      for (let j = 0; j < i; j++) {
        let one = this.ruleDayOfWeek(aRules[j], this.rule.wkst)[1];
        let two = this.ruleDayOfWeek(aRules[i], this.rule.wkst)[1];

        if (one > two) {
          let tmp = aRules[i];
          aRules[i] = aRules[j];
          aRules[j] = tmp;
        }
      }
    }
  }

  check_contract_restriction(aRuleType, v) {
    let indexMapValue = RecurIterator._indexMap[aRuleType];
    let ruleMapValue = RecurIterator._expandMap[this.rule.freq][indexMapValue];
    let pass = false;

    if (aRuleType in this.by_data &&
        ruleMapValue == RecurIterator.CONTRACT) {

      let ruleType = this.by_data[aRuleType];

      for (let bydata of ruleType) {
        if (bydata == v) {
          pass = true;
          break;
        }
      }
    } else {
      // Not a contracting byrule or has no data, test passes
      pass = true;
    }
    return pass;
  }

  check_contracting_rules() {
    let dow = this.last.dayOfWeek();
    let weekNo = this.last.weekNumber(this.rule.wkst);
    let doy = this.last.dayOfYear();

    return (this.check_contract_restriction("BYSECOND", this.last.second) &&
            this.check_contract_restriction("BYMINUTE", this.last.minute) &&
            this.check_contract_restriction("BYHOUR", this.last.hour) &&
            this.check_contract_restriction("BYDAY", Recur.numericDayToIcalDay(dow)) &&
            this.check_contract_restriction("BYWEEKNO", weekNo) &&
            this.check_contract_restriction("BYMONTHDAY", this.last.day) &&
            this.check_contract_restriction("BYMONTH", this.last.month) &&
            this.check_contract_restriction("BYYEARDAY", doy));
  }

  setup_defaults(aRuleType, req, deftime) {
    let indexMapValue = RecurIterator._indexMap[aRuleType];
    let ruleMapValue = RecurIterator._expandMap[this.rule.freq][indexMapValue];

    if (ruleMapValue != RecurIterator.CONTRACT) {
      if (!(aRuleType in this.by_data)) {
        this.by_data[aRuleType] = [deftime];
      }
      if (this.rule.freq != req) {
        return this.by_data[aRuleType][0];
      }
    }
    return deftime;
  }

  /**
   * Convert iterator into a serialize-able object.  Will preserve current
   * iteration sequence to ensure the seamless continuation of the recurrence
   * rule.
   * @return {Object}
   */
  toJSON() {
    let result = Object.create(null);

    result.initialized = this.initialized;
    result.rule = this.rule.toJSON();
    result.dtstart = this.dtstart.toJSON();
    result.by_data = this.by_data;
    result.days = this.days;
    result.last = this.last.toJSON();
    result.by_indices = this.by_indices;
    result.occurrence_number = this.occurrence_number;

    return result;
  }
}

/**
 * An error indicating that a recurrence rule is invalid and produces no
 * occurrences.
 *
 * @extends {Error}
 * @class
 */
class InvalidRecurrenceRuleError extends Error {
  constructor() {
    super("Recurrence rule has no valid occurrences");
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 *
 * @ignore
 * @typedef {import("./types.js").weekDay} weekDay
 * Imports the 'weekDay' type from the "types.js" module
 * @typedef {import("./types.js").frequencyValues} frequencyValues
 * Imports the 'frequencyValues' type from the "types.js" module
 */

const VALID_DAY_NAMES = /^(SU|MO|TU|WE|TH|FR|SA)$/;
const VALID_BYDAY_PART = /^([+-])?(5[0-3]|[1-4][0-9]|[1-9])?(SU|MO|TU|WE|TH|FR|SA)$/;
const DOW_MAP = {
  SU: Time.SUNDAY,
  MO: Time.MONDAY,
  TU: Time.TUESDAY,
  WE: Time.WEDNESDAY,
  TH: Time.THURSDAY,
  FR: Time.FRIDAY,
  SA: Time.SATURDAY
};

const REVERSE_DOW_MAP = Object.fromEntries(Object.entries(DOW_MAP).map(entry => entry.reverse()));

const ALLOWED_FREQ = ['SECONDLY', 'MINUTELY', 'HOURLY',
                      'DAILY', 'WEEKLY', 'MONTHLY', 'YEARLY'];

/**
 * This class represents the "recur" value type, used for example by RRULE. It provides methods to
 * calculate occurrences among others.
 *
 * @memberof ICAL
 */
class Recur {
  /**
   * Creates a new {@link ICAL.Recur} instance from the passed string.
   *
   * @param {String} string         The string to parse
   * @return {Recur}                The created recurrence instance
   */
  static fromString(string) {
    let data = this._stringToData(string, false);
    return new Recur(data);
  }

  /**
   * Creates a new {@link ICAL.Recur} instance using members from the passed
   * data object.
   *
   * @param {Object} aData                              An object with members of the recurrence
   * @param {frequencyValues=} aData.freq               The frequency value
   * @param {Number=} aData.interval                    The INTERVAL value
   * @param {weekDay=} aData.wkst                       The week start value
   * @param {Time=} aData.until                         The end of the recurrence set
   * @param {Number=} aData.count                       The number of occurrences
   * @param {Array.<Number>=} aData.bysecond            The seconds for the BYSECOND part
   * @param {Array.<Number>=} aData.byminute            The minutes for the BYMINUTE part
   * @param {Array.<Number>=} aData.byhour              The hours for the BYHOUR part
   * @param {Array.<String>=} aData.byday               The BYDAY values
   * @param {Array.<Number>=} aData.bymonthday          The days for the BYMONTHDAY part
   * @param {Array.<Number>=} aData.byyearday           The days for the BYYEARDAY part
   * @param {Array.<Number>=} aData.byweekno            The weeks for the BYWEEKNO part
   * @param {Array.<Number>=} aData.bymonth             The month for the BYMONTH part
   * @param {Array.<Number>=} aData.bysetpos            The positionals for the BYSETPOS part
   */
  static fromData(aData) {
    return new Recur(aData);
  }

  /**
   * Converts a recurrence string to a data object, suitable for the fromData
   * method.
   *
   * @private
   * @param {String} string     The string to parse
   * @param {Boolean} fmtIcal   If true, the string is considered to be an
   *                              iCalendar string
   * @return {Recur}            The recurrence instance
   */
  static _stringToData(string, fmtIcal) {
    let dict = Object.create(null);

    // split is slower in FF but fast enough.
    // v8 however this is faster then manual split?
    let values = string.split(';');
    let len = values.length;

    for (let i = 0; i < len; i++) {
      let parts = values[i].split('=');
      let ucname = parts[0].toUpperCase();
      let lcname = parts[0].toLowerCase();
      let name = (fmtIcal ? lcname : ucname);
      let value = parts[1];

      if (ucname in partDesign) {
        let partArr = value.split(',');
        let partSet = new Set();

        for (let part of partArr) {
          partSet.add(partDesign[ucname](part));
        }
        partArr = [...partSet];

        dict[name] = (partArr.length == 1 ? partArr[0] : partArr);
      } else if (ucname in optionDesign) {
        optionDesign[ucname](value, dict, fmtIcal);
      } else {
        // Don't swallow unknown values. Just set them as they are.
        dict[lcname] = value;
      }
    }

    return dict;
  }

  /**
   * Convert an ical representation of a day (SU, MO, etc..)
   * into a numeric value of that day.
   *
   * @param {String} string     The iCalendar day name
   * @param {weekDay=} aWeekStart
   *        The week start weekday, defaults to SUNDAY
   * @return {Number}           Numeric value of given day
   */
  static icalDayToNumericDay(string, aWeekStart) {
    //XXX: this is here so we can deal
    //     with possibly invalid string values.
    let firstDow = aWeekStart || Time.SUNDAY;
    return ((DOW_MAP[string] - firstDow + 7) % 7) + 1;
  }

  /**
   * Convert a numeric day value into its ical representation (SU, MO, etc..)
   *
   * @param {Number} num        Numeric value of given day
   * @param {weekDay=} aWeekStart
   *        The week start weekday, defaults to SUNDAY
   * @return {String}           The ICAL day value, e.g SU,MO,...
   */
  static numericDayToIcalDay(num, aWeekStart) {
    //XXX: this is here so we can deal with possibly invalid number values.
    //     Also, this allows consistent mapping between day numbers and day
    //     names for external users.
    let firstDow = aWeekStart || Time.SUNDAY;
    let dow = (num + firstDow - Time.SUNDAY);
    if (dow > 7) {
      dow -= 7;
    }
    return REVERSE_DOW_MAP[dow];
  }

  /**
   * Create a new instance of the Recur class.
   *
   * @param {Object} data                               An object with members of the recurrence
   * @param {frequencyValues=} data.freq                The frequency value
   * @param {Number=} data.interval                     The INTERVAL value
   * @param {weekDay=} data.wkst                        The week start value
   * @param {Time=} data.until                          The end of the recurrence set
   * @param {Number=} data.count                        The number of occurrences
   * @param {Array.<Number>=} data.bysecond             The seconds for the BYSECOND part
   * @param {Array.<Number>=} data.byminute             The minutes for the BYMINUTE part
   * @param {Array.<Number>=} data.byhour               The hours for the BYHOUR part
   * @param {Array.<String>=} data.byday                The BYDAY values
   * @param {Array.<Number>=} data.bymonthday           The days for the BYMONTHDAY part
   * @param {Array.<Number>=} data.byyearday            The days for the BYYEARDAY part
   * @param {Array.<Number>=} data.byweekno             The weeks for the BYWEEKNO part
   * @param {Array.<Number>=} data.bymonth              The month for the BYMONTH part
   * @param {Array.<Number>=} data.bysetpos             The positionals for the BYSETPOS part
   */
  constructor(data) {
    this.wrappedJSObject = this;
    this.parts = {};

    if (data && typeof(data) === 'object') {
      this.fromData(data);
    }
  }

  /**
   * An object holding the BY-parts of the recurrence rule
   * @memberof ICAL.Recur
   * @typedef {Object} byParts
   * @property {Array.<Number>=} BYSECOND            The seconds for the BYSECOND part
   * @property {Array.<Number>=} BYMINUTE            The minutes for the BYMINUTE part
   * @property {Array.<Number>=} BYHOUR              The hours for the BYHOUR part
   * @property {Array.<String>=} BYDAY               The BYDAY values
   * @property {Array.<Number>=} BYMONTHDAY          The days for the BYMONTHDAY part
   * @property {Array.<Number>=} BYYEARDAY           The days for the BYYEARDAY part
   * @property {Array.<Number>=} BYWEEKNO            The weeks for the BYWEEKNO part
   * @property {Array.<Number>=} BYMONTH             The month for the BYMONTH part
   * @property {Array.<Number>=} BYSETPOS            The positionals for the BYSETPOS part
   */

  /**
   * An object holding the BY-parts of the recurrence rule
   * @type {byParts}
   */
  parts = null;

  /**
   * The interval value for the recurrence rule.
   * @type {Number}
   */
  interval = 1;

  /**
   * The week start day
   *
   * @type {weekDay}
   * @default ICAL.Time.MONDAY
   */
  wkst = Time.MONDAY;

  /**
   * The end of the recurrence
   * @type {?Time}
   */
  until = null;

  /**
   * The maximum number of occurrences
   * @type {?Number}
   */
  count = null;

  /**
   * The frequency value.
   * @type {frequencyValues}
   */
  freq = null;

  /**
   * The class identifier.
   * @constant
   * @type {String}
   * @default "icalrecur"
   */
  icalclass = "icalrecur";

  /**
   * The type name, to be used in the jCal object.
   * @constant
   * @type {String}
   * @default "recur"
   */
  icaltype = "recur";

  /**
   * Create a new iterator for this recurrence rule. The passed start date
   * must be the start date of the event, not the start of the range to
   * search in.
   *
   * @example
   * let recur = comp.getFirstPropertyValue('rrule');
   * let dtstart = comp.getFirstPropertyValue('dtstart');
   * let iter = recur.iterator(dtstart);
   * for (let next = iter.next(); next; next = iter.next()) {
   *   if (next.compare(rangeStart) < 0) {
   *     continue;
   *   }
   *   console.log(next.toString());
   * }
   *
   * @param {Time} aStart        The item's start date
   * @return {RecurIterator}     The recurrence iterator
   */
  iterator(aStart) {
    return new RecurIterator({
      rule: this,
      dtstart: aStart
    });
  }

  /**
   * Returns a clone of the recurrence object.
   *
   * @return {Recur}      The cloned object
   */
  clone() {
    return new Recur(this.toJSON());
  }

  /**
   * Checks if the current rule is finite, i.e. has a count or until part.
   *
   * @return {Boolean}        True, if the rule is finite
   */
  isFinite() {
    return !!(this.count || this.until);
  }

  /**
   * Checks if the current rule has a count part, and not limited by an until
   * part.
   *
   * @return {Boolean}        True, if the rule is by count
   */
  isByCount() {
    return !!(this.count && !this.until);
  }

  /**
   * Adds a component (part) to the recurrence rule. This is not a component
   * in the sense of {@link ICAL.Component}, but a part of the recurrence
   * rule, i.e. BYMONTH.
   *
   * @param {String} aType            The name of the component part
   * @param {Array|String} aValue     The component value
   */
  addComponent(aType, aValue) {
    let ucname = aType.toUpperCase();
    if (ucname in this.parts) {
      this.parts[ucname].push(aValue);
    } else {
      this.parts[ucname] = [aValue];
    }
  }

  /**
   * Sets the component value for the given by-part.
   *
   * @param {String} aType        The component part name
   * @param {Array} aValues       The component values
   */
  setComponent(aType, aValues) {
    this.parts[aType.toUpperCase()] = aValues.slice();
  }

  /**
   * Gets (a copy) of the requested component value.
   *
   * @param {String} aType        The component part name
   * @return {Array}              The component part value
   */
  getComponent(aType) {
    let ucname = aType.toUpperCase();
    return (ucname in this.parts ? this.parts[ucname].slice() : []);
  }

  /**
   * Retrieves the next occurrence after the given recurrence id. See the
   * guide on {@tutorial terminology} for more details.
   *
   * NOTE: Currently, this method iterates all occurrences from the start
   * date. It should not be called in a loop for performance reasons. If you
   * would like to get more than one occurrence, you can iterate the
   * occurrences manually, see the example on the
   * {@link ICAL.Recur#iterator iterator} method.
   *
   * @param {Time} aStartTime        The start of the event series
   * @param {Time} aRecurrenceId     The date of the last occurrence
   * @return {Time}                  The next occurrence after
   */
  getNextOccurrence(aStartTime, aRecurrenceId) {
    let iter = this.iterator(aStartTime);
    let next;

    do {
      next = iter.next();
    } while (next && next.compare(aRecurrenceId) <= 0);

    if (next && aRecurrenceId.zone) {
      next.zone = aRecurrenceId.zone;
    }

    return next;
  }

  /**
   * Sets up the current instance using members from the passed data object.
   *
   * @param {Object} data                               An object with members of the recurrence
   * @param {frequencyValues=} data.freq                The frequency value
   * @param {Number=} data.interval                     The INTERVAL value
   * @param {weekDay=} data.wkst                        The week start value
   * @param {Time=} data.until                          The end of the recurrence set
   * @param {Number=} data.count                        The number of occurrences
   * @param {Array.<Number>=} data.bysecond             The seconds for the BYSECOND part
   * @param {Array.<Number>=} data.byminute             The minutes for the BYMINUTE part
   * @param {Array.<Number>=} data.byhour               The hours for the BYHOUR part
   * @param {Array.<String>=} data.byday                The BYDAY values
   * @param {Array.<Number>=} data.bymonthday           The days for the BYMONTHDAY part
   * @param {Array.<Number>=} data.byyearday            The days for the BYYEARDAY part
   * @param {Array.<Number>=} data.byweekno             The weeks for the BYWEEKNO part
   * @param {Array.<Number>=} data.bymonth              The month for the BYMONTH part
   * @param {Array.<Number>=} data.bysetpos             The positionals for the BYSETPOS part
   */
  fromData(data) {
    for (let key in data) {
      let uckey = key.toUpperCase();

      if (uckey in partDesign) {
        if (Array.isArray(data[key])) {
          this.parts[uckey] = data[key];
        } else {
          this.parts[uckey] = [data[key]];
        }
      } else {
        this[key] = data[key];
      }
    }

    if (this.interval && typeof this.interval != "number") {
      optionDesign.INTERVAL(this.interval, this);
    }

    if (this.wkst && typeof this.wkst != "number") {
      this.wkst = Recur.icalDayToNumericDay(this.wkst);
    }

    if (this.until && !(this.until instanceof Time)) {
      this.until = Time.fromString(this.until);
    }
  }

  /**
   * The jCal representation of this recurrence type.
   * @return {Object}
   */
  toJSON() {
    let res = Object.create(null);
    res.freq = this.freq;

    if (this.count) {
      res.count = this.count;
    }

    if (this.interval > 1) {
      res.interval = this.interval;
    }

    for (let [k, kparts] of Object.entries(this.parts)) {
      if (Array.isArray(kparts) && kparts.length == 1) {
        res[k.toLowerCase()] = kparts[0];
      } else {
        res[k.toLowerCase()] = clone(kparts);
      }
    }

    if (this.until) {
      res.until = this.until.toString();
    }
    if ('wkst' in this && this.wkst !== Time.DEFAULT_WEEK_START) {
      res.wkst = Recur.numericDayToIcalDay(this.wkst);
    }
    return res;
  }

  /**
   * The string representation of this recurrence rule.
   * @return {String}
   */
  toString() {
    // TODO retain order
    let str = "FREQ=" + this.freq;
    if (this.count) {
      str += ";COUNT=" + this.count;
    }
    if (this.interval > 1) {
      str += ";INTERVAL=" + this.interval;
    }
    for (let [k, v] of Object.entries(this.parts)) {
      str += ";" + k + "=" + v;
    }
    if (this.until) {
      str += ';UNTIL=' + this.until.toICALString();
    }
    if ('wkst' in this && this.wkst !== Time.DEFAULT_WEEK_START) {
      str += ';WKST=' + Recur.numericDayToIcalDay(this.wkst);
    }
    return str;
  }
}

function parseNumericValue(type, min, max, value) {
  let result = value;

  if (value[0] === '+') {
    result = value.slice(1);
  }

  result = strictParseInt(result);

  if (min !== undefined && value < min) {
    throw new Error(
      type + ': invalid value "' + value + '" must be > ' + min
    );
  }

  if (max !== undefined && value > max) {
    throw new Error(
      type + ': invalid value "' + value + '" must be < ' + min
    );
  }

  return result;
}

const optionDesign = {
  FREQ: function(value, dict, fmtIcal) {
    // yes this is actually equal or faster then regex.
    // upside here is we can enumerate the valid values.
    if (ALLOWED_FREQ.indexOf(value) !== -1) {
      dict.freq = value;
    } else {
      throw new Error(
        'invalid frequency "' + value + '" expected: "' +
        ALLOWED_FREQ.join(', ') + '"'
      );
    }
  },

  COUNT: function(value, dict, fmtIcal) {
    dict.count = strictParseInt(value);
  },

  INTERVAL: function(value, dict, fmtIcal) {
    dict.interval = strictParseInt(value);
    if (dict.interval < 1) {
      // 0 or negative values are not allowed, some engines seem to generate
      // it though. Assume 1 instead.
      dict.interval = 1;
    }
  },

  UNTIL: function(value, dict, fmtIcal) {
    if (value.length > 10) {
      dict.until = design.icalendar.value['date-time'].fromICAL(value);
    } else {
      dict.until = design.icalendar.value.date.fromICAL(value);
    }
    if (!fmtIcal) {
      dict.until = Time.fromString(dict.until);
    }
  },

  WKST: function(value, dict, fmtIcal) {
    if (VALID_DAY_NAMES.test(value)) {
      dict.wkst = Recur.icalDayToNumericDay(value);
    } else {
      throw new Error('invalid WKST value "' + value + '"');
    }
  }
};

const partDesign = {
  BYSECOND: parseNumericValue.bind(undefined, 'BYSECOND', 0, 60),
  BYMINUTE: parseNumericValue.bind(undefined, 'BYMINUTE', 0, 59),
  BYHOUR: parseNumericValue.bind(undefined, 'BYHOUR', 0, 23),
  BYDAY: function(value) {
    if (VALID_BYDAY_PART.test(value)) {
      return value;
    } else {
      throw new Error('invalid BYDAY value "' + value + '"');
    }
  },
  BYMONTHDAY: parseNumericValue.bind(undefined, 'BYMONTHDAY', -31, 31),
  BYYEARDAY: parseNumericValue.bind(undefined, 'BYYEARDAY', -366, 366),
  BYWEEKNO: parseNumericValue.bind(undefined, 'BYWEEKNO', -53, 53),
  BYMONTH: parseNumericValue.bind(undefined, 'BYMONTH', 1, 12),
  BYSETPOS: parseNumericValue.bind(undefined, 'BYSETPOS', -366, 366)
};

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 * @ignore
 * @typedef {import("./types.js").designSet} designSet
 * Imports the 'designSet' type from the "types.js" module
 */

/** @module ICAL.design */

const FROM_ICAL_NEWLINE = /\\\\|\\;|\\,|\\[Nn]/g;
const TO_ICAL_NEWLINE = /\\|;|,|\n/g;
const FROM_VCARD_NEWLINE = /\\\\|\\,|\\[Nn]/g;
const TO_VCARD_NEWLINE = /\\|,|\n/g;

function createTextType(fromNewline, toNewline) {
  let result = {
    matches: /.*/,

    fromICAL: function(aValue, structuredEscape) {
      return replaceNewline(aValue, fromNewline, structuredEscape);
    },

    toICAL: function(aValue, structuredEscape) {
      let regEx = toNewline;
      if (structuredEscape)
         regEx = new RegExp(regEx.source + '|' + structuredEscape, regEx.flags);
      return aValue.replace(regEx, function(str) {
        switch (str) {
        case "\\":
          return "\\\\";
        case ";":
          return "\\;";
        case ",":
          return "\\,";
        case "\n":
          return "\\n";
        /* c8 ignore next 2 */
        default:
          return str;
        }
      });
    }
  };
  return result;
}

// default types used multiple times
const DEFAULT_TYPE_TEXT = { defaultType: "text" };
const DEFAULT_TYPE_TEXT_MULTI = { defaultType: "text", multiValue: "," };
const DEFAULT_TYPE_TEXT_STRUCTURED = { defaultType: "text", structuredValue: ";" };
const DEFAULT_TYPE_INTEGER = { defaultType: "integer" };
const DEFAULT_TYPE_DATETIME_DATE = { defaultType: "date-time", allowedTypes: ["date-time", "date"] };
const DEFAULT_TYPE_DATETIME = { defaultType: "date-time" };
const DEFAULT_TYPE_URI = { defaultType: "uri" };
const DEFAULT_TYPE_UTCOFFSET = { defaultType: "utc-offset" };
const DEFAULT_TYPE_RECUR = { defaultType: "recur" };
const DEFAULT_TYPE_DATE_ANDOR_TIME = { defaultType: "date-and-or-time", allowedTypes: ["date-time", "date", "text"] };

function replaceNewlineReplace(string) {
  switch (string) {
    case "\\\\":
      return "\\";
    case "\\;":
      return ";";
    case "\\,":
      return ",";
    case "\\n":
    case "\\N":
      return "\n";
    /* c8 ignore next 2 */
    default:
      return string;
  }
}

function replaceNewline(value, newline, structuredEscape) {
  // avoid regex when possible.
  if (value.indexOf('\\') === -1) {
    return value;
  }
  if (structuredEscape)
     newline = new RegExp(newline.source + '|\\\\' + structuredEscape, newline.flags);
  return value.replace(newline, replaceNewlineReplace);
}

let commonProperties = {
  "categories": DEFAULT_TYPE_TEXT_MULTI,
  "url": DEFAULT_TYPE_URI,
  "version": DEFAULT_TYPE_TEXT,
  "uid": DEFAULT_TYPE_TEXT
};

let commonValues = {
  "boolean": {
    values: ["TRUE", "FALSE"],

    fromICAL: function(aValue) {
      switch (aValue) {
        case 'TRUE':
          return true;
        case 'FALSE':
          return false;
        default:
          //TODO: parser warning
          return false;
      }
    },

    toICAL: function(aValue) {
      if (aValue) {
        return 'TRUE';
      }
      return 'FALSE';
    }

  },
  float: {
    matches: /^[+-]?\d+\.\d+$/,

    fromICAL: function(aValue) {
      let parsed = parseFloat(aValue);
      if (isStrictlyNaN(parsed)) {
        // TODO: parser warning
        return 0.0;
      }
      return parsed;
    },

    toICAL: function(aValue) {
      return String(aValue);
    }
  },
  integer: {
    fromICAL: function(aValue) {
      let parsed = parseInt(aValue);
      if (isStrictlyNaN(parsed)) {
        return 0;
      }
      return parsed;
    },

    toICAL: function(aValue) {
      return String(aValue);
    }
  },
  "utc-offset": {
    toICAL: function(aValue) {
      if (aValue.length < 7) {
        // no seconds
        // -0500
        return aValue.slice(0, 3) +
               aValue.slice(4, 6);
      } else {
        // seconds
        // -050000
        return aValue.slice(0, 3) +
               aValue.slice(4, 6) +
               aValue.slice(7, 9);
      }
    },

    fromICAL: function(aValue) {
      if (aValue.length < 6) {
        // no seconds
        // -05:00
        return aValue.slice(0, 3) + ':' +
               aValue.slice(3, 5);
      } else {
        // seconds
        // -05:00:00
        return aValue.slice(0, 3) + ':' +
               aValue.slice(3, 5) + ':' +
               aValue.slice(5, 7);
      }
    },

    decorate: function(aValue) {
      return UtcOffset.fromString(aValue);
    },

    undecorate: function(aValue) {
      return aValue.toString();
    }
  }
};

let icalParams = {
  // Although the syntax is DQUOTE uri DQUOTE, I don't think we should
  // enforce anything aside from it being a valid content line.
  //
  // At least some params require - if multi values are used - DQUOTEs
  // for each of its values - e.g. delegated-from="uri1","uri2"
  // To indicate this, I introduced the new k/v pair
  // multiValueSeparateDQuote: true
  //
  // "ALTREP": { ... },

  // CN just wants a param-value
  // "CN": { ... }

  "cutype": {
    values: ["INDIVIDUAL", "GROUP", "RESOURCE", "ROOM", "UNKNOWN"],
    allowXName: true,
    allowIanaToken: true
  },

  "delegated-from": {
    valueType: "cal-address",
    multiValue: ",",
    multiValueSeparateDQuote: true
  },
  "delegated-to": {
    valueType: "cal-address",
    multiValue: ",",
    multiValueSeparateDQuote: true
  },
  // "DIR": { ... }, // See ALTREP
  "encoding": {
    values: ["8BIT", "BASE64"]
  },
  // "FMTTYPE": { ... }, // See ALTREP
  "fbtype": {
    values: ["FREE", "BUSY", "BUSY-UNAVAILABLE", "BUSY-TENTATIVE"],
    allowXName: true,
    allowIanaToken: true
  },
  // "LANGUAGE": { ... }, // See ALTREP
  "member": {
    valueType: "cal-address",
    multiValue: ",",
    multiValueSeparateDQuote: true
  },
  "partstat": {
    // TODO These values are actually different per-component
    values: ["NEEDS-ACTION", "ACCEPTED", "DECLINED", "TENTATIVE",
             "DELEGATED", "COMPLETED", "IN-PROCESS"],
    allowXName: true,
    allowIanaToken: true
  },
  "range": {
    values: ["THISANDFUTURE"]
  },
  "related": {
    values: ["START", "END"]
  },
  "reltype": {
    values: ["PARENT", "CHILD", "SIBLING"],
    allowXName: true,
    allowIanaToken: true
  },
  "role": {
    values: ["REQ-PARTICIPANT", "CHAIR",
             "OPT-PARTICIPANT", "NON-PARTICIPANT"],
    allowXName: true,
    allowIanaToken: true
  },
  "rsvp": {
    values: ["TRUE", "FALSE"]
  },
  "sent-by": {
    valueType: "cal-address"
  },
  "tzid": {
    matches: /^\//
  },
  "value": {
    // since the value here is a 'type' lowercase is used.
    values: ["binary", "boolean", "cal-address", "date", "date-time",
             "duration", "float", "integer", "period", "recur", "text",
             "time", "uri", "utc-offset"],
    allowXName: true,
    allowIanaToken: true
  }
};

// When adding a value here, be sure to add it to the parameter types!
const icalValues = extend(commonValues, {
  text: createTextType(FROM_ICAL_NEWLINE, TO_ICAL_NEWLINE),

  uri: {
    // TODO
    /* ... */
  },

  "binary": {
    decorate: function(aString) {
      return Binary.fromString(aString);
    },

    undecorate: function(aBinary) {
      return aBinary.toString();
    }
  },
  "cal-address": {
    // needs to be an uri
  },
  "date": {
    decorate: function(aValue, aProp) {
      {
        return Time.fromDateString(aValue, aProp);
      }
    },

    /**
     * undecorates a time object.
     */
    undecorate: function(aValue) {
      return aValue.toString();
    },

    fromICAL: function(aValue) {
      // from: 20120901
      // to: 2012-09-01
      {
        return aValue.slice(0, 4) + '-' +
               aValue.slice(4, 6) + '-' +
               aValue.slice(6, 8);
      }
    },

    toICAL: function(aValue) {
      // from: 2012-09-01
      // to: 20120901
      let len = aValue.length;

      if (len == 10) {
        return aValue.slice(0, 4) +
               aValue.slice(5, 7) +
               aValue.slice(8, 10);
      } else if (len >= 19) {
        return icalValues["date-time"].toICAL(aValue);
      } else {
        //TODO: serialize warning?
        return aValue;
      }

    }
  },
  "date-time": {
    fromICAL: function(aValue) {
      // from: 20120901T130000
      // to: 2012-09-01T13:00:00
      {
        let result = aValue.slice(0, 4) + '-' +
                     aValue.slice(4, 6) + '-' +
                     aValue.slice(6, 8) + 'T' +
                     aValue.slice(9, 11) + ':' +
                     aValue.slice(11, 13) + ':' +
                     aValue.slice(13, 15);

        if (aValue[15] && aValue[15] === 'Z') {
          result += 'Z';
        }

        return result;
      }
    },

    toICAL: function(aValue) {
      // from: 2012-09-01T13:00:00
      // to: 20120901T130000
      let len = aValue.length;

      if (len >= 19) {
        let result = aValue.slice(0, 4) +
                     aValue.slice(5, 7) +
                     // grab the (DDTHH) segment
                     aValue.slice(8, 13) +
                     // MM
                     aValue.slice(14, 16) +
                     // SS
                     aValue.slice(17, 19);

        if (aValue[19] && aValue[19] === 'Z') {
          result += 'Z';
        }
        return result;
      } else {
        // TODO: error
        return aValue;
      }
    },

    decorate: function(aValue, aProp) {
      {
        return Time.fromDateTimeString(aValue, aProp);
      }
    },

    undecorate: function(aValue) {
      return aValue.toString();
    }
  },
  duration: {
    decorate: function(aValue) {
      return Duration.fromString(aValue);
    },
    undecorate: function(aValue) {
      return aValue.toString();
    }
  },
  period: {
    fromICAL: function(string) {
      let parts = string.split('/');
      parts[0] = icalValues['date-time'].fromICAL(parts[0]);

      if (!Duration.isValueString(parts[1])) {
        parts[1] = icalValues['date-time'].fromICAL(parts[1]);
      }

      return parts;
    },

    toICAL: function(parts) {
      parts = parts.slice();
      {
        parts[0] = icalValues['date-time'].toICAL(parts[0]);
      }

      if (!Duration.isValueString(parts[1])) {
        {
          parts[1] = icalValues['date-time'].toICAL(parts[1]);
        }
      }

      return parts.join("/");
    },

    decorate: function(aValue, aProp) {
      return Period.fromJSON(aValue, aProp, false);
    },

    undecorate: function(aValue) {
      return aValue.toJSON();
    }
  },
  recur: {
    fromICAL: function(string) {
      return Recur._stringToData(string, true);
    },

    toICAL: function(data) {
      let str = "";
      for (let [k, val] of Object.entries(data)) {
        if (k == "until") {
          if (val.length > 10) {
            val = icalValues['date-time'].toICAL(val);
          } else {
            val = icalValues.date.toICAL(val);
          }
        } else if (k == "wkst") {
          if (typeof val === 'number') {
            val = Recur.numericDayToIcalDay(val);
          }
        } else if (Array.isArray(val)) {
          val = val.join(",");
        }
        str += k.toUpperCase() + "=" + val + ";";
      }
      return str.slice(0, Math.max(0, str.length - 1));
    },

    decorate: function decorate(aValue) {
      return Recur.fromData(aValue);
    },

    undecorate: function(aRecur) {
      return aRecur.toJSON();
    }
  },

  time: {
    fromICAL: function(aValue) {
      // from: MMHHSS(Z)?
      // to: HH:MM:SS(Z)?
      if (aValue.length < 6) {
        // TODO: parser exception?
        return aValue;
      }

      // HH::MM::SSZ?
      let result = aValue.slice(0, 2) + ':' +
                   aValue.slice(2, 4) + ':' +
                   aValue.slice(4, 6);

      if (aValue[6] === 'Z') {
        result += 'Z';
      }

      return result;
    },

    toICAL: function(aValue) {
      // from: HH:MM:SS(Z)?
      // to: MMHHSS(Z)?
      if (aValue.length < 8) {
        //TODO: error
        return aValue;
      }

      let result = aValue.slice(0, 2) +
                   aValue.slice(3, 5) +
                   aValue.slice(6, 8);

      if (aValue[8] === 'Z') {
        result += 'Z';
      }

      return result;
    }
  }
});

let icalProperties = extend(commonProperties, {

  "action": DEFAULT_TYPE_TEXT,
  "attach": { defaultType: "uri" },
  "attendee": { defaultType: "cal-address" },
  "calscale": DEFAULT_TYPE_TEXT,
  "class": DEFAULT_TYPE_TEXT,
  "comment": DEFAULT_TYPE_TEXT,
  "completed": DEFAULT_TYPE_DATETIME,
  "contact": DEFAULT_TYPE_TEXT,
  "created": DEFAULT_TYPE_DATETIME,
  "description": DEFAULT_TYPE_TEXT,
  "dtend": DEFAULT_TYPE_DATETIME_DATE,
  "dtstamp": DEFAULT_TYPE_DATETIME,
  "dtstart": DEFAULT_TYPE_DATETIME_DATE,
  "due": DEFAULT_TYPE_DATETIME_DATE,
  "duration": { defaultType: "duration" },
  "exdate": {
    defaultType: "date-time",
    allowedTypes: ["date-time", "date"],
    multiValue: ','
  },
  "exrule": DEFAULT_TYPE_RECUR,
  "freebusy": { defaultType: "period", multiValue: "," },
  "geo": { defaultType: "float", structuredValue: ";" },
  "last-modified": DEFAULT_TYPE_DATETIME,
  "location": DEFAULT_TYPE_TEXT,
  "method": DEFAULT_TYPE_TEXT,
  "organizer": { defaultType: "cal-address" },
  "percent-complete": DEFAULT_TYPE_INTEGER,
  "priority": DEFAULT_TYPE_INTEGER,
  "prodid": DEFAULT_TYPE_TEXT,
  "related-to": DEFAULT_TYPE_TEXT,
  "repeat": DEFAULT_TYPE_INTEGER,
  "rdate": {
    defaultType: "date-time",
    allowedTypes: ["date-time", "date", "period"],
    multiValue: ',',
    detectType: function(string) {
      if (string.indexOf('/') !== -1) {
        return 'period';
      }
      return (string.indexOf('T') === -1) ? 'date' : 'date-time';
    }
  },
  "recurrence-id": DEFAULT_TYPE_DATETIME_DATE,
  "resources": DEFAULT_TYPE_TEXT_MULTI,
  "request-status": DEFAULT_TYPE_TEXT_STRUCTURED,
  "rrule": DEFAULT_TYPE_RECUR,
  "sequence": DEFAULT_TYPE_INTEGER,
  "status": DEFAULT_TYPE_TEXT,
  "summary": DEFAULT_TYPE_TEXT,
  "transp": DEFAULT_TYPE_TEXT,
  "trigger": { defaultType: "duration", allowedTypes: ["duration", "date-time"] },
  "tzoffsetfrom": DEFAULT_TYPE_UTCOFFSET,
  "tzoffsetto": DEFAULT_TYPE_UTCOFFSET,
  "tzurl": DEFAULT_TYPE_URI,
  "tzid": DEFAULT_TYPE_TEXT,
  "tzname": DEFAULT_TYPE_TEXT
});

// When adding a value here, be sure to add it to the parameter types!
const vcardValues = extend(commonValues, {
  text: createTextType(FROM_VCARD_NEWLINE, TO_VCARD_NEWLINE),
  uri: createTextType(FROM_VCARD_NEWLINE, TO_VCARD_NEWLINE),

  date: {
    decorate: function(aValue) {
      return VCardTime.fromDateAndOrTimeString(aValue, "date");
    },
    undecorate: function(aValue) {
      return aValue.toString();
    },
    fromICAL: function(aValue) {
      if (aValue.length == 8) {
        return icalValues.date.fromICAL(aValue);
      } else if (aValue[0] == '-' && aValue.length == 6) {
        return aValue.slice(0, 4) + '-' + aValue.slice(4);
      } else {
        return aValue;
      }
    },
    toICAL: function(aValue) {
      if (aValue.length == 10) {
        return icalValues.date.toICAL(aValue);
      } else if (aValue[0] == '-' && aValue.length == 7) {
        return aValue.slice(0, 4) + aValue.slice(5);
      } else {
        return aValue;
      }
    }
  },

  time: {
    decorate: function(aValue) {
      return VCardTime.fromDateAndOrTimeString("T" + aValue, "time");
    },
    undecorate: function(aValue) {
      return aValue.toString();
    },
    fromICAL: function(aValue) {
      let splitzone = vcardValues.time._splitZone(aValue, true);
      let zone = splitzone[0], value = splitzone[1];

      //console.log("SPLIT: ",splitzone);

      if (value.length == 6) {
        value = value.slice(0, 2) + ':' +
                value.slice(2, 4) + ':' +
                value.slice(4, 6);
      } else if (value.length == 4 && value[0] != '-') {
        value = value.slice(0, 2) + ':' + value.slice(2, 4);
      } else if (value.length == 5) {
        value = value.slice(0, 3) + ':' + value.slice(3, 5);
      }

      if (zone.length == 5 && (zone[0] == '-' || zone[0] == '+')) {
        zone = zone.slice(0, 3) + ':' + zone.slice(3);
      }

      return value + zone;
    },

    toICAL: function(aValue) {
      let splitzone = vcardValues.time._splitZone(aValue);
      let zone = splitzone[0], value = splitzone[1];

      if (value.length == 8) {
        value = value.slice(0, 2) +
                value.slice(3, 5) +
                value.slice(6, 8);
      } else if (value.length == 5 && value[0] != '-') {
        value = value.slice(0, 2) + value.slice(3, 5);
      } else if (value.length == 6) {
        value = value.slice(0, 3) + value.slice(4, 6);
      }

      if (zone.length == 6 && (zone[0] == '-' || zone[0] == '+')) {
        zone = zone.slice(0, 3) + zone.slice(4);
      }

      return value + zone;
    },

    _splitZone: function(aValue, isFromIcal) {
      let lastChar = aValue.length - 1;
      let signChar = aValue.length - (isFromIcal ? 5 : 6);
      let sign = aValue[signChar];
      let zone, value;

      if (aValue[lastChar] == 'Z') {
        zone = aValue[lastChar];
        value = aValue.slice(0, Math.max(0, lastChar));
      } else if (aValue.length > 6 && (sign == '-' || sign == '+')) {
        zone = aValue.slice(signChar);
        value = aValue.slice(0, Math.max(0, signChar));
      } else {
        zone = "";
        value = aValue;
      }

      return [zone, value];
    }
  },

  "date-time": {
    decorate: function(aValue) {
      return VCardTime.fromDateAndOrTimeString(aValue, "date-time");
    },

    undecorate: function(aValue) {
      return aValue.toString();
    },

    fromICAL: function(aValue) {
      return vcardValues['date-and-or-time'].fromICAL(aValue);
    },

    toICAL: function(aValue) {
      return vcardValues['date-and-or-time'].toICAL(aValue);
    }
  },

  "date-and-or-time": {
    decorate: function(aValue) {
      return VCardTime.fromDateAndOrTimeString(aValue, "date-and-or-time");
    },

    undecorate: function(aValue) {
      return aValue.toString();
    },

    fromICAL: function(aValue) {
      let parts = aValue.split('T');
      return (parts[0] ? vcardValues.date.fromICAL(parts[0]) : '') +
             (parts[1] ? 'T' + vcardValues.time.fromICAL(parts[1]) : '');
    },

    toICAL: function(aValue) {
      let parts = aValue.split('T');
      return vcardValues.date.toICAL(parts[0]) +
             (parts[1] ? 'T' + vcardValues.time.toICAL(parts[1]) : '');

    }
  },
  timestamp: icalValues['date-time'],
  "language-tag": {
    matches: /^[a-zA-Z0-9-]+$/ // Could go with a more strict regex here
  },
  "phone-number": {
    fromICAL: function(aValue) {
      return Array.from(aValue).filter(function(c) {
          return c === '\\' ? undefined : c;
        }).join('');
    },
    toICAL: function(aValue) {
      return Array.from(aValue).map(function(c) {
        return c === ',' || c === ";" ? '\\' + c : c;
      }).join('');
    }
  }
});

let vcardParams = {
  "type": {
    valueType: "text",
    multiValue: ","
  },
  "value": {
    // since the value here is a 'type' lowercase is used.
    values: ["text", "uri", "date", "time", "date-time", "date-and-or-time",
             "timestamp", "boolean", "integer", "float", "utc-offset",
             "language-tag"],
    allowXName: true,
    allowIanaToken: true
  }
};

let vcardProperties = extend(commonProperties, {
  "adr": { defaultType: "text", structuredValue: ";", multiValue: "," },
  "anniversary": DEFAULT_TYPE_DATE_ANDOR_TIME,
  "bday": DEFAULT_TYPE_DATE_ANDOR_TIME,
  "caladruri": DEFAULT_TYPE_URI,
  "caluri": DEFAULT_TYPE_URI,
  "clientpidmap": DEFAULT_TYPE_TEXT_STRUCTURED,
  "email": DEFAULT_TYPE_TEXT,
  "fburl": DEFAULT_TYPE_URI,
  "fn": DEFAULT_TYPE_TEXT,
  "gender": DEFAULT_TYPE_TEXT_STRUCTURED,
  "geo": DEFAULT_TYPE_URI,
  "impp": DEFAULT_TYPE_URI,
  "key": DEFAULT_TYPE_URI,
  "kind": DEFAULT_TYPE_TEXT,
  "lang": { defaultType: "language-tag" },
  "logo": DEFAULT_TYPE_URI,
  "member": DEFAULT_TYPE_URI,
  "n": { defaultType: "text", structuredValue: ";", multiValue: "," },
  "nickname": DEFAULT_TYPE_TEXT_MULTI,
  "note": DEFAULT_TYPE_TEXT,
  "org": { defaultType: "text", structuredValue: ";" },
  "photo": DEFAULT_TYPE_URI,
  "related": DEFAULT_TYPE_URI,
  "rev": { defaultType: "timestamp" },
  "role": DEFAULT_TYPE_TEXT,
  "sound": DEFAULT_TYPE_URI,
  "source": DEFAULT_TYPE_URI,
  "tel": { defaultType: "uri", allowedTypes: ["uri", "text"] },
  "title": DEFAULT_TYPE_TEXT,
  "tz": { defaultType: "text", allowedTypes: ["text", "utc-offset", "uri"] },
  "xml": DEFAULT_TYPE_TEXT
});

let vcard3Values = extend(commonValues, {
  binary: icalValues.binary,
  date: vcardValues.date,
  "date-time": vcardValues["date-time"],
  "phone-number": vcardValues["phone-number"],
  uri: icalValues.uri,
  text: vcardValues.text,
  time: icalValues.time,
  vcard: icalValues.text,
  "utc-offset": {
    toICAL: function(aValue) {
      return aValue.slice(0, 7);
    },

    fromICAL: function(aValue) {
      return aValue.slice(0, 7);
    },

    decorate: function(aValue) {
      return UtcOffset.fromString(aValue);
    },

    undecorate: function(aValue) {
      return aValue.toString();
    }
  }
});

let vcard3Params = {
  "type": {
    valueType: "text",
    multiValue: ","
  },
  "value": {
    // since the value here is a 'type' lowercase is used.
    values: ["text", "uri", "date", "date-time", "phone-number", "time",
             "boolean", "integer", "float", "utc-offset", "vcard", "binary"],
    allowXName: true,
    allowIanaToken: true
  }
};

let vcard3Properties = extend(commonProperties, {
  fn: DEFAULT_TYPE_TEXT,
  n: { defaultType: "text", structuredValue: ";", multiValue: "," },
  nickname: DEFAULT_TYPE_TEXT_MULTI,
  photo: { defaultType: "binary", allowedTypes: ["binary", "uri"] },
  bday: {
    defaultType: "date-time",
    allowedTypes: ["date-time", "date"],
    detectType: function(string) {
      return (string.indexOf('T') === -1) ? 'date' : 'date-time';
    }
  },

  adr: { defaultType: "text", structuredValue: ";", multiValue: "," },
  label: DEFAULT_TYPE_TEXT,

  tel: { defaultType: "phone-number" },
  email: DEFAULT_TYPE_TEXT,
  mailer: DEFAULT_TYPE_TEXT,

  tz: { defaultType: "utc-offset", allowedTypes: ["utc-offset", "text"] },
  geo: { defaultType: "float", structuredValue: ";" },

  title: DEFAULT_TYPE_TEXT,
  role: DEFAULT_TYPE_TEXT,
  logo: { defaultType: "binary", allowedTypes: ["binary", "uri"] },
  agent: { defaultType: "vcard", allowedTypes: ["vcard", "text", "uri"] },
  org: DEFAULT_TYPE_TEXT_STRUCTURED,

  note: DEFAULT_TYPE_TEXT_MULTI,
  prodid: DEFAULT_TYPE_TEXT,
  rev: {
    defaultType: "date-time",
    allowedTypes: ["date-time", "date"],
    detectType: function(string) {
      return (string.indexOf('T') === -1) ? 'date' : 'date-time';
    }
  },
  "sort-string": DEFAULT_TYPE_TEXT,
  sound: { defaultType: "binary", allowedTypes: ["binary", "uri"] },

  class: DEFAULT_TYPE_TEXT,
  key: { defaultType: "binary", allowedTypes: ["binary", "text"] }
});

/**
 * iCalendar design set
 * @type {designSet}
 */
let icalSet = {
  name: "ical",
  value: icalValues,
  param: icalParams,
  property: icalProperties,
  propertyGroups: false
};

/**
 * vCard 4.0 design set
 * @type {designSet}
 */
let vcardSet = {
  name: "vcard4",
  value: vcardValues,
  param: vcardParams,
  property: vcardProperties,
  propertyGroups: true
};

/**
 * vCard 3.0 design set
 * @type {designSet}
 */
let vcard3Set = {
  name: "vcard3",
  value: vcard3Values,
  param: vcard3Params,
  property: vcard3Properties,
  propertyGroups: true
};

/**
 * The design data, used by the parser to determine types for properties and
 * other metadata needed to produce correct jCard/jCal data.
 *
 * @alias ICAL.design
 * @exports module:ICAL.design
 */
const design = {
  /**
   * Can be set to false to make the parser more lenient.
   */
  strict: true,

  /**
   * The default set for new properties and components if none is specified.
   * @type {designSet}
   */
  defaultSet: icalSet,

  /**
   * The default type for unknown properties
   * @type {String}
   */
  defaultType: 'unknown',

  /**
   * Holds the design set for known top-level components
   *
   * @type {Object}
   * @property {designSet} vcard       vCard VCARD
   * @property {designSet} vevent      iCalendar VEVENT
   * @property {designSet} vtodo       iCalendar VTODO
   * @property {designSet} vjournal    iCalendar VJOURNAL
   * @property {designSet} valarm      iCalendar VALARM
   * @property {designSet} vtimezone   iCalendar VTIMEZONE
   * @property {designSet} daylight    iCalendar DAYLIGHT
   * @property {designSet} standard    iCalendar STANDARD
   *
   * @example
   * let propertyName = 'fn';
   * let componentDesign = ICAL.design.components.vcard;
   * let propertyDetails = componentDesign.property[propertyName];
   * if (propertyDetails.defaultType == 'text') {
   *   // Yep, sure is...
   * }
   */
  components: {
    vcard: vcardSet,
    vcard3: vcard3Set,
    vevent: icalSet,
    vtodo: icalSet,
    vjournal: icalSet,
    valarm: icalSet,
    vtimezone: icalSet,
    daylight: icalSet,
    standard: icalSet
  },


  /**
   * The design set for iCalendar (rfc5545/rfc7265) components.
   * @type {designSet}
   */
  icalendar: icalSet,

  /**
   * The design set for vCard (rfc6350/rfc7095) components.
   * @type {designSet}
   */
  vcard: vcardSet,

  /**
   * The design set for vCard (rfc2425/rfc2426/rfc7095) components.
   * @type {designSet}
   */
  vcard3: vcard3Set,

  /**
   * Gets the design set for the given component name.
   *
   * @param {String} componentName        The name of the component
   * @return {designSet}      The design set for the component
   */
  getDesignSet: function(componentName) {
    let isInDesign = componentName && componentName in design.components;
    return isInDesign ? design.components[componentName] : design.defaultSet;
  }
};

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 *
 * @ignore
 * @typedef {import("./types.js").designSet} designSet
 * Imports the 'designSet' type from the "types.js" module
 */

const LINE_ENDING = '\r\n';
const DEFAULT_VALUE_TYPE = 'unknown';
const RFC6868_REPLACE_MAP = { '"': "^'", "\n": "^n", "^": "^^" };

/**
 * Convert a full jCal/jCard array into a iCalendar/vCard string.
 *
 * @function ICAL.stringify
 * @variation function
 * @param {Array} jCal    The jCal/jCard document
 * @return {String}       The stringified iCalendar/vCard document
 */
function stringify(jCal) {
  if (typeof jCal[0] == "string") {
    // This is a single component
    jCal = [jCal];
  }

  let i = 0;
  let len = jCal.length;
  let result = '';

  for (; i < len; i++) {
    result += stringify.component(jCal[i]) + LINE_ENDING;
  }

  return result;
}

/**
 * Converts an jCal component array into a ICAL string.
 * Recursive will resolve sub-components.
 *
 * Exact component/property order is not saved all
 * properties will come before subcomponents.
 *
 * @function ICAL.stringify.component
 * @param {Array} component
 *        jCal/jCard fragment of a component
 * @param {designSet} designSet
 *        The design data to use for this component
 * @return {String}       The iCalendar/vCard string
 */
stringify.component = function(component, designSet) {
  let name = component[0].toUpperCase();
  let result = 'BEGIN:' + name + LINE_ENDING;

  let props = component[1];
  let propIdx = 0;
  let propLen = props.length;

  let designSetName = component[0];
  // rfc6350 requires that in vCard 4.0 the first component is the VERSION
  // component with as value 4.0, note that 3.0 does not have this requirement.
  if (designSetName === 'vcard' && component[1].length > 0 &&
          !(component[1][0][0] === "version" && component[1][0][3] === "4.0")) {
    designSetName = "vcard3";
  }
  designSet = designSet || design.getDesignSet(designSetName);

  for (; propIdx < propLen; propIdx++) {
    result += stringify.property(props[propIdx], designSet) + LINE_ENDING;
  }

  // Ignore subcomponents if none exist, e.g. in vCard.
  let comps = component[2] || [];
  let compIdx = 0;
  let compLen = comps.length;

  for (; compIdx < compLen; compIdx++) {
    result += stringify.component(comps[compIdx], designSet) + LINE_ENDING;
  }

  result += 'END:' + name;
  return result;
};

/**
 * Converts a single jCal/jCard property to a iCalendar/vCard string.
 *
 * @function ICAL.stringify.property
 * @param {Array} property
 *        jCal/jCard property array
 * @param {designSet} designSet
 *        The design data to use for this property
 * @param {Boolean} noFold
 *        If true, the line is not folded
 * @return {String}       The iCalendar/vCard string
 */
stringify.property = function(property, designSet, noFold) {
  let name = property[0].toUpperCase();
  let jsName = property[0];
  let params = property[1];

  if (!designSet) {
    designSet = design.defaultSet;
  }

  let groupName = params.group;
  let line;
  if (designSet.propertyGroups && groupName) {
    line = groupName.toUpperCase() + "." + name;
  } else {
    line = name;
  }

  for (let [paramName, value] of Object.entries(params)) {
    if (designSet.propertyGroups && paramName == 'group') {
      continue;
    }

    let paramDesign = designSet.param[paramName];
    let multiValue = paramDesign && paramDesign.multiValue;
    if (multiValue && Array.isArray(value)) {
      value = value.map(function(val) {
        val = stringify._rfc6868Unescape(val);
        val = stringify.paramPropertyValue(val, paramDesign.multiValueSeparateDQuote);
        return val;
      });
      value = stringify.multiValue(value, multiValue, "unknown", null, designSet);
    } else {
      value = stringify._rfc6868Unescape(value);
      value = stringify.paramPropertyValue(value);
    }

    line += ';' + paramName.toUpperCase() + '=' + value;
  }

  if (property.length === 3) {
    // If there are no values, we must assume a blank value
    return line + ':';
  }

  let valueType = property[2];

  let propDetails;
  let multiValue = false;
  let structuredValue = false;
  let isDefault = false;

  if (jsName in designSet.property) {
    propDetails = designSet.property[jsName];

    if ('multiValue' in propDetails) {
      multiValue = propDetails.multiValue;
    }

    if (('structuredValue' in propDetails) && Array.isArray(property[3])) {
      structuredValue = propDetails.structuredValue;
    }

    if ('defaultType' in propDetails) {
      if (valueType === propDetails.defaultType) {
        isDefault = true;
      }
    } else {
      if (valueType === DEFAULT_VALUE_TYPE) {
        isDefault = true;
      }
    }
  } else {
    if (valueType === DEFAULT_VALUE_TYPE) {
      isDefault = true;
    }
  }

  // push the VALUE property if type is not the default
  // for the current property.
  if (!isDefault) {
    // value will never contain ;/:/, so we don't escape it here.
    line += ';VALUE=' + valueType.toUpperCase();
  }

  line += ':';

  if (multiValue && structuredValue) {
    line += stringify.multiValue(
      property[3], structuredValue, valueType, multiValue, designSet, structuredValue
    );
  } else if (multiValue) {
    line += stringify.multiValue(
      property.slice(3), multiValue, valueType, null, designSet, false
    );
  } else if (structuredValue) {
    line += stringify.multiValue(
      property[3], structuredValue, valueType, null, designSet, structuredValue
    );
  } else {
    line += stringify.value(property[3], valueType, designSet, false);
  }

  return noFold ? line : foldline(line);
};

/**
 * Handles escaping of property values that may contain:
 *
 *    COLON (:), SEMICOLON (;), or COMMA (,)
 *
 * If any of the above are present the result is wrapped
 * in double quotes.
 *
 * @function ICAL.stringify.paramPropertyValue
 * @param {String} value      Raw property value
 * @param {boolean} force     If value should be escaped even when unnecessary
 * @return {String}           Given or escaped value when needed
 */
stringify.paramPropertyValue = function(value, force) {
  if (!force &&
      (value.indexOf(',') === -1) &&
      (value.indexOf(':') === -1) &&
      (value.indexOf(';') === -1)) {

    return value;
  }

  return '"' + value + '"';
};

/**
 * Converts an array of ical values into a single
 * string based on a type and a delimiter value (like ",").
 *
 * @function ICAL.stringify.multiValue
 * @param {Array} values      List of values to convert
 * @param {String} delim      Used to join the values (",", ";", ":")
 * @param {String} type       Lowecase ical value type
 *        (like boolean, date-time, etc..)
 * @param {?String} innerMulti If set, each value will again be processed
 *        Used for structured values
 * @param {designSet} designSet
 *        The design data to use for this property
 *
 * @return {String}           iCalendar/vCard string for value
 */
stringify.multiValue = function(values, delim, type, innerMulti, designSet, structuredValue) {
  let result = '';
  let len = values.length;
  let i = 0;

  for (; i < len; i++) {
    if (innerMulti && Array.isArray(values[i])) {
      result += stringify.multiValue(values[i], innerMulti, type, null, designSet, structuredValue);
    } else {
      result += stringify.value(values[i], type, designSet, structuredValue);
    }

    if (i !== (len - 1)) {
      result += delim;
    }
  }

  return result;
};

/**
 * Processes a single ical value runs the associated "toICAL" method from the
 * design value type if available to convert the value.
 *
 * @function ICAL.stringify.value
 * @param {String|Number} value       A formatted value
 * @param {String} type               Lowercase iCalendar/vCard value type
 *  (like boolean, date-time, etc..)
 * @return {String}                   iCalendar/vCard value for single value
 */
stringify.value = function(value, type, designSet, structuredValue) {
  if (type in designSet.value && 'toICAL' in designSet.value[type]) {
    return designSet.value[type].toICAL(value, structuredValue);
  }
  return value;
};

/**
 * Internal helper for rfc6868. Exposing this on ICAL.stringify so that
 * hackers can disable the rfc6868 parsing if the really need to.
 *
 * @param {String} val        The value to unescape
 * @return {String}           The escaped value
 */
stringify._rfc6868Unescape = function(val) {
  return val.replace(/[\n^"]/g, function(x) {
    return RFC6868_REPLACE_MAP[x];
  });
};

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */

const NAME_INDEX$1 = 0;
const PROP_INDEX = 1;
const TYPE_INDEX = 2;
const VALUE_INDEX = 3;

/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 * @ignore
 * @typedef {import("./types.js").designSet} designSet
 * Imports the 'designSet' type from the "types.js" module
 * @typedef {import("./types.js").Geo} Geo
 * Imports the 'Geo' type from the "types.js" module
 */

/**
 * Provides a layer on top of the raw jCal object for manipulating a single property, with its
 * parameters and value.
 *
 * @memberof ICAL
 */
class Property {
  /**
   * Create an {@link ICAL.Property} by parsing the passed iCalendar string.
   *
   * @param {String} str            The iCalendar string to parse
   * @param {designSet=} designSet  The design data to use for this property
   * @return {Property}             The created iCalendar property
   */
  static fromString(str, designSet) {
    return new Property(parse.property(str, designSet));
  }

  /**
   * Creates a new ICAL.Property instance.
   *
   * It is important to note that mutations done in the wrapper directly mutate the jCal object used
   * to initialize.
   *
   * Can also be used to create new properties by passing the name of the property (as a String).
   *
   * @param {Array|String} jCal         Raw jCal representation OR the new name of the property
   * @param {Component=} parent         Parent component
   */
  constructor(jCal, parent) {
    this._parent = parent || null;

    if (typeof(jCal) === 'string') {
      // We are creating the property by name and need to detect the type
      this.jCal = [jCal, {}, design.defaultType];
      this.jCal[TYPE_INDEX] = this.getDefaultType();
    } else {
      this.jCal = jCal;
    }
    this._updateType();
  }

  /**
   * The value type for this property
   * @type {String}
   */
  get type() {
    return this.jCal[TYPE_INDEX];
  }

  /**
   * The name of this property, in lowercase.
   * @type {String}
   */
  get name() {
    return this.jCal[NAME_INDEX$1];
  }

  /**
   * The parent component for this property.
   * @type {Component}
   */
  get parent() {
    return this._parent;
  }

  set parent(p) {
    // Before setting the parent, check if the design set has changed. If it
    // has, we later need to update the type if it was unknown before.
    let designSetChanged = !this._parent || (p && p._designSet != this._parent._designSet);

    this._parent = p;

    if (this.type == design.defaultType && designSetChanged) {
      this.jCal[TYPE_INDEX] = this.getDefaultType();
      this._updateType();
    }
  }

  /**
   * The design set for this property, e.g. icalendar vs vcard
   *
   * @type {designSet}
   * @private
   */
  get _designSet() {
    return this.parent ? this.parent._designSet : design.defaultSet;
  }

  /**
   * Updates the type metadata from the current jCal type and design set.
   *
   * @private
   */
  _updateType() {
    let designSet = this._designSet;

    if (this.type in designSet.value) {
      if ('decorate' in designSet.value[this.type]) {
        this.isDecorated = true;
      } else {
        this.isDecorated = false;
      }

      if (this.name in designSet.property) {
        this.isMultiValue = ('multiValue' in designSet.property[this.name]);
        this.isStructuredValue = ('structuredValue' in designSet.property[this.name]);
      }
    }
  }

  /**
   * Hydrate a single value. The act of hydrating means turning the raw jCal
   * value into a potentially wrapped object, for example {@link ICAL.Time}.
   *
   * @private
   * @param {Number} index        The index of the value to hydrate
   * @return {?Object}             The decorated value.
   */
  _hydrateValue(index) {
    if (this._values && this._values[index]) {
      return this._values[index];
    }

    // for the case where there is no value.
    if (this.jCal.length <= (VALUE_INDEX + index)) {
      return null;
    }

    if (this.isDecorated) {
      if (!this._values) {
        this._values = [];
      }
      return (this._values[index] = this._decorate(
        this.jCal[VALUE_INDEX + index]
      ));
    } else {
      return this.jCal[VALUE_INDEX + index];
    }
  }

  /**
   * Decorate a single value, returning its wrapped object. This is used by
   * the hydrate function to actually wrap the value.
   *
   * @private
   * @param {?} value         The value to decorate
   * @return {Object}         The decorated value
   */
  _decorate(value) {
    return this._designSet.value[this.type].decorate(value, this);
  }

  /**
   * Undecorate a single value, returning its raw jCal data.
   *
   * @private
   * @param {Object} value         The value to undecorate
   * @return {?}                   The undecorated value
   */
  _undecorate(value) {
    return this._designSet.value[this.type].undecorate(value, this);
  }

  /**
   * Sets the value at the given index while also hydrating it. The passed
   * value can either be a decorated or undecorated value.
   *
   * @private
   * @param {?} value             The value to set
   * @param {Number} index        The index to set it at
   */
  _setDecoratedValue(value, index) {
    if (!this._values) {
      this._values = [];
    }

    if (typeof(value) === 'object' && 'icaltype' in value) {
      // decorated value
      this.jCal[VALUE_INDEX + index] = this._undecorate(value);
      this._values[index] = value;
    } else {
      // undecorated value
      this.jCal[VALUE_INDEX + index] = value;
      this._values[index] = this._decorate(value);
    }
  }

  /**
   * Gets a parameter on the property.
   *
   * @param {String}        name   Parameter name (lowercase)
   * @return {Array|String}        Parameter value
   */
  getParameter(name) {
    if (name in this.jCal[PROP_INDEX]) {
      return this.jCal[PROP_INDEX][name];
    } else {
      return undefined;
    }
  }

  /**
   * Gets first parameter on the property.
   *
   * @param {String}        name   Parameter name (lowercase)
   * @return {String}        Parameter value
   */
  getFirstParameter(name) {
    let parameters = this.getParameter(name);

    if (Array.isArray(parameters)) {
      return parameters[0];
    }

    return parameters;
  }

  /**
   * Sets a parameter on the property.
   *
   * @param {String}       name     The parameter name
   * @param {Array|String} value    The parameter value
   */
  setParameter(name, value) {
    let lcname = name.toLowerCase();
    if (typeof value === "string" &&
        lcname in this._designSet.param &&
        'multiValue' in this._designSet.param[lcname]) {
        value = [value];
    }
    this.jCal[PROP_INDEX][name] = value;
  }

  /**
   * Removes a parameter
   *
   * @param {String} name     The parameter name
   */
  removeParameter(name) {
    delete this.jCal[PROP_INDEX][name];
  }

  /**
   * Get the default type based on this property's name.
   *
   * @return {String}     The default type for this property
   */
  getDefaultType() {
    let name = this.jCal[NAME_INDEX$1];
    let designSet = this._designSet;

    if (name in designSet.property) {
      let details = designSet.property[name];
      if ('defaultType' in details) {
        return details.defaultType;
      }
    }
    return design.defaultType;
  }

  /**
   * Sets type of property and clears out any existing values of the current
   * type.
   *
   * @param {String} type     New iCAL type (see design.*.values)
   */
  resetType(type) {
    this.removeAllValues();
    this.jCal[TYPE_INDEX] = type;
    this._updateType();
  }

  /**
   * Finds the first property value.
   *
   * @return {Binary | Duration | Period |
   * Recur | Time | UtcOffset | Geo | string | null}         First property value
   */
  getFirstValue() {
    return this._hydrateValue(0);
  }

  /**
   * Gets all values on the property.
   *
   * NOTE: this creates an array during each call.
   *
   * @return {Array}          List of values
   */
  getValues() {
    let len = this.jCal.length - VALUE_INDEX;

    if (len < 1) {
      // it is possible for a property to have no value.
      return [];
    }

    let i = 0;
    let result = [];

    for (; i < len; i++) {
      result[i] = this._hydrateValue(i);
    }

    return result;
  }

  /**
   * Removes all values from this property
   */
  removeAllValues() {
    if (this._values) {
      this._values.length = 0;
    }
    this.jCal.length = 3;
  }

  /**
   * Sets the values of the property.  Will overwrite the existing values.
   * This can only be used for multi-value properties.
   *
   * @param {Array} values    An array of values
   */
  setValues(values) {
    if (!this.isMultiValue) {
      throw new Error(
        this.name + ': does not not support mulitValue.\n' +
        'override isMultiValue'
      );
    }

    let len = values.length;
    let i = 0;
    this.removeAllValues();

    if (len > 0 &&
        typeof(values[0]) === 'object' &&
        'icaltype' in values[0]) {
      this.resetType(values[0].icaltype);
    }

    if (this.isDecorated) {
      for (; i < len; i++) {
        this._setDecoratedValue(values[i], i);
      }
    } else {
      for (; i < len; i++) {
        this.jCal[VALUE_INDEX + i] = values[i];
      }
    }
  }

  /**
   * Sets the current value of the property. If this is a multi-value
   * property, all other values will be removed.
   *
   * @param {String|Object} value     New property value.
   */
  setValue(value) {
    this.removeAllValues();
    if (typeof(value) === 'object' && 'icaltype' in value) {
      this.resetType(value.icaltype);
    }

    if (this.isDecorated) {
      this._setDecoratedValue(value, 0);
    } else {
      this.jCal[VALUE_INDEX] = value;
    }
  }

  /**
   * Returns the Object representation of this component. The returned object
   * is a live jCal object and should be cloned if modified.
   * @return {Object}
   */
  toJSON() {
    return this.jCal;
  }

  /**
   * The string representation of this component.
   * @return {String}
   */
  toICALString() {
    return stringify.property(
      this.jCal, this._designSet, true
    );
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 * @ignore
 * @typedef {import("./types.js").designSet} designSet
 * Imports the 'designSet' type from the "types.js" module
 * @typedef {import("./types.js").Geo} Geo
 * Imports the 'Geo' type from the "types.js" module
 */

const NAME_INDEX = 0;
const PROPERTY_INDEX = 1;
const COMPONENT_INDEX = 2;

const PROPERTY_NAME_INDEX = 0;
const PROPERTY_VALUE_INDEX = 3;

/**
 * Wraps a jCal component, adding convenience methods to add, remove and update subcomponents and
 * properties.
 *
 * @memberof ICAL
 */
class Component {
  /**
   * Create an {@link ICAL.Component} by parsing the passed iCalendar string.
   *
   * @param {String} str        The iCalendar string to parse
   */
  static fromString(str) {
    return new Component(parse.component(str));
  }

  /**
   * Creates a new Component instance.
   *
   * @param {Array|String} jCal         Raw jCal component data OR name of new
   *                                      component
   * @param {Component=} parent     Parent component to associate
   */
  constructor(jCal, parent) {
    if (typeof(jCal) === 'string') {
      // jCal spec (name, properties, components)
      jCal = [jCal, [], []];
    }

    // mostly for legacy reasons.
    this.jCal = jCal;

    this.parent = parent || null;

    if (!this.parent && this.name === 'vcalendar') {
      this._timezoneCache = new Map();
    }
  }

  /**
   * Hydrated properties are inserted into the _properties array at the same
   * position as in the jCal array, so it is possible that the array contains
   * undefined values for unhydrdated properties. To avoid iterating the
   * array when checking if all properties have been hydrated, we save the
   * count here.
   *
   * @type {Number}
   * @private
   */
  _hydratedPropertyCount = 0;

  /**
   * The same count as for _hydratedPropertyCount, but for subcomponents
   *
   * @type {Number}
   * @private
   */
  _hydratedComponentCount = 0;

  /**
   * A cache of hydrated time zone objects which may be used by consumers, keyed
   * by time zone ID.
   *
   * @type {Map}
   * @private
   */
  _timezoneCache = null;

  /**
   * @private
   */
  _components = null;

  /**
   * @private
   */
  _properties = null;

  /**
   * The name of this component
   *
   * @type {String}
   */
  get name() {
    return this.jCal[NAME_INDEX];
  }

  /**
   * The design set for this component, e.g. icalendar vs vcard
   *
   * @type {designSet}
   * @private
   */
  get _designSet() {
    let parentDesign = this.parent && this.parent._designSet;
    if (!parentDesign && this.name == "vcard") {
      // We can't decide on vcard3 vs vcard4 just based on the component name, the version number is
      // in the version property. We also can't use hydrated properties here because it would lead
      // to recursion, but the spec says that the version property needs to be the very first one.
      let versionProp = this.jCal[PROPERTY_INDEX]?.[0];

      if (versionProp && versionProp[PROPERTY_NAME_INDEX] == "version" && versionProp[PROPERTY_VALUE_INDEX] == "3.0") {
        return design.getDesignSet("vcard3");
      }
    }

    return parentDesign || design.getDesignSet(this.name);
  }

  /**
   * @private
   */
  _hydrateComponent(index) {
    if (!this._components) {
      this._components = [];
      this._hydratedComponentCount = 0;
    }

    if (this._components[index]) {
      return this._components[index];
    }

    let comp = new Component(
      this.jCal[COMPONENT_INDEX][index],
      this
    );

    this._hydratedComponentCount++;
    return (this._components[index] = comp);
  }

  /**
   * @private
   */
  _hydrateProperty(index) {
    if (!this._properties) {
      this._properties = [];
      this._hydratedPropertyCount = 0;
    }

    if (this._properties[index]) {
      return this._properties[index];
    }

    let prop = new Property(
      this.jCal[PROPERTY_INDEX][index],
      this
    );

    this._hydratedPropertyCount++;
    return (this._properties[index] = prop);
  }

  /**
   * Finds first sub component, optionally filtered by name.
   *
   * @param {String=} name        Optional name to filter by
   * @return {?Component}     The found subcomponent
   */
  getFirstSubcomponent(name) {
    if (name) {
      let i = 0;
      let comps = this.jCal[COMPONENT_INDEX];
      let len = comps.length;

      for (; i < len; i++) {
        if (comps[i][NAME_INDEX] === name) {
          let result = this._hydrateComponent(i);
          return result;
        }
      }
    } else {
      if (this.jCal[COMPONENT_INDEX].length) {
        return this._hydrateComponent(0);
      }
    }

    // ensure we return a value (strict mode)
    return null;
  }

  /**
   * Finds all sub components, optionally filtering by name.
   *
   * @param {String=} name            Optional name to filter by
   * @return {Component[]}       The found sub components
   */
  getAllSubcomponents(name) {
    let jCalLen = this.jCal[COMPONENT_INDEX].length;
    let i = 0;

    if (name) {
      let comps = this.jCal[COMPONENT_INDEX];
      let result = [];

      for (; i < jCalLen; i++) {
        if (name === comps[i][NAME_INDEX]) {
          result.push(
            this._hydrateComponent(i)
          );
        }
      }
      return result;
    } else {
      if (!this._components ||
          (this._hydratedComponentCount !== jCalLen)) {
        for (; i < jCalLen; i++) {
          this._hydrateComponent(i);
        }
      }

      return this._components || [];
    }
  }

  /**
   * Returns true when a named property exists.
   *
   * @param {String} name     The property name
   * @return {Boolean}        True, when property is found
   */
  hasProperty(name) {
    let props = this.jCal[PROPERTY_INDEX];
    let len = props.length;

    let i = 0;
    for (; i < len; i++) {
      // 0 is property name
      if (props[i][NAME_INDEX] === name) {
        return true;
      }
    }

    return false;
  }

  /**
   * Finds the first property, optionally with the given name.
   *
   * @param {String=} name        Lowercase property name
   * @return {?Property}     The found property
   */
  getFirstProperty(name) {
    if (name) {
      let i = 0;
      let props = this.jCal[PROPERTY_INDEX];
      let len = props.length;

      for (; i < len; i++) {
        if (props[i][NAME_INDEX] === name) {
          let result = this._hydrateProperty(i);
          return result;
        }
      }
    } else {
      if (this.jCal[PROPERTY_INDEX].length) {
        return this._hydrateProperty(0);
      }
    }

    return null;
  }

  /**
   * Returns first property's value, if available.
   *
   * @param {String=} name                    Lowercase property name
   * @return {Binary | Duration | Period |
   * Recur | Time | UtcOffset | Geo | string | null}         The found property value.
   */
  getFirstPropertyValue(name) {
    let prop = this.getFirstProperty(name);
    if (prop) {
      return prop.getFirstValue();
    }

    return null;
  }

  /**
   * Get all properties in the component, optionally filtered by name.
   *
   * @param {String=} name        Lowercase property name
   * @return {Property[]}    List of properties
   */
  getAllProperties(name) {
    let jCalLen = this.jCal[PROPERTY_INDEX].length;
    let i = 0;

    if (name) {
      let props = this.jCal[PROPERTY_INDEX];
      let result = [];

      for (; i < jCalLen; i++) {
        if (name === props[i][NAME_INDEX]) {
          result.push(
            this._hydrateProperty(i)
          );
        }
      }
      return result;
    } else {
      if (!this._properties ||
          (this._hydratedPropertyCount !== jCalLen)) {
        for (; i < jCalLen; i++) {
          this._hydrateProperty(i);
        }
      }

      return this._properties || [];
    }
  }

  /**
   * @private
   */
  _removeObjectByIndex(jCalIndex, cache, index) {
    cache = cache || [];
    // remove cached version
    if (cache[index]) {
      let obj = cache[index];
      if ("parent" in obj) {
          obj.parent = null;
      }
    }

    cache.splice(index, 1);

    // remove it from the jCal
    this.jCal[jCalIndex].splice(index, 1);
  }

  /**
   * @private
   */
  _removeObject(jCalIndex, cache, nameOrObject) {
    let i = 0;
    let objects = this.jCal[jCalIndex];
    let len = objects.length;
    let cached = this[cache];

    if (typeof(nameOrObject) === 'string') {
      for (; i < len; i++) {
        if (objects[i][NAME_INDEX] === nameOrObject) {
          this._removeObjectByIndex(jCalIndex, cached, i);
          return true;
        }
      }
    } else if (cached) {
      for (; i < len; i++) {
        if (cached[i] && cached[i] === nameOrObject) {
          this._removeObjectByIndex(jCalIndex, cached, i);
          return true;
        }
      }
    }

    return false;
  }

  /**
   * @private
   */
  _removeAllObjects(jCalIndex, cache, name) {
    let cached = this[cache];

    // Unfortunately we have to run through all children to reset their
    // parent property.
    let objects = this.jCal[jCalIndex];
    let i = objects.length - 1;

    // descending search required because splice
    // is used and will effect the indices.
    for (; i >= 0; i--) {
      if (!name || objects[i][NAME_INDEX] === name) {
        this._removeObjectByIndex(jCalIndex, cached, i);
      }
    }
  }

  /**
   * Adds a single sub component.
   *
   * @param {Component} component        The component to add
   * @return {Component}                 The passed in component
   */
  addSubcomponent(component) {
    if (!this._components) {
      this._components = [];
      this._hydratedComponentCount = 0;
    }

    if (component.parent) {
      component.parent.removeSubcomponent(component);
    }

    let idx = this.jCal[COMPONENT_INDEX].push(component.jCal);
    this._components[idx - 1] = component;
    this._hydratedComponentCount++;
    component.parent = this;
    return component;
  }

  /**
   * Removes a single component by name or the instance of a specific
   * component.
   *
   * @param {Component|String} nameOrComp    Name of component, or component
   * @return {Boolean}                            True when comp is removed
   */
  removeSubcomponent(nameOrComp) {
    let removed = this._removeObject(COMPONENT_INDEX, '_components', nameOrComp);
    if (removed) {
      this._hydratedComponentCount--;
    }
    return removed;
  }

  /**
   * Removes all components or (if given) all components by a particular
   * name.
   *
   * @param {String=} name            Lowercase component name
   */
  removeAllSubcomponents(name) {
    let removed = this._removeAllObjects(COMPONENT_INDEX, '_components', name);
    this._hydratedComponentCount = 0;
    return removed;
  }

  /**
   * Adds an {@link ICAL.Property} to the component.
   *
   * @param {Property} property      The property to add
   * @return {Property}              The passed in property
   */
  addProperty(property) {
    if (!(property instanceof Property)) {
      throw new TypeError('must be instance of ICAL.Property');
    }

    if (!this._properties) {
      this._properties = [];
      this._hydratedPropertyCount = 0;
    }

    if (property.parent) {
      property.parent.removeProperty(property);
    }

    let idx = this.jCal[PROPERTY_INDEX].push(property.jCal);
    this._properties[idx - 1] = property;
    this._hydratedPropertyCount++;
    property.parent = this;
    return property;
  }

  /**
   * Helper method to add a property with a value to the component.
   *
   * @param {String}               name         Property name to add
   * @param {String|Number|Object} value        Property value
   * @return {Property}                    The created property
   */
  addPropertyWithValue(name, value) {
    let prop = new Property(name);
    prop.setValue(value);

    this.addProperty(prop);

    return prop;
  }

  /**
   * Helper method that will update or create a property of the given name
   * and sets its value. If multiple properties with the given name exist,
   * only the first is updated.
   *
   * @param {String}               name         Property name to update
   * @param {String|Number|Object} value        Property value
   * @return {Property}                    The created property
   */
  updatePropertyWithValue(name, value) {
    let prop = this.getFirstProperty(name);

    if (prop) {
      prop.setValue(value);
    } else {
      prop = this.addPropertyWithValue(name, value);
    }

    return prop;
  }

  /**
   * Removes a single property by name or the instance of the specific
   * property.
   *
   * @param {String|Property} nameOrProp     Property name or instance to remove
   * @return {Boolean}                            True, when deleted
   */
  removeProperty(nameOrProp) {
    let removed = this._removeObject(PROPERTY_INDEX, '_properties', nameOrProp);
    if (removed) {
      this._hydratedPropertyCount--;
    }
    return removed;
  }

  /**
   * Removes all properties associated with this component, optionally
   * filtered by name.
   *
   * @param {String=} name        Lowercase property name
   * @return {Boolean}            True, when deleted
   */
  removeAllProperties(name) {
    let removed = this._removeAllObjects(PROPERTY_INDEX, '_properties', name);
    this._hydratedPropertyCount = 0;
    return removed;
  }

  /**
   * Returns the Object representation of this component. The returned object
   * is a live jCal object and should be cloned if modified.
   * @return {Object}
   */
  toJSON() {
    return this.jCal;
  }

  /**
   * The string representation of this component.
   * @return {String}
   */
  toString() {
    return stringify.component(
      this.jCal, this._designSet
    );
  }

  /**
   * Retrieve a time zone definition from the component tree, if any is present.
   * If the tree contains no time zone definitions or the TZID cannot be
   * matched, returns null.
   *
   * @param {String} tzid     The ID of the time zone to retrieve
   * @return {Timezone}  The time zone corresponding to the ID, or null
   */
  getTimeZoneByID(tzid) {
    // VTIMEZONE components can only appear as a child of the VCALENDAR
    // component; walk the tree if we're not the root.
    if (this.parent) {
      return this.parent.getTimeZoneByID(tzid);
    }

    // If there is no time zone cache, we are probably parsing an incomplete
    // file and will have no time zone definitions.
    if (!this._timezoneCache) {
      return null;
    }

    if (this._timezoneCache.has(tzid)) {
      return this._timezoneCache.get(tzid);
    }

    // If the time zone is not already cached, hydrate it from the
    // subcomponents.
    const zones = this.getAllSubcomponents('vtimezone');
    for (const zone of zones) {
      if (zone.getFirstProperty('tzid').getFirstValue() === tzid) {
        const hydratedZone = new Timezone({
          component: zone,
          tzid: tzid,
        });

        this._timezoneCache.set(tzid, hydratedZone);

        return hydratedZone;
      }
    }

    // Per the standard, we should always have a time zone defined in a file
    // for any referenced TZID, but don't blow up if the file is invalid.
    return null;
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * Primary class for expanding recurring rules.  Can take multiple rrules, rdates, exdate(s) and
 * iterate (in order) over each next occurrence.
 *
 * Once initialized this class can also be serialized saved and continue iteration from the last
 * point.
 *
 * NOTE: it is intended that this class is to be used with {@link ICAL.Event} which handles recurrence
 * exceptions.
 *
 * @example
 * // assuming event is a parsed ical component
 * var event;
 *
 * var expand = new ICAL.RecurExpansion({
 *   component: event,
 *   dtstart: event.getFirstPropertyValue('dtstart')
 * });
 *
 * // remember there are infinite rules so it is a good idea to limit the scope of the iterations
 * // then resume later on.
 *
 * // next is always an ICAL.Time or null
 * var next;
 *
 * while (someCondition && (next = expand.next())) {
 *   // do something with next
 * }
 *
 * // save instance for later
 * var json = JSON.stringify(expand);
 *
 * //...
 *
 * // NOTE: if the component's properties have changed you will need to rebuild the class and start
 * // over. This only works when the component's recurrence info is the same.
 * var expand = new ICAL.RecurExpansion(JSON.parse(json));
 *
 * @memberof ICAL
 */
class RecurExpansion {
  /**
   * Creates a new ICAL.RecurExpansion instance.
   *
   * The options object can be filled with the specified initial values. It can also contain
   * additional members, as a result of serializing a previous expansion state, as shown in the
   * example.
   *
   * @param {Object} options
   *        Recurrence expansion options
   * @param {Time} options.dtstart
   *        Start time of the event
   * @param {Component=} options.component
   *        Component for expansion, required if not resuming.
   */
  constructor(options) {
    this.ruleDates = [];
    this.exDates = [];
    this.fromData(options);
  }

  /**
   * True when iteration is fully completed.
   * @type {Boolean}
   */
  complete = false;

  /**
   * Array of rrule iterators.
   *
   * @type {RecurIterator[]}
   * @private
   */
  ruleIterators = null;

  /**
   * Array of rdate instances.
   *
   * @type {Time[]}
   * @private
   */
  ruleDates = null;

  /**
   * Array of exdate instances.
   *
   * @type {Time[]}
   * @private
   */
  exDates = null;

  /**
   * Current position in ruleDates array.
   * @type {Number}
   * @private
   */
  ruleDateInc = 0;

  /**
   * Current position in exDates array
   * @type {Number}
   * @private
   */
  exDateInc = 0;

  /**
   * Current negative date.
   *
   * @type {Time}
   * @private
   */
  exDate = null;

  /**
   * Current additional date.
   *
   * @type {Time}
   * @private
   */
  ruleDate = null;

  /**
   * Start date of recurring rules.
   *
   * @type {Time}
   */
  dtstart = null;

  /**
   * Last expanded time
   *
   * @type {Time}
   */
  last = null;

  /**
   * Initialize the recurrence expansion from the data object. The options
   * object may also contain additional members, see the
   * {@link ICAL.RecurExpansion constructor} for more details.
   *
   * @param {Object} options
   *        Recurrence expansion options
   * @param {Time} options.dtstart
   *        Start time of the event
   * @param {Component=} options.component
   *        Component for expansion, required if not resuming.
   */
  fromData(options) {
    let start = formatClassType(options.dtstart, Time);

    if (!start) {
      throw new Error('.dtstart (ICAL.Time) must be given');
    } else {
      this.dtstart = start;
    }

    if (options.component) {
      this._init(options.component);
    } else {
      this.last = formatClassType(options.last, Time) || start.clone();

      if (!options.ruleIterators) {
        throw new Error('.ruleIterators or .component must be given');
      }

      this.ruleIterators = options.ruleIterators.map(function(item) {
        return formatClassType(item, RecurIterator);
      });

      this.ruleDateInc = options.ruleDateInc;
      this.exDateInc = options.exDateInc;

      if (options.ruleDates) {
        this.ruleDates = options.ruleDates.map(item => formatClassType(item, Time));
        this.ruleDate = this.ruleDates[this.ruleDateInc];
      }

      if (options.exDates) {
        this.exDates = options.exDates.map(item => formatClassType(item, Time));
        this.exDate = this.exDates[this.exDateInc];
      }

      if (typeof(options.complete) !== 'undefined') {
        this.complete = options.complete;
      }
    }
  }

  /**
   * Compare two ICAL.Time objects.  When the second parameter is a DATE and the first parameter is
   * DATE-TIME, strip the time and compare only the days.
   *
   * @private
   * @param {Time} a   The one object to compare
   * @param {Time} b   The other object to compare
   */
  _compare_special(a, b) {
    if (!a.isDate && b.isDate)
      return new Time({ year: a.year, month: a.month, day: a.day }).compare(b);
    return a.compare(b);
  }

  /**
   * Retrieve the next occurrence in the series.
   * @return {Time}
   */
  next() {
    let iter;
    let next;
    let compare;

    let maxTries = 500;
    let currentTry = 0;

    while (true) {
      if (currentTry++ > maxTries) {
        throw new Error(
          'max tries have occurred, rule may be impossible to fulfill.'
        );
      }

      next = this.ruleDate;
      iter = this._nextRecurrenceIter(this.last);

      // no more matches
      // because we increment the rule day or rule
      // _after_ we choose a value this should be
      // the only spot where we need to worry about the
      // end of events.
      if (!next && !iter) {
        // there are no more iterators or rdates
        this.complete = true;
        break;
      }

      // no next rule day or recurrence rule is first.
      if (!next || (iter && next.compare(iter.last) > 0)) {
        // must be cloned, recur will reuse the time element.
        next = iter.last.clone();
        // move to next so we can continue
        iter.next();
      }

      // if the ruleDate is still next increment it.
      if (this.ruleDate === next) {
        this._nextRuleDay();
      }

      this.last = next;

      // check the negative rules
      if (this.exDate) {
        // EXDATE can be in DATE format, but DTSTART is in DATE-TIME format
        compare = this._compare_special(this.last, this.exDate);

        if (compare > 0) {
          this._nextExDay();
        }

        // if the current rule is excluded skip it.
        if (compare === 0) {
          this._nextExDay();
          continue;
        }
      }

      //XXX: The spec states that after we resolve the final
      //     list of dates we execute exdate this seems somewhat counter
      //     intuitive to what I have seen most servers do so for now
      //     I exclude based on the original date not the one that may
      //     have been modified by the exception.
      return this.last;
    }
  }

  /**
   * Converts object into a serialize-able format. This format can be passed
   * back into the expansion to resume iteration.
   * @return {Object}
   */
  toJSON() {
    function toJSON(item) {
      return item.toJSON();
    }

    let result = Object.create(null);
    result.ruleIterators = this.ruleIterators.map(toJSON);

    if (this.ruleDates) {
      result.ruleDates = this.ruleDates.map(toJSON);
    }

    if (this.exDates) {
      result.exDates = this.exDates.map(toJSON);
    }

    result.ruleDateInc = this.ruleDateInc;
    result.exDateInc = this.exDateInc;
    result.last = this.last.toJSON();
    result.dtstart = this.dtstart.toJSON();
    result.complete = this.complete;

    return result;
  }

  /**
   * Extract all dates from the properties in the given component. The
   * properties will be filtered by the property name.
   *
   * @private
   * @param {Component} component             The component to search in
   * @param {String} propertyName             The property name to search for
   * @return {Time[]}                         The extracted dates.
   */
  _extractDates(component, propertyName) {
    let result = [];
    let props = component.getAllProperties(propertyName);

    for (let i = 0, len = props.length; i < len; i++) {
      for (let prop of props[i].getValues()) {
        let idx = binsearchInsert(
          result,
          prop,
          (a, b) => a.compare(b)
        );

        // ordered insert
        result.splice(idx, 0, prop);
      }
    }

    return result;
  }

  /**
   * Initialize the recurrence expansion.
   *
   * @private
   * @param {Component} component    The component to initialize from.
   */
  _init(component) {
    this.ruleIterators = [];

    this.last = this.dtstart.clone();

    // to provide api consistency non-recurring
    // events can also use the iterator though it will
    // only return a single time.
    if (!component.hasProperty('rdate') &&
        !component.hasProperty('rrule') &&
        !component.hasProperty('recurrence-id')) {
      this.ruleDate = this.last.clone();
      this.complete = true;
      return;
    }

    if (component.hasProperty('rdate')) {
      this.ruleDates = this._extractDates(component, 'rdate');

      // special hack for cases where first rdate is prior
      // to the start date. We only check for the first rdate.
      // This is mostly for google's crazy recurring date logic
      // (contacts birthdays).
      if ((this.ruleDates[0]) &&
          (this.ruleDates[0].compare(this.dtstart) < 0)) {

        this.ruleDateInc = 0;
        this.last = this.ruleDates[0].clone();
      } else {
        this.ruleDateInc = binsearchInsert(
          this.ruleDates,
          this.last,
          (a, b) => a.compare(b)
        );
      }

      this.ruleDate = this.ruleDates[this.ruleDateInc];
    }

    if (component.hasProperty('rrule')) {
      let rules = component.getAllProperties('rrule');
      let i = 0;
      let len = rules.length;

      let rule;
      let iter;

      for (; i < len; i++) {
        rule = rules[i].getFirstValue();
        iter = rule.iterator(this.dtstart);
        this.ruleIterators.push(iter);

        // increment to the next occurrence so future
        // calls to next return times beyond the initial iteration.
        // XXX: I find this suspicious might be a bug?
        iter.next();
      }
    }

    if (component.hasProperty('exdate')) {
      this.exDates = this._extractDates(component, 'exdate');
      // if we have a .last day we increment the index to beyond it.
      // When DTSTART is in DATE-TIME format, EXDATE is in DATE format and EXDATE is
      // the date of DTSTART, _compare_special finds this out and compareTime fails.
      this.exDateInc = binsearchInsert(
        this.exDates,
        this.last,
        this._compare_special
      );

      this.exDate = this.exDates[this.exDateInc];
    }
  }

  /**
   * Advance to the next exdate
   * @private
   */
  _nextExDay() {
    this.exDate = this.exDates[++this.exDateInc];
  }

  /**
   * Advance to the next rule date
   * @private
   */
  _nextRuleDay() {
    this.ruleDate = this.ruleDates[++this.ruleDateInc];
  }

  /**
   * Find and return the recurrence rule with the most recent event and
   * return it.
   *
   * @private
   * @return {?RecurIterator}    Found iterator.
   */
  _nextRecurrenceIter() {
    let iters = this.ruleIterators;

    if (iters.length === 0) {
      return null;
    }

    let len = iters.length;
    let iter;
    let iterTime;
    let iterIdx = 0;
    let chosenIter;

    // loop through each iterator
    for (; iterIdx < len; iterIdx++) {
      iter = iters[iterIdx];
      iterTime = iter.last;

      // if iteration is complete
      // then we must exclude it from
      // the search and remove it.
      if (iter.completed) {
        len--;
        if (iterIdx !== 0) {
          iterIdx--;
        }
        iters.splice(iterIdx, 1);
        continue;
      }

      // find the most recent possible choice
      if (!chosenIter || chosenIter.last.compare(iterTime) > 0) {
        // that iterator is saved
        chosenIter = iter;
      }
    }

    // the chosen iterator is returned but not mutated
    // this iterator contains the most recent event.
    return chosenIter;
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 * @ignore
 * @typedef {import("./types.js").frequencyValues} frequencyValues
 * Imports the 'frequencyValues' type from the "types.js" module
 * @typedef {import("./types.js").occurrenceDetails} occurrenceDetails
 * Imports the 'occurrenceDetails' type from the "types.js" module
 */

/**
 * ICAL.js is organized into multiple layers. The bottom layer is a raw jCal
 * object, followed by the component/property layer. The highest level is the
 * event representation, which this class is part of. See the
 * {@tutorial layers} guide for more details.
 *
 * @memberof ICAL
 */
let Event$1 = class Event {
  /**
   * Creates a new ICAL.Event instance.
   *
   * @param {Component=} component              The ICAL.Component to base this event on
   * @param {Object} [options]                  Options for this event
   * @param {Boolean=} options.strictExceptions  When true, will verify exceptions are related by
   *                                              their UUID
   * @param {Array<Component|Event>=} options.exceptions
   *          Exceptions to this event, either as components or events. If not
   *            specified exceptions will automatically be set in relation of
   *            component's parent
   */
  constructor(component, options) {
    if (!(component instanceof Component)) {
      options = component;
      component = null;
    }

    if (component) {
      this.component = component;
    } else {
      this.component = new Component('vevent');
    }

    this._rangeExceptionCache = Object.create(null);
    this.exceptions = Object.create(null);
    this.rangeExceptions = [];

    if (options && options.strictExceptions) {
      this.strictExceptions = options.strictExceptions;
    }

    if (options && options.exceptions) {
      options.exceptions.forEach(this.relateException, this);
    } else if (this.component.parent && !this.isRecurrenceException()) {
      this.component.parent.getAllSubcomponents('vevent').forEach(function(event) {
        if (event.hasProperty('recurrence-id')) {
          this.relateException(event);
        }
      }, this);
    }
  }


  static THISANDFUTURE = 'THISANDFUTURE';

  /**
   * List of related event exceptions.
   *
   * @type {Event[]}
   */
  exceptions = null;

  /**
   * When true, will verify exceptions are related by their UUID.
   *
   * @type {Boolean}
   */
  strictExceptions = false;

  /**
   * Relates a given event exception to this object.  If the given component
   * does not share the UID of this event it cannot be related and will throw
   * an exception.
   *
   * If this component is an exception it cannot have other exceptions
   * related to it.
   *
   * @param {Component|Event} obj       Component or event
   */
  relateException(obj) {
    if (this.isRecurrenceException()) {
      throw new Error('cannot relate exception to exceptions');
    }

    if (obj instanceof Component) {
      obj = new Event(obj);
    }

    if (this.strictExceptions && obj.uid !== this.uid) {
      throw new Error('attempted to relate unrelated exception');
    }

    let id = obj.recurrenceId.toString();

    // we don't sort or manage exceptions directly
    // here the recurrence expander handles that.
    this.exceptions[id] = obj;

    // index RANGE=THISANDFUTURE exceptions so we can
    // look them up later in getOccurrenceDetails.
    if (obj.modifiesFuture()) {
      let item = [
        obj.recurrenceId.toUnixTime(), id
      ];

      // we keep them sorted so we can find the nearest
      // value later on...
      let idx = binsearchInsert(
        this.rangeExceptions,
        item,
        compareRangeException
      );

      this.rangeExceptions.splice(idx, 0, item);
    }
  }

  /**
   * Checks if this record is an exception and has the RANGE=THISANDFUTURE
   * value.
   *
   * @return {Boolean}        True, when exception is within range
   */
  modifiesFuture() {
    if (!this.component.hasProperty('recurrence-id')) {
      return false;
    }

    let range = this.component.getFirstProperty('recurrence-id').getParameter('range');
    return range === Event.THISANDFUTURE;
  }

  /**
   * Finds the range exception nearest to the given date.
   *
   * @param {Time} time   usually an occurrence time of an event
   * @return {?Event}     the related event/exception or null
   */
  findRangeException(time) {
    if (!this.rangeExceptions.length) {
      return null;
    }

    let utc = time.toUnixTime();
    let idx = binsearchInsert(
      this.rangeExceptions,
      [utc],
      compareRangeException
    );

    idx -= 1;

    // occurs before
    if (idx < 0) {
      return null;
    }

    let rangeItem = this.rangeExceptions[idx];

    /* c8 ignore next 4 */
    if (utc < rangeItem[0]) {
      // sanity check only
      return null;
    }

    return rangeItem[1];
  }

  /**
   * Returns the occurrence details based on its start time.  If the
   * occurrence has an exception will return the details for that exception.
   *
   * NOTE: this method is intend to be used in conjunction
   *       with the {@link ICAL.Event#iterator iterator} method.
   *
   * @param {Time} occurrence               time occurrence
   * @return {occurrenceDetails}            Information about the occurrence
   */
  getOccurrenceDetails(occurrence) {
    let id = occurrence.toString();
    let utcId = occurrence.convertToZone(Timezone.utcTimezone).toString();
    let item;
    let result = {
      //XXX: Clone?
      recurrenceId: occurrence
    };

    if (id in this.exceptions) {
      item = result.item = this.exceptions[id];
      result.startDate = item.startDate;
      result.endDate = item.endDate;
      result.item = item;
    } else if (utcId in this.exceptions) {
      item = this.exceptions[utcId];
      result.startDate = item.startDate;
      result.endDate = item.endDate;
      result.item = item;
    } else {
      // range exceptions (RANGE=THISANDFUTURE) have a
      // lower priority then direct exceptions but
      // must be accounted for first. Their item is
      // always the first exception with the range prop.
      let rangeExceptionId = this.findRangeException(
        occurrence
      );
      let end;

      if (rangeExceptionId) {
        let exception = this.exceptions[rangeExceptionId];

        // range exception must modify standard time
        // by the difference (if any) in start/end times.
        result.item = exception;

        let startDiff = this._rangeExceptionCache[rangeExceptionId];

        if (!startDiff) {
          let original = exception.recurrenceId.clone();
          let newStart = exception.startDate.clone();

          // zones must be same otherwise subtract may be incorrect.
          original.zone = newStart.zone;
          startDiff = newStart.subtractDate(original);

          this._rangeExceptionCache[rangeExceptionId] = startDiff;
        }

        let start = occurrence.clone();
        start.zone = exception.startDate.zone;
        start.addDuration(startDiff);

        end = start.clone();
        end.addDuration(exception.duration);

        result.startDate = start;
        result.endDate = end;
      } else {
        // no range exception standard expansion
        end = occurrence.clone();
        end.addDuration(this.duration);

        result.endDate = end;
        result.startDate = occurrence;
        result.item = this;
      }
    }

    return result;
  }

  /**
   * Builds a recur expansion instance for a specific point in time (defaults
   * to startDate).
   *
   * @param {Time=} startTime     Starting point for expansion
   * @return {RecurExpansion}    Expansion object
   */
  iterator(startTime) {
    return new RecurExpansion({
      component: this.component,
      dtstart: startTime || this.startDate
    });
  }

  /**
   * Checks if the event is recurring
   *
   * @return {Boolean}        True, if event is recurring
   */
  isRecurring() {
    let comp = this.component;
    return comp.hasProperty('rrule') || comp.hasProperty('rdate');
  }

  /**
   * Checks if the event describes a recurrence exception. See
   * {@tutorial terminology} for details.
   *
   * @return {Boolean}    True, if the event describes a recurrence exception
   */
  isRecurrenceException() {
    return this.component.hasProperty('recurrence-id');
  }

  /**
   * Returns the types of recurrences this event may have.
   *
   * Returned as an object with the following possible keys:
   *
   *    - YEARLY
   *    - MONTHLY
   *    - WEEKLY
   *    - DAILY
   *    - MINUTELY
   *    - SECONDLY
   *
   * @return {Object.<frequencyValues, Boolean>}
   *          Object of recurrence flags
   */
  getRecurrenceTypes() {
    let rules = this.component.getAllProperties('rrule');
    let i = 0;
    let len = rules.length;
    let result = Object.create(null);

    for (; i < len; i++) {
      let value = rules[i].getFirstValue();
      result[value.freq] = true;
    }

    return result;
  }

  /**
   * The uid of this event
   * @type {String}
   */
  get uid() {
    return this._firstProp('uid');
  }

  set uid(value) {
    this._setProp('uid', value);
  }

  /**
   * The start date
   * @type {Time}
   */
  get startDate() {
    return this._firstProp('dtstart');
  }

  set startDate(value) {
    this._setTime('dtstart', value);
  }

  /**
   * The end date. This can be the result directly from the property, or the
   * end date calculated from start date and duration. Setting the property
   * will remove any duration properties.
   * @type {Time}
   */
  get endDate() {
    let endDate = this._firstProp('dtend');
    if (!endDate) {
        let duration = this._firstProp('duration');
        endDate = this.startDate.clone();
        if (duration) {
            endDate.addDuration(duration);
        } else if (endDate.isDate) {
            endDate.day += 1;
        }
    }
    return endDate;
  }

  set endDate(value) {
    if (this.component.hasProperty('duration')) {
      this.component.removeProperty('duration');
    }
    this._setTime('dtend', value);
  }

  /**
   * The duration. This can be the result directly from the property, or the
   * duration calculated from start date and end date. Setting the property
   * will remove any `dtend` properties.
   * @type {Duration}
   */
  get duration() {
    let duration = this._firstProp('duration');
    if (!duration) {
      return this.endDate.subtractDateTz(this.startDate);
    }
    return duration;
  }

  set duration(value) {
    if (this.component.hasProperty('dtend')) {
      this.component.removeProperty('dtend');
    }

    this._setProp('duration', value);
  }

  /**
   * The location of the event.
   * @type {String}
   */
  get location() {
    return this._firstProp('location');
  }

  set location(value) {
    this._setProp('location', value);
  }

  /**
   * The attendees in the event
   * @type {Property[]}
   */
  get attendees() {
    //XXX: This is way lame we should have a better
    //     data structure for this later.
    return this.component.getAllProperties('attendee');
  }

  /**
   * The event summary
   * @type {String}
   */
  get summary() {
    return this._firstProp('summary');
  }

  set summary(value) {
    this._setProp('summary', value);
  }

  /**
   * The event description.
   * @type {String}
   */
  get description() {
    return this._firstProp('description');
  }

  set description(value) {
    this._setProp('description', value);
  }

  /**
   * The event color from [rfc7986](https://datatracker.ietf.org/doc/html/rfc7986)
   * @type {String}
   */
  get color() {
    return this._firstProp('color');
  }

  set color(value) {
    this._setProp('color', value);
  }

  /**
   * The organizer value as an uri. In most cases this is a mailto: uri, but
   * it can also be something else, like urn:uuid:...
   * @type {String}
   */
  get organizer() {
    return this._firstProp('organizer');
  }

  set organizer(value) {
    this._setProp('organizer', value);
  }

  /**
   * The sequence value for this event. Used for scheduling
   * see {@tutorial terminology}.
   * @type {Number}
   */
  get sequence() {
    return this._firstProp('sequence');
  }

  set sequence(value) {
    this._setProp('sequence', value);
  }

  /**
   * The recurrence id for this event. See {@tutorial terminology} for details.
   * @type {Time}
   */
  get recurrenceId() {
    return this._firstProp('recurrence-id');
  }

  set recurrenceId(value) {
    this._setTime('recurrence-id', value);
  }

  /**
   * Set/update a time property's value.
   * This will also update the TZID of the property.
   *
   * TODO: this method handles the case where we are switching
   * from a known timezone to an implied timezone (one without TZID).
   * This does _not_ handle the case of moving between a known
   *  (by TimezoneService) timezone to an unknown timezone...
   *
   * We will not add/remove/update the VTIMEZONE subcomponents
   *  leading to invalid ICAL data...
   * @private
   * @param {String} propName     The property name
   * @param {Time} time           The time to set
   */
  _setTime(propName, time) {
    let prop = this.component.getFirstProperty(propName);

    if (!prop) {
      prop = new Property(propName);
      this.component.addProperty(prop);
    }

    // utc and local don't get a tzid
    if (
      time.zone === Timezone.localTimezone ||
      time.zone === Timezone.utcTimezone
    ) {
      // remove the tzid
      prop.removeParameter('tzid');
    } else {
      prop.setParameter('tzid', time.zone.tzid);
    }

    prop.setValue(time);
  }

  _setProp(name, value) {
    this.component.updatePropertyWithValue(name, value);
  }

  _firstProp(name) {
    return this.component.getFirstPropertyValue(name);
  }

  /**
   * The string representation of this event.
   * @return {String}
   */
  toString() {
    return this.component.toString();
  }
};

function compareRangeException(a, b) {
  if (a[0] > b[0]) return 1;
  if (b[0] > a[0]) return -1;
  return 0;
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * The ComponentParser is used to process a String or jCal Object,
 * firing callbacks for various found components, as well as completion.
 *
 * @example
 * var options = {
 *   // when false no events will be emitted for type
 *   parseEvent: true,
 *   parseTimezone: true
 * };
 *
 * var parser = new ICAL.ComponentParser(options);
 *
 * parser.onevent(eventComponent) {
 *   //...
 * }
 *
 * // ontimezone, etc...
 *
 * parser.oncomplete = function() {
 *
 * };
 *
 * parser.process(stringOrComponent);
 *
 * @memberof ICAL
 */
class ComponentParser {
  /**
   * Creates a new ICAL.ComponentParser instance.
   *
   * @param {Object=} options                   Component parser options
   * @param {Boolean} options.parseEvent        Whether events should be parsed
   * @param {Boolean} options.parseTimezeone    Whether timezones should be parsed
   */
  constructor(options) {
    if (typeof(options) === 'undefined') {
      options = {};
    }

    for (let [key, value] of Object.entries(options)) {
      this[key] = value;
    }
  }

  /**
   * When true, parse events
   *
   * @type {Boolean}
   */
  parseEvent = true;

  /**
   * When true, parse timezones
   *
   * @type {Boolean}
   */
  parseTimezone = true;


  /* SAX like events here for reference */

  /**
   * Fired when parsing is complete
   * @callback
   */
  oncomplete = /* c8 ignore next */ function() {};

  /**
   * Fired if an error occurs during parsing.
   *
   * @callback
   * @param {Error} err details of error
   */
  onerror = /* c8 ignore next */ function(err) {};

  /**
   * Fired when a top level component (VTIMEZONE) is found
   *
   * @callback
   * @param {Timezone} component     Timezone object
   */
  ontimezone = /* c8 ignore next */ function(component) {};

  /**
   * Fired when a top level component (VEVENT) is found.
   *
   * @callback
   * @param {Event} component    Top level component
   */
  onevent = /* c8 ignore next */ function(component) {};

  /**
   * Process a string or parse ical object.  This function itself will return
   * nothing but will start the parsing process.
   *
   * Events must be registered prior to calling this method.
   *
   * @param {Component|String|Object} ical      The component to process,
   *        either in its final form, as a jCal Object, or string representation
   */
  process(ical) {
    //TODO: this is sync now in the future we will have a incremental parser.
    if (typeof(ical) === 'string') {
      ical = parse(ical);
    }

    if (!(ical instanceof Component)) {
      ical = new Component(ical);
    }

    let components = ical.getAllSubcomponents();
    let i = 0;
    let len = components.length;
    let component;

    for (; i < len; i++) {
      component = components[i];

      switch (component.name) {
        case 'vtimezone':
          if (this.parseTimezone) {
            let tzid = component.getFirstPropertyValue('tzid');
            if (tzid) {
              this.ontimezone(new Timezone({
                tzid: tzid,
                component: component
              }));
            }
          }
          break;
        case 'vevent':
          if (this.parseEvent) {
            this.onevent(new Event$1(component));
          }
          break;
        default:
          continue;
      }
    }

    //XXX: ideally we should do a "nextTick" here
    //     so in all cases this is actually async.
    this.oncomplete();
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * The main ICAL module. Provides access to everything else.
 *
 * @alias ICAL
 * @namespace ICAL
 * @property {ICAL.design} design
 * @property {ICAL.helpers} helpers
 */
var ICALmodule = {
  /**
   * The number of characters before iCalendar line folding should occur
   * @type {Number}
   * @default 75
   */
  foldLength: 75,

  debug: false,

  /**
   * The character(s) to be used for a newline. The default value is provided by
   * rfc5545.
   * @type {String}
   * @default "\r\n"
   */
  newLineChar: '\r\n',

  Binary,
  Component,
  ComponentParser,
  Duration,
  Event: Event$1,
  Period,
  Property,
  Recur,
  RecurExpansion,
  RecurIterator,
  Time,
  Timezone,
  TimezoneService,
  UtcOffset,
  VCardTime,

  parse,
  stringify,

  design,
  helpers
};

/* --- Obsidian Plugin: Periodic Notes Calendar View ---
  Developer: Tim Williams
  This plugin uses library: https://app.unpkg.com/ical.js@2.2.1/files/dist/ical.es5.min.cjs (c) 2024 Chris Lawley, MIT License  
*/

const DASHBOARDWIDGETS = {
    tasks: {
        today: { name: 'Today' },
        tomorrow: { name: 'Tomorrow' },
        next7days: { name: 'Next 7 Days' },
        futureNoDue: { name: 'Future / No Due' },
        upcomingoverdue: { name: 'Upcoming & Overdue Tasks' },
        taskstatusoverview: { name: 'Task Status Overview' },
        taskcompletionheatmap: { name: 'Task Completion Activity' }
    },
    creation: {
        allfilesheatmap: { name: 'All Files' },
        dailynotesheatmap: { name: 'Daily Notes' },
        regularnotesheatmap: { name: 'Regular Notes' },
        assetsheatmap: { name: 'Assets' }
    }
};

// Import necessary components from the Obsidian API.
const { Plugin, ItemView, PluginSettingTab, Notice, TFile, TFolder, Setting, Modal, Menu, AbstractInputSuggest, moment, MarkdownRenderer, setIcon, Platform } = require("obsidian");

// Define a unique type for this plugin's view.
const VIEW_TYPE_PERIOD = "calendar-period-week";

// Define the default settings for the plugin. This object is used as a fallback and for resetting configurations.
const DEFAULT_SETTINGS = {
    // General Display
    appliedTheme: "",
    fontSize: "12px",
    customDateFormats: "YYYY-MM-DD,DD-MM-YYYY",
    dayNumberFontSize: "15px",
    navButtonHeight: "28px",
    headerRowBold: false,
    pwColumnBold: false,
    showCalendarGridLines: false,
    calendarGridGapWidth: "1px",
    contentBorderWidth: "1px",
    monthColorLight: "rgba(51, 51, 51, 1)", // Dark Grey for light mode
    monthColorDark: "rgba(255, 255, 255, 1)", // White for dark mode
    yearColorLight: "rgba(255, 0, 0, 1)", // Darker red for light mode
    yearColorDark: "rgba(255, 80, 80, 1)",  // Brighter red for dark mode
    currentHighlightLabelColorLight: "rgba(255, 80, 80, 1)", // A distinct but readable red for light mode
    currentHighlightLabelColorDark: "rgba(255, 80, 80, 1)",  // A brighter red for dark mode
    monthTitleFormat: "MMMM YYYY",
    mainMonthYearTitleFontSize: "22px",
    mainMonthTitleBold: true,
    mainYearTitleBold: false,
    todayHighlightSize: "2.2em",
    tabTitleBold: false,
    tabDisplayMode: "iconOnly",
    mobileTabDisplayMode: "iconOnly",
    collapsedNoteGroups: {},
    tabOrder: ["scratch", "tasks", "notes", "assets", "dashboard"],
    tabIcons: {
        scratch: "pencil",
        notes: "files",
        tasks: "check-circle",
        pinned: "pin",
        assets: "image-file",
        dashboard: "chart-bar-big"
    },
    assetsLookbackDays: 120,
    assetsDefaultView: 'grid',
    defaultDashboardView: 'creation',
    taskBarChartDefaultMode: 'percent',
    tabVisibility: {
        scratch: true,
        tasks: true,
        notes: true,
        assets: true,
        dashboard: true
    },
    calendarLayout: "normal",
    weekStartDay: "sunday",

    // Scratchpad
    fixedNoteFile: "ScratchPad.md",
    scratchFontSize: "14px",
    scratchBold: false,
    scratchFontFamily: "",
    scratchpadOpenAction: "new-tab",
    scratchpadHighlightColor: "rgba(255, 165, 0, 0.4)",
    scratchpad: {
        showPreviewToggle: true,
        showAddTaskButton: true,
        taskFormat: "- [ ] #Tag | 📅 {friday}",
        hideFrontmatter: true
    },
    // Notes Tab
    ignoreFolders: [],
    pinTag: "pin",
    notesViewMode: "recent",
    notesFontSize: "14px",
    notesBold: false,
    notesOpenAction: "current-tab",
    notesLineHeight: 1.2,
    notesLookbackDays: 120,
    showNoteStatusDots: true,
    showNoteTooltips: true,
    pinnedNotesSortOrder: 'a-z', // can be 'a-z' or 'custom'
    pinnedNotesCustomOrder: [],  // Stores an array of note paths for custom order

    //Assets 
    hiddenAssetTypes: "base,canvas",
    showUnusedAssetsIndicator: true,
    assetsOpenAction: "new-tab",

    // Calendar Dots & Popups
    listPopupTrigger: "hover",
    showOtherNoteDot: true,
    showModifiedFileDot: true,
    otherNoteIgnoreFolders: [],
    otherNoteHoverDelay: 800,
    popupHideDelay: 50,
    popupGap: -2,
    otherNotePopupFontSize: "14px",
    calendarDotSize: 4,
    showAssetDot: true,
    assetDotColor: "rgba(255, 0, 0, 1)", 
    calendarEventDotColor: 'rgba(148, 148, 148, 1)', 

    assetIgnoreFolders: [],
    showPWColumnSeparator: true,
    pwColumnSeparatorColor: "rgba(128, 128, 128, 0.2)", // Grey separator line

    pwColumnFontColorLight: "rgba(51, 51, 51, 0.6)", // Dark grey for light mode
    pwColumnFontColorDark: "rgba(255, 255, 255, 0.6)", // White for dark mode
    weekNumberFontColorLight: "rgba(51, 51, 51, 0.6)", // Dark grey for light mode
    weekNumberFontColorDark: "rgba(255, 255, 255, 0.6)", // White for dark mode
    dayHeaderFontColorLight: "rgba(51, 51, 51, 0.6)", // Dark grey for light mode
    dayHeaderFontColorDark: "rgba(255, 255, 255, 0.6)", // White for dark mode

    dayCellFontColorLight: "rgba(51, 51, 51, 1)", // Current month dates - light
    dayCellFontColorDark: "rgba(255, 255, 255, 1)", // Current month dates - dark
    otherMonthFontColorLight: "rgba(153, 153, 153, 0.6)", // Previous/next month dates - light
    otherMonthFontColorDark: "rgba(153, 153, 153, 0.6)", // Previous/next month dates - dark

    // Task Count Badge
    taskIndicatorStyle: "heatmap", // 'none', 'badge', or 'heatmap'
    taskBadgeFontSize: "11px",
    taskBadgeColor: "rgba(100, 149, 237, 0.6)", // Cornflower Blue
    taskBadgeFontColor: "rgba(255, 255, 255, 1)", // White
    taskHeatmapStartColor: "rgba(100, 149, 237, 0.3)", // Cornflower Blue
    taskHeatmapMidColor: "rgba(255, 127, 80, 0.45)",    // Coral
    taskHeatmapEndColor: "rgba(255, 71, 71, 0.6)",     // Red
    taskHeatmapMidpoint: 5,
    taskHeatmapMaxpoint: 10,
    showTaskDot: false,
    taskDotColor: "rgba(200, 100, 200, 1)",

    // Task Dashboard Colours
    taskStatusColorOverdue: 'rgba(244, 21, 1, 0.5)',
    taskStatusColorInProgress: 'rgba(251, 188, 5, 0.5)',
    taskStatusColorOpen: 'rgba(74, 144, 226, 0.5)',
    taskStatusColorCompleted: 'rgba(126, 211, 33, 0.5)',
    taskStatusColorCancelled: 'rgba(158, 158, 158, 0.5)',

    // Daily Notes
    dailyNotesFolder: "Daily Notes",
    dailyNoteDateFormat: "YYYY-MM-DD",
    dailyNoteTemplatePath: "",
    dailyNoteOpenAction: "new-tab",

    //period / week numbers 
    showWeekNumbers: true,
    weekNumberType: "calendar", // 'period' or 'calendar'
    weekNumberColumnLabel: "CW",

    //calendar events (from ICS) settings
    icsUrl: '',
    showIcsDot: true,
    icsRefreshInterval: 60, // in minutes
    calendarEventsPlaceholder: '%%CALENDAR_EVENTS%%',
    calendarEventsFormat: '- {{startTime}} - {{endTime}}: {{summary}}',
    calendarEventIndicatorStyle: 'dot', // Options: 'dot', 'heatmap', 'badge'

    // Functional
    autoReloadInterval: 5000,
    startOfPeriod1Date: "2025-03-02",
    showPWColumn: false,
    pwFormat: "P#W#",
    enableRowHighlight: true,
    enableColumnHighlight: true,
    enableRowToDateHighlight: false,
    highlightCurrentWeek: true,

    // Colors
    selectedTabColor: "rgba(102, 102, 102, 1)",
    todayHighlightColorLight: "rgba(255, 80, 80, 0.40)",
    todayHighlightColorDark: "rgba(255, 80, 80, 0.75)",
    notesHoverColor: "rgba(171, 171, 171, 0.15)",
    dailyNoteDotColor: "rgba(74, 144, 226, 1)",
    noteCreatedColor: "rgba(76, 175, 80, 1)",
    noteModifiedColor: "rgba(255, 152, 0, 1)",
    rowHighlightColorLight: "rgba(163, 163, 163, 0.2)", // Lighter Grey
    rowHighlightColorDark: "rgba(51, 51, 51, 0.7)",     // Dark Grey
    dateCellHoverColorLight: "rgba(105, 105, 105, 0.75)",     // Light Grey
    dateCellHoverColorDark: "rgba(51, 51, 51, 1)",
    assetDotColor: "rgba(255, 0, 0, 1)",
    todayHighlightStyle: "circle", // 'cell' or 'circle'
    todayCircleColorLight: "rgba(255, 80, 80, 0.40)",
    todayCircleColorDark: "rgba(255, 80, 80, 0.75)",
    highlightTodayLabels: true,
    highlightTodayPWLabel: true,
    highlightTodayDayHeader: true,
    highlightWeekends: false,
    weekendShadeColorLight: "rgba(163, 163, 163, 0.15)", // Subtle grey for light theme
    weekendShadeColorDark: "rgba(51, 51, 51, 0.4)", // Subtle grey for dark theme


    // Weekly Notes (NEW)
    enableWeeklyNotes: true,
    weeklyNoteFolder: "Weekly Notes",
    weeklyNoteFormat: "YYYY-WKC", // e.g., 2025-W38
    weeklyNoteTemplate: "",
    showWeeklyNoteDot: true,
    weeklyNoteDotColor: "rgba(128, 128, 128, 1)",

    // Tasks Tab Settings
    taskIgnoreFolders: [],
    taskSortOrder: "dueDate",
    taskGroupBy: "date",
    taskDateGroupsToShow: ["overdue", "today", "tomorrow", "next7days", "future"],
    taskTextTruncate: false,
    showCompletedTasksToday: true,
    taskHeadingFontSize: "13px",
    taskTextFontSize: "14px",
    taskGroupIcons: {
        overdue: "alarm-clock-off",
        today: "target",
        tomorrow: "arrow-right",
        next7days: "calendar-days",
        future: "telescope",
        noDate: "help-circle",
        tag: "tag"
    },
    taskGroupColorOverdue: "rgba(40, 40, 40, 0.15)",
    taskGroupColorToday: "rgba(60, 60, 60, 0.15)",
    taskGroupColorTomorrow: "rgba(80, 80, 80, 0.15)",
    taskGroupColorNext7Days: "rgba(100, 100, 100, 0.15)",
    taskGroupColorFuture: "rgba(120, 120, 120, 0.15)",
    taskGroupColorNoDate: "rgba(140, 140, 140, 0.15)",
    taskGroupColorTag: "rgba(40, 40, 40, 0.15)",
    showPreviewToggle: true,
    showAddTaskButton: true,
    collapsedTaskGroups: {},
    collapsedAssetGroups: {},

    //Dashboard Tab
    customHeatmaps: [],
    creationDashboardOrder: ['dailynotesheatmap', 'regularnotesheatmap', 'assetsheatmap', 'allfilesheatmap'],
    creationDashboardWidgets: {
        allfilesheatmap: true,
        dailynotesheatmap: true,
        regularnotesheatmap: true,
        assetsheatmap: true,
    },
    tasksDashboardOrder: ['today', 'tomorrow', 'next7days', 'futureNoDue', 'upcomingoverdue', 'taskstatusoverview', 'taskcompletionheatmap'],
    tasksDashboardWidgets: {
        today: true,
        tomorrow: true,
        next7days: true,
        futureNoDue: true,
        upcomingoverdue: true,
        taskstatusoverview: true,
        taskcompletionheatmap: true,
    },
    collapsedHeatmaps: {},
    smallWidgetStates: {},
    collapsedWidgets: {},
    isHeatmapGuideCollapsed: true,
    heatmapLinkConfig: {},
    heatmapTotalClickOpenAction: 'new-tab',
    customHeatmaps: [],

};

// A string containing all the CSS for the plugin. It's injected into the document head on load.
const PLUGIN_STYLES = `
body.theme-light {
    --month-color-themed: var(--month-color-light);
    --today-circle-color-themed: var(--today-circle-color-light);
    --today-highlight-color-themed: var(--today-highlight-color-light);
    --date-cell-hover-color-themed: var(--date-cell-hover-color-light);
    --pw-column-font-color-themed: var(--pw-column-font-color-light);
    --week-number-font-color-themed: var(--week-number-font-color-light);
    --day-header-font-color-themed: var(--day-header-font-color-light);
    --day-cell-font-color-themed: var(--day-cell-font-color-light);
    --other-month-font-color-themed: var(--other-month-font-color-light);
    --weekend-shade-color-themed: var(--weekend-shade-color-light);
    --row-highlight-color-themed: var(--row-highlight-color-light);
    --year-color-themed: var(--year-color-light);
    --current-label-highlight-color-themed: var(--current-highlight-label-color-light); 

}
body.theme-dark {
    --month-color-themed: var(--month-color-dark);
    --today-circle-color-themed: var(--today-circle-color-dark);
    --today-highlight-color-themed: var(--today-highlight-color-dark);
    --date-cell-hover-color-themed: var(--date-cell-hover-color-dark);
    --pw-column-font-color-themed: var(--pw-column-font-color-dark);
    --week-number-font-color-themed: var(--week-number-font-color-dark);
    --day-header-font-color-themed: var(--day-header-font-color-dark);
    --day-cell-font-color-themed: var(--day-cell-font-color-dark);
    --other-month-font-color-themed: var(--other-month-font-color-dark);
    --weekend-shade-color-themed: var(--weekend-shade-color-dark);
    --row-highlight-color-themed: var(--row-highlight-color-dark);
    --year-color-themed: var(--year-color-dark);
    --current-label-highlight-color-themed: var(--current-highlight-label-color-dark); 

}

/* Style for the "Month" part (uses existing --month-color-themed variable) */
.month-title-month {
    color: var(--month-color-themed);
}

/* Style for the "Year" part (uses the new variable) */
.month-title-year {
    color: var(--year-color-themed);
}

/* 4. Ensure individual date hover appears ON TOP of other highlights */
.period-calendar-table td:hover td:not(.pw-label-cell):not(.week-number-cell):hover .day-content {
    background-color: var(--date-cell-hover-color-themed) !important;
}

.period-calendar-table td.row-hover:not(.pw-label-cell):not(.week-number-cell) {
    background-color: var(--row-highlight-color-themed);
}

/* Day header row font color */
.period-calendar-table thead th {
    color: var(--day-header-font-color-themed);
}

/* Period/Week column font color */
.period-calendar-table .pw-label-cell,
.period-calendar-table .pw-label-cell .day-number {
    font-weight: var(--pw-column-font-weight);
    font-size: var(--header-font-size);
    color: var(--pw-column-font-color-themed);
}

/* Highlight today's P/W column with today color */
.period-calendar-table .pw-label-cell.today-pw-label .day-number,
.period-calendar-table .week-number-cell.today-pw-label .day-number {
    color: var(--current-label-highlight-color-themed);
    
}

/* Highlight today's day column header with today color */
.period-calendar-table thead th.today-day-header {
    color: var(--current-label-highlight-color-themed);    
}

/* Week number column font color */
.period-calendar-table .week-number-cell,
.period-calendar-table .week-number-cell .day-number {
    font-weight: var(--pw-column-font-weight);
    font-size: var(--header-font-size);
    color: var(--week-number-font-color-themed);
}

/* --- Main Layout --- */
.period-month-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  padding-top: 6px;
}
.month-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.1rem 0.25rem;
  margin-bottom: 0.5rem; /* Specific margin for spacing */
}
.month-header-title {
    font-size: var(--main-month-year-title-font-size);
    white-space: nowrap;
    cursor: pointer;
}
.month-title-month {
    font-weight: var(--main-month-title-weight);
}

.month-title-year {
    font-weight: var(--main-year-title-weight);
}

.month-header-nav {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}
.month-header-nav button {
  height: var(--nav-button-height);
  min-height: var(--nav-button-height);
  padding: 0; /* Remove horizontal padding */
  width: var(--nav-button-height); /* Make the button square */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

/* Accent color for the locked popup button on desktop */
.month-header-nav button.popup-locked .svg-icon {
    color: var(--interactive-accent);
}

/* Specific override for mobile to ensure accent color is applied */
body.is-mobile .month-header-nav button.popup-locked .svg-icon {
    color: var(--interactive-accent);
}

/* --- Chevron Button Animation --- */
.month-header-nav button[aria-label="Toggle calendar visibility"] .svg-icon {
  transition: transform 0.3s ease-in-out;
}
.period-month-container.calendar-collapsed .month-header-nav button[aria-label="Toggle calendar visibility"] .svg-icon {
  transform: rotate(180deg);
}
body.is-mobile .month-header-nav button .svg-icon {
  width: 18px;
  height: 18px;
  color: var(--icon-color);
  flex-shrink: 0;
}
/* --- Calendar Collapse Animation --- */
.calendar-table-wrapper {
  flex-shrink: 0;
  max-height: 500px; 
  transition: max-height 0.3s ease-in-out, margin-bottom 0.3s ease-in-out;
  overflow: hidden;
  margin-bottom: 0.5rem;
}
.period-month-container.calendar-collapsed .calendar-table-wrapper {
  max-height: 0;
  margin-bottom: 0;
}

/* --- Calendar Table --- */
.period-calendar-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
}
.period-calendar-table th, .period-calendar-table td {
  text-align: center;
  vertical-align: middle;
  padding: 0;
  font-size: var(--header-font-size);
}
.period-calendar-table th {
    vertical-align: middle;
}

.period-calendar-table th {
  font-weight: var(--header-row-font-weight);
  height: 2.5em;
}
.period-calendar-table tbody td {
 cursor: pointer;
 overflow: visible; 
 position: relative;
}
.period-month-container:not(.hide-grid) .period-calendar-table td {
    border: var(--calendar-grid-gap-width) solid var(--background-modifier-border);
}

/* --- Rounded Row Highlight --- */
.period-calendar-table .current-week-row td:first-child {
    border-top-left-radius: 6px;
    border-bottom-left-radius: 6px;
}

.period-calendar-table .current-week-row td:last-child {
    border-top-right-radius: 6px;
    border-bottom-right-radius: 6px;
}

.period-calendar-table tbody td:not(.pw-label-cell):not(.week-number-cell):hover .day-content {
  background-color: var(--date-cell-hover-color-themed);
  border-radius: 6px;
  transition: background-color 0.15s ease;
}

body .period-month-container.today-style-cell .today-cell .day-content {
  background-color: var(--today-highlight-color-themed);
  border-radius: 6px;
}

body .period-month-container.today-style-cell .period-calendar-table tbody tr.current-week-row td.today-cell .day-content {
    background-color: var(--today-highlight-color-themed) !important;
}

.period-month-container.today-style-circle .today-cell .day-number {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: var(--today-circle-color-themed);
    z-index: 2;
    border-radius: 50%;
    width: var(--today-highlight-size);
    height: var(--today-highlight-size);
    display: flex;
    align-items: center; 
    justify-content: center;
}

.period-month-container.today-style-number .today-cell .day-number {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: var(--today-circle-color-themed);
    border-radius: 6px; 
    padding: 0px 10px; /* Minimal padding for a tight fit */
    display: flex;
    align-items: center; 
    z-index: 2; /* Ensures it's drawn on top of the heatmap */
}

.period-calendar-table td .day-content.heatmap-cell {
    background-color: var(--heatmap-color) !important;
}

.period-calendar-table .pw-label-cell,
.period-calendar-table .week-number-cell {
  font-weight: var(--pw-column-font-weight);
  font-size: var(--header-font-size);
  position: relative;
}

/* --- Period/Week Column Separator Line --- */
.period-calendar-table tbody td.first-date-column::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 1px;
    background-color: var(--pw-separator-color);
    z-index: 1;
}

.week-dots-container {
    position: absolute;
    left: 0;
    width: 100%;
    display: flex;
    justify-content: center;
}

/* --- Calendar Dots Color Variables --- */
.calendar-dot {
    width: var(--calendar-dot-size);
    height: var(--calendar-dot-size);
    border-radius: 50%;
}

.ics-event-dot {
    background-color: var(--calendar-event-dot-color);
}

/* --- Calendar Layout Styles --- */
.period-month-container.layout-spacious .day-content {
    height: 3.8em;
}
.period-month-container.layout-normal .day-content {
    height: 3.0em;
}
.period-month-container.layout-condensed .day-content {
    height: 2.8em; /* Even smaller height */
    
}

/* The weekly dot now just sets the color and re-uses .calendar-dot for its size */
.weekly-note-dot {
    background-color: var(--weekly-note-dot-color);
}

/* --- Calendar Day Content & Dots (REFACTORED) --- */
/* 1. The Day Content Wrapper */
/* Its ONLY job is to be the positioning anchor. No more flexbox. */
.day-content {
    position: relative;
    width: 100%;
    height: 100%;
}

/* 2. The Day Number */
/* We now position it absolutely to ensure it is perfectly centered. */
.day-number {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1; /* Sits on top of the highlight circle */
    font-size: var(--calendar-day-number-font-size);
    color: var(--day-cell-font-color-themed);
}

/* 3. The Dots Container (with dynamic bottom positioning) */
/* The base rule removes the bottom property. */
.dots-container, .week-dots-container {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    justify-content: center;
    gap: 3px;
    z-index: 2; /* Sits on top of the day number */
}

/* These layout-specific classes now have full control and will work correctly. */
.dots-container.layout-condensed,
.week-dots-container.layout-condensed {
    top: 26px; 
}

.dots-container.layout-normal,
.week-dots-container.layout-normal {
    top: 28px; 
}

.dots-container.layout-spacious,
.week-dots-container.layout-spacious {
    top: 34px; 
}

/* 4. Ensure other layered items are also positioned absolutely */


.badge-container {
    position: absolute;
    top: 2px;
    right: 2px;
    z-index: 3; /* Sits at the very top */
}

.day-header-cell, .pw-cell, .week-number-cell {
    /* Uses the general font size for labels */
    font-size: var(--calendar-label-font-size); 
}

.day-number-other-month {
    color: var(--other-month-font-color-themed) !important;
}

.period-calendar-table th, .period-calendar-table .pw-cell, .period-calendar-table .week-number-cell {
    font-size: var(--calendar-label-font-size); 
}

/* --- Calendar Layout Styles --- */
.period-month-container.layout-spacious .dots-container  {
    padding-bottom: 10px; /* Creates space from the bottom edge */
}
.period-month-container.layout-spacious .dots-container:empty {
    padding-top: var(--calendar-dot-size);
}

.period-month-container.layout-normal .dots-container  {
    padding-bottom: 6px; /* Creates space from the bottom edge */
}
.period-month-container.layout-condensed .dots-container  {
    padding-bottom: 4px; /* Creates space from the bottom edge */
}

.task-count-badge {
    position: absolute;
    top: 2px;
    right: 3px;
    z-index: 3;
    width: 1.6em;
    height: 1.6em;
    border-radius: 50%;
    background-color: var(--task-badge-color);
    color: var(--task-badge-font-color);
    font-size: var(--task-badge-font-size);
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1; /* Prevents text from shifting vertically */
}

.calendar-dot {
  width: var(--calendar-dot-size);
  height: var(--calendar-dot-size);
  border-radius: 50%;
}
.other-note-dot { background-color: var(--other-note-dot-color); }
.modified-file-dot { background-color: var(--calendar-modified-dot-color); }
.asset-dot { background-color: var(--asset-dot-color); }
.task-dot { background-color: var(--task-dot-color); } 
.period-month-daily-note-dot { background-color: var(--daily-note-dot-color, var(--text-accent)); }
.period-month-daily-note-dot-other-month { opacity: 0.4; }

/* --- Tabs & Search Header --- */
.tabs-content-wrapper {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;
  min-height: 0;
  padding-bottom: 60px;
}
.note-tab-header {
  display: flex;
  flex-shrink: 0;
  width: 100%;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 6px;
  gap: 8px;
}
.tab-container {
  display: flex;
  align-items: center;
  
}
.note-tab {
  position: relative;
  flex: 0 1 auto;
  text-align: center;
  padding: 0.5rem 1rem;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  font-size: var(--tab-title-font-size);
  font-weight: var(--tab-title-bold);
  white-space: nowrap;
}
.note-tab:hover { background-color: var(--background-modifier-hover); }
.note-tab.active {
  border-bottom-color: var(--selected-tab-color);
}
.note-tab.dragging {
  opacity: 0.5;
  cursor: grabbing;
}
.note-tab.drag-over-indicator-before::before,
.note-tab.drag-over-indicator-after::after {
  content: '';
  position: absolute;
  top: 10%;
  bottom: 10%;
  width: 2px;
  background-color: var(--selected-tab-color);
}
.note-tab.drag-over-indicator-before::before { left: 0; }
.note-tab.drag-over-indicator-after::after { right: 0; }
.search-wrapper {
  flex-grow: 1;
  display: flex;
  justify-content: flex-end;
  padding-right: 8px;
}

/* --- Mobile-Specific Tab Compaction --- */
body.is-mobile .note-tab {
    padding: 0.5rem 0.6rem; /* Reduced horizontal padding */
    gap: 5px; /* Reduced gap between icon and text */
}

body.is-mobile .tab-icon {
    width: 18px; /* Smaller icon width */
    height: 18px; /* Smaller icon height */
}

body.is-mobile .pm-search-input {
    flex-grow: 1; /* Allow search input to take more space */
}

/* --- Unified Search Input --- */
.pm-search-container {
    display: flex;
    align-items: center;
    position: relative;
    width: 100%;
}
.pm-search-input {
    background-color: var(--background-secondary);
    border: 1px solid var(--background-modifier-border);
    border-radius: var(--radius-s);
    color: var(--text-normal);
    width: 100%;
    padding: 4px 28px 4px 8px;
    box-sizing: border-box;
    line-height: var(--line-height-normal);
}
.pm-search-input:focus {
    border-color: var(--interactive-accent);
    box-shadow: 0 0 0 1px var(--interactive-accent);
}

/* --- Scratchpad Content & Buttons --- */
.scratchpad-wrapper {
  flex: 1 1 auto;
  display: grid;
  width: 100%;
  height: 100%;
  position: relative;
}
.scratch-content:focus {
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
}
/* This is the visual cutout */
.scratchpad-wrapper::before {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  width: 56px;
  height: 64px;
  background-color: var(--background-secondary);
  z-index: 3;
  border-bottom-left-radius: var(--radius-m);
}
.scratchpad-wrapper.markdown-preview-view {
  align-content: start; 
}
.scratchpad-wrapper.markdown-preview-view p {
  margin-block-start: 0 !important;
  margin-block-end: 0.5em !important; 
}
.scratchpad-actions-container {
  position: absolute;
  top: 8px;
  right: 8px;
  z-index: 10;
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.scratchpad-action-btn {
  cursor: pointer;
  background-color: var(--background-modifier-hover);
  border: 1px solid var(--background-modifier-border);
  border-radius: var(--radius-s);
  padding: 4px;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}
.scratchpad-action-btn .svg-icon {
    width: 16px;
    height: 16px;
}
.scratchpad-action-btn:hover {
  background-color: var(--background-modifier-border);
}

/* --- Scratchpad Textarea & Highlighter --- */
.scratch-base {
  margin: 0;
  padding: 0.75rem 3.5rem 0.5rem 0.5rem;
  border: none;
  font-family: var(--scratch-font-family);
  font-size: var(--scratch-font-size);
  font-weight: var(--scratch-bold);
  line-height: 1.5;
  white-space: pre-wrap;
  word-break: break-word;
  box-sizing: border-box;
  width: 100%;
  height: 100%;
  grid-area: 1 / 1;
  overflow: auto;
}
.scratch-highlighter {
  z-index: 1;
  color: transparent;
  pointer-events: none;
}
.scratch-highlighter mark {
  color: transparent;
  background-color: var(--scratchpad-highlight-color);
  border-radius: 3px;
}
.scratch-content {
  z-index: 2;
  background-color: transparent;
  resize: none;
}
.scratch-content:hover {
  background-color: transparent !important;
}
.scratch-content::selection {
  background-color: var(--scratchpad-highlight-color) !important;
}

/* --- Notes & Tasks List Styles --- */

.notes-container, .tasks-container {
  overflow-y: auto;
  flex: 1 1 auto;
  min-height: 0;
  padding: 4px;
  display: flex;         
  flex-direction: column;
  gap: 8px;
}

.note-row, .task-row {
  display: flex;
  align-items: center;
  padding: 8px;
  border-radius: 8px;
  cursor: pointer;
  outline: none;
  width: 100%;
  box-sizing: border-box;
  overflow: hidden;
  position: relative;
}
.note-row {
  gap: 1em;
}
.task-row {
  gap: 0.5em;

}
.task-row .task-text > p {
    margin: 0;
    padding: 0;
}

.task-text .task-completed-text {
    text-decoration: line-through;
    opacity: 0.6;
    color: var(--text-muted);
}

#notes-list-view .note-row:hover,
#asset-list-view .note-row:hover,
#pinned-notes-list .note-row:hover,
.tasks-container .task-row:hover,
#notes-list-view .note-row:focus,
#asset-list-view .note-row:focus,
#pinned-notes-list .note-row:focus,
.tasks-container .task-row:focus {
    background-color: var(--notes-hover-color);
}

.note-status-dot { 
  width: 8px; 
  height: 8px; 
  border-radius: 50%; 
  flex-shrink: 0; 
}
.note-status-dot-created { background-color: var(--note-created-color); }
.note-status-dot-modified { background-color: var(--note-modified-color); }
.note-row .note-title-wrapper { 
  display: flex; 
  align-items: flex-start;
  gap: 6px; 
  flex: 1; 
  min-width: 0; 
}
.note-row .note-title { 
  white-space: nowrap; 
  overflow: hidden; 
  text-overflow: ellipsis; 
  font-size: var(--notes-font-size); 
  font-weight: var(--notes-bold); 
}
.note-row .note-meta-container {
  display: flex;
  align-items: center;
  gap: 1em;
  flex-shrink: 0;
  margin-left: 1em;
}
.note-row .note-file-size {
  font-size: 0.8em;
  color: var(--text-muted);
  width: 65px;
  text-align: right;
}
.note-row .note-mod-date { 
  white-space: nowrap; 
  font-size: 0.8em; 
  color: var(--text-muted);
  width: 85px;
  text-align: right 
}

/* --- Tasks Specific Styles --- */
.task-group-container {
  margin-bottom: 10px;
  padding: 8px;
  border-radius: 8px;
}

/* --- Popups & Tooltips --- */
/* Common base styles for popups */
.other-notes-popup, .custom-suggestion-container {
    position: absolute;
    z-index: 100;
    background-color: var(--background-secondary);
    border: 1px solid #4a4a4a;
    border-radius: 15px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    min-width: 450px;
    max-width: 658px;
}

/* Main popup specific styles */
.other-notes-popup {
    padding: 0;
    display: flex;
    flex-direction: column;
    overflow: hidden; /* Hide overflow on the main container */
    max-height: 250px; /* Increased slightly for mobile header */
}

/* Popup header */
.popup-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    border-bottom: 1px solid var(--background-modifier-border);
    flex-shrink: 0; /* Prevent header from shrinking */
    cursor: pointer;
    gap: 10px;
}
.popup-header-title {
    font-weight: normal;
    color: var(--text-muted);
    flex-grow: 1; /* Allow title to take available space */
    flex-shrink: 1; /* Allow title to shrink if needed */
    min-width: 0; /* Important for text-overflow to work with flex items */
    white-space: nowrap; /* Prevent title from wrapping */
    overflow: hidden; /* Hide overflow */
    text-overflow: ellipsis; /* Add ellipsis for long titles */
    font-size: --var(--other-note-popup-font-size);
    /* max-width: 420px;  */
    
}

.popup-close-btn {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    /* Default for DARK theme: Light grey circle */
    background-color: #9c9b9b; 
    /* Default for DARK theme: Dark 'x' icon */
    color: #383838; 
    transition: background-color 0.1s ease-in-out, color 0.1s ease-in-out;
}

.popup-close-btn:hover {
    /* Hover for DARK theme: Even lighter circle */
    background-color: #f5f5f5;
}

/* --- Light Theme Overrides --- */
body.theme-light .popup-close-btn {
    /* Default for LIGHT theme: Dark grey circle */
    background-color: #5c5c5c;
    /* Default for LIGHT theme: White 'x' icon */
    color: #ffffff;
}

body.theme-light .popup-close-btn:hover {
    /* Hover for LIGHT theme: Even darker circle */
    background-color: #383838;
}

.popup-close-btn .svg-icon {
    width: 14px;
    height: 14px;
}

/* Content wrapper for scrolling and padding */
.popup-content-wrapper {
    padding: 8px;
    overflow-y: auto;
}

/* Suggestion container specific styles */
.custom-suggestion-container {
    z-index: 999;
    margin-top: 4px;
    padding: 8px;
    max-height: 200px;
    overflow-y: auto;
}

.other-notes-popup-item {
  display: flex; 
  align-items: flex-start; 
  gap: 8px; 
  padding: 12px 2px 8px 2px; 
  border-radius: 8px;
  overflow: hidden;
  cursor: pointer; 
  white-space: normal;
  word-break: break-word; 
  text-overflow: ellipsis; 
  font-size: var(--other-note-popup-font-size);
}

.other-notes-popup-item .popup-file-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
    margin-left: calc(8px); /* Push dot over by checkbox width + small gap */
}

.other-notes-popup-item:hover { 
  background-color: var(--background-modifier-hover); 
}
.other-notes-popup-item .svg-icon {
  flex-shrink: 0;
  width: 1.2em;
  height: 1.2em;
}

.note-row .note-status-dot,
.other-notes-popup-item .popup-file-dot,
.other-notes-popup-item .popup-asset-thumbnail {
    margin-top: 5px; 
    align-self: flex-start; 
}

.note-row:hover {
    background-color: var(--background-modifier-hover);
}

.other-notes-popup-item p {
    margin: 0;
}
.popup-file-dot { 
  width: 8px; 
  height: 8px; 
  border-radius: 50%; 
  flex-shrink: 0; 
}
.custom-suggestion-item { 
  padding: 8px 12px; 
  cursor: pointer; 
  font-size: var(--font-ui-small); 
}
.custom-suggestion-item:hover { 
  background-color: var(--background-modifier-hover); 
}
.setting-item-control { 
  position: relative; 
}
body:has(.note-title-wrapper:hover) .tooltip, 
body:has(.note-title-cell:hover) .tooltip,
body:has(.task-text:hover) .tooltip {
  text-align: left; 
  padding: 6px 10px; 
  white-space: pre-wrap; 
  max-width: 400px; 
  transition-delay: 0.5s !important; 
  background-color: var(--background-secondary); 
  box-shadow: 0 4px 12px rgba(0,0,0,0.2); 
  border-radius: 15px; 
  border: 1px solid #4a4a4a; 
  font-size: var(--other-note-popup-font-size); 
  color: var(--text-normal); 
  font-weight: normal;
}

/* --- Vertical View --- */
.vertical-calendar-scroller { 
  flex: 1; 
  overflow-y: auto; 
}
.vertical-month-wrapper { 
  margin-bottom: 2rem; 
}
.vertical-month-title {
  font-size: var(--main-month-year-title-font-size);
  font-weight: var(--main-month-year-title-weight);
  position: sticky; 
  top: 0; 
  z-index: 10;
  margin: 0.6rem 0; 
  height: 2rem; 
  display: flex; 
  align-items: center; 
  justify-content: center;
  cursor: pointer;
}

.theme-light .vertical-month-title {
    color: var(--month-color-themed);
    background-color: var(--background-primary);
}
.theme-dark .vertical-month-title {
    color: var(--month-color-themed);
    background-color: var(--background-secondary);
   /* color: var(--text-normal);  Ensure text is readable */
}

.period-month-container.vertical-view-active .tabs-content-wrapper { display: none; }
.period-month-container:not(.vertical-view-active) .vertical-calendar-scroller { display: none; }

/* --- Mobile-Specific Overrides --- */
.is-mobile .notes-table { 
  width: 100%; 
  border-collapse: collapse; 
  table-layout: fixed; 
}
.is-mobile .notes-table-row { 
  cursor: pointer; 
  border-bottom: 1px solid var(--background-modifier-border); 
}
.is-mobile .notes-table .note-title-cell, .is-mobile .notes-table .note-date-cell { 
  padding: 0.6rem 0.5rem; 
  vertical-align: top; 
}
.is-mobile .notes-table .note-title-cell { 
  display: flex; 
  align-items: center; 
  gap: 8px; 
  white-space: normal; 
  word-break: break-word; 
  font-size: var(--notes-font-size); 
  font-weight: var(--notes-bold); 
}
.is-mobile .notes-table .note-date-cell { 
  width: 85px; 
  text-align: right; 
  white-space: nowrap; 
  font-size: 0.8em; 
  color: var(--text-muted); 
}
.is-mobile .period-calendar-table th, .is-mobile .period-calendar-table .pw-label-cell { 
  /*font-size: 12px; */
  font-size: calc(var(--calendar-label-font-size) * 0.9);
  padding: 0; 
}

.is-mobile .period-calendar-table .day-number { 
    font-size: calc(var(--calendar-day-number-font-size) * 0.9);
}

.period-calendar-table .pw-label-cell .day-number,
.period-calendar-table .week-number-cell .day-number {
    font-size: inherit; /* Inherit the correct font size from the parent cell */
}

/* Default row height */
.period-calendar-table tbody tr {
    height: 36px;
    min-height: 36px;
}

.period-calendar-table tbody td {
    min-height: 36px;
}

/* Adjust row height for condensed layout */
.period-month-container.layout-condensed .period-calendar-table tbody tr {
    height: 30px;
    min-height: 30px;
}

.period-month-container.layout-condensed .period-calendar-table tbody td {
    min-height: 30px;
}

/* Adjust row height for spacious layout */
.period-month-container.layout-spacious .period-calendar-table tbody tr {
    height: 40px;
    min-height: 40px;
}

.period-month-container.layout-spacious .period-calendar-table tbody td {
    min-height: 40px;
}

/* --- Misc --- */
.period-month-container .svg-icon {
  color: var(--icon-color, currentColor);
}

/* --- Unified clear button for all search inputs --- */
.search-input-clear-btn {
    position: absolute;
    right: 6px;
    top: 50%;
    transform: translateY(-50%);
    visibility: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 15px;
    height: 15px;
    border-radius: 50%;
    cursor: pointer;
    transition: background-color 0.1s ease-in-out;
    background-color: #9c9b9b;
    /* Color is now set directly on the icon rule below */
}

.search-input-clear-btn:hover {
    background-color: #f5f5f5;
}

.search-input-clear-btn .svg-icon {
    width: 13px;
    height: 13px;
    /* FIX: Force the icon color to be dark */
    color: #383838 !important;
}

/* --- Light Theme Overrides --- */
body.theme-light .search-input-clear-btn {
    background-color: #5c5c5c;
}

body.theme-light .search-input-clear-btn:hover {
    background-color: #383838;
}

body.theme-light .search-input-clear-btn .svg-icon {
    /* FIX: Force the icon color to be white in the light theme */
    color: #ffffff !important;
}

/* --- Task Header Icons --- */
.task-group-header .icon {
  display: flex;
  align-items: center;
}
.task-group-header .icon .svg-icon {
  /*width: var(--task-heading-font-size);
  height: var(--task-heading-font-size);
*/
  }

/* --- Tab Icons --- */
.tab-icon {
  width: 1.2em;
  height: 1.2em;
}
.note-tab {
  display: flex;
  align-items: center;
  gap: 0.5em;
}

/* --- Asset List Styles --- */
.asset-thumbnail, .popup-asset-thumbnail {
  width: 28px;
  height: 28px;
  border-radius: var(--radius-s);
  object-fit: cover;
}
.popup-asset-thumbnail {
  width: 22px;
  height: 22px;
}
.asset-icon-container, .asset-thumbnail-container {
  width: 28px;
  height: 28px;
  flex-shrink: 0;
  margin-right: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.asset-icon-container .svg-icon {
  width: 20px;
  height: 20px;
}
.asset-action-icon {
  position: relative;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  margin-right: 6px;
}
.asset-action-icon > div {
  position: absolute;
  transition: opacity 0.2s ease-in-out;
}
.asset-action-icon .svg-icon {
  width: 16px;
  height: 16px;
}
.asset-action-icon div:nth-child(2) {
  opacity: 0;
}
.note-row:hover .asset-action-icon div:nth-child(1) {
  opacity: 0;
}
.note-row:hover .asset-action-icon div:nth-child(2) {
  opacity: 1;
}
.asset-action-icon:hover .svg-icon {
    color: var(--text-error);
}

/* --- Asset Grid Styles --- */
.note-list-wrapper.assets-grid-view {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 16px;
    padding-top: 8px;
}
.asset-grid-item {
    /* flex-basis: calc(50% - 8px); */
    display: flex;
    flex-direction: column;
    cursor: pointer;
    border-radius: 12px;
    background-color: var(--background-secondary);
    overflow: hidden;
    border: 1px solid var(--background-modifier-border);
    padding: 8px;
    box-sizing: border-box; /* THIS IS THE CRITICAL MISSING LINE */
}
.asset-grid-preview {
    width: 100%;
    aspect-ratio: 4 / 3;
    background-color: var(--background-modifier-hover);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden; 
    border-radius: 8px;  
}
.asset-grid-preview img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}
.asset-grid-name {
    padding: 8px 4px 0; /* Adjusted padding */
    margin-top: 8px; /* Adds space between the image and text */
    font-size: 0.9em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    border-top: 1px solid var(--background-modifier-border);
}

.asset-grid-item:hover {
  background-color: var(--notes-hover-color);
  border-color: rgba(200, 200, 200, 0.75); /* A lighter, semi-transparent gray */
}

/* --- Settings Tabs --- */
.period-settings-container {
  display: flex;
  height: 100%;
}

/* Base style for all navigation buttons in the settings panel */
.period-settings-nav button {
    transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
}

/* Highlight style for the currently active settings tab button */
.period-settings-nav button.is-active {
    background-color: var(--interactive-accent);
    color: var(--text-on-accent); /* Standard Obsidian variable for contrast */
}

.period-settings-container .setting-item-heading {
    color: var(--text-normal);
}

.period-settings-nav {
  display: flex;
  flex-direction: column;
  padding-right: 1.5rem;
  border-right: 1px solid var(--background-modifier-border);
  width: 160px;
  flex-shrink: 0;
  gap: 4px;
}
.period-settings-nav-button {
      background: none;
      border: none;
      text-align: left;
      padding: 0.75rem 0.5rem;
      margin-bottom: 0.25rem;
      cursor: pointer;
      border-radius: var(--radius-m);
      color: var(--text-muted);
      font-size: var(--font-ui-small);
}
.period-settings-nav-button:hover {
      background-color: var(--background-modifier-hover);
      color: var(--text-normal);
}
.period-settings-nav-button.is-active {
      background-color: var(--interactive-accent);
      color: var(--text-on-accent);
      font-weight: bold;
}
.period-settings-content {
      flex-grow: 1;
      padding-left: 1.5rem;
      overflow-y: auto;
}
.period-settings-content > :first-child {
    /* Remove the browser's default top margin from the header */
    margin-top: 0;
    
    /* Add a small amount of padding to vertically align it with the text inside the buttons */
    padding-top: 6px; 
}
.popup-section-header {
    font-size: 0.8em;
    font-weight: bold;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin: 10px 8px 4px;
    padding: 0;
}
.popup-separator {
    border-bottom: 1px solid var(--background-modifier-border);
    margin: 6px 8px;
}
.other-notes-popup .popup-section-header:first-child {
    margin-top: 4px;
}
.note-group-header {
    font-size: 0.85em;
    font-weight: bold;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 12px 4px 4px;
}
.note-title-path-wrapper,
.other-notes-popup-item .note-title-path-wrapper {
    flex-grow: 1;    
    display: flex;
    flex-direction: column;
    min-width: 0; 
}
.note-row .note-path,
.other-notes-popup-item .note-path {
    font-size: 0.8em;
    color: var(--text-muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-top: 2px;
}

.other-notes-popup-item .note-icon {
    flex-shrink: 0;
    margin-left: 8px; /* Match checkbox width + small gap */
}


/* --- Note Group Collapse Styles --- */
.note-group-container {
  border: 1px solid var(--background-modifier-border); /* Adds a subtle, theme-aware border */
  border-radius: var(--radius-l); /* Rounds the corners of the card */
  padding: 0 8px 8px; /* Adds some internal spacing for the note list */
  margin-bottom: 12px; /* Increases space between cards */
}
.note-group-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
  user-select: none;
  font-size: 0.85em;
  font-weight: bold;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 12px 4px 4px;
}

.note-group-header:hover {
  color: var(--text-normal);
}
.note-group-header-content {
  display: flex;
  align-items: center;
  gap: 6px;
}
.note-group-count {
  font-size: 0.9em;
  background-color: var(--background-modifier-border);
  border-radius: 4px;
  padding: 1px 5px;
}
.note-group-collapse-icon .svg-icon {
  transition: transform 0.2s ease-in-out;
  width: 16px;
  height: 16px;
}
.note-group-container.is-collapsed .note-group-collapse-icon .svg-icon {
  transform: rotate(-90deg);
}
.note-list-wrapper {
  overflow: hidden;
  transition: max-height 0.3s ease-in-out, margin-top 0.3s ease-in-out;
  margin-top: 4px;
}
.note-group-container.is-collapsed .note-list-wrapper {
  max-height: 0;
  margin-top: 0;
}

/* --- Pull to Refresh Indicator --- */
.pm-refresh-indicator {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--icon-color);
    z-index: 5;
    opacity: 0;
    transform: translateY(-50px) scale(0.7);
    transition: transform 0.3s, opacity 0.3s;
}
.pm-refresh-indicator.is-pulling {
    opacity: 0.8;
}
.pm-refresh-indicator.is-ready {
    opacity: 1;
    transform: translateY(0) scale(1);
}

.pm-refresh-indicator.is-refreshing .svg-icon {
    animation: spin 1.2s linear infinite;
}
/* Re-use the spin animation from the refresh button */
@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}
/* --- Mobile Keyboard Handling --- */
.scratch-content.is-editing-mobile {
    padding-bottom: 45vh; /* 45% of the visible screen height */
}

/* ==========================================================================
   WEEKEND/WEEK HIGHLIGHTING LOGIC
   ========================================================================== */

/* 1. Neutralize weekend shade inside the current week row */
.period-calendar-table tbody tr.current-week-row {
  --weekend-shade-color-themed: transparent;
}

/* 2. Regular weekend shading for SUNDAY-START weeks */
.period-month-container:not(.monday-start).weekend-shading-enabled:not(.has-pw-column):not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(1),
.period-month-container:not(.monday-start).weekend-shading-enabled:not(.has-pw-column):not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(7),
.period-month-container:not(.monday-start).weekend-shading-enabled.has-pw-column:not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(2),
.period-month-container:not(.monday-start).weekend-shading-enabled.has-pw-column:not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(8),
.period-month-container:not(.monday-start).weekend-shading-enabled.has-week-numbers:not(.has-pw-column)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(2),
.period-month-container:not(.monday-start).weekend-shading-enabled.has-week-numbers:not(.has-pw-column)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(8),
.period-month-container:not(.monday-start).weekend-shading-enabled.has-pw-column.has-week-numbers
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(3),
.period-month-container:not(.monday-start).weekend-shading-enabled.has-pw-column.has-week-numbers
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(9) {
  background-color: var(--weekend-shade-color-themed);
}

/* 3. Weekend shading for MONDAY-START weeks */
.period-month-container.monday-start.weekend-shading-enabled:not(.has-pw-column):not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(6),
.period-month-container.monday-start.weekend-shading-enabled:not(.has-pw-column):not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(7),
.period-month-container.monday-start.weekend-shading-enabled.has-pw-column:not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(7),
.period-month-container.monday-start.weekend-shading-enabled.has-pw-column:not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(8),
.period-month-container.monday-start.weekend-shading-enabled.has-week-numbers:not(.has-pw-column)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(7),
.period-month-container.monday-start.weekend-shading-enabled.has-week-numbers:not(.has-pw-column)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(8),
.period-month-container.monday-start.weekend-shading-enabled.has-pw-column.has-week-numbers
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(8),
.period-month-container.monday-start.weekend-shading-enabled.has-pw-column.has-week-numbers
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(9) {
  background-color: var(--weekend-shade-color-themed);
}

/* 4. Make day-content transparent by default */
.period-calendar-table .day-content {
  background: transparent !important;
}

/* 5. If a cell uses border styling (today/tasks), keep its background transparent */
.period-calendar-table .day-content[style*="border"] {
  background: transparent !important;
}

/* This rule highlights the header cell itself and should work as intended. */
.period-calendar-table th.column-hover {
    background: var(--row-highlight-color-themed);
    border-top-left-radius: 6px;
    border-top-right-radius: 6px;
}

/* This rule now targets the <td> element directly, just like the working row hover,
   instead of the .day-content div inside it. */
.period-calendar-table td.column-hover {
    background: var(--row-highlight-color-themed);
}

/* Ensures individual date hover is always on top */
.period-calendar-table td:not(.pw-label-cell):not(.week-number-cell):hover .day-content {
    background-color: var(--date-cell-hover-color-themed) !important;
}

/* 1. Base style for the permanent current week highlight */
.period-calendar-table tr.current-week-row .day-content {
    background-color: var(--row-highlight-color-themed);
}

.period-calendar-table tr.current-week-row td {
    background-color: var(--row-highlight-color-themed);
}
.period-calendar-table tr.row-hover:not(.current-week-row) td {
    background-color: var(--row-highlight-color-themed);
}

.tab-order-container {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 10px;
}

.draggable-item {
  display: flex;
  align-items: center;
  padding: 8px;
  background-color: var(--background-secondary-alt);
  border-radius: 6px;
  border: 1px solid var(--background-modifier-border);
  cursor: grab;
}

.draggable-item.dragging {
  opacity: 0.5;
  background-color: var(--background-modifier-hover);
}

.drag-handle {
  margin-right: 12px;
  color: var(--text-muted);
}

.setting-spacer {
  height: 20px; /* Or use margin-top, e.g., margin-top: 20px; */
}

.note-group-header-content {
  cursor: pointer;
}

.pinned-sort-indicator {
  font-size: 0.85em;
  color: var(--text-muted);
  font-weight: normal;
  margin-left: 6px;
  /* Prevents the indicator from being selected as text when clicking */
  user-select: none; 
}

/* Hide drag handles by default in main UI */
.note-row .drag-handle {
    display: none;
    margin-right: 8px;
    color: var(--text-muted);
    cursor: grab;
}

/* Show drag handles when reorder mode is active */
.pinned-notes-reorder-mode .note-row .drag-handle {
    display: flex;
    align-items: center;
}

/* Visual feedback during drag */
.note-row.dragging {
    opacity: 0.5;
    background-color: var(--background-modifier-hover);
}

/* == --- Theme Settings Tab Layout --- */
/* Main container for each task group row */
.preview-task-group {
    display: flex;
    justify-content: space-between; /* Pushes the title and count apart */
    align-items: center;
    padding: 10px 14px; /* Adjust padding to match main UI */
    margin-bottom: 8px; /* Space between rows */
    border-radius: 8px; /* Slightly more rounded corners */
}

/* Wrapper for the icon and title to keep them together */
.preview-task-content-wrapper {
    display: flex;
    align-items: center;
    gap: 10px; /* Space between the icon and the title text */
}

/* Style for the icon itself */
.preview-task-icon .svg-icon {
    width: 18px; /* Match icon size from main UI */
    height: 18px;
    stroke-width: 2.25; /* A good balance of boldness */
}

/* Style for the title text (e.g., "Overdue") */
.preview-task-title {
    font-size: var(--task-heading-font-size);
}

.theme-list-item:focus {
    border: 1px solid var(--interactive-accent);
    box-shadow: 0 0 5px var(--interactive-accent);
    outline: none; /* Prevents the default browser outline */
}

/* 1. Main container for the entire Themes tab layout */
.theme-settings-container {
    display: flex;
    gap: 20px;
    align-items: flex-start; /* CRITICAL: Aligns the tops of both columns */
}

/* 2. Left column containing the list of themes */
.theme-list-container {
    flex: 1;
}

/* 3. Right column containing the live preview */
.theme-preview-wrapper {
    flex: 2;
    position: sticky; /* Keeps preview visible on scroll */
    top: 20px;
    padding-left: 20px;
    border-left: 1px solid var(--background-modifier-border);
}

/* 4. Align the titles of both columns */
.theme-list-container > h3,
.theme-preview-wrapper > h3 {
    margin-top: 0;
    margin-bottom: 12px;
    font-weight: 600;
}

/* 5. Fix the large gap above the "October 2025" title */
.theme-preview-pane .preview-section-header {
    margin-top: 0 !important;
    padding-top: 0 !important;
}
.theme-preview-pane .preview-section-header h3 {
    margin-top: 0 !important;
}

/* Reduce the space below the task list wrapper in the preview */
.theme-preview-pane .preview-section-wrapper {
  margin-bottom: 8px; /* Default is likely 20px or more */
}

/* Reduce the space above the "DOT COLOR KEY" title */
.theme-preview-pane .preview-dot-key-container {
  margin-top: 10px; /* Default is likely 15px or more */
}

/* 6. General wrapper for sections inside the preview */
.preview-section-wrapper {
    margin-bottom: 15px;
    padding: 10px;
    border-radius: 6px;
}

/* 7. NEW: Two-column layout for the dot color key */
.preview-dot-key-container {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* Creates two equal columns */
    gap: 0 20px; /* 0px vertical gap, 20px horizontal gap */
    margin-top: 15px;
    padding-top: 0;
    border-top: none !important; /* Explicitly removes the horizontal line */
}

.preview-dot-key-container h5 {
    grid-column: 1 / -1; /* Makes the "DOT COLOR KEY" title span both columns */
    margin-bottom: 10px;
}

/* Styling for the list of theme files */
.theme-list-item {
    padding: 8px 12px;
    border-radius: 6px;
    cursor: pointer;
    margin-bottom: 4px;
    transition: background-color 0.2s ease, color 0.2s ease;
}

.theme-list-item:hover {
    background-color: var(--background-modifier-hover);
}

.theme-list-item.is-active {
    background-color: var(--interactive-accent);
    color: var(--text-on-accent);
    font-weight: 600;
}

/* --- Theme Preview --- */
/* Tab buttons for light/dark mode */
.theme-preview-tabs { display: flex; gap: 8px; margin-bottom: 12px; }
.theme-preview-tabs button { padding: 6px 12px; border: none; border-radius: var(--radius-m); cursor: pointer; background-color: var(--background-modifier-hover); color: var(--text-muted); transition: background-color 0.2s ease; }
.theme-preview-tabs button.is-active { background-color: var(--interactive-accent); color: var(--text-on-accent); font-weight: 600; }

/* Main preview pane layout */
.theme-preview-pane { padding: 15px; border-radius: 8px; border: 1px solid var(--background-modifier-border); }

/* Inner wrappers for sections */
.preview-section-wrapper { padding: 10px; border-radius: 6px; margin-bottom: 20px; }

/* Calendar layout styles */
/*
.preview-calendar-grid { width: 100%; border-collapse: collapse; font-size: 11px; }
.preview-calendar-grid th { font-weight: 600; padding-bottom: 8px; }
.preview-calendar-grid td { vertical-align: middle; text-align: center; }
.preview-day-content { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 4px; padding: 4px 0; border-radius: 6px; height: 45px; }
.preview-day-number { display: flex; align-items: center; justify-content: center; font-weight: 500; font-size: 13px; }
.preview-day-number.today { width: 2.2em; height: 2.2em; border-radius: 50%; }
.preview-dots-container { display: flex; gap: 3px; height: 4px; }
.preview-dot { width: 4px; height: 4px; border-radius: 50%; }
*/
/* Base styles for the preview grid container */
.preview-calendar-grid {
    width: 100%;
    border-collapse: collapse;
    font-size: 11px;
}
.preview-calendar-grid th {
    font-weight: 600;
    padding-bottom: 8px;
}
.preview-calendar-grid td {
    vertical-align: middle;
    text-align: center;
    height: 45px; /* Give the cell a fixed height */
}

/* 
  1. The Preview Day Content Wrapper
  This is now the positioning anchor, just like the main calendar.
*/
.preview-day-content {
    position: relative;
    width: 100%;
    height: 100%;
}

/* 
  2. The Preview Day Number
  Now uses absolute positioning to guarantee it is centered.
*/
.preview-day-number {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1; /* Sits above the highlight */
    
    font-weight: 500;
    font-size: 13px;
}

/* Style for the "today" highlight in the preview */
.preview-day-number.today {
    width: 2.2em;
    height: 2.2em;
    border-radius: 50%; /* Or 6px for a squircle */
    
    /* Use flex to center the number text INSIDE the highlight */
    display: flex;
    align-items: center;
    justify-content: center;
}

/* 
  3. The Preview Dots Container
  Now uses absolute positioning for perfect alignment.
*/
.preview-dots-container {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    
    /* 
      This 'top' value positions the dots vertically. 
      It should correspond to the 'normal' layout setting for a good preview.
    */
    top: 30px; 
    
    display: flex;
    gap: 3px;
    z-index: 2; /* Sits on top of the highlight */
}

/* Style for the individual dots in the preview */
.preview-dot {
    width: 4px;
    height: 4px;
    border-radius: 50%;
}

/* Tasks layout styles */
.preview-task-group { display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; border-radius: 6px; font-weight: 500; margin-bottom: 6px; }

.is-mobile .period-calendar-table tbody td.first-date-column::before {
    display: none;
}
.is-mobile .period-calendar-table tbody tr {
    height: auto;
}

.applied-theme-indicator .setting-item-name {
    color: var(--text-normal) !important;
}

.applied-theme-indicator .setting-item-description {
    color: var(--text-muted) !important;
}
.preview-dot-key-container {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* Creates two equal columns */
    gap: 0 20px; /* 0px vertical gap, 20px horizontal gap */
    margin-top: 15px;
    padding-top: 0;
    border-top: none !important; /* Ensures the line is removed */
}
.preview-dot-key-container h5 {
    font-weight: bold;
    margin-bottom: 10px;
}

.preview-dot-key-item {
    display: flex;
    align-items: center;
    margin-bottom: 5px;
}

.preview-dot-key-swatch {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    margin-right: 8px;
    flex-shrink: 0;
}

/* Organizes the header into a flexible container */
.popup-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* Creates a vertical stack for the title and path */
.popup-title-container {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden; /* Prevents long text from breaking the layout */
    margin-right: 10px; /* Adds space between the text and the close button */
}

/* Styles the new path element */
.popup-header-path {
    font-size: 0.8em; /* Smaller font for the path */
    color: var(--text-muted); /* Uses the theme's muted text color */
    white-space: nowrap; /* Prevents the path from wrapping */
    overflow: hidden;
    text-overflow: ellipsis; /* Adds "..." to very long paths */
}

/* In the File Info section, allow the path text to wrap */
.other-notes-popup-item .note-title-path-wrapper .note-path {
    white-space: normal; /* Allows text to wrap */
    word-break: break-all; /* Breaks long paths without spaces */
}

/* Styles the container for the 'No backlinks' message and delete button */
.other-notes-popup-item-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    background-color: var(--background-secondary-alt); /* A subtle background to distinguish it */
    border-radius: 6px;
    margin-top: 4px;
}

/*
 * Styles the "Delete File" button to be less intrusive.
 * It uses theme variables for a consistent look and feel.
 */
.other-notes-popup-item-actions button.mod-danger {
    background-color: var(--background-modifier-hover);
    border: 1px solid var(--background-modifier-border);
    color: var(--text-muted);
    font-size: 12px;
    padding: 4px 10px;
    border-radius: 5px;
    margin-left: 16px; /* Adds space between the message and the button */
    transition: all 0.2s ease-in-out;
}

/* Adds a more prominent style when hovering over the delete button */
.other-notes-popup-item-actions button.mod-danger:hover {
    background-color: var(--interactive-accent);
    color: var(--text-on-accent);
    border-color: var(--interactive-accent);
}

/*
 * Styles the wrapper for the icon and the "No backlinks" text.
 * This ensures the icon and text are aligned and spaced correctly.
 */
.other-notes-popup-item-actions > div {
    display: flex;
    align-items: center;
    gap: 8px; /* Adds space between the icon and the text */
    color: var(--text-muted); /* Uses a more subtle text color */
}

/* Ensures the full file path in the info section can wrap to multiple lines */
.other-notes-popup-item .note-title-path-wrapper .note-path {
    white-space: normal;
    word-break: break-all;
}

/* Standard clickable cursor for the file info section */
.other-notes-popup-item.is-clickable {
    cursor: pointer;
}

/* Disable hover and pointer for calendar events */
.other-notes-popup-item.is-calendar-event {
    cursor: default; /* Change from pointer to default cursor */
}

.other-notes-popup-item.is-calendar-event:hover {
    background-color: transparent; /* Prevent hover background change */
}

/* Keep hover for regular notes/assets */
.other-notes-popup-item:not(.is-calendar-event):hover {
    background-color: var(--background-modifier-hover);
}

.popup-asset-thumbnail {
    width: 22px;
    height: 22px;
    object-fit: cover;
    border-radius: 4px;
    margin-right: 8px; /* Adds space between thumbnail and text */
}

/* Adjust the main item layout to use flexbox */
.other-notes-popup-item {
    display: flex;
    align-items: center;
}

/* --- Mobile-Specific Popup Styles --- */
@media only screen and (max-width: 600px) {

    .other-notes-popup {
        /* 
         * Sizing:
         * - Make it 90% of the viewport width.
         * - Unset the fixed min-width from the desktop rule.
         * - Ensure it doesn't get wider than 450px.
        */
        width: 90vw !important;
        min-width: unset !important;
        max-width: 450px !important;
        
        /* Positioning: Fix it to the bottom of the screen. */
        position: fixed !important;
        bottom: calc(8px + env(safe-area-inset-bottom)) !important;
        left: 50% !important;
        transform: translateX(-50%) !important;
        
        /* Appearance: Style it like a modern mobile bottom sheet. */
        max-height: 50vh !important; /* Prevents it from covering the whole screen. */
        border-radius: 12px 12px 12px 12px !important; /* Rounds only the top corners. */
        box-shadow: 0 -4px 16px rgba(0,0,0,0.2) !important; /* Shadow to lift it off the page. */
        
        /* Reset any desktop positioning styles. */
        top: auto !important; 
        margin: 0 !important;
    }

    /* Ensure the scrollable content area has appropriate padding. */
    .popup-content-wrapper {
        padding: 8px 12px !important;
    }
}

.other-notes-popup.is-mobile-popup {
    border-radius: 12px 12px 0 0; /* Rounded top corners */
    box-shadow: 0 -4px 16px rgba(0,0,0,0.2); /* Shadow at the top */
    border-top: 1px solid var(--background-modifier-border);
}

/* --- Popup Actions --- */
.popup-actions-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 4px 8px;
    margin-top: 4px;
    border-top: 1px solid var(--background-modifier-border);
    background-color: transparent !important;
}

.popup-info-message {
    display: flex;
    align-items: center;
    gap: 8px; /* Space between icon and text */
    font-size: 12px;
    color: var(--text-muted);
    /* Ensure it also has no background */
    background-color: transparent !important;
}

.other-notes-popup-item {
    background-color: transparent;
}

/* Style for the icon button itself */
.popup-action-icon-btn {
    cursor: pointer;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: background-color 0.2s ease;
}

.popup-action-icon-btn .svg-icon {
    width: 16px;
    height: 16px;
    color: var(--text-muted);
}

.popup-action-icon-btn:hover {
    background-color: var(--background-modifier-hover);
}

/* Specific danger state for delete */
.popup-action-icon-btn.mod-danger:hover {
    background-color: var(--color-red);
}

.popup-action-icon-btn.mod-danger:hover .svg-icon {
    color: var(--text-on-accent);
}

/* Style the header when reorder mode is active to give user feedback */
.reorder-mode-active .note-group-header-content {
    background-color: var(--interactive-accent);
    color: var(--text-on-accent);
    border-radius: 5px;
    transition: background-color 0.3s ease;
}

/* By default, hide the drag handles on all note rows */
.note-row .drag-handle {
    display: none;
}

/* Only show the drag handle when the container is in reorder mode */
.reorder-mode-active .note-row .drag-handle {
    display: flex;
}


/* --- Main Tab Scroller --- */
.pm-tab-content {
    flex: 1 1 auto;
    min-height: 0;
    overflow-y: auto; /* Enables vertical scrolling when content overflows */
}

/* --- Base Widget Container --- */
/* Defines the appearance and INTERNAL spacing of all widgets */
.pm-widget-container {
    background-color: var(--background-secondary);
    border: 1px solid var(--background-modifier-border);
    border-radius: 12px;
    padding: 12px;
    display: flex;
    flex-direction: column;
    gap: 12px; /* Correct internal gap for elements inside a widget */
}

/* --- Main Dashboard Grid Layout --- */
/* This is the master grid that positions all widgets */
.pm-dashboard-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px; /* Correct external gap BETWEEN widgets */
    padding: 4px;
}

/* --- Grid Item Sizing --- */
/* This is the key rule: It makes any widget that is NOT a half-width summary widget span the full two columns. */
.pm-dashboard-grid > .pm-widget-container:not(.is-summary-widget) {
    grid-column: span 2;
}

/* --- Widget Header --- */
.pm-widget-container h3 {
    margin: 0 0 8px 0;
    font-size: 0.8em;
    font-weight: bold;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* Overdue Task Styling */
.pm-progress-segment.overdue {
    background-color: var(--task-color-overdue);
}
.legend-color-box.overdue {
    background-color: var(--task-color-overdue);
}

/* Heatmap Widget Styles */
.pm-dashboard-grid .heatmap-container {
    display: flex;
    gap: 5px;
    overflow-x: auto;
    scrollbar-width: none;
    -ms-overflow-style: none;
}
.pm-dashboard-grid .heatmap-container::-webkit-scrollbar {
    display: none;
}
.pm-dashboard-grid .heatmap-day-labels {
    position: sticky;
    left: 0;
    z-index: 1;
    background-color: var(--background-secondary);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 24px 8px 4px 0;
    font-size: 11px;
    color: var(--text-muted);
}
.pm-dashboard-grid .heatmap-day-labels span {
    line-height: 1;
}
.pm-dashboard-grid .heatmap-grid {
    display: grid;
    grid-auto-flow: column;
    grid-template-rows: auto repeat(7, 1fr);
    grid-auto-columns: minmax(14px, 1fr);
    gap: 4px;
}
.pm-dashboard-grid .heatmap-month-label {
    white-space: nowrap;
    font-size: 12px;
    color: var(--text-muted);
    align-self: end;
}
.pm-dashboard-grid .heatmap-cell {
    aspect-ratio: 1 / 1;
    border-radius: 3px;
    background-color: var(--background-modifier-border);
}
.pm-dashboard-grid .heatmap-cell.level-1 { background-color: #4A271E; }
.pm-dashboard-grid .heatmap-cell.level-2 { background-color: #D35400; }
.pm-dashboard-grid .heatmap-cell.level-3 { background-color: #F39C12; }
.pm-dashboard-grid .heatmap-cell.level-4 { background-color: #FFB74D; }

/* Widget Header with Toggle */
.pm-widget-header {
    display: flex;
    justify-content: space-between; 
    align-items: center;
    width: 100%;
}

/* Default state for the total count - no pointer */
.heatmap-total-count {
    cursor: default !important;
    text-decoration: none !important;
    font-size: 0.9em;
    font-weight: normal;
    color: var(--text-muted);
}

/* This rule ONLY applies when a link exists, adding the hand pointer and underline */
.heatmap-total-count.is-clickable {
    cursor: pointer !important;
    text-decoration: underline !important;
    text-decoration-style: dotted !important;
    text-underline-offset: 3px;
}

/* Optional: Add a hover effect only when it's clickable */
.heatmap-total-count.is-clickable:hover {
    color: var(--text-accent);
}

/* Change cursor to a hand pointer for interactive heatmap cells */
.heatmap-cell.is-interactive:hover {
    cursor: pointer;
}

/* Task Bar Chart Widgets */
.pm-bar-chart-widget {
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: center;
    margin-bottom: 12px;
}
.pm-bar-label {
    grid-column: 1;
    font-size: 0.9em;
    font-weight: 500;
}
.pm-bar-display-value {
    grid-column: 2;
    justify-self: end;
    font-size: 0.9em;
    font-weight: 500;
    color: var(--text-muted);
}
.pm-bar-track {
    grid-column: 1 / 3;
    grid-row: 2;
    height: 8px;
    background-color: var(--background-modifier-border);
    border-radius: 4px;
    overflow: hidden;
    margin-top: 4px;
}
.pm-bar-fill {
    height: 100%;
    border-radius: 4px;
    transition: width 0.5s ease-in-out;
}

/* Dashboard Heatmap Highlights */
.heatmap-cell.heatmap-today-cell {
    border: 1px solid var(--interactive-accent);
    border-radius: 2px;
}
.heatmap-cell.heatmap-current-week-cell {
    background-color: rgba(128, 128, 128, 0.1) !important;
    border-radius: 2px;
}
body.theme-dark .heatmap-cell.heatmap-current-week-cell {
    background-color: rgba(255, 255, 255, 0.05) !important;
}
.heatmap-day-labels .heatmap-today-label,
.heatmap-month-label.heatmap-current-month-label {
    color: var(--text-accent);
    font-weight: 700;
}

/* Progress Bar Widgets */
.pm-progress-bar {
    display: flex;
    width: 100%;
    height: 24px;
    border-radius: 6px;
    overflow: hidden;
    background-color: var(--background-modifier-border);
}
.pm-progress-segment {
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 600;
    font-size: 0.9em;
    transition: width 0.3s ease-in-out;
}
.pm-progress-segment.incomplete {
    background-color: var(--task-color-open);
}
.pm-progress-segment.completed {
    background-color: var(--task-color-completed);
}
.pm-progress-legend {
    display: flex;
    gap: 16px;
    margin-top: 8px;
    font-size: 0.8em;
}
.legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
}
.legend-color-box {
    width: 12px;
    height: 12px;
    border-radius: 3px;
}
.legend-color-box.incomplete {
    background-color: var(--task-color-open);
}
.legend-color-box.completed {
    background-color: var(--task-color-completed);
}

/* Draggable List for Settings */
.pm-draggable-widget-list {
    display: flex;
    flex-direction: column;
    gap: 5px;
}
.pm-draggable-widget-item {
    display: flex;
    align-items: center;
    background-color: var(--background-secondary);
    border: 1px solid var(--background-modifier-border);
    border-radius: var(--radius-m);
    user-select: none;
}
.pm-drag-handle {
    padding: 10px;
    cursor: grab;
    color: var(--text-faint);
}
.pm-setting-wrapper {
    flex-grow: 1;
}
.pm-setting-wrapper .setting-item {
    padding: 8px 0;
    border: none;
}
.pm-setting-wrapper .setting-item-info {
    width: 100%;
}
.pm-draggable-widget-item.dragging {
    opacity: 0.5;
    background: var(--background-modifier-accent);
}
.pm-drag-placeholder {
    background-color: var(--background-modifier-hover);
    border: 2px dashed var(--background-modifier-border);
    border-radius: var(--radius-m);
    margin: 5px 0;
}

.pm-progress-segment.is-interactive:hover {
    cursor: pointer;
    filter: brightness(1.2); /* Optional: makes the bar slightly brighter on hover */
}

.pm-heatmap-config-box {
  border: 1px solid var(--background-modifier-border);
  border-radius: var(--radius-l); /* Uses Obsidian's large radius for a nice card look */
  padding: 16px;
  margin-bottom: 20px;
  background-color: var(--background-secondary); /* A slightly different background to stand out */
}

/* Add a title style for inside the box */
.pm-heatmap-config-box h2 {
  margin-top: 10px;
  margin-bottom: 10px;
  padding-bottom: 10px;
  border-bottom: none;
}

.pm-folder-exclusion-container {
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid var(--background-modifier-border);
}

.pm-widget-header {
    cursor: default !important;
    display: flex;
    align-items: center;
    gap: 8px; /* Creates space between the icon and title */
}

.pm-widget-header .heatmap-collapse-icon,
.pm-widget-header h3,
.pm-widget-header .heatmap-total-count.is-clickable {
  cursor: pointer !important;
}

.pm-widget-header .heatmap-collapse-icon:hover,
.pm-widget-header h3:hover,
.pm-widget-header .heatmap-total-count.is-clickable:hover {
  color: var(--text-accent);
}

.heatmap-collapse-icon {
    cursor: pointer;
    color: var(--text-muted);
    transition: transform 0.2s ease-in-out;
    display: flex;
    align-items: center;
    margin-top: -8px; 
}

.pm-widget-container.is-collapsed .heatmap-collapse-icon {
    transform: rotate(-90deg);
}

.pm-widget-container.is-collapsed .heatmap-container {
    display: none;
}

.pm-widget-header h3 {
    cursor: pointer;
    /* THE FIX: Pushes the title to the left, leaving space on the right */
    margin-right: auto; 
}

/* --- New styles for 2-state summary widgets --- */
.pm-widget-container.is-summary-widget .pm-widget-header {
    display: flex;
    /* This is the key: it forces all items to align to their vertical centers. */
    align-items: center; 
    gap: 6px;
    cursor: pointer;
    margin-bottom: 4px;
}

.summary-toggle-icon {
    color: var(--text-muted);
    transition: transform 0.2s ease-in-out;
    /* We also make the icon a flex container to center the SVG within it */
    display: flex;
    align-items: center;
    justify-content: center;
    /* A fixed size helps maintain consistent spacing */
    width: 18px;
    height: 18px;
    margin-top: -8px;
}

.is-mini .pm-progress-legend {
    display: none;
}

.is-mini .summary-toggle-icon {
    transform: rotate(-90deg); /* Points Left */
}

.is-minimised .bar-and-legend-wrapper {
    display: none;
}

.is-minimised .summary-toggle-icon {
    transform: rotate(180deg); /* Points Up */
}

/* --- Styles for Collapsible Widgets --- */

.pm-widget-header {
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
}

.widget-toggle-icon {
    color: var(--text-muted);
    transition: transform 0.2s ease-in-out;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 18px;
    height: 18px;
    margin-top: -8px;
}

.is-collapsed .widget-content-wrapper {
    display: none;
}

.is-collapsed .widget-toggle-icon {
    transform: rotate(-90deg); /* Points left */
}

.pm-composite-bar-wrapper {
    margin-bottom: 8px;
}
.pm-composite-bar-label {
    font-size: 12px;
    font-weight: 500;
    margin-bottom: 4px;
    color: var(--text-muted);
}
.pm-widget-container.is-summary-widget {
    gap: 0px;
    min-height: 80px;
    justify-content: center;
}
.pm-widget-container.is-summary-widget .task-group-empty-message {
    /* Centers the 'No tasks' message perfectly in the middle of the widget */
    text-align: center;
    flex-grow: 1;
    display: flex;
    align-items: center;
    justify-content: center;
}

.pm-dashboard-grid {
    align-items: stretch;
}
.pm-widget-container.is-summary-widget.is-minimised {
    
    padding-bottom: 4px;
    gap: 0;
}

.pm-widget-container.is-summary-widget.is-minimised .pm-widget-header {
    margin-bottom: 0;
}

.pm-widget-container.is-collapsed {
    padding-bottom: 4px;
}

.pm-widget-container.is-collapsed .pm-widget-header {
    margin-bottom: 0;
}

.pm-progress-segment.in-progress {
    background-color: var(--task-color-inprogress);
}
.legend-color-box.in-progress {
    background-color: var(--task-color-inprogress);
}

.pm-progress-segment.no-due {
    background-color: var(--background-modifier-border);
    color: var(--text-muted);
}
.legend-color-box.no-due {
    background-color: var(--background-modifier-border);
}


/* --- Task Group Collapse Styles --- */
.task-row {
    display: flex;
    align-items: center;
    padding: 12px 0 8px 0;  /* Increase from 4px to 10px for top/bottom padding */
}

.task-group-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
  user-select: none;
  font-size: var(--task-heading-font-size);
}
.task-group-header-content {
  display: flex;
  align-items: center;
  gap: 6px;
}
.task-group-collapse-icon .svg-icon {
  transition: transform 0.3s ease-in-out;
}
.task-group-container.is-collapsed .task-group-collapse-icon .svg-icon {
  transform: rotate(-180deg);
}
.task-list-wrapper {
  transition: height 0.35s ease-in-out, opacity 0.35s ease-in-out;
  overflow: hidden;
  opacity: 1;
  height: var(--task-list-height, auto);
}

.task-group-container.is-collapsed .task-list-wrapper {
  height: 0;
  opacity: 0;
}

.task-group-empty-message {
  font-style: italic;
  color: var(--text-muted);
  padding: 4px 0;
  font-size: 0.9em;
}
.task-row .task-text {
  flex-grow: 1;
  font-size: var(--task-text-font-size);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.task-row .task-text,
.other-notes-popup-item .task-text {
    flex: 1;             /* Modern shorthand for flex-grow, shrink, basis */
    display: flex;       /* CRITICAL: Makes this a flex container */
    align-items: center; /* Vertically aligns the text nicely */
    min-width: 0;
    line-height: 1.7;
}

/* Add this rule to handle the paragraph inside */
.other-notes-popup-item .task-text > p {
    width: 100%;
    margin: 0;
}


.other-notes-popup-item .task-checkbox-symbol {
    margin-top: 4px !important;  
    align-self: flex-start;     
}

.task-text.completed {
    text-decoration: line-through;
    opacity: 0.6;
    color: var(--text-muted);
}
    
.tasks-container.show-full-text .task-row {
  align-items: flex-start;
}
.tasks-container.show-full-text .task-text {
  white-space: normal;
  word-break: break-word;
}
.tasks-container.show-full-text .task-row .task-checkbox {
  margin-top: 2px;
}

/* Container for task checkbox */
.task-checkbox-symbol {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 1.4em;
    height: 1.4em;
    position: relative;
    flex-shrink: 0;
    margin: 2px 0 0 0;
    padding: 0;
}

/* Hide everything except the checkbox */
.task-checkbox-symbol .task-list-item {
    list-style: none;
    padding: 0;
    margin: 0;
    display: contents;
    align-items: center;
    justify-content: center;
}

.task-checkbox-symbol li.task-list-item {
    all: unset;
    display: contents; /* Makes it not generate a box */
    margin: 0 !important;
    padding: 0 !important;
    list-style: none;
}

/* Hide the text content after the checkbox */
.task-checkbox-symbol .task-list-item-checkbox ~ * {
    display: none;
}

.task-checkbox-symbol .task-list-item-checkbox {
    margin: 0;
   
}
.asset-grid-preview img {
    object-fit: contain !important;
}

.note-group-container {
  overflow: visible !important;
  max-height: none !important;
}

.asset-grid-preview img {
  object-fit: contain !important;
}
.pinned-notes-empty-message {
    padding: 24px;
    text-align: center;
    font-style: italic;
    color: var(--text-muted);
    font-size: 0.9em;
}

.pinned-notes-empty-message code {
    font-style: normal;
    font-size: 1.1em;
}
body.is-mobile .tabs-content-wrapper {
    padding-bottom: 0 !important;
}
`;

// === Helper Functions and Classes ===
/**
 * Parses an "rgba(r, g, b, a)" string into an object.
 * @param {string} rgbaString The input string.
 * @returns {{r: number, g: number, b: number, a: number} | null}
 */
function parseRgbaString(rgbaString) {
    if (!rgbaString) return null;
    const match = rgbaString.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);
    if (!match) return null;
    return {
        r: parseInt(match[1], 10),
        g: parseInt(match[2], 10),
        b: parseInt(match[3], 10),
        a: match[4] !== undefined ? parseFloat(match[4]) : 1,
    };
}

/**
 * Blends two RGBA color objects based on a mix factor.
 * @param {{r,g,b,a}} color1 The start color object.
 * @param {{r,g,b,a}} color2 The end color object.
 * @param {number} factor A value from 0 (100% color1) to 1 (100% color2).
 * @returns {string} The resulting "rgba(...)" string.
 */
function blendRgbaColors(color1, color2, factor) {
    const r = Math.round(color1.r * (1 - factor) + color2.r * factor);
    const g = Math.round(color1.g * (1 - factor) + color2.g * factor);
    const b = Math.round(color1.b * (1 - factor) + color2.b * factor);
    const a = (color1.a * (1 - factor) + color2.a * factor).toFixed(2);
    return `rgba(${r}, ${g}, ${b}, ${a})`;
}

/**
 * A reusable confirmation modal dialog.
 */
class ConfirmationModal extends Modal {
    constructor(app, title, message, onConfirm, confirmText = "Confirm") {
        super(app);
        this.title = title;
        this.message = message;
        this.onConfirm = onConfirm;
        this.confirmText = confirmText;
    }

    onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h1", { text: this.title });
        contentEl.createEl("p", { text: this.message });
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });

        buttonContainer.createEl("button", {
            text: this.confirmText,
            cls: "mod-cta",
        }).addEventListener("click", () => {
            this.close();
            this.onConfirm();
        });

        buttonContainer.createEl("button", {
            text: "Cancel",
        }).addEventListener("click", () => {
            this.close();
        });
    }

    onClose() {
        this.contentEl.empty();
    }
}

/* A modal dialog that presents multiple action choices to the user when creating a new daily note. */
class ActionChoiceModal extends Modal {
    constructor(app, title, message, buttons) {
        super(app);
        this.title = title;
        this.message = message;
        this.buttons = buttons;
    }

    onOpen() {
        const { contentEl } = this;
        contentEl.createEl('h2', { text: this.title });
        if (this.message) {
            contentEl.createEl('p', { text: this.message });
        }

        const buttonContainer = contentEl.createDiv({ cls: 'modal-button-container' });

        for (const buttonConfig of this.buttons) {
            const btn = buttonContainer.createEl('button', { text: buttonConfig.text });
            if (buttonConfig.cls) {
                btn.addClass(buttonConfig.cls);
            }
            btn.addEventListener('click', () => {
                this.close();
                if (buttonConfig.action) {
                    buttonConfig.action();
                }
            });
        }
    }

    onClose() {
        this.contentEl.empty();
    }
}

/**
 * Calculates the custom period and week number based on a given start date.
 * A year is divided into 13 periods of 4 weeks each.
 * @param {Date} date - The date to calculate for.
 * @param {string} startOfPeriodsOverride - The start date in "YYYY-MM-DD" format from settings.
 * @returns {{period: number, week: number, weekSinceStart: number}} An object with the period, week, and total weeks since start.
 */
function getPeriodWeek(date = new Date(), startOfPeriodsOverride) {
    const defaultStartString = "2025-03-02";
    let startString = startOfPeriodsOverride || defaultStartString;

    let startMoment = moment(startString, "YYYY-MM-DD", true);

    if (!startMoment.isValid()) {
        console.warn(
            `[Calendar Period Week Notes] Invalid "Start of Period 1" date format: "${startString}". ` +
            `It must be YYYY-MM-DD. Falling back to default date ${defaultStartString}.`
        );
        startMoment = moment(defaultStartString, "YYYY-MM-DD", true);
    }

    // Use moment's built-in diff method to correctly calculate the number of
    // calendar days. This automatically handles Daylight Saving Time and other offsets.
    const daysSinceStart = moment(date).startOf('day').diff(startMoment.startOf('day'), 'days');
    const weekNumber = Math.floor(daysSinceStart / 7);
    const periodIndex = Math.floor(weekNumber / 4);
    const period = ((periodIndex % 13) + 13) % 13 + 1;
    const week = ((weekNumber % 4) + 4) % 4 + 1;

    return { period, week, weekSinceStart: weekNumber + 1 };
}

/**
 * Parses a file's content to find all tasks and their metadata.
 * @param {TFile} file The file to parse.
 * @param {string} content The content of the file.
 * @returns {Array<object>} An array of structured task objects.
 */
function parseTasksFromFile(file, content) {
    const tasks = [];
    const lines = content.split('\n');

    const taskRegex = /^\s*(?:-|\d+\.)\s*\[(.)\]\s*(.*)/;
    const dueDateRegex = /📅\s*(\d{4}-\d{2}-\d{2})/;
    const completionDateRegex = /✅\s*(\d{4}-\d{2}-\d{2})/;
    const tagRegex = /#([a-zA-Z0-9_\-\/]+)/g;

    lines.forEach((line, index) => {
        const match = line.match(taskRegex);
        if (match) {
            const status = match[1];
            const text = match[2];
            const isCompleted = status.toLowerCase() === 'x';

            const dueDateMatch = text.match(dueDateRegex);
            const dueDate = dueDateMatch ? moment(dueDateMatch[1], "YYYY-MM-DD").toDate() : null;

            const completionDateMatch = text.match(completionDateRegex);
            const completionDate = completionDateMatch ? moment(completionDateMatch[1], "YYYY-MM-DD").toDate() : null;

            const tags = Array.from(text.matchAll(tagRegex)).map(m => m[1]);

            let displayText = text.trim();
            // Optionally clean up the display text
            if (!isCompleted) {
                displayText = displayText.replace(completionDateRegex, '').trim();
            }

            tasks.push({
                text: displayText,
                originalText: text, // Keep original text for modifications
                file,
                lineNumber: index,
                dueDate,
                tags,
                status,
                completionDate
            });
        }
    });
    return tasks;
}

// Utility wrappers around moment.js for consistent date handling.
function formatDate(date, format) { return moment(date).format(format); }
function formatMonthTitle(date, format) { return moment(date).format(format); }
function isSameDay(a, b) { return moment(a).isSame(b, 'day'); }

class ConfirmationModalWithStyles extends ConfirmationModal {
    onOpen() {
        super.onOpen();

        const { contentEl } = this;

        // Style the main content container
        contentEl.style.padding = '20px 24px';
        contentEl.style.textAlign = 'center';

        // Style the title using CSS variables
        const titleEl = contentEl.querySelector('h1, h2');
        if (titleEl) {
            titleEl.style.marginBottom = '16px';
            titleEl.style.fontSize = '1.3rem';
            // Use the primary text color variable
            titleEl.style.color = 'var(--text-normal)';
        }

        // Style the message paragraph using CSS variables
        const messageEl = contentEl.querySelector('p');
        if (messageEl) {
            messageEl.style.lineHeight = '1.6';
            messageEl.style.marginBottom = '24px';
            messageEl.style.fontSize = '1rem';
            // Use the muted text color variable for secondary text
            messageEl.style.color = 'var(--text-muted)';
        }

        // Style the button container
        const buttonContainer = contentEl.querySelector('.modal-button-container');
        if (buttonContainer) {
            buttonContainer.style.display = 'flex';
            buttonContainer.style.justifyContent = 'center';
            buttonContainer.style.gap = '12px';
        }

        // Style the primary confirmation button
        const confirmButton = contentEl.querySelector('.mod-cta');
        if (confirmButton) {
            confirmButton.style.fontWeight = '600';
        }
    }

}

/**
 * A custom input suggester for tags.
 */
class TagSuggest extends AbstractInputSuggest {
    constructor(app, inputEl, view) {
        super(app, inputEl);
        this.inputEl = inputEl;
        this.view = view;
        this.allTags = new Set();
    }

    getSuggestions(query) {
        this.refreshAllTags();

        // If the query is empty, show all tags, sorted alphabetically.
        if (!query) {
            return Array.from(this.allTags)
                .sort((a, b) => a.localeCompare(b, undefined, { sensitivity: 'base' }))
            //.slice(0, 20);
        }

        // Only proceed if query starts with '#'
        if (!query.startsWith('#')) {
            return [];
        }

        const searchTerm = query.substring(1).toLowerCase();
        return Array.from(this.allTags)
            .filter(tag => tag.toLowerCase().includes(searchTerm))
            .sort((a, b) => a.localeCompare(b, undefined, { sensitivity: 'base' }));
    }

    renderSuggestion(tag, el) {
        el.setText(tag);
    }

    selectSuggestion(tag) {
        const finalValue = `#${tag}`;
        this.setValue(finalValue);

        if (this.view.activeTab === 'tasks') {
            this.view.tasksSearchTerm = finalValue;
            this.view.populateTasks();
        } else if (this.view.activeTab === 'notes') {
            this.view.notesSearchTerm = finalValue;
            this.view.populateNotes();
        }

        // This will now work correctly
        this.inputEl.dispatchEvent(new Event('input', { bubbles: true }));
        this.close();
    }

    refreshAllTags() {
        this.allTags.clear();
        const settings = this.view.plugin.settings;

        if (this.view.activeTab === 'tasks') {
            // For tasks tab, extract tags only from tasks.
            const allTasks = Array.from(this.view.tasksByDate.values()).flat();
            for (const task of allTasks) {
                if (task.tags && task.tags.length > 0) {
                    task.tags.forEach(tag => this.allTags.add(tag));
                }
            }
            return; // Stop here for tasks
        }

        // For notes tab, determine which notes to scan and which tag to exclude
        let notesToScan;
        const pinTagToExclude = (this.view.activeTab === 'notes' && this.view.notesViewMode === 'pinned')
            ? (settings.pinTag || '').toLowerCase()
            : null;

        if (pinTagToExclude) {
            // Only scan pinned notes
            notesToScan = this.app.vault.getMarkdownFiles().filter(file => {
                const cache = this.app.metadataCache.getFileCache(file);
                if (!cache) return false;
                if (cache.tags?.some(tag => tag.tag.toLowerCase().includes(pinTagToExclude))) return true;
                const frontmatter = cache.frontmatter;
                if (frontmatter) {
                    for (const key in frontmatter) {
                        const value = frontmatter[key];
                        if (typeof value === 'string' && value.toLowerCase().includes(pinTagToExclude)) return true;
                        if (Array.isArray(value) && value.some(item => typeof item === 'string' && item.toLowerCase().includes(pinTagToExclude))) return true;
                    }
                }
                return false;
            });
        } else {
            // Scan all notes for recent notes mode
            notesToScan = this.app.vault.getMarkdownFiles();
        }

        // Extract tags from the determined set of notes
        for (const file of notesToScan) {
            const cache = this.app.metadataCache.getFileCache(file);
            if (!cache) continue;

            // Helper to add a tag if it's not the pin tag
            const addTag = (tag) => {
                const normalizedTag = tag.startsWith('#') ? tag.substring(1) : tag;
                if (pinTagToExclude && normalizedTag.toLowerCase() === pinTagToExclude) {
                    return; // Skip the pin tag
                }
                this.allTags.add(normalizedTag);
            };

            if (cache.tags) {
                for (const tagObj of cache.tags) {
                    addTag(tagObj.tag);
                }
            }
            if (cache.frontmatter && cache.frontmatter.tags) {
                const frontmatterTags = Array.isArray(cache.frontmatter.tags) ? cache.frontmatter.tags : [cache.frontmatter.tags];
                frontmatterTags.forEach(tag => {
                    if (typeof tag === 'string') addTag(tag);
                });
            }
            if (cache.frontmatter && cache.frontmatter.tag) {
                if (typeof cache.frontmatter.tag === 'string') addTag(cache.frontmatter.tag);
            }
        }
    }
}

/**
 * A custom input suggester for filter keywords.
 */
class FilterSuggest extends AbstractInputSuggest {
    constructor(app, inputEl, suggestionItems, onSelectCallback) {
        super(app, inputEl);
        this.inputEl = inputEl;
        this.suggestionItems = suggestionItems;
        this.onSelectCallback = onSelectCallback;
    }

    getSuggestions(query) {
        // If the query is empty, show all available suggestions (for focus/arrow-down).
        if (!query) {
            return this.suggestionItems;
        }
        const lowerCaseQuery = query.toLowerCase();
        return this.suggestionItems.filter(suggestion =>
            suggestion.toLowerCase().includes(lowerCaseQuery)
        );
    }

    renderSuggestion(value, el) {
        el.setText(value);
    }

    selectSuggestion(value) {
        this.setValue(value);
        this.onSelectCallback(value);
        // This will now work correctly
        this.inputEl.dispatchEvent(new Event('input', { bubbles: true }));
        this.close();
    }
}

/**
 * The main view class for the plugin, handling all rendering and user interaction.
 */
class PeriodMonthView extends ItemView {
        
    constructor(leaf, plugin) {
        super(leaf);
        this.plugin = plugin;
        this.themeChangeDebounceTimer = null;
        this.calendarHeaderRowEl = null;
        this.pinnedSortOrder = this.plugin.settings.pinnedNotesSortOrder;
        this.blurActiveInput = this.blurActiveInput.bind(this);
        this.dashboardContentEl = null;
        this.dashboardTaskDebounceTimer = null;
        this.dashboardCreationDebounceTimer = null;
        this.dashboardRefreshTimers = new Map();
        this.fileToHeatmapCache = new Map();
        this.resizeDebounceTimer = null;
        this.statusBarObserver = null;
    
        //pull down to fresh
        this.taskPullStartY = 0;
        this.taskPullDistance = 0;
        this.isTaskPulling = false;

        // --- State Management ---
        this.displayedMonth = new Date(); // The month currently shown in the calendar.
        this.isVerticalView = false;      // Toggles between single-month and vertical scroll view.
        this.isPopupLocked = false;       // Tracks if popups are globally disabled
        this.isCalendarCollapsed = false; // Toggles the visibility of the calendar grid.
        this.calendarWasCollapsedForEditing = false;
        this.isCollapseTogglePressed = false;
        this.isScratchpadPreview = false; // Toggles scratchpad between edit and preview mode.
        this.activeTab = null;            // Tracks the currently selected tab ('scratch', 'notes', etc.).
        this.isProgrammaticScroll = false; // Prevents scroll event loops during programmatic scrolling.
        this.isDraggingNote = false;      // Tracks if a note is currently being dragged for reordering.
        this.isMouseDown = false;         // Tracks if the mouse button is currently pressed.
        this.isReorderModeActive = false;
        this.dashboardViewMode = this.plugin.settings.defaultDashboardView || 'creation';
        this.taskBarChartMode = this.plugin.settings.taskBarChartDefaultMode;

        // --- Search and Data States ---
        this.notesViewMode = this.plugin.settings.notesViewMode;
        this.dashboardSearchTerm = "";
        this.notesSearchTerm = "";
        this.tasksSearchTerm = "";
        this.scratchpadSearchTerm = "";
        this.assetsSearchTerm = "";
        this.collapsedNoteGroups = this.plugin.settings.collapsedNoteGroups || {};
        this.collapsedTaskGroups = this.plugin.settings.collapsedTaskGroups || {};
        this.collapsedAssetGroups = this.plugin.settings.collapsedAssetGroups || {};

        // --- Caching and Data Maps ---
        // These maps store pre-processed data to avoid re-scanning the vault on every render.
        this.noteText = "";
        this.allTasks = [];
        this.createdNotesMap = new Map();
        this.modifiedNotesMap = new Map();
        this.assetCreationMap = new Map();
        this.allCreatedNotesMap = new Map();
        this.tasksByDate = new Map();
        this.icsEventsByDate = new Map();
        this.processedEventSignatures = new Set();
        this.taskCache = new Map(); // Caches task content of files to detect changes.
        this.fileToTaskDates = new Map(); // Tracks which dates a file has tasks for. <filePath, Set<dateKey>>
        this.isAssetsGridView = this.plugin.settings.assetsDefaultView === 'grid';
        this.unusedAssetPathsCache = new Set();
        this.isUnusedAssetCacheValid = false;

        // --- UI and Event Handling ---
        this.todayBtn = null;
        this.scratchWrapperEl = null;
        this.scratchpadViewToggleBtn = null;
        this.hoverTimeout = null;
        this.hideTimeout = null;
        this.popupEl = null;
        this.taskRefreshDebounceTimer = null;
        this.notesRefreshDebounceTimer = null;
        this.calendarRefreshDebounceTimer = null;
        this.titleUpdateTimeout = null;
        this.existingWeeklyNotes = new Set();
        this.dailyRefreshTimeout = null; 
        this.themeObserver = null;
        this.lastKnownToday = new Date();
        this.scratchpadFrontmatter = '';

        // --- Mobile Keyboard Handling ---
        this.isEditingMobile = false;

        // Initialize a MutationObserver to watch for theme changes.
        this.themeObserver = new MutationObserver(() => {
            // Debounce the re-render to avoid multiple calls during theme switching.
            if (this.themeChangeDebounceTimer) {
                clearTimeout(this.themeChangeDebounceTimer);
            }
            this.themeChangeDebounceTimer = setTimeout(() => {
                // If the calendar grid exists, re-render it to apply new theme colors.
                if (this.calendarBodyEl) {
                    this.renderCalendar();
                }
            }, 100); // A 100ms delay is usually sufficient.
        });

        // Start observing the `class` attribute on the document body.
        this.themeObserver.observe(document.body, {
            attributes: true,
            attributeFilter: ['class']
        });

        this.registerDomEvent(document, 'mouseup', () => {
            // Always reset the mousedown flag.
            if (this.isMouseDown) {
                this.isMouseDown = false;
            }
            // Also, critically, reset the dragging flag as a safety net.
            // This prevents the flag from getting stuck if dragend doesn't fire.
            if (this.isDraggingNote) {
                this.isDraggingNote = false;
            }
        });

        this.registerDomEvent(window, 'resize', () => {
            // Clear any existing timer to debounce the event
            if (this.resizeDebounceTimer) {
                clearTimeout(this.resizeDebounceTimer);
            }
            
            // Set a new timer to run the update after a short delay
            this.resizeDebounceTimer = window.setTimeout(() => {
                // Check if the title element exists and then re-render it
                if (this.monthNameEl) {
                    this.updateMonthTitle();
                }
            }, 100); // A 100ms delay is usually sufficient
        });
    }

    /**
     * Renders the task checkbox using native Obsidian task list markup
     * that inherits theme styling.
     * @param {HTMLElement} container The container for the checkbox.
     * @param {object} task The task object containing status information.
     */
    async _renderTaskSymbol(checkboxEl, task) {
        checkboxEl.empty();
        checkboxEl.className = 'task-checkbox-symbol';

        const status = task.status;

        // Create a minimal markdown string with the task
        const markdownText = `- [${status}] `;

        // Use MarkdownRenderer to render it - this will inherit ALL theme styling
        await MarkdownRenderer.render(
            this.app,
            markdownText,
            checkboxEl,
            task.file.path,
            this
        );

        // Find the checkbox that was rendered
        const checkbox = checkboxEl.querySelector('input[type="checkbox"]');
        if (checkbox) {
            // REMOVE the disabled attribute to allow clicks
            checkbox.disabled = false;

            // Add click handler to toggle task status
            checkbox.addEventListener('click', async (e) => {
                // CRITICAL: Prevent the default checkbox toggle behavior
                e.preventDefault();
                e.stopPropagation();

                // Disable the checkbox during the update to prevent double-clicks
                checkbox.disabled = true;

                // Toggle the task completion in the file
                await this.toggleTaskCompletion(task);

                // The file watcher will automatically refresh the view
                // and re-enable the checkbox when renderTaskSymbol is called again
            });
        }
    }

    async buildHeatmapFileCache() {
        this.fileToHeatmapCache.clear();
        const allFiles = this.app.vault.getFiles();

        // Loop through every file and check it against every heatmap config
        allFiles.forEach(file => {
            const matchingHeatmaps = new Set();
            this.plugin.settings.customHeatmaps.forEach((config, index) => {
                if (this._matchesHeatmapRule(file, config)) {
                    matchingHeatmaps.add(index);
                }
            });

            if (matchingHeatmaps.size > 0) {
                this.fileToHeatmapCache.set(file.path, matchingHeatmaps);
            }
        });
    }

    async hasUnlinkedAssets() {
        if (!this.plugin.settings.showUnusedAssetsIndicator) {
            return false;
        }
        // Use the cache if it's valid
        if (!this.isUnusedAssetCacheValid) {
            this.unusedAssetPathsCache = await this.getUnusedAssetPaths();
            this.isUnusedAssetCacheValid = true;
        }
        return this.unusedAssetPathsCache && this.unusedAssetPathsCache.size > 0;
    }

    handleKeyDown(event) {
        // Check if the pressed key is 'Escape' and if the vertical view is active.
        if (event.key === 'Escape' && this.isVerticalView) {
            // Prevent the default 'Escape' key behavior (like closing modals).
            event.preventDefault();

            // Set the state back to the main calendar grid view.
            this.isVerticalView = false;

            // Re-render the view to display the grid.
            this.render();
        }
    }

    blurActiveInput() {
        setTimeout(() => {
            const activeEl = document.activeElement;

            // Check if it's an element that can be blurred before calling the method
            if (activeEl instanceof HTMLElement && typeof activeEl.blur === 'function') {
                activeEl.blur();
            }
        }, 0);
    }

    /**
     * The single source of truth for collapsing or expanding the calendar view.
     * @param {boolean} shouldBeCollapsed - The desired state. True to collapse, false to expand.
     */
    toggleCalendar(shouldBeCollapsed) {
        // If the UI is already in the desired state, do nothing.
        if (this.isCalendarCollapsed === shouldBeCollapsed) {
            return;
        }

        this.isCalendarCollapsed = shouldBeCollapsed;

        // Toggle the main CSS class that controls the collapse animation.
        // The CSS will automatically handle rotating the chevron icon.
        if (this.containerEl && this.containerEl.firstElementChild) {
            this.containerEl.firstElementChild.classList.toggle('calendar-collapsed', shouldBeCollapsed);
        }
    }

    async refreshWithNewSettings(newSettings) {
        this.plugin.settings = newSettings;
        await this.populateNotes();
    }

    updateDynamicPadding() {
        if (Platform.isMobile) return; // Don't run this logic on mobile

        const statusBar = document.querySelector('.status-bar');
        const contentWrapper = this.containerEl.querySelector('.tabs-content-wrapper');

        if (statusBar && contentWrapper) {
            const statusBarHeight = statusBar.offsetHeight;
            contentWrapper.style.paddingBottom = `${statusBarHeight}px`;
        }
    }

    renderTaskSummaryWidget(parent, title, incompleteTasks, completedTasks, overdueTasks = [], inProgressTasks = [], noDueTasks = [], widgetKey) {
    
        const widgetContainer = parent.createDiv({ cls: 'pm-widget-container is-summary-widget' });
        let currentState = this.plugin.settings.smallWidgetStates[widgetKey] || 'full';

        // --- UI Elements (Your code, unchanged) ---
        const header = widgetContainer.createDiv({ cls: 'pm-widget-header' });
        const toggleIcon = header.createDiv({ cls: 'summary-toggle-icon' });
        header.createEl('h3', { text: title });

        // --- Core Rendering Logic (MODIFIED) ---
        const totalTasks = (incompleteTasks?.length || 0) + (completedTasks?.length || 0) + (overdueTasks?.length || 0) + (inProgressTasks?.length || 0) + (noDueTasks?.length || 0);
        const isEmpty = totalTasks === 0;

        // --- UI Update and Click Handlers (Your code, unchanged) ---
        const updateView = () => {
            widgetContainer.removeClasses(['is-full', 'is-mini']);
            widgetContainer.addClass(`is-${currentState}`);
            setIcon(toggleIcon, 'chevron-down');

            if (isEmpty && currentState === 'full') {
                widgetContainer.style.minHeight = '85px';
                widgetContainer.style.display = 'flex';
                widgetContainer.style.justifyContent = 'center';
                widgetContainer.style.alignItems = 'center';
            } else {
                widgetContainer.style.minHeight = '';
                widgetContainer.style.display = '';
                widgetContainer.style.justifyContent = '';
                widgetContainer.style.alignItems = '';
            }
        };

        if (isEmpty) {
            widgetContainer.createDiv({ text: 'No tasks in this period.', cls: 'task-group-empty-message' });
        } else {
            const barAndLegendWrapper = widgetContainer.createDiv({ cls: 'bar-and-legend-wrapper' });
            const progressBar = barAndLegendWrapper.createDiv({ cls: 'pm-progress-bar' });
            const legend = barAndLegendWrapper.createDiv({ cls: 'pm-progress-legend' });

            // --- setupSegment function (MODIFIED TO ADD COLORS) ---
            const setupSegment = (tasks, type) => {
                if (!tasks || tasks.length === 0) return;

                const segment = progressBar.createDiv({
                    cls: `pm-progress-segment ${type}`,
                    text: tasks.length,
                });
                segment.style.width = `${(tasks.length / totalTasks) * 100}%`;
                segment.addClass('is-interactive');

                // --- THIS IS THE NEW COLOR LOGIC ---
                let bgColor = '';
                switch(type) {
                    case 'overdue':
                        bgColor = this.plugin.settings.taskStatusColorOverdue;
                        break;
                    case 'in-progress':
                        bgColor = this.plugin.settings.taskStatusColorInProgress;
                        break;
                    case 'incomplete':
                        bgColor = this.plugin.settings.taskStatusColorOpen;
                        break;
                    case 'completed':
                        bgColor = this.plugin.settings.taskStatusColorCompleted;
                        break;
                    case 'no-due':
                        // Using a default grey for no-due as it may not be in settings
                        bgColor = 'rgba(158, 158, 158, 0.5)'; 
                        break;
                }
                if (bgColor) {
                    segment.style.backgroundColor = bgColor;
                }
                // --- END OF NEW COLOR LOGIC ---

                // Your mouseenter logic, unchanged
                segment.addEventListener('mouseenter', () => {
                    if (this.isPopupLocked) return;
                    clearTimeout(this.hideTimeout);
                    this.hideFilePopup();

                    const isCompleted = type === 'completed';
                    const isOverdue = type === 'overdue';
                    const isInProgress = type === 'in-progress';
                    const isNoDue = type === 'no-due';

                    let popupTitleText = 'To Do';
                    if (isCompleted) {
                        popupTitleText = 'Done';
                    } else if (isOverdue) {
                        popupTitleText = 'Overdue';
                    } else if (isInProgress) {
                        popupTitleText = 'In Progress';
                    } else if (isNoDue) {
                        popupTitleText = 'No Due Date';
                    } else if (widgetKey === 'futureNoDue' && type === 'incomplete') {
                        popupTitleText = 'Future';
                    }

                    const popupTitle = `${title} - ${popupTitleText}`;

                    this.hoverTimeout = setTimeout(() => {
                        this.showFilePopup(segment, { tasks: tasks }, popupTitle);
                    }, this.plugin.settings.otherNoteHoverDelay);
                });

                // Your mouseleave logic, unchanged
                segment.addEventListener('mouseleave', () => {
                    clearTimeout(this.hoverTimeout);
                    this.hideTimeout = setTimeout(() => this.hideFilePopup(), this.plugin.settings.popupHideDelay);
                });

                // Your legend logic, unchanged
                let legendText = 'To Do';
                if (widgetKey === 'futureNoDue' && type === 'incomplete') {
                    legendText = 'Future';
                } else if (type === 'completed') {
                    legendText = 'Done';
                } else if (type === 'overdue') {
                    legendText = 'Overdue';
                } else if (type === 'in-progress') {
                    legendText = 'In Progress';
                } else if (type === 'no-due') {
                    legendText = 'No Due Date';
                }

                const legendItem = legend.createDiv({ cls: 'legend-item' });
                // This sets the legend box color via CSS, but the new logic above sets the bar color
                const legendColorBox = legendItem.createDiv({ cls: `legend-color-box ${type}` });
                if (bgColor) {
                    legendColorBox.style.backgroundColor = bgColor;
                }
                legendItem.createSpan({ text: legendText });
            };

            // Render segments in the correct visual order (MODIFIED)
            setupSegment(overdueTasks, 'overdue');
            setupSegment(incompleteTasks, 'incomplete');
            setupSegment(inProgressTasks, 'in-progress');
            setupSegment(noDueTasks, 'no-due');
            setupSegment(completedTasks, 'completed');
        }

        // Your header click listener, unchanged
        header.addEventListener('click', async () => {
            currentState = currentState === 'full' ? 'mini' : 'full';
            this.plugin.settings.smallWidgetStates[widgetKey] = currentState;
            await this.plugin.saveSettings();
            updateView();
        });

        updateView();
    }




    getComputedCssVar(varName) {
        // this.containerEl is the root element of the view
        return getComputedStyle(this.containerEl).getPropertyValue(varName).trim();
    }


    /**
     * Renders a single, generalized heatmap widget for the dashboard.
     * @param {HTMLElement} parentContainer The parent element to append this widget to.
     * @param {string} title The title to display for the widget.
     * @param {Map<string, TFile[]>} dataMap A map where keys are 'YYYY-MM-DD' strings and values are arrays of files.
     * @param {string | string[]} colorSource The color(s) to use. Can be a single color string or an array of 4 color strings for a gradient.
     */
    async populateSingleHeatmapWidget(widgetContainer, title, dataMap, colorSource, options = {}, widgetKey) {

        if (!widgetKey) {
            console.error("Heatmap widget rendered without a widgetKey:", title);
            return;
        }

        widgetContainer.empty();

        const isCollapsed = this.plugin.settings.collapsedHeatmaps[widgetKey] === true;
        if (isCollapsed) {
            widgetContainer.addClass('is-collapsed');
        }

        let totalCount = 0;
        for (const files of dataMap.values()) {
            totalCount += files.length;
        }

        const header = widgetContainer.createDiv({ cls: 'pm-widget-header' });

        // 1. Collapse Icon
        const collapseIcon = header.createDiv({ cls: 'heatmap-collapse-icon' });
        setIcon(collapseIcon, 'chevron-down');

        // 2. Clickable Title
        const titleEl = header.createEl('h3', { text: title });

        // 3. Total Count (moves to the end)
        const totalCountEl = header.createDiv({
            cls: 'heatmap-total-count',
            text: totalCount.toString()
        });
        /*header.createDiv({
            cls: 'heatmap-total-count',
            text: `${totalCount}`
        });
        */

        let linkPath = '';
        // Check if it's a custom heatmap
        if (widgetKey.startsWith('custom-')) {
            const index = parseInt(widgetKey.split('-')[1], 10);
            if (!isNaN(index)) {
                linkPath = this.plugin.settings.customHeatmaps[index]?.linkPath;
            }
        } else {
            // Otherwise, it's a built-in heatmap
            linkPath = this.plugin.settings.heatmapLinkConfig[widgetKey];
        }
        
        if (linkPath) {
            totalCountEl.addClass('is-clickable');
            totalCountEl.setAttribute('aria-label', `Open note: ${linkPath}`);

            totalCountEl.addEventListener('click', async (event) => {
                event.stopPropagation();

                const file = this.app.vault.getAbstractFileByPath(linkPath);
                if (file && file instanceof TFile) {
                    const openInNew = this.plugin.settings.heatmapTotalClickOpenAction === 'new-tab';
                    const leaf = this.app.workspace.getLeaf(event.shiftKey || openInNew);
                    await leaf.openFile(file);
                } else {
                    new Notice(`Note not found: ${linkPath}`);
                }
            });
        }

        const heatmapContainer = widgetContainer.createDiv({ cls: 'heatmap-container' });

        // Toggle collapse state
        collapseIcon.addEventListener('click', async () => {
            const currentlyCollapsed = widgetContainer.classList.toggle('is-collapsed');
            this.plugin.settings.collapsedHeatmaps[widgetKey] = currentlyCollapsed;
            await this.plugin.saveSettings();
            if (!currentlyCollapsed) {
                setTimeout(() => {
                    const todayCell = heatmapContainer.querySelector('.heatmap-today-cell');
                    if (todayCell) {
                        const scrollPos = todayCell.offsetLeft - (heatmapContainer.offsetWidth / 2) + (todayCell.offsetWidth / 2);
                        heatmapContainer.scrollLeft = scrollPos;
                    }
                }, 50);
            }
        });

        // Scroll to today
        titleEl.addEventListener('click', () => {
            const todayCell = heatmapContainer.querySelector('.heatmap-today-cell');
            if (todayCell) {
                const scrollPos = todayCell.offsetLeft - (heatmapContainer.offsetWidth / 2) + (todayCell.offsetWidth / 2);
                heatmapContainer.scrollLeft = scrollPos;
            }
        });

        const dayLabelsContainer = heatmapContainer.createDiv({ cls: 'heatmap-day-labels' });
        const grid = heatmapContainer.createDiv({ cls: 'heatmap-grid' });
        const today = moment();
        const weekStartsOnMonday = this.plugin.settings.weekStartDay === 'monday';

        const dayLabels = weekStartsOnMonday ? ['M', 'T', 'W', 'T', 'F', 'S', 'S'] : ['S', 'M', 'T', 'W', 'T', 'F', 'S'];
        const todayDayIndex = weekStartsOnMonday ? (today.day() + 6) % 7 : today.day();

        dayLabels.forEach((day, index) => {
            const label = dayLabelsContainer.createSpan({ text: day });
            if (index === todayDayIndex) {
                label.addClass('heatmap-today-label');
            }
        });

        const endDate = options.endDate || today.clone().endOf('month');
        const startDate = options.startDate || today.clone().subtract(11, 'months').startOf('month');
        const startDayOfWeek = startDate.day();
        const weekStartOffset = weekStartsOnMonday ? (startDayOfWeek === 0 ? -6 : 1 - startDayOfWeek) : -startDayOfWeek;

        startDate.add(weekStartOffset, 'days');

        let currentDay = startDate.clone();
        let colIndex = 1;
        const seenMonths = new Set();
        let lastLabelColumn = 0;

        while (currentDay.isSameOrBefore(endDate, 'day')) {
            const dayOfWeek = weekStartsOnMonday ? (currentDay.weekday() + 6) % 7 : currentDay.weekday();
            const cellDate = currentDay.clone();

            const mapKey = `${cellDate.year()}-${cellDate.month()}`;
            if (!seenMonths.has(mapKey)) {
                seenMonths.add(mapKey);
                if (cellDate.date() < 7) {
                    let labelCol = colIndex;
                    if (labelCol <= lastLabelColumn) {
                        labelCol = lastLabelColumn + 1;
                    }
                    const monthLabel = grid.createDiv({ cls: 'heatmap-month-label', text: cellDate.format('MMM') });
                    if (cellDate.isSame(today, 'month')) {
                        monthLabel.addClass('heatmap-current-month-label');
                    }
                    monthLabel.style.gridRow = '1';
                    monthLabel.style.gridColumn = `${labelCol}`;
                    lastLabelColumn = labelCol;
                }
            }

            const cell = grid.createDiv({ cls: 'heatmap-cell' });
            const weekType = weekStartsOnMonday ? 'isoWeek' : 'week';
            const startOfThisWeek = today.clone().startOf(weekType);
            const endOfThisWeek = today.clone().endOf(weekType);

            if (cellDate.isBetween(startOfThisWeek, endOfThisWeek, 'day', '[]')) {
                cell.addClass('heatmap-current-week-cell');
            }
            if (cellDate.isSame(today, 'day')) {
                cell.addClass('heatmap-today-cell');
            }

            cell.style.gridColumn = `${colIndex}`;
            cell.style.gridRow = `${dayOfWeek + 2}`;

            const dateKey = cellDate.format('YYYY-MM-DD');
            const filesOnDay = dataMap.get(dateKey);
            const count = filesOnDay ? filesOnDay.length : 0;

            if (count > 0) {
                let countForColor = count; // Default to total count
                let colorGradient = colorSource; // Default to provided gradient

                // --- UNIVERSAL FIX ---
                // Check if this is the special overdue/upcoming widget
                if (options.overdueMap && options.upcomingMap) {
                    const overdueTasksOnDay = options.overdueMap.get(dateKey);
                    if (overdueTasksOnDay && overdueTasksOnDay.length > 0) {
                        countForColor = overdueTasksOnDay.length;
                        colorGradient = options.overdueGradient; // Use red gradient
                    } else {
                        const upcomingTasksOnDay = options.upcomingMap.get(dateKey);
                        countForColor = upcomingTasksOnDay ? upcomingTasksOnDay.length : 0;
                        // Keep default blue gradient
                    }
                }
                // For all other heatmaps (like Task Completion), countForColor is already set to `count`
                
                if (countForColor > 0) {
                    let finalColor = 'transparent';
                    if (Array.isArray(colorGradient) && colorGradient.length > 0) {
                        let level;
                        if (countForColor >= 10) level = 4;
                        else if (countForColor >= 6) level = 3;
                        else if (countForColor >= 3) level = 2;
                        else level = 1;
                        finalColor = colorGradient[level - 1] || colorGradient[colorGradient.length - 1];
                    }
                    cell.style.setProperty('background-color', finalColor, 'important');
                }

                cell.addClass('is-interactive');

                cell.addEventListener('mouseenter', (event) => {
                    if (this.isPopupLocked) return;
                    clearTimeout(this.hideTimeout);
                    this.hideFilePopup();
                    this.hoverTimeout = setTimeout(() => {
                        const itemsOnDay = dataMap.get(dateKey) || [];
                        if (itemsOnDay.length === 0) return;
                        let popupData = {};
                        if (itemsOnDay[0].text !== undefined && itemsOnDay[0].lineNumber !== undefined) {
                            // This is a TASK heatmap.
                            popupData = {
                                tasks: itemsOnDay
                            };
                        } else {
                            // This is a FILE heatmap. We need to correctly categorize the files.
                            const dailyNotes = [];
                            const createdNotes = [];
                            const assets = [];

                            itemsOnDay.forEach(file => {
                                if (this.isDailyNote(file)) {
                                    dailyNotes.push(file);
                                } else if (file.path && file.path.toLowerCase().endsWith('.md')) {
                                    // It's a regular markdown note.
                                    createdNotes.push(file);
                                } else {
                                    // It's not a markdown file, so it must be an asset.
                                    assets.push(file);
                                }
                            });

                            // Construct the data object with the correct categories.
                            popupData = {
                                daily: dailyNotes,
                                created: createdNotes,
                                assets: assets
                            };
                        }

                        this.showFilePopup(cell, popupData, cellDate.toDate());
                    }, this.plugin.settings.otherNoteHoverDelay);
                });

                cell.addEventListener('mouseleave', () => {
                    clearTimeout(this.hoverTimeout);
                    this.hideTimeout = setTimeout(() => {
                        this.hideFilePopup();
                    }, this.plugin.settings.popupHideDelay);
                });
            }

            if (dayOfWeek === 6) {
                colIndex++;
            }
            currentDay.add(1, 'day');
        }

        setTimeout(() => {
            const todayCell = grid.querySelector('.heatmap-today-cell');
            if (todayCell) {
                const scrollPos = todayCell.offsetLeft - (heatmapContainer.offsetWidth / 2) + (todayCell.offsetWidth / 2);
                heatmapContainer.scrollLeft = scrollPos;
            } else {
                heatmapContainer.scrollLeft = heatmapContainer.scrollWidth;
            }
        }, 100);
    }



    setupReorderMode() {
        const isMac = Platform.isMacOS;

        const handleKeyDown = (e) => {
            // Use Alt key (Option on Mac) or Ctrl key (Control on Windows)
            const isModifierPressed = isMac ? e.altKey : e.ctrlKey;

            // Only activate if we're in pinned notes view AND custom sort is selected
            if (isModifierPressed && !this.isReorderModeActive && this.notesViewMode === 'pinned' && this.pinnedSortOrder === 'custom') {
                this.isReorderModeActive = true;
                this.populateNotes(); // Re-render to show handles
                //new Notice(`Reorder mode active: Hold ${modifierKeyName} and drag to rearrange.`);
            } else if (isModifierPressed && this.notesViewMode === 'pinned' && this.pinnedSortOrder !== 'custom') ;
        };

        const handleKeyUp = (e) => {
            const wasModifierReleased = isMac ? !e.altKey : !e.ctrlKey;

            if (wasModifierReleased && this.isReorderModeActive) {
                this.isReorderModeActive = false;
                this.populateNotes(); 
            }
        };

        // Register the listeners using Obsidian's API for proper cleanup
        this.registerDomEvent(document, 'keydown', handleKeyDown);
        this.registerDomEvent(document, 'keyup', handleKeyUp);
    }

    /**
    * Navigates the calendar to the current month with a smooth scroll animation
    * in the vertical view. It forces a re-render to ensure the target element
    * exists before scrolling.
    */
    async goToCurrentMonth() {
        const now = new Date();
        const currentMonthId = `month-${now.getFullYear()}-${now.getMonth()}`;
        const currentMonthEl = this.verticalScrollerEl?.querySelector(`#${currentMonthId}`);

        if (this.isVerticalView) {
            // Check if the current month is visible in the viewport.
            const isCurrentMonthVisible = this.isElementInViewport(currentMonthEl);

            if (isCurrentMonthVisible) {
                // If visible, TOGGLE popup lock. This is the ONLY action.
                this.isPopupLocked = !this.isPopupLocked;
                this.todayBtn.classList.toggle('popup-locked', this.isPopupLocked);
                //new Notice(`Calendar popups ${this.isPopupLocked ? 'disabled' : 're-enabled'}.`);
                this.updateTodayBtnAriaLabel();
            } else {
                // If NOT visible, NAVIGATE. This is the ONLY action.
                if (currentMonthEl) {
                    currentMonthEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
                } else {
                    // Fallback for very distant months: re-render and then scroll.
                    this.displayedMonth = new Date(now.getFullYear(), now.getMonth(), 1);
                    const popupState = this.isPopupLocked;
                    await this.render(); // Re-render to bring the month into the DOM
                    this.isPopupLocked = popupState; // Restore state
                    this.todayBtn.classList.toggle('popup-locked', this.isPopupLocked);
                    this.updateTodayBtnAriaLabel();
                    setTimeout(() => {
                        const newCurrentMonthEl = this.verticalScrollerEl?.querySelector(`#${currentMonthId}`);
                        if (newCurrentMonthEl) {
                            newCurrentMonthEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }
                    }, 100);
                }
            }
        } else {
            // Horizontal view logic remains unchanged.
            const isAlreadyCurrentMonth = moment(this.displayedMonth).isSame(now, 'month');
            if (isAlreadyCurrentMonth) {
                this.isPopupLocked = !this.isPopupLocked;
                this.todayBtn.classList.toggle('popup-locked', this.isPopupLocked);
                //new Notice(`Calendar popups ${this.isPopupLocked ? 'disabled' : 're-enabled'}.`);
                this.updateTodayBtnAriaLabel();
            } else {
                await this.changeMonth(0, true);
            }
        }
    }

    /**
     * Applies font size settings as CSS variables to the view's root element,
     * allowing all CSS rules to update dynamically.
     */
    applyFontSettings() {
        if (!this.containerEl) return;

        // Get values from settings, providing default fallbacks.
        const labelFontSize = this.plugin.settings.fontSize || '12px';
        const dayNumberFontSize = this.plugin.settings.dayNumberFontSize || '15px';

        // Set the CSS variables on the main container element for this view.
        this.containerEl.style.setProperty('--calendar-label-font-size', labelFontSize);
        this.containerEl.style.setProperty('--calendar-day-number-font-size', dayNumberFontSize);
    }

    async handleFileClick(file, event, navState = {}) {
        if (!file) return;

        // This logic correctly determines if a new tab should be opened based on your settings.
        const isAsset = file.extension.toLowerCase() !== 'md';
        const openInNewTabSetting = isAsset
            ? this.plugin.settings.assetsOpenAction === 'new-tab'
            : this.plugin.settings.notesOpenAction === 'new-tab';

        const forceNewLeaf = event.shiftKey || openInNewTabSetting;

        // --- FIX #1: Provide the correct source path ---
        // The sourcePath MUST be the path of the file containing the link.
        const sourcePath = file.path;

        // --- FIX #2: Construct the correctly structured navigation state ---
        // The API requires the line number to be inside an 'eState' object.
        const openViewState = {};
        if (navState && navState.line !== undefined) {
            openViewState.eState = {
                line: navState.line,
                // 'active: true' ensures the new pane is focused, which is
                // necessary for scrolling and highlighting to occur.
                active: true 
            };
        }

        // This API call now has the correct source path and the correct state structure.
        await this.app.workspace.openLinkText(
            file.path,
            sourcePath,
            forceNewLeaf,
            openViewState
        );
    }




    /**
     * Renders a single note item row in a given container.
     * @param {TFile} file The note file to render.
     * @param {HTMLElement} container The parent element to append the row to.
     */
    renderNoteItem(file, container) {
        const settings = this.plugin.settings;
        const searchInputEl = this.notesSearchInputEl;

        const row = container.createDiv({ cls: 'note-row' });
        row.dataset.filePath = file.path;

        // --- Mousedown flag for better drag-hover detection ---
        row.addEventListener('mousedown', () => {
            this.isMouseDown = true;
            this.hideFilePopup(); // Immediately hide any visible popup
        });

        // --- Drag-and-Drop Logic for Pinned Notes (Preserved) ---
        const isReorderable = this.notesViewMode === 'pinned' && this.pinnedSortOrder === 'custom';

        if (isReorderable && this.isReorderModeActive) {
            row.draggable = true;
            const dragHandle = row.createDiv({ cls: 'drag-handle' });
            setIcon(dragHandle, 'grip-vertical');

            row.addEventListener('dragstart', (e) => {
                this.isDraggingNote = true;
                e.dataTransfer.setData('text/plain', file.path);
                e.dataTransfer.effectAllowed = 'move';
                setTimeout(() => row.addClass('dragging'), 0);
            });

            row.addEventListener('dragend', async () => {
                row.removeClass('dragging');
                this.isDraggingNote = false;
                await this.savePinnedOrder(container);
            });

            row.addEventListener('dragover', (e) => {
                e.preventDefault();
                const dragging = container.querySelector('.dragging');
                if (dragging && dragging !== row) {
                    const rect = row.getBoundingClientRect();
                    const isAfter = e.clientY > rect.top + rect.height / 2;
                    row.parentNode.insertBefore(dragging, isAfter ? row.nextSibling : row);
                }
            });
        } else {
            row.draggable = false;
        }

        // --- Build Row Visual Content (Preserved) ---
        const titleWrapper = row.createDiv({ cls: 'note-title-wrapper' });

        if (settings.showNoteStatusDots) {
            const dot = titleWrapper.createDiv({ cls: 'note-status-dot' });
            if (this.isDailyNote(file)) {
                dot.style.backgroundColor = settings.dailyNoteDotColor;
            } else if (this.isWeeklyNote(file)) {
                dot.style.backgroundColor = settings.weeklyNoteDotColor;
            } else {
                dot.addClass(isSameDay(new Date(file.stat.ctime), new Date(file.stat.mtime)) ? 'note-status-dot-created' : 'note-status-dot-modified');
            }
        }

        const titlePathWrapper = titleWrapper.createDiv({ cls: 'note-title-path-wrapper' });
        titlePathWrapper.createDiv({ text: file.basename, cls: 'note-title' });
        if (file.parent && file.parent.path !== '/') {
            titlePathWrapper.createDiv({ text: file.parent.path, cls: 'note-path' });
        }

        row.createDiv({ text: formatDate(new Date(file.stat.mtime), 'DD-MM-YYYY'), cls: 'note-mod-date' });

        // --- APPLY UNIFIED EVENT HANDLER ---
        // This single call correctly handles popups and clicks for both desktop and mobile,
        // including the special long-press behavior for reorderable pinned notes.
        this.applyPopupTrigger(row, file, 'note');

        // --- Keyboard Navigation ---
        this.addKeydownListeners(row, searchInputEl);

        return row;
    }


    async savePinnedOrder(container) {

        const noteRows = container.querySelectorAll('.note-row');
        const newOrder = Array.from(noteRows).map(row => row.dataset.filePath);

        // Update the settings with the new order
        this.plugin.settings.pinnedNotesCustomOrder = newOrder;

        // Set the active sort mode to 'custom' since a manual sort just happened
        this.pinnedSortOrder = 'custom';

        await this.plugin.saveSettings();

        // Refresh the view to ensure the header's sort indicator is updated
        await this.populateNotes();
    }

    /**
     * Formats a list of calendar events into a markdown string for template insertion.
     * @param {-} events 
     * @returns 
     */
    formatEventsForTemplate(events) {
        if (!events || events.length === 0) {
            return "";
        }

        // Retrieve the user-defined format from settings
        const formatString = this.plugin.settings.calendarEventsFormat || '- {{startTime}} - {{endTime}}: {{summary}}';

        // Sort events
        events.sort((a, b) => {
            if (a.isAllDay && !b.isAllDay) return -1;
            if (!a.isAllDay && b.isAllDay) return 1;
            if (a.isAllDay && b.isAllDay) return a.summary.localeCompare(b.summary);
            if (!a.startTime || !b.startTime) return 0;
            return a.startTime.localeCompare(b.startTime);
        });

        // Map each event to its formatted string
        const eventStrings = events.map(event => {
            let finalString;

            if (event.isAllDay) {
                // For all-day events, replace the time placeholders with "All-day"
                // This regex looks for {{startTime}}, optional whitespace, a separator, optional whitespace, and {{endTime}}
                const timePlaceholderRegex = /{{\s*startTime\s*}}.*{{\s*endTime\s*}}/;

                finalString = formatString.replace(timePlaceholderRegex, 'All-day');

                // Now, replace the summary as usual
                finalString = finalString.replace(/{{summary}}/g, event.summary || '');

            } else {
                // For timed events, use the original logic
                const startTime = event.startTime || '';
                const endTime = event.endTime || '';

                finalString = formatString
                    .replace(/{{startTime}}/g, startTime)
                    .replace(/{{endTime}}/g, endTime)
                    .replace(/{{summary}}/g, event.summary || '');
            }

            // Trim any leftover whitespace or dangling separators
            return finalString.replace(/\s*:\s*$/, '').replace(/\s*-\s*$/, '').trim();
        });

        // Join the array of event strings with a double newline
        const eventBody = eventStrings.join('\n\n');

        // Construct the final output
        return eventBody;
    }

    /**
     * Schedules a refresh to occur at the next midnight.
     */
    scheduleDailyRefresh() {
        // Clear any existing timer to avoid duplicates
        if (this.dailyRefreshTimeout) {
            clearTimeout(this.dailyRefreshTimeout);
        }

        const now = moment();
        const endOfDay = moment().endOf('day');
        // Calculate milliseconds until the end of today, plus one to tick over to the new day
        const msUntilMidnight = endOfDay.diff(now) + 1;

        this.dailyRefreshTimeout = setTimeout(async () => {

            // Re-calculate all task due dates relative to the new "today"
            await this.buildTasksByDateMap();

            // Re-render the calendar to update heatmaps, badges, and today's highlight
            this.renderCalendar();

            // If the user is currently looking at the tasks tab, refresh its view
            if (this.activeTab === 'tasks') {
                await this.populateTasks();
            }

            // IMPORTANT: Schedule the next refresh for the following day
            this.scheduleDailyRefresh();

        }, msUntilMidnight);
    }
    
    getViewType() { return VIEW_TYPE_PERIOD; }
    getDisplayText() { return "📅 Calendar Period Week Notes"; }
    getIcon() { return "calendar-check"; }

    async buildWeeklyNotesCache() {
        if (!this.plugin.settings.enableWeeklyNotes) return;
        this.existingWeeklyNotes.clear();
        const folderPath = this.plugin.settings.weeklyNoteFolder;
        const folder = this.app.vault.getAbstractFileByPath(folderPath);
        if (folder instanceof TFolder) {
            for (const file of folder.children) {
                if (file instanceof TFile && file.extension === 'md') {
                    this.existingWeeklyNotes.add(file.path);
                }
            }
        }
    }

    async refreshIcsEvents() {
        const { requestUrl, Notice } = require("obsidian");

        if (!ICALmodule) {
            console.error("ical.js library not bundled correctly.");
            return;
        }

        this.icsEventsByDate.clear();
        this.processedEventSignatures.clear();

        const icsUrl = this.plugin.settings.icsUrl;
        if (!icsUrl) {
            if (this.isCalendarRendered) {
                this.renderCalendar();
            }
            return;
        }

        try {
            const response = await requestUrl({ url: icsUrl });
            const icalData = response.text;
            const calendar = new ICALmodule.Component(ICALmodule.parse(icalData));

            const icalEndDate = ICALmodule.Time.fromJSDate(moment().add(2, 'years').toDate());
            const icalStartDate = ICALmodule.Time.fromJSDate(moment().subtract(1, 'year').toDate());

            const events = calendar.getAllSubcomponents('vevent');
            for (const vevent of events) {
                const event = new ICALmodule.Event(vevent);

                if (!event) {
                    continue;
                }

                if (event.recurrenceId) {
                    // FIX: Pass 'event' and the correct number of arguments
                    this.addParsedEvent(event, false);
                } else if (event.isRecurring()) {
                    const iterator = event.iterator();
                    let next;
                    while (next = iterator.next()) {
                        if (next.compare(icalEndDate) > 0) break;
                        if (next.compare(icalStartDate) < 0) continue;

                        const occurrence = event.getOccurrenceDetails(next);
                        this.addParsedEvent(occurrence, true);
                    }
                } else {
                    // FIX: Pass 'event' and the correct number of arguments
                    this.addParsedEvent(event, false);
                }
            }
        } catch (error) {
            new Notice('Calendar Period Week Notes - ICS error: ' + error.message, 10000);
            console.error("A detailed ICS parsing error occurred:", error);
        }

        if (this.isCalendarRendered) {
            this.renderCalendar();
        }
    }


    /**
     *  Adds a parsed ICAL event occurrence to the events map, handling de-duplication.
     *  This method uses a hybrid approach to de-duplication:
     *  - For recurring instances, it uses a combination of UID and recurrenceId.
     *  - For single events, it uses a content-based signature (summary, start, end).   
     * 
     * @param {*} occurrence 
     * @param {*} isRecurringInstance 
     * @returns 
     */
    addParsedEvent(occurrence, isRecurringInstance) {
        const item = isRecurringInstance ? occurrence.item : occurrence;

        if (!item) return;

        if (isRecurringInstance) {
            // For recurring instances, the UID is the UID of the parent event, and the
            // recurrenceId makes it unique. We create a signature from both.
            const recurrenceSignature = `${item.uid}:${occurrence.recurrenceId.toString()}`;
            if (this.processedEventSignatures.has(recurrenceSignature)) {
                return; // Skip duplicate recurring instance
            }
            this.processedEventSignatures.add(recurrenceSignature);
        } else {
            const singleEventSignature = `${item.summary}:${item.startDate.toString()}:${item.endDate.toString()}`;
            if (this.processedEventSignatures.has(singleEventSignature)) {
                return; // Skip duplicate single event
            }
            this.processedEventSignatures.add(singleEventSignature);
        }

        const startMoment = moment(occurrence.startDate ? occurrence.startDate.toJSDate() : item.startDate.toJSDate());
        const endMoment = moment(occurrence.endDate ? occurrence.endDate.toJSDate() : item.endDate.toJSDate());

        const isAllDay = item.startDate.isDate;
        if (isAllDay) {
            endMoment.subtract(1, 'second');
        }

        const eventData = {
            uid: item.uid,
            summary: item.summary,
            isAllDay: isAllDay,
            startTime: isAllDay ? null : startMoment.format('HH:mm'),
            endTime: isAllDay ? null : endMoment.format('HH:mm')
        };

        // --- FIX FOR MIDNIGHT EVENTS ---
        // Create a clone of the end date to avoid modifying the original.
        const loopEndDate = endMoment.clone();

        // If the event ends exactly at midnight, subtract one second for loop boundary calculations.
        // This prevents the event from "leaking" into the next day.
        if (!isAllDay && loopEndDate.hour() === 0 && loopEndDate.minute() === 0 && loopEndDate.second() === 0) {
            loopEndDate.subtract(1, 'second');
        }

        let currentDay = startMoment.clone().startOf('day');
        // Use the adjusted loopEndDate for the condition.
        while (currentDay.isSameOrBefore(loopEndDate.startOf('day'))) {
            const dateKey = currentDay.format('YYYY-MM-DD');
            if (!this.icsEventsByDate.has(dateKey)) {
                this.icsEventsByDate.set(dateKey, []);
            }
            // Final simple check to prevent adding the exact same object twice in the loop
            if (!this.icsEventsByDate.get(dateKey).some(e => e.uid === eventData.uid && e.summary === eventData.summary)) {
                this.icsEventsByDate.get(dateKey).push(eventData);
            }
            currentDay.add(1, 'day');
        }
    }

    async openWeeklyNote(dateInfo) {
        // --- Start of Debugging ---
        if (!dateInfo || typeof dateInfo.year === 'undefined') {
            console.error("Weekly Note Error: Invalid dateInfo object received.", dateInfo);
            new Notice("Could not create weekly note due to an internal error. Check console for details.");
            return;
        }
        // --- End of Debugging ---

        if (!this.plugin.settings.enableWeeklyNotes) return;

        const { weeklyNoteFolder, weeklyNoteTemplate, weeklyNoteFormat } = this.plugin.settings;

        // 1. Calculate all possible placeholder values from the data object
        const pweek = ((dateInfo.weekSinceStart - 1) % 52) + 1; // Calculate the week (1-52) in the period year
        const replacements = {
            YYYY: dateInfo.year,
            MM: String(dateInfo.month + 1).padStart(2, '0'),
            PN: "P" + dateInfo.period,
            PW: "W" + dateInfo.week,
            WKP: String(pweek).padStart(2, '0'),
            WKC: String(dateInfo.calendarWeek).padStart(2, '0')
        };

        // 2. Build the filename by replacing placeholders in the format string
        const fileName = weeklyNoteFormat.replace(/YYYY|MM|PN|PW|WKP|WKC/g, (match) => {
            // This ensures that if a value is somehow undefined, it won't break the filename.
            return replacements[match] !== undefined ? replacements[match] : match;
        });

        // 3. The rest of the file creation/opening logic remains the same
        const path = `${weeklyNoteFolder}/${fileName}.md`;
        const file = this.app.vault.getAbstractFileByPath(path);

        if (file) {
            const leaf = this.app.workspace.getLeaf(false);
            await leaf.openFile(file);
        } else {
            new ConfirmationModal(this.app,
                "Create weekly note?",
                `A weekly note for "${fileName}" does not exist. Would you like to create it?`,
                async () => {
                    let fileContent = "";
                    const templateFile = this.app.vault.getAbstractFileByPath(weeklyNoteTemplate);
                    if (templateFile instanceof TFile) fileContent = await this.app.vault.read(templateFile);

                    if (!this.app.vault.getAbstractFileByPath(weeklyNoteFolder)) {
                        await this.app.vault.createFolder(weeklyNoteFolder);
                    }

                    const newFile = await this.app.vault.create(path, fileContent);
                    await this.buildWeeklyNotesCache();
                    this.renderCalendar();
                    const leaf = this.app.workspace.getLeaf(false);
                    await leaf.openFile(newFile);
                },
                "Yes, create it"
            ).open();
        }
    }
    
    generateMonthGrid(dateForMonth, targetBodyEl) {
        const { settings } = this.plugin;
        const today = new Date();
        const year = dateForMonth.getFullYear();
        const month = dateForMonth.getMonth();
        const firstDayOfMonth = new Date(year, month, 1);
        const folder = settings.dailyNotesFolder || "";
        const format = settings.dailyNoteDateFormat || "YYYY-MM-DD";
        const existingNotes = new Set(this.app.vault.getMarkdownFiles().filter(file => !folder || file.path.startsWith(folder + "/")).map(file => file.basename));

        // This new logic correctly calculates the first day to show on the calendar
        const startDayNumber = this.plugin.settings.weekStartDay === 'monday' ? 1 : 0; // Mon=1, Sun=0
        moment.updateLocale('en', { week: { dow: startDayNumber } });

        let dayOfWeek = firstDayOfMonth.getDay(); // JS standard: Sun=0, Mon=1...

        let diff = dayOfWeek - startDayNumber;
        if (diff < 0) {
            diff += 7; // Ensure we go back to the previous week
        }

        let currentDay = new Date(firstDayOfMonth);
        currentDay.setDate(firstDayOfMonth.getDate() - diff);

        const requiredRows = 6;
        for (let i = 0; i < requiredRows; i++) {
            const row = targetBodyEl.createEl("tr");

            if (settings.highlightCurrentWeek) {
                const todayMoment = moment();
                const startOfWeekMoment = moment(currentDay);
                if (todayMoment.weekYear() === startOfWeekMoment.weekYear() && todayMoment.week() === startOfWeekMoment.week()) {
                    row.addClass('current-week-row');
                }
            }

            const weekMoment = moment(new Date(currentDay));
            const isoWeek = weekMoment.isoWeek();
            const isoYear = weekMoment.isoWeekYear();
            const isoMonth = weekMoment.month();
            const periodWeekData = getPeriodWeek(new Date(currentDay), settings.startOfPeriod1Date);

            const dateInfoForWeek = {
                year: isoYear,
                month: isoMonth,
                period: periodWeekData.period,
                week: periodWeekData.week,
                calendarWeek: isoWeek,
                weekSinceStart: periodWeekData.weekSinceStart
            };

            const clickHandler = () => {
                this.openWeeklyNote(dateInfoForWeek);
            };

            let weeklyNoteExists = false;
            if (settings.enableWeeklyNotes) {
                const pweek = ((dateInfoForWeek.weekSinceStart - 1) % 52) + 1;
                const replacements = {
                    YYYY: dateInfoForWeek.year,
                    MM: String(dateInfoForWeek.month + 1).padStart(2, '0'),
                    PN: "P" + dateInfoForWeek.period,
                    PW: "W" + dateInfoForWeek.week,
                    WKP: String(pweek).padStart(2, '0'),
                    WKC: String(dateInfoForWeek.calendarWeek).padStart(2, '0')
                };
                const expectedFileName = settings.weeklyNoteFormat.replace(/YYYY|WKP|WKC|MM|PN|PW/g, match => replacements[match]);
                const expectedPath = `${settings.weeklyNoteFolder}/${expectedFileName}.md`;
                weeklyNoteExists = this.existingWeeklyNotes.has(expectedPath);
            }

            if (settings.showPWColumn) {
                const pwCell = row.createEl("td", { cls: "pw-label-cell" });
                const pwContent = pwCell.createDiv({ cls: "day-content" });
                pwContent.createDiv({ cls: "day-number" }).setText(this.formatPW(periodWeekData.period, periodWeekData.week));

                pwCell.style.cursor = "pointer";

                if (this.plugin.settings.highlightTodayPWLabel) {
                    for (let d = 0; d < 7; d++) {
                        const checkDate = new Date(currentDay);
                        checkDate.setDate(currentDay.getDate() + d);
                        if (isSameDay(checkDate, today)) {
                            pwCell.addClass("today-pw-label");
                            break;
                        }
                    }
                }

                if (weeklyNoteExists && settings.showWeeklyNoteDot && !settings.showWeekNumbers) {
                    const dotsContainer = pwContent.createDiv({ cls: 'dots-container' });

                    const layout = this.plugin.settings.calendarLayout || 'normal';
                    dotsContainer.classList.remove('layout-condensed', 'layout-normal', 'layout-spacious');
                    dotsContainer.classList.add(`layout-${layout}`);
                    dotsContainer.createDiv({ cls: 'calendar-dot weekly-note-dot' });
                }
                pwCell.addEventListener('click', clickHandler);

                const handleRowHoverEnter = () => {
                    if (this.plugin.settings.enableRowHighlight) {
                        row.classList.add('row-hover');
                    }
                };
                const handleRowHoverLeave = () => {
                    row.classList.remove('row-hover');
                };

                pwCell.addEventListener('mouseenter', handleRowHoverEnter);
                pwCell.addEventListener('mouseleave', handleRowHoverLeave);

            }

            if (settings.showWeekNumbers) {
                const weekNum = settings.weekNumberType === 'period' ? periodWeekData.weekSinceStart : isoWeek;
                const weekCell = row.createEl("td", { cls: "week-number-cell" });
                const weekContent = weekCell.createDiv({ cls: "day-content" });
                weekContent.createDiv({ cls: "day-number" }).setText(weekNum.toString());

                weekCell.style.cursor = "pointer";

                if (this.plugin.settings.highlightTodayPWLabel) {
                    for (let d = 0; d < 7; d++) {
                        const checkDate = new Date(currentDay);
                        checkDate.setDate(currentDay.getDate() + d);
                        if (isSameDay(checkDate, today)) {
                            weekCell.addClass("today-pw-label");
                            break;
                        }
                    }
                }

                if (weeklyNoteExists && settings.showWeeklyNoteDot) {
                    const dotsContainer = weekContent.createDiv({ cls: 'dots-container' });

                    const layout = this.plugin.settings.calendarLayout || 'normal';
                    dotsContainer.classList.remove('layout-condensed', 'layout-normal', 'layout-spacious');
                    dotsContainer.classList.add(`layout-${layout}`);

                    dotsContainer.createDiv({ cls: 'calendar-dot weekly-note-dot' });
                }
                weekCell.addEventListener('click', clickHandler);

                const handleRowHoverEnter = () => {
                    if (this.plugin.settings.enableRowHighlight) {
                        row.classList.add('row-hover');
                    }
                };
                const handleRowHoverLeave = () => {
                    row.classList.remove('row-hover');
                };

                weekCell.addEventListener('mouseenter', handleRowHoverEnter);
                weekCell.addEventListener('mouseleave', handleRowHoverLeave);
            }

            for (let d = 0; d < 7; d++) {
                const dayDate = new Date(currentDay);
                dayDate.setDate(currentDay.getDate() + d);
                const isOtherMonth = dayDate.getMonth() !== month;
                const cell = row.createEl("td");

                // Add separator class to first date column
                if (d === 0 && this.plugin.settings.showPWColumnSeparator &&
                    (this.plugin.settings.showPWColumn || this.plugin.settings.showWeekNumbers)) {
                    cell.addClass('first-date-column');
                }

                const contentDiv = cell.createDiv("day-content");
                const dayNumber = contentDiv.createDiv("day-number");
                dayNumber.textContent = dayDate.getDate().toString();
                const dateKey = moment(dayDate).format("YYYY-MM-DD");
                const icsEventsForDay = this.icsEventsByDate.get(dateKey);
                const tasksForDay = this.tasksByDate.get(dateKey);
                const createdFiles = this.createdNotesMap.get(dateKey) || [];
                const modifiedFiles = this.modifiedNotesMap.get(dateKey) || [];
                const assetsCreated = this.assetCreationMap.get(dateKey) || [];
                const dailyNoteFileName = formatDate(dayDate, format);
                const dailyNoteExists = existingNotes.has(dailyNoteFileName);

                let totalTaskCount = tasksForDay ? tasksForDay.length : 0;
                const calendarEventCount = icsEventsForDay ? icsEventsForDay.length : 0;
                const eventIndicatorStyle = this.plugin.settings.calendarEventIndicatorStyle;

                // Conditionally add calendar event count to the total count for heatmap/badge
                if (eventIndicatorStyle === 'heatmap' || eventIndicatorStyle === 'badge') {
                    totalTaskCount += calendarEventCount;
                }

                const isToday = isSameDay(dayDate, today);
                if (totalTaskCount > 0) {
                    if (settings.taskIndicatorStyle === 'badge') {
                        contentDiv.createDiv({ cls: 'task-count-badge', text: totalTaskCount.toString() });

                    } else if (settings.taskIndicatorStyle === 'heatmap') {
                        const shouldApplyHeatmap = !(isToday && settings.todayHighlightStyle === 'cell');

                        if (shouldApplyHeatmap) {

                            const startColor = parseRgbaString(settings.taskHeatmapStartColor);
                            const midColor = parseRgbaString(settings.taskHeatmapMidColor);
                            const endColor = parseRgbaString(settings.taskHeatmapEndColor);
                            const midPoint = settings.taskHeatmapMidpoint;
                            const maxPoint = settings.taskHeatmapMaxpoint;


                            if (startColor && midColor && endColor) {
                                let finalColor;
                                if (totalTaskCount >= maxPoint) { finalColor = settings.taskHeatmapEndColor; }
                                else if (totalTaskCount >= midPoint) { const factor = (totalTaskCount - midPoint) / (maxPoint - midPoint); finalColor = blendRgbaColors(midColor, endColor, factor); }
                                else { const divisor = midPoint - 1; const factor = divisor > 0 ? (totalTaskCount - 1) / divisor : 1; finalColor = blendRgbaColors(startColor, midColor, factor); }

                                contentDiv.classList.add('heatmap-cell');
                                contentDiv.style.setProperty('--heatmap-color', finalColor);

                                // This creates a border using the theme's background color, making a clean gap.
                                const isInHighlightedRow = settings.highlightCurrentWeek &&
                                    row.classList.contains('current-week-row');

                                // Use the row highlight color as border if in highlighted row
                                if (isInHighlightedRow) {
                                    const borderColor = document.body.classList.contains('theme-dark')
                                        ? settings.rowHighlightColorDark
                                        : settings.rowHighlightColorLight;
                                    contentDiv.style.border = `${this.plugin.settings.contentBorderWidth} solid ${borderColor}`;
                                } else {
                                    contentDiv.style.border = `${this.plugin.settings.contentBorderWidth} solid var(--background-secondary)`;
                                }
                                // A slightly smaller radius makes it look neatly inset.
                                contentDiv.style.borderRadius = '8px';
                                contentDiv.style.boxSizing = 'border-box';

                            }
                        }
                    }
                }


                if (isOtherMonth) dayNumber.addClass("day-number-other-month");
                if (isSameDay(dayDate, today) && !isOtherMonth) cell.addClass("today-cell");

                const dotsContainer = contentDiv.createDiv({ cls: 'dots-container' });
                const layout = this.plugin.settings.calendarLayout || 'normal';

                // Ensure no old layout classes are lingering
                dotsContainer.classList.remove('layout-condensed', 'layout-normal', 'layout-spacious');

                // Apply the correct class based on the current setting
                dotsContainer.classList.add(`layout-${layout}`);


                if (dailyNoteExists) { dotsContainer.createDiv({ cls: "period-month-daily-note-dot calendar-dot" }); }
                if (settings.showOtherNoteDot && createdFiles.length > 0) { dotsContainer.createDiv({ cls: 'other-note-dot calendar-dot' }); }
                if (settings.showModifiedFileDot && modifiedFiles.length > 0) { dotsContainer.createDiv({ cls: 'modified-file-dot calendar-dot' }); }

                if (settings.showAssetDot && assetsCreated.length > 0) { dotsContainer.createDiv({ cls: 'asset-dot calendar-dot' }); }
                if (settings.showTaskDot && totalTaskCount > 0) { dotsContainer.createDiv({ cls: 'task-dot calendar-dot' }); }


                if (eventIndicatorStyle === 'dot' && calendarEventCount > 0 || settings.showIcsDot && calendarEventCount > 0) {
                    dotsContainer.createDiv({ cls: 'calendar-dot ics-event-dot' });
                }

                const hasPopupContent = dailyNoteExists || (totalTaskCount > 0) || (createdFiles.length > 0) || (modifiedFiles.length > 0) || (assetsCreated.length > 0) || (calendarEventCount > 0);

                let dataToShow = {};
                if (hasPopupContent) {
                    const dailyNoteFile = dailyNoteExists ? this.app.vault.getAbstractFileByPath(folder ? `${folder}/${dailyNoteFileName}.md` : `${dailyNoteFileName}.md`) : null;
                    dataToShow = {
                        tasks: tasksForDay,
                        daily: dailyNoteFile ? [dailyNoteFile] : [],
                        created: settings.showOtherNoteDot ? createdFiles : [],
                        modified: settings.showModifiedFileDot ? modifiedFiles : [],
                        assets: settings.showAssetDot ? assetsCreated : [],
                        ics: icsEventsForDay || [],
                    };
                }

                let longPressOccurred = false;
                let touchTimer = null;

                if (Platform.isMobile) {
                    // --- MOBILE: Long-press for popup, tap for daily note ---
                    cell.addEventListener('touchstart', (e) => {
                        longPressOccurred = false; // Reset on new touch
                        if (hasPopupContent) {
                            touchTimer = setTimeout(() => {
                                longPressOccurred = true;
                                this.showFilePopup(cell, dataToShow, dayDate, true); // Pass 'true' for mobile
                                e.preventDefault(); // Prevents context menu and text selection
                            }, 500); // 500ms for a long-press
                        }
                    });

                    const cancelLongPress = () => clearTimeout(touchTimer);
                    cell.addEventListener('touchend', cancelLongPress);
                    cell.addEventListener('touchmove', cancelLongPress);

                } else {
                    // --- DESKTOP: Hover for popup ---
                    if (hasPopupContent) {
                        cell.addEventListener('mouseenter', () => {
                            if (this.isPopupLocked) return;
                            clearTimeout(this.hideTimeout);
                            this.hideFilePopup();
                            this.hoverTimeout = setTimeout(() => {
                                this.showFilePopup(cell, dataToShow, dayDate, false); // Pass 'false' for desktop
                            }, this.plugin.settings.otherNoteHoverDelay);
                        });

                        cell.addEventListener('mouseleave', () => {
                            clearTimeout(this.hoverTimeout);
                            this.hideTimeout = setTimeout(() => this.hideFilePopup(), this.plugin.settings.popupHideDelay);
                        });
                    }
                }

                // --- UNIFIED CLICK HANDLER ---
                cell.addEventListener('click', (event) => {
                    if (longPressOccurred) {
                        // A long-press just happened and showed a popup, so ignore this subsequent 'click' event.
                        return;
                    }
                    this.hideFilePopup();
                    this.openDailyNote(dayDate);
                });
                cell.addEventListener('mouseenter', () => {
                    if (!this.plugin.settings.enableRowToDateHighlight) return;
                    const highlightColor = document.body.classList.contains('theme-dark')
                        ? this.plugin.settings.rowHighlightColorDark
                        : this.plugin.settings.rowHighlightColorLight;
                    const row = cell.parentElement;
                    const allRows = Array.from(row.parentElement.children);
                    const rowIndex = allRows.indexOf(row);
                    const colIndex = Array.from(row.children).indexOf(cell);
                    const table = cell.closest('table');
                    for (let j = 0; j <= colIndex; j++) {
                        const cellToHighlight = row.children[j];
                        if (cellToHighlight) cellToHighlight.style.backgroundColor = highlightColor;
                    }
                    for (let i = 0; i < rowIndex; i++) {
                        const priorRow = allRows[i];
                        const cellToHighlight = priorRow.children[colIndex];
                        if (cellToHighlight) cellToHighlight.style.backgroundColor = highlightColor;
                    }
                    if (table) {
                        const headerRow = table.querySelector('thead tr');
                        if (headerRow) {
                            const headerCell = headerRow.children[colIndex];
                            if (headerCell) headerCell.style.backgroundColor = highlightColor;
                        }
                    }
                });
                cell.addEventListener('mouseleave', () => {
                    if (!this.plugin.settings.enableRowToDateHighlight) return;
                    const table = cell.closest('table');
                    if (table) {
                        const allCells = table.querySelectorAll('tbody td, thead th');
                        allCells.forEach(c => c.style.backgroundColor = '');
                    }
                });
            }
            currentDay.setDate(currentDay.getDate() + 7);
        }
    }

    /**
     * Finds all markdown files that link to or embed the given asset file.
     * @param {TFile} assetFile - The asset file to find backlinks for.
     * @returns {Promise<TFile[]>} A promise that resolves to an array of markdown files linking to the asset.
     */
    async findAssetBacklinks(assetFile) {
        const backlinks = [];
        const markdownFiles = this.app.vault.getMarkdownFiles();

        for (const mdFile of markdownFiles) {
            const cache = this.app.metadataCache.getFileCache(mdFile);
            if (!cache) continue;

            const linksAndEmbeds = [...(cache.embeds || []), ...(cache.links || [])];

            for (const ref of linksAndEmbeds) {
                const linkedFile = this.app.metadataCache.getFirstLinkpathDest(ref.link, mdFile.path);
                if (linkedFile && linkedFile.path === assetFile.path) {
                    backlinks.push(mdFile);
                    break; // Move to the next file once a link is found
                }
            }
        }
        return backlinks;
    }

    isWeeklyNote(file) {
        if (!this.plugin.settings.enableWeeklyNotes || !(file instanceof TFile)) {
            return false;
        }
        // A file is considered a weekly note if it's inside the specified folder.
        return file.parent?.path === this.plugin.settings.weeklyNoteFolder;
    }

    /**
    * Attaches touch event listeners for mobile swipe gestures.
    * @param {HTMLElement} calendarEl The element to listen for 'swipe up' on.
    * @param {HTMLElement} headerEl The element to listen for 'swipe down' on.
    */
    attachSwipeListeners(calendarEl, headerEl) {
        const swipeThreshold = 50;
        let startY = 0;
        let startX = 0;
        let isDragging = false;
        let dragTarget = null; // To know which element started the drag

        const handleDragStart = (e) => {
            isDragging = true;
            dragTarget = e.currentTarget; // Store if drag started on calendar or header
            startY = e.touches ? e.touches[0].clientY : e.clientY;
            startX = e.touches ? e.touches[0].clientX : e.clientX;

            // Add the 'end' listeners to the window to catch drags that end outside the element
            window.addEventListener('mouseup', handleDragEnd, { once: true });
            window.addEventListener('touchend', handleDragEnd, { once: true });
        };

        const handleDragEnd = (e) => {
            if (!isDragging) return;
            isDragging = false;

            const endY = e.changedTouches ? e.changedTouches[0].clientY : e.clientY;
            const endX = e.changedTouches ? e.changedTouches[0].clientX : e.clientX;
            const deltaY = startY - endY;
            const deltaX = Math.abs(startX - endX);

            // Check if it's a predominantly vertical swipe
            if (Math.abs(deltaY) > swipeThreshold && Math.abs(deltaY) > deltaX) {
                // Swipe Up on Calendar Body: Hide Calendar
                if (dragTarget === calendarEl && deltaY > 0 && !this.isCalendarCollapsed) {
                    this.calendarWasCollapsedForEditing = false;
                    this.toggleCalendar(true); // Collapse
                }
                // Swipe Down on Header: Show Calendar
                else if (dragTarget === headerEl && deltaY < 0 && this.isCalendarCollapsed) {
                    this.calendarWasCollapsedForEditing = false;
                    this.toggleCalendar(false); // Use the helper

                    this.blurActiveInput();   // Explicitly dismiss the keyboard
                }
                else if (this.app.isMobile && dragTarget === calendarEl && deltaY < -80) { // A longer swipe down gesture
                    this.isVerticalView = true;
                    this.render(); // Re-render the entire view to switch to vertical mode
                }
            }
        };

        // Attach start listeners for both mouse and touch to both elements
        calendarEl.addEventListener('mousedown', handleDragStart);
        calendarEl.addEventListener('touchstart', handleDragStart, { passive: true });
        headerEl.addEventListener('mousedown', handleDragStart);
        headerEl.addEventListener('touchstart', handleDragStart, { passive: true });
    }

    /**
     * Extracts all task lines (e.g., "- [ ] ...") from a string of content.
     * @param {string} content - The markdown content to parse.
     * @returns {string[]} An array of strings, where each string is a task line.
     */
    extractTaskLines(content) {
        const taskLines = [];
        // This regex finds any line that looks like a Markdown task, completed or not.
        const taskRegex = /^\s*(?:-|\d+\.)\s*\[.\]\s*.*/;
        const lines = content.split('\n');
        for (const line of lines) {
            if (taskRegex.test(line)) {
                taskLines.push(line);
            }
        }
        return taskLines;
    }

    /**
     * Checks if a file is an image based on its extension.
     * @param {TFile} file The file to check.
     * @returns {boolean} True if the file is a common image type.
     */
    isImageAsset(file) {
        const imageExtensions = ['png', 'jpg', 'jpeg', 'gif', 'svg', 'webp'];
        return imageExtensions.includes(file.extension.toLowerCase());
    }

    /**
     * Dynamically generates the label for a tab, including icon and/or text based on settings.
     * @param {HTMLElement} container The HTML element to populate with the label.
     * @param {string} key The key of the tab (e.g., 'notes', 'scratch').
     */
    getTabLabel(container, key) {
        container.empty(); // Clear previous content

        const isMobile = document.body.classList.contains('is-mobile');
        const displayMode = isMobile ? this.plugin.settings.mobileTabDisplayMode : this.plugin.settings.tabDisplayMode;

        const icons = this.plugin.settings.tabIcons || DEFAULT_SETTINGS.tabIcons;
        const textLabels = {
            scratch: "ScratchPad",
            notes: "Notes",
            pinned: "Pinned",
            tasks: "Tasks", 
            assets: "Assets",
            fileCreationDashboard: "Dashboard",
            tasksDashboard: "Dashboard"
        };

        let iconName = '';
        let text = '';

        if (key === 'notes') {
            const mode = this.notesViewMode;
            iconName = mode === 'pinned' ? icons.pinned : icons.notes;
            text = mode === 'pinned' ? textLabels.pinned : textLabels.notes;
        }
        else if (key === 'tasks') {
            const groupBy = this.plugin.settings.taskGroupBy;
            iconName = groupBy === 'tag' ? 'circle-check' : icons.tasks;
            text = groupBy === 'tag' ? "Tasks" : "Tasks";
        }
        else if (key === 'assets') {
            iconName = this.isAssetsGridView ? 'image' : 'file-image';
            text = textLabels[key];
        } else if (key === 'dashboard') {
            // Dynamically set both icon and text based on the current dashboard view mode
            if (this.dashboardViewMode === 'creation') {
                iconName = 'layout-grid';
                text = textLabels.fileCreationDashboard;
            } else { // Assumes 'tasks' view
                iconName = 'chart-bar-big';
                text = textLabels.tasksDashboard;
            }
        }
        else {
            iconName = icons[key];
            text = textLabels[key];
        }

        if (displayMode.includes("icon")) {
            const iconEl = container.createDiv({ cls: 'tab-icon' });
            setIcon(iconEl, iconName || 'file-question');
        }

        if (displayMode.toLowerCase().includes("text")) {
            container.createSpan({ cls: 'tab-text', text: text || '' });
        }
    }

    /**
     * Determines if a file is a daily note based on its name format and location.
     * @param {TFile} file The file to check.
     * @returns {boolean} True if the file matches the daily note criteria.
     */
    isDailyNote(file) {
        const settings = this.plugin.settings;
        const dailyNoteFolder = settings.dailyNotesFolder;
        const format = settings.dailyNoteDateFormat || "YYYY-MM-DD";

        // Check if the filename strictly matches the daily note date format.
        const isNameCorrect = moment(file.basename, format, true).isValid();
        if (!isNameCorrect) {
            return false;
        }

        // If a daily notes folder is specified, check if the file is directly inside it.
        if (dailyNoteFolder) {
            return file.parent?.path === dailyNoteFolder;
        }

        // If no folder is set, the file must be in the vault's root directory.
        return file.parent?.path === '/';
    }

    /**
     * Toggles the scratchpad between edit and preview mode and triggers a re-render.
     */
    toggleScratchpadView() {
        this.isScratchpadPreview = !this.isScratchpadPreview;
        // The button state and content visibility are handled by the render method.
        this.renderScratchpadContent();
    }

    /**
     * Processes date placeholders in a string and replaces them with formatted dates.
     * Also handles a cursor position marker.
     * @param {string} formatString The string containing placeholders like {today}, {monday}, {date}+7, and a cursor marker '|'.
     * @returns {{text: string, cursorOffset: number}} The processed string and the calculated final cursor position.
     */
    processDatePlaceholders(formatString) {
        const cursorMarker = '|';
        let cursorOffset = -1;

        // Find the cursor marker's position and remove it for processing.
        const markerIndex = formatString.indexOf(cursorMarker);
        if (markerIndex !== -1) {
            cursorOffset = markerIndex;
            formatString = formatString.replace(cursorMarker, '');
        }

        // Process date placeholders using a regex.
        const processedText = formatString.replace(/{([^}]+)}/g, (match, tag) => {
            const now = moment();
            tag = tag.toLowerCase().trim();

            if (tag === 'today') return now.format('YYYY-MM-DD');
            if (tag === 'tomorrow') return now.add(1, 'day').format('YYYY-MM-DD');

            const weekdays = { 'sunday': 0, 'monday': 1, 'tuesday': 2, 'wednesday': 3, 'thursday': 4, 'friday': 5, 'saturday': 6 };
            if (tag in weekdays) {
                const targetDay = weekdays[tag];
                const currentDay = now.day();
                let daysToAdd = targetDay - currentDay;
                if (daysToAdd <= 0) {
                    daysToAdd += 7; // Find the *next* instance of the day.
                }
                return now.add(daysToAdd, 'days').format('YYYY-MM-DD');
            }

            const dynamicDateMatch = tag.match(/^date\s*([+-])\s*(\d+)/);
            if (dynamicDateMatch) {
                const operator = dynamicDateMatch[1];
                const amount = parseInt(dynamicDateMatch[2], 10);
                return operator === '+' ? now.add(amount, 'days').format('YYYY-MM-DD') : now.subtract(amount, 'days').format('YYYY-MM-DD');
            }

            return match; // Return original match if no placeholder is recognized.
        });

        // If the cursor marker wasn't found, set the offset to the end of the text.
        if (cursorOffset === -1) {
            cursorOffset = processedText.length;
        }

        return { text: processedText, cursorOffset: cursorOffset };
    }

    /**
     * Scans the entire vault for open tasks with due dates (e.g., 📅YYYY-MM-DD)
     * and populates `this.tasksByDate` map for quick lookups by the calendar view.
     */
    async buildTasksByDateMap() {
        this.tasksByDate.clear();
        this.fileToTaskDates.clear(); // Also clear the tracking map

        const files = this.app.vault.getMarkdownFiles();

        for (const file of files) {
            if (this.plugin.settings.taskIgnoreFolders.some(folder => file.path.startsWith(folder))) {
                continue;
            }

            const content = await this.app.vault.cachedRead(file);
            const tasks = parseTasksFromFile(file, content); // Use the new helper

            const dateKeysForFile = new Set();

            for (const task of tasks) {
                // We only care about incomplete tasks with due dates for the calendar grid
                if (task.status.toLowerCase() !== 'x' && task.dueDate) {
                    const dateKey = moment(task.dueDate).format("YYYY-MM-DD");
                    if (!this.tasksByDate.has(dateKey)) {
                        this.tasksByDate.set(dateKey, []);
                    }
                    this.tasksByDate.get(dateKey).push(task);
                    dateKeysForFile.add(dateKey);
                }
            }

            if (dateKeysForFile.size > 0) {
                this.fileToTaskDates.set(file.path, dateKeysForFile);
            }
        }
    }

    /**
     * Scans the vault for ALL tasks (complete and incomplete) and populates this.allTasks.
     * This serves as the single source of truth for the tasks dashboard.
     */
    async buildAllTasksList() {
        this.allTasks = []; // Reset the list
        const files = this.app.vault.getMarkdownFiles();
        const taskIgnoreFolders = this.plugin.settings.taskIgnoreFolders.map(f => f.toLowerCase().endsWith('/') ? f.toLowerCase() : f.toLowerCase() + '/');

        for (const file of files) {
            const filePathLower = file.path.toLowerCase();
            if (taskIgnoreFolders.some(folder => filePathLower.startsWith(folder))) {
                continue;
            }

            const content = await this.app.vault.cachedRead(file);
            const tasksFromFile = parseTasksFromFile(file, content); // Assumes you have this global helper
            this.allTasks.push(...tasksFromFile);
        }
    }

    getScratchpadParts(fullContent) {
        // If the setting to hide frontmatter is OFF, return the entire content as the body.
        if (!this.plugin.settings.scratchpad?.hideFrontmatter) {
            return { frontmatter: '', body: fullContent };
        }
        
        // This regex finds a valid frontmatter block at the very start of the file.
        const frontmatterRegex = /^---\s*[\r\n][\s\S]+?[\r\n]\s*---/;
        const match = fullContent.match(frontmatterRegex);

        if (match) {
            const frontmatterBlock = match[0];
            const endOfBlock = fullContent.indexOf(frontmatterBlock) + frontmatterBlock.length;

            // Determine the start of the body by skipping exactly one newline after the block.
            let bodyStartIndex = endOfBlock;
            if (fullContent.substring(bodyStartIndex, bodyStartIndex + 2) === '\r\n') {
                bodyStartIndex += 2;
            } else if (fullContent.substring(bodyStartIndex, bodyStartIndex + 1) === '\n') {
                bodyStartIndex += 1;
            }

            // The frontmatter now correctly includes the separating newline(s).
            const frontmatter = fullContent.substring(0, bodyStartIndex);
            // The body is everything after that, with its leading whitespace intact.
            const body = fullContent.substring(bodyStartIndex);
            
            return { frontmatter, body };
        }

        // If no frontmatter is found, the entire content is the body.
        return { frontmatter: '', body: fullContent };
    }

    /**
     * Renders the content of the scratchpad, switching between an editor textarea
     * and a rendered Markdown preview based on the current view mode.
     */
    async renderScratchpadContent() {
    if (!this.scratchWrapperEl) return;

    // Preserve focus on the textarea across re-renders.
    const wasFocused = this.noteTextarea === document.activeElement;

    this.scratchWrapperEl.empty();

    // Create a container for action buttons (Preview, Add Task).
    const actionsContainer = this.scratchWrapperEl.createDiv({ cls: 'scratchpad-actions-container' });

    // Only show the Preview/Edit toggle button if enabled in settings.
    if (this.plugin.settings.scratchpad?.showPreviewToggle) {
        this.scratchpadViewToggleBtn = actionsContainer.createEl('button', { cls: 'scratchpad-action-btn' });
        this.scratchpadViewToggleBtn.addEventListener('click', () => this.toggleScratchpadView());
    }

    // Only show the Add Task button if enabled in settings.
    if (this.plugin.settings.scratchpad?.showAddTaskButton) {
        this.addTaskBtn = actionsContainer.createEl('button', { cls: 'scratchpad-action-btn' });
        setIcon(this.addTaskBtn, 'plus');
        this.addTaskBtn.setAttribute('aria-label', 'Add new task');
        this.addTaskBtn.addEventListener('click', () => this.addNewTaskToScratchpad());
    }

    if (this.isScratchpadPreview && this.plugin.settings.scratchpad?.showPreviewToggle) {
        // --- CONFIGURE UI FOR PREVIEW MODE ---
        if (this.scratchpadViewToggleBtn) {
            setIcon(this.scratchpadViewToggleBtn, 'edit');
            this.scratchpadViewToggleBtn.setAttribute('aria-label', 'Edit mode');
        }

        if (this.addTaskBtn) {
            this.addTaskBtn.style.display = 'none';
        }

        // Disable search controls in preview mode.
        if (this.scratchpadSearchInputEl) this.scratchpadSearchInputEl.disabled = true;
        if (this.scratchpadSearchControlsEl) {
            Array.from(this.scratchpadSearchControlsEl.children).forEach(child => {
                if (child.matches('button')) child.disabled = true;
            });
        }

        // Render the content as Markdown.
        this.scratchWrapperEl.addClass('markdown-preview-view');
        
        // Use the pre-processed body content for rendering
        const markdownContent = this.noteText;
        const file = this.app.vault.getAbstractFileByPath(this.plugin.settings.fixedNoteFile);

        if (file) {
            await MarkdownRenderer.render(this.app, markdownContent, this.scratchWrapperEl, file.path, this);
        }

    } else {
        // --- CONFIGURE UI FOR EDIT MODE ---
        if (this.scratchpadViewToggleBtn) {
            setIcon(this.scratchpadViewToggleBtn, 'eye');
            this.scratchpadViewToggleBtn.setAttribute('aria-label', 'Preview mode');
        }

        if (this.addTaskBtn) {
            this.addTaskBtn.style.display = 'block';
        }

        // Enable search controls in edit mode.
        if (this.scratchpadSearchInputEl) this.scratchpadSearchInputEl.disabled = false;
        if (this.scratchpadSearchControlsEl) {
            Array.from(this.scratchpadSearchControlsEl.children).forEach(child => {
                if (child.matches('button')) child.disabled = false;
            });
        }

        this.scratchWrapperEl.removeClass('markdown-preview-view');

        // The highlighter is a div that sits behind the textarea to show search matches.
        this.scratchHighlighterEl = this.scratchWrapperEl.createDiv({ cls: 'scratch-base scratch-highlighter' });
        this.noteTextarea = this.scratchWrapperEl.createEl('textarea', { cls: 'scratch-base scratch-content' });

        if (this.app.isMobile) {
            this.noteTextarea.addEventListener('focus', () => {
                this.calendarWasCollapsedForEditing = true;
                this.toggleCalendar(true); // Collapse calendar
                this.noteTextarea.classList.add('is-editing-mobile');
            });

            this.noteTextarea.addEventListener('blur', (e) => {
                // If focus moves to the collapse button, don't auto-expand the calendar
                if (e.relatedTarget === this.collapseBtn) {
                    this.noteTextarea.classList.remove('is-editing-mobile');
                    return; 
                }

                // Otherwise, auto-expand if needed.
                if (this.calendarWasCollapsedForEditing) {
                    this.calendarWasCollapsedForEditing = false;
                    this.toggleCalendar(false); // Expand calendar
                }
                this.noteTextarea.classList.remove('is-editing-mobile');
            });
        }
        
        // Set the textarea value from the pre-processed body content
        this.noteTextarea.value = this.noteText;

        if (wasFocused) {
            this.noteTextarea.focus();
        }

        this.updateScratchpadHighlights();
        this.updateScratchpadSearchCount();

        // Save content on input.
        this.noteTextarea.addEventListener('input', async () => {
            this.noteText = this.noteTextarea.value; // Update the body content property
            await this.saveFixedNote(this.noteText); // Pass the body to the save function
            this.updateScratchpadSearchCount();
            this.updateScratchpadHighlights();
        });

        // Synchronize scroll position between textarea and highlighter.
        this.noteTextarea.addEventListener('scroll', () => {
            if (this.scratchHighlighterEl) {
                this.scratchHighlighterEl.scrollTop = this.noteTextarea.scrollTop;
                this.scratchHighlighterEl.scrollLeft = this.noteTextarea.scrollLeft;
            }
        });
    }
}


    /**
     * Called when the view is first opened. It loads all initial data and registers
     * event listeners for file changes and auto-reloading.
     */
    async onOpen() {
        // --- Load all initial data ---
        await this.buildCreatedNotesMap();
        await this.buildModifiedNotesMap();
        await this.buildAssetCreationMap();
        await this.buildAllCreatedNotesMap();
        await this.buildTasksByDateMap();
        await this.buildAllTasksList();
        await this.refreshIcsEvents();
        await this.buildWeeklyNotesCache();
        await this.buildHeatmapFileCache();

        // Correctly load and parse the scratchpad content on initial open
        const fullContent = await this.loadNote();
        const { frontmatter, body } = this.getScratchpadParts(fullContent);
        this.scratchpadFrontmatter = frontmatter;
        this.noteText = body; // this.noteText now correctly stores only the body

        this.render();
        this.setupReorderMode();
        this.registerDomEvent(document, 'keydown', this.handleKeyDown.bind(this));

        // --- Register events and intervals ---
        const intervalMs = this.plugin.settings.autoReloadInterval || 5000;

        // CORRECTED: This interval is now safe
        this.registerInterval(setInterval(async () => {
            // Don't refresh if the user is actively typing in the scratchpad
            if (document.activeElement === this.noteTextarea) return;

            const latestFullContent = await this.loadNote();
            const currentFullContent = this.scratchpadFrontmatter + this.noteText;

            // Only refresh if the content has actually changed
            if (latestFullContent !== currentFullContent) {
                const { frontmatter, body } = this.getScratchpadParts(latestFullContent);
                this.scratchpadFrontmatter = frontmatter;
                this.noteText = body;

                // If in EDIT mode, safely update the textarea's value
                if (this.noteTextarea) {
                    this.noteTextarea.value = this.noteText;
                }

                // If in PREVIEW mode, trigger a re-render to show the new content
                if (this.isScratchpadPreview) {
                    this.renderScratchpadContent();
                }

                // Always update dependent UI elements
                this.updateScratchpadSearchCount();
                this.updateScratchpadHighlights();
            }
        }, intervalMs));

        // This listener checks the date when the app window gets focus.
        // This solves a 'stale date highlight after a device sleep' issue.
        this.registerDomEvent(window, 'focus', () => {
            const now = new Date();
            // Only proceed if the day has actually changed.
            if (!isSameDay(now, this.lastKnownToday)) {
                console.log("Window focus detected: Day has changed. Refreshing calendar.");

                // Update our tracker to the new date.
                this.lastKnownToday = now;

                // Efficiently re-render just the calendar grid.
                this.renderCalendar();
            }
        });

        // Custom listener to rebuild dashboards
        this.registerEvent(
            this.app.workspace.on('pm-dashboard-refresh', this.rebuildDashboards, this)
        );

        // Listener for live dashboard updates
        this.registerEvent(this.app.workspace.on('pm-dashboard-refresh', () => {
            // Only refresh if the dashboard tab is currently active
            if (this.activeTab === 'dashboard') {
                this.populateDashboard();
            }
        }));

        this.registerEvent(
            this.app.metadataCache.on('changed', async (file) => {
                // First, check if the change affected tasks in the file.
                const tasksChanged = await this.updateTasksForFile(file);

                // --- START: NEW/CORRECTED LOGIC ---

                // Determine the type of update. If tasks changed, it's a 'tasks' update.
                // Otherwise, it's a general 'metadata' update (e.g., adding a #pin tag).
                const updateType = tasksChanged ? 'tasks' : 'metadata';

                // Call the main refresh UI handler, passing the file and the type of update.
                this.refreshUI({ file, updateType });

                // --- END: NEW/CORRECTED LOGIC ---

                // The specific logic for dashboard heatmaps can remain, as it's separate.
                if (this.activeTab === 'dashboard' && this.dashboardViewMode === 'creation') {
                    if (this.dashboardCreationDebounceTimer) {
                        clearTimeout(this.dashboardCreationDebounceTimer);
                    }
                    this.dashboardCreationDebounceTimer = setTimeout(() => {
                        const widgetGrid = this.dashboardContentEl.querySelector('.pm-dashboard-grid');
                        if (!widgetGrid) return;

                        const oldMatches = this.fileToHeatmapCache.get(file.path) || new Set();
                        const newMatches = new Set();
                        this.plugin.settings.customHeatmaps.forEach((config, index) => {
                            if (this.matchesHeatmapRule(file, config)) {
                                newMatches.add(index);
                            }
                        });

                        if (newMatches.size > 0) {
                            this.fileToHeatmapCache.set(file.path, newMatches);
                        } else {
                            this.fileToHeatmapCache.delete(file.path);
                        }

                        const allAffected = new Set([...oldMatches, ...newMatches]);
                        allAffected.forEach(index => {
                            const config = this.plugin.settings.customHeatmaps[index];
                            if (config) {
                                this.renderSingleHeatmap(widgetGrid, config, index);
                            }
                        });
                    }, 2500);
                }
            })
        );


        // Handles CREATING a new file
        this.registerEvent(this.app.vault.on("create", (file) => {
            if (!(file instanceof TFile)) return;
            this._addFileToAllCreatedMap(file);
            this.refreshUI({ updateType: 'creation' });
        }));

        // Handles DELETING a file
        this.registerEvent(this.app.vault.on("delete", async (file) => {
            if (!(file instanceof TFile)) return;

            // These calls update the data maps for calendar dots and other features.
            if (this.existingWeeklyNotes.has(file.path)) this.existingWeeklyNotes.delete(file.path);
            if (file.path.toLowerCase().endsWith('.md')) {
                this.removeFileFromMaps(file.path);
                // Also remove tasks from the deleted file
                const oldDateKeys = this.fileToTaskDates.get(file.path) || new Set();
                for (const dateKey of oldDateKeys) {
                    const tasks = this.tasksByDate.get(dateKey);
                    if (tasks) {
                        const remaining = tasks.filter(t => t.file.path !== file.path);
                        if (remaining.length > 0) this.tasksByDate.set(dateKey, remaining);
                        else this.tasksByDate.delete(dateKey);
                    }
                }
                this.fileToTaskDates.delete(file.path);
            } else {
                this.removeFileFromAssetMap(file.path);
            }

            if (this.fileToHeatmapCache.has(file.path)) {
                this.fileToHeatmapCache.delete(file.path);
            }

            // Update the dashboard's data source
            this._removeFileFromAllCreatedMap(file);

            // Trigger the correct UI refresh
            this.refreshUI({ updateType: 'creation', file: file });
        }));


        // Handles RENAMING a file
        this.registerEvent(this.app.vault.on("rename", async (file, oldPath) => {
            if (!(file instanceof TFile)) return;

            // These calls handle the remove/add logic other features.
            if (this.existingWeeklyNotes.has(oldPath)) this.existingWeeklyNotes.delete(oldPath);
            if (this.isWeeklyNote(file)) this.existingWeeklyNotes.add(file.path);

            if (file.path.toLowerCase().endsWith('.md')) {
                this.removeFileFromMaps(oldPath);
                this.addFileToMaps(file);
                // This correctly re-associates tasks with the new file path.
                await this.updateTasksForFile(file);
            } else {
                this.removeFileFromAssetMap(oldPath);
                this.addFileToAssetMap(file);
            }

            // Update the dashboard's data source ---
            const oldFilePlaceholder = { path: oldPath, stat: file.stat };
            this._removeFileFromAllCreatedMap(oldFilePlaceholder);
            this._addFileToAllCreatedMap(file);

            if (this.fileToHeatmapCache.has(oldPath)) {
                const matches = this.fileToHeatmapCache.get(oldPath);
                this.fileToHeatmapCache.delete(oldPath);
                this.fileToHeatmapCache.set(file.path, matches);
            }

            // Trigger the correct UI refresh
            this.refreshUI({ updateType: 'creation', file: file });
        }));

        // Add a global listener to blur inputs when tapping outside.
        // Uses 'mousedown' and the 'capture: true' phase for mobile reliability.
        this.registerDomEvent(this.containerEl, 'mousedown', (event) => {
            const activeEl = document.activeElement;
            const target = event.target;

            // Safely check if the clicked target is a valid HTML element.
            // If not, do nothing. This prevents the errors you saw before.
            if (!(target instanceof HTMLElement)) {
                return;
            }

            // Define the list of inputs this behavior applies to.
            const focusableInputs = [
                this.notesSearchInputEl,
                this.tasksSearchInputEl,
                this.assetsSearchInputEl,
                this.scratchpadSearchInputEl,
                this.noteTextarea
            ].filter(Boolean); // Removes any non-existent elements

            // Check if one of our inputs currently has focus.
            const isInputFocused = focusableInputs.includes(activeEl);

            // Check if the tap occurred on one of the inputs themselves.
            const clickedOnInput = focusableInputs.some(input => input.contains(target));

            // If an input is focused, but the tap was *outside* of it, blur the input.
            if (isInputFocused && !clickedOnInput) {
                // This re-uses the same helper function from the swipe fix.
                this.blurActiveInput();
            }
        }, true); // 'true' enables the capture phase, which is crucial for reliability.


        const PULL_THRESHOLD = 70; // How far the user needs to pull down to trigger a refresh

        const resetPullStyles = () => {
            this.taskRefreshIndicator.removeClass('is-ready', 'is-pulling', 'is-refreshing');
            this.tasksContentEl.style.transform = `translateY(0px)`;
            this.taskRefreshIndicator.style.transform = `translateY(-50px) scale(0.7)`;
            setIcon(this.taskRefreshIndicator, 'arrow-down');
        };

        this.registerDomEvent(this.tasksContentEl, 'touchstart', (e) => {
            if (this.tasksContentEl.scrollTop === 0) {
                this.isTaskPulling = true;
                this.taskPullStartY = e.touches[0].clientY;
            }
        }, { passive: false });

        this.registerDomEvent(this.tasksContentEl, 'touchmove', (e) => {
            if (!this.isTaskPulling) return;

            const currentY = e.touches[0].clientY;
            // We only care about the downward pull distance from the start
            this.taskPullDistance = Math.max(0, currentY - this.taskPullStartY);

            // Only interfere if the list is scrolled to the top AND the user is pulling down.
            if (this.tasksContentEl.scrollTop === 0 && this.taskPullDistance > 0) {
                // Prevent the browser from scrolling the page
                e.preventDefault();

                const pullRatio = Math.min(this.taskPullDistance, PULL_THRESHOLD);
                this.tasksContentEl.style.transform = `translateY(${pullRatio}px)`;

                this.taskRefreshIndicator.addClass('is-pulling');
                this.taskRefreshIndicator.style.transform = `translateY(${pullRatio - 50}px) scale(0.7)`;

                if (this.taskPullDistance > PULL_THRESHOLD) {
                    this.taskRefreshIndicator.addClass('is-ready');
                    setIcon(this.taskRefreshIndicator, 'check');
                } else {
                    this.taskRefreshIndicator.removeClass('is-ready');
                    setIcon(this.taskRefreshIndicator, 'arrow-down');
                }
            } else {
                // If we've started scrolling down the list, stop tracking the pull
                this.isTaskPulling = false;
            }

        }, { passive: false });

        this.app.workspace.onLayoutReady(() => {
            const statusBar = document.querySelector('.status-bar');
            if (statusBar && !Platform.isMobile) {
                this.statusBarObserver = new ResizeObserver(() => {
                    this.updateDynamicPadding();
                });

                this.statusBarObserver.observe(statusBar);
                this.updateDynamicPadding(); // Run once on initial load
            }
        });
        
        this.registerDomEvent(this.tasksContentEl, 'touchend', async (e) => {
            if (!this.isTaskPulling) return;
            this.isTaskPulling = false;

            if (this.taskPullDistance > PULL_THRESHOLD) {

                this.blurActiveInput();
                // Trigger the refresh
                this.taskRefreshIndicator.addClass('is-refreshing', 'is-ready');
                setIcon(this.taskRefreshIndicator, 'loader');

                await this.populateTasks();

                // Reset styles after refresh is complete
                setTimeout(() => {
                    resetPullStyles();
                }, 300); // Small delay for user to see the end of the spin

            } else {
                // Snap back if not pulled far enough
                resetPullStyles();
            }

            this.taskPullDistance = 0;

        });
        this.scheduleDailyRefresh();



    }

    /**
     * Forces a full rebuild of all data maps and a complete re-render of the view.
     * Useful after major setting changes.
     */
    // In class PeriodMonthView
    async rebuildAndRender() {
        // --- Existing data map rebuilds ---
        await this.buildCreatedNotesMap();
        await this.buildModifiedNotesMap();
        await this.buildAssetCreationMap();
        await this.buildAllCreatedNotesMap();
        await this.buildTasksByDateMap();
        await this.buildAllTasksList();
        await this.refreshIcsEvents();
        await this.buildWeeklyNotesCache();
        await this.buildHeatmapFileCache();

        // --- CORRECTED LOGIC ---
        // Re-load the note from the file and re-process it based on the new setting
        const fullContent = await this.loadNote();
        const { frontmatter, body } = this.getScratchpadParts(fullContent);
        this.scratchpadFrontmatter = frontmatter;
        this.noteText = body;
        
        // Now, trigger the main render function, which will use the updated content
        this.render();
    }


    async rebuildDashboards() {
        if (!this.dashboardContentEl) {
            return; // Safety check
        }

        if (this.dashboardViewMode === 'creation') {
            // Correct: For the creation dashboard, the populate function handles both
            // data gathering and rendering the UI.
            await this.populateCreationDashboard();
        } else { // This handles the 'tasks' dashboard
            // Correct: For the tasks dashboard, these are two separate steps.
            await this.populateTasksDashboard();
        }
    }

    /**
     * Performs a more targeted UI refresh based on which file was changed,
     * avoiding a full re-render when possible.
     * @param {TFile} file The file that was changed.
     */
    async refreshUI(options = {}) {
        const { updateType, file = null } = options;

        // Debounce calendar render as it's the most common update
        clearTimeout(this.calendarRefreshDebounceTimer);
        this.calendarRefreshDebounceTimer = setTimeout(() => {
            if (this.isVerticalView) {
                this.render();
            } else {
                this.renderCalendar();
            }
        }, 300);

        // If the active tab is the dashboard, handle it with specific logic.
        if (this.activeTab === 'dashboard') {
            // If the update was for TASKS, we ONLY refresh the dashboard
            // IF the user is currently looking at the TASKS view.
            if (updateType === 'tasks' && this.dashboardViewMode === 'tasks') {
                clearTimeout(this.dashboardRefreshDebounceTimer);
                this.dashboardRefreshDebounceTimer = setTimeout(() => {
                    this.populateDashboard();
                }, 300);
            }
            // If the update was for CREATION (e.g., a new file was made),
            // we ONLY refresh if the user is looking at the CREATION view.
            else if (updateType === 'creation' && this.dashboardViewMode === 'creation') {
                clearTimeout(this.dashboardRefreshDebounceTimer);
                this.dashboardRefreshDebounceTimer = setTimeout(() => {
                    this.populateDashboard();
                }, 300);
            }
            // For a general update (from settings, etc.), we refresh the visible dashboard.
            else if (updateType === 'general') {
                clearTimeout(this.dashboardRefreshDebounceTimer);
                this.dashboardRefreshDebounceTimer = setTimeout(() => {
                    this.populateDashboard();
                }, 300);
            }
            // IMPORTANT: If none of these conditions are met, we do nothing.
            // This is what stops the creation heatmap from refreshing on a task change.
            return; // Exit to prevent falling through to the general logic below.
        }
        switch (this.activeTab) {
            case 'scratch':
                if (file?.path === this.plugin.settings.fixedNoteFile) {
                    // Re-load the full content from the file
                    const fullContent = await this.loadNote();
                    
                    // Re-parse the content to separate frontmatter and body
                    const { frontmatter, body } = this.getScratchpadParts(fullContent);
                    
                    // Update the stored properties
                    this.scratchpadFrontmatter = frontmatter;
                    this.noteText = body;

                    // Only update the textarea if it exists and its content has actually changed
                    if (this.noteTextarea && this.noteTextarea.value !== this.noteText) {
                        // Preserve the user's cursor position during the update
                        const cursorPos = this.noteTextarea.selectionStart;
                        this.noteTextarea.value = this.noteText;
                        this.noteTextarea.selectionStart = this.noteTextarea.selectionEnd = cursorPos;
                    }
                }
                break;
            case 'notes':
                clearTimeout(this.notesRefreshDebounceTimer);
                this.notesRefreshDebounceTimer = setTimeout(() => this.populateNotes(), 250);
                break;
            case 'tasks':
                clearTimeout(this.taskRefreshDebounceTimer);
                this.taskRefreshDebounceTimer = setTimeout(() => this.populateTasks(), 250);
                break;
            case 'assets':
                this.isUnusedAssetCacheValid = false;
                this.populateAssets();
                break;
        }
    }


    async updateTasksForFile(file) {
        if (!file || !(file instanceof TFile) || !file.path.toLowerCase().endsWith('.md')) {
            return false;
        }

        // --- 1. CAPTURE INITIAL STATE ---
        const initialTasksInFile = this.allTasks.filter(task => task.file.path === file.path);
        const initialTaskCount = initialTasksInFile.length;
        // Create a "fingerprint" of the original tasks' content and status.
        const initialTaskFingerprint = JSON.stringify(initialTasksInFile.map(t => ({ text: t.text, status: t.status })));

        // --- 2. INCREMENTALLY UPDATE DATA MAPS ---
        this.allTasks = this.allTasks.filter(task => task.file.path !== file.path);
        const oldDateKeys = this.fileToTaskDates.get(file.path) || new Set();
        for (const dateKey of oldDateKeys) {
            const tasksOnDate = this.tasksByDate.get(dateKey);
            if (tasksOnDate) {
                const remainingTasks = tasksOnDate.filter(task => task.file.path !== file.path);
                if (remainingTasks.length > 0) {
                    this.tasksByDate.set(dateKey, remainingTasks);
                } else {
                    this.tasksByDate.delete(dateKey);
                }
            }
        }
        this.fileToTaskDates.delete(file.path);

        // --- 3. RE-PROCESS AND CAPTURE FINAL STATE ---
        if (this.plugin.settings.taskIgnoreFolders.some(folder => file.path.startsWith(folder))) {
            return initialTaskCount > 0; // A change occurred if tasks were removed.
        }

        const content = await this.app.vault.cachedRead(file);
        const newTasks = parseTasksFromFile(file, content);
        const finalTaskCount = newTasks.length;

        // Create a "fingerprint" of the new tasks' content and status.
        const finalTaskFingerprint = JSON.stringify(newTasks.map(t => ({ text: t.text, status: t.status })));

        if (finalTaskCount > 0) {
            this.allTasks.push(...newTasks);
            const newDateKeys = new Set();
            for (const task of newTasks) {
                if (task.status.toLowerCase() !== 'x' && task.dueDate) {
                    const dateKey = moment(task.dueDate).format("YYYY-MM-DD");
                    if (!this.tasksByDate.has(dateKey)) {
                        this.tasksByDate.set(dateKey, []);
                    }
                    this.tasksByDate.get(dateKey).push(task);
                    newDateKeys.add(dateKey);
                }
            }
            if (newDateKeys.size > 0) {
                this.fileToTaskDates.set(file.path, newDateKeys);
            }
        }

        // --- 4. RETURN TRUE IF *ANYTHING* MEANINGFUL CHANGED ---
        // A change is either a different number of tasks OR different content/status.
        return initialTaskCount !== finalTaskCount || initialTaskFingerprint !== finalTaskFingerprint;
    }

    /**
     * Updates the highlighter div with <mark> tags to show search term matches.
     */
    updateScratchpadHighlights() {
        if (!this.scratchHighlighterEl || !this.noteTextarea) return;

        const text = this.noteTextarea.value;
        const term = this.scratchpadSearchTerm;

        if (!term) {
            this.scratchHighlighterEl.innerHTML = '';
            return;
        }

        // Sanitize text to prevent HTML injection before inserting it into the highlighter.
        const sanitizedText = text
            .replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;");

        const escapedTerm = term.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        const regex = new RegExp(escapedTerm, 'gi');

        const highlightedHtml = sanitizedText.replace(regex, (match) => `<mark>${match}</mark>`);
        this.scratchHighlighterEl.innerHTML = highlightedHtml;
    }

    /**
     * Counts and displays the number of search matches in the scratchpad.
     */
    updateScratchpadSearchCount() {
        if (!this.scratchpadSearchCountEl || !this.noteTextarea) return;

        const term = this.scratchpadSearchTerm;
        const text = this.noteTextarea.value;
        let matchCount = 0;

        if (term) {
            const escapedTerm = term.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
            const regex = new RegExp(escapedTerm, 'gi');
            matchCount = (text.match(regex) || []).length;
        }

        this.scratchpadSearchCountEl.setText(`(${matchCount})`);
    }

    /**
     * Checks if a file path should be ignored based on user settings.
     * @param {string} filePath The path of the file to check.
     * @param {string} settingKey The key for the ignore list in the plugin settings.
     * @returns {boolean} True if the path should be ignored.
     */
    isPathIgnored(filePath, settingKey = 'otherNoteIgnoreFolders') {
        // Normalize folder paths to end with a slash for consistent matching.
        const ignoreFolders = (this.plugin.settings[settingKey] || []).map(f => f.toLowerCase().endsWith('/') ? f.toLowerCase() : f.toLowerCase() + '/');
        const dailyNoteFolder = this.plugin.settings.dailyNotesFolder;
        const filePathLower = filePath.toLowerCase();

        // Always ignore files inside the daily notes folder for "other note" calculations.
        if (dailyNoteFolder && filePathLower.startsWith(dailyNoteFolder.toLowerCase() + "/")) {
            return true;
        }
        return ignoreFolders.some(folder => folder && filePathLower.startsWith(folder));
    }

    /**
     * Adds a file to the createdNotesMap and modifiedNotesMap.
     * @param {TFile} file The file to add.
     */
    addFileToMaps(file) {
        if (this.isPathIgnored(file.path)) return;

        // Add to createdNotesMap.
        const cdate = new Date(file.stat.ctime);
        const cdateKey = moment(cdate).format("YYYY-MM-DD");
        if (!this.createdNotesMap.has(cdateKey)) {
            this.createdNotesMap.set(cdateKey, []);
        }
        const createdFiles = this.createdNotesMap.get(cdateKey);
        if (!createdFiles.some(f => f.path === file.path)) {
            createdFiles.push(file);
        }

        // Add to modifiedNotesMap if modified date is on a different day than creation date.
        const mdate = new Date(file.stat.mtime);
        if (!isSameDay(cdate, mdate)) {
            const mdateKey = moment(mdate).format("YYYY-MM-DD");
            if (!this.modifiedNotesMap.has(mdateKey)) {
                this.modifiedNotesMap.set(mdateKey, []);
            }
            const modifiedFiles = this.modifiedNotesMap.get(mdateKey);
            if (!modifiedFiles.some(f => f.path === file.path)) {
                modifiedFiles.push(file);
            }
        }
    }

    /**
     * Removes a file from all internal note data maps by its path.
     * @param {string} filePath The path of the file to remove.
     */
    removeFileFromMaps(filePath) {
        // Iterate through maps and remove any entries with the given file path.
        for (const [key, files] of this.createdNotesMap.entries()) {
            const updatedFiles = files.filter(f => f.path !== filePath);
            if (updatedFiles.length < files.length) {
                if (updatedFiles.length === 0) {
                    this.createdNotesMap.delete(key);
                } else {
                    this.createdNotesMap.set(key, updatedFiles);
                }
            }
        }
        for (const [key, files] of this.modifiedNotesMap.entries()) {
            const updatedFiles = files.filter(f => f.path !== filePath);
            if (updatedFiles.length < files.length) {
                if (updatedFiles.length === 0) {
                    this.modifiedNotesMap.delete(key);
                } else {
                    this.modifiedNotesMap.set(key, updatedFiles);
                }
            }
        }
    }

    /**
     * Formats a file size in bytes into a human-readable string (B, KB, MB, GB).
     * @param {number} bytes The file size in bytes.
     * @returns {string} The formatted file size.
     */
    formatFileSize(bytes) {
        if (bytes === 0) return '0 B';
        const k = 1024;
        const sizes = ['B', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        const fixed = i < 2 ? 0 : 1;
        return parseFloat((bytes / Math.pow(k, i)).toFixed(fixed)) + ' ' + sizes[i];
    }

    /**
     * Adds a new task to the scratchpad note using the format defined in settings.
     */
    async addNewTaskToScratchpad() {
        if (this.isScratchpadPreview || !this.noteTextarea) {
            return;
        }

        const taskFormatSetting = this.plugin.settings.scratchpad?.taskFormat || "- [ ] ";
        const processed = this.processDatePlaceholders(taskFormatSetting);
        const textToInsert = processed.text;
        const ta = this.noteTextarea;

        // 1. Capture current state
        const selectionStart = ta.selectionStart;
        const textBeforeCursor = ta.value.substring(0, selectionStart);
        const textAfterCursor = ta.value.substring(selectionStart);

        // 2. Prepare new text and update the value
        const needsLeadingNewline = textBeforeCursor.length > 0 && !textBeforeCursor.endsWith("\n");
        const finalInsertionText = needsLeadingNewline ? "\n" + textToInsert : textToInsert;
        const newText = textBeforeCursor + finalInsertionText + textAfterCursor;
        ta.value = newText;

        // 3. Set the new cursor position
        const newCursorPosition = selectionStart + finalInsertionText.length - (textToInsert.length - processed.cursorOffset);
        ta.setSelectionRange(newCursorPosition, newCursorPosition);

        // 4. Give the textarea focus
        ta.focus();

        // 5. Save the new content immediately
        this.noteText = newText;
        await this.saveFixedNote(this.noteText);
        this.updateScratchpadSearchCount();
        this.updateScratchpadHighlights();

        // 6. Use an awaited Promise with a longer delay to ensure this runs LAST.
        await new Promise(resolve => setTimeout(resolve, 50)); // 50ms delay

        const lineHeight = parseFloat(getComputedStyle(ta).lineHeight) || 20;
        const linesToCaret = ta.value.slice(0, newCursorPosition).split("\n").length;
        const targetScrollTop = (linesToCaret - 1) * lineHeight;

        // Directly set the scroll position as the final action.
        ta.scrollTop = targetScrollTop;
    }


    /**
     * Scans all Markdown files in the vault to build the initial `createdNotesMap`.
     */
    async buildCreatedNotesMap() {
        this.createdNotesMap.clear();
        const allNotes = this.app.vault.getMarkdownFiles();
        for (const file of allNotes) {
            if (this.isPathIgnored(file.path)) continue;

            const cdate = new Date(file.stat.ctime);
            const dateKey = moment(cdate).format("YYYY-MM-DD");
            if (!this.createdNotesMap.has(dateKey)) {
                this.createdNotesMap.set(dateKey, []);
            }
            this.createdNotesMap.get(dateKey).push(file);
        }
    }

    /**
     * Scans all Markdown files in the vault to build the initial `modifiedNotesMap`.
     */
    async buildModifiedNotesMap() {
        this.modifiedNotesMap.clear();
        const allNotes = this.app.vault.getMarkdownFiles();
        for (const file of allNotes) {
            if (this.isPathIgnored(file.path)) continue;

            const cdate = new Date(file.stat.ctime);
            const mdate = new Date(file.stat.mtime);
            if (!isSameDay(cdate, mdate)) {
                const dateKey = moment(mdate).format("YYYY-MM-DD");
                if (!this.modifiedNotesMap.has(dateKey)) {
                    this.modifiedNotesMap.set(dateKey, []);
                }
                if (!this.modifiedNotesMap.get(dateKey).some(f => f.path === file.path)) {
                    this.modifiedNotesMap.get(dateKey).push(file);
                }
            }
        }
    }

    /**
     * Scans all non-Markdown files in the vault to build the `assetCreationMap`.
     */
    async buildAssetCreationMap() {
        this.assetCreationMap.clear();
        const allFiles = this.app.vault.getFiles();
        const ignoreFolders = (this.plugin.settings.assetIgnoreFolders || []).map(f => f.toLowerCase().endsWith('/') ? f.toLowerCase() : f.toLowerCase() + '/');
        const hiddenTypes = (this.plugin.settings.hiddenAssetTypes || "")
            .split(',')
            .map(ext => ext.trim().toLowerCase())
            .filter(ext => ext.length > 0);

        for (const file of allFiles) {
            if (file.path.toLowerCase().endsWith('.md')) continue;
            if (hiddenTypes.includes(file.extension.toLowerCase())) continue; // Filter by extension

            const filePathLower = file.path.toLowerCase();
            if (ignoreFolders.some(folder => folder && filePathLower.startsWith(folder))) continue;

            const cdate = new Date(file.stat.ctime);
            const dateKey = moment(cdate).format("YYYY-MM-DD");
            if (!this.assetCreationMap.has(dateKey)) {
                this.assetCreationMap.set(dateKey, []);
            }
            this.assetCreationMap.get(dateKey).push(file);
        }
    }

    /**
     * Finds all asset files in the vault that are not linked to from any Markdown file.
     * @returns {Promise<Set<string>>} A promise that resolves to a Set of unused asset paths.
     */
    async getUnusedAssetPaths() {
        const allMarkdownFiles = this.app.vault.getMarkdownFiles();
        const referencedAssetPaths = new Set();

        for (const mdFile of allMarkdownFiles) {
            const cache = this.app.metadataCache.getFileCache(mdFile);
            if (!cache) continue;

            const linksAndEmbeds = [...(cache.embeds || []), ...(cache.links || [])];

            for (const ref of linksAndEmbeds) {
                const linkedFile = this.app.metadataCache.getFirstLinkpathDest(ref.link, mdFile.path);
                if (linkedFile && !linkedFile.path.toLowerCase().endsWith('.md')) {
                    referencedAssetPaths.add(linkedFile.path);
                }
            }
        }
        const allAssetPaths = this.app.vault.getFiles()
            .filter(file => !file.path.toLowerCase().endsWith('.md'))
            .map(file => file.path);

        const unusedAssetPaths = new Set(allAssetPaths.filter(assetPath => !referencedAssetPaths.has(assetPath)));
        return unusedAssetPaths;
    }

    _createBacklinkItem(container, noteFile, assetFile) {
        const itemEl = container.createDiv({ cls: 'other-notes-popup-item' });

        if (this.isImageAsset(noteFile)) {
            const thumbnail = itemEl.createEl('img', { cls: 'popup-asset-thumbnail' });
            thumbnail.src = this.app.vault.getResourcePath(noteFile);
        } else {
            setIcon(itemEl, 'file-text'); // Fallback to a generic icon
        }

        const titlePathWrapper = itemEl.createDiv({ cls: 'note-title-path-wrapper' });
        titlePathWrapper.createDiv({ text: noteFile.basename, cls: 'note-title' });
        if (noteFile.parent && noteFile.parent.path !== '/') {
            titlePathWrapper.createDiv({ text: noteFile.parent.path, cls: 'note-path' });
        }

        /*
        itemEl.addEventListener('click', async (e) => {
            // Find the specific line where the asset is mentioned
            const cache = this.app.metadataCache.getFileCache(noteFile);
            let targetLine = 0;
            if (cache) {
                const allLinks = [...(cache.embeds || []), ...(cache.links || [])];
                for (const ref of allLinks) {
                    const linkedFile = this.app.metadataCache.getFirstLinkpathDest(ref.link, noteFile.path);
                    if (linkedFile && linkedFile.path === assetFile.path) {
                        targetLine = ref.position.start.line;
                        break;
                    }
                }
            }
            const leaves = this.app.workspace.getLeavesOfType("markdown");
            const existingLeaf = leaves.find(leaf => leaf.view.file?.path === noteFile.path);

            if (existingLeaf) {
                this.app.workspace.revealLeaf(existingLeaf);
                // Navigate to the line even if the leaf is already open
                existingLeaf.view.setEphemeralState({ line: targetLine });
            } else {
                const openInNewTab = e.shiftKey || this.plugin.settings.notesOpenAction === 'new-tab';
                const leaf = this.app.workspace.getLeaf(openInNewTab);
                await leaf.openFile(noteFile, { eState: { line: targetLine } });
            }
            
            this.hideFilePopup();
        });
        */
        itemEl.addEventListener('click', async (e) => {
            // Find the specific line where the asset is mentioned
            const cache = this.app.metadataCache.getFileCache(noteFile);
            let targetLine = 0;
            if (cache) {
                const allLinks = [...(cache.embeds || []), ...(cache.links || [])];
                for (const ref of allLinks) {
                    const linkedFile = this.app.metadataCache.getFirstLinkpathDest(ref.link, noteFile.path);
                    if (linkedFile && linkedFile.path === assetFile.path) {
                        targetLine = ref.position.start.line;
                        break;
                    }
                }
            }
            
            // Use the centralized handler, passing the line number
            this.handleFileClick(noteFile, e, { line: targetLine });
            this.hideFilePopup();
        });
    }

    isImageAsset(file) {
        const imageExtensions = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'svg'];
        return imageExtensions.includes(file.extension.toLowerCase());
    }

    async showNotePopup(targetEl, noteFile) {
        this.hideFilePopup(); // Clear any existing popups
        this.popupEl = createDiv({ cls: 'other-notes-popup' });

        // --- 1. Header with Note Basename and Path ---
        const headerRow = this.popupEl.createDiv({ cls: 'popup-header' });
        headerRow.addEventListener('click', () => this.hideFilePopup());

        const titleContainer = headerRow.createDiv({ cls: 'popup-title-container' });
        titleContainer.createEl('div', { text: noteFile.basename, cls: 'popup-header-title' });

        const closeBtn = headerRow.createDiv({ cls: 'popup-close-btn' });
        setIcon(closeBtn, 'x');
        closeBtn.addEventListener('click', () => this.hideFilePopup());

        const contentWrapper = this.popupEl.createDiv({ cls: 'popup-content-wrapper' });
        const cache = this.app.metadataCache.getFileCache(noteFile);

        // --- PRE-FETCH: Find linked assets first to decide if a separator is needed ---
        const linkedAssets = [];
        if (cache) {
            const allLinks = [...(cache.embeds || []), ...(cache.links || [])];
            for (const ref of allLinks) {
                const linkedFile = this.app.metadataCache.getFirstLinkpathDest(ref.link, noteFile.path);
                if (linkedFile && !linkedFile.path.toLowerCase().endsWith('.md')) {
                    if (!linkedAssets.some(asset => asset.path === linkedFile.path)) {
                        linkedAssets.push(linkedFile);
                    }
                }
            }
        }

        // This flag determines if we need to show the separator.
        const hasAdditionalContent = linkedAssets.length > 0;

        // --- 2. File Details Section ---
        contentWrapper.createEl('h6', { text: 'Details', cls: 'popup-section-header' });
        const infoContainer = contentWrapper.createDiv({ cls: 'other-notes-popup-item is-clickable' });
        infoContainer.addEventListener('click', (e) => {
            this.handleFileClick(noteFile, e); // Use the new handler
            this.hideFilePopup();
        });

        setIcon(infoContainer, 'info');
        const infoWrapper = infoContainer.createDiv({ cls: 'note-title-path-wrapper' });

        const size = this.formatFileSize ? this.formatFileSize(noteFile.stat.size) : 'N/A';
        const created = this.formatDateTime ? this.formatDateTime(new Date(noteFile.stat.ctime)) : 'N/A';
        const modified = this.formatDateTime ? this.formatDateTime(new Date(noteFile.stat.mtime)) : 'N/A';

        infoWrapper.createDiv({ text: `Created: ${created}`, cls: 'note-path' });
        infoWrapper.createDiv({ text: `Modified: ${modified}`, cls: 'note-path' });
        infoWrapper.createDiv({ text: `Size: ${size}`, cls: 'note-path' });
        infoWrapper.createDiv({ text: `Path: ${noteFile.path}`, cls: 'note-path' });

        let tagsText = 'No tags';
        if (cache && cache.tags && cache.tags.length > 0) {
            const tagStrings = cache.tags.map(t => t.tag);
            const uniqueTags = [...new Set(tagStrings)].sort();
            tagsText = uniqueTags.join(', ');
        }
        infoWrapper.createDiv({ text: `Tags: ${tagsText}`, cls: 'note-path' });

        // --- 3. CONDITIONAL SEPARATOR & ASSETS SECTION ---
        // Only add the separator and the assets section if there are assets to show.
        if (hasAdditionalContent) {
            contentWrapper.createDiv({ cls: 'popup-separator' });

            contentWrapper.createEl('h6', { text: 'Assets in Note', cls: 'popup-section-header' });
            linkedAssets.forEach(assetFile => {
                this._createAssetListItem(contentWrapper, assetFile);
            });
        }

        // --- 4. Footer with Actions ---
        const footer = this.popupEl.createDiv({ cls: 'popup-actions-footer' });
        footer.createDiv({ style: 'flex-grow: 1' });
        const deleteBtn = footer.createDiv({ cls: 'popup-action-icon-btn mod-danger' });
        setIcon(deleteBtn, 'trash-2');
        deleteBtn.setAttribute('aria-label', 'Delete File');

        deleteBtn.addEventListener('click', () => {
            this.hideFilePopup();
            this.handleDeleteFile(noteFile);
        });

        // --- 5. Finalize and Display ---
        document.body.appendChild(this.popupEl);
        if (this.positionPopup) {
            this.positionPopup(targetEl);
        }

        this.popupEl.addEventListener('mouseenter', () => clearTimeout(this.hideTimeout));
        this.popupEl.addEventListener('mouseleave', () => {
            this.hideTimeout = setTimeout(() => this.hideFilePopup(), this.plugin.settings.popupHideDelay);
        });
    }

    positionPopup(targetEl) {
        if (!this.popupEl) return;

        const popupRect = this.popupEl.getBoundingClientRect();
        const targetRect = targetEl.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;
        const margin = this.plugin.settings.popupGap;
        let finalTop = targetRect.bottom + margin;

        // Standard overflow check (keep this)
        if (finalTop + popupRect.height > viewportHeight) {
            finalTop = targetRect.top - popupRect.height - margin;
        }

        // Mobile-specific logic to force to bottom half
        if (Platform.isMobile) {
            const viewportMidpoint = viewportHeight / 2;
            if (finalTop < viewportMidpoint) {
                finalTop = viewportMidpoint; // Force it to start at the halfway mark
            }
        }

        // Ensure it doesn't go off the top of the screen after the mobile adjustment
        if (finalTop < 0) {
            finalTop = margin;
        }

        // Adjust left position as before
        let finalLeft = targetRect.left;
        if (finalLeft + popupRect.width > viewportWidth) {
            finalLeft = targetRect.right - popupRect.width;
        }
        if (finalLeft < 0) {
            finalLeft = margin;
        }

        this.popupEl.style.top = `${finalTop}px`;
        this.popupEl.style.left = `${finalLeft}px`;
    }


    _createAssetListItem(container, assetFile) {
        const itemEl = container.createDiv({ cls: 'other-notes-popup-item is-clickable' });

        // Show a thumbnail preview if it's an image asset
        if (this.isImageAsset(assetFile)) {
            const thumbnail = itemEl.createEl('img', { cls: 'popup-asset-thumbnail' });
            thumbnail.src = this.app.vault.getResourcePath(assetFile);
        } else {
            setIcon(itemEl, 'file-text'); // Fallback icon for non-image files
        }

        // Display the asset's name and parent folder path
        const titlePathWrapper = itemEl.createDiv({ cls: 'note-title-path-wrapper' });
        titlePathWrapper.createDiv({ text: assetFile.basename, cls: 'note-title' });
        if (assetFile.parent && assetFile.parent.path !== '/') {
            titlePathWrapper.createDiv({ text: assetFile.parent.path, cls: 'note-path' });
        }

        // Add a click listener to open the asset file
        itemEl.addEventListener('click', (e) => {
            this.handleFileClick(assetFile, e); // Use the new handler
            this.hideFilePopup(); // Close the popup after clicking
        });
        
    }

    async showAssetPopup(targetEl, assetFile) {
        this.hideFilePopup();
        const backlinks = await this.findAssetBacklinks(assetFile);
        this.popupEl = createDiv({ cls: 'other-notes-popup' });

        // --- 1. Header ---
        const headerRow = this.popupEl.createDiv({ cls: 'popup-header' });
        const titleContainer = headerRow.createDiv({ cls: 'popup-title-container' });
        titleContainer.createEl('div', { text: assetFile.name, cls: 'popup-header-title' });
        const closeBtn = headerRow.createDiv({ cls: 'popup-close-btn' });
        setIcon(closeBtn, 'x');
        headerRow.addEventListener('click', () => this.hideFilePopup());

        const contentWrapper = this.popupEl.createDiv({ cls: 'popup-content-wrapper' });

        // --- 2. Asset Details & Preview ---
        contentWrapper.createEl('h6', { text: 'Details', cls: 'popup-section-header' });
        const infoContainer = contentWrapper.createDiv({ cls: 'other-notes-popup-item' });
        infoContainer.addEventListener('click', (e) => {
            this.handleFileClick(assetFile, e);
            this.hideFilePopup();
        });

        if (this.isImageAsset(assetFile)) {
            const thumbnail = infoContainer.createEl('img', { cls: 'popup-asset-thumbnail' });
            thumbnail.src = this.app.vault.getResourcePath(assetFile);
        } else {
            setIcon(infoContainer, 'file-question');
        }
        const infoWrapper = infoContainer.createDiv({ cls: 'note-title-path-wrapper' });
        infoWrapper.createDiv({ text: `Modified: ${this.formatDateTime(new Date(assetFile.stat.mtime))}`, cls: 'note-path' });
        infoWrapper.createDiv({ text: `Size: ${this.formatFileSize(assetFile.stat.size)}`, cls: 'note-path' });
        infoWrapper.createDiv({ text: `Path: ${assetFile.path}`, cls: 'note-path' });

        // --- 3. Backlinks Section ---
        if (backlinks.length > 0) {
            contentWrapper.createDiv({ cls: 'popup-separator' });
            contentWrapper.createEl('h6', { text: `Used in ${backlinks.length} note(s)`, cls: 'popup-section-header' });
            backlinks.forEach(noteFile => {
                this._createBacklinkItem(contentWrapper, noteFile, assetFile);
            });
        }

        // --- 4. Actions Section ---
        const footer = this.popupEl.createDiv({ cls: 'popup-actions-footer' });

        // NEW: Copy Link Button on the far left
        const copyBtn = footer.createDiv({ cls: 'popup-action-icon-btn' });
        setIcon(copyBtn, 'copy');
        copyBtn.setAttribute('aria-label', 'Copy markdown link');
        copyBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            const isImage = this.isImageAsset(assetFile);
            const link = this.app.fileManager.generateMarkdownLink(assetFile, '');
            const linkText = isImage ? `!${link}` : link;

            navigator.clipboard.writeText(linkText).then(() => {
                new Notice('Link copied to clipboard');
            }).catch(err => {
                new Notice('Failed to copy link');
                console.error('Failed to copy link: ', err);
            });
            this.hideFilePopup();
        });

        // Info message or a spacer to push the delete button away
        if (backlinks.length === 0) {
            const infoMessage = footer.createDiv({ cls: 'popup-info-message', style: 'flex-grow: 1; text-align: center;' });
            setIcon(infoMessage, 'info');
            infoMessage.createSpan({ text: 'Not used in any notes.' });
        } else {
            // This spacer pushes the delete button to the far right
            footer.createDiv({ style: 'flex-grow: 1;' });
        }

        // Delete icon button on the far right
        const deleteBtn = footer.createDiv({ cls: 'popup-action-icon-btn mod-danger' });
        setIcon(deleteBtn, 'trash-2');
        deleteBtn.setAttribute('aria-label', 'Delete Asset');
        deleteBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            this.hideFilePopup();
            this.handleDeleteFile(assetFile);
        });

        // --- 5. Finalize and Display ---
        document.body.appendChild(this.popupEl);
        this.positionPopup(targetEl);
        this.popupEl.addEventListener('mouseenter', () => clearTimeout(this.hideTimeout));
        this.popupEl.addEventListener('mouseleave', () => {
            this.hideTimeout = setTimeout(() => this.hideFilePopup(), this.plugin.settings.popupHideDelay);
        });
    }

    /**
     * Shows a confirmation modal and handles the permanent deletion of any file.
     * After deletion, it refreshes the notes and assets tabs.
     * @param {TFile} file - The file (note or asset) to delete.
     */
    async handleDeleteFile(file) {
        new ConfirmationModal(
            this.app,
            'Confirm Deletion',
            `Are you sure you want to permanently delete "${file.name}"? This action cannot be undone.`,
            async () => {
                try {
                    await this.app.vault.trash(file, true); // true for permanent deletion
                    new Notice(`Deleted: ${file.name}`);

                    // Refresh all relevant views
                    this.populateNotes();
                    this.populateAssets();

                    // Also refresh the calendar to remove any dots associated with the file
                    this.renderCalendar();

                } catch (err) {
                    new Notice(`Error deleting file: ${err.message}`);
                    console.error("Error during file deletion:", err);
                }
            },
            'Yes, delete'
        ).open();
    }

    /**
     * Formats a date to show time if it's today, otherwise shows the full date.
     * @param {Date} date The date to format.
     * @returns {string} The formatted date string.
     */
    formatDateTime(date) {
        if (!date) return 'N/A';
        // Ensure you are using the moment.js library instance available in Obsidian
        const momentDate = moment(date);
        if (momentDate.isSame(new Date(), 'day')) {
            return momentDate.format('HH:mm');
        }
        return momentDate.format('DD-MM-YYYY');
    }

    /**
     * Formats file size in bytes into a human-readable string (KB, MB, etc.).
     * @param {number} bytes The size of the file in bytes.
     * @returns {string} The formatted file size string.
     */
    formatFileSize(bytes) {
        if (bytes === undefined || bytes === null) return 'N/A';
        if (bytes === 0) return '0 B';

        const units = ['B', 'KB', 'MB', 'GB', 'TB'];
        const i = Math.floor(Math.log(bytes) / Math.log(1024));

        return `${parseFloat((bytes / Math.pow(1024, i)).toFixed(2))} ${units[i]}`;
    }

    applyPopupTrigger(element, file, type, isReorderable = false) {

        if (this.isReorderModeActive) {
            return; // Exit the function immediately
        }

        let longPressOccurred = false;
        const showPopup = () => {
            // This check ensures a setting for the new functionality exists.
            if (!this.plugin.settings.showNoteTooltips) return;

            if (type === 'note') {
                this.showNotePopup(element, file);
            } else { // 'asset'
                this.showAssetPopup(element, file);
            }
        };

        // 1. Mobile: Always use a long-press.
        if (Platform.isMobile) {
            let touchTimer;
            element.addEventListener('touchstart', () => {
                longPressOccurred = false;
                touchTimer = window.setTimeout(() => {
                    longPressOccurred = true;
                    // Special handling for reorderable items on mobile
                    if (isReorderable) {
                        if (navigator.vibrate) navigator.vibrate(50);
                        new Notice('Drag to reorder');
                    } else {
                        showPopup();
                    }
                }, 500);
            });

            const cancelTimer = () => clearTimeout(touchTimer);
            element.addEventListener('touchend', cancelTimer);
            element.addEventListener('touchmove', cancelTimer);
        } else {
            // 2. Desktop: Check the user's setting.
            if (this.plugin.settings.listPopupTrigger === 'hover') {
                let hoverTimeout;
                element.addEventListener('mouseenter', () => {
                    if (this.isDraggingNote || this.isPopupLocked || this.isMouseDown) return;
                    clearTimeout(this.hideTimeout);
                    this.hideFilePopup();
                    hoverTimeout = window.setTimeout(showPopup, this.plugin.settings.otherNoteHoverDelay);
                });
                element.addEventListener('mouseleave', () => {
                    clearTimeout(hoverTimeout);
                    this.hideTimeout = window.setTimeout(() => this.hideFilePopup(), this.plugin.settings.popupHideDelay);
                });
            } else { // 'rightclick'
                element.addEventListener('contextmenu', (e) => {
                    e.preventDefault();
                    showPopup();
                });
            }
        }

        // --- Primary Click Action ---
        element.addEventListener('click', (e) => {
            if (longPressOccurred) {
                longPressOccurred = false; // Reset for the next interaction
                return;
            }

            // Prevent click action if a drag handle was the target
            if (this.isDraggingNote && e.target.closest('.drag-handle')) {
                return;
            }
            
            // Use the new centralized handler
            this.handleFileClick(file, e); 
        });
    }

    groupAssets(assets) {
        const groups = {};
        const groupOrderMap = new Map();

        assets.forEach(file => {
            const monthKey = moment(file.stat.mtime).format('YYYY-MM');
            if (!groups[monthKey]) {
                groups[monthKey] = [];
                groupOrderMap.set(monthKey, {
                    key: monthKey,
                    label: moment(file.stat.mtime).format('MMMM YYYY')
                });
            }
            groups[monthKey].push(file);
        });

        const groupOrder = Array.from(groupOrderMap.values())
            .sort((a, b) => b.key.localeCompare(a.key)); // Sort descending by "YYYY-MM"

        return { groups, groupOrder };
    }

    /**
     * Renders the list of recent assets in the "Assets" tab.
     */
    async populateAssets() {
        if (!this.assetsContentEl) return;
        this.assetsContentEl.empty();

        const settings = this.plugin.settings;
        let unusedAssetPaths = new Set();

        if (settings.showUnusedAssetsIndicator || this.assetsSearchTerm.toLowerCase() === 'status:unlinked') {
            if (!this.isUnusedAssetCacheValid) {
                this.unusedAssetPathsCache = await this.getUnusedAssetPaths();
                this.isUnusedAssetCacheValid = true;
            }
            unusedAssetPaths = this.unusedAssetPathsCache;
        }

        const cutoff = moment().subtract(settings.assetsLookbackDays, 'days');
        const ignoreFolders = settings.assetIgnoreFolders.map(f => f.toLowerCase().endsWith('/') ? f.toLowerCase() : f.toLowerCase() + '/');
        const hiddenTypes = settings.hiddenAssetTypes.split(',').map(ext => ext.trim().toLowerCase()).filter(ext => ext.length > 0);

        const allAssets = this.app.vault.getFiles().filter(file => {
            if (file.path.toLowerCase().endsWith('.md') || hiddenTypes.includes(file.extension.toLowerCase())) return false;
            if (ignoreFolders.some(f => file.path.toLowerCase().startsWith(f))) return false;
            return moment(file.stat.mtime).isAfter(cutoff);
        });

        const searchTerm = this.assetsSearchTerm.toLowerCase();
        let filteredAssets;

        if (searchTerm === 'status:unlinked') {
            filteredAssets = allAssets.filter(file => unusedAssetPaths.has(file.path));
        } else if (searchTerm) {
            filteredAssets = allAssets.filter(file => file.name.toLowerCase().includes(searchTerm));
        } else {
            filteredAssets = allAssets;
        }

        filteredAssets.sort((a, b) => b.stat.mtime - a.stat.mtime);

        const groups = {
            today: [],
            yesterday: [],
            thisWeek: [],
            lastWeek: [],
        };

        // Initialize the display order with the fixed recent categories.
        const groupOrder = [
            { key: 'today', label: 'Today' },
            { key: 'yesterday', label: 'Yesterday' },
            { key: 'thisWeek', label: 'This Week' },
            { key: 'lastWeek', label: 'Last Week' },
        ];

        const now = moment();
        const startOfThisWeek = now.clone().startOf('week');
        const startOfLastWeek = now.clone().subtract(1, 'week').startOf('week');

        // Dynamically add the last 12 months to our groups and order.
        // We start from the current month and go back.
        for (let i = 0; i < 12; i++) {
            const month = now.clone().subtract(i, 'months');
            const monthKey = month.format('YYYY-MM');
            if (!groups[monthKey]) {
                groups[monthKey] = [];
                groupOrder.push({ key: monthKey, label: month.format('MMMM YYYY') });
            }
        }

        groups['older'] = []; // Catch-all for anything older than 12 months.
        groupOrder.push({ key: 'older', label: 'Older' });

        // Iterate through the filtered assets and sort them into the groups.
        filteredAssets.forEach(file => {
            const modTime = moment(file.stat.mtime);
            // Prioritize the special recent groups first.
            if (modTime.isSame(now, 'day')) {
                groups.today.push(file);
            } else if (modTime.isSame(now.clone().subtract(1, 'day'), 'day')) {
                groups.yesterday.push(file);
            } else if (modTime.isAfter(startOfThisWeek)) {
                // More reliable check for This Week
                groups.thisWeek.push(file);
            } else if (modTime.isAfter(startOfLastWeek)) {
                // More reliable check for Last Week
                groups.lastWeek.push(file);
            } else {
                // If it's not in a recent group, find the correct month bucket.
                const monthKey = modTime.format('YYYY-MM');
                if (groups[monthKey]) {
                    groups[monthKey].push(file);
                } else {
                    // If it's older than our 12-month window, put it in the older bucket.
                    groups.older.push(file);
                }
            }
        });

        if (filteredAssets.length === 0) {
            const message = searchTerm === 'status:unlinked' ? 'No unlinked assets found.' : 'No assets found.';
            this.assetsContentEl.createDiv({ text: message, cls: 'task-group-empty-message' });
            return;
        }

        // --- CHANGE 2: Initialize the IntersectionObserver ---
        this.assetObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const gridItem = entry.target;
                        const img = gridItem.querySelector('img[data-src]');
                        if (img) {
                            img.src = img.dataset.src;
                            img.removeAttribute('data-src');
                        }
                        observer.unobserve(gridItem);
                    }
                });
            }, { 
                root: this.assetsContentEl,  
                rootMargin: "100px"  
            });

        groupOrder.forEach(groupInfo => {
    const assetsInGroup = groups[groupInfo.key];  // This line should already exist or add it here if missing
    
    if (assetsInGroup.length > 0) {
        const groupContainer = this.assetsContentEl.createDiv({ cls: 'note-group-container' });
        
        // Your existing isCollapsed calculation here (from previous changes)
        const isMonthlyGroup = /^\d{4}-\d{2}$/.test(groupInfo.key);
        let isCollapsed;
        if (isMonthlyGroup) {
            isCollapsed = this.collapsedAssetGroups[groupInfo.key] !== false;
        } else {
            isCollapsed = this.collapsedAssetGroups[groupInfo.key] === true;
        }
        if (isCollapsed) groupContainer.addClass('is-collapsed');
        
        // Header creation and click handler (unchanged from previous)
        const header = groupContainer.createDiv({ cls: 'note-group-header' });
        const headerContent = header.createDiv({ cls: 'note-group-header-content' });
        const collapseIcon = headerContent.createDiv({ cls: 'note-group-collapse-icon' });
        setIcon(collapseIcon, 'chevron-down');
        headerContent.createSpan({ text: groupInfo.label });
        header.createDiv({ cls: 'note-group-count', text: assetsInGroup.length.toString() });

        header.addEventListener('click', () => {
            const isCurrentlyCollapsed = groupContainer.classList.toggle('is-collapsed');
            this.collapsedAssetGroups[groupInfo.key] = isCurrentlyCollapsed;
            this.plugin.saveSettings();
            
            // NEW: Re-observe lazy-loaded images after expansion (fixes cutoff/blank images)
            if (!isCurrentlyCollapsed && this.isAssetsGridView) {
                setTimeout(() => {
                    const gridItems = groupContainer.querySelectorAll('.asset-grid-item img[data-src]');
                    gridItems.forEach(img => {
                        if (img.dataset.src) {  // Only observe unloaded images
                            this.assetObserver.observe(img.closest('.asset-grid-item'));
                        }
                    });
                }, 150);  // Slightly longer delay for smooth CSS transition
            }
        });

        const listWrapper = groupContainer.createDiv({ cls: 'note-list-wrapper' });
        
        if (this.isAssetsGridView) {
            listWrapper.addClass('assets-grid-view');
            assetsInGroup.forEach(file => {
                const item = listWrapper.createDiv({ cls: 'asset-grid-item' });
                this.applyPopupTrigger(item, file, 'asset');
                
                const preview = item.createDiv({ cls: 'asset-grid-preview' });
                if (this.isImageAsset(file)) {
                    const thumbnail = preview.createEl('img', { attr: { 'data-src': this.app.vault.getResourcePath(file) } });
                    thumbnail.alt = file.name;  // For accessibility
                    // Observer will load this on visibility
                } else {
                    setIcon(preview, 'file-question');
                }
                item.createDiv({ text: file.name, cls: 'asset-grid-name' });
                
                // NEW: Initially observe all new grid items for lazy loading
                this.assetObserver.observe(item);
            });
        } else {
            // Your list view code unchanged...
            // Paste your existing list view rendering here (e.g., listWrapper.removeClass('assets-grid-view'); assetsInGroup.forEach(file => { const row = ... }); )
            listWrapper.removeClass('assets-grid-view');
            assetsInGroup.forEach(file => {
                const row = listWrapper.createDiv({ cls: 'note-row' });
                this.applyPopupTrigger(row, file, 'asset');

                const isUnused = unusedAssetPaths.has(file.path);
                const titleWrapper = row.createDiv({ cls: 'note-title-wrapper' });
                const iconContainer = titleWrapper.createDiv({ cls: 'asset-icon-container' });

                if (this.isImageAsset(file)) {
                    const thumbnail = iconContainer.createEl('img', { cls: 'asset-thumbnail' });
                    thumbnail.src = this.app.vault.getResourcePath(file);
                } else {
                    setIcon(iconContainer, 'file-text');
                }

                iconContainer.addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.handleFileClick(file, e);
                });

                if (isUnused && settings.showUnusedAssetsIndicator) {
                    const actionIconContainer = titleWrapper.createDiv({ cls: 'asset-action-icon' });
                    setIcon(actionIconContainer, 'trash');
                    actionIconContainer.addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.handleDeleteFile(file);
                    });
                }

                titleWrapper.createDiv({ text: file.name, cls: 'note-title' });

                const metaContainer = row.createDiv({ cls: 'note-meta-container' });
                metaContainer.createSpan({ text: this.formatFileSize(file.stat.size), cls: 'note-file-size' });
                metaContainer.createSpan({ text: this.formatDateTime(new Date(file.stat.mtime)), cls: 'note-mod-date' });
            });
        }
    }
});


        this.assetsContentEl.style.opacity = '0';
        requestAnimationFrame(() => {
            this.assetsContentEl.style.transition = 'opacity 0.2s';
            this.assetsContentEl.style.opacity = '1';
        });
    }





    /**
     * Gets the final, ordered list of tabs to display, combining user-defined order
     * with the full list of possible tabs to ensure none are missing.
     * @returns {string[]} An array of tab keys in the correct order.
     */
    getFinalTabOrder() {
        const allPossibleTabs = Object.keys(this.plugin.settings.tabVisibility);
        const userTabOrder = this.plugin.settings.tabOrder || allPossibleTabs;
        // Use a Set to merge the user's order with all possible tabs, ensuring no duplicates and that new tabs are appended.
        const finalTabOrder = [...new Set([...userTabOrder, ...allPossibleTabs])];
        return finalTabOrder;
    }

    /**
     * Adds a non-Markdown file to the `assetCreationMap`.
     * @param {TFile} file The asset file to add.
     */
    addFileToAssetMap(file) {
        if (file.path.toLowerCase().endsWith('.md')) return;

        const ignoreFolders = (this.plugin.settings.assetIgnoreFolders || []).map(f => f.toLowerCase().endsWith('/') ? f.toLowerCase() : f.toLowerCase() + '/');
        const filePathLower = file.path.toLowerCase();
        if (ignoreFolders.some(folder => folder && filePathLower.startsWith(folder))) return;

        const cdate = new Date(file.stat.ctime);
        const dateKey = moment(cdate).format("YYYY-MM-DD");
        if (!this.assetCreationMap.has(dateKey)) {
            this.assetCreationMap.set(dateKey, []);
        }
        const assets = this.assetCreationMap.get(dateKey);
        if (!assets.some(f => f.path === file.path)) {
            assets.push(file);
        }
    }

    /**
     * Removes a non-Markdown file from the `assetCreationMap` by its path.
     * @param {string} filePath The path of the asset file to remove.
     */
    removeFileFromAssetMap(filePath) {
        if (filePath.toLowerCase().endsWith('.md')) return;

        for (const [key, files] of this.assetCreationMap.entries()) {
            const updatedFiles = files.filter(f => f.path !== filePath);
            if (updatedFiles.length < files.length) {
                if (updatedFiles.length === 0) {
                    this.assetCreationMap.delete(key);
                } else {
                    this.assetCreationMap.set(key, updatedFiles);
                }
            }
        }
    }

    /**
     * Adds hover event listeners to table headers to highlight the entire column.
     * This version fixes two bugs:
     * 1. A race condition on initial load by querying for rows inside the event listener.
     * 2. A state conflict by intelligently restoring the current week highlight on mouseleave.
     *
     * @param {HTMLTableRowElement} headerRow The <tr> element containing the header cells.
     * @param {HTMLTableSectionElement} tableBody The <tbody> element of the calendar table.
     */
    addColumnHighlighting(headerRow, tableBody) {
        if (!this.plugin.settings.enableColumnHighlight) return;

        const headerCells = headerRow.querySelectorAll("th");
        document.body.classList.contains('theme-dark')
            ? this.plugin.settings.rowHighlightColorDark
            : this.plugin.settings.rowHighlightColorLight;

        headerCells.forEach((th, colIndex) => {
            if (!th.textContent.trim()) return;

            th.addEventListener('mouseenter', () => {
                const rows = tableBody.querySelectorAll('tr');
                th.classList.add('column-hover');
                rows.forEach(row => row.children[colIndex]?.classList.add('column-hover'));
            });

            th.addEventListener('mouseleave', () => {
                const rows = tableBody.querySelectorAll('tr');
                th.classList.remove('column-hover');
                rows.forEach(row => row.children[colIndex]?.classList.remove('column-hover'));
            });
        });
    }


    /**
     * Populates a given HTML element with the styled month and year title,
     * respecting all user settings. This is the single source of truth for all titles.
     * @param {HTMLElement} targetEl The element to populate.
     * @param {Date} date The date to display.
     */
    populateStyledTitle(targetEl, date) {
        if (!targetEl) return;

        targetEl.empty();

        const format = this.plugin.settings.monthTitleFormat || "MMMM YYYY";
        const formatParts = format.split(' ');

        formatParts.forEach((part, index) => {
            const isYear = /[Yy]/.test(part);

            targetEl.createSpan({
                cls: isYear ? 'month-title-year' : 'month-title-month',
                text: moment(date).format(part)
            });

            // If this is not the last part, append a NON-BREAKING space.
            // This is the only reliable way to ensure a space is rendered in a flex container.
            if (index < formatParts.length - 1) {
                targetEl.appendText('\u00A0'); // This is the unicode for a non-breaking space (&nbsp;)
            }
        });
    }


    /**
     * Formats the period and week numbers according to the user's preference.
     * @param {number} period The period number.
     * @param {number} week The week number.
     * @returns {string} The formatted string.
     */
    formatPW(period, week) { return this.plugin.settings.pwFormat.replace('#', period).replace('#', week); }

    /**
     * Renders the infinite-scrolling vertical calendar view.
     * @param {HTMLElement} container The parent element to render into.
     */
    renderVerticalCalendar(container) {
        this.intersectionObserver?.disconnect();

        // FIX 1: The variable is now a class property `this.verticalScrollerEl`
        this.verticalScrollerEl = container.createDiv("vertical-calendar-scroller");

        const initialMonthId = `month-${this.displayedMonth.getFullYear()}-${this.displayedMonth.getMonth()}`;
        const numMonthsAfter = 12;
        for (let i = -6; i <= numMonthsAfter; i++) {
            const monthDate = new Date(this.displayedMonth.getFullYear(), this.displayedMonth.getMonth() + i, 1);

            // FIX 2: Use the new class property here
            const monthWrapper = this.verticalScrollerEl.createDiv({ cls: "vertical-month-wrapper" });

            monthWrapper.id = `month-${monthDate.getFullYear()}-${monthDate.getMonth()}`;

            // Create the month title heading for the vertical list.
            const monthTitleEl = monthWrapper.createEl("h3", {
                cls: "vertical-month-title",
                // Set the initial text using the simple formatter.
                text: formatMonthTitle(monthDate, this.plugin.settings.monthTitleFormat)
            });
            monthTitleEl.style.cursor = "pointer";

            let hoverTimeout;

            monthTitleEl.addEventListener('mouseenter', () => {
                // After 400ms, use our new helper to build the perfectly consistent, styled title.
                hoverTimeout = setTimeout(() => {
                    this.populateStyledTitle(monthTitleEl, monthDate);
                }, 500);
            });

            monthTitleEl.addEventListener('mouseleave', () => {
                clearTimeout(hoverTimeout);
                // On leave, revert back to the simple text format.
                monthTitleEl.empty();
                monthTitleEl.setText(formatMonthTitle(monthDate, this.plugin.settings.monthTitleFormat));
            });

            monthTitleEl.addEventListener('click', () => {
                // Click logic remains the same.
                this.displayedMonth = monthDate;
                this.isVerticalView = false;
                this.render();
            });

            const table = monthWrapper.createEl("table", { cls: "period-calendar-table" });
            const thead = table.createEl("thead");
            const headerRow = thead.createEl("tr");

            if (this.plugin.settings.showPWColumn) {
                headerRow.createEl("th", { text: " " });
            }
            if (this.plugin.settings.showWeekNumbers) {
                headerRow.createEl("th", { text: this.plugin.settings.weekNumberColumnLabel });
            }
            const startDayOffset = this.plugin.settings.weekStartDay === 'monday' ? 1 : 0;
            for (let d = 0; d < 7; d++) {
                const dayIndex = (d + startDayOffset) % 7;
                headerRow.createEl("th", { text: moment().day(dayIndex).format("ddd").toUpperCase() });
            }

            // Add today's header highlight
            if (this.plugin.settings.highlightTodayDayHeader) {
                const today = new Date();
                if (monthDate.getFullYear() === today.getFullYear() && monthDate.getMonth() === today.getMonth()) {
                    const todayHeaderIndex = Array.from(headerRow.children).findIndex(th => th.textContent.toLowerCase() === moment(today).format("ddd").toLowerCase());
                    if (todayHeaderIndex !== -1) {
                        headerRow.children[todayHeaderIndex].addClass("today-day-header");
                    }
                }
            }

            const tbody = table.createEl("tbody");
            this.generateMonthGrid(monthDate, tbody);
            this.addColumnHighlighting(headerRow, tbody);
        }

        // After the layout is ready, scroll the initial month into view.
        this.app.workspace.onLayoutReady(() => {
            // SET FLAG before scrolling
            this.isProgrammaticScroll = true;

            const initialEl = this.verticalScrollerEl.querySelector(`#${initialMonthId}`);
            if (initialEl) {
                initialEl.scrollIntoView({ block: 'start' });
            }

            // CLEAR FLAG after scroll completes
            setTimeout(() => {
                this.isProgrammaticScroll = false;
            }, 300);
        });

        // Use a scroll listener to update the main header title.
        this.verticalScrollerEl.addEventListener('scroll', () => {
            // if programmatic scroll is in progress, do nothing
            if (this.isProgrammaticScroll) return;

            clearTimeout(this.titleUpdateTimeout);
            this.titleUpdateTimeout = setTimeout(() => {
                let topmostVisibleMonth = null;
                let smallestTopValue = Infinity;
                const scrollerTop = this.verticalScrollerEl.getBoundingClientRect().top;
                const monthElements = this.verticalScrollerEl.querySelectorAll('.vertical-month-wrapper');

                for (const monthEl of monthElements) {
                    const monthTop = monthEl.getBoundingClientRect().top;
                    if (monthTop < scrollerTop && monthTop > smallestTopValue) {
                        smallestTopValue = monthTop;
                        topmostVisibleMonth = monthEl;
                    }
                }

                if (topmostVisibleMonth) {
                    const [, year, month] = topmostVisibleMonth.id.split('-').map(Number);
                    if (this.displayedMonth.getFullYear() !== year || this.displayedMonth.getMonth() !== month) {
                        this.displayedMonth = new Date(year, month, 1);
                        this.updateMonthTitle();
                        this.updateTodayBtnAriaLabel();
                    }
                }
            }, 100);
        });
    }

    async onclose() {
        this.assetObserver?.disconnect();
        this.intersectionObserver?.disconnect();
        if (this.dailyRefreshTimeout) clearTimeout(this.dailyRefreshTimeout);
        if (this.statusBarObserver) this.statusBarObserver.disconnect();
    }

    /**
    * A helper function to create a standardized search input with a clear button.
    * @param {HTMLElement} container The parent element.
    * @param {string} placeholder The placeholder text for the input.
    * @param {(term: string) => void} onInput The callback function to execute on input.
    * @returns {HTMLInputElement} The created input element.
    */
    setupSearchInput(container, placeholder, suggestionItems, onInput) {
        const inputEl = container.createEl("input", {
            type: "text",
            placeholder: placeholder,
            cls: "pm-search-input" // Use a consistent class
        });

        // Attach the suggester, passing the onInput callback to be used upon selection.
        if (suggestionItems && suggestionItems.length > 0) {
            new FilterSuggest(this.app, inputEl, suggestionItems, onInput);
        }

        // Create the clear button inside this function
        const clearButton = container.createDiv({ cls: "search-input-clear-btn" });
        setIcon(clearButton, "x");

        clearButton.addEventListener('click', () => {
            const wasFocused = document.activeElement === inputEl;

            inputEl.value = "";
            inputEl.dispatchEvent(new Event('input'));

            if (wasFocused) {
                inputEl.focus();
            }
        });

        inputEl.addEventListener("input", (e) => {
            const term = e.target.value;
            clearButton.style.visibility = term ? 'visible' : 'hidden';
            onInput(term);
        });

        inputEl.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                e.preventDefault();
                inputEl.value = '';
                inputEl.dispatchEvent(new Event('input'));
            } else if (e.key === 'Enter') {
                // Check if the suggester is active. If so, let it handle the event.
                const suggester = this.app.workspace.activeEditorSuggest;
                if (!suggester || !suggester.isOpen) {
                    e.preventDefault();
                    onInput(inputEl.value); // Manually trigger search on Enter
                }
            } else if (e.key === 'ArrowDown') {
                // Check if the suggester is active. If so, do not interfere.
                const suggester = this.app.workspace.activeEditorSuggest;
                if (suggester && suggester.isOpen) {
                    return;
                }

                // If no suggester, proceed with custom navigation.
                e.preventDefault();
                const contentEl = this.activeTab === 'notes' ? this.notesContentEl : this.tasksContentEl;
                const firstItem = contentEl.querySelector('.note-row, .task-row');
                if (firstItem) {
                    firstItem.focus();
                }
            }
        });

        if (this.app.isMobile) {
            inputEl.addEventListener('focus', () => {
                this.calendarWasCollapsedForEditing = true;
                // This call handles state, class, AND icon.
                this.toggleCalendar(true);
            });

            inputEl.addEventListener('blur', (e) => {
                // Prevent race condition
                if (e.relatedTarget === this.collapseBtn) return;

                // Otherwise, proceed with auto-expansion logic.
                if (this.calendarWasCollapsedForEditing) {
                    this.calendarWasCollapsedForEditing = false;
                    this.toggleCalendar(false);
                }
            });
        }
        return inputEl;
    }

    /**
     * Sets up the tab container, creating draggable tabs with click and double-click behaviors.
     * @param {HTMLElement} tabContainer The parent element for the tabs.
     * @param {(tab: string) => void} switchTabs The function to call when a tab is clicked.
     * @returns {Object.<string, HTMLElement>} A map of tab keys to their corresponding HTML elements.
     */
    setupDraggableTabs(tabContainer, switchTabs) {
        tabContainer.empty();
        const tabOrder = this.getFinalTabOrder()
            .filter(key => this.plugin.settings.tabVisibility[key]);

        const tabElements = {};
        const tooltipLabels = {
            scratch: "ScratchPad",
            notes: "Recent Notes",
            pinned: "Pinned Notes",
            tasks: "Tasks",
            assets: "Assets",
            dashboard: 'Dashboard'
        };

        for (const key of tabOrder) {
            const tabEl = tabContainer.createDiv({ cls: "note-tab" });
            this.getTabLabel(tabEl, key);
            tabEl.dataset.tabKey = key;

            const initialTooltip = key === 'notes'
                ? (this.notesViewMode === 'pinned' ? tooltipLabels.pinned : tooltipLabels.notes)
                : tooltipLabels[key];
            tabEl.setAttribute('aria-label', initialTooltip);

            tabElements[key] = tabEl;

            tabEl.addEventListener("click", async (e) => {
                if (key === 'scratch' && e.shiftKey) {
                    this.openScratchpadFile(true); // Force new tab
                    return;
                }
                
                if (this.activeTab === key) {
                    // This is a second click on an already active tab, which triggers a special action.
                    if (key === 'scratch') {
                        this.openScratchpadFile();
                    } else if (key === 'tasks') {
                        const currentGroupBy = this.plugin.settings.taskGroupBy;
                        const newGroupBy = currentGroupBy === 'date' ? 'tag' : 'date';
                        this.plugin.settings.taskGroupBy = newGroupBy;

                        await this.plugin.saveData(this.plugin.settings);
                        this.getTabLabel(tabEl, 'tasks');
                        await this.populateTasks();

                    } else if (key === 'assets') {
                        this.isAssetsGridView = !this.isAssetsGridView;
                        this.getTabLabel(tabEl, 'assets');
                        await this.populateAssets();
                        this.isAssetsGridView ? 'grid' : 'list';
                    } else if (key === 'notes') {
                        this.notesViewMode = this.notesViewMode === 'recent' ? 'pinned' : 'recent';
                        this.plugin.settings.notesViewMode = this.notesViewMode;
                        await this.plugin.saveData(this.plugin.settings);

                        this.getTabLabel(tabEl, 'notes');
                        const newTooltip = this.notesViewMode === 'pinned' ? tooltipLabels.pinned : tooltipLabels.notes;
                        tabEl.setAttribute('aria-label', newTooltip);

                        await this.populateNotes();
                    } else if (key === 'dashboard') {

                        // Toggle between the two dashboard views
                        this.dashboardViewMode = this.dashboardViewMode === 'creation' ? 'tasks' : 'creation';
                        this.getTabLabel(tabEl, 'dashboard');

                        await this.populateDashboard();

                    }
                } else {
                    // This is a first click, just switch to the tab.
                    switchTabs(key);
                }
            });

            tabEl.draggable = true;
            tabEl.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('text/plain', key);
                e.dataTransfer.effectAllowed = 'move';
                setTimeout(() => tabEl.classList.add('dragging'), 0);
            });

            tabEl.addEventListener('dragend', () => tabEl.classList.remove('dragging'));

            tabEl.addEventListener('dragover', (e) => {
                e.preventDefault();
                const target = e.currentTarget;
                const rect = target.getBoundingClientRect();
                const isAfter = e.clientX > rect.left + rect.width / 2;

                target.classList.remove('drag-over-indicator-before', 'drag-over-indicator-after');
                if (isAfter) {
                    target.classList.add('drag-over-indicator-after');
                } else {
                    target.classList.add('drag-over-indicator-before');
                }
            });

            tabEl.addEventListener('dragleave', (e) => {
                e.currentTarget.classList.remove('drag-over-indicator-before', 'drag-over-indicator-after');
            });

            tabEl.addEventListener('drop', async (e) => {
                e.preventDefault();
                e.currentTarget.classList.remove('drag-over-indicator-before', 'drag-over-indicator-after');

                const draggedKey = e.dataTransfer.getData('text/plain');
                const targetKey = e.currentTarget.dataset.tabKey;
                if (draggedKey === targetKey) return;

                const rect = e.currentTarget.getBoundingClientRect();
                const isAfter = e.clientX > rect.left + rect.width / 2;

                let currentOrder = this.plugin.settings.tabOrder;
                const newOrder = currentOrder.filter(k => k !== draggedKey);
                const targetIndex = newOrder.indexOf(targetKey);

                if (isAfter) {
                    newOrder.splice(targetIndex + 1, 0, draggedKey);
                } else {
                    newOrder.splice(targetIndex, 0, draggedKey);
                }

                this.plugin.settings.tabOrder = newOrder;
                await this.plugin.saveData(this.plugin.settings);

                newOrder.forEach(k => tabContainer.appendChild(tabElements[k]));
            });
        }
        return tabElements;
    }

    updateDayHeaderHighlight() {
        // 1. If the header row doesn't exist yet, do nothing.
        if (!this.calendarHeaderRowEl) return;

        // 2. Get all the header cells ('th' elements).
        const headers = this.calendarHeaderRowEl.querySelectorAll('th');
        const today = new Date();

        // 3. IMPORTANT: Remove the highlight from every header first to reset them.
        headers.forEach(th => th.classList.remove('today-day-header'));

        // 4. If the user has this feature turned off in settings, stop here.
        if (!this.plugin.settings.highlightTodayDayHeader) {
            return;
        }

        // 5. Check if the month/year being displayed is the actual current month/year.
        const isCurrentMonth = this.displayedMonth.getFullYear() === today.getFullYear() &&
            this.displayedMonth.getMonth() === today.getMonth();

        // 6. Only if it IS the current month, apply the highlight.
        if (isCurrentMonth) {
            const todayDayOfWeek = today.getDay(); // Sunday=0, Monday=1...
            const weekStartsOnMonday = this.plugin.settings.weekStartDay === 'monday';

            let todayColumnIndex;
            if (weekStartsOnMonday) {
                todayColumnIndex = (todayDayOfWeek === 0) ? 6 : todayDayOfWeek - 1; // Mon=0, Tue=1..Sun=6
            } else {
                todayColumnIndex = todayDayOfWeek; // Sun=0, Mon=1...
            }

            // Account for the extra columns you might have (PW, WeekNr)
            let offset = 0;
            if (this.plugin.settings.showPWColumn) offset++;
            if (this.plugin.settings.showWeekNumbers) offset++;

            const targetTh = headers[todayColumnIndex + offset];
            if (targetTh) {
                targetTh.classList.add('today-day-header');
            }
        }
    }

    /**
     * The main render function for the entire view. It builds the DOM from scratch.
     */
    async render() {
        // Determine the first visible tab to be the default active tab.
        const finalTabOrder = this.getFinalTabOrder();
        const visibleTabs = finalTabOrder.filter(key => this.plugin.settings.tabVisibility[key]);

        // Only reset the active tab if it's not set or has become invisible
        if (!this.activeTab || !visibleTabs.includes(this.activeTab)) {
            this.activeTab = visibleTabs[0] || null;
        }

        this.containerEl.empty();
        const container = this.containerEl.createDiv("period-month-container");
        container.addClass(`layout-${this.plugin.settings.calendarLayout}`);
        container.addClass(`today-style-${this.plugin.settings.todayHighlightStyle}`);
        container.toggleClass("hide-grid", !this.plugin.settings.showCalendarGridLines);
        container.classList.toggle("calendar-collapsed", this.isCalendarCollapsed);
        container.toggleClass("vertical-view-active", this.isVerticalView);
        container.toggleClass('monday-start', this.plugin.settings.weekStartDay === 'monday');

        // Add weekend shading classes
        if (this.plugin.settings.highlightWeekends) {
            container.addClass('weekend-shading-enabled');
        }

        if (this.plugin.settings.showPWColumn) {
            container.addClass('has-pw-column');
        }

        if (this.plugin.settings.showWeekNumbers) {
            container.addClass('has-week-numbers');
        }

        // --- Header and Navigation ---
        const headerDiv = container.createDiv("month-header");

        this.monthNameEl = headerDiv.createDiv({ cls: "month-header-title" });
        this.updateMonthTitle();
        this.monthNameEl.addEventListener('click', () => {
            // SET THE FLAG before switching views
            this.isProgrammaticScroll = true;

            this.isVerticalView = !this.isVerticalView;
            this.render();

            // CLEAR THE FLAG after render and initial scroll complete
            setTimeout(() => {
                this.isProgrammaticScroll = false;
            }, 800);  // Longer delay for initial view render on mobile
        });
        const navDiv = headerDiv.createDiv({ cls: "month-header-nav" });

        const backBtn = navDiv.createEl("button");
        backBtn.setAttribute("aria-label", "Previous month");
        setIcon(backBtn, "chevron-left");
        backBtn.addEventListener('click', () => {
            if (this.isVerticalView) {
                // SET FLAG
                this.isProgrammaticScroll = true;

                this.displayedMonth.setMonth(this.displayedMonth.getMonth() - 1, 1);

                const targetMonthId = `month-${this.displayedMonth.getFullYear()}-${this.displayedMonth.getMonth()}`;
                const targetEl = this.verticalScrollerEl?.querySelector(`#${targetMonthId}`);

                if (targetEl) {
                    targetEl.scrollIntoView({ block: 'start', behavior: 'smooth' });
                    this.updateMonthTitle();
                    this.updateTodayBtnAriaLabel();

                    // CLEAR FLAG
                    setTimeout(() => {
                        this.isProgrammaticScroll = false;
                    }, 500);
                }
            } else {
                this.changeMonth(-1);
            }
        });
        // Store reference and add new event listener for the "Today" button
        const todayBtn = navDiv.createEl('button');
        this.todayBtn = todayBtn;
        setIcon(todayBtn, 'calendar-clock');

        // Apply initial style and ARIA label on render
        if (this.isPopupLocked) {
            this.todayBtn.classList.add('popup-locked');
        }
        this.updateTodayBtnAriaLabel();

        todayBtn.addEventListener('click', () => {

            this.goToCurrentMonth();

        });

        // Ensure the button style is correct on re-render
        if (this.isPopupLocked) {
            this.todayBtn.classList.add('popup-locked');
        }

        const forwardBtn = navDiv.createEl("button");
        forwardBtn.setAttribute("aria-label", "Next month");
        setIcon(forwardBtn, "chevron-right");
        forwardBtn.addEventListener('click', () => {
            if (this.isVerticalView) {
                // SET FLAG
                this.isProgrammaticScroll = true;
                this.displayedMonth.setMonth(this.displayedMonth.getMonth() + 1, 1);

                const targetMonthId = `month-${this.displayedMonth.getFullYear()}-${this.displayedMonth.getMonth()}`;
                const targetEl = this.verticalScrollerEl?.querySelector(`#${targetMonthId}`);

                if (targetEl) {
                    targetEl.scrollIntoView({ block: 'start', behavior: 'smooth' });
                    this.updateMonthTitle();
                    this.updateTodayBtnAriaLabel();

                    // CLEAR FLAG
                    setTimeout(() => {
                        this.isProgrammaticScroll = false;
                    }, 500);
                }
            } else {
                this.changeMonth(1);
            }
        });

        const collapseBtn = navDiv.createEl("button");
        this.collapseBtn = collapseBtn;
        collapseBtn.setAttribute("aria-label", "Toggle calendar visibility");

        //setIcon(this.collapseBtn, this.isCalendarCollapsed ? "chevron-up" : "chevron-down");
        setIcon(this.collapseBtn, 'chevron-down');


        this.collapseBtn.addEventListener('click', () => {
            // This is a manual user action, so reset the "editing" flag.
            this.calendarWasCollapsedForEditing = false;

            // Use the helper to toggle to the opposite of the current state.
            this.toggleCalendar(!this.isCalendarCollapsed);

            // If the result of the toggle is that the calendar is now expanded,
            // dismiss any active keyboard.
            if (!this.isCalendarCollapsed) {
                this.blurActiveInput();
            }
        });

        // --- Calendar Rendering (Vertical or Horizontal) ---
        if (this.isVerticalView) {
            this.renderVerticalCalendar(container);
        } else {
            const tableWrapper = container.createDiv({ cls: "calendar-table-wrapper" });
            const table = tableWrapper.createEl("table", { cls: "period-calendar-table" });
            this.attachSwipeListeners(tableWrapper, headerDiv);
            const thead = table.createEl('thead');
            this.calendarHeaderRowEl = thead.createEl('tr');

            if (this.plugin.settings.showPWColumn) {
                this.calendarHeaderRowEl.createEl('th', { text: '' });
            }
            if (this.plugin.settings.showWeekNumbers) {
                this.calendarHeaderRowEl.createEl('th', { text: this.plugin.settings.weekNumberColumnLabel });
            }

            const startDayOffset = this.plugin.settings.weekStartDay === 'monday' ? 1 : 0;
            for (let d = 0; d < 7; d++) {
                const dayIndex = (d + startDayOffset) % 7;
                // Note: The highlighting logic has been completely removed from this loop
                this.calendarHeaderRowEl.createEl('th', { text: moment().day(dayIndex).format('ddd').toUpperCase() });
            }

            this.calendarBodyEl = table.createEl("tbody");
            this.renderCalendar();
            setTimeout(() => {
                this.addColumnHighlighting(this.calendarHeaderRowEl, this.calendarBodyEl);
            }, 0);
            // Add this line right here to set the highlight correctly on the first load
            this.updateDayHeaderHighlight();

            // --- Tabs and Content Panels ---
            const tabWrapper = container.createDiv("tabs-content-wrapper");
            const areTabsVisible = Object.values(this.plugin.settings.tabVisibility).some(visible => visible);
            if (!areTabsVisible) {
                tabWrapper.style.display = 'none';
            } else {
                container.addClass("tabs-are-visible");
            }

            const tabHeader = tabWrapper.createDiv("note-tab-header");
            const tabContainer = tabHeader.createDiv("tab-container");
            const searchWrapper = tabHeader.createDiv("search-wrapper");

            const scratchpadSearchContainer = searchWrapper.createDiv({ cls: "pm-search-container" });
            const notesSearchContainer = searchWrapper.createDiv({ cls: "pm-search-container" });
            const assetsSearchContainer = searchWrapper.createDiv({ cls: "pm-search-container" });
            const tasksSearchContainer = searchWrapper.createDiv({ cls: "pm-search-container" });
            const dashboardSearchContainer = searchWrapper.createDiv({ cls: "pm-search-container" }); // <<< ADD THIS LINE

            // -- CONTENT PANELS --
            this.scratchWrapperEl = tabWrapper.createDiv({ cls: "scratchpad-wrapper" });
            this.renderScratchpadContent();

            this.notesContentEl = tabWrapper.createDiv({ cls: "notes-container" });
            this.assetsContentEl = tabWrapper.createDiv({ cls: "notes-container" });
            this.tasksContentEl = tabWrapper.createDiv({ cls: "tasks-container" });
            this.dashboardContentEl = tabWrapper.createDiv({ cls: "pm-tab-content" });

            this.taskRefreshIndicator = tabWrapper.createDiv({ cls: 'pm-refresh-indicator' });
            setIcon(this.taskRefreshIndicator, 'arrow-down');

            // Function to handle switching between tabs.
            const switchTabs = (tab) => {

                this.activeTab = tab;
                Object.values(tabElements).forEach(el => el.removeClass("active"));
                if (tabElements[tab]) tabElements[tab].addClass("active");

                // Toggle visibility of content panels and their corresponding search bars.
                this.scratchWrapperEl.style.display = (tab === "scratch") ? "grid" : "none";
                this.notesContentEl.style.display = (tab === "notes") ? "block" : "none";
                this.assetsContentEl.style.display = (tab === "assets") ? "" : "none";
                this.tasksContentEl.style.display = (tab === "tasks") ? "block" : "none";
                this.dashboardContentEl.style.display = (tab === 'dashboard') ? 'block' : 'none';

                scratchpadSearchContainer.style.display = (tab === "scratch") ? "flex" : "none";
                notesSearchContainer.style.display = (tab === "notes") ? "flex" : "none";
                assetsSearchContainer.style.display = (tab === "assets") ? "flex" : "none";
                tasksSearchContainer.style.display = (tab === "tasks") ? "flex" : "none";
                dashboardSearchContainer.style.display = (tab === "dashboard") ? "flex" : "none";

                // Populate the content of the newly activated tab.
                if (tab === "notes") this.populateNotes();
                if (tab === "assets") this.populateAssets();
                if (tab === "tasks") this.populateTasks();
                if (tab === 'dashboard') {
                    // Set the view to the user's default before populating
                    if (!this.dashboardViewMode) {
                        this.dashboardViewMode = this.plugin.settings.defaultDashboardView;
                    }

                    // Now, always re-render the label and content based on the CURRENT state.
                    // This ensures it remembers if you've toggled it.
                    this.getTabLabel(tabElements['dashboard'], 'dashboard');
                    this.populateDashboard();
                }
            };

            const tabElements = this.setupDraggableTabs(tabContainer, switchTabs);

            // -- SEARCH LOGIC --
            this.scratchpadSearchInputEl = this.setupSearchInput(
                scratchpadSearchContainer,
                'Search ScratchPad...',
                [], // <-- Ensure this empty array is here
                (term) => {
                    this.scratchpadSearchTerm = term;
                    this.updateScratchpadHighlights();
                }
            );

            // This is a logic bug from the original code; this needs to be inside the "else" block of the preview mode
            if (!this.isScratchpadPreview) {
                this.noteTextarea.value = this.noteText;
                this.noteTextarea.addEventListener("input", async () => {
                    this.noteText = this.noteTextarea.value;
                    await this.saveFixedNote(this.noteText);
                    this.updateScratchpadHighlights();
                });

                this.noteTextarea.addEventListener('scroll', () => {
                    if (this.scratchHighlighterEl) {
                        this.scratchHighlighterEl.scrollTop = this.noteTextarea.scrollTop;
                        this.scratchHighlighterEl.scrollLeft = this.noteTextarea.scrollLeft;
                    }
                });
            }

            const notesPlaceholder = this.notesViewMode === 'pinned' ? 'Filter pinned notes...' : 'Filter recent notes...';
            this.notesSearchInputEl = this.setupSearchInput(notesSearchContainer, notesPlaceholder, ['status:unlinked'], (term) => {
                this.notesSearchTerm = term;
                this.populateNotes();
            });

            // Attach the new tag suggester to the notes search input.
            new TagSuggest(this.app, this.notesSearchInputEl, this);

            const hasUnlinkedAssets = await this.hasUnlinkedAssets();
            const assetsSuggestions = hasUnlinkedAssets ? ['status:unlinked'] : [];
            this.assetsSearchInputEl = this.setupSearchInput(assetsSearchContainer, 'Filter assets...', assetsSuggestions, (term) => {
                this.assetsSearchTerm = term;
                this.populateAssets();
            });

            this.tasksSearchInputEl = this.setupSearchInput(tasksSearchContainer, 'Filter tasks...', [], (term) => {
                this.tasksSearchTerm = term;
                this.populateTasks();
            });

            // Attach the tag suggester to the tasks search input as well.
            new TagSuggest(this.app, this.tasksSearchInputEl, this);

            this.dashboardSearchInputEl = this.setupSearchInput( // <<< ADD THIS BLOCK
                dashboardSearchContainer,
                'Filter widgets...',
                [], // No suggestions needed for widget filtering
                (term) => {
                    this.dashboardSearchTerm = term;
                    this.populateDashboard(); // Re-render the dashboard with the filter applied
                }
            );

            this.updateScratchpadSearchCount();
            switchTabs(this.activeTab);
        }
        this.applyFontSettings();
    }

    /**
     * Creates a 4-step color gradient from a single base RGBA color.
     * @param {string} baseColor - The RGBA color string from settings (e.g., "rgba(74, 144, 226, 1)").
     * @returns {string[]} An array of 4 RGBA color strings with varying opacity.
     */
    createColorGradient(baseColor) {
        // Fallback gradient in case the input color is invalid
        const fallbackGradient = ['#4A271E', '#D35400', '#F39C12', '#FFB74D'];

        if (!baseColor || !baseColor.startsWith('rgba')) {
            return fallbackGradient;
        }

        try {
            const parts = baseColor.match(/(\d+)/g);
            if (!parts || parts.length < 3) {
                return fallbackGradient;
            }
            const [r, g, b] = parts;

            // Return a 4-step gradient by varying the alpha channel
            return [
                `rgba(${r}, ${g}, ${b}, 0.4)`, // Lightest shade for low activity
                `rgba(${r}, ${g}, ${b}, 0.6)`,
                `rgba(${r}, ${g}, ${b}, 0.8)`,
                `rgba(${r}, ${g}, ${b}, 1.0)`  // Full color for high activity
            ];
        } catch (error) {
            console.error("Failed to parse color for gradient:", baseColor, error);
            return fallbackGradient;
        }
    }

    /**
    * Scans all Markdown files in the vault to build a complete map for the dashboard,
    * without ignoring any paths.
    */
    async buildAllCreatedNotesMap(file, action = 'add') {
        // If no file is provided, do a full rebuild (initial load)
        if (!file) {
            this.allCreatedNotesMap.clear();
            const allFiles = this.app.vault.getMarkdownFiles();
            for (const f of allFiles) {
                this._addFileToAllCreatedMap(f);
            }
            return;
        }

        // If a file IS provided, perform a targeted update
        if (action === 'add') {
            this._addFileToAllCreatedMap(file);
        } else if (action === 'remove') {
            this._removeFileFromAllCreatedMap(file);
        }
    }

    _addFileToAllCreatedMap(file) {
        if (!(file instanceof TFile) || !file.path.toLowerCase().endsWith('.md')) return;

        let dateKey;
        if (this.isDailyNote(file)) {
            const fileDate = moment(file.basename, this.plugin.settings.dailyNoteDateFormat, true);
            dateKey = fileDate.isValid() ? fileDate.format('YYYY-MM-DD') : moment(file.stat.ctime).format('YYYY-MM-DD');
        } else {
            dateKey = moment(file.stat.ctime).format('YYYY-MM-DD');
        }

        if (!this.allCreatedNotesMap.has(dateKey)) {
            this.allCreatedNotesMap.set(dateKey, []);
        }
        this.allCreatedNotesMap.get(dateKey).push(file);
    }

    _removeFileFromAllCreatedMap(file) {
        if (!(file instanceof TFile)) return;

        // Since we don't know the date key without calculating it, we have to iterate
        for (const [dateKey, files] of this.allCreatedNotesMap.entries()) {
            const index = files.findIndex(f => f.path === file.path);
            if (index !== -1) {
                files.splice(index, 1);
                if (files.length === 0) {
                    this.allCreatedNotesMap.delete(dateKey);
                }
                break; // Assume file path is unique, so we can stop
            }
        }
    }


    async populateDashboard() {
        if (!this.dashboardContentEl) return;
        this.dashboardContentEl.empty();

        if (this.dashboardViewMode === 'tasks') {
            await this.populateTasksDashboard();
        } else {
            await this.populateCreationDashboard();
        }
    }

    // Renders a single heatmap widget based on the provided configuration.
    async renderSingleHeatmap(widgetGrid, heatmapConfig, index) {
        // Find existing widget or create a new one
        let widgetContainer = widgetGrid.querySelector(`#heatmap-widget-${index}`);
        if (!widgetContainer) {
            widgetContainer = widgetGrid.createDiv({
                cls: 'pm-widget-container',
                attr: { id: `heatmap-widget-${index}` }
            });
        } else {
            // If it exists, clear it for re-rendering
            widgetContainer.empty();
        }

        // Add filtering and data gathering logic here
        const allFiles = this.app.vault.getFiles();
        const hasValidFilter = Array.isArray(heatmapConfig.filters) && heatmapConfig.filters.length > 0 && heatmapConfig.filters.some(f => f.value && f.value.trim() !== '');

        if (!hasValidFilter) {
            this.renderEmptyHeatmapWidget(widgetContainer, heatmapConfig.name, 'Heatmap not configured. Please set a filter value in settings.');
            return;
        }

        const filteredFiles = allFiles.filter(file => this._matchesHeatmapRule(file, heatmapConfig));

        if (heatmapConfig.debug) {
            console.groupCollapsed(`--- Debug for Heatmap: ${heatmapConfig.name} ---`);
            if (filteredFiles.length > 0) {
                console.log(`Found ${filteredFiles.length} matching files:`);
                console.table(filteredFiles.map(f => ({ path: f.path })));
            } else {
                console.log('No matching files found for the configured rules.');
            }
            console.groupEnd();
        }

        const customMap = new Map();
        const userDateFormats = this.plugin.settings.customDateFormats ? this.plugin.settings.customDateFormats.split(',').map(f => f.trim()) : ['YYYY-MM-DD', 'DD-MM-YYYY'];
        for (const file of filteredFiles) {
            let dateKey = null;
            if (heatmapConfig.dateSource === 'dateFromTitle') {
                const dateRegex = /(\d{4}-\d{2}-\d{2})|(\d{2}-\d{2}-\d{4})/;
                const match = file.basename.match(dateRegex);
                if (match && match[0]) {
                    const dateMoment = moment(match[0], userDateFormats, true);
                    if (dateMoment.isValid()) {
                        dateKey = dateMoment.format('YYYY-MM-DD');
                    }
                }
            }
            if (!dateKey) {
                dateKey = moment(file.stat.ctime).format('YYYY-MM-DD');
            }
            if (!customMap.has(dateKey)) customMap.set(dateKey, []);
            customMap.get(dateKey).push(file);
        }

        // Render the widget content
        if (customMap.size > 0) {
            const color = heatmapConfig.color || 'rgba(74, 144, 226, 1)';
            const gradient = this.createColorGradient(color);
            const monthsBack = heatmapConfig.monthsBack ?? 11;
            const monthsForward = heatmapConfig.monthsForward ?? 0;
            const startDate = moment().subtract(monthsBack, 'months').startOf('month');
            const endDate = moment().add(monthsForward, 'months').endOf('month');

            // We pass the already-found container to the main render function
            const widgetKey = `custom-${index}`;
            await this.populateSingleHeatmapWidget(widgetContainer, heatmapConfig.name, customMap, gradient, { startDate, endDate }, widgetKey);

        } else {
            this.renderEmptyHeatmapWidget(widgetContainer, heatmapConfig.name);
        }
    }

    /**
     * The main orchestrator that handles AND/OR logic and calls the debug logger.
     */
    _matchesHeatmapRule(file, config) {
        // If debug is on, start a collapsible group for this file.
        if (config.debug) {
            console.groupCollapsed(`Checking File: "${file.path}"`);
        }

        const logic = config.logic || 'AND';
        const filters = config.filters || [];
        let finalMatch;

        if (logic === 'AND') {
            // .every() stops on the first 'false', perfect for AND.
            finalMatch = filters.every(rule => this._evaluateSingleRule(file, rule, config.debug));
        } else { // 'OR'
            // .some() stops on the first 'true', perfect for OR.
            finalMatch = filters.some(rule => this._evaluateSingleRule(file, rule, config.debug));
        }

        // Close the debug group for this file.
        if (config.debug) {
            console.log(`%cFinal Result: ${finalMatch ? 'MATCH' : 'NO MATCH'} (Logic: ${logic})`, `font-weight: bold; color: ${finalMatch ? 'green' : 'red'};`);
            console.groupEnd();
        }

        return finalMatch;
    }

    /**
     * The new, powerful filtering engine that evaluates a single file against a single rule.
     */
    _evaluateSingleRule(file, rule, isDebug) {
        // Provide default operator for backward compatibility
        const { type, operator = 'contains', value } = rule;
        let match = false;
        let reason = 'Rule did not match.';

        if (!value || value.trim() === '') {
            if (isDebug) console.log(`- Rule (${type}): SKIPPED (No value provided)`);
            return false;
        }

        // --- 1. Get the target value from the file to be tested ---
        let target;
        switch (type) {
            case 'filename':
                target = file.name;
                break;
            case 'filepath':
                target = file.path;
                break;
            case 'filetype':
                target = file.extension;
                break;
            case 'tag':
                const fileCache = this.app.metadataCache.getFileCache(file);
                const bodyTags = (fileCache?.tags || []).map(t => t.tag.substring(1).toLowerCase());
                const fm = fileCache?.frontmatter;
                const fmTags = fm ? [].concat(fm.tags || [], fm.tag || []).map(String).map(t => t.toLowerCase()) : [];
                target = [...new Set([...bodyTags, ...fmTags])]; // An array of unique tags
                break;
            default:
                if (isDebug) console.log(`- Rule (${type}): FAIL. Reason: Unknown filter type.`);
                return false;
        }

        // --- 2. Evaluate the rule based on the operator ---
        try {
            const lowerCaseValue = value.toLowerCase().replace(/^#/, ''); // Clean filter value
            let baseResult = false;

            // The logic for string-based types (filename, filepath, filetype)
            if (typeof target === 'string') {
                const lowerCaseTarget = target.toLowerCase();
                switch (operator) {
                    case 'matches_regex':
                    case 'not_matches_regex':
                        try {
                            const [, pattern, flags] = value.match(/\/(.*)\/(.*)/);
                            const regex = new RegExp(pattern, flags);
                            baseResult = regex.test(target); // Use original target for case-sensitive regex
                            reason = `Regex /${pattern}/${flags} ${baseResult ? 'matched' : 'did not match'} target: "${target}"`;
                        } catch (e) {
                            baseResult = false;
                            reason = `Invalid regex pattern: "${value}"`;
                        }
                        break;
                    case 'contains':
                        baseResult = lowerCaseTarget.includes(lowerCaseValue);
                        reason = `Target "${target}" ${baseResult ? 'contains' : 'does not contain'} "${value}"`;
                        break;
                    case 'equals':
                        baseResult = lowerCaseTarget === lowerCaseValue;
                        reason = `Target "${target}" ${baseResult ? 'equals' : 'does not equal'} "${value}"`;
                        break;
                    case 'starts_with':
                        baseResult = lowerCaseTarget.startsWith(lowerCaseValue);
                        reason = `Target "${target}" ${baseResult ? 'starts with' : 'does not start with'} "${value}"`;
                        break;
                    case 'ends_with':
                        baseResult = lowerCaseTarget.endsWith(lowerCaseValue);
                        reason = `Target "${target}" ${baseResult ? 'ends with' : 'does not end with'} "${value}"`;
                        break;
                }
                // Handle negation for string types
                if (operator.startsWith('not_')) {
                    match = !baseResult;
                } else {
                    match = baseResult;
                }
            }
            // The logic for array-based types (tag)
            else if (Array.isArray(target)) {
                switch (operator) {
                    case 'equals': // "is"
                        match = target.includes(lowerCaseValue);
                        reason = `Tag list [${target.join(', ')}] ${match ? 'contains' : 'does not contain'} tag "${value}"`;
                        break;
                    case 'not_equals': // "is not"
                        match = !target.includes(lowerCaseValue);
                        reason = `Tag list [${target.join(', ')}] ${match ? 'does not contain' : 'contains'} tag "${value}"`;
                        break;
                    default:
                        reason = `Operator "${operator}" is not valid for type "tag". Use "is" or "is not".`;
                        match = false;
                }
            }
        } catch (e) {
            reason = `Error during evaluation: ${e.message}`;
            match = false;
        }

        if (isDebug) {
            const style = `color: ${match ? 'green' : 'orange'}`;
            console.log(`- Rule (${type} ${operator} "${value}") -> %c${match ? 'PASS' : 'FAIL'}`, style);
            console.log(`  Reason: ${reason}`);
        }

        return match;
    }


    async populateCreationDashboard() {
        this.dashboardContentEl.empty();
        const widgetGrid = this.dashboardContentEl.createDiv({ cls: 'pm-dashboard-grid' });
        const searchTerm = this.dashboardSearchTerm.toLowerCase();
        const finalOrder = this._getFinalWidgetOrder('creation');


        const dailyNotesMap = new Map();
        const regularNotesMap = new Map();

        // This first loop correctly populates the daily and regular note maps.
        for (const [dateStr, filesOrFile] of this.allCreatedNotesMap.entries()) {
            const files = Array.isArray(filesOrFile) ? filesOrFile : [filesOrFile];

            files.forEach(file => {
                if (!file) return;

                if (this.isDailyNote(file)) {
                    if (!dailyNotesMap.has(dateStr)) dailyNotesMap.set(dateStr, []);
                    dailyNotesMap.get(dateStr).push(file);
                } else {
                    if (!regularNotesMap.has(dateStr)) regularNotesMap.set(dateStr, []);
                    regularNotesMap.get(dateStr).push(file);
                }
            });
        }

        for (const widgetKey of finalOrder) {

            if (widgetKey.startsWith('custom-')) {
                const index = parseInt(widgetKey.split('-')[1], 10);
                const heatmapConfig = this.plugin.settings.customHeatmaps?.[index];
                if (heatmapConfig) {
                    // This function now creates the container OR finds the existing one
                    await this.renderSingleHeatmap(widgetGrid, heatmapConfig, index);
                }
            } else {
                const widgetName = DASHBOARDWIDGETS.creation[widgetKey]?.name || '';
                if (searchTerm && !widgetName.toLowerCase().includes(searchTerm)) continue;

                const widgetContainer = widgetGrid.createDiv({ cls: 'pm-widget-container' });

                switch (widgetKey) {
                    case 'allfilesheatmap': {
                        const allFilesMap = new Map();
                        // Safely merge notes map
                        this.allCreatedNotesMap.forEach((files, date) => {
                            const fileList = Array.isArray(files) ? files : [files];
                            if (!allFilesMap.has(date)) allFilesMap.set(date, []);
                            allFilesMap.get(date).push(...fileList);
                        });
                        // Safely merge assets map
                        this.assetCreationMap.forEach((files, date) => {
                            const fileList = Array.isArray(files) ? files : [files];
                            if (!allFilesMap.has(date)) allFilesMap.set(date, []);
                            allFilesMap.get(date).push(...fileList);
                        });

                        const gradient = this.createColorGradient('rgba(210, 105, 30, 0.8)');
                        await this.populateSingleHeatmapWidget(widgetContainer, 'All Files', allFilesMap, gradient, {}, 'allfilesheatmap');
                        break;
                    }
                    case 'dailynotesheatmap': {
                        const gradient = this.createColorGradient(this.plugin.settings.dailyNoteDotColor);
                        const futureEndDate = moment().add(6, 'months').endOf('month');
                        await this.populateSingleHeatmapWidget(widgetContainer, "Daily Notes", dailyNotesMap, gradient, { endDate: futureEndDate }, 'dailynotesheatmap');
                        break;
                    }
                    case 'regularnotesheatmap': {
                        const gradient = this.createColorGradient(this.plugin.settings.noteCreatedColor);
                        await this.populateSingleHeatmapWidget(widgetContainer, 'Regular Notes', regularNotesMap, gradient, {}, 'regularnotesheatmap');
                        break;
                    }
                    case 'assetsheatmap': {
                        if (this.assetCreationMap.size > 0) {
                            const gradient = this.createColorGradient(this.plugin.settings.assetDotColor);
                            await this.populateSingleHeatmapWidget(widgetContainer, 'Assets', this.assetCreationMap, gradient, {}, 'assetsheatmap');
                        } else {
                            this.renderEmptyHeatmapWidget(widgetContainer, 'Assets');
                        }
                        break;
                    }
                }
            }
        }
    }

    async getTaskMetrics() {
        const allTasks = this.allTasks || [];
        const now = moment();
        const totalTasks = allTasks.length;
        const completedTasks = allTasks.filter(t => t.status === 'x').length;
        const cancelledTasks = allTasks.filter(t => t.status === '-').length;
        const inProgressTasks = allTasks.filter(t => t.status === '/').length;
        const openTasks = totalTasks - completedTasks - cancelledTasks - inProgressTasks;

        const overdueTasksCount = allTasks.filter(t =>
            t.status !== 'x' &&
            t.status !== '-' &&
            t.dueDate &&
            moment(t.dueDate).isBefore(now, 'day')
        ).length;

        return { completedTasks, openTasks, inProgressTasks, overdueTasksCount, cancelledTasks, totalTasks };
    }

    async getTaskSummaryMetrics() {
        const allTasks = this.allTasks;
        const now = moment();

        // --- Define Date Ranges ---
        const todayStart = now.clone().startOf('day');
        const todayEnd = now.clone().endOf('day');
        const tomorrowStart = now.clone().add(1, 'day').startOf('day');
        const tomorrowEnd = now.clone().add(1, 'day').endOf('day');
        const next7DaysStart = now.clone().add(2, 'day').startOf('day');
        const next7DaysEnd = now.clone().add(8, 'day').endOf('day'); // Today + 1 + 7 = 8 days from now

        // --- Initialize Metrics Buckets ---
        const metrics = {
            today: { incomplete: [], completed: [], overdue: [], inProgress: [] },
            tomorrow: { incomplete: [], completed: [], inProgress: [] },
            next7days: { incomplete: [], completed: [], inProgress: [] },
            future: { incomplete: [], inProgress: [] },
            noDue: { incomplete: [], inProgress: [] },
        };

        for (const task of allTasks) {
            const isCompleted = task.status.toLowerCase() === 'x';
            const isInProgress = task.status === '/';
            const dueDate = task.dueDate ? moment(task.dueDate) : null;
            const completionDate = task.completionDate ? moment(task.completionDate) : null;

            if (isCompleted) {
                // Logic for completed tasks
                if (completionDate) {
                    if (completionDate.isBetween(todayStart, todayEnd, null, '[]')) {
                        metrics.today.completed.push(task);
                    } else if (completionDate.isBetween(tomorrowStart, tomorrowEnd, null, '[]')) {
                        metrics.tomorrow.completed.push(task);
                    } else if (completionDate.isBetween(next7DaysStart, next7DaysEnd, null, '[]')) {
                        metrics.next7days.completed.push(task);
                    }
                }
            } else {
                // Logic for incomplete tasks
                if (!dueDate) {
                    if (isInProgress) metrics.noDue.inProgress.push(task);
                    else metrics.noDue.incomplete.push(task);
                } else if (dueDate.isBefore(startOfToday, 'day')) {
                    metrics.today.overdue.push(task);
                } else if (dueDate.isBetween(startOfToday, endOfToday, null, '[]')) {
                    if (isInProgress) metrics.today.inProgress.push(task);
                    else metrics.today.incomplete.push(task);
                } else if (dueDate.isBetween(startOfTomorrow, endOfTomorrow, null, '[]')) {
                    if (isInProgress) metrics.tomorrow.inProgress.push(task);
                    else metrics.tomorrow.incomplete.push(task);
                } else if (dueDate.isBetween(startOfNext7Days, endOfNext7Days, null, '[]')) {
                    if (isInProgress) metrics.next7days.inProgress.push(task);
                    else metrics.next7days.incomplete.push(task);
                } else if (dueDate.isAfter(endOfNext7Days, 'day')) {
                    if (isInProgress) metrics.future.inProgress.push(task);
                    else metrics.future.incomplete.push(task);
                }
            }
        }
        return metrics;
    }


    async getWeeklyTaskMetrics() {
        const allTasks = this.allTasks || [];
        const now = moment();
        const startOfToday = now.clone().startOf('day');

        const weekStartsOnMonday = this.plugin.settings.weekStartDay === 'monday';
        const weekStartString = weekStartsOnMonday ? 'isoWeek' : 'week';

        const dateRanges = {
            today: {
                start: startOfToday,
                end: now.clone().endOf('day')
            },
            thisWeek: {
                start: now.clone().startOf(weekStartString),
                end: now.clone().endOf(weekStartString)
            },
            nextWeek: {
                start: now.clone().add(1, 'week').startOf(weekStartString),
                end: now.clone().add(1, 'week').endOf(weekStartString)
            },
            next4Weeks: {
                start: startOfToday,
                end: now.clone().add(4, 'weeks').endOf('day')
            }
        };

        const metrics = {
            today: { incomplete: 0, completed: 0, overdue: 0 },
            thisWeek: { incomplete: 0, completed: 0, overdue: 0 },
            nextWeek: { incomplete: 0, completed: 0, overdue: 0 },
            next4Weeks: { incomplete: 0, completed: 0, overdue: 0 }
        };

        for (const task of allTasks) {
            const isCompleted = task.status === 'x';
            const dueDate = task.dueDate ? moment(task.dueDate) : null;
            const completionDate = task.completionDate ? moment(task.completionDate) : null;

            if (isCompleted && completionDate) {
                for (const key in dateRanges) {
                    if (completionDate.isBetween(dateRanges[key].start, dateRanges[key].end, 'day', '[]')) {
                        metrics[key].completed++;
                    }
                }
            } else if (!isCompleted && dueDate) {
                if (dueDate.isBefore(startOfToday, 'day')) {
                    // Overdue tasks are counted in all relevant future periods
                    for (const key in dateRanges) {
                        metrics[key].overdue++;
                    }
                } else {
                    for (const key in dateRanges) {
                        if (dueDate.isBetween(dateRanges[key].start, dateRanges[key].end, 'day', '[]')) {
                            metrics[key].incomplete++;
                        }
                    }
                }
            }
        }
        return metrics;
    }

    _getFinalWidgetOrder(dashboardType) {
        const visibilityKey = `${dashboardType}DashboardWidgets`;
        const orderKey = `${dashboardType}DashboardOrder`;
        const defaultWidgets = DASHBOARDWIDGETS[dashboardType];

        // FIX: Default to an empty object/array if settings are not yet defined.
        const savedVisibility = this.plugin.settings[visibilityKey] || {};
        const savedOrder = this.plugin.settings[orderKey] || [];

        let allWidgetKeys = Object.keys(defaultWidgets);
        if (dashboardType === 'creation') {
            this.plugin.settings.customHeatmaps?.forEach((_, index) => {
                allWidgetKeys.push(`custom-${index}`);
            });
        }

        // This is now safe as savedOrder is always an array.
        const finalOrder = [...savedOrder];
        allWidgetKeys.forEach(key => {
            if (!finalOrder.includes(key)) {
                finalOrder.push(key);
            }
        });

        // This filter is now safe as savedVisibility is always an object.
        return finalOrder.filter(key => {
            const exists = allWidgetKeys.includes(key);
            const isVisible = savedVisibility[key] !== false; // New widgets will default to visible.
            return exists && isVisible;
        });
    }

    async getTaskMetrics() {
        const allTasks = this.allTasks || [];
        const now = moment();
        const totalTasks = allTasks.length;
        const completedTasks = allTasks.filter(t => t.status === 'x').length;
        const cancelledTasks = allTasks.filter(t => t.status === '-').length;
        const inProgressTasks = allTasks.filter(t => t.status === '/').length;
        const openTasks = totalTasks - completedTasks - cancelledTasks - inProgressTasks;

        const overdueTasksCount = allTasks.filter(t =>
            t.status !== 'x' &&
            t.status !== '-' &&
            t.dueDate &&
            moment(t.dueDate).isBefore(now, 'day')
        ).length;

        return { completedTasks, openTasks, inProgressTasks, overdueTasksCount, cancelledTasks, totalTasks };
    }

    async getWeeklyTaskMetrics() {
        const allTasks = this.allTasks || [];
        const now = moment();
        const startOfToday = now.clone().startOf('day');

        const weekStartsOnMonday = this.plugin.settings.weekStartDay === 'monday';
        const weekStartString = weekStartsOnMonday ? 'isoWeek' : 'week';

        const dateRanges = {
            today: {
                start: startOfToday,
                end: now.clone().endOf('day')
            },
            thisWeek: {
                start: now.clone().startOf(weekStartString),
                end: now.clone().endOf(weekStartString)
            },
            nextWeek: {
                start: now.clone().add(1, 'week').startOf(weekStartString),
                end: now.clone().add(1, 'week').endOf(weekStartString)
            },
            next4Weeks: {
                start: startOfToday,
                end: now.clone().add(4, 'weeks').endOf('day')
            }
        };

        const metrics = {
            today: { incomplete: 0, completed: 0, overdue: 0 },
            thisWeek: { incomplete: 0, completed: 0, overdue: 0 },
            nextWeek: { incomplete: 0, completed: 0, overdue: 0 },
            next4Weeks: { incomplete: 0, completed: 0, overdue: 0 }
        };

        for (const task of allTasks) {
            const isCompleted = task.status === 'x';
            const dueDate = task.dueDate ? moment(task.dueDate) : null;
            const completionDate = task.completionDate ? moment(task.completionDate) : null;

            if (isCompleted && completionDate) {
                for (const key in dateRanges) {
                    if (completionDate.isBetween(dateRanges[key].start, dateRanges[key].end, 'day', '[]')) {
                        metrics[key].completed++;
                    }
                }
            } else if (!isCompleted && dueDate) {
                if (dueDate.isBefore(startOfToday, 'day')) {
                    for (const key in dateRanges) {
                        metrics[key].overdue++;
                    }
                } else {
                    for (const key in dateRanges) {
                        if (dueDate.isBetween(dateRanges[key].start, dateRanges[key].end, 'day', '[]')) {
                            metrics[key].incomplete++;
                        }
                    }
                }
            }
        }
        return metrics;
    }

    async getTaskMaps() {
        const upcomingMap = new Map();
        const overdueMap = new Map();
        const allTasks = this.allTasks;
        const now = moment();

        for (const task of allTasks) {
            // We only care about incomplete tasks with a due date
            if (task.status !== 'x' && task.status !== '-' && task.dueDate) {
                const dueDate = moment(task.dueDate);
                const isOverdue = dueDate.isBefore(now, 'day');
                const dateKey = dueDate.format('YYYY-MM-DD');

                // Add to the appropriate map
                if (isOverdue) {
                    if (!overdueMap.has(dateKey)) {
                        overdueMap.set(dateKey, []);
                    }
                    overdueMap.get(dateKey).push(task);
                } else if (dueDate.isSameOrAfter(now, 'day')) {
                    // Only include future tasks in the upcoming map
                    if (!upcomingMap.has(dateKey)) {
                        upcomingMap.set(dateKey, []);
                    }
                    upcomingMap.get(dateKey).push(task);
                }
            }
        }
        return { upcomingMap, overdueMap };
    }

    renderEmptyHeatmapWidget(parent, title, message = 'No files found matching the filter criteria.') {
        const widgetContainer = parent.createDiv({ cls: 'pm-widget-container pm-empty-widget' });

        const header = widgetContainer.createDiv({ cls: 'pm-widget-header' });
        header.createEl('h3', { text: title });

        widgetContainer.createDiv({
            text: message,
            cls: 'pm-empty-widget-message'
        });
    }

    async populateTasksDashboard() {
        this.dashboardContentEl.empty();
        const widgetGrid = this.dashboardContentEl.createDiv({ cls: 'pm-dashboard-grid' });
        const searchTerm = this.dashboardSearchTerm.toLowerCase();
        const finalOrder = this.getFinalWidgetOrder('tasks');

        const now = moment();
        const startOfToday = now.clone().startOf('day');
        const endOfToday = now.clone().endOf('day');
        const startOfTomorrow = now.clone().add(1, 'day').startOf('day');
        const endOfTomorrow = now.clone().add(1, 'day').endOf('day');
        const startOfNext7Days = now.clone().add(2, 'day').startOf('day');
        const endOfNext7Days = now.clone().add(8, 'day').endOf('day');

        const metrics = {
            today: { incomplete: [], completed: [], overdue: [], inProgress: [] },
            tomorrow: { incomplete: [], inProgress: [] },
            next7days: { incomplete: [], inProgress: [] },
            future: { incomplete: [], inProgress: [] },
            noDue: { incomplete: [], inProgress: [] }
        };

        // This loop correctly prioritizes the due date.
        for (const task of this.allTasks) {
            const isCompleted = task.status.toLowerCase() === 'x';
            const isInProgress = task.status === '/';
            const dueDate = task.dueDate ? moment(task.dueDate) : null;
            const completionDate = task.completionDate ? moment(task.completionDate) : null;

            if (isCompleted) {
                if (this.plugin.settings.showCompletedTasksToday && completionDate && completionDate.isBetween(startOfToday, endOfToday, null, '[]')) {
                    metrics.today.completed.push(task);
                }
            } else if (dueDate) { // ---> PRIORITY 1: A due date exists.
                if (dueDate.isBefore(startOfToday, 'day')) {
                    metrics.today.overdue.push(task);
                } else if (dueDate.isBetween(startOfToday, endOfToday, null, '[]')) {
                    (isInProgress ? metrics.today.inProgress : metrics.today.incomplete).push(task);
                } else if (dueDate.isBetween(startOfTomorrow, endOfTomorrow, null, '[]')) {
                    (isInProgress ? metrics.tomorrow.inProgress : metrics.tomorrow.incomplete).push(task);
                } else if (dueDate.isBetween(startOfNext7Days, endOfNext7Days, null, '[]')) {
                    (isInProgress ? metrics.next7days.inProgress : metrics.next7days.incomplete).push(task);
                } else if (dueDate.isAfter(endOfNext7Days, 'day')) {
                    (isInProgress ? metrics.future.inProgress : metrics.future.incomplete).push(task);
                }
            } else { // ---> PRIORITY 2: No due date exists.
                (isInProgress ? metrics.noDue.inProgress : metrics.noDue.incomplete).push(task);
            }
        }

        // This switch block correctly calls the new rendering function.
        for (const widgetKey of finalOrder) {
            if (!this.plugin.settings.tasksDashboardWidgets[widgetKey]) {
                continue;
            }
            const widgetName = DASHBOARDWIDGETS.tasks[widgetKey]?.name || '';
            if (searchTerm && !widgetName.toLowerCase().includes(searchTerm)) {
                continue;
            }

            switch (widgetKey) {
                case 'today':
                    this.renderTaskSummaryWidget(widgetGrid, 'Today', metrics.today.incomplete, metrics.today.completed, metrics.today.overdue, metrics.today.inProgress, [], 'today');
                    break;
                case 'tomorrow':
                    this.renderTaskSummaryWidget(widgetGrid, 'Tomorrow', metrics.tomorrow.incomplete, [], [], metrics.tomorrow.inProgress, [], 'tomorrow');
                    break;
                case 'next7days':
                    this.renderTaskSummaryWidget(widgetGrid, 'Next 7 Days', metrics.next7days.incomplete, [], [], metrics.next7days.inProgress, [], 'next7days');
                    break;
                case 'futureNoDue': {
                    const combinedIncomplete = metrics.future.incomplete || [];
                    const combinedInProgress = [...(metrics.future.inProgress || []), ...(metrics.noDue.inProgress || [])];
                    this.renderTaskSummaryWidget(widgetGrid, 'Future / No Due', combinedIncomplete, [], [], combinedInProgress, metrics.noDue.incomplete, 'futureNoDue');
                    break;
                }
                case 'upcomingoverdue':
                    const { upcomingMap, overdueMap } = await this.getTaskMaps();
                    const totalDataMap = new Map(upcomingMap);
                    overdueMap.forEach((tasks, date) => {
                        const existingTasks = totalDataMap.get(date) || [];
                        totalDataMap.set(date, existingTasks.concat(tasks));
                    });
                    const upcomingGradient = this.createColorGradient(this.plugin.settings.taskStatusColorOpen);
                    const overdueBaseColor = this.getComputedCssVar('--task-color-overdue');
                    const overdueGradient = this.createColorGradient(overdueBaseColor);
                    const futureEndDate = moment().add(12, 'months').endOf('month');
                    await this.populateSingleHeatmapWidget(
                        widgetGrid.createDiv({ cls: 'pm-widget-container' }),
                        'Upcoming & Overdue Tasks',
                        totalDataMap,
                        upcomingGradient,
                        {
                            endDate: futureEndDate,
                            upcomingMap: upcomingMap,
                            overdueMap: overdueMap,
                            overdueGradient: overdueGradient
                        },
                        'upcomingoverdue'
                    );
                    break;
                case 'taskcompletionheatmap': {
                    const widgetContainer = widgetGrid.createDiv({ cls: 'pm-widget-container' });
                    const completionMap = new Map();
                    this.allTasks.forEach(task => {
                        if (task.status === 'x' && task.completionDate) {
                            const dateKey = moment(task.completionDate).format('YYYY-MM-DD');
                            if (!completionMap.has(dateKey)) completionMap.set(dateKey, []);
                            completionMap.get(dateKey).push(task);
                        }
                    });
                    const gradient = this.createColorGradient(this.plugin.settings.taskStatusColorCompleted);
                    await this.populateSingleHeatmapWidget(widgetContainer, "Task Completion Activity", completionMap, gradient, {}, 'taskcompletionheatmap');
                    break;
                }
                case 'taskstatusoverview':
                    const { completedTasks, openTasks, inProgressTasks, overdueTasksCount, cancelledTasks, totalTasks } = await this.getTaskMetrics();
                    this.renderTaskStatusWidget(widgetGrid, completedTasks, openTasks, inProgressTasks, overdueTasksCount, cancelledTasks, totalTasks, 'taskstatusoverview');
                    break;
            }
        }
    }



    getFinalWidgetOrder(dashboardType) {
        const visibilityKey = `${dashboardType}DashboardWidgets`;
        const orderKey = `${dashboardType}DashboardOrder`;
        const defaultWidgets = DASHBOARDWIDGETS[dashboardType];

        // Safely get settings, defaulting to empty objects/arrays if they don't exist
        const savedVisibility = this.plugin.settings[visibilityKey] || {};
        const savedOrder = this.plugin.settings[orderKey] || [];

        // Get all possible widget keys
        let allWidgetKeys = Object.keys(defaultWidgets);
        if (dashboardType === 'creation') {
            // Also include custom heatmaps for the creation dashboard
            (this.plugin.settings.customHeatmaps || []).forEach((_, index) => {
                allWidgetKeys.push(`custom-${index}`);
            });
        }

        // Merge saved order with all possible keys to ensure new widgets are included
        const finalOrder = [...new Set([...savedOrder, ...allWidgetKeys])];

        // Filter the final list based on visibility settings
        return finalOrder.filter(key => {
            const exists = allWidgetKeys.includes(key);
            // If a widget's visibility is not explicitly set, default to visible (true)
            const isVisible = savedVisibility[key] !== false;
            return exists && isVisible;
        });
    }

    renderTaskStatusWidget(parentContainer, completedTasks, openTasks, inProgressTasks, overdueTasks, cancelledTasks, totalTasks, widgetKey) {
        const statsContainer = parentContainer.createDiv({ cls: 'pm-widget-container' });

        // --- 1. State Management ---
        const isCollapsed = this.plugin.settings.collapsedWidgets[widgetKey] === true;
        if (isCollapsed) {
            statsContainer.addClass('is-collapsed');
        }

        // --- 2. Create UI Elements ---
        const header = statsContainer.createDiv({ cls: 'pm-widget-header' });
        const toggleIcon = header.createDiv({ cls: 'widget-toggle-icon' });
        header.createEl('h3', { text: 'Task Status Overview' });

        // This wrapper will be hidden when collapsed
        const barChartsWrapper = statsContainer.createDiv({ cls: 'widget-content-wrapper' });

        // --- 3. Click Handler to Toggle State ---
        header.addEventListener('click', async () => {
            const currentlyCollapsed = statsContainer.classList.toggle('is-collapsed');
            this.plugin.settings.collapsedWidgets[widgetKey] = currentlyCollapsed;
            await this.plugin.saveSettings();
        });

        // --- 4. Bar Chart Rendering Logic ---
        const renderBars = () => {
            barChartsWrapper.empty();
            this.renderTaskBarChart(barChartsWrapper, 'Cancelled', cancelledTasks, totalTasks, this.plugin.settings.taskStatusColorCancelled);
            this.renderTaskBarChart(barChartsWrapper, 'Overdue', overdueTasks, totalTasks, this.plugin.settings.taskStatusColorOverdue);
            this.renderTaskBarChart(barChartsWrapper, 'In Progress', inProgressTasks, totalTasks, this.plugin.settings.taskStatusColorInProgress);
            this.renderTaskBarChart(barChartsWrapper, 'Open', openTasks, totalTasks, this.plugin.settings.taskStatusColorOpen);
            this.renderTaskBarChart(barChartsWrapper, 'Completed', completedTasks, totalTasks, this.plugin.settings.taskStatusColorCompleted);
        };

        renderBars();

        // --- 5. Set Initial Icon ---
        setIcon(toggleIcon, 'chevron-down');
    }

    /**
     * Renders a single horizontal bar chart for a task statistic.
     * This function creates the DOM elements directly without using Chart.js for better performance
     * and to match the requested style.
     *
     * @param {HTMLElement} parentContainer The container to append this chart to.
     * @param {string} label The text label for the metric (e.g., "Overdue").
     * @param {number} value The count for this metric.
     * @param {number} total The total number of items to calculate the percentage against.
     * @param {string} color The color of the bar.
     */
    renderTaskBarChart(parentContainer, label, value, total, color) {
        const percentage = total > 0 ? ((value / total) * 100).toFixed(0) : 0;
        const widgetEl = parentContainer.createDiv({ cls: 'pm-bar-chart-widget' });

        // Determine what value to display based on the current mode
        const displayValue = this.taskBarChartMode === 'percent'
            ? `${percentage}%`
            : `${value}`;

        // Create the DOM elements
        widgetEl.createEl('div', { text: label, cls: 'pm-bar-label' });
        widgetEl.createEl('div', { text: displayValue, cls: 'pm-bar-display-value' });

        const barTrack = widgetEl.createDiv({ cls: 'pm-bar-track' });
        const barFill = barTrack.createDiv({ cls: 'pm-bar-fill' });

        barFill.style.width = `${percentage}%`;
        barFill.style.backgroundColor = color;
    }

    /**
     * Helper to re-render just the calendar grid.
     */
    renderCalendar() {
        if (this.calendarBodyEl) {
            this.calendarBodyEl.empty();
            this.generateMonthGrid(this.displayedMonth, this.calendarBodyEl);
        }
    }

    /**
     * Shows a popup listing all notes, tasks, and assets associated with a specific day.
     * @param {HTMLElement} targetEl The calendar day element to position the popup near.
     * @param {object} dataByType An object containing arrays of items to display, keyed by type.
     * @param {Date} date The date for which the popup is being shown.
     */
    showFilePopup(targetEl, dataByType, dateOrTitle, isMobile = false) {
    
        this.hideFilePopup();
        this.popupEl = createDiv({ cls: 'other-notes-popup' });
        const { settings } = this.plugin;

        if (isMobile) {
            this.popupEl.addClass('is-mobile-popup');
        }

        // Add header with a close button and dynamic date/title
        const headerRow = this.popupEl.createDiv({ cls: 'popup-header' });

        // This logic now correctly uses the 'dateOrTitle' parameter to handle
        // both Date objects (from heatmaps) and title strings (from summary widgets).
        let headerText;
        if (typeof dateOrTitle === 'string') {
            headerText = dateOrTitle;
        } else {
            headerText = moment(dateOrTitle).format("dddd, D MMMM YYYY");
        }
        headerRow.createDiv({ cls: 'popup-header-title', text: headerText });

        const closeBtn = headerRow.createDiv({ cls: 'popup-close-btn' });
        setIcon(closeBtn, 'x');
        headerRow.addEventListener('click', () => this.hideFilePopup());

        // Create a scrollable wrapper for the content
        const contentWrapper = this.popupEl.createDiv({ cls: 'popup-content-wrapper' });

        // logic for ICS events
        if (dataByType.ics && dataByType.ics.length > 0) {
            contentWrapper.createEl('h6', { text: "Calendar Events", cls: "popup-section-header" });
            dataByType.ics.forEach(event => {
                const itemEl = contentWrapper.createDiv({ cls: "other-notes-popup-item is-calendar-event" });
                const iconEl = itemEl.createDiv({ cls: 'note-icon' });
                setIcon(iconEl, 'calendar');
                const titleWrapper = itemEl.createDiv({ cls: 'note-title-wrapper' });
                titleWrapper.createDiv({ cls: 'note-title' }).setText(event.summary);
                if (!event.isAllDay && event.startTime && event.endTime) {
                    const timeString = `${event.startTime} - ${event.endTime}`;
                    titleWrapper.createDiv({ text: timeString, cls: 'note-path' });
                }
            });
            const hasOtherContent = (dataByType.tasks && dataByType.tasks.length > 0) || (dataByType.daily && dataByType.daily.length > 0);
            if (hasOtherContent) {
                contentWrapper.createDiv({ cls: "popup-separator" });
            }
        }

        const addFileToList = (container, file, type) => {
            const itemEl = container.createDiv({ cls: 'other-notes-popup-item' });
            const settings = this.plugin.settings;
            const dot = itemEl.createDiv({ cls: 'popup-file-dot' });
            if (type === 'daily') {
                dot.style.backgroundColor = settings.dailyNoteDotColor;
            } else if (type === 'created') {
                dot.style.backgroundColor = settings.noteCreatedColor;
            } else if (type === 'modified') {
                dot.style.backgroundColor = settings.noteModifiedColor;
            } else if (type === 'asset') {
                dot.style.backgroundColor = settings.assetDotColor;
            }
            if (type === 'asset' && this.isImageAsset(file)) {
                const thumbnail = itemEl.createEl('img', { cls: 'popup-asset-thumbnail' });
                thumbnail.src = this.app.vault.getResourcePath(file);
            }
            const titlePathWrapper = itemEl.createDiv({ cls: 'note-title-path-wrapper' });
            const displayName = file.path.toLowerCase().endsWith('.md') ? file.basename : file.name;
            titlePathWrapper.createDiv({ text: displayName, cls: 'note-title' });
            if (file.parent && file.parent.path !== '/') {
                titlePathWrapper.createDiv({ text: file.parent.path, cls: 'note-path' });
            }
            
            itemEl.addEventListener('click', (e) => {
                e.stopPropagation(); 
                e.stopImmediatePropagation();
                this.handleFileClick(file, e, {});
                this.hideFilePopup();
            });
        };

        const addTaskToList = (container, task, view) => {
            const itemEl = container.createDiv({ cls: 'other-notes-popup-item' });
            itemEl.dataset.taskStatus = task.status;

            const checkbox = itemEl.createDiv({ cls: 'task-checkbox-symbol' });
            view._renderTaskSymbol(checkbox, task);
            checkbox.addEventListener('click', async (e) => {
                e.stopPropagation();
                checkbox.disabled = true;
                await view.toggleTaskCompletion(task);
            });

            const textSpan = itemEl.createSpan({ cls: 'task-text' });

            // Add completed class if task is completed
            const isCompleted = task.status.toLowerCase() === 'x';
            if (isCompleted) {
                textSpan.classList.add('completed');
            }

            // Render text using MarkdownRenderer
            MarkdownRenderer.render(this.app, task.text, textSpan, task.file.path, this);

             itemEl.addEventListener('click', (e) => {
                e.stopPropagation();
                e.stopImmediatePropagation();

                view.handleFileClick(task.file, e, { line: task.lineNumber });
                view.hideFilePopup();
            });
        };



        // logic for populating the content
        const allFiles = [...(dataByType.daily || []), ...(dataByType.created || []), ...(dataByType.modified || []), ...(dataByType.assets || [])];
        const hasTasks = dataByType.tasks && dataByType.tasks.length > 0;
        const hasFiles = allFiles.length > 0;

        if (hasTasks) {
            contentWrapper.createEl('h6', { text: 'Tasks', cls: 'popup-section-header' });

            // Sorts the tasks array in place by date, in ascending order.
            dataByType.tasks.sort((a, b) => {
                // Get the due date for task A, or fall back to its file's creation time.
                // Use 0 as a final fallback to prevent errors with items that have no date info.
                const dateA = a.dueDate ? a.dueDate.getTime() : (a.file ? a.file.stat.ctime : 0);

                // Get the due date for task B, with the same fallback logic.
                const dateB = b.dueDate ? b.dueDate.getTime() : (b.file ? b.file.stat.ctime : 0);

                // Subtracting the dates sorts them in ascending (oldest to newest) order.
                return dateA - dateB;
            });

            dataByType.tasks.forEach(task => addTaskToList(contentWrapper, task, this));
        }
        if (hasTasks && hasFiles) {
            contentWrapper.createDiv({ cls: 'popup-separator' });
        }
        if (hasFiles) {
            contentWrapper.createEl('h6', { text: 'Notes & Assets', cls: 'popup-section-header' });

            // Create a Set to keep track of the paths of files already added to the popup.
            const renderedFilePaths = new Set();

            // Helper function to render a file only if it hasn't been rendered yet.
            const addUniqueFile = (file, type) => {
                if (file && file.path && !renderedFilePaths.has(file.path)) {
                    addFileToList(contentWrapper, file, type);
                    renderedFilePaths.add(file.path);
                }
            };

            // Process daily notes first to give them priority.
            (dataByType.daily || []).forEach(file => addUniqueFile(file, 'daily'));

            // Process created, modified, and asset notes, skipping any that are already rendered.
            (dataByType.created || []).forEach(file => addUniqueFile(file, 'created'));
            (dataByType.modified || []).forEach(file => addUniqueFile(file, 'modified'));
            (dataByType.assets || []).forEach(file => addUniqueFile(file, 'asset'));
        }

        if (!contentWrapper.hasChildNodes()) {
            this.hideFilePopup();
            return;
        }

        // event listeners and positioning logic
        this.popupEl.addEventListener('mouseenter', () => clearTimeout(this.hideTimeout));
        this.popupEl.addEventListener('mouseleave', () => {
            this.hideTimeout = setTimeout(() => this.hideFilePopup(), this.plugin.settings.popupHideDelay);
        });

        document.body.appendChild(this.popupEl);

        this.popupEl.addEventListener('click', (e) => {
            e.stopPropagation();
        });

        if (isMobile) {
            const margin = 8;
            this.popupEl.style.position = 'fixed';
            this.popupEl.style.bottom = `${margin}px`;
            this.popupEl.style.left = `${margin}px`;
            this.popupEl.style.width = `calc(100% - ${margin * 2}px)`;
            this.popupEl.style.maxHeight = '45vh';
            this.popupEl.style.boxSizing = 'border-box';
            this.popupEl.style.top = '';
            this.popupEl.style.visibility = 'visible';
        } else {
            const popupRect = this.popupEl.getBoundingClientRect();
            const targetRect = targetEl.getBoundingClientRect();
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            const margin = this.plugin.settings.popupGap;
            let finalTop = targetRect.bottom + margin;
            if (finalTop + popupRect.height > viewportHeight) finalTop = targetRect.top - popupRect.height - margin;
            if (finalTop < margin) finalTop = margin;
            let finalLeft = targetRect.left;
            if (finalLeft + popupRect.width > viewportWidth - margin) finalLeft = targetRect.right - popupRect.width;
            if (finalLeft < margin) finalLeft = margin;
            this.popupEl.style.top = `${finalTop}px`;
            this.popupEl.style.left = `${finalLeft}px`;
            this.popupEl.style.visibility = 'visible';
        }
    }

    /**
     * Hides and destroys the file popup element.
     */
    hideFilePopup() {
        clearTimeout(this.hoverTimeout);
        clearTimeout(this.hideTimeout);
        if (this.popupEl) {
            this.popupEl.remove();
            this.popupEl = null;
            this.taskRefreshDebounceTimer = null;
            this.dashboardRefreshDebounceTimer = null;
            this.taskCache = new Map();
        }
    }

    updateMonthTitle() {
        this.populateStyledTitle(this.monthNameEl, this.displayedMonth);
    }

    changeMonth(offset, toToday = false) {
        if (toToday) {
            this.displayedMonth = new Date();
        } else {
            this.displayedMonth.setMonth(this.displayedMonth.getMonth() + offset, 1);
        }

        this.updateMonthTitle();
        this.renderCalendar();
        this.updateTodayBtnAriaLabel();

        this.updateDayHeaderHighlight();
    }

    updateTodayBtnAriaLabel() {
        const now = new Date();
        const isCurrentMonth = moment(this.displayedMonth).isSame(now, 'month');
        let label;

        if (isCurrentMonth) {
            label = this.isPopupLocked ? 'Popups Disabled. Click to re-enable.' : 'Popups Enabled. Click to disable.';
        } else {
            label = 'Go to Current Month';
        }
        this.todayBtn.setAttribute('aria-label', label);
    }

    isElementInViewport(el) {
        if (!el) return false;
        const rect = el.getBoundingClientRect();
        return (
            rect.top >= 0 &&
            rect.left >= 0 &&
            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
            rect.right <= (window.innerWidth || document.documentElement.clientWidth)
        );
    }


    /**
     * Adds keyboard event listeners to a row element for list navigation.
     * @param {HTMLElement} row The row element (e.g., a `.note-row` or `.task-row`).
     * @param {HTMLInputElement} searchInputEl The search input associated with the list.
     */
    addKeydownListeners(row, searchInputEl) {
        row.setAttribute('tabindex', -1); // Make the row focusable.
        row.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                row.click();
                return;
            }

            if (e.key !== 'ArrowDown' && e.key !== 'ArrowUp') return;

            e.preventDefault();

            const container = row.closest('.notes-container, .tasks-container');
            if (!container) return;

            const items = Array.from(container.querySelectorAll('.note-row, .task-row'));
            const currentIndex = items.indexOf(row);

            let nextIndex = e.key === 'ArrowDown' ? currentIndex + 1 : currentIndex - 1;

            if (nextIndex >= 0 && nextIndex < items.length) {
                items[nextIndex].focus();
            } else if (e.key === 'ArrowUp' && searchInputEl) {
                // If at the top of the list, focus the search input.
                searchInputEl.focus();
            }
        });
    }

    /**
     * Populates the "Notes" tab with either recent or pinned notes.
     */
    async populateNotes() {
        if (!this.notesContentEl) return;
        this.notesContentEl.empty();

        const settings = this.plugin.settings;
        let notesToShow = [];

        // --- 1. FILTER AND SORT NOTES ---
        if (this.notesViewMode === 'pinned') {
            const pinValue = settings.pinTag.toLowerCase();
            notesToShow = this.app.vault.getMarkdownFiles().filter(file => {
                const cache = this.app.metadataCache.getFileCache(file);
                if (!cache) return false;

                if (cache.tags?.some(tag => tag.tag.toLowerCase().includes(pinValue))) {
                    return true;
                }

                const frontmatter = cache.frontmatter;
                if (frontmatter) {
                    for (const key in frontmatter) {
                        const value = frontmatter[key];
                        if (typeof value === 'string' && value.toLowerCase().includes(pinValue)) {
                            return true;
                        }
                        if (Array.isArray(value) && value.some(item => typeof item === 'string' && item.toLowerCase().includes(pinValue))) {
                            return true;
                        }
                    }
                }
                return false;
            });

            if (this.pinnedSortOrder === 'z-a') {
                notesToShow.sort((a, b) => b.basename.localeCompare(a.basename));
            } else if (this.pinnedSortOrder === 'custom') {
                const customOrder = settings.pinnedNotesCustomOrder;
                notesToShow.sort((a, b) => {
                    const indexA = customOrder.indexOf(a.path);
                    const indexB = customOrder.indexOf(b.path);

                    if (indexA !== -1 && indexB !== -1) {
                        return indexA - indexB;
                    }
                    if (indexA !== -1) {
                        return -1;
                    }
                    if (indexB !== -1) {
                        return 1;
                    }
                    return a.basename.localeCompare(b.basename);
                });
            } else { // a-z
                notesToShow.sort((a, b) => a.basename.localeCompare(b.basename));
            }
        } else { // recent notes mode
            // When not in pinned mode, ensure reorder mode is always off
            this.isReorderModeActive = false;
            const cutoff = moment().subtract(settings.notesLookbackDays, 'days').valueOf();
            notesToShow = this.app.vault.getMarkdownFiles()
                .filter(file => !settings.ignoreFolders.some(f => file.path.startsWith(f)) && (file.stat.mtime >= cutoff || file.stat.ctime >= cutoff))
                .sort((a, b) => b.stat.mtime - a.stat.mtime);
        }

        // --- 2. APPLY SEARCH TERM ---
        // --- Filtering Logic ---
        const searchTerm = this.notesSearchTerm.toLowerCase();
        let filteredNotes;

        if (searchTerm.startsWith('#')) {
            const tagToFilter = searchTerm.toLowerCase();
            const tagWithoutHash = tagToFilter.substring(1);

            filteredNotes = notesToShow.filter(file => {
                const cache = this.app.metadataCache.getFileCache(file);
                if (!cache) return false;

                // 1. Check inline tags
                if (cache.tags && cache.tags.some(t => t.tag.toLowerCase() === tagToFilter)) {
                    return true;
                }

                // 2. Check frontmatter 'tags' property
                if (cache.frontmatter && cache.frontmatter.tags) {
                    const fmTags = Array.isArray(cache.frontmatter.tags) ? cache.frontmatter.tags : [cache.frontmatter.tags];
                    if (fmTags.some(tag => typeof tag === 'string' && tag.toLowerCase() === tagWithoutHash)) {
                        return true;
                    }
                }

                // 3. Check frontmatter 'tag' property (singular)
                if (cache.frontmatter && typeof cache.frontmatter.tag === 'string' && cache.frontmatter.tag.toLowerCase() === tagWithoutHash) {
                    return true;
                }

                return false;
            });
        } else if (searchTerm === 'status:unlinked') {
            // This is a placeholder for the unlinked notes logic you might add
            // For now, it will show all notes. Replace with actual logic.
            filteredNotes = notesToShow;
        } else if (searchTerm) {
            filteredNotes = notesToShow.filter(file => file.basename.toLowerCase().includes(searchTerm));
        } else {
            filteredNotes = notesToShow;
        }

        // --- 3. RENDER THE VIEW ---
        if (this.notesViewMode === 'pinned') {
            const groupContainer = this.notesContentEl.createDiv({ cls: 'note-group-container' });
            // Apply the reorder mode class if it's active
            if (this.isReorderModeActive) {
                groupContainer.addClass('reorder-mode-active');
            }

            const header = groupContainer.createDiv({ cls: 'note-group-header' });
            const headerContent = header.createDiv({ cls: 'note-group-header-content', attr: { 'aria-live': 'polite' } });
            setIcon(headerContent, settings.tabIcons.pinned || 'pin');
            headerContent.createSpan({ text: 'Pinned Notes' });

            const sortIndicator = headerContent.createSpan({ cls: 'pinned-sort-indicator' });
            const updateSortVisuals = () => {
                if (this.pinnedSortOrder === 'z-a') {
                    sortIndicator.setText('Z-A');
                    headerContent.setAttribute('aria-label', 'Current sort: Z-A. Click for Custom sort.');
                } else if (this.pinnedSortOrder === 'custom') {
                    sortIndicator.setText('Custom');
                    headerContent.setAttribute('aria-label', 'Current sort: Custom. Click for A-Z sort.');
                } else { // a-z
                    sortIndicator.setText('A-Z');
                    headerContent.setAttribute('aria-label', 'Current sort: A-Z. Click for Z-A sort.');
                }
            };
            updateSortVisuals();

            let longPressTriggered = false;

            // A standard click cycles through sort orders and disables reorder mode.
            headerContent.addEventListener('click', () => {

                if (longPressTriggered) {
                    longPressTriggered = false;
                    return;
                }

                this.isReorderModeActive = false; // Always disable reorder mode on click
                if (this.pinnedSortOrder === 'a-z') this.pinnedSortOrder = 'z-a';
                else if (this.pinnedSortOrder === 'z-a') this.pinnedSortOrder = 'custom';
                else this.pinnedSortOrder = 'a-z';
                this.populateNotes();
            });

            // A long-press on mobile (in custom sort) toggles reorder mode.
            if (Platform.isMobile) {
                let touchTimer = null;
                headerContent.addEventListener('touchstart', (e) => {
                    if (this.pinnedSortOrder !== 'custom') return;
                    e.preventDefault();
                    longPressTriggered = false;
                    touchTimer = window.setTimeout(() => {
                        touchTimer = null;
                        longPressTriggered = true;

                        this.isReorderModeActive = !this.isReorderModeActive;
                        if (navigator.vibrate) navigator.vibrate(50);
                        //new Notice(`Reorder mode ${this.isReorderModeActive ? 'enabled' : 'disabled'}.`);
                        this.populateNotes(); // Re-render to show/hide handles
                    }, 700);
                });
                const cancelTimer = () => clearTimeout(touchTimer);
                headerContent.addEventListener('touchend', cancelTimer);
                headerContent.addEventListener('touchmove', cancelTimer);
            }

            header.createDiv({ cls: 'note-group-count', text: filteredNotes.length.toString() });

            const listWrapper = groupContainer.createDiv({ cls: 'note-list-wrapper' });

            if (filteredNotes.length === 0) {
                const emptyMessageEl = listWrapper.createDiv({ cls: 'pinned-notes-empty-message' });
                const pinTag = this.plugin.settings.pinTag || 'pin'; // Safely get the tag
                emptyMessageEl.innerHTML = `No pinned notes. To pin a note, add the <code>#${pinTag}</code> tag to its properties or body.`;
            } else {
                listWrapper.addEventListener('drop', async (e) => {
                    e.preventDefault();
                    await this.savePinnedOrder(listWrapper);
                });

                filteredNotes.forEach(file => this.renderNoteItem(file, listWrapper));
            }

        } else { // recent notes mode
            const groups = {
                today: [],
                yesterday: [],
                thisWeek: [],
                lastWeek: [],
            };
            const groupOrder = [
                { key: 'today', label: 'Today' },
                { key: 'yesterday', label: 'Yesterday' },
                { key: 'thisWeek', label: 'This Week' },
                { key: 'lastWeek', label: 'Last Week' },
            ];
            const now = moment();
            const startOfThisWeek = now.clone().startOf('week');
            const startOfLastWeek = now.clone().subtract(1, 'week').startOf('week');

            for (let i = 0; i < 12; i++) {
                const month = now.clone().subtract(i, 'months');
                const monthKey = month.format('YYYY-MM');
                if (!groups[monthKey]) {
                    groups[monthKey] = [];
                    groupOrder.push({ key: monthKey, label: month.format('MMMM YYYY') });
                }
            }
            groups['older'] = [];
            groupOrder.push({ key: 'older', label: 'Older' });

            // --- 2. NOTE SORTING LOGIC ---
            filteredNotes.forEach(file => {
                const modTime = moment(file.stat.mtime);
                if (modTime.isSame(now, 'day')) {
                    groups.today.push(file);
                } else if (modTime.isSame(now.clone().subtract(1, 'day'), 'day')) {
                    groups.yesterday.push(file);
                } else if (modTime.isAfter(startOfThisWeek)) {
                    groups.thisWeek.push(file);
                } else if (modTime.isAfter(startOfLastWeek)) {
                    groups.lastWeek.push(file);
                } else {
                    const monthKey = modTime.format('YYYY-MM');
                    if (groups[monthKey]) {
                        groups[monthKey].push(file);
                    } else {
                        groups.older.push(file);
                    }
                }
            });

            // --- 3. RENDERING WITH DEFAULT COLLAPSE LOGIC ---
            groupOrder.forEach(groupInfo => {
                const notesInGroup = groups[groupInfo.key];
                if (notesInGroup.length > 0) {
                    const groupContainer = this.notesContentEl.createDiv({ cls: 'note-group-container' });

                    // Apply the default collapsed state for monthly groups
                    const isMonthlyGroup = /^\d{4}-\d{2}$/.test(groupInfo.key);
                    let isCollapsed;

                    if (isMonthlyGroup) {
                        isCollapsed = this.collapsedNoteGroups[groupInfo.key] !== false;
                    } else {
                        isCollapsed = this.collapsedNoteGroups[groupInfo.key] === true;
                    }

                    if (isCollapsed) {
                        groupContainer.addClass('is-collapsed');
                    }

                    const header = groupContainer.createDiv({ cls: 'note-group-header' });
                    const headerContent = header.createDiv({ cls: 'note-group-header-content' });
                    const collapseIcon = headerContent.createDiv({ cls: 'note-group-collapse-icon' });
                    setIcon(collapseIcon, 'chevron-down');
                    headerContent.createSpan({ text: groupInfo.label });
                    header.createDiv({ cls: 'note-group-count', text: notesInGroup.length.toString() });

                    header.addEventListener('click', () => {
                        const currentlyCollapsed = groupContainer.classList.toggle('is-collapsed');
                        this.collapsedNoteGroups[groupInfo.key] = currentlyCollapsed;
                        this.plugin.saveSettings();
                    });

                    const listWrapper = groupContainer.createDiv({ cls: 'note-list-wrapper' });
                    notesInGroup.forEach(file => this.renderNoteItem(file, listWrapper));
                }
            });
        }
    }

    /**
     * Scans the vault for tasks, filters and sorts them, and populates the "Tasks" tab.
     */
    async populateTasks() {
        if (!this.tasksContentEl) return;

        const settings = this.plugin.settings;
        this.tasksContentEl.toggleClass('show-full-text', !settings.taskTextTruncate);

        if (this.taskCache) { this.taskCache.clear(); } else { this.taskCache = new Map(); }

        const taskIgnoreFolders = (settings.taskIgnoreFolders || []).map(f => f.toLowerCase().endsWith('/') ? f.toLowerCase() : f.toLowerCase() + '/');
        const files = this.app.vault.getMarkdownFiles().filter(file => {
            const filePathLower = file.path.toLowerCase();
            return !taskIgnoreFolders.some(folder => folder && filePathLower.startsWith(folder));
        });

        let allTasks = [];
        const taskRegex = /^\s*(?:-|\d+\.)\s*\[(.)\]\s*(.*)/;
        const dueDateRegex = /📅\s*(\d{4}-\d{2}-\d{2})/;
        const completionDateRegex = /✅\s*(\d{4}-\d{2}-\d{2})/;
        const tagRegex = /#([a-zA-Z0-9_\-\/]+)/g;

        for (const file of files) {
            const content = await this.app.vault.cachedRead(file);
            const lines = content.split('\n');

            this.taskCache.set(file.path, this.extractTaskLines(content));

            lines.forEach((line, index) => {
                const match = line.match(taskRegex);
                if (match) {
                    const status = match[1];
                    const text = match[2];
                    const isCompleted = status.toLowerCase() === 'x';
                    const completionDateMatch = text.match(completionDateRegex);
                    const completionDate = completionDateMatch ? moment(completionDateMatch[1], "YYYY-MM-DD").toDate() : null;

                    if (isCompleted && !(settings.showCompletedTasksToday && completionDate && isSameDay(completionDate, new Date()))) {
                        return;
                    }

                    const dueDateMatch = text.match(dueDateRegex);
                    const dueDate = dueDateMatch ? moment(dueDateMatch[1], "YYYY-MM-DD").toDate() : null;
                    const tags = Array.from(text.matchAll(tagRegex)).map(m => m[1]);
                    let displayText = text.trim();
                    if (!isCompleted) {
                        displayText = displayText.replace(completionDateRegex, '').trim();
                    }
                    allTasks.push({ text: displayText, file, lineNumber: index, dueDate, tags, status, completionDate });
                }
            });
        }

        const searchTerm = this.tasksSearchTerm.toLowerCase();
        let filteredTasks;

        if (searchTerm.startsWith('#')) {
            const tagToFilter = searchTerm.substring(1);
            filteredTasks = allTasks.filter(task =>
                task.tags.some(tag => tag.toLowerCase() === tagToFilter)
            );
        } else if (searchTerm) {
            filteredTasks = allTasks.filter(task =>
                task.text.toLowerCase().includes(searchTerm)
            );
        } else {
            filteredTasks = allTasks;
        }


        filteredTasks.sort((a, b) => {
            if (settings.taskSortOrder === 'a-z') return a.text.localeCompare(b.text);
            if (settings.taskSortOrder === 'z-a') return b.text.localeCompare(a.text);
            if (a.dueDate && b.dueDate) return a.dueDate - b.dueDate;
            return a.dueDate ? -1 : (b.dueDate ? 1 : a.text.localeCompare(b.text));
        });

        // 2. MAP EXISTING DOM GROUPS
        const existingGroups = new Map();
        this.tasksContentEl.querySelectorAll('.task-group-container').forEach(groupEl => {
            if (groupEl.dataset.groupKey) {
                existingGroups.set(groupEl.dataset.groupKey, groupEl);
            }
        });

        // 3. GET NEW GROUP DATA
        const newGroupData = settings.taskGroupBy === 'tag'
            ? this.groupTasksByTag(filteredTasks)
            : this.groupTasksByDate(filteredTasks);

        const groupOrder = Object.keys(newGroupData);

        // 4. RECONCILE GROUPS
        let lastElement = null;
        groupOrder.forEach(groupKey => {
            const groupData = newGroupData[groupKey];
            let groupEl = existingGroups.get(groupKey);

            if (groupEl) {
                const headerContent = groupEl.querySelector('.task-group-header-content span:last-child');
                if (headerContent) headerContent.textContent = `${groupData.title} (${groupData.tasks.length})`;

                this.reconcileTaskList(groupEl.querySelector('.task-list-wrapper'), groupData.tasks);
                existingGroups.delete(groupKey);
            } else {
                groupEl = this.renderTaskGroup(groupKey, groupData);
            }

            if (lastElement) {
                lastElement.after(groupEl);
            } else {
                this.tasksContentEl.prepend(groupEl);
            }
            lastElement = groupEl;
        });

        // 5. REMOVE OLD GROUPS
        existingGroups.forEach(groupEl => groupEl.remove());

        if (this.tasksContentEl.children.length === 0) {
            // Clear any old message and add a new one
            this.tasksContentEl.empty();
            const message = searchTerm ? 'No tasks match your search term.' : 'No tasks found';
            this.tasksContentEl.createDiv({ text: message, cls: 'task-group-empty-message' });
        } else {
            // Remove any "no tasks" message if it exists
            const emptyMessage = this.tasksContentEl.querySelector('.task-group-empty-message');
            if (emptyMessage) emptyMessage.remove();
        }
    }

    getTaskKey(task) {
        return `${task.file.path}:${task.lineNumber}`;
    }

    updateTaskItem(taskRowEl, task) {
        if (taskRowEl.dataset.taskStatus !== task.status) {
            const checkbox = taskRowEl.querySelector('.task-checkbox-symbol');
            if (checkbox) {
                this._renderTaskSymbol(checkbox, task);
            }
            taskRowEl.dataset.taskStatus = task.status;
        }

        const textEl = taskRowEl.querySelector('.task-text');
        const existingText = textEl ? textEl.textContent : '';
        if (textEl && existingText !== task.text) {
            textEl.empty();
            MarkdownRenderer.render(this.app, task.text, textEl, task.file.path, this);
        }
    }

    groupTasksByDate(tasks) {
        const settings = this.plugin.settings;
        const now = moment().startOf('day');
        const groupsData = { overdue: [], today: [], tomorrow: [], next7days: [], future: [], noDate: [] };

        tasks.forEach(task => {
            if (!task.dueDate) { groupsData.noDate.push(task); return; }
            const due = moment(task.dueDate).startOf('day');
            if (due.isBefore(now)) groupsData.overdue.push(task);
            else if (due.isSame(now)) groupsData.today.push(task);
            else if (due.isSame(now.clone().add(1, 'day'))) groupsData.tomorrow.push(task);
            else if (due.isSameOrBefore(now.clone().add(7, 'days'))) groupsData.next7days.push(task);
            else groupsData.future.push(task);
        });

        const icons = settings.taskGroupIcons || DEFAULT_SETTINGS.taskGroupIcons;
        const groupOrder = [
            { key: 'overdue', title: 'Overdue', icon: icons.overdue, color: settings.taskGroupColorOverdue },
            { key: 'today', title: 'Today', icon: icons.today, color: settings.taskGroupColorToday },
            { key: 'tomorrow', title: 'Tomorrow', icon: icons.tomorrow, color: settings.taskGroupColorTomorrow },
            { key: 'next7days', title: 'Next 7 Days', icon: icons.next7days, color: settings.taskGroupColorNext7Days },
            { key: 'future', title: 'Future', icon: icons.future, color: settings.taskGroupColorFuture },
            { key: 'noDate', title: 'No Due Date', icon: icons.noDate, color: settings.taskGroupColorNoDate }
        ];

        const finalGroups = {};
        groupOrder.forEach(g => {
            if (settings.taskDateGroupsToShow.includes(g.key) || g.key === 'noDate') {
                if (groupsData[g.key].length > 0) {
                    finalGroups[g.key] = { ...g, tasks: groupsData[g.key] };
                }
            }
        });
        return finalGroups;
    }

    groupTasksByTag(tasks) {
        const settings = this.plugin.settings;
        const groupedByTag = tasks.reduce((acc, task) => {
            const tags = task.tags.length > 0 ? task.tags : ['#untagged'];
            tags.forEach(tag => {
                const key = tag.toLowerCase();
                if (!acc[key]) acc[key] = {
                    title: tag,
                    icon: settings.taskGroupIcons?.tag || 'tag',
                    color: settings.taskGroupColorTag,
                    tasks: []
                };
                acc[key].tasks.push(task);
            });
            return acc;
        }, {});

        // Sort groups alphabetically by tag name
        const sortedKeys = Object.keys(groupedByTag).sort((a, b) => a.localeCompare(b));
        const sortedGroups = {};
        for (const key of sortedKeys) {
            sortedGroups[key] = groupedByTag[key];
        }
        return sortedGroups;
    }

    renderTaskGroup(key, groupData) {
        const groupContainer = createDiv({ cls: 'task-group-container', attr: { style: `background-color: ${groupData.color}` } });
        groupContainer.dataset.groupKey = key;

        const isCollapsed = this.plugin.settings.collapsedTaskGroups[key];
        if (isCollapsed) groupContainer.addClass('is-collapsed');

        const header = groupContainer.createDiv({ cls: 'task-group-header' });

        header.addEventListener('click', () => {
            // Find the wrapper element for the list
            const taskListWrapper = groupContainer.querySelector('.task-list-wrapper');
            if (!taskListWrapper) return;

            // Check the current state
            const isCurrentlyCollapsed = groupContainer.classList.contains('is-collapsed');

            if (isCurrentlyCollapsed) {
                // --- EXPANDING ---
                // 1. Set the CSS variable to the element's full scroll height.
                //    This gives the 'height' property a specific value to animate *to*.
                const scrollHeight = taskListWrapper.scrollHeight;
                taskListWrapper.style.setProperty('--task-list-height', `${scrollHeight}px`);

                // 2. Remove the class to trigger the transition.
                groupContainer.classList.remove('is-collapsed');

                // After the animation, remove the explicit height to allow for dynamic content.
                setTimeout(() => {
                    taskListWrapper.style.removeProperty('--task-list-height');
                }, 350); 

            } else {
                // --- COLLAPSING ---
                // 1. Set the CSS variable to the element's current rendered height.
                //    This gives the 'height' property a specific value to animate *from*.
                const currentHeight = taskListWrapper.offsetHeight;
                taskListWrapper.style.setProperty('--task-list-height', `${currentHeight}px`);

                // This is a micro-delay to ensure the browser registers the starting height
                // before being told to transition to 0. This is the key to fixing the "instant collapse".
                requestAnimationFrame(() => {
                    // 2. Add the class to trigger the transition to height: 0.
                    groupContainer.classList.add('is-collapsed');
                });
            }

            // Update and save the state
            this.collapsedTaskGroups[key] = !isCurrentlyCollapsed;
            this.plugin.saveSettings();
        });

        const headerContent = header.createSpan({ cls: 'task-group-header-content' });
        const iconEl = headerContent.createSpan({ cls: 'icon' });
        setIcon(iconEl, groupData.icon);
        headerContent.createSpan({ text: `${groupData.title} (${groupData.tasks.length})` });

        const collapseIcon = header.createSpan({ cls: 'task-group-collapse-icon' });
        setIcon(collapseIcon, 'chevron-down');

        const taskListWrapper = groupContainer.createDiv('task-list-wrapper');
        groupData.tasks.forEach(task => {
            const taskEl = this.renderTaskItem(task); // Use the modified renderTaskItem
            taskListWrapper.appendChild(taskEl);
        });

        return groupContainer;
    }

    reconcileTaskList(listWrapperEl, newTasks) {
        const existingTaskRows = new Map();
        listWrapperEl.querySelectorAll('.task-row').forEach(row => {
            if (row.dataset.key) {
                existingTaskRows.set(row.dataset.key, row);
            }
        });

        let lastElement = null;
        newTasks.forEach(task => {
            const taskKey = this.getTaskKey(task);
            let taskEl = existingTaskRows.get(taskKey);

            if (taskEl) {
                this.updateTaskItem(taskEl, task);
                existingTaskRows.delete(taskKey);
            } else {
                taskEl = this.renderTaskItem(task);
            }

            // Ensure the element is in the correct position
            if (lastElement) {
                lastElement.after(taskEl);
            } else {
                listWrapperEl.prepend(taskEl);
            }
            lastElement = taskEl;
        });

        existingTaskRows.forEach(row => row.remove());
    }


    /**
     * Renders a single task item row in a task group.
     * @param {object} task The task object.
     * @param {HTMLElement} container The parent container for the task row.
     */
    renderTaskItem(task) {
        const taskRow = createDiv({ cls: 'task-row' });
        taskRow.dataset.key = this.getTaskKey(task);
        taskRow.dataset.taskStatus = task.status;
        const searchInputEl = this.tasksSearchInputEl;

        const checkbox = taskRow.createDiv({ cls: 'task-checkbox-symbol' });
        this._renderTaskSymbol(checkbox, task);
        const textEl = taskRow.createSpan({ cls: 'task-text' });

        // On initial render, check if the task is already completed and apply the style.
        if (task.status.toLowerCase() === 'x') {
            textEl.classList.add('completed');
        }

        checkbox.addEventListener('click', async (e) => {
            e.stopPropagation();

            // Determine the state *before* the change is made
            const wasCompleted = task.status.toLowerCase() === 'x';

            // Modify the file. This also triggers the background file watcher
            // which will correctly refresh the entire task list after a short delay.
            await this.toggleTaskCompletion(task);

            // --- Provide Instant UI Feedback ---
            // We update the local task object and the DOM immediately so the user
            // sees the change without waiting for the file watcher to finish.

            if (wasCompleted) {
                // If it WAS completed, its new state is INCOMPLETE
                task.status = ' ';
                textEl.classList.remove('completed');
            } else {
                // If it was NOT completed, its new state is COMPLETE
                task.status = 'x';
                textEl.classList.add('completed');
            }

            // Finally, re-render the checkbox symbol itself using the new status
            this._renderTaskSymbol(checkbox, task);
        });

        MarkdownRenderer.render(this.app, task.text, textEl, task.file.path, this);

        taskRow.addEventListener('click', () => this.app.workspace.openLinkText(task.file.path, '', false, { eState: { line: task.lineNumber } }));
        this.addKeydownListeners(taskRow, searchInputEl);

        setTimeout(() => {
            if (this.plugin.settings.taskTextTruncate && textEl.scrollWidth > textEl.clientWidth) {
                const tooltipText = `Task: ${task.text}\n\nFile: ${task.file.path}\nDue: ${task.dueDate ? moment(task.dueDate).format('YYYY-MM-DD') : 'None'}\nTags: ${task.tags.length > 0 ? task.tags.map(t => '#' + t).join(' ') : 'None'}`;
                textEl.setAttribute('aria-label', tooltipText);
            }
        }, 0);

        return taskRow;
    }

    /**
     * Toggles the completion state of a task by modifying the source Markdown file.
     * @param {object} task The task object to toggle.
     */
    async toggleTaskCompletion(task) {
        const content = await this.app.vault.read(task.file);
        const lines = content.split('\n');
        let line = lines[task.lineNumber];

        const completionDateRegex = /\s*✅\s*\d{4}-\d{2}-\d{2}/;
        const today = moment().format("YYYY-MM-DD");
        const isCompleted = task.status.toLowerCase() === 'x';

        // Find the task marker [.] and replace the character inside
        const taskMarkerRegex = /\[.\]/;

        if (isCompleted) {
            // Mark as incomplete: [x] -> [ ] and remove completion date
            let newLine = line.replace(taskMarkerRegex, '[ ]');
            lines[task.lineNumber] = newLine.replace(completionDateRegex, '').trim();
        } else {
            // Mark as complete: [ ] or [/] or [-] -> [x] and add completion date
            let newLine = line.replace(taskMarkerRegex, '[x]');
            newLine = newLine.replace(completionDateRegex, ''); // Remove any old one first
            lines[task.lineNumber] = `${newLine} ✅ ${today}`;
        }
        await this.app.vault.modify(task.file, lines.join('\n'));
    }

    /**
     * Updates an existing task row in the DOM with new data.
     * @param {HTMLElement} taskRowEl The .task-row element to update.
     * @param {object} task The new task object with updated data.
     */
    updateTaskItem(taskRowEl, task) {
        // Only update if the text content has changed
        const textEl = taskRowEl.querySelector('.task-text');

        // Only update if the status has changed
        if (taskRowEl.dataset.taskStatus !== task.status) {
            const checkbox = taskRowEl.querySelector('.task-checkbox-symbol');
            if (checkbox) {
                this._renderTaskSymbol(checkbox, task);
            }
            taskRowEl.dataset.taskStatus = task.status;

            if (textEl) {
                if (task.status.toLowerCase() === 'x') {
                    textEl.classList.add('completed');
                } else {
                    textEl.classList.remove('completed');
                }
            }
        }

        // A simple check to see if the rendered HTML might be different
        if (textEl && textEl.textContent !== task.text) {
            textEl.empty(); // Clear existing rendered markdown
            MarkdownRenderer.render(this.app, task.text, textEl, task.file.path, this);
        }
    }

    /**
     * Opens the scratchpad note in a new or current tab.
     */
    async openScratchpadFile(forceNewTab = false) {
        const path = this.plugin.settings.fixedNoteFile;

        if (this.app.isMobile) {
            let file = this.app.vault.getAbstractFileByPath(path);
            if (!file) {
                try {
                    file = await this.app.vault.create(path, '');
                } catch (err) {
                    new Notice('Failed to create scratchpad file.');
                    console.error(err);
                    return;
                }
            }

            if (file instanceof TFile) {
                // The `true` argument forces a new leaf, which reliably brings the note to the front on mobile.
                this.app.workspace.getLeaf(true).openFile(file);
            } else {
                new Notice('Scratchpad path is invalid or could not be created.');
            }
            return;
        }

        // First, try to find an already open leaf for this file.
        let targetLeaf = this.app.workspace.getLeavesOfType("markdown").find(leaf => leaf.view.file?.path === path);
        if (targetLeaf) { this.app.workspace.revealLeaf(targetLeaf); return; }

        let file = this.app.vault.getAbstractFileByPath(path);
        // If the file doesn't exist, create it.
        if (!file) file = await this.app.vault.create(path, "").catch(() => new Notice(`Failed to create scratchpad: ${path}`));

        //if (file instanceof TFile) this.app.workspace.getLeaf(this.plugin.settings.scratchpadOpenAction === 'new-tab').openFile(file);
        if (file instanceof TFile) {
            const openInNew = forceNewTab || this.plugin.settings.scratchpadOpenAction === 'new-tab';
            this.app.workspace.getLeaf(openInNew).openFile(file);
        }
    }

    /**
     * Saves text content to the scratchpad note file.
     * @param {string} text The text to save.
     */
    async saveFixedNote(text) { // 'text' is the body content from the textarea
        const path = this.plugin.settings.fixedNoteFile;
        if (!path) return; // Safety check

        const folderPath = path.substring(0, path.lastIndexOf('/'));

        if (folderPath && !this.app.vault.getAbstractFileByPath(folderPath)) {
            await this.app.vault.createFolder(folderPath).catch(err => console.error("Error creating folder:", err));
        }

        // CORRECTED: Combine the stored frontmatter with the current body text
        const contentToSave = this.scratchpadFrontmatter + text;

        let file = this.app.vault.getAbstractFileByPath(path);
        if (!file) {
            file = await this.app.vault.create(path, contentToSave);
        } else if (file instanceof TFile) {
            await this.app.vault.modify(file, contentToSave);
        }
    }

    /**
     * Loads the content of the scratchpad note file.
     * @returns {Promise<string>} The content of the note, or an empty string if it doesn't exist.
     */
    async loadNote() {
        const path = this.plugin.settings.fixedNoteFile;
        const file = this.app.vault.getAbstractFileByPath(path);
        if (file instanceof TFile) return await this.app.vault.read(file);
        return "";
    }

    /**
     * Opens a daily note for a given date, creating it from a template if it doesn't exist.
     * @param {Date} date The date for the daily note.
     */
    async openDailyNote(date) {
        const {
            dailyNotesFolder,
            dailyNoteDateFormat,
            dailyNoteTemplatePath,
            dailyNoteOpenAction
        } = this.plugin.settings;
        const filename = formatDate(date, dailyNoteDateFormat);
        const path = dailyNotesFolder ? `${dailyNotesFolder}/${filename}.md` : `${filename}.md`;

        let file = this.app.vault.getAbstractFileByPath(path);
        if (file) {
            // File already exists, just open it
            const leaf = this.app.workspace.getLeaf(dailyNoteOpenAction === 'new-tab');
            await leaf.openFile(file);
            return;
        }
        // --- File does NOT exist, proceed with creation ---

        // This inner function is now updated to handle Templater correctly
        const createNote = async (includeEvents = false) => {

            let templateContent = "";
            const templateFile = dailyNoteTemplatePath ? this.app.vault.getAbstractFileByPath(dailyNoteTemplatePath) : null;

            if (templateFile instanceof TFile) {
                templateContent = await this.app.vault.read(templateFile);
            } else {
                console.warn(`Template file not found at: ${dailyNoteTemplatePath}`);
            }

            // Create the note with the placeholder first
            const newFile = await this.app.vault.create(path, templateContent);

            // Open the note
            const leaf = this.app.workspace.getLeaf(dailyNoteOpenAction === "new-tab");
            await leaf.openFile(newFile);

            const placeholder = this.plugin.settings.calendarEventsPlaceholder || '%%CALENDAR_EVENTS%%';

            // If including events, proceed with injection
            if (includeEvents) {
                await new Promise(resolve => setTimeout(resolve, 1000)); // Delay

                // 1. Check for events in the map
                const dateKey = moment(date).format("YYYY-MM-DD");
                const eventsForDay = this.icsEventsByDate.get(dateKey);

                if (eventsForDay && eventsForDay.length > 0) {
                    // 2. Format the events into a string
                    const eventContent = this.formatEventsForTemplate(eventsForDay) || "";

                    // 3. Read the file *after* Templater has run
                    let currentContent = await this.app.vault.read(newFile);

                    // 4. Replace placeholder and save
                    if (currentContent.includes(placeholder)) {
                        const finalContent = currentContent.replace(placeholder, eventContent);
                        await this.app.vault.modify(newFile, finalContent);
                    } else {
                        console.error(`Placeholder "${placeholder}" not found in the note after creation. Templater might be removing it.`);
                    }
                } else {
                    console.warn("No events found for this date, so nothing to inject.");
                }
            }
            // Logic for removing placeholder when includeEvents is false can be added here if needed
            else {
                await new Promise(resolve => setTimeout(resolve, 200));
                let currentContent = await this.app.vault.read(newFile);
                if (currentContent.includes(placeholder)) {
                    const finalContent = currentContent.replace(placeholder, "").trim();
                    await this.app.vault.modify(newFile, finalContent);
                }
            }
        };

        const hasTemplate = !!dailyNoteTemplatePath && dailyNoteTemplatePath.length > 0;
        // The rest of logic remains unchanged.
        const dateKey = moment(date).format('YYYY-MM-DD');
        const eventsForDay = this.icsEventsByDate.get(dateKey);
        const friendlyDate = date.toLocaleDateString(undefined, {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });

        if (eventsForDay && eventsForDay.length > 0) {
            // --- Case 1: Events exist for the selected day ---
            new ActionChoiceModal(this.app,
                `Create daily note for ${friendlyDate}?`,
                "This day has calendar events. How would you like to proceed?",
                [{
                    // Button 1: Always includes events
                    text: hasTemplate ? 'Create with Events & Template' : 'Create with Events',
                    cls: 'mod-cta',
                    action: () => createNote(true)
                }, {
                    // Button 2: Excludes events
                    text: hasTemplate ? 'Create from Template Only' : 'Create Blank Note',
                    action: () => createNote(false)
                }, {
                    text: 'Cancel',
                    action: () => { }
                }]
            ).open();
        } else {
            // --- Case 2: No events exist for the selected day ---
            new ActionChoiceModal(this.app,
                'Create daily note?',
                `A daily note for ${friendlyDate} does not exist. Would you like to create it?`,
                [{
                    // The main action button
                    text: hasTemplate ? 'Create from Template' : 'Create Blank Note',
                    cls: 'mod-cta',
                    action: () => createNote(false) // No events to include, so always false
                }, {
                    text: 'Cancel',
                    action: () => { }
                }]
            ).open();
        }
    }
}


/**
 * The main plugin class that registers the view and settings tab.
 */
class PeriodMonthPlugin extends Plugin {
    tasksAPI;
    themeObserver = null;
    themeChangeDebounceTimer = null;

    async onload() {
        this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
        this.addStyle();
        this.updateStyles();
        this.registerView(VIEW_TYPE_PERIOD, leaf => new PeriodMonthView(leaf, this));
        this.addRibbonIcon("calendar-check", "Open Calendar Period Week Notes", () => this.activateView());
        this.addCommand({ id: "open-period-month-view", name: "Open Calendar Period Week Notes", callback: () => this.activateView() });
        await this.resetIcsRefreshInterval();
        this.addSettingTab(new PeriodSettingsTab(this.app, this));

        this.themeObserver = new MutationObserver(() => {
            clearTimeout(this.themeChangeDebounceTimer);
            this.themeChangeDebounceTimer = setTimeout(() => {
                this.updateStyles();
            }, 100);
        });

        this.themeObserver.observe(document.body, { attributes: true, attributeFilter: ['class'] });

        this.icsRefreshIntervalId = null;

        this.app.workspace.onLayoutReady(() => {
            this.activateView();
        });


    }

    async saveSettings() {
        await this.saveData(this.settings);
    }

    /**
     * Injects the plugin's CSS into the document head.
     */
    addStyle() {
        const styleEl = document.createElement('style');
        styleEl.id = 'period-month-plugin-styles';
        styleEl.textContent = PLUGIN_STYLES;
        document.head.appendChild(styleEl);
    }

    /**
     * Updates CSS custom properties (variables) based on the current plugin settings.
     */
    updateStyles() {
        const styleProps = {
            '--header-font-size': this.settings.fontSize,
            '--day-number-font-size': this.settings.dayNumberFontSize,
            '--header-row-font-weight': this.settings.headerRowBold ? 'bold' : 'normal',
            '--pw-column-font-weight': this.settings.pwColumnBold ? 'bold' : 'normal',
            '--month-color-light': this.settings.monthColorLight,
            '--month-color-dark': this.settings.monthColorDark,
            '--year-color-light': this.settings.yearColorLight,
            '--year-color-dark': this.settings.yearColorDark,
            '--current-highlight-label-color-light': this.settings.currentHighlightLabelColorLight,
            '--current-highlight-label-color-dark': this.settings.currentHighlightLabelColorDark,
            '--pw-separator-color': this.settings.pwColumnSeparatorColor,
            '--pw-column-font-color-light': this.settings.pwColumnFontColorLight,
            '--pw-column-font-color-dark': this.settings.pwColumnFontColorDark,
            '--week-number-font-color-light': this.settings.weekNumberFontColorLight,
            '--week-number-font-color-dark': this.settings.weekNumberFontColorDark,
            '--day-header-font-color-light': this.settings.dayHeaderFontColorLight,
            '--day-header-font-color-dark': this.settings.dayHeaderFontColorDark,
            '--day-cell-font-color-light': this.settings.dayCellFontColorLight,
            '--day-cell-font-color-dark': this.settings.dayCellFontColorDark,
            '--other-month-font-color-light': this.settings.otherMonthFontColorLight,
            '--other-month-font-color-dark': this.settings.otherMonthFontColorDark,
            '--scratch-font-family': this.settings.scratchFontFamily,
            '--scratch-font-size': this.settings.scratchFontSize,
            '--scratch-bold': this.settings.scratchBold ? 'bold' : 'normal',
            '--notes-font-size': this.settings.notesFontSize,
            '--notes-bold': this.settings.notesBold ? 'bold' : 'normal',
            '--tab-title-font-size': this.settings.tabTitleFontSize,
            '--tab-title-bold': this.settings.tabTitleBold ? 'bold' : 'normal',
            '--notes-line-height': this.settings.notesLineHeight,
            '--selected-tab-color': this.settings.selectedTabColor,
            '--today-highlight-color-light': this.settings.todayHighlightColorLight,
            '--today-highlight-color-dark': this.settings.todayHighlightColorDark,
            '--notes-hover-color': this.settings.notesHoverColor,
            '--daily-note-dot-color': this.settings.dailyNoteDotColor,
            '--note-created-color': this.settings.noteCreatedColor,
            '--note-modified-color': this.settings.noteModifiedColor,
            '--other-note-dot-color': this.settings.noteCreatedColor,
            '--calendar-grid-gap-width': this.settings.calendarGridGapWidth,
            '--calendar-modified-dot-color': this.settings.noteModifiedColor,
            '--other-note-popup-font-size': this.settings.otherNotePopupFontSize,
            '--calendar-dot-size': this.settings.calendarDotSize + 'px',
            '--nav-button-height': this.settings.navButtonHeight,
            '--date-cell-hover-color-light': this.settings.dateCellHoverColorLight,
            '--date-cell-hover-color-dark': this.settings.dateCellHoverColorDark,
            '--main-month-year-title-font-size': this.settings.mainMonthYearTitleFontSize,
            '--main-month-title-weight': this.settings.mainMonthTitleBold ? 'bold' : 'normal',
            '--main-year-title-weight': this.settings.mainYearTitleBold ? 'bold' : 'normal',
            '--today-highlight-size': this.settings.todayHighlightSize,
            '--task-heading-font-size': this.settings.taskHeadingFontSize,
            '--task-text-font-size': this.settings.taskTextFontSize,
            '--scratchpad-highlight-color': this.settings.scratchpadHighlightColor,
            '--asset-dot-color': this.settings.assetDotColor,
            '--calendar-event-dot-color': this.settings.calendarEventDotColor,
            '--task-dot-color': this.settings.taskDotColor,
            '--task-badge-color': this.settings.taskBadgeColor,
            '--task-badge-font-color': this.settings.taskBadgeFontColor,
            '--task-badge-font-size': this.settings.taskBadgeFontSize,
            '--today-circle-color-light': this.settings.todayCircleColorLight,
            '--today-circle-color-dark': this.settings.todayCircleColorDark,
            '--weekly-note-dot-color': this.settings.weeklyNoteDotColor,
            '--weekend-shade-color-light': this.settings.weekendShadeColorLight,
            '--weekend-shade-color-dark': this.settings.weekendShadeColorDark,
            '--weekly-note-dot-color': this.settings.weeklyNoteDotColor,
            '--row-highlight-color-light': this.settings.rowHighlightColorLight,
            '--row-highlight-color-dark': this.settings.rowHighlightColorDark,
            '--task-color-overdue': this.settings.taskStatusColorOverdue,
            '--task-color-in-progress': this.settings.taskStatusColorInProgress,
            '--task-color-open': this.settings.taskStatusColorOpen,
            '--task-color-completed': this.settings.taskStatusColorCompleted,
            '--task-color-cancelled': this.settings.taskStatusColorCancelled,

        };

        for (const key in styleProps) {
            document.documentElement.style.setProperty(key, styleProps[key]);
        }
    }

    /**
     * Opens the plugin view in a new leaf or reveals it if it's already open.
     */
    async activateView() {
        const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_PERIOD);
        if (leaves.length > 0) {
            this.app.workspace.revealLeaf(leaves[0]);
            return;
        }
        const leaf = this.app.workspace.getRightLeaf(false);
        await leaf.setViewState({ type: VIEW_TYPE_PERIOD, active: true });
        this.app.workspace.revealLeaf(leaf);
    }

    async resetIcsRefreshInterval() {
        // If there's an old interval running, clear it first
        if (this.icsRefreshIntervalId !== null) {
            window.clearInterval(this.icsRefreshIntervalId);
        }

        const intervalMinutes = this.settings.icsRefreshInterval;

        if (intervalMinutes > 0) {
            const intervalMilliseconds = intervalMinutes * 60 * 1000;

            this.icsRefreshIntervalId = this.registerInterval(
                window.setInterval(async () => {
                    console.log(`Periodic Notes: Automatically refreshing ICS feed (interval: ${intervalMinutes} minutes).`);

                    // We need to find the view to call its refresh method
                    const views = this.app.workspace.getLeavesOfType(VIEW_TYPE_PERIOD);
                    for (const leaf of views) {
                        if (leaf.view && leaf.view.refreshIcsEvents) {
                            await leaf.view.refreshIcsEvents();
                        }
                    }
                }, intervalMilliseconds)
            );
        }
    }


    onunload() {
        // Clean up when the plugin is disabled.
        const styleEl = document.getElementById('period-month-plugin-styles');
        if (styleEl) styleEl.remove();
        this.app.workspace.getLeavesOfType(VIEW_TYPE_PERIOD).forEach(leaf => leaf.detach());

        if (this.themeObserver) {
            this.themeObserver.disconnect();
        }

    }
}

/**
 * The settings tab class for the plugin, responsible for building the settings UI.
 */
class PeriodSettingsTab extends PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
        this.activeTab = 'general';
        this.heatmapUpdateTimer = null;
        this.activePreviewMode = null;
        this.scrollPosition = 0;
        this.colorClipboard = null;
        this.selectedThemeFile = null;
        this.currentThemeDefaults = { ...DEFAULT_SETTINGS };
    
    }

    refreshDisplay() {
        if (this.contentEl) {
            this.scrollPosition = this.contentEl.scrollTop;
        }
        this.display();
    }

    triggerDashboardRefresh() {
        this.app.workspace.trigger('pm-dashboard-refresh');
    }

    async loadCurrentThemeDefaults() {
        // If a theme is active, try to load its settings
        if (this.plugin.settings.appliedTheme) {
            const themeName = this.plugin.settings.appliedTheme;
            const themePath = `${this.plugin.manifest.dir}/themes/${themeName}.json`;
            try {
                if (await this.app.vault.adapter.exists(themePath)) {
                    const fileContent = await this.app.vault.adapter.read(themePath);
                    const themeSettings = JSON.parse(fileContent);
                    // Merge theme settings over base defaults to get the final defaults
                    this.currentThemeDefaults = { ...DEFAULT_SETTINGS, ...themeSettings };
                } else {
                    // If the theme file is missing, fall back to base defaults
                    console.warn(`Applied theme file "${themeName}.json" not found. Using base defaults.`);
                    this.currentThemeDefaults = { ...DEFAULT_SETTINGS };
                }
            } catch (e) {
                console.error("Error loading theme defaults:", e);
                this.currentThemeDefaults = { ...DEFAULT_SETTINGS };
            }
        } else {
            // If no theme is active, the defaults are just the base defaults
            this.currentThemeDefaults = { ...DEFAULT_SETTINGS };
        }
    }

    async hide() {
        // This function runs automatically when the user closes the settings tab.
        // Get all open views of the calendar type
        const views = this.app.workspace.getLeavesOfType(VIEW_TYPE_PERIOD);

        if (views.length > 0) {
            // Tell each open calendar view to re-render itself
            for (const leaf of views) {
                if (leaf.view instanceof PeriodMonthView) {
                    // Calling renderCalendar() will redraw the view with the latest settings
                    await leaf.view.renderCalendar();
                }
            }
        }
    }

    /**
     * A helper function to save settings and trigger a full UI refresh in any open views.
     */
    async saveAndUpdate() {
        await this.plugin.saveData(this.plugin.settings);
        this.plugin.updateStyles();
        this.triggerDashboardRefresh();
        this.plugin.app.workspace.getLeavesOfType(VIEW_TYPE_PERIOD).forEach(leaf => {
            if (leaf.view instanceof PeriodMonthView) {
                leaf.view.rebuildAndRender();
            }
        });
    }

    /**
     * Renders a single draggable list of widgets.
     */
    renderWidgetSettings(containerEl, title, visibilityKey, orderKey, defaultWidgets) {
        containerEl.createEl('h2', { text: title });
        const draggableContainer = containerEl.createDiv('pm-draggable-widget-list');
        draggableContainer.dataset.orderKey = orderKey;
        draggableContainer.dataset.title = title;

        let allWidgets = { ...defaultWidgets };

        if (!this.plugin.settings[visibilityKey]) {
            this.plugin.settings[visibilityKey] = {};
        }
        const visibilitySettings = this.plugin.settings[visibilityKey];

        if (visibilityKey === 'creationDashboardWidgets') {
            (this.plugin.settings.customHeatmaps || []).forEach((heatmap, index) => {
                allWidgets[`custom-${index}`] = { name: `${heatmap.name} (Custom Heatmap ${index + 1})` };
            });
        }

        let settingsWereUpdated = false;
        for (const key in allWidgets) {
            if (visibilitySettings[key] === undefined) {
                visibilitySettings[key] = true;
                settingsWereUpdated = true;
            }
        }
        if (settingsWereUpdated) {
            this.plugin.saveData(this.plugin.settings);
        }

        const getFinalOrder = () => {
            const savedOrder = this.plugin.settings[orderKey] || [];
            const allKeys = Object.keys(allWidgets);
            const finalOrder = [...savedOrder];
            allKeys.forEach(key => {
                if (!finalOrder.includes(key)) {
                    finalOrder.push(key);
                }
            });
            return finalOrder.filter(key => allWidgets[key]);
        };
        const finalOrder = getFinalOrder();

        finalOrder.forEach(key => {
            const widgetEl = draggableContainer.createDiv({ cls: 'pm-draggable-widget-item' });
            widgetEl.dataset.widgetKey = key;
            const name = allWidgets[key]?.name || 'Unknown Widget';
            const dragHandle = widgetEl.createDiv({ cls: 'pm-drag-handle' });
            setIcon(dragHandle, 'grip-vertical');
            const settingWrapper = widgetEl.createDiv({ cls: 'pm-setting-wrapper' });
            new Setting(settingWrapper)
                .setName(name)
                .addToggle(toggle => toggle.setValue(visibilitySettings[key] === true).onChange(async (value) => {
                    visibilitySettings[key] = value;
                    await this.saveAndUpdate();
                }));
            dragHandle.addEventListener('mousedown', (e) => {
                e.preventDefault();
                this.draggedItem = widgetEl;
                this.draggedItem.addClass('dragging');
                this.placeholder = document.createElement('div');
                this.placeholder.className = 'pm-drag-placeholder';
                this.placeholder.style.height = `${this.draggedItem.offsetHeight}px`;
                this.draggedItem.parentNode.insertBefore(this.placeholder, this.draggedItem);
            });
        });
    }



    /**
     * Parses an rgba() string into a hex color and an alpha value.
     * @param {string} rgbaString The input string (e.g., "rgba(255, 165, 0, 0.4)").
     * @returns {{color: string, alpha: number}}
     */
    parseRgba(rgbaString) {
        if (!rgbaString) return { color: '#000000', alpha: 1 };
        const match = rgbaString.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);
        if (!match) return { color: '#000000', alpha: 1 };
        const toHex = (c) => ('0' + parseInt(c, 10).toString(16)).slice(-2);
        const color = `#${toHex(match[1])}${toHex(match[2])}${toHex(match[3])}`;
        const alpha = match[4] !== undefined ? parseFloat(match[4]) : 1;
        return { color, alpha };
    }

    /**
     * Builds an rgba() string from a hex color and an alpha value.
     * @param {string} hex The hex color string (e.g., "#ffa500").
     * @param {number} alpha The alpha value (0 to 1).
     * @returns {string} The rgba string.
     */
    buildRgba(hex, alpha) {
        const r = parseInt(hex.slice(1, 3), 16);
        const g = parseInt(hex.slice(3, 5), 16);
        const b = parseInt(hex.slice(5, 7), 16);
        return `rgba(${r}, ${g}, ${b}, ${alpha.toFixed(2)})`;
    }

    /**
     * Creates a custom setting component with a color picker and an alpha slider.
     * @param {string} name The setting name.
     * @param {string} desc The setting description.
     * @param {string} settingKey The key in the settings object to modify.
     */
    createRgbaColorSetting(containerEl, name, desc, settingKey) {
        // These will live inside this function, so they don't pollute the class.
        const getNestedValue = (obj, path) => {
            if (!path) return undefined;
            // This regex converts path['key'] or path[0] to path.key or path.0
            const keys = path.replace(/\[(\w+)\]/g, '.$1').split('.');
            return keys.reduce((o, k) => (o || {})[k], obj);
        };

        const setNestedValue = (obj, path, value) => {
            if (!path) return;
            const keys = path.replace(/\[(\w+)\]/g, '.$1').split('.');
            const lastKey = keys.pop();
            const target = keys.reduce((o, k) => o[k] = o[k] || {}, obj);
            target[lastKey] = value;
        };

        const setting = new Setting(containerEl)
            .setName(name)
            .setDesc(desc);

        let colorPicker;
        let slider;

        // Use the helper to get the initial value, whether it's nested or not
        const initialValue = getNestedValue(this.plugin.settings, settingKey) || getNestedValue(this.currentThemeDefaults, settingKey);
        const { color: initialColor, alpha: initialAlpha } = this.parseRgba(initialValue);

        setting.addColorPicker(picker => {
            colorPicker = picker;
            picker
                .setValue(initialColor)
                .onChange(async (newColor) => {
                    const currentAlpha = slider ? slider.getValue() : 1;
                    const newRgba = this.buildRgba(newColor, currentAlpha);
                    // Use the helper to set the value
                    setNestedValue(this.plugin.settings, settingKey, newRgba);
                    if (picker.colorEl) picker.colorEl.style.backgroundColor = newRgba;
                    await this.saveAndUpdate();
                });
        });

        setting.addSlider(sliderComponent => {
            slider = sliderComponent;
            slider
                .setLimits(0, 1, 0.05)
                .setValue(initialAlpha)
                .setDynamicTooltip()
                .onChange(async (newAlpha) => {
                    const currentColor = colorPicker ? colorPicker.getValue() : '#000000';
                    const newRgba = this.buildRgba(currentColor, newAlpha);
                    // Use the helper to set the value
                    setNestedValue(this.plugin.settings, settingKey, newRgba);
                    if (colorPicker && colorPicker.colorEl) colorPicker.colorEl.style.backgroundColor = newRgba;
                    await this.saveAndUpdate();
                });
        });

        if (colorPicker && colorPicker.colorEl) {
            colorPicker.colorEl.style.backgroundColor = initialValue;
        }

        // --- BUTTONS ---
        setting.addExtraButton(button => {
            button
                .setIcon('copy')
                .setTooltip('Copy color and transparency')
                .onClick(() => {
                    // Use the helper to get the value
                    this.colorClipboard = getNestedValue(this.plugin.settings, settingKey);
                    new Notice('Color copied to clipboard.');
                });
        });

        setting.addExtraButton(button => {
            button
                .setIcon('paste')
                .setTooltip('Paste color and transparency')
                .onClick(async () => {
                    if (!this.colorClipboard) { new Notice('Clipboard is empty.'); return; }
                    // Use the helper to set the value
                    setNestedValue(this.plugin.settings, settingKey, this.colorClipboard);

                    const { color, alpha } = this.parseRgba(this.colorClipboard);
                    if (colorPicker) {
                        colorPicker.setValue(color);
                        if (colorPicker.colorEl) colorPicker.colorEl.style.backgroundColor = this.colorClipboard;
                    }
                    if (slider) slider.setValue(alpha);
                    await this.saveAndUpdate();
                });
        });

        setting.addExtraButton(button => {
            button
                .setIcon('rotate-ccw')
                .setTooltip('Reset to default')
                .onClick(async () => {
                    // Use the helper to get the default value
                    const defaultValue = getNestedValue(this.currentThemeDefaults, settingKey);
                    // Use the helper to set the value
                    setNestedValue(this.plugin.settings, settingKey, defaultValue);

                    const { color, alpha } = this.parseRgba(defaultValue);
                    if (colorPicker) {
                        colorPicker.setValue(color);
                        if (colorPicker.colorEl) colorPicker.colorEl.style.backgroundColor = defaultValue;
                    }
                    if (slider) slider.setValue(alpha);
                    await this.saveAndUpdate();
                });
        });
    }



    /**
     * Creates a simple path suggestion popup for a text input element.
     * @param {HTMLInputElement} inputEl The input element to attach the suggester to.
     * @param {(query: string) => string[]} getSuggestions A function that returns a list of suggestion strings based on a query.
     */
    createPathSuggester(inputEl, getSuggestions) {
        const suggestionEl = createDiv({ cls: 'custom-suggestion-container' });
        const parentContainer = inputEl.parentElement;

        // 1. Set up the positioning context
        parentContainer.style.position = 'relative';
        suggestionEl.style.position = 'absolute';
        suggestionEl.style.top = '100%'; // Position directly below the input
        suggestionEl.style.left = '0';
        suggestionEl.style.zIndex = '100';

        // 2. Set flexible width properties
        // Be at least as wide as the input's container.
        suggestionEl.style.minWidth = `${parentContainer.offsetWidth}px`;
        // Allow the width to grow automatically with the content.
        suggestionEl.style.width = 'auto';
        // Prevent it from becoming excessively wide on large screens.
        suggestionEl.style.maxWidth = '500px';

        suggestionEl.style.display = 'none';
        parentContainer.appendChild(suggestionEl);

        const showSuggestions = () => {
            const query = inputEl.value.toLowerCase();
            const suggestions = getSuggestions(query);
            suggestionEl.empty();

            if (suggestions.length === 0 || query.trim() === '') {
                suggestionEl.style.display = 'none';
                return;
            }

            suggestionEl.style.display = 'block';
            suggestions.slice(0, 10).forEach(path => {
                const item = suggestionEl.createDiv({ cls: 'custom-suggestion-item', text: path });

                // --- Style for Text Wrapping ---
                // Allow long folder paths to wrap onto multiple lines.
                item.style.whiteSpace = 'normal';
                // Break very long words to prevent horizontal overflow.
                item.style.wordBreak = 'break-all';
                // --- End ---

                item.addEventListener('mousedown', (e) => {
                    e.preventDefault();
                    inputEl.value = path;
                    inputEl.dispatchEvent(new Event('input'));
                    suggestionEl.style.display = 'none';
                });
            });
        };

        inputEl.addEventListener('input', showSuggestions);
        inputEl.addEventListener('focus', showSuggestions);
        inputEl.addEventListener('blur', () => setTimeout(() => {
            suggestionEl.style.display = 'none';
        }, 150));
    }


    /**
     * Creates a settings section for managing a list of ignored folder paths.
     * @param {HTMLElement} containerEl The parent container for this setting section.
     * @param {string} name The heading name for the section.
     * @param {string} desc The description for the section.
     * @param {string} settingKey The key in the settings object for the ignored folder array.
     */
    createIgnoredFolderList(containerEl, name, desc, settingKey) {
        new Setting(containerEl).setName(name).setDesc(desc).setHeading();
        const ignoredFolders = this.plugin.settings[settingKey];
        if (ignoredFolders && ignoredFolders.length > 0) {
            ignoredFolders.forEach((folder, index) => {
                new Setting(containerEl).setName(folder).addButton(button => {
                    button.setIcon("trash").setTooltip("Remove folder")
                        .onClick(async () => {
                            this.plugin.settings[settingKey].splice(index, 1);
                            await this.saveAndUpdate();
                            this.refreshDisplay();
                        });
                });
            });
        } else {
            containerEl.createEl('p', { text: 'No folders are being ignored.', cls: 'setting-item-description' });
        }
        const addSetting = new Setting(containerEl);
        let textInput;
        addSetting.addText(text => {
            textInput = text;
            const getFolders = (query) => this.app.vault.getAllLoadedFiles().filter(f => f instanceof TFolder && (!query || f.path.toLowerCase().includes(query))).map(f => f.path);
            this.createPathSuggester(text.inputEl, getFolders);
            text.setPlaceholder("Enter folder path to ignore...");
        }).addButton(button => {
            button.setButtonText("Add").setTooltip("Add this folder to the ignore list")
                .onClick(async () => {
                    const newFolder = textInput.getValue();
                    if (newFolder && !this.plugin.settings[settingKey].includes(newFolder)) {
                        this.plugin.settings[settingKey].push(newFolder);
                        await this.saveAndUpdate();
                        this.refreshDisplay();
                    }
                });
        });
    }

    async display() {
        const { containerEl } = this;
        containerEl.empty();

        await this.loadCurrentThemeDefaults();

        // Create the main two-column layout
        const settingsContainer = containerEl.createDiv({ cls: 'period-settings-container' });
        const navEl = settingsContainer.createDiv({ cls: 'period-settings-nav' });
        this.contentEl = settingsContainer.createDiv({ cls: 'period-settings-content' }); // Assign content area to this.contentEl

        const tabs = {
            general: "General Display",
            functional: "Calendar Functional",
            popup: "Popup Controls",
            dots: "Dot Indicators",
            weeklyNotes: "Weekly Notes",
            tasksIndicator: "Task Indicators",
            tabs: "General Tab",
            scratchpad: "ScratchPad Tab",
            notes: "Notes Tab",
            pinned: 'Pinned Notes Tab',
            assets: "Assets Tab",
            tasks: "Tasks Tab",
            dashboard: 'Dashboard Tab',
            themes: "Themes",
            importExport: "Import / Export",
            startHere: "Help",
            about: "About"
        };

        // Create the navigation buttons on the left
        for (const [key, label] of Object.entries(tabs)) {
            const button = navEl.createEl('button', { text: label });
            if (this.activeTab === key) {
                button.addClass('is-active');
            }
            button.addEventListener('click', () => {
                this.activeTab = key;
                this.display(); // Re-render the whole tab on click
            });
        }

        // Now, render the content for the active tab into this.contentEl
        this.renderContentForActiveTab();
    }

    // Function to render the draggable list of pinned notes
    async renderDraggablePinnedNotes(container) {
        container.empty();

        const pinValue = this.plugin.settings.pinTag.toLowerCase();
        const allMarkdownFiles = this.app.vault.getMarkdownFiles();

        // Filter for pinned notes (using logic)
        const pinnedNotes = allMarkdownFiles.filter(file => {
            const cache = this.app.metadataCache.getFileCache(file);
            if (!cache) return false;

            // Check tags
            const hasPinTag = cache.tags?.some(tag => tag.tag.toLowerCase().includes(pinValue));
            if (hasPinTag) return true;

            // Check frontmatter
            const frontmatter = cache.frontmatter;
            if (frontmatter) {
                for (const key in frontmatter) {
                    const value = frontmatter[key];
                    if (typeof value === 'string' && value.toLowerCase().includes(pinValue)) return true;
                    if (Array.isArray(value) && value.some(item => typeof item === 'string' && item.toLowerCase().includes(pinValue))) return true;
                }
            }
            return false;
        });

        const customOrder = this.plugin.settings.pinnedNotesCustomOrder || [];

        // Sort the notes based on the saved custom order, with a fallback for new notes
        pinnedNotes.sort((a, b) => {
            const indexA = customOrder.indexOf(a.path);
            const indexB = customOrder.indexOf(b.path);

            if (indexA === -1 && indexB === -1) return a.basename.localeCompare(b.basename);
            if (indexA === -1) return 1;
            if (indexB === -1) return -1;
            return indexA - indexB;
        });

        // Create draggable elements
        pinnedNotes.forEach(file => {
            const itemEl = container.createDiv({ cls: 'draggable-item' });
            itemEl.draggable = true;
            itemEl.dataset.filePath = file.path;

            const handle = itemEl.createDiv({ cls: 'drag-handle' });
            setIcon(handle, 'grip-vertical');
            itemEl.createSpan({ text: file.basename });

            // Drag-and-Drop Event Listeners
            itemEl.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('text/plain', file.path);
                itemEl.classList.add('dragging');
            });

            itemEl.addEventListener('dragend', () => {
                itemEl.classList.remove('dragging');
            });

            itemEl.addEventListener('dragover', (e) => {
                e.preventDefault();
                const draggingItem = container.querySelector('.dragging');
                if (draggingItem && draggingItem !== itemEl) {
                    const rect = itemEl.getBoundingClientRect();
                    const isAfter = e.clientY > rect.top + rect.height / 2;
                    if (isAfter) {
                        itemEl.parentNode.insertBefore(draggingItem, itemEl.nextSibling);
                    } else {
                        itemEl.parentNode.insertBefore(draggingItem, itemEl);
                    }
                }
            });
        });

        // Save the new order on drop (by listening on the container)
        container.addEventListener('drop', async () => {
            const newOrder = Array.from(container.children).map(child => child.dataset.filePath);
            this.plugin.settings.pinnedNotesCustomOrder = newOrder;
            await this.plugin.saveSettings();
            new Notice('Custom pinned order saved!');
        });
    }

    renderContentForActiveTab() {
        this.contentEl.empty();
        switch (this.activeTab) {
            case 'general':
                this.renderGeneralSettings();
                break;
            case 'functional':
                this.renderFunctionalSettings();
                break;
            case 'popup':
                this.renderPopupSettings();
                break;
            case 'dots':
                this.renderDotsSettings();
                break;
            case 'weeklyNotes':
                this.renderWeeklyNotesSettings();
                break;
            case 'tasksIndicator':
                this.renderTaskIndicatorSettings();
                break;
            case 'tabs':
                this.renderTabsSettings();
                break;
            case 'scratchpad':
                this.renderScratchpadSettings();
                break;
            case 'notes':
                this.renderNotesSettings();
                break;
            case 'pinned':
                this.renderPinnedNotesSettings();
                break;
            case 'assets':
                this.renderAssetsSettings();
                break;
            case 'tasks':
                this.renderTasksSettings();
                break;
            case 'dashboard':
                this.renderDashboardSettings();
                break;
            case 'themes':
                this.renderThemesSettings();
                break;
            case 'importExport':
                this.renderImportExportTab();
                break;
            case 'startHere':
                this.renderStartHereTab();
                break;
            case 'about':
                this.renderAboutTab();
                break;
        }
    }

    // --- RENDER METHODS FOR EACH TAB ---
    renderGeneralSettings() {
        const containerEl = this.contentEl;
        containerEl.empty();

        containerEl.createEl("h1", { text: "General Display Settings" });

        // --- Titles & Headers Section ---
        new Setting(containerEl).setName("Titles & Headers").setHeading();
        const monthTitleSetting = new Setting(containerEl).setName("Month title format");
        monthTitleSetting.descEl.innerHTML = `
            Set the format for the calendar's month title. Uses <a href="https://momentjs.com/docs/#/displaying/format/">moment.js</a> format strings, e.g.
            <br><code>YYYY</code>: 4-digit year (e.g., 2025)
            <br><code>YY</code>: 2-digit year (e.g., 25)
            <br><code>MMMM</code>: Full month name (e.g., September)
            <br><code>MMM</code>: Short month name (e.g., Sep)
            <br><code>MM</code>: 2-digit month (e.g., 09)
            <br><code>M</code>: Month number (e.g., 9)
        `;

        monthTitleSetting.addText(text => text.setPlaceholder("MMMM YYYY").setValue(this.plugin.settings.monthTitleFormat).onChange(async (value) => { this.plugin.settings.monthTitleFormat = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Month title font size").setDesc("Font size for the main 'Month Year' title at the top of the calendar. Default is 22px.").addText(text => text.setValue(this.plugin.settings.mainMonthYearTitleFontSize).onChange(async value => { this.plugin.settings.mainMonthYearTitleFontSize = value; await this.saveAndUpdate(); }));

        new Setting(containerEl)
            .setName("Bold month in title")
            .setDesc("Toggles bold font weight for the month part of the title.")
            .addToggle(toggle => {
                toggle
                    .setValue(this.plugin.settings.mainMonthTitleBold)
                    .onChange(async (value) => {
                        this.plugin.settings.mainMonthTitleBold = value;
                        await this.saveAndUpdate();
                    });
            });

        this.createRgbaColorSetting(containerEl, "Month Title Color (Light Mode)", "Color for the main 'Month' title in light mode.", "monthColorLight");
        this.createRgbaColorSetting(containerEl, "Month Title Color (Dark Mode)", "Color for the main 'Month' title in dark mode.", "monthColorDark");

        new Setting(containerEl)
            .setName("Bold year in title")
            .setDesc("Toggles bold font weight for the year part of the title.")
            .addToggle(toggle => {
                toggle
                    .setValue(this.plugin.settings.mainYearTitleBold)
                    .onChange(async (value) => {
                        this.plugin.settings.mainYearTitleBold = value;
                        await this.saveAndUpdate();
                    });
            });

        this.createRgbaColorSetting(
            containerEl,
            'Year Title Color (Light Mode)',
            'Color for the year text in the main title in light mode.',
            'yearColorLight'
        );
        this.createRgbaColorSetting(
            containerEl,
            'Year Title Color (Dark Mode)',
            'Color for the year text in the main title in dark mode.',
            'yearColorDark'
        );

        new Setting(containerEl).setName("Navigation buttons height").setDesc("Default is 28px.").addText(text => text.setValue(this.plugin.settings.navButtonHeight).onChange(async value => { this.plugin.settings.navButtonHeight = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Bold calendar header").setDesc("Toggles bold font weight for the day names row (Mon, Tue, etc.).").addToggle(toggle => toggle.setValue(this.plugin.settings.headerRowBold).onChange(async value => { this.plugin.settings.headerRowBold = value; await this.saveAndUpdate(); }));
        this.createRgbaColorSetting(containerEl, "Day header row font color (Light Mode)", "Text color for the day names (Sun, Mon, Tue, etc.) in light theme.", "dayHeaderFontColorLight");
        this.createRgbaColorSetting(containerEl, "Day header row font color (Dark Mode)", "Text color for the day names (Sun, Mon, Tue, etc.) in dark theme.", "dayHeaderFontColorDark");

        // --- Calendar Grid Section ---
        new Setting(containerEl).setName("Calendar Grid").setHeading();

        new Setting(containerEl)
            .setName("Calendar grid layout")
            .setDesc("Choose between a spacious, normal or condensed layout for the calendar grid.")
            .addDropdown(dropdown => dropdown
                .addOption('spacious', 'Spacious')
                .addOption('normal', 'Normal')
                .addOption('condensed', 'Condensed')
                .setValue(this.plugin.settings.calendarLayout)
                .onChange(async (value) => {
                    this.plugin.settings.calendarLayout = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName('Calendar grid labels font size')
            .setDesc('Font size for calendar day lables and week, period/week columns. Default is 12px.')
            .addText(text => text
                .setValue(this.plugin.settings.fontSize)
                .onChange(async (value) => {
                    this.plugin.settings.fontSize = value;
                    await this.saveAndUpdate();
                }));
        new Setting(containerEl).setName("Calendar grid day numbers font size").setDesc("Font size for the day numbers in the calendar grid. Default is 15px.").addText(text => text.setValue(this.plugin.settings.dayNumberFontSize).onChange(async value => { this.plugin.settings.dayNumberFontSize = value; await this.saveAndUpdate(); }));
        this.createRgbaColorSetting(containerEl, "Date cell font color (Light Mode)", "Text color for the date numbers in light theme.", "dayCellFontColorLight");
        this.createRgbaColorSetting(containerEl, "Date cell font color (Dark Mode)", "Text color for the date numbers in dark theme.", "dayCellFontColorDark");
        this.createRgbaColorSetting(containerEl, "Other month date font color (Light Mode)", "Text color for dates outside the current month in light theme.", "otherMonthFontColorLight");
        this.createRgbaColorSetting(containerEl, "Other month date font color (Dark Mode)", "Text color for dates outside the current month in dark theme.", "otherMonthFontColorDark");

        new Setting(containerEl).setName("Show calendar grid lines").setDesc("Toggles the visibility of border lines around each date cell.").addToggle(toggle => toggle.setValue(this.plugin.settings.showCalendarGridLines).onChange(async value => { this.plugin.settings.showCalendarGridLines = value; await this.saveAndUpdate(); }));
        new Setting(containerEl)
            .setName("Calendar grid gap width")
            .setDesc("Width of the gap/border between calendar cells. The grid lines setting above needs to be toggled on. (e.g., 1px, 2px, 0.5px). Default is 1px.")
            .addText(text => text
                .setPlaceholder("1px")
                .setValue(this.plugin.settings.calendarGridGapWidth)
                .onChange(async (value) => {
                    this.plugin.settings.calendarGridGapWidth = value || "1px";
                    await this.saveAndUpdate();
                }));

        // --- Corrected Dynamic "Today's date style" Section ---
        const todayStyleSetting = new Setting(containerEl)
            .setName("Today's date style")
            .setDesc("Choose how to indicate the current day on the calendar.");

        const todayHighlightSizeSetting = new Setting(containerEl)
            .setName("Today circle highlight size")
            .setDesc("Adjust the size of the 'today' highlight circle.")
            .addSlider(slider => slider
                .setLimits(1.5, 3.4, 0.1) // Min size, Max size, Step increment

                // This part is correct: It gives the slider the number it needs.
                .setValue(parseFloat(this.plugin.settings.todayHighlightSize))

                .setDynamicTooltip() // Shows the current value as you slide
                .onChange(async (value) => {

                    this.plugin.settings.todayHighlightSize = `${value}em`;
                    await this.saveAndUpdate();
                    this.plugin.app.workspace.getLeavesOfType(VIEW_TYPE_PERIOD).forEach(leaf => {
                        if (leaf.view instanceof CalendarPeriodWeekView) {
                            leaf.view.containerEl.style.setProperty(
                                '--today-highlight-size',
                                this.plugin.settings.todayHighlightSize // Now using the correct value from settings
                            );
                        }
                    });
                }));

        const highlightOptionsContainer = containerEl.createDiv();
        const renderHighlightOptions = (style) => {
            highlightOptionsContainer.empty();

            if (style === 'cell') {
                this.createRgbaColorSetting(highlightOptionsContainer, "Today's Date Cell Highlight (Light Mode)", "Background color for the current day's cell in light mode.", "todayHighlightColorLight");
                this.createRgbaColorSetting(highlightOptionsContainer, "Today's Date Cell Highlight (Dark Mode)", "Background color for the current day's cell in dark mode.", "todayHighlightColorDark");
            } else if (style === 'circle' || style === 'number') {

                this.createRgbaColorSetting(highlightOptionsContainer, "Today's Date Highlight Color (Light Mode)", "Controls the highlight for Circle/Square styles in light mode.", "todayCircleColorLight");
                this.createRgbaColorSetting(highlightOptionsContainer, "Today's Date Highlight Color (Dark Mode)", "Controls the highlight for Circle/Square styles in dark mode.", "todayCircleColorDark");
            }

            if (style === 'circle') {

                todayHighlightSizeSetting.settingEl.style.display = '';
            } else {
                todayHighlightSizeSetting.settingEl.style.display = 'none';

            }
        };

        todayStyleSetting.addDropdown(dropdown => {
            dropdown
                .addOption('none', 'Off (No Highlight)')
                .addOption('cell', 'Highlight Cell')
                .addOption('circle', 'Circle Around Date')
                .addOption('number', 'Square Around Date')
                .setValue(this.plugin.settings.todayHighlightStyle)
                .onChange(async (value) => {
                    this.plugin.settings.todayHighlightStyle = value;
                    await this.saveAndUpdate();
                    renderHighlightOptions(value);
                });
        });

        renderHighlightOptions(this.plugin.settings.todayHighlightStyle);
        // --- End of Corrected Section ---

        new Setting(containerEl).setName("Highlight today's day header").setDesc("Colors the day column header (Sun, Mon, etc.) containing today.").addToggle(toggle => toggle.setValue(this.plugin.settings.highlightTodayDayHeader).onChange(async value => { this.plugin.settings.highlightTodayDayHeader = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Highlight today's P/W or week number").setDesc("Colors the Period/Week or Calendar Week number for the current week.").addToggle(toggle => toggle.setValue(this.plugin.settings.highlightTodayPWLabel).onChange(async value => { this.plugin.settings.highlightTodayPWLabel = value; await this.saveAndUpdate(); }));

        this.createRgbaColorSetting(
            containerEl,
            "Current Day / Week Label Highlight (Light Mode)",
            "Color for the current day's labels, (e.g. SUN, MON) and period week / calendar week labels in light mode.",
            "currentHighlightLabelColorLight"
        );

        this.createRgbaColorSetting(
            containerEl,
            "Current Day / Week Label Highlight (Dark Mode)",
            "Color for the current day's labels, (e.g. SUN, MON) and period week / calendar week labels in dark mode.",
            "currentHighlightLabelColorDark"
        );

        this.createRgbaColorSetting(containerEl, "Date Cell Hover Color (Light Mode)", "Background color when hovering over a date cell in light mode.", "dateCellHoverColorLight");
        this.createRgbaColorSetting(containerEl, "Date Cell Hover Color (Dark Mode)", "Background color when hovering over a date cell in dark mode.", "dateCellHoverColorDark");
        new Setting(containerEl).setName("Bold Period/Week column").setDesc("Toggles bold font weight for the Period/Week column.").addToggle(toggle => toggle.setValue(this.plugin.settings.pwColumnBold).onChange(async value => { this.plugin.settings.pwColumnBold = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Show P/W separator line").setDesc("Display a vertical line between the week columns and the date grid.").addToggle(toggle => toggle.setValue(this.plugin.settings.showPWColumnSeparator).onChange(async value => { this.plugin.settings.showPWColumnSeparator = value; await this.saveAndUpdate(); }));
        this.createRgbaColorSetting(containerEl, "P/W separator line color", "Color of the vertical separator line.", "pwColumnSeparatorColor");
        this.createRgbaColorSetting(containerEl, "Period/Week column font color (Light Mode)", "Text color for the Period/Week column in light theme.", "pwColumnFontColorLight");
        this.createRgbaColorSetting(containerEl, "Period/Week column font color (Dark Mode)", "Text color for the Period/Week column in dark theme.", "pwColumnFontColorDark");
        this.createRgbaColorSetting(containerEl, "Week number column font color (Light Mode)", "Text color for the week number column in light theme.", "weekNumberFontColorLight");
        this.createRgbaColorSetting(containerEl, "Week number column font color (Dark Mode)", "Text color for the week number column in dark theme.", "weekNumberFontColorDark");
    }

    renderFunctionalSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Calendar Functional Settings" });

        // --- Period/Week System Section ---
        new Setting(containerEl).setName("Period/Week System").setHeading();

        new Setting(containerEl)
            .setName("Week starts on")
            .setDesc("Choose whether the calendar week starts on Sunday or Monday.")
            .addDropdown(dropdown => dropdown
                .addOption('monday', 'Monday')
                .addOption('sunday', 'Sunday')
                .setValue(this.plugin.settings.weekStartDay)
                .onChange(async (value) => {
                    this.plugin.settings.weekStartDay = value;
                    await this.saveAndUpdate();
                    // Refresh the settings tab to show the updated validation message
                    this.refreshDisplay();
                }));

        const requiredDay = this.plugin.settings.weekStartDay === 'monday' ? 1 : 0; // Monday is 1, Sunday is 0
        const requiredDayName = this.plugin.settings.weekStartDay.charAt(0).toUpperCase() + this.plugin.settings.weekStartDay.slice(1);

        new Setting(containerEl)
            .setName("Start of Period 1 Week 1")
            .setDesc(`The date for the start of P1W1. This date MUST be a ${requiredDayName} to match your 'Week starts on' setting.`) // Dynamic description
            .addText(text => {
                text.inputEl.type = "date";
                text.setValue(this.plugin.settings.startOfPeriod1Date)
                    .onChange(async value => {
                        const selectedDate = moment(value, "YYYY-MM-DD");
                        if (selectedDate.day() !== requiredDay) {
                            new Notice(`Error: The start date must be a ${requiredDayName}.`, 5000);
                            return; // Do not save the invalid date
                        }
                        this.plugin.settings.startOfPeriod1Date = value;
                        await this.saveAndUpdate();
                    });
            });

        new Setting(containerEl).setName("Period/Week format").setDesc("Choose the display format for the P/W column.").addDropdown(dropdown => dropdown.addOption("P#W#", "P#W#").addOption("P# W#", "P# W#").addOption("# W#", "# W#").addOption("p#w#", "p#p#").addOption("p# w#", "p# w#").addOption("# w#", "# w#").addOption("#-#", "#-#").addOption("# - #", "# - #").addOption("#/#", "#/#").addOption("# / #", "# / #").addOption("#,#", "#,#").addOption("#, #", "#, #").setValue(this.plugin.settings.pwFormat).onChange(async (value) => { this.plugin.settings.pwFormat = value; await this.saveAndUpdate(); }));

        new Setting(containerEl).setName("Show Period/Week column").setDesc("Show or hide the Period/Week column on the left side of the calendar.").addToggle(toggle => toggle.setValue(this.plugin.settings.showPWColumn).onChange(async value => { this.plugin.settings.showPWColumn = value; await this.saveAndUpdate(); }));

        // --- Week Numbers Section ---
        new Setting(containerEl).setName("Week Numbers").setHeading();

        new Setting(containerEl)
            .setName("Show week number column")
            .setDesc("Display a column for week numbers on the left side of the calendar.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.showWeekNumbers)
                .onChange(async (value) => {
                    this.plugin.settings.showWeekNumbers = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Week number type")
            .setDesc("Choose which week numbering system to use.")
            .addDropdown(dropdown => dropdown
                .addOption('period', 'Period System Week')
                .addOption('calendar', 'Calendar Year Week (ISO)')
                .setValue(this.plugin.settings.weekNumberType)
                .onChange(async (value) => {
                    this.plugin.settings.weekNumberType = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Week number column label")
            .setDesc("The text to display at the top of the week number column.")
            .addText(text => text
                .setValue(this.plugin.settings.weekNumberColumnLabel)
                .onChange(async (value) => {
                    this.plugin.settings.weekNumberColumnLabel = value;
                    await this.saveAndUpdate();
                }));

        // --- Daily Notes Section ---
        new Setting(containerEl).setName("Daily Notes").setHeading();
        new Setting(containerEl).setName("Daily Notes folder").setDesc("Specify the folder where your daily notes are stored and created.").addText(text => { this.createPathSuggester(text.inputEl, (q) => this.app.vault.getAllLoadedFiles().filter(f => f instanceof TFolder && (!q || f.path.toLowerCase().includes(q))).map(f => f.path)); text.setValue(this.plugin.settings.dailyNotesFolder).onChange(async value => { this.plugin.settings.dailyNotesFolder = value; await this.saveAndUpdate(); }); });
        new Setting(containerEl).setName("Daily Note open behavior").addDropdown(dropdown => dropdown.addOption('new-tab', 'Open in a new tab').addOption('current-tab', 'Open in the current tab').setValue(this.plugin.settings.dailyNoteOpenAction).onChange(async (value) => { this.plugin.settings.dailyNoteOpenAction = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Daily note template").setDesc("Path to a template file to use when creating a new daily note.").addText(text => { this.createPathSuggester(text.inputEl, (q) => this.app.vault.getMarkdownFiles().filter(f => !q || f.path.toLowerCase().includes(q)).map(f => f.path)); text.setPlaceholder("Example: Templates/Daily.md").setValue(this.plugin.settings.dailyNoteTemplatePath).onChange(async (value) => { this.plugin.settings.dailyNoteTemplatePath = value; await this.saveAndUpdate(); }); });

        // --- Grid Highlighting Section ---
        new Setting(containerEl).setName("Grid Highlighting").setHeading();
        new Setting(containerEl).setName("Enable row highlight").setDesc("Highlights the entire week's row when hovering over the P/W label.").addToggle(toggle => toggle.setValue(this.plugin.settings.enableRowHighlight).onChange(async (value) => { this.plugin.settings.enableRowHighlight = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Enable column highlight").setDesc("Highlights the entire day's column when hovering over the day name (e.g., Mon).").addToggle(toggle => toggle.setValue(this.plugin.settings.enableColumnHighlight).onChange(async (value) => { this.plugin.settings.enableColumnHighlight = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Enable complex grid highlight").setDesc("When hovering a date, highlights all cells in its row and column up to that date.").addToggle(toggle => toggle.setValue(this.plugin.settings.enableRowToDateHighlight).onChange(async (value) => { this.plugin.settings.enableRowToDateHighlight = value; await this.saveAndUpdate(); }));

        new Setting(containerEl)
            .setName("Always highlight current week")
            .setDesc("Keeps the entire row for the current week permanently highlighted.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.highlightCurrentWeek)
                .onChange(async (value) => {
                    this.plugin.settings.highlightCurrentWeek = value;
                    await this.saveAndUpdate();
                }));


        this.createRgbaColorSetting(containerEl, "Grid Highlight Color (Light Mode)", "Color for row/column highlighting on hover in light mode.", "rowHighlightColorLight");
        this.createRgbaColorSetting(containerEl, "Grid Highlight Color (Dark Mode)", "Color for row/column highlighting on hover in dark mode.", "rowHighlightColorDark");

        new Setting(containerEl)
            .setName("Highlight weekends")
            .setDesc("Shade Saturday and Sunday columns with a subtle background color.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.highlightWeekends)
                .onChange(async (value) => {
                    this.plugin.settings.highlightWeekends = value;
                    await this.saveAndUpdate();
                }));

        this.createRgbaColorSetting(
            containerEl,
            "Weekend shade color (Light Mode)",
            "Background color for Saturday and Sunday columns in light theme.",
            "weekendShadeColorLight"
        );

        this.createRgbaColorSetting(
            containerEl,
            "Weekend shade color (Dark Mode)",
            "Background color for Saturday and Sunday columns in dark theme.",
            "weekendShadeColorDark"
        );

        new Setting(containerEl).setName("Integrate External Calendar Events").setHeading();

        new Setting(containerEl)
            .setName('External calendar URL (.ics)')
            .setDesc('Integrate an external .ics feed calendar URL (e.g., from Google Calendar using the \'Secret address in iCal format\' or \'Public address in iCal Format\') to indicate events as dots in the calendar grid and event details in the date popup box.')
            .addText(text => {
                text
                    .setPlaceholder('https://calendar.google.com/calendar/ical/.../basic.ics')
                    .setValue(this.plugin.settings.icsUrl)
                    .onChange(async (value) => {
                        this.plugin.settings.icsUrl = value;
                        await this.saveAndUpdate();
                    });
                text.inputEl.style.minWidth = "300px";
                text.inputEl.style.resize = "vertical";
            })
            .settingEl.style.alignItems = "flex-start";

        new Setting(containerEl)
            .setName('Auto-refresh Interval')
            .setDesc('How often the external calendar URL should be automatically refreshed in the background.')
            .addDropdown(dropdown => {
                dropdown
                    .addOption('15', '15 minutes')
                    .addOption('30', '30 minutes')
                    .addOption('60', '1 hour')
                    .addOption('180', '3 hours')
                    .addOption('360', '6 hours')
                    .addOption('720', '12 hours')
                    .setValue(this.plugin.settings.icsRefreshInterval.toString())
                    .onChange(async (value) => {
                        this.plugin.settings.icsRefreshInterval = parseInt(value, 10);
                        await this.plugin.saveSettings();

                        // Call a method on the main plugin to reset the timer
                        this.plugin.resetIcsRefreshInterval();
                    });
            });

        new Setting(containerEl)
            .setName('Calendar Event Indicator')
            .setDesc('Choose how to display external calendar events on the calendar grid. "Dot" shows a separate colored dot, while "Heatmap" and "Badge" will add the event count to the existing task indicators. If you select "Heatmap" or "Badge", ensure that the corresponding task indicator option is also enabled in the "Task Indicators" settings tab. Settings will be applied after closing the settings window.')
            .addDropdown(dropdown => dropdown
                .addOption('dot', 'Dot Only')
                .addOption('heatmap', 'Add to Heatmap')
                .addOption('badge', 'Add to Task Badge')
                .setValue(this.plugin.settings.calendarEventIndicatorStyle || 'dot')
                .onChange(async (value) => {
                    // Step 1: Save the new value
                    this.plugin.settings.calendarEventIndicatorStyle = value;
                    await this.plugin.saveSettings();
                }));

        new Setting(containerEl)
            .setName('Calendar Events Placeholder')
            .setDesc('The placeholder text to use in your daily note template. The plugin will replace this text with calendar events.')
            .addText(text => {
                text
                    .setPlaceholder('%%CALENDAR_EVENTS%%')
                    .setValue(this.plugin.settings.calendarEventsPlaceholder)
                    .onChange(async (value) => {
                        this.plugin.settings.calendarEventsPlaceholder = value.trim() || '%%CALENDAR_EVENTS%%';
                        await this.plugin.saveSettings();
                    });

                // Set the minimum width for the text input field
                text.inputEl.style.minWidth = "300px";
                text.inputEl.style.resize = "vertical";
            })
            .settingEl.style.alignItems = "flex-start";


        const calendarFormatSetting = new Setting(containerEl)
            .setName('Calendar Event Format')
            .addTextArea(text => {
                text
                    .setPlaceholder('- {{startTime}} - {{endTime}}: {{summary}}')
                    .setValue(this.plugin.settings.calendarEventsFormat)
                    .onChange(async (value) => {
                        this.plugin.settings.calendarEventsFormat = value || '- {{startTime}} - {{endTime}}: {{summary}}';
                        await this.plugin.saveSettings();
                    });

                // Apply styles to the textarea element
                text.inputEl.style.minWidth = "300px";
                text.inputEl.style.minHeight = "100px";
                text.inputEl.style.resize = "vertical";
            });

        const descEl = calendarFormatSetting.descEl;
        descEl.appendText('Customize the format for each calendar event. Use these placeholders:');

        const placeholderList = descEl.createEl('ul');

        const placeholders = [
            { code: '{{summary}}', text: 'The event title' },
            { code: '{{startTime}}', text: 'The event start time (or "All-day")' },
            { code: '{{endTime}}', text: 'The event end time' }
        ];

        placeholders.forEach(p => {
            const item = placeholderList.createEl('li');
            item.createEl('code', { text: p.code });
            item.appendText(` ${p.text}`);
        });

        // Align the entire setting row to the top
        calendarFormatSetting.settingEl.style.alignItems = "flex-start";

    }

    renderPopupSettings() {

        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Popup Controls" });

        // --- Popups Section ---
        new Setting(containerEl).setName("Popup hover delay").setDesc("How long to wait before showing the note list popup on hover. Default is 800.").addText(text => text.setValue(String(this.plugin.settings.otherNoteHoverDelay)).onChange(async (value) => { this.plugin.settings.otherNoteHoverDelay = Number(value) || 100; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Popup hide delay").setDesc("How long to wait before hiding the popup after the mouse leaves. Default is 50.").addText(text => text.setValue(String(this.plugin.settings.popupHideDelay)).onChange(async (value) => { this.plugin.settings.popupHideDelay = Number(value) || 100; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Popup gap").setDesc("The gap (in pixels) between a calendar day and its popup list. Can be negative. Default is -2.").addText(text => text.setValue(String(this.plugin.settings.popupGap)).onChange(async (value) => { this.plugin.settings.popupGap = Number(value) || -2; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Popup font size").setDesc("The font size for the note names inside the calendar popup. Default is 14px.").addText(text => text.setValue(this.plugin.settings.otherNotePopupFontSize).onChange(async value => { this.plugin.settings.otherNotePopupFontSize = value; await this.saveAndUpdate(); }));

        new Setting(containerEl)
            .setName('Notes & Assets Popup Trigger')
            .setDesc('Choose how popups appear in the Notes and Assets tabs: on hover, or on right-click (which corresponds to a long-press on mobile).')
            .addDropdown(dropdown => {
                dropdown
                    .addOption('hover', 'Hover')
                    .addOption('rightclick', 'Right-click / Long-press')
                    .setValue(this.plugin.settings.listPopupTrigger || 'hover')
                    .onChange(async (value) => {
                        this.plugin.settings.listPopupTrigger = value;
                        await this.plugin.saveSettings();

                        // Refresh the notes and assets views to apply the new behavior instantly
                        this.plugin.app.workspace.getLeavesOfType(VIEW_TYPE_PERIOD).forEach(leaf => {
                            if (leaf.view && typeof leaf.view.populateNotes === 'function') {
                                // Call both populate functions. Since they check for their
                                // own container's existence, only the one for the active
                                // tab in that view instance will actually run.
                                leaf.view.populateNotes();
                                leaf.view.populateAssets();
                            }
                        });
                    });
            });

    }

    renderDotsSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Dot Indicators" });
        // --- Dot Functionality Section ---
        new Setting(containerEl).setName("Calendar Functionality & Style").setHeading();
        new Setting(containerEl).setName("Show dot for created notes").setDesc("Show a dot on days where any note (that is not a daily note) was created.").addToggle(toggle => toggle.setValue(this.plugin.settings.showOtherNoteDot).onChange(async value => { this.plugin.settings.showOtherNoteDot = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Show dot for modified notes").setDesc("Show a dot on days where any note (that is not a daily note) was modified.").addToggle(toggle => toggle.setValue(this.plugin.settings.showModifiedFileDot).onChange(async value => { this.plugin.settings.showModifiedFileDot = value; await this.saveAndUpdate(); }));
        new Setting(containerEl)
            .setName("Show dot for new assets")
            .setDesc("Show a dot on days where an asset (image, PDF, etc.) was added to the vault.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.showAssetDot)
                .onChange(async (value) => {
                    this.plugin.settings.showAssetDot = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName('Show dot for external ics calendar events')
            .setDesc('Show a dot on days that have a calendard event from an external calendar source, e.g. Google Calendar.')
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.showIcsDot)
                .onChange(async (value) => {
                    this.plugin.settings.showIcsDot = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl).setName("Calendar dot size").setDesc("The size (in pixels) of the colored dots that appear under calendar days. Default is 4.").addText(text => text.setValue(String(this.plugin.settings.calendarDotSize)).onChange(async (value) => { this.plugin.settings.calendarDotSize = Number(value) || 4; await this.saveAndUpdate(); }));

        // --- Dot Colors Section ---
        new Setting(containerEl).setName("Dot Colors").setHeading();
        this.createRgbaColorSetting(containerEl, "Daily Note", "Used for daily notes.", "dailyNoteDotColor");
        this.createRgbaColorSetting(containerEl, "Created Note", "Uses the created file date for notes, not used for Daily / Weekly Notes.", "noteCreatedColor");
        this.createRgbaColorSetting(containerEl, "Modified Note", "Uses the modified file date for notes, not used for Daily / Weekly Notes.", "noteModifiedColor");
        this.createRgbaColorSetting(containerEl, "Asset Note", "Uses the created file date for newly added assets.", "assetDotColor");
        this.createRgbaColorSetting(containerEl, 'Calendar Event', 'Used for events from your iCal/.ics feed.', 'calendarEventDotColor');
        this.createIgnoredFolderList(containerEl, "Ignore folders for note dots", "Files in these folders will not create 'created' or 'modified' dots on the calendar grid or lists.", 'otherNoteIgnoreFolders');
        this.createIgnoredFolderList(containerEl, "Ignore folders for asset dots", "Assets in these folders will not create dots on the calendar and lists.", 'assetIgnoreFolders');

    }

    renderWeeklyNotesSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Weekly Notes Settings" });

        new Setting(containerEl)
            .setName("Enable Weekly Notes")
            .setDesc("Enable clicking on week numbers to open/create weekly notes and show the dot indicator.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.enableWeeklyNotes)
                .onChange(async (value) => {
                    this.plugin.settings.enableWeeklyNotes = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Weekly Note Folder")
            .setDesc("The folder where your weekly notes are stored. It will be created if it doesn't exist.")
            .addText(text => {
                this.createPathSuggester(text.inputEl, (q) => this.app.vault.getAllLoadedFiles().filter(f => f instanceof TFolder && (!q || f.path.toLowerCase().includes(q))).map(f => f.path));
                text.setValue(this.plugin.settings.weeklyNoteFolder)
                    .onChange(async value => {
                        this.plugin.settings.weeklyNoteFolder = value;
                        await this.saveAndUpdate();
                    });
            });

        // In the PeriodSettingsTab class, inside renderWeeklyNotesSettings()
        const weeklyFormatSetting = new Setting(containerEl).setName("Weekly Note Format");
        weeklyFormatSetting.descEl.innerHTML = `
            Set the filename format for weekly notes using dots, hyphens, or other separators.
            <br>The following placeholders will be replaced automatically:
            <br><code>YYYY</code> - The 4-digit year (e.g., 2025)
            <br><code>MM</code> - The 2-digit month (e.g., 08)
            <br><code>PN</code> - The Period Number with a 'P' prefix (e.g., P8)
            <br><code>PW</code> - The week number within the period with a 'W' prefix (e.g., W2)
            <br><code>WKP</code> - The week number (1-52) within your custom period year
            <br><code>WKC</code> - The standard ISO calendar week number (1-53)
            <br><br><b>Examples:</b>
            <br>Format: <code>YYYY-MM-PNPW</code> → Filename: <code>2025-08-P8W2.md</code>
            <br>Format: <code>YYYY-MM-WKP</code> → Filename: <code>2025-08-30.md</code>
            <br>Format: <code>YYYY-MM-WWKC</code> → Filename: <code>2025-08-W38.md</code>
        `;
        weeklyFormatSetting.addText(text => text
            .setValue(this.plugin.settings.weeklyNoteFormat)
            .onChange(async (value) => {
                this.plugin.settings.weeklyNoteFormat = value;
                await this.saveAndUpdate();
            }));

        new Setting(containerEl)
            .setName("Weekly note template")
            .setDesc("Path to a template file to use when creating a new weekly note.")
            .addText(text => {
                this.createPathSuggester(text.inputEl, (q) => this.app.vault.getMarkdownFiles().filter(f => !q || f.path.toLowerCase().includes(q)).map(f => f.path));
                text.setPlaceholder("Example: Templates/Weekly.md")
                    .setValue(this.plugin.settings.weeklyNoteTemplate)
                    .onChange(async (value) => {
                        this.plugin.settings.weeklyNoteTemplate = value;
                        await this.saveAndUpdate();
                    });
            });

        new Setting(containerEl).setName("Dot Indicator").setHeading();

        new Setting(containerEl)
            .setName("Show dot for weekly notes")
            .setDesc("Show a dot in the week number column if a note for that week exists.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.showWeeklyNoteDot)
                .onChange(async (value) => {
                    this.plugin.settings.showWeeklyNoteDot = value;
                    await this.saveAndUpdate();
                }));

        this.createRgbaColorSetting(containerEl, "Weekly Note Dot Color", "The color of the dot for existing weekly notes.", "weeklyNoteDotColor");
    }

    renderTaskIndicatorSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Calendar Task Indicators" });
        new Setting(containerEl)
            .setName("Task indicator style")
            .setDesc("Choose how to indicate days with tasks on the calendar grid.")
            .addDropdown(dropdown => dropdown
                .addOption('none', 'None')
                .addOption('badge', 'Number Badge')
                .addOption('heatmap', 'Cell Color Heatmap')
                .setValue(this.plugin.settings.taskIndicatorStyle)
                .onChange(async (value) => {
                    this.plugin.settings.taskIndicatorStyle = value;
                    await this.saveAndUpdate();
                    // We re-render the settings display to show/hide relevant options
                    this.refreshDisplay();
                }));

        new Setting(containerEl)
            .setName("Show dot for tasks")
            .setDesc("Show a single dot on days with tasks. This can be used with or instead of the heatmap/badge.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.showTaskDot)
                .onChange(async (value) => {
                    this.plugin.settings.showTaskDot = value;
                    await this.saveAndUpdate();
                }));

        this.createRgbaColorSetting(containerEl, "Task Dot Color", "The color of the dot indicating a day has tasks.", "taskDotColor");

        // Only show the badge/heatmap settings if they are relevant
        if (this.plugin.settings.taskIndicatorStyle === 'badge') {
            new Setting(containerEl)
                .setName("Task badge font size")
                .setDesc("The font size for the number inside the task badge. Default is 11px.")
                .addText(text => text
                    .setValue(this.plugin.settings.taskBadgeFontSize)
                    .onChange(async (value) => {
                        this.plugin.settings.taskBadgeFontSize = value;
                        await this.saveAndUpdate();
                    }));

            this.createRgbaColorSetting(containerEl, "Task badge color", "The background color of the task count badge.", "taskBadgeColor");
            this.createRgbaColorSetting(containerEl, "Task badge font color", "The color of the number inside the task count badge.", "taskBadgeFontColor");
        }

        if (this.plugin.settings.taskIndicatorStyle === 'heatmap') {

            new Setting(containerEl)
                .setName("Heatmap content border width")
                .setDesc("Width of the border around the day heatmap content area (e.g., 1px, 2px, 3px). Creates visual separation inside cells. Default is 1px.")
                .addText(text => text
                    .setPlaceholder("1px")
                    .setValue(this.plugin.settings.contentBorderWidth)
                    .onChange(async (value) => {
                        this.plugin.settings.contentBorderWidth = value || "1px";
                        await this.saveAndUpdate();
                    }));

            containerEl.createEl('p', { text: 'Configure the start, middle, and end points of the dynamic color gradient. Colors will be blended smoothly between these points.', cls: 'setting-item-description' });

            new Setting(containerEl).setName("Gradient Midpoint").setDesc("The number of tasks that should have the exact 'Mid' color. Default is 5.").addText(text => text.setValue(String(this.plugin.settings.taskHeatmapMidpoint)).onChange(async (value) => { this.plugin.settings.taskHeatmapMidpoint = Number(value) || 5; await this.saveAndUpdate(); }));
            new Setting(containerEl).setName("Gradient Maxpoint").setDesc("The number of tasks that should have the exact 'End' color. Any day with more tasks will also use the end color. Default is 10.").addText(text => text.setValue(String(this.plugin.settings.taskHeatmapMaxpoint)).onChange(async (value) => { this.plugin.settings.taskHeatmapMaxpoint = Number(value) || 10; await this.saveAndUpdate(); }));

            this.createRgbaColorSetting(containerEl, "Heatmap: Start Color (1 Task)", "The color for days with 1 task.", "taskHeatmapStartColor");
            this.createRgbaColorSetting(containerEl, "Heatmap: Mid Color", "The color for days meeting the 'Midpoint' task count.", "taskHeatmapMidColor");
            this.createRgbaColorSetting(containerEl, "Heatmap: End Color", "The color for days meeting the 'Maxpoint' task count.", "taskHeatmapEndColor");
        }
    }

    renderDraggableTabs(container) {
        container.empty(); // Clear the container first

        // Define labels for tabs
        const tabLabels = {
            scratch: 'ScratchPad',
            notes: 'Notes',
            tasks: 'Tasks',
            assets: 'Assets',
            dashboard: 'Dashboard'
        };

        let draggedItem = null; // To keep track of the item being dragged

        this.plugin.settings.tabOrder.forEach((key, index) => {
            const settingItem = container.createDiv('draggable-item');
            settingItem.draggable = true;
            settingItem.dataset.tabKey = key;

            // Add a drag handle icon
            const handle = settingItem.createDiv('drag-handle');
            setIcon(handle, 'grip-vertical');

            // Add the tab's name
            settingItem.createSpan({ text: tabLabels[key] || key });

            // --- Drag and Drop Event Listeners ---

            settingItem.addEventListener('dragstart', (e) => {
                draggedItem = settingItem;
                setTimeout(() => settingItem.addClass('dragging'), 0);
            });

            settingItem.addEventListener('dragend', (e) => {
                draggedItem?.removeClass('dragging');
                draggedItem = null;
            });

            settingItem.addEventListener('dragover', (e) => {
                e.preventDefault();
                const draggingItem = document.querySelector('.dragging');
                if (draggingItem && draggingItem !== settingItem) {
                    // Get the bounding box of the item we're dragging over
                    const rect = settingItem.getBoundingClientRect();
                    // Check if we are in the top or bottom half of the item
                    const isAfter = e.clientY > rect.top + rect.height / 2;

                    if (isAfter) {
                        // Insert the dragged item after the current one
                        settingItem.parentNode.insertBefore(draggingItem, settingItem.nextSibling);
                    } else {
                        // Insert the dragged item before the current one
                        settingItem.parentNode.insertBefore(draggingItem, settingItem);
                    }
                }
            });

            settingItem.addEventListener('drop', async (e) => {
                e.preventDefault();
                const newOrder = Array.from(container.children).map(child => child.dataset.tabKey);
                this.plugin.settings.tabOrder = newOrder;
                await this.saveAndUpdate();
                new Notice('Tab order saved!');
            });
        });
    }

    renderTabsSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "General Tab Settings" });

        new Setting(containerEl)
            .setName("Desktop tab display style")
            .setDesc("Choose how tab names are displayed in the desktop client.")
            .addDropdown(dropdown => dropdown
                .addOption('text', 'Text Only')
                .addOption('iconAndText', 'Icon and Text')
                .addOption('iconOnly', 'Icon Only')
                .setValue(this.plugin.settings.tabDisplayMode)
                .onChange(async (value) => {
                    this.plugin.settings.tabDisplayMode = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Mobile tab display style")
            .setDesc("Choose a different, often more compact, display style for smaller mobile / tablet screens.")
            .addDropdown(dropdown => dropdown
                .addOption('text', 'Text Only')
                .addOption('iconAndText', 'Icon and Text')
                .addOption('iconOnly', 'Icon Only')
                .setValue(this.plugin.settings.mobileTabDisplayMode)
                .onChange(async (value) => {
                    this.plugin.settings.mobileTabDisplayMode = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl).setName("Tab title font size").setDesc("Font size for the tab titles (ScratchPad, Notes, Tasks). Default is 15px.").addText(text => text.setValue(this.plugin.settings.tabTitleFontSize).onChange(async value => { this.plugin.settings.tabTitleFontSize = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Bold tab titles").setDesc("Toggles bold font weight for the tab titles.").addToggle(toggle => toggle.setValue(this.plugin.settings.tabTitleBold).onChange(async value => { this.plugin.settings.tabTitleBold = value; await this.saveAndUpdate(); }));

        this.createRgbaColorSetting(containerEl, "Active Tab Indicator", "Underline color for the active tab.", "selectedTabColor");

        containerEl.createDiv('setting-spacer');

        new Setting(containerEl)
            .setName('Tab Order')
            .setDesc('Drag and drop the tabs to set their display order.');

        // Create a container for our draggable list
        const tabOrderContainer = containerEl.createDiv('tab-order-container');
        this.renderDraggableTabs(tabOrderContainer);

        containerEl.createDiv('setting-spacer');

        new Setting(containerEl).setName("Tab Visibility").setHeading();

        new Setting(containerEl)
            .setName("Show Tasks tab")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.tabVisibility.tasks)
                .onChange(async (value) => {
                    this.plugin.settings.tabVisibility.tasks = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Show ScratchPad tab")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.tabVisibility.scratch)
                .onChange(async (value) => {
                    this.plugin.settings.tabVisibility.scratch = value;
                    await this.saveAndUpdate();
                }));
        new Setting(containerEl)
            .setName("Show Notes tab")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.tabVisibility.notes)
                .onChange(async (value) => {
                    this.plugin.settings.tabVisibility.notes = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Show Assets tab")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.tabVisibility.assets)
                .onChange(async (value) => {
                    this.plugin.settings.tabVisibility.assets = value;
                    await this.saveAndUpdate();
                }));
        new Setting(containerEl)
            .setName('Show Dashboard tab')
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.tabVisibility.dashboard)
                .onChange(async (value) => {
                    this.plugin.settings.tabVisibility.dashboard = value;
                    await this.saveAndUpdate();
                }));

    }

    renderScratchpadSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "ScratchPad Tab Settings" });
        new Setting(containerEl).setName("Functionality").setHeading();
        new Setting(containerEl).setName("ScratchPad tab click action").setDesc("What to do when the ScratchPad tab is clicked while it's already active.").addDropdown(dropdown => dropdown.addOption('new-tab', 'Open in a new tab').addOption('current-tab', 'Open in the current tab').setValue(this.plugin.settings.scratchpadOpenAction).onChange(async (value) => { this.plugin.settings.scratchpadOpenAction = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("ScratchPad note path").setDesc("The full path to the note that the ScratchPad tab will read from and write to.").addText(text => { this.createPathSuggester(text.inputEl, (q) => this.app.vault.getMarkdownFiles().filter(f => !q || f.path.toLowerCase().includes(q)).map(f => f.path)); text.setValue(this.plugin.settings.fixedNoteFile).onChange(async value => { this.plugin.settings.fixedNoteFile = value; await this.saveAndUpdate(); }); });
        new Setting(containerEl).setName("Show preview/edit button").setDesc("Show the button to toggle between plain text editing and a rendered Markdown preview.").addToggle(toggle => toggle.setValue(this.plugin.settings.scratchpad?.showPreviewToggle ?? false).onChange(async (value) => { if (!this.plugin.settings.scratchpad) this.plugin.settings.scratchpad = {}; this.plugin.settings.scratchpad.showPreviewToggle = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Show '+ Task' button").setDesc("Show the button in the scratchpad area to quickly add a new task.").addToggle(toggle => toggle.setValue(this.plugin.settings.scratchpad?.showAddTaskButton ?? true).onChange(async (value) => { if (!this.plugin.settings.scratchpad) this.plugin.settings.scratchpad = {}; this.plugin.settings.scratchpad.showAddTaskButton = value; await this.saveAndUpdate(); }));

        const taskTitleSetting = new Setting(containerEl).setName("Task Creation Format");
        taskTitleSetting.descEl.innerHTML = `
                Use the following to insert as placeholders for the task creation date:
                <br><code>{today}</code>, <code>{tomorrow}</code>
                <br><code>{monday}</code>, <code>{tuesday}</code>, etc. for the next upcoming day.
                <br><code>{date}+7</code> or <code>{date}-3</code> for dates in the future or past.
                <br>
                <br>Use <code>|</code> to set the final cursor position.
            `;

        taskTitleSetting.addText(text => text
            .setPlaceholder("- [ ] ")
            .setValue(this.plugin.settings.scratchpad?.taskFormat || "- [ ] ")
            .onChange(async (value) => {
                if (!this.plugin.settings.scratchpad) {
                    this.plugin.settings.scratchpad = {};
                }
                this.plugin.settings.scratchpad.taskFormat = value;
                await this.saveAndUpdate();
            }));

        new Setting(containerEl).setName("Appearance").setHeading();
        
        new Setting(containerEl)
        .setName('Hide note properties')
        .setDesc('If enabled, the frontmatter properties text (text between ---) at the top of the note will be hidden from the ScratchPad view.')
        .addToggle(toggle => {
            // Ensure the nested object exists to prevent errors
            if (!this.plugin.settings.scratchpad) {
                this.plugin.settings.scratchpad = {};
            }
            toggle
                .setValue(this.plugin.settings.scratchpad.hideFrontmatter ?? false)
                .onChange(async (value) => {
                    this.plugin.settings.scratchpad.hideFrontmatter = value;
                    // This helper saves settings and refreshes any open plugin views
                    await this.saveAndUpdate();
                });
        });

        new Setting(containerEl).setName("ScratchPad font size").setDesc("Font size for the text inside the ScratchPad editor. Default is 14px.").addText(text => text.setValue(this.plugin.settings.scratchFontSize).onChange(async value => { this.plugin.settings.scratchFontSize = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Bold ScratchPad text").setDesc("Toggles bold font weight for the text in the ScratchPad.").addToggle(toggle => toggle.setValue(this.plugin.settings.scratchBold).onChange(async value => { this.plugin.settings.scratchBold = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("ScratchPad font family").setDesc("Examples: monospace, Arial, 'Courier New'. Leave blank to use the editor default.").addText(text => text.setValue(this.plugin.settings.scratchFontFamily).onChange(async (value) => { this.plugin.settings.scratchFontFamily = value; await this.saveAndUpdate(); }));
        this.createRgbaColorSetting(containerEl, "Search highlight color", "The background color for the selected search result in the ScratchPad.", "scratchpadHighlightColor");

    }

    renderNotesSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Notes Tab Settings" });
        new Setting(containerEl).setName("Functionality").setHeading();
        new Setting(containerEl).setName("Notes tab open behavior").setDesc("Choose how to open notes when clicked from the notes list. NOTE: Holding the shift key and clicking a note will always open it in a new tab.").addDropdown(dropdown => dropdown.addOption('new-tab', 'Open in a new tab').addOption('current-tab', 'Open in the current tab').setValue(this.plugin.settings.notesOpenAction).onChange(async (value) => { this.plugin.settings.notesOpenAction = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Notes lookback days").setDesc("How many days back the Notes tab should look for created or modified notes. Default is 120.").addText(text => text.setValue(String(this.plugin.settings.notesLookbackDays)).onChange(async value => { this.plugin.settings.notesLookbackDays = Number(value) || 7; await this.saveAndUpdate(); }));

        new Setting(containerEl).setName("Appearance").setHeading();
        new Setting(containerEl).setName("Show note status dots").setDesc("Show a colored dot next to each note, indicating if it was recently created or modified.").addToggle(toggle => toggle.setValue(this.plugin.settings.showNoteStatusDots).onChange(async value => { this.plugin.settings.showNoteStatusDots = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Show note tooltips").setDesc("Show a detailed tooltip on hover, containing note path, dates, size, and tags.").addToggle(toggle => toggle.setValue(this.plugin.settings.showNoteTooltips).onChange(async value => { this.plugin.settings.showNoteTooltips = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Notes list font size").setDesc("Font size for note titles in the list. Default is 14px.").addText(text => text.setValue(this.plugin.settings.notesFontSize).onChange(async value => { this.plugin.settings.notesFontSize = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Bold note titles").setDesc("Toggles bold font weight for note titles in the list.").addToggle(toggle => toggle.setValue(this.plugin.settings.notesBold).onChange(async value => { this.plugin.settings.notesBold = value; await this.saveAndUpdate(); }));
        this.createRgbaColorSetting(containerEl, "Note/Task Hover Color", "Background color when hovering a note or task in a list.", "notesHoverColor");
        this.createIgnoredFolderList(containerEl, "Ignore folders in Notes tab", "Files in these folders will not appear in the 'Notes' list.", 'ignoreFolders');

    }

    renderPinnedNotesSettings() {
        const containerEl = this.contentEl; // All settings will be rendered into this element
        containerEl.createEl('h1', { text: 'Pinned Notes Settings' });
        new Setting(containerEl).setName('Functionality').setHeading();
        new Setting(containerEl)
            .setName("Pinned notes tag")
            .setDesc("The tag to use for pinned notes, enter in the text box without the '#'. For notes to appear in the pinned tab, (accessed with another click on the notes tab icon once it has focus), and if you set 'pin' as the tag name, then in your notes add #pin in the body or properties tag section. Default is 'pin'.")
            .addText(text => text
                .setValue(this.plugin.settings.pinTag)
                .onChange(async (value) => {
                    this.plugin.settings.pinTag = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl).setName('Sort Order').setHeading();
        new Setting(containerEl)
            .setName('Default sort order')
            .setDesc("Choose the default sort order for pinned notes when the plugin is loaded. To change the order click on the PINNED NOTES title in the main view.")
            .addDropdown(dropdown => dropdown
                .addOption('a-z', 'A-Z (Default)')
                .addOption('z-a', 'Z-A')
                .addOption('custom', 'Custom Order')
                .setValue(this.plugin.settings.pinnedNotesSortOrder)
                .onChange(async (value) => {
                    this.plugin.settings.pinnedNotesSortOrder = value;
                    await this.plugin.saveSettings();
                }));

        const isMac = Platform.isMacOS;
        const modifierKey = isMac ? 'Option (⌥)' : 'Ctrl';

        new Setting(containerEl)
            .setName('How to change the sort order in the main view')
            .setDesc(`Click the "PINNED NOTES" header in the main view to cycle between A-Z, Z-A, and Custom sort orders.\n\nWhen in Custom order, hold ${modifierKey} and drag notes to reorder them.`);

        new Setting(containerEl)
            .setName('Set Custom Order')
            .setDesc('Drag and drop the notes below to set your preferred manual order.');

        const draggableContainer = containerEl.createDiv('pinned-notes-order-container');
        this.renderDraggablePinnedNotes(draggableContainer);
    }

    renderAssetsSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Assets Tab Settings" });
        new Setting(containerEl)
            .setName("Asset open behavior")
            .setDesc("Choose how to open assets when clicked from the Assets list.")
            .addDropdown(dropdown => dropdown
                .addOption('new-tab', 'Open in a new tab')
                .addOption('current-tab', 'Open in the current tab')
                .setValue(this.plugin.settings.assetsOpenAction)
                .onChange(async (value) => {
                    this.plugin.settings.assetsOpenAction = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName('Default assets view')
            .setDesc('Choose the default layout for the assets tab.')
            .addDropdown(dropdown => dropdown
                .addOption('list', 'List')
                .addOption('grid', 'Grid')
                .setValue(this.plugin.settings.assetsDefaultView)
                .onChange(async (value) => {
                    this.plugin.settings.assetsDefaultView = value;
                    await this.plugin.saveSettings();
                }));

        new Setting(containerEl)
            .setName("Assets lookback days")
            .setDesc("How many days back the Assets tab should look for created or modified notes. Default is 120.")
            .addText(text => text
                .setValue(String(this.plugin.settings.assetsLookbackDays))
                .onChange(async value => {
                    this.plugin.settings.assetsLookbackDays = Number(value) || 7;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Hidden asset file types")
            .setDesc("A comma-separated list of file extensions to hide from the Assets tab and calendar dots (e.g., jpg,pdf,zip). Default is base,canvas.")
            .addText(text => text
                .setPlaceholder("e.g., jpg,pdf,zip")
                .setValue(this.plugin.settings.hiddenAssetTypes)
                .onChange(async (value) => {
                    this.plugin.settings.hiddenAssetTypes = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl).setName("Show indicator for unused assets").setDesc("An icon will appear next to assets that are not linked or embedded in any note, allowing for easier detection to delete.").addToggle(toggle => toggle.setValue(this.plugin.settings.showUnusedAssetsIndicator).onChange(async (value) => { this.plugin.settings.showUnusedAssetsIndicator = value; await this.saveAndUpdate(); }));

    }

    renderTasksSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Tasks Tab Settings" });
        new Setting(containerEl).setName("Display & Sorting").setHeading();
        new Setting(containerEl).setName("Task group heading font size").setDesc("The font size for the date/tag group headings (e.g., 'Overdue', 'Today'). Default is 13px.").addText(text => text.setValue(this.plugin.settings.taskHeadingFontSize).onChange(async value => { this.plugin.settings.taskHeadingFontSize = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Task text font size").setDesc("The font size for the individual task items in the list. Default is 14px.").addText(text => text.setValue(this.plugin.settings.taskTextFontSize).onChange(async value => { this.plugin.settings.taskTextFontSize = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Truncate long task text").setDesc("If enabled, long tasks will be shortened with '...'. If disabled, they will wrap to multiple lines.").addToggle(toggle => toggle.setValue(this.plugin.settings.taskTextTruncate).onChange(async (value) => { this.plugin.settings.taskTextTruncate = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Show completed tasks for Today").setDesc("If enabled, tasks that you marked as complete today will appear in the lists (regardless of their due date).").addToggle(toggle => toggle.setValue(this.plugin.settings.showCompletedTasksToday).onChange(async (value) => { this.plugin.settings.showCompletedTasksToday = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Task sort order").setDesc("The default order for tasks within each group.").addDropdown(dropdown => dropdown.addOption('dueDate', 'By Due Date (earliest first)').addOption('a-z', 'A-Z').addOption('z-a', 'Z-A').setValue(this.plugin.settings.taskSortOrder).onChange(async (value) => { this.plugin.settings.taskSortOrder = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Group tasks by").setDesc("Choose how to group tasks in the view. Second-clicking the Tasks tab will also toggle this.").addDropdown(dropdown => dropdown.addOption('date', 'Date (Overdue, Today, etc.)').addOption('tag', 'Tag').setValue(this.plugin.settings.taskGroupBy).onChange(async (value) => { this.plugin.settings.taskGroupBy = value; await this.saveAndUpdate(); this.refreshDisplay(); }));

        if (this.plugin.settings.taskGroupBy === 'date') {
            new Setting(containerEl).setName("Date Groups to Show").setHeading();
            const dateGroups = [{ key: 'overdue', name: 'Overdue' }, { key: 'today', name: 'Today' }, { key: 'tomorrow', name: 'Tomorrow' }, { key: 'next7days', name: 'Next 7 Days' }, { key: 'future', name: 'Future' },];
            dateGroups.forEach(g => { new Setting(containerEl).setName(g.name).addToggle(t => t.setValue(this.plugin.settings.taskDateGroupsToShow.includes(g.key)).onChange(async v => { const groups = this.plugin.settings.taskDateGroupsToShow; if (v && !groups.includes(g.key)) groups.push(g.key); else if (!v) this.plugin.settings.taskDateGroupsToShow = groups.filter(i => i !== g.key); await this.saveAndUpdate(); })); });
        }

        new Setting(containerEl).setName("Content & Appearance").setHeading();
        this.createIgnoredFolderList(containerEl, "Exclude folders from Task search", "Tasks in these folders will not appear in the 'Tasks' list.", 'taskIgnoreFolders');

        containerEl.createEl('h2', { text: 'Task Group Icons' });
        containerEl.createEl('p', { text: 'Customize the icon displayed next to each task group header.', cls: 'setting-item-description' });

        const taskGroupIconSettings = [
            { key: 'overdue', name: 'Overdue icon' },
            { key: 'today', name: 'Today icon' },
            { key: 'tomorrow', name: 'Tomorrow icon' },
            { key: 'next7days', name: 'Next 7 Days icon' },
            { key: 'future', name: 'Future icon' },
            { key: 'noDate', name: 'No Due Date icon' },
            { key: 'tag', name: 'Tag Group icon' }
        ];

        // Loop through the settings to create each input field and its reset button
        taskGroupIconSettings.forEach(s => {
            let textComponent; // This will hold a reference to the text input

            new Setting(containerEl)
                .setName(s.name)
                .setDesc('Enter any Lucide icon name.')
                .addText(text => {
                    textComponent = text; // Store the reference
                    text
                        .setValue(this.plugin.settings.taskGroupIcons[s.key] || DEFAULT_SETTINGS.taskGroupIcons[s.key])
                        .onChange(async (value) => {
                            this.plugin.settings.taskGroupIcons[s.key] = value.trim();
                            await this.saveAndUpdate();
                        });
                })
                .addExtraButton(button => {
                    button
                        .setIcon('rotate-ccw')
                        .setTooltip('Reset to default')
                        .onClick(async () => {
                            const defaultValue = this.currentThemeDefaults.tabIcons[s.key];
                            this.plugin.settings.taskGroupIcons[s.key] = defaultValue;
                            if (textComponent) {
                                textComponent.setValue(defaultValue);
                            }

                            await this.saveAndUpdate();
                            new Notice(`'${s.name}' reset to default.`);
                        });
                });
        });

        new Setting(containerEl)
            .addButton(button => button
                .setButtonText('Reset All Task Group Icons')
                .setTooltip('Resets all task group icons to their original values')
                .onClick(async () => {
                    if (confirm('Are you sure you want to reset all task group icons?')) {
                        this.plugin.settings.taskGroupIcons = { ...DEFAULT_SETTINGS.taskGroupIcons };
                        await this.saveAndUpdate();
                        new Notice('All task group icons have been reset.');
                        this.refreshDisplay();
                    }
                }));

        new Setting(containerEl).setName("Task Group Backgrounds").setHeading();
        this.createRgbaColorSetting(containerEl, "Overdue", "Background color for the 'Overdue' task group.", "taskGroupColorOverdue");
        this.createRgbaColorSetting(containerEl, "Today", "Background color for the 'Today' task group.", "taskGroupColorToday");
        this.createRgbaColorSetting(containerEl, "Tomorrow", "Background color for the 'Tomorrow' task group.", "taskGroupColorTomorrow");
        this.createRgbaColorSetting(containerEl, "Next 7 Days", "Background color for the 'Next 7 Days' task group.", "taskGroupColorNext7Days");
        this.createRgbaColorSetting(containerEl, "Future", "Background color for 'Future' task group.", "taskGroupColorFuture");
        this.createRgbaColorSetting(containerEl, "No Due Date", "Background color for the 'No Due Date' task group.", "taskGroupColorNoDate");
        this.createRgbaColorSetting(containerEl, "Tag", "Background color for task groups when grouped by tag.", "taskGroupColorTag");
    }

    /**
     * Renders the entire "Dashboard" settings tab.
     * This is the final, corrected version that handles all events and state properly.
     */
    renderDashboardSettings() {
        const container = this.contentEl;
        container.empty();
        container.createEl('h1', { text: 'Dashboard Tab Settings' });

        this.draggedItem = null;
        this.placeholder = null;

        const handleMouseMove = (e) => {
            if (!this.draggedItem) return;
            const draggableContainer = this.draggedItem.closest('.pm-draggable-widget-list');
            if (!draggableContainer) return;
            const otherItems = Array.from(draggableContainer.children).filter(child => child !== this.draggedItem && child !== this.placeholder);
            let target = null;
            for (const item of otherItems) {
                const rect = item.getBoundingClientRect();
                if (e.clientY > rect.top && e.clientY < rect.bottom) {
                    target = item;
                    break;
                }
            }
            if (target) {
                const rect = target.getBoundingClientRect();
                const isAfter = e.clientY > rect.top + rect.height / 2;
                target.parentNode.insertBefore(this.placeholder, isAfter ? target.nextSibling : target);
            }
        };

        const handleMouseUp = async (e) => {
            if (!this.draggedItem) return;
            if (this.placeholder && this.placeholder.parentNode) {
                this.placeholder.parentNode.insertBefore(this.draggedItem, this.placeholder);
                this.placeholder.remove();
            }
            this.draggedItem.removeClass('dragging');
            const container = this.draggedItem.closest('.pm-draggable-widget-list');
            if (container) {
                const orderKey = container.dataset.orderKey;
                container.dataset.title;
                const newOrder = Array.from(container.children).map(child => child.dataset.widgetKey);
                this.plugin.settings[orderKey] = newOrder;
                await this.saveAndUpdate();
                //new Notice(`${title} order saved.`);
            }
            this.draggedItem = null;
            this.placeholder = null;
        };

        document.addEventListener('mousemove', handleMouseMove);
        document.addEventListener('mouseup', handleMouseUp);
        this.plugin.register(() => {
            document.removeEventListener('mousemove', handleMouseMove);
            document.removeEventListener('mouseup', handleMouseUp);
        });

        new Setting(container)
            .setName('Default Dashboard View')
            .setDesc('Choose which dashboard to show by default.')
            .addDropdown(dropdown => dropdown
                .addOption('tasks', 'Tasks Dashboard')
                .addOption('creation', 'File Creation Dashboard')
                .setValue(this.plugin.settings.defaultDashboardView)
                .onChange(async (value) => {
                    this.plugin.settings.defaultDashboardView = value;
                    //await this.saveAndUpdate();
                    await this.plugin.saveSettings();
                }));


        new Setting(container)
            .setName('Custom Date Formats for Parsing')
            .setDesc('For the "Date from Note Title" heatmap source. Provide a comma-separated list of formats to check for. The plugin will try them in order. E.g., DD-MM-YYYY,YYYY-MM-DD or MM-DD-YYYY, YYYY-MM-DD.')
            .addText(text => text
                .setPlaceholder('YYYY-MM-DD,DD-MM-YYYY')
                .setValue(this.plugin.settings.customDateFormats)
                .onChange(async (value) => {
                    this.plugin.settings.customDateFormats = value;
                    await this.plugin.saveSettings();
                }));

        container.createEl('div', { cls: 'setting-spacer' });
        this.renderWidgetSettings(container, 'Tasks Dashboard Widgets (Order and Toggle Display)', 'tasksDashboardWidgets', 'tasksDashboardOrder', DASHBOARDWIDGETS.tasks);
        container.createEl('div', { cls: 'setting-spacer' });
        
        
        new Setting(container).setName("Task Status Colours").setHeading();

        this.createRgbaColorSetting(
            container,
            "Cancelled",
            "Colour for cancelled tasks in widgets.",
            "taskStatusColorCancelled"
        );

        this.createRgbaColorSetting(
            container,
            "Overdue",
            "Colour for overdue tasks in widgets and heatmaps.",
            "taskStatusColorOverdue"
        );
       
        this.createRgbaColorSetting(
            container,
            "In Progress",
            "Colour for in-progress tasks in widgets.",
            "taskStatusColorInProgress"
        );


        this.createRgbaColorSetting(
            container,
            "Open",
            "Colour for open (to-do) tasks in widgets.",
            "taskStatusColorOpen"
        );

         this.createRgbaColorSetting(
            container,
            "Completed",
            "Colour for completed tasks in widgets and heatmaps.",
            "taskStatusColorCompleted"
        );
        
        container.createEl('div', { cls: 'setting-spacer' });
        
        this.renderWidgetSettings(container, 'Creation Dashboard Widgets (Order and Toggle Display)', 'creationDashboardWidgets', 'creationDashboardOrder', DASHBOARDWIDGETS.creation);
        container.createEl('div', { cls: 'setting-spacer' });
        
        container.createEl('div', { cls: 'setting-spacer' });

        container.createEl('h2', { text: 'Built-in Heatmap Links' });
        container.createEl('p', { text: 'Set a note path to open when clicking the total count on a built-in heatmap widget. Leave empty to disable.', cls: 'setting-item-description' });

        // Get all built-in creation heatmap widgets
        const creationWidgets = DASHBOARDWIDGETS.creation;

        for (const widgetKey in creationWidgets) {
            // Only create settings for widgets that are actually heatmaps
            if (widgetKey.endsWith('heatmap')) {
                new Setting(container)
                    .setName(creationWidgets[widgetKey].name)
                    .addText(text => {
                        this.createPathSuggester(text.inputEl, (query) => {
                            return this.app.vault.getFiles()
                            .filter(f => !query || f.path.toLowerCase().includes(query.toLowerCase()))
                            .map(f => f.path);
                        });
                        text
                            .setPlaceholder('Path/to/your/note.md or file.base / file.canvas')
                            .setValue(this.plugin.settings.heatmapLinkConfig[widgetKey] || '')
                            .onChange(async (value) => {
                                this.plugin.settings.heatmapLinkConfig[widgetKey] = value.trim();
                                await this.plugin.saveSettings();
                            });
                    });
            }
        }


        container.createEl('div', { cls: 'setting-spacer' });

        const customHeatmapsContainer = container.createDiv();

        // --- Create the Collapsible Guide ---
        const guideContainer = container.createDiv({ cls: 'note-group-container' });

        // Check the saved state and apply 'is-collapsed' class if needed
        if (this.plugin.settings.isHeatmapGuideCollapsed) {
            guideContainer.addClass('is-collapsed');
        }

        // 1. Create the clickable header
        const header = guideContainer.createDiv({ cls: 'note-group-header' });
        const headerContent = header.createDiv({ cls: 'note-group-header-content' });
        const collapseIcon = headerContent.createDiv({ cls: 'note-group-collapse-icon' });
        setIcon(collapseIcon, 'chevron-down');
        headerContent.createSpan({ text: "Custom Heatmap Widget Guide" });

        header.addEventListener('click', () => {
            const isNowCollapsed = guideContainer.classList.toggle('is-collapsed');
            this.plugin.settings.isHeatmapGuideCollapsed = isNowCollapsed;
            this.plugin.saveSettings();
        });

        // 2. Create the content wrapper for the guide text
        const helpContentWrapper = guideContainer.createDiv({ cls: 'note-list-wrapper' });
        const helpText = helpContentWrapper.createDiv(); // The actual element for the text
        helpText.setAttr('style', 'user-select: text; font-size: 0.9em; line-height: 1.6; padding: 15px; margin: 0; border-radius: 8px; background-color: var(--background-secondary);');

        helpText.innerHTML = `

<p>Use the Custom Heatmap section to add personalized heatmaps to your <strong>Creation</strong> dashboard. Each heatmap acts as a widget that visually tracks file creation activity based on a set of rules you define.</p>

<h2>Key Features</h2>
<ul>
    <li><strong>Date Range:</strong> Set a custom date range for each heatmap using the <strong>Months Back</strong> and <strong>Months Forward</strong> fields. For example, to see the last 6 months of activity, set "Months Back" to <code>5</code> and "Months Forward" to <code>0</code>.</li>
    <li><strong>Color:</strong> Choose a unique base color for each heatmap. The widget will automatically generate a 4-step gradient to represent activity density.</li>
    <li><strong>Filter Logic:</strong> Combine multiple rules using <strong>AND</strong> (all rules must match) or <strong>OR</strong> (any rule can match) logic for complex filtering.</li>
    <li><strong>Folder Exclusions:</strong> Exclude specific vault folders from a heatmap's results to narrow its focus.</li>
    <li><strong>Debug Mode:</strong> Enable "debug logging" to see a detailed list of all files matched by a heatmap's rules in the developer console, for Mac: Command (⌘) + Option (⌥) + I, for Windows: F12 or Ctrl + Shift + I.</li>
</ul>

<h2>Filter Rule Guide</h2>
<p>Each heatmap is powered by one or more filter rules. A rule consists of a <strong>Type</strong> (e.g., Tag, Filename), an <strong>Operator</strong> (e.g., is, contains), and a <strong>Value</strong>.</p>

<h3>Filter Types &amp; Operators</h3>
<table style="width:100%; border-collapse: collapse;">
    <thead style="text-align: left;">
        <tr>
            <th style="padding: 8px; border-bottom: 1px solid #ddd; width: 20%;">Type</th>
            <th style="padding: 8px; border-bottom: 1px solid #ddd; width: 30%;">Available Operators</th>
            <th style="padding: 8px; border-bottom: 1px solid #ddd;">Description</th>
        </tr>
    </thead>
    <tbody>
        <tr style="vertical-align: top;">
            <td style="padding: 8px; border-bottom: 1px solid #ddd;"><strong>Tag</strong></td>
            <td style="padding: 8px; border-bottom: 1px solid #ddd;"><code>is</code><br><code>is not</code></td>
            <td style="padding: 8px; border-bottom: 1px solid #ddd;">Checks if a file has a specific tag.</td>
        </tr>
        <tr style="vertical-align: top;">
            <td style="padding: 8px; border-bottom: 1px solid #ddd;"><strong>File Path</strong></td>
            <td style="padding: 8px; border-bottom: 1px solid #ddd;"><code>contains</code><br><code>starts with</code><br><code>ends with</code><br><code>equals</code><br><code>matches regex</code></td>
            <td style="padding: 8px; border-bottom: 1px solid #ddd;">Matches against the file's full path (e.g., <code>Journal/2025/My Note.md</code>). Path suggester is available.</td>
        </tr>
        <tr style="vertical-align: top;">
            <td style="padding: 8px; border-bottom: 1px solid #ddd;"><strong>Filename</strong></td>
            <td style="padding: 8px; border-bottom: 1px solid #ddd;"><code>contains</code><br><code>starts with</code><br><code>ends with</code><br><code>equals</code><br><code>matches regex</code></td>
            <td style="padding: 8px; border-bottom: 1px solid #ddd;">Matches against the filename only (e.g., <code>My Note.md</code>).</td>
        </tr>
        <tr style="vertical-align: top;">
            <td style="padding: 8px; border-bottom: 1px solid #ddd;"><strong>File Type</strong></td>
            <td style="padding: 8px; border-bottom: 1px solid #ddd;"><code>is</code><br><code>is not</code></td>
            <td style="padding: 8px; border-bottom: 1px solid #ddd;">Matches the file extension (e.g., <code>pdf</code>, <code>png</code>, <code>md</code>).</td>
        </tr>
    </tbody>
</table>

<h3>Filter Value Examples</h3>

<h4>1. Basic Text Matching</h4>
<ul>
    <li><strong>Tag</strong> <code>is</code> <code>meeting</code>: Matches files tagged with <code>#meeting</code>.</li>
    <li><strong>File Path</strong> <code>starts with</code> <code>Journal/</code>: Matches all files inside the <code>Journal</code> folder.</li>
    <li><strong>File Type</strong> <code>is not</code> <code>md</code>: Matches all files that are not Markdown files.</li>
</ul>

<h4>2. Advanced Matching (Regular Expressions)</h4>
<p>For complex patterns, use the <code>matches regex</code> operator. The value should be in the format <code>/pattern/flags</code> (e.g., <code>i</code> for case-insensitive).</p>
<ul>
    <li><strong>Example (Filename):</strong> Match all daily notes in <code>YYYY-MM-DD</code> format.<br>
    Operator: <code>matches regex</code><br>
    Value: <code>/\\d{4}-\\d{2}-\\d{2}/</code></li>
    <br>
    <li><strong>Example (File Path):</strong> Match files in 'Projects' or 'Areas' top-level folders.<br>
    Operator: <code>matches regex</code><br>
    Value: <code>/^(Projects|Areas)\\//</code></li>
</ul>

        `;

        this.renderCustomHeatmapsSection(customHeatmapsContainer);

    }

    renderFilterRules(heatmap, container) {
        // Clear only the specific container for this heatmap's filters to prevent full re-renders.
        container.empty();

        // Loop over the existing filters for the current heatmap and render a row for each one.
        (heatmap.filters || []).forEach((filter, filterIndex) => {
            const filterRow = container.createDiv({ cls: 'pm-filter-row' });

            new Setting(filterRow)
                .setName(`Rule #${filterIndex + 1}`)
                .addDropdown(dropdown => {
                    dropdown
                        .addOption('tag', 'Tag')
                        .addOption('filename', 'Filename')
                        .addOption('filepath', 'File Path')
                        .addOption('filetype', 'File type')
                        .setValue(filter.type)
                        .onChange(async (value) => {
                            filter.type = value;
                            await this.saveAndUpdate();
                            // Re-render locally to update the UI (e.g., to add/remove the folder suggester).
                            this.renderFilterRules(heatmap, container);
                        });
                })

                .addDropdown(op_dropdown => { // Dropdown for Operator
                    const options = {
                        contains: 'contains',
                        not_contains: 'does not contain',
                        equals: 'equals',
                        not_equals: 'does not equal',
                        starts_with: 'starts with',
                        ends_with: 'ends with',
                        matches_regex: 'matches regex',
                        not_matches_regex: 'does not match regex'
                    };

                    // For 'tag' and 'filetype', only 'equals' and 'not_equals' make sense.
                    if (filter.type === 'tag' || filter.type === 'filetype') {
                        op_dropdown.addOption('equals', 'is');
                        op_dropdown.addOption('not_equals', 'is not');
                    } else {
                        for (const key in options) {
                            op_dropdown.addOption(key, options[key]);
                        }
                    }

                    op_dropdown
                        .setValue(filter.operator || 'contains')
                        .onChange(async (value) => {
                            filter.operator = value;
                            await this.saveAndUpdate();
                        });
                })


                .addText(text => {
                    text
                        .setPlaceholder("Enter value, e.g., #project or Work/*")
                        .setValue(filter.value)
                        .onChange(async (value) => {
                            filter.value = value;
                            if (this.heatmapUpdateTimer) clearTimeout(this.heatmapUpdateTimer);
                            this.heatmapUpdateTimer = setTimeout(async () => {
                                await this.saveAndUpdate();
                            }, 750);
                        });

                    // --- THE CORRECT FIX IS HERE ---
                    // If the current filter type is 'filepath', reuse suggester.
                    if (filter.type === 'filepath') {
                        // Define the function that gets folder suggestions.
                        const getFolders = (query) => this.app.vault.getAllLoadedFiles()
                            .filter(f => f instanceof TFolder && (!query || f.path.toLowerCase().includes(query.toLowerCase())))
                            .map(f => f.path);

                        // Call helper method to attach the suggester.
                        this.createPathSuggester(text.inputEl, getFolders);
                    }
                })
                .addButton(button => {
                    button
                        .setButtonText('-')
                        .setTooltip('Remove rule')
                        .onClick(async () => {
                            heatmap.filters.splice(filterIndex, 1);
                            await this.saveAndUpdate();
                            this.renderFilterRules(heatmap, container);
                        });
                });
        });

        // "Add Filter Rule" button logic remains the same.
        new Setting(container)
            .addButton(button => {
                button
                    .setButtonText('Add Filter Rule')
                    .setCta()
                    .onClick(async () => {
                        if (!heatmap.filters) heatmap.filters = [];
                        heatmap.filters.push({ type: 'tag', operator: 'equals', value: '' });
                        await this.saveAndUpdate();
                        this.renderFilterRules(heatmap, container);
                    });
            });
    }

    renderCustomHeatmapsSection(container) {
        container.empty();

        (this.plugin.settings.customHeatmaps || []).forEach((heatmap, index) => {

            const heatmapBox = container.createDiv({ cls: 'pm-heatmap-config-box' });

            // 1. Keep the existing title and name settings
            const titleEl = heatmapBox.createEl('h2', { text: `Heatmap ${index + 1}: ${heatmap.name}` });

            new Setting(heatmapBox)
                .setName("Name")
                .addText(text => text
                    .setPlaceholder("Enter heatmap name")
                    .setValue(heatmap.name)
                    .onChange(async (value) => {
                        heatmap.name = value;
                        titleEl.setText(`Heatmap ${index + 1}: ${value}`);
                        await this.saveAndUpdate();  // Use the more direct save here
                    }));

            new Setting(heatmapBox)
                .setName('Date Source')
                .setDesc('Choose which date to use for placing files on the heatmap.')
                .addDropdown(dropdown => dropdown
                    .addOption('creationDate', 'File Creation Date')
                    .addOption('dateFromTitle', 'Date from Note Title')
                    .setValue(heatmap.dateSource || 'creationDate') // Default to creationDate
                    .onChange(async (value) => {
                        heatmap.dateSource = value;
                        await this.saveAndUpdate();
                    }));

            new Setting(heatmapBox)
                .setName('Months Back')
                .setDesc('Number of past months to show in the grid (e.g., 11 for the last year).')
                .addText(text => text
                    .setPlaceholder('11')
                    .setValue(heatmap.monthsBack?.toString() ?? '11')
                    .onChange(async (value) => {
                        const num = parseInt(value, 10);
                        if (!isNaN(num) && num >= 0) {
                            heatmap.monthsBack = num;
                            await this.saveAndUpdate();
                        }
                    }));

            new Setting(heatmapBox)
                .setName('Months Forward')
                .setDesc('Number of future months to show in the grid.')
                .addText(text => text
                    .setPlaceholder('0')
                    .setValue(heatmap.monthsForward?.toString() ?? '0')
                    .onChange(async (value) => {
                        const num = parseInt(value, 10);
                        if (!isNaN(num) && num >= 0) {
                            heatmap.monthsForward = num;
                            await this.saveAndUpdate();
                        }
                    }));

            new Setting(heatmapBox)
                .setName('Note Link Path')
                .setDesc('Set a note to open when clicking the total count for this heatmap.')
                .addText(text => {
                    this.createPathSuggester(text.inputEl, (query) => {
                        return this.app.vault.getFiles()
                            .filter(f => !query || f.path.toLowerCase().includes(query.toLowerCase()))
                            .map(f => f.path);
                    });
                    text
                        .setPlaceholder('Path/to/summary/note.md or file.base / file.canvas')
                        .setValue(heatmap.linkPath || '')
                        .onChange(async (value) => {
                            heatmap.linkPath = value.trim();
                            await this.saveAndUpdate();
                        });
                });


            // Add the dropdown for AND/OR logic
            new Setting(heatmapBox)
                .setName('Filter logic')
                .setDesc('Choose how multiple rules are combined.')
                .addDropdown(dropdown => {
                    dropdown
                        .addOption('AND', 'All rules must match (AND)')
                        .addOption('OR', 'Any rule can match (OR)')
                        .setValue(heatmap.logic || 'AND')
                        .onChange(async (value) => {
                            heatmap.logic = value;
                            await this.saveAndUpdate();
                        });
                });

            // Create a container for the dynamic filter rules
            const filtersContainer = heatmapBox.createDiv({ cls: 'pm-filters-container' });
            this.renderFilterRules(heatmap, filtersContainer);



            this.createRgbaColorSetting(heatmapBox, "Heatmap Color", "Set the color for this specific heatmap.", `customHeatmaps.${index}.color`);

            this.createFolderExclusionUI(heatmapBox, heatmap, index);


            new Setting(heatmapBox)
                .setName('Enable debug logging')
                .setDesc('If enabled, the list of files for this heatmap will be printed to the developer console each time the dashboard refreshes. Each file will be listed with details if it was matched. An end summary section "--- Debug for Heatmap: Changes ---" will be outputted for files that were matched. NOTE: debug to be toggled off for normal daily use.')
                .addToggle(toggle => {
                    toggle
                        .setValue(heatmap.debug || false)
                        .onChange(async (value) => {
                            heatmap.debug = value;
                            await this.plugin.saveSettings();
                        });
                });


            new Setting(heatmapBox)
                .addButton(button => button
                    .setButtonText("Delete Heatmap")
                    .setWarning()
                    .onClick(async () => {
                        if (confirm(`Are you sure you want to delete the "${heatmap.name}" heatmap?`)) {
                            this.plugin.settings.customHeatmaps.splice(index, 1);
                            await this.saveAndUpdate();
                            this.renderDashboardSettings();
                        }
                    }));
        });

        // The "Add Custom Heatmap" button now goes inside this section
        new Setting(container)
            .setName("Add new custom heatmap")
            .setDesc("Create a new heatmap widget with custom filtering rules.")
            .addButton(button => button
                .setButtonText("Add Heatmap")
                .setCta()
                .onClick(async () => {
                    // Add the new heatmap to settings
                    this.plugin.settings.customHeatmaps.push({
                        name: 'New Heatmap',
                        color: 'rgba(74, 144, 226, 1.00)',
                        logic: 'AND',
                        filters: [{ type: 'tag', operator: 'equals', value: '' }],
                        debug: false,
                        dateSource: 'creationDate',
                        excludeFolders: [],
                        monthsBack: 11,
                        monthsForward: 0,
                        linkPath: ''
                    });
                    await this.saveAndUpdate();

                    // --- FIX: Re-render ONLY this section ---
                    //this.renderCustomHeatmapsSection(container);
                    this.renderDashboardSettings();
                }));
    }



    // Add this function inside the PeriodSettingsTab class
    createFolderExclusionUI(containerEl, heatmap, heatmapIndex) {
        const exclusionContainer = containerEl.createDiv({ cls: 'pm-folder-exclusion-container' });
        new Setting(exclusionContainer)
            .setName("Excluded Folders")
            .setDesc("Files in these folders will be ignored by this heatmap.");

        // Display the list of currently excluded folders
        const excludedListEl = exclusionContainer.createDiv();
        const renderExcludedList = () => {
            excludedListEl.empty(); // Clear the current list

            if (heatmap.excludeFolders && heatmap.excludeFolders.length > 0) {
                heatmap.excludeFolders.forEach((folder, index) => {
                    new Setting(excludedListEl)
                        .setName(folder)
                        .addButton(button => button
                            .setIcon('trash')
                            .setTooltip('Remove folder')
                            .onClick(async () => {
                                heatmap.excludeFolders.splice(index, 1);
                                await this.saveAndUpdate(); // 
                                renderExcludedList(); // Re-render only this list
                            }));
                });
            } else {
                excludedListEl.createEl('p', { text: 'No folders are currently excluded.', cls: 'setting-item-description' });
            }
        };

        renderExcludedList();

        // Add UI for adding a new folder
        const addSetting = new Setting(exclusionContainer);
        let textInput;
        addSetting.addText(text => {
            textInput = text;

            // This function now correctly accepts a 'query' and filters the results.
            const getFilteredFolders = (query) => {
                const allFolders = this.app.vault.getAllLoadedFiles().filter(f => f instanceof TFolder);

                // If the query is empty, return the full list of folders.
                if (!query) {
                    return allFolders.map(f => f.path);
                }

                const lowerCaseQuery = query.toLowerCase();

                // Otherwise, return only the folders that include the query text.
                return allFolders
                    .filter(folder => folder.path.toLowerCase().includes(lowerCaseQuery))
                    .map(folder => folder.path);
            };

            // Pass the new, correct filtering function to the suggester.
            this.createPathSuggester(text.inputEl, getFilteredFolders);

            text.setPlaceholder('Enter folder path to exclude...');
        }).addButton(button => button
            .setButtonText('Add')
            .setTooltip('Exclude this folder')
            .onClick(async () => {
                const newFolder = textInput.getValue().trim();
                if (!newFolder) return; // Exit if the input is empty

                // Directly reference the heatmap settings that will be modified.
                const heatmapToUpdate = this.plugin.settings.customHeatmaps[heatmapIndex];

                // 1. Defensive Check: If the `excludeFolders` array doesn't exist, create it.
                // This handles heatmaps created before this feature was added.
                if (!heatmapToUpdate.excludeFolders) {
                    heatmapToUpdate.excludeFolders = [];
                }

                // 2. Safe Check: Now that we are certain the array exists, we can safely
                // check if the folder is already in the list.
                if (!heatmapToUpdate.excludeFolders.includes(newFolder)) {
                    heatmapToUpdate.excludeFolders.push(newFolder);
                    await this.saveAndUpdate();

                    renderExcludedList();
                }

            }));
    }

    async renderThemesSettings() {
        const containerEl = this.contentEl;
        containerEl.empty(); // Clear previous content to prevent duplicating event listeners
        containerEl.createEl('h2', { text: 'Theme Management' });

        // Display an indicator if a theme is currently applied
        if (this.plugin.settings.appliedTheme) {
            new Setting(containerEl)
                .setName('Currently Applied Theme: ' + this.plugin.settings.appliedTheme)
                .setDesc(`The appearance settings from the "${this.plugin.settings.appliedTheme}" theme are currently active.`)
                .addButton(button =>
                    button
                        .setButtonText('Clear')
                        .setTooltip('Clear this indicator. This does not change your settings.')
                        .onClick(async () => {
                            this.plugin.settings.appliedTheme = '';
                            await this.plugin.saveSettings();
                            this.display(); // Re-render the entire settings tab
                            new Notice('Applied theme indicator cleared.');
                        })
                )
                .settingEl.addClass('applied-theme-indicator');
        }

        // Find theme files in the plugin's "themes" directory
        const themesFolderPath = this.plugin.manifest.dir + '/Themes';
        const themeFiles = await this.getThemeFiles(themesFolderPath);

        if (!themeFiles) {
            containerEl.createEl('p', { text: 'The Themes folder could not be found in the plugin directory.' });
            return;
        }

        if (themeFiles.length === 0) {
            containerEl.createEl('p', { text: 'No theme files (.json) were found in the Themes folder.' });
            return;
        }

        // Create the main two-column layout
        const mainContainer = containerEl.createDiv({ cls: 'theme-settings-container' });
        const listContainer = mainContainer.createDiv({ cls: 'theme-list-container' });
        this.previewContainer = mainContainer.createDiv({ cls: 'theme-preview-wrapper' });

        listContainer.createEl('h3', { text: 'Available Themes' });

        // Sort the theme files alphabetically before rendering.
        themeFiles.sort((a, b) => a.localeCompare(b));

        // Create a list item for each theme file
        themeFiles.forEach(file => {
            const themeName = file.split('/').pop().replace('.json', '');
            const itemEl = listContainer.createDiv({ text: themeName, cls: 'theme-list-item' });

            if (themeName === this.plugin.settings.appliedTheme) {
                itemEl.classList.add('is-active');
            }

            // Add a click listener to each theme item to render its preview
            itemEl.addEventListener('click', async () => {
                Array.from(listContainer.querySelectorAll('.theme-list-item')).forEach(child => child.classList.remove('is-active'));
                itemEl.classList.add('is-active');
                this.selectedThemeFile = { name: file };

                try {
                    const fileContent = await this.app.vault.adapter.read(file);
                    const themeSettings = JSON.parse(fileContent);
                    this.renderThemePreview(themeSettings, themeName);
                } catch (e) {
                    new Notice(`Error reading theme file: ${themeName}`);
                    console.error('Theme file read error:', e);
                }
            });
        });

        const themeItems = Array.from(listContainer.querySelectorAll('.theme-list-item'));
        let focusedIndex = -1;

        if (themeItems.length > 0) {
            // Determine the initial item to focus on (the active theme, or the first one)
            const initiallyActiveIndex = themeItems.findIndex(item => item.classList.contains('is-active'));
            focusedIndex = (initiallyActiveIndex !== -1) ? initiallyActiveIndex : 0;

            // Set tabindex to manage focus: '0' for the focusable item, '-1' for the rest
            themeItems.forEach((item, index) => {
                item.setAttribute('tabindex', index === focusedIndex ? '0' : '-1');
            });

            themeItems[focusedIndex].focus();

            // Load the initial preview if the pane is empty
            if (!this.previewContainer.hasChildNodes()) {
                themeItems[focusedIndex].click();
            }

            // --- GLOBAL KEYBOARD NAVIGATION ---
            // Attach a single, persistent listener to the settings tab's root container.
            // This captures arrow keys regardless of what specific element has focus.
            this.containerEl.onkeydown = (e) => {
                // Ignore key presses if the user is typing in an input field
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                    return;
                }

                const key = e.key;
                if (!['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(key)) {
                    return;
                }

                e.preventDefault();

                // Handle Up/Down for theme selection
                if (key === 'ArrowUp' || key === 'ArrowDown') {
                    themeItems[focusedIndex].setAttribute('tabindex', '-1');
                    if (key === 'ArrowDown') {
                        focusedIndex = (focusedIndex + 1) % themeItems.length;
                    } else {
                        focusedIndex = (focusedIndex - 1 + themeItems.length) % themeItems.length;
                    }
                    const newItem = themeItems[focusedIndex];
                    newItem.setAttribute('tabindex', '0');
                    newItem.focus();
                    newItem.click(); // Click to load preview instantly

                    // Handle Left/Right for light/dark mode toggle
                } else if (key === 'ArrowLeft' || key === 'ArrowRight') {
                    // Find buttons by their data-mode attribute inside the preview container
                    const lightButton = this.previewContainer.querySelector('button[data-mode="light"]');
                    const darkButton = this.previewContainer.querySelector('button[data-mode="dark"]');

                    if (lightButton && darkButton) {
                        // Click the button that is NOT currently active
                        const targetButton = lightButton.classList.contains('is-active') ? darkButton : lightButton;
                        targetButton.click();
                    }
                }
            };
        } else {
            this.renderInitialPreview();
        }
    }

    async getThemeFiles(themesFolderPath) {
        try {
            if (!await this.app.vault.adapter.exists(themesFolderPath)) return null;
            const list = await this.app.vault.adapter.list(themesFolderPath);
            return list.files.filter(file => file.endsWith('.json'));
        } catch (e) {
            console.error("Error accessing themes folder:", e);
            return null;
        }
    }

    renderInitialPreview() {
        if (!this.previewContainer) return;
        this.previewContainer.empty();
        this.previewContainer.createEl('h3', { text: 'Theme Preview' });
        const placeholder = this.previewContainer.createDiv({ cls: 'theme-preview-placeholder' });
        placeholder.setText('Select a theme to see a preview and apply it.');
    }

    renderThemePreview(settings, fileName) {
        if (!this.previewContainer) return;
        this.previewContainer.empty();

        this.previewContainer.createEl('h3', { text: 'Live Theme Preview' });

        const tabContainer = this.previewContainer.createDiv({ cls: 'theme-preview-tabs' });
        const lightTabBtn = tabContainer.createEl('button', { text: 'Light Mode' });
        lightTabBtn.setAttribute('data-mode', 'light');

        const darkTabBtn = tabContainer.createEl('button', { text: 'Dark Mode' });
        darkTabBtn.setAttribute('data-mode', 'dark');

        const previewContent = this.previewContainer.createDiv();

        const render = (mode) => {
            this.activePreviewMode = mode;
            previewContent.empty();
            previewContent.className = '';
            previewContent.addClass('theme-preview-pane');

            if (mode === 'light') {
                previewContent.style.backgroundColor = settings.backgroundColorLight || '#ffffff';
                previewContent.style.color = settings.textColorLight || '#000000';
            } else {
                previewContent.style.backgroundColor = settings.backgroundColorDark || '#1e1e1e';
                previewContent.style.color = settings.textColorDark || '#dddddd';
            }

            this.createComprehensivePreview(previewContent, settings, mode);
        };

        lightTabBtn.addEventListener('click', () => {
            darkTabBtn.classList.remove('is-active');
            lightTabBtn.classList.add('is-active');
            render('light');
        });

        darkTabBtn.addEventListener('click', () => {
            lightTabBtn.classList.remove('is-active');
            darkTabBtn.classList.add('is-active');
            render('dark');
        });

        // Initialize the preview mode based on app appearance ONLY if it hasn't been set yet.
        if (!this.activePreviewMode) {
            this.activePreviewMode = document.body.classList.contains('theme-dark') ? 'dark' : 'light';
        }

        // Trigger the click on the correct button based on the *stored* preview mode.
        if (this.activePreviewMode === 'dark') {
            darkTabBtn.click();
        } else {
            lightTabBtn.click();
        }

        const initialMode = this.activePreviewMode || (document.body.classList.contains('theme-dark') ? 'dark' : 'light');
        if (initialMode === 'light') {
            lightTabBtn.click();
        } else {
            darkTabBtn.click();
        }

        new Setting(this.previewContainer)
            .setName("Apply this theme")
            .setDesc("This will overwrite your current appearance settings with the previewed values.")
            .addButton(button => {
                button
                    .setButtonText("Apply")
                    .setCta() // Makes the button more prominent, indicating a primary action
                    .onClick(async () => {
                        // 1. Apply the settings from the previewed theme
                        for (const key of Object.keys(settings)) {
                            if (this.plugin.settings.hasOwnProperty(key)) {
                                this.plugin.settings[key] = settings[key];
                            }
                        }

                        // 2. Save the name of the applied theme file
                        if (fileName) {
                            this.plugin.settings.appliedTheme = fileName.replace(/\.json$/, '');
                            //console.log("Applied theme settings:", fileName, settings);
                        }

                        // 3. Save the new settings to disk and update the live styles
                        await this.plugin.saveSettings();
                        this.plugin.updateStyles();

                        // 4. Force the entire settings tab to re-render from scratch
                        this.refreshDisplay();

                        new Notice('Theme applied successfully!');

                        // 5. Force any open calendar views to update with the new theme
                        const leaf = this.app.workspace.getLeavesOfType('calendar-period-week')[0];
                        if (leaf && leaf.view instanceof PeriodMonthView) {
                            await leaf.view.render();
                        }
                    });
            });

    }

    getPreviewColor(themeSettings, key) {
        // 1. Prioritize the color from the loaded theme file
        if (themeSettings && themeSettings[key] !== undefined) {
            return themeSettings[key];
        }
        // 2. Fallback to the live plugin settings if the key is missing in the theme
        if (this.plugin.settings && this.plugin.settings[key] !== undefined) {
            return this.plugin.settings[key];
        }
        // 3. Provide a safe default if the setting is defined nowhere
        // This is a fallback for older themes that might not have all keys
        if (key.toLowerCase().includes('light')) {
            return 'rgba(0, 0, 0, 1)'; // Default to black for light mode
        }
        return 'rgba(255, 255, 255, 1)'; // Default to white for dark mode
    }


    createComprehensivePreview(container, settings, mode) {
        const isLight = mode === 'light';
        container.addClass(`theme-preview-pane-${mode}`);

        // --- Calendar Grid Preview ---
        const calendarGridHeader = container.createEl('div', { cls: 'preview-section-header' });

        // --- Month and Year Title Preview ---
        const monthTitleContainer = calendarGridHeader.createEl('h3');
        monthTitleContainer.style.fontSize = this.getPreviewColor(settings, 'mainMonthYearTitleFontSize', '22px');

        // Create a span for the MONTH part of the title
        const monthSpan = monthTitleContainer.createSpan({
            text: moment(new Date()).format('MMMM')
        });
        monthSpan.style.color = this.getPreviewColor(settings, isLight ? 'monthColorLight' : 'monthColorDark');
        monthSpan.style.fontWeight = this.getPreviewColor(settings, 'mainMonthTitleBold', false) ? 'bold' : 'normal';

        // Create a span for the YEAR part of the title
        const yearSpan = monthTitleContainer.createSpan({
            text: ` ${moment(new Date()).format('YYYY')}` // Note the leading space
        });
        yearSpan.style.color = this.getPreviewColor(settings, isLight ? 'yearColorLight' : 'yearColorDark');
        yearSpan.style.fontWeight = this.getPreviewColor(settings, 'mainYearTitleBold', false) ? 'bold' : 'normal';

        // --- Calendar Grid Preview ---
        const calendarWrapper = container.createDiv({ cls: `preview-section-wrapper ${mode}` });
        calendarWrapper.style.backgroundColor = isLight ? (settings.backgroundColorLight || '#f5f5f5') : (settings.backgroundColorDark || '#2a2a2a');

        const table = calendarWrapper.createEl('table', { cls: 'preview-calendar-grid' });

        // --- Table Header (thead) ---
        const thead = table.createEl('thead');
        const headerRow = thead.createEl('tr');
        const headers = ['CW', 'SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT'];

        headers.forEach(headerText => {
            const th = headerRow.createEl('th', { text: headerText });

            // Always use the standard day header font color for the CW header text
            if (headerText === 'CW') {
                th.style.color = this.getPreviewColor(settings, isLight ? 'dayHeaderFontColorLight' : 'dayHeaderFontColorDark');
            }
            // For the SAT header, check if it should be highlighted
            else if (headerText === 'SAT' && this.getPreviewColor(settings, 'highlightTodayLabels', true) && this.getPreviewColor(settings, 'highlightTodayDayHeader', true)) {
                th.style.color = this.getPreviewColor(settings, isLight ? 'todayCircleColorLight' : 'todayCircleColorDark');
            }
            // For all other headers, use the standard day color
            else {
                th.style.color = this.getPreviewColor(settings, isLight ? 'dayHeaderFontColorLight' : 'dayHeaderFontColorDark');
            }
        });

        // --- Table Body (tbody) ---
        const tbody = table.createEl('tbody');
        const bodyRow = tbody.createEl('tr');

        // --- 1. Define All Dot Colors ---
        const dayDotColors = [
            this.getPreviewColor(settings, 'dailyNoteDotColor', '#4a90e2'),
            this.getPreviewColor(settings, 'noteCreatedColor', '#4caf50'),
            this.getPreviewColor(settings, 'noteModifiedColor', '#ff9800'),
            this.getPreviewColor(settings, 'assetDotColor', '#ff0000'),
            this.getPreviewColor(settings, 'calendarEventDotColor', '#c864c8'),
            this.getPreviewColor(settings, 'taskDotColor', '#80128D')
        ];

        // --- 2. Create the 'CW' cell (This was the missing part) ---
        const cwCell = bodyRow.createEl('td');
        const cwContent = cwCell.createDiv({ cls: 'preview-day-content' });
        const cwNumber = cwContent.createDiv({ text: '42', cls: 'preview-day-number' });

        // Style the week number based on theme settings
        if (this.getPreviewColor(settings, 'highlightTodayLabels', true) && this.getPreviewColor(settings, 'highlightTodayPWLabel', true)) {
            cwNumber.style.color = this.getPreviewColor(settings, isLight ? 'todayCircleColorLight' : 'todayCircleColorDark');
        } else {
            cwNumber.style.color = this.getPreviewColor(settings, isLight ? 'weekNumberFontColorLight' : 'weekNumberFontColorDark');
        }

        // Add the exclusive weekly note dot to the CW column
        if (this.getPreviewColor(settings, 'showWeeklyNoteDot', true)) {
            const weeklyDotsContainer = cwContent.createDiv({ cls: 'preview-dots-container' });
            const weeklyNoteDot = weeklyDotsContainer.createDiv({ cls: 'preview-dot' });
            weeklyNoteDot.style.backgroundColor = this.getPreviewColor(settings, 'weeklyNoteDotColor', '#a073f0');
        }

        // --- 3. Create the Day Cells (Sunday to Saturday) ---
        const dotDistribution = new Map([
            [5, [dayDotColors[1]]],
            [6, dayDotColors],
            [7, [dayDotColors[2]]],
            [8, [dayDotColors[0], dayDotColors[1]]],
            [9, [dayDotColors[1], dayDotColors[2], dayDotColors[3]]],
            [10, [dayDotColors[3], dayDotColors[4]]],
            [11, [dayDotColors[1], dayDotColors[2]]]
        ]);

        for (let i = 5; i <= 11; i++) {
            const td = bodyRow.createEl('td');
            const dayContent = td.createDiv({ cls: 'preview-day-content' });
            const dayNumber = dayContent.createDiv({ text: i.toString(), cls: 'preview-day-number' });

            const dotsToShow = dotDistribution.get(i);
            if (dotsToShow && dotsToShow.length > 0) {
                const dotsContainer = dayContent.createDiv({ cls: 'preview-dots-container' });
                dotsToShow.forEach(color => {
                    const dot = dotsContainer.createDiv({ cls: 'preview-dot' });
                    dot.style.backgroundColor = color;
                });
            }

            if (i === 11) {
                dayNumber.addClass('today');
                dayNumber.style.backgroundColor = this.getPreviewColor(settings, isLight ? 'todayCircleColorLight' : 'todayCircleColorDark');
                dayNumber.style.color = this.getPreviewColor(settings, isLight ? 'todayCircleTextColorLight' : 'todayCircleTextColorDark', '#000000');
            } else {
                dayNumber.style.color = this.getPreviewColor(settings, isLight ? 'dayCellFontColorLight' : 'dayCellFontColorDark');
            }
        }

        const tasksWrapper = container.createDiv({ cls: `preview-section-wrapper ${mode}` });
        tasksWrapper.style.backgroundColor = isLight ? (settings.backgroundColorLight || '#f5f5f5') : (settings.backgroundColorDark || '#2a2a2a');

        const taskGroups = [
            { name: "Overdue", colorKey: "taskGroupColorOverdue", count: 2, icon: "alarm-clock-off" },
            { name: "Today", colorKey: "taskGroupColorToday", count: 3, icon: "target" },
            { name: "Tomorrow", colorKey: "taskGroupColorTomorrow", count: 1, icon: "calendar-days" }, // "Tomorrow" maps to "Next 7 Days" icon
            { name: "Future", colorKey: "taskGroupColorFuture", count: 5, icon: "telescope" },
            { name: "No Date", colorKey: "taskGroupColorNoDate", count: 4, icon: "help-circle" }
        ];


        taskGroups.forEach(group => {
            const taskGroupEl = tasksWrapper.createDiv({ cls: 'preview-task-group' });
            taskGroupEl.style.backgroundColor = this.getPreviewColor(settings, group.colorKey);

            // This wrapper keeps the icon and title together on the left
            const contentWrapper = taskGroupEl.createDiv({ cls: 'preview-task-content-wrapper' });

            // Add the group's main icon (e.g., target, telescope)
            const iconEl = contentWrapper.createDiv({ cls: 'preview-task-icon' });
            setIcon(iconEl, group.icon);

            // The text now becomes "Overdue (2)", "Today (3)", etc.
            contentWrapper.createSpan({
                text: `${group.name} (${group.count})`,
                cls: 'preview-task-title'
            });

            const collapseIconEl = taskGroupEl.createDiv({ cls: 'preview-collapse-icon' });
            setIcon(collapseIconEl, 'chevron-up');

            // Set the text color for all elements inside the group
            const textColor = this.getPreviewColor(settings, isLight ? 'taskGroupTextColorLight' : 'taskGroupTextColorDark');
            contentWrapper.style.color = textColor;
            collapseIconEl.style.color = textColor;
        });


        // --- 3. Create the Dot Color Key ---
        const keyContainer = container.createDiv({ cls: 'preview-dot-key-container' });
        keyContainer.createEl('h5', { text: 'Calendar Grid Dot Color Key' });

        // Create a mapping of the dot colors to their names
        const dotKeyMap = new Map([
            [this.getPreviewColor(settings, 'weeklyNoteDotColor', '#a073f0'), 'Weekly Note'],
            [this.getPreviewColor(settings, 'dailyNoteDotColor', '#4a90e2'), 'Daily Note'],
            [this.getPreviewColor(settings, 'noteCreatedColor', '#4caf50'), 'Created Note'],
            [this.getPreviewColor(settings, 'noteModifiedColor', '#ff9800'), 'Modified Note'],
            [this.getPreviewColor(settings, 'assetDotColor', '#ff0000'), 'Asset'],
            [this.getPreviewColor(settings, 'calendarEventDotColor', '#c864c8'), 'Event'],
            [this.getPreviewColor(settings, 'taskDotColor', '#80128D'), 'Task']
        ]);

        // Loop through the map and create a key item for each dot type
        for (const [color, name] of dotKeyMap.entries()) {
            const keyItem = keyContainer.createDiv({ cls: 'preview-dot-key-item' });
            const keyDot = keyItem.createDiv({ cls: 'preview-dot-key-swatch' });
            keyDot.style.backgroundColor = color;
            keyItem.createSpan({ text: name });
        }
    }

    renderImportExportTab() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Import & Export Settings" });

        // --- EXPORT ---
        new Setting(containerEl)
            .setName("Export Settings")
            .setDesc("Save your plugin settings to a JSON file. Two options: all plugin settings or theme settins only. This is useful for backing up all your settings or sharing your theme configuration with others.")
            .addButton(button => {
                button
                    .setButtonText("Export All Settings")
                    .setIcon("save")
                    .setTooltip("Save all plugin settings to a file")
                    .onClick(() => this.handleExport('all'));

                button.buttonEl.style.cursor = 'pointer';
            })
            .addButton(button => {
                button
                    .setButtonText("Export Theme Only")
                    .setIcon("palette")
                    .setTooltip("Save only colors, fonts, and sizes to a theme file")
                    .onClick(() => this.handleExport('theme'));

                button.buttonEl.style.cursor = 'pointer';
            });

        // --- IMPORT ---
        new Setting(containerEl)
            .setName("Import Settings")
            .setDesc("Load settings from a JSON file. This will overwrite your current settings after confirmation.")
            .addButton(button => {
                button
                    .setButtonText("Import from File")
                    .setIcon("upload")
                    .setTooltip("Load settings from a .json file")
                    .onClick(() => {
                        const fileInput = containerEl.createEl('input', {
                            type: 'file',
                            attr: {
                                accept: '.json',
                                style: 'display: none;'
                            }
                        });

                        fileInput.addEventListener('change', (event) => {
                            const file = event.target.files[0];
                            if (file) {
                                this.handleImport(file);
                            }
                        });

                        fileInput.click();
                    });

                button.buttonEl.style.cursor = 'pointer';
            });
    }

    /**
     * Handles the export functionality.
     * @param {'all' | 'theme'} type The type of export to perform.
     */
    handleExport(type) {
        let settingsToExport;
        let fileName;

        if (type === 'theme') {
            const themeKeys = [
                // General appearance settings
                "fontSize",
                "dayNumberFontSize",
                "navButtonHeight",
                "headerRowBold",
                "pwColumnBold",
                "pwColumnSeparatorColor",

                // Add all the font color settings
                "pwColumnFontColorLight",
                "pwColumnFontColorDark",
                "weekNumberFontColorLight",
                "weekNumberFontColorDark",
                "dayHeaderFontColorLight",
                "dayHeaderFontColorDark",
                "dayCellFontColorLight",
                "dayCellFontColorDark",
                "otherMonthFontColorLight",
                "otherMonthFontColorDark",

                // Add the highlight toggles
                "highlightTodayDayHeader",
                "highlightTodayPWLabel",
                "todayHighlightSize",

                "currentHighlightLabelColorLight",
                "currentHighlightLabelColorDark",

                // Add all the highlight color settings
                "monthColorLight",
                "monthColorDark",
                "yearColorLight",
                "yearColorDark",

                "mainMonthYearTitleFontSize",
                "mainMonthTitleBold",
                "mainYearTitleBold",

                // Other settings
                "tabTitleFontSize",
                "tabTitleBold",
                "selectedTabColor",
                "todayHighlightColorLight",
                "todayHighlightColorDark",
                "notesHoverColor",
                "dailyNoteDotColor",
                "noteCreatedColor",
                "noteModifiedColor",
                "rowHighlightColorLight",
                "rowHighlightColorDark",
                'weekendShadeColorLight',
                'weekendShadeColorDark',
                "dateCellHoverColorLight",
                "dateCellHoverColorDark",
                "assetDotColor",
                "calendarEventDotColor",
                "todayHighlightStyle",
                "todayCircleColorLight",
                "todayCircleColorDark",
                "weeklyNoteDotColor",
                "scratchFontSize",
                "scratchBold",
                "scratchFontFamily",
                "scratchpadHighlightColor",
                "notesFontSize",
                "notesBold",
                "notesLineHeight",
                "showNoteStatusDots",
                "otherNotePopupFontSize",
                "calendarDotSize",
                // Task settings
                "taskIndicatorStyle",
                "taskDotColor",
                "taskBadgeFontSize",
                "taskBadgeColor",
                "taskBadgeFontColor",
                "taskHeatmapStartColor",
                "taskHeatmapMidColor",
                "taskHeatmapEndColor",
                "taskHeadingFontSize",
                "taskTextFontSize",
                "taskGroupColorOverdue",
                "taskGroupColorToday",
                "taskGroupColorTomorrow",
                "taskGroupColorNext7Days",
                "taskGroupColorFuture",
                "taskGroupColorNoDate",
                "taskGroupColorTag",

                //Task Dashboard
                "taskStatusColorOverdue",
                "taskStatusColorInProgress",
                "taskStatusColorOpen",
                "taskStatusColorCompleted",
                "taskStatusColorCancelled"
            ];
            settingsToExport = {};
            for (const key of themeKeys) {
                if (this.plugin.settings.hasOwnProperty(key)) {
                    settingsToExport[key] = this.plugin.settings[key];
                }
            }
            // Add the theme-specific identifier
            settingsToExport.__exportType = "theme";
            fileName = `calendar-period-week-notes-theme.json`;

        } else { // 'all'
            // Create a copy to avoid modifying the live settings object
            settingsToExport = { ...this.plugin.settings };
            // Add the 'all' settings identifier
            settingsToExport.__exportType = "all";
            fileName = `calendar-period-week-notes-settings.json`;
        }

        const data = JSON.stringify(settingsToExport, null, 2);
        const blob = new Blob([data], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = fileName;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);

        new Notice(`${type === 'theme' ? 'Theme' : 'All'} settings exported.`);
    }

    /**
     * Handles the import functionality.
     * @param {File} file The JSON file selected by the user.
     */
    handleImport(file) {
        const reader = new FileReader();
        reader.onload = (event) => {
            try {
                const importedSettings = JSON.parse(event.target.result);
                const exportType = importedSettings.__exportType;

                // Define default/fallback messages
                let title = 'Overwrite Settings?';
                let message = 'This appears to be an older settings file. Are you sure you want to import it? Your current configuration will be overwritten.';
                let confirmText = 'Import';

                // Customize messages based on the export type
                if (exportType === 'theme') {
                    title = 'Import Theme Settings?';
                    message = 'You are about to import a theme file. This will overwrite only your current appearance settings (colors, fonts, etc.).';
                    confirmText = 'Import Theme';
                } else if (exportType === 'all') {
                    title = 'Import All Settings?';
                    message = 'You are about to import a full settings file. This will overwrite your ENTIRE current configuration for this plugin.';
                    confirmText = 'Import All';
                } else {
                    // Basic validation for old files without an identifier
                    if (!importedSettings.hasOwnProperty('fontSize') && !importedSettings.hasOwnProperty('fixedNoteFile')) {
                        new Notice('Error: This does not appear to be a valid settings file.', 5000);
                        return;
                    }
                }

                // Remove the identifier before merging so it's not saved into the plugin's data
                if (exportType) {
                    delete importedSettings.__exportType;
                }

                // Show the confirmation modal with the appropriate message
                new ConfirmationModalWithStyles(this.app,
                    title,
                    message,
                    async () => {
                        this.plugin.settings = Object.assign({}, this.plugin.settings, importedSettings);

                        if (exportType === 'theme') {
                            this.plugin.settings.appliedTheme = file.name.replace(/\.json$/, '');
                        }

                        await this.saveAndUpdate();
                        this.refreshDisplay(); // Re-render the settings tab
                        new Notice('Settings imported successfully!');
                    },
                    confirmText // Use the customized button text
                ).open();

            } catch (e) {
                new Notice('Error: Could not parse the JSON file. Ensure it is not corrupted.', 5000);
                console.error("Failed to parse settings JSON:", e);
            }
        };
        reader.readAsText(file);
    }

    renderAboutTab() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "About Calendar Period Week Notes" });

        containerEl.createEl("p", {
            text: "This plugin provides two comprehensive calendar views together with an integrated panel containing a scratchpad area, notes, tasks, and assets."
        });

        new Setting(containerEl)
            .setName("Support the Developer")
            .setDesc("If you find this plugin useful, please consider supporting its development. It's greatly appreciated!")
            .addButton(button => {
                button
                    .setButtonText("☕ Buy Me a Coffee")
                    .setTooltip("https://buymeacoffee.com/fikte")
                    .onClick(() => {
                        window.open("https://buymeacoffee.com/fikte");
                    });
                button.buttonEl.addClass('mod-cta');
                button.buttonEl.style.backgroundColor = '#FFDD00';
                button.buttonEl.style.color = '#000000';
                button.buttonEl.style.cursor = 'pointer';
            });
    }

    async renderStartHereTab() {
        const containerEl = this.contentEl;
        containerEl.empty();

        // We are setting the HTML directly to bypass the MarkdownRenderer and avoid plugin conflicts.
        containerEl.innerHTML = `
        <h2>🚀 Quick Start: Initial Setup</h2>
        <hr>
        <p>Welcome, to get the most out of this plugin, it's recommended to configure a few key settings to match your workflow.</p>
        <hr>
        <h3>1. Set Up Your Scratchpad Note</h3>
        <p>The <strong>Scratchpad</strong> tab needs to point to a note file in your vault. By default, it looks for <code>ScratchPad.md</code> in your vault's root.</p>
        <ul>
            <li><strong>Go to:</strong> "ScratchPad Tab" → "ScratchPage note path"></li>
            <li><strong>Action:</strong> Set the <strong>ScratchPad note path</strong> to any note you prefer. If it doesn't exist, the plugin will create it for you.</li>
        </ul>
        <hr>
        <h3>2. Configure Your Daily Notes</h3>
        <p>For calendar and list dots and click-to-open features to work, the plugin needs to know where your daily notes are.</p>
        <ul>
            <li><strong>Go to:</strong> "Calendar Functional" → "Daily Notes"</li>
            <li><strong>Action:</strong> Set your <strong>Daily Notes folder</strong> and <strong>Daily note format</strong> to match setup (e.g., YYYY-MM-DD).</li>
        </ul>
        <hr>
        <h3>3. Define Your Task Format</h3>
        <p>For the plugin to recognise your task due dates, they <strong>must</strong> use the <code>📅</code> emoji for due dates. Download the Tasks plugin for improved compatibility. The following examples show the format of tasks to be used:</p>
        <p><strong>Due Dates:</strong></p>
        <pre>- [ ] My task with a due date 📅 2025-10-26</pre>
        <pre>- [ ] Review project notes #work 📅 2025-11-01</code></pre>
        <p><strong>Completion Dates:</strong></p>
        <pre>- [x] My completed task 📅 2025-10-26 ✅ 2025-09-19</pre>
        <p>NOTE: If you do not use this Task format then you can toggle off the Tasks Tab in the "General Tab" → "Tab Visibility" section.</p>
        <hr>
        <h3>4. (Optional) Set Your Period/Week Start Date</h3>
        <p>If you plan to use the custom Period/Week calendar system (e.g., "P7W4"), you should set its starting date. The period/week calendar system, used by some companies for financial year tracking, assumes 13 periods with 4 weeks in each period.</p>
        <ul>
            <li><strong>Go to:</strong> "Calendar Functional" → "Period/Week System"</li>
            <li><strong>Action:</strong> Set the <strong>Start of Period 1 Week 1</strong> to the Sunday date of your choice.</li>
        </ul>
    `;
    }

}

module.exports = PeriodMonthPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL2ljYWwuanMvZGlzdC9pY2FsLmpzIiwic3JjL21haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgQklOQVJZIHZhbHVlIHR5cGUsIHdoaWNoIGNvbnRhaW5zIGV4dHJhIG1ldGhvZHMgZm9yIGVuY29kaW5nIGFuZCBkZWNvZGluZy5cbiAqXG4gKiBAbWVtYmVyb2YgSUNBTFxuICovXG5jbGFzcyBCaW5hcnkge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIGJpbmFyeSB2YWx1ZSBmcm9tIHRoZSBnaXZlbiBzdHJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhU3RyaW5nICAgICAgICBUaGUgYmluYXJ5IHZhbHVlIHN0cmluZ1xuICAgKiBAcmV0dXJuIHtCaW5hcnl9ICAgICAgICAgICAgICAgVGhlIGJpbmFyeSB2YWx1ZSBpbnN0YW5jZVxuICAgKi9cbiAgc3RhdGljIGZyb21TdHJpbmcoYVN0cmluZykge1xuICAgIHJldHVybiBuZXcgQmluYXJ5KGFTdHJpbmcpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5CaW5hcnkgaW5zdGFuY2VcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFWYWx1ZSAgICAgVGhlIGJpbmFyeSBkYXRhIGZvciB0aGlzIHZhbHVlXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhVmFsdWUpIHtcbiAgICB0aGlzLnZhbHVlID0gYVZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSB0eXBlIG5hbWUsIHRvIGJlIHVzZWQgaW4gdGhlIGpDYWwgb2JqZWN0LlxuICAgKiBAZGVmYXVsdCBcImJpbmFyeVwiXG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgaWNhbHR5cGUgPSBcImJpbmFyeVwiO1xuXG4gIC8qKlxuICAgKiBCYXNlNjQgZGVjb2RlIHRoZSBjdXJyZW50IHZhbHVlXG4gICAqXG4gICAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICBUaGUgYmFzZTY0LWRlY29kZWQgdmFsdWVcbiAgICovXG4gIGRlY29kZVZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLl9iNjRfZGVjb2RlKHRoaXMudmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuY29kZXMgdGhlIHBhc3NlZCBwYXJhbWV0ZXIgd2l0aCBiYXNlNjQgYW5kIHNldHMgdGhlIGludGVybmFsXG4gICAqIHZhbHVlIHRvIHRoZSByZXN1bHQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhVmFsdWUgICAgICBUaGUgcmF3IGJpbmFyeSB2YWx1ZSB0byBlbmNvZGVcbiAgICovXG4gIHNldEVuY29kZWRWYWx1ZShhVmFsdWUpIHtcbiAgICB0aGlzLnZhbHVlID0gdGhpcy5fYjY0X2VuY29kZShhVmFsdWUpO1xuICB9XG5cbiAgX2I2NF9lbmNvZGUoZGF0YSkge1xuICAgIC8vIGh0dHA6Ly9rZXZpbi52YW56b25uZXZlbGQubmV0XG4gICAgLy8gKyAgIG9yaWdpbmFsIGJ5OiBUeWxlciBBa2lucyAoaHR0cDovL3J1bWtpbi5jb20pXG4gICAgLy8gKyAgIGltcHJvdmVkIGJ5OiBCYXlyb24gR3VldmFyYVxuICAgIC8vICsgICBpbXByb3ZlZCBieTogVGh1bmRlci5tXG4gICAgLy8gKyAgIGltcHJvdmVkIGJ5OiBLZXZpbiB2YW4gWm9ubmV2ZWxkIChodHRwOi8va2V2aW4udmFuem9ubmV2ZWxkLm5ldClcbiAgICAvLyArICAgYnVnZml4ZWQgYnk6IFBlbGxlbnRlc3F1ZSBNYWxlc3VhZGFcbiAgICAvLyArICAgaW1wcm92ZWQgYnk6IEtldmluIHZhbiBab25uZXZlbGQgKGh0dHA6Ly9rZXZpbi52YW56b25uZXZlbGQubmV0KVxuICAgIC8vICsgICBpbXByb3ZlZCBieTogUmFmYcWCIEt1a2F3c2tpIChodHRwOi8va3VrYXdza2kucGwpXG4gICAgLy8gKiAgICAgZXhhbXBsZSAxOiBiYXNlNjRfZW5jb2RlKCdLZXZpbiB2YW4gWm9ubmV2ZWxkJyk7XG4gICAgLy8gKiAgICAgcmV0dXJucyAxOiAnUzJWMmFXNGdkbUZ1SUZwdmJtNWxkbVZzWkE9PSdcbiAgICAvLyBtb3ppbGxhIGhhcyB0aGlzIG5hdGl2ZVxuICAgIC8vIC0gYnV0IGJyZWFrcyBpbiAyLjAuMC4xMiFcbiAgICAvL2lmICh0eXBlb2YgdGhpcy53aW5kb3dbJ2F0b2InXSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gICAgcmV0dXJuIGF0b2IoZGF0YSk7XG4gICAgLy99XG4gICAgbGV0IGI2NCA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpcIiArXG4gICAgICAgICAgICAgIFwiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XCI7XG4gICAgbGV0IG8xLCBvMiwgbzMsIGgxLCBoMiwgaDMsIGg0LCBiaXRzLCBpID0gMCxcbiAgICAgIGFjID0gMCxcbiAgICAgIGVuYyA9IFwiXCIsXG4gICAgICB0bXBfYXJyID0gW107XG5cbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIGRvIHsgLy8gcGFjayB0aHJlZSBvY3RldHMgaW50byBmb3VyIGhleGV0c1xuICAgICAgbzEgPSBkYXRhLmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgIG8yID0gZGF0YS5jaGFyQ29kZUF0KGkrKyk7XG4gICAgICBvMyA9IGRhdGEuY2hhckNvZGVBdChpKyspO1xuXG4gICAgICBiaXRzID0gbzEgPDwgMTYgfCBvMiA8PCA4IHwgbzM7XG5cbiAgICAgIGgxID0gYml0cyA+PiAxOCAmIDB4M2Y7XG4gICAgICBoMiA9IGJpdHMgPj4gMTIgJiAweDNmO1xuICAgICAgaDMgPSBiaXRzID4+IDYgJiAweDNmO1xuICAgICAgaDQgPSBiaXRzICYgMHgzZjtcblxuICAgICAgLy8gdXNlIGhleGV0cyB0byBpbmRleCBpbnRvIGI2NCwgYW5kIGFwcGVuZCByZXN1bHQgdG8gZW5jb2RlZCBzdHJpbmdcbiAgICAgIHRtcF9hcnJbYWMrK10gPSBiNjQuY2hhckF0KGgxKSArIGI2NC5jaGFyQXQoaDIpICsgYjY0LmNoYXJBdChoMykgKyBiNjQuY2hhckF0KGg0KTtcbiAgICB9IHdoaWxlIChpIDwgZGF0YS5sZW5ndGgpO1xuXG4gICAgZW5jID0gdG1wX2Fyci5qb2luKCcnKTtcblxuICAgIGxldCByID0gZGF0YS5sZW5ndGggJSAzO1xuXG4gICAgcmV0dXJuIChyID8gZW5jLnNsaWNlKDAsIHIgLSAzKSA6IGVuYykgKyAnPT09Jy5zbGljZShyIHx8IDMpO1xuXG4gIH1cblxuICBfYjY0X2RlY29kZShkYXRhKSB7XG4gICAgLy8gaHR0cDovL2tldmluLnZhbnpvbm5ldmVsZC5uZXRcbiAgICAvLyArICAgb3JpZ2luYWwgYnk6IFR5bGVyIEFraW5zIChodHRwOi8vcnVta2luLmNvbSlcbiAgICAvLyArICAgaW1wcm92ZWQgYnk6IFRodW5kZXIubVxuICAgIC8vICsgICAgICBpbnB1dCBieTogQW1hbiBHdXB0YVxuICAgIC8vICsgICBpbXByb3ZlZCBieTogS2V2aW4gdmFuIFpvbm5ldmVsZCAoaHR0cDovL2tldmluLnZhbnpvbm5ldmVsZC5uZXQpXG4gICAgLy8gKyAgIGJ1Z2ZpeGVkIGJ5OiBPbm5vIE1hcnNtYW5cbiAgICAvLyArICAgYnVnZml4ZWQgYnk6IFBlbGxlbnRlc3F1ZSBNYWxlc3VhZGFcbiAgICAvLyArICAgaW1wcm92ZWQgYnk6IEtldmluIHZhbiBab25uZXZlbGQgKGh0dHA6Ly9rZXZpbi52YW56b25uZXZlbGQubmV0KVxuICAgIC8vICsgICAgICBpbnB1dCBieTogQnJldHQgWmFtaXIgKGh0dHA6Ly9icmV0dC16YW1pci5tZSlcbiAgICAvLyArICAgYnVnZml4ZWQgYnk6IEtldmluIHZhbiBab25uZXZlbGQgKGh0dHA6Ly9rZXZpbi52YW56b25uZXZlbGQubmV0KVxuICAgIC8vICogICAgIGV4YW1wbGUgMTogYmFzZTY0X2RlY29kZSgnUzJWMmFXNGdkbUZ1SUZwdmJtNWxkbVZzWkE9PScpO1xuICAgIC8vICogICAgIHJldHVybnMgMTogJ0tldmluIHZhbiBab25uZXZlbGQnXG4gICAgLy8gbW96aWxsYSBoYXMgdGhpcyBuYXRpdmVcbiAgICAvLyAtIGJ1dCBicmVha3MgaW4gMi4wLjAuMTIhXG4gICAgLy9pZiAodHlwZW9mIHRoaXMud2luZG93WydidG9hJ10gPT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vICAgIHJldHVybiBidG9hKGRhdGEpO1xuICAgIC8vfVxuICAgIGxldCBiNjQgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaXCIgK1xuICAgICAgICAgICAgICBcImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVwiO1xuICAgIGxldCBvMSwgbzIsIG8zLCBoMSwgaDIsIGgzLCBoNCwgYml0cywgaSA9IDAsXG4gICAgICBhYyA9IDAsXG4gICAgICBkZWMgPSBcIlwiLFxuICAgICAgdG1wX2FyciA9IFtdO1xuXG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICBkYXRhICs9ICcnO1xuXG4gICAgZG8geyAvLyB1bnBhY2sgZm91ciBoZXhldHMgaW50byB0aHJlZSBvY3RldHMgdXNpbmcgaW5kZXggcG9pbnRzIGluIGI2NFxuICAgICAgaDEgPSBiNjQuaW5kZXhPZihkYXRhLmNoYXJBdChpKyspKTtcbiAgICAgIGgyID0gYjY0LmluZGV4T2YoZGF0YS5jaGFyQXQoaSsrKSk7XG4gICAgICBoMyA9IGI2NC5pbmRleE9mKGRhdGEuY2hhckF0KGkrKykpO1xuICAgICAgaDQgPSBiNjQuaW5kZXhPZihkYXRhLmNoYXJBdChpKyspKTtcblxuICAgICAgYml0cyA9IGgxIDw8IDE4IHwgaDIgPDwgMTIgfCBoMyA8PCA2IHwgaDQ7XG5cbiAgICAgIG8xID0gYml0cyA+PiAxNiAmIDB4ZmY7XG4gICAgICBvMiA9IGJpdHMgPj4gOCAmIDB4ZmY7XG4gICAgICBvMyA9IGJpdHMgJiAweGZmO1xuXG4gICAgICBpZiAoaDMgPT0gNjQpIHtcbiAgICAgICAgdG1wX2FyclthYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUobzEpO1xuICAgICAgfSBlbHNlIGlmIChoNCA9PSA2NCkge1xuICAgICAgICB0bXBfYXJyW2FjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZShvMSwgbzIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG1wX2FyclthYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUobzEsIG8yLCBvMyk7XG4gICAgICB9XG4gICAgfSB3aGlsZSAoaSA8IGRhdGEubGVuZ3RoKTtcblxuICAgIGRlYyA9IHRtcF9hcnIuam9pbignJyk7XG5cbiAgICByZXR1cm4gZGVjO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyB2YWx1ZVxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgfVxufVxuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG5jb25zdCBEVVJBVElPTl9MRVRURVJTID0gLyhbUERXSE1UU117MSwxfSkvO1xuY29uc3QgREFUQV9QUk9QU19UT19DT1BZID0gW1wid2Vla3NcIiwgXCJkYXlzXCIsIFwiaG91cnNcIiwgXCJtaW51dGVzXCIsIFwic2Vjb25kc1wiLCBcImlzTmVnYXRpdmVcIl07XG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBcImR1cmF0aW9uXCIgdmFsdWUgdHlwZSwgd2l0aCB2YXJpb3VzIGNhbGN1bGF0aW9uXG4gKiBhbmQgbWFuaXB1bGF0aW9uIG1ldGhvZHMuXG4gKlxuICogQG1lbWJlcm9mIElDQUxcbiAqL1xuY2xhc3MgRHVyYXRpb24ge1xuICAvKipcbiAgICogUmV0dXJucyBhIG5ldyBJQ0FMLkR1cmF0aW9uIGluc3RhbmNlIGZyb20gdGhlIHBhc3NlZCBzZWNvbmRzIHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gYVNlY29uZHMgICAgICAgVGhlIHNlY29uZHMgdG8gY3JlYXRlIHRoZSBpbnN0YW5jZSBmcm9tXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufSAgICAgICAgICAgICBUaGUgbmV3bHkgY3JlYXRlZCBkdXJhdGlvbiBpbnN0YW5jZVxuICAgKi9cbiAgc3RhdGljIGZyb21TZWNvbmRzKGFTZWNvbmRzKSB7XG4gICAgcmV0dXJuIChuZXcgRHVyYXRpb24oKSkuZnJvbVNlY29uZHMoYVNlY29uZHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gc3RyaW5nIGlzIGFuIGlDYWxlbmRhciBkdXJhdGlvbiB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlICAgICAgVGhlIHJhdyBpY2FsIHZhbHVlXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgICAgIFRydWUsIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBvZiB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiBpY2FsIHR5cGVcbiAgICovXG4gIHN0YXRpYyBpc1ZhbHVlU3RyaW5nKHN0cmluZykge1xuICAgIHJldHVybiAoc3RyaW5nWzBdID09PSAnUCcgfHwgc3RyaW5nWzFdID09PSAnUCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIElDQUwuRHVyYXRpb259IGluc3RhbmNlIGZyb20gdGhlIHBhc3NlZCBzdHJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhU3RyICAgICAgIFRoZSBzdHJpbmcgdG8gcGFyc2VcbiAgICogQHJldHVybiB7RHVyYXRpb259ICAgICAgICAgVGhlIGNyZWF0ZWQgZHVyYXRpb24gaW5zdGFuY2VcbiAgICovXG4gIHN0YXRpYyBmcm9tU3RyaW5nKGFTdHIpIHtcbiAgICBsZXQgcG9zID0gMDtcbiAgICBsZXQgZGljdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgbGV0IGNodW5rcyA9IDA7XG5cbiAgICB3aGlsZSAoKHBvcyA9IGFTdHIuc2VhcmNoKERVUkFUSU9OX0xFVFRFUlMpKSAhPT0gLTEpIHtcbiAgICAgIGxldCB0eXBlID0gYVN0cltwb3NdO1xuICAgICAgbGV0IG51bWVyaWMgPSBhU3RyLnNsaWNlKDAsIE1hdGgubWF4KDAsIHBvcykpO1xuICAgICAgYVN0ciA9IGFTdHIuc2xpY2UocG9zICsgMSk7XG5cbiAgICAgIGNodW5rcyArPSBwYXJzZUR1cmF0aW9uQ2h1bmsodHlwZSwgbnVtZXJpYywgZGljdCk7XG4gICAgfVxuXG4gICAgaWYgKGNodW5rcyA8IDIpIHtcbiAgICAgIC8vIFRoZXJlIG11c3QgYmUgYXQgbGVhc3QgYSBjaHVuayB3aXRoIFwiUFwiIGFuZCBzb21lIHVuaXQgY2h1bmtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ2ludmFsaWQgZHVyYXRpb24gdmFsdWU6IE5vdCBlbm91Z2ggZHVyYXRpb24gY29tcG9uZW50cyBpbiBcIicgKyBhU3RyICsgJ1wiJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IER1cmF0aW9uKGRpY3QpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5EdXJhdGlvbiBpbnN0YW5jZSBmcm9tIHRoZSBnaXZlbiBkYXRhIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGFEYXRhICAgICAgICAgICAgICAgIEFuIG9iamVjdCB3aXRoIG1lbWJlcnMgb2YgdGhlIGR1cmF0aW9uXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYURhdGEud2Vla3MgICAgICAgICBEdXJhdGlvbiBpbiB3ZWVrc1xuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLmRheXMgICAgICAgICAgRHVyYXRpb24gaW4gZGF5c1xuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLmhvdXJzICAgICAgICAgRHVyYXRpb24gaW4gaG91cnNcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBhRGF0YS5taW51dGVzICAgICAgIER1cmF0aW9uIGluIG1pbnV0ZXNcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBhRGF0YS5zZWNvbmRzICAgICAgIER1cmF0aW9uIGluIHNlY29uZHNcbiAgICogQHBhcmFtIHtCb29sZWFuPX0gYURhdGEuaXNOZWdhdGl2ZSAgIElmIHRydWUsIHRoZSBkdXJhdGlvbiBpcyBuZWdhdGl2ZVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn0gICAgICAgICAgICAgICAgICAgVGhlIGNyZWF0ZWFkIGR1cmF0aW9uIGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgZnJvbURhdGEoYURhdGEpIHtcbiAgICByZXR1cm4gbmV3IER1cmF0aW9uKGFEYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuRHVyYXRpb24gaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhICAgICAgICAgICAgICAgICBBbiBvYmplY3Qgd2l0aCBtZW1iZXJzIG9mIHRoZSBkdXJhdGlvblxuICAgKiBAcGFyYW0ge051bWJlcj19IGRhdGEud2Vla3MgICAgICAgICAgRHVyYXRpb24gaW4gd2Vla3NcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBkYXRhLmRheXMgICAgICAgICAgIER1cmF0aW9uIGluIGRheXNcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBkYXRhLmhvdXJzICAgICAgICAgIER1cmF0aW9uIGluIGhvdXJzXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS5taW51dGVzICAgICAgICBEdXJhdGlvbiBpbiBtaW51dGVzXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS5zZWNvbmRzICAgICAgICBEdXJhdGlvbiBpbiBzZWNvbmRzXG4gICAqIEBwYXJhbSB7Qm9vbGVhbj19IGRhdGEuaXNOZWdhdGl2ZSAgICBJZiB0cnVlLCB0aGUgZHVyYXRpb24gaXMgbmVnYXRpdmVcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICB0aGlzLndyYXBwZWRKU09iamVjdCA9IHRoaXM7XG4gICAgdGhpcy5mcm9tRGF0YShkYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgd2Vla3MgaW4gdGhpcyBkdXJhdGlvblxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuICB3ZWVrcyA9IDA7XG5cbiAgLyoqXG4gICAqIFRoZSBkYXlzIGluIHRoaXMgZHVyYXRpb25cbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cbiAgZGF5cyA9IDA7XG5cbiAgLyoqXG4gICAqIFRoZSBkYXlzIGluIHRoaXMgZHVyYXRpb25cbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cbiAgaG91cnMgPSAwO1xuXG4gIC8qKlxuICAgKiBUaGUgbWludXRlcyBpbiB0aGlzIGR1cmF0aW9uXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IDBcbiAgICovXG4gIG1pbnV0ZXMgPSAwO1xuXG4gIC8qKlxuICAgKiBUaGUgc2Vjb25kcyBpbiB0aGlzIGR1cmF0aW9uXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IDBcbiAgICovXG4gIHNlY29uZHMgPSAwO1xuXG4gIC8qKlxuICAgKiBUaGUgc2Vjb25kcyBpbiB0aGlzIGR1cmF0aW9uXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgaXNOZWdhdGl2ZSA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBUaGUgY2xhc3MgaWRlbnRpZmllci5cbiAgICogQGNvbnN0YW50XG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEBkZWZhdWx0IFwiaWNhbGR1cmF0aW9uXCJcbiAgICovXG4gIGljYWxjbGFzcyA9IFwiaWNhbGR1cmF0aW9uXCI7XG5cbiAgLyoqXG4gICAqIFRoZSB0eXBlIG5hbWUsIHRvIGJlIHVzZWQgaW4gdGhlIGpDYWwgb2JqZWN0LlxuICAgKiBAY29uc3RhbnRcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGRlZmF1bHQgXCJkdXJhdGlvblwiXG4gICAqL1xuICBpY2FsdHlwZSA9IFwiZHVyYXRpb25cIjtcblxuICAvKipcbiAgICogUmV0dXJucyBhIGNsb25lIG9mIHRoZSBkdXJhdGlvbiBvYmplY3QuXG4gICAqXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufSAgICAgIFRoZSBjbG9uZWQgb2JqZWN0XG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gRHVyYXRpb24uZnJvbURhdGEodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGR1cmF0aW9uIHZhbHVlIGV4cHJlc3NlZCBhcyBhIG51bWJlciBvZiBzZWNvbmRzLlxuICAgKlxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgICAgIFRoZSBkdXJhdGlvbiB2YWx1ZSBpbiBzZWNvbmRzXG4gICAqL1xuICB0b1NlY29uZHMoKSB7XG4gICAgbGV0IHNlY29uZHMgPSB0aGlzLnNlY29uZHMgKyA2MCAqIHRoaXMubWludXRlcyArIDM2MDAgKiB0aGlzLmhvdXJzICtcbiAgICAgICAgICAgICAgICAgIDg2NDAwICogdGhpcy5kYXlzICsgNyAqIDg2NDAwICogdGhpcy53ZWVrcztcbiAgICByZXR1cm4gKHRoaXMuaXNOZWdhdGl2ZSA/IC1zZWNvbmRzIDogc2Vjb25kcyk7XG4gIH1cblxuICAvKipcbiAgICogUmVhZHMgdGhlIHBhc3NlZCBzZWNvbmRzIHZhbHVlIGludG8gdGhpcyBkdXJhdGlvbiBvYmplY3QuIEFmdGVyd2FyZHMsXG4gICAqIG1lbWJlcnMgbGlrZSB7QGxpbmsgSUNBTC5EdXJhdGlvbiNkYXlzIGRheXN9IGFuZCB7QGxpbmsgSUNBTC5EdXJhdGlvbiN3ZWVrcyB3ZWVrc30gd2lsbCBiZSBzZXQgdXBcbiAgICogYWNjb3JkaW5nbHkuXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBhU2Vjb25kcyAgICAgVGhlIGR1cmF0aW9uIHZhbHVlIGluIHNlY29uZHNcbiAgICogQHJldHVybiB7RHVyYXRpb259ICAgICAgICAgICBSZXR1cm5zIHRoaXMgaW5zdGFuY2VcbiAgICovXG4gIGZyb21TZWNvbmRzKGFTZWNvbmRzKSB7XG4gICAgbGV0IHNlY3MgPSBNYXRoLmFicyhhU2Vjb25kcyk7XG5cbiAgICB0aGlzLmlzTmVnYXRpdmUgPSAoYVNlY29uZHMgPCAwKTtcbiAgICB0aGlzLmRheXMgPSB0cnVuYyhzZWNzIC8gODY0MDApO1xuXG4gICAgLy8gSWYgd2UgaGF2ZSBhIGZsYXQgbnVtYmVyIG9mIHdlZWtzLCB1c2UgdGhlbS5cbiAgICBpZiAodGhpcy5kYXlzICUgNyA9PSAwKSB7XG4gICAgICB0aGlzLndlZWtzID0gdGhpcy5kYXlzIC8gNztcbiAgICAgIHRoaXMuZGF5cyA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMud2Vla3MgPSAwO1xuICAgIH1cblxuICAgIHNlY3MgLT0gKHRoaXMuZGF5cyArIDcgKiB0aGlzLndlZWtzKSAqIDg2NDAwO1xuXG4gICAgdGhpcy5ob3VycyA9IHRydW5jKHNlY3MgLyAzNjAwKTtcbiAgICBzZWNzIC09IHRoaXMuaG91cnMgKiAzNjAwO1xuXG4gICAgdGhpcy5taW51dGVzID0gdHJ1bmMoc2VjcyAvIDYwKTtcbiAgICBzZWNzIC09IHRoaXMubWludXRlcyAqIDYwO1xuXG4gICAgdGhpcy5zZWNvbmRzID0gc2VjcztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIHRoZSBjdXJyZW50IGluc3RhbmNlIHVzaW5nIG1lbWJlcnMgZnJvbSB0aGUgcGFzc2VkIGRhdGEgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYURhdGEgICAgICAgICAgICAgICAgQW4gb2JqZWN0IHdpdGggbWVtYmVycyBvZiB0aGUgZHVyYXRpb25cbiAgICogQHBhcmFtIHtOdW1iZXI9fSBhRGF0YS53ZWVrcyAgICAgICAgIER1cmF0aW9uIGluIHdlZWtzXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYURhdGEuZGF5cyAgICAgICAgICBEdXJhdGlvbiBpbiBkYXlzXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYURhdGEuaG91cnMgICAgICAgICBEdXJhdGlvbiBpbiBob3Vyc1xuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLm1pbnV0ZXMgICAgICAgRHVyYXRpb24gaW4gbWludXRlc1xuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLnNlY29uZHMgICAgICAgRHVyYXRpb24gaW4gc2Vjb25kc1xuICAgKiBAcGFyYW0ge0Jvb2xlYW49fSBhRGF0YS5pc05lZ2F0aXZlICAgSWYgdHJ1ZSwgdGhlIGR1cmF0aW9uIGlzIG5lZ2F0aXZlXG4gICAqL1xuICBmcm9tRGF0YShhRGF0YSkge1xuICAgIGZvciAobGV0IHByb3Agb2YgREFUQV9QUk9QU19UT19DT1BZKSB7XG4gICAgICBpZiAoYURhdGEgJiYgcHJvcCBpbiBhRGF0YSkge1xuICAgICAgICB0aGlzW3Byb3BdID0gYURhdGFbcHJvcF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzW3Byb3BdID0gMDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzZXRzIHRoZSBkdXJhdGlvbiBpbnN0YW5jZSB0byB0aGUgZGVmYXVsdCB2YWx1ZXMsIGkuZS4gUFQwU1xuICAgKi9cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5pc05lZ2F0aXZlID0gZmFsc2U7XG4gICAgdGhpcy53ZWVrcyA9IDA7XG4gICAgdGhpcy5kYXlzID0gMDtcbiAgICB0aGlzLmhvdXJzID0gMDtcbiAgICB0aGlzLm1pbnV0ZXMgPSAwO1xuICAgIHRoaXMuc2Vjb25kcyA9IDA7XG4gIH1cblxuICAvKipcbiAgICogQ29tcGFyZXMgdGhlIGR1cmF0aW9uIGluc3RhbmNlIHdpdGggYW5vdGhlciBvbmUuXG4gICAqXG4gICAqIEBwYXJhbSB7RHVyYXRpb259IGFPdGhlciAgICAgICAgICAgICBUaGUgaW5zdGFuY2UgdG8gY29tcGFyZSB3aXRoXG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAgICAgICAgICAtMSwgMCBvciAxIGZvciBsZXNzL2VxdWFsL2dyZWF0ZXJcbiAgICovXG4gIGNvbXBhcmUoYU90aGVyKSB7XG4gICAgbGV0IHRoaXNTZWNvbmRzID0gdGhpcy50b1NlY29uZHMoKTtcbiAgICBsZXQgb3RoZXJTZWNvbmRzID0gYU90aGVyLnRvU2Vjb25kcygpO1xuICAgIHJldHVybiAodGhpc1NlY29uZHMgPiBvdGhlclNlY29uZHMpIC0gKHRoaXNTZWNvbmRzIDwgb3RoZXJTZWNvbmRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3JtYWxpemVzIHRoZSBkdXJhdGlvbiBpbnN0YW5jZS4gRm9yIGV4YW1wbGUsIGEgZHVyYXRpb24gd2l0aCBhIHZhbHVlXG4gICAqIG9mIDYxIHNlY29uZHMgd2lsbCBiZSBub3JtYWxpemVkIHRvIDEgbWludXRlIGFuZCAxIHNlY29uZC5cbiAgICovXG4gIG5vcm1hbGl6ZSgpIHtcbiAgICB0aGlzLmZyb21TZWNvbmRzKHRoaXMudG9TZWNvbmRzKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBkdXJhdGlvbi5cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgdG9TdHJpbmcoKSB7XG4gICAgaWYgKHRoaXMudG9TZWNvbmRzKCkgPT0gMCkge1xuICAgICAgcmV0dXJuIFwiUFQwU1wiO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgc3RyID0gXCJcIjtcbiAgICAgIGlmICh0aGlzLmlzTmVnYXRpdmUpIHN0ciArPSBcIi1cIjtcbiAgICAgIHN0ciArPSBcIlBcIjtcbiAgICAgIGxldCBoYXNXZWVrcyA9IGZhbHNlO1xuICAgICAgaWYgKHRoaXMud2Vla3MpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF5cyB8fCB0aGlzLmhvdXJzIHx8IHRoaXMubWludXRlcyB8fCB0aGlzLnNlY29uZHMpIHtcbiAgICAgICAgICBzdHIgKz0gKHRoaXMud2Vla3MgKiA3ICsgdGhpcy5kYXlzKSArIFwiRFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0ciArPSAodGhpcy53ZWVrcyArIFwiV1wiKTtcbiAgICAgICAgICBoYXNXZWVrcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXlzKSB7XG4gICAgICAgIHN0ciArPSAodGhpcy5kYXlzICsgXCJEXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWhhc1dlZWtzKSB7XG4gICAgICAgIGlmICh0aGlzLmhvdXJzIHx8IHRoaXMubWludXRlcyB8fCB0aGlzLnNlY29uZHMpIHtcbiAgICAgICAgICBzdHIgKz0gXCJUXCI7XG4gICAgICAgICAgaWYgKHRoaXMuaG91cnMpIHtcbiAgICAgICAgICAgIHN0ciArPSB0aGlzLmhvdXJzICsgXCJIXCI7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMubWludXRlcykge1xuICAgICAgICAgICAgc3RyICs9IHRoaXMubWludXRlcyArIFwiTVwiO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0aGlzLnNlY29uZHMpIHtcbiAgICAgICAgICAgIHN0ciArPSB0aGlzLnNlY29uZHMgKyBcIlNcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIGlDYWxlbmRhciBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBkdXJhdGlvbi5cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgdG9JQ0FMU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBJbnRlcm5hbCBoZWxwZXIgZnVuY3Rpb24gdG8gaGFuZGxlIGEgY2h1bmsgb2YgYSBkdXJhdGlvbi5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtTdHJpbmd9IGxldHRlciB0eXBlIG9mIGR1cmF0aW9uIGNodW5rXG4gKiBAcGFyYW0ge1N0cmluZ30gbnVtYmVyIG51bWVyaWMgdmFsdWUgb3IgLS8rXG4gKiBAcGFyYW0ge09iamVjdH0gZGljdCB0YXJnZXQgdG8gYXNzaWduIHZhbHVlcyB0b1xuICovXG5mdW5jdGlvbiBwYXJzZUR1cmF0aW9uQ2h1bmsobGV0dGVyLCBudW1iZXIsIG9iamVjdCkge1xuICBsZXQgdHlwZTtcbiAgc3dpdGNoIChsZXR0ZXIpIHtcbiAgICBjYXNlICdQJzpcbiAgICAgIGlmIChudW1iZXIgJiYgbnVtYmVyID09PSAnLScpIHtcbiAgICAgICAgb2JqZWN0LmlzTmVnYXRpdmUgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb2JqZWN0LmlzTmVnYXRpdmUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8vIHBlcmlvZFxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnRCc6XG4gICAgICB0eXBlID0gJ2RheXMnO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnVyc6XG4gICAgICB0eXBlID0gJ3dlZWtzJztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ0gnOlxuICAgICAgdHlwZSA9ICdob3Vycyc7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdNJzpcbiAgICAgIHR5cGUgPSAnbWludXRlcyc7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdTJzpcbiAgICAgIHR5cGUgPSAnc2Vjb25kcyc7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgLy8gTm90IGEgdmFsaWQgY2h1bmtcbiAgICAgIHJldHVybiAwO1xuICB9XG5cbiAgaWYgKHR5cGUpIHtcbiAgICBpZiAoIW51bWJlciAmJiBudW1iZXIgIT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ2ludmFsaWQgZHVyYXRpb24gdmFsdWU6IE1pc3NpbmcgbnVtYmVyIGJlZm9yZSBcIicgKyBsZXR0ZXIgKyAnXCInXG4gICAgICApO1xuICAgIH1cbiAgICBsZXQgbnVtID0gcGFyc2VJbnQobnVtYmVyLCAxMCk7XG4gICAgaWYgKGlzU3RyaWN0bHlOYU4obnVtKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnaW52YWxpZCBkdXJhdGlvbiB2YWx1ZTogSW52YWxpZCBudW1iZXIgXCInICsgbnVtYmVyICsgJ1wiIGJlZm9yZSBcIicgKyBsZXR0ZXIgKyAnXCInXG4gICAgICApO1xuICAgIH1cbiAgICBvYmplY3RbdHlwZV0gPSBudW07XG4gIH1cblxuICByZXR1cm4gMTtcbn1cblxuLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cblxuLyoqXG4gKiBUaGlzIGxldHMgdHlwZXNjcmlwdCByZXNvbHZlIG91ciBjdXN0b20gdHlwZXMgaW4gdGhlXG4gKiBnZW5lcmF0ZWQgZC50cyBmaWxlcyAoanNkb2MgdHlwZWRlZnMgYXJlIGNvbnZlcnRlZCB0byB0eXBlc2NyaXB0IHR5cGVzKS5cbiAqIElnbm9yZSBwcmV2ZW50cyB0aGUgdHlwZWRlZnMgZnJvbSBiZWluZyBkb2N1bWVudGVkIG1vcmUgdGhhbiBvbmNlLlxuICogQGlnbm9yZVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vdHlwZXMuanNcIikuakNhbENvbXBvbmVudH0gakNhbENvbXBvbmVudFxuICogSW1wb3J0cyB0aGUgJ29jY3VycmVuY2VEZXRhaWxzJyB0eXBlIGZyb20gdGhlIFwidHlwZXMuanNcIiBtb2R1bGVcbiAqL1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgXCJwZXJpb2RcIiB2YWx1ZSB0eXBlLCB3aXRoIHZhcmlvdXMgY2FsY3VsYXRpb24gYW5kIG1hbmlwdWxhdGlvbiBtZXRob2RzLlxuICpcbiAqIEBtZW1iZXJvZiBJQ0FMXG4gKi9cbmNsYXNzIFBlcmlvZCB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IHtAbGluayBJQ0FMLlBlcmlvZH0gaW5zdGFuY2UgZnJvbSB0aGUgcGFzc2VkIHN0cmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciAgICAgICAgICAgIFRoZSBzdHJpbmcgdG8gcGFyc2VcbiAgICogQHBhcmFtIHtQcm9wZXJ0eX0gcHJvcCAgICAgICAgIFRoZSBwcm9wZXJ0eSB0aGlzIHBlcmlvZCB3aWxsIGJlIG9uXG4gICAqIEByZXR1cm4ge1BlcmlvZH0gICAgICAgICAgICAgICBUaGUgY3JlYXRlZCBwZXJpb2QgaW5zdGFuY2VcbiAgICovXG4gIHN0YXRpYyBmcm9tU3RyaW5nKHN0ciwgcHJvcCkge1xuICAgIGxldCBwYXJ0cyA9IHN0ci5zcGxpdCgnLycpO1xuXG4gICAgaWYgKHBhcnRzLmxlbmd0aCAhPT0gMikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnSW52YWxpZCBzdHJpbmcgdmFsdWU6IFwiJyArIHN0ciArICdcIiBtdXN0IGNvbnRhaW4gYSBcIi9cIiBjaGFyLidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IG9wdGlvbnMgPSB7XG4gICAgICBzdGFydDogVGltZS5mcm9tRGF0ZVRpbWVTdHJpbmcocGFydHNbMF0sIHByb3ApXG4gICAgfTtcblxuICAgIGxldCBlbmQgPSBwYXJ0c1sxXTtcblxuICAgIGlmIChEdXJhdGlvbi5pc1ZhbHVlU3RyaW5nKGVuZCkpIHtcbiAgICAgIG9wdGlvbnMuZHVyYXRpb24gPSBEdXJhdGlvbi5mcm9tU3RyaW5nKGVuZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wdGlvbnMuZW5kID0gVGltZS5mcm9tRGF0ZVRpbWVTdHJpbmcoZW5kLCBwcm9wKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFBlcmlvZChvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IHtAbGluayBJQ0FMLlBlcmlvZH0gaW5zdGFuY2UgZnJvbSB0aGUgZ2l2ZW4gZGF0YSBvYmplY3QuXG4gICAqIFRoZSBwYXNzZWQgZGF0YSBvYmplY3QgY2Fubm90IGNvbnRhaW4gYm90aCBhbmQgZW5kIGRhdGUgYW5kIGEgZHVyYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhRGF0YSAgICAgICAgICAgICAgICAgIEFuIG9iamVjdCB3aXRoIG1lbWJlcnMgb2YgdGhlIHBlcmlvZFxuICAgKiBAcGFyYW0ge1RpbWU9fSBhRGF0YS5zdGFydCAgICAgICAgICAgICBUaGUgc3RhcnQgb2YgdGhlIHBlcmlvZFxuICAgKiBAcGFyYW0ge1RpbWU9fSBhRGF0YS5lbmQgICAgICAgICAgICAgICBUaGUgZW5kIG9mIHRoZSBwZXJpb2RcbiAgICogQHBhcmFtIHtEdXJhdGlvbj19IGFEYXRhLmR1cmF0aW9uICAgICAgVGhlIGR1cmF0aW9uIG9mIHRoZSBwZXJpb2RcbiAgICogQHJldHVybiB7UGVyaW9kfSAgICAgICAgICAgICAgICAgICAgICAgVGhlIHBlcmlvZCBpbnN0YW5jZVxuICAgKi9cbiAgc3RhdGljIGZyb21EYXRhKGFEYXRhKSB7XG4gICAgcmV0dXJuIG5ldyBQZXJpb2QoYURhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgcGVyaW9kIGluc3RhbmNlIGZyb20gdGhlIGdpdmVuIGpDYWwgZGF0YSBhcnJheS4gVGhlIGZpcnN0XG4gICAqIG1lbWJlciBpcyBhbHdheXMgdGhlIHN0YXJ0IGRhdGUgc3RyaW5nLCB0aGUgc2Vjb25kIG1lbWJlciBpcyBlaXRoZXIgYVxuICAgKiBkdXJhdGlvbiBvciBlbmQgZGF0ZSBzdHJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7akNhbENvbXBvbmVudH0gYURhdGEgICAgICAgICAgIFRoZSBqQ2FsIGRhdGEgYXJyYXlcbiAgICogQHBhcmFtIHtQcm9wZXJ0eX0gYVByb3AgICAgICAgICAgICAgICAgVGhlIHByb3BlcnR5IHRoaXMgakNhbCBkYXRhIGlzIG9uXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gYUxlbmllbnQgICAgICAgICAgICAgIElmIHRydWUsIGRhdGEgdmFsdWUgY2FuIGJlIGJvdGggZGF0ZSBhbmQgZGF0ZS10aW1lXG4gICAqIEByZXR1cm4ge1BlcmlvZH0gICAgICAgICAgICAgICAgICAgICAgIFRoZSBwZXJpb2QgaW5zdGFuY2VcbiAgICovXG4gIHN0YXRpYyBmcm9tSlNPTihhRGF0YSwgYVByb3AsIGFMZW5pZW50KSB7XG4gICAgZnVuY3Rpb24gZnJvbURhdGVPckRhdGVUaW1lU3RyaW5nKGFWYWx1ZSwgZGF0ZVByb3ApIHtcbiAgICAgIGlmIChhTGVuaWVudCkge1xuICAgICAgICByZXR1cm4gVGltZS5mcm9tU3RyaW5nKGFWYWx1ZSwgZGF0ZVByb3ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFRpbWUuZnJvbURhdGVUaW1lU3RyaW5nKGFWYWx1ZSwgZGF0ZVByb3ApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChEdXJhdGlvbi5pc1ZhbHVlU3RyaW5nKGFEYXRhWzFdKSkge1xuICAgICAgcmV0dXJuIFBlcmlvZC5mcm9tRGF0YSh7XG4gICAgICAgIHN0YXJ0OiBmcm9tRGF0ZU9yRGF0ZVRpbWVTdHJpbmcoYURhdGFbMF0sIGFQcm9wKSxcbiAgICAgICAgZHVyYXRpb246IER1cmF0aW9uLmZyb21TdHJpbmcoYURhdGFbMV0pXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFBlcmlvZC5mcm9tRGF0YSh7XG4gICAgICAgIHN0YXJ0OiBmcm9tRGF0ZU9yRGF0ZVRpbWVTdHJpbmcoYURhdGFbMF0sIGFQcm9wKSxcbiAgICAgICAgZW5kOiBmcm9tRGF0ZU9yRGF0ZVRpbWVTdHJpbmcoYURhdGFbMV0sIGFQcm9wKVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5QZXJpb2QgaW5zdGFuY2UuIFRoZSBwYXNzZWQgZGF0YSBvYmplY3QgY2Fubm90IGNvbnRhaW4gYm90aCBhbmQgZW5kIGRhdGUgYW5kXG4gICAqIGEgZHVyYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhRGF0YSAgICAgICAgICAgICAgICAgIEFuIG9iamVjdCB3aXRoIG1lbWJlcnMgb2YgdGhlIHBlcmlvZFxuICAgKiBAcGFyYW0ge1RpbWU9fSBhRGF0YS5zdGFydCAgICAgICAgICAgICBUaGUgc3RhcnQgb2YgdGhlIHBlcmlvZFxuICAgKiBAcGFyYW0ge1RpbWU9fSBhRGF0YS5lbmQgICAgICAgICAgICAgICBUaGUgZW5kIG9mIHRoZSBwZXJpb2RcbiAgICogQHBhcmFtIHtEdXJhdGlvbj19IGFEYXRhLmR1cmF0aW9uICAgICAgVGhlIGR1cmF0aW9uIG9mIHRoZSBwZXJpb2RcbiAgICovXG4gIGNvbnN0cnVjdG9yKGFEYXRhKSB7XG4gICAgdGhpcy53cmFwcGVkSlNPYmplY3QgPSB0aGlzO1xuXG4gICAgaWYgKGFEYXRhICYmICdzdGFydCcgaW4gYURhdGEpIHtcbiAgICAgIGlmIChhRGF0YS5zdGFydCAmJiAhKGFEYXRhLnN0YXJ0IGluc3RhbmNlb2YgVGltZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignLnN0YXJ0IG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgSUNBTC5UaW1lJyk7XG4gICAgICB9XG4gICAgICB0aGlzLnN0YXJ0ID0gYURhdGEuc3RhcnQ7XG4gICAgfVxuXG4gICAgaWYgKGFEYXRhICYmIGFEYXRhLmVuZCAmJiBhRGF0YS5kdXJhdGlvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjYW5ub3QgYWNjZXB0IGJvdGggZW5kIGFuZCBkdXJhdGlvbicpO1xuICAgIH1cblxuICAgIGlmIChhRGF0YSAmJiAnZW5kJyBpbiBhRGF0YSkge1xuICAgICAgaWYgKGFEYXRhLmVuZCAmJiAhKGFEYXRhLmVuZCBpbnN0YW5jZW9mIFRpbWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJy5lbmQgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBJQ0FMLlRpbWUnKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZW5kID0gYURhdGEuZW5kO1xuICAgIH1cblxuICAgIGlmIChhRGF0YSAmJiAnZHVyYXRpb24nIGluIGFEYXRhKSB7XG4gICAgICBpZiAoYURhdGEuZHVyYXRpb24gJiYgIShhRGF0YS5kdXJhdGlvbiBpbnN0YW5jZW9mIER1cmF0aW9uKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcuZHVyYXRpb24gbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBJQ0FMLkR1cmF0aW9uJyk7XG4gICAgICB9XG4gICAgICB0aGlzLmR1cmF0aW9uID0gYURhdGEuZHVyYXRpb247XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogVGhlIHN0YXJ0IG9mIHRoZSBwZXJpb2RcbiAgICogQHR5cGUge1RpbWV9XG4gICAqL1xuICBzdGFydCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBlbmQgb2YgdGhlIHBlcmlvZFxuICAgKiBAdHlwZSB7VGltZX1cbiAgICovXG4gIGVuZCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBkdXJhdGlvbiBvZiB0aGUgcGVyaW9kXG4gICAqIEB0eXBlIHtEdXJhdGlvbn1cbiAgICovXG4gIGR1cmF0aW9uID0gbnVsbDtcblxuICAvKipcbiAgICogVGhlIGNsYXNzIGlkZW50aWZpZXIuXG4gICAqIEBjb25zdGFudFxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAZGVmYXVsdCBcImljYWxwZXJpb2RcIlxuICAgKi9cbiAgaWNhbGNsYXNzID0gXCJpY2FscGVyaW9kXCI7XG5cbiAgLyoqXG4gICAqIFRoZSB0eXBlIG5hbWUsIHRvIGJlIHVzZWQgaW4gdGhlIGpDYWwgb2JqZWN0LlxuICAgKiBAY29uc3RhbnRcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGRlZmF1bHQgXCJwZXJpb2RcIlxuICAgKi9cbiAgaWNhbHR5cGUgPSBcInBlcmlvZFwiO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY2xvbmUgb2YgdGhlIGR1cmF0aW9uIG9iamVjdC5cbiAgICpcbiAgICogQHJldHVybiB7UGVyaW9kfSAgICAgIFRoZSBjbG9uZWQgb2JqZWN0XG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gUGVyaW9kLmZyb21EYXRhKHtcbiAgICAgIHN0YXJ0OiB0aGlzLnN0YXJ0ID8gdGhpcy5zdGFydC5jbG9uZSgpIDogbnVsbCxcbiAgICAgIGVuZDogdGhpcy5lbmQgPyB0aGlzLmVuZC5jbG9uZSgpIDogbnVsbCxcbiAgICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uID8gdGhpcy5kdXJhdGlvbi5jbG9uZSgpIDogbnVsbFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgdGhlIGR1cmF0aW9uIG9mIHRoZSBwZXJpb2QsIGVpdGhlciBkaXJlY3RseSBvciBieSBzdWJ0cmFjdGluZ1xuICAgKiBzdGFydCBmcm9tIGVuZCBkYXRlLlxuICAgKlxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn0gICAgICBUaGUgY2FsY3VsYXRlZCBkdXJhdGlvblxuICAgKi9cbiAgZ2V0RHVyYXRpb24oKSB7XG4gICAgaWYgKHRoaXMuZHVyYXRpb24pIHtcbiAgICAgIHJldHVybiB0aGlzLmR1cmF0aW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5lbmQuc3VidHJhY3REYXRlKHRoaXMuc3RhcnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGVzIHRoZSBlbmQgZGF0ZSBvZiB0aGUgcGVyaW9kLCBlaXRoZXIgZGlyZWN0bHkgb3IgYnkgYWRkaW5nXG4gICAqIGR1cmF0aW9uIHRvIHN0YXJ0IGRhdGUuXG4gICAqXG4gICAqIEByZXR1cm4ge1RpbWV9ICAgICAgICAgIFRoZSBjYWxjdWxhdGVkIGVuZCBkYXRlXG4gICAqL1xuICBnZXRFbmQoKSB7XG4gICAgaWYgKHRoaXMuZW5kKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbmQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBlbmQgPSB0aGlzLnN0YXJ0LmNsb25lKCk7XG4gICAgICBlbmQuYWRkRHVyYXRpb24odGhpcy5kdXJhdGlvbik7XG4gICAgICByZXR1cm4gZW5kO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wYXJlIHRoaXMgcGVyaW9kIHdpdGggYSBkYXRlIG9yIG90aGVyIHBlcmlvZC4gVG8gbWFpbnRhaW4gdGhlIGxvZ2ljIHdoZXJlIGEuY29tcGFyZShiKVxuICAgKiByZXR1cm5zIDEgd2hlbiBhID4gYiwgdGhpcyBmdW5jdGlvbiB3aWxsIHJldHVybiAxIHdoZW4gdGhlIHBlcmlvZCBpcyBhZnRlciB0aGUgZGF0ZSwgMCB3aGVuIHRoZVxuICAgKiBkYXRlIGlzIHdpdGhpbiB0aGUgcGVyaW9kLCBhbmQgLTEgd2hlbiB0aGUgcGVyaW9kIGlzIGJlZm9yZSB0aGUgZGF0ZS4gV2hlbiBjb21wYXJpbmcgdHdvXG4gICAqIHBlcmlvZHMsIGFzIHNvb24gYXMgdGhleSBvdmVybGFwIGluIGFueSB3YXkgdGhpcyB3aWxsIHJldHVybiAwLlxuICAgKlxuICAgKiBAcGFyYW0ge1RpbWV8UGVyaW9kfSBkdCAgICBUaGUgZGF0ZSBvciBvdGhlciBwZXJpb2QgdG8gY29tcGFyZSB3aXRoXG4gICAqL1xuICBjb21wYXJlKGR0KSB7XG4gICAgaWYgKGR0LmNvbXBhcmUodGhpcy5zdGFydCkgPCAwKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGR0LmNvbXBhcmUodGhpcy5nZXRFbmQoKSkgPiAwKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcGVyaW9kLlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5zdGFydCArIFwiL1wiICsgKHRoaXMuZW5kIHx8IHRoaXMuZHVyYXRpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBqQ2FsIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcGVyaW9kIHR5cGUuXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gW3RoaXMuc3RhcnQudG9TdHJpbmcoKSwgKHRoaXMuZW5kIHx8IHRoaXMuZHVyYXRpb24pLnRvU3RyaW5nKCldO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBpQ2FsZW5kYXIgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcGVyaW9kLlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICB0b0lDQUxTdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhcnQudG9JQ0FMU3RyaW5nKCkgKyBcIi9cIiArXG4gICAgICAgICAgICh0aGlzLmVuZCB8fCB0aGlzLmR1cmF0aW9uKS50b0lDQUxTdHJpbmcoKTtcbiAgfVxufVxuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG4vKipcbiAqIFRoaXMgbGV0cyB0eXBlc2NyaXB0IHJlc29sdmUgb3VyIGN1c3RvbSB0eXBlcyBpbiB0aGVcbiAqIGdlbmVyYXRlZCBkLnRzIGZpbGVzIChqc2RvYyB0eXBlZGVmcyBhcmUgY29udmVydGVkIHRvIHR5cGVzY3JpcHQgdHlwZXMpLlxuICogSWdub3JlIHByZXZlbnRzIHRoZSB0eXBlZGVmcyBmcm9tIGJlaW5nIGRvY3VtZW50ZWQgbW9yZSB0aGFuIG9uY2UuXG4gKlxuICogQGlnbm9yZVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vdHlwZXMuanNcIikud2Vla0RheX0gd2Vla0RheVxuICogSW1wb3J0cyB0aGUgJ3dlZWtEYXknIHR5cGUgZnJvbSB0aGUgXCJ0eXBlcy5qc1wiIG1vZHVsZVxuICpcbiAqIEBpZ25vcmVcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL3R5cGVzLmpzXCIpLnRpbWVJbml0fSB0aW1lSW5pdFxuICogSW1wb3J0cyB0aGUgJ3RpbWVJbml0JyB0eXBlIGZyb20gdGhlIFwidHlwZXMuanNcIiBtb2R1bGVcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIGlDYWxlbmRhciBUaW1lIHJlcHJlc2VudGF0aW9uIChzaW1pbGFyIHRvIEpTIERhdGUgb2JqZWN0KS4gIEZ1bGx5XG4gKiBpbmRlcGVuZGVudCBvZiBzeXN0ZW0gKE9TKSB0aW1lem9uZSAvIHRpbWUuICBVbmxpa2UgSlMgRGF0ZSwgdGhlIG1vbnRoXG4gKiBKYW51YXJ5IGlzIDEsIG5vdCB6ZXJvLlxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgdGltZSA9IG5ldyBJQ0FMLlRpbWUoe1xuICogICB5ZWFyOiAyMDEyLFxuICogICBtb250aDogMTAsXG4gKiAgIGRheTogMTFcbiAqICAgbWludXRlOiAwLFxuICogICBzZWNvbmQ6IDAsXG4gKiAgIGlzRGF0ZTogZmFsc2VcbiAqIH0pO1xuICpcbiAqXG4gKiBAbWVtYmVyb2YgSUNBTFxuKi9cbmNsYXNzIFRpbWUge1xuICBzdGF0aWMgX2Rvd0NhY2hlID0ge307XG4gIHN0YXRpYyBfd25DYWNoZSA9IHt9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBkYXlzIGluIHRoZSBnaXZlbiBtb250aFxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gbW9udGggICAgICBUaGUgbW9udGggdG8gY2hlY2tcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHllYXIgICAgICAgVGhlIHllYXIgdG8gY2hlY2tcbiAgICogQHJldHVybiB7TnVtYmVyfSAgICAgICAgICAgVGhlIG51bWJlciBvZiBkYXlzIGluIHRoZSBtb250aFxuICAgKi9cbiAgc3RhdGljIGRheXNJbk1vbnRoKG1vbnRoLCB5ZWFyKSB7XG4gICAgbGV0IF9kYXlzSW5Nb250aCA9IFswLCAzMSwgMjgsIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXTtcbiAgICBsZXQgZGF5cyA9IDMwO1xuXG4gICAgaWYgKG1vbnRoIDwgMSB8fCBtb250aCA+IDEyKSByZXR1cm4gZGF5cztcblxuICAgIGRheXMgPSBfZGF5c0luTW9udGhbbW9udGhdO1xuXG4gICAgaWYgKG1vbnRoID09IDIpIHtcbiAgICAgIGRheXMgKz0gVGltZS5pc0xlYXBZZWFyKHllYXIpO1xuICAgIH1cblxuICAgIHJldHVybiBkYXlzO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgeWVhciBpcyBhIGxlYXAgeWVhclxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0geWVhciAgICAgICBUaGUgeWVhciB0byBjaGVja1xuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgICBUcnVlLCBpZiB0aGUgeWVhciBpcyBhIGxlYXAgeWVhclxuICAgKi9cbiAgc3RhdGljIGlzTGVhcFllYXIoeWVhcikge1xuICAgIGlmICh5ZWFyIDw9IDE3NTIpIHtcbiAgICAgIHJldHVybiAoKHllYXIgJSA0KSA9PSAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICgoKHllYXIgJSA0ID09IDApICYmICh5ZWFyICUgMTAwICE9IDApKSB8fCAoeWVhciAlIDQwMCA9PSAwKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBJQ0FMLlRpbWUgZnJvbSB0aGUgZGF5IG9mIHllYXIgYW5kIHllYXIuIFRoZSBkYXRlIGlzIHJldHVybmVkXG4gICAqIGluIGZsb2F0aW5nIHRpbWV6b25lLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gYURheU9mWWVhciAgICAgVGhlIGRheSBvZiB5ZWFyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBhWWVhciAgICAgICAgICBUaGUgeWVhciB0byBjcmVhdGUgdGhlIGluc3RhbmNlIGluXG4gICAqIEByZXR1cm4ge1RpbWV9ICAgICAgICAgICAgICAgICBUaGUgY3JlYXRlZCBpbnN0YW5jZSB3aXRoIHRoZSBjYWxjdWxhdGVkIGRhdGVcbiAgICovXG4gIHN0YXRpYyBmcm9tRGF5T2ZZZWFyKGFEYXlPZlllYXIsIGFZZWFyKSB7XG4gICAgbGV0IHllYXIgPSBhWWVhcjtcbiAgICBsZXQgZG95ID0gYURheU9mWWVhcjtcbiAgICBsZXQgdHQgPSBuZXcgVGltZSgpO1xuICAgIHR0LmF1dG9fbm9ybWFsaXplID0gZmFsc2U7XG4gICAgbGV0IGlzX2xlYXAgPSAoVGltZS5pc0xlYXBZZWFyKHllYXIpID8gMSA6IDApO1xuXG4gICAgaWYgKGRveSA8IDEpIHtcbiAgICAgIHllYXItLTtcbiAgICAgIGlzX2xlYXAgPSAoVGltZS5pc0xlYXBZZWFyKHllYXIpID8gMSA6IDApO1xuICAgICAgZG95ICs9IFRpbWUuZGF5c0luWWVhclBhc3NlZE1vbnRoW2lzX2xlYXBdWzEyXTtcbiAgICAgIHJldHVybiBUaW1lLmZyb21EYXlPZlllYXIoZG95LCB5ZWFyKTtcbiAgICB9IGVsc2UgaWYgKGRveSA+IFRpbWUuZGF5c0luWWVhclBhc3NlZE1vbnRoW2lzX2xlYXBdWzEyXSkge1xuICAgICAgaXNfbGVhcCA9IChUaW1lLmlzTGVhcFllYXIoeWVhcikgPyAxIDogMCk7XG4gICAgICBkb3kgLT0gVGltZS5kYXlzSW5ZZWFyUGFzc2VkTW9udGhbaXNfbGVhcF1bMTJdO1xuICAgICAgeWVhcisrO1xuICAgICAgcmV0dXJuIFRpbWUuZnJvbURheU9mWWVhcihkb3ksIHllYXIpO1xuICAgIH1cblxuICAgIHR0LnllYXIgPSB5ZWFyO1xuICAgIHR0LmlzRGF0ZSA9IHRydWU7XG5cbiAgICBmb3IgKGxldCBtb250aCA9IDExOyBtb250aCA+PSAwOyBtb250aC0tKSB7XG4gICAgICBpZiAoZG95ID4gVGltZS5kYXlzSW5ZZWFyUGFzc2VkTW9udGhbaXNfbGVhcF1bbW9udGhdKSB7XG4gICAgICAgIHR0Lm1vbnRoID0gbW9udGggKyAxO1xuICAgICAgICB0dC5kYXkgPSBkb3kgLSBUaW1lLmRheXNJblllYXJQYXNzZWRNb250aFtpc19sZWFwXVttb250aF07XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHR0LmF1dG9fbm9ybWFsaXplID0gdHJ1ZTtcbiAgICByZXR1cm4gdHQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIG5ldyBJQ0FMLlRpbWUgaW5zdGFuY2UgZnJvbSBhIGRhdGUgc3RyaW5nLCBlLmcgMjAxNS0wMS0wMi5cbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgICAgICAgICAgICAgICAgVXNlIHtAbGluayBJQ0FMLlRpbWUuZnJvbURhdGVTdHJpbmd9IGluc3RlYWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciAgICAgICAgVGhlIHN0cmluZyB0byBjcmVhdGUgZnJvbVxuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgICAgICAgICBUaGUgZGF0ZS90aW1lIGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgZnJvbVN0cmluZ3YyKHN0cikge1xuICAgIHJldHVybiBuZXcgVGltZSh7XG4gICAgICB5ZWFyOiBwYXJzZUludChzdHIuc2xpY2UoMCwgNCksIDEwKSxcbiAgICAgIG1vbnRoOiBwYXJzZUludChzdHIuc2xpY2UoNSwgNyksIDEwKSxcbiAgICAgIGRheTogcGFyc2VJbnQoc3RyLnNsaWNlKDgsIDEwKSwgMTApLFxuICAgICAgaXNEYXRlOiB0cnVlXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIG5ldyBJQ0FMLlRpbWUgaW5zdGFuY2UgZnJvbSBhIGRhdGUgc3RyaW5nLCBlLmcgMjAxNS0wMS0wMi5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFWYWx1ZSAgICAgVGhlIHN0cmluZyB0byBjcmVhdGUgZnJvbVxuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgICAgICAgICBUaGUgZGF0ZS90aW1lIGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgZnJvbURhdGVTdHJpbmcoYVZhbHVlKSB7XG4gICAgLy8gRGF0ZXMgc2hvdWxkIGhhdmUgbm8gdGltZXpvbmUuXG4gICAgLy8gR29vZ2xlIGxpa2VzIHRvIHNvbWV0aW1lcyBzcGVjaWZ5IFogb24gZGF0ZXNcbiAgICAvLyB3ZSBzcGVjaWZpY2FsbHkgaWdub3JlIHRoYXQgdG8gYXZvaWQgaXNzdWVzLlxuXG4gICAgLy8gWVlZWS1NTS1ERFxuICAgIC8vIDIwMTItMTAtMTBcbiAgICByZXR1cm4gbmV3IFRpbWUoe1xuICAgICAgeWVhcjogc3RyaWN0UGFyc2VJbnQoYVZhbHVlLnNsaWNlKDAsIDQpKSxcbiAgICAgIG1vbnRoOiBzdHJpY3RQYXJzZUludChhVmFsdWUuc2xpY2UoNSwgNykpLFxuICAgICAgZGF5OiBzdHJpY3RQYXJzZUludChhVmFsdWUuc2xpY2UoOCwgMTApKSxcbiAgICAgIGlzRGF0ZTogdHJ1ZVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgSUNBTC5UaW1lIGluc3RhbmNlIGZyb20gYSBkYXRlLXRpbWUgc3RyaW5nLCBlLmdcbiAgICogMjAxNS0wMS0wMlQwMzowNDowNS4gSWYgYSBwcm9wZXJ0eSBpcyBzcGVjaWZpZWQsIHRoZSB0aW1lem9uZSBpcyBzZXQgdXBcbiAgICogZnJvbSB0aGUgcHJvcGVydHkncyBUWklEIHBhcmFtZXRlci5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFWYWx1ZSAgICAgICAgIFRoZSBzdHJpbmcgdG8gY3JlYXRlIGZyb21cbiAgICogQHBhcmFtIHtQcm9wZXJ0eT19IHByb3AgICAgICAgIFRoZSBwcm9wZXJ0eSB0aGUgZGF0ZSBiZWxvbmdzIHRvXG4gICAqIEByZXR1cm4ge1RpbWV9ICAgICAgICAgICAgICAgICBUaGUgZGF0ZS90aW1lIGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgZnJvbURhdGVUaW1lU3RyaW5nKGFWYWx1ZSwgcHJvcCkge1xuICAgIGlmIChhVmFsdWUubGVuZ3RoIDwgMTkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ2ludmFsaWQgZGF0ZS10aW1lIHZhbHVlOiBcIicgKyBhVmFsdWUgKyAnXCInXG4gICAgICApO1xuICAgIH1cblxuICAgIGxldCB6b25lO1xuICAgIGxldCB6b25lSWQ7XG5cbiAgICBpZiAoYVZhbHVlLnNsaWNlKC0xKSA9PT0gJ1onKSB7XG4gICAgICB6b25lID0gVGltZXpvbmUudXRjVGltZXpvbmU7XG4gICAgfSBlbHNlIGlmIChwcm9wKSB7XG4gICAgICB6b25lSWQgPSBwcm9wLmdldFBhcmFtZXRlcigndHppZCcpO1xuXG4gICAgICBpZiAocHJvcC5wYXJlbnQpIHtcbiAgICAgICAgaWYgKHByb3AucGFyZW50Lm5hbWUgPT09ICdzdGFuZGFyZCcgfHwgcHJvcC5wYXJlbnQubmFtZSA9PT0gJ2RheWxpZ2h0Jykge1xuICAgICAgICAgIC8vIFBlciBSRkMgNTU0NSAzLjguMi40IGFuZCAzLjguMi4yLCBzdGFydC9lbmQgZGF0ZS10aW1lcyB3aXRoaW5cbiAgICAgICAgICAvLyB0aGVzZSBjb21wb25lbnRzIE1VU1QgYmUgc3BlY2lmaWVkIGluIGxvY2FsIHRpbWUuXG4gICAgICAgICAgem9uZSA9IFRpbWV6b25lLmxvY2FsVGltZXpvbmU7XG4gICAgICAgIH0gZWxzZSBpZiAoem9uZUlkKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRlc2lyZWQgdGltZSB6b25lIGlzIGRlZmluZWQgd2l0aGluIHRoZSBjb21wb25lbnQgdHJlZSxcbiAgICAgICAgICAvLyBmZXRjaCBpdHMgZGVmaW5pdGlvbiBhbmQgcHJlZmVyIHRoYXQuXG4gICAgICAgICAgem9uZSA9IHByb3AucGFyZW50LmdldFRpbWVab25lQnlJRCh6b25lSWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdGltZURhdGEgPSB7XG4gICAgICB5ZWFyOiBzdHJpY3RQYXJzZUludChhVmFsdWUuc2xpY2UoMCwgNCkpLFxuICAgICAgbW9udGg6IHN0cmljdFBhcnNlSW50KGFWYWx1ZS5zbGljZSg1LCA3KSksXG4gICAgICBkYXk6IHN0cmljdFBhcnNlSW50KGFWYWx1ZS5zbGljZSg4LCAxMCkpLFxuICAgICAgaG91cjogc3RyaWN0UGFyc2VJbnQoYVZhbHVlLnNsaWNlKDExLCAxMykpLFxuICAgICAgbWludXRlOiBzdHJpY3RQYXJzZUludChhVmFsdWUuc2xpY2UoMTQsIDE2KSksXG4gICAgICBzZWNvbmQ6IHN0cmljdFBhcnNlSW50KGFWYWx1ZS5zbGljZSgxNywgMTkpKSxcbiAgICB9O1xuXG4gICAgLy8gQWx0aG91Z2ggUkZDIDU1NDUgcmVxdWlyZXMgdGhhdCBhbGwgVFpJRHMgdXNlZCB3aXRoaW4gYSBmaWxlIGhhdmUgYVxuICAgIC8vIGNvcnJlc3BvbmRpbmcgdGltZSB6b25lIGRlZmluaXRpb24sIHdlIG1heSBub3QgYmUgcGFyc2luZyB0aGUgZnVsbCBmaWxlXG4gICAgLy8gb3Igd2UgbWF5IGJlIGRlYWxpbmcgd2l0aCBhIG5vbi1jb21wbGlhbnQgZmlsZTsgaW4gZWl0aGVyIGNhc2UsIHdlIGNhblxuICAgIC8vIGNoZWNrIG91ciBvd24gdGltZSB6b25lIHNlcnZpY2UgZm9yIHRoZSBUWklEIGluIGEgbGFzdC1kaXRjaCBlZmZvcnQuXG4gICAgaWYgKHpvbmVJZCAmJiAhem9uZSkge1xuICAgICAgdGltZURhdGEudGltZXpvbmUgPSB6b25lSWQ7XG4gICAgfVxuXG4gICAgLy8gMjAxMi0xMC0xMFQxMDoxMDoxMChaKT9cbiAgICByZXR1cm4gbmV3IFRpbWUodGltZURhdGEsIHpvbmUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgSUNBTC5UaW1lIGluc3RhbmNlIGZyb20gYSBkYXRlIG9yIGRhdGUtdGltZSBzdHJpbmcsXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhVmFsdWUgICAgICAgICBUaGUgc3RyaW5nIHRvIGNyZWF0ZSBmcm9tXG4gICAqIEBwYXJhbSB7UHJvcGVydHk9fSBwcm9wICAgICAgICBUaGUgcHJvcGVydHkgdGhlIGRhdGUgYmVsb25ncyB0b1xuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgICAgICAgICAgICAgVGhlIGRhdGUvdGltZSBpbnN0YW5jZVxuICAgKi9cbiAgc3RhdGljIGZyb21TdHJpbmcoYVZhbHVlLCBhUHJvcGVydHkpIHtcbiAgICBpZiAoYVZhbHVlLmxlbmd0aCA+IDEwKSB7XG4gICAgICByZXR1cm4gVGltZS5mcm9tRGF0ZVRpbWVTdHJpbmcoYVZhbHVlLCBhUHJvcGVydHkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gVGltZS5mcm9tRGF0ZVN0cmluZyhhVmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuVGltZSBpbnN0YW5jZSBmcm9tIHRoZSBnaXZlbiBKYXZhc2NyaXB0IERhdGUuXG4gICAqXG4gICAqIEBwYXJhbSB7P0RhdGV9IGFEYXRlICAgICAgICAgICAgIFRoZSBKYXZhc2NyaXB0IERhdGUgdG8gcmVhZCwgb3IgbnVsbCB0byByZXNldFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VVVEM9ZmFsc2VdICBJZiB0cnVlLCB0aGUgVVRDIHZhbHVlcyBvZiB0aGUgZGF0ZSB3aWxsIGJlIHVzZWRcbiAgICovXG4gIHN0YXRpYyBmcm9tSlNEYXRlKGFEYXRlLCB1c2VVVEMpIHtcbiAgICBsZXQgdHQgPSBuZXcgVGltZSgpO1xuICAgIHJldHVybiB0dC5mcm9tSlNEYXRlKGFEYXRlLCB1c2VVVEMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5UaW1lIGluc3RhbmNlIGZyb20gdGhlIHRoZSBwYXNzZWQgZGF0YSBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7dGltZUluaXR9IGFEYXRhICAgICAgICAgIFRpbWUgaW5pdGlhbGl6YXRpb25cbiAgICogQHBhcmFtIHtUaW1lem9uZT19IGFab25lICAgICAgICAgVGltZXpvbmUgdGhpcyBwb3NpdGlvbiBvY2N1cnMgaW5cbiAgICovXG4gIHN0YXRpYyBmcm9tRGF0YSA9IGZ1bmN0aW9uIGZyb21EYXRhKGFEYXRhLCBhWm9uZSkge1xuICAgIGxldCB0ID0gbmV3IFRpbWUoKTtcbiAgICByZXR1cm4gdC5mcm9tRGF0YShhRGF0YSwgYVpvbmUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuVGltZSBpbnN0YW5jZSBmcm9tIHRoZSBjdXJyZW50IG1vbWVudC5cbiAgICogVGhlIGluc3RhbmNlIGlzIOKAnGZsb2F0aW5n4oCdIC0gaGFzIG5vIHRpbWV6b25lIHJlbGF0aW9uLlxuICAgKiBUbyBjcmVhdGUgYW4gaW5zdGFuY2UgY29uc2lkZXJpbmcgdGhlIHRpbWUgem9uZSwgY2FsbFxuICAgKiBJQ0FMLlRpbWUuZnJvbUpTRGF0ZShuZXcgRGF0ZSgpLCB0cnVlKVxuICAgKiBAcmV0dXJuIHtUaW1lfVxuICAgKi9cbiAgc3RhdGljIG5vdygpIHtcbiAgICByZXR1cm4gVGltZS5mcm9tSlNEYXRlKG5ldyBEYXRlKCksIGZhbHNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBkYXRlIG9uIHdoaWNoIElTTyB3ZWVrIG51bWJlciAxIHN0YXJ0cy5cbiAgICpcbiAgICogQHNlZSBUaW1lI3dlZWtOdW1iZXJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFZZWFyICAgICAgICAgICAgICAgICAgVGhlIHllYXIgdG8gc2VhcmNoIGluXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGFXZWVrU3RhcnQgICAgICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHdlZWtkYXksIHVzZWQgZm9yIGNhbGN1bGF0aW9uLlxuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgICAgICAgICAgICAgICAgICAgICBUaGUgZGF0ZSBvbiB3aGljaCB3ZWVrIG51bWJlciAxIHN0YXJ0c1xuICAgKi9cbiAgc3RhdGljIHdlZWtPbmVTdGFydHMoYVllYXIsIGFXZWVrU3RhcnQpIHtcbiAgICBsZXQgdCA9IFRpbWUuZnJvbURhdGEoe1xuICAgICAgeWVhcjogYVllYXIsXG4gICAgICBtb250aDogMSxcbiAgICAgIGRheTogMSxcbiAgICAgIGlzRGF0ZTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgbGV0IGRvdyA9IHQuZGF5T2ZXZWVrKCk7XG4gICAgbGV0IHdrc3QgPSBhV2Vla1N0YXJ0IHx8IFRpbWUuREVGQVVMVF9XRUVLX1NUQVJUO1xuICAgIGlmIChkb3cgPiBUaW1lLlRIVVJTREFZKSB7XG4gICAgICB0LmRheSArPSA3O1xuICAgIH1cbiAgICBpZiAod2tzdCA+IFRpbWUuVEhVUlNEQVkpIHtcbiAgICAgIHQuZGF5IC09IDc7XG4gICAgfVxuXG4gICAgdC5kYXkgLT0gZG93IC0gd2tzdDtcblxuICAgIHJldHVybiB0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZG9taW5pY2FsIGxldHRlciBmb3IgdGhlIGdpdmVuIHllYXIuIExldHRlcnMgcmFuZ2UgZnJvbSBBIC0gRyBmb3JcbiAgICogY29tbW9uIHllYXJzLCBhbmQgQUcgdG8gR0YgZm9yIGxlYXAgeWVhcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB5ciAgICAgICAgICAgVGhlIHllYXIgdG8gcmV0cmlldmUgdGhlIGxldHRlciBmb3JcbiAgICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgICAgICBUaGUgZG9taW5pY2FsIGxldHRlci5cbiAgICovXG4gIHN0YXRpYyBnZXREb21pbmljYWxMZXR0ZXIoeXIpIHtcbiAgICBsZXQgTFRSUyA9IFwiR0ZFRENCQVwiO1xuICAgIGxldCBkb20gPSAoeXIgKyAoeXIgLyA0IHwgMCkgKyAoeXIgLyA0MDAgfCAwKSAtICh5ciAvIDEwMCB8IDApIC0gMSkgJSA3O1xuICAgIGxldCBpc0xlYXAgPSBUaW1lLmlzTGVhcFllYXIoeXIpO1xuICAgIGlmIChpc0xlYXApIHtcbiAgICAgIHJldHVybiBMVFJTWyhkb20gKyA2KSAlIDddICsgTFRSU1tkb21dO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gTFRSU1tkb21dO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyAjZXBvY2hUaW1lID0gbnVsbDtcbiAgLyoqXG4gICAqIEphbnVhcnkgMXN0LCAxOTcwIGFzIGFuIElDQUwuVGltZS5cbiAgICogQHR5cGUge1RpbWV9XG4gICAqIEBjb25zdGFudFxuICAgKiBAaW5zdGFuY2VcbiAgICovXG4gIHN0YXRpYyBnZXQgZXBvY2hUaW1lKCkge1xuICAgIGlmICghdGhpcy4jZXBvY2hUaW1lKSB7XG4gICAgICB0aGlzLiNlcG9jaFRpbWUgPSBUaW1lLmZyb21EYXRhKHtcbiAgICAgICAgeWVhcjogMTk3MCxcbiAgICAgICAgbW9udGg6IDEsXG4gICAgICAgIGRheTogMSxcbiAgICAgICAgaG91cjogMCxcbiAgICAgICAgbWludXRlOiAwLFxuICAgICAgICBzZWNvbmQ6IDAsXG4gICAgICAgIGlzRGF0ZTogZmFsc2UsXG4gICAgICAgIHRpbWV6b25lOiBcIlpcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLiNlcG9jaFRpbWU7XG4gIH1cblxuICBzdGF0aWMgX2NtcF9hdHRyKGEsIGIsIGF0dHIpIHtcbiAgICBpZiAoYVthdHRyXSA+IGJbYXR0cl0pIHJldHVybiAxO1xuICAgIGlmIChhW2F0dHJdIDwgYlthdHRyXSkgcmV0dXJuIC0xO1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBkYXlzIHRoYXQgaGF2ZSBwYXNzZWQgaW4gdGhlIHllYXIgYWZ0ZXIgYSBnaXZlbiBtb250aC4gVGhlIGFycmF5IGhhc1xuICAgKiB0d28gbWVtYmVycywgb25lIGJlaW5nIGFuIGFycmF5IG9mIHBhc3NlZCBkYXlzIGZvciBub24tbGVhcCB5ZWFycywgdGhlXG4gICAqIG90aGVyIGFuYWxvZyBmb3IgbGVhcCB5ZWFycy5cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIGlzTGVhcFllYXIgPSBJQ0FMLlRpbWUuaXNMZWFwWWVhcih5ZWFyKTtcbiAgICogdmFyIHBhc3NlZERheXMgPSBJQ0FMLlRpbWUuZGF5c0luWWVhclBhc3NlZE1vbnRoW2lzTGVhcFllYXJdW21vbnRoXTtcbiAgICogQHR5cGUge0FycmF5LjxBcnJheS48TnVtYmVyPj59XG4gICAqL1xuICBzdGF0aWMgZGF5c0luWWVhclBhc3NlZE1vbnRoID0gW1xuICAgIFswLCAzMSwgNTksIDkwLCAxMjAsIDE1MSwgMTgxLCAyMTIsIDI0MywgMjczLCAzMDQsIDMzNCwgMzY1XSxcbiAgICBbMCwgMzEsIDYwLCA5MSwgMTIxLCAxNTIsIDE4MiwgMjEzLCAyNDQsIDI3NCwgMzA1LCAzMzUsIDM2Nl1cbiAgXTtcblxuICBzdGF0aWMgU1VOREFZID0gMTtcbiAgc3RhdGljIE1PTkRBWSA9IDI7XG4gIHN0YXRpYyBUVUVTREFZID0gMztcbiAgc3RhdGljIFdFRE5FU0RBWSA9IDQ7XG4gIHN0YXRpYyBUSFVSU0RBWSA9IDU7XG4gIHN0YXRpYyBGUklEQVkgPSA2O1xuICBzdGF0aWMgU0FUVVJEQVkgPSA3O1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCB3ZWVrZGF5IGZvciB0aGUgV0tTVCBwYXJ0LlxuICAgKiBAY29uc3RhbnRcbiAgICogQGRlZmF1bHQgSUNBTC5UaW1lLk1PTkRBWVxuICAgKi9cbiAgc3RhdGljIERFRkFVTFRfV0VFS19TVEFSVCA9IDI7IC8vIE1PTkRBWVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuVGltZSBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHt0aW1lSW5pdH0gZGF0YSAgICAgICAgICAgVGltZSBpbml0aWFsaXphdGlvblxuICAgKiBAcGFyYW0ge1RpbWV6b25lfSB6b25lICAgICAgICAgICB0aW1lem9uZSB0aGlzIHBvc2l0aW9uIG9jY3VycyBpblxuICAgKi9cbiAgY29uc3RydWN0b3IoZGF0YSwgem9uZSkge1xuICAgIHRoaXMud3JhcHBlZEpTT2JqZWN0ID0gdGhpcztcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHt0aW1lSW5pdH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuX3RpbWUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgLyogdGltZSBkZWZhdWx0cyAqL1xuICAgIHRoaXMuX3RpbWUueWVhciA9IDA7XG4gICAgdGhpcy5fdGltZS5tb250aCA9IDE7XG4gICAgdGhpcy5fdGltZS5kYXkgPSAxO1xuICAgIHRoaXMuX3RpbWUuaG91ciA9IDA7XG4gICAgdGhpcy5fdGltZS5taW51dGUgPSAwO1xuICAgIHRoaXMuX3RpbWUuc2Vjb25kID0gMDtcbiAgICB0aGlzLl90aW1lLmlzRGF0ZSA9IGZhbHNlO1xuXG4gICAgdGhpcy5mcm9tRGF0YShkYXRhLCB6b25lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY2xhc3MgaWRlbnRpZmllci5cbiAgICogQGNvbnN0YW50XG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEBkZWZhdWx0IFwiaWNhbHRpbWVcIlxuICAgKi9cbiAgaWNhbGNsYXNzID0gXCJpY2FsdGltZVwiO1xuICBfY2FjaGVkVW5peFRpbWUgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgdHlwZSBuYW1lLCB0byBiZSB1c2VkIGluIHRoZSBqQ2FsIG9iamVjdC4gVGhpcyB2YWx1ZSBtYXkgY2hhbmdlIGFuZFxuICAgKiBpcyBzdHJpY3RseSBkZWZpbmVkIGJ5IHRoZSB7QGxpbmsgSUNBTC5UaW1lI2lzRGF0ZSBpc0RhdGV9IG1lbWJlci5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGRlZmF1bHQgXCJkYXRlLXRpbWVcIlxuICAgKi9cbiAgZ2V0IGljYWx0eXBlKCkge1xuICAgIHJldHVybiB0aGlzLmlzRGF0ZSA/ICdkYXRlJyA6ICdkYXRlLXRpbWUnO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSB0aW1lem9uZSBmb3IgdGhpcyB0aW1lLlxuICAgKiBAdHlwZSB7VGltZXpvbmV9XG4gICAqL1xuICB6b25lID0gbnVsbDtcblxuICAvKipcbiAgICogSW50ZXJuYWwgdXNlcyB0byBpbmRpY2F0ZSB0aGF0IGEgY2hhbmdlIGhhcyBiZWVuIG1hZGUgYW5kIHRoZSBuZXh0IHJlYWRcbiAgICogb3BlcmF0aW9uIG11c3QgYXR0ZW1wdCB0byBub3JtYWxpemUgdGhlIHZhbHVlIChmb3IgZXhhbXBsZSBjaGFuZ2luZyB0aGVcbiAgICogZGF5IHRvIDMzKS5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcGVuZGluZ05vcm1hbGl6YXRpb24gPSBmYWxzZTtcblxuICAvKipcbiAgICogVGhlIHllYXIgb2YgdGhpcyBkYXRlLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgZ2V0IHllYXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldFRpbWVBdHRyKCd5ZWFyJyk7XG4gIH1cblxuICBzZXQgeWVhcih2YWwpIHtcbiAgICB0aGlzLl9zZXRUaW1lQXR0cigneWVhcicsIHZhbCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIG1vbnRoIG9mIHRoaXMgZGF0ZS5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGdldCBtb250aCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0VGltZUF0dHIoJ21vbnRoJyk7XG4gIH1cblxuICBzZXQgbW9udGgodmFsKSB7XG4gICAgdGhpcy5fc2V0VGltZUF0dHIoJ21vbnRoJywgdmFsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZGF5IG9mIHRoaXMgZGF0ZS5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGdldCBkYXkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldFRpbWVBdHRyKCdkYXknKTtcbiAgfVxuXG4gIHNldCBkYXkodmFsKSB7XG4gICAgdGhpcy5fc2V0VGltZUF0dHIoJ2RheScsIHZhbCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGhvdXIgb2YgdGhpcyBkYXRlLXRpbWUuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqL1xuICBnZXQgaG91cigpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0VGltZUF0dHIoJ2hvdXInKTtcbiAgfVxuXG4gIHNldCBob3VyKHZhbCkge1xuICAgIHRoaXMuX3NldFRpbWVBdHRyKCdob3VyJywgdmFsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgbWludXRlIG9mIHRoaXMgZGF0ZS10aW1lLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgZ2V0IG1pbnV0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0VGltZUF0dHIoJ21pbnV0ZScpO1xuICB9XG5cbiAgc2V0IG1pbnV0ZSh2YWwpIHtcbiAgICB0aGlzLl9zZXRUaW1lQXR0cignbWludXRlJywgdmFsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc2Vjb25kIG9mIHRoaXMgZGF0ZS10aW1lLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgZ2V0IHNlY29uZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0VGltZUF0dHIoJ3NlY29uZCcpO1xuICB9XG5cbiAgc2V0IHNlY29uZCh2YWwpIHtcbiAgICB0aGlzLl9zZXRUaW1lQXR0cignc2Vjb25kJywgdmFsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiB0cnVlLCB0aGUgaW5zdGFuY2UgcmVwcmVzZW50cyBhIGRhdGUgKGFzIG9wcG9zZWQgdG8gYSBkYXRlLXRpbWUpXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cbiAgZ2V0IGlzRGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0VGltZUF0dHIoJ2lzRGF0ZScpO1xuICB9XG5cbiAgc2V0IGlzRGF0ZSh2YWwpIHtcbiAgICB0aGlzLl9zZXRUaW1lQXR0cignaXNEYXRlJywgdmFsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYXR0ciAgICAgICAgICAgICBBdHRyaWJ1dGUgdG8gZ2V0IChvbmUgb2Y6IHllYXIsIG1vbnRoLFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBpc0RhdGUpXG4gICAqIEByZXR1cm4ge051bWJlcnxCb29sZWFufSAgICAgICAgIEN1cnJlbnQgdmFsdWUgZm9yIHRoZSBhdHRyaWJ1dGVcbiAgICovXG4gIF9nZXRUaW1lQXR0cihhdHRyKSB7XG4gICAgaWYgKHRoaXMuX3BlbmRpbmdOb3JtYWxpemF0aW9uKSB7XG4gICAgICB0aGlzLl9ub3JtYWxpemUoKTtcbiAgICAgIHRoaXMuX3BlbmRpbmdOb3JtYWxpemF0aW9uID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3RpbWVbYXR0cl07XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IGF0dHIgICAgICAgICAgICAgQXR0cmlidXRlIHRvIHNldCAob25lIG9mOiB5ZWFyLCBtb250aCxcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCwgaXNEYXRlKVxuICAgKiBAcGFyYW0ge051bWJlcnxCb29sZWFufSB2YWwgICAgICBOZXcgdmFsdWUgZm9yIHRoZSBhdHRyaWJ1dGVcbiAgICovXG4gIF9zZXRUaW1lQXR0cihhdHRyLCB2YWwpIHtcbiAgICAvLyBDaGVjayBpZiBpc0RhdGUgd2lsbCBiZSBzZXQgYW5kIGlmIHdhcyBub3Qgc2V0IHRvIG5vcm1hbGl6ZSBkYXRlLlxuICAgIC8vIFRoaXMgYXZvaWRzIGxvc2luZyBkYXlzIHdoZW4gc2Vjb25kcywgbWludXRlcyBhbmQgaG91cnMgYXJlIHplcm9lZFxuICAgIC8vIHdoYXQgbm9ybWFsaXplIHdpbGwgZG8gd2hlbiB0aW1lIGlzIGEgZGF0ZS5cbiAgICBpZiAoYXR0ciA9PT0gXCJpc0RhdGVcIiAmJiB2YWwgJiYgIXRoaXMuX3RpbWUuaXNEYXRlKSB7XG4gICAgICB0aGlzLmFkanVzdCgwLCAwLCAwLCAwKTtcbiAgICB9XG4gICAgdGhpcy5fY2FjaGVkVW5peFRpbWUgPSBudWxsO1xuICAgIHRoaXMuX3BlbmRpbmdOb3JtYWxpemF0aW9uID0gdHJ1ZTtcbiAgICB0aGlzLl90aW1lW2F0dHJdID0gdmFsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjbG9uZSBvZiB0aGUgdGltZSBvYmplY3QuXG4gICAqXG4gICAqIEByZXR1cm4ge1RpbWV9ICAgICAgICAgICAgICBUaGUgY2xvbmVkIG9iamVjdFxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBUaW1lKHRoaXMuX3RpbWUsIHRoaXMuem9uZSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgdGhlIHRpbWUgaW5zdGFuY2UgdG8gZXBvY2ggdGltZVxuICAgKi9cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5mcm9tRGF0YShUaW1lLmVwb2NoVGltZSk7XG4gICAgdGhpcy56b25lID0gVGltZXpvbmUudXRjVGltZXpvbmU7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgdGhlIHRpbWUgaW5zdGFuY2UgdG8gdGhlIGdpdmVuIGRhdGUvdGltZSB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB5ZWFyICAgICAgICAgICAgIFRoZSB5ZWFyIHRvIHNldFxuICAgKiBAcGFyYW0ge051bWJlcn0gbW9udGggICAgICAgICAgICBUaGUgbW9udGggdG8gc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkYXkgICAgICAgICAgICAgIFRoZSBkYXkgdG8gc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyfSBob3VyICAgICAgICAgICAgIFRoZSBob3VyIHRvIHNldFxuICAgKiBAcGFyYW0ge051bWJlcn0gbWludXRlICAgICAgICAgICBUaGUgbWludXRlIHRvIHNldFxuICAgKiBAcGFyYW0ge051bWJlcn0gc2Vjb25kICAgICAgICAgICBUaGUgc2Vjb25kIHRvIHNldFxuICAgKiBAcGFyYW0ge1RpbWV6b25lfSB0aW1lem9uZSAgICAgICBUaGUgdGltZXpvbmUgdG8gc2V0XG4gICAqL1xuICByZXNldFRvKHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCB0aW1lem9uZSkge1xuICAgIHRoaXMuZnJvbURhdGEoe1xuICAgICAgeWVhcjogeWVhcixcbiAgICAgIG1vbnRoOiBtb250aCxcbiAgICAgIGRheTogZGF5LFxuICAgICAgaG91cjogaG91cixcbiAgICAgIG1pbnV0ZTogbWludXRlLFxuICAgICAgc2Vjb25kOiBzZWNvbmQsXG4gICAgICB6b25lOiB0aW1lem9uZVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB1cCB0aGUgY3VycmVudCBpbnN0YW5jZSBmcm9tIHRoZSBKYXZhc2NyaXB0IGRhdGUgdmFsdWUuXG4gICAqXG4gICAqIEBwYXJhbSB7P0RhdGV9IGFEYXRlICAgICAgICAgICAgIFRoZSBKYXZhc2NyaXB0IERhdGUgdG8gcmVhZCwgb3IgbnVsbCB0byByZXNldFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VVVEM9ZmFsc2VdICBJZiB0cnVlLCB0aGUgVVRDIHZhbHVlcyBvZiB0aGUgZGF0ZSB3aWxsIGJlIHVzZWRcbiAgICovXG4gIGZyb21KU0RhdGUoYURhdGUsIHVzZVVUQykge1xuICAgIGlmICghYURhdGUpIHtcbiAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHVzZVVUQykge1xuICAgICAgICB0aGlzLnpvbmUgPSBUaW1lem9uZS51dGNUaW1lem9uZTtcbiAgICAgICAgdGhpcy55ZWFyID0gYURhdGUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgICAgICAgdGhpcy5tb250aCA9IGFEYXRlLmdldFVUQ01vbnRoKCkgKyAxO1xuICAgICAgICB0aGlzLmRheSA9IGFEYXRlLmdldFVUQ0RhdGUoKTtcbiAgICAgICAgdGhpcy5ob3VyID0gYURhdGUuZ2V0VVRDSG91cnMoKTtcbiAgICAgICAgdGhpcy5taW51dGUgPSBhRGF0ZS5nZXRVVENNaW51dGVzKCk7XG4gICAgICAgIHRoaXMuc2Vjb25kID0gYURhdGUuZ2V0VVRDU2Vjb25kcygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy56b25lID0gVGltZXpvbmUubG9jYWxUaW1lem9uZTtcbiAgICAgICAgdGhpcy55ZWFyID0gYURhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgdGhpcy5tb250aCA9IGFEYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgICAgICB0aGlzLmRheSA9IGFEYXRlLmdldERhdGUoKTtcbiAgICAgICAgdGhpcy5ob3VyID0gYURhdGUuZ2V0SG91cnMoKTtcbiAgICAgICAgdGhpcy5taW51dGUgPSBhRGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgICAgIHRoaXMuc2Vjb25kID0gYURhdGUuZ2V0U2Vjb25kcygpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9jYWNoZWRVbml4VGltZSA9IG51bGw7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB1cCB0aGUgY3VycmVudCBpbnN0YW5jZSB1c2luZyBtZW1iZXJzIGZyb20gdGhlIHBhc3NlZCBkYXRhIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHt0aW1lSW5pdH0gYURhdGEgICAgICAgICAgVGltZSBpbml0aWFsaXphdGlvblxuICAgKiBAcGFyYW0ge1RpbWV6b25lPX0gYVpvbmUgICAgICAgICBUaW1lem9uZSB0aGlzIHBvc2l0aW9uIG9jY3VycyBpblxuICAgKi9cbiAgZnJvbURhdGEoYURhdGEsIGFab25lKSB7XG4gICAgaWYgKGFEYXRhKSB7XG4gICAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoYURhdGEpKSB7XG4gICAgICAgICAgLy8gaWNhbCB0eXBlIGNhbm5vdCBiZSBzZXRcbiAgICAgICAgICBpZiAoa2V5ID09PSAnaWNhbHR5cGUnKSBjb250aW51ZTtcbiAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGFab25lKSB7XG4gICAgICB0aGlzLnpvbmUgPSBhWm9uZTtcbiAgICB9XG5cbiAgICBpZiAoYURhdGEgJiYgIShcImlzRGF0ZVwiIGluIGFEYXRhKSkge1xuICAgICAgdGhpcy5pc0RhdGUgPSAhKFwiaG91clwiIGluIGFEYXRhKTtcbiAgICB9IGVsc2UgaWYgKGFEYXRhICYmIChcImlzRGF0ZVwiIGluIGFEYXRhKSkge1xuICAgICAgdGhpcy5pc0RhdGUgPSBhRGF0YS5pc0RhdGU7XG4gICAgfVxuXG4gICAgaWYgKGFEYXRhICYmIFwidGltZXpvbmVcIiBpbiBhRGF0YSkge1xuICAgICAgbGV0IHpvbmUgPSBUaW1lem9uZVNlcnZpY2UuZ2V0KFxuICAgICAgICBhRGF0YS50aW1lem9uZVxuICAgICAgKTtcblxuICAgICAgdGhpcy56b25lID0gem9uZSB8fCBUaW1lem9uZS5sb2NhbFRpbWV6b25lO1xuICAgIH1cblxuICAgIGlmIChhRGF0YSAmJiBcInpvbmVcIiBpbiBhRGF0YSkge1xuICAgICAgdGhpcy56b25lID0gYURhdGEuem9uZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuem9uZSkge1xuICAgICAgdGhpcy56b25lID0gVGltZXpvbmUubG9jYWxUaW1lem9uZTtcbiAgICB9XG5cbiAgICB0aGlzLl9jYWNoZWRVbml4VGltZSA9IG51bGw7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRoZSBkYXkgb2Ygd2Vlay5cbiAgICogQHBhcmFtIHt3ZWVrRGF5PX0gYVdlZWtTdGFydFxuICAgKiAgICAgICAgVGhlIHdlZWsgc3RhcnQgd2Vla2RheSwgZGVmYXVsdHMgdG8gU1VOREFZXG4gICAqIEByZXR1cm4ge3dlZWtEYXl9XG4gICAqL1xuICBkYXlPZldlZWsoYVdlZWtTdGFydCkge1xuICAgIGxldCBmaXJzdERvdyA9IGFXZWVrU3RhcnQgfHwgVGltZS5TVU5EQVk7XG4gICAgbGV0IGRvd0NhY2hlS2V5ID0gKHRoaXMueWVhciA8PCAxMikgKyAodGhpcy5tb250aCA8PCA4KSArICh0aGlzLmRheSA8PCAzKSArIGZpcnN0RG93O1xuICAgIGlmIChkb3dDYWNoZUtleSBpbiBUaW1lLl9kb3dDYWNoZSkge1xuICAgICAgcmV0dXJuIFRpbWUuX2Rvd0NhY2hlW2Rvd0NhY2hlS2V5XTtcbiAgICB9XG5cbiAgICAvLyBVc2luZyBaZWxsZXIncyBhbGdvcml0aG1cbiAgICBsZXQgcSA9IHRoaXMuZGF5O1xuICAgIGxldCBtID0gdGhpcy5tb250aCArICh0aGlzLm1vbnRoIDwgMyA/IDEyIDogMCk7XG4gICAgbGV0IFkgPSB0aGlzLnllYXIgLSAodGhpcy5tb250aCA8IDMgPyAxIDogMCk7XG5cbiAgICBsZXQgaCA9IChxICsgWSArIHRydW5jKCgobSArIDEpICogMjYpIC8gMTApICsgdHJ1bmMoWSAvIDQpKTtcbiAgICB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXG4gICAgICBoICs9IHRydW5jKFkgLyAxMDApICogNiArIHRydW5jKFkgLyA0MDApO1xuICAgIH1cblxuICAgIC8vIE5vcm1hbGl6ZSB0byAxID0gd2tzdFxuICAgIGggPSAoKGggKyA3IC0gZmlyc3REb3cpICUgNykgKyAxO1xuICAgIFRpbWUuX2Rvd0NhY2hlW2Rvd0NhY2hlS2V5XSA9IGg7XG4gICAgcmV0dXJuIGg7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRoZSBkYXkgb2YgeWVhci5cbiAgICogQHJldHVybiB7TnVtYmVyfVxuICAgKi9cbiAgZGF5T2ZZZWFyKCkge1xuICAgIGxldCBpc19sZWFwID0gKFRpbWUuaXNMZWFwWWVhcih0aGlzLnllYXIpID8gMSA6IDApO1xuICAgIGxldCBkaXlwbSA9IFRpbWUuZGF5c0luWWVhclBhc3NlZE1vbnRoO1xuICAgIHJldHVybiBkaXlwbVtpc19sZWFwXVt0aGlzLm1vbnRoIC0gMV0gKyB0aGlzLmRheTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBkYXRlL3RpbWUsIHJld291bmQgdG8gdGhlIHN0YXJ0IG9mIHRoZVxuICAgKiB3ZWVrLiBUaGUgcmVzdWx0aW5nIElDQUwuVGltZSBpbnN0YW5jZSBpcyBvZiBpY2FsdHlwZSBkYXRlLCBldmVuIGlmIHRoaXNcbiAgICogaXMgYSBkYXRlLXRpbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGFXZWVrU3RhcnRcbiAgICogICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHdlZWtkYXksIGRlZmF1bHRzIHRvIFNVTkRBWVxuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgIFRoZSBzdGFydCBvZiB0aGUgd2VlayAoY2xvbmVkKVxuICAgKi9cbiAgc3RhcnRPZldlZWsoYVdlZWtTdGFydCkge1xuICAgIGxldCBmaXJzdERvdyA9IGFXZWVrU3RhcnQgfHwgVGltZS5TVU5EQVk7XG4gICAgbGV0IHJlc3VsdCA9IHRoaXMuY2xvbmUoKTtcbiAgICByZXN1bHQuZGF5IC09ICgodGhpcy5kYXlPZldlZWsoKSArIDcgLSBmaXJzdERvdykgJSA3KTtcbiAgICByZXN1bHQuaXNEYXRlID0gdHJ1ZTtcbiAgICByZXN1bHQuaG91ciA9IDA7XG4gICAgcmVzdWx0Lm1pbnV0ZSA9IDA7XG4gICAgcmVzdWx0LnNlY29uZCA9IDA7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBkYXRlL3RpbWUsIHNoaWZ0ZWQgdG8gdGhlIGVuZCBvZiB0aGUgd2Vlay5cbiAgICogVGhlIHJlc3VsdGluZyBJQ0FMLlRpbWUgaW5zdGFuY2UgaXMgb2YgaWNhbHR5cGUgZGF0ZSwgZXZlbiBpZiB0aGlzIGlzIGFcbiAgICogZGF0ZS10aW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge3dlZWtEYXk9fSBhV2Vla1N0YXJ0XG4gICAqICAgICAgICBUaGUgd2VlayBzdGFydCB3ZWVrZGF5LCBkZWZhdWx0cyB0byBTVU5EQVlcbiAgICogQHJldHVybiB7VGltZX0gICAgICBUaGUgZW5kIG9mIHRoZSB3ZWVrIChjbG9uZWQpXG4gICAqL1xuICBlbmRPZldlZWsoYVdlZWtTdGFydCkge1xuICAgIGxldCBmaXJzdERvdyA9IGFXZWVrU3RhcnQgfHwgVGltZS5TVU5EQVk7XG4gICAgbGV0IHJlc3VsdCA9IHRoaXMuY2xvbmUoKTtcbiAgICByZXN1bHQuZGF5ICs9ICg3IC0gdGhpcy5kYXlPZldlZWsoKSArIGZpcnN0RG93IC0gVGltZS5TVU5EQVkpICUgNztcbiAgICByZXN1bHQuaXNEYXRlID0gdHJ1ZTtcbiAgICByZXN1bHQuaG91ciA9IDA7XG4gICAgcmVzdWx0Lm1pbnV0ZSA9IDA7XG4gICAgcmVzdWx0LnNlY29uZCA9IDA7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBkYXRlL3RpbWUsIHJld291bmQgdG8gdGhlIHN0YXJ0IG9mIHRoZVxuICAgKiBtb250aC4gVGhlIHJlc3VsdGluZyBJQ0FMLlRpbWUgaW5zdGFuY2UgaXMgb2YgaWNhbHR5cGUgZGF0ZSwgZXZlbiBpZlxuICAgKiB0aGlzIGlzIGEgZGF0ZS10aW1lLlxuICAgKlxuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgIFRoZSBzdGFydCBvZiB0aGUgbW9udGggKGNsb25lZClcbiAgICovXG4gIHN0YXJ0T2ZNb250aCgpIHtcbiAgICBsZXQgcmVzdWx0ID0gdGhpcy5jbG9uZSgpO1xuICAgIHJlc3VsdC5kYXkgPSAxO1xuICAgIHJlc3VsdC5pc0RhdGUgPSB0cnVlO1xuICAgIHJlc3VsdC5ob3VyID0gMDtcbiAgICByZXN1bHQubWludXRlID0gMDtcbiAgICByZXN1bHQuc2Vjb25kID0gMDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IGRhdGUvdGltZSwgc2hpZnRlZCB0byB0aGUgZW5kIG9mIHRoZVxuICAgKiBtb250aC4gIFRoZSByZXN1bHRpbmcgSUNBTC5UaW1lIGluc3RhbmNlIGlzIG9mIGljYWx0eXBlIGRhdGUsIGV2ZW4gaWZcbiAgICogdGhpcyBpcyBhIGRhdGUtdGltZS5cbiAgICpcbiAgICogQHJldHVybiB7VGltZX0gICAgICBUaGUgZW5kIG9mIHRoZSBtb250aCAoY2xvbmVkKVxuICAgKi9cbiAgZW5kT2ZNb250aCgpIHtcbiAgICBsZXQgcmVzdWx0ID0gdGhpcy5jbG9uZSgpO1xuICAgIHJlc3VsdC5kYXkgPSBUaW1lLmRheXNJbk1vbnRoKHJlc3VsdC5tb250aCwgcmVzdWx0LnllYXIpO1xuICAgIHJlc3VsdC5pc0RhdGUgPSB0cnVlO1xuICAgIHJlc3VsdC5ob3VyID0gMDtcbiAgICByZXN1bHQubWludXRlID0gMDtcbiAgICByZXN1bHQuc2Vjb25kID0gMDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IGRhdGUvdGltZSwgcmV3b3VuZCB0byB0aGUgc3RhcnQgb2YgdGhlXG4gICAqIHllYXIuIFRoZSByZXN1bHRpbmcgSUNBTC5UaW1lIGluc3RhbmNlIGlzIG9mIGljYWx0eXBlIGRhdGUsIGV2ZW4gaWZcbiAgICogdGhpcyBpcyBhIGRhdGUtdGltZS5cbiAgICpcbiAgICogQHJldHVybiB7VGltZX0gICAgICBUaGUgc3RhcnQgb2YgdGhlIHllYXIgKGNsb25lZClcbiAgICovXG4gIHN0YXJ0T2ZZZWFyKCkge1xuICAgIGxldCByZXN1bHQgPSB0aGlzLmNsb25lKCk7XG4gICAgcmVzdWx0LmRheSA9IDE7XG4gICAgcmVzdWx0Lm1vbnRoID0gMTtcbiAgICByZXN1bHQuaXNEYXRlID0gdHJ1ZTtcbiAgICByZXN1bHQuaG91ciA9IDA7XG4gICAgcmVzdWx0Lm1pbnV0ZSA9IDA7XG4gICAgcmVzdWx0LnNlY29uZCA9IDA7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBkYXRlL3RpbWUsIHNoaWZ0ZWQgdG8gdGhlIGVuZCBvZiB0aGVcbiAgICogeWVhci4gIFRoZSByZXN1bHRpbmcgSUNBTC5UaW1lIGluc3RhbmNlIGlzIG9mIGljYWx0eXBlIGRhdGUsIGV2ZW4gaWZcbiAgICogdGhpcyBpcyBhIGRhdGUtdGltZS5cbiAgICpcbiAgICogQHJldHVybiB7VGltZX0gICAgICBUaGUgZW5kIG9mIHRoZSB5ZWFyIChjbG9uZWQpXG4gICAqL1xuICBlbmRPZlllYXIoKSB7XG4gICAgbGV0IHJlc3VsdCA9IHRoaXMuY2xvbmUoKTtcbiAgICByZXN1bHQuZGF5ID0gMzE7XG4gICAgcmVzdWx0Lm1vbnRoID0gMTI7XG4gICAgcmVzdWx0LmlzRGF0ZSA9IHRydWU7XG4gICAgcmVzdWx0LmhvdXIgPSAwO1xuICAgIHJlc3VsdC5taW51dGUgPSAwO1xuICAgIHJlc3VsdC5zZWNvbmQgPSAwO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogRmlyc3QgY2FsY3VsYXRlcyB0aGUgc3RhcnQgb2YgdGhlIHdlZWssIHRoZW4gcmV0dXJucyB0aGUgZGF5IG9mIHllYXIgZm9yXG4gICAqIHRoaXMgZGF0ZS4gSWYgdGhlIGRheSBmYWxscyBpbnRvIHRoZSBwcmV2aW91cyB5ZWFyLCB0aGUgZGF5IGlzIHplcm8gb3IgbmVnYXRpdmUuXG4gICAqXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGFGaXJzdERheU9mV2Vla1xuICAgKiAgICAgICAgVGhlIHdlZWsgc3RhcnQgd2Vla2RheSwgZGVmYXVsdHMgdG8gU1VOREFZXG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgIFRoZSBjYWxjdWxhdGVkIGRheSBvZiB5ZWFyXG4gICAqL1xuICBzdGFydERveVdlZWsoYUZpcnN0RGF5T2ZXZWVrKSB7XG4gICAgbGV0IGZpcnN0RG93ID0gYUZpcnN0RGF5T2ZXZWVrIHx8IFRpbWUuU1VOREFZO1xuICAgIGxldCBkZWx0YSA9IHRoaXMuZGF5T2ZXZWVrKCkgLSBmaXJzdERvdztcbiAgICBpZiAoZGVsdGEgPCAwKSBkZWx0YSArPSA3O1xuICAgIHJldHVybiB0aGlzLmRheU9mWWVhcigpIC0gZGVsdGE7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBkb21pbmljYWwgbGV0dGVyIGZvciB0aGUgY3VycmVudCB5ZWFyLiBMZXR0ZXJzIHJhbmdlIGZyb20gQSAtIEdcbiAgICogZm9yIGNvbW1vbiB5ZWFycywgYW5kIEFHIHRvIEdGIGZvciBsZWFwIHllYXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0geXIgICAgICAgICAgIFRoZSB5ZWFyIHRvIHJldHJpZXZlIHRoZSBsZXR0ZXIgZm9yXG4gICAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICAgICAgVGhlIGRvbWluaWNhbCBsZXR0ZXIuXG4gICAqL1xuICBnZXREb21pbmljYWxMZXR0ZXIoKSB7XG4gICAgcmV0dXJuIFRpbWUuZ2V0RG9taW5pY2FsTGV0dGVyKHRoaXMueWVhcik7XG4gIH1cblxuICAvKipcbiAgICogRmluZHMgdGhlIG50aFdlZWtEYXkgcmVsYXRpdmUgdG8gdGhlIGN1cnJlbnQgbW9udGggKG5vdCBkYXkpLiAgVGhlXG4gICAqIHJldHVybmVkIHZhbHVlIGlzIGEgZGF5IHJlbGF0aXZlIHRoZSBtb250aCB0aGF0IHRoaXMgbW9udGggYmVsb25ncyB0byBzb1xuICAgKiAxIHdvdWxkIGluZGljYXRlIHRoZSBmaXJzdCBvZiB0aGUgbW9udGggYW5kIDQwIHdvdWxkIGluZGljYXRlIGEgZGF5IGluXG4gICAqIHRoZSBmb2xsb3dpbmcgbW9udGguXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBhRGF5T2ZXZWVrICAgRGF5IG9mIHRoZSB3ZWVrIHNlZSB0aGUgZGF5IG5hbWUgY29uc3RhbnRzXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBhUG9zICAgICAgICAgTnRoIG9jY3VycmVuY2Ugb2YgYSBnaXZlbiB3ZWVrIGRheSB2YWx1ZXNcbiAgICogICAgICAgIG9mIDEgYW5kIDAgYm90aCBpbmRpY2F0ZSB0aGUgZmlyc3Qgd2Vla2RheSBvZiB0aGF0IHR5cGUuIGFQb3MgbWF5XG4gICAqICAgICAgICBiZSBlaXRoZXIgcG9zaXRpdmUgb3IgbmVnYXRpdmVcbiAgICpcbiAgICogQHJldHVybiB7TnVtYmVyfSBudW1lcmljIHZhbHVlIGluZGljYXRpbmcgYSBkYXkgcmVsYXRpdmVcbiAgICogICAgICAgICAgICAgICAgICAgdG8gdGhlIGN1cnJlbnQgbW9udGggb2YgdGhpcyB0aW1lIG9iamVjdFxuICAgKi9cbiAgbnRoV2Vla0RheShhRGF5T2ZXZWVrLCBhUG9zKSB7XG4gICAgbGV0IGRheXNJbk1vbnRoID0gVGltZS5kYXlzSW5Nb250aCh0aGlzLm1vbnRoLCB0aGlzLnllYXIpO1xuICAgIGxldCB3ZWVrZGF5O1xuICAgIGxldCBwb3MgPSBhUG9zO1xuXG4gICAgbGV0IHN0YXJ0ID0gMDtcblxuICAgIGxldCBvdGhlckRheSA9IHRoaXMuY2xvbmUoKTtcblxuICAgIGlmIChwb3MgPj0gMCkge1xuICAgICAgb3RoZXJEYXkuZGF5ID0gMTtcblxuICAgICAgLy8gYmVjYXVzZSAwIG1lYW5zIG5vIHBvc2l0aW9uIGhhcyBiZWVuIGdpdmVuXG4gICAgICAvLyAxIGFuZCAwIGluZGljYXRlIHRoZSBzYW1lIGRheS5cbiAgICAgIGlmIChwb3MgIT0gMCkge1xuICAgICAgICAvLyByZW1vdmUgdGhlIGV4dHJhIG51bWVyaWMgdmFsdWVcbiAgICAgICAgcG9zLS07XG4gICAgICB9XG5cbiAgICAgIC8vIHNldCBjdXJyZW50IHN0YXJ0IG9mZnNldCB0byBjdXJyZW50IGRheS5cbiAgICAgIHN0YXJ0ID0gb3RoZXJEYXkuZGF5O1xuXG4gICAgICAvLyBmaW5kIHRoZSBjdXJyZW50IGRheSBvZiB3ZWVrXG4gICAgICBsZXQgc3RhcnREb3cgPSBvdGhlckRheS5kYXlPZldlZWsoKTtcblxuICAgICAgLy8gY2FsY3VsYXRlIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gY3VycmVudFxuICAgICAgLy8gZGF5IG9mIHRoZSB3ZWVrIGFuZCBkZXNpcmVkIGRheSBvZiB0aGUgd2Vla1xuICAgICAgbGV0IG9mZnNldCA9IGFEYXlPZldlZWsgLSBzdGFydERvdztcblxuXG4gICAgICAvLyBpZiB0aGUgb2Zmc2V0IGdvZXMgaW50byB0aGUgcGFzdFxuICAgICAgLy8gd2VlayB3ZSBhZGQgNyBzbyBpdCBnb2VzIGludG8gdGhlIG5leHRcbiAgICAgIC8vIHdlZWsuIFdlIG9ubHkgd2FudCB0byBnbyBmb3J3YXJkIGluIHRpbWUgaGVyZS5cbiAgICAgIGlmIChvZmZzZXQgPCAwKVxuICAgICAgICAvLyB0aGlzIGlzIHJlYWxseSBpbXBvcnRhbnQgb3RoZXJ3aXNlIHdlIHdvdWxkXG4gICAgICAgIC8vIGVuZCB1cCB3aXRoIGRhdGVzIGZyb20gaW4gdGhlIHBhc3QuXG4gICAgICAgIG9mZnNldCArPSA3O1xuXG4gICAgICAvLyBhZGQgb2Zmc2V0IHRvIHN0YXJ0IHNvIHN0YXJ0IGlzIHRoZSBzYW1lXG4gICAgICAvLyBkYXkgb2YgdGhlIHdlZWsgYXMgdGhlIGRlc2lyZWQgZGF5IG9mIHdlZWsuXG4gICAgICBzdGFydCArPSBvZmZzZXQ7XG5cbiAgICAgIC8vIGJlY2F1c2Ugd2UgYXJlIGdvaW5nIHRvIGFkZCAoYW5kIG11bHRpcGx5KVxuICAgICAgLy8gdGhlIG51bWVyaWMgdmFsdWUgb2YgdGhlIGRheSB3ZSBzdWJ0cmFjdCBpdFxuICAgICAgLy8gZnJvbSB0aGUgc3RhcnQgcG9zaXRpb24gc28gbm90IHRvIGFkZCBpdCB0d2ljZS5cbiAgICAgIHN0YXJ0IC09IGFEYXlPZldlZWs7XG5cbiAgICAgIC8vIHNldCB3ZWVrIGRheVxuICAgICAgd2Vla2RheSA9IGFEYXlPZldlZWs7XG4gICAgfSBlbHNlIHtcblxuICAgICAgLy8gdGhlbiB3ZSBzZXQgaXQgdG8gdGhlIGxhc3QgZGF5IGluIHRoZSBjdXJyZW50IG1vbnRoXG4gICAgICBvdGhlckRheS5kYXkgPSBkYXlzSW5Nb250aDtcblxuICAgICAgLy8gZmluZCB0aGUgZW5kcyB3ZWVrZGF5XG4gICAgICBsZXQgZW5kRG93ID0gb3RoZXJEYXkuZGF5T2ZXZWVrKCk7XG5cbiAgICAgIHBvcysrO1xuXG4gICAgICB3ZWVrZGF5ID0gKGVuZERvdyAtIGFEYXlPZldlZWspO1xuXG4gICAgICBpZiAod2Vla2RheSA8IDApIHtcbiAgICAgICAgd2Vla2RheSArPSA3O1xuICAgICAgfVxuXG4gICAgICB3ZWVrZGF5ID0gZGF5c0luTW9udGggLSB3ZWVrZGF5O1xuICAgIH1cblxuICAgIHdlZWtkYXkgKz0gcG9zICogNztcblxuICAgIHJldHVybiBzdGFydCArIHdlZWtkYXk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGN1cnJlbnQgdGltZSBpcyB0aGUgbnRoIHdlZWtkYXksIHJlbGF0aXZlIHRvIHRoZSBjdXJyZW50XG4gICAqIG1vbnRoLiAgV2lsbCBhbHdheXMgcmV0dXJuIGZhbHNlIHdoZW4gcnVsZSByZXNvbHZlcyBvdXRzaWRlIG9mIGN1cnJlbnRcbiAgICogbW9udGguXG4gICAqXG4gICAqIEBwYXJhbSB7d2Vla0RheX0gYURheU9mV2VlayAgICAgICAgICAgICAgICAgRGF5IG9mIHdlZWsgdG8gY2hlY2tcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFQb3MgICAgICAgICAgICAgICAgICAgICAgICBSZWxhdGl2ZSBwb3NpdGlvblxuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgICAgICAgICAgICAgICAgICAgIFRydWUsIGlmIGl0IGlzIHRoZSBudGggd2Vla2RheVxuICAgKi9cbiAgaXNOdGhXZWVrRGF5KGFEYXlPZldlZWssIGFQb3MpIHtcbiAgICBsZXQgZG93ID0gdGhpcy5kYXlPZldlZWsoKTtcblxuICAgIGlmIChhUG9zID09PSAwICYmIGRvdyA9PT0gYURheU9mV2Vlaykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gZ2V0IHBvc1xuICAgIGxldCBkYXkgPSB0aGlzLm50aFdlZWtEYXkoYURheU9mV2VlaywgYVBvcyk7XG5cbiAgICBpZiAoZGF5ID09PSB0aGlzLmRheSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgdGhlIElTTyA4NjAxIHdlZWsgbnVtYmVyLiBUaGUgZmlyc3Qgd2VlayBvZiBhIHllYXIgaXMgdGhlXG4gICAqIHdlZWsgdGhhdCBjb250YWlucyB0aGUgZmlyc3QgVGh1cnNkYXkuIFRoZSB5ZWFyIGNhbiBoYXZlIDUzIHdlZWtzLCBpZlxuICAgKiBKYW51YXJ5IDFzdCBpcyBhIEZyaWRheS5cbiAgICpcbiAgICogTm90ZSB0aGVyZSBhcmUgcmVnaW9ucyB3aGVyZSB0aGUgZmlyc3Qgd2VlayBvZiB0aGUgeWVhciBpcyB0aGUgb25lIHRoYXRcbiAgICogc3RhcnRzIG9uIEphbnVhcnkgMXN0LCB3aGljaCBtYXkgb2Zmc2V0IHRoZSB3ZWVrIG51bWJlci4gQWxzbywgaWYgYVxuICAgKiBkaWZmZXJlbnQgd2VlayBzdGFydCBpcyBzcGVjaWZpZWQsIHRoaXMgd2lsbCBhbHNvIGFmZmVjdCB0aGUgd2Vla1xuICAgKiBudW1iZXIuXG4gICAqXG4gICAqIEBzZWUgVGltZS53ZWVrT25lU3RhcnRzXG4gICAqIEBwYXJhbSB7d2Vla0RheX0gYVdlZWtTdGFydCAgICAgICAgICAgICAgICAgIFRoZSB3ZWVrZGF5IHRoZSB3ZWVrIHN0YXJ0cyB3aXRoXG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBJU08gd2VlayBudW1iZXJcbiAgICovXG4gIHdlZWtOdW1iZXIoYVdlZWtTdGFydCkge1xuICAgIGxldCB3bkNhY2hlS2V5ID0gKHRoaXMueWVhciA8PCAxMikgKyAodGhpcy5tb250aCA8PCA4KSArICh0aGlzLmRheSA8PCAzKSArIGFXZWVrU3RhcnQ7XG4gICAgaWYgKHduQ2FjaGVLZXkgaW4gVGltZS5fd25DYWNoZSkge1xuICAgICAgcmV0dXJuIFRpbWUuX3duQ2FjaGVbd25DYWNoZUtleV07XG4gICAgfVxuICAgIC8vIFRoaXMgZnVuY3Rpb24gY291cnRlc3R5IG9mIEp1bGlhbiBCdWNrbmFsbCwgcHVibGlzaGVkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICAgIC8vIGh0dHA6Ly93d3cuYm95ZXQuY29tL2FydGljbGVzL3B1Ymxpc2hlZGFydGljbGVzL2NhbGN1bGF0aW5ndGhlaXNvd2Vla251bWIuaHRtbFxuICAgIC8vIHBsdXMgc29tZSBmaXhlcyB0byBiZSBhYmxlIHRvIHVzZSBkaWZmZXJlbnQgd2VlayBzdGFydHMuXG4gICAgbGV0IHdlZWsxO1xuXG4gICAgbGV0IGR0ID0gdGhpcy5jbG9uZSgpO1xuICAgIGR0LmlzRGF0ZSA9IHRydWU7XG4gICAgbGV0IGlzb3llYXIgPSB0aGlzLnllYXI7XG5cbiAgICBpZiAoZHQubW9udGggPT0gMTIgJiYgZHQuZGF5ID4gMjUpIHtcbiAgICAgIHdlZWsxID0gVGltZS53ZWVrT25lU3RhcnRzKGlzb3llYXIgKyAxLCBhV2Vla1N0YXJ0KTtcbiAgICAgIGlmIChkdC5jb21wYXJlKHdlZWsxKSA8IDApIHtcbiAgICAgICAgd2VlazEgPSBUaW1lLndlZWtPbmVTdGFydHMoaXNveWVhciwgYVdlZWtTdGFydCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpc295ZWFyKys7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdlZWsxID0gVGltZS53ZWVrT25lU3RhcnRzKGlzb3llYXIsIGFXZWVrU3RhcnQpO1xuICAgICAgaWYgKGR0LmNvbXBhcmUod2VlazEpIDwgMCkge1xuICAgICAgICB3ZWVrMSA9IFRpbWUud2Vla09uZVN0YXJ0cygtLWlzb3llYXIsIGFXZWVrU3RhcnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBkYXlzQmV0d2VlbiA9IChkdC5zdWJ0cmFjdERhdGUod2VlazEpLnRvU2Vjb25kcygpIC8gODY0MDApO1xuICAgIGxldCBhbnN3ZXIgPSB0cnVuYyhkYXlzQmV0d2VlbiAvIDcpICsgMTtcbiAgICBUaW1lLl93bkNhY2hlW3duQ2FjaGVLZXldID0gYW5zd2VyO1xuICAgIHJldHVybiBhbnN3ZXI7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyB0aGUgZHVyYXRpb24gdG8gdGhlIGN1cnJlbnQgdGltZS4gVGhlIGluc3RhbmNlIGlzIG1vZGlmaWVkIGluXG4gICAqIHBsYWNlLlxuICAgKlxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufSBhRHVyYXRpb24gICAgICAgICBUaGUgZHVyYXRpb24gdG8gYWRkXG4gICAqL1xuICBhZGREdXJhdGlvbihhRHVyYXRpb24pIHtcbiAgICBsZXQgbXVsdCA9IChhRHVyYXRpb24uaXNOZWdhdGl2ZSA/IC0xIDogMSk7XG5cbiAgICAvLyBiZWNhdXNlIG9mIHRoZSBkdXJhdGlvbiBvcHRpbWl6YXRpb25zIGl0IGlzIG11Y2hcbiAgICAvLyBtb3JlIGVmZmljaWVudCB0byBncmFiIGFsbCB0aGUgdmFsdWVzIHVwIGZyb250XG4gICAgLy8gdGhlbiBzZXQgdGhlbSBkaXJlY3RseSAod2hpY2ggd2lsbCBhdm9pZCBhIG5vcm1hbGl6YXRpb24gY2FsbCkuXG4gICAgLy8gU28gd2UgZG9uJ3QgYWN0dWFsbHkgbm9ybWFsaXplIHVudGlsIHdlIG5lZWQgaXQuXG4gICAgbGV0IHNlY29uZCA9IHRoaXMuc2Vjb25kO1xuICAgIGxldCBtaW51dGUgPSB0aGlzLm1pbnV0ZTtcbiAgICBsZXQgaG91ciA9IHRoaXMuaG91cjtcbiAgICBsZXQgZGF5ID0gdGhpcy5kYXk7XG5cbiAgICBzZWNvbmQgKz0gbXVsdCAqIGFEdXJhdGlvbi5zZWNvbmRzO1xuICAgIG1pbnV0ZSArPSBtdWx0ICogYUR1cmF0aW9uLm1pbnV0ZXM7XG4gICAgaG91ciArPSBtdWx0ICogYUR1cmF0aW9uLmhvdXJzO1xuICAgIGRheSArPSBtdWx0ICogYUR1cmF0aW9uLmRheXM7XG4gICAgZGF5ICs9IG11bHQgKiA3ICogYUR1cmF0aW9uLndlZWtzO1xuXG4gICAgdGhpcy5zZWNvbmQgPSBzZWNvbmQ7XG4gICAgdGhpcy5taW51dGUgPSBtaW51dGU7XG4gICAgdGhpcy5ob3VyID0gaG91cjtcbiAgICB0aGlzLmRheSA9IGRheTtcblxuICAgIHRoaXMuX2NhY2hlZFVuaXhUaW1lID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJ0cmFjdCB0aGUgZGF0ZSBkZXRhaWxzIChfZXhjbHVkaW5nXyB0aW1lem9uZSkuICBVc2VmdWwgZm9yIGZpbmRpbmdcbiAgICogdGhlIHJlbGF0aXZlIGRpZmZlcmVuY2UgYmV0d2VlbiB0d28gdGltZSBvYmplY3RzIGV4Y2x1ZGluZyB0aGVpclxuICAgKiB0aW1lem9uZSBkaWZmZXJlbmNlcy5cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lfSBhRGF0ZSAgICAgVGhlIGRhdGUgdG8gc3VidHJhY3RcbiAgICogQHJldHVybiB7RHVyYXRpb259ICAgICAgVGhlIGRpZmZlcmVuY2UgYXMgYSBkdXJhdGlvblxuICAgKi9cbiAgc3VidHJhY3REYXRlKGFEYXRlKSB7XG4gICAgbGV0IHVuaXhUaW1lID0gdGhpcy50b1VuaXhUaW1lKCkgKyB0aGlzLnV0Y09mZnNldCgpO1xuICAgIGxldCBvdGhlciA9IGFEYXRlLnRvVW5peFRpbWUoKSArIGFEYXRlLnV0Y09mZnNldCgpO1xuICAgIHJldHVybiBEdXJhdGlvbi5mcm9tU2Vjb25kcyh1bml4VGltZSAtIG90aGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJ0cmFjdCB0aGUgZGF0ZSBkZXRhaWxzLCB0YWtpbmcgdGltZXpvbmVzIGludG8gYWNjb3VudC5cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lfSBhRGF0ZSAgVGhlIGRhdGUgdG8gc3VidHJhY3RcbiAgICogQHJldHVybiB7RHVyYXRpb259ICAgVGhlIGRpZmZlcmVuY2UgaW4gZHVyYXRpb25cbiAgICovXG4gIHN1YnRyYWN0RGF0ZVR6KGFEYXRlKSB7XG4gICAgbGV0IHVuaXhUaW1lID0gdGhpcy50b1VuaXhUaW1lKCk7XG4gICAgbGV0IG90aGVyID0gYURhdGUudG9Vbml4VGltZSgpO1xuICAgIHJldHVybiBEdXJhdGlvbi5mcm9tU2Vjb25kcyh1bml4VGltZSAtIG90aGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wYXJlcyB0aGUgSUNBTC5UaW1lIGluc3RhbmNlIHdpdGggYW5vdGhlciBvbmUsIG9yIGEgcGVyaW9kLlxuICAgKlxuICAgKiBAcGFyYW0ge1RpbWV8UGVyaW9kfSBhT3RoZXIgICAgICAgICAgICAgICAgICBUaGUgaW5zdGFuY2UgdG8gY29tcGFyZSB3aXRoXG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0xLCAwIG9yIDEgZm9yIGxlc3MvZXF1YWwvZ3JlYXRlclxuICAgKi9cbiAgY29tcGFyZShvdGhlcikge1xuICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIFBlcmlvZCkge1xuICAgICAgcmV0dXJuIC0xICogb3RoZXIuY29tcGFyZSh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGEgPSB0aGlzLnRvVW5peFRpbWUoKTtcbiAgICAgIGxldCBiID0gb3RoZXIudG9Vbml4VGltZSgpO1xuXG4gICAgICBpZiAoYSA+IGIpIHJldHVybiAxO1xuICAgICAgaWYgKGIgPiBhKSByZXR1cm4gLTE7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29tcGFyZXMgb25seSB0aGUgZGF0ZSBwYXJ0IG9mIHRoaXMgaW5zdGFuY2Ugd2l0aCBhbm90aGVyIG9uZS5cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lfSBvdGhlciAgICAgICAgICAgICAgICAgIFRoZSBpbnN0YW5jZSB0byBjb21wYXJlIHdpdGhcbiAgICogQHBhcmFtIHtUaW1lem9uZX0gdHogICAgICAgICAgICAgICAgIFRoZSB0aW1lem9uZSB0byBjb21wYXJlIGluXG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAgICAgICAgICAtMSwgMCBvciAxIGZvciBsZXNzL2VxdWFsL2dyZWF0ZXJcbiAgICovXG4gIGNvbXBhcmVEYXRlT25seVR6KG90aGVyLCB0eikge1xuICAgIGxldCBhID0gdGhpcy5jb252ZXJ0VG9ab25lKHR6KTtcbiAgICBsZXQgYiA9IG90aGVyLmNvbnZlcnRUb1pvbmUodHopO1xuICAgIGxldCByYyA9IDA7XG5cbiAgICBpZiAoKHJjID0gVGltZS5fY21wX2F0dHIoYSwgYiwgXCJ5ZWFyXCIpKSAhPSAwKSByZXR1cm4gcmM7XG4gICAgaWYgKChyYyA9IFRpbWUuX2NtcF9hdHRyKGEsIGIsIFwibW9udGhcIikpICE9IDApIHJldHVybiByYztcbiAgICBpZiAoKHJjID0gVGltZS5fY21wX2F0dHIoYSwgYiwgXCJkYXlcIikpICE9IDApIHJldHVybiByYztcblxuICAgIHJldHVybiByYztcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IHRoZSBpbnN0YW5jZSBpbnRvIGFub3RoZXIgdGltZXpvbmUuIFRoZSByZXR1cm5lZCBJQ0FMLlRpbWVcbiAgICogaW5zdGFuY2UgaXMgYWx3YXlzIGEgY29weS5cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lem9uZX0gem9uZSAgICAgIFRoZSB6b25lIHRvIGNvbnZlcnQgdG9cbiAgICogQHJldHVybiB7VGltZX0gICAgICAgICAgICAgIFRoZSBjb3B5LCBjb252ZXJ0ZWQgdG8gdGhlIHpvbmVcbiAgICovXG4gIGNvbnZlcnRUb1pvbmUoem9uZSkge1xuICAgIGxldCBjb3B5ID0gdGhpcy5jbG9uZSgpO1xuICAgIGxldCB6b25lX2VxdWFscyA9ICh0aGlzLnpvbmUudHppZCA9PSB6b25lLnR6aWQpO1xuXG4gICAgaWYgKCF0aGlzLmlzRGF0ZSAmJiAhem9uZV9lcXVhbHMpIHtcbiAgICAgIFRpbWV6b25lLmNvbnZlcnRfdGltZShjb3B5LCB0aGlzLnpvbmUsIHpvbmUpO1xuICAgIH1cblxuICAgIGNvcHkuem9uZSA9IHpvbmU7XG4gICAgcmV0dXJuIGNvcHk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlcyB0aGUgVVRDIG9mZnNldCBvZiB0aGUgY3VycmVudCBkYXRlL3RpbWUgaW4gdGhlIHRpbWV6b25lIGl0IGlzXG4gICAqIGluLlxuICAgKlxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICBVVEMgb2Zmc2V0IGluIHNlY29uZHNcbiAgICovXG4gIHV0Y09mZnNldCgpIHtcbiAgICBpZiAodGhpcy56b25lID09IFRpbWV6b25lLmxvY2FsVGltZXpvbmUgfHxcbiAgICAgICAgdGhpcy56b25lID09IFRpbWV6b25lLnV0Y1RpbWV6b25lKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuem9uZS51dGNPZmZzZXQodGhpcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gUkZDIDU1NDUgY29tcGxpYW50IGljYWwgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBvYmplY3QuXG4gICAqXG4gICAqIEByZXR1cm4ge1N0cmluZ30gaWNhbCBkYXRlL2RhdGUtdGltZVxuICAgKi9cbiAgdG9JQ0FMU3RyaW5nKCkge1xuICAgIGxldCBzdHJpbmcgPSB0aGlzLnRvU3RyaW5nKCk7XG5cbiAgICBpZiAoc3RyaW5nLmxlbmd0aCA+IDEwKSB7XG4gICAgICByZXR1cm4gZGVzaWduLmljYWxlbmRhci52YWx1ZVsnZGF0ZS10aW1lJ10udG9JQ0FMKHN0cmluZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBkZXNpZ24uaWNhbGVuZGFyLnZhbHVlLmRhdGUudG9JQ0FMKHN0cmluZyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBkYXRlL3RpbWUsIGluIGpDYWwgZm9ybVxuICAgKiAoaW5jbHVkaW5nIDogYW5kIC0gc2VwYXJhdG9ycykuXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIHRvU3RyaW5nKCkge1xuICAgIGxldCByZXN1bHQgPSB0aGlzLnllYXIgKyAnLScgK1xuICAgICAgICAgICAgICAgICBwYWQyKHRoaXMubW9udGgpICsgJy0nICtcbiAgICAgICAgICAgICAgICAgcGFkMih0aGlzLmRheSk7XG5cbiAgICBpZiAoIXRoaXMuaXNEYXRlKSB7XG4gICAgICAgIHJlc3VsdCArPSAnVCcgKyBwYWQyKHRoaXMuaG91cikgKyAnOicgK1xuICAgICAgICAgICAgICAgICAgcGFkMih0aGlzLm1pbnV0ZSkgKyAnOicgK1xuICAgICAgICAgICAgICAgICAgcGFkMih0aGlzLnNlY29uZCk7XG5cbiAgICAgIGlmICh0aGlzLnpvbmUgPT09IFRpbWV6b25lLnV0Y1RpbWV6b25lKSB7XG4gICAgICAgIHJlc3VsdCArPSAnWic7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0aGUgY3VycmVudCBpbnN0YW5jZSB0byBhIEphdmFzY3JpcHQgZGF0ZVxuICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgKi9cbiAgdG9KU0RhdGUoKSB7XG4gICAgaWYgKHRoaXMuem9uZSA9PSBUaW1lem9uZS5sb2NhbFRpbWV6b25lKSB7XG4gICAgICBpZiAodGhpcy5pc0RhdGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMueWVhciwgdGhpcy5tb250aCAtIDEsIHRoaXMuZGF5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnllYXIsIHRoaXMubW9udGggLSAxLCB0aGlzLmRheSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaG91ciwgdGhpcy5taW51dGUsIHRoaXMuc2Vjb25kLCAwKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMudG9Vbml4VGltZSgpICogMTAwMCk7XG4gICAgfVxuICB9XG5cbiAgX25vcm1hbGl6ZSgpIHtcbiAgICBpZiAodGhpcy5fdGltZS5pc0RhdGUpIHtcbiAgICAgIHRoaXMuX3RpbWUuaG91ciA9IDA7XG4gICAgICB0aGlzLl90aW1lLm1pbnV0ZSA9IDA7XG4gICAgICB0aGlzLl90aW1lLnNlY29uZCA9IDA7XG4gICAgfVxuICAgIHRoaXMuYWRqdXN0KDAsIDAsIDAsIDApO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQWRqdXN0IHRoZSBkYXRlL3RpbWUgYnkgdGhlIGdpdmVuIG9mZnNldFxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gYUV4dHJhRGF5cyAgICAgICBUaGUgZXh0cmEgYW1vdW50IG9mIGRheXNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFFeHRyYUhvdXJzICAgICAgVGhlIGV4dHJhIGFtb3VudCBvZiBob3Vyc1xuICAgKiBAcGFyYW0ge051bWJlcn0gYUV4dHJhTWludXRlcyAgICBUaGUgZXh0cmEgYW1vdW50IG9mIG1pbnV0ZXNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFFeHRyYVNlY29uZHMgICAgVGhlIGV4dHJhIGFtb3VudCBvZiBzZWNvbmRzXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYVRpbWUgICAgICAgICAgIFRoZSB0aW1lIHRvIGFkanVzdCwgZGVmYXVsdHMgdG8gdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudCBpbnN0YW5jZS5cbiAgICovXG4gIGFkanVzdChhRXh0cmFEYXlzLCBhRXh0cmFIb3VycywgYUV4dHJhTWludXRlcywgYUV4dHJhU2Vjb25kcywgYVRpbWUpIHtcblxuICAgIGxldCBtaW51dGVzT3ZlcmZsb3csIGhvdXJzT3ZlcmZsb3csXG4gICAgICAgIGRheXNPdmVyZmxvdyA9IDAsIHllYXJzT3ZlcmZsb3cgPSAwO1xuXG4gICAgbGV0IHNlY29uZCwgbWludXRlLCBob3VyLCBkYXk7XG4gICAgbGV0IGRheXNJbk1vbnRoO1xuXG4gICAgbGV0IHRpbWUgPSBhVGltZSB8fCB0aGlzLl90aW1lO1xuXG4gICAgaWYgKCF0aW1lLmlzRGF0ZSkge1xuICAgICAgc2Vjb25kID0gdGltZS5zZWNvbmQgKyBhRXh0cmFTZWNvbmRzO1xuICAgICAgdGltZS5zZWNvbmQgPSBzZWNvbmQgJSA2MDtcbiAgICAgIG1pbnV0ZXNPdmVyZmxvdyA9IHRydW5jKHNlY29uZCAvIDYwKTtcbiAgICAgIGlmICh0aW1lLnNlY29uZCA8IDApIHtcbiAgICAgICAgdGltZS5zZWNvbmQgKz0gNjA7XG4gICAgICAgIG1pbnV0ZXNPdmVyZmxvdy0tO1xuICAgICAgfVxuXG4gICAgICBtaW51dGUgPSB0aW1lLm1pbnV0ZSArIGFFeHRyYU1pbnV0ZXMgKyBtaW51dGVzT3ZlcmZsb3c7XG4gICAgICB0aW1lLm1pbnV0ZSA9IG1pbnV0ZSAlIDYwO1xuICAgICAgaG91cnNPdmVyZmxvdyA9IHRydW5jKG1pbnV0ZSAvIDYwKTtcbiAgICAgIGlmICh0aW1lLm1pbnV0ZSA8IDApIHtcbiAgICAgICAgdGltZS5taW51dGUgKz0gNjA7XG4gICAgICAgIGhvdXJzT3ZlcmZsb3ctLTtcbiAgICAgIH1cblxuICAgICAgaG91ciA9IHRpbWUuaG91ciArIGFFeHRyYUhvdXJzICsgaG91cnNPdmVyZmxvdztcblxuICAgICAgdGltZS5ob3VyID0gaG91ciAlIDI0O1xuICAgICAgZGF5c092ZXJmbG93ID0gdHJ1bmMoaG91ciAvIDI0KTtcbiAgICAgIGlmICh0aW1lLmhvdXIgPCAwKSB7XG4gICAgICAgIHRpbWUuaG91ciArPSAyNDtcbiAgICAgICAgZGF5c092ZXJmbG93LS07XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICAvLyBBZGp1c3QgbW9udGggYW5kIHllYXIgZmlyc3QsIGJlY2F1c2Ugd2UgbmVlZCB0byBrbm93IHdoYXQgbW9udGggdGhlIGRheVxuICAgIC8vIGlzIGluIGJlZm9yZSBhZGp1c3RpbmcgaXQuXG4gICAgaWYgKHRpbWUubW9udGggPiAxMikge1xuICAgICAgeWVhcnNPdmVyZmxvdyA9IHRydW5jKCh0aW1lLm1vbnRoIC0gMSkgLyAxMik7XG4gICAgfSBlbHNlIGlmICh0aW1lLm1vbnRoIDwgMSkge1xuICAgICAgeWVhcnNPdmVyZmxvdyA9IHRydW5jKHRpbWUubW9udGggLyAxMikgLSAxO1xuICAgIH1cblxuICAgIHRpbWUueWVhciArPSB5ZWFyc092ZXJmbG93O1xuICAgIHRpbWUubW9udGggLT0gMTIgKiB5ZWFyc092ZXJmbG93O1xuXG4gICAgLy8gTm93IHRha2UgY2FyZSBvZiB0aGUgZGF5cyAoYW5kIGFkanVzdCBtb250aCBpZiBuZWVkZWQpXG4gICAgZGF5ID0gdGltZS5kYXkgKyBhRXh0cmFEYXlzICsgZGF5c092ZXJmbG93O1xuXG4gICAgaWYgKGRheSA+IDApIHtcbiAgICAgIGZvciAoOzspIHtcbiAgICAgICAgZGF5c0luTW9udGggPSBUaW1lLmRheXNJbk1vbnRoKHRpbWUubW9udGgsIHRpbWUueWVhcik7XG4gICAgICAgIGlmIChkYXkgPD0gZGF5c0luTW9udGgpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHRpbWUubW9udGgrKztcbiAgICAgICAgaWYgKHRpbWUubW9udGggPiAxMikge1xuICAgICAgICAgIHRpbWUueWVhcisrO1xuICAgICAgICAgIHRpbWUubW9udGggPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF5IC09IGRheXNJbk1vbnRoO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB3aGlsZSAoZGF5IDw9IDApIHtcbiAgICAgICAgaWYgKHRpbWUubW9udGggPT0gMSkge1xuICAgICAgICAgIHRpbWUueWVhci0tO1xuICAgICAgICAgIHRpbWUubW9udGggPSAxMjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aW1lLm1vbnRoLS07XG4gICAgICAgIH1cblxuICAgICAgICBkYXkgKz0gVGltZS5kYXlzSW5Nb250aCh0aW1lLm1vbnRoLCB0aW1lLnllYXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRpbWUuZGF5ID0gZGF5O1xuXG4gICAgdGhpcy5fY2FjaGVkVW5peFRpbWUgPSBudWxsO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgdGhlIGN1cnJlbnQgaW5zdGFuY2UgZnJvbSB1bml4IHRpbWUsIHRoZSBudW1iZXIgb2Ygc2Vjb25kcyBzaW5jZVxuICAgKiBKYW51YXJ5IDFzdCwgMTk3MC5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHNlY29uZHMgICAgICBUaGUgc2Vjb25kcyB0byBzZXQgdXAgd2l0aFxuICAgKi9cbiAgZnJvbVVuaXhUaW1lKHNlY29uZHMpIHtcbiAgICB0aGlzLnpvbmUgPSBUaW1lem9uZS51dGNUaW1lem9uZTtcbiAgICAvLyBXZSBjb3VsZCB1c2UgYGZyb21KU0RhdGVgIGhlcmUsIGJ1dCB0aGlzIGlzIGFib3V0IHR3aWNlIGFzIGZhc3QuXG4gICAgLy8gV2UgY291bGQgYWxzbyBjbG9uZSBgZXBvY2hUaW1lYCBhbmQgdXNlIGBhZGp1c3RgIGZvciBhIG1vcmVcbiAgICAvLyBpY2FsLmpzLWNlbnRyaWMgYXBwcm9hY2gsIGJ1dCB0aGlzIGlzIGFib3V0IDEwMCB0aW1lcyBhcyBmYXN0LlxuICAgIGxldCBkYXRlID0gbmV3IERhdGUoc2Vjb25kcyAqIDEwMDApO1xuICAgIHRoaXMueWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgICB0aGlzLm1vbnRoID0gZGF0ZS5nZXRVVENNb250aCgpICsgMTtcbiAgICB0aGlzLmRheSA9IGRhdGUuZ2V0VVRDRGF0ZSgpO1xuICAgIGlmICh0aGlzLl90aW1lLmlzRGF0ZSkge1xuICAgICAgdGhpcy5ob3VyID0gMDtcbiAgICAgIHRoaXMubWludXRlID0gMDtcbiAgICAgIHRoaXMuc2Vjb25kID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ob3VyID0gZGF0ZS5nZXRVVENIb3VycygpO1xuICAgICAgdGhpcy5taW51dGUgPSBkYXRlLmdldFVUQ01pbnV0ZXMoKTtcbiAgICAgIHRoaXMuc2Vjb25kID0gZGF0ZS5nZXRVVENTZWNvbmRzKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fY2FjaGVkVW5peFRpbWUgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIHRoZSBjdXJyZW50IGluc3RhbmNlIHRvIHNlY29uZHMgc2luY2UgSmFudWFyeSAxc3QgMTk3MC5cbiAgICpcbiAgICogQHJldHVybiB7TnVtYmVyfSAgICAgICAgIFNlY29uZHMgc2luY2UgMTk3MFxuICAgKi9cbiAgdG9Vbml4VGltZSgpIHtcbiAgICBpZiAodGhpcy5fY2FjaGVkVW5peFRpbWUgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRVbml4VGltZTtcbiAgICB9XG4gICAgbGV0IG9mZnNldCA9IHRoaXMudXRjT2Zmc2V0KCk7XG5cbiAgICAvLyB3ZSB1c2UgdGhlIG9mZnNldCB0cmljayB0byBlbnN1cmVcbiAgICAvLyB0aGF0IHdlIGFyZSBnZXR0aW5nIHRoZSBhY3R1YWwgVVRDIHRpbWVcbiAgICBsZXQgbXMgPSBEYXRlLlVUQyhcbiAgICAgIHRoaXMueWVhcixcbiAgICAgIHRoaXMubW9udGggLSAxLFxuICAgICAgdGhpcy5kYXksXG4gICAgICB0aGlzLmhvdXIsXG4gICAgICB0aGlzLm1pbnV0ZSxcbiAgICAgIHRoaXMuc2Vjb25kIC0gb2Zmc2V0XG4gICAgKTtcblxuICAgIC8vIHNlY29uZHNcbiAgICB0aGlzLl9jYWNoZWRVbml4VGltZSA9IG1zIC8gMTAwMDtcbiAgICByZXR1cm4gdGhpcy5fY2FjaGVkVW5peFRpbWU7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgdGltZSB0byBpbnRvIE9iamVjdCB3aGljaCBjYW4gYmUgc2VyaWFsaXplZCB0aGVuIHJlLWNyZWF0ZWRcbiAgICogdXNpbmcgdGhlIGNvbnN0cnVjdG9yLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAvLyB0b0pTT04gd2lsbCBhdXRvbWF0aWNhbGx5IGJlIGNhbGxlZFxuICAgKiB2YXIganNvbiA9IEpTT04uc3RyaW5naWZ5KG15dGltZSk7XG4gICAqXG4gICAqIHZhciBkZXNlcmlhbGl6ZWQgPSBKU09OLnBhcnNlKGpzb24pO1xuICAgKlxuICAgKiB2YXIgdGltZSA9IG5ldyBJQ0FMLlRpbWUoZGVzZXJpYWxpemVkKTtcbiAgICpcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgdG9KU09OKCkge1xuICAgIGxldCBjb3B5ID0gW1xuICAgICAgJ3llYXInLFxuICAgICAgJ21vbnRoJyxcbiAgICAgICdkYXknLFxuICAgICAgJ2hvdXInLFxuICAgICAgJ21pbnV0ZScsXG4gICAgICAnc2Vjb25kJyxcbiAgICAgICdpc0RhdGUnXG4gICAgXTtcblxuICAgIGxldCByZXN1bHQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCBsZW4gPSBjb3B5Lmxlbmd0aDtcbiAgICBsZXQgcHJvcDtcblxuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHByb3AgPSBjb3B5W2ldO1xuICAgICAgcmVzdWx0W3Byb3BdID0gdGhpc1twcm9wXTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy56b25lKSB7XG4gICAgICByZXN1bHQudGltZXpvbmUgPSB0aGlzLnpvbmUudHppZDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG5cbi8qIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKiBQb3J0aW9ucyBDb3B5cmlnaHQgKEMpIFBoaWxpcHAgS2V3aXNjaCAqL1xuXG5cbi8qKlxuICogVGhpcyBsZXRzIHR5cGVzY3JpcHQgcmVzb2x2ZSBvdXIgY3VzdG9tIHR5cGVzIGluIHRoZVxuICogZ2VuZXJhdGVkIGQudHMgZmlsZXMgKGpzZG9jIHR5cGVkZWZzIGFyZSBjb252ZXJ0ZWQgdG8gdHlwZXNjcmlwdCB0eXBlcykuXG4gKiBJZ25vcmUgcHJldmVudHMgdGhlIHR5cGVkZWZzIGZyb20gYmVpbmcgZG9jdW1lbnRlZCBtb3JlIHRoYW4gb25jZS5cbiAqXG4gKiBAaWdub3JlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS5wYXJzZXJTdGF0ZX0gcGFyc2VyU3RhdGVcbiAqIEltcG9ydHMgdGhlICdwYXJzZXJTdGF0ZScgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS5kZXNpZ25TZXR9IGRlc2lnblNldFxuICogSW1wb3J0cyB0aGUgJ2Rlc2lnblNldCcgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKi9cblxuY29uc3QgQ0hBUiA9IC9bXiBcXHRdLztcbmNvbnN0IFZBTFVFX0RFTElNSVRFUiA9ICc6JztcbmNvbnN0IFBBUkFNX0RFTElNSVRFUiA9ICc7JztcbmNvbnN0IFBBUkFNX05BTUVfREVMSU1JVEVSID0gJz0nO1xuY29uc3QgREVGQVVMVF9WQUxVRV9UWVBFJDEgPSAndW5rbm93bic7XG5jb25zdCBERUZBVUxUX1BBUkFNX1RZUEUgPSAndGV4dCc7XG5jb25zdCBSRkM2ODY4X1JFUExBQ0VfTUFQJDEgPSB7IFwiXidcIjogJ1wiJywgXCJeblwiOiBcIlxcblwiLCBcIl5eXCI6IFwiXlwiIH07XG5cbi8qKlxuICogUGFyc2VzIGlDYWxlbmRhciBvciB2Q2FyZCBkYXRhIGludG8gYSByYXcgakNhbCBvYmplY3QuIENvbnN1bHRcbiAqIGRvY3VtZW50YXRpb24gb24gdGhlIHtAdHV0b3JpYWwgbGF5ZXJzfGxheWVycyBvZiBwYXJzaW5nfSBmb3IgbW9yZVxuICogZGV0YWlscy5cbiAqXG4gKiBAZnVuY3Rpb24gSUNBTC5wYXJzZVxuICogQG1lbWJlcm9mIElDQUxcbiAqIEB2YXJpYXRpb24gZnVuY3Rpb25cbiAqIEB0b2RvIEZpeCB0aGUgQVBJIHRvIGJlIG1vcmUgY2xlYXIgb24gdGhlIHJldHVybiB0eXBlXG4gKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgICAgICBUaGUgc3RyaW5nIGRhdGEgdG8gcGFyc2VcbiAqIEByZXR1cm4ge09iamVjdHxPYmplY3RbXX0gIEEgc2luZ2xlIGpDYWwgb2JqZWN0LCBvciBhbiBhcnJheSB0aGVyZW9mXG4gKi9cbmZ1bmN0aW9uIHBhcnNlKGlucHV0KSB7XG4gIGxldCBzdGF0ZSA9IHt9O1xuICBsZXQgcm9vdCA9IHN0YXRlLmNvbXBvbmVudCA9IFtdO1xuXG4gIHN0YXRlLnN0YWNrID0gW3Jvb3RdO1xuXG4gIHBhcnNlLl9lYWNoTGluZShpbnB1dCwgZnVuY3Rpb24oZXJyLCBsaW5lKSB7XG4gICAgcGFyc2UuX2hhbmRsZUNvbnRlbnRMaW5lKGxpbmUsIHN0YXRlKTtcbiAgfSk7XG5cblxuICAvLyB3aGVuIHRoZXJlIGFyZSBzdGlsbCBpdGVtcyBvbiB0aGUgc3RhY2tcbiAgLy8gdGhyb3cgYSBmYXRhbCBlcnJvciwgYSBjb21wb25lbnQgd2FzIG5vdCBjbG9zZWRcbiAgLy8gY29ycmVjdGx5IGluIHRoYXQgY2FzZS5cbiAgaWYgKHN0YXRlLnN0YWNrLmxlbmd0aCA+IDEpIHtcbiAgICB0aHJvdyBuZXcgUGFyc2VyRXJyb3IoXG4gICAgICAnaW52YWxpZCBpY2FsIGJvZHkuIGNvbXBvbmVudCBiZWdhbiBidXQgZGlkIG5vdCBlbmQnXG4gICAgKTtcbiAgfVxuXG4gIHN0YXRlID0gbnVsbDtcblxuICByZXR1cm4gKHJvb3QubGVuZ3RoID09IDEgPyByb290WzBdIDogcm9vdCk7XG59XG5cbi8qKlxuICogUGFyc2UgYW4gaUNhbGVuZGFyIHByb3BlcnR5IHZhbHVlIGludG8gdGhlIGpDYWwgZm9yIGEgc2luZ2xlIHByb3BlcnR5XG4gKlxuICogQGZ1bmN0aW9uIElDQUwucGFyc2UucHJvcGVydHlcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqICAgVGhlIGlDYWxlbmRhciBwcm9wZXJ0eSBzdHJpbmcgdG8gcGFyc2VcbiAqIEBwYXJhbSB7ZGVzaWduU2V0PX0gZGVzaWduU2V0XG4gKiAgIFRoZSBkZXNpZ24gZGF0YSB0byB1c2UgZm9yIHRoaXMgcHJvcGVydHlcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqICAgVGhlIGpDYWwgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIHByb3BlcnR5XG4gKi9cbnBhcnNlLnByb3BlcnR5ID0gZnVuY3Rpb24oc3RyLCBkZXNpZ25TZXQpIHtcbiAgbGV0IHN0YXRlID0ge1xuICAgIGNvbXBvbmVudDogW1tdLCBbXV0sXG4gICAgZGVzaWduU2V0OiBkZXNpZ25TZXQgfHwgZGVzaWduLmRlZmF1bHRTZXRcbiAgfTtcbiAgcGFyc2UuX2hhbmRsZUNvbnRlbnRMaW5lKHN0ciwgc3RhdGUpO1xuICByZXR1cm4gc3RhdGUuY29tcG9uZW50WzFdWzBdO1xufTtcblxuLyoqXG4gKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcGFyc2UgYSBjb21wb25lbnQuIFlvdSBjYW4gdXNlIElDQUwucGFyc2UoKSBkaXJlY3RseVxuICogaW5zdGVhZC5cbiAqXG4gKiBAZnVuY3Rpb24gSUNBTC5wYXJzZS5jb21wb25lbnRcbiAqIEBzZWUgSUNBTC5wYXJzZShmdW5jdGlvbilcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgICAgVGhlIGlDYWxlbmRhciBjb21wb25lbnQgc3RyaW5nIHRvIHBhcnNlXG4gKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgIFRoZSBqQ2FsIE9iamVjdCBjb250YWluaW5nIHRoZSBjb21wb25lbnRcbiAqL1xucGFyc2UuY29tcG9uZW50ID0gZnVuY3Rpb24oc3RyKSB7XG4gIHJldHVybiBwYXJzZShzdHIpO1xufTtcblxuXG4vKipcbiAqIEFuIGVycm9yIHRoYXQgb2NjdXJyZWQgZHVyaW5nIHBhcnNpbmcuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgICAgICAgIFRoZSBlcnJvciBtZXNzYWdlXG4gKiBAbWVtYmVyb2YgSUNBTC5wYXJzZVxuICogQGV4dGVuZHMge0Vycm9yfVxuICovXG5jbGFzcyBQYXJzZXJFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgbmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcbn1cblxuLy8gY2xhc3NlcyAmIGNvbnN0YW50c1xucGFyc2UuUGFyc2VyRXJyb3IgPSBQYXJzZXJFcnJvcjtcblxuXG4vKipcbiAqIEhhbmRsZXMgYSBzaW5nbGUgbGluZSBvZiBpQ2FsZW5kYXIvdkNhcmQsIHVwZGF0aW5nIHRoZSBzdGF0ZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGZ1bmN0aW9uIElDQUwucGFyc2UuX2hhbmRsZUNvbnRlbnRMaW5lXG4gKiBAcGFyYW0ge1N0cmluZ30gbGluZSAgICAgICAgICBUaGUgY29udGVudCBsaW5lIHRvIHByb2Nlc3NcbiAqIEBwYXJhbSB7cGFyc2VyU3RhdGV9IHN0YXRlICAgIFRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBsaW5lIHBhcnNpbmdcbiAqL1xucGFyc2UuX2hhbmRsZUNvbnRlbnRMaW5lID0gZnVuY3Rpb24obGluZSwgc3RhdGUpIHtcbiAgLy8gYnJlYWsgdXAgdGhlIHBhcnRzIG9mIHRoZSBsaW5lXG4gIGxldCB2YWx1ZVBvcyA9IGxpbmUuaW5kZXhPZihWQUxVRV9ERUxJTUlURVIpO1xuICBsZXQgcGFyYW1Qb3MgPSBsaW5lLmluZGV4T2YoUEFSQU1fREVMSU1JVEVSKTtcblxuICBsZXQgbGFzdFBhcmFtSW5kZXg7XG4gIGxldCBsYXN0VmFsdWVQb3M7XG5cbiAgLy8gbmFtZSBvZiBwcm9wZXJ0eSBvciBiZWdpbi9lbmRcbiAgbGV0IG5hbWU7XG4gIGxldCB2YWx1ZTtcbiAgLy8gcGFyYW1zIGlzIG9ubHkgb3ZlcnJpZGRlbiBpZiBwYXJhbVBvcyAhPT0gLTEuXG4gIC8vIHdlIGNhbid0IGRvIHBhcmFtcyA9IHBhcmFtcyB8fCB7fSBsYXRlciBvblxuICAvLyBiZWNhdXNlIGl0IHNhY3JpZmljZXMgb3BzLlxuICBsZXQgcGFyYW1zID0ge307XG5cbiAgLyoqXG4gICAqIERpZmZlcmVudCBwcm9wZXJ0eSBjYXNlc1xuICAgKlxuICAgKlxuICAgKiAxLiBSUlVMRTpGUkVRPWZvb1xuICAgKiAgICAvLyBGUkVRPSBpcyBub3QgYSBwYXJhbSBidXQgdGhlIHZhbHVlXG4gICAqXG4gICAqIDIuIEFUVEVOREVFO1JPTEU9UkVRLVBBUlRJQ0lQQU5UO1xuICAgKiAgICAvLyBST0xFPSBpcyBhIHBhcmFtIGJlY2F1c2UgOiBoYXMgbm90IGhhcHBlbmVkIHlldFxuICAgKi9cbiAgICAvLyB3aGVuIHRoZSBwYXJhbWV0ZXIgZGVsaW1pdGVyIGlzIGFmdGVyIHRoZVxuICAgIC8vIHZhbHVlIGRlbGltaXRlciB0aGVuIGl0IGlzIG5vdCBhIHBhcmFtZXRlci5cblxuICBpZiAoKHBhcmFtUG9zICE9PSAtMSAmJiB2YWx1ZVBvcyAhPT0gLTEpKSB7XG4gICAgLy8gd2hlbiB0aGUgcGFyYW1ldGVyIGRlbGltaXRlciBpcyBhZnRlciB0aGVcbiAgICAvLyB2YWx1ZSBkZWxpbWl0ZXIgdGhlbiBpdCBpcyBub3QgYSBwYXJhbWV0ZXIuXG4gICAgaWYgKHBhcmFtUG9zID4gdmFsdWVQb3MpIHtcbiAgICAgIHBhcmFtUG9zID0gLTE7XG4gICAgfVxuICB9XG5cbiAgbGV0IHBhcnNlZFBhcmFtcztcbiAgaWYgKHBhcmFtUG9zICE9PSAtMSkge1xuICAgIG5hbWUgPSBsaW5lLnNsaWNlKDAsIE1hdGgubWF4KDAsIHBhcmFtUG9zKSkudG9Mb3dlckNhc2UoKTtcbiAgICBwYXJzZWRQYXJhbXMgPSBwYXJzZS5fcGFyc2VQYXJhbWV0ZXJzKGxpbmUuc2xpY2UoTWF0aC5tYXgoMCwgcGFyYW1Qb3MpKSwgMCwgc3RhdGUuZGVzaWduU2V0KTtcbiAgICBpZiAocGFyc2VkUGFyYW1zWzJdID09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgUGFyc2VyRXJyb3IoXCJJbnZhbGlkIHBhcmFtZXRlcnMgaW4gJ1wiICsgbGluZSArIFwiJ1wiKTtcbiAgICB9XG4gICAgcGFyYW1zID0gcGFyc2VkUGFyYW1zWzBdO1xuICAgIC8vIEhhbmRsZSBwYXJhbWV0ZXIgdmFsdWVzIHdpdGggbXVsdGlwbGUgZW50cmllc1xuICAgIGxldCBwYXJzZWRQYXJhbUxlbmd0aDtcbiAgICBpZiAodHlwZW9mIHBhcnNlZFBhcmFtc1sxXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHBhcnNlZFBhcmFtTGVuZ3RoID0gcGFyc2VkUGFyYW1zWzFdLmxlbmd0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFyc2VkUGFyYW1MZW5ndGggPSBwYXJzZWRQYXJhbXNbMV0ucmVkdWNlKChhY2N1bXVsYXRvciwgY3VycmVudFZhbHVlKSA9PiB7XG4gICAgICAgIHJldHVybiBhY2N1bXVsYXRvciArIGN1cnJlbnRWYWx1ZS5sZW5ndGg7XG4gICAgICB9LCAwKTtcbiAgICB9XG4gICAgbGFzdFBhcmFtSW5kZXggPSBwYXJzZWRQYXJhbUxlbmd0aCArIHBhcnNlZFBhcmFtc1syXSArIHBhcmFtUG9zO1xuICAgIGlmICgobGFzdFZhbHVlUG9zID1cbiAgICAgIGxpbmUuc2xpY2UoTWF0aC5tYXgoMCwgbGFzdFBhcmFtSW5kZXgpKS5pbmRleE9mKFZBTFVFX0RFTElNSVRFUikpICE9PSAtMSkge1xuICAgICAgdmFsdWUgPSBsaW5lLnNsaWNlKE1hdGgubWF4KDAsIGxhc3RQYXJhbUluZGV4ICsgbGFzdFZhbHVlUG9zICsgMSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgUGFyc2VyRXJyb3IoXCJNaXNzaW5nIHBhcmFtZXRlciB2YWx1ZSBpbiAnXCIgKyBsaW5lICsgXCInXCIpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh2YWx1ZVBvcyAhPT0gLTEpIHtcbiAgICAvLyB3aXRob3V0IHBhcm1ldGVycyAoQkVHSU46VkNBRU5EQVIsIENMQVNTOlBVQkxJQylcbiAgICBuYW1lID0gbGluZS5zbGljZSgwLCBNYXRoLm1heCgwLCB2YWx1ZVBvcykpLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFsdWUgPSBsaW5lLnNsaWNlKE1hdGgubWF4KDAsIHZhbHVlUG9zICsgMSkpO1xuXG4gICAgaWYgKG5hbWUgPT09ICdiZWdpbicpIHtcbiAgICAgIGxldCBuZXdDb21wb25lbnQgPSBbdmFsdWUudG9Mb3dlckNhc2UoKSwgW10sIFtdXTtcbiAgICAgIGlmIChzdGF0ZS5zdGFjay5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgc3RhdGUuY29tcG9uZW50LnB1c2gobmV3Q29tcG9uZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLmNvbXBvbmVudFsyXS5wdXNoKG5ld0NvbXBvbmVudCk7XG4gICAgICB9XG4gICAgICBzdGF0ZS5zdGFjay5wdXNoKHN0YXRlLmNvbXBvbmVudCk7XG4gICAgICBzdGF0ZS5jb21wb25lbnQgPSBuZXdDb21wb25lbnQ7XG4gICAgICBpZiAoIXN0YXRlLmRlc2lnblNldCkge1xuICAgICAgICBzdGF0ZS5kZXNpZ25TZXQgPSBkZXNpZ24uZ2V0RGVzaWduU2V0KHN0YXRlLmNvbXBvbmVudFswXSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChuYW1lID09PSAnZW5kJykge1xuICAgICAgc3RhdGUuY29tcG9uZW50ID0gc3RhdGUuc3RhY2sucG9wKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIElmIGl0IGlzIG5vdCBiZWdpbi9lbmQsIHRoZW4gdGhpcyBpcyBhIHByb3BlcnR5IHdpdGggYW4gZW1wdHkgdmFsdWUsXG4gICAgLy8gd2hpY2ggc2hvdWxkIGJlIGNvbnNpZGVyZWQgdmFsaWQuXG4gIH0gZWxzZSB7XG4gICAgLyoqXG4gICAgICogSW52YWxpZCBsaW5lLlxuICAgICAqIFRoZSByYXRpb25hbCB0byB0aHJvdyBhbiBlcnJvciBpcyB3ZSB3aWxsXG4gICAgICogbmV2ZXIgYmUgY2VydGFpbiB0aGF0IHRoZSByZXN0IG9mIHRoZSBmaWxlXG4gICAgICogaXMgc2FuZSBhbmQgaXQgaXMgdW5saWtlbHkgdGhhdCB3ZSBjYW4gc2VyaWFsaXplXG4gICAgICogdGhlIHJlc3VsdCBjb3JyZWN0bHkgZWl0aGVyLlxuICAgICAqL1xuICAgIHRocm93IG5ldyBQYXJzZXJFcnJvcihcbiAgICAgICdpbnZhbGlkIGxpbmUgKG5vIHRva2VuIFwiO1wiIG9yIFwiOlwiKSBcIicgKyBsaW5lICsgJ1wiJ1xuICAgICk7XG4gIH1cblxuICBsZXQgdmFsdWVUeXBlO1xuICBsZXQgbXVsdGlWYWx1ZSA9IGZhbHNlO1xuICBsZXQgc3RydWN0dXJlZFZhbHVlID0gZmFsc2U7XG4gIGxldCBwcm9wZXJ0eURldGFpbHM7XG4gIGxldCBzcGxpdE5hbWU7XG4gIGxldCB1bmdyb3VwZWROYW1lO1xuXG4gIC8vIGZldGNoIHRoZSB1bmdyb3VwZWQgcGFydCBvZiB0aGUgbmFtZVxuICBpZiAoc3RhdGUuZGVzaWduU2V0LnByb3BlcnR5R3JvdXBzICYmIG5hbWUuaW5kZXhPZignLicpICE9PSAtMSkge1xuICAgIHNwbGl0TmFtZSA9IG5hbWUuc3BsaXQoJy4nKTtcbiAgICBwYXJhbXMuZ3JvdXAgPSBzcGxpdE5hbWVbMF07XG4gICAgdW5ncm91cGVkTmFtZSA9IHNwbGl0TmFtZVsxXTtcbiAgfSBlbHNlIHtcbiAgICB1bmdyb3VwZWROYW1lID0gbmFtZTtcbiAgfVxuXG4gIGlmICh1bmdyb3VwZWROYW1lIGluIHN0YXRlLmRlc2lnblNldC5wcm9wZXJ0eSkge1xuICAgIHByb3BlcnR5RGV0YWlscyA9IHN0YXRlLmRlc2lnblNldC5wcm9wZXJ0eVt1bmdyb3VwZWROYW1lXTtcblxuICAgIGlmICgnbXVsdGlWYWx1ZScgaW4gcHJvcGVydHlEZXRhaWxzKSB7XG4gICAgICBtdWx0aVZhbHVlID0gcHJvcGVydHlEZXRhaWxzLm11bHRpVmFsdWU7XG4gICAgfVxuXG4gICAgaWYgKCdzdHJ1Y3R1cmVkVmFsdWUnIGluIHByb3BlcnR5RGV0YWlscykge1xuICAgICAgc3RydWN0dXJlZFZhbHVlID0gcHJvcGVydHlEZXRhaWxzLnN0cnVjdHVyZWRWYWx1ZTtcbiAgICB9XG5cbiAgICBpZiAodmFsdWUgJiYgJ2RldGVjdFR5cGUnIGluIHByb3BlcnR5RGV0YWlscykge1xuICAgICAgdmFsdWVUeXBlID0gcHJvcGVydHlEZXRhaWxzLmRldGVjdFR5cGUodmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGF0dGVtcHQgdG8gZGV0ZXJtaW5lIHZhbHVlXG4gIGlmICghdmFsdWVUeXBlKSB7XG4gICAgaWYgKCEoJ3ZhbHVlJyBpbiBwYXJhbXMpKSB7XG4gICAgICBpZiAocHJvcGVydHlEZXRhaWxzKSB7XG4gICAgICAgIHZhbHVlVHlwZSA9IHByb3BlcnR5RGV0YWlscy5kZWZhdWx0VHlwZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlVHlwZSA9IERFRkFVTFRfVkFMVUVfVFlQRSQxO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBwb3NzaWJsZSB0byBhdm9pZCB0aGlzP1xuICAgICAgdmFsdWVUeXBlID0gcGFyYW1zLnZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuICB9XG5cbiAgZGVsZXRlIHBhcmFtcy52YWx1ZTtcblxuICAvKipcbiAgICogTm90ZSBvbiBgdmFyIHJlc3VsdGAganVnZ2xpbmc6XG4gICAqXG4gICAqIEkgb2JzZXJ2ZWQgdGhhdCBidWlsZGluZyB0aGUgYXJyYXkgaW4gcGllY2VzIGhhcyBhZHZlcnNlXG4gICAqIGVmZmVjdHMgb24gcGVyZm9ybWFuY2UsIHNvIHdoZXJlIHBvc3NpYmxlIHdlIGlubGluZSB0aGUgY3JlYXRpb24uXG4gICAqIEl0IGlzIGEgbGl0dGxlIHVnbHkgYnV0IHJlc3VsdGVkIGluIH4yMDAwIGFkZGl0aW9uYWwgb3BzL3NlYy5cbiAgICovXG5cbiAgbGV0IHJlc3VsdDtcbiAgaWYgKG11bHRpVmFsdWUgJiYgc3RydWN0dXJlZFZhbHVlKSB7XG4gICAgdmFsdWUgPSBwYXJzZS5fcGFyc2VNdWx0aVZhbHVlKHZhbHVlLCBzdHJ1Y3R1cmVkVmFsdWUsIHZhbHVlVHlwZSwgW10sIG11bHRpVmFsdWUsIHN0YXRlLmRlc2lnblNldCwgc3RydWN0dXJlZFZhbHVlKTtcbiAgICByZXN1bHQgPSBbdW5ncm91cGVkTmFtZSwgcGFyYW1zLCB2YWx1ZVR5cGUsIHZhbHVlXTtcbiAgfSBlbHNlIGlmIChtdWx0aVZhbHVlKSB7XG4gICAgcmVzdWx0ID0gW3VuZ3JvdXBlZE5hbWUsIHBhcmFtcywgdmFsdWVUeXBlXTtcbiAgICBwYXJzZS5fcGFyc2VNdWx0aVZhbHVlKHZhbHVlLCBtdWx0aVZhbHVlLCB2YWx1ZVR5cGUsIHJlc3VsdCwgbnVsbCwgc3RhdGUuZGVzaWduU2V0LCBmYWxzZSk7XG4gIH0gZWxzZSBpZiAoc3RydWN0dXJlZFZhbHVlKSB7XG4gICAgdmFsdWUgPSBwYXJzZS5fcGFyc2VNdWx0aVZhbHVlKHZhbHVlLCBzdHJ1Y3R1cmVkVmFsdWUsIHZhbHVlVHlwZSwgW10sIG51bGwsIHN0YXRlLmRlc2lnblNldCwgc3RydWN0dXJlZFZhbHVlKTtcbiAgICByZXN1bHQgPSBbdW5ncm91cGVkTmFtZSwgcGFyYW1zLCB2YWx1ZVR5cGUsIHZhbHVlXTtcbiAgfSBlbHNlIHtcbiAgICB2YWx1ZSA9IHBhcnNlLl9wYXJzZVZhbHVlKHZhbHVlLCB2YWx1ZVR5cGUsIHN0YXRlLmRlc2lnblNldCwgZmFsc2UpO1xuICAgIHJlc3VsdCA9IFt1bmdyb3VwZWROYW1lLCBwYXJhbXMsIHZhbHVlVHlwZSwgdmFsdWVdO1xuICB9XG4gIC8vIHJmYzYzNTAgcmVxdWlyZXMgdGhhdCBpbiB2Q2FyZCA0LjAgdGhlIGZpcnN0IGNvbXBvbmVudCBpcyB0aGUgVkVSU0lPTlxuICAvLyBjb21wb25lbnQgd2l0aCBhcyB2YWx1ZSA0LjAsIG5vdGUgdGhhdCAzLjAgZG9lcyBub3QgaGF2ZSB0aGlzIHJlcXVpcmVtZW50LlxuICBpZiAoc3RhdGUuY29tcG9uZW50WzBdID09PSAndmNhcmQnICYmIHN0YXRlLmNvbXBvbmVudFsxXS5sZW5ndGggPT09IDAgJiZcbiAgICAgICAgICAhKG5hbWUgPT09ICd2ZXJzaW9uJyAmJiB2YWx1ZSA9PT0gJzQuMCcpKSB7XG4gICAgc3RhdGUuZGVzaWduU2V0ID0gZGVzaWduLmdldERlc2lnblNldChcInZjYXJkM1wiKTtcbiAgfVxuICBzdGF0ZS5jb21wb25lbnRbMV0ucHVzaChyZXN1bHQpO1xufTtcblxuLyoqXG4gKiBQYXJzZSBhIHZhbHVlIGZyb20gdGhlIHJhdyB2YWx1ZSBpbnRvIHRoZSBqQ2FyZC9qQ2FsIHZhbHVlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAZnVuY3Rpb24gSUNBTC5wYXJzZS5fcGFyc2VWYWx1ZVxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlICAgICAgICAgIE9yaWdpbmFsIHZhbHVlXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAgICAgICAgICAgVHlwZSBvZiB2YWx1ZVxuICogQHBhcmFtIHtPYmplY3R9IGRlc2lnblNldCAgICAgIFRoZSBkZXNpZ24gZGF0YSB0byB1c2UgZm9yIHRoaXMgdmFsdWVcbiAqIEByZXR1cm4ge09iamVjdH0gdmFyaWVzIG9uIHR5cGVcbiAqL1xucGFyc2UuX3BhcnNlVmFsdWUgPSBmdW5jdGlvbih2YWx1ZSwgdHlwZSwgZGVzaWduU2V0LCBzdHJ1Y3R1cmVkVmFsdWUpIHtcbiAgaWYgKHR5cGUgaW4gZGVzaWduU2V0LnZhbHVlICYmICdmcm9tSUNBTCcgaW4gZGVzaWduU2V0LnZhbHVlW3R5cGVdKSB7XG4gICAgcmV0dXJuIGRlc2lnblNldC52YWx1ZVt0eXBlXS5mcm9tSUNBTCh2YWx1ZSwgc3RydWN0dXJlZFZhbHVlKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59O1xuXG4vKipcbiAqIFBhcnNlIHBhcmFtZXRlcnMgZnJvbSBhIHN0cmluZyB0byBvYmplY3QuXG4gKlxuICogQGZ1bmN0aW9uIElDQUwucGFyc2UuX3BhcnNlUGFyYW1ldGVyc1xuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBsaW5lICAgICAgICAgICAgICAgQSBzaW5nbGUgdW5mb2xkZWQgbGluZVxuICogQHBhcmFtIHtOdW1iZXJ9IHN0YXJ0ICAgICAgICAgICAgICBQb3NpdGlvbiB0byBzdGFydCBsb29raW5nIGZvciBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge09iamVjdH0gZGVzaWduU2V0ICAgICAgICAgIFRoZSBkZXNpZ24gZGF0YSB0byB1c2UgZm9yIHRoaXMgcHJvcGVydHlcbiAqIEByZXR1cm4ge0FycmF5fSAgICAgICAgICAgICAgICAgICAgQXJyYXkgY29udGFpbmluZyBrZXkvdmFseWUgcGFpcnMgb2YgcGFyc2VkIHBhcmFtZXRlcnMsIHRoZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZCB2YWx1ZSwgYW5kIHRoZSBwb3NpdGlvbiBvZiB0aGUgbGFzdCBwYXJhbWV0ZXIgZm91bmRcbiAqL1xucGFyc2UuX3BhcnNlUGFyYW1ldGVycyA9IGZ1bmN0aW9uKGxpbmUsIHN0YXJ0LCBkZXNpZ25TZXQpIHtcbiAgbGV0IGxhc3RQYXJhbSA9IHN0YXJ0O1xuICBsZXQgcG9zID0gMDtcbiAgbGV0IGRlbGltID0gUEFSQU1fTkFNRV9ERUxJTUlURVI7XG4gIGxldCByZXN1bHQgPSB7fTtcbiAgbGV0IG5hbWUsIGxjbmFtZTtcbiAgbGV0IHZhbHVlLCB2YWx1ZVBvcyA9IC0xO1xuICBsZXQgdHlwZSwgbXVsdGlWYWx1ZSwgbXZkZWxpbTtcblxuICAvLyBmaW5kIHRoZSBuZXh0ICc9JyBzaWduXG4gIC8vIHVzZSBsYXN0UGFyYW0gYW5kIHBvcyB0byBmaW5kIG5hbWVcbiAgLy8gY2hlY2sgaWYgXCIgaXMgdXNlZCBpZiBzbyBnZXQgdmFsdWUgZnJvbSBcIi0+XCJcbiAgLy8gdGhlbiBpbmNyZW1lbnQgcG9zIHRvIGZpbmQgbmV4dCA7XG5cbiAgd2hpbGUgKChwb3MgIT09IGZhbHNlKSAmJlxuICAgICAgICAgKHBvcyA9IGxpbmUuaW5kZXhPZihkZWxpbSwgcG9zICsgMSkpICE9PSAtMSkge1xuXG4gICAgbmFtZSA9IGxpbmUuc2xpY2UobGFzdFBhcmFtICsgMSwgcG9zKTtcbiAgICBpZiAobmFtZS5sZW5ndGggPT0gMCkge1xuICAgICAgdGhyb3cgbmV3IFBhcnNlckVycm9yKFwiRW1wdHkgcGFyYW1ldGVyIG5hbWUgaW4gJ1wiICsgbGluZSArIFwiJ1wiKTtcbiAgICB9XG4gICAgbGNuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIG12ZGVsaW0gPSBmYWxzZTtcbiAgICBtdWx0aVZhbHVlID0gZmFsc2U7XG5cbiAgICBpZiAobGNuYW1lIGluIGRlc2lnblNldC5wYXJhbSAmJiBkZXNpZ25TZXQucGFyYW1bbGNuYW1lXS52YWx1ZVR5cGUpIHtcbiAgICAgIHR5cGUgPSBkZXNpZ25TZXQucGFyYW1bbGNuYW1lXS52YWx1ZVR5cGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHR5cGUgPSBERUZBVUxUX1BBUkFNX1RZUEU7XG4gICAgfVxuXG4gICAgaWYgKGxjbmFtZSBpbiBkZXNpZ25TZXQucGFyYW0pIHtcbiAgICAgIG11bHRpVmFsdWUgPSBkZXNpZ25TZXQucGFyYW1bbGNuYW1lXS5tdWx0aVZhbHVlO1xuICAgICAgaWYgKGRlc2lnblNldC5wYXJhbVtsY25hbWVdLm11bHRpVmFsdWVTZXBhcmF0ZURRdW90ZSkge1xuICAgICAgICBtdmRlbGltID0gcGFyc2UuX3JmYzY4NjhFc2NhcGUoJ1wiJyArIG11bHRpVmFsdWUgKyAnXCInKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgbmV4dENoYXIgPSBsaW5lW3BvcyArIDFdO1xuICAgIGlmIChuZXh0Q2hhciA9PT0gJ1wiJykge1xuICAgICAgdmFsdWVQb3MgPSBwb3MgKyAyO1xuICAgICAgcG9zID0gbGluZS5pbmRleE9mKCdcIicsIHZhbHVlUG9zKTtcbiAgICAgIGlmIChtdWx0aVZhbHVlICYmIHBvcyAhPSAtMSkge1xuICAgICAgICAgIGxldCBleHRlbmRlZFZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICB3aGlsZSAoZXh0ZW5kZWRWYWx1ZSkge1xuICAgICAgICAgICAgaWYgKGxpbmVbcG9zICsgMV0gPT0gbXVsdGlWYWx1ZSAmJiBsaW5lW3BvcyArIDJdID09ICdcIicpIHtcbiAgICAgICAgICAgICAgcG9zID0gbGluZS5pbmRleE9mKCdcIicsIHBvcyArIDMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZXh0ZW5kZWRWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgaWYgKHBvcyA9PT0gLTEpIHtcbiAgICAgICAgdGhyb3cgbmV3IFBhcnNlckVycm9yKFxuICAgICAgICAgICdpbnZhbGlkIGxpbmUgKG5vIG1hdGNoaW5nIGRvdWJsZSBxdW90ZSkgXCInICsgbGluZSArICdcIidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gbGluZS5zbGljZSh2YWx1ZVBvcywgcG9zKTtcbiAgICAgIGxhc3RQYXJhbSA9IGxpbmUuaW5kZXhPZihQQVJBTV9ERUxJTUlURVIsIHBvcyk7XG4gICAgICBsZXQgcHJvcFZhbHVlUG9zID0gbGluZS5pbmRleE9mKFZBTFVFX0RFTElNSVRFUiwgcG9zKTtcbiAgICAgIC8vIGlmIGVpdGhlciBubyBuZXh0IHBhcmFtZXRlciBvciBkZWxpbWV0ZXIgaW4gcHJvcGVydHkgdmFsdWUsIGxldCdzIHN0b3AgaGVyZVxuICAgICAgaWYgKGxhc3RQYXJhbSA9PT0gLTEgfHwgKHByb3BWYWx1ZVBvcyAhPT0gLTEgJiYgbGFzdFBhcmFtID4gcHJvcFZhbHVlUG9zKSkge1xuICAgICAgICBwb3MgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWVQb3MgPSBwb3MgKyAxO1xuXG4gICAgICAvLyBtb3ZlIHRvIG5leHQgXCI7XCJcbiAgICAgIGxldCBuZXh0UG9zID0gbGluZS5pbmRleE9mKFBBUkFNX0RFTElNSVRFUiwgdmFsdWVQb3MpO1xuICAgICAgbGV0IHByb3BWYWx1ZVBvcyA9IGxpbmUuaW5kZXhPZihWQUxVRV9ERUxJTUlURVIsIHZhbHVlUG9zKTtcbiAgICAgIGlmIChwcm9wVmFsdWVQb3MgIT09IC0xICYmIG5leHRQb3MgPiBwcm9wVmFsdWVQb3MpIHtcbiAgICAgICAgLy8gdGhpcyBpcyBhIGRlbGltaXRlciBpbiB0aGUgcHJvcGVydHkgdmFsdWUsIGxldCdzIHN0b3AgaGVyZVxuICAgICAgICBuZXh0UG9zID0gcHJvcFZhbHVlUG9zO1xuICAgICAgICBwb3MgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAobmV4dFBvcyA9PT0gLTEpIHtcbiAgICAgICAgLy8gbm8gXCI7XCJcbiAgICAgICAgaWYgKHByb3BWYWx1ZVBvcyA9PT0gLTEpIHtcbiAgICAgICAgICBuZXh0UG9zID0gbGluZS5sZW5ndGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV4dFBvcyA9IHByb3BWYWx1ZVBvcztcbiAgICAgICAgfVxuICAgICAgICBwb3MgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxhc3RQYXJhbSA9IG5leHRQb3M7XG4gICAgICAgIHBvcyA9IG5leHRQb3M7XG4gICAgICB9XG5cbiAgICAgIHZhbHVlID0gbGluZS5zbGljZSh2YWx1ZVBvcywgbmV4dFBvcyk7XG4gICAgfVxuXG4gICAgY29uc3QgbGVuZ3RoX2JlZm9yZSA9IHZhbHVlLmxlbmd0aDtcbiAgICB2YWx1ZSA9IHBhcnNlLl9yZmM2ODY4RXNjYXBlKHZhbHVlKTtcbiAgICB2YWx1ZVBvcyArPSBsZW5ndGhfYmVmb3JlIC0gdmFsdWUubGVuZ3RoO1xuICAgIGlmIChtdWx0aVZhbHVlKSB7XG4gICAgICBsZXQgZGVsaW1pdGVyID0gbXZkZWxpbSB8fCBtdWx0aVZhbHVlO1xuICAgICAgdmFsdWUgPSBwYXJzZS5fcGFyc2VNdWx0aVZhbHVlKHZhbHVlLCBkZWxpbWl0ZXIsIHR5cGUsIFtdLCBudWxsLCBkZXNpZ25TZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSA9IHBhcnNlLl9wYXJzZVZhbHVlKHZhbHVlLCB0eXBlLCBkZXNpZ25TZXQpO1xuICAgIH1cblxuICAgIGlmIChtdWx0aVZhbHVlICYmIChsY25hbWUgaW4gcmVzdWx0KSkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzdWx0W2xjbmFtZV0pKSB7XG4gICAgICAgIHJlc3VsdFtsY25hbWVdLnB1c2godmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0W2xjbmFtZV0gPSBbXG4gICAgICAgICAgcmVzdWx0W2xjbmFtZV0sXG4gICAgICAgICAgdmFsdWVcbiAgICAgICAgXTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0W2xjbmFtZV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFtyZXN1bHQsIHZhbHVlLCB2YWx1ZVBvc107XG59O1xuXG4vKipcbiAqIEludGVybmFsIGhlbHBlciBmb3IgcmZjNjg2OC4gRXhwb3NpbmcgdGhpcyBvbiBJQ0FMLnBhcnNlIHNvIHRoYXRcbiAqIGhhY2tlcnMgY2FuIGRpc2FibGUgdGhlIHJmYzY4NjggcGFyc2luZyBpZiB0aGUgcmVhbGx5IG5lZWQgdG8uXG4gKlxuICogQGZ1bmN0aW9uIElDQUwucGFyc2UuX3JmYzY4NjhFc2NhcGVcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWwgICAgICAgIFRoZSB2YWx1ZSB0byBlc2NhcGVcbiAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICAgIFRoZSBlc2NhcGVkIHZhbHVlXG4gKi9cbnBhcnNlLl9yZmM2ODY4RXNjYXBlID0gZnVuY3Rpb24odmFsKSB7XG4gIHJldHVybiB2YWwucmVwbGFjZSgvXFxeWyduXl0vZywgZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBSRkM2ODY4X1JFUExBQ0VfTUFQJDFbeF07XG4gIH0pO1xufTtcblxuLyoqXG4gKiBQYXJzZSBhIG11bHRpIHZhbHVlIHN0cmluZy4gVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGVpdGhlciBmb3IgcGFyc2luZ1xuICogYWN0dWFsIG11bHRpLXZhbHVlIHByb3BlcnR5J3MgdmFsdWVzLCBvciBmb3IgaGFuZGxpbmcgcGFyYW1ldGVyIHZhbHVlcy4gSXRcbiAqIGNhbiBiZSB1c2VkIGZvciBib3RoIG11bHRpLXZhbHVlIHByb3BlcnRpZXMgYW5kIHN0cnVjdHVyZWQgdmFsdWUgcHJvcGVydGllcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGZ1bmN0aW9uIElDQUwucGFyc2UuX3BhcnNlTXVsdGlWYWx1ZVxuICogQHBhcmFtIHtTdHJpbmd9IGJ1ZmZlciAgICAgICAgICAgVGhlIGJ1ZmZlciBjb250YWluaW5nIHRoZSBmdWxsIHZhbHVlXG4gKiBAcGFyYW0ge1N0cmluZ30gZGVsaW0gICAgICAgICAgICBUaGUgbXVsdGktdmFsdWUgZGVsaW1pdGVyXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAgICAgICAgICAgICBUaGUgdmFsdWUgdHlwZSB0byBiZSBwYXJzZWRcbiAqIEBwYXJhbSB7QXJyYXkuPD8+fSByZXN1bHQgICAgICAgIFRoZSBhcnJheSB0byBhcHBlbmQgcmVzdWx0cyB0bywgdmFyaWVzIG9uIHZhbHVlIHR5cGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBpbm5lck11bHRpICAgICAgIFRoZSBpbm5lciBkZWxpbWl0ZXIgdG8gc3BsaXQgZWFjaCB2YWx1ZSB3aXRoXG4gKiBAcGFyYW0ge2Rlc2lnblNldH0gZGVzaWduU2V0ICAgICBUaGUgZGVzaWduIGRhdGEgZm9yIHRoaXMgdmFsdWVcbiAqIEByZXR1cm4gez98QXJyYXkuPD8+fSAgICAgICAgICAgIEVpdGhlciBhbiBhcnJheSBvZiByZXN1bHRzLCBvciB0aGUgZmlyc3QgcmVzdWx0XG4gKi9cbnBhcnNlLl9wYXJzZU11bHRpVmFsdWUgPSBmdW5jdGlvbihidWZmZXIsIGRlbGltLCB0eXBlLCByZXN1bHQsIGlubmVyTXVsdGksIGRlc2lnblNldCwgc3RydWN0dXJlZFZhbHVlKSB7XG4gIGxldCBwb3MgPSAwO1xuICBsZXQgbGFzdFBvcyA9IDA7XG4gIGxldCB2YWx1ZTtcbiAgaWYgKGRlbGltLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBidWZmZXI7XG4gIH1cblxuICAvLyBzcGxpdCBlYWNoIHBpZWNlXG4gIHdoaWxlICgocG9zID0gdW5lc2NhcGVkSW5kZXhPZihidWZmZXIsIGRlbGltLCBsYXN0UG9zKSkgIT09IC0xKSB7XG4gICAgdmFsdWUgPSBidWZmZXIuc2xpY2UobGFzdFBvcywgcG9zKTtcbiAgICBpZiAoaW5uZXJNdWx0aSkge1xuICAgICAgdmFsdWUgPSBwYXJzZS5fcGFyc2VNdWx0aVZhbHVlKHZhbHVlLCBpbm5lck11bHRpLCB0eXBlLCBbXSwgbnVsbCwgZGVzaWduU2V0LCBzdHJ1Y3R1cmVkVmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSA9IHBhcnNlLl9wYXJzZVZhbHVlKHZhbHVlLCB0eXBlLCBkZXNpZ25TZXQsIHN0cnVjdHVyZWRWYWx1ZSk7XG4gICAgfVxuICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICBsYXN0UG9zID0gcG9zICsgZGVsaW0ubGVuZ3RoO1xuICB9XG5cbiAgLy8gb24gdGhlIGxhc3QgcGllY2UgdGFrZSB0aGUgcmVzdCBvZiBzdHJpbmdcbiAgdmFsdWUgPSBidWZmZXIuc2xpY2UobGFzdFBvcyk7XG4gIGlmIChpbm5lck11bHRpKSB7XG4gICAgdmFsdWUgPSBwYXJzZS5fcGFyc2VNdWx0aVZhbHVlKHZhbHVlLCBpbm5lck11bHRpLCB0eXBlLCBbXSwgbnVsbCwgZGVzaWduU2V0LCBzdHJ1Y3R1cmVkVmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHZhbHVlID0gcGFyc2UuX3BhcnNlVmFsdWUodmFsdWUsIHR5cGUsIGRlc2lnblNldCwgc3RydWN0dXJlZFZhbHVlKTtcbiAgfVxuICByZXN1bHQucHVzaCh2YWx1ZSk7XG5cbiAgcmV0dXJuIHJlc3VsdC5sZW5ndGggPT0gMSA/IHJlc3VsdFswXSA6IHJlc3VsdDtcbn07XG5cbi8qKlxuICogUHJvY2VzcyBhIGNvbXBsZXRlIGJ1ZmZlciBvZiBpQ2FsZW5kYXIvdkNhcmQgZGF0YSBsaW5lIGJ5IGxpbmUsIGNvcnJlY3RseVxuICogdW5mb2xkaW5nIGNvbnRlbnQuIEVhY2ggbGluZSB3aWxsIGJlIHByb2Nlc3NlZCB3aXRoIHRoZSBnaXZlbiBjYWxsYmFja1xuICpcbiAqIEBwcml2YXRlXG4gKiBAZnVuY3Rpb24gSUNBTC5wYXJzZS5fZWFjaExpbmVcbiAqIEBwYXJhbSB7U3RyaW5nfSBidWZmZXIgICAgICAgICAgICAgICAgICAgICAgICAgVGhlIGJ1ZmZlciB0byBwcm9jZXNzXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKD9TdHJpbmcsIFN0cmluZyl9IGNhbGxiYWNrICAgIFRoZSBjYWxsYmFjayBmb3IgZWFjaCBsaW5lXG4gKi9cbnBhcnNlLl9lYWNoTGluZSA9IGZ1bmN0aW9uKGJ1ZmZlciwgY2FsbGJhY2spIHtcbiAgbGV0IGxlbiA9IGJ1ZmZlci5sZW5ndGg7XG4gIGxldCBsYXN0UG9zID0gYnVmZmVyLnNlYXJjaChDSEFSKTtcbiAgbGV0IHBvcyA9IGxhc3RQb3M7XG4gIGxldCBsaW5lO1xuICBsZXQgZmlyc3RDaGFyO1xuXG4gIGxldCBuZXdsaW5lT2Zmc2V0O1xuXG4gIGRvIHtcbiAgICBwb3MgPSBidWZmZXIuaW5kZXhPZignXFxuJywgbGFzdFBvcykgKyAxO1xuXG4gICAgaWYgKHBvcyA+IDEgJiYgYnVmZmVyW3BvcyAtIDJdID09PSAnXFxyJykge1xuICAgICAgbmV3bGluZU9mZnNldCA9IDI7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld2xpbmVPZmZzZXQgPSAxO1xuICAgIH1cblxuICAgIGlmIChwb3MgPT09IDApIHtcbiAgICAgIHBvcyA9IGxlbjtcbiAgICAgIG5ld2xpbmVPZmZzZXQgPSAwO1xuICAgIH1cblxuICAgIGZpcnN0Q2hhciA9IGJ1ZmZlcltsYXN0UG9zXTtcblxuICAgIGlmIChmaXJzdENoYXIgPT09ICcgJyB8fCBmaXJzdENoYXIgPT09ICdcXHQnKSB7XG4gICAgICAvLyBhZGQgdG8gbGluZVxuICAgICAgbGluZSArPSBidWZmZXIuc2xpY2UobGFzdFBvcyArIDEsIHBvcyAtIG5ld2xpbmVPZmZzZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAobGluZSlcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgbGluZSk7XG4gICAgICAvLyBwdXNoIGxpbmVcbiAgICAgIGxpbmUgPSBidWZmZXIuc2xpY2UobGFzdFBvcywgcG9zIC0gbmV3bGluZU9mZnNldCk7XG4gICAgfVxuXG4gICAgbGFzdFBvcyA9IHBvcztcbiAgfSB3aGlsZSAocG9zICE9PSBsZW4pO1xuXG4gIC8vIGV4dHJhIGVuZGluZyBsaW5lXG4gIGxpbmUgPSBsaW5lLnRyaW0oKTtcblxuICBpZiAobGluZS5sZW5ndGgpXG4gICAgY2FsbGJhY2sobnVsbCwgbGluZSk7XG59O1xuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG5jb25zdCBPUFRJT05TID0gW1widHppZFwiLCBcImxvY2F0aW9uXCIsIFwidHpuYW1lc1wiLCBcImxhdGl0dWRlXCIsIFwibG9uZ2l0dWRlXCJdO1xuXG4vKipcbiAqIFRpbWV6b25lIHJlcHJlc2VudGF0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgdmNhbGVuZGFyO1xuICogdmFyIHRpbWV6b25lQ29tcCA9IHZjYWxlbmRhci5nZXRGaXJzdFN1YmNvbXBvbmVudCgndnRpbWV6b25lJyk7XG4gKiB2YXIgdHppZCA9IHRpbWV6b25lQ29tcC5nZXRGaXJzdFByb3BlcnR5VmFsdWUoJ3R6aWQnKTtcbiAqXG4gKiB2YXIgdGltZXpvbmUgPSBuZXcgSUNBTC5UaW1lem9uZSh7XG4gKiAgIGNvbXBvbmVudDogdGltZXpvbmVDb21wLFxuICogICB0emlkXG4gKiB9KTtcbiAqXG4gKiBAbWVtYmVyb2YgSUNBTFxuICovXG5jbGFzcyBUaW1lem9uZSB7XG4gIHN0YXRpYyBfY29tcGFyZV9jaGFuZ2VfZm4oYSwgYikge1xuICAgIGlmIChhLnllYXIgPCBiLnllYXIpIHJldHVybiAtMTtcbiAgICBlbHNlIGlmIChhLnllYXIgPiBiLnllYXIpIHJldHVybiAxO1xuXG4gICAgaWYgKGEubW9udGggPCBiLm1vbnRoKSByZXR1cm4gLTE7XG4gICAgZWxzZSBpZiAoYS5tb250aCA+IGIubW9udGgpIHJldHVybiAxO1xuXG4gICAgaWYgKGEuZGF5IDwgYi5kYXkpIHJldHVybiAtMTtcbiAgICBlbHNlIGlmIChhLmRheSA+IGIuZGF5KSByZXR1cm4gMTtcblxuICAgIGlmIChhLmhvdXIgPCBiLmhvdXIpIHJldHVybiAtMTtcbiAgICBlbHNlIGlmIChhLmhvdXIgPiBiLmhvdXIpIHJldHVybiAxO1xuXG4gICAgaWYgKGEubWludXRlIDwgYi5taW51dGUpIHJldHVybiAtMTtcbiAgICBlbHNlIGlmIChhLm1pbnV0ZSA+IGIubWludXRlKSByZXR1cm4gMTtcblxuICAgIGlmIChhLnNlY29uZCA8IGIuc2Vjb25kKSByZXR1cm4gLTE7XG4gICAgZWxzZSBpZiAoYS5zZWNvbmQgPiBiLnNlY29uZCkgcmV0dXJuIDE7XG5cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IHRoZSBkYXRlL3RpbWUgZnJvbSBvbmUgem9uZSB0byB0aGUgbmV4dC5cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lfSB0dCAgICAgICAgICAgICAgICAgIFRoZSB0aW1lIHRvIGNvbnZlcnRcbiAgICogQHBhcmFtIHtUaW1lem9uZX0gZnJvbV96b25lICAgICAgIFRoZSBzb3VyY2Ugem9uZSB0byBjb252ZXJ0IGZyb21cbiAgICogQHBhcmFtIHtUaW1lem9uZX0gdG9fem9uZSAgICAgICAgIFRoZSB0YXJnZXQgem9uZSB0byBjb252ZXJ0IHRvXG4gICAqIEByZXR1cm4ge1RpbWV9ICAgICAgICAgICAgICAgICAgICBUaGUgY29udmVydGVkIGRhdGUvdGltZSBvYmplY3RcbiAgICovXG4gIHN0YXRpYyBjb252ZXJ0X3RpbWUodHQsIGZyb21fem9uZSwgdG9fem9uZSkge1xuICAgIGlmICh0dC5pc0RhdGUgfHxcbiAgICAgICAgZnJvbV96b25lLnR6aWQgPT0gdG9fem9uZS50emlkIHx8XG4gICAgICAgIGZyb21fem9uZSA9PSBUaW1lem9uZS5sb2NhbFRpbWV6b25lIHx8XG4gICAgICAgIHRvX3pvbmUgPT0gVGltZXpvbmUubG9jYWxUaW1lem9uZSkge1xuICAgICAgdHQuem9uZSA9IHRvX3pvbmU7XG4gICAgICByZXR1cm4gdHQ7XG4gICAgfVxuXG4gICAgbGV0IHV0Y09mZnNldCA9IGZyb21fem9uZS51dGNPZmZzZXQodHQpO1xuICAgIHR0LmFkanVzdCgwLCAwLCAwLCAtIHV0Y09mZnNldCk7XG5cbiAgICB1dGNPZmZzZXQgPSB0b196b25lLnV0Y09mZnNldCh0dCk7XG4gICAgdHQuYWRqdXN0KDAsIDAsIDAsIHV0Y09mZnNldCk7XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuVGltZXpvbmUgaW5zdGFuY2UgZnJvbSB0aGUgcGFzc2VkIGRhdGEgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBvbmVudHxPYmplY3R9IGFEYXRhIG9wdGlvbnMgZm9yIGNsYXNzXG4gICAqIEBwYXJhbSB7U3RyaW5nfENvbXBvbmVudH0gYURhdGEuY29tcG9uZW50XG4gICAqICAgICAgICBJZiBhRGF0YSBpcyBhIHNpbXBsZSBvYmplY3QsIHRoZW4gdGhpcyBtZW1iZXIgY2FuIGJlIHNldCB0byBlaXRoZXIgYVxuICAgKiAgICAgICAgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIGNvbXBvbmVudCBkYXRhLCBvciBhbiBhbHJlYWR5IHBhcnNlZFxuICAgKiAgICAgICAgSUNBTC5Db21wb25lbnRcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFEYXRhLnR6aWQgICAgICBUaGUgdGltZXpvbmUgaWRlbnRpZmllclxuICAgKiBAcGFyYW0ge1N0cmluZ30gYURhdGEubG9jYXRpb24gIFRoZSB0aW1lem9uZSBsb2NhdGlvbndcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFEYXRhLnR6bmFtZXMgICBBbiBhbHRlcm5hdGl2ZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWV6b25lXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBhRGF0YS5sYXRpdHVkZSAgVGhlIGxhdGl0dWRlIG9mIHRoZSB0aW1lem9uZVxuICAgKiBAcGFyYW0ge051bWJlcn0gYURhdGEubG9uZ2l0dWRlIFRoZSBsb25naXR1ZGUgb2YgdGhlIHRpbWV6b25lXG4gICAqL1xuICBzdGF0aWMgZnJvbURhdGEoYURhdGEpIHtcbiAgICBsZXQgdHQgPSBuZXcgVGltZXpvbmUoKTtcbiAgICByZXR1cm4gdHQuZnJvbURhdGEoYURhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBpbnN0YW5jZSBkZXNjcmliaW5nIHRoZSBVVEMgdGltZXpvbmVcbiAgICogQHR5cGUge1RpbWV6b25lfVxuICAgKiBAY29uc3RhbnRcbiAgICogQGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgI3V0Y1RpbWV6b25lID0gbnVsbDtcbiAgc3RhdGljIGdldCB1dGNUaW1lem9uZSgpIHtcbiAgICBpZiAoIXRoaXMuI3V0Y1RpbWV6b25lKSB7XG4gICAgICB0aGlzLiN1dGNUaW1lem9uZSA9IFRpbWV6b25lLmZyb21EYXRhKHtcbiAgICAgICAgdHppZDogXCJVVENcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLiN1dGNUaW1lem9uZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgaW5zdGFuY2UgZGVzY3JpYmluZyB0aGUgbG9jYWwgdGltZXpvbmVcbiAgICogQHR5cGUge1RpbWV6b25lfVxuICAgKiBAY29uc3RhbnRcbiAgICogQGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgI2xvY2FsVGltZXpvbmUgPSBudWxsO1xuICBzdGF0aWMgZ2V0IGxvY2FsVGltZXpvbmUoKSB7XG4gICAgaWYgKCF0aGlzLiNsb2NhbFRpbWV6b25lKSB7XG4gICAgICB0aGlzLiNsb2NhbFRpbWV6b25lID0gVGltZXpvbmUuZnJvbURhdGEoe1xuICAgICAgICB0emlkOiBcImZsb2F0aW5nXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy4jbG9jYWxUaW1lem9uZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGp1c3QgYSB0aW1lem9uZSBjaGFuZ2Ugb2JqZWN0LlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gY2hhbmdlICAgICBUaGUgdGltZXpvbmUgY2hhbmdlIG9iamVjdFxuICAgKiBAcGFyYW0ge051bWJlcn0gZGF5cyAgICAgICBUaGUgZXh0cmEgYW1vdW50IG9mIGRheXNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGhvdXJzICAgICAgVGhlIGV4dHJhIGFtb3VudCBvZiBob3Vyc1xuICAgKiBAcGFyYW0ge051bWJlcn0gbWludXRlcyAgICBUaGUgZXh0cmEgYW1vdW50IG9mIG1pbnV0ZXNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHNlY29uZHMgICAgVGhlIGV4dHJhIGFtb3VudCBvZiBzZWNvbmRzXG4gICAqL1xuICBzdGF0aWMgYWRqdXN0X2NoYW5nZShjaGFuZ2UsIGRheXMsIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSB7XG4gICAgcmV0dXJuIFRpbWUucHJvdG90eXBlLmFkanVzdC5jYWxsKFxuICAgICAgY2hhbmdlLFxuICAgICAgZGF5cyxcbiAgICAgIGhvdXJzLFxuICAgICAgbWludXRlcyxcbiAgICAgIHNlY29uZHMsXG4gICAgICBjaGFuZ2VcbiAgICApO1xuICB9XG5cbiAgc3RhdGljIF9taW5pbXVtRXhwYW5zaW9uWWVhciA9IC0xO1xuICBzdGF0aWMgRVhUUkFfQ09WRVJBR0UgPSA1O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuVGltZXpvbmUgaW5zdGFuY2UsIGJ5IHBhc3NpbmcgaW4gYSB0emlkIGFuZCBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fE9iamVjdH0gZGF0YSBvcHRpb25zIGZvciBjbGFzc1xuICAgKiBAcGFyYW0ge1N0cmluZ3xDb21wb25lbnR9IGRhdGEuY29tcG9uZW50XG4gICAqICAgICAgICBJZiBkYXRhIGlzIGEgc2ltcGxlIG9iamVjdCwgdGhlbiB0aGlzIG1lbWJlciBjYW4gYmUgc2V0IHRvIGVpdGhlciBhXG4gICAqICAgICAgICBzdHJpbmcgY29udGFpbmluZyB0aGUgY29tcG9uZW50IGRhdGEsIG9yIGFuIGFscmVhZHkgcGFyc2VkXG4gICAqICAgICAgICBJQ0FMLkNvbXBvbmVudFxuICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0YS50emlkICAgICAgVGhlIHRpbWV6b25lIGlkZW50aWZpZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGEubG9jYXRpb24gIFRoZSB0aW1lem9uZSBsb2NhdGlvbndcbiAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGEudHpuYW1lcyAgIEFuIGFsdGVybmF0aXZlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXpvbmVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRhdGEubGF0aXR1ZGUgIFRoZSBsYXRpdHVkZSBvZiB0aGUgdGltZXpvbmVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRhdGEubG9uZ2l0dWRlIFRoZSBsb25naXR1ZGUgb2YgdGhlIHRpbWV6b25lXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgdGhpcy53cmFwcGVkSlNPYmplY3QgPSB0aGlzO1xuICAgIHRoaXMuZnJvbURhdGEoZGF0YSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBUaW1lem9uZSBpZGVudGlmaWVyXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICB0emlkID0gXCJcIjtcblxuICAvKipcbiAgICogVGltZXpvbmUgbG9jYXRpb25cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGxvY2F0aW9uID0gXCJcIjtcblxuICAvKipcbiAgICogQWx0ZXJuYXRpdmUgdGltZXpvbmUgbmFtZSwgZm9yIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb25cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIHR6bmFtZXMgPSBcIlwiO1xuXG4gIC8qKlxuICAgKiBUaGUgcHJpbWFyeSBsYXRpdHVkZSBmb3IgdGhlIHRpbWV6b25lLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgbGF0aXR1ZGUgPSAwLjA7XG5cbiAgLyoqXG4gICAqIFRoZSBwcmltYXJ5IGxvbmdpdHVkZSBmb3IgdGhlIHRpbWV6b25lLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgbG9uZ2l0dWRlID0gMC4wO1xuXG4gIC8qKlxuICAgKiBUaGUgdnRpbWV6b25lIGNvbXBvbmVudCBmb3IgdGhpcyB0aW1lem9uZS5cbiAgICogQHR5cGUge0NvbXBvbmVudH1cbiAgICovXG4gIGNvbXBvbmVudCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSB5ZWFyIHRoaXMgdGltZXpvbmUgaGFzIGJlZW4gZXhwYW5kZWQgdG8uIEFsbCB0aW1lem9uZSB0cmFuc2l0aW9uXG4gICAqIGRhdGVzIHVudGlsIHRoaXMgeWVhciBhcmUga25vd24gYW5kIGNhbiBiZSB1c2VkIGZvciBjYWxjdWxhdGlvblxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgZXhwYW5kZWRVbnRpbFllYXIgPSAwO1xuXG4gIC8qKlxuICAgKiBUaGUgY2xhc3MgaWRlbnRpZmllci5cbiAgICogQGNvbnN0YW50XG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEBkZWZhdWx0IFwiaWNhbHRpbWV6b25lXCJcbiAgICovXG4gIGljYWxjbGFzcyA9IFwiaWNhbHRpbWV6b25lXCI7XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgdGhlIGN1cnJlbnQgaW5zdGFuY2UgdXNpbmcgbWVtYmVycyBmcm9tIHRoZSBwYXNzZWQgZGF0YSBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fE9iamVjdH0gYURhdGEgb3B0aW9ucyBmb3IgY2xhc3NcbiAgICogQHBhcmFtIHtTdHJpbmd8Q29tcG9uZW50fSBhRGF0YS5jb21wb25lbnRcbiAgICogICAgICAgIElmIGFEYXRhIGlzIGEgc2ltcGxlIG9iamVjdCwgdGhlbiB0aGlzIG1lbWJlciBjYW4gYmUgc2V0IHRvIGVpdGhlciBhXG4gICAqICAgICAgICBzdHJpbmcgY29udGFpbmluZyB0aGUgY29tcG9uZW50IGRhdGEsIG9yIGFuIGFscmVhZHkgcGFyc2VkXG4gICAqICAgICAgICBJQ0FMLkNvbXBvbmVudFxuICAgKiBAcGFyYW0ge1N0cmluZ30gYURhdGEudHppZCAgICAgIFRoZSB0aW1lem9uZSBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhRGF0YS5sb2NhdGlvbiAgVGhlIHRpbWV6b25lIGxvY2F0aW9ud1xuICAgKiBAcGFyYW0ge1N0cmluZ30gYURhdGEudHpuYW1lcyAgIEFuIGFsdGVybmF0aXZlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXpvbmVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFEYXRhLmxhdGl0dWRlICBUaGUgbGF0aXR1ZGUgb2YgdGhlIHRpbWV6b25lXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBhRGF0YS5sb25naXR1ZGUgVGhlIGxvbmdpdHVkZSBvZiB0aGUgdGltZXpvbmVcbiAgICovXG4gIGZyb21EYXRhKGFEYXRhKSB7XG4gICAgdGhpcy5leHBhbmRlZFVudGlsWWVhciA9IDA7XG4gICAgdGhpcy5jaGFuZ2VzID0gW107XG5cbiAgICBpZiAoYURhdGEgaW5zdGFuY2VvZiBDb21wb25lbnQpIHtcbiAgICAgIC8vIEVpdGhlciBhIGNvbXBvbmVudCBpcyBwYXNzZWQgZGlyZWN0bHlcbiAgICAgIHRoaXMuY29tcG9uZW50ID0gYURhdGE7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE90aGVyd2lzZSB0aGUgY29tcG9uZW50IG1heSBiZSBpbiB0aGUgZGF0YSBvYmplY3RcbiAgICAgIGlmIChhRGF0YSAmJiBcImNvbXBvbmVudFwiIGluIGFEYXRhKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYURhdGEuY29tcG9uZW50ID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAvLyBJZiBhIHN0cmluZyB3YXMgcGFzc2VkLCBwYXJzZSBpdCBhcyBhIGNvbXBvbmVudFxuICAgICAgICAgIGxldCBqQ2FsID0gcGFyc2UoYURhdGEuY29tcG9uZW50KTtcbiAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IG5ldyBDb21wb25lbnQoakNhbCk7XG4gICAgICAgIH0gZWxzZSBpZiAoYURhdGEuY29tcG9uZW50IGluc3RhbmNlb2YgQ29tcG9uZW50KSB7XG4gICAgICAgICAgLy8gSWYgaXQgd2FzIGEgY29tcG9uZW50IGFscmVhZHksIHRoZW4ganVzdCBzZXQgaXRcbiAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGFEYXRhLmNvbXBvbmVudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBPdGhlcndpc2UganVzdCBudWxsIG91dCB0aGUgY29tcG9uZW50XG4gICAgICAgICAgdGhpcy5jb21wb25lbnQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENvcHkgcmVtYWluaW5nIHBhc3NlZCBwcm9wZXJ0aWVzXG4gICAgICBmb3IgKGxldCBwcm9wIG9mIE9QVElPTlMpIHtcbiAgICAgICAgaWYgKGFEYXRhICYmIHByb3AgaW4gYURhdGEpIHtcbiAgICAgICAgICB0aGlzW3Byb3BdID0gYURhdGFbcHJvcF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiB3ZSBoYXZlIGEgY29tcG9uZW50IGJ1dCBubyBUWklELCBhdHRlbXB0IHRvIGdldCBpdCBmcm9tIHRoZVxuICAgIC8vIGNvbXBvbmVudCdzIHByb3BlcnRpZXMuXG4gICAgaWYgKHRoaXMuY29tcG9uZW50IGluc3RhbmNlb2YgQ29tcG9uZW50ICYmICF0aGlzLnR6aWQpIHtcbiAgICAgIHRoaXMudHppZCA9IHRoaXMuY29tcG9uZW50LmdldEZpcnN0UHJvcGVydHlWYWx1ZSgndHppZCcpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmRzIHRoZSB1dGNPZmZzZXQgdGhlIGdpdmVuIHRpbWUgd291bGQgb2NjdXIgaW4gdGhpcyB0aW1lem9uZS5cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lfSB0dCAgICAgICAgIFRoZSB0aW1lIHRvIGNoZWNrIGZvclxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgdXRjIG9mZnNldCBpbiBzZWNvbmRzXG4gICAqL1xuICB1dGNPZmZzZXQodHQpIHtcbiAgICBpZiAodGhpcyA9PSBUaW1lem9uZS51dGNUaW1lem9uZSB8fCB0aGlzID09IFRpbWV6b25lLmxvY2FsVGltZXpvbmUpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHRoaXMuX2Vuc3VyZUNvdmVyYWdlKHR0LnllYXIpO1xuXG4gICAgaWYgKCF0aGlzLmNoYW5nZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBsZXQgdHRfY2hhbmdlID0ge1xuICAgICAgeWVhcjogdHQueWVhcixcbiAgICAgIG1vbnRoOiB0dC5tb250aCxcbiAgICAgIGRheTogdHQuZGF5LFxuICAgICAgaG91cjogdHQuaG91cixcbiAgICAgIG1pbnV0ZTogdHQubWludXRlLFxuICAgICAgc2Vjb25kOiB0dC5zZWNvbmRcbiAgICB9O1xuXG4gICAgbGV0IGNoYW5nZV9udW0gPSB0aGlzLl9maW5kTmVhcmJ5Q2hhbmdlKHR0X2NoYW5nZSk7XG4gICAgbGV0IGNoYW5nZV9udW1fdG9fdXNlID0gLTE7XG4gICAgbGV0IHN0ZXAgPSAxO1xuXG4gICAgLy8gVE9ETzogcmVwbGFjZSB3aXRoIGJpbiBzZWFyY2g/XG4gICAgZm9yICg7Oykge1xuICAgICAgbGV0IGNoYW5nZSA9IGNsb25lKHRoaXMuY2hhbmdlc1tjaGFuZ2VfbnVtXSwgdHJ1ZSk7XG4gICAgICBpZiAoY2hhbmdlLnV0Y09mZnNldCA8IGNoYW5nZS5wcmV2VXRjT2Zmc2V0KSB7XG4gICAgICAgIFRpbWV6b25lLmFkanVzdF9jaGFuZ2UoY2hhbmdlLCAwLCAwLCAwLCBjaGFuZ2UudXRjT2Zmc2V0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFRpbWV6b25lLmFkanVzdF9jaGFuZ2UoY2hhbmdlLCAwLCAwLCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZS5wcmV2VXRjT2Zmc2V0KTtcbiAgICAgIH1cblxuICAgICAgbGV0IGNtcCA9IFRpbWV6b25lLl9jb21wYXJlX2NoYW5nZV9mbih0dF9jaGFuZ2UsIGNoYW5nZSk7XG5cbiAgICAgIGlmIChjbXAgPj0gMCkge1xuICAgICAgICBjaGFuZ2VfbnVtX3RvX3VzZSA9IGNoYW5nZV9udW07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGVwID0gLTE7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGVwID09IC0xICYmIGNoYW5nZV9udW1fdG9fdXNlICE9IC0xKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjaGFuZ2VfbnVtICs9IHN0ZXA7XG5cbiAgICAgIGlmIChjaGFuZ2VfbnVtIDwgMCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYW5nZV9udW0gPj0gdGhpcy5jaGFuZ2VzLmxlbmd0aCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgem9uZV9jaGFuZ2UgPSB0aGlzLmNoYW5nZXNbY2hhbmdlX251bV90b191c2VdO1xuICAgIGxldCB1dGNPZmZzZXRfY2hhbmdlID0gem9uZV9jaGFuZ2UudXRjT2Zmc2V0IC0gem9uZV9jaGFuZ2UucHJldlV0Y09mZnNldDtcblxuICAgIGlmICh1dGNPZmZzZXRfY2hhbmdlIDwgMCAmJiBjaGFuZ2VfbnVtX3RvX3VzZSA+IDApIHtcbiAgICAgIGxldCB0bXBfY2hhbmdlID0gY2xvbmUoem9uZV9jaGFuZ2UsIHRydWUpO1xuICAgICAgVGltZXpvbmUuYWRqdXN0X2NoYW5nZSh0bXBfY2hhbmdlLCAwLCAwLCAwLCB0bXBfY2hhbmdlLnByZXZVdGNPZmZzZXQpO1xuXG4gICAgICBpZiAoVGltZXpvbmUuX2NvbXBhcmVfY2hhbmdlX2ZuKHR0X2NoYW5nZSwgdG1wX2NoYW5nZSkgPCAwKSB7XG4gICAgICAgIGxldCBwcmV2X3pvbmVfY2hhbmdlID0gdGhpcy5jaGFuZ2VzW2NoYW5nZV9udW1fdG9fdXNlIC0gMV07XG5cbiAgICAgICAgbGV0IHdhbnRfZGF5bGlnaHQgPSBmYWxzZTsgLy8gVE9ET1xuXG4gICAgICAgIGlmICh6b25lX2NoYW5nZS5pc19kYXlsaWdodCAhPSB3YW50X2RheWxpZ2h0ICYmXG4gICAgICAgICAgICBwcmV2X3pvbmVfY2hhbmdlLmlzX2RheWxpZ2h0ID09IHdhbnRfZGF5bGlnaHQpIHtcbiAgICAgICAgICB6b25lX2NoYW5nZSA9IHByZXZfem9uZV9jaGFuZ2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUT0RPIHJldHVybiBpc19kYXlsaWdodD9cbiAgICByZXR1cm4gem9uZV9jaGFuZ2UudXRjT2Zmc2V0O1xuICB9XG5cbiAgX2ZpbmROZWFyYnlDaGFuZ2UoY2hhbmdlKSB7XG4gICAgLy8gZmluZCB0aGUgY2xvc2VzdCBtYXRjaFxuICAgIGxldCBpZHggPSBiaW5zZWFyY2hJbnNlcnQoXG4gICAgICB0aGlzLmNoYW5nZXMsXG4gICAgICBjaGFuZ2UsXG4gICAgICBUaW1lem9uZS5fY29tcGFyZV9jaGFuZ2VfZm5cbiAgICApO1xuXG4gICAgaWYgKGlkeCA+PSB0aGlzLmNoYW5nZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmxlbmd0aCAtIDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlkeDtcbiAgfVxuXG4gIF9lbnN1cmVDb3ZlcmFnZShhWWVhcikge1xuICAgIGlmIChUaW1lem9uZS5fbWluaW11bUV4cGFuc2lvblllYXIgPT0gLTEpIHtcbiAgICAgIGxldCB0b2RheSA9IFRpbWUubm93KCk7XG4gICAgICBUaW1lem9uZS5fbWluaW11bUV4cGFuc2lvblllYXIgPSB0b2RheS55ZWFyO1xuICAgIH1cblxuICAgIGxldCBjaGFuZ2VzRW5kWWVhciA9IGFZZWFyO1xuICAgIGlmIChjaGFuZ2VzRW5kWWVhciA8IFRpbWV6b25lLl9taW5pbXVtRXhwYW5zaW9uWWVhcikge1xuICAgICAgY2hhbmdlc0VuZFllYXIgPSBUaW1lem9uZS5fbWluaW11bUV4cGFuc2lvblllYXI7XG4gICAgfVxuXG4gICAgY2hhbmdlc0VuZFllYXIgKz0gVGltZXpvbmUuRVhUUkFfQ09WRVJBR0U7XG5cbiAgICBpZiAoIXRoaXMuY2hhbmdlcy5sZW5ndGggfHwgdGhpcy5leHBhbmRlZFVudGlsWWVhciA8IGFZZWFyKSB7XG4gICAgICBsZXQgc3ViY29tcHMgPSB0aGlzLmNvbXBvbmVudC5nZXRBbGxTdWJjb21wb25lbnRzKCk7XG4gICAgICBsZXQgY29tcExlbiA9IHN1YmNvbXBzLmxlbmd0aDtcbiAgICAgIGxldCBjb21wSWR4ID0gMDtcblxuICAgICAgZm9yICg7IGNvbXBJZHggPCBjb21wTGVuOyBjb21wSWR4KyspIHtcbiAgICAgICAgdGhpcy5fZXhwYW5kQ29tcG9uZW50KFxuICAgICAgICAgIHN1YmNvbXBzW2NvbXBJZHhdLCBjaGFuZ2VzRW5kWWVhciwgdGhpcy5jaGFuZ2VzXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2hhbmdlcy5zb3J0KFRpbWV6b25lLl9jb21wYXJlX2NoYW5nZV9mbik7XG4gICAgICB0aGlzLmV4cGFuZGVkVW50aWxZZWFyID0gY2hhbmdlc0VuZFllYXI7XG4gICAgfVxuICB9XG5cbiAgX2V4cGFuZENvbXBvbmVudChhQ29tcG9uZW50LCBhWWVhciwgY2hhbmdlcykge1xuICAgIGlmICghYUNvbXBvbmVudC5oYXNQcm9wZXJ0eShcImR0c3RhcnRcIikgfHxcbiAgICAgICAgIWFDb21wb25lbnQuaGFzUHJvcGVydHkoXCJ0em9mZnNldHRvXCIpIHx8XG4gICAgICAgICFhQ29tcG9uZW50Lmhhc1Byb3BlcnR5KFwidHpvZmZzZXRmcm9tXCIpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBsZXQgZHRzdGFydCA9IGFDb21wb25lbnQuZ2V0Rmlyc3RQcm9wZXJ0eShcImR0c3RhcnRcIikuZ2V0Rmlyc3RWYWx1ZSgpO1xuICAgIGxldCBjaGFuZ2U7XG5cbiAgICBmdW5jdGlvbiBjb252ZXJ0X3R6b2Zmc2V0KG9mZnNldCkge1xuICAgICAgcmV0dXJuIG9mZnNldC5mYWN0b3IgKiAob2Zmc2V0LmhvdXJzICogMzYwMCArIG9mZnNldC5taW51dGVzICogNjApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXRfY2hhbmdlcygpIHtcbiAgICAgIGxldCBjaGFuZ2ViYXNlID0ge307XG4gICAgICBjaGFuZ2ViYXNlLmlzX2RheWxpZ2h0ID0gKGFDb21wb25lbnQubmFtZSA9PSBcImRheWxpZ2h0XCIpO1xuICAgICAgY2hhbmdlYmFzZS51dGNPZmZzZXQgPSBjb252ZXJ0X3R6b2Zmc2V0KFxuICAgICAgICBhQ29tcG9uZW50LmdldEZpcnN0UHJvcGVydHkoXCJ0em9mZnNldHRvXCIpLmdldEZpcnN0VmFsdWUoKVxuICAgICAgKTtcblxuICAgICAgY2hhbmdlYmFzZS5wcmV2VXRjT2Zmc2V0ID0gY29udmVydF90em9mZnNldChcbiAgICAgICAgYUNvbXBvbmVudC5nZXRGaXJzdFByb3BlcnR5KFwidHpvZmZzZXRmcm9tXCIpLmdldEZpcnN0VmFsdWUoKVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIGNoYW5nZWJhc2U7XG4gICAgfVxuXG4gICAgaWYgKCFhQ29tcG9uZW50Lmhhc1Byb3BlcnR5KFwicnJ1bGVcIikgJiYgIWFDb21wb25lbnQuaGFzUHJvcGVydHkoXCJyZGF0ZVwiKSkge1xuICAgICAgY2hhbmdlID0gaW5pdF9jaGFuZ2VzKCk7XG4gICAgICBjaGFuZ2UueWVhciA9IGR0c3RhcnQueWVhcjtcbiAgICAgIGNoYW5nZS5tb250aCA9IGR0c3RhcnQubW9udGg7XG4gICAgICBjaGFuZ2UuZGF5ID0gZHRzdGFydC5kYXk7XG4gICAgICBjaGFuZ2UuaG91ciA9IGR0c3RhcnQuaG91cjtcbiAgICAgIGNoYW5nZS5taW51dGUgPSBkdHN0YXJ0Lm1pbnV0ZTtcbiAgICAgIGNoYW5nZS5zZWNvbmQgPSBkdHN0YXJ0LnNlY29uZDtcblxuICAgICAgVGltZXpvbmUuYWRqdXN0X2NoYW5nZShjaGFuZ2UsIDAsIDAsIDAsIC1jaGFuZ2UucHJldlV0Y09mZnNldCk7XG4gICAgICBjaGFuZ2VzLnB1c2goY2hhbmdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHByb3BzID0gYUNvbXBvbmVudC5nZXRBbGxQcm9wZXJ0aWVzKFwicmRhdGVcIik7XG4gICAgICBmb3IgKGxldCByZGF0ZSBvZiBwcm9wcykge1xuICAgICAgICBsZXQgdGltZSA9IHJkYXRlLmdldEZpcnN0VmFsdWUoKTtcbiAgICAgICAgY2hhbmdlID0gaW5pdF9jaGFuZ2VzKCk7XG5cbiAgICAgICAgY2hhbmdlLnllYXIgPSB0aW1lLnllYXI7XG4gICAgICAgIGNoYW5nZS5tb250aCA9IHRpbWUubW9udGg7XG4gICAgICAgIGNoYW5nZS5kYXkgPSB0aW1lLmRheTtcblxuICAgICAgICBpZiAodGltZS5pc0RhdGUpIHtcbiAgICAgICAgICBjaGFuZ2UuaG91ciA9IGR0c3RhcnQuaG91cjtcbiAgICAgICAgICBjaGFuZ2UubWludXRlID0gZHRzdGFydC5taW51dGU7XG4gICAgICAgICAgY2hhbmdlLnNlY29uZCA9IGR0c3RhcnQuc2Vjb25kO1xuXG4gICAgICAgICAgaWYgKGR0c3RhcnQuem9uZSAhPSBUaW1lem9uZS51dGNUaW1lem9uZSkge1xuICAgICAgICAgICAgVGltZXpvbmUuYWRqdXN0X2NoYW5nZShjaGFuZ2UsIDAsIDAsIDAsIC1jaGFuZ2UucHJldlV0Y09mZnNldCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoYW5nZS5ob3VyID0gdGltZS5ob3VyO1xuICAgICAgICAgIGNoYW5nZS5taW51dGUgPSB0aW1lLm1pbnV0ZTtcbiAgICAgICAgICBjaGFuZ2Uuc2Vjb25kID0gdGltZS5zZWNvbmQ7XG5cbiAgICAgICAgICBpZiAodGltZS56b25lICE9IFRpbWV6b25lLnV0Y1RpbWV6b25lKSB7XG4gICAgICAgICAgICBUaW1lem9uZS5hZGp1c3RfY2hhbmdlKGNoYW5nZSwgMCwgMCwgMCwgLWNoYW5nZS5wcmV2VXRjT2Zmc2V0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjaGFuZ2VzLnB1c2goY2hhbmdlKTtcbiAgICAgIH1cblxuICAgICAgbGV0IHJydWxlID0gYUNvbXBvbmVudC5nZXRGaXJzdFByb3BlcnR5KFwicnJ1bGVcIik7XG5cbiAgICAgIGlmIChycnVsZSkge1xuICAgICAgICBycnVsZSA9IHJydWxlLmdldEZpcnN0VmFsdWUoKTtcbiAgICAgICAgY2hhbmdlID0gaW5pdF9jaGFuZ2VzKCk7XG5cbiAgICAgICAgaWYgKHJydWxlLnVudGlsICYmIHJydWxlLnVudGlsLnpvbmUgPT0gVGltZXpvbmUudXRjVGltZXpvbmUpIHtcbiAgICAgICAgICBycnVsZS51bnRpbC5hZGp1c3QoMCwgMCwgMCwgY2hhbmdlLnByZXZVdGNPZmZzZXQpO1xuICAgICAgICAgIHJydWxlLnVudGlsLnpvbmUgPSBUaW1lem9uZS5sb2NhbFRpbWV6b25lO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGl0ZXJhdG9yID0gcnJ1bGUuaXRlcmF0b3IoZHRzdGFydCk7XG5cbiAgICAgICAgbGV0IG9jYztcbiAgICAgICAgd2hpbGUgKChvY2MgPSBpdGVyYXRvci5uZXh0KCkpKSB7XG4gICAgICAgICAgY2hhbmdlID0gaW5pdF9jaGFuZ2VzKCk7XG4gICAgICAgICAgaWYgKG9jYy55ZWFyID4gYVllYXIgfHwgIW9jYykge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2hhbmdlLnllYXIgPSBvY2MueWVhcjtcbiAgICAgICAgICBjaGFuZ2UubW9udGggPSBvY2MubW9udGg7XG4gICAgICAgICAgY2hhbmdlLmRheSA9IG9jYy5kYXk7XG4gICAgICAgICAgY2hhbmdlLmhvdXIgPSBvY2MuaG91cjtcbiAgICAgICAgICBjaGFuZ2UubWludXRlID0gb2NjLm1pbnV0ZTtcbiAgICAgICAgICBjaGFuZ2Uuc2Vjb25kID0gb2NjLnNlY29uZDtcbiAgICAgICAgICBjaGFuZ2UuaXNEYXRlID0gb2NjLmlzRGF0ZTtcblxuICAgICAgICAgIFRpbWV6b25lLmFkanVzdF9jaGFuZ2UoY2hhbmdlLCAwLCAwLCAwLCAtY2hhbmdlLnByZXZVdGNPZmZzZXQpO1xuICAgICAgICAgIGNoYW5nZXMucHVzaChjaGFuZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYW5nZXM7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHRpbWV6b25lLlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gKHRoaXMudHpuYW1lcyA/IHRoaXMudHpuYW1lcyA6IHRoaXMudHppZCk7XG4gIH1cbn1cblxuLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cblxubGV0IHpvbmVzID0gbnVsbDtcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBTaW5nbGV0b24gY2xhc3MgdG8gY29udGFpbiB0aW1lem9uZXMuICBSaWdodCBub3cgaXQgaXMgYWxsIG1hbnVhbCByZWdpc3RyeSBpblxuICogdGhlIGZ1dHVyZSB3ZSBtYXkgdXNlIHRoaXMgY2xhc3MgdG8gZG93bmxvYWQgdGltZXpvbmUgaW5mb3JtYXRpb24gb3IgaGFuZGxlXG4gKiBsb2FkaW5nIHByZS1leHBhbmRlZCB0aW1lem9uZXMuXG4gKlxuICogQGV4cG9ydHMgbW9kdWxlOklDQUwuVGltZXpvbmVTZXJ2aWNlXG4gKiBAbWVtYmVyb2YgSUNBTFxuICovXG5jb25zdCBUaW1lem9uZVNlcnZpY2UgPSB7XG4gIGdldCBjb3VudCgpIHtcbiAgICBpZiAoem9uZXMgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHJldHVybiBPYmplY3Qua2V5cyh6b25lcykubGVuZ3RoO1xuICB9LFxuXG4gIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICB6b25lcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgbGV0IHV0YyA9IFRpbWV6b25lLnV0Y1RpbWV6b25lO1xuXG4gICAgem9uZXMuWiA9IHV0YztcbiAgICB6b25lcy5VVEMgPSB1dGM7XG4gICAgem9uZXMuR01UID0gdXRjO1xuICB9LFxuICBfaGFyZF9yZXNldDogZnVuY3Rpb24oKSB7XG4gICAgem9uZXMgPSBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGltZXpvbmUgaWQgaGFzIGJlZW4gcmVnaXN0ZXJlZC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR6aWQgICAgIFRpbWV6b25lIGlkZW50aWZpZXIgKGUuZy4gQW1lcmljYS9Mb3NfQW5nZWxlcylcbiAgICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgIEZhbHNlLCB3aGVuIG5vdCBwcmVzZW50XG4gICAqL1xuICBoYXM6IGZ1bmN0aW9uKHR6aWQpIHtcbiAgICBpZiAoem9uZXMgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gISF6b25lc1t0emlkXTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyBhIHRpbWV6b25lIGJ5IGl0cyB0emlkIGlmIHByZXNlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0emlkICAgICAgICAgICAgICAgVGltZXpvbmUgaWRlbnRpZmllciAoZS5nLiBBbWVyaWNhL0xvc19BbmdlbGVzKVxuICAgKiBAcmV0dXJuIHtUaW1lem9uZSB8IHVuZGVmaW5lZH0gICAgIFRoZSB0aW1lem9uZSwgb3IgdW5kZWZpbmVkIGlmIG5vdCBmb3VuZFxuICAgKi9cbiAgZ2V0OiBmdW5jdGlvbih0emlkKSB7XG4gICAgaWYgKHpvbmVzID09PSBudWxsKSB7XG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHpvbmVzW3R6aWRdO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSB0aW1lem9uZSBvYmplY3Qgb3IgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBvbmVudHxUaW1lem9uZX0gdGltZXpvbmVcbiAgICogICAgICAgIFRoZSBpbml0aWFsaXplZCB6b25lIG9yIHZ0aW1lem9uZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmc9fSBuYW1lXG4gICAqICAgICAgICBUaGUgbmFtZSBvZiB0aGUgdGltZXpvbmUuIERlZmF1bHRzIHRvIHRoZSBjb21wb25lbnQncyBUWklEIGlmIG5vdFxuICAgKiAgICAgICAgcGFzc2VkLlxuICAgKi9cbiAgcmVnaXN0ZXI6IGZ1bmN0aW9uKHRpbWV6b25lLCBuYW1lKSB7XG4gICAgaWYgKHpvbmVzID09PSBudWxsKSB7XG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgfVxuXG4gICAgLy8gVGhpcyBhdm9pZHMgYSBicmVha2luZyBjaGFuZ2UgYnkgdGhlIGNoYW5nZSBvZiBhcmd1bWVudCBvcmRlclxuICAgIC8vIFRPRE8gcmVtb3ZlIGluIHYzXG4gICAgaWYgKHR5cGVvZiB0aW1lem9uZSA9PT0gXCJzdHJpbmdcIiAmJiBuYW1lIGluc3RhbmNlb2YgVGltZXpvbmUpIHtcbiAgICAgIFt0aW1lem9uZSwgbmFtZV0gPSBbbmFtZSwgdGltZXpvbmVdO1xuICAgIH1cblxuICAgIGlmICghbmFtZSkge1xuICAgICAgaWYgKHRpbWV6b25lIGluc3RhbmNlb2YgVGltZXpvbmUpIHtcbiAgICAgICAgbmFtZSA9IHRpbWV6b25lLnR6aWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGltZXpvbmUubmFtZSA9PT0gJ3Z0aW1lem9uZScpIHtcbiAgICAgICAgICB0aW1lem9uZSA9IG5ldyBUaW1lem9uZSh0aW1lem9uZSk7XG4gICAgICAgICAgbmFtZSA9IHRpbWV6b25lLnR6aWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIW5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJOZWl0aGVyIGEgdGltZXpvbmUgbm9yIGEgbmFtZSB3YXMgcGFzc2VkXCIpO1xuICAgIH1cblxuICAgIGlmICh0aW1lem9uZSBpbnN0YW5jZW9mIFRpbWV6b25lKSB7XG4gICAgICB6b25lc1tuYW1lXSA9IHRpbWV6b25lO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd0aW1lem9uZSBtdXN0IGJlIElDQUwuVGltZXpvbmUgb3IgSUNBTC5Db21wb25lbnQnKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSB0aW1lem9uZSBieSBpdHMgdHppZCBmcm9tIHRoZSBsaXN0LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHppZCAgICAgVGltZXpvbmUgaWRlbnRpZmllciAoZS5nLiBBbWVyaWNhL0xvc19BbmdlbGVzKVxuICAgKiBAcmV0dXJuIHs/VGltZXpvbmV9ICAgICAgVGhlIHJlbW92ZWQgdGltZXpvbmUsIG9yIG51bGwgaWYgbm90IHJlZ2lzdGVyZWRcbiAgICovXG4gIHJlbW92ZTogZnVuY3Rpb24odHppZCkge1xuICAgIGlmICh6b25lcyA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIChkZWxldGUgem9uZXNbdHppZF0pO1xuICB9XG59O1xuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbnMgdXNlZCBpbiB2YXJpb3VzIHBsYWNlcyB3aXRoaW4gaWNhbC5qc1xuICogQG1vZHVsZSBJQ0FMLmhlbHBlcnNcbiAqL1xuXG4vKipcbiAqIENvbXBpbGVzIGEgbGlzdCBvZiBhbGwgcmVmZXJlbmNlZCBUWklEcyBpbiBhbGwgc3ViY29tcG9uZW50cyBhbmRcbiAqIHJlbW92ZXMgYW55IGV4dHJhIFZUSU1FWk9ORSBzdWJjb21wb25lbnRzLiBJbiBhZGRpdGlvbiwgaWYgYW55IFRaSURzXG4gKiBhcmUgcmVmZXJlbmNlZCBieSBhIGNvbXBvbmVudCwgYnV0IGEgVlRJTUVaT05FIGRvZXMgbm90IGV4aXN0LFxuICogYW4gYXR0ZW1wdCB3aWxsIGJlIG1hZGUgdG8gZ2VuZXJhdGUgYSBWVElNRVpPTkUgdXNpbmcgSUNBTC5UaW1lem9uZVNlcnZpY2UuXG4gKlxuICogQHBhcmFtIHtDb21wb25lbnR9IHZjYWwgICAgIFRoZSB0b3AtbGV2ZWwgVkNBTEVOREFSIGNvbXBvbmVudC5cbiAqIEByZXR1cm4ge0NvbXBvbmVudH0gICAgICAgICBUaGUgSUNBTC5Db21wb25lbnQgdGhhdCB3YXMgcGFzc2VkIGluLlxuICovXG5mdW5jdGlvbiB1cGRhdGVUaW1lem9uZXModmNhbCkge1xuICBsZXQgYWxsc3VicywgcHJvcGVydGllcywgdnRpbWV6b25lcywgcmVxVHppZCwgaTtcblxuICBpZiAoIXZjYWwgfHwgdmNhbC5uYW1lICE9PSBcInZjYWxlbmRhclwiKSB7XG4gICAgLy9ub3QgYSB0b3AtbGV2ZWwgdmNhbGVuZGFyIGNvbXBvbmVudFxuICAgIHJldHVybiB2Y2FsO1xuICB9XG5cbiAgLy9TdG9yZSB2dGltZXpvbmUgc3ViY29tcG9uZW50cyBpbiBhbiBvYmplY3QgcmVmZXJlbmNlIGJ5IHR6aWQuXG4gIC8vU3RvcmUgcHJvcGVydGllcyBmcm9tIGV2ZXJ5dGhpbmcgZWxzZSBpbiBhbm90aGVyIGFycmF5XG4gIGFsbHN1YnMgPSB2Y2FsLmdldEFsbFN1YmNvbXBvbmVudHMoKTtcbiAgcHJvcGVydGllcyA9IFtdO1xuICB2dGltZXpvbmVzID0ge307XG4gIGZvciAoaSA9IDA7IGkgPCBhbGxzdWJzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGFsbHN1YnNbaV0ubmFtZSA9PT0gXCJ2dGltZXpvbmVcIikge1xuICAgICAgbGV0IHR6aWQgPSBhbGxzdWJzW2ldLmdldEZpcnN0UHJvcGVydHkoXCJ0emlkXCIpLmdldEZpcnN0VmFsdWUoKTtcbiAgICAgIHZ0aW1lem9uZXNbdHppZF0gPSBhbGxzdWJzW2ldO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9wZXJ0aWVzID0gcHJvcGVydGllcy5jb25jYXQoYWxsc3Vic1tpXS5nZXRBbGxQcm9wZXJ0aWVzKCkpO1xuICAgIH1cbiAgfVxuXG4gIC8vY3JlYXRlIGFuIG9iamVjdCB3aXRoIG9uZSBlbnRyeSBmb3IgZWFjaCByZXF1aXJlZCB0elxuICByZXFUemlkID0ge307XG4gIGZvciAoaSA9IDA7IGkgPCBwcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IHR6aWQgPSBwcm9wZXJ0aWVzW2ldLmdldFBhcmFtZXRlcihcInR6aWRcIik7XG4gICAgaWYgKHR6aWQpIHtcbiAgICAgIHJlcVR6aWRbdHppZF0gPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8vZGVsZXRlIGFueSB2dGltZXpvbmVzIHRoYXQgYXJlIG5vdCBvbiB0aGUgcmVxVHppZCBsaXN0LlxuICBmb3IgKGxldCBbdHppZCwgY29tcF0gb2YgT2JqZWN0LmVudHJpZXModnRpbWV6b25lcykpIHtcbiAgICBpZiAoIXJlcVR6aWRbdHppZF0pIHtcbiAgICAgIHZjYWwucmVtb3ZlU3ViY29tcG9uZW50KGNvbXApO1xuICAgIH1cbiAgfVxuXG4gIC8vY3JlYXRlIGFueSBtaXNzaW5nLCBidXQgcmVnaXN0ZXJlZCB0aW1lem9uZXNcbiAgZm9yIChsZXQgdHppZCBvZiBPYmplY3Qua2V5cyhyZXFUemlkKSkge1xuICAgIGlmICghdnRpbWV6b25lc1t0emlkXSAmJiBUaW1lem9uZVNlcnZpY2UuaGFzKHR6aWQpKSB7XG4gICAgICB2Y2FsLmFkZFN1YmNvbXBvbmVudChUaW1lem9uZVNlcnZpY2UuZ2V0KHR6aWQpLmNvbXBvbmVudCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHZjYWw7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBnaXZlbiB0eXBlIGlzIG9mIHRoZSBudW1iZXIgdHlwZSBhbmQgYWxzbyBOYU4uXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG51bWJlciAgICAgVGhlIG51bWJlciB0byBjaGVja1xuICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgICAgVHJ1ZSwgaWYgdGhlIG51bWJlciBpcyBzdHJpY3RseSBOYU5cbiAqL1xuZnVuY3Rpb24gaXNTdHJpY3RseU5hTihudW1iZXIpIHtcbiAgcmV0dXJuIHR5cGVvZihudW1iZXIpID09PSAnbnVtYmVyJyAmJiBpc05hTihudW1iZXIpO1xufVxuXG4vKipcbiAqIFBhcnNlcyBhIHN0cmluZyB2YWx1ZSB0aGF0IGlzIGV4cGVjdGVkIHRvIGJlIGFuIGludGVnZXIsIHdoZW4gdGhlIHZhbGlkIGlzXG4gKiBub3QgYW4gaW50ZWdlciB0aHJvd3MgYSBkZWNvcmF0aW9uIGVycm9yLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgICAgIFJhdyBzdHJpbmcgaW5wdXRcbiAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgIFBhcnNlZCBpbnRlZ2VyXG4gKi9cbmZ1bmN0aW9uIHN0cmljdFBhcnNlSW50KHN0cmluZykge1xuICBsZXQgcmVzdWx0ID0gcGFyc2VJbnQoc3RyaW5nLCAxMCk7XG5cbiAgaWYgKGlzU3RyaWN0bHlOYU4ocmVzdWx0KSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdDb3VsZCBub3QgZXh0cmFjdCBpbnRlZ2VyIGZyb20gXCInICsgc3RyaW5nICsgJ1wiJ1xuICAgICk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgb3IgcmV0dXJucyBhIGNsYXNzIGluc3RhbmNlIG9mIGEgZ2l2ZW4gdHlwZSB3aXRoIHRoZSBpbml0aWFsaXphdGlvblxuICogZGF0YSBpZiB0aGUgZGF0YSBpcyBub3QgYWxyZWFkeSBhbiBpbnN0YW5jZSBvZiB0aGUgZ2l2ZW4gdHlwZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogdmFyIHRpbWUgPSBuZXcgSUNBTC5UaW1lKC4uLik7XG4gKiB2YXIgcmVzdWx0ID0gSUNBTC5oZWxwZXJzLmZvcm1hdENsYXNzVHlwZSh0aW1lLCBJQ0FMLlRpbWUpO1xuICpcbiAqIChyZXN1bHQgaW5zdGFuY2VvZiBJQ0FMLlRpbWUpXG4gKiAvLyA9PiB0cnVlXG4gKlxuICogcmVzdWx0ID0gSUNBTC5oZWxwZXJzLmZvcm1hdENsYXNzVHlwZSh7fSwgSUNBTC5UaW1lKTtcbiAqIChyZXN1bHQgaXNudGFuY2VvZiBJQ0FMLlRpbWUpXG4gKiAvLyA9PiB0cnVlXG4gKlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhICAgICAgIG9iamVjdCBpbml0aWFsaXphdGlvbiBkYXRhXG4gKiBAcGFyYW0ge09iamVjdH0gdHlwZSAgICAgICBvYmplY3QgdHlwZSAobGlrZSBJQ0FMLlRpbWUpXG4gKiBAcmV0dXJuIHs/fSAgICAgICAgICAgICAgICBBbiBpbnN0YW5jZSBvZiB0aGUgZm91bmQgdHlwZS5cbiAqL1xuZnVuY3Rpb24gZm9ybWF0Q2xhc3NUeXBlKGRhdGEsIHR5cGUpIHtcbiAgaWYgKHR5cGVvZihkYXRhKSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKGRhdGEgaW5zdGFuY2VvZiB0eXBlKSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgcmV0dXJuIG5ldyB0eXBlKGRhdGEpO1xufVxuXG4vKipcbiAqIElkZW50aWNhbCB0byBpbmRleE9mIGJ1dCB3aWxsIG9ubHkgbWF0Y2ggdmFsdWVzIHdoZW4gdGhleSBhcmUgbm90IHByZWNlZGVkXG4gKiBieSBhIGJhY2tzbGFzaCBjaGFyYWN0ZXIuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGJ1ZmZlciAgICAgICAgIFN0cmluZyB0byBzZWFyY2hcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2ggICAgICAgICBWYWx1ZSB0byBsb29rIGZvclxuICogQHBhcmFtIHtOdW1iZXJ9IHBvcyAgICAgICAgICAgIFN0YXJ0IHBvc2l0aW9uXG4gKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgICAgICAgVGhlIHBvc2l0aW9uLCBvciAtMSBpZiBub3QgZm91bmRcbiAqL1xuZnVuY3Rpb24gdW5lc2NhcGVkSW5kZXhPZihidWZmZXIsIHNlYXJjaCwgcG9zKSB7XG4gIHdoaWxlICgocG9zID0gYnVmZmVyLmluZGV4T2Yoc2VhcmNoLCBwb3MpKSAhPT0gLTEpIHtcbiAgICBpZiAocG9zID4gMCAmJiBidWZmZXJbcG9zIC0gMV0gPT09ICdcXFxcJykge1xuICAgICAgcG9zICs9IDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwb3M7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxuLyoqXG4gKiBGaW5kIHRoZSBpbmRleCBmb3IgaW5zZXJ0aW9uIHVzaW5nIGJpbmFyeSBzZWFyY2guXG4gKlxuICogQHBhcmFtIHtBcnJheX0gbGlzdCAgICAgICAgICAgIFRoZSBsaXN0IHRvIHNlYXJjaFxuICogQHBhcmFtIHs/fSBzZWVrVmFsICAgICAgICAgICAgIFRoZSB2YWx1ZSB0byBpbnNlcnRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oPyw/KX0gY21wZnVuYyBUaGUgY29tcGFyaXNvbiBmdW5jLCB0aGF0IGNhblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFyZSB0d28gc2Vla1ZhbHNcbiAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAgICBUaGUgaW5zZXJ0IHBvc2l0aW9uXG4gKi9cbmZ1bmN0aW9uIGJpbnNlYXJjaEluc2VydChsaXN0LCBzZWVrVmFsLCBjbXBmdW5jKSB7XG4gIGlmICghbGlzdC5sZW5ndGgpXG4gICAgcmV0dXJuIDA7XG5cbiAgbGV0IGxvdyA9IDAsIGhpZ2ggPSBsaXN0Lmxlbmd0aCAtIDEsXG4gICAgICBtaWQsIGNtcHZhbDtcblxuICB3aGlsZSAobG93IDw9IGhpZ2gpIHtcbiAgICBtaWQgPSBsb3cgKyBNYXRoLmZsb29yKChoaWdoIC0gbG93KSAvIDIpO1xuICAgIGNtcHZhbCA9IGNtcGZ1bmMoc2Vla1ZhbCwgbGlzdFttaWRdKTtcblxuICAgIGlmIChjbXB2YWwgPCAwKVxuICAgICAgaGlnaCA9IG1pZCAtIDE7XG4gICAgZWxzZSBpZiAoY21wdmFsID4gMClcbiAgICAgIGxvdyA9IG1pZCArIDE7XG4gICAgZWxzZVxuICAgICAgYnJlYWs7XG4gIH1cblxuICBpZiAoY21wdmFsIDwgMClcbiAgICByZXR1cm4gbWlkOyAvLyBpbnNlcnRpb24gaXMgZGlzcGxhY2luZywgc28gdXNlIG1pZCBvdXRyaWdodC5cbiAgZWxzZSBpZiAoY21wdmFsID4gMClcbiAgICByZXR1cm4gbWlkICsgMTtcbiAgZWxzZVxuICAgIHJldHVybiBtaWQ7XG59XG5cbi8qKlxuICogQ2xvbmUgdGhlIHBhc3NlZCBvYmplY3Qgb3IgcHJpbWl0aXZlLiBCeSBkZWZhdWx0IGEgc2hhbGxvdyBjbG9uZSB3aWxsIGJlXG4gKiBleGVjdXRlZC5cbiAqXG4gKiBAcGFyYW0geyp9IGFTcmMgICAgICAgICAgICBUaGUgdGhpbmcgdG8gY2xvbmVcbiAqIEBwYXJhbSB7Qm9vbGVhbj19IGFEZWVwICAgIElmIHRydWUsIGEgZGVlcCBjbG9uZSB3aWxsIGJlIHBlcmZvcm1lZFxuICogQHJldHVybiB7Kn0gICAgICAgICAgICAgICAgVGhlIGNvcHkgb2YgdGhlIHRoaW5nXG4gKi9cbmZ1bmN0aW9uIGNsb25lKGFTcmMsIGFEZWVwKSB7XG4gIGlmICghYVNyYyB8fCB0eXBlb2YgYVNyYyAhPSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIGFTcmM7XG4gIH0gZWxzZSBpZiAoYVNyYyBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoYVNyYy5nZXRUaW1lKCkpO1xuICB9IGVsc2UgaWYgKFwiY2xvbmVcIiBpbiBhU3JjKSB7XG4gICAgcmV0dXJuIGFTcmMuY2xvbmUoKTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFTcmMpKSB7XG4gICAgbGV0IGFyciA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYVNyYy5sZW5ndGg7IGkrKykge1xuICAgICAgYXJyLnB1c2goYURlZXAgPyBjbG9uZShhU3JjW2ldLCB0cnVlKSA6IGFTcmNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gYXJyO1xuICB9IGVsc2Uge1xuICAgIGxldCBvYmogPSB7fTtcbiAgICBmb3IgKGxldCBbbmFtZSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGFTcmMpKSB7XG4gICAgICBpZiAoYURlZXApIHtcbiAgICAgICAgb2JqW25hbWVdID0gY2xvbmUodmFsdWUsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb2JqW25hbWVdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH1cbn1cblxuLyoqXG4gKiBQZXJmb3JtcyBpQ2FsZW5kYXIgbGluZSBmb2xkaW5nLiBBIGxpbmUgZW5kaW5nIGNoYXJhY3RlciBpcyBpbnNlcnRlZCBhbmRcbiAqIHRoZSBuZXh0IGxpbmUgYmVnaW5zIHdpdGggYSB3aGl0ZXNwYWNlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBTVU1NQVJZOlRoaXMgbGluZSB3aWxsIGJlIGZvbGRcbiAqICBlZCByaWdodCBpbiB0aGUgbWlkZGxlIG9mIGEgd29yZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYUxpbmUgICAgICBUaGUgbGluZSB0byBmb2xkXG4gKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgICBUaGUgZm9sZGVkIGxpbmVcbiAqL1xuZnVuY3Rpb24gZm9sZGxpbmUoYUxpbmUpIHtcbiAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gIGxldCBsaW5lID0gYUxpbmUgfHwgXCJcIiwgcG9zID0gMCwgbGluZV9sZW5ndGggPSAwO1xuICAvL3BvcyBjb3VudHMgcG9zaXRpb24gaW4gbGluZSBmb3IgdGhlIFVURi0xNiBwcmVzZW50YXRpb25cbiAgLy9saW5lX2xlbmd0aCBjb3VudHMgdGhlIGJ5dGVzIGZvciB0aGUgVVRGLTggcHJlc2VudGF0aW9uXG4gIHdoaWxlIChsaW5lLmxlbmd0aCkge1xuICAgIGxldCBjcCA9IGxpbmUuY29kZVBvaW50QXQocG9zKTtcbiAgICBpZiAoY3AgPCAxMjgpICsrbGluZV9sZW5ndGg7XG4gICAgZWxzZSBpZiAoY3AgPCAyMDQ4KSBsaW5lX2xlbmd0aCArPSAyOy8vbmVlZHMgMiBVVEYtOCBieXRlc1xuICAgIGVsc2UgaWYgKGNwIDwgNjU1MzYpIGxpbmVfbGVuZ3RoICs9IDM7XG4gICAgZWxzZSBsaW5lX2xlbmd0aCArPSA0OyAvL2NwIGlzIGxlc3MgdGhhbiAxMTE0MTEyXG4gICAgaWYgKGxpbmVfbGVuZ3RoIDwgSUNBTG1vZHVsZS5mb2xkTGVuZ3RoICsgMSlcbiAgICAgIHBvcyArPSBjcCA+IDY1NTM1ID8gMiA6IDE7XG4gICAgZWxzZSB7XG4gICAgICByZXN1bHQgKz0gSUNBTG1vZHVsZS5uZXdMaW5lQ2hhciArIFwiIFwiICsgbGluZS5zbGljZSgwLCBNYXRoLm1heCgwLCBwb3MpKTtcbiAgICAgIGxpbmUgPSBsaW5lLnNsaWNlKE1hdGgubWF4KDAsIHBvcykpO1xuICAgICAgcG9zID0gbGluZV9sZW5ndGggPSAwO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0LnNsaWNlKElDQUxtb2R1bGUubmV3TGluZUNoYXIubGVuZ3RoICsgMSk7XG59XG5cbi8qKlxuICogUGFkcyB0aGUgZ2l2ZW4gc3RyaW5nIG9yIG51bWJlciB3aXRoIHplcm9zIHNvIGl0IHdpbGwgaGF2ZSBhdCBsZWFzdCB0d29cbiAqIGNoYXJhY3RlcnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBkYXRhICAgIFRoZSBzdHJpbmcgb3IgbnVtYmVyIHRvIHBhZFxuICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgICAgICAgIFRoZSBudW1iZXIgcGFkZGVkIGFzIGEgc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIHBhZDIoZGF0YSkge1xuICBpZiAodHlwZW9mKGRhdGEpICE9PSAnc3RyaW5nJykge1xuICAgIC8vIGhhbmRsZSBmcmFjdGlvbnMuXG4gICAgaWYgKHR5cGVvZihkYXRhKSA9PT0gJ251bWJlcicpIHtcbiAgICAgIGRhdGEgPSBwYXJzZUludChkYXRhKTtcbiAgICB9XG4gICAgZGF0YSA9IFN0cmluZyhkYXRhKTtcbiAgfVxuXG4gIGxldCBsZW4gPSBkYXRhLmxlbmd0aDtcblxuICBzd2l0Y2ggKGxlbikge1xuICAgIGNhc2UgMDpcbiAgICAgIHJldHVybiAnMDAnO1xuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiAnMCcgKyBkYXRhO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZGF0YTtcbiAgfVxufVxuXG4vKipcbiAqIFRydW5jYXRlcyB0aGUgZ2l2ZW4gbnVtYmVyLCBjb3JyZWN0bHkgaGFuZGxpbmcgbmVnYXRpdmUgbnVtYmVycy5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbnVtYmVyICAgICBUaGUgbnVtYmVyIHRvIHRydW5jYXRlXG4gKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgICBUaGUgdHJ1bmNhdGVkIG51bWJlclxuICovXG5mdW5jdGlvbiB0cnVuYyhudW1iZXIpIHtcbiAgcmV0dXJuIChudW1iZXIgPCAwID8gTWF0aC5jZWlsKG51bWJlcikgOiBNYXRoLmZsb29yKG51bWJlcikpO1xufVxuXG4vKipcbiAqIFBvb3ItbWFuJ3MgY3Jvc3MtYnJvd3NlciBvYmplY3QgZXh0ZW5zaW9uLiBEb2Vzbid0IHN1cHBvcnQgYWxsIHRoZVxuICogZmVhdHVyZXMsIGJ1dCBlbm91Z2ggZm9yIG91ciB1c2FnZS4gTm90ZSB0aGF0IHRoZSB0YXJnZXQncyBwcm9wZXJ0aWVzIGFyZVxuICogbm90IG92ZXJ3cml0dGVuIHdpdGggdGhlIHNvdXJjZSBwcm9wZXJ0aWVzLlxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgY2hpbGQgPSBJQ0FMLmhlbHBlcnMuZXh0ZW5kKHBhcmVudCwge1xuICogICBcImJhclwiOiAxMjNcbiAqIH0pO1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgICAgIFRoZSBvYmplY3QgdG8gZXh0ZW5kXG4gKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0ICAgICBUaGUgb2JqZWN0IHRvIGV4dGVuZCB3aXRoXG4gKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgICBSZXR1cm5zIHRoZSB0YXJnZXQuXG4gKi9cbmZ1bmN0aW9uIGV4dGVuZChzb3VyY2UsIHRhcmdldCkge1xuICBmb3IgKGxldCBrZXkgaW4gc291cmNlKSB7XG4gICAgbGV0IGRlc2NyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSk7XG4gICAgaWYgKGRlc2NyICYmICFPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBkZXNjcik7XG4gICAgfVxuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbnZhciBoZWxwZXJzID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIGJpbnNlYXJjaEluc2VydDogYmluc2VhcmNoSW5zZXJ0LFxuICBjbG9uZTogY2xvbmUsXG4gIGV4dGVuZDogZXh0ZW5kLFxuICBmb2xkbGluZTogZm9sZGxpbmUsXG4gIGZvcm1hdENsYXNzVHlwZTogZm9ybWF0Q2xhc3NUeXBlLFxuICBpc1N0cmljdGx5TmFOOiBpc1N0cmljdGx5TmFOLFxuICBwYWQyOiBwYWQyLFxuICBzdHJpY3RQYXJzZUludDogc3RyaWN0UGFyc2VJbnQsXG4gIHRydW5jOiB0cnVuYyxcbiAgdW5lc2NhcGVkSW5kZXhPZjogdW5lc2NhcGVkSW5kZXhPZixcbiAgdXBkYXRlVGltZXpvbmVzOiB1cGRhdGVUaW1lem9uZXNcbn0pO1xuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgXCJ1dGMtb2Zmc2V0XCIgdmFsdWUgdHlwZSwgd2l0aCB2YXJpb3VzIGNhbGN1bGF0aW9uIGFuZCBtYW5pcHVsYXRpb25cbiAqIG1ldGhvZHMuXG4gKlxuICogQG1lbWJlcm9mIElDQUxcbiAqL1xuY2xhc3MgVXRjT2Zmc2V0IHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIElDQUwuVXRjT2Zmc2V0fSBpbnN0YW5jZSBmcm9tIHRoZSBwYXNzZWQgc3RyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gYVN0cmluZyAgICBUaGUgc3RyaW5nIHRvIHBhcnNlXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufSAgICAgICAgIFRoZSBjcmVhdGVkIHV0Yy1vZmZzZXQgaW5zdGFuY2VcbiAgICovXG4gIHN0YXRpYyBmcm9tU3RyaW5nKGFTdHJpbmcpIHtcbiAgICAvLyAtMDU6MDBcbiAgICBsZXQgb3B0aW9ucyA9IHt9O1xuICAgIC8vVE9ETzogc3VwcG9ydCBzZWNvbmRzIHBlciByZmM1NTQ1ID9cbiAgICBvcHRpb25zLmZhY3RvciA9IChhU3RyaW5nWzBdID09PSAnKycpID8gMSA6IC0xO1xuICAgIG9wdGlvbnMuaG91cnMgPSBzdHJpY3RQYXJzZUludChhU3RyaW5nLnNsaWNlKDEsIDMpKTtcbiAgICBvcHRpb25zLm1pbnV0ZXMgPSBzdHJpY3RQYXJzZUludChhU3RyaW5nLnNsaWNlKDQsIDYpKTtcblxuICAgIHJldHVybiBuZXcgVXRjT2Zmc2V0KG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIElDQUwuVXRjT2Zmc2V0fSBpbnN0YW5jZSBmcm9tIHRoZSBwYXNzZWQgc2Vjb25kc1xuICAgKiB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFTZWNvbmRzICAgICAgIFRoZSBudW1iZXIgb2Ygc2Vjb25kcyB0byBjb252ZXJ0XG4gICAqL1xuICBzdGF0aWMgZnJvbVNlY29uZHMoYVNlY29uZHMpIHtcbiAgICBsZXQgaW5zdGFuY2UgPSBuZXcgVXRjT2Zmc2V0KCk7XG4gICAgaW5zdGFuY2UuZnJvbVNlY29uZHMoYVNlY29uZHMpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuVXRjT2Zmc2V0IGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYURhdGEgICAgICAgICAgQW4gb2JqZWN0IHdpdGggbWVtYmVycyBvZiB0aGUgdXRjIG9mZnNldFxuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLmhvdXJzICAgVGhlIGhvdXJzIGZvciB0aGUgdXRjIG9mZnNldFxuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLm1pbnV0ZXMgVGhlIG1pbnV0ZXMgaW4gdGhlIHV0YyBvZmZzZXRcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBhRGF0YS5mYWN0b3IgIFRoZSBmYWN0b3IgZm9yIHRoZSB1dGMtb2Zmc2V0LCBlaXRoZXIgLTEgb3IgMVxuICAgKi9cbiAgY29uc3RydWN0b3IoYURhdGEpIHtcbiAgICB0aGlzLmZyb21EYXRhKGFEYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgaG91cnMgaW4gdGhlIHV0Yy1vZmZzZXRcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGhvdXJzID0gMDtcblxuICAvKipcbiAgICogVGhlIG1pbnV0ZXMgaW4gdGhlIHV0Yy1vZmZzZXRcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIG1pbnV0ZXMgPSAwO1xuXG4gIC8qKlxuICAgKiBUaGUgc2lnbiBvZiB0aGUgdXRjIG9mZnNldCwgMSBmb3IgcG9zaXRpdmUgb2Zmc2V0LCAtMSBmb3IgbmVnYXRpdmVcbiAgICogb2Zmc2V0cy5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGZhY3RvciA9IDE7XG5cbiAgLyoqXG4gICAqIFRoZSB0eXBlIG5hbWUsIHRvIGJlIHVzZWQgaW4gdGhlIGpDYWwgb2JqZWN0LlxuICAgKiBAY29uc3RhbnRcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGRlZmF1bHQgXCJ1dGMtb2Zmc2V0XCJcbiAgICovXG4gIGljYWx0eXBlID0gXCJ1dGMtb2Zmc2V0XCI7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjbG9uZSBvZiB0aGUgdXRjIG9mZnNldCBvYmplY3QuXG4gICAqXG4gICAqIEByZXR1cm4ge1V0Y09mZnNldH0gICAgIFRoZSBjbG9uZWQgb2JqZWN0XG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gVXRjT2Zmc2V0LmZyb21TZWNvbmRzKHRoaXMudG9TZWNvbmRzKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgdGhlIGN1cnJlbnQgaW5zdGFuY2UgdXNpbmcgbWVtYmVycyBmcm9tIHRoZSBwYXNzZWQgZGF0YSBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhRGF0YSAgICAgICAgICBBbiBvYmplY3Qgd2l0aCBtZW1iZXJzIG9mIHRoZSB1dGMgb2Zmc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYURhdGEuaG91cnMgICBUaGUgaG91cnMgZm9yIHRoZSB1dGMgb2Zmc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYURhdGEubWludXRlcyBUaGUgbWludXRlcyBpbiB0aGUgdXRjIG9mZnNldFxuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLmZhY3RvciAgVGhlIGZhY3RvciBmb3IgdGhlIHV0Yy1vZmZzZXQsIGVpdGhlciAtMSBvciAxXG4gICAqL1xuICBmcm9tRGF0YShhRGF0YSkge1xuICAgIGlmIChhRGF0YSkge1xuICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGFEYXRhKSkge1xuICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fbm9ybWFsaXplKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB1cCB0aGUgY3VycmVudCBpbnN0YW5jZSBmcm9tIHRoZSBnaXZlbiBzZWNvbmRzIHZhbHVlLiBUaGUgc2Vjb25kc1xuICAgKiB2YWx1ZSBpcyB0cnVuY2F0ZWQgdG8gdGhlIG1pbnV0ZS4gT2Zmc2V0cyBhcmUgd3JhcHBlZCB3aGVuIHRoZSB3b3JsZFxuICAgKiBlbmRzLCB0aGUgaG91ciBhZnRlciBVVEMrMTQ6MDAgaXMgVVRDLTEyOjAwLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gYVNlY29uZHMgICAgICAgICBUaGUgc2Vjb25kcyB0byBjb252ZXJ0IGludG8gYW4gb2Zmc2V0XG4gICAqL1xuICBmcm9tU2Vjb25kcyhhU2Vjb25kcykge1xuICAgIGxldCBzZWNzID0gTWF0aC5hYnMoYVNlY29uZHMpO1xuXG4gICAgdGhpcy5mYWN0b3IgPSBhU2Vjb25kcyA8IDAgPyAtMSA6IDE7XG4gICAgdGhpcy5ob3VycyA9IHRydW5jKHNlY3MgLyAzNjAwKTtcblxuICAgIHNlY3MgLT0gKHRoaXMuaG91cnMgKiAzNjAwKTtcbiAgICB0aGlzLm1pbnV0ZXMgPSB0cnVuYyhzZWNzIC8gNjApO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgdGhlIGN1cnJlbnQgb2Zmc2V0IHRvIGEgdmFsdWUgaW4gc2Vjb25kc1xuICAgKlxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgICAgICAgICBUaGUgb2Zmc2V0IGluIHNlY29uZHNcbiAgICovXG4gIHRvU2Vjb25kcygpIHtcbiAgICByZXR1cm4gdGhpcy5mYWN0b3IgKiAoNjAgKiB0aGlzLm1pbnV0ZXMgKyAzNjAwICogdGhpcy5ob3Vycyk7XG4gIH1cblxuICAvKipcbiAgICogQ29tcGFyZSB0aGlzIHV0YyBvZmZzZXQgd2l0aCBhbm90aGVyIG9uZS5cbiAgICpcbiAgICogQHBhcmFtIHtVdGNPZmZzZXR9IG90aGVyICAgICAgICAgICAgIFRoZSBvdGhlciBvZmZzZXQgdG8gY29tcGFyZSB3aXRoXG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAgICAgICAgICAtMSwgMCBvciAxIGZvciBsZXNzL2VxdWFsL2dyZWF0ZXJcbiAgICovXG4gIGNvbXBhcmUob3RoZXIpIHtcbiAgICBsZXQgYSA9IHRoaXMudG9TZWNvbmRzKCk7XG4gICAgbGV0IGIgPSBvdGhlci50b1NlY29uZHMoKTtcbiAgICByZXR1cm4gKGEgPiBiKSAtIChiID4gYSk7XG4gIH1cblxuICBfbm9ybWFsaXplKCkge1xuICAgIC8vIFJhbmdlOiA5NzIwMCBzZWNvbmRzICh3aXRoIDEgaG91ciBpbmJldHdlZW4pXG4gICAgbGV0IHNlY3MgPSB0aGlzLnRvU2Vjb25kcygpO1xuICAgIGxldCBmYWN0b3IgPSB0aGlzLmZhY3RvcjtcbiAgICB3aGlsZSAoc2VjcyA8IC00MzIwMCkgeyAvLyA9IFVUQy0xMjowMFxuICAgICAgc2VjcyArPSA5NzIwMDtcbiAgICB9XG4gICAgd2hpbGUgKHNlY3MgPiA1MDQwMCkgeyAvLyA9IFVUQysxNDowMFxuICAgICAgc2VjcyAtPSA5NzIwMDtcbiAgICB9XG5cbiAgICB0aGlzLmZyb21TZWNvbmRzKHNlY3MpO1xuXG4gICAgLy8gQXZvaWQgY2hhbmdpbmcgdGhlIGZhY3RvciB3aGVuIG9uIHplcm8gc2Vjb25kc1xuICAgIGlmIChzZWNzID09IDApIHtcbiAgICAgIHRoaXMuZmFjdG9yID0gZmFjdG9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgaUNhbGVuZGFyIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHV0Yy1vZmZzZXQuXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIHRvSUNBTFN0cmluZygpIHtcbiAgICByZXR1cm4gZGVzaWduLmljYWxlbmRhci52YWx1ZVsndXRjLW9mZnNldCddLnRvSUNBTCh0aGlzLnRvU3RyaW5nKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyB1dGMtb2Zmc2V0LlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gKHRoaXMuZmFjdG9yID09IDEgPyBcIitcIiA6IFwiLVwiKSArIHBhZDIodGhpcy5ob3VycykgKyAnOicgKyBwYWQyKHRoaXMubWludXRlcyk7XG4gIH1cbn1cblxuLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cblxuLyoqXG4gKiBEZXNjcmliZXMgYSB2Q2FyZCB0aW1lLCB3aGljaCBoYXMgc2xpZ2h0IGRpZmZlcmVuY2VzIHRvIHRoZSBJQ0FMLlRpbWUuXG4gKiBQcm9wZXJ0aWVzIGNhbiBiZSBudWxsIGlmIG5vdCBzcGVjaWZpZWQsIGZvciBleGFtcGxlIGZvciBkYXRlcyB3aXRoXG4gKiByZWR1Y2VkIGFjY3VyYWN5IG9yIHRydW5jYXRpb24uXG4gKlxuICogTm90ZSB0aGF0IGN1cnJlbnRseSBub3QgYWxsIG1ldGhvZHMgYXJlIGNvcnJlY3RseSByZS1pbXBsZW1lbnRlZCBmb3JcbiAqIFZDYXJkVGltZS4gRm9yIGV4YW1wbGUsIGNvbXBhcmlzb24gd2lsbCBoYXZlIHVuZGVmaW5lZCByZXN1bHRzIHdoZW4gc29tZVxuICogbWVtYmVycyBhcmUgbnVsbC5cbiAqXG4gKiBBbHNvLCBub3JtYWxpemF0aW9uIGlzIG5vdCB5ZXQgaW1wbGVtZW50ZWQgZm9yIHRoaXMgY2xhc3MhXG4gKlxuICogQG1lbWJlcm9mIElDQUxcbiAqIEBleHRlbmRzIHtUaW1lfVxuICovXG5jbGFzcyBWQ2FyZFRpbWUgZXh0ZW5kcyBUaW1lIHtcbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgSUNBTC5WQ2FyZFRpbWUgaW5zdGFuY2UgZnJvbSBhIGRhdGUgYW5kL29yIHRpbWUgc3RyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gYVZhbHVlICAgICBUaGUgc3RyaW5nIHRvIGNyZWF0ZSBmcm9tXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhSWNhbFR5cGUgIFRoZSB0eXBlIGZvciB0aGlzIGluc3RhbmNlLCBlLmcuIGRhdGUtYW5kLW9yLXRpbWVcbiAgICogQHJldHVybiB7VkNhcmRUaW1lfSAgICAgICAgVGhlIGRhdGUvdGltZSBpbnN0YW5jZVxuICAgKi9cbiAgc3RhdGljIGZyb21EYXRlQW5kT3JUaW1lU3RyaW5nKGFWYWx1ZSwgYUljYWxUeXBlKSB7XG4gICAgZnVuY3Rpb24gcGFydCh2LCBzLCBlKSB7XG4gICAgICByZXR1cm4gdiA/IHN0cmljdFBhcnNlSW50KHYuc2xpY2UocywgcyArIGUpKSA6IG51bGw7XG4gICAgfVxuICAgIGxldCBwYXJ0cyA9IGFWYWx1ZS5zcGxpdCgnVCcpO1xuICAgIGxldCBkdCA9IHBhcnRzWzBdLCB0bXogPSBwYXJ0c1sxXTtcbiAgICBsZXQgc3BsaXR6b25lID0gdG16ID8gZGVzaWduLnZjYXJkLnZhbHVlLnRpbWUuX3NwbGl0Wm9uZSh0bXopIDogW107XG4gICAgbGV0IHpvbmUgPSBzcGxpdHpvbmVbMF0sIHRtID0gc3BsaXR6b25lWzFdO1xuXG4gICAgbGV0IGR0bGVuID0gZHQgPyBkdC5sZW5ndGggOiAwO1xuICAgIGxldCB0bWxlbiA9IHRtID8gdG0ubGVuZ3RoIDogMDtcblxuICAgIGxldCBoYXNEYXNoRGF0ZSA9IGR0ICYmIGR0WzBdID09ICctJyAmJiBkdFsxXSA9PSAnLSc7XG4gICAgbGV0IGhhc0Rhc2hUaW1lID0gdG0gJiYgdG1bMF0gPT0gJy0nO1xuXG4gICAgbGV0IG8gPSB7XG4gICAgICB5ZWFyOiBoYXNEYXNoRGF0ZSA/IG51bGwgOiBwYXJ0KGR0LCAwLCA0KSxcbiAgICAgIG1vbnRoOiBoYXNEYXNoRGF0ZSAmJiAoZHRsZW4gPT0gNCB8fCBkdGxlbiA9PSA3KSA/IHBhcnQoZHQsIDIsIDIpIDogZHRsZW4gPT0gNyA/IHBhcnQoZHQsIDUsIDIpIDogZHRsZW4gPT0gMTAgPyBwYXJ0KGR0LCA1LCAyKSA6IG51bGwsXG4gICAgICBkYXk6IGR0bGVuID09IDUgPyBwYXJ0KGR0LCAzLCAyKSA6IGR0bGVuID09IDcgJiYgaGFzRGFzaERhdGUgPyBwYXJ0KGR0LCA1LCAyKSA6IGR0bGVuID09IDEwID8gcGFydChkdCwgOCwgMikgOiBudWxsLFxuXG4gICAgICBob3VyOiBoYXNEYXNoVGltZSA/IG51bGwgOiBwYXJ0KHRtLCAwLCAyKSxcbiAgICAgIG1pbnV0ZTogaGFzRGFzaFRpbWUgJiYgdG1sZW4gPT0gMyA/IHBhcnQodG0sIDEsIDIpIDogdG1sZW4gPiA0ID8gaGFzRGFzaFRpbWUgPyBwYXJ0KHRtLCAxLCAyKSA6IHBhcnQodG0sIDMsIDIpIDogbnVsbCxcbiAgICAgIHNlY29uZDogdG1sZW4gPT0gNCA/IHBhcnQodG0sIDIsIDIpIDogdG1sZW4gPT0gNiA/IHBhcnQodG0sIDQsIDIpIDogdG1sZW4gPT0gOCA/IHBhcnQodG0sIDYsIDIpIDogbnVsbFxuICAgIH07XG5cbiAgICBpZiAoem9uZSA9PSAnWicpIHtcbiAgICAgIHpvbmUgPSBUaW1lem9uZS51dGNUaW1lem9uZTtcbiAgICB9IGVsc2UgaWYgKHpvbmUgJiYgem9uZVszXSA9PSAnOicpIHtcbiAgICAgIHpvbmUgPSBVdGNPZmZzZXQuZnJvbVN0cmluZyh6b25lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgem9uZSA9IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBWQ2FyZFRpbWUobywgem9uZSwgYUljYWxUeXBlKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5WQ2FyZFRpbWUgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhlIGRhdGEgZm9yIHRoZSB0aW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS55ZWFyICAgICAgICAgICAgICAgICAgICAgVGhlIHllYXIgZm9yIHRoaXMgZGF0ZVxuICAgKiBAcGFyYW0ge051bWJlcj19IGRhdGEubW9udGggICAgICAgICAgICAgICAgICAgIFRoZSBtb250aCBmb3IgdGhpcyBkYXRlXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS5kYXkgICAgICAgICAgICAgICAgICAgICAgVGhlIGRheSBmb3IgdGhpcyBkYXRlXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS5ob3VyICAgICAgICAgICAgICAgICAgICAgVGhlIGhvdXIgZm9yIHRoaXMgZGF0ZVxuICAgKiBAcGFyYW0ge051bWJlcj19IGRhdGEubWludXRlICAgICAgICAgICAgICAgICAgIFRoZSBtaW51dGUgZm9yIHRoaXMgZGF0ZVxuICAgKiBAcGFyYW0ge051bWJlcj19IGRhdGEuc2Vjb25kICAgICAgICAgICAgICAgICAgIFRoZSBzZWNvbmQgZm9yIHRoaXMgZGF0ZVxuICAgKiBAcGFyYW0ge1RpbWV6b25lfFV0Y09mZnNldH0gem9uZSAgICAgICAgICAgICAgIFRoZSB0aW1lem9uZSB0byB1c2VcbiAgICogQHBhcmFtIHtTdHJpbmd9IGljYWx0eXBlICAgICAgICAgICAgICAgICAgICAgICBUaGUgdHlwZSBmb3IgdGhpcyBkYXRlL3RpbWUgb2JqZWN0XG4gICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhLCB6b25lLCBpY2FsdHlwZSkge1xuICAgIHN1cGVyKGRhdGEsIHpvbmUpO1xuICAgIHRoaXMuaWNhbHR5cGUgPSBpY2FsdHlwZSB8fCBcImRhdGUtYW5kLW9yLXRpbWVcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY2xhc3MgaWRlbnRpZmllci5cbiAgICogQGNvbnN0YW50XG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEBkZWZhdWx0IFwidmNhcmR0aW1lXCJcbiAgICovXG4gIGljYWxjbGFzcyA9IFwidmNhcmR0aW1lXCI7XG5cbiAgLyoqXG4gICAqIFRoZSB0eXBlIG5hbWUsIHRvIGJlIHVzZWQgaW4gdGhlIGpDYWwgb2JqZWN0LlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAZGVmYXVsdCBcImRhdGUtYW5kLW9yLXRpbWVcIlxuICAgKi9cbiAgaWNhbHR5cGUgPSBcImRhdGUtYW5kLW9yLXRpbWVcIjtcblxuICAvKipcbiAgICogUmV0dXJucyBhIGNsb25lIG9mIHRoZSB2Y2FyZCBkYXRlL3RpbWUgb2JqZWN0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtWQ2FyZFRpbWV9ICAgICBUaGUgY2xvbmVkIG9iamVjdFxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBWQ2FyZFRpbWUodGhpcy5fdGltZSwgdGhpcy56b25lLCB0aGlzLmljYWx0eXBlKTtcbiAgfVxuXG4gIF9ub3JtYWxpemUoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXRkb2NcbiAgICovXG4gIHV0Y09mZnNldCgpIHtcbiAgICBpZiAodGhpcy56b25lIGluc3RhbmNlb2YgVXRjT2Zmc2V0KSB7XG4gICAgICByZXR1cm4gdGhpcy56b25lLnRvU2Vjb25kcygpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gVGltZS5wcm90b3R5cGUudXRjT2Zmc2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gUkZDIDYzNTAgY29tcGxpYW50IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgb2JqZWN0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgdmNhcmQgZGF0ZS90aW1lIHN0cmluZ1xuICAgKi9cbiAgdG9JQ0FMU3RyaW5nKCkge1xuICAgIHJldHVybiBkZXNpZ24udmNhcmQudmFsdWVbdGhpcy5pY2FsdHlwZV0udG9JQ0FMKHRoaXMudG9TdHJpbmcoKSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGRhdGUvdGltZSwgaW4gakNhcmQgZm9ybVxuICAgKiAoaW5jbHVkaW5nIDogYW5kIC0gc2VwYXJhdG9ycykuXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIHRvU3RyaW5nKCkge1xuICAgIGxldCB5ID0gdGhpcy55ZWFyLCBtID0gdGhpcy5tb250aCwgZCA9IHRoaXMuZGF5O1xuICAgIGxldCBoID0gdGhpcy5ob3VyLCBtbSA9IHRoaXMubWludXRlLCBzID0gdGhpcy5zZWNvbmQ7XG5cbiAgICBsZXQgaGFzWWVhciA9IHkgIT09IG51bGwsIGhhc01vbnRoID0gbSAhPT0gbnVsbCwgaGFzRGF5ID0gZCAhPT0gbnVsbDtcbiAgICBsZXQgaGFzSG91ciA9IGggIT09IG51bGwsIGhhc01pbnV0ZSA9IG1tICE9PSBudWxsLCBoYXNTZWNvbmQgPSBzICE9PSBudWxsO1xuXG4gICAgbGV0IGRhdGVwYXJ0ID0gKGhhc1llYXIgPyBwYWQyKHkpICsgKGhhc01vbnRoIHx8IGhhc0RheSA/ICctJyA6ICcnKSA6IChoYXNNb250aCB8fCBoYXNEYXkgPyAnLS0nIDogJycpKSArXG4gICAgICAgICAgICAgICAgICAgKGhhc01vbnRoID8gcGFkMihtKSA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAgKGhhc0RheSA/ICctJyArIHBhZDIoZCkgOiAnJyk7XG4gICAgbGV0IHRpbWVwYXJ0ID0gKGhhc0hvdXIgPyBwYWQyKGgpIDogJy0nKSArIChoYXNIb3VyICYmIGhhc01pbnV0ZSA/ICc6JyA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAgKGhhc01pbnV0ZSA/IHBhZDIobW0pIDogJycpICsgKCFoYXNIb3VyICYmICFoYXNNaW51dGUgPyAnLScgOiAnJykgK1xuICAgICAgICAgICAgICAgICAgIChoYXNNaW51dGUgJiYgaGFzU2Vjb25kID8gJzonIDogJycpICtcbiAgICAgICAgICAgICAgICAgICAoaGFzU2Vjb25kID8gcGFkMihzKSA6ICcnKTtcblxuICAgIGxldCB6b25lO1xuICAgIGlmICh0aGlzLnpvbmUgPT09IFRpbWV6b25lLnV0Y1RpbWV6b25lKSB7XG4gICAgICB6b25lID0gJ1onO1xuICAgIH0gZWxzZSBpZiAodGhpcy56b25lIGluc3RhbmNlb2YgVXRjT2Zmc2V0KSB7XG4gICAgICB6b25lID0gdGhpcy56b25lLnRvU3RyaW5nKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnpvbmUgPT09IFRpbWV6b25lLmxvY2FsVGltZXpvbmUpIHtcbiAgICAgIHpvbmUgPSAnJztcbiAgICB9IGVsc2UgaWYgKHRoaXMuem9uZSBpbnN0YW5jZW9mIFRpbWV6b25lKSB7XG4gICAgICBsZXQgb2Zmc2V0ID0gVXRjT2Zmc2V0LmZyb21TZWNvbmRzKHRoaXMuem9uZS51dGNPZmZzZXQodGhpcykpO1xuICAgICAgem9uZSA9IG9mZnNldC50b1N0cmluZygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB6b25lID0gJyc7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0aGlzLmljYWx0eXBlKSB7XG4gICAgICBjYXNlIFwidGltZVwiOlxuICAgICAgICByZXR1cm4gdGltZXBhcnQgKyB6b25lO1xuICAgICAgY2FzZSBcImRhdGUtYW5kLW9yLXRpbWVcIjpcbiAgICAgIGNhc2UgXCJkYXRlLXRpbWVcIjpcbiAgICAgICAgcmV0dXJuIGRhdGVwYXJ0ICsgKHRpbWVwYXJ0ID09ICctLScgPyAnJyA6ICdUJyArIHRpbWVwYXJ0ICsgem9uZSk7XG4gICAgICBjYXNlIFwiZGF0ZVwiOlxuICAgICAgICByZXR1cm4gZGF0ZXBhcnQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKiBQb3J0aW9ucyBDb3B5cmlnaHQgKEMpIFBoaWxpcHAgS2V3aXNjaCAqL1xuXG5cbi8qKlxuICogVGhpcyBsZXRzIHR5cGVzY3JpcHQgcmVzb2x2ZSBvdXIgY3VzdG9tIHR5cGVzIGluIHRoZVxuICogZ2VuZXJhdGVkIGQudHMgZmlsZXMgKGpzZG9jIHR5cGVkZWZzIGFyZSBjb252ZXJ0ZWQgdG8gdHlwZXNjcmlwdCB0eXBlcykuXG4gKiBJZ25vcmUgcHJldmVudHMgdGhlIHR5cGVkZWZzIGZyb20gYmVpbmcgZG9jdW1lbnRlZCBtb3JlIHRoYW4gb25jZS5cbiAqXG4gKiBAaWdub3JlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS53ZWVrRGF5fSB3ZWVrRGF5XG4gKiBJbXBvcnRzIHRoZSAnd2Vla0RheScgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKi9cblxuLyoqXG4gKiBBbiBpdGVyYXRvciBmb3IgYSBzaW5nbGUgcmVjdXJyZW5jZSBydWxlLiBUaGlzIGNsYXNzIHVzdWFsbHkgZG9lc24ndCBoYXZlIHRvIGJlIGluc3RhbmNpYXRlZFxuICogZGlyZWN0bHksIHRoZSBjb252ZW5pZW5jZSBtZXRob2Qge0BsaW5rIElDQUwuUmVjdXIjaXRlcmF0b3J9IGNhbiBiZSB1c2VkLlxuICpcbiAqIEBtZW1iZXJvZiBJQ0FMXG4gKi9cbmNsYXNzIFJlY3VySXRlcmF0b3Ige1xuICBzdGF0aWMgX2luZGV4TWFwID0ge1xuICAgIFwiQllTRUNPTkRcIjogMCxcbiAgICBcIkJZTUlOVVRFXCI6IDEsXG4gICAgXCJCWUhPVVJcIjogMixcbiAgICBcIkJZREFZXCI6IDMsXG4gICAgXCJCWU1PTlRIREFZXCI6IDQsXG4gICAgXCJCWVlFQVJEQVlcIjogNSxcbiAgICBcIkJZV0VFS05PXCI6IDYsXG4gICAgXCJCWU1PTlRIXCI6IDcsXG4gICAgXCJCWVNFVFBPU1wiOiA4XG4gIH07XG5cbiAgc3RhdGljIF9leHBhbmRNYXAgPSB7XG4gICAgXCJTRUNPTkRMWVwiOiBbMSwgMSwgMSwgMSwgMSwgMSwgMSwgMV0sXG4gICAgXCJNSU5VVEVMWVwiOiBbMiwgMSwgMSwgMSwgMSwgMSwgMSwgMV0sXG4gICAgXCJIT1VSTFlcIjogWzIsIDIsIDEsIDEsIDEsIDEsIDEsIDFdLFxuICAgIFwiREFJTFlcIjogWzIsIDIsIDIsIDEsIDEsIDEsIDEsIDFdLFxuICAgIFwiV0VFS0xZXCI6IFsyLCAyLCAyLCAyLCAzLCAzLCAxLCAxXSxcbiAgICBcIk1PTlRITFlcIjogWzIsIDIsIDIsIDIsIDIsIDMsIDMsIDFdLFxuICAgIFwiWUVBUkxZXCI6IFsyLCAyLCAyLCAyLCAyLCAyLCAyLCAyXVxuICB9O1xuXG4gIHN0YXRpYyBVTktOT1dOID0gMDtcbiAgc3RhdGljIENPTlRSQUNUID0gMTtcbiAgc3RhdGljIEVYUEFORCA9IDI7XG4gIHN0YXRpYyBJTExFR0FMID0gMztcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBJQ0FMLlJlY3VySXRlcmF0b3IgaW5zdGFuY2UuIFRoZSBvcHRpb25zIG9iamVjdCBtYXkgY29udGFpbiBhZGRpdGlvbmFsIG1lbWJlcnNcbiAgICogd2hlbiByZXN1bWluZyBpdGVyYXRpb24gZnJvbSBhIHByZXZpb3VzIHJ1bi5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgICAgICAgICAgICAgICAgVGhlIGl0ZXJhdG9yIG9wdGlvbnNcbiAgICogQHBhcmFtIHtSZWN1cn0gb3B0aW9ucy5ydWxlICAgICAgICAgICAgVGhlIHJ1bGUgdG8gaXRlcmF0ZS5cbiAgICogQHBhcmFtIHtUaW1lfSBvcHRpb25zLmR0c3RhcnQgICAgICAgICAgVGhlIHN0YXJ0IGRhdGUgb2YgdGhlIGV2ZW50LlxuICAgKiBAcGFyYW0ge0Jvb2xlYW49fSBvcHRpb25zLmluaXRpYWxpemVkICBXaGVuIHRydWUsIGFzc3VtZSB0aGF0IG9wdGlvbnMgYXJlXG4gICAqICAgICAgICBmcm9tIGEgcHJldmlvdXNseSBjb25zdHJ1Y3RlZCBpdGVyYXRvci4gSW5pdGlhbGl6YXRpb24gd2lsbCBub3QgYmVcbiAgICogICAgICAgIHJlcGVhdGVkLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuZnJvbURhdGEob3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogVHJ1ZSB3aGVuIGl0ZXJhdGlvbiBpcyBmaW5pc2hlZC5cbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuICBjb21wbGV0ZWQgPSBmYWxzZTtcblxuICAvKipcbiAgICogVGhlIHJ1bGUgdGhhdCBpcyBiZWluZyBpdGVyYXRlZFxuICAgKiBAdHlwZSB7UmVjdXJ9XG4gICAqL1xuICBydWxlID0gbnVsbDtcblxuICAvKipcbiAgICogVGhlIHN0YXJ0IGRhdGUgb2YgdGhlIGV2ZW50IGJlaW5nIGl0ZXJhdGVkLlxuICAgKiBAdHlwZSB7VGltZX1cbiAgICovXG4gIGR0c3RhcnQgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbGFzdCBvY2N1cnJlbmNlIHRoYXQgd2FzIHJldHVybmVkIGZyb20gdGhlXG4gICAqIHtAbGluayBSZWN1ckl0ZXJhdG9yI25leHR9IG1ldGhvZC5cbiAgICogQHR5cGUge1RpbWV9XG4gICAqL1xuICBsYXN0ID0gbnVsbDtcblxuICAvKipcbiAgICogVGhlIHNlcXVlbmNlIG51bWJlciBmcm9tIHRoZSBvY2N1cnJlbmNlXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqL1xuICBvY2N1cnJlbmNlX251bWJlciA9IDA7XG5cbiAgLyoqXG4gICAqIFRoZSBpbmRpY2VzIHVzZWQgZm9yIHRoZSB7QGxpbmsgSUNBTC5SZWN1ckl0ZXJhdG9yI2J5X2RhdGF9IG9iamVjdC5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGJ5X2luZGljZXMgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBJZiB0cnVlLCB0aGUgaXRlcmF0b3IgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZFxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIFRoZSBpbml0aWFsaXpkIGJ5LWRhdGEuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBieV9kYXRhID0gbnVsbDtcblxuICAvKipcbiAgICogVGhlIGV4cGFuZGVkIHllYXJkYXlzXG4gICAqIEB0eXBlIHtBcnJheX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRheXMgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgaW5kZXggaW4gdGhlIHtAbGluayBJQ0FMLlJlY3VySXRlcmF0b3IjZGF5c30gYXJyYXkuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkYXlzX2luZGV4ID0gMDtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSB0aGUgcmVjdXJyZW5jZSBpdGVyYXRvciBmcm9tIHRoZSBwYXNzZWQgZGF0YSBvYmplY3QuIFRoaXNcbiAgICogbWV0aG9kIGlzIHVzdWFsbHkgbm90IGNhbGxlZCBkaXJlY3RseSwgeW91IGNhbiBpbml0aWFsaXplIHRoZSBpdGVyYXRvclxuICAgKiB0aHJvdWdoIHRoZSBjb25zdHJ1Y3Rvci5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgICAgICAgICAgICAgICAgVGhlIGl0ZXJhdG9yIG9wdGlvbnNcbiAgICogQHBhcmFtIHtSZWN1cn0gb3B0aW9ucy5ydWxlICAgICAgICAgICAgVGhlIHJ1bGUgdG8gaXRlcmF0ZS5cbiAgICogQHBhcmFtIHtUaW1lfSBvcHRpb25zLmR0c3RhcnQgICAgICAgICAgVGhlIHN0YXJ0IGRhdGUgb2YgdGhlIGV2ZW50LlxuICAgKiBAcGFyYW0ge0Jvb2xlYW49fSBvcHRpb25zLmluaXRpYWxpemVkICBXaGVuIHRydWUsIGFzc3VtZSB0aGF0IG9wdGlvbnMgYXJlXG4gICAqICAgICAgICBmcm9tIGEgcHJldmlvdXNseSBjb25zdHJ1Y3RlZCBpdGVyYXRvci4gSW5pdGlhbGl6YXRpb24gd2lsbCBub3QgYmVcbiAgICogICAgICAgIHJlcGVhdGVkLlxuICAgKi9cbiAgZnJvbURhdGEob3B0aW9ucykge1xuICAgIHRoaXMucnVsZSA9IGZvcm1hdENsYXNzVHlwZShvcHRpb25zLnJ1bGUsIFJlY3VyKTtcblxuICAgIGlmICghdGhpcy5ydWxlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2l0ZXJhdG9yIHJlcXVpcmVzIGEgKElDQUwuUmVjdXIpIHJ1bGUnKTtcbiAgICB9XG5cbiAgICB0aGlzLmR0c3RhcnQgPSBmb3JtYXRDbGFzc1R5cGUob3B0aW9ucy5kdHN0YXJ0LCBUaW1lKTtcblxuICAgIGlmICghdGhpcy5kdHN0YXJ0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2l0ZXJhdG9yIHJlcXVpcmVzIGEgKElDQUwuVGltZSkgZHRzdGFydCcpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmJ5X2RhdGEpIHtcbiAgICAgIHRoaXMuYnlfZGF0YSA9IG9wdGlvbnMuYnlfZGF0YTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ieV9kYXRhID0gY2xvbmUodGhpcy5ydWxlLnBhcnRzLCB0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5vY2N1cnJlbmNlX251bWJlcilcbiAgICAgIHRoaXMub2NjdXJyZW5jZV9udW1iZXIgPSBvcHRpb25zLm9jY3VycmVuY2VfbnVtYmVyO1xuXG4gICAgdGhpcy5kYXlzID0gb3B0aW9ucy5kYXlzIHx8IFtdO1xuICAgIGlmIChvcHRpb25zLmxhc3QpIHtcbiAgICAgIHRoaXMubGFzdCA9IGZvcm1hdENsYXNzVHlwZShvcHRpb25zLmxhc3QsIFRpbWUpO1xuICAgIH1cblxuICAgIHRoaXMuYnlfaW5kaWNlcyA9IG9wdGlvbnMuYnlfaW5kaWNlcztcblxuICAgIGlmICghdGhpcy5ieV9pbmRpY2VzKSB7XG4gICAgICB0aGlzLmJ5X2luZGljZXMgPSB7XG4gICAgICAgIFwiQllTRUNPTkRcIjogMCxcbiAgICAgICAgXCJCWU1JTlVURVwiOiAwLFxuICAgICAgICBcIkJZSE9VUlwiOiAwLFxuICAgICAgICBcIkJZREFZXCI6IDAsXG4gICAgICAgIFwiQllNT05USFwiOiAwLFxuICAgICAgICBcIkJZV0VFS05PXCI6IDAsXG4gICAgICAgIFwiQllNT05USERBWVwiOiAwXG4gICAgICB9O1xuICAgIH1cblxuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBvcHRpb25zLmluaXRpYWxpemVkIHx8IGZhbHNlO1xuXG4gICAgaWYgKCF0aGlzLmluaXRpYWxpemVkKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBJbnZhbGlkUmVjdXJyZW5jZVJ1bGVFcnJvcikge1xuICAgICAgICAgIC8vIEluaXQgbWF5IGVycm9yIGlmIHRoZXJlIGFyZSBubyBwb3NzaWJsZSByZWN1cnJlbmNlIGluc3RhbmNlcyBmcm9tXG4gICAgICAgICAgLy8gdGhlIHJ1bGUsIGJ1dCB3ZSBkb24ndCB3YW50IHRvIGJ1YmJsZSB0aGlzIGVycm9yIHVwLiBJbnN0ZWFkLCB3ZVxuICAgICAgICAgIC8vIGNyZWF0ZSBhbiBlbXB0eSBpdGVyYXRvci5cbiAgICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUHJvcGFnYXRlIG90aGVyIGVycm9ycyB0byBjb25zdW1lcnMuXG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSBpdGVyYXRvclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaW5pdCgpIHtcbiAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICB0aGlzLmxhc3QgPSB0aGlzLmR0c3RhcnQuY2xvbmUoKTtcbiAgICBsZXQgcGFydHMgPSB0aGlzLmJ5X2RhdGE7XG5cbiAgICBpZiAoXCJCWURBWVwiIGluIHBhcnRzKSB7XG4gICAgICAvLyBsaWJpY2FsIGRvZXMgdGhpcyBlYXJsaWVyIHdoZW4gdGhlIHJ1bGUgaXMgbG9hZGVkLCBidXQgd2UgcG9zdHBvbmUgdG9cbiAgICAgIC8vIG5vdyBzbyB3ZSBjYW4gcHJlc2VydmUgdGhlIG9yaWdpbmFsIG9yZGVyLlxuICAgICAgdGhpcy5zb3J0X2J5ZGF5X3J1bGVzKHBhcnRzLkJZREFZKTtcbiAgICB9XG5cbiAgICAvLyBUaGUgQllZRUFSREFZIG1heSBvbmx5IGFwcGVhciB3aXRoIEJZREFZXG4gICAgaWYgKFwiQllZRUFSREFZXCIgaW4gcGFydHMpIHtcbiAgICAgIGlmIChcIkJZTU9OVEhcIiBpbiBwYXJ0cyB8fCBcIkJZV0VFS05PXCIgaW4gcGFydHMgfHxcbiAgICAgICAgICBcIkJZTU9OVEhEQVlcIiBpbiBwYXJ0cykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEJZWUVBUkRBWSBydWxlXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEJZV0VFS05PIGFuZCBCWU1PTlRIREFZIHJ1bGUgcGFydHMgbWF5IG5vdCBib3RoIGFwcGVhclxuICAgIGlmIChcIkJZV0VFS05PXCIgaW4gcGFydHMgJiYgXCJCWU1PTlRIREFZXCIgaW4gcGFydHMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkJZV0VFS05PIGRvZXMgbm90IGZpdCB0byBCWU1PTlRIREFZXCIpO1xuICAgIH1cblxuICAgIC8vIEZvciBNT05USExZIHJlY3VycmVuY2VzIChGUkVRPU1PTlRITFkpIG5laXRoZXIgQllZRUFSREFZIG5vclxuICAgIC8vIEJZV0VFS05PIG1heSBhcHBlYXIuXG4gICAgaWYgKHRoaXMucnVsZS5mcmVxID09IFwiTU9OVEhMWVwiICYmXG4gICAgICAgIChcIkJZWUVBUkRBWVwiIGluIHBhcnRzIHx8IFwiQllXRUVLTk9cIiBpbiBwYXJ0cykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZvciBNT05USExZIHJlY3VycmVuY2VzIG5laXRoZXIgQllZRUFSREFZIG5vciBCWVdFRUtOTyBtYXkgYXBwZWFyXCIpO1xuICAgIH1cblxuICAgIC8vIEZvciBXRUVLTFkgcmVjdXJyZW5jZXMgKEZSRVE9V0VFS0xZKSBuZWl0aGVyIEJZTU9OVEhEQVkgbm9yXG4gICAgLy8gQllZRUFSREFZIG1heSBhcHBlYXIuXG4gICAgaWYgKHRoaXMucnVsZS5mcmVxID09IFwiV0VFS0xZXCIgJiZcbiAgICAgICAgKFwiQllZRUFSREFZXCIgaW4gcGFydHMgfHwgXCJCWU1PTlRIREFZXCIgaW4gcGFydHMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGb3IgV0VFS0xZIHJlY3VycmVuY2VzIG5laXRoZXIgQllNT05USERBWSBub3IgQllZRUFSREFZIG1heSBhcHBlYXJcIik7XG4gICAgfVxuXG4gICAgLy8gQllZRUFSREFZIG1heSBvbmx5IGFwcGVhciBpbiBZRUFSTFkgcnVsZXNcbiAgICBpZiAodGhpcy5ydWxlLmZyZXEgIT0gXCJZRUFSTFlcIiAmJiBcIkJZWUVBUkRBWVwiIGluIHBhcnRzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCWVlFQVJEQVkgbWF5IG9ubHkgYXBwZWFyIGluIFlFQVJMWSBydWxlc1wiKTtcbiAgICB9XG5cbiAgICB0aGlzLmxhc3Quc2Vjb25kID0gdGhpcy5zZXR1cF9kZWZhdWx0cyhcIkJZU0VDT05EXCIsIFwiU0VDT05ETFlcIiwgdGhpcy5kdHN0YXJ0LnNlY29uZCk7XG4gICAgdGhpcy5sYXN0Lm1pbnV0ZSA9IHRoaXMuc2V0dXBfZGVmYXVsdHMoXCJCWU1JTlVURVwiLCBcIk1JTlVURUxZXCIsIHRoaXMuZHRzdGFydC5taW51dGUpO1xuICAgIHRoaXMubGFzdC5ob3VyID0gdGhpcy5zZXR1cF9kZWZhdWx0cyhcIkJZSE9VUlwiLCBcIkhPVVJMWVwiLCB0aGlzLmR0c3RhcnQuaG91cik7XG4gICAgdGhpcy5sYXN0LmRheSA9IHRoaXMuc2V0dXBfZGVmYXVsdHMoXCJCWU1PTlRIREFZXCIsIFwiREFJTFlcIiwgdGhpcy5kdHN0YXJ0LmRheSk7XG4gICAgdGhpcy5sYXN0Lm1vbnRoID0gdGhpcy5zZXR1cF9kZWZhdWx0cyhcIkJZTU9OVEhcIiwgXCJNT05USExZXCIsIHRoaXMuZHRzdGFydC5tb250aCk7XG5cbiAgICBpZiAodGhpcy5ydWxlLmZyZXEgPT0gXCJXRUVLTFlcIikge1xuICAgICAgaWYgKFwiQllEQVlcIiBpbiBwYXJ0cykge1xuICAgICAgICBsZXQgWywgZG93XSA9IHRoaXMucnVsZURheU9mV2VlayhwYXJ0cy5CWURBWVswXSwgdGhpcy5ydWxlLndrc3QpO1xuICAgICAgICBsZXQgd2tkeSA9IGRvdyAtIHRoaXMubGFzdC5kYXlPZldlZWsodGhpcy5ydWxlLndrc3QpO1xuICAgICAgICBpZiAoKHRoaXMubGFzdC5kYXlPZldlZWsodGhpcy5ydWxlLndrc3QpIDwgZG93ICYmIHdrZHkgPj0gMCkgfHwgd2tkeSA8IDApIHtcbiAgICAgICAgICAvLyBJbml0aWFsIHRpbWUgaXMgYWZ0ZXIgZmlyc3QgZGF5IG9mIEJZREFZIGRhdGFcbiAgICAgICAgICB0aGlzLmxhc3QuZGF5ICs9IHdrZHk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBkYXlOYW1lID0gUmVjdXIubnVtZXJpY0RheVRvSWNhbERheSh0aGlzLmR0c3RhcnQuZGF5T2ZXZWVrKCkpO1xuICAgICAgICBwYXJ0cy5CWURBWSA9IFtkYXlOYW1lXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5ydWxlLmZyZXEgPT0gXCJZRUFSTFlcIikge1xuICAgICAgLy8gU29tZSB5ZWFybHkgcmVjdXJyZW5jZSBydWxlcyBtYXkgYmUgc3BlY2lmaWMgZW5vdWdoIHRvIG5vdCBhY3R1YWxseVxuICAgICAgLy8gb2NjdXIgb24gYSB5ZWFybHkgYmFzaXMsIGUuZy4gdGhlIDI5dGggZGF5IG9mIEZlYnJ1YXJ5IG9yIHRoZSBmaWZ0aFxuICAgICAgLy8gTW9uZGF5IG9mIGEgZ2l2ZW4gbW9udGguIFRoZSBzdGFuZGFyZCBpc24ndCBjbGVhciBvbiB0aGUgaW50ZW5kZWRcbiAgICAgIC8vIGJlaGF2aW9yIGluIHRoZXNlIGNhc2VzLCBidXQgYGxpYmljYWxgIGF0IGxlYXN0IHdpbGwgaXRlcmF0ZSB1bnRpbCBpdFxuICAgICAgLy8gZmluZHMgYSBtYXRjaGluZyB5ZWFyLlxuICAgICAgLy8gQ0FSRUZVTDogU29tZSBydWxlcyBtYXkgc3BlY2lmeSBhbiBvY2N1cnJlbmNlIHRoYXQgY2FuIG5ldmVyIGhhcHBlbixcbiAgICAgIC8vIGUuZy4gdGhlIGZpcnN0IE1vbmRheSBvZiBBcHJpbCBzbyBsb25nIGFzIGl0IGZhbGxzIG9uIHRoZSAxNXRoXG4gICAgICAvLyB0aHJvdWdoIHRoZSAyMXN0LiBEZXRlY3RpbmcgdGhlc2UgaXMgbm9uLXRyaXZpYWwsIHNvIGVuc3VyZSB0aGF0IHdlXG4gICAgICAvLyBzdG9wIGl0ZXJhdGluZyBhdCBzb21lIHBvaW50LlxuICAgICAgY29uc3QgdW50aWxZZWFyID0gdGhpcy5ydWxlLnVudGlsID8gdGhpcy5ydWxlLnVudGlsLnllYXIgOiAyMDAwMDtcbiAgICAgIHdoaWxlICh0aGlzLmxhc3QueWVhciA8PSB1bnRpbFllYXIpIHtcbiAgICAgICAgdGhpcy5leHBhbmRfeWVhcl9kYXlzKHRoaXMubGFzdC55ZWFyKTtcbiAgICAgICAgaWYgKHRoaXMuZGF5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbmNyZW1lbnRfeWVhcih0aGlzLnJ1bGUuaW50ZXJ2YWwpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5kYXlzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkUmVjdXJyZW5jZVJ1bGVFcnJvcigpO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGVyZSdzIG5vIG9jY3VycmVuY2UgaW4gdGhpcyB5ZWFyLCB0cnkgdGhlIGZvbGxvd2luZyB5ZWFycy4gVGhpc1xuICAgICAgLy8gd291bGQgb25seSBoYXBwZW4gbG9va2luZyBmb3IgZGF5IDM2NiBvciAtMzY2LlxuICAgICAgaWYgKCF0aGlzLl9uZXh0QnlZZWFyRGF5KCkgJiYgIXRoaXMubmV4dF95ZWFyKCkgJiYgIXRoaXMubmV4dF95ZWFyKCkgJiYgIXRoaXMubmV4dF95ZWFyKCkpIHtcbiAgICAgICAgLy8gVGhpcyBzaG91bGQgbm90IGJlIHBvc3NpYmxlLCBidXQganVzdCBpbiBjYXNlIGl0IGlzLCBzdG9wLlxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFJlY3VycmVuY2VSdWxlRXJyb3IoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5ydWxlLmZyZXEgPT0gXCJNT05USExZXCIpIHtcbiAgICAgIGlmICh0aGlzLmhhc19ieV9kYXRhKFwiQllEQVlcIikpIHtcbiAgICAgICAgbGV0IHRlbXBMYXN0ID0gbnVsbDtcbiAgICAgICAgbGV0IGluaXRMYXN0ID0gdGhpcy5sYXN0LmNsb25lKCk7XG4gICAgICAgIGxldCBkYXlzSW5Nb250aCA9IFRpbWUuZGF5c0luTW9udGgodGhpcy5sYXN0Lm1vbnRoLCB0aGlzLmxhc3QueWVhcik7XG5cbiAgICAgICAgLy8gQ2hlY2sgZXZlcnkgd2Vla2RheSBpbiBCWURBWSB3aXRoIHJlbGF0aXZlIGRvdyBhbmQgcG9zLlxuICAgICAgICBmb3IgKGxldCBieWRvdyBvZiB0aGlzLmJ5X2RhdGEuQllEQVkpIHtcbiAgICAgICAgICB0aGlzLmxhc3QgPSBpbml0TGFzdC5jbG9uZSgpO1xuICAgICAgICAgIGxldCBbcG9zLCBkb3ddID0gdGhpcy5ydWxlRGF5T2ZXZWVrKGJ5ZG93KTtcbiAgICAgICAgICBsZXQgZGF5T2ZNb250aCA9IHRoaXMubGFzdC5udGhXZWVrRGF5KGRvdywgcG9zKTtcblxuICAgICAgICAgIC8vIElmIHxwb3N8ID49IDYsIHRoZSBieWRheSBpcyBpbnZhbGlkIGZvciBhIG1vbnRobHkgcnVsZS5cbiAgICAgICAgICBpZiAocG9zID49IDYgfHwgcG9zIDw9IC02KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYWxmb3JtZWQgdmFsdWVzIGluIEJZREFZIHBhcnRcIik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSWYgYSBCeWRheSB3aXRoIHBvcz0rLy01IGlzIG5vdCBpbiB0aGUgY3VycmVudCBtb250aCBpdFxuICAgICAgICAgIC8vIG11c3QgYmUgc2VhcmNoZWQgaW4gdGhlIG5leHQgbW9udGhzLlxuICAgICAgICAgIGlmIChkYXlPZk1vbnRoID4gZGF5c0luTW9udGggfHwgZGF5T2ZNb250aCA8PSAwKSB7XG4gICAgICAgICAgICAvLyBTa2lwIGlmIHdlIGhhdmUgYWxyZWFkeSBmb3VuZCBhIFwibGFzdFwiIGluIHRoaXMgbW9udGguXG4gICAgICAgICAgICBpZiAodGVtcExhc3QgJiYgdGVtcExhc3QubW9udGggPT0gaW5pdExhc3QubW9udGgpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoZGF5T2ZNb250aCA+IGRheXNJbk1vbnRoIHx8IGRheU9mTW9udGggPD0gMCkge1xuICAgICAgICAgICAgICB0aGlzLmluY3JlbWVudF9tb250aCgpO1xuICAgICAgICAgICAgICBkYXlzSW5Nb250aCA9IFRpbWUuZGF5c0luTW9udGgodGhpcy5sYXN0Lm1vbnRoLCB0aGlzLmxhc3QueWVhcik7XG4gICAgICAgICAgICAgIGRheU9mTW9udGggPSB0aGlzLmxhc3QubnRoV2Vla0RheShkb3csIHBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5sYXN0LmRheSA9IGRheU9mTW9udGg7XG4gICAgICAgICAgaWYgKCF0ZW1wTGFzdCB8fCB0aGlzLmxhc3QuY29tcGFyZSh0ZW1wTGFzdCkgPCAwKSB7XG4gICAgICAgICAgICB0ZW1wTGFzdCA9IHRoaXMubGFzdC5jbG9uZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3QgPSB0ZW1wTGFzdC5jbG9uZSgpO1xuXG4gICAgICAgIC8vWFhYOiBUaGlzIGZlZWxzIGxpa2UgYSBoYWNrLCBidXQgd2UgbmVlZCB0byBpbml0aWFsaXplXG4gICAgICAgIC8vICAgICB0aGUgQllNT05USERBWSBjYXNlIGNvcnJlY3RseSBhbmQgYnlEYXlBbmRNb250aERheSBoYW5kbGVzXG4gICAgICAgIC8vICAgICB0aGlzIGNhc2UuIEl0IGFjY2VwdHMgYSBzcGVjaWFsIGZsYWcgd2hpY2ggd2lsbCBhdm9pZCBpbmNyZW1lbnRpbmdcbiAgICAgICAgLy8gICAgIHRoZSBpbml0aWFsIHZhbHVlIHdpdGhvdXQgdGhlIGZsYWcgZGF5cyB0aGF0IG1hdGNoIHRoZSBzdGFydCB0aW1lXG4gICAgICAgIC8vICAgICB3b3VsZCBiZSBtaXNzZWQuXG4gICAgICAgIGlmICh0aGlzLmhhc19ieV9kYXRhKCdCWU1PTlRIREFZJykpIHtcbiAgICAgICAgICB0aGlzLl9ieURheUFuZE1vbnRoRGF5KHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubGFzdC5kYXkgPiBkYXlzSW5Nb250aCB8fCB0aGlzLmxhc3QuZGF5ID09IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYWxmb3JtZWQgdmFsdWVzIGluIEJZREFZIHBhcnRcIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5oYXNfYnlfZGF0YShcIkJZTU9OVEhEQVlcIikpIHtcbiAgICAgICAgLy8gQ2hhbmdlIHRoZSBkYXkgdmFsdWUgc28gdGhhdCBub3JtYWxpc2F0aW9uIHdvbid0IGNoYW5nZSB0aGUgbW9udGguXG4gICAgICAgIHRoaXMubGFzdC5kYXkgPSAxO1xuXG4gICAgICAgIC8vIEdldCBhIHNvcnRlZCBsaXN0IG9mIGRheXMgaW4gdGhlIHN0YXJ0aW5nIG1vbnRoIHRoYXQgbWF0Y2ggdGhlIHJ1bGUuXG4gICAgICAgIGxldCBub3JtYWxpemVkID0gdGhpcy5ub3JtYWxpemVCeU1vbnRoRGF5UnVsZXMoXG4gICAgICAgICAgdGhpcy5sYXN0LnllYXIsXG4gICAgICAgICAgdGhpcy5sYXN0Lm1vbnRoLFxuICAgICAgICAgIHRoaXMucnVsZS5wYXJ0cy5CWU1PTlRIREFZXG4gICAgICAgICkuZmlsdGVyKGQgPT4gZCA+PSB0aGlzLmxhc3QuZGF5KTtcblxuICAgICAgICBpZiAobm9ybWFsaXplZC5sZW5ndGgpIHtcbiAgICAgICAgICAvLyBUaGVyZSdzIGF0IGxlYXN0IG9uZSB2YWxpZCBkYXksIHVzZSBpdC5cbiAgICAgICAgICB0aGlzLmxhc3QuZGF5ID0gbm9ybWFsaXplZFswXTtcbiAgICAgICAgICB0aGlzLmJ5X2RhdGEuQllNT05USERBWSA9IG5vcm1hbGl6ZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVGhlcmUncyBubyBvY2N1cnJlbmNlIGluIHRoaXMgbW9udGgsIGZpbmQgdGhlIG5leHQgdmFsaWQgbW9udGguXG4gICAgICAgICAgLy8gVGhlIGxvbmdlc3QgcG9zc2libGUgc2VxdWVuY2Ugb2Ygc2tpcHBlZCBtb250aHMgaXMgRmVicnVhcnktQXByaWwtSnVuZSxcbiAgICAgICAgICAvLyBzbyB3ZSBtaWdodCBuZWVkIHRvIGNhbGwgbmV4dF9tb250aCB1cCB0byB0aHJlZSB0aW1lcy5cbiAgICAgICAgICBpZiAoIXRoaXMubmV4dF9tb250aCgpICYmICF0aGlzLm5leHRfbW9udGgoKSAmJiAhdGhpcy5uZXh0X21vbnRoKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkUmVjdXJyZW5jZVJ1bGVFcnJvcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSB0aGUgbmV4dCBvY2N1cnJlbmNlIGZyb20gdGhlIGl0ZXJhdG9yLlxuICAgKiBAcmV0dXJuIHtUaW1lfVxuICAgKi9cbiAgbmV4dChhZ2FpbiA9IGZhbHNlKSB7XG4gICAgbGV0IGJlZm9yZSA9ICh0aGlzLmxhc3QgPyB0aGlzLmxhc3QuY2xvbmUoKSA6IG51bGwpO1xuXG4gICAgaWYgKCh0aGlzLnJ1bGUuY291bnQgJiYgdGhpcy5vY2N1cnJlbmNlX251bWJlciA+PSB0aGlzLnJ1bGUuY291bnQpIHx8XG4gICAgICAgICh0aGlzLnJ1bGUudW50aWwgJiYgdGhpcy5sYXN0LmNvbXBhcmUodGhpcy5ydWxlLnVudGlsKSA+IDApKSB7XG4gICAgICB0aGlzLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29tcGxldGVkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vY2N1cnJlbmNlX251bWJlciA9PSAwICYmIHRoaXMubGFzdC5jb21wYXJlKHRoaXMuZHRzdGFydCkgPj0gMCkge1xuICAgICAgLy8gRmlyc3Qgb2YgYWxsLCBnaXZlIHRoZSBpbnN0YW5jZSB0aGF0IHdhcyBpbml0aWFsaXplZFxuICAgICAgdGhpcy5vY2N1cnJlbmNlX251bWJlcisrO1xuICAgICAgcmV0dXJuIHRoaXMubGFzdDtcbiAgICB9XG5cbiAgICBsZXQgdmFsaWQ7XG4gICAgbGV0IGludmFsaWRfY291bnQgPSAwO1xuICAgIGRvIHtcbiAgICAgIHZhbGlkID0gMTtcblxuICAgICAgc3dpdGNoICh0aGlzLnJ1bGUuZnJlcSkge1xuICAgICAgY2FzZSBcIlNFQ09ORExZXCI6XG4gICAgICAgIHRoaXMubmV4dF9zZWNvbmQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiTUlOVVRFTFlcIjpcbiAgICAgICAgdGhpcy5uZXh0X21pbnV0ZSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJIT1VSTFlcIjpcbiAgICAgICAgdGhpcy5uZXh0X2hvdXIoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiREFJTFlcIjpcbiAgICAgICAgdGhpcy5uZXh0X2RheSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJXRUVLTFlcIjpcbiAgICAgICAgdGhpcy5uZXh0X3dlZWsoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiTU9OVEhMWVwiOlxuICAgICAgICB2YWxpZCA9IHRoaXMubmV4dF9tb250aCgpO1xuICAgICAgICBpZiAodmFsaWQpIHtcbiAgICAgICAgICBpbnZhbGlkX2NvdW50ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmICgrK2ludmFsaWRfY291bnQgPT0gMzM2KSB7XG4gICAgICAgICAgLy8gV2UndmUgYmVlbiB0aHJvdWdoIGFsbCA5MSBtb250aCB2YXJpYXRpb25zIGFuZCBub3QgZm91bmQgYSByZWN1cnJlbmNlLiBTdG9wLlxuICAgICAgICAgIC8vICgxMiBtb250aHMgYW5kIDI5LWRheSBGZWJydWFyeSDDlyA3IHN0YXJ0aW5nIGRheXMuKVxuICAgICAgICAgIHRoaXMuY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJZRUFSTFlcIjpcbiAgICAgICAgdmFsaWQgPSB0aGlzLm5leHRfeWVhcigpO1xuICAgICAgICBpZiAodmFsaWQpIHtcbiAgICAgICAgICBpbnZhbGlkX2NvdW50ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmICgrK2ludmFsaWRfY291bnQgPT0gMjgpIHtcbiAgICAgICAgICAvLyBXZSd2ZSBiZWVuIHRocm91Z2ggYWxsIDE0IHllYXIgdmFyaWF0aW9ucyBhbmQgbm90IGZvdW5kIGEgcmVjdXJyZW5jZS4gU3RvcC5cbiAgICAgICAgICAvLyAoMzY1LWRheSBhbmQgMzY2LWRheSB5ZWFycyDDlyA3IHN0YXJ0aW5nIGRheXMuKVxuICAgICAgICAgIHRoaXMuY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSB3aGlsZSAoIXRoaXMuY2hlY2tfY29udHJhY3RpbmdfcnVsZXMoKSB8fFxuICAgICAgICAgICAgIHRoaXMubGFzdC5jb21wYXJlKHRoaXMuZHRzdGFydCkgPCAwIHx8XG4gICAgICAgICAgICAgIXZhbGlkKTtcblxuICAgIGlmICh0aGlzLmxhc3QuY29tcGFyZShiZWZvcmUpID09IDApIHtcbiAgICAgIGlmIChhZ2Fpbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTYW1lIG9jY3VycmVuY2UgZm91bmQgdHdpY2UsIHByb3RlY3RpbmcgeW91IGZyb20gZGVhdGggYnkgcmVjdXJzaW9uXCIpO1xuICAgICAgfVxuICAgICAgdGhpcy5uZXh0KHRydWUpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJ1bGUudW50aWwgJiYgdGhpcy5sYXN0LmNvbXBhcmUodGhpcy5ydWxlLnVudGlsKSA+IDApIHtcbiAgICAgIHRoaXMuY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9jY3VycmVuY2VfbnVtYmVyKys7XG4gICAgICByZXR1cm4gdGhpcy5sYXN0O1xuICAgIH1cbiAgfVxuXG4gIG5leHRfc2Vjb25kKCkge1xuICAgIHJldHVybiB0aGlzLm5leHRfZ2VuZXJpYyhcIkJZU0VDT05EXCIsIFwiU0VDT05ETFlcIiwgXCJzZWNvbmRcIiwgXCJtaW51dGVcIik7XG4gIH1cblxuICBpbmNyZW1lbnRfc2Vjb25kKGluYykge1xuICAgIHJldHVybiB0aGlzLmluY3JlbWVudF9nZW5lcmljKGluYywgXCJzZWNvbmRcIiwgNjAsIFwibWludXRlXCIpO1xuICB9XG5cbiAgbmV4dF9taW51dGUoKSB7XG4gICAgcmV0dXJuIHRoaXMubmV4dF9nZW5lcmljKFwiQllNSU5VVEVcIiwgXCJNSU5VVEVMWVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1pbnV0ZVwiLCBcImhvdXJcIiwgXCJuZXh0X3NlY29uZFwiKTtcbiAgfVxuXG4gIGluY3JlbWVudF9taW51dGUoaW5jKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5jcmVtZW50X2dlbmVyaWMoaW5jLCBcIm1pbnV0ZVwiLCA2MCwgXCJob3VyXCIpO1xuICB9XG5cbiAgbmV4dF9ob3VyKCkge1xuICAgIHJldHVybiB0aGlzLm5leHRfZ2VuZXJpYyhcIkJZSE9VUlwiLCBcIkhPVVJMWVwiLCBcImhvdXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtb250aGRheVwiLCBcIm5leHRfbWludXRlXCIpO1xuICB9XG5cbiAgaW5jcmVtZW50X2hvdXIoaW5jKSB7XG4gICAgdGhpcy5pbmNyZW1lbnRfZ2VuZXJpYyhpbmMsIFwiaG91clwiLCAyNCwgXCJtb250aGRheVwiKTtcbiAgfVxuXG4gIG5leHRfZGF5KCkge1xuICAgIGxldCB0aGlzX2ZyZXEgPSAodGhpcy5ydWxlLmZyZXEgPT0gXCJEQUlMWVwiKTtcblxuICAgIGlmICh0aGlzLm5leHRfaG91cigpID09IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGlmICh0aGlzX2ZyZXEpIHtcbiAgICAgIHRoaXMuaW5jcmVtZW50X21vbnRoZGF5KHRoaXMucnVsZS5pbnRlcnZhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaW5jcmVtZW50X21vbnRoZGF5KDEpO1xuICAgIH1cblxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgbmV4dF93ZWVrKCkge1xuICAgIGxldCBlbmRfb2ZfZGF0YSA9IDA7XG5cbiAgICBpZiAodGhpcy5uZXh0X3dlZWtkYXlfYnlfd2VlaygpID09IDApIHtcbiAgICAgIHJldHVybiBlbmRfb2ZfZGF0YTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5oYXNfYnlfZGF0YShcIkJZV0VFS05PXCIpKSB7XG4gICAgICB0aGlzLmJ5X2luZGljZXMuQllXRUVLTk8rKztcblxuICAgICAgaWYgKHRoaXMuYnlfaW5kaWNlcy5CWVdFRUtOTyA9PSB0aGlzLmJ5X2RhdGEuQllXRUVLTk8ubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuYnlfaW5kaWNlcy5CWVdFRUtOTyA9IDA7XG4gICAgICAgIGVuZF9vZl9kYXRhID0gMTtcbiAgICAgIH1cblxuICAgICAgLy8gSEFDSyBzaG91bGQgYmUgZmlyc3QgbW9udGggb2YgdGhlIHllYXJcbiAgICAgIHRoaXMubGFzdC5tb250aCA9IDE7XG4gICAgICB0aGlzLmxhc3QuZGF5ID0gMTtcblxuICAgICAgbGV0IHdlZWtfbm8gPSB0aGlzLmJ5X2RhdGEuQllXRUVLTk9bdGhpcy5ieV9pbmRpY2VzLkJZV0VFS05PXTtcblxuICAgICAgdGhpcy5sYXN0LmRheSArPSA3ICogd2Vla19ubztcblxuICAgICAgaWYgKGVuZF9vZl9kYXRhKSB7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50X3llYXIoMSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEp1bXAgdG8gdGhlIG5leHQgd2Vla1xuICAgICAgdGhpcy5pbmNyZW1lbnRfbW9udGhkYXkoNyAqIHRoaXMucnVsZS5pbnRlcnZhbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVuZF9vZl9kYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZSBlYWNoIGJ5IGRheSBydWxlIGZvciBhIGdpdmVuIHllYXIvbW9udGguXG4gICAqIFRha2VzIGludG8gYWNjb3VudCBvcmRlcmluZyBhbmQgbmVnYXRpdmUgcnVsZXNcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHllYXIgICAgICAgICBDdXJyZW50IHllYXIuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBtb250aCAgICAgICAgQ3VycmVudCBtb250aC5cbiAgICogQHBhcmFtIHtBcnJheX0gIHJ1bGVzICAgICAgICBBcnJheSBvZiBydWxlcy5cbiAgICpcbiAgICogQHJldHVybiB7QXJyYXl9IHNvcnRlZCBhbmQgbm9ybWFsaXplZCBydWxlcy5cbiAgICogICAgICAgICAgICAgICAgIE5lZ2F0aXZlIHJ1bGVzIHdpbGwgYmUgZXhwYW5kZWQgdG8gdGhlaXJcbiAgICogICAgICAgICAgICAgICAgIGNvcnJlY3QgcG9zaXRpdmUgdmFsdWVzIGZvciBlYXNpZXIgcHJvY2Vzc2luZy5cbiAgICovXG4gIG5vcm1hbGl6ZUJ5TW9udGhEYXlSdWxlcyh5ZWFyLCBtb250aCwgcnVsZXMpIHtcbiAgICBsZXQgZGF5c0luTW9udGggPSBUaW1lLmRheXNJbk1vbnRoKG1vbnRoLCB5ZWFyKTtcblxuICAgIC8vIFhYWDogVGhpcyBpcyBwcm9iYWJseSBiYWQgZm9yIHBlcmZvcm1hbmNlIHRvIGFsbG9jYXRlXG4gICAgLy8gICAgICBhIG5ldyBhcnJheSBmb3IgZWFjaCBtb250aCB3ZSBzY2FuLCBpZiBwb3NzaWJsZVxuICAgIC8vICAgICAgd2Ugc2hvdWxkIHRyeSB0byBvcHRpbWl6ZSB0aGlzLi4uXG4gICAgbGV0IG5ld1J1bGVzID0gW107XG5cbiAgICBsZXQgcnVsZUlkeCA9IDA7XG4gICAgbGV0IGxlbiA9IHJ1bGVzLmxlbmd0aDtcbiAgICBsZXQgcnVsZTtcblxuICAgIGZvciAoOyBydWxlSWR4IDwgbGVuOyBydWxlSWR4KyspIHtcbiAgICAgIHJ1bGUgPSBwYXJzZUludChydWxlc1tydWxlSWR4XSwgMTApO1xuICAgICAgaWYgKGlzTmFOKHJ1bGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBCWU1PTlRIREFZIHZhbHVlJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIHRoaXMgcnVsZSBmYWxscyBvdXRzaWRlIG9mIGdpdmVuXG4gICAgICAvLyBtb250aCBkaXNjYXJkIGl0LlxuICAgICAgaWYgKE1hdGguYWJzKHJ1bGUpID4gZGF5c0luTW9udGgpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIG5lZ2F0aXZlIGNhc2VcbiAgICAgIGlmIChydWxlIDwgMCkge1xuICAgICAgICAvLyB3ZSBhZGQgKG5vdCBzdWJ0cmFjdCBpdCBpcyBhIG5lZ2F0aXZlIG51bWJlcilcbiAgICAgICAgLy8gb25lIGZyb20gdGhlIHJ1bGUgYmVjYXVzZSAxID09PSBsYXN0IGRheSBvZiBtb250aFxuICAgICAgICBydWxlID0gZGF5c0luTW9udGggKyAocnVsZSArIDEpO1xuICAgICAgfSBlbHNlIGlmIChydWxlID09PSAwKSB7XG4gICAgICAgIC8vIHNraXAgemVybzogaXQgaXMgaW52YWxpZC5cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIG9ubHkgYWRkIHVuaXF1ZSBpdGVtcy4uLlxuICAgICAgaWYgKG5ld1J1bGVzLmluZGV4T2YocnVsZSkgPT09IC0xKSB7XG4gICAgICAgIG5ld1J1bGVzLnB1c2gocnVsZSk7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICAvLyB1bmlxdWUgYW5kIHNvcnRcbiAgICByZXR1cm4gbmV3UnVsZXMuc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhIC0gYjsgfSk7XG4gIH1cblxuICAvKipcbiAgICogTk9URVM6XG4gICAqIFdlIGFyZSBnaXZlbiBhIGxpc3Qgb2YgZGF0ZXMgaW4gdGhlIG1vbnRoIChCWU1PTlRIREFZKSAoMjMsIGV0Yy4uKVxuICAgKiBBbHNvIHdlIGFyZSBnaXZlbiBhIGxpc3Qgb2YgZGF5cyAoQllEQVkpIChNTywgMlNVLCBldGMuLikgd2hlblxuICAgKiBib3RoIGNvbmRpdGlvbnMgbWF0Y2ggYSBnaXZlbiBkYXRlICh0aGlzLmxhc3QuZGF5KSBpdGVyYXRpb24gc3RvcHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Qm9vbGVhbj19IGlzSW5pdCAgICAgV2hlbiBnaXZlbiB0cnVlIHdpbGwgbm90IGluY3JlbWVudCB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgZGF5ICh0aGlzLmxhc3QpLlxuICAgKi9cbiAgX2J5RGF5QW5kTW9udGhEYXkoaXNJbml0KSB7XG4gICAgbGV0IGJ5TW9udGhEYXk7IC8vIHNldHVwIGluIGluaXRNb250aFxuICAgIGxldCBieURheSA9IHRoaXMuYnlfZGF0YS5CWURBWTtcblxuICAgIGxldCBkYXRlO1xuICAgIGxldCBkYXRlSWR4ID0gMDtcbiAgICBsZXQgZGF0ZUxlbjsgLy8gc2V0dXAgaW4gaW5pdE1vbnRoXG4gICAgbGV0IGRheUxlbiA9IGJ5RGF5Lmxlbmd0aDtcblxuICAgIC8vIHdlIGFyZSBub3QgdmFsaWQgYnkgZGVmYXVsdFxuICAgIGxldCBkYXRhSXNWYWxpZCA9IDA7XG5cbiAgICBsZXQgZGF5c0luTW9udGg7XG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgIC8vIHdlIG5lZWQgYSBjb3B5IG9mIHRoaXMsIGJlY2F1c2UgYSBEYXRlVGltZSBnZXRzIG5vcm1hbGl6ZWRcbiAgICAvLyBhdXRvbWF0aWNhbGx5IGlmIHRoZSBkYXkgaXMgb3V0IG9mIHJhbmdlLiBBdCBzb21lIHBvaW50cyB3ZVxuICAgIC8vIHNldCB0aGUgbGFzdCBkYXkgdG8gMCB0byBzdGFydCBjb3VudGluZy5cbiAgICBsZXQgbGFzdERheSA9IHRoaXMubGFzdC5kYXk7XG5cbiAgICBmdW5jdGlvbiBpbml0TW9udGgoKSB7XG4gICAgICBkYXlzSW5Nb250aCA9IFRpbWUuZGF5c0luTW9udGgoXG4gICAgICAgIHNlbGYubGFzdC5tb250aCwgc2VsZi5sYXN0LnllYXJcbiAgICAgICk7XG5cbiAgICAgIGJ5TW9udGhEYXkgPSBzZWxmLm5vcm1hbGl6ZUJ5TW9udGhEYXlSdWxlcyhcbiAgICAgICAgc2VsZi5sYXN0LnllYXIsXG4gICAgICAgIHNlbGYubGFzdC5tb250aCxcbiAgICAgICAgc2VsZi5ieV9kYXRhLkJZTU9OVEhEQVlcbiAgICAgICk7XG5cbiAgICAgIGRhdGVMZW4gPSBieU1vbnRoRGF5Lmxlbmd0aDtcblxuICAgICAgLy8gRm9yIHRoZSBjYXNlIG9mIG1vcmUgdGhhbiBvbmUgb2NjdXJyZW5jZSBpbiBvbmUgbW9udGhcbiAgICAgIC8vIHdlIGhhdmUgdG8gYmUgc3VyZSB0byBzdGFydCBzZWFyY2hpbmcgYWZ0ZXIgdGhlIGxhc3RcbiAgICAgIC8vIGZvdW5kIGRhdGUgb3IgYXQgdGhlIGxhc3QgQllNT05USERBWSwgdW5sZXNzIHdlIGFyZVxuICAgICAgLy8gaW5pdGlhbGl6aW5nIHRoZSBpdGVyYXRvciBiZWNhdXNlIGluIHRoaXMgY2FzZSB3ZSBoYXZlXG4gICAgICAvLyB0byBjb25zaWRlciB0aGUgbGFzdCBmb3VuZCBkYXRlIHRvby5cbiAgICAgIHdoaWxlIChieU1vbnRoRGF5W2RhdGVJZHhdIDw9IGxhc3REYXkgJiZcbiAgICAgICAgICAgICAhKGlzSW5pdCAmJiBieU1vbnRoRGF5W2RhdGVJZHhdID09IGxhc3REYXkpICYmXG4gICAgICAgICAgICAgZGF0ZUlkeCA8IGRhdGVMZW4gLSAxKSB7XG4gICAgICAgIGRhdGVJZHgrKztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBuZXh0TW9udGgoKSB7XG4gICAgICAvLyBzaW5jZSB0aGUgZGF5IGlzIGluY3JlbWVudGVkIGF0IHRoZSBzdGFydFxuICAgICAgLy8gb2YgdGhlIGxvb3AgYmVsb3csIHdlIG5lZWQgdG8gc3RhcnQgYXQgMFxuICAgICAgbGFzdERheSA9IDA7XG4gICAgICBzZWxmLmluY3JlbWVudF9tb250aCgpO1xuICAgICAgZGF0ZUlkeCA9IDA7XG4gICAgICBpbml0TW9udGgoKTtcbiAgICB9XG5cbiAgICBpbml0TW9udGgoKTtcblxuICAgIC8vIHNob3VsZCBjb21lIGFmdGVyIGluaXRNb250aFxuICAgIGlmIChpc0luaXQpIHtcbiAgICAgIGxhc3REYXkgLT0gMTtcbiAgICB9XG5cbiAgICAvLyBVc2UgYSBjb3VudGVyIHRvIGF2b2lkIGFuIGluZmluaXRlIGxvb3Agd2l0aCBtYWxmb3JtZWQgcnVsZXMuXG4gICAgLy8gU3RvcCBjaGVja2luZyBhZnRlciA0IHllYXJzIHNvIHdlIGNvbnNpZGVyIGFsc28gYSBsZWFwIHllYXIuXG4gICAgbGV0IG1vbnRoc0NvdW50ZXIgPSA0ODtcblxuICAgIHdoaWxlICghZGF0YUlzVmFsaWQgJiYgbW9udGhzQ291bnRlcikge1xuICAgICAgbW9udGhzQ291bnRlci0tO1xuICAgICAgLy8gaW5jcmVtZW50IHRoZSBjdXJyZW50IGRhdGUuIFRoaXMgaXMgcmVhbGx5XG4gICAgICAvLyBpbXBvcnRhbnQgb3RoZXJ3aXNlIHdlIG1heSBmYWxsIGludG8gdGhlIGluZmluaXRlXG4gICAgICAvLyBsb29wIHRyYXAuIFRoZSBpbml0aWFsIGRhdGUgdGFrZXMgY2FyZSBvZiB0aGUgY2FzZVxuICAgICAgLy8gd2hlcmUgdGhlIGN1cnJlbnQgZGF0ZSBpcyB0aGUgZGF0ZSB3ZSBhcmUgbG9va2luZ1xuICAgICAgLy8gZm9yLlxuICAgICAgZGF0ZSA9IGxhc3REYXkgKyAxO1xuXG4gICAgICBpZiAoZGF0ZSA+IGRheXNJbk1vbnRoKSB7XG4gICAgICAgIG5leHRNb250aCgpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gZmluZCBuZXh0IGRhdGVcbiAgICAgIGxldCBuZXh0ID0gYnlNb250aERheVtkYXRlSWR4KytdO1xuXG4gICAgICAvLyB0aGlzIGxvZ2ljIGlzIGRlcGVuZGVudCBvbiB0aGUgQllNT05USERBWVNcbiAgICAgIC8vIGJlaW5nIGluIG9yZGVyICh3aGljaCBpcyBkb25lIGJ5ICNub3JtYWxpemVCeU1vbnRoRGF5UnVsZXMpXG4gICAgICBpZiAobmV4dCA+PSBkYXRlKSB7XG4gICAgICAgIC8vIGlmIHRoZSBuZXh0IG1vbnRoIGRheSBpcyBpbiB0aGUgZnV0dXJlIGp1bXAgdG8gaXQuXG4gICAgICAgIGxhc3REYXkgPSBuZXh0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaW4gdGhpcyBjYXNlIHRoZSAnbmV4dCcgbW9udGhkYXkgaGFzIHBhc3RcbiAgICAgICAgLy8gd2UgbXVzdCBtb3ZlIHRvIHRoZSBtb250aC5cbiAgICAgICAgbmV4dE1vbnRoKCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBOb3cgd2UgY2FuIGxvb3AgdGhyb3VnaCB0aGUgZGF5IHJ1bGVzIHRvIHNlZVxuICAgICAgLy8gaWYgb25lIG1hdGNoZXMgdGhlIGN1cnJlbnQgbW9udGggZGF0ZS5cbiAgICAgIGZvciAobGV0IGRheUlkeCA9IDA7IGRheUlkeCA8IGRheUxlbjsgZGF5SWR4KyspIHtcbiAgICAgICAgbGV0IHBhcnRzID0gdGhpcy5ydWxlRGF5T2ZXZWVrKGJ5RGF5W2RheUlkeF0pO1xuICAgICAgICBsZXQgcG9zID0gcGFydHNbMF07XG4gICAgICAgIGxldCBkb3cgPSBwYXJ0c1sxXTtcblxuICAgICAgICB0aGlzLmxhc3QuZGF5ID0gbGFzdERheTtcbiAgICAgICAgaWYgKHRoaXMubGFzdC5pc050aFdlZWtEYXkoZG93LCBwb3MpKSB7XG4gICAgICAgICAgLy8gd2hlbiB3ZSBmaW5kIHRoZSB2YWxpZCBvbmUgd2UgY2FuIG1hcmtcbiAgICAgICAgICAvLyB0aGUgY29uZGl0aW9ucyBhcyBtZXQgYW5kIGJyZWFrIHRoZSBsb29wLlxuICAgICAgICAgIC8vIChCZWNhdXNlIHdlIGhhdmUgdGhpcyBjb25kaXRpb24gYWJvdmVcbiAgICAgICAgICAvLyAgaXQgd2lsbCBhbHNvIGJyZWFrIHRoZSBwYXJlbnQgbG9vcCkuXG4gICAgICAgICAgZGF0YUlzVmFsaWQgPSAxO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEl0IGlzIGNvbXBsZXRlbHkgcG9zc2libGUgdGhhdCB0aGUgY29tYmluYXRpb25cbiAgICAgIC8vIGNhbm5vdCBiZSBtYXRjaGVkIGluIHRoZSBjdXJyZW50IG1vbnRoLlxuICAgICAgLy8gV2hlbiB3ZSByZWFjaCB0aGUgZW5kIG9mIHBvc3NpYmxlIGNvbWJpbmF0aW9uc1xuICAgICAgLy8gaW4gdGhlIGN1cnJlbnQgbW9udGggd2UgaXRlcmF0ZSB0byB0aGUgbmV4dCBvbmUuXG4gICAgICAvLyBzaW5jZSBkYXRlSWR4IGlzIGluY3JlbWVudGVkIHJpZ2h0IGFmdGVyIGdldHRpbmdcbiAgICAgIC8vIFwibmV4dFwiLCB3ZSBkb24ndCBuZWVkIGRhdGVMZW4gLTEgaGVyZS5cbiAgICAgIGlmICghZGF0YUlzVmFsaWQgJiYgZGF0ZUlkeCA9PT0gZGF0ZUxlbikge1xuICAgICAgICBuZXh0TW9udGgoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1vbnRoc0NvdW50ZXIgPD0gMCkge1xuICAgICAgLy8gQ2hlY2tlZCA0IHllYXJzIHdpdGhvdXQgZmluZGluZyBhIEJ5ZGF5IHRoYXQgbWF0Y2hlc1xuICAgICAgLy8gYSBCeW1vbnRoZGF5LiBNYXliZSB0aGUgcnVsZSBpcyBub3QgY29ycmVjdC5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk1hbGZvcm1lZCB2YWx1ZXMgaW4gQllEQVkgY29tYmluZWQgd2l0aCBCWU1PTlRIREFZIHBhcnRzXCIpO1xuICAgIH1cblxuXG4gICAgcmV0dXJuIGRhdGFJc1ZhbGlkO1xuICB9XG5cbiAgbmV4dF9tb250aCgpIHtcbiAgICBsZXQgZGF0YV92YWxpZCA9IDE7XG5cbiAgICBpZiAodGhpcy5uZXh0X2hvdXIoKSA9PSAwKSB7XG4gICAgICByZXR1cm4gZGF0YV92YWxpZDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5oYXNfYnlfZGF0YShcIkJZREFZXCIpICYmIHRoaXMuaGFzX2J5X2RhdGEoXCJCWU1PTlRIREFZXCIpKSB7XG4gICAgICBkYXRhX3ZhbGlkID0gdGhpcy5fYnlEYXlBbmRNb250aERheSgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5oYXNfYnlfZGF0YShcIkJZREFZXCIpKSB7XG4gICAgICBsZXQgZGF5c0luTW9udGggPSBUaW1lLmRheXNJbk1vbnRoKHRoaXMubGFzdC5tb250aCwgdGhpcy5sYXN0LnllYXIpO1xuICAgICAgbGV0IHNldHBvcyA9IDA7XG4gICAgICBsZXQgc2V0cG9zX3RvdGFsID0gMDtcblxuICAgICAgaWYgKHRoaXMuaGFzX2J5X2RhdGEoXCJCWVNFVFBPU1wiKSkge1xuICAgICAgICBsZXQgbGFzdF9kYXkgPSB0aGlzLmxhc3QuZGF5O1xuICAgICAgICBmb3IgKGxldCBkYXkgPSAxOyBkYXkgPD0gZGF5c0luTW9udGg7IGRheSsrKSB7XG4gICAgICAgICAgdGhpcy5sYXN0LmRheSA9IGRheTtcbiAgICAgICAgICBpZiAodGhpcy5pc19kYXlfaW5fYnlkYXkodGhpcy5sYXN0KSkge1xuICAgICAgICAgICAgc2V0cG9zX3RvdGFsKys7XG4gICAgICAgICAgICBpZiAoZGF5IDw9IGxhc3RfZGF5KSB7XG4gICAgICAgICAgICAgIHNldHBvcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3QuZGF5ID0gbGFzdF9kYXk7XG4gICAgICB9XG5cbiAgICAgIGRhdGFfdmFsaWQgPSAwO1xuICAgICAgbGV0IGRheTtcbiAgICAgIGZvciAoZGF5ID0gdGhpcy5sYXN0LmRheSArIDE7IGRheSA8PSBkYXlzSW5Nb250aDsgZGF5KyspIHtcbiAgICAgICAgdGhpcy5sYXN0LmRheSA9IGRheTtcblxuICAgICAgICBpZiAodGhpcy5pc19kYXlfaW5fYnlkYXkodGhpcy5sYXN0KSkge1xuICAgICAgICAgIGlmICghdGhpcy5oYXNfYnlfZGF0YShcIkJZU0VUUE9TXCIpIHx8XG4gICAgICAgICAgICAgIHRoaXMuY2hlY2tfc2V0X3Bvc2l0aW9uKCsrc2V0cG9zKSB8fFxuICAgICAgICAgICAgICB0aGlzLmNoZWNrX3NldF9wb3NpdGlvbihzZXRwb3MgLSBzZXRwb3NfdG90YWwgLSAxKSkge1xuXG4gICAgICAgICAgICBkYXRhX3ZhbGlkID0gMTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZGF5ID4gZGF5c0luTW9udGgpIHtcbiAgICAgICAgdGhpcy5sYXN0LmRheSA9IDE7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50X21vbnRoKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNfZGF5X2luX2J5ZGF5KHRoaXMubGFzdCkpIHtcbiAgICAgICAgICBpZiAoIXRoaXMuaGFzX2J5X2RhdGEoXCJCWVNFVFBPU1wiKSB8fCB0aGlzLmNoZWNrX3NldF9wb3NpdGlvbigxKSkge1xuICAgICAgICAgICAgZGF0YV92YWxpZCA9IDE7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGFfdmFsaWQgPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmhhc19ieV9kYXRhKFwiQllNT05USERBWVwiKSkge1xuICAgICAgdGhpcy5ieV9pbmRpY2VzLkJZTU9OVEhEQVkrKztcblxuICAgICAgaWYgKHRoaXMuYnlfaW5kaWNlcy5CWU1PTlRIREFZID49IHRoaXMuYnlfZGF0YS5CWU1PTlRIREFZLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmJ5X2luZGljZXMuQllNT05USERBWSA9IDA7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50X21vbnRoKCk7XG4gICAgICAgIGlmICh0aGlzLmJ5X2luZGljZXMuQllNT05USERBWSA+PSB0aGlzLmJ5X2RhdGEuQllNT05USERBWS5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsZXQgZGF5c0luTW9udGggPSBUaW1lLmRheXNJbk1vbnRoKHRoaXMubGFzdC5tb250aCwgdGhpcy5sYXN0LnllYXIpO1xuICAgICAgbGV0IGRheSA9IHRoaXMuYnlfZGF0YS5CWU1PTlRIREFZW3RoaXMuYnlfaW5kaWNlcy5CWU1PTlRIREFZXTtcblxuICAgICAgaWYgKGRheSA8IDApIHtcbiAgICAgICAgZGF5ID0gZGF5c0luTW9udGggKyBkYXkgKyAxO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGF5ID4gZGF5c0luTW9udGgpIHtcbiAgICAgICAgdGhpcy5sYXN0LmRheSA9IDE7XG4gICAgICAgIGRhdGFfdmFsaWQgPSB0aGlzLmlzX2RheV9pbl9ieWRheSh0aGlzLmxhc3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sYXN0LmRheSA9IGRheTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pbmNyZW1lbnRfbW9udGgoKTtcbiAgICAgIGxldCBkYXlzSW5Nb250aCA9IFRpbWUuZGF5c0luTW9udGgodGhpcy5sYXN0Lm1vbnRoLCB0aGlzLmxhc3QueWVhcik7XG4gICAgICBpZiAodGhpcy5ieV9kYXRhLkJZTU9OVEhEQVlbMF0gPiBkYXlzSW5Nb250aCkge1xuICAgICAgICBkYXRhX3ZhbGlkID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubGFzdC5kYXkgPSB0aGlzLmJ5X2RhdGEuQllNT05USERBWVswXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YV92YWxpZDtcbiAgfVxuXG4gIG5leHRfd2Vla2RheV9ieV93ZWVrKCkge1xuICAgIGxldCBlbmRfb2ZfZGF0YSA9IDA7XG5cbiAgICBpZiAodGhpcy5uZXh0X2hvdXIoKSA9PSAwKSB7XG4gICAgICByZXR1cm4gZW5kX29mX2RhdGE7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmhhc19ieV9kYXRhKFwiQllEQVlcIikpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cblxuICAgIGZvciAoOzspIHtcbiAgICAgIGxldCB0dCA9IG5ldyBUaW1lKCk7XG4gICAgICB0aGlzLmJ5X2luZGljZXMuQllEQVkrKztcblxuICAgICAgaWYgKHRoaXMuYnlfaW5kaWNlcy5CWURBWSA9PSBPYmplY3Qua2V5cyh0aGlzLmJ5X2RhdGEuQllEQVkpLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmJ5X2luZGljZXMuQllEQVkgPSAwO1xuICAgICAgICBlbmRfb2ZfZGF0YSA9IDE7XG4gICAgICB9XG5cbiAgICAgIGxldCBjb2RlZF9kYXkgPSB0aGlzLmJ5X2RhdGEuQllEQVlbdGhpcy5ieV9pbmRpY2VzLkJZREFZXTtcbiAgICAgIGxldCBwYXJ0cyA9IHRoaXMucnVsZURheU9mV2Vlayhjb2RlZF9kYXkpO1xuICAgICAgbGV0IGRvdyA9IHBhcnRzWzFdO1xuXG4gICAgICBkb3cgLT0gdGhpcy5ydWxlLndrc3Q7XG5cbiAgICAgIGlmIChkb3cgPCAwKSB7XG4gICAgICAgIGRvdyArPSA3O1xuICAgICAgfVxuXG4gICAgICB0dC55ZWFyID0gdGhpcy5sYXN0LnllYXI7XG4gICAgICB0dC5tb250aCA9IHRoaXMubGFzdC5tb250aDtcbiAgICAgIHR0LmRheSA9IHRoaXMubGFzdC5kYXk7XG5cbiAgICAgIGxldCBzdGFydE9mV2VlayA9IHR0LnN0YXJ0RG95V2Vlayh0aGlzLnJ1bGUud2tzdCk7XG5cbiAgICAgIGlmIChkb3cgKyBzdGFydE9mV2VlayA8IDEpIHtcbiAgICAgICAgLy8gVGhlIHNlbGVjdGVkIGRhdGUgaXMgaW4gdGhlIHByZXZpb3VzIHllYXJcbiAgICAgICAgaWYgKCFlbmRfb2ZfZGF0YSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCBuZXh0ID0gVGltZS5mcm9tRGF5T2ZZZWFyKHN0YXJ0T2ZXZWVrICsgZG93LCB0aGlzLmxhc3QueWVhcik7XG5cbiAgICAgIC8qKlxuICAgICAgICogVGhlIG5vcm1hbGl6YXRpb24gaG9ycm9ycyBiZWxvdyBhcmUgZHVlIHRvXG4gICAgICAgKiB0aGUgZmFjdCB0aGF0IHdoZW4gdGhlIHllYXIvbW9udGgvZGF5IGNoYW5nZXNcbiAgICAgICAqIGl0IGNhbiBlZmZlY3QgdGhlIG90aGVyIG9wZXJhdGlvbnMgdGhhdCBjb21lIGFmdGVyLlxuICAgICAgICovXG4gICAgICB0aGlzLmxhc3QueWVhciA9IG5leHQueWVhcjtcbiAgICAgIHRoaXMubGFzdC5tb250aCA9IG5leHQubW9udGg7XG4gICAgICB0aGlzLmxhc3QuZGF5ID0gbmV4dC5kYXk7XG5cbiAgICAgIHJldHVybiBlbmRfb2ZfZGF0YTtcbiAgICB9XG4gIH1cblxuICBuZXh0X3llYXIoKSB7XG4gICAgaWYgKHRoaXMubmV4dF9ob3VyKCkgPT0gMCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF5cy5sZW5ndGggPT0gMCB8fCArK3RoaXMuZGF5c19pbmRleCA9PSB0aGlzLmRheXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLmRheXNfaW5kZXggPSAwO1xuICAgICAgdGhpcy5pbmNyZW1lbnRfeWVhcih0aGlzLnJ1bGUuaW50ZXJ2YWwpO1xuICAgICAgaWYgKHRoaXMuaGFzX2J5X2RhdGEoXCJCWU1PTlRIREFZXCIpKSB7XG4gICAgICAgIHRoaXMuYnlfZGF0YS5CWU1PTlRIREFZID0gdGhpcy5ub3JtYWxpemVCeU1vbnRoRGF5UnVsZXMoXG4gICAgICAgICAgdGhpcy5sYXN0LnllYXIsXG4gICAgICAgICAgdGhpcy5sYXN0Lm1vbnRoLFxuICAgICAgICAgIHRoaXMucnVsZS5wYXJ0cy5CWU1PTlRIREFZXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aGlzLmV4cGFuZF95ZWFyX2RheXModGhpcy5sYXN0LnllYXIpO1xuICAgICAgaWYgKHRoaXMuZGF5cy5sZW5ndGggPT0gMCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fbmV4dEJ5WWVhckRheSgpO1xuICB9XG5cbiAgX25leHRCeVllYXJEYXkoKSB7XG4gICAgbGV0IGRveSA9IHRoaXMuZGF5c1t0aGlzLmRheXNfaW5kZXhdO1xuICAgIGxldCB5ZWFyID0gdGhpcy5sYXN0LnllYXI7XG5cbiAgICBpZiAoTWF0aC5hYnMoZG95KSA9PSAzNjYgJiYgIVRpbWUuaXNMZWFwWWVhcih0aGlzLmxhc3QueWVhcikpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGlmIChkb3kgPCAxKSB7XG4gICAgICAgIC8vIFRpbWUuZnJvbURheU9mWWVhcihkb3ksIHllYXIpIGluZGV4ZXMgcmVsYXRpdmUgdG8gdGhlXG4gICAgICAgIC8vIHN0YXJ0IG9mIHRoZSBnaXZlbiB5ZWFyLiBUaGF0IGlzIGRpZmZlcmVudCBmcm9tIHRoZVxuICAgICAgICAvLyBzZW1hbnRpY3Mgb2YgQllZRUFSREFZIHdoZXJlIG5lZ2F0aXZlIGluZGV4ZXMgYXJlIGFuXG4gICAgICAgIC8vIG9mZnNldCBmcm9tIHRoZSBlbmQgb2YgdGhlIGdpdmVuIHllYXIuXG4gICAgICAgIGRveSArPSAxO1xuICAgICAgICB5ZWFyICs9IDE7XG4gICAgfVxuICAgIGxldCBuZXh0ID0gVGltZS5mcm9tRGF5T2ZZZWFyKGRveSwgeWVhcik7XG4gICAgdGhpcy5sYXN0LmRheSA9IG5leHQuZGF5O1xuICAgIHRoaXMubGFzdC5tb250aCA9IG5leHQubW9udGg7XG5cbiAgICByZXR1cm4gMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0gZG93IChlZzogJzFUVScsICctMU1PJylcbiAgICogQHBhcmFtIHt3ZWVrRGF5PX0gYVdlZWtTdGFydCBUaGUgd2VlayBzdGFydCB3ZWVrZGF5XG4gICAqIEByZXR1cm4gW3BvcywgbnVtZXJpY0Rvd10gKGVnOiBbMSwgM10pIG51bWVyaWNEb3cgaXMgcmVsYXRpdmUgdG8gYVdlZWtTdGFydFxuICAgKi9cbiAgcnVsZURheU9mV2Vlayhkb3csIGFXZWVrU3RhcnQpIHtcbiAgICBsZXQgbWF0Y2hlcyA9IGRvdy5tYXRjaCgvKFsrLV0/WzAtOV0pPyhNT3xUVXxXRXxUSHxGUnxTQXxTVSkvKTtcbiAgICBpZiAobWF0Y2hlcykge1xuICAgICAgbGV0IHBvcyA9IHBhcnNlSW50KG1hdGNoZXNbMV0gfHwgMCwgMTApO1xuICAgICAgZG93ID0gUmVjdXIuaWNhbERheVRvTnVtZXJpY0RheShtYXRjaGVzWzJdLCBhV2Vla1N0YXJ0KTtcbiAgICAgIHJldHVybiBbcG9zLCBkb3ddO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gWzAsIDBdO1xuICAgIH1cbiAgfVxuXG4gIG5leHRfZ2VuZXJpYyhhUnVsZVR5cGUsIGFJbnRlcnZhbCwgYURhdGVBdHRyLCBhRm9sbG93aW5nQXR0ciwgYVByZXZpb3VzSW5jcikge1xuICAgIGxldCBoYXNfYnlfcnVsZSA9IChhUnVsZVR5cGUgaW4gdGhpcy5ieV9kYXRhKTtcbiAgICBsZXQgdGhpc19mcmVxID0gKHRoaXMucnVsZS5mcmVxID09IGFJbnRlcnZhbCk7XG4gICAgbGV0IGVuZF9vZl9kYXRhID0gMDtcblxuICAgIGlmIChhUHJldmlvdXNJbmNyICYmIHRoaXNbYVByZXZpb3VzSW5jcl0oKSA9PSAwKSB7XG4gICAgICByZXR1cm4gZW5kX29mX2RhdGE7XG4gICAgfVxuXG4gICAgaWYgKGhhc19ieV9ydWxlKSB7XG4gICAgICB0aGlzLmJ5X2luZGljZXNbYVJ1bGVUeXBlXSsrO1xuICAgICAgbGV0IGR0YSA9IHRoaXMuYnlfZGF0YVthUnVsZVR5cGVdO1xuXG4gICAgICBpZiAodGhpcy5ieV9pbmRpY2VzW2FSdWxlVHlwZV0gPT0gZHRhLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmJ5X2luZGljZXNbYVJ1bGVUeXBlXSA9IDA7XG4gICAgICAgIGVuZF9vZl9kYXRhID0gMTtcbiAgICAgIH1cbiAgICAgIHRoaXMubGFzdFthRGF0ZUF0dHJdID0gZHRhW3RoaXMuYnlfaW5kaWNlc1thUnVsZVR5cGVdXTtcbiAgICB9IGVsc2UgaWYgKHRoaXNfZnJlcSkge1xuICAgICAgdGhpc1tcImluY3JlbWVudF9cIiArIGFEYXRlQXR0cl0odGhpcy5ydWxlLmludGVydmFsKTtcbiAgICB9XG5cbiAgICBpZiAoaGFzX2J5X3J1bGUgJiYgZW5kX29mX2RhdGEgJiYgdGhpc19mcmVxKSB7XG4gICAgICB0aGlzW1wiaW5jcmVtZW50X1wiICsgYUZvbGxvd2luZ0F0dHJdKDEpO1xuICAgIH1cblxuICAgIHJldHVybiBlbmRfb2ZfZGF0YTtcbiAgfVxuXG4gIGluY3JlbWVudF9tb250aGRheShpbmMpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluYzsgaSsrKSB7XG4gICAgICBsZXQgZGF5c0luTW9udGggPSBUaW1lLmRheXNJbk1vbnRoKHRoaXMubGFzdC5tb250aCwgdGhpcy5sYXN0LnllYXIpO1xuICAgICAgdGhpcy5sYXN0LmRheSsrO1xuXG4gICAgICBpZiAodGhpcy5sYXN0LmRheSA+IGRheXNJbk1vbnRoKSB7XG4gICAgICAgIHRoaXMubGFzdC5kYXkgLT0gZGF5c0luTW9udGg7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50X21vbnRoKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaW5jcmVtZW50X21vbnRoKCkge1xuICAgIHRoaXMubGFzdC5kYXkgPSAxO1xuICAgIGlmICh0aGlzLmhhc19ieV9kYXRhKFwiQllNT05USFwiKSkge1xuICAgICAgdGhpcy5ieV9pbmRpY2VzLkJZTU9OVEgrKztcblxuICAgICAgaWYgKHRoaXMuYnlfaW5kaWNlcy5CWU1PTlRIID09IHRoaXMuYnlfZGF0YS5CWU1PTlRILmxlbmd0aCkge1xuICAgICAgICB0aGlzLmJ5X2luZGljZXMuQllNT05USCA9IDA7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50X3llYXIoMSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMubGFzdC5tb250aCA9IHRoaXMuYnlfZGF0YS5CWU1PTlRIW3RoaXMuYnlfaW5kaWNlcy5CWU1PTlRIXTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMucnVsZS5mcmVxID09IFwiTU9OVEhMWVwiKSB7XG4gICAgICAgIHRoaXMubGFzdC5tb250aCArPSB0aGlzLnJ1bGUuaW50ZXJ2YWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxhc3QubW9udGgrKztcbiAgICAgIH1cblxuICAgICAgdGhpcy5sYXN0Lm1vbnRoLS07XG4gICAgICBsZXQgeWVhcnMgPSB0cnVuYyh0aGlzLmxhc3QubW9udGggLyAxMik7XG4gICAgICB0aGlzLmxhc3QubW9udGggJT0gMTI7XG4gICAgICB0aGlzLmxhc3QubW9udGgrKztcblxuICAgICAgaWYgKHllYXJzICE9IDApIHtcbiAgICAgICAgdGhpcy5pbmNyZW1lbnRfeWVhcih5ZWFycyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaGFzX2J5X2RhdGEoXCJCWU1PTlRIREFZXCIpKSB7XG4gICAgICB0aGlzLmJ5X2RhdGEuQllNT05USERBWSA9IHRoaXMubm9ybWFsaXplQnlNb250aERheVJ1bGVzKFxuICAgICAgICB0aGlzLmxhc3QueWVhcixcbiAgICAgICAgdGhpcy5sYXN0Lm1vbnRoLFxuICAgICAgICB0aGlzLnJ1bGUucGFydHMuQllNT05USERBWVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBpbmNyZW1lbnRfeWVhcihpbmMpIHtcbiAgICAvLyBEb24ndCBqdW1wIGludG8gdGhlIG5leHQgbW9udGggaWYgdGhpcy5sYXN0IGlzIEZlYiAyOS5cbiAgICB0aGlzLmxhc3QuZGF5ID0gMTtcbiAgICB0aGlzLmxhc3QueWVhciArPSBpbmM7XG4gIH1cblxuICBpbmNyZW1lbnRfZ2VuZXJpYyhpbmMsIGFEYXRlQXR0ciwgYUZhY3RvciwgYU5leHRJbmNyZW1lbnQpIHtcbiAgICB0aGlzLmxhc3RbYURhdGVBdHRyXSArPSBpbmM7XG4gICAgbGV0IG5leHR1bml0ID0gdHJ1bmModGhpcy5sYXN0W2FEYXRlQXR0cl0gLyBhRmFjdG9yKTtcbiAgICB0aGlzLmxhc3RbYURhdGVBdHRyXSAlPSBhRmFjdG9yO1xuICAgIGlmIChuZXh0dW5pdCAhPSAwKSB7XG4gICAgICB0aGlzW1wiaW5jcmVtZW50X1wiICsgYU5leHRJbmNyZW1lbnRdKG5leHR1bml0KTtcbiAgICB9XG4gIH1cblxuICBoYXNfYnlfZGF0YShhUnVsZVR5cGUpIHtcbiAgICByZXR1cm4gKGFSdWxlVHlwZSBpbiB0aGlzLnJ1bGUucGFydHMpO1xuICB9XG5cbiAgZXhwYW5kX3llYXJfZGF5cyhhWWVhcikge1xuICAgIGxldCB0ID0gbmV3IFRpbWUoKTtcbiAgICB0aGlzLmRheXMgPSBbXTtcblxuICAgIC8vIFdlIG5lZWQgb3VyIG93biBjb3B5IHdpdGggYSBmZXcga2V5cyBzZXRcbiAgICBsZXQgcGFydHMgPSB7fTtcbiAgICBsZXQgcnVsZXMgPSBbXCJCWURBWVwiLCBcIkJZV0VFS05PXCIsIFwiQllNT05USERBWVwiLCBcIkJZTU9OVEhcIiwgXCJCWVlFQVJEQVlcIl07XG4gICAgZm9yIChsZXQgcGFydCBvZiBydWxlcykge1xuICAgICAgaWYgKHBhcnQgaW4gdGhpcy5ydWxlLnBhcnRzKSB7XG4gICAgICAgIHBhcnRzW3BhcnRdID0gdGhpcy5ydWxlLnBhcnRzW3BhcnRdO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChcIkJZTU9OVEhcIiBpbiBwYXJ0cyAmJiBcIkJZV0VFS05PXCIgaW4gcGFydHMpIHtcbiAgICAgIGxldCB2YWxpZCA9IDE7XG4gICAgICBsZXQgdmFsaWRXZWVrcyA9IHt9O1xuICAgICAgdC55ZWFyID0gYVllYXI7XG4gICAgICB0LmlzRGF0ZSA9IHRydWU7XG5cbiAgICAgIGZvciAobGV0IG1vbnRoSWR4ID0gMDsgbW9udGhJZHggPCB0aGlzLmJ5X2RhdGEuQllNT05USC5sZW5ndGg7IG1vbnRoSWR4KyspIHtcbiAgICAgICAgbGV0IG1vbnRoID0gdGhpcy5ieV9kYXRhLkJZTU9OVEhbbW9udGhJZHhdO1xuICAgICAgICB0Lm1vbnRoID0gbW9udGg7XG4gICAgICAgIHQuZGF5ID0gMTtcbiAgICAgICAgbGV0IGZpcnN0X3dlZWsgPSB0LndlZWtOdW1iZXIodGhpcy5ydWxlLndrc3QpO1xuICAgICAgICB0LmRheSA9IFRpbWUuZGF5c0luTW9udGgobW9udGgsIGFZZWFyKTtcbiAgICAgICAgbGV0IGxhc3Rfd2VlayA9IHQud2Vla051bWJlcih0aGlzLnJ1bGUud2tzdCk7XG4gICAgICAgIGZvciAobW9udGhJZHggPSBmaXJzdF93ZWVrOyBtb250aElkeCA8IGxhc3Rfd2VlazsgbW9udGhJZHgrKykge1xuICAgICAgICAgIHZhbGlkV2Vla3NbbW9udGhJZHhdID0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCB3ZWVrSWR4ID0gMDsgd2Vla0lkeCA8IHRoaXMuYnlfZGF0YS5CWVdFRUtOTy5sZW5ndGggJiYgdmFsaWQ7IHdlZWtJZHgrKykge1xuICAgICAgICBsZXQgd2Vla25vID0gdGhpcy5ieV9kYXRhLkJZV0VFS05PW3dlZWtJZHhdO1xuICAgICAgICBpZiAod2Vla25vIDwgNTIpIHtcbiAgICAgICAgICB2YWxpZCAmPSB2YWxpZFdlZWtzW3dlZWtJZHhdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbGlkID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodmFsaWQpIHtcbiAgICAgICAgZGVsZXRlIHBhcnRzLkJZTU9OVEg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWxldGUgcGFydHMuQllXRUVLTk87XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHBhcnRDb3VudCA9IE9iamVjdC5rZXlzKHBhcnRzKS5sZW5ndGg7XG5cbiAgICBpZiAocGFydENvdW50ID09IDApIHtcbiAgICAgIGxldCB0MSA9IHRoaXMuZHRzdGFydC5jbG9uZSgpO1xuICAgICAgdDEueWVhciA9IHRoaXMubGFzdC55ZWFyO1xuICAgICAgdGhpcy5kYXlzLnB1c2godDEuZGF5T2ZZZWFyKCkpO1xuICAgIH0gZWxzZSBpZiAocGFydENvdW50ID09IDEgJiYgXCJCWU1PTlRIXCIgaW4gcGFydHMpIHtcbiAgICAgIGZvciAobGV0IG1vbnRoIG9mIHRoaXMuYnlfZGF0YS5CWU1PTlRIKSB7XG4gICAgICAgIGxldCB0MiA9IHRoaXMuZHRzdGFydC5jbG9uZSgpO1xuICAgICAgICB0Mi55ZWFyID0gYVllYXI7XG4gICAgICAgIHQyLm1vbnRoID0gbW9udGg7XG4gICAgICAgIHQyLmlzRGF0ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuZGF5cy5wdXNoKHQyLmRheU9mWWVhcigpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAxICYmIFwiQllNT05USERBWVwiIGluIHBhcnRzKSB7XG4gICAgICBmb3IgKGxldCBtb250aGRheSBvZiB0aGlzLmJ5X2RhdGEuQllNT05USERBWSkge1xuICAgICAgICBsZXQgdDMgPSB0aGlzLmR0c3RhcnQuY2xvbmUoKTtcbiAgICAgICAgaWYgKG1vbnRoZGF5IDwgMCkge1xuICAgICAgICAgIGxldCBkYXlzSW5Nb250aCA9IFRpbWUuZGF5c0luTW9udGgodDMubW9udGgsIGFZZWFyKTtcbiAgICAgICAgICBtb250aGRheSA9IG1vbnRoZGF5ICsgZGF5c0luTW9udGggKyAxO1xuICAgICAgICB9XG4gICAgICAgIHQzLmRheSA9IG1vbnRoZGF5O1xuICAgICAgICB0My55ZWFyID0gYVllYXI7XG4gICAgICAgIHQzLmlzRGF0ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuZGF5cy5wdXNoKHQzLmRheU9mWWVhcigpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAyICYmXG4gICAgICAgICAgICAgICBcIkJZTU9OVEhEQVlcIiBpbiBwYXJ0cyAmJlxuICAgICAgICAgICAgICAgXCJCWU1PTlRIXCIgaW4gcGFydHMpIHtcbiAgICAgIGZvciAobGV0IG1vbnRoIG9mIHRoaXMuYnlfZGF0YS5CWU1PTlRIKSB7XG4gICAgICAgIGxldCBkYXlzSW5Nb250aCA9IFRpbWUuZGF5c0luTW9udGgobW9udGgsIGFZZWFyKTtcbiAgICAgICAgZm9yIChsZXQgbW9udGhkYXkgb2YgdGhpcy5ieV9kYXRhLkJZTU9OVEhEQVkpIHtcbiAgICAgICAgICBpZiAobW9udGhkYXkgPCAwKSB7XG4gICAgICAgICAgICBtb250aGRheSA9IG1vbnRoZGF5ICsgZGF5c0luTW9udGggKyAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0LmRheSA9IG1vbnRoZGF5O1xuICAgICAgICAgIHQubW9udGggPSBtb250aDtcbiAgICAgICAgICB0LnllYXIgPSBhWWVhcjtcbiAgICAgICAgICB0LmlzRGF0ZSA9IHRydWU7XG5cbiAgICAgICAgICB0aGlzLmRheXMucHVzaCh0LmRheU9mWWVhcigpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocGFydENvdW50ID09IDEgJiYgXCJCWVdFRUtOT1wiIGluIHBhcnRzKSA7IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAyICYmXG4gICAgICAgICAgICAgICBcIkJZV0VFS05PXCIgaW4gcGFydHMgJiZcbiAgICAgICAgICAgICAgIFwiQllNT05USERBWVwiIGluIHBhcnRzKSA7IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAxICYmIFwiQllEQVlcIiBpbiBwYXJ0cykge1xuICAgICAgdGhpcy5kYXlzID0gdGhpcy5kYXlzLmNvbmNhdCh0aGlzLmV4cGFuZF9ieV9kYXkoYVllYXIpKTtcbiAgICB9IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAyICYmIFwiQllEQVlcIiBpbiBwYXJ0cyAmJiBcIkJZTU9OVEhcIiBpbiBwYXJ0cykge1xuICAgICAgZm9yIChsZXQgbW9udGggb2YgdGhpcy5ieV9kYXRhLkJZTU9OVEgpIHtcbiAgICAgICAgbGV0IGRheXNJbk1vbnRoID0gVGltZS5kYXlzSW5Nb250aChtb250aCwgYVllYXIpO1xuXG4gICAgICAgIHQueWVhciA9IGFZZWFyO1xuICAgICAgICB0Lm1vbnRoID0gbW9udGg7XG4gICAgICAgIHQuZGF5ID0gMTtcbiAgICAgICAgdC5pc0RhdGUgPSB0cnVlO1xuXG4gICAgICAgIGxldCBmaXJzdF9kb3cgPSB0LmRheU9mV2VlaygpO1xuICAgICAgICBsZXQgZG95X29mZnNldCA9IHQuZGF5T2ZZZWFyKCkgLSAxO1xuXG4gICAgICAgIHQuZGF5ID0gZGF5c0luTW9udGg7XG4gICAgICAgIGxldCBsYXN0X2RvdyA9IHQuZGF5T2ZXZWVrKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuaGFzX2J5X2RhdGEoXCJCWVNFVFBPU1wiKSkge1xuICAgICAgICAgIGxldCBieV9tb250aF9kYXkgPSBbXTtcbiAgICAgICAgICBmb3IgKGxldCBkYXkgPSAxOyBkYXkgPD0gZGF5c0luTW9udGg7IGRheSsrKSB7XG4gICAgICAgICAgICB0LmRheSA9IGRheTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzX2RheV9pbl9ieWRheSh0KSkge1xuICAgICAgICAgICAgICBieV9tb250aF9kYXkucHVzaChkYXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvciAobGV0IHNwSW5kZXggPSAwOyBzcEluZGV4IDwgYnlfbW9udGhfZGF5Lmxlbmd0aDsgc3BJbmRleCsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja19zZXRfcG9zaXRpb24oc3BJbmRleCArIDEpIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja19zZXRfcG9zaXRpb24oc3BJbmRleCAtIGJ5X21vbnRoX2RheS5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgIHRoaXMuZGF5cy5wdXNoKGRveV9vZmZzZXQgKyBieV9tb250aF9kYXlbc3BJbmRleF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3IgKGxldCBjb2RlZF9kYXkgb2YgdGhpcy5ieV9kYXRhLkJZREFZKSB7XG4gICAgICAgICAgICBsZXQgYnlkYXlQYXJ0cyA9IHRoaXMucnVsZURheU9mV2Vlayhjb2RlZF9kYXkpO1xuICAgICAgICAgICAgbGV0IHBvcyA9IGJ5ZGF5UGFydHNbMF07XG4gICAgICAgICAgICBsZXQgZG93ID0gYnlkYXlQYXJ0c1sxXTtcbiAgICAgICAgICAgIGxldCBtb250aF9kYXk7XG5cbiAgICAgICAgICAgIGxldCBmaXJzdF9tYXRjaGluZ19kYXkgPSAoKGRvdyArIDcgLSBmaXJzdF9kb3cpICUgNykgKyAxO1xuICAgICAgICAgICAgbGV0IGxhc3RfbWF0Y2hpbmdfZGF5ID0gZGF5c0luTW9udGggLSAoKGxhc3RfZG93ICsgNyAtIGRvdykgJSA3KTtcblxuICAgICAgICAgICAgaWYgKHBvcyA9PSAwKSB7XG4gICAgICAgICAgICAgIGZvciAobGV0IGRheSA9IGZpcnN0X21hdGNoaW5nX2RheTsgZGF5IDw9IGRheXNJbk1vbnRoOyBkYXkgKz0gNykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF5cy5wdXNoKGRveV9vZmZzZXQgKyBkYXkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBvcyA+IDApIHtcbiAgICAgICAgICAgICAgbW9udGhfZGF5ID0gZmlyc3RfbWF0Y2hpbmdfZGF5ICsgKHBvcyAtIDEpICogNztcblxuICAgICAgICAgICAgICBpZiAobW9udGhfZGF5IDw9IGRheXNJbk1vbnRoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXlzLnB1c2goZG95X29mZnNldCArIG1vbnRoX2RheSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG1vbnRoX2RheSA9IGxhc3RfbWF0Y2hpbmdfZGF5ICsgKHBvcyArIDEpICogNztcblxuICAgICAgICAgICAgICBpZiAobW9udGhfZGF5ID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF5cy5wdXNoKGRveV9vZmZzZXQgKyBtb250aF9kYXkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBSZXR1cm4gZGF0ZXMgaW4gb3JkZXIgb2Ygb2NjdXJyZW5jZSAoMSwyLDMsLi4uKSBpbnN0ZWFkXG4gICAgICAvLyBvZiBieSBncm91cHMgb2Ygd2Vla2RheXMgKDEsOCwxNSwuLi4sMiw5LDE2LC4uLikuXG4gICAgICB0aGlzLmRheXMuc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhIC0gYjsgfSk7IC8vIENvbXBhcmF0b3IgZnVuY3Rpb24gYWxsb3dzIHRvIHNvcnQgbnVtYmVycy5cbiAgICB9IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAyICYmIFwiQllEQVlcIiBpbiBwYXJ0cyAmJiBcIkJZTU9OVEhEQVlcIiBpbiBwYXJ0cykge1xuICAgICAgbGV0IGV4cGFuZGVkRGF5cyA9IHRoaXMuZXhwYW5kX2J5X2RheShhWWVhcik7XG5cbiAgICAgIGZvciAobGV0IGRheSBvZiBleHBhbmRlZERheXMpIHtcbiAgICAgICAgbGV0IHR0ID0gVGltZS5mcm9tRGF5T2ZZZWFyKGRheSwgYVllYXIpO1xuICAgICAgICBpZiAodGhpcy5ieV9kYXRhLkJZTU9OVEhEQVkuaW5kZXhPZih0dC5kYXkpID49IDApIHtcbiAgICAgICAgICB0aGlzLmRheXMucHVzaChkYXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChwYXJ0Q291bnQgPT0gMyAmJlxuICAgICAgICAgICAgICAgXCJCWURBWVwiIGluIHBhcnRzICYmXG4gICAgICAgICAgICAgICBcIkJZTU9OVEhEQVlcIiBpbiBwYXJ0cyAmJlxuICAgICAgICAgICAgICAgXCJCWU1PTlRIXCIgaW4gcGFydHMpIHtcbiAgICAgIGxldCBleHBhbmRlZERheXMgPSB0aGlzLmV4cGFuZF9ieV9kYXkoYVllYXIpO1xuXG4gICAgICBmb3IgKGxldCBkYXkgb2YgZXhwYW5kZWREYXlzKSB7XG4gICAgICAgIGxldCB0dCA9IFRpbWUuZnJvbURheU9mWWVhcihkYXksIGFZZWFyKTtcblxuICAgICAgICBpZiAodGhpcy5ieV9kYXRhLkJZTU9OVEguaW5kZXhPZih0dC5tb250aCkgPj0gMCAmJlxuICAgICAgICAgICAgdGhpcy5ieV9kYXRhLkJZTU9OVEhEQVkuaW5kZXhPZih0dC5kYXkpID49IDApIHtcbiAgICAgICAgICB0aGlzLmRheXMucHVzaChkYXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChwYXJ0Q291bnQgPT0gMiAmJiBcIkJZREFZXCIgaW4gcGFydHMgJiYgXCJCWVdFRUtOT1wiIGluIHBhcnRzKSB7XG4gICAgICBsZXQgZXhwYW5kZWREYXlzID0gdGhpcy5leHBhbmRfYnlfZGF5KGFZZWFyKTtcblxuICAgICAgZm9yIChsZXQgZGF5IG9mIGV4cGFuZGVkRGF5cykge1xuICAgICAgICBsZXQgdHQgPSBUaW1lLmZyb21EYXlPZlllYXIoZGF5LCBhWWVhcik7XG4gICAgICAgIGxldCB3ZWVrbm8gPSB0dC53ZWVrTnVtYmVyKHRoaXMucnVsZS53a3N0KTtcblxuICAgICAgICBpZiAodGhpcy5ieV9kYXRhLkJZV0VFS05PLmluZGV4T2Yod2Vla25vKSkge1xuICAgICAgICAgIHRoaXMuZGF5cy5wdXNoKGRheSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAzICYmXG4gICAgICAgICAgICAgICBcIkJZREFZXCIgaW4gcGFydHMgJiZcbiAgICAgICAgICAgICAgIFwiQllXRUVLTk9cIiBpbiBwYXJ0cyAmJlxuICAgICAgICAgICAgICAgXCJCWU1PTlRIREFZXCIgaW4gcGFydHMpIDsgZWxzZSBpZiAocGFydENvdW50ID09IDEgJiYgXCJCWVlFQVJEQVlcIiBpbiBwYXJ0cykge1xuICAgICAgdGhpcy5kYXlzID0gdGhpcy5kYXlzLmNvbmNhdCh0aGlzLmJ5X2RhdGEuQllZRUFSREFZKTtcbiAgICB9IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAyICYmIFwiQllZRUFSREFZXCIgaW4gcGFydHMgJiYgXCJCWURBWVwiIGluIHBhcnRzKSB7XG4gICAgICBsZXQgZGF5c0luWWVhciA9IFRpbWUuaXNMZWFwWWVhcihhWWVhcikgPyAzNjYgOiAzNjU7XG4gICAgICBsZXQgZXhwYW5kZWREYXlzID0gbmV3IFNldCh0aGlzLmV4cGFuZF9ieV9kYXkoYVllYXIpKTtcblxuICAgICAgZm9yIChsZXQgZG95IG9mIHRoaXMuYnlfZGF0YS5CWVlFQVJEQVkpIHtcbiAgICAgICAgaWYgKGRveSA8IDApIHtcbiAgICAgICAgICBkb3kgKz0gZGF5c0luWWVhciArIDE7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXhwYW5kZWREYXlzLmhhcyhkb3kpKSB7XG4gICAgICAgICAgdGhpcy5kYXlzLnB1c2goZG95KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRheXMgPSBbXTtcbiAgICB9XG5cbiAgICBsZXQgZGF5c0luWWVhciA9IFRpbWUuaXNMZWFwWWVhcihhWWVhcikgPyAzNjYgOiAzNjU7XG4gICAgdGhpcy5kYXlzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGlmIChhIDwgMCkgYSArPSBkYXlzSW5ZZWFyICsgMTtcbiAgICAgIGlmIChiIDwgMCkgYiArPSBkYXlzSW5ZZWFyICsgMTtcbiAgICAgIHJldHVybiBhIC0gYjtcbiAgICB9KTtcblxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgZXhwYW5kX2J5X2RheShhWWVhcikge1xuXG4gICAgbGV0IGRheXNfbGlzdCA9IFtdO1xuICAgIGxldCB0bXAgPSB0aGlzLmxhc3QuY2xvbmUoKTtcblxuICAgIHRtcC55ZWFyID0gYVllYXI7XG4gICAgdG1wLm1vbnRoID0gMTtcbiAgICB0bXAuZGF5ID0gMTtcbiAgICB0bXAuaXNEYXRlID0gdHJ1ZTtcblxuICAgIGxldCBzdGFydF9kb3cgPSB0bXAuZGF5T2ZXZWVrKCk7XG5cbiAgICB0bXAubW9udGggPSAxMjtcbiAgICB0bXAuZGF5ID0gMzE7XG4gICAgdG1wLmlzRGF0ZSA9IHRydWU7XG5cbiAgICBsZXQgZW5kX2RvdyA9IHRtcC5kYXlPZldlZWsoKTtcbiAgICBsZXQgZW5kX3llYXJfZGF5ID0gdG1wLmRheU9mWWVhcigpO1xuXG4gICAgZm9yIChsZXQgZGF5IG9mIHRoaXMuYnlfZGF0YS5CWURBWSkge1xuICAgICAgbGV0IHBhcnRzID0gdGhpcy5ydWxlRGF5T2ZXZWVrKGRheSk7XG4gICAgICBsZXQgcG9zID0gcGFydHNbMF07XG4gICAgICBsZXQgZG93ID0gcGFydHNbMV07XG5cbiAgICAgIGlmIChwb3MgPT0gMCkge1xuICAgICAgICBsZXQgdG1wX3N0YXJ0X2RveSA9ICgoZG93ICsgNyAtIHN0YXJ0X2RvdykgJSA3KSArIDE7XG5cbiAgICAgICAgZm9yIChsZXQgZG95ID0gdG1wX3N0YXJ0X2RveTsgZG95IDw9IGVuZF95ZWFyX2RheTsgZG95ICs9IDcpIHtcbiAgICAgICAgICBkYXlzX2xpc3QucHVzaChkb3kpO1xuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSBpZiAocG9zID4gMCkge1xuICAgICAgICBsZXQgZmlyc3Q7XG4gICAgICAgIGlmIChkb3cgPj0gc3RhcnRfZG93KSB7XG4gICAgICAgICAgZmlyc3QgPSBkb3cgLSBzdGFydF9kb3cgKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpcnN0ID0gZG93IC0gc3RhcnRfZG93ICsgODtcbiAgICAgICAgfVxuXG4gICAgICAgIGRheXNfbGlzdC5wdXNoKGZpcnN0ICsgKHBvcyAtIDEpICogNyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgbGFzdDtcbiAgICAgICAgcG9zID0gLXBvcztcblxuICAgICAgICBpZiAoZG93IDw9IGVuZF9kb3cpIHtcbiAgICAgICAgICBsYXN0ID0gZW5kX3llYXJfZGF5IC0gZW5kX2RvdyArIGRvdztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYXN0ID0gZW5kX3llYXJfZGF5IC0gZW5kX2RvdyArIGRvdyAtIDc7XG4gICAgICAgIH1cblxuICAgICAgICBkYXlzX2xpc3QucHVzaChsYXN0IC0gKHBvcyAtIDEpICogNyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkYXlzX2xpc3Q7XG4gIH1cblxuICBpc19kYXlfaW5fYnlkYXkodHQpIHtcbiAgICBpZiAodGhpcy5ieV9kYXRhLkJZREFZKSB7XG4gICAgICBmb3IgKGxldCBkYXkgb2YgdGhpcy5ieV9kYXRhLkJZREFZKSB7XG4gICAgICAgIGxldCBwYXJ0cyA9IHRoaXMucnVsZURheU9mV2VlayhkYXkpO1xuICAgICAgICBsZXQgcG9zID0gcGFydHNbMF07XG4gICAgICAgIGxldCBkb3cgPSBwYXJ0c1sxXTtcbiAgICAgICAgbGV0IHRoaXNfZG93ID0gdHQuZGF5T2ZXZWVrKCk7XG5cbiAgICAgICAgaWYgKChwb3MgPT0gMCAmJiBkb3cgPT0gdGhpc19kb3cpIHx8XG4gICAgICAgICAgICAodHQubnRoV2Vla0RheShkb3csIHBvcykgPT0gdHQuZGF5KSkge1xuICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGdpdmVuIHZhbHVlIGlzIGluIEJZU0VUUE9TLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge051bWVyaWN9IGFQb3MgcG9zaXRpb24gdG8gY2hlY2sgZm9yLlxuICAgKiBAcmV0dXJuIHtCb29sZWFufSBmYWxzZSB1bmxlc3MgQllTRVRQT1MgcnVsZXMgZXhpc3RcbiAgICogICAgICAgICAgICAgICAgICAgYW5kIHRoZSBnaXZlbiB2YWx1ZSBpcyBwcmVzZW50IGluIHJ1bGVzLlxuICAgKi9cbiAgY2hlY2tfc2V0X3Bvc2l0aW9uKGFQb3MpIHtcbiAgICBpZiAodGhpcy5oYXNfYnlfZGF0YSgnQllTRVRQT1MnKSkge1xuICAgICAgbGV0IGlkeCA9IHRoaXMuYnlfZGF0YS5CWVNFVFBPUy5pbmRleE9mKGFQb3MpO1xuICAgICAgLy8gbmVnYXRpdmUgbnVtYmVycyBhcmUgbm90IGZhbHNlLXlcbiAgICAgIHJldHVybiBpZHggIT09IC0xO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzb3J0X2J5ZGF5X3J1bGVzKGFSdWxlcykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYVJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGk7IGorKykge1xuICAgICAgICBsZXQgb25lID0gdGhpcy5ydWxlRGF5T2ZXZWVrKGFSdWxlc1tqXSwgdGhpcy5ydWxlLndrc3QpWzFdO1xuICAgICAgICBsZXQgdHdvID0gdGhpcy5ydWxlRGF5T2ZXZWVrKGFSdWxlc1tpXSwgdGhpcy5ydWxlLndrc3QpWzFdO1xuXG4gICAgICAgIGlmIChvbmUgPiB0d28pIHtcbiAgICAgICAgICBsZXQgdG1wID0gYVJ1bGVzW2ldO1xuICAgICAgICAgIGFSdWxlc1tpXSA9IGFSdWxlc1tqXTtcbiAgICAgICAgICBhUnVsZXNbal0gPSB0bXA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjaGVja19jb250cmFjdF9yZXN0cmljdGlvbihhUnVsZVR5cGUsIHYpIHtcbiAgICBsZXQgaW5kZXhNYXBWYWx1ZSA9IFJlY3VySXRlcmF0b3IuX2luZGV4TWFwW2FSdWxlVHlwZV07XG4gICAgbGV0IHJ1bGVNYXBWYWx1ZSA9IFJlY3VySXRlcmF0b3IuX2V4cGFuZE1hcFt0aGlzLnJ1bGUuZnJlcV1baW5kZXhNYXBWYWx1ZV07XG4gICAgbGV0IHBhc3MgPSBmYWxzZTtcblxuICAgIGlmIChhUnVsZVR5cGUgaW4gdGhpcy5ieV9kYXRhICYmXG4gICAgICAgIHJ1bGVNYXBWYWx1ZSA9PSBSZWN1ckl0ZXJhdG9yLkNPTlRSQUNUKSB7XG5cbiAgICAgIGxldCBydWxlVHlwZSA9IHRoaXMuYnlfZGF0YVthUnVsZVR5cGVdO1xuXG4gICAgICBmb3IgKGxldCBieWRhdGEgb2YgcnVsZVR5cGUpIHtcbiAgICAgICAgaWYgKGJ5ZGF0YSA9PSB2KSB7XG4gICAgICAgICAgcGFzcyA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm90IGEgY29udHJhY3RpbmcgYnlydWxlIG9yIGhhcyBubyBkYXRhLCB0ZXN0IHBhc3Nlc1xuICAgICAgcGFzcyA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBwYXNzO1xuICB9XG5cbiAgY2hlY2tfY29udHJhY3RpbmdfcnVsZXMoKSB7XG4gICAgbGV0IGRvdyA9IHRoaXMubGFzdC5kYXlPZldlZWsoKTtcbiAgICBsZXQgd2Vla05vID0gdGhpcy5sYXN0LndlZWtOdW1iZXIodGhpcy5ydWxlLndrc3QpO1xuICAgIGxldCBkb3kgPSB0aGlzLmxhc3QuZGF5T2ZZZWFyKCk7XG5cbiAgICByZXR1cm4gKHRoaXMuY2hlY2tfY29udHJhY3RfcmVzdHJpY3Rpb24oXCJCWVNFQ09ORFwiLCB0aGlzLmxhc3Quc2Vjb25kKSAmJlxuICAgICAgICAgICAgdGhpcy5jaGVja19jb250cmFjdF9yZXN0cmljdGlvbihcIkJZTUlOVVRFXCIsIHRoaXMubGFzdC5taW51dGUpICYmXG4gICAgICAgICAgICB0aGlzLmNoZWNrX2NvbnRyYWN0X3Jlc3RyaWN0aW9uKFwiQllIT1VSXCIsIHRoaXMubGFzdC5ob3VyKSAmJlxuICAgICAgICAgICAgdGhpcy5jaGVja19jb250cmFjdF9yZXN0cmljdGlvbihcIkJZREFZXCIsIFJlY3VyLm51bWVyaWNEYXlUb0ljYWxEYXkoZG93KSkgJiZcbiAgICAgICAgICAgIHRoaXMuY2hlY2tfY29udHJhY3RfcmVzdHJpY3Rpb24oXCJCWVdFRUtOT1wiLCB3ZWVrTm8pICYmXG4gICAgICAgICAgICB0aGlzLmNoZWNrX2NvbnRyYWN0X3Jlc3RyaWN0aW9uKFwiQllNT05USERBWVwiLCB0aGlzLmxhc3QuZGF5KSAmJlxuICAgICAgICAgICAgdGhpcy5jaGVja19jb250cmFjdF9yZXN0cmljdGlvbihcIkJZTU9OVEhcIiwgdGhpcy5sYXN0Lm1vbnRoKSAmJlxuICAgICAgICAgICAgdGhpcy5jaGVja19jb250cmFjdF9yZXN0cmljdGlvbihcIkJZWUVBUkRBWVwiLCBkb3kpKTtcbiAgfVxuXG4gIHNldHVwX2RlZmF1bHRzKGFSdWxlVHlwZSwgcmVxLCBkZWZ0aW1lKSB7XG4gICAgbGV0IGluZGV4TWFwVmFsdWUgPSBSZWN1ckl0ZXJhdG9yLl9pbmRleE1hcFthUnVsZVR5cGVdO1xuICAgIGxldCBydWxlTWFwVmFsdWUgPSBSZWN1ckl0ZXJhdG9yLl9leHBhbmRNYXBbdGhpcy5ydWxlLmZyZXFdW2luZGV4TWFwVmFsdWVdO1xuXG4gICAgaWYgKHJ1bGVNYXBWYWx1ZSAhPSBSZWN1ckl0ZXJhdG9yLkNPTlRSQUNUKSB7XG4gICAgICBpZiAoIShhUnVsZVR5cGUgaW4gdGhpcy5ieV9kYXRhKSkge1xuICAgICAgICB0aGlzLmJ5X2RhdGFbYVJ1bGVUeXBlXSA9IFtkZWZ0aW1lXTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnJ1bGUuZnJlcSAhPSByZXEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnlfZGF0YVthUnVsZVR5cGVdWzBdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGVmdGltZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGl0ZXJhdG9yIGludG8gYSBzZXJpYWxpemUtYWJsZSBvYmplY3QuICBXaWxsIHByZXNlcnZlIGN1cnJlbnRcbiAgICogaXRlcmF0aW9uIHNlcXVlbmNlIHRvIGVuc3VyZSB0aGUgc2VhbWxlc3MgY29udGludWF0aW9uIG9mIHRoZSByZWN1cnJlbmNlXG4gICAqIHJ1bGUuXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICBsZXQgcmVzdWx0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIHJlc3VsdC5pbml0aWFsaXplZCA9IHRoaXMuaW5pdGlhbGl6ZWQ7XG4gICAgcmVzdWx0LnJ1bGUgPSB0aGlzLnJ1bGUudG9KU09OKCk7XG4gICAgcmVzdWx0LmR0c3RhcnQgPSB0aGlzLmR0c3RhcnQudG9KU09OKCk7XG4gICAgcmVzdWx0LmJ5X2RhdGEgPSB0aGlzLmJ5X2RhdGE7XG4gICAgcmVzdWx0LmRheXMgPSB0aGlzLmRheXM7XG4gICAgcmVzdWx0Lmxhc3QgPSB0aGlzLmxhc3QudG9KU09OKCk7XG4gICAgcmVzdWx0LmJ5X2luZGljZXMgPSB0aGlzLmJ5X2luZGljZXM7XG4gICAgcmVzdWx0Lm9jY3VycmVuY2VfbnVtYmVyID0gdGhpcy5vY2N1cnJlbmNlX251bWJlcjtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn1cblxuLyoqXG4gKiBBbiBlcnJvciBpbmRpY2F0aW5nIHRoYXQgYSByZWN1cnJlbmNlIHJ1bGUgaXMgaW52YWxpZCBhbmQgcHJvZHVjZXMgbm9cbiAqIG9jY3VycmVuY2VzLlxuICpcbiAqIEBleHRlbmRzIHtFcnJvcn1cbiAqIEBjbGFzc1xuICovXG5jbGFzcyBJbnZhbGlkUmVjdXJyZW5jZVJ1bGVFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoXCJSZWN1cnJlbmNlIHJ1bGUgaGFzIG5vIHZhbGlkIG9jY3VycmVuY2VzXCIpO1xuICB9XG59XG5cbi8qIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKiBQb3J0aW9ucyBDb3B5cmlnaHQgKEMpIFBoaWxpcHAgS2V3aXNjaCAqL1xuXG5cbi8qKlxuICogVGhpcyBsZXRzIHR5cGVzY3JpcHQgcmVzb2x2ZSBvdXIgY3VzdG9tIHR5cGVzIGluIHRoZVxuICogZ2VuZXJhdGVkIGQudHMgZmlsZXMgKGpzZG9jIHR5cGVkZWZzIGFyZSBjb252ZXJ0ZWQgdG8gdHlwZXNjcmlwdCB0eXBlcykuXG4gKiBJZ25vcmUgcHJldmVudHMgdGhlIHR5cGVkZWZzIGZyb20gYmVpbmcgZG9jdW1lbnRlZCBtb3JlIHRoYW4gb25jZS5cbiAqXG4gKiBAaWdub3JlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS53ZWVrRGF5fSB3ZWVrRGF5XG4gKiBJbXBvcnRzIHRoZSAnd2Vla0RheScgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS5mcmVxdWVuY3lWYWx1ZXN9IGZyZXF1ZW5jeVZhbHVlc1xuICogSW1wb3J0cyB0aGUgJ2ZyZXF1ZW5jeVZhbHVlcycgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKi9cblxuY29uc3QgVkFMSURfREFZX05BTUVTID0gL14oU1V8TU98VFV8V0V8VEh8RlJ8U0EpJC87XG5jb25zdCBWQUxJRF9CWURBWV9QQVJUID0gL14oWystXSk/KDVbMC0zXXxbMS00XVswLTldfFsxLTldKT8oU1V8TU98VFV8V0V8VEh8RlJ8U0EpJC87XG5jb25zdCBET1dfTUFQID0ge1xuICBTVTogVGltZS5TVU5EQVksXG4gIE1POiBUaW1lLk1PTkRBWSxcbiAgVFU6IFRpbWUuVFVFU0RBWSxcbiAgV0U6IFRpbWUuV0VETkVTREFZLFxuICBUSDogVGltZS5USFVSU0RBWSxcbiAgRlI6IFRpbWUuRlJJREFZLFxuICBTQTogVGltZS5TQVRVUkRBWVxufTtcblxuY29uc3QgUkVWRVJTRV9ET1dfTUFQID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKERPV19NQVApLm1hcChlbnRyeSA9PiBlbnRyeS5yZXZlcnNlKCkpKTtcblxuY29uc3QgQUxMT1dFRF9GUkVRID0gWydTRUNPTkRMWScsICdNSU5VVEVMWScsICdIT1VSTFknLFxuICAgICAgICAgICAgICAgICAgICAgICdEQUlMWScsICdXRUVLTFknLCAnTU9OVEhMWScsICdZRUFSTFknXTtcblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIFwicmVjdXJcIiB2YWx1ZSB0eXBlLCB1c2VkIGZvciBleGFtcGxlIGJ5IFJSVUxFLiBJdCBwcm92aWRlcyBtZXRob2RzIHRvXG4gKiBjYWxjdWxhdGUgb2NjdXJyZW5jZXMgYW1vbmcgb3RoZXJzLlxuICpcbiAqIEBtZW1iZXJvZiBJQ0FMXG4gKi9cbmNsYXNzIFJlY3VyIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIElDQUwuUmVjdXJ9IGluc3RhbmNlIGZyb20gdGhlIHBhc3NlZCBzdHJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgICAgICAgICBUaGUgc3RyaW5nIHRvIHBhcnNlXG4gICAqIEByZXR1cm4ge1JlY3VyfSAgICAgICAgICAgICAgICBUaGUgY3JlYXRlZCByZWN1cnJlbmNlIGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgZnJvbVN0cmluZyhzdHJpbmcpIHtcbiAgICBsZXQgZGF0YSA9IHRoaXMuX3N0cmluZ1RvRGF0YShzdHJpbmcsIGZhbHNlKTtcbiAgICByZXR1cm4gbmV3IFJlY3VyKGRhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIElDQUwuUmVjdXJ9IGluc3RhbmNlIHVzaW5nIG1lbWJlcnMgZnJvbSB0aGUgcGFzc2VkXG4gICAqIGRhdGEgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYURhdGEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbiBvYmplY3Qgd2l0aCBtZW1iZXJzIG9mIHRoZSByZWN1cnJlbmNlXG4gICAqIEBwYXJhbSB7ZnJlcXVlbmN5VmFsdWVzPX0gYURhdGEuZnJlcSAgICAgICAgICAgICAgIFRoZSBmcmVxdWVuY3kgdmFsdWVcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBhRGF0YS5pbnRlcnZhbCAgICAgICAgICAgICAgICAgICAgVGhlIElOVEVSVkFMIHZhbHVlXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGFEYXRhLndrc3QgICAgICAgICAgICAgICAgICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHZhbHVlXG4gICAqIEBwYXJhbSB7VGltZT19IGFEYXRhLnVudGlsICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBlbmQgb2YgdGhlIHJlY3VycmVuY2Ugc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYURhdGEuY291bnQgICAgICAgICAgICAgICAgICAgICAgIFRoZSBudW1iZXIgb2Ygb2NjdXJyZW5jZXNcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGFEYXRhLmJ5c2Vjb25kICAgICAgICAgICAgVGhlIHNlY29uZHMgZm9yIHRoZSBCWVNFQ09ORCBwYXJ0XG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBhRGF0YS5ieW1pbnV0ZSAgICAgICAgICAgIFRoZSBtaW51dGVzIGZvciB0aGUgQllNSU5VVEUgcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxOdW1iZXI+PX0gYURhdGEuYnlob3VyICAgICAgICAgICAgICBUaGUgaG91cnMgZm9yIHRoZSBCWUhPVVIgcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxTdHJpbmc+PX0gYURhdGEuYnlkYXkgICAgICAgICAgICAgICBUaGUgQllEQVkgdmFsdWVzXG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBhRGF0YS5ieW1vbnRoZGF5ICAgICAgICAgIFRoZSBkYXlzIGZvciB0aGUgQllNT05USERBWSBwYXJ0XG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBhRGF0YS5ieXllYXJkYXkgICAgICAgICAgIFRoZSBkYXlzIGZvciB0aGUgQllZRUFSREFZIHBhcnRcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGFEYXRhLmJ5d2Vla25vICAgICAgICAgICAgVGhlIHdlZWtzIGZvciB0aGUgQllXRUVLTk8gcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxOdW1iZXI+PX0gYURhdGEuYnltb250aCAgICAgICAgICAgICBUaGUgbW9udGggZm9yIHRoZSBCWU1PTlRIIHBhcnRcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGFEYXRhLmJ5c2V0cG9zICAgICAgICAgICAgVGhlIHBvc2l0aW9uYWxzIGZvciB0aGUgQllTRVRQT1MgcGFydFxuICAgKi9cbiAgc3RhdGljIGZyb21EYXRhKGFEYXRhKSB7XG4gICAgcmV0dXJuIG5ldyBSZWN1cihhRGF0YSk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgYSByZWN1cnJlbmNlIHN0cmluZyB0byBhIGRhdGEgb2JqZWN0LCBzdWl0YWJsZSBmb3IgdGhlIGZyb21EYXRhXG4gICAqIG1ldGhvZC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZyAgICAgVGhlIHN0cmluZyB0byBwYXJzZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZtdEljYWwgICBJZiB0cnVlLCB0aGUgc3RyaW5nIGlzIGNvbnNpZGVyZWQgdG8gYmUgYW5cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpQ2FsZW5kYXIgc3RyaW5nXG4gICAqIEByZXR1cm4ge1JlY3VyfSAgICAgICAgICAgIFRoZSByZWN1cnJlbmNlIGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgX3N0cmluZ1RvRGF0YShzdHJpbmcsIGZtdEljYWwpIHtcbiAgICBsZXQgZGljdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICAvLyBzcGxpdCBpcyBzbG93ZXIgaW4gRkYgYnV0IGZhc3QgZW5vdWdoLlxuICAgIC8vIHY4IGhvd2V2ZXIgdGhpcyBpcyBmYXN0ZXIgdGhlbiBtYW51YWwgc3BsaXQ/XG4gICAgbGV0IHZhbHVlcyA9IHN0cmluZy5zcGxpdCgnOycpO1xuICAgIGxldCBsZW4gPSB2YWx1ZXMubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgbGV0IHBhcnRzID0gdmFsdWVzW2ldLnNwbGl0KCc9Jyk7XG4gICAgICBsZXQgdWNuYW1lID0gcGFydHNbMF0udG9VcHBlckNhc2UoKTtcbiAgICAgIGxldCBsY25hbWUgPSBwYXJ0c1swXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgbGV0IG5hbWUgPSAoZm10SWNhbCA/IGxjbmFtZSA6IHVjbmFtZSk7XG4gICAgICBsZXQgdmFsdWUgPSBwYXJ0c1sxXTtcblxuICAgICAgaWYgKHVjbmFtZSBpbiBwYXJ0RGVzaWduKSB7XG4gICAgICAgIGxldCBwYXJ0QXJyID0gdmFsdWUuc3BsaXQoJywnKTtcbiAgICAgICAgbGV0IHBhcnRTZXQgPSBuZXcgU2V0KCk7XG5cbiAgICAgICAgZm9yIChsZXQgcGFydCBvZiBwYXJ0QXJyKSB7XG4gICAgICAgICAgcGFydFNldC5hZGQocGFydERlc2lnblt1Y25hbWVdKHBhcnQpKTtcbiAgICAgICAgfVxuICAgICAgICBwYXJ0QXJyID0gWy4uLnBhcnRTZXRdO1xuXG4gICAgICAgIGRpY3RbbmFtZV0gPSAocGFydEFyci5sZW5ndGggPT0gMSA/IHBhcnRBcnJbMF0gOiBwYXJ0QXJyKTtcbiAgICAgIH0gZWxzZSBpZiAodWNuYW1lIGluIG9wdGlvbkRlc2lnbikge1xuICAgICAgICBvcHRpb25EZXNpZ25bdWNuYW1lXSh2YWx1ZSwgZGljdCwgZm10SWNhbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBEb24ndCBzd2FsbG93IHVua25vd24gdmFsdWVzLiBKdXN0IHNldCB0aGVtIGFzIHRoZXkgYXJlLlxuICAgICAgICBkaWN0W2xjbmFtZV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGljdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGFuIGljYWwgcmVwcmVzZW50YXRpb24gb2YgYSBkYXkgKFNVLCBNTywgZXRjLi4pXG4gICAqIGludG8gYSBudW1lcmljIHZhbHVlIG9mIHRoYXQgZGF5LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nICAgICBUaGUgaUNhbGVuZGFyIGRheSBuYW1lXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGFXZWVrU3RhcnRcbiAgICogICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHdlZWtkYXksIGRlZmF1bHRzIHRvIFNVTkRBWVxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgICBOdW1lcmljIHZhbHVlIG9mIGdpdmVuIGRheVxuICAgKi9cbiAgc3RhdGljIGljYWxEYXlUb051bWVyaWNEYXkoc3RyaW5nLCBhV2Vla1N0YXJ0KSB7XG4gICAgLy9YWFg6IHRoaXMgaXMgaGVyZSBzbyB3ZSBjYW4gZGVhbFxuICAgIC8vICAgICB3aXRoIHBvc3NpYmx5IGludmFsaWQgc3RyaW5nIHZhbHVlcy5cbiAgICBsZXQgZmlyc3REb3cgPSBhV2Vla1N0YXJ0IHx8IFRpbWUuU1VOREFZO1xuICAgIHJldHVybiAoKERPV19NQVBbc3RyaW5nXSAtIGZpcnN0RG93ICsgNykgJSA3KSArIDE7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBhIG51bWVyaWMgZGF5IHZhbHVlIGludG8gaXRzIGljYWwgcmVwcmVzZW50YXRpb24gKFNVLCBNTywgZXRjLi4pXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBudW0gICAgICAgIE51bWVyaWMgdmFsdWUgb2YgZ2l2ZW4gZGF5XG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGFXZWVrU3RhcnRcbiAgICogICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHdlZWtkYXksIGRlZmF1bHRzIHRvIFNVTkRBWVxuICAgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgICBUaGUgSUNBTCBkYXkgdmFsdWUsIGUuZyBTVSxNTywuLi5cbiAgICovXG4gIHN0YXRpYyBudW1lcmljRGF5VG9JY2FsRGF5KG51bSwgYVdlZWtTdGFydCkge1xuICAgIC8vWFhYOiB0aGlzIGlzIGhlcmUgc28gd2UgY2FuIGRlYWwgd2l0aCBwb3NzaWJseSBpbnZhbGlkIG51bWJlciB2YWx1ZXMuXG4gICAgLy8gICAgIEFsc28sIHRoaXMgYWxsb3dzIGNvbnNpc3RlbnQgbWFwcGluZyBiZXR3ZWVuIGRheSBudW1iZXJzIGFuZCBkYXlcbiAgICAvLyAgICAgbmFtZXMgZm9yIGV4dGVybmFsIHVzZXJzLlxuICAgIGxldCBmaXJzdERvdyA9IGFXZWVrU3RhcnQgfHwgVGltZS5TVU5EQVk7XG4gICAgbGV0IGRvdyA9IChudW0gKyBmaXJzdERvdyAtIFRpbWUuU1VOREFZKTtcbiAgICBpZiAoZG93ID4gNykge1xuICAgICAgZG93IC09IDc7XG4gICAgfVxuICAgIHJldHVybiBSRVZFUlNFX0RPV19NQVBbZG93XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFJlY3VyIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbiBvYmplY3Qgd2l0aCBtZW1iZXJzIG9mIHRoZSByZWN1cnJlbmNlXG4gICAqIEBwYXJhbSB7ZnJlcXVlbmN5VmFsdWVzPX0gZGF0YS5mcmVxICAgICAgICAgICAgICAgIFRoZSBmcmVxdWVuY3kgdmFsdWVcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBkYXRhLmludGVydmFsICAgICAgICAgICAgICAgICAgICAgVGhlIElOVEVSVkFMIHZhbHVlXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGRhdGEud2tzdCAgICAgICAgICAgICAgICAgICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHZhbHVlXG4gICAqIEBwYXJhbSB7VGltZT19IGRhdGEudW50aWwgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBlbmQgb2YgdGhlIHJlY3VycmVuY2Ugc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS5jb3VudCAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBudW1iZXIgb2Ygb2NjdXJyZW5jZXNcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGRhdGEuYnlzZWNvbmQgICAgICAgICAgICAgVGhlIHNlY29uZHMgZm9yIHRoZSBCWVNFQ09ORCBwYXJ0XG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBkYXRhLmJ5bWludXRlICAgICAgICAgICAgIFRoZSBtaW51dGVzIGZvciB0aGUgQllNSU5VVEUgcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxOdW1iZXI+PX0gZGF0YS5ieWhvdXIgICAgICAgICAgICAgICBUaGUgaG91cnMgZm9yIHRoZSBCWUhPVVIgcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxTdHJpbmc+PX0gZGF0YS5ieWRheSAgICAgICAgICAgICAgICBUaGUgQllEQVkgdmFsdWVzXG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBkYXRhLmJ5bW9udGhkYXkgICAgICAgICAgIFRoZSBkYXlzIGZvciB0aGUgQllNT05USERBWSBwYXJ0XG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBkYXRhLmJ5eWVhcmRheSAgICAgICAgICAgIFRoZSBkYXlzIGZvciB0aGUgQllZRUFSREFZIHBhcnRcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGRhdGEuYnl3ZWVrbm8gICAgICAgICAgICAgVGhlIHdlZWtzIGZvciB0aGUgQllXRUVLTk8gcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxOdW1iZXI+PX0gZGF0YS5ieW1vbnRoICAgICAgICAgICAgICBUaGUgbW9udGggZm9yIHRoZSBCWU1PTlRIIHBhcnRcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGRhdGEuYnlzZXRwb3MgICAgICAgICAgICAgVGhlIHBvc2l0aW9uYWxzIGZvciB0aGUgQllTRVRQT1MgcGFydFxuICAgKi9cbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHRoaXMud3JhcHBlZEpTT2JqZWN0ID0gdGhpcztcbiAgICB0aGlzLnBhcnRzID0ge307XG5cbiAgICBpZiAoZGF0YSAmJiB0eXBlb2YoZGF0YSkgPT09ICdvYmplY3QnKSB7XG4gICAgICB0aGlzLmZyb21EYXRhKGRhdGEpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBbiBvYmplY3QgaG9sZGluZyB0aGUgQlktcGFydHMgb2YgdGhlIHJlY3VycmVuY2UgcnVsZVxuICAgKiBAbWVtYmVyb2YgSUNBTC5SZWN1clxuICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBieVBhcnRzXG4gICAqIEBwcm9wZXJ0eSB7QXJyYXkuPE51bWJlcj49fSBCWVNFQ09ORCAgICAgICAgICAgIFRoZSBzZWNvbmRzIGZvciB0aGUgQllTRUNPTkQgcGFydFxuICAgKiBAcHJvcGVydHkge0FycmF5LjxOdW1iZXI+PX0gQllNSU5VVEUgICAgICAgICAgICBUaGUgbWludXRlcyBmb3IgdGhlIEJZTUlOVVRFIHBhcnRcbiAgICogQHByb3BlcnR5IHtBcnJheS48TnVtYmVyPj19IEJZSE9VUiAgICAgICAgICAgICAgVGhlIGhvdXJzIGZvciB0aGUgQllIT1VSIHBhcnRcbiAgICogQHByb3BlcnR5IHtBcnJheS48U3RyaW5nPj19IEJZREFZICAgICAgICAgICAgICAgVGhlIEJZREFZIHZhbHVlc1xuICAgKiBAcHJvcGVydHkge0FycmF5LjxOdW1iZXI+PX0gQllNT05USERBWSAgICAgICAgICBUaGUgZGF5cyBmb3IgdGhlIEJZTU9OVEhEQVkgcGFydFxuICAgKiBAcHJvcGVydHkge0FycmF5LjxOdW1iZXI+PX0gQllZRUFSREFZICAgICAgICAgICBUaGUgZGF5cyBmb3IgdGhlIEJZWUVBUkRBWSBwYXJ0XG4gICAqIEBwcm9wZXJ0eSB7QXJyYXkuPE51bWJlcj49fSBCWVdFRUtOTyAgICAgICAgICAgIFRoZSB3ZWVrcyBmb3IgdGhlIEJZV0VFS05PIHBhcnRcbiAgICogQHByb3BlcnR5IHtBcnJheS48TnVtYmVyPj19IEJZTU9OVEggICAgICAgICAgICAgVGhlIG1vbnRoIGZvciB0aGUgQllNT05USCBwYXJ0XG4gICAqIEBwcm9wZXJ0eSB7QXJyYXkuPE51bWJlcj49fSBCWVNFVFBPUyAgICAgICAgICAgIFRoZSBwb3NpdGlvbmFscyBmb3IgdGhlIEJZU0VUUE9TIHBhcnRcbiAgICovXG5cbiAgLyoqXG4gICAqIEFuIG9iamVjdCBob2xkaW5nIHRoZSBCWS1wYXJ0cyBvZiB0aGUgcmVjdXJyZW5jZSBydWxlXG4gICAqIEB0eXBlIHtieVBhcnRzfVxuICAgKi9cbiAgcGFydHMgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgaW50ZXJ2YWwgdmFsdWUgZm9yIHRoZSByZWN1cnJlbmNlIHJ1bGUuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqL1xuICBpbnRlcnZhbCA9IDE7XG5cbiAgLyoqXG4gICAqIFRoZSB3ZWVrIHN0YXJ0IGRheVxuICAgKlxuICAgKiBAdHlwZSB7d2Vla0RheX1cbiAgICogQGRlZmF1bHQgSUNBTC5UaW1lLk1PTkRBWVxuICAgKi9cbiAgd2tzdCA9IFRpbWUuTU9OREFZO1xuXG4gIC8qKlxuICAgKiBUaGUgZW5kIG9mIHRoZSByZWN1cnJlbmNlXG4gICAqIEB0eXBlIHs/VGltZX1cbiAgICovXG4gIHVudGlsID0gbnVsbDtcblxuICAvKipcbiAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIG9jY3VycmVuY2VzXG4gICAqIEB0eXBlIHs/TnVtYmVyfVxuICAgKi9cbiAgY291bnQgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgZnJlcXVlbmN5IHZhbHVlLlxuICAgKiBAdHlwZSB7ZnJlcXVlbmN5VmFsdWVzfVxuICAgKi9cbiAgZnJlcSA9IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBjbGFzcyBpZGVudGlmaWVyLlxuICAgKiBAY29uc3RhbnRcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGRlZmF1bHQgXCJpY2FscmVjdXJcIlxuICAgKi9cbiAgaWNhbGNsYXNzID0gXCJpY2FscmVjdXJcIjtcblxuICAvKipcbiAgICogVGhlIHR5cGUgbmFtZSwgdG8gYmUgdXNlZCBpbiB0aGUgakNhbCBvYmplY3QuXG4gICAqIEBjb25zdGFudFxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAZGVmYXVsdCBcInJlY3VyXCJcbiAgICovXG4gIGljYWx0eXBlID0gXCJyZWN1clwiO1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgaXRlcmF0b3IgZm9yIHRoaXMgcmVjdXJyZW5jZSBydWxlLiBUaGUgcGFzc2VkIHN0YXJ0IGRhdGVcbiAgICogbXVzdCBiZSB0aGUgc3RhcnQgZGF0ZSBvZiB0aGUgZXZlbnQsIG5vdCB0aGUgc3RhcnQgb2YgdGhlIHJhbmdlIHRvXG4gICAqIHNlYXJjaCBpbi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogbGV0IHJlY3VyID0gY29tcC5nZXRGaXJzdFByb3BlcnR5VmFsdWUoJ3JydWxlJyk7XG4gICAqIGxldCBkdHN0YXJ0ID0gY29tcC5nZXRGaXJzdFByb3BlcnR5VmFsdWUoJ2R0c3RhcnQnKTtcbiAgICogbGV0IGl0ZXIgPSByZWN1ci5pdGVyYXRvcihkdHN0YXJ0KTtcbiAgICogZm9yIChsZXQgbmV4dCA9IGl0ZXIubmV4dCgpOyBuZXh0OyBuZXh0ID0gaXRlci5uZXh0KCkpIHtcbiAgICogICBpZiAobmV4dC5jb21wYXJlKHJhbmdlU3RhcnQpIDwgMCkge1xuICAgKiAgICAgY29udGludWU7XG4gICAqICAgfVxuICAgKiAgIGNvbnNvbGUubG9nKG5leHQudG9TdHJpbmcoKSk7XG4gICAqIH1cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lfSBhU3RhcnQgICAgICAgIFRoZSBpdGVtJ3Mgc3RhcnQgZGF0ZVxuICAgKiBAcmV0dXJuIHtSZWN1ckl0ZXJhdG9yfSAgICAgVGhlIHJlY3VycmVuY2UgaXRlcmF0b3JcbiAgICovXG4gIGl0ZXJhdG9yKGFTdGFydCkge1xuICAgIHJldHVybiBuZXcgUmVjdXJJdGVyYXRvcih7XG4gICAgICBydWxlOiB0aGlzLFxuICAgICAgZHRzdGFydDogYVN0YXJ0XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGNsb25lIG9mIHRoZSByZWN1cnJlbmNlIG9iamVjdC5cbiAgICpcbiAgICogQHJldHVybiB7UmVjdXJ9ICAgICAgVGhlIGNsb25lZCBvYmplY3RcbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgUmVjdXIodGhpcy50b0pTT04oKSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSBjdXJyZW50IHJ1bGUgaXMgZmluaXRlLCBpLmUuIGhhcyBhIGNvdW50IG9yIHVudGlsIHBhcnQuXG4gICAqXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgICBUcnVlLCBpZiB0aGUgcnVsZSBpcyBmaW5pdGVcbiAgICovXG4gIGlzRmluaXRlKCkge1xuICAgIHJldHVybiAhISh0aGlzLmNvdW50IHx8IHRoaXMudW50aWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgY3VycmVudCBydWxlIGhhcyBhIGNvdW50IHBhcnQsIGFuZCBub3QgbGltaXRlZCBieSBhbiB1bnRpbFxuICAgKiBwYXJ0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgVHJ1ZSwgaWYgdGhlIHJ1bGUgaXMgYnkgY291bnRcbiAgICovXG4gIGlzQnlDb3VudCgpIHtcbiAgICByZXR1cm4gISEodGhpcy5jb3VudCAmJiAhdGhpcy51bnRpbCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIGNvbXBvbmVudCAocGFydCkgdG8gdGhlIHJlY3VycmVuY2UgcnVsZS4gVGhpcyBpcyBub3QgYSBjb21wb25lbnRcbiAgICogaW4gdGhlIHNlbnNlIG9mIHtAbGluayBJQ0FMLkNvbXBvbmVudH0sIGJ1dCBhIHBhcnQgb2YgdGhlIHJlY3VycmVuY2VcbiAgICogcnVsZSwgaS5lLiBCWU1PTlRILlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gYVR5cGUgICAgICAgICAgICBUaGUgbmFtZSBvZiB0aGUgY29tcG9uZW50IHBhcnRcbiAgICogQHBhcmFtIHtBcnJheXxTdHJpbmd9IGFWYWx1ZSAgICAgVGhlIGNvbXBvbmVudCB2YWx1ZVxuICAgKi9cbiAgYWRkQ29tcG9uZW50KGFUeXBlLCBhVmFsdWUpIHtcbiAgICBsZXQgdWNuYW1lID0gYVR5cGUudG9VcHBlckNhc2UoKTtcbiAgICBpZiAodWNuYW1lIGluIHRoaXMucGFydHMpIHtcbiAgICAgIHRoaXMucGFydHNbdWNuYW1lXS5wdXNoKGFWYWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucGFydHNbdWNuYW1lXSA9IFthVmFsdWVdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjb21wb25lbnQgdmFsdWUgZm9yIHRoZSBnaXZlbiBieS1wYXJ0LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gYVR5cGUgICAgICAgIFRoZSBjb21wb25lbnQgcGFydCBuYW1lXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFWYWx1ZXMgICAgICAgVGhlIGNvbXBvbmVudCB2YWx1ZXNcbiAgICovXG4gIHNldENvbXBvbmVudChhVHlwZSwgYVZhbHVlcykge1xuICAgIHRoaXMucGFydHNbYVR5cGUudG9VcHBlckNhc2UoKV0gPSBhVmFsdWVzLnNsaWNlKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyAoYSBjb3B5KSBvZiB0aGUgcmVxdWVzdGVkIGNvbXBvbmVudCB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFUeXBlICAgICAgICBUaGUgY29tcG9uZW50IHBhcnQgbmFtZVxuICAgKiBAcmV0dXJuIHtBcnJheX0gICAgICAgICAgICAgIFRoZSBjb21wb25lbnQgcGFydCB2YWx1ZVxuICAgKi9cbiAgZ2V0Q29tcG9uZW50KGFUeXBlKSB7XG4gICAgbGV0IHVjbmFtZSA9IGFUeXBlLnRvVXBwZXJDYXNlKCk7XG4gICAgcmV0dXJuICh1Y25hbWUgaW4gdGhpcy5wYXJ0cyA/IHRoaXMucGFydHNbdWNuYW1lXS5zbGljZSgpIDogW10pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyB0aGUgbmV4dCBvY2N1cnJlbmNlIGFmdGVyIHRoZSBnaXZlbiByZWN1cnJlbmNlIGlkLiBTZWUgdGhlXG4gICAqIGd1aWRlIG9uIHtAdHV0b3JpYWwgdGVybWlub2xvZ3l9IGZvciBtb3JlIGRldGFpbHMuXG4gICAqXG4gICAqIE5PVEU6IEN1cnJlbnRseSwgdGhpcyBtZXRob2QgaXRlcmF0ZXMgYWxsIG9jY3VycmVuY2VzIGZyb20gdGhlIHN0YXJ0XG4gICAqIGRhdGUuIEl0IHNob3VsZCBub3QgYmUgY2FsbGVkIGluIGEgbG9vcCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy4gSWYgeW91XG4gICAqIHdvdWxkIGxpa2UgdG8gZ2V0IG1vcmUgdGhhbiBvbmUgb2NjdXJyZW5jZSwgeW91IGNhbiBpdGVyYXRlIHRoZVxuICAgKiBvY2N1cnJlbmNlcyBtYW51YWxseSwgc2VlIHRoZSBleGFtcGxlIG9uIHRoZVxuICAgKiB7QGxpbmsgSUNBTC5SZWN1ciNpdGVyYXRvciBpdGVyYXRvcn0gbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0ge1RpbWV9IGFTdGFydFRpbWUgICAgICAgIFRoZSBzdGFydCBvZiB0aGUgZXZlbnQgc2VyaWVzXG4gICAqIEBwYXJhbSB7VGltZX0gYVJlY3VycmVuY2VJZCAgICAgVGhlIGRhdGUgb2YgdGhlIGxhc3Qgb2NjdXJyZW5jZVxuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgICAgICAgICAgICAgIFRoZSBuZXh0IG9jY3VycmVuY2UgYWZ0ZXJcbiAgICovXG4gIGdldE5leHRPY2N1cnJlbmNlKGFTdGFydFRpbWUsIGFSZWN1cnJlbmNlSWQpIHtcbiAgICBsZXQgaXRlciA9IHRoaXMuaXRlcmF0b3IoYVN0YXJ0VGltZSk7XG4gICAgbGV0IG5leHQ7XG5cbiAgICBkbyB7XG4gICAgICBuZXh0ID0gaXRlci5uZXh0KCk7XG4gICAgfSB3aGlsZSAobmV4dCAmJiBuZXh0LmNvbXBhcmUoYVJlY3VycmVuY2VJZCkgPD0gMCk7XG5cbiAgICBpZiAobmV4dCAmJiBhUmVjdXJyZW5jZUlkLnpvbmUpIHtcbiAgICAgIG5leHQuem9uZSA9IGFSZWN1cnJlbmNlSWQuem9uZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV4dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIHRoZSBjdXJyZW50IGluc3RhbmNlIHVzaW5nIG1lbWJlcnMgZnJvbSB0aGUgcGFzc2VkIGRhdGEgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbiBvYmplY3Qgd2l0aCBtZW1iZXJzIG9mIHRoZSByZWN1cnJlbmNlXG4gICAqIEBwYXJhbSB7ZnJlcXVlbmN5VmFsdWVzPX0gZGF0YS5mcmVxICAgICAgICAgICAgICAgIFRoZSBmcmVxdWVuY3kgdmFsdWVcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBkYXRhLmludGVydmFsICAgICAgICAgICAgICAgICAgICAgVGhlIElOVEVSVkFMIHZhbHVlXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGRhdGEud2tzdCAgICAgICAgICAgICAgICAgICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHZhbHVlXG4gICAqIEBwYXJhbSB7VGltZT19IGRhdGEudW50aWwgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBlbmQgb2YgdGhlIHJlY3VycmVuY2Ugc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS5jb3VudCAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBudW1iZXIgb2Ygb2NjdXJyZW5jZXNcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGRhdGEuYnlzZWNvbmQgICAgICAgICAgICAgVGhlIHNlY29uZHMgZm9yIHRoZSBCWVNFQ09ORCBwYXJ0XG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBkYXRhLmJ5bWludXRlICAgICAgICAgICAgIFRoZSBtaW51dGVzIGZvciB0aGUgQllNSU5VVEUgcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxOdW1iZXI+PX0gZGF0YS5ieWhvdXIgICAgICAgICAgICAgICBUaGUgaG91cnMgZm9yIHRoZSBCWUhPVVIgcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxTdHJpbmc+PX0gZGF0YS5ieWRheSAgICAgICAgICAgICAgICBUaGUgQllEQVkgdmFsdWVzXG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBkYXRhLmJ5bW9udGhkYXkgICAgICAgICAgIFRoZSBkYXlzIGZvciB0aGUgQllNT05USERBWSBwYXJ0XG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBkYXRhLmJ5eWVhcmRheSAgICAgICAgICAgIFRoZSBkYXlzIGZvciB0aGUgQllZRUFSREFZIHBhcnRcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGRhdGEuYnl3ZWVrbm8gICAgICAgICAgICAgVGhlIHdlZWtzIGZvciB0aGUgQllXRUVLTk8gcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxOdW1iZXI+PX0gZGF0YS5ieW1vbnRoICAgICAgICAgICAgICBUaGUgbW9udGggZm9yIHRoZSBCWU1PTlRIIHBhcnRcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGRhdGEuYnlzZXRwb3MgICAgICAgICAgICAgVGhlIHBvc2l0aW9uYWxzIGZvciB0aGUgQllTRVRQT1MgcGFydFxuICAgKi9cbiAgZnJvbURhdGEoZGF0YSkge1xuICAgIGZvciAobGV0IGtleSBpbiBkYXRhKSB7XG4gICAgICBsZXQgdWNrZXkgPSBrZXkudG9VcHBlckNhc2UoKTtcblxuICAgICAgaWYgKHVja2V5IGluIHBhcnREZXNpZ24pIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YVtrZXldKSkge1xuICAgICAgICAgIHRoaXMucGFydHNbdWNrZXldID0gZGF0YVtrZXldO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucGFydHNbdWNrZXldID0gW2RhdGFba2V5XV07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXNba2V5XSA9IGRhdGFba2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5pbnRlcnZhbCAmJiB0eXBlb2YgdGhpcy5pbnRlcnZhbCAhPSBcIm51bWJlclwiKSB7XG4gICAgICBvcHRpb25EZXNpZ24uSU5URVJWQUwodGhpcy5pbnRlcnZhbCwgdGhpcyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMud2tzdCAmJiB0eXBlb2YgdGhpcy53a3N0ICE9IFwibnVtYmVyXCIpIHtcbiAgICAgIHRoaXMud2tzdCA9IFJlY3VyLmljYWxEYXlUb051bWVyaWNEYXkodGhpcy53a3N0KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy51bnRpbCAmJiAhKHRoaXMudW50aWwgaW5zdGFuY2VvZiBUaW1lKSkge1xuICAgICAgdGhpcy51bnRpbCA9IFRpbWUuZnJvbVN0cmluZyh0aGlzLnVudGlsKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIGpDYWwgcmVwcmVzZW50YXRpb24gb2YgdGhpcyByZWN1cnJlbmNlIHR5cGUuXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICBsZXQgcmVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZXMuZnJlcSA9IHRoaXMuZnJlcTtcblxuICAgIGlmICh0aGlzLmNvdW50KSB7XG4gICAgICByZXMuY291bnQgPSB0aGlzLmNvdW50O1xuICAgIH1cblxuICAgIGlmICh0aGlzLmludGVydmFsID4gMSkge1xuICAgICAgcmVzLmludGVydmFsID0gdGhpcy5pbnRlcnZhbDtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBbaywga3BhcnRzXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnBhcnRzKSkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoa3BhcnRzKSAmJiBrcGFydHMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgcmVzW2sudG9Mb3dlckNhc2UoKV0gPSBrcGFydHNbMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNbay50b0xvd2VyQ2FzZSgpXSA9IGNsb25lKGtwYXJ0cyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudW50aWwpIHtcbiAgICAgIHJlcy51bnRpbCA9IHRoaXMudW50aWwudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgaWYgKCd3a3N0JyBpbiB0aGlzICYmIHRoaXMud2tzdCAhPT0gVGltZS5ERUZBVUxUX1dFRUtfU1RBUlQpIHtcbiAgICAgIHJlcy53a3N0ID0gUmVjdXIubnVtZXJpY0RheVRvSWNhbERheSh0aGlzLndrc3QpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyByZWN1cnJlbmNlIHJ1bGUuXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIHRvU3RyaW5nKCkge1xuICAgIC8vIFRPRE8gcmV0YWluIG9yZGVyXG4gICAgbGV0IHN0ciA9IFwiRlJFUT1cIiArIHRoaXMuZnJlcTtcbiAgICBpZiAodGhpcy5jb3VudCkge1xuICAgICAgc3RyICs9IFwiO0NPVU5UPVwiICsgdGhpcy5jb3VudDtcbiAgICB9XG4gICAgaWYgKHRoaXMuaW50ZXJ2YWwgPiAxKSB7XG4gICAgICBzdHIgKz0gXCI7SU5URVJWQUw9XCIgKyB0aGlzLmludGVydmFsO1xuICAgIH1cbiAgICBmb3IgKGxldCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5wYXJ0cykpIHtcbiAgICAgIHN0ciArPSBcIjtcIiArIGsgKyBcIj1cIiArIHY7XG4gICAgfVxuICAgIGlmICh0aGlzLnVudGlsKSB7XG4gICAgICBzdHIgKz0gJztVTlRJTD0nICsgdGhpcy51bnRpbC50b0lDQUxTdHJpbmcoKTtcbiAgICB9XG4gICAgaWYgKCd3a3N0JyBpbiB0aGlzICYmIHRoaXMud2tzdCAhPT0gVGltZS5ERUZBVUxUX1dFRUtfU1RBUlQpIHtcbiAgICAgIHN0ciArPSAnO1dLU1Q9JyArIFJlY3VyLm51bWVyaWNEYXlUb0ljYWxEYXkodGhpcy53a3N0KTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxufVxuXG5mdW5jdGlvbiBwYXJzZU51bWVyaWNWYWx1ZSh0eXBlLCBtaW4sIG1heCwgdmFsdWUpIHtcbiAgbGV0IHJlc3VsdCA9IHZhbHVlO1xuXG4gIGlmICh2YWx1ZVswXSA9PT0gJysnKSB7XG4gICAgcmVzdWx0ID0gdmFsdWUuc2xpY2UoMSk7XG4gIH1cblxuICByZXN1bHQgPSBzdHJpY3RQYXJzZUludChyZXN1bHQpO1xuXG4gIGlmIChtaW4gIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA8IG1pbikge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIHR5cGUgKyAnOiBpbnZhbGlkIHZhbHVlIFwiJyArIHZhbHVlICsgJ1wiIG11c3QgYmUgPiAnICsgbWluXG4gICAgKTtcbiAgfVxuXG4gIGlmIChtYXggIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA+IG1heCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIHR5cGUgKyAnOiBpbnZhbGlkIHZhbHVlIFwiJyArIHZhbHVlICsgJ1wiIG11c3QgYmUgPCAnICsgbWluXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmNvbnN0IG9wdGlvbkRlc2lnbiA9IHtcbiAgRlJFUTogZnVuY3Rpb24odmFsdWUsIGRpY3QsIGZtdEljYWwpIHtcbiAgICAvLyB5ZXMgdGhpcyBpcyBhY3R1YWxseSBlcXVhbCBvciBmYXN0ZXIgdGhlbiByZWdleC5cbiAgICAvLyB1cHNpZGUgaGVyZSBpcyB3ZSBjYW4gZW51bWVyYXRlIHRoZSB2YWxpZCB2YWx1ZXMuXG4gICAgaWYgKEFMTE9XRURfRlJFUS5pbmRleE9mKHZhbHVlKSAhPT0gLTEpIHtcbiAgICAgIGRpY3QuZnJlcSA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdpbnZhbGlkIGZyZXF1ZW5jeSBcIicgKyB2YWx1ZSArICdcIiBleHBlY3RlZDogXCInICtcbiAgICAgICAgQUxMT1dFRF9GUkVRLmpvaW4oJywgJykgKyAnXCInXG4gICAgICApO1xuICAgIH1cbiAgfSxcblxuICBDT1VOVDogZnVuY3Rpb24odmFsdWUsIGRpY3QsIGZtdEljYWwpIHtcbiAgICBkaWN0LmNvdW50ID0gc3RyaWN0UGFyc2VJbnQodmFsdWUpO1xuICB9LFxuXG4gIElOVEVSVkFMOiBmdW5jdGlvbih2YWx1ZSwgZGljdCwgZm10SWNhbCkge1xuICAgIGRpY3QuaW50ZXJ2YWwgPSBzdHJpY3RQYXJzZUludCh2YWx1ZSk7XG4gICAgaWYgKGRpY3QuaW50ZXJ2YWwgPCAxKSB7XG4gICAgICAvLyAwIG9yIG5lZ2F0aXZlIHZhbHVlcyBhcmUgbm90IGFsbG93ZWQsIHNvbWUgZW5naW5lcyBzZWVtIHRvIGdlbmVyYXRlXG4gICAgICAvLyBpdCB0aG91Z2guIEFzc3VtZSAxIGluc3RlYWQuXG4gICAgICBkaWN0LmludGVydmFsID0gMTtcbiAgICB9XG4gIH0sXG5cbiAgVU5USUw6IGZ1bmN0aW9uKHZhbHVlLCBkaWN0LCBmbXRJY2FsKSB7XG4gICAgaWYgKHZhbHVlLmxlbmd0aCA+IDEwKSB7XG4gICAgICBkaWN0LnVudGlsID0gZGVzaWduLmljYWxlbmRhci52YWx1ZVsnZGF0ZS10aW1lJ10uZnJvbUlDQUwodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaWN0LnVudGlsID0gZGVzaWduLmljYWxlbmRhci52YWx1ZS5kYXRlLmZyb21JQ0FMKHZhbHVlKTtcbiAgICB9XG4gICAgaWYgKCFmbXRJY2FsKSB7XG4gICAgICBkaWN0LnVudGlsID0gVGltZS5mcm9tU3RyaW5nKGRpY3QudW50aWwpO1xuICAgIH1cbiAgfSxcblxuICBXS1NUOiBmdW5jdGlvbih2YWx1ZSwgZGljdCwgZm10SWNhbCkge1xuICAgIGlmIChWQUxJRF9EQVlfTkFNRVMudGVzdCh2YWx1ZSkpIHtcbiAgICAgIGRpY3Qud2tzdCA9IFJlY3VyLmljYWxEYXlUb051bWVyaWNEYXkodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgV0tTVCB2YWx1ZSBcIicgKyB2YWx1ZSArICdcIicpO1xuICAgIH1cbiAgfVxufTtcblxuY29uc3QgcGFydERlc2lnbiA9IHtcbiAgQllTRUNPTkQ6IHBhcnNlTnVtZXJpY1ZhbHVlLmJpbmQodW5kZWZpbmVkLCAnQllTRUNPTkQnLCAwLCA2MCksXG4gIEJZTUlOVVRFOiBwYXJzZU51bWVyaWNWYWx1ZS5iaW5kKHVuZGVmaW5lZCwgJ0JZTUlOVVRFJywgMCwgNTkpLFxuICBCWUhPVVI6IHBhcnNlTnVtZXJpY1ZhbHVlLmJpbmQodW5kZWZpbmVkLCAnQllIT1VSJywgMCwgMjMpLFxuICBCWURBWTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoVkFMSURfQllEQVlfUEFSVC50ZXN0KHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgQllEQVkgdmFsdWUgXCInICsgdmFsdWUgKyAnXCInKTtcbiAgICB9XG4gIH0sXG4gIEJZTU9OVEhEQVk6IHBhcnNlTnVtZXJpY1ZhbHVlLmJpbmQodW5kZWZpbmVkLCAnQllNT05USERBWScsIC0zMSwgMzEpLFxuICBCWVlFQVJEQVk6IHBhcnNlTnVtZXJpY1ZhbHVlLmJpbmQodW5kZWZpbmVkLCAnQllZRUFSREFZJywgLTM2NiwgMzY2KSxcbiAgQllXRUVLTk86IHBhcnNlTnVtZXJpY1ZhbHVlLmJpbmQodW5kZWZpbmVkLCAnQllXRUVLTk8nLCAtNTMsIDUzKSxcbiAgQllNT05USDogcGFyc2VOdW1lcmljVmFsdWUuYmluZCh1bmRlZmluZWQsICdCWU1PTlRIJywgMSwgMTIpLFxuICBCWVNFVFBPUzogcGFyc2VOdW1lcmljVmFsdWUuYmluZCh1bmRlZmluZWQsICdCWVNFVFBPUycsIC0zNjYsIDM2Nilcbn07XG5cbi8qIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKiBQb3J0aW9ucyBDb3B5cmlnaHQgKEMpIFBoaWxpcHAgS2V3aXNjaCAqL1xuXG5cbi8qKlxuICogVGhpcyBsZXRzIHR5cGVzY3JpcHQgcmVzb2x2ZSBvdXIgY3VzdG9tIHR5cGVzIGluIHRoZVxuICogZ2VuZXJhdGVkIGQudHMgZmlsZXMgKGpzZG9jIHR5cGVkZWZzIGFyZSBjb252ZXJ0ZWQgdG8gdHlwZXNjcmlwdCB0eXBlcykuXG4gKiBJZ25vcmUgcHJldmVudHMgdGhlIHR5cGVkZWZzIGZyb20gYmVpbmcgZG9jdW1lbnRlZCBtb3JlIHRoYW4gb25jZS5cbiAqIEBpZ25vcmVcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL3R5cGVzLmpzXCIpLmRlc2lnblNldH0gZGVzaWduU2V0XG4gKiBJbXBvcnRzIHRoZSAnZGVzaWduU2V0JyB0eXBlIGZyb20gdGhlIFwidHlwZXMuanNcIiBtb2R1bGVcbiAqL1xuXG4vKiogQG1vZHVsZSBJQ0FMLmRlc2lnbiAqL1xuXG5jb25zdCBGUk9NX0lDQUxfTkVXTElORSA9IC9cXFxcXFxcXHxcXFxcO3xcXFxcLHxcXFxcW05uXS9nO1xuY29uc3QgVE9fSUNBTF9ORVdMSU5FID0gL1xcXFx8O3wsfFxcbi9nO1xuY29uc3QgRlJPTV9WQ0FSRF9ORVdMSU5FID0gL1xcXFxcXFxcfFxcXFwsfFxcXFxbTm5dL2c7XG5jb25zdCBUT19WQ0FSRF9ORVdMSU5FID0gL1xcXFx8LHxcXG4vZztcblxuZnVuY3Rpb24gY3JlYXRlVGV4dFR5cGUoZnJvbU5ld2xpbmUsIHRvTmV3bGluZSkge1xuICBsZXQgcmVzdWx0ID0ge1xuICAgIG1hdGNoZXM6IC8uKi8sXG5cbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlLCBzdHJ1Y3R1cmVkRXNjYXBlKSB7XG4gICAgICByZXR1cm4gcmVwbGFjZU5ld2xpbmUoYVZhbHVlLCBmcm9tTmV3bGluZSwgc3RydWN0dXJlZEVzY2FwZSk7XG4gICAgfSxcblxuICAgIHRvSUNBTDogZnVuY3Rpb24oYVZhbHVlLCBzdHJ1Y3R1cmVkRXNjYXBlKSB7XG4gICAgICBsZXQgcmVnRXggPSB0b05ld2xpbmU7XG4gICAgICBpZiAoc3RydWN0dXJlZEVzY2FwZSlcbiAgICAgICAgIHJlZ0V4ID0gbmV3IFJlZ0V4cChyZWdFeC5zb3VyY2UgKyAnfCcgKyBzdHJ1Y3R1cmVkRXNjYXBlLCByZWdFeC5mbGFncyk7XG4gICAgICByZXR1cm4gYVZhbHVlLnJlcGxhY2UocmVnRXgsIGZ1bmN0aW9uKHN0cikge1xuICAgICAgICBzd2l0Y2ggKHN0cikge1xuICAgICAgICBjYXNlIFwiXFxcXFwiOlxuICAgICAgICAgIHJldHVybiBcIlxcXFxcXFxcXCI7XG4gICAgICAgIGNhc2UgXCI7XCI6XG4gICAgICAgICAgcmV0dXJuIFwiXFxcXDtcIjtcbiAgICAgICAgY2FzZSBcIixcIjpcbiAgICAgICAgICByZXR1cm4gXCJcXFxcLFwiO1xuICAgICAgICBjYXNlIFwiXFxuXCI6XG4gICAgICAgICAgcmV0dXJuIFwiXFxcXG5cIjtcbiAgICAgICAgLyogYzggaWdub3JlIG5leHQgMiAqL1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiBzdHI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLy8gZGVmYXVsdCB0eXBlcyB1c2VkIG11bHRpcGxlIHRpbWVzXG5jb25zdCBERUZBVUxUX1RZUEVfVEVYVCA9IHsgZGVmYXVsdFR5cGU6IFwidGV4dFwiIH07XG5jb25zdCBERUZBVUxUX1RZUEVfVEVYVF9NVUxUSSA9IHsgZGVmYXVsdFR5cGU6IFwidGV4dFwiLCBtdWx0aVZhbHVlOiBcIixcIiB9O1xuY29uc3QgREVGQVVMVF9UWVBFX1RFWFRfU1RSVUNUVVJFRCA9IHsgZGVmYXVsdFR5cGU6IFwidGV4dFwiLCBzdHJ1Y3R1cmVkVmFsdWU6IFwiO1wiIH07XG5jb25zdCBERUZBVUxUX1RZUEVfSU5URUdFUiA9IHsgZGVmYXVsdFR5cGU6IFwiaW50ZWdlclwiIH07XG5jb25zdCBERUZBVUxUX1RZUEVfREFURVRJTUVfREFURSA9IHsgZGVmYXVsdFR5cGU6IFwiZGF0ZS10aW1lXCIsIGFsbG93ZWRUeXBlczogW1wiZGF0ZS10aW1lXCIsIFwiZGF0ZVwiXSB9O1xuY29uc3QgREVGQVVMVF9UWVBFX0RBVEVUSU1FID0geyBkZWZhdWx0VHlwZTogXCJkYXRlLXRpbWVcIiB9O1xuY29uc3QgREVGQVVMVF9UWVBFX1VSSSA9IHsgZGVmYXVsdFR5cGU6IFwidXJpXCIgfTtcbmNvbnN0IERFRkFVTFRfVFlQRV9VVENPRkZTRVQgPSB7IGRlZmF1bHRUeXBlOiBcInV0Yy1vZmZzZXRcIiB9O1xuY29uc3QgREVGQVVMVF9UWVBFX1JFQ1VSID0geyBkZWZhdWx0VHlwZTogXCJyZWN1clwiIH07XG5jb25zdCBERUZBVUxUX1RZUEVfREFURV9BTkRPUl9USU1FID0geyBkZWZhdWx0VHlwZTogXCJkYXRlLWFuZC1vci10aW1lXCIsIGFsbG93ZWRUeXBlczogW1wiZGF0ZS10aW1lXCIsIFwiZGF0ZVwiLCBcInRleHRcIl0gfTtcblxuZnVuY3Rpb24gcmVwbGFjZU5ld2xpbmVSZXBsYWNlKHN0cmluZykge1xuICBzd2l0Y2ggKHN0cmluZykge1xuICAgIGNhc2UgXCJcXFxcXFxcXFwiOlxuICAgICAgcmV0dXJuIFwiXFxcXFwiO1xuICAgIGNhc2UgXCJcXFxcO1wiOlxuICAgICAgcmV0dXJuIFwiO1wiO1xuICAgIGNhc2UgXCJcXFxcLFwiOlxuICAgICAgcmV0dXJuIFwiLFwiO1xuICAgIGNhc2UgXCJcXFxcblwiOlxuICAgIGNhc2UgXCJcXFxcTlwiOlxuICAgICAgcmV0dXJuIFwiXFxuXCI7XG4gICAgLyogYzggaWdub3JlIG5leHQgMiAqL1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RyaW5nO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlcGxhY2VOZXdsaW5lKHZhbHVlLCBuZXdsaW5lLCBzdHJ1Y3R1cmVkRXNjYXBlKSB7XG4gIC8vIGF2b2lkIHJlZ2V4IHdoZW4gcG9zc2libGUuXG4gIGlmICh2YWx1ZS5pbmRleE9mKCdcXFxcJykgPT09IC0xKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChzdHJ1Y3R1cmVkRXNjYXBlKVxuICAgICBuZXdsaW5lID0gbmV3IFJlZ0V4cChuZXdsaW5lLnNvdXJjZSArICd8XFxcXFxcXFwnICsgc3RydWN0dXJlZEVzY2FwZSwgbmV3bGluZS5mbGFncyk7XG4gIHJldHVybiB2YWx1ZS5yZXBsYWNlKG5ld2xpbmUsIHJlcGxhY2VOZXdsaW5lUmVwbGFjZSk7XG59XG5cbmxldCBjb21tb25Qcm9wZXJ0aWVzID0ge1xuICBcImNhdGVnb3JpZXNcIjogREVGQVVMVF9UWVBFX1RFWFRfTVVMVEksXG4gIFwidXJsXCI6IERFRkFVTFRfVFlQRV9VUkksXG4gIFwidmVyc2lvblwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJ1aWRcIjogREVGQVVMVF9UWVBFX1RFWFRcbn07XG5cbmxldCBjb21tb25WYWx1ZXMgPSB7XG4gIFwiYm9vbGVhblwiOiB7XG4gICAgdmFsdWVzOiBbXCJUUlVFXCIsIFwiRkFMU0VcIl0sXG5cbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBzd2l0Y2ggKGFWYWx1ZSkge1xuICAgICAgICBjYXNlICdUUlVFJzpcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgY2FzZSAnRkFMU0UnOlxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAvL1RPRE86IHBhcnNlciB3YXJuaW5nXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgaWYgKGFWYWx1ZSkge1xuICAgICAgICByZXR1cm4gJ1RSVUUnO1xuICAgICAgfVxuICAgICAgcmV0dXJuICdGQUxTRSc7XG4gICAgfVxuXG4gIH0sXG4gIGZsb2F0OiB7XG4gICAgbWF0Y2hlczogL15bKy1dP1xcZCtcXC5cXGQrJC8sXG5cbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBsZXQgcGFyc2VkID0gcGFyc2VGbG9hdChhVmFsdWUpO1xuICAgICAgaWYgKGlzU3RyaWN0bHlOYU4ocGFyc2VkKSkge1xuICAgICAgICAvLyBUT0RPOiBwYXJzZXIgd2FybmluZ1xuICAgICAgICByZXR1cm4gMC4wO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhcnNlZDtcbiAgICB9LFxuXG4gICAgdG9JQ0FMOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBTdHJpbmcoYVZhbHVlKTtcbiAgICB9XG4gIH0sXG4gIGludGVnZXI6IHtcbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBsZXQgcGFyc2VkID0gcGFyc2VJbnQoYVZhbHVlKTtcbiAgICAgIGlmIChpc1N0cmljdGx5TmFOKHBhcnNlZCkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGFyc2VkO1xuICAgIH0sXG5cbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIFN0cmluZyhhVmFsdWUpO1xuICAgIH1cbiAgfSxcbiAgXCJ1dGMtb2Zmc2V0XCI6IHtcbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgaWYgKGFWYWx1ZS5sZW5ndGggPCA3KSB7XG4gICAgICAgIC8vIG5vIHNlY29uZHNcbiAgICAgICAgLy8gLTA1MDBcbiAgICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCAzKSArXG4gICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNCwgNik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzZWNvbmRzXG4gICAgICAgIC8vIC0wNTAwMDBcbiAgICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCAzKSArXG4gICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNCwgNikgK1xuICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDcsIDkpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBpZiAoYVZhbHVlLmxlbmd0aCA8IDYpIHtcbiAgICAgICAgLy8gbm8gc2Vjb25kc1xuICAgICAgICAvLyAtMDU6MDBcbiAgICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCAzKSArICc6JyArXG4gICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoMywgNSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzZWNvbmRzXG4gICAgICAgIC8vIC0wNTowMDowMFxuICAgICAgICByZXR1cm4gYVZhbHVlLnNsaWNlKDAsIDMpICsgJzonICtcbiAgICAgICAgICAgICAgIGFWYWx1ZS5zbGljZSgzLCA1KSArICc6JyArXG4gICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNSwgNyk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGRlY29yYXRlOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBVdGNPZmZzZXQuZnJvbVN0cmluZyhhVmFsdWUpO1xuICAgIH0sXG5cbiAgICB1bmRlY29yYXRlOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBhVmFsdWUudG9TdHJpbmcoKTtcbiAgICB9XG4gIH1cbn07XG5cbmxldCBpY2FsUGFyYW1zID0ge1xuICAvLyBBbHRob3VnaCB0aGUgc3ludGF4IGlzIERRVU9URSB1cmkgRFFVT1RFLCBJIGRvbid0IHRoaW5rIHdlIHNob3VsZFxuICAvLyBlbmZvcmNlIGFueXRoaW5nIGFzaWRlIGZyb20gaXQgYmVpbmcgYSB2YWxpZCBjb250ZW50IGxpbmUuXG4gIC8vXG4gIC8vIEF0IGxlYXN0IHNvbWUgcGFyYW1zIHJlcXVpcmUgLSBpZiBtdWx0aSB2YWx1ZXMgYXJlIHVzZWQgLSBEUVVPVEVzXG4gIC8vIGZvciBlYWNoIG9mIGl0cyB2YWx1ZXMgLSBlLmcuIGRlbGVnYXRlZC1mcm9tPVwidXJpMVwiLFwidXJpMlwiXG4gIC8vIFRvIGluZGljYXRlIHRoaXMsIEkgaW50cm9kdWNlZCB0aGUgbmV3IGsvdiBwYWlyXG4gIC8vIG11bHRpVmFsdWVTZXBhcmF0ZURRdW90ZTogdHJ1ZVxuICAvL1xuICAvLyBcIkFMVFJFUFwiOiB7IC4uLiB9LFxuXG4gIC8vIENOIGp1c3Qgd2FudHMgYSBwYXJhbS12YWx1ZVxuICAvLyBcIkNOXCI6IHsgLi4uIH1cblxuICBcImN1dHlwZVwiOiB7XG4gICAgdmFsdWVzOiBbXCJJTkRJVklEVUFMXCIsIFwiR1JPVVBcIiwgXCJSRVNPVVJDRVwiLCBcIlJPT01cIiwgXCJVTktOT1dOXCJdLFxuICAgIGFsbG93WE5hbWU6IHRydWUsXG4gICAgYWxsb3dJYW5hVG9rZW46IHRydWVcbiAgfSxcblxuICBcImRlbGVnYXRlZC1mcm9tXCI6IHtcbiAgICB2YWx1ZVR5cGU6IFwiY2FsLWFkZHJlc3NcIixcbiAgICBtdWx0aVZhbHVlOiBcIixcIixcbiAgICBtdWx0aVZhbHVlU2VwYXJhdGVEUXVvdGU6IHRydWVcbiAgfSxcbiAgXCJkZWxlZ2F0ZWQtdG9cIjoge1xuICAgIHZhbHVlVHlwZTogXCJjYWwtYWRkcmVzc1wiLFxuICAgIG11bHRpVmFsdWU6IFwiLFwiLFxuICAgIG11bHRpVmFsdWVTZXBhcmF0ZURRdW90ZTogdHJ1ZVxuICB9LFxuICAvLyBcIkRJUlwiOiB7IC4uLiB9LCAvLyBTZWUgQUxUUkVQXG4gIFwiZW5jb2RpbmdcIjoge1xuICAgIHZhbHVlczogW1wiOEJJVFwiLCBcIkJBU0U2NFwiXVxuICB9LFxuICAvLyBcIkZNVFRZUEVcIjogeyAuLi4gfSwgLy8gU2VlIEFMVFJFUFxuICBcImZidHlwZVwiOiB7XG4gICAgdmFsdWVzOiBbXCJGUkVFXCIsIFwiQlVTWVwiLCBcIkJVU1ktVU5BVkFJTEFCTEVcIiwgXCJCVVNZLVRFTlRBVElWRVwiXSxcbiAgICBhbGxvd1hOYW1lOiB0cnVlLFxuICAgIGFsbG93SWFuYVRva2VuOiB0cnVlXG4gIH0sXG4gIC8vIFwiTEFOR1VBR0VcIjogeyAuLi4gfSwgLy8gU2VlIEFMVFJFUFxuICBcIm1lbWJlclwiOiB7XG4gICAgdmFsdWVUeXBlOiBcImNhbC1hZGRyZXNzXCIsXG4gICAgbXVsdGlWYWx1ZTogXCIsXCIsXG4gICAgbXVsdGlWYWx1ZVNlcGFyYXRlRFF1b3RlOiB0cnVlXG4gIH0sXG4gIFwicGFydHN0YXRcIjoge1xuICAgIC8vIFRPRE8gVGhlc2UgdmFsdWVzIGFyZSBhY3R1YWxseSBkaWZmZXJlbnQgcGVyLWNvbXBvbmVudFxuICAgIHZhbHVlczogW1wiTkVFRFMtQUNUSU9OXCIsIFwiQUNDRVBURURcIiwgXCJERUNMSU5FRFwiLCBcIlRFTlRBVElWRVwiLFxuICAgICAgICAgICAgIFwiREVMRUdBVEVEXCIsIFwiQ09NUExFVEVEXCIsIFwiSU4tUFJPQ0VTU1wiXSxcbiAgICBhbGxvd1hOYW1lOiB0cnVlLFxuICAgIGFsbG93SWFuYVRva2VuOiB0cnVlXG4gIH0sXG4gIFwicmFuZ2VcIjoge1xuICAgIHZhbHVlczogW1wiVEhJU0FOREZVVFVSRVwiXVxuICB9LFxuICBcInJlbGF0ZWRcIjoge1xuICAgIHZhbHVlczogW1wiU1RBUlRcIiwgXCJFTkRcIl1cbiAgfSxcbiAgXCJyZWx0eXBlXCI6IHtcbiAgICB2YWx1ZXM6IFtcIlBBUkVOVFwiLCBcIkNISUxEXCIsIFwiU0lCTElOR1wiXSxcbiAgICBhbGxvd1hOYW1lOiB0cnVlLFxuICAgIGFsbG93SWFuYVRva2VuOiB0cnVlXG4gIH0sXG4gIFwicm9sZVwiOiB7XG4gICAgdmFsdWVzOiBbXCJSRVEtUEFSVElDSVBBTlRcIiwgXCJDSEFJUlwiLFxuICAgICAgICAgICAgIFwiT1BULVBBUlRJQ0lQQU5UXCIsIFwiTk9OLVBBUlRJQ0lQQU5UXCJdLFxuICAgIGFsbG93WE5hbWU6IHRydWUsXG4gICAgYWxsb3dJYW5hVG9rZW46IHRydWVcbiAgfSxcbiAgXCJyc3ZwXCI6IHtcbiAgICB2YWx1ZXM6IFtcIlRSVUVcIiwgXCJGQUxTRVwiXVxuICB9LFxuICBcInNlbnQtYnlcIjoge1xuICAgIHZhbHVlVHlwZTogXCJjYWwtYWRkcmVzc1wiXG4gIH0sXG4gIFwidHppZFwiOiB7XG4gICAgbWF0Y2hlczogL15cXC8vXG4gIH0sXG4gIFwidmFsdWVcIjoge1xuICAgIC8vIHNpbmNlIHRoZSB2YWx1ZSBoZXJlIGlzIGEgJ3R5cGUnIGxvd2VyY2FzZSBpcyB1c2VkLlxuICAgIHZhbHVlczogW1wiYmluYXJ5XCIsIFwiYm9vbGVhblwiLCBcImNhbC1hZGRyZXNzXCIsIFwiZGF0ZVwiLCBcImRhdGUtdGltZVwiLFxuICAgICAgICAgICAgIFwiZHVyYXRpb25cIiwgXCJmbG9hdFwiLCBcImludGVnZXJcIiwgXCJwZXJpb2RcIiwgXCJyZWN1clwiLCBcInRleHRcIixcbiAgICAgICAgICAgICBcInRpbWVcIiwgXCJ1cmlcIiwgXCJ1dGMtb2Zmc2V0XCJdLFxuICAgIGFsbG93WE5hbWU6IHRydWUsXG4gICAgYWxsb3dJYW5hVG9rZW46IHRydWVcbiAgfVxufTtcblxuLy8gV2hlbiBhZGRpbmcgYSB2YWx1ZSBoZXJlLCBiZSBzdXJlIHRvIGFkZCBpdCB0byB0aGUgcGFyYW1ldGVyIHR5cGVzIVxuY29uc3QgaWNhbFZhbHVlcyA9IGV4dGVuZChjb21tb25WYWx1ZXMsIHtcbiAgdGV4dDogY3JlYXRlVGV4dFR5cGUoRlJPTV9JQ0FMX05FV0xJTkUsIFRPX0lDQUxfTkVXTElORSksXG5cbiAgdXJpOiB7XG4gICAgLy8gVE9ET1xuICAgIC8qIC4uLiAqL1xuICB9LFxuXG4gIFwiYmluYXJ5XCI6IHtcbiAgICBkZWNvcmF0ZTogZnVuY3Rpb24oYVN0cmluZykge1xuICAgICAgcmV0dXJuIEJpbmFyeS5mcm9tU3RyaW5nKGFTdHJpbmcpO1xuICAgIH0sXG5cbiAgICB1bmRlY29yYXRlOiBmdW5jdGlvbihhQmluYXJ5KSB7XG4gICAgICByZXR1cm4gYUJpbmFyeS50b1N0cmluZygpO1xuICAgIH1cbiAgfSxcbiAgXCJjYWwtYWRkcmVzc1wiOiB7XG4gICAgLy8gbmVlZHMgdG8gYmUgYW4gdXJpXG4gIH0sXG4gIFwiZGF0ZVwiOiB7XG4gICAgZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSwgYVByb3ApIHtcbiAgICAgIGlmIChkZXNpZ24uc3RyaWN0KSB7XG4gICAgICAgIHJldHVybiBUaW1lLmZyb21EYXRlU3RyaW5nKGFWYWx1ZSwgYVByb3ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFRpbWUuZnJvbVN0cmluZyhhVmFsdWUsIGFQcm9wKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogdW5kZWNvcmF0ZXMgYSB0aW1lIG9iamVjdC5cbiAgICAgKi9cbiAgICB1bmRlY29yYXRlOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBhVmFsdWUudG9TdHJpbmcoKTtcbiAgICB9LFxuXG4gICAgZnJvbUlDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgLy8gZnJvbTogMjAxMjA5MDFcbiAgICAgIC8vIHRvOiAyMDEyLTA5LTAxXG4gICAgICBpZiAoIWRlc2lnbi5zdHJpY3QgJiYgYVZhbHVlLmxlbmd0aCA+PSAxNSkge1xuICAgICAgICAvLyBUaGlzIGlzIHByb2JhYmx5IGEgZGF0ZS10aW1lLCBlLmcuIDIwMTIwOTAxVDEzMDAwMFpcbiAgICAgICAgcmV0dXJuIGljYWxWYWx1ZXNbXCJkYXRlLXRpbWVcIl0uZnJvbUlDQUwoYVZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhVmFsdWUuc2xpY2UoMCwgNCkgKyAnLScgK1xuICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDQsIDYpICsgJy0nICtcbiAgICAgICAgICAgICAgIGFWYWx1ZS5zbGljZSg2LCA4KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdG9JQ0FMOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIC8vIGZyb206IDIwMTItMDktMDFcbiAgICAgIC8vIHRvOiAyMDEyMDkwMVxuICAgICAgbGV0IGxlbiA9IGFWYWx1ZS5sZW5ndGg7XG5cbiAgICAgIGlmIChsZW4gPT0gMTApIHtcbiAgICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCA0KSArXG4gICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNSwgNykgK1xuICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDgsIDEwKTtcbiAgICAgIH0gZWxzZSBpZiAobGVuID49IDE5KSB7XG4gICAgICAgIHJldHVybiBpY2FsVmFsdWVzW1wiZGF0ZS10aW1lXCJdLnRvSUNBTChhVmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy9UT0RPOiBzZXJpYWxpemUgd2FybmluZz9cbiAgICAgICAgcmV0dXJuIGFWYWx1ZTtcbiAgICAgIH1cblxuICAgIH1cbiAgfSxcbiAgXCJkYXRlLXRpbWVcIjoge1xuICAgIGZyb21JQ0FMOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIC8vIGZyb206IDIwMTIwOTAxVDEzMDAwMFxuICAgICAgLy8gdG86IDIwMTItMDktMDFUMTM6MDA6MDBcbiAgICAgIGlmICghZGVzaWduLnN0cmljdCAmJiBhVmFsdWUubGVuZ3RoID09IDgpIHtcbiAgICAgICAgLy8gVGhpcyBpcyBwcm9iYWJseSBhIGRhdGUsIGUuZy4gMjAxMjA5MDFcbiAgICAgICAgcmV0dXJuIGljYWxWYWx1ZXMuZGF0ZS5mcm9tSUNBTChhVmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGFWYWx1ZS5zbGljZSgwLCA0KSArICctJyArXG4gICAgICAgICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNCwgNikgKyAnLScgK1xuICAgICAgICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDYsIDgpICsgJ1QnICtcbiAgICAgICAgICAgICAgICAgICAgIGFWYWx1ZS5zbGljZSg5LCAxMSkgKyAnOicgK1xuICAgICAgICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDExLCAxMykgKyAnOicgK1xuICAgICAgICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDEzLCAxNSk7XG5cbiAgICAgICAgaWYgKGFWYWx1ZVsxNV0gJiYgYVZhbHVlWzE1XSA9PT0gJ1onKSB7XG4gICAgICAgICAgcmVzdWx0ICs9ICdaJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHRvSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICAvLyBmcm9tOiAyMDEyLTA5LTAxVDEzOjAwOjAwXG4gICAgICAvLyB0bzogMjAxMjA5MDFUMTMwMDAwXG4gICAgICBsZXQgbGVuID0gYVZhbHVlLmxlbmd0aDtcblxuICAgICAgaWYgKGxlbiA9PSAxMCAmJiAhZGVzaWduLnN0cmljdCkge1xuICAgICAgICByZXR1cm4gaWNhbFZhbHVlcy5kYXRlLnRvSUNBTChhVmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChsZW4gPj0gMTkpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGFWYWx1ZS5zbGljZSgwLCA0KSArXG4gICAgICAgICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNSwgNykgK1xuICAgICAgICAgICAgICAgICAgICAgLy8gZ3JhYiB0aGUgKEREVEhIKSBzZWdtZW50XG4gICAgICAgICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoOCwgMTMpICtcbiAgICAgICAgICAgICAgICAgICAgIC8vIE1NXG4gICAgICAgICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoMTQsIDE2KSArXG4gICAgICAgICAgICAgICAgICAgICAvLyBTU1xuICAgICAgICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDE3LCAxOSk7XG5cbiAgICAgICAgaWYgKGFWYWx1ZVsxOV0gJiYgYVZhbHVlWzE5XSA9PT0gJ1onKSB7XG4gICAgICAgICAgcmVzdWx0ICs9ICdaJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVE9ETzogZXJyb3JcbiAgICAgICAgcmV0dXJuIGFWYWx1ZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSwgYVByb3ApIHtcbiAgICAgIGlmIChkZXNpZ24uc3RyaWN0KSB7XG4gICAgICAgIHJldHVybiBUaW1lLmZyb21EYXRlVGltZVN0cmluZyhhVmFsdWUsIGFQcm9wKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBUaW1lLmZyb21TdHJpbmcoYVZhbHVlLCBhUHJvcCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHVuZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIGFWYWx1ZS50b1N0cmluZygpO1xuICAgIH1cbiAgfSxcbiAgZHVyYXRpb246IHtcbiAgICBkZWNvcmF0ZTogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24uZnJvbVN0cmluZyhhVmFsdWUpO1xuICAgIH0sXG4gICAgdW5kZWNvcmF0ZTogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICByZXR1cm4gYVZhbHVlLnRvU3RyaW5nKCk7XG4gICAgfVxuICB9LFxuICBwZXJpb2Q6IHtcbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICBsZXQgcGFydHMgPSBzdHJpbmcuc3BsaXQoJy8nKTtcbiAgICAgIHBhcnRzWzBdID0gaWNhbFZhbHVlc1snZGF0ZS10aW1lJ10uZnJvbUlDQUwocGFydHNbMF0pO1xuXG4gICAgICBpZiAoIUR1cmF0aW9uLmlzVmFsdWVTdHJpbmcocGFydHNbMV0pKSB7XG4gICAgICAgIHBhcnRzWzFdID0gaWNhbFZhbHVlc1snZGF0ZS10aW1lJ10uZnJvbUlDQUwocGFydHNbMV0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGFydHM7XG4gICAgfSxcblxuICAgIHRvSUNBTDogZnVuY3Rpb24ocGFydHMpIHtcbiAgICAgIHBhcnRzID0gcGFydHMuc2xpY2UoKTtcbiAgICAgIGlmICghZGVzaWduLnN0cmljdCAmJiBwYXJ0c1swXS5sZW5ndGggPT0gMTApIHtcbiAgICAgICAgcGFydHNbMF0gPSBpY2FsVmFsdWVzLmRhdGUudG9JQ0FMKHBhcnRzWzBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnRzWzBdID0gaWNhbFZhbHVlc1snZGF0ZS10aW1lJ10udG9JQ0FMKHBhcnRzWzBdKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFEdXJhdGlvbi5pc1ZhbHVlU3RyaW5nKHBhcnRzWzFdKSkge1xuICAgICAgICBpZiAoIWRlc2lnbi5zdHJpY3QgJiYgcGFydHNbMV0ubGVuZ3RoID09IDEwKSB7XG4gICAgICAgICAgcGFydHNbMV0gPSBpY2FsVmFsdWVzLmRhdGUudG9JQ0FMKHBhcnRzWzFdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJ0c1sxXSA9IGljYWxWYWx1ZXNbJ2RhdGUtdGltZSddLnRvSUNBTChwYXJ0c1sxXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBhcnRzLmpvaW4oXCIvXCIpO1xuICAgIH0sXG5cbiAgICBkZWNvcmF0ZTogZnVuY3Rpb24oYVZhbHVlLCBhUHJvcCkge1xuICAgICAgcmV0dXJuIFBlcmlvZC5mcm9tSlNPTihhVmFsdWUsIGFQcm9wLCAhZGVzaWduLnN0cmljdCk7XG4gICAgfSxcblxuICAgIHVuZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIGFWYWx1ZS50b0pTT04oKTtcbiAgICB9XG4gIH0sXG4gIHJlY3VyOiB7XG4gICAgZnJvbUlDQUw6IGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgcmV0dXJuIFJlY3VyLl9zdHJpbmdUb0RhdGEoc3RyaW5nLCB0cnVlKTtcbiAgICB9LFxuXG4gICAgdG9JQ0FMOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBsZXQgc3RyID0gXCJcIjtcbiAgICAgIGZvciAobGV0IFtrLCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEpKSB7XG4gICAgICAgIGlmIChrID09IFwidW50aWxcIikge1xuICAgICAgICAgIGlmICh2YWwubGVuZ3RoID4gMTApIHtcbiAgICAgICAgICAgIHZhbCA9IGljYWxWYWx1ZXNbJ2RhdGUtdGltZSddLnRvSUNBTCh2YWwpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YWwgPSBpY2FsVmFsdWVzLmRhdGUudG9JQ0FMKHZhbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGsgPT0gXCJ3a3N0XCIpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHZhbCA9IFJlY3VyLm51bWVyaWNEYXlUb0ljYWxEYXkodmFsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICAgICAgdmFsID0gdmFsLmpvaW4oXCIsXCIpO1xuICAgICAgICB9XG4gICAgICAgIHN0ciArPSBrLnRvVXBwZXJDYXNlKCkgKyBcIj1cIiArIHZhbCArIFwiO1wiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0ci5zbGljZSgwLCBNYXRoLm1heCgwLCBzdHIubGVuZ3RoIC0gMSkpO1xuICAgIH0sXG5cbiAgICBkZWNvcmF0ZTogZnVuY3Rpb24gZGVjb3JhdGUoYVZhbHVlKSB7XG4gICAgICByZXR1cm4gUmVjdXIuZnJvbURhdGEoYVZhbHVlKTtcbiAgICB9LFxuXG4gICAgdW5kZWNvcmF0ZTogZnVuY3Rpb24oYVJlY3VyKSB7XG4gICAgICByZXR1cm4gYVJlY3VyLnRvSlNPTigpO1xuICAgIH1cbiAgfSxcblxuICB0aW1lOiB7XG4gICAgZnJvbUlDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgLy8gZnJvbTogTU1ISFNTKFopP1xuICAgICAgLy8gdG86IEhIOk1NOlNTKFopP1xuICAgICAgaWYgKGFWYWx1ZS5sZW5ndGggPCA2KSB7XG4gICAgICAgIC8vIFRPRE86IHBhcnNlciBleGNlcHRpb24/XG4gICAgICAgIHJldHVybiBhVmFsdWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEhIOjpNTTo6U1NaP1xuICAgICAgbGV0IHJlc3VsdCA9IGFWYWx1ZS5zbGljZSgwLCAyKSArICc6JyArXG4gICAgICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDIsIDQpICsgJzonICtcbiAgICAgICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNCwgNik7XG5cbiAgICAgIGlmIChhVmFsdWVbNl0gPT09ICdaJykge1xuICAgICAgICByZXN1bHQgKz0gJ1onO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgLy8gZnJvbTogSEg6TU06U1MoWik/XG4gICAgICAvLyB0bzogTU1ISFNTKFopP1xuICAgICAgaWYgKGFWYWx1ZS5sZW5ndGggPCA4KSB7XG4gICAgICAgIC8vVE9ETzogZXJyb3JcbiAgICAgICAgcmV0dXJuIGFWYWx1ZTtcbiAgICAgIH1cblxuICAgICAgbGV0IHJlc3VsdCA9IGFWYWx1ZS5zbGljZSgwLCAyKSArXG4gICAgICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDMsIDUpICtcbiAgICAgICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNiwgOCk7XG5cbiAgICAgIGlmIChhVmFsdWVbOF0gPT09ICdaJykge1xuICAgICAgICByZXN1bHQgKz0gJ1onO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgfVxufSk7XG5cbmxldCBpY2FsUHJvcGVydGllcyA9IGV4dGVuZChjb21tb25Qcm9wZXJ0aWVzLCB7XG5cbiAgXCJhY3Rpb25cIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwiYXR0YWNoXCI6IHsgZGVmYXVsdFR5cGU6IFwidXJpXCIgfSxcbiAgXCJhdHRlbmRlZVwiOiB7IGRlZmF1bHRUeXBlOiBcImNhbC1hZGRyZXNzXCIgfSxcbiAgXCJjYWxzY2FsZVwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJjbGFzc1wiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJjb21tZW50XCI6IERFRkFVTFRfVFlQRV9URVhULFxuICBcImNvbXBsZXRlZFwiOiBERUZBVUxUX1RZUEVfREFURVRJTUUsXG4gIFwiY29udGFjdFwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJjcmVhdGVkXCI6IERFRkFVTFRfVFlQRV9EQVRFVElNRSxcbiAgXCJkZXNjcmlwdGlvblwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJkdGVuZFwiOiBERUZBVUxUX1RZUEVfREFURVRJTUVfREFURSxcbiAgXCJkdHN0YW1wXCI6IERFRkFVTFRfVFlQRV9EQVRFVElNRSxcbiAgXCJkdHN0YXJ0XCI6IERFRkFVTFRfVFlQRV9EQVRFVElNRV9EQVRFLFxuICBcImR1ZVwiOiBERUZBVUxUX1RZUEVfREFURVRJTUVfREFURSxcbiAgXCJkdXJhdGlvblwiOiB7IGRlZmF1bHRUeXBlOiBcImR1cmF0aW9uXCIgfSxcbiAgXCJleGRhdGVcIjoge1xuICAgIGRlZmF1bHRUeXBlOiBcImRhdGUtdGltZVwiLFxuICAgIGFsbG93ZWRUeXBlczogW1wiZGF0ZS10aW1lXCIsIFwiZGF0ZVwiXSxcbiAgICBtdWx0aVZhbHVlOiAnLCdcbiAgfSxcbiAgXCJleHJ1bGVcIjogREVGQVVMVF9UWVBFX1JFQ1VSLFxuICBcImZyZWVidXN5XCI6IHsgZGVmYXVsdFR5cGU6IFwicGVyaW9kXCIsIG11bHRpVmFsdWU6IFwiLFwiIH0sXG4gIFwiZ2VvXCI6IHsgZGVmYXVsdFR5cGU6IFwiZmxvYXRcIiwgc3RydWN0dXJlZFZhbHVlOiBcIjtcIiB9LFxuICBcImxhc3QtbW9kaWZpZWRcIjogREVGQVVMVF9UWVBFX0RBVEVUSU1FLFxuICBcImxvY2F0aW9uXCI6IERFRkFVTFRfVFlQRV9URVhULFxuICBcIm1ldGhvZFwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJvcmdhbml6ZXJcIjogeyBkZWZhdWx0VHlwZTogXCJjYWwtYWRkcmVzc1wiIH0sXG4gIFwicGVyY2VudC1jb21wbGV0ZVwiOiBERUZBVUxUX1RZUEVfSU5URUdFUixcbiAgXCJwcmlvcml0eVwiOiBERUZBVUxUX1RZUEVfSU5URUdFUixcbiAgXCJwcm9kaWRcIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwicmVsYXRlZC10b1wiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJyZXBlYXRcIjogREVGQVVMVF9UWVBFX0lOVEVHRVIsXG4gIFwicmRhdGVcIjoge1xuICAgIGRlZmF1bHRUeXBlOiBcImRhdGUtdGltZVwiLFxuICAgIGFsbG93ZWRUeXBlczogW1wiZGF0ZS10aW1lXCIsIFwiZGF0ZVwiLCBcInBlcmlvZFwiXSxcbiAgICBtdWx0aVZhbHVlOiAnLCcsXG4gICAgZGV0ZWN0VHlwZTogZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICBpZiAoc3RyaW5nLmluZGV4T2YoJy8nKSAhPT0gLTEpIHtcbiAgICAgICAgcmV0dXJuICdwZXJpb2QnO1xuICAgICAgfVxuICAgICAgcmV0dXJuIChzdHJpbmcuaW5kZXhPZignVCcpID09PSAtMSkgPyAnZGF0ZScgOiAnZGF0ZS10aW1lJztcbiAgICB9XG4gIH0sXG4gIFwicmVjdXJyZW5jZS1pZFwiOiBERUZBVUxUX1RZUEVfREFURVRJTUVfREFURSxcbiAgXCJyZXNvdXJjZXNcIjogREVGQVVMVF9UWVBFX1RFWFRfTVVMVEksXG4gIFwicmVxdWVzdC1zdGF0dXNcIjogREVGQVVMVF9UWVBFX1RFWFRfU1RSVUNUVVJFRCxcbiAgXCJycnVsZVwiOiBERUZBVUxUX1RZUEVfUkVDVVIsXG4gIFwic2VxdWVuY2VcIjogREVGQVVMVF9UWVBFX0lOVEVHRVIsXG4gIFwic3RhdHVzXCI6IERFRkFVTFRfVFlQRV9URVhULFxuICBcInN1bW1hcnlcIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwidHJhbnNwXCI6IERFRkFVTFRfVFlQRV9URVhULFxuICBcInRyaWdnZXJcIjogeyBkZWZhdWx0VHlwZTogXCJkdXJhdGlvblwiLCBhbGxvd2VkVHlwZXM6IFtcImR1cmF0aW9uXCIsIFwiZGF0ZS10aW1lXCJdIH0sXG4gIFwidHpvZmZzZXRmcm9tXCI6IERFRkFVTFRfVFlQRV9VVENPRkZTRVQsXG4gIFwidHpvZmZzZXR0b1wiOiBERUZBVUxUX1RZUEVfVVRDT0ZGU0VULFxuICBcInR6dXJsXCI6IERFRkFVTFRfVFlQRV9VUkksXG4gIFwidHppZFwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJ0em5hbWVcIjogREVGQVVMVF9UWVBFX1RFWFRcbn0pO1xuXG4vLyBXaGVuIGFkZGluZyBhIHZhbHVlIGhlcmUsIGJlIHN1cmUgdG8gYWRkIGl0IHRvIHRoZSBwYXJhbWV0ZXIgdHlwZXMhXG5jb25zdCB2Y2FyZFZhbHVlcyA9IGV4dGVuZChjb21tb25WYWx1ZXMsIHtcbiAgdGV4dDogY3JlYXRlVGV4dFR5cGUoRlJPTV9WQ0FSRF9ORVdMSU5FLCBUT19WQ0FSRF9ORVdMSU5FKSxcbiAgdXJpOiBjcmVhdGVUZXh0VHlwZShGUk9NX1ZDQVJEX05FV0xJTkUsIFRPX1ZDQVJEX05FV0xJTkUpLFxuXG4gIGRhdGU6IHtcbiAgICBkZWNvcmF0ZTogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICByZXR1cm4gVkNhcmRUaW1lLmZyb21EYXRlQW5kT3JUaW1lU3RyaW5nKGFWYWx1ZSwgXCJkYXRlXCIpO1xuICAgIH0sXG4gICAgdW5kZWNvcmF0ZTogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICByZXR1cm4gYVZhbHVlLnRvU3RyaW5nKCk7XG4gICAgfSxcbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBpZiAoYVZhbHVlLmxlbmd0aCA9PSA4KSB7XG4gICAgICAgIHJldHVybiBpY2FsVmFsdWVzLmRhdGUuZnJvbUlDQUwoYVZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoYVZhbHVlWzBdID09ICctJyAmJiBhVmFsdWUubGVuZ3RoID09IDYpIHtcbiAgICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCA0KSArICctJyArIGFWYWx1ZS5zbGljZSg0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhVmFsdWU7XG4gICAgICB9XG4gICAgfSxcbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgaWYgKGFWYWx1ZS5sZW5ndGggPT0gMTApIHtcbiAgICAgICAgcmV0dXJuIGljYWxWYWx1ZXMuZGF0ZS50b0lDQUwoYVZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoYVZhbHVlWzBdID09ICctJyAmJiBhVmFsdWUubGVuZ3RoID09IDcpIHtcbiAgICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCA0KSArIGFWYWx1ZS5zbGljZSg1KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhVmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHRpbWU6IHtcbiAgICBkZWNvcmF0ZTogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICByZXR1cm4gVkNhcmRUaW1lLmZyb21EYXRlQW5kT3JUaW1lU3RyaW5nKFwiVFwiICsgYVZhbHVlLCBcInRpbWVcIik7XG4gICAgfSxcbiAgICB1bmRlY29yYXRlOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBhVmFsdWUudG9TdHJpbmcoKTtcbiAgICB9LFxuICAgIGZyb21JQ0FMOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIGxldCBzcGxpdHpvbmUgPSB2Y2FyZFZhbHVlcy50aW1lLl9zcGxpdFpvbmUoYVZhbHVlLCB0cnVlKTtcbiAgICAgIGxldCB6b25lID0gc3BsaXR6b25lWzBdLCB2YWx1ZSA9IHNwbGl0em9uZVsxXTtcblxuICAgICAgLy9jb25zb2xlLmxvZyhcIlNQTElUOiBcIixzcGxpdHpvbmUpO1xuXG4gICAgICBpZiAodmFsdWUubGVuZ3RoID09IDYpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCAyKSArICc6JyArXG4gICAgICAgICAgICAgICAgdmFsdWUuc2xpY2UoMiwgNCkgKyAnOicgK1xuICAgICAgICAgICAgICAgIHZhbHVlLnNsaWNlKDQsIDYpO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZS5sZW5ndGggPT0gNCAmJiB2YWx1ZVswXSAhPSAnLScpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCAyKSArICc6JyArIHZhbHVlLnNsaWNlKDIsIDQpO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZS5sZW5ndGggPT0gNSkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDAsIDMpICsgJzonICsgdmFsdWUuc2xpY2UoMywgNSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh6b25lLmxlbmd0aCA9PSA1ICYmICh6b25lWzBdID09ICctJyB8fCB6b25lWzBdID09ICcrJykpIHtcbiAgICAgICAgem9uZSA9IHpvbmUuc2xpY2UoMCwgMykgKyAnOicgKyB6b25lLnNsaWNlKDMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsdWUgKyB6b25lO1xuICAgIH0sXG5cbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgbGV0IHNwbGl0em9uZSA9IHZjYXJkVmFsdWVzLnRpbWUuX3NwbGl0Wm9uZShhVmFsdWUpO1xuICAgICAgbGV0IHpvbmUgPSBzcGxpdHpvbmVbMF0sIHZhbHVlID0gc3BsaXR6b25lWzFdO1xuXG4gICAgICBpZiAodmFsdWUubGVuZ3RoID09IDgpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCAyKSArXG4gICAgICAgICAgICAgICAgdmFsdWUuc2xpY2UoMywgNSkgK1xuICAgICAgICAgICAgICAgIHZhbHVlLnNsaWNlKDYsIDgpO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZS5sZW5ndGggPT0gNSAmJiB2YWx1ZVswXSAhPSAnLScpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCAyKSArIHZhbHVlLnNsaWNlKDMsIDUpO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZS5sZW5ndGggPT0gNikge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDAsIDMpICsgdmFsdWUuc2xpY2UoNCwgNik7XG4gICAgICB9XG5cbiAgICAgIGlmICh6b25lLmxlbmd0aCA9PSA2ICYmICh6b25lWzBdID09ICctJyB8fCB6b25lWzBdID09ICcrJykpIHtcbiAgICAgICAgem9uZSA9IHpvbmUuc2xpY2UoMCwgMykgKyB6b25lLnNsaWNlKDQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsdWUgKyB6b25lO1xuICAgIH0sXG5cbiAgICBfc3BsaXRab25lOiBmdW5jdGlvbihhVmFsdWUsIGlzRnJvbUljYWwpIHtcbiAgICAgIGxldCBsYXN0Q2hhciA9IGFWYWx1ZS5sZW5ndGggLSAxO1xuICAgICAgbGV0IHNpZ25DaGFyID0gYVZhbHVlLmxlbmd0aCAtIChpc0Zyb21JY2FsID8gNSA6IDYpO1xuICAgICAgbGV0IHNpZ24gPSBhVmFsdWVbc2lnbkNoYXJdO1xuICAgICAgbGV0IHpvbmUsIHZhbHVlO1xuXG4gICAgICBpZiAoYVZhbHVlW2xhc3RDaGFyXSA9PSAnWicpIHtcbiAgICAgICAgem9uZSA9IGFWYWx1ZVtsYXN0Q2hhcl07XG4gICAgICAgIHZhbHVlID0gYVZhbHVlLnNsaWNlKDAsIE1hdGgubWF4KDAsIGxhc3RDaGFyKSk7XG4gICAgICB9IGVsc2UgaWYgKGFWYWx1ZS5sZW5ndGggPiA2ICYmIChzaWduID09ICctJyB8fCBzaWduID09ICcrJykpIHtcbiAgICAgICAgem9uZSA9IGFWYWx1ZS5zbGljZShzaWduQ2hhcik7XG4gICAgICAgIHZhbHVlID0gYVZhbHVlLnNsaWNlKDAsIE1hdGgubWF4KDAsIHNpZ25DaGFyKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB6b25lID0gXCJcIjtcbiAgICAgICAgdmFsdWUgPSBhVmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbem9uZSwgdmFsdWVdO1xuICAgIH1cbiAgfSxcblxuICBcImRhdGUtdGltZVwiOiB7XG4gICAgZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIFZDYXJkVGltZS5mcm9tRGF0ZUFuZE9yVGltZVN0cmluZyhhVmFsdWUsIFwiZGF0ZS10aW1lXCIpO1xuICAgIH0sXG5cbiAgICB1bmRlY29yYXRlOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBhVmFsdWUudG9TdHJpbmcoKTtcbiAgICB9LFxuXG4gICAgZnJvbUlDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIHZjYXJkVmFsdWVzWydkYXRlLWFuZC1vci10aW1lJ10uZnJvbUlDQUwoYVZhbHVlKTtcbiAgICB9LFxuXG4gICAgdG9JQ0FMOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiB2Y2FyZFZhbHVlc1snZGF0ZS1hbmQtb3ItdGltZSddLnRvSUNBTChhVmFsdWUpO1xuICAgIH1cbiAgfSxcblxuICBcImRhdGUtYW5kLW9yLXRpbWVcIjoge1xuICAgIGRlY29yYXRlOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBWQ2FyZFRpbWUuZnJvbURhdGVBbmRPclRpbWVTdHJpbmcoYVZhbHVlLCBcImRhdGUtYW5kLW9yLXRpbWVcIik7XG4gICAgfSxcblxuICAgIHVuZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIGFWYWx1ZS50b1N0cmluZygpO1xuICAgIH0sXG5cbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBsZXQgcGFydHMgPSBhVmFsdWUuc3BsaXQoJ1QnKTtcbiAgICAgIHJldHVybiAocGFydHNbMF0gPyB2Y2FyZFZhbHVlcy5kYXRlLmZyb21JQ0FMKHBhcnRzWzBdKSA6ICcnKSArXG4gICAgICAgICAgICAgKHBhcnRzWzFdID8gJ1QnICsgdmNhcmRWYWx1ZXMudGltZS5mcm9tSUNBTChwYXJ0c1sxXSkgOiAnJyk7XG4gICAgfSxcblxuICAgIHRvSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBsZXQgcGFydHMgPSBhVmFsdWUuc3BsaXQoJ1QnKTtcbiAgICAgIHJldHVybiB2Y2FyZFZhbHVlcy5kYXRlLnRvSUNBTChwYXJ0c1swXSkgK1xuICAgICAgICAgICAgIChwYXJ0c1sxXSA/ICdUJyArIHZjYXJkVmFsdWVzLnRpbWUudG9JQ0FMKHBhcnRzWzFdKSA6ICcnKTtcblxuICAgIH1cbiAgfSxcbiAgdGltZXN0YW1wOiBpY2FsVmFsdWVzWydkYXRlLXRpbWUnXSxcbiAgXCJsYW5ndWFnZS10YWdcIjoge1xuICAgIG1hdGNoZXM6IC9eW2EtekEtWjAtOS1dKyQvIC8vIENvdWxkIGdvIHdpdGggYSBtb3JlIHN0cmljdCByZWdleCBoZXJlXG4gIH0sXG4gIFwicGhvbmUtbnVtYmVyXCI6IHtcbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICByZXR1cm4gQXJyYXkuZnJvbShhVmFsdWUpLmZpbHRlcihmdW5jdGlvbihjKSB7XG4gICAgICAgICAgcmV0dXJuIGMgPT09ICdcXFxcJyA/IHVuZGVmaW5lZCA6IGM7XG4gICAgICAgIH0pLmpvaW4oJycpO1xuICAgIH0sXG4gICAgdG9JQ0FMOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBBcnJheS5mcm9tKGFWYWx1ZSkubWFwKGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgcmV0dXJuIGMgPT09ICcsJyB8fCBjID09PSBcIjtcIiA/ICdcXFxcJyArIGMgOiBjO1xuICAgICAgfSkuam9pbignJyk7XG4gICAgfVxuICB9XG59KTtcblxubGV0IHZjYXJkUGFyYW1zID0ge1xuICBcInR5cGVcIjoge1xuICAgIHZhbHVlVHlwZTogXCJ0ZXh0XCIsXG4gICAgbXVsdGlWYWx1ZTogXCIsXCJcbiAgfSxcbiAgXCJ2YWx1ZVwiOiB7XG4gICAgLy8gc2luY2UgdGhlIHZhbHVlIGhlcmUgaXMgYSAndHlwZScgbG93ZXJjYXNlIGlzIHVzZWQuXG4gICAgdmFsdWVzOiBbXCJ0ZXh0XCIsIFwidXJpXCIsIFwiZGF0ZVwiLCBcInRpbWVcIiwgXCJkYXRlLXRpbWVcIiwgXCJkYXRlLWFuZC1vci10aW1lXCIsXG4gICAgICAgICAgICAgXCJ0aW1lc3RhbXBcIiwgXCJib29sZWFuXCIsIFwiaW50ZWdlclwiLCBcImZsb2F0XCIsIFwidXRjLW9mZnNldFwiLFxuICAgICAgICAgICAgIFwibGFuZ3VhZ2UtdGFnXCJdLFxuICAgIGFsbG93WE5hbWU6IHRydWUsXG4gICAgYWxsb3dJYW5hVG9rZW46IHRydWVcbiAgfVxufTtcblxubGV0IHZjYXJkUHJvcGVydGllcyA9IGV4dGVuZChjb21tb25Qcm9wZXJ0aWVzLCB7XG4gIFwiYWRyXCI6IHsgZGVmYXVsdFR5cGU6IFwidGV4dFwiLCBzdHJ1Y3R1cmVkVmFsdWU6IFwiO1wiLCBtdWx0aVZhbHVlOiBcIixcIiB9LFxuICBcImFubml2ZXJzYXJ5XCI6IERFRkFVTFRfVFlQRV9EQVRFX0FORE9SX1RJTUUsXG4gIFwiYmRheVwiOiBERUZBVUxUX1RZUEVfREFURV9BTkRPUl9USU1FLFxuICBcImNhbGFkcnVyaVwiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcImNhbHVyaVwiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcImNsaWVudHBpZG1hcFwiOiBERUZBVUxUX1RZUEVfVEVYVF9TVFJVQ1RVUkVELFxuICBcImVtYWlsXCI6IERFRkFVTFRfVFlQRV9URVhULFxuICBcImZidXJsXCI6IERFRkFVTFRfVFlQRV9VUkksXG4gIFwiZm5cIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwiZ2VuZGVyXCI6IERFRkFVTFRfVFlQRV9URVhUX1NUUlVDVFVSRUQsXG4gIFwiZ2VvXCI6IERFRkFVTFRfVFlQRV9VUkksXG4gIFwiaW1wcFwiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcImtleVwiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcImtpbmRcIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwibGFuZ1wiOiB7IGRlZmF1bHRUeXBlOiBcImxhbmd1YWdlLXRhZ1wiIH0sXG4gIFwibG9nb1wiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcIm1lbWJlclwiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcIm5cIjogeyBkZWZhdWx0VHlwZTogXCJ0ZXh0XCIsIHN0cnVjdHVyZWRWYWx1ZTogXCI7XCIsIG11bHRpVmFsdWU6IFwiLFwiIH0sXG4gIFwibmlja25hbWVcIjogREVGQVVMVF9UWVBFX1RFWFRfTVVMVEksXG4gIFwibm90ZVwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJvcmdcIjogeyBkZWZhdWx0VHlwZTogXCJ0ZXh0XCIsIHN0cnVjdHVyZWRWYWx1ZTogXCI7XCIgfSxcbiAgXCJwaG90b1wiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcInJlbGF0ZWRcIjogREVGQVVMVF9UWVBFX1VSSSxcbiAgXCJyZXZcIjogeyBkZWZhdWx0VHlwZTogXCJ0aW1lc3RhbXBcIiB9LFxuICBcInJvbGVcIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwic291bmRcIjogREVGQVVMVF9UWVBFX1VSSSxcbiAgXCJzb3VyY2VcIjogREVGQVVMVF9UWVBFX1VSSSxcbiAgXCJ0ZWxcIjogeyBkZWZhdWx0VHlwZTogXCJ1cmlcIiwgYWxsb3dlZFR5cGVzOiBbXCJ1cmlcIiwgXCJ0ZXh0XCJdIH0sXG4gIFwidGl0bGVcIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwidHpcIjogeyBkZWZhdWx0VHlwZTogXCJ0ZXh0XCIsIGFsbG93ZWRUeXBlczogW1widGV4dFwiLCBcInV0Yy1vZmZzZXRcIiwgXCJ1cmlcIl0gfSxcbiAgXCJ4bWxcIjogREVGQVVMVF9UWVBFX1RFWFRcbn0pO1xuXG5sZXQgdmNhcmQzVmFsdWVzID0gZXh0ZW5kKGNvbW1vblZhbHVlcywge1xuICBiaW5hcnk6IGljYWxWYWx1ZXMuYmluYXJ5LFxuICBkYXRlOiB2Y2FyZFZhbHVlcy5kYXRlLFxuICBcImRhdGUtdGltZVwiOiB2Y2FyZFZhbHVlc1tcImRhdGUtdGltZVwiXSxcbiAgXCJwaG9uZS1udW1iZXJcIjogdmNhcmRWYWx1ZXNbXCJwaG9uZS1udW1iZXJcIl0sXG4gIHVyaTogaWNhbFZhbHVlcy51cmksXG4gIHRleHQ6IHZjYXJkVmFsdWVzLnRleHQsXG4gIHRpbWU6IGljYWxWYWx1ZXMudGltZSxcbiAgdmNhcmQ6IGljYWxWYWx1ZXMudGV4dCxcbiAgXCJ1dGMtb2Zmc2V0XCI6IHtcbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCA3KTtcbiAgICB9LFxuXG4gICAgZnJvbUlDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCA3KTtcbiAgICB9LFxuXG4gICAgZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIFV0Y09mZnNldC5mcm9tU3RyaW5nKGFWYWx1ZSk7XG4gICAgfSxcblxuICAgIHVuZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIGFWYWx1ZS50b1N0cmluZygpO1xuICAgIH1cbiAgfVxufSk7XG5cbmxldCB2Y2FyZDNQYXJhbXMgPSB7XG4gIFwidHlwZVwiOiB7XG4gICAgdmFsdWVUeXBlOiBcInRleHRcIixcbiAgICBtdWx0aVZhbHVlOiBcIixcIlxuICB9LFxuICBcInZhbHVlXCI6IHtcbiAgICAvLyBzaW5jZSB0aGUgdmFsdWUgaGVyZSBpcyBhICd0eXBlJyBsb3dlcmNhc2UgaXMgdXNlZC5cbiAgICB2YWx1ZXM6IFtcInRleHRcIiwgXCJ1cmlcIiwgXCJkYXRlXCIsIFwiZGF0ZS10aW1lXCIsIFwicGhvbmUtbnVtYmVyXCIsIFwidGltZVwiLFxuICAgICAgICAgICAgIFwiYm9vbGVhblwiLCBcImludGVnZXJcIiwgXCJmbG9hdFwiLCBcInV0Yy1vZmZzZXRcIiwgXCJ2Y2FyZFwiLCBcImJpbmFyeVwiXSxcbiAgICBhbGxvd1hOYW1lOiB0cnVlLFxuICAgIGFsbG93SWFuYVRva2VuOiB0cnVlXG4gIH1cbn07XG5cbmxldCB2Y2FyZDNQcm9wZXJ0aWVzID0gZXh0ZW5kKGNvbW1vblByb3BlcnRpZXMsIHtcbiAgZm46IERFRkFVTFRfVFlQRV9URVhULFxuICBuOiB7IGRlZmF1bHRUeXBlOiBcInRleHRcIiwgc3RydWN0dXJlZFZhbHVlOiBcIjtcIiwgbXVsdGlWYWx1ZTogXCIsXCIgfSxcbiAgbmlja25hbWU6IERFRkFVTFRfVFlQRV9URVhUX01VTFRJLFxuICBwaG90bzogeyBkZWZhdWx0VHlwZTogXCJiaW5hcnlcIiwgYWxsb3dlZFR5cGVzOiBbXCJiaW5hcnlcIiwgXCJ1cmlcIl0gfSxcbiAgYmRheToge1xuICAgIGRlZmF1bHRUeXBlOiBcImRhdGUtdGltZVwiLFxuICAgIGFsbG93ZWRUeXBlczogW1wiZGF0ZS10aW1lXCIsIFwiZGF0ZVwiXSxcbiAgICBkZXRlY3RUeXBlOiBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICAgIHJldHVybiAoc3RyaW5nLmluZGV4T2YoJ1QnKSA9PT0gLTEpID8gJ2RhdGUnIDogJ2RhdGUtdGltZSc7XG4gICAgfVxuICB9LFxuXG4gIGFkcjogeyBkZWZhdWx0VHlwZTogXCJ0ZXh0XCIsIHN0cnVjdHVyZWRWYWx1ZTogXCI7XCIsIG11bHRpVmFsdWU6IFwiLFwiIH0sXG4gIGxhYmVsOiBERUZBVUxUX1RZUEVfVEVYVCxcblxuICB0ZWw6IHsgZGVmYXVsdFR5cGU6IFwicGhvbmUtbnVtYmVyXCIgfSxcbiAgZW1haWw6IERFRkFVTFRfVFlQRV9URVhULFxuICBtYWlsZXI6IERFRkFVTFRfVFlQRV9URVhULFxuXG4gIHR6OiB7IGRlZmF1bHRUeXBlOiBcInV0Yy1vZmZzZXRcIiwgYWxsb3dlZFR5cGVzOiBbXCJ1dGMtb2Zmc2V0XCIsIFwidGV4dFwiXSB9LFxuICBnZW86IHsgZGVmYXVsdFR5cGU6IFwiZmxvYXRcIiwgc3RydWN0dXJlZFZhbHVlOiBcIjtcIiB9LFxuXG4gIHRpdGxlOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgcm9sZTogREVGQVVMVF9UWVBFX1RFWFQsXG4gIGxvZ286IHsgZGVmYXVsdFR5cGU6IFwiYmluYXJ5XCIsIGFsbG93ZWRUeXBlczogW1wiYmluYXJ5XCIsIFwidXJpXCJdIH0sXG4gIGFnZW50OiB7IGRlZmF1bHRUeXBlOiBcInZjYXJkXCIsIGFsbG93ZWRUeXBlczogW1widmNhcmRcIiwgXCJ0ZXh0XCIsIFwidXJpXCJdIH0sXG4gIG9yZzogREVGQVVMVF9UWVBFX1RFWFRfU1RSVUNUVVJFRCxcblxuICBub3RlOiBERUZBVUxUX1RZUEVfVEVYVF9NVUxUSSxcbiAgcHJvZGlkOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgcmV2OiB7XG4gICAgZGVmYXVsdFR5cGU6IFwiZGF0ZS10aW1lXCIsXG4gICAgYWxsb3dlZFR5cGVzOiBbXCJkYXRlLXRpbWVcIiwgXCJkYXRlXCJdLFxuICAgIGRldGVjdFR5cGU6IGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgcmV0dXJuIChzdHJpbmcuaW5kZXhPZignVCcpID09PSAtMSkgPyAnZGF0ZScgOiAnZGF0ZS10aW1lJztcbiAgICB9XG4gIH0sXG4gIFwic29ydC1zdHJpbmdcIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIHNvdW5kOiB7IGRlZmF1bHRUeXBlOiBcImJpbmFyeVwiLCBhbGxvd2VkVHlwZXM6IFtcImJpbmFyeVwiLCBcInVyaVwiXSB9LFxuXG4gIGNsYXNzOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAga2V5OiB7IGRlZmF1bHRUeXBlOiBcImJpbmFyeVwiLCBhbGxvd2VkVHlwZXM6IFtcImJpbmFyeVwiLCBcInRleHRcIl0gfVxufSk7XG5cbi8qKlxuICogaUNhbGVuZGFyIGRlc2lnbiBzZXRcbiAqIEB0eXBlIHtkZXNpZ25TZXR9XG4gKi9cbmxldCBpY2FsU2V0ID0ge1xuICBuYW1lOiBcImljYWxcIixcbiAgdmFsdWU6IGljYWxWYWx1ZXMsXG4gIHBhcmFtOiBpY2FsUGFyYW1zLFxuICBwcm9wZXJ0eTogaWNhbFByb3BlcnRpZXMsXG4gIHByb3BlcnR5R3JvdXBzOiBmYWxzZVxufTtcblxuLyoqXG4gKiB2Q2FyZCA0LjAgZGVzaWduIHNldFxuICogQHR5cGUge2Rlc2lnblNldH1cbiAqL1xubGV0IHZjYXJkU2V0ID0ge1xuICBuYW1lOiBcInZjYXJkNFwiLFxuICB2YWx1ZTogdmNhcmRWYWx1ZXMsXG4gIHBhcmFtOiB2Y2FyZFBhcmFtcyxcbiAgcHJvcGVydHk6IHZjYXJkUHJvcGVydGllcyxcbiAgcHJvcGVydHlHcm91cHM6IHRydWVcbn07XG5cbi8qKlxuICogdkNhcmQgMy4wIGRlc2lnbiBzZXRcbiAqIEB0eXBlIHtkZXNpZ25TZXR9XG4gKi9cbmxldCB2Y2FyZDNTZXQgPSB7XG4gIG5hbWU6IFwidmNhcmQzXCIsXG4gIHZhbHVlOiB2Y2FyZDNWYWx1ZXMsXG4gIHBhcmFtOiB2Y2FyZDNQYXJhbXMsXG4gIHByb3BlcnR5OiB2Y2FyZDNQcm9wZXJ0aWVzLFxuICBwcm9wZXJ0eUdyb3VwczogdHJ1ZVxufTtcblxuLyoqXG4gKiBUaGUgZGVzaWduIGRhdGEsIHVzZWQgYnkgdGhlIHBhcnNlciB0byBkZXRlcm1pbmUgdHlwZXMgZm9yIHByb3BlcnRpZXMgYW5kXG4gKiBvdGhlciBtZXRhZGF0YSBuZWVkZWQgdG8gcHJvZHVjZSBjb3JyZWN0IGpDYXJkL2pDYWwgZGF0YS5cbiAqXG4gKiBAYWxpYXMgSUNBTC5kZXNpZ25cbiAqIEBleHBvcnRzIG1vZHVsZTpJQ0FMLmRlc2lnblxuICovXG5jb25zdCBkZXNpZ24gPSB7XG4gIC8qKlxuICAgKiBDYW4gYmUgc2V0IHRvIGZhbHNlIHRvIG1ha2UgdGhlIHBhcnNlciBtb3JlIGxlbmllbnQuXG4gICAqL1xuICBzdHJpY3Q6IHRydWUsXG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IHNldCBmb3IgbmV3IHByb3BlcnRpZXMgYW5kIGNvbXBvbmVudHMgaWYgbm9uZSBpcyBzcGVjaWZpZWQuXG4gICAqIEB0eXBlIHtkZXNpZ25TZXR9XG4gICAqL1xuICBkZWZhdWx0U2V0OiBpY2FsU2V0LFxuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCB0eXBlIGZvciB1bmtub3duIHByb3BlcnRpZXNcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGRlZmF1bHRUeXBlOiAndW5rbm93bicsXG5cbiAgLyoqXG4gICAqIEhvbGRzIHRoZSBkZXNpZ24gc2V0IGZvciBrbm93biB0b3AtbGV2ZWwgY29tcG9uZW50c1xuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAcHJvcGVydHkge2Rlc2lnblNldH0gdmNhcmQgICAgICAgdkNhcmQgVkNBUkRcbiAgICogQHByb3BlcnR5IHtkZXNpZ25TZXR9IHZldmVudCAgICAgIGlDYWxlbmRhciBWRVZFTlRcbiAgICogQHByb3BlcnR5IHtkZXNpZ25TZXR9IHZ0b2RvICAgICAgIGlDYWxlbmRhciBWVE9ET1xuICAgKiBAcHJvcGVydHkge2Rlc2lnblNldH0gdmpvdXJuYWwgICAgaUNhbGVuZGFyIFZKT1VSTkFMXG4gICAqIEBwcm9wZXJ0eSB7ZGVzaWduU2V0fSB2YWxhcm0gICAgICBpQ2FsZW5kYXIgVkFMQVJNXG4gICAqIEBwcm9wZXJ0eSB7ZGVzaWduU2V0fSB2dGltZXpvbmUgICBpQ2FsZW5kYXIgVlRJTUVaT05FXG4gICAqIEBwcm9wZXJ0eSB7ZGVzaWduU2V0fSBkYXlsaWdodCAgICBpQ2FsZW5kYXIgREFZTElHSFRcbiAgICogQHByb3BlcnR5IHtkZXNpZ25TZXR9IHN0YW5kYXJkICAgIGlDYWxlbmRhciBTVEFOREFSRFxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBsZXQgcHJvcGVydHlOYW1lID0gJ2ZuJztcbiAgICogbGV0IGNvbXBvbmVudERlc2lnbiA9IElDQUwuZGVzaWduLmNvbXBvbmVudHMudmNhcmQ7XG4gICAqIGxldCBwcm9wZXJ0eURldGFpbHMgPSBjb21wb25lbnREZXNpZ24ucHJvcGVydHlbcHJvcGVydHlOYW1lXTtcbiAgICogaWYgKHByb3BlcnR5RGV0YWlscy5kZWZhdWx0VHlwZSA9PSAndGV4dCcpIHtcbiAgICogICAvLyBZZXAsIHN1cmUgaXMuLi5cbiAgICogfVxuICAgKi9cbiAgY29tcG9uZW50czoge1xuICAgIHZjYXJkOiB2Y2FyZFNldCxcbiAgICB2Y2FyZDM6IHZjYXJkM1NldCxcbiAgICB2ZXZlbnQ6IGljYWxTZXQsXG4gICAgdnRvZG86IGljYWxTZXQsXG4gICAgdmpvdXJuYWw6IGljYWxTZXQsXG4gICAgdmFsYXJtOiBpY2FsU2V0LFxuICAgIHZ0aW1lem9uZTogaWNhbFNldCxcbiAgICBkYXlsaWdodDogaWNhbFNldCxcbiAgICBzdGFuZGFyZDogaWNhbFNldFxuICB9LFxuXG5cbiAgLyoqXG4gICAqIFRoZSBkZXNpZ24gc2V0IGZvciBpQ2FsZW5kYXIgKHJmYzU1NDUvcmZjNzI2NSkgY29tcG9uZW50cy5cbiAgICogQHR5cGUge2Rlc2lnblNldH1cbiAgICovXG4gIGljYWxlbmRhcjogaWNhbFNldCxcblxuICAvKipcbiAgICogVGhlIGRlc2lnbiBzZXQgZm9yIHZDYXJkIChyZmM2MzUwL3JmYzcwOTUpIGNvbXBvbmVudHMuXG4gICAqIEB0eXBlIHtkZXNpZ25TZXR9XG4gICAqL1xuICB2Y2FyZDogdmNhcmRTZXQsXG5cbiAgLyoqXG4gICAqIFRoZSBkZXNpZ24gc2V0IGZvciB2Q2FyZCAocmZjMjQyNS9yZmMyNDI2L3JmYzcwOTUpIGNvbXBvbmVudHMuXG4gICAqIEB0eXBlIHtkZXNpZ25TZXR9XG4gICAqL1xuICB2Y2FyZDM6IHZjYXJkM1NldCxcblxuICAvKipcbiAgICogR2V0cyB0aGUgZGVzaWduIHNldCBmb3IgdGhlIGdpdmVuIGNvbXBvbmVudCBuYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gY29tcG9uZW50TmFtZSAgICAgICAgVGhlIG5hbWUgb2YgdGhlIGNvbXBvbmVudFxuICAgKiBAcmV0dXJuIHtkZXNpZ25TZXR9ICAgICAgVGhlIGRlc2lnbiBzZXQgZm9yIHRoZSBjb21wb25lbnRcbiAgICovXG4gIGdldERlc2lnblNldDogZnVuY3Rpb24oY29tcG9uZW50TmFtZSkge1xuICAgIGxldCBpc0luRGVzaWduID0gY29tcG9uZW50TmFtZSAmJiBjb21wb25lbnROYW1lIGluIGRlc2lnbi5jb21wb25lbnRzO1xuICAgIHJldHVybiBpc0luRGVzaWduID8gZGVzaWduLmNvbXBvbmVudHNbY29tcG9uZW50TmFtZV0gOiBkZXNpZ24uZGVmYXVsdFNldDtcbiAgfVxufTtcblxuLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cblxuLyoqXG4gKiBUaGlzIGxldHMgdHlwZXNjcmlwdCByZXNvbHZlIG91ciBjdXN0b20gdHlwZXMgaW4gdGhlXG4gKiBnZW5lcmF0ZWQgZC50cyBmaWxlcyAoanNkb2MgdHlwZWRlZnMgYXJlIGNvbnZlcnRlZCB0byB0eXBlc2NyaXB0IHR5cGVzKS5cbiAqIElnbm9yZSBwcmV2ZW50cyB0aGUgdHlwZWRlZnMgZnJvbSBiZWluZyBkb2N1bWVudGVkIG1vcmUgdGhhbiBvbmNlLlxuICpcbiAqIEBpZ25vcmVcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL3R5cGVzLmpzXCIpLmRlc2lnblNldH0gZGVzaWduU2V0XG4gKiBJbXBvcnRzIHRoZSAnZGVzaWduU2V0JyB0eXBlIGZyb20gdGhlIFwidHlwZXMuanNcIiBtb2R1bGVcbiAqL1xuXG5jb25zdCBMSU5FX0VORElORyA9ICdcXHJcXG4nO1xuY29uc3QgREVGQVVMVF9WQUxVRV9UWVBFID0gJ3Vua25vd24nO1xuY29uc3QgUkZDNjg2OF9SRVBMQUNFX01BUCA9IHsgJ1wiJzogXCJeJ1wiLCBcIlxcblwiOiBcIl5uXCIsIFwiXlwiOiBcIl5eXCIgfTtcblxuLyoqXG4gKiBDb252ZXJ0IGEgZnVsbCBqQ2FsL2pDYXJkIGFycmF5IGludG8gYSBpQ2FsZW5kYXIvdkNhcmQgc3RyaW5nLlxuICpcbiAqIEBmdW5jdGlvbiBJQ0FMLnN0cmluZ2lmeVxuICogQHZhcmlhdGlvbiBmdW5jdGlvblxuICogQHBhcmFtIHtBcnJheX0gakNhbCAgICBUaGUgakNhbC9qQ2FyZCBkb2N1bWVudFxuICogQHJldHVybiB7U3RyaW5nfSAgICAgICBUaGUgc3RyaW5naWZpZWQgaUNhbGVuZGFyL3ZDYXJkIGRvY3VtZW50XG4gKi9cbmZ1bmN0aW9uIHN0cmluZ2lmeShqQ2FsKSB7XG4gIGlmICh0eXBlb2YgakNhbFswXSA9PSBcInN0cmluZ1wiKSB7XG4gICAgLy8gVGhpcyBpcyBhIHNpbmdsZSBjb21wb25lbnRcbiAgICBqQ2FsID0gW2pDYWxdO1xuICB9XG5cbiAgbGV0IGkgPSAwO1xuICBsZXQgbGVuID0gakNhbC5sZW5ndGg7XG4gIGxldCByZXN1bHQgPSAnJztcblxuICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgcmVzdWx0ICs9IHN0cmluZ2lmeS5jb21wb25lbnQoakNhbFtpXSkgKyBMSU5FX0VORElORztcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gakNhbCBjb21wb25lbnQgYXJyYXkgaW50byBhIElDQUwgc3RyaW5nLlxuICogUmVjdXJzaXZlIHdpbGwgcmVzb2x2ZSBzdWItY29tcG9uZW50cy5cbiAqXG4gKiBFeGFjdCBjb21wb25lbnQvcHJvcGVydHkgb3JkZXIgaXMgbm90IHNhdmVkIGFsbFxuICogcHJvcGVydGllcyB3aWxsIGNvbWUgYmVmb3JlIHN1YmNvbXBvbmVudHMuXG4gKlxuICogQGZ1bmN0aW9uIElDQUwuc3RyaW5naWZ5LmNvbXBvbmVudFxuICogQHBhcmFtIHtBcnJheX0gY29tcG9uZW50XG4gKiAgICAgICAgakNhbC9qQ2FyZCBmcmFnbWVudCBvZiBhIGNvbXBvbmVudFxuICogQHBhcmFtIHtkZXNpZ25TZXR9IGRlc2lnblNldFxuICogICAgICAgIFRoZSBkZXNpZ24gZGF0YSB0byB1c2UgZm9yIHRoaXMgY29tcG9uZW50XG4gKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgIFRoZSBpQ2FsZW5kYXIvdkNhcmQgc3RyaW5nXG4gKi9cbnN0cmluZ2lmeS5jb21wb25lbnQgPSBmdW5jdGlvbihjb21wb25lbnQsIGRlc2lnblNldCkge1xuICBsZXQgbmFtZSA9IGNvbXBvbmVudFswXS50b1VwcGVyQ2FzZSgpO1xuICBsZXQgcmVzdWx0ID0gJ0JFR0lOOicgKyBuYW1lICsgTElORV9FTkRJTkc7XG5cbiAgbGV0IHByb3BzID0gY29tcG9uZW50WzFdO1xuICBsZXQgcHJvcElkeCA9IDA7XG4gIGxldCBwcm9wTGVuID0gcHJvcHMubGVuZ3RoO1xuXG4gIGxldCBkZXNpZ25TZXROYW1lID0gY29tcG9uZW50WzBdO1xuICAvLyByZmM2MzUwIHJlcXVpcmVzIHRoYXQgaW4gdkNhcmQgNC4wIHRoZSBmaXJzdCBjb21wb25lbnQgaXMgdGhlIFZFUlNJT05cbiAgLy8gY29tcG9uZW50IHdpdGggYXMgdmFsdWUgNC4wLCBub3RlIHRoYXQgMy4wIGRvZXMgbm90IGhhdmUgdGhpcyByZXF1aXJlbWVudC5cbiAgaWYgKGRlc2lnblNldE5hbWUgPT09ICd2Y2FyZCcgJiYgY29tcG9uZW50WzFdLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAhKGNvbXBvbmVudFsxXVswXVswXSA9PT0gXCJ2ZXJzaW9uXCIgJiYgY29tcG9uZW50WzFdWzBdWzNdID09PSBcIjQuMFwiKSkge1xuICAgIGRlc2lnblNldE5hbWUgPSBcInZjYXJkM1wiO1xuICB9XG4gIGRlc2lnblNldCA9IGRlc2lnblNldCB8fCBkZXNpZ24uZ2V0RGVzaWduU2V0KGRlc2lnblNldE5hbWUpO1xuXG4gIGZvciAoOyBwcm9wSWR4IDwgcHJvcExlbjsgcHJvcElkeCsrKSB7XG4gICAgcmVzdWx0ICs9IHN0cmluZ2lmeS5wcm9wZXJ0eShwcm9wc1twcm9wSWR4XSwgZGVzaWduU2V0KSArIExJTkVfRU5ESU5HO1xuICB9XG5cbiAgLy8gSWdub3JlIHN1YmNvbXBvbmVudHMgaWYgbm9uZSBleGlzdCwgZS5nLiBpbiB2Q2FyZC5cbiAgbGV0IGNvbXBzID0gY29tcG9uZW50WzJdIHx8IFtdO1xuICBsZXQgY29tcElkeCA9IDA7XG4gIGxldCBjb21wTGVuID0gY29tcHMubGVuZ3RoO1xuXG4gIGZvciAoOyBjb21wSWR4IDwgY29tcExlbjsgY29tcElkeCsrKSB7XG4gICAgcmVzdWx0ICs9IHN0cmluZ2lmeS5jb21wb25lbnQoY29tcHNbY29tcElkeF0sIGRlc2lnblNldCkgKyBMSU5FX0VORElORztcbiAgfVxuXG4gIHJlc3VsdCArPSAnRU5EOicgKyBuYW1lO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBDb252ZXJ0cyBhIHNpbmdsZSBqQ2FsL2pDYXJkIHByb3BlcnR5IHRvIGEgaUNhbGVuZGFyL3ZDYXJkIHN0cmluZy5cbiAqXG4gKiBAZnVuY3Rpb24gSUNBTC5zdHJpbmdpZnkucHJvcGVydHlcbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BlcnR5XG4gKiAgICAgICAgakNhbC9qQ2FyZCBwcm9wZXJ0eSBhcnJheVxuICogQHBhcmFtIHtkZXNpZ25TZXR9IGRlc2lnblNldFxuICogICAgICAgIFRoZSBkZXNpZ24gZGF0YSB0byB1c2UgZm9yIHRoaXMgcHJvcGVydHlcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gbm9Gb2xkXG4gKiAgICAgICAgSWYgdHJ1ZSwgdGhlIGxpbmUgaXMgbm90IGZvbGRlZFxuICogQHJldHVybiB7U3RyaW5nfSAgICAgICBUaGUgaUNhbGVuZGFyL3ZDYXJkIHN0cmluZ1xuICovXG5zdHJpbmdpZnkucHJvcGVydHkgPSBmdW5jdGlvbihwcm9wZXJ0eSwgZGVzaWduU2V0LCBub0ZvbGQpIHtcbiAgbGV0IG5hbWUgPSBwcm9wZXJ0eVswXS50b1VwcGVyQ2FzZSgpO1xuICBsZXQganNOYW1lID0gcHJvcGVydHlbMF07XG4gIGxldCBwYXJhbXMgPSBwcm9wZXJ0eVsxXTtcblxuICBpZiAoIWRlc2lnblNldCkge1xuICAgIGRlc2lnblNldCA9IGRlc2lnbi5kZWZhdWx0U2V0O1xuICB9XG5cbiAgbGV0IGdyb3VwTmFtZSA9IHBhcmFtcy5ncm91cDtcbiAgbGV0IGxpbmU7XG4gIGlmIChkZXNpZ25TZXQucHJvcGVydHlHcm91cHMgJiYgZ3JvdXBOYW1lKSB7XG4gICAgbGluZSA9IGdyb3VwTmFtZS50b1VwcGVyQ2FzZSgpICsgXCIuXCIgKyBuYW1lO1xuICB9IGVsc2Uge1xuICAgIGxpbmUgPSBuYW1lO1xuICB9XG5cbiAgZm9yIChsZXQgW3BhcmFtTmFtZSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHBhcmFtcykpIHtcbiAgICBpZiAoZGVzaWduU2V0LnByb3BlcnR5R3JvdXBzICYmIHBhcmFtTmFtZSA9PSAnZ3JvdXAnKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBsZXQgcGFyYW1EZXNpZ24gPSBkZXNpZ25TZXQucGFyYW1bcGFyYW1OYW1lXTtcbiAgICBsZXQgbXVsdGlWYWx1ZSA9IHBhcmFtRGVzaWduICYmIHBhcmFtRGVzaWduLm11bHRpVmFsdWU7XG4gICAgaWYgKG11bHRpVmFsdWUgJiYgQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUubWFwKGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICB2YWwgPSBzdHJpbmdpZnkuX3JmYzY4NjhVbmVzY2FwZSh2YWwpO1xuICAgICAgICB2YWwgPSBzdHJpbmdpZnkucGFyYW1Qcm9wZXJ0eVZhbHVlKHZhbCwgcGFyYW1EZXNpZ24ubXVsdGlWYWx1ZVNlcGFyYXRlRFF1b3RlKTtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH0pO1xuICAgICAgdmFsdWUgPSBzdHJpbmdpZnkubXVsdGlWYWx1ZSh2YWx1ZSwgbXVsdGlWYWx1ZSwgXCJ1bmtub3duXCIsIG51bGwsIGRlc2lnblNldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlID0gc3RyaW5naWZ5Ll9yZmM2ODY4VW5lc2NhcGUodmFsdWUpO1xuICAgICAgdmFsdWUgPSBzdHJpbmdpZnkucGFyYW1Qcm9wZXJ0eVZhbHVlKHZhbHVlKTtcbiAgICB9XG5cbiAgICBsaW5lICs9ICc7JyArIHBhcmFtTmFtZS50b1VwcGVyQ2FzZSgpICsgJz0nICsgdmFsdWU7XG4gIH1cblxuICBpZiAocHJvcGVydHkubGVuZ3RoID09PSAzKSB7XG4gICAgLy8gSWYgdGhlcmUgYXJlIG5vIHZhbHVlcywgd2UgbXVzdCBhc3N1bWUgYSBibGFuayB2YWx1ZVxuICAgIHJldHVybiBsaW5lICsgJzonO1xuICB9XG5cbiAgbGV0IHZhbHVlVHlwZSA9IHByb3BlcnR5WzJdO1xuXG4gIGxldCBwcm9wRGV0YWlscztcbiAgbGV0IG11bHRpVmFsdWUgPSBmYWxzZTtcbiAgbGV0IHN0cnVjdHVyZWRWYWx1ZSA9IGZhbHNlO1xuICBsZXQgaXNEZWZhdWx0ID0gZmFsc2U7XG5cbiAgaWYgKGpzTmFtZSBpbiBkZXNpZ25TZXQucHJvcGVydHkpIHtcbiAgICBwcm9wRGV0YWlscyA9IGRlc2lnblNldC5wcm9wZXJ0eVtqc05hbWVdO1xuXG4gICAgaWYgKCdtdWx0aVZhbHVlJyBpbiBwcm9wRGV0YWlscykge1xuICAgICAgbXVsdGlWYWx1ZSA9IHByb3BEZXRhaWxzLm11bHRpVmFsdWU7XG4gICAgfVxuXG4gICAgaWYgKCgnc3RydWN0dXJlZFZhbHVlJyBpbiBwcm9wRGV0YWlscykgJiYgQXJyYXkuaXNBcnJheShwcm9wZXJ0eVszXSkpIHtcbiAgICAgIHN0cnVjdHVyZWRWYWx1ZSA9IHByb3BEZXRhaWxzLnN0cnVjdHVyZWRWYWx1ZTtcbiAgICB9XG5cbiAgICBpZiAoJ2RlZmF1bHRUeXBlJyBpbiBwcm9wRGV0YWlscykge1xuICAgICAgaWYgKHZhbHVlVHlwZSA9PT0gcHJvcERldGFpbHMuZGVmYXVsdFR5cGUpIHtcbiAgICAgICAgaXNEZWZhdWx0ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHZhbHVlVHlwZSA9PT0gREVGQVVMVF9WQUxVRV9UWVBFKSB7XG4gICAgICAgIGlzRGVmYXVsdCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmICh2YWx1ZVR5cGUgPT09IERFRkFVTFRfVkFMVUVfVFlQRSkge1xuICAgICAgaXNEZWZhdWx0ID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvLyBwdXNoIHRoZSBWQUxVRSBwcm9wZXJ0eSBpZiB0eXBlIGlzIG5vdCB0aGUgZGVmYXVsdFxuICAvLyBmb3IgdGhlIGN1cnJlbnQgcHJvcGVydHkuXG4gIGlmICghaXNEZWZhdWx0KSB7XG4gICAgLy8gdmFsdWUgd2lsbCBuZXZlciBjb250YWluIDsvOi8sIHNvIHdlIGRvbid0IGVzY2FwZSBpdCBoZXJlLlxuICAgIGxpbmUgKz0gJztWQUxVRT0nICsgdmFsdWVUeXBlLnRvVXBwZXJDYXNlKCk7XG4gIH1cblxuICBsaW5lICs9ICc6JztcblxuICBpZiAobXVsdGlWYWx1ZSAmJiBzdHJ1Y3R1cmVkVmFsdWUpIHtcbiAgICBsaW5lICs9IHN0cmluZ2lmeS5tdWx0aVZhbHVlKFxuICAgICAgcHJvcGVydHlbM10sIHN0cnVjdHVyZWRWYWx1ZSwgdmFsdWVUeXBlLCBtdWx0aVZhbHVlLCBkZXNpZ25TZXQsIHN0cnVjdHVyZWRWYWx1ZVxuICAgICk7XG4gIH0gZWxzZSBpZiAobXVsdGlWYWx1ZSkge1xuICAgIGxpbmUgKz0gc3RyaW5naWZ5Lm11bHRpVmFsdWUoXG4gICAgICBwcm9wZXJ0eS5zbGljZSgzKSwgbXVsdGlWYWx1ZSwgdmFsdWVUeXBlLCBudWxsLCBkZXNpZ25TZXQsIGZhbHNlXG4gICAgKTtcbiAgfSBlbHNlIGlmIChzdHJ1Y3R1cmVkVmFsdWUpIHtcbiAgICBsaW5lICs9IHN0cmluZ2lmeS5tdWx0aVZhbHVlKFxuICAgICAgcHJvcGVydHlbM10sIHN0cnVjdHVyZWRWYWx1ZSwgdmFsdWVUeXBlLCBudWxsLCBkZXNpZ25TZXQsIHN0cnVjdHVyZWRWYWx1ZVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgbGluZSArPSBzdHJpbmdpZnkudmFsdWUocHJvcGVydHlbM10sIHZhbHVlVHlwZSwgZGVzaWduU2V0LCBmYWxzZSk7XG4gIH1cblxuICByZXR1cm4gbm9Gb2xkID8gbGluZSA6IGZvbGRsaW5lKGxpbmUpO1xufTtcblxuLyoqXG4gKiBIYW5kbGVzIGVzY2FwaW5nIG9mIHByb3BlcnR5IHZhbHVlcyB0aGF0IG1heSBjb250YWluOlxuICpcbiAqICAgIENPTE9OICg6KSwgU0VNSUNPTE9OICg7KSwgb3IgQ09NTUEgKCwpXG4gKlxuICogSWYgYW55IG9mIHRoZSBhYm92ZSBhcmUgcHJlc2VudCB0aGUgcmVzdWx0IGlzIHdyYXBwZWRcbiAqIGluIGRvdWJsZSBxdW90ZXMuXG4gKlxuICogQGZ1bmN0aW9uIElDQUwuc3RyaW5naWZ5LnBhcmFtUHJvcGVydHlWYWx1ZVxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlICAgICAgUmF3IHByb3BlcnR5IHZhbHVlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGZvcmNlICAgICBJZiB2YWx1ZSBzaG91bGQgYmUgZXNjYXBlZCBldmVuIHdoZW4gdW5uZWNlc3NhcnlcbiAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICAgIEdpdmVuIG9yIGVzY2FwZWQgdmFsdWUgd2hlbiBuZWVkZWRcbiAqL1xuc3RyaW5naWZ5LnBhcmFtUHJvcGVydHlWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlLCBmb3JjZSkge1xuICBpZiAoIWZvcmNlICYmXG4gICAgICAodmFsdWUuaW5kZXhPZignLCcpID09PSAtMSkgJiZcbiAgICAgICh2YWx1ZS5pbmRleE9mKCc6JykgPT09IC0xKSAmJlxuICAgICAgKHZhbHVlLmluZGV4T2YoJzsnKSA9PT0gLTEpKSB7XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gJ1wiJyArIHZhbHVlICsgJ1wiJztcbn07XG5cbi8qKlxuICogQ29udmVydHMgYW4gYXJyYXkgb2YgaWNhbCB2YWx1ZXMgaW50byBhIHNpbmdsZVxuICogc3RyaW5nIGJhc2VkIG9uIGEgdHlwZSBhbmQgYSBkZWxpbWl0ZXIgdmFsdWUgKGxpa2UgXCIsXCIpLlxuICpcbiAqIEBmdW5jdGlvbiBJQ0FMLnN0cmluZ2lmeS5tdWx0aVZhbHVlXG4gKiBAcGFyYW0ge0FycmF5fSB2YWx1ZXMgICAgICBMaXN0IG9mIHZhbHVlcyB0byBjb252ZXJ0XG4gKiBAcGFyYW0ge1N0cmluZ30gZGVsaW0gICAgICBVc2VkIHRvIGpvaW4gdGhlIHZhbHVlcyAoXCIsXCIsIFwiO1wiLCBcIjpcIilcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlICAgICAgIExvd2VjYXNlIGljYWwgdmFsdWUgdHlwZVxuICogICAgICAgIChsaWtlIGJvb2xlYW4sIGRhdGUtdGltZSwgZXRjLi4pXG4gKiBAcGFyYW0gez9TdHJpbmd9IGlubmVyTXVsdGkgSWYgc2V0LCBlYWNoIHZhbHVlIHdpbGwgYWdhaW4gYmUgcHJvY2Vzc2VkXG4gKiAgICAgICAgVXNlZCBmb3Igc3RydWN0dXJlZCB2YWx1ZXNcbiAqIEBwYXJhbSB7ZGVzaWduU2V0fSBkZXNpZ25TZXRcbiAqICAgICAgICBUaGUgZGVzaWduIGRhdGEgdG8gdXNlIGZvciB0aGlzIHByb3BlcnR5XG4gKlxuICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgICAgaUNhbGVuZGFyL3ZDYXJkIHN0cmluZyBmb3IgdmFsdWVcbiAqL1xuc3RyaW5naWZ5Lm11bHRpVmFsdWUgPSBmdW5jdGlvbih2YWx1ZXMsIGRlbGltLCB0eXBlLCBpbm5lck11bHRpLCBkZXNpZ25TZXQsIHN0cnVjdHVyZWRWYWx1ZSkge1xuICBsZXQgcmVzdWx0ID0gJyc7XG4gIGxldCBsZW4gPSB2YWx1ZXMubGVuZ3RoO1xuICBsZXQgaSA9IDA7XG5cbiAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgIGlmIChpbm5lck11bHRpICYmIEFycmF5LmlzQXJyYXkodmFsdWVzW2ldKSkge1xuICAgICAgcmVzdWx0ICs9IHN0cmluZ2lmeS5tdWx0aVZhbHVlKHZhbHVlc1tpXSwgaW5uZXJNdWx0aSwgdHlwZSwgbnVsbCwgZGVzaWduU2V0LCBzdHJ1Y3R1cmVkVmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQgKz0gc3RyaW5naWZ5LnZhbHVlKHZhbHVlc1tpXSwgdHlwZSwgZGVzaWduU2V0LCBzdHJ1Y3R1cmVkVmFsdWUpO1xuICAgIH1cblxuICAgIGlmIChpICE9PSAobGVuIC0gMSkpIHtcbiAgICAgIHJlc3VsdCArPSBkZWxpbTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBQcm9jZXNzZXMgYSBzaW5nbGUgaWNhbCB2YWx1ZSBydW5zIHRoZSBhc3NvY2lhdGVkIFwidG9JQ0FMXCIgbWV0aG9kIGZyb20gdGhlXG4gKiBkZXNpZ24gdmFsdWUgdHlwZSBpZiBhdmFpbGFibGUgdG8gY29udmVydCB0aGUgdmFsdWUuXG4gKlxuICogQGZ1bmN0aW9uIElDQUwuc3RyaW5naWZ5LnZhbHVlXG4gKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IHZhbHVlICAgICAgIEEgZm9ybWF0dGVkIHZhbHVlXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAgICAgICAgICAgICAgIExvd2VyY2FzZSBpQ2FsZW5kYXIvdkNhcmQgdmFsdWUgdHlwZVxuICogIChsaWtlIGJvb2xlYW4sIGRhdGUtdGltZSwgZXRjLi4pXG4gKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgICAgICAgICAgIGlDYWxlbmRhci92Q2FyZCB2YWx1ZSBmb3Igc2luZ2xlIHZhbHVlXG4gKi9cbnN0cmluZ2lmeS52YWx1ZSA9IGZ1bmN0aW9uKHZhbHVlLCB0eXBlLCBkZXNpZ25TZXQsIHN0cnVjdHVyZWRWYWx1ZSkge1xuICBpZiAodHlwZSBpbiBkZXNpZ25TZXQudmFsdWUgJiYgJ3RvSUNBTCcgaW4gZGVzaWduU2V0LnZhbHVlW3R5cGVdKSB7XG4gICAgcmV0dXJuIGRlc2lnblNldC52YWx1ZVt0eXBlXS50b0lDQUwodmFsdWUsIHN0cnVjdHVyZWRWYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuLyoqXG4gKiBJbnRlcm5hbCBoZWxwZXIgZm9yIHJmYzY4NjguIEV4cG9zaW5nIHRoaXMgb24gSUNBTC5zdHJpbmdpZnkgc28gdGhhdFxuICogaGFja2VycyBjYW4gZGlzYWJsZSB0aGUgcmZjNjg2OCBwYXJzaW5nIGlmIHRoZSByZWFsbHkgbmVlZCB0by5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsICAgICAgICBUaGUgdmFsdWUgdG8gdW5lc2NhcGVcbiAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICAgIFRoZSBlc2NhcGVkIHZhbHVlXG4gKi9cbnN0cmluZ2lmeS5fcmZjNjg2OFVuZXNjYXBlID0gZnVuY3Rpb24odmFsKSB7XG4gIHJldHVybiB2YWwucmVwbGFjZSgvW1xcbl5cIl0vZywgZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBSRkM2ODY4X1JFUExBQ0VfTUFQW3hdO1xuICB9KTtcbn07XG5cbi8qIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKiBQb3J0aW9ucyBDb3B5cmlnaHQgKEMpIFBoaWxpcHAgS2V3aXNjaCAqL1xuXG5jb25zdCBOQU1FX0lOREVYJDEgPSAwO1xuY29uc3QgUFJPUF9JTkRFWCA9IDE7XG5jb25zdCBUWVBFX0lOREVYID0gMjtcbmNvbnN0IFZBTFVFX0lOREVYID0gMztcblxuLyoqXG4gKiBUaGlzIGxldHMgdHlwZXNjcmlwdCByZXNvbHZlIG91ciBjdXN0b20gdHlwZXMgaW4gdGhlXG4gKiBnZW5lcmF0ZWQgZC50cyBmaWxlcyAoanNkb2MgdHlwZWRlZnMgYXJlIGNvbnZlcnRlZCB0byB0eXBlc2NyaXB0IHR5cGVzKS5cbiAqIElnbm9yZSBwcmV2ZW50cyB0aGUgdHlwZWRlZnMgZnJvbSBiZWluZyBkb2N1bWVudGVkIG1vcmUgdGhhbiBvbmNlLlxuICogQGlnbm9yZVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vdHlwZXMuanNcIikuZGVzaWduU2V0fSBkZXNpZ25TZXRcbiAqIEltcG9ydHMgdGhlICdkZXNpZ25TZXQnIHR5cGUgZnJvbSB0aGUgXCJ0eXBlcy5qc1wiIG1vZHVsZVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vdHlwZXMuanNcIikuR2VvfSBHZW9cbiAqIEltcG9ydHMgdGhlICdHZW8nIHR5cGUgZnJvbSB0aGUgXCJ0eXBlcy5qc1wiIG1vZHVsZVxuICovXG5cbi8qKlxuICogUHJvdmlkZXMgYSBsYXllciBvbiB0b3Agb2YgdGhlIHJhdyBqQ2FsIG9iamVjdCBmb3IgbWFuaXB1bGF0aW5nIGEgc2luZ2xlIHByb3BlcnR5LCB3aXRoIGl0c1xuICogcGFyYW1ldGVycyBhbmQgdmFsdWUuXG4gKlxuICogQG1lbWJlcm9mIElDQUxcbiAqL1xuY2xhc3MgUHJvcGVydHkge1xuICAvKipcbiAgICogQ3JlYXRlIGFuIHtAbGluayBJQ0FMLlByb3BlcnR5fSBieSBwYXJzaW5nIHRoZSBwYXNzZWQgaUNhbGVuZGFyIHN0cmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciAgICAgICAgICAgIFRoZSBpQ2FsZW5kYXIgc3RyaW5nIHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7ZGVzaWduU2V0PX0gZGVzaWduU2V0ICBUaGUgZGVzaWduIGRhdGEgdG8gdXNlIGZvciB0aGlzIHByb3BlcnR5XG4gICAqIEByZXR1cm4ge1Byb3BlcnR5fSAgICAgICAgICAgICBUaGUgY3JlYXRlZCBpQ2FsZW5kYXIgcHJvcGVydHlcbiAgICovXG4gIHN0YXRpYyBmcm9tU3RyaW5nKHN0ciwgZGVzaWduU2V0KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9wZXJ0eShwYXJzZS5wcm9wZXJ0eShzdHIsIGRlc2lnblNldCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5Qcm9wZXJ0eSBpbnN0YW5jZS5cbiAgICpcbiAgICogSXQgaXMgaW1wb3J0YW50IHRvIG5vdGUgdGhhdCBtdXRhdGlvbnMgZG9uZSBpbiB0aGUgd3JhcHBlciBkaXJlY3RseSBtdXRhdGUgdGhlIGpDYWwgb2JqZWN0IHVzZWRcbiAgICogdG8gaW5pdGlhbGl6ZS5cbiAgICpcbiAgICogQ2FuIGFsc28gYmUgdXNlZCB0byBjcmVhdGUgbmV3IHByb3BlcnRpZXMgYnkgcGFzc2luZyB0aGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgKGFzIGEgU3RyaW5nKS5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheXxTdHJpbmd9IGpDYWwgICAgICAgICBSYXcgakNhbCByZXByZXNlbnRhdGlvbiBPUiB0aGUgbmV3IG5hbWUgb2YgdGhlIHByb3BlcnR5XG4gICAqIEBwYXJhbSB7Q29tcG9uZW50PX0gcGFyZW50ICAgICAgICAgUGFyZW50IGNvbXBvbmVudFxuICAgKi9cbiAgY29uc3RydWN0b3IoakNhbCwgcGFyZW50KSB7XG4gICAgdGhpcy5fcGFyZW50ID0gcGFyZW50IHx8IG51bGw7XG5cbiAgICBpZiAodHlwZW9mKGpDYWwpID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gV2UgYXJlIGNyZWF0aW5nIHRoZSBwcm9wZXJ0eSBieSBuYW1lIGFuZCBuZWVkIHRvIGRldGVjdCB0aGUgdHlwZVxuICAgICAgdGhpcy5qQ2FsID0gW2pDYWwsIHt9LCBkZXNpZ24uZGVmYXVsdFR5cGVdO1xuICAgICAgdGhpcy5qQ2FsW1RZUEVfSU5ERVhdID0gdGhpcy5nZXREZWZhdWx0VHlwZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmpDYWwgPSBqQ2FsO1xuICAgIH1cbiAgICB0aGlzLl91cGRhdGVUeXBlKCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHZhbHVlIHR5cGUgZm9yIHRoaXMgcHJvcGVydHlcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCB0eXBlKCkge1xuICAgIHJldHVybiB0aGlzLmpDYWxbVFlQRV9JTkRFWF07XG4gIH1cblxuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhpcyBwcm9wZXJ0eSwgaW4gbG93ZXJjYXNlLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuakNhbFtOQU1FX0lOREVYJDFdO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBwYXJlbnQgY29tcG9uZW50IGZvciB0aGlzIHByb3BlcnR5LlxuICAgKiBAdHlwZSB7Q29tcG9uZW50fVxuICAgKi9cbiAgZ2V0IHBhcmVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFyZW50O1xuICB9XG5cbiAgc2V0IHBhcmVudChwKSB7XG4gICAgLy8gQmVmb3JlIHNldHRpbmcgdGhlIHBhcmVudCwgY2hlY2sgaWYgdGhlIGRlc2lnbiBzZXQgaGFzIGNoYW5nZWQuIElmIGl0XG4gICAgLy8gaGFzLCB3ZSBsYXRlciBuZWVkIHRvIHVwZGF0ZSB0aGUgdHlwZSBpZiBpdCB3YXMgdW5rbm93biBiZWZvcmUuXG4gICAgbGV0IGRlc2lnblNldENoYW5nZWQgPSAhdGhpcy5fcGFyZW50IHx8IChwICYmIHAuX2Rlc2lnblNldCAhPSB0aGlzLl9wYXJlbnQuX2Rlc2lnblNldCk7XG5cbiAgICB0aGlzLl9wYXJlbnQgPSBwO1xuXG4gICAgaWYgKHRoaXMudHlwZSA9PSBkZXNpZ24uZGVmYXVsdFR5cGUgJiYgZGVzaWduU2V0Q2hhbmdlZCkge1xuICAgICAgdGhpcy5qQ2FsW1RZUEVfSU5ERVhdID0gdGhpcy5nZXREZWZhdWx0VHlwZSgpO1xuICAgICAgdGhpcy5fdXBkYXRlVHlwZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZGVzaWduIHNldCBmb3IgdGhpcyBwcm9wZXJ0eSwgZS5nLiBpY2FsZW5kYXIgdnMgdmNhcmRcbiAgICpcbiAgICogQHR5cGUge2Rlc2lnblNldH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldCBfZGVzaWduU2V0KCkge1xuICAgIHJldHVybiB0aGlzLnBhcmVudCA/IHRoaXMucGFyZW50Ll9kZXNpZ25TZXQgOiBkZXNpZ24uZGVmYXVsdFNldDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSB0eXBlIG1ldGFkYXRhIGZyb20gdGhlIGN1cnJlbnQgakNhbCB0eXBlIGFuZCBkZXNpZ24gc2V0LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3VwZGF0ZVR5cGUoKSB7XG4gICAgbGV0IGRlc2lnblNldCA9IHRoaXMuX2Rlc2lnblNldDtcblxuICAgIGlmICh0aGlzLnR5cGUgaW4gZGVzaWduU2V0LnZhbHVlKSB7XG4gICAgICBpZiAoJ2RlY29yYXRlJyBpbiBkZXNpZ25TZXQudmFsdWVbdGhpcy50eXBlXSkge1xuICAgICAgICB0aGlzLmlzRGVjb3JhdGVkID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaXNEZWNvcmF0ZWQgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMubmFtZSBpbiBkZXNpZ25TZXQucHJvcGVydHkpIHtcbiAgICAgICAgdGhpcy5pc011bHRpVmFsdWUgPSAoJ211bHRpVmFsdWUnIGluIGRlc2lnblNldC5wcm9wZXJ0eVt0aGlzLm5hbWVdKTtcbiAgICAgICAgdGhpcy5pc1N0cnVjdHVyZWRWYWx1ZSA9ICgnc3RydWN0dXJlZFZhbHVlJyBpbiBkZXNpZ25TZXQucHJvcGVydHlbdGhpcy5uYW1lXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEh5ZHJhdGUgYSBzaW5nbGUgdmFsdWUuIFRoZSBhY3Qgb2YgaHlkcmF0aW5nIG1lYW5zIHR1cm5pbmcgdGhlIHJhdyBqQ2FsXG4gICAqIHZhbHVlIGludG8gYSBwb3RlbnRpYWxseSB3cmFwcGVkIG9iamVjdCwgZm9yIGV4YW1wbGUge0BsaW5rIElDQUwuVGltZX0uXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleCAgICAgICAgVGhlIGluZGV4IG9mIHRoZSB2YWx1ZSB0byBoeWRyYXRlXG4gICAqIEByZXR1cm4gez9PYmplY3R9ICAgICAgICAgICAgIFRoZSBkZWNvcmF0ZWQgdmFsdWUuXG4gICAqL1xuICBfaHlkcmF0ZVZhbHVlKGluZGV4KSB7XG4gICAgaWYgKHRoaXMuX3ZhbHVlcyAmJiB0aGlzLl92YWx1ZXNbaW5kZXhdKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdmFsdWVzW2luZGV4XTtcbiAgICB9XG5cbiAgICAvLyBmb3IgdGhlIGNhc2Ugd2hlcmUgdGhlcmUgaXMgbm8gdmFsdWUuXG4gICAgaWYgKHRoaXMuakNhbC5sZW5ndGggPD0gKFZBTFVFX0lOREVYICsgaW5kZXgpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc0RlY29yYXRlZCkge1xuICAgICAgaWYgKCF0aGlzLl92YWx1ZXMpIHtcbiAgICAgICAgdGhpcy5fdmFsdWVzID0gW107XG4gICAgICB9XG4gICAgICByZXR1cm4gKHRoaXMuX3ZhbHVlc1tpbmRleF0gPSB0aGlzLl9kZWNvcmF0ZShcbiAgICAgICAgdGhpcy5qQ2FsW1ZBTFVFX0lOREVYICsgaW5kZXhdXG4gICAgICApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuakNhbFtWQUxVRV9JTkRFWCArIGluZGV4XTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGVjb3JhdGUgYSBzaW5nbGUgdmFsdWUsIHJldHVybmluZyBpdHMgd3JhcHBlZCBvYmplY3QuIFRoaXMgaXMgdXNlZCBieVxuICAgKiB0aGUgaHlkcmF0ZSBmdW5jdGlvbiB0byBhY3R1YWxseSB3cmFwIHRoZSB2YWx1ZS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHs/fSB2YWx1ZSAgICAgICAgIFRoZSB2YWx1ZSB0byBkZWNvcmF0ZVxuICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgVGhlIGRlY29yYXRlZCB2YWx1ZVxuICAgKi9cbiAgX2RlY29yYXRlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Rlc2lnblNldC52YWx1ZVt0aGlzLnR5cGVdLmRlY29yYXRlKHZhbHVlLCB0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbmRlY29yYXRlIGEgc2luZ2xlIHZhbHVlLCByZXR1cm5pbmcgaXRzIHJhdyBqQ2FsIGRhdGEuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZSAgICAgICAgIFRoZSB2YWx1ZSB0byB1bmRlY29yYXRlXG4gICAqIEByZXR1cm4gez99ICAgICAgICAgICAgICAgICAgIFRoZSB1bmRlY29yYXRlZCB2YWx1ZVxuICAgKi9cbiAgX3VuZGVjb3JhdGUodmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5fZGVzaWduU2V0LnZhbHVlW3RoaXMudHlwZV0udW5kZWNvcmF0ZSh2YWx1ZSwgdGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWUgYXQgdGhlIGdpdmVuIGluZGV4IHdoaWxlIGFsc28gaHlkcmF0aW5nIGl0LiBUaGUgcGFzc2VkXG4gICAqIHZhbHVlIGNhbiBlaXRoZXIgYmUgYSBkZWNvcmF0ZWQgb3IgdW5kZWNvcmF0ZWQgdmFsdWUuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7P30gdmFsdWUgICAgICAgICAgICAgVGhlIHZhbHVlIHRvIHNldFxuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXggICAgICAgIFRoZSBpbmRleCB0byBzZXQgaXQgYXRcbiAgICovXG4gIF9zZXREZWNvcmF0ZWRWYWx1ZSh2YWx1ZSwgaW5kZXgpIHtcbiAgICBpZiAoIXRoaXMuX3ZhbHVlcykge1xuICAgICAgdGhpcy5fdmFsdWVzID0gW107XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZih2YWx1ZSkgPT09ICdvYmplY3QnICYmICdpY2FsdHlwZScgaW4gdmFsdWUpIHtcbiAgICAgIC8vIGRlY29yYXRlZCB2YWx1ZVxuICAgICAgdGhpcy5qQ2FsW1ZBTFVFX0lOREVYICsgaW5kZXhdID0gdGhpcy5fdW5kZWNvcmF0ZSh2YWx1ZSk7XG4gICAgICB0aGlzLl92YWx1ZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHVuZGVjb3JhdGVkIHZhbHVlXG4gICAgICB0aGlzLmpDYWxbVkFMVUVfSU5ERVggKyBpbmRleF0gPSB2YWx1ZTtcbiAgICAgIHRoaXMuX3ZhbHVlc1tpbmRleF0gPSB0aGlzLl9kZWNvcmF0ZSh2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYSBwYXJhbWV0ZXIgb24gdGhlIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gICAgICAgIG5hbWUgICBQYXJhbWV0ZXIgbmFtZSAobG93ZXJjYXNlKVxuICAgKiBAcmV0dXJuIHtBcnJheXxTdHJpbmd9ICAgICAgICBQYXJhbWV0ZXIgdmFsdWVcbiAgICovXG4gIGdldFBhcmFtZXRlcihuYW1lKSB7XG4gICAgaWYgKG5hbWUgaW4gdGhpcy5qQ2FsW1BST1BfSU5ERVhdKSB7XG4gICAgICByZXR1cm4gdGhpcy5qQ2FsW1BST1BfSU5ERVhdW25hbWVdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGZpcnN0IHBhcmFtZXRlciBvbiB0aGUgcHJvcGVydHkuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSAgICAgICAgbmFtZSAgIFBhcmFtZXRlciBuYW1lIChsb3dlcmNhc2UpXG4gICAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgIFBhcmFtZXRlciB2YWx1ZVxuICAgKi9cbiAgZ2V0Rmlyc3RQYXJhbWV0ZXIobmFtZSkge1xuICAgIGxldCBwYXJhbWV0ZXJzID0gdGhpcy5nZXRQYXJhbWV0ZXIobmFtZSk7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShwYXJhbWV0ZXJzKSkge1xuICAgICAgcmV0dXJuIHBhcmFtZXRlcnNbMF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcmFtZXRlcnM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBhIHBhcmFtZXRlciBvbiB0aGUgcHJvcGVydHkuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSAgICAgICBuYW1lICAgICBUaGUgcGFyYW1ldGVyIG5hbWVcbiAgICogQHBhcmFtIHtBcnJheXxTdHJpbmd9IHZhbHVlICAgIFRoZSBwYXJhbWV0ZXIgdmFsdWVcbiAgICovXG4gIHNldFBhcmFtZXRlcihuYW1lLCB2YWx1ZSkge1xuICAgIGxldCBsY25hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICBsY25hbWUgaW4gdGhpcy5fZGVzaWduU2V0LnBhcmFtICYmXG4gICAgICAgICdtdWx0aVZhbHVlJyBpbiB0aGlzLl9kZXNpZ25TZXQucGFyYW1bbGNuYW1lXSkge1xuICAgICAgICB2YWx1ZSA9IFt2YWx1ZV07XG4gICAgfVxuICAgIHRoaXMuakNhbFtQUk9QX0lOREVYXVtuYW1lXSA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBwYXJhbWV0ZXJcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgICAgIFRoZSBwYXJhbWV0ZXIgbmFtZVxuICAgKi9cbiAgcmVtb3ZlUGFyYW1ldGVyKG5hbWUpIHtcbiAgICBkZWxldGUgdGhpcy5qQ2FsW1BST1BfSU5ERVhdW25hbWVdO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZGVmYXVsdCB0eXBlIGJhc2VkIG9uIHRoaXMgcHJvcGVydHkncyBuYW1lLlxuICAgKlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICBUaGUgZGVmYXVsdCB0eXBlIGZvciB0aGlzIHByb3BlcnR5XG4gICAqL1xuICBnZXREZWZhdWx0VHlwZSgpIHtcbiAgICBsZXQgbmFtZSA9IHRoaXMuakNhbFtOQU1FX0lOREVYJDFdO1xuICAgIGxldCBkZXNpZ25TZXQgPSB0aGlzLl9kZXNpZ25TZXQ7XG5cbiAgICBpZiAobmFtZSBpbiBkZXNpZ25TZXQucHJvcGVydHkpIHtcbiAgICAgIGxldCBkZXRhaWxzID0gZGVzaWduU2V0LnByb3BlcnR5W25hbWVdO1xuICAgICAgaWYgKCdkZWZhdWx0VHlwZScgaW4gZGV0YWlscykge1xuICAgICAgICByZXR1cm4gZGV0YWlscy5kZWZhdWx0VHlwZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRlc2lnbi5kZWZhdWx0VHlwZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHR5cGUgb2YgcHJvcGVydHkgYW5kIGNsZWFycyBvdXQgYW55IGV4aXN0aW5nIHZhbHVlcyBvZiB0aGUgY3VycmVudFxuICAgKiB0eXBlLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAgICAgTmV3IGlDQUwgdHlwZSAoc2VlIGRlc2lnbi4qLnZhbHVlcylcbiAgICovXG4gIHJlc2V0VHlwZSh0eXBlKSB7XG4gICAgdGhpcy5yZW1vdmVBbGxWYWx1ZXMoKTtcbiAgICB0aGlzLmpDYWxbVFlQRV9JTkRFWF0gPSB0eXBlO1xuICAgIHRoaXMuX3VwZGF0ZVR5cGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyB0aGUgZmlyc3QgcHJvcGVydHkgdmFsdWUuXG4gICAqXG4gICAqIEByZXR1cm4ge0JpbmFyeSB8IER1cmF0aW9uIHwgUGVyaW9kIHxcbiAgICogUmVjdXIgfCBUaW1lIHwgVXRjT2Zmc2V0IHwgR2VvIHwgc3RyaW5nIHwgbnVsbH0gICAgICAgICBGaXJzdCBwcm9wZXJ0eSB2YWx1ZVxuICAgKi9cbiAgZ2V0Rmlyc3RWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5faHlkcmF0ZVZhbHVlKDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYWxsIHZhbHVlcyBvbiB0aGUgcHJvcGVydHkuXG4gICAqXG4gICAqIE5PVEU6IHRoaXMgY3JlYXRlcyBhbiBhcnJheSBkdXJpbmcgZWFjaCBjYWxsLlxuICAgKlxuICAgKiBAcmV0dXJuIHtBcnJheX0gICAgICAgICAgTGlzdCBvZiB2YWx1ZXNcbiAgICovXG4gIGdldFZhbHVlcygpIHtcbiAgICBsZXQgbGVuID0gdGhpcy5qQ2FsLmxlbmd0aCAtIFZBTFVFX0lOREVYO1xuXG4gICAgaWYgKGxlbiA8IDEpIHtcbiAgICAgIC8vIGl0IGlzIHBvc3NpYmxlIGZvciBhIHByb3BlcnR5IHRvIGhhdmUgbm8gdmFsdWUuXG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCByZXN1bHQgPSBbXTtcblxuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHJlc3VsdFtpXSA9IHRoaXMuX2h5ZHJhdGVWYWx1ZShpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYWxsIHZhbHVlcyBmcm9tIHRoaXMgcHJvcGVydHlcbiAgICovXG4gIHJlbW92ZUFsbFZhbHVlcygpIHtcbiAgICBpZiAodGhpcy5fdmFsdWVzKSB7XG4gICAgICB0aGlzLl92YWx1ZXMubGVuZ3RoID0gMDtcbiAgICB9XG4gICAgdGhpcy5qQ2FsLmxlbmd0aCA9IDM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWVzIG9mIHRoZSBwcm9wZXJ0eS4gIFdpbGwgb3ZlcndyaXRlIHRoZSBleGlzdGluZyB2YWx1ZXMuXG4gICAqIFRoaXMgY2FuIG9ubHkgYmUgdXNlZCBmb3IgbXVsdGktdmFsdWUgcHJvcGVydGllcy5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gdmFsdWVzICAgIEFuIGFycmF5IG9mIHZhbHVlc1xuICAgKi9cbiAgc2V0VmFsdWVzKHZhbHVlcykge1xuICAgIGlmICghdGhpcy5pc011bHRpVmFsdWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgdGhpcy5uYW1lICsgJzogZG9lcyBub3Qgbm90IHN1cHBvcnQgbXVsaXRWYWx1ZS5cXG4nICtcbiAgICAgICAgJ292ZXJyaWRlIGlzTXVsdGlWYWx1ZSdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IGxlbiA9IHZhbHVlcy5sZW5ndGg7XG4gICAgbGV0IGkgPSAwO1xuICAgIHRoaXMucmVtb3ZlQWxsVmFsdWVzKCk7XG5cbiAgICBpZiAobGVuID4gMCAmJlxuICAgICAgICB0eXBlb2YodmFsdWVzWzBdKSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgJ2ljYWx0eXBlJyBpbiB2YWx1ZXNbMF0pIHtcbiAgICAgIHRoaXMucmVzZXRUeXBlKHZhbHVlc1swXS5pY2FsdHlwZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNEZWNvcmF0ZWQpIHtcbiAgICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdGhpcy5fc2V0RGVjb3JhdGVkVmFsdWUodmFsdWVzW2ldLCBpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB0aGlzLmpDYWxbVkFMVUVfSU5ERVggKyBpXSA9IHZhbHVlc1tpXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgcHJvcGVydHkuIElmIHRoaXMgaXMgYSBtdWx0aS12YWx1ZVxuICAgKiBwcm9wZXJ0eSwgYWxsIG90aGVyIHZhbHVlcyB3aWxsIGJlIHJlbW92ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gdmFsdWUgICAgIE5ldyBwcm9wZXJ0eSB2YWx1ZS5cbiAgICovXG4gIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgdGhpcy5yZW1vdmVBbGxWYWx1ZXMoKTtcbiAgICBpZiAodHlwZW9mKHZhbHVlKSA9PT0gJ29iamVjdCcgJiYgJ2ljYWx0eXBlJyBpbiB2YWx1ZSkge1xuICAgICAgdGhpcy5yZXNldFR5cGUodmFsdWUuaWNhbHR5cGUpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzRGVjb3JhdGVkKSB7XG4gICAgICB0aGlzLl9zZXREZWNvcmF0ZWRWYWx1ZSh2YWx1ZSwgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuakNhbFtWQUxVRV9JTkRFWF0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgT2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgY29tcG9uZW50LiBUaGUgcmV0dXJuZWQgb2JqZWN0XG4gICAqIGlzIGEgbGl2ZSBqQ2FsIG9iamVjdCBhbmQgc2hvdWxkIGJlIGNsb25lZCBpZiBtb2RpZmllZC5cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB0aGlzLmpDYWw7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGNvbXBvbmVudC5cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgdG9JQ0FMU3RyaW5nKCkge1xuICAgIHJldHVybiBzdHJpbmdpZnkucHJvcGVydHkoXG4gICAgICB0aGlzLmpDYWwsIHRoaXMuX2Rlc2lnblNldCwgdHJ1ZVxuICAgICk7XG4gIH1cbn1cblxuLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cblxuLyoqXG4gKiBUaGlzIGxldHMgdHlwZXNjcmlwdCByZXNvbHZlIG91ciBjdXN0b20gdHlwZXMgaW4gdGhlXG4gKiBnZW5lcmF0ZWQgZC50cyBmaWxlcyAoanNkb2MgdHlwZWRlZnMgYXJlIGNvbnZlcnRlZCB0byB0eXBlc2NyaXB0IHR5cGVzKS5cbiAqIElnbm9yZSBwcmV2ZW50cyB0aGUgdHlwZWRlZnMgZnJvbSBiZWluZyBkb2N1bWVudGVkIG1vcmUgdGhhbiBvbmNlLlxuICogQGlnbm9yZVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vdHlwZXMuanNcIikuZGVzaWduU2V0fSBkZXNpZ25TZXRcbiAqIEltcG9ydHMgdGhlICdkZXNpZ25TZXQnIHR5cGUgZnJvbSB0aGUgXCJ0eXBlcy5qc1wiIG1vZHVsZVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vdHlwZXMuanNcIikuR2VvfSBHZW9cbiAqIEltcG9ydHMgdGhlICdHZW8nIHR5cGUgZnJvbSB0aGUgXCJ0eXBlcy5qc1wiIG1vZHVsZVxuICovXG5cbmNvbnN0IE5BTUVfSU5ERVggPSAwO1xuY29uc3QgUFJPUEVSVFlfSU5ERVggPSAxO1xuY29uc3QgQ09NUE9ORU5UX0lOREVYID0gMjtcblxuY29uc3QgUFJPUEVSVFlfTkFNRV9JTkRFWCA9IDA7XG5jb25zdCBQUk9QRVJUWV9WQUxVRV9JTkRFWCA9IDM7XG5cbi8qKlxuICogV3JhcHMgYSBqQ2FsIGNvbXBvbmVudCwgYWRkaW5nIGNvbnZlbmllbmNlIG1ldGhvZHMgdG8gYWRkLCByZW1vdmUgYW5kIHVwZGF0ZSBzdWJjb21wb25lbnRzIGFuZFxuICogcHJvcGVydGllcy5cbiAqXG4gKiBAbWVtYmVyb2YgSUNBTFxuICovXG5jbGFzcyBDb21wb25lbnQge1xuICAvKipcbiAgICogQ3JlYXRlIGFuIHtAbGluayBJQ0FMLkNvbXBvbmVudH0gYnkgcGFyc2luZyB0aGUgcGFzc2VkIGlDYWxlbmRhciBzdHJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgICAgICAgIFRoZSBpQ2FsZW5kYXIgc3RyaW5nIHRvIHBhcnNlXG4gICAqL1xuICBzdGF0aWMgZnJvbVN0cmluZyhzdHIpIHtcbiAgICByZXR1cm4gbmV3IENvbXBvbmVudChwYXJzZS5jb21wb25lbnQoc3RyKSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBDb21wb25lbnQgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl8U3RyaW5nfSBqQ2FsICAgICAgICAgUmF3IGpDYWwgY29tcG9uZW50IGRhdGEgT1IgbmFtZSBvZiBuZXdcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudFxuICAgKiBAcGFyYW0ge0NvbXBvbmVudD19IHBhcmVudCAgICAgUGFyZW50IGNvbXBvbmVudCB0byBhc3NvY2lhdGVcbiAgICovXG4gIGNvbnN0cnVjdG9yKGpDYWwsIHBhcmVudCkge1xuICAgIGlmICh0eXBlb2YoakNhbCkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBqQ2FsIHNwZWMgKG5hbWUsIHByb3BlcnRpZXMsIGNvbXBvbmVudHMpXG4gICAgICBqQ2FsID0gW2pDYWwsIFtdLCBbXV07XG4gICAgfVxuXG4gICAgLy8gbW9zdGx5IGZvciBsZWdhY3kgcmVhc29ucy5cbiAgICB0aGlzLmpDYWwgPSBqQ2FsO1xuXG4gICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQgfHwgbnVsbDtcblxuICAgIGlmICghdGhpcy5wYXJlbnQgJiYgdGhpcy5uYW1lID09PSAndmNhbGVuZGFyJykge1xuICAgICAgdGhpcy5fdGltZXpvbmVDYWNoZSA9IG5ldyBNYXAoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSHlkcmF0ZWQgcHJvcGVydGllcyBhcmUgaW5zZXJ0ZWQgaW50byB0aGUgX3Byb3BlcnRpZXMgYXJyYXkgYXQgdGhlIHNhbWVcbiAgICogcG9zaXRpb24gYXMgaW4gdGhlIGpDYWwgYXJyYXksIHNvIGl0IGlzIHBvc3NpYmxlIHRoYXQgdGhlIGFycmF5IGNvbnRhaW5zXG4gICAqIHVuZGVmaW5lZCB2YWx1ZXMgZm9yIHVuaHlkcmRhdGVkIHByb3BlcnRpZXMuIFRvIGF2b2lkIGl0ZXJhdGluZyB0aGVcbiAgICogYXJyYXkgd2hlbiBjaGVja2luZyBpZiBhbGwgcHJvcGVydGllcyBoYXZlIGJlZW4gaHlkcmF0ZWQsIHdlIHNhdmUgdGhlXG4gICAqIGNvdW50IGhlcmUuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaHlkcmF0ZWRQcm9wZXJ0eUNvdW50ID0gMDtcblxuICAvKipcbiAgICogVGhlIHNhbWUgY291bnQgYXMgZm9yIF9oeWRyYXRlZFByb3BlcnR5Q291bnQsIGJ1dCBmb3Igc3ViY29tcG9uZW50c1xuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2h5ZHJhdGVkQ29tcG9uZW50Q291bnQgPSAwO1xuXG4gIC8qKlxuICAgKiBBIGNhY2hlIG9mIGh5ZHJhdGVkIHRpbWUgem9uZSBvYmplY3RzIHdoaWNoIG1heSBiZSB1c2VkIGJ5IGNvbnN1bWVycywga2V5ZWRcbiAgICogYnkgdGltZSB6b25lIElELlxuICAgKlxuICAgKiBAdHlwZSB7TWFwfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3RpbWV6b25lQ2FjaGUgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2NvbXBvbmVudHMgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Byb3BlcnRpZXMgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGlzIGNvbXBvbmVudFxuICAgKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuakNhbFtOQU1FX0lOREVYXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZGVzaWduIHNldCBmb3IgdGhpcyBjb21wb25lbnQsIGUuZy4gaWNhbGVuZGFyIHZzIHZjYXJkXG4gICAqXG4gICAqIEB0eXBlIHtkZXNpZ25TZXR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXQgX2Rlc2lnblNldCgpIHtcbiAgICBsZXQgcGFyZW50RGVzaWduID0gdGhpcy5wYXJlbnQgJiYgdGhpcy5wYXJlbnQuX2Rlc2lnblNldDtcbiAgICBpZiAoIXBhcmVudERlc2lnbiAmJiB0aGlzLm5hbWUgPT0gXCJ2Y2FyZFwiKSB7XG4gICAgICAvLyBXZSBjYW4ndCBkZWNpZGUgb24gdmNhcmQzIHZzIHZjYXJkNCBqdXN0IGJhc2VkIG9uIHRoZSBjb21wb25lbnQgbmFtZSwgdGhlIHZlcnNpb24gbnVtYmVyIGlzXG4gICAgICAvLyBpbiB0aGUgdmVyc2lvbiBwcm9wZXJ0eS4gV2UgYWxzbyBjYW4ndCB1c2UgaHlkcmF0ZWQgcHJvcGVydGllcyBoZXJlIGJlY2F1c2UgaXQgd291bGQgbGVhZFxuICAgICAgLy8gdG8gcmVjdXJzaW9uLCBidXQgdGhlIHNwZWMgc2F5cyB0aGF0IHRoZSB2ZXJzaW9uIHByb3BlcnR5IG5lZWRzIHRvIGJlIHRoZSB2ZXJ5IGZpcnN0IG9uZS5cbiAgICAgIGxldCB2ZXJzaW9uUHJvcCA9IHRoaXMuakNhbFtQUk9QRVJUWV9JTkRFWF0/LlswXTtcblxuICAgICAgaWYgKHZlcnNpb25Qcm9wICYmIHZlcnNpb25Qcm9wW1BST1BFUlRZX05BTUVfSU5ERVhdID09IFwidmVyc2lvblwiICYmIHZlcnNpb25Qcm9wW1BST1BFUlRZX1ZBTFVFX0lOREVYXSA9PSBcIjMuMFwiKSB7XG4gICAgICAgIHJldHVybiBkZXNpZ24uZ2V0RGVzaWduU2V0KFwidmNhcmQzXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwYXJlbnREZXNpZ24gfHwgZGVzaWduLmdldERlc2lnblNldCh0aGlzLm5hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaHlkcmF0ZUNvbXBvbmVudChpbmRleCkge1xuICAgIGlmICghdGhpcy5fY29tcG9uZW50cykge1xuICAgICAgdGhpcy5fY29tcG9uZW50cyA9IFtdO1xuICAgICAgdGhpcy5faHlkcmF0ZWRDb21wb25lbnRDb3VudCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2NvbXBvbmVudHNbaW5kZXhdKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29tcG9uZW50c1tpbmRleF07XG4gICAgfVxuXG4gICAgbGV0IGNvbXAgPSBuZXcgQ29tcG9uZW50KFxuICAgICAgdGhpcy5qQ2FsW0NPTVBPTkVOVF9JTkRFWF1baW5kZXhdLFxuICAgICAgdGhpc1xuICAgICk7XG5cbiAgICB0aGlzLl9oeWRyYXRlZENvbXBvbmVudENvdW50Kys7XG4gICAgcmV0dXJuICh0aGlzLl9jb21wb25lbnRzW2luZGV4XSA9IGNvbXApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaHlkcmF0ZVByb3BlcnR5KGluZGV4KSB7XG4gICAgaWYgKCF0aGlzLl9wcm9wZXJ0aWVzKSB7XG4gICAgICB0aGlzLl9wcm9wZXJ0aWVzID0gW107XG4gICAgICB0aGlzLl9oeWRyYXRlZFByb3BlcnR5Q291bnQgPSAwO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9wcm9wZXJ0aWVzW2luZGV4XSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Byb3BlcnRpZXNbaW5kZXhdO1xuICAgIH1cblxuICAgIGxldCBwcm9wID0gbmV3IFByb3BlcnR5KFxuICAgICAgdGhpcy5qQ2FsW1BST1BFUlRZX0lOREVYXVtpbmRleF0sXG4gICAgICB0aGlzXG4gICAgKTtcblxuICAgIHRoaXMuX2h5ZHJhdGVkUHJvcGVydHlDb3VudCsrO1xuICAgIHJldHVybiAodGhpcy5fcHJvcGVydGllc1tpbmRleF0gPSBwcm9wKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyBmaXJzdCBzdWIgY29tcG9uZW50LCBvcHRpb25hbGx5IGZpbHRlcmVkIGJ5IG5hbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nPX0gbmFtZSAgICAgICAgT3B0aW9uYWwgbmFtZSB0byBmaWx0ZXIgYnlcbiAgICogQHJldHVybiB7P0NvbXBvbmVudH0gICAgIFRoZSBmb3VuZCBzdWJjb21wb25lbnRcbiAgICovXG4gIGdldEZpcnN0U3ViY29tcG9uZW50KG5hbWUpIHtcbiAgICBpZiAobmFtZSkge1xuICAgICAgbGV0IGkgPSAwO1xuICAgICAgbGV0IGNvbXBzID0gdGhpcy5qQ2FsW0NPTVBPTkVOVF9JTkRFWF07XG4gICAgICBsZXQgbGVuID0gY29tcHMubGVuZ3RoO1xuXG4gICAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmIChjb21wc1tpXVtOQU1FX0lOREVYXSA9PT0gbmFtZSkge1xuICAgICAgICAgIGxldCByZXN1bHQgPSB0aGlzLl9oeWRyYXRlQ29tcG9uZW50KGkpO1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuakNhbFtDT01QT05FTlRfSU5ERVhdLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faHlkcmF0ZUNvbXBvbmVudCgwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBlbnN1cmUgd2UgcmV0dXJuIGEgdmFsdWUgKHN0cmljdCBtb2RlKVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmRzIGFsbCBzdWIgY29tcG9uZW50cywgb3B0aW9uYWxseSBmaWx0ZXJpbmcgYnkgbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmc9fSBuYW1lICAgICAgICAgICAgT3B0aW9uYWwgbmFtZSB0byBmaWx0ZXIgYnlcbiAgICogQHJldHVybiB7Q29tcG9uZW50W119ICAgICAgIFRoZSBmb3VuZCBzdWIgY29tcG9uZW50c1xuICAgKi9cbiAgZ2V0QWxsU3ViY29tcG9uZW50cyhuYW1lKSB7XG4gICAgbGV0IGpDYWxMZW4gPSB0aGlzLmpDYWxbQ09NUE9ORU5UX0lOREVYXS5sZW5ndGg7XG4gICAgbGV0IGkgPSAwO1xuXG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIGxldCBjb21wcyA9IHRoaXMuakNhbFtDT01QT05FTlRfSU5ERVhdO1xuICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuXG4gICAgICBmb3IgKDsgaSA8IGpDYWxMZW47IGkrKykge1xuICAgICAgICBpZiAobmFtZSA9PT0gY29tcHNbaV1bTkFNRV9JTkRFWF0pIHtcbiAgICAgICAgICByZXN1bHQucHVzaChcbiAgICAgICAgICAgIHRoaXMuX2h5ZHJhdGVDb21wb25lbnQoaSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXRoaXMuX2NvbXBvbmVudHMgfHxcbiAgICAgICAgICAodGhpcy5faHlkcmF0ZWRDb21wb25lbnRDb3VudCAhPT0gakNhbExlbikpIHtcbiAgICAgICAgZm9yICg7IGkgPCBqQ2FsTGVuOyBpKyspIHtcbiAgICAgICAgICB0aGlzLl9oeWRyYXRlQ29tcG9uZW50KGkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLl9jb21wb25lbnRzIHx8IFtdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgd2hlbiBhIG5hbWVkIHByb3BlcnR5IGV4aXN0cy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgICAgIFRoZSBwcm9wZXJ0eSBuYW1lXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgICBUcnVlLCB3aGVuIHByb3BlcnR5IGlzIGZvdW5kXG4gICAqL1xuICBoYXNQcm9wZXJ0eShuYW1lKSB7XG4gICAgbGV0IHByb3BzID0gdGhpcy5qQ2FsW1BST1BFUlRZX0lOREVYXTtcbiAgICBsZXQgbGVuID0gcHJvcHMubGVuZ3RoO1xuXG4gICAgbGV0IGkgPSAwO1xuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIC8vIDAgaXMgcHJvcGVydHkgbmFtZVxuICAgICAgaWYgKHByb3BzW2ldW05BTUVfSU5ERVhdID09PSBuYW1lKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyB0aGUgZmlyc3QgcHJvcGVydHksIG9wdGlvbmFsbHkgd2l0aCB0aGUgZ2l2ZW4gbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmc9fSBuYW1lICAgICAgICBMb3dlcmNhc2UgcHJvcGVydHkgbmFtZVxuICAgKiBAcmV0dXJuIHs/UHJvcGVydHl9ICAgICBUaGUgZm91bmQgcHJvcGVydHlcbiAgICovXG4gIGdldEZpcnN0UHJvcGVydHkobmFtZSkge1xuICAgIGlmIChuYW1lKSB7XG4gICAgICBsZXQgaSA9IDA7XG4gICAgICBsZXQgcHJvcHMgPSB0aGlzLmpDYWxbUFJPUEVSVFlfSU5ERVhdO1xuICAgICAgbGV0IGxlbiA9IHByb3BzLmxlbmd0aDtcblxuICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBpZiAocHJvcHNbaV1bTkFNRV9JTkRFWF0gPT09IG5hbWUpIHtcbiAgICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5faHlkcmF0ZVByb3BlcnR5KGkpO1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuakNhbFtQUk9QRVJUWV9JTkRFWF0ubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oeWRyYXRlUHJvcGVydHkoMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBmaXJzdCBwcm9wZXJ0eSdzIHZhbHVlLCBpZiBhdmFpbGFibGUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nPX0gbmFtZSAgICAgICAgICAgICAgICAgICAgTG93ZXJjYXNlIHByb3BlcnR5IG5hbWVcbiAgICogQHJldHVybiB7QmluYXJ5IHwgRHVyYXRpb24gfCBQZXJpb2QgfFxuICAgKiBSZWN1ciB8IFRpbWUgfCBVdGNPZmZzZXQgfCBHZW8gfCBzdHJpbmcgfCBudWxsfSAgICAgICAgIFRoZSBmb3VuZCBwcm9wZXJ0eSB2YWx1ZS5cbiAgICovXG4gIGdldEZpcnN0UHJvcGVydHlWYWx1ZShuYW1lKSB7XG4gICAgbGV0IHByb3AgPSB0aGlzLmdldEZpcnN0UHJvcGVydHkobmFtZSk7XG4gICAgaWYgKHByb3ApIHtcbiAgICAgIHJldHVybiBwcm9wLmdldEZpcnN0VmFsdWUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIHByb3BlcnRpZXMgaW4gdGhlIGNvbXBvbmVudCwgb3B0aW9uYWxseSBmaWx0ZXJlZCBieSBuYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZz19IG5hbWUgICAgICAgIExvd2VyY2FzZSBwcm9wZXJ0eSBuYW1lXG4gICAqIEByZXR1cm4ge1Byb3BlcnR5W119ICAgIExpc3Qgb2YgcHJvcGVydGllc1xuICAgKi9cbiAgZ2V0QWxsUHJvcGVydGllcyhuYW1lKSB7XG4gICAgbGV0IGpDYWxMZW4gPSB0aGlzLmpDYWxbUFJPUEVSVFlfSU5ERVhdLmxlbmd0aDtcbiAgICBsZXQgaSA9IDA7XG5cbiAgICBpZiAobmFtZSkge1xuICAgICAgbGV0IHByb3BzID0gdGhpcy5qQ2FsW1BST1BFUlRZX0lOREVYXTtcbiAgICAgIGxldCByZXN1bHQgPSBbXTtcblxuICAgICAgZm9yICg7IGkgPCBqQ2FsTGVuOyBpKyspIHtcbiAgICAgICAgaWYgKG5hbWUgPT09IHByb3BzW2ldW05BTUVfSU5ERVhdKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2goXG4gICAgICAgICAgICB0aGlzLl9oeWRyYXRlUHJvcGVydHkoaSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXRoaXMuX3Byb3BlcnRpZXMgfHxcbiAgICAgICAgICAodGhpcy5faHlkcmF0ZWRQcm9wZXJ0eUNvdW50ICE9PSBqQ2FsTGVuKSkge1xuICAgICAgICBmb3IgKDsgaSA8IGpDYWxMZW47IGkrKykge1xuICAgICAgICAgIHRoaXMuX2h5ZHJhdGVQcm9wZXJ0eShpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5fcHJvcGVydGllcyB8fCBbXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW1vdmVPYmplY3RCeUluZGV4KGpDYWxJbmRleCwgY2FjaGUsIGluZGV4KSB7XG4gICAgY2FjaGUgPSBjYWNoZSB8fCBbXTtcbiAgICAvLyByZW1vdmUgY2FjaGVkIHZlcnNpb25cbiAgICBpZiAoY2FjaGVbaW5kZXhdKSB7XG4gICAgICBsZXQgb2JqID0gY2FjaGVbaW5kZXhdO1xuICAgICAgaWYgKFwicGFyZW50XCIgaW4gb2JqKSB7XG4gICAgICAgICAgb2JqLnBhcmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2FjaGUuc3BsaWNlKGluZGV4LCAxKTtcblxuICAgIC8vIHJlbW92ZSBpdCBmcm9tIHRoZSBqQ2FsXG4gICAgdGhpcy5qQ2FsW2pDYWxJbmRleF0uc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3JlbW92ZU9iamVjdChqQ2FsSW5kZXgsIGNhY2hlLCBuYW1lT3JPYmplY3QpIHtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IG9iamVjdHMgPSB0aGlzLmpDYWxbakNhbEluZGV4XTtcbiAgICBsZXQgbGVuID0gb2JqZWN0cy5sZW5ndGg7XG4gICAgbGV0IGNhY2hlZCA9IHRoaXNbY2FjaGVdO1xuXG4gICAgaWYgKHR5cGVvZihuYW1lT3JPYmplY3QpID09PSAnc3RyaW5nJykge1xuICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBpZiAob2JqZWN0c1tpXVtOQU1FX0lOREVYXSA9PT0gbmFtZU9yT2JqZWN0KSB7XG4gICAgICAgICAgdGhpcy5fcmVtb3ZlT2JqZWN0QnlJbmRleChqQ2FsSW5kZXgsIGNhY2hlZCwgaSk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNhY2hlZCkge1xuICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBpZiAoY2FjaGVkW2ldICYmIGNhY2hlZFtpXSA9PT0gbmFtZU9yT2JqZWN0KSB7XG4gICAgICAgICAgdGhpcy5fcmVtb3ZlT2JqZWN0QnlJbmRleChqQ2FsSW5kZXgsIGNhY2hlZCwgaSk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW1vdmVBbGxPYmplY3RzKGpDYWxJbmRleCwgY2FjaGUsIG5hbWUpIHtcbiAgICBsZXQgY2FjaGVkID0gdGhpc1tjYWNoZV07XG5cbiAgICAvLyBVbmZvcnR1bmF0ZWx5IHdlIGhhdmUgdG8gcnVuIHRocm91Z2ggYWxsIGNoaWxkcmVuIHRvIHJlc2V0IHRoZWlyXG4gICAgLy8gcGFyZW50IHByb3BlcnR5LlxuICAgIGxldCBvYmplY3RzID0gdGhpcy5qQ2FsW2pDYWxJbmRleF07XG4gICAgbGV0IGkgPSBvYmplY3RzLmxlbmd0aCAtIDE7XG5cbiAgICAvLyBkZXNjZW5kaW5nIHNlYXJjaCByZXF1aXJlZCBiZWNhdXNlIHNwbGljZVxuICAgIC8vIGlzIHVzZWQgYW5kIHdpbGwgZWZmZWN0IHRoZSBpbmRpY2VzLlxuICAgIGZvciAoOyBpID49IDA7IGktLSkge1xuICAgICAgaWYgKCFuYW1lIHx8IG9iamVjdHNbaV1bTkFNRV9JTkRFWF0gPT09IG5hbWUpIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlT2JqZWN0QnlJbmRleChqQ2FsSW5kZXgsIGNhY2hlZCwgaSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBzaW5nbGUgc3ViIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtDb21wb25lbnR9IGNvbXBvbmVudCAgICAgICAgVGhlIGNvbXBvbmVudCB0byBhZGRcbiAgICogQHJldHVybiB7Q29tcG9uZW50fSAgICAgICAgICAgICAgICAgVGhlIHBhc3NlZCBpbiBjb21wb25lbnRcbiAgICovXG4gIGFkZFN1YmNvbXBvbmVudChjb21wb25lbnQpIHtcbiAgICBpZiAoIXRoaXMuX2NvbXBvbmVudHMpIHtcbiAgICAgIHRoaXMuX2NvbXBvbmVudHMgPSBbXTtcbiAgICAgIHRoaXMuX2h5ZHJhdGVkQ29tcG9uZW50Q291bnQgPSAwO1xuICAgIH1cblxuICAgIGlmIChjb21wb25lbnQucGFyZW50KSB7XG4gICAgICBjb21wb25lbnQucGFyZW50LnJlbW92ZVN1YmNvbXBvbmVudChjb21wb25lbnQpO1xuICAgIH1cblxuICAgIGxldCBpZHggPSB0aGlzLmpDYWxbQ09NUE9ORU5UX0lOREVYXS5wdXNoKGNvbXBvbmVudC5qQ2FsKTtcbiAgICB0aGlzLl9jb21wb25lbnRzW2lkeCAtIDFdID0gY29tcG9uZW50O1xuICAgIHRoaXMuX2h5ZHJhdGVkQ29tcG9uZW50Q291bnQrKztcbiAgICBjb21wb25lbnQucGFyZW50ID0gdGhpcztcbiAgICByZXR1cm4gY29tcG9uZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBzaW5nbGUgY29tcG9uZW50IGJ5IG5hbWUgb3IgdGhlIGluc3RhbmNlIG9mIGEgc3BlY2lmaWNcbiAgICogY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBvbmVudHxTdHJpbmd9IG5hbWVPckNvbXAgICAgTmFtZSBvZiBjb21wb25lbnQsIG9yIGNvbXBvbmVudFxuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgICAgICAgICAgICAgICAgICAgICBUcnVlIHdoZW4gY29tcCBpcyByZW1vdmVkXG4gICAqL1xuICByZW1vdmVTdWJjb21wb25lbnQobmFtZU9yQ29tcCkge1xuICAgIGxldCByZW1vdmVkID0gdGhpcy5fcmVtb3ZlT2JqZWN0KENPTVBPTkVOVF9JTkRFWCwgJ19jb21wb25lbnRzJywgbmFtZU9yQ29tcCk7XG4gICAgaWYgKHJlbW92ZWQpIHtcbiAgICAgIHRoaXMuX2h5ZHJhdGVkQ29tcG9uZW50Q291bnQtLTtcbiAgICB9XG4gICAgcmV0dXJuIHJlbW92ZWQ7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgY29tcG9uZW50cyBvciAoaWYgZ2l2ZW4pIGFsbCBjb21wb25lbnRzIGJ5IGEgcGFydGljdWxhclxuICAgKiBuYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZz19IG5hbWUgICAgICAgICAgICBMb3dlcmNhc2UgY29tcG9uZW50IG5hbWVcbiAgICovXG4gIHJlbW92ZUFsbFN1YmNvbXBvbmVudHMobmFtZSkge1xuICAgIGxldCByZW1vdmVkID0gdGhpcy5fcmVtb3ZlQWxsT2JqZWN0cyhDT01QT05FTlRfSU5ERVgsICdfY29tcG9uZW50cycsIG5hbWUpO1xuICAgIHRoaXMuX2h5ZHJhdGVkQ29tcG9uZW50Q291bnQgPSAwO1xuICAgIHJldHVybiByZW1vdmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYW4ge0BsaW5rIElDQUwuUHJvcGVydHl9IHRvIHRoZSBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UHJvcGVydHl9IHByb3BlcnR5ICAgICAgVGhlIHByb3BlcnR5IHRvIGFkZFxuICAgKiBAcmV0dXJuIHtQcm9wZXJ0eX0gICAgICAgICAgICAgIFRoZSBwYXNzZWQgaW4gcHJvcGVydHlcbiAgICovXG4gIGFkZFByb3BlcnR5KHByb3BlcnR5KSB7XG4gICAgaWYgKCEocHJvcGVydHkgaW5zdGFuY2VvZiBQcm9wZXJ0eSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ211c3QgYmUgaW5zdGFuY2Ugb2YgSUNBTC5Qcm9wZXJ0eScpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fcHJvcGVydGllcykge1xuICAgICAgdGhpcy5fcHJvcGVydGllcyA9IFtdO1xuICAgICAgdGhpcy5faHlkcmF0ZWRQcm9wZXJ0eUNvdW50ID0gMDtcbiAgICB9XG5cbiAgICBpZiAocHJvcGVydHkucGFyZW50KSB7XG4gICAgICBwcm9wZXJ0eS5wYXJlbnQucmVtb3ZlUHJvcGVydHkocHJvcGVydHkpO1xuICAgIH1cblxuICAgIGxldCBpZHggPSB0aGlzLmpDYWxbUFJPUEVSVFlfSU5ERVhdLnB1c2gocHJvcGVydHkuakNhbCk7XG4gICAgdGhpcy5fcHJvcGVydGllc1tpZHggLSAxXSA9IHByb3BlcnR5O1xuICAgIHRoaXMuX2h5ZHJhdGVkUHJvcGVydHlDb3VudCsrO1xuICAgIHByb3BlcnR5LnBhcmVudCA9IHRoaXM7XG4gICAgcmV0dXJuIHByb3BlcnR5O1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciBtZXRob2QgdG8gYWRkIGEgcHJvcGVydHkgd2l0aCBhIHZhbHVlIHRvIHRoZSBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSAgICAgICAgICAgICAgIG5hbWUgICAgICAgICBQcm9wZXJ0eSBuYW1lIHRvIGFkZFxuICAgKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ8T2JqZWN0fSB2YWx1ZSAgICAgICAgUHJvcGVydHkgdmFsdWVcbiAgICogQHJldHVybiB7UHJvcGVydHl9ICAgICAgICAgICAgICAgICAgICBUaGUgY3JlYXRlZCBwcm9wZXJ0eVxuICAgKi9cbiAgYWRkUHJvcGVydHlXaXRoVmFsdWUobmFtZSwgdmFsdWUpIHtcbiAgICBsZXQgcHJvcCA9IG5ldyBQcm9wZXJ0eShuYW1lKTtcbiAgICBwcm9wLnNldFZhbHVlKHZhbHVlKTtcblxuICAgIHRoaXMuYWRkUHJvcGVydHkocHJvcCk7XG5cbiAgICByZXR1cm4gcHJvcDtcbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgbWV0aG9kIHRoYXQgd2lsbCB1cGRhdGUgb3IgY3JlYXRlIGEgcHJvcGVydHkgb2YgdGhlIGdpdmVuIG5hbWVcbiAgICogYW5kIHNldHMgaXRzIHZhbHVlLiBJZiBtdWx0aXBsZSBwcm9wZXJ0aWVzIHdpdGggdGhlIGdpdmVuIG5hbWUgZXhpc3QsXG4gICAqIG9ubHkgdGhlIGZpcnN0IGlzIHVwZGF0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSAgICAgICAgICAgICAgIG5hbWUgICAgICAgICBQcm9wZXJ0eSBuYW1lIHRvIHVwZGF0ZVxuICAgKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ8T2JqZWN0fSB2YWx1ZSAgICAgICAgUHJvcGVydHkgdmFsdWVcbiAgICogQHJldHVybiB7UHJvcGVydHl9ICAgICAgICAgICAgICAgICAgICBUaGUgY3JlYXRlZCBwcm9wZXJ0eVxuICAgKi9cbiAgdXBkYXRlUHJvcGVydHlXaXRoVmFsdWUobmFtZSwgdmFsdWUpIHtcbiAgICBsZXQgcHJvcCA9IHRoaXMuZ2V0Rmlyc3RQcm9wZXJ0eShuYW1lKTtcblxuICAgIGlmIChwcm9wKSB7XG4gICAgICBwcm9wLnNldFZhbHVlKHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvcCA9IHRoaXMuYWRkUHJvcGVydHlXaXRoVmFsdWUobmFtZSwgdmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9wO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBzaW5nbGUgcHJvcGVydHkgYnkgbmFtZSBvciB0aGUgaW5zdGFuY2Ugb2YgdGhlIHNwZWNpZmljXG4gICAqIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xQcm9wZXJ0eX0gbmFtZU9yUHJvcCAgICAgUHJvcGVydHkgbmFtZSBvciBpbnN0YW5jZSB0byByZW1vdmVcbiAgICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgICAgICAgICAgICAgICAgICAgICAgVHJ1ZSwgd2hlbiBkZWxldGVkXG4gICAqL1xuICByZW1vdmVQcm9wZXJ0eShuYW1lT3JQcm9wKSB7XG4gICAgbGV0IHJlbW92ZWQgPSB0aGlzLl9yZW1vdmVPYmplY3QoUFJPUEVSVFlfSU5ERVgsICdfcHJvcGVydGllcycsIG5hbWVPclByb3ApO1xuICAgIGlmIChyZW1vdmVkKSB7XG4gICAgICB0aGlzLl9oeWRyYXRlZFByb3BlcnR5Q291bnQtLTtcbiAgICB9XG4gICAgcmV0dXJuIHJlbW92ZWQ7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgcHJvcGVydGllcyBhc3NvY2lhdGVkIHdpdGggdGhpcyBjb21wb25lbnQsIG9wdGlvbmFsbHlcbiAgICogZmlsdGVyZWQgYnkgbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmc9fSBuYW1lICAgICAgICBMb3dlcmNhc2UgcHJvcGVydHkgbmFtZVxuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgICAgIFRydWUsIHdoZW4gZGVsZXRlZFxuICAgKi9cbiAgcmVtb3ZlQWxsUHJvcGVydGllcyhuYW1lKSB7XG4gICAgbGV0IHJlbW92ZWQgPSB0aGlzLl9yZW1vdmVBbGxPYmplY3RzKFBST1BFUlRZX0lOREVYLCAnX3Byb3BlcnRpZXMnLCBuYW1lKTtcbiAgICB0aGlzLl9oeWRyYXRlZFByb3BlcnR5Q291bnQgPSAwO1xuICAgIHJldHVybiByZW1vdmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIE9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGNvbXBvbmVudC4gVGhlIHJldHVybmVkIG9iamVjdFxuICAgKiBpcyBhIGxpdmUgakNhbCBvYmplY3QgYW5kIHNob3VsZCBiZSBjbG9uZWQgaWYgbW9kaWZpZWQuXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy5qQ2FsO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBjb21wb25lbnQuXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiBzdHJpbmdpZnkuY29tcG9uZW50KFxuICAgICAgdGhpcy5qQ2FsLCB0aGlzLl9kZXNpZ25TZXRcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIGEgdGltZSB6b25lIGRlZmluaXRpb24gZnJvbSB0aGUgY29tcG9uZW50IHRyZWUsIGlmIGFueSBpcyBwcmVzZW50LlxuICAgKiBJZiB0aGUgdHJlZSBjb250YWlucyBubyB0aW1lIHpvbmUgZGVmaW5pdGlvbnMgb3IgdGhlIFRaSUQgY2Fubm90IGJlXG4gICAqIG1hdGNoZWQsIHJldHVybnMgbnVsbC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR6aWQgICAgIFRoZSBJRCBvZiB0aGUgdGltZSB6b25lIHRvIHJldHJpZXZlXG4gICAqIEByZXR1cm4ge1RpbWV6b25lfSAgVGhlIHRpbWUgem9uZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBJRCwgb3IgbnVsbFxuICAgKi9cbiAgZ2V0VGltZVpvbmVCeUlEKHR6aWQpIHtcbiAgICAvLyBWVElNRVpPTkUgY29tcG9uZW50cyBjYW4gb25seSBhcHBlYXIgYXMgYSBjaGlsZCBvZiB0aGUgVkNBTEVOREFSXG4gICAgLy8gY29tcG9uZW50OyB3YWxrIHRoZSB0cmVlIGlmIHdlJ3JlIG5vdCB0aGUgcm9vdC5cbiAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXRUaW1lWm9uZUJ5SUQodHppZCk7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gdGltZSB6b25lIGNhY2hlLCB3ZSBhcmUgcHJvYmFibHkgcGFyc2luZyBhbiBpbmNvbXBsZXRlXG4gICAgLy8gZmlsZSBhbmQgd2lsbCBoYXZlIG5vIHRpbWUgem9uZSBkZWZpbml0aW9ucy5cbiAgICBpZiAoIXRoaXMuX3RpbWV6b25lQ2FjaGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl90aW1lem9uZUNhY2hlLmhhcyh0emlkKSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3RpbWV6b25lQ2FjaGUuZ2V0KHR6aWQpO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSB0aW1lIHpvbmUgaXMgbm90IGFscmVhZHkgY2FjaGVkLCBoeWRyYXRlIGl0IGZyb20gdGhlXG4gICAgLy8gc3ViY29tcG9uZW50cy5cbiAgICBjb25zdCB6b25lcyA9IHRoaXMuZ2V0QWxsU3ViY29tcG9uZW50cygndnRpbWV6b25lJyk7XG4gICAgZm9yIChjb25zdCB6b25lIG9mIHpvbmVzKSB7XG4gICAgICBpZiAoem9uZS5nZXRGaXJzdFByb3BlcnR5KCd0emlkJykuZ2V0Rmlyc3RWYWx1ZSgpID09PSB0emlkKSB7XG4gICAgICAgIGNvbnN0IGh5ZHJhdGVkWm9uZSA9IG5ldyBUaW1lem9uZSh7XG4gICAgICAgICAgY29tcG9uZW50OiB6b25lLFxuICAgICAgICAgIHR6aWQ6IHR6aWQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuX3RpbWV6b25lQ2FjaGUuc2V0KHR6aWQsIGh5ZHJhdGVkWm9uZSk7XG5cbiAgICAgICAgcmV0dXJuIGh5ZHJhdGVkWm9uZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQZXIgdGhlIHN0YW5kYXJkLCB3ZSBzaG91bGQgYWx3YXlzIGhhdmUgYSB0aW1lIHpvbmUgZGVmaW5lZCBpbiBhIGZpbGVcbiAgICAvLyBmb3IgYW55IHJlZmVyZW5jZWQgVFpJRCwgYnV0IGRvbid0IGJsb3cgdXAgaWYgdGhlIGZpbGUgaXMgaW52YWxpZC5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG4vKipcbiAqIFByaW1hcnkgY2xhc3MgZm9yIGV4cGFuZGluZyByZWN1cnJpbmcgcnVsZXMuICBDYW4gdGFrZSBtdWx0aXBsZSBycnVsZXMsIHJkYXRlcywgZXhkYXRlKHMpIGFuZFxuICogaXRlcmF0ZSAoaW4gb3JkZXIpIG92ZXIgZWFjaCBuZXh0IG9jY3VycmVuY2UuXG4gKlxuICogT25jZSBpbml0aWFsaXplZCB0aGlzIGNsYXNzIGNhbiBhbHNvIGJlIHNlcmlhbGl6ZWQgc2F2ZWQgYW5kIGNvbnRpbnVlIGl0ZXJhdGlvbiBmcm9tIHRoZSBsYXN0XG4gKiBwb2ludC5cbiAqXG4gKiBOT1RFOiBpdCBpcyBpbnRlbmRlZCB0aGF0IHRoaXMgY2xhc3MgaXMgdG8gYmUgdXNlZCB3aXRoIHtAbGluayBJQ0FMLkV2ZW50fSB3aGljaCBoYW5kbGVzIHJlY3VycmVuY2VcbiAqIGV4Y2VwdGlvbnMuXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIGFzc3VtaW5nIGV2ZW50IGlzIGEgcGFyc2VkIGljYWwgY29tcG9uZW50XG4gKiB2YXIgZXZlbnQ7XG4gKlxuICogdmFyIGV4cGFuZCA9IG5ldyBJQ0FMLlJlY3VyRXhwYW5zaW9uKHtcbiAqICAgY29tcG9uZW50OiBldmVudCxcbiAqICAgZHRzdGFydDogZXZlbnQuZ2V0Rmlyc3RQcm9wZXJ0eVZhbHVlKCdkdHN0YXJ0JylcbiAqIH0pO1xuICpcbiAqIC8vIHJlbWVtYmVyIHRoZXJlIGFyZSBpbmZpbml0ZSBydWxlcyBzbyBpdCBpcyBhIGdvb2QgaWRlYSB0byBsaW1pdCB0aGUgc2NvcGUgb2YgdGhlIGl0ZXJhdGlvbnNcbiAqIC8vIHRoZW4gcmVzdW1lIGxhdGVyIG9uLlxuICpcbiAqIC8vIG5leHQgaXMgYWx3YXlzIGFuIElDQUwuVGltZSBvciBudWxsXG4gKiB2YXIgbmV4dDtcbiAqXG4gKiB3aGlsZSAoc29tZUNvbmRpdGlvbiAmJiAobmV4dCA9IGV4cGFuZC5uZXh0KCkpKSB7XG4gKiAgIC8vIGRvIHNvbWV0aGluZyB3aXRoIG5leHRcbiAqIH1cbiAqXG4gKiAvLyBzYXZlIGluc3RhbmNlIGZvciBsYXRlclxuICogdmFyIGpzb24gPSBKU09OLnN0cmluZ2lmeShleHBhbmQpO1xuICpcbiAqIC8vLi4uXG4gKlxuICogLy8gTk9URTogaWYgdGhlIGNvbXBvbmVudCdzIHByb3BlcnRpZXMgaGF2ZSBjaGFuZ2VkIHlvdSB3aWxsIG5lZWQgdG8gcmVidWlsZCB0aGUgY2xhc3MgYW5kIHN0YXJ0XG4gKiAvLyBvdmVyLiBUaGlzIG9ubHkgd29ya3Mgd2hlbiB0aGUgY29tcG9uZW50J3MgcmVjdXJyZW5jZSBpbmZvIGlzIHRoZSBzYW1lLlxuICogdmFyIGV4cGFuZCA9IG5ldyBJQ0FMLlJlY3VyRXhwYW5zaW9uKEpTT04ucGFyc2UoanNvbikpO1xuICpcbiAqIEBtZW1iZXJvZiBJQ0FMXG4gKi9cbmNsYXNzIFJlY3VyRXhwYW5zaW9uIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5SZWN1ckV4cGFuc2lvbiBpbnN0YW5jZS5cbiAgICpcbiAgICogVGhlIG9wdGlvbnMgb2JqZWN0IGNhbiBiZSBmaWxsZWQgd2l0aCB0aGUgc3BlY2lmaWVkIGluaXRpYWwgdmFsdWVzLiBJdCBjYW4gYWxzbyBjb250YWluXG4gICAqIGFkZGl0aW9uYWwgbWVtYmVycywgYXMgYSByZXN1bHQgb2Ygc2VyaWFsaXppbmcgYSBwcmV2aW91cyBleHBhbnNpb24gc3RhdGUsIGFzIHNob3duIGluIHRoZVxuICAgKiBleGFtcGxlLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiAgICAgICAgUmVjdXJyZW5jZSBleHBhbnNpb24gb3B0aW9uc1xuICAgKiBAcGFyYW0ge1RpbWV9IG9wdGlvbnMuZHRzdGFydFxuICAgKiAgICAgICAgU3RhcnQgdGltZSBvZiB0aGUgZXZlbnRcbiAgICogQHBhcmFtIHtDb21wb25lbnQ9fSBvcHRpb25zLmNvbXBvbmVudFxuICAgKiAgICAgICAgQ29tcG9uZW50IGZvciBleHBhbnNpb24sIHJlcXVpcmVkIGlmIG5vdCByZXN1bWluZy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLnJ1bGVEYXRlcyA9IFtdO1xuICAgIHRoaXMuZXhEYXRlcyA9IFtdO1xuICAgIHRoaXMuZnJvbURhdGEob3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogVHJ1ZSB3aGVuIGl0ZXJhdGlvbiBpcyBmdWxseSBjb21wbGV0ZWQuXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cbiAgY29tcGxldGUgPSBmYWxzZTtcblxuICAvKipcbiAgICogQXJyYXkgb2YgcnJ1bGUgaXRlcmF0b3JzLlxuICAgKlxuICAgKiBAdHlwZSB7UmVjdXJJdGVyYXRvcltdfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcnVsZUl0ZXJhdG9ycyA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEFycmF5IG9mIHJkYXRlIGluc3RhbmNlcy5cbiAgICpcbiAgICogQHR5cGUge1RpbWVbXX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJ1bGVEYXRlcyA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEFycmF5IG9mIGV4ZGF0ZSBpbnN0YW5jZXMuXG4gICAqXG4gICAqIEB0eXBlIHtUaW1lW119XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBleERhdGVzID0gbnVsbDtcblxuICAvKipcbiAgICogQ3VycmVudCBwb3NpdGlvbiBpbiBydWxlRGF0ZXMgYXJyYXkuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBydWxlRGF0ZUluYyA9IDA7XG5cbiAgLyoqXG4gICAqIEN1cnJlbnQgcG9zaXRpb24gaW4gZXhEYXRlcyBhcnJheVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZXhEYXRlSW5jID0gMDtcblxuICAvKipcbiAgICogQ3VycmVudCBuZWdhdGl2ZSBkYXRlLlxuICAgKlxuICAgKiBAdHlwZSB7VGltZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGV4RGF0ZSA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEN1cnJlbnQgYWRkaXRpb25hbCBkYXRlLlxuICAgKlxuICAgKiBAdHlwZSB7VGltZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJ1bGVEYXRlID0gbnVsbDtcblxuICAvKipcbiAgICogU3RhcnQgZGF0ZSBvZiByZWN1cnJpbmcgcnVsZXMuXG4gICAqXG4gICAqIEB0eXBlIHtUaW1lfVxuICAgKi9cbiAgZHRzdGFydCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIExhc3QgZXhwYW5kZWQgdGltZVxuICAgKlxuICAgKiBAdHlwZSB7VGltZX1cbiAgICovXG4gIGxhc3QgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSByZWN1cnJlbmNlIGV4cGFuc2lvbiBmcm9tIHRoZSBkYXRhIG9iamVjdC4gVGhlIG9wdGlvbnNcbiAgICogb2JqZWN0IG1heSBhbHNvIGNvbnRhaW4gYWRkaXRpb25hbCBtZW1iZXJzLCBzZWUgdGhlXG4gICAqIHtAbGluayBJQ0FMLlJlY3VyRXhwYW5zaW9uIGNvbnN0cnVjdG9yfSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiAgICAgICAgUmVjdXJyZW5jZSBleHBhbnNpb24gb3B0aW9uc1xuICAgKiBAcGFyYW0ge1RpbWV9IG9wdGlvbnMuZHRzdGFydFxuICAgKiAgICAgICAgU3RhcnQgdGltZSBvZiB0aGUgZXZlbnRcbiAgICogQHBhcmFtIHtDb21wb25lbnQ9fSBvcHRpb25zLmNvbXBvbmVudFxuICAgKiAgICAgICAgQ29tcG9uZW50IGZvciBleHBhbnNpb24sIHJlcXVpcmVkIGlmIG5vdCByZXN1bWluZy5cbiAgICovXG4gIGZyb21EYXRhKG9wdGlvbnMpIHtcbiAgICBsZXQgc3RhcnQgPSBmb3JtYXRDbGFzc1R5cGUob3B0aW9ucy5kdHN0YXJ0LCBUaW1lKTtcblxuICAgIGlmICghc3RhcnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignLmR0c3RhcnQgKElDQUwuVGltZSkgbXVzdCBiZSBnaXZlbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmR0c3RhcnQgPSBzdGFydDtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5jb21wb25lbnQpIHtcbiAgICAgIHRoaXMuX2luaXQob3B0aW9ucy5jb21wb25lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxhc3QgPSBmb3JtYXRDbGFzc1R5cGUob3B0aW9ucy5sYXN0LCBUaW1lKSB8fCBzdGFydC5jbG9uZSgpO1xuXG4gICAgICBpZiAoIW9wdGlvbnMucnVsZUl0ZXJhdG9ycykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJy5ydWxlSXRlcmF0b3JzIG9yIC5jb21wb25lbnQgbXVzdCBiZSBnaXZlbicpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnJ1bGVJdGVyYXRvcnMgPSBvcHRpb25zLnJ1bGVJdGVyYXRvcnMubWFwKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGZvcm1hdENsYXNzVHlwZShpdGVtLCBSZWN1ckl0ZXJhdG9yKTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnJ1bGVEYXRlSW5jID0gb3B0aW9ucy5ydWxlRGF0ZUluYztcbiAgICAgIHRoaXMuZXhEYXRlSW5jID0gb3B0aW9ucy5leERhdGVJbmM7XG5cbiAgICAgIGlmIChvcHRpb25zLnJ1bGVEYXRlcykge1xuICAgICAgICB0aGlzLnJ1bGVEYXRlcyA9IG9wdGlvbnMucnVsZURhdGVzLm1hcChpdGVtID0+IGZvcm1hdENsYXNzVHlwZShpdGVtLCBUaW1lKSk7XG4gICAgICAgIHRoaXMucnVsZURhdGUgPSB0aGlzLnJ1bGVEYXRlc1t0aGlzLnJ1bGVEYXRlSW5jXTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMuZXhEYXRlcykge1xuICAgICAgICB0aGlzLmV4RGF0ZXMgPSBvcHRpb25zLmV4RGF0ZXMubWFwKGl0ZW0gPT4gZm9ybWF0Q2xhc3NUeXBlKGl0ZW0sIFRpbWUpKTtcbiAgICAgICAgdGhpcy5leERhdGUgPSB0aGlzLmV4RGF0ZXNbdGhpcy5leERhdGVJbmNdO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mKG9wdGlvbnMuY29tcGxldGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLmNvbXBsZXRlID0gb3B0aW9ucy5jb21wbGV0ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29tcGFyZSB0d28gSUNBTC5UaW1lIG9iamVjdHMuICBXaGVuIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGlzIGEgREFURSBhbmQgdGhlIGZpcnN0IHBhcmFtZXRlciBpc1xuICAgKiBEQVRFLVRJTUUsIHN0cmlwIHRoZSB0aW1lIGFuZCBjb21wYXJlIG9ubHkgdGhlIGRheXMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7VGltZX0gYSAgIFRoZSBvbmUgb2JqZWN0IHRvIGNvbXBhcmVcbiAgICogQHBhcmFtIHtUaW1lfSBiICAgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlXG4gICAqL1xuICBfY29tcGFyZV9zcGVjaWFsKGEsIGIpIHtcbiAgICBpZiAoIWEuaXNEYXRlICYmIGIuaXNEYXRlKVxuICAgICAgcmV0dXJuIG5ldyBUaW1lKHsgeWVhcjogYS55ZWFyLCBtb250aDogYS5tb250aCwgZGF5OiBhLmRheSB9KS5jb21wYXJlKGIpO1xuICAgIHJldHVybiBhLmNvbXBhcmUoYik7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgdGhlIG5leHQgb2NjdXJyZW5jZSBpbiB0aGUgc2VyaWVzLlxuICAgKiBAcmV0dXJuIHtUaW1lfVxuICAgKi9cbiAgbmV4dCgpIHtcbiAgICBsZXQgaXRlcjtcbiAgICBsZXQgbmV4dDtcbiAgICBsZXQgY29tcGFyZTtcblxuICAgIGxldCBtYXhUcmllcyA9IDUwMDtcbiAgICBsZXQgY3VycmVudFRyeSA9IDA7XG5cbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgaWYgKGN1cnJlbnRUcnkrKyA+IG1heFRyaWVzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAnbWF4IHRyaWVzIGhhdmUgb2NjdXJyZWQsIHJ1bGUgbWF5IGJlIGltcG9zc2libGUgdG8gZnVsZmlsbC4nXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIG5leHQgPSB0aGlzLnJ1bGVEYXRlO1xuICAgICAgaXRlciA9IHRoaXMuX25leHRSZWN1cnJlbmNlSXRlcih0aGlzLmxhc3QpO1xuXG4gICAgICAvLyBubyBtb3JlIG1hdGNoZXNcbiAgICAgIC8vIGJlY2F1c2Ugd2UgaW5jcmVtZW50IHRoZSBydWxlIGRheSBvciBydWxlXG4gICAgICAvLyBfYWZ0ZXJfIHdlIGNob29zZSBhIHZhbHVlIHRoaXMgc2hvdWxkIGJlXG4gICAgICAvLyB0aGUgb25seSBzcG90IHdoZXJlIHdlIG5lZWQgdG8gd29ycnkgYWJvdXQgdGhlXG4gICAgICAvLyBlbmQgb2YgZXZlbnRzLlxuICAgICAgaWYgKCFuZXh0ICYmICFpdGVyKSB7XG4gICAgICAgIC8vIHRoZXJlIGFyZSBubyBtb3JlIGl0ZXJhdG9ycyBvciByZGF0ZXNcbiAgICAgICAgdGhpcy5jb21wbGV0ZSA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICAvLyBubyBuZXh0IHJ1bGUgZGF5IG9yIHJlY3VycmVuY2UgcnVsZSBpcyBmaXJzdC5cbiAgICAgIGlmICghbmV4dCB8fCAoaXRlciAmJiBuZXh0LmNvbXBhcmUoaXRlci5sYXN0KSA+IDApKSB7XG4gICAgICAgIC8vIG11c3QgYmUgY2xvbmVkLCByZWN1ciB3aWxsIHJldXNlIHRoZSB0aW1lIGVsZW1lbnQuXG4gICAgICAgIG5leHQgPSBpdGVyLmxhc3QuY2xvbmUoKTtcbiAgICAgICAgLy8gbW92ZSB0byBuZXh0IHNvIHdlIGNhbiBjb250aW51ZVxuICAgICAgICBpdGVyLm5leHQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gaWYgdGhlIHJ1bGVEYXRlIGlzIHN0aWxsIG5leHQgaW5jcmVtZW50IGl0LlxuICAgICAgaWYgKHRoaXMucnVsZURhdGUgPT09IG5leHQpIHtcbiAgICAgICAgdGhpcy5fbmV4dFJ1bGVEYXkoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5sYXN0ID0gbmV4dDtcblxuICAgICAgLy8gY2hlY2sgdGhlIG5lZ2F0aXZlIHJ1bGVzXG4gICAgICBpZiAodGhpcy5leERhdGUpIHtcbiAgICAgICAgLy8gRVhEQVRFIGNhbiBiZSBpbiBEQVRFIGZvcm1hdCwgYnV0IERUU1RBUlQgaXMgaW4gREFURS1USU1FIGZvcm1hdFxuICAgICAgICBjb21wYXJlID0gdGhpcy5fY29tcGFyZV9zcGVjaWFsKHRoaXMubGFzdCwgdGhpcy5leERhdGUpO1xuXG4gICAgICAgIGlmIChjb21wYXJlID4gMCkge1xuICAgICAgICAgIHRoaXMuX25leHRFeERheSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgdGhlIGN1cnJlbnQgcnVsZSBpcyBleGNsdWRlZCBza2lwIGl0LlxuICAgICAgICBpZiAoY29tcGFyZSA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX25leHRFeERheSgpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vWFhYOiBUaGUgc3BlYyBzdGF0ZXMgdGhhdCBhZnRlciB3ZSByZXNvbHZlIHRoZSBmaW5hbFxuICAgICAgLy8gICAgIGxpc3Qgb2YgZGF0ZXMgd2UgZXhlY3V0ZSBleGRhdGUgdGhpcyBzZWVtcyBzb21ld2hhdCBjb3VudGVyXG4gICAgICAvLyAgICAgaW50dWl0aXZlIHRvIHdoYXQgSSBoYXZlIHNlZW4gbW9zdCBzZXJ2ZXJzIGRvIHNvIGZvciBub3dcbiAgICAgIC8vICAgICBJIGV4Y2x1ZGUgYmFzZWQgb24gdGhlIG9yaWdpbmFsIGRhdGUgbm90IHRoZSBvbmUgdGhhdCBtYXlcbiAgICAgIC8vICAgICBoYXZlIGJlZW4gbW9kaWZpZWQgYnkgdGhlIGV4Y2VwdGlvbi5cbiAgICAgIHJldHVybiB0aGlzLmxhc3Q7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIG9iamVjdCBpbnRvIGEgc2VyaWFsaXplLWFibGUgZm9ybWF0LiBUaGlzIGZvcm1hdCBjYW4gYmUgcGFzc2VkXG4gICAqIGJhY2sgaW50byB0aGUgZXhwYW5zaW9uIHRvIHJlc3VtZSBpdGVyYXRpb24uXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICBmdW5jdGlvbiB0b0pTT04oaXRlbSkge1xuICAgICAgcmV0dXJuIGl0ZW0udG9KU09OKCk7XG4gICAgfVxuXG4gICAgbGV0IHJlc3VsdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgcmVzdWx0LnJ1bGVJdGVyYXRvcnMgPSB0aGlzLnJ1bGVJdGVyYXRvcnMubWFwKHRvSlNPTik7XG5cbiAgICBpZiAodGhpcy5ydWxlRGF0ZXMpIHtcbiAgICAgIHJlc3VsdC5ydWxlRGF0ZXMgPSB0aGlzLnJ1bGVEYXRlcy5tYXAodG9KU09OKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5leERhdGVzKSB7XG4gICAgICByZXN1bHQuZXhEYXRlcyA9IHRoaXMuZXhEYXRlcy5tYXAodG9KU09OKTtcbiAgICB9XG5cbiAgICByZXN1bHQucnVsZURhdGVJbmMgPSB0aGlzLnJ1bGVEYXRlSW5jO1xuICAgIHJlc3VsdC5leERhdGVJbmMgPSB0aGlzLmV4RGF0ZUluYztcbiAgICByZXN1bHQubGFzdCA9IHRoaXMubGFzdC50b0pTT04oKTtcbiAgICByZXN1bHQuZHRzdGFydCA9IHRoaXMuZHRzdGFydC50b0pTT04oKTtcbiAgICByZXN1bHQuY29tcGxldGUgPSB0aGlzLmNvbXBsZXRlO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IGFsbCBkYXRlcyBmcm9tIHRoZSBwcm9wZXJ0aWVzIGluIHRoZSBnaXZlbiBjb21wb25lbnQuIFRoZVxuICAgKiBwcm9wZXJ0aWVzIHdpbGwgYmUgZmlsdGVyZWQgYnkgdGhlIHByb3BlcnR5IG5hbWUuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fSBjb21wb25lbnQgICAgICAgICAgICAgVGhlIGNvbXBvbmVudCB0byBzZWFyY2ggaW5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5TmFtZSAgICAgICAgICAgICBUaGUgcHJvcGVydHkgbmFtZSB0byBzZWFyY2ggZm9yXG4gICAqIEByZXR1cm4ge1RpbWVbXX0gICAgICAgICAgICAgICAgICAgICAgICAgVGhlIGV4dHJhY3RlZCBkYXRlcy5cbiAgICovXG4gIF9leHRyYWN0RGF0ZXMoY29tcG9uZW50LCBwcm9wZXJ0eU5hbWUpIHtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgbGV0IHByb3BzID0gY29tcG9uZW50LmdldEFsbFByb3BlcnRpZXMocHJvcGVydHlOYW1lKTtcblxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBwcm9wcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgZm9yIChsZXQgcHJvcCBvZiBwcm9wc1tpXS5nZXRWYWx1ZXMoKSkge1xuICAgICAgICBsZXQgaWR4ID0gYmluc2VhcmNoSW5zZXJ0KFxuICAgICAgICAgIHJlc3VsdCxcbiAgICAgICAgICBwcm9wLFxuICAgICAgICAgIChhLCBiKSA9PiBhLmNvbXBhcmUoYilcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBvcmRlcmVkIGluc2VydFxuICAgICAgICByZXN1bHQuc3BsaWNlKGlkeCwgMCwgcHJvcCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSByZWN1cnJlbmNlIGV4cGFuc2lvbi5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtDb21wb25lbnR9IGNvbXBvbmVudCAgICBUaGUgY29tcG9uZW50IHRvIGluaXRpYWxpemUgZnJvbS5cbiAgICovXG4gIF9pbml0KGNvbXBvbmVudCkge1xuICAgIHRoaXMucnVsZUl0ZXJhdG9ycyA9IFtdO1xuXG4gICAgdGhpcy5sYXN0ID0gdGhpcy5kdHN0YXJ0LmNsb25lKCk7XG5cbiAgICAvLyB0byBwcm92aWRlIGFwaSBjb25zaXN0ZW5jeSBub24tcmVjdXJyaW5nXG4gICAgLy8gZXZlbnRzIGNhbiBhbHNvIHVzZSB0aGUgaXRlcmF0b3IgdGhvdWdoIGl0IHdpbGxcbiAgICAvLyBvbmx5IHJldHVybiBhIHNpbmdsZSB0aW1lLlxuICAgIGlmICghY29tcG9uZW50Lmhhc1Byb3BlcnR5KCdyZGF0ZScpICYmXG4gICAgICAgICFjb21wb25lbnQuaGFzUHJvcGVydHkoJ3JydWxlJykgJiZcbiAgICAgICAgIWNvbXBvbmVudC5oYXNQcm9wZXJ0eSgncmVjdXJyZW5jZS1pZCcpKSB7XG4gICAgICB0aGlzLnJ1bGVEYXRlID0gdGhpcy5sYXN0LmNsb25lKCk7XG4gICAgICB0aGlzLmNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoY29tcG9uZW50Lmhhc1Byb3BlcnR5KCdyZGF0ZScpKSB7XG4gICAgICB0aGlzLnJ1bGVEYXRlcyA9IHRoaXMuX2V4dHJhY3REYXRlcyhjb21wb25lbnQsICdyZGF0ZScpO1xuXG4gICAgICAvLyBzcGVjaWFsIGhhY2sgZm9yIGNhc2VzIHdoZXJlIGZpcnN0IHJkYXRlIGlzIHByaW9yXG4gICAgICAvLyB0byB0aGUgc3RhcnQgZGF0ZS4gV2Ugb25seSBjaGVjayBmb3IgdGhlIGZpcnN0IHJkYXRlLlxuICAgICAgLy8gVGhpcyBpcyBtb3N0bHkgZm9yIGdvb2dsZSdzIGNyYXp5IHJlY3VycmluZyBkYXRlIGxvZ2ljXG4gICAgICAvLyAoY29udGFjdHMgYmlydGhkYXlzKS5cbiAgICAgIGlmICgodGhpcy5ydWxlRGF0ZXNbMF0pICYmXG4gICAgICAgICAgKHRoaXMucnVsZURhdGVzWzBdLmNvbXBhcmUodGhpcy5kdHN0YXJ0KSA8IDApKSB7XG5cbiAgICAgICAgdGhpcy5ydWxlRGF0ZUluYyA9IDA7XG4gICAgICAgIHRoaXMubGFzdCA9IHRoaXMucnVsZURhdGVzWzBdLmNsb25lKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJ1bGVEYXRlSW5jID0gYmluc2VhcmNoSW5zZXJ0KFxuICAgICAgICAgIHRoaXMucnVsZURhdGVzLFxuICAgICAgICAgIHRoaXMubGFzdCxcbiAgICAgICAgICAoYSwgYikgPT4gYS5jb21wYXJlKGIpXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucnVsZURhdGUgPSB0aGlzLnJ1bGVEYXRlc1t0aGlzLnJ1bGVEYXRlSW5jXTtcbiAgICB9XG5cbiAgICBpZiAoY29tcG9uZW50Lmhhc1Byb3BlcnR5KCdycnVsZScpKSB7XG4gICAgICBsZXQgcnVsZXMgPSBjb21wb25lbnQuZ2V0QWxsUHJvcGVydGllcygncnJ1bGUnKTtcbiAgICAgIGxldCBpID0gMDtcbiAgICAgIGxldCBsZW4gPSBydWxlcy5sZW5ndGg7XG5cbiAgICAgIGxldCBydWxlO1xuICAgICAgbGV0IGl0ZXI7XG5cbiAgICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgcnVsZSA9IHJ1bGVzW2ldLmdldEZpcnN0VmFsdWUoKTtcbiAgICAgICAgaXRlciA9IHJ1bGUuaXRlcmF0b3IodGhpcy5kdHN0YXJ0KTtcbiAgICAgICAgdGhpcy5ydWxlSXRlcmF0b3JzLnB1c2goaXRlcik7XG5cbiAgICAgICAgLy8gaW5jcmVtZW50IHRvIHRoZSBuZXh0IG9jY3VycmVuY2Ugc28gZnV0dXJlXG4gICAgICAgIC8vIGNhbGxzIHRvIG5leHQgcmV0dXJuIHRpbWVzIGJleW9uZCB0aGUgaW5pdGlhbCBpdGVyYXRpb24uXG4gICAgICAgIC8vIFhYWDogSSBmaW5kIHRoaXMgc3VzcGljaW91cyBtaWdodCBiZSBhIGJ1Zz9cbiAgICAgICAgaXRlci5uZXh0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvbXBvbmVudC5oYXNQcm9wZXJ0eSgnZXhkYXRlJykpIHtcbiAgICAgIHRoaXMuZXhEYXRlcyA9IHRoaXMuX2V4dHJhY3REYXRlcyhjb21wb25lbnQsICdleGRhdGUnKTtcbiAgICAgIC8vIGlmIHdlIGhhdmUgYSAubGFzdCBkYXkgd2UgaW5jcmVtZW50IHRoZSBpbmRleCB0byBiZXlvbmQgaXQuXG4gICAgICAvLyBXaGVuIERUU1RBUlQgaXMgaW4gREFURS1USU1FIGZvcm1hdCwgRVhEQVRFIGlzIGluIERBVEUgZm9ybWF0IGFuZCBFWERBVEUgaXNcbiAgICAgIC8vIHRoZSBkYXRlIG9mIERUU1RBUlQsIF9jb21wYXJlX3NwZWNpYWwgZmluZHMgdGhpcyBvdXQgYW5kIGNvbXBhcmVUaW1lIGZhaWxzLlxuICAgICAgdGhpcy5leERhdGVJbmMgPSBiaW5zZWFyY2hJbnNlcnQoXG4gICAgICAgIHRoaXMuZXhEYXRlcyxcbiAgICAgICAgdGhpcy5sYXN0LFxuICAgICAgICB0aGlzLl9jb21wYXJlX3NwZWNpYWxcbiAgICAgICk7XG5cbiAgICAgIHRoaXMuZXhEYXRlID0gdGhpcy5leERhdGVzW3RoaXMuZXhEYXRlSW5jXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWR2YW5jZSB0byB0aGUgbmV4dCBleGRhdGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9uZXh0RXhEYXkoKSB7XG4gICAgdGhpcy5leERhdGUgPSB0aGlzLmV4RGF0ZXNbKyt0aGlzLmV4RGF0ZUluY107XG4gIH1cblxuICAvKipcbiAgICogQWR2YW5jZSB0byB0aGUgbmV4dCBydWxlIGRhdGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9uZXh0UnVsZURheSgpIHtcbiAgICB0aGlzLnJ1bGVEYXRlID0gdGhpcy5ydWxlRGF0ZXNbKyt0aGlzLnJ1bGVEYXRlSW5jXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIGFuZCByZXR1cm4gdGhlIHJlY3VycmVuY2UgcnVsZSB3aXRoIHRoZSBtb3N0IHJlY2VudCBldmVudCBhbmRcbiAgICogcmV0dXJuIGl0LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJuIHs/UmVjdXJJdGVyYXRvcn0gICAgRm91bmQgaXRlcmF0b3IuXG4gICAqL1xuICBfbmV4dFJlY3VycmVuY2VJdGVyKCkge1xuICAgIGxldCBpdGVycyA9IHRoaXMucnVsZUl0ZXJhdG9ycztcblxuICAgIGlmIChpdGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCBsZW4gPSBpdGVycy5sZW5ndGg7XG4gICAgbGV0IGl0ZXI7XG4gICAgbGV0IGl0ZXJUaW1lO1xuICAgIGxldCBpdGVySWR4ID0gMDtcbiAgICBsZXQgY2hvc2VuSXRlcjtcblxuICAgIC8vIGxvb3AgdGhyb3VnaCBlYWNoIGl0ZXJhdG9yXG4gICAgZm9yICg7IGl0ZXJJZHggPCBsZW47IGl0ZXJJZHgrKykge1xuICAgICAgaXRlciA9IGl0ZXJzW2l0ZXJJZHhdO1xuICAgICAgaXRlclRpbWUgPSBpdGVyLmxhc3Q7XG5cbiAgICAgIC8vIGlmIGl0ZXJhdGlvbiBpcyBjb21wbGV0ZVxuICAgICAgLy8gdGhlbiB3ZSBtdXN0IGV4Y2x1ZGUgaXQgZnJvbVxuICAgICAgLy8gdGhlIHNlYXJjaCBhbmQgcmVtb3ZlIGl0LlxuICAgICAgaWYgKGl0ZXIuY29tcGxldGVkKSB7XG4gICAgICAgIGxlbi0tO1xuICAgICAgICBpZiAoaXRlcklkeCAhPT0gMCkge1xuICAgICAgICAgIGl0ZXJJZHgtLTtcbiAgICAgICAgfVxuICAgICAgICBpdGVycy5zcGxpY2UoaXRlcklkeCwgMSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBmaW5kIHRoZSBtb3N0IHJlY2VudCBwb3NzaWJsZSBjaG9pY2VcbiAgICAgIGlmICghY2hvc2VuSXRlciB8fCBjaG9zZW5JdGVyLmxhc3QuY29tcGFyZShpdGVyVGltZSkgPiAwKSB7XG4gICAgICAgIC8vIHRoYXQgaXRlcmF0b3IgaXMgc2F2ZWRcbiAgICAgICAgY2hvc2VuSXRlciA9IGl0ZXI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gdGhlIGNob3NlbiBpdGVyYXRvciBpcyByZXR1cm5lZCBidXQgbm90IG11dGF0ZWRcbiAgICAvLyB0aGlzIGl0ZXJhdG9yIGNvbnRhaW5zIHRoZSBtb3N0IHJlY2VudCBldmVudC5cbiAgICByZXR1cm4gY2hvc2VuSXRlcjtcbiAgfVxufVxuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG4vKipcbiAqIFRoaXMgbGV0cyB0eXBlc2NyaXB0IHJlc29sdmUgb3VyIGN1c3RvbSB0eXBlcyBpbiB0aGVcbiAqIGdlbmVyYXRlZCBkLnRzIGZpbGVzIChqc2RvYyB0eXBlZGVmcyBhcmUgY29udmVydGVkIHRvIHR5cGVzY3JpcHQgdHlwZXMpLlxuICogSWdub3JlIHByZXZlbnRzIHRoZSB0eXBlZGVmcyBmcm9tIGJlaW5nIGRvY3VtZW50ZWQgbW9yZSB0aGFuIG9uY2UuXG4gKiBAaWdub3JlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS5mcmVxdWVuY3lWYWx1ZXN9IGZyZXF1ZW5jeVZhbHVlc1xuICogSW1wb3J0cyB0aGUgJ2ZyZXF1ZW5jeVZhbHVlcycgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS5vY2N1cnJlbmNlRGV0YWlsc30gb2NjdXJyZW5jZURldGFpbHNcbiAqIEltcG9ydHMgdGhlICdvY2N1cnJlbmNlRGV0YWlscycgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKi9cblxuLyoqXG4gKiBJQ0FMLmpzIGlzIG9yZ2FuaXplZCBpbnRvIG11bHRpcGxlIGxheWVycy4gVGhlIGJvdHRvbSBsYXllciBpcyBhIHJhdyBqQ2FsXG4gKiBvYmplY3QsIGZvbGxvd2VkIGJ5IHRoZSBjb21wb25lbnQvcHJvcGVydHkgbGF5ZXIuIFRoZSBoaWdoZXN0IGxldmVsIGlzIHRoZVxuICogZXZlbnQgcmVwcmVzZW50YXRpb24sIHdoaWNoIHRoaXMgY2xhc3MgaXMgcGFydCBvZi4gU2VlIHRoZVxuICoge0B0dXRvcmlhbCBsYXllcnN9IGd1aWRlIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogQG1lbWJlcm9mIElDQUxcbiAqL1xuY2xhc3MgRXZlbnQge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBJQ0FMLkV2ZW50IGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBvbmVudD19IGNvbXBvbmVudCAgICAgICAgICAgICAgVGhlIElDQUwuQ29tcG9uZW50IHRvIGJhc2UgdGhpcyBldmVudCBvblxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdICAgICAgICAgICAgICAgICAgT3B0aW9ucyBmb3IgdGhpcyBldmVudFxuICAgKiBAcGFyYW0ge0Jvb2xlYW49fSBvcHRpb25zLnN0cmljdEV4Y2VwdGlvbnMgIFdoZW4gdHJ1ZSwgd2lsbCB2ZXJpZnkgZXhjZXB0aW9ucyBhcmUgcmVsYXRlZCBieVxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVpciBVVUlEXG4gICAqIEBwYXJhbSB7QXJyYXk8Q29tcG9uZW50fEV2ZW50Pj19IG9wdGlvbnMuZXhjZXB0aW9uc1xuICAgKiAgICAgICAgICBFeGNlcHRpb25zIHRvIHRoaXMgZXZlbnQsIGVpdGhlciBhcyBjb21wb25lbnRzIG9yIGV2ZW50cy4gSWYgbm90XG4gICAqICAgICAgICAgICAgc3BlY2lmaWVkIGV4Y2VwdGlvbnMgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIHNldCBpbiByZWxhdGlvbiBvZlxuICAgKiAgICAgICAgICAgIGNvbXBvbmVudCdzIHBhcmVudFxuICAgKi9cbiAgY29uc3RydWN0b3IoY29tcG9uZW50LCBvcHRpb25zKSB7XG4gICAgaWYgKCEoY29tcG9uZW50IGluc3RhbmNlb2YgQ29tcG9uZW50KSkge1xuICAgICAgb3B0aW9ucyA9IGNvbXBvbmVudDtcbiAgICAgIGNvbXBvbmVudCA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGNvbXBvbmVudCkge1xuICAgICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY29tcG9uZW50ID0gbmV3IENvbXBvbmVudCgndmV2ZW50Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5fcmFuZ2VFeGNlcHRpb25DYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5leGNlcHRpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLnJhbmdlRXhjZXB0aW9ucyA9IFtdO1xuXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5zdHJpY3RFeGNlcHRpb25zKSB7XG4gICAgICB0aGlzLnN0cmljdEV4Y2VwdGlvbnMgPSBvcHRpb25zLnN0cmljdEV4Y2VwdGlvbnM7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5leGNlcHRpb25zKSB7XG4gICAgICBvcHRpb25zLmV4Y2VwdGlvbnMuZm9yRWFjaCh0aGlzLnJlbGF0ZUV4Y2VwdGlvbiwgdGhpcyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmNvbXBvbmVudC5wYXJlbnQgJiYgIXRoaXMuaXNSZWN1cnJlbmNlRXhjZXB0aW9uKCkpIHtcbiAgICAgIHRoaXMuY29tcG9uZW50LnBhcmVudC5nZXRBbGxTdWJjb21wb25lbnRzKCd2ZXZlbnQnKS5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5oYXNQcm9wZXJ0eSgncmVjdXJyZW5jZS1pZCcpKSB7XG4gICAgICAgICAgdGhpcy5yZWxhdGVFeGNlcHRpb24oZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG4gIH1cblxuXG4gIHN0YXRpYyBUSElTQU5ERlVUVVJFID0gJ1RISVNBTkRGVVRVUkUnO1xuXG4gIC8qKlxuICAgKiBMaXN0IG9mIHJlbGF0ZWQgZXZlbnQgZXhjZXB0aW9ucy5cbiAgICpcbiAgICogQHR5cGUge0V2ZW50W119XG4gICAqL1xuICBleGNlcHRpb25zID0gbnVsbDtcblxuICAvKipcbiAgICogV2hlbiB0cnVlLCB3aWxsIHZlcmlmeSBleGNlcHRpb25zIGFyZSByZWxhdGVkIGJ5IHRoZWlyIFVVSUQuXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cbiAgc3RyaWN0RXhjZXB0aW9ucyA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBSZWxhdGVzIGEgZ2l2ZW4gZXZlbnQgZXhjZXB0aW9uIHRvIHRoaXMgb2JqZWN0LiAgSWYgdGhlIGdpdmVuIGNvbXBvbmVudFxuICAgKiBkb2VzIG5vdCBzaGFyZSB0aGUgVUlEIG9mIHRoaXMgZXZlbnQgaXQgY2Fubm90IGJlIHJlbGF0ZWQgYW5kIHdpbGwgdGhyb3dcbiAgICogYW4gZXhjZXB0aW9uLlxuICAgKlxuICAgKiBJZiB0aGlzIGNvbXBvbmVudCBpcyBhbiBleGNlcHRpb24gaXQgY2Fubm90IGhhdmUgb3RoZXIgZXhjZXB0aW9uc1xuICAgKiByZWxhdGVkIHRvIGl0LlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBvbmVudHxFdmVudH0gb2JqICAgICAgIENvbXBvbmVudCBvciBldmVudFxuICAgKi9cbiAgcmVsYXRlRXhjZXB0aW9uKG9iaikge1xuICAgIGlmICh0aGlzLmlzUmVjdXJyZW5jZUV4Y2VwdGlvbigpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Nhbm5vdCByZWxhdGUgZXhjZXB0aW9uIHRvIGV4Y2VwdGlvbnMnKTtcbiAgICB9XG5cbiAgICBpZiAob2JqIGluc3RhbmNlb2YgQ29tcG9uZW50KSB7XG4gICAgICBvYmogPSBuZXcgRXZlbnQob2JqKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdHJpY3RFeGNlcHRpb25zICYmIG9iai51aWQgIT09IHRoaXMudWlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2F0dGVtcHRlZCB0byByZWxhdGUgdW5yZWxhdGVkIGV4Y2VwdGlvbicpO1xuICAgIH1cblxuICAgIGxldCBpZCA9IG9iai5yZWN1cnJlbmNlSWQudG9TdHJpbmcoKTtcblxuICAgIC8vIHdlIGRvbid0IHNvcnQgb3IgbWFuYWdlIGV4Y2VwdGlvbnMgZGlyZWN0bHlcbiAgICAvLyBoZXJlIHRoZSByZWN1cnJlbmNlIGV4cGFuZGVyIGhhbmRsZXMgdGhhdC5cbiAgICB0aGlzLmV4Y2VwdGlvbnNbaWRdID0gb2JqO1xuXG4gICAgLy8gaW5kZXggUkFOR0U9VEhJU0FOREZVVFVSRSBleGNlcHRpb25zIHNvIHdlIGNhblxuICAgIC8vIGxvb2sgdGhlbSB1cCBsYXRlciBpbiBnZXRPY2N1cnJlbmNlRGV0YWlscy5cbiAgICBpZiAob2JqLm1vZGlmaWVzRnV0dXJlKCkpIHtcbiAgICAgIGxldCBpdGVtID0gW1xuICAgICAgICBvYmoucmVjdXJyZW5jZUlkLnRvVW5peFRpbWUoKSwgaWRcbiAgICAgIF07XG5cbiAgICAgIC8vIHdlIGtlZXAgdGhlbSBzb3J0ZWQgc28gd2UgY2FuIGZpbmQgdGhlIG5lYXJlc3RcbiAgICAgIC8vIHZhbHVlIGxhdGVyIG9uLi4uXG4gICAgICBsZXQgaWR4ID0gYmluc2VhcmNoSW5zZXJ0KFxuICAgICAgICB0aGlzLnJhbmdlRXhjZXB0aW9ucyxcbiAgICAgICAgaXRlbSxcbiAgICAgICAgY29tcGFyZVJhbmdlRXhjZXB0aW9uXG4gICAgICApO1xuXG4gICAgICB0aGlzLnJhbmdlRXhjZXB0aW9ucy5zcGxpY2UoaWR4LCAwLCBpdGVtKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoaXMgcmVjb3JkIGlzIGFuIGV4Y2VwdGlvbiBhbmQgaGFzIHRoZSBSQU5HRT1USElTQU5ERlVUVVJFXG4gICAqIHZhbHVlLlxuICAgKlxuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgVHJ1ZSwgd2hlbiBleGNlcHRpb24gaXMgd2l0aGluIHJhbmdlXG4gICAqL1xuICBtb2RpZmllc0Z1dHVyZSgpIHtcbiAgICBpZiAoIXRoaXMuY29tcG9uZW50Lmhhc1Byb3BlcnR5KCdyZWN1cnJlbmNlLWlkJykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBsZXQgcmFuZ2UgPSB0aGlzLmNvbXBvbmVudC5nZXRGaXJzdFByb3BlcnR5KCdyZWN1cnJlbmNlLWlkJykuZ2V0UGFyYW1ldGVyKCdyYW5nZScpO1xuICAgIHJldHVybiByYW5nZSA9PT0gRXZlbnQuVEhJU0FOREZVVFVSRTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyB0aGUgcmFuZ2UgZXhjZXB0aW9uIG5lYXJlc3QgdG8gdGhlIGdpdmVuIGRhdGUuXG4gICAqXG4gICAqIEBwYXJhbSB7VGltZX0gdGltZSAgIHVzdWFsbHkgYW4gb2NjdXJyZW5jZSB0aW1lIG9mIGFuIGV2ZW50XG4gICAqIEByZXR1cm4gez9FdmVudH0gICAgIHRoZSByZWxhdGVkIGV2ZW50L2V4Y2VwdGlvbiBvciBudWxsXG4gICAqL1xuICBmaW5kUmFuZ2VFeGNlcHRpb24odGltZSkge1xuICAgIGlmICghdGhpcy5yYW5nZUV4Y2VwdGlvbnMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBsZXQgdXRjID0gdGltZS50b1VuaXhUaW1lKCk7XG4gICAgbGV0IGlkeCA9IGJpbnNlYXJjaEluc2VydChcbiAgICAgIHRoaXMucmFuZ2VFeGNlcHRpb25zLFxuICAgICAgW3V0Y10sXG4gICAgICBjb21wYXJlUmFuZ2VFeGNlcHRpb25cbiAgICApO1xuXG4gICAgaWR4IC09IDE7XG5cbiAgICAvLyBvY2N1cnMgYmVmb3JlXG4gICAgaWYgKGlkeCA8IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCByYW5nZUl0ZW0gPSB0aGlzLnJhbmdlRXhjZXB0aW9uc1tpZHhdO1xuXG4gICAgLyogYzggaWdub3JlIG5leHQgNCAqL1xuICAgIGlmICh1dGMgPCByYW5nZUl0ZW1bMF0pIHtcbiAgICAgIC8vIHNhbml0eSBjaGVjayBvbmx5XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmFuZ2VJdGVtWzFdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG9jY3VycmVuY2UgZGV0YWlscyBiYXNlZCBvbiBpdHMgc3RhcnQgdGltZS4gIElmIHRoZVxuICAgKiBvY2N1cnJlbmNlIGhhcyBhbiBleGNlcHRpb24gd2lsbCByZXR1cm4gdGhlIGRldGFpbHMgZm9yIHRoYXQgZXhjZXB0aW9uLlxuICAgKlxuICAgKiBOT1RFOiB0aGlzIG1ldGhvZCBpcyBpbnRlbmQgdG8gYmUgdXNlZCBpbiBjb25qdW5jdGlvblxuICAgKiAgICAgICB3aXRoIHRoZSB7QGxpbmsgSUNBTC5FdmVudCNpdGVyYXRvciBpdGVyYXRvcn0gbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0ge1RpbWV9IG9jY3VycmVuY2UgICAgICAgICAgICAgICB0aW1lIG9jY3VycmVuY2VcbiAgICogQHJldHVybiB7b2NjdXJyZW5jZURldGFpbHN9ICAgICAgICAgICAgSW5mb3JtYXRpb24gYWJvdXQgdGhlIG9jY3VycmVuY2VcbiAgICovXG4gIGdldE9jY3VycmVuY2VEZXRhaWxzKG9jY3VycmVuY2UpIHtcbiAgICBsZXQgaWQgPSBvY2N1cnJlbmNlLnRvU3RyaW5nKCk7XG4gICAgbGV0IHV0Y0lkID0gb2NjdXJyZW5jZS5jb252ZXJ0VG9ab25lKFRpbWV6b25lLnV0Y1RpbWV6b25lKS50b1N0cmluZygpO1xuICAgIGxldCBpdGVtO1xuICAgIGxldCByZXN1bHQgPSB7XG4gICAgICAvL1hYWDogQ2xvbmU/XG4gICAgICByZWN1cnJlbmNlSWQ6IG9jY3VycmVuY2VcbiAgICB9O1xuXG4gICAgaWYgKGlkIGluIHRoaXMuZXhjZXB0aW9ucykge1xuICAgICAgaXRlbSA9IHJlc3VsdC5pdGVtID0gdGhpcy5leGNlcHRpb25zW2lkXTtcbiAgICAgIHJlc3VsdC5zdGFydERhdGUgPSBpdGVtLnN0YXJ0RGF0ZTtcbiAgICAgIHJlc3VsdC5lbmREYXRlID0gaXRlbS5lbmREYXRlO1xuICAgICAgcmVzdWx0Lml0ZW0gPSBpdGVtO1xuICAgIH0gZWxzZSBpZiAodXRjSWQgaW4gdGhpcy5leGNlcHRpb25zKSB7XG4gICAgICBpdGVtID0gdGhpcy5leGNlcHRpb25zW3V0Y0lkXTtcbiAgICAgIHJlc3VsdC5zdGFydERhdGUgPSBpdGVtLnN0YXJ0RGF0ZTtcbiAgICAgIHJlc3VsdC5lbmREYXRlID0gaXRlbS5lbmREYXRlO1xuICAgICAgcmVzdWx0Lml0ZW0gPSBpdGVtO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyByYW5nZSBleGNlcHRpb25zIChSQU5HRT1USElTQU5ERlVUVVJFKSBoYXZlIGFcbiAgICAgIC8vIGxvd2VyIHByaW9yaXR5IHRoZW4gZGlyZWN0IGV4Y2VwdGlvbnMgYnV0XG4gICAgICAvLyBtdXN0IGJlIGFjY291bnRlZCBmb3IgZmlyc3QuIFRoZWlyIGl0ZW0gaXNcbiAgICAgIC8vIGFsd2F5cyB0aGUgZmlyc3QgZXhjZXB0aW9uIHdpdGggdGhlIHJhbmdlIHByb3AuXG4gICAgICBsZXQgcmFuZ2VFeGNlcHRpb25JZCA9IHRoaXMuZmluZFJhbmdlRXhjZXB0aW9uKFxuICAgICAgICBvY2N1cnJlbmNlXG4gICAgICApO1xuICAgICAgbGV0IGVuZDtcblxuICAgICAgaWYgKHJhbmdlRXhjZXB0aW9uSWQpIHtcbiAgICAgICAgbGV0IGV4Y2VwdGlvbiA9IHRoaXMuZXhjZXB0aW9uc1tyYW5nZUV4Y2VwdGlvbklkXTtcblxuICAgICAgICAvLyByYW5nZSBleGNlcHRpb24gbXVzdCBtb2RpZnkgc3RhbmRhcmQgdGltZVxuICAgICAgICAvLyBieSB0aGUgZGlmZmVyZW5jZSAoaWYgYW55KSBpbiBzdGFydC9lbmQgdGltZXMuXG4gICAgICAgIHJlc3VsdC5pdGVtID0gZXhjZXB0aW9uO1xuXG4gICAgICAgIGxldCBzdGFydERpZmYgPSB0aGlzLl9yYW5nZUV4Y2VwdGlvbkNhY2hlW3JhbmdlRXhjZXB0aW9uSWRdO1xuXG4gICAgICAgIGlmICghc3RhcnREaWZmKSB7XG4gICAgICAgICAgbGV0IG9yaWdpbmFsID0gZXhjZXB0aW9uLnJlY3VycmVuY2VJZC5jbG9uZSgpO1xuICAgICAgICAgIGxldCBuZXdTdGFydCA9IGV4Y2VwdGlvbi5zdGFydERhdGUuY2xvbmUoKTtcblxuICAgICAgICAgIC8vIHpvbmVzIG11c3QgYmUgc2FtZSBvdGhlcndpc2Ugc3VidHJhY3QgbWF5IGJlIGluY29ycmVjdC5cbiAgICAgICAgICBvcmlnaW5hbC56b25lID0gbmV3U3RhcnQuem9uZTtcbiAgICAgICAgICBzdGFydERpZmYgPSBuZXdTdGFydC5zdWJ0cmFjdERhdGUob3JpZ2luYWwpO1xuXG4gICAgICAgICAgdGhpcy5fcmFuZ2VFeGNlcHRpb25DYWNoZVtyYW5nZUV4Y2VwdGlvbklkXSA9IHN0YXJ0RGlmZjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzdGFydCA9IG9jY3VycmVuY2UuY2xvbmUoKTtcbiAgICAgICAgc3RhcnQuem9uZSA9IGV4Y2VwdGlvbi5zdGFydERhdGUuem9uZTtcbiAgICAgICAgc3RhcnQuYWRkRHVyYXRpb24oc3RhcnREaWZmKTtcblxuICAgICAgICBlbmQgPSBzdGFydC5jbG9uZSgpO1xuICAgICAgICBlbmQuYWRkRHVyYXRpb24oZXhjZXB0aW9uLmR1cmF0aW9uKTtcblxuICAgICAgICByZXN1bHQuc3RhcnREYXRlID0gc3RhcnQ7XG4gICAgICAgIHJlc3VsdC5lbmREYXRlID0gZW5kO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbm8gcmFuZ2UgZXhjZXB0aW9uIHN0YW5kYXJkIGV4cGFuc2lvblxuICAgICAgICBlbmQgPSBvY2N1cnJlbmNlLmNsb25lKCk7XG4gICAgICAgIGVuZC5hZGREdXJhdGlvbih0aGlzLmR1cmF0aW9uKTtcblxuICAgICAgICByZXN1bHQuZW5kRGF0ZSA9IGVuZDtcbiAgICAgICAgcmVzdWx0LnN0YXJ0RGF0ZSA9IG9jY3VycmVuY2U7XG4gICAgICAgIHJlc3VsdC5pdGVtID0gdGhpcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkcyBhIHJlY3VyIGV4cGFuc2lvbiBpbnN0YW5jZSBmb3IgYSBzcGVjaWZpYyBwb2ludCBpbiB0aW1lIChkZWZhdWx0c1xuICAgKiB0byBzdGFydERhdGUpLlxuICAgKlxuICAgKiBAcGFyYW0ge1RpbWU9fSBzdGFydFRpbWUgICAgIFN0YXJ0aW5nIHBvaW50IGZvciBleHBhbnNpb25cbiAgICogQHJldHVybiB7UmVjdXJFeHBhbnNpb259ICAgIEV4cGFuc2lvbiBvYmplY3RcbiAgICovXG4gIGl0ZXJhdG9yKHN0YXJ0VGltZSkge1xuICAgIHJldHVybiBuZXcgUmVjdXJFeHBhbnNpb24oe1xuICAgICAgY29tcG9uZW50OiB0aGlzLmNvbXBvbmVudCxcbiAgICAgIGR0c3RhcnQ6IHN0YXJ0VGltZSB8fCB0aGlzLnN0YXJ0RGF0ZVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgZXZlbnQgaXMgcmVjdXJyaW5nXG4gICAqXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgICBUcnVlLCBpZiBldmVudCBpcyByZWN1cnJpbmdcbiAgICovXG4gIGlzUmVjdXJyaW5nKCkge1xuICAgIGxldCBjb21wID0gdGhpcy5jb21wb25lbnQ7XG4gICAgcmV0dXJuIGNvbXAuaGFzUHJvcGVydHkoJ3JydWxlJykgfHwgY29tcC5oYXNQcm9wZXJ0eSgncmRhdGUnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIGV2ZW50IGRlc2NyaWJlcyBhIHJlY3VycmVuY2UgZXhjZXB0aW9uLiBTZWVcbiAgICoge0B0dXRvcmlhbCB0ZXJtaW5vbG9neX0gZm9yIGRldGFpbHMuXG4gICAqXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59ICAgIFRydWUsIGlmIHRoZSBldmVudCBkZXNjcmliZXMgYSByZWN1cnJlbmNlIGV4Y2VwdGlvblxuICAgKi9cbiAgaXNSZWN1cnJlbmNlRXhjZXB0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudC5oYXNQcm9wZXJ0eSgncmVjdXJyZW5jZS1pZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHR5cGVzIG9mIHJlY3VycmVuY2VzIHRoaXMgZXZlbnQgbWF5IGhhdmUuXG4gICAqXG4gICAqIFJldHVybmVkIGFzIGFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcG9zc2libGUga2V5czpcbiAgICpcbiAgICogICAgLSBZRUFSTFlcbiAgICogICAgLSBNT05USExZXG4gICAqICAgIC0gV0VFS0xZXG4gICAqICAgIC0gREFJTFlcbiAgICogICAgLSBNSU5VVEVMWVxuICAgKiAgICAtIFNFQ09ORExZXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdC48ZnJlcXVlbmN5VmFsdWVzLCBCb29sZWFuPn1cbiAgICogICAgICAgICAgT2JqZWN0IG9mIHJlY3VycmVuY2UgZmxhZ3NcbiAgICovXG4gIGdldFJlY3VycmVuY2VUeXBlcygpIHtcbiAgICBsZXQgcnVsZXMgPSB0aGlzLmNvbXBvbmVudC5nZXRBbGxQcm9wZXJ0aWVzKCdycnVsZScpO1xuICAgIGxldCBpID0gMDtcbiAgICBsZXQgbGVuID0gcnVsZXMubGVuZ3RoO1xuICAgIGxldCByZXN1bHQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgbGV0IHZhbHVlID0gcnVsZXNbaV0uZ2V0Rmlyc3RWYWx1ZSgpO1xuICAgICAgcmVzdWx0W3ZhbHVlLmZyZXFdID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSB1aWQgb2YgdGhpcyBldmVudFxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IHVpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZmlyc3RQcm9wKCd1aWQnKTtcbiAgfVxuXG4gIHNldCB1aWQodmFsdWUpIHtcbiAgICB0aGlzLl9zZXRQcm9wKCd1aWQnLCB2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHN0YXJ0IGRhdGVcbiAgICogQHR5cGUge1RpbWV9XG4gICAqL1xuICBnZXQgc3RhcnREYXRlKCkge1xuICAgIHJldHVybiB0aGlzLl9maXJzdFByb3AoJ2R0c3RhcnQnKTtcbiAgfVxuXG4gIHNldCBzdGFydERhdGUodmFsdWUpIHtcbiAgICB0aGlzLl9zZXRUaW1lKCdkdHN0YXJ0JywgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBlbmQgZGF0ZS4gVGhpcyBjYW4gYmUgdGhlIHJlc3VsdCBkaXJlY3RseSBmcm9tIHRoZSBwcm9wZXJ0eSwgb3IgdGhlXG4gICAqIGVuZCBkYXRlIGNhbGN1bGF0ZWQgZnJvbSBzdGFydCBkYXRlIGFuZCBkdXJhdGlvbi4gU2V0dGluZyB0aGUgcHJvcGVydHlcbiAgICogd2lsbCByZW1vdmUgYW55IGR1cmF0aW9uIHByb3BlcnRpZXMuXG4gICAqIEB0eXBlIHtUaW1lfVxuICAgKi9cbiAgZ2V0IGVuZERhdGUoKSB7XG4gICAgbGV0IGVuZERhdGUgPSB0aGlzLl9maXJzdFByb3AoJ2R0ZW5kJyk7XG4gICAgaWYgKCFlbmREYXRlKSB7XG4gICAgICAgIGxldCBkdXJhdGlvbiA9IHRoaXMuX2ZpcnN0UHJvcCgnZHVyYXRpb24nKTtcbiAgICAgICAgZW5kRGF0ZSA9IHRoaXMuc3RhcnREYXRlLmNsb25lKCk7XG4gICAgICAgIGlmIChkdXJhdGlvbikge1xuICAgICAgICAgICAgZW5kRGF0ZS5hZGREdXJhdGlvbihkdXJhdGlvbik7XG4gICAgICAgIH0gZWxzZSBpZiAoZW5kRGF0ZS5pc0RhdGUpIHtcbiAgICAgICAgICAgIGVuZERhdGUuZGF5ICs9IDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVuZERhdGU7XG4gIH1cblxuICBzZXQgZW5kRGF0ZSh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmNvbXBvbmVudC5oYXNQcm9wZXJ0eSgnZHVyYXRpb24nKSkge1xuICAgICAgdGhpcy5jb21wb25lbnQucmVtb3ZlUHJvcGVydHkoJ2R1cmF0aW9uJyk7XG4gICAgfVxuICAgIHRoaXMuX3NldFRpbWUoJ2R0ZW5kJywgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBkdXJhdGlvbi4gVGhpcyBjYW4gYmUgdGhlIHJlc3VsdCBkaXJlY3RseSBmcm9tIHRoZSBwcm9wZXJ0eSwgb3IgdGhlXG4gICAqIGR1cmF0aW9uIGNhbGN1bGF0ZWQgZnJvbSBzdGFydCBkYXRlIGFuZCBlbmQgZGF0ZS4gU2V0dGluZyB0aGUgcHJvcGVydHlcbiAgICogd2lsbCByZW1vdmUgYW55IGBkdGVuZGAgcHJvcGVydGllcy5cbiAgICogQHR5cGUge0R1cmF0aW9ufVxuICAgKi9cbiAgZ2V0IGR1cmF0aW9uKCkge1xuICAgIGxldCBkdXJhdGlvbiA9IHRoaXMuX2ZpcnN0UHJvcCgnZHVyYXRpb24nKTtcbiAgICBpZiAoIWR1cmF0aW9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbmREYXRlLnN1YnRyYWN0RGF0ZVR6KHRoaXMuc3RhcnREYXRlKTtcbiAgICB9XG4gICAgcmV0dXJuIGR1cmF0aW9uO1xuICB9XG5cbiAgc2V0IGR1cmF0aW9uKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuY29tcG9uZW50Lmhhc1Byb3BlcnR5KCdkdGVuZCcpKSB7XG4gICAgICB0aGlzLmNvbXBvbmVudC5yZW1vdmVQcm9wZXJ0eSgnZHRlbmQnKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zZXRQcm9wKCdkdXJhdGlvbicsIHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgbG9jYXRpb24gb2YgdGhlIGV2ZW50LlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IGxvY2F0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9maXJzdFByb3AoJ2xvY2F0aW9uJyk7XG4gIH1cblxuICBzZXQgbG9jYXRpb24odmFsdWUpIHtcbiAgICB0aGlzLl9zZXRQcm9wKCdsb2NhdGlvbicsIHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYXR0ZW5kZWVzIGluIHRoZSBldmVudFxuICAgKiBAdHlwZSB7UHJvcGVydHlbXX1cbiAgICovXG4gIGdldCBhdHRlbmRlZXMoKSB7XG4gICAgLy9YWFg6IFRoaXMgaXMgd2F5IGxhbWUgd2Ugc2hvdWxkIGhhdmUgYSBiZXR0ZXJcbiAgICAvLyAgICAgZGF0YSBzdHJ1Y3R1cmUgZm9yIHRoaXMgbGF0ZXIuXG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50LmdldEFsbFByb3BlcnRpZXMoJ2F0dGVuZGVlJyk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGV2ZW50IHN1bW1hcnlcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCBzdW1tYXJ5KCkge1xuICAgIHJldHVybiB0aGlzLl9maXJzdFByb3AoJ3N1bW1hcnknKTtcbiAgfVxuXG4gIHNldCBzdW1tYXJ5KHZhbHVlKSB7XG4gICAgdGhpcy5fc2V0UHJvcCgnc3VtbWFyeScsIHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZXZlbnQgZGVzY3JpcHRpb24uXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgZGVzY3JpcHRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZpcnN0UHJvcCgnZGVzY3JpcHRpb24nKTtcbiAgfVxuXG4gIHNldCBkZXNjcmlwdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuX3NldFByb3AoJ2Rlc2NyaXB0aW9uJywgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBldmVudCBjb2xvciBmcm9tIFtyZmM3OTg2XShodHRwczovL2RhdGF0cmFja2VyLmlldGYub3JnL2RvYy9odG1sL3JmYzc5ODYpXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgY29sb3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZpcnN0UHJvcCgnY29sb3InKTtcbiAgfVxuXG4gIHNldCBjb2xvcih2YWx1ZSkge1xuICAgIHRoaXMuX3NldFByb3AoJ2NvbG9yJywgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBvcmdhbml6ZXIgdmFsdWUgYXMgYW4gdXJpLiBJbiBtb3N0IGNhc2VzIHRoaXMgaXMgYSBtYWlsdG86IHVyaSwgYnV0XG4gICAqIGl0IGNhbiBhbHNvIGJlIHNvbWV0aGluZyBlbHNlLCBsaWtlIHVybjp1dWlkOi4uLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IG9yZ2FuaXplcigpIHtcbiAgICByZXR1cm4gdGhpcy5fZmlyc3RQcm9wKCdvcmdhbml6ZXInKTtcbiAgfVxuXG4gIHNldCBvcmdhbml6ZXIodmFsdWUpIHtcbiAgICB0aGlzLl9zZXRQcm9wKCdvcmdhbml6ZXInLCB2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHNlcXVlbmNlIHZhbHVlIGZvciB0aGlzIGV2ZW50LiBVc2VkIGZvciBzY2hlZHVsaW5nXG4gICAqIHNlZSB7QHR1dG9yaWFsIHRlcm1pbm9sb2d5fS5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGdldCBzZXF1ZW5jZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZmlyc3RQcm9wKCdzZXF1ZW5jZScpO1xuICB9XG5cbiAgc2V0IHNlcXVlbmNlKHZhbHVlKSB7XG4gICAgdGhpcy5fc2V0UHJvcCgnc2VxdWVuY2UnLCB2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHJlY3VycmVuY2UgaWQgZm9yIHRoaXMgZXZlbnQuIFNlZSB7QHR1dG9yaWFsIHRlcm1pbm9sb2d5fSBmb3IgZGV0YWlscy5cbiAgICogQHR5cGUge1RpbWV9XG4gICAqL1xuICBnZXQgcmVjdXJyZW5jZUlkKCkge1xuICAgIHJldHVybiB0aGlzLl9maXJzdFByb3AoJ3JlY3VycmVuY2UtaWQnKTtcbiAgfVxuXG4gIHNldCByZWN1cnJlbmNlSWQodmFsdWUpIHtcbiAgICB0aGlzLl9zZXRUaW1lKCdyZWN1cnJlbmNlLWlkJywgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldC91cGRhdGUgYSB0aW1lIHByb3BlcnR5J3MgdmFsdWUuXG4gICAqIFRoaXMgd2lsbCBhbHNvIHVwZGF0ZSB0aGUgVFpJRCBvZiB0aGUgcHJvcGVydHkuXG4gICAqXG4gICAqIFRPRE86IHRoaXMgbWV0aG9kIGhhbmRsZXMgdGhlIGNhc2Ugd2hlcmUgd2UgYXJlIHN3aXRjaGluZ1xuICAgKiBmcm9tIGEga25vd24gdGltZXpvbmUgdG8gYW4gaW1wbGllZCB0aW1lem9uZSAob25lIHdpdGhvdXQgVFpJRCkuXG4gICAqIFRoaXMgZG9lcyBfbm90XyBoYW5kbGUgdGhlIGNhc2Ugb2YgbW92aW5nIGJldHdlZW4gYSBrbm93blxuICAgKiAgKGJ5IFRpbWV6b25lU2VydmljZSkgdGltZXpvbmUgdG8gYW4gdW5rbm93biB0aW1lem9uZS4uLlxuICAgKlxuICAgKiBXZSB3aWxsIG5vdCBhZGQvcmVtb3ZlL3VwZGF0ZSB0aGUgVlRJTUVaT05FIHN1YmNvbXBvbmVudHNcbiAgICogIGxlYWRpbmcgdG8gaW52YWxpZCBJQ0FMIGRhdGEuLi5cbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BOYW1lICAgICBUaGUgcHJvcGVydHkgbmFtZVxuICAgKiBAcGFyYW0ge1RpbWV9IHRpbWUgICAgICAgICAgIFRoZSB0aW1lIHRvIHNldFxuICAgKi9cbiAgX3NldFRpbWUocHJvcE5hbWUsIHRpbWUpIHtcbiAgICBsZXQgcHJvcCA9IHRoaXMuY29tcG9uZW50LmdldEZpcnN0UHJvcGVydHkocHJvcE5hbWUpO1xuXG4gICAgaWYgKCFwcm9wKSB7XG4gICAgICBwcm9wID0gbmV3IFByb3BlcnR5KHByb3BOYW1lKTtcbiAgICAgIHRoaXMuY29tcG9uZW50LmFkZFByb3BlcnR5KHByb3ApO1xuICAgIH1cblxuICAgIC8vIHV0YyBhbmQgbG9jYWwgZG9uJ3QgZ2V0IGEgdHppZFxuICAgIGlmIChcbiAgICAgIHRpbWUuem9uZSA9PT0gVGltZXpvbmUubG9jYWxUaW1lem9uZSB8fFxuICAgICAgdGltZS56b25lID09PSBUaW1lem9uZS51dGNUaW1lem9uZVxuICAgICkge1xuICAgICAgLy8gcmVtb3ZlIHRoZSB0emlkXG4gICAgICBwcm9wLnJlbW92ZVBhcmFtZXRlcigndHppZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9wLnNldFBhcmFtZXRlcigndHppZCcsIHRpbWUuem9uZS50emlkKTtcbiAgICB9XG5cbiAgICBwcm9wLnNldFZhbHVlKHRpbWUpO1xuICB9XG5cbiAgX3NldFByb3AobmFtZSwgdmFsdWUpIHtcbiAgICB0aGlzLmNvbXBvbmVudC51cGRhdGVQcm9wZXJ0eVdpdGhWYWx1ZShuYW1lLCB2YWx1ZSk7XG4gIH1cblxuICBfZmlyc3RQcm9wKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5jb21wb25lbnQuZ2V0Rmlyc3RQcm9wZXJ0eVZhbHVlKG5hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBldmVudC5cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50LnRvU3RyaW5nKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY29tcGFyZVJhbmdlRXhjZXB0aW9uKGEsIGIpIHtcbiAgaWYgKGFbMF0gPiBiWzBdKSByZXR1cm4gMTtcbiAgaWYgKGJbMF0gPiBhWzBdKSByZXR1cm4gLTE7XG4gIHJldHVybiAwO1xufVxuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG4vKipcbiAqIFRoZSBDb21wb25lbnRQYXJzZXIgaXMgdXNlZCB0byBwcm9jZXNzIGEgU3RyaW5nIG9yIGpDYWwgT2JqZWN0LFxuICogZmlyaW5nIGNhbGxiYWNrcyBmb3IgdmFyaW91cyBmb3VuZCBjb21wb25lbnRzLCBhcyB3ZWxsIGFzIGNvbXBsZXRpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciBvcHRpb25zID0ge1xuICogICAvLyB3aGVuIGZhbHNlIG5vIGV2ZW50cyB3aWxsIGJlIGVtaXR0ZWQgZm9yIHR5cGVcbiAqICAgcGFyc2VFdmVudDogdHJ1ZSxcbiAqICAgcGFyc2VUaW1lem9uZTogdHJ1ZVxuICogfTtcbiAqXG4gKiB2YXIgcGFyc2VyID0gbmV3IElDQUwuQ29tcG9uZW50UGFyc2VyKG9wdGlvbnMpO1xuICpcbiAqIHBhcnNlci5vbmV2ZW50KGV2ZW50Q29tcG9uZW50KSB7XG4gKiAgIC8vLi4uXG4gKiB9XG4gKlxuICogLy8gb250aW1lem9uZSwgZXRjLi4uXG4gKlxuICogcGFyc2VyLm9uY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAqXG4gKiB9O1xuICpcbiAqIHBhcnNlci5wcm9jZXNzKHN0cmluZ09yQ29tcG9uZW50KTtcbiAqXG4gKiBAbWVtYmVyb2YgSUNBTFxuICovXG5jbGFzcyBDb21wb25lbnRQYXJzZXIge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBJQ0FMLkNvbXBvbmVudFBhcnNlciBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zICAgICAgICAgICAgICAgICAgIENvbXBvbmVudCBwYXJzZXIgb3B0aW9uc1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMucGFyc2VFdmVudCAgICAgICAgV2hldGhlciBldmVudHMgc2hvdWxkIGJlIHBhcnNlZFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMucGFyc2VUaW1lemVvbmUgICAgV2hldGhlciB0aW1lem9uZXMgc2hvdWxkIGJlIHBhcnNlZFxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIGlmICh0eXBlb2Yob3B0aW9ucykgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKG9wdGlvbnMpKSB7XG4gICAgICB0aGlzW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV2hlbiB0cnVlLCBwYXJzZSBldmVudHNcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuICBwYXJzZUV2ZW50ID0gdHJ1ZTtcblxuICAvKipcbiAgICogV2hlbiB0cnVlLCBwYXJzZSB0aW1lem9uZXNcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuICBwYXJzZVRpbWV6b25lID0gdHJ1ZTtcblxuXG4gIC8qIFNBWCBsaWtlIGV2ZW50cyBoZXJlIGZvciByZWZlcmVuY2UgKi9cblxuICAvKipcbiAgICogRmlyZWQgd2hlbiBwYXJzaW5nIGlzIGNvbXBsZXRlXG4gICAqIEBjYWxsYmFja1xuICAgKi9cbiAgb25jb21wbGV0ZSA9IC8qIGM4IGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKCkge307XG5cbiAgLyoqXG4gICAqIEZpcmVkIGlmIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgcGFyc2luZy5cbiAgICpcbiAgICogQGNhbGxiYWNrXG4gICAqIEBwYXJhbSB7RXJyb3J9IGVyciBkZXRhaWxzIG9mIGVycm9yXG4gICAqL1xuICBvbmVycm9yID0gLyogYzggaWdub3JlIG5leHQgKi8gZnVuY3Rpb24oZXJyKSB7fTtcblxuICAvKipcbiAgICogRmlyZWQgd2hlbiBhIHRvcCBsZXZlbCBjb21wb25lbnQgKFZUSU1FWk9ORSkgaXMgZm91bmRcbiAgICpcbiAgICogQGNhbGxiYWNrXG4gICAqIEBwYXJhbSB7VGltZXpvbmV9IGNvbXBvbmVudCAgICAgVGltZXpvbmUgb2JqZWN0XG4gICAqL1xuICBvbnRpbWV6b25lID0gLyogYzggaWdub3JlIG5leHQgKi8gZnVuY3Rpb24oY29tcG9uZW50KSB7fTtcblxuICAvKipcbiAgICogRmlyZWQgd2hlbiBhIHRvcCBsZXZlbCBjb21wb25lbnQgKFZFVkVOVCkgaXMgZm91bmQuXG4gICAqXG4gICAqIEBjYWxsYmFja1xuICAgKiBAcGFyYW0ge0V2ZW50fSBjb21wb25lbnQgICAgVG9wIGxldmVsIGNvbXBvbmVudFxuICAgKi9cbiAgb25ldmVudCA9IC8qIGM4IGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKGNvbXBvbmVudCkge307XG5cbiAgLyoqXG4gICAqIFByb2Nlc3MgYSBzdHJpbmcgb3IgcGFyc2UgaWNhbCBvYmplY3QuICBUaGlzIGZ1bmN0aW9uIGl0c2VsZiB3aWxsIHJldHVyblxuICAgKiBub3RoaW5nIGJ1dCB3aWxsIHN0YXJ0IHRoZSBwYXJzaW5nIHByb2Nlc3MuXG4gICAqXG4gICAqIEV2ZW50cyBtdXN0IGJlIHJlZ2lzdGVyZWQgcHJpb3IgdG8gY2FsbGluZyB0aGlzIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIHtDb21wb25lbnR8U3RyaW5nfE9iamVjdH0gaWNhbCAgICAgIFRoZSBjb21wb25lbnQgdG8gcHJvY2VzcyxcbiAgICogICAgICAgIGVpdGhlciBpbiBpdHMgZmluYWwgZm9ybSwgYXMgYSBqQ2FsIE9iamVjdCwgb3Igc3RyaW5nIHJlcHJlc2VudGF0aW9uXG4gICAqL1xuICBwcm9jZXNzKGljYWwpIHtcbiAgICAvL1RPRE86IHRoaXMgaXMgc3luYyBub3cgaW4gdGhlIGZ1dHVyZSB3ZSB3aWxsIGhhdmUgYSBpbmNyZW1lbnRhbCBwYXJzZXIuXG4gICAgaWYgKHR5cGVvZihpY2FsKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGljYWwgPSBwYXJzZShpY2FsKTtcbiAgICB9XG5cbiAgICBpZiAoIShpY2FsIGluc3RhbmNlb2YgQ29tcG9uZW50KSkge1xuICAgICAgaWNhbCA9IG5ldyBDb21wb25lbnQoaWNhbCk7XG4gICAgfVxuXG4gICAgbGV0IGNvbXBvbmVudHMgPSBpY2FsLmdldEFsbFN1YmNvbXBvbmVudHMoKTtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IGxlbiA9IGNvbXBvbmVudHMubGVuZ3RoO1xuICAgIGxldCBjb21wb25lbnQ7XG5cbiAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBjb21wb25lbnQgPSBjb21wb25lbnRzW2ldO1xuXG4gICAgICBzd2l0Y2ggKGNvbXBvbmVudC5uYW1lKSB7XG4gICAgICAgIGNhc2UgJ3Z0aW1lem9uZSc6XG4gICAgICAgICAgaWYgKHRoaXMucGFyc2VUaW1lem9uZSkge1xuICAgICAgICAgICAgbGV0IHR6aWQgPSBjb21wb25lbnQuZ2V0Rmlyc3RQcm9wZXJ0eVZhbHVlKCd0emlkJyk7XG4gICAgICAgICAgICBpZiAodHppZCkge1xuICAgICAgICAgICAgICB0aGlzLm9udGltZXpvbmUobmV3IFRpbWV6b25lKHtcbiAgICAgICAgICAgICAgICB0emlkOiB0emlkLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogY29tcG9uZW50XG4gICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3ZldmVudCc6XG4gICAgICAgICAgaWYgKHRoaXMucGFyc2VFdmVudCkge1xuICAgICAgICAgICAgdGhpcy5vbmV2ZW50KG5ldyBFdmVudChjb21wb25lbnQpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy9YWFg6IGlkZWFsbHkgd2Ugc2hvdWxkIGRvIGEgXCJuZXh0VGlja1wiIGhlcmVcbiAgICAvLyAgICAgc28gaW4gYWxsIGNhc2VzIHRoaXMgaXMgYWN0dWFsbHkgYXN5bmMuXG4gICAgdGhpcy5vbmNvbXBsZXRlKCk7XG4gIH1cbn1cblxuLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cblxuLyoqXG4gKiBUaGUgbWFpbiBJQ0FMIG1vZHVsZS4gUHJvdmlkZXMgYWNjZXNzIHRvIGV2ZXJ5dGhpbmcgZWxzZS5cbiAqXG4gKiBAYWxpYXMgSUNBTFxuICogQG5hbWVzcGFjZSBJQ0FMXG4gKiBAcHJvcGVydHkge0lDQUwuZGVzaWdufSBkZXNpZ25cbiAqIEBwcm9wZXJ0eSB7SUNBTC5oZWxwZXJzfSBoZWxwZXJzXG4gKi9cbnZhciBJQ0FMbW9kdWxlID0ge1xuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBjaGFyYWN0ZXJzIGJlZm9yZSBpQ2FsZW5kYXIgbGluZSBmb2xkaW5nIHNob3VsZCBvY2N1clxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAZGVmYXVsdCA3NVxuICAgKi9cbiAgZm9sZExlbmd0aDogNzUsXG5cbiAgZGVidWc6IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBUaGUgY2hhcmFjdGVyKHMpIHRvIGJlIHVzZWQgZm9yIGEgbmV3bGluZS4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgcHJvdmlkZWQgYnlcbiAgICogcmZjNTU0NS5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGRlZmF1bHQgXCJcXHJcXG5cIlxuICAgKi9cbiAgbmV3TGluZUNoYXI6ICdcXHJcXG4nLFxuXG4gIEJpbmFyeSxcbiAgQ29tcG9uZW50LFxuICBDb21wb25lbnRQYXJzZXIsXG4gIER1cmF0aW9uLFxuICBFdmVudCxcbiAgUGVyaW9kLFxuICBQcm9wZXJ0eSxcbiAgUmVjdXIsXG4gIFJlY3VyRXhwYW5zaW9uLFxuICBSZWN1ckl0ZXJhdG9yLFxuICBUaW1lLFxuICBUaW1lem9uZSxcbiAgVGltZXpvbmVTZXJ2aWNlLFxuICBVdGNPZmZzZXQsXG4gIFZDYXJkVGltZSxcblxuICBwYXJzZSxcbiAgc3RyaW5naWZ5LFxuXG4gIGRlc2lnbixcbiAgaGVscGVyc1xufTtcblxuZXhwb3J0IHsgSUNBTG1vZHVsZSBhcyBkZWZhdWx0IH07XG4iLCIvKiAtLS0gT2JzaWRpYW4gUGx1Z2luOiBQZXJpb2RpYyBOb3RlcyBDYWxlbmRhciBWaWV3IC0tLVxuICBEZXZlbG9wZXI6IFRpbSBXaWxsaWFtc1xuICBUaGlzIHBsdWdpbiB1c2VzIGxpYnJhcnk6IGh0dHBzOi8vYXBwLnVucGtnLmNvbS9pY2FsLmpzQDIuMi4xL2ZpbGVzL2Rpc3QvaWNhbC5lczUubWluLmNqcyAoYykgMjAyNCBDaHJpcyBMYXdsZXksIE1JVCBMaWNlbnNlICBcbiovXG5pbXBvcnQgSUNBTCBmcm9tICdpY2FsLmpzJztcblxuY29uc3QgREFTSEJPQVJEV0lER0VUUyA9IHtcbiAgICB0YXNrczoge1xuICAgICAgICB0b2RheTogeyBuYW1lOiAnVG9kYXknIH0sXG4gICAgICAgIHRvbW9ycm93OiB7IG5hbWU6ICdUb21vcnJvdycgfSxcbiAgICAgICAgbmV4dDdkYXlzOiB7IG5hbWU6ICdOZXh0IDcgRGF5cycgfSxcbiAgICAgICAgZnV0dXJlTm9EdWU6IHsgbmFtZTogJ0Z1dHVyZSAvIE5vIER1ZScgfSxcbiAgICAgICAgdXBjb21pbmdvdmVyZHVlOiB7IG5hbWU6ICdVcGNvbWluZyAmIE92ZXJkdWUgVGFza3MnIH0sXG4gICAgICAgIHRhc2tzdGF0dXNvdmVydmlldzogeyBuYW1lOiAnVGFzayBTdGF0dXMgT3ZlcnZpZXcnIH0sXG4gICAgICAgIHRhc2tjb21wbGV0aW9uaGVhdG1hcDogeyBuYW1lOiAnVGFzayBDb21wbGV0aW9uIEFjdGl2aXR5JyB9XG4gICAgfSxcbiAgICBjcmVhdGlvbjoge1xuICAgICAgICBhbGxmaWxlc2hlYXRtYXA6IHsgbmFtZTogJ0FsbCBGaWxlcycgfSxcbiAgICAgICAgZGFpbHlub3Rlc2hlYXRtYXA6IHsgbmFtZTogJ0RhaWx5IE5vdGVzJyB9LFxuICAgICAgICByZWd1bGFybm90ZXNoZWF0bWFwOiB7IG5hbWU6ICdSZWd1bGFyIE5vdGVzJyB9LFxuICAgICAgICBhc3NldHNoZWF0bWFwOiB7IG5hbWU6ICdBc3NldHMnIH1cbiAgICB9XG59O1xuXG4vLyBJbXBvcnQgbmVjZXNzYXJ5IGNvbXBvbmVudHMgZnJvbSB0aGUgT2JzaWRpYW4gQVBJLlxuY29uc3QgeyBQbHVnaW4sIEl0ZW1WaWV3LCBQbHVnaW5TZXR0aW5nVGFiLCBOb3RpY2UsIFRGaWxlLCBURm9sZGVyLCBTZXR0aW5nLCBNb2RhbCwgTWVudSwgQWJzdHJhY3RJbnB1dFN1Z2dlc3QsIG1vbWVudCwgTWFya2Rvd25SZW5kZXJlciwgc2V0SWNvbiwgUGxhdGZvcm0gfSA9IHJlcXVpcmUoXCJvYnNpZGlhblwiKTtcblxuLy8gRGVmaW5lIGEgdW5pcXVlIHR5cGUgZm9yIHRoaXMgcGx1Z2luJ3Mgdmlldy5cbmNvbnN0IFZJRVdfVFlQRV9QRVJJT0QgPSBcImNhbGVuZGFyLXBlcmlvZC13ZWVrXCI7XG5cbi8vIERlZmluZSB0aGUgZGVmYXVsdCBzZXR0aW5ncyBmb3IgdGhlIHBsdWdpbi4gVGhpcyBvYmplY3QgaXMgdXNlZCBhcyBhIGZhbGxiYWNrIGFuZCBmb3IgcmVzZXR0aW5nIGNvbmZpZ3VyYXRpb25zLlxuY29uc3QgREVGQVVMVF9TRVRUSU5HUyA9IHtcbiAgICAvLyBHZW5lcmFsIERpc3BsYXlcbiAgICBhcHBsaWVkVGhlbWU6IFwiXCIsXG4gICAgZm9udFNpemU6IFwiMTJweFwiLFxuICAgIGN1c3RvbURhdGVGb3JtYXRzOiBcIllZWVktTU0tREQsREQtTU0tWVlZWVwiLFxuICAgIGRheU51bWJlckZvbnRTaXplOiBcIjE1cHhcIixcbiAgICBuYXZCdXR0b25IZWlnaHQ6IFwiMjhweFwiLFxuICAgIGhlYWRlclJvd0JvbGQ6IGZhbHNlLFxuICAgIHB3Q29sdW1uQm9sZDogZmFsc2UsXG4gICAgc2hvd0NhbGVuZGFyR3JpZExpbmVzOiBmYWxzZSxcbiAgICBjYWxlbmRhckdyaWRHYXBXaWR0aDogXCIxcHhcIixcbiAgICBjb250ZW50Qm9yZGVyV2lkdGg6IFwiMXB4XCIsXG4gICAgbW9udGhDb2xvckxpZ2h0OiBcInJnYmEoNTEsIDUxLCA1MSwgMSlcIiwgLy8gRGFyayBHcmV5IGZvciBsaWdodCBtb2RlXG4gICAgbW9udGhDb2xvckRhcms6IFwicmdiYSgyNTUsIDI1NSwgMjU1LCAxKVwiLCAvLyBXaGl0ZSBmb3IgZGFyayBtb2RlXG4gICAgeWVhckNvbG9yTGlnaHQ6IFwicmdiYSgyNTUsIDAsIDAsIDEpXCIsIC8vIERhcmtlciByZWQgZm9yIGxpZ2h0IG1vZGVcbiAgICB5ZWFyQ29sb3JEYXJrOiBcInJnYmEoMjU1LCA4MCwgODAsIDEpXCIsICAvLyBCcmlnaHRlciByZWQgZm9yIGRhcmsgbW9kZVxuICAgIGN1cnJlbnRIaWdobGlnaHRMYWJlbENvbG9yTGlnaHQ6IFwicmdiYSgyNTUsIDgwLCA4MCwgMSlcIiwgLy8gQSBkaXN0aW5jdCBidXQgcmVhZGFibGUgcmVkIGZvciBsaWdodCBtb2RlXG4gICAgY3VycmVudEhpZ2hsaWdodExhYmVsQ29sb3JEYXJrOiBcInJnYmEoMjU1LCA4MCwgODAsIDEpXCIsICAvLyBBIGJyaWdodGVyIHJlZCBmb3IgZGFyayBtb2RlXG4gICAgbW9udGhUaXRsZUZvcm1hdDogXCJNTU1NIFlZWVlcIixcbiAgICBtYWluTW9udGhZZWFyVGl0bGVGb250U2l6ZTogXCIyMnB4XCIsXG4gICAgbWFpbk1vbnRoVGl0bGVCb2xkOiB0cnVlLFxuICAgIG1haW5ZZWFyVGl0bGVCb2xkOiBmYWxzZSxcbiAgICB0b2RheUhpZ2hsaWdodFNpemU6IFwiMi4yZW1cIixcbiAgICB0YWJUaXRsZUJvbGQ6IGZhbHNlLFxuICAgIHRhYkRpc3BsYXlNb2RlOiBcImljb25Pbmx5XCIsXG4gICAgbW9iaWxlVGFiRGlzcGxheU1vZGU6IFwiaWNvbk9ubHlcIixcbiAgICBjb2xsYXBzZWROb3RlR3JvdXBzOiB7fSxcbiAgICB0YWJPcmRlcjogW1wic2NyYXRjaFwiLCBcInRhc2tzXCIsIFwibm90ZXNcIiwgXCJhc3NldHNcIiwgXCJkYXNoYm9hcmRcIl0sXG4gICAgdGFiSWNvbnM6IHtcbiAgICAgICAgc2NyYXRjaDogXCJwZW5jaWxcIixcbiAgICAgICAgbm90ZXM6IFwiZmlsZXNcIixcbiAgICAgICAgdGFza3M6IFwiY2hlY2stY2lyY2xlXCIsXG4gICAgICAgIHBpbm5lZDogXCJwaW5cIixcbiAgICAgICAgYXNzZXRzOiBcImltYWdlLWZpbGVcIixcbiAgICAgICAgZGFzaGJvYXJkOiBcImNoYXJ0LWJhci1iaWdcIlxuICAgIH0sXG4gICAgYXNzZXRzTG9va2JhY2tEYXlzOiAxMjAsXG4gICAgYXNzZXRzRGVmYXVsdFZpZXc6ICdncmlkJyxcbiAgICBkZWZhdWx0RGFzaGJvYXJkVmlldzogJ2NyZWF0aW9uJyxcbiAgICB0YXNrQmFyQ2hhcnREZWZhdWx0TW9kZTogJ3BlcmNlbnQnLFxuICAgIHRhYlZpc2liaWxpdHk6IHtcbiAgICAgICAgc2NyYXRjaDogdHJ1ZSxcbiAgICAgICAgdGFza3M6IHRydWUsXG4gICAgICAgIG5vdGVzOiB0cnVlLFxuICAgICAgICBhc3NldHM6IHRydWUsXG4gICAgICAgIGRhc2hib2FyZDogdHJ1ZVxuICAgIH0sXG4gICAgY2FsZW5kYXJMYXlvdXQ6IFwibm9ybWFsXCIsXG4gICAgd2Vla1N0YXJ0RGF5OiBcInN1bmRheVwiLFxuXG4gICAgLy8gU2NyYXRjaHBhZFxuICAgIGZpeGVkTm90ZUZpbGU6IFwiU2NyYXRjaFBhZC5tZFwiLFxuICAgIHNjcmF0Y2hGb250U2l6ZTogXCIxNHB4XCIsXG4gICAgc2NyYXRjaEJvbGQ6IGZhbHNlLFxuICAgIHNjcmF0Y2hGb250RmFtaWx5OiBcIlwiLFxuICAgIHNjcmF0Y2hwYWRPcGVuQWN0aW9uOiBcIm5ldy10YWJcIixcbiAgICBzY3JhdGNocGFkSGlnaGxpZ2h0Q29sb3I6IFwicmdiYSgyNTUsIDE2NSwgMCwgMC40KVwiLFxuICAgIHNjcmF0Y2hwYWQ6IHtcbiAgICAgICAgc2hvd1ByZXZpZXdUb2dnbGU6IHRydWUsXG4gICAgICAgIHNob3dBZGRUYXNrQnV0dG9uOiB0cnVlLFxuICAgICAgICB0YXNrRm9ybWF0OiBcIi0gWyBdICNUYWcgfCDwn5OFIHtmcmlkYXl9XCIsXG4gICAgICAgIGhpZGVGcm9udG1hdHRlcjogdHJ1ZVxuICAgIH0sXG4gICAgLy8gTm90ZXMgVGFiXG4gICAgaWdub3JlRm9sZGVyczogW10sXG4gICAgcGluVGFnOiBcInBpblwiLFxuICAgIG5vdGVzVmlld01vZGU6IFwicmVjZW50XCIsXG4gICAgbm90ZXNGb250U2l6ZTogXCIxNHB4XCIsXG4gICAgbm90ZXNCb2xkOiBmYWxzZSxcbiAgICBub3Rlc09wZW5BY3Rpb246IFwiY3VycmVudC10YWJcIixcbiAgICBub3Rlc0xpbmVIZWlnaHQ6IDEuMixcbiAgICBub3Rlc0xvb2tiYWNrRGF5czogMTIwLFxuICAgIHNob3dOb3RlU3RhdHVzRG90czogdHJ1ZSxcbiAgICBzaG93Tm90ZVRvb2x0aXBzOiB0cnVlLFxuICAgIHBpbm5lZE5vdGVzU29ydE9yZGVyOiAnYS16JywgLy8gY2FuIGJlICdhLXonIG9yICdjdXN0b20nXG4gICAgcGlubmVkTm90ZXNDdXN0b21PcmRlcjogW10sICAvLyBTdG9yZXMgYW4gYXJyYXkgb2Ygbm90ZSBwYXRocyBmb3IgY3VzdG9tIG9yZGVyXG5cbiAgICAvL0Fzc2V0cyBcbiAgICBoaWRkZW5Bc3NldFR5cGVzOiBcImJhc2UsY2FudmFzXCIsXG4gICAgc2hvd1VudXNlZEFzc2V0c0luZGljYXRvcjogdHJ1ZSxcbiAgICBhc3NldHNPcGVuQWN0aW9uOiBcIm5ldy10YWJcIixcblxuICAgIC8vIENhbGVuZGFyIERvdHMgJiBQb3B1cHNcbiAgICBsaXN0UG9wdXBUcmlnZ2VyOiBcImhvdmVyXCIsXG4gICAgc2hvd090aGVyTm90ZURvdDogdHJ1ZSxcbiAgICBzaG93TW9kaWZpZWRGaWxlRG90OiB0cnVlLFxuICAgIG90aGVyTm90ZUlnbm9yZUZvbGRlcnM6IFtdLFxuICAgIG90aGVyTm90ZUhvdmVyRGVsYXk6IDgwMCxcbiAgICBwb3B1cEhpZGVEZWxheTogNTAsXG4gICAgcG9wdXBHYXA6IC0yLFxuICAgIG90aGVyTm90ZVBvcHVwRm9udFNpemU6IFwiMTRweFwiLFxuICAgIGNhbGVuZGFyRG90U2l6ZTogNCxcbiAgICBzaG93QXNzZXREb3Q6IHRydWUsXG4gICAgYXNzZXREb3RDb2xvcjogXCJyZ2JhKDI1NSwgMCwgMCwgMSlcIiwgXG4gICAgY2FsZW5kYXJFdmVudERvdENvbG9yOiAncmdiYSgxNDgsIDE0OCwgMTQ4LCAxKScsIFxuXG4gICAgYXNzZXRJZ25vcmVGb2xkZXJzOiBbXSxcbiAgICBzaG93UFdDb2x1bW5TZXBhcmF0b3I6IHRydWUsXG4gICAgcHdDb2x1bW5TZXBhcmF0b3JDb2xvcjogXCJyZ2JhKDEyOCwgMTI4LCAxMjgsIDAuMilcIiwgLy8gR3JleSBzZXBhcmF0b3IgbGluZVxuXG4gICAgcHdDb2x1bW5Gb250Q29sb3JMaWdodDogXCJyZ2JhKDUxLCA1MSwgNTEsIDAuNilcIiwgLy8gRGFyayBncmV5IGZvciBsaWdodCBtb2RlXG4gICAgcHdDb2x1bW5Gb250Q29sb3JEYXJrOiBcInJnYmEoMjU1LCAyNTUsIDI1NSwgMC42KVwiLCAvLyBXaGl0ZSBmb3IgZGFyayBtb2RlXG4gICAgd2Vla051bWJlckZvbnRDb2xvckxpZ2h0OiBcInJnYmEoNTEsIDUxLCA1MSwgMC42KVwiLCAvLyBEYXJrIGdyZXkgZm9yIGxpZ2h0IG1vZGVcbiAgICB3ZWVrTnVtYmVyRm9udENvbG9yRGFyazogXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNilcIiwgLy8gV2hpdGUgZm9yIGRhcmsgbW9kZVxuICAgIGRheUhlYWRlckZvbnRDb2xvckxpZ2h0OiBcInJnYmEoNTEsIDUxLCA1MSwgMC42KVwiLCAvLyBEYXJrIGdyZXkgZm9yIGxpZ2h0IG1vZGVcbiAgICBkYXlIZWFkZXJGb250Q29sb3JEYXJrOiBcInJnYmEoMjU1LCAyNTUsIDI1NSwgMC42KVwiLCAvLyBXaGl0ZSBmb3IgZGFyayBtb2RlXG5cbiAgICBkYXlDZWxsRm9udENvbG9yTGlnaHQ6IFwicmdiYSg1MSwgNTEsIDUxLCAxKVwiLCAvLyBDdXJyZW50IG1vbnRoIGRhdGVzIC0gbGlnaHRcbiAgICBkYXlDZWxsRm9udENvbG9yRGFyazogXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIDEpXCIsIC8vIEN1cnJlbnQgbW9udGggZGF0ZXMgLSBkYXJrXG4gICAgb3RoZXJNb250aEZvbnRDb2xvckxpZ2h0OiBcInJnYmEoMTUzLCAxNTMsIDE1MywgMC42KVwiLCAvLyBQcmV2aW91cy9uZXh0IG1vbnRoIGRhdGVzIC0gbGlnaHRcbiAgICBvdGhlck1vbnRoRm9udENvbG9yRGFyazogXCJyZ2JhKDE1MywgMTUzLCAxNTMsIDAuNilcIiwgLy8gUHJldmlvdXMvbmV4dCBtb250aCBkYXRlcyAtIGRhcmtcblxuICAgIC8vIFRhc2sgQ291bnQgQmFkZ2VcbiAgICB0YXNrSW5kaWNhdG9yU3R5bGU6IFwiaGVhdG1hcFwiLCAvLyAnbm9uZScsICdiYWRnZScsIG9yICdoZWF0bWFwJ1xuICAgIHRhc2tCYWRnZUZvbnRTaXplOiBcIjExcHhcIixcbiAgICB0YXNrQmFkZ2VDb2xvcjogXCJyZ2JhKDEwMCwgMTQ5LCAyMzcsIDAuNilcIiwgLy8gQ29ybmZsb3dlciBCbHVlXG4gICAgdGFza0JhZGdlRm9udENvbG9yOiBcInJnYmEoMjU1LCAyNTUsIDI1NSwgMSlcIiwgLy8gV2hpdGVcbiAgICB0YXNrSGVhdG1hcFN0YXJ0Q29sb3I6IFwicmdiYSgxMDAsIDE0OSwgMjM3LCAwLjMpXCIsIC8vIENvcm5mbG93ZXIgQmx1ZVxuICAgIHRhc2tIZWF0bWFwTWlkQ29sb3I6IFwicmdiYSgyNTUsIDEyNywgODAsIDAuNDUpXCIsICAgIC8vIENvcmFsXG4gICAgdGFza0hlYXRtYXBFbmRDb2xvcjogXCJyZ2JhKDI1NSwgNzEsIDcxLCAwLjYpXCIsICAgICAvLyBSZWRcbiAgICB0YXNrSGVhdG1hcE1pZHBvaW50OiA1LFxuICAgIHRhc2tIZWF0bWFwTWF4cG9pbnQ6IDEwLFxuICAgIHNob3dUYXNrRG90OiBmYWxzZSxcbiAgICB0YXNrRG90Q29sb3I6IFwicmdiYSgyMDAsIDEwMCwgMjAwLCAxKVwiLFxuXG4gICAgLy8gVGFzayBEYXNoYm9hcmQgQ29sb3Vyc1xuICAgIHRhc2tTdGF0dXNDb2xvck92ZXJkdWU6ICdyZ2JhKDI0NCwgMjEsIDEsIDAuNSknLFxuICAgIHRhc2tTdGF0dXNDb2xvckluUHJvZ3Jlc3M6ICdyZ2JhKDI1MSwgMTg4LCA1LCAwLjUpJyxcbiAgICB0YXNrU3RhdHVzQ29sb3JPcGVuOiAncmdiYSg3NCwgMTQ0LCAyMjYsIDAuNSknLFxuICAgIHRhc2tTdGF0dXNDb2xvckNvbXBsZXRlZDogJ3JnYmEoMTI2LCAyMTEsIDMzLCAwLjUpJyxcbiAgICB0YXNrU3RhdHVzQ29sb3JDYW5jZWxsZWQ6ICdyZ2JhKDE1OCwgMTU4LCAxNTgsIDAuNSknLFxuXG4gICAgLy8gRGFpbHkgTm90ZXNcbiAgICBkYWlseU5vdGVzRm9sZGVyOiBcIkRhaWx5IE5vdGVzXCIsXG4gICAgZGFpbHlOb3RlRGF0ZUZvcm1hdDogXCJZWVlZLU1NLUREXCIsXG4gICAgZGFpbHlOb3RlVGVtcGxhdGVQYXRoOiBcIlwiLFxuICAgIGRhaWx5Tm90ZU9wZW5BY3Rpb246IFwibmV3LXRhYlwiLFxuXG4gICAgLy9wZXJpb2QgLyB3ZWVrIG51bWJlcnMgXG4gICAgc2hvd1dlZWtOdW1iZXJzOiB0cnVlLFxuICAgIHdlZWtOdW1iZXJUeXBlOiBcImNhbGVuZGFyXCIsIC8vICdwZXJpb2QnIG9yICdjYWxlbmRhcidcbiAgICB3ZWVrTnVtYmVyQ29sdW1uTGFiZWw6IFwiQ1dcIixcblxuICAgIC8vY2FsZW5kYXIgZXZlbnRzIChmcm9tIElDUykgc2V0dGluZ3NcbiAgICBpY3NVcmw6ICcnLFxuICAgIHNob3dJY3NEb3Q6IHRydWUsXG4gICAgaWNzUmVmcmVzaEludGVydmFsOiA2MCwgLy8gaW4gbWludXRlc1xuICAgIGNhbGVuZGFyRXZlbnRzUGxhY2Vob2xkZXI6ICclJUNBTEVOREFSX0VWRU5UUyUlJyxcbiAgICBjYWxlbmRhckV2ZW50c0Zvcm1hdDogJy0ge3tzdGFydFRpbWV9fSAtIHt7ZW5kVGltZX19OiB7e3N1bW1hcnl9fScsXG4gICAgY2FsZW5kYXJFdmVudEluZGljYXRvclN0eWxlOiAnZG90JywgLy8gT3B0aW9uczogJ2RvdCcsICdoZWF0bWFwJywgJ2JhZGdlJ1xuXG4gICAgLy8gRnVuY3Rpb25hbFxuICAgIGF1dG9SZWxvYWRJbnRlcnZhbDogNTAwMCxcbiAgICBzdGFydE9mUGVyaW9kMURhdGU6IFwiMjAyNS0wMy0wMlwiLFxuICAgIHNob3dQV0NvbHVtbjogZmFsc2UsXG4gICAgcHdGb3JtYXQ6IFwiUCNXI1wiLFxuICAgIGVuYWJsZVJvd0hpZ2hsaWdodDogdHJ1ZSxcbiAgICBlbmFibGVDb2x1bW5IaWdobGlnaHQ6IHRydWUsXG4gICAgZW5hYmxlUm93VG9EYXRlSGlnaGxpZ2h0OiBmYWxzZSxcbiAgICBoaWdobGlnaHRDdXJyZW50V2VlazogdHJ1ZSxcblxuICAgIC8vIENvbG9yc1xuICAgIHNlbGVjdGVkVGFiQ29sb3I6IFwicmdiYSgxMDIsIDEwMiwgMTAyLCAxKVwiLFxuICAgIHRvZGF5SGlnaGxpZ2h0Q29sb3JMaWdodDogXCJyZ2JhKDI1NSwgODAsIDgwLCAwLjQwKVwiLFxuICAgIHRvZGF5SGlnaGxpZ2h0Q29sb3JEYXJrOiBcInJnYmEoMjU1LCA4MCwgODAsIDAuNzUpXCIsXG4gICAgbm90ZXNIb3ZlckNvbG9yOiBcInJnYmEoMTcxLCAxNzEsIDE3MSwgMC4xNSlcIixcbiAgICBkYWlseU5vdGVEb3RDb2xvcjogXCJyZ2JhKDc0LCAxNDQsIDIyNiwgMSlcIixcbiAgICBub3RlQ3JlYXRlZENvbG9yOiBcInJnYmEoNzYsIDE3NSwgODAsIDEpXCIsXG4gICAgbm90ZU1vZGlmaWVkQ29sb3I6IFwicmdiYSgyNTUsIDE1MiwgMCwgMSlcIixcbiAgICByb3dIaWdobGlnaHRDb2xvckxpZ2h0OiBcInJnYmEoMTYzLCAxNjMsIDE2MywgMC4yKVwiLCAvLyBMaWdodGVyIEdyZXlcbiAgICByb3dIaWdobGlnaHRDb2xvckRhcms6IFwicmdiYSg1MSwgNTEsIDUxLCAwLjcpXCIsICAgICAvLyBEYXJrIEdyZXlcbiAgICBkYXRlQ2VsbEhvdmVyQ29sb3JMaWdodDogXCJyZ2JhKDEwNSwgMTA1LCAxMDUsIDAuNzUpXCIsICAgICAvLyBMaWdodCBHcmV5XG4gICAgZGF0ZUNlbGxIb3ZlckNvbG9yRGFyazogXCJyZ2JhKDUxLCA1MSwgNTEsIDEpXCIsXG4gICAgYXNzZXREb3RDb2xvcjogXCJyZ2JhKDI1NSwgMCwgMCwgMSlcIixcbiAgICB0b2RheUhpZ2hsaWdodFN0eWxlOiBcImNpcmNsZVwiLCAvLyAnY2VsbCcgb3IgJ2NpcmNsZSdcbiAgICB0b2RheUNpcmNsZUNvbG9yTGlnaHQ6IFwicmdiYSgyNTUsIDgwLCA4MCwgMC40MClcIixcbiAgICB0b2RheUNpcmNsZUNvbG9yRGFyazogXCJyZ2JhKDI1NSwgODAsIDgwLCAwLjc1KVwiLFxuICAgIGhpZ2hsaWdodFRvZGF5TGFiZWxzOiB0cnVlLFxuICAgIGhpZ2hsaWdodFRvZGF5UFdMYWJlbDogdHJ1ZSxcbiAgICBoaWdobGlnaHRUb2RheURheUhlYWRlcjogdHJ1ZSxcbiAgICBoaWdobGlnaHRXZWVrZW5kczogZmFsc2UsXG4gICAgd2Vla2VuZFNoYWRlQ29sb3JMaWdodDogXCJyZ2JhKDE2MywgMTYzLCAxNjMsIDAuMTUpXCIsIC8vIFN1YnRsZSBncmV5IGZvciBsaWdodCB0aGVtZVxuICAgIHdlZWtlbmRTaGFkZUNvbG9yRGFyazogXCJyZ2JhKDUxLCA1MSwgNTEsIDAuNClcIiwgLy8gU3VidGxlIGdyZXkgZm9yIGRhcmsgdGhlbWVcblxuXG4gICAgLy8gV2Vla2x5IE5vdGVzIChORVcpXG4gICAgZW5hYmxlV2Vla2x5Tm90ZXM6IHRydWUsXG4gICAgd2Vla2x5Tm90ZUZvbGRlcjogXCJXZWVrbHkgTm90ZXNcIixcbiAgICB3ZWVrbHlOb3RlRm9ybWF0OiBcIllZWVktV0tDXCIsIC8vIGUuZy4sIDIwMjUtVzM4XG4gICAgd2Vla2x5Tm90ZVRlbXBsYXRlOiBcIlwiLFxuICAgIHNob3dXZWVrbHlOb3RlRG90OiB0cnVlLFxuICAgIHdlZWtseU5vdGVEb3RDb2xvcjogXCJyZ2JhKDEyOCwgMTI4LCAxMjgsIDEpXCIsXG5cbiAgICAvLyBUYXNrcyBUYWIgU2V0dGluZ3NcbiAgICB0YXNrSWdub3JlRm9sZGVyczogW10sXG4gICAgdGFza1NvcnRPcmRlcjogXCJkdWVEYXRlXCIsXG4gICAgdGFza0dyb3VwQnk6IFwiZGF0ZVwiLFxuICAgIHRhc2tEYXRlR3JvdXBzVG9TaG93OiBbXCJvdmVyZHVlXCIsIFwidG9kYXlcIiwgXCJ0b21vcnJvd1wiLCBcIm5leHQ3ZGF5c1wiLCBcImZ1dHVyZVwiXSxcbiAgICB0YXNrVGV4dFRydW5jYXRlOiBmYWxzZSxcbiAgICBzaG93Q29tcGxldGVkVGFza3NUb2RheTogdHJ1ZSxcbiAgICB0YXNrSGVhZGluZ0ZvbnRTaXplOiBcIjEzcHhcIixcbiAgICB0YXNrVGV4dEZvbnRTaXplOiBcIjE0cHhcIixcbiAgICB0YXNrR3JvdXBJY29uczoge1xuICAgICAgICBvdmVyZHVlOiBcImFsYXJtLWNsb2NrLW9mZlwiLFxuICAgICAgICB0b2RheTogXCJ0YXJnZXRcIixcbiAgICAgICAgdG9tb3Jyb3c6IFwiYXJyb3ctcmlnaHRcIixcbiAgICAgICAgbmV4dDdkYXlzOiBcImNhbGVuZGFyLWRheXNcIixcbiAgICAgICAgZnV0dXJlOiBcInRlbGVzY29wZVwiLFxuICAgICAgICBub0RhdGU6IFwiaGVscC1jaXJjbGVcIixcbiAgICAgICAgdGFnOiBcInRhZ1wiXG4gICAgfSxcbiAgICB0YXNrR3JvdXBDb2xvck92ZXJkdWU6IFwicmdiYSg0MCwgNDAsIDQwLCAwLjE1KVwiLFxuICAgIHRhc2tHcm91cENvbG9yVG9kYXk6IFwicmdiYSg2MCwgNjAsIDYwLCAwLjE1KVwiLFxuICAgIHRhc2tHcm91cENvbG9yVG9tb3Jyb3c6IFwicmdiYSg4MCwgODAsIDgwLCAwLjE1KVwiLFxuICAgIHRhc2tHcm91cENvbG9yTmV4dDdEYXlzOiBcInJnYmEoMTAwLCAxMDAsIDEwMCwgMC4xNSlcIixcbiAgICB0YXNrR3JvdXBDb2xvckZ1dHVyZTogXCJyZ2JhKDEyMCwgMTIwLCAxMjAsIDAuMTUpXCIsXG4gICAgdGFza0dyb3VwQ29sb3JOb0RhdGU6IFwicmdiYSgxNDAsIDE0MCwgMTQwLCAwLjE1KVwiLFxuICAgIHRhc2tHcm91cENvbG9yVGFnOiBcInJnYmEoNDAsIDQwLCA0MCwgMC4xNSlcIixcbiAgICBzaG93UHJldmlld1RvZ2dsZTogdHJ1ZSxcbiAgICBzaG93QWRkVGFza0J1dHRvbjogdHJ1ZSxcbiAgICBjb2xsYXBzZWRUYXNrR3JvdXBzOiB7fSxcbiAgICBjb2xsYXBzZWRBc3NldEdyb3Vwczoge30sXG5cbiAgICAvL0Rhc2hib2FyZCBUYWJcbiAgICBjdXN0b21IZWF0bWFwczogW10sXG4gICAgY3JlYXRpb25EYXNoYm9hcmRPcmRlcjogWydkYWlseW5vdGVzaGVhdG1hcCcsICdyZWd1bGFybm90ZXNoZWF0bWFwJywgJ2Fzc2V0c2hlYXRtYXAnLCAnYWxsZmlsZXNoZWF0bWFwJ10sXG4gICAgY3JlYXRpb25EYXNoYm9hcmRXaWRnZXRzOiB7XG4gICAgICAgIGFsbGZpbGVzaGVhdG1hcDogdHJ1ZSxcbiAgICAgICAgZGFpbHlub3Rlc2hlYXRtYXA6IHRydWUsXG4gICAgICAgIHJlZ3VsYXJub3Rlc2hlYXRtYXA6IHRydWUsXG4gICAgICAgIGFzc2V0c2hlYXRtYXA6IHRydWUsXG4gICAgfSxcbiAgICB0YXNrc0Rhc2hib2FyZE9yZGVyOiBbJ3RvZGF5JywgJ3RvbW9ycm93JywgJ25leHQ3ZGF5cycsICdmdXR1cmVOb0R1ZScsICd1cGNvbWluZ292ZXJkdWUnLCAndGFza3N0YXR1c292ZXJ2aWV3JywgJ3Rhc2tjb21wbGV0aW9uaGVhdG1hcCddLFxuICAgIHRhc2tzRGFzaGJvYXJkV2lkZ2V0czoge1xuICAgICAgICB0b2RheTogdHJ1ZSxcbiAgICAgICAgdG9tb3Jyb3c6IHRydWUsXG4gICAgICAgIG5leHQ3ZGF5czogdHJ1ZSxcbiAgICAgICAgZnV0dXJlTm9EdWU6IHRydWUsXG4gICAgICAgIHVwY29taW5nb3ZlcmR1ZTogdHJ1ZSxcbiAgICAgICAgdGFza3N0YXR1c292ZXJ2aWV3OiB0cnVlLFxuICAgICAgICB0YXNrY29tcGxldGlvbmhlYXRtYXA6IHRydWUsXG4gICAgfSxcbiAgICBjb2xsYXBzZWRIZWF0bWFwczoge30sXG4gICAgc21hbGxXaWRnZXRTdGF0ZXM6IHt9LFxuICAgIGNvbGxhcHNlZFdpZGdldHM6IHt9LFxuICAgIGlzSGVhdG1hcEd1aWRlQ29sbGFwc2VkOiB0cnVlLFxuICAgIGhlYXRtYXBMaW5rQ29uZmlnOiB7fSxcbiAgICBoZWF0bWFwVG90YWxDbGlja09wZW5BY3Rpb246ICduZXctdGFiJyxcbiAgICBjdXN0b21IZWF0bWFwczogW10sXG5cbn07XG5cbi8vIEEgc3RyaW5nIGNvbnRhaW5pbmcgYWxsIHRoZSBDU1MgZm9yIHRoZSBwbHVnaW4uIEl0J3MgaW5qZWN0ZWQgaW50byB0aGUgZG9jdW1lbnQgaGVhZCBvbiBsb2FkLlxuY29uc3QgUExVR0lOX1NUWUxFUyA9IGBcbmJvZHkudGhlbWUtbGlnaHQge1xuICAgIC0tbW9udGgtY29sb3ItdGhlbWVkOiB2YXIoLS1tb250aC1jb2xvci1saWdodCk7XG4gICAgLS10b2RheS1jaXJjbGUtY29sb3ItdGhlbWVkOiB2YXIoLS10b2RheS1jaXJjbGUtY29sb3ItbGlnaHQpO1xuICAgIC0tdG9kYXktaGlnaGxpZ2h0LWNvbG9yLXRoZW1lZDogdmFyKC0tdG9kYXktaGlnaGxpZ2h0LWNvbG9yLWxpZ2h0KTtcbiAgICAtLWRhdGUtY2VsbC1ob3Zlci1jb2xvci10aGVtZWQ6IHZhcigtLWRhdGUtY2VsbC1ob3Zlci1jb2xvci1saWdodCk7XG4gICAgLS1wdy1jb2x1bW4tZm9udC1jb2xvci10aGVtZWQ6IHZhcigtLXB3LWNvbHVtbi1mb250LWNvbG9yLWxpZ2h0KTtcbiAgICAtLXdlZWstbnVtYmVyLWZvbnQtY29sb3ItdGhlbWVkOiB2YXIoLS13ZWVrLW51bWJlci1mb250LWNvbG9yLWxpZ2h0KTtcbiAgICAtLWRheS1oZWFkZXItZm9udC1jb2xvci10aGVtZWQ6IHZhcigtLWRheS1oZWFkZXItZm9udC1jb2xvci1saWdodCk7XG4gICAgLS1kYXktY2VsbC1mb250LWNvbG9yLXRoZW1lZDogdmFyKC0tZGF5LWNlbGwtZm9udC1jb2xvci1saWdodCk7XG4gICAgLS1vdGhlci1tb250aC1mb250LWNvbG9yLXRoZW1lZDogdmFyKC0tb3RoZXItbW9udGgtZm9udC1jb2xvci1saWdodCk7XG4gICAgLS13ZWVrZW5kLXNoYWRlLWNvbG9yLXRoZW1lZDogdmFyKC0td2Vla2VuZC1zaGFkZS1jb2xvci1saWdodCk7XG4gICAgLS1yb3ctaGlnaGxpZ2h0LWNvbG9yLXRoZW1lZDogdmFyKC0tcm93LWhpZ2hsaWdodC1jb2xvci1saWdodCk7XG4gICAgLS15ZWFyLWNvbG9yLXRoZW1lZDogdmFyKC0teWVhci1jb2xvci1saWdodCk7XG4gICAgLS1jdXJyZW50LWxhYmVsLWhpZ2hsaWdodC1jb2xvci10aGVtZWQ6IHZhcigtLWN1cnJlbnQtaGlnaGxpZ2h0LWxhYmVsLWNvbG9yLWxpZ2h0KTsgXG5cbn1cbmJvZHkudGhlbWUtZGFyayB7XG4gICAgLS1tb250aC1jb2xvci10aGVtZWQ6IHZhcigtLW1vbnRoLWNvbG9yLWRhcmspO1xuICAgIC0tdG9kYXktY2lyY2xlLWNvbG9yLXRoZW1lZDogdmFyKC0tdG9kYXktY2lyY2xlLWNvbG9yLWRhcmspO1xuICAgIC0tdG9kYXktaGlnaGxpZ2h0LWNvbG9yLXRoZW1lZDogdmFyKC0tdG9kYXktaGlnaGxpZ2h0LWNvbG9yLWRhcmspO1xuICAgIC0tZGF0ZS1jZWxsLWhvdmVyLWNvbG9yLXRoZW1lZDogdmFyKC0tZGF0ZS1jZWxsLWhvdmVyLWNvbG9yLWRhcmspO1xuICAgIC0tcHctY29sdW1uLWZvbnQtY29sb3ItdGhlbWVkOiB2YXIoLS1wdy1jb2x1bW4tZm9udC1jb2xvci1kYXJrKTtcbiAgICAtLXdlZWstbnVtYmVyLWZvbnQtY29sb3ItdGhlbWVkOiB2YXIoLS13ZWVrLW51bWJlci1mb250LWNvbG9yLWRhcmspO1xuICAgIC0tZGF5LWhlYWRlci1mb250LWNvbG9yLXRoZW1lZDogdmFyKC0tZGF5LWhlYWRlci1mb250LWNvbG9yLWRhcmspO1xuICAgIC0tZGF5LWNlbGwtZm9udC1jb2xvci10aGVtZWQ6IHZhcigtLWRheS1jZWxsLWZvbnQtY29sb3ItZGFyayk7XG4gICAgLS1vdGhlci1tb250aC1mb250LWNvbG9yLXRoZW1lZDogdmFyKC0tb3RoZXItbW9udGgtZm9udC1jb2xvci1kYXJrKTtcbiAgICAtLXdlZWtlbmQtc2hhZGUtY29sb3ItdGhlbWVkOiB2YXIoLS13ZWVrZW5kLXNoYWRlLWNvbG9yLWRhcmspO1xuICAgIC0tcm93LWhpZ2hsaWdodC1jb2xvci10aGVtZWQ6IHZhcigtLXJvdy1oaWdobGlnaHQtY29sb3ItZGFyayk7XG4gICAgLS15ZWFyLWNvbG9yLXRoZW1lZDogdmFyKC0teWVhci1jb2xvci1kYXJrKTtcbiAgICAtLWN1cnJlbnQtbGFiZWwtaGlnaGxpZ2h0LWNvbG9yLXRoZW1lZDogdmFyKC0tY3VycmVudC1oaWdobGlnaHQtbGFiZWwtY29sb3ItZGFyayk7IFxuXG59XG5cbi8qIFN0eWxlIGZvciB0aGUgXCJNb250aFwiIHBhcnQgKHVzZXMgZXhpc3RpbmcgLS1tb250aC1jb2xvci10aGVtZWQgdmFyaWFibGUpICovXG4ubW9udGgtdGl0bGUtbW9udGgge1xuICAgIGNvbG9yOiB2YXIoLS1tb250aC1jb2xvci10aGVtZWQpO1xufVxuXG4vKiBTdHlsZSBmb3IgdGhlIFwiWWVhclwiIHBhcnQgKHVzZXMgdGhlIG5ldyB2YXJpYWJsZSkgKi9cbi5tb250aC10aXRsZS15ZWFyIHtcbiAgICBjb2xvcjogdmFyKC0teWVhci1jb2xvci10aGVtZWQpO1xufVxuXG4vKiA0LiBFbnN1cmUgaW5kaXZpZHVhbCBkYXRlIGhvdmVyIGFwcGVhcnMgT04gVE9QIG9mIG90aGVyIGhpZ2hsaWdodHMgKi9cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGQ6aG92ZXIgdGQ6bm90KC5wdy1sYWJlbC1jZWxsKTpub3QoLndlZWstbnVtYmVyLWNlbGwpOmhvdmVyIC5kYXktY29udGVudCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZGF0ZS1jZWxsLWhvdmVyLWNvbG9yLXRoZW1lZCkgIWltcG9ydGFudDtcbn1cblxuLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0ZC5yb3ctaG92ZXI6bm90KC5wdy1sYWJlbC1jZWxsKTpub3QoLndlZWstbnVtYmVyLWNlbGwpIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1yb3ctaGlnaGxpZ2h0LWNvbG9yLXRoZW1lZCk7XG59XG5cbi8qIERheSBoZWFkZXIgcm93IGZvbnQgY29sb3IgKi9cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGhlYWQgdGgge1xuICAgIGNvbG9yOiB2YXIoLS1kYXktaGVhZGVyLWZvbnQtY29sb3ItdGhlbWVkKTtcbn1cblxuLyogUGVyaW9kL1dlZWsgY29sdW1uIGZvbnQgY29sb3IgKi9cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgLnB3LWxhYmVsLWNlbGwsXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIC5wdy1sYWJlbC1jZWxsIC5kYXktbnVtYmVyIHtcbiAgICBmb250LXdlaWdodDogdmFyKC0tcHctY29sdW1uLWZvbnQtd2VpZ2h0KTtcbiAgICBmb250LXNpemU6IHZhcigtLWhlYWRlci1mb250LXNpemUpO1xuICAgIGNvbG9yOiB2YXIoLS1wdy1jb2x1bW4tZm9udC1jb2xvci10aGVtZWQpO1xufVxuXG4vKiBIaWdobGlnaHQgdG9kYXkncyBQL1cgY29sdW1uIHdpdGggdG9kYXkgY29sb3IgKi9cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgLnB3LWxhYmVsLWNlbGwudG9kYXktcHctbGFiZWwgLmRheS1udW1iZXIsXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIC53ZWVrLW51bWJlci1jZWxsLnRvZGF5LXB3LWxhYmVsIC5kYXktbnVtYmVyIHtcbiAgICBjb2xvcjogdmFyKC0tY3VycmVudC1sYWJlbC1oaWdobGlnaHQtY29sb3ItdGhlbWVkKTtcbiAgICBcbn1cblxuLyogSGlnaGxpZ2h0IHRvZGF5J3MgZGF5IGNvbHVtbiBoZWFkZXIgd2l0aCB0b2RheSBjb2xvciAqL1xuLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0aGVhZCB0aC50b2RheS1kYXktaGVhZGVyIHtcbiAgICBjb2xvcjogdmFyKC0tY3VycmVudC1sYWJlbC1oaWdobGlnaHQtY29sb3ItdGhlbWVkKTsgICAgXG59XG5cbi8qIFdlZWsgbnVtYmVyIGNvbHVtbiBmb250IGNvbG9yICovXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIC53ZWVrLW51bWJlci1jZWxsLFxuLnBlcmlvZC1jYWxlbmRhci10YWJsZSAud2Vlay1udW1iZXItY2VsbCAuZGF5LW51bWJlciB7XG4gICAgZm9udC13ZWlnaHQ6IHZhcigtLXB3LWNvbHVtbi1mb250LXdlaWdodCk7XG4gICAgZm9udC1zaXplOiB2YXIoLS1oZWFkZXItZm9udC1zaXplKTtcbiAgICBjb2xvcjogdmFyKC0td2Vlay1udW1iZXItZm9udC1jb2xvci10aGVtZWQpO1xufVxuXG4vKiAtLS0gTWFpbiBMYXlvdXQgLS0tICovXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGhlaWdodDogMTAwJTtcbiAgcGFkZGluZy10b3A6IDZweDtcbn1cbi5tb250aC1oZWFkZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIHBhZGRpbmc6IDAuMXJlbSAwLjI1cmVtO1xuICBtYXJnaW4tYm90dG9tOiAwLjVyZW07IC8qIFNwZWNpZmljIG1hcmdpbiBmb3Igc3BhY2luZyAqL1xufVxuLm1vbnRoLWhlYWRlci10aXRsZSB7XG4gICAgZm9udC1zaXplOiB2YXIoLS1tYWluLW1vbnRoLXllYXItdGl0bGUtZm9udC1zaXplKTtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbn1cbi5tb250aC10aXRsZS1tb250aCB7XG4gICAgZm9udC13ZWlnaHQ6IHZhcigtLW1haW4tbW9udGgtdGl0bGUtd2VpZ2h0KTtcbn1cblxuLm1vbnRoLXRpdGxlLXllYXIge1xuICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1tYWluLXllYXItdGl0bGUtd2VpZ2h0KTtcbn1cblxuLm1vbnRoLWhlYWRlci1uYXYge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBnYXA6IDAuMjVyZW07XG59XG4ubW9udGgtaGVhZGVyLW5hdiBidXR0b24ge1xuICBoZWlnaHQ6IHZhcigtLW5hdi1idXR0b24taGVpZ2h0KTtcbiAgbWluLWhlaWdodDogdmFyKC0tbmF2LWJ1dHRvbi1oZWlnaHQpO1xuICBwYWRkaW5nOiAwOyAvKiBSZW1vdmUgaG9yaXpvbnRhbCBwYWRkaW5nICovXG4gIHdpZHRoOiB2YXIoLS1uYXYtYnV0dG9uLWhlaWdodCk7IC8qIE1ha2UgdGhlIGJ1dHRvbiBzcXVhcmUgKi9cbiAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi8qIEFjY2VudCBjb2xvciBmb3IgdGhlIGxvY2tlZCBwb3B1cCBidXR0b24gb24gZGVza3RvcCAqL1xuLm1vbnRoLWhlYWRlci1uYXYgYnV0dG9uLnBvcHVwLWxvY2tlZCAuc3ZnLWljb24ge1xuICAgIGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xufVxuXG4vKiBTcGVjaWZpYyBvdmVycmlkZSBmb3IgbW9iaWxlIHRvIGVuc3VyZSBhY2NlbnQgY29sb3IgaXMgYXBwbGllZCAqL1xuYm9keS5pcy1tb2JpbGUgLm1vbnRoLWhlYWRlci1uYXYgYnV0dG9uLnBvcHVwLWxvY2tlZCAuc3ZnLWljb24ge1xuICAgIGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xufVxuXG4vKiAtLS0gQ2hldnJvbiBCdXR0b24gQW5pbWF0aW9uIC0tLSAqL1xuLm1vbnRoLWhlYWRlci1uYXYgYnV0dG9uW2FyaWEtbGFiZWw9XCJUb2dnbGUgY2FsZW5kYXIgdmlzaWJpbGl0eVwiXSAuc3ZnLWljb24ge1xuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4zcyBlYXNlLWluLW91dDtcbn1cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLmNhbGVuZGFyLWNvbGxhcHNlZCAubW9udGgtaGVhZGVyLW5hdiBidXR0b25bYXJpYS1sYWJlbD1cIlRvZ2dsZSBjYWxlbmRhciB2aXNpYmlsaXR5XCJdIC5zdmctaWNvbiB7XG4gIHRyYW5zZm9ybTogcm90YXRlKDE4MGRlZyk7XG59XG5ib2R5LmlzLW1vYmlsZSAubW9udGgtaGVhZGVyLW5hdiBidXR0b24gLnN2Zy1pY29uIHtcbiAgd2lkdGg6IDE4cHg7XG4gIGhlaWdodDogMThweDtcbiAgY29sb3I6IHZhcigtLWljb24tY29sb3IpO1xuICBmbGV4LXNocmluazogMDtcbn1cbi8qIC0tLSBDYWxlbmRhciBDb2xsYXBzZSBBbmltYXRpb24gLS0tICovXG4uY2FsZW5kYXItdGFibGUtd3JhcHBlciB7XG4gIGZsZXgtc2hyaW5rOiAwO1xuICBtYXgtaGVpZ2h0OiA1MDBweDsgXG4gIHRyYW5zaXRpb246IG1heC1oZWlnaHQgMC4zcyBlYXNlLWluLW91dCwgbWFyZ2luLWJvdHRvbSAwLjNzIGVhc2UtaW4tb3V0O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XG59XG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5jYWxlbmRhci1jb2xsYXBzZWQgLmNhbGVuZGFyLXRhYmxlLXdyYXBwZXIge1xuICBtYXgtaGVpZ2h0OiAwO1xuICBtYXJnaW4tYm90dG9tOiAwO1xufVxuXG4vKiAtLS0gQ2FsZW5kYXIgVGFibGUgLS0tICovXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XG4gIHRhYmxlLWxheW91dDogZml4ZWQ7XG59XG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRoLCAucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRkIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICBwYWRkaW5nOiAwO1xuICBmb250LXNpemU6IHZhcigtLWhlYWRlci1mb250LXNpemUpO1xufVxuLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0aCB7XG4gICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbn1cblxuLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0aCB7XG4gIGZvbnQtd2VpZ2h0OiB2YXIoLS1oZWFkZXItcm93LWZvbnQtd2VpZ2h0KTtcbiAgaGVpZ2h0OiAyLjVlbTtcbn1cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdGQge1xuIGN1cnNvcjogcG9pbnRlcjtcbiBvdmVyZmxvdzogdmlzaWJsZTsgXG4gcG9zaXRpb246IHJlbGF0aXZlO1xufVxuLnBlcmlvZC1tb250aC1jb250YWluZXI6bm90KC5oaWRlLWdyaWQpIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGQge1xuICAgIGJvcmRlcjogdmFyKC0tY2FsZW5kYXItZ3JpZC1nYXAtd2lkdGgpIHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbn1cblxuLyogLS0tIFJvdW5kZWQgUm93IEhpZ2hsaWdodCAtLS0gKi9cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgLmN1cnJlbnQtd2Vlay1yb3cgdGQ6Zmlyc3QtY2hpbGQge1xuICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDZweDtcbiAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiA2cHg7XG59XG5cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgLmN1cnJlbnQtd2Vlay1yb3cgdGQ6bGFzdC1jaGlsZCB7XG4gICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDZweDtcbiAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogNnB4O1xufVxuXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRib2R5IHRkOm5vdCgucHctbGFiZWwtY2VsbCk6bm90KC53ZWVrLW51bWJlci1jZWxsKTpob3ZlciAuZGF5LWNvbnRlbnQge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1kYXRlLWNlbGwtaG92ZXItY29sb3ItdGhlbWVkKTtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMTVzIGVhc2U7XG59XG5cbmJvZHkgLnBlcmlvZC1tb250aC1jb250YWluZXIudG9kYXktc3R5bGUtY2VsbCAudG9kYXktY2VsbCAuZGF5LWNvbnRlbnQge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10b2RheS1oaWdobGlnaHQtY29sb3ItdGhlbWVkKTtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xufVxuXG5ib2R5IC5wZXJpb2QtbW9udGgtY29udGFpbmVyLnRvZGF5LXN0eWxlLWNlbGwgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0ci5jdXJyZW50LXdlZWstcm93IHRkLnRvZGF5LWNlbGwgLmRheS1jb250ZW50IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10b2RheS1oaWdobGlnaHQtY29sb3ItdGhlbWVkKSAhaW1wb3J0YW50O1xufVxuXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci50b2RheS1zdHlsZS1jaXJjbGUgLnRvZGF5LWNlbGwgLmRheS1udW1iZXIge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDUwJTtcbiAgICBsZWZ0OiA1MCU7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdG9kYXktY2lyY2xlLWNvbG9yLXRoZW1lZCk7XG4gICAgei1pbmRleDogMjtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgd2lkdGg6IHZhcigtLXRvZGF5LWhpZ2hsaWdodC1zaXplKTtcbiAgICBoZWlnaHQ6IHZhcigtLXRvZGF5LWhpZ2hsaWdodC1zaXplKTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7IFxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci50b2RheS1zdHlsZS1udW1iZXIgLnRvZGF5LWNlbGwgLmRheS1udW1iZXIge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDUwJTtcbiAgICBsZWZ0OiA1MCU7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdG9kYXktY2lyY2xlLWNvbG9yLXRoZW1lZCk7XG4gICAgYm9yZGVyLXJhZGl1czogNnB4OyBcbiAgICBwYWRkaW5nOiAwcHggMTBweDsgLyogTWluaW1hbCBwYWRkaW5nIGZvciBhIHRpZ2h0IGZpdCAqL1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjsgXG4gICAgei1pbmRleDogMjsgLyogRW5zdXJlcyBpdCdzIGRyYXduIG9uIHRvcCBvZiB0aGUgaGVhdG1hcCAqL1xufVxuXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRkIC5kYXktY29udGVudC5oZWF0bWFwLWNlbGwge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWhlYXRtYXAtY29sb3IpICFpbXBvcnRhbnQ7XG59XG5cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgLnB3LWxhYmVsLWNlbGwsXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIC53ZWVrLW51bWJlci1jZWxsIHtcbiAgZm9udC13ZWlnaHQ6IHZhcigtLXB3LWNvbHVtbi1mb250LXdlaWdodCk7XG4gIGZvbnQtc2l6ZTogdmFyKC0taGVhZGVyLWZvbnQtc2l6ZSk7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cblxuLyogLS0tIFBlcmlvZC9XZWVrIENvbHVtbiBTZXBhcmF0b3IgTGluZSAtLS0gKi9cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdGQuZmlyc3QtZGF0ZS1jb2x1bW46OmJlZm9yZSB7XG4gICAgY29udGVudDogJyc7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IDA7XG4gICAgdG9wOiAwO1xuICAgIGJvdHRvbTogMDtcbiAgICB3aWR0aDogMXB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXB3LXNlcGFyYXRvci1jb2xvcik7XG4gICAgei1pbmRleDogMTtcbn1cblxuLndlZWstZG90cy1jb250YWluZXIge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBsZWZ0OiAwO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi8qIC0tLSBDYWxlbmRhciBEb3RzIENvbG9yIFZhcmlhYmxlcyAtLS0gKi9cbi5jYWxlbmRhci1kb3Qge1xuICAgIHdpZHRoOiB2YXIoLS1jYWxlbmRhci1kb3Qtc2l6ZSk7XG4gICAgaGVpZ2h0OiB2YXIoLS1jYWxlbmRhci1kb3Qtc2l6ZSk7XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xufVxuXG4uaWNzLWV2ZW50LWRvdCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY2FsZW5kYXItZXZlbnQtZG90LWNvbG9yKTtcbn1cblxuLyogLS0tIENhbGVuZGFyIExheW91dCBTdHlsZXMgLS0tICovXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5sYXlvdXQtc3BhY2lvdXMgLmRheS1jb250ZW50IHtcbiAgICBoZWlnaHQ6IDMuOGVtO1xufVxuLnBlcmlvZC1tb250aC1jb250YWluZXIubGF5b3V0LW5vcm1hbCAuZGF5LWNvbnRlbnQge1xuICAgIGhlaWdodDogMy4wZW07XG59XG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5sYXlvdXQtY29uZGVuc2VkIC5kYXktY29udGVudCB7XG4gICAgaGVpZ2h0OiAyLjhlbTsgLyogRXZlbiBzbWFsbGVyIGhlaWdodCAqL1xuICAgIFxufVxuXG4vKiBUaGUgd2Vla2x5IGRvdCBub3cganVzdCBzZXRzIHRoZSBjb2xvciBhbmQgcmUtdXNlcyAuY2FsZW5kYXItZG90IGZvciBpdHMgc2l6ZSAqL1xuLndlZWtseS1ub3RlLWRvdCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0td2Vla2x5LW5vdGUtZG90LWNvbG9yKTtcbn1cblxuLyogLS0tIENhbGVuZGFyIERheSBDb250ZW50ICYgRG90cyAoUkVGQUNUT1JFRCkgLS0tICovXG4vKiAxLiBUaGUgRGF5IENvbnRlbnQgV3JhcHBlciAqL1xuLyogSXRzIE9OTFkgam9iIGlzIHRvIGJlIHRoZSBwb3NpdGlvbmluZyBhbmNob3IuIE5vIG1vcmUgZmxleGJveC4gKi9cbi5kYXktY29udGVudCB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbn1cblxuLyogMi4gVGhlIERheSBOdW1iZXIgKi9cbi8qIFdlIG5vdyBwb3NpdGlvbiBpdCBhYnNvbHV0ZWx5IHRvIGVuc3VyZSBpdCBpcyBwZXJmZWN0bHkgY2VudGVyZWQuICovXG4uZGF5LW51bWJlciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogNTAlO1xuICAgIGxlZnQ6IDUwJTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICB6LWluZGV4OiAxOyAvKiBTaXRzIG9uIHRvcCBvZiB0aGUgaGlnaGxpZ2h0IGNpcmNsZSAqL1xuICAgIGZvbnQtc2l6ZTogdmFyKC0tY2FsZW5kYXItZGF5LW51bWJlci1mb250LXNpemUpO1xuICAgIGNvbG9yOiB2YXIoLS1kYXktY2VsbC1mb250LWNvbG9yLXRoZW1lZCk7XG59XG5cbi8qIDMuIFRoZSBEb3RzIENvbnRhaW5lciAod2l0aCBkeW5hbWljIGJvdHRvbSBwb3NpdGlvbmluZykgKi9cbi8qIFRoZSBiYXNlIHJ1bGUgcmVtb3ZlcyB0aGUgYm90dG9tIHByb3BlcnR5LiAqL1xuLmRvdHMtY29udGFpbmVyLCAud2Vlay1kb3RzLWNvbnRhaW5lciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IDUwJTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBnYXA6IDNweDtcbiAgICB6LWluZGV4OiAyOyAvKiBTaXRzIG9uIHRvcCBvZiB0aGUgZGF5IG51bWJlciAqL1xufVxuXG4vKiBUaGVzZSBsYXlvdXQtc3BlY2lmaWMgY2xhc3NlcyBub3cgaGF2ZSBmdWxsIGNvbnRyb2wgYW5kIHdpbGwgd29yayBjb3JyZWN0bHkuICovXG4uZG90cy1jb250YWluZXIubGF5b3V0LWNvbmRlbnNlZCxcbi53ZWVrLWRvdHMtY29udGFpbmVyLmxheW91dC1jb25kZW5zZWQge1xuICAgIHRvcDogMjZweDsgXG59XG5cbi5kb3RzLWNvbnRhaW5lci5sYXlvdXQtbm9ybWFsLFxuLndlZWstZG90cy1jb250YWluZXIubGF5b3V0LW5vcm1hbCB7XG4gICAgdG9wOiAyOHB4OyBcbn1cblxuLmRvdHMtY29udGFpbmVyLmxheW91dC1zcGFjaW91cyxcbi53ZWVrLWRvdHMtY29udGFpbmVyLmxheW91dC1zcGFjaW91cyB7XG4gICAgdG9wOiAzNHB4OyBcbn1cblxuLyogNC4gRW5zdXJlIG90aGVyIGxheWVyZWQgaXRlbXMgYXJlIGFsc28gcG9zaXRpb25lZCBhYnNvbHV0ZWx5ICovXG5cblxuLmJhZGdlLWNvbnRhaW5lciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMnB4O1xuICAgIHJpZ2h0OiAycHg7XG4gICAgei1pbmRleDogMzsgLyogU2l0cyBhdCB0aGUgdmVyeSB0b3AgKi9cbn1cblxuLmRheS1oZWFkZXItY2VsbCwgLnB3LWNlbGwsIC53ZWVrLW51bWJlci1jZWxsIHtcbiAgICAvKiBVc2VzIHRoZSBnZW5lcmFsIGZvbnQgc2l6ZSBmb3IgbGFiZWxzICovXG4gICAgZm9udC1zaXplOiB2YXIoLS1jYWxlbmRhci1sYWJlbC1mb250LXNpemUpOyBcbn1cblxuLmRheS1udW1iZXItb3RoZXItbW9udGgge1xuICAgIGNvbG9yOiB2YXIoLS1vdGhlci1tb250aC1mb250LWNvbG9yLXRoZW1lZCkgIWltcG9ydGFudDtcbn1cblxuLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0aCwgLnBlcmlvZC1jYWxlbmRhci10YWJsZSAucHctY2VsbCwgLnBlcmlvZC1jYWxlbmRhci10YWJsZSAud2Vlay1udW1iZXItY2VsbCB7XG4gICAgZm9udC1zaXplOiB2YXIoLS1jYWxlbmRhci1sYWJlbC1mb250LXNpemUpOyBcbn1cblxuLyogLS0tIENhbGVuZGFyIExheW91dCBTdHlsZXMgLS0tICovXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5sYXlvdXQtc3BhY2lvdXMgLmRvdHMtY29udGFpbmVyICB7XG4gICAgcGFkZGluZy1ib3R0b206IDEwcHg7IC8qIENyZWF0ZXMgc3BhY2UgZnJvbSB0aGUgYm90dG9tIGVkZ2UgKi9cbn1cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLmxheW91dC1zcGFjaW91cyAuZG90cy1jb250YWluZXI6ZW1wdHkge1xuICAgIHBhZGRpbmctdG9wOiB2YXIoLS1jYWxlbmRhci1kb3Qtc2l6ZSk7XG59XG5cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLmxheW91dC1ub3JtYWwgLmRvdHMtY29udGFpbmVyICB7XG4gICAgcGFkZGluZy1ib3R0b206IDZweDsgLyogQ3JlYXRlcyBzcGFjZSBmcm9tIHRoZSBib3R0b20gZWRnZSAqL1xufVxuLnBlcmlvZC1tb250aC1jb250YWluZXIubGF5b3V0LWNvbmRlbnNlZCAuZG90cy1jb250YWluZXIgIHtcbiAgICBwYWRkaW5nLWJvdHRvbTogNHB4OyAvKiBDcmVhdGVzIHNwYWNlIGZyb20gdGhlIGJvdHRvbSBlZGdlICovXG59XG5cbi50YXNrLWNvdW50LWJhZGdlIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAycHg7XG4gICAgcmlnaHQ6IDNweDtcbiAgICB6LWluZGV4OiAzO1xuICAgIHdpZHRoOiAxLjZlbTtcbiAgICBoZWlnaHQ6IDEuNmVtO1xuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10YXNrLWJhZGdlLWNvbG9yKTtcbiAgICBjb2xvcjogdmFyKC0tdGFzay1iYWRnZS1mb250LWNvbG9yKTtcbiAgICBmb250LXNpemU6IHZhcigtLXRhc2stYmFkZ2UtZm9udC1zaXplKTtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgbGluZS1oZWlnaHQ6IDE7IC8qIFByZXZlbnRzIHRleHQgZnJvbSBzaGlmdGluZyB2ZXJ0aWNhbGx5ICovXG59XG5cbi5jYWxlbmRhci1kb3Qge1xuICB3aWR0aDogdmFyKC0tY2FsZW5kYXItZG90LXNpemUpO1xuICBoZWlnaHQ6IHZhcigtLWNhbGVuZGFyLWRvdC1zaXplKTtcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xufVxuLm90aGVyLW5vdGUtZG90IHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tb3RoZXItbm90ZS1kb3QtY29sb3IpOyB9XG4ubW9kaWZpZWQtZmlsZS1kb3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jYWxlbmRhci1tb2RpZmllZC1kb3QtY29sb3IpOyB9XG4uYXNzZXQtZG90IHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYXNzZXQtZG90LWNvbG9yKTsgfVxuLnRhc2stZG90IHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGFzay1kb3QtY29sb3IpOyB9IFxuLnBlcmlvZC1tb250aC1kYWlseS1ub3RlLWRvdCB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWRhaWx5LW5vdGUtZG90LWNvbG9yLCB2YXIoLS10ZXh0LWFjY2VudCkpOyB9XG4ucGVyaW9kLW1vbnRoLWRhaWx5LW5vdGUtZG90LW90aGVyLW1vbnRoIHsgb3BhY2l0eTogMC40OyB9XG5cbi8qIC0tLSBUYWJzICYgU2VhcmNoIEhlYWRlciAtLS0gKi9cbi50YWJzLWNvbnRlbnQtd3JhcHBlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGZsZXg6IDEgMSBhdXRvO1xuICBtaW4taGVpZ2h0OiAwO1xuICBwYWRkaW5nLWJvdHRvbTogNjBweDtcbn1cbi5ub3RlLXRhYi1oZWFkZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LXNocmluazogMDtcbiAgd2lkdGg6IDEwMCU7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgbWFyZ2luLWJvdHRvbTogNnB4O1xuICBnYXA6IDhweDtcbn1cbi50YWItY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgXG59XG4ubm90ZS10YWIge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGZsZXg6IDAgMSBhdXRvO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDAuNXJlbSAxcmVtO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgZm9udC1zaXplOiB2YXIoLS10YWItdGl0bGUtZm9udC1zaXplKTtcbiAgZm9udC13ZWlnaHQ6IHZhcigtLXRhYi10aXRsZS1ib2xkKTtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbn1cbi5ub3RlLXRhYjpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpOyB9XG4ubm90ZS10YWIuYWN0aXZlIHtcbiAgYm9yZGVyLWJvdHRvbS1jb2xvcjogdmFyKC0tc2VsZWN0ZWQtdGFiLWNvbG9yKTtcbn1cbi5ub3RlLXRhYi5kcmFnZ2luZyB7XG4gIG9wYWNpdHk6IDAuNTtcbiAgY3Vyc29yOiBncmFiYmluZztcbn1cbi5ub3RlLXRhYi5kcmFnLW92ZXItaW5kaWNhdG9yLWJlZm9yZTo6YmVmb3JlLFxuLm5vdGUtdGFiLmRyYWctb3Zlci1pbmRpY2F0b3ItYWZ0ZXI6OmFmdGVyIHtcbiAgY29udGVudDogJyc7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAxMCU7XG4gIGJvdHRvbTogMTAlO1xuICB3aWR0aDogMnB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zZWxlY3RlZC10YWItY29sb3IpO1xufVxuLm5vdGUtdGFiLmRyYWctb3Zlci1pbmRpY2F0b3ItYmVmb3JlOjpiZWZvcmUgeyBsZWZ0OiAwOyB9XG4ubm90ZS10YWIuZHJhZy1vdmVyLWluZGljYXRvci1hZnRlcjo6YWZ0ZXIgeyByaWdodDogMDsgfVxuLnNlYXJjaC13cmFwcGVyIHtcbiAgZmxleC1ncm93OiAxO1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICBwYWRkaW5nLXJpZ2h0OiA4cHg7XG59XG5cbi8qIC0tLSBNb2JpbGUtU3BlY2lmaWMgVGFiIENvbXBhY3Rpb24gLS0tICovXG5ib2R5LmlzLW1vYmlsZSAubm90ZS10YWIge1xuICAgIHBhZGRpbmc6IDAuNXJlbSAwLjZyZW07IC8qIFJlZHVjZWQgaG9yaXpvbnRhbCBwYWRkaW5nICovXG4gICAgZ2FwOiA1cHg7IC8qIFJlZHVjZWQgZ2FwIGJldHdlZW4gaWNvbiBhbmQgdGV4dCAqL1xufVxuXG5ib2R5LmlzLW1vYmlsZSAudGFiLWljb24ge1xuICAgIHdpZHRoOiAxOHB4OyAvKiBTbWFsbGVyIGljb24gd2lkdGggKi9cbiAgICBoZWlnaHQ6IDE4cHg7IC8qIFNtYWxsZXIgaWNvbiBoZWlnaHQgKi9cbn1cblxuYm9keS5pcy1tb2JpbGUgLnBtLXNlYXJjaC1pbnB1dCB7XG4gICAgZmxleC1ncm93OiAxOyAvKiBBbGxvdyBzZWFyY2ggaW5wdXQgdG8gdGFrZSBtb3JlIHNwYWNlICovXG59XG5cbi8qIC0tLSBVbmlmaWVkIFNlYXJjaCBJbnB1dCAtLS0gKi9cbi5wbS1zZWFyY2gtY29udGFpbmVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHdpZHRoOiAxMDAlO1xufVxuLnBtLXNlYXJjaC1pbnB1dCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtcyk7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBwYWRkaW5nOiA0cHggMjhweCA0cHggOHB4O1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgbGluZS1oZWlnaHQ6IHZhcigtLWxpbmUtaGVpZ2h0LW5vcm1hbCk7XG59XG4ucG0tc2VhcmNoLWlucHV0OmZvY3VzIHtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG59XG5cbi8qIC0tLSBTY3JhdGNocGFkIENvbnRlbnQgJiBCdXR0b25zIC0tLSAqL1xuLnNjcmF0Y2hwYWQtd3JhcHBlciB7XG4gIGZsZXg6IDEgMSBhdXRvO1xuICBkaXNwbGF5OiBncmlkO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG59XG4uc2NyYXRjaC1jb250ZW50OmZvY3VzIHtcbiAgICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDtcbiAgICBvdXRsaW5lOiBub25lICFpbXBvcnRhbnQ7XG4gICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50O1xufVxuLyogVGhpcyBpcyB0aGUgdmlzdWFsIGN1dG91dCAqL1xuLnNjcmF0Y2hwYWQtd3JhcHBlcjo6YmVmb3JlIHtcbiAgY29udGVudDogJyc7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xuICByaWdodDogMDtcbiAgd2lkdGg6IDU2cHg7XG4gIGhlaWdodDogNjRweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICB6LWluZGV4OiAzO1xuICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiB2YXIoLS1yYWRpdXMtbSk7XG59XG4uc2NyYXRjaHBhZC13cmFwcGVyLm1hcmtkb3duLXByZXZpZXctdmlldyB7XG4gIGFsaWduLWNvbnRlbnQ6IHN0YXJ0OyBcbn1cbi5zY3JhdGNocGFkLXdyYXBwZXIubWFya2Rvd24tcHJldmlldy12aWV3IHAge1xuICBtYXJnaW4tYmxvY2stc3RhcnQ6IDAgIWltcG9ydGFudDtcbiAgbWFyZ2luLWJsb2NrLWVuZDogMC41ZW0gIWltcG9ydGFudDsgXG59XG4uc2NyYXRjaHBhZC1hY3Rpb25zLWNvbnRhaW5lciB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiA4cHg7XG4gIHJpZ2h0OiA4cHg7XG4gIHotaW5kZXg6IDEwO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBnYXA6IDZweDtcbn1cbi5zY3JhdGNocGFkLWFjdGlvbi1idG4ge1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1zKTtcbiAgcGFkZGluZzogNHB4O1xuICBsaW5lLWhlaWdodDogMTtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG4uc2NyYXRjaHBhZC1hY3Rpb24tYnRuIC5zdmctaWNvbiB7XG4gICAgd2lkdGg6IDE2cHg7XG4gICAgaGVpZ2h0OiAxNnB4O1xufVxuLnNjcmF0Y2hwYWQtYWN0aW9uLWJ0bjpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbn1cblxuLyogLS0tIFNjcmF0Y2hwYWQgVGV4dGFyZWEgJiBIaWdobGlnaHRlciAtLS0gKi9cbi5zY3JhdGNoLWJhc2Uge1xuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDAuNzVyZW0gMy41cmVtIDAuNXJlbSAwLjVyZW07XG4gIGJvcmRlcjogbm9uZTtcbiAgZm9udC1mYW1pbHk6IHZhcigtLXNjcmF0Y2gtZm9udC1mYW1pbHkpO1xuICBmb250LXNpemU6IHZhcigtLXNjcmF0Y2gtZm9udC1zaXplKTtcbiAgZm9udC13ZWlnaHQ6IHZhcigtLXNjcmF0Y2gtYm9sZCk7XG4gIGxpbmUtaGVpZ2h0OiAxLjU7XG4gIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbiAgd29yZC1icmVhazogYnJlYWstd29yZDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgZ3JpZC1hcmVhOiAxIC8gMTtcbiAgb3ZlcmZsb3c6IGF1dG87XG59XG4uc2NyYXRjaC1oaWdobGlnaHRlciB7XG4gIHotaW5kZXg6IDE7XG4gIGNvbG9yOiB0cmFuc3BhcmVudDtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59XG4uc2NyYXRjaC1oaWdobGlnaHRlciBtYXJrIHtcbiAgY29sb3I6IHRyYW5zcGFyZW50O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zY3JhdGNocGFkLWhpZ2hsaWdodC1jb2xvcik7XG4gIGJvcmRlci1yYWRpdXM6IDNweDtcbn1cbi5zY3JhdGNoLWNvbnRlbnQge1xuICB6LWluZGV4OiAyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgcmVzaXplOiBub25lO1xufVxuLnNjcmF0Y2gtY29udGVudDpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7XG59XG4uc2NyYXRjaC1jb250ZW50OjpzZWxlY3Rpb24ge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zY3JhdGNocGFkLWhpZ2hsaWdodC1jb2xvcikgIWltcG9ydGFudDtcbn1cblxuLyogLS0tIE5vdGVzICYgVGFza3MgTGlzdCBTdHlsZXMgLS0tICovXG5cbi5ub3Rlcy1jb250YWluZXIsIC50YXNrcy1jb250YWluZXIge1xuICBvdmVyZmxvdy15OiBhdXRvO1xuICBmbGV4OiAxIDEgYXV0bztcbiAgbWluLWhlaWdodDogMDtcbiAgcGFkZGluZzogNHB4O1xuICBkaXNwbGF5OiBmbGV4OyAgICAgICAgIFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBnYXA6IDhweDtcbn1cblxuLm5vdGUtcm93LCAudGFzay1yb3cge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nOiA4cHg7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBvdXRsaW5lOiBub25lO1xuICB3aWR0aDogMTAwJTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuLm5vdGUtcm93IHtcbiAgZ2FwOiAxZW07XG59XG4udGFzay1yb3cge1xuICBnYXA6IDAuNWVtO1xuXG59XG4udGFzay1yb3cgLnRhc2stdGV4dCA+IHAge1xuICAgIG1hcmdpbjogMDtcbiAgICBwYWRkaW5nOiAwO1xufVxuXG4udGFzay10ZXh0IC50YXNrLWNvbXBsZXRlZC10ZXh0IHtcbiAgICB0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDtcbiAgICBvcGFjaXR5OiAwLjY7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xufVxuXG4jbm90ZXMtbGlzdC12aWV3IC5ub3RlLXJvdzpob3ZlcixcbiNhc3NldC1saXN0LXZpZXcgLm5vdGUtcm93OmhvdmVyLFxuI3Bpbm5lZC1ub3Rlcy1saXN0IC5ub3RlLXJvdzpob3Zlcixcbi50YXNrcy1jb250YWluZXIgLnRhc2stcm93OmhvdmVyLFxuI25vdGVzLWxpc3QtdmlldyAubm90ZS1yb3c6Zm9jdXMsXG4jYXNzZXQtbGlzdC12aWV3IC5ub3RlLXJvdzpmb2N1cyxcbiNwaW5uZWQtbm90ZXMtbGlzdCAubm90ZS1yb3c6Zm9jdXMsXG4udGFza3MtY29udGFpbmVyIC50YXNrLXJvdzpmb2N1cyB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbm90ZXMtaG92ZXItY29sb3IpO1xufVxuXG4ubm90ZS1zdGF0dXMtZG90IHsgXG4gIHdpZHRoOiA4cHg7IFxuICBoZWlnaHQ6IDhweDsgXG4gIGJvcmRlci1yYWRpdXM6IDUwJTsgXG4gIGZsZXgtc2hyaW5rOiAwOyBcbn1cbi5ub3RlLXN0YXR1cy1kb3QtY3JlYXRlZCB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLW5vdGUtY3JlYXRlZC1jb2xvcik7IH1cbi5ub3RlLXN0YXR1cy1kb3QtbW9kaWZpZWQgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1ub3RlLW1vZGlmaWVkLWNvbG9yKTsgfVxuLm5vdGUtcm93IC5ub3RlLXRpdGxlLXdyYXBwZXIgeyBcbiAgZGlzcGxheTogZmxleDsgXG4gIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xuICBnYXA6IDZweDsgXG4gIGZsZXg6IDE7IFxuICBtaW4td2lkdGg6IDA7IFxufVxuLm5vdGUtcm93IC5ub3RlLXRpdGxlIHsgXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7IFxuICBvdmVyZmxvdzogaGlkZGVuOyBcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IFxuICBmb250LXNpemU6IHZhcigtLW5vdGVzLWZvbnQtc2l6ZSk7IFxuICBmb250LXdlaWdodDogdmFyKC0tbm90ZXMtYm9sZCk7IFxufVxuLm5vdGUtcm93IC5ub3RlLW1ldGEtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZ2FwOiAxZW07XG4gIGZsZXgtc2hyaW5rOiAwO1xuICBtYXJnaW4tbGVmdDogMWVtO1xufVxuLm5vdGUtcm93IC5ub3RlLWZpbGUtc2l6ZSB7XG4gIGZvbnQtc2l6ZTogMC44ZW07XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgd2lkdGg6IDY1cHg7XG4gIHRleHQtYWxpZ246IHJpZ2h0O1xufVxuLm5vdGUtcm93IC5ub3RlLW1vZC1kYXRlIHsgXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7IFxuICBmb250LXNpemU6IDAuOGVtOyBcbiAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICB3aWR0aDogODVweDtcbiAgdGV4dC1hbGlnbjogcmlnaHQgXG59XG5cbi8qIC0tLSBUYXNrcyBTcGVjaWZpYyBTdHlsZXMgLS0tICovXG4udGFzay1ncm91cC1jb250YWluZXIge1xuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICBwYWRkaW5nOiA4cHg7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbn1cblxuLyogLS0tIFBvcHVwcyAmIFRvb2x0aXBzIC0tLSAqL1xuLyogQ29tbW9uIGJhc2Ugc3R5bGVzIGZvciBwb3B1cHMgKi9cbi5vdGhlci1ub3Rlcy1wb3B1cCwgLmN1c3RvbS1zdWdnZXN0aW9uLWNvbnRhaW5lciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHotaW5kZXg6IDEwMDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgYm9yZGVyOiAxcHggc29saWQgIzRhNGE0YTtcbiAgICBib3JkZXItcmFkaXVzOiAxNXB4O1xuICAgIGJveC1zaGFkb3c6IDAgNHB4IDEycHggcmdiYSgwLDAsMCwwLjIpO1xuICAgIG1pbi13aWR0aDogNDUwcHg7XG4gICAgbWF4LXdpZHRoOiA2NThweDtcbn1cblxuLyogTWFpbiBwb3B1cCBzcGVjaWZpYyBzdHlsZXMgKi9cbi5vdGhlci1ub3Rlcy1wb3B1cCB7XG4gICAgcGFkZGluZzogMDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjsgLyogSGlkZSBvdmVyZmxvdyBvbiB0aGUgbWFpbiBjb250YWluZXIgKi9cbiAgICBtYXgtaGVpZ2h0OiAyNTBweDsgLyogSW5jcmVhc2VkIHNsaWdodGx5IGZvciBtb2JpbGUgaGVhZGVyICovXG59XG5cbi8qIFBvcHVwIGhlYWRlciAqL1xuLnBvcHVwLWhlYWRlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIGZsZXgtc2hyaW5rOiAwOyAvKiBQcmV2ZW50IGhlYWRlciBmcm9tIHNocmlua2luZyAqL1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBnYXA6IDEwcHg7XG59XG4ucG9wdXAtaGVhZGVyLXRpdGxlIHtcbiAgICBmb250LXdlaWdodDogbm9ybWFsO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICBmbGV4LWdyb3c6IDE7IC8qIEFsbG93IHRpdGxlIHRvIHRha2UgYXZhaWxhYmxlIHNwYWNlICovXG4gICAgZmxleC1zaHJpbms6IDE7IC8qIEFsbG93IHRpdGxlIHRvIHNocmluayBpZiBuZWVkZWQgKi9cbiAgICBtaW4td2lkdGg6IDA7IC8qIEltcG9ydGFudCBmb3IgdGV4dC1vdmVyZmxvdyB0byB3b3JrIHdpdGggZmxleCBpdGVtcyAqL1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7IC8qIFByZXZlbnQgdGl0bGUgZnJvbSB3cmFwcGluZyAqL1xuICAgIG92ZXJmbG93OiBoaWRkZW47IC8qIEhpZGUgb3ZlcmZsb3cgKi9cbiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsgLyogQWRkIGVsbGlwc2lzIGZvciBsb25nIHRpdGxlcyAqL1xuICAgIGZvbnQtc2l6ZTogLS12YXIoLS1vdGhlci1ub3RlLXBvcHVwLWZvbnQtc2l6ZSk7XG4gICAgLyogbWF4LXdpZHRoOiA0MjBweDsgICovXG4gICAgXG59XG5cbi5wb3B1cC1jbG9zZS1idG4ge1xuICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICB3aWR0aDogMTZweDtcbiAgICBoZWlnaHQ6IDE2cHg7XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgIC8qIERlZmF1bHQgZm9yIERBUksgdGhlbWU6IExpZ2h0IGdyZXkgY2lyY2xlICovXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzljOWI5YjsgXG4gICAgLyogRGVmYXVsdCBmb3IgREFSSyB0aGVtZTogRGFyayAneCcgaWNvbiAqL1xuICAgIGNvbG9yOiAjMzgzODM4OyBcbiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMXMgZWFzZS1pbi1vdXQsIGNvbG9yIDAuMXMgZWFzZS1pbi1vdXQ7XG59XG5cbi5wb3B1cC1jbG9zZS1idG46aG92ZXIge1xuICAgIC8qIEhvdmVyIGZvciBEQVJLIHRoZW1lOiBFdmVuIGxpZ2h0ZXIgY2lyY2xlICovXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTtcbn1cblxuLyogLS0tIExpZ2h0IFRoZW1lIE92ZXJyaWRlcyAtLS0gKi9cbmJvZHkudGhlbWUtbGlnaHQgLnBvcHVwLWNsb3NlLWJ0biB7XG4gICAgLyogRGVmYXVsdCBmb3IgTElHSFQgdGhlbWU6IERhcmsgZ3JleSBjaXJjbGUgKi9cbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNWM1YzVjO1xuICAgIC8qIERlZmF1bHQgZm9yIExJR0hUIHRoZW1lOiBXaGl0ZSAneCcgaWNvbiAqL1xuICAgIGNvbG9yOiAjZmZmZmZmO1xufVxuXG5ib2R5LnRoZW1lLWxpZ2h0IC5wb3B1cC1jbG9zZS1idG46aG92ZXIge1xuICAgIC8qIEhvdmVyIGZvciBMSUdIVCB0aGVtZTogRXZlbiBkYXJrZXIgY2lyY2xlICovXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzM4MzgzODtcbn1cblxuLnBvcHVwLWNsb3NlLWJ0biAuc3ZnLWljb24ge1xuICAgIHdpZHRoOiAxNHB4O1xuICAgIGhlaWdodDogMTRweDtcbn1cblxuLyogQ29udGVudCB3cmFwcGVyIGZvciBzY3JvbGxpbmcgYW5kIHBhZGRpbmcgKi9cbi5wb3B1cC1jb250ZW50LXdyYXBwZXIge1xuICAgIHBhZGRpbmc6IDhweDtcbiAgICBvdmVyZmxvdy15OiBhdXRvO1xufVxuXG4vKiBTdWdnZXN0aW9uIGNvbnRhaW5lciBzcGVjaWZpYyBzdHlsZXMgKi9cbi5jdXN0b20tc3VnZ2VzdGlvbi1jb250YWluZXIge1xuICAgIHotaW5kZXg6IDk5OTtcbiAgICBtYXJnaW4tdG9wOiA0cHg7XG4gICAgcGFkZGluZzogOHB4O1xuICAgIG1heC1oZWlnaHQ6IDIwMHB4O1xuICAgIG92ZXJmbG93LXk6IGF1dG87XG59XG5cbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIHtcbiAgZGlzcGxheTogZmxleDsgXG4gIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OyBcbiAgZ2FwOiA4cHg7IFxuICBwYWRkaW5nOiAxMnB4IDJweCA4cHggMnB4OyBcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICBjdXJzb3I6IHBvaW50ZXI7IFxuICB3aGl0ZS1zcGFjZTogbm9ybWFsO1xuICB3b3JkLWJyZWFrOiBicmVhay13b3JkOyBcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IFxuICBmb250LXNpemU6IHZhcigtLW90aGVyLW5vdGUtcG9wdXAtZm9udC1zaXplKTtcbn1cblxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gLnBvcHVwLWZpbGUtZG90IHtcbiAgICB3aWR0aDogOHB4O1xuICAgIGhlaWdodDogOHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICBmbGV4LXNocmluazogMDtcbiAgICBtYXJnaW4tbGVmdDogY2FsYyg4cHgpOyAvKiBQdXNoIGRvdCBvdmVyIGJ5IGNoZWNrYm94IHdpZHRoICsgc21hbGwgZ2FwICovXG59XG5cbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtOmhvdmVyIHsgXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpOyBcbn1cbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC5zdmctaWNvbiB7XG4gIGZsZXgtc2hyaW5rOiAwO1xuICB3aWR0aDogMS4yZW07XG4gIGhlaWdodDogMS4yZW07XG59XG5cbi5ub3RlLXJvdyAubm90ZS1zdGF0dXMtZG90LFxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gLnBvcHVwLWZpbGUtZG90LFxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gLnBvcHVwLWFzc2V0LXRodW1ibmFpbCB7XG4gICAgbWFyZ2luLXRvcDogNXB4OyBcbiAgICBhbGlnbi1zZWxmOiBmbGV4LXN0YXJ0OyBcbn1cblxuLm5vdGUtcm93OmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbn1cblxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gcCB7XG4gICAgbWFyZ2luOiAwO1xufVxuLnBvcHVwLWZpbGUtZG90IHsgXG4gIHdpZHRoOiA4cHg7IFxuICBoZWlnaHQ6IDhweDsgXG4gIGJvcmRlci1yYWRpdXM6IDUwJTsgXG4gIGZsZXgtc2hyaW5rOiAwOyBcbn1cbi5jdXN0b20tc3VnZ2VzdGlvbi1pdGVtIHsgXG4gIHBhZGRpbmc6IDhweCAxMnB4OyBcbiAgY3Vyc29yOiBwb2ludGVyOyBcbiAgZm9udC1zaXplOiB2YXIoLS1mb250LXVpLXNtYWxsKTsgXG59XG4uY3VzdG9tLXN1Z2dlc3Rpb24taXRlbTpob3ZlciB7IFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTsgXG59XG4uc2V0dGluZy1pdGVtLWNvbnRyb2wgeyBcbiAgcG9zaXRpb246IHJlbGF0aXZlOyBcbn1cbmJvZHk6aGFzKC5ub3RlLXRpdGxlLXdyYXBwZXI6aG92ZXIpIC50b29sdGlwLCBcbmJvZHk6aGFzKC5ub3RlLXRpdGxlLWNlbGw6aG92ZXIpIC50b29sdGlwLFxuYm9keTpoYXMoLnRhc2stdGV4dDpob3ZlcikgLnRvb2x0aXAge1xuICB0ZXh0LWFsaWduOiBsZWZ0OyBcbiAgcGFkZGluZzogNnB4IDEwcHg7IFxuICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7IFxuICBtYXgtd2lkdGg6IDQwMHB4OyBcbiAgdHJhbnNpdGlvbi1kZWxheTogMC41cyAhaW1wb3J0YW50OyBcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpOyBcbiAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsMCwwLDAuMik7IFxuICBib3JkZXItcmFkaXVzOiAxNXB4OyBcbiAgYm9yZGVyOiAxcHggc29saWQgIzRhNGE0YTsgXG4gIGZvbnQtc2l6ZTogdmFyKC0tb3RoZXItbm90ZS1wb3B1cC1mb250LXNpemUpOyBcbiAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTsgXG4gIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG59XG5cbi8qIC0tLSBWZXJ0aWNhbCBWaWV3IC0tLSAqL1xuLnZlcnRpY2FsLWNhbGVuZGFyLXNjcm9sbGVyIHsgXG4gIGZsZXg6IDE7IFxuICBvdmVyZmxvdy15OiBhdXRvOyBcbn1cbi52ZXJ0aWNhbC1tb250aC13cmFwcGVyIHsgXG4gIG1hcmdpbi1ib3R0b206IDJyZW07IFxufVxuLnZlcnRpY2FsLW1vbnRoLXRpdGxlIHtcbiAgZm9udC1zaXplOiB2YXIoLS1tYWluLW1vbnRoLXllYXItdGl0bGUtZm9udC1zaXplKTtcbiAgZm9udC13ZWlnaHQ6IHZhcigtLW1haW4tbW9udGgteWVhci10aXRsZS13ZWlnaHQpO1xuICBwb3NpdGlvbjogc3RpY2t5OyBcbiAgdG9wOiAwOyBcbiAgei1pbmRleDogMTA7XG4gIG1hcmdpbjogMC42cmVtIDA7IFxuICBoZWlnaHQ6IDJyZW07IFxuICBkaXNwbGF5OiBmbGV4OyBcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjsgXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi50aGVtZS1saWdodCAudmVydGljYWwtbW9udGgtdGl0bGUge1xuICAgIGNvbG9yOiB2YXIoLS1tb250aC1jb2xvci10aGVtZWQpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG59XG4udGhlbWUtZGFyayAudmVydGljYWwtbW9udGgtdGl0bGUge1xuICAgIGNvbG9yOiB2YXIoLS1tb250aC1jb2xvci10aGVtZWQpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgIC8qIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7ICBFbnN1cmUgdGV4dCBpcyByZWFkYWJsZSAqL1xufVxuXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci52ZXJ0aWNhbC12aWV3LWFjdGl2ZSAudGFicy1jb250ZW50LXdyYXBwZXIgeyBkaXNwbGF5OiBub25lOyB9XG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lcjpub3QoLnZlcnRpY2FsLXZpZXctYWN0aXZlKSAudmVydGljYWwtY2FsZW5kYXItc2Nyb2xsZXIgeyBkaXNwbGF5OiBub25lOyB9XG5cbi8qIC0tLSBNb2JpbGUtU3BlY2lmaWMgT3ZlcnJpZGVzIC0tLSAqL1xuLmlzLW1vYmlsZSAubm90ZXMtdGFibGUgeyBcbiAgd2lkdGg6IDEwMCU7IFxuICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBcbiAgdGFibGUtbGF5b3V0OiBmaXhlZDsgXG59XG4uaXMtbW9iaWxlIC5ub3Rlcy10YWJsZS1yb3cgeyBcbiAgY3Vyc29yOiBwb2ludGVyOyBcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTsgXG59XG4uaXMtbW9iaWxlIC5ub3Rlcy10YWJsZSAubm90ZS10aXRsZS1jZWxsLCAuaXMtbW9iaWxlIC5ub3Rlcy10YWJsZSAubm90ZS1kYXRlLWNlbGwgeyBcbiAgcGFkZGluZzogMC42cmVtIDAuNXJlbTsgXG4gIHZlcnRpY2FsLWFsaWduOiB0b3A7IFxufVxuLmlzLW1vYmlsZSAubm90ZXMtdGFibGUgLm5vdGUtdGl0bGUtY2VsbCB7IFxuICBkaXNwbGF5OiBmbGV4OyBcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjsgXG4gIGdhcDogOHB4OyBcbiAgd2hpdGUtc3BhY2U6IG5vcm1hbDsgXG4gIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7IFxuICBmb250LXNpemU6IHZhcigtLW5vdGVzLWZvbnQtc2l6ZSk7IFxuICBmb250LXdlaWdodDogdmFyKC0tbm90ZXMtYm9sZCk7IFxufVxuLmlzLW1vYmlsZSAubm90ZXMtdGFibGUgLm5vdGUtZGF0ZS1jZWxsIHsgXG4gIHdpZHRoOiA4NXB4OyBcbiAgdGV4dC1hbGlnbjogcmlnaHQ7IFxuICB3aGl0ZS1zcGFjZTogbm93cmFwOyBcbiAgZm9udC1zaXplOiAwLjhlbTsgXG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsgXG59XG4uaXMtbW9iaWxlIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGgsIC5pcy1tb2JpbGUgLnBlcmlvZC1jYWxlbmRhci10YWJsZSAucHctbGFiZWwtY2VsbCB7IFxuICAvKmZvbnQtc2l6ZTogMTJweDsgKi9cbiAgZm9udC1zaXplOiBjYWxjKHZhcigtLWNhbGVuZGFyLWxhYmVsLWZvbnQtc2l6ZSkgKiAwLjkpO1xuICBwYWRkaW5nOiAwOyBcbn1cblxuLmlzLW1vYmlsZSAucGVyaW9kLWNhbGVuZGFyLXRhYmxlIC5kYXktbnVtYmVyIHsgXG4gICAgZm9udC1zaXplOiBjYWxjKHZhcigtLWNhbGVuZGFyLWRheS1udW1iZXItZm9udC1zaXplKSAqIDAuOSk7XG59XG5cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgLnB3LWxhYmVsLWNlbGwgLmRheS1udW1iZXIsXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIC53ZWVrLW51bWJlci1jZWxsIC5kYXktbnVtYmVyIHtcbiAgICBmb250LXNpemU6IGluaGVyaXQ7IC8qIEluaGVyaXQgdGhlIGNvcnJlY3QgZm9udCBzaXplIGZyb20gdGhlIHBhcmVudCBjZWxsICovXG59XG5cbi8qIERlZmF1bHQgcm93IGhlaWdodCAqL1xuLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0ciB7XG4gICAgaGVpZ2h0OiAzNnB4O1xuICAgIG1pbi1oZWlnaHQ6IDM2cHg7XG59XG5cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdGQge1xuICAgIG1pbi1oZWlnaHQ6IDM2cHg7XG59XG5cbi8qIEFkanVzdCByb3cgaGVpZ2h0IGZvciBjb25kZW5zZWQgbGF5b3V0ICovXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5sYXlvdXQtY29uZGVuc2VkIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHIge1xuICAgIGhlaWdodDogMzBweDtcbiAgICBtaW4taGVpZ2h0OiAzMHB4O1xufVxuXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5sYXlvdXQtY29uZGVuc2VkIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdGQge1xuICAgIG1pbi1oZWlnaHQ6IDMwcHg7XG59XG5cbi8qIEFkanVzdCByb3cgaGVpZ2h0IGZvciBzcGFjaW91cyBsYXlvdXQgKi9cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLmxheW91dC1zcGFjaW91cyAucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRib2R5IHRyIHtcbiAgICBoZWlnaHQ6IDQwcHg7XG4gICAgbWluLWhlaWdodDogNDBweDtcbn1cblxuLnBlcmlvZC1tb250aC1jb250YWluZXIubGF5b3V0LXNwYWNpb3VzIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdGQge1xuICAgIG1pbi1oZWlnaHQ6IDQwcHg7XG59XG5cbi8qIC0tLSBNaXNjIC0tLSAqL1xuLnBlcmlvZC1tb250aC1jb250YWluZXIgLnN2Zy1pY29uIHtcbiAgY29sb3I6IHZhcigtLWljb24tY29sb3IsIGN1cnJlbnRDb2xvcik7XG59XG5cbi8qIC0tLSBVbmlmaWVkIGNsZWFyIGJ1dHRvbiBmb3IgYWxsIHNlYXJjaCBpbnB1dHMgLS0tICovXG4uc2VhcmNoLWlucHV0LWNsZWFyLWJ0biB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHJpZ2h0OiA2cHg7XG4gICAgdG9wOiA1MCU7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xuICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgd2lkdGg6IDE1cHg7XG4gICAgaGVpZ2h0OiAxNXB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjFzIGVhc2UtaW4tb3V0O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICM5YzliOWI7XG4gICAgLyogQ29sb3IgaXMgbm93IHNldCBkaXJlY3RseSBvbiB0aGUgaWNvbiBydWxlIGJlbG93ICovXG59XG5cbi5zZWFyY2gtaW5wdXQtY2xlYXItYnRuOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1O1xufVxuXG4uc2VhcmNoLWlucHV0LWNsZWFyLWJ0biAuc3ZnLWljb24ge1xuICAgIHdpZHRoOiAxM3B4O1xuICAgIGhlaWdodDogMTNweDtcbiAgICAvKiBGSVg6IEZvcmNlIHRoZSBpY29uIGNvbG9yIHRvIGJlIGRhcmsgKi9cbiAgICBjb2xvcjogIzM4MzgzOCAhaW1wb3J0YW50O1xufVxuXG4vKiAtLS0gTGlnaHQgVGhlbWUgT3ZlcnJpZGVzIC0tLSAqL1xuYm9keS50aGVtZS1saWdodCAuc2VhcmNoLWlucHV0LWNsZWFyLWJ0biB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzVjNWM1Yztcbn1cblxuYm9keS50aGVtZS1saWdodCAuc2VhcmNoLWlucHV0LWNsZWFyLWJ0bjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzM4MzgzODtcbn1cblxuYm9keS50aGVtZS1saWdodCAuc2VhcmNoLWlucHV0LWNsZWFyLWJ0biAuc3ZnLWljb24ge1xuICAgIC8qIEZJWDogRm9yY2UgdGhlIGljb24gY29sb3IgdG8gYmUgd2hpdGUgaW4gdGhlIGxpZ2h0IHRoZW1lICovXG4gICAgY29sb3I6ICNmZmZmZmYgIWltcG9ydGFudDtcbn1cblxuLyogLS0tIFRhc2sgSGVhZGVyIEljb25zIC0tLSAqL1xuLnRhc2stZ3JvdXAtaGVhZGVyIC5pY29uIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cbi50YXNrLWdyb3VwLWhlYWRlciAuaWNvbiAuc3ZnLWljb24ge1xuICAvKndpZHRoOiB2YXIoLS10YXNrLWhlYWRpbmctZm9udC1zaXplKTtcbiAgaGVpZ2h0OiB2YXIoLS10YXNrLWhlYWRpbmctZm9udC1zaXplKTtcbiovXG4gIH1cblxuLyogLS0tIFRhYiBJY29ucyAtLS0gKi9cbi50YWItaWNvbiB7XG4gIHdpZHRoOiAxLjJlbTtcbiAgaGVpZ2h0OiAxLjJlbTtcbn1cbi5ub3RlLXRhYiB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGdhcDogMC41ZW07XG59XG5cbi8qIC0tLSBBc3NldCBMaXN0IFN0eWxlcyAtLS0gKi9cbi5hc3NldC10aHVtYm5haWwsIC5wb3B1cC1hc3NldC10aHVtYm5haWwge1xuICB3aWR0aDogMjhweDtcbiAgaGVpZ2h0OiAyOHB4O1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtcyk7XG4gIG9iamVjdC1maXQ6IGNvdmVyO1xufVxuLnBvcHVwLWFzc2V0LXRodW1ibmFpbCB7XG4gIHdpZHRoOiAyMnB4O1xuICBoZWlnaHQ6IDIycHg7XG59XG4uYXNzZXQtaWNvbi1jb250YWluZXIsIC5hc3NldC10aHVtYm5haWwtY29udGFpbmVyIHtcbiAgd2lkdGg6IDI4cHg7XG4gIGhlaWdodDogMjhweDtcbiAgZmxleC1zaHJpbms6IDA7XG4gIG1hcmdpbi1yaWdodDogOHB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cbi5hc3NldC1pY29uLWNvbnRhaW5lciAuc3ZnLWljb24ge1xuICB3aWR0aDogMjBweDtcbiAgaGVpZ2h0OiAyMHB4O1xufVxuLmFzc2V0LWFjdGlvbi1pY29uIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICB3aWR0aDogMjBweDtcbiAgaGVpZ2h0OiAyMHB4O1xuICBtYXJnaW4tcmlnaHQ6IDZweDtcbn1cbi5hc3NldC1hY3Rpb24taWNvbiA+IGRpdiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0O1xufVxuLmFzc2V0LWFjdGlvbi1pY29uIC5zdmctaWNvbiB7XG4gIHdpZHRoOiAxNnB4O1xuICBoZWlnaHQ6IDE2cHg7XG59XG4uYXNzZXQtYWN0aW9uLWljb24gZGl2Om50aC1jaGlsZCgyKSB7XG4gIG9wYWNpdHk6IDA7XG59XG4ubm90ZS1yb3c6aG92ZXIgLmFzc2V0LWFjdGlvbi1pY29uIGRpdjpudGgtY2hpbGQoMSkge1xuICBvcGFjaXR5OiAwO1xufVxuLm5vdGUtcm93OmhvdmVyIC5hc3NldC1hY3Rpb24taWNvbiBkaXY6bnRoLWNoaWxkKDIpIHtcbiAgb3BhY2l0eTogMTtcbn1cbi5hc3NldC1hY3Rpb24taWNvbjpob3ZlciAuc3ZnLWljb24ge1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LWVycm9yKTtcbn1cblxuLyogLS0tIEFzc2V0IEdyaWQgU3R5bGVzIC0tLSAqL1xuLm5vdGUtbGlzdC13cmFwcGVyLmFzc2V0cy1ncmlkLXZpZXcge1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoMTUwcHgsIDFmcikpO1xuICAgIGdhcDogMTZweDtcbiAgICBwYWRkaW5nLXRvcDogOHB4O1xufVxuLmFzc2V0LWdyaWQtaXRlbSB7XG4gICAgLyogZmxleC1iYXNpczogY2FsYyg1MCUgLSA4cHgpOyAqL1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgcGFkZGluZzogOHB4O1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7IC8qIFRISVMgSVMgVEhFIENSSVRJQ0FMIE1JU1NJTkcgTElORSAqL1xufVxuLmFzc2V0LWdyaWQtcHJldmlldyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgYXNwZWN0LXJhdGlvOiA0IC8gMztcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjsgXG4gICAgYm9yZGVyLXJhZGl1czogOHB4OyAgXG59XG4uYXNzZXQtZ3JpZC1wcmV2aWV3IGltZyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIG9iamVjdC1maXQ6IGNvdmVyO1xufVxuLmFzc2V0LWdyaWQtbmFtZSB7XG4gICAgcGFkZGluZzogOHB4IDRweCAwOyAvKiBBZGp1c3RlZCBwYWRkaW5nICovXG4gICAgbWFyZ2luLXRvcDogOHB4OyAvKiBBZGRzIHNwYWNlIGJldHdlZW4gdGhlIGltYWdlIGFuZCB0ZXh0ICovXG4gICAgZm9udC1zaXplOiAwLjllbTtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbn1cblxuLmFzc2V0LWdyaWQtaXRlbTpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW5vdGVzLWhvdmVyLWNvbG9yKTtcbiAgYm9yZGVyLWNvbG9yOiByZ2JhKDIwMCwgMjAwLCAyMDAsIDAuNzUpOyAvKiBBIGxpZ2h0ZXIsIHNlbWktdHJhbnNwYXJlbnQgZ3JheSAqL1xufVxuXG4vKiAtLS0gU2V0dGluZ3MgVGFicyAtLS0gKi9cbi5wZXJpb2Qtc2V0dGluZ3MtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG4vKiBCYXNlIHN0eWxlIGZvciBhbGwgbmF2aWdhdGlvbiBidXR0b25zIGluIHRoZSBzZXR0aW5ncyBwYW5lbCAqL1xuLnBlcmlvZC1zZXR0aW5ncy1uYXYgYnV0dG9uIHtcbiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZS1pbi1vdXQsIGNvbG9yIDAuMnMgZWFzZS1pbi1vdXQ7XG59XG5cbi8qIEhpZ2hsaWdodCBzdHlsZSBmb3IgdGhlIGN1cnJlbnRseSBhY3RpdmUgc2V0dGluZ3MgdGFiIGJ1dHRvbiAqL1xuLnBlcmlvZC1zZXR0aW5ncy1uYXYgYnV0dG9uLmlzLWFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpOyAvKiBTdGFuZGFyZCBPYnNpZGlhbiB2YXJpYWJsZSBmb3IgY29udHJhc3QgKi9cbn1cblxuLnBlcmlvZC1zZXR0aW5ncy1jb250YWluZXIgLnNldHRpbmctaXRlbS1oZWFkaW5nIHtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xufVxuXG4ucGVyaW9kLXNldHRpbmdzLW5hdiB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBhZGRpbmctcmlnaHQ6IDEuNXJlbTtcbiAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICB3aWR0aDogMTYwcHg7XG4gIGZsZXgtc2hyaW5rOiAwO1xuICBnYXA6IDRweDtcbn1cbi5wZXJpb2Qtc2V0dGluZ3MtbmF2LWJ1dHRvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgIHBhZGRpbmc6IDAuNzVyZW0gMC41cmVtO1xuICAgICAgbWFyZ2luLWJvdHRvbTogMC4yNXJlbTtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1tKTtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIGZvbnQtc2l6ZTogdmFyKC0tZm9udC11aS1zbWFsbCk7XG59XG4ucGVyaW9kLXNldHRpbmdzLW5hdi1idXR0b246aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xufVxuLnBlcmlvZC1zZXR0aW5ncy1uYXYtYnV0dG9uLmlzLWFjdGl2ZSB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxuLnBlcmlvZC1zZXR0aW5ncy1jb250ZW50IHtcbiAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICAgIHBhZGRpbmctbGVmdDogMS41cmVtO1xuICAgICAgb3ZlcmZsb3cteTogYXV0bztcbn1cbi5wZXJpb2Qtc2V0dGluZ3MtY29udGVudCA+IDpmaXJzdC1jaGlsZCB7XG4gICAgLyogUmVtb3ZlIHRoZSBicm93c2VyJ3MgZGVmYXVsdCB0b3AgbWFyZ2luIGZyb20gdGhlIGhlYWRlciAqL1xuICAgIG1hcmdpbi10b3A6IDA7XG4gICAgXG4gICAgLyogQWRkIGEgc21hbGwgYW1vdW50IG9mIHBhZGRpbmcgdG8gdmVydGljYWxseSBhbGlnbiBpdCB3aXRoIHRoZSB0ZXh0IGluc2lkZSB0aGUgYnV0dG9ucyAqL1xuICAgIHBhZGRpbmctdG9wOiA2cHg7IFxufVxuLnBvcHVwLXNlY3Rpb24taGVhZGVyIHtcbiAgICBmb250LXNpemU6IDAuOGVtO1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgIGxldHRlci1zcGFjaW5nOiAwLjA1ZW07XG4gICAgbWFyZ2luOiAxMHB4IDhweCA0cHg7XG4gICAgcGFkZGluZzogMDtcbn1cbi5wb3B1cC1zZXBhcmF0b3Ige1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgbWFyZ2luOiA2cHggOHB4O1xufVxuLm90aGVyLW5vdGVzLXBvcHVwIC5wb3B1cC1zZWN0aW9uLWhlYWRlcjpmaXJzdC1jaGlsZCB7XG4gICAgbWFyZ2luLXRvcDogNHB4O1xufVxuLm5vdGUtZ3JvdXAtaGVhZGVyIHtcbiAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgICBsZXR0ZXItc3BhY2luZzogMC4wNWVtO1xuICAgIHBhZGRpbmc6IDEycHggNHB4IDRweDtcbn1cbi5ub3RlLXRpdGxlLXBhdGgtd3JhcHBlcixcbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC5ub3RlLXRpdGxlLXBhdGgtd3JhcHBlciB7XG4gICAgZmxleC1ncm93OiAxOyAgICBcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgbWluLXdpZHRoOiAwOyBcbn1cbi5ub3RlLXJvdyAubm90ZS1wYXRoLFxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gLm5vdGUtcGF0aCB7XG4gICAgZm9udC1zaXplOiAwLjhlbTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgIG1hcmdpbi10b3A6IDJweDtcbn1cblxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gLm5vdGUtaWNvbiB7XG4gICAgZmxleC1zaHJpbms6IDA7XG4gICAgbWFyZ2luLWxlZnQ6IDhweDsgLyogTWF0Y2ggY2hlY2tib3ggd2lkdGggKyBzbWFsbCBnYXAgKi9cbn1cblxuXG4vKiAtLS0gTm90ZSBHcm91cCBDb2xsYXBzZSBTdHlsZXMgLS0tICovXG4ubm90ZS1ncm91cC1jb250YWluZXIge1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7IC8qIEFkZHMgYSBzdWJ0bGUsIHRoZW1lLWF3YXJlIGJvcmRlciAqL1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtbCk7IC8qIFJvdW5kcyB0aGUgY29ybmVycyBvZiB0aGUgY2FyZCAqL1xuICBwYWRkaW5nOiAwIDhweCA4cHg7IC8qIEFkZHMgc29tZSBpbnRlcm5hbCBzcGFjaW5nIGZvciB0aGUgbm90ZSBsaXN0ICovXG4gIG1hcmdpbi1ib3R0b206IDEycHg7IC8qIEluY3JlYXNlcyBzcGFjZSBiZXR3ZWVuIGNhcmRzICovXG59XG4ubm90ZS1ncm91cC1oZWFkZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gIGZvbnQtc2l6ZTogMC44NWVtO1xuICBmb250LXdlaWdodDogYm9sZDtcbiAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICBsZXR0ZXItc3BhY2luZzogMC4wNWVtO1xuICBwYWRkaW5nOiAxMnB4IDRweCA0cHg7XG59XG5cbi5ub3RlLWdyb3VwLWhlYWRlcjpob3ZlciB7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG59XG4ubm90ZS1ncm91cC1oZWFkZXItY29udGVudCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGdhcDogNnB4O1xufVxuLm5vdGUtZ3JvdXAtY291bnQge1xuICBmb250LXNpemU6IDAuOWVtO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgcGFkZGluZzogMXB4IDVweDtcbn1cbi5ub3RlLWdyb3VwLWNvbGxhcHNlLWljb24gLnN2Zy1pY29uIHtcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnMgZWFzZS1pbi1vdXQ7XG4gIHdpZHRoOiAxNnB4O1xuICBoZWlnaHQ6IDE2cHg7XG59XG4ubm90ZS1ncm91cC1jb250YWluZXIuaXMtY29sbGFwc2VkIC5ub3RlLWdyb3VwLWNvbGxhcHNlLWljb24gLnN2Zy1pY29uIHtcbiAgdHJhbnNmb3JtOiByb3RhdGUoLTkwZGVnKTtcbn1cbi5ub3RlLWxpc3Qtd3JhcHBlciB7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHRyYW5zaXRpb246IG1heC1oZWlnaHQgMC4zcyBlYXNlLWluLW91dCwgbWFyZ2luLXRvcCAwLjNzIGVhc2UtaW4tb3V0O1xuICBtYXJnaW4tdG9wOiA0cHg7XG59XG4ubm90ZS1ncm91cC1jb250YWluZXIuaXMtY29sbGFwc2VkIC5ub3RlLWxpc3Qtd3JhcHBlciB7XG4gIG1heC1oZWlnaHQ6IDA7XG4gIG1hcmdpbi10b3A6IDA7XG59XG5cbi8qIC0tLSBQdWxsIHRvIFJlZnJlc2ggSW5kaWNhdG9yIC0tLSAqL1xuLnBtLXJlZnJlc2gtaW5kaWNhdG9yIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgaGVpZ2h0OiA1MHB4O1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBjb2xvcjogdmFyKC0taWNvbi1jb2xvcik7XG4gICAgei1pbmRleDogNTtcbiAgICBvcGFjaXR5OiAwO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTBweCkgc2NhbGUoMC43KTtcbiAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4zcywgb3BhY2l0eSAwLjNzO1xufVxuLnBtLXJlZnJlc2gtaW5kaWNhdG9yLmlzLXB1bGxpbmcge1xuICAgIG9wYWNpdHk6IDAuODtcbn1cbi5wbS1yZWZyZXNoLWluZGljYXRvci5pcy1yZWFkeSB7XG4gICAgb3BhY2l0eTogMTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCkgc2NhbGUoMSk7XG59XG5cbi5wbS1yZWZyZXNoLWluZGljYXRvci5pcy1yZWZyZXNoaW5nIC5zdmctaWNvbiB7XG4gICAgYW5pbWF0aW9uOiBzcGluIDEuMnMgbGluZWFyIGluZmluaXRlO1xufVxuLyogUmUtdXNlIHRoZSBzcGluIGFuaW1hdGlvbiBmcm9tIHRoZSByZWZyZXNoIGJ1dHRvbiAqL1xuQGtleWZyYW1lcyBzcGluIHtcbiAgICBmcm9tIHsgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH1cbiAgICB0byB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH1cbn1cbi8qIC0tLSBNb2JpbGUgS2V5Ym9hcmQgSGFuZGxpbmcgLS0tICovXG4uc2NyYXRjaC1jb250ZW50LmlzLWVkaXRpbmctbW9iaWxlIHtcbiAgICBwYWRkaW5nLWJvdHRvbTogNDV2aDsgLyogNDUlIG9mIHRoZSB2aXNpYmxlIHNjcmVlbiBoZWlnaHQgKi9cbn1cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgIFdFRUtFTkQvV0VFSyBISUdITElHSFRJTkcgTE9HSUNcbiAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbi8qIDEuIE5ldXRyYWxpemUgd2Vla2VuZCBzaGFkZSBpbnNpZGUgdGhlIGN1cnJlbnQgd2VlayByb3cgKi9cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHIuY3VycmVudC13ZWVrLXJvdyB7XG4gIC0td2Vla2VuZC1zaGFkZS1jb2xvci10aGVtZWQ6IHRyYW5zcGFyZW50O1xufVxuXG4vKiAyLiBSZWd1bGFyIHdlZWtlbmQgc2hhZGluZyBmb3IgU1VOREFZLVNUQVJUIHdlZWtzICovXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lcjpub3QoLm1vbmRheS1zdGFydCkud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQ6bm90KC5oYXMtcHctY29sdW1uKTpub3QoLmhhcy13ZWVrLW51bWJlcnMpXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoMSksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lcjpub3QoLm1vbmRheS1zdGFydCkud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQ6bm90KC5oYXMtcHctY29sdW1uKTpub3QoLmhhcy13ZWVrLW51bWJlcnMpXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoNyksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lcjpub3QoLm1vbmRheS1zdGFydCkud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXB3LWNvbHVtbjpub3QoLmhhcy13ZWVrLW51bWJlcnMpXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoMiksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lcjpub3QoLm1vbmRheS1zdGFydCkud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXB3LWNvbHVtbjpub3QoLmhhcy13ZWVrLW51bWJlcnMpXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoOCksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lcjpub3QoLm1vbmRheS1zdGFydCkud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXdlZWstbnVtYmVyczpub3QoLmhhcy1wdy1jb2x1bW4pXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoMiksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lcjpub3QoLm1vbmRheS1zdGFydCkud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXdlZWstbnVtYmVyczpub3QoLmhhcy1wdy1jb2x1bW4pXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoOCksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lcjpub3QoLm1vbmRheS1zdGFydCkud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXB3LWNvbHVtbi5oYXMtd2Vlay1udW1iZXJzXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoMyksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lcjpub3QoLm1vbmRheS1zdGFydCkud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXB3LWNvbHVtbi5oYXMtd2Vlay1udW1iZXJzXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoOSkge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS13ZWVrZW5kLXNoYWRlLWNvbG9yLXRoZW1lZCk7XG59XG5cbi8qIDMuIFdlZWtlbmQgc2hhZGluZyBmb3IgTU9OREFZLVNUQVJUIHdlZWtzICovXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5tb25kYXktc3RhcnQud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQ6bm90KC5oYXMtcHctY29sdW1uKTpub3QoLmhhcy13ZWVrLW51bWJlcnMpXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoNiksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5tb25kYXktc3RhcnQud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQ6bm90KC5oYXMtcHctY29sdW1uKTpub3QoLmhhcy13ZWVrLW51bWJlcnMpXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoNyksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5tb25kYXktc3RhcnQud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXB3LWNvbHVtbjpub3QoLmhhcy13ZWVrLW51bWJlcnMpXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoNyksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5tb25kYXktc3RhcnQud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXB3LWNvbHVtbjpub3QoLmhhcy13ZWVrLW51bWJlcnMpXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoOCksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5tb25kYXktc3RhcnQud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXdlZWstbnVtYmVyczpub3QoLmhhcy1wdy1jb2x1bW4pXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoNyksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5tb25kYXktc3RhcnQud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXdlZWstbnVtYmVyczpub3QoLmhhcy1wdy1jb2x1bW4pXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoOCksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5tb25kYXktc3RhcnQud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXB3LWNvbHVtbi5oYXMtd2Vlay1udW1iZXJzXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoOCksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5tb25kYXktc3RhcnQud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXB3LWNvbHVtbi5oYXMtd2Vlay1udW1iZXJzXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoOSkge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS13ZWVrZW5kLXNoYWRlLWNvbG9yLXRoZW1lZCk7XG59XG5cbi8qIDQuIE1ha2UgZGF5LWNvbnRlbnQgdHJhbnNwYXJlbnQgYnkgZGVmYXVsdCAqL1xuLnBlcmlvZC1jYWxlbmRhci10YWJsZSAuZGF5LWNvbnRlbnQge1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50O1xufVxuXG4vKiA1LiBJZiBhIGNlbGwgdXNlcyBib3JkZXIgc3R5bGluZyAodG9kYXkvdGFza3MpLCBrZWVwIGl0cyBiYWNrZ3JvdW5kIHRyYW5zcGFyZW50ICovXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIC5kYXktY29udGVudFtzdHlsZSo9XCJib3JkZXJcIl0ge1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50O1xufVxuXG4vKiBUaGlzIHJ1bGUgaGlnaGxpZ2h0cyB0aGUgaGVhZGVyIGNlbGwgaXRzZWxmIGFuZCBzaG91bGQgd29yayBhcyBpbnRlbmRlZC4gKi9cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGguY29sdW1uLWhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1yb3ctaGlnaGxpZ2h0LWNvbG9yLXRoZW1lZCk7XG4gICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogNnB4O1xuICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiA2cHg7XG59XG5cbi8qIFRoaXMgcnVsZSBub3cgdGFyZ2V0cyB0aGUgPHRkPiBlbGVtZW50IGRpcmVjdGx5LCBqdXN0IGxpa2UgdGhlIHdvcmtpbmcgcm93IGhvdmVyLFxuICAgaW5zdGVhZCBvZiB0aGUgLmRheS1jb250ZW50IGRpdiBpbnNpZGUgaXQuICovXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRkLmNvbHVtbi1ob3ZlciB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tcm93LWhpZ2hsaWdodC1jb2xvci10aGVtZWQpO1xufVxuXG4vKiBFbnN1cmVzIGluZGl2aWR1YWwgZGF0ZSBob3ZlciBpcyBhbHdheXMgb24gdG9wICovXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRkOm5vdCgucHctbGFiZWwtY2VsbCk6bm90KC53ZWVrLW51bWJlci1jZWxsKTpob3ZlciAuZGF5LWNvbnRlbnQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWRhdGUtY2VsbC1ob3Zlci1jb2xvci10aGVtZWQpICFpbXBvcnRhbnQ7XG59XG5cbi8qIDEuIEJhc2Ugc3R5bGUgZm9yIHRoZSBwZXJtYW5lbnQgY3VycmVudCB3ZWVrIGhpZ2hsaWdodCAqL1xuLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0ci5jdXJyZW50LXdlZWstcm93IC5kYXktY29udGVudCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcm93LWhpZ2hsaWdodC1jb2xvci10aGVtZWQpO1xufVxuXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRyLmN1cnJlbnQtd2Vlay1yb3cgdGQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXJvdy1oaWdobGlnaHQtY29sb3ItdGhlbWVkKTtcbn1cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdHIucm93LWhvdmVyOm5vdCguY3VycmVudC13ZWVrLXJvdykgdGQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXJvdy1oaWdobGlnaHQtY29sb3ItdGhlbWVkKTtcbn1cblxuLnRhYi1vcmRlci1jb250YWluZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBnYXA6IDhweDtcbiAgbWFyZ2luLXRvcDogMTBweDtcbn1cblxuLmRyYWdnYWJsZS1pdGVtIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZzogOHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeS1hbHQpO1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgY3Vyc29yOiBncmFiO1xufVxuXG4uZHJhZ2dhYmxlLWl0ZW0uZHJhZ2dpbmcge1xuICBvcGFjaXR5OiAwLjU7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xufVxuXG4uZHJhZy1oYW5kbGUge1xuICBtYXJnaW4tcmlnaHQ6IDEycHg7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbn1cblxuLnNldHRpbmctc3BhY2VyIHtcbiAgaGVpZ2h0OiAyMHB4OyAvKiBPciB1c2UgbWFyZ2luLXRvcCwgZS5nLiwgbWFyZ2luLXRvcDogMjBweDsgKi9cbn1cblxuLm5vdGUtZ3JvdXAtaGVhZGVyLWNvbnRlbnQge1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5waW5uZWQtc29ydC1pbmRpY2F0b3Ige1xuICBmb250LXNpemU6IDAuODVlbTtcbiAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICBmb250LXdlaWdodDogbm9ybWFsO1xuICBtYXJnaW4tbGVmdDogNnB4O1xuICAvKiBQcmV2ZW50cyB0aGUgaW5kaWNhdG9yIGZyb20gYmVpbmcgc2VsZWN0ZWQgYXMgdGV4dCB3aGVuIGNsaWNraW5nICovXG4gIHVzZXItc2VsZWN0OiBub25lOyBcbn1cblxuLyogSGlkZSBkcmFnIGhhbmRsZXMgYnkgZGVmYXVsdCBpbiBtYWluIFVJICovXG4ubm90ZS1yb3cgLmRyYWctaGFuZGxlIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICBjdXJzb3I6IGdyYWI7XG59XG5cbi8qIFNob3cgZHJhZyBoYW5kbGVzIHdoZW4gcmVvcmRlciBtb2RlIGlzIGFjdGl2ZSAqL1xuLnBpbm5lZC1ub3Rlcy1yZW9yZGVyLW1vZGUgLm5vdGUtcm93IC5kcmFnLWhhbmRsZSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuXG4vKiBWaXN1YWwgZmVlZGJhY2sgZHVyaW5nIGRyYWcgKi9cbi5ub3RlLXJvdy5kcmFnZ2luZyB7XG4gICAgb3BhY2l0eTogMC41O1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xufVxuXG4vKiA9PSAtLS0gVGhlbWUgU2V0dGluZ3MgVGFiIExheW91dCAtLS0gKi9cbi8qIE1haW4gY29udGFpbmVyIGZvciBlYWNoIHRhc2sgZ3JvdXAgcm93ICovXG4ucHJldmlldy10YXNrLWdyb3VwIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgLyogUHVzaGVzIHRoZSB0aXRsZSBhbmQgY291bnQgYXBhcnQgKi9cbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIHBhZGRpbmc6IDEwcHggMTRweDsgLyogQWRqdXN0IHBhZGRpbmcgdG8gbWF0Y2ggbWFpbiBVSSAqL1xuICAgIG1hcmdpbi1ib3R0b206IDhweDsgLyogU3BhY2UgYmV0d2VlbiByb3dzICovXG4gICAgYm9yZGVyLXJhZGl1czogOHB4OyAvKiBTbGlnaHRseSBtb3JlIHJvdW5kZWQgY29ybmVycyAqL1xufVxuXG4vKiBXcmFwcGVyIGZvciB0aGUgaWNvbiBhbmQgdGl0bGUgdG8ga2VlcCB0aGVtIHRvZ2V0aGVyICovXG4ucHJldmlldy10YXNrLWNvbnRlbnQtd3JhcHBlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGdhcDogMTBweDsgLyogU3BhY2UgYmV0d2VlbiB0aGUgaWNvbiBhbmQgdGhlIHRpdGxlIHRleHQgKi9cbn1cblxuLyogU3R5bGUgZm9yIHRoZSBpY29uIGl0c2VsZiAqL1xuLnByZXZpZXctdGFzay1pY29uIC5zdmctaWNvbiB7XG4gICAgd2lkdGg6IDE4cHg7IC8qIE1hdGNoIGljb24gc2l6ZSBmcm9tIG1haW4gVUkgKi9cbiAgICBoZWlnaHQ6IDE4cHg7XG4gICAgc3Ryb2tlLXdpZHRoOiAyLjI1OyAvKiBBIGdvb2QgYmFsYW5jZSBvZiBib2xkbmVzcyAqL1xufVxuXG4vKiBTdHlsZSBmb3IgdGhlIHRpdGxlIHRleHQgKGUuZy4sIFwiT3ZlcmR1ZVwiKSAqL1xuLnByZXZpZXctdGFzay10aXRsZSB7XG4gICAgZm9udC1zaXplOiB2YXIoLS10YXNrLWhlYWRpbmctZm9udC1zaXplKTtcbn1cblxuLnRoZW1lLWxpc3QtaXRlbTpmb2N1cyB7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBib3gtc2hhZG93OiAwIDAgNXB4IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgb3V0bGluZTogbm9uZTsgLyogUHJldmVudHMgdGhlIGRlZmF1bHQgYnJvd3NlciBvdXRsaW5lICovXG59XG5cbi8qIDEuIE1haW4gY29udGFpbmVyIGZvciB0aGUgZW50aXJlIFRoZW1lcyB0YWIgbGF5b3V0ICovXG4udGhlbWUtc2V0dGluZ3MtY29udGFpbmVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGdhcDogMjBweDtcbiAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsgLyogQ1JJVElDQUw6IEFsaWducyB0aGUgdG9wcyBvZiBib3RoIGNvbHVtbnMgKi9cbn1cblxuLyogMi4gTGVmdCBjb2x1bW4gY29udGFpbmluZyB0aGUgbGlzdCBvZiB0aGVtZXMgKi9cbi50aGVtZS1saXN0LWNvbnRhaW5lciB7XG4gICAgZmxleDogMTtcbn1cblxuLyogMy4gUmlnaHQgY29sdW1uIGNvbnRhaW5pbmcgdGhlIGxpdmUgcHJldmlldyAqL1xuLnRoZW1lLXByZXZpZXctd3JhcHBlciB7XG4gICAgZmxleDogMjtcbiAgICBwb3NpdGlvbjogc3RpY2t5OyAvKiBLZWVwcyBwcmV2aWV3IHZpc2libGUgb24gc2Nyb2xsICovXG4gICAgdG9wOiAyMHB4O1xuICAgIHBhZGRpbmctbGVmdDogMjBweDtcbiAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbn1cblxuLyogNC4gQWxpZ24gdGhlIHRpdGxlcyBvZiBib3RoIGNvbHVtbnMgKi9cbi50aGVtZS1saXN0LWNvbnRhaW5lciA+IGgzLFxuLnRoZW1lLXByZXZpZXctd3JhcHBlciA+IGgzIHtcbiAgICBtYXJnaW4tdG9wOiAwO1xuICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbn1cblxuLyogNS4gRml4IHRoZSBsYXJnZSBnYXAgYWJvdmUgdGhlIFwiT2N0b2JlciAyMDI1XCIgdGl0bGUgKi9cbi50aGVtZS1wcmV2aWV3LXBhbmUgLnByZXZpZXctc2VjdGlvbi1oZWFkZXIge1xuICAgIG1hcmdpbi10b3A6IDAgIWltcG9ydGFudDtcbiAgICBwYWRkaW5nLXRvcDogMCAhaW1wb3J0YW50O1xufVxuLnRoZW1lLXByZXZpZXctcGFuZSAucHJldmlldy1zZWN0aW9uLWhlYWRlciBoMyB7XG4gICAgbWFyZ2luLXRvcDogMCAhaW1wb3J0YW50O1xufVxuXG4vKiBSZWR1Y2UgdGhlIHNwYWNlIGJlbG93IHRoZSB0YXNrIGxpc3Qgd3JhcHBlciBpbiB0aGUgcHJldmlldyAqL1xuLnRoZW1lLXByZXZpZXctcGFuZSAucHJldmlldy1zZWN0aW9uLXdyYXBwZXIge1xuICBtYXJnaW4tYm90dG9tOiA4cHg7IC8qIERlZmF1bHQgaXMgbGlrZWx5IDIwcHggb3IgbW9yZSAqL1xufVxuXG4vKiBSZWR1Y2UgdGhlIHNwYWNlIGFib3ZlIHRoZSBcIkRPVCBDT0xPUiBLRVlcIiB0aXRsZSAqL1xuLnRoZW1lLXByZXZpZXctcGFuZSAucHJldmlldy1kb3Qta2V5LWNvbnRhaW5lciB7XG4gIG1hcmdpbi10b3A6IDEwcHg7IC8qIERlZmF1bHQgaXMgbGlrZWx5IDE1cHggb3IgbW9yZSAqL1xufVxuXG4vKiA2LiBHZW5lcmFsIHdyYXBwZXIgZm9yIHNlY3Rpb25zIGluc2lkZSB0aGUgcHJldmlldyAqL1xuLnByZXZpZXctc2VjdGlvbi13cmFwcGVyIHtcbiAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgYm9yZGVyLXJhZGl1czogNnB4O1xufVxuXG4vKiA3LiBORVc6IFR3by1jb2x1bW4gbGF5b3V0IGZvciB0aGUgZG90IGNvbG9yIGtleSAqL1xuLnByZXZpZXctZG90LWtleS1jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgMWZyKTsgLyogQ3JlYXRlcyB0d28gZXF1YWwgY29sdW1ucyAqL1xuICAgIGdhcDogMCAyMHB4OyAvKiAwcHggdmVydGljYWwgZ2FwLCAyMHB4IGhvcml6b250YWwgZ2FwICovXG4gICAgbWFyZ2luLXRvcDogMTVweDtcbiAgICBwYWRkaW5nLXRvcDogMDtcbiAgICBib3JkZXItdG9wOiBub25lICFpbXBvcnRhbnQ7IC8qIEV4cGxpY2l0bHkgcmVtb3ZlcyB0aGUgaG9yaXpvbnRhbCBsaW5lICovXG59XG5cbi5wcmV2aWV3LWRvdC1rZXktY29udGFpbmVyIGg1IHtcbiAgICBncmlkLWNvbHVtbjogMSAvIC0xOyAvKiBNYWtlcyB0aGUgXCJET1QgQ09MT1IgS0VZXCIgdGl0bGUgc3BhbiBib3RoIGNvbHVtbnMgKi9cbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xufVxuXG4vKiBTdHlsaW5nIGZvciB0aGUgbGlzdCBvZiB0aGVtZSBmaWxlcyAqL1xuLnRoZW1lLWxpc3QtaXRlbSB7XG4gICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjJzIGVhc2UsIGNvbG9yIDAuMnMgZWFzZTtcbn1cblxuLnRoZW1lLWxpc3QtaXRlbTpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG59XG5cbi50aGVtZS1saXN0LWl0ZW0uaXMtYWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbn1cblxuLyogLS0tIFRoZW1lIFByZXZpZXcgLS0tICovXG4vKiBUYWIgYnV0dG9ucyBmb3IgbGlnaHQvZGFyayBtb2RlICovXG4udGhlbWUtcHJldmlldy10YWJzIHsgZGlzcGxheTogZmxleDsgZ2FwOiA4cHg7IG1hcmdpbi1ib3R0b206IDEycHg7IH1cbi50aGVtZS1wcmV2aWV3LXRhYnMgYnV0dG9uIHsgcGFkZGluZzogNnB4IDEycHg7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW0pOyBjdXJzb3I6IHBvaW50ZXI7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpOyBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7IHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlOyB9XG4udGhlbWUtcHJldmlldy10YWJzIGJ1dHRvbi5pcy1hY3RpdmUgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpOyBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpOyBmb250LXdlaWdodDogNjAwOyB9XG5cbi8qIE1haW4gcHJldmlldyBwYW5lIGxheW91dCAqL1xuLnRoZW1lLXByZXZpZXctcGFuZSB7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpOyB9XG5cbi8qIElubmVyIHdyYXBwZXJzIGZvciBzZWN0aW9ucyAqL1xuLnByZXZpZXctc2VjdGlvbi13cmFwcGVyIHsgcGFkZGluZzogMTBweDsgYm9yZGVyLXJhZGl1czogNnB4OyBtYXJnaW4tYm90dG9tOiAyMHB4OyB9XG5cbi8qIENhbGVuZGFyIGxheW91dCBzdHlsZXMgKi9cbi8qXG4ucHJldmlldy1jYWxlbmRhci1ncmlkIHsgd2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IGZvbnQtc2l6ZTogMTFweDsgfVxuLnByZXZpZXctY2FsZW5kYXItZ3JpZCB0aCB7IGZvbnQtd2VpZ2h0OiA2MDA7IHBhZGRpbmctYm90dG9tOiA4cHg7IH1cbi5wcmV2aWV3LWNhbGVuZGFyLWdyaWQgdGQgeyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyB0ZXh0LWFsaWduOiBjZW50ZXI7IH1cbi5wcmV2aWV3LWRheS1jb250ZW50IHsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGdhcDogNHB4OyBwYWRkaW5nOiA0cHggMDsgYm9yZGVyLXJhZGl1czogNnB4OyBoZWlnaHQ6IDQ1cHg7IH1cbi5wcmV2aWV3LWRheS1udW1iZXIgeyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgZm9udC13ZWlnaHQ6IDUwMDsgZm9udC1zaXplOiAxM3B4OyB9XG4ucHJldmlldy1kYXktbnVtYmVyLnRvZGF5IHsgd2lkdGg6IDIuMmVtOyBoZWlnaHQ6IDIuMmVtOyBib3JkZXItcmFkaXVzOiA1MCU7IH1cbi5wcmV2aWV3LWRvdHMtY29udGFpbmVyIHsgZGlzcGxheTogZmxleDsgZ2FwOiAzcHg7IGhlaWdodDogNHB4OyB9XG4ucHJldmlldy1kb3QgeyB3aWR0aDogNHB4OyBoZWlnaHQ6IDRweDsgYm9yZGVyLXJhZGl1czogNTAlOyB9XG4qL1xuLyogQmFzZSBzdHlsZXMgZm9yIHRoZSBwcmV2aWV3IGdyaWQgY29udGFpbmVyICovXG4ucHJldmlldy1jYWxlbmRhci1ncmlkIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xuICAgIGZvbnQtc2l6ZTogMTFweDtcbn1cbi5wcmV2aWV3LWNhbGVuZGFyLWdyaWQgdGgge1xuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgcGFkZGluZy1ib3R0b206IDhweDtcbn1cbi5wcmV2aWV3LWNhbGVuZGFyLWdyaWQgdGQge1xuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGhlaWdodDogNDVweDsgLyogR2l2ZSB0aGUgY2VsbCBhIGZpeGVkIGhlaWdodCAqL1xufVxuXG4vKiBcbiAgMS4gVGhlIFByZXZpZXcgRGF5IENvbnRlbnQgV3JhcHBlclxuICBUaGlzIGlzIG5vdyB0aGUgcG9zaXRpb25pbmcgYW5jaG9yLCBqdXN0IGxpa2UgdGhlIG1haW4gY2FsZW5kYXIuXG4qL1xuLnByZXZpZXctZGF5LWNvbnRlbnQge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG59XG5cbi8qIFxuICAyLiBUaGUgUHJldmlldyBEYXkgTnVtYmVyXG4gIE5vdyB1c2VzIGFic29sdXRlIHBvc2l0aW9uaW5nIHRvIGd1YXJhbnRlZSBpdCBpcyBjZW50ZXJlZC5cbiovXG4ucHJldmlldy1kYXktbnVtYmVyIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiA1MCU7XG4gICAgbGVmdDogNTAlO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgIHotaW5kZXg6IDE7IC8qIFNpdHMgYWJvdmUgdGhlIGhpZ2hsaWdodCAqL1xuICAgIFxuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgZm9udC1zaXplOiAxM3B4O1xufVxuXG4vKiBTdHlsZSBmb3IgdGhlIFwidG9kYXlcIiBoaWdobGlnaHQgaW4gdGhlIHByZXZpZXcgKi9cbi5wcmV2aWV3LWRheS1udW1iZXIudG9kYXkge1xuICAgIHdpZHRoOiAyLjJlbTtcbiAgICBoZWlnaHQ6IDIuMmVtO1xuICAgIGJvcmRlci1yYWRpdXM6IDUwJTsgLyogT3IgNnB4IGZvciBhIHNxdWlyY2xlICovXG4gICAgXG4gICAgLyogVXNlIGZsZXggdG8gY2VudGVyIHRoZSBudW1iZXIgdGV4dCBJTlNJREUgdGhlIGhpZ2hsaWdodCAqL1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cblxuLyogXG4gIDMuIFRoZSBQcmV2aWV3IERvdHMgQ29udGFpbmVyXG4gIE5vdyB1c2VzIGFic29sdXRlIHBvc2l0aW9uaW5nIGZvciBwZXJmZWN0IGFsaWdubWVudC5cbiovXG4ucHJldmlldy1kb3RzLWNvbnRhaW5lciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IDUwJTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XG4gICAgXG4gICAgLyogXG4gICAgICBUaGlzICd0b3AnIHZhbHVlIHBvc2l0aW9ucyB0aGUgZG90cyB2ZXJ0aWNhbGx5LiBcbiAgICAgIEl0IHNob3VsZCBjb3JyZXNwb25kIHRvIHRoZSAnbm9ybWFsJyBsYXlvdXQgc2V0dGluZyBmb3IgYSBnb29kIHByZXZpZXcuXG4gICAgKi9cbiAgICB0b3A6IDMwcHg7IFxuICAgIFxuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZ2FwOiAzcHg7XG4gICAgei1pbmRleDogMjsgLyogU2l0cyBvbiB0b3Agb2YgdGhlIGhpZ2hsaWdodCAqL1xufVxuXG4vKiBTdHlsZSBmb3IgdGhlIGluZGl2aWR1YWwgZG90cyBpbiB0aGUgcHJldmlldyAqL1xuLnByZXZpZXctZG90IHtcbiAgICB3aWR0aDogNHB4O1xuICAgIGhlaWdodDogNHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbn1cblxuLyogVGFza3MgbGF5b3V0IHN0eWxlcyAqL1xuLnByZXZpZXctdGFzay1ncm91cCB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgcGFkZGluZzogOHB4IDEycHg7IGJvcmRlci1yYWRpdXM6IDZweDsgZm9udC13ZWlnaHQ6IDUwMDsgbWFyZ2luLWJvdHRvbTogNnB4OyB9XG5cbi5pcy1tb2JpbGUgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0ZC5maXJzdC1kYXRlLWNvbHVtbjo6YmVmb3JlIHtcbiAgICBkaXNwbGF5OiBub25lO1xufVxuLmlzLW1vYmlsZSAucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRib2R5IHRyIHtcbiAgICBoZWlnaHQ6IGF1dG87XG59XG5cbi5hcHBsaWVkLXRoZW1lLWluZGljYXRvciAuc2V0dGluZy1pdGVtLW5hbWUge1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCkgIWltcG9ydGFudDtcbn1cblxuLmFwcGxpZWQtdGhlbWUtaW5kaWNhdG9yIC5zZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24ge1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKSAhaW1wb3J0YW50O1xufVxuLnByZXZpZXctZG90LWtleS1jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgMWZyKTsgLyogQ3JlYXRlcyB0d28gZXF1YWwgY29sdW1ucyAqL1xuICAgIGdhcDogMCAyMHB4OyAvKiAwcHggdmVydGljYWwgZ2FwLCAyMHB4IGhvcml6b250YWwgZ2FwICovXG4gICAgbWFyZ2luLXRvcDogMTVweDtcbiAgICBwYWRkaW5nLXRvcDogMDtcbiAgICBib3JkZXItdG9wOiBub25lICFpbXBvcnRhbnQ7IC8qIEVuc3VyZXMgdGhlIGxpbmUgaXMgcmVtb3ZlZCAqL1xufVxuLnByZXZpZXctZG90LWtleS1jb250YWluZXIgaDUge1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG59XG5cbi5wcmV2aWV3LWRvdC1rZXktaXRlbSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIG1hcmdpbi1ib3R0b206IDVweDtcbn1cblxuLnByZXZpZXctZG90LWtleS1zd2F0Y2gge1xuICAgIHdpZHRoOiAxMHB4O1xuICAgIGhlaWdodDogMTBweDtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gICAgZmxleC1zaHJpbms6IDA7XG59XG5cbi8qIE9yZ2FuaXplcyB0aGUgaGVhZGVyIGludG8gYSBmbGV4aWJsZSBjb250YWluZXIgKi9cbi5wb3B1cC1oZWFkZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG5cbi8qIENyZWF0ZXMgYSB2ZXJ0aWNhbCBzdGFjayBmb3IgdGhlIHRpdGxlIGFuZCBwYXRoICovXG4ucG9wdXAtdGl0bGUtY29udGFpbmVyIHtcbiAgICBmbGV4LWdyb3c6IDE7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIG92ZXJmbG93OiBoaWRkZW47IC8qIFByZXZlbnRzIGxvbmcgdGV4dCBmcm9tIGJyZWFraW5nIHRoZSBsYXlvdXQgKi9cbiAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7IC8qIEFkZHMgc3BhY2UgYmV0d2VlbiB0aGUgdGV4dCBhbmQgdGhlIGNsb3NlIGJ1dHRvbiAqL1xufVxuXG4vKiBTdHlsZXMgdGhlIG5ldyBwYXRoIGVsZW1lbnQgKi9cbi5wb3B1cC1oZWFkZXItcGF0aCB7XG4gICAgZm9udC1zaXplOiAwLjhlbTsgLyogU21hbGxlciBmb250IGZvciB0aGUgcGF0aCAqL1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsgLyogVXNlcyB0aGUgdGhlbWUncyBtdXRlZCB0ZXh0IGNvbG9yICovXG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsgLyogUHJldmVudHMgdGhlIHBhdGggZnJvbSB3cmFwcGluZyAqL1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IC8qIEFkZHMgXCIuLi5cIiB0byB2ZXJ5IGxvbmcgcGF0aHMgKi9cbn1cblxuLyogSW4gdGhlIEZpbGUgSW5mbyBzZWN0aW9uLCBhbGxvdyB0aGUgcGF0aCB0ZXh0IHRvIHdyYXAgKi9cbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC5ub3RlLXRpdGxlLXBhdGgtd3JhcHBlciAubm90ZS1wYXRoIHtcbiAgICB3aGl0ZS1zcGFjZTogbm9ybWFsOyAvKiBBbGxvd3MgdGV4dCB0byB3cmFwICovXG4gICAgd29yZC1icmVhazogYnJlYWstYWxsOyAvKiBCcmVha3MgbG9uZyBwYXRocyB3aXRob3V0IHNwYWNlcyAqL1xufVxuXG4vKiBTdHlsZXMgdGhlIGNvbnRhaW5lciBmb3IgdGhlICdObyBiYWNrbGlua3MnIG1lc3NhZ2UgYW5kIGRlbGV0ZSBidXR0b24gKi9cbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtLWFjdGlvbnMge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnktYWx0KTsgLyogQSBzdWJ0bGUgYmFja2dyb3VuZCB0byBkaXN0aW5ndWlzaCBpdCAqL1xuICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICBtYXJnaW4tdG9wOiA0cHg7XG59XG5cbi8qXG4gKiBTdHlsZXMgdGhlIFwiRGVsZXRlIEZpbGVcIiBidXR0b24gdG8gYmUgbGVzcyBpbnRydXNpdmUuXG4gKiBJdCB1c2VzIHRoZW1lIHZhcmlhYmxlcyBmb3IgYSBjb25zaXN0ZW50IGxvb2sgYW5kIGZlZWwuXG4gKi9cbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtLWFjdGlvbnMgYnV0dG9uLm1vZC1kYW5nZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICAgIHBhZGRpbmc6IDRweCAxMHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICBtYXJnaW4tbGVmdDogMTZweDsgLyogQWRkcyBzcGFjZSBiZXR3ZWVuIHRoZSBtZXNzYWdlIGFuZCB0aGUgYnV0dG9uICovXG4gICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZS1pbi1vdXQ7XG59XG5cbi8qIEFkZHMgYSBtb3JlIHByb21pbmVudCBzdHlsZSB3aGVuIGhvdmVyaW5nIG92ZXIgdGhlIGRlbGV0ZSBidXR0b24gKi9cbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtLWFjdGlvbnMgYnV0dG9uLm1vZC1kYW5nZXI6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG59XG5cbi8qXG4gKiBTdHlsZXMgdGhlIHdyYXBwZXIgZm9yIHRoZSBpY29uIGFuZCB0aGUgXCJObyBiYWNrbGlua3NcIiB0ZXh0LlxuICogVGhpcyBlbnN1cmVzIHRoZSBpY29uIGFuZCB0ZXh0IGFyZSBhbGlnbmVkIGFuZCBzcGFjZWQgY29ycmVjdGx5LlxuICovXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbS1hY3Rpb25zID4gZGl2IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgZ2FwOiA4cHg7IC8qIEFkZHMgc3BhY2UgYmV0d2VlbiB0aGUgaWNvbiBhbmQgdGhlIHRleHQgKi9cbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7IC8qIFVzZXMgYSBtb3JlIHN1YnRsZSB0ZXh0IGNvbG9yICovXG59XG5cbi8qIEVuc3VyZXMgdGhlIGZ1bGwgZmlsZSBwYXRoIGluIHRoZSBpbmZvIHNlY3Rpb24gY2FuIHdyYXAgdG8gbXVsdGlwbGUgbGluZXMgKi9cbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC5ub3RlLXRpdGxlLXBhdGgtd3JhcHBlciAubm90ZS1wYXRoIHtcbiAgICB3aGl0ZS1zcGFjZTogbm9ybWFsO1xuICAgIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDtcbn1cblxuLyogU3RhbmRhcmQgY2xpY2thYmxlIGN1cnNvciBmb3IgdGhlIGZpbGUgaW5mbyBzZWN0aW9uICovXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbS5pcy1jbGlja2FibGUge1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLyogRGlzYWJsZSBob3ZlciBhbmQgcG9pbnRlciBmb3IgY2FsZW5kYXIgZXZlbnRzICovXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbS5pcy1jYWxlbmRhci1ldmVudCB7XG4gICAgY3Vyc29yOiBkZWZhdWx0OyAvKiBDaGFuZ2UgZnJvbSBwb2ludGVyIHRvIGRlZmF1bHQgY3Vyc29yICovXG59XG5cbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtLmlzLWNhbGVuZGFyLWV2ZW50OmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsgLyogUHJldmVudCBob3ZlciBiYWNrZ3JvdW5kIGNoYW5nZSAqL1xufVxuXG4vKiBLZWVwIGhvdmVyIGZvciByZWd1bGFyIG5vdGVzL2Fzc2V0cyAqL1xuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW06bm90KC5pcy1jYWxlbmRhci1ldmVudCk6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xufVxuXG4ucG9wdXAtYXNzZXQtdGh1bWJuYWlsIHtcbiAgICB3aWR0aDogMjJweDtcbiAgICBoZWlnaHQ6IDIycHg7XG4gICAgb2JqZWN0LWZpdDogY292ZXI7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIG1hcmdpbi1yaWdodDogOHB4OyAvKiBBZGRzIHNwYWNlIGJldHdlZW4gdGh1bWJuYWlsIGFuZCB0ZXh0ICovXG59XG5cbi8qIEFkanVzdCB0aGUgbWFpbiBpdGVtIGxheW91dCB0byB1c2UgZmxleGJveCAqL1xuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0ge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cblxuLyogLS0tIE1vYmlsZS1TcGVjaWZpYyBQb3B1cCBTdHlsZXMgLS0tICovXG5AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDYwMHB4KSB7XG5cbiAgICAub3RoZXItbm90ZXMtcG9wdXAge1xuICAgICAgICAvKiBcbiAgICAgICAgICogU2l6aW5nOlxuICAgICAgICAgKiAtIE1ha2UgaXQgOTAlIG9mIHRoZSB2aWV3cG9ydCB3aWR0aC5cbiAgICAgICAgICogLSBVbnNldCB0aGUgZml4ZWQgbWluLXdpZHRoIGZyb20gdGhlIGRlc2t0b3AgcnVsZS5cbiAgICAgICAgICogLSBFbnN1cmUgaXQgZG9lc24ndCBnZXQgd2lkZXIgdGhhbiA0NTBweC5cbiAgICAgICAgKi9cbiAgICAgICAgd2lkdGg6IDkwdncgIWltcG9ydGFudDtcbiAgICAgICAgbWluLXdpZHRoOiB1bnNldCAhaW1wb3J0YW50O1xuICAgICAgICBtYXgtd2lkdGg6IDQ1MHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgIFxuICAgICAgICAvKiBQb3NpdGlvbmluZzogRml4IGl0IHRvIHRoZSBib3R0b20gb2YgdGhlIHNjcmVlbi4gKi9cbiAgICAgICAgcG9zaXRpb246IGZpeGVkICFpbXBvcnRhbnQ7XG4gICAgICAgIGJvdHRvbTogY2FsYyg4cHggKyBlbnYoc2FmZS1hcmVhLWluc2V0LWJvdHRvbSkpICFpbXBvcnRhbnQ7XG4gICAgICAgIGxlZnQ6IDUwJSAhaW1wb3J0YW50O1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSkgIWltcG9ydGFudDtcbiAgICAgICAgXG4gICAgICAgIC8qIEFwcGVhcmFuY2U6IFN0eWxlIGl0IGxpa2UgYSBtb2Rlcm4gbW9iaWxlIGJvdHRvbSBzaGVldC4gKi9cbiAgICAgICAgbWF4LWhlaWdodDogNTB2aCAhaW1wb3J0YW50OyAvKiBQcmV2ZW50cyBpdCBmcm9tIGNvdmVyaW5nIHRoZSB3aG9sZSBzY3JlZW4uICovXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHggMTJweCAxMnB4IDEycHggIWltcG9ydGFudDsgLyogUm91bmRzIG9ubHkgdGhlIHRvcCBjb3JuZXJzLiAqL1xuICAgICAgICBib3gtc2hhZG93OiAwIC00cHggMTZweCByZ2JhKDAsMCwwLDAuMikgIWltcG9ydGFudDsgLyogU2hhZG93IHRvIGxpZnQgaXQgb2ZmIHRoZSBwYWdlLiAqL1xuICAgICAgICBcbiAgICAgICAgLyogUmVzZXQgYW55IGRlc2t0b3AgcG9zaXRpb25pbmcgc3R5bGVzLiAqL1xuICAgICAgICB0b3A6IGF1dG8gIWltcG9ydGFudDsgXG4gICAgICAgIG1hcmdpbjogMCAhaW1wb3J0YW50O1xuICAgIH1cblxuICAgIC8qIEVuc3VyZSB0aGUgc2Nyb2xsYWJsZSBjb250ZW50IGFyZWEgaGFzIGFwcHJvcHJpYXRlIHBhZGRpbmcuICovXG4gICAgLnBvcHVwLWNvbnRlbnQtd3JhcHBlciB7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxMnB4ICFpbXBvcnRhbnQ7XG4gICAgfVxufVxuXG4ub3RoZXItbm90ZXMtcG9wdXAuaXMtbW9iaWxlLXBvcHVwIHtcbiAgICBib3JkZXItcmFkaXVzOiAxMnB4IDEycHggMCAwOyAvKiBSb3VuZGVkIHRvcCBjb3JuZXJzICovXG4gICAgYm94LXNoYWRvdzogMCAtNHB4IDE2cHggcmdiYSgwLDAsMCwwLjIpOyAvKiBTaGFkb3cgYXQgdGhlIHRvcCAqL1xuICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG59XG5cbi8qIC0tLSBQb3B1cCBBY3Rpb25zIC0tLSAqL1xuLnBvcHVwLWFjdGlvbnMtZm9vdGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgbWFyZ2luLXRvcDogNHB4O1xuICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcbn1cblxuLnBvcHVwLWluZm8tbWVzc2FnZSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGdhcDogOHB4OyAvKiBTcGFjZSBiZXR3ZWVuIGljb24gYW5kIHRleHQgKi9cbiAgICBmb250LXNpemU6IDEycHg7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIC8qIEVuc3VyZSBpdCBhbHNvIGhhcyBubyBiYWNrZ3JvdW5kICovXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcbn1cblxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0ge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xufVxuXG4vKiBTdHlsZSBmb3IgdGhlIGljb24gYnV0dG9uIGl0c2VsZiAqL1xuLnBvcHVwLWFjdGlvbi1pY29uLWJ0biB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHdpZHRoOiAyOHB4O1xuICAgIGhlaWdodDogMjhweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlO1xufVxuXG4ucG9wdXAtYWN0aW9uLWljb24tYnRuIC5zdmctaWNvbiB7XG4gICAgd2lkdGg6IDE2cHg7XG4gICAgaGVpZ2h0OiAxNnB4O1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbn1cblxuLnBvcHVwLWFjdGlvbi1pY29uLWJ0bjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG59XG5cbi8qIFNwZWNpZmljIGRhbmdlciBzdGF0ZSBmb3IgZGVsZXRlICovXG4ucG9wdXAtYWN0aW9uLWljb24tYnRuLm1vZC1kYW5nZXI6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG59XG5cbi5wb3B1cC1hY3Rpb24taWNvbi1idG4ubW9kLWRhbmdlcjpob3ZlciAuc3ZnLWljb24ge1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG59XG5cbi8qIFN0eWxlIHRoZSBoZWFkZXIgd2hlbiByZW9yZGVyIG1vZGUgaXMgYWN0aXZlIHRvIGdpdmUgdXNlciBmZWVkYmFjayAqL1xuLnJlb3JkZXItbW9kZS1hY3RpdmUgLm5vdGUtZ3JvdXAtaGVhZGVyLWNvbnRlbnQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2U7XG59XG5cbi8qIEJ5IGRlZmF1bHQsIGhpZGUgdGhlIGRyYWcgaGFuZGxlcyBvbiBhbGwgbm90ZSByb3dzICovXG4ubm90ZS1yb3cgLmRyYWctaGFuZGxlIHtcbiAgICBkaXNwbGF5OiBub25lO1xufVxuXG4vKiBPbmx5IHNob3cgdGhlIGRyYWcgaGFuZGxlIHdoZW4gdGhlIGNvbnRhaW5lciBpcyBpbiByZW9yZGVyIG1vZGUgKi9cbi5yZW9yZGVyLW1vZGUtYWN0aXZlIC5ub3RlLXJvdyAuZHJhZy1oYW5kbGUge1xuICAgIGRpc3BsYXk6IGZsZXg7XG59XG5cblxuLyogLS0tIE1haW4gVGFiIFNjcm9sbGVyIC0tLSAqL1xuLnBtLXRhYi1jb250ZW50IHtcbiAgICBmbGV4OiAxIDEgYXV0bztcbiAgICBtaW4taGVpZ2h0OiAwO1xuICAgIG92ZXJmbG93LXk6IGF1dG87IC8qIEVuYWJsZXMgdmVydGljYWwgc2Nyb2xsaW5nIHdoZW4gY29udGVudCBvdmVyZmxvd3MgKi9cbn1cblxuLyogLS0tIEJhc2UgV2lkZ2V0IENvbnRhaW5lciAtLS0gKi9cbi8qIERlZmluZXMgdGhlIGFwcGVhcmFuY2UgYW5kIElOVEVSTkFMIHNwYWNpbmcgb2YgYWxsIHdpZGdldHMgKi9cbi5wbS13aWRnZXQtY29udGFpbmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgcGFkZGluZzogMTJweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgZ2FwOiAxMnB4OyAvKiBDb3JyZWN0IGludGVybmFsIGdhcCBmb3IgZWxlbWVudHMgaW5zaWRlIGEgd2lkZ2V0ICovXG59XG5cbi8qIC0tLSBNYWluIERhc2hib2FyZCBHcmlkIExheW91dCAtLS0gKi9cbi8qIFRoaXMgaXMgdGhlIG1hc3RlciBncmlkIHRoYXQgcG9zaXRpb25zIGFsbCB3aWRnZXRzICovXG4ucG0tZGFzaGJvYXJkLWdyaWQge1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgMWZyKTtcbiAgICBnYXA6IDhweDsgLyogQ29ycmVjdCBleHRlcm5hbCBnYXAgQkVUV0VFTiB3aWRnZXRzICovXG4gICAgcGFkZGluZzogNHB4O1xufVxuXG4vKiAtLS0gR3JpZCBJdGVtIFNpemluZyAtLS0gKi9cbi8qIFRoaXMgaXMgdGhlIGtleSBydWxlOiBJdCBtYWtlcyBhbnkgd2lkZ2V0IHRoYXQgaXMgTk9UIGEgaGFsZi13aWR0aCBzdW1tYXJ5IHdpZGdldCBzcGFuIHRoZSBmdWxsIHR3byBjb2x1bW5zLiAqL1xuLnBtLWRhc2hib2FyZC1ncmlkID4gLnBtLXdpZGdldC1jb250YWluZXI6bm90KC5pcy1zdW1tYXJ5LXdpZGdldCkge1xuICAgIGdyaWQtY29sdW1uOiBzcGFuIDI7XG59XG5cbi8qIC0tLSBXaWRnZXQgSGVhZGVyIC0tLSAqL1xuLnBtLXdpZGdldC1jb250YWluZXIgaDMge1xuICAgIG1hcmdpbjogMCAwIDhweCAwO1xuICAgIGZvbnQtc2l6ZTogMC44ZW07XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgbGV0dGVyLXNwYWNpbmc6IDAuMDVlbTtcbn1cblxuLyogT3ZlcmR1ZSBUYXNrIFN0eWxpbmcgKi9cbi5wbS1wcm9ncmVzcy1zZWdtZW50Lm92ZXJkdWUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRhc2stY29sb3Itb3ZlcmR1ZSk7XG59XG4ubGVnZW5kLWNvbG9yLWJveC5vdmVyZHVlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10YXNrLWNvbG9yLW92ZXJkdWUpO1xufVxuXG4vKiBIZWF0bWFwIFdpZGdldCBTdHlsZXMgKi9cbi5wbS1kYXNoYm9hcmQtZ3JpZCAuaGVhdG1hcC1jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZ2FwOiA1cHg7XG4gICAgb3ZlcmZsb3cteDogYXV0bztcbiAgICBzY3JvbGxiYXItd2lkdGg6IG5vbmU7XG4gICAgLW1zLW92ZXJmbG93LXN0eWxlOiBub25lO1xufVxuLnBtLWRhc2hib2FyZC1ncmlkIC5oZWF0bWFwLWNvbnRhaW5lcjo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICAgIGRpc3BsYXk6IG5vbmU7XG59XG4ucG0tZGFzaGJvYXJkLWdyaWQgLmhlYXRtYXAtZGF5LWxhYmVscyB7XG4gICAgcG9zaXRpb246IHN0aWNreTtcbiAgICBsZWZ0OiAwO1xuICAgIHotaW5kZXg6IDE7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgcGFkZGluZzogMjRweCA4cHggNHB4IDA7XG4gICAgZm9udC1zaXplOiAxMXB4O1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbn1cbi5wbS1kYXNoYm9hcmQtZ3JpZCAuaGVhdG1hcC1kYXktbGFiZWxzIHNwYW4ge1xuICAgIGxpbmUtaGVpZ2h0OiAxO1xufVxuLnBtLWRhc2hib2FyZC1ncmlkIC5oZWF0bWFwLWdyaWQge1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC1hdXRvLWZsb3c6IGNvbHVtbjtcbiAgICBncmlkLXRlbXBsYXRlLXJvd3M6IGF1dG8gcmVwZWF0KDcsIDFmcik7XG4gICAgZ3JpZC1hdXRvLWNvbHVtbnM6IG1pbm1heCgxNHB4LCAxZnIpO1xuICAgIGdhcDogNHB4O1xufVxuLnBtLWRhc2hib2FyZC1ncmlkIC5oZWF0bWFwLW1vbnRoLWxhYmVsIHtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgYWxpZ24tc2VsZjogZW5kO1xufVxuLnBtLWRhc2hib2FyZC1ncmlkIC5oZWF0bWFwLWNlbGwge1xuICAgIGFzcGVjdC1yYXRpbzogMSAvIDE7XG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbn1cbi5wbS1kYXNoYm9hcmQtZ3JpZCAuaGVhdG1hcC1jZWxsLmxldmVsLTEgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjNEEyNzFFOyB9XG4ucG0tZGFzaGJvYXJkLWdyaWQgLmhlYXRtYXAtY2VsbC5sZXZlbC0yIHsgYmFja2dyb3VuZC1jb2xvcjogI0QzNTQwMDsgfVxuLnBtLWRhc2hib2FyZC1ncmlkIC5oZWF0bWFwLWNlbGwubGV2ZWwtMyB7IGJhY2tncm91bmQtY29sb3I6ICNGMzlDMTI7IH1cbi5wbS1kYXNoYm9hcmQtZ3JpZCAuaGVhdG1hcC1jZWxsLmxldmVsLTQgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZCNzREOyB9XG5cbi8qIFdpZGdldCBIZWFkZXIgd2l0aCBUb2dnbGUgKi9cbi5wbS13aWRnZXQtaGVhZGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICB3aWR0aDogMTAwJTtcbn1cblxuLyogRGVmYXVsdCBzdGF0ZSBmb3IgdGhlIHRvdGFsIGNvdW50IC0gbm8gcG9pbnRlciAqL1xuLmhlYXRtYXAtdG90YWwtY291bnQge1xuICAgIGN1cnNvcjogZGVmYXVsdCAhaW1wb3J0YW50O1xuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZSAhaW1wb3J0YW50O1xuICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG59XG5cbi8qIFRoaXMgcnVsZSBPTkxZIGFwcGxpZXMgd2hlbiBhIGxpbmsgZXhpc3RzLCBhZGRpbmcgdGhlIGhhbmQgcG9pbnRlciBhbmQgdW5kZXJsaW5lICovXG4uaGVhdG1hcC10b3RhbC1jb3VudC5pcy1jbGlja2FibGUge1xuICAgIGN1cnNvcjogcG9pbnRlciAhaW1wb3J0YW50O1xuICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lICFpbXBvcnRhbnQ7XG4gICAgdGV4dC1kZWNvcmF0aW9uLXN0eWxlOiBkb3R0ZWQgIWltcG9ydGFudDtcbiAgICB0ZXh0LXVuZGVybGluZS1vZmZzZXQ6IDNweDtcbn1cblxuLyogT3B0aW9uYWw6IEFkZCBhIGhvdmVyIGVmZmVjdCBvbmx5IHdoZW4gaXQncyBjbGlja2FibGUgKi9cbi5oZWF0bWFwLXRvdGFsLWNvdW50LmlzLWNsaWNrYWJsZTpob3ZlciB7XG4gICAgY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbn1cblxuLyogQ2hhbmdlIGN1cnNvciB0byBhIGhhbmQgcG9pbnRlciBmb3IgaW50ZXJhY3RpdmUgaGVhdG1hcCBjZWxscyAqL1xuLmhlYXRtYXAtY2VsbC5pcy1pbnRlcmFjdGl2ZTpob3ZlciB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4vKiBUYXNrIEJhciBDaGFydCBXaWRnZXRzICovXG4ucG0tYmFyLWNoYXJ0LXdpZGdldCB7XG4gICAgZGlzcGxheTogZ3JpZDtcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciBhdXRvO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgbWFyZ2luLWJvdHRvbTogMTJweDtcbn1cbi5wbS1iYXItbGFiZWwge1xuICAgIGdyaWQtY29sdW1uOiAxO1xuICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbn1cbi5wbS1iYXItZGlzcGxheS12YWx1ZSB7XG4gICAgZ3JpZC1jb2x1bW46IDI7XG4gICAganVzdGlmeS1zZWxmOiBlbmQ7XG4gICAgZm9udC1zaXplOiAwLjllbTtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbn1cbi5wbS1iYXItdHJhY2sge1xuICAgIGdyaWQtY29sdW1uOiAxIC8gMztcbiAgICBncmlkLXJvdzogMjtcbiAgICBoZWlnaHQ6IDhweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgbWFyZ2luLXRvcDogNHB4O1xufVxuLnBtLWJhci1maWxsIHtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIHRyYW5zaXRpb246IHdpZHRoIDAuNXMgZWFzZS1pbi1vdXQ7XG59XG5cbi8qIERhc2hib2FyZCBIZWF0bWFwIEhpZ2hsaWdodHMgKi9cbi5oZWF0bWFwLWNlbGwuaGVhdG1hcC10b2RheS1jZWxsIHtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgIGJvcmRlci1yYWRpdXM6IDJweDtcbn1cbi5oZWF0bWFwLWNlbGwuaGVhdG1hcC1jdXJyZW50LXdlZWstY2VsbCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgxMjgsIDEyOCwgMTI4LCAwLjEpICFpbXBvcnRhbnQ7XG4gICAgYm9yZGVyLXJhZGl1czogMnB4O1xufVxuYm9keS50aGVtZS1kYXJrIC5oZWF0bWFwLWNlbGwuaGVhdG1hcC1jdXJyZW50LXdlZWstY2VsbCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KSAhaW1wb3J0YW50O1xufVxuLmhlYXRtYXAtZGF5LWxhYmVscyAuaGVhdG1hcC10b2RheS1sYWJlbCxcbi5oZWF0bWFwLW1vbnRoLWxhYmVsLmhlYXRtYXAtY3VycmVudC1tb250aC1sYWJlbCB7XG4gICAgY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbiAgICBmb250LXdlaWdodDogNzAwO1xufVxuXG4vKiBQcm9ncmVzcyBCYXIgV2lkZ2V0cyAqL1xuLnBtLXByb2dyZXNzLWJhciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDI0cHg7XG4gICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xufVxuLnBtLXByb2dyZXNzLXNlZ21lbnQge1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgZm9udC1zaXplOiAwLjllbTtcbiAgICB0cmFuc2l0aW9uOiB3aWR0aCAwLjNzIGVhc2UtaW4tb3V0O1xufVxuLnBtLXByb2dyZXNzLXNlZ21lbnQuaW5jb21wbGV0ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGFzay1jb2xvci1vcGVuKTtcbn1cbi5wbS1wcm9ncmVzcy1zZWdtZW50LmNvbXBsZXRlZCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGFzay1jb2xvci1jb21wbGV0ZWQpO1xufVxuLnBtLXByb2dyZXNzLWxlZ2VuZCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBnYXA6IDE2cHg7XG4gICAgbWFyZ2luLXRvcDogOHB4O1xuICAgIGZvbnQtc2l6ZTogMC44ZW07XG59XG4ubGVnZW5kLWl0ZW0ge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBnYXA6IDZweDtcbn1cbi5sZWdlbmQtY29sb3ItYm94IHtcbiAgICB3aWR0aDogMTJweDtcbiAgICBoZWlnaHQ6IDEycHg7XG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xufVxuLmxlZ2VuZC1jb2xvci1ib3guaW5jb21wbGV0ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGFzay1jb2xvci1vcGVuKTtcbn1cbi5sZWdlbmQtY29sb3ItYm94LmNvbXBsZXRlZCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGFzay1jb2xvci1jb21wbGV0ZWQpO1xufVxuXG4vKiBEcmFnZ2FibGUgTGlzdCBmb3IgU2V0dGluZ3MgKi9cbi5wbS1kcmFnZ2FibGUtd2lkZ2V0LWxpc3Qge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBnYXA6IDVweDtcbn1cbi5wbS1kcmFnZ2FibGUtd2lkZ2V0LWl0ZW0ge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1tKTtcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcbn1cbi5wbS1kcmFnLWhhbmRsZSB7XG4gICAgcGFkZGluZzogMTBweDtcbiAgICBjdXJzb3I6IGdyYWI7XG4gICAgY29sb3I6IHZhcigtLXRleHQtZmFpbnQpO1xufVxuLnBtLXNldHRpbmctd3JhcHBlciB7XG4gICAgZmxleC1ncm93OiAxO1xufVxuLnBtLXNldHRpbmctd3JhcHBlciAuc2V0dGluZy1pdGVtIHtcbiAgICBwYWRkaW5nOiA4cHggMDtcbiAgICBib3JkZXI6IG5vbmU7XG59XG4ucG0tc2V0dGluZy13cmFwcGVyIC5zZXR0aW5nLWl0ZW0taW5mbyB7XG4gICAgd2lkdGg6IDEwMCU7XG59XG4ucG0tZHJhZ2dhYmxlLXdpZGdldC1pdGVtLmRyYWdnaW5nIHtcbiAgICBvcGFjaXR5OiAwLjU7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1hY2NlbnQpO1xufVxuLnBtLWRyYWctcGxhY2Vob2xkZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgIGJvcmRlcjogMnB4IGRhc2hlZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW0pO1xuICAgIG1hcmdpbjogNXB4IDA7XG59XG5cbi5wbS1wcm9ncmVzcy1zZWdtZW50LmlzLWludGVyYWN0aXZlOmhvdmVyIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgZmlsdGVyOiBicmlnaHRuZXNzKDEuMik7IC8qIE9wdGlvbmFsOiBtYWtlcyB0aGUgYmFyIHNsaWdodGx5IGJyaWdodGVyIG9uIGhvdmVyICovXG59XG5cbi5wbS1oZWF0bWFwLWNvbmZpZy1ib3gge1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1sKTsgLyogVXNlcyBPYnNpZGlhbidzIGxhcmdlIHJhZGl1cyBmb3IgYSBuaWNlIGNhcmQgbG9vayAqL1xuICBwYWRkaW5nOiAxNnB4O1xuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7IC8qIEEgc2xpZ2h0bHkgZGlmZmVyZW50IGJhY2tncm91bmQgdG8gc3RhbmQgb3V0ICovXG59XG5cbi8qIEFkZCBhIHRpdGxlIHN0eWxlIGZvciBpbnNpZGUgdGhlIGJveCAqL1xuLnBtLWhlYXRtYXAtY29uZmlnLWJveCBoMiB7XG4gIG1hcmdpbi10b3A6IDEwcHg7XG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gIHBhZGRpbmctYm90dG9tOiAxMHB4O1xuICBib3JkZXItYm90dG9tOiBub25lO1xufVxuXG4ucG0tZm9sZGVyLWV4Y2x1c2lvbi1jb250YWluZXIge1xuICBtYXJnaW4tdG9wOiAxNnB4O1xuICBwYWRkaW5nLXRvcDogMTZweDtcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbn1cblxuLnBtLXdpZGdldC1oZWFkZXIge1xuICAgIGN1cnNvcjogZGVmYXVsdCAhaW1wb3J0YW50O1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBnYXA6IDhweDsgLyogQ3JlYXRlcyBzcGFjZSBiZXR3ZWVuIHRoZSBpY29uIGFuZCB0aXRsZSAqL1xufVxuXG4ucG0td2lkZ2V0LWhlYWRlciAuaGVhdG1hcC1jb2xsYXBzZS1pY29uLFxuLnBtLXdpZGdldC1oZWFkZXIgaDMsXG4ucG0td2lkZ2V0LWhlYWRlciAuaGVhdG1hcC10b3RhbC1jb3VudC5pcy1jbGlja2FibGUge1xuICBjdXJzb3I6IHBvaW50ZXIgIWltcG9ydGFudDtcbn1cblxuLnBtLXdpZGdldC1oZWFkZXIgLmhlYXRtYXAtY29sbGFwc2UtaWNvbjpob3Zlcixcbi5wbS13aWRnZXQtaGVhZGVyIGgzOmhvdmVyLFxuLnBtLXdpZGdldC1oZWFkZXIgLmhlYXRtYXAtdG90YWwtY291bnQuaXMtY2xpY2thYmxlOmhvdmVyIHtcbiAgY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbn1cblxuLmhlYXRtYXAtY29sbGFwc2UtaWNvbiB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4ycyBlYXNlLWluLW91dDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgbWFyZ2luLXRvcDogLThweDsgXG59XG5cbi5wbS13aWRnZXQtY29udGFpbmVyLmlzLWNvbGxhcHNlZCAuaGVhdG1hcC1jb2xsYXBzZS1pY29uIHtcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgtOTBkZWcpO1xufVxuXG4ucG0td2lkZ2V0LWNvbnRhaW5lci5pcy1jb2xsYXBzZWQgLmhlYXRtYXAtY29udGFpbmVyIHtcbiAgICBkaXNwbGF5OiBub25lO1xufVxuXG4ucG0td2lkZ2V0LWhlYWRlciBoMyB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIC8qIFRIRSBGSVg6IFB1c2hlcyB0aGUgdGl0bGUgdG8gdGhlIGxlZnQsIGxlYXZpbmcgc3BhY2Ugb24gdGhlIHJpZ2h0ICovXG4gICAgbWFyZ2luLXJpZ2h0OiBhdXRvOyBcbn1cblxuLyogLS0tIE5ldyBzdHlsZXMgZm9yIDItc3RhdGUgc3VtbWFyeSB3aWRnZXRzIC0tLSAqL1xuLnBtLXdpZGdldC1jb250YWluZXIuaXMtc3VtbWFyeS13aWRnZXQgLnBtLXdpZGdldC1oZWFkZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgLyogVGhpcyBpcyB0aGUga2V5OiBpdCBmb3JjZXMgYWxsIGl0ZW1zIHRvIGFsaWduIHRvIHRoZWlyIHZlcnRpY2FsIGNlbnRlcnMuICovXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjsgXG4gICAgZ2FwOiA2cHg7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIG1hcmdpbi1ib3R0b206IDRweDtcbn1cblxuLnN1bW1hcnktdG9nZ2xlLWljb24ge1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4ycyBlYXNlLWluLW91dDtcbiAgICAvKiBXZSBhbHNvIG1ha2UgdGhlIGljb24gYSBmbGV4IGNvbnRhaW5lciB0byBjZW50ZXIgdGhlIFNWRyB3aXRoaW4gaXQgKi9cbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgLyogQSBmaXhlZCBzaXplIGhlbHBzIG1haW50YWluIGNvbnNpc3RlbnQgc3BhY2luZyAqL1xuICAgIHdpZHRoOiAxOHB4O1xuICAgIGhlaWdodDogMThweDtcbiAgICBtYXJnaW4tdG9wOiAtOHB4O1xufVxuXG4uaXMtbWluaSAucG0tcHJvZ3Jlc3MtbGVnZW5kIHtcbiAgICBkaXNwbGF5OiBub25lO1xufVxuXG4uaXMtbWluaSAuc3VtbWFyeS10b2dnbGUtaWNvbiB7XG4gICAgdHJhbnNmb3JtOiByb3RhdGUoLTkwZGVnKTsgLyogUG9pbnRzIExlZnQgKi9cbn1cblxuLmlzLW1pbmltaXNlZCAuYmFyLWFuZC1sZWdlbmQtd3JhcHBlciB7XG4gICAgZGlzcGxheTogbm9uZTtcbn1cblxuLmlzLW1pbmltaXNlZCAuc3VtbWFyeS10b2dnbGUtaWNvbiB7XG4gICAgdHJhbnNmb3JtOiByb3RhdGUoMTgwZGVnKTsgLyogUG9pbnRzIFVwICovXG59XG5cbi8qIC0tLSBTdHlsZXMgZm9yIENvbGxhcHNpYmxlIFdpZGdldHMgLS0tICovXG5cbi5wbS13aWRnZXQtaGVhZGVyIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGdhcDogNnB4O1xufVxuXG4ud2lkZ2V0LXRvZ2dsZS1pY29uIHtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnMgZWFzZS1pbi1vdXQ7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIHdpZHRoOiAxOHB4O1xuICAgIGhlaWdodDogMThweDtcbiAgICBtYXJnaW4tdG9wOiAtOHB4O1xufVxuXG4uaXMtY29sbGFwc2VkIC53aWRnZXQtY29udGVudC13cmFwcGVyIHtcbiAgICBkaXNwbGF5OiBub25lO1xufVxuXG4uaXMtY29sbGFwc2VkIC53aWRnZXQtdG9nZ2xlLWljb24ge1xuICAgIHRyYW5zZm9ybTogcm90YXRlKC05MGRlZyk7IC8qIFBvaW50cyBsZWZ0ICovXG59XG5cbi5wbS1jb21wb3NpdGUtYmFyLXdyYXBwZXIge1xuICAgIG1hcmdpbi1ib3R0b206IDhweDtcbn1cbi5wbS1jb21wb3NpdGUtYmFyLWxhYmVsIHtcbiAgICBmb250LXNpemU6IDEycHg7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xufVxuLnBtLXdpZGdldC1jb250YWluZXIuaXMtc3VtbWFyeS13aWRnZXQge1xuICAgIGdhcDogMHB4O1xuICAgIG1pbi1oZWlnaHQ6IDgwcHg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG4ucG0td2lkZ2V0LWNvbnRhaW5lci5pcy1zdW1tYXJ5LXdpZGdldCAudGFzay1ncm91cC1lbXB0eS1tZXNzYWdlIHtcbiAgICAvKiBDZW50ZXJzIHRoZSAnTm8gdGFza3MnIG1lc3NhZ2UgcGVyZmVjdGx5IGluIHRoZSBtaWRkbGUgb2YgdGhlIHdpZGdldCAqL1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBmbGV4LWdyb3c6IDE7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuXG4ucG0tZGFzaGJvYXJkLWdyaWQge1xuICAgIGFsaWduLWl0ZW1zOiBzdHJldGNoO1xufVxuLnBtLXdpZGdldC1jb250YWluZXIuaXMtc3VtbWFyeS13aWRnZXQuaXMtbWluaW1pc2VkIHtcbiAgICBcbiAgICBwYWRkaW5nLWJvdHRvbTogNHB4O1xuICAgIGdhcDogMDtcbn1cblxuLnBtLXdpZGdldC1jb250YWluZXIuaXMtc3VtbWFyeS13aWRnZXQuaXMtbWluaW1pc2VkIC5wbS13aWRnZXQtaGVhZGVyIHtcbiAgICBtYXJnaW4tYm90dG9tOiAwO1xufVxuXG4ucG0td2lkZ2V0LWNvbnRhaW5lci5pcy1jb2xsYXBzZWQge1xuICAgIHBhZGRpbmctYm90dG9tOiA0cHg7XG59XG5cbi5wbS13aWRnZXQtY29udGFpbmVyLmlzLWNvbGxhcHNlZCAucG0td2lkZ2V0LWhlYWRlciB7XG4gICAgbWFyZ2luLWJvdHRvbTogMDtcbn1cblxuLnBtLXByb2dyZXNzLXNlZ21lbnQuaW4tcHJvZ3Jlc3Mge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRhc2stY29sb3ItaW5wcm9ncmVzcyk7XG59XG4ubGVnZW5kLWNvbG9yLWJveC5pbi1wcm9ncmVzcyB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGFzay1jb2xvci1pbnByb2dyZXNzKTtcbn1cblxuLnBtLXByb2dyZXNzLXNlZ21lbnQubm8tZHVlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xufVxuLmxlZ2VuZC1jb2xvci1ib3gubm8tZHVlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG59XG5cblxuLyogLS0tIFRhc2sgR3JvdXAgQ29sbGFwc2UgU3R5bGVzIC0tLSAqL1xuLnRhc2stcm93IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgcGFkZGluZzogMTJweCAwIDhweCAwOyAgLyogSW5jcmVhc2UgZnJvbSA0cHggdG8gMTBweCBmb3IgdG9wL2JvdHRvbSBwYWRkaW5nICovXG59XG5cbi50YXNrLWdyb3VwLWhlYWRlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgZm9udC1zaXplOiB2YXIoLS10YXNrLWhlYWRpbmctZm9udC1zaXplKTtcbn1cbi50YXNrLWdyb3VwLWhlYWRlci1jb250ZW50IHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZ2FwOiA2cHg7XG59XG4udGFzay1ncm91cC1jb2xsYXBzZS1pY29uIC5zdmctaWNvbiB7XG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzIGVhc2UtaW4tb3V0O1xufVxuLnRhc2stZ3JvdXAtY29udGFpbmVyLmlzLWNvbGxhcHNlZCAudGFzay1ncm91cC1jb2xsYXBzZS1pY29uIC5zdmctaWNvbiB7XG4gIHRyYW5zZm9ybTogcm90YXRlKC0xODBkZWcpO1xufVxuLnRhc2stbGlzdC13cmFwcGVyIHtcbiAgdHJhbnNpdGlvbjogaGVpZ2h0IDAuMzVzIGVhc2UtaW4tb3V0LCBvcGFjaXR5IDAuMzVzIGVhc2UtaW4tb3V0O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICBvcGFjaXR5OiAxO1xuICBoZWlnaHQ6IHZhcigtLXRhc2stbGlzdC1oZWlnaHQsIGF1dG8pO1xufVxuXG4udGFzay1ncm91cC1jb250YWluZXIuaXMtY29sbGFwc2VkIC50YXNrLWxpc3Qtd3JhcHBlciB7XG4gIGhlaWdodDogMDtcbiAgb3BhY2l0eTogMDtcbn1cblxuLnRhc2stZ3JvdXAtZW1wdHktbWVzc2FnZSB7XG4gIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICBwYWRkaW5nOiA0cHggMDtcbiAgZm9udC1zaXplOiAwLjllbTtcbn1cbi50YXNrLXJvdyAudGFzay10ZXh0IHtcbiAgZmxleC1ncm93OiAxO1xuICBmb250LXNpemU6IHZhcigtLXRhc2stdGV4dC1mb250LXNpemUpO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbn1cblxuLnRhc2stcm93IC50YXNrLXRleHQsXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbSAudGFzay10ZXh0IHtcbiAgICBmbGV4OiAxOyAgICAgICAgICAgICAvKiBNb2Rlcm4gc2hvcnRoYW5kIGZvciBmbGV4LWdyb3csIHNocmluaywgYmFzaXMgKi9cbiAgICBkaXNwbGF5OiBmbGV4OyAgICAgICAvKiBDUklUSUNBTDogTWFrZXMgdGhpcyBhIGZsZXggY29udGFpbmVyICovXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjsgLyogVmVydGljYWxseSBhbGlnbnMgdGhlIHRleHQgbmljZWx5ICovXG4gICAgbWluLXdpZHRoOiAwO1xuICAgIGxpbmUtaGVpZ2h0OiAxLjc7XG59XG5cbi8qIEFkZCB0aGlzIHJ1bGUgdG8gaGFuZGxlIHRoZSBwYXJhZ3JhcGggaW5zaWRlICovXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbSAudGFzay10ZXh0ID4gcCB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgbWFyZ2luOiAwO1xufVxuXG5cbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC50YXNrLWNoZWNrYm94LXN5bWJvbCB7XG4gICAgbWFyZ2luLXRvcDogNHB4ICFpbXBvcnRhbnQ7ICBcbiAgICBhbGlnbi1zZWxmOiBmbGV4LXN0YXJ0OyAgICAgXG59XG5cbi50YXNrLXRleHQuY29tcGxldGVkIHtcbiAgICB0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDtcbiAgICBvcGFjaXR5OiAwLjY7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xufVxuICAgIFxuLnRhc2tzLWNvbnRhaW5lci5zaG93LWZ1bGwtdGV4dCAudGFzay1yb3cge1xuICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbn1cbi50YXNrcy1jb250YWluZXIuc2hvdy1mdWxsLXRleHQgLnRhc2stdGV4dCB7XG4gIHdoaXRlLXNwYWNlOiBub3JtYWw7XG4gIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XG59XG4udGFza3MtY29udGFpbmVyLnNob3ctZnVsbC10ZXh0IC50YXNrLXJvdyAudGFzay1jaGVja2JveCB7XG4gIG1hcmdpbi10b3A6IDJweDtcbn1cblxuLyogQ29udGFpbmVyIGZvciB0YXNrIGNoZWNrYm94ICovXG4udGFzay1jaGVja2JveC1zeW1ib2wge1xuICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgd2lkdGg6IDEuNGVtO1xuICAgIGhlaWdodDogMS40ZW07XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgIG1hcmdpbjogMnB4IDAgMCAwO1xuICAgIHBhZGRpbmc6IDA7XG59XG5cbi8qIEhpZGUgZXZlcnl0aGluZyBleGNlcHQgdGhlIGNoZWNrYm94ICovXG4udGFzay1jaGVja2JveC1zeW1ib2wgLnRhc2stbGlzdC1pdGVtIHtcbiAgICBsaXN0LXN0eWxlOiBub25lO1xuICAgIHBhZGRpbmc6IDA7XG4gICAgbWFyZ2luOiAwO1xuICAgIGRpc3BsYXk6IGNvbnRlbnRzO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi50YXNrLWNoZWNrYm94LXN5bWJvbCBsaS50YXNrLWxpc3QtaXRlbSB7XG4gICAgYWxsOiB1bnNldDtcbiAgICBkaXNwbGF5OiBjb250ZW50czsgLyogTWFrZXMgaXQgbm90IGdlbmVyYXRlIGEgYm94ICovXG4gICAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7XG4gICAgcGFkZGluZzogMCAhaW1wb3J0YW50O1xuICAgIGxpc3Qtc3R5bGU6IG5vbmU7XG59XG5cbi8qIEhpZGUgdGhlIHRleHQgY29udGVudCBhZnRlciB0aGUgY2hlY2tib3ggKi9cbi50YXNrLWNoZWNrYm94LXN5bWJvbCAudGFzay1saXN0LWl0ZW0tY2hlY2tib3ggfiAqIHtcbiAgICBkaXNwbGF5OiBub25lO1xufVxuXG4udGFzay1jaGVja2JveC1zeW1ib2wgLnRhc2stbGlzdC1pdGVtLWNoZWNrYm94IHtcbiAgICBtYXJnaW46IDA7XG4gICBcbn1cbi5hc3NldC1ncmlkLXByZXZpZXcgaW1nIHtcbiAgICBvYmplY3QtZml0OiBjb250YWluICFpbXBvcnRhbnQ7XG59XG5cbi5ub3RlLWdyb3VwLWNvbnRhaW5lciB7XG4gIG92ZXJmbG93OiB2aXNpYmxlICFpbXBvcnRhbnQ7XG4gIG1heC1oZWlnaHQ6IG5vbmUgIWltcG9ydGFudDtcbn1cblxuLmFzc2V0LWdyaWQtcHJldmlldyBpbWcge1xuICBvYmplY3QtZml0OiBjb250YWluICFpbXBvcnRhbnQ7XG59XG4ucGlubmVkLW5vdGVzLWVtcHR5LW1lc3NhZ2Uge1xuICAgIHBhZGRpbmc6IDI0cHg7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgZm9udC1zaXplOiAwLjllbTtcbn1cblxuLnBpbm5lZC1ub3Rlcy1lbXB0eS1tZXNzYWdlIGNvZGUge1xuICAgIGZvbnQtc3R5bGU6IG5vcm1hbDtcbiAgICBmb250LXNpemU6IDEuMWVtO1xufVxuYm9keS5pcy1tb2JpbGUgLnRhYnMtY29udGVudC13cmFwcGVyIHtcbiAgICBwYWRkaW5nLWJvdHRvbTogMCAhaW1wb3J0YW50O1xufVxuYDtcblxuLy8gPT09IEhlbHBlciBGdW5jdGlvbnMgYW5kIENsYXNzZXMgPT09XG4vKipcbiAqIFBhcnNlcyBhbiBcInJnYmEociwgZywgYiwgYSlcIiBzdHJpbmcgaW50byBhbiBvYmplY3QuXG4gKiBAcGFyYW0ge3N0cmluZ30gcmdiYVN0cmluZyBUaGUgaW5wdXQgc3RyaW5nLlxuICogQHJldHVybnMge3tyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBhOiBudW1iZXJ9IHwgbnVsbH1cbiAqL1xuZnVuY3Rpb24gcGFyc2VSZ2JhU3RyaW5nKHJnYmFTdHJpbmcpIHtcbiAgICBpZiAoIXJnYmFTdHJpbmcpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IG1hdGNoID0gcmdiYVN0cmluZy5tYXRjaCgvcmdiYT9cXCgoXFxkKyksXFxzKihcXGQrKSxcXHMqKFxcZCspKD86LFxccyooW1xcZC5dKykpP1xcKS8pO1xuICAgIGlmICghbWF0Y2gpIHJldHVybiBudWxsO1xuICAgIHJldHVybiB7XG4gICAgICAgIHI6IHBhcnNlSW50KG1hdGNoWzFdLCAxMCksXG4gICAgICAgIGc6IHBhcnNlSW50KG1hdGNoWzJdLCAxMCksXG4gICAgICAgIGI6IHBhcnNlSW50KG1hdGNoWzNdLCAxMCksXG4gICAgICAgIGE6IG1hdGNoWzRdICE9PSB1bmRlZmluZWQgPyBwYXJzZUZsb2F0KG1hdGNoWzRdKSA6IDEsXG4gICAgfTtcbn1cblxuLyoqXG4gKiBCbGVuZHMgdHdvIFJHQkEgY29sb3Igb2JqZWN0cyBiYXNlZCBvbiBhIG1peCBmYWN0b3IuXG4gKiBAcGFyYW0ge3tyLGcsYixhfX0gY29sb3IxIFRoZSBzdGFydCBjb2xvciBvYmplY3QuXG4gKiBAcGFyYW0ge3tyLGcsYixhfX0gY29sb3IyIFRoZSBlbmQgY29sb3Igb2JqZWN0LlxuICogQHBhcmFtIHtudW1iZXJ9IGZhY3RvciBBIHZhbHVlIGZyb20gMCAoMTAwJSBjb2xvcjEpIHRvIDEgKDEwMCUgY29sb3IyKS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSByZXN1bHRpbmcgXCJyZ2JhKC4uLilcIiBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGJsZW5kUmdiYUNvbG9ycyhjb2xvcjEsIGNvbG9yMiwgZmFjdG9yKSB7XG4gICAgY29uc3QgciA9IE1hdGgucm91bmQoY29sb3IxLnIgKiAoMSAtIGZhY3RvcikgKyBjb2xvcjIuciAqIGZhY3Rvcik7XG4gICAgY29uc3QgZyA9IE1hdGgucm91bmQoY29sb3IxLmcgKiAoMSAtIGZhY3RvcikgKyBjb2xvcjIuZyAqIGZhY3Rvcik7XG4gICAgY29uc3QgYiA9IE1hdGgucm91bmQoY29sb3IxLmIgKiAoMSAtIGZhY3RvcikgKyBjb2xvcjIuYiAqIGZhY3Rvcik7XG4gICAgY29uc3QgYSA9IChjb2xvcjEuYSAqICgxIC0gZmFjdG9yKSArIGNvbG9yMi5hICogZmFjdG9yKS50b0ZpeGVkKDIpO1xuICAgIHJldHVybiBgcmdiYSgke3J9LCAke2d9LCAke2J9LCAke2F9KWA7XG59XG5cbi8qKlxuICogQSByZXVzYWJsZSBjb25maXJtYXRpb24gbW9kYWwgZGlhbG9nLlxuICovXG5jbGFzcyBDb25maXJtYXRpb25Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBjb25zdHJ1Y3RvcihhcHAsIHRpdGxlLCBtZXNzYWdlLCBvbkNvbmZpcm0sIGNvbmZpcm1UZXh0ID0gXCJDb25maXJtXCIpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICB0aGlzLm9uQ29uZmlybSA9IG9uQ29uZmlybTtcbiAgICAgICAgdGhpcy5jb25maXJtVGV4dCA9IGNvbmZpcm1UZXh0O1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogdGhpcy50aXRsZSB9KTtcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IHRoaXMubWVzc2FnZSB9KTtcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICAgIHRleHQ6IHRoaXMuY29uZmlybVRleHQsXG4gICAgICAgICAgICBjbHM6IFwibW9kLWN0YVwiLFxuICAgICAgICB9KS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5vbkNvbmZpcm0oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICAgIHRleHQ6IFwiQ2FuY2VsXCIsXG4gICAgICAgIH0pLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuXG4vKiBBIG1vZGFsIGRpYWxvZyB0aGF0IHByZXNlbnRzIG11bHRpcGxlIGFjdGlvbiBjaG9pY2VzIHRvIHRoZSB1c2VyIHdoZW4gY3JlYXRpbmcgYSBuZXcgZGFpbHkgbm90ZS4gKi9cbmNsYXNzIEFjdGlvbkNob2ljZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIGNvbnN0cnVjdG9yKGFwcCwgdGl0bGUsIG1lc3NhZ2UsIGJ1dHRvbnMpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICB0aGlzLmJ1dHRvbnMgPSBidXR0b25zO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHRoaXMudGl0bGUgfSk7XG4gICAgICAgIGlmICh0aGlzLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogdGhpcy5tZXNzYWdlIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ21vZGFsLWJ1dHRvbi1jb250YWluZXInIH0pO1xuXG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uQ29uZmlnIG9mIHRoaXMuYnV0dG9ucykge1xuICAgICAgICAgICAgY29uc3QgYnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6IGJ1dHRvbkNvbmZpZy50ZXh0IH0pO1xuICAgICAgICAgICAgaWYgKGJ1dHRvbkNvbmZpZy5jbHMpIHtcbiAgICAgICAgICAgICAgICBidG4uYWRkQ2xhc3MoYnV0dG9uQ29uZmlnLmNscyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGlmIChidXR0b25Db25maWcuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbkNvbmZpZy5hY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGN1c3RvbSBwZXJpb2QgYW5kIHdlZWsgbnVtYmVyIGJhc2VkIG9uIGEgZ2l2ZW4gc3RhcnQgZGF0ZS5cbiAqIEEgeWVhciBpcyBkaXZpZGVkIGludG8gMTMgcGVyaW9kcyBvZiA0IHdlZWtzIGVhY2guXG4gKiBAcGFyYW0ge0RhdGV9IGRhdGUgLSBUaGUgZGF0ZSB0byBjYWxjdWxhdGUgZm9yLlxuICogQHBhcmFtIHtzdHJpbmd9IHN0YXJ0T2ZQZXJpb2RzT3ZlcnJpZGUgLSBUaGUgc3RhcnQgZGF0ZSBpbiBcIllZWVktTU0tRERcIiBmb3JtYXQgZnJvbSBzZXR0aW5ncy5cbiAqIEByZXR1cm5zIHt7cGVyaW9kOiBudW1iZXIsIHdlZWs6IG51bWJlciwgd2Vla1NpbmNlU3RhcnQ6IG51bWJlcn19IEFuIG9iamVjdCB3aXRoIHRoZSBwZXJpb2QsIHdlZWssIGFuZCB0b3RhbCB3ZWVrcyBzaW5jZSBzdGFydC5cbiAqL1xuZnVuY3Rpb24gZ2V0UGVyaW9kV2VlayhkYXRlID0gbmV3IERhdGUoKSwgc3RhcnRPZlBlcmlvZHNPdmVycmlkZSkge1xuICAgIGNvbnN0IGRlZmF1bHRTdGFydFN0cmluZyA9IFwiMjAyNS0wMy0wMlwiO1xuICAgIGxldCBzdGFydFN0cmluZyA9IHN0YXJ0T2ZQZXJpb2RzT3ZlcnJpZGUgfHwgZGVmYXVsdFN0YXJ0U3RyaW5nO1xuXG4gICAgbGV0IHN0YXJ0TW9tZW50ID0gbW9tZW50KHN0YXJ0U3RyaW5nLCBcIllZWVktTU0tRERcIiwgdHJ1ZSk7XG5cbiAgICBpZiAoIXN0YXJ0TW9tZW50LmlzVmFsaWQoKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICBgW0NhbGVuZGFyIFBlcmlvZCBXZWVrIE5vdGVzXSBJbnZhbGlkIFwiU3RhcnQgb2YgUGVyaW9kIDFcIiBkYXRlIGZvcm1hdDogXCIke3N0YXJ0U3RyaW5nfVwiLiBgICtcbiAgICAgICAgICAgIGBJdCBtdXN0IGJlIFlZWVktTU0tREQuIEZhbGxpbmcgYmFjayB0byBkZWZhdWx0IGRhdGUgJHtkZWZhdWx0U3RhcnRTdHJpbmd9LmBcbiAgICAgICAgKTtcbiAgICAgICAgc3RhcnRNb21lbnQgPSBtb21lbnQoZGVmYXVsdFN0YXJ0U3RyaW5nLCBcIllZWVktTU0tRERcIiwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgLy8gVXNlIG1vbWVudCdzIGJ1aWx0LWluIGRpZmYgbWV0aG9kIHRvIGNvcnJlY3RseSBjYWxjdWxhdGUgdGhlIG51bWJlciBvZlxuICAgIC8vIGNhbGVuZGFyIGRheXMuIFRoaXMgYXV0b21hdGljYWxseSBoYW5kbGVzIERheWxpZ2h0IFNhdmluZyBUaW1lIGFuZCBvdGhlciBvZmZzZXRzLlxuICAgIGNvbnN0IGRheXNTaW5jZVN0YXJ0ID0gbW9tZW50KGRhdGUpLnN0YXJ0T2YoJ2RheScpLmRpZmYoc3RhcnRNb21lbnQuc3RhcnRPZignZGF5JyksICdkYXlzJyk7XG4gICAgY29uc3Qgd2Vla051bWJlciA9IE1hdGguZmxvb3IoZGF5c1NpbmNlU3RhcnQgLyA3KTtcbiAgICBjb25zdCBwZXJpb2RJbmRleCA9IE1hdGguZmxvb3Iod2Vla051bWJlciAvIDQpO1xuICAgIGNvbnN0IHBlcmlvZCA9ICgocGVyaW9kSW5kZXggJSAxMykgKyAxMykgJSAxMyArIDE7XG4gICAgY29uc3Qgd2VlayA9ICgod2Vla051bWJlciAlIDQpICsgNCkgJSA0ICsgMTtcblxuICAgIHJldHVybiB7IHBlcmlvZCwgd2Vlaywgd2Vla1NpbmNlU3RhcnQ6IHdlZWtOdW1iZXIgKyAxIH07XG59XG5cbi8qKlxuICogUGFyc2VzIGEgZmlsZSdzIGNvbnRlbnQgdG8gZmluZCBhbGwgdGFza3MgYW5kIHRoZWlyIG1ldGFkYXRhLlxuICogQHBhcmFtIHtURmlsZX0gZmlsZSBUaGUgZmlsZSB0byBwYXJzZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjb250ZW50IFRoZSBjb250ZW50IG9mIHRoZSBmaWxlLlxuICogQHJldHVybnMge0FycmF5PG9iamVjdD59IEFuIGFycmF5IG9mIHN0cnVjdHVyZWQgdGFzayBvYmplY3RzLlxuICovXG5mdW5jdGlvbiBwYXJzZVRhc2tzRnJvbUZpbGUoZmlsZSwgY29udGVudCkge1xuICAgIGNvbnN0IHRhc2tzID0gW107XG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcblxuICAgIGNvbnN0IHRhc2tSZWdleCA9IC9eXFxzKig/Oi18XFxkK1xcLilcXHMqXFxbKC4pXFxdXFxzKiguKikvO1xuICAgIGNvbnN0IGR1ZURhdGVSZWdleCA9IC/wn5OFXFxzKihcXGR7NH0tXFxkezJ9LVxcZHsyfSkvO1xuICAgIGNvbnN0IGNvbXBsZXRpb25EYXRlUmVnZXggPSAv4pyFXFxzKihcXGR7NH0tXFxkezJ9LVxcZHsyfSkvO1xuICAgIGNvbnN0IHRhZ1JlZ2V4ID0gLyMoW2EtekEtWjAtOV9cXC1cXC9dKykvZztcblxuICAgIGxpbmVzLmZvckVhY2goKGxpbmUsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gbGluZS5tYXRjaCh0YXNrUmVnZXgpO1xuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IG1hdGNoWzFdO1xuICAgICAgICAgICAgY29uc3QgdGV4dCA9IG1hdGNoWzJdO1xuICAgICAgICAgICAgY29uc3QgaXNDb21wbGV0ZWQgPSBzdGF0dXMudG9Mb3dlckNhc2UoKSA9PT0gJ3gnO1xuXG4gICAgICAgICAgICBjb25zdCBkdWVEYXRlTWF0Y2ggPSB0ZXh0Lm1hdGNoKGR1ZURhdGVSZWdleCk7XG4gICAgICAgICAgICBjb25zdCBkdWVEYXRlID0gZHVlRGF0ZU1hdGNoID8gbW9tZW50KGR1ZURhdGVNYXRjaFsxXSwgXCJZWVlZLU1NLUREXCIpLnRvRGF0ZSgpIDogbnVsbDtcblxuICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbkRhdGVNYXRjaCA9IHRleHQubWF0Y2goY29tcGxldGlvbkRhdGVSZWdleCk7XG4gICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uRGF0ZSA9IGNvbXBsZXRpb25EYXRlTWF0Y2ggPyBtb21lbnQoY29tcGxldGlvbkRhdGVNYXRjaFsxXSwgXCJZWVlZLU1NLUREXCIpLnRvRGF0ZSgpIDogbnVsbDtcblxuICAgICAgICAgICAgY29uc3QgdGFncyA9IEFycmF5LmZyb20odGV4dC5tYXRjaEFsbCh0YWdSZWdleCkpLm1hcChtID0+IG1bMV0pO1xuXG4gICAgICAgICAgICBsZXQgZGlzcGxheVRleHQgPSB0ZXh0LnRyaW0oKTtcbiAgICAgICAgICAgIC8vIE9wdGlvbmFsbHkgY2xlYW4gdXAgdGhlIGRpc3BsYXkgdGV4dFxuICAgICAgICAgICAgaWYgKCFpc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgIGRpc3BsYXlUZXh0ID0gZGlzcGxheVRleHQucmVwbGFjZShjb21wbGV0aW9uRGF0ZVJlZ2V4LCAnJykudHJpbSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0YXNrcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBkaXNwbGF5VGV4dCxcbiAgICAgICAgICAgICAgICBvcmlnaW5hbFRleHQ6IHRleHQsIC8vIEtlZXAgb3JpZ2luYWwgdGV4dCBmb3IgbW9kaWZpY2F0aW9uc1xuICAgICAgICAgICAgICAgIGZpbGUsXG4gICAgICAgICAgICAgICAgbGluZU51bWJlcjogaW5kZXgsXG4gICAgICAgICAgICAgICAgZHVlRGF0ZSxcbiAgICAgICAgICAgICAgICB0YWdzLFxuICAgICAgICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICAgICAgICBjb21wbGV0aW9uRGF0ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGFza3M7XG59XG5cbi8qKlxuICogRm9ybWF0cyBhIGRhdGUgdG8gc2hvdyB0aW1lIGlmIGl0J3MgdG9kYXksIG90aGVyd2lzZSBzaG93cyB0aGUgZnVsbCBkYXRlLlxuICogQHBhcmFtIHtEYXRlfSBkYXRlIFRoZSBkYXRlIHRvIGZvcm1hdC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgZGF0ZSBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGZvcm1hdERhdGVUaW1lKGRhdGUpIHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGlmIChpc1NhbWVEYXkoZGF0ZSwgbm93KSkgcmV0dXJuIG1vbWVudChkYXRlKS5mb3JtYXQoJ0hIOm1tJyk7XG4gICAgcmV0dXJuIG1vbWVudChkYXRlKS5mb3JtYXQoJ0RELU1NLVlZWVknKTtcbn1cblxuLy8gVXRpbGl0eSB3cmFwcGVycyBhcm91bmQgbW9tZW50LmpzIGZvciBjb25zaXN0ZW50IGRhdGUgaGFuZGxpbmcuXG5mdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUsIGZvcm1hdCkgeyByZXR1cm4gbW9tZW50KGRhdGUpLmZvcm1hdChmb3JtYXQpOyB9XG5mdW5jdGlvbiBmb3JtYXRNb250aFRpdGxlKGRhdGUsIGZvcm1hdCkgeyByZXR1cm4gbW9tZW50KGRhdGUpLmZvcm1hdChmb3JtYXQpOyB9XG5mdW5jdGlvbiBpc1NhbWVEYXkoYSwgYikgeyByZXR1cm4gbW9tZW50KGEpLmlzU2FtZShiLCAnZGF5Jyk7IH1cblxuY2xhc3MgQ29uZmlybWF0aW9uTW9kYWxXaXRoU3R5bGVzIGV4dGVuZHMgQ29uZmlybWF0aW9uTW9kYWwge1xuICAgIG9uT3BlbigpIHtcbiAgICAgICAgc3VwZXIub25PcGVuKCk7XG5cbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cbiAgICAgICAgLy8gU3R5bGUgdGhlIG1haW4gY29udGVudCBjb250YWluZXJcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnBhZGRpbmcgPSAnMjBweCAyNHB4JztcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuXG4gICAgICAgIC8vIFN0eWxlIHRoZSB0aXRsZSB1c2luZyBDU1MgdmFyaWFibGVzXG4gICAgICAgIGNvbnN0IHRpdGxlRWwgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcignaDEsIGgyJyk7XG4gICAgICAgIGlmICh0aXRsZUVsKSB7XG4gICAgICAgICAgICB0aXRsZUVsLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxNnB4JztcbiAgICAgICAgICAgIHRpdGxlRWwuc3R5bGUuZm9udFNpemUgPSAnMS4zcmVtJztcbiAgICAgICAgICAgIC8vIFVzZSB0aGUgcHJpbWFyeSB0ZXh0IGNvbG9yIHZhcmlhYmxlXG4gICAgICAgICAgICB0aXRsZUVsLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbm9ybWFsKSc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdHlsZSB0aGUgbWVzc2FnZSBwYXJhZ3JhcGggdXNpbmcgQ1NTIHZhcmlhYmxlc1xuICAgICAgICBjb25zdCBtZXNzYWdlRWwgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcigncCcpO1xuICAgICAgICBpZiAobWVzc2FnZUVsKSB7XG4gICAgICAgICAgICBtZXNzYWdlRWwuc3R5bGUubGluZUhlaWdodCA9ICcxLjYnO1xuICAgICAgICAgICAgbWVzc2FnZUVsLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcyNHB4JztcbiAgICAgICAgICAgIG1lc3NhZ2VFbC5zdHlsZS5mb250U2l6ZSA9ICcxcmVtJztcbiAgICAgICAgICAgIC8vIFVzZSB0aGUgbXV0ZWQgdGV4dCBjb2xvciB2YXJpYWJsZSBmb3Igc2Vjb25kYXJ5IHRleHRcbiAgICAgICAgICAgIG1lc3NhZ2VFbC5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdHlsZSB0aGUgYnV0dG9uIGNvbnRhaW5lclxuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcignLm1vZGFsLWJ1dHRvbi1jb250YWluZXInKTtcbiAgICAgICAgaWYgKGJ1dHRvbkNvbnRhaW5lcikge1xuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnY2VudGVyJztcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5nYXAgPSAnMTJweCc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdHlsZSB0aGUgcHJpbWFyeSBjb25maXJtYXRpb24gYnV0dG9uXG4gICAgICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcignLm1vZC1jdGEnKTtcbiAgICAgICAgaWYgKGNvbmZpcm1CdXR0b24pIHtcbiAgICAgICAgICAgIGNvbmZpcm1CdXR0b24uc3R5bGUuZm9udFdlaWdodCA9ICc2MDAnO1xuICAgICAgICB9XG4gICAgfVxuXG59XG5cbi8qKlxuICogQSBjdXN0b20gaW5wdXQgc3VnZ2VzdGVyIGZvciB0YWdzLlxuICovXG5jbGFzcyBUYWdTdWdnZXN0IGV4dGVuZHMgQWJzdHJhY3RJbnB1dFN1Z2dlc3Qge1xuICAgIGNvbnN0cnVjdG9yKGFwcCwgaW5wdXRFbCwgdmlldykge1xuICAgICAgICBzdXBlcihhcHAsIGlucHV0RWwpO1xuICAgICAgICB0aGlzLmlucHV0RWwgPSBpbnB1dEVsO1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLmFsbFRhZ3MgPSBuZXcgU2V0KCk7XG4gICAgfVxuXG4gICAgZ2V0U3VnZ2VzdGlvbnMocXVlcnkpIHtcbiAgICAgICAgdGhpcy5yZWZyZXNoQWxsVGFncygpO1xuXG4gICAgICAgIC8vIElmIHRoZSBxdWVyeSBpcyBlbXB0eSwgc2hvdyBhbGwgdGFncywgc29ydGVkIGFscGhhYmV0aWNhbGx5LlxuICAgICAgICBpZiAoIXF1ZXJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmFsbFRhZ3MpXG4gICAgICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiLCB1bmRlZmluZWQsIHsgc2Vuc2l0aXZpdHk6ICdiYXNlJyB9KSlcbiAgICAgICAgICAgIC8vLnNsaWNlKDAsIDIwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE9ubHkgcHJvY2VlZCBpZiBxdWVyeSBzdGFydHMgd2l0aCAnIydcbiAgICAgICAgaWYgKCFxdWVyeS5zdGFydHNXaXRoKCcjJykpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNlYXJjaFRlcm0gPSBxdWVyeS5zdWJzdHJpbmcoMSkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5hbGxUYWdzKVxuICAgICAgICAgICAgLmZpbHRlcih0YWcgPT4gdGFnLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVGVybSkpXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5sb2NhbGVDb21wYXJlKGIsIHVuZGVmaW5lZCwgeyBzZW5zaXRpdml0eTogJ2Jhc2UnIH0pKTtcbiAgICB9XG5cbiAgICByZW5kZXJTdWdnZXN0aW9uKHRhZywgZWwpIHtcbiAgICAgICAgZWwuc2V0VGV4dCh0YWcpO1xuICAgIH1cblxuICAgIHNlbGVjdFN1Z2dlc3Rpb24odGFnKSB7XG4gICAgICAgIGNvbnN0IGZpbmFsVmFsdWUgPSBgIyR7dGFnfWA7XG4gICAgICAgIHRoaXMuc2V0VmFsdWUoZmluYWxWYWx1ZSk7XG5cbiAgICAgICAgaWYgKHRoaXMudmlldy5hY3RpdmVUYWIgPT09ICd0YXNrcycpIHtcbiAgICAgICAgICAgIHRoaXMudmlldy50YXNrc1NlYXJjaFRlcm0gPSBmaW5hbFZhbHVlO1xuICAgICAgICAgICAgdGhpcy52aWV3LnBvcHVsYXRlVGFza3MoKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnZpZXcuYWN0aXZlVGFiID09PSAnbm90ZXMnKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXcubm90ZXNTZWFyY2hUZXJtID0gZmluYWxWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMudmlldy5wb3B1bGF0ZU5vdGVzKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGlzIHdpbGwgbm93IHdvcmsgY29ycmVjdGx5XG4gICAgICAgIHRoaXMuaW5wdXRFbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuXG4gICAgcmVmcmVzaEFsbFRhZ3MoKSB7XG4gICAgICAgIHRoaXMuYWxsVGFncy5jbGVhcigpO1xuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMudmlldy5wbHVnaW4uc2V0dGluZ3M7XG5cbiAgICAgICAgaWYgKHRoaXMudmlldy5hY3RpdmVUYWIgPT09ICd0YXNrcycpIHtcbiAgICAgICAgICAgIC8vIEZvciB0YXNrcyB0YWIsIGV4dHJhY3QgdGFncyBvbmx5IGZyb20gdGFza3MuXG4gICAgICAgICAgICBjb25zdCBhbGxUYXNrcyA9IEFycmF5LmZyb20odGhpcy52aWV3LnRhc2tzQnlEYXRlLnZhbHVlcygpKS5mbGF0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRhc2sgb2YgYWxsVGFza3MpIHtcbiAgICAgICAgICAgICAgICBpZiAodGFzay50YWdzICYmIHRhc2sudGFncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2sudGFncy5mb3JFYWNoKHRhZyA9PiB0aGlzLmFsbFRhZ3MuYWRkKHRhZykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjsgLy8gU3RvcCBoZXJlIGZvciB0YXNrc1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRm9yIG5vdGVzIHRhYiwgZGV0ZXJtaW5lIHdoaWNoIG5vdGVzIHRvIHNjYW4gYW5kIHdoaWNoIHRhZyB0byBleGNsdWRlXG4gICAgICAgIGxldCBub3Rlc1RvU2NhbjtcbiAgICAgICAgY29uc3QgcGluVGFnVG9FeGNsdWRlID0gKHRoaXMudmlldy5hY3RpdmVUYWIgPT09ICdub3RlcycgJiYgdGhpcy52aWV3Lm5vdGVzVmlld01vZGUgPT09ICdwaW5uZWQnKVxuICAgICAgICAgICAgPyAoc2V0dGluZ3MucGluVGFnIHx8ICcnKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICA6IG51bGw7XG5cbiAgICAgICAgaWYgKHBpblRhZ1RvRXhjbHVkZSkge1xuICAgICAgICAgICAgLy8gT25seSBzY2FuIHBpbm5lZCBub3Rlc1xuICAgICAgICAgICAgbm90ZXNUb1NjYW4gPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFjYWNoZSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChjYWNoZS50YWdzPy5zb21lKHRhZyA9PiB0YWcudGFnLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocGluVGFnVG9FeGNsdWRlKSkpIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZyb250bWF0dGVyID0gY2FjaGUuZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICAgICAgaWYgKGZyb250bWF0dGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGZyb250bWF0dGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGZyb250bWF0dGVyW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBpblRhZ1RvRXhjbHVkZSkpIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLnNvbWUoaXRlbSA9PiB0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycgJiYgaXRlbS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBpblRhZ1RvRXhjbHVkZSkpKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNjYW4gYWxsIG5vdGVzIGZvciByZWNlbnQgbm90ZXMgbW9kZVxuICAgICAgICAgICAgbm90ZXNUb1NjYW4gPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFeHRyYWN0IHRhZ3MgZnJvbSB0aGUgZGV0ZXJtaW5lZCBzZXQgb2Ygbm90ZXNcbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIG5vdGVzVG9TY2FuKSB7XG4gICAgICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICAgICAgaWYgKCFjYWNoZSkgY29udGludWU7XG5cbiAgICAgICAgICAgIC8vIEhlbHBlciB0byBhZGQgYSB0YWcgaWYgaXQncyBub3QgdGhlIHBpbiB0YWdcbiAgICAgICAgICAgIGNvbnN0IGFkZFRhZyA9ICh0YWcpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBub3JtYWxpemVkVGFnID0gdGFnLnN0YXJ0c1dpdGgoJyMnKSA/IHRhZy5zdWJzdHJpbmcoMSkgOiB0YWc7XG4gICAgICAgICAgICAgICAgaWYgKHBpblRhZ1RvRXhjbHVkZSAmJiBub3JtYWxpemVkVGFnLnRvTG93ZXJDYXNlKCkgPT09IHBpblRhZ1RvRXhjbHVkZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIFNraXAgdGhlIHBpbiB0YWdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5hbGxUYWdzLmFkZChub3JtYWxpemVkVGFnKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmIChjYWNoZS50YWdzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0YWdPYmogb2YgY2FjaGUudGFncykge1xuICAgICAgICAgICAgICAgICAgICBhZGRUYWcodGFnT2JqLnRhZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhY2hlLmZyb250bWF0dGVyICYmIGNhY2hlLmZyb250bWF0dGVyLnRhZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmcm9udG1hdHRlclRhZ3MgPSBBcnJheS5pc0FycmF5KGNhY2hlLmZyb250bWF0dGVyLnRhZ3MpID8gY2FjaGUuZnJvbnRtYXR0ZXIudGFncyA6IFtjYWNoZS5mcm9udG1hdHRlci50YWdzXTtcbiAgICAgICAgICAgICAgICBmcm9udG1hdHRlclRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhZyA9PT0gJ3N0cmluZycpIGFkZFRhZyh0YWcpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhY2hlLmZyb250bWF0dGVyICYmIGNhY2hlLmZyb250bWF0dGVyLnRhZykge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FjaGUuZnJvbnRtYXR0ZXIudGFnID09PSAnc3RyaW5nJykgYWRkVGFnKGNhY2hlLmZyb250bWF0dGVyLnRhZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQSBjdXN0b20gaW5wdXQgc3VnZ2VzdGVyIGZvciBmaWx0ZXIga2V5d29yZHMuXG4gKi9cbmNsYXNzIEZpbHRlclN1Z2dlc3QgZXh0ZW5kcyBBYnN0cmFjdElucHV0U3VnZ2VzdCB7XG4gICAgY29uc3RydWN0b3IoYXBwLCBpbnB1dEVsLCBzdWdnZXN0aW9uSXRlbXMsIG9uU2VsZWN0Q2FsbGJhY2spIHtcbiAgICAgICAgc3VwZXIoYXBwLCBpbnB1dEVsKTtcbiAgICAgICAgdGhpcy5pbnB1dEVsID0gaW5wdXRFbDtcbiAgICAgICAgdGhpcy5zdWdnZXN0aW9uSXRlbXMgPSBzdWdnZXN0aW9uSXRlbXM7XG4gICAgICAgIHRoaXMub25TZWxlY3RDYWxsYmFjayA9IG9uU2VsZWN0Q2FsbGJhY2s7XG4gICAgfVxuXG4gICAgZ2V0U3VnZ2VzdGlvbnMocXVlcnkpIHtcbiAgICAgICAgLy8gSWYgdGhlIHF1ZXJ5IGlzIGVtcHR5LCBzaG93IGFsbCBhdmFpbGFibGUgc3VnZ2VzdGlvbnMgKGZvciBmb2N1cy9hcnJvdy1kb3duKS5cbiAgICAgICAgaWYgKCFxdWVyeSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3VnZ2VzdGlvbkl0ZW1zO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxvd2VyQ2FzZVF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VnZ2VzdGlvbkl0ZW1zLmZpbHRlcihzdWdnZXN0aW9uID0+XG4gICAgICAgICAgICBzdWdnZXN0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJDYXNlUXVlcnkpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVuZGVyU3VnZ2VzdGlvbih2YWx1ZSwgZWwpIHtcbiAgICAgICAgZWwuc2V0VGV4dCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgc2VsZWN0U3VnZ2VzdGlvbih2YWx1ZSkge1xuICAgICAgICB0aGlzLnNldFZhbHVlKHZhbHVlKTtcbiAgICAgICAgdGhpcy5vblNlbGVjdENhbGxiYWNrKHZhbHVlKTtcbiAgICAgICAgLy8gVGhpcyB3aWxsIG5vdyB3b3JrIGNvcnJlY3RseVxuICAgICAgICB0aGlzLmlucHV0RWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2lucHV0JywgeyBidWJibGVzOiB0cnVlIH0pKTtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGUgbWFpbiB2aWV3IGNsYXNzIGZvciB0aGUgcGx1Z2luLCBoYW5kbGluZyBhbGwgcmVuZGVyaW5nIGFuZCB1c2VyIGludGVyYWN0aW9uLlxuICovXG5jbGFzcyBQZXJpb2RNb250aFZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gICAgICAgIFxuICAgIGNvbnN0cnVjdG9yKGxlYWYsIHBsdWdpbikge1xuICAgICAgICBzdXBlcihsZWFmKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMudGhlbWVDaGFuZ2VEZWJvdW5jZVRpbWVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5jYWxlbmRhckhlYWRlclJvd0VsID0gbnVsbDtcbiAgICAgICAgdGhpcy5waW5uZWRTb3J0T3JkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5waW5uZWROb3Rlc1NvcnRPcmRlcjtcbiAgICAgICAgdGhpcy5ibHVyQWN0aXZlSW5wdXQgPSB0aGlzLmJsdXJBY3RpdmVJbnB1dC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRhc2hib2FyZENvbnRlbnRFbCA9IG51bGw7XG4gICAgICAgIHRoaXMuZGFzaGJvYXJkVGFza0RlYm91bmNlVGltZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmRhc2hib2FyZENyZWF0aW9uRGVib3VuY2VUaW1lciA9IG51bGw7XG4gICAgICAgIHRoaXMuZGFzaGJvYXJkUmVmcmVzaFRpbWVycyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5maWxlVG9IZWF0bWFwQ2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMucmVzaXplRGVib3VuY2VUaW1lciA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RhdHVzQmFyT2JzZXJ2ZXIgPSBudWxsO1xuICAgIFxuICAgICAgICAvL3B1bGwgZG93biB0byBmcmVzaFxuICAgICAgICB0aGlzLnRhc2tQdWxsU3RhcnRZID0gMDtcbiAgICAgICAgdGhpcy50YXNrUHVsbERpc3RhbmNlID0gMDtcbiAgICAgICAgdGhpcy5pc1Rhc2tQdWxsaW5nID0gZmFsc2U7XG5cbiAgICAgICAgLy8gLS0tIFN0YXRlIE1hbmFnZW1lbnQgLS0tXG4gICAgICAgIHRoaXMuZGlzcGxheWVkTW9udGggPSBuZXcgRGF0ZSgpOyAvLyBUaGUgbW9udGggY3VycmVudGx5IHNob3duIGluIHRoZSBjYWxlbmRhci5cbiAgICAgICAgdGhpcy5pc1ZlcnRpY2FsVmlldyA9IGZhbHNlOyAgICAgIC8vIFRvZ2dsZXMgYmV0d2VlbiBzaW5nbGUtbW9udGggYW5kIHZlcnRpY2FsIHNjcm9sbCB2aWV3LlxuICAgICAgICB0aGlzLmlzUG9wdXBMb2NrZWQgPSBmYWxzZTsgICAgICAgLy8gVHJhY2tzIGlmIHBvcHVwcyBhcmUgZ2xvYmFsbHkgZGlzYWJsZWRcbiAgICAgICAgdGhpcy5pc0NhbGVuZGFyQ29sbGFwc2VkID0gZmFsc2U7IC8vIFRvZ2dsZXMgdGhlIHZpc2liaWxpdHkgb2YgdGhlIGNhbGVuZGFyIGdyaWQuXG4gICAgICAgIHRoaXMuY2FsZW5kYXJXYXNDb2xsYXBzZWRGb3JFZGl0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNDb2xsYXBzZVRvZ2dsZVByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1NjcmF0Y2hwYWRQcmV2aWV3ID0gZmFsc2U7IC8vIFRvZ2dsZXMgc2NyYXRjaHBhZCBiZXR3ZWVuIGVkaXQgYW5kIHByZXZpZXcgbW9kZS5cbiAgICAgICAgdGhpcy5hY3RpdmVUYWIgPSBudWxsOyAgICAgICAgICAgIC8vIFRyYWNrcyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHRhYiAoJ3NjcmF0Y2gnLCAnbm90ZXMnLCBldGMuKS5cbiAgICAgICAgdGhpcy5pc1Byb2dyYW1tYXRpY1Njcm9sbCA9IGZhbHNlOyAvLyBQcmV2ZW50cyBzY3JvbGwgZXZlbnQgbG9vcHMgZHVyaW5nIHByb2dyYW1tYXRpYyBzY3JvbGxpbmcuXG4gICAgICAgIHRoaXMuaXNEcmFnZ2luZ05vdGUgPSBmYWxzZTsgICAgICAvLyBUcmFja3MgaWYgYSBub3RlIGlzIGN1cnJlbnRseSBiZWluZyBkcmFnZ2VkIGZvciByZW9yZGVyaW5nLlxuICAgICAgICB0aGlzLmlzTW91c2VEb3duID0gZmFsc2U7ICAgICAgICAgLy8gVHJhY2tzIGlmIHRoZSBtb3VzZSBidXR0b24gaXMgY3VycmVudGx5IHByZXNzZWQuXG4gICAgICAgIHRoaXMuaXNSZW9yZGVyTW9kZUFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRhc2hib2FyZFZpZXdNb2RlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdERhc2hib2FyZFZpZXcgfHwgJ2NyZWF0aW9uJztcbiAgICAgICAgdGhpcy50YXNrQmFyQ2hhcnRNb2RlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0JhckNoYXJ0RGVmYXVsdE1vZGU7XG5cbiAgICAgICAgLy8gLS0tIFNlYXJjaCBhbmQgRGF0YSBTdGF0ZXMgLS0tXG4gICAgICAgIHRoaXMubm90ZXNWaWV3TW9kZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVzVmlld01vZGU7XG4gICAgICAgIHRoaXMuZGFzaGJvYXJkU2VhcmNoVGVybSA9IFwiXCI7XG4gICAgICAgIHRoaXMubm90ZXNTZWFyY2hUZXJtID0gXCJcIjtcbiAgICAgICAgdGhpcy50YXNrc1NlYXJjaFRlcm0gPSBcIlwiO1xuICAgICAgICB0aGlzLnNjcmF0Y2hwYWRTZWFyY2hUZXJtID0gXCJcIjtcbiAgICAgICAgdGhpcy5hc3NldHNTZWFyY2hUZXJtID0gXCJcIjtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWROb3RlR3JvdXBzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29sbGFwc2VkTm90ZUdyb3VwcyB8fCB7fTtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWRUYXNrR3JvdXBzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29sbGFwc2VkVGFza0dyb3VwcyB8fCB7fTtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWRBc3NldEdyb3VwcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbGxhcHNlZEFzc2V0R3JvdXBzIHx8IHt9O1xuXG4gICAgICAgIC8vIC0tLSBDYWNoaW5nIGFuZCBEYXRhIE1hcHMgLS0tXG4gICAgICAgIC8vIFRoZXNlIG1hcHMgc3RvcmUgcHJlLXByb2Nlc3NlZCBkYXRhIHRvIGF2b2lkIHJlLXNjYW5uaW5nIHRoZSB2YXVsdCBvbiBldmVyeSByZW5kZXIuXG4gICAgICAgIHRoaXMubm90ZVRleHQgPSBcIlwiO1xuICAgICAgICB0aGlzLmFsbFRhc2tzID0gW107XG4gICAgICAgIHRoaXMuY3JlYXRlZE5vdGVzTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLm1vZGlmaWVkTm90ZXNNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuYXNzZXRDcmVhdGlvbk1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5hbGxDcmVhdGVkTm90ZXNNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMudGFza3NCeURhdGUgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuaWNzRXZlbnRzQnlEYXRlID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLnByb2Nlc3NlZEV2ZW50U2lnbmF0dXJlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgdGhpcy50YXNrQ2FjaGUgPSBuZXcgTWFwKCk7IC8vIENhY2hlcyB0YXNrIGNvbnRlbnQgb2YgZmlsZXMgdG8gZGV0ZWN0IGNoYW5nZXMuXG4gICAgICAgIHRoaXMuZmlsZVRvVGFza0RhdGVzID0gbmV3IE1hcCgpOyAvLyBUcmFja3Mgd2hpY2ggZGF0ZXMgYSBmaWxlIGhhcyB0YXNrcyBmb3IuIDxmaWxlUGF0aCwgU2V0PGRhdGVLZXk+PlxuICAgICAgICB0aGlzLmlzQXNzZXRzR3JpZFZpZXcgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hc3NldHNEZWZhdWx0VmlldyA9PT0gJ2dyaWQnO1xuICAgICAgICB0aGlzLnVudXNlZEFzc2V0UGF0aHNDYWNoZSA9IG5ldyBTZXQoKTtcbiAgICAgICAgdGhpcy5pc1VudXNlZEFzc2V0Q2FjaGVWYWxpZCA9IGZhbHNlO1xuXG4gICAgICAgIC8vIC0tLSBVSSBhbmQgRXZlbnQgSGFuZGxpbmcgLS0tXG4gICAgICAgIHRoaXMudG9kYXlCdG4gPSBudWxsO1xuICAgICAgICB0aGlzLnNjcmF0Y2hXcmFwcGVyRWwgPSBudWxsO1xuICAgICAgICB0aGlzLnNjcmF0Y2hwYWRWaWV3VG9nZ2xlQnRuID0gbnVsbDtcbiAgICAgICAgdGhpcy5ob3ZlclRpbWVvdXQgPSBudWxsO1xuICAgICAgICB0aGlzLmhpZGVUaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5wb3B1cEVsID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXNrUmVmcmVzaERlYm91bmNlVGltZXIgPSBudWxsO1xuICAgICAgICB0aGlzLm5vdGVzUmVmcmVzaERlYm91bmNlVGltZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmNhbGVuZGFyUmVmcmVzaERlYm91bmNlVGltZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnRpdGxlVXBkYXRlVGltZW91dCA9IG51bGw7XG4gICAgICAgIHRoaXMuZXhpc3RpbmdXZWVrbHlOb3RlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgdGhpcy5kYWlseVJlZnJlc2hUaW1lb3V0ID0gbnVsbDsgXG4gICAgICAgIHRoaXMudGhlbWVPYnNlcnZlciA9IG51bGw7XG4gICAgICAgIHRoaXMubGFzdEtub3duVG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgICB0aGlzLnNjcmF0Y2hwYWRGcm9udG1hdHRlciA9ICcnO1xuXG4gICAgICAgIC8vIC0tLSBNb2JpbGUgS2V5Ym9hcmQgSGFuZGxpbmcgLS0tXG4gICAgICAgIHRoaXMuaXNFZGl0aW5nTW9iaWxlID0gZmFsc2U7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBhIE11dGF0aW9uT2JzZXJ2ZXIgdG8gd2F0Y2ggZm9yIHRoZW1lIGNoYW5nZXMuXG4gICAgICAgIHRoaXMudGhlbWVPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcbiAgICAgICAgICAgIC8vIERlYm91bmNlIHRoZSByZS1yZW5kZXIgdG8gYXZvaWQgbXVsdGlwbGUgY2FsbHMgZHVyaW5nIHRoZW1lIHN3aXRjaGluZy5cbiAgICAgICAgICAgIGlmICh0aGlzLnRoZW1lQ2hhbmdlRGVib3VuY2VUaW1lcikge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRoZW1lQ2hhbmdlRGVib3VuY2VUaW1lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRoZW1lQ2hhbmdlRGVib3VuY2VUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjYWxlbmRhciBncmlkIGV4aXN0cywgcmUtcmVuZGVyIGl0IHRvIGFwcGx5IG5ldyB0aGVtZSBjb2xvcnMuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FsZW5kYXJCb2R5RWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDEwMCk7IC8vIEEgMTAwbXMgZGVsYXkgaXMgdXN1YWxseSBzdWZmaWNpZW50LlxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTdGFydCBvYnNlcnZpbmcgdGhlIGBjbGFzc2AgYXR0cmlidXRlIG9uIHRoZSBkb2N1bWVudCBib2R5LlxuICAgICAgICB0aGlzLnRoZW1lT2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgICAgICAgICAgYXR0cmlidXRlRmlsdGVyOiBbJ2NsYXNzJ11cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAnbW91c2V1cCcsICgpID0+IHtcbiAgICAgICAgICAgIC8vIEFsd2F5cyByZXNldCB0aGUgbW91c2Vkb3duIGZsYWcuXG4gICAgICAgICAgICBpZiAodGhpcy5pc01vdXNlRG93bikge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNNb3VzZURvd24gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEFsc28sIGNyaXRpY2FsbHksIHJlc2V0IHRoZSBkcmFnZ2luZyBmbGFnIGFzIGEgc2FmZXR5IG5ldC5cbiAgICAgICAgICAgIC8vIFRoaXMgcHJldmVudHMgdGhlIGZsYWcgZnJvbSBnZXR0aW5nIHN0dWNrIGlmIGRyYWdlbmQgZG9lc24ndCBmaXJlLlxuICAgICAgICAgICAgaWYgKHRoaXMuaXNEcmFnZ2luZ05vdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzRHJhZ2dpbmdOb3RlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudCh3aW5kb3csICdyZXNpemUnLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBDbGVhciBhbnkgZXhpc3RpbmcgdGltZXIgdG8gZGVib3VuY2UgdGhlIGV2ZW50XG4gICAgICAgICAgICBpZiAodGhpcy5yZXNpemVEZWJvdW5jZVRpbWVyKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVzaXplRGVib3VuY2VUaW1lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNldCBhIG5ldyB0aW1lciB0byBydW4gdGhlIHVwZGF0ZSBhZnRlciBhIHNob3J0IGRlbGF5XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZURlYm91bmNlVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHRpdGxlIGVsZW1lbnQgZXhpc3RzIGFuZCB0aGVuIHJlLXJlbmRlciBpdFxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vbnRoTmFtZUVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTW9udGhUaXRsZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDEwMCk7IC8vIEEgMTAwbXMgZGVsYXkgaXMgdXN1YWxseSBzdWZmaWNpZW50XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgdGhlIHRhc2sgY2hlY2tib3ggdXNpbmcgbmF0aXZlIE9ic2lkaWFuIHRhc2sgbGlzdCBtYXJrdXBcbiAgICAgKiB0aGF0IGluaGVyaXRzIHRoZW1lIHN0eWxpbmcuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIFRoZSBjb250YWluZXIgZm9yIHRoZSBjaGVja2JveC5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gdGFzayBUaGUgdGFzayBvYmplY3QgY29udGFpbmluZyBzdGF0dXMgaW5mb3JtYXRpb24uXG4gICAgICovXG4gICAgYXN5bmMgX3JlbmRlclRhc2tTeW1ib2woY2hlY2tib3hFbCwgdGFzaykge1xuICAgICAgICBjaGVja2JveEVsLmVtcHR5KCk7XG4gICAgICAgIGNoZWNrYm94RWwuY2xhc3NOYW1lID0gJ3Rhc2stY2hlY2tib3gtc3ltYm9sJztcblxuICAgICAgICBjb25zdCBzdGF0dXMgPSB0YXNrLnN0YXR1cztcblxuICAgICAgICAvLyBDcmVhdGUgYSBtaW5pbWFsIG1hcmtkb3duIHN0cmluZyB3aXRoIHRoZSB0YXNrXG4gICAgICAgIGNvbnN0IG1hcmtkb3duVGV4dCA9IGAtIFske3N0YXR1c31dIGA7XG5cbiAgICAgICAgLy8gVXNlIE1hcmtkb3duUmVuZGVyZXIgdG8gcmVuZGVyIGl0IC0gdGhpcyB3aWxsIGluaGVyaXQgQUxMIHRoZW1lIHN0eWxpbmdcbiAgICAgICAgYXdhaXQgTWFya2Rvd25SZW5kZXJlci5yZW5kZXIoXG4gICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgIG1hcmtkb3duVGV4dCxcbiAgICAgICAgICAgIGNoZWNrYm94RWwsXG4gICAgICAgICAgICB0YXNrLmZpbGUucGF0aCxcbiAgICAgICAgICAgIHRoaXNcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBGaW5kIHRoZSBjaGVja2JveCB0aGF0IHdhcyByZW5kZXJlZFxuICAgICAgICBjb25zdCBjaGVja2JveCA9IGNoZWNrYm94RWwucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyk7XG4gICAgICAgIGlmIChjaGVja2JveCkge1xuICAgICAgICAgICAgLy8gUkVNT1ZFIHRoZSBkaXNhYmxlZCBhdHRyaWJ1dGUgdG8gYWxsb3cgY2xpY2tzXG4gICAgICAgICAgICBjaGVja2JveC5kaXNhYmxlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvLyBBZGQgY2xpY2sgaGFuZGxlciB0byB0b2dnbGUgdGFzayBzdGF0dXNcbiAgICAgICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBDUklUSUNBTDogUHJldmVudCB0aGUgZGVmYXVsdCBjaGVja2JveCB0b2dnbGUgYmVoYXZpb3JcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgICAgIC8vIERpc2FibGUgdGhlIGNoZWNrYm94IGR1cmluZyB0aGUgdXBkYXRlIHRvIHByZXZlbnQgZG91YmxlLWNsaWNrc1xuICAgICAgICAgICAgICAgIGNoZWNrYm94LmRpc2FibGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIC8vIFRvZ2dsZSB0aGUgdGFzayBjb21wbGV0aW9uIGluIHRoZSBmaWxlXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy50b2dnbGVUYXNrQ29tcGxldGlvbih0YXNrKTtcblxuICAgICAgICAgICAgICAgIC8vIFRoZSBmaWxlIHdhdGNoZXIgd2lsbCBhdXRvbWF0aWNhbGx5IHJlZnJlc2ggdGhlIHZpZXdcbiAgICAgICAgICAgICAgICAvLyBhbmQgcmUtZW5hYmxlIHRoZSBjaGVja2JveCB3aGVuIHJlbmRlclRhc2tTeW1ib2wgaXMgY2FsbGVkIGFnYWluXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGJ1aWxkSGVhdG1hcEZpbGVDYWNoZSgpIHtcbiAgICAgICAgdGhpcy5maWxlVG9IZWF0bWFwQ2FjaGUuY2xlYXIoKTtcbiAgICAgICAgY29uc3QgYWxsRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpO1xuXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBldmVyeSBmaWxlIGFuZCBjaGVjayBpdCBhZ2FpbnN0IGV2ZXJ5IGhlYXRtYXAgY29uZmlnXG4gICAgICAgIGFsbEZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaGluZ0hlYXRtYXBzID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tSGVhdG1hcHMuZm9yRWFjaCgoY29uZmlnLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9tYXRjaGVzSGVhdG1hcFJ1bGUoZmlsZSwgY29uZmlnKSkge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaGluZ0hlYXRtYXBzLmFkZChpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChtYXRjaGluZ0hlYXRtYXBzLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxlVG9IZWF0bWFwQ2FjaGUuc2V0KGZpbGUucGF0aCwgbWF0Y2hpbmdIZWF0bWFwcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGhhc1VubGlua2VkQXNzZXRzKCkge1xuICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dVbnVzZWRBc3NldHNJbmRpY2F0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBVc2UgdGhlIGNhY2hlIGlmIGl0J3MgdmFsaWRcbiAgICAgICAgaWYgKCF0aGlzLmlzVW51c2VkQXNzZXRDYWNoZVZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLnVudXNlZEFzc2V0UGF0aHNDYWNoZSA9IGF3YWl0IHRoaXMuZ2V0VW51c2VkQXNzZXRQYXRocygpO1xuICAgICAgICAgICAgdGhpcy5pc1VudXNlZEFzc2V0Q2FjaGVWYWxpZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudW51c2VkQXNzZXRQYXRoc0NhY2hlICYmIHRoaXMudW51c2VkQXNzZXRQYXRoc0NhY2hlLnNpemUgPiAwO1xuICAgIH1cblxuICAgIGhhbmRsZUtleURvd24oZXZlbnQpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHByZXNzZWQga2V5IGlzICdFc2NhcGUnIGFuZCBpZiB0aGUgdmVydGljYWwgdmlldyBpcyBhY3RpdmUuXG4gICAgICAgIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnICYmIHRoaXMuaXNWZXJ0aWNhbFZpZXcpIHtcbiAgICAgICAgICAgIC8vIFByZXZlbnQgdGhlIGRlZmF1bHQgJ0VzY2FwZScga2V5IGJlaGF2aW9yIChsaWtlIGNsb3NpbmcgbW9kYWxzKS5cbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIC8vIFNldCB0aGUgc3RhdGUgYmFjayB0byB0aGUgbWFpbiBjYWxlbmRhciBncmlkIHZpZXcuXG4gICAgICAgICAgICB0aGlzLmlzVmVydGljYWxWaWV3ID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8vIFJlLXJlbmRlciB0aGUgdmlldyB0byBkaXNwbGF5IHRoZSBncmlkLlxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGJsdXJBY3RpdmVJbnB1dCgpIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVFbCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGl0J3MgYW4gZWxlbWVudCB0aGF0IGNhbiBiZSBibHVycmVkIGJlZm9yZSBjYWxsaW5nIHRoZSBtZXRob2RcbiAgICAgICAgICAgIGlmIChhY3RpdmVFbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmIHR5cGVvZiBhY3RpdmVFbC5ibHVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlRWwuYmx1cigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2luZ2xlIHNvdXJjZSBvZiB0cnV0aCBmb3IgY29sbGFwc2luZyBvciBleHBhbmRpbmcgdGhlIGNhbGVuZGFyIHZpZXcuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBzaG91bGRCZUNvbGxhcHNlZCAtIFRoZSBkZXNpcmVkIHN0YXRlLiBUcnVlIHRvIGNvbGxhcHNlLCBmYWxzZSB0byBleHBhbmQuXG4gICAgICovXG4gICAgdG9nZ2xlQ2FsZW5kYXIoc2hvdWxkQmVDb2xsYXBzZWQpIHtcbiAgICAgICAgLy8gSWYgdGhlIFVJIGlzIGFscmVhZHkgaW4gdGhlIGRlc2lyZWQgc3RhdGUsIGRvIG5vdGhpbmcuXG4gICAgICAgIGlmICh0aGlzLmlzQ2FsZW5kYXJDb2xsYXBzZWQgPT09IHNob3VsZEJlQ29sbGFwc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzQ2FsZW5kYXJDb2xsYXBzZWQgPSBzaG91bGRCZUNvbGxhcHNlZDtcblxuICAgICAgICAvLyBUb2dnbGUgdGhlIG1haW4gQ1NTIGNsYXNzIHRoYXQgY29udHJvbHMgdGhlIGNvbGxhcHNlIGFuaW1hdGlvbi5cbiAgICAgICAgLy8gVGhlIENTUyB3aWxsIGF1dG9tYXRpY2FsbHkgaGFuZGxlIHJvdGF0aW5nIHRoZSBjaGV2cm9uIGljb24uXG4gICAgICAgIGlmICh0aGlzLmNvbnRhaW5lckVsICYmIHRoaXMuY29udGFpbmVyRWwuZmlyc3RFbGVtZW50Q2hpbGQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LnRvZ2dsZSgnY2FsZW5kYXItY29sbGFwc2VkJywgc2hvdWxkQmVDb2xsYXBzZWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgcmVmcmVzaFdpdGhOZXdTZXR0aW5ncyhuZXdTZXR0aW5ncykge1xuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncyA9IG5ld1NldHRpbmdzO1xuICAgICAgICBhd2FpdCB0aGlzLnBvcHVsYXRlTm90ZXMoKTtcbiAgICB9XG5cbiAgICB1cGRhdGVEeW5hbWljUGFkZGluZygpIHtcbiAgICAgICAgaWYgKFBsYXRmb3JtLmlzTW9iaWxlKSByZXR1cm47IC8vIERvbid0IHJ1biB0aGlzIGxvZ2ljIG9uIG1vYmlsZVxuXG4gICAgICAgIGNvbnN0IHN0YXR1c0JhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdGF0dXMtYmFyJyk7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRXcmFwcGVyID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcudGFicy1jb250ZW50LXdyYXBwZXInKTtcblxuICAgICAgICBpZiAoc3RhdHVzQmFyICYmIGNvbnRlbnRXcmFwcGVyKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0dXNCYXJIZWlnaHQgPSBzdGF0dXNCYXIub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgY29udGVudFdyYXBwZXIuc3R5bGUucGFkZGluZ0JvdHRvbSA9IGAke3N0YXR1c0JhckhlaWdodH1weGA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJUYXNrU3VtbWFyeVdpZGdldChwYXJlbnQsIHRpdGxlLCBpbmNvbXBsZXRlVGFza3MsIGNvbXBsZXRlZFRhc2tzLCBvdmVyZHVlVGFza3MgPSBbXSwgaW5Qcm9ncmVzc1Rhc2tzID0gW10sIG5vRHVlVGFza3MgPSBbXSwgd2lkZ2V0S2V5KSB7XG4gICAgXG4gICAgICAgIGNvbnN0IHdpZGdldENvbnRhaW5lciA9IHBhcmVudC5jcmVhdGVEaXYoeyBjbHM6ICdwbS13aWRnZXQtY29udGFpbmVyIGlzLXN1bW1hcnktd2lkZ2V0JyB9KTtcblxuICAgICAgICAvLyAtLS0gU3RhdGUgTWFuYWdlbWVudCAoWW91ciBjb2RlLCB1bmNoYW5nZWQpIC0tLVxuICAgICAgICBjb25zdCBzdGF0ZXMgPSBbJ2Z1bGwnLCAnbWluaSddO1xuICAgICAgICBsZXQgY3VycmVudFN0YXRlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc21hbGxXaWRnZXRTdGF0ZXNbd2lkZ2V0S2V5XSB8fCAnZnVsbCc7XG5cbiAgICAgICAgLy8gLS0tIFVJIEVsZW1lbnRzIChZb3VyIGNvZGUsIHVuY2hhbmdlZCkgLS0tXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IHdpZGdldENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdwbS13aWRnZXQtaGVhZGVyJyB9KTtcbiAgICAgICAgY29uc3QgdG9nZ2xlSWNvbiA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdzdW1tYXJ5LXRvZ2dsZS1pY29uJyB9KTtcbiAgICAgICAgY29uc3QgdGl0bGVFbCA9IGhlYWRlci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6IHRpdGxlIH0pO1xuXG4gICAgICAgIC8vIC0tLSBDb3JlIFJlbmRlcmluZyBMb2dpYyAoTU9ESUZJRUQpIC0tLVxuICAgICAgICBjb25zdCB0b3RhbFRhc2tzID0gKGluY29tcGxldGVUYXNrcz8ubGVuZ3RoIHx8IDApICsgKGNvbXBsZXRlZFRhc2tzPy5sZW5ndGggfHwgMCkgKyAob3ZlcmR1ZVRhc2tzPy5sZW5ndGggfHwgMCkgKyAoaW5Qcm9ncmVzc1Rhc2tzPy5sZW5ndGggfHwgMCkgKyAobm9EdWVUYXNrcz8ubGVuZ3RoIHx8IDApO1xuICAgICAgICBjb25zdCBpc0VtcHR5ID0gdG90YWxUYXNrcyA9PT0gMDtcblxuICAgICAgICAvLyAtLS0gVUkgVXBkYXRlIGFuZCBDbGljayBIYW5kbGVycyAoWW91ciBjb2RlLCB1bmNoYW5nZWQpIC0tLVxuICAgICAgICBjb25zdCB1cGRhdGVWaWV3ID0gKCkgPT4ge1xuICAgICAgICAgICAgd2lkZ2V0Q29udGFpbmVyLnJlbW92ZUNsYXNzZXMoWydpcy1mdWxsJywgJ2lzLW1pbmknXSk7XG4gICAgICAgICAgICB3aWRnZXRDb250YWluZXIuYWRkQ2xhc3MoYGlzLSR7Y3VycmVudFN0YXRlfWApO1xuICAgICAgICAgICAgc2V0SWNvbih0b2dnbGVJY29uLCAnY2hldnJvbi1kb3duJyk7XG5cbiAgICAgICAgICAgIGlmIChpc0VtcHR5ICYmIGN1cnJlbnRTdGF0ZSA9PT0gJ2Z1bGwnKSB7XG4gICAgICAgICAgICAgICAgd2lkZ2V0Q29udGFpbmVyLnN0eWxlLm1pbkhlaWdodCA9ICc4NXB4JztcbiAgICAgICAgICAgICAgICB3aWRnZXRDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgICAgICAgICB3aWRnZXRDb250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnY2VudGVyJztcbiAgICAgICAgICAgICAgICB3aWRnZXRDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB3aWRnZXRDb250YWluZXIuc3R5bGUubWluSGVpZ2h0ID0gJyc7XG4gICAgICAgICAgICAgICAgd2lkZ2V0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICB3aWRnZXRDb250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnJztcbiAgICAgICAgICAgICAgICB3aWRnZXRDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChpc0VtcHR5KSB7XG4gICAgICAgICAgICB3aWRnZXRDb250YWluZXIuY3JlYXRlRGl2KHsgdGV4dDogJ05vIHRhc2tzIGluIHRoaXMgcGVyaW9kLicsIGNsczogJ3Rhc2stZ3JvdXAtZW1wdHktbWVzc2FnZScgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBiYXJBbmRMZWdlbmRXcmFwcGVyID0gd2lkZ2V0Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2Jhci1hbmQtbGVnZW5kLXdyYXBwZXInIH0pO1xuICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3NCYXIgPSBiYXJBbmRMZWdlbmRXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogJ3BtLXByb2dyZXNzLWJhcicgfSk7XG4gICAgICAgICAgICBjb25zdCBsZWdlbmQgPSBiYXJBbmRMZWdlbmRXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogJ3BtLXByb2dyZXNzLWxlZ2VuZCcgfSk7XG5cbiAgICAgICAgICAgIC8vIC0tLSBzZXR1cFNlZ21lbnQgZnVuY3Rpb24gKE1PRElGSUVEIFRPIEFERCBDT0xPUlMpIC0tLVxuICAgICAgICAgICAgY29uc3Qgc2V0dXBTZWdtZW50ID0gKHRhc2tzLCB0eXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0YXNrcyB8fCB0YXNrcy5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHNlZ21lbnQgPSBwcm9ncmVzc0Jhci5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgICAgICAgICBjbHM6IGBwbS1wcm9ncmVzcy1zZWdtZW50ICR7dHlwZX1gLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0YXNrcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc2VnbWVudC5zdHlsZS53aWR0aCA9IGAkeyh0YXNrcy5sZW5ndGggLyB0b3RhbFRhc2tzKSAqIDEwMH0lYDtcbiAgICAgICAgICAgICAgICBzZWdtZW50LmFkZENsYXNzKCdpcy1pbnRlcmFjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgLy8gLS0tIFRISVMgSVMgVEhFIE5FVyBDT0xPUiBMT0dJQyAtLS1cbiAgICAgICAgICAgICAgICBsZXQgYmdDb2xvciA9ICcnO1xuICAgICAgICAgICAgICAgIHN3aXRjaCh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ292ZXJkdWUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYmdDb2xvciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tTdGF0dXNDb2xvck92ZXJkdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW4tcHJvZ3Jlc3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYmdDb2xvciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tTdGF0dXNDb2xvckluUHJvZ3Jlc3M7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW5jb21wbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBiZ0NvbG9yID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza1N0YXR1c0NvbG9yT3BlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjb21wbGV0ZWQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYmdDb2xvciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tTdGF0dXNDb2xvckNvbXBsZXRlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICduby1kdWUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXNpbmcgYSBkZWZhdWx0IGdyZXkgZm9yIG5vLWR1ZSBhcyBpdCBtYXkgbm90IGJlIGluIHNldHRpbmdzXG4gICAgICAgICAgICAgICAgICAgICAgICBiZ0NvbG9yID0gJ3JnYmEoMTU4LCAxNTgsIDE1OCwgMC41KSc7IFxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChiZ0NvbG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlZ21lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gYmdDb2xvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gLS0tIEVORCBPRiBORVcgQ09MT1IgTE9HSUMgLS0tXG5cbiAgICAgICAgICAgICAgICAvLyBZb3VyIG1vdXNlZW50ZXIgbG9naWMsIHVuY2hhbmdlZFxuICAgICAgICAgICAgICAgIHNlZ21lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNQb3B1cExvY2tlZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5oaWRlVGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZUZpbGVQb3B1cCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQ29tcGxldGVkID0gdHlwZSA9PT0gJ2NvbXBsZXRlZCc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzT3ZlcmR1ZSA9IHR5cGUgPT09ICdvdmVyZHVlJztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNJblByb2dyZXNzID0gdHlwZSA9PT0gJ2luLXByb2dyZXNzJztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNOb0R1ZSA9IHR5cGUgPT09ICduby1kdWUnO1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBwb3B1cFRpdGxlVGV4dCA9ICdUbyBEbyc7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBUaXRsZVRleHQgPSAnRG9uZSc7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNPdmVyZHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cFRpdGxlVGV4dCA9ICdPdmVyZHVlJztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0luUHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwVGl0bGVUZXh0ID0gJ0luIFByb2dyZXNzJztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc05vRHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cFRpdGxlVGV4dCA9ICdObyBEdWUgRGF0ZSc7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAod2lkZ2V0S2V5ID09PSAnZnV0dXJlTm9EdWUnICYmIHR5cGUgPT09ICdpbmNvbXBsZXRlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBUaXRsZVRleHQgPSAnRnV0dXJlJztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvcHVwVGl0bGUgPSBgJHt0aXRsZX0gLSAke3BvcHVwVGl0bGVUZXh0fWA7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ob3ZlclRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0ZpbGVQb3B1cChzZWdtZW50LCB7IHRhc2tzOiB0YXNrcyB9LCBwb3B1cFRpdGxlKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3RoZXJOb3RlSG92ZXJEZWxheSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBZb3VyIG1vdXNlbGVhdmUgbG9naWMsIHVuY2hhbmdlZFxuICAgICAgICAgICAgICAgIHNlZ21lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaG92ZXJUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5oaWRlRmlsZVBvcHVwKCksIHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcHVwSGlkZURlbGF5KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIFlvdXIgbGVnZW5kIGxvZ2ljLCB1bmNoYW5nZWRcbiAgICAgICAgICAgICAgICBsZXQgbGVnZW5kVGV4dCA9ICdUbyBEbyc7XG4gICAgICAgICAgICAgICAgaWYgKHdpZGdldEtleSA9PT0gJ2Z1dHVyZU5vRHVlJyAmJiB0eXBlID09PSAnaW5jb21wbGV0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVnZW5kVGV4dCA9ICdGdXR1cmUnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2NvbXBsZXRlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVnZW5kVGV4dCA9ICdEb25lJztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdvdmVyZHVlJykge1xuICAgICAgICAgICAgICAgICAgICBsZWdlbmRUZXh0ID0gJ092ZXJkdWUnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2luLXByb2dyZXNzJykge1xuICAgICAgICAgICAgICAgICAgICBsZWdlbmRUZXh0ID0gJ0luIFByb2dyZXNzJztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICduby1kdWUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZ2VuZFRleHQgPSAnTm8gRHVlIERhdGUnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGxlZ2VuZEl0ZW0gPSBsZWdlbmQuY3JlYXRlRGl2KHsgY2xzOiAnbGVnZW5kLWl0ZW0nIH0pO1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgc2V0cyB0aGUgbGVnZW5kIGJveCBjb2xvciB2aWEgQ1NTLCBidXQgdGhlIG5ldyBsb2dpYyBhYm92ZSBzZXRzIHRoZSBiYXIgY29sb3JcbiAgICAgICAgICAgICAgICBjb25zdCBsZWdlbmRDb2xvckJveCA9IGxlZ2VuZEl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBgbGVnZW5kLWNvbG9yLWJveCAke3R5cGV9YCB9KTtcbiAgICAgICAgICAgICAgICBpZiAoYmdDb2xvcikge1xuICAgICAgICAgICAgICAgICAgICBsZWdlbmRDb2xvckJveC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBiZ0NvbG9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZWdlbmRJdGVtLmNyZWF0ZVNwYW4oeyB0ZXh0OiBsZWdlbmRUZXh0IH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gUmVuZGVyIHNlZ21lbnRzIGluIHRoZSBjb3JyZWN0IHZpc3VhbCBvcmRlciAoTU9ESUZJRUQpXG4gICAgICAgICAgICBzZXR1cFNlZ21lbnQob3ZlcmR1ZVRhc2tzLCAnb3ZlcmR1ZScpO1xuICAgICAgICAgICAgc2V0dXBTZWdtZW50KGluY29tcGxldGVUYXNrcywgJ2luY29tcGxldGUnKTtcbiAgICAgICAgICAgIHNldHVwU2VnbWVudChpblByb2dyZXNzVGFza3MsICdpbi1wcm9ncmVzcycpO1xuICAgICAgICAgICAgc2V0dXBTZWdtZW50KG5vRHVlVGFza3MsICduby1kdWUnKTtcbiAgICAgICAgICAgIHNldHVwU2VnbWVudChjb21wbGV0ZWRUYXNrcywgJ2NvbXBsZXRlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gWW91ciBoZWFkZXIgY2xpY2sgbGlzdGVuZXIsIHVuY2hhbmdlZFxuICAgICAgICBoZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjdXJyZW50U3RhdGUgPSBjdXJyZW50U3RhdGUgPT09ICdmdWxsJyA/ICdtaW5pJyA6ICdmdWxsJztcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNtYWxsV2lkZ2V0U3RhdGVzW3dpZGdldEtleV0gPSBjdXJyZW50U3RhdGU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIHVwZGF0ZVZpZXcoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdXBkYXRlVmlldygpO1xuICAgIH1cblxuXG5cblxuICAgIGdldENvbXB1dGVkQ3NzVmFyKHZhck5hbWUpIHtcbiAgICAgICAgLy8gdGhpcy5jb250YWluZXJFbCBpcyB0aGUgcm9vdCBlbGVtZW50IG9mIHRoZSB2aWV3XG4gICAgICAgIHJldHVybiBnZXRDb21wdXRlZFN0eWxlKHRoaXMuY29udGFpbmVyRWwpLmdldFByb3BlcnR5VmFsdWUodmFyTmFtZSkudHJpbSgpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyBhIHNpbmdsZSwgZ2VuZXJhbGl6ZWQgaGVhdG1hcCB3aWRnZXQgZm9yIHRoZSBkYXNoYm9hcmQuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gcGFyZW50Q29udGFpbmVyIFRoZSBwYXJlbnQgZWxlbWVudCB0byBhcHBlbmQgdGhpcyB3aWRnZXQgdG8uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRpdGxlIFRoZSB0aXRsZSB0byBkaXNwbGF5IGZvciB0aGUgd2lkZ2V0LlxuICAgICAqIEBwYXJhbSB7TWFwPHN0cmluZywgVEZpbGVbXT59IGRhdGFNYXAgQSBtYXAgd2hlcmUga2V5cyBhcmUgJ1lZWVktTU0tREQnIHN0cmluZ3MgYW5kIHZhbHVlcyBhcmUgYXJyYXlzIG9mIGZpbGVzLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgc3RyaW5nW119IGNvbG9yU291cmNlIFRoZSBjb2xvcihzKSB0byB1c2UuIENhbiBiZSBhIHNpbmdsZSBjb2xvciBzdHJpbmcgb3IgYW4gYXJyYXkgb2YgNCBjb2xvciBzdHJpbmdzIGZvciBhIGdyYWRpZW50LlxuICAgICAqL1xuICAgIGFzeW5jIHBvcHVsYXRlU2luZ2xlSGVhdG1hcFdpZGdldCh3aWRnZXRDb250YWluZXIsIHRpdGxlLCBkYXRhTWFwLCBjb2xvclNvdXJjZSwgb3B0aW9ucyA9IHt9LCB3aWRnZXRLZXkpIHtcblxuICAgICAgICBpZiAoIXdpZGdldEtleSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkhlYXRtYXAgd2lkZ2V0IHJlbmRlcmVkIHdpdGhvdXQgYSB3aWRnZXRLZXk6XCIsIHRpdGxlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHdpZGdldENvbnRhaW5lci5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnN0IGlzQ29sbGFwc2VkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29sbGFwc2VkSGVhdG1hcHNbd2lkZ2V0S2V5XSA9PT0gdHJ1ZTtcbiAgICAgICAgaWYgKGlzQ29sbGFwc2VkKSB7XG4gICAgICAgICAgICB3aWRnZXRDb250YWluZXIuYWRkQ2xhc3MoJ2lzLWNvbGxhcHNlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHRvdGFsQ291bnQgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGZpbGVzIG9mIGRhdGFNYXAudmFsdWVzKCkpIHtcbiAgICAgICAgICAgIHRvdGFsQ291bnQgKz0gZmlsZXMubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaGVhZGVyID0gd2lkZ2V0Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3BtLXdpZGdldC1oZWFkZXInIH0pO1xuXG4gICAgICAgIC8vIDEuIENvbGxhcHNlIEljb25cbiAgICAgICAgY29uc3QgY29sbGFwc2VJY29uID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ2hlYXRtYXAtY29sbGFwc2UtaWNvbicgfSk7XG4gICAgICAgIHNldEljb24oY29sbGFwc2VJY29uLCAnY2hldnJvbi1kb3duJyk7XG5cbiAgICAgICAgLy8gMi4gQ2xpY2thYmxlIFRpdGxlXG4gICAgICAgIGNvbnN0IHRpdGxlRWwgPSBoZWFkZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiB0aXRsZSB9KTtcblxuICAgICAgICAvLyAzLiBUb3RhbCBDb3VudCAobW92ZXMgdG8gdGhlIGVuZClcbiAgICAgICAgY29uc3QgdG90YWxDb3VudEVsID0gaGVhZGVyLmNyZWF0ZURpdih7XG4gICAgICAgICAgICBjbHM6ICdoZWF0bWFwLXRvdGFsLWNvdW50JyxcbiAgICAgICAgICAgIHRleHQ6IHRvdGFsQ291bnQudG9TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgICAgLypoZWFkZXIuY3JlYXRlRGl2KHtcbiAgICAgICAgICAgIGNsczogJ2hlYXRtYXAtdG90YWwtY291bnQnLFxuICAgICAgICAgICAgdGV4dDogYCR7dG90YWxDb3VudH1gXG4gICAgICAgIH0pO1xuICAgICAgICAqL1xuXG4gICAgICAgIGxldCBsaW5rUGF0aCA9ICcnO1xuICAgICAgICAvLyBDaGVjayBpZiBpdCdzIGEgY3VzdG9tIGhlYXRtYXBcbiAgICAgICAgaWYgKHdpZGdldEtleS5zdGFydHNXaXRoKCdjdXN0b20tJykpIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQod2lkZ2V0S2V5LnNwbGl0KCctJylbMV0sIDEwKTtcbiAgICAgICAgICAgIGlmICghaXNOYU4oaW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgbGlua1BhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21IZWF0bWFwc1tpbmRleF0/LmxpbmtQYXRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCBpdCdzIGEgYnVpbHQtaW4gaGVhdG1hcFxuICAgICAgICAgICAgbGlua1BhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oZWF0bWFwTGlua0NvbmZpZ1t3aWRnZXRLZXldO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAobGlua1BhdGgpIHtcbiAgICAgICAgICAgIHRvdGFsQ291bnRFbC5hZGRDbGFzcygnaXMtY2xpY2thYmxlJyk7XG4gICAgICAgICAgICB0b3RhbENvdW50RWwuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgYE9wZW4gbm90ZTogJHtsaW5rUGF0aH1gKTtcblxuICAgICAgICAgICAgdG90YWxDb3VudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGxpbmtQYXRoKTtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSAmJiBmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3BlbkluTmV3ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGVhdG1hcFRvdGFsQ2xpY2tPcGVuQWN0aW9uID09PSAnbmV3LXRhYic7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihldmVudC5zaGlmdEtleSB8fCBvcGVuSW5OZXcpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYE5vdGUgbm90IGZvdW5kOiAke2xpbmtQYXRofWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaGVhdG1hcENvbnRhaW5lciA9IHdpZGdldENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdoZWF0bWFwLWNvbnRhaW5lcicgfSk7XG5cbiAgICAgICAgLy8gVG9nZ2xlIGNvbGxhcHNlIHN0YXRlXG4gICAgICAgIGNvbGxhcHNlSWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRseUNvbGxhcHNlZCA9IHdpZGdldENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdpcy1jb2xsYXBzZWQnKTtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbGxhcHNlZEhlYXRtYXBzW3dpZGdldEtleV0gPSBjdXJyZW50bHlDb2xsYXBzZWQ7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIGlmICghY3VycmVudGx5Q29sbGFwc2VkKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvZGF5Q2VsbCA9IGhlYXRtYXBDb250YWluZXIucXVlcnlTZWxlY3RvcignLmhlYXRtYXAtdG9kYXktY2VsbCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9kYXlDZWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzY3JvbGxQb3MgPSB0b2RheUNlbGwub2Zmc2V0TGVmdCAtIChoZWF0bWFwQ29udGFpbmVyLm9mZnNldFdpZHRoIC8gMikgKyAodG9kYXlDZWxsLm9mZnNldFdpZHRoIC8gMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWF0bWFwQ29udGFpbmVyLnNjcm9sbExlZnQgPSBzY3JvbGxQb3M7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNjcm9sbCB0byB0b2RheVxuICAgICAgICB0aXRsZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9kYXlDZWxsID0gaGVhdG1hcENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuaGVhdG1hcC10b2RheS1jZWxsJyk7XG4gICAgICAgICAgICBpZiAodG9kYXlDZWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2Nyb2xsUG9zID0gdG9kYXlDZWxsLm9mZnNldExlZnQgLSAoaGVhdG1hcENvbnRhaW5lci5vZmZzZXRXaWR0aCAvIDIpICsgKHRvZGF5Q2VsbC5vZmZzZXRXaWR0aCAvIDIpO1xuICAgICAgICAgICAgICAgIGhlYXRtYXBDb250YWluZXIuc2Nyb2xsTGVmdCA9IHNjcm9sbFBvcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgZGF5TGFiZWxzQ29udGFpbmVyID0gaGVhdG1hcENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdoZWF0bWFwLWRheS1sYWJlbHMnIH0pO1xuICAgICAgICBjb25zdCBncmlkID0gaGVhdG1hcENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdoZWF0bWFwLWdyaWQnIH0pO1xuICAgICAgICBjb25zdCB0b2RheSA9IG1vbWVudCgpO1xuICAgICAgICBjb25zdCB3ZWVrU3RhcnRzT25Nb25kYXkgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrU3RhcnREYXkgPT09ICdtb25kYXknO1xuXG4gICAgICAgIGNvbnN0IGRheUxhYmVscyA9IHdlZWtTdGFydHNPbk1vbmRheSA/IFsnTScsICdUJywgJ1cnLCAnVCcsICdGJywgJ1MnLCAnUyddIDogWydTJywgJ00nLCAnVCcsICdXJywgJ1QnLCAnRicsICdTJ107XG4gICAgICAgIGNvbnN0IHRvZGF5RGF5SW5kZXggPSB3ZWVrU3RhcnRzT25Nb25kYXkgPyAodG9kYXkuZGF5KCkgKyA2KSAlIDcgOiB0b2RheS5kYXkoKTtcblxuICAgICAgICBkYXlMYWJlbHMuZm9yRWFjaCgoZGF5LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkYXlMYWJlbHNDb250YWluZXIuY3JlYXRlU3Bhbih7IHRleHQ6IGRheSB9KTtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gdG9kYXlEYXlJbmRleCkge1xuICAgICAgICAgICAgICAgIGxhYmVsLmFkZENsYXNzKCdoZWF0bWFwLXRvZGF5LWxhYmVsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGVuZERhdGUgPSBvcHRpb25zLmVuZERhdGUgfHwgdG9kYXkuY2xvbmUoKS5lbmRPZignbW9udGgnKTtcbiAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gb3B0aW9ucy5zdGFydERhdGUgfHwgdG9kYXkuY2xvbmUoKS5zdWJ0cmFjdCgxMSwgJ21vbnRocycpLnN0YXJ0T2YoJ21vbnRoJyk7XG4gICAgICAgIGNvbnN0IHN0YXJ0RGF5T2ZXZWVrID0gc3RhcnREYXRlLmRheSgpO1xuICAgICAgICBjb25zdCB3ZWVrU3RhcnRPZmZzZXQgPSB3ZWVrU3RhcnRzT25Nb25kYXkgPyAoc3RhcnREYXlPZldlZWsgPT09IDAgPyAtNiA6IDEgLSBzdGFydERheU9mV2VlaykgOiAtc3RhcnREYXlPZldlZWs7XG5cbiAgICAgICAgc3RhcnREYXRlLmFkZCh3ZWVrU3RhcnRPZmZzZXQsICdkYXlzJyk7XG5cbiAgICAgICAgbGV0IGN1cnJlbnREYXkgPSBzdGFydERhdGUuY2xvbmUoKTtcbiAgICAgICAgbGV0IGNvbEluZGV4ID0gMTtcbiAgICAgICAgY29uc3Qgc2Vlbk1vbnRocyA9IG5ldyBTZXQoKTtcbiAgICAgICAgbGV0IGxhc3RMYWJlbENvbHVtbiA9IDA7XG5cbiAgICAgICAgd2hpbGUgKGN1cnJlbnREYXkuaXNTYW1lT3JCZWZvcmUoZW5kRGF0ZSwgJ2RheScpKSB7XG4gICAgICAgICAgICBjb25zdCBkYXlPZldlZWsgPSB3ZWVrU3RhcnRzT25Nb25kYXkgPyAoY3VycmVudERheS53ZWVrZGF5KCkgKyA2KSAlIDcgOiBjdXJyZW50RGF5LndlZWtkYXkoKTtcbiAgICAgICAgICAgIGNvbnN0IGNlbGxEYXRlID0gY3VycmVudERheS5jbG9uZSgpO1xuXG4gICAgICAgICAgICBjb25zdCBtYXBLZXkgPSBgJHtjZWxsRGF0ZS55ZWFyKCl9LSR7Y2VsbERhdGUubW9udGgoKX1gO1xuICAgICAgICAgICAgaWYgKCFzZWVuTW9udGhzLmhhcyhtYXBLZXkpKSB7XG4gICAgICAgICAgICAgICAgc2Vlbk1vbnRocy5hZGQobWFwS2V5KTtcbiAgICAgICAgICAgICAgICBpZiAoY2VsbERhdGUuZGF0ZSgpIDwgNykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbGFiZWxDb2wgPSBjb2xJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhYmVsQ29sIDw9IGxhc3RMYWJlbENvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxDb2wgPSBsYXN0TGFiZWxDb2x1bW4gKyAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vbnRoTGFiZWwgPSBncmlkLmNyZWF0ZURpdih7IGNsczogJ2hlYXRtYXAtbW9udGgtbGFiZWwnLCB0ZXh0OiBjZWxsRGF0ZS5mb3JtYXQoJ01NTScpIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbERhdGUuaXNTYW1lKHRvZGF5LCAnbW9udGgnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbC5hZGRDbGFzcygnaGVhdG1hcC1jdXJyZW50LW1vbnRoLWxhYmVsJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbC5zdHlsZS5ncmlkUm93ID0gJzEnO1xuICAgICAgICAgICAgICAgICAgICBtb250aExhYmVsLnN0eWxlLmdyaWRDb2x1bW4gPSBgJHtsYWJlbENvbH1gO1xuICAgICAgICAgICAgICAgICAgICBsYXN0TGFiZWxDb2x1bW4gPSBsYWJlbENvbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBncmlkLmNyZWF0ZURpdih7IGNsczogJ2hlYXRtYXAtY2VsbCcgfSk7XG4gICAgICAgICAgICBjb25zdCB3ZWVrVHlwZSA9IHdlZWtTdGFydHNPbk1vbmRheSA/ICdpc29XZWVrJyA6ICd3ZWVrJztcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0T2ZUaGlzV2VlayA9IHRvZGF5LmNsb25lKCkuc3RhcnRPZih3ZWVrVHlwZSk7XG4gICAgICAgICAgICBjb25zdCBlbmRPZlRoaXNXZWVrID0gdG9kYXkuY2xvbmUoKS5lbmRPZih3ZWVrVHlwZSk7XG5cbiAgICAgICAgICAgIGlmIChjZWxsRGF0ZS5pc0JldHdlZW4oc3RhcnRPZlRoaXNXZWVrLCBlbmRPZlRoaXNXZWVrLCAnZGF5JywgJ1tdJykpIHtcbiAgICAgICAgICAgICAgICBjZWxsLmFkZENsYXNzKCdoZWF0bWFwLWN1cnJlbnQtd2Vlay1jZWxsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2VsbERhdGUuaXNTYW1lKHRvZGF5LCAnZGF5JykpIHtcbiAgICAgICAgICAgICAgICBjZWxsLmFkZENsYXNzKCdoZWF0bWFwLXRvZGF5LWNlbGwnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2VsbC5zdHlsZS5ncmlkQ29sdW1uID0gYCR7Y29sSW5kZXh9YDtcbiAgICAgICAgICAgIGNlbGwuc3R5bGUuZ3JpZFJvdyA9IGAke2RheU9mV2VlayArIDJ9YDtcblxuICAgICAgICAgICAgY29uc3QgZGF0ZUtleSA9IGNlbGxEYXRlLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuICAgICAgICAgICAgY29uc3QgZmlsZXNPbkRheSA9IGRhdGFNYXAuZ2V0KGRhdGVLZXkpO1xuICAgICAgICAgICAgY29uc3QgY291bnQgPSBmaWxlc09uRGF5ID8gZmlsZXNPbkRheS5sZW5ndGggOiAwO1xuXG4gICAgICAgICAgICBpZiAoY291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNvdW50Rm9yQ29sb3IgPSBjb3VudDsgLy8gRGVmYXVsdCB0byB0b3RhbCBjb3VudFxuICAgICAgICAgICAgICAgIGxldCBjb2xvckdyYWRpZW50ID0gY29sb3JTb3VyY2U7IC8vIERlZmF1bHQgdG8gcHJvdmlkZWQgZ3JhZGllbnRcblxuICAgICAgICAgICAgICAgIC8vIC0tLSBVTklWRVJTQUwgRklYIC0tLVxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgdGhlIHNwZWNpYWwgb3ZlcmR1ZS91cGNvbWluZyB3aWRnZXRcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vdmVyZHVlTWFwICYmIG9wdGlvbnMudXBjb21pbmdNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3ZlcmR1ZVRhc2tzT25EYXkgPSBvcHRpb25zLm92ZXJkdWVNYXAuZ2V0KGRhdGVLZXkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3ZlcmR1ZVRhc2tzT25EYXkgJiYgb3ZlcmR1ZVRhc2tzT25EYXkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRGb3JDb2xvciA9IG92ZXJkdWVUYXNrc09uRGF5Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yR3JhZGllbnQgPSBvcHRpb25zLm92ZXJkdWVHcmFkaWVudDsgLy8gVXNlIHJlZCBncmFkaWVudFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBjb21pbmdUYXNrc09uRGF5ID0gb3B0aW9ucy51cGNvbWluZ01hcC5nZXQoZGF0ZUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudEZvckNvbG9yID0gdXBjb21pbmdUYXNrc09uRGF5ID8gdXBjb21pbmdUYXNrc09uRGF5Lmxlbmd0aCA6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIGRlZmF1bHQgYmx1ZSBncmFkaWVudFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEZvciBhbGwgb3RoZXIgaGVhdG1hcHMgKGxpa2UgVGFzayBDb21wbGV0aW9uKSwgY291bnRGb3JDb2xvciBpcyBhbHJlYWR5IHNldCB0byBgY291bnRgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGNvdW50Rm9yQ29sb3IgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbENvbG9yID0gJ3RyYW5zcGFyZW50JztcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29sb3JHcmFkaWVudCkgJiYgY29sb3JHcmFkaWVudC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGV2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY291bnRGb3JDb2xvciA+PSAxMCkgbGV2ZWwgPSA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY291bnRGb3JDb2xvciA+PSA2KSBsZXZlbCA9IDM7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjb3VudEZvckNvbG9yID49IDMpIGxldmVsID0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgbGV2ZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxDb2xvciA9IGNvbG9yR3JhZGllbnRbbGV2ZWwgLSAxXSB8fCBjb2xvckdyYWRpZW50W2NvbG9yR3JhZGllbnQubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZC1jb2xvcicsIGZpbmFsQ29sb3IsICdpbXBvcnRhbnQnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjZWxsLmFkZENsYXNzKCdpcy1pbnRlcmFjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUG9wdXBMb2NrZWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVGaWxlUG9wdXAoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ob3ZlclRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zT25EYXkgPSBkYXRhTWFwLmdldChkYXRlS2V5KSB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtc09uRGF5Lmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBvcHVwRGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1zT25EYXlbMF0udGV4dCAhPT0gdW5kZWZpbmVkICYmIGl0ZW1zT25EYXlbMF0ubGluZU51bWJlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIFRBU0sgaGVhdG1hcC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cERhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tzOiBpdGVtc09uRGF5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIEZJTEUgaGVhdG1hcC4gV2UgbmVlZCB0byBjb3JyZWN0bHkgY2F0ZWdvcml6ZSB0aGUgZmlsZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGFpbHlOb3RlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNyZWF0ZWROb3RlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFzc2V0cyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXNPbkRheS5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0RhaWx5Tm90ZShmaWxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFpbHlOb3Rlcy5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGUucGF0aCAmJiBmaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLm1kJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEl0J3MgYSByZWd1bGFyIG1hcmtkb3duIG5vdGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkTm90ZXMucHVzaChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEl0J3Mgbm90IGEgbWFya2Rvd24gZmlsZSwgc28gaXQgbXVzdCBiZSBhbiBhc3NldC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0cy5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb25zdHJ1Y3QgdGhlIGRhdGEgb2JqZWN0IHdpdGggdGhlIGNvcnJlY3QgY2F0ZWdvcmllcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cERhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhaWx5OiBkYWlseU5vdGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkOiBjcmVhdGVkTm90ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0czogYXNzZXRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RmlsZVBvcHVwKGNlbGwsIHBvcHVwRGF0YSwgY2VsbERhdGUudG9EYXRlKCkpO1xuICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vdGhlck5vdGVIb3ZlckRlbGF5KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaG92ZXJUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlRmlsZVBvcHVwKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcHVwSGlkZURlbGF5KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRheU9mV2VlayA9PT0gNikge1xuICAgICAgICAgICAgICAgIGNvbEluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50RGF5LmFkZCgxLCAnZGF5Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRvZGF5Q2VsbCA9IGdyaWQucXVlcnlTZWxlY3RvcignLmhlYXRtYXAtdG9kYXktY2VsbCcpO1xuICAgICAgICAgICAgaWYgKHRvZGF5Q2VsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNjcm9sbFBvcyA9IHRvZGF5Q2VsbC5vZmZzZXRMZWZ0IC0gKGhlYXRtYXBDb250YWluZXIub2Zmc2V0V2lkdGggLyAyKSArICh0b2RheUNlbGwub2Zmc2V0V2lkdGggLyAyKTtcbiAgICAgICAgICAgICAgICBoZWF0bWFwQ29udGFpbmVyLnNjcm9sbExlZnQgPSBzY3JvbGxQb3M7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGhlYXRtYXBDb250YWluZXIuc2Nyb2xsTGVmdCA9IGhlYXRtYXBDb250YWluZXIuc2Nyb2xsV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDEwMCk7XG4gICAgfVxuXG5cblxuICAgIHNldHVwUmVvcmRlck1vZGUoKSB7XG4gICAgICAgIGNvbnN0IGlzTWFjID0gUGxhdGZvcm0uaXNNYWNPUztcbiAgICAgICAgY29uc3QgbW9kaWZpZXJLZXlOYW1lID0gaXNNYWMgPyBcIk9wdGlvblwiIDogXCJDdHJsXCI7XG5cbiAgICAgICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChlKSA9PiB7XG4gICAgICAgICAgICAvLyBVc2UgQWx0IGtleSAoT3B0aW9uIG9uIE1hYykgb3IgQ3RybCBrZXkgKENvbnRyb2wgb24gV2luZG93cylcbiAgICAgICAgICAgIGNvbnN0IGlzTW9kaWZpZXJQcmVzc2VkID0gaXNNYWMgPyBlLmFsdEtleSA6IGUuY3RybEtleTtcblxuICAgICAgICAgICAgLy8gT25seSBhY3RpdmF0ZSBpZiB3ZSdyZSBpbiBwaW5uZWQgbm90ZXMgdmlldyBBTkQgY3VzdG9tIHNvcnQgaXMgc2VsZWN0ZWRcbiAgICAgICAgICAgIGlmIChpc01vZGlmaWVyUHJlc3NlZCAmJiAhdGhpcy5pc1Jlb3JkZXJNb2RlQWN0aXZlICYmIHRoaXMubm90ZXNWaWV3TW9kZSA9PT0gJ3Bpbm5lZCcgJiYgdGhpcy5waW5uZWRTb3J0T3JkZXIgPT09ICdjdXN0b20nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1Jlb3JkZXJNb2RlQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVsYXRlTm90ZXMoKTsgLy8gUmUtcmVuZGVyIHRvIHNob3cgaGFuZGxlc1xuICAgICAgICAgICAgICAgIC8vbmV3IE5vdGljZShgUmVvcmRlciBtb2RlIGFjdGl2ZTogSG9sZCAke21vZGlmaWVyS2V5TmFtZX0gYW5kIGRyYWcgdG8gcmVhcnJhbmdlLmApO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc01vZGlmaWVyUHJlc3NlZCAmJiB0aGlzLm5vdGVzVmlld01vZGUgPT09ICdwaW5uZWQnICYmIHRoaXMucGlubmVkU29ydE9yZGVyICE9PSAnY3VzdG9tJykge1xuICAgICAgICAgICAgICAgIC8vIFNob3cgYSBtZXNzYWdlIGlmIHRoZSB1c2VyIHRyaWVzIHRvIGFjdGl2YXRlIHJlb3JkZXIgbW9kZSB3aGVuIG5vdCBpbiBjdXN0b20gc29ydFxuICAgICAgICAgICAgICAgIC8vbmV3IE5vdGljZSgnU3dpdGNoIHRvIFwiQ3VzdG9tXCIgc29ydCBvcmRlciB0byBlbmFibGUgZHJhZy1hbmQtZHJvcCByZW9yZGVyaW5nLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZUtleVVwID0gKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHdhc01vZGlmaWVyUmVsZWFzZWQgPSBpc01hYyA/ICFlLmFsdEtleSA6ICFlLmN0cmxLZXk7XG5cbiAgICAgICAgICAgIGlmICh3YXNNb2RpZmllclJlbGVhc2VkICYmIHRoaXMuaXNSZW9yZGVyTW9kZUFjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNSZW9yZGVyTW9kZUFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdWxhdGVOb3RlcygpOyBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBSZWdpc3RlciB0aGUgbGlzdGVuZXJzIHVzaW5nIE9ic2lkaWFuJ3MgQVBJIGZvciBwcm9wZXIgY2xlYW51cFxuICAgICAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2tleXVwJywgaGFuZGxlS2V5VXApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICogTmF2aWdhdGVzIHRoZSBjYWxlbmRhciB0byB0aGUgY3VycmVudCBtb250aCB3aXRoIGEgc21vb3RoIHNjcm9sbCBhbmltYXRpb25cbiAgICAqIGluIHRoZSB2ZXJ0aWNhbCB2aWV3LiBJdCBmb3JjZXMgYSByZS1yZW5kZXIgdG8gZW5zdXJlIHRoZSB0YXJnZXQgZWxlbWVudFxuICAgICogZXhpc3RzIGJlZm9yZSBzY3JvbGxpbmcuXG4gICAgKi9cbiAgICBhc3luYyBnb1RvQ3VycmVudE1vbnRoKCkge1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCBjdXJyZW50TW9udGhJZCA9IGBtb250aC0ke25vdy5nZXRGdWxsWWVhcigpfS0ke25vdy5nZXRNb250aCgpfWA7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRNb250aEVsID0gdGhpcy52ZXJ0aWNhbFNjcm9sbGVyRWw/LnF1ZXJ5U2VsZWN0b3IoYCMke2N1cnJlbnRNb250aElkfWApO1xuXG4gICAgICAgIGlmICh0aGlzLmlzVmVydGljYWxWaWV3KSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgY3VycmVudCBtb250aCBpcyB2aXNpYmxlIGluIHRoZSB2aWV3cG9ydC5cbiAgICAgICAgICAgIGNvbnN0IGlzQ3VycmVudE1vbnRoVmlzaWJsZSA9IHRoaXMuaXNFbGVtZW50SW5WaWV3cG9ydChjdXJyZW50TW9udGhFbCk7XG5cbiAgICAgICAgICAgIGlmIChpc0N1cnJlbnRNb250aFZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB2aXNpYmxlLCBUT0dHTEUgcG9wdXAgbG9jay4gVGhpcyBpcyB0aGUgT05MWSBhY3Rpb24uXG4gICAgICAgICAgICAgICAgdGhpcy5pc1BvcHVwTG9ja2VkID0gIXRoaXMuaXNQb3B1cExvY2tlZDtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZGF5QnRuLmNsYXNzTGlzdC50b2dnbGUoJ3BvcHVwLWxvY2tlZCcsIHRoaXMuaXNQb3B1cExvY2tlZCk7XG4gICAgICAgICAgICAgICAgLy9uZXcgTm90aWNlKGBDYWxlbmRhciBwb3B1cHMgJHt0aGlzLmlzUG9wdXBMb2NrZWQgPyAnZGlzYWJsZWQnIDogJ3JlLWVuYWJsZWQnfS5gKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRvZGF5QnRuQXJpYUxhYmVsKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIElmIE5PVCB2aXNpYmxlLCBOQVZJR0FURS4gVGhpcyBpcyB0aGUgT05MWSBhY3Rpb24uXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNb250aEVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRNb250aEVsLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayBmb3IgdmVyeSBkaXN0YW50IG1vbnRoczogcmUtcmVuZGVyIGFuZCB0aGVuIHNjcm9sbC5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5ZWRNb250aCA9IG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCBub3cuZ2V0TW9udGgoKSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvcHVwU3RhdGUgPSB0aGlzLmlzUG9wdXBMb2NrZWQ7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyKCk7IC8vIFJlLXJlbmRlciB0byBicmluZyB0aGUgbW9udGggaW50byB0aGUgRE9NXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQb3B1cExvY2tlZCA9IHBvcHVwU3RhdGU7IC8vIFJlc3RvcmUgc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2RheUJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdwb3B1cC1sb2NrZWQnLCB0aGlzLmlzUG9wdXBMb2NrZWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRvZGF5QnRuQXJpYUxhYmVsKCk7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Q3VycmVudE1vbnRoRWwgPSB0aGlzLnZlcnRpY2FsU2Nyb2xsZXJFbD8ucXVlcnlTZWxlY3RvcihgIyR7Y3VycmVudE1vbnRoSWR9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3Q3VycmVudE1vbnRoRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDdXJyZW50TW9udGhFbC5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSG9yaXpvbnRhbCB2aWV3IGxvZ2ljIHJlbWFpbnMgdW5jaGFuZ2VkLlxuICAgICAgICAgICAgY29uc3QgaXNBbHJlYWR5Q3VycmVudE1vbnRoID0gbW9tZW50KHRoaXMuZGlzcGxheWVkTW9udGgpLmlzU2FtZShub3csICdtb250aCcpO1xuICAgICAgICAgICAgaWYgKGlzQWxyZWFkeUN1cnJlbnRNb250aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNQb3B1cExvY2tlZCA9ICF0aGlzLmlzUG9wdXBMb2NrZWQ7XG4gICAgICAgICAgICAgICAgdGhpcy50b2RheUJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdwb3B1cC1sb2NrZWQnLCB0aGlzLmlzUG9wdXBMb2NrZWQpO1xuICAgICAgICAgICAgICAgIC8vbmV3IE5vdGljZShgQ2FsZW5kYXIgcG9wdXBzICR7dGhpcy5pc1BvcHVwTG9ja2VkID8gJ2Rpc2FibGVkJyA6ICdyZS1lbmFibGVkJ30uYCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUb2RheUJ0bkFyaWFMYWJlbCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNoYW5nZU1vbnRoKDAsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwbGllcyBmb250IHNpemUgc2V0dGluZ3MgYXMgQ1NTIHZhcmlhYmxlcyB0byB0aGUgdmlldydzIHJvb3QgZWxlbWVudCxcbiAgICAgKiBhbGxvd2luZyBhbGwgQ1NTIHJ1bGVzIHRvIHVwZGF0ZSBkeW5hbWljYWxseS5cbiAgICAgKi9cbiAgICBhcHBseUZvbnRTZXR0aW5ncygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lckVsKSByZXR1cm47XG5cbiAgICAgICAgLy8gR2V0IHZhbHVlcyBmcm9tIHNldHRpbmdzLCBwcm92aWRpbmcgZGVmYXVsdCBmYWxsYmFja3MuXG4gICAgICAgIGNvbnN0IGxhYmVsRm9udFNpemUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb250U2l6ZSB8fCAnMTJweCc7XG4gICAgICAgIGNvbnN0IGRheU51bWJlckZvbnRTaXplID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGF5TnVtYmVyRm9udFNpemUgfHwgJzE1cHgnO1xuXG4gICAgICAgIC8vIFNldCB0aGUgQ1NTIHZhcmlhYmxlcyBvbiB0aGUgbWFpbiBjb250YWluZXIgZWxlbWVudCBmb3IgdGhpcyB2aWV3LlxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGVuZGFyLWxhYmVsLWZvbnQtc2l6ZScsIGxhYmVsRm9udFNpemUpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGVuZGFyLWRheS1udW1iZXItZm9udC1zaXplJywgZGF5TnVtYmVyRm9udFNpemUpO1xuICAgIH1cblxuICAgIGFzeW5jIGhhbmRsZUZpbGVDbGljayhmaWxlLCBldmVudCwgbmF2U3RhdGUgPSB7fSkge1xuICAgICAgICBpZiAoIWZpbGUpIHJldHVybjtcblxuICAgICAgICAvLyBUaGlzIGxvZ2ljIGNvcnJlY3RseSBkZXRlcm1pbmVzIGlmIGEgbmV3IHRhYiBzaG91bGQgYmUgb3BlbmVkIGJhc2VkIG9uIHlvdXIgc2V0dGluZ3MuXG4gICAgICAgIGNvbnN0IGlzQXNzZXQgPSBmaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpICE9PSAnbWQnO1xuICAgICAgICBjb25zdCBvcGVuSW5OZXdUYWJTZXR0aW5nID0gaXNBc3NldFxuICAgICAgICAgICAgPyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hc3NldHNPcGVuQWN0aW9uID09PSAnbmV3LXRhYidcbiAgICAgICAgICAgIDogdGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZXNPcGVuQWN0aW9uID09PSAnbmV3LXRhYic7XG5cbiAgICAgICAgY29uc3QgZm9yY2VOZXdMZWFmID0gZXZlbnQuc2hpZnRLZXkgfHwgb3BlbkluTmV3VGFiU2V0dGluZztcblxuICAgICAgICAvLyAtLS0gRklYICMxOiBQcm92aWRlIHRoZSBjb3JyZWN0IHNvdXJjZSBwYXRoIC0tLVxuICAgICAgICAvLyBUaGUgc291cmNlUGF0aCBNVVNUIGJlIHRoZSBwYXRoIG9mIHRoZSBmaWxlIGNvbnRhaW5pbmcgdGhlIGxpbmsuXG4gICAgICAgIGNvbnN0IHNvdXJjZVBhdGggPSBmaWxlLnBhdGg7XG5cbiAgICAgICAgLy8gLS0tIEZJWCAjMjogQ29uc3RydWN0IHRoZSBjb3JyZWN0bHkgc3RydWN0dXJlZCBuYXZpZ2F0aW9uIHN0YXRlIC0tLVxuICAgICAgICAvLyBUaGUgQVBJIHJlcXVpcmVzIHRoZSBsaW5lIG51bWJlciB0byBiZSBpbnNpZGUgYW4gJ2VTdGF0ZScgb2JqZWN0LlxuICAgICAgICBjb25zdCBvcGVuVmlld1N0YXRlID0ge307XG4gICAgICAgIGlmIChuYXZTdGF0ZSAmJiBuYXZTdGF0ZS5saW5lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG9wZW5WaWV3U3RhdGUuZVN0YXRlID0ge1xuICAgICAgICAgICAgICAgIGxpbmU6IG5hdlN0YXRlLmxpbmUsXG4gICAgICAgICAgICAgICAgLy8gJ2FjdGl2ZTogdHJ1ZScgZW5zdXJlcyB0aGUgbmV3IHBhbmUgaXMgZm9jdXNlZCwgd2hpY2ggaXNcbiAgICAgICAgICAgICAgICAvLyBuZWNlc3NhcnkgZm9yIHNjcm9sbGluZyBhbmQgaGlnaGxpZ2h0aW5nIHRvIG9jY3VyLlxuICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGlzIEFQSSBjYWxsIG5vdyBoYXMgdGhlIGNvcnJlY3Qgc291cmNlIHBhdGggYW5kIHRoZSBjb3JyZWN0IHN0YXRlIHN0cnVjdHVyZS5cbiAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChcbiAgICAgICAgICAgIGZpbGUucGF0aCxcbiAgICAgICAgICAgIHNvdXJjZVBhdGgsXG4gICAgICAgICAgICBmb3JjZU5ld0xlYWYsXG4gICAgICAgICAgICBvcGVuVmlld1N0YXRlXG4gICAgICAgICk7XG4gICAgfVxuXG5cblxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyBhIHNpbmdsZSBub3RlIGl0ZW0gcm93IGluIGEgZ2l2ZW4gY29udGFpbmVyLlxuICAgICAqIEBwYXJhbSB7VEZpbGV9IGZpbGUgVGhlIG5vdGUgZmlsZSB0byByZW5kZXIuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIFRoZSBwYXJlbnQgZWxlbWVudCB0byBhcHBlbmQgdGhlIHJvdyB0by5cbiAgICAgKi9cbiAgICByZW5kZXJOb3RlSXRlbShmaWxlLCBjb250YWluZXIpIHtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcbiAgICAgICAgY29uc3Qgc2VhcmNoSW5wdXRFbCA9IHRoaXMubm90ZXNTZWFyY2hJbnB1dEVsO1xuXG4gICAgICAgIGNvbnN0IHJvdyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLXJvdycgfSk7XG4gICAgICAgIHJvdy5kYXRhc2V0LmZpbGVQYXRoID0gZmlsZS5wYXRoO1xuXG4gICAgICAgIC8vIC0tLSBNb3VzZWRvd24gZmxhZyBmb3IgYmV0dGVyIGRyYWctaG92ZXIgZGV0ZWN0aW9uIC0tLVxuICAgICAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc01vdXNlRG93biA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmhpZGVGaWxlUG9wdXAoKTsgLy8gSW1tZWRpYXRlbHkgaGlkZSBhbnkgdmlzaWJsZSBwb3B1cFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyAtLS0gRHJhZy1hbmQtRHJvcCBMb2dpYyBmb3IgUGlubmVkIE5vdGVzIChQcmVzZXJ2ZWQpIC0tLVxuICAgICAgICBjb25zdCBpc1Jlb3JkZXJhYmxlID0gdGhpcy5ub3Rlc1ZpZXdNb2RlID09PSAncGlubmVkJyAmJiB0aGlzLnBpbm5lZFNvcnRPcmRlciA9PT0gJ2N1c3RvbSc7XG5cbiAgICAgICAgaWYgKGlzUmVvcmRlcmFibGUgJiYgdGhpcy5pc1Jlb3JkZXJNb2RlQWN0aXZlKSB7XG4gICAgICAgICAgICByb3cuZHJhZ2dhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IGRyYWdIYW5kbGUgPSByb3cuY3JlYXRlRGl2KHsgY2xzOiAnZHJhZy1oYW5kbGUnIH0pO1xuICAgICAgICAgICAgc2V0SWNvbihkcmFnSGFuZGxlLCAnZ3JpcC12ZXJ0aWNhbCcpO1xuXG4gICAgICAgICAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzRHJhZ2dpbmdOb3RlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gJ21vdmUnO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcm93LmFkZENsYXNzKCdkcmFnZ2luZycpLCAwKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICByb3cucmVtb3ZlQ2xhc3MoJ2RyYWdnaW5nJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0RyYWdnaW5nTm90ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVBpbm5lZE9yZGVyKGNvbnRhaW5lcik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZHJhZ2dpbmcgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmRyYWdnaW5nJyk7XG4gICAgICAgICAgICAgICAgaWYgKGRyYWdnaW5nICYmIGRyYWdnaW5nICE9PSByb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHJvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNBZnRlciA9IGUuY2xpZW50WSA+IHJlY3QudG9wICsgcmVjdC5oZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgICAgICByb3cucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZHJhZ2dpbmcsIGlzQWZ0ZXIgPyByb3cubmV4dFNpYmxpbmcgOiByb3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcm93LmRyYWdnYWJsZSA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIEJ1aWxkIFJvdyBWaXN1YWwgQ29udGVudCAoUHJlc2VydmVkKSAtLS1cbiAgICAgICAgY29uc3QgdGl0bGVXcmFwcGVyID0gcm93LmNyZWF0ZURpdih7IGNsczogJ25vdGUtdGl0bGUtd3JhcHBlcicgfSk7XG5cbiAgICAgICAgaWYgKHNldHRpbmdzLnNob3dOb3RlU3RhdHVzRG90cykge1xuICAgICAgICAgICAgY29uc3QgZG90ID0gdGl0bGVXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogJ25vdGUtc3RhdHVzLWRvdCcgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0RhaWx5Tm90ZShmaWxlKSkge1xuICAgICAgICAgICAgICAgIGRvdC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBzZXR0aW5ncy5kYWlseU5vdGVEb3RDb2xvcjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc1dlZWtseU5vdGUoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICBkb3Quc3R5bGUuYmFja2dyb3VuZENvbG9yID0gc2V0dGluZ3Mud2Vla2x5Tm90ZURvdENvbG9yO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb3QuYWRkQ2xhc3MoaXNTYW1lRGF5KG5ldyBEYXRlKGZpbGUuc3RhdC5jdGltZSksIG5ldyBEYXRlKGZpbGUuc3RhdC5tdGltZSkpID8gJ25vdGUtc3RhdHVzLWRvdC1jcmVhdGVkJyA6ICdub3RlLXN0YXR1cy1kb3QtbW9kaWZpZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRpdGxlUGF0aFdyYXBwZXIgPSB0aXRsZVdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS10aXRsZS1wYXRoLXdyYXBwZXInIH0pO1xuICAgICAgICB0aXRsZVBhdGhXcmFwcGVyLmNyZWF0ZURpdih7IHRleHQ6IGZpbGUuYmFzZW5hbWUsIGNsczogJ25vdGUtdGl0bGUnIH0pO1xuICAgICAgICBpZiAoZmlsZS5wYXJlbnQgJiYgZmlsZS5wYXJlbnQucGF0aCAhPT0gJy8nKSB7XG4gICAgICAgICAgICB0aXRsZVBhdGhXcmFwcGVyLmNyZWF0ZURpdih7IHRleHQ6IGZpbGUucGFyZW50LnBhdGgsIGNsczogJ25vdGUtcGF0aCcgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByb3cuY3JlYXRlRGl2KHsgdGV4dDogZm9ybWF0RGF0ZShuZXcgRGF0ZShmaWxlLnN0YXQubXRpbWUpLCAnREQtTU0tWVlZWScpLCBjbHM6ICdub3RlLW1vZC1kYXRlJyB9KTtcblxuICAgICAgICAvLyAtLS0gQVBQTFkgVU5JRklFRCBFVkVOVCBIQU5ETEVSIC0tLVxuICAgICAgICAvLyBUaGlzIHNpbmdsZSBjYWxsIGNvcnJlY3RseSBoYW5kbGVzIHBvcHVwcyBhbmQgY2xpY2tzIGZvciBib3RoIGRlc2t0b3AgYW5kIG1vYmlsZSxcbiAgICAgICAgLy8gaW5jbHVkaW5nIHRoZSBzcGVjaWFsIGxvbmctcHJlc3MgYmVoYXZpb3IgZm9yIHJlb3JkZXJhYmxlIHBpbm5lZCBub3Rlcy5cbiAgICAgICAgdGhpcy5hcHBseVBvcHVwVHJpZ2dlcihyb3csIGZpbGUsICdub3RlJyk7XG5cbiAgICAgICAgLy8gLS0tIEtleWJvYXJkIE5hdmlnYXRpb24gLS0tXG4gICAgICAgIHRoaXMuYWRkS2V5ZG93bkxpc3RlbmVycyhyb3csIHNlYXJjaElucHV0RWwpO1xuXG4gICAgICAgIHJldHVybiByb3c7XG4gICAgfVxuXG5cbiAgICBhc3luYyBzYXZlUGlubmVkT3JkZXIoY29udGFpbmVyKSB7XG5cbiAgICAgICAgY29uc3Qgbm90ZVJvd3MgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLm5vdGUtcm93Jyk7XG4gICAgICAgIGNvbnN0IG5ld09yZGVyID0gQXJyYXkuZnJvbShub3RlUm93cykubWFwKHJvdyA9PiByb3cuZGF0YXNldC5maWxlUGF0aCk7XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSBzZXR0aW5ncyB3aXRoIHRoZSBuZXcgb3JkZXJcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucGlubmVkTm90ZXNDdXN0b21PcmRlciA9IG5ld09yZGVyO1xuXG4gICAgICAgIC8vIFNldCB0aGUgYWN0aXZlIHNvcnQgbW9kZSB0byAnY3VzdG9tJyBzaW5jZSBhIG1hbnVhbCBzb3J0IGp1c3QgaGFwcGVuZWRcbiAgICAgICAgdGhpcy5waW5uZWRTb3J0T3JkZXIgPSAnY3VzdG9tJztcblxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgICAvLyBSZWZyZXNoIHRoZSB2aWV3IHRvIGVuc3VyZSB0aGUgaGVhZGVyJ3Mgc29ydCBpbmRpY2F0b3IgaXMgdXBkYXRlZFxuICAgICAgICBhd2FpdCB0aGlzLnBvcHVsYXRlTm90ZXMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGb3JtYXRzIGEgbGlzdCBvZiBjYWxlbmRhciBldmVudHMgaW50byBhIG1hcmtkb3duIHN0cmluZyBmb3IgdGVtcGxhdGUgaW5zZXJ0aW9uLlxuICAgICAqIEBwYXJhbSB7LX0gZXZlbnRzIFxuICAgICAqIEByZXR1cm5zIFxuICAgICAqL1xuICAgIGZvcm1hdEV2ZW50c0ZvclRlbXBsYXRlKGV2ZW50cykge1xuICAgICAgICBpZiAoIWV2ZW50cyB8fCBldmVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldHJpZXZlIHRoZSB1c2VyLWRlZmluZWQgZm9ybWF0IGZyb20gc2V0dGluZ3NcbiAgICAgICAgY29uc3QgZm9ybWF0U3RyaW5nID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FsZW5kYXJFdmVudHNGb3JtYXQgfHwgJy0ge3tzdGFydFRpbWV9fSAtIHt7ZW5kVGltZX19OiB7e3N1bW1hcnl9fSc7XG5cbiAgICAgICAgLy8gU29ydCBldmVudHNcbiAgICAgICAgZXZlbnRzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGlmIChhLmlzQWxsRGF5ICYmICFiLmlzQWxsRGF5KSByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAoIWEuaXNBbGxEYXkgJiYgYi5pc0FsbERheSkgcmV0dXJuIDE7XG4gICAgICAgICAgICBpZiAoYS5pc0FsbERheSAmJiBiLmlzQWxsRGF5KSByZXR1cm4gYS5zdW1tYXJ5LmxvY2FsZUNvbXBhcmUoYi5zdW1tYXJ5KTtcbiAgICAgICAgICAgIGlmICghYS5zdGFydFRpbWUgfHwgIWIuc3RhcnRUaW1lKSByZXR1cm4gMDtcbiAgICAgICAgICAgIHJldHVybiBhLnN0YXJ0VGltZS5sb2NhbGVDb21wYXJlKGIuc3RhcnRUaW1lKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gTWFwIGVhY2ggZXZlbnQgdG8gaXRzIGZvcm1hdHRlZCBzdHJpbmdcbiAgICAgICAgY29uc3QgZXZlbnRTdHJpbmdzID0gZXZlbnRzLm1hcChldmVudCA9PiB7XG4gICAgICAgICAgICBsZXQgZmluYWxTdHJpbmc7XG5cbiAgICAgICAgICAgIGlmIChldmVudC5pc0FsbERheSkge1xuICAgICAgICAgICAgICAgIC8vIEZvciBhbGwtZGF5IGV2ZW50cywgcmVwbGFjZSB0aGUgdGltZSBwbGFjZWhvbGRlcnMgd2l0aCBcIkFsbC1kYXlcIlxuICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVnZXggbG9va3MgZm9yIHt7c3RhcnRUaW1lfX0sIG9wdGlvbmFsIHdoaXRlc3BhY2UsIGEgc2VwYXJhdG9yLCBvcHRpb25hbCB3aGl0ZXNwYWNlLCBhbmQge3tlbmRUaW1lfX1cbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lUGxhY2Vob2xkZXJSZWdleCA9IC97e1xccypzdGFydFRpbWVcXHMqfX0uKnt7XFxzKmVuZFRpbWVcXHMqfX0vO1xuXG4gICAgICAgICAgICAgICAgZmluYWxTdHJpbmcgPSBmb3JtYXRTdHJpbmcucmVwbGFjZSh0aW1lUGxhY2Vob2xkZXJSZWdleCwgJ0FsbC1kYXknKTtcblxuICAgICAgICAgICAgICAgIC8vIE5vdywgcmVwbGFjZSB0aGUgc3VtbWFyeSBhcyB1c3VhbFxuICAgICAgICAgICAgICAgIGZpbmFsU3RyaW5nID0gZmluYWxTdHJpbmcucmVwbGFjZSgve3tzdW1tYXJ5fX0vZywgZXZlbnQuc3VtbWFyeSB8fCAnJyk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRm9yIHRpbWVkIGV2ZW50cywgdXNlIHRoZSBvcmlnaW5hbCBsb2dpY1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IGV2ZW50LnN0YXJ0VGltZSB8fCAnJztcbiAgICAgICAgICAgICAgICBjb25zdCBlbmRUaW1lID0gZXZlbnQuZW5kVGltZSB8fCAnJztcblxuICAgICAgICAgICAgICAgIGZpbmFsU3RyaW5nID0gZm9ybWF0U3RyaW5nXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC97e3N0YXJ0VGltZX19L2csIHN0YXJ0VGltZSlcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL3t7ZW5kVGltZX19L2csIGVuZFRpbWUpXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC97e3N1bW1hcnl9fS9nLCBldmVudC5zdW1tYXJ5IHx8ICcnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVHJpbSBhbnkgbGVmdG92ZXIgd2hpdGVzcGFjZSBvciBkYW5nbGluZyBzZXBhcmF0b3JzXG4gICAgICAgICAgICByZXR1cm4gZmluYWxTdHJpbmcucmVwbGFjZSgvXFxzKjpcXHMqJC8sICcnKS5yZXBsYWNlKC9cXHMqLVxccyokLywgJycpLnRyaW0oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gSm9pbiB0aGUgYXJyYXkgb2YgZXZlbnQgc3RyaW5ncyB3aXRoIGEgZG91YmxlIG5ld2xpbmVcbiAgICAgICAgY29uc3QgZXZlbnRCb2R5ID0gZXZlbnRTdHJpbmdzLmpvaW4oJ1xcblxcbicpO1xuXG4gICAgICAgIC8vIENvbnN0cnVjdCB0aGUgZmluYWwgb3V0cHV0XG4gICAgICAgIHJldHVybiBldmVudEJvZHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2NoZWR1bGVzIGEgcmVmcmVzaCB0byBvY2N1ciBhdCB0aGUgbmV4dCBtaWRuaWdodC5cbiAgICAgKi9cbiAgICBzY2hlZHVsZURhaWx5UmVmcmVzaCgpIHtcbiAgICAgICAgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIHRpbWVyIHRvIGF2b2lkIGR1cGxpY2F0ZXNcbiAgICAgICAgaWYgKHRoaXMuZGFpbHlSZWZyZXNoVGltZW91dCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGFpbHlSZWZyZXNoVGltZW91dCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBub3cgPSBtb21lbnQoKTtcbiAgICAgICAgY29uc3QgZW5kT2ZEYXkgPSBtb21lbnQoKS5lbmRPZignZGF5Jyk7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBtaWxsaXNlY29uZHMgdW50aWwgdGhlIGVuZCBvZiB0b2RheSwgcGx1cyBvbmUgdG8gdGljayBvdmVyIHRvIHRoZSBuZXcgZGF5XG4gICAgICAgIGNvbnN0IG1zVW50aWxNaWRuaWdodCA9IGVuZE9mRGF5LmRpZmYobm93KSArIDE7XG5cbiAgICAgICAgdGhpcy5kYWlseVJlZnJlc2hUaW1lb3V0ID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG5cbiAgICAgICAgICAgIC8vIFJlLWNhbGN1bGF0ZSBhbGwgdGFzayBkdWUgZGF0ZXMgcmVsYXRpdmUgdG8gdGhlIG5ldyBcInRvZGF5XCJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYnVpbGRUYXNrc0J5RGF0ZU1hcCgpO1xuXG4gICAgICAgICAgICAvLyBSZS1yZW5kZXIgdGhlIGNhbGVuZGFyIHRvIHVwZGF0ZSBoZWF0bWFwcywgYmFkZ2VzLCBhbmQgdG9kYXkncyBoaWdobGlnaHRcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcblxuICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgaXMgY3VycmVudGx5IGxvb2tpbmcgYXQgdGhlIHRhc2tzIHRhYiwgcmVmcmVzaCBpdHMgdmlld1xuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlVGFiID09PSAndGFza3MnKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wb3B1bGF0ZVRhc2tzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElNUE9SVEFOVDogU2NoZWR1bGUgdGhlIG5leHQgcmVmcmVzaCBmb3IgdGhlIGZvbGxvd2luZyBkYXlcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVEYWlseVJlZnJlc2goKTtcblxuICAgICAgICB9LCBtc1VudGlsTWlkbmlnaHQpO1xuICAgIH1cbiAgICBcbiAgICBnZXRWaWV3VHlwZSgpIHsgcmV0dXJuIFZJRVdfVFlQRV9QRVJJT0Q7IH1cbiAgICBnZXREaXNwbGF5VGV4dCgpIHsgcmV0dXJuIFwi8J+ThSBDYWxlbmRhciBQZXJpb2QgV2VlayBOb3Rlc1wiOyB9XG4gICAgZ2V0SWNvbigpIHsgcmV0dXJuIFwiY2FsZW5kYXItY2hlY2tcIjsgfVxuXG4gICAgYXN5bmMgYnVpbGRXZWVrbHlOb3Rlc0NhY2hlKCkge1xuICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVdlZWtseU5vdGVzKSByZXR1cm47XG4gICAgICAgIHRoaXMuZXhpc3RpbmdXZWVrbHlOb3Rlcy5jbGVhcigpO1xuICAgICAgICBjb25zdCBmb2xkZXJQYXRoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla2x5Tm90ZUZvbGRlcjtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclBhdGgpO1xuICAgICAgICBpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZvbGRlci5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leGlzdGluZ1dlZWtseU5vdGVzLmFkZChmaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHJlZnJlc2hJY3NFdmVudHMoKSB7XG4gICAgICAgIGNvbnN0IHsgcmVxdWVzdFVybCwgTm90aWNlIH0gPSByZXF1aXJlKFwib2JzaWRpYW5cIik7XG5cbiAgICAgICAgaWYgKCFJQ0FMKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiaWNhbC5qcyBsaWJyYXJ5IG5vdCBidW5kbGVkIGNvcnJlY3RseS5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmljc0V2ZW50c0J5RGF0ZS5jbGVhcigpO1xuICAgICAgICB0aGlzLnByb2Nlc3NlZEV2ZW50U2lnbmF0dXJlcy5jbGVhcigpO1xuXG4gICAgICAgIGNvbnN0IGljc1VybCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmljc1VybDtcbiAgICAgICAgaWYgKCFpY3NVcmwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2FsZW5kYXJSZW5kZXJlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoeyB1cmw6IGljc1VybCB9KTtcbiAgICAgICAgICAgIGNvbnN0IGljYWxEYXRhID0gcmVzcG9uc2UudGV4dDtcbiAgICAgICAgICAgIGNvbnN0IGNhbGVuZGFyID0gbmV3IElDQUwuQ29tcG9uZW50KElDQUwucGFyc2UoaWNhbERhdGEpKTtcblxuICAgICAgICAgICAgY29uc3QgaWNhbEVuZERhdGUgPSBJQ0FMLlRpbWUuZnJvbUpTRGF0ZShtb21lbnQoKS5hZGQoMiwgJ3llYXJzJykudG9EYXRlKCkpO1xuICAgICAgICAgICAgY29uc3QgaWNhbFN0YXJ0RGF0ZSA9IElDQUwuVGltZS5mcm9tSlNEYXRlKG1vbWVudCgpLnN1YnRyYWN0KDEsICd5ZWFyJykudG9EYXRlKCkpO1xuXG4gICAgICAgICAgICBjb25zdCBldmVudHMgPSBjYWxlbmRhci5nZXRBbGxTdWJjb21wb25lbnRzKCd2ZXZlbnQnKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdmV2ZW50IG9mIGV2ZW50cykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IElDQUwuRXZlbnQodmV2ZW50KTtcblxuICAgICAgICAgICAgICAgIGlmICghZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnJlY3VycmVuY2VJZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBGSVg6IFBhc3MgJ2V2ZW50JyBhbmQgdGhlIGNvcnJlY3QgbnVtYmVyIG9mIGFyZ3VtZW50c1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFBhcnNlZEV2ZW50KGV2ZW50LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5pc1JlY3VycmluZygpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZXJhdG9yID0gZXZlbnQuaXRlcmF0b3IoKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5leHQ7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChuZXh0ID0gaXRlcmF0b3IubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dC5jb21wYXJlKGljYWxFbmREYXRlKSA+IDApIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQuY29tcGFyZShpY2FsU3RhcnREYXRlKSA8IDApIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvY2N1cnJlbmNlID0gZXZlbnQuZ2V0T2NjdXJyZW5jZURldGFpbHMobmV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFBhcnNlZEV2ZW50KG9jY3VycmVuY2UsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRklYOiBQYXNzICdldmVudCcgYW5kIHRoZSBjb3JyZWN0IG51bWJlciBvZiBhcmd1bWVudHNcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRQYXJzZWRFdmVudChldmVudCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0NhbGVuZGFyIFBlcmlvZCBXZWVrIE5vdGVzIC0gSUNTIGVycm9yOiAnICsgZXJyb3IubWVzc2FnZSwgMTAwMDApO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkEgZGV0YWlsZWQgSUNTIHBhcnNpbmcgZXJyb3Igb2NjdXJyZWQ6XCIsIGVycm9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmlzQ2FsZW5kYXJSZW5kZXJlZCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiAgQWRkcyBhIHBhcnNlZCBJQ0FMIGV2ZW50IG9jY3VycmVuY2UgdG8gdGhlIGV2ZW50cyBtYXAsIGhhbmRsaW5nIGRlLWR1cGxpY2F0aW9uLlxuICAgICAqICBUaGlzIG1ldGhvZCB1c2VzIGEgaHlicmlkIGFwcHJvYWNoIHRvIGRlLWR1cGxpY2F0aW9uOlxuICAgICAqICAtIEZvciByZWN1cnJpbmcgaW5zdGFuY2VzLCBpdCB1c2VzIGEgY29tYmluYXRpb24gb2YgVUlEIGFuZCByZWN1cnJlbmNlSWQuXG4gICAgICogIC0gRm9yIHNpbmdsZSBldmVudHMsIGl0IHVzZXMgYSBjb250ZW50LWJhc2VkIHNpZ25hdHVyZSAoc3VtbWFyeSwgc3RhcnQsIGVuZCkuICAgXG4gICAgICogXG4gICAgICogQHBhcmFtIHsqfSBvY2N1cnJlbmNlIFxuICAgICAqIEBwYXJhbSB7Kn0gaXNSZWN1cnJpbmdJbnN0YW5jZSBcbiAgICAgKiBAcmV0dXJucyBcbiAgICAgKi9cbiAgICBhZGRQYXJzZWRFdmVudChvY2N1cnJlbmNlLCBpc1JlY3VycmluZ0luc3RhbmNlKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBpc1JlY3VycmluZ0luc3RhbmNlID8gb2NjdXJyZW5jZS5pdGVtIDogb2NjdXJyZW5jZTtcblxuICAgICAgICBpZiAoIWl0ZW0pIHJldHVybjtcblxuICAgICAgICBpZiAoaXNSZWN1cnJpbmdJbnN0YW5jZSkge1xuICAgICAgICAgICAgLy8gRm9yIHJlY3VycmluZyBpbnN0YW5jZXMsIHRoZSBVSUQgaXMgdGhlIFVJRCBvZiB0aGUgcGFyZW50IGV2ZW50LCBhbmQgdGhlXG4gICAgICAgICAgICAvLyByZWN1cnJlbmNlSWQgbWFrZXMgaXQgdW5pcXVlLiBXZSBjcmVhdGUgYSBzaWduYXR1cmUgZnJvbSBib3RoLlxuICAgICAgICAgICAgY29uc3QgcmVjdXJyZW5jZVNpZ25hdHVyZSA9IGAke2l0ZW0udWlkfToke29jY3VycmVuY2UucmVjdXJyZW5jZUlkLnRvU3RyaW5nKCl9YDtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb2Nlc3NlZEV2ZW50U2lnbmF0dXJlcy5oYXMocmVjdXJyZW5jZVNpZ25hdHVyZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIFNraXAgZHVwbGljYXRlIHJlY3VycmluZyBpbnN0YW5jZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzZWRFdmVudFNpZ25hdHVyZXMuYWRkKHJlY3VycmVuY2VTaWduYXR1cmUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgc2luZ2xlRXZlbnRTaWduYXR1cmUgPSBgJHtpdGVtLnN1bW1hcnl9OiR7aXRlbS5zdGFydERhdGUudG9TdHJpbmcoKX06JHtpdGVtLmVuZERhdGUudG9TdHJpbmcoKX1gO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvY2Vzc2VkRXZlbnRTaWduYXR1cmVzLmhhcyhzaW5nbGVFdmVudFNpZ25hdHVyZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIFNraXAgZHVwbGljYXRlIHNpbmdsZSBldmVudFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzZWRFdmVudFNpZ25hdHVyZXMuYWRkKHNpbmdsZUV2ZW50U2lnbmF0dXJlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXJ0TW9tZW50ID0gbW9tZW50KG9jY3VycmVuY2Uuc3RhcnREYXRlID8gb2NjdXJyZW5jZS5zdGFydERhdGUudG9KU0RhdGUoKSA6IGl0ZW0uc3RhcnREYXRlLnRvSlNEYXRlKCkpO1xuICAgICAgICBjb25zdCBlbmRNb21lbnQgPSBtb21lbnQob2NjdXJyZW5jZS5lbmREYXRlID8gb2NjdXJyZW5jZS5lbmREYXRlLnRvSlNEYXRlKCkgOiBpdGVtLmVuZERhdGUudG9KU0RhdGUoKSk7XG5cbiAgICAgICAgY29uc3QgaXNBbGxEYXkgPSBpdGVtLnN0YXJ0RGF0ZS5pc0RhdGU7XG4gICAgICAgIGlmIChpc0FsbERheSkge1xuICAgICAgICAgICAgZW5kTW9tZW50LnN1YnRyYWN0KDEsICdzZWNvbmQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGV2ZW50RGF0YSA9IHtcbiAgICAgICAgICAgIHVpZDogaXRlbS51aWQsXG4gICAgICAgICAgICBzdW1tYXJ5OiBpdGVtLnN1bW1hcnksXG4gICAgICAgICAgICBpc0FsbERheTogaXNBbGxEYXksXG4gICAgICAgICAgICBzdGFydFRpbWU6IGlzQWxsRGF5ID8gbnVsbCA6IHN0YXJ0TW9tZW50LmZvcm1hdCgnSEg6bW0nKSxcbiAgICAgICAgICAgIGVuZFRpbWU6IGlzQWxsRGF5ID8gbnVsbCA6IGVuZE1vbWVudC5mb3JtYXQoJ0hIOm1tJylcbiAgICAgICAgfTtcblxuICAgICAgICAvLyAtLS0gRklYIEZPUiBNSUROSUdIVCBFVkVOVFMgLS0tXG4gICAgICAgIC8vIENyZWF0ZSBhIGNsb25lIG9mIHRoZSBlbmQgZGF0ZSB0byBhdm9pZCBtb2RpZnlpbmcgdGhlIG9yaWdpbmFsLlxuICAgICAgICBjb25zdCBsb29wRW5kRGF0ZSA9IGVuZE1vbWVudC5jbG9uZSgpO1xuXG4gICAgICAgIC8vIElmIHRoZSBldmVudCBlbmRzIGV4YWN0bHkgYXQgbWlkbmlnaHQsIHN1YnRyYWN0IG9uZSBzZWNvbmQgZm9yIGxvb3AgYm91bmRhcnkgY2FsY3VsYXRpb25zLlxuICAgICAgICAvLyBUaGlzIHByZXZlbnRzIHRoZSBldmVudCBmcm9tIFwibGVha2luZ1wiIGludG8gdGhlIG5leHQgZGF5LlxuICAgICAgICBpZiAoIWlzQWxsRGF5ICYmIGxvb3BFbmREYXRlLmhvdXIoKSA9PT0gMCAmJiBsb29wRW5kRGF0ZS5taW51dGUoKSA9PT0gMCAmJiBsb29wRW5kRGF0ZS5zZWNvbmQoKSA9PT0gMCkge1xuICAgICAgICAgICAgbG9vcEVuZERhdGUuc3VidHJhY3QoMSwgJ3NlY29uZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGN1cnJlbnREYXkgPSBzdGFydE1vbWVudC5jbG9uZSgpLnN0YXJ0T2YoJ2RheScpO1xuICAgICAgICAvLyBVc2UgdGhlIGFkanVzdGVkIGxvb3BFbmREYXRlIGZvciB0aGUgY29uZGl0aW9uLlxuICAgICAgICB3aGlsZSAoY3VycmVudERheS5pc1NhbWVPckJlZm9yZShsb29wRW5kRGF0ZS5zdGFydE9mKCdkYXknKSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGVLZXkgPSBjdXJyZW50RGF5LmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmljc0V2ZW50c0J5RGF0ZS5oYXMoZGF0ZUtleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmljc0V2ZW50c0J5RGF0ZS5zZXQoZGF0ZUtleSwgW10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRmluYWwgc2ltcGxlIGNoZWNrIHRvIHByZXZlbnQgYWRkaW5nIHRoZSBleGFjdCBzYW1lIG9iamVjdCB0d2ljZSBpbiB0aGUgbG9vcFxuICAgICAgICAgICAgaWYgKCF0aGlzLmljc0V2ZW50c0J5RGF0ZS5nZXQoZGF0ZUtleSkuc29tZShlID0+IGUudWlkID09PSBldmVudERhdGEudWlkICYmIGUuc3VtbWFyeSA9PT0gZXZlbnREYXRhLnN1bW1hcnkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pY3NFdmVudHNCeURhdGUuZ2V0KGRhdGVLZXkpLnB1c2goZXZlbnREYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnREYXkuYWRkKDEsICdkYXknKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIG9wZW5XZWVrbHlOb3RlKGRhdGVJbmZvKSB7XG4gICAgICAgIC8vIC0tLSBTdGFydCBvZiBEZWJ1Z2dpbmcgLS0tXG4gICAgICAgIGlmICghZGF0ZUluZm8gfHwgdHlwZW9mIGRhdGVJbmZvLnllYXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiV2Vla2x5IE5vdGUgRXJyb3I6IEludmFsaWQgZGF0ZUluZm8gb2JqZWN0IHJlY2VpdmVkLlwiLCBkYXRlSW5mbyk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiQ291bGQgbm90IGNyZWF0ZSB3ZWVrbHkgbm90ZSBkdWUgdG8gYW4gaW50ZXJuYWwgZXJyb3IuIENoZWNrIGNvbnNvbGUgZm9yIGRldGFpbHMuXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIC0tLSBFbmQgb2YgRGVidWdnaW5nIC0tLVxuXG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlV2Vla2x5Tm90ZXMpIHJldHVybjtcblxuICAgICAgICBjb25zdCB7IHdlZWtseU5vdGVGb2xkZXIsIHdlZWtseU5vdGVUZW1wbGF0ZSwgd2Vla2x5Tm90ZUZvcm1hdCB9ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG5cbiAgICAgICAgLy8gMS4gQ2FsY3VsYXRlIGFsbCBwb3NzaWJsZSBwbGFjZWhvbGRlciB2YWx1ZXMgZnJvbSB0aGUgZGF0YSBvYmplY3RcbiAgICAgICAgY29uc3QgcHdlZWsgPSAoKGRhdGVJbmZvLndlZWtTaW5jZVN0YXJ0IC0gMSkgJSA1MikgKyAxOyAvLyBDYWxjdWxhdGUgdGhlIHdlZWsgKDEtNTIpIGluIHRoZSBwZXJpb2QgeWVhclxuICAgICAgICBjb25zdCByZXBsYWNlbWVudHMgPSB7XG4gICAgICAgICAgICBZWVlZOiBkYXRlSW5mby55ZWFyLFxuICAgICAgICAgICAgTU06IFN0cmluZyhkYXRlSW5mby5tb250aCArIDEpLnBhZFN0YXJ0KDIsICcwJyksXG4gICAgICAgICAgICBQTjogXCJQXCIgKyBkYXRlSW5mby5wZXJpb2QsXG4gICAgICAgICAgICBQVzogXCJXXCIgKyBkYXRlSW5mby53ZWVrLFxuICAgICAgICAgICAgV0tQOiBTdHJpbmcocHdlZWspLnBhZFN0YXJ0KDIsICcwJyksXG4gICAgICAgICAgICBXS0M6IFN0cmluZyhkYXRlSW5mby5jYWxlbmRhcldlZWspLnBhZFN0YXJ0KDIsICcwJylcbiAgICAgICAgfTtcblxuICAgICAgICAvLyAyLiBCdWlsZCB0aGUgZmlsZW5hbWUgYnkgcmVwbGFjaW5nIHBsYWNlaG9sZGVycyBpbiB0aGUgZm9ybWF0IHN0cmluZ1xuICAgICAgICBjb25zdCBmaWxlTmFtZSA9IHdlZWtseU5vdGVGb3JtYXQucmVwbGFjZSgvWVlZWXxNTXxQTnxQV3xXS1B8V0tDL2csIChtYXRjaCkgPT4ge1xuICAgICAgICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoYXQgaWYgYSB2YWx1ZSBpcyBzb21laG93IHVuZGVmaW5lZCwgaXQgd29uJ3QgYnJlYWsgdGhlIGZpbGVuYW1lLlxuICAgICAgICAgICAgcmV0dXJuIHJlcGxhY2VtZW50c1ttYXRjaF0gIT09IHVuZGVmaW5lZCA/IHJlcGxhY2VtZW50c1ttYXRjaF0gOiBtYXRjaDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gMy4gVGhlIHJlc3Qgb2YgdGhlIGZpbGUgY3JlYXRpb24vb3BlbmluZyBsb2dpYyByZW1haW5zIHRoZSBzYW1lXG4gICAgICAgIGNvbnN0IHBhdGggPSBgJHt3ZWVrbHlOb3RlRm9sZGVyfS8ke2ZpbGVOYW1lfS5tZGA7XG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XG5cbiAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSk7XG4gICAgICAgICAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IENvbmZpcm1hdGlvbk1vZGFsKHRoaXMuYXBwLFxuICAgICAgICAgICAgICAgIFwiQ3JlYXRlIHdlZWtseSBub3RlP1wiLFxuICAgICAgICAgICAgICAgIGBBIHdlZWtseSBub3RlIGZvciBcIiR7ZmlsZU5hbWV9XCIgZG9lcyBub3QgZXhpc3QuIFdvdWxkIHlvdSBsaWtlIHRvIGNyZWF0ZSBpdD9gLFxuICAgICAgICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbGVDb250ZW50ID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcGxhdGVGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHdlZWtseU5vdGVUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wbGF0ZUZpbGUgaW5zdGFuY2VvZiBURmlsZSkgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKHRlbXBsYXRlRmlsZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgod2Vla2x5Tm90ZUZvbGRlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcih3ZWVrbHlOb3RlRm9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0ZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUocGF0aCwgZmlsZUNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkV2Vla2x5Tm90ZXNDYWNoZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYub3BlbkZpbGUobmV3RmlsZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcIlllcywgY3JlYXRlIGl0XCJcbiAgICAgICAgICAgICkub3BlbigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGdlbmVyYXRlTW9udGhHcmlkKGRhdGVGb3JNb250aCwgdGFyZ2V0Qm9keUVsKSB7XG4gICAgICAgIGNvbnN0IHsgc2V0dGluZ3MgfSA9IHRoaXMucGx1Z2luO1xuICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IHllYXIgPSBkYXRlRm9yTW9udGguZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgY29uc3QgbW9udGggPSBkYXRlRm9yTW9udGguZ2V0TW9udGgoKTtcbiAgICAgICAgY29uc3QgZmlyc3REYXlPZk1vbnRoID0gbmV3IERhdGUoeWVhciwgbW9udGgsIDEpO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBzZXR0aW5ncy5kYWlseU5vdGVzRm9sZGVyIHx8IFwiXCI7XG4gICAgICAgIGNvbnN0IGZvcm1hdCA9IHNldHRpbmdzLmRhaWx5Tm90ZURhdGVGb3JtYXQgfHwgXCJZWVlZLU1NLUREXCI7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nTm90ZXMgPSBuZXcgU2V0KHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZmlsZSA9PiAhZm9sZGVyIHx8IGZpbGUucGF0aC5zdGFydHNXaXRoKGZvbGRlciArIFwiL1wiKSkubWFwKGZpbGUgPT4gZmlsZS5iYXNlbmFtZSkpO1xuXG4gICAgICAgIC8vIFRoaXMgbmV3IGxvZ2ljIGNvcnJlY3RseSBjYWxjdWxhdGVzIHRoZSBmaXJzdCBkYXkgdG8gc2hvdyBvbiB0aGUgY2FsZW5kYXJcbiAgICAgICAgY29uc3Qgc3RhcnREYXlOdW1iZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrU3RhcnREYXkgPT09ICdtb25kYXknID8gMSA6IDA7IC8vIE1vbj0xLCBTdW49MFxuICAgICAgICBtb21lbnQudXBkYXRlTG9jYWxlKCdlbicsIHsgd2VlazogeyBkb3c6IHN0YXJ0RGF5TnVtYmVyIH0gfSk7XG5cbiAgICAgICAgbGV0IGRheU9mV2VlayA9IGZpcnN0RGF5T2ZNb250aC5nZXREYXkoKTsgLy8gSlMgc3RhbmRhcmQ6IFN1bj0wLCBNb249MS4uLlxuXG4gICAgICAgIGxldCBkaWZmID0gZGF5T2ZXZWVrIC0gc3RhcnREYXlOdW1iZXI7XG4gICAgICAgIGlmIChkaWZmIDwgMCkge1xuICAgICAgICAgICAgZGlmZiArPSA3OyAvLyBFbnN1cmUgd2UgZ28gYmFjayB0byB0aGUgcHJldmlvdXMgd2Vla1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGN1cnJlbnREYXkgPSBuZXcgRGF0ZShmaXJzdERheU9mTW9udGgpO1xuICAgICAgICBjdXJyZW50RGF5LnNldERhdGUoZmlyc3REYXlPZk1vbnRoLmdldERhdGUoKSAtIGRpZmYpO1xuXG4gICAgICAgIGNvbnN0IHJlcXVpcmVkUm93cyA9IDY7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVxdWlyZWRSb3dzOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHRhcmdldEJvZHlFbC5jcmVhdGVFbChcInRyXCIpO1xuXG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MuaGlnaGxpZ2h0Q3VycmVudFdlZWspIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b2RheU1vbWVudCA9IG1vbWVudCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0T2ZXZWVrTW9tZW50ID0gbW9tZW50KGN1cnJlbnREYXkpO1xuICAgICAgICAgICAgICAgIGlmICh0b2RheU1vbWVudC53ZWVrWWVhcigpID09PSBzdGFydE9mV2Vla01vbWVudC53ZWVrWWVhcigpICYmIHRvZGF5TW9tZW50LndlZWsoKSA9PT0gc3RhcnRPZldlZWtNb21lbnQud2VlaygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hZGRDbGFzcygnY3VycmVudC13ZWVrLXJvdycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgd2Vla01vbWVudCA9IG1vbWVudChuZXcgRGF0ZShjdXJyZW50RGF5KSk7XG4gICAgICAgICAgICBjb25zdCBpc29XZWVrID0gd2Vla01vbWVudC5pc29XZWVrKCk7XG4gICAgICAgICAgICBjb25zdCBpc29ZZWFyID0gd2Vla01vbWVudC5pc29XZWVrWWVhcigpO1xuICAgICAgICAgICAgY29uc3QgaXNvTW9udGggPSB3ZWVrTW9tZW50Lm1vbnRoKCk7XG4gICAgICAgICAgICBjb25zdCBwZXJpb2RXZWVrRGF0YSA9IGdldFBlcmlvZFdlZWsobmV3IERhdGUoY3VycmVudERheSksIHNldHRpbmdzLnN0YXJ0T2ZQZXJpb2QxRGF0ZSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGRhdGVJbmZvRm9yV2VlayA9IHtcbiAgICAgICAgICAgICAgICB5ZWFyOiBpc29ZZWFyLFxuICAgICAgICAgICAgICAgIG1vbnRoOiBpc29Nb250aCxcbiAgICAgICAgICAgICAgICBwZXJpb2Q6IHBlcmlvZFdlZWtEYXRhLnBlcmlvZCxcbiAgICAgICAgICAgICAgICB3ZWVrOiBwZXJpb2RXZWVrRGF0YS53ZWVrLFxuICAgICAgICAgICAgICAgIGNhbGVuZGFyV2VlazogaXNvV2VlayxcbiAgICAgICAgICAgICAgICB3ZWVrU2luY2VTdGFydDogcGVyaW9kV2Vla0RhdGEud2Vla1NpbmNlU3RhcnRcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IGNsaWNrSGFuZGxlciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5XZWVrbHlOb3RlKGRhdGVJbmZvRm9yV2Vlayk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsZXQgd2Vla2x5Tm90ZUV4aXN0cyA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHNldHRpbmdzLmVuYWJsZVdlZWtseU5vdGVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHdlZWsgPSAoKGRhdGVJbmZvRm9yV2Vlay53ZWVrU2luY2VTdGFydCAtIDEpICUgNTIpICsgMTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXBsYWNlbWVudHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIFlZWVk6IGRhdGVJbmZvRm9yV2Vlay55ZWFyLFxuICAgICAgICAgICAgICAgICAgICBNTTogU3RyaW5nKGRhdGVJbmZvRm9yV2Vlay5tb250aCArIDEpLnBhZFN0YXJ0KDIsICcwJyksXG4gICAgICAgICAgICAgICAgICAgIFBOOiBcIlBcIiArIGRhdGVJbmZvRm9yV2Vlay5wZXJpb2QsXG4gICAgICAgICAgICAgICAgICAgIFBXOiBcIldcIiArIGRhdGVJbmZvRm9yV2Vlay53ZWVrLFxuICAgICAgICAgICAgICAgICAgICBXS1A6IFN0cmluZyhwd2VlaykucGFkU3RhcnQoMiwgJzAnKSxcbiAgICAgICAgICAgICAgICAgICAgV0tDOiBTdHJpbmcoZGF0ZUluZm9Gb3JXZWVrLmNhbGVuZGFyV2VlaykucGFkU3RhcnQoMiwgJzAnKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRGaWxlTmFtZSA9IHNldHRpbmdzLndlZWtseU5vdGVGb3JtYXQucmVwbGFjZSgvWVlZWXxXS1B8V0tDfE1NfFBOfFBXL2csIG1hdGNoID0+IHJlcGxhY2VtZW50c1ttYXRjaF0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkUGF0aCA9IGAke3NldHRpbmdzLndlZWtseU5vdGVGb2xkZXJ9LyR7ZXhwZWN0ZWRGaWxlTmFtZX0ubWRgO1xuICAgICAgICAgICAgICAgIHdlZWtseU5vdGVFeGlzdHMgPSB0aGlzLmV4aXN0aW5nV2Vla2x5Tm90ZXMuaGFzKGV4cGVjdGVkUGF0aCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zaG93UFdDb2x1bW4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwd0NlbGwgPSByb3cuY3JlYXRlRWwoXCJ0ZFwiLCB7IGNsczogXCJwdy1sYWJlbC1jZWxsXCIgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcHdDb250ZW50ID0gcHdDZWxsLmNyZWF0ZURpdih7IGNsczogXCJkYXktY29udGVudFwiIH0pO1xuICAgICAgICAgICAgICAgIHB3Q29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwiZGF5LW51bWJlclwiIH0pLnNldFRleHQodGhpcy5mb3JtYXRQVyhwZXJpb2RXZWVrRGF0YS5wZXJpb2QsIHBlcmlvZFdlZWtEYXRhLndlZWspKTtcblxuICAgICAgICAgICAgICAgIHB3Q2VsbC5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRUb2RheVBXTGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZCA9IDA7IGQgPCA3OyBkKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrRGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnREYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tEYXRlLnNldERhdGUoY3VycmVudERheS5nZXREYXRlKCkgKyBkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1NhbWVEYXkoY2hlY2tEYXRlLCB0b2RheSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwd0NlbGwuYWRkQ2xhc3MoXCJ0b2RheS1wdy1sYWJlbFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh3ZWVrbHlOb3RlRXhpc3RzICYmIHNldHRpbmdzLnNob3dXZWVrbHlOb3RlRG90ICYmICFzZXR0aW5ncy5zaG93V2Vla051bWJlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZG90c0NvbnRhaW5lciA9IHB3Q29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdkb3RzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGF5b3V0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FsZW5kYXJMYXlvdXQgfHwgJ25vcm1hbCc7XG4gICAgICAgICAgICAgICAgICAgIGRvdHNDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnbGF5b3V0LWNvbmRlbnNlZCcsICdsYXlvdXQtbm9ybWFsJywgJ2xheW91dC1zcGFjaW91cycpO1xuICAgICAgICAgICAgICAgICAgICBkb3RzQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoYGxheW91dC0ke2xheW91dH1gKTtcbiAgICAgICAgICAgICAgICAgICAgZG90c0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjYWxlbmRhci1kb3Qgd2Vla2x5LW5vdGUtZG90JyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHdDZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tIYW5kbGVyKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZVJvd0hvdmVyRW50ZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVSb3dIaWdobGlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdyb3ctaG92ZXInKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlUm93SG92ZXJMZWF2ZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcm93LmNsYXNzTGlzdC5yZW1vdmUoJ3Jvdy1ob3ZlcicpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBwd0NlbGwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIGhhbmRsZVJvd0hvdmVyRW50ZXIpO1xuICAgICAgICAgICAgICAgIHB3Q2VsbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgaGFuZGxlUm93SG92ZXJMZWF2ZSk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNob3dXZWVrTnVtYmVycykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdlZWtOdW0gPSBzZXR0aW5ncy53ZWVrTnVtYmVyVHlwZSA9PT0gJ3BlcmlvZCcgPyBwZXJpb2RXZWVrRGF0YS53ZWVrU2luY2VTdGFydCA6IGlzb1dlZWs7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2Vla0NlbGwgPSByb3cuY3JlYXRlRWwoXCJ0ZFwiLCB7IGNsczogXCJ3ZWVrLW51bWJlci1jZWxsXCIgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2Vla0NvbnRlbnQgPSB3ZWVrQ2VsbC5jcmVhdGVEaXYoeyBjbHM6IFwiZGF5LWNvbnRlbnRcIiB9KTtcbiAgICAgICAgICAgICAgICB3ZWVrQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwiZGF5LW51bWJlclwiIH0pLnNldFRleHQod2Vla051bS50b1N0cmluZygpKTtcblxuICAgICAgICAgICAgICAgIHdlZWtDZWxsLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodFRvZGF5UFdMYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBkID0gMDsgZCA8IDc7IGQrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hlY2tEYXRlID0gbmV3IERhdGUoY3VycmVudERheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0RhdGUuc2V0RGF0ZShjdXJyZW50RGF5LmdldERhdGUoKSArIGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzU2FtZURheShjaGVja0RhdGUsIHRvZGF5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlZWtDZWxsLmFkZENsYXNzKFwidG9kYXktcHctbGFiZWxcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAod2Vla2x5Tm90ZUV4aXN0cyAmJiBzZXR0aW5ncy5zaG93V2Vla2x5Tm90ZURvdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkb3RzQ29udGFpbmVyID0gd2Vla0NvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnZG90cy1jb250YWluZXInIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxheW91dCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNhbGVuZGFyTGF5b3V0IHx8ICdub3JtYWwnO1xuICAgICAgICAgICAgICAgICAgICBkb3RzQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2xheW91dC1jb25kZW5zZWQnLCAnbGF5b3V0LW5vcm1hbCcsICdsYXlvdXQtc3BhY2lvdXMnKTtcbiAgICAgICAgICAgICAgICAgICAgZG90c0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGBsYXlvdXQtJHtsYXlvdXR9YCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZG90c0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjYWxlbmRhci1kb3Qgd2Vla2x5LW5vdGUtZG90JyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgd2Vla0NlbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja0hhbmRsZXIpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlUm93SG92ZXJFbnRlciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVJvd0hpZ2hsaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoJ3Jvdy1ob3ZlcicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVSb3dIb3ZlckxlYXZlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByb3cuY2xhc3NMaXN0LnJlbW92ZSgncm93LWhvdmVyJyk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHdlZWtDZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBoYW5kbGVSb3dIb3ZlckVudGVyKTtcbiAgICAgICAgICAgICAgICB3ZWVrQ2VsbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgaGFuZGxlUm93SG92ZXJMZWF2ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAobGV0IGQgPSAwOyBkIDwgNzsgZCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF5RGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnREYXkpO1xuICAgICAgICAgICAgICAgIGRheURhdGUuc2V0RGF0ZShjdXJyZW50RGF5LmdldERhdGUoKSArIGQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzT3RoZXJNb250aCA9IGRheURhdGUuZ2V0TW9udGgoKSAhPT0gbW9udGg7XG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IHJvdy5jcmVhdGVFbChcInRkXCIpO1xuXG4gICAgICAgICAgICAgICAgLy8gQWRkIHNlcGFyYXRvciBjbGFzcyB0byBmaXJzdCBkYXRlIGNvbHVtblxuICAgICAgICAgICAgICAgIGlmIChkID09PSAwICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dQV0NvbHVtblNlcGFyYXRvciAmJlxuICAgICAgICAgICAgICAgICAgICAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1BXQ29sdW1uIHx8IHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dXZWVrTnVtYmVycykpIHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5hZGRDbGFzcygnZmlyc3QtZGF0ZS1jb2x1bW4nKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50RGl2ID0gY2VsbC5jcmVhdGVEaXYoXCJkYXktY29udGVudFwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXlOdW1iZXIgPSBjb250ZW50RGl2LmNyZWF0ZURpdihcImRheS1udW1iZXJcIik7XG4gICAgICAgICAgICAgICAgZGF5TnVtYmVyLnRleHRDb250ZW50ID0gZGF5RGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlS2V5ID0gbW9tZW50KGRheURhdGUpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgaWNzRXZlbnRzRm9yRGF5ID0gdGhpcy5pY3NFdmVudHNCeURhdGUuZ2V0KGRhdGVLZXkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tzRm9yRGF5ID0gdGhpcy50YXNrc0J5RGF0ZS5nZXQoZGF0ZUtleSk7XG4gICAgICAgICAgICAgICAgY29uc3QgY3JlYXRlZEZpbGVzID0gdGhpcy5jcmVhdGVkTm90ZXNNYXAuZ2V0KGRhdGVLZXkpIHx8IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vZGlmaWVkRmlsZXMgPSB0aGlzLm1vZGlmaWVkTm90ZXNNYXAuZ2V0KGRhdGVLZXkpIHx8IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFzc2V0c0NyZWF0ZWQgPSB0aGlzLmFzc2V0Q3JlYXRpb25NYXAuZ2V0KGRhdGVLZXkpIHx8IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhaWx5Tm90ZUZpbGVOYW1lID0gZm9ybWF0RGF0ZShkYXlEYXRlLCBmb3JtYXQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhaWx5Tm90ZUV4aXN0cyA9IGV4aXN0aW5nTm90ZXMuaGFzKGRhaWx5Tm90ZUZpbGVOYW1lKTtcblxuICAgICAgICAgICAgICAgIGxldCB0b3RhbFRhc2tDb3VudCA9IHRhc2tzRm9yRGF5ID8gdGFza3NGb3JEYXkubGVuZ3RoIDogMDtcbiAgICAgICAgICAgICAgICBjb25zdCBjYWxlbmRhckV2ZW50Q291bnQgPSBpY3NFdmVudHNGb3JEYXkgPyBpY3NFdmVudHNGb3JEYXkubGVuZ3RoIDogMDtcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudEluZGljYXRvclN0eWxlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FsZW5kYXJFdmVudEluZGljYXRvclN0eWxlO1xuXG4gICAgICAgICAgICAgICAgLy8gQ29uZGl0aW9uYWxseSBhZGQgY2FsZW5kYXIgZXZlbnQgY291bnQgdG8gdGhlIHRvdGFsIGNvdW50IGZvciBoZWF0bWFwL2JhZGdlXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50SW5kaWNhdG9yU3R5bGUgPT09ICdoZWF0bWFwJyB8fCBldmVudEluZGljYXRvclN0eWxlID09PSAnYmFkZ2UnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsVGFza0NvdW50ICs9IGNhbGVuZGFyRXZlbnRDb3VudDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBpc1RvZGF5ID0gaXNTYW1lRGF5KGRheURhdGUsIHRvZGF5KVxuICAgICAgICAgICAgICAgIGlmICh0b3RhbFRhc2tDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnRhc2tJbmRpY2F0b3JTdHlsZSA9PT0gJ2JhZGdlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudERpdi5jcmVhdGVEaXYoeyBjbHM6ICd0YXNrLWNvdW50LWJhZGdlJywgdGV4dDogdG90YWxUYXNrQ291bnQudG9TdHJpbmcoKSB9KTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNldHRpbmdzLnRhc2tJbmRpY2F0b3JTdHlsZSA9PT0gJ2hlYXRtYXAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaG91bGRBcHBseUhlYXRtYXAgPSAhKGlzVG9kYXkgJiYgc2V0dGluZ3MudG9kYXlIaWdobGlnaHRTdHlsZSA9PT0gJ2NlbGwnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFwcGx5SGVhdG1hcCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRDb2xvciA9IHBhcnNlUmdiYVN0cmluZyhzZXR0aW5ncy50YXNrSGVhdG1hcFN0YXJ0Q29sb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pZENvbG9yID0gcGFyc2VSZ2JhU3RyaW5nKHNldHRpbmdzLnRhc2tIZWF0bWFwTWlkQ29sb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZENvbG9yID0gcGFyc2VSZ2JhU3RyaW5nKHNldHRpbmdzLnRhc2tIZWF0bWFwRW5kQ29sb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pZFBvaW50ID0gc2V0dGluZ3MudGFza0hlYXRtYXBNaWRwb2ludDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXhQb2ludCA9IHNldHRpbmdzLnRhc2tIZWF0bWFwTWF4cG9pbnQ7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGFydENvbG9yICYmIG1pZENvbG9yICYmIGVuZENvbG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbENvbG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodG90YWxUYXNrQ291bnQgPj0gbWF4UG9pbnQpIHsgZmluYWxDb2xvciA9IHNldHRpbmdzLnRhc2tIZWF0bWFwRW5kQ29sb3I7IH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodG90YWxUYXNrQ291bnQgPj0gbWlkUG9pbnQpIHsgY29uc3QgZmFjdG9yID0gKHRvdGFsVGFza0NvdW50IC0gbWlkUG9pbnQpIC8gKG1heFBvaW50IC0gbWlkUG9pbnQpOyBmaW5hbENvbG9yID0gYmxlbmRSZ2JhQ29sb3JzKG1pZENvbG9yLCBlbmRDb2xvciwgZmFjdG9yKTsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsgY29uc3QgZGl2aXNvciA9IG1pZFBvaW50IC0gMTsgY29uc3QgZmFjdG9yID0gZGl2aXNvciA+IDAgPyAodG90YWxUYXNrQ291bnQgLSAxKSAvIGRpdmlzb3IgOiAxOyBmaW5hbENvbG9yID0gYmxlbmRSZ2JhQ29sb3JzKHN0YXJ0Q29sb3IsIG1pZENvbG9yLCBmYWN0b3IpOyB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudERpdi5jbGFzc0xpc3QuYWRkKCdoZWF0bWFwLWNlbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudERpdi5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1oZWF0bWFwLWNvbG9yJywgZmluYWxDb2xvcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjcmVhdGVzIGEgYm9yZGVyIHVzaW5nIHRoZSB0aGVtZSdzIGJhY2tncm91bmQgY29sb3IsIG1ha2luZyBhIGNsZWFuIGdhcC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNJbkhpZ2hsaWdodGVkUm93ID0gc2V0dGluZ3MuaGlnaGxpZ2h0Q3VycmVudFdlZWsgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5jbGFzc0xpc3QuY29udGFpbnMoJ2N1cnJlbnQtd2Vlay1yb3cnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIHJvdyBoaWdobGlnaHQgY29sb3IgYXMgYm9yZGVyIGlmIGluIGhpZ2hsaWdodGVkIHJvd1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNJbkhpZ2hsaWdodGVkUm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBib3JkZXJDb2xvciA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd0aGVtZS1kYXJrJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNldHRpbmdzLnJvd0hpZ2hsaWdodENvbG9yRGFya1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc2V0dGluZ3Mucm93SGlnaGxpZ2h0Q29sb3JMaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnREaXYuc3R5bGUuYm9yZGVyID0gYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGVudEJvcmRlcldpZHRofSBzb2xpZCAke2JvcmRlckNvbG9yfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50RGl2LnN0eWxlLmJvcmRlciA9IGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmNvbnRlbnRCb3JkZXJXaWR0aH0gc29saWQgdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpYDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBIHNsaWdodGx5IHNtYWxsZXIgcmFkaXVzIG1ha2VzIGl0IGxvb2sgbmVhdGx5IGluc2V0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50RGl2LnN0eWxlLmJvcmRlclJhZGl1cyA9ICc4cHgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50RGl2LnN0eWxlLmJveFNpemluZyA9ICdib3JkZXItYm94JztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgaWYgKGlzT3RoZXJNb250aCkgZGF5TnVtYmVyLmFkZENsYXNzKFwiZGF5LW51bWJlci1vdGhlci1tb250aFwiKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNTYW1lRGF5KGRheURhdGUsIHRvZGF5KSAmJiAhaXNPdGhlck1vbnRoKSBjZWxsLmFkZENsYXNzKFwidG9kYXktY2VsbFwiKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGRvdHNDb250YWluZXIgPSBjb250ZW50RGl2LmNyZWF0ZURpdih7IGNsczogJ2RvdHMtY29udGFpbmVyJyB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBsYXlvdXQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckxheW91dCB8fCAnbm9ybWFsJztcblxuICAgICAgICAgICAgICAgIC8vIEVuc3VyZSBubyBvbGQgbGF5b3V0IGNsYXNzZXMgYXJlIGxpbmdlcmluZ1xuICAgICAgICAgICAgICAgIGRvdHNDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnbGF5b3V0LWNvbmRlbnNlZCcsICdsYXlvdXQtbm9ybWFsJywgJ2xheW91dC1zcGFjaW91cycpO1xuXG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgdGhlIGNvcnJlY3QgY2xhc3MgYmFzZWQgb24gdGhlIGN1cnJlbnQgc2V0dGluZ1xuICAgICAgICAgICAgICAgIGRvdHNDb250YWluZXIuY2xhc3NMaXN0LmFkZChgbGF5b3V0LSR7bGF5b3V0fWApO1xuXG5cbiAgICAgICAgICAgICAgICBpZiAoZGFpbHlOb3RlRXhpc3RzKSB7IGRvdHNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInBlcmlvZC1tb250aC1kYWlseS1ub3RlLWRvdCBjYWxlbmRhci1kb3RcIiB9KTsgfVxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zaG93T3RoZXJOb3RlRG90ICYmIGNyZWF0ZWRGaWxlcy5sZW5ndGggPiAwKSB7IGRvdHNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnb3RoZXItbm90ZS1kb3QgY2FsZW5kYXItZG90JyB9KTsgfVxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zaG93TW9kaWZpZWRGaWxlRG90ICYmIG1vZGlmaWVkRmlsZXMubGVuZ3RoID4gMCkgeyBkb3RzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ21vZGlmaWVkLWZpbGUtZG90IGNhbGVuZGFyLWRvdCcgfSk7IH1cblxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zaG93QXNzZXREb3QgJiYgYXNzZXRzQ3JlYXRlZC5sZW5ndGggPiAwKSB7IGRvdHNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnYXNzZXQtZG90IGNhbGVuZGFyLWRvdCcgfSk7IH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2hvd1Rhc2tEb3QgJiYgdG90YWxUYXNrQ291bnQgPiAwKSB7IGRvdHNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAndGFzay1kb3QgY2FsZW5kYXItZG90JyB9KTsgfVxuXG5cbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRJbmRpY2F0b3JTdHlsZSA9PT0gJ2RvdCcgJiYgY2FsZW5kYXJFdmVudENvdW50ID4gMCB8fCBzZXR0aW5ncy5zaG93SWNzRG90ICYmIGNhbGVuZGFyRXZlbnRDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZG90c0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjYWxlbmRhci1kb3QgaWNzLWV2ZW50LWRvdCcgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgaGFzUG9wdXBDb250ZW50ID0gZGFpbHlOb3RlRXhpc3RzIHx8ICh0b3RhbFRhc2tDb3VudCA+IDApIHx8IChjcmVhdGVkRmlsZXMubGVuZ3RoID4gMCkgfHwgKG1vZGlmaWVkRmlsZXMubGVuZ3RoID4gMCkgfHwgKGFzc2V0c0NyZWF0ZWQubGVuZ3RoID4gMCkgfHwgKGNhbGVuZGFyRXZlbnRDb3VudCA+IDApO1xuXG4gICAgICAgICAgICAgICAgbGV0IGRhdGFUb1Nob3cgPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAoaGFzUG9wdXBDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhaWx5Tm90ZUZpbGUgPSBkYWlseU5vdGVFeGlzdHMgPyB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyID8gYCR7Zm9sZGVyfS8ke2RhaWx5Tm90ZUZpbGVOYW1lfS5tZGAgOiBgJHtkYWlseU5vdGVGaWxlTmFtZX0ubWRgKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFUb1Nob3cgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrczogdGFza3NGb3JEYXksXG4gICAgICAgICAgICAgICAgICAgICAgICBkYWlseTogZGFpbHlOb3RlRmlsZSA/IFtkYWlseU5vdGVGaWxlXSA6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlZDogc2V0dGluZ3Muc2hvd090aGVyTm90ZURvdCA/IGNyZWF0ZWRGaWxlcyA6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kaWZpZWQ6IHNldHRpbmdzLnNob3dNb2RpZmllZEZpbGVEb3QgPyBtb2RpZmllZEZpbGVzIDogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldHM6IHNldHRpbmdzLnNob3dBc3NldERvdCA/IGFzc2V0c0NyZWF0ZWQgOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGljczogaWNzRXZlbnRzRm9yRGF5IHx8IFtdLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxldCBsb25nUHJlc3NPY2N1cnJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGxldCB0b3VjaFRpbWVyID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIGlmIChQbGF0Zm9ybS5pc01vYmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyAtLS0gTU9CSUxFOiBMb25nLXByZXNzIGZvciBwb3B1cCwgdGFwIGZvciBkYWlseSBub3RlIC0tLVxuICAgICAgICAgICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9uZ1ByZXNzT2NjdXJyZWQgPSBmYWxzZTsgLy8gUmVzZXQgb24gbmV3IHRvdWNoXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzUG9wdXBDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG91Y2hUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25nUHJlc3NPY2N1cnJlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0ZpbGVQb3B1cChjZWxsLCBkYXRhVG9TaG93LCBkYXlEYXRlLCB0cnVlKTsgLy8gUGFzcyAndHJ1ZScgZm9yIG1vYmlsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnRzIGNvbnRleHQgbWVudSBhbmQgdGV4dCBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDApOyAvLyA1MDBtcyBmb3IgYSBsb25nLXByZXNzXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbmNlbExvbmdQcmVzcyA9ICgpID0+IGNsZWFyVGltZW91dCh0b3VjaFRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGNhbmNlbExvbmdQcmVzcyk7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgY2FuY2VsTG9uZ1ByZXNzKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIC0tLSBERVNLVE9QOiBIb3ZlciBmb3IgcG9wdXAgLS0tXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNQb3B1cENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1BvcHVwTG9ja2VkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZUZpbGVQb3B1cCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaG92ZXJUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0ZpbGVQb3B1cChjZWxsLCBkYXRhVG9TaG93LCBkYXlEYXRlLCBmYWxzZSk7IC8vIFBhc3MgJ2ZhbHNlJyBmb3IgZGVza3RvcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMucGx1Z2luLnNldHRpbmdzLm90aGVyTm90ZUhvdmVyRGVsYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5ob3ZlclRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuaGlkZUZpbGVQb3B1cCgpLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wb3B1cEhpZGVEZWxheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIC0tLSBVTklGSUVEIENMSUNLIEhBTkRMRVIgLS0tXG4gICAgICAgICAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9uZ1ByZXNzT2NjdXJyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEEgbG9uZy1wcmVzcyBqdXN0IGhhcHBlbmVkIGFuZCBzaG93ZWQgYSBwb3B1cCwgc28gaWdub3JlIHRoaXMgc3Vic2VxdWVudCAnY2xpY2snIGV2ZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZUZpbGVQb3B1cCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5EYWlseU5vdGUoZGF5RGF0ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVJvd1RvRGF0ZUhpZ2hsaWdodCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoaWdobGlnaHRDb2xvciA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd0aGVtZS1kYXJrJylcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5wbHVnaW4uc2V0dGluZ3Mucm93SGlnaGxpZ2h0Q29sb3JEYXJrXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMucGx1Z2luLnNldHRpbmdzLnJvd0hpZ2hsaWdodENvbG9yTGlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvdyA9IGNlbGwucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsUm93cyA9IEFycmF5LmZyb20ocm93LnBhcmVudEVsZW1lbnQuY2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByb3dJbmRleCA9IGFsbFJvd3MuaW5kZXhPZihyb3cpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xJbmRleCA9IEFycmF5LmZyb20ocm93LmNoaWxkcmVuKS5pbmRleE9mKGNlbGwpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWJsZSA9IGNlbGwuY2xvc2VzdCgndGFibGUnKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPD0gY29sSW5kZXg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbFRvSGlnaGxpZ2h0ID0gcm93LmNoaWxkcmVuW2pdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGxUb0hpZ2hsaWdodCkgY2VsbFRvSGlnaGxpZ2h0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGhpZ2hsaWdodENvbG9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93SW5kZXg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJpb3JSb3cgPSBhbGxSb3dzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbFRvSGlnaGxpZ2h0ID0gcHJpb3JSb3cuY2hpbGRyZW5bY29sSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGxUb0hpZ2hsaWdodCkgY2VsbFRvSGlnaGxpZ2h0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGhpZ2hsaWdodENvbG9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gdGFibGUucXVlcnlTZWxlY3RvcigndGhlYWQgdHInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXJSb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJDZWxsID0gaGVhZGVyUm93LmNoaWxkcmVuW2NvbEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVyQ2VsbCkgaGVhZGVyQ2VsbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBoaWdobGlnaHRDb2xvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVSb3dUb0RhdGVIaWdobGlnaHQpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFibGUgPSBjZWxsLmNsb3Nlc3QoJ3RhYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsQ2VsbHMgPSB0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0Ym9keSB0ZCwgdGhlYWQgdGgnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbENlbGxzLmZvckVhY2goYyA9PiBjLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudERheS5zZXREYXRlKGN1cnJlbnREYXkuZ2V0RGF0ZSgpICsgNyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaW5kcyBhbGwgbWFya2Rvd24gZmlsZXMgdGhhdCBsaW5rIHRvIG9yIGVtYmVkIHRoZSBnaXZlbiBhc3NldCBmaWxlLlxuICAgICAqIEBwYXJhbSB7VEZpbGV9IGFzc2V0RmlsZSAtIFRoZSBhc3NldCBmaWxlIHRvIGZpbmQgYmFja2xpbmtzIGZvci5cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxURmlsZVtdPn0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gYXJyYXkgb2YgbWFya2Rvd24gZmlsZXMgbGlua2luZyB0byB0aGUgYXNzZXQuXG4gICAgICovXG4gICAgYXN5bmMgZmluZEFzc2V0QmFja2xpbmtzKGFzc2V0RmlsZSkge1xuICAgICAgICBjb25zdCBiYWNrbGlua3MgPSBbXTtcbiAgICAgICAgY29uc3QgbWFya2Rvd25GaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgICAgICBmb3IgKGNvbnN0IG1kRmlsZSBvZiBtYXJrZG93bkZpbGVzKSB7XG4gICAgICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKG1kRmlsZSk7XG4gICAgICAgICAgICBpZiAoIWNhY2hlKSBjb250aW51ZTtcblxuICAgICAgICAgICAgY29uc3QgbGlua3NBbmRFbWJlZHMgPSBbLi4uKGNhY2hlLmVtYmVkcyB8fCBbXSksIC4uLihjYWNoZS5saW5rcyB8fCBbXSldO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlZiBvZiBsaW5rc0FuZEVtYmVkcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtlZEZpbGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHJlZi5saW5rLCBtZEZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgaWYgKGxpbmtlZEZpbGUgJiYgbGlua2VkRmlsZS5wYXRoID09PSBhc3NldEZpbGUucGF0aCkge1xuICAgICAgICAgICAgICAgICAgICBiYWNrbGlua3MucHVzaChtZEZpbGUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8gTW92ZSB0byB0aGUgbmV4dCBmaWxlIG9uY2UgYSBsaW5rIGlzIGZvdW5kXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiYWNrbGlua3M7XG4gICAgfVxuXG4gICAgaXNXZWVrbHlOb3RlKGZpbGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVXZWVrbHlOb3RlcyB8fCAhKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBIGZpbGUgaXMgY29uc2lkZXJlZCBhIHdlZWtseSBub3RlIGlmIGl0J3MgaW5zaWRlIHRoZSBzcGVjaWZpZWQgZm9sZGVyLlxuICAgICAgICByZXR1cm4gZmlsZS5wYXJlbnQ/LnBhdGggPT09IHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtseU5vdGVGb2xkZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBBdHRhY2hlcyB0b3VjaCBldmVudCBsaXN0ZW5lcnMgZm9yIG1vYmlsZSBzd2lwZSBnZXN0dXJlcy5cbiAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhbGVuZGFyRWwgVGhlIGVsZW1lbnQgdG8gbGlzdGVuIGZvciAnc3dpcGUgdXAnIG9uLlxuICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gaGVhZGVyRWwgVGhlIGVsZW1lbnQgdG8gbGlzdGVuIGZvciAnc3dpcGUgZG93bicgb24uXG4gICAgKi9cbiAgICBhdHRhY2hTd2lwZUxpc3RlbmVycyhjYWxlbmRhckVsLCBoZWFkZXJFbCkge1xuICAgICAgICBjb25zdCBzd2lwZVRocmVzaG9sZCA9IDUwO1xuICAgICAgICBsZXQgc3RhcnRZID0gMDtcbiAgICAgICAgbGV0IHN0YXJ0WCA9IDA7XG4gICAgICAgIGxldCBpc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgIGxldCBkcmFnVGFyZ2V0ID0gbnVsbDsgLy8gVG8ga25vdyB3aGljaCBlbGVtZW50IHN0YXJ0ZWQgdGhlIGRyYWdcblxuICAgICAgICBjb25zdCBoYW5kbGVEcmFnU3RhcnQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaXNEcmFnZ2luZyA9IHRydWU7XG4gICAgICAgICAgICBkcmFnVGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0OyAvLyBTdG9yZSBpZiBkcmFnIHN0YXJ0ZWQgb24gY2FsZW5kYXIgb3IgaGVhZGVyXG4gICAgICAgICAgICBzdGFydFkgPSBlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0uY2xpZW50WSA6IGUuY2xpZW50WTtcbiAgICAgICAgICAgIHN0YXJ0WCA9IGUudG91Y2hlcyA/IGUudG91Y2hlc1swXS5jbGllbnRYIDogZS5jbGllbnRYO1xuXG4gICAgICAgICAgICAvLyBBZGQgdGhlICdlbmQnIGxpc3RlbmVycyB0byB0aGUgd2luZG93IHRvIGNhdGNoIGRyYWdzIHRoYXQgZW5kIG91dHNpZGUgdGhlIGVsZW1lbnRcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgaGFuZGxlRHJhZ0VuZCwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgaGFuZGxlRHJhZ0VuZCwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZURyYWdFbmQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFpc0RyYWdnaW5nKSByZXR1cm47XG4gICAgICAgICAgICBpc0RyYWdnaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGNvbnN0IGVuZFkgPSBlLmNoYW5nZWRUb3VjaGVzID8gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZIDogZS5jbGllbnRZO1xuICAgICAgICAgICAgY29uc3QgZW5kWCA9IGUuY2hhbmdlZFRvdWNoZXMgPyBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFggOiBlLmNsaWVudFg7XG4gICAgICAgICAgICBjb25zdCBkZWx0YVkgPSBzdGFydFkgLSBlbmRZO1xuICAgICAgICAgICAgY29uc3QgZGVsdGFYID0gTWF0aC5hYnMoc3RhcnRYIC0gZW5kWCk7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGl0J3MgYSBwcmVkb21pbmFudGx5IHZlcnRpY2FsIHN3aXBlXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoZGVsdGFZKSA+IHN3aXBlVGhyZXNob2xkICYmIE1hdGguYWJzKGRlbHRhWSkgPiBkZWx0YVgpIHtcbiAgICAgICAgICAgICAgICAvLyBTd2lwZSBVcCBvbiBDYWxlbmRhciBCb2R5OiBIaWRlIENhbGVuZGFyXG4gICAgICAgICAgICAgICAgaWYgKGRyYWdUYXJnZXQgPT09IGNhbGVuZGFyRWwgJiYgZGVsdGFZID4gMCAmJiAhdGhpcy5pc0NhbGVuZGFyQ29sbGFwc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJXYXNDb2xsYXBzZWRGb3JFZGl0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQ2FsZW5kYXIodHJ1ZSk7IC8vIENvbGxhcHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFN3aXBlIERvd24gb24gSGVhZGVyOiBTaG93IENhbGVuZGFyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZHJhZ1RhcmdldCA9PT0gaGVhZGVyRWwgJiYgZGVsdGFZIDwgMCAmJiB0aGlzLmlzQ2FsZW5kYXJDb2xsYXBzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxlbmRhcldhc0NvbGxhcHNlZEZvckVkaXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVDYWxlbmRhcihmYWxzZSk7IC8vIFVzZSB0aGUgaGVscGVyXG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ibHVyQWN0aXZlSW5wdXQoKTsgICAvLyBFeHBsaWNpdGx5IGRpc21pc3MgdGhlIGtleWJvYXJkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuYXBwLmlzTW9iaWxlICYmIGRyYWdUYXJnZXQgPT09IGNhbGVuZGFyRWwgJiYgZGVsdGFZIDwgLTgwKSB7IC8vIEEgbG9uZ2VyIHN3aXBlIGRvd24gZ2VzdHVyZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVmVydGljYWxWaWV3ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTsgLy8gUmUtcmVuZGVyIHRoZSBlbnRpcmUgdmlldyB0byBzd2l0Y2ggdG8gdmVydGljYWwgbW9kZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBBdHRhY2ggc3RhcnQgbGlzdGVuZXJzIGZvciBib3RoIG1vdXNlIGFuZCB0b3VjaCB0byBib3RoIGVsZW1lbnRzXG4gICAgICAgIGNhbGVuZGFyRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlRHJhZ1N0YXJ0KTtcbiAgICAgICAgY2FsZW5kYXJFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgaGFuZGxlRHJhZ1N0YXJ0LCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgICAgIGhlYWRlckVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZURyYWdTdGFydCk7XG4gICAgICAgIGhlYWRlckVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBoYW5kbGVEcmFnU3RhcnQsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHRyYWN0cyBhbGwgdGFzayBsaW5lcyAoZS5nLiwgXCItIFsgXSAuLi5cIikgZnJvbSBhIHN0cmluZyBvZiBjb250ZW50LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb250ZW50IC0gVGhlIG1hcmtkb3duIGNvbnRlbnQgdG8gcGFyc2UuXG4gICAgICogQHJldHVybnMge3N0cmluZ1tdfSBBbiBhcnJheSBvZiBzdHJpbmdzLCB3aGVyZSBlYWNoIHN0cmluZyBpcyBhIHRhc2sgbGluZS5cbiAgICAgKi9cbiAgICBleHRyYWN0VGFza0xpbmVzKGNvbnRlbnQpIHtcbiAgICAgICAgY29uc3QgdGFza0xpbmVzID0gW107XG4gICAgICAgIC8vIFRoaXMgcmVnZXggZmluZHMgYW55IGxpbmUgdGhhdCBsb29rcyBsaWtlIGEgTWFya2Rvd24gdGFzaywgY29tcGxldGVkIG9yIG5vdC5cbiAgICAgICAgY29uc3QgdGFza1JlZ2V4ID0gL15cXHMqKD86LXxcXGQrXFwuKVxccypcXFsuXFxdXFxzKi4qLztcbiAgICAgICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgICAgICAgICBpZiAodGFza1JlZ2V4LnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgICAgICB0YXNrTGluZXMucHVzaChsaW5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFza0xpbmVzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBhIGZpbGUgaXMgYW4gaW1hZ2UgYmFzZWQgb24gaXRzIGV4dGVuc2lvbi5cbiAgICAgKiBAcGFyYW0ge1RGaWxlfSBmaWxlIFRoZSBmaWxlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBmaWxlIGlzIGEgY29tbW9uIGltYWdlIHR5cGUuXG4gICAgICovXG4gICAgaXNJbWFnZUFzc2V0KGZpbGUpIHtcbiAgICAgICAgY29uc3QgaW1hZ2VFeHRlbnNpb25zID0gWydwbmcnLCAnanBnJywgJ2pwZWcnLCAnZ2lmJywgJ3N2ZycsICd3ZWJwJ107XG4gICAgICAgIHJldHVybiBpbWFnZUV4dGVuc2lvbnMuaW5jbHVkZXMoZmlsZS5leHRlbnNpb24udG9Mb3dlckNhc2UoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRHluYW1pY2FsbHkgZ2VuZXJhdGVzIHRoZSBsYWJlbCBmb3IgYSB0YWIsIGluY2x1ZGluZyBpY29uIGFuZC9vciB0ZXh0IGJhc2VkIG9uIHNldHRpbmdzLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lciBUaGUgSFRNTCBlbGVtZW50IHRvIHBvcHVsYXRlIHdpdGggdGhlIGxhYmVsLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdGFiIChlLmcuLCAnbm90ZXMnLCAnc2NyYXRjaCcpLlxuICAgICAqL1xuICAgIGdldFRhYkxhYmVsKGNvbnRhaW5lciwga2V5KSB7XG4gICAgICAgIGNvbnRhaW5lci5lbXB0eSgpOyAvLyBDbGVhciBwcmV2aW91cyBjb250ZW50XG5cbiAgICAgICAgY29uc3QgaXNNb2JpbGUgPSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnaXMtbW9iaWxlJyk7XG4gICAgICAgIGNvbnN0IGRpc3BsYXlNb2RlID0gaXNNb2JpbGUgPyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVUYWJEaXNwbGF5TW9kZSA6IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYkRpc3BsYXlNb2RlO1xuXG4gICAgICAgIGNvbnN0IGljb25zID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiSWNvbnMgfHwgREVGQVVMVF9TRVRUSU5HUy50YWJJY29ucztcbiAgICAgICAgY29uc3QgdGV4dExhYmVscyA9IHtcbiAgICAgICAgICAgIHNjcmF0Y2g6IFwiU2NyYXRjaFBhZFwiLFxuICAgICAgICAgICAgbm90ZXM6IFwiTm90ZXNcIixcbiAgICAgICAgICAgIHBpbm5lZDogXCJQaW5uZWRcIixcbiAgICAgICAgICAgIHRhc2tzOiBcIlRhc2tzXCIsIFxuICAgICAgICAgICAgYXNzZXRzOiBcIkFzc2V0c1wiLFxuICAgICAgICAgICAgZmlsZUNyZWF0aW9uRGFzaGJvYXJkOiBcIkRhc2hib2FyZFwiLFxuICAgICAgICAgICAgdGFza3NEYXNoYm9hcmQ6IFwiRGFzaGJvYXJkXCJcbiAgICAgICAgfTtcblxuICAgICAgICBsZXQgaWNvbk5hbWUgPSAnJztcbiAgICAgICAgbGV0IHRleHQgPSAnJztcblxuICAgICAgICBpZiAoa2V5ID09PSAnbm90ZXMnKSB7XG4gICAgICAgICAgICBjb25zdCBtb2RlID0gdGhpcy5ub3Rlc1ZpZXdNb2RlO1xuICAgICAgICAgICAgaWNvbk5hbWUgPSBtb2RlID09PSAncGlubmVkJyA/IGljb25zLnBpbm5lZCA6IGljb25zLm5vdGVzO1xuICAgICAgICAgICAgdGV4dCA9IG1vZGUgPT09ICdwaW5uZWQnID8gdGV4dExhYmVscy5waW5uZWQgOiB0ZXh0TGFiZWxzLm5vdGVzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ3Rhc2tzJykge1xuICAgICAgICAgICAgY29uc3QgZ3JvdXBCeSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tHcm91cEJ5O1xuICAgICAgICAgICAgaWNvbk5hbWUgPSBncm91cEJ5ID09PSAndGFnJyA/ICdjaXJjbGUtY2hlY2snIDogaWNvbnMudGFza3M7XG4gICAgICAgICAgICB0ZXh0ID0gZ3JvdXBCeSA9PT0gJ3RhZycgPyBcIlRhc2tzXCIgOiBcIlRhc2tzXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSAnYXNzZXRzJykge1xuICAgICAgICAgICAgaWNvbk5hbWUgPSB0aGlzLmlzQXNzZXRzR3JpZFZpZXcgPyAnaW1hZ2UnIDogJ2ZpbGUtaW1hZ2UnO1xuICAgICAgICAgICAgdGV4dCA9IHRleHRMYWJlbHNba2V5XTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdkYXNoYm9hcmQnKSB7XG4gICAgICAgICAgICAvLyBEeW5hbWljYWxseSBzZXQgYm90aCBpY29uIGFuZCB0ZXh0IGJhc2VkIG9uIHRoZSBjdXJyZW50IGRhc2hib2FyZCB2aWV3IG1vZGVcbiAgICAgICAgICAgIGlmICh0aGlzLmRhc2hib2FyZFZpZXdNb2RlID09PSAnY3JlYXRpb24nKSB7XG4gICAgICAgICAgICAgICAgaWNvbk5hbWUgPSAnbGF5b3V0LWdyaWQnO1xuICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0TGFiZWxzLmZpbGVDcmVhdGlvbkRhc2hib2FyZDtcbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIEFzc3VtZXMgJ3Rhc2tzJyB2aWV3XG4gICAgICAgICAgICAgICAgaWNvbk5hbWUgPSAnY2hhcnQtYmFyLWJpZyc7XG4gICAgICAgICAgICAgICAgdGV4dCA9IHRleHRMYWJlbHMudGFza3NEYXNoYm9hcmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpY29uTmFtZSA9IGljb25zW2tleV07XG4gICAgICAgICAgICB0ZXh0ID0gdGV4dExhYmVsc1trZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRpc3BsYXlNb2RlLmluY2x1ZGVzKFwiaWNvblwiKSkge1xuICAgICAgICAgICAgY29uc3QgaWNvbkVsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3RhYi1pY29uJyB9KTtcbiAgICAgICAgICAgIHNldEljb24oaWNvbkVsLCBpY29uTmFtZSB8fCAnZmlsZS1xdWVzdGlvbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRpc3BsYXlNb2RlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJ0ZXh0XCIpKSB7XG4gICAgICAgICAgICBjb250YWluZXIuY3JlYXRlU3Bhbih7IGNsczogJ3RhYi10ZXh0JywgdGV4dDogdGV4dCB8fCAnJyB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgYSBmaWxlIGlzIGEgZGFpbHkgbm90ZSBiYXNlZCBvbiBpdHMgbmFtZSBmb3JtYXQgYW5kIGxvY2F0aW9uLlxuICAgICAqIEBwYXJhbSB7VEZpbGV9IGZpbGUgVGhlIGZpbGUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIGZpbGUgbWF0Y2hlcyB0aGUgZGFpbHkgbm90ZSBjcml0ZXJpYS5cbiAgICAgKi9cbiAgICBpc0RhaWx5Tm90ZShmaWxlKSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG4gICAgICAgIGNvbnN0IGRhaWx5Tm90ZUZvbGRlciA9IHNldHRpbmdzLmRhaWx5Tm90ZXNGb2xkZXI7XG4gICAgICAgIGNvbnN0IGZvcm1hdCA9IHNldHRpbmdzLmRhaWx5Tm90ZURhdGVGb3JtYXQgfHwgXCJZWVlZLU1NLUREXCI7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZpbGVuYW1lIHN0cmljdGx5IG1hdGNoZXMgdGhlIGRhaWx5IG5vdGUgZGF0ZSBmb3JtYXQuXG4gICAgICAgIGNvbnN0IGlzTmFtZUNvcnJlY3QgPSBtb21lbnQoZmlsZS5iYXNlbmFtZSwgZm9ybWF0LCB0cnVlKS5pc1ZhbGlkKCk7XG4gICAgICAgIGlmICghaXNOYW1lQ29ycmVjdCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgYSBkYWlseSBub3RlcyBmb2xkZXIgaXMgc3BlY2lmaWVkLCBjaGVjayBpZiB0aGUgZmlsZSBpcyBkaXJlY3RseSBpbnNpZGUgaXQuXG4gICAgICAgIGlmIChkYWlseU5vdGVGb2xkZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBmaWxlLnBhcmVudD8ucGF0aCA9PT0gZGFpbHlOb3RlRm9sZGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgbm8gZm9sZGVyIGlzIHNldCwgdGhlIGZpbGUgbXVzdCBiZSBpbiB0aGUgdmF1bHQncyByb290IGRpcmVjdG9yeS5cbiAgICAgICAgcmV0dXJuIGZpbGUucGFyZW50Py5wYXRoID09PSAnLyc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVG9nZ2xlcyB0aGUgc2NyYXRjaHBhZCBiZXR3ZWVuIGVkaXQgYW5kIHByZXZpZXcgbW9kZSBhbmQgdHJpZ2dlcnMgYSByZS1yZW5kZXIuXG4gICAgICovXG4gICAgdG9nZ2xlU2NyYXRjaHBhZFZpZXcoKSB7XG4gICAgICAgIHRoaXMuaXNTY3JhdGNocGFkUHJldmlldyA9ICF0aGlzLmlzU2NyYXRjaHBhZFByZXZpZXc7XG4gICAgICAgIC8vIFRoZSBidXR0b24gc3RhdGUgYW5kIGNvbnRlbnQgdmlzaWJpbGl0eSBhcmUgaGFuZGxlZCBieSB0aGUgcmVuZGVyIG1ldGhvZC5cbiAgICAgICAgdGhpcy5yZW5kZXJTY3JhdGNocGFkQ29udGVudCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb2Nlc3NlcyBkYXRlIHBsYWNlaG9sZGVycyBpbiBhIHN0cmluZyBhbmQgcmVwbGFjZXMgdGhlbSB3aXRoIGZvcm1hdHRlZCBkYXRlcy5cbiAgICAgKiBBbHNvIGhhbmRsZXMgYSBjdXJzb3IgcG9zaXRpb24gbWFya2VyLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtYXRTdHJpbmcgVGhlIHN0cmluZyBjb250YWluaW5nIHBsYWNlaG9sZGVycyBsaWtlIHt0b2RheX0sIHttb25kYXl9LCB7ZGF0ZX0rNywgYW5kIGEgY3Vyc29yIG1hcmtlciAnfCcuXG4gICAgICogQHJldHVybnMge3t0ZXh0OiBzdHJpbmcsIGN1cnNvck9mZnNldDogbnVtYmVyfX0gVGhlIHByb2Nlc3NlZCBzdHJpbmcgYW5kIHRoZSBjYWxjdWxhdGVkIGZpbmFsIGN1cnNvciBwb3NpdGlvbi5cbiAgICAgKi9cbiAgICBwcm9jZXNzRGF0ZVBsYWNlaG9sZGVycyhmb3JtYXRTdHJpbmcpIHtcbiAgICAgICAgY29uc3QgY3Vyc29yTWFya2VyID0gJ3wnO1xuICAgICAgICBsZXQgY3Vyc29yT2Zmc2V0ID0gLTE7XG5cbiAgICAgICAgLy8gRmluZCB0aGUgY3Vyc29yIG1hcmtlcidzIHBvc2l0aW9uIGFuZCByZW1vdmUgaXQgZm9yIHByb2Nlc3NpbmcuXG4gICAgICAgIGNvbnN0IG1hcmtlckluZGV4ID0gZm9ybWF0U3RyaW5nLmluZGV4T2YoY3Vyc29yTWFya2VyKTtcbiAgICAgICAgaWYgKG1hcmtlckluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgY3Vyc29yT2Zmc2V0ID0gbWFya2VySW5kZXg7XG4gICAgICAgICAgICBmb3JtYXRTdHJpbmcgPSBmb3JtYXRTdHJpbmcucmVwbGFjZShjdXJzb3JNYXJrZXIsICcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFByb2Nlc3MgZGF0ZSBwbGFjZWhvbGRlcnMgdXNpbmcgYSByZWdleC5cbiAgICAgICAgY29uc3QgcHJvY2Vzc2VkVGV4dCA9IGZvcm1hdFN0cmluZy5yZXBsYWNlKC97KFtefV0rKX0vZywgKG1hdGNoLCB0YWcpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG1vbWVudCgpO1xuICAgICAgICAgICAgdGFnID0gdGFnLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuXG4gICAgICAgICAgICBpZiAodGFnID09PSAndG9kYXknKSByZXR1cm4gbm93LmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuICAgICAgICAgICAgaWYgKHRhZyA9PT0gJ3RvbW9ycm93JykgcmV0dXJuIG5vdy5hZGQoMSwgJ2RheScpLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuXG4gICAgICAgICAgICBjb25zdCB3ZWVrZGF5cyA9IHsgJ3N1bmRheSc6IDAsICdtb25kYXknOiAxLCAndHVlc2RheSc6IDIsICd3ZWRuZXNkYXknOiAzLCAndGh1cnNkYXknOiA0LCAnZnJpZGF5JzogNSwgJ3NhdHVyZGF5JzogNiB9O1xuICAgICAgICAgICAgaWYgKHRhZyBpbiB3ZWVrZGF5cykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldERheSA9IHdlZWtkYXlzW3RhZ107XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudERheSA9IG5vdy5kYXkoKTtcbiAgICAgICAgICAgICAgICBsZXQgZGF5c1RvQWRkID0gdGFyZ2V0RGF5IC0gY3VycmVudERheTtcbiAgICAgICAgICAgICAgICBpZiAoZGF5c1RvQWRkIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGF5c1RvQWRkICs9IDc7IC8vIEZpbmQgdGhlICpuZXh0KiBpbnN0YW5jZSBvZiB0aGUgZGF5LlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbm93LmFkZChkYXlzVG9BZGQsICdkYXlzJykuZm9ybWF0KCdZWVlZLU1NLUREJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGR5bmFtaWNEYXRlTWF0Y2ggPSB0YWcubWF0Y2goL15kYXRlXFxzKihbKy1dKVxccyooXFxkKykvKTtcbiAgICAgICAgICAgIGlmIChkeW5hbWljRGF0ZU1hdGNoKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3BlcmF0b3IgPSBkeW5hbWljRGF0ZU1hdGNoWzFdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IHBhcnNlSW50KGR5bmFtaWNEYXRlTWF0Y2hbMl0sIDEwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3BlcmF0b3IgPT09ICcrJyA/IG5vdy5hZGQoYW1vdW50LCAnZGF5cycpLmZvcm1hdCgnWVlZWS1NTS1ERCcpIDogbm93LnN1YnRyYWN0KGFtb3VudCwgJ2RheXMnKS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG1hdGNoOyAvLyBSZXR1cm4gb3JpZ2luYWwgbWF0Y2ggaWYgbm8gcGxhY2Vob2xkZXIgaXMgcmVjb2duaXplZC5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gSWYgdGhlIGN1cnNvciBtYXJrZXIgd2Fzbid0IGZvdW5kLCBzZXQgdGhlIG9mZnNldCB0byB0aGUgZW5kIG9mIHRoZSB0ZXh0LlxuICAgICAgICBpZiAoY3Vyc29yT2Zmc2V0ID09PSAtMSkge1xuICAgICAgICAgICAgY3Vyc29yT2Zmc2V0ID0gcHJvY2Vzc2VkVGV4dC5sZW5ndGg7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyB0ZXh0OiBwcm9jZXNzZWRUZXh0LCBjdXJzb3JPZmZzZXQ6IGN1cnNvck9mZnNldCB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNjYW5zIHRoZSBlbnRpcmUgdmF1bHQgZm9yIG9wZW4gdGFza3Mgd2l0aCBkdWUgZGF0ZXMgKGUuZy4sIPCfk4VZWVlZLU1NLUREKVxuICAgICAqIGFuZCBwb3B1bGF0ZXMgYHRoaXMudGFza3NCeURhdGVgIG1hcCBmb3IgcXVpY2sgbG9va3VwcyBieSB0aGUgY2FsZW5kYXIgdmlldy5cbiAgICAgKi9cbiAgICBhc3luYyBidWlsZFRhc2tzQnlEYXRlTWFwKCkge1xuICAgICAgICB0aGlzLnRhc2tzQnlEYXRlLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuZmlsZVRvVGFza0RhdGVzLmNsZWFyKCk7IC8vIEFsc28gY2xlYXIgdGhlIHRyYWNraW5nIG1hcFxuXG4gICAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tJZ25vcmVGb2xkZXJzLnNvbWUoZm9sZGVyID0+IGZpbGUucGF0aC5zdGFydHNXaXRoKGZvbGRlcikpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpO1xuICAgICAgICAgICAgY29uc3QgdGFza3MgPSBwYXJzZVRhc2tzRnJvbUZpbGUoZmlsZSwgY29udGVudCk7IC8vIFVzZSB0aGUgbmV3IGhlbHBlclxuXG4gICAgICAgICAgICBjb25zdCBkYXRlS2V5c0ZvckZpbGUgPSBuZXcgU2V0KCk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgdGFzayBvZiB0YXNrcykge1xuICAgICAgICAgICAgICAgIC8vIFdlIG9ubHkgY2FyZSBhYm91dCBpbmNvbXBsZXRlIHRhc2tzIHdpdGggZHVlIGRhdGVzIGZvciB0aGUgY2FsZW5kYXIgZ3JpZFxuICAgICAgICAgICAgICAgIGlmICh0YXNrLnN0YXR1cy50b0xvd2VyQ2FzZSgpICE9PSAneCcgJiYgdGFzay5kdWVEYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVLZXkgPSBtb21lbnQodGFzay5kdWVEYXRlKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMudGFza3NCeURhdGUuaGFzKGRhdGVLZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tzQnlEYXRlLnNldChkYXRlS2V5LCBbXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrc0J5RGF0ZS5nZXQoZGF0ZUtleSkucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUtleXNGb3JGaWxlLmFkZChkYXRlS2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChkYXRlS2V5c0ZvckZpbGUuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGVUb1Rhc2tEYXRlcy5zZXQoZmlsZS5wYXRoLCBkYXRlS2V5c0ZvckZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2NhbnMgdGhlIHZhdWx0IGZvciBBTEwgdGFza3MgKGNvbXBsZXRlIGFuZCBpbmNvbXBsZXRlKSBhbmQgcG9wdWxhdGVzIHRoaXMuYWxsVGFza3MuXG4gICAgICogVGhpcyBzZXJ2ZXMgYXMgdGhlIHNpbmdsZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIHRoZSB0YXNrcyBkYXNoYm9hcmQuXG4gICAgICovXG4gICAgYXN5bmMgYnVpbGRBbGxUYXNrc0xpc3QoKSB7XG4gICAgICAgIHRoaXMuYWxsVGFza3MgPSBbXTsgLy8gUmVzZXQgdGhlIGxpc3RcbiAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGNvbnN0IHRhc2tJZ25vcmVGb2xkZXJzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0lnbm9yZUZvbGRlcnMubWFwKGYgPT4gZi50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCcvJykgPyBmLnRvTG93ZXJDYXNlKCkgOiBmLnRvTG93ZXJDYXNlKCkgKyAnLycpO1xuXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGhMb3dlciA9IGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgaWYgKHRhc2tJZ25vcmVGb2xkZXJzLnNvbWUoZm9sZGVyID0+IGZpbGVQYXRoTG93ZXIuc3RhcnRzV2l0aChmb2xkZXIpKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlKTtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tzRnJvbUZpbGUgPSBwYXJzZVRhc2tzRnJvbUZpbGUoZmlsZSwgY29udGVudCk7IC8vIEFzc3VtZXMgeW91IGhhdmUgdGhpcyBnbG9iYWwgaGVscGVyXG4gICAgICAgICAgICB0aGlzLmFsbFRhc2tzLnB1c2goLi4udGFza3NGcm9tRmlsZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRTY3JhdGNocGFkUGFydHMoZnVsbENvbnRlbnQpIHtcbiAgICAgICAgLy8gSWYgdGhlIHNldHRpbmcgdG8gaGlkZSBmcm9udG1hdHRlciBpcyBPRkYsIHJldHVybiB0aGUgZW50aXJlIGNvbnRlbnQgYXMgdGhlIGJvZHkuXG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaHBhZD8uaGlkZUZyb250bWF0dGVyKSB7XG4gICAgICAgICAgICByZXR1cm4geyBmcm9udG1hdHRlcjogJycsIGJvZHk6IGZ1bGxDb250ZW50IH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFRoaXMgcmVnZXggZmluZHMgYSB2YWxpZCBmcm9udG1hdHRlciBibG9jayBhdCB0aGUgdmVyeSBzdGFydCBvZiB0aGUgZmlsZS5cbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXJSZWdleCA9IC9eLS0tXFxzKltcXHJcXG5dW1xcc1xcU10rP1tcXHJcXG5dXFxzKi0tLS87XG4gICAgICAgIGNvbnN0IG1hdGNoID0gZnVsbENvbnRlbnQubWF0Y2goZnJvbnRtYXR0ZXJSZWdleCk7XG5cbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICBjb25zdCBmcm9udG1hdHRlckJsb2NrID0gbWF0Y2hbMF07XG4gICAgICAgICAgICBjb25zdCBlbmRPZkJsb2NrID0gZnVsbENvbnRlbnQuaW5kZXhPZihmcm9udG1hdHRlckJsb2NrKSArIGZyb250bWF0dGVyQmxvY2subGVuZ3RoO1xuXG4gICAgICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIHN0YXJ0IG9mIHRoZSBib2R5IGJ5IHNraXBwaW5nIGV4YWN0bHkgb25lIG5ld2xpbmUgYWZ0ZXIgdGhlIGJsb2NrLlxuICAgICAgICAgICAgbGV0IGJvZHlTdGFydEluZGV4ID0gZW5kT2ZCbG9jaztcbiAgICAgICAgICAgIGlmIChmdWxsQ29udGVudC5zdWJzdHJpbmcoYm9keVN0YXJ0SW5kZXgsIGJvZHlTdGFydEluZGV4ICsgMikgPT09ICdcXHJcXG4nKSB7XG4gICAgICAgICAgICAgICAgYm9keVN0YXJ0SW5kZXggKz0gMjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZnVsbENvbnRlbnQuc3Vic3RyaW5nKGJvZHlTdGFydEluZGV4LCBib2R5U3RhcnRJbmRleCArIDEpID09PSAnXFxuJykge1xuICAgICAgICAgICAgICAgIGJvZHlTdGFydEluZGV4ICs9IDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFRoZSBmcm9udG1hdHRlciBub3cgY29ycmVjdGx5IGluY2x1ZGVzIHRoZSBzZXBhcmF0aW5nIG5ld2xpbmUocykuXG4gICAgICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IGZ1bGxDb250ZW50LnN1YnN0cmluZygwLCBib2R5U3RhcnRJbmRleCk7XG4gICAgICAgICAgICAvLyBUaGUgYm9keSBpcyBldmVyeXRoaW5nIGFmdGVyIHRoYXQsIHdpdGggaXRzIGxlYWRpbmcgd2hpdGVzcGFjZSBpbnRhY3QuXG4gICAgICAgICAgICBjb25zdCBib2R5ID0gZnVsbENvbnRlbnQuc3Vic3RyaW5nKGJvZHlTdGFydEluZGV4KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHsgZnJvbnRtYXR0ZXIsIGJvZHkgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIG5vIGZyb250bWF0dGVyIGlzIGZvdW5kLCB0aGUgZW50aXJlIGNvbnRlbnQgaXMgdGhlIGJvZHkuXG4gICAgICAgIHJldHVybiB7IGZyb250bWF0dGVyOiAnJywgYm9keTogZnVsbENvbnRlbnQgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXJzIHRoZSBjb250ZW50IG9mIHRoZSBzY3JhdGNocGFkLCBzd2l0Y2hpbmcgYmV0d2VlbiBhbiBlZGl0b3IgdGV4dGFyZWFcbiAgICAgKiBhbmQgYSByZW5kZXJlZCBNYXJrZG93biBwcmV2aWV3IGJhc2VkIG9uIHRoZSBjdXJyZW50IHZpZXcgbW9kZS5cbiAgICAgKi9cbiAgICBhc3luYyByZW5kZXJTY3JhdGNocGFkQ29udGVudCgpIHtcbiAgICBpZiAoIXRoaXMuc2NyYXRjaFdyYXBwZXJFbCkgcmV0dXJuO1xuXG4gICAgLy8gUHJlc2VydmUgZm9jdXMgb24gdGhlIHRleHRhcmVhIGFjcm9zcyByZS1yZW5kZXJzLlxuICAgIGNvbnN0IHdhc0ZvY3VzZWQgPSB0aGlzLm5vdGVUZXh0YXJlYSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcblxuICAgIHRoaXMuc2NyYXRjaFdyYXBwZXJFbC5lbXB0eSgpO1xuXG4gICAgLy8gQ3JlYXRlIGEgY29udGFpbmVyIGZvciBhY3Rpb24gYnV0dG9ucyAoUHJldmlldywgQWRkIFRhc2spLlxuICAgIGNvbnN0IGFjdGlvbnNDb250YWluZXIgPSB0aGlzLnNjcmF0Y2hXcmFwcGVyRWwuY3JlYXRlRGl2KHsgY2xzOiAnc2NyYXRjaHBhZC1hY3Rpb25zLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBPbmx5IHNob3cgdGhlIFByZXZpZXcvRWRpdCB0b2dnbGUgYnV0dG9uIGlmIGVuYWJsZWQgaW4gc2V0dGluZ3MuXG4gICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQ/LnNob3dQcmV2aWV3VG9nZ2xlKSB7XG4gICAgICAgIHRoaXMuc2NyYXRjaHBhZFZpZXdUb2dnbGVCdG4gPSBhY3Rpb25zQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IGNsczogJ3NjcmF0Y2hwYWQtYWN0aW9uLWJ0bicgfSk7XG4gICAgICAgIHRoaXMuc2NyYXRjaHBhZFZpZXdUb2dnbGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnRvZ2dsZVNjcmF0Y2hwYWRWaWV3KCkpO1xuICAgIH1cblxuICAgIC8vIE9ubHkgc2hvdyB0aGUgQWRkIFRhc2sgYnV0dG9uIGlmIGVuYWJsZWQgaW4gc2V0dGluZ3MuXG4gICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQ/LnNob3dBZGRUYXNrQnV0dG9uKSB7XG4gICAgICAgIHRoaXMuYWRkVGFza0J0biA9IGFjdGlvbnNDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgY2xzOiAnc2NyYXRjaHBhZC1hY3Rpb24tYnRuJyB9KTtcbiAgICAgICAgc2V0SWNvbih0aGlzLmFkZFRhc2tCdG4sICdwbHVzJyk7XG4gICAgICAgIHRoaXMuYWRkVGFza0J0bi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnQWRkIG5ldyB0YXNrJyk7XG4gICAgICAgIHRoaXMuYWRkVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuYWRkTmV3VGFza1RvU2NyYXRjaHBhZCgpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc1NjcmF0Y2hwYWRQcmV2aWV3ICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQ/LnNob3dQcmV2aWV3VG9nZ2xlKSB7XG4gICAgICAgIC8vIC0tLSBDT05GSUdVUkUgVUkgRk9SIFBSRVZJRVcgTU9ERSAtLS1cbiAgICAgICAgaWYgKHRoaXMuc2NyYXRjaHBhZFZpZXdUb2dnbGVCdG4pIHtcbiAgICAgICAgICAgIHNldEljb24odGhpcy5zY3JhdGNocGFkVmlld1RvZ2dsZUJ0biwgJ2VkaXQnKTtcbiAgICAgICAgICAgIHRoaXMuc2NyYXRjaHBhZFZpZXdUb2dnbGVCdG4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0VkaXQgbW9kZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuYWRkVGFza0J0bikge1xuICAgICAgICAgICAgdGhpcy5hZGRUYXNrQnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEaXNhYmxlIHNlYXJjaCBjb250cm9scyBpbiBwcmV2aWV3IG1vZGUuXG4gICAgICAgIGlmICh0aGlzLnNjcmF0Y2hwYWRTZWFyY2hJbnB1dEVsKSB0aGlzLnNjcmF0Y2hwYWRTZWFyY2hJbnB1dEVsLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuc2NyYXRjaHBhZFNlYXJjaENvbnRyb2xzRWwpIHtcbiAgICAgICAgICAgIEFycmF5LmZyb20odGhpcy5zY3JhdGNocGFkU2VhcmNoQ29udHJvbHNFbC5jaGlsZHJlbikuZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLm1hdGNoZXMoJ2J1dHRvbicpKSBjaGlsZC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbmRlciB0aGUgY29udGVudCBhcyBNYXJrZG93bi5cbiAgICAgICAgdGhpcy5zY3JhdGNoV3JhcHBlckVsLmFkZENsYXNzKCdtYXJrZG93bi1wcmV2aWV3LXZpZXcnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFVzZSB0aGUgcHJlLXByb2Nlc3NlZCBib2R5IGNvbnRlbnQgZm9yIHJlbmRlcmluZ1xuICAgICAgICBjb25zdCBtYXJrZG93bkNvbnRlbnQgPSB0aGlzLm5vdGVUZXh0O1xuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMucGx1Z2luLnNldHRpbmdzLmZpeGVkTm90ZUZpbGUpO1xuXG4gICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgICBhd2FpdCBNYXJrZG93blJlbmRlcmVyLnJlbmRlcih0aGlzLmFwcCwgbWFya2Rvd25Db250ZW50LCB0aGlzLnNjcmF0Y2hXcmFwcGVyRWwsIGZpbGUucGF0aCwgdGhpcyk7XG4gICAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIC0tLSBDT05GSUdVUkUgVUkgRk9SIEVESVQgTU9ERSAtLS1cbiAgICAgICAgaWYgKHRoaXMuc2NyYXRjaHBhZFZpZXdUb2dnbGVCdG4pIHtcbiAgICAgICAgICAgIHNldEljb24odGhpcy5zY3JhdGNocGFkVmlld1RvZ2dsZUJ0biwgJ2V5ZScpO1xuICAgICAgICAgICAgdGhpcy5zY3JhdGNocGFkVmlld1RvZ2dsZUJ0bi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnUHJldmlldyBtb2RlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5hZGRUYXNrQnRuKSB7XG4gICAgICAgICAgICB0aGlzLmFkZFRhc2tCdG4uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFbmFibGUgc2VhcmNoIGNvbnRyb2xzIGluIGVkaXQgbW9kZS5cbiAgICAgICAgaWYgKHRoaXMuc2NyYXRjaHBhZFNlYXJjaElucHV0RWwpIHRoaXMuc2NyYXRjaHBhZFNlYXJjaElucHV0RWwuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuc2NyYXRjaHBhZFNlYXJjaENvbnRyb2xzRWwpIHtcbiAgICAgICAgICAgIEFycmF5LmZyb20odGhpcy5zY3JhdGNocGFkU2VhcmNoQ29udHJvbHNFbC5jaGlsZHJlbikuZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLm1hdGNoZXMoJ2J1dHRvbicpKSBjaGlsZC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNjcmF0Y2hXcmFwcGVyRWwucmVtb3ZlQ2xhc3MoJ21hcmtkb3duLXByZXZpZXctdmlldycpO1xuXG4gICAgICAgIC8vIFRoZSBoaWdobGlnaHRlciBpcyBhIGRpdiB0aGF0IHNpdHMgYmVoaW5kIHRoZSB0ZXh0YXJlYSB0byBzaG93IHNlYXJjaCBtYXRjaGVzLlxuICAgICAgICB0aGlzLnNjcmF0Y2hIaWdobGlnaHRlckVsID0gdGhpcy5zY3JhdGNoV3JhcHBlckVsLmNyZWF0ZURpdih7IGNsczogJ3NjcmF0Y2gtYmFzZSBzY3JhdGNoLWhpZ2hsaWdodGVyJyB9KTtcbiAgICAgICAgdGhpcy5ub3RlVGV4dGFyZWEgPSB0aGlzLnNjcmF0Y2hXcmFwcGVyRWwuY3JlYXRlRWwoJ3RleHRhcmVhJywgeyBjbHM6ICdzY3JhdGNoLWJhc2Ugc2NyYXRjaC1jb250ZW50JyB9KTtcblxuICAgICAgICBpZiAodGhpcy5hcHAuaXNNb2JpbGUpIHtcbiAgICAgICAgICAgIHRoaXMubm90ZVRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJXYXNDb2xsYXBzZWRGb3JFZGl0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUNhbGVuZGFyKHRydWUpOyAvLyBDb2xsYXBzZSBjYWxlbmRhclxuICAgICAgICAgICAgICAgIHRoaXMubm90ZVRleHRhcmVhLmNsYXNzTGlzdC5hZGQoJ2lzLWVkaXRpbmctbW9iaWxlJyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5ub3RlVGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gSWYgZm9jdXMgbW92ZXMgdG8gdGhlIGNvbGxhcHNlIGJ1dHRvbiwgZG9uJ3QgYXV0by1leHBhbmQgdGhlIGNhbGVuZGFyXG4gICAgICAgICAgICAgICAgaWYgKGUucmVsYXRlZFRhcmdldCA9PT0gdGhpcy5jb2xsYXBzZUJ0bikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGVUZXh0YXJlYS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1lZGl0aW5nLW1vYmlsZScpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47IFxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgYXV0by1leHBhbmQgaWYgbmVlZGVkLlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbGVuZGFyV2FzQ29sbGFwc2VkRm9yRWRpdGluZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGVuZGFyV2FzQ29sbGFwc2VkRm9yRWRpdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUNhbGVuZGFyKGZhbHNlKTsgLy8gRXhwYW5kIGNhbGVuZGFyXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMubm90ZVRleHRhcmVhLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWVkaXRpbmctbW9iaWxlJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU2V0IHRoZSB0ZXh0YXJlYSB2YWx1ZSBmcm9tIHRoZSBwcmUtcHJvY2Vzc2VkIGJvZHkgY29udGVudFxuICAgICAgICB0aGlzLm5vdGVUZXh0YXJlYS52YWx1ZSA9IHRoaXMubm90ZVRleHQ7XG5cbiAgICAgICAgaWYgKHdhc0ZvY3VzZWQpIHtcbiAgICAgICAgICAgIHRoaXMubm90ZVRleHRhcmVhLmZvY3VzKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnVwZGF0ZVNjcmF0Y2hwYWRIaWdobGlnaHRzKCk7XG4gICAgICAgIHRoaXMudXBkYXRlU2NyYXRjaHBhZFNlYXJjaENvdW50KCk7XG5cbiAgICAgICAgLy8gU2F2ZSBjb250ZW50IG9uIGlucHV0LlxuICAgICAgICB0aGlzLm5vdGVUZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubm90ZVRleHQgPSB0aGlzLm5vdGVUZXh0YXJlYS52YWx1ZTsgLy8gVXBkYXRlIHRoZSBib2R5IGNvbnRlbnQgcHJvcGVydHlcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUZpeGVkTm90ZSh0aGlzLm5vdGVUZXh0KTsgLy8gUGFzcyB0aGUgYm9keSB0byB0aGUgc2F2ZSBmdW5jdGlvblxuICAgICAgICAgICAgdGhpcy51cGRhdGVTY3JhdGNocGFkU2VhcmNoQ291bnQoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2NyYXRjaHBhZEhpZ2hsaWdodHMoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU3luY2hyb25pemUgc2Nyb2xsIHBvc2l0aW9uIGJldHdlZW4gdGV4dGFyZWEgYW5kIGhpZ2hsaWdodGVyLlxuICAgICAgICB0aGlzLm5vdGVUZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zY3JhdGNoSGlnaGxpZ2h0ZXJFbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2NyYXRjaEhpZ2hsaWdodGVyRWwuc2Nyb2xsVG9wID0gdGhpcy5ub3RlVGV4dGFyZWEuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgICAgIHRoaXMuc2NyYXRjaEhpZ2hsaWdodGVyRWwuc2Nyb2xsTGVmdCA9IHRoaXMubm90ZVRleHRhcmVhLnNjcm9sbExlZnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gdGhlIHZpZXcgaXMgZmlyc3Qgb3BlbmVkLiBJdCBsb2FkcyBhbGwgaW5pdGlhbCBkYXRhIGFuZCByZWdpc3RlcnNcbiAgICAgKiBldmVudCBsaXN0ZW5lcnMgZm9yIGZpbGUgY2hhbmdlcyBhbmQgYXV0by1yZWxvYWRpbmcuXG4gICAgICovXG4gICAgYXN5bmMgb25PcGVuKCkge1xuICAgICAgICAvLyAtLS0gTG9hZCBhbGwgaW5pdGlhbCBkYXRhIC0tLVxuICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkQ3JlYXRlZE5vdGVzTWFwKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYnVpbGRNb2RpZmllZE5vdGVzTWFwKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYnVpbGRBc3NldENyZWF0aW9uTWFwKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYnVpbGRBbGxDcmVhdGVkTm90ZXNNYXAoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5idWlsZFRhc2tzQnlEYXRlTWFwKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYnVpbGRBbGxUYXNrc0xpc3QoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoSWNzRXZlbnRzKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYnVpbGRXZWVrbHlOb3Rlc0NhY2hlKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYnVpbGRIZWF0bWFwRmlsZUNhY2hlKCk7XG5cbiAgICAgICAgLy8gQ29ycmVjdGx5IGxvYWQgYW5kIHBhcnNlIHRoZSBzY3JhdGNocGFkIGNvbnRlbnQgb24gaW5pdGlhbCBvcGVuXG4gICAgICAgIGNvbnN0IGZ1bGxDb250ZW50ID0gYXdhaXQgdGhpcy5sb2FkTm90ZSgpO1xuICAgICAgICBjb25zdCB7IGZyb250bWF0dGVyLCBib2R5IH0gPSB0aGlzLmdldFNjcmF0Y2hwYWRQYXJ0cyhmdWxsQ29udGVudCk7XG4gICAgICAgIHRoaXMuc2NyYXRjaHBhZEZyb250bWF0dGVyID0gZnJvbnRtYXR0ZXI7XG4gICAgICAgIHRoaXMubm90ZVRleHQgPSBib2R5OyAvLyB0aGlzLm5vdGVUZXh0IG5vdyBjb3JyZWN0bHkgc3RvcmVzIG9ubHkgdGhlIGJvZHlcblxuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB0aGlzLnNldHVwUmVvcmRlck1vZGUoKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5RG93bi5iaW5kKHRoaXMpKTtcblxuICAgICAgICAvLyAtLS0gUmVnaXN0ZXIgZXZlbnRzIGFuZCBpbnRlcnZhbHMgLS0tXG4gICAgICAgIGNvbnN0IGludGVydmFsTXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvUmVsb2FkSW50ZXJ2YWwgfHwgNTAwMDtcblxuICAgICAgICAvLyBDT1JSRUNURUQ6IFRoaXMgaW50ZXJ2YWwgaXMgbm93IHNhZmVcbiAgICAgICAgdGhpcy5yZWdpc3RlckludGVydmFsKHNldEludGVydmFsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIERvbid0IHJlZnJlc2ggaWYgdGhlIHVzZXIgaXMgYWN0aXZlbHkgdHlwaW5nIGluIHRoZSBzY3JhdGNocGFkXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gdGhpcy5ub3RlVGV4dGFyZWEpIHJldHVybjtcblxuICAgICAgICAgICAgY29uc3QgbGF0ZXN0RnVsbENvbnRlbnQgPSBhd2FpdCB0aGlzLmxvYWROb3RlKCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RnVsbENvbnRlbnQgPSB0aGlzLnNjcmF0Y2hwYWRGcm9udG1hdHRlciArIHRoaXMubm90ZVRleHQ7XG5cbiAgICAgICAgICAgIC8vIE9ubHkgcmVmcmVzaCBpZiB0aGUgY29udGVudCBoYXMgYWN0dWFsbHkgY2hhbmdlZFxuICAgICAgICAgICAgaWYgKGxhdGVzdEZ1bGxDb250ZW50ICE9PSBjdXJyZW50RnVsbENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGZyb250bWF0dGVyLCBib2R5IH0gPSB0aGlzLmdldFNjcmF0Y2hwYWRQYXJ0cyhsYXRlc3RGdWxsQ29udGVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JhdGNocGFkRnJvbnRtYXR0ZXIgPSBmcm9udG1hdHRlcjtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGVUZXh0ID0gYm9keTtcblxuICAgICAgICAgICAgICAgIC8vIElmIGluIEVESVQgbW9kZSwgc2FmZWx5IHVwZGF0ZSB0aGUgdGV4dGFyZWEncyB2YWx1ZVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm5vdGVUZXh0YXJlYSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGVUZXh0YXJlYS52YWx1ZSA9IHRoaXMubm90ZVRleHQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gSWYgaW4gUFJFVklFVyBtb2RlLCB0cmlnZ2VyIGEgcmUtcmVuZGVyIHRvIHNob3cgdGhlIG5ldyBjb250ZW50XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNTY3JhdGNocGFkUHJldmlldykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNjcmF0Y2hwYWRDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQWx3YXlzIHVwZGF0ZSBkZXBlbmRlbnQgVUkgZWxlbWVudHNcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNjcmF0Y2hwYWRTZWFyY2hDb3VudCgpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2NyYXRjaHBhZEhpZ2hsaWdodHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaW50ZXJ2YWxNcykpO1xuXG4gICAgICAgIC8vIFRoaXMgbGlzdGVuZXIgY2hlY2tzIHRoZSBkYXRlIHdoZW4gdGhlIGFwcCB3aW5kb3cgZ2V0cyBmb2N1cy5cbiAgICAgICAgLy8gVGhpcyBzb2x2ZXMgYSAnc3RhbGUgZGF0ZSBoaWdobGlnaHQgYWZ0ZXIgYSBkZXZpY2Ugc2xlZXAnIGlzc3VlLlxuICAgICAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQod2luZG93LCAnZm9jdXMnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgLy8gT25seSBwcm9jZWVkIGlmIHRoZSBkYXkgaGFzIGFjdHVhbGx5IGNoYW5nZWQuXG4gICAgICAgICAgICBpZiAoIWlzU2FtZURheShub3csIHRoaXMubGFzdEtub3duVG9kYXkpKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJXaW5kb3cgZm9jdXMgZGV0ZWN0ZWQ6IERheSBoYXMgY2hhbmdlZC4gUmVmcmVzaGluZyBjYWxlbmRhci5cIik7XG5cbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgb3VyIHRyYWNrZXIgdG8gdGhlIG5ldyBkYXRlLlxuICAgICAgICAgICAgICAgIHRoaXMubGFzdEtub3duVG9kYXkgPSBub3c7XG5cbiAgICAgICAgICAgICAgICAvLyBFZmZpY2llbnRseSByZS1yZW5kZXIganVzdCB0aGUgY2FsZW5kYXIgZ3JpZC5cbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEN1c3RvbSBsaXN0ZW5lciB0byByZWJ1aWxkIGRhc2hib2FyZHNcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKCdwbS1kYXNoYm9hcmQtcmVmcmVzaCcsIHRoaXMucmVidWlsZERhc2hib2FyZHMsIHRoaXMpXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gTGlzdGVuZXIgZm9yIGxpdmUgZGFzaGJvYXJkIHVwZGF0ZXNcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbigncG0tZGFzaGJvYXJkLXJlZnJlc2gnLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBPbmx5IHJlZnJlc2ggaWYgdGhlIGRhc2hib2FyZCB0YWIgaXMgY3VycmVudGx5IGFjdGl2ZVxuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlVGFiID09PSAnZGFzaGJvYXJkJykge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdWxhdGVEYXNoYm9hcmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUub24oJ2NoYW5nZWQnLCBhc3luYyAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEZpcnN0LCBjaGVjayBpZiB0aGUgY2hhbmdlIGFmZmVjdGVkIHRhc2tzIGluIHRoZSBmaWxlLlxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tzQ2hhbmdlZCA9IGF3YWl0IHRoaXMudXBkYXRlVGFza3NGb3JGaWxlKGZpbGUpO1xuXG4gICAgICAgICAgICAgICAgLy8gLS0tIFNUQVJUOiBORVcvQ09SUkVDVEVEIExPR0lDIC0tLVxuXG4gICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB0eXBlIG9mIHVwZGF0ZS4gSWYgdGFza3MgY2hhbmdlZCwgaXQncyBhICd0YXNrcycgdXBkYXRlLlxuICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgaXQncyBhIGdlbmVyYWwgJ21ldGFkYXRhJyB1cGRhdGUgKGUuZy4sIGFkZGluZyBhICNwaW4gdGFnKS5cbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVUeXBlID0gdGFza3NDaGFuZ2VkID8gJ3Rhc2tzJyA6ICdtZXRhZGF0YSc7XG5cbiAgICAgICAgICAgICAgICAvLyBDYWxsIHRoZSBtYWluIHJlZnJlc2ggVUkgaGFuZGxlciwgcGFzc2luZyB0aGUgZmlsZSBhbmQgdGhlIHR5cGUgb2YgdXBkYXRlLlxuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFVJKHsgZmlsZSwgdXBkYXRlVHlwZSB9KTtcblxuICAgICAgICAgICAgICAgIC8vIC0tLSBFTkQ6IE5FVy9DT1JSRUNURUQgTE9HSUMgLS0tXG5cbiAgICAgICAgICAgICAgICAvLyBUaGUgc3BlY2lmaWMgbG9naWMgZm9yIGRhc2hib2FyZCBoZWF0bWFwcyBjYW4gcmVtYWluLCBhcyBpdCdzIHNlcGFyYXRlLlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0gJ2Rhc2hib2FyZCcgJiYgdGhpcy5kYXNoYm9hcmRWaWV3TW9kZSA9PT0gJ2NyZWF0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXNoYm9hcmRDcmVhdGlvbkRlYm91bmNlVGltZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRhc2hib2FyZENyZWF0aW9uRGVib3VuY2VUaW1lcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXNoYm9hcmRDcmVhdGlvbkRlYm91bmNlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdpZGdldEdyaWQgPSB0aGlzLmRhc2hib2FyZENvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcucG0tZGFzaGJvYXJkLWdyaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghd2lkZ2V0R3JpZCkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvbGRNYXRjaGVzID0gdGhpcy5maWxlVG9IZWF0bWFwQ2FjaGUuZ2V0KGZpbGUucGF0aCkgfHwgbmV3IFNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3TWF0Y2hlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUhlYXRtYXBzLmZvckVhY2goKGNvbmZpZywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXRjaGVzSGVhdG1hcFJ1bGUoZmlsZSwgY29uZmlnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNYXRjaGVzLmFkZChpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdNYXRjaGVzLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxlVG9IZWF0bWFwQ2FjaGUuc2V0KGZpbGUucGF0aCwgbmV3TWF0Y2hlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsZVRvSGVhdG1hcENhY2hlLmRlbGV0ZShmaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxBZmZlY3RlZCA9IG5ldyBTZXQoWy4uLm9sZE1hdGNoZXMsIC4uLm5ld01hdGNoZXNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbEFmZmVjdGVkLmZvckVhY2goaW5kZXggPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUhlYXRtYXBzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2luZ2xlSGVhdG1hcCh3aWRnZXRHcmlkLCBjb25maWcsIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMjUwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuXG4gICAgICAgIC8vIEhhbmRsZXMgQ1JFQVRJTkcgYSBuZXcgZmlsZVxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAudmF1bHQub24oXCJjcmVhdGVcIiwgKGZpbGUpID0+IHtcbiAgICAgICAgICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuX2FkZEZpbGVUb0FsbENyZWF0ZWRNYXAoZmlsZSk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hVSSh7IHVwZGF0ZVR5cGU6ICdjcmVhdGlvbicgfSk7XG4gICAgICAgIH0pKTtcblxuICAgICAgICAvLyBIYW5kbGVzIERFTEVUSU5HIGEgZmlsZVxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAudmF1bHQub24oXCJkZWxldGVcIiwgYXN5bmMgKGZpbGUpID0+IHtcbiAgICAgICAgICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcblxuICAgICAgICAgICAgLy8gVGhlc2UgY2FsbHMgdXBkYXRlIHRoZSBkYXRhIG1hcHMgZm9yIGNhbGVuZGFyIGRvdHMgYW5kIG90aGVyIGZlYXR1cmVzLlxuICAgICAgICAgICAgaWYgKHRoaXMuZXhpc3RpbmdXZWVrbHlOb3Rlcy5oYXMoZmlsZS5wYXRoKSkgdGhpcy5leGlzdGluZ1dlZWtseU5vdGVzLmRlbGV0ZShmaWxlLnBhdGgpO1xuICAgICAgICAgICAgaWYgKGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCcubWQnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRmlsZUZyb21NYXBzKGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgLy8gQWxzbyByZW1vdmUgdGFza3MgZnJvbSB0aGUgZGVsZXRlZCBmaWxlXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkRGF0ZUtleXMgPSB0aGlzLmZpbGVUb1Rhc2tEYXRlcy5nZXQoZmlsZS5wYXRoKSB8fCBuZXcgU2V0KCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBkYXRlS2V5IG9mIG9sZERhdGVLZXlzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tzID0gdGhpcy50YXNrc0J5RGF0ZS5nZXQoZGF0ZUtleSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXNrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nID0gdGFza3MuZmlsdGVyKHQgPT4gdC5maWxlLnBhdGggIT09IGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVtYWluaW5nLmxlbmd0aCA+IDApIHRoaXMudGFza3NCeURhdGUuc2V0KGRhdGVLZXksIHJlbWFpbmluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHRoaXMudGFza3NCeURhdGUuZGVsZXRlKGRhdGVLZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZmlsZVRvVGFza0RhdGVzLmRlbGV0ZShmaWxlLnBhdGgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZpbGVGcm9tQXNzZXRNYXAoZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuZmlsZVRvSGVhdG1hcENhY2hlLmhhcyhmaWxlLnBhdGgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxlVG9IZWF0bWFwQ2FjaGUuZGVsZXRlKGZpbGUucGF0aCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgZGFzaGJvYXJkJ3MgZGF0YSBzb3VyY2VcbiAgICAgICAgICAgIHRoaXMuX3JlbW92ZUZpbGVGcm9tQWxsQ3JlYXRlZE1hcChmaWxlKTtcblxuICAgICAgICAgICAgLy8gVHJpZ2dlciB0aGUgY29ycmVjdCBVSSByZWZyZXNoXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hVSSh7IHVwZGF0ZVR5cGU6ICdjcmVhdGlvbicsIGZpbGU6IGZpbGUgfSk7XG4gICAgICAgIH0pKTtcblxuXG4gICAgICAgIC8vIEhhbmRsZXMgUkVOQU1JTkcgYSBmaWxlXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC52YXVsdC5vbihcInJlbmFtZVwiLCBhc3luYyAoZmlsZSwgb2xkUGF0aCkgPT4ge1xuICAgICAgICAgICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAvLyBUaGVzZSBjYWxscyBoYW5kbGUgdGhlIHJlbW92ZS9hZGQgbG9naWMgb3RoZXIgZmVhdHVyZXMuXG4gICAgICAgICAgICBpZiAodGhpcy5leGlzdGluZ1dlZWtseU5vdGVzLmhhcyhvbGRQYXRoKSkgdGhpcy5leGlzdGluZ1dlZWtseU5vdGVzLmRlbGV0ZShvbGRQYXRoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzV2Vla2x5Tm90ZShmaWxlKSkgdGhpcy5leGlzdGluZ1dlZWtseU5vdGVzLmFkZChmaWxlLnBhdGgpO1xuXG4gICAgICAgICAgICBpZiAoZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5tZCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGaWxlRnJvbU1hcHMob2xkUGF0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRGaWxlVG9NYXBzKGZpbGUpO1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgY29ycmVjdGx5IHJlLWFzc29jaWF0ZXMgdGFza3Mgd2l0aCB0aGUgbmV3IGZpbGUgcGF0aC5cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVRhc2tzRm9yRmlsZShmaWxlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGaWxlRnJvbUFzc2V0TWFwKG9sZFBhdGgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkRmlsZVRvQXNzZXRNYXAoZmlsZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgZGFzaGJvYXJkJ3MgZGF0YSBzb3VyY2UgLS0tXG4gICAgICAgICAgICBjb25zdCBvbGRGaWxlUGxhY2Vob2xkZXIgPSB7IHBhdGg6IG9sZFBhdGgsIHN0YXQ6IGZpbGUuc3RhdCB9O1xuICAgICAgICAgICAgdGhpcy5fcmVtb3ZlRmlsZUZyb21BbGxDcmVhdGVkTWFwKG9sZEZpbGVQbGFjZWhvbGRlcik7XG4gICAgICAgICAgICB0aGlzLl9hZGRGaWxlVG9BbGxDcmVhdGVkTWFwKGZpbGUpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5maWxlVG9IZWF0bWFwQ2FjaGUuaGFzKG9sZFBhdGgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hlcyA9IHRoaXMuZmlsZVRvSGVhdG1hcENhY2hlLmdldChvbGRQYXRoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGVUb0hlYXRtYXBDYWNoZS5kZWxldGUob2xkUGF0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxlVG9IZWF0bWFwQ2FjaGUuc2V0KGZpbGUucGF0aCwgbWF0Y2hlcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIGNvcnJlY3QgVUkgcmVmcmVzaFxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVUkoeyB1cGRhdGVUeXBlOiAnY3JlYXRpb24nLCBmaWxlOiBmaWxlIH0pO1xuICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQWRkIGEgZ2xvYmFsIGxpc3RlbmVyIHRvIGJsdXIgaW5wdXRzIHdoZW4gdGFwcGluZyBvdXRzaWRlLlxuICAgICAgICAvLyBVc2VzICdtb3VzZWRvd24nIGFuZCB0aGUgJ2NhcHR1cmU6IHRydWUnIHBoYXNlIGZvciBtb2JpbGUgcmVsaWFiaWxpdHkuXG4gICAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudCh0aGlzLmNvbnRhaW5lckVsLCAnbW91c2Vkb3duJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVFbCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG5cbiAgICAgICAgICAgIC8vIFNhZmVseSBjaGVjayBpZiB0aGUgY2xpY2tlZCB0YXJnZXQgaXMgYSB2YWxpZCBIVE1MIGVsZW1lbnQuXG4gICAgICAgICAgICAvLyBJZiBub3QsIGRvIG5vdGhpbmcuIFRoaXMgcHJldmVudHMgdGhlIGVycm9ycyB5b3Ugc2F3IGJlZm9yZS5cbiAgICAgICAgICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRGVmaW5lIHRoZSBsaXN0IG9mIGlucHV0cyB0aGlzIGJlaGF2aW9yIGFwcGxpZXMgdG8uXG4gICAgICAgICAgICBjb25zdCBmb2N1c2FibGVJbnB1dHMgPSBbXG4gICAgICAgICAgICAgICAgdGhpcy5ub3Rlc1NlYXJjaElucHV0RWwsXG4gICAgICAgICAgICAgICAgdGhpcy50YXNrc1NlYXJjaElucHV0RWwsXG4gICAgICAgICAgICAgICAgdGhpcy5hc3NldHNTZWFyY2hJbnB1dEVsLFxuICAgICAgICAgICAgICAgIHRoaXMuc2NyYXRjaHBhZFNlYXJjaElucHV0RWwsXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RlVGV4dGFyZWFcbiAgICAgICAgICAgIF0uZmlsdGVyKEJvb2xlYW4pOyAvLyBSZW1vdmVzIGFueSBub24tZXhpc3RlbnQgZWxlbWVudHNcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgb25lIG9mIG91ciBpbnB1dHMgY3VycmVudGx5IGhhcyBmb2N1cy5cbiAgICAgICAgICAgIGNvbnN0IGlzSW5wdXRGb2N1c2VkID0gZm9jdXNhYmxlSW5wdXRzLmluY2x1ZGVzKGFjdGl2ZUVsKTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHRhcCBvY2N1cnJlZCBvbiBvbmUgb2YgdGhlIGlucHV0cyB0aGVtc2VsdmVzLlxuICAgICAgICAgICAgY29uc3QgY2xpY2tlZE9uSW5wdXQgPSBmb2N1c2FibGVJbnB1dHMuc29tZShpbnB1dCA9PiBpbnB1dC5jb250YWlucyh0YXJnZXQpKTtcblxuICAgICAgICAgICAgLy8gSWYgYW4gaW5wdXQgaXMgZm9jdXNlZCwgYnV0IHRoZSB0YXAgd2FzICpvdXRzaWRlKiBvZiBpdCwgYmx1ciB0aGUgaW5wdXQuXG4gICAgICAgICAgICBpZiAoaXNJbnB1dEZvY3VzZWQgJiYgIWNsaWNrZWRPbklucHV0KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyByZS11c2VzIHRoZSBzYW1lIGhlbHBlciBmdW5jdGlvbiBmcm9tIHRoZSBzd2lwZSBmaXguXG4gICAgICAgICAgICAgICAgdGhpcy5ibHVyQWN0aXZlSW5wdXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdHJ1ZSk7IC8vICd0cnVlJyBlbmFibGVzIHRoZSBjYXB0dXJlIHBoYXNlLCB3aGljaCBpcyBjcnVjaWFsIGZvciByZWxpYWJpbGl0eS5cblxuXG4gICAgICAgIGNvbnN0IFBVTExfVEhSRVNIT0xEID0gNzA7IC8vIEhvdyBmYXIgdGhlIHVzZXIgbmVlZHMgdG8gcHVsbCBkb3duIHRvIHRyaWdnZXIgYSByZWZyZXNoXG5cbiAgICAgICAgY29uc3QgcmVzZXRQdWxsU3R5bGVzID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50YXNrUmVmcmVzaEluZGljYXRvci5yZW1vdmVDbGFzcygnaXMtcmVhZHknLCAnaXMtcHVsbGluZycsICdpcy1yZWZyZXNoaW5nJyk7XG4gICAgICAgICAgICB0aGlzLnRhc2tzQ29udGVudEVsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKDBweClgO1xuICAgICAgICAgICAgdGhpcy50YXNrUmVmcmVzaEluZGljYXRvci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWSgtNTBweCkgc2NhbGUoMC43KWA7XG4gICAgICAgICAgICBzZXRJY29uKHRoaXMudGFza1JlZnJlc2hJbmRpY2F0b3IsICdhcnJvdy1kb3duJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KHRoaXMudGFza3NDb250ZW50RWwsICd0b3VjaHN0YXJ0JywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRhc2tzQ29udGVudEVsLnNjcm9sbFRvcCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNUYXNrUHVsbGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrUHVsbFN0YXJ0WSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuXG4gICAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudCh0aGlzLnRhc2tzQ29udGVudEVsLCAndG91Y2htb3ZlJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1Rhc2tQdWxsaW5nKSByZXR1cm47XG5cbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRZID0gZS50b3VjaGVzWzBdLmNsaWVudFk7XG4gICAgICAgICAgICAvLyBXZSBvbmx5IGNhcmUgYWJvdXQgdGhlIGRvd253YXJkIHB1bGwgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnRcbiAgICAgICAgICAgIHRoaXMudGFza1B1bGxEaXN0YW5jZSA9IE1hdGgubWF4KDAsIGN1cnJlbnRZIC0gdGhpcy50YXNrUHVsbFN0YXJ0WSk7XG5cbiAgICAgICAgICAgIC8vIE9ubHkgaW50ZXJmZXJlIGlmIHRoZSBsaXN0IGlzIHNjcm9sbGVkIHRvIHRoZSB0b3AgQU5EIHRoZSB1c2VyIGlzIHB1bGxpbmcgZG93bi5cbiAgICAgICAgICAgIGlmICh0aGlzLnRhc2tzQ29udGVudEVsLnNjcm9sbFRvcCA9PT0gMCAmJiB0aGlzLnRhc2tQdWxsRGlzdGFuY2UgPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gUHJldmVudCB0aGUgYnJvd3NlciBmcm9tIHNjcm9sbGluZyB0aGUgcGFnZVxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHB1bGxSYXRpbyA9IE1hdGgubWluKHRoaXMudGFza1B1bGxEaXN0YW5jZSwgUFVMTF9USFJFU0hPTEQpO1xuICAgICAgICAgICAgICAgIHRoaXMudGFza3NDb250ZW50RWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVkoJHtwdWxsUmF0aW99cHgpYDtcblxuICAgICAgICAgICAgICAgIHRoaXMudGFza1JlZnJlc2hJbmRpY2F0b3IuYWRkQ2xhc3MoJ2lzLXB1bGxpbmcnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2tSZWZyZXNoSW5kaWNhdG9yLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKCR7cHVsbFJhdGlvIC0gNTB9cHgpIHNjYWxlKDAuNylgO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGFza1B1bGxEaXN0YW5jZSA+IFBVTExfVEhSRVNIT0xEKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFza1JlZnJlc2hJbmRpY2F0b3IuYWRkQ2xhc3MoJ2lzLXJlYWR5Jyk7XG4gICAgICAgICAgICAgICAgICAgIHNldEljb24odGhpcy50YXNrUmVmcmVzaEluZGljYXRvciwgJ2NoZWNrJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrUmVmcmVzaEluZGljYXRvci5yZW1vdmVDbGFzcygnaXMtcmVhZHknKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0SWNvbih0aGlzLnRhc2tSZWZyZXNoSW5kaWNhdG9yLCAnYXJyb3ctZG93bicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2UndmUgc3RhcnRlZCBzY3JvbGxpbmcgZG93biB0aGUgbGlzdCwgc3RvcCB0cmFja2luZyB0aGUgcHVsbFxuICAgICAgICAgICAgICAgIHRoaXMuaXNUYXNrUHVsbGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0sIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG5cbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RhdHVzQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN0YXR1cy1iYXInKTtcbiAgICAgICAgICAgIGlmIChzdGF0dXNCYXIgJiYgIVBsYXRmb3JtLmlzTW9iaWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0dXNCYXJPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRHluYW1pY1BhZGRpbmcoKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzQmFyT2JzZXJ2ZXIub2JzZXJ2ZShzdGF0dXNCYXIpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRHluYW1pY1BhZGRpbmcoKTsgLy8gUnVuIG9uY2Ugb24gaW5pdGlhbCBsb2FkXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KHRoaXMudGFza3NDb250ZW50RWwsICd0b3VjaGVuZCcsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNUYXNrUHVsbGluZykgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5pc1Rhc2tQdWxsaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnRhc2tQdWxsRGlzdGFuY2UgPiBQVUxMX1RIUkVTSE9MRCkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5ibHVyQWN0aXZlSW5wdXQoKTtcbiAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSByZWZyZXNoXG4gICAgICAgICAgICAgICAgdGhpcy50YXNrUmVmcmVzaEluZGljYXRvci5hZGRDbGFzcygnaXMtcmVmcmVzaGluZycsICdpcy1yZWFkeScpO1xuICAgICAgICAgICAgICAgIHNldEljb24odGhpcy50YXNrUmVmcmVzaEluZGljYXRvciwgJ2xvYWRlcicpO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wb3B1bGF0ZVRhc2tzKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBSZXNldCBzdHlsZXMgYWZ0ZXIgcmVmcmVzaCBpcyBjb21wbGV0ZVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXNldFB1bGxTdHlsZXMoKTtcbiAgICAgICAgICAgICAgICB9LCAzMDApOyAvLyBTbWFsbCBkZWxheSBmb3IgdXNlciB0byBzZWUgdGhlIGVuZCBvZiB0aGUgc3BpblxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFNuYXAgYmFjayBpZiBub3QgcHVsbGVkIGZhciBlbm91Z2hcbiAgICAgICAgICAgICAgICByZXNldFB1bGxTdHlsZXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy50YXNrUHVsbERpc3RhbmNlID0gMDtcblxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZURhaWx5UmVmcmVzaCgpO1xuXG5cblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZvcmNlcyBhIGZ1bGwgcmVidWlsZCBvZiBhbGwgZGF0YSBtYXBzIGFuZCBhIGNvbXBsZXRlIHJlLXJlbmRlciBvZiB0aGUgdmlldy5cbiAgICAgKiBVc2VmdWwgYWZ0ZXIgbWFqb3Igc2V0dGluZyBjaGFuZ2VzLlxuICAgICAqL1xuICAgIC8vIEluIGNsYXNzIFBlcmlvZE1vbnRoVmlld1xuICAgIGFzeW5jIHJlYnVpbGRBbmRSZW5kZXIoKSB7XG4gICAgICAgIC8vIC0tLSBFeGlzdGluZyBkYXRhIG1hcCByZWJ1aWxkcyAtLS1cbiAgICAgICAgYXdhaXQgdGhpcy5idWlsZENyZWF0ZWROb3Rlc01hcCgpO1xuICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkTW9kaWZpZWROb3Rlc01hcCgpO1xuICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkQXNzZXRDcmVhdGlvbk1hcCgpO1xuICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkQWxsQ3JlYXRlZE5vdGVzTWFwKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYnVpbGRUYXNrc0J5RGF0ZU1hcCgpO1xuICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkQWxsVGFza3NMaXN0KCk7XG4gICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaEljc0V2ZW50cygpO1xuICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkV2Vla2x5Tm90ZXNDYWNoZSgpO1xuICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkSGVhdG1hcEZpbGVDYWNoZSgpO1xuXG4gICAgICAgIC8vIC0tLSBDT1JSRUNURUQgTE9HSUMgLS0tXG4gICAgICAgIC8vIFJlLWxvYWQgdGhlIG5vdGUgZnJvbSB0aGUgZmlsZSBhbmQgcmUtcHJvY2VzcyBpdCBiYXNlZCBvbiB0aGUgbmV3IHNldHRpbmdcbiAgICAgICAgY29uc3QgZnVsbENvbnRlbnQgPSBhd2FpdCB0aGlzLmxvYWROb3RlKCk7XG4gICAgICAgIGNvbnN0IHsgZnJvbnRtYXR0ZXIsIGJvZHkgfSA9IHRoaXMuZ2V0U2NyYXRjaHBhZFBhcnRzKGZ1bGxDb250ZW50KTtcbiAgICAgICAgdGhpcy5zY3JhdGNocGFkRnJvbnRtYXR0ZXIgPSBmcm9udG1hdHRlcjtcbiAgICAgICAgdGhpcy5ub3RlVGV4dCA9IGJvZHk7XG4gICAgICAgIFxuICAgICAgICAvLyBOb3csIHRyaWdnZXIgdGhlIG1haW4gcmVuZGVyIGZ1bmN0aW9uLCB3aGljaCB3aWxsIHVzZSB0aGUgdXBkYXRlZCBjb250ZW50XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfVxuXG5cbiAgICBhc3luYyByZWJ1aWxkRGFzaGJvYXJkcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRhc2hib2FyZENvbnRlbnRFbCkge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBTYWZldHkgY2hlY2tcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmRhc2hib2FyZFZpZXdNb2RlID09PSAnY3JlYXRpb24nKSB7XG4gICAgICAgICAgICAvLyBDb3JyZWN0OiBGb3IgdGhlIGNyZWF0aW9uIGRhc2hib2FyZCwgdGhlIHBvcHVsYXRlIGZ1bmN0aW9uIGhhbmRsZXMgYm90aFxuICAgICAgICAgICAgLy8gZGF0YSBnYXRoZXJpbmcgYW5kIHJlbmRlcmluZyB0aGUgVUkuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBvcHVsYXRlQ3JlYXRpb25EYXNoYm9hcmQoKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gVGhpcyBoYW5kbGVzIHRoZSAndGFza3MnIGRhc2hib2FyZFxuICAgICAgICAgICAgLy8gQ29ycmVjdDogRm9yIHRoZSB0YXNrcyBkYXNoYm9hcmQsIHRoZXNlIGFyZSB0d28gc2VwYXJhdGUgc3RlcHMuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBvcHVsYXRlVGFza3NEYXNoYm9hcmQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgbW9yZSB0YXJnZXRlZCBVSSByZWZyZXNoIGJhc2VkIG9uIHdoaWNoIGZpbGUgd2FzIGNoYW5nZWQsXG4gICAgICogYXZvaWRpbmcgYSBmdWxsIHJlLXJlbmRlciB3aGVuIHBvc3NpYmxlLlxuICAgICAqIEBwYXJhbSB7VEZpbGV9IGZpbGUgVGhlIGZpbGUgdGhhdCB3YXMgY2hhbmdlZC5cbiAgICAgKi9cbiAgICBhc3luYyByZWZyZXNoVUkob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHsgdXBkYXRlVHlwZSwgZmlsZSA9IG51bGwgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgLy8gRGVib3VuY2UgY2FsZW5kYXIgcmVuZGVyIGFzIGl0J3MgdGhlIG1vc3QgY29tbW9uIHVwZGF0ZVxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jYWxlbmRhclJlZnJlc2hEZWJvdW5jZVRpbWVyKTtcbiAgICAgICAgdGhpcy5jYWxlbmRhclJlZnJlc2hEZWJvdW5jZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1ZlcnRpY2FsVmlldykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMzAwKTtcblxuICAgICAgICAvLyBJZiB0aGUgYWN0aXZlIHRhYiBpcyB0aGUgZGFzaGJvYXJkLCBoYW5kbGUgaXQgd2l0aCBzcGVjaWZpYyBsb2dpYy5cbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlVGFiID09PSAnZGFzaGJvYXJkJykge1xuICAgICAgICAgICAgLy8gSWYgdGhlIHVwZGF0ZSB3YXMgZm9yIFRBU0tTLCB3ZSBPTkxZIHJlZnJlc2ggdGhlIGRhc2hib2FyZFxuICAgICAgICAgICAgLy8gSUYgdGhlIHVzZXIgaXMgY3VycmVudGx5IGxvb2tpbmcgYXQgdGhlIFRBU0tTIHZpZXcuXG4gICAgICAgICAgICBpZiAodXBkYXRlVHlwZSA9PT0gJ3Rhc2tzJyAmJiB0aGlzLmRhc2hib2FyZFZpZXdNb2RlID09PSAndGFza3MnKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGFzaGJvYXJkUmVmcmVzaERlYm91bmNlVGltZXIpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGFzaGJvYXJkUmVmcmVzaERlYm91bmNlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZURhc2hib2FyZCgpO1xuICAgICAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB0aGUgdXBkYXRlIHdhcyBmb3IgQ1JFQVRJT04gKGUuZy4sIGEgbmV3IGZpbGUgd2FzIG1hZGUpLFxuICAgICAgICAgICAgLy8gd2UgT05MWSByZWZyZXNoIGlmIHRoZSB1c2VyIGlzIGxvb2tpbmcgYXQgdGhlIENSRUFUSU9OIHZpZXcuXG4gICAgICAgICAgICBlbHNlIGlmICh1cGRhdGVUeXBlID09PSAnY3JlYXRpb24nICYmIHRoaXMuZGFzaGJvYXJkVmlld01vZGUgPT09ICdjcmVhdGlvbicpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5kYXNoYm9hcmRSZWZyZXNoRGVib3VuY2VUaW1lcik7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXNoYm9hcmRSZWZyZXNoRGVib3VuY2VUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcHVsYXRlRGFzaGJvYXJkKCk7XG4gICAgICAgICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZvciBhIGdlbmVyYWwgdXBkYXRlIChmcm9tIHNldHRpbmdzLCBldGMuKSwgd2UgcmVmcmVzaCB0aGUgdmlzaWJsZSBkYXNoYm9hcmQuXG4gICAgICAgICAgICBlbHNlIGlmICh1cGRhdGVUeXBlID09PSAnZ2VuZXJhbCcpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5kYXNoYm9hcmRSZWZyZXNoRGVib3VuY2VUaW1lcik7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXNoYm9hcmRSZWZyZXNoRGVib3VuY2VUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcHVsYXRlRGFzaGJvYXJkKCk7XG4gICAgICAgICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElNUE9SVEFOVDogSWYgbm9uZSBvZiB0aGVzZSBjb25kaXRpb25zIGFyZSBtZXQsIHdlIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIHdoYXQgc3RvcHMgdGhlIGNyZWF0aW9uIGhlYXRtYXAgZnJvbSByZWZyZXNoaW5nIG9uIGEgdGFzayBjaGFuZ2UuXG4gICAgICAgICAgICByZXR1cm47IC8vIEV4aXQgdG8gcHJldmVudCBmYWxsaW5nIHRocm91Z2ggdG8gdGhlIGdlbmVyYWwgbG9naWMgYmVsb3cuXG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0aGlzLmFjdGl2ZVRhYikge1xuICAgICAgICAgICAgY2FzZSAnc2NyYXRjaCc6XG4gICAgICAgICAgICAgICAgaWYgKGZpbGU/LnBhdGggPT09IHRoaXMucGx1Z2luLnNldHRpbmdzLmZpeGVkTm90ZUZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmUtbG9hZCB0aGUgZnVsbCBjb250ZW50IGZyb20gdGhlIGZpbGVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnVsbENvbnRlbnQgPSBhd2FpdCB0aGlzLmxvYWROb3RlKCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBSZS1wYXJzZSB0aGUgY29udGVudCB0byBzZXBhcmF0ZSBmcm9udG1hdHRlciBhbmQgYm9keVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGZyb250bWF0dGVyLCBib2R5IH0gPSB0aGlzLmdldFNjcmF0Y2hwYWRQYXJ0cyhmdWxsQ29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHN0b3JlZCBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NyYXRjaHBhZEZyb250bWF0dGVyID0gZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90ZVRleHQgPSBib2R5O1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgdXBkYXRlIHRoZSB0ZXh0YXJlYSBpZiBpdCBleGlzdHMgYW5kIGl0cyBjb250ZW50IGhhcyBhY3R1YWxseSBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5vdGVUZXh0YXJlYSAmJiB0aGlzLm5vdGVUZXh0YXJlYS52YWx1ZSAhPT0gdGhpcy5ub3RlVGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJlc2VydmUgdGhlIHVzZXIncyBjdXJzb3IgcG9zaXRpb24gZHVyaW5nIHRoZSB1cGRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnNvclBvcyA9IHRoaXMubm90ZVRleHRhcmVhLnNlbGVjdGlvblN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RlVGV4dGFyZWEudmFsdWUgPSB0aGlzLm5vdGVUZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RlVGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQgPSB0aGlzLm5vdGVUZXh0YXJlYS5zZWxlY3Rpb25FbmQgPSBjdXJzb3JQb3M7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdub3Rlcyc6XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubm90ZXNSZWZyZXNoRGVib3VuY2VUaW1lcik7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3Rlc1JlZnJlc2hEZWJvdW5jZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnBvcHVsYXRlTm90ZXMoKSwgMjUwKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3Rhc2tzJzpcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50YXNrUmVmcmVzaERlYm91bmNlVGltZXIpO1xuICAgICAgICAgICAgICAgIHRoaXMudGFza1JlZnJlc2hEZWJvdW5jZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnBvcHVsYXRlVGFza3MoKSwgMjUwKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2Fzc2V0cyc6XG4gICAgICAgICAgICAgICAgdGhpcy5pc1VudXNlZEFzc2V0Q2FjaGVWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdWxhdGVBc3NldHMoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgYXN5bmMgdXBkYXRlVGFza3NGb3JGaWxlKGZpbGUpIHtcbiAgICAgICAgaWYgKCFmaWxlIHx8ICEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB8fCAhZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5tZCcpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAtLS0gMS4gQ0FQVFVSRSBJTklUSUFMIFNUQVRFIC0tLVxuICAgICAgICBjb25zdCBpbml0aWFsVGFza3NJbkZpbGUgPSB0aGlzLmFsbFRhc2tzLmZpbHRlcih0YXNrID0+IHRhc2suZmlsZS5wYXRoID09PSBmaWxlLnBhdGgpO1xuICAgICAgICBjb25zdCBpbml0aWFsVGFza0NvdW50ID0gaW5pdGlhbFRhc2tzSW5GaWxlLmxlbmd0aDtcbiAgICAgICAgLy8gQ3JlYXRlIGEgXCJmaW5nZXJwcmludFwiIG9mIHRoZSBvcmlnaW5hbCB0YXNrcycgY29udGVudCBhbmQgc3RhdHVzLlxuICAgICAgICBjb25zdCBpbml0aWFsVGFza0ZpbmdlcnByaW50ID0gSlNPTi5zdHJpbmdpZnkoaW5pdGlhbFRhc2tzSW5GaWxlLm1hcCh0ID0+ICh7IHRleHQ6IHQudGV4dCwgc3RhdHVzOiB0LnN0YXR1cyB9KSkpO1xuXG4gICAgICAgIC8vIC0tLSAyLiBJTkNSRU1FTlRBTExZIFVQREFURSBEQVRBIE1BUFMgLS0tXG4gICAgICAgIHRoaXMuYWxsVGFza3MgPSB0aGlzLmFsbFRhc2tzLmZpbHRlcih0YXNrID0+IHRhc2suZmlsZS5wYXRoICE9PSBmaWxlLnBhdGgpO1xuICAgICAgICBjb25zdCBvbGREYXRlS2V5cyA9IHRoaXMuZmlsZVRvVGFza0RhdGVzLmdldChmaWxlLnBhdGgpIHx8IG5ldyBTZXQoKTtcbiAgICAgICAgZm9yIChjb25zdCBkYXRlS2V5IG9mIG9sZERhdGVLZXlzKSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrc09uRGF0ZSA9IHRoaXMudGFza3NCeURhdGUuZ2V0KGRhdGVLZXkpO1xuICAgICAgICAgICAgaWYgKHRhc2tzT25EYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nVGFza3MgPSB0YXNrc09uRGF0ZS5maWx0ZXIodGFzayA9PiB0YXNrLmZpbGUucGF0aCAhPT0gZmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICBpZiAocmVtYWluaW5nVGFza3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tzQnlEYXRlLnNldChkYXRlS2V5LCByZW1haW5pbmdUYXNrcyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrc0J5RGF0ZS5kZWxldGUoZGF0ZUtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmlsZVRvVGFza0RhdGVzLmRlbGV0ZShmaWxlLnBhdGgpO1xuXG4gICAgICAgIC8vIC0tLSAzLiBSRS1QUk9DRVNTIEFORCBDQVBUVVJFIEZJTkFMIFNUQVRFIC0tLVxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0lnbm9yZUZvbGRlcnMuc29tZShmb2xkZXIgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBpbml0aWFsVGFza0NvdW50ID4gMDsgLy8gQSBjaGFuZ2Ugb2NjdXJyZWQgaWYgdGFza3Mgd2VyZSByZW1vdmVkLlxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQoZmlsZSk7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2tzID0gcGFyc2VUYXNrc0Zyb21GaWxlKGZpbGUsIGNvbnRlbnQpO1xuICAgICAgICBjb25zdCBmaW5hbFRhc2tDb3VudCA9IG5ld1Rhc2tzLmxlbmd0aDtcblxuICAgICAgICAvLyBDcmVhdGUgYSBcImZpbmdlcnByaW50XCIgb2YgdGhlIG5ldyB0YXNrcycgY29udGVudCBhbmQgc3RhdHVzLlxuICAgICAgICBjb25zdCBmaW5hbFRhc2tGaW5nZXJwcmludCA9IEpTT04uc3RyaW5naWZ5KG5ld1Rhc2tzLm1hcCh0ID0+ICh7IHRleHQ6IHQudGV4dCwgc3RhdHVzOiB0LnN0YXR1cyB9KSkpO1xuXG4gICAgICAgIGlmIChmaW5hbFRhc2tDb3VudCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuYWxsVGFza3MucHVzaCguLi5uZXdUYXNrcyk7XG4gICAgICAgICAgICBjb25zdCBuZXdEYXRlS2V5cyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdGFzayBvZiBuZXdUYXNrcykge1xuICAgICAgICAgICAgICAgIGlmICh0YXNrLnN0YXR1cy50b0xvd2VyQ2FzZSgpICE9PSAneCcgJiYgdGFzay5kdWVEYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVLZXkgPSBtb21lbnQodGFzay5kdWVEYXRlKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMudGFza3NCeURhdGUuaGFzKGRhdGVLZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tzQnlEYXRlLnNldChkYXRlS2V5LCBbXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrc0J5RGF0ZS5nZXQoZGF0ZUtleSkucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3RGF0ZUtleXMuYWRkKGRhdGVLZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZXdEYXRlS2V5cy5zaXplID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsZVRvVGFza0RhdGVzLnNldChmaWxlLnBhdGgsIG5ld0RhdGVLZXlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLSA0LiBSRVRVUk4gVFJVRSBJRiAqQU5ZVEhJTkcqIE1FQU5JTkdGVUwgQ0hBTkdFRCAtLS1cbiAgICAgICAgLy8gQSBjaGFuZ2UgaXMgZWl0aGVyIGEgZGlmZmVyZW50IG51bWJlciBvZiB0YXNrcyBPUiBkaWZmZXJlbnQgY29udGVudC9zdGF0dXMuXG4gICAgICAgIHJldHVybiBpbml0aWFsVGFza0NvdW50ICE9PSBmaW5hbFRhc2tDb3VudCB8fCBpbml0aWFsVGFza0ZpbmdlcnByaW50ICE9PSBmaW5hbFRhc2tGaW5nZXJwcmludDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBoaWdobGlnaHRlciBkaXYgd2l0aCA8bWFyaz4gdGFncyB0byBzaG93IHNlYXJjaCB0ZXJtIG1hdGNoZXMuXG4gICAgICovXG4gICAgdXBkYXRlU2NyYXRjaHBhZEhpZ2hsaWdodHMoKSB7XG4gICAgICAgIGlmICghdGhpcy5zY3JhdGNoSGlnaGxpZ2h0ZXJFbCB8fCAhdGhpcy5ub3RlVGV4dGFyZWEpIHJldHVybjtcblxuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5ub3RlVGV4dGFyZWEudmFsdWU7XG4gICAgICAgIGNvbnN0IHRlcm0gPSB0aGlzLnNjcmF0Y2hwYWRTZWFyY2hUZXJtO1xuXG4gICAgICAgIGlmICghdGVybSkge1xuICAgICAgICAgICAgdGhpcy5zY3JhdGNoSGlnaGxpZ2h0ZXJFbC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNhbml0aXplIHRleHQgdG8gcHJldmVudCBIVE1MIGluamVjdGlvbiBiZWZvcmUgaW5zZXJ0aW5nIGl0IGludG8gdGhlIGhpZ2hsaWdodGVyLlxuICAgICAgICBjb25zdCBzYW5pdGl6ZWRUZXh0ID0gdGV4dFxuICAgICAgICAgICAgLnJlcGxhY2UoLyYvZywgXCImYW1wO1wiKVxuICAgICAgICAgICAgLnJlcGxhY2UoLzwvZywgXCImbHQ7XCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvPi9nLCBcIiZndDtcIik7XG5cbiAgICAgICAgY29uc3QgZXNjYXBlZFRlcm0gPSB0ZXJtLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCAnXFxcXCQmJyk7XG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChlc2NhcGVkVGVybSwgJ2dpJyk7XG5cbiAgICAgICAgY29uc3QgaGlnaGxpZ2h0ZWRIdG1sID0gc2FuaXRpemVkVGV4dC5yZXBsYWNlKHJlZ2V4LCAobWF0Y2gpID0+IGA8bWFyaz4ke21hdGNofTwvbWFyaz5gKTtcbiAgICAgICAgdGhpcy5zY3JhdGNoSGlnaGxpZ2h0ZXJFbC5pbm5lckhUTUwgPSBoaWdobGlnaHRlZEh0bWw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ291bnRzIGFuZCBkaXNwbGF5cyB0aGUgbnVtYmVyIG9mIHNlYXJjaCBtYXRjaGVzIGluIHRoZSBzY3JhdGNocGFkLlxuICAgICAqL1xuICAgIHVwZGF0ZVNjcmF0Y2hwYWRTZWFyY2hDb3VudCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNjcmF0Y2hwYWRTZWFyY2hDb3VudEVsIHx8ICF0aGlzLm5vdGVUZXh0YXJlYSkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHRlcm0gPSB0aGlzLnNjcmF0Y2hwYWRTZWFyY2hUZXJtO1xuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5ub3RlVGV4dGFyZWEudmFsdWU7XG4gICAgICAgIGxldCBtYXRjaENvdW50ID0gMDtcblxuICAgICAgICBpZiAodGVybSkge1xuICAgICAgICAgICAgY29uc3QgZXNjYXBlZFRlcm0gPSB0ZXJtLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCAnXFxcXCQmJyk7XG4gICAgICAgICAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoZXNjYXBlZFRlcm0sICdnaScpO1xuICAgICAgICAgICAgbWF0Y2hDb3VudCA9ICh0ZXh0Lm1hdGNoKHJlZ2V4KSB8fCBbXSkubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zY3JhdGNocGFkU2VhcmNoQ291bnRFbC5zZXRUZXh0KGAoJHttYXRjaENvdW50fSlgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYSBmaWxlIHBhdGggc2hvdWxkIGJlIGlnbm9yZWQgYmFzZWQgb24gdXNlciBzZXR0aW5ncy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZVBhdGggVGhlIHBhdGggb2YgdGhlIGZpbGUgdG8gY2hlY2suXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNldHRpbmdLZXkgVGhlIGtleSBmb3IgdGhlIGlnbm9yZSBsaXN0IGluIHRoZSBwbHVnaW4gc2V0dGluZ3MuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHBhdGggc2hvdWxkIGJlIGlnbm9yZWQuXG4gICAgICovXG4gICAgaXNQYXRoSWdub3JlZChmaWxlUGF0aCwgc2V0dGluZ0tleSA9ICdvdGhlck5vdGVJZ25vcmVGb2xkZXJzJykge1xuICAgICAgICAvLyBOb3JtYWxpemUgZm9sZGVyIHBhdGhzIHRvIGVuZCB3aXRoIGEgc2xhc2ggZm9yIGNvbnNpc3RlbnQgbWF0Y2hpbmcuXG4gICAgICAgIGNvbnN0IGlnbm9yZUZvbGRlcnMgPSAodGhpcy5wbHVnaW4uc2V0dGluZ3Nbc2V0dGluZ0tleV0gfHwgW10pLm1hcChmID0+IGYudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLycpID8gZi50b0xvd2VyQ2FzZSgpIDogZi50b0xvd2VyQ2FzZSgpICsgJy8nKTtcbiAgICAgICAgY29uc3QgZGFpbHlOb3RlRm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGFpbHlOb3Rlc0ZvbGRlcjtcbiAgICAgICAgY29uc3QgZmlsZVBhdGhMb3dlciA9IGZpbGVQYXRoLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgLy8gQWx3YXlzIGlnbm9yZSBmaWxlcyBpbnNpZGUgdGhlIGRhaWx5IG5vdGVzIGZvbGRlciBmb3IgXCJvdGhlciBub3RlXCIgY2FsY3VsYXRpb25zLlxuICAgICAgICBpZiAoZGFpbHlOb3RlRm9sZGVyICYmIGZpbGVQYXRoTG93ZXIuc3RhcnRzV2l0aChkYWlseU5vdGVGb2xkZXIudG9Mb3dlckNhc2UoKSArIFwiL1wiKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlnbm9yZUZvbGRlcnMuc29tZShmb2xkZXIgPT4gZm9sZGVyICYmIGZpbGVQYXRoTG93ZXIuc3RhcnRzV2l0aChmb2xkZXIpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgZmlsZSB0byB0aGUgY3JlYXRlZE5vdGVzTWFwIGFuZCBtb2RpZmllZE5vdGVzTWFwLlxuICAgICAqIEBwYXJhbSB7VEZpbGV9IGZpbGUgVGhlIGZpbGUgdG8gYWRkLlxuICAgICAqL1xuICAgIGFkZEZpbGVUb01hcHMoZmlsZSkge1xuICAgICAgICBpZiAodGhpcy5pc1BhdGhJZ25vcmVkKGZpbGUucGF0aCkpIHJldHVybjtcblxuICAgICAgICAvLyBBZGQgdG8gY3JlYXRlZE5vdGVzTWFwLlxuICAgICAgICBjb25zdCBjZGF0ZSA9IG5ldyBEYXRlKGZpbGUuc3RhdC5jdGltZSk7XG4gICAgICAgIGNvbnN0IGNkYXRlS2V5ID0gbW9tZW50KGNkYXRlKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xuICAgICAgICBpZiAoIXRoaXMuY3JlYXRlZE5vdGVzTWFwLmhhcyhjZGF0ZUtleSkpIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlZE5vdGVzTWFwLnNldChjZGF0ZUtleSwgW10pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRGaWxlcyA9IHRoaXMuY3JlYXRlZE5vdGVzTWFwLmdldChjZGF0ZUtleSk7XG4gICAgICAgIGlmICghY3JlYXRlZEZpbGVzLnNvbWUoZiA9PiBmLnBhdGggPT09IGZpbGUucGF0aCkpIHtcbiAgICAgICAgICAgIGNyZWF0ZWRGaWxlcy5wdXNoKGZpbGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIHRvIG1vZGlmaWVkTm90ZXNNYXAgaWYgbW9kaWZpZWQgZGF0ZSBpcyBvbiBhIGRpZmZlcmVudCBkYXkgdGhhbiBjcmVhdGlvbiBkYXRlLlxuICAgICAgICBjb25zdCBtZGF0ZSA9IG5ldyBEYXRlKGZpbGUuc3RhdC5tdGltZSk7XG4gICAgICAgIGlmICghaXNTYW1lRGF5KGNkYXRlLCBtZGF0ZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IG1kYXRlS2V5ID0gbW9tZW50KG1kYXRlKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLm1vZGlmaWVkTm90ZXNNYXAuaGFzKG1kYXRlS2V5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMubW9kaWZpZWROb3Rlc01hcC5zZXQobWRhdGVLZXksIFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1vZGlmaWVkRmlsZXMgPSB0aGlzLm1vZGlmaWVkTm90ZXNNYXAuZ2V0KG1kYXRlS2V5KTtcbiAgICAgICAgICAgIGlmICghbW9kaWZpZWRGaWxlcy5zb21lKGYgPT4gZi5wYXRoID09PSBmaWxlLnBhdGgpKSB7XG4gICAgICAgICAgICAgICAgbW9kaWZpZWRGaWxlcy5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGZpbGUgZnJvbSBhbGwgaW50ZXJuYWwgbm90ZSBkYXRhIG1hcHMgYnkgaXRzIHBhdGguXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGVQYXRoIFRoZSBwYXRoIG9mIHRoZSBmaWxlIHRvIHJlbW92ZS5cbiAgICAgKi9cbiAgICByZW1vdmVGaWxlRnJvbU1hcHMoZmlsZVBhdGgpIHtcbiAgICAgICAgLy8gSXRlcmF0ZSB0aHJvdWdoIG1hcHMgYW5kIHJlbW92ZSBhbnkgZW50cmllcyB3aXRoIHRoZSBnaXZlbiBmaWxlIHBhdGguXG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgZmlsZXNdIG9mIHRoaXMuY3JlYXRlZE5vdGVzTWFwLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlZEZpbGVzID0gZmlsZXMuZmlsdGVyKGYgPT4gZi5wYXRoICE9PSBmaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAodXBkYXRlZEZpbGVzLmxlbmd0aCA8IGZpbGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICh1cGRhdGVkRmlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlZE5vdGVzTWFwLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlZE5vdGVzTWFwLnNldChrZXksIHVwZGF0ZWRGaWxlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgZmlsZXNdIG9mIHRoaXMubW9kaWZpZWROb3Rlc01hcC5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRGaWxlcyA9IGZpbGVzLmZpbHRlcihmID0+IGYucGF0aCAhPT0gZmlsZVBhdGgpO1xuICAgICAgICAgICAgaWYgKHVwZGF0ZWRGaWxlcy5sZW5ndGggPCBmaWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAodXBkYXRlZEZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGlmaWVkTm90ZXNNYXAuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RpZmllZE5vdGVzTWFwLnNldChrZXksIHVwZGF0ZWRGaWxlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRm9ybWF0cyBhIGZpbGUgc2l6ZSBpbiBieXRlcyBpbnRvIGEgaHVtYW4tcmVhZGFibGUgc3RyaW5nIChCLCBLQiwgTUIsIEdCKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYnl0ZXMgVGhlIGZpbGUgc2l6ZSBpbiBieXRlcy5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIGZpbGUgc2l6ZS5cbiAgICAgKi9cbiAgICBmb3JtYXRGaWxlU2l6ZShieXRlcykge1xuICAgICAgICBpZiAoYnl0ZXMgPT09IDApIHJldHVybiAnMCBCJztcbiAgICAgICAgY29uc3QgayA9IDEwMjQ7XG4gICAgICAgIGNvbnN0IHNpemVzID0gWydCJywgJ0tCJywgJ01CJywgJ0dCJ107XG4gICAgICAgIGNvbnN0IGkgPSBNYXRoLmZsb29yKE1hdGgubG9nKGJ5dGVzKSAvIE1hdGgubG9nKGspKTtcbiAgICAgICAgY29uc3QgZml4ZWQgPSBpIDwgMiA/IDAgOiAxO1xuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCgoYnl0ZXMgLyBNYXRoLnBvdyhrLCBpKSkudG9GaXhlZChmaXhlZCkpICsgJyAnICsgc2l6ZXNbaV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyB0YXNrIHRvIHRoZSBzY3JhdGNocGFkIG5vdGUgdXNpbmcgdGhlIGZvcm1hdCBkZWZpbmVkIGluIHNldHRpbmdzLlxuICAgICAqL1xuICAgIGFzeW5jIGFkZE5ld1Rhc2tUb1NjcmF0Y2hwYWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzU2NyYXRjaHBhZFByZXZpZXcgfHwgIXRoaXMubm90ZVRleHRhcmVhKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0YXNrRm9ybWF0U2V0dGluZyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQ/LnRhc2tGb3JtYXQgfHwgXCItIFsgXSBcIjtcbiAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gdGhpcy5wcm9jZXNzRGF0ZVBsYWNlaG9sZGVycyh0YXNrRm9ybWF0U2V0dGluZyk7XG4gICAgICAgIGNvbnN0IHRleHRUb0luc2VydCA9IHByb2Nlc3NlZC50ZXh0O1xuICAgICAgICBjb25zdCB0YSA9IHRoaXMubm90ZVRleHRhcmVhO1xuXG4gICAgICAgIC8vIDEuIENhcHR1cmUgY3VycmVudCBzdGF0ZVxuICAgICAgICBjb25zdCBzZWxlY3Rpb25TdGFydCA9IHRhLnNlbGVjdGlvblN0YXJ0O1xuICAgICAgICBjb25zdCB0ZXh0QmVmb3JlQ3Vyc29yID0gdGEudmFsdWUuc3Vic3RyaW5nKDAsIHNlbGVjdGlvblN0YXJ0KTtcbiAgICAgICAgY29uc3QgdGV4dEFmdGVyQ3Vyc29yID0gdGEudmFsdWUuc3Vic3RyaW5nKHNlbGVjdGlvblN0YXJ0KTtcblxuICAgICAgICAvLyAyLiBQcmVwYXJlIG5ldyB0ZXh0IGFuZCB1cGRhdGUgdGhlIHZhbHVlXG4gICAgICAgIGNvbnN0IG5lZWRzTGVhZGluZ05ld2xpbmUgPSB0ZXh0QmVmb3JlQ3Vyc29yLmxlbmd0aCA+IDAgJiYgIXRleHRCZWZvcmVDdXJzb3IuZW5kc1dpdGgoXCJcXG5cIik7XG4gICAgICAgIGNvbnN0IGZpbmFsSW5zZXJ0aW9uVGV4dCA9IG5lZWRzTGVhZGluZ05ld2xpbmUgPyBcIlxcblwiICsgdGV4dFRvSW5zZXJ0IDogdGV4dFRvSW5zZXJ0O1xuICAgICAgICBjb25zdCBuZXdUZXh0ID0gdGV4dEJlZm9yZUN1cnNvciArIGZpbmFsSW5zZXJ0aW9uVGV4dCArIHRleHRBZnRlckN1cnNvcjtcbiAgICAgICAgdGEudmFsdWUgPSBuZXdUZXh0O1xuXG4gICAgICAgIC8vIDMuIFNldCB0aGUgbmV3IGN1cnNvciBwb3NpdGlvblxuICAgICAgICBjb25zdCBuZXdDdXJzb3JQb3NpdGlvbiA9IHNlbGVjdGlvblN0YXJ0ICsgZmluYWxJbnNlcnRpb25UZXh0Lmxlbmd0aCAtICh0ZXh0VG9JbnNlcnQubGVuZ3RoIC0gcHJvY2Vzc2VkLmN1cnNvck9mZnNldCk7XG4gICAgICAgIHRhLnNldFNlbGVjdGlvblJhbmdlKG5ld0N1cnNvclBvc2l0aW9uLCBuZXdDdXJzb3JQb3NpdGlvbik7XG5cbiAgICAgICAgLy8gNC4gR2l2ZSB0aGUgdGV4dGFyZWEgZm9jdXNcbiAgICAgICAgdGEuZm9jdXMoKTtcblxuICAgICAgICAvLyA1LiBTYXZlIHRoZSBuZXcgY29udGVudCBpbW1lZGlhdGVseVxuICAgICAgICB0aGlzLm5vdGVUZXh0ID0gbmV3VGV4dDtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRml4ZWROb3RlKHRoaXMubm90ZVRleHQpO1xuICAgICAgICB0aGlzLnVwZGF0ZVNjcmF0Y2hwYWRTZWFyY2hDb3VudCgpO1xuICAgICAgICB0aGlzLnVwZGF0ZVNjcmF0Y2hwYWRIaWdobGlnaHRzKCk7XG5cbiAgICAgICAgLy8gNi4gVXNlIGFuIGF3YWl0ZWQgUHJvbWlzZSB3aXRoIGEgbG9uZ2VyIGRlbGF5IHRvIGVuc3VyZSB0aGlzIHJ1bnMgTEFTVC5cbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwKSk7IC8vIDUwbXMgZGVsYXlcblxuICAgICAgICBjb25zdCBsaW5lSGVpZ2h0ID0gcGFyc2VGbG9hdChnZXRDb21wdXRlZFN0eWxlKHRhKS5saW5lSGVpZ2h0KSB8fCAyMDtcbiAgICAgICAgY29uc3QgbGluZXNUb0NhcmV0ID0gdGEudmFsdWUuc2xpY2UoMCwgbmV3Q3Vyc29yUG9zaXRpb24pLnNwbGl0KFwiXFxuXCIpLmxlbmd0aDtcbiAgICAgICAgY29uc3QgdGFyZ2V0U2Nyb2xsVG9wID0gKGxpbmVzVG9DYXJldCAtIDEpICogbGluZUhlaWdodDtcblxuICAgICAgICAvLyBEaXJlY3RseSBzZXQgdGhlIHNjcm9sbCBwb3NpdGlvbiBhcyB0aGUgZmluYWwgYWN0aW9uLlxuICAgICAgICB0YS5zY3JvbGxUb3AgPSB0YXJnZXRTY3JvbGxUb3A7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBTY2FucyBhbGwgTWFya2Rvd24gZmlsZXMgaW4gdGhlIHZhdWx0IHRvIGJ1aWxkIHRoZSBpbml0aWFsIGBjcmVhdGVkTm90ZXNNYXBgLlxuICAgICAqL1xuICAgIGFzeW5jIGJ1aWxkQ3JlYXRlZE5vdGVzTWFwKCkge1xuICAgICAgICB0aGlzLmNyZWF0ZWROb3Rlc01hcC5jbGVhcigpO1xuICAgICAgICBjb25zdCBhbGxOb3RlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGFsbE5vdGVzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1BhdGhJZ25vcmVkKGZpbGUucGF0aCkpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBjb25zdCBjZGF0ZSA9IG5ldyBEYXRlKGZpbGUuc3RhdC5jdGltZSk7XG4gICAgICAgICAgICBjb25zdCBkYXRlS2V5ID0gbW9tZW50KGNkYXRlKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNyZWF0ZWROb3Rlc01hcC5oYXMoZGF0ZUtleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZWROb3Rlc01hcC5zZXQoZGF0ZUtleSwgW10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jcmVhdGVkTm90ZXNNYXAuZ2V0KGRhdGVLZXkpLnB1c2goZmlsZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTY2FucyBhbGwgTWFya2Rvd24gZmlsZXMgaW4gdGhlIHZhdWx0IHRvIGJ1aWxkIHRoZSBpbml0aWFsIGBtb2RpZmllZE5vdGVzTWFwYC5cbiAgICAgKi9cbiAgICBhc3luYyBidWlsZE1vZGlmaWVkTm90ZXNNYXAoKSB7XG4gICAgICAgIHRoaXMubW9kaWZpZWROb3Rlc01hcC5jbGVhcigpO1xuICAgICAgICBjb25zdCBhbGxOb3RlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGFsbE5vdGVzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1BhdGhJZ25vcmVkKGZpbGUucGF0aCkpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBjb25zdCBjZGF0ZSA9IG5ldyBEYXRlKGZpbGUuc3RhdC5jdGltZSk7XG4gICAgICAgICAgICBjb25zdCBtZGF0ZSA9IG5ldyBEYXRlKGZpbGUuc3RhdC5tdGltZSk7XG4gICAgICAgICAgICBpZiAoIWlzU2FtZURheShjZGF0ZSwgbWRhdGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZUtleSA9IG1vbWVudChtZGF0ZSkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubW9kaWZpZWROb3Rlc01hcC5oYXMoZGF0ZUtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RpZmllZE5vdGVzTWFwLnNldChkYXRlS2V5LCBbXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5tb2RpZmllZE5vdGVzTWFwLmdldChkYXRlS2V5KS5zb21lKGYgPT4gZi5wYXRoID09PSBmaWxlLnBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9kaWZpZWROb3Rlc01hcC5nZXQoZGF0ZUtleSkucHVzaChmaWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTY2FucyBhbGwgbm9uLU1hcmtkb3duIGZpbGVzIGluIHRoZSB2YXVsdCB0byBidWlsZCB0aGUgYGFzc2V0Q3JlYXRpb25NYXBgLlxuICAgICAqL1xuICAgIGFzeW5jIGJ1aWxkQXNzZXRDcmVhdGlvbk1hcCgpIHtcbiAgICAgICAgdGhpcy5hc3NldENyZWF0aW9uTWFwLmNsZWFyKCk7XG4gICAgICAgIGNvbnN0IGFsbEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKTtcbiAgICAgICAgY29uc3QgaWdub3JlRm9sZGVycyA9ICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hc3NldElnbm9yZUZvbGRlcnMgfHwgW10pLm1hcChmID0+IGYudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLycpID8gZi50b0xvd2VyQ2FzZSgpIDogZi50b0xvd2VyQ2FzZSgpICsgJy8nKTtcbiAgICAgICAgY29uc3QgaGlkZGVuVHlwZXMgPSAodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZGVuQXNzZXRUeXBlcyB8fCBcIlwiKVxuICAgICAgICAgICAgLnNwbGl0KCcsJylcbiAgICAgICAgICAgIC5tYXAoZXh0ID0+IGV4dC50cmltKCkudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgICAgIC5maWx0ZXIoZXh0ID0+IGV4dC5sZW5ndGggPiAwKTtcblxuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgYWxsRmlsZXMpIHtcbiAgICAgICAgICAgIGlmIChmaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLm1kJykpIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKGhpZGRlblR5cGVzLmluY2x1ZGVzKGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkpKSBjb250aW51ZTsgLy8gRmlsdGVyIGJ5IGV4dGVuc2lvblxuXG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aExvd2VyID0gZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBpZiAoaWdub3JlRm9sZGVycy5zb21lKGZvbGRlciA9PiBmb2xkZXIgJiYgZmlsZVBhdGhMb3dlci5zdGFydHNXaXRoKGZvbGRlcikpKSBjb250aW51ZTtcblxuICAgICAgICAgICAgY29uc3QgY2RhdGUgPSBuZXcgRGF0ZShmaWxlLnN0YXQuY3RpbWUpO1xuICAgICAgICAgICAgY29uc3QgZGF0ZUtleSA9IG1vbWVudChjZGF0ZSkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5hc3NldENyZWF0aW9uTWFwLmhhcyhkYXRlS2V5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXNzZXRDcmVhdGlvbk1hcC5zZXQoZGF0ZUtleSwgW10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hc3NldENyZWF0aW9uTWFwLmdldChkYXRlS2V5KS5wdXNoKGZpbGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZHMgYWxsIGFzc2V0IGZpbGVzIGluIHRoZSB2YXVsdCB0aGF0IGFyZSBub3QgbGlua2VkIHRvIGZyb20gYW55IE1hcmtkb3duIGZpbGUuXG4gICAgICogQHJldHVybnMge1Byb21pc2U8U2V0PHN0cmluZz4+fSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIFNldCBvZiB1bnVzZWQgYXNzZXQgcGF0aHMuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0VW51c2VkQXNzZXRQYXRocygpIHtcbiAgICAgICAgY29uc3QgYWxsTWFya2Rvd25GaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgY29uc3QgcmVmZXJlbmNlZEFzc2V0UGF0aHMgPSBuZXcgU2V0KCk7XG5cbiAgICAgICAgZm9yIChjb25zdCBtZEZpbGUgb2YgYWxsTWFya2Rvd25GaWxlcykge1xuICAgICAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShtZEZpbGUpO1xuICAgICAgICAgICAgaWYgKCFjYWNoZSkgY29udGludWU7XG5cbiAgICAgICAgICAgIGNvbnN0IGxpbmtzQW5kRW1iZWRzID0gWy4uLihjYWNoZS5lbWJlZHMgfHwgW10pLCAuLi4oY2FjaGUubGlua3MgfHwgW10pXTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCByZWYgb2YgbGlua3NBbmRFbWJlZHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rZWRGaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChyZWYubGluaywgbWRGaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgIGlmIChsaW5rZWRGaWxlICYmICFsaW5rZWRGaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLm1kJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlZEFzc2V0UGF0aHMuYWRkKGxpbmtlZEZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFsbEFzc2V0UGF0aHMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpXG4gICAgICAgICAgICAuZmlsdGVyKGZpbGUgPT4gIWZpbGUucGF0aC50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCcubWQnKSlcbiAgICAgICAgICAgIC5tYXAoZmlsZSA9PiBmaWxlLnBhdGgpO1xuXG4gICAgICAgIGNvbnN0IHVudXNlZEFzc2V0UGF0aHMgPSBuZXcgU2V0KGFsbEFzc2V0UGF0aHMuZmlsdGVyKGFzc2V0UGF0aCA9PiAhcmVmZXJlbmNlZEFzc2V0UGF0aHMuaGFzKGFzc2V0UGF0aCkpKTtcbiAgICAgICAgcmV0dXJuIHVudXNlZEFzc2V0UGF0aHM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUJhY2tsaW5rSXRlbShjb250YWluZXIsIG5vdGVGaWxlLCBhc3NldEZpbGUpIHtcbiAgICAgICAgY29uc3QgaXRlbUVsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ290aGVyLW5vdGVzLXBvcHVwLWl0ZW0nIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLmlzSW1hZ2VBc3NldChub3RlRmlsZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHRodW1ibmFpbCA9IGl0ZW1FbC5jcmVhdGVFbCgnaW1nJywgeyBjbHM6ICdwb3B1cC1hc3NldC10aHVtYm5haWwnIH0pO1xuICAgICAgICAgICAgdGh1bWJuYWlsLnNyYyA9IHRoaXMuYXBwLnZhdWx0LmdldFJlc291cmNlUGF0aChub3RlRmlsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRJY29uKGl0ZW1FbCwgJ2ZpbGUtdGV4dCcpOyAvLyBGYWxsYmFjayB0byBhIGdlbmVyaWMgaWNvblxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGl0bGVQYXRoV3JhcHBlciA9IGl0ZW1FbC5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLXRpdGxlLXBhdGgtd3JhcHBlcicgfSk7XG4gICAgICAgIHRpdGxlUGF0aFdyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogbm90ZUZpbGUuYmFzZW5hbWUsIGNsczogJ25vdGUtdGl0bGUnIH0pO1xuICAgICAgICBpZiAobm90ZUZpbGUucGFyZW50ICYmIG5vdGVGaWxlLnBhcmVudC5wYXRoICE9PSAnLycpIHtcbiAgICAgICAgICAgIHRpdGxlUGF0aFdyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogbm90ZUZpbGUucGFyZW50LnBhdGgsIGNsczogJ25vdGUtcGF0aCcgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKlxuICAgICAgICBpdGVtRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgLy8gRmluZCB0aGUgc3BlY2lmaWMgbGluZSB3aGVyZSB0aGUgYXNzZXQgaXMgbWVudGlvbmVkXG4gICAgICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKG5vdGVGaWxlKTtcbiAgICAgICAgICAgIGxldCB0YXJnZXRMaW5lID0gMDtcbiAgICAgICAgICAgIGlmIChjYWNoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFsbExpbmtzID0gWy4uLihjYWNoZS5lbWJlZHMgfHwgW10pLCAuLi4oY2FjaGUubGlua3MgfHwgW10pXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlZiBvZiBhbGxMaW5rcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rZWRGaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChyZWYubGluaywgbm90ZUZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5rZWRGaWxlICYmIGxpbmtlZEZpbGUucGF0aCA9PT0gYXNzZXRGaWxlLnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldExpbmUgPSByZWYucG9zaXRpb24uc3RhcnQubGluZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShcIm1hcmtkb3duXCIpO1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdMZWFmID0gbGVhdmVzLmZpbmQobGVhZiA9PiBsZWFmLnZpZXcuZmlsZT8ucGF0aCA9PT0gbm90ZUZpbGUucGF0aCk7XG5cbiAgICAgICAgICAgIGlmIChleGlzdGluZ0xlYWYpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihleGlzdGluZ0xlYWYpO1xuICAgICAgICAgICAgICAgIC8vIE5hdmlnYXRlIHRvIHRoZSBsaW5lIGV2ZW4gaWYgdGhlIGxlYWYgaXMgYWxyZWFkeSBvcGVuXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdMZWFmLnZpZXcuc2V0RXBoZW1lcmFsU3RhdGUoeyBsaW5lOiB0YXJnZXRMaW5lIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcGVuSW5OZXdUYWIgPSBlLnNoaWZ0S2V5IHx8IHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVzT3BlbkFjdGlvbiA9PT0gJ25ldy10YWInO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihvcGVuSW5OZXdUYWIpO1xuICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYub3BlbkZpbGUobm90ZUZpbGUsIHsgZVN0YXRlOiB7IGxpbmU6IHRhcmdldExpbmUgfSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5oaWRlRmlsZVBvcHVwKCk7XG4gICAgICAgIH0pO1xuICAgICAgICAqL1xuICAgICAgICBpdGVtRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgLy8gRmluZCB0aGUgc3BlY2lmaWMgbGluZSB3aGVyZSB0aGUgYXNzZXQgaXMgbWVudGlvbmVkXG4gICAgICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKG5vdGVGaWxlKTtcbiAgICAgICAgICAgIGxldCB0YXJnZXRMaW5lID0gMDtcbiAgICAgICAgICAgIGlmIChjYWNoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFsbExpbmtzID0gWy4uLihjYWNoZS5lbWJlZHMgfHwgW10pLCAuLi4oY2FjaGUubGlua3MgfHwgW10pXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlZiBvZiBhbGxMaW5rcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rZWRGaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChyZWYubGluaywgbm90ZUZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5rZWRGaWxlICYmIGxpbmtlZEZpbGUucGF0aCA9PT0gYXNzZXRGaWxlLnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldExpbmUgPSByZWYucG9zaXRpb24uc3RhcnQubGluZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVc2UgdGhlIGNlbnRyYWxpemVkIGhhbmRsZXIsIHBhc3NpbmcgdGhlIGxpbmUgbnVtYmVyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUZpbGVDbGljayhub3RlRmlsZSwgZSwgeyBsaW5lOiB0YXJnZXRMaW5lIH0pO1xuICAgICAgICAgICAgdGhpcy5oaWRlRmlsZVBvcHVwKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlzSW1hZ2VBc3NldChmaWxlKSB7XG4gICAgICAgIGNvbnN0IGltYWdlRXh0ZW5zaW9ucyA9IFsnanBnJywgJ2pwZWcnLCAncG5nJywgJ2dpZicsICdibXAnLCAnc3ZnJ107XG4gICAgICAgIHJldHVybiBpbWFnZUV4dGVuc2lvbnMuaW5jbHVkZXMoZmlsZS5leHRlbnNpb24udG9Mb3dlckNhc2UoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2hvd05vdGVQb3B1cCh0YXJnZXRFbCwgbm90ZUZpbGUpIHtcbiAgICAgICAgdGhpcy5oaWRlRmlsZVBvcHVwKCk7IC8vIENsZWFyIGFueSBleGlzdGluZyBwb3B1cHNcbiAgICAgICAgdGhpcy5wb3B1cEVsID0gY3JlYXRlRGl2KHsgY2xzOiAnb3RoZXItbm90ZXMtcG9wdXAnIH0pO1xuXG4gICAgICAgIC8vIC0tLSAxLiBIZWFkZXIgd2l0aCBOb3RlIEJhc2VuYW1lIGFuZCBQYXRoIC0tLVxuICAgICAgICBjb25zdCBoZWFkZXJSb3cgPSB0aGlzLnBvcHVwRWwuY3JlYXRlRGl2KHsgY2xzOiAncG9wdXAtaGVhZGVyJyB9KTtcbiAgICAgICAgaGVhZGVyUm93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oaWRlRmlsZVBvcHVwKCkpO1xuXG4gICAgICAgIGNvbnN0IHRpdGxlQ29udGFpbmVyID0gaGVhZGVyUm93LmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLXRpdGxlLWNvbnRhaW5lcicgfSk7XG4gICAgICAgIHRpdGxlQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IG5vdGVGaWxlLmJhc2VuYW1lLCBjbHM6ICdwb3B1cC1oZWFkZXItdGl0bGUnIH0pO1xuXG4gICAgICAgIGNvbnN0IGNsb3NlQnRuID0gaGVhZGVyUm93LmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWNsb3NlLWJ0bicgfSk7XG4gICAgICAgIHNldEljb24oY2xvc2VCdG4sICd4Jyk7XG4gICAgICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oaWRlRmlsZVBvcHVwKCkpO1xuXG4gICAgICAgIGNvbnN0IGNvbnRlbnRXcmFwcGVyID0gdGhpcy5wb3B1cEVsLmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWNvbnRlbnQtd3JhcHBlcicgfSk7XG4gICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUobm90ZUZpbGUpO1xuXG4gICAgICAgIC8vIC0tLSBQUkUtRkVUQ0g6IEZpbmQgbGlua2VkIGFzc2V0cyBmaXJzdCB0byBkZWNpZGUgaWYgYSBzZXBhcmF0b3IgaXMgbmVlZGVkIC0tLVxuICAgICAgICBjb25zdCBsaW5rZWRBc3NldHMgPSBbXTtcbiAgICAgICAgaWYgKGNhY2hlKSB7XG4gICAgICAgICAgICBjb25zdCBhbGxMaW5rcyA9IFsuLi4oY2FjaGUuZW1iZWRzIHx8IFtdKSwgLi4uKGNhY2hlLmxpbmtzIHx8IFtdKV07XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlZiBvZiBhbGxMaW5rcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtlZEZpbGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHJlZi5saW5rLCBub3RlRmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICBpZiAobGlua2VkRmlsZSAmJiAhbGlua2VkRmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5tZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbGlua2VkQXNzZXRzLnNvbWUoYXNzZXQgPT4gYXNzZXQucGF0aCA9PT0gbGlua2VkRmlsZS5wYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlua2VkQXNzZXRzLnB1c2gobGlua2VkRmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGlzIGZsYWcgZGV0ZXJtaW5lcyBpZiB3ZSBuZWVkIHRvIHNob3cgdGhlIHNlcGFyYXRvci5cbiAgICAgICAgY29uc3QgaGFzQWRkaXRpb25hbENvbnRlbnQgPSBsaW5rZWRBc3NldHMubGVuZ3RoID4gMDtcblxuICAgICAgICAvLyAtLS0gMi4gRmlsZSBEZXRhaWxzIFNlY3Rpb24gLS0tXG4gICAgICAgIGNvbnRlbnRXcmFwcGVyLmNyZWF0ZUVsKCdoNicsIHsgdGV4dDogJ0RldGFpbHMnLCBjbHM6ICdwb3B1cC1zZWN0aW9uLWhlYWRlcicgfSk7XG4gICAgICAgIGNvbnN0IGluZm9Db250YWluZXIgPSBjb250ZW50V3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6ICdvdGhlci1ub3Rlcy1wb3B1cC1pdGVtIGlzLWNsaWNrYWJsZScgfSk7XG4gICAgICAgIGluZm9Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVGaWxlQ2xpY2sobm90ZUZpbGUsIGUpOyAvLyBVc2UgdGhlIG5ldyBoYW5kbGVyXG4gICAgICAgICAgICB0aGlzLmhpZGVGaWxlUG9wdXAoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2V0SWNvbihpbmZvQ29udGFpbmVyLCAnaW5mbycpO1xuICAgICAgICBjb25zdCBpbmZvV3JhcHBlciA9IGluZm9Db250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS10aXRsZS1wYXRoLXdyYXBwZXInIH0pO1xuXG4gICAgICAgIGNvbnN0IHNpemUgPSB0aGlzLmZvcm1hdEZpbGVTaXplID8gdGhpcy5mb3JtYXRGaWxlU2l6ZShub3RlRmlsZS5zdGF0LnNpemUpIDogJ04vQSc7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWQgPSB0aGlzLmZvcm1hdERhdGVUaW1lID8gdGhpcy5mb3JtYXREYXRlVGltZShuZXcgRGF0ZShub3RlRmlsZS5zdGF0LmN0aW1lKSkgOiAnTi9BJztcbiAgICAgICAgY29uc3QgbW9kaWZpZWQgPSB0aGlzLmZvcm1hdERhdGVUaW1lID8gdGhpcy5mb3JtYXREYXRlVGltZShuZXcgRGF0ZShub3RlRmlsZS5zdGF0Lm10aW1lKSkgOiAnTi9BJztcblxuICAgICAgICBpbmZvV3JhcHBlci5jcmVhdGVEaXYoeyB0ZXh0OiBgQ3JlYXRlZDogJHtjcmVhdGVkfWAsIGNsczogJ25vdGUtcGF0aCcgfSk7XG4gICAgICAgIGluZm9XcmFwcGVyLmNyZWF0ZURpdih7IHRleHQ6IGBNb2RpZmllZDogJHttb2RpZmllZH1gLCBjbHM6ICdub3RlLXBhdGgnIH0pO1xuICAgICAgICBpbmZvV3JhcHBlci5jcmVhdGVEaXYoeyB0ZXh0OiBgU2l6ZTogJHtzaXplfWAsIGNsczogJ25vdGUtcGF0aCcgfSk7XG4gICAgICAgIGluZm9XcmFwcGVyLmNyZWF0ZURpdih7IHRleHQ6IGBQYXRoOiAke25vdGVGaWxlLnBhdGh9YCwgY2xzOiAnbm90ZS1wYXRoJyB9KTtcblxuICAgICAgICBsZXQgdGFnc1RleHQgPSAnTm8gdGFncyc7XG4gICAgICAgIGlmIChjYWNoZSAmJiBjYWNoZS50YWdzICYmIGNhY2hlLnRhZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgdGFnU3RyaW5ncyA9IGNhY2hlLnRhZ3MubWFwKHQgPT4gdC50YWcpO1xuICAgICAgICAgICAgY29uc3QgdW5pcXVlVGFncyA9IFsuLi5uZXcgU2V0KHRhZ1N0cmluZ3MpXS5zb3J0KCk7XG4gICAgICAgICAgICB0YWdzVGV4dCA9IHVuaXF1ZVRhZ3Muam9pbignLCAnKTtcbiAgICAgICAgfVxuICAgICAgICBpbmZvV3JhcHBlci5jcmVhdGVEaXYoeyB0ZXh0OiBgVGFnczogJHt0YWdzVGV4dH1gLCBjbHM6ICdub3RlLXBhdGgnIH0pO1xuXG4gICAgICAgIC8vIC0tLSAzLiBDT05ESVRJT05BTCBTRVBBUkFUT1IgJiBBU1NFVFMgU0VDVElPTiAtLS1cbiAgICAgICAgLy8gT25seSBhZGQgdGhlIHNlcGFyYXRvciBhbmQgdGhlIGFzc2V0cyBzZWN0aW9uIGlmIHRoZXJlIGFyZSBhc3NldHMgdG8gc2hvdy5cbiAgICAgICAgaWYgKGhhc0FkZGl0aW9uYWxDb250ZW50KSB7XG4gICAgICAgICAgICBjb250ZW50V3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC1zZXBhcmF0b3InIH0pO1xuXG4gICAgICAgICAgICBjb250ZW50V3JhcHBlci5jcmVhdGVFbCgnaDYnLCB7IHRleHQ6ICdBc3NldHMgaW4gTm90ZScsIGNsczogJ3BvcHVwLXNlY3Rpb24taGVhZGVyJyB9KTtcbiAgICAgICAgICAgIGxpbmtlZEFzc2V0cy5mb3JFYWNoKGFzc2V0RmlsZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY3JlYXRlQXNzZXRMaXN0SXRlbShjb250ZW50V3JhcHBlciwgYXNzZXRGaWxlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIDQuIEZvb3RlciB3aXRoIEFjdGlvbnMgLS0tXG4gICAgICAgIGNvbnN0IGZvb3RlciA9IHRoaXMucG9wdXBFbC5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC1hY3Rpb25zLWZvb3RlcicgfSk7XG4gICAgICAgIGZvb3Rlci5jcmVhdGVEaXYoeyBzdHlsZTogJ2ZsZXgtZ3JvdzogMScgfSk7XG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGZvb3Rlci5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC1hY3Rpb24taWNvbi1idG4gbW9kLWRhbmdlcicgfSk7XG4gICAgICAgIHNldEljb24oZGVsZXRlQnRuLCAndHJhc2gtMicpO1xuICAgICAgICBkZWxldGVCdG4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0RlbGV0ZSBGaWxlJyk7XG5cbiAgICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oaWRlRmlsZVBvcHVwKCk7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZURlbGV0ZUZpbGUobm90ZUZpbGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyAtLS0gNS4gRmluYWxpemUgYW5kIERpc3BsYXkgLS0tXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5wb3B1cEVsKTtcbiAgICAgICAgaWYgKHRoaXMucG9zaXRpb25Qb3B1cCkge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvblBvcHVwKHRhcmdldEVsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucG9wdXBFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4gY2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVvdXQpKTtcbiAgICAgICAgdGhpcy5wb3B1cEVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhpZGVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLmhpZGVGaWxlUG9wdXAoKSwgdGhpcy5wbHVnaW4uc2V0dGluZ3MucG9wdXBIaWRlRGVsYXkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwb3NpdGlvblBvcHVwKHRhcmdldEVsKSB7XG4gICAgICAgIGlmICghdGhpcy5wb3B1cEVsKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgcG9wdXBSZWN0ID0gdGhpcy5wb3B1cEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCB0YXJnZXRSZWN0ID0gdGFyZ2V0RWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IHZpZXdwb3J0V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgY29uc3Qgdmlld3BvcnRIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgIGNvbnN0IG1hcmdpbiA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcHVwR2FwO1xuICAgICAgICBsZXQgZmluYWxUb3AgPSB0YXJnZXRSZWN0LmJvdHRvbSArIG1hcmdpbjtcblxuICAgICAgICAvLyBTdGFuZGFyZCBvdmVyZmxvdyBjaGVjayAoa2VlcCB0aGlzKVxuICAgICAgICBpZiAoZmluYWxUb3AgKyBwb3B1cFJlY3QuaGVpZ2h0ID4gdmlld3BvcnRIZWlnaHQpIHtcbiAgICAgICAgICAgIGZpbmFsVG9wID0gdGFyZ2V0UmVjdC50b3AgLSBwb3B1cFJlY3QuaGVpZ2h0IC0gbWFyZ2luO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTW9iaWxlLXNwZWNpZmljIGxvZ2ljIHRvIGZvcmNlIHRvIGJvdHRvbSBoYWxmXG4gICAgICAgIGlmIChQbGF0Zm9ybS5pc01vYmlsZSkge1xuICAgICAgICAgICAgY29uc3Qgdmlld3BvcnRNaWRwb2ludCA9IHZpZXdwb3J0SGVpZ2h0IC8gMjtcbiAgICAgICAgICAgIGlmIChmaW5hbFRvcCA8IHZpZXdwb3J0TWlkcG9pbnQpIHtcbiAgICAgICAgICAgICAgICBmaW5hbFRvcCA9IHZpZXdwb3J0TWlkcG9pbnQ7IC8vIEZvcmNlIGl0IHRvIHN0YXJ0IGF0IHRoZSBoYWxmd2F5IG1hcmtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEVuc3VyZSBpdCBkb2Vzbid0IGdvIG9mZiB0aGUgdG9wIG9mIHRoZSBzY3JlZW4gYWZ0ZXIgdGhlIG1vYmlsZSBhZGp1c3RtZW50XG4gICAgICAgIGlmIChmaW5hbFRvcCA8IDApIHtcbiAgICAgICAgICAgIGZpbmFsVG9wID0gbWFyZ2luO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRqdXN0IGxlZnQgcG9zaXRpb24gYXMgYmVmb3JlXG4gICAgICAgIGxldCBmaW5hbExlZnQgPSB0YXJnZXRSZWN0LmxlZnQ7XG4gICAgICAgIGlmIChmaW5hbExlZnQgKyBwb3B1cFJlY3Qud2lkdGggPiB2aWV3cG9ydFdpZHRoKSB7XG4gICAgICAgICAgICBmaW5hbExlZnQgPSB0YXJnZXRSZWN0LnJpZ2h0IC0gcG9wdXBSZWN0LndpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaW5hbExlZnQgPCAwKSB7XG4gICAgICAgICAgICBmaW5hbExlZnQgPSBtYXJnaW47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUudG9wID0gYCR7ZmluYWxUb3B9cHhgO1xuICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUubGVmdCA9IGAke2ZpbmFsTGVmdH1weGA7XG4gICAgfVxuXG5cbiAgICBfY3JlYXRlQXNzZXRMaXN0SXRlbShjb250YWluZXIsIGFzc2V0RmlsZSkge1xuICAgICAgICBjb25zdCBpdGVtRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnb3RoZXItbm90ZXMtcG9wdXAtaXRlbSBpcy1jbGlja2FibGUnIH0pO1xuXG4gICAgICAgIC8vIFNob3cgYSB0aHVtYm5haWwgcHJldmlldyBpZiBpdCdzIGFuIGltYWdlIGFzc2V0XG4gICAgICAgIGlmICh0aGlzLmlzSW1hZ2VBc3NldChhc3NldEZpbGUpKSB7XG4gICAgICAgICAgICBjb25zdCB0aHVtYm5haWwgPSBpdGVtRWwuY3JlYXRlRWwoJ2ltZycsIHsgY2xzOiAncG9wdXAtYXNzZXQtdGh1bWJuYWlsJyB9KTtcbiAgICAgICAgICAgIHRodW1ibmFpbC5zcmMgPSB0aGlzLmFwcC52YXVsdC5nZXRSZXNvdXJjZVBhdGgoYXNzZXRGaWxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldEljb24oaXRlbUVsLCAnZmlsZS10ZXh0Jyk7IC8vIEZhbGxiYWNrIGljb24gZm9yIG5vbi1pbWFnZSBmaWxlc1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGlzcGxheSB0aGUgYXNzZXQncyBuYW1lIGFuZCBwYXJlbnQgZm9sZGVyIHBhdGhcbiAgICAgICAgY29uc3QgdGl0bGVQYXRoV3JhcHBlciA9IGl0ZW1FbC5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLXRpdGxlLXBhdGgtd3JhcHBlcicgfSk7XG4gICAgICAgIHRpdGxlUGF0aFdyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogYXNzZXRGaWxlLmJhc2VuYW1lLCBjbHM6ICdub3RlLXRpdGxlJyB9KTtcbiAgICAgICAgaWYgKGFzc2V0RmlsZS5wYXJlbnQgJiYgYXNzZXRGaWxlLnBhcmVudC5wYXRoICE9PSAnLycpIHtcbiAgICAgICAgICAgIHRpdGxlUGF0aFdyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogYXNzZXRGaWxlLnBhcmVudC5wYXRoLCBjbHM6ICdub3RlLXBhdGgnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIGEgY2xpY2sgbGlzdGVuZXIgdG8gb3BlbiB0aGUgYXNzZXQgZmlsZVxuICAgICAgICBpdGVtRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVGaWxlQ2xpY2soYXNzZXRGaWxlLCBlKTsgLy8gVXNlIHRoZSBuZXcgaGFuZGxlclxuICAgICAgICAgICAgdGhpcy5oaWRlRmlsZVBvcHVwKCk7IC8vIENsb3NlIHRoZSBwb3B1cCBhZnRlciBjbGlja2luZ1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgYXN5bmMgc2hvd0Fzc2V0UG9wdXAodGFyZ2V0RWwsIGFzc2V0RmlsZSkge1xuICAgICAgICB0aGlzLmhpZGVGaWxlUG9wdXAoKTtcbiAgICAgICAgY29uc3QgYmFja2xpbmtzID0gYXdhaXQgdGhpcy5maW5kQXNzZXRCYWNrbGlua3MoYXNzZXRGaWxlKTtcbiAgICAgICAgdGhpcy5wb3B1cEVsID0gY3JlYXRlRGl2KHsgY2xzOiAnb3RoZXItbm90ZXMtcG9wdXAnIH0pO1xuXG4gICAgICAgIC8vIC0tLSAxLiBIZWFkZXIgLS0tXG4gICAgICAgIGNvbnN0IGhlYWRlclJvdyA9IHRoaXMucG9wdXBFbC5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC1oZWFkZXInIH0pO1xuICAgICAgICBjb25zdCB0aXRsZUNvbnRhaW5lciA9IGhlYWRlclJvdy5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC10aXRsZS1jb250YWluZXInIH0pO1xuICAgICAgICB0aXRsZUNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBhc3NldEZpbGUubmFtZSwgY2xzOiAncG9wdXAtaGVhZGVyLXRpdGxlJyB9KTtcbiAgICAgICAgY29uc3QgY2xvc2VCdG4gPSBoZWFkZXJSb3cuY3JlYXRlRGl2KHsgY2xzOiAncG9wdXAtY2xvc2UtYnRuJyB9KTtcbiAgICAgICAgc2V0SWNvbihjbG9zZUJ0biwgJ3gnKTtcbiAgICAgICAgaGVhZGVyUm93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oaWRlRmlsZVBvcHVwKCkpO1xuXG4gICAgICAgIGNvbnN0IGNvbnRlbnRXcmFwcGVyID0gdGhpcy5wb3B1cEVsLmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWNvbnRlbnQtd3JhcHBlcicgfSk7XG5cbiAgICAgICAgLy8gLS0tIDIuIEFzc2V0IERldGFpbHMgJiBQcmV2aWV3IC0tLVxuICAgICAgICBjb250ZW50V3JhcHBlci5jcmVhdGVFbCgnaDYnLCB7IHRleHQ6ICdEZXRhaWxzJywgY2xzOiAncG9wdXAtc2VjdGlvbi1oZWFkZXInIH0pO1xuICAgICAgICBjb25zdCBpbmZvQ29udGFpbmVyID0gY29udGVudFdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiAnb3RoZXItbm90ZXMtcG9wdXAtaXRlbScgfSk7XG4gICAgICAgIGluZm9Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVGaWxlQ2xpY2soYXNzZXRGaWxlLCBlKTtcbiAgICAgICAgICAgIHRoaXMuaGlkZUZpbGVQb3B1cCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5pc0ltYWdlQXNzZXQoYXNzZXRGaWxlKSkge1xuICAgICAgICAgICAgY29uc3QgdGh1bWJuYWlsID0gaW5mb0NvbnRhaW5lci5jcmVhdGVFbCgnaW1nJywgeyBjbHM6ICdwb3B1cC1hc3NldC10aHVtYm5haWwnIH0pO1xuICAgICAgICAgICAgdGh1bWJuYWlsLnNyYyA9IHRoaXMuYXBwLnZhdWx0LmdldFJlc291cmNlUGF0aChhc3NldEZpbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0SWNvbihpbmZvQ29udGFpbmVyLCAnZmlsZS1xdWVzdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZm9XcmFwcGVyID0gaW5mb0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLXRpdGxlLXBhdGgtd3JhcHBlcicgfSk7XG4gICAgICAgIGluZm9XcmFwcGVyLmNyZWF0ZURpdih7IHRleHQ6IGBNb2RpZmllZDogJHt0aGlzLmZvcm1hdERhdGVUaW1lKG5ldyBEYXRlKGFzc2V0RmlsZS5zdGF0Lm10aW1lKSl9YCwgY2xzOiAnbm90ZS1wYXRoJyB9KTtcbiAgICAgICAgaW5mb1dyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogYFNpemU6ICR7dGhpcy5mb3JtYXRGaWxlU2l6ZShhc3NldEZpbGUuc3RhdC5zaXplKX1gLCBjbHM6ICdub3RlLXBhdGgnIH0pO1xuICAgICAgICBpbmZvV3JhcHBlci5jcmVhdGVEaXYoeyB0ZXh0OiBgUGF0aDogJHthc3NldEZpbGUucGF0aH1gLCBjbHM6ICdub3RlLXBhdGgnIH0pO1xuXG4gICAgICAgIC8vIC0tLSAzLiBCYWNrbGlua3MgU2VjdGlvbiAtLS1cbiAgICAgICAgaWYgKGJhY2tsaW5rcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW50V3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC1zZXBhcmF0b3InIH0pO1xuICAgICAgICAgICAgY29udGVudFdyYXBwZXIuY3JlYXRlRWwoJ2g2JywgeyB0ZXh0OiBgVXNlZCBpbiAke2JhY2tsaW5rcy5sZW5ndGh9IG5vdGUocylgLCBjbHM6ICdwb3B1cC1zZWN0aW9uLWhlYWRlcicgfSk7XG4gICAgICAgICAgICBiYWNrbGlua3MuZm9yRWFjaChub3RlRmlsZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY3JlYXRlQmFja2xpbmtJdGVtKGNvbnRlbnRXcmFwcGVyLCBub3RlRmlsZSwgYXNzZXRGaWxlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIDQuIEFjdGlvbnMgU2VjdGlvbiAtLS1cbiAgICAgICAgY29uc3QgZm9vdGVyID0gdGhpcy5wb3B1cEVsLmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWFjdGlvbnMtZm9vdGVyJyB9KTtcblxuICAgICAgICAvLyBORVc6IENvcHkgTGluayBCdXR0b24gb24gdGhlIGZhciBsZWZ0XG4gICAgICAgIGNvbnN0IGNvcHlCdG4gPSBmb290ZXIuY3JlYXRlRGl2KHsgY2xzOiAncG9wdXAtYWN0aW9uLWljb24tYnRuJyB9KTtcbiAgICAgICAgc2V0SWNvbihjb3B5QnRuLCAnY29weScpO1xuICAgICAgICBjb3B5QnRuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdDb3B5IG1hcmtkb3duIGxpbmsnKTtcbiAgICAgICAgY29weUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgY29uc3QgaXNJbWFnZSA9IHRoaXMuaXNJbWFnZUFzc2V0KGFzc2V0RmlsZSk7XG4gICAgICAgICAgICBjb25zdCBsaW5rID0gdGhpcy5hcHAuZmlsZU1hbmFnZXIuZ2VuZXJhdGVNYXJrZG93bkxpbmsoYXNzZXRGaWxlLCAnJyk7XG4gICAgICAgICAgICBjb25zdCBsaW5rVGV4dCA9IGlzSW1hZ2UgPyBgISR7bGlua31gIDogbGluaztcblxuICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQobGlua1RleHQpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0xpbmsgY29waWVkIHRvIGNsaXBib2FyZCcpO1xuICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gY29weSBsaW5rJyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNvcHkgbGluazogJywgZXJyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5oaWRlRmlsZVBvcHVwKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEluZm8gbWVzc2FnZSBvciBhIHNwYWNlciB0byBwdXNoIHRoZSBkZWxldGUgYnV0dG9uIGF3YXlcbiAgICAgICAgaWYgKGJhY2tsaW5rcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGluZm9NZXNzYWdlID0gZm9vdGVyLmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWluZm8tbWVzc2FnZScsIHN0eWxlOiAnZmxleC1ncm93OiAxOyB0ZXh0LWFsaWduOiBjZW50ZXI7JyB9KTtcbiAgICAgICAgICAgIHNldEljb24oaW5mb01lc3NhZ2UsICdpbmZvJyk7XG4gICAgICAgICAgICBpbmZvTWVzc2FnZS5jcmVhdGVTcGFuKHsgdGV4dDogJ05vdCB1c2VkIGluIGFueSBub3Rlcy4nIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVGhpcyBzcGFjZXIgcHVzaGVzIHRoZSBkZWxldGUgYnV0dG9uIHRvIHRoZSBmYXIgcmlnaHRcbiAgICAgICAgICAgIGZvb3Rlci5jcmVhdGVEaXYoeyBzdHlsZTogJ2ZsZXgtZ3JvdzogMTsnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGVsZXRlIGljb24gYnV0dG9uIG9uIHRoZSBmYXIgcmlnaHRcbiAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gZm9vdGVyLmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWFjdGlvbi1pY29uLWJ0biBtb2QtZGFuZ2VyJyB9KTtcbiAgICAgICAgc2V0SWNvbihkZWxldGVCdG4sICd0cmFzaC0yJyk7XG4gICAgICAgIGRlbGV0ZUJ0bi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnRGVsZXRlIEFzc2V0Jyk7XG4gICAgICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5oaWRlRmlsZVBvcHVwKCk7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZURlbGV0ZUZpbGUoYXNzZXRGaWxlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gLS0tIDUuIEZpbmFsaXplIGFuZCBEaXNwbGF5IC0tLVxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMucG9wdXBFbCk7XG4gICAgICAgIHRoaXMucG9zaXRpb25Qb3B1cCh0YXJnZXRFbCk7XG4gICAgICAgIHRoaXMucG9wdXBFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4gY2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVvdXQpKTtcbiAgICAgICAgdGhpcy5wb3B1cEVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhpZGVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLmhpZGVGaWxlUG9wdXAoKSwgdGhpcy5wbHVnaW4uc2V0dGluZ3MucG9wdXBIaWRlRGVsYXkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93cyBhIGNvbmZpcm1hdGlvbiBtb2RhbCBhbmQgaGFuZGxlcyB0aGUgcGVybWFuZW50IGRlbGV0aW9uIG9mIGFueSBmaWxlLlxuICAgICAqIEFmdGVyIGRlbGV0aW9uLCBpdCByZWZyZXNoZXMgdGhlIG5vdGVzIGFuZCBhc3NldHMgdGFicy5cbiAgICAgKiBAcGFyYW0ge1RGaWxlfSBmaWxlIC0gVGhlIGZpbGUgKG5vdGUgb3IgYXNzZXQpIHRvIGRlbGV0ZS5cbiAgICAgKi9cbiAgICBhc3luYyBoYW5kbGVEZWxldGVGaWxlKGZpbGUpIHtcbiAgICAgICAgbmV3IENvbmZpcm1hdGlvbk1vZGFsKFxuICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICAnQ29uZmlybSBEZWxldGlvbicsXG4gICAgICAgICAgICBgQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHBlcm1hbmVudGx5IGRlbGV0ZSBcIiR7ZmlsZS5uYW1lfVwiPyBUaGlzIGFjdGlvbiBjYW5ub3QgYmUgdW5kb25lLmAsXG4gICAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQudHJhc2goZmlsZSwgdHJ1ZSk7IC8vIHRydWUgZm9yIHBlcm1hbmVudCBkZWxldGlvblxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBEZWxldGVkOiAke2ZpbGUubmFtZX1gKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBSZWZyZXNoIGFsbCByZWxldmFudCB2aWV3c1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcHVsYXRlTm90ZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZUFzc2V0cygpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEFsc28gcmVmcmVzaCB0aGUgY2FsZW5kYXIgdG8gcmVtb3ZlIGFueSBkb3RzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZmlsZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XG5cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3IgZGVsZXRpbmcgZmlsZTogJHtlcnIubWVzc2FnZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGR1cmluZyBmaWxlIGRlbGV0aW9uOlwiLCBlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnWWVzLCBkZWxldGUnXG4gICAgICAgICkub3BlbigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZvcm1hdHMgYSBkYXRlIHRvIHNob3cgdGltZSBpZiBpdCdzIHRvZGF5LCBvdGhlcndpc2Ugc2hvd3MgdGhlIGZ1bGwgZGF0ZS5cbiAgICAgKiBAcGFyYW0ge0RhdGV9IGRhdGUgVGhlIGRhdGUgdG8gZm9ybWF0LlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgZGF0ZSBzdHJpbmcuXG4gICAgICovXG4gICAgZm9ybWF0RGF0ZVRpbWUoZGF0ZSkge1xuICAgICAgICBpZiAoIWRhdGUpIHJldHVybiAnTi9BJztcbiAgICAgICAgLy8gRW5zdXJlIHlvdSBhcmUgdXNpbmcgdGhlIG1vbWVudC5qcyBsaWJyYXJ5IGluc3RhbmNlIGF2YWlsYWJsZSBpbiBPYnNpZGlhblxuICAgICAgICBjb25zdCBtb21lbnREYXRlID0gbW9tZW50KGRhdGUpO1xuICAgICAgICBpZiAobW9tZW50RGF0ZS5pc1NhbWUobmV3IERhdGUoKSwgJ2RheScpKSB7XG4gICAgICAgICAgICByZXR1cm4gbW9tZW50RGF0ZS5mb3JtYXQoJ0hIOm1tJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1vbWVudERhdGUuZm9ybWF0KCdERC1NTS1ZWVlZJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRm9ybWF0cyBmaWxlIHNpemUgaW4gYnl0ZXMgaW50byBhIGh1bWFuLXJlYWRhYmxlIHN0cmluZyAoS0IsIE1CLCBldGMuKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYnl0ZXMgVGhlIHNpemUgb2YgdGhlIGZpbGUgaW4gYnl0ZXMuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGZvcm1hdHRlZCBmaWxlIHNpemUgc3RyaW5nLlxuICAgICAqL1xuICAgIGZvcm1hdEZpbGVTaXplKGJ5dGVzKSB7XG4gICAgICAgIGlmIChieXRlcyA9PT0gdW5kZWZpbmVkIHx8IGJ5dGVzID09PSBudWxsKSByZXR1cm4gJ04vQSc7XG4gICAgICAgIGlmIChieXRlcyA9PT0gMCkgcmV0dXJuICcwIEInO1xuXG4gICAgICAgIGNvbnN0IHVuaXRzID0gWydCJywgJ0tCJywgJ01CJywgJ0dCJywgJ1RCJ107XG4gICAgICAgIGNvbnN0IGkgPSBNYXRoLmZsb29yKE1hdGgubG9nKGJ5dGVzKSAvIE1hdGgubG9nKDEwMjQpKTtcblxuICAgICAgICByZXR1cm4gYCR7cGFyc2VGbG9hdCgoYnl0ZXMgLyBNYXRoLnBvdygxMDI0LCBpKSkudG9GaXhlZCgyKSl9ICR7dW5pdHNbaV19YDtcbiAgICB9XG5cbiAgICBhcHBseVBvcHVwVHJpZ2dlcihlbGVtZW50LCBmaWxlLCB0eXBlLCBpc1Jlb3JkZXJhYmxlID0gZmFsc2UpIHtcblxuICAgICAgICBpZiAodGhpcy5pc1Jlb3JkZXJNb2RlQWN0aXZlKSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIEV4aXQgdGhlIGZ1bmN0aW9uIGltbWVkaWF0ZWx5XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbG9uZ1ByZXNzT2NjdXJyZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3Qgc2hvd1BvcHVwID0gKCkgPT4ge1xuICAgICAgICAgICAgLy8gVGhpcyBjaGVjayBlbnN1cmVzIGEgc2V0dGluZyBmb3IgdGhlIG5ldyBmdW5jdGlvbmFsaXR5IGV4aXN0cy5cbiAgICAgICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd05vdGVUb29sdGlwcykgcmV0dXJuO1xuXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ25vdGUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93Tm90ZVBvcHVwKGVsZW1lbnQsIGZpbGUpO1xuICAgICAgICAgICAgfSBlbHNlIHsgLy8gJ2Fzc2V0J1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Fzc2V0UG9wdXAoZWxlbWVudCwgZmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gMS4gTW9iaWxlOiBBbHdheXMgdXNlIGEgbG9uZy1wcmVzcy5cbiAgICAgICAgaWYgKFBsYXRmb3JtLmlzTW9iaWxlKSB7XG4gICAgICAgICAgICBsZXQgdG91Y2hUaW1lcjtcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICBsb25nUHJlc3NPY2N1cnJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRvdWNoVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxvbmdQcmVzc09jY3VycmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgcmVvcmRlcmFibGUgaXRlbXMgb24gbW9iaWxlXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1Jlb3JkZXJhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yLnZpYnJhdGUpIG5hdmlnYXRvci52aWJyYXRlKDUwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0RyYWcgdG8gcmVvcmRlcicpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1BvcHVwKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbFRpbWVyID0gKCkgPT4gY2xlYXJUaW1lb3V0KHRvdWNoVGltZXIpO1xuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGNhbmNlbFRpbWVyKTtcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgY2FuY2VsVGltZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gMi4gRGVza3RvcDogQ2hlY2sgdGhlIHVzZXIncyBzZXR0aW5nLlxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmxpc3RQb3B1cFRyaWdnZXIgPT09ICdob3ZlcicpIHtcbiAgICAgICAgICAgICAgICBsZXQgaG92ZXJUaW1lb3V0O1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNEcmFnZ2luZ05vdGUgfHwgdGhpcy5pc1BvcHVwTG9ja2VkIHx8IHRoaXMuaXNNb3VzZURvd24pIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVGaWxlUG9wdXAoKTtcbiAgICAgICAgICAgICAgICAgICAgaG92ZXJUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoc2hvd1BvcHVwLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vdGhlck5vdGVIb3ZlckRlbGF5KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChob3ZlclRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4gdGhpcy5oaWRlRmlsZVBvcHVwKCksIHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcHVwSGlkZURlbGF5KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7IC8vICdyaWdodGNsaWNrJ1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHNob3dQb3B1cCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIFByaW1hcnkgQ2xpY2sgQWN0aW9uIC0tLVxuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChsb25nUHJlc3NPY2N1cnJlZCkge1xuICAgICAgICAgICAgICAgIGxvbmdQcmVzc09jY3VycmVkID0gZmFsc2U7IC8vIFJlc2V0IGZvciB0aGUgbmV4dCBpbnRlcmFjdGlvblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUHJldmVudCBjbGljayBhY3Rpb24gaWYgYSBkcmFnIGhhbmRsZSB3YXMgdGhlIHRhcmdldFxuICAgICAgICAgICAgaWYgKHRoaXMuaXNEcmFnZ2luZ05vdGUgJiYgZS50YXJnZXQuY2xvc2VzdCgnLmRyYWctaGFuZGxlJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVzZSB0aGUgbmV3IGNlbnRyYWxpemVkIGhhbmRsZXJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRmlsZUNsaWNrKGZpbGUsIGUpOyBcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ3JvdXBBc3NldHMoYXNzZXRzKSB7XG4gICAgICAgIGNvbnN0IGdyb3VwcyA9IHt9O1xuICAgICAgICBjb25zdCBncm91cE9yZGVyTWFwID0gbmV3IE1hcCgpO1xuXG4gICAgICAgIGFzc2V0cy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbW9udGhLZXkgPSBtb21lbnQoZmlsZS5zdGF0Lm10aW1lKS5mb3JtYXQoJ1lZWVktTU0nKTtcbiAgICAgICAgICAgIGlmICghZ3JvdXBzW21vbnRoS2V5XSkge1xuICAgICAgICAgICAgICAgIGdyb3Vwc1ttb250aEtleV0gPSBbXTtcbiAgICAgICAgICAgICAgICBncm91cE9yZGVyTWFwLnNldChtb250aEtleSwge1xuICAgICAgICAgICAgICAgICAgICBrZXk6IG1vbnRoS2V5LFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogbW9tZW50KGZpbGUuc3RhdC5tdGltZSkuZm9ybWF0KCdNTU1NIFlZWVknKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ3JvdXBzW21vbnRoS2V5XS5wdXNoKGZpbGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBncm91cE9yZGVyID0gQXJyYXkuZnJvbShncm91cE9yZGVyTWFwLnZhbHVlcygpKVxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGIua2V5LmxvY2FsZUNvbXBhcmUoYS5rZXkpKTsgLy8gU29ydCBkZXNjZW5kaW5nIGJ5IFwiWVlZWS1NTVwiXG5cbiAgICAgICAgcmV0dXJuIHsgZ3JvdXBzLCBncm91cE9yZGVyIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyB0aGUgbGlzdCBvZiByZWNlbnQgYXNzZXRzIGluIHRoZSBcIkFzc2V0c1wiIHRhYi5cbiAgICAgKi9cbiAgICBhc3luYyBwb3B1bGF0ZUFzc2V0cygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmFzc2V0c0NvbnRlbnRFbCkgcmV0dXJuO1xuICAgICAgICB0aGlzLmFzc2V0c0NvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG4gICAgICAgIGxldCB1bnVzZWRBc3NldFBhdGhzID0gbmV3IFNldCgpO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5zaG93VW51c2VkQXNzZXRzSW5kaWNhdG9yIHx8IHRoaXMuYXNzZXRzU2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpID09PSAnc3RhdHVzOnVubGlua2VkJykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVW51c2VkQXNzZXRDYWNoZVZhbGlkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bnVzZWRBc3NldFBhdGhzQ2FjaGUgPSBhd2FpdCB0aGlzLmdldFVudXNlZEFzc2V0UGF0aHMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVW51c2VkQXNzZXRDYWNoZVZhbGlkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVudXNlZEFzc2V0UGF0aHMgPSB0aGlzLnVudXNlZEFzc2V0UGF0aHNDYWNoZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGN1dG9mZiA9IG1vbWVudCgpLnN1YnRyYWN0KHNldHRpbmdzLmFzc2V0c0xvb2tiYWNrRGF5cywgJ2RheXMnKTtcbiAgICAgICAgY29uc3QgaWdub3JlRm9sZGVycyA9IHNldHRpbmdzLmFzc2V0SWdub3JlRm9sZGVycy5tYXAoZiA9PiBmLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy8nKSA/IGYudG9Mb3dlckNhc2UoKSA6IGYudG9Mb3dlckNhc2UoKSArICcvJyk7XG4gICAgICAgIGNvbnN0IGhpZGRlblR5cGVzID0gc2V0dGluZ3MuaGlkZGVuQXNzZXRUeXBlcy5zcGxpdCgnLCcpLm1hcChleHQgPT4gZXh0LnRyaW0oKS50b0xvd2VyQ2FzZSgpKS5maWx0ZXIoZXh0ID0+IGV4dC5sZW5ndGggPiAwKTtcblxuICAgICAgICBjb25zdCBhbGxBc3NldHMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpLmZpbHRlcihmaWxlID0+IHtcbiAgICAgICAgICAgIGlmIChmaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLm1kJykgfHwgaGlkZGVuVHlwZXMuaW5jbHVkZXMoZmlsZS5leHRlbnNpb24udG9Mb3dlckNhc2UoKSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGlmIChpZ25vcmVGb2xkZXJzLnNvbWUoZiA9PiBmaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKGYpKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIG1vbWVudChmaWxlLnN0YXQubXRpbWUpLmlzQWZ0ZXIoY3V0b2ZmKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3Qgc2VhcmNoVGVybSA9IHRoaXMuYXNzZXRzU2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBsZXQgZmlsdGVyZWRBc3NldHM7XG5cbiAgICAgICAgaWYgKHNlYXJjaFRlcm0gPT09ICdzdGF0dXM6dW5saW5rZWQnKSB7XG4gICAgICAgICAgICBmaWx0ZXJlZEFzc2V0cyA9IGFsbEFzc2V0cy5maWx0ZXIoZmlsZSA9PiB1bnVzZWRBc3NldFBhdGhzLmhhcyhmaWxlLnBhdGgpKTtcbiAgICAgICAgfSBlbHNlIGlmIChzZWFyY2hUZXJtKSB7XG4gICAgICAgICAgICBmaWx0ZXJlZEFzc2V0cyA9IGFsbEFzc2V0cy5maWx0ZXIoZmlsZSA9PiBmaWxlLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXJtKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmaWx0ZXJlZEFzc2V0cyA9IGFsbEFzc2V0cztcbiAgICAgICAgfVxuXG4gICAgICAgIGZpbHRlcmVkQXNzZXRzLnNvcnQoKGEsIGIpID0+IGIuc3RhdC5tdGltZSAtIGEuc3RhdC5tdGltZSk7XG5cbiAgICAgICAgY29uc3QgZ3JvdXBzID0ge1xuICAgICAgICAgICAgdG9kYXk6IFtdLFxuICAgICAgICAgICAgeWVzdGVyZGF5OiBbXSxcbiAgICAgICAgICAgIHRoaXNXZWVrOiBbXSxcbiAgICAgICAgICAgIGxhc3RXZWVrOiBbXSxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBkaXNwbGF5IG9yZGVyIHdpdGggdGhlIGZpeGVkIHJlY2VudCBjYXRlZ29yaWVzLlxuICAgICAgICBjb25zdCBncm91cE9yZGVyID0gW1xuICAgICAgICAgICAgeyBrZXk6ICd0b2RheScsIGxhYmVsOiAnVG9kYXknIH0sXG4gICAgICAgICAgICB7IGtleTogJ3llc3RlcmRheScsIGxhYmVsOiAnWWVzdGVyZGF5JyB9LFxuICAgICAgICAgICAgeyBrZXk6ICd0aGlzV2VlaycsIGxhYmVsOiAnVGhpcyBXZWVrJyB9LFxuICAgICAgICAgICAgeyBrZXk6ICdsYXN0V2VlaycsIGxhYmVsOiAnTGFzdCBXZWVrJyB9LFxuICAgICAgICBdO1xuXG4gICAgICAgIGNvbnN0IG5vdyA9IG1vbWVudCgpO1xuICAgICAgICBjb25zdCBzdGFydE9mVGhpc1dlZWsgPSBub3cuY2xvbmUoKS5zdGFydE9mKCd3ZWVrJyk7XG4gICAgICAgIGNvbnN0IHN0YXJ0T2ZMYXN0V2VlayA9IG5vdy5jbG9uZSgpLnN1YnRyYWN0KDEsICd3ZWVrJykuc3RhcnRPZignd2VlaycpO1xuXG4gICAgICAgIC8vIER5bmFtaWNhbGx5IGFkZCB0aGUgbGFzdCAxMiBtb250aHMgdG8gb3VyIGdyb3VwcyBhbmQgb3JkZXIuXG4gICAgICAgIC8vIFdlIHN0YXJ0IGZyb20gdGhlIGN1cnJlbnQgbW9udGggYW5kIGdvIGJhY2suXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTI7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgbW9udGggPSBub3cuY2xvbmUoKS5zdWJ0cmFjdChpLCAnbW9udGhzJyk7XG4gICAgICAgICAgICBjb25zdCBtb250aEtleSA9IG1vbnRoLmZvcm1hdCgnWVlZWS1NTScpO1xuICAgICAgICAgICAgaWYgKCFncm91cHNbbW9udGhLZXldKSB7XG4gICAgICAgICAgICAgICAgZ3JvdXBzW21vbnRoS2V5XSA9IFtdO1xuICAgICAgICAgICAgICAgIGdyb3VwT3JkZXIucHVzaCh7IGtleTogbW9udGhLZXksIGxhYmVsOiBtb250aC5mb3JtYXQoJ01NTU0gWVlZWScpIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZ3JvdXBzWydvbGRlciddID0gW107IC8vIENhdGNoLWFsbCBmb3IgYW55dGhpbmcgb2xkZXIgdGhhbiAxMiBtb250aHMuXG4gICAgICAgIGdyb3VwT3JkZXIucHVzaCh7IGtleTogJ29sZGVyJywgbGFiZWw6ICdPbGRlcicgfSk7XG5cbiAgICAgICAgLy8gSXRlcmF0ZSB0aHJvdWdoIHRoZSBmaWx0ZXJlZCBhc3NldHMgYW5kIHNvcnQgdGhlbSBpbnRvIHRoZSBncm91cHMuXG4gICAgICAgIGZpbHRlcmVkQXNzZXRzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtb2RUaW1lID0gbW9tZW50KGZpbGUuc3RhdC5tdGltZSk7XG4gICAgICAgICAgICAvLyBQcmlvcml0aXplIHRoZSBzcGVjaWFsIHJlY2VudCBncm91cHMgZmlyc3QuXG4gICAgICAgICAgICBpZiAobW9kVGltZS5pc1NhbWUobm93LCAnZGF5JykpIHtcbiAgICAgICAgICAgICAgICBncm91cHMudG9kYXkucHVzaChmaWxlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobW9kVGltZS5pc1NhbWUobm93LmNsb25lKCkuc3VidHJhY3QoMSwgJ2RheScpLCAnZGF5JykpIHtcbiAgICAgICAgICAgICAgICBncm91cHMueWVzdGVyZGF5LnB1c2goZmlsZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1vZFRpbWUuaXNBZnRlcihzdGFydE9mVGhpc1dlZWspKSB7XG4gICAgICAgICAgICAgICAgLy8gTW9yZSByZWxpYWJsZSBjaGVjayBmb3IgVGhpcyBXZWVrXG4gICAgICAgICAgICAgICAgZ3JvdXBzLnRoaXNXZWVrLnB1c2goZmlsZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1vZFRpbWUuaXNBZnRlcihzdGFydE9mTGFzdFdlZWspKSB7XG4gICAgICAgICAgICAgICAgLy8gTW9yZSByZWxpYWJsZSBjaGVjayBmb3IgTGFzdCBXZWVrXG4gICAgICAgICAgICAgICAgZ3JvdXBzLmxhc3RXZWVrLnB1c2goZmlsZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIElmIGl0J3Mgbm90IGluIGEgcmVjZW50IGdyb3VwLCBmaW5kIHRoZSBjb3JyZWN0IG1vbnRoIGJ1Y2tldC5cbiAgICAgICAgICAgICAgICBjb25zdCBtb250aEtleSA9IG1vZFRpbWUuZm9ybWF0KCdZWVlZLU1NJyk7XG4gICAgICAgICAgICAgICAgaWYgKGdyb3Vwc1ttb250aEtleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBzW21vbnRoS2V5XS5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGl0J3Mgb2xkZXIgdGhhbiBvdXIgMTItbW9udGggd2luZG93LCBwdXQgaXQgaW4gdGhlIG9sZGVyIGJ1Y2tldC5cbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBzLm9sZGVyLnB1c2goZmlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZmlsdGVyZWRBc3NldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gc2VhcmNoVGVybSA9PT0gJ3N0YXR1czp1bmxpbmtlZCcgPyAnTm8gdW5saW5rZWQgYXNzZXRzIGZvdW5kLicgOiAnTm8gYXNzZXRzIGZvdW5kLic7XG4gICAgICAgICAgICB0aGlzLmFzc2V0c0NvbnRlbnRFbC5jcmVhdGVEaXYoeyB0ZXh0OiBtZXNzYWdlLCBjbHM6ICd0YXNrLWdyb3VwLWVtcHR5LW1lc3NhZ2UnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIENIQU5HRSAyOiBJbml0aWFsaXplIHRoZSBJbnRlcnNlY3Rpb25PYnNlcnZlciAtLS1cbiAgICAgICAgdGhpcy5hc3NldE9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChlbnRyaWVzLCBvYnNlcnZlcikgPT4ge1xuICAgICAgICAgICAgICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JpZEl0ZW0gPSBlbnRyeS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWcgPSBncmlkSXRlbS5xdWVyeVNlbGVjdG9yKCdpbWdbZGF0YS1zcmNdJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nLnNyYyA9IGltZy5kYXRhc2V0LnNyYztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWcucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXNyYycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIudW5vYnNlcnZlKGdyaWRJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgeyBcbiAgICAgICAgICAgICAgICByb290OiB0aGlzLmFzc2V0c0NvbnRlbnRFbCwgIFxuICAgICAgICAgICAgICAgIHJvb3RNYXJnaW46IFwiMTAwcHhcIiAgXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBncm91cE9yZGVyLmZvckVhY2goZ3JvdXBJbmZvID0+IHtcbiAgICBjb25zdCBhc3NldHNJbkdyb3VwID0gZ3JvdXBzW2dyb3VwSW5mby5rZXldOyAgLy8gVGhpcyBsaW5lIHNob3VsZCBhbHJlYWR5IGV4aXN0IG9yIGFkZCBpdCBoZXJlIGlmIG1pc3NpbmdcbiAgICBcbiAgICBpZiAoYXNzZXRzSW5Hcm91cC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGdyb3VwQ29udGFpbmVyID0gdGhpcy5hc3NldHNDb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1jb250YWluZXInIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gWW91ciBleGlzdGluZyBpc0NvbGxhcHNlZCBjYWxjdWxhdGlvbiBoZXJlIChmcm9tIHByZXZpb3VzIGNoYW5nZXMpXG4gICAgICAgIGNvbnN0IGlzTW9udGhseUdyb3VwID0gL15cXGR7NH0tXFxkezJ9JC8udGVzdChncm91cEluZm8ua2V5KTtcbiAgICAgICAgbGV0IGlzQ29sbGFwc2VkO1xuICAgICAgICBpZiAoaXNNb250aGx5R3JvdXApIHtcbiAgICAgICAgICAgIGlzQ29sbGFwc2VkID0gdGhpcy5jb2xsYXBzZWRBc3NldEdyb3Vwc1tncm91cEluZm8ua2V5XSAhPT0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpc0NvbGxhcHNlZCA9IHRoaXMuY29sbGFwc2VkQXNzZXRHcm91cHNbZ3JvdXBJbmZvLmtleV0gPT09IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQ29sbGFwc2VkKSBncm91cENvbnRhaW5lci5hZGRDbGFzcygnaXMtY29sbGFwc2VkJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBIZWFkZXIgY3JlYXRpb24gYW5kIGNsaWNrIGhhbmRsZXIgKHVuY2hhbmdlZCBmcm9tIHByZXZpb3VzKVxuICAgICAgICBjb25zdCBoZWFkZXIgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLWdyb3VwLWhlYWRlcicgfSk7XG4gICAgICAgIGNvbnN0IGhlYWRlckNvbnRlbnQgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1oZWFkZXItY29udGVudCcgfSk7XG4gICAgICAgIGNvbnN0IGNvbGxhcHNlSWNvbiA9IGhlYWRlckNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1jb2xsYXBzZS1pY29uJyB9KTtcbiAgICAgICAgc2V0SWNvbihjb2xsYXBzZUljb24sICdjaGV2cm9uLWRvd24nKTtcbiAgICAgICAgaGVhZGVyQ29udGVudC5jcmVhdGVTcGFuKHsgdGV4dDogZ3JvdXBJbmZvLmxhYmVsIH0pO1xuICAgICAgICBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1jb3VudCcsIHRleHQ6IGFzc2V0c0luR3JvdXAubGVuZ3RoLnRvU3RyaW5nKCkgfSk7XG5cbiAgICAgICAgaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNDdXJyZW50bHlDb2xsYXBzZWQgPSBncm91cENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdpcy1jb2xsYXBzZWQnKTtcbiAgICAgICAgICAgIHRoaXMuY29sbGFwc2VkQXNzZXRHcm91cHNbZ3JvdXBJbmZvLmtleV0gPSBpc0N1cnJlbnRseUNvbGxhcHNlZDtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBORVc6IFJlLW9ic2VydmUgbGF6eS1sb2FkZWQgaW1hZ2VzIGFmdGVyIGV4cGFuc2lvbiAoZml4ZXMgY3V0b2ZmL2JsYW5rIGltYWdlcylcbiAgICAgICAgICAgIGlmICghaXNDdXJyZW50bHlDb2xsYXBzZWQgJiYgdGhpcy5pc0Fzc2V0c0dyaWRWaWV3KSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyaWRJdGVtcyA9IGdyb3VwQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5hc3NldC1ncmlkLWl0ZW0gaW1nW2RhdGEtc3JjXScpO1xuICAgICAgICAgICAgICAgICAgICBncmlkSXRlbXMuZm9yRWFjaChpbWcgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltZy5kYXRhc2V0LnNyYykgeyAgLy8gT25seSBvYnNlcnZlIHVubG9hZGVkIGltYWdlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXRPYnNlcnZlci5vYnNlcnZlKGltZy5jbG9zZXN0KCcuYXNzZXQtZ3JpZC1pdGVtJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LCAxNTApOyAgLy8gU2xpZ2h0bHkgbG9uZ2VyIGRlbGF5IGZvciBzbW9vdGggQ1NTIHRyYW5zaXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgbGlzdFdyYXBwZXIgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLWxpc3Qtd3JhcHBlcicgfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5pc0Fzc2V0c0dyaWRWaWV3KSB7XG4gICAgICAgICAgICBsaXN0V3JhcHBlci5hZGRDbGFzcygnYXNzZXRzLWdyaWQtdmlldycpO1xuICAgICAgICAgICAgYXNzZXRzSW5Hcm91cC5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBsaXN0V3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6ICdhc3NldC1ncmlkLWl0ZW0nIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlQb3B1cFRyaWdnZXIoaXRlbSwgZmlsZSwgJ2Fzc2V0Jyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgcHJldmlldyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiAnYXNzZXQtZ3JpZC1wcmV2aWV3JyB9KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0ltYWdlQXNzZXQoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGh1bWJuYWlsID0gcHJldmlldy5jcmVhdGVFbCgnaW1nJywgeyBhdHRyOiB7ICdkYXRhLXNyYyc6IHRoaXMuYXBwLnZhdWx0LmdldFJlc291cmNlUGF0aChmaWxlKSB9IH0pO1xuICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWwuYWx0ID0gZmlsZS5uYW1lOyAgLy8gRm9yIGFjY2Vzc2liaWxpdHlcbiAgICAgICAgICAgICAgICAgICAgLy8gT2JzZXJ2ZXIgd2lsbCBsb2FkIHRoaXMgb24gdmlzaWJpbGl0eVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEljb24ocHJldmlldywgJ2ZpbGUtcXVlc3Rpb24nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaXRlbS5jcmVhdGVEaXYoeyB0ZXh0OiBmaWxlLm5hbWUsIGNsczogJ2Fzc2V0LWdyaWQtbmFtZScgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gTkVXOiBJbml0aWFsbHkgb2JzZXJ2ZSBhbGwgbmV3IGdyaWQgaXRlbXMgZm9yIGxhenkgbG9hZGluZ1xuICAgICAgICAgICAgICAgIHRoaXMuYXNzZXRPYnNlcnZlci5vYnNlcnZlKGl0ZW0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBZb3VyIGxpc3QgdmlldyBjb2RlIHVuY2hhbmdlZC4uLlxuICAgICAgICAgICAgLy8gUGFzdGUgeW91ciBleGlzdGluZyBsaXN0IHZpZXcgcmVuZGVyaW5nIGhlcmUgKGUuZy4sIGxpc3RXcmFwcGVyLnJlbW92ZUNsYXNzKCdhc3NldHMtZ3JpZC12aWV3Jyk7IGFzc2V0c0luR3JvdXAuZm9yRWFjaChmaWxlID0+IHsgY29uc3Qgcm93ID0gLi4uIH0pOyApXG4gICAgICAgICAgICBsaXN0V3JhcHBlci5yZW1vdmVDbGFzcygnYXNzZXRzLWdyaWQtdmlldycpO1xuICAgICAgICAgICAgYXNzZXRzSW5Hcm91cC5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvdyA9IGxpc3RXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogJ25vdGUtcm93JyB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5UG9wdXBUcmlnZ2VyKHJvdywgZmlsZSwgJ2Fzc2V0Jyk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBpc1VudXNlZCA9IHVudXNlZEFzc2V0UGF0aHMuaGFzKGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGl0bGVXcmFwcGVyID0gcm93LmNyZWF0ZURpdih7IGNsczogJ25vdGUtdGl0bGUtd3JhcHBlcicgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaWNvbkNvbnRhaW5lciA9IHRpdGxlV3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6ICdhc3NldC1pY29uLWNvbnRhaW5lcicgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0ltYWdlQXNzZXQoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGh1bWJuYWlsID0gaWNvbkNvbnRhaW5lci5jcmVhdGVFbCgnaW1nJywgeyBjbHM6ICdhc3NldC10aHVtYm5haWwnIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWwuc3JjID0gdGhpcy5hcHAudmF1bHQuZ2V0UmVzb3VyY2VQYXRoKGZpbGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEljb24oaWNvbkNvbnRhaW5lciwgJ2ZpbGUtdGV4dCcpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUZpbGVDbGljayhmaWxlLCBlKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChpc1VudXNlZCAmJiBzZXR0aW5ncy5zaG93VW51c2VkQXNzZXRzSW5kaWNhdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdGlvbkljb25Db250YWluZXIgPSB0aXRsZVdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiAnYXNzZXQtYWN0aW9uLWljb24nIH0pO1xuICAgICAgICAgICAgICAgICAgICBzZXRJY29uKGFjdGlvbkljb25Db250YWluZXIsICd0cmFzaCcpO1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb25JY29uQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZURlbGV0ZUZpbGUoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRpdGxlV3JhcHBlci5jcmVhdGVEaXYoeyB0ZXh0OiBmaWxlLm5hbWUsIGNsczogJ25vdGUtdGl0bGUnIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgbWV0YUNvbnRhaW5lciA9IHJvdy5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLW1ldGEtY29udGFpbmVyJyB9KTtcbiAgICAgICAgICAgICAgICBtZXRhQ29udGFpbmVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiB0aGlzLmZvcm1hdEZpbGVTaXplKGZpbGUuc3RhdC5zaXplKSwgY2xzOiAnbm90ZS1maWxlLXNpemUnIH0pO1xuICAgICAgICAgICAgICAgIG1ldGFDb250YWluZXIuY3JlYXRlU3Bhbih7IHRleHQ6IHRoaXMuZm9ybWF0RGF0ZVRpbWUobmV3IERhdGUoZmlsZS5zdGF0Lm10aW1lKSksIGNsczogJ25vdGUtbW9kLWRhdGUnIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuXG4gICAgICAgIHRoaXMuYXNzZXRzQ29udGVudEVsLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFzc2V0c0NvbnRlbnRFbC5zdHlsZS50cmFuc2l0aW9uID0gJ29wYWNpdHkgMC4ycyc7XG4gICAgICAgICAgICB0aGlzLmFzc2V0c0NvbnRlbnRFbC5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuXG5cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGZpbmFsLCBvcmRlcmVkIGxpc3Qgb2YgdGFicyB0byBkaXNwbGF5LCBjb21iaW5pbmcgdXNlci1kZWZpbmVkIG9yZGVyXG4gICAgICogd2l0aCB0aGUgZnVsbCBsaXN0IG9mIHBvc3NpYmxlIHRhYnMgdG8gZW5zdXJlIG5vbmUgYXJlIG1pc3NpbmcuXG4gICAgICogQHJldHVybnMge3N0cmluZ1tdfSBBbiBhcnJheSBvZiB0YWIga2V5cyBpbiB0aGUgY29ycmVjdCBvcmRlci5cbiAgICAgKi9cbiAgICBnZXRGaW5hbFRhYk9yZGVyKCkge1xuICAgICAgICBjb25zdCBhbGxQb3NzaWJsZVRhYnMgPSBPYmplY3Qua2V5cyh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJWaXNpYmlsaXR5KTtcbiAgICAgICAgY29uc3QgdXNlclRhYk9yZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiT3JkZXIgfHwgYWxsUG9zc2libGVUYWJzO1xuICAgICAgICAvLyBVc2UgYSBTZXQgdG8gbWVyZ2UgdGhlIHVzZXIncyBvcmRlciB3aXRoIGFsbCBwb3NzaWJsZSB0YWJzLCBlbnN1cmluZyBubyBkdXBsaWNhdGVzIGFuZCB0aGF0IG5ldyB0YWJzIGFyZSBhcHBlbmRlZC5cbiAgICAgICAgY29uc3QgZmluYWxUYWJPcmRlciA9IFsuLi5uZXcgU2V0KFsuLi51c2VyVGFiT3JkZXIsIC4uLmFsbFBvc3NpYmxlVGFic10pXTtcbiAgICAgICAgcmV0dXJuIGZpbmFsVGFiT3JkZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5vbi1NYXJrZG93biBmaWxlIHRvIHRoZSBgYXNzZXRDcmVhdGlvbk1hcGAuXG4gICAgICogQHBhcmFtIHtURmlsZX0gZmlsZSBUaGUgYXNzZXQgZmlsZSB0byBhZGQuXG4gICAgICovXG4gICAgYWRkRmlsZVRvQXNzZXRNYXAoZmlsZSkge1xuICAgICAgICBpZiAoZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5tZCcpKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgaWdub3JlRm9sZGVycyA9ICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hc3NldElnbm9yZUZvbGRlcnMgfHwgW10pLm1hcChmID0+IGYudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLycpID8gZi50b0xvd2VyQ2FzZSgpIDogZi50b0xvd2VyQ2FzZSgpICsgJy8nKTtcbiAgICAgICAgY29uc3QgZmlsZVBhdGhMb3dlciA9IGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAoaWdub3JlRm9sZGVycy5zb21lKGZvbGRlciA9PiBmb2xkZXIgJiYgZmlsZVBhdGhMb3dlci5zdGFydHNXaXRoKGZvbGRlcikpKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgY2RhdGUgPSBuZXcgRGF0ZShmaWxlLnN0YXQuY3RpbWUpO1xuICAgICAgICBjb25zdCBkYXRlS2V5ID0gbW9tZW50KGNkYXRlKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xuICAgICAgICBpZiAoIXRoaXMuYXNzZXRDcmVhdGlvbk1hcC5oYXMoZGF0ZUtleSkpIHtcbiAgICAgICAgICAgIHRoaXMuYXNzZXRDcmVhdGlvbk1hcC5zZXQoZGF0ZUtleSwgW10pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFzc2V0cyA9IHRoaXMuYXNzZXRDcmVhdGlvbk1hcC5nZXQoZGF0ZUtleSk7XG4gICAgICAgIGlmICghYXNzZXRzLnNvbWUoZiA9PiBmLnBhdGggPT09IGZpbGUucGF0aCkpIHtcbiAgICAgICAgICAgIGFzc2V0cy5wdXNoKGZpbGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIG5vbi1NYXJrZG93biBmaWxlIGZyb20gdGhlIGBhc3NldENyZWF0aW9uTWFwYCBieSBpdHMgcGF0aC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZVBhdGggVGhlIHBhdGggb2YgdGhlIGFzc2V0IGZpbGUgdG8gcmVtb3ZlLlxuICAgICAqL1xuICAgIHJlbW92ZUZpbGVGcm9tQXNzZXRNYXAoZmlsZVBhdGgpIHtcbiAgICAgICAgaWYgKGZpbGVQYXRoLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5tZCcpKSByZXR1cm47XG5cbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBmaWxlc10gb2YgdGhpcy5hc3NldENyZWF0aW9uTWFwLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlZEZpbGVzID0gZmlsZXMuZmlsdGVyKGYgPT4gZi5wYXRoICE9PSBmaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAodXBkYXRlZEZpbGVzLmxlbmd0aCA8IGZpbGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICh1cGRhdGVkRmlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXRDcmVhdGlvbk1hcC5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2V0Q3JlYXRpb25NYXAuc2V0KGtleSwgdXBkYXRlZEZpbGVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGhvdmVyIGV2ZW50IGxpc3RlbmVycyB0byB0YWJsZSBoZWFkZXJzIHRvIGhpZ2hsaWdodCB0aGUgZW50aXJlIGNvbHVtbi5cbiAgICAgKiBUaGlzIHZlcnNpb24gZml4ZXMgdHdvIGJ1Z3M6XG4gICAgICogMS4gQSByYWNlIGNvbmRpdGlvbiBvbiBpbml0aWFsIGxvYWQgYnkgcXVlcnlpbmcgZm9yIHJvd3MgaW5zaWRlIHRoZSBldmVudCBsaXN0ZW5lci5cbiAgICAgKiAyLiBBIHN0YXRlIGNvbmZsaWN0IGJ5IGludGVsbGlnZW50bHkgcmVzdG9yaW5nIHRoZSBjdXJyZW50IHdlZWsgaGlnaGxpZ2h0IG9uIG1vdXNlbGVhdmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0hUTUxUYWJsZVJvd0VsZW1lbnR9IGhlYWRlclJvdyBUaGUgPHRyPiBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIGhlYWRlciBjZWxscy5cbiAgICAgKiBAcGFyYW0ge0hUTUxUYWJsZVNlY3Rpb25FbGVtZW50fSB0YWJsZUJvZHkgVGhlIDx0Ym9keT4gZWxlbWVudCBvZiB0aGUgY2FsZW5kYXIgdGFibGUuXG4gICAgICovXG4gICAgYWRkQ29sdW1uSGlnaGxpZ2h0aW5nKGhlYWRlclJvdywgdGFibGVCb2R5KSB7XG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQ29sdW1uSGlnaGxpZ2h0KSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgaGVhZGVyQ2VsbHMgPSBoZWFkZXJSb3cucXVlcnlTZWxlY3RvckFsbChcInRoXCIpO1xuICAgICAgICBjb25zdCBoaWdobGlnaHRDb2xvciA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd0aGVtZS1kYXJrJylcbiAgICAgICAgICAgID8gdGhpcy5wbHVnaW4uc2V0dGluZ3Mucm93SGlnaGxpZ2h0Q29sb3JEYXJrXG4gICAgICAgICAgICA6IHRoaXMucGx1Z2luLnNldHRpbmdzLnJvd0hpZ2hsaWdodENvbG9yTGlnaHQ7XG5cbiAgICAgICAgaGVhZGVyQ2VsbHMuZm9yRWFjaCgodGgsIGNvbEluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoLnRleHRDb250ZW50LnRyaW0oKSkgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvd3MgPSB0YWJsZUJvZHkucXVlcnlTZWxlY3RvckFsbCgndHInKTtcbiAgICAgICAgICAgICAgICB0aC5jbGFzc0xpc3QuYWRkKCdjb2x1bW4taG92ZXInKTtcbiAgICAgICAgICAgICAgICByb3dzLmZvckVhY2gocm93ID0+IHJvdy5jaGlsZHJlbltjb2xJbmRleF0/LmNsYXNzTGlzdC5hZGQoJ2NvbHVtbi1ob3ZlcicpKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvd3MgPSB0YWJsZUJvZHkucXVlcnlTZWxlY3RvckFsbCgndHInKTtcbiAgICAgICAgICAgICAgICB0aC5jbGFzc0xpc3QucmVtb3ZlKCdjb2x1bW4taG92ZXInKTtcbiAgICAgICAgICAgICAgICByb3dzLmZvckVhY2gocm93ID0+IHJvdy5jaGlsZHJlbltjb2xJbmRleF0/LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbHVtbi1ob3ZlcicpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFBvcHVsYXRlcyBhIGdpdmVuIEhUTUwgZWxlbWVudCB3aXRoIHRoZSBzdHlsZWQgbW9udGggYW5kIHllYXIgdGl0bGUsXG4gICAgICogcmVzcGVjdGluZyBhbGwgdXNlciBzZXR0aW5ncy4gVGhpcyBpcyB0aGUgc2luZ2xlIHNvdXJjZSBvZiB0cnV0aCBmb3IgYWxsIHRpdGxlcy5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXRFbCBUaGUgZWxlbWVudCB0byBwb3B1bGF0ZS5cbiAgICAgKiBAcGFyYW0ge0RhdGV9IGRhdGUgVGhlIGRhdGUgdG8gZGlzcGxheS5cbiAgICAgKi9cbiAgICBwb3B1bGF0ZVN0eWxlZFRpdGxlKHRhcmdldEVsLCBkYXRlKSB7XG4gICAgICAgIGlmICghdGFyZ2V0RWwpIHJldHVybjtcblxuICAgICAgICB0YXJnZXRFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnN0IGZvcm1hdCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm1vbnRoVGl0bGVGb3JtYXQgfHwgXCJNTU1NIFlZWVlcIjtcbiAgICAgICAgY29uc3QgZm9ybWF0UGFydHMgPSBmb3JtYXQuc3BsaXQoJyAnKTtcblxuICAgICAgICBmb3JtYXRQYXJ0cy5mb3JFYWNoKChwYXJ0LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNZZWFyID0gL1tZeV0vLnRlc3QocGFydCk7XG5cbiAgICAgICAgICAgIHRhcmdldEVsLmNyZWF0ZVNwYW4oe1xuICAgICAgICAgICAgICAgIGNsczogaXNZZWFyID8gJ21vbnRoLXRpdGxlLXllYXInIDogJ21vbnRoLXRpdGxlLW1vbnRoJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBtb21lbnQoZGF0ZSkuZm9ybWF0KHBhcnQpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBub3QgdGhlIGxhc3QgcGFydCwgYXBwZW5kIGEgTk9OLUJSRUFLSU5HIHNwYWNlLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgb25seSByZWxpYWJsZSB3YXkgdG8gZW5zdXJlIGEgc3BhY2UgaXMgcmVuZGVyZWQgaW4gYSBmbGV4IGNvbnRhaW5lci5cbiAgICAgICAgICAgIGlmIChpbmRleCA8IGZvcm1hdFBhcnRzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRFbC5hcHBlbmRUZXh0KCdcXHUwMEEwJyk7IC8vIFRoaXMgaXMgdGhlIHVuaWNvZGUgZm9yIGEgbm9uLWJyZWFraW5nIHNwYWNlICgmbmJzcDspXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogRm9ybWF0cyB0aGUgcGVyaW9kIGFuZCB3ZWVrIG51bWJlcnMgYWNjb3JkaW5nIHRvIHRoZSB1c2VyJ3MgcHJlZmVyZW5jZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGVyaW9kIFRoZSBwZXJpb2QgbnVtYmVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3ZWVrIFRoZSB3ZWVrIG51bWJlci5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIHN0cmluZy5cbiAgICAgKi9cbiAgICBmb3JtYXRQVyhwZXJpb2QsIHdlZWspIHsgcmV0dXJuIHRoaXMucGx1Z2luLnNldHRpbmdzLnB3Rm9ybWF0LnJlcGxhY2UoJyMnLCBwZXJpb2QpLnJlcGxhY2UoJyMnLCB3ZWVrKTsgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyB0aGUgaW5maW5pdGUtc2Nyb2xsaW5nIHZlcnRpY2FsIGNhbGVuZGFyIHZpZXcuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIFRoZSBwYXJlbnQgZWxlbWVudCB0byByZW5kZXIgaW50by5cbiAgICAgKi9cbiAgICByZW5kZXJWZXJ0aWNhbENhbGVuZGFyKGNvbnRhaW5lcikge1xuICAgICAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyPy5kaXNjb25uZWN0KCk7XG5cbiAgICAgICAgLy8gRklYIDE6IFRoZSB2YXJpYWJsZSBpcyBub3cgYSBjbGFzcyBwcm9wZXJ0eSBgdGhpcy52ZXJ0aWNhbFNjcm9sbGVyRWxgXG4gICAgICAgIHRoaXMudmVydGljYWxTY3JvbGxlckVsID0gY29udGFpbmVyLmNyZWF0ZURpdihcInZlcnRpY2FsLWNhbGVuZGFyLXNjcm9sbGVyXCIpO1xuXG4gICAgICAgIGNvbnN0IGluaXRpYWxNb250aElkID0gYG1vbnRoLSR7dGhpcy5kaXNwbGF5ZWRNb250aC5nZXRGdWxsWWVhcigpfS0ke3RoaXMuZGlzcGxheWVkTW9udGguZ2V0TW9udGgoKX1gO1xuICAgICAgICBjb25zdCBudW1Nb250aHNBZnRlciA9IDEyO1xuICAgICAgICBmb3IgKGxldCBpID0gLTY7IGkgPD0gbnVtTW9udGhzQWZ0ZXI7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgbW9udGhEYXRlID0gbmV3IERhdGUodGhpcy5kaXNwbGF5ZWRNb250aC5nZXRGdWxsWWVhcigpLCB0aGlzLmRpc3BsYXllZE1vbnRoLmdldE1vbnRoKCkgKyBpLCAxKTtcblxuICAgICAgICAgICAgLy8gRklYIDI6IFVzZSB0aGUgbmV3IGNsYXNzIHByb3BlcnR5IGhlcmVcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoV3JhcHBlciA9IHRoaXMudmVydGljYWxTY3JvbGxlckVsLmNyZWF0ZURpdih7IGNsczogXCJ2ZXJ0aWNhbC1tb250aC13cmFwcGVyXCIgfSk7XG5cbiAgICAgICAgICAgIG1vbnRoV3JhcHBlci5pZCA9IGBtb250aC0ke21vbnRoRGF0ZS5nZXRGdWxsWWVhcigpfS0ke21vbnRoRGF0ZS5nZXRNb250aCgpfWA7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgbW9udGggdGl0bGUgaGVhZGluZyBmb3IgdGhlIHZlcnRpY2FsIGxpc3QuXG4gICAgICAgICAgICBjb25zdCBtb250aFRpdGxlRWwgPSBtb250aFdyYXBwZXIuY3JlYXRlRWwoXCJoM1wiLCB7XG4gICAgICAgICAgICAgICAgY2xzOiBcInZlcnRpY2FsLW1vbnRoLXRpdGxlXCIsXG4gICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBpbml0aWFsIHRleHQgdXNpbmcgdGhlIHNpbXBsZSBmb3JtYXR0ZXIuXG4gICAgICAgICAgICAgICAgdGV4dDogZm9ybWF0TW9udGhUaXRsZShtb250aERhdGUsIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vbnRoVGl0bGVGb3JtYXQpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG1vbnRoVGl0bGVFbC5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcblxuICAgICAgICAgICAgbGV0IGhvdmVyVGltZW91dDtcblxuICAgICAgICAgICAgbW9udGhUaXRsZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQWZ0ZXIgNDAwbXMsIHVzZSBvdXIgbmV3IGhlbHBlciB0byBidWlsZCB0aGUgcGVyZmVjdGx5IGNvbnNpc3RlbnQsIHN0eWxlZCB0aXRsZS5cbiAgICAgICAgICAgICAgICBob3ZlclRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZVN0eWxlZFRpdGxlKG1vbnRoVGl0bGVFbCwgbW9udGhEYXRlKTtcbiAgICAgICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG1vbnRoVGl0bGVFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChob3ZlclRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIC8vIE9uIGxlYXZlLCByZXZlcnQgYmFjayB0byB0aGUgc2ltcGxlIHRleHQgZm9ybWF0LlxuICAgICAgICAgICAgICAgIG1vbnRoVGl0bGVFbC5lbXB0eSgpO1xuICAgICAgICAgICAgICAgIG1vbnRoVGl0bGVFbC5zZXRUZXh0KGZvcm1hdE1vbnRoVGl0bGUobW9udGhEYXRlLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb250aFRpdGxlRm9ybWF0KSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbW9udGhUaXRsZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIENsaWNrIGxvZ2ljIHJlbWFpbnMgdGhlIHNhbWUuXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5ZWRNb250aCA9IG1vbnRoRGF0ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVmVydGljYWxWaWV3ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCB0YWJsZSA9IG1vbnRoV3JhcHBlci5jcmVhdGVFbChcInRhYmxlXCIsIHsgY2xzOiBcInBlcmlvZC1jYWxlbmRhci10YWJsZVwiIH0pO1xuICAgICAgICAgICAgY29uc3QgdGhlYWQgPSB0YWJsZS5jcmVhdGVFbChcInRoZWFkXCIpO1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gdGhlYWQuY3JlYXRlRWwoXCJ0clwiKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dQV0NvbHVtbikge1xuICAgICAgICAgICAgICAgIGhlYWRlclJvdy5jcmVhdGVFbChcInRoXCIsIHsgdGV4dDogXCIgXCIgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1dlZWtOdW1iZXJzKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUm93LmNyZWF0ZUVsKFwidGhcIiwgeyB0ZXh0OiB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrTnVtYmVyQ29sdW1uTGFiZWwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzdGFydERheU9mZnNldCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtTdGFydERheSA9PT0gJ21vbmRheScgPyAxIDogMDtcbiAgICAgICAgICAgIGZvciAobGV0IGQgPSAwOyBkIDwgNzsgZCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF5SW5kZXggPSAoZCArIHN0YXJ0RGF5T2Zmc2V0KSAlIDc7XG4gICAgICAgICAgICAgICAgaGVhZGVyUm93LmNyZWF0ZUVsKFwidGhcIiwgeyB0ZXh0OiBtb21lbnQoKS5kYXkoZGF5SW5kZXgpLmZvcm1hdChcImRkZFwiKS50b1VwcGVyQ2FzZSgpIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgdG9kYXkncyBoZWFkZXIgaGlnaGxpZ2h0XG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0VG9kYXlEYXlIZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1vbnRoRGF0ZS5nZXRGdWxsWWVhcigpID09PSB0b2RheS5nZXRGdWxsWWVhcigpICYmIG1vbnRoRGF0ZS5nZXRNb250aCgpID09PSB0b2RheS5nZXRNb250aCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvZGF5SGVhZGVySW5kZXggPSBBcnJheS5mcm9tKGhlYWRlclJvdy5jaGlsZHJlbikuZmluZEluZGV4KHRoID0+IHRoLnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCkgPT09IG1vbWVudCh0b2RheSkuZm9ybWF0KFwiZGRkXCIpLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9kYXlIZWFkZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlclJvdy5jaGlsZHJlblt0b2RheUhlYWRlckluZGV4XS5hZGRDbGFzcyhcInRvZGF5LWRheS1oZWFkZXJcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHRib2R5ID0gdGFibGUuY3JlYXRlRWwoXCJ0Ym9keVwiKTtcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aEdyaWQobW9udGhEYXRlLCB0Ym9keSk7XG4gICAgICAgICAgICB0aGlzLmFkZENvbHVtbkhpZ2hsaWdodGluZyhoZWFkZXJSb3csIHRib2R5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFmdGVyIHRoZSBsYXlvdXQgaXMgcmVhZHksIHNjcm9sbCB0aGUgaW5pdGlhbCBtb250aCBpbnRvIHZpZXcuXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcbiAgICAgICAgICAgIC8vIFNFVCBGTEFHIGJlZm9yZSBzY3JvbGxpbmdcbiAgICAgICAgICAgIHRoaXMuaXNQcm9ncmFtbWF0aWNTY3JvbGwgPSB0cnVlO1xuXG4gICAgICAgICAgICBjb25zdCBpbml0aWFsRWwgPSB0aGlzLnZlcnRpY2FsU2Nyb2xsZXJFbC5xdWVyeVNlbGVjdG9yKGAjJHtpbml0aWFsTW9udGhJZH1gKTtcbiAgICAgICAgICAgIGlmIChpbml0aWFsRWwpIHtcbiAgICAgICAgICAgICAgICBpbml0aWFsRWwuc2Nyb2xsSW50b1ZpZXcoeyBibG9jazogJ3N0YXJ0JyB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ0xFQVIgRkxBRyBhZnRlciBzY3JvbGwgY29tcGxldGVzXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzUHJvZ3JhbW1hdGljU2Nyb2xsID0gZmFsc2U7XG4gICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBVc2UgYSBzY3JvbGwgbGlzdGVuZXIgdG8gdXBkYXRlIHRoZSBtYWluIGhlYWRlciB0aXRsZS5cbiAgICAgICAgdGhpcy52ZXJ0aWNhbFNjcm9sbGVyRWwuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gaWYgcHJvZ3JhbW1hdGljIHNjcm9sbCBpcyBpbiBwcm9ncmVzcywgZG8gbm90aGluZ1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNQcm9ncmFtbWF0aWNTY3JvbGwpIHJldHVybjtcblxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGl0bGVVcGRhdGVUaW1lb3V0KTtcbiAgICAgICAgICAgIHRoaXMudGl0bGVVcGRhdGVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHRvcG1vc3RWaXNpYmxlTW9udGggPSBudWxsO1xuICAgICAgICAgICAgICAgIGxldCBzbWFsbGVzdFRvcFZhbHVlID0gSW5maW5pdHk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2Nyb2xsZXJUb3AgPSB0aGlzLnZlcnRpY2FsU2Nyb2xsZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9udGhFbGVtZW50cyA9IHRoaXMudmVydGljYWxTY3JvbGxlckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy52ZXJ0aWNhbC1tb250aC13cmFwcGVyJyk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1vbnRoRWwgb2YgbW9udGhFbGVtZW50cykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb250aFRvcCA9IG1vbnRoRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgICAgICAgICAgICAgICBpZiAobW9udGhUb3AgPCBzY3JvbGxlclRvcCAmJiBtb250aFRvcCA+IHNtYWxsZXN0VG9wVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtYWxsZXN0VG9wVmFsdWUgPSBtb250aFRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcG1vc3RWaXNpYmxlTW9udGggPSBtb250aEVsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRvcG1vc3RWaXNpYmxlTW9udGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgWywgeWVhciwgbW9udGhdID0gdG9wbW9zdFZpc2libGVNb250aC5pZC5zcGxpdCgnLScpLm1hcChOdW1iZXIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kaXNwbGF5ZWRNb250aC5nZXRGdWxsWWVhcigpICE9PSB5ZWFyIHx8IHRoaXMuZGlzcGxheWVkTW9udGguZ2V0TW9udGgoKSAhPT0gbW9udGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheWVkTW9udGggPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1vbnRoVGl0bGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVG9kYXlCdG5BcmlhTGFiZWwoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIG9uY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuYXNzZXRPYnNlcnZlcj8uZGlzY29ubmVjdCgpO1xuICAgICAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyPy5kaXNjb25uZWN0KCk7XG4gICAgICAgIGlmICh0aGlzLmRhaWx5UmVmcmVzaFRpbWVvdXQpIGNsZWFyVGltZW91dCh0aGlzLmRhaWx5UmVmcmVzaFRpbWVvdXQpO1xuICAgICAgICBpZiAodGhpcy5zdGF0dXNCYXJPYnNlcnZlcikgdGhpcy5zdGF0dXNCYXJPYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBBIGhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgYSBzdGFuZGFyZGl6ZWQgc2VhcmNoIGlucHV0IHdpdGggYSBjbGVhciBidXR0b24uXG4gICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIgVGhlIHBhcmVudCBlbGVtZW50LlxuICAgICogQHBhcmFtIHtzdHJpbmd9IHBsYWNlaG9sZGVyIFRoZSBwbGFjZWhvbGRlciB0ZXh0IGZvciB0aGUgaW5wdXQuXG4gICAgKiBAcGFyYW0geyh0ZXJtOiBzdHJpbmcpID0+IHZvaWR9IG9uSW5wdXQgVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgb24gaW5wdXQuXG4gICAgKiBAcmV0dXJucyB7SFRNTElucHV0RWxlbWVudH0gVGhlIGNyZWF0ZWQgaW5wdXQgZWxlbWVudC5cbiAgICAqL1xuICAgIHNldHVwU2VhcmNoSW5wdXQoY29udGFpbmVyLCBwbGFjZWhvbGRlciwgc3VnZ2VzdGlvbkl0ZW1zLCBvbklucHV0KSB7XG4gICAgICAgIGNvbnN0IGlucHV0RWwgPSBjb250YWluZXIuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBwbGFjZWhvbGRlcixcbiAgICAgICAgICAgIGNsczogXCJwbS1zZWFyY2gtaW5wdXRcIiAvLyBVc2UgYSBjb25zaXN0ZW50IGNsYXNzXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEF0dGFjaCB0aGUgc3VnZ2VzdGVyLCBwYXNzaW5nIHRoZSBvbklucHV0IGNhbGxiYWNrIHRvIGJlIHVzZWQgdXBvbiBzZWxlY3Rpb24uXG4gICAgICAgIGlmIChzdWdnZXN0aW9uSXRlbXMgJiYgc3VnZ2VzdGlvbkl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG5ldyBGaWx0ZXJTdWdnZXN0KHRoaXMuYXBwLCBpbnB1dEVsLCBzdWdnZXN0aW9uSXRlbXMsIG9uSW5wdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBjbGVhciBidXR0b24gaW5zaWRlIHRoaXMgZnVuY3Rpb25cbiAgICAgICAgY29uc3QgY2xlYXJCdXR0b24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInNlYXJjaC1pbnB1dC1jbGVhci1idG5cIiB9KTtcbiAgICAgICAgc2V0SWNvbihjbGVhckJ1dHRvbiwgXCJ4XCIpO1xuXG4gICAgICAgIGNsZWFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgd2FzRm9jdXNlZCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGlucHV0RWw7XG5cbiAgICAgICAgICAgIGlucHV0RWwudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgaW5wdXRFbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnKSk7XG5cbiAgICAgICAgICAgIGlmICh3YXNGb2N1c2VkKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRFbC5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGVybSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgY2xlYXJCdXR0b24uc3R5bGUudmlzaWJpbGl0eSA9IHRlcm0gPyAndmlzaWJsZScgOiAnaGlkZGVuJztcbiAgICAgICAgICAgIG9uSW5wdXQodGVybSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGlucHV0RWwudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICBpbnB1dEVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdpbnB1dCcpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc3VnZ2VzdGVyIGlzIGFjdGl2ZS4gSWYgc28sIGxldCBpdCBoYW5kbGUgdGhlIGV2ZW50LlxuICAgICAgICAgICAgICAgIGNvbnN0IHN1Z2dlc3RlciA9IHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVFZGl0b3JTdWdnZXN0O1xuICAgICAgICAgICAgICAgIGlmICghc3VnZ2VzdGVyIHx8ICFzdWdnZXN0ZXIuaXNPcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgb25JbnB1dChpbnB1dEVsLnZhbHVlKTsgLy8gTWFudWFsbHkgdHJpZ2dlciBzZWFyY2ggb24gRW50ZXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnQXJyb3dEb3duJykge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBzdWdnZXN0ZXIgaXMgYWN0aXZlLiBJZiBzbywgZG8gbm90IGludGVyZmVyZS5cbiAgICAgICAgICAgICAgICBjb25zdCBzdWdnZXN0ZXIgPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlRWRpdG9yU3VnZ2VzdDtcbiAgICAgICAgICAgICAgICBpZiAoc3VnZ2VzdGVyICYmIHN1Z2dlc3Rlci5pc09wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIElmIG5vIHN1Z2dlc3RlciwgcHJvY2VlZCB3aXRoIGN1c3RvbSBuYXZpZ2F0aW9uLlxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50RWwgPSB0aGlzLmFjdGl2ZVRhYiA9PT0gJ25vdGVzJyA/IHRoaXMubm90ZXNDb250ZW50RWwgOiB0aGlzLnRhc2tzQ29udGVudEVsO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcubm90ZS1yb3csIC50YXNrLXJvdycpO1xuICAgICAgICAgICAgICAgIGlmIChmaXJzdEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RJdGVtLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5hcHAuaXNNb2JpbGUpIHtcbiAgICAgICAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWxlbmRhcldhc0NvbGxhcHNlZEZvckVkaXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgY2FsbCBoYW5kbGVzIHN0YXRlLCBjbGFzcywgQU5EIGljb24uXG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVDYWxlbmRhcih0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgcmFjZSBjb25kaXRpb25cbiAgICAgICAgICAgICAgICBpZiAoZS5yZWxhdGVkVGFyZ2V0ID09PSB0aGlzLmNvbGxhcHNlQnRuKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIHByb2NlZWQgd2l0aCBhdXRvLWV4cGFuc2lvbiBsb2dpYy5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYWxlbmRhcldhc0NvbGxhcHNlZEZvckVkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxlbmRhcldhc0NvbGxhcHNlZEZvckVkaXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVDYWxlbmRhcihmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlucHV0RWw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB1cCB0aGUgdGFiIGNvbnRhaW5lciwgY3JlYXRpbmcgZHJhZ2dhYmxlIHRhYnMgd2l0aCBjbGljayBhbmQgZG91YmxlLWNsaWNrIGJlaGF2aW9ycy5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YWJDb250YWluZXIgVGhlIHBhcmVudCBlbGVtZW50IGZvciB0aGUgdGFicy5cbiAgICAgKiBAcGFyYW0geyh0YWI6IHN0cmluZykgPT4gdm9pZH0gc3dpdGNoVGFicyBUaGUgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIGEgdGFiIGlzIGNsaWNrZWQuXG4gICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCBIVE1MRWxlbWVudD59IEEgbWFwIG9mIHRhYiBrZXlzIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgSFRNTCBlbGVtZW50cy5cbiAgICAgKi9cbiAgICBzZXR1cERyYWdnYWJsZVRhYnModGFiQ29udGFpbmVyLCBzd2l0Y2hUYWJzKSB7XG4gICAgICAgIHRhYkNvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICBjb25zdCB0YWJPcmRlciA9IHRoaXMuZ2V0RmluYWxUYWJPcmRlcigpXG4gICAgICAgICAgICAuZmlsdGVyKGtleSA9PiB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJWaXNpYmlsaXR5W2tleV0pO1xuXG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnRzID0ge307XG4gICAgICAgIGNvbnN0IHRvb2x0aXBMYWJlbHMgPSB7XG4gICAgICAgICAgICBzY3JhdGNoOiBcIlNjcmF0Y2hQYWRcIixcbiAgICAgICAgICAgIG5vdGVzOiBcIlJlY2VudCBOb3Rlc1wiLFxuICAgICAgICAgICAgcGlubmVkOiBcIlBpbm5lZCBOb3Rlc1wiLFxuICAgICAgICAgICAgdGFza3M6IFwiVGFza3NcIixcbiAgICAgICAgICAgIGFzc2V0czogXCJBc3NldHNcIixcbiAgICAgICAgICAgIGRhc2hib2FyZDogJ0Rhc2hib2FyZCdcbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB0YWJPcmRlcikge1xuICAgICAgICAgICAgY29uc3QgdGFiRWwgPSB0YWJDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcIm5vdGUtdGFiXCIgfSk7XG4gICAgICAgICAgICB0aGlzLmdldFRhYkxhYmVsKHRhYkVsLCBrZXkpO1xuICAgICAgICAgICAgdGFiRWwuZGF0YXNldC50YWJLZXkgPSBrZXk7XG5cbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxUb29sdGlwID0ga2V5ID09PSAnbm90ZXMnXG4gICAgICAgICAgICAgICAgPyAodGhpcy5ub3Rlc1ZpZXdNb2RlID09PSAncGlubmVkJyA/IHRvb2x0aXBMYWJlbHMucGlubmVkIDogdG9vbHRpcExhYmVscy5ub3RlcylcbiAgICAgICAgICAgICAgICA6IHRvb2x0aXBMYWJlbHNba2V5XTtcbiAgICAgICAgICAgIHRhYkVsLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGluaXRpYWxUb29sdGlwKTtcblxuICAgICAgICAgICAgdGFiRWxlbWVudHNba2V5XSA9IHRhYkVsO1xuXG4gICAgICAgICAgICB0YWJFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSAnc2NyYXRjaCcgJiYgZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5TY3JhdGNocGFkRmlsZSh0cnVlKTsgLy8gRm9yY2UgbmV3IHRhYlxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBzZWNvbmQgY2xpY2sgb24gYW4gYWxyZWFkeSBhY3RpdmUgdGFiLCB3aGljaCB0cmlnZ2VycyBhIHNwZWNpYWwgYWN0aW9uLlxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSAnc2NyYXRjaCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3BlblNjcmF0Y2hwYWRGaWxlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAndGFza3MnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50R3JvdXBCeSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tHcm91cEJ5O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3R3JvdXBCeSA9IGN1cnJlbnRHcm91cEJ5ID09PSAnZGF0ZScgPyAndGFnJyA6ICdkYXRlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tHcm91cEJ5ID0gbmV3R3JvdXBCeTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRUYWJMYWJlbCh0YWJFbCwgJ3Rhc2tzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBvcHVsYXRlVGFza3MoKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2Fzc2V0cycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNBc3NldHNHcmlkVmlldyA9ICF0aGlzLmlzQXNzZXRzR3JpZFZpZXc7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFRhYkxhYmVsKHRhYkVsLCAnYXNzZXRzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBvcHVsYXRlQXNzZXRzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQXNzZXRzR3JpZFZpZXcgPyAnZ3JpZCcgOiAnbGlzdCc7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnbm90ZXMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGVzVmlld01vZGUgPSB0aGlzLm5vdGVzVmlld01vZGUgPT09ICdyZWNlbnQnID8gJ3Bpbm5lZCcgOiAncmVjZW50JztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVzVmlld01vZGUgPSB0aGlzLm5vdGVzVmlld01vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VGFiTGFiZWwodGFiRWwsICdub3RlcycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VG9vbHRpcCA9IHRoaXMubm90ZXNWaWV3TW9kZSA9PT0gJ3Bpbm5lZCcgPyB0b29sdGlwTGFiZWxzLnBpbm5lZCA6IHRvb2x0aXBMYWJlbHMubm90ZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJFbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBuZXdUb29sdGlwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wb3B1bGF0ZU5vdGVzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnZGFzaGJvYXJkJykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUb2dnbGUgYmV0d2VlbiB0aGUgdHdvIGRhc2hib2FyZCB2aWV3c1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXNoYm9hcmRWaWV3TW9kZSA9IHRoaXMuZGFzaGJvYXJkVmlld01vZGUgPT09ICdjcmVhdGlvbicgPyAndGFza3MnIDogJ2NyZWF0aW9uJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VGFiTGFiZWwodGFiRWwsICdkYXNoYm9hcmQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wb3B1bGF0ZURhc2hib2FyZCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgZmlyc3QgY2xpY2ssIGp1c3Qgc3dpdGNoIHRvIHRoZSB0YWIuXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaFRhYnMoa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGFiRWwuZHJhZ2dhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRhYkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIGtleSk7XG4gICAgICAgICAgICAgICAgZS5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9ICdtb3ZlJztcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRhYkVsLmNsYXNzTGlzdC5hZGQoJ2RyYWdnaW5nJyksIDApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRhYkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCAoKSA9PiB0YWJFbC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnZ2luZycpKTtcblxuICAgICAgICAgICAgdGFiRWwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0FmdGVyID0gZS5jbGllbnRYID4gcmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDI7XG5cbiAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyLWluZGljYXRvci1iZWZvcmUnLCAnZHJhZy1vdmVyLWluZGljYXRvci1hZnRlcicpO1xuICAgICAgICAgICAgICAgIGlmIChpc0FmdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdkcmFnLW92ZXItaW5kaWNhdG9yLWFmdGVyJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2RyYWctb3Zlci1pbmRpY2F0b3ItYmVmb3JlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRhYkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWctb3Zlci1pbmRpY2F0b3ItYmVmb3JlJywgJ2RyYWctb3Zlci1pbmRpY2F0b3ItYWZ0ZXInKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0YWJFbC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWctb3Zlci1pbmRpY2F0b3ItYmVmb3JlJywgJ2RyYWctb3Zlci1pbmRpY2F0b3ItYWZ0ZXInKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGRyYWdnZWRLZXkgPSBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0S2V5ID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudGFiS2V5O1xuICAgICAgICAgICAgICAgIGlmIChkcmFnZ2VkS2V5ID09PSB0YXJnZXRLZXkpIHJldHVybjtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNBZnRlciA9IGUuY2xpZW50WCA+IHJlY3QubGVmdCArIHJlY3Qud2lkdGggLyAyO1xuXG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRPcmRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYk9yZGVyO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld09yZGVyID0gY3VycmVudE9yZGVyLmZpbHRlcihrID0+IGsgIT09IGRyYWdnZWRLZXkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEluZGV4ID0gbmV3T3JkZXIuaW5kZXhPZih0YXJnZXRLZXkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzQWZ0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3T3JkZXIuc3BsaWNlKHRhcmdldEluZGV4ICsgMSwgMCwgZHJhZ2dlZEtleSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3T3JkZXIuc3BsaWNlKHRhcmdldEluZGV4LCAwLCBkcmFnZ2VkS2V5KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJPcmRlciA9IG5ld09yZGVyO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcblxuICAgICAgICAgICAgICAgIG5ld09yZGVyLmZvckVhY2goayA9PiB0YWJDb250YWluZXIuYXBwZW5kQ2hpbGQodGFiRWxlbWVudHNba10pKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YWJFbGVtZW50cztcbiAgICB9XG5cbiAgICB1cGRhdGVEYXlIZWFkZXJIaWdobGlnaHQoKSB7XG4gICAgICAgIC8vIDEuIElmIHRoZSBoZWFkZXIgcm93IGRvZXNuJ3QgZXhpc3QgeWV0LCBkbyBub3RoaW5nLlxuICAgICAgICBpZiAoIXRoaXMuY2FsZW5kYXJIZWFkZXJSb3dFbCkgcmV0dXJuO1xuXG4gICAgICAgIC8vIDIuIEdldCBhbGwgdGhlIGhlYWRlciBjZWxscyAoJ3RoJyBlbGVtZW50cykuXG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0aGlzLmNhbGVuZGFySGVhZGVyUm93RWwucXVlcnlTZWxlY3RvckFsbCgndGgnKTtcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAgIC8vIDMuIElNUE9SVEFOVDogUmVtb3ZlIHRoZSBoaWdobGlnaHQgZnJvbSBldmVyeSBoZWFkZXIgZmlyc3QgdG8gcmVzZXQgdGhlbS5cbiAgICAgICAgaGVhZGVycy5mb3JFYWNoKHRoID0+IHRoLmNsYXNzTGlzdC5yZW1vdmUoJ3RvZGF5LWRheS1oZWFkZXInKSk7XG5cbiAgICAgICAgLy8gNC4gSWYgdGhlIHVzZXIgaGFzIHRoaXMgZmVhdHVyZSB0dXJuZWQgb2ZmIGluIHNldHRpbmdzLCBzdG9wIGhlcmUuXG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0VG9kYXlEYXlIZWFkZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDUuIENoZWNrIGlmIHRoZSBtb250aC95ZWFyIGJlaW5nIGRpc3BsYXllZCBpcyB0aGUgYWN0dWFsIGN1cnJlbnQgbW9udGgveWVhci5cbiAgICAgICAgY29uc3QgaXNDdXJyZW50TW9udGggPSB0aGlzLmRpc3BsYXllZE1vbnRoLmdldEZ1bGxZZWFyKCkgPT09IHRvZGF5LmdldEZ1bGxZZWFyKCkgJiZcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheWVkTW9udGguZ2V0TW9udGgoKSA9PT0gdG9kYXkuZ2V0TW9udGgoKTtcblxuICAgICAgICAvLyA2LiBPbmx5IGlmIGl0IElTIHRoZSBjdXJyZW50IG1vbnRoLCBhcHBseSB0aGUgaGlnaGxpZ2h0LlxuICAgICAgICBpZiAoaXNDdXJyZW50TW9udGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvZGF5RGF5T2ZXZWVrID0gdG9kYXkuZ2V0RGF5KCk7IC8vIFN1bmRheT0wLCBNb25kYXk9MS4uLlxuICAgICAgICAgICAgY29uc3Qgd2Vla1N0YXJ0c09uTW9uZGF5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla1N0YXJ0RGF5ID09PSAnbW9uZGF5JztcblxuICAgICAgICAgICAgbGV0IHRvZGF5Q29sdW1uSW5kZXg7XG4gICAgICAgICAgICBpZiAod2Vla1N0YXJ0c09uTW9uZGF5KSB7XG4gICAgICAgICAgICAgICAgdG9kYXlDb2x1bW5JbmRleCA9ICh0b2RheURheU9mV2VlayA9PT0gMCkgPyA2IDogdG9kYXlEYXlPZldlZWsgLSAxOyAvLyBNb249MCwgVHVlPTEuLlN1bj02XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRvZGF5Q29sdW1uSW5kZXggPSB0b2RheURheU9mV2VlazsgLy8gU3VuPTAsIE1vbj0xLi4uXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFjY291bnQgZm9yIHRoZSBleHRyYSBjb2x1bW5zIHlvdSBtaWdodCBoYXZlIChQVywgV2Vla05yKVxuICAgICAgICAgICAgbGV0IG9mZnNldCA9IDA7XG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1BXQ29sdW1uKSBvZmZzZXQrKztcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93V2Vla051bWJlcnMpIG9mZnNldCsrO1xuXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRUaCA9IGhlYWRlcnNbdG9kYXlDb2x1bW5JbmRleCArIG9mZnNldF07XG4gICAgICAgICAgICBpZiAodGFyZ2V0VGgpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRUaC5jbGFzc0xpc3QuYWRkKCd0b2RheS1kYXktaGVhZGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbWFpbiByZW5kZXIgZnVuY3Rpb24gZm9yIHRoZSBlbnRpcmUgdmlldy4gSXQgYnVpbGRzIHRoZSBET00gZnJvbSBzY3JhdGNoLlxuICAgICAqL1xuICAgIGFzeW5jIHJlbmRlcigpIHtcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBmaXJzdCB2aXNpYmxlIHRhYiB0byBiZSB0aGUgZGVmYXVsdCBhY3RpdmUgdGFiLlxuICAgICAgICBjb25zdCBmaW5hbFRhYk9yZGVyID0gdGhpcy5nZXRGaW5hbFRhYk9yZGVyKCk7XG4gICAgICAgIGNvbnN0IHZpc2libGVUYWJzID0gZmluYWxUYWJPcmRlci5maWx0ZXIoa2V5ID0+IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYlZpc2liaWxpdHlba2V5XSk7XG5cbiAgICAgICAgLy8gT25seSByZXNldCB0aGUgYWN0aXZlIHRhYiBpZiBpdCdzIG5vdCBzZXQgb3IgaGFzIGJlY29tZSBpbnZpc2libGVcbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZVRhYiB8fCAhdmlzaWJsZVRhYnMuaW5jbHVkZXModGhpcy5hY3RpdmVUYWIpKSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYiA9IHZpc2libGVUYWJzWzBdIHx8IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KFwicGVyaW9kLW1vbnRoLWNvbnRhaW5lclwiKTtcbiAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKGBsYXlvdXQtJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckxheW91dH1gKTtcbiAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKGB0b2RheS1zdHlsZS0ke3RoaXMucGx1Z2luLnNldHRpbmdzLnRvZGF5SGlnaGxpZ2h0U3R5bGV9YCk7XG4gICAgICAgIGNvbnRhaW5lci50b2dnbGVDbGFzcyhcImhpZGUtZ3JpZFwiLCAhdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0NhbGVuZGFyR3JpZExpbmVzKTtcbiAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJjYWxlbmRhci1jb2xsYXBzZWRcIiwgdGhpcy5pc0NhbGVuZGFyQ29sbGFwc2VkKTtcbiAgICAgICAgY29udGFpbmVyLnRvZ2dsZUNsYXNzKFwidmVydGljYWwtdmlldy1hY3RpdmVcIiwgdGhpcy5pc1ZlcnRpY2FsVmlldyk7XG4gICAgICAgIGNvbnRhaW5lci50b2dnbGVDbGFzcygnbW9uZGF5LXN0YXJ0JywgdGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla1N0YXJ0RGF5ID09PSAnbW9uZGF5Jyk7XG5cbiAgICAgICAgLy8gQWRkIHdlZWtlbmQgc2hhZGluZyBjbGFzc2VzXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRXZWVrZW5kcykge1xuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKCd3ZWVrZW5kLXNoYWRpbmctZW5hYmxlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dQV0NvbHVtbikge1xuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKCdoYXMtcHctY29sdW1uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1dlZWtOdW1iZXJzKSB7XG4gICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoJ2hhcy13ZWVrLW51bWJlcnMnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLSBIZWFkZXIgYW5kIE5hdmlnYXRpb24gLS0tXG4gICAgICAgIGNvbnN0IGhlYWRlckRpdiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoXCJtb250aC1oZWFkZXJcIik7XG5cbiAgICAgICAgdGhpcy5tb250aE5hbWVFbCA9IGhlYWRlckRpdi5jcmVhdGVEaXYoeyBjbHM6IFwibW9udGgtaGVhZGVyLXRpdGxlXCIgfSk7XG4gICAgICAgIHRoaXMudXBkYXRlTW9udGhUaXRsZSgpO1xuICAgICAgICB0aGlzLm1vbnRoTmFtZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gU0VUIFRIRSBGTEFHIGJlZm9yZSBzd2l0Y2hpbmcgdmlld3NcbiAgICAgICAgICAgIHRoaXMuaXNQcm9ncmFtbWF0aWNTY3JvbGwgPSB0cnVlO1xuXG4gICAgICAgICAgICB0aGlzLmlzVmVydGljYWxWaWV3ID0gIXRoaXMuaXNWZXJ0aWNhbFZpZXc7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuXG4gICAgICAgICAgICAvLyBDTEVBUiBUSEUgRkxBRyBhZnRlciByZW5kZXIgYW5kIGluaXRpYWwgc2Nyb2xsIGNvbXBsZXRlXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzUHJvZ3JhbW1hdGljU2Nyb2xsID0gZmFsc2U7XG4gICAgICAgICAgICB9LCA4MDApOyAgLy8gTG9uZ2VyIGRlbGF5IGZvciBpbml0aWFsIHZpZXcgcmVuZGVyIG9uIG1vYmlsZVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbmF2RGl2ID0gaGVhZGVyRGl2LmNyZWF0ZURpdih7IGNsczogXCJtb250aC1oZWFkZXItbmF2XCIgfSk7XG5cbiAgICAgICAgY29uc3QgYmFja0J0biA9IG5hdkRpdi5jcmVhdGVFbChcImJ1dHRvblwiKTtcbiAgICAgICAgYmFja0J0bi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiUHJldmlvdXMgbW9udGhcIik7XG4gICAgICAgIHNldEljb24oYmFja0J0biwgXCJjaGV2cm9uLWxlZnRcIik7XG4gICAgICAgIGJhY2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1ZlcnRpY2FsVmlldykge1xuICAgICAgICAgICAgICAgIC8vIFNFVCBGTEFHXG4gICAgICAgICAgICAgICAgdGhpcy5pc1Byb2dyYW1tYXRpY1Njcm9sbCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXllZE1vbnRoLnNldE1vbnRoKHRoaXMuZGlzcGxheWVkTW9udGguZ2V0TW9udGgoKSAtIDEsIDEpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0TW9udGhJZCA9IGBtb250aC0ke3RoaXMuZGlzcGxheWVkTW9udGguZ2V0RnVsbFllYXIoKX0tJHt0aGlzLmRpc3BsYXllZE1vbnRoLmdldE1vbnRoKCl9YDtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRFbCA9IHRoaXMudmVydGljYWxTY3JvbGxlckVsPy5xdWVyeVNlbGVjdG9yKGAjJHt0YXJnZXRNb250aElkfWApO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldEVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEVsLnNjcm9sbEludG9WaWV3KHsgYmxvY2s6ICdzdGFydCcsIGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNb250aFRpdGxlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVG9kYXlCdG5BcmlhTGFiZWwoKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDTEVBUiBGTEFHXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1Byb2dyYW1tYXRpY1Njcm9sbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VNb250aCgtMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBTdG9yZSByZWZlcmVuY2UgYW5kIGFkZCBuZXcgZXZlbnQgbGlzdGVuZXIgZm9yIHRoZSBcIlRvZGF5XCIgYnV0dG9uXG4gICAgICAgIGNvbnN0IHRvZGF5QnRuID0gbmF2RGl2LmNyZWF0ZUVsKCdidXR0b24nKTtcbiAgICAgICAgdGhpcy50b2RheUJ0biA9IHRvZGF5QnRuO1xuICAgICAgICBzZXRJY29uKHRvZGF5QnRuLCAnY2FsZW5kYXItY2xvY2snKTtcblxuICAgICAgICAvLyBBcHBseSBpbml0aWFsIHN0eWxlIGFuZCBBUklBIGxhYmVsIG9uIHJlbmRlclxuICAgICAgICBpZiAodGhpcy5pc1BvcHVwTG9ja2VkKSB7XG4gICAgICAgICAgICB0aGlzLnRvZGF5QnRuLmNsYXNzTGlzdC5hZGQoJ3BvcHVwLWxvY2tlZCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlVG9kYXlCdG5BcmlhTGFiZWwoKTtcblxuICAgICAgICB0b2RheUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblxuICAgICAgICAgICAgdGhpcy5nb1RvQ3VycmVudE1vbnRoKCk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRW5zdXJlIHRoZSBidXR0b24gc3R5bGUgaXMgY29ycmVjdCBvbiByZS1yZW5kZXJcbiAgICAgICAgaWYgKHRoaXMuaXNQb3B1cExvY2tlZCkge1xuICAgICAgICAgICAgdGhpcy50b2RheUJ0bi5jbGFzc0xpc3QuYWRkKCdwb3B1cC1sb2NrZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZvcndhcmRCdG4gPSBuYXZEaXYuY3JlYXRlRWwoXCJidXR0b25cIik7XG4gICAgICAgIGZvcndhcmRCdG4uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBcIk5leHQgbW9udGhcIik7XG4gICAgICAgIHNldEljb24oZm9yd2FyZEJ0biwgXCJjaGV2cm9uLXJpZ2h0XCIpO1xuICAgICAgICBmb3J3YXJkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNWZXJ0aWNhbFZpZXcpIHtcbiAgICAgICAgICAgICAgICAvLyBTRVQgRkxBR1xuICAgICAgICAgICAgICAgIHRoaXMuaXNQcm9ncmFtbWF0aWNTY3JvbGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheWVkTW9udGguc2V0TW9udGgodGhpcy5kaXNwbGF5ZWRNb250aC5nZXRNb250aCgpICsgMSwgMSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRNb250aElkID0gYG1vbnRoLSR7dGhpcy5kaXNwbGF5ZWRNb250aC5nZXRGdWxsWWVhcigpfS0ke3RoaXMuZGlzcGxheWVkTW9udGguZ2V0TW9udGgoKX1gO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEVsID0gdGhpcy52ZXJ0aWNhbFNjcm9sbGVyRWw/LnF1ZXJ5U2VsZWN0b3IoYCMke3RhcmdldE1vbnRoSWR9YCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0RWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RWwuc2Nyb2xsSW50b1ZpZXcoeyBibG9jazogJ3N0YXJ0JywgYmVoYXZpb3I6ICdzbW9vdGgnIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1vbnRoVGl0bGUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUb2RheUJ0bkFyaWFMYWJlbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIENMRUFSIEZMQUdcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUHJvZ3JhbW1hdGljU2Nyb2xsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZU1vbnRoKDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjb2xsYXBzZUJ0biA9IG5hdkRpdi5jcmVhdGVFbChcImJ1dHRvblwiKTtcbiAgICAgICAgdGhpcy5jb2xsYXBzZUJ0biA9IGNvbGxhcHNlQnRuO1xuICAgICAgICBjb2xsYXBzZUJ0bi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiVG9nZ2xlIGNhbGVuZGFyIHZpc2liaWxpdHlcIik7XG5cbiAgICAgICAgLy9zZXRJY29uKHRoaXMuY29sbGFwc2VCdG4sIHRoaXMuaXNDYWxlbmRhckNvbGxhcHNlZCA/IFwiY2hldnJvbi11cFwiIDogXCJjaGV2cm9uLWRvd25cIik7XG4gICAgICAgIHNldEljb24odGhpcy5jb2xsYXBzZUJ0biwgJ2NoZXZyb24tZG93bicpO1xuXG5cbiAgICAgICAgdGhpcy5jb2xsYXBzZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBtYW51YWwgdXNlciBhY3Rpb24sIHNvIHJlc2V0IHRoZSBcImVkaXRpbmdcIiBmbGFnLlxuICAgICAgICAgICAgdGhpcy5jYWxlbmRhcldhc0NvbGxhcHNlZEZvckVkaXRpbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgLy8gVXNlIHRoZSBoZWxwZXIgdG8gdG9nZ2xlIHRvIHRoZSBvcHBvc2l0ZSBvZiB0aGUgY3VycmVudCBzdGF0ZS5cbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQ2FsZW5kYXIoIXRoaXMuaXNDYWxlbmRhckNvbGxhcHNlZCk7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSByZXN1bHQgb2YgdGhlIHRvZ2dsZSBpcyB0aGF0IHRoZSBjYWxlbmRhciBpcyBub3cgZXhwYW5kZWQsXG4gICAgICAgICAgICAvLyBkaXNtaXNzIGFueSBhY3RpdmUga2V5Ym9hcmQuXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDYWxlbmRhckNvbGxhcHNlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYmx1ckFjdGl2ZUlucHV0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIC0tLSBDYWxlbmRhciBSZW5kZXJpbmcgKFZlcnRpY2FsIG9yIEhvcml6b250YWwpIC0tLVxuICAgICAgICBpZiAodGhpcy5pc1ZlcnRpY2FsVmlldykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJWZXJ0aWNhbENhbGVuZGFyKGNvbnRhaW5lcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0YWJsZVdyYXBwZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcImNhbGVuZGFyLXRhYmxlLXdyYXBwZXJcIiB9KTtcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gdGFibGVXcmFwcGVyLmNyZWF0ZUVsKFwidGFibGVcIiwgeyBjbHM6IFwicGVyaW9kLWNhbGVuZGFyLXRhYmxlXCIgfSk7XG4gICAgICAgICAgICB0aGlzLmF0dGFjaFN3aXBlTGlzdGVuZXJzKHRhYmxlV3JhcHBlciwgaGVhZGVyRGl2KTtcbiAgICAgICAgICAgIGNvbnN0IHRoZWFkID0gdGFibGUuY3JlYXRlRWwoJ3RoZWFkJyk7XG4gICAgICAgICAgICB0aGlzLmNhbGVuZGFySGVhZGVyUm93RWwgPSB0aGVhZC5jcmVhdGVFbCgndHInKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dQV0NvbHVtbikge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJIZWFkZXJSb3dFbC5jcmVhdGVFbCgndGgnLCB7IHRleHQ6ICcnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dXZWVrTnVtYmVycykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJIZWFkZXJSb3dFbC5jcmVhdGVFbCgndGgnLCB7IHRleHQ6IHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtOdW1iZXJDb2x1bW5MYWJlbCB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc3RhcnREYXlPZmZzZXQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrU3RhcnREYXkgPT09ICdtb25kYXknID8gMSA6IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBkID0gMDsgZCA8IDc7IGQrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRheUluZGV4ID0gKGQgKyBzdGFydERheU9mZnNldCkgJSA3O1xuICAgICAgICAgICAgICAgIC8vIE5vdGU6IFRoZSBoaWdobGlnaHRpbmcgbG9naWMgaGFzIGJlZW4gY29tcGxldGVseSByZW1vdmVkIGZyb20gdGhpcyBsb29wXG4gICAgICAgICAgICAgICAgdGhpcy5jYWxlbmRhckhlYWRlclJvd0VsLmNyZWF0ZUVsKCd0aCcsIHsgdGV4dDogbW9tZW50KCkuZGF5KGRheUluZGV4KS5mb3JtYXQoJ2RkZCcpLnRvVXBwZXJDYXNlKCkgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJCb2R5RWwgPSB0YWJsZS5jcmVhdGVFbChcInRib2R5XCIpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRDb2x1bW5IaWdobGlnaHRpbmcodGhpcy5jYWxlbmRhckhlYWRlclJvd0VsLCB0aGlzLmNhbGVuZGFyQm9keUVsKTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgLy8gQWRkIHRoaXMgbGluZSByaWdodCBoZXJlIHRvIHNldCB0aGUgaGlnaGxpZ2h0IGNvcnJlY3RseSBvbiB0aGUgZmlyc3QgbG9hZFxuICAgICAgICAgICAgdGhpcy51cGRhdGVEYXlIZWFkZXJIaWdobGlnaHQoKTtcblxuICAgICAgICAgICAgLy8gLS0tIFRhYnMgYW5kIENvbnRlbnQgUGFuZWxzIC0tLVxuICAgICAgICAgICAgY29uc3QgdGFiV3JhcHBlciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoXCJ0YWJzLWNvbnRlbnQtd3JhcHBlclwiKTtcbiAgICAgICAgICAgIGNvbnN0IGFyZVRhYnNWaXNpYmxlID0gT2JqZWN0LnZhbHVlcyh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJWaXNpYmlsaXR5KS5zb21lKHZpc2libGUgPT4gdmlzaWJsZSk7XG4gICAgICAgICAgICBpZiAoIWFyZVRhYnNWaXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgdGFiV3JhcHBlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoXCJ0YWJzLWFyZS12aXNpYmxlXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB0YWJIZWFkZXIgPSB0YWJXcmFwcGVyLmNyZWF0ZURpdihcIm5vdGUtdGFiLWhlYWRlclwiKTtcbiAgICAgICAgICAgIGNvbnN0IHRhYkNvbnRhaW5lciA9IHRhYkhlYWRlci5jcmVhdGVEaXYoXCJ0YWItY29udGFpbmVyXCIpO1xuICAgICAgICAgICAgY29uc3Qgc2VhcmNoV3JhcHBlciA9IHRhYkhlYWRlci5jcmVhdGVEaXYoXCJzZWFyY2gtd3JhcHBlclwiKTtcblxuICAgICAgICAgICAgY29uc3Qgc2NyYXRjaHBhZFNlYXJjaENvbnRhaW5lciA9IHNlYXJjaFdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiBcInBtLXNlYXJjaC1jb250YWluZXJcIiB9KTtcbiAgICAgICAgICAgIGNvbnN0IG5vdGVzU2VhcmNoQ29udGFpbmVyID0gc2VhcmNoV3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6IFwicG0tc2VhcmNoLWNvbnRhaW5lclwiIH0pO1xuICAgICAgICAgICAgY29uc3QgYXNzZXRzU2VhcmNoQ29udGFpbmVyID0gc2VhcmNoV3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6IFwicG0tc2VhcmNoLWNvbnRhaW5lclwiIH0pO1xuICAgICAgICAgICAgY29uc3QgdGFza3NTZWFyY2hDb250YWluZXIgPSBzZWFyY2hXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogXCJwbS1zZWFyY2gtY29udGFpbmVyXCIgfSk7XG4gICAgICAgICAgICBjb25zdCBkYXNoYm9hcmRTZWFyY2hDb250YWluZXIgPSBzZWFyY2hXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogXCJwbS1zZWFyY2gtY29udGFpbmVyXCIgfSk7IC8vIDw8PCBBREQgVEhJUyBMSU5FXG5cbiAgICAgICAgICAgIC8vIC0tIENPTlRFTlQgUEFORUxTIC0tXG4gICAgICAgICAgICB0aGlzLnNjcmF0Y2hXcmFwcGVyRWwgPSB0YWJXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogXCJzY3JhdGNocGFkLXdyYXBwZXJcIiB9KTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyU2NyYXRjaHBhZENvbnRlbnQoKTtcblxuICAgICAgICAgICAgdGhpcy5ub3Rlc0NvbnRlbnRFbCA9IHRhYldyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiBcIm5vdGVzLWNvbnRhaW5lclwiIH0pO1xuICAgICAgICAgICAgdGhpcy5hc3NldHNDb250ZW50RWwgPSB0YWJXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogXCJub3Rlcy1jb250YWluZXJcIiB9KTtcbiAgICAgICAgICAgIHRoaXMudGFza3NDb250ZW50RWwgPSB0YWJXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogXCJ0YXNrcy1jb250YWluZXJcIiB9KTtcbiAgICAgICAgICAgIHRoaXMuZGFzaGJvYXJkQ29udGVudEVsID0gdGFiV3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6IFwicG0tdGFiLWNvbnRlbnRcIiB9KTtcblxuICAgICAgICAgICAgdGhpcy50YXNrUmVmcmVzaEluZGljYXRvciA9IHRhYldyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiAncG0tcmVmcmVzaC1pbmRpY2F0b3InIH0pO1xuICAgICAgICAgICAgc2V0SWNvbih0aGlzLnRhc2tSZWZyZXNoSW5kaWNhdG9yLCAnYXJyb3ctZG93bicpO1xuXG4gICAgICAgICAgICAvLyBGdW5jdGlvbiB0byBoYW5kbGUgc3dpdGNoaW5nIGJldHdlZW4gdGFicy5cbiAgICAgICAgICAgIGNvbnN0IHN3aXRjaFRhYnMgPSAodGFiKSA9PiB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYiA9IHRhYjtcbiAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKHRhYkVsZW1lbnRzKS5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICBpZiAodGFiRWxlbWVudHNbdGFiXSkgdGFiRWxlbWVudHNbdGFiXS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcblxuICAgICAgICAgICAgICAgIC8vIFRvZ2dsZSB2aXNpYmlsaXR5IG9mIGNvbnRlbnQgcGFuZWxzIGFuZCB0aGVpciBjb3JyZXNwb25kaW5nIHNlYXJjaCBiYXJzLlxuICAgICAgICAgICAgICAgIHRoaXMuc2NyYXRjaFdyYXBwZXJFbC5zdHlsZS5kaXNwbGF5ID0gKHRhYiA9PT0gXCJzY3JhdGNoXCIpID8gXCJncmlkXCIgOiBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGVzQ29udGVudEVsLnN0eWxlLmRpc3BsYXkgPSAodGFiID09PSBcIm5vdGVzXCIpID8gXCJibG9ja1wiIDogXCJub25lXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NldHNDb250ZW50RWwuc3R5bGUuZGlzcGxheSA9ICh0YWIgPT09IFwiYXNzZXRzXCIpID8gXCJcIiA6IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIHRoaXMudGFza3NDb250ZW50RWwuc3R5bGUuZGlzcGxheSA9ICh0YWIgPT09IFwidGFza3NcIikgPyBcImJsb2NrXCIgOiBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB0aGlzLmRhc2hib2FyZENvbnRlbnRFbC5zdHlsZS5kaXNwbGF5ID0gKHRhYiA9PT0gJ2Rhc2hib2FyZCcpID8gJ2Jsb2NrJyA6ICdub25lJztcblxuICAgICAgICAgICAgICAgIHNjcmF0Y2hwYWRTZWFyY2hDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICh0YWIgPT09IFwic2NyYXRjaFwiKSA/IFwiZmxleFwiIDogXCJub25lXCI7XG4gICAgICAgICAgICAgICAgbm90ZXNTZWFyY2hDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICh0YWIgPT09IFwibm90ZXNcIikgPyBcImZsZXhcIiA6IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIGFzc2V0c1NlYXJjaENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gKHRhYiA9PT0gXCJhc3NldHNcIikgPyBcImZsZXhcIiA6IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIHRhc2tzU2VhcmNoQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAodGFiID09PSBcInRhc2tzXCIpID8gXCJmbGV4XCIgOiBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICBkYXNoYm9hcmRTZWFyY2hDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICh0YWIgPT09IFwiZGFzaGJvYXJkXCIpID8gXCJmbGV4XCIgOiBcIm5vbmVcIjtcblxuICAgICAgICAgICAgICAgIC8vIFBvcHVsYXRlIHRoZSBjb250ZW50IG9mIHRoZSBuZXdseSBhY3RpdmF0ZWQgdGFiLlxuICAgICAgICAgICAgICAgIGlmICh0YWIgPT09IFwibm90ZXNcIikgdGhpcy5wb3B1bGF0ZU5vdGVzKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRhYiA9PT0gXCJhc3NldHNcIikgdGhpcy5wb3B1bGF0ZUFzc2V0cygpO1xuICAgICAgICAgICAgICAgIGlmICh0YWIgPT09IFwidGFza3NcIikgdGhpcy5wb3B1bGF0ZVRhc2tzKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRhYiA9PT0gJ2Rhc2hib2FyZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSB2aWV3IHRvIHRoZSB1c2VyJ3MgZGVmYXVsdCBiZWZvcmUgcG9wdWxhdGluZ1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZGFzaGJvYXJkVmlld01vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGFzaGJvYXJkVmlld01vZGUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0RGFzaGJvYXJkVmlldztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdywgYWx3YXlzIHJlLXJlbmRlciB0aGUgbGFiZWwgYW5kIGNvbnRlbnQgYmFzZWQgb24gdGhlIENVUlJFTlQgc3RhdGUuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyBpdCByZW1lbWJlcnMgaWYgeW91J3ZlIHRvZ2dsZWQgaXQuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VGFiTGFiZWwodGFiRWxlbWVudHNbJ2Rhc2hib2FyZCddLCAnZGFzaGJvYXJkJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9wdWxhdGVEYXNoYm9hcmQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCB0YWJFbGVtZW50cyA9IHRoaXMuc2V0dXBEcmFnZ2FibGVUYWJzKHRhYkNvbnRhaW5lciwgc3dpdGNoVGFicyk7XG5cbiAgICAgICAgICAgIC8vIC0tIFNFQVJDSCBMT0dJQyAtLVxuICAgICAgICAgICAgdGhpcy5zY3JhdGNocGFkU2VhcmNoSW5wdXRFbCA9IHRoaXMuc2V0dXBTZWFyY2hJbnB1dChcbiAgICAgICAgICAgICAgICBzY3JhdGNocGFkU2VhcmNoQ29udGFpbmVyLFxuICAgICAgICAgICAgICAgICdTZWFyY2ggU2NyYXRjaFBhZC4uLicsXG4gICAgICAgICAgICAgICAgW10sIC8vIDwtLSBFbnN1cmUgdGhpcyBlbXB0eSBhcnJheSBpcyBoZXJlXG4gICAgICAgICAgICAgICAgKHRlcm0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JhdGNocGFkU2VhcmNoVGVybSA9IHRlcm07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2NyYXRjaHBhZEhpZ2hsaWdodHMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgbG9naWMgYnVnIGZyb20gdGhlIG9yaWdpbmFsIGNvZGU7IHRoaXMgbmVlZHMgdG8gYmUgaW5zaWRlIHRoZSBcImVsc2VcIiBibG9jayBvZiB0aGUgcHJldmlldyBtb2RlXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNTY3JhdGNocGFkUHJldmlldykge1xuICAgICAgICAgICAgICAgIHRoaXMubm90ZVRleHRhcmVhLnZhbHVlID0gdGhpcy5ub3RlVGV4dDtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGVUZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGVUZXh0ID0gdGhpcy5ub3RlVGV4dGFyZWEudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUZpeGVkTm90ZSh0aGlzLm5vdGVUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTY3JhdGNocGFkSGlnaGxpZ2h0cygpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RlVGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zY3JhdGNoSGlnaGxpZ2h0ZXJFbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JhdGNoSGlnaGxpZ2h0ZXJFbC5zY3JvbGxUb3AgPSB0aGlzLm5vdGVUZXh0YXJlYS5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcmF0Y2hIaWdobGlnaHRlckVsLnNjcm9sbExlZnQgPSB0aGlzLm5vdGVUZXh0YXJlYS5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG5vdGVzUGxhY2Vob2xkZXIgPSB0aGlzLm5vdGVzVmlld01vZGUgPT09ICdwaW5uZWQnID8gJ0ZpbHRlciBwaW5uZWQgbm90ZXMuLi4nIDogJ0ZpbHRlciByZWNlbnQgbm90ZXMuLi4nO1xuICAgICAgICAgICAgdGhpcy5ub3Rlc1NlYXJjaElucHV0RWwgPSB0aGlzLnNldHVwU2VhcmNoSW5wdXQobm90ZXNTZWFyY2hDb250YWluZXIsIG5vdGVzUGxhY2Vob2xkZXIsIFsnc3RhdHVzOnVubGlua2VkJ10sICh0ZXJtKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3Rlc1NlYXJjaFRlcm0gPSB0ZXJtO1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdWxhdGVOb3RlcygpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIEF0dGFjaCB0aGUgbmV3IHRhZyBzdWdnZXN0ZXIgdG8gdGhlIG5vdGVzIHNlYXJjaCBpbnB1dC5cbiAgICAgICAgICAgIG5ldyBUYWdTdWdnZXN0KHRoaXMuYXBwLCB0aGlzLm5vdGVzU2VhcmNoSW5wdXRFbCwgdGhpcyk7XG5cbiAgICAgICAgICAgIGNvbnN0IGhhc1VubGlua2VkQXNzZXRzID0gYXdhaXQgdGhpcy5oYXNVbmxpbmtlZEFzc2V0cygpO1xuICAgICAgICAgICAgY29uc3QgYXNzZXRzU3VnZ2VzdGlvbnMgPSBoYXNVbmxpbmtlZEFzc2V0cyA/IFsnc3RhdHVzOnVubGlua2VkJ10gOiBbXTtcbiAgICAgICAgICAgIHRoaXMuYXNzZXRzU2VhcmNoSW5wdXRFbCA9IHRoaXMuc2V0dXBTZWFyY2hJbnB1dChhc3NldHNTZWFyY2hDb250YWluZXIsICdGaWx0ZXIgYXNzZXRzLi4uJywgYXNzZXRzU3VnZ2VzdGlvbnMsICh0ZXJtKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NldHNTZWFyY2hUZXJtID0gdGVybTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVsYXRlQXNzZXRzKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy50YXNrc1NlYXJjaElucHV0RWwgPSB0aGlzLnNldHVwU2VhcmNoSW5wdXQodGFza3NTZWFyY2hDb250YWluZXIsICdGaWx0ZXIgdGFza3MuLi4nLCBbXSwgKHRlcm0pID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2tzU2VhcmNoVGVybSA9IHRlcm07XG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZVRhc2tzKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gQXR0YWNoIHRoZSB0YWcgc3VnZ2VzdGVyIHRvIHRoZSB0YXNrcyBzZWFyY2ggaW5wdXQgYXMgd2VsbC5cbiAgICAgICAgICAgIG5ldyBUYWdTdWdnZXN0KHRoaXMuYXBwLCB0aGlzLnRhc2tzU2VhcmNoSW5wdXRFbCwgdGhpcyk7XG5cbiAgICAgICAgICAgIHRoaXMuZGFzaGJvYXJkU2VhcmNoSW5wdXRFbCA9IHRoaXMuc2V0dXBTZWFyY2hJbnB1dCggLy8gPDw8IEFERCBUSElTIEJMT0NLXG4gICAgICAgICAgICAgICAgZGFzaGJvYXJkU2VhcmNoQ29udGFpbmVyLFxuICAgICAgICAgICAgICAgICdGaWx0ZXIgd2lkZ2V0cy4uLicsXG4gICAgICAgICAgICAgICAgW10sIC8vIE5vIHN1Z2dlc3Rpb25zIG5lZWRlZCBmb3Igd2lkZ2V0IGZpbHRlcmluZ1xuICAgICAgICAgICAgICAgICh0ZXJtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGFzaGJvYXJkU2VhcmNoVGVybSA9IHRlcm07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9wdWxhdGVEYXNoYm9hcmQoKTsgLy8gUmUtcmVuZGVyIHRoZSBkYXNoYm9hcmQgd2l0aCB0aGUgZmlsdGVyIGFwcGxpZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNjcmF0Y2hwYWRTZWFyY2hDb3VudCgpO1xuICAgICAgICAgICAgc3dpdGNoVGFicyh0aGlzLmFjdGl2ZVRhYik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hcHBseUZvbnRTZXR0aW5ncygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSA0LXN0ZXAgY29sb3IgZ3JhZGllbnQgZnJvbSBhIHNpbmdsZSBiYXNlIFJHQkEgY29sb3IuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGJhc2VDb2xvciAtIFRoZSBSR0JBIGNvbG9yIHN0cmluZyBmcm9tIHNldHRpbmdzIChlLmcuLCBcInJnYmEoNzQsIDE0NCwgMjI2LCAxKVwiKS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nW119IEFuIGFycmF5IG9mIDQgUkdCQSBjb2xvciBzdHJpbmdzIHdpdGggdmFyeWluZyBvcGFjaXR5LlxuICAgICAqL1xuICAgIGNyZWF0ZUNvbG9yR3JhZGllbnQoYmFzZUNvbG9yKSB7XG4gICAgICAgIC8vIEZhbGxiYWNrIGdyYWRpZW50IGluIGNhc2UgdGhlIGlucHV0IGNvbG9yIGlzIGludmFsaWRcbiAgICAgICAgY29uc3QgZmFsbGJhY2tHcmFkaWVudCA9IFsnIzRBMjcxRScsICcjRDM1NDAwJywgJyNGMzlDMTInLCAnI0ZGQjc0RCddO1xuXG4gICAgICAgIGlmICghYmFzZUNvbG9yIHx8ICFiYXNlQ29sb3Iuc3RhcnRzV2l0aCgncmdiYScpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsbGJhY2tHcmFkaWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGJhc2VDb2xvci5tYXRjaCgvKFxcZCspL2cpO1xuICAgICAgICAgICAgaWYgKCFwYXJ0cyB8fCBwYXJ0cy5sZW5ndGggPCAzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbGxiYWNrR3JhZGllbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBbciwgZywgYl0gPSBwYXJ0cztcblxuICAgICAgICAgICAgLy8gUmV0dXJuIGEgNC1zdGVwIGdyYWRpZW50IGJ5IHZhcnlpbmcgdGhlIGFscGhhIGNoYW5uZWxcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgYHJnYmEoJHtyfSwgJHtnfSwgJHtifSwgMC40KWAsIC8vIExpZ2h0ZXN0IHNoYWRlIGZvciBsb3cgYWN0aXZpdHlcbiAgICAgICAgICAgICAgICBgcmdiYSgke3J9LCAke2d9LCAke2J9LCAwLjYpYCxcbiAgICAgICAgICAgICAgICBgcmdiYSgke3J9LCAke2d9LCAke2J9LCAwLjgpYCxcbiAgICAgICAgICAgICAgICBgcmdiYSgke3J9LCAke2d9LCAke2J9LCAxLjApYCAgLy8gRnVsbCBjb2xvciBmb3IgaGlnaCBhY3Rpdml0eVxuICAgICAgICAgICAgXTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gcGFyc2UgY29sb3IgZm9yIGdyYWRpZW50OlwiLCBiYXNlQ29sb3IsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxsYmFja0dyYWRpZW50O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBTY2FucyBhbGwgTWFya2Rvd24gZmlsZXMgaW4gdGhlIHZhdWx0IHRvIGJ1aWxkIGEgY29tcGxldGUgbWFwIGZvciB0aGUgZGFzaGJvYXJkLFxuICAgICogd2l0aG91dCBpZ25vcmluZyBhbnkgcGF0aHMuXG4gICAgKi9cbiAgICBhc3luYyBidWlsZEFsbENyZWF0ZWROb3Rlc01hcChmaWxlLCBhY3Rpb24gPSAnYWRkJykge1xuICAgICAgICAvLyBJZiBubyBmaWxlIGlzIHByb3ZpZGVkLCBkbyBhIGZ1bGwgcmVidWlsZCAoaW5pdGlhbCBsb2FkKVxuICAgICAgICBpZiAoIWZpbGUpIHtcbiAgICAgICAgICAgIHRoaXMuYWxsQ3JlYXRlZE5vdGVzTWFwLmNsZWFyKCk7XG4gICAgICAgICAgICBjb25zdCBhbGxGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZiBvZiBhbGxGaWxlcykge1xuICAgICAgICAgICAgICAgIHRoaXMuX2FkZEZpbGVUb0FsbENyZWF0ZWRNYXAoZik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBhIGZpbGUgSVMgcHJvdmlkZWQsIHBlcmZvcm0gYSB0YXJnZXRlZCB1cGRhdGVcbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ2FkZCcpIHtcbiAgICAgICAgICAgIHRoaXMuX2FkZEZpbGVUb0FsbENyZWF0ZWRNYXAoZmlsZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSAncmVtb3ZlJykge1xuICAgICAgICAgICAgdGhpcy5fcmVtb3ZlRmlsZUZyb21BbGxDcmVhdGVkTWFwKGZpbGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2FkZEZpbGVUb0FsbENyZWF0ZWRNYXAoZmlsZSkge1xuICAgICAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHx8ICFmaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLm1kJykpIHJldHVybjtcblxuICAgICAgICBsZXQgZGF0ZUtleTtcbiAgICAgICAgaWYgKHRoaXMuaXNEYWlseU5vdGUoZmlsZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVEYXRlID0gbW9tZW50KGZpbGUuYmFzZW5hbWUsIHRoaXMucGx1Z2luLnNldHRpbmdzLmRhaWx5Tm90ZURhdGVGb3JtYXQsIHRydWUpO1xuICAgICAgICAgICAgZGF0ZUtleSA9IGZpbGVEYXRlLmlzVmFsaWQoKSA/IGZpbGVEYXRlLmZvcm1hdCgnWVlZWS1NTS1ERCcpIDogbW9tZW50KGZpbGUuc3RhdC5jdGltZSkuZm9ybWF0KCdZWVlZLU1NLUREJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYXRlS2V5ID0gbW9tZW50KGZpbGUuc3RhdC5jdGltZSkuZm9ybWF0KCdZWVlZLU1NLUREJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuYWxsQ3JlYXRlZE5vdGVzTWFwLmhhcyhkYXRlS2V5KSkge1xuICAgICAgICAgICAgdGhpcy5hbGxDcmVhdGVkTm90ZXNNYXAuc2V0KGRhdGVLZXksIFtdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFsbENyZWF0ZWROb3Rlc01hcC5nZXQoZGF0ZUtleSkucHVzaChmaWxlKTtcbiAgICB9XG5cbiAgICBfcmVtb3ZlRmlsZUZyb21BbGxDcmVhdGVkTWFwKGZpbGUpIHtcbiAgICAgICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgcmV0dXJuO1xuXG4gICAgICAgIC8vIFNpbmNlIHdlIGRvbid0IGtub3cgdGhlIGRhdGUga2V5IHdpdGhvdXQgY2FsY3VsYXRpbmcgaXQsIHdlIGhhdmUgdG8gaXRlcmF0ZVxuICAgICAgICBmb3IgKGNvbnN0IFtkYXRlS2V5LCBmaWxlc10gb2YgdGhpcy5hbGxDcmVhdGVkTm90ZXNNYXAuZW50cmllcygpKSB7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGZpbGVzLmZpbmRJbmRleChmID0+IGYucGF0aCA9PT0gZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBmaWxlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIGlmIChmaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxDcmVhdGVkTm90ZXNNYXAuZGVsZXRlKGRhdGVLZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhazsgLy8gQXNzdW1lIGZpbGUgcGF0aCBpcyB1bmlxdWUsIHNvIHdlIGNhbiBzdG9wXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIGFzeW5jIHBvcHVsYXRlRGFzaGJvYXJkKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGFzaGJvYXJkQ29udGVudEVsKSByZXR1cm47XG4gICAgICAgIHRoaXMuZGFzaGJvYXJkQ29udGVudEVsLmVtcHR5KCk7XG5cbiAgICAgICAgaWYgKHRoaXMuZGFzaGJvYXJkVmlld01vZGUgPT09ICd0YXNrcycpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucG9wdWxhdGVUYXNrc0Rhc2hib2FyZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wb3B1bGF0ZUNyZWF0aW9uRGFzaGJvYXJkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZW5kZXJzIGEgc2luZ2xlIGhlYXRtYXAgd2lkZ2V0IGJhc2VkIG9uIHRoZSBwcm92aWRlZCBjb25maWd1cmF0aW9uLlxuICAgIGFzeW5jIHJlbmRlclNpbmdsZUhlYXRtYXAod2lkZ2V0R3JpZCwgaGVhdG1hcENvbmZpZywgaW5kZXgpIHtcbiAgICAgICAgLy8gRmluZCBleGlzdGluZyB3aWRnZXQgb3IgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAgICBsZXQgd2lkZ2V0Q29udGFpbmVyID0gd2lkZ2V0R3JpZC5xdWVyeVNlbGVjdG9yKGAjaGVhdG1hcC13aWRnZXQtJHtpbmRleH1gKTtcbiAgICAgICAgaWYgKCF3aWRnZXRDb250YWluZXIpIHtcbiAgICAgICAgICAgIHdpZGdldENvbnRhaW5lciA9IHdpZGdldEdyaWQuY3JlYXRlRGl2KHtcbiAgICAgICAgICAgICAgICBjbHM6ICdwbS13aWRnZXQtY29udGFpbmVyJyxcbiAgICAgICAgICAgICAgICBhdHRyOiB7IGlkOiBgaGVhdG1hcC13aWRnZXQtJHtpbmRleH1gIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgaXQgZXhpc3RzLCBjbGVhciBpdCBmb3IgcmUtcmVuZGVyaW5nXG4gICAgICAgICAgICB3aWRnZXRDb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBmaWx0ZXJpbmcgYW5kIGRhdGEgZ2F0aGVyaW5nIGxvZ2ljIGhlcmVcbiAgICAgICAgY29uc3QgYWxsRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpO1xuICAgICAgICBjb25zdCBoYXNWYWxpZEZpbHRlciA9IEFycmF5LmlzQXJyYXkoaGVhdG1hcENvbmZpZy5maWx0ZXJzKSAmJiBoZWF0bWFwQ29uZmlnLmZpbHRlcnMubGVuZ3RoID4gMCAmJiBoZWF0bWFwQ29uZmlnLmZpbHRlcnMuc29tZShmID0+IGYudmFsdWUgJiYgZi52YWx1ZS50cmltKCkgIT09ICcnKTtcblxuICAgICAgICBpZiAoIWhhc1ZhbGlkRmlsdGVyKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckVtcHR5SGVhdG1hcFdpZGdldCh3aWRnZXRDb250YWluZXIsIGhlYXRtYXBDb25maWcubmFtZSwgJ0hlYXRtYXAgbm90IGNvbmZpZ3VyZWQuIFBsZWFzZSBzZXQgYSBmaWx0ZXIgdmFsdWUgaW4gc2V0dGluZ3MuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaWx0ZXJlZEZpbGVzID0gYWxsRmlsZXMuZmlsdGVyKGZpbGUgPT4gdGhpcy5fbWF0Y2hlc0hlYXRtYXBSdWxlKGZpbGUsIGhlYXRtYXBDb25maWcpKTtcblxuICAgICAgICBpZiAoaGVhdG1hcENvbmZpZy5kZWJ1Zykge1xuICAgICAgICAgICAgY29uc29sZS5ncm91cENvbGxhcHNlZChgLS0tIERlYnVnIGZvciBIZWF0bWFwOiAke2hlYXRtYXBDb25maWcubmFtZX0gLS0tYCk7XG4gICAgICAgICAgICBpZiAoZmlsdGVyZWRGaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEZvdW5kICR7ZmlsdGVyZWRGaWxlcy5sZW5ndGh9IG1hdGNoaW5nIGZpbGVzOmApO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUudGFibGUoZmlsdGVyZWRGaWxlcy5tYXAoZiA9PiAoeyBwYXRoOiBmLnBhdGggfSkpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIG1hdGNoaW5nIGZpbGVzIGZvdW5kIGZvciB0aGUgY29uZmlndXJlZCBydWxlcy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXBFbmQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGN1c3RvbU1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgY29uc3QgdXNlckRhdGVGb3JtYXRzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tRGF0ZUZvcm1hdHMgPyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21EYXRlRm9ybWF0cy5zcGxpdCgnLCcpLm1hcChmID0+IGYudHJpbSgpKSA6IFsnWVlZWS1NTS1ERCcsICdERC1NTS1ZWVlZJ107XG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWx0ZXJlZEZpbGVzKSB7XG4gICAgICAgICAgICBsZXQgZGF0ZUtleSA9IG51bGw7XG4gICAgICAgICAgICBpZiAoaGVhdG1hcENvbmZpZy5kYXRlU291cmNlID09PSAnZGF0ZUZyb21UaXRsZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlUmVnZXggPSAvKFxcZHs0fS1cXGR7Mn0tXFxkezJ9KXwoXFxkezJ9LVxcZHsyfS1cXGR7NH0pLztcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IGZpbGUuYmFzZW5hbWUubWF0Y2goZGF0ZVJlZ2V4KTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZU1vbWVudCA9IG1vbWVudChtYXRjaFswXSwgdXNlckRhdGVGb3JtYXRzLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGVNb21lbnQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlS2V5ID0gZGF0ZU1vbWVudC5mb3JtYXQoJ1lZWVktTU0tREQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZGF0ZUtleSkge1xuICAgICAgICAgICAgICAgIGRhdGVLZXkgPSBtb21lbnQoZmlsZS5zdGF0LmN0aW1lKS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY3VzdG9tTWFwLmhhcyhkYXRlS2V5KSkgY3VzdG9tTWFwLnNldChkYXRlS2V5LCBbXSk7XG4gICAgICAgICAgICBjdXN0b21NYXAuZ2V0KGRhdGVLZXkpLnB1c2goZmlsZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW5kZXIgdGhlIHdpZGdldCBjb250ZW50XG4gICAgICAgIGlmIChjdXN0b21NYXAuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gaGVhdG1hcENvbmZpZy5jb2xvciB8fCAncmdiYSg3NCwgMTQ0LCAyMjYsIDEpJztcbiAgICAgICAgICAgIGNvbnN0IGdyYWRpZW50ID0gdGhpcy5jcmVhdGVDb2xvckdyYWRpZW50KGNvbG9yKTtcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoc0JhY2sgPSBoZWF0bWFwQ29uZmlnLm1vbnRoc0JhY2sgPz8gMTE7XG4gICAgICAgICAgICBjb25zdCBtb250aHNGb3J3YXJkID0gaGVhdG1hcENvbmZpZy5tb250aHNGb3J3YXJkID8/IDA7XG4gICAgICAgICAgICBjb25zdCBzdGFydERhdGUgPSBtb21lbnQoKS5zdWJ0cmFjdChtb250aHNCYWNrLCAnbW9udGhzJykuc3RhcnRPZignbW9udGgnKTtcbiAgICAgICAgICAgIGNvbnN0IGVuZERhdGUgPSBtb21lbnQoKS5hZGQobW9udGhzRm9yd2FyZCwgJ21vbnRocycpLmVuZE9mKCdtb250aCcpO1xuXG4gICAgICAgICAgICAvLyBXZSBwYXNzIHRoZSBhbHJlYWR5LWZvdW5kIGNvbnRhaW5lciB0byB0aGUgbWFpbiByZW5kZXIgZnVuY3Rpb25cbiAgICAgICAgICAgIGNvbnN0IHdpZGdldEtleSA9IGBjdXN0b20tJHtpbmRleH1gO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wb3B1bGF0ZVNpbmdsZUhlYXRtYXBXaWRnZXQod2lkZ2V0Q29udGFpbmVyLCBoZWF0bWFwQ29uZmlnLm5hbWUsIGN1c3RvbU1hcCwgZ3JhZGllbnQsIHsgc3RhcnREYXRlLCBlbmREYXRlIH0sIHdpZGdldEtleSk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRW1wdHlIZWF0bWFwV2lkZ2V0KHdpZGdldENvbnRhaW5lciwgaGVhdG1hcENvbmZpZy5uYW1lKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBtYWluIG9yY2hlc3RyYXRvciB0aGF0IGhhbmRsZXMgQU5EL09SIGxvZ2ljIGFuZCBjYWxscyB0aGUgZGVidWcgbG9nZ2VyLlxuICAgICAqL1xuICAgIF9tYXRjaGVzSGVhdG1hcFJ1bGUoZmlsZSwgY29uZmlnKSB7XG4gICAgICAgIC8vIElmIGRlYnVnIGlzIG9uLCBzdGFydCBhIGNvbGxhcHNpYmxlIGdyb3VwIGZvciB0aGlzIGZpbGUuXG4gICAgICAgIGlmIChjb25maWcuZGVidWcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQoYENoZWNraW5nIEZpbGU6IFwiJHtmaWxlLnBhdGh9XCJgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvZ2ljID0gY29uZmlnLmxvZ2ljIHx8ICdBTkQnO1xuICAgICAgICBjb25zdCBmaWx0ZXJzID0gY29uZmlnLmZpbHRlcnMgfHwgW107XG4gICAgICAgIGxldCBmaW5hbE1hdGNoO1xuXG4gICAgICAgIGlmIChsb2dpYyA9PT0gJ0FORCcpIHtcbiAgICAgICAgICAgIC8vIC5ldmVyeSgpIHN0b3BzIG9uIHRoZSBmaXJzdCAnZmFsc2UnLCBwZXJmZWN0IGZvciBBTkQuXG4gICAgICAgICAgICBmaW5hbE1hdGNoID0gZmlsdGVycy5ldmVyeShydWxlID0+IHRoaXMuX2V2YWx1YXRlU2luZ2xlUnVsZShmaWxlLCBydWxlLCBjb25maWcuZGVidWcpKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gJ09SJ1xuICAgICAgICAgICAgLy8gLnNvbWUoKSBzdG9wcyBvbiB0aGUgZmlyc3QgJ3RydWUnLCBwZXJmZWN0IGZvciBPUi5cbiAgICAgICAgICAgIGZpbmFsTWF0Y2ggPSBmaWx0ZXJzLnNvbWUocnVsZSA9PiB0aGlzLl9ldmFsdWF0ZVNpbmdsZVJ1bGUoZmlsZSwgcnVsZSwgY29uZmlnLmRlYnVnKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDbG9zZSB0aGUgZGVidWcgZ3JvdXAgZm9yIHRoaXMgZmlsZS5cbiAgICAgICAgaWYgKGNvbmZpZy5kZWJ1Zykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYCVjRmluYWwgUmVzdWx0OiAke2ZpbmFsTWF0Y2ggPyAnTUFUQ0gnIDogJ05PIE1BVENIJ30gKExvZ2ljOiAke2xvZ2ljfSlgLCBgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAke2ZpbmFsTWF0Y2ggPyAnZ3JlZW4nIDogJ3JlZCd9O2ApO1xuICAgICAgICAgICAgY29uc29sZS5ncm91cEVuZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZpbmFsTWF0Y2g7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIG5ldywgcG93ZXJmdWwgZmlsdGVyaW5nIGVuZ2luZSB0aGF0IGV2YWx1YXRlcyBhIHNpbmdsZSBmaWxlIGFnYWluc3QgYSBzaW5nbGUgcnVsZS5cbiAgICAgKi9cbiAgICBfZXZhbHVhdGVTaW5nbGVSdWxlKGZpbGUsIHJ1bGUsIGlzRGVidWcpIHtcbiAgICAgICAgLy8gUHJvdmlkZSBkZWZhdWx0IG9wZXJhdG9yIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgICAgIGNvbnN0IHsgdHlwZSwgb3BlcmF0b3IgPSAnY29udGFpbnMnLCB2YWx1ZSB9ID0gcnVsZTtcbiAgICAgICAgbGV0IG1hdGNoID0gZmFsc2U7XG4gICAgICAgIGxldCByZWFzb24gPSAnUnVsZSBkaWQgbm90IG1hdGNoLic7XG5cbiAgICAgICAgaWYgKCF2YWx1ZSB8fCB2YWx1ZS50cmltKCkgPT09ICcnKSB7XG4gICAgICAgICAgICBpZiAoaXNEZWJ1ZykgY29uc29sZS5sb2coYC0gUnVsZSAoJHt0eXBlfSk6IFNLSVBQRUQgKE5vIHZhbHVlIHByb3ZpZGVkKWApO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIDEuIEdldCB0aGUgdGFyZ2V0IHZhbHVlIGZyb20gdGhlIGZpbGUgdG8gYmUgdGVzdGVkIC0tLVxuICAgICAgICBsZXQgdGFyZ2V0O1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2ZpbGVuYW1lJzpcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSBmaWxlLm5hbWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdmaWxlcGF0aCc6XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gZmlsZS5wYXRoO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZmlsZXR5cGUnOlxuICAgICAgICAgICAgICAgIHRhcmdldCA9IGZpbGUuZXh0ZW5zaW9uO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndGFnJzpcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlQ2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBib2R5VGFncyA9IChmaWxlQ2FjaGU/LnRhZ3MgfHwgW10pLm1hcCh0ID0+IHQudGFnLnN1YnN0cmluZygxKS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmbSA9IGZpbGVDYWNoZT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICAgICAgY29uc3QgZm1UYWdzID0gZm0gPyBbXS5jb25jYXQoZm0udGFncyB8fCBbXSwgZm0udGFnIHx8IFtdKS5tYXAoU3RyaW5nKS5tYXAodCA9PiB0LnRvTG93ZXJDYXNlKCkpIDogW107XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gWy4uLm5ldyBTZXQoWy4uLmJvZHlUYWdzLCAuLi5mbVRhZ3NdKV07IC8vIEFuIGFycmF5IG9mIHVuaXF1ZSB0YWdzXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmIChpc0RlYnVnKSBjb25zb2xlLmxvZyhgLSBSdWxlICgke3R5cGV9KTogRkFJTC4gUmVhc29uOiBVbmtub3duIGZpbHRlciB0eXBlLmApO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLSAyLiBFdmFsdWF0ZSB0aGUgcnVsZSBiYXNlZCBvbiB0aGUgb3BlcmF0b3IgLS0tXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBsb3dlckNhc2VWYWx1ZSA9IHZhbHVlLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXiMvLCAnJyk7IC8vIENsZWFuIGZpbHRlciB2YWx1ZVxuICAgICAgICAgICAgbGV0IGJhc2VSZXN1bHQgPSBmYWxzZTtcblxuICAgICAgICAgICAgLy8gVGhlIGxvZ2ljIGZvciBzdHJpbmctYmFzZWQgdHlwZXMgKGZpbGVuYW1lLCBmaWxlcGF0aCwgZmlsZXR5cGUpXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb3dlckNhc2VUYXJnZXQgPSB0YXJnZXQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9wZXJhdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ21hdGNoZXNfcmVnZXgnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdub3RfbWF0Y2hlc19yZWdleCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFssIHBhdHRlcm4sIGZsYWdzXSA9IHZhbHVlLm1hdGNoKC9cXC8oLiopXFwvKC4qKS8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChwYXR0ZXJuLCBmbGFncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVJlc3VsdCA9IHJlZ2V4LnRlc3QodGFyZ2V0KTsgLy8gVXNlIG9yaWdpbmFsIHRhcmdldCBmb3IgY2FzZS1zZW5zaXRpdmUgcmVnZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb24gPSBgUmVnZXggLyR7cGF0dGVybn0vJHtmbGFnc30gJHtiYXNlUmVzdWx0ID8gJ21hdGNoZWQnIDogJ2RpZCBub3QgbWF0Y2gnfSB0YXJnZXQ6IFwiJHt0YXJnZXR9XCJgO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VSZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb24gPSBgSW52YWxpZCByZWdleCBwYXR0ZXJuOiBcIiR7dmFsdWV9XCJgO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbnRhaW5zJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VSZXN1bHQgPSBsb3dlckNhc2VUYXJnZXQuaW5jbHVkZXMobG93ZXJDYXNlVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uID0gYFRhcmdldCBcIiR7dGFyZ2V0fVwiICR7YmFzZVJlc3VsdCA/ICdjb250YWlucycgOiAnZG9lcyBub3QgY29udGFpbid9IFwiJHt2YWx1ZX1cImA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZXF1YWxzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VSZXN1bHQgPSBsb3dlckNhc2VUYXJnZXQgPT09IGxvd2VyQ2FzZVZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uID0gYFRhcmdldCBcIiR7dGFyZ2V0fVwiICR7YmFzZVJlc3VsdCA/ICdlcXVhbHMnIDogJ2RvZXMgbm90IGVxdWFsJ30gXCIke3ZhbHVlfVwiYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzdGFydHNfd2l0aCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlUmVzdWx0ID0gbG93ZXJDYXNlVGFyZ2V0LnN0YXJ0c1dpdGgobG93ZXJDYXNlVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uID0gYFRhcmdldCBcIiR7dGFyZ2V0fVwiICR7YmFzZVJlc3VsdCA/ICdzdGFydHMgd2l0aCcgOiAnZG9lcyBub3Qgc3RhcnQgd2l0aCd9IFwiJHt2YWx1ZX1cImA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW5kc193aXRoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VSZXN1bHQgPSBsb3dlckNhc2VUYXJnZXQuZW5kc1dpdGgobG93ZXJDYXNlVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uID0gYFRhcmdldCBcIiR7dGFyZ2V0fVwiICR7YmFzZVJlc3VsdCA/ICdlbmRzIHdpdGgnIDogJ2RvZXMgbm90IGVuZCB3aXRoJ30gXCIke3ZhbHVlfVwiYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgbmVnYXRpb24gZm9yIHN0cmluZyB0eXBlc1xuICAgICAgICAgICAgICAgIGlmIChvcGVyYXRvci5zdGFydHNXaXRoKCdub3RfJykpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSAhYmFzZVJlc3VsdDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IGJhc2VSZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGhlIGxvZ2ljIGZvciBhcnJheS1iYXNlZCB0eXBlcyAodGFnKVxuICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChvcGVyYXRvcikge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlcXVhbHMnOiAvLyBcImlzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoID0gdGFyZ2V0LmluY2x1ZGVzKGxvd2VyQ2FzZVZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbiA9IGBUYWcgbGlzdCBbJHt0YXJnZXQuam9pbignLCAnKX1dICR7bWF0Y2ggPyAnY29udGFpbnMnIDogJ2RvZXMgbm90IGNvbnRhaW4nfSB0YWcgXCIke3ZhbHVlfVwiYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdub3RfZXF1YWxzJzogLy8gXCJpcyBub3RcIlxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSAhdGFyZ2V0LmluY2x1ZGVzKGxvd2VyQ2FzZVZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbiA9IGBUYWcgbGlzdCBbJHt0YXJnZXQuam9pbignLCAnKX1dICR7bWF0Y2ggPyAnZG9lcyBub3QgY29udGFpbicgOiAnY29udGFpbnMnfSB0YWcgXCIke3ZhbHVlfVwiYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uID0gYE9wZXJhdG9yIFwiJHtvcGVyYXRvcn1cIiBpcyBub3QgdmFsaWQgZm9yIHR5cGUgXCJ0YWdcIi4gVXNlIFwiaXNcIiBvciBcImlzIG5vdFwiLmA7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmVhc29uID0gYEVycm9yIGR1cmluZyBldmFsdWF0aW9uOiAke2UubWVzc2FnZX1gO1xuICAgICAgICAgICAgbWF0Y2ggPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0RlYnVnKSB7XG4gICAgICAgICAgICBjb25zdCBzdHlsZSA9IGBjb2xvcjogJHttYXRjaCA/ICdncmVlbicgOiAnb3JhbmdlJ31gO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYC0gUnVsZSAoJHt0eXBlfSAke29wZXJhdG9yfSBcIiR7dmFsdWV9XCIpIC0+ICVjJHttYXRjaCA/ICdQQVNTJyA6ICdGQUlMJ31gLCBzdHlsZSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgICBSZWFzb246ICR7cmVhc29ufWApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH1cblxuXG4gICAgYXN5bmMgcG9wdWxhdGVDcmVhdGlvbkRhc2hib2FyZCgpIHtcbiAgICAgICAgdGhpcy5kYXNoYm9hcmRDb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgY29uc3Qgd2lkZ2V0R3JpZCA9IHRoaXMuZGFzaGJvYXJkQ29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ3BtLWRhc2hib2FyZC1ncmlkJyB9KTtcbiAgICAgICAgY29uc3Qgc2VhcmNoVGVybSA9IHRoaXMuZGFzaGJvYXJkU2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBmaW5hbE9yZGVyID0gdGhpcy5fZ2V0RmluYWxXaWRnZXRPcmRlcignY3JlYXRpb24nKTtcblxuXG4gICAgICAgIGNvbnN0IGRhaWx5Tm90ZXNNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIGNvbnN0IHJlZ3VsYXJOb3Rlc01hcCA9IG5ldyBNYXAoKTtcblxuICAgICAgICAvLyBUaGlzIGZpcnN0IGxvb3AgY29ycmVjdGx5IHBvcHVsYXRlcyB0aGUgZGFpbHkgYW5kIHJlZ3VsYXIgbm90ZSBtYXBzLlxuICAgICAgICBmb3IgKGNvbnN0IFtkYXRlU3RyLCBmaWxlc09yRmlsZV0gb2YgdGhpcy5hbGxDcmVhdGVkTm90ZXNNYXAuZW50cmllcygpKSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlcyA9IEFycmF5LmlzQXJyYXkoZmlsZXNPckZpbGUpID8gZmlsZXNPckZpbGUgOiBbZmlsZXNPckZpbGVdO1xuXG4gICAgICAgICAgICBmaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghZmlsZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNEYWlseU5vdGUoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYWlseU5vdGVzTWFwLmhhcyhkYXRlU3RyKSkgZGFpbHlOb3Rlc01hcC5zZXQoZGF0ZVN0ciwgW10pO1xuICAgICAgICAgICAgICAgICAgICBkYWlseU5vdGVzTWFwLmdldChkYXRlU3RyKS5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVndWxhck5vdGVzTWFwLmhhcyhkYXRlU3RyKSkgcmVndWxhck5vdGVzTWFwLnNldChkYXRlU3RyLCBbXSk7XG4gICAgICAgICAgICAgICAgICAgIHJlZ3VsYXJOb3Rlc01hcC5nZXQoZGF0ZVN0cikucHVzaChmaWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoY29uc3Qgd2lkZ2V0S2V5IG9mIGZpbmFsT3JkZXIpIHtcblxuICAgICAgICAgICAgaWYgKHdpZGdldEtleS5zdGFydHNXaXRoKCdjdXN0b20tJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KHdpZGdldEtleS5zcGxpdCgnLScpWzFdLCAxMCk7XG4gICAgICAgICAgICAgICAgY29uc3QgaGVhdG1hcENvbmZpZyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUhlYXRtYXBzPy5baW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmIChoZWF0bWFwQ29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgZnVuY3Rpb24gbm93IGNyZWF0ZXMgdGhlIGNvbnRhaW5lciBPUiBmaW5kcyB0aGUgZXhpc3Rpbmcgb25lXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyU2luZ2xlSGVhdG1hcCh3aWRnZXRHcmlkLCBoZWF0bWFwQ29uZmlnLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB3aWRnZXROYW1lID0gREFTSEJPQVJEV0lER0VUUy5jcmVhdGlvblt3aWRnZXRLZXldPy5uYW1lIHx8ICcnO1xuICAgICAgICAgICAgICAgIGlmIChzZWFyY2hUZXJtICYmICF3aWRnZXROYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVGVybSkpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgY29uc3Qgd2lkZ2V0Q29udGFpbmVyID0gd2lkZ2V0R3JpZC5jcmVhdGVEaXYoeyBjbHM6ICdwbS13aWRnZXQtY29udGFpbmVyJyB9KTtcblxuICAgICAgICAgICAgICAgIHN3aXRjaCAod2lkZ2V0S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbGZpbGVzaGVhdG1hcCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbEZpbGVzTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2FmZWx5IG1lcmdlIG5vdGVzIG1hcFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxDcmVhdGVkTm90ZXNNYXAuZm9yRWFjaCgoZmlsZXMsIGRhdGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlTGlzdCA9IEFycmF5LmlzQXJyYXkoZmlsZXMpID8gZmlsZXMgOiBbZmlsZXNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWxsRmlsZXNNYXAuaGFzKGRhdGUpKSBhbGxGaWxlc01hcC5zZXQoZGF0ZSwgW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbEZpbGVzTWFwLmdldChkYXRlKS5wdXNoKC4uLmZpbGVMaXN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2FmZWx5IG1lcmdlIGFzc2V0cyBtYXBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXRDcmVhdGlvbk1hcC5mb3JFYWNoKChmaWxlcywgZGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVMaXN0ID0gQXJyYXkuaXNBcnJheShmaWxlcykgPyBmaWxlcyA6IFtmaWxlc107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhbGxGaWxlc01hcC5oYXMoZGF0ZSkpIGFsbEZpbGVzTWFwLnNldChkYXRlLCBbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsRmlsZXNNYXAuZ2V0KGRhdGUpLnB1c2goLi4uZmlsZUxpc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyYWRpZW50ID0gdGhpcy5jcmVhdGVDb2xvckdyYWRpZW50KCdyZ2JhKDIxMCwgMTA1LCAzMCwgMC44KScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wb3B1bGF0ZVNpbmdsZUhlYXRtYXBXaWRnZXQod2lkZ2V0Q29udGFpbmVyLCAnQWxsIEZpbGVzJywgYWxsRmlsZXNNYXAsIGdyYWRpZW50LCB7fSwgJ2FsbGZpbGVzaGVhdG1hcCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGFpbHlub3Rlc2hlYXRtYXAnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBncmFkaWVudCA9IHRoaXMuY3JlYXRlQ29sb3JHcmFkaWVudCh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYWlseU5vdGVEb3RDb2xvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmdXR1cmVFbmREYXRlID0gbW9tZW50KCkuYWRkKDYsICdtb250aHMnKS5lbmRPZignbW9udGgnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucG9wdWxhdGVTaW5nbGVIZWF0bWFwV2lkZ2V0KHdpZGdldENvbnRhaW5lciwgXCJEYWlseSBOb3Rlc1wiLCBkYWlseU5vdGVzTWFwLCBncmFkaWVudCwgeyBlbmREYXRlOiBmdXR1cmVFbmREYXRlIH0sICdkYWlseW5vdGVzaGVhdG1hcCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVndWxhcm5vdGVzaGVhdG1hcCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyYWRpZW50ID0gdGhpcy5jcmVhdGVDb2xvckdyYWRpZW50KHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVDcmVhdGVkQ29sb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wb3B1bGF0ZVNpbmdsZUhlYXRtYXBXaWRnZXQod2lkZ2V0Q29udGFpbmVyLCAnUmVndWxhciBOb3RlcycsIHJlZ3VsYXJOb3Rlc01hcCwgZ3JhZGllbnQsIHt9LCAncmVndWxhcm5vdGVzaGVhdG1hcCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYXNzZXRzaGVhdG1hcCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFzc2V0Q3JlYXRpb25NYXAuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBncmFkaWVudCA9IHRoaXMuY3JlYXRlQ29sb3JHcmFkaWVudCh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hc3NldERvdENvbG9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBvcHVsYXRlU2luZ2xlSGVhdG1hcFdpZGdldCh3aWRnZXRDb250YWluZXIsICdBc3NldHMnLCB0aGlzLmFzc2V0Q3JlYXRpb25NYXAsIGdyYWRpZW50LCB7fSwgJ2Fzc2V0c2hlYXRtYXAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJFbXB0eUhlYXRtYXBXaWRnZXQod2lkZ2V0Q29udGFpbmVyLCAnQXNzZXRzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldFRhc2tNZXRyaWNzKCkge1xuICAgICAgICBjb25zdCBhbGxUYXNrcyA9IHRoaXMuYWxsVGFza3MgfHwgW107XG4gICAgICAgIGNvbnN0IG5vdyA9IG1vbWVudCgpO1xuICAgICAgICBjb25zdCB0b3RhbFRhc2tzID0gYWxsVGFza3MubGVuZ3RoO1xuICAgICAgICBjb25zdCBjb21wbGV0ZWRUYXNrcyA9IGFsbFRhc2tzLmZpbHRlcih0ID0+IHQuc3RhdHVzID09PSAneCcpLmxlbmd0aDtcbiAgICAgICAgY29uc3QgY2FuY2VsbGVkVGFza3MgPSBhbGxUYXNrcy5maWx0ZXIodCA9PiB0LnN0YXR1cyA9PT0gJy0nKS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGluUHJvZ3Jlc3NUYXNrcyA9IGFsbFRhc2tzLmZpbHRlcih0ID0+IHQuc3RhdHVzID09PSAnLycpLmxlbmd0aDtcbiAgICAgICAgY29uc3Qgb3BlblRhc2tzID0gdG90YWxUYXNrcyAtIGNvbXBsZXRlZFRhc2tzIC0gY2FuY2VsbGVkVGFza3MgLSBpblByb2dyZXNzVGFza3M7XG5cbiAgICAgICAgY29uc3Qgb3ZlcmR1ZVRhc2tzQ291bnQgPSBhbGxUYXNrcy5maWx0ZXIodCA9PlxuICAgICAgICAgICAgdC5zdGF0dXMgIT09ICd4JyAmJlxuICAgICAgICAgICAgdC5zdGF0dXMgIT09ICctJyAmJlxuICAgICAgICAgICAgdC5kdWVEYXRlICYmXG4gICAgICAgICAgICBtb21lbnQodC5kdWVEYXRlKS5pc0JlZm9yZShub3csICdkYXknKVxuICAgICAgICApLmxlbmd0aDtcblxuICAgICAgICByZXR1cm4geyBjb21wbGV0ZWRUYXNrcywgb3BlblRhc2tzLCBpblByb2dyZXNzVGFza3MsIG92ZXJkdWVUYXNrc0NvdW50LCBjYW5jZWxsZWRUYXNrcywgdG90YWxUYXNrcyB9O1xuICAgIH1cblxuICAgIGFzeW5jIGdldFRhc2tTdW1tYXJ5TWV0cmljcygpIHtcbiAgICAgICAgY29uc3QgYWxsVGFza3MgPSB0aGlzLmFsbFRhc2tzO1xuICAgICAgICBjb25zdCBub3cgPSBtb21lbnQoKTtcblxuICAgICAgICAvLyAtLS0gRGVmaW5lIERhdGUgUmFuZ2VzIC0tLVxuICAgICAgICBjb25zdCB0b2RheVN0YXJ0ID0gbm93LmNsb25lKCkuc3RhcnRPZignZGF5Jyk7XG4gICAgICAgIGNvbnN0IHRvZGF5RW5kID0gbm93LmNsb25lKCkuZW5kT2YoJ2RheScpO1xuICAgICAgICBjb25zdCB0b21vcnJvd1N0YXJ0ID0gbm93LmNsb25lKCkuYWRkKDEsICdkYXknKS5zdGFydE9mKCdkYXknKTtcbiAgICAgICAgY29uc3QgdG9tb3Jyb3dFbmQgPSBub3cuY2xvbmUoKS5hZGQoMSwgJ2RheScpLmVuZE9mKCdkYXknKTtcbiAgICAgICAgY29uc3QgbmV4dDdEYXlzU3RhcnQgPSBub3cuY2xvbmUoKS5hZGQoMiwgJ2RheScpLnN0YXJ0T2YoJ2RheScpO1xuICAgICAgICBjb25zdCBuZXh0N0RheXNFbmQgPSBub3cuY2xvbmUoKS5hZGQoOCwgJ2RheScpLmVuZE9mKCdkYXknKTsgLy8gVG9kYXkgKyAxICsgNyA9IDggZGF5cyBmcm9tIG5vd1xuXG4gICAgICAgIC8vIC0tLSBJbml0aWFsaXplIE1ldHJpY3MgQnVja2V0cyAtLS1cbiAgICAgICAgY29uc3QgbWV0cmljcyA9IHtcbiAgICAgICAgICAgIHRvZGF5OiB7IGluY29tcGxldGU6IFtdLCBjb21wbGV0ZWQ6IFtdLCBvdmVyZHVlOiBbXSwgaW5Qcm9ncmVzczogW10gfSxcbiAgICAgICAgICAgIHRvbW9ycm93OiB7IGluY29tcGxldGU6IFtdLCBjb21wbGV0ZWQ6IFtdLCBpblByb2dyZXNzOiBbXSB9LFxuICAgICAgICAgICAgbmV4dDdkYXlzOiB7IGluY29tcGxldGU6IFtdLCBjb21wbGV0ZWQ6IFtdLCBpblByb2dyZXNzOiBbXSB9LFxuICAgICAgICAgICAgZnV0dXJlOiB7IGluY29tcGxldGU6IFtdLCBpblByb2dyZXNzOiBbXSB9LFxuICAgICAgICAgICAgbm9EdWU6IHsgaW5jb21wbGV0ZTogW10sIGluUHJvZ3Jlc3M6IFtdIH0sXG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yIChjb25zdCB0YXNrIG9mIGFsbFRhc2tzKSB7XG4gICAgICAgICAgICBjb25zdCBpc0NvbXBsZXRlZCA9IHRhc2suc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICd4JztcbiAgICAgICAgICAgIGNvbnN0IGlzSW5Qcm9ncmVzcyA9IHRhc2suc3RhdHVzID09PSAnLyc7XG4gICAgICAgICAgICBjb25zdCBkdWVEYXRlID0gdGFzay5kdWVEYXRlID8gbW9tZW50KHRhc2suZHVlRGF0ZSkgOiBudWxsO1xuICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbkRhdGUgPSB0YXNrLmNvbXBsZXRpb25EYXRlID8gbW9tZW50KHRhc2suY29tcGxldGlvbkRhdGUpIDogbnVsbDtcblxuICAgICAgICAgICAgaWYgKGlzQ29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgLy8gTG9naWMgZm9yIGNvbXBsZXRlZCB0YXNrc1xuICAgICAgICAgICAgICAgIGlmIChjb21wbGV0aW9uRGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29tcGxldGlvbkRhdGUuaXNCZXR3ZWVuKHRvZGF5U3RhcnQsIHRvZGF5RW5kLCBudWxsLCAnW10nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0cmljcy50b2RheS5jb21wbGV0ZWQucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb21wbGV0aW9uRGF0ZS5pc0JldHdlZW4odG9tb3Jyb3dTdGFydCwgdG9tb3Jyb3dFbmQsIG51bGwsICdbXScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRyaWNzLnRvbW9ycm93LmNvbXBsZXRlZC5wdXNoKHRhc2spO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbXBsZXRpb25EYXRlLmlzQmV0d2VlbihuZXh0N0RheXNTdGFydCwgbmV4dDdEYXlzRW5kLCBudWxsLCAnW10nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0cmljcy5uZXh0N2RheXMuY29tcGxldGVkLnB1c2godGFzayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIExvZ2ljIGZvciBpbmNvbXBsZXRlIHRhc2tzXG4gICAgICAgICAgICAgICAgaWYgKCFkdWVEYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0luUHJvZ3Jlc3MpIG1ldHJpY3Mubm9EdWUuaW5Qcm9ncmVzcy5wdXNoKHRhc2spO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIG1ldHJpY3Mubm9EdWUuaW5jb21wbGV0ZS5wdXNoKHRhc2spO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZHVlRGF0ZS5pc0JlZm9yZShzdGFydE9mVG9kYXksICdkYXknKSkge1xuICAgICAgICAgICAgICAgICAgICBtZXRyaWNzLnRvZGF5Lm92ZXJkdWUucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGR1ZURhdGUuaXNCZXR3ZWVuKHN0YXJ0T2ZUb2RheSwgZW5kT2ZUb2RheSwgbnVsbCwgJ1tdJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSW5Qcm9ncmVzcykgbWV0cmljcy50b2RheS5pblByb2dyZXNzLnB1c2godGFzayk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgbWV0cmljcy50b2RheS5pbmNvbXBsZXRlLnB1c2godGFzayk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkdWVEYXRlLmlzQmV0d2VlbihzdGFydE9mVG9tb3Jyb3csIGVuZE9mVG9tb3Jyb3csIG51bGwsICdbXScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0luUHJvZ3Jlc3MpIG1ldHJpY3MudG9tb3Jyb3cuaW5Qcm9ncmVzcy5wdXNoKHRhc2spO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIG1ldHJpY3MudG9tb3Jyb3cuaW5jb21wbGV0ZS5wdXNoKHRhc2spO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZHVlRGF0ZS5pc0JldHdlZW4oc3RhcnRPZk5leHQ3RGF5cywgZW5kT2ZOZXh0N0RheXMsIG51bGwsICdbXScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0luUHJvZ3Jlc3MpIG1ldHJpY3MubmV4dDdkYXlzLmluUHJvZ3Jlc3MucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBtZXRyaWNzLm5leHQ3ZGF5cy5pbmNvbXBsZXRlLnB1c2godGFzayk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkdWVEYXRlLmlzQWZ0ZXIoZW5kT2ZOZXh0N0RheXMsICdkYXknKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNJblByb2dyZXNzKSBtZXRyaWNzLmZ1dHVyZS5pblByb2dyZXNzLnB1c2godGFzayk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgbWV0cmljcy5mdXR1cmUuaW5jb21wbGV0ZS5wdXNoKHRhc2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWV0cmljcztcbiAgICB9XG5cblxuICAgIGFzeW5jIGdldFdlZWtseVRhc2tNZXRyaWNzKCkge1xuICAgICAgICBjb25zdCBhbGxUYXNrcyA9IHRoaXMuYWxsVGFza3MgfHwgW107XG4gICAgICAgIGNvbnN0IG5vdyA9IG1vbWVudCgpO1xuICAgICAgICBjb25zdCBzdGFydE9mVG9kYXkgPSBub3cuY2xvbmUoKS5zdGFydE9mKCdkYXknKTtcblxuICAgICAgICBjb25zdCB3ZWVrU3RhcnRzT25Nb25kYXkgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrU3RhcnREYXkgPT09ICdtb25kYXknO1xuICAgICAgICBjb25zdCB3ZWVrU3RhcnRTdHJpbmcgPSB3ZWVrU3RhcnRzT25Nb25kYXkgPyAnaXNvV2VlaycgOiAnd2Vlayc7XG5cbiAgICAgICAgY29uc3QgZGF0ZVJhbmdlcyA9IHtcbiAgICAgICAgICAgIHRvZGF5OiB7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0T2ZUb2RheSxcbiAgICAgICAgICAgICAgICBlbmQ6IG5vdy5jbG9uZSgpLmVuZE9mKCdkYXknKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRoaXNXZWVrOiB7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IG5vdy5jbG9uZSgpLnN0YXJ0T2Yod2Vla1N0YXJ0U3RyaW5nKSxcbiAgICAgICAgICAgICAgICBlbmQ6IG5vdy5jbG9uZSgpLmVuZE9mKHdlZWtTdGFydFN0cmluZylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBuZXh0V2Vlazoge1xuICAgICAgICAgICAgICAgIHN0YXJ0OiBub3cuY2xvbmUoKS5hZGQoMSwgJ3dlZWsnKS5zdGFydE9mKHdlZWtTdGFydFN0cmluZyksXG4gICAgICAgICAgICAgICAgZW5kOiBub3cuY2xvbmUoKS5hZGQoMSwgJ3dlZWsnKS5lbmRPZih3ZWVrU3RhcnRTdHJpbmcpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbmV4dDRXZWVrczoge1xuICAgICAgICAgICAgICAgIHN0YXJ0OiBzdGFydE9mVG9kYXksXG4gICAgICAgICAgICAgICAgZW5kOiBub3cuY2xvbmUoKS5hZGQoNCwgJ3dlZWtzJykuZW5kT2YoJ2RheScpXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgbWV0cmljcyA9IHtcbiAgICAgICAgICAgIHRvZGF5OiB7IGluY29tcGxldGU6IDAsIGNvbXBsZXRlZDogMCwgb3ZlcmR1ZTogMCB9LFxuICAgICAgICAgICAgdGhpc1dlZWs6IHsgaW5jb21wbGV0ZTogMCwgY29tcGxldGVkOiAwLCBvdmVyZHVlOiAwIH0sXG4gICAgICAgICAgICBuZXh0V2VlazogeyBpbmNvbXBsZXRlOiAwLCBjb21wbGV0ZWQ6IDAsIG92ZXJkdWU6IDAgfSxcbiAgICAgICAgICAgIG5leHQ0V2Vla3M6IHsgaW5jb21wbGV0ZTogMCwgY29tcGxldGVkOiAwLCBvdmVyZHVlOiAwIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKGNvbnN0IHRhc2sgb2YgYWxsVGFza3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGlzQ29tcGxldGVkID0gdGFzay5zdGF0dXMgPT09ICd4JztcbiAgICAgICAgICAgIGNvbnN0IGR1ZURhdGUgPSB0YXNrLmR1ZURhdGUgPyBtb21lbnQodGFzay5kdWVEYXRlKSA6IG51bGw7XG4gICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uRGF0ZSA9IHRhc2suY29tcGxldGlvbkRhdGUgPyBtb21lbnQodGFzay5jb21wbGV0aW9uRGF0ZSkgOiBudWxsO1xuXG4gICAgICAgICAgICBpZiAoaXNDb21wbGV0ZWQgJiYgY29tcGxldGlvbkRhdGUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBkYXRlUmFuZ2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb21wbGV0aW9uRGF0ZS5pc0JldHdlZW4oZGF0ZVJhbmdlc1trZXldLnN0YXJ0LCBkYXRlUmFuZ2VzW2tleV0uZW5kLCAnZGF5JywgJ1tdJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldHJpY3Nba2V5XS5jb21wbGV0ZWQrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzQ29tcGxldGVkICYmIGR1ZURhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZHVlRGF0ZS5pc0JlZm9yZShzdGFydE9mVG9kYXksICdkYXknKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBPdmVyZHVlIHRhc2tzIGFyZSBjb3VudGVkIGluIGFsbCByZWxldmFudCBmdXR1cmUgcGVyaW9kc1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBkYXRlUmFuZ2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRyaWNzW2tleV0ub3ZlcmR1ZSsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGF0ZVJhbmdlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGR1ZURhdGUuaXNCZXR3ZWVuKGRhdGVSYW5nZXNba2V5XS5zdGFydCwgZGF0ZVJhbmdlc1trZXldLmVuZCwgJ2RheScsICdbXScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0cmljc1trZXldLmluY29tcGxldGUrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWV0cmljcztcbiAgICB9XG5cbiAgICBfZ2V0RmluYWxXaWRnZXRPcmRlcihkYXNoYm9hcmRUeXBlKSB7XG4gICAgICAgIGNvbnN0IHZpc2liaWxpdHlLZXkgPSBgJHtkYXNoYm9hcmRUeXBlfURhc2hib2FyZFdpZGdldHNgO1xuICAgICAgICBjb25zdCBvcmRlcktleSA9IGAke2Rhc2hib2FyZFR5cGV9RGFzaGJvYXJkT3JkZXJgO1xuICAgICAgICBjb25zdCBkZWZhdWx0V2lkZ2V0cyA9IERBU0hCT0FSRFdJREdFVFNbZGFzaGJvYXJkVHlwZV07XG5cbiAgICAgICAgLy8gRklYOiBEZWZhdWx0IHRvIGFuIGVtcHR5IG9iamVjdC9hcnJheSBpZiBzZXR0aW5ncyBhcmUgbm90IHlldCBkZWZpbmVkLlxuICAgICAgICBjb25zdCBzYXZlZFZpc2liaWxpdHkgPSB0aGlzLnBsdWdpbi5zZXR0aW5nc1t2aXNpYmlsaXR5S2V5XSB8fCB7fTtcbiAgICAgICAgY29uc3Qgc2F2ZWRPcmRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzW29yZGVyS2V5XSB8fCBbXTtcblxuICAgICAgICBsZXQgYWxsV2lkZ2V0S2V5cyA9IE9iamVjdC5rZXlzKGRlZmF1bHRXaWRnZXRzKTtcbiAgICAgICAgaWYgKGRhc2hib2FyZFR5cGUgPT09ICdjcmVhdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUhlYXRtYXBzPy5mb3JFYWNoKChfLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGFsbFdpZGdldEtleXMucHVzaChgY3VzdG9tLSR7aW5kZXh9YCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRoaXMgaXMgbm93IHNhZmUgYXMgc2F2ZWRPcmRlciBpcyBhbHdheXMgYW4gYXJyYXkuXG4gICAgICAgIGNvbnN0IGZpbmFsT3JkZXIgPSBbLi4uc2F2ZWRPcmRlcl07XG4gICAgICAgIGFsbFdpZGdldEtleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgaWYgKCFmaW5hbE9yZGVyLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgICAgICBmaW5hbE9yZGVyLnB1c2goa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVGhpcyBmaWx0ZXIgaXMgbm93IHNhZmUgYXMgc2F2ZWRWaXNpYmlsaXR5IGlzIGFsd2F5cyBhbiBvYmplY3QuXG4gICAgICAgIHJldHVybiBmaW5hbE9yZGVyLmZpbHRlcihrZXkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RzID0gYWxsV2lkZ2V0S2V5cy5pbmNsdWRlcyhrZXkpO1xuICAgICAgICAgICAgY29uc3QgaXNWaXNpYmxlID0gc2F2ZWRWaXNpYmlsaXR5W2tleV0gIT09IGZhbHNlOyAvLyBOZXcgd2lkZ2V0cyB3aWxsIGRlZmF1bHQgdG8gdmlzaWJsZS5cbiAgICAgICAgICAgIHJldHVybiBleGlzdHMgJiYgaXNWaXNpYmxlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRUYXNrTWV0cmljcygpIHtcbiAgICAgICAgY29uc3QgYWxsVGFza3MgPSB0aGlzLmFsbFRhc2tzIHx8IFtdO1xuICAgICAgICBjb25zdCBub3cgPSBtb21lbnQoKTtcbiAgICAgICAgY29uc3QgdG90YWxUYXNrcyA9IGFsbFRhc2tzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgY29tcGxldGVkVGFza3MgPSBhbGxUYXNrcy5maWx0ZXIodCA9PiB0LnN0YXR1cyA9PT0gJ3gnKS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGNhbmNlbGxlZFRhc2tzID0gYWxsVGFza3MuZmlsdGVyKHQgPT4gdC5zdGF0dXMgPT09ICctJykubGVuZ3RoO1xuICAgICAgICBjb25zdCBpblByb2dyZXNzVGFza3MgPSBhbGxUYXNrcy5maWx0ZXIodCA9PiB0LnN0YXR1cyA9PT0gJy8nKS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IG9wZW5UYXNrcyA9IHRvdGFsVGFza3MgLSBjb21wbGV0ZWRUYXNrcyAtIGNhbmNlbGxlZFRhc2tzIC0gaW5Qcm9ncmVzc1Rhc2tzO1xuXG4gICAgICAgIGNvbnN0IG92ZXJkdWVUYXNrc0NvdW50ID0gYWxsVGFza3MuZmlsdGVyKHQgPT5cbiAgICAgICAgICAgIHQuc3RhdHVzICE9PSAneCcgJiZcbiAgICAgICAgICAgIHQuc3RhdHVzICE9PSAnLScgJiZcbiAgICAgICAgICAgIHQuZHVlRGF0ZSAmJlxuICAgICAgICAgICAgbW9tZW50KHQuZHVlRGF0ZSkuaXNCZWZvcmUobm93LCAnZGF5JylcbiAgICAgICAgKS5sZW5ndGg7XG5cbiAgICAgICAgcmV0dXJuIHsgY29tcGxldGVkVGFza3MsIG9wZW5UYXNrcywgaW5Qcm9ncmVzc1Rhc2tzLCBvdmVyZHVlVGFza3NDb3VudCwgY2FuY2VsbGVkVGFza3MsIHRvdGFsVGFza3MgfTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRXZWVrbHlUYXNrTWV0cmljcygpIHtcbiAgICAgICAgY29uc3QgYWxsVGFza3MgPSB0aGlzLmFsbFRhc2tzIHx8IFtdO1xuICAgICAgICBjb25zdCBub3cgPSBtb21lbnQoKTtcbiAgICAgICAgY29uc3Qgc3RhcnRPZlRvZGF5ID0gbm93LmNsb25lKCkuc3RhcnRPZignZGF5Jyk7XG5cbiAgICAgICAgY29uc3Qgd2Vla1N0YXJ0c09uTW9uZGF5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla1N0YXJ0RGF5ID09PSAnbW9uZGF5JztcbiAgICAgICAgY29uc3Qgd2Vla1N0YXJ0U3RyaW5nID0gd2Vla1N0YXJ0c09uTW9uZGF5ID8gJ2lzb1dlZWsnIDogJ3dlZWsnO1xuXG4gICAgICAgIGNvbnN0IGRhdGVSYW5nZXMgPSB7XG4gICAgICAgICAgICB0b2RheToge1xuICAgICAgICAgICAgICAgIHN0YXJ0OiBzdGFydE9mVG9kYXksXG4gICAgICAgICAgICAgICAgZW5kOiBub3cuY2xvbmUoKS5lbmRPZignZGF5JylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aGlzV2Vlazoge1xuICAgICAgICAgICAgICAgIHN0YXJ0OiBub3cuY2xvbmUoKS5zdGFydE9mKHdlZWtTdGFydFN0cmluZyksXG4gICAgICAgICAgICAgICAgZW5kOiBub3cuY2xvbmUoKS5lbmRPZih3ZWVrU3RhcnRTdHJpbmcpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbmV4dFdlZWs6IHtcbiAgICAgICAgICAgICAgICBzdGFydDogbm93LmNsb25lKCkuYWRkKDEsICd3ZWVrJykuc3RhcnRPZih3ZWVrU3RhcnRTdHJpbmcpLFxuICAgICAgICAgICAgICAgIGVuZDogbm93LmNsb25lKCkuYWRkKDEsICd3ZWVrJykuZW5kT2Yod2Vla1N0YXJ0U3RyaW5nKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG5leHQ0V2Vla3M6IHtcbiAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRPZlRvZGF5LFxuICAgICAgICAgICAgICAgIGVuZDogbm93LmNsb25lKCkuYWRkKDQsICd3ZWVrcycpLmVuZE9mKCdkYXknKVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IG1ldHJpY3MgPSB7XG4gICAgICAgICAgICB0b2RheTogeyBpbmNvbXBsZXRlOiAwLCBjb21wbGV0ZWQ6IDAsIG92ZXJkdWU6IDAgfSxcbiAgICAgICAgICAgIHRoaXNXZWVrOiB7IGluY29tcGxldGU6IDAsIGNvbXBsZXRlZDogMCwgb3ZlcmR1ZTogMCB9LFxuICAgICAgICAgICAgbmV4dFdlZWs6IHsgaW5jb21wbGV0ZTogMCwgY29tcGxldGVkOiAwLCBvdmVyZHVlOiAwIH0sXG4gICAgICAgICAgICBuZXh0NFdlZWtzOiB7IGluY29tcGxldGU6IDAsIGNvbXBsZXRlZDogMCwgb3ZlcmR1ZTogMCB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yIChjb25zdCB0YXNrIG9mIGFsbFRhc2tzKSB7XG4gICAgICAgICAgICBjb25zdCBpc0NvbXBsZXRlZCA9IHRhc2suc3RhdHVzID09PSAneCc7XG4gICAgICAgICAgICBjb25zdCBkdWVEYXRlID0gdGFzay5kdWVEYXRlID8gbW9tZW50KHRhc2suZHVlRGF0ZSkgOiBudWxsO1xuICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbkRhdGUgPSB0YXNrLmNvbXBsZXRpb25EYXRlID8gbW9tZW50KHRhc2suY29tcGxldGlvbkRhdGUpIDogbnVsbDtcblxuICAgICAgICAgICAgaWYgKGlzQ29tcGxldGVkICYmIGNvbXBsZXRpb25EYXRlKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGF0ZVJhbmdlcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29tcGxldGlvbkRhdGUuaXNCZXR3ZWVuKGRhdGVSYW5nZXNba2V5XS5zdGFydCwgZGF0ZVJhbmdlc1trZXldLmVuZCwgJ2RheScsICdbXScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRyaWNzW2tleV0uY29tcGxldGVkKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpc0NvbXBsZXRlZCAmJiBkdWVEYXRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGR1ZURhdGUuaXNCZWZvcmUoc3RhcnRPZlRvZGF5LCAnZGF5JykpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGF0ZVJhbmdlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0cmljc1trZXldLm92ZXJkdWUrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGVSYW5nZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkdWVEYXRlLmlzQmV0d2VlbihkYXRlUmFuZ2VzW2tleV0uc3RhcnQsIGRhdGVSYW5nZXNba2V5XS5lbmQsICdkYXknLCAnW10nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldHJpY3Nba2V5XS5pbmNvbXBsZXRlKys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1ldHJpY3M7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0VGFza01hcHMoKSB7XG4gICAgICAgIGNvbnN0IHVwY29taW5nTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICBjb25zdCBvdmVyZHVlTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICBjb25zdCBhbGxUYXNrcyA9IHRoaXMuYWxsVGFza3M7XG4gICAgICAgIGNvbnN0IG5vdyA9IG1vbWVudCgpO1xuXG4gICAgICAgIGZvciAoY29uc3QgdGFzayBvZiBhbGxUYXNrcykge1xuICAgICAgICAgICAgLy8gV2Ugb25seSBjYXJlIGFib3V0IGluY29tcGxldGUgdGFza3Mgd2l0aCBhIGR1ZSBkYXRlXG4gICAgICAgICAgICBpZiAodGFzay5zdGF0dXMgIT09ICd4JyAmJiB0YXNrLnN0YXR1cyAhPT0gJy0nICYmIHRhc2suZHVlRGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGR1ZURhdGUgPSBtb21lbnQodGFzay5kdWVEYXRlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc092ZXJkdWUgPSBkdWVEYXRlLmlzQmVmb3JlKG5vdywgJ2RheScpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVLZXkgPSBkdWVEYXRlLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuXG4gICAgICAgICAgICAgICAgLy8gQWRkIHRvIHRoZSBhcHByb3ByaWF0ZSBtYXBcbiAgICAgICAgICAgICAgICBpZiAoaXNPdmVyZHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghb3ZlcmR1ZU1hcC5oYXMoZGF0ZUtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJkdWVNYXAuc2V0KGRhdGVLZXksIFtdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvdmVyZHVlTWFwLmdldChkYXRlS2V5KS5wdXNoKHRhc2spO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZHVlRGF0ZS5pc1NhbWVPckFmdGVyKG5vdywgJ2RheScpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgaW5jbHVkZSBmdXR1cmUgdGFza3MgaW4gdGhlIHVwY29taW5nIG1hcFxuICAgICAgICAgICAgICAgICAgICBpZiAoIXVwY29taW5nTWFwLmhhcyhkYXRlS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBjb21pbmdNYXAuc2V0KGRhdGVLZXksIFtdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB1cGNvbWluZ01hcC5nZXQoZGF0ZUtleSkucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdXBjb21pbmdNYXAsIG92ZXJkdWVNYXAgfTtcbiAgICB9XG5cbiAgICByZW5kZXJFbXB0eUhlYXRtYXBXaWRnZXQocGFyZW50LCB0aXRsZSwgbWVzc2FnZSA9ICdObyBmaWxlcyBmb3VuZCBtYXRjaGluZyB0aGUgZmlsdGVyIGNyaXRlcmlhLicpIHtcbiAgICAgICAgY29uc3Qgd2lkZ2V0Q29udGFpbmVyID0gcGFyZW50LmNyZWF0ZURpdih7IGNsczogJ3BtLXdpZGdldC1jb250YWluZXIgcG0tZW1wdHktd2lkZ2V0JyB9KTtcblxuICAgICAgICBjb25zdCBoZWFkZXIgPSB3aWRnZXRDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncG0td2lkZ2V0LWhlYWRlcicgfSk7XG4gICAgICAgIGhlYWRlci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6IHRpdGxlIH0pO1xuXG4gICAgICAgIHdpZGdldENvbnRhaW5lci5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgdGV4dDogbWVzc2FnZSxcbiAgICAgICAgICAgIGNsczogJ3BtLWVtcHR5LXdpZGdldC1tZXNzYWdlJ1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBwb3B1bGF0ZVRhc2tzRGFzaGJvYXJkKCkge1xuICAgICAgICB0aGlzLmRhc2hib2FyZENvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBjb25zdCB3aWRnZXRHcmlkID0gdGhpcy5kYXNoYm9hcmRDb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAncG0tZGFzaGJvYXJkLWdyaWQnIH0pO1xuICAgICAgICBjb25zdCBzZWFyY2hUZXJtID0gdGhpcy5kYXNoYm9hcmRTZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IGZpbmFsT3JkZXIgPSB0aGlzLmdldEZpbmFsV2lkZ2V0T3JkZXIoJ3Rhc2tzJyk7XG5cbiAgICAgICAgY29uc3Qgbm93ID0gbW9tZW50KCk7XG4gICAgICAgIGNvbnN0IHN0YXJ0T2ZUb2RheSA9IG5vdy5jbG9uZSgpLnN0YXJ0T2YoJ2RheScpO1xuICAgICAgICBjb25zdCBlbmRPZlRvZGF5ID0gbm93LmNsb25lKCkuZW5kT2YoJ2RheScpO1xuICAgICAgICBjb25zdCBzdGFydE9mVG9tb3Jyb3cgPSBub3cuY2xvbmUoKS5hZGQoMSwgJ2RheScpLnN0YXJ0T2YoJ2RheScpO1xuICAgICAgICBjb25zdCBlbmRPZlRvbW9ycm93ID0gbm93LmNsb25lKCkuYWRkKDEsICdkYXknKS5lbmRPZignZGF5Jyk7XG4gICAgICAgIGNvbnN0IHN0YXJ0T2ZOZXh0N0RheXMgPSBub3cuY2xvbmUoKS5hZGQoMiwgJ2RheScpLnN0YXJ0T2YoJ2RheScpO1xuICAgICAgICBjb25zdCBlbmRPZk5leHQ3RGF5cyA9IG5vdy5jbG9uZSgpLmFkZCg4LCAnZGF5JykuZW5kT2YoJ2RheScpO1xuXG4gICAgICAgIGNvbnN0IG1ldHJpY3MgPSB7XG4gICAgICAgICAgICB0b2RheTogeyBpbmNvbXBsZXRlOiBbXSwgY29tcGxldGVkOiBbXSwgb3ZlcmR1ZTogW10sIGluUHJvZ3Jlc3M6IFtdIH0sXG4gICAgICAgICAgICB0b21vcnJvdzogeyBpbmNvbXBsZXRlOiBbXSwgaW5Qcm9ncmVzczogW10gfSxcbiAgICAgICAgICAgIG5leHQ3ZGF5czogeyBpbmNvbXBsZXRlOiBbXSwgaW5Qcm9ncmVzczogW10gfSxcbiAgICAgICAgICAgIGZ1dHVyZTogeyBpbmNvbXBsZXRlOiBbXSwgaW5Qcm9ncmVzczogW10gfSxcbiAgICAgICAgICAgIG5vRHVlOiB7IGluY29tcGxldGU6IFtdLCBpblByb2dyZXNzOiBbXSB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gVGhpcyBsb29wIGNvcnJlY3RseSBwcmlvcml0aXplcyB0aGUgZHVlIGRhdGUuXG4gICAgICAgIGZvciAoY29uc3QgdGFzayBvZiB0aGlzLmFsbFRhc2tzKSB7XG4gICAgICAgICAgICBjb25zdCBpc0NvbXBsZXRlZCA9IHRhc2suc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICd4JztcbiAgICAgICAgICAgIGNvbnN0IGlzSW5Qcm9ncmVzcyA9IHRhc2suc3RhdHVzID09PSAnLyc7XG4gICAgICAgICAgICBjb25zdCBkdWVEYXRlID0gdGFzay5kdWVEYXRlID8gbW9tZW50KHRhc2suZHVlRGF0ZSkgOiBudWxsO1xuICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbkRhdGUgPSB0YXNrLmNvbXBsZXRpb25EYXRlID8gbW9tZW50KHRhc2suY29tcGxldGlvbkRhdGUpIDogbnVsbDtcblxuICAgICAgICAgICAgaWYgKGlzQ29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dDb21wbGV0ZWRUYXNrc1RvZGF5ICYmIGNvbXBsZXRpb25EYXRlICYmIGNvbXBsZXRpb25EYXRlLmlzQmV0d2VlbihzdGFydE9mVG9kYXksIGVuZE9mVG9kYXksIG51bGwsICdbXScpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1ldHJpY3MudG9kYXkuY29tcGxldGVkLnB1c2godGFzayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChkdWVEYXRlKSB7IC8vIC0tLT4gUFJJT1JJVFkgMTogQSBkdWUgZGF0ZSBleGlzdHMuXG4gICAgICAgICAgICAgICAgaWYgKGR1ZURhdGUuaXNCZWZvcmUoc3RhcnRPZlRvZGF5LCAnZGF5JykpIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0cmljcy50b2RheS5vdmVyZHVlLnB1c2godGFzayk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkdWVEYXRlLmlzQmV0d2VlbihzdGFydE9mVG9kYXksIGVuZE9mVG9kYXksIG51bGwsICdbXScpKSB7XG4gICAgICAgICAgICAgICAgICAgIChpc0luUHJvZ3Jlc3MgPyBtZXRyaWNzLnRvZGF5LmluUHJvZ3Jlc3MgOiBtZXRyaWNzLnRvZGF5LmluY29tcGxldGUpLnB1c2godGFzayk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkdWVEYXRlLmlzQmV0d2VlbihzdGFydE9mVG9tb3Jyb3csIGVuZE9mVG9tb3Jyb3csIG51bGwsICdbXScpKSB7XG4gICAgICAgICAgICAgICAgICAgIChpc0luUHJvZ3Jlc3MgPyBtZXRyaWNzLnRvbW9ycm93LmluUHJvZ3Jlc3MgOiBtZXRyaWNzLnRvbW9ycm93LmluY29tcGxldGUpLnB1c2godGFzayk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkdWVEYXRlLmlzQmV0d2VlbihzdGFydE9mTmV4dDdEYXlzLCBlbmRPZk5leHQ3RGF5cywgbnVsbCwgJ1tdJykpIHtcbiAgICAgICAgICAgICAgICAgICAgKGlzSW5Qcm9ncmVzcyA/IG1ldHJpY3MubmV4dDdkYXlzLmluUHJvZ3Jlc3MgOiBtZXRyaWNzLm5leHQ3ZGF5cy5pbmNvbXBsZXRlKS5wdXNoKHRhc2spO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZHVlRGF0ZS5pc0FmdGVyKGVuZE9mTmV4dDdEYXlzLCAnZGF5JykpIHtcbiAgICAgICAgICAgICAgICAgICAgKGlzSW5Qcm9ncmVzcyA/IG1ldHJpY3MuZnV0dXJlLmluUHJvZ3Jlc3MgOiBtZXRyaWNzLmZ1dHVyZS5pbmNvbXBsZXRlKS5wdXNoKHRhc2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIC0tLT4gUFJJT1JJVFkgMjogTm8gZHVlIGRhdGUgZXhpc3RzLlxuICAgICAgICAgICAgICAgIChpc0luUHJvZ3Jlc3MgPyBtZXRyaWNzLm5vRHVlLmluUHJvZ3Jlc3MgOiBtZXRyaWNzLm5vRHVlLmluY29tcGxldGUpLnB1c2godGFzayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGlzIHN3aXRjaCBibG9jayBjb3JyZWN0bHkgY2FsbHMgdGhlIG5ldyByZW5kZXJpbmcgZnVuY3Rpb24uXG4gICAgICAgIGZvciAoY29uc3Qgd2lkZ2V0S2V5IG9mIGZpbmFsT3JkZXIpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza3NEYXNoYm9hcmRXaWRnZXRzW3dpZGdldEtleV0pIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHdpZGdldE5hbWUgPSBEQVNIQk9BUkRXSURHRVRTLnRhc2tzW3dpZGdldEtleV0/Lm5hbWUgfHwgJyc7XG4gICAgICAgICAgICBpZiAoc2VhcmNoVGVybSAmJiAhd2lkZ2V0TmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0pKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN3aXRjaCAod2lkZ2V0S2V5KSB7XG4gICAgICAgICAgICAgICAgY2FzZSAndG9kYXknOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclRhc2tTdW1tYXJ5V2lkZ2V0KHdpZGdldEdyaWQsICdUb2RheScsIG1ldHJpY3MudG9kYXkuaW5jb21wbGV0ZSwgbWV0cmljcy50b2RheS5jb21wbGV0ZWQsIG1ldHJpY3MudG9kYXkub3ZlcmR1ZSwgbWV0cmljcy50b2RheS5pblByb2dyZXNzLCBbXSwgJ3RvZGF5Jyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RvbW9ycm93JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJUYXNrU3VtbWFyeVdpZGdldCh3aWRnZXRHcmlkLCAnVG9tb3Jyb3cnLCBtZXRyaWNzLnRvbW9ycm93LmluY29tcGxldGUsIFtdLCBbXSwgbWV0cmljcy50b21vcnJvdy5pblByb2dyZXNzLCBbXSwgJ3RvbW9ycm93Jyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ25leHQ3ZGF5cyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyVGFza1N1bW1hcnlXaWRnZXQod2lkZ2V0R3JpZCwgJ05leHQgNyBEYXlzJywgbWV0cmljcy5uZXh0N2RheXMuaW5jb21wbGV0ZSwgW10sIFtdLCBtZXRyaWNzLm5leHQ3ZGF5cy5pblByb2dyZXNzLCBbXSwgJ25leHQ3ZGF5cycpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmdXR1cmVOb0R1ZSc6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tYmluZWRJbmNvbXBsZXRlID0gbWV0cmljcy5mdXR1cmUuaW5jb21wbGV0ZSB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tYmluZWRJblByb2dyZXNzID0gWy4uLihtZXRyaWNzLmZ1dHVyZS5pblByb2dyZXNzIHx8IFtdKSwgLi4uKG1ldHJpY3Mubm9EdWUuaW5Qcm9ncmVzcyB8fCBbXSldO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclRhc2tTdW1tYXJ5V2lkZ2V0KHdpZGdldEdyaWQsICdGdXR1cmUgLyBObyBEdWUnLCBjb21iaW5lZEluY29tcGxldGUsIFtdLCBbXSwgY29tYmluZWRJblByb2dyZXNzLCBtZXRyaWNzLm5vRHVlLmluY29tcGxldGUsICdmdXR1cmVOb0R1ZScpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAndXBjb21pbmdvdmVyZHVlJzpcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB1cGNvbWluZ01hcCwgb3ZlcmR1ZU1hcCB9ID0gYXdhaXQgdGhpcy5nZXRUYXNrTWFwcygpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b3RhbERhdGFNYXAgPSBuZXcgTWFwKHVwY29taW5nTWFwKTtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmR1ZU1hcC5mb3JFYWNoKCh0YXNrcywgZGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdUYXNrcyA9IHRvdGFsRGF0YU1hcC5nZXQoZGF0ZSkgfHwgW107XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbERhdGFNYXAuc2V0KGRhdGUsIGV4aXN0aW5nVGFza3MuY29uY2F0KHRhc2tzKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGNvbWluZ0dyYWRpZW50ID0gdGhpcy5jcmVhdGVDb2xvckdyYWRpZW50KHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tTdGF0dXNDb2xvck9wZW4pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdmVyZHVlQmFzZUNvbG9yID0gdGhpcy5nZXRDb21wdXRlZENzc1ZhcignLS10YXNrLWNvbG9yLW92ZXJkdWUnKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3ZlcmR1ZUdyYWRpZW50ID0gdGhpcy5jcmVhdGVDb2xvckdyYWRpZW50KG92ZXJkdWVCYXNlQ29sb3IpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmdXR1cmVFbmREYXRlID0gbW9tZW50KCkuYWRkKDEyLCAnbW9udGhzJykuZW5kT2YoJ21vbnRoJyk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucG9wdWxhdGVTaW5nbGVIZWF0bWFwV2lkZ2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0R3JpZC5jcmVhdGVEaXYoeyBjbHM6ICdwbS13aWRnZXQtY29udGFpbmVyJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdVcGNvbWluZyAmIE92ZXJkdWUgVGFza3MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxEYXRhTWFwLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXBjb21pbmdHcmFkaWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmREYXRlOiBmdXR1cmVFbmREYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwY29taW5nTWFwOiB1cGNvbWluZ01hcCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyZHVlTWFwOiBvdmVyZHVlTWFwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJkdWVHcmFkaWVudDogb3ZlcmR1ZUdyYWRpZW50XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3VwY29taW5nb3ZlcmR1ZSdcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndGFza2NvbXBsZXRpb25oZWF0bWFwJzoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB3aWRnZXRDb250YWluZXIgPSB3aWRnZXRHcmlkLmNyZWF0ZURpdih7IGNsczogJ3BtLXdpZGdldC1jb250YWluZXInIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbFRhc2tzLmZvckVhY2godGFzayA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFzay5zdGF0dXMgPT09ICd4JyAmJiB0YXNrLmNvbXBsZXRpb25EYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZUtleSA9IG1vbWVudCh0YXNrLmNvbXBsZXRpb25EYXRlKS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbXBsZXRpb25NYXAuaGFzKGRhdGVLZXkpKSBjb21wbGV0aW9uTWFwLnNldChkYXRlS2V5LCBbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvbk1hcC5nZXQoZGF0ZUtleSkucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyYWRpZW50ID0gdGhpcy5jcmVhdGVDb2xvckdyYWRpZW50KHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tTdGF0dXNDb2xvckNvbXBsZXRlZCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucG9wdWxhdGVTaW5nbGVIZWF0bWFwV2lkZ2V0KHdpZGdldENvbnRhaW5lciwgXCJUYXNrIENvbXBsZXRpb24gQWN0aXZpdHlcIiwgY29tcGxldGlvbk1hcCwgZ3JhZGllbnQsIHt9LCAndGFza2NvbXBsZXRpb25oZWF0bWFwJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICd0YXNrc3RhdHVzb3ZlcnZpZXcnOlxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGNvbXBsZXRlZFRhc2tzLCBvcGVuVGFza3MsIGluUHJvZ3Jlc3NUYXNrcywgb3ZlcmR1ZVRhc2tzQ291bnQsIGNhbmNlbGxlZFRhc2tzLCB0b3RhbFRhc2tzIH0gPSBhd2FpdCB0aGlzLmdldFRhc2tNZXRyaWNzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyVGFza1N0YXR1c1dpZGdldCh3aWRnZXRHcmlkLCBjb21wbGV0ZWRUYXNrcywgb3BlblRhc2tzLCBpblByb2dyZXNzVGFza3MsIG92ZXJkdWVUYXNrc0NvdW50LCBjYW5jZWxsZWRUYXNrcywgdG90YWxUYXNrcywgJ3Rhc2tzdGF0dXNvdmVydmlldycpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuXG5cbiAgICBnZXRGaW5hbFdpZGdldE9yZGVyKGRhc2hib2FyZFR5cGUpIHtcbiAgICAgICAgY29uc3QgdmlzaWJpbGl0eUtleSA9IGAke2Rhc2hib2FyZFR5cGV9RGFzaGJvYXJkV2lkZ2V0c2A7XG4gICAgICAgIGNvbnN0IG9yZGVyS2V5ID0gYCR7ZGFzaGJvYXJkVHlwZX1EYXNoYm9hcmRPcmRlcmA7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRXaWRnZXRzID0gREFTSEJPQVJEV0lER0VUU1tkYXNoYm9hcmRUeXBlXTtcblxuICAgICAgICAvLyBTYWZlbHkgZ2V0IHNldHRpbmdzLCBkZWZhdWx0aW5nIHRvIGVtcHR5IG9iamVjdHMvYXJyYXlzIGlmIHRoZXkgZG9uJ3QgZXhpc3RcbiAgICAgICAgY29uc3Qgc2F2ZWRWaXNpYmlsaXR5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbdmlzaWJpbGl0eUtleV0gfHwge307XG4gICAgICAgIGNvbnN0IHNhdmVkT3JkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5nc1tvcmRlcktleV0gfHwgW107XG5cbiAgICAgICAgLy8gR2V0IGFsbCBwb3NzaWJsZSB3aWRnZXQga2V5c1xuICAgICAgICBsZXQgYWxsV2lkZ2V0S2V5cyA9IE9iamVjdC5rZXlzKGRlZmF1bHRXaWRnZXRzKTtcbiAgICAgICAgaWYgKGRhc2hib2FyZFR5cGUgPT09ICdjcmVhdGlvbicpIHtcbiAgICAgICAgICAgIC8vIEFsc28gaW5jbHVkZSBjdXN0b20gaGVhdG1hcHMgZm9yIHRoZSBjcmVhdGlvbiBkYXNoYm9hcmRcbiAgICAgICAgICAgICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21IZWF0bWFwcyB8fCBbXSkuZm9yRWFjaCgoXywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBhbGxXaWRnZXRLZXlzLnB1c2goYGN1c3RvbS0ke2luZGV4fWApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNZXJnZSBzYXZlZCBvcmRlciB3aXRoIGFsbCBwb3NzaWJsZSBrZXlzIHRvIGVuc3VyZSBuZXcgd2lkZ2V0cyBhcmUgaW5jbHVkZWRcbiAgICAgICAgY29uc3QgZmluYWxPcmRlciA9IFsuLi5uZXcgU2V0KFsuLi5zYXZlZE9yZGVyLCAuLi5hbGxXaWRnZXRLZXlzXSldO1xuXG4gICAgICAgIC8vIEZpbHRlciB0aGUgZmluYWwgbGlzdCBiYXNlZCBvbiB2aXNpYmlsaXR5IHNldHRpbmdzXG4gICAgICAgIHJldHVybiBmaW5hbE9yZGVyLmZpbHRlcihrZXkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RzID0gYWxsV2lkZ2V0S2V5cy5pbmNsdWRlcyhrZXkpO1xuICAgICAgICAgICAgLy8gSWYgYSB3aWRnZXQncyB2aXNpYmlsaXR5IGlzIG5vdCBleHBsaWNpdGx5IHNldCwgZGVmYXVsdCB0byB2aXNpYmxlICh0cnVlKVxuICAgICAgICAgICAgY29uc3QgaXNWaXNpYmxlID0gc2F2ZWRWaXNpYmlsaXR5W2tleV0gIT09IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIGV4aXN0cyAmJiBpc1Zpc2libGU7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlclRhc2tTdGF0dXNXaWRnZXQocGFyZW50Q29udGFpbmVyLCBjb21wbGV0ZWRUYXNrcywgb3BlblRhc2tzLCBpblByb2dyZXNzVGFza3MsIG92ZXJkdWVUYXNrcywgY2FuY2VsbGVkVGFza3MsIHRvdGFsVGFza3MsIHdpZGdldEtleSkge1xuICAgICAgICBjb25zdCBzdGF0c0NvbnRhaW5lciA9IHBhcmVudENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdwbS13aWRnZXQtY29udGFpbmVyJyB9KTtcblxuICAgICAgICAvLyAtLS0gMS4gU3RhdGUgTWFuYWdlbWVudCAtLS1cbiAgICAgICAgY29uc3QgaXNDb2xsYXBzZWQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb2xsYXBzZWRXaWRnZXRzW3dpZGdldEtleV0gPT09IHRydWU7XG4gICAgICAgIGlmIChpc0NvbGxhcHNlZCkge1xuICAgICAgICAgICAgc3RhdHNDb250YWluZXIuYWRkQ2xhc3MoJ2lzLWNvbGxhcHNlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIDIuIENyZWF0ZSBVSSBFbGVtZW50cyAtLS1cbiAgICAgICAgY29uc3QgaGVhZGVyID0gc3RhdHNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncG0td2lkZ2V0LWhlYWRlcicgfSk7XG4gICAgICAgIGNvbnN0IHRvZ2dsZUljb24gPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnd2lkZ2V0LXRvZ2dsZS1pY29uJyB9KTtcbiAgICAgICAgaGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1Rhc2sgU3RhdHVzIE92ZXJ2aWV3JyB9KTtcblxuICAgICAgICAvLyBUaGlzIHdyYXBwZXIgd2lsbCBiZSBoaWRkZW4gd2hlbiBjb2xsYXBzZWRcbiAgICAgICAgY29uc3QgYmFyQ2hhcnRzV3JhcHBlciA9IHN0YXRzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3dpZGdldC1jb250ZW50LXdyYXBwZXInIH0pO1xuXG4gICAgICAgIC8vIC0tLSAzLiBDbGljayBIYW5kbGVyIHRvIFRvZ2dsZSBTdGF0ZSAtLS1cbiAgICAgICAgaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudGx5Q29sbGFwc2VkID0gc3RhdHNDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtY29sbGFwc2VkJyk7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb2xsYXBzZWRXaWRnZXRzW3dpZGdldEtleV0gPSBjdXJyZW50bHlDb2xsYXBzZWQ7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gLS0tIDQuIEJhciBDaGFydCBSZW5kZXJpbmcgTG9naWMgLS0tXG4gICAgICAgIGNvbnN0IHJlbmRlckJhcnMgPSAoKSA9PiB7XG4gICAgICAgICAgICBiYXJDaGFydHNXcmFwcGVyLmVtcHR5KCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclRhc2tCYXJDaGFydChiYXJDaGFydHNXcmFwcGVyLCAnQ2FuY2VsbGVkJywgY2FuY2VsbGVkVGFza3MsIHRvdGFsVGFza3MsIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tTdGF0dXNDb2xvckNhbmNlbGxlZCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclRhc2tCYXJDaGFydChiYXJDaGFydHNXcmFwcGVyLCAnT3ZlcmR1ZScsIG92ZXJkdWVUYXNrcywgdG90YWxUYXNrcywgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza1N0YXR1c0NvbG9yT3ZlcmR1ZSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclRhc2tCYXJDaGFydChiYXJDaGFydHNXcmFwcGVyLCAnSW4gUHJvZ3Jlc3MnLCBpblByb2dyZXNzVGFza3MsIHRvdGFsVGFza3MsIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tTdGF0dXNDb2xvckluUHJvZ3Jlc3MpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJUYXNrQmFyQ2hhcnQoYmFyQ2hhcnRzV3JhcHBlciwgJ09wZW4nLCBvcGVuVGFza3MsIHRvdGFsVGFza3MsIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tTdGF0dXNDb2xvck9wZW4pO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJUYXNrQmFyQ2hhcnQoYmFyQ2hhcnRzV3JhcHBlciwgJ0NvbXBsZXRlZCcsIGNvbXBsZXRlZFRhc2tzLCB0b3RhbFRhc2tzLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrU3RhdHVzQ29sb3JDb21wbGV0ZWQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlbmRlckJhcnMoKTtcblxuICAgICAgICAvLyAtLS0gNS4gU2V0IEluaXRpYWwgSWNvbiAtLS1cbiAgICAgICAgc2V0SWNvbih0b2dnbGVJY29uLCAnY2hldnJvbi1kb3duJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyBhIHNpbmdsZSBob3Jpem9udGFsIGJhciBjaGFydCBmb3IgYSB0YXNrIHN0YXRpc3RpYy5cbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNyZWF0ZXMgdGhlIERPTSBlbGVtZW50cyBkaXJlY3RseSB3aXRob3V0IHVzaW5nIENoYXJ0LmpzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbiAgICAgKiBhbmQgdG8gbWF0Y2ggdGhlIHJlcXVlc3RlZCBzdHlsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHBhcmVudENvbnRhaW5lciBUaGUgY29udGFpbmVyIHRvIGFwcGVuZCB0aGlzIGNoYXJ0IHRvLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsYWJlbCBUaGUgdGV4dCBsYWJlbCBmb3IgdGhlIG1ldHJpYyAoZS5nLiwgXCJPdmVyZHVlXCIpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBUaGUgY291bnQgZm9yIHRoaXMgbWV0cmljLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b3RhbCBUaGUgdG90YWwgbnVtYmVyIG9mIGl0ZW1zIHRvIGNhbGN1bGF0ZSB0aGUgcGVyY2VudGFnZSBhZ2FpbnN0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb2xvciBUaGUgY29sb3Igb2YgdGhlIGJhci5cbiAgICAgKi9cbiAgICByZW5kZXJUYXNrQmFyQ2hhcnQocGFyZW50Q29udGFpbmVyLCBsYWJlbCwgdmFsdWUsIHRvdGFsLCBjb2xvcikge1xuICAgICAgICBjb25zdCBwZXJjZW50YWdlID0gdG90YWwgPiAwID8gKCh2YWx1ZSAvIHRvdGFsKSAqIDEwMCkudG9GaXhlZCgwKSA6IDA7XG4gICAgICAgIGNvbnN0IHdpZGdldEVsID0gcGFyZW50Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3BtLWJhci1jaGFydC13aWRnZXQnIH0pO1xuXG4gICAgICAgIC8vIERldGVybWluZSB3aGF0IHZhbHVlIHRvIGRpc3BsYXkgYmFzZWQgb24gdGhlIGN1cnJlbnQgbW9kZVxuICAgICAgICBjb25zdCBkaXNwbGF5VmFsdWUgPSB0aGlzLnRhc2tCYXJDaGFydE1vZGUgPT09ICdwZXJjZW50J1xuICAgICAgICAgICAgPyBgJHtwZXJjZW50YWdlfSVgXG4gICAgICAgICAgICA6IGAke3ZhbHVlfWA7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBET00gZWxlbWVudHNcbiAgICAgICAgd2lkZ2V0RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogbGFiZWwsIGNsczogJ3BtLWJhci1sYWJlbCcgfSk7XG4gICAgICAgIHdpZGdldEVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IGRpc3BsYXlWYWx1ZSwgY2xzOiAncG0tYmFyLWRpc3BsYXktdmFsdWUnIH0pO1xuXG4gICAgICAgIGNvbnN0IGJhclRyYWNrID0gd2lkZ2V0RWwuY3JlYXRlRGl2KHsgY2xzOiAncG0tYmFyLXRyYWNrJyB9KTtcbiAgICAgICAgY29uc3QgYmFyRmlsbCA9IGJhclRyYWNrLmNyZWF0ZURpdih7IGNsczogJ3BtLWJhci1maWxsJyB9KTtcblxuICAgICAgICBiYXJGaWxsLnN0eWxlLndpZHRoID0gYCR7cGVyY2VudGFnZX0lYDtcbiAgICAgICAgYmFyRmlsbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgdG8gcmUtcmVuZGVyIGp1c3QgdGhlIGNhbGVuZGFyIGdyaWQuXG4gICAgICovXG4gICAgcmVuZGVyQ2FsZW5kYXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhbGVuZGFyQm9keUVsKSB7XG4gICAgICAgICAgICB0aGlzLmNhbGVuZGFyQm9keUVsLmVtcHR5KCk7XG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhHcmlkKHRoaXMuZGlzcGxheWVkTW9udGgsIHRoaXMuY2FsZW5kYXJCb2R5RWwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2hvd3MgYSBwb3B1cCBsaXN0aW5nIGFsbCBub3RlcywgdGFza3MsIGFuZCBhc3NldHMgYXNzb2NpYXRlZCB3aXRoIGEgc3BlY2lmaWMgZGF5LlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldEVsIFRoZSBjYWxlbmRhciBkYXkgZWxlbWVudCB0byBwb3NpdGlvbiB0aGUgcG9wdXAgbmVhci5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YUJ5VHlwZSBBbiBvYmplY3QgY29udGFpbmluZyBhcnJheXMgb2YgaXRlbXMgdG8gZGlzcGxheSwga2V5ZWQgYnkgdHlwZS5cbiAgICAgKiBAcGFyYW0ge0RhdGV9IGRhdGUgVGhlIGRhdGUgZm9yIHdoaWNoIHRoZSBwb3B1cCBpcyBiZWluZyBzaG93bi5cbiAgICAgKi9cbiAgICBzaG93RmlsZVBvcHVwKHRhcmdldEVsLCBkYXRhQnlUeXBlLCBkYXRlT3JUaXRsZSwgaXNNb2JpbGUgPSBmYWxzZSkge1xuICAgIFxuICAgICAgICB0aGlzLmhpZGVGaWxlUG9wdXAoKTtcbiAgICAgICAgdGhpcy5wb3B1cEVsID0gY3JlYXRlRGl2KHsgY2xzOiAnb3RoZXItbm90ZXMtcG9wdXAnIH0pO1xuICAgICAgICBjb25zdCB7IHNldHRpbmdzIH0gPSB0aGlzLnBsdWdpbjtcblxuICAgICAgICBpZiAoaXNNb2JpbGUpIHtcbiAgICAgICAgICAgIHRoaXMucG9wdXBFbC5hZGRDbGFzcygnaXMtbW9iaWxlLXBvcHVwJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgaGVhZGVyIHdpdGggYSBjbG9zZSBidXR0b24gYW5kIGR5bmFtaWMgZGF0ZS90aXRsZVxuICAgICAgICBjb25zdCBoZWFkZXJSb3cgPSB0aGlzLnBvcHVwRWwuY3JlYXRlRGl2KHsgY2xzOiAncG9wdXAtaGVhZGVyJyB9KTtcblxuICAgICAgICAvLyBUaGlzIGxvZ2ljIG5vdyBjb3JyZWN0bHkgdXNlcyB0aGUgJ2RhdGVPclRpdGxlJyBwYXJhbWV0ZXIgdG8gaGFuZGxlXG4gICAgICAgIC8vIGJvdGggRGF0ZSBvYmplY3RzIChmcm9tIGhlYXRtYXBzKSBhbmQgdGl0bGUgc3RyaW5ncyAoZnJvbSBzdW1tYXJ5IHdpZGdldHMpLlxuICAgICAgICBsZXQgaGVhZGVyVGV4dDtcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRlT3JUaXRsZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGhlYWRlclRleHQgPSBkYXRlT3JUaXRsZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhlYWRlclRleHQgPSBtb21lbnQoZGF0ZU9yVGl0bGUpLmZvcm1hdChcImRkZGQsIEQgTU1NTSBZWVlZXCIpO1xuICAgICAgICB9XG4gICAgICAgIGhlYWRlclJvdy5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC1oZWFkZXItdGl0bGUnLCB0ZXh0OiBoZWFkZXJUZXh0IH0pO1xuXG4gICAgICAgIGNvbnN0IGNsb3NlQnRuID0gaGVhZGVyUm93LmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWNsb3NlLWJ0bicgfSk7XG4gICAgICAgIHNldEljb24oY2xvc2VCdG4sICd4Jyk7XG4gICAgICAgIGhlYWRlclJvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGlkZUZpbGVQb3B1cCgpKTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBzY3JvbGxhYmxlIHdyYXBwZXIgZm9yIHRoZSBjb250ZW50XG4gICAgICAgIGNvbnN0IGNvbnRlbnRXcmFwcGVyID0gdGhpcy5wb3B1cEVsLmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWNvbnRlbnQtd3JhcHBlcicgfSk7XG5cbiAgICAgICAgLy8gbG9naWMgZm9yIElDUyBldmVudHNcbiAgICAgICAgaWYgKGRhdGFCeVR5cGUuaWNzICYmIGRhdGFCeVR5cGUuaWNzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbnRXcmFwcGVyLmNyZWF0ZUVsKCdoNicsIHsgdGV4dDogXCJDYWxlbmRhciBFdmVudHNcIiwgY2xzOiBcInBvcHVwLXNlY3Rpb24taGVhZGVyXCIgfSk7XG4gICAgICAgICAgICBkYXRhQnlUeXBlLmljcy5mb3JFYWNoKGV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtRWwgPSBjb250ZW50V3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6IFwib3RoZXItbm90ZXMtcG9wdXAtaXRlbSBpcy1jYWxlbmRhci1ldmVudFwiIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGljb25FbCA9IGl0ZW1FbC5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLWljb24nIH0pO1xuICAgICAgICAgICAgICAgIHNldEljb24oaWNvbkVsLCAnY2FsZW5kYXInKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0aXRsZVdyYXBwZXIgPSBpdGVtRWwuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS10aXRsZS13cmFwcGVyJyB9KTtcbiAgICAgICAgICAgICAgICB0aXRsZVdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS10aXRsZScgfSkuc2V0VGV4dChldmVudC5zdW1tYXJ5KTtcbiAgICAgICAgICAgICAgICBpZiAoIWV2ZW50LmlzQWxsRGF5ICYmIGV2ZW50LnN0YXJ0VGltZSAmJiBldmVudC5lbmRUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVTdHJpbmcgPSBgJHtldmVudC5zdGFydFRpbWV9IC0gJHtldmVudC5lbmRUaW1lfWA7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlV3JhcHBlci5jcmVhdGVEaXYoeyB0ZXh0OiB0aW1lU3RyaW5nLCBjbHM6ICdub3RlLXBhdGgnIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgaGFzT3RoZXJDb250ZW50ID0gKGRhdGFCeVR5cGUudGFza3MgJiYgZGF0YUJ5VHlwZS50YXNrcy5sZW5ndGggPiAwKSB8fCAoZGF0YUJ5VHlwZS5kYWlseSAmJiBkYXRhQnlUeXBlLmRhaWx5Lmxlbmd0aCA+IDApO1xuICAgICAgICAgICAgaWYgKGhhc090aGVyQ29udGVudCkge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogXCJwb3B1cC1zZXBhcmF0b3JcIiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFkZEZpbGVUb0xpc3QgPSAoY29udGFpbmVyLCBmaWxlLCB0eXBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpdGVtRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnb3RoZXItbm90ZXMtcG9wdXAtaXRlbScgfSk7XG4gICAgICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuICAgICAgICAgICAgY29uc3QgZG90ID0gaXRlbUVsLmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWZpbGUtZG90JyB9KTtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnZGFpbHknKSB7XG4gICAgICAgICAgICAgICAgZG90LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHNldHRpbmdzLmRhaWx5Tm90ZURvdENvbG9yO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnY3JlYXRlZCcpIHtcbiAgICAgICAgICAgICAgICBkb3Quc3R5bGUuYmFja2dyb3VuZENvbG9yID0gc2V0dGluZ3Mubm90ZUNyZWF0ZWRDb2xvcjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ21vZGlmaWVkJykge1xuICAgICAgICAgICAgICAgIGRvdC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBzZXR0aW5ncy5ub3RlTW9kaWZpZWRDb2xvcjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2Fzc2V0Jykge1xuICAgICAgICAgICAgICAgIGRvdC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBzZXR0aW5ncy5hc3NldERvdENvbG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdhc3NldCcgJiYgdGhpcy5pc0ltYWdlQXNzZXQoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0aHVtYm5haWwgPSBpdGVtRWwuY3JlYXRlRWwoJ2ltZycsIHsgY2xzOiAncG9wdXAtYXNzZXQtdGh1bWJuYWlsJyB9KTtcbiAgICAgICAgICAgICAgICB0aHVtYm5haWwuc3JjID0gdGhpcy5hcHAudmF1bHQuZ2V0UmVzb3VyY2VQYXRoKGZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdGl0bGVQYXRoV3JhcHBlciA9IGl0ZW1FbC5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLXRpdGxlLXBhdGgtd3JhcHBlcicgfSk7XG4gICAgICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCcubWQnKSA/IGZpbGUuYmFzZW5hbWUgOiBmaWxlLm5hbWU7XG4gICAgICAgICAgICB0aXRsZVBhdGhXcmFwcGVyLmNyZWF0ZURpdih7IHRleHQ6IGRpc3BsYXlOYW1lLCBjbHM6ICdub3RlLXRpdGxlJyB9KTtcbiAgICAgICAgICAgIGlmIChmaWxlLnBhcmVudCAmJiBmaWxlLnBhcmVudC5wYXRoICE9PSAnLycpIHtcbiAgICAgICAgICAgICAgICB0aXRsZVBhdGhXcmFwcGVyLmNyZWF0ZURpdih7IHRleHQ6IGZpbGUucGFyZW50LnBhdGgsIGNsczogJ25vdGUtcGF0aCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGl0ZW1FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsgXG4gICAgICAgICAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUZpbGVDbGljayhmaWxlLCBlLCB7fSk7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlRmlsZVBvcHVwKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBhZGRUYXNrVG9MaXN0ID0gKGNvbnRhaW5lciwgdGFzaywgdmlldykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXRlbUVsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ290aGVyLW5vdGVzLXBvcHVwLWl0ZW0nIH0pO1xuICAgICAgICAgICAgaXRlbUVsLmRhdGFzZXQudGFza1N0YXR1cyA9IHRhc2suc3RhdHVzO1xuXG4gICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IGl0ZW1FbC5jcmVhdGVEaXYoeyBjbHM6ICd0YXNrLWNoZWNrYm94LXN5bWJvbCcgfSk7XG4gICAgICAgICAgICB2aWV3Ll9yZW5kZXJUYXNrU3ltYm9sKGNoZWNrYm94LCB0YXNrKTtcbiAgICAgICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIGNoZWNrYm94LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBhd2FpdCB2aWV3LnRvZ2dsZVRhc2tDb21wbGV0aW9uKHRhc2spO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHRleHRTcGFuID0gaXRlbUVsLmNyZWF0ZVNwYW4oeyBjbHM6ICd0YXNrLXRleHQnIH0pO1xuXG4gICAgICAgICAgICAvLyBBZGQgY29tcGxldGVkIGNsYXNzIGlmIHRhc2sgaXMgY29tcGxldGVkXG4gICAgICAgICAgICBjb25zdCBpc0NvbXBsZXRlZCA9IHRhc2suc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICd4JztcbiAgICAgICAgICAgIGlmIChpc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgIHRleHRTcGFuLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlZCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBSZW5kZXIgdGV4dCB1c2luZyBNYXJrZG93blJlbmRlcmVyXG4gICAgICAgICAgICBNYXJrZG93blJlbmRlcmVyLnJlbmRlcih0aGlzLmFwcCwgdGFzay50ZXh0LCB0ZXh0U3BhbiwgdGFzay5maWxlLnBhdGgsIHRoaXMpO1xuXG4gICAgICAgICAgICAgaXRlbUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICB2aWV3LmhhbmRsZUZpbGVDbGljayh0YXNrLmZpbGUsIGUsIHsgbGluZTogdGFzay5saW5lTnVtYmVyIH0pO1xuICAgICAgICAgICAgICAgIHZpZXcuaGlkZUZpbGVQb3B1cCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cblxuXG4gICAgICAgIC8vIGxvZ2ljIGZvciBwb3B1bGF0aW5nIHRoZSBjb250ZW50XG4gICAgICAgIGNvbnN0IGFsbEZpbGVzID0gWy4uLihkYXRhQnlUeXBlLmRhaWx5IHx8IFtdKSwgLi4uKGRhdGFCeVR5cGUuY3JlYXRlZCB8fCBbXSksIC4uLihkYXRhQnlUeXBlLm1vZGlmaWVkIHx8IFtdKSwgLi4uKGRhdGFCeVR5cGUuYXNzZXRzIHx8IFtdKV07XG4gICAgICAgIGNvbnN0IGhhc1Rhc2tzID0gZGF0YUJ5VHlwZS50YXNrcyAmJiBkYXRhQnlUeXBlLnRhc2tzLmxlbmd0aCA+IDA7XG4gICAgICAgIGNvbnN0IGhhc0ZpbGVzID0gYWxsRmlsZXMubGVuZ3RoID4gMDtcblxuICAgICAgICBpZiAoaGFzVGFza3MpIHtcbiAgICAgICAgICAgIGNvbnRlbnRXcmFwcGVyLmNyZWF0ZUVsKCdoNicsIHsgdGV4dDogJ1Rhc2tzJywgY2xzOiAncG9wdXAtc2VjdGlvbi1oZWFkZXInIH0pO1xuXG4gICAgICAgICAgICAvLyBTb3J0cyB0aGUgdGFza3MgYXJyYXkgaW4gcGxhY2UgYnkgZGF0ZSwgaW4gYXNjZW5kaW5nIG9yZGVyLlxuICAgICAgICAgICAgZGF0YUJ5VHlwZS50YXNrcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBkdWUgZGF0ZSBmb3IgdGFzayBBLCBvciBmYWxsIGJhY2sgdG8gaXRzIGZpbGUncyBjcmVhdGlvbiB0aW1lLlxuICAgICAgICAgICAgICAgIC8vIFVzZSAwIGFzIGEgZmluYWwgZmFsbGJhY2sgdG8gcHJldmVudCBlcnJvcnMgd2l0aCBpdGVtcyB0aGF0IGhhdmUgbm8gZGF0ZSBpbmZvLlxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVBID0gYS5kdWVEYXRlID8gYS5kdWVEYXRlLmdldFRpbWUoKSA6IChhLmZpbGUgPyBhLmZpbGUuc3RhdC5jdGltZSA6IDApO1xuXG4gICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBkdWUgZGF0ZSBmb3IgdGFzayBCLCB3aXRoIHRoZSBzYW1lIGZhbGxiYWNrIGxvZ2ljLlxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVCID0gYi5kdWVEYXRlID8gYi5kdWVEYXRlLmdldFRpbWUoKSA6IChiLmZpbGUgPyBiLmZpbGUuc3RhdC5jdGltZSA6IDApO1xuXG4gICAgICAgICAgICAgICAgLy8gU3VidHJhY3RpbmcgdGhlIGRhdGVzIHNvcnRzIHRoZW0gaW4gYXNjZW5kaW5nIChvbGRlc3QgdG8gbmV3ZXN0KSBvcmRlci5cbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZUEgLSBkYXRlQjtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBkYXRhQnlUeXBlLnRhc2tzLmZvckVhY2godGFzayA9PiBhZGRUYXNrVG9MaXN0KGNvbnRlbnRXcmFwcGVyLCB0YXNrLCB0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc1Rhc2tzICYmIGhhc0ZpbGVzKSB7XG4gICAgICAgICAgICBjb250ZW50V3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC1zZXBhcmF0b3InIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNGaWxlcykge1xuICAgICAgICAgICAgY29udGVudFdyYXBwZXIuY3JlYXRlRWwoJ2g2JywgeyB0ZXh0OiAnTm90ZXMgJiBBc3NldHMnLCBjbHM6ICdwb3B1cC1zZWN0aW9uLWhlYWRlcicgfSk7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIFNldCB0byBrZWVwIHRyYWNrIG9mIHRoZSBwYXRocyBvZiBmaWxlcyBhbHJlYWR5IGFkZGVkIHRvIHRoZSBwb3B1cC5cbiAgICAgICAgICAgIGNvbnN0IHJlbmRlcmVkRmlsZVBhdGhzID0gbmV3IFNldCgpO1xuXG4gICAgICAgICAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gcmVuZGVyIGEgZmlsZSBvbmx5IGlmIGl0IGhhc24ndCBiZWVuIHJlbmRlcmVkIHlldC5cbiAgICAgICAgICAgIGNvbnN0IGFkZFVuaXF1ZUZpbGUgPSAoZmlsZSwgdHlwZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlICYmIGZpbGUucGF0aCAmJiAhcmVuZGVyZWRGaWxlUGF0aHMuaGFzKGZpbGUucGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkRmlsZVRvTGlzdChjb250ZW50V3JhcHBlciwgZmlsZSwgdHlwZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVkRmlsZVBhdGhzLmFkZChmaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIFByb2Nlc3MgZGFpbHkgbm90ZXMgZmlyc3QgdG8gZ2l2ZSB0aGVtIHByaW9yaXR5LlxuICAgICAgICAgICAgKGRhdGFCeVR5cGUuZGFpbHkgfHwgW10pLmZvckVhY2goZmlsZSA9PiBhZGRVbmlxdWVGaWxlKGZpbGUsICdkYWlseScpKTtcblxuICAgICAgICAgICAgLy8gUHJvY2VzcyBjcmVhdGVkLCBtb2RpZmllZCwgYW5kIGFzc2V0IG5vdGVzLCBza2lwcGluZyBhbnkgdGhhdCBhcmUgYWxyZWFkeSByZW5kZXJlZC5cbiAgICAgICAgICAgIChkYXRhQnlUeXBlLmNyZWF0ZWQgfHwgW10pLmZvckVhY2goZmlsZSA9PiBhZGRVbmlxdWVGaWxlKGZpbGUsICdjcmVhdGVkJykpO1xuICAgICAgICAgICAgKGRhdGFCeVR5cGUubW9kaWZpZWQgfHwgW10pLmZvckVhY2goZmlsZSA9PiBhZGRVbmlxdWVGaWxlKGZpbGUsICdtb2RpZmllZCcpKTtcbiAgICAgICAgICAgIChkYXRhQnlUeXBlLmFzc2V0cyB8fCBbXSkuZm9yRWFjaChmaWxlID0+IGFkZFVuaXF1ZUZpbGUoZmlsZSwgJ2Fzc2V0JykpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjb250ZW50V3JhcHBlci5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZUZpbGVQb3B1cCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZXZlbnQgbGlzdGVuZXJzIGFuZCBwb3NpdGlvbmluZyBsb2dpY1xuICAgICAgICB0aGlzLnBvcHVwRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IGNsZWFyVGltZW91dCh0aGlzLmhpZGVUaW1lb3V0KSk7XG4gICAgICAgIHRoaXMucG9wdXBFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oaWRlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5oaWRlRmlsZVBvcHVwKCksIHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcHVwSGlkZURlbGF5KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnBvcHVwRWwpO1xuXG4gICAgICAgIHRoaXMucG9wdXBFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoaXNNb2JpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hcmdpbiA9IDg7XG4gICAgICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuICAgICAgICAgICAgdGhpcy5wb3B1cEVsLnN0eWxlLmJvdHRvbSA9IGAke21hcmdpbn1weGA7XG4gICAgICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUubGVmdCA9IGAke21hcmdpbn1weGA7XG4gICAgICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUud2lkdGggPSBgY2FsYygxMDAlIC0gJHttYXJnaW4gKiAyfXB4KWA7XG4gICAgICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUubWF4SGVpZ2h0ID0gJzQ1dmgnO1xuICAgICAgICAgICAgdGhpcy5wb3B1cEVsLnN0eWxlLmJveFNpemluZyA9ICdib3JkZXItYm94JztcbiAgICAgICAgICAgIHRoaXMucG9wdXBFbC5zdHlsZS50b3AgPSAnJztcbiAgICAgICAgICAgIHRoaXMucG9wdXBFbC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcG9wdXBSZWN0ID0gdGhpcy5wb3B1cEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0UmVjdCA9IHRhcmdldEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgY29uc3Qgdmlld3BvcnRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICAgICAgY29uc3Qgdmlld3BvcnRIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgICAgICBjb25zdCBtYXJnaW4gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wb3B1cEdhcDtcbiAgICAgICAgICAgIGxldCBmaW5hbFRvcCA9IHRhcmdldFJlY3QuYm90dG9tICsgbWFyZ2luO1xuICAgICAgICAgICAgaWYgKGZpbmFsVG9wICsgcG9wdXBSZWN0LmhlaWdodCA+IHZpZXdwb3J0SGVpZ2h0KSBmaW5hbFRvcCA9IHRhcmdldFJlY3QudG9wIC0gcG9wdXBSZWN0LmhlaWdodCAtIG1hcmdpbjtcbiAgICAgICAgICAgIGlmIChmaW5hbFRvcCA8IG1hcmdpbikgZmluYWxUb3AgPSBtYXJnaW47XG4gICAgICAgICAgICBsZXQgZmluYWxMZWZ0ID0gdGFyZ2V0UmVjdC5sZWZ0O1xuICAgICAgICAgICAgaWYgKGZpbmFsTGVmdCArIHBvcHVwUmVjdC53aWR0aCA+IHZpZXdwb3J0V2lkdGggLSBtYXJnaW4pIGZpbmFsTGVmdCA9IHRhcmdldFJlY3QucmlnaHQgLSBwb3B1cFJlY3Qud2lkdGg7XG4gICAgICAgICAgICBpZiAoZmluYWxMZWZ0IDwgbWFyZ2luKSBmaW5hbExlZnQgPSBtYXJnaW47XG4gICAgICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUudG9wID0gYCR7ZmluYWxUb3B9cHhgO1xuICAgICAgICAgICAgdGhpcy5wb3B1cEVsLnN0eWxlLmxlZnQgPSBgJHtmaW5hbExlZnR9cHhgO1xuICAgICAgICAgICAgdGhpcy5wb3B1cEVsLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIaWRlcyBhbmQgZGVzdHJveXMgdGhlIGZpbGUgcG9wdXAgZWxlbWVudC5cbiAgICAgKi9cbiAgICBoaWRlRmlsZVBvcHVwKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5ob3ZlclRpbWVvdXQpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5oaWRlVGltZW91dCk7XG4gICAgICAgIGlmICh0aGlzLnBvcHVwRWwpIHtcbiAgICAgICAgICAgIHRoaXMucG9wdXBFbC5yZW1vdmUoKTtcbiAgICAgICAgICAgIHRoaXMucG9wdXBFbCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnRhc2tSZWZyZXNoRGVib3VuY2VUaW1lciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmRhc2hib2FyZFJlZnJlc2hEZWJvdW5jZVRpbWVyID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudGFza0NhY2hlID0gbmV3IE1hcCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlTW9udGhUaXRsZSgpIHtcbiAgICAgICAgdGhpcy5wb3B1bGF0ZVN0eWxlZFRpdGxlKHRoaXMubW9udGhOYW1lRWwsIHRoaXMuZGlzcGxheWVkTW9udGgpO1xuICAgIH1cblxuICAgIGNoYW5nZU1vbnRoKG9mZnNldCwgdG9Ub2RheSA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0b1RvZGF5KSB7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXllZE1vbnRoID0gbmV3IERhdGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheWVkTW9udGguc2V0TW9udGgodGhpcy5kaXNwbGF5ZWRNb250aC5nZXRNb250aCgpICsgb2Zmc2V0LCAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudXBkYXRlTW9udGhUaXRsZSgpO1xuICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XG4gICAgICAgIHRoaXMudXBkYXRlVG9kYXlCdG5BcmlhTGFiZWwoKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZURheUhlYWRlckhpZ2hsaWdodCgpO1xuICAgIH1cblxuICAgIHVwZGF0ZVRvZGF5QnRuQXJpYUxhYmVsKCkge1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCBpc0N1cnJlbnRNb250aCA9IG1vbWVudCh0aGlzLmRpc3BsYXllZE1vbnRoKS5pc1NhbWUobm93LCAnbW9udGgnKTtcbiAgICAgICAgbGV0IGxhYmVsO1xuXG4gICAgICAgIGlmIChpc0N1cnJlbnRNb250aCkge1xuICAgICAgICAgICAgbGFiZWwgPSB0aGlzLmlzUG9wdXBMb2NrZWQgPyAnUG9wdXBzIERpc2FibGVkLiBDbGljayB0byByZS1lbmFibGUuJyA6ICdQb3B1cHMgRW5hYmxlZC4gQ2xpY2sgdG8gZGlzYWJsZS4nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGFiZWwgPSAnR28gdG8gQ3VycmVudCBNb250aCc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b2RheUJ0bi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBsYWJlbCk7XG4gICAgfVxuXG4gICAgaXNFbGVtZW50SW5WaWV3cG9ydChlbCkge1xuICAgICAgICBpZiAoIWVsKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGNvbnN0IHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHJlY3QudG9wID49IDAgJiZcbiAgICAgICAgICAgIHJlY3QubGVmdCA+PSAwICYmXG4gICAgICAgICAgICByZWN0LmJvdHRvbSA8PSAod2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpICYmXG4gICAgICAgICAgICByZWN0LnJpZ2h0IDw9ICh3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpXG4gICAgICAgICk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGtleWJvYXJkIGV2ZW50IGxpc3RlbmVycyB0byBhIHJvdyBlbGVtZW50IGZvciBsaXN0IG5hdmlnYXRpb24uXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gcm93IFRoZSByb3cgZWxlbWVudCAoZS5nLiwgYSBgLm5vdGUtcm93YCBvciBgLnRhc2stcm93YCkuXG4gICAgICogQHBhcmFtIHtIVE1MSW5wdXRFbGVtZW50fSBzZWFyY2hJbnB1dEVsIFRoZSBzZWFyY2ggaW5wdXQgYXNzb2NpYXRlZCB3aXRoIHRoZSBsaXN0LlxuICAgICAqL1xuICAgIGFkZEtleWRvd25MaXN0ZW5lcnMocm93LCBzZWFyY2hJbnB1dEVsKSB7XG4gICAgICAgIHJvdy5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgLTEpOyAvLyBNYWtlIHRoZSByb3cgZm9jdXNhYmxlLlxuICAgICAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgcm93LmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZS5rZXkgIT09ICdBcnJvd0Rvd24nICYmIGUua2V5ICE9PSAnQXJyb3dVcCcpIHJldHVybjtcblxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSByb3cuY2xvc2VzdCgnLm5vdGVzLWNvbnRhaW5lciwgLnRhc2tzLWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgaWYgKCFjb250YWluZXIpIHJldHVybjtcblxuICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBBcnJheS5mcm9tKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcubm90ZS1yb3csIC50YXNrLXJvdycpKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IGl0ZW1zLmluZGV4T2Yocm93KTtcblxuICAgICAgICAgICAgbGV0IG5leHRJbmRleCA9IGUua2V5ID09PSAnQXJyb3dEb3duJyA/IGN1cnJlbnRJbmRleCArIDEgOiBjdXJyZW50SW5kZXggLSAxO1xuXG4gICAgICAgICAgICBpZiAobmV4dEluZGV4ID49IDAgJiYgbmV4dEluZGV4IDwgaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaXRlbXNbbmV4dEluZGV4XS5mb2N1cygpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0Fycm93VXAnICYmIHNlYXJjaElucHV0RWwpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBhdCB0aGUgdG9wIG9mIHRoZSBsaXN0LCBmb2N1cyB0aGUgc2VhcmNoIGlucHV0LlxuICAgICAgICAgICAgICAgIHNlYXJjaElucHV0RWwuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUG9wdWxhdGVzIHRoZSBcIk5vdGVzXCIgdGFiIHdpdGggZWl0aGVyIHJlY2VudCBvciBwaW5uZWQgbm90ZXMuXG4gICAgICovXG4gICAgYXN5bmMgcG9wdWxhdGVOb3RlcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLm5vdGVzQ29udGVudEVsKSByZXR1cm47XG4gICAgICAgIHRoaXMubm90ZXNDb250ZW50RWwuZW1wdHkoKTtcblxuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuICAgICAgICBsZXQgbm90ZXNUb1Nob3cgPSBbXTtcblxuICAgICAgICAvLyAtLS0gMS4gRklMVEVSIEFORCBTT1JUIE5PVEVTIC0tLVxuICAgICAgICBpZiAodGhpcy5ub3Rlc1ZpZXdNb2RlID09PSAncGlubmVkJykge1xuICAgICAgICAgICAgY29uc3QgcGluVmFsdWUgPSBzZXR0aW5ncy5waW5UYWcudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIG5vdGVzVG9TaG93ID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcihmaWxlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICAgICAgICAgIGlmICghY2FjaGUpIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGlmIChjYWNoZS50YWdzPy5zb21lKHRhZyA9PiB0YWcudGFnLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocGluVmFsdWUpKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IGNhY2hlLmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgIGlmIChmcm9udG1hdHRlcikge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBmcm9udG1hdHRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBmcm9udG1hdHRlcltrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhwaW5WYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5zb21lKGl0ZW0gPT4gdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnICYmIGl0ZW0udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhwaW5WYWx1ZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnBpbm5lZFNvcnRPcmRlciA9PT0gJ3otYScpIHtcbiAgICAgICAgICAgICAgICBub3Rlc1RvU2hvdy5zb3J0KChhLCBiKSA9PiBiLmJhc2VuYW1lLmxvY2FsZUNvbXBhcmUoYS5iYXNlbmFtZSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBpbm5lZFNvcnRPcmRlciA9PT0gJ2N1c3RvbScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXN0b21PcmRlciA9IHNldHRpbmdzLnBpbm5lZE5vdGVzQ3VzdG9tT3JkZXI7XG4gICAgICAgICAgICAgICAgbm90ZXNUb1Nob3cuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleEEgPSBjdXN0b21PcmRlci5pbmRleE9mKGEucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4QiA9IGN1c3RvbU9yZGVyLmluZGV4T2YoYi5wYXRoKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXhBICE9PSAtMSAmJiBpbmRleEIgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXhBIC0gaW5kZXhCO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleEEgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4QiAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmJhc2VuYW1lLmxvY2FsZUNvbXBhcmUoYi5iYXNlbmFtZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgeyAvLyBhLXpcbiAgICAgICAgICAgICAgICBub3Rlc1RvU2hvdy5zb3J0KChhLCBiKSA9PiBhLmJhc2VuYW1lLmxvY2FsZUNvbXBhcmUoYi5iYXNlbmFtZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgeyAvLyByZWNlbnQgbm90ZXMgbW9kZVxuICAgICAgICAgICAgLy8gV2hlbiBub3QgaW4gcGlubmVkIG1vZGUsIGVuc3VyZSByZW9yZGVyIG1vZGUgaXMgYWx3YXlzIG9mZlxuICAgICAgICAgICAgdGhpcy5pc1Jlb3JkZXJNb2RlQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBjdXRvZmYgPSBtb21lbnQoKS5zdWJ0cmFjdChzZXR0aW5ncy5ub3Rlc0xvb2tiYWNrRGF5cywgJ2RheXMnKS52YWx1ZU9mKCk7XG4gICAgICAgICAgICBub3Rlc1RvU2hvdyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoZmlsZSA9PiAhc2V0dGluZ3MuaWdub3JlRm9sZGVycy5zb21lKGYgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZikpICYmIChmaWxlLnN0YXQubXRpbWUgPj0gY3V0b2ZmIHx8IGZpbGUuc3RhdC5jdGltZSA+PSBjdXRvZmYpKVxuICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLnN0YXQubXRpbWUgLSBhLnN0YXQubXRpbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIDIuIEFQUExZIFNFQVJDSCBURVJNIC0tLVxuICAgICAgICAvLyAtLS0gRmlsdGVyaW5nIExvZ2ljIC0tLVxuICAgICAgICBjb25zdCBzZWFyY2hUZXJtID0gdGhpcy5ub3Rlc1NlYXJjaFRlcm0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgbGV0IGZpbHRlcmVkTm90ZXM7XG5cbiAgICAgICAgaWYgKHNlYXJjaFRlcm0uc3RhcnRzV2l0aCgnIycpKSB7XG4gICAgICAgICAgICBjb25zdCB0YWdUb0ZpbHRlciA9IHNlYXJjaFRlcm0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGNvbnN0IHRhZ1dpdGhvdXRIYXNoID0gdGFnVG9GaWx0ZXIuc3Vic3RyaW5nKDEpO1xuXG4gICAgICAgICAgICBmaWx0ZXJlZE5vdGVzID0gbm90ZXNUb1Nob3cuZmlsdGVyKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFjYWNoZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgLy8gMS4gQ2hlY2sgaW5saW5lIHRhZ3NcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGUudGFncyAmJiBjYWNoZS50YWdzLnNvbWUodCA9PiB0LnRhZy50b0xvd2VyQ2FzZSgpID09PSB0YWdUb0ZpbHRlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gMi4gQ2hlY2sgZnJvbnRtYXR0ZXIgJ3RhZ3MnIHByb3BlcnR5XG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlLmZyb250bWF0dGVyICYmIGNhY2hlLmZyb250bWF0dGVyLnRhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm1UYWdzID0gQXJyYXkuaXNBcnJheShjYWNoZS5mcm9udG1hdHRlci50YWdzKSA/IGNhY2hlLmZyb250bWF0dGVyLnRhZ3MgOiBbY2FjaGUuZnJvbnRtYXR0ZXIudGFnc107XG4gICAgICAgICAgICAgICAgICAgIGlmIChmbVRhZ3Muc29tZSh0YWcgPT4gdHlwZW9mIHRhZyA9PT0gJ3N0cmluZycgJiYgdGFnLnRvTG93ZXJDYXNlKCkgPT09IHRhZ1dpdGhvdXRIYXNoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyAzLiBDaGVjayBmcm9udG1hdHRlciAndGFnJyBwcm9wZXJ0eSAoc2luZ3VsYXIpXG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlLmZyb250bWF0dGVyICYmIHR5cGVvZiBjYWNoZS5mcm9udG1hdHRlci50YWcgPT09ICdzdHJpbmcnICYmIGNhY2hlLmZyb250bWF0dGVyLnRhZy50b0xvd2VyQ2FzZSgpID09PSB0YWdXaXRob3V0SGFzaCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChzZWFyY2hUZXJtID09PSAnc3RhdHVzOnVubGlua2VkJykge1xuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHBsYWNlaG9sZGVyIGZvciB0aGUgdW5saW5rZWQgbm90ZXMgbG9naWMgeW91IG1pZ2h0IGFkZFxuICAgICAgICAgICAgLy8gRm9yIG5vdywgaXQgd2lsbCBzaG93IGFsbCBub3Rlcy4gUmVwbGFjZSB3aXRoIGFjdHVhbCBsb2dpYy5cbiAgICAgICAgICAgIGZpbHRlcmVkTm90ZXMgPSBub3Rlc1RvU2hvdztcbiAgICAgICAgfSBlbHNlIGlmIChzZWFyY2hUZXJtKSB7XG4gICAgICAgICAgICBmaWx0ZXJlZE5vdGVzID0gbm90ZXNUb1Nob3cuZmlsdGVyKGZpbGUgPT4gZmlsZS5iYXNlbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZpbHRlcmVkTm90ZXMgPSBub3Rlc1RvU2hvdztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLSAzLiBSRU5ERVIgVEhFIFZJRVcgLS0tXG4gICAgICAgIGlmICh0aGlzLm5vdGVzVmlld01vZGUgPT09ICdwaW5uZWQnKSB7XG4gICAgICAgICAgICBjb25zdCBncm91cENvbnRhaW5lciA9IHRoaXMubm90ZXNDb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1jb250YWluZXInIH0pO1xuICAgICAgICAgICAgLy8gQXBwbHkgdGhlIHJlb3JkZXIgbW9kZSBjbGFzcyBpZiBpdCdzIGFjdGl2ZVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNSZW9yZGVyTW9kZUFjdGl2ZSkge1xuICAgICAgICAgICAgICAgIGdyb3VwQ29udGFpbmVyLmFkZENsYXNzKCdyZW9yZGVyLW1vZGUtYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ25vdGUtZ3JvdXAtaGVhZGVyJyB9KTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlckNvbnRlbnQgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1oZWFkZXItY29udGVudCcsIGF0dHI6IHsgJ2FyaWEtbGl2ZSc6ICdwb2xpdGUnIH0gfSk7XG4gICAgICAgICAgICBzZXRJY29uKGhlYWRlckNvbnRlbnQsIHNldHRpbmdzLnRhYkljb25zLnBpbm5lZCB8fCAncGluJyk7XG4gICAgICAgICAgICBoZWFkZXJDb250ZW50LmNyZWF0ZVNwYW4oeyB0ZXh0OiAnUGlubmVkIE5vdGVzJyB9KTtcblxuICAgICAgICAgICAgY29uc3Qgc29ydEluZGljYXRvciA9IGhlYWRlckNvbnRlbnQuY3JlYXRlU3Bhbih7IGNsczogJ3Bpbm5lZC1zb3J0LWluZGljYXRvcicgfSk7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVTb3J0VmlzdWFscyA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5waW5uZWRTb3J0T3JkZXIgPT09ICd6LWEnKSB7XG4gICAgICAgICAgICAgICAgICAgIHNvcnRJbmRpY2F0b3Iuc2V0VGV4dCgnWi1BJyk7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlckNvbnRlbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0N1cnJlbnQgc29ydDogWi1BLiBDbGljayBmb3IgQ3VzdG9tIHNvcnQuJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBpbm5lZFNvcnRPcmRlciA9PT0gJ2N1c3RvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgc29ydEluZGljYXRvci5zZXRUZXh0KCdDdXN0b20nKTtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyQ29udGVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnQ3VycmVudCBzb3J0OiBDdXN0b20uIENsaWNrIGZvciBBLVogc29ydC4nKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBhLXpcbiAgICAgICAgICAgICAgICAgICAgc29ydEluZGljYXRvci5zZXRUZXh0KCdBLVonKTtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyQ29udGVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnQ3VycmVudCBzb3J0OiBBLVouIENsaWNrIGZvciBaLUEgc29ydC4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdXBkYXRlU29ydFZpc3VhbHMoKTtcblxuICAgICAgICAgICAgbGV0IGxvbmdQcmVzc1RyaWdnZXJlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvLyBBIHN0YW5kYXJkIGNsaWNrIGN5Y2xlcyB0aHJvdWdoIHNvcnQgb3JkZXJzIGFuZCBkaXNhYmxlcyByZW9yZGVyIG1vZGUuXG4gICAgICAgICAgICBoZWFkZXJDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXG4gICAgICAgICAgICAgICAgaWYgKGxvbmdQcmVzc1RyaWdnZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICBsb25nUHJlc3NUcmlnZ2VyZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuaXNSZW9yZGVyTW9kZUFjdGl2ZSA9IGZhbHNlOyAvLyBBbHdheXMgZGlzYWJsZSByZW9yZGVyIG1vZGUgb24gY2xpY2tcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5waW5uZWRTb3J0T3JkZXIgPT09ICdhLXonKSB0aGlzLnBpbm5lZFNvcnRPcmRlciA9ICd6LWEnO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucGlubmVkU29ydE9yZGVyID09PSAnei1hJykgdGhpcy5waW5uZWRTb3J0T3JkZXIgPSAnY3VzdG9tJztcbiAgICAgICAgICAgICAgICBlbHNlIHRoaXMucGlubmVkU29ydE9yZGVyID0gJ2Eteic7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZU5vdGVzKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gQSBsb25nLXByZXNzIG9uIG1vYmlsZSAoaW4gY3VzdG9tIHNvcnQpIHRvZ2dsZXMgcmVvcmRlciBtb2RlLlxuICAgICAgICAgICAgaWYgKFBsYXRmb3JtLmlzTW9iaWxlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRvdWNoVGltZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIGhlYWRlckNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBpbm5lZFNvcnRPcmRlciAhPT0gJ2N1c3RvbScpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBsb25nUHJlc3NUcmlnZ2VyZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdG91Y2hUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdWNoVGltZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9uZ1ByZXNzVHJpZ2dlcmVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1Jlb3JkZXJNb2RlQWN0aXZlID0gIXRoaXMuaXNSZW9yZGVyTW9kZUFjdGl2ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IudmlicmF0ZSkgbmF2aWdhdG9yLnZpYnJhdGUoNTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9uZXcgTm90aWNlKGBSZW9yZGVyIG1vZGUgJHt0aGlzLmlzUmVvcmRlck1vZGVBY3RpdmUgPyAnZW5hYmxlZCcgOiAnZGlzYWJsZWQnfS5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9wdWxhdGVOb3RlcygpOyAvLyBSZS1yZW5kZXIgdG8gc2hvdy9oaWRlIGhhbmRsZXNcbiAgICAgICAgICAgICAgICAgICAgfSwgNzAwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWxUaW1lciA9ICgpID0+IGNsZWFyVGltZW91dCh0b3VjaFRpbWVyKTtcbiAgICAgICAgICAgICAgICBoZWFkZXJDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgY2FuY2VsVGltZXIpO1xuICAgICAgICAgICAgICAgIGhlYWRlckNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgY2FuY2VsVGltZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1jb3VudCcsIHRleHQ6IGZpbHRlcmVkTm90ZXMubGVuZ3RoLnRvU3RyaW5nKCkgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGxpc3RXcmFwcGVyID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1saXN0LXdyYXBwZXInIH0pO1xuXG4gICAgICAgICAgICBpZiAoZmlsdGVyZWROb3Rlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlbXB0eU1lc3NhZ2VFbCA9IGxpc3RXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogJ3Bpbm5lZC1ub3Rlcy1lbXB0eS1tZXNzYWdlJyB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBwaW5UYWcgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5waW5UYWcgfHwgJ3Bpbic7IC8vIFNhZmVseSBnZXQgdGhlIHRhZ1xuICAgICAgICAgICAgICAgIGVtcHR5TWVzc2FnZUVsLmlubmVySFRNTCA9IGBObyBwaW5uZWQgbm90ZXMuIFRvIHBpbiBhIG5vdGUsIGFkZCB0aGUgPGNvZGU+IyR7cGluVGFnfTwvY29kZT4gdGFnIHRvIGl0cyBwcm9wZXJ0aWVzIG9yIGJvZHkuYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGlzdFdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlUGlubmVkT3JkZXIobGlzdFdyYXBwZXIpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZmlsdGVyZWROb3Rlcy5mb3JFYWNoKGZpbGUgPT4gdGhpcy5yZW5kZXJOb3RlSXRlbShmaWxlLCBsaXN0V3JhcHBlcikpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSB7IC8vIHJlY2VudCBub3RlcyBtb2RlXG4gICAgICAgICAgICBjb25zdCBncm91cHMgPSB7XG4gICAgICAgICAgICAgICAgdG9kYXk6IFtdLFxuICAgICAgICAgICAgICAgIHllc3RlcmRheTogW10sXG4gICAgICAgICAgICAgICAgdGhpc1dlZWs6IFtdLFxuICAgICAgICAgICAgICAgIGxhc3RXZWVrOiBbXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBncm91cE9yZGVyID0gW1xuICAgICAgICAgICAgICAgIHsga2V5OiAndG9kYXknLCBsYWJlbDogJ1RvZGF5JyB9LFxuICAgICAgICAgICAgICAgIHsga2V5OiAneWVzdGVyZGF5JywgbGFiZWw6ICdZZXN0ZXJkYXknIH0sXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0aGlzV2VlaycsIGxhYmVsOiAnVGhpcyBXZWVrJyB9LFxuICAgICAgICAgICAgICAgIHsga2V5OiAnbGFzdFdlZWsnLCBsYWJlbDogJ0xhc3QgV2VlaycgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBjb25zdCBub3cgPSBtb21lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0T2ZUaGlzV2VlayA9IG5vdy5jbG9uZSgpLnN0YXJ0T2YoJ3dlZWsnKTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0T2ZMYXN0V2VlayA9IG5vdy5jbG9uZSgpLnN1YnRyYWN0KDEsICd3ZWVrJykuc3RhcnRPZignd2VlaycpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEyOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb250aCA9IG5vdy5jbG9uZSgpLnN1YnRyYWN0KGksICdtb250aHMnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtb250aEtleSA9IG1vbnRoLmZvcm1hdCgnWVlZWS1NTScpO1xuICAgICAgICAgICAgICAgIGlmICghZ3JvdXBzW21vbnRoS2V5XSkge1xuICAgICAgICAgICAgICAgICAgICBncm91cHNbbW9udGhLZXldID0gW107XG4gICAgICAgICAgICAgICAgICAgIGdyb3VwT3JkZXIucHVzaCh7IGtleTogbW9udGhLZXksIGxhYmVsOiBtb250aC5mb3JtYXQoJ01NTU0gWVlZWScpIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdyb3Vwc1snb2xkZXInXSA9IFtdO1xuICAgICAgICAgICAgZ3JvdXBPcmRlci5wdXNoKHsga2V5OiAnb2xkZXInLCBsYWJlbDogJ09sZGVyJyB9KTtcblxuICAgICAgICAgICAgLy8gLS0tIDIuIE5PVEUgU09SVElORyBMT0dJQyAtLS1cbiAgICAgICAgICAgIGZpbHRlcmVkTm90ZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RUaW1lID0gbW9tZW50KGZpbGUuc3RhdC5tdGltZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1vZFRpbWUuaXNTYW1lKG5vdywgJ2RheScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGdyb3Vwcy50b2RheS5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9kVGltZS5pc1NhbWUobm93LmNsb25lKCkuc3VidHJhY3QoMSwgJ2RheScpLCAnZGF5JykpIHtcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBzLnllc3RlcmRheS5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9kVGltZS5pc0FmdGVyKHN0YXJ0T2ZUaGlzV2VlaykpIHtcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBzLnRoaXNXZWVrLnB1c2goZmlsZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2RUaW1lLmlzQWZ0ZXIoc3RhcnRPZkxhc3RXZWVrKSkge1xuICAgICAgICAgICAgICAgICAgICBncm91cHMubGFzdFdlZWsucHVzaChmaWxlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb250aEtleSA9IG1vZFRpbWUuZm9ybWF0KCdZWVlZLU1NJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChncm91cHNbbW9udGhLZXldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cHNbbW9udGhLZXldLnB1c2goZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cHMub2xkZXIucHVzaChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyAtLS0gMy4gUkVOREVSSU5HIFdJVEggREVGQVVMVCBDT0xMQVBTRSBMT0dJQyAtLS1cbiAgICAgICAgICAgIGdyb3VwT3JkZXIuZm9yRWFjaChncm91cEluZm8gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vdGVzSW5Hcm91cCA9IGdyb3Vwc1tncm91cEluZm8ua2V5XTtcbiAgICAgICAgICAgICAgICBpZiAobm90ZXNJbkdyb3VwLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBDb250YWluZXIgPSB0aGlzLm5vdGVzQ29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ25vdGUtZ3JvdXAtY29udGFpbmVyJyB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSB0aGUgZGVmYXVsdCBjb2xsYXBzZWQgc3RhdGUgZm9yIG1vbnRobHkgZ3JvdXBzXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzTW9udGhseUdyb3VwID0gL15cXGR7NH0tXFxkezJ9JC8udGVzdChncm91cEluZm8ua2V5KTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGlzQ29sbGFwc2VkO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc01vbnRobHlHcm91cCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNDb2xsYXBzZWQgPSB0aGlzLmNvbGxhcHNlZE5vdGVHcm91cHNbZ3JvdXBJbmZvLmtleV0gIT09IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNDb2xsYXBzZWQgPSB0aGlzLmNvbGxhcHNlZE5vdGVHcm91cHNbZ3JvdXBJbmZvLmtleV0gPT09IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNDb2xsYXBzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwQ29udGFpbmVyLmFkZENsYXNzKCdpcy1jb2xsYXBzZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ25vdGUtZ3JvdXAtaGVhZGVyJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyQ29udGVudCA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLWdyb3VwLWhlYWRlci1jb250ZW50JyB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sbGFwc2VJY29uID0gaGVhZGVyQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLWdyb3VwLWNvbGxhcHNlLWljb24nIH0pO1xuICAgICAgICAgICAgICAgICAgICBzZXRJY29uKGNvbGxhcHNlSWNvbiwgJ2NoZXZyb24tZG93bicpO1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJDb250ZW50LmNyZWF0ZVNwYW4oeyB0ZXh0OiBncm91cEluZm8ubGFiZWwgfSk7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLWdyb3VwLWNvdW50JywgdGV4dDogbm90ZXNJbkdyb3VwLmxlbmd0aC50b1N0cmluZygpIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRseUNvbGxhcHNlZCA9IGdyb3VwQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWNvbGxhcHNlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZWROb3RlR3JvdXBzW2dyb3VwSW5mby5rZXldID0gY3VycmVudGx5Q29sbGFwc2VkO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpc3RXcmFwcGVyID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1saXN0LXdyYXBwZXInIH0pO1xuICAgICAgICAgICAgICAgICAgICBub3Rlc0luR3JvdXAuZm9yRWFjaChmaWxlID0+IHRoaXMucmVuZGVyTm90ZUl0ZW0oZmlsZSwgbGlzdFdyYXBwZXIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNjYW5zIHRoZSB2YXVsdCBmb3IgdGFza3MsIGZpbHRlcnMgYW5kIHNvcnRzIHRoZW0sIGFuZCBwb3B1bGF0ZXMgdGhlIFwiVGFza3NcIiB0YWIuXG4gICAgICovXG4gICAgYXN5bmMgcG9wdWxhdGVUYXNrcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRhc2tzQ29udGVudEVsKSByZXR1cm47XG5cbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcbiAgICAgICAgdGhpcy50YXNrc0NvbnRlbnRFbC50b2dnbGVDbGFzcygnc2hvdy1mdWxsLXRleHQnLCAhc2V0dGluZ3MudGFza1RleHRUcnVuY2F0ZSk7XG5cbiAgICAgICAgaWYgKHRoaXMudGFza0NhY2hlKSB7IHRoaXMudGFza0NhY2hlLmNsZWFyKCk7IH0gZWxzZSB7IHRoaXMudGFza0NhY2hlID0gbmV3IE1hcCgpOyB9XG5cbiAgICAgICAgY29uc3QgdGFza0lnbm9yZUZvbGRlcnMgPSAoc2V0dGluZ3MudGFza0lnbm9yZUZvbGRlcnMgfHwgW10pLm1hcChmID0+IGYudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLycpID8gZi50b0xvd2VyQ2FzZSgpIDogZi50b0xvd2VyQ2FzZSgpICsgJy8nKTtcbiAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGZpbGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGhMb3dlciA9IGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgcmV0dXJuICF0YXNrSWdub3JlRm9sZGVycy5zb21lKGZvbGRlciA9PiBmb2xkZXIgJiYgZmlsZVBhdGhMb3dlci5zdGFydHNXaXRoKGZvbGRlcikpO1xuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgYWxsVGFza3MgPSBbXTtcbiAgICAgICAgY29uc3QgdGFza1JlZ2V4ID0gL15cXHMqKD86LXxcXGQrXFwuKVxccypcXFsoLilcXF1cXHMqKC4qKS87XG4gICAgICAgIGNvbnN0IGR1ZURhdGVSZWdleCA9IC/wn5OFXFxzKihcXGR7NH0tXFxkezJ9LVxcZHsyfSkvO1xuICAgICAgICBjb25zdCBjb21wbGV0aW9uRGF0ZVJlZ2V4ID0gL+KchVxccyooXFxkezR9LVxcZHsyfS1cXGR7Mn0pLztcbiAgICAgICAgY29uc3QgdGFnUmVnZXggPSAvIyhbYS16QS1aMC05X1xcLVxcL10rKS9nO1xuXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQoZmlsZSk7XG4gICAgICAgICAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuXG4gICAgICAgICAgICB0aGlzLnRhc2tDYWNoZS5zZXQoZmlsZS5wYXRoLCB0aGlzLmV4dHJhY3RUYXNrTGluZXMoY29udGVudCkpO1xuXG4gICAgICAgICAgICBsaW5lcy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gbGluZS5tYXRjaCh0YXNrUmVnZXgpO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGF0dXMgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IG1hdGNoWzJdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0NvbXBsZXRlZCA9IHN0YXR1cy50b0xvd2VyQ2FzZSgpID09PSAneCc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25EYXRlTWF0Y2ggPSB0ZXh0Lm1hdGNoKGNvbXBsZXRpb25EYXRlUmVnZXgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uRGF0ZSA9IGNvbXBsZXRpb25EYXRlTWF0Y2ggPyBtb21lbnQoY29tcGxldGlvbkRhdGVNYXRjaFsxXSwgXCJZWVlZLU1NLUREXCIpLnRvRGF0ZSgpIDogbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNDb21wbGV0ZWQgJiYgIShzZXR0aW5ncy5zaG93Q29tcGxldGVkVGFza3NUb2RheSAmJiBjb21wbGV0aW9uRGF0ZSAmJiBpc1NhbWVEYXkoY29tcGxldGlvbkRhdGUsIG5ldyBEYXRlKCkpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHVlRGF0ZU1hdGNoID0gdGV4dC5tYXRjaChkdWVEYXRlUmVnZXgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkdWVEYXRlID0gZHVlRGF0ZU1hdGNoID8gbW9tZW50KGR1ZURhdGVNYXRjaFsxXSwgXCJZWVlZLU1NLUREXCIpLnRvRGF0ZSgpIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFncyA9IEFycmF5LmZyb20odGV4dC5tYXRjaEFsbCh0YWdSZWdleCkpLm1hcChtID0+IG1bMV0pO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZGlzcGxheVRleHQgPSB0ZXh0LnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheVRleHQgPSBkaXNwbGF5VGV4dC5yZXBsYWNlKGNvbXBsZXRpb25EYXRlUmVnZXgsICcnKS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYWxsVGFza3MucHVzaCh7IHRleHQ6IGRpc3BsYXlUZXh0LCBmaWxlLCBsaW5lTnVtYmVyOiBpbmRleCwgZHVlRGF0ZSwgdGFncywgc3RhdHVzLCBjb21wbGV0aW9uRGF0ZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNlYXJjaFRlcm0gPSB0aGlzLnRhc2tzU2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBsZXQgZmlsdGVyZWRUYXNrcztcblxuICAgICAgICBpZiAoc2VhcmNoVGVybS5zdGFydHNXaXRoKCcjJykpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZ1RvRmlsdGVyID0gc2VhcmNoVGVybS5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICBmaWx0ZXJlZFRhc2tzID0gYWxsVGFza3MuZmlsdGVyKHRhc2sgPT5cbiAgICAgICAgICAgICAgICB0YXNrLnRhZ3Muc29tZSh0YWcgPT4gdGFnLnRvTG93ZXJDYXNlKCkgPT09IHRhZ1RvRmlsdGVyKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChzZWFyY2hUZXJtKSB7XG4gICAgICAgICAgICBmaWx0ZXJlZFRhc2tzID0gYWxsVGFza3MuZmlsdGVyKHRhc2sgPT5cbiAgICAgICAgICAgICAgICB0YXNrLnRleHQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXJtKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZpbHRlcmVkVGFza3MgPSBhbGxUYXNrcztcbiAgICAgICAgfVxuXG5cbiAgICAgICAgZmlsdGVyZWRUYXNrcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MudGFza1NvcnRPcmRlciA9PT0gJ2EteicpIHJldHVybiBhLnRleHQubG9jYWxlQ29tcGFyZShiLnRleHQpO1xuICAgICAgICAgICAgaWYgKHNldHRpbmdzLnRhc2tTb3J0T3JkZXIgPT09ICd6LWEnKSByZXR1cm4gYi50ZXh0LmxvY2FsZUNvbXBhcmUoYS50ZXh0KTtcbiAgICAgICAgICAgIGlmIChhLmR1ZURhdGUgJiYgYi5kdWVEYXRlKSByZXR1cm4gYS5kdWVEYXRlIC0gYi5kdWVEYXRlO1xuICAgICAgICAgICAgcmV0dXJuIGEuZHVlRGF0ZSA/IC0xIDogKGIuZHVlRGF0ZSA/IDEgOiBhLnRleHQubG9jYWxlQ29tcGFyZShiLnRleHQpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gMi4gTUFQIEVYSVNUSU5HIERPTSBHUk9VUFNcbiAgICAgICAgY29uc3QgZXhpc3RpbmdHcm91cHMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMudGFza3NDb250ZW50RWwucXVlcnlTZWxlY3RvckFsbCgnLnRhc2stZ3JvdXAtY29udGFpbmVyJykuZm9yRWFjaChncm91cEVsID0+IHtcbiAgICAgICAgICAgIGlmIChncm91cEVsLmRhdGFzZXQuZ3JvdXBLZXkpIHtcbiAgICAgICAgICAgICAgICBleGlzdGluZ0dyb3Vwcy5zZXQoZ3JvdXBFbC5kYXRhc2V0Lmdyb3VwS2V5LCBncm91cEVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gMy4gR0VUIE5FVyBHUk9VUCBEQVRBXG4gICAgICAgIGNvbnN0IG5ld0dyb3VwRGF0YSA9IHNldHRpbmdzLnRhc2tHcm91cEJ5ID09PSAndGFnJ1xuICAgICAgICAgICAgPyB0aGlzLmdyb3VwVGFza3NCeVRhZyhmaWx0ZXJlZFRhc2tzKVxuICAgICAgICAgICAgOiB0aGlzLmdyb3VwVGFza3NCeURhdGUoZmlsdGVyZWRUYXNrcyk7XG5cbiAgICAgICAgY29uc3QgZ3JvdXBPcmRlciA9IE9iamVjdC5rZXlzKG5ld0dyb3VwRGF0YSk7XG5cbiAgICAgICAgLy8gNC4gUkVDT05DSUxFIEdST1VQU1xuICAgICAgICBsZXQgbGFzdEVsZW1lbnQgPSBudWxsO1xuICAgICAgICBncm91cE9yZGVyLmZvckVhY2goZ3JvdXBLZXkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZ3JvdXBEYXRhID0gbmV3R3JvdXBEYXRhW2dyb3VwS2V5XTtcbiAgICAgICAgICAgIGxldCBncm91cEVsID0gZXhpc3RpbmdHcm91cHMuZ2V0KGdyb3VwS2V5KTtcblxuICAgICAgICAgICAgaWYgKGdyb3VwRWwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJDb250ZW50ID0gZ3JvdXBFbC5xdWVyeVNlbGVjdG9yKCcudGFzay1ncm91cC1oZWFkZXItY29udGVudCBzcGFuOmxhc3QtY2hpbGQnKTtcbiAgICAgICAgICAgICAgICBpZiAoaGVhZGVyQ29udGVudCkgaGVhZGVyQ29udGVudC50ZXh0Q29udGVudCA9IGAke2dyb3VwRGF0YS50aXRsZX0gKCR7Z3JvdXBEYXRhLnRhc2tzLmxlbmd0aH0pYDtcblxuICAgICAgICAgICAgICAgIHRoaXMucmVjb25jaWxlVGFza0xpc3QoZ3JvdXBFbC5xdWVyeVNlbGVjdG9yKCcudGFzay1saXN0LXdyYXBwZXInKSwgZ3JvdXBEYXRhLnRhc2tzKTtcbiAgICAgICAgICAgICAgICBleGlzdGluZ0dyb3Vwcy5kZWxldGUoZ3JvdXBLZXkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBncm91cEVsID0gdGhpcy5yZW5kZXJUYXNrR3JvdXAoZ3JvdXBLZXksIGdyb3VwRGF0YSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChsYXN0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50LmFmdGVyKGdyb3VwRWwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2tzQ29udGVudEVsLnByZXBlbmQoZ3JvdXBFbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsYXN0RWxlbWVudCA9IGdyb3VwRWw7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIDUuIFJFTU9WRSBPTEQgR1JPVVBTXG4gICAgICAgIGV4aXN0aW5nR3JvdXBzLmZvckVhY2goZ3JvdXBFbCA9PiBncm91cEVsLnJlbW92ZSgpKTtcblxuICAgICAgICBpZiAodGhpcy50YXNrc0NvbnRlbnRFbC5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIC8vIENsZWFyIGFueSBvbGQgbWVzc2FnZSBhbmQgYWRkIGEgbmV3IG9uZVxuICAgICAgICAgICAgdGhpcy50YXNrc0NvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHNlYXJjaFRlcm0gPyAnTm8gdGFza3MgbWF0Y2ggeW91ciBzZWFyY2ggdGVybS4nIDogJ05vIHRhc2tzIGZvdW5kJztcbiAgICAgICAgICAgIHRoaXMudGFza3NDb250ZW50RWwuY3JlYXRlRGl2KHsgdGV4dDogbWVzc2FnZSwgY2xzOiAndGFzay1ncm91cC1lbXB0eS1tZXNzYWdlJyB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBhbnkgXCJubyB0YXNrc1wiIG1lc3NhZ2UgaWYgaXQgZXhpc3RzXG4gICAgICAgICAgICBjb25zdCBlbXB0eU1lc3NhZ2UgPSB0aGlzLnRhc2tzQ29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWdyb3VwLWVtcHR5LW1lc3NhZ2UnKTtcbiAgICAgICAgICAgIGlmIChlbXB0eU1lc3NhZ2UpIGVtcHR5TWVzc2FnZS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldFRhc2tLZXkodGFzaykge1xuICAgICAgICByZXR1cm4gYCR7dGFzay5maWxlLnBhdGh9OiR7dGFzay5saW5lTnVtYmVyfWA7XG4gICAgfVxuXG4gICAgdXBkYXRlVGFza0l0ZW0odGFza1Jvd0VsLCB0YXNrKSB7XG4gICAgICAgIGlmICh0YXNrUm93RWwuZGF0YXNldC50YXNrU3RhdHVzICE9PSB0YXNrLnN0YXR1cykge1xuICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSB0YXNrUm93RWwucXVlcnlTZWxlY3RvcignLnRhc2stY2hlY2tib3gtc3ltYm9sJyk7XG4gICAgICAgICAgICBpZiAoY2hlY2tib3gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJUYXNrU3ltYm9sKGNoZWNrYm94LCB0YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhc2tSb3dFbC5kYXRhc2V0LnRhc2tTdGF0dXMgPSB0YXNrLnN0YXR1cztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRleHRFbCA9IHRhc2tSb3dFbC5xdWVyeVNlbGVjdG9yKCcudGFzay10ZXh0Jyk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nVGV4dCA9IHRleHRFbCA/IHRleHRFbC50ZXh0Q29udGVudCA6ICcnO1xuICAgICAgICBpZiAodGV4dEVsICYmIGV4aXN0aW5nVGV4dCAhPT0gdGFzay50ZXh0KSB7XG4gICAgICAgICAgICB0ZXh0RWwuZW1wdHkoKTtcbiAgICAgICAgICAgIE1hcmtkb3duUmVuZGVyZXIucmVuZGVyKHRoaXMuYXBwLCB0YXNrLnRleHQsIHRleHRFbCwgdGFzay5maWxlLnBhdGgsIHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ3JvdXBUYXNrc0J5RGF0ZSh0YXNrcykge1xuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuICAgICAgICBjb25zdCBub3cgPSBtb21lbnQoKS5zdGFydE9mKCdkYXknKTtcbiAgICAgICAgY29uc3QgZ3JvdXBzRGF0YSA9IHsgb3ZlcmR1ZTogW10sIHRvZGF5OiBbXSwgdG9tb3Jyb3c6IFtdLCBuZXh0N2RheXM6IFtdLCBmdXR1cmU6IFtdLCBub0RhdGU6IFtdIH07XG5cbiAgICAgICAgdGFza3MuZm9yRWFjaCh0YXNrID0+IHtcbiAgICAgICAgICAgIGlmICghdGFzay5kdWVEYXRlKSB7IGdyb3Vwc0RhdGEubm9EYXRlLnB1c2godGFzayk7IHJldHVybjsgfVxuICAgICAgICAgICAgY29uc3QgZHVlID0gbW9tZW50KHRhc2suZHVlRGF0ZSkuc3RhcnRPZignZGF5Jyk7XG4gICAgICAgICAgICBpZiAoZHVlLmlzQmVmb3JlKG5vdykpIGdyb3Vwc0RhdGEub3ZlcmR1ZS5wdXNoKHRhc2spO1xuICAgICAgICAgICAgZWxzZSBpZiAoZHVlLmlzU2FtZShub3cpKSBncm91cHNEYXRhLnRvZGF5LnB1c2godGFzayk7XG4gICAgICAgICAgICBlbHNlIGlmIChkdWUuaXNTYW1lKG5vdy5jbG9uZSgpLmFkZCgxLCAnZGF5JykpKSBncm91cHNEYXRhLnRvbW9ycm93LnB1c2godGFzayk7XG4gICAgICAgICAgICBlbHNlIGlmIChkdWUuaXNTYW1lT3JCZWZvcmUobm93LmNsb25lKCkuYWRkKDcsICdkYXlzJykpKSBncm91cHNEYXRhLm5leHQ3ZGF5cy5wdXNoKHRhc2spO1xuICAgICAgICAgICAgZWxzZSBncm91cHNEYXRhLmZ1dHVyZS5wdXNoKHRhc2spO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBpY29ucyA9IHNldHRpbmdzLnRhc2tHcm91cEljb25zIHx8IERFRkFVTFRfU0VUVElOR1MudGFza0dyb3VwSWNvbnM7XG4gICAgICAgIGNvbnN0IGdyb3VwT3JkZXIgPSBbXG4gICAgICAgICAgICB7IGtleTogJ292ZXJkdWUnLCB0aXRsZTogJ092ZXJkdWUnLCBpY29uOiBpY29ucy5vdmVyZHVlLCBjb2xvcjogc2V0dGluZ3MudGFza0dyb3VwQ29sb3JPdmVyZHVlIH0sXG4gICAgICAgICAgICB7IGtleTogJ3RvZGF5JywgdGl0bGU6ICdUb2RheScsIGljb246IGljb25zLnRvZGF5LCBjb2xvcjogc2V0dGluZ3MudGFza0dyb3VwQ29sb3JUb2RheSB9LFxuICAgICAgICAgICAgeyBrZXk6ICd0b21vcnJvdycsIHRpdGxlOiAnVG9tb3Jyb3cnLCBpY29uOiBpY29ucy50b21vcnJvdywgY29sb3I6IHNldHRpbmdzLnRhc2tHcm91cENvbG9yVG9tb3Jyb3cgfSxcbiAgICAgICAgICAgIHsga2V5OiAnbmV4dDdkYXlzJywgdGl0bGU6ICdOZXh0IDcgRGF5cycsIGljb246IGljb25zLm5leHQ3ZGF5cywgY29sb3I6IHNldHRpbmdzLnRhc2tHcm91cENvbG9yTmV4dDdEYXlzIH0sXG4gICAgICAgICAgICB7IGtleTogJ2Z1dHVyZScsIHRpdGxlOiAnRnV0dXJlJywgaWNvbjogaWNvbnMuZnV0dXJlLCBjb2xvcjogc2V0dGluZ3MudGFza0dyb3VwQ29sb3JGdXR1cmUgfSxcbiAgICAgICAgICAgIHsga2V5OiAnbm9EYXRlJywgdGl0bGU6ICdObyBEdWUgRGF0ZScsIGljb246IGljb25zLm5vRGF0ZSwgY29sb3I6IHNldHRpbmdzLnRhc2tHcm91cENvbG9yTm9EYXRlIH1cbiAgICAgICAgXTtcblxuICAgICAgICBjb25zdCBmaW5hbEdyb3VwcyA9IHt9O1xuICAgICAgICBncm91cE9yZGVyLmZvckVhY2goZyA9PiB7XG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MudGFza0RhdGVHcm91cHNUb1Nob3cuaW5jbHVkZXMoZy5rZXkpIHx8IGcua2V5ID09PSAnbm9EYXRlJykge1xuICAgICAgICAgICAgICAgIGlmIChncm91cHNEYXRhW2cua2V5XS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsR3JvdXBzW2cua2V5XSA9IHsgLi4uZywgdGFza3M6IGdyb3Vwc0RhdGFbZy5rZXldIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZpbmFsR3JvdXBzO1xuICAgIH1cblxuICAgIGdyb3VwVGFza3NCeVRhZyh0YXNrcykge1xuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuICAgICAgICBjb25zdCBncm91cGVkQnlUYWcgPSB0YXNrcy5yZWR1Y2UoKGFjYywgdGFzaykgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFncyA9IHRhc2sudGFncy5sZW5ndGggPiAwID8gdGFzay50YWdzIDogWycjdW50YWdnZWQnXTtcbiAgICAgICAgICAgIHRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IHRhZy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIGlmICghYWNjW2tleV0pIGFjY1trZXldID0ge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGFnLFxuICAgICAgICAgICAgICAgICAgICBpY29uOiBzZXR0aW5ncy50YXNrR3JvdXBJY29ucz8udGFnIHx8ICd0YWcnLFxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogc2V0dGluZ3MudGFza0dyb3VwQ29sb3JUYWcsXG4gICAgICAgICAgICAgICAgICAgIHRhc2tzOiBbXVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYWNjW2tleV0udGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30pO1xuXG4gICAgICAgIC8vIFNvcnQgZ3JvdXBzIGFscGhhYmV0aWNhbGx5IGJ5IHRhZyBuYW1lXG4gICAgICAgIGNvbnN0IHNvcnRlZEtleXMgPSBPYmplY3Qua2V5cyhncm91cGVkQnlUYWcpLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSk7XG4gICAgICAgIGNvbnN0IHNvcnRlZEdyb3VwcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBzb3J0ZWRLZXlzKSB7XG4gICAgICAgICAgICBzb3J0ZWRHcm91cHNba2V5XSA9IGdyb3VwZWRCeVRhZ1trZXldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzb3J0ZWRHcm91cHM7XG4gICAgfVxuXG4gICAgcmVuZGVyVGFza0dyb3VwKGtleSwgZ3JvdXBEYXRhKSB7XG4gICAgICAgIGNvbnN0IGdyb3VwQ29udGFpbmVyID0gY3JlYXRlRGl2KHsgY2xzOiAndGFzay1ncm91cC1jb250YWluZXInLCBhdHRyOiB7IHN0eWxlOiBgYmFja2dyb3VuZC1jb2xvcjogJHtncm91cERhdGEuY29sb3J9YCB9IH0pO1xuICAgICAgICBncm91cENvbnRhaW5lci5kYXRhc2V0Lmdyb3VwS2V5ID0ga2V5O1xuXG4gICAgICAgIGNvbnN0IGlzQ29sbGFwc2VkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29sbGFwc2VkVGFza0dyb3Vwc1trZXldO1xuICAgICAgICBpZiAoaXNDb2xsYXBzZWQpIGdyb3VwQ29udGFpbmVyLmFkZENsYXNzKCdpcy1jb2xsYXBzZWQnKTtcblxuICAgICAgICBjb25zdCBoZWFkZXIgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd0YXNrLWdyb3VwLWhlYWRlcicgfSk7XG5cbiAgICAgICAgaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gRmluZCB0aGUgd3JhcHBlciBlbGVtZW50IGZvciB0aGUgbGlzdFxuICAgICAgICAgICAgY29uc3QgdGFza0xpc3RXcmFwcGVyID0gZ3JvdXBDb250YWluZXIucXVlcnlTZWxlY3RvcignLnRhc2stbGlzdC13cmFwcGVyJyk7XG4gICAgICAgICAgICBpZiAoIXRhc2tMaXN0V3JhcHBlcikgcmV0dXJuO1xuXG4gICAgICAgICAgICAvLyBDaGVjayB0aGUgY3VycmVudCBzdGF0ZVxuICAgICAgICAgICAgY29uc3QgaXNDdXJyZW50bHlDb2xsYXBzZWQgPSBncm91cENvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWNvbGxhcHNlZCcpO1xuXG4gICAgICAgICAgICBpZiAoaXNDdXJyZW50bHlDb2xsYXBzZWQpIHtcbiAgICAgICAgICAgICAgICAvLyAtLS0gRVhQQU5ESU5HIC0tLVxuICAgICAgICAgICAgICAgIC8vIDEuIFNldCB0aGUgQ1NTIHZhcmlhYmxlIHRvIHRoZSBlbGVtZW50J3MgZnVsbCBzY3JvbGwgaGVpZ2h0LlxuICAgICAgICAgICAgICAgIC8vICAgIFRoaXMgZ2l2ZXMgdGhlICdoZWlnaHQnIHByb3BlcnR5IGEgc3BlY2lmaWMgdmFsdWUgdG8gYW5pbWF0ZSAqdG8qLlxuICAgICAgICAgICAgICAgIGNvbnN0IHNjcm9sbEhlaWdodCA9IHRhc2tMaXN0V3JhcHBlci5zY3JvbGxIZWlnaHQ7XG4gICAgICAgICAgICAgICAgdGFza0xpc3RXcmFwcGVyLnN0eWxlLnNldFByb3BlcnR5KCctLXRhc2stbGlzdC1oZWlnaHQnLCBgJHtzY3JvbGxIZWlnaHR9cHhgKTtcblxuICAgICAgICAgICAgICAgIC8vIDIuIFJlbW92ZSB0aGUgY2xhc3MgdG8gdHJpZ2dlciB0aGUgdHJhbnNpdGlvbi5cbiAgICAgICAgICAgICAgICBncm91cENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdpcy1jb2xsYXBzZWQnKTtcblxuICAgICAgICAgICAgICAgIC8vIEFmdGVyIHRoZSBhbmltYXRpb24sIHJlbW92ZSB0aGUgZXhwbGljaXQgaGVpZ2h0IHRvIGFsbG93IGZvciBkeW5hbWljIGNvbnRlbnQuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tMaXN0V3JhcHBlci5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS10YXNrLWxpc3QtaGVpZ2h0Jyk7XG4gICAgICAgICAgICAgICAgfSwgMzUwKTsgXG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gLS0tIENPTExBUFNJTkcgLS0tXG4gICAgICAgICAgICAgICAgLy8gMS4gU2V0IHRoZSBDU1MgdmFyaWFibGUgdG8gdGhlIGVsZW1lbnQncyBjdXJyZW50IHJlbmRlcmVkIGhlaWdodC5cbiAgICAgICAgICAgICAgICAvLyAgICBUaGlzIGdpdmVzIHRoZSAnaGVpZ2h0JyBwcm9wZXJ0eSBhIHNwZWNpZmljIHZhbHVlIHRvIGFuaW1hdGUgKmZyb20qLlxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRIZWlnaHQgPSB0YXNrTGlzdFdyYXBwZXIub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgIHRhc2tMaXN0V3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS10YXNrLWxpc3QtaGVpZ2h0JywgYCR7Y3VycmVudEhlaWdodH1weGApO1xuXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIG1pY3JvLWRlbGF5IHRvIGVuc3VyZSB0aGUgYnJvd3NlciByZWdpc3RlcnMgdGhlIHN0YXJ0aW5nIGhlaWdodFxuICAgICAgICAgICAgICAgIC8vIGJlZm9yZSBiZWluZyB0b2xkIHRvIHRyYW5zaXRpb24gdG8gMC4gVGhpcyBpcyB0aGUga2V5IHRvIGZpeGluZyB0aGUgXCJpbnN0YW50IGNvbGxhcHNlXCIuXG4gICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gMi4gQWRkIHRoZSBjbGFzcyB0byB0cmlnZ2VyIHRoZSB0cmFuc2l0aW9uIHRvIGhlaWdodDogMC5cbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaXMtY29sbGFwc2VkJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBhbmQgc2F2ZSB0aGUgc3RhdGVcbiAgICAgICAgICAgIHRoaXMuY29sbGFwc2VkVGFza0dyb3Vwc1trZXldID0gIWlzQ3VycmVudGx5Q29sbGFwc2VkO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGhlYWRlckNvbnRlbnQgPSBoZWFkZXIuY3JlYXRlU3Bhbih7IGNsczogJ3Rhc2stZ3JvdXAtaGVhZGVyLWNvbnRlbnQnIH0pO1xuICAgICAgICBjb25zdCBpY29uRWwgPSBoZWFkZXJDb250ZW50LmNyZWF0ZVNwYW4oeyBjbHM6ICdpY29uJyB9KTtcbiAgICAgICAgc2V0SWNvbihpY29uRWwsIGdyb3VwRGF0YS5pY29uKTtcbiAgICAgICAgaGVhZGVyQ29udGVudC5jcmVhdGVTcGFuKHsgdGV4dDogYCR7Z3JvdXBEYXRhLnRpdGxlfSAoJHtncm91cERhdGEudGFza3MubGVuZ3RofSlgIH0pO1xuXG4gICAgICAgIGNvbnN0IGNvbGxhcHNlSWNvbiA9IGhlYWRlci5jcmVhdGVTcGFuKHsgY2xzOiAndGFzay1ncm91cC1jb2xsYXBzZS1pY29uJyB9KTtcbiAgICAgICAgc2V0SWNvbihjb2xsYXBzZUljb24sICdjaGV2cm9uLWRvd24nKTtcblxuICAgICAgICBjb25zdCB0YXNrTGlzdFdyYXBwZXIgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoJ3Rhc2stbGlzdC13cmFwcGVyJyk7XG4gICAgICAgIGdyb3VwRGF0YS50YXNrcy5mb3JFYWNoKHRhc2sgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFza0VsID0gdGhpcy5yZW5kZXJUYXNrSXRlbSh0YXNrKTsgLy8gVXNlIHRoZSBtb2RpZmllZCByZW5kZXJUYXNrSXRlbVxuICAgICAgICAgICAgdGFza0xpc3RXcmFwcGVyLmFwcGVuZENoaWxkKHRhc2tFbCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBncm91cENvbnRhaW5lcjtcbiAgICB9XG5cbiAgICByZWNvbmNpbGVUYXNrTGlzdChsaXN0V3JhcHBlckVsLCBuZXdUYXNrcykge1xuICAgICAgICBjb25zdCBleGlzdGluZ1Rhc2tSb3dzID0gbmV3IE1hcCgpO1xuICAgICAgICBsaXN0V3JhcHBlckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrLXJvdycpLmZvckVhY2gocm93ID0+IHtcbiAgICAgICAgICAgIGlmIChyb3cuZGF0YXNldC5rZXkpIHtcbiAgICAgICAgICAgICAgICBleGlzdGluZ1Rhc2tSb3dzLnNldChyb3cuZGF0YXNldC5rZXksIHJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBsYXN0RWxlbWVudCA9IG51bGw7XG4gICAgICAgIG5ld1Rhc2tzLmZvckVhY2godGFzayA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXNrS2V5ID0gdGhpcy5nZXRUYXNrS2V5KHRhc2spO1xuICAgICAgICAgICAgbGV0IHRhc2tFbCA9IGV4aXN0aW5nVGFza1Jvd3MuZ2V0KHRhc2tLZXkpO1xuXG4gICAgICAgICAgICBpZiAodGFza0VsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUYXNrSXRlbSh0YXNrRWwsIHRhc2spO1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nVGFza1Jvd3MuZGVsZXRlKHRhc2tLZXkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXNrRWwgPSB0aGlzLnJlbmRlclRhc2tJdGVtKHRhc2spO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBFbnN1cmUgdGhlIGVsZW1lbnQgaXMgaW4gdGhlIGNvcnJlY3QgcG9zaXRpb25cbiAgICAgICAgICAgIGlmIChsYXN0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50LmFmdGVyKHRhc2tFbCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxpc3RXcmFwcGVyRWwucHJlcGVuZCh0YXNrRWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGFzdEVsZW1lbnQgPSB0YXNrRWw7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV4aXN0aW5nVGFza1Jvd3MuZm9yRWFjaChyb3cgPT4gcm93LnJlbW92ZSgpKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgYSBzaW5nbGUgdGFzayBpdGVtIHJvdyBpbiBhIHRhc2sgZ3JvdXAuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHRhc2sgVGhlIHRhc2sgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lciBUaGUgcGFyZW50IGNvbnRhaW5lciBmb3IgdGhlIHRhc2sgcm93LlxuICAgICAqL1xuICAgIHJlbmRlclRhc2tJdGVtKHRhc2spIHtcbiAgICAgICAgY29uc3QgdGFza1JvdyA9IGNyZWF0ZURpdih7IGNsczogJ3Rhc2stcm93JyB9KTtcbiAgICAgICAgdGFza1Jvdy5kYXRhc2V0LmtleSA9IHRoaXMuZ2V0VGFza0tleSh0YXNrKTtcbiAgICAgICAgdGFza1Jvdy5kYXRhc2V0LnRhc2tTdGF0dXMgPSB0YXNrLnN0YXR1cztcbiAgICAgICAgY29uc3Qgc2VhcmNoSW5wdXRFbCA9IHRoaXMudGFza3NTZWFyY2hJbnB1dEVsO1xuXG4gICAgICAgIGNvbnN0IGNoZWNrYm94ID0gdGFza1Jvdy5jcmVhdGVEaXYoeyBjbHM6ICd0YXNrLWNoZWNrYm94LXN5bWJvbCcgfSk7XG4gICAgICAgIHRoaXMuX3JlbmRlclRhc2tTeW1ib2woY2hlY2tib3gsIHRhc2spO1xuICAgICAgICBjb25zdCB0ZXh0RWwgPSB0YXNrUm93LmNyZWF0ZVNwYW4oeyBjbHM6ICd0YXNrLXRleHQnIH0pO1xuXG4gICAgICAgIC8vIE9uIGluaXRpYWwgcmVuZGVyLCBjaGVjayBpZiB0aGUgdGFzayBpcyBhbHJlYWR5IGNvbXBsZXRlZCBhbmQgYXBwbHkgdGhlIHN0eWxlLlxuICAgICAgICBpZiAodGFzay5zdGF0dXMudG9Mb3dlckNhc2UoKSA9PT0gJ3gnKSB7XG4gICAgICAgICAgICB0ZXh0RWwuY2xhc3NMaXN0LmFkZCgnY29tcGxldGVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIHN0YXRlICpiZWZvcmUqIHRoZSBjaGFuZ2UgaXMgbWFkZVxuICAgICAgICAgICAgY29uc3Qgd2FzQ29tcGxldGVkID0gdGFzay5zdGF0dXMudG9Mb3dlckNhc2UoKSA9PT0gJ3gnO1xuXG4gICAgICAgICAgICAvLyBNb2RpZnkgdGhlIGZpbGUuIFRoaXMgYWxzbyB0cmlnZ2VycyB0aGUgYmFja2dyb3VuZCBmaWxlIHdhdGNoZXJcbiAgICAgICAgICAgIC8vIHdoaWNoIHdpbGwgY29ycmVjdGx5IHJlZnJlc2ggdGhlIGVudGlyZSB0YXNrIGxpc3QgYWZ0ZXIgYSBzaG9ydCBkZWxheS5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMudG9nZ2xlVGFza0NvbXBsZXRpb24odGFzayk7XG5cbiAgICAgICAgICAgIC8vIC0tLSBQcm92aWRlIEluc3RhbnQgVUkgRmVlZGJhY2sgLS0tXG4gICAgICAgICAgICAvLyBXZSB1cGRhdGUgdGhlIGxvY2FsIHRhc2sgb2JqZWN0IGFuZCB0aGUgRE9NIGltbWVkaWF0ZWx5IHNvIHRoZSB1c2VyXG4gICAgICAgICAgICAvLyBzZWVzIHRoZSBjaGFuZ2Ugd2l0aG91dCB3YWl0aW5nIGZvciB0aGUgZmlsZSB3YXRjaGVyIHRvIGZpbmlzaC5cblxuICAgICAgICAgICAgaWYgKHdhc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgIC8vIElmIGl0IFdBUyBjb21wbGV0ZWQsIGl0cyBuZXcgc3RhdGUgaXMgSU5DT01QTEVURVxuICAgICAgICAgICAgICAgIHRhc2suc3RhdHVzID0gJyAnO1xuICAgICAgICAgICAgICAgIHRleHRFbC5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZWQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgaXQgd2FzIE5PVCBjb21wbGV0ZWQsIGl0cyBuZXcgc3RhdGUgaXMgQ09NUExFVEVcbiAgICAgICAgICAgICAgICB0YXNrLnN0YXR1cyA9ICd4JztcbiAgICAgICAgICAgICAgICB0ZXh0RWwuY2xhc3NMaXN0LmFkZCgnY29tcGxldGVkJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEZpbmFsbHksIHJlLXJlbmRlciB0aGUgY2hlY2tib3ggc3ltYm9sIGl0c2VsZiB1c2luZyB0aGUgbmV3IHN0YXR1c1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyVGFza1N5bWJvbChjaGVja2JveCwgdGFzayk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIE1hcmtkb3duUmVuZGVyZXIucmVuZGVyKHRoaXMuYXBwLCB0YXNrLnRleHQsIHRleHRFbCwgdGFzay5maWxlLnBhdGgsIHRoaXMpO1xuXG4gICAgICAgIHRhc2tSb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KHRhc2suZmlsZS5wYXRoLCAnJywgZmFsc2UsIHsgZVN0YXRlOiB7IGxpbmU6IHRhc2subGluZU51bWJlciB9IH0pKTtcbiAgICAgICAgdGhpcy5hZGRLZXlkb3duTGlzdGVuZXJzKHRhc2tSb3csIHNlYXJjaElucHV0RWwpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tUZXh0VHJ1bmNhdGUgJiYgdGV4dEVsLnNjcm9sbFdpZHRoID4gdGV4dEVsLmNsaWVudFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vbHRpcFRleHQgPSBgVGFzazogJHt0YXNrLnRleHR9XFxuXFxuRmlsZTogJHt0YXNrLmZpbGUucGF0aH1cXG5EdWU6ICR7dGFzay5kdWVEYXRlID8gbW9tZW50KHRhc2suZHVlRGF0ZSkuZm9ybWF0KCdZWVlZLU1NLUREJykgOiAnTm9uZSd9XFxuVGFnczogJHt0YXNrLnRhZ3MubGVuZ3RoID4gMCA/IHRhc2sudGFncy5tYXAodCA9PiAnIycgKyB0KS5qb2luKCcgJykgOiAnTm9uZSd9YDtcbiAgICAgICAgICAgICAgICB0ZXh0RWwuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgdG9vbHRpcFRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcblxuICAgICAgICByZXR1cm4gdGFza1JvdztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUb2dnbGVzIHRoZSBjb21wbGV0aW9uIHN0YXRlIG9mIGEgdGFzayBieSBtb2RpZnlpbmcgdGhlIHNvdXJjZSBNYXJrZG93biBmaWxlLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSB0YXNrIFRoZSB0YXNrIG9iamVjdCB0byB0b2dnbGUuXG4gICAgICovXG4gICAgYXN5bmMgdG9nZ2xlVGFza0NvbXBsZXRpb24odGFzaykge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZCh0YXNrLmZpbGUpO1xuICAgICAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgICAgICBsZXQgbGluZSA9IGxpbmVzW3Rhc2subGluZU51bWJlcl07XG5cbiAgICAgICAgY29uc3QgY29tcGxldGlvbkRhdGVSZWdleCA9IC9cXHMq4pyFXFxzKlxcZHs0fS1cXGR7Mn0tXFxkezJ9LztcbiAgICAgICAgY29uc3QgdG9kYXkgPSBtb21lbnQoKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xuICAgICAgICBjb25zdCBpc0NvbXBsZXRlZCA9IHRhc2suc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICd4JztcblxuICAgICAgICAvLyBGaW5kIHRoZSB0YXNrIG1hcmtlciBbLl0gYW5kIHJlcGxhY2UgdGhlIGNoYXJhY3RlciBpbnNpZGVcbiAgICAgICAgY29uc3QgdGFza01hcmtlclJlZ2V4ID0gL1xcWy5cXF0vO1xuXG4gICAgICAgIGlmIChpc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgLy8gTWFyayBhcyBpbmNvbXBsZXRlOiBbeF0gLT4gWyBdIGFuZCByZW1vdmUgY29tcGxldGlvbiBkYXRlXG4gICAgICAgICAgICBsZXQgbmV3TGluZSA9IGxpbmUucmVwbGFjZSh0YXNrTWFya2VyUmVnZXgsICdbIF0nKTtcbiAgICAgICAgICAgIGxpbmVzW3Rhc2subGluZU51bWJlcl0gPSBuZXdMaW5lLnJlcGxhY2UoY29tcGxldGlvbkRhdGVSZWdleCwgJycpLnRyaW0oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE1hcmsgYXMgY29tcGxldGU6IFsgXSBvciBbL10gb3IgWy1dIC0+IFt4XSBhbmQgYWRkIGNvbXBsZXRpb24gZGF0ZVxuICAgICAgICAgICAgbGV0IG5ld0xpbmUgPSBsaW5lLnJlcGxhY2UodGFza01hcmtlclJlZ2V4LCAnW3hdJyk7XG4gICAgICAgICAgICBuZXdMaW5lID0gbmV3TGluZS5yZXBsYWNlKGNvbXBsZXRpb25EYXRlUmVnZXgsICcnKTsgLy8gUmVtb3ZlIGFueSBvbGQgb25lIGZpcnN0XG4gICAgICAgICAgICBsaW5lc1t0YXNrLmxpbmVOdW1iZXJdID0gYCR7bmV3TGluZX0g4pyFICR7dG9kYXl9YDtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkodGFzay5maWxlLCBsaW5lcy5qb2luKCdcXG4nKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBhbiBleGlzdGluZyB0YXNrIHJvdyBpbiB0aGUgRE9NIHdpdGggbmV3IGRhdGEuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFza1Jvd0VsIFRoZSAudGFzay1yb3cgZWxlbWVudCB0byB1cGRhdGUuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHRhc2sgVGhlIG5ldyB0YXNrIG9iamVjdCB3aXRoIHVwZGF0ZWQgZGF0YS5cbiAgICAgKi9cbiAgICB1cGRhdGVUYXNrSXRlbSh0YXNrUm93RWwsIHRhc2spIHtcbiAgICAgICAgLy8gT25seSB1cGRhdGUgaWYgdGhlIHRleHQgY29udGVudCBoYXMgY2hhbmdlZFxuICAgICAgICBjb25zdCB0ZXh0RWwgPSB0YXNrUm93RWwucXVlcnlTZWxlY3RvcignLnRhc2stdGV4dCcpO1xuXG4gICAgICAgIC8vIE9ubHkgdXBkYXRlIGlmIHRoZSBzdGF0dXMgaGFzIGNoYW5nZWRcbiAgICAgICAgaWYgKHRhc2tSb3dFbC5kYXRhc2V0LnRhc2tTdGF0dXMgIT09IHRhc2suc3RhdHVzKSB7XG4gICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IHRhc2tSb3dFbC5xdWVyeVNlbGVjdG9yKCcudGFzay1jaGVja2JveC1zeW1ib2wnKTtcbiAgICAgICAgICAgIGlmIChjaGVja2JveCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlclRhc2tTeW1ib2woY2hlY2tib3gsIHRhc2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFza1Jvd0VsLmRhdGFzZXQudGFza1N0YXR1cyA9IHRhc2suc3RhdHVzO1xuXG4gICAgICAgICAgICBpZiAodGV4dEVsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhc2suc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICd4Jykge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0RWwuY2xhc3NMaXN0LmFkZCgnY29tcGxldGVkJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEEgc2ltcGxlIGNoZWNrIHRvIHNlZSBpZiB0aGUgcmVuZGVyZWQgSFRNTCBtaWdodCBiZSBkaWZmZXJlbnRcbiAgICAgICAgaWYgKHRleHRFbCAmJiB0ZXh0RWwudGV4dENvbnRlbnQgIT09IHRhc2sudGV4dCkge1xuICAgICAgICAgICAgdGV4dEVsLmVtcHR5KCk7IC8vIENsZWFyIGV4aXN0aW5nIHJlbmRlcmVkIG1hcmtkb3duXG4gICAgICAgICAgICBNYXJrZG93blJlbmRlcmVyLnJlbmRlcih0aGlzLmFwcCwgdGFzay50ZXh0LCB0ZXh0RWwsIHRhc2suZmlsZS5wYXRoLCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9wZW5zIHRoZSBzY3JhdGNocGFkIG5vdGUgaW4gYSBuZXcgb3IgY3VycmVudCB0YWIuXG4gICAgICovXG4gICAgYXN5bmMgb3BlblNjcmF0Y2hwYWRGaWxlKGZvcmNlTmV3VGFiID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZpeGVkTm90ZUZpbGU7XG5cbiAgICAgICAgaWYgKHRoaXMuYXBwLmlzTW9iaWxlKSB7XG4gICAgICAgICAgICBsZXQgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcbiAgICAgICAgICAgIGlmICghZmlsZSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUocGF0aCwgJycpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gY3JlYXRlIHNjcmF0Y2hwYWQgZmlsZS4nKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIGB0cnVlYCBhcmd1bWVudCBmb3JjZXMgYSBuZXcgbGVhZiwgd2hpY2ggcmVsaWFibHkgYnJpbmdzIHRoZSBub3RlIHRvIHRoZSBmcm9udCBvbiBtb2JpbGUuXG4gICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYodHJ1ZSkub3BlbkZpbGUoZmlsZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1NjcmF0Y2hwYWQgcGF0aCBpcyBpbnZhbGlkIG9yIGNvdWxkIG5vdCBiZSBjcmVhdGVkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmlyc3QsIHRyeSB0byBmaW5kIGFuIGFscmVhZHkgb3BlbiBsZWFmIGZvciB0aGlzIGZpbGUuXG4gICAgICAgIGxldCB0YXJnZXRMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShcIm1hcmtkb3duXCIpLmZpbmQobGVhZiA9PiBsZWFmLnZpZXcuZmlsZT8ucGF0aCA9PT0gcGF0aCk7XG4gICAgICAgIGlmICh0YXJnZXRMZWFmKSB7IHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKHRhcmdldExlYWYpOyByZXR1cm47IH1cblxuICAgICAgICBsZXQgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcbiAgICAgICAgLy8gSWYgdGhlIGZpbGUgZG9lc24ndCBleGlzdCwgY3JlYXRlIGl0LlxuICAgICAgICBpZiAoIWZpbGUpIGZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUocGF0aCwgXCJcIikuY2F0Y2goKCkgPT4gbmV3IE5vdGljZShgRmFpbGVkIHRvIGNyZWF0ZSBzY3JhdGNocGFkOiAke3BhdGh9YCkpO1xuXG4gICAgICAgIC8vaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaHBhZE9wZW5BY3Rpb24gPT09ICduZXctdGFiJykub3BlbkZpbGUoZmlsZSk7XG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG9wZW5Jbk5ldyA9IGZvcmNlTmV3VGFiIHx8IHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWRPcGVuQWN0aW9uID09PSAnbmV3LXRhYic7XG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihvcGVuSW5OZXcpLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2F2ZXMgdGV4dCBjb250ZW50IHRvIHRoZSBzY3JhdGNocGFkIG5vdGUgZmlsZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUaGUgdGV4dCB0byBzYXZlLlxuICAgICAqL1xuICAgIGFzeW5jIHNhdmVGaXhlZE5vdGUodGV4dCkgeyAvLyAndGV4dCcgaXMgdGhlIGJvZHkgY29udGVudCBmcm9tIHRoZSB0ZXh0YXJlYVxuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZml4ZWROb3RlRmlsZTtcbiAgICAgICAgaWYgKCFwYXRoKSByZXR1cm47IC8vIFNhZmV0eSBjaGVja1xuXG4gICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSBwYXRoLnN1YnN0cmluZygwLCBwYXRoLmxhc3RJbmRleE9mKCcvJykpO1xuXG4gICAgICAgIGlmIChmb2xkZXJQYXRoICYmICF0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCkpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXJQYXRoKS5jYXRjaChlcnIgPT4gY29uc29sZS5lcnJvcihcIkVycm9yIGNyZWF0aW5nIGZvbGRlcjpcIiwgZXJyKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDT1JSRUNURUQ6IENvbWJpbmUgdGhlIHN0b3JlZCBmcm9udG1hdHRlciB3aXRoIHRoZSBjdXJyZW50IGJvZHkgdGV4dFxuICAgICAgICBjb25zdCBjb250ZW50VG9TYXZlID0gdGhpcy5zY3JhdGNocGFkRnJvbnRtYXR0ZXIgKyB0ZXh0O1xuXG4gICAgICAgIGxldCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xuICAgICAgICBpZiAoIWZpbGUpIHtcbiAgICAgICAgICAgIGZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUocGF0aCwgY29udGVudFRvU2F2ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgY29udGVudFRvU2F2ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2FkcyB0aGUgY29udGVudCBvZiB0aGUgc2NyYXRjaHBhZCBub3RlIGZpbGUuXG4gICAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gVGhlIGNvbnRlbnQgb2YgdGhlIG5vdGUsIG9yIGFuIGVtcHR5IHN0cmluZyBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuICAgICAqL1xuICAgIGFzeW5jIGxvYWROb3RlKCkge1xuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZml4ZWROb3RlRmlsZTtcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcbiAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkgcmV0dXJuIGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9wZW5zIGEgZGFpbHkgbm90ZSBmb3IgYSBnaXZlbiBkYXRlLCBjcmVhdGluZyBpdCBmcm9tIGEgdGVtcGxhdGUgaWYgaXQgZG9lc24ndCBleGlzdC5cbiAgICAgKiBAcGFyYW0ge0RhdGV9IGRhdGUgVGhlIGRhdGUgZm9yIHRoZSBkYWlseSBub3RlLlxuICAgICAqL1xuICAgIGFzeW5jIG9wZW5EYWlseU5vdGUoZGF0ZSkge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBkYWlseU5vdGVzRm9sZGVyLFxuICAgICAgICAgICAgZGFpbHlOb3RlRGF0ZUZvcm1hdCxcbiAgICAgICAgICAgIGRhaWx5Tm90ZVRlbXBsYXRlUGF0aCxcbiAgICAgICAgICAgIGRhaWx5Tm90ZU9wZW5BY3Rpb25cbiAgICAgICAgfSA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGZvcm1hdERhdGUoZGF0ZSwgZGFpbHlOb3RlRGF0ZUZvcm1hdCk7XG4gICAgICAgIGNvbnN0IHBhdGggPSBkYWlseU5vdGVzRm9sZGVyID8gYCR7ZGFpbHlOb3Rlc0ZvbGRlcn0vJHtmaWxlbmFtZX0ubWRgIDogYCR7ZmlsZW5hbWV9Lm1kYDtcblxuICAgICAgICBsZXQgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcbiAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICAgIC8vIEZpbGUgYWxyZWFkeSBleGlzdHMsIGp1c3Qgb3BlbiBpdFxuICAgICAgICAgICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGRhaWx5Tm90ZU9wZW5BY3Rpb24gPT09ICduZXctdGFiJyk7XG4gICAgICAgICAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIC0tLSBGaWxlIGRvZXMgTk9UIGV4aXN0LCBwcm9jZWVkIHdpdGggY3JlYXRpb24gLS0tXG5cbiAgICAgICAgLy8gVGhpcyBpbm5lciBmdW5jdGlvbiBpcyBub3cgdXBkYXRlZCB0byBoYW5kbGUgVGVtcGxhdGVyIGNvcnJlY3RseVxuICAgICAgICBjb25zdCBjcmVhdGVOb3RlID0gYXN5bmMgKGluY2x1ZGVFdmVudHMgPSBmYWxzZSkgPT4ge1xuXG4gICAgICAgICAgICBsZXQgdGVtcGxhdGVDb250ZW50ID0gXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlRmlsZSA9IGRhaWx5Tm90ZVRlbXBsYXRlUGF0aCA/IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChkYWlseU5vdGVUZW1wbGF0ZVBhdGgpIDogbnVsbDtcblxuICAgICAgICAgICAgaWYgKHRlbXBsYXRlRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZCh0ZW1wbGF0ZUZpbGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFRlbXBsYXRlIGZpbGUgbm90IGZvdW5kIGF0OiAke2RhaWx5Tm90ZVRlbXBsYXRlUGF0aH1gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBub3RlIHdpdGggdGhlIHBsYWNlaG9sZGVyIGZpcnN0XG4gICAgICAgICAgICBjb25zdCBuZXdGaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHBhdGgsIHRlbXBsYXRlQ29udGVudCk7XG5cbiAgICAgICAgICAgIC8vIE9wZW4gdGhlIG5vdGVcbiAgICAgICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihkYWlseU5vdGVPcGVuQWN0aW9uID09PSBcIm5ldy10YWJcIik7XG4gICAgICAgICAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKG5ld0ZpbGUpO1xuXG4gICAgICAgICAgICBjb25zdCBwbGFjZWhvbGRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNhbGVuZGFyRXZlbnRzUGxhY2Vob2xkZXIgfHwgJyUlQ0FMRU5EQVJfRVZFTlRTJSUnO1xuXG4gICAgICAgICAgICAvLyBJZiBpbmNsdWRpbmcgZXZlbnRzLCBwcm9jZWVkIHdpdGggaW5qZWN0aW9uXG4gICAgICAgICAgICBpZiAoaW5jbHVkZUV2ZW50cykge1xuICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7IC8vIERlbGF5XG5cbiAgICAgICAgICAgICAgICAvLyAxLiBDaGVjayBmb3IgZXZlbnRzIGluIHRoZSBtYXBcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlS2V5ID0gbW9tZW50KGRhdGUpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnRzRm9yRGF5ID0gdGhpcy5pY3NFdmVudHNCeURhdGUuZ2V0KGRhdGVLZXkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50c0ZvckRheSAmJiBldmVudHNGb3JEYXkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyAyLiBGb3JtYXQgdGhlIGV2ZW50cyBpbnRvIGEgc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50Q29udGVudCA9IHRoaXMuZm9ybWF0RXZlbnRzRm9yVGVtcGxhdGUoZXZlbnRzRm9yRGF5KSB8fCBcIlwiO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIDMuIFJlYWQgdGhlIGZpbGUgKmFmdGVyKiBUZW1wbGF0ZXIgaGFzIHJ1blxuICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudENvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKG5ld0ZpbGUpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIDQuIFJlcGxhY2UgcGxhY2Vob2xkZXIgYW5kIHNhdmVcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb250ZW50LmluY2x1ZGVzKHBsYWNlaG9sZGVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmluYWxDb250ZW50ID0gY3VycmVudENvbnRlbnQucmVwbGFjZShwbGFjZWhvbGRlciwgZXZlbnRDb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShuZXdGaWxlLCBmaW5hbENvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgUGxhY2Vob2xkZXIgXCIke3BsYWNlaG9sZGVyfVwiIG5vdCBmb3VuZCBpbiB0aGUgbm90ZSBhZnRlciBjcmVhdGlvbi4gVGVtcGxhdGVyIG1pZ2h0IGJlIHJlbW92aW5nIGl0LmApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiTm8gZXZlbnRzIGZvdW5kIGZvciB0aGlzIGRhdGUsIHNvIG5vdGhpbmcgdG8gaW5qZWN0LlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBMb2dpYyBmb3IgcmVtb3ZpbmcgcGxhY2Vob2xkZXIgd2hlbiBpbmNsdWRlRXZlbnRzIGlzIGZhbHNlIGNhbiBiZSBhZGRlZCBoZXJlIGlmIG5lZWRlZFxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDIwMCkpO1xuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50Q29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQobmV3RmlsZSk7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb250ZW50LmluY2x1ZGVzKHBsYWNlaG9sZGVyKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5hbENvbnRlbnQgPSBjdXJyZW50Q29udGVudC5yZXBsYWNlKHBsYWNlaG9sZGVyLCBcIlwiKS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShuZXdGaWxlLCBmaW5hbENvbnRlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBoYXNUZW1wbGF0ZSA9ICEhZGFpbHlOb3RlVGVtcGxhdGVQYXRoICYmIGRhaWx5Tm90ZVRlbXBsYXRlUGF0aC5sZW5ndGggPiAwO1xuICAgICAgICAvLyBUaGUgcmVzdCBvZiBsb2dpYyByZW1haW5zIHVuY2hhbmdlZC5cbiAgICAgICAgY29uc3QgZGF0ZUtleSA9IG1vbWVudChkYXRlKS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcbiAgICAgICAgY29uc3QgZXZlbnRzRm9yRGF5ID0gdGhpcy5pY3NFdmVudHNCeURhdGUuZ2V0KGRhdGVLZXkpO1xuICAgICAgICBjb25zdCBmcmllbmRseURhdGUgPSBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZyh1bmRlZmluZWQsIHtcbiAgICAgICAgICAgIHdlZWtkYXk6ICdsb25nJyxcbiAgICAgICAgICAgIHllYXI6ICdudW1lcmljJyxcbiAgICAgICAgICAgIG1vbnRoOiAnbG9uZycsXG4gICAgICAgICAgICBkYXk6ICdudW1lcmljJ1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZXZlbnRzRm9yRGF5ICYmIGV2ZW50c0ZvckRheS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyAtLS0gQ2FzZSAxOiBFdmVudHMgZXhpc3QgZm9yIHRoZSBzZWxlY3RlZCBkYXkgLS0tXG4gICAgICAgICAgICBuZXcgQWN0aW9uQ2hvaWNlTW9kYWwodGhpcy5hcHAsXG4gICAgICAgICAgICAgICAgYENyZWF0ZSBkYWlseSBub3RlIGZvciAke2ZyaWVuZGx5RGF0ZX0/YCxcbiAgICAgICAgICAgICAgICBcIlRoaXMgZGF5IGhhcyBjYWxlbmRhciBldmVudHMuIEhvdyB3b3VsZCB5b3UgbGlrZSB0byBwcm9jZWVkP1wiLFxuICAgICAgICAgICAgICAgIFt7XG4gICAgICAgICAgICAgICAgICAgIC8vIEJ1dHRvbiAxOiBBbHdheXMgaW5jbHVkZXMgZXZlbnRzXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGhhc1RlbXBsYXRlID8gJ0NyZWF0ZSB3aXRoIEV2ZW50cyAmIFRlbXBsYXRlJyA6ICdDcmVhdGUgd2l0aCBFdmVudHMnLFxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdtb2QtY3RhJyxcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiBjcmVhdGVOb3RlKHRydWUpXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAvLyBCdXR0b24gMjogRXhjbHVkZXMgZXZlbnRzXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGhhc1RlbXBsYXRlID8gJ0NyZWF0ZSBmcm9tIFRlbXBsYXRlIE9ubHknIDogJ0NyZWF0ZSBCbGFuayBOb3RlJyxcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiBjcmVhdGVOb3RlKGZhbHNlKVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ0NhbmNlbCcsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4geyB9XG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICkub3BlbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gLS0tIENhc2UgMjogTm8gZXZlbnRzIGV4aXN0IGZvciB0aGUgc2VsZWN0ZWQgZGF5IC0tLVxuICAgICAgICAgICAgbmV3IEFjdGlvbkNob2ljZU1vZGFsKHRoaXMuYXBwLFxuICAgICAgICAgICAgICAgICdDcmVhdGUgZGFpbHkgbm90ZT8nLFxuICAgICAgICAgICAgICAgIGBBIGRhaWx5IG5vdGUgZm9yICR7ZnJpZW5kbHlEYXRlfSBkb2VzIG5vdCBleGlzdC4gV291bGQgeW91IGxpa2UgdG8gY3JlYXRlIGl0P2AsXG4gICAgICAgICAgICAgICAgW3tcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG1haW4gYWN0aW9uIGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBoYXNUZW1wbGF0ZSA/ICdDcmVhdGUgZnJvbSBUZW1wbGF0ZScgOiAnQ3JlYXRlIEJsYW5rIE5vdGUnLFxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdtb2QtY3RhJyxcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiBjcmVhdGVOb3RlKGZhbHNlKSAvLyBObyBldmVudHMgdG8gaW5jbHVkZSwgc28gYWx3YXlzIGZhbHNlXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnQ2FuY2VsJyxcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7IH1cbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgKS5vcGVuKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuLyoqXG4gKiBUaGUgbWFpbiBwbHVnaW4gY2xhc3MgdGhhdCByZWdpc3RlcnMgdGhlIHZpZXcgYW5kIHNldHRpbmdzIHRhYi5cbiAqL1xuY2xhc3MgUGVyaW9kTW9udGhQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHRhc2tzQVBJO1xuICAgIHRoZW1lT2JzZXJ2ZXIgPSBudWxsO1xuICAgIHRoZW1lQ2hhbmdlRGVib3VuY2VUaW1lciA9IG51bGw7XG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICAgICAgICB0aGlzLmFkZFN0eWxlKCk7XG4gICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJWaWV3KFZJRVdfVFlQRV9QRVJJT0QsIGxlYWYgPT4gbmV3IFBlcmlvZE1vbnRoVmlldyhsZWFmLCB0aGlzKSk7XG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbihcImNhbGVuZGFyLWNoZWNrXCIsIFwiT3BlbiBDYWxlbmRhciBQZXJpb2QgV2VlayBOb3Rlc1wiLCAoKSA9PiB0aGlzLmFjdGl2YXRlVmlldygpKTtcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHsgaWQ6IFwib3Blbi1wZXJpb2QtbW9udGgtdmlld1wiLCBuYW1lOiBcIk9wZW4gQ2FsZW5kYXIgUGVyaW9kIFdlZWsgTm90ZXNcIiwgY2FsbGJhY2s6ICgpID0+IHRoaXMuYWN0aXZhdGVWaWV3KCkgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMucmVzZXRJY3NSZWZyZXNoSW50ZXJ2YWwoKTtcbiAgICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBQZXJpb2RTZXR0aW5nc1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG4gICAgICAgIHRoaXMudGhlbWVPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRoZW1lQ2hhbmdlRGVib3VuY2VUaW1lcik7XG4gICAgICAgICAgICB0aGlzLnRoZW1lQ2hhbmdlRGVib3VuY2VUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7XG4gICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnRoZW1lT2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7IGF0dHJpYnV0ZXM6IHRydWUsIGF0dHJpYnV0ZUZpbHRlcjogWydjbGFzcyddIH0pO1xuXG4gICAgICAgIHRoaXMuaWNzUmVmcmVzaEludGVydmFsSWQgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZhdGVWaWV3KCk7XG4gICAgICAgIH0pO1xuXG5cbiAgICB9XG5cbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5qZWN0cyB0aGUgcGx1Z2luJ3MgQ1NTIGludG8gdGhlIGRvY3VtZW50IGhlYWQuXG4gICAgICovXG4gICAgYWRkU3R5bGUoKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICBzdHlsZUVsLmlkID0gJ3BlcmlvZC1tb250aC1wbHVnaW4tc3R5bGVzJztcbiAgICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IFBMVUdJTl9TVFlMRVM7XG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBDU1MgY3VzdG9tIHByb3BlcnRpZXMgKHZhcmlhYmxlcykgYmFzZWQgb24gdGhlIGN1cnJlbnQgcGx1Z2luIHNldHRpbmdzLlxuICAgICAqL1xuICAgIHVwZGF0ZVN0eWxlcygpIHtcbiAgICAgICAgY29uc3Qgc3R5bGVQcm9wcyA9IHtcbiAgICAgICAgICAgICctLWhlYWRlci1mb250LXNpemUnOiB0aGlzLnNldHRpbmdzLmZvbnRTaXplLFxuICAgICAgICAgICAgJy0tZGF5LW51bWJlci1mb250LXNpemUnOiB0aGlzLnNldHRpbmdzLmRheU51bWJlckZvbnRTaXplLFxuICAgICAgICAgICAgJy0taGVhZGVyLXJvdy1mb250LXdlaWdodCc6IHRoaXMuc2V0dGluZ3MuaGVhZGVyUm93Qm9sZCA/ICdib2xkJyA6ICdub3JtYWwnLFxuICAgICAgICAgICAgJy0tcHctY29sdW1uLWZvbnQtd2VpZ2h0JzogdGhpcy5zZXR0aW5ncy5wd0NvbHVtbkJvbGQgPyAnYm9sZCcgOiAnbm9ybWFsJyxcbiAgICAgICAgICAgICctLW1vbnRoLWNvbG9yLWxpZ2h0JzogdGhpcy5zZXR0aW5ncy5tb250aENvbG9yTGlnaHQsXG4gICAgICAgICAgICAnLS1tb250aC1jb2xvci1kYXJrJzogdGhpcy5zZXR0aW5ncy5tb250aENvbG9yRGFyayxcbiAgICAgICAgICAgICctLXllYXItY29sb3ItbGlnaHQnOiB0aGlzLnNldHRpbmdzLnllYXJDb2xvckxpZ2h0LFxuICAgICAgICAgICAgJy0teWVhci1jb2xvci1kYXJrJzogdGhpcy5zZXR0aW5ncy55ZWFyQ29sb3JEYXJrLFxuICAgICAgICAgICAgJy0tY3VycmVudC1oaWdobGlnaHQtbGFiZWwtY29sb3ItbGlnaHQnOiB0aGlzLnNldHRpbmdzLmN1cnJlbnRIaWdobGlnaHRMYWJlbENvbG9yTGlnaHQsXG4gICAgICAgICAgICAnLS1jdXJyZW50LWhpZ2hsaWdodC1sYWJlbC1jb2xvci1kYXJrJzogdGhpcy5zZXR0aW5ncy5jdXJyZW50SGlnaGxpZ2h0TGFiZWxDb2xvckRhcmssXG4gICAgICAgICAgICAnLS1wdy1zZXBhcmF0b3ItY29sb3InOiB0aGlzLnNldHRpbmdzLnB3Q29sdW1uU2VwYXJhdG9yQ29sb3IsXG4gICAgICAgICAgICAnLS1wdy1jb2x1bW4tZm9udC1jb2xvci1saWdodCc6IHRoaXMuc2V0dGluZ3MucHdDb2x1bW5Gb250Q29sb3JMaWdodCxcbiAgICAgICAgICAgICctLXB3LWNvbHVtbi1mb250LWNvbG9yLWRhcmsnOiB0aGlzLnNldHRpbmdzLnB3Q29sdW1uRm9udENvbG9yRGFyayxcbiAgICAgICAgICAgICctLXdlZWstbnVtYmVyLWZvbnQtY29sb3ItbGlnaHQnOiB0aGlzLnNldHRpbmdzLndlZWtOdW1iZXJGb250Q29sb3JMaWdodCxcbiAgICAgICAgICAgICctLXdlZWstbnVtYmVyLWZvbnQtY29sb3ItZGFyayc6IHRoaXMuc2V0dGluZ3Mud2Vla051bWJlckZvbnRDb2xvckRhcmssXG4gICAgICAgICAgICAnLS1kYXktaGVhZGVyLWZvbnQtY29sb3ItbGlnaHQnOiB0aGlzLnNldHRpbmdzLmRheUhlYWRlckZvbnRDb2xvckxpZ2h0LFxuICAgICAgICAgICAgJy0tZGF5LWhlYWRlci1mb250LWNvbG9yLWRhcmsnOiB0aGlzLnNldHRpbmdzLmRheUhlYWRlckZvbnRDb2xvckRhcmssXG4gICAgICAgICAgICAnLS1kYXktY2VsbC1mb250LWNvbG9yLWxpZ2h0JzogdGhpcy5zZXR0aW5ncy5kYXlDZWxsRm9udENvbG9yTGlnaHQsXG4gICAgICAgICAgICAnLS1kYXktY2VsbC1mb250LWNvbG9yLWRhcmsnOiB0aGlzLnNldHRpbmdzLmRheUNlbGxGb250Q29sb3JEYXJrLFxuICAgICAgICAgICAgJy0tb3RoZXItbW9udGgtZm9udC1jb2xvci1saWdodCc6IHRoaXMuc2V0dGluZ3Mub3RoZXJNb250aEZvbnRDb2xvckxpZ2h0LFxuICAgICAgICAgICAgJy0tb3RoZXItbW9udGgtZm9udC1jb2xvci1kYXJrJzogdGhpcy5zZXR0aW5ncy5vdGhlck1vbnRoRm9udENvbG9yRGFyayxcbiAgICAgICAgICAgICctLXNjcmF0Y2gtZm9udC1mYW1pbHknOiB0aGlzLnNldHRpbmdzLnNjcmF0Y2hGb250RmFtaWx5LFxuICAgICAgICAgICAgJy0tc2NyYXRjaC1mb250LXNpemUnOiB0aGlzLnNldHRpbmdzLnNjcmF0Y2hGb250U2l6ZSxcbiAgICAgICAgICAgICctLXNjcmF0Y2gtYm9sZCc6IHRoaXMuc2V0dGluZ3Muc2NyYXRjaEJvbGQgPyAnYm9sZCcgOiAnbm9ybWFsJyxcbiAgICAgICAgICAgICctLW5vdGVzLWZvbnQtc2l6ZSc6IHRoaXMuc2V0dGluZ3Mubm90ZXNGb250U2l6ZSxcbiAgICAgICAgICAgICctLW5vdGVzLWJvbGQnOiB0aGlzLnNldHRpbmdzLm5vdGVzQm9sZCA/ICdib2xkJyA6ICdub3JtYWwnLFxuICAgICAgICAgICAgJy0tdGFiLXRpdGxlLWZvbnQtc2l6ZSc6IHRoaXMuc2V0dGluZ3MudGFiVGl0bGVGb250U2l6ZSxcbiAgICAgICAgICAgICctLXRhYi10aXRsZS1ib2xkJzogdGhpcy5zZXR0aW5ncy50YWJUaXRsZUJvbGQgPyAnYm9sZCcgOiAnbm9ybWFsJyxcbiAgICAgICAgICAgICctLW5vdGVzLWxpbmUtaGVpZ2h0JzogdGhpcy5zZXR0aW5ncy5ub3Rlc0xpbmVIZWlnaHQsXG4gICAgICAgICAgICAnLS1zZWxlY3RlZC10YWItY29sb3InOiB0aGlzLnNldHRpbmdzLnNlbGVjdGVkVGFiQ29sb3IsXG4gICAgICAgICAgICAnLS10b2RheS1oaWdobGlnaHQtY29sb3ItbGlnaHQnOiB0aGlzLnNldHRpbmdzLnRvZGF5SGlnaGxpZ2h0Q29sb3JMaWdodCxcbiAgICAgICAgICAgICctLXRvZGF5LWhpZ2hsaWdodC1jb2xvci1kYXJrJzogdGhpcy5zZXR0aW5ncy50b2RheUhpZ2hsaWdodENvbG9yRGFyayxcbiAgICAgICAgICAgICctLW5vdGVzLWhvdmVyLWNvbG9yJzogdGhpcy5zZXR0aW5ncy5ub3Rlc0hvdmVyQ29sb3IsXG4gICAgICAgICAgICAnLS1kYWlseS1ub3RlLWRvdC1jb2xvcic6IHRoaXMuc2V0dGluZ3MuZGFpbHlOb3RlRG90Q29sb3IsXG4gICAgICAgICAgICAnLS1ub3RlLWNyZWF0ZWQtY29sb3InOiB0aGlzLnNldHRpbmdzLm5vdGVDcmVhdGVkQ29sb3IsXG4gICAgICAgICAgICAnLS1ub3RlLW1vZGlmaWVkLWNvbG9yJzogdGhpcy5zZXR0aW5ncy5ub3RlTW9kaWZpZWRDb2xvcixcbiAgICAgICAgICAgICctLW90aGVyLW5vdGUtZG90LWNvbG9yJzogdGhpcy5zZXR0aW5ncy5ub3RlQ3JlYXRlZENvbG9yLFxuICAgICAgICAgICAgJy0tY2FsZW5kYXItZ3JpZC1nYXAtd2lkdGgnOiB0aGlzLnNldHRpbmdzLmNhbGVuZGFyR3JpZEdhcFdpZHRoLFxuICAgICAgICAgICAgJy0tY2FsZW5kYXItbW9kaWZpZWQtZG90LWNvbG9yJzogdGhpcy5zZXR0aW5ncy5ub3RlTW9kaWZpZWRDb2xvcixcbiAgICAgICAgICAgICctLW90aGVyLW5vdGUtcG9wdXAtZm9udC1zaXplJzogdGhpcy5zZXR0aW5ncy5vdGhlck5vdGVQb3B1cEZvbnRTaXplLFxuICAgICAgICAgICAgJy0tY2FsZW5kYXItZG90LXNpemUnOiB0aGlzLnNldHRpbmdzLmNhbGVuZGFyRG90U2l6ZSArICdweCcsXG4gICAgICAgICAgICAnLS1uYXYtYnV0dG9uLWhlaWdodCc6IHRoaXMuc2V0dGluZ3MubmF2QnV0dG9uSGVpZ2h0LFxuICAgICAgICAgICAgJy0tZGF0ZS1jZWxsLWhvdmVyLWNvbG9yLWxpZ2h0JzogdGhpcy5zZXR0aW5ncy5kYXRlQ2VsbEhvdmVyQ29sb3JMaWdodCxcbiAgICAgICAgICAgICctLWRhdGUtY2VsbC1ob3Zlci1jb2xvci1kYXJrJzogdGhpcy5zZXR0aW5ncy5kYXRlQ2VsbEhvdmVyQ29sb3JEYXJrLFxuICAgICAgICAgICAgJy0tbWFpbi1tb250aC15ZWFyLXRpdGxlLWZvbnQtc2l6ZSc6IHRoaXMuc2V0dGluZ3MubWFpbk1vbnRoWWVhclRpdGxlRm9udFNpemUsXG4gICAgICAgICAgICAnLS1tYWluLW1vbnRoLXRpdGxlLXdlaWdodCc6IHRoaXMuc2V0dGluZ3MubWFpbk1vbnRoVGl0bGVCb2xkID8gJ2JvbGQnIDogJ25vcm1hbCcsXG4gICAgICAgICAgICAnLS1tYWluLXllYXItdGl0bGUtd2VpZ2h0JzogdGhpcy5zZXR0aW5ncy5tYWluWWVhclRpdGxlQm9sZCA/ICdib2xkJyA6ICdub3JtYWwnLFxuICAgICAgICAgICAgJy0tdG9kYXktaGlnaGxpZ2h0LXNpemUnOiB0aGlzLnNldHRpbmdzLnRvZGF5SGlnaGxpZ2h0U2l6ZSxcbiAgICAgICAgICAgICctLXRhc2staGVhZGluZy1mb250LXNpemUnOiB0aGlzLnNldHRpbmdzLnRhc2tIZWFkaW5nRm9udFNpemUsXG4gICAgICAgICAgICAnLS10YXNrLXRleHQtZm9udC1zaXplJzogdGhpcy5zZXR0aW5ncy50YXNrVGV4dEZvbnRTaXplLFxuICAgICAgICAgICAgJy0tc2NyYXRjaHBhZC1oaWdobGlnaHQtY29sb3InOiB0aGlzLnNldHRpbmdzLnNjcmF0Y2hwYWRIaWdobGlnaHRDb2xvcixcbiAgICAgICAgICAgICctLWFzc2V0LWRvdC1jb2xvcic6IHRoaXMuc2V0dGluZ3MuYXNzZXREb3RDb2xvcixcbiAgICAgICAgICAgICctLWNhbGVuZGFyLWV2ZW50LWRvdC1jb2xvcic6IHRoaXMuc2V0dGluZ3MuY2FsZW5kYXJFdmVudERvdENvbG9yLFxuICAgICAgICAgICAgJy0tdGFzay1kb3QtY29sb3InOiB0aGlzLnNldHRpbmdzLnRhc2tEb3RDb2xvcixcbiAgICAgICAgICAgICctLXRhc2stYmFkZ2UtY29sb3InOiB0aGlzLnNldHRpbmdzLnRhc2tCYWRnZUNvbG9yLFxuICAgICAgICAgICAgJy0tdGFzay1iYWRnZS1mb250LWNvbG9yJzogdGhpcy5zZXR0aW5ncy50YXNrQmFkZ2VGb250Q29sb3IsXG4gICAgICAgICAgICAnLS10YXNrLWJhZGdlLWZvbnQtc2l6ZSc6IHRoaXMuc2V0dGluZ3MudGFza0JhZGdlRm9udFNpemUsXG4gICAgICAgICAgICAnLS10b2RheS1jaXJjbGUtY29sb3ItbGlnaHQnOiB0aGlzLnNldHRpbmdzLnRvZGF5Q2lyY2xlQ29sb3JMaWdodCxcbiAgICAgICAgICAgICctLXRvZGF5LWNpcmNsZS1jb2xvci1kYXJrJzogdGhpcy5zZXR0aW5ncy50b2RheUNpcmNsZUNvbG9yRGFyayxcbiAgICAgICAgICAgICctLXdlZWtseS1ub3RlLWRvdC1jb2xvcic6IHRoaXMuc2V0dGluZ3Mud2Vla2x5Tm90ZURvdENvbG9yLFxuICAgICAgICAgICAgJy0td2Vla2VuZC1zaGFkZS1jb2xvci1saWdodCc6IHRoaXMuc2V0dGluZ3Mud2Vla2VuZFNoYWRlQ29sb3JMaWdodCxcbiAgICAgICAgICAgICctLXdlZWtlbmQtc2hhZGUtY29sb3ItZGFyayc6IHRoaXMuc2V0dGluZ3Mud2Vla2VuZFNoYWRlQ29sb3JEYXJrLFxuICAgICAgICAgICAgJy0td2Vla2x5LW5vdGUtZG90LWNvbG9yJzogdGhpcy5zZXR0aW5ncy53ZWVrbHlOb3RlRG90Q29sb3IsXG4gICAgICAgICAgICAnLS1yb3ctaGlnaGxpZ2h0LWNvbG9yLWxpZ2h0JzogdGhpcy5zZXR0aW5ncy5yb3dIaWdobGlnaHRDb2xvckxpZ2h0LFxuICAgICAgICAgICAgJy0tcm93LWhpZ2hsaWdodC1jb2xvci1kYXJrJzogdGhpcy5zZXR0aW5ncy5yb3dIaWdobGlnaHRDb2xvckRhcmssXG4gICAgICAgICAgICAnLS10YXNrLWNvbG9yLW92ZXJkdWUnOiB0aGlzLnNldHRpbmdzLnRhc2tTdGF0dXNDb2xvck92ZXJkdWUsXG4gICAgICAgICAgICAnLS10YXNrLWNvbG9yLWluLXByb2dyZXNzJzogdGhpcy5zZXR0aW5ncy50YXNrU3RhdHVzQ29sb3JJblByb2dyZXNzLFxuICAgICAgICAgICAgJy0tdGFzay1jb2xvci1vcGVuJzogdGhpcy5zZXR0aW5ncy50YXNrU3RhdHVzQ29sb3JPcGVuLFxuICAgICAgICAgICAgJy0tdGFzay1jb2xvci1jb21wbGV0ZWQnOiB0aGlzLnNldHRpbmdzLnRhc2tTdGF0dXNDb2xvckNvbXBsZXRlZCxcbiAgICAgICAgICAgICctLXRhc2stY29sb3ItY2FuY2VsbGVkJzogdGhpcy5zZXR0aW5ncy50YXNrU3RhdHVzQ29sb3JDYW5jZWxsZWQsXG5cbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzdHlsZVByb3BzKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoa2V5LCBzdHlsZVByb3BzW2tleV0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3BlbnMgdGhlIHBsdWdpbiB2aWV3IGluIGEgbmV3IGxlYWYgb3IgcmV2ZWFscyBpdCBpZiBpdCdzIGFscmVhZHkgb3Blbi5cbiAgICAgKi9cbiAgICBhc3luYyBhY3RpdmF0ZVZpZXcoKSB7XG4gICAgICAgIGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1BFUklPRCk7XG4gICAgICAgIGlmIChsZWF2ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYobGVhdmVzWzBdKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG4gICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHsgdHlwZTogVklFV19UWVBFX1BFUklPRCwgYWN0aXZlOiB0cnVlIH0pO1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcbiAgICB9XG5cbiAgICBhc3luYyByZXNldEljc1JlZnJlc2hJbnRlcnZhbCgpIHtcbiAgICAgICAgLy8gSWYgdGhlcmUncyBhbiBvbGQgaW50ZXJ2YWwgcnVubmluZywgY2xlYXIgaXQgZmlyc3RcbiAgICAgICAgaWYgKHRoaXMuaWNzUmVmcmVzaEludGVydmFsSWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuaWNzUmVmcmVzaEludGVydmFsSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaW50ZXJ2YWxNaW51dGVzID0gdGhpcy5zZXR0aW5ncy5pY3NSZWZyZXNoSW50ZXJ2YWw7XG5cbiAgICAgICAgaWYgKGludGVydmFsTWludXRlcyA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGludGVydmFsTWlsbGlzZWNvbmRzID0gaW50ZXJ2YWxNaW51dGVzICogNjAgKiAxMDAwO1xuXG4gICAgICAgICAgICB0aGlzLmljc1JlZnJlc2hJbnRlcnZhbElkID0gdGhpcy5yZWdpc3RlckludGVydmFsKFxuICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBQZXJpb2RpYyBOb3RlczogQXV0b21hdGljYWxseSByZWZyZXNoaW5nIElDUyBmZWVkIChpbnRlcnZhbDogJHtpbnRlcnZhbE1pbnV0ZXN9IG1pbnV0ZXMpLmApO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gZmluZCB0aGUgdmlldyB0byBjYWxsIGl0cyByZWZyZXNoIG1ldGhvZFxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2aWV3cyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1BFUklPRCk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbGVhZiBvZiB2aWV3cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlYWYudmlldyAmJiBsZWFmLnZpZXcucmVmcmVzaEljc0V2ZW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYudmlldy5yZWZyZXNoSWNzRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBpbnRlcnZhbE1pbGxpc2Vjb25kcylcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIG9udW5sb2FkKCkge1xuICAgICAgICAvLyBDbGVhbiB1cCB3aGVuIHRoZSBwbHVnaW4gaXMgZGlzYWJsZWQuXG4gICAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGVyaW9kLW1vbnRoLXBsdWdpbi1zdHlsZXMnKTtcbiAgICAgICAgaWYgKHN0eWxlRWwpIHN0eWxlRWwucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1BFUklPRCkuZm9yRWFjaChsZWFmID0+IGxlYWYuZGV0YWNoKCkpO1xuXG4gICAgICAgIGlmICh0aGlzLnRoZW1lT2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRoaXMudGhlbWVPYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIH1cblxuICAgIH1cbn1cblxuLyoqXG4gKiBUaGUgc2V0dGluZ3MgdGFiIGNsYXNzIGZvciB0aGUgcGx1Z2luLCByZXNwb25zaWJsZSBmb3IgYnVpbGRpbmcgdGhlIHNldHRpbmdzIFVJLlxuICovXG5jbGFzcyBQZXJpb2RTZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIGNvbnN0cnVjdG9yKGFwcCwgcGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuYWN0aXZlVGFiID0gJ2dlbmVyYWwnO1xuICAgICAgICB0aGlzLmhlYXRtYXBVcGRhdGVUaW1lciA9IG51bGw7XG4gICAgICAgIHRoaXMuYWN0aXZlUHJldmlld01vZGUgPSBudWxsO1xuICAgICAgICB0aGlzLnNjcm9sbFBvc2l0aW9uID0gMDtcbiAgICAgICAgdGhpcy5jb2xvckNsaXBib2FyZCA9IG51bGw7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRUaGVtZUZpbGUgPSBudWxsO1xuICAgICAgICB0aGlzLmN1cnJlbnRUaGVtZURlZmF1bHRzID0geyAuLi5ERUZBVUxUX1NFVFRJTkdTIH07XG4gICAgXG4gICAgfVxuXG4gICAgcmVmcmVzaERpc3BsYXkoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnRFbCkge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxQb3NpdGlvbiA9IHRoaXMuY29udGVudEVsLnNjcm9sbFRvcDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICB9XG5cbiAgICB0cmlnZ2VyRGFzaGJvYXJkUmVmcmVzaCgpIHtcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoJ3BtLWRhc2hib2FyZC1yZWZyZXNoJyk7XG4gICAgfVxuXG4gICAgYXN5bmMgbG9hZEN1cnJlbnRUaGVtZURlZmF1bHRzKCkge1xuICAgICAgICAvLyBJZiBhIHRoZW1lIGlzIGFjdGl2ZSwgdHJ5IHRvIGxvYWQgaXRzIHNldHRpbmdzXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcHBsaWVkVGhlbWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHRoZW1lTmFtZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmFwcGxpZWRUaGVtZTtcbiAgICAgICAgICAgIGNvbnN0IHRoZW1lUGF0aCA9IGAke3RoaXMucGx1Z2luLm1hbmlmZXN0LmRpcn0vdGhlbWVzLyR7dGhlbWVOYW1lfS5qc29uYDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHRoZW1lUGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQodGhlbWVQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGhlbWVTZXR0aW5ncyA9IEpTT04ucGFyc2UoZmlsZUNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBNZXJnZSB0aGVtZSBzZXR0aW5ncyBvdmVyIGJhc2UgZGVmYXVsdHMgdG8gZ2V0IHRoZSBmaW5hbCBkZWZhdWx0c1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRUaGVtZURlZmF1bHRzID0geyAuLi5ERUZBVUxUX1NFVFRJTkdTLCAuLi50aGVtZVNldHRpbmdzIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHRoZW1lIGZpbGUgaXMgbWlzc2luZywgZmFsbCBiYWNrIHRvIGJhc2UgZGVmYXVsdHNcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBBcHBsaWVkIHRoZW1lIGZpbGUgXCIke3RoZW1lTmFtZX0uanNvblwiIG5vdCBmb3VuZC4gVXNpbmcgYmFzZSBkZWZhdWx0cy5gKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50VGhlbWVEZWZhdWx0cyA9IHsgLi4uREVGQVVMVF9TRVRUSU5HUyB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbG9hZGluZyB0aGVtZSBkZWZhdWx0czpcIiwgZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50VGhlbWVEZWZhdWx0cyA9IHsgLi4uREVGQVVMVF9TRVRUSU5HUyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgbm8gdGhlbWUgaXMgYWN0aXZlLCB0aGUgZGVmYXVsdHMgYXJlIGp1c3QgdGhlIGJhc2UgZGVmYXVsdHNcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFRoZW1lRGVmYXVsdHMgPSB7IC4uLkRFRkFVTFRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGhpZGUoKSB7XG4gICAgICAgIC8vIFRoaXMgZnVuY3Rpb24gcnVucyBhdXRvbWF0aWNhbGx5IHdoZW4gdGhlIHVzZXIgY2xvc2VzIHRoZSBzZXR0aW5ncyB0YWIuXG4gICAgICAgIC8vIEdldCBhbGwgb3BlbiB2aWV3cyBvZiB0aGUgY2FsZW5kYXIgdHlwZVxuICAgICAgICBjb25zdCB2aWV3cyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1BFUklPRCk7XG5cbiAgICAgICAgaWYgKHZpZXdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIFRlbGwgZWFjaCBvcGVuIGNhbGVuZGFyIHZpZXcgdG8gcmUtcmVuZGVyIGl0c2VsZlxuICAgICAgICAgICAgZm9yIChjb25zdCBsZWFmIG9mIHZpZXdzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIFBlcmlvZE1vbnRoVmlldykge1xuICAgICAgICAgICAgICAgICAgICAvLyBDYWxsaW5nIHJlbmRlckNhbGVuZGFyKCkgd2lsbCByZWRyYXcgdGhlIHZpZXcgd2l0aCB0aGUgbGF0ZXN0IHNldHRpbmdzXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYudmlldy5yZW5kZXJDYWxlbmRhcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgaGVscGVyIGZ1bmN0aW9uIHRvIHNhdmUgc2V0dGluZ3MgYW5kIHRyaWdnZXIgYSBmdWxsIFVJIHJlZnJlc2ggaW4gYW55IG9wZW4gdmlld3MuXG4gICAgICovXG4gICAgYXN5bmMgc2F2ZUFuZFVwZGF0ZSgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgICB0aGlzLnBsdWdpbi51cGRhdGVTdHlsZXMoKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyRGFzaGJvYXJkUmVmcmVzaCgpO1xuICAgICAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfUEVSSU9EKS5mb3JFYWNoKGxlYWYgPT4ge1xuICAgICAgICAgICAgaWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIFBlcmlvZE1vbnRoVmlldykge1xuICAgICAgICAgICAgICAgIGxlYWYudmlldy5yZWJ1aWxkQW5kUmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgYSBzaW5nbGUgZHJhZ2dhYmxlIGxpc3Qgb2Ygd2lkZ2V0cy5cbiAgICAgKi9cbiAgICByZW5kZXJXaWRnZXRTZXR0aW5ncyhjb250YWluZXJFbCwgdGl0bGUsIHZpc2liaWxpdHlLZXksIG9yZGVyS2V5LCBkZWZhdWx0V2lkZ2V0cykge1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHRpdGxlIH0pO1xuICAgICAgICBjb25zdCBkcmFnZ2FibGVDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3BtLWRyYWdnYWJsZS13aWRnZXQtbGlzdCcpO1xuICAgICAgICBkcmFnZ2FibGVDb250YWluZXIuZGF0YXNldC5vcmRlcktleSA9IG9yZGVyS2V5O1xuICAgICAgICBkcmFnZ2FibGVDb250YWluZXIuZGF0YXNldC50aXRsZSA9IHRpdGxlO1xuXG4gICAgICAgIGxldCBhbGxXaWRnZXRzID0geyAuLi5kZWZhdWx0V2lkZ2V0cyB9O1xuXG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3NbdmlzaWJpbGl0eUtleV0pIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzW3Zpc2liaWxpdHlLZXldID0ge307XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmlzaWJpbGl0eVNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbdmlzaWJpbGl0eUtleV07XG5cbiAgICAgICAgaWYgKHZpc2liaWxpdHlLZXkgPT09ICdjcmVhdGlvbkRhc2hib2FyZFdpZGdldHMnKSB7XG4gICAgICAgICAgICAodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tSGVhdG1hcHMgfHwgW10pLmZvckVhY2goKGhlYXRtYXAsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgYWxsV2lkZ2V0c1tgY3VzdG9tLSR7aW5kZXh9YF0gPSB7IG5hbWU6IGAke2hlYXRtYXAubmFtZX0gKEN1c3RvbSBIZWF0bWFwICR7aW5kZXggKyAxfSlgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzZXR0aW5nc1dlcmVVcGRhdGVkID0gZmFsc2U7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGFsbFdpZGdldHMpIHtcbiAgICAgICAgICAgIGlmICh2aXNpYmlsaXR5U2V0dGluZ3Nba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmlzaWJpbGl0eVNldHRpbmdzW2tleV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNldHRpbmdzV2VyZVVwZGF0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzZXR0aW5nc1dlcmVVcGRhdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBnZXRGaW5hbE9yZGVyID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2F2ZWRPcmRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzW29yZGVyS2V5XSB8fCBbXTtcbiAgICAgICAgICAgIGNvbnN0IGFsbEtleXMgPSBPYmplY3Qua2V5cyhhbGxXaWRnZXRzKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbmFsT3JkZXIgPSBbLi4uc2F2ZWRPcmRlcl07XG4gICAgICAgICAgICBhbGxLZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWZpbmFsT3JkZXIuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBmaW5hbE9yZGVyLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBmaW5hbE9yZGVyLmZpbHRlcihrZXkgPT4gYWxsV2lkZ2V0c1trZXldKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZmluYWxPcmRlciA9IGdldEZpbmFsT3JkZXIoKTtcblxuICAgICAgICBmaW5hbE9yZGVyLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHdpZGdldEVsID0gZHJhZ2dhYmxlQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3BtLWRyYWdnYWJsZS13aWRnZXQtaXRlbScgfSk7XG4gICAgICAgICAgICB3aWRnZXRFbC5kYXRhc2V0LndpZGdldEtleSA9IGtleTtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBhbGxXaWRnZXRzW2tleV0/Lm5hbWUgfHwgJ1Vua25vd24gV2lkZ2V0JztcbiAgICAgICAgICAgIGNvbnN0IGRyYWdIYW5kbGUgPSB3aWRnZXRFbC5jcmVhdGVEaXYoeyBjbHM6ICdwbS1kcmFnLWhhbmRsZScgfSk7XG4gICAgICAgICAgICBzZXRJY29uKGRyYWdIYW5kbGUsICdncmlwLXZlcnRpY2FsJyk7XG4gICAgICAgICAgICBjb25zdCBzZXR0aW5nV3JhcHBlciA9IHdpZGdldEVsLmNyZWF0ZURpdih7IGNsczogJ3BtLXNldHRpbmctd3JhcHBlcicgfSk7XG4gICAgICAgICAgICBuZXcgU2V0dGluZyhzZXR0aW5nV3JhcHBlcilcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShuYW1lKVxuICAgICAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh2aXNpYmlsaXR5U2V0dGluZ3Nba2V5XSA9PT0gdHJ1ZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHlTZXR0aW5nc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGRyYWdIYW5kbGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmFnZ2VkSXRlbSA9IHdpZGdldEVsO1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ2dlZEl0ZW0uYWRkQ2xhc3MoJ2RyYWdnaW5nJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIuY2xhc3NOYW1lID0gJ3BtLWRyYWctcGxhY2Vob2xkZXInO1xuICAgICAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5kcmFnZ2VkSXRlbS5vZmZzZXRIZWlnaHR9cHhgO1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ2dlZEl0ZW0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5wbGFjZWhvbGRlciwgdGhpcy5kcmFnZ2VkSXRlbSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cblxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhbiByZ2JhKCkgc3RyaW5nIGludG8gYSBoZXggY29sb3IgYW5kIGFuIGFscGhhIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZ2JhU3RyaW5nIFRoZSBpbnB1dCBzdHJpbmcgKGUuZy4sIFwicmdiYSgyNTUsIDE2NSwgMCwgMC40KVwiKS5cbiAgICAgKiBAcmV0dXJucyB7e2NvbG9yOiBzdHJpbmcsIGFscGhhOiBudW1iZXJ9fVxuICAgICAqL1xuICAgIHBhcnNlUmdiYShyZ2JhU3RyaW5nKSB7XG4gICAgICAgIGlmICghcmdiYVN0cmluZykgcmV0dXJuIHsgY29sb3I6ICcjMDAwMDAwJywgYWxwaGE6IDEgfTtcbiAgICAgICAgY29uc3QgbWF0Y2ggPSByZ2JhU3RyaW5nLm1hdGNoKC9yZ2JhP1xcKChcXGQrKSxcXHMqKFxcZCspLFxccyooXFxkKykoPzosXFxzKihbXFxkLl0rKSk/XFwpLyk7XG4gICAgICAgIGlmICghbWF0Y2gpIHJldHVybiB7IGNvbG9yOiAnIzAwMDAwMCcsIGFscGhhOiAxIH07XG4gICAgICAgIGNvbnN0IHRvSGV4ID0gKGMpID0+ICgnMCcgKyBwYXJzZUludChjLCAxMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMik7XG4gICAgICAgIGNvbnN0IGNvbG9yID0gYCMke3RvSGV4KG1hdGNoWzFdKX0ke3RvSGV4KG1hdGNoWzJdKX0ke3RvSGV4KG1hdGNoWzNdKX1gO1xuICAgICAgICBjb25zdCBhbHBoYSA9IG1hdGNoWzRdICE9PSB1bmRlZmluZWQgPyBwYXJzZUZsb2F0KG1hdGNoWzRdKSA6IDE7XG4gICAgICAgIHJldHVybiB7IGNvbG9yLCBhbHBoYSB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJ1aWxkcyBhbiByZ2JhKCkgc3RyaW5nIGZyb20gYSBoZXggY29sb3IgYW5kIGFuIGFscGhhIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBoZXggVGhlIGhleCBjb2xvciBzdHJpbmcgKGUuZy4sIFwiI2ZmYTUwMFwiKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYWxwaGEgVGhlIGFscGhhIHZhbHVlICgwIHRvIDEpLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSByZ2JhIHN0cmluZy5cbiAgICAgKi9cbiAgICBidWlsZFJnYmEoaGV4LCBhbHBoYSkge1xuICAgICAgICBjb25zdCByID0gcGFyc2VJbnQoaGV4LnNsaWNlKDEsIDMpLCAxNik7XG4gICAgICAgIGNvbnN0IGcgPSBwYXJzZUludChoZXguc2xpY2UoMywgNSksIDE2KTtcbiAgICAgICAgY29uc3QgYiA9IHBhcnNlSW50KGhleC5zbGljZSg1LCA3KSwgMTYpO1xuICAgICAgICByZXR1cm4gYHJnYmEoJHtyfSwgJHtnfSwgJHtifSwgJHthbHBoYS50b0ZpeGVkKDIpfSlgO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjdXN0b20gc2V0dGluZyBjb21wb25lbnQgd2l0aCBhIGNvbG9yIHBpY2tlciBhbmQgYW4gYWxwaGEgc2xpZGVyLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBzZXR0aW5nIG5hbWUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRlc2MgVGhlIHNldHRpbmcgZGVzY3JpcHRpb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNldHRpbmdLZXkgVGhlIGtleSBpbiB0aGUgc2V0dGluZ3Mgb2JqZWN0IHRvIG1vZGlmeS5cbiAgICAgKi9cbiAgICBjcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBuYW1lLCBkZXNjLCBzZXR0aW5nS2V5KSB7XG4gICAgICAgIC8vIFRoZXNlIHdpbGwgbGl2ZSBpbnNpZGUgdGhpcyBmdW5jdGlvbiwgc28gdGhleSBkb24ndCBwb2xsdXRlIHRoZSBjbGFzcy5cbiAgICAgICAgY29uc3QgZ2V0TmVzdGVkVmFsdWUgPSAob2JqLCBwYXRoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXBhdGgpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAvLyBUaGlzIHJlZ2V4IGNvbnZlcnRzIHBhdGhbJ2tleSddIG9yIHBhdGhbMF0gdG8gcGF0aC5rZXkgb3IgcGF0aC4wXG4gICAgICAgICAgICBjb25zdCBrZXlzID0gcGF0aC5yZXBsYWNlKC9cXFsoXFx3KylcXF0vZywgJy4kMScpLnNwbGl0KCcuJyk7XG4gICAgICAgICAgICByZXR1cm4ga2V5cy5yZWR1Y2UoKG8sIGspID0+IChvIHx8IHt9KVtrXSwgb2JqKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBzZXROZXN0ZWRWYWx1ZSA9IChvYmosIHBhdGgsIHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXBhdGgpIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IGtleXMgPSBwYXRoLnJlcGxhY2UoL1xcWyhcXHcrKVxcXS9nLCAnLiQxJykuc3BsaXQoJy4nKTtcbiAgICAgICAgICAgIGNvbnN0IGxhc3RLZXkgPSBrZXlzLnBvcCgpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0ga2V5cy5yZWR1Y2UoKG8sIGspID0+IG9ba10gPSBvW2tdIHx8IHt9LCBvYmopO1xuICAgICAgICAgICAgdGFyZ2V0W2xhc3RLZXldID0gdmFsdWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3Qgc2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUobmFtZSlcbiAgICAgICAgICAgIC5zZXREZXNjKGRlc2MpO1xuXG4gICAgICAgIGxldCBjb2xvclBpY2tlcjtcbiAgICAgICAgbGV0IHNsaWRlcjtcblxuICAgICAgICAvLyBVc2UgdGhlIGhlbHBlciB0byBnZXQgdGhlIGluaXRpYWwgdmFsdWUsIHdoZXRoZXIgaXQncyBuZXN0ZWQgb3Igbm90XG4gICAgICAgIGNvbnN0IGluaXRpYWxWYWx1ZSA9IGdldE5lc3RlZFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLCBzZXR0aW5nS2V5KSB8fCBnZXROZXN0ZWRWYWx1ZSh0aGlzLmN1cnJlbnRUaGVtZURlZmF1bHRzLCBzZXR0aW5nS2V5KTtcbiAgICAgICAgY29uc3QgeyBjb2xvcjogaW5pdGlhbENvbG9yLCBhbHBoYTogaW5pdGlhbEFscGhhIH0gPSB0aGlzLnBhcnNlUmdiYShpbml0aWFsVmFsdWUpO1xuXG4gICAgICAgIHNldHRpbmcuYWRkQ29sb3JQaWNrZXIocGlja2VyID0+IHtcbiAgICAgICAgICAgIGNvbG9yUGlja2VyID0gcGlja2VyO1xuICAgICAgICAgICAgcGlja2VyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKGluaXRpYWxDb2xvcilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKG5ld0NvbG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRBbHBoYSA9IHNsaWRlciA/IHNsaWRlci5nZXRWYWx1ZSgpIDogMTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UmdiYSA9IHRoaXMuYnVpbGRSZ2JhKG5ld0NvbG9yLCBjdXJyZW50QWxwaGEpO1xuICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIGhlbHBlciB0byBzZXQgdGhlIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgIHNldE5lc3RlZFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLCBzZXR0aW5nS2V5LCBuZXdSZ2JhKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBpY2tlci5jb2xvckVsKSBwaWNrZXIuY29sb3JFbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBuZXdSZ2JhO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2V0dGluZy5hZGRTbGlkZXIoc2xpZGVyQ29tcG9uZW50ID0+IHtcbiAgICAgICAgICAgIHNsaWRlciA9IHNsaWRlckNvbXBvbmVudDtcbiAgICAgICAgICAgIHNsaWRlclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMCwgMSwgMC4wNSlcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoaW5pdGlhbEFscGhhKVxuICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIChuZXdBbHBoYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50Q29sb3IgPSBjb2xvclBpY2tlciA/IGNvbG9yUGlja2VyLmdldFZhbHVlKCkgOiAnIzAwMDAwMCc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1JnYmEgPSB0aGlzLmJ1aWxkUmdiYShjdXJyZW50Q29sb3IsIG5ld0FscGhhKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlIHRoZSBoZWxwZXIgdG8gc2V0IHRoZSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBzZXROZXN0ZWRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncywgc2V0dGluZ0tleSwgbmV3UmdiYSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xvclBpY2tlciAmJiBjb2xvclBpY2tlci5jb2xvckVsKSBjb2xvclBpY2tlci5jb2xvckVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG5ld1JnYmE7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoY29sb3JQaWNrZXIgJiYgY29sb3JQaWNrZXIuY29sb3JFbCkge1xuICAgICAgICAgICAgY29sb3JQaWNrZXIuY29sb3JFbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBpbml0aWFsVmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAtLS0gQlVUVE9OUyAtLS1cbiAgICAgICAgc2V0dGluZy5hZGRFeHRyYUJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgYnV0dG9uXG4gICAgICAgICAgICAgICAgLnNldEljb24oJ2NvcHknKVxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdDb3B5IGNvbG9yIGFuZCB0cmFuc3BhcmVuY3knKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlIHRoZSBoZWxwZXIgdG8gZ2V0IHRoZSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbG9yQ2xpcGJvYXJkID0gZ2V0TmVzdGVkVmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MsIHNldHRpbmdLZXkpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdDb2xvciBjb3BpZWQgdG8gY2xpcGJvYXJkLicpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBzZXR0aW5nLmFkZEV4dHJhQnV0dG9uKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0SWNvbigncGFzdGUnKVxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdQYXN0ZSBjb2xvciBhbmQgdHJhbnNwYXJlbmN5JylcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jb2xvckNsaXBib2FyZCkgeyBuZXcgTm90aWNlKCdDbGlwYm9hcmQgaXMgZW1wdHkuJyk7IHJldHVybjsgfVxuICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIGhlbHBlciB0byBzZXQgdGhlIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgIHNldE5lc3RlZFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLCBzZXR0aW5nS2V5LCB0aGlzLmNvbG9yQ2xpcGJvYXJkKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGNvbG9yLCBhbHBoYSB9ID0gdGhpcy5wYXJzZVJnYmEodGhpcy5jb2xvckNsaXBib2FyZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xvclBpY2tlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JQaWNrZXIuc2V0VmFsdWUoY29sb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbG9yUGlja2VyLmNvbG9yRWwpIGNvbG9yUGlja2VyLmNvbG9yRWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5jb2xvckNsaXBib2FyZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoc2xpZGVyKSBzbGlkZXIuc2V0VmFsdWUoYWxwaGEpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2V0dGluZy5hZGRFeHRyYUJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgYnV0dG9uXG4gICAgICAgICAgICAgICAgLnNldEljb24oJ3JvdGF0ZS1jY3cnKVxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdSZXNldCB0byBkZWZhdWx0JylcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgaGVscGVyIHRvIGdldCB0aGUgZGVmYXVsdCB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSBnZXROZXN0ZWRWYWx1ZSh0aGlzLmN1cnJlbnRUaGVtZURlZmF1bHRzLCBzZXR0aW5nS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlIHRoZSBoZWxwZXIgdG8gc2V0IHRoZSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBzZXROZXN0ZWRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncywgc2V0dGluZ0tleSwgZGVmYXVsdFZhbHVlKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGNvbG9yLCBhbHBoYSB9ID0gdGhpcy5wYXJzZVJnYmEoZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbG9yUGlja2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvclBpY2tlci5zZXRWYWx1ZShjb2xvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sb3JQaWNrZXIuY29sb3JFbCkgY29sb3JQaWNrZXIuY29sb3JFbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNsaWRlcikgc2xpZGVyLnNldFZhbHVlKGFscGhhKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2ltcGxlIHBhdGggc3VnZ2VzdGlvbiBwb3B1cCBmb3IgYSB0ZXh0IGlucHV0IGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtIVE1MSW5wdXRFbGVtZW50fSBpbnB1dEVsIFRoZSBpbnB1dCBlbGVtZW50IHRvIGF0dGFjaCB0aGUgc3VnZ2VzdGVyIHRvLlxuICAgICAqIEBwYXJhbSB7KHF1ZXJ5OiBzdHJpbmcpID0+IHN0cmluZ1tdfSBnZXRTdWdnZXN0aW9ucyBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGxpc3Qgb2Ygc3VnZ2VzdGlvbiBzdHJpbmdzIGJhc2VkIG9uIGEgcXVlcnkuXG4gICAgICovXG4gICAgY3JlYXRlUGF0aFN1Z2dlc3RlcihpbnB1dEVsLCBnZXRTdWdnZXN0aW9ucykge1xuICAgICAgICBjb25zdCBzdWdnZXN0aW9uRWwgPSBjcmVhdGVEaXYoeyBjbHM6ICdjdXN0b20tc3VnZ2VzdGlvbi1jb250YWluZXInIH0pO1xuICAgICAgICBjb25zdCBwYXJlbnRDb250YWluZXIgPSBpbnB1dEVsLnBhcmVudEVsZW1lbnQ7XG5cbiAgICAgICAgLy8gMS4gU2V0IHVwIHRoZSBwb3NpdGlvbmluZyBjb250ZXh0XG4gICAgICAgIHBhcmVudENvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgIHN1Z2dlc3Rpb25FbC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIHN1Z2dlc3Rpb25FbC5zdHlsZS50b3AgPSAnMTAwJSc7IC8vIFBvc2l0aW9uIGRpcmVjdGx5IGJlbG93IHRoZSBpbnB1dFxuICAgICAgICBzdWdnZXN0aW9uRWwuc3R5bGUubGVmdCA9ICcwJztcbiAgICAgICAgc3VnZ2VzdGlvbkVsLnN0eWxlLnpJbmRleCA9ICcxMDAnO1xuXG4gICAgICAgIC8vIDIuIFNldCBmbGV4aWJsZSB3aWR0aCBwcm9wZXJ0aWVzXG4gICAgICAgIC8vIEJlIGF0IGxlYXN0IGFzIHdpZGUgYXMgdGhlIGlucHV0J3MgY29udGFpbmVyLlxuICAgICAgICBzdWdnZXN0aW9uRWwuc3R5bGUubWluV2lkdGggPSBgJHtwYXJlbnRDb250YWluZXIub2Zmc2V0V2lkdGh9cHhgO1xuICAgICAgICAvLyBBbGxvdyB0aGUgd2lkdGggdG8gZ3JvdyBhdXRvbWF0aWNhbGx5IHdpdGggdGhlIGNvbnRlbnQuXG4gICAgICAgIHN1Z2dlc3Rpb25FbC5zdHlsZS53aWR0aCA9ICdhdXRvJztcbiAgICAgICAgLy8gUHJldmVudCBpdCBmcm9tIGJlY29taW5nIGV4Y2Vzc2l2ZWx5IHdpZGUgb24gbGFyZ2Ugc2NyZWVucy5cbiAgICAgICAgc3VnZ2VzdGlvbkVsLnN0eWxlLm1heFdpZHRoID0gJzUwMHB4JztcblxuICAgICAgICBzdWdnZXN0aW9uRWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgcGFyZW50Q29udGFpbmVyLmFwcGVuZENoaWxkKHN1Z2dlc3Rpb25FbCk7XG5cbiAgICAgICAgY29uc3Qgc2hvd1N1Z2dlc3Rpb25zID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcXVlcnkgPSBpbnB1dEVsLnZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBjb25zdCBzdWdnZXN0aW9ucyA9IGdldFN1Z2dlc3Rpb25zKHF1ZXJ5KTtcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25FbC5lbXB0eSgpO1xuXG4gICAgICAgICAgICBpZiAoc3VnZ2VzdGlvbnMubGVuZ3RoID09PSAwIHx8IHF1ZXJ5LnRyaW0oKSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICBzdWdnZXN0aW9uRWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN1Z2dlc3Rpb25FbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zLnNsaWNlKDAsIDEwKS5mb3JFYWNoKHBhdGggPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBzdWdnZXN0aW9uRWwuY3JlYXRlRGl2KHsgY2xzOiAnY3VzdG9tLXN1Z2dlc3Rpb24taXRlbScsIHRleHQ6IHBhdGggfSk7XG5cbiAgICAgICAgICAgICAgICAvLyAtLS0gU3R5bGUgZm9yIFRleHQgV3JhcHBpbmcgLS0tXG4gICAgICAgICAgICAgICAgLy8gQWxsb3cgbG9uZyBmb2xkZXIgcGF0aHMgdG8gd3JhcCBvbnRvIG11bHRpcGxlIGxpbmVzLlxuICAgICAgICAgICAgICAgIGl0ZW0uc3R5bGUud2hpdGVTcGFjZSA9ICdub3JtYWwnO1xuICAgICAgICAgICAgICAgIC8vIEJyZWFrIHZlcnkgbG9uZyB3b3JkcyB0byBwcmV2ZW50IGhvcml6b250YWwgb3ZlcmZsb3cuXG4gICAgICAgICAgICAgICAgaXRlbS5zdHlsZS53b3JkQnJlYWsgPSAnYnJlYWstYWxsJztcbiAgICAgICAgICAgICAgICAvLyAtLS0gRW5kIC0tLVxuXG4gICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0RWwudmFsdWUgPSBwYXRoO1xuICAgICAgICAgICAgICAgICAgICBpbnB1dEVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdpbnB1dCcpKTtcbiAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbkVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0Jywgc2hvd1N1Z2dlc3Rpb25zKTtcbiAgICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHNob3dTdWdnZXN0aW9ucyk7XG4gICAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsICgpID0+IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgc3VnZ2VzdGlvbkVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH0sIDE1MCkpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNldHRpbmdzIHNlY3Rpb24gZm9yIG1hbmFnaW5nIGEgbGlzdCBvZiBpZ25vcmVkIGZvbGRlciBwYXRocy5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXJFbCBUaGUgcGFyZW50IGNvbnRhaW5lciBmb3IgdGhpcyBzZXR0aW5nIHNlY3Rpb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIGhlYWRpbmcgbmFtZSBmb3IgdGhlIHNlY3Rpb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRlc2MgVGhlIGRlc2NyaXB0aW9uIGZvciB0aGUgc2VjdGlvbi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2V0dGluZ0tleSBUaGUga2V5IGluIHRoZSBzZXR0aW5ncyBvYmplY3QgZm9yIHRoZSBpZ25vcmVkIGZvbGRlciBhcnJheS5cbiAgICAgKi9cbiAgICBjcmVhdGVJZ25vcmVkRm9sZGVyTGlzdChjb250YWluZXJFbCwgbmFtZSwgZGVzYywgc2V0dGluZ0tleSkge1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShuYW1lKS5zZXREZXNjKGRlc2MpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgY29uc3QgaWdub3JlZEZvbGRlcnMgPSB0aGlzLnBsdWdpbi5zZXR0aW5nc1tzZXR0aW5nS2V5XTtcbiAgICAgICAgaWYgKGlnbm9yZWRGb2xkZXJzICYmIGlnbm9yZWRGb2xkZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlnbm9yZWRGb2xkZXJzLmZvckVhY2goKGZvbGRlciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShmb2xkZXIpLmFkZEJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0SWNvbihcInRyYXNoXCIpLnNldFRvb2x0aXAoXCJSZW1vdmUgZm9sZGVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Nbc2V0dGluZ0tleV0uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hEaXNwbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdObyBmb2xkZXJzIGFyZSBiZWluZyBpZ25vcmVkLicsIGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWRkU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKTtcbiAgICAgICAgbGV0IHRleHRJbnB1dDtcbiAgICAgICAgYWRkU2V0dGluZy5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICAgICAgdGV4dElucHV0ID0gdGV4dDtcbiAgICAgICAgICAgIGNvbnN0IGdldEZvbGRlcnMgPSAocXVlcnkpID0+IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkuZmlsdGVyKGYgPT4gZiBpbnN0YW5jZW9mIFRGb2xkZXIgJiYgKCFxdWVyeSB8fCBmLnBhdGgudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkpKS5tYXAoZiA9PiBmLnBhdGgpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVQYXRoU3VnZ2VzdGVyKHRleHQuaW5wdXRFbCwgZ2V0Rm9sZGVycyk7XG4gICAgICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKFwiRW50ZXIgZm9sZGVyIHBhdGggdG8gaWdub3JlLi4uXCIpO1xuICAgICAgICB9KS5hZGRCdXR0b24oYnV0dG9uID0+IHtcbiAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KFwiQWRkXCIpLnNldFRvb2x0aXAoXCJBZGQgdGhpcyBmb2xkZXIgdG8gdGhlIGlnbm9yZSBsaXN0XCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdGb2xkZXIgPSB0ZXh0SW5wdXQuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0ZvbGRlciAmJiAhdGhpcy5wbHVnaW4uc2V0dGluZ3Nbc2V0dGluZ0tleV0uaW5jbHVkZXMobmV3Rm9sZGVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Nbc2V0dGluZ0tleV0ucHVzaChuZXdGb2xkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hEaXNwbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZGlzcGxheSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRDdXJyZW50VGhlbWVEZWZhdWx0cygpO1xuXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgbWFpbiB0d28tY29sdW1uIGxheW91dFxuICAgICAgICBjb25zdCBzZXR0aW5nc0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ3BlcmlvZC1zZXR0aW5ncy1jb250YWluZXInIH0pO1xuICAgICAgICBjb25zdCBuYXZFbCA9IHNldHRpbmdzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3BlcmlvZC1zZXR0aW5ncy1uYXYnIH0pO1xuICAgICAgICB0aGlzLmNvbnRlbnRFbCA9IHNldHRpbmdzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3BlcmlvZC1zZXR0aW5ncy1jb250ZW50JyB9KTsgLy8gQXNzaWduIGNvbnRlbnQgYXJlYSB0byB0aGlzLmNvbnRlbnRFbFxuXG4gICAgICAgIGNvbnN0IHRhYnMgPSB7XG4gICAgICAgICAgICBnZW5lcmFsOiBcIkdlbmVyYWwgRGlzcGxheVwiLFxuICAgICAgICAgICAgZnVuY3Rpb25hbDogXCJDYWxlbmRhciBGdW5jdGlvbmFsXCIsXG4gICAgICAgICAgICBwb3B1cDogXCJQb3B1cCBDb250cm9sc1wiLFxuICAgICAgICAgICAgZG90czogXCJEb3QgSW5kaWNhdG9yc1wiLFxuICAgICAgICAgICAgd2Vla2x5Tm90ZXM6IFwiV2Vla2x5IE5vdGVzXCIsXG4gICAgICAgICAgICB0YXNrc0luZGljYXRvcjogXCJUYXNrIEluZGljYXRvcnNcIixcbiAgICAgICAgICAgIHRhYnM6IFwiR2VuZXJhbCBUYWJcIixcbiAgICAgICAgICAgIHNjcmF0Y2hwYWQ6IFwiU2NyYXRjaFBhZCBUYWJcIixcbiAgICAgICAgICAgIG5vdGVzOiBcIk5vdGVzIFRhYlwiLFxuICAgICAgICAgICAgcGlubmVkOiAnUGlubmVkIE5vdGVzIFRhYicsXG4gICAgICAgICAgICBhc3NldHM6IFwiQXNzZXRzIFRhYlwiLFxuICAgICAgICAgICAgdGFza3M6IFwiVGFza3MgVGFiXCIsXG4gICAgICAgICAgICBkYXNoYm9hcmQ6ICdEYXNoYm9hcmQgVGFiJyxcbiAgICAgICAgICAgIHRoZW1lczogXCJUaGVtZXNcIixcbiAgICAgICAgICAgIGltcG9ydEV4cG9ydDogXCJJbXBvcnQgLyBFeHBvcnRcIixcbiAgICAgICAgICAgIHN0YXJ0SGVyZTogXCJIZWxwXCIsXG4gICAgICAgICAgICBhYm91dDogXCJBYm91dFwiXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBuYXZpZ2F0aW9uIGJ1dHRvbnMgb24gdGhlIGxlZnRcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBsYWJlbF0gb2YgT2JqZWN0LmVudHJpZXModGFicykpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IG5hdkVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6IGxhYmVsIH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlVGFiID09PSBrZXkpIHtcbiAgICAgICAgICAgICAgICBidXR0b24uYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlVGFiID0ga2V5O1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpOyAvLyBSZS1yZW5kZXIgdGhlIHdob2xlIHRhYiBvbiBjbGlja1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBOb3csIHJlbmRlciB0aGUgY29udGVudCBmb3IgdGhlIGFjdGl2ZSB0YWIgaW50byB0aGlzLmNvbnRlbnRFbFxuICAgICAgICB0aGlzLnJlbmRlckNvbnRlbnRGb3JBY3RpdmVUYWIoKTtcbiAgICB9XG5cbiAgICAvLyBGdW5jdGlvbiB0byByZW5kZXIgdGhlIGRyYWdnYWJsZSBsaXN0IG9mIHBpbm5lZCBub3Rlc1xuICAgIGFzeW5jIHJlbmRlckRyYWdnYWJsZVBpbm5lZE5vdGVzKGNvbnRhaW5lcikge1xuICAgICAgICBjb250YWluZXIuZW1wdHkoKTtcblxuICAgICAgICBjb25zdCBwaW5WYWx1ZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnBpblRhZy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBhbGxNYXJrZG93bkZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuXG4gICAgICAgIC8vIEZpbHRlciBmb3IgcGlubmVkIG5vdGVzICh1c2luZyBsb2dpYylcbiAgICAgICAgY29uc3QgcGlubmVkTm90ZXMgPSBhbGxNYXJrZG93bkZpbGVzLmZpbHRlcihmaWxlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgICAgICBpZiAoIWNhY2hlKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIHRhZ3NcbiAgICAgICAgICAgIGNvbnN0IGhhc1BpblRhZyA9IGNhY2hlLnRhZ3M/LnNvbWUodGFnID0+IHRhZy50YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhwaW5WYWx1ZSkpO1xuICAgICAgICAgICAgaWYgKGhhc1BpblRhZykgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGZyb250bWF0dGVyXG4gICAgICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IGNhY2hlLmZyb250bWF0dGVyO1xuICAgICAgICAgICAgaWYgKGZyb250bWF0dGVyKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBmcm9udG1hdHRlcltrZXldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBpblZhbHVlKSkgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5zb21lKGl0ZW0gPT4gdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnICYmIGl0ZW0udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhwaW5WYWx1ZSkpKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGN1c3RvbU9yZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucGlubmVkTm90ZXNDdXN0b21PcmRlciB8fCBbXTtcblxuICAgICAgICAvLyBTb3J0IHRoZSBub3RlcyBiYXNlZCBvbiB0aGUgc2F2ZWQgY3VzdG9tIG9yZGVyLCB3aXRoIGEgZmFsbGJhY2sgZm9yIG5ldyBub3Rlc1xuICAgICAgICBwaW5uZWROb3Rlcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbmRleEEgPSBjdXN0b21PcmRlci5pbmRleE9mKGEucGF0aCk7XG4gICAgICAgICAgICBjb25zdCBpbmRleEIgPSBjdXN0b21PcmRlci5pbmRleE9mKGIucGF0aCk7XG5cbiAgICAgICAgICAgIGlmIChpbmRleEEgPT09IC0xICYmIGluZGV4QiA9PT0gLTEpIHJldHVybiBhLmJhc2VuYW1lLmxvY2FsZUNvbXBhcmUoYi5iYXNlbmFtZSk7XG4gICAgICAgICAgICBpZiAoaW5kZXhBID09PSAtMSkgcmV0dXJuIDE7XG4gICAgICAgICAgICBpZiAoaW5kZXhCID09PSAtMSkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4QSAtIGluZGV4QjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGRyYWdnYWJsZSBlbGVtZW50c1xuICAgICAgICBwaW5uZWROb3Rlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXRlbUVsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2RyYWdnYWJsZS1pdGVtJyB9KTtcbiAgICAgICAgICAgIGl0ZW1FbC5kcmFnZ2FibGUgPSB0cnVlO1xuICAgICAgICAgICAgaXRlbUVsLmRhdGFzZXQuZmlsZVBhdGggPSBmaWxlLnBhdGg7XG5cbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZSA9IGl0ZW1FbC5jcmVhdGVEaXYoeyBjbHM6ICdkcmFnLWhhbmRsZScgfSk7XG4gICAgICAgICAgICBzZXRJY29uKGhhbmRsZSwgJ2dyaXAtdmVydGljYWwnKTtcbiAgICAgICAgICAgIGl0ZW1FbC5jcmVhdGVTcGFuKHsgdGV4dDogZmlsZS5iYXNlbmFtZSB9KTtcblxuICAgICAgICAgICAgLy8gRHJhZy1hbmQtRHJvcCBFdmVudCBMaXN0ZW5lcnNcbiAgICAgICAgICAgIGl0ZW1FbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgIGl0ZW1FbC5jbGFzc0xpc3QuYWRkKCdkcmFnZ2luZycpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGl0ZW1FbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGl0ZW1FbC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnZ2luZycpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGl0ZW1FbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRyYWdnaW5nSXRlbSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZHJhZ2dpbmcnKTtcbiAgICAgICAgICAgICAgICBpZiAoZHJhZ2dpbmdJdGVtICYmIGRyYWdnaW5nSXRlbSAhPT0gaXRlbUVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBpdGVtRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQWZ0ZXIgPSBlLmNsaWVudFkgPiByZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWZ0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1FbC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkcmFnZ2luZ0l0ZW0sIGl0ZW1FbC5uZXh0U2libGluZyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtRWwucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZHJhZ2dpbmdJdGVtLCBpdGVtRWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNhdmUgdGhlIG5ldyBvcmRlciBvbiBkcm9wIChieSBsaXN0ZW5pbmcgb24gdGhlIGNvbnRhaW5lcilcbiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdPcmRlciA9IEFycmF5LmZyb20oY29udGFpbmVyLmNoaWxkcmVuKS5tYXAoY2hpbGQgPT4gY2hpbGQuZGF0YXNldC5maWxlUGF0aCk7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5waW5uZWROb3Rlc0N1c3RvbU9yZGVyID0gbmV3T3JkZXI7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0N1c3RvbSBwaW5uZWQgb3JkZXIgc2F2ZWQhJyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlckNvbnRlbnRGb3JBY3RpdmVUYWIoKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIHN3aXRjaCAodGhpcy5hY3RpdmVUYWIpIHtcbiAgICAgICAgICAgIGNhc2UgJ2dlbmVyYWwnOlxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyR2VuZXJhbFNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdmdW5jdGlvbmFsJzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckZ1bmN0aW9uYWxTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncG9wdXAnOlxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyUG9wdXBTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZG90cyc6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJEb3RzU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3dlZWtseU5vdGVzJzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcldlZWtseU5vdGVzU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3Rhc2tzSW5kaWNhdG9yJzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclRhc2tJbmRpY2F0b3JTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndGFicyc6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJUYWJzU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3NjcmF0Y2hwYWQnOlxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2NyYXRjaHBhZFNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdub3Rlcyc6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJOb3Rlc1NldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdwaW5uZWQnOlxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyUGlubmVkTm90ZXNTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYXNzZXRzJzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckFzc2V0c1NldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd0YXNrcyc6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJUYXNrc1NldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdkYXNoYm9hcmQnOlxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRGFzaGJvYXJkU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3RoZW1lcyc6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJUaGVtZXNTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnaW1wb3J0RXhwb3J0JzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckltcG9ydEV4cG9ydFRhYigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnc3RhcnRIZXJlJzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclN0YXJ0SGVyZVRhYigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYWJvdXQnOlxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQWJvdXRUYWIoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIC0tLSBSRU5ERVIgTUVUSE9EUyBGT1IgRUFDSCBUQUIgLS0tXG4gICAgcmVuZGVyR2VuZXJhbFNldHRpbmdzKCkge1xuICAgICAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGVudEVsO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkdlbmVyYWwgRGlzcGxheSBTZXR0aW5nc1wiIH0pO1xuXG4gICAgICAgIC8vIC0tLSBUaXRsZXMgJiBIZWFkZXJzIFNlY3Rpb24gLS0tXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiVGl0bGVzICYgSGVhZGVyc1wiKS5zZXRIZWFkaW5nKCk7XG4gICAgICAgIGNvbnN0IG1vbnRoVGl0bGVTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJNb250aCB0aXRsZSBmb3JtYXRcIik7XG4gICAgICAgIG1vbnRoVGl0bGVTZXR0aW5nLmRlc2NFbC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICBTZXQgdGhlIGZvcm1hdCBmb3IgdGhlIGNhbGVuZGFyJ3MgbW9udGggdGl0bGUuIFVzZXMgPGEgaHJlZj1cImh0dHBzOi8vbW9tZW50anMuY29tL2RvY3MvIy9kaXNwbGF5aW5nL2Zvcm1hdC9cIj5tb21lbnQuanM8L2E+IGZvcm1hdCBzdHJpbmdzLCBlLmcuXG4gICAgICAgICAgICA8YnI+PGNvZGU+WVlZWTwvY29kZT46IDQtZGlnaXQgeWVhciAoZS5nLiwgMjAyNSlcbiAgICAgICAgICAgIDxicj48Y29kZT5ZWTwvY29kZT46IDItZGlnaXQgeWVhciAoZS5nLiwgMjUpXG4gICAgICAgICAgICA8YnI+PGNvZGU+TU1NTTwvY29kZT46IEZ1bGwgbW9udGggbmFtZSAoZS5nLiwgU2VwdGVtYmVyKVxuICAgICAgICAgICAgPGJyPjxjb2RlPk1NTTwvY29kZT46IFNob3J0IG1vbnRoIG5hbWUgKGUuZy4sIFNlcClcbiAgICAgICAgICAgIDxicj48Y29kZT5NTTwvY29kZT46IDItZGlnaXQgbW9udGggKGUuZy4sIDA5KVxuICAgICAgICAgICAgPGJyPjxjb2RlPk08L2NvZGU+OiBNb250aCBudW1iZXIgKGUuZy4sIDkpXG4gICAgICAgIGA7XG5cbiAgICAgICAgbW9udGhUaXRsZVNldHRpbmcuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0UGxhY2Vob2xkZXIoXCJNTU1NIFlZWVlcIikuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9udGhUaXRsZUZvcm1hdCkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLm1vbnRoVGl0bGVGb3JtYXQgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJNb250aCB0aXRsZSBmb250IHNpemVcIikuc2V0RGVzYyhcIkZvbnQgc2l6ZSBmb3IgdGhlIG1haW4gJ01vbnRoIFllYXInIHRpdGxlIGF0IHRoZSB0b3Agb2YgdGhlIGNhbGVuZGFyLiBEZWZhdWx0IGlzIDIycHguXCIpLmFkZFRleHQodGV4dCA9PiB0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1haW5Nb250aFllYXJUaXRsZUZvbnRTaXplKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLm1haW5Nb250aFllYXJUaXRsZUZvbnRTaXplID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkJvbGQgbW9udGggaW4gdGl0bGVcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiVG9nZ2xlcyBib2xkIGZvbnQgd2VpZ2h0IGZvciB0aGUgbW9udGggcGFydCBvZiB0aGUgdGl0bGUuXCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYWluTW9udGhUaXRsZUJvbGQpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1haW5Nb250aFRpdGxlQm9sZCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIk1vbnRoIFRpdGxlIENvbG9yIChMaWdodCBNb2RlKVwiLCBcIkNvbG9yIGZvciB0aGUgbWFpbiAnTW9udGgnIHRpdGxlIGluIGxpZ2h0IG1vZGUuXCIsIFwibW9udGhDb2xvckxpZ2h0XCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiTW9udGggVGl0bGUgQ29sb3IgKERhcmsgTW9kZSlcIiwgXCJDb2xvciBmb3IgdGhlIG1haW4gJ01vbnRoJyB0aXRsZSBpbiBkYXJrIG1vZGUuXCIsIFwibW9udGhDb2xvckRhcmtcIik7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkJvbGQgeWVhciBpbiB0aXRsZVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJUb2dnbGVzIGJvbGQgZm9udCB3ZWlnaHQgZm9yIHRoZSB5ZWFyIHBhcnQgb2YgdGhlIHRpdGxlLlwiKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubWFpblllYXJUaXRsZUJvbGQpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1haW5ZZWFyVGl0bGVCb2xkID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoXG4gICAgICAgICAgICBjb250YWluZXJFbCxcbiAgICAgICAgICAgICdZZWFyIFRpdGxlIENvbG9yIChMaWdodCBNb2RlKScsXG4gICAgICAgICAgICAnQ29sb3IgZm9yIHRoZSB5ZWFyIHRleHQgaW4gdGhlIG1haW4gdGl0bGUgaW4gbGlnaHQgbW9kZS4nLFxuICAgICAgICAgICAgJ3llYXJDb2xvckxpZ2h0J1xuICAgICAgICApO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoXG4gICAgICAgICAgICBjb250YWluZXJFbCxcbiAgICAgICAgICAgICdZZWFyIFRpdGxlIENvbG9yIChEYXJrIE1vZGUpJyxcbiAgICAgICAgICAgICdDb2xvciBmb3IgdGhlIHllYXIgdGV4dCBpbiB0aGUgbWFpbiB0aXRsZSBpbiBkYXJrIG1vZGUuJyxcbiAgICAgICAgICAgICd5ZWFyQ29sb3JEYXJrJ1xuICAgICAgICApO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiTmF2aWdhdGlvbiBidXR0b25zIGhlaWdodFwiKS5zZXREZXNjKFwiRGVmYXVsdCBpcyAyOHB4LlwiKS5hZGRUZXh0KHRleHQgPT4gdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5uYXZCdXR0b25IZWlnaHQpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MubmF2QnV0dG9uSGVpZ2h0ID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiQm9sZCBjYWxlbmRhciBoZWFkZXJcIikuc2V0RGVzYyhcIlRvZ2dsZXMgYm9sZCBmb250IHdlaWdodCBmb3IgdGhlIGRheSBuYW1lcyByb3cgKE1vbiwgVHVlLCBldGMuKS5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGVhZGVyUm93Qm9sZCkub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oZWFkZXJSb3dCb2xkID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJEYXkgaGVhZGVyIHJvdyBmb250IGNvbG9yIChMaWdodCBNb2RlKVwiLCBcIlRleHQgY29sb3IgZm9yIHRoZSBkYXkgbmFtZXMgKFN1biwgTW9uLCBUdWUsIGV0Yy4pIGluIGxpZ2h0IHRoZW1lLlwiLCBcImRheUhlYWRlckZvbnRDb2xvckxpZ2h0XCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiRGF5IGhlYWRlciByb3cgZm9udCBjb2xvciAoRGFyayBNb2RlKVwiLCBcIlRleHQgY29sb3IgZm9yIHRoZSBkYXkgbmFtZXMgKFN1biwgTW9uLCBUdWUsIGV0Yy4pIGluIGRhcmsgdGhlbWUuXCIsIFwiZGF5SGVhZGVyRm9udENvbG9yRGFya1wiKTtcblxuICAgICAgICAvLyAtLS0gQ2FsZW5kYXIgR3JpZCBTZWN0aW9uIC0tLVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkNhbGVuZGFyIEdyaWRcIikuc2V0SGVhZGluZygpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJDYWxlbmRhciBncmlkIGxheW91dFwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJDaG9vc2UgYmV0d2VlbiBhIHNwYWNpb3VzLCBub3JtYWwgb3IgY29uZGVuc2VkIGxheW91dCBmb3IgdGhlIGNhbGVuZGFyIGdyaWQuXCIpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdzcGFjaW91cycsICdTcGFjaW91cycpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignbm9ybWFsJywgJ05vcm1hbCcpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY29uZGVuc2VkJywgJ0NvbmRlbnNlZCcpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNhbGVuZGFyTGF5b3V0KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FsZW5kYXJMYXlvdXQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0NhbGVuZGFyIGdyaWQgbGFiZWxzIGZvbnQgc2l6ZScpXG4gICAgICAgICAgICAuc2V0RGVzYygnRm9udCBzaXplIGZvciBjYWxlbmRhciBkYXkgbGFibGVzIGFuZCB3ZWVrLCBwZXJpb2Qvd2VlayBjb2x1bW5zLiBEZWZhdWx0IGlzIDEycHguJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb250U2l6ZSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbnRTaXplID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJDYWxlbmRhciBncmlkIGRheSBudW1iZXJzIGZvbnQgc2l6ZVwiKS5zZXREZXNjKFwiRm9udCBzaXplIGZvciB0aGUgZGF5IG51bWJlcnMgaW4gdGhlIGNhbGVuZGFyIGdyaWQuIERlZmF1bHQgaXMgMTVweC5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGF5TnVtYmVyRm9udFNpemUpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGF5TnVtYmVyRm9udFNpemUgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIkRhdGUgY2VsbCBmb250IGNvbG9yIChMaWdodCBNb2RlKVwiLCBcIlRleHQgY29sb3IgZm9yIHRoZSBkYXRlIG51bWJlcnMgaW4gbGlnaHQgdGhlbWUuXCIsIFwiZGF5Q2VsbEZvbnRDb2xvckxpZ2h0XCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiRGF0ZSBjZWxsIGZvbnQgY29sb3IgKERhcmsgTW9kZSlcIiwgXCJUZXh0IGNvbG9yIGZvciB0aGUgZGF0ZSBudW1iZXJzIGluIGRhcmsgdGhlbWUuXCIsIFwiZGF5Q2VsbEZvbnRDb2xvckRhcmtcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJPdGhlciBtb250aCBkYXRlIGZvbnQgY29sb3IgKExpZ2h0IE1vZGUpXCIsIFwiVGV4dCBjb2xvciBmb3IgZGF0ZXMgb3V0c2lkZSB0aGUgY3VycmVudCBtb250aCBpbiBsaWdodCB0aGVtZS5cIiwgXCJvdGhlck1vbnRoRm9udENvbG9yTGlnaHRcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJPdGhlciBtb250aCBkYXRlIGZvbnQgY29sb3IgKERhcmsgTW9kZSlcIiwgXCJUZXh0IGNvbG9yIGZvciBkYXRlcyBvdXRzaWRlIHRoZSBjdXJyZW50IG1vbnRoIGluIGRhcmsgdGhlbWUuXCIsIFwib3RoZXJNb250aEZvbnRDb2xvckRhcmtcIik7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJTaG93IGNhbGVuZGFyIGdyaWQgbGluZXNcIikuc2V0RGVzYyhcIlRvZ2dsZXMgdGhlIHZpc2liaWxpdHkgb2YgYm9yZGVyIGxpbmVzIGFyb3VuZCBlYWNoIGRhdGUgY2VsbC5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0NhbGVuZGFyR3JpZExpbmVzKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dDYWxlbmRhckdyaWRMaW5lcyA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQ2FsZW5kYXIgZ3JpZCBnYXAgd2lkdGhcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiV2lkdGggb2YgdGhlIGdhcC9ib3JkZXIgYmV0d2VlbiBjYWxlbmRhciBjZWxscy4gVGhlIGdyaWQgbGluZXMgc2V0dGluZyBhYm92ZSBuZWVkcyB0byBiZSB0b2dnbGVkIG9uLiAoZS5nLiwgMXB4LCAycHgsIDAuNXB4KS4gRGVmYXVsdCBpcyAxcHguXCIpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCIxcHhcIilcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FsZW5kYXJHcmlkR2FwV2lkdGgpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckdyaWRHYXBXaWR0aCA9IHZhbHVlIHx8IFwiMXB4XCI7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyAtLS0gQ29ycmVjdGVkIER5bmFtaWMgXCJUb2RheSdzIGRhdGUgc3R5bGVcIiBTZWN0aW9uIC0tLVxuICAgICAgICBjb25zdCB0b2RheVN0eWxlU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJUb2RheSdzIGRhdGUgc3R5bGVcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiQ2hvb3NlIGhvdyB0byBpbmRpY2F0ZSB0aGUgY3VycmVudCBkYXkgb24gdGhlIGNhbGVuZGFyLlwiKTtcblxuICAgICAgICBjb25zdCB0b2RheUhpZ2hsaWdodFNpemVTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlRvZGF5IGNpcmNsZSBoaWdobGlnaHQgc2l6ZVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJBZGp1c3QgdGhlIHNpemUgb2YgdGhlICd0b2RheScgaGlnaGxpZ2h0IGNpcmNsZS5cIilcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMS41LCAzLjQsIDAuMSkgLy8gTWluIHNpemUsIE1heCBzaXplLCBTdGVwIGluY3JlbWVudFxuXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBwYXJ0IGlzIGNvcnJlY3Q6IEl0IGdpdmVzIHRoZSBzbGlkZXIgdGhlIG51bWJlciBpdCBuZWVkcy5cbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUocGFyc2VGbG9hdCh0aGlzLnBsdWdpbi5zZXR0aW5ncy50b2RheUhpZ2hsaWdodFNpemUpKVxuXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKCkgLy8gU2hvd3MgdGhlIGN1cnJlbnQgdmFsdWUgYXMgeW91IHNsaWRlXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRvZGF5SGlnaGxpZ2h0U2l6ZSA9IGAke3ZhbHVlfWVtYDtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9QRVJJT0QpLmZvckVhY2gobGVhZiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVhZi52aWV3IGluc3RhbmNlb2YgQ2FsZW5kYXJQZXJpb2RXZWVrVmlldykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYWYudmlldy5jb250YWluZXJFbC5zdHlsZS5zZXRQcm9wZXJ0eShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJy0tdG9kYXktaGlnaGxpZ2h0LXNpemUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50b2RheUhpZ2hsaWdodFNpemUgLy8gTm93IHVzaW5nIHRoZSBjb3JyZWN0IHZhbHVlIGZyb20gc2V0dGluZ3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgY29uc3QgaGlnaGxpZ2h0T3B0aW9uc0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuICAgICAgICBjb25zdCByZW5kZXJIaWdobGlnaHRPcHRpb25zID0gKHN0eWxlKSA9PiB7XG4gICAgICAgICAgICBoaWdobGlnaHRPcHRpb25zQ29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICAgICAgICAgIGlmIChzdHlsZSA9PT0gJ2NlbGwnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGhpZ2hsaWdodE9wdGlvbnNDb250YWluZXIsIFwiVG9kYXkncyBEYXRlIENlbGwgSGlnaGxpZ2h0IChMaWdodCBNb2RlKVwiLCBcIkJhY2tncm91bmQgY29sb3IgZm9yIHRoZSBjdXJyZW50IGRheSdzIGNlbGwgaW4gbGlnaHQgbW9kZS5cIiwgXCJ0b2RheUhpZ2hsaWdodENvbG9yTGlnaHRcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGhpZ2hsaWdodE9wdGlvbnNDb250YWluZXIsIFwiVG9kYXkncyBEYXRlIENlbGwgSGlnaGxpZ2h0IChEYXJrIE1vZGUpXCIsIFwiQmFja2dyb3VuZCBjb2xvciBmb3IgdGhlIGN1cnJlbnQgZGF5J3MgY2VsbCBpbiBkYXJrIG1vZGUuXCIsIFwidG9kYXlIaWdobGlnaHRDb2xvckRhcmtcIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0eWxlID09PSAnY2lyY2xlJyB8fCBzdHlsZSA9PT0gJ251bWJlcicpIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhoaWdobGlnaHRPcHRpb25zQ29udGFpbmVyLCBcIlRvZGF5J3MgRGF0ZSBIaWdobGlnaHQgQ29sb3IgKExpZ2h0IE1vZGUpXCIsIFwiQ29udHJvbHMgdGhlIGhpZ2hsaWdodCBmb3IgQ2lyY2xlL1NxdWFyZSBzdHlsZXMgaW4gbGlnaHQgbW9kZS5cIiwgXCJ0b2RheUNpcmNsZUNvbG9yTGlnaHRcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGhpZ2hsaWdodE9wdGlvbnNDb250YWluZXIsIFwiVG9kYXkncyBEYXRlIEhpZ2hsaWdodCBDb2xvciAoRGFyayBNb2RlKVwiLCBcIkNvbnRyb2xzIHRoZSBoaWdobGlnaHQgZm9yIENpcmNsZS9TcXVhcmUgc3R5bGVzIGluIGRhcmsgbW9kZS5cIiwgXCJ0b2RheUNpcmNsZUNvbG9yRGFya1wiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0eWxlID09PSAnY2lyY2xlJykge1xuXG4gICAgICAgICAgICAgICAgdG9kYXlIaWdobGlnaHRTaXplU2V0dGluZy5zZXR0aW5nRWwuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b2RheUhpZ2hsaWdodFNpemVTZXR0aW5nLnNldHRpbmdFbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdG9kYXlTdHlsZVNldHRpbmcuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdub25lJywgJ09mZiAoTm8gSGlnaGxpZ2h0KScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2VsbCcsICdIaWdobGlnaHQgQ2VsbCcpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2lyY2xlJywgJ0NpcmNsZSBBcm91bmQgRGF0ZScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignbnVtYmVyJywgJ1NxdWFyZSBBcm91bmQgRGF0ZScpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRvZGF5SGlnaGxpZ2h0U3R5bGUpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50b2RheUhpZ2hsaWdodFN0eWxlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICByZW5kZXJIaWdobGlnaHRPcHRpb25zKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVuZGVySGlnaGxpZ2h0T3B0aW9ucyh0aGlzLnBsdWdpbi5zZXR0aW5ncy50b2RheUhpZ2hsaWdodFN0eWxlKTtcbiAgICAgICAgLy8gLS0tIEVuZCBvZiBDb3JyZWN0ZWQgU2VjdGlvbiAtLS1cblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkhpZ2hsaWdodCB0b2RheSdzIGRheSBoZWFkZXJcIikuc2V0RGVzYyhcIkNvbG9ycyB0aGUgZGF5IGNvbHVtbiBoZWFkZXIgKFN1biwgTW9uLCBldGMuKSBjb250YWluaW5nIHRvZGF5LlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRUb2RheURheUhlYWRlcikub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRUb2RheURheUhlYWRlciA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkhpZ2hsaWdodCB0b2RheSdzIFAvVyBvciB3ZWVrIG51bWJlclwiKS5zZXREZXNjKFwiQ29sb3JzIHRoZSBQZXJpb2QvV2VlayBvciBDYWxlbmRhciBXZWVrIG51bWJlciBmb3IgdGhlIGN1cnJlbnQgd2Vlay5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0VG9kYXlQV0xhYmVsKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodFRvZGF5UFdMYWJlbCA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuXG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhcbiAgICAgICAgICAgIGNvbnRhaW5lckVsLFxuICAgICAgICAgICAgXCJDdXJyZW50IERheSAvIFdlZWsgTGFiZWwgSGlnaGxpZ2h0IChMaWdodCBNb2RlKVwiLFxuICAgICAgICAgICAgXCJDb2xvciBmb3IgdGhlIGN1cnJlbnQgZGF5J3MgbGFiZWxzLCAoZS5nLiBTVU4sIE1PTikgYW5kIHBlcmlvZCB3ZWVrIC8gY2FsZW5kYXIgd2VlayBsYWJlbHMgaW4gbGlnaHQgbW9kZS5cIixcbiAgICAgICAgICAgIFwiY3VycmVudEhpZ2hsaWdodExhYmVsQ29sb3JMaWdodFwiXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKFxuICAgICAgICAgICAgY29udGFpbmVyRWwsXG4gICAgICAgICAgICBcIkN1cnJlbnQgRGF5IC8gV2VlayBMYWJlbCBIaWdobGlnaHQgKERhcmsgTW9kZSlcIixcbiAgICAgICAgICAgIFwiQ29sb3IgZm9yIHRoZSBjdXJyZW50IGRheSdzIGxhYmVscywgKGUuZy4gU1VOLCBNT04pIGFuZCBwZXJpb2Qgd2VlayAvIGNhbGVuZGFyIHdlZWsgbGFiZWxzIGluIGRhcmsgbW9kZS5cIixcbiAgICAgICAgICAgIFwiY3VycmVudEhpZ2hsaWdodExhYmVsQ29sb3JEYXJrXCJcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiRGF0ZSBDZWxsIEhvdmVyIENvbG9yIChMaWdodCBNb2RlKVwiLCBcIkJhY2tncm91bmQgY29sb3Igd2hlbiBob3ZlcmluZyBvdmVyIGEgZGF0ZSBjZWxsIGluIGxpZ2h0IG1vZGUuXCIsIFwiZGF0ZUNlbGxIb3ZlckNvbG9yTGlnaHRcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJEYXRlIENlbGwgSG92ZXIgQ29sb3IgKERhcmsgTW9kZSlcIiwgXCJCYWNrZ3JvdW5kIGNvbG9yIHdoZW4gaG92ZXJpbmcgb3ZlciBhIGRhdGUgY2VsbCBpbiBkYXJrIG1vZGUuXCIsIFwiZGF0ZUNlbGxIb3ZlckNvbG9yRGFya1wiKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJCb2xkIFBlcmlvZC9XZWVrIGNvbHVtblwiKS5zZXREZXNjKFwiVG9nZ2xlcyBib2xkIGZvbnQgd2VpZ2h0IGZvciB0aGUgUGVyaW9kL1dlZWsgY29sdW1uLlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wd0NvbHVtbkJvbGQpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHdDb2x1bW5Cb2xkID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiU2hvdyBQL1cgc2VwYXJhdG9yIGxpbmVcIikuc2V0RGVzYyhcIkRpc3BsYXkgYSB2ZXJ0aWNhbCBsaW5lIGJldHdlZW4gdGhlIHdlZWsgY29sdW1ucyBhbmQgdGhlIGRhdGUgZ3JpZC5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1BXQ29sdW1uU2VwYXJhdG9yKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dQV0NvbHVtblNlcGFyYXRvciA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiUC9XIHNlcGFyYXRvciBsaW5lIGNvbG9yXCIsIFwiQ29sb3Igb2YgdGhlIHZlcnRpY2FsIHNlcGFyYXRvciBsaW5lLlwiLCBcInB3Q29sdW1uU2VwYXJhdG9yQ29sb3JcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJQZXJpb2QvV2VlayBjb2x1bW4gZm9udCBjb2xvciAoTGlnaHQgTW9kZSlcIiwgXCJUZXh0IGNvbG9yIGZvciB0aGUgUGVyaW9kL1dlZWsgY29sdW1uIGluIGxpZ2h0IHRoZW1lLlwiLCBcInB3Q29sdW1uRm9udENvbG9yTGlnaHRcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJQZXJpb2QvV2VlayBjb2x1bW4gZm9udCBjb2xvciAoRGFyayBNb2RlKVwiLCBcIlRleHQgY29sb3IgZm9yIHRoZSBQZXJpb2QvV2VlayBjb2x1bW4gaW4gZGFyayB0aGVtZS5cIiwgXCJwd0NvbHVtbkZvbnRDb2xvckRhcmtcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJXZWVrIG51bWJlciBjb2x1bW4gZm9udCBjb2xvciAoTGlnaHQgTW9kZSlcIiwgXCJUZXh0IGNvbG9yIGZvciB0aGUgd2VlayBudW1iZXIgY29sdW1uIGluIGxpZ2h0IHRoZW1lLlwiLCBcIndlZWtOdW1iZXJGb250Q29sb3JMaWdodFwiKTtcbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIldlZWsgbnVtYmVyIGNvbHVtbiBmb250IGNvbG9yIChEYXJrIE1vZGUpXCIsIFwiVGV4dCBjb2xvciBmb3IgdGhlIHdlZWsgbnVtYmVyIGNvbHVtbiBpbiBkYXJrIHRoZW1lLlwiLCBcIndlZWtOdW1iZXJGb250Q29sb3JEYXJrXCIpO1xuICAgIH1cblxuICAgIHJlbmRlckZ1bmN0aW9uYWxTZXR0aW5ncygpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyRWwgPSB0aGlzLmNvbnRlbnRFbDtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiQ2FsZW5kYXIgRnVuY3Rpb25hbCBTZXR0aW5nc1wiIH0pO1xuXG4gICAgICAgIC8vIC0tLSBQZXJpb2QvV2VlayBTeXN0ZW0gU2VjdGlvbiAtLS1cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJQZXJpb2QvV2VlayBTeXN0ZW1cIikuc2V0SGVhZGluZygpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJXZWVrIHN0YXJ0cyBvblwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJDaG9vc2Ugd2hldGhlciB0aGUgY2FsZW5kYXIgd2VlayBzdGFydHMgb24gU3VuZGF5IG9yIE1vbmRheS5cIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ21vbmRheScsICdNb25kYXknKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ3N1bmRheScsICdTdW5kYXknKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrU3RhcnREYXkpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrU3RhcnREYXkgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlZnJlc2ggdGhlIHNldHRpbmdzIHRhYiB0byBzaG93IHRoZSB1cGRhdGVkIHZhbGlkYXRpb24gbWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hEaXNwbGF5KCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIGNvbnN0IHJlcXVpcmVkRGF5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla1N0YXJ0RGF5ID09PSAnbW9uZGF5JyA/IDEgOiAwOyAvLyBNb25kYXkgaXMgMSwgU3VuZGF5IGlzIDBcbiAgICAgICAgY29uc3QgcmVxdWlyZWREYXlOYW1lID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla1N0YXJ0RGF5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla1N0YXJ0RGF5LnNsaWNlKDEpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJTdGFydCBvZiBQZXJpb2QgMSBXZWVrIDFcIilcbiAgICAgICAgICAgIC5zZXREZXNjKGBUaGUgZGF0ZSBmb3IgdGhlIHN0YXJ0IG9mIFAxVzEuIFRoaXMgZGF0ZSBNVVNUIGJlIGEgJHtyZXF1aXJlZERheU5hbWV9IHRvIG1hdGNoIHlvdXIgJ1dlZWsgc3RhcnRzIG9uJyBzZXR0aW5nLmApIC8vIER5bmFtaWMgZGVzY3JpcHRpb25cbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC50eXBlID0gXCJkYXRlXCI7XG4gICAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGFydE9mUGVyaW9kMURhdGUpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZERhdGUgPSBtb21lbnQodmFsdWUsIFwiWVlZWS1NTS1ERFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZERhdGUuZGF5KCkgIT09IHJlcXVpcmVkRGF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6IFRoZSBzdGFydCBkYXRlIG11c3QgYmUgYSAke3JlcXVpcmVkRGF5TmFtZX0uYCwgNTAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBEbyBub3Qgc2F2ZSB0aGUgaW52YWxpZCBkYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGFydE9mUGVyaW9kMURhdGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiUGVyaW9kL1dlZWsgZm9ybWF0XCIpLnNldERlc2MoXCJDaG9vc2UgdGhlIGRpc3BsYXkgZm9ybWF0IGZvciB0aGUgUC9XIGNvbHVtbi5cIikuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd24uYWRkT3B0aW9uKFwiUCNXI1wiLCBcIlAjVyNcIikuYWRkT3B0aW9uKFwiUCMgVyNcIiwgXCJQIyBXI1wiKS5hZGRPcHRpb24oXCIjIFcjXCIsIFwiIyBXI1wiKS5hZGRPcHRpb24oXCJwI3cjXCIsIFwicCNwI1wiKS5hZGRPcHRpb24oXCJwIyB3I1wiLCBcInAjIHcjXCIpLmFkZE9wdGlvbihcIiMgdyNcIiwgXCIjIHcjXCIpLmFkZE9wdGlvbihcIiMtI1wiLCBcIiMtI1wiKS5hZGRPcHRpb24oXCIjIC0gI1wiLCBcIiMgLSAjXCIpLmFkZE9wdGlvbihcIiMvI1wiLCBcIiMvI1wiKS5hZGRPcHRpb24oXCIjIC8gI1wiLCBcIiMgLyAjXCIpLmFkZE9wdGlvbihcIiMsI1wiLCBcIiMsI1wiKS5hZGRPcHRpb24oXCIjLCAjXCIsIFwiIywgI1wiKS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wd0Zvcm1hdCkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnB3Rm9ybWF0ID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJTaG93IFBlcmlvZC9XZWVrIGNvbHVtblwiKS5zZXREZXNjKFwiU2hvdyBvciBoaWRlIHRoZSBQZXJpb2QvV2VlayBjb2x1bW4gb24gdGhlIGxlZnQgc2lkZSBvZiB0aGUgY2FsZW5kYXIuXCIpLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dQV0NvbHVtbikub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93UFdDb2x1bW4gPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcblxuICAgICAgICAvLyAtLS0gV2VlayBOdW1iZXJzIFNlY3Rpb24gLS0tXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiV2VlayBOdW1iZXJzXCIpLnNldEhlYWRpbmcoKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2hvdyB3ZWVrIG51bWJlciBjb2x1bW5cIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiRGlzcGxheSBhIGNvbHVtbiBmb3Igd2VlayBudW1iZXJzIG9uIHRoZSBsZWZ0IHNpZGUgb2YgdGhlIGNhbGVuZGFyLlwiKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dXZWVrTnVtYmVycylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dXZWVrTnVtYmVycyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIldlZWsgbnVtYmVyIHR5cGVcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiQ2hvb3NlIHdoaWNoIHdlZWsgbnVtYmVyaW5nIHN5c3RlbSB0byB1c2UuXCIpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdwZXJpb2QnLCAnUGVyaW9kIFN5c3RlbSBXZWVrJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjYWxlbmRhcicsICdDYWxlbmRhciBZZWFyIFdlZWsgKElTTyknKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrTnVtYmVyVHlwZSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtOdW1iZXJUeXBlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiV2VlayBudW1iZXIgY29sdW1uIGxhYmVsXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlRoZSB0ZXh0IHRvIGRpc3BsYXkgYXQgdGhlIHRvcCBvZiB0aGUgd2VlayBudW1iZXIgY29sdW1uLlwiKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtOdW1iZXJDb2x1bW5MYWJlbClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtOdW1iZXJDb2x1bW5MYWJlbCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gLS0tIERhaWx5IE5vdGVzIFNlY3Rpb24gLS0tXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiRGFpbHkgTm90ZXNcIikuc2V0SGVhZGluZygpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkRhaWx5IE5vdGVzIGZvbGRlclwiKS5zZXREZXNjKFwiU3BlY2lmeSB0aGUgZm9sZGVyIHdoZXJlIHlvdXIgZGFpbHkgbm90ZXMgYXJlIHN0b3JlZCBhbmQgY3JlYXRlZC5cIikuYWRkVGV4dCh0ZXh0ID0+IHsgdGhpcy5jcmVhdGVQYXRoU3VnZ2VzdGVyKHRleHQuaW5wdXRFbCwgKHEpID0+IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkuZmlsdGVyKGYgPT4gZiBpbnN0YW5jZW9mIFRGb2xkZXIgJiYgKCFxIHx8IGYucGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHEpKSkubWFwKGYgPT4gZi5wYXRoKSk7IHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGFpbHlOb3Rlc0ZvbGRlcikub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYWlseU5vdGVzRm9sZGVyID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KTsgfSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiRGFpbHkgTm90ZSBvcGVuIGJlaGF2aW9yXCIpLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duLmFkZE9wdGlvbignbmV3LXRhYicsICdPcGVuIGluIGEgbmV3IHRhYicpLmFkZE9wdGlvbignY3VycmVudC10YWInLCAnT3BlbiBpbiB0aGUgY3VycmVudCB0YWInKS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYWlseU5vdGVPcGVuQWN0aW9uKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGFpbHlOb3RlT3BlbkFjdGlvbiA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkRhaWx5IG5vdGUgdGVtcGxhdGVcIikuc2V0RGVzYyhcIlBhdGggdG8gYSB0ZW1wbGF0ZSBmaWxlIHRvIHVzZSB3aGVuIGNyZWF0aW5nIGEgbmV3IGRhaWx5IG5vdGUuXCIpLmFkZFRleHQodGV4dCA9PiB7IHRoaXMuY3JlYXRlUGF0aFN1Z2dlc3Rlcih0ZXh0LmlucHV0RWwsIChxKSA9PiB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGYgPT4gIXEgfHwgZi5wYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocSkpLm1hcChmID0+IGYucGF0aCkpOyB0ZXh0LnNldFBsYWNlaG9sZGVyKFwiRXhhbXBsZTogVGVtcGxhdGVzL0RhaWx5Lm1kXCIpLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRhaWx5Tm90ZVRlbXBsYXRlUGF0aCkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLmRhaWx5Tm90ZVRlbXBsYXRlUGF0aCA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSk7IH0pO1xuXG4gICAgICAgIC8vIC0tLSBHcmlkIEhpZ2hsaWdodGluZyBTZWN0aW9uIC0tLVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkdyaWQgSGlnaGxpZ2h0aW5nXCIpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJFbmFibGUgcm93IGhpZ2hsaWdodFwiKS5zZXREZXNjKFwiSGlnaGxpZ2h0cyB0aGUgZW50aXJlIHdlZWsncyByb3cgd2hlbiBob3ZlcmluZyBvdmVyIHRoZSBQL1cgbGFiZWwuXCIpLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVJvd0hpZ2hsaWdodCkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVJvd0hpZ2hsaWdodCA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkVuYWJsZSBjb2x1bW4gaGlnaGxpZ2h0XCIpLnNldERlc2MoXCJIaWdobGlnaHRzIHRoZSBlbnRpcmUgZGF5J3MgY29sdW1uIHdoZW4gaG92ZXJpbmcgb3ZlciB0aGUgZGF5IG5hbWUgKGUuZy4sIE1vbikuXCIpLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNvbHVtbkhpZ2hsaWdodCkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNvbHVtbkhpZ2hsaWdodCA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkVuYWJsZSBjb21wbGV4IGdyaWQgaGlnaGxpZ2h0XCIpLnNldERlc2MoXCJXaGVuIGhvdmVyaW5nIGEgZGF0ZSwgaGlnaGxpZ2h0cyBhbGwgY2VsbHMgaW4gaXRzIHJvdyBhbmQgY29sdW1uIHVwIHRvIHRoYXQgZGF0ZS5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlUm93VG9EYXRlSGlnaGxpZ2h0KS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlUm93VG9EYXRlSGlnaGxpZ2h0ID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkFsd2F5cyBoaWdobGlnaHQgY3VycmVudCB3ZWVrXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIktlZXBzIHRoZSBlbnRpcmUgcm93IGZvciB0aGUgY3VycmVudCB3ZWVrIHBlcm1hbmVudGx5IGhpZ2hsaWdodGVkLlwiKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodEN1cnJlbnRXZWVrKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0Q3VycmVudFdlZWsgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG5cbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIkdyaWQgSGlnaGxpZ2h0IENvbG9yIChMaWdodCBNb2RlKVwiLCBcIkNvbG9yIGZvciByb3cvY29sdW1uIGhpZ2hsaWdodGluZyBvbiBob3ZlciBpbiBsaWdodCBtb2RlLlwiLCBcInJvd0hpZ2hsaWdodENvbG9yTGlnaHRcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJHcmlkIEhpZ2hsaWdodCBDb2xvciAoRGFyayBNb2RlKVwiLCBcIkNvbG9yIGZvciByb3cvY29sdW1uIGhpZ2hsaWdodGluZyBvbiBob3ZlciBpbiBkYXJrIG1vZGUuXCIsIFwicm93SGlnaGxpZ2h0Q29sb3JEYXJrXCIpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJIaWdobGlnaHQgd2Vla2VuZHNcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiU2hhZGUgU2F0dXJkYXkgYW5kIFN1bmRheSBjb2x1bW5zIHdpdGggYSBzdWJ0bGUgYmFja2dyb3VuZCBjb2xvci5cIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRXZWVrZW5kcylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodFdlZWtlbmRzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoXG4gICAgICAgICAgICBjb250YWluZXJFbCxcbiAgICAgICAgICAgIFwiV2Vla2VuZCBzaGFkZSBjb2xvciAoTGlnaHQgTW9kZSlcIixcbiAgICAgICAgICAgIFwiQmFja2dyb3VuZCBjb2xvciBmb3IgU2F0dXJkYXkgYW5kIFN1bmRheSBjb2x1bW5zIGluIGxpZ2h0IHRoZW1lLlwiLFxuICAgICAgICAgICAgXCJ3ZWVrZW5kU2hhZGVDb2xvckxpZ2h0XCJcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoXG4gICAgICAgICAgICBjb250YWluZXJFbCxcbiAgICAgICAgICAgIFwiV2Vla2VuZCBzaGFkZSBjb2xvciAoRGFyayBNb2RlKVwiLFxuICAgICAgICAgICAgXCJCYWNrZ3JvdW5kIGNvbG9yIGZvciBTYXR1cmRheSBhbmQgU3VuZGF5IGNvbHVtbnMgaW4gZGFyayB0aGVtZS5cIixcbiAgICAgICAgICAgIFwid2Vla2VuZFNoYWRlQ29sb3JEYXJrXCJcbiAgICAgICAgKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkludGVncmF0ZSBFeHRlcm5hbCBDYWxlbmRhciBFdmVudHNcIikuc2V0SGVhZGluZygpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0V4dGVybmFsIGNhbGVuZGFyIFVSTCAoLmljcyknKVxuICAgICAgICAgICAgLnNldERlc2MoJ0ludGVncmF0ZSBhbiBleHRlcm5hbCAuaWNzIGZlZWQgY2FsZW5kYXIgVVJMIChlLmcuLCBmcm9tIEdvb2dsZSBDYWxlbmRhciB1c2luZyB0aGUgXFwnU2VjcmV0IGFkZHJlc3MgaW4gaUNhbCBmb3JtYXRcXCcgb3IgXFwnUHVibGljIGFkZHJlc3MgaW4gaUNhbCBGb3JtYXRcXCcpIHRvIGluZGljYXRlIGV2ZW50cyBhcyBkb3RzIGluIHRoZSBjYWxlbmRhciBncmlkIGFuZCBldmVudCBkZXRhaWxzIGluIHRoZSBkYXRlIHBvcHVwIGJveC4nKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2h0dHBzOi8vY2FsZW5kYXIuZ29vZ2xlLmNvbS9jYWxlbmRhci9pY2FsLy4uLi9iYXNpYy5pY3MnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNzVXJsKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY3NVcmwgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUubWluV2lkdGggPSBcIjMwMHB4XCI7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnN0eWxlLnJlc2l6ZSA9IFwidmVydGljYWxcIjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc2V0dGluZ0VsLnN0eWxlLmFsaWduSXRlbXMgPSBcImZsZXgtc3RhcnRcIjtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdBdXRvLXJlZnJlc2ggSW50ZXJ2YWwnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0hvdyBvZnRlbiB0aGUgZXh0ZXJuYWwgY2FsZW5kYXIgVVJMIHNob3VsZCBiZSBhdXRvbWF0aWNhbGx5IHJlZnJlc2hlZCBpbiB0aGUgYmFja2dyb3VuZC4nKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcbiAgICAgICAgICAgICAgICBkcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCcxNScsICcxNSBtaW51dGVzJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignMzAnLCAnMzAgbWludXRlcycpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJzYwJywgJzEgaG91cicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJzE4MCcsICczIGhvdXJzJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignMzYwJywgJzYgaG91cnMnKVxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCc3MjAnLCAnMTIgaG91cnMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNzUmVmcmVzaEludGVydmFsLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmljc1JlZnJlc2hJbnRlcnZhbCA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsbCBhIG1ldGhvZCBvbiB0aGUgbWFpbiBwbHVnaW4gdG8gcmVzZXQgdGhlIHRpbWVyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5yZXNldEljc1JlZnJlc2hJbnRlcnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0NhbGVuZGFyIEV2ZW50IEluZGljYXRvcicpXG4gICAgICAgICAgICAuc2V0RGVzYygnQ2hvb3NlIGhvdyB0byBkaXNwbGF5IGV4dGVybmFsIGNhbGVuZGFyIGV2ZW50cyBvbiB0aGUgY2FsZW5kYXIgZ3JpZC4gXCJEb3RcIiBzaG93cyBhIHNlcGFyYXRlIGNvbG9yZWQgZG90LCB3aGlsZSBcIkhlYXRtYXBcIiBhbmQgXCJCYWRnZVwiIHdpbGwgYWRkIHRoZSBldmVudCBjb3VudCB0byB0aGUgZXhpc3RpbmcgdGFzayBpbmRpY2F0b3JzLiBJZiB5b3Ugc2VsZWN0IFwiSGVhdG1hcFwiIG9yIFwiQmFkZ2VcIiwgZW5zdXJlIHRoYXQgdGhlIGNvcnJlc3BvbmRpbmcgdGFzayBpbmRpY2F0b3Igb3B0aW9uIGlzIGFsc28gZW5hYmxlZCBpbiB0aGUgXCJUYXNrIEluZGljYXRvcnNcIiBzZXR0aW5ncyB0YWIuIFNldHRpbmdzIHdpbGwgYmUgYXBwbGllZCBhZnRlciBjbG9zaW5nIHRoZSBzZXR0aW5ncyB3aW5kb3cuJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2RvdCcsICdEb3QgT25seScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignaGVhdG1hcCcsICdBZGQgdG8gSGVhdG1hcCcpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignYmFkZ2UnLCAnQWRkIHRvIFRhc2sgQmFkZ2UnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckV2ZW50SW5kaWNhdG9yU3R5bGUgfHwgJ2RvdCcpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBTdGVwIDE6IFNhdmUgdGhlIG5ldyB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckV2ZW50SW5kaWNhdG9yU3R5bGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0NhbGVuZGFyIEV2ZW50cyBQbGFjZWhvbGRlcicpXG4gICAgICAgICAgICAuc2V0RGVzYygnVGhlIHBsYWNlaG9sZGVyIHRleHQgdG8gdXNlIGluIHlvdXIgZGFpbHkgbm90ZSB0ZW1wbGF0ZS4gVGhlIHBsdWdpbiB3aWxsIHJlcGxhY2UgdGhpcyB0ZXh0IHdpdGggY2FsZW5kYXIgZXZlbnRzLicpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignJSVDQUxFTkRBUl9FVkVOVFMlJScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckV2ZW50c1BsYWNlaG9sZGVyKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckV2ZW50c1BsYWNlaG9sZGVyID0gdmFsdWUudHJpbSgpIHx8ICclJUNBTEVOREFSX0VWRU5UUyUlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgbWluaW11bSB3aWR0aCBmb3IgdGhlIHRleHQgaW5wdXQgZmllbGRcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUubWluV2lkdGggPSBcIjMwMHB4XCI7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnN0eWxlLnJlc2l6ZSA9IFwidmVydGljYWxcIjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc2V0dGluZ0VsLnN0eWxlLmFsaWduSXRlbXMgPSBcImZsZXgtc3RhcnRcIjtcblxuXG4gICAgICAgIGNvbnN0IGNhbGVuZGFyRm9ybWF0U2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0NhbGVuZGFyIEV2ZW50IEZvcm1hdCcpXG4gICAgICAgICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJy0ge3tzdGFydFRpbWV9fSAtIHt7ZW5kVGltZX19OiB7e3N1bW1hcnl9fScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckV2ZW50c0Zvcm1hdClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FsZW5kYXJFdmVudHNGb3JtYXQgPSB2YWx1ZSB8fCAnLSB7e3N0YXJ0VGltZX19IC0ge3tlbmRUaW1lfX06IHt7c3VtbWFyeX19JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIEFwcGx5IHN0eWxlcyB0byB0aGUgdGV4dGFyZWEgZWxlbWVudFxuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS5taW5XaWR0aCA9IFwiMzAwcHhcIjtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUubWluSGVpZ2h0ID0gXCIxMDBweFwiO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS5yZXNpemUgPSBcInZlcnRpY2FsXCI7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBkZXNjRWwgPSBjYWxlbmRhckZvcm1hdFNldHRpbmcuZGVzY0VsO1xuICAgICAgICBkZXNjRWwuYXBwZW5kVGV4dCgnQ3VzdG9taXplIHRoZSBmb3JtYXQgZm9yIGVhY2ggY2FsZW5kYXIgZXZlbnQuIFVzZSB0aGVzZSBwbGFjZWhvbGRlcnM6Jyk7XG5cbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXJMaXN0ID0gZGVzY0VsLmNyZWF0ZUVsKCd1bCcpO1xuXG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVycyA9IFtcbiAgICAgICAgICAgIHsgY29kZTogJ3t7c3VtbWFyeX19JywgdGV4dDogJ1RoZSBldmVudCB0aXRsZScgfSxcbiAgICAgICAgICAgIHsgY29kZTogJ3t7c3RhcnRUaW1lfX0nLCB0ZXh0OiAnVGhlIGV2ZW50IHN0YXJ0IHRpbWUgKG9yIFwiQWxsLWRheVwiKScgfSxcbiAgICAgICAgICAgIHsgY29kZTogJ3t7ZW5kVGltZX19JywgdGV4dDogJ1RoZSBldmVudCBlbmQgdGltZScgfVxuICAgICAgICBdO1xuXG4gICAgICAgIHBsYWNlaG9sZGVycy5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHBsYWNlaG9sZGVyTGlzdC5jcmVhdGVFbCgnbGknKTtcbiAgICAgICAgICAgIGl0ZW0uY3JlYXRlRWwoJ2NvZGUnLCB7IHRleHQ6IHAuY29kZSB9KTtcbiAgICAgICAgICAgIGl0ZW0uYXBwZW5kVGV4dChgICR7cC50ZXh0fWApO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBbGlnbiB0aGUgZW50aXJlIHNldHRpbmcgcm93IHRvIHRoZSB0b3BcbiAgICAgICAgY2FsZW5kYXJGb3JtYXRTZXR0aW5nLnNldHRpbmdFbC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJmbGV4LXN0YXJ0XCI7XG5cbiAgICB9XG5cbiAgICByZW5kZXJQb3B1cFNldHRpbmdzKCkge1xuXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWw7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIlBvcHVwIENvbnRyb2xzXCIgfSk7XG5cbiAgICAgICAgLy8gLS0tIFBvcHVwcyBTZWN0aW9uIC0tLVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlBvcHVwIGhvdmVyIGRlbGF5XCIpLnNldERlc2MoXCJIb3cgbG9uZyB0byB3YWl0IGJlZm9yZSBzaG93aW5nIHRoZSBub3RlIGxpc3QgcG9wdXAgb24gaG92ZXIuIERlZmF1bHQgaXMgODAwLlwiKS5hZGRUZXh0KHRleHQgPT4gdGV4dC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3RoZXJOb3RlSG92ZXJEZWxheSkpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vdGhlck5vdGVIb3ZlckRlbGF5ID0gTnVtYmVyKHZhbHVlKSB8fCAxMDA7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiUG9wdXAgaGlkZSBkZWxheVwiKS5zZXREZXNjKFwiSG93IGxvbmcgdG8gd2FpdCBiZWZvcmUgaGlkaW5nIHRoZSBwb3B1cCBhZnRlciB0aGUgbW91c2UgbGVhdmVzLiBEZWZhdWx0IGlzIDUwLlwiKS5hZGRUZXh0KHRleHQgPT4gdGV4dC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MucG9wdXBIaWRlRGVsYXkpKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MucG9wdXBIaWRlRGVsYXkgPSBOdW1iZXIodmFsdWUpIHx8IDEwMDsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJQb3B1cCBnYXBcIikuc2V0RGVzYyhcIlRoZSBnYXAgKGluIHBpeGVscykgYmV0d2VlbiBhIGNhbGVuZGFyIGRheSBhbmQgaXRzIHBvcHVwIGxpc3QuIENhbiBiZSBuZWdhdGl2ZS4gRGVmYXVsdCBpcyAtMi5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcHVwR2FwKSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcHVwR2FwID0gTnVtYmVyKHZhbHVlKSB8fCAtMjsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJQb3B1cCBmb250IHNpemVcIikuc2V0RGVzYyhcIlRoZSBmb250IHNpemUgZm9yIHRoZSBub3RlIG5hbWVzIGluc2lkZSB0aGUgY2FsZW5kYXIgcG9wdXAuIERlZmF1bHQgaXMgMTRweC5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3RoZXJOb3RlUG9wdXBGb250U2l6ZSkub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vdGhlck5vdGVQb3B1cEZvbnRTaXplID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnTm90ZXMgJiBBc3NldHMgUG9wdXAgVHJpZ2dlcicpXG4gICAgICAgICAgICAuc2V0RGVzYygnQ2hvb3NlIGhvdyBwb3B1cHMgYXBwZWFyIGluIHRoZSBOb3RlcyBhbmQgQXNzZXRzIHRhYnM6IG9uIGhvdmVyLCBvciBvbiByaWdodC1jbGljayAod2hpY2ggY29ycmVzcG9uZHMgdG8gYSBsb25nLXByZXNzIG9uIG1vYmlsZSkuJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgICAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignaG92ZXInLCAnSG92ZXInKVxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdyaWdodGNsaWNrJywgJ1JpZ2h0LWNsaWNrIC8gTG9uZy1wcmVzcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5saXN0UG9wdXBUcmlnZ2VyIHx8ICdob3ZlcicpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmxpc3RQb3B1cFRyaWdnZXIgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWZyZXNoIHRoZSBub3RlcyBhbmQgYXNzZXRzIHZpZXdzIHRvIGFwcGx5IHRoZSBuZXcgYmVoYXZpb3IgaW5zdGFudGx5XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfUEVSSU9EKS5mb3JFYWNoKGxlYWYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZWFmLnZpZXcgJiYgdHlwZW9mIGxlYWYudmlldy5wb3B1bGF0ZU5vdGVzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbGwgYm90aCBwb3B1bGF0ZSBmdW5jdGlvbnMuIFNpbmNlIHRoZXkgY2hlY2sgZm9yIHRoZWlyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG93biBjb250YWluZXIncyBleGlzdGVuY2UsIG9ubHkgdGhlIG9uZSBmb3IgdGhlIGFjdGl2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0YWIgaW4gdGhhdCB2aWV3IGluc3RhbmNlIHdpbGwgYWN0dWFsbHkgcnVuLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWFmLnZpZXcucG9wdWxhdGVOb3RlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWFmLnZpZXcucG9wdWxhdGVBc3NldHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIHJlbmRlckRvdHNTZXR0aW5ncygpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyRWwgPSB0aGlzLmNvbnRlbnRFbDtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiRG90IEluZGljYXRvcnNcIiB9KTtcbiAgICAgICAgLy8gLS0tIERvdCBGdW5jdGlvbmFsaXR5IFNlY3Rpb24gLS0tXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiQ2FsZW5kYXIgRnVuY3Rpb25hbGl0eSAmIFN0eWxlXCIpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJTaG93IGRvdCBmb3IgY3JlYXRlZCBub3Rlc1wiKS5zZXREZXNjKFwiU2hvdyBhIGRvdCBvbiBkYXlzIHdoZXJlIGFueSBub3RlICh0aGF0IGlzIG5vdCBhIGRhaWx5IG5vdGUpIHdhcyBjcmVhdGVkLlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93T3RoZXJOb3RlRG90KS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dPdGhlck5vdGVEb3QgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJTaG93IGRvdCBmb3IgbW9kaWZpZWQgbm90ZXNcIikuc2V0RGVzYyhcIlNob3cgYSBkb3Qgb24gZGF5cyB3aGVyZSBhbnkgbm90ZSAodGhhdCBpcyBub3QgYSBkYWlseSBub3RlKSB3YXMgbW9kaWZpZWQuXCIpLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dNb2RpZmllZEZpbGVEb3QpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd01vZGlmaWVkRmlsZURvdCA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2hvdyBkb3QgZm9yIG5ldyBhc3NldHNcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiU2hvdyBhIGRvdCBvbiBkYXlzIHdoZXJlIGFuIGFzc2V0IChpbWFnZSwgUERGLCBldGMuKSB3YXMgYWRkZWQgdG8gdGhlIHZhdWx0LlwiKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dBc3NldERvdClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dBc3NldERvdCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnU2hvdyBkb3QgZm9yIGV4dGVybmFsIGljcyBjYWxlbmRhciBldmVudHMnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1Nob3cgYSBkb3Qgb24gZGF5cyB0aGF0IGhhdmUgYSBjYWxlbmRhcmQgZXZlbnQgZnJvbSBhbiBleHRlcm5hbCBjYWxlbmRhciBzb3VyY2UsIGUuZy4gR29vZ2xlIENhbGVuZGFyLicpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0ljc0RvdClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dJY3NEb3QgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiQ2FsZW5kYXIgZG90IHNpemVcIikuc2V0RGVzYyhcIlRoZSBzaXplIChpbiBwaXhlbHMpIG9mIHRoZSBjb2xvcmVkIGRvdHMgdGhhdCBhcHBlYXIgdW5kZXIgY2FsZW5kYXIgZGF5cy4gRGVmYXVsdCBpcyA0LlwiKS5hZGRUZXh0KHRleHQgPT4gdGV4dC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FsZW5kYXJEb3RTaXplKSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLmNhbGVuZGFyRG90U2l6ZSA9IE51bWJlcih2YWx1ZSkgfHwgNDsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcblxuICAgICAgICAvLyAtLS0gRG90IENvbG9ycyBTZWN0aW9uIC0tLVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkRvdCBDb2xvcnNcIikuc2V0SGVhZGluZygpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiRGFpbHkgTm90ZVwiLCBcIlVzZWQgZm9yIGRhaWx5IG5vdGVzLlwiLCBcImRhaWx5Tm90ZURvdENvbG9yXCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiQ3JlYXRlZCBOb3RlXCIsIFwiVXNlcyB0aGUgY3JlYXRlZCBmaWxlIGRhdGUgZm9yIG5vdGVzLCBub3QgdXNlZCBmb3IgRGFpbHkgLyBXZWVrbHkgTm90ZXMuXCIsIFwibm90ZUNyZWF0ZWRDb2xvclwiKTtcbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIk1vZGlmaWVkIE5vdGVcIiwgXCJVc2VzIHRoZSBtb2RpZmllZCBmaWxlIGRhdGUgZm9yIG5vdGVzLCBub3QgdXNlZCBmb3IgRGFpbHkgLyBXZWVrbHkgTm90ZXMuXCIsIFwibm90ZU1vZGlmaWVkQ29sb3JcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJBc3NldCBOb3RlXCIsIFwiVXNlcyB0aGUgY3JlYXRlZCBmaWxlIGRhdGUgZm9yIG5ld2x5IGFkZGVkIGFzc2V0cy5cIiwgXCJhc3NldERvdENvbG9yXCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsICdDYWxlbmRhciBFdmVudCcsICdVc2VkIGZvciBldmVudHMgZnJvbSB5b3VyIGlDYWwvLmljcyBmZWVkLicsICdjYWxlbmRhckV2ZW50RG90Q29sb3InKTtcbiAgICAgICAgdGhpcy5jcmVhdGVJZ25vcmVkRm9sZGVyTGlzdChjb250YWluZXJFbCwgXCJJZ25vcmUgZm9sZGVycyBmb3Igbm90ZSBkb3RzXCIsIFwiRmlsZXMgaW4gdGhlc2UgZm9sZGVycyB3aWxsIG5vdCBjcmVhdGUgJ2NyZWF0ZWQnIG9yICdtb2RpZmllZCcgZG90cyBvbiB0aGUgY2FsZW5kYXIgZ3JpZCBvciBsaXN0cy5cIiwgJ290aGVyTm90ZUlnbm9yZUZvbGRlcnMnKTtcbiAgICAgICAgdGhpcy5jcmVhdGVJZ25vcmVkRm9sZGVyTGlzdChjb250YWluZXJFbCwgXCJJZ25vcmUgZm9sZGVycyBmb3IgYXNzZXQgZG90c1wiLCBcIkFzc2V0cyBpbiB0aGVzZSBmb2xkZXJzIHdpbGwgbm90IGNyZWF0ZSBkb3RzIG9uIHRoZSBjYWxlbmRhciBhbmQgbGlzdHMuXCIsICdhc3NldElnbm9yZUZvbGRlcnMnKTtcblxuICAgIH1cblxuICAgIHJlbmRlcldlZWtseU5vdGVzU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWw7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIldlZWtseSBOb3RlcyBTZXR0aW5nc1wiIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJFbmFibGUgV2Vla2x5IE5vdGVzXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkVuYWJsZSBjbGlja2luZyBvbiB3ZWVrIG51bWJlcnMgdG8gb3Blbi9jcmVhdGUgd2Vla2x5IG5vdGVzIGFuZCBzaG93IHRoZSBkb3QgaW5kaWNhdG9yLlwiKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVdlZWtseU5vdGVzKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlV2Vla2x5Tm90ZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJXZWVrbHkgTm90ZSBGb2xkZXJcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiVGhlIGZvbGRlciB3aGVyZSB5b3VyIHdlZWtseSBub3RlcyBhcmUgc3RvcmVkLiBJdCB3aWxsIGJlIGNyZWF0ZWQgaWYgaXQgZG9lc24ndCBleGlzdC5cIilcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlUGF0aFN1Z2dlc3Rlcih0ZXh0LmlucHV0RWwsIChxKSA9PiB0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBURm9sZGVyICYmICghcSB8fCBmLnBhdGgudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSkpLm1hcChmID0+IGYucGF0aCkpO1xuICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla2x5Tm90ZUZvbGRlcilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtseU5vdGVGb2xkZXIgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEluIHRoZSBQZXJpb2RTZXR0aW5nc1RhYiBjbGFzcywgaW5zaWRlIHJlbmRlcldlZWtseU5vdGVzU2V0dGluZ3MoKVxuICAgICAgICBjb25zdCB3ZWVrbHlGb3JtYXRTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJXZWVrbHkgTm90ZSBGb3JtYXRcIik7XG4gICAgICAgIHdlZWtseUZvcm1hdFNldHRpbmcuZGVzY0VsLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIFNldCB0aGUgZmlsZW5hbWUgZm9ybWF0IGZvciB3ZWVrbHkgbm90ZXMgdXNpbmcgZG90cywgaHlwaGVucywgb3Igb3RoZXIgc2VwYXJhdG9ycy5cbiAgICAgICAgICAgIDxicj5UaGUgZm9sbG93aW5nIHBsYWNlaG9sZGVycyB3aWxsIGJlIHJlcGxhY2VkIGF1dG9tYXRpY2FsbHk6XG4gICAgICAgICAgICA8YnI+PGNvZGU+WVlZWTwvY29kZT4gLSBUaGUgNC1kaWdpdCB5ZWFyIChlLmcuLCAyMDI1KVxuICAgICAgICAgICAgPGJyPjxjb2RlPk1NPC9jb2RlPiAtIFRoZSAyLWRpZ2l0IG1vbnRoIChlLmcuLCAwOClcbiAgICAgICAgICAgIDxicj48Y29kZT5QTjwvY29kZT4gLSBUaGUgUGVyaW9kIE51bWJlciB3aXRoIGEgJ1AnIHByZWZpeCAoZS5nLiwgUDgpXG4gICAgICAgICAgICA8YnI+PGNvZGU+UFc8L2NvZGU+IC0gVGhlIHdlZWsgbnVtYmVyIHdpdGhpbiB0aGUgcGVyaW9kIHdpdGggYSAnVycgcHJlZml4IChlLmcuLCBXMilcbiAgICAgICAgICAgIDxicj48Y29kZT5XS1A8L2NvZGU+IC0gVGhlIHdlZWsgbnVtYmVyICgxLTUyKSB3aXRoaW4geW91ciBjdXN0b20gcGVyaW9kIHllYXJcbiAgICAgICAgICAgIDxicj48Y29kZT5XS0M8L2NvZGU+IC0gVGhlIHN0YW5kYXJkIElTTyBjYWxlbmRhciB3ZWVrIG51bWJlciAoMS01MylcbiAgICAgICAgICAgIDxicj48YnI+PGI+RXhhbXBsZXM6PC9iPlxuICAgICAgICAgICAgPGJyPkZvcm1hdDogPGNvZGU+WVlZWS1NTS1QTlBXPC9jb2RlPiDihpIgRmlsZW5hbWU6IDxjb2RlPjIwMjUtMDgtUDhXMi5tZDwvY29kZT5cbiAgICAgICAgICAgIDxicj5Gb3JtYXQ6IDxjb2RlPllZWVktTU0tV0tQPC9jb2RlPiDihpIgRmlsZW5hbWU6IDxjb2RlPjIwMjUtMDgtMzAubWQ8L2NvZGU+XG4gICAgICAgICAgICA8YnI+Rm9ybWF0OiA8Y29kZT5ZWVlZLU1NLVdXS0M8L2NvZGU+IOKGkiBGaWxlbmFtZTogPGNvZGU+MjAyNS0wOC1XMzgubWQ8L2NvZGU+XG4gICAgICAgIGA7XG4gICAgICAgIHdlZWtseUZvcm1hdFNldHRpbmcuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrbHlOb3RlRm9ybWF0KVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtseU5vdGVGb3JtYXQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiV2Vla2x5IG5vdGUgdGVtcGxhdGVcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiUGF0aCB0byBhIHRlbXBsYXRlIGZpbGUgdG8gdXNlIHdoZW4gY3JlYXRpbmcgYSBuZXcgd2Vla2x5IG5vdGUuXCIpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVBhdGhTdWdnZXN0ZXIodGV4dC5pbnB1dEVsLCAocSkgPT4gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcihmID0+ICFxIHx8IGYucGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHEpKS5tYXAoZiA9PiBmLnBhdGgpKTtcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKFwiRXhhbXBsZTogVGVtcGxhdGVzL1dlZWtseS5tZFwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla2x5Tm90ZVRlbXBsYXRlKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrbHlOb3RlVGVtcGxhdGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiRG90IEluZGljYXRvclwiKS5zZXRIZWFkaW5nKCk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlNob3cgZG90IGZvciB3ZWVrbHkgbm90ZXNcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiU2hvdyBhIGRvdCBpbiB0aGUgd2VlayBudW1iZXIgY29sdW1uIGlmIGEgbm90ZSBmb3IgdGhhdCB3ZWVrIGV4aXN0cy5cIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93V2Vla2x5Tm90ZURvdClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dXZWVrbHlOb3RlRG90ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiV2Vla2x5IE5vdGUgRG90IENvbG9yXCIsIFwiVGhlIGNvbG9yIG9mIHRoZSBkb3QgZm9yIGV4aXN0aW5nIHdlZWtseSBub3Rlcy5cIiwgXCJ3ZWVrbHlOb3RlRG90Q29sb3JcIik7XG4gICAgfVxuXG4gICAgcmVuZGVyVGFza0luZGljYXRvclNldHRpbmdzKCkge1xuICAgICAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGVudEVsO1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJDYWxlbmRhciBUYXNrIEluZGljYXRvcnNcIiB9KTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlRhc2sgaW5kaWNhdG9yIHN0eWxlXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkNob29zZSBob3cgdG8gaW5kaWNhdGUgZGF5cyB3aXRoIHRhc2tzIG9uIHRoZSBjYWxlbmRhciBncmlkLlwiKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignbm9uZScsICdOb25lJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdiYWRnZScsICdOdW1iZXIgQmFkZ2UnKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2hlYXRtYXAnLCAnQ2VsbCBDb2xvciBIZWF0bWFwJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0luZGljYXRvclN0eWxlKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0luZGljYXRvclN0eWxlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSByZS1yZW5kZXIgdGhlIHNldHRpbmdzIGRpc3BsYXkgdG8gc2hvdy9oaWRlIHJlbGV2YW50IG9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGlzcGxheSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2hvdyBkb3QgZm9yIHRhc2tzXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlNob3cgYSBzaW5nbGUgZG90IG9uIGRheXMgd2l0aCB0YXNrcy4gVGhpcyBjYW4gYmUgdXNlZCB3aXRoIG9yIGluc3RlYWQgb2YgdGhlIGhlYXRtYXAvYmFkZ2UuXCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rhc2tEb3QpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VGFza0RvdCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIlRhc2sgRG90IENvbG9yXCIsIFwiVGhlIGNvbG9yIG9mIHRoZSBkb3QgaW5kaWNhdGluZyBhIGRheSBoYXMgdGFza3MuXCIsIFwidGFza0RvdENvbG9yXCIpO1xuXG4gICAgICAgIC8vIE9ubHkgc2hvdyB0aGUgYmFkZ2UvaGVhdG1hcCBzZXR0aW5ncyBpZiB0aGV5IGFyZSByZWxldmFudFxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0luZGljYXRvclN0eWxlID09PSAnYmFkZ2UnKSB7XG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIlRhc2sgYmFkZ2UgZm9udCBzaXplXCIpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJUaGUgZm9udCBzaXplIGZvciB0aGUgbnVtYmVyIGluc2lkZSB0aGUgdGFzayBiYWRnZS4gRGVmYXVsdCBpcyAxMXB4LlwiKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0JhZGdlRm9udFNpemUpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tCYWRnZUZvbnRTaXplID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiVGFzayBiYWRnZSBjb2xvclwiLCBcIlRoZSBiYWNrZ3JvdW5kIGNvbG9yIG9mIHRoZSB0YXNrIGNvdW50IGJhZGdlLlwiLCBcInRhc2tCYWRnZUNvbG9yXCIpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIlRhc2sgYmFkZ2UgZm9udCBjb2xvclwiLCBcIlRoZSBjb2xvciBvZiB0aGUgbnVtYmVyIGluc2lkZSB0aGUgdGFzayBjb3VudCBiYWRnZS5cIiwgXCJ0YXNrQmFkZ2VGb250Q29sb3JcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0luZGljYXRvclN0eWxlID09PSAnaGVhdG1hcCcpIHtcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJIZWF0bWFwIGNvbnRlbnQgYm9yZGVyIHdpZHRoXCIpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJXaWR0aCBvZiB0aGUgYm9yZGVyIGFyb3VuZCB0aGUgZGF5IGhlYXRtYXAgY29udGVudCBhcmVhIChlLmcuLCAxcHgsIDJweCwgM3B4KS4gQ3JlYXRlcyB2aXN1YWwgc2VwYXJhdGlvbiBpbnNpZGUgY2VsbHMuIERlZmF1bHQgaXMgMXB4LlwiKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCIxcHhcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnRlbnRCb3JkZXJXaWR0aClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGVudEJvcmRlcldpZHRoID0gdmFsdWUgfHwgXCIxcHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnQ29uZmlndXJlIHRoZSBzdGFydCwgbWlkZGxlLCBhbmQgZW5kIHBvaW50cyBvZiB0aGUgZHluYW1pYyBjb2xvciBncmFkaWVudC4gQ29sb3JzIHdpbGwgYmUgYmxlbmRlZCBzbW9vdGhseSBiZXR3ZWVuIHRoZXNlIHBvaW50cy4nLCBjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nIH0pO1xuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkdyYWRpZW50IE1pZHBvaW50XCIpLnNldERlc2MoXCJUaGUgbnVtYmVyIG9mIHRhc2tzIHRoYXQgc2hvdWxkIGhhdmUgdGhlIGV4YWN0ICdNaWQnIGNvbG9yLiBEZWZhdWx0IGlzIDUuXCIpLmFkZFRleHQodGV4dCA9PiB0ZXh0LnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrSGVhdG1hcE1pZHBvaW50KSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tIZWF0bWFwTWlkcG9pbnQgPSBOdW1iZXIodmFsdWUpIHx8IDU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkdyYWRpZW50IE1heHBvaW50XCIpLnNldERlc2MoXCJUaGUgbnVtYmVyIG9mIHRhc2tzIHRoYXQgc2hvdWxkIGhhdmUgdGhlIGV4YWN0ICdFbmQnIGNvbG9yLiBBbnkgZGF5IHdpdGggbW9yZSB0YXNrcyB3aWxsIGFsc28gdXNlIHRoZSBlbmQgY29sb3IuIERlZmF1bHQgaXMgMTAuXCIpLmFkZFRleHQodGV4dCA9PiB0ZXh0LnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrSGVhdG1hcE1heHBvaW50KSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tIZWF0bWFwTWF4cG9pbnQgPSBOdW1iZXIodmFsdWUpIHx8IDEwOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiSGVhdG1hcDogU3RhcnQgQ29sb3IgKDEgVGFzaylcIiwgXCJUaGUgY29sb3IgZm9yIGRheXMgd2l0aCAxIHRhc2suXCIsIFwidGFza0hlYXRtYXBTdGFydENvbG9yXCIpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIkhlYXRtYXA6IE1pZCBDb2xvclwiLCBcIlRoZSBjb2xvciBmb3IgZGF5cyBtZWV0aW5nIHRoZSAnTWlkcG9pbnQnIHRhc2sgY291bnQuXCIsIFwidGFza0hlYXRtYXBNaWRDb2xvclwiKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJIZWF0bWFwOiBFbmQgQ29sb3JcIiwgXCJUaGUgY29sb3IgZm9yIGRheXMgbWVldGluZyB0aGUgJ01heHBvaW50JyB0YXNrIGNvdW50LlwiLCBcInRhc2tIZWF0bWFwRW5kQ29sb3JcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJEcmFnZ2FibGVUYWJzKGNvbnRhaW5lcikge1xuICAgICAgICBjb250YWluZXIuZW1wdHkoKTsgLy8gQ2xlYXIgdGhlIGNvbnRhaW5lciBmaXJzdFxuXG4gICAgICAgIC8vIERlZmluZSBsYWJlbHMgZm9yIHRhYnNcbiAgICAgICAgY29uc3QgdGFiTGFiZWxzID0ge1xuICAgICAgICAgICAgc2NyYXRjaDogJ1NjcmF0Y2hQYWQnLFxuICAgICAgICAgICAgbm90ZXM6ICdOb3RlcycsXG4gICAgICAgICAgICB0YXNrczogJ1Rhc2tzJyxcbiAgICAgICAgICAgIGFzc2V0czogJ0Fzc2V0cycsXG4gICAgICAgICAgICBkYXNoYm9hcmQ6ICdEYXNoYm9hcmQnXG4gICAgICAgIH07XG5cbiAgICAgICAgbGV0IGRyYWdnZWRJdGVtID0gbnVsbDsgLy8gVG8ga2VlcCB0cmFjayBvZiB0aGUgaXRlbSBiZWluZyBkcmFnZ2VkXG5cbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiT3JkZXIuZm9yRWFjaCgoa2V5LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2V0dGluZ0l0ZW0gPSBjb250YWluZXIuY3JlYXRlRGl2KCdkcmFnZ2FibGUtaXRlbScpO1xuICAgICAgICAgICAgc2V0dGluZ0l0ZW0uZHJhZ2dhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIHNldHRpbmdJdGVtLmRhdGFzZXQudGFiS2V5ID0ga2V5O1xuXG4gICAgICAgICAgICAvLyBBZGQgYSBkcmFnIGhhbmRsZSBpY29uXG4gICAgICAgICAgICBjb25zdCBoYW5kbGUgPSBzZXR0aW5nSXRlbS5jcmVhdGVEaXYoJ2RyYWctaGFuZGxlJyk7XG4gICAgICAgICAgICBzZXRJY29uKGhhbmRsZSwgJ2dyaXAtdmVydGljYWwnKTtcblxuICAgICAgICAgICAgLy8gQWRkIHRoZSB0YWIncyBuYW1lXG4gICAgICAgICAgICBzZXR0aW5nSXRlbS5jcmVhdGVTcGFuKHsgdGV4dDogdGFiTGFiZWxzW2tleV0gfHwga2V5IH0pO1xuXG4gICAgICAgICAgICAvLyAtLS0gRHJhZyBhbmQgRHJvcCBFdmVudCBMaXN0ZW5lcnMgLS0tXG5cbiAgICAgICAgICAgIHNldHRpbmdJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZHJhZ2dlZEl0ZW0gPSBzZXR0aW5nSXRlbTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHNldHRpbmdJdGVtLmFkZENsYXNzKCdkcmFnZ2luZycpLCAwKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzZXR0aW5nSXRlbS5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBkcmFnZ2VkSXRlbT8ucmVtb3ZlQ2xhc3MoJ2RyYWdnaW5nJyk7XG4gICAgICAgICAgICAgICAgZHJhZ2dlZEl0ZW0gPSBudWxsO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHNldHRpbmdJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZHJhZ2dpbmdJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRyYWdnaW5nJyk7XG4gICAgICAgICAgICAgICAgaWYgKGRyYWdnaW5nSXRlbSAmJiBkcmFnZ2luZ0l0ZW0gIT09IHNldHRpbmdJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgYm91bmRpbmcgYm94IG9mIHRoZSBpdGVtIHdlJ3JlIGRyYWdnaW5nIG92ZXJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHNldHRpbmdJdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBhcmUgaW4gdGhlIHRvcCBvciBib3R0b20gaGFsZiBvZiB0aGUgaXRlbVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0FmdGVyID0gZS5jbGllbnRZID4gcmVjdC50b3AgKyByZWN0LmhlaWdodCAvIDI7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWZ0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluc2VydCB0aGUgZHJhZ2dlZCBpdGVtIGFmdGVyIHRoZSBjdXJyZW50IG9uZVxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ0l0ZW0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZHJhZ2dpbmdJdGVtLCBzZXR0aW5nSXRlbS5uZXh0U2libGluZyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnNlcnQgdGhlIGRyYWdnZWQgaXRlbSBiZWZvcmUgdGhlIGN1cnJlbnQgb25lXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nSXRlbS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkcmFnZ2luZ0l0ZW0sIHNldHRpbmdJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzZXR0aW5nSXRlbS5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3T3JkZXIgPSBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZHJlbikubWFwKGNoaWxkID0+IGNoaWxkLmRhdGFzZXQudGFiS2V5KTtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJPcmRlciA9IG5ld09yZGVyO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1RhYiBvcmRlciBzYXZlZCEnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXJUYWJzU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWw7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkdlbmVyYWwgVGFiIFNldHRpbmdzXCIgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkRlc2t0b3AgdGFiIGRpc3BsYXkgc3R5bGVcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiQ2hvb3NlIGhvdyB0YWIgbmFtZXMgYXJlIGRpc3BsYXllZCBpbiB0aGUgZGVza3RvcCBjbGllbnQuXCIpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCd0ZXh0JywgJ1RleHQgT25seScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignaWNvbkFuZFRleHQnLCAnSWNvbiBhbmQgVGV4dCcpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignaWNvbk9ubHknLCAnSWNvbiBPbmx5JylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiRGlzcGxheU1vZGUpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJEaXNwbGF5TW9kZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIk1vYmlsZSB0YWIgZGlzcGxheSBzdHlsZVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJDaG9vc2UgYSBkaWZmZXJlbnQsIG9mdGVuIG1vcmUgY29tcGFjdCwgZGlzcGxheSBzdHlsZSBmb3Igc21hbGxlciBtb2JpbGUgLyB0YWJsZXQgc2NyZWVucy5cIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ3RleHQnLCAnVGV4dCBPbmx5JylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdpY29uQW5kVGV4dCcsICdJY29uIGFuZCBUZXh0JylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdpY29uT25seScsICdJY29uIE9ubHknKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVUYWJEaXNwbGF5TW9kZSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZVRhYkRpc3BsYXlNb2RlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlRhYiB0aXRsZSBmb250IHNpemVcIikuc2V0RGVzYyhcIkZvbnQgc2l6ZSBmb3IgdGhlIHRhYiB0aXRsZXMgKFNjcmF0Y2hQYWQsIE5vdGVzLCBUYXNrcykuIERlZmF1bHQgaXMgMTVweC5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiVGl0bGVGb250U2l6ZSkub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJUaXRsZUZvbnRTaXplID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiQm9sZCB0YWIgdGl0bGVzXCIpLnNldERlc2MoXCJUb2dnbGVzIGJvbGQgZm9udCB3ZWlnaHQgZm9yIHRoZSB0YWIgdGl0bGVzLlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJUaXRsZUJvbGQpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiVGl0bGVCb2xkID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIkFjdGl2ZSBUYWIgSW5kaWNhdG9yXCIsIFwiVW5kZXJsaW5lIGNvbG9yIGZvciB0aGUgYWN0aXZlIHRhYi5cIiwgXCJzZWxlY3RlZFRhYkNvbG9yXCIpO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZURpdignc2V0dGluZy1zcGFjZXInKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdUYWIgT3JkZXInKVxuICAgICAgICAgICAgLnNldERlc2MoJ0RyYWcgYW5kIGRyb3AgdGhlIHRhYnMgdG8gc2V0IHRoZWlyIGRpc3BsYXkgb3JkZXIuJyk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgY29udGFpbmVyIGZvciBvdXIgZHJhZ2dhYmxlIGxpc3RcbiAgICAgICAgY29uc3QgdGFiT3JkZXJDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3RhYi1vcmRlci1jb250YWluZXInKTtcbiAgICAgICAgdGhpcy5yZW5kZXJEcmFnZ2FibGVUYWJzKHRhYk9yZGVyQ29udGFpbmVyKTtcblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3NldHRpbmctc3BhY2VyJyk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJUYWIgVmlzaWJpbGl0eVwiKS5zZXRIZWFkaW5nKCk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlNob3cgVGFza3MgdGFiXCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiVmlzaWJpbGl0eS50YXNrcylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYlZpc2liaWxpdHkudGFza3MgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJTaG93IFNjcmF0Y2hQYWQgdGFiXCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiVmlzaWJpbGl0eS5zY3JhdGNoKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiVmlzaWJpbGl0eS5zY3JhdGNoID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlNob3cgTm90ZXMgdGFiXCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiVmlzaWJpbGl0eS5ub3RlcylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYlZpc2liaWxpdHkubm90ZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJTaG93IEFzc2V0cyB0YWJcIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJWaXNpYmlsaXR5LmFzc2V0cylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYlZpc2liaWxpdHkuYXNzZXRzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnU2hvdyBEYXNoYm9hcmQgdGFiJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJWaXNpYmlsaXR5LmRhc2hib2FyZClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYlZpc2liaWxpdHkuZGFzaGJvYXJkID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgIH1cblxuICAgIHJlbmRlclNjcmF0Y2hwYWRTZXR0aW5ncygpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyRWwgPSB0aGlzLmNvbnRlbnRFbDtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiU2NyYXRjaFBhZCBUYWIgU2V0dGluZ3NcIiB9KTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJGdW5jdGlvbmFsaXR5XCIpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJTY3JhdGNoUGFkIHRhYiBjbGljayBhY3Rpb25cIikuc2V0RGVzYyhcIldoYXQgdG8gZG8gd2hlbiB0aGUgU2NyYXRjaFBhZCB0YWIgaXMgY2xpY2tlZCB3aGlsZSBpdCdzIGFscmVhZHkgYWN0aXZlLlwiKS5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93bi5hZGRPcHRpb24oJ25ldy10YWInLCAnT3BlbiBpbiBhIG5ldyB0YWInKS5hZGRPcHRpb24oJ2N1cnJlbnQtdGFiJywgJ09wZW4gaW4gdGhlIGN1cnJlbnQgdGFiJykuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaHBhZE9wZW5BY3Rpb24pLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNocGFkT3BlbkFjdGlvbiA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlNjcmF0Y2hQYWQgbm90ZSBwYXRoXCIpLnNldERlc2MoXCJUaGUgZnVsbCBwYXRoIHRvIHRoZSBub3RlIHRoYXQgdGhlIFNjcmF0Y2hQYWQgdGFiIHdpbGwgcmVhZCBmcm9tIGFuZCB3cml0ZSB0by5cIikuYWRkVGV4dCh0ZXh0ID0+IHsgdGhpcy5jcmVhdGVQYXRoU3VnZ2VzdGVyKHRleHQuaW5wdXRFbCwgKHEpID0+IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZiA9PiAhcSB8fCBmLnBhdGgudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSkubWFwKGYgPT4gZi5wYXRoKSk7IHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZml4ZWROb3RlRmlsZSkub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5maXhlZE5vdGVGaWxlID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KTsgfSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiU2hvdyBwcmV2aWV3L2VkaXQgYnV0dG9uXCIpLnNldERlc2MoXCJTaG93IHRoZSBidXR0b24gdG8gdG9nZ2xlIGJldHdlZW4gcGxhaW4gdGV4dCBlZGl0aW5nIGFuZCBhIHJlbmRlcmVkIE1hcmtkb3duIHByZXZpZXcuXCIpLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQ/LnNob3dQcmV2aWV3VG9nZ2xlID8/IGZhbHNlKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNocGFkKSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNocGFkID0ge307IHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQuc2hvd1ByZXZpZXdUb2dnbGUgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJTaG93ICcrIFRhc2snIGJ1dHRvblwiKS5zZXREZXNjKFwiU2hvdyB0aGUgYnV0dG9uIGluIHRoZSBzY3JhdGNocGFkIGFyZWEgdG8gcXVpY2tseSBhZGQgYSBuZXcgdGFzay5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaHBhZD8uc2hvd0FkZFRhc2tCdXR0b24gPz8gdHJ1ZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaHBhZCkgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaHBhZCA9IHt9OyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNocGFkLnNob3dBZGRUYXNrQnV0dG9uID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG5cbiAgICAgICAgY29uc3QgdGFza1RpdGxlU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiVGFzayBDcmVhdGlvbiBGb3JtYXRcIik7XG4gICAgICAgIHRhc2tUaXRsZVNldHRpbmcuZGVzY0VsLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgICBVc2UgdGhlIGZvbGxvd2luZyB0byBpbnNlcnQgYXMgcGxhY2Vob2xkZXJzIGZvciB0aGUgdGFzayBjcmVhdGlvbiBkYXRlOlxuICAgICAgICAgICAgICAgIDxicj48Y29kZT57dG9kYXl9PC9jb2RlPiwgPGNvZGU+e3RvbW9ycm93fTwvY29kZT5cbiAgICAgICAgICAgICAgICA8YnI+PGNvZGU+e21vbmRheX08L2NvZGU+LCA8Y29kZT57dHVlc2RheX08L2NvZGU+LCBldGMuIGZvciB0aGUgbmV4dCB1cGNvbWluZyBkYXkuXG4gICAgICAgICAgICAgICAgPGJyPjxjb2RlPntkYXRlfSs3PC9jb2RlPiBvciA8Y29kZT57ZGF0ZX0tMzwvY29kZT4gZm9yIGRhdGVzIGluIHRoZSBmdXR1cmUgb3IgcGFzdC5cbiAgICAgICAgICAgICAgICA8YnI+XG4gICAgICAgICAgICAgICAgPGJyPlVzZSA8Y29kZT58PC9jb2RlPiB0byBzZXQgdGhlIGZpbmFsIGN1cnNvciBwb3NpdGlvbi5cbiAgICAgICAgICAgIGA7XG5cbiAgICAgICAgdGFza1RpdGxlU2V0dGluZy5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiLSBbIF0gXCIpXG4gICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaHBhZD8udGFza0Zvcm1hdCB8fCBcIi0gWyBdIFwiKVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaHBhZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNocGFkID0ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQudGFza0Zvcm1hdCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiQXBwZWFyYW5jZVwiKS5zZXRIZWFkaW5nKCk7XG4gICAgICAgIFxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgLnNldE5hbWUoJ0hpZGUgbm90ZSBwcm9wZXJ0aWVzJylcbiAgICAgICAgLnNldERlc2MoJ0lmIGVuYWJsZWQsIHRoZSBmcm9udG1hdHRlciBwcm9wZXJ0aWVzIHRleHQgKHRleHQgYmV0d2VlbiAtLS0pIGF0IHRoZSB0b3Agb2YgdGhlIG5vdGUgd2lsbCBiZSBoaWRkZW4gZnJvbSB0aGUgU2NyYXRjaFBhZCB2aWV3LicpXG4gICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcbiAgICAgICAgICAgIC8vIEVuc3VyZSB0aGUgbmVzdGVkIG9iamVjdCBleGlzdHMgdG8gcHJldmVudCBlcnJvcnNcbiAgICAgICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaHBhZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNocGFkLmhpZGVGcm9udG1hdHRlciA/PyBmYWxzZSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQuaGlkZUZyb250bWF0dGVyID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaGVscGVyIHNhdmVzIHNldHRpbmdzIGFuZCByZWZyZXNoZXMgYW55IG9wZW4gcGx1Z2luIHZpZXdzXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlNjcmF0Y2hQYWQgZm9udCBzaXplXCIpLnNldERlc2MoXCJGb250IHNpemUgZm9yIHRoZSB0ZXh0IGluc2lkZSB0aGUgU2NyYXRjaFBhZCBlZGl0b3IuIERlZmF1bHQgaXMgMTRweC5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaEZvbnRTaXplKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hGb250U2l6ZSA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkJvbGQgU2NyYXRjaFBhZCB0ZXh0XCIpLnNldERlc2MoXCJUb2dnbGVzIGJvbGQgZm9udCB3ZWlnaHQgZm9yIHRoZSB0ZXh0IGluIHRoZSBTY3JhdGNoUGFkLlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNoQm9sZCkub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNoQm9sZCA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlNjcmF0Y2hQYWQgZm9udCBmYW1pbHlcIikuc2V0RGVzYyhcIkV4YW1wbGVzOiBtb25vc3BhY2UsIEFyaWFsLCAnQ291cmllciBOZXcnLiBMZWF2ZSBibGFuayB0byB1c2UgdGhlIGVkaXRvciBkZWZhdWx0LlwiKS5hZGRUZXh0KHRleHQgPT4gdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNoRm9udEZhbWlseSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hGb250RmFtaWx5ID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJTZWFyY2ggaGlnaGxpZ2h0IGNvbG9yXCIsIFwiVGhlIGJhY2tncm91bmQgY29sb3IgZm9yIHRoZSBzZWxlY3RlZCBzZWFyY2ggcmVzdWx0IGluIHRoZSBTY3JhdGNoUGFkLlwiLCBcInNjcmF0Y2hwYWRIaWdobGlnaHRDb2xvclwiKTtcblxuICAgIH1cblxuICAgIHJlbmRlck5vdGVzU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWw7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIk5vdGVzIFRhYiBTZXR0aW5nc1wiIH0pO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkZ1bmN0aW9uYWxpdHlcIikuc2V0SGVhZGluZygpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIk5vdGVzIHRhYiBvcGVuIGJlaGF2aW9yXCIpLnNldERlc2MoXCJDaG9vc2UgaG93IHRvIG9wZW4gbm90ZXMgd2hlbiBjbGlja2VkIGZyb20gdGhlIG5vdGVzIGxpc3QuIE5PVEU6IEhvbGRpbmcgdGhlIHNoaWZ0IGtleSBhbmQgY2xpY2tpbmcgYSBub3RlIHdpbGwgYWx3YXlzIG9wZW4gaXQgaW4gYSBuZXcgdGFiLlwiKS5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93bi5hZGRPcHRpb24oJ25ldy10YWInLCAnT3BlbiBpbiBhIG5ldyB0YWInKS5hZGRPcHRpb24oJ2N1cnJlbnQtdGFiJywgJ09wZW4gaW4gdGhlIGN1cnJlbnQgdGFiJykuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZXNPcGVuQWN0aW9uKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZXNPcGVuQWN0aW9uID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiTm90ZXMgbG9va2JhY2sgZGF5c1wiKS5zZXREZXNjKFwiSG93IG1hbnkgZGF5cyBiYWNrIHRoZSBOb3RlcyB0YWIgc2hvdWxkIGxvb2sgZm9yIGNyZWF0ZWQgb3IgbW9kaWZpZWQgbm90ZXMuIERlZmF1bHQgaXMgMTIwLlwiKS5hZGRUZXh0KHRleHQgPT4gdGV4dC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZXNMb29rYmFja0RheXMpKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVzTG9va2JhY2tEYXlzID0gTnVtYmVyKHZhbHVlKSB8fCA3OyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiQXBwZWFyYW5jZVwiKS5zZXRIZWFkaW5nKCk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiU2hvdyBub3RlIHN0YXR1cyBkb3RzXCIpLnNldERlc2MoXCJTaG93IGEgY29sb3JlZCBkb3QgbmV4dCB0byBlYWNoIG5vdGUsIGluZGljYXRpbmcgaWYgaXQgd2FzIHJlY2VudGx5IGNyZWF0ZWQgb3IgbW9kaWZpZWQuXCIpLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dOb3RlU3RhdHVzRG90cykub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Tm90ZVN0YXR1c0RvdHMgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJTaG93IG5vdGUgdG9vbHRpcHNcIikuc2V0RGVzYyhcIlNob3cgYSBkZXRhaWxlZCB0b29sdGlwIG9uIGhvdmVyLCBjb250YWluaW5nIG5vdGUgcGF0aCwgZGF0ZXMsIHNpemUsIGFuZCB0YWdzLlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Tm90ZVRvb2x0aXBzKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dOb3RlVG9vbHRpcHMgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJOb3RlcyBsaXN0IGZvbnQgc2l6ZVwiKS5zZXREZXNjKFwiRm9udCBzaXplIGZvciBub3RlIHRpdGxlcyBpbiB0aGUgbGlzdC4gRGVmYXVsdCBpcyAxNHB4LlwiKS5hZGRUZXh0KHRleHQgPT4gdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub3Rlc0ZvbnRTaXplKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVzRm9udFNpemUgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJCb2xkIG5vdGUgdGl0bGVzXCIpLnNldERlc2MoXCJUb2dnbGVzIGJvbGQgZm9udCB3ZWlnaHQgZm9yIG5vdGUgdGl0bGVzIGluIHRoZSBsaXN0LlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub3Rlc0JvbGQpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZXNCb2xkID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJOb3RlL1Rhc2sgSG92ZXIgQ29sb3JcIiwgXCJCYWNrZ3JvdW5kIGNvbG9yIHdoZW4gaG92ZXJpbmcgYSBub3RlIG9yIHRhc2sgaW4gYSBsaXN0LlwiLCBcIm5vdGVzSG92ZXJDb2xvclwiKTtcbiAgICAgICAgdGhpcy5jcmVhdGVJZ25vcmVkRm9sZGVyTGlzdChjb250YWluZXJFbCwgXCJJZ25vcmUgZm9sZGVycyBpbiBOb3RlcyB0YWJcIiwgXCJGaWxlcyBpbiB0aGVzZSBmb2xkZXJzIHdpbGwgbm90IGFwcGVhciBpbiB0aGUgJ05vdGVzJyBsaXN0LlwiLCAnaWdub3JlRm9sZGVycycpO1xuXG4gICAgfVxuXG4gICAgcmVuZGVyUGlubmVkTm90ZXNTZXR0aW5ncygpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyRWwgPSB0aGlzLmNvbnRlbnRFbDsgLy8gQWxsIHNldHRpbmdzIHdpbGwgYmUgcmVuZGVyZWQgaW50byB0aGlzIGVsZW1lbnRcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gxJywgeyB0ZXh0OiAnUGlubmVkIE5vdGVzIFNldHRpbmdzJyB9KTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoJ0Z1bmN0aW9uYWxpdHknKS5zZXRIZWFkaW5nKCk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJQaW5uZWQgbm90ZXMgdGFnXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlRoZSB0YWcgdG8gdXNlIGZvciBwaW5uZWQgbm90ZXMsIGVudGVyIGluIHRoZSB0ZXh0IGJveCB3aXRob3V0IHRoZSAnIycuIEZvciBub3RlcyB0byBhcHBlYXIgaW4gdGhlIHBpbm5lZCB0YWIsIChhY2Nlc3NlZCB3aXRoIGFub3RoZXIgY2xpY2sgb24gdGhlIG5vdGVzIHRhYiBpY29uIG9uY2UgaXQgaGFzIGZvY3VzKSwgYW5kIGlmIHlvdSBzZXQgJ3BpbicgYXMgdGhlIHRhZyBuYW1lLCB0aGVuIGluIHlvdXIgbm90ZXMgYWRkICNwaW4gaW4gdGhlIGJvZHkgb3IgcHJvcGVydGllcyB0YWcgc2VjdGlvbi4gRGVmYXVsdCBpcyAncGluJy5cIilcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5waW5UYWcpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5waW5UYWcgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKCdTb3J0IE9yZGVyJykuc2V0SGVhZGluZygpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdEZWZhdWx0IHNvcnQgb3JkZXInKVxuICAgICAgICAgICAgLnNldERlc2MoXCJDaG9vc2UgdGhlIGRlZmF1bHQgc29ydCBvcmRlciBmb3IgcGlubmVkIG5vdGVzIHdoZW4gdGhlIHBsdWdpbiBpcyBsb2FkZWQuIFRvIGNoYW5nZSB0aGUgb3JkZXIgY2xpY2sgb24gdGhlIFBJTk5FRCBOT1RFUyB0aXRsZSBpbiB0aGUgbWFpbiB2aWV3LlwiKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignYS16JywgJ0EtWiAoRGVmYXVsdCknKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ3otYScsICdaLUEnKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2N1c3RvbScsICdDdXN0b20gT3JkZXInKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5waW5uZWROb3Rlc1NvcnRPcmRlcilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnBpbm5lZE5vdGVzU29ydE9yZGVyID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBjb25zdCBpc01hYyA9IFBsYXRmb3JtLmlzTWFjT1M7XG4gICAgICAgIGNvbnN0IG1vZGlmaWVyS2V5ID0gaXNNYWMgPyAnT3B0aW9uICjijKUpJyA6ICdDdHJsJztcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdIb3cgdG8gY2hhbmdlIHRoZSBzb3J0IG9yZGVyIGluIHRoZSBtYWluIHZpZXcnKVxuICAgICAgICAgICAgLnNldERlc2MoYENsaWNrIHRoZSBcIlBJTk5FRCBOT1RFU1wiIGhlYWRlciBpbiB0aGUgbWFpbiB2aWV3IHRvIGN5Y2xlIGJldHdlZW4gQS1aLCBaLUEsIGFuZCBDdXN0b20gc29ydCBvcmRlcnMuXFxuXFxuV2hlbiBpbiBDdXN0b20gb3JkZXIsIGhvbGQgJHttb2RpZmllcktleX0gYW5kIGRyYWcgbm90ZXMgdG8gcmVvcmRlciB0aGVtLmApO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1NldCBDdXN0b20gT3JkZXInKVxuICAgICAgICAgICAgLnNldERlc2MoJ0RyYWcgYW5kIGRyb3AgdGhlIG5vdGVzIGJlbG93IHRvIHNldCB5b3VyIHByZWZlcnJlZCBtYW51YWwgb3JkZXIuJyk7XG5cbiAgICAgICAgY29uc3QgZHJhZ2dhYmxlQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCdwaW5uZWQtbm90ZXMtb3JkZXItY29udGFpbmVyJyk7XG4gICAgICAgIHRoaXMucmVuZGVyRHJhZ2dhYmxlUGlubmVkTm90ZXMoZHJhZ2dhYmxlQ29udGFpbmVyKTtcbiAgICB9XG5cbiAgICByZW5kZXJBc3NldHNTZXR0aW5ncygpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyRWwgPSB0aGlzLmNvbnRlbnRFbDtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiQXNzZXRzIFRhYiBTZXR0aW5nc1wiIH0pO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQXNzZXQgb3BlbiBiZWhhdmlvclwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJDaG9vc2UgaG93IHRvIG9wZW4gYXNzZXRzIHdoZW4gY2xpY2tlZCBmcm9tIHRoZSBBc3NldHMgbGlzdC5cIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ25ldy10YWInLCAnT3BlbiBpbiBhIG5ldyB0YWInKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2N1cnJlbnQtdGFiJywgJ09wZW4gaW4gdGhlIGN1cnJlbnQgdGFiJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXNzZXRzT3BlbkFjdGlvbilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFzc2V0c09wZW5BY3Rpb24gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0RlZmF1bHQgYXNzZXRzIHZpZXcnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0Nob29zZSB0aGUgZGVmYXVsdCBsYXlvdXQgZm9yIHRoZSBhc3NldHMgdGFiLicpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdsaXN0JywgJ0xpc3QnKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dyaWQnLCAnR3JpZCcpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFzc2V0c0RlZmF1bHRWaWV3KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXNzZXRzRGVmYXVsdFZpZXcgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJBc3NldHMgbG9va2JhY2sgZGF5c1wiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJIb3cgbWFueSBkYXlzIGJhY2sgdGhlIEFzc2V0cyB0YWIgc2hvdWxkIGxvb2sgZm9yIGNyZWF0ZWQgb3IgbW9kaWZpZWQgbm90ZXMuIERlZmF1bHQgaXMgMTIwLlwiKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hc3NldHNMb29rYmFja0RheXMpKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFzc2V0c0xvb2tiYWNrRGF5cyA9IE51bWJlcih2YWx1ZSkgfHwgNztcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJIaWRkZW4gYXNzZXQgZmlsZSB0eXBlc1wiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJBIGNvbW1hLXNlcGFyYXRlZCBsaXN0IG9mIGZpbGUgZXh0ZW5zaW9ucyB0byBoaWRlIGZyb20gdGhlIEFzc2V0cyB0YWIgYW5kIGNhbGVuZGFyIGRvdHMgKGUuZy4sIGpwZyxwZGYsemlwKS4gRGVmYXVsdCBpcyBiYXNlLGNhbnZhcy5cIilcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcImUuZy4sIGpwZyxwZGYsemlwXCIpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGRlbkFzc2V0VHlwZXMpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWRkZW5Bc3NldFR5cGVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlNob3cgaW5kaWNhdG9yIGZvciB1bnVzZWQgYXNzZXRzXCIpLnNldERlc2MoXCJBbiBpY29uIHdpbGwgYXBwZWFyIG5leHQgdG8gYXNzZXRzIHRoYXQgYXJlIG5vdCBsaW5rZWQgb3IgZW1iZWRkZWQgaW4gYW55IG5vdGUsIGFsbG93aW5nIGZvciBlYXNpZXIgZGV0ZWN0aW9uIHRvIGRlbGV0ZS5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1VudXNlZEFzc2V0c0luZGljYXRvcikub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dVbnVzZWRBc3NldHNJbmRpY2F0b3IgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcblxuICAgIH1cblxuICAgIHJlbmRlclRhc2tzU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWw7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIlRhc2tzIFRhYiBTZXR0aW5nc1wiIH0pO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkRpc3BsYXkgJiBTb3J0aW5nXCIpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJUYXNrIGdyb3VwIGhlYWRpbmcgZm9udCBzaXplXCIpLnNldERlc2MoXCJUaGUgZm9udCBzaXplIGZvciB0aGUgZGF0ZS90YWcgZ3JvdXAgaGVhZGluZ3MgKGUuZy4sICdPdmVyZHVlJywgJ1RvZGF5JykuIERlZmF1bHQgaXMgMTNweC5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0hlYWRpbmdGb250U2l6ZSkub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrSGVhZGluZ0ZvbnRTaXplID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiVGFzayB0ZXh0IGZvbnQgc2l6ZVwiKS5zZXREZXNjKFwiVGhlIGZvbnQgc2l6ZSBmb3IgdGhlIGluZGl2aWR1YWwgdGFzayBpdGVtcyBpbiB0aGUgbGlzdC4gRGVmYXVsdCBpcyAxNHB4LlwiKS5hZGRUZXh0KHRleHQgPT4gdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrVGV4dEZvbnRTaXplKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tUZXh0Rm9udFNpemUgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJUcnVuY2F0ZSBsb25nIHRhc2sgdGV4dFwiKS5zZXREZXNjKFwiSWYgZW5hYmxlZCwgbG9uZyB0YXNrcyB3aWxsIGJlIHNob3J0ZW5lZCB3aXRoICcuLi4nLiBJZiBkaXNhYmxlZCwgdGhleSB3aWxsIHdyYXAgdG8gbXVsdGlwbGUgbGluZXMuXCIpLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tUZXh0VHJ1bmNhdGUpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrVGV4dFRydW5jYXRlID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiU2hvdyBjb21wbGV0ZWQgdGFza3MgZm9yIFRvZGF5XCIpLnNldERlc2MoXCJJZiBlbmFibGVkLCB0YXNrcyB0aGF0IHlvdSBtYXJrZWQgYXMgY29tcGxldGUgdG9kYXkgd2lsbCBhcHBlYXIgaW4gdGhlIGxpc3RzIChyZWdhcmRsZXNzIG9mIHRoZWlyIGR1ZSBkYXRlKS5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0NvbXBsZXRlZFRhc2tzVG9kYXkpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Q29tcGxldGVkVGFza3NUb2RheSA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlRhc2sgc29ydCBvcmRlclwiKS5zZXREZXNjKFwiVGhlIGRlZmF1bHQgb3JkZXIgZm9yIHRhc2tzIHdpdGhpbiBlYWNoIGdyb3VwLlwiKS5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93bi5hZGRPcHRpb24oJ2R1ZURhdGUnLCAnQnkgRHVlIERhdGUgKGVhcmxpZXN0IGZpcnN0KScpLmFkZE9wdGlvbignYS16JywgJ0EtWicpLmFkZE9wdGlvbignei1hJywgJ1otQScpLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tTb3J0T3JkZXIpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrU29ydE9yZGVyID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiR3JvdXAgdGFza3MgYnlcIikuc2V0RGVzYyhcIkNob29zZSBob3cgdG8gZ3JvdXAgdGFza3MgaW4gdGhlIHZpZXcuIFNlY29uZC1jbGlja2luZyB0aGUgVGFza3MgdGFiIHdpbGwgYWxzbyB0b2dnbGUgdGhpcy5cIikuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd24uYWRkT3B0aW9uKCdkYXRlJywgJ0RhdGUgKE92ZXJkdWUsIFRvZGF5LCBldGMuKScpLmFkZE9wdGlvbigndGFnJywgJ1RhZycpLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tHcm91cEJ5KS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0dyb3VwQnkgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IHRoaXMucmVmcmVzaERpc3BsYXkoKTsgfSkpO1xuXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrR3JvdXBCeSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkRhdGUgR3JvdXBzIHRvIFNob3dcIikuc2V0SGVhZGluZygpO1xuICAgICAgICAgICAgY29uc3QgZGF0ZUdyb3VwcyA9IFt7IGtleTogJ292ZXJkdWUnLCBuYW1lOiAnT3ZlcmR1ZScgfSwgeyBrZXk6ICd0b2RheScsIG5hbWU6ICdUb2RheScgfSwgeyBrZXk6ICd0b21vcnJvdycsIG5hbWU6ICdUb21vcnJvdycgfSwgeyBrZXk6ICduZXh0N2RheXMnLCBuYW1lOiAnTmV4dCA3IERheXMnIH0sIHsga2V5OiAnZnV0dXJlJywgbmFtZTogJ0Z1dHVyZScgfSxdO1xuICAgICAgICAgICAgZGF0ZUdyb3Vwcy5mb3JFYWNoKGcgPT4geyBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShnLm5hbWUpLmFkZFRvZ2dsZSh0ID0+IHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0RhdGVHcm91cHNUb1Nob3cuaW5jbHVkZXMoZy5rZXkpKS5vbkNoYW5nZShhc3luYyB2ID0+IHsgY29uc3QgZ3JvdXBzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0RhdGVHcm91cHNUb1Nob3c7IGlmICh2ICYmICFncm91cHMuaW5jbHVkZXMoZy5rZXkpKSBncm91cHMucHVzaChnLmtleSk7IGVsc2UgaWYgKCF2KSB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrRGF0ZUdyb3Vwc1RvU2hvdyA9IGdyb3Vwcy5maWx0ZXIoaSA9PiBpICE9PSBnLmtleSk7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7IH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJDb250ZW50ICYgQXBwZWFyYW5jZVwiKS5zZXRIZWFkaW5nKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlSWdub3JlZEZvbGRlckxpc3QoY29udGFpbmVyRWwsIFwiRXhjbHVkZSBmb2xkZXJzIGZyb20gVGFzayBzZWFyY2hcIiwgXCJUYXNrcyBpbiB0aGVzZSBmb2xkZXJzIHdpbGwgbm90IGFwcGVhciBpbiB0aGUgJ1Rhc2tzJyBsaXN0LlwiLCAndGFza0lnbm9yZUZvbGRlcnMnKTtcblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdUYXNrIEdyb3VwIEljb25zJyB9KTtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdDdXN0b21pemUgdGhlIGljb24gZGlzcGxheWVkIG5leHQgdG8gZWFjaCB0YXNrIGdyb3VwIGhlYWRlci4nLCBjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nIH0pO1xuXG4gICAgICAgIGNvbnN0IHRhc2tHcm91cEljb25TZXR0aW5ncyA9IFtcbiAgICAgICAgICAgIHsga2V5OiAnb3ZlcmR1ZScsIG5hbWU6ICdPdmVyZHVlIGljb24nIH0sXG4gICAgICAgICAgICB7IGtleTogJ3RvZGF5JywgbmFtZTogJ1RvZGF5IGljb24nIH0sXG4gICAgICAgICAgICB7IGtleTogJ3RvbW9ycm93JywgbmFtZTogJ1RvbW9ycm93IGljb24nIH0sXG4gICAgICAgICAgICB7IGtleTogJ25leHQ3ZGF5cycsIG5hbWU6ICdOZXh0IDcgRGF5cyBpY29uJyB9LFxuICAgICAgICAgICAgeyBrZXk6ICdmdXR1cmUnLCBuYW1lOiAnRnV0dXJlIGljb24nIH0sXG4gICAgICAgICAgICB7IGtleTogJ25vRGF0ZScsIG5hbWU6ICdObyBEdWUgRGF0ZSBpY29uJyB9LFxuICAgICAgICAgICAgeyBrZXk6ICd0YWcnLCBuYW1lOiAnVGFnIEdyb3VwIGljb24nIH1cbiAgICAgICAgXTtcblxuICAgICAgICAvLyBMb29wIHRocm91Z2ggdGhlIHNldHRpbmdzIHRvIGNyZWF0ZSBlYWNoIGlucHV0IGZpZWxkIGFuZCBpdHMgcmVzZXQgYnV0dG9uXG4gICAgICAgIHRhc2tHcm91cEljb25TZXR0aW5ncy5mb3JFYWNoKHMgPT4ge1xuICAgICAgICAgICAgbGV0IHRleHRDb21wb25lbnQ7IC8vIFRoaXMgd2lsbCBob2xkIGEgcmVmZXJlbmNlIHRvIHRoZSB0ZXh0IGlucHV0XG5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgICAgIC5zZXROYW1lKHMubmFtZSlcbiAgICAgICAgICAgICAgICAuc2V0RGVzYygnRW50ZXIgYW55IEx1Y2lkZSBpY29uIG5hbWUuJylcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dENvbXBvbmVudCA9IHRleHQ7IC8vIFN0b3JlIHRoZSByZWZlcmVuY2VcbiAgICAgICAgICAgICAgICAgICAgdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tHcm91cEljb25zW3Mua2V5XSB8fCBERUZBVUxUX1NFVFRJTkdTLnRhc2tHcm91cEljb25zW3Mua2V5XSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrR3JvdXBJY29uc1tzLmtleV0gPSB2YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgICAgICAgICBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCdyb3RhdGUtY2N3JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdSZXNldCB0byBkZWZhdWx0JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSB0aGlzLmN1cnJlbnRUaGVtZURlZmF1bHRzLnRhYkljb25zW3Mua2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrR3JvdXBJY29uc1tzLmtleV0gPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRleHRDb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENvbXBvbmVudC5zZXRWYWx1ZShkZWZhdWx0VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYCcke3MubmFtZX0nIHJlc2V0IHRvIGRlZmF1bHQuYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnUmVzZXQgQWxsIFRhc2sgR3JvdXAgSWNvbnMnKVxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdSZXNldHMgYWxsIHRhc2sgZ3JvdXAgaWNvbnMgdG8gdGhlaXIgb3JpZ2luYWwgdmFsdWVzJylcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcmVzZXQgYWxsIHRhc2sgZ3JvdXAgaWNvbnM/JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tHcm91cEljb25zID0geyAuLi5ERUZBVUxUX1NFVFRJTkdTLnRhc2tHcm91cEljb25zIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0FsbCB0YXNrIGdyb3VwIGljb25zIGhhdmUgYmVlbiByZXNldC4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaERpc3BsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlRhc2sgR3JvdXAgQmFja2dyb3VuZHNcIikuc2V0SGVhZGluZygpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiT3ZlcmR1ZVwiLCBcIkJhY2tncm91bmQgY29sb3IgZm9yIHRoZSAnT3ZlcmR1ZScgdGFzayBncm91cC5cIiwgXCJ0YXNrR3JvdXBDb2xvck92ZXJkdWVcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJUb2RheVwiLCBcIkJhY2tncm91bmQgY29sb3IgZm9yIHRoZSAnVG9kYXknIHRhc2sgZ3JvdXAuXCIsIFwidGFza0dyb3VwQ29sb3JUb2RheVwiKTtcbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIlRvbW9ycm93XCIsIFwiQmFja2dyb3VuZCBjb2xvciBmb3IgdGhlICdUb21vcnJvdycgdGFzayBncm91cC5cIiwgXCJ0YXNrR3JvdXBDb2xvclRvbW9ycm93XCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiTmV4dCA3IERheXNcIiwgXCJCYWNrZ3JvdW5kIGNvbG9yIGZvciB0aGUgJ05leHQgNyBEYXlzJyB0YXNrIGdyb3VwLlwiLCBcInRhc2tHcm91cENvbG9yTmV4dDdEYXlzXCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiRnV0dXJlXCIsIFwiQmFja2dyb3VuZCBjb2xvciBmb3IgJ0Z1dHVyZScgdGFzayBncm91cC5cIiwgXCJ0YXNrR3JvdXBDb2xvckZ1dHVyZVwiKTtcbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIk5vIER1ZSBEYXRlXCIsIFwiQmFja2dyb3VuZCBjb2xvciBmb3IgdGhlICdObyBEdWUgRGF0ZScgdGFzayBncm91cC5cIiwgXCJ0YXNrR3JvdXBDb2xvck5vRGF0ZVwiKTtcbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIlRhZ1wiLCBcIkJhY2tncm91bmQgY29sb3IgZm9yIHRhc2sgZ3JvdXBzIHdoZW4gZ3JvdXBlZCBieSB0YWcuXCIsIFwidGFza0dyb3VwQ29sb3JUYWdcIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyB0aGUgZW50aXJlIFwiRGFzaGJvYXJkXCIgc2V0dGluZ3MgdGFiLlxuICAgICAqIFRoaXMgaXMgdGhlIGZpbmFsLCBjb3JyZWN0ZWQgdmVyc2lvbiB0aGF0IGhhbmRsZXMgYWxsIGV2ZW50cyBhbmQgc3RhdGUgcHJvcGVybHkuXG4gICAgICovXG4gICAgcmVuZGVyRGFzaGJvYXJkU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGVudEVsO1xuICAgICAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgY29udGFpbmVyLmNyZWF0ZUVsKCdoMScsIHsgdGV4dDogJ0Rhc2hib2FyZCBUYWIgU2V0dGluZ3MnIH0pO1xuXG4gICAgICAgIHRoaXMuZHJhZ2dlZEl0ZW0gPSBudWxsO1xuICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gbnVsbDtcblxuICAgICAgICBjb25zdCBoYW5kbGVNb3VzZU1vdmUgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmRyYWdnZWRJdGVtKSByZXR1cm47XG4gICAgICAgICAgICBjb25zdCBkcmFnZ2FibGVDb250YWluZXIgPSB0aGlzLmRyYWdnZWRJdGVtLmNsb3Nlc3QoJy5wbS1kcmFnZ2FibGUtd2lkZ2V0LWxpc3QnKTtcbiAgICAgICAgICAgIGlmICghZHJhZ2dhYmxlQ29udGFpbmVyKSByZXR1cm47XG4gICAgICAgICAgICBjb25zdCBvdGhlckl0ZW1zID0gQXJyYXkuZnJvbShkcmFnZ2FibGVDb250YWluZXIuY2hpbGRyZW4pLmZpbHRlcihjaGlsZCA9PiBjaGlsZCAhPT0gdGhpcy5kcmFnZ2VkSXRlbSAmJiBjaGlsZCAhPT0gdGhpcy5wbGFjZWhvbGRlcik7XG4gICAgICAgICAgICBsZXQgdGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBvdGhlckl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IGl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGUuY2xpZW50WSA+IHJlY3QudG9wICYmIGUuY2xpZW50WSA8IHJlY3QuYm90dG9tKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IGl0ZW07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzQWZ0ZXIgPSBlLmNsaWVudFkgPiByZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICB0YXJnZXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5wbGFjZWhvbGRlciwgaXNBZnRlciA/IHRhcmdldC5uZXh0U2libGluZyA6IHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaGFuZGxlTW91c2VVcCA9IGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZHJhZ2dlZEl0ZW0pIHJldHVybjtcbiAgICAgICAgICAgIGlmICh0aGlzLnBsYWNlaG9sZGVyICYmIHRoaXMucGxhY2Vob2xkZXIucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5kcmFnZ2VkSXRlbSwgdGhpcy5wbGFjZWhvbGRlcik7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlci5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZHJhZ2dlZEl0ZW0ucmVtb3ZlQ2xhc3MoJ2RyYWdnaW5nJyk7XG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmRyYWdnZWRJdGVtLmNsb3Nlc3QoJy5wbS1kcmFnZ2FibGUtd2lkZ2V0LWxpc3QnKTtcbiAgICAgICAgICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcmRlcktleSA9IGNvbnRhaW5lci5kYXRhc2V0Lm9yZGVyS2V5O1xuICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gY29udGFpbmVyLmRhdGFzZXQudGl0bGU7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3T3JkZXIgPSBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZHJlbikubWFwKGNoaWxkID0+IGNoaWxkLmRhdGFzZXQud2lkZ2V0S2V5KTtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5nc1tvcmRlcktleV0gPSBuZXdPcmRlcjtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAvL25ldyBOb3RpY2UoYCR7dGl0bGV9IG9yZGVyIHNhdmVkLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kcmFnZ2VkSXRlbSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBoYW5kbGVNb3VzZU1vdmUpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgaGFuZGxlTW91c2VVcCk7XG4gICAgICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyKCgpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlTW92ZSk7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgaGFuZGxlTW91c2VVcCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXROYW1lKCdEZWZhdWx0IERhc2hib2FyZCBWaWV3JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdDaG9vc2Ugd2hpY2ggZGFzaGJvYXJkIHRvIHNob3cgYnkgZGVmYXVsdC4nKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbigndGFza3MnLCAnVGFza3MgRGFzaGJvYXJkJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjcmVhdGlvbicsICdGaWxlIENyZWF0aW9uIERhc2hib2FyZCcpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHREYXNoYm9hcmRWaWV3KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdERhc2hib2FyZFZpZXcgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgLy9hd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0N1c3RvbSBEYXRlIEZvcm1hdHMgZm9yIFBhcnNpbmcnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0ZvciB0aGUgXCJEYXRlIGZyb20gTm90ZSBUaXRsZVwiIGhlYXRtYXAgc291cmNlLiBQcm92aWRlIGEgY29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgZm9ybWF0cyB0byBjaGVjayBmb3IuIFRoZSBwbHVnaW4gd2lsbCB0cnkgdGhlbSBpbiBvcmRlci4gRS5nLiwgREQtTU0tWVlZWSxZWVlZLU1NLUREIG9yIE1NLURELVlZWVksIFlZWVktTU0tREQuJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignWVlZWS1NTS1ERCxERC1NTS1ZWVlZJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tRGF0ZUZvcm1hdHMpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21EYXRlRm9ybWF0cyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmctc3BhY2VyJyB9KTtcbiAgICAgICAgdGhpcy5yZW5kZXJXaWRnZXRTZXR0aW5ncyhjb250YWluZXIsICdUYXNrcyBEYXNoYm9hcmQgV2lkZ2V0cyAoT3JkZXIgYW5kIFRvZ2dsZSBEaXNwbGF5KScsICd0YXNrc0Rhc2hib2FyZFdpZGdldHMnLCAndGFza3NEYXNoYm9hcmRPcmRlcicsIERBU0hCT0FSRFdJREdFVFMudGFza3MpO1xuICAgICAgICBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2V0dGluZy1zcGFjZXInIH0pO1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lcikuc2V0TmFtZShcIlRhc2sgU3RhdHVzIENvbG91cnNcIikuc2V0SGVhZGluZygpO1xuXG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIFwiQ2FuY2VsbGVkXCIsXG4gICAgICAgICAgICBcIkNvbG91ciBmb3IgY2FuY2VsbGVkIHRhc2tzIGluIHdpZGdldHMuXCIsXG4gICAgICAgICAgICBcInRhc2tTdGF0dXNDb2xvckNhbmNlbGxlZFwiXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKFxuICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgXCJPdmVyZHVlXCIsXG4gICAgICAgICAgICBcIkNvbG91ciBmb3Igb3ZlcmR1ZSB0YXNrcyBpbiB3aWRnZXRzIGFuZCBoZWF0bWFwcy5cIixcbiAgICAgICAgICAgIFwidGFza1N0YXR1c0NvbG9yT3ZlcmR1ZVwiXG4gICAgICAgICk7XG4gICAgICAgXG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIFwiSW4gUHJvZ3Jlc3NcIixcbiAgICAgICAgICAgIFwiQ29sb3VyIGZvciBpbi1wcm9ncmVzcyB0YXNrcyBpbiB3aWRnZXRzLlwiLFxuICAgICAgICAgICAgXCJ0YXNrU3RhdHVzQ29sb3JJblByb2dyZXNzXCJcbiAgICAgICAgKTtcblxuXG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIFwiT3BlblwiLFxuICAgICAgICAgICAgXCJDb2xvdXIgZm9yIG9wZW4gKHRvLWRvKSB0YXNrcyBpbiB3aWRnZXRzLlwiLFxuICAgICAgICAgICAgXCJ0YXNrU3RhdHVzQ29sb3JPcGVuXCJcbiAgICAgICAgKTtcblxuICAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKFxuICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgXCJDb21wbGV0ZWRcIixcbiAgICAgICAgICAgIFwiQ29sb3VyIGZvciBjb21wbGV0ZWQgdGFza3MgaW4gd2lkZ2V0cyBhbmQgaGVhdG1hcHMuXCIsXG4gICAgICAgICAgICBcInRhc2tTdGF0dXNDb2xvckNvbXBsZXRlZFwiXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2V0dGluZy1zcGFjZXInIH0pO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5yZW5kZXJXaWRnZXRTZXR0aW5ncyhjb250YWluZXIsICdDcmVhdGlvbiBEYXNoYm9hcmQgV2lkZ2V0cyAoT3JkZXIgYW5kIFRvZ2dsZSBEaXNwbGF5KScsICdjcmVhdGlvbkRhc2hib2FyZFdpZGdldHMnLCAnY3JlYXRpb25EYXNoYm9hcmRPcmRlcicsIERBU0hCT0FSRFdJREdFVFMuY3JlYXRpb24pO1xuICAgICAgICBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2V0dGluZy1zcGFjZXInIH0pO1xuICAgICAgICBcbiAgICAgICAgY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmctc3BhY2VyJyB9KTtcblxuICAgICAgICBjb250YWluZXIuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQnVpbHQtaW4gSGVhdG1hcCBMaW5rcycgfSk7XG4gICAgICAgIGNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1NldCBhIG5vdGUgcGF0aCB0byBvcGVuIHdoZW4gY2xpY2tpbmcgdGhlIHRvdGFsIGNvdW50IG9uIGEgYnVpbHQtaW4gaGVhdG1hcCB3aWRnZXQuIExlYXZlIGVtcHR5IHRvIGRpc2FibGUuJywgY2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyB9KTtcblxuICAgICAgICAvLyBHZXQgYWxsIGJ1aWx0LWluIGNyZWF0aW9uIGhlYXRtYXAgd2lkZ2V0c1xuICAgICAgICBjb25zdCBjcmVhdGlvbldpZGdldHMgPSBEQVNIQk9BUkRXSURHRVRTLmNyZWF0aW9uO1xuXG4gICAgICAgIGZvciAoY29uc3Qgd2lkZ2V0S2V5IGluIGNyZWF0aW9uV2lkZ2V0cykge1xuICAgICAgICAgICAgLy8gT25seSBjcmVhdGUgc2V0dGluZ3MgZm9yIHdpZGdldHMgdGhhdCBhcmUgYWN0dWFsbHkgaGVhdG1hcHNcbiAgICAgICAgICAgIGlmICh3aWRnZXRLZXkuZW5kc1dpdGgoJ2hlYXRtYXAnKSkge1xuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoY3JlYXRpb25XaWRnZXRzW3dpZGdldEtleV0ubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVBhdGhTdWdnZXN0ZXIodGV4dC5pbnB1dEVsLCAocXVlcnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZiA9PiAhcXVlcnkgfHwgZi5wYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkudG9Mb3dlckNhc2UoKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmID0+IGYucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ1BhdGgvdG8veW91ci9ub3RlLm1kIG9yIGZpbGUuYmFzZSAvIGZpbGUuY2FudmFzJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGVhdG1hcExpbmtDb25maWdbd2lkZ2V0S2V5XSB8fCAnJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmhlYXRtYXBMaW5rQ29uZmlnW3dpZGdldEtleV0gPSB2YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICAgICAgY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmctc3BhY2VyJyB9KTtcblxuICAgICAgICBjb25zdCBjdXN0b21IZWF0bWFwc0NvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoKTtcblxuICAgICAgICAvLyAtLS0gQ3JlYXRlIHRoZSBDb2xsYXBzaWJsZSBHdWlkZSAtLS1cbiAgICAgICAgY29uc3QgZ3VpZGVDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1jb250YWluZXInIH0pO1xuXG4gICAgICAgIC8vIENoZWNrIHRoZSBzYXZlZCBzdGF0ZSBhbmQgYXBwbHkgJ2lzLWNvbGxhcHNlZCcgY2xhc3MgaWYgbmVlZGVkXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pc0hlYXRtYXBHdWlkZUNvbGxhcHNlZCkge1xuICAgICAgICAgICAgZ3VpZGVDb250YWluZXIuYWRkQ2xhc3MoJ2lzLWNvbGxhcHNlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gMS4gQ3JlYXRlIHRoZSBjbGlja2FibGUgaGVhZGVyXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IGd1aWRlQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ25vdGUtZ3JvdXAtaGVhZGVyJyB9KTtcbiAgICAgICAgY29uc3QgaGVhZGVyQ29udGVudCA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLWdyb3VwLWhlYWRlci1jb250ZW50JyB9KTtcbiAgICAgICAgY29uc3QgY29sbGFwc2VJY29uID0gaGVhZGVyQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLWdyb3VwLWNvbGxhcHNlLWljb24nIH0pO1xuICAgICAgICBzZXRJY29uKGNvbGxhcHNlSWNvbiwgJ2NoZXZyb24tZG93bicpO1xuICAgICAgICBoZWFkZXJDb250ZW50LmNyZWF0ZVNwYW4oeyB0ZXh0OiBcIkN1c3RvbSBIZWF0bWFwIFdpZGdldCBHdWlkZVwiIH0pO1xuXG4gICAgICAgIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlzTm93Q29sbGFwc2VkID0gZ3VpZGVDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtY29sbGFwc2VkJyk7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pc0hlYXRtYXBHdWlkZUNvbGxhcHNlZCA9IGlzTm93Q29sbGFwc2VkO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIDIuIENyZWF0ZSB0aGUgY29udGVudCB3cmFwcGVyIGZvciB0aGUgZ3VpZGUgdGV4dFxuICAgICAgICBjb25zdCBoZWxwQ29udGVudFdyYXBwZXIgPSBndWlkZUNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLWxpc3Qtd3JhcHBlcicgfSk7XG4gICAgICAgIGNvbnN0IGhlbHBUZXh0ID0gaGVscENvbnRlbnRXcmFwcGVyLmNyZWF0ZURpdigpOyAvLyBUaGUgYWN0dWFsIGVsZW1lbnQgZm9yIHRoZSB0ZXh0XG4gICAgICAgIGhlbHBUZXh0LnNldEF0dHIoJ3N0eWxlJywgJ3VzZXItc2VsZWN0OiB0ZXh0OyBmb250LXNpemU6IDAuOWVtOyBsaW5lLWhlaWdodDogMS42OyBwYWRkaW5nOiAxNXB4OyBtYXJnaW46IDA7IGJvcmRlci1yYWRpdXM6IDhweDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpOycpO1xuXG4gICAgICAgIGhlbHBUZXh0LmlubmVySFRNTCA9IGBcblxuPHA+VXNlIHRoZSBDdXN0b20gSGVhdG1hcCBzZWN0aW9uIHRvIGFkZCBwZXJzb25hbGl6ZWQgaGVhdG1hcHMgdG8geW91ciA8c3Ryb25nPkNyZWF0aW9uPC9zdHJvbmc+IGRhc2hib2FyZC4gRWFjaCBoZWF0bWFwIGFjdHMgYXMgYSB3aWRnZXQgdGhhdCB2aXN1YWxseSB0cmFja3MgZmlsZSBjcmVhdGlvbiBhY3Rpdml0eSBiYXNlZCBvbiBhIHNldCBvZiBydWxlcyB5b3UgZGVmaW5lLjwvcD5cblxuPGgyPktleSBGZWF0dXJlczwvaDI+XG48dWw+XG4gICAgPGxpPjxzdHJvbmc+RGF0ZSBSYW5nZTo8L3N0cm9uZz4gU2V0IGEgY3VzdG9tIGRhdGUgcmFuZ2UgZm9yIGVhY2ggaGVhdG1hcCB1c2luZyB0aGUgPHN0cm9uZz5Nb250aHMgQmFjazwvc3Ryb25nPiBhbmQgPHN0cm9uZz5Nb250aHMgRm9yd2FyZDwvc3Ryb25nPiBmaWVsZHMuIEZvciBleGFtcGxlLCB0byBzZWUgdGhlIGxhc3QgNiBtb250aHMgb2YgYWN0aXZpdHksIHNldCBcIk1vbnRocyBCYWNrXCIgdG8gPGNvZGU+NTwvY29kZT4gYW5kIFwiTW9udGhzIEZvcndhcmRcIiB0byA8Y29kZT4wPC9jb2RlPi48L2xpPlxuICAgIDxsaT48c3Ryb25nPkNvbG9yOjwvc3Ryb25nPiBDaG9vc2UgYSB1bmlxdWUgYmFzZSBjb2xvciBmb3IgZWFjaCBoZWF0bWFwLiBUaGUgd2lkZ2V0IHdpbGwgYXV0b21hdGljYWxseSBnZW5lcmF0ZSBhIDQtc3RlcCBncmFkaWVudCB0byByZXByZXNlbnQgYWN0aXZpdHkgZGVuc2l0eS48L2xpPlxuICAgIDxsaT48c3Ryb25nPkZpbHRlciBMb2dpYzo8L3N0cm9uZz4gQ29tYmluZSBtdWx0aXBsZSBydWxlcyB1c2luZyA8c3Ryb25nPkFORDwvc3Ryb25nPiAoYWxsIHJ1bGVzIG11c3QgbWF0Y2gpIG9yIDxzdHJvbmc+T1I8L3N0cm9uZz4gKGFueSBydWxlIGNhbiBtYXRjaCkgbG9naWMgZm9yIGNvbXBsZXggZmlsdGVyaW5nLjwvbGk+XG4gICAgPGxpPjxzdHJvbmc+Rm9sZGVyIEV4Y2x1c2lvbnM6PC9zdHJvbmc+IEV4Y2x1ZGUgc3BlY2lmaWMgdmF1bHQgZm9sZGVycyBmcm9tIGEgaGVhdG1hcCdzIHJlc3VsdHMgdG8gbmFycm93IGl0cyBmb2N1cy48L2xpPlxuICAgIDxsaT48c3Ryb25nPkRlYnVnIE1vZGU6PC9zdHJvbmc+IEVuYWJsZSBcImRlYnVnIGxvZ2dpbmdcIiB0byBzZWUgYSBkZXRhaWxlZCBsaXN0IG9mIGFsbCBmaWxlcyBtYXRjaGVkIGJ5IGEgaGVhdG1hcCdzIHJ1bGVzIGluIHRoZSBkZXZlbG9wZXIgY29uc29sZSwgZm9yIE1hYzogQ29tbWFuZCAo4oyYKSArIE9wdGlvbiAo4oylKSArIEksIGZvciBXaW5kb3dzOiBGMTIgb3IgQ3RybCArIFNoaWZ0ICsgSS48L2xpPlxuPC91bD5cblxuPGgyPkZpbHRlciBSdWxlIEd1aWRlPC9oMj5cbjxwPkVhY2ggaGVhdG1hcCBpcyBwb3dlcmVkIGJ5IG9uZSBvciBtb3JlIGZpbHRlciBydWxlcy4gQSBydWxlIGNvbnNpc3RzIG9mIGEgPHN0cm9uZz5UeXBlPC9zdHJvbmc+IChlLmcuLCBUYWcsIEZpbGVuYW1lKSwgYW4gPHN0cm9uZz5PcGVyYXRvcjwvc3Ryb25nPiAoZS5nLiwgaXMsIGNvbnRhaW5zKSwgYW5kIGEgPHN0cm9uZz5WYWx1ZTwvc3Ryb25nPi48L3A+XG5cbjxoMz5GaWx0ZXIgVHlwZXMgJmFtcDsgT3BlcmF0b3JzPC9oMz5cbjx0YWJsZSBzdHlsZT1cIndpZHRoOjEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XCI+XG4gICAgPHRoZWFkIHN0eWxlPVwidGV4dC1hbGlnbjogbGVmdDtcIj5cbiAgICAgICAgPHRyPlxuICAgICAgICAgICAgPHRoIHN0eWxlPVwicGFkZGluZzogOHB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDsgd2lkdGg6IDIwJTtcIj5UeXBlPC90aD5cbiAgICAgICAgICAgIDx0aCBzdHlsZT1cInBhZGRpbmc6IDhweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7IHdpZHRoOiAzMCU7XCI+QXZhaWxhYmxlIE9wZXJhdG9yczwvdGg+XG4gICAgICAgICAgICA8dGggc3R5bGU9XCJwYWRkaW5nOiA4cHg7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkO1wiPkRlc2NyaXB0aW9uPC90aD5cbiAgICAgICAgPC90cj5cbiAgICA8L3RoZWFkPlxuICAgIDx0Ym9keT5cbiAgICAgICAgPHRyIHN0eWxlPVwidmVydGljYWwtYWxpZ246IHRvcDtcIj5cbiAgICAgICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDhweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7XCI+PHN0cm9uZz5UYWc8L3N0cm9uZz48L3RkPlxuICAgICAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogOHB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDtcIj48Y29kZT5pczwvY29kZT48YnI+PGNvZGU+aXMgbm90PC9jb2RlPjwvdGQ+XG4gICAgICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHg7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkO1wiPkNoZWNrcyBpZiBhIGZpbGUgaGFzIGEgc3BlY2lmaWMgdGFnLjwvdGQ+XG4gICAgICAgIDwvdHI+XG4gICAgICAgIDx0ciBzdHlsZT1cInZlcnRpY2FsLWFsaWduOiB0b3A7XCI+XG4gICAgICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHg7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkO1wiPjxzdHJvbmc+RmlsZSBQYXRoPC9zdHJvbmc+PC90ZD5cbiAgICAgICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDhweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7XCI+PGNvZGU+Y29udGFpbnM8L2NvZGU+PGJyPjxjb2RlPnN0YXJ0cyB3aXRoPC9jb2RlPjxicj48Y29kZT5lbmRzIHdpdGg8L2NvZGU+PGJyPjxjb2RlPmVxdWFsczwvY29kZT48YnI+PGNvZGU+bWF0Y2hlcyByZWdleDwvY29kZT48L3RkPlxuICAgICAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogOHB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDtcIj5NYXRjaGVzIGFnYWluc3QgdGhlIGZpbGUncyBmdWxsIHBhdGggKGUuZy4sIDxjb2RlPkpvdXJuYWwvMjAyNS9NeSBOb3RlLm1kPC9jb2RlPikuIFBhdGggc3VnZ2VzdGVyIGlzIGF2YWlsYWJsZS48L3RkPlxuICAgICAgICA8L3RyPlxuICAgICAgICA8dHIgc3R5bGU9XCJ2ZXJ0aWNhbC1hbGlnbjogdG9wO1wiPlxuICAgICAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogOHB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDtcIj48c3Ryb25nPkZpbGVuYW1lPC9zdHJvbmc+PC90ZD5cbiAgICAgICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDhweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7XCI+PGNvZGU+Y29udGFpbnM8L2NvZGU+PGJyPjxjb2RlPnN0YXJ0cyB3aXRoPC9jb2RlPjxicj48Y29kZT5lbmRzIHdpdGg8L2NvZGU+PGJyPjxjb2RlPmVxdWFsczwvY29kZT48YnI+PGNvZGU+bWF0Y2hlcyByZWdleDwvY29kZT48L3RkPlxuICAgICAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogOHB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDtcIj5NYXRjaGVzIGFnYWluc3QgdGhlIGZpbGVuYW1lIG9ubHkgKGUuZy4sIDxjb2RlPk15IE5vdGUubWQ8L2NvZGU+KS48L3RkPlxuICAgICAgICA8L3RyPlxuICAgICAgICA8dHIgc3R5bGU9XCJ2ZXJ0aWNhbC1hbGlnbjogdG9wO1wiPlxuICAgICAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogOHB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDtcIj48c3Ryb25nPkZpbGUgVHlwZTwvc3Ryb25nPjwvdGQ+XG4gICAgICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHg7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkO1wiPjxjb2RlPmlzPC9jb2RlPjxicj48Y29kZT5pcyBub3Q8L2NvZGU+PC90ZD5cbiAgICAgICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDhweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7XCI+TWF0Y2hlcyB0aGUgZmlsZSBleHRlbnNpb24gKGUuZy4sIDxjb2RlPnBkZjwvY29kZT4sIDxjb2RlPnBuZzwvY29kZT4sIDxjb2RlPm1kPC9jb2RlPikuPC90ZD5cbiAgICAgICAgPC90cj5cbiAgICA8L3Rib2R5PlxuPC90YWJsZT5cblxuPGgzPkZpbHRlciBWYWx1ZSBFeGFtcGxlczwvaDM+XG5cbjxoND4xLiBCYXNpYyBUZXh0IE1hdGNoaW5nPC9oND5cbjx1bD5cbiAgICA8bGk+PHN0cm9uZz5UYWc8L3N0cm9uZz4gPGNvZGU+aXM8L2NvZGU+IDxjb2RlPm1lZXRpbmc8L2NvZGU+OiBNYXRjaGVzIGZpbGVzIHRhZ2dlZCB3aXRoIDxjb2RlPiNtZWV0aW5nPC9jb2RlPi48L2xpPlxuICAgIDxsaT48c3Ryb25nPkZpbGUgUGF0aDwvc3Ryb25nPiA8Y29kZT5zdGFydHMgd2l0aDwvY29kZT4gPGNvZGU+Sm91cm5hbC88L2NvZGU+OiBNYXRjaGVzIGFsbCBmaWxlcyBpbnNpZGUgdGhlIDxjb2RlPkpvdXJuYWw8L2NvZGU+IGZvbGRlci48L2xpPlxuICAgIDxsaT48c3Ryb25nPkZpbGUgVHlwZTwvc3Ryb25nPiA8Y29kZT5pcyBub3Q8L2NvZGU+IDxjb2RlPm1kPC9jb2RlPjogTWF0Y2hlcyBhbGwgZmlsZXMgdGhhdCBhcmUgbm90IE1hcmtkb3duIGZpbGVzLjwvbGk+XG48L3VsPlxuXG48aDQ+Mi4gQWR2YW5jZWQgTWF0Y2hpbmcgKFJlZ3VsYXIgRXhwcmVzc2lvbnMpPC9oND5cbjxwPkZvciBjb21wbGV4IHBhdHRlcm5zLCB1c2UgdGhlIDxjb2RlPm1hdGNoZXMgcmVnZXg8L2NvZGU+IG9wZXJhdG9yLiBUaGUgdmFsdWUgc2hvdWxkIGJlIGluIHRoZSBmb3JtYXQgPGNvZGU+L3BhdHRlcm4vZmxhZ3M8L2NvZGU+IChlLmcuLCA8Y29kZT5pPC9jb2RlPiBmb3IgY2FzZS1pbnNlbnNpdGl2ZSkuPC9wPlxuPHVsPlxuICAgIDxsaT48c3Ryb25nPkV4YW1wbGUgKEZpbGVuYW1lKTo8L3N0cm9uZz4gTWF0Y2ggYWxsIGRhaWx5IG5vdGVzIGluIDxjb2RlPllZWVktTU0tREQ8L2NvZGU+IGZvcm1hdC48YnI+XG4gICAgT3BlcmF0b3I6IDxjb2RlPm1hdGNoZXMgcmVnZXg8L2NvZGU+PGJyPlxuICAgIFZhbHVlOiA8Y29kZT4vXFxcXGR7NH0tXFxcXGR7Mn0tXFxcXGR7Mn0vPC9jb2RlPjwvbGk+XG4gICAgPGJyPlxuICAgIDxsaT48c3Ryb25nPkV4YW1wbGUgKEZpbGUgUGF0aCk6PC9zdHJvbmc+IE1hdGNoIGZpbGVzIGluICdQcm9qZWN0cycgb3IgJ0FyZWFzJyB0b3AtbGV2ZWwgZm9sZGVycy48YnI+XG4gICAgT3BlcmF0b3I6IDxjb2RlPm1hdGNoZXMgcmVnZXg8L2NvZGU+PGJyPlxuICAgIFZhbHVlOiA8Y29kZT4vXihQcm9qZWN0c3xBcmVhcylcXFxcLy88L2NvZGU+PC9saT5cbjwvdWw+XG5cbiAgICAgICAgYDtcblxuICAgICAgICB0aGlzLnJlbmRlckN1c3RvbUhlYXRtYXBzU2VjdGlvbihjdXN0b21IZWF0bWFwc0NvbnRhaW5lcik7XG5cbiAgICB9XG5cbiAgICByZW5kZXJGaWx0ZXJSdWxlcyhoZWF0bWFwLCBjb250YWluZXIpIHtcbiAgICAgICAgLy8gQ2xlYXIgb25seSB0aGUgc3BlY2lmaWMgY29udGFpbmVyIGZvciB0aGlzIGhlYXRtYXAncyBmaWx0ZXJzIHRvIHByZXZlbnQgZnVsbCByZS1yZW5kZXJzLlxuICAgICAgICBjb250YWluZXIuZW1wdHkoKTtcblxuICAgICAgICAvLyBMb29wIG92ZXIgdGhlIGV4aXN0aW5nIGZpbHRlcnMgZm9yIHRoZSBjdXJyZW50IGhlYXRtYXAgYW5kIHJlbmRlciBhIHJvdyBmb3IgZWFjaCBvbmUuXG4gICAgICAgIChoZWF0bWFwLmZpbHRlcnMgfHwgW10pLmZvckVhY2goKGZpbHRlciwgZmlsdGVySW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlclJvdyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdwbS1maWx0ZXItcm93JyB9KTtcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoZmlsdGVyUm93KVxuICAgICAgICAgICAgICAgIC5zZXROYW1lKGBSdWxlICMke2ZpbHRlckluZGV4ICsgMX1gKVxuICAgICAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCd0YWcnLCAnVGFnJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2ZpbGVuYW1lJywgJ0ZpbGVuYW1lJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2ZpbGVwYXRoJywgJ0ZpbGUgUGF0aCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdmaWxldHlwZScsICdGaWxlIHR5cGUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKGZpbHRlci50eXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlci50eXBlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmUtcmVuZGVyIGxvY2FsbHkgdG8gdXBkYXRlIHRoZSBVSSAoZS5nLiwgdG8gYWRkL3JlbW92ZSB0aGUgZm9sZGVyIHN1Z2dlc3RlcikuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJGaWx0ZXJSdWxlcyhoZWF0bWFwLCBjb250YWluZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgIC5hZGREcm9wZG93bihvcF9kcm9wZG93biA9PiB7IC8vIERyb3Bkb3duIGZvciBPcGVyYXRvclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbnM6ICdjb250YWlucycsXG4gICAgICAgICAgICAgICAgICAgICAgICBub3RfY29udGFpbnM6ICdkb2VzIG5vdCBjb250YWluJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVxdWFsczogJ2VxdWFscycsXG4gICAgICAgICAgICAgICAgICAgICAgICBub3RfZXF1YWxzOiAnZG9lcyBub3QgZXF1YWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRzX3dpdGg6ICdzdGFydHMgd2l0aCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRzX3dpdGg6ICdlbmRzIHdpdGgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlc19yZWdleDogJ21hdGNoZXMgcmVnZXgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm90X21hdGNoZXNfcmVnZXg6ICdkb2VzIG5vdCBtYXRjaCByZWdleCdcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBGb3IgJ3RhZycgYW5kICdmaWxldHlwZScsIG9ubHkgJ2VxdWFscycgYW5kICdub3RfZXF1YWxzJyBtYWtlIHNlbnNlLlxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLnR5cGUgPT09ICd0YWcnIHx8IGZpbHRlci50eXBlID09PSAnZmlsZXR5cGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcF9kcm9wZG93bi5hZGRPcHRpb24oJ2VxdWFscycsICdpcycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BfZHJvcGRvd24uYWRkT3B0aW9uKCdub3RfZXF1YWxzJywgJ2lzIG5vdCcpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wX2Ryb3Bkb3duLmFkZE9wdGlvbihrZXksIG9wdGlvbnNba2V5XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBvcF9kcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKGZpbHRlci5vcGVyYXRvciB8fCAnY29udGFpbnMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlci5vcGVyYXRvciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSlcblxuXG4gICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIkVudGVyIHZhbHVlLCBlLmcuLCAjcHJvamVjdCBvciBXb3JrLypcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShmaWx0ZXIudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGVhdG1hcFVwZGF0ZVRpbWVyKSBjbGVhclRpbWVvdXQodGhpcy5oZWF0bWFwVXBkYXRlVGltZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGVhdG1hcFVwZGF0ZVRpbWVyID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDc1MCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyAtLS0gVEhFIENPUlJFQ1QgRklYIElTIEhFUkUgLS0tXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjdXJyZW50IGZpbHRlciB0eXBlIGlzICdmaWxlcGF0aCcsIHJldXNlIHN1Z2dlc3Rlci5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlci50eXBlID09PSAnZmlsZXBhdGgnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWZpbmUgdGhlIGZ1bmN0aW9uIHRoYXQgZ2V0cyBmb2xkZXIgc3VnZ2VzdGlvbnMuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBnZXRGb2xkZXJzID0gKHF1ZXJ5KSA9PiB0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBURm9sZGVyICYmICghcXVlcnkgfHwgZi5wYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkudG9Mb3dlckNhc2UoKSkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZiA9PiBmLnBhdGgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDYWxsIGhlbHBlciBtZXRob2QgdG8gYXR0YWNoIHRoZSBzdWdnZXN0ZXIuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVBhdGhTdWdnZXN0ZXIodGV4dC5pbnB1dEVsLCBnZXRGb2xkZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgICAgICAgICBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCctJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdSZW1vdmUgcnVsZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhdG1hcC5maWx0ZXJzLnNwbGljZShmaWx0ZXJJbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJGaWx0ZXJSdWxlcyhoZWF0bWFwLCBjb250YWluZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFwiQWRkIEZpbHRlciBSdWxlXCIgYnV0dG9uIGxvZ2ljIHJlbWFpbnMgdGhlIHNhbWUuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IHtcbiAgICAgICAgICAgICAgICBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ0FkZCBGaWx0ZXIgUnVsZScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhlYXRtYXAuZmlsdGVycykgaGVhdG1hcC5maWx0ZXJzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWF0bWFwLmZpbHRlcnMucHVzaCh7IHR5cGU6ICd0YWcnLCBvcGVyYXRvcjogJ2VxdWFscycsIHZhbHVlOiAnJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJGaWx0ZXJSdWxlcyhoZWF0bWFwLCBjb250YWluZXIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlckN1c3RvbUhlYXRtYXBzU2VjdGlvbihjb250YWluZXIpIHtcbiAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICAgICAgKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUhlYXRtYXBzIHx8IFtdKS5mb3JFYWNoKChoZWF0bWFwLCBpbmRleCkgPT4ge1xuXG4gICAgICAgICAgICBjb25zdCBoZWF0bWFwQm94ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3BtLWhlYXRtYXAtY29uZmlnLWJveCcgfSk7XG5cbiAgICAgICAgICAgIC8vIDEuIEtlZXAgdGhlIGV4aXN0aW5nIHRpdGxlIGFuZCBuYW1lIHNldHRpbmdzXG4gICAgICAgICAgICBjb25zdCB0aXRsZUVsID0gaGVhdG1hcEJveC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IGBIZWF0bWFwICR7aW5kZXggKyAxfTogJHtoZWF0bWFwLm5hbWV9YCB9KTtcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoaGVhdG1hcEJveClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIk5hbWVcIilcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiRW50ZXIgaGVhdG1hcCBuYW1lXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShoZWF0bWFwLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYXRtYXAubmFtZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGVFbC5zZXRUZXh0KGBIZWF0bWFwICR7aW5kZXggKyAxfTogJHt2YWx1ZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyAgLy8gVXNlIHRoZSBtb3JlIGRpcmVjdCBzYXZlIGhlcmVcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhoZWF0bWFwQm94KVxuICAgICAgICAgICAgICAgIC5zZXROYW1lKCdEYXRlIFNvdXJjZScpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoJ0Nob29zZSB3aGljaCBkYXRlIHRvIHVzZSBmb3IgcGxhY2luZyBmaWxlcyBvbiB0aGUgaGVhdG1hcC4nKVxuICAgICAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjcmVhdGlvbkRhdGUnLCAnRmlsZSBDcmVhdGlvbiBEYXRlJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZGF0ZUZyb21UaXRsZScsICdEYXRlIGZyb20gTm90ZSBUaXRsZScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShoZWF0bWFwLmRhdGVTb3VyY2UgfHwgJ2NyZWF0aW9uRGF0ZScpIC8vIERlZmF1bHQgdG8gY3JlYXRpb25EYXRlXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYXRtYXAuZGF0ZVNvdXJjZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoaGVhdG1hcEJveClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZSgnTW9udGhzIEJhY2snKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKCdOdW1iZXIgb2YgcGFzdCBtb250aHMgdG8gc2hvdyBpbiB0aGUgZ3JpZCAoZS5nLiwgMTEgZm9yIHRoZSBsYXN0IHllYXIpLicpXG4gICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignMTEnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoaGVhdG1hcC5tb250aHNCYWNrPy50b1N0cmluZygpID8/ICcxMScpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKG51bSkgJiYgbnVtID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWF0bWFwLm1vbnRoc0JhY2sgPSBudW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoaGVhdG1hcEJveClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZSgnTW9udGhzIEZvcndhcmQnKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKCdOdW1iZXIgb2YgZnV0dXJlIG1vbnRocyB0byBzaG93IGluIHRoZSBncmlkLicpXG4gICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignMCcpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShoZWF0bWFwLm1vbnRoc0ZvcndhcmQ/LnRvU3RyaW5nKCkgPz8gJzAnKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihudW0pICYmIG51bSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhdG1hcC5tb250aHNGb3J3YXJkID0gbnVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGhlYXRtYXBCb3gpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoJ05vdGUgTGluayBQYXRoJylcbiAgICAgICAgICAgICAgICAuc2V0RGVzYygnU2V0IGEgbm90ZSB0byBvcGVuIHdoZW4gY2xpY2tpbmcgdGhlIHRvdGFsIGNvdW50IGZvciB0aGlzIGhlYXRtYXAuJylcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVQYXRoU3VnZ2VzdGVyKHRleHQuaW5wdXRFbCwgKHF1ZXJ5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZiA9PiAhcXVlcnkgfHwgZi5wYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkudG9Mb3dlckNhc2UoKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmID0+IGYucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ1BhdGgvdG8vc3VtbWFyeS9ub3RlLm1kIG9yIGZpbGUuYmFzZSAvIGZpbGUuY2FudmFzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShoZWF0bWFwLmxpbmtQYXRoIHx8ICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYXRtYXAubGlua1BhdGggPSB2YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAvLyBBZGQgdGhlIGRyb3Bkb3duIGZvciBBTkQvT1IgbG9naWNcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGhlYXRtYXBCb3gpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoJ0ZpbHRlciBsb2dpYycpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoJ0Nob29zZSBob3cgbXVsdGlwbGUgcnVsZXMgYXJlIGNvbWJpbmVkLicpXG4gICAgICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ0FORCcsICdBbGwgcnVsZXMgbXVzdCBtYXRjaCAoQU5EKScpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdPUicsICdBbnkgcnVsZSBjYW4gbWF0Y2ggKE9SKScpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoaGVhdG1hcC5sb2dpYyB8fCAnQU5EJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWF0bWFwLmxvZ2ljID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgY29udGFpbmVyIGZvciB0aGUgZHluYW1pYyBmaWx0ZXIgcnVsZXNcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcnNDb250YWluZXIgPSBoZWF0bWFwQm94LmNyZWF0ZURpdih7IGNsczogJ3BtLWZpbHRlcnMtY29udGFpbmVyJyB9KTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRmlsdGVyUnVsZXMoaGVhdG1hcCwgZmlsdGVyc0NvbnRhaW5lcik7XG5cblxuXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoaGVhdG1hcEJveCwgXCJIZWF0bWFwIENvbG9yXCIsIFwiU2V0IHRoZSBjb2xvciBmb3IgdGhpcyBzcGVjaWZpYyBoZWF0bWFwLlwiLCBgY3VzdG9tSGVhdG1hcHMuJHtpbmRleH0uY29sb3JgKTtcblxuICAgICAgICAgICAgdGhpcy5jcmVhdGVGb2xkZXJFeGNsdXNpb25VSShoZWF0bWFwQm94LCBoZWF0bWFwLCBpbmRleCk7XG5cblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoaGVhdG1hcEJveClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZSgnRW5hYmxlIGRlYnVnIGxvZ2dpbmcnKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKCdJZiBlbmFibGVkLCB0aGUgbGlzdCBvZiBmaWxlcyBmb3IgdGhpcyBoZWF0bWFwIHdpbGwgYmUgcHJpbnRlZCB0byB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgZWFjaCB0aW1lIHRoZSBkYXNoYm9hcmQgcmVmcmVzaGVzLiBFYWNoIGZpbGUgd2lsbCBiZSBsaXN0ZWQgd2l0aCBkZXRhaWxzIGlmIGl0IHdhcyBtYXRjaGVkLiBBbiBlbmQgc3VtbWFyeSBzZWN0aW9uIFwiLS0tIERlYnVnIGZvciBIZWF0bWFwOiBDaGFuZ2VzIC0tLVwiIHdpbGwgYmUgb3V0cHV0dGVkIGZvciBmaWxlcyB0aGF0IHdlcmUgbWF0Y2hlZC4gTk9URTogZGVidWcgdG8gYmUgdG9nZ2xlZCBvZmYgZm9yIG5vcm1hbCBkYWlseSB1c2UuJylcbiAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKGhlYXRtYXAuZGVidWcgfHwgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhdG1hcC5kZWJ1ZyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoaGVhdG1hcEJveClcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJEZWxldGUgSGVhdG1hcFwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0V2FybmluZygpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maXJtKGBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoZSBcIiR7aGVhdG1hcC5uYW1lfVwiIGhlYXRtYXA/YCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21IZWF0bWFwcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRGFzaGJvYXJkU2V0dGluZ3MoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRoZSBcIkFkZCBDdXN0b20gSGVhdG1hcFwiIGJ1dHRvbiBub3cgZ29lcyBpbnNpZGUgdGhpcyBzZWN0aW9uXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQWRkIG5ldyBjdXN0b20gaGVhdG1hcFwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJDcmVhdGUgYSBuZXcgaGVhdG1hcCB3aWRnZXQgd2l0aCBjdXN0b20gZmlsdGVyaW5nIHJ1bGVzLlwiKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJBZGQgSGVhdG1hcFwiKVxuICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBuZXcgaGVhdG1hcCB0byBzZXR0aW5nc1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21IZWF0bWFwcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdOZXcgSGVhdG1hcCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ3JnYmEoNzQsIDE0NCwgMjI2LCAxLjAwKScsXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dpYzogJ0FORCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzOiBbeyB0eXBlOiAndGFnJywgb3BlcmF0b3I6ICdlcXVhbHMnLCB2YWx1ZTogJycgfV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlU291cmNlOiAnY3JlYXRpb25EYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2x1ZGVGb2xkZXJzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoc0JhY2s6IDExLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhzRm9yd2FyZDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtQYXRoOiAnJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIEZJWDogUmUtcmVuZGVyIE9OTFkgdGhpcyBzZWN0aW9uIC0tLVxuICAgICAgICAgICAgICAgICAgICAvL3RoaXMucmVuZGVyQ3VzdG9tSGVhdG1hcHNTZWN0aW9uKGNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRGFzaGJvYXJkU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgfVxuXG5cblxuICAgIC8vIEFkZCB0aGlzIGZ1bmN0aW9uIGluc2lkZSB0aGUgUGVyaW9kU2V0dGluZ3NUYWIgY2xhc3NcbiAgICBjcmVhdGVGb2xkZXJFeGNsdXNpb25VSShjb250YWluZXJFbCwgaGVhdG1hcCwgaGVhdG1hcEluZGV4KSB7XG4gICAgICAgIGNvbnN0IGV4Y2x1c2lvbkNvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ3BtLWZvbGRlci1leGNsdXNpb24tY29udGFpbmVyJyB9KTtcbiAgICAgICAgbmV3IFNldHRpbmcoZXhjbHVzaW9uQ29udGFpbmVyKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJFeGNsdWRlZCBGb2xkZXJzXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkZpbGVzIGluIHRoZXNlIGZvbGRlcnMgd2lsbCBiZSBpZ25vcmVkIGJ5IHRoaXMgaGVhdG1hcC5cIik7XG5cbiAgICAgICAgLy8gRGlzcGxheSB0aGUgbGlzdCBvZiBjdXJyZW50bHkgZXhjbHVkZWQgZm9sZGVyc1xuICAgICAgICBjb25zdCBleGNsdWRlZExpc3RFbCA9IGV4Y2x1c2lvbkNvbnRhaW5lci5jcmVhdGVEaXYoKTtcbiAgICAgICAgY29uc3QgcmVuZGVyRXhjbHVkZWRMaXN0ID0gKCkgPT4ge1xuICAgICAgICAgICAgZXhjbHVkZWRMaXN0RWwuZW1wdHkoKTsgLy8gQ2xlYXIgdGhlIGN1cnJlbnQgbGlzdFxuXG4gICAgICAgICAgICBpZiAoaGVhdG1hcC5leGNsdWRlRm9sZGVycyAmJiBoZWF0bWFwLmV4Y2x1ZGVGb2xkZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBoZWF0bWFwLmV4Y2x1ZGVGb2xkZXJzLmZvckVhY2goKGZvbGRlciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZXhjbHVkZWRMaXN0RWwpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZShmb2xkZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbigndHJhc2gnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdSZW1vdmUgZm9sZGVyJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYXRtYXAuZXhjbHVkZUZvbGRlcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IC8vIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJFeGNsdWRlZExpc3QoKTsgLy8gUmUtcmVuZGVyIG9ubHkgdGhpcyBsaXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBleGNsdWRlZExpc3RFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ05vIGZvbGRlcnMgYXJlIGN1cnJlbnRseSBleGNsdWRlZC4nLCBjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHJlbmRlckV4Y2x1ZGVkTGlzdCgpO1xuXG4gICAgICAgIC8vIEFkZCBVSSBmb3IgYWRkaW5nIGEgbmV3IGZvbGRlclxuICAgICAgICBjb25zdCBhZGRTZXR0aW5nID0gbmV3IFNldHRpbmcoZXhjbHVzaW9uQ29udGFpbmVyKTtcbiAgICAgICAgbGV0IHRleHRJbnB1dDtcbiAgICAgICAgYWRkU2V0dGluZy5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICAgICAgdGV4dElucHV0ID0gdGV4dDtcblxuICAgICAgICAgICAgLy8gVGhpcyBmdW5jdGlvbiBub3cgY29ycmVjdGx5IGFjY2VwdHMgYSAncXVlcnknIGFuZCBmaWx0ZXJzIHRoZSByZXN1bHRzLlxuICAgICAgICAgICAgY29uc3QgZ2V0RmlsdGVyZWRGb2xkZXJzID0gKHF1ZXJ5KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWxsRm9sZGVycyA9IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkuZmlsdGVyKGYgPT4gZiBpbnN0YW5jZW9mIFRGb2xkZXIpO1xuXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHF1ZXJ5IGlzIGVtcHR5LCByZXR1cm4gdGhlIGZ1bGwgbGlzdCBvZiBmb2xkZXJzLlxuICAgICAgICAgICAgICAgIGlmICghcXVlcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFsbEZvbGRlcnMubWFwKGYgPT4gZi5wYXRoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBsb3dlckNhc2VRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIHJldHVybiBvbmx5IHRoZSBmb2xkZXJzIHRoYXQgaW5jbHVkZSB0aGUgcXVlcnkgdGV4dC5cbiAgICAgICAgICAgICAgICByZXR1cm4gYWxsRm9sZGVyc1xuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZvbGRlciA9PiBmb2xkZXIucGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyQ2FzZVF1ZXJ5KSlcbiAgICAgICAgICAgICAgICAgICAgLm1hcChmb2xkZXIgPT4gZm9sZGVyLnBhdGgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gUGFzcyB0aGUgbmV3LCBjb3JyZWN0IGZpbHRlcmluZyBmdW5jdGlvbiB0byB0aGUgc3VnZ2VzdGVyLlxuICAgICAgICAgICAgdGhpcy5jcmVhdGVQYXRoU3VnZ2VzdGVyKHRleHQuaW5wdXRFbCwgZ2V0RmlsdGVyZWRGb2xkZXJzKTtcblxuICAgICAgICAgICAgdGV4dC5zZXRQbGFjZWhvbGRlcignRW50ZXIgZm9sZGVyIHBhdGggdG8gZXhjbHVkZS4uLicpO1xuICAgICAgICB9KS5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ0FkZCcpXG4gICAgICAgICAgICAuc2V0VG9vbHRpcCgnRXhjbHVkZSB0aGlzIGZvbGRlcicpXG4gICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Rm9sZGVyID0gdGV4dElucHV0LmdldFZhbHVlKCkudHJpbSgpO1xuICAgICAgICAgICAgICAgIGlmICghbmV3Rm9sZGVyKSByZXR1cm47IC8vIEV4aXQgaWYgdGhlIGlucHV0IGlzIGVtcHR5XG5cbiAgICAgICAgICAgICAgICAvLyBEaXJlY3RseSByZWZlcmVuY2UgdGhlIGhlYXRtYXAgc2V0dGluZ3MgdGhhdCB3aWxsIGJlIG1vZGlmaWVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IGhlYXRtYXBUb1VwZGF0ZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUhlYXRtYXBzW2hlYXRtYXBJbmRleF07XG5cbiAgICAgICAgICAgICAgICAvLyAxLiBEZWZlbnNpdmUgQ2hlY2s6IElmIHRoZSBgZXhjbHVkZUZvbGRlcnNgIGFycmF5IGRvZXNuJ3QgZXhpc3QsIGNyZWF0ZSBpdC5cbiAgICAgICAgICAgICAgICAvLyBUaGlzIGhhbmRsZXMgaGVhdG1hcHMgY3JlYXRlZCBiZWZvcmUgdGhpcyBmZWF0dXJlIHdhcyBhZGRlZC5cbiAgICAgICAgICAgICAgICBpZiAoIWhlYXRtYXBUb1VwZGF0ZS5leGNsdWRlRm9sZGVycykge1xuICAgICAgICAgICAgICAgICAgICBoZWF0bWFwVG9VcGRhdGUuZXhjbHVkZUZvbGRlcnMgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyAyLiBTYWZlIENoZWNrOiBOb3cgdGhhdCB3ZSBhcmUgY2VydGFpbiB0aGUgYXJyYXkgZXhpc3RzLCB3ZSBjYW4gc2FmZWx5XG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGZvbGRlciBpcyBhbHJlYWR5IGluIHRoZSBsaXN0LlxuICAgICAgICAgICAgICAgIGlmICghaGVhdG1hcFRvVXBkYXRlLmV4Y2x1ZGVGb2xkZXJzLmluY2x1ZGVzKG5ld0ZvbGRlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhdG1hcFRvVXBkYXRlLmV4Y2x1ZGVGb2xkZXJzLnB1c2gobmV3Rm9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyRXhjbHVkZWRMaXN0KCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgYXN5bmMgcmVuZGVyVGhlbWVzU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWw7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7IC8vIENsZWFyIHByZXZpb3VzIGNvbnRlbnQgdG8gcHJldmVudCBkdXBsaWNhdGluZyBldmVudCBsaXN0ZW5lcnNcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnVGhlbWUgTWFuYWdlbWVudCcgfSk7XG5cbiAgICAgICAgLy8gRGlzcGxheSBhbiBpbmRpY2F0b3IgaWYgYSB0aGVtZSBpcyBjdXJyZW50bHkgYXBwbGllZFxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBwbGllZFRoZW1lKSB7XG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ3VycmVudGx5IEFwcGxpZWQgVGhlbWU6ICcgKyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcHBsaWVkVGhlbWUpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoYFRoZSBhcHBlYXJhbmNlIHNldHRpbmdzIGZyb20gdGhlIFwiJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcHBsaWVkVGhlbWV9XCIgdGhlbWUgYXJlIGN1cnJlbnRseSBhY3RpdmUuYClcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PlxuICAgICAgICAgICAgICAgICAgICBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdDbGVhcicpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcCgnQ2xlYXIgdGhpcyBpbmRpY2F0b3IuIFRoaXMgZG9lcyBub3QgY2hhbmdlIHlvdXIgc2V0dGluZ3MuJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcHBsaWVkVGhlbWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTsgLy8gUmUtcmVuZGVyIHRoZSBlbnRpcmUgc2V0dGluZ3MgdGFiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQXBwbGllZCB0aGVtZSBpbmRpY2F0b3IgY2xlYXJlZC4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIC5zZXR0aW5nRWwuYWRkQ2xhc3MoJ2FwcGxpZWQtdGhlbWUtaW5kaWNhdG9yJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaW5kIHRoZW1lIGZpbGVzIGluIHRoZSBwbHVnaW4ncyBcInRoZW1lc1wiIGRpcmVjdG9yeVxuICAgICAgICBjb25zdCB0aGVtZXNGb2xkZXJQYXRoID0gdGhpcy5wbHVnaW4ubWFuaWZlc3QuZGlyICsgJy9UaGVtZXMnO1xuICAgICAgICBjb25zdCB0aGVtZUZpbGVzID0gYXdhaXQgdGhpcy5nZXRUaGVtZUZpbGVzKHRoZW1lc0ZvbGRlclBhdGgpO1xuXG4gICAgICAgIGlmICghdGhlbWVGaWxlcykge1xuICAgICAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdUaGUgVGhlbWVzIGZvbGRlciBjb3VsZCBub3QgYmUgZm91bmQgaW4gdGhlIHBsdWdpbiBkaXJlY3RvcnkuJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGVtZUZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdObyB0aGVtZSBmaWxlcyAoLmpzb24pIHdlcmUgZm91bmQgaW4gdGhlIFRoZW1lcyBmb2xkZXIuJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgbWFpbiB0d28tY29sdW1uIGxheW91dFxuICAgICAgICBjb25zdCBtYWluQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiAndGhlbWUtc2V0dGluZ3MtY29udGFpbmVyJyB9KTtcbiAgICAgICAgY29uc3QgbGlzdENvbnRhaW5lciA9IG1haW5Db250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAndGhlbWUtbGlzdC1jb250YWluZXInIH0pO1xuICAgICAgICB0aGlzLnByZXZpZXdDb250YWluZXIgPSBtYWluQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3RoZW1lLXByZXZpZXctd3JhcHBlcicgfSk7XG5cbiAgICAgICAgbGlzdENvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdBdmFpbGFibGUgVGhlbWVzJyB9KTtcblxuICAgICAgICAvLyBTb3J0IHRoZSB0aGVtZSBmaWxlcyBhbHBoYWJldGljYWxseSBiZWZvcmUgcmVuZGVyaW5nLlxuICAgICAgICB0aGVtZUZpbGVzLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgbGlzdCBpdGVtIGZvciBlYWNoIHRoZW1lIGZpbGVcbiAgICAgICAgdGhlbWVGaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGhlbWVOYW1lID0gZmlsZS5zcGxpdCgnLycpLnBvcCgpLnJlcGxhY2UoJy5qc29uJywgJycpO1xuICAgICAgICAgICAgY29uc3QgaXRlbUVsID0gbGlzdENvbnRhaW5lci5jcmVhdGVEaXYoeyB0ZXh0OiB0aGVtZU5hbWUsIGNsczogJ3RoZW1lLWxpc3QtaXRlbScgfSk7XG5cbiAgICAgICAgICAgIGlmICh0aGVtZU5hbWUgPT09IHRoaXMucGx1Z2luLnNldHRpbmdzLmFwcGxpZWRUaGVtZSkge1xuICAgICAgICAgICAgICAgIGl0ZW1FbC5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWRkIGEgY2xpY2sgbGlzdGVuZXIgdG8gZWFjaCB0aGVtZSBpdGVtIHRvIHJlbmRlciBpdHMgcHJldmlld1xuICAgICAgICAgICAgaXRlbUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIEFycmF5LmZyb20obGlzdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcudGhlbWUtbGlzdC1pdGVtJykpLmZvckVhY2goY2hpbGQgPT4gY2hpbGQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJykpO1xuICAgICAgICAgICAgICAgIGl0ZW1FbC5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVGhlbWVGaWxlID0geyBuYW1lOiBmaWxlIH07XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGhlbWVTZXR0aW5ncyA9IEpTT04ucGFyc2UoZmlsZUNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclRoZW1lUHJldmlldyh0aGVtZVNldHRpbmdzLCB0aGVtZU5hbWUpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3IgcmVhZGluZyB0aGVtZSBmaWxlOiAke3RoZW1lTmFtZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVGhlbWUgZmlsZSByZWFkIGVycm9yOicsIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB0aGVtZUl0ZW1zID0gQXJyYXkuZnJvbShsaXN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy50aGVtZS1saXN0LWl0ZW0nKSk7XG4gICAgICAgIGxldCBmb2N1c2VkSW5kZXggPSAtMTtcblxuICAgICAgICBpZiAodGhlbWVJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGluaXRpYWwgaXRlbSB0byBmb2N1cyBvbiAodGhlIGFjdGl2ZSB0aGVtZSwgb3IgdGhlIGZpcnN0IG9uZSlcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxseUFjdGl2ZUluZGV4ID0gdGhlbWVJdGVtcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmNsYXNzTGlzdC5jb250YWlucygnaXMtYWN0aXZlJykpO1xuICAgICAgICAgICAgZm9jdXNlZEluZGV4ID0gKGluaXRpYWxseUFjdGl2ZUluZGV4ICE9PSAtMSkgPyBpbml0aWFsbHlBY3RpdmVJbmRleCA6IDA7XG5cbiAgICAgICAgICAgIC8vIFNldCB0YWJpbmRleCB0byBtYW5hZ2UgZm9jdXM6ICcwJyBmb3IgdGhlIGZvY3VzYWJsZSBpdGVtLCAnLTEnIGZvciB0aGUgcmVzdFxuICAgICAgICAgICAgdGhlbWVJdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIGluZGV4ID09PSBmb2N1c2VkSW5kZXggPyAnMCcgOiAnLTEnKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGVtZUl0ZW1zW2ZvY3VzZWRJbmRleF0uZm9jdXMoKTtcblxuICAgICAgICAgICAgLy8gTG9hZCB0aGUgaW5pdGlhbCBwcmV2aWV3IGlmIHRoZSBwYW5lIGlzIGVtcHR5XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJldmlld0NvbnRhaW5lci5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgICAgICAgICAgICB0aGVtZUl0ZW1zW2ZvY3VzZWRJbmRleF0uY2xpY2soKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gLS0tIEdMT0JBTCBLRVlCT0FSRCBOQVZJR0FUSU9OIC0tLVxuICAgICAgICAgICAgLy8gQXR0YWNoIGEgc2luZ2xlLCBwZXJzaXN0ZW50IGxpc3RlbmVyIHRvIHRoZSBzZXR0aW5ncyB0YWIncyByb290IGNvbnRhaW5lci5cbiAgICAgICAgICAgIC8vIFRoaXMgY2FwdHVyZXMgYXJyb3cga2V5cyByZWdhcmRsZXNzIG9mIHdoYXQgc3BlY2lmaWMgZWxlbWVudCBoYXMgZm9jdXMuXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLm9ua2V5ZG93biA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gSWdub3JlIGtleSBwcmVzc2VzIGlmIHRoZSB1c2VyIGlzIHR5cGluZyBpbiBhbiBpbnB1dCBmaWVsZFxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC50YWdOYW1lID09PSAnSU5QVVQnIHx8IGUudGFyZ2V0LnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGUua2V5O1xuICAgICAgICAgICAgICAgIGlmICghWydBcnJvd1VwJywgJ0Fycm93RG93bicsICdBcnJvd0xlZnQnLCAnQXJyb3dSaWdodCddLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBVcC9Eb3duIGZvciB0aGVtZSBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSAnQXJyb3dVcCcgfHwga2V5ID09PSAnQXJyb3dEb3duJykge1xuICAgICAgICAgICAgICAgICAgICB0aGVtZUl0ZW1zW2ZvY3VzZWRJbmRleF0uc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSAnQXJyb3dEb3duJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNlZEluZGV4ID0gKGZvY3VzZWRJbmRleCArIDEpICUgdGhlbWVJdGVtcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb2N1c2VkSW5kZXggPSAoZm9jdXNlZEluZGV4IC0gMSArIHRoZW1lSXRlbXMubGVuZ3RoKSAlIHRoZW1lSXRlbXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0l0ZW0gPSB0aGVtZUl0ZW1zW2ZvY3VzZWRJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIG5ld0l0ZW0uc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgICAgICAgICAgICAgICAgIG5ld0l0ZW0uZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3SXRlbS5jbGljaygpOyAvLyBDbGljayB0byBsb2FkIHByZXZpZXcgaW5zdGFudGx5XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIExlZnQvUmlnaHQgZm9yIGxpZ2h0L2RhcmsgbW9kZSB0b2dnbGVcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ0Fycm93TGVmdCcgfHwga2V5ID09PSAnQXJyb3dSaWdodCcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmluZCBidXR0b25zIGJ5IHRoZWlyIGRhdGEtbW9kZSBhdHRyaWJ1dGUgaW5zaWRlIHRoZSBwcmV2aWV3IGNvbnRhaW5lclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaWdodEJ1dHRvbiA9IHRoaXMucHJldmlld0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdidXR0b25bZGF0YS1tb2RlPVwibGlnaHRcIl0nKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGFya0J1dHRvbiA9IHRoaXMucHJldmlld0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdidXR0b25bZGF0YS1tb2RlPVwiZGFya1wiXScpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaWdodEJ1dHRvbiAmJiBkYXJrQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGljayB0aGUgYnV0dG9uIHRoYXQgaXMgTk9UIGN1cnJlbnRseSBhY3RpdmVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEJ1dHRvbiA9IGxpZ2h0QnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnaXMtYWN0aXZlJykgPyBkYXJrQnV0dG9uIDogbGlnaHRCdXR0b247XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRCdXR0b24uY2xpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckluaXRpYWxQcmV2aWV3KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBnZXRUaGVtZUZpbGVzKHRoZW1lc0ZvbGRlclBhdGgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICghYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModGhlbWVzRm9sZGVyUGF0aCkpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgY29uc3QgbGlzdCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIubGlzdCh0aGVtZXNGb2xkZXJQYXRoKTtcbiAgICAgICAgICAgIHJldHVybiBsaXN0LmZpbGVzLmZpbHRlcihmaWxlID0+IGZpbGUuZW5kc1dpdGgoJy5qc29uJykpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWNjZXNzaW5nIHRoZW1lcyBmb2xkZXI6XCIsIGUpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJJbml0aWFsUHJldmlldygpIHtcbiAgICAgICAgaWYgKCF0aGlzLnByZXZpZXdDb250YWluZXIpIHJldHVybjtcbiAgICAgICAgdGhpcy5wcmV2aWV3Q29udGFpbmVyLmVtcHR5KCk7XG4gICAgICAgIHRoaXMucHJldmlld0NvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdUaGVtZSBQcmV2aWV3JyB9KTtcbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSB0aGlzLnByZXZpZXdDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAndGhlbWUtcHJldmlldy1wbGFjZWhvbGRlcicgfSk7XG4gICAgICAgIHBsYWNlaG9sZGVyLnNldFRleHQoJ1NlbGVjdCBhIHRoZW1lIHRvIHNlZSBhIHByZXZpZXcgYW5kIGFwcGx5IGl0LicpO1xuICAgIH1cblxuICAgIHJlbmRlclRoZW1lUHJldmlldyhzZXR0aW5ncywgZmlsZU5hbWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLnByZXZpZXdDb250YWluZXIpIHJldHVybjtcbiAgICAgICAgdGhpcy5wcmV2aWV3Q29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICAgICAgdGhpcy5wcmV2aWV3Q29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0xpdmUgVGhlbWUgUHJldmlldycgfSk7XG5cbiAgICAgICAgY29uc3QgdGFiQ29udGFpbmVyID0gdGhpcy5wcmV2aWV3Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3RoZW1lLXByZXZpZXctdGFicycgfSk7XG4gICAgICAgIGNvbnN0IGxpZ2h0VGFiQnRuID0gdGFiQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdMaWdodCBNb2RlJyB9KTtcbiAgICAgICAgbGlnaHRUYWJCdG4uc2V0QXR0cmlidXRlKCdkYXRhLW1vZGUnLCAnbGlnaHQnKTtcblxuICAgICAgICBjb25zdCBkYXJrVGFiQnRuID0gdGFiQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdEYXJrIE1vZGUnIH0pO1xuICAgICAgICBkYXJrVGFiQnRuLnNldEF0dHJpYnV0ZSgnZGF0YS1tb2RlJywgJ2RhcmsnKTtcblxuICAgICAgICBjb25zdCBwcmV2aWV3Q29udGVudCA9IHRoaXMucHJldmlld0NvbnRhaW5lci5jcmVhdGVEaXYoKTtcblxuICAgICAgICBjb25zdCByZW5kZXIgPSAobW9kZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVQcmV2aWV3TW9kZSA9IG1vZGU7XG4gICAgICAgICAgICBwcmV2aWV3Q29udGVudC5lbXB0eSgpO1xuICAgICAgICAgICAgcHJldmlld0NvbnRlbnQuY2xhc3NOYW1lID0gJyc7XG4gICAgICAgICAgICBwcmV2aWV3Q29udGVudC5hZGRDbGFzcygndGhlbWUtcHJldmlldy1wYW5lJyk7XG5cbiAgICAgICAgICAgIGlmIChtb2RlID09PSAnbGlnaHQnKSB7XG4gICAgICAgICAgICAgICAgcHJldmlld0NvbnRlbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gc2V0dGluZ3MuYmFja2dyb3VuZENvbG9yTGlnaHQgfHwgJyNmZmZmZmYnO1xuICAgICAgICAgICAgICAgIHByZXZpZXdDb250ZW50LnN0eWxlLmNvbG9yID0gc2V0dGluZ3MudGV4dENvbG9yTGlnaHQgfHwgJyMwMDAwMDAnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcmV2aWV3Q29udGVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBzZXR0aW5ncy5iYWNrZ3JvdW5kQ29sb3JEYXJrIHx8ICcjMWUxZTFlJztcbiAgICAgICAgICAgICAgICBwcmV2aWV3Q29udGVudC5zdHlsZS5jb2xvciA9IHNldHRpbmdzLnRleHRDb2xvckRhcmsgfHwgJyNkZGRkZGQnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUNvbXByZWhlbnNpdmVQcmV2aWV3KHByZXZpZXdDb250ZW50LCBzZXR0aW5ncywgbW9kZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgbGlnaHRUYWJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBkYXJrVGFiQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAgICAgbGlnaHRUYWJCdG4uY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XG4gICAgICAgICAgICByZW5kZXIoJ2xpZ2h0Jyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRhcmtUYWJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBsaWdodFRhYkJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgICAgIGRhcmtUYWJCdG4uY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XG4gICAgICAgICAgICByZW5kZXIoJ2RhcmsnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgcHJldmlldyBtb2RlIGJhc2VkIG9uIGFwcCBhcHBlYXJhbmNlIE9OTFkgaWYgaXQgaGFzbid0IGJlZW4gc2V0IHlldC5cbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZVByZXZpZXdNb2RlKSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVByZXZpZXdNb2RlID0gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3RoZW1lLWRhcmsnKSA/ICdkYXJrJyA6ICdsaWdodCc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUcmlnZ2VyIHRoZSBjbGljayBvbiB0aGUgY29ycmVjdCBidXR0b24gYmFzZWQgb24gdGhlICpzdG9yZWQqIHByZXZpZXcgbW9kZS5cbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlUHJldmlld01vZGUgPT09ICdkYXJrJykge1xuICAgICAgICAgICAgZGFya1RhYkJ0bi5jbGljaygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGlnaHRUYWJCdG4uY2xpY2soKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGluaXRpYWxNb2RlID0gdGhpcy5hY3RpdmVQcmV2aWV3TW9kZSB8fCAoZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3RoZW1lLWRhcmsnKSA/ICdkYXJrJyA6ICdsaWdodCcpO1xuICAgICAgICBpZiAoaW5pdGlhbE1vZGUgPT09ICdsaWdodCcpIHtcbiAgICAgICAgICAgIGxpZ2h0VGFiQnRuLmNsaWNrKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYXJrVGFiQnRuLmNsaWNrKCk7XG4gICAgICAgIH1cblxuICAgICAgICBuZXcgU2V0dGluZyh0aGlzLnByZXZpZXdDb250YWluZXIpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkFwcGx5IHRoaXMgdGhlbWVcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiVGhpcyB3aWxsIG92ZXJ3cml0ZSB5b3VyIGN1cnJlbnQgYXBwZWFyYW5jZSBzZXR0aW5ncyB3aXRoIHRoZSBwcmV2aWV3ZWQgdmFsdWVzLlwiKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkFwcGx5XCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKSAvLyBNYWtlcyB0aGUgYnV0dG9uIG1vcmUgcHJvbWluZW50LCBpbmRpY2F0aW5nIGEgcHJpbWFyeSBhY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMS4gQXBwbHkgdGhlIHNldHRpbmdzIGZyb20gdGhlIHByZXZpZXdlZCB0aGVtZVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoc2V0dGluZ3MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Nba2V5XSA9IHNldHRpbmdzW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAyLiBTYXZlIHRoZSBuYW1lIG9mIHRoZSBhcHBsaWVkIHRoZW1lIGZpbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFwcGxpZWRUaGVtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLmpzb24kLywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJBcHBsaWVkIHRoZW1lIHNldHRpbmdzOlwiLCBmaWxlTmFtZSwgc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAzLiBTYXZlIHRoZSBuZXcgc2V0dGluZ3MgdG8gZGlzayBhbmQgdXBkYXRlIHRoZSBsaXZlIHN0eWxlc1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi51cGRhdGVTdHlsZXMoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gNC4gRm9yY2UgdGhlIGVudGlyZSBzZXR0aW5ncyB0YWIgdG8gcmUtcmVuZGVyIGZyb20gc2NyYXRjaFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGlzcGxheSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdUaGVtZSBhcHBsaWVkIHN1Y2Nlc3NmdWxseSEnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gNS4gRm9yY2UgYW55IG9wZW4gY2FsZW5kYXIgdmlld3MgdG8gdXBkYXRlIHdpdGggdGhlIG5ldyB0aGVtZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2NhbGVuZGFyLXBlcmlvZC13ZWVrJylbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVhZiAmJiBsZWFmLnZpZXcgaW5zdGFuY2VvZiBQZXJpb2RNb250aFZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBsZWFmLnZpZXcucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBnZXRQcmV2aWV3Q29sb3IodGhlbWVTZXR0aW5ncywga2V5KSB7XG4gICAgICAgIC8vIDEuIFByaW9yaXRpemUgdGhlIGNvbG9yIGZyb20gdGhlIGxvYWRlZCB0aGVtZSBmaWxlXG4gICAgICAgIGlmICh0aGVtZVNldHRpbmdzICYmIHRoZW1lU2V0dGluZ3Nba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhlbWVTZXR0aW5nc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIC8vIDIuIEZhbGxiYWNrIHRvIHRoZSBsaXZlIHBsdWdpbiBzZXR0aW5ncyBpZiB0aGUga2V5IGlzIG1pc3NpbmcgaW4gdGhlIHRoZW1lXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncyAmJiB0aGlzLnBsdWdpbi5zZXR0aW5nc1trZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBsdWdpbi5zZXR0aW5nc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIC8vIDMuIFByb3ZpZGUgYSBzYWZlIGRlZmF1bHQgaWYgdGhlIHNldHRpbmcgaXMgZGVmaW5lZCBub3doZXJlXG4gICAgICAgIC8vIFRoaXMgaXMgYSBmYWxsYmFjayBmb3Igb2xkZXIgdGhlbWVzIHRoYXQgbWlnaHQgbm90IGhhdmUgYWxsIGtleXNcbiAgICAgICAgaWYgKGtleS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdsaWdodCcpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3JnYmEoMCwgMCwgMCwgMSknOyAvLyBEZWZhdWx0IHRvIGJsYWNrIGZvciBsaWdodCBtb2RlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDEpJzsgLy8gRGVmYXVsdCB0byB3aGl0ZSBmb3IgZGFyayBtb2RlXG4gICAgfVxuXG5cbiAgICBjcmVhdGVDb21wcmVoZW5zaXZlUHJldmlldyhjb250YWluZXIsIHNldHRpbmdzLCBtb2RlKSB7XG4gICAgICAgIGNvbnN0IGlzTGlnaHQgPSBtb2RlID09PSAnbGlnaHQnO1xuICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoYHRoZW1lLXByZXZpZXctcGFuZS0ke21vZGV9YCk7XG5cbiAgICAgICAgLy8gLS0tIENhbGVuZGFyIEdyaWQgUHJldmlldyAtLS1cbiAgICAgICAgY29uc3QgY2FsZW5kYXJHcmlkSGVhZGVyID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ByZXZpZXctc2VjdGlvbi1oZWFkZXInIH0pO1xuXG4gICAgICAgIC8vIC0tLSBNb250aCBhbmQgWWVhciBUaXRsZSBQcmV2aWV3IC0tLVxuICAgICAgICBjb25zdCBtb250aFRpdGxlQ29udGFpbmVyID0gY2FsZW5kYXJHcmlkSGVhZGVyLmNyZWF0ZUVsKCdoMycpO1xuICAgICAgICBtb250aFRpdGxlQ29udGFpbmVyLnN0eWxlLmZvbnRTaXplID0gdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsICdtYWluTW9udGhZZWFyVGl0bGVGb250U2l6ZScsICcyMnB4Jyk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgc3BhbiBmb3IgdGhlIE1PTlRIIHBhcnQgb2YgdGhlIHRpdGxlXG4gICAgICAgIGNvbnN0IG1vbnRoU3BhbiA9IG1vbnRoVGl0bGVDb250YWluZXIuY3JlYXRlU3Bhbih7XG4gICAgICAgICAgICB0ZXh0OiBtb21lbnQobmV3IERhdGUoKSkuZm9ybWF0KCdNTU1NJylcbiAgICAgICAgfSk7XG4gICAgICAgIG1vbnRoU3Bhbi5zdHlsZS5jb2xvciA9IHRoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCBpc0xpZ2h0ID8gJ21vbnRoQ29sb3JMaWdodCcgOiAnbW9udGhDb2xvckRhcmsnKTtcbiAgICAgICAgbW9udGhTcGFuLnN0eWxlLmZvbnRXZWlnaHQgPSB0aGlzLmdldFByZXZpZXdDb2xvcihzZXR0aW5ncywgJ21haW5Nb250aFRpdGxlQm9sZCcsIGZhbHNlKSA/ICdib2xkJyA6ICdub3JtYWwnO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhIHNwYW4gZm9yIHRoZSBZRUFSIHBhcnQgb2YgdGhlIHRpdGxlXG4gICAgICAgIGNvbnN0IHllYXJTcGFuID0gbW9udGhUaXRsZUNvbnRhaW5lci5jcmVhdGVTcGFuKHtcbiAgICAgICAgICAgIHRleHQ6IGAgJHttb21lbnQobmV3IERhdGUoKSkuZm9ybWF0KCdZWVlZJyl9YCAvLyBOb3RlIHRoZSBsZWFkaW5nIHNwYWNlXG4gICAgICAgIH0pO1xuICAgICAgICB5ZWFyU3Bhbi5zdHlsZS5jb2xvciA9IHRoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCBpc0xpZ2h0ID8gJ3llYXJDb2xvckxpZ2h0JyA6ICd5ZWFyQ29sb3JEYXJrJyk7XG4gICAgICAgIHllYXJTcGFuLnN0eWxlLmZvbnRXZWlnaHQgPSB0aGlzLmdldFByZXZpZXdDb2xvcihzZXR0aW5ncywgJ21haW5ZZWFyVGl0bGVCb2xkJywgZmFsc2UpID8gJ2JvbGQnIDogJ25vcm1hbCc7XG5cbiAgICAgICAgLy8gLS0tIENhbGVuZGFyIEdyaWQgUHJldmlldyAtLS1cbiAgICAgICAgY29uc3QgY2FsZW5kYXJXcmFwcGVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogYHByZXZpZXctc2VjdGlvbi13cmFwcGVyICR7bW9kZX1gIH0pO1xuICAgICAgICBjYWxlbmRhcldyYXBwZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gaXNMaWdodCA/IChzZXR0aW5ncy5iYWNrZ3JvdW5kQ29sb3JMaWdodCB8fCAnI2Y1ZjVmNScpIDogKHNldHRpbmdzLmJhY2tncm91bmRDb2xvckRhcmsgfHwgJyMyYTJhMmEnKTtcblxuICAgICAgICBjb25zdCB0YWJsZSA9IGNhbGVuZGFyV3JhcHBlci5jcmVhdGVFbCgndGFibGUnLCB7IGNsczogJ3ByZXZpZXctY2FsZW5kYXItZ3JpZCcgfSk7XG5cbiAgICAgICAgLy8gLS0tIFRhYmxlIEhlYWRlciAodGhlYWQpIC0tLVxuICAgICAgICBjb25zdCB0aGVhZCA9IHRhYmxlLmNyZWF0ZUVsKCd0aGVhZCcpO1xuICAgICAgICBjb25zdCBoZWFkZXJSb3cgPSB0aGVhZC5jcmVhdGVFbCgndHInKTtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IFsnQ1cnLCAnU1VOJywgJ01PTicsICdUVUUnLCAnV0VEJywgJ1RIVScsICdGUkknLCAnU0FUJ107XG5cbiAgICAgICAgaGVhZGVycy5mb3JFYWNoKGhlYWRlclRleHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGggPSBoZWFkZXJSb3cuY3JlYXRlRWwoJ3RoJywgeyB0ZXh0OiBoZWFkZXJUZXh0IH0pO1xuXG4gICAgICAgICAgICAvLyBBbHdheXMgdXNlIHRoZSBzdGFuZGFyZCBkYXkgaGVhZGVyIGZvbnQgY29sb3IgZm9yIHRoZSBDVyBoZWFkZXIgdGV4dFxuICAgICAgICAgICAgaWYgKGhlYWRlclRleHQgPT09ICdDVycpIHtcbiAgICAgICAgICAgICAgICB0aC5zdHlsZS5jb2xvciA9IHRoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCBpc0xpZ2h0ID8gJ2RheUhlYWRlckZvbnRDb2xvckxpZ2h0JyA6ICdkYXlIZWFkZXJGb250Q29sb3JEYXJrJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGb3IgdGhlIFNBVCBoZWFkZXIsIGNoZWNrIGlmIGl0IHNob3VsZCBiZSBoaWdobGlnaHRlZFxuICAgICAgICAgICAgZWxzZSBpZiAoaGVhZGVyVGV4dCA9PT0gJ1NBVCcgJiYgdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsICdoaWdobGlnaHRUb2RheUxhYmVscycsIHRydWUpICYmIHRoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCAnaGlnaGxpZ2h0VG9kYXlEYXlIZWFkZXInLCB0cnVlKSkge1xuICAgICAgICAgICAgICAgIHRoLnN0eWxlLmNvbG9yID0gdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsIGlzTGlnaHQgPyAndG9kYXlDaXJjbGVDb2xvckxpZ2h0JyA6ICd0b2RheUNpcmNsZUNvbG9yRGFyaycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRm9yIGFsbCBvdGhlciBoZWFkZXJzLCB1c2UgdGhlIHN0YW5kYXJkIGRheSBjb2xvclxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGguc3R5bGUuY29sb3IgPSB0aGlzLmdldFByZXZpZXdDb2xvcihzZXR0aW5ncywgaXNMaWdodCA/ICdkYXlIZWFkZXJGb250Q29sb3JMaWdodCcgOiAnZGF5SGVhZGVyRm9udENvbG9yRGFyaycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyAtLS0gVGFibGUgQm9keSAodGJvZHkpIC0tLVxuICAgICAgICBjb25zdCB0Ym9keSA9IHRhYmxlLmNyZWF0ZUVsKCd0Ym9keScpO1xuICAgICAgICBjb25zdCBib2R5Um93ID0gdGJvZHkuY3JlYXRlRWwoJ3RyJyk7XG5cbiAgICAgICAgLy8gLS0tIDEuIERlZmluZSBBbGwgRG90IENvbG9ycyAtLS1cbiAgICAgICAgY29uc3QgZGF5RG90Q29sb3JzID0gW1xuICAgICAgICAgICAgdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsICdkYWlseU5vdGVEb3RDb2xvcicsICcjNGE5MGUyJyksXG4gICAgICAgICAgICB0aGlzLmdldFByZXZpZXdDb2xvcihzZXR0aW5ncywgJ25vdGVDcmVhdGVkQ29sb3InLCAnIzRjYWY1MCcpLFxuICAgICAgICAgICAgdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsICdub3RlTW9kaWZpZWRDb2xvcicsICcjZmY5ODAwJyksXG4gICAgICAgICAgICB0aGlzLmdldFByZXZpZXdDb2xvcihzZXR0aW5ncywgJ2Fzc2V0RG90Q29sb3InLCAnI2ZmMDAwMCcpLFxuICAgICAgICAgICAgdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsICdjYWxlbmRhckV2ZW50RG90Q29sb3InLCAnI2M4NjRjOCcpLFxuICAgICAgICAgICAgdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsICd0YXNrRG90Q29sb3InLCAnIzgwMTI4RCcpXG4gICAgICAgIF07XG5cbiAgICAgICAgLy8gLS0tIDIuIENyZWF0ZSB0aGUgJ0NXJyBjZWxsIChUaGlzIHdhcyB0aGUgbWlzc2luZyBwYXJ0KSAtLS1cbiAgICAgICAgY29uc3QgY3dDZWxsID0gYm9keVJvdy5jcmVhdGVFbCgndGQnKTtcbiAgICAgICAgY29uc3QgY3dDb250ZW50ID0gY3dDZWxsLmNyZWF0ZURpdih7IGNsczogJ3ByZXZpZXctZGF5LWNvbnRlbnQnIH0pO1xuICAgICAgICBjb25zdCBjd051bWJlciA9IGN3Q29udGVudC5jcmVhdGVEaXYoeyB0ZXh0OiAnNDInLCBjbHM6ICdwcmV2aWV3LWRheS1udW1iZXInIH0pO1xuXG4gICAgICAgIC8vIFN0eWxlIHRoZSB3ZWVrIG51bWJlciBiYXNlZCBvbiB0aGVtZSBzZXR0aW5nc1xuICAgICAgICBpZiAodGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsICdoaWdobGlnaHRUb2RheUxhYmVscycsIHRydWUpICYmIHRoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCAnaGlnaGxpZ2h0VG9kYXlQV0xhYmVsJywgdHJ1ZSkpIHtcbiAgICAgICAgICAgIGN3TnVtYmVyLnN0eWxlLmNvbG9yID0gdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsIGlzTGlnaHQgPyAndG9kYXlDaXJjbGVDb2xvckxpZ2h0JyA6ICd0b2RheUNpcmNsZUNvbG9yRGFyaycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3dOdW1iZXIuc3R5bGUuY29sb3IgPSB0aGlzLmdldFByZXZpZXdDb2xvcihzZXR0aW5ncywgaXNMaWdodCA/ICd3ZWVrTnVtYmVyRm9udENvbG9yTGlnaHQnIDogJ3dlZWtOdW1iZXJGb250Q29sb3JEYXJrJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgdGhlIGV4Y2x1c2l2ZSB3ZWVrbHkgbm90ZSBkb3QgdG8gdGhlIENXIGNvbHVtblxuICAgICAgICBpZiAodGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsICdzaG93V2Vla2x5Tm90ZURvdCcsIHRydWUpKSB7XG4gICAgICAgICAgICBjb25zdCB3ZWVrbHlEb3RzQ29udGFpbmVyID0gY3dDb250ZW50LmNyZWF0ZURpdih7IGNsczogJ3ByZXZpZXctZG90cy1jb250YWluZXInIH0pO1xuICAgICAgICAgICAgY29uc3Qgd2Vla2x5Tm90ZURvdCA9IHdlZWtseURvdHNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncHJldmlldy1kb3QnIH0pO1xuICAgICAgICAgICAgd2Vla2x5Tm90ZURvdC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmdldFByZXZpZXdDb2xvcihzZXR0aW5ncywgJ3dlZWtseU5vdGVEb3RDb2xvcicsICcjYTA3M2YwJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAtLS0gMy4gQ3JlYXRlIHRoZSBEYXkgQ2VsbHMgKFN1bmRheSB0byBTYXR1cmRheSkgLS0tXG4gICAgICAgIGNvbnN0IGRvdERpc3RyaWJ1dGlvbiA9IG5ldyBNYXAoW1xuICAgICAgICAgICAgWzUsIFtkYXlEb3RDb2xvcnNbMV1dXSxcbiAgICAgICAgICAgIFs2LCBkYXlEb3RDb2xvcnNdLFxuICAgICAgICAgICAgWzcsIFtkYXlEb3RDb2xvcnNbMl1dXSxcbiAgICAgICAgICAgIFs4LCBbZGF5RG90Q29sb3JzWzBdLCBkYXlEb3RDb2xvcnNbMV1dXSxcbiAgICAgICAgICAgIFs5LCBbZGF5RG90Q29sb3JzWzFdLCBkYXlEb3RDb2xvcnNbMl0sIGRheURvdENvbG9yc1szXV1dLFxuICAgICAgICAgICAgWzEwLCBbZGF5RG90Q29sb3JzWzNdLCBkYXlEb3RDb2xvcnNbNF1dXSxcbiAgICAgICAgICAgIFsxMSwgW2RheURvdENvbG9yc1sxXSwgZGF5RG90Q29sb3JzWzJdXV1cbiAgICAgICAgXSk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDU7IGkgPD0gMTE7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgdGQgPSBib2R5Um93LmNyZWF0ZUVsKCd0ZCcpO1xuICAgICAgICAgICAgY29uc3QgZGF5Q29udGVudCA9IHRkLmNyZWF0ZURpdih7IGNsczogJ3ByZXZpZXctZGF5LWNvbnRlbnQnIH0pO1xuICAgICAgICAgICAgY29uc3QgZGF5TnVtYmVyID0gZGF5Q29udGVudC5jcmVhdGVEaXYoeyB0ZXh0OiBpLnRvU3RyaW5nKCksIGNsczogJ3ByZXZpZXctZGF5LW51bWJlcicgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGRvdHNUb1Nob3cgPSBkb3REaXN0cmlidXRpb24uZ2V0KGkpO1xuICAgICAgICAgICAgaWYgKGRvdHNUb1Nob3cgJiYgZG90c1RvU2hvdy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZG90c0NvbnRhaW5lciA9IGRheUNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAncHJldmlldy1kb3RzLWNvbnRhaW5lcicgfSk7XG4gICAgICAgICAgICAgICAgZG90c1RvU2hvdy5mb3JFYWNoKGNvbG9yID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZG90ID0gZG90c0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdwcmV2aWV3LWRvdCcgfSk7XG4gICAgICAgICAgICAgICAgICAgIGRvdC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGkgPT09IDExKSB7XG4gICAgICAgICAgICAgICAgZGF5TnVtYmVyLmFkZENsYXNzKCd0b2RheScpO1xuICAgICAgICAgICAgICAgIGRheU51bWJlci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmdldFByZXZpZXdDb2xvcihzZXR0aW5ncywgaXNMaWdodCA/ICd0b2RheUNpcmNsZUNvbG9yTGlnaHQnIDogJ3RvZGF5Q2lyY2xlQ29sb3JEYXJrJyk7XG4gICAgICAgICAgICAgICAgZGF5TnVtYmVyLnN0eWxlLmNvbG9yID0gdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsIGlzTGlnaHQgPyAndG9kYXlDaXJjbGVUZXh0Q29sb3JMaWdodCcgOiAndG9kYXlDaXJjbGVUZXh0Q29sb3JEYXJrJywgJyMwMDAwMDAnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGF5TnVtYmVyLnN0eWxlLmNvbG9yID0gdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsIGlzTGlnaHQgPyAnZGF5Q2VsbEZvbnRDb2xvckxpZ2h0JyA6ICdkYXlDZWxsRm9udENvbG9yRGFyaycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGFza3NXcmFwcGVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogYHByZXZpZXctc2VjdGlvbi13cmFwcGVyICR7bW9kZX1gIH0pO1xuICAgICAgICB0YXNrc1dyYXBwZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gaXNMaWdodCA/IChzZXR0aW5ncy5iYWNrZ3JvdW5kQ29sb3JMaWdodCB8fCAnI2Y1ZjVmNScpIDogKHNldHRpbmdzLmJhY2tncm91bmRDb2xvckRhcmsgfHwgJyMyYTJhMmEnKTtcblxuICAgICAgICBjb25zdCB0YXNrR3JvdXBzID0gW1xuICAgICAgICAgICAgeyBuYW1lOiBcIk92ZXJkdWVcIiwgY29sb3JLZXk6IFwidGFza0dyb3VwQ29sb3JPdmVyZHVlXCIsIGNvdW50OiAyLCBpY29uOiBcImFsYXJtLWNsb2NrLW9mZlwiIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwiVG9kYXlcIiwgY29sb3JLZXk6IFwidGFza0dyb3VwQ29sb3JUb2RheVwiLCBjb3VudDogMywgaWNvbjogXCJ0YXJnZXRcIiB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcIlRvbW9ycm93XCIsIGNvbG9yS2V5OiBcInRhc2tHcm91cENvbG9yVG9tb3Jyb3dcIiwgY291bnQ6IDEsIGljb246IFwiY2FsZW5kYXItZGF5c1wiIH0sIC8vIFwiVG9tb3Jyb3dcIiBtYXBzIHRvIFwiTmV4dCA3IERheXNcIiBpY29uXG4gICAgICAgICAgICB7IG5hbWU6IFwiRnV0dXJlXCIsIGNvbG9yS2V5OiBcInRhc2tHcm91cENvbG9yRnV0dXJlXCIsIGNvdW50OiA1LCBpY29uOiBcInRlbGVzY29wZVwiIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwiTm8gRGF0ZVwiLCBjb2xvcktleTogXCJ0YXNrR3JvdXBDb2xvck5vRGF0ZVwiLCBjb3VudDogNCwgaWNvbjogXCJoZWxwLWNpcmNsZVwiIH1cbiAgICAgICAgXTtcblxuXG4gICAgICAgIHRhc2tHcm91cHMuZm9yRWFjaChncm91cCA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXNrR3JvdXBFbCA9IHRhc2tzV3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6ICdwcmV2aWV3LXRhc2stZ3JvdXAnIH0pO1xuICAgICAgICAgICAgdGFza0dyb3VwRWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsIGdyb3VwLmNvbG9yS2V5KTtcblxuICAgICAgICAgICAgLy8gVGhpcyB3cmFwcGVyIGtlZXBzIHRoZSBpY29uIGFuZCB0aXRsZSB0b2dldGhlciBvbiB0aGUgbGVmdFxuICAgICAgICAgICAgY29uc3QgY29udGVudFdyYXBwZXIgPSB0YXNrR3JvdXBFbC5jcmVhdGVEaXYoeyBjbHM6ICdwcmV2aWV3LXRhc2stY29udGVudC13cmFwcGVyJyB9KTtcblxuICAgICAgICAgICAgLy8gQWRkIHRoZSBncm91cCdzIG1haW4gaWNvbiAoZS5nLiwgdGFyZ2V0LCB0ZWxlc2NvcGUpXG4gICAgICAgICAgICBjb25zdCBpY29uRWwgPSBjb250ZW50V3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6ICdwcmV2aWV3LXRhc2staWNvbicgfSk7XG4gICAgICAgICAgICBzZXRJY29uKGljb25FbCwgZ3JvdXAuaWNvbik7XG5cbiAgICAgICAgICAgIC8vIFRoZSB0ZXh0IG5vdyBiZWNvbWVzIFwiT3ZlcmR1ZSAoMilcIiwgXCJUb2RheSAoMylcIiwgZXRjLlxuICAgICAgICAgICAgY29uc3QgdGl0bGVTcGFuID0gY29udGVudFdyYXBwZXIuY3JlYXRlU3Bhbih7XG4gICAgICAgICAgICAgICAgdGV4dDogYCR7Z3JvdXAubmFtZX0gKCR7Z3JvdXAuY291bnR9KWAsXG4gICAgICAgICAgICAgICAgY2xzOiAncHJldmlldy10YXNrLXRpdGxlJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbGxhcHNlSWNvbkVsID0gdGFza0dyb3VwRWwuY3JlYXRlRGl2KHsgY2xzOiAncHJldmlldy1jb2xsYXBzZS1pY29uJyB9KTtcbiAgICAgICAgICAgIHNldEljb24oY29sbGFwc2VJY29uRWwsICdjaGV2cm9uLXVwJyk7XG5cbiAgICAgICAgICAgIC8vIFNldCB0aGUgdGV4dCBjb2xvciBmb3IgYWxsIGVsZW1lbnRzIGluc2lkZSB0aGUgZ3JvdXBcbiAgICAgICAgICAgIGNvbnN0IHRleHRDb2xvciA9IHRoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCBpc0xpZ2h0ID8gJ3Rhc2tHcm91cFRleHRDb2xvckxpZ2h0JyA6ICd0YXNrR3JvdXBUZXh0Q29sb3JEYXJrJyk7XG4gICAgICAgICAgICBjb250ZW50V3JhcHBlci5zdHlsZS5jb2xvciA9IHRleHRDb2xvcjtcbiAgICAgICAgICAgIGNvbGxhcHNlSWNvbkVsLnN0eWxlLmNvbG9yID0gdGV4dENvbG9yO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8vIC0tLSAzLiBDcmVhdGUgdGhlIERvdCBDb2xvciBLZXkgLS0tXG4gICAgICAgIGNvbnN0IGtleUNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdwcmV2aWV3LWRvdC1rZXktY29udGFpbmVyJyB9KTtcbiAgICAgICAga2V5Q29udGFpbmVyLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogJ0NhbGVuZGFyIEdyaWQgRG90IENvbG9yIEtleScgfSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgbWFwcGluZyBvZiB0aGUgZG90IGNvbG9ycyB0byB0aGVpciBuYW1lc1xuICAgICAgICBjb25zdCBkb3RLZXlNYXAgPSBuZXcgTWFwKFtcbiAgICAgICAgICAgIFt0aGlzLmdldFByZXZpZXdDb2xvcihzZXR0aW5ncywgJ3dlZWtseU5vdGVEb3RDb2xvcicsICcjYTA3M2YwJyksICdXZWVrbHkgTm90ZSddLFxuICAgICAgICAgICAgW3RoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCAnZGFpbHlOb3RlRG90Q29sb3InLCAnIzRhOTBlMicpLCAnRGFpbHkgTm90ZSddLFxuICAgICAgICAgICAgW3RoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCAnbm90ZUNyZWF0ZWRDb2xvcicsICcjNGNhZjUwJyksICdDcmVhdGVkIE5vdGUnXSxcbiAgICAgICAgICAgIFt0aGlzLmdldFByZXZpZXdDb2xvcihzZXR0aW5ncywgJ25vdGVNb2RpZmllZENvbG9yJywgJyNmZjk4MDAnKSwgJ01vZGlmaWVkIE5vdGUnXSxcbiAgICAgICAgICAgIFt0aGlzLmdldFByZXZpZXdDb2xvcihzZXR0aW5ncywgJ2Fzc2V0RG90Q29sb3InLCAnI2ZmMDAwMCcpLCAnQXNzZXQnXSxcbiAgICAgICAgICAgIFt0aGlzLmdldFByZXZpZXdDb2xvcihzZXR0aW5ncywgJ2NhbGVuZGFyRXZlbnREb3RDb2xvcicsICcjYzg2NGM4JyksICdFdmVudCddLFxuICAgICAgICAgICAgW3RoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCAndGFza0RvdENvbG9yJywgJyM4MDEyOEQnKSwgJ1Rhc2snXVxuICAgICAgICBdKTtcblxuICAgICAgICAvLyBMb29wIHRocm91Z2ggdGhlIG1hcCBhbmQgY3JlYXRlIGEga2V5IGl0ZW0gZm9yIGVhY2ggZG90IHR5cGVcbiAgICAgICAgZm9yIChjb25zdCBbY29sb3IsIG5hbWVdIG9mIGRvdEtleU1hcC5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleUl0ZW0gPSBrZXlDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncHJldmlldy1kb3Qta2V5LWl0ZW0nIH0pO1xuICAgICAgICAgICAgY29uc3Qga2V5RG90ID0ga2V5SXRlbS5jcmVhdGVEaXYoeyBjbHM6ICdwcmV2aWV3LWRvdC1rZXktc3dhdGNoJyB9KTtcbiAgICAgICAgICAgIGtleURvdC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcjtcbiAgICAgICAgICAgIGtleUl0ZW0uY3JlYXRlU3Bhbih7IHRleHQ6IG5hbWUgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJJbXBvcnRFeHBvcnRUYWIoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWw7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkltcG9ydCAmIEV4cG9ydCBTZXR0aW5nc1wiIH0pO1xuXG4gICAgICAgIC8vIC0tLSBFWFBPUlQgLS0tXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJFeHBvcnQgU2V0dGluZ3NcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiU2F2ZSB5b3VyIHBsdWdpbiBzZXR0aW5ncyB0byBhIEpTT04gZmlsZS4gVHdvIG9wdGlvbnM6IGFsbCBwbHVnaW4gc2V0dGluZ3Mgb3IgdGhlbWUgc2V0dGlucyBvbmx5LiBUaGlzIGlzIHVzZWZ1bCBmb3IgYmFja2luZyB1cCBhbGwgeW91ciBzZXR0aW5ncyBvciBzaGFyaW5nIHlvdXIgdGhlbWUgY29uZmlndXJhdGlvbiB3aXRoIG90aGVycy5cIilcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IHtcbiAgICAgICAgICAgICAgICBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJFeHBvcnQgQWxsIFNldHRpbmdzXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwic2F2ZVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcChcIlNhdmUgYWxsIHBsdWdpbiBzZXR0aW5ncyB0byBhIGZpbGVcIilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5oYW5kbGVFeHBvcnQoJ2FsbCcpKTtcblxuICAgICAgICAgICAgICAgIGJ1dHRvbi5idXR0b25FbC5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkV4cG9ydCBUaGVtZSBPbmx5XCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwicGFsZXR0ZVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcChcIlNhdmUgb25seSBjb2xvcnMsIGZvbnRzLCBhbmQgc2l6ZXMgdG8gYSB0aGVtZSBmaWxlXCIpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHRoaXMuaGFuZGxlRXhwb3J0KCd0aGVtZScpKTtcblxuICAgICAgICAgICAgICAgIGJ1dHRvbi5idXR0b25FbC5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyAtLS0gSU1QT1JUIC0tLVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiSW1wb3J0IFNldHRpbmdzXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkxvYWQgc2V0dGluZ3MgZnJvbSBhIEpTT04gZmlsZS4gVGhpcyB3aWxsIG92ZXJ3cml0ZSB5b3VyIGN1cnJlbnQgc2V0dGluZ3MgYWZ0ZXIgY29uZmlybWF0aW9uLlwiKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkltcG9ydCBmcm9tIEZpbGVcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJ1cGxvYWRcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoXCJMb2FkIHNldHRpbmdzIGZyb20gYSAuanNvbiBmaWxlXCIpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVJbnB1dCA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZmlsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NlcHQ6ICcuanNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiAnZGlzcGxheTogbm9uZTsnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlSW1wb3J0KGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlSW5wdXQuY2xpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBidXR0b24uYnV0dG9uRWwuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUgZXhwb3J0IGZ1bmN0aW9uYWxpdHkuXG4gICAgICogQHBhcmFtIHsnYWxsJyB8ICd0aGVtZSd9IHR5cGUgVGhlIHR5cGUgb2YgZXhwb3J0IHRvIHBlcmZvcm0uXG4gICAgICovXG4gICAgaGFuZGxlRXhwb3J0KHR5cGUpIHtcbiAgICAgICAgbGV0IHNldHRpbmdzVG9FeHBvcnQ7XG4gICAgICAgIGxldCBmaWxlTmFtZTtcblxuICAgICAgICBpZiAodHlwZSA9PT0gJ3RoZW1lJykge1xuICAgICAgICAgICAgY29uc3QgdGhlbWVLZXlzID0gW1xuICAgICAgICAgICAgICAgIC8vIEdlbmVyYWwgYXBwZWFyYW5jZSBzZXR0aW5nc1xuICAgICAgICAgICAgICAgIFwiZm9udFNpemVcIixcbiAgICAgICAgICAgICAgICBcImRheU51bWJlckZvbnRTaXplXCIsXG4gICAgICAgICAgICAgICAgXCJuYXZCdXR0b25IZWlnaHRcIixcbiAgICAgICAgICAgICAgICBcImhlYWRlclJvd0JvbGRcIixcbiAgICAgICAgICAgICAgICBcInB3Q29sdW1uQm9sZFwiLFxuICAgICAgICAgICAgICAgIFwicHdDb2x1bW5TZXBhcmF0b3JDb2xvclwiLFxuXG4gICAgICAgICAgICAgICAgLy8gQWRkIGFsbCB0aGUgZm9udCBjb2xvciBzZXR0aW5nc1xuICAgICAgICAgICAgICAgIFwicHdDb2x1bW5Gb250Q29sb3JMaWdodFwiLFxuICAgICAgICAgICAgICAgIFwicHdDb2x1bW5Gb250Q29sb3JEYXJrXCIsXG4gICAgICAgICAgICAgICAgXCJ3ZWVrTnVtYmVyRm9udENvbG9yTGlnaHRcIixcbiAgICAgICAgICAgICAgICBcIndlZWtOdW1iZXJGb250Q29sb3JEYXJrXCIsXG4gICAgICAgICAgICAgICAgXCJkYXlIZWFkZXJGb250Q29sb3JMaWdodFwiLFxuICAgICAgICAgICAgICAgIFwiZGF5SGVhZGVyRm9udENvbG9yRGFya1wiLFxuICAgICAgICAgICAgICAgIFwiZGF5Q2VsbEZvbnRDb2xvckxpZ2h0XCIsXG4gICAgICAgICAgICAgICAgXCJkYXlDZWxsRm9udENvbG9yRGFya1wiLFxuICAgICAgICAgICAgICAgIFwib3RoZXJNb250aEZvbnRDb2xvckxpZ2h0XCIsXG4gICAgICAgICAgICAgICAgXCJvdGhlck1vbnRoRm9udENvbG9yRGFya1wiLFxuXG4gICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBoaWdobGlnaHQgdG9nZ2xlc1xuICAgICAgICAgICAgICAgIFwiaGlnaGxpZ2h0VG9kYXlEYXlIZWFkZXJcIixcbiAgICAgICAgICAgICAgICBcImhpZ2hsaWdodFRvZGF5UFdMYWJlbFwiLFxuICAgICAgICAgICAgICAgIFwidG9kYXlIaWdobGlnaHRTaXplXCIsXG5cbiAgICAgICAgICAgICAgICBcImN1cnJlbnRIaWdobGlnaHRMYWJlbENvbG9yTGlnaHRcIixcbiAgICAgICAgICAgICAgICBcImN1cnJlbnRIaWdobGlnaHRMYWJlbENvbG9yRGFya1wiLFxuXG4gICAgICAgICAgICAgICAgLy8gQWRkIGFsbCB0aGUgaGlnaGxpZ2h0IGNvbG9yIHNldHRpbmdzXG4gICAgICAgICAgICAgICAgXCJtb250aENvbG9yTGlnaHRcIixcbiAgICAgICAgICAgICAgICBcIm1vbnRoQ29sb3JEYXJrXCIsXG4gICAgICAgICAgICAgICAgXCJ5ZWFyQ29sb3JMaWdodFwiLFxuICAgICAgICAgICAgICAgIFwieWVhckNvbG9yRGFya1wiLFxuXG4gICAgICAgICAgICAgICAgXCJtYWluTW9udGhZZWFyVGl0bGVGb250U2l6ZVwiLFxuICAgICAgICAgICAgICAgIFwibWFpbk1vbnRoVGl0bGVCb2xkXCIsXG4gICAgICAgICAgICAgICAgXCJtYWluWWVhclRpdGxlQm9sZFwiLFxuXG4gICAgICAgICAgICAgICAgLy8gT3RoZXIgc2V0dGluZ3NcbiAgICAgICAgICAgICAgICBcInRhYlRpdGxlRm9udFNpemVcIixcbiAgICAgICAgICAgICAgICBcInRhYlRpdGxlQm9sZFwiLFxuICAgICAgICAgICAgICAgIFwic2VsZWN0ZWRUYWJDb2xvclwiLFxuICAgICAgICAgICAgICAgIFwidG9kYXlIaWdobGlnaHRDb2xvckxpZ2h0XCIsXG4gICAgICAgICAgICAgICAgXCJ0b2RheUhpZ2hsaWdodENvbG9yRGFya1wiLFxuICAgICAgICAgICAgICAgIFwibm90ZXNIb3ZlckNvbG9yXCIsXG4gICAgICAgICAgICAgICAgXCJkYWlseU5vdGVEb3RDb2xvclwiLFxuICAgICAgICAgICAgICAgIFwibm90ZUNyZWF0ZWRDb2xvclwiLFxuICAgICAgICAgICAgICAgIFwibm90ZU1vZGlmaWVkQ29sb3JcIixcbiAgICAgICAgICAgICAgICBcInJvd0hpZ2hsaWdodENvbG9yTGlnaHRcIixcbiAgICAgICAgICAgICAgICBcInJvd0hpZ2hsaWdodENvbG9yRGFya1wiLFxuICAgICAgICAgICAgICAgICd3ZWVrZW5kU2hhZGVDb2xvckxpZ2h0JyxcbiAgICAgICAgICAgICAgICAnd2Vla2VuZFNoYWRlQ29sb3JEYXJrJyxcbiAgICAgICAgICAgICAgICBcImRhdGVDZWxsSG92ZXJDb2xvckxpZ2h0XCIsXG4gICAgICAgICAgICAgICAgXCJkYXRlQ2VsbEhvdmVyQ29sb3JEYXJrXCIsXG4gICAgICAgICAgICAgICAgXCJhc3NldERvdENvbG9yXCIsXG4gICAgICAgICAgICAgICAgXCJjYWxlbmRhckV2ZW50RG90Q29sb3JcIixcbiAgICAgICAgICAgICAgICBcInRvZGF5SGlnaGxpZ2h0U3R5bGVcIixcbiAgICAgICAgICAgICAgICBcInRvZGF5Q2lyY2xlQ29sb3JMaWdodFwiLFxuICAgICAgICAgICAgICAgIFwidG9kYXlDaXJjbGVDb2xvckRhcmtcIixcbiAgICAgICAgICAgICAgICBcIndlZWtseU5vdGVEb3RDb2xvclwiLFxuICAgICAgICAgICAgICAgIFwic2NyYXRjaEZvbnRTaXplXCIsXG4gICAgICAgICAgICAgICAgXCJzY3JhdGNoQm9sZFwiLFxuICAgICAgICAgICAgICAgIFwic2NyYXRjaEZvbnRGYW1pbHlcIixcbiAgICAgICAgICAgICAgICBcInNjcmF0Y2hwYWRIaWdobGlnaHRDb2xvclwiLFxuICAgICAgICAgICAgICAgIFwibm90ZXNGb250U2l6ZVwiLFxuICAgICAgICAgICAgICAgIFwibm90ZXNCb2xkXCIsXG4gICAgICAgICAgICAgICAgXCJub3Rlc0xpbmVIZWlnaHRcIixcbiAgICAgICAgICAgICAgICBcInNob3dOb3RlU3RhdHVzRG90c1wiLFxuICAgICAgICAgICAgICAgIFwib3RoZXJOb3RlUG9wdXBGb250U2l6ZVwiLFxuICAgICAgICAgICAgICAgIFwiY2FsZW5kYXJEb3RTaXplXCIsXG4gICAgICAgICAgICAgICAgLy8gVGFzayBzZXR0aW5nc1xuICAgICAgICAgICAgICAgIFwidGFza0luZGljYXRvclN0eWxlXCIsXG4gICAgICAgICAgICAgICAgXCJ0YXNrRG90Q29sb3JcIixcbiAgICAgICAgICAgICAgICBcInRhc2tCYWRnZUZvbnRTaXplXCIsXG4gICAgICAgICAgICAgICAgXCJ0YXNrQmFkZ2VDb2xvclwiLFxuICAgICAgICAgICAgICAgIFwidGFza0JhZGdlRm9udENvbG9yXCIsXG4gICAgICAgICAgICAgICAgXCJ0YXNrSGVhdG1hcFN0YXJ0Q29sb3JcIixcbiAgICAgICAgICAgICAgICBcInRhc2tIZWF0bWFwTWlkQ29sb3JcIixcbiAgICAgICAgICAgICAgICBcInRhc2tIZWF0bWFwRW5kQ29sb3JcIixcbiAgICAgICAgICAgICAgICBcInRhc2tIZWFkaW5nRm9udFNpemVcIixcbiAgICAgICAgICAgICAgICBcInRhc2tUZXh0Rm9udFNpemVcIixcbiAgICAgICAgICAgICAgICBcInRhc2tHcm91cENvbG9yT3ZlcmR1ZVwiLFxuICAgICAgICAgICAgICAgIFwidGFza0dyb3VwQ29sb3JUb2RheVwiLFxuICAgICAgICAgICAgICAgIFwidGFza0dyb3VwQ29sb3JUb21vcnJvd1wiLFxuICAgICAgICAgICAgICAgIFwidGFza0dyb3VwQ29sb3JOZXh0N0RheXNcIixcbiAgICAgICAgICAgICAgICBcInRhc2tHcm91cENvbG9yRnV0dXJlXCIsXG4gICAgICAgICAgICAgICAgXCJ0YXNrR3JvdXBDb2xvck5vRGF0ZVwiLFxuICAgICAgICAgICAgICAgIFwidGFza0dyb3VwQ29sb3JUYWdcIixcblxuICAgICAgICAgICAgICAgIC8vVGFzayBEYXNoYm9hcmRcbiAgICAgICAgICAgICAgICBcInRhc2tTdGF0dXNDb2xvck92ZXJkdWVcIixcbiAgICAgICAgICAgICAgICBcInRhc2tTdGF0dXNDb2xvckluUHJvZ3Jlc3NcIixcbiAgICAgICAgICAgICAgICBcInRhc2tTdGF0dXNDb2xvck9wZW5cIixcbiAgICAgICAgICAgICAgICBcInRhc2tTdGF0dXNDb2xvckNvbXBsZXRlZFwiLFxuICAgICAgICAgICAgICAgIFwidGFza1N0YXR1c0NvbG9yQ2FuY2VsbGVkXCJcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBzZXR0aW5nc1RvRXhwb3J0ID0ge307XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB0aGVtZUtleXMpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1RvRXhwb3J0W2tleV0gPSB0aGlzLnBsdWdpbi5zZXR0aW5nc1trZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEFkZCB0aGUgdGhlbWUtc3BlY2lmaWMgaWRlbnRpZmllclxuICAgICAgICAgICAgc2V0dGluZ3NUb0V4cG9ydC5fX2V4cG9ydFR5cGUgPSBcInRoZW1lXCI7XG4gICAgICAgICAgICBmaWxlTmFtZSA9IGBjYWxlbmRhci1wZXJpb2Qtd2Vlay1ub3Rlcy10aGVtZS5qc29uYDtcblxuICAgICAgICB9IGVsc2UgeyAvLyAnYWxsJ1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgY29weSB0byBhdm9pZCBtb2RpZnlpbmcgdGhlIGxpdmUgc2V0dGluZ3Mgb2JqZWN0XG4gICAgICAgICAgICBzZXR0aW5nc1RvRXhwb3J0ID0geyAuLi50aGlzLnBsdWdpbi5zZXR0aW5ncyB9O1xuICAgICAgICAgICAgLy8gQWRkIHRoZSAnYWxsJyBzZXR0aW5ncyBpZGVudGlmaWVyXG4gICAgICAgICAgICBzZXR0aW5nc1RvRXhwb3J0Ll9fZXhwb3J0VHlwZSA9IFwiYWxsXCI7XG4gICAgICAgICAgICBmaWxlTmFtZSA9IGBjYWxlbmRhci1wZXJpb2Qtd2Vlay1ub3Rlcy1zZXR0aW5ncy5qc29uYDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnN0cmluZ2lmeShzZXR0aW5nc1RvRXhwb3J0LCBudWxsLCAyKTtcbiAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtkYXRhXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbicgfSk7XG4gICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgIGEuaHJlZiA9IHVybDtcbiAgICAgICAgYS5kb3dubG9hZCA9IGZpbGVOYW1lO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpO1xuICAgICAgICBhLmNsaWNrKCk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7XG4gICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcblxuICAgICAgICBuZXcgTm90aWNlKGAke3R5cGUgPT09ICd0aGVtZScgPyAnVGhlbWUnIDogJ0FsbCd9IHNldHRpbmdzIGV4cG9ydGVkLmApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIGltcG9ydCBmdW5jdGlvbmFsaXR5LlxuICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBUaGUgSlNPTiBmaWxlIHNlbGVjdGVkIGJ5IHRoZSB1c2VyLlxuICAgICAqL1xuICAgIGhhbmRsZUltcG9ydChmaWxlKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW1wb3J0ZWRTZXR0aW5ncyA9IEpTT04ucGFyc2UoZXZlbnQudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwb3J0VHlwZSA9IGltcG9ydGVkU2V0dGluZ3MuX19leHBvcnRUeXBlO1xuXG4gICAgICAgICAgICAgICAgLy8gRGVmaW5lIGRlZmF1bHQvZmFsbGJhY2sgbWVzc2FnZXNcbiAgICAgICAgICAgICAgICBsZXQgdGl0bGUgPSAnT3ZlcndyaXRlIFNldHRpbmdzPyc7XG4gICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSAnVGhpcyBhcHBlYXJzIHRvIGJlIGFuIG9sZGVyIHNldHRpbmdzIGZpbGUuIEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBpbXBvcnQgaXQ/IFlvdXIgY3VycmVudCBjb25maWd1cmF0aW9uIHdpbGwgYmUgb3ZlcndyaXR0ZW4uJztcbiAgICAgICAgICAgICAgICBsZXQgY29uZmlybVRleHQgPSAnSW1wb3J0JztcblxuICAgICAgICAgICAgICAgIC8vIEN1c3RvbWl6ZSBtZXNzYWdlcyBiYXNlZCBvbiB0aGUgZXhwb3J0IHR5cGVcbiAgICAgICAgICAgICAgICBpZiAoZXhwb3J0VHlwZSA9PT0gJ3RoZW1lJykge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZSA9ICdJbXBvcnQgVGhlbWUgU2V0dGluZ3M/JztcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9ICdZb3UgYXJlIGFib3V0IHRvIGltcG9ydCBhIHRoZW1lIGZpbGUuIFRoaXMgd2lsbCBvdmVyd3JpdGUgb25seSB5b3VyIGN1cnJlbnQgYXBwZWFyYW5jZSBzZXR0aW5ncyAoY29sb3JzLCBmb250cywgZXRjLikuJztcbiAgICAgICAgICAgICAgICAgICAgY29uZmlybVRleHQgPSAnSW1wb3J0IFRoZW1lJztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV4cG9ydFR5cGUgPT09ICdhbGwnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlID0gJ0ltcG9ydCBBbGwgU2V0dGluZ3M/JztcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9ICdZb3UgYXJlIGFib3V0IHRvIGltcG9ydCBhIGZ1bGwgc2V0dGluZ3MgZmlsZS4gVGhpcyB3aWxsIG92ZXJ3cml0ZSB5b3VyIEVOVElSRSBjdXJyZW50IGNvbmZpZ3VyYXRpb24gZm9yIHRoaXMgcGx1Z2luLic7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpcm1UZXh0ID0gJ0ltcG9ydCBBbGwnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEJhc2ljIHZhbGlkYXRpb24gZm9yIG9sZCBmaWxlcyB3aXRob3V0IGFuIGlkZW50aWZpZXJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpbXBvcnRlZFNldHRpbmdzLmhhc093blByb3BlcnR5KCdmb250U2l6ZScpICYmICFpbXBvcnRlZFNldHRpbmdzLmhhc093blByb3BlcnR5KCdmaXhlZE5vdGVGaWxlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0Vycm9yOiBUaGlzIGRvZXMgbm90IGFwcGVhciB0byBiZSBhIHZhbGlkIHNldHRpbmdzIGZpbGUuJywgNTAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGlkZW50aWZpZXIgYmVmb3JlIG1lcmdpbmcgc28gaXQncyBub3Qgc2F2ZWQgaW50byB0aGUgcGx1Z2luJ3MgZGF0YVxuICAgICAgICAgICAgICAgIGlmIChleHBvcnRUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBpbXBvcnRlZFNldHRpbmdzLl9fZXhwb3J0VHlwZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTaG93IHRoZSBjb25maXJtYXRpb24gbW9kYWwgd2l0aCB0aGUgYXBwcm9wcmlhdGUgbWVzc2FnZVxuICAgICAgICAgICAgICAgIG5ldyBDb25maXJtYXRpb25Nb2RhbFdpdGhTdHlsZXModGhpcy5hcHAsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMucGx1Z2luLnNldHRpbmdzLCBpbXBvcnRlZFNldHRpbmdzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4cG9ydFR5cGUgPT09ICd0aGVtZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcHBsaWVkVGhlbWUgPSBmaWxlLm5hbWUucmVwbGFjZSgvXFwuanNvbiQvLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGlzcGxheSgpOyAvLyBSZS1yZW5kZXIgdGhlIHNldHRpbmdzIHRhYlxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnU2V0dGluZ3MgaW1wb3J0ZWQgc3VjY2Vzc2Z1bGx5IScpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjb25maXJtVGV4dCAvLyBVc2UgdGhlIGN1c3RvbWl6ZWQgYnV0dG9uIHRleHRcbiAgICAgICAgICAgICAgICApLm9wZW4oKTtcblxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0Vycm9yOiBDb3VsZCBub3QgcGFyc2UgdGhlIEpTT04gZmlsZS4gRW5zdXJlIGl0IGlzIG5vdCBjb3JydXB0ZWQuJywgNTAwMCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBwYXJzZSBzZXR0aW5ncyBKU09OOlwiLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7XG4gICAgfVxuXG4gICAgcmVuZGVyQWJvdXRUYWIoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWw7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkFib3V0IENhbGVuZGFyIFBlcmlvZCBXZWVrIE5vdGVzXCIgfSk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcbiAgICAgICAgICAgIHRleHQ6IFwiVGhpcyBwbHVnaW4gcHJvdmlkZXMgdHdvIGNvbXByZWhlbnNpdmUgY2FsZW5kYXIgdmlld3MgdG9nZXRoZXIgd2l0aCBhbiBpbnRlZ3JhdGVkIHBhbmVsIGNvbnRhaW5pbmcgYSBzY3JhdGNocGFkIGFyZWEsIG5vdGVzLCB0YXNrcywgYW5kIGFzc2V0cy5cIlxuICAgICAgICB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU3VwcG9ydCB0aGUgRGV2ZWxvcGVyXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIklmIHlvdSBmaW5kIHRoaXMgcGx1Z2luIHVzZWZ1bCwgcGxlYXNlIGNvbnNpZGVyIHN1cHBvcnRpbmcgaXRzIGRldmVsb3BtZW50LiBJdCdzIGdyZWF0bHkgYXBwcmVjaWF0ZWQhXCIpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICAgICAgYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwi4piVIEJ1eSBNZSBhIENvZmZlZVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcChcImh0dHBzOi8vYnV5bWVhY29mZmVlLmNvbS9maWt0ZVwiKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihcImh0dHBzOi8vYnV5bWVhY29mZmVlLmNvbS9maWt0ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmJ1dHRvbkVsLmFkZENsYXNzKCdtb2QtY3RhJyk7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmJ1dHRvbkVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjRkZERDAwJztcbiAgICAgICAgICAgICAgICBidXR0b24uYnV0dG9uRWwuc3R5bGUuY29sb3IgPSAnIzAwMDAwMCc7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmJ1dHRvbkVsLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIHJlbmRlclN0YXJ0SGVyZVRhYigpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyRWwgPSB0aGlzLmNvbnRlbnRFbDtcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgICAgICAvLyBXZSBhcmUgc2V0dGluZyB0aGUgSFRNTCBkaXJlY3RseSB0byBieXBhc3MgdGhlIE1hcmtkb3duUmVuZGVyZXIgYW5kIGF2b2lkIHBsdWdpbiBjb25mbGljdHMuXG4gICAgICAgIGNvbnRhaW5lckVsLmlubmVySFRNTCA9IGBcbiAgICAgICAgPGgyPvCfmoAgUXVpY2sgU3RhcnQ6IEluaXRpYWwgU2V0dXA8L2gyPlxuICAgICAgICA8aHI+XG4gICAgICAgIDxwPldlbGNvbWUsIHRvIGdldCB0aGUgbW9zdCBvdXQgb2YgdGhpcyBwbHVnaW4sIGl0J3MgcmVjb21tZW5kZWQgdG8gY29uZmlndXJlIGEgZmV3IGtleSBzZXR0aW5ncyB0byBtYXRjaCB5b3VyIHdvcmtmbG93LjwvcD5cbiAgICAgICAgPGhyPlxuICAgICAgICA8aDM+MS4gU2V0IFVwIFlvdXIgU2NyYXRjaHBhZCBOb3RlPC9oMz5cbiAgICAgICAgPHA+VGhlIDxzdHJvbmc+U2NyYXRjaHBhZDwvc3Ryb25nPiB0YWIgbmVlZHMgdG8gcG9pbnQgdG8gYSBub3RlIGZpbGUgaW4geW91ciB2YXVsdC4gQnkgZGVmYXVsdCwgaXQgbG9va3MgZm9yIDxjb2RlPlNjcmF0Y2hQYWQubWQ8L2NvZGU+IGluIHlvdXIgdmF1bHQncyByb290LjwvcD5cbiAgICAgICAgPHVsPlxuICAgICAgICAgICAgPGxpPjxzdHJvbmc+R28gdG86PC9zdHJvbmc+IFwiU2NyYXRjaFBhZCBUYWJcIiDihpIgXCJTY3JhdGNoUGFnZSBub3RlIHBhdGhcIj48L2xpPlxuICAgICAgICAgICAgPGxpPjxzdHJvbmc+QWN0aW9uOjwvc3Ryb25nPiBTZXQgdGhlIDxzdHJvbmc+U2NyYXRjaFBhZCBub3RlIHBhdGg8L3N0cm9uZz4gdG8gYW55IG5vdGUgeW91IHByZWZlci4gSWYgaXQgZG9lc24ndCBleGlzdCwgdGhlIHBsdWdpbiB3aWxsIGNyZWF0ZSBpdCBmb3IgeW91LjwvbGk+XG4gICAgICAgIDwvdWw+XG4gICAgICAgIDxocj5cbiAgICAgICAgPGgzPjIuIENvbmZpZ3VyZSBZb3VyIERhaWx5IE5vdGVzPC9oMz5cbiAgICAgICAgPHA+Rm9yIGNhbGVuZGFyIGFuZCBsaXN0IGRvdHMgYW5kIGNsaWNrLXRvLW9wZW4gZmVhdHVyZXMgdG8gd29yaywgdGhlIHBsdWdpbiBuZWVkcyB0byBrbm93IHdoZXJlIHlvdXIgZGFpbHkgbm90ZXMgYXJlLjwvcD5cbiAgICAgICAgPHVsPlxuICAgICAgICAgICAgPGxpPjxzdHJvbmc+R28gdG86PC9zdHJvbmc+IFwiQ2FsZW5kYXIgRnVuY3Rpb25hbFwiIOKGkiBcIkRhaWx5IE5vdGVzXCI8L2xpPlxuICAgICAgICAgICAgPGxpPjxzdHJvbmc+QWN0aW9uOjwvc3Ryb25nPiBTZXQgeW91ciA8c3Ryb25nPkRhaWx5IE5vdGVzIGZvbGRlcjwvc3Ryb25nPiBhbmQgPHN0cm9uZz5EYWlseSBub3RlIGZvcm1hdDwvc3Ryb25nPiB0byBtYXRjaCBzZXR1cCAoZS5nLiwgWVlZWS1NTS1ERCkuPC9saT5cbiAgICAgICAgPC91bD5cbiAgICAgICAgPGhyPlxuICAgICAgICA8aDM+My4gRGVmaW5lIFlvdXIgVGFzayBGb3JtYXQ8L2gzPlxuICAgICAgICA8cD5Gb3IgdGhlIHBsdWdpbiB0byByZWNvZ25pc2UgeW91ciB0YXNrIGR1ZSBkYXRlcywgdGhleSA8c3Ryb25nPm11c3Q8L3N0cm9uZz4gdXNlIHRoZSA8Y29kZT7wn5OFPC9jb2RlPiBlbW9qaSBmb3IgZHVlIGRhdGVzLiBEb3dubG9hZCB0aGUgVGFza3MgcGx1Z2luIGZvciBpbXByb3ZlZCBjb21wYXRpYmlsaXR5LiBUaGUgZm9sbG93aW5nIGV4YW1wbGVzIHNob3cgdGhlIGZvcm1hdCBvZiB0YXNrcyB0byBiZSB1c2VkOjwvcD5cbiAgICAgICAgPHA+PHN0cm9uZz5EdWUgRGF0ZXM6PC9zdHJvbmc+PC9wPlxuICAgICAgICA8cHJlPi0gWyBdIE15IHRhc2sgd2l0aCBhIGR1ZSBkYXRlIPCfk4UgMjAyNS0xMC0yNjwvcHJlPlxuICAgICAgICA8cHJlPi0gWyBdIFJldmlldyBwcm9qZWN0IG5vdGVzICN3b3JrIPCfk4UgMjAyNS0xMS0wMTwvY29kZT48L3ByZT5cbiAgICAgICAgPHA+PHN0cm9uZz5Db21wbGV0aW9uIERhdGVzOjwvc3Ryb25nPjwvcD5cbiAgICAgICAgPHByZT4tIFt4XSBNeSBjb21wbGV0ZWQgdGFzayDwn5OFIDIwMjUtMTAtMjYg4pyFIDIwMjUtMDktMTk8L3ByZT5cbiAgICAgICAgPHA+Tk9URTogSWYgeW91IGRvIG5vdCB1c2UgdGhpcyBUYXNrIGZvcm1hdCB0aGVuIHlvdSBjYW4gdG9nZ2xlIG9mZiB0aGUgVGFza3MgVGFiIGluIHRoZSBcIkdlbmVyYWwgVGFiXCIg4oaSIFwiVGFiIFZpc2liaWxpdHlcIiBzZWN0aW9uLjwvcD5cbiAgICAgICAgPGhyPlxuICAgICAgICA8aDM+NC4gKE9wdGlvbmFsKSBTZXQgWW91ciBQZXJpb2QvV2VlayBTdGFydCBEYXRlPC9oMz5cbiAgICAgICAgPHA+SWYgeW91IHBsYW4gdG8gdXNlIHRoZSBjdXN0b20gUGVyaW9kL1dlZWsgY2FsZW5kYXIgc3lzdGVtIChlLmcuLCBcIlA3VzRcIiksIHlvdSBzaG91bGQgc2V0IGl0cyBzdGFydGluZyBkYXRlLiBUaGUgcGVyaW9kL3dlZWsgY2FsZW5kYXIgc3lzdGVtLCB1c2VkIGJ5IHNvbWUgY29tcGFuaWVzIGZvciBmaW5hbmNpYWwgeWVhciB0cmFja2luZywgYXNzdW1lcyAxMyBwZXJpb2RzIHdpdGggNCB3ZWVrcyBpbiBlYWNoIHBlcmlvZC48L3A+XG4gICAgICAgIDx1bD5cbiAgICAgICAgICAgIDxsaT48c3Ryb25nPkdvIHRvOjwvc3Ryb25nPiBcIkNhbGVuZGFyIEZ1bmN0aW9uYWxcIiDihpIgXCJQZXJpb2QvV2VlayBTeXN0ZW1cIjwvbGk+XG4gICAgICAgICAgICA8bGk+PHN0cm9uZz5BY3Rpb246PC9zdHJvbmc+IFNldCB0aGUgPHN0cm9uZz5TdGFydCBvZiBQZXJpb2QgMSBXZWVrIDE8L3N0cm9uZz4gdG8gdGhlIFN1bmRheSBkYXRlIG9mIHlvdXIgY2hvaWNlLjwvbGk+XG4gICAgICAgIDwvdWw+XG4gICAgYDtcbiAgICB9XG5cbn1cbmV4cG9ydCBkZWZhdWx0IFBlcmlvZE1vbnRoUGx1Z2luOyJdLCJuYW1lcyI6WyJFdmVudCIsIklDQUwiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sTUFBTSxDQUFDO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxPQUFPLFVBQVUsQ0FBQyxPQUFPLEVBQUU7QUFDN0IsSUFBSSxPQUFPLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQztBQUM5QixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFdBQVcsQ0FBQyxNQUFNLEVBQUU7QUFDdEIsSUFBSSxJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU07QUFDdkIsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxRQUFRLEdBQUcsUUFBUTs7QUFFckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsV0FBVyxHQUFHO0FBQ2hCLElBQUksT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7QUFDdkMsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLGVBQWUsQ0FBQyxNQUFNLEVBQUU7QUFDMUIsSUFBSSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDO0FBQ3pDLEVBQUU7O0FBRUYsRUFBRSxXQUFXLENBQUMsSUFBSSxFQUFFO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSSxHQUFHLEdBQUcsNEJBQTRCO0FBQzFDLGNBQWMseUNBQXlDO0FBQ3ZELElBQUksSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDO0FBQy9DLE1BQU0sRUFBRSxHQUFHLENBQUM7QUFDWixNQUFNLEdBQUcsR0FBRyxFQUFFO0FBQ2QsTUFBTSxPQUFPLEdBQUcsRUFBRTs7QUFFbEIsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO0FBQ2YsTUFBTSxPQUFPLElBQUk7QUFDakIsSUFBSTs7QUFFSixJQUFJLEdBQUc7QUFDUCxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDO0FBQy9CLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLENBQUM7QUFDL0IsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQzs7QUFFL0IsTUFBTSxJQUFJLEdBQUcsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7O0FBRXBDLE1BQU0sRUFBRSxHQUFHLElBQUksSUFBSSxFQUFFLEdBQUcsSUFBSTtBQUM1QixNQUFNLEVBQUUsR0FBRyxJQUFJLElBQUksRUFBRSxHQUFHLElBQUk7QUFDNUIsTUFBTSxFQUFFLEdBQUcsSUFBSSxJQUFJLENBQUMsR0FBRyxJQUFJO0FBQzNCLE1BQU0sRUFBRSxHQUFHLElBQUksR0FBRyxJQUFJOztBQUV0QjtBQUNBLE1BQU0sT0FBTyxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUM7QUFDdkYsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNOztBQUU1QixJQUFJLEdBQUcsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQzs7QUFFMUIsSUFBSSxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUM7O0FBRTNCLElBQUksT0FBTyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQzs7QUFFaEUsRUFBRTs7QUFFRixFQUFFLFdBQVcsQ0FBQyxJQUFJLEVBQUU7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSSxHQUFHLEdBQUcsNEJBQTRCO0FBQzFDLGNBQWMseUNBQXlDO0FBQ3ZELElBQUksSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDO0FBQy9DLE1BQU0sRUFBRSxHQUFHLENBQUM7QUFDWixNQUFNLEdBQUcsR0FBRyxFQUFFO0FBQ2QsTUFBTSxPQUFPLEdBQUcsRUFBRTs7QUFFbEIsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO0FBQ2YsTUFBTSxPQUFPLElBQUk7QUFDakIsSUFBSTs7QUFFSixJQUFJLElBQUksSUFBSSxFQUFFOztBQUVkLElBQUksR0FBRztBQUNQLE1BQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3hDLE1BQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3hDLE1BQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3hDLE1BQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDOztBQUV4QyxNQUFNLElBQUksR0FBRyxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFOztBQUUvQyxNQUFNLEVBQUUsR0FBRyxJQUFJLElBQUksRUFBRSxHQUFHLElBQUk7QUFDNUIsTUFBTSxFQUFFLEdBQUcsSUFBSSxJQUFJLENBQUMsR0FBRyxJQUFJO0FBQzNCLE1BQU0sRUFBRSxHQUFHLElBQUksR0FBRyxJQUFJOztBQUV0QixNQUFNLElBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUNwQixRQUFRLE9BQU8sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDO0FBQy9DLE1BQU0sQ0FBQyxNQUFNLElBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUMzQixRQUFRLE9BQU8sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQztBQUNuRCxNQUFNLENBQUMsTUFBTTtBQUNiLFFBQVEsT0FBTyxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQztBQUN2RCxNQUFNO0FBQ04sSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNOztBQUU1QixJQUFJLEdBQUcsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQzs7QUFFMUIsSUFBSSxPQUFPLEdBQUc7QUFDZCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxRQUFRLEdBQUc7QUFDYixJQUFJLE9BQU8sSUFBSSxDQUFDLEtBQUs7QUFDckIsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQSxNQUFNLGdCQUFnQixHQUFHLGtCQUFrQjtBQUMzQyxNQUFNLGtCQUFrQixHQUFHLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxZQUFZLENBQUM7O0FBRXpGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sUUFBUSxDQUFDO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxPQUFPLFdBQVcsQ0FBQyxRQUFRLEVBQUU7QUFDL0IsSUFBSSxPQUFPLENBQUMsSUFBSSxRQUFRLEVBQUUsRUFBRSxXQUFXLENBQUMsUUFBUSxDQUFDO0FBQ2pELEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLE9BQU8sYUFBYSxDQUFDLE1BQU0sRUFBRTtBQUMvQixJQUFJLFFBQVEsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRztBQUNsRCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsT0FBTyxVQUFVLENBQUMsSUFBSSxFQUFFO0FBQzFCLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQztBQUNmLElBQUksSUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7QUFDbEMsSUFBSSxJQUFJLE1BQU0sR0FBRyxDQUFDOztBQUVsQixJQUFJLE9BQU8sQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsRUFBRTtBQUN6RCxNQUFNLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUM7QUFDMUIsTUFBTSxJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUNuRCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7O0FBRWhDLE1BQU0sTUFBTSxJQUFJLGtCQUFrQixDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDO0FBQ3ZELElBQUk7O0FBRUosSUFBSSxJQUFJLE1BQU0sR0FBRyxDQUFDLEVBQUU7QUFDcEI7QUFDQSxNQUFNLE1BQU0sSUFBSSxLQUFLO0FBQ3JCLFFBQVEsNkRBQTZELEdBQUcsSUFBSSxHQUFHO0FBQy9FLE9BQU87QUFDUCxJQUFJOztBQUVKLElBQUksT0FBTyxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUM7QUFDN0IsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLE9BQU8sUUFBUSxDQUFDLEtBQUssRUFBRTtBQUN6QixJQUFJLE9BQU8sSUFBSSxRQUFRLENBQUMsS0FBSyxDQUFDO0FBQzlCLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsV0FBVyxDQUFDLElBQUksRUFBRTtBQUNwQixJQUFJLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSTtBQUMvQixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO0FBQ3ZCLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsS0FBSyxHQUFHLENBQUM7O0FBRVg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsSUFBSSxHQUFHLENBQUM7O0FBRVY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsS0FBSyxHQUFHLENBQUM7O0FBRVg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsT0FBTyxHQUFHLENBQUM7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsT0FBTyxHQUFHLENBQUM7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsVUFBVSxHQUFHLEtBQUs7O0FBRXBCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsU0FBUyxHQUFHLGNBQWM7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsUUFBUSxHQUFHLFVBQVU7O0FBRXZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLEtBQUssR0FBRztBQUNWLElBQUksT0FBTyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztBQUNsQyxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFNBQVMsR0FBRztBQUNkLElBQUksSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUs7QUFDdEUsa0JBQWtCLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUs7QUFDNUQsSUFBSSxRQUFRLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxPQUFPLEdBQUcsT0FBTztBQUNoRCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFdBQVcsQ0FBQyxRQUFRLEVBQUU7QUFDeEIsSUFBSSxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQzs7QUFFakMsSUFBSSxJQUFJLENBQUMsVUFBVSxJQUFJLFFBQVEsR0FBRyxDQUFDLENBQUM7QUFDcEMsSUFBSSxJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDOztBQUVuQztBQUNBLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUU7QUFDNUIsTUFBTSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQztBQUNoQyxNQUFNLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQztBQUNuQixJQUFJLENBQUMsTUFBTTtBQUNYLE1BQU0sSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDO0FBQ3BCLElBQUk7O0FBRUosSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxJQUFJLEtBQUs7O0FBRWhELElBQUksSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztBQUNuQyxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUk7O0FBRTdCLElBQUksSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztBQUNuQyxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsT0FBTyxHQUFHLEVBQUU7O0FBRTdCLElBQUksSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJO0FBQ3ZCLElBQUksT0FBTyxJQUFJO0FBQ2YsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxRQUFRLENBQUMsS0FBSyxFQUFFO0FBQ2xCLElBQUksS0FBSyxJQUFJLElBQUksSUFBSSxrQkFBa0IsRUFBRTtBQUN6QyxNQUFNLElBQUksS0FBSyxJQUFJLElBQUksSUFBSSxLQUFLLEVBQUU7QUFDbEMsUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQztBQUNoQyxNQUFNLENBQUMsTUFBTTtBQUNiLFFBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7QUFDdEIsTUFBTTtBQUNOLElBQUk7QUFDSixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUUsS0FBSyxHQUFHO0FBQ1YsSUFBSSxJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUs7QUFDM0IsSUFBSSxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUM7QUFDbEIsSUFBSSxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUM7QUFDakIsSUFBSSxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUM7QUFDbEIsSUFBSSxJQUFJLENBQUMsT0FBTyxHQUFHLENBQUM7QUFDcEIsSUFBSSxJQUFJLENBQUMsT0FBTyxHQUFHLENBQUM7QUFDcEIsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLE9BQU8sQ0FBQyxNQUFNLEVBQUU7QUFDbEIsSUFBSSxJQUFJLFdBQVcsR0FBRyxJQUFJLENBQUMsU0FBUyxFQUFFO0FBQ3RDLElBQUksSUFBSSxZQUFZLEdBQUcsTUFBTSxDQUFDLFNBQVMsRUFBRTtBQUN6QyxJQUFJLE9BQU8sQ0FBQyxXQUFXLEdBQUcsWUFBWSxLQUFLLFdBQVcsR0FBRyxZQUFZLENBQUM7QUFDdEUsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsU0FBUyxHQUFHO0FBQ2QsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztBQUN0QyxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxRQUFRLEdBQUc7QUFDYixJQUFJLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsRUFBRTtBQUMvQixNQUFNLE9BQU8sTUFBTTtBQUNuQixJQUFJLENBQUMsTUFBTTtBQUNYLE1BQU0sSUFBSSxHQUFHLEdBQUcsRUFBRTtBQUNsQixNQUFNLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRSxHQUFHLElBQUksR0FBRztBQUNyQyxNQUFNLEdBQUcsSUFBSSxHQUFHO0FBQ2hCLE1BQU0sSUFBSSxRQUFRLEdBQUcsS0FBSztBQUMxQixNQUFNLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtBQUN0QixRQUFRLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtBQUNyRSxVQUFVLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLElBQUksR0FBRztBQUNuRCxRQUFRLENBQUMsTUFBTTtBQUNmLFVBQVUsR0FBRyxLQUFLLElBQUksQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDO0FBQ25DLFVBQVUsUUFBUSxHQUFHLElBQUk7QUFDekIsUUFBUTtBQUNSLE1BQU0sQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLElBQUksRUFBRTtBQUM1QixRQUFRLEdBQUcsS0FBSyxJQUFJLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQztBQUNoQyxNQUFNOztBQUVOLE1BQU0sSUFBSSxDQUFDLFFBQVEsRUFBRTtBQUNyQixRQUFRLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7QUFDeEQsVUFBVSxHQUFHLElBQUksR0FBRztBQUNwQixVQUFVLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtBQUMxQixZQUFZLEdBQUcsSUFBSSxJQUFJLENBQUMsS0FBSyxHQUFHLEdBQUc7QUFDbkMsVUFBVTs7QUFFVixVQUFVLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtBQUM1QixZQUFZLEdBQUcsSUFBSSxJQUFJLENBQUMsT0FBTyxHQUFHLEdBQUc7QUFDckMsVUFBVTs7QUFFVixVQUFVLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtBQUM1QixZQUFZLEdBQUcsSUFBSSxJQUFJLENBQUMsT0FBTyxHQUFHLEdBQUc7QUFDckMsVUFBVTtBQUNWLFFBQVE7QUFDUixNQUFNOztBQUVOLE1BQU0sT0FBTyxHQUFHO0FBQ2hCLElBQUk7QUFDSixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxZQUFZLEdBQUc7QUFDakIsSUFBSSxPQUFPLElBQUksQ0FBQyxRQUFRLEVBQUU7QUFDMUIsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGtCQUFrQixDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ3BELEVBQUUsSUFBSSxJQUFJO0FBQ1YsRUFBRSxRQUFRLE1BQU07QUFDaEIsSUFBSSxLQUFLLEdBQUc7QUFDWixNQUFNLElBQUksTUFBTSxJQUFJLE1BQU0sS0FBSyxHQUFHLEVBQUU7QUFDcEMsUUFBUSxNQUFNLENBQUMsVUFBVSxHQUFHLElBQUk7QUFDaEMsTUFBTSxDQUFDLE1BQU07QUFDYixRQUFRLE1BQU0sQ0FBQyxVQUFVLEdBQUcsS0FBSztBQUNqQyxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ04sSUFBSSxLQUFLLEdBQUc7QUFDWixNQUFNLElBQUksR0FBRyxNQUFNO0FBQ25CLE1BQU07QUFDTixJQUFJLEtBQUssR0FBRztBQUNaLE1BQU0sSUFBSSxHQUFHLE9BQU87QUFDcEIsTUFBTTtBQUNOLElBQUksS0FBSyxHQUFHO0FBQ1osTUFBTSxJQUFJLEdBQUcsT0FBTztBQUNwQixNQUFNO0FBQ04sSUFBSSxLQUFLLEdBQUc7QUFDWixNQUFNLElBQUksR0FBRyxTQUFTO0FBQ3RCLE1BQU07QUFDTixJQUFJLEtBQUssR0FBRztBQUNaLE1BQU0sSUFBSSxHQUFHLFNBQVM7QUFDdEIsTUFBTTtBQUNOLElBQUk7QUFDSjtBQUNBLE1BQU0sT0FBTyxDQUFDO0FBQ2Q7O0FBRUEsRUFBRSxJQUFJLElBQUksRUFBRTtBQUNaLElBQUksSUFBSSxDQUFDLE1BQU0sSUFBSSxNQUFNLEtBQUssQ0FBQyxFQUFFO0FBQ2pDLE1BQU0sTUFBTSxJQUFJLEtBQUs7QUFDckIsUUFBUSxpREFBaUQsR0FBRyxNQUFNLEdBQUc7QUFDckUsT0FBTztBQUNQLElBQUk7QUFDSixJQUFJLElBQUksR0FBRyxHQUFHLFFBQVEsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDO0FBQ2xDLElBQUksSUFBSSxhQUFhLENBQUMsR0FBRyxDQUFDLEVBQUU7QUFDNUIsTUFBTSxNQUFNLElBQUksS0FBSztBQUNyQixRQUFRLDBDQUEwQyxHQUFHLE1BQU0sR0FBRyxZQUFZLEdBQUcsTUFBTSxHQUFHO0FBQ3RGLE9BQU87QUFDUCxJQUFJO0FBQ0osSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRztBQUN0QixFQUFFOztBQUVGLEVBQUUsT0FBTyxDQUFDO0FBQ1Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sTUFBTSxDQUFDO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLE9BQU8sVUFBVSxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUU7QUFDL0IsSUFBSSxJQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQzs7QUFFOUIsSUFBSSxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO0FBQzVCLE1BQU0sTUFBTSxJQUFJLEtBQUs7QUFDckIsUUFBUSx5QkFBeUIsR0FBRyxHQUFHLEdBQUc7QUFDMUMsT0FBTztBQUNQLElBQUk7O0FBRUosSUFBSSxJQUFJLE9BQU8sR0FBRztBQUNsQixNQUFNLEtBQUssRUFBRSxJQUFJLENBQUMsa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUk7QUFDbkQsS0FBSzs7QUFFTCxJQUFJLElBQUksR0FBRyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7O0FBRXRCLElBQUksSUFBSSxRQUFRLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxFQUFFO0FBQ3JDLE1BQU0sT0FBTyxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQztBQUNqRCxJQUFJLENBQUMsTUFBTTtBQUNYLE1BQU0sT0FBTyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQztBQUN0RCxJQUFJOztBQUVKLElBQUksT0FBTyxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUM7QUFDOUIsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsT0FBTyxRQUFRLENBQUMsS0FBSyxFQUFFO0FBQ3pCLElBQUksT0FBTyxJQUFJLE1BQU0sQ0FBQyxLQUFLLENBQUM7QUFDNUIsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsT0FBTyxRQUFRLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUU7QUFDMUMsSUFBSSxTQUFTLHdCQUF3QixDQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUU7QUFDeEQsTUFBTSxJQUFJLFFBQVEsRUFBRTtBQUNwQixRQUFRLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDO0FBQ2hELE1BQU0sQ0FBQyxNQUFNO0FBQ2IsUUFBUSxPQUFPLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDO0FBQ3hELE1BQU07QUFDTixJQUFJOztBQUVKLElBQUksSUFBSSxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO0FBQzFDLE1BQU0sT0FBTyxNQUFNLENBQUMsUUFBUSxDQUFDO0FBQzdCLFFBQVEsS0FBSyxFQUFFLHdCQUF3QixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUM7QUFDeEQsUUFBUSxRQUFRLEVBQUUsUUFBUSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQzlDLE9BQU8sQ0FBQztBQUNSLElBQUksQ0FBQyxNQUFNO0FBQ1gsTUFBTSxPQUFPLE1BQU0sQ0FBQyxRQUFRLENBQUM7QUFDN0IsUUFBUSxLQUFLLEVBQUUsd0JBQXdCLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQztBQUN4RCxRQUFRLEdBQUcsRUFBRSx3QkFBd0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSztBQUNyRCxPQUFPLENBQUM7QUFDUixJQUFJO0FBQ0osRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFdBQVcsQ0FBQyxLQUFLLEVBQUU7QUFDckIsSUFBSSxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUk7O0FBRS9CLElBQUksSUFBSSxLQUFLLElBQUksT0FBTyxJQUFJLEtBQUssRUFBRTtBQUNuQyxNQUFNLElBQUksS0FBSyxDQUFDLEtBQUssSUFBSSxFQUFFLEtBQUssQ0FBQyxLQUFLLFlBQVksSUFBSSxDQUFDLEVBQUU7QUFDekQsUUFBUSxNQUFNLElBQUksU0FBUyxDQUFDLHlDQUF5QyxDQUFDO0FBQ3RFLE1BQU07QUFDTixNQUFNLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUs7QUFDOUIsSUFBSTs7QUFFSixJQUFJLElBQUksS0FBSyxJQUFJLEtBQUssQ0FBQyxHQUFHLElBQUksS0FBSyxDQUFDLFFBQVEsRUFBRTtBQUM5QyxNQUFNLE1BQU0sSUFBSSxLQUFLLENBQUMscUNBQXFDLENBQUM7QUFDNUQsSUFBSTs7QUFFSixJQUFJLElBQUksS0FBSyxJQUFJLEtBQUssSUFBSSxLQUFLLEVBQUU7QUFDakMsTUFBTSxJQUFJLEtBQUssQ0FBQyxHQUFHLElBQUksRUFBRSxLQUFLLENBQUMsR0FBRyxZQUFZLElBQUksQ0FBQyxFQUFFO0FBQ3JELFFBQVEsTUFBTSxJQUFJLFNBQVMsQ0FBQyx1Q0FBdUMsQ0FBQztBQUNwRSxNQUFNO0FBQ04sTUFBTSxJQUFJLENBQUMsR0FBRyxHQUFHLEtBQUssQ0FBQyxHQUFHO0FBQzFCLElBQUk7O0FBRUosSUFBSSxJQUFJLEtBQUssSUFBSSxVQUFVLElBQUksS0FBSyxFQUFFO0FBQ3RDLE1BQU0sSUFBSSxLQUFLLENBQUMsUUFBUSxJQUFJLEVBQUUsS0FBSyxDQUFDLFFBQVEsWUFBWSxRQUFRLENBQUMsRUFBRTtBQUNuRSxRQUFRLE1BQU0sSUFBSSxTQUFTLENBQUMsZ0RBQWdELENBQUM7QUFDN0UsTUFBTTtBQUNOLE1BQU0sSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUMsUUFBUTtBQUNwQyxJQUFJO0FBQ0osRUFBRTs7O0FBR0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLEtBQUssR0FBRyxJQUFJOztBQUVkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxHQUFHLEdBQUcsSUFBSTs7QUFFWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsUUFBUSxHQUFHLElBQUk7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsU0FBUyxHQUFHLFlBQVk7O0FBRTFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsUUFBUSxHQUFHLFFBQVE7O0FBRXJCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLEtBQUssR0FBRztBQUNWLElBQUksT0FBTyxNQUFNLENBQUMsUUFBUSxDQUFDO0FBQzNCLE1BQU0sS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsR0FBRyxJQUFJO0FBQ25ELE1BQU0sR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsR0FBRyxJQUFJO0FBQzdDLE1BQU0sUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsR0FBRztBQUN4RCxLQUFLLENBQUM7QUFDTixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsV0FBVyxHQUFHO0FBQ2hCLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO0FBQ3ZCLE1BQU0sT0FBTyxJQUFJLENBQUMsUUFBUTtBQUMxQixJQUFJLENBQUMsTUFBTTtBQUNYLE1BQU0sT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO0FBQzlDLElBQUk7QUFDSixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsTUFBTSxHQUFHO0FBQ1gsSUFBSSxJQUFJLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFDbEIsTUFBTSxPQUFPLElBQUksQ0FBQyxHQUFHO0FBQ3JCLElBQUksQ0FBQyxNQUFNO0FBQ1gsTUFBTSxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRTtBQUNsQyxNQUFNLEdBQUcsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztBQUNwQyxNQUFNLE9BQU8sR0FBRztBQUNoQixJQUFJO0FBQ0osRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxPQUFPLENBQUMsRUFBRSxFQUFFO0FBQ2QsSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRTtBQUNwQyxNQUFNLE9BQU8sQ0FBQztBQUNkLElBQUksQ0FBQyxNQUFNLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUU7QUFDOUMsTUFBTSxPQUFPLEVBQUU7QUFDZixJQUFJLENBQUMsTUFBTTtBQUNYLE1BQU0sT0FBTyxDQUFDO0FBQ2QsSUFBSTtBQUNKLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFFBQVEsR0FBRztBQUNiLElBQUksT0FBTyxJQUFJLENBQUMsS0FBSyxHQUFHLEdBQUcsSUFBSSxJQUFJLENBQUMsR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUM7QUFDekQsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsTUFBTSxHQUFHO0FBQ1gsSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsQ0FBQztBQUMxRSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxZQUFZLEdBQUc7QUFDakIsSUFBSSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLEdBQUcsR0FBRztBQUMxQyxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFLFlBQVksRUFBRTtBQUNyRCxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxJQUFJLENBQUM7QUFDWCxFQUFFLE9BQU8sU0FBUyxHQUFHLEVBQUU7QUFDdkIsRUFBRSxPQUFPLFFBQVEsR0FBRyxFQUFFOztBQUV0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsT0FBTyxXQUFXLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRTtBQUNsQyxJQUFJLElBQUksWUFBWSxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDO0FBQzFFLElBQUksSUFBSSxJQUFJLEdBQUcsRUFBRTs7QUFFakIsSUFBSSxJQUFJLEtBQUssR0FBRyxDQUFDLElBQUksS0FBSyxHQUFHLEVBQUUsRUFBRSxPQUFPLElBQUk7O0FBRTVDLElBQUksSUFBSSxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUM7O0FBRTlCLElBQUksSUFBSSxLQUFLLElBQUksQ0FBQyxFQUFFO0FBQ3BCLE1BQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDO0FBQ25DLElBQUk7O0FBRUosSUFBSSxPQUFPLElBQUk7QUFDZixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsT0FBTyxVQUFVLENBQUMsSUFBSSxFQUFFO0FBQzFCLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxFQUFFO0FBQ3RCLE1BQU0sUUFBUSxDQUFDLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQztBQUM3QixJQUFJLENBQUMsTUFBTTtBQUNYLE1BQU0sUUFBUSxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUMsTUFBTSxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQztBQUN6RSxJQUFJO0FBQ0osRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxPQUFPLGFBQWEsQ0FBQyxVQUFVLEVBQUUsS0FBSyxFQUFFO0FBQzFDLElBQUksSUFBSSxJQUFJLEdBQUcsS0FBSztBQUNwQixJQUFJLElBQUksR0FBRyxHQUFHLFVBQVU7QUFDeEIsSUFBSSxJQUFJLEVBQUUsR0FBRyxJQUFJLElBQUksRUFBRTtBQUN2QixJQUFJLEVBQUUsQ0FBQyxjQUFjLEdBQUcsS0FBSztBQUM3QixJQUFJLElBQUksT0FBTyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQzs7QUFFakQsSUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQUU7QUFDakIsTUFBTSxJQUFJLEVBQUU7QUFDWixNQUFNLE9BQU8sSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDL0MsTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLHFCQUFxQixDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQztBQUNwRCxNQUFNLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDO0FBQzFDLElBQUksQ0FBQyxNQUFNLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUM5RCxNQUFNLE9BQU8sSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDL0MsTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLHFCQUFxQixDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQztBQUNwRCxNQUFNLElBQUksRUFBRTtBQUNaLE1BQU0sT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUM7QUFDMUMsSUFBSTs7QUFFSixJQUFJLEVBQUUsQ0FBQyxJQUFJLEdBQUcsSUFBSTtBQUNsQixJQUFJLEVBQUUsQ0FBQyxNQUFNLEdBQUcsSUFBSTs7QUFFcEIsSUFBSSxLQUFLLElBQUksS0FBSyxHQUFHLEVBQUUsRUFBRSxLQUFLLElBQUksQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFO0FBQzlDLE1BQU0sSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFO0FBQzVELFFBQVEsRUFBRSxDQUFDLEtBQUssR0FBRyxLQUFLLEdBQUcsQ0FBQztBQUM1QixRQUFRLEVBQUUsQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLENBQUM7QUFDakUsUUFBUTtBQUNSLE1BQU07QUFDTixJQUFJOztBQUVKLElBQUksRUFBRSxDQUFDLGNBQWMsR0FBRyxJQUFJO0FBQzVCLElBQUksT0FBTyxFQUFFO0FBQ2IsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsT0FBTyxZQUFZLENBQUMsR0FBRyxFQUFFO0FBQzNCLElBQUksT0FBTyxJQUFJLElBQUksQ0FBQztBQUNwQixNQUFNLElBQUksRUFBRSxRQUFRLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO0FBQ3pDLE1BQU0sS0FBSyxFQUFFLFFBQVEsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDMUMsTUFBTSxHQUFHLEVBQUUsUUFBUSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQUN6QyxNQUFNLE1BQU0sRUFBRTtBQUNkLEtBQUssQ0FBQztBQUNOLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxPQUFPLGNBQWMsQ0FBQyxNQUFNLEVBQUU7QUFDaEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJLE9BQU8sSUFBSSxJQUFJLENBQUM7QUFDcEIsTUFBTSxJQUFJLEVBQUUsY0FBYyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzlDLE1BQU0sS0FBSyxFQUFFLGNBQWMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUMvQyxNQUFNLEdBQUcsRUFBRSxjQUFjLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDOUMsTUFBTSxNQUFNLEVBQUU7QUFDZCxLQUFLLENBQUM7QUFDTixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsT0FBTyxrQkFBa0IsQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFO0FBQzFDLElBQUksSUFBSSxNQUFNLENBQUMsTUFBTSxHQUFHLEVBQUUsRUFBRTtBQUM1QixNQUFNLE1BQU0sSUFBSSxLQUFLO0FBQ3JCLFFBQVEsNEJBQTRCLEdBQUcsTUFBTSxHQUFHO0FBQ2hELE9BQU87QUFDUCxJQUFJOztBQUVKLElBQUksSUFBSSxJQUFJO0FBQ1osSUFBSSxJQUFJLE1BQU07O0FBRWQsSUFBSSxJQUFJLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEtBQUssR0FBRyxFQUFFO0FBQ2xDLE1BQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxXQUFXO0FBQ2pDLElBQUksQ0FBQyxNQUFNLElBQUksSUFBSSxFQUFFO0FBQ3JCLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDOztBQUV4QyxNQUFNLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtBQUN2QixRQUFRLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEtBQUssVUFBVSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxLQUFLLFVBQVUsRUFBRTtBQUNoRjtBQUNBO0FBQ0EsVUFBVSxJQUFJLEdBQUcsUUFBUSxDQUFDLGFBQWE7QUFDdkMsUUFBUSxDQUFDLE1BQU0sSUFBSSxNQUFNLEVBQUU7QUFDM0I7QUFDQTtBQUNBLFVBQVUsSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQztBQUNwRCxRQUFRO0FBQ1IsTUFBTTtBQUNOLElBQUk7O0FBRUosSUFBSSxNQUFNLFFBQVEsR0FBRztBQUNyQixNQUFNLElBQUksRUFBRSxjQUFjLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDOUMsTUFBTSxLQUFLLEVBQUUsY0FBYyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQy9DLE1BQU0sR0FBRyxFQUFFLGNBQWMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUM5QyxNQUFNLElBQUksRUFBRSxjQUFjLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDaEQsTUFBTSxNQUFNLEVBQUUsY0FBYyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ2xELE1BQU0sTUFBTSxFQUFFLGNBQWMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUNsRCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxJQUFJLE1BQU0sSUFBSSxDQUFDLElBQUksRUFBRTtBQUN6QixNQUFNLFFBQVEsQ0FBQyxRQUFRLEdBQUcsTUFBTTtBQUNoQyxJQUFJOztBQUVKO0FBQ0EsSUFBSSxPQUFPLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7QUFDbkMsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsT0FBTyxVQUFVLENBQUMsTUFBTSxFQUFFLFNBQVMsRUFBRTtBQUN2QyxJQUFJLElBQUksTUFBTSxDQUFDLE1BQU0sR0FBRyxFQUFFLEVBQUU7QUFDNUIsTUFBTSxPQUFPLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDO0FBQ3ZELElBQUksQ0FBQyxNQUFNO0FBQ1gsTUFBTSxPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDO0FBQ3hDLElBQUk7QUFDSixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsT0FBTyxVQUFVLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRTtBQUNuQyxJQUFJLElBQUksRUFBRSxHQUFHLElBQUksSUFBSSxFQUFFO0FBQ3ZCLElBQUksT0FBTyxFQUFFLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUM7QUFDdkMsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLE9BQU8sUUFBUSxHQUFHLFNBQVMsUUFBUSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDcEQsSUFBSSxJQUFJLENBQUMsR0FBRyxJQUFJLElBQUksRUFBRTtBQUN0QixJQUFJLE9BQU8sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDO0FBQ25DLEVBQUUsQ0FBQzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsT0FBTyxHQUFHLEdBQUc7QUFDZixJQUFJLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLElBQUksRUFBRSxFQUFFLEtBQUssQ0FBQztBQUM3QyxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLE9BQU8sYUFBYSxDQUFDLEtBQUssRUFBRSxVQUFVLEVBQUU7QUFDMUMsSUFBSSxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO0FBQzFCLE1BQU0sSUFBSSxFQUFFLEtBQUs7QUFDakIsTUFBTSxLQUFLLEVBQUUsQ0FBQztBQUNkLE1BQU0sR0FBRyxFQUFFLENBQUM7QUFDWixNQUFNLE1BQU0sRUFBRTtBQUNkLEtBQUssQ0FBQzs7QUFFTixJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxTQUFTLEVBQUU7QUFDM0IsSUFBSSxJQUFJLElBQUksR0FBRyxVQUFVLElBQUksSUFBSSxDQUFDLGtCQUFrQjtBQUNwRCxJQUFJLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUU7QUFDN0IsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7QUFDaEIsSUFBSTtBQUNKLElBQUksSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRTtBQUM5QixNQUFNLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztBQUNoQixJQUFJOztBQUVKLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLEdBQUcsSUFBSTs7QUFFdkIsSUFBSSxPQUFPLENBQUM7QUFDWixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxPQUFPLGtCQUFrQixDQUFDLEVBQUUsRUFBRTtBQUNoQyxJQUFJLElBQUksSUFBSSxHQUFHLFNBQVM7QUFDeEIsSUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQUUsSUFBSSxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQztBQUMzRSxJQUFJLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDO0FBQ3BDLElBQUksSUFBSSxNQUFNLEVBQUU7QUFDaEIsTUFBTSxPQUFPLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztBQUM1QyxJQUFJLENBQUMsTUFBTTtBQUNYLE1BQU0sT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQ3RCLElBQUk7QUFDSixFQUFFOztBQUVGLEVBQUUsT0FBTyxVQUFVLEdBQUcsSUFBSTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFdBQVcsU0FBUyxHQUFHO0FBQ3pCLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUU7QUFDMUIsTUFBTSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7QUFDdEMsUUFBUSxJQUFJLEVBQUUsSUFBSTtBQUNsQixRQUFRLEtBQUssRUFBRSxDQUFDO0FBQ2hCLFFBQVEsR0FBRyxFQUFFLENBQUM7QUFDZCxRQUFRLElBQUksRUFBRSxDQUFDO0FBQ2YsUUFBUSxNQUFNLEVBQUUsQ0FBQztBQUNqQixRQUFRLE1BQU0sRUFBRSxDQUFDO0FBQ2pCLFFBQVEsTUFBTSxFQUFFLEtBQUs7QUFDckIsUUFBUSxRQUFRLEVBQUU7QUFDbEIsT0FBTyxDQUFDO0FBQ1IsSUFBSTtBQUNKLElBQUksT0FBTyxJQUFJLENBQUMsVUFBVTtBQUMxQixFQUFFOztBQUVGLEVBQUUsT0FBTyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUU7QUFDL0IsSUFBSSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsT0FBTyxDQUFDO0FBQ25DLElBQUksSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLE9BQU8sRUFBRTtBQUNwQyxJQUFJLE9BQU8sQ0FBQztBQUNaLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxPQUFPLHFCQUFxQixHQUFHO0FBQ2pDLElBQUksQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUM7QUFDaEUsSUFBSSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUc7QUFDL0QsR0FBRzs7QUFFSCxFQUFFLE9BQU8sTUFBTSxHQUFHLENBQUM7QUFDbkIsRUFBRSxPQUFPLE1BQU0sR0FBRyxDQUFDO0FBQ25CLEVBQUUsT0FBTyxPQUFPLEdBQUcsQ0FBQztBQUNwQixFQUFFLE9BQU8sU0FBUyxHQUFHLENBQUM7QUFDdEIsRUFBRSxPQUFPLFFBQVEsR0FBRyxDQUFDO0FBQ3JCLEVBQUUsT0FBTyxNQUFNLEdBQUcsQ0FBQztBQUNuQixFQUFFLE9BQU8sUUFBUSxHQUFHLENBQUM7O0FBRXJCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLE9BQU8sa0JBQWtCLEdBQUcsQ0FBQyxDQUFDOztBQUVoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFdBQVcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFO0FBQzFCLElBQUksSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJOztBQUUvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQzs7QUFFcEM7QUFDQSxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUM7QUFDdkIsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxDQUFDO0FBQ3hCLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUN0QixJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUM7QUFDdkIsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDO0FBQ3pCLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQztBQUN6QixJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLEtBQUs7O0FBRTdCLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDO0FBQzdCLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxTQUFTLEdBQUcsVUFBVTtBQUN4QixFQUFFLGVBQWUsR0FBRyxJQUFJOztBQUV4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLElBQUksUUFBUSxHQUFHO0FBQ2pCLElBQUksT0FBTyxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sR0FBRyxXQUFXO0FBQzdDLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLElBQUksR0FBRyxJQUFJOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLHFCQUFxQixHQUFHLEtBQUs7O0FBRS9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxJQUFJLElBQUksR0FBRztBQUNiLElBQUksT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQztBQUNwQyxFQUFFOztBQUVGLEVBQUUsSUFBSSxJQUFJLENBQUMsR0FBRyxFQUFFO0FBQ2hCLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDO0FBQ2xDLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLElBQUksS0FBSyxHQUFHO0FBQ2QsSUFBSSxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDO0FBQ3JDLEVBQUU7O0FBRUYsRUFBRSxJQUFJLEtBQUssQ0FBQyxHQUFHLEVBQUU7QUFDakIsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUM7QUFDbkMsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsSUFBSSxHQUFHLEdBQUc7QUFDWixJQUFJLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUM7QUFDbkMsRUFBRTs7QUFFRixFQUFFLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRTtBQUNmLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDO0FBQ2pDLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLElBQUksSUFBSSxHQUFHO0FBQ2IsSUFBSSxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDO0FBQ3BDLEVBQUU7O0FBRUYsRUFBRSxJQUFJLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFDaEIsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUM7QUFDbEMsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsSUFBSSxNQUFNLEdBQUc7QUFDZixJQUFJLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUM7QUFDdEMsRUFBRTs7QUFFRixFQUFFLElBQUksTUFBTSxDQUFDLEdBQUcsRUFBRTtBQUNsQixJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQztBQUNwQyxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxJQUFJLE1BQU0sR0FBRztBQUNmLElBQUksT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQztBQUN0QyxFQUFFOztBQUVGLEVBQUUsSUFBSSxNQUFNLENBQUMsR0FBRyxFQUFFO0FBQ2xCLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDO0FBQ3BDLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLElBQUksTUFBTSxHQUFHO0FBQ2YsSUFBSSxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDO0FBQ3RDLEVBQUU7O0FBRUYsRUFBRSxJQUFJLE1BQU0sQ0FBQyxHQUFHLEVBQUU7QUFDbEIsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUM7QUFDcEMsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFlBQVksQ0FBQyxJQUFJLEVBQUU7QUFDckIsSUFBSSxJQUFJLElBQUksQ0FBQyxxQkFBcUIsRUFBRTtBQUNwQyxNQUFNLElBQUksQ0FBQyxVQUFVLEVBQUU7QUFDdkIsTUFBTSxJQUFJLENBQUMscUJBQXFCLEdBQUcsS0FBSztBQUN4QyxJQUFJOztBQUVKLElBQUksT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQztBQUMzQixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsWUFBWSxDQUFDLElBQUksRUFBRSxHQUFHLEVBQUU7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsSUFBSSxJQUFJLElBQUksS0FBSyxRQUFRLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUU7QUFDeEQsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUM3QixJQUFJO0FBQ0osSUFBSSxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUk7QUFDL0IsSUFBSSxJQUFJLENBQUMscUJBQXFCLEdBQUcsSUFBSTtBQUNyQyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRztBQUMxQixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLEtBQUssR0FBRztBQUNWLElBQUksT0FBTyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDMUMsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFLEtBQUssR0FBRztBQUNWLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDO0FBQ2pDLElBQUksSUFBSSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsV0FBVztBQUNwQyxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLE9BQU8sQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUU7QUFDNUQsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDO0FBQ2xCLE1BQU0sSUFBSSxFQUFFLElBQUk7QUFDaEIsTUFBTSxLQUFLLEVBQUUsS0FBSztBQUNsQixNQUFNLEdBQUcsRUFBRSxHQUFHO0FBQ2QsTUFBTSxJQUFJLEVBQUUsSUFBSTtBQUNoQixNQUFNLE1BQU0sRUFBRSxNQUFNO0FBQ3BCLE1BQU0sTUFBTSxFQUFFLE1BQU07QUFDcEIsTUFBTSxJQUFJLEVBQUU7QUFDWixLQUFLLENBQUM7QUFDTixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsVUFBVSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUU7QUFDNUIsSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFO0FBQ2hCLE1BQU0sSUFBSSxDQUFDLEtBQUssRUFBRTtBQUNsQixJQUFJLENBQUMsTUFBTTtBQUNYLE1BQU0sSUFBSSxNQUFNLEVBQUU7QUFDbEIsUUFBUSxJQUFJLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQyxXQUFXO0FBQ3hDLFFBQVEsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsY0FBYyxFQUFFO0FBQzFDLFFBQVEsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsV0FBVyxFQUFFLEdBQUcsQ0FBQztBQUM1QyxRQUFRLElBQUksQ0FBQyxHQUFHLEdBQUcsS0FBSyxDQUFDLFVBQVUsRUFBRTtBQUNyQyxRQUFRLElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLFdBQVcsRUFBRTtBQUN2QyxRQUFRLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDLGFBQWEsRUFBRTtBQUMzQyxRQUFRLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDLGFBQWEsRUFBRTtBQUMzQyxNQUFNLENBQUMsTUFBTTtBQUNiLFFBQVEsSUFBSSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsYUFBYTtBQUMxQyxRQUFRLElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLFdBQVcsRUFBRTtBQUN2QyxRQUFRLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUM7QUFDekMsUUFBUSxJQUFJLENBQUMsR0FBRyxHQUFHLEtBQUssQ0FBQyxPQUFPLEVBQUU7QUFDbEMsUUFBUSxJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQUU7QUFDcEMsUUFBUSxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxVQUFVLEVBQUU7QUFDeEMsUUFBUSxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxVQUFVLEVBQUU7QUFDeEMsTUFBTTtBQUNOLElBQUk7QUFDSixJQUFJLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSTtBQUMvQixJQUFJLE9BQU8sSUFBSTtBQUNmLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxRQUFRLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRTtBQUN6QixJQUFJLElBQUksS0FBSyxFQUFFO0FBQ2YsTUFBTSxLQUFLLElBQUksQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtBQUN0RDtBQUNBLFVBQVUsSUFBSSxHQUFHLEtBQUssVUFBVSxFQUFFO0FBQ2xDLFFBQVEsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUs7QUFDekIsTUFBTTtBQUNOLElBQUk7O0FBRUosSUFBSSxJQUFJLEtBQUssRUFBRTtBQUNmLE1BQU0sSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLO0FBQ3ZCLElBQUk7O0FBRUosSUFBSSxJQUFJLEtBQUssSUFBSSxFQUFFLFFBQVEsSUFBSSxLQUFLLENBQUMsRUFBRTtBQUN2QyxNQUFNLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxNQUFNLElBQUksS0FBSyxDQUFDO0FBQ3RDLElBQUksQ0FBQyxNQUFNLElBQUksS0FBSyxLQUFLLFFBQVEsSUFBSSxLQUFLLENBQUMsRUFBRTtBQUM3QyxNQUFNLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQU07QUFDaEMsSUFBSTs7QUFFSixJQUFJLElBQUksS0FBSyxJQUFJLFVBQVUsSUFBSSxLQUFLLEVBQUU7QUFDdEMsTUFBTSxJQUFJLElBQUksR0FBRyxlQUFlLENBQUMsR0FBRztBQUNwQyxRQUFRLEtBQUssQ0FBQztBQUNkLE9BQU87O0FBRVAsTUFBTSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxRQUFRLENBQUMsYUFBYTtBQUNoRCxJQUFJOztBQUVKLElBQUksSUFBSSxLQUFLLElBQUksTUFBTSxJQUFJLEtBQUssRUFBRTtBQUNsQyxNQUFNLElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUk7QUFDNUIsSUFBSTs7QUFFSixJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFO0FBQ3BCLE1BQU0sSUFBSSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsYUFBYTtBQUN4QyxJQUFJOztBQUVKLElBQUksSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJO0FBQy9CLElBQUksT0FBTyxJQUFJO0FBQ2YsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFNBQVMsQ0FBQyxVQUFVLEVBQUU7QUFDeEIsSUFBSSxJQUFJLFFBQVEsR0FBRyxVQUFVLElBQUksSUFBSSxDQUFDLE1BQU07QUFDNUMsSUFBSSxJQUFJLFdBQVcsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksRUFBRSxLQUFLLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxRQUFRO0FBQ3hGLElBQUksSUFBSSxXQUFXLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRTtBQUN2QyxNQUFNLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUM7QUFDeEMsSUFBSTs7QUFFSjtBQUNBLElBQUksSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUc7QUFDcEIsSUFBSSxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDbEQsSUFBSSxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7O0FBRWhELElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDL0QsSUFBSTtBQUNKLE1BQU0sQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQzlDLElBQUk7O0FBRUo7QUFDQSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxRQUFRLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDcEMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUM7QUFDbkMsSUFBSSxPQUFPLENBQUM7QUFDWixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxTQUFTLEdBQUc7QUFDZCxJQUFJLElBQUksT0FBTyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDdEQsSUFBSSxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMscUJBQXFCO0FBQzFDLElBQUksT0FBTyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRztBQUNwRCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsV0FBVyxDQUFDLFVBQVUsRUFBRTtBQUMxQixJQUFJLElBQUksUUFBUSxHQUFHLFVBQVUsSUFBSSxJQUFJLENBQUMsTUFBTTtBQUM1QyxJQUFJLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUU7QUFDN0IsSUFBSSxNQUFNLENBQUMsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxHQUFHLENBQUMsR0FBRyxRQUFRLElBQUksQ0FBQyxDQUFDO0FBQ3pELElBQUksTUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJO0FBQ3hCLElBQUksTUFBTSxDQUFDLElBQUksR0FBRyxDQUFDO0FBQ25CLElBQUksTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDO0FBQ3JCLElBQUksTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDO0FBQ3JCLElBQUksT0FBTyxNQUFNO0FBQ2pCLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxTQUFTLENBQUMsVUFBVSxFQUFFO0FBQ3hCLElBQUksSUFBSSxRQUFRLEdBQUcsVUFBVSxJQUFJLElBQUksQ0FBQyxNQUFNO0FBQzVDLElBQUksSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRTtBQUM3QixJQUFJLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRSxHQUFHLFFBQVEsR0FBRyxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUM7QUFDckUsSUFBSSxNQUFNLENBQUMsTUFBTSxHQUFHLElBQUk7QUFDeEIsSUFBSSxNQUFNLENBQUMsSUFBSSxHQUFHLENBQUM7QUFDbkIsSUFBSSxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUM7QUFDckIsSUFBSSxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUM7QUFDckIsSUFBSSxPQUFPLE1BQU07QUFDakIsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsWUFBWSxHQUFHO0FBQ2pCLElBQUksSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRTtBQUM3QixJQUFJLE1BQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUNsQixJQUFJLE1BQU0sQ0FBQyxNQUFNLEdBQUcsSUFBSTtBQUN4QixJQUFJLE1BQU0sQ0FBQyxJQUFJLEdBQUcsQ0FBQztBQUNuQixJQUFJLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQztBQUNyQixJQUFJLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQztBQUNyQixJQUFJLE9BQU8sTUFBTTtBQUNqQixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxVQUFVLEdBQUc7QUFDZixJQUFJLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUU7QUFDN0IsSUFBSSxNQUFNLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDO0FBQzVELElBQUksTUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJO0FBQ3hCLElBQUksTUFBTSxDQUFDLElBQUksR0FBRyxDQUFDO0FBQ25CLElBQUksTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDO0FBQ3JCLElBQUksTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDO0FBQ3JCLElBQUksT0FBTyxNQUFNO0FBQ2pCLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFdBQVcsR0FBRztBQUNoQixJQUFJLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUU7QUFDN0IsSUFBSSxNQUFNLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDbEIsSUFBSSxNQUFNLENBQUMsS0FBSyxHQUFHLENBQUM7QUFDcEIsSUFBSSxNQUFNLENBQUMsTUFBTSxHQUFHLElBQUk7QUFDeEIsSUFBSSxNQUFNLENBQUMsSUFBSSxHQUFHLENBQUM7QUFDbkIsSUFBSSxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUM7QUFDckIsSUFBSSxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUM7QUFDckIsSUFBSSxPQUFPLE1BQU07QUFDakIsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsU0FBUyxHQUFHO0FBQ2QsSUFBSSxJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxFQUFFO0FBQzdCLElBQUksTUFBTSxDQUFDLEdBQUcsR0FBRyxFQUFFO0FBQ25CLElBQUksTUFBTSxDQUFDLEtBQUssR0FBRyxFQUFFO0FBQ3JCLElBQUksTUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJO0FBQ3hCLElBQUksTUFBTSxDQUFDLElBQUksR0FBRyxDQUFDO0FBQ25CLElBQUksTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDO0FBQ3JCLElBQUksTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDO0FBQ3JCLElBQUksT0FBTyxNQUFNO0FBQ2pCLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsWUFBWSxDQUFDLGVBQWUsRUFBRTtBQUNoQyxJQUFJLElBQUksUUFBUSxHQUFHLGVBQWUsSUFBSSxJQUFJLENBQUMsTUFBTTtBQUNqRCxJQUFJLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTLEVBQUUsR0FBRyxRQUFRO0FBQzNDLElBQUksSUFBSSxLQUFLLEdBQUcsQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDO0FBQzdCLElBQUksT0FBTyxJQUFJLENBQUMsU0FBUyxFQUFFLEdBQUcsS0FBSztBQUNuQyxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxrQkFBa0IsR0FBRztBQUN2QixJQUFJLE9BQU8sSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDN0MsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxVQUFVLENBQUMsVUFBVSxFQUFFLElBQUksRUFBRTtBQUMvQixJQUFJLElBQUksV0FBVyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDO0FBQzdELElBQUksSUFBSSxPQUFPO0FBQ2YsSUFBSSxJQUFJLEdBQUcsR0FBRyxJQUFJOztBQUVsQixJQUFJLElBQUksS0FBSyxHQUFHLENBQUM7O0FBRWpCLElBQUksSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRTs7QUFFL0IsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLEVBQUU7QUFDbEIsTUFBTSxRQUFRLENBQUMsR0FBRyxHQUFHLENBQUM7O0FBRXRCO0FBQ0E7QUFDQSxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsRUFBRTtBQUNwQjtBQUNBLFFBQVEsR0FBRyxFQUFFO0FBQ2IsTUFBTTs7QUFFTjtBQUNBLE1BQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxHQUFHOztBQUUxQjtBQUNBLE1BQU0sSUFBSSxRQUFRLEdBQUcsUUFBUSxDQUFDLFNBQVMsRUFBRTs7QUFFekM7QUFDQTtBQUNBLE1BQU0sSUFBSSxNQUFNLEdBQUcsVUFBVSxHQUFHLFFBQVE7OztBQUd4QztBQUNBO0FBQ0E7QUFDQSxNQUFNLElBQUksTUFBTSxHQUFHLENBQUM7QUFDcEI7QUFDQTtBQUNBLFFBQVEsTUFBTSxJQUFJLENBQUM7O0FBRW5CO0FBQ0E7QUFDQSxNQUFNLEtBQUssSUFBSSxNQUFNOztBQUVyQjtBQUNBO0FBQ0E7QUFDQSxNQUFNLEtBQUssSUFBSSxVQUFVOztBQUV6QjtBQUNBLE1BQU0sT0FBTyxHQUFHLFVBQVU7QUFDMUIsSUFBSSxDQUFDLE1BQU07O0FBRVg7QUFDQSxNQUFNLFFBQVEsQ0FBQyxHQUFHLEdBQUcsV0FBVzs7QUFFaEM7QUFDQSxNQUFNLElBQUksTUFBTSxHQUFHLFFBQVEsQ0FBQyxTQUFTLEVBQUU7O0FBRXZDLE1BQU0sR0FBRyxFQUFFOztBQUVYLE1BQU0sT0FBTyxJQUFJLE1BQU0sR0FBRyxVQUFVLENBQUM7O0FBRXJDLE1BQU0sSUFBSSxPQUFPLEdBQUcsQ0FBQyxFQUFFO0FBQ3ZCLFFBQVEsT0FBTyxJQUFJLENBQUM7QUFDcEIsTUFBTTs7QUFFTixNQUFNLE9BQU8sR0FBRyxXQUFXLEdBQUcsT0FBTztBQUNyQyxJQUFJOztBQUVKLElBQUksT0FBTyxJQUFJLEdBQUcsR0FBRyxDQUFDOztBQUV0QixJQUFJLE9BQU8sS0FBSyxHQUFHLE9BQU87QUFDMUIsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFlBQVksQ0FBQyxVQUFVLEVBQUUsSUFBSSxFQUFFO0FBQ2pDLElBQUksSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRTs7QUFFOUIsSUFBSSxJQUFJLElBQUksS0FBSyxDQUFDLElBQUksR0FBRyxLQUFLLFVBQVUsRUFBRTtBQUMxQyxNQUFNLE9BQU8sSUFBSTtBQUNqQixJQUFJOztBQUVKO0FBQ0EsSUFBSSxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUM7O0FBRS9DLElBQUksSUFBSSxHQUFHLEtBQUssSUFBSSxDQUFDLEdBQUcsRUFBRTtBQUMxQixNQUFNLE9BQU8sSUFBSTtBQUNqQixJQUFJOztBQUVKLElBQUksT0FBTyxLQUFLO0FBQ2hCLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsVUFBVSxDQUFDLFVBQVUsRUFBRTtBQUN6QixJQUFJLElBQUksVUFBVSxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxFQUFFLEtBQUssSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLFVBQVU7QUFDekYsSUFBSSxJQUFJLFVBQVUsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO0FBQ3JDLE1BQU0sT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQztBQUN0QyxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSSxJQUFJLEtBQUs7O0FBRWIsSUFBSSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxFQUFFO0FBQ3pCLElBQUksRUFBRSxDQUFDLE1BQU0sR0FBRyxJQUFJO0FBQ3BCLElBQUksSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLElBQUk7O0FBRTNCLElBQUksSUFBSSxFQUFFLENBQUMsS0FBSyxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsRUFBRTtBQUN2QyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sR0FBRyxDQUFDLEVBQUUsVUFBVSxDQUFDO0FBQ3pELE1BQU0sSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRTtBQUNqQyxRQUFRLEtBQUssR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sRUFBRSxVQUFVLENBQUM7QUFDdkQsTUFBTSxDQUFDLE1BQU07QUFDYixRQUFRLE9BQU8sRUFBRTtBQUNqQixNQUFNO0FBQ04sSUFBSSxDQUFDLE1BQU07QUFDWCxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sRUFBRSxVQUFVLENBQUM7QUFDckQsTUFBTSxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFO0FBQ2pDLFFBQVEsS0FBSyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxPQUFPLEVBQUUsVUFBVSxDQUFDO0FBQ3pELE1BQU07QUFDTixJQUFJOztBQUVKLElBQUksSUFBSSxXQUFXLElBQUksRUFBRSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQyxTQUFTLEVBQUUsR0FBRyxLQUFLLENBQUM7QUFDbEUsSUFBSSxJQUFJLE1BQU0sR0FBRyxLQUFLLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUM7QUFDM0MsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxHQUFHLE1BQU07QUFDdEMsSUFBSSxPQUFPLE1BQU07QUFDakIsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFdBQVcsQ0FBQyxTQUFTLEVBQUU7QUFDekIsSUFBSSxJQUFJLElBQUksSUFBSSxTQUFTLENBQUMsVUFBVSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7O0FBRTlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTTtBQUM1QixJQUFJLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNO0FBQzVCLElBQUksSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUk7QUFDeEIsSUFBSSxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRzs7QUFFdEIsSUFBSSxNQUFNLElBQUksSUFBSSxHQUFHLFNBQVMsQ0FBQyxPQUFPO0FBQ3RDLElBQUksTUFBTSxJQUFJLElBQUksR0FBRyxTQUFTLENBQUMsT0FBTztBQUN0QyxJQUFJLElBQUksSUFBSSxJQUFJLEdBQUcsU0FBUyxDQUFDLEtBQUs7QUFDbEMsSUFBSSxHQUFHLElBQUksSUFBSSxHQUFHLFNBQVMsQ0FBQyxJQUFJO0FBQ2hDLElBQUksR0FBRyxJQUFJLElBQUksR0FBRyxDQUFDLEdBQUcsU0FBUyxDQUFDLEtBQUs7O0FBRXJDLElBQUksSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNO0FBQ3hCLElBQUksSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNO0FBQ3hCLElBQUksSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJO0FBQ3BCLElBQUksSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHOztBQUVsQixJQUFJLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSTtBQUMvQixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFlBQVksQ0FBQyxLQUFLLEVBQUU7QUFDdEIsSUFBSSxJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRTtBQUN2RCxJQUFJLElBQUksS0FBSyxHQUFHLEtBQUssQ0FBQyxVQUFVLEVBQUUsR0FBRyxLQUFLLENBQUMsU0FBUyxFQUFFO0FBQ3RELElBQUksT0FBTyxRQUFRLENBQUMsV0FBVyxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7QUFDakQsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLGNBQWMsQ0FBQyxLQUFLLEVBQUU7QUFDeEIsSUFBSSxJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFO0FBQ3BDLElBQUksSUFBSSxLQUFLLEdBQUcsS0FBSyxDQUFDLFVBQVUsRUFBRTtBQUNsQyxJQUFJLE9BQU8sUUFBUSxDQUFDLFdBQVcsQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO0FBQ2pELEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxPQUFPLENBQUMsS0FBSyxFQUFFO0FBQ2pCLElBQUksSUFBSSxLQUFLLFlBQVksTUFBTSxFQUFFO0FBQ2pDLE1BQU0sT0FBTyxFQUFFLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7QUFDckMsSUFBSSxDQUFDLE1BQU07QUFDWCxNQUFNLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUU7QUFDL0IsTUFBTSxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsVUFBVSxFQUFFOztBQUVoQyxNQUFNLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxPQUFPLENBQUM7QUFDekIsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsT0FBTyxFQUFFO0FBQzFCLE1BQU0sT0FBTyxDQUFDO0FBQ2QsSUFBSTtBQUNKLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLGlCQUFpQixDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUU7QUFDL0IsSUFBSSxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQztBQUNsQyxJQUFJLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDO0FBQ25DLElBQUksSUFBSSxFQUFFLEdBQUcsQ0FBQzs7QUFFZCxJQUFJLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxPQUFPLEVBQUU7QUFDM0QsSUFBSSxJQUFJLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUUsT0FBTyxFQUFFO0FBQzVELElBQUksSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUFFLE9BQU8sRUFBRTs7QUFFMUQsSUFBSSxPQUFPLEVBQUU7QUFDYixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxhQUFhLENBQUMsSUFBSSxFQUFFO0FBQ3RCLElBQUksSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRTtBQUMzQixJQUFJLElBQUksV0FBVyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUM7O0FBRW5ELElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxXQUFXLEVBQUU7QUFDdEMsTUFBTSxRQUFRLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQztBQUNsRCxJQUFJOztBQUVKLElBQUksSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJO0FBQ3BCLElBQUksT0FBTyxJQUFJO0FBQ2YsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFNBQVMsR0FBRztBQUNkLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLFFBQVEsQ0FBQyxhQUFhO0FBQzNDLFFBQVEsSUFBSSxDQUFDLElBQUksSUFBSSxRQUFRLENBQUMsV0FBVyxFQUFFO0FBQzNDLE1BQU0sT0FBTyxDQUFDO0FBQ2QsSUFBSSxDQUFDLE1BQU07QUFDWCxNQUFNLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDO0FBQ3RDLElBQUk7QUFDSixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFlBQVksR0FBRztBQUNqQixJQUFJLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUU7O0FBRWhDLElBQUksSUFBSSxNQUFNLENBQUMsTUFBTSxHQUFHLEVBQUUsRUFBRTtBQUM1QixNQUFNLE9BQU8sTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUMvRCxJQUFJLENBQUMsTUFBTTtBQUNYLE1BQU0sT0FBTyxNQUFNLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUN2RCxJQUFJO0FBQ0osRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxRQUFRLEdBQUc7QUFDYixJQUFJLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLEdBQUcsR0FBRztBQUNoQyxpQkFBaUIsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHO0FBQ3ZDLGlCQUFpQixJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQzs7QUFFL0IsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRTtBQUN0QixRQUFRLE1BQU0sSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHO0FBQzdDLGtCQUFrQixJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEdBQUc7QUFDekMsa0JBQWtCLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDOztBQUVuQyxNQUFNLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxRQUFRLENBQUMsV0FBVyxFQUFFO0FBQzlDLFFBQVEsTUFBTSxJQUFJLEdBQUc7QUFDckIsTUFBTTtBQUNOLElBQUk7O0FBRUosSUFBSSxPQUFPLE1BQU07QUFDakIsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsUUFBUSxHQUFHO0FBQ2IsSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksUUFBUSxDQUFDLGFBQWEsRUFBRTtBQUM3QyxNQUFNLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtBQUN2QixRQUFRLE9BQU8sSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQzVELE1BQU0sQ0FBQyxNQUFNO0FBQ2IsUUFBUSxPQUFPLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUc7QUFDM0Qsd0JBQXdCLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztBQUMvRCxNQUFNO0FBQ04sSUFBSSxDQUFDLE1BQU07QUFDWCxNQUFNLE9BQU8sSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxHQUFHLElBQUksQ0FBQztBQUMvQyxJQUFJO0FBQ0osRUFBRTs7QUFFRixFQUFFLFVBQVUsR0FBRztBQUNmLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRTtBQUMzQixNQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUM7QUFDekIsTUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDO0FBQzNCLE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQztBQUMzQixJQUFJO0FBQ0osSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQzs7QUFFM0IsSUFBSSxPQUFPLElBQUk7QUFDZixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxNQUFNLENBQUMsVUFBVSxFQUFFLFdBQVcsRUFBRSxhQUFhLEVBQUUsYUFBYSxFQUFFLEtBQUssRUFBRTs7QUFFdkUsSUFBSSxJQUFJLGVBQWUsRUFBRSxhQUFhO0FBQ3RDLFFBQVEsWUFBWSxHQUFHLENBQUMsRUFBRSxhQUFhLEdBQUcsQ0FBQzs7QUFFM0MsSUFBSSxJQUFJLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLEdBQUc7QUFDakMsSUFBSSxJQUFJLFdBQVc7O0FBRW5CLElBQUksSUFBSSxJQUFJLEdBQUcsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLOztBQUVsQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFO0FBQ3RCLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsYUFBYTtBQUMxQyxNQUFNLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxHQUFHLEVBQUU7QUFDL0IsTUFBTSxlQUFlLEdBQUcsS0FBSyxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7QUFDMUMsTUFBTSxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQzNCLFFBQVEsSUFBSSxDQUFDLE1BQU0sSUFBSSxFQUFFO0FBQ3pCLFFBQVEsZUFBZSxFQUFFO0FBQ3pCLE1BQU07O0FBRU4sTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxhQUFhLEdBQUcsZUFBZTtBQUM1RCxNQUFNLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxHQUFHLEVBQUU7QUFDL0IsTUFBTSxhQUFhLEdBQUcsS0FBSyxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7QUFDeEMsTUFBTSxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQzNCLFFBQVEsSUFBSSxDQUFDLE1BQU0sSUFBSSxFQUFFO0FBQ3pCLFFBQVEsYUFBYSxFQUFFO0FBQ3ZCLE1BQU07O0FBRU4sTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksR0FBRyxXQUFXLEdBQUcsYUFBYTs7QUFFcEQsTUFBTSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksR0FBRyxFQUFFO0FBQzNCLE1BQU0sWUFBWSxHQUFHLEtBQUssQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO0FBQ3JDLE1BQU0sSUFBSSxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsRUFBRTtBQUN6QixRQUFRLElBQUksQ0FBQyxJQUFJLElBQUksRUFBRTtBQUN2QixRQUFRLFlBQVksRUFBRTtBQUN0QixNQUFNO0FBQ04sSUFBSTs7O0FBR0o7QUFDQTtBQUNBLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsRUFBRTtBQUN6QixNQUFNLGFBQWEsR0FBRyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbEQsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsRUFBRTtBQUMvQixNQUFNLGFBQWEsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDO0FBQ2hELElBQUk7O0FBRUosSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLGFBQWE7QUFDOUIsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLEVBQUUsR0FBRyxhQUFhOztBQUVwQztBQUNBLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLEdBQUcsVUFBVSxHQUFHLFlBQVk7O0FBRTlDLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFO0FBQ2pCLE1BQU0sU0FBUztBQUNmLFFBQVEsV0FBVyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDO0FBQzdELFFBQVEsSUFBSSxHQUFHLElBQUksV0FBVyxFQUFFO0FBQ2hDLFVBQVU7QUFDVixRQUFROztBQUVSLFFBQVEsSUFBSSxDQUFDLEtBQUssRUFBRTtBQUNwQixRQUFRLElBQUksSUFBSSxDQUFDLEtBQUssR0FBRyxFQUFFLEVBQUU7QUFDN0IsVUFBVSxJQUFJLENBQUMsSUFBSSxFQUFFO0FBQ3JCLFVBQVUsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDO0FBQ3hCLFFBQVE7O0FBRVIsUUFBUSxHQUFHLElBQUksV0FBVztBQUMxQixNQUFNO0FBQ04sSUFBSSxDQUFDLE1BQU07QUFDWCxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsRUFBRTtBQUN2QixRQUFRLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLEVBQUU7QUFDN0IsVUFBVSxJQUFJLENBQUMsSUFBSSxFQUFFO0FBQ3JCLFVBQVUsSUFBSSxDQUFDLEtBQUssR0FBRyxFQUFFO0FBQ3pCLFFBQVEsQ0FBQyxNQUFNO0FBQ2YsVUFBVSxJQUFJLENBQUMsS0FBSyxFQUFFO0FBQ3RCLFFBQVE7O0FBRVIsUUFBUSxHQUFHLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDdEQsTUFBTTtBQUNOLElBQUk7O0FBRUosSUFBSSxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUc7O0FBRWxCLElBQUksSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJO0FBQy9CLElBQUksT0FBTyxJQUFJO0FBQ2YsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFlBQVksQ0FBQyxPQUFPLEVBQUU7QUFDeEIsSUFBSSxJQUFJLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQyxXQUFXO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSSxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztBQUN2QyxJQUFJLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLGNBQWMsRUFBRTtBQUNyQyxJQUFJLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFdBQVcsRUFBRSxHQUFHLENBQUM7QUFDdkMsSUFBSSxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUU7QUFDaEMsSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFO0FBQzNCLE1BQU0sSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDO0FBQ25CLE1BQU0sSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDO0FBQ3JCLE1BQU0sSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDO0FBQ3JCLElBQUksQ0FBQyxNQUFNO0FBQ1gsTUFBTSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUU7QUFDcEMsTUFBTSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxhQUFhLEVBQUU7QUFDeEMsTUFBTSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxhQUFhLEVBQUU7QUFDeEMsSUFBSTs7QUFFSixJQUFJLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSTtBQUMvQixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFVBQVUsR0FBRztBQUNmLElBQUksSUFBSSxJQUFJLENBQUMsZUFBZSxLQUFLLElBQUksRUFBRTtBQUN2QyxNQUFNLE9BQU8sSUFBSSxDQUFDLGVBQWU7QUFDakMsSUFBSTtBQUNKLElBQUksSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRTs7QUFFakM7QUFDQTtBQUNBLElBQUksSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLEdBQUc7QUFDckIsTUFBTSxJQUFJLENBQUMsSUFBSTtBQUNmLE1BQU0sSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDO0FBQ3BCLE1BQU0sSUFBSSxDQUFDLEdBQUc7QUFDZCxNQUFNLElBQUksQ0FBQyxJQUFJO0FBQ2YsTUFBTSxJQUFJLENBQUMsTUFBTTtBQUNqQixNQUFNLElBQUksQ0FBQyxNQUFNLEdBQUc7QUFDcEIsS0FBSzs7QUFFTDtBQUNBLElBQUksSUFBSSxDQUFDLGVBQWUsR0FBRyxFQUFFLEdBQUcsSUFBSTtBQUNwQyxJQUFJLE9BQU8sSUFBSSxDQUFDLGVBQWU7QUFDL0IsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxNQUFNLEdBQUc7QUFDWCxJQUFJLElBQUksSUFBSSxHQUFHO0FBQ2YsTUFBTSxNQUFNO0FBQ1osTUFBTSxPQUFPO0FBQ2IsTUFBTSxLQUFLO0FBQ1gsTUFBTSxNQUFNO0FBQ1osTUFBTSxRQUFRO0FBQ2QsTUFBTSxRQUFRO0FBQ2QsTUFBTTtBQUNOLEtBQUs7O0FBRUwsSUFBSSxJQUFJLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQzs7QUFFcEMsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQ2IsSUFBSSxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTTtBQUN6QixJQUFJLElBQUksSUFBSTs7QUFFWixJQUFJLE9BQU8sQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUN6QixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ3BCLE1BQU0sTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDL0IsSUFBSTs7QUFFSixJQUFJLElBQUksSUFBSSxDQUFDLElBQUksRUFBRTtBQUNuQixNQUFNLE1BQU0sQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJO0FBQ3RDLElBQUk7O0FBRUosSUFBSSxPQUFPLE1BQU07QUFDakIsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU0sSUFBSSxHQUFHLFFBQVE7QUFDckIsTUFBTSxlQUFlLEdBQUcsR0FBRztBQUMzQixNQUFNLGVBQWUsR0FBRyxHQUFHO0FBQzNCLE1BQU0sb0JBQW9CLEdBQUcsR0FBRztBQUNoQyxNQUFNLG9CQUFvQixHQUFHLFNBQVM7QUFDdEMsTUFBTSxrQkFBa0IsR0FBRyxNQUFNO0FBQ2pDLE1BQU0scUJBQXFCLEdBQUcsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRTs7QUFFbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxLQUFLLENBQUMsS0FBSyxFQUFFO0FBQ3RCLEVBQUUsSUFBSSxLQUFLLEdBQUcsRUFBRTtBQUNoQixFQUFFLElBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxTQUFTLEdBQUcsRUFBRTs7QUFFakMsRUFBRSxLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsSUFBSSxDQUFDOztBQUV0QixFQUFFLEtBQUssQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLFNBQVMsR0FBRyxFQUFFLElBQUksRUFBRTtBQUM3QyxJQUFJLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDO0FBQ3pDLEVBQUUsQ0FBQyxDQUFDOzs7QUFHSjtBQUNBO0FBQ0E7QUFDQSxFQUFFLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQzlCLElBQUksTUFBTSxJQUFJLFdBQVc7QUFDekIsTUFBTTtBQUNOLEtBQUs7QUFDTCxFQUFFOztBQUVGLEVBQUUsS0FBSyxHQUFHLElBQUk7O0FBRWQsRUFBRSxRQUFRLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJO0FBQzNDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLENBQUMsUUFBUSxHQUFHLFNBQVMsR0FBRyxFQUFFLFNBQVMsRUFBRTtBQUMxQyxFQUFFLElBQUksS0FBSyxHQUFHO0FBQ2QsSUFBSSxTQUFTLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDO0FBQ3ZCLElBQUksU0FBUyxFQUFFLFNBQVMsSUFBSSxNQUFNLENBQUM7QUFDbkMsR0FBRztBQUNILEVBQUUsS0FBSyxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUM7QUFDdEMsRUFBRSxPQUFPLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzlCLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxDQUFDLFNBQVMsR0FBRyxTQUFTLEdBQUcsRUFBRTtBQUNoQyxFQUFFLE9BQU8sS0FBSyxDQUFDLEdBQUcsQ0FBQztBQUNuQixDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sV0FBVyxTQUFTLEtBQUssQ0FBQztBQUNoQyxFQUFFLElBQUksR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUk7QUFDOUI7O0FBRUE7QUFDQSxLQUFLLENBQUMsV0FBVyxHQUFHLFdBQVc7OztBQUcvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxDQUFDLGtCQUFrQixHQUFHLFNBQVMsSUFBSSxFQUFFLEtBQUssRUFBRTtBQUNqRDtBQUNBLEVBQUUsSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUM7QUFDOUMsRUFBRSxJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQzs7QUFFOUMsRUFBRSxJQUFJLGNBQWM7QUFDcEIsRUFBRSxJQUFJLFlBQVk7O0FBRWxCO0FBQ0EsRUFBRSxJQUFJLElBQUk7QUFDVixFQUFFLElBQUksS0FBSztBQUNYO0FBQ0E7QUFDQTtBQUNBLEVBQUUsSUFBSSxNQUFNLEdBQUcsRUFBRTs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUUsS0FBSyxRQUFRLEtBQUssRUFBRSxJQUFJLFFBQVEsS0FBSyxFQUFFLEdBQUc7QUFDNUM7QUFDQTtBQUNBLElBQUksSUFBSSxRQUFRLEdBQUcsUUFBUSxFQUFFO0FBQzdCLE1BQU0sUUFBUSxHQUFHLEVBQUU7QUFDbkIsSUFBSTtBQUNKLEVBQUU7O0FBRUYsRUFBRSxJQUFJLFlBQVk7QUFDbEIsRUFBRSxJQUFJLFFBQVEsS0FBSyxFQUFFLEVBQUU7QUFDdkIsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUU7QUFDN0QsSUFBSSxZQUFZLEdBQUcsS0FBSyxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLFNBQVMsQ0FBQztBQUNoRyxJQUFJLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUMvQixNQUFNLE1BQU0sSUFBSSxXQUFXLENBQUMseUJBQXlCLEdBQUcsSUFBSSxHQUFHLEdBQUcsQ0FBQztBQUNuRSxJQUFJO0FBQ0osSUFBSSxNQUFNLEdBQUcsWUFBWSxDQUFDLENBQUMsQ0FBQztBQUM1QjtBQUNBLElBQUksSUFBSSxpQkFBaUI7QUFDekIsSUFBSSxJQUFJLE9BQU8sWUFBWSxDQUFDLENBQUMsQ0FBQyxLQUFLLFFBQVEsRUFBRTtBQUM3QyxNQUFNLGlCQUFpQixHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNO0FBQ2hELElBQUksQ0FBQyxNQUFNO0FBQ1gsTUFBTSxpQkFBaUIsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsV0FBVyxFQUFFLFlBQVksS0FBSztBQUNoRixRQUFRLE9BQU8sV0FBVyxHQUFHLFlBQVksQ0FBQyxNQUFNO0FBQ2hELE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUNYLElBQUk7QUFDSixJQUFJLGNBQWMsR0FBRyxpQkFBaUIsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUTtBQUNuRSxJQUFJLElBQUksQ0FBQyxZQUFZO0FBQ3JCLE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxjQUFjLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsTUFBTSxFQUFFLEVBQUU7QUFDaEYsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxjQUFjLEdBQUcsWUFBWSxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ3hFLElBQUksQ0FBQyxNQUFNO0FBQ1gsTUFBTSxNQUFNLElBQUksV0FBVyxDQUFDLDhCQUE4QixHQUFHLElBQUksR0FBRyxHQUFHLENBQUM7QUFDeEUsSUFBSTtBQUNKLEVBQUUsQ0FBQyxNQUFNLElBQUksUUFBUSxLQUFLLEVBQUUsRUFBRTtBQUM5QjtBQUNBLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFO0FBQzdELElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDOztBQUVqRCxJQUFJLElBQUksSUFBSSxLQUFLLE9BQU8sRUFBRTtBQUMxQixNQUFNLElBQUksWUFBWSxHQUFHLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUM7QUFDdEQsTUFBTSxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtBQUNwQyxRQUFRLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQztBQUMxQyxNQUFNLENBQUMsTUFBTTtBQUNiLFFBQVEsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDO0FBQzdDLE1BQU07QUFDTixNQUFNLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUM7QUFDdkMsTUFBTSxLQUFLLENBQUMsU0FBUyxHQUFHLFlBQVk7QUFDcEMsTUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRTtBQUM1QixRQUFRLEtBQUssQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2pFLE1BQU07QUFDTixNQUFNO0FBQ04sSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLEtBQUssS0FBSyxFQUFFO0FBQy9CLE1BQU0sS0FBSyxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRTtBQUN6QyxNQUFNO0FBQ04sSUFBSTtBQUNKO0FBQ0E7QUFDQSxFQUFFLENBQUMsTUFBTTtBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxNQUFNLElBQUksV0FBVztBQUN6QixNQUFNLHNDQUFzQyxHQUFHLElBQUksR0FBRztBQUN0RCxLQUFLO0FBQ0wsRUFBRTs7QUFFRixFQUFFLElBQUksU0FBUztBQUNmLEVBQUUsSUFBSSxVQUFVLEdBQUcsS0FBSztBQUN4QixFQUFFLElBQUksZUFBZSxHQUFHLEtBQUs7QUFDN0IsRUFBRSxJQUFJLGVBQWU7QUFDckIsRUFBRSxJQUFJLFNBQVM7QUFDZixFQUFFLElBQUksYUFBYTs7QUFFbkI7QUFDQSxFQUFFLElBQUksS0FBSyxDQUFDLFNBQVMsQ0FBQyxjQUFjLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLEVBQUU7QUFDbEUsSUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7QUFDL0IsSUFBSSxNQUFNLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUM7QUFDL0IsSUFBSSxhQUFhLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQztBQUNoQyxFQUFFLENBQUMsTUFBTTtBQUNULElBQUksYUFBYSxHQUFHLElBQUk7QUFDeEIsRUFBRTs7QUFFRixFQUFFLElBQUksYUFBYSxJQUFJLEtBQUssQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFO0FBQ2pELElBQUksZUFBZSxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQzs7QUFFN0QsSUFBSSxJQUFJLFlBQVksSUFBSSxlQUFlLEVBQUU7QUFDekMsTUFBTSxVQUFVLEdBQUcsZUFBZSxDQUFDLFVBQVU7QUFDN0MsSUFBSTs7QUFFSixJQUFJLElBQUksaUJBQWlCLElBQUksZUFBZSxFQUFFO0FBQzlDLE1BQU0sZUFBZSxHQUFHLGVBQWUsQ0FBQyxlQUFlO0FBQ3ZELElBQUk7O0FBRUosSUFBSSxJQUFJLEtBQUssSUFBSSxZQUFZLElBQUksZUFBZSxFQUFFO0FBQ2xELE1BQU0sU0FBUyxHQUFHLGVBQWUsQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDO0FBQ25ELElBQUk7QUFDSixFQUFFOztBQUVGO0FBQ0EsRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFO0FBQ2xCLElBQUksSUFBSSxFQUFFLE9BQU8sSUFBSSxNQUFNLENBQUMsRUFBRTtBQUM5QixNQUFNLElBQUksZUFBZSxFQUFFO0FBQzNCLFFBQVEsU0FBUyxHQUFHLGVBQWUsQ0FBQyxXQUFXO0FBQy9DLE1BQU0sQ0FBQyxNQUFNO0FBQ2IsUUFBUSxTQUFTLEdBQUcsb0JBQW9CO0FBQ3hDLE1BQU07QUFDTixJQUFJLENBQUMsTUFBTTtBQUNYO0FBQ0EsTUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUU7QUFDNUMsSUFBSTtBQUNKLEVBQUU7O0FBRUYsRUFBRSxPQUFPLE1BQU0sQ0FBQyxLQUFLOztBQUVyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxFQUFFLElBQUksTUFBTTtBQUNaLEVBQUUsSUFBSSxVQUFVLElBQUksZUFBZSxFQUFFO0FBQ3JDLElBQUksS0FBSyxHQUFHLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsZUFBZSxFQUFFLFNBQVMsRUFBRSxFQUFFLEVBQUUsVUFBVSxFQUFFLEtBQUssQ0FBQyxTQUFTLEVBQUUsZUFBZSxDQUFDO0FBQ3ZILElBQUksTUFBTSxHQUFHLENBQUMsYUFBYSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsS0FBSyxDQUFDO0FBQ3RELEVBQUUsQ0FBQyxNQUFNLElBQUksVUFBVSxFQUFFO0FBQ3pCLElBQUksTUFBTSxHQUFHLENBQUMsYUFBYSxFQUFFLE1BQU0sRUFBRSxTQUFTLENBQUM7QUFDL0MsSUFBSSxLQUFLLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQztBQUM5RixFQUFFLENBQUMsTUFBTSxJQUFJLGVBQWUsRUFBRTtBQUM5QixJQUFJLEtBQUssR0FBRyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLGVBQWUsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsU0FBUyxFQUFFLGVBQWUsQ0FBQztBQUNqSCxJQUFJLE1BQU0sR0FBRyxDQUFDLGFBQWEsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLEtBQUssQ0FBQztBQUN0RCxFQUFFLENBQUMsTUFBTTtBQUNULElBQUksS0FBSyxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLFNBQVMsRUFBRSxLQUFLLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQztBQUN2RSxJQUFJLE1BQU0sR0FBRyxDQUFDLGFBQWEsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLEtBQUssQ0FBQztBQUN0RCxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUUsSUFBSSxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxLQUFLLE9BQU8sSUFBSSxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDO0FBQ3ZFLFVBQVUsRUFBRSxJQUFJLEtBQUssU0FBUyxJQUFJLEtBQUssS0FBSyxLQUFLLENBQUMsRUFBRTtBQUNwRCxJQUFJLEtBQUssQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUM7QUFDbkQsRUFBRTtBQUNGLEVBQUUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO0FBQ2pDLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLENBQUMsV0FBVyxHQUFHLFNBQVMsS0FBSyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsZUFBZSxFQUFFO0FBQ3RFLEVBQUUsSUFBSSxJQUFJLElBQUksU0FBUyxDQUFDLEtBQUssSUFBSSxVQUFVLElBQUksU0FBUyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtBQUN0RSxJQUFJLE9BQU8sU0FBUyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLGVBQWUsQ0FBQztBQUNqRSxFQUFFO0FBQ0YsRUFBRSxPQUFPLEtBQUs7QUFDZCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLENBQUMsZ0JBQWdCLEdBQUcsU0FBUyxJQUFJLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRTtBQUMxRCxFQUFFLElBQUksU0FBUyxHQUFHLEtBQUs7QUFDdkIsRUFBRSxJQUFJLEdBQUcsR0FBRyxDQUFDO0FBQ2IsRUFBRSxJQUFJLEtBQUssR0FBRyxvQkFBb0I7QUFDbEMsRUFBRSxJQUFJLE1BQU0sR0FBRyxFQUFFO0FBQ2pCLEVBQUUsSUFBSSxJQUFJLEVBQUUsTUFBTTtBQUNsQixFQUFFLElBQUksS0FBSyxFQUFFLFFBQVEsR0FBRyxFQUFFO0FBQzFCLEVBQUUsSUFBSSxJQUFJLEVBQUUsVUFBVSxFQUFFLE9BQU87O0FBRS9CO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUUsT0FBTyxDQUFDLEdBQUcsS0FBSyxLQUFLO0FBQ3ZCLFNBQVMsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsRUFBRTs7QUFFdEQsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQztBQUN6QyxJQUFJLElBQUksSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7QUFDMUIsTUFBTSxNQUFNLElBQUksV0FBVyxDQUFDLDJCQUEyQixHQUFHLElBQUksR0FBRyxHQUFHLENBQUM7QUFDckUsSUFBSTtBQUNKLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUU7QUFDL0IsSUFBSSxPQUFPLEdBQUcsS0FBSztBQUNuQixJQUFJLFVBQVUsR0FBRyxLQUFLOztBQUV0QixJQUFJLElBQUksTUFBTSxJQUFJLFNBQVMsQ0FBQyxLQUFLLElBQUksU0FBUyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxTQUFTLEVBQUU7QUFDeEUsTUFBTSxJQUFJLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxTQUFTO0FBQzlDLElBQUksQ0FBQyxNQUFNO0FBQ1gsTUFBTSxJQUFJLEdBQUcsa0JBQWtCO0FBQy9CLElBQUk7O0FBRUosSUFBSSxJQUFJLE1BQU0sSUFBSSxTQUFTLENBQUMsS0FBSyxFQUFFO0FBQ25DLE1BQU0sVUFBVSxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsVUFBVTtBQUNyRCxNQUFNLElBQUksU0FBUyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyx3QkFBd0IsRUFBRTtBQUM1RCxRQUFRLE9BQU8sR0FBRyxLQUFLLENBQUMsY0FBYyxDQUFDLEdBQUcsR0FBRyxVQUFVLEdBQUcsR0FBRyxDQUFDO0FBQzlELE1BQU07QUFDTixJQUFJOztBQUVKLElBQUksSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFDaEMsSUFBSSxJQUFJLFFBQVEsS0FBSyxHQUFHLEVBQUU7QUFDMUIsTUFBTSxRQUFRLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFDeEIsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDO0FBQ3ZDLE1BQU0sSUFBSSxVQUFVLElBQUksR0FBRyxJQUFJLEVBQUUsRUFBRTtBQUNuQyxVQUFVLElBQUksYUFBYSxHQUFHLElBQUk7QUFDbEMsVUFBVSxPQUFPLGFBQWEsRUFBRTtBQUNoQyxZQUFZLElBQUksSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsSUFBSSxVQUFVLElBQUksSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsSUFBSSxHQUFHLEVBQUU7QUFDckUsY0FBYyxHQUFHLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUM5QyxZQUFZLENBQUMsTUFBTTtBQUNuQixjQUFjLGFBQWEsR0FBRyxLQUFLO0FBQ25DLFlBQVk7QUFDWixVQUFVO0FBQ1YsUUFBUTtBQUNSLE1BQU0sSUFBSSxHQUFHLEtBQUssRUFBRSxFQUFFO0FBQ3RCLFFBQVEsTUFBTSxJQUFJLFdBQVc7QUFDN0IsVUFBVSwyQ0FBMkMsR0FBRyxJQUFJLEdBQUc7QUFDL0QsU0FBUztBQUNULE1BQU07QUFDTixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUM7QUFDdkMsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxlQUFlLEVBQUUsR0FBRyxDQUFDO0FBQ3BELE1BQU0sSUFBSSxZQUFZLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxlQUFlLEVBQUUsR0FBRyxDQUFDO0FBQzNEO0FBQ0EsTUFBTSxJQUFJLFNBQVMsS0FBSyxFQUFFLEtBQUssWUFBWSxLQUFLLEVBQUUsSUFBSSxTQUFTLEdBQUcsWUFBWSxDQUFDLEVBQUU7QUFDakYsUUFBUSxHQUFHLEdBQUcsS0FBSztBQUNuQixNQUFNO0FBQ04sSUFBSSxDQUFDLE1BQU07QUFDWCxNQUFNLFFBQVEsR0FBRyxHQUFHLEdBQUcsQ0FBQzs7QUFFeEI7QUFDQSxNQUFNLElBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsZUFBZSxFQUFFLFFBQVEsQ0FBQztBQUMzRCxNQUFNLElBQUksWUFBWSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsZUFBZSxFQUFFLFFBQVEsQ0FBQztBQUNoRSxNQUFNLElBQUksWUFBWSxLQUFLLEVBQUUsSUFBSSxPQUFPLEdBQUcsWUFBWSxFQUFFO0FBQ3pEO0FBQ0EsUUFBUSxPQUFPLEdBQUcsWUFBWTtBQUM5QixRQUFRLEdBQUcsR0FBRyxLQUFLO0FBQ25CLE1BQU0sQ0FBQyxNQUFNLElBQUksT0FBTyxLQUFLLEVBQUUsRUFBRTtBQUNqQztBQUNBLFFBQVEsSUFBSSxZQUFZLEtBQUssRUFBRSxFQUFFO0FBQ2pDLFVBQVUsT0FBTyxHQUFHLElBQUksQ0FBQyxNQUFNO0FBQy9CLFFBQVEsQ0FBQyxNQUFNO0FBQ2YsVUFBVSxPQUFPLEdBQUcsWUFBWTtBQUNoQyxRQUFRO0FBQ1IsUUFBUSxHQUFHLEdBQUcsS0FBSztBQUNuQixNQUFNLENBQUMsTUFBTTtBQUNiLFFBQVEsU0FBUyxHQUFHLE9BQU87QUFDM0IsUUFBUSxHQUFHLEdBQUcsT0FBTztBQUNyQixNQUFNOztBQUVOLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQztBQUMzQyxJQUFJOztBQUVKLElBQUksTUFBTSxhQUFhLEdBQUcsS0FBSyxDQUFDLE1BQU07QUFDdEMsSUFBSSxLQUFLLEdBQUcsS0FBSyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUM7QUFDdkMsSUFBSSxRQUFRLElBQUksYUFBYSxHQUFHLEtBQUssQ0FBQyxNQUFNO0FBQzVDLElBQUksSUFBSSxVQUFVLEVBQUU7QUFDcEIsTUFBTSxJQUFJLFNBQVMsR0FBRyxPQUFPLElBQUksVUFBVTtBQUMzQyxNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxTQUFTLENBQUM7QUFDakYsSUFBSSxDQUFDLE1BQU07QUFDWCxNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsU0FBUyxDQUFDO0FBQ3ZELElBQUk7O0FBRUosSUFBSSxJQUFJLFVBQVUsS0FBSyxNQUFNLElBQUksTUFBTSxDQUFDLEVBQUU7QUFDMUMsTUFBTSxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUU7QUFDekMsUUFBUSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztBQUNsQyxNQUFNLENBQUMsTUFBTTtBQUNiLFFBQVEsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHO0FBQ3pCLFVBQVUsTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUN4QixVQUFVO0FBQ1YsU0FBUztBQUNULE1BQU07QUFDTixJQUFJLENBQUMsTUFBTTtBQUNYLE1BQU0sTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEtBQUs7QUFDNUIsSUFBSTtBQUNKLEVBQUU7QUFDRixFQUFFLE9BQU8sQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLFFBQVEsQ0FBQztBQUNsQyxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLENBQUMsY0FBYyxHQUFHLFNBQVMsR0FBRyxFQUFFO0FBQ3JDLEVBQUUsT0FBTyxHQUFHLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxTQUFTLENBQUMsRUFBRTtBQUM3QyxJQUFJLE9BQU8scUJBQXFCLENBQUMsQ0FBQyxDQUFDO0FBQ25DLEVBQUUsQ0FBQyxDQUFDO0FBQ0osQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLENBQUMsZ0JBQWdCLEdBQUcsU0FBUyxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxlQUFlLEVBQUU7QUFDdkcsRUFBRSxJQUFJLEdBQUcsR0FBRyxDQUFDO0FBQ2IsRUFBRSxJQUFJLE9BQU8sR0FBRyxDQUFDO0FBQ2pCLEVBQUUsSUFBSSxLQUFLO0FBQ1gsRUFBRSxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO0FBQzFCLElBQUksT0FBTyxNQUFNO0FBQ2pCLEVBQUU7O0FBRUY7QUFDQSxFQUFFLE9BQU8sQ0FBQyxHQUFHLEdBQUcsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxPQUFPLENBQUMsTUFBTSxFQUFFLEVBQUU7QUFDbEUsSUFBSSxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDO0FBQ3RDLElBQUksSUFBSSxVQUFVLEVBQUU7QUFDcEIsTUFBTSxLQUFLLEdBQUcsS0FBSyxDQUFDLGdCQUFnQixDQUFDLEtBQUssRUFBRSxVQUFVLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLGVBQWUsQ0FBQztBQUNuRyxJQUFJLENBQUMsTUFBTTtBQUNYLE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsZUFBZSxDQUFDO0FBQ3hFLElBQUk7QUFDSixJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO0FBQ3RCLElBQUksT0FBTyxHQUFHLEdBQUcsR0FBRyxLQUFLLENBQUMsTUFBTTtBQUNoQyxFQUFFOztBQUVGO0FBQ0EsRUFBRSxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUM7QUFDL0IsRUFBRSxJQUFJLFVBQVUsRUFBRTtBQUNsQixJQUFJLEtBQUssR0FBRyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsZUFBZSxDQUFDO0FBQ2pHLEVBQUUsQ0FBQyxNQUFNO0FBQ1QsSUFBSSxLQUFLLEdBQUcsS0FBSyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxlQUFlLENBQUM7QUFDdEUsRUFBRTtBQUNGLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7O0FBRXBCLEVBQUUsT0FBTyxNQUFNLENBQUMsTUFBTSxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTTtBQUNoRCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssQ0FBQyxTQUFTLEdBQUcsU0FBUyxNQUFNLEVBQUUsUUFBUSxFQUFFO0FBQzdDLEVBQUUsSUFBSSxHQUFHLEdBQUcsTUFBTSxDQUFDLE1BQU07QUFDekIsRUFBRSxJQUFJLE9BQU8sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQztBQUNuQyxFQUFFLElBQUksR0FBRyxHQUFHLE9BQU87QUFDbkIsRUFBRSxJQUFJLElBQUk7QUFDVixFQUFFLElBQUksU0FBUzs7QUFFZixFQUFFLElBQUksYUFBYTs7QUFFbkIsRUFBRSxHQUFHO0FBQ0wsSUFBSSxHQUFHLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQzs7QUFFM0MsSUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsS0FBSyxJQUFJLEVBQUU7QUFDN0MsTUFBTSxhQUFhLEdBQUcsQ0FBQztBQUN2QixJQUFJLENBQUMsTUFBTTtBQUNYLE1BQU0sYUFBYSxHQUFHLENBQUM7QUFDdkIsSUFBSTs7QUFFSixJQUFJLElBQUksR0FBRyxLQUFLLENBQUMsRUFBRTtBQUNuQixNQUFNLEdBQUcsR0FBRyxHQUFHO0FBQ2YsTUFBTSxhQUFhLEdBQUcsQ0FBQztBQUN2QixJQUFJOztBQUVKLElBQUksU0FBUyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUM7O0FBRS9CLElBQUksSUFBSSxTQUFTLEtBQUssR0FBRyxJQUFJLFNBQVMsS0FBSyxJQUFJLEVBQUU7QUFDakQ7QUFDQSxNQUFNLElBQUksSUFBSSxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLGFBQWEsQ0FBQztBQUM1RCxJQUFJLENBQUMsTUFBTTtBQUNYLE1BQU0sSUFBSSxJQUFJO0FBQ2QsUUFBUSxRQUFRLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQztBQUM1QjtBQUNBLE1BQU0sSUFBSSxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLEdBQUcsR0FBRyxhQUFhLENBQUM7QUFDdkQsSUFBSTs7QUFFSixJQUFJLE9BQU8sR0FBRyxHQUFHO0FBQ2pCLEVBQUUsQ0FBQyxRQUFRLEdBQUcsS0FBSyxHQUFHOztBQUV0QjtBQUNBLEVBQUUsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLEVBQUU7O0FBRXBCLEVBQUUsSUFBSSxJQUFJLENBQUMsTUFBTTtBQUNqQixJQUFJLFFBQVEsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDO0FBQ3hCLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7OztBQUdBLE1BQU0sT0FBTyxHQUFHLENBQUMsTUFBTSxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLFdBQVcsQ0FBQzs7QUFFeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxRQUFRLENBQUM7QUFDZixFQUFFLE9BQU8sa0JBQWtCLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUNsQyxJQUFJLElBQUksQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRTtBQUNsQyxTQUFTLElBQUksQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQzs7QUFFdEMsSUFBSSxJQUFJLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxPQUFPLEVBQUU7QUFDcEMsU0FBUyxJQUFJLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUM7O0FBRXhDLElBQUksSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsT0FBTyxFQUFFO0FBQ2hDLFNBQVMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDOztBQUVwQyxJQUFJLElBQUksQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRTtBQUNsQyxTQUFTLElBQUksQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQzs7QUFFdEMsSUFBSSxJQUFJLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUU7QUFDdEMsU0FBUyxJQUFJLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUM7O0FBRTFDLElBQUksSUFBSSxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFO0FBQ3RDLFNBQVMsSUFBSSxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDOztBQUUxQyxJQUFJLE9BQU8sQ0FBQztBQUNaLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsT0FBTyxZQUFZLENBQUMsRUFBRSxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUU7QUFDOUMs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Q0FBQyxDQUFDO0FBQ3JDLElBQUksSUFBSSxTQUFTLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRTtBQUN0RSxJQUFJLElBQUksSUFBSSxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQzs7QUFFOUMsSUFBSSxJQUFJLEtBQUssR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLE1BQU0sR0FBRyxDQUFDO0FBQ2xDLElBQUksSUFBSSxLQUFLLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxNQUFNLEdBQUcsQ0FBQzs7QUFFbEMsSUFBSSxJQUFJLFdBQVcsR0FBRyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRztBQUN4RCxJQUFJLElBQUksV0FBVyxHQUFHLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRzs7QUFFeEMsSUFBSSxJQUFJLENBQUMsR0FBRztBQUNaLE1BQU0sSUFBSSxFQUFFLFdBQVcsR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQy9DLE1BQU0sS0FBSyxFQUFFLFdBQVcsS0FBSyxLQUFLLElBQUksQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUssSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBSTtBQUMzSSxNQUFNLEdBQUcsRUFBRSxLQUFLLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLElBQUksV0FBVyxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUssSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBSTs7QUFFekgsTUFBTSxJQUFJLEVBQUUsV0FBVyxHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDL0MsTUFBTSxNQUFNLEVBQUUsV0FBVyxJQUFJLEtBQUssSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFHLENBQUMsR0FBRyxXQUFXLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBSTtBQUMzSCxNQUFNLE1BQU0sRUFBRSxLQUFLLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRztBQUN4RyxLQUFLOztBQUVMLElBQUksSUFBSSxJQUFJLElBQUksR0FBRyxFQUFFO0FBQ3JCLE1BQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxXQUFXO0FBQ2pDLElBQUksQ0FBQyxNQUFNLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLEVBQUU7QUFDdkMsTUFBTSxJQUFJLEdBQUcsU0FBUyxDQUFDLFVBQVUsQ0FBQyxJQUFJ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LENBQUMsSUFBSSxJQUFJLFFBQVEsRUFBRTtBQUNwQyxNQUFNLElBQUksT0FBTyxJQUFJLEtBQUssRUFBRTtBQUM1QixRQUFRLElBQUksR0FBRyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDeEUsUUFBUSxJQUFJLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDNUQsUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLEdBQUcsQ0FBQyxFQUFFO0FBQ2xGO0FBQ0EsVUFBVSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxJQUFJO0FBQy9CLFFBQVE7QUFDUixNQUFNLENBQUMsTUFBTTtBQUNiLFFBQVEsSUFBSSxPQUFPLEdBQUcsS0FBSyxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDekUsUUFBUSxLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsT0FBTyxDQUFDO0FBQy9CLE1BQU07QUFDTixJQUFJOztBQUVKLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxRQUFRLEVBQUU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsS0FBSztBQUN0RSxNQUFNLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksU0FBUyxF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O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsZUFBZSxDQUFDLFVBQVUsRUFBRTtBQUNyQyxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUUsT0FBTyxJQUFJO0FBQ2hDLElBQUksTUFBTSxLQUFLLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxtREFBbUQsQ0FBQztBQUN2RixJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsT0FBTyxJQUFJO0FBQzNCLElBQUksT0FBTztBQUNYLFFBQVEsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO0FBQ2pDLFFBQVEsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO0FBQ2pDLFFBQVEsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO0FBQ2pDLFFBQVEsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxTQUFTLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7QUFDNUQsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxlQUFlLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUU7QUFDakQsSUFBSSxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDO0FBQ3JFLElBQUksTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQztBQUNyRSxJQUFJLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUM7QUFDckUsSUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7QUFDdEUsSUFBSSxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekM7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTSxpQkFBaUIsU0FBUyxLQUFLLENBQUM7QUFDdEMsSUFBSSxXQUFXLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLFdBQVcsR0FBRyxTQUFTLEVBQUU7QUFDekUs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QUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxVQUFVLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsRUFBRTtBQUMzTixZQUFZLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsb0JBQW9CLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsb0JBQW9CLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN2YSxRQUFROztBQUVSLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FB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
