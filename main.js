'use strict';

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */

/**
 * Represents the BINARY value type, which contains extra methods for encoding and decoding.
 *
 * @memberof ICAL
 */
class Binary {
  /**
   * Creates a binary value from the given string.
   *
   * @param {String} aString        The binary value string
   * @return {Binary}               The binary value instance
   */
  static fromString(aString) {
    return new Binary(aString);
  }

  /**
   * Creates a new ICAL.Binary instance
   *
   * @param {String} aValue     The binary data for this value
   */
  constructor(aValue) {
    this.value = aValue;
  }

  /**
   * The type name, to be used in the jCal object.
   * @default "binary"
   * @constant
   */
  icaltype = "binary";

  /**
   * Base64 decode the current value
   *
   * @return {String}         The base64-decoded value
   */
  decodeValue() {
    return this._b64_decode(this.value);
  }

  /**
   * Encodes the passed parameter with base64 and sets the internal
   * value to the result.
   *
   * @param {String} aValue      The raw binary value to encode
   */
  setEncodedValue(aValue) {
    this.value = this._b64_encode(aValue);
  }

  _b64_encode(data) {
    // http://kevin.vanzonneveld.net
    // +   original by: Tyler Akins (http://rumkin.com)
    // +   improved by: Bayron Guevara
    // +   improved by: Thunder.m
    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +   bugfixed by: Pellentesque Malesuada
    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +   improved by: Rafa≈Ç Kukawski (http://kukawski.pl)
    // *     example 1: base64_encode('Kevin van Zonneveld');
    // *     returns 1: 'S2V2aW4gdmFuIFpvbm5ldmVsZA=='
    // mozilla has this native
    // - but breaks in 2.0.0.12!
    //if (typeof this.window['atob'] == 'function') {
    //    return atob(data);
    //}
    let b64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ" +
              "abcdefghijklmnopqrstuvwxyz0123456789+/=";
    let o1, o2, o3, h1, h2, h3, h4, bits, i = 0,
      ac = 0,
      enc = "",
      tmp_arr = [];

    if (!data) {
      return data;
    }

    do { // pack three octets into four hexets
      o1 = data.charCodeAt(i++);
      o2 = data.charCodeAt(i++);
      o3 = data.charCodeAt(i++);

      bits = o1 << 16 | o2 << 8 | o3;

      h1 = bits >> 18 & 0x3f;
      h2 = bits >> 12 & 0x3f;
      h3 = bits >> 6 & 0x3f;
      h4 = bits & 0x3f;

      // use hexets to index into b64, and append result to encoded string
      tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);
    } while (i < data.length);

    enc = tmp_arr.join('');

    let r = data.length % 3;

    return (r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3);

  }

  _b64_decode(data) {
    // http://kevin.vanzonneveld.net
    // +   original by: Tyler Akins (http://rumkin.com)
    // +   improved by: Thunder.m
    // +      input by: Aman Gupta
    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +   bugfixed by: Onno Marsman
    // +   bugfixed by: Pellentesque Malesuada
    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +      input by: Brett Zamir (http://brett-zamir.me)
    // +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // *     example 1: base64_decode('S2V2aW4gdmFuIFpvbm5ldmVsZA==');
    // *     returns 1: 'Kevin van Zonneveld'
    // mozilla has this native
    // - but breaks in 2.0.0.12!
    //if (typeof this.window['btoa'] == 'function') {
    //    return btoa(data);
    //}
    let b64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ" +
              "abcdefghijklmnopqrstuvwxyz0123456789+/=";
    let o1, o2, o3, h1, h2, h3, h4, bits, i = 0,
      ac = 0,
      dec = "",
      tmp_arr = [];

    if (!data) {
      return data;
    }

    data += '';

    do { // unpack four hexets into three octets using index points in b64
      h1 = b64.indexOf(data.charAt(i++));
      h2 = b64.indexOf(data.charAt(i++));
      h3 = b64.indexOf(data.charAt(i++));
      h4 = b64.indexOf(data.charAt(i++));

      bits = h1 << 18 | h2 << 12 | h3 << 6 | h4;

      o1 = bits >> 16 & 0xff;
      o2 = bits >> 8 & 0xff;
      o3 = bits & 0xff;

      if (h3 == 64) {
        tmp_arr[ac++] = String.fromCharCode(o1);
      } else if (h4 == 64) {
        tmp_arr[ac++] = String.fromCharCode(o1, o2);
      } else {
        tmp_arr[ac++] = String.fromCharCode(o1, o2, o3);
      }
    } while (i < data.length);

    dec = tmp_arr.join('');

    return dec;
  }

  /**
   * The string representation of this value
   * @return {String}
   */
  toString() {
    return this.value;
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


const DURATION_LETTERS = /([PDWHMTS]{1,1})/;
const DATA_PROPS_TO_COPY = ["weeks", "days", "hours", "minutes", "seconds", "isNegative"];

/**
 * This class represents the "duration" value type, with various calculation
 * and manipulation methods.
 *
 * @memberof ICAL
 */
class Duration {
  /**
   * Returns a new ICAL.Duration instance from the passed seconds value.
   *
   * @param {Number} aSeconds       The seconds to create the instance from
   * @return {Duration}             The newly created duration instance
   */
  static fromSeconds(aSeconds) {
    return (new Duration()).fromSeconds(aSeconds);
  }

  /**
   * Checks if the given string is an iCalendar duration value.
   *
   * @param {String} value      The raw ical value
   * @return {Boolean}          True, if the given value is of the
   *                              duration ical type
   */
  static isValueString(string) {
    return (string[0] === 'P' || string[1] === 'P');
  }

  /**
   * Creates a new {@link ICAL.Duration} instance from the passed string.
   *
   * @param {String} aStr       The string to parse
   * @return {Duration}         The created duration instance
   */
  static fromString(aStr) {
    let pos = 0;
    let dict = Object.create(null);
    let chunks = 0;

    while ((pos = aStr.search(DURATION_LETTERS)) !== -1) {
      let type = aStr[pos];
      let numeric = aStr.slice(0, Math.max(0, pos));
      aStr = aStr.slice(pos + 1);

      chunks += parseDurationChunk(type, numeric, dict);
    }

    if (chunks < 2) {
      // There must be at least a chunk with "P" and some unit chunk
      throw new Error(
        'invalid duration value: Not enough duration components in "' + aStr + '"'
      );
    }

    return new Duration(dict);
  }

  /**
   * Creates a new ICAL.Duration instance from the given data object.
   *
   * @param {Object} aData                An object with members of the duration
   * @param {Number=} aData.weeks         Duration in weeks
   * @param {Number=} aData.days          Duration in days
   * @param {Number=} aData.hours         Duration in hours
   * @param {Number=} aData.minutes       Duration in minutes
   * @param {Number=} aData.seconds       Duration in seconds
   * @param {Boolean=} aData.isNegative   If true, the duration is negative
   * @return {Duration}                   The createad duration instance
   */
  static fromData(aData) {
    return new Duration(aData);
  }

  /**
   * Creates a new ICAL.Duration instance.
   *
   * @param {Object} data                 An object with members of the duration
   * @param {Number=} data.weeks          Duration in weeks
   * @param {Number=} data.days           Duration in days
   * @param {Number=} data.hours          Duration in hours
   * @param {Number=} data.minutes        Duration in minutes
   * @param {Number=} data.seconds        Duration in seconds
   * @param {Boolean=} data.isNegative    If true, the duration is negative
   */
  constructor(data) {
    this.wrappedJSObject = this;
    this.fromData(data);
  }

  /**
   * The weeks in this duration
   * @type {Number}
   * @default 0
   */
  weeks = 0;

  /**
   * The days in this duration
   * @type {Number}
   * @default 0
   */
  days = 0;

  /**
   * The days in this duration
   * @type {Number}
   * @default 0
   */
  hours = 0;

  /**
   * The minutes in this duration
   * @type {Number}
   * @default 0
   */
  minutes = 0;

  /**
   * The seconds in this duration
   * @type {Number}
   * @default 0
   */
  seconds = 0;

  /**
   * The seconds in this duration
   * @type {Boolean}
   * @default false
   */
  isNegative = false;

  /**
   * The class identifier.
   * @constant
   * @type {String}
   * @default "icalduration"
   */
  icalclass = "icalduration";

  /**
   * The type name, to be used in the jCal object.
   * @constant
   * @type {String}
   * @default "duration"
   */
  icaltype = "duration";

  /**
   * Returns a clone of the duration object.
   *
   * @return {Duration}      The cloned object
   */
  clone() {
    return Duration.fromData(this);
  }

  /**
   * The duration value expressed as a number of seconds.
   *
   * @return {Number}             The duration value in seconds
   */
  toSeconds() {
    let seconds = this.seconds + 60 * this.minutes + 3600 * this.hours +
                  86400 * this.days + 7 * 86400 * this.weeks;
    return (this.isNegative ? -seconds : seconds);
  }

  /**
   * Reads the passed seconds value into this duration object. Afterwards,
   * members like {@link ICAL.Duration#days days} and {@link ICAL.Duration#weeks weeks} will be set up
   * accordingly.
   *
   * @param {Number} aSeconds     The duration value in seconds
   * @return {Duration}           Returns this instance
   */
  fromSeconds(aSeconds) {
    let secs = Math.abs(aSeconds);

    this.isNegative = (aSeconds < 0);
    this.days = trunc(secs / 86400);

    // If we have a flat number of weeks, use them.
    if (this.days % 7 == 0) {
      this.weeks = this.days / 7;
      this.days = 0;
    } else {
      this.weeks = 0;
    }

    secs -= (this.days + 7 * this.weeks) * 86400;

    this.hours = trunc(secs / 3600);
    secs -= this.hours * 3600;

    this.minutes = trunc(secs / 60);
    secs -= this.minutes * 60;

    this.seconds = secs;
    return this;
  }

  /**
   * Sets up the current instance using members from the passed data object.
   *
   * @param {Object} aData                An object with members of the duration
   * @param {Number=} aData.weeks         Duration in weeks
   * @param {Number=} aData.days          Duration in days
   * @param {Number=} aData.hours         Duration in hours
   * @param {Number=} aData.minutes       Duration in minutes
   * @param {Number=} aData.seconds       Duration in seconds
   * @param {Boolean=} aData.isNegative   If true, the duration is negative
   */
  fromData(aData) {
    for (let prop of DATA_PROPS_TO_COPY) {
      if (aData && prop in aData) {
        this[prop] = aData[prop];
      } else {
        this[prop] = 0;
      }
    }
  }

  /**
   * Resets the duration instance to the default values, i.e. PT0S
   */
  reset() {
    this.isNegative = false;
    this.weeks = 0;
    this.days = 0;
    this.hours = 0;
    this.minutes = 0;
    this.seconds = 0;
  }

  /**
   * Compares the duration instance with another one.
   *
   * @param {Duration} aOther             The instance to compare with
   * @return {Number}                     -1, 0 or 1 for less/equal/greater
   */
  compare(aOther) {
    let thisSeconds = this.toSeconds();
    let otherSeconds = aOther.toSeconds();
    return (thisSeconds > otherSeconds) - (thisSeconds < otherSeconds);
  }

  /**
   * Normalizes the duration instance. For example, a duration with a value
   * of 61 seconds will be normalized to 1 minute and 1 second.
   */
  normalize() {
    this.fromSeconds(this.toSeconds());
  }

  /**
   * The string representation of this duration.
   * @return {String}
   */
  toString() {
    if (this.toSeconds() == 0) {
      return "PT0S";
    } else {
      let str = "";
      if (this.isNegative) str += "-";
      str += "P";
      let hasWeeks = false;
      if (this.weeks) {
        if (this.days || this.hours || this.minutes || this.seconds) {
          str += (this.weeks * 7 + this.days) + "D";
        } else {
          str += (this.weeks + "W");
          hasWeeks = true;
        }
      } else if (this.days) {
        str += (this.days + "D");
      }

      if (!hasWeeks) {
        if (this.hours || this.minutes || this.seconds) {
          str += "T";
          if (this.hours) {
            str += this.hours + "H";
          }

          if (this.minutes) {
            str += this.minutes + "M";
          }

          if (this.seconds) {
            str += this.seconds + "S";
          }
        }
      }

      return str;
    }
  }

  /**
   * The iCalendar string representation of this duration.
   * @return {String}
   */
  toICALString() {
    return this.toString();
  }
}

/**
 * Internal helper function to handle a chunk of a duration.
 *
 * @private
 * @param {String} letter type of duration chunk
 * @param {String} number numeric value or -/+
 * @param {Object} dict target to assign values to
 */
function parseDurationChunk(letter, number, object) {
  let type;
  switch (letter) {
    case 'P':
      if (number && number === '-') {
        object.isNegative = true;
      } else {
        object.isNegative = false;
      }
      // period
      break;
    case 'D':
      type = 'days';
      break;
    case 'W':
      type = 'weeks';
      break;
    case 'H':
      type = 'hours';
      break;
    case 'M':
      type = 'minutes';
      break;
    case 'S':
      type = 'seconds';
      break;
    default:
      // Not a valid chunk
      return 0;
  }

  if (type) {
    if (!number && number !== 0) {
      throw new Error(
        'invalid duration value: Missing number before "' + letter + '"'
      );
    }
    let num = parseInt(number, 10);
    if (isStrictlyNaN(num)) {
      throw new Error(
        'invalid duration value: Invalid number "' + number + '" before "' + letter + '"'
      );
    }
    object[type] = num;
  }

  return 1;
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 * @ignore
 * @typedef {import("./types.js").jCalComponent} jCalComponent
 * Imports the 'occurrenceDetails' type from the "types.js" module
 */

/**
 * This class represents the "period" value type, with various calculation and manipulation methods.
 *
 * @memberof ICAL
 */
class Period {
  /**
   * Creates a new {@link ICAL.Period} instance from the passed string.
   *
   * @param {String} str            The string to parse
   * @param {Property} prop         The property this period will be on
   * @return {Period}               The created period instance
   */
  static fromString(str, prop) {
    let parts = str.split('/');

    if (parts.length !== 2) {
      throw new Error(
        'Invalid string value: "' + str + '" must contain a "/" char.'
      );
    }

    let options = {
      start: Time.fromDateTimeString(parts[0], prop)
    };

    let end = parts[1];

    if (Duration.isValueString(end)) {
      options.duration = Duration.fromString(end);
    } else {
      options.end = Time.fromDateTimeString(end, prop);
    }

    return new Period(options);
  }

  /**
   * Creates a new {@link ICAL.Period} instance from the given data object.
   * The passed data object cannot contain both and end date and a duration.
   *
   * @param {Object} aData                  An object with members of the period
   * @param {Time=} aData.start             The start of the period
   * @param {Time=} aData.end               The end of the period
   * @param {Duration=} aData.duration      The duration of the period
   * @return {Period}                       The period instance
   */
  static fromData(aData) {
    return new Period(aData);
  }

  /**
   * Returns a new period instance from the given jCal data array. The first
   * member is always the start date string, the second member is either a
   * duration or end date string.
   *
   * @param {jCalComponent} aData           The jCal data array
   * @param {Property} aProp                The property this jCal data is on
   * @param {Boolean} aLenient              If true, data value can be both date and date-time
   * @return {Period}                       The period instance
   */
  static fromJSON(aData, aProp, aLenient) {
    function fromDateOrDateTimeString(aValue, dateProp) {
      if (aLenient) {
        return Time.fromString(aValue, dateProp);
      } else {
        return Time.fromDateTimeString(aValue, dateProp);
      }
    }

    if (Duration.isValueString(aData[1])) {
      return Period.fromData({
        start: fromDateOrDateTimeString(aData[0], aProp),
        duration: Duration.fromString(aData[1])
      });
    } else {
      return Period.fromData({
        start: fromDateOrDateTimeString(aData[0], aProp),
        end: fromDateOrDateTimeString(aData[1], aProp)
      });
    }
  }

  /**
   * Creates a new ICAL.Period instance. The passed data object cannot contain both and end date and
   * a duration.
   *
   * @param {Object} aData                  An object with members of the period
   * @param {Time=} aData.start             The start of the period
   * @param {Time=} aData.end               The end of the period
   * @param {Duration=} aData.duration      The duration of the period
   */
  constructor(aData) {
    this.wrappedJSObject = this;

    if (aData && 'start' in aData) {
      if (aData.start && !(aData.start instanceof Time)) {
        throw new TypeError('.start must be an instance of ICAL.Time');
      }
      this.start = aData.start;
    }

    if (aData && aData.end && aData.duration) {
      throw new Error('cannot accept both end and duration');
    }

    if (aData && 'end' in aData) {
      if (aData.end && !(aData.end instanceof Time)) {
        throw new TypeError('.end must be an instance of ICAL.Time');
      }
      this.end = aData.end;
    }

    if (aData && 'duration' in aData) {
      if (aData.duration && !(aData.duration instanceof Duration)) {
        throw new TypeError('.duration must be an instance of ICAL.Duration');
      }
      this.duration = aData.duration;
    }
  }


  /**
   * The start of the period
   * @type {Time}
   */
  start = null;

  /**
   * The end of the period
   * @type {Time}
   */
  end = null;

  /**
   * The duration of the period
   * @type {Duration}
   */
  duration = null;

  /**
   * The class identifier.
   * @constant
   * @type {String}
   * @default "icalperiod"
   */
  icalclass = "icalperiod";

  /**
   * The type name, to be used in the jCal object.
   * @constant
   * @type {String}
   * @default "period"
   */
  icaltype = "period";

  /**
   * Returns a clone of the duration object.
   *
   * @return {Period}      The cloned object
   */
  clone() {
    return Period.fromData({
      start: this.start ? this.start.clone() : null,
      end: this.end ? this.end.clone() : null,
      duration: this.duration ? this.duration.clone() : null
    });
  }

  /**
   * Calculates the duration of the period, either directly or by subtracting
   * start from end date.
   *
   * @return {Duration}      The calculated duration
   */
  getDuration() {
    if (this.duration) {
      return this.duration;
    } else {
      return this.end.subtractDate(this.start);
    }
  }

  /**
   * Calculates the end date of the period, either directly or by adding
   * duration to start date.
   *
   * @return {Time}          The calculated end date
   */
  getEnd() {
    if (this.end) {
      return this.end;
    } else {
      let end = this.start.clone();
      end.addDuration(this.duration);
      return end;
    }
  }

  /**
   * Compare this period with a date or other period. To maintain the logic where a.compare(b)
   * returns 1 when a > b, this function will return 1 when the period is after the date, 0 when the
   * date is within the period, and -1 when the period is before the date. When comparing two
   * periods, as soon as they overlap in any way this will return 0.
   *
   * @param {Time|Period} dt    The date or other period to compare with
   */
  compare(dt) {
    if (dt.compare(this.start) < 0) {
      return 1;
    } else if (dt.compare(this.getEnd()) > 0) {
      return -1;
    } else {
      return 0;
    }
  }

  /**
   * The string representation of this period.
   * @return {String}
   */
  toString() {
    return this.start + "/" + (this.end || this.duration);
  }

  /**
   * The jCal representation of this period type.
   * @return {Object}
   */
  toJSON() {
    return [this.start.toString(), (this.end || this.duration).toString()];
  }

  /**
   * The iCalendar string representation of this period.
   * @return {String}
   */
  toICALString() {
    return this.start.toICALString() + "/" +
           (this.end || this.duration).toICALString();
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 *
 * @ignore
 * @typedef {import("./types.js").weekDay} weekDay
 * Imports the 'weekDay' type from the "types.js" module
 *
 * @ignore
 * @typedef {import("./types.js").timeInit} timeInit
 * Imports the 'timeInit' type from the "types.js" module
 */

/**
 * @classdesc
 * iCalendar Time representation (similar to JS Date object).  Fully
 * independent of system (OS) timezone / time.  Unlike JS Date, the month
 * January is 1, not zero.
 *
 * @example
 * var time = new ICAL.Time({
 *   year: 2012,
 *   month: 10,
 *   day: 11
 *   minute: 0,
 *   second: 0,
 *   isDate: false
 * });
 *
 *
 * @memberof ICAL
*/
class Time {
  static _dowCache = {};
  static _wnCache = {};

  /**
   * Returns the days in the given month
   *
   * @param {Number} month      The month to check
   * @param {Number} year       The year to check
   * @return {Number}           The number of days in the month
   */
  static daysInMonth(month, year) {
    let _daysInMonth = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    let days = 30;

    if (month < 1 || month > 12) return days;

    days = _daysInMonth[month];

    if (month == 2) {
      days += Time.isLeapYear(year);
    }

    return days;
  }

  /**
   * Checks if the year is a leap year
   *
   * @param {Number} year       The year to check
   * @return {Boolean}          True, if the year is a leap year
   */
  static isLeapYear(year) {
    if (year <= 1752) {
      return ((year % 4) == 0);
    } else {
      return (((year % 4 == 0) && (year % 100 != 0)) || (year % 400 == 0));
    }
  }

  /**
   * Create a new ICAL.Time from the day of year and year. The date is returned
   * in floating timezone.
   *
   * @param {Number} aDayOfYear     The day of year
   * @param {Number} aYear          The year to create the instance in
   * @return {Time}                 The created instance with the calculated date
   */
  static fromDayOfYear(aDayOfYear, aYear) {
    let year = aYear;
    let doy = aDayOfYear;
    let tt = new Time();
    tt.auto_normalize = false;
    let is_leap = (Time.isLeapYear(year) ? 1 : 0);

    if (doy < 1) {
      year--;
      is_leap = (Time.isLeapYear(year) ? 1 : 0);
      doy += Time.daysInYearPassedMonth[is_leap][12];
      return Time.fromDayOfYear(doy, year);
    } else if (doy > Time.daysInYearPassedMonth[is_leap][12]) {
      is_leap = (Time.isLeapYear(year) ? 1 : 0);
      doy -= Time.daysInYearPassedMonth[is_leap][12];
      year++;
      return Time.fromDayOfYear(doy, year);
    }

    tt.year = year;
    tt.isDate = true;

    for (let month = 11; month >= 0; month--) {
      if (doy > Time.daysInYearPassedMonth[is_leap][month]) {
        tt.month = month + 1;
        tt.day = doy - Time.daysInYearPassedMonth[is_leap][month];
        break;
      }
    }

    tt.auto_normalize = true;
    return tt;
  }

  /**
   * Returns a new ICAL.Time instance from a date string, e.g 2015-01-02.
   *
   * @deprecated                Use {@link ICAL.Time.fromDateString} instead
   * @param {String} str        The string to create from
   * @return {Time}             The date/time instance
   */
  static fromStringv2(str) {
    return new Time({
      year: parseInt(str.slice(0, 4), 10),
      month: parseInt(str.slice(5, 7), 10),
      day: parseInt(str.slice(8, 10), 10),
      isDate: true
    });
  }

  /**
   * Returns a new ICAL.Time instance from a date string, e.g 2015-01-02.
   *
   * @param {String} aValue     The string to create from
   * @return {Time}             The date/time instance
   */
  static fromDateString(aValue) {
    // Dates should have no timezone.
    // Google likes to sometimes specify Z on dates
    // we specifically ignore that to avoid issues.

    // YYYY-MM-DD
    // 2012-10-10
    return new Time({
      year: strictParseInt(aValue.slice(0, 4)),
      month: strictParseInt(aValue.slice(5, 7)),
      day: strictParseInt(aValue.slice(8, 10)),
      isDate: true
    });
  }

  /**
   * Returns a new ICAL.Time instance from a date-time string, e.g
   * 2015-01-02T03:04:05. If a property is specified, the timezone is set up
   * from the property's TZID parameter.
   *
   * @param {String} aValue         The string to create from
   * @param {Property=} prop        The property the date belongs to
   * @return {Time}                 The date/time instance
   */
  static fromDateTimeString(aValue, prop) {
    if (aValue.length < 19) {
      throw new Error(
        'invalid date-time value: "' + aValue + '"'
      );
    }

    let zone;
    let zoneId;

    if (aValue.slice(-1) === 'Z') {
      zone = Timezone.utcTimezone;
    } else if (prop) {
      zoneId = prop.getParameter('tzid');

      if (prop.parent) {
        if (prop.parent.name === 'standard' || prop.parent.name === 'daylight') {
          // Per RFC 5545 3.8.2.4 and 3.8.2.2, start/end date-times within
          // these components MUST be specified in local time.
          zone = Timezone.localTimezone;
        } else if (zoneId) {
          // If the desired time zone is defined within the component tree,
          // fetch its definition and prefer that.
          zone = prop.parent.getTimeZoneByID(zoneId);
        }
      }
    }

    const timeData = {
      year: strictParseInt(aValue.slice(0, 4)),
      month: strictParseInt(aValue.slice(5, 7)),
      day: strictParseInt(aValue.slice(8, 10)),
      hour: strictParseInt(aValue.slice(11, 13)),
      minute: strictParseInt(aValue.slice(14, 16)),
      second: strictParseInt(aValue.slice(17, 19)),
    };

    // Although RFC 5545 requires that all TZIDs used within a file have a
    // corresponding time zone definition, we may not be parsing the full file
    // or we may be dealing with a non-compliant file; in either case, we can
    // check our own time zone service for the TZID in a last-ditch effort.
    if (zoneId && !zone) {
      timeData.timezone = zoneId;
    }

    // 2012-10-10T10:10:10(Z)?
    return new Time(timeData, zone);
  }

  /**
   * Returns a new ICAL.Time instance from a date or date-time string,
   *
   * @param {String} aValue         The string to create from
   * @param {Property=} prop        The property the date belongs to
   * @return {Time}                 The date/time instance
   */
  static fromString(aValue, aProperty) {
    if (aValue.length > 10) {
      return Time.fromDateTimeString(aValue, aProperty);
    } else {
      return Time.fromDateString(aValue);
    }
  }

  /**
   * Creates a new ICAL.Time instance from the given Javascript Date.
   *
   * @param {?Date} aDate             The Javascript Date to read, or null to reset
   * @param {Boolean} [useUTC=false]  If true, the UTC values of the date will be used
   */
  static fromJSDate(aDate, useUTC) {
    let tt = new Time();
    return tt.fromJSDate(aDate, useUTC);
  }

  /**
   * Creates a new ICAL.Time instance from the the passed data object.
   *
   * @param {timeInit} aData          Time initialization
   * @param {Timezone=} aZone         Timezone this position occurs in
   */
  static fromData = function fromData(aData, aZone) {
    let t = new Time();
    return t.fromData(aData, aZone);
  };

  /**
   * Creates a new ICAL.Time instance from the current moment.
   * The instance is ‚Äúfloating‚Äù - has no timezone relation.
   * To create an instance considering the time zone, call
   * ICAL.Time.fromJSDate(new Date(), true)
   * @return {Time}
   */
  static now() {
    return Time.fromJSDate(new Date(), false);
  }

  /**
   * Returns the date on which ISO week number 1 starts.
   *
   * @see Time#weekNumber
   * @param {Number} aYear                  The year to search in
   * @param {weekDay=} aWeekStart           The week start weekday, used for calculation.
   * @return {Time}                         The date on which week number 1 starts
   */
  static weekOneStarts(aYear, aWeekStart) {
    let t = Time.fromData({
      year: aYear,
      month: 1,
      day: 1,
      isDate: true
    });

    let dow = t.dayOfWeek();
    let wkst = aWeekStart || Time.DEFAULT_WEEK_START;
    if (dow > Time.THURSDAY) {
      t.day += 7;
    }
    if (wkst > Time.THURSDAY) {
      t.day -= 7;
    }

    t.day -= dow - wkst;

    return t;
  }

  /**
   * Get the dominical letter for the given year. Letters range from A - G for
   * common years, and AG to GF for leap years.
   *
   * @param {Number} yr           The year to retrieve the letter for
   * @return {String}             The dominical letter.
   */
  static getDominicalLetter(yr) {
    let LTRS = "GFEDCBA";
    let dom = (yr + (yr / 4 | 0) + (yr / 400 | 0) - (yr / 100 | 0) - 1) % 7;
    let isLeap = Time.isLeapYear(yr);
    if (isLeap) {
      return LTRS[(dom + 6) % 7] + LTRS[dom];
    } else {
      return LTRS[dom];
    }
  }

  static #epochTime = null;
  /**
   * January 1st, 1970 as an ICAL.Time.
   * @type {Time}
   * @constant
   * @instance
   */
  static get epochTime() {
    if (!this.#epochTime) {
      this.#epochTime = Time.fromData({
        year: 1970,
        month: 1,
        day: 1,
        hour: 0,
        minute: 0,
        second: 0,
        isDate: false,
        timezone: "Z"
      });
    }
    return this.#epochTime;
  }

  static _cmp_attr(a, b, attr) {
    if (a[attr] > b[attr]) return 1;
    if (a[attr] < b[attr]) return -1;
    return 0;
  }

  /**
   * The days that have passed in the year after a given month. The array has
   * two members, one being an array of passed days for non-leap years, the
   * other analog for leap years.
   * @example
   * var isLeapYear = ICAL.Time.isLeapYear(year);
   * var passedDays = ICAL.Time.daysInYearPassedMonth[isLeapYear][month];
   * @type {Array.<Array.<Number>>}
   */
  static daysInYearPassedMonth = [
    [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 365],
    [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335, 366]
  ];

  static SUNDAY = 1;
  static MONDAY = 2;
  static TUESDAY = 3;
  static WEDNESDAY = 4;
  static THURSDAY = 5;
  static FRIDAY = 6;
  static SATURDAY = 7;

  /**
   * The default weekday for the WKST part.
   * @constant
   * @default ICAL.Time.MONDAY
   */
  static DEFAULT_WEEK_START = 2; // MONDAY

  /**
   * Creates a new ICAL.Time instance.
   *
   * @param {timeInit} data           Time initialization
   * @param {Timezone} zone           timezone this position occurs in
   */
  constructor(data, zone) {
    this.wrappedJSObject = this;

    /**
     * @type {timeInit}
     * @private
     */
    this._time = Object.create(null);

    /* time defaults */
    this._time.year = 0;
    this._time.month = 1;
    this._time.day = 1;
    this._time.hour = 0;
    this._time.minute = 0;
    this._time.second = 0;
    this._time.isDate = false;

    this.fromData(data, zone);
  }

  /**
   * The class identifier.
   * @constant
   * @type {String}
   * @default "icaltime"
   */
  icalclass = "icaltime";
  _cachedUnixTime = null;

  /**
   * The type name, to be used in the jCal object. This value may change and
   * is strictly defined by the {@link ICAL.Time#isDate isDate} member.
   * @type {String}
   * @default "date-time"
   */
  get icaltype() {
    return this.isDate ? 'date' : 'date-time';
  }

  /**
   * The timezone for this time.
   * @type {Timezone}
   */
  zone = null;

  /**
   * Internal uses to indicate that a change has been made and the next read
   * operation must attempt to normalize the value (for example changing the
   * day to 33).
   *
   * @type {Boolean}
   * @private
   */
  _pendingNormalization = false;

  /**
   * The year of this date.
   * @type {Number}
   */
  get year() {
    return this._getTimeAttr('year');
  }

  set year(val) {
    this._setTimeAttr('year', val);
  }

  /**
   * The month of this date.
   * @type {Number}
   */
  get month() {
    return this._getTimeAttr('month');
  }

  set month(val) {
    this._setTimeAttr('month', val);
  }

  /**
   * The day of this date.
   * @type {Number}
   */
  get day() {
    return this._getTimeAttr('day');
  }

  set day(val) {
    this._setTimeAttr('day', val);
  }

  /**
   * The hour of this date-time.
   * @type {Number}
   */
  get hour() {
    return this._getTimeAttr('hour');
  }

  set hour(val) {
    this._setTimeAttr('hour', val);
  }

  /**
   * The minute of this date-time.
   * @type {Number}
   */
  get minute() {
    return this._getTimeAttr('minute');
  }

  set minute(val) {
    this._setTimeAttr('minute', val);
  }

  /**
   * The second of this date-time.
   * @type {Number}
   */
  get second() {
    return this._getTimeAttr('second');
  }

  set second(val) {
    this._setTimeAttr('second', val);
  }

  /**
   * If true, the instance represents a date (as opposed to a date-time)
   * @type {Boolean}
   */
  get isDate() {
    return this._getTimeAttr('isDate');
  }

  set isDate(val) {
    this._setTimeAttr('isDate', val);
  }

  /**
   * @private
   * @param {String} attr             Attribute to get (one of: year, month,
   *                                  day, hour, minute, second, isDate)
   * @return {Number|Boolean}         Current value for the attribute
   */
  _getTimeAttr(attr) {
    if (this._pendingNormalization) {
      this._normalize();
      this._pendingNormalization = false;
    }

    return this._time[attr];
  }

  /**
   * @private
   * @param {String} attr             Attribute to set (one of: year, month,
   *                                  day, hour, minute, second, isDate)
   * @param {Number|Boolean} val      New value for the attribute
   */
  _setTimeAttr(attr, val) {
    // Check if isDate will be set and if was not set to normalize date.
    // This avoids losing days when seconds, minutes and hours are zeroed
    // what normalize will do when time is a date.
    if (attr === "isDate" && val && !this._time.isDate) {
      this.adjust(0, 0, 0, 0);
    }
    this._cachedUnixTime = null;
    this._pendingNormalization = true;
    this._time[attr] = val;
  }

  /**
   * Returns a clone of the time object.
   *
   * @return {Time}              The cloned object
   */
  clone() {
    return new Time(this._time, this.zone);
  }

  /**
   * Reset the time instance to epoch time
   */
  reset() {
    this.fromData(Time.epochTime);
    this.zone = Timezone.utcTimezone;
  }

  /**
   * Reset the time instance to the given date/time values.
   *
   * @param {Number} year             The year to set
   * @param {Number} month            The month to set
   * @param {Number} day              The day to set
   * @param {Number} hour             The hour to set
   * @param {Number} minute           The minute to set
   * @param {Number} second           The second to set
   * @param {Timezone} timezone       The timezone to set
   */
  resetTo(year, month, day, hour, minute, second, timezone) {
    this.fromData({
      year: year,
      month: month,
      day: day,
      hour: hour,
      minute: minute,
      second: second,
      zone: timezone
    });
  }

  /**
   * Set up the current instance from the Javascript date value.
   *
   * @param {?Date} aDate             The Javascript Date to read, or null to reset
   * @param {Boolean} [useUTC=false]  If true, the UTC values of the date will be used
   */
  fromJSDate(aDate, useUTC) {
    if (!aDate) {
      this.reset();
    } else {
      if (useUTC) {
        this.zone = Timezone.utcTimezone;
        this.year = aDate.getUTCFullYear();
        this.month = aDate.getUTCMonth() + 1;
        this.day = aDate.getUTCDate();
        this.hour = aDate.getUTCHours();
        this.minute = aDate.getUTCMinutes();
        this.second = aDate.getUTCSeconds();
      } else {
        this.zone = Timezone.localTimezone;
        this.year = aDate.getFullYear();
        this.month = aDate.getMonth() + 1;
        this.day = aDate.getDate();
        this.hour = aDate.getHours();
        this.minute = aDate.getMinutes();
        this.second = aDate.getSeconds();
      }
    }
    this._cachedUnixTime = null;
    return this;
  }

  /**
   * Sets up the current instance using members from the passed data object.
   *
   * @param {timeInit} aData          Time initialization
   * @param {Timezone=} aZone         Timezone this position occurs in
   */
  fromData(aData, aZone) {
    if (aData) {
      for (let [key, value] of Object.entries(aData)) {
          // ical type cannot be set
          if (key === 'icaltype') continue;
        this[key] = value;
      }
    }

    if (aZone) {
      this.zone = aZone;
    }

    if (aData && !("isDate" in aData)) {
      this.isDate = !("hour" in aData);
    } else if (aData && ("isDate" in aData)) {
      this.isDate = aData.isDate;
    }

    if (aData && "timezone" in aData) {
      let zone = TimezoneService.get(
        aData.timezone
      );

      this.zone = zone || Timezone.localTimezone;
    }

    if (aData && "zone" in aData) {
      this.zone = aData.zone;
    }

    if (!this.zone) {
      this.zone = Timezone.localTimezone;
    }

    this._cachedUnixTime = null;
    return this;
  }

  /**
   * Calculate the day of week.
   * @param {weekDay=} aWeekStart
   *        The week start weekday, defaults to SUNDAY
   * @return {weekDay}
   */
  dayOfWeek(aWeekStart) {
    let firstDow = aWeekStart || Time.SUNDAY;
    let dowCacheKey = (this.year << 12) + (this.month << 8) + (this.day << 3) + firstDow;
    if (dowCacheKey in Time._dowCache) {
      return Time._dowCache[dowCacheKey];
    }

    // Using Zeller's algorithm
    let q = this.day;
    let m = this.month + (this.month < 3 ? 12 : 0);
    let Y = this.year - (this.month < 3 ? 1 : 0);

    let h = (q + Y + trunc(((m + 1) * 26) / 10) + trunc(Y / 4));
    { // eslint-disable-line no-constant-condition
      h += trunc(Y / 100) * 6 + trunc(Y / 400);
    }

    // Normalize to 1 = wkst
    h = ((h + 7 - firstDow) % 7) + 1;
    Time._dowCache[dowCacheKey] = h;
    return h;
  }

  /**
   * Calculate the day of year.
   * @return {Number}
   */
  dayOfYear() {
    let is_leap = (Time.isLeapYear(this.year) ? 1 : 0);
    let diypm = Time.daysInYearPassedMonth;
    return diypm[is_leap][this.month - 1] + this.day;
  }

  /**
   * Returns a copy of the current date/time, rewound to the start of the
   * week. The resulting ICAL.Time instance is of icaltype date, even if this
   * is a date-time.
   *
   * @param {weekDay=} aWeekStart
   *        The week start weekday, defaults to SUNDAY
   * @return {Time}      The start of the week (cloned)
   */
  startOfWeek(aWeekStart) {
    let firstDow = aWeekStart || Time.SUNDAY;
    let result = this.clone();
    result.day -= ((this.dayOfWeek() + 7 - firstDow) % 7);
    result.isDate = true;
    result.hour = 0;
    result.minute = 0;
    result.second = 0;
    return result;
  }

  /**
   * Returns a copy of the current date/time, shifted to the end of the week.
   * The resulting ICAL.Time instance is of icaltype date, even if this is a
   * date-time.
   *
   * @param {weekDay=} aWeekStart
   *        The week start weekday, defaults to SUNDAY
   * @return {Time}      The end of the week (cloned)
   */
  endOfWeek(aWeekStart) {
    let firstDow = aWeekStart || Time.SUNDAY;
    let result = this.clone();
    result.day += (7 - this.dayOfWeek() + firstDow - Time.SUNDAY) % 7;
    result.isDate = true;
    result.hour = 0;
    result.minute = 0;
    result.second = 0;
    return result;
  }

  /**
   * Returns a copy of the current date/time, rewound to the start of the
   * month. The resulting ICAL.Time instance is of icaltype date, even if
   * this is a date-time.
   *
   * @return {Time}      The start of the month (cloned)
   */
  startOfMonth() {
    let result = this.clone();
    result.day = 1;
    result.isDate = true;
    result.hour = 0;
    result.minute = 0;
    result.second = 0;
    return result;
  }

  /**
   * Returns a copy of the current date/time, shifted to the end of the
   * month.  The resulting ICAL.Time instance is of icaltype date, even if
   * this is a date-time.
   *
   * @return {Time}      The end of the month (cloned)
   */
  endOfMonth() {
    let result = this.clone();
    result.day = Time.daysInMonth(result.month, result.year);
    result.isDate = true;
    result.hour = 0;
    result.minute = 0;
    result.second = 0;
    return result;
  }

  /**
   * Returns a copy of the current date/time, rewound to the start of the
   * year. The resulting ICAL.Time instance is of icaltype date, even if
   * this is a date-time.
   *
   * @return {Time}      The start of the year (cloned)
   */
  startOfYear() {
    let result = this.clone();
    result.day = 1;
    result.month = 1;
    result.isDate = true;
    result.hour = 0;
    result.minute = 0;
    result.second = 0;
    return result;
  }

  /**
   * Returns a copy of the current date/time, shifted to the end of the
   * year.  The resulting ICAL.Time instance is of icaltype date, even if
   * this is a date-time.
   *
   * @return {Time}      The end of the year (cloned)
   */
  endOfYear() {
    let result = this.clone();
    result.day = 31;
    result.month = 12;
    result.isDate = true;
    result.hour = 0;
    result.minute = 0;
    result.second = 0;
    return result;
  }

  /**
   * First calculates the start of the week, then returns the day of year for
   * this date. If the day falls into the previous year, the day is zero or negative.
   *
   * @param {weekDay=} aFirstDayOfWeek
   *        The week start weekday, defaults to SUNDAY
   * @return {Number}     The calculated day of year
   */
  startDoyWeek(aFirstDayOfWeek) {
    let firstDow = aFirstDayOfWeek || Time.SUNDAY;
    let delta = this.dayOfWeek() - firstDow;
    if (delta < 0) delta += 7;
    return this.dayOfYear() - delta;
  }

  /**
   * Get the dominical letter for the current year. Letters range from A - G
   * for common years, and AG to GF for leap years.
   *
   * @param {Number} yr           The year to retrieve the letter for
   * @return {String}             The dominical letter.
   */
  getDominicalLetter() {
    return Time.getDominicalLetter(this.year);
  }

  /**
   * Finds the nthWeekDay relative to the current month (not day).  The
   * returned value is a day relative the month that this month belongs to so
   * 1 would indicate the first of the month and 40 would indicate a day in
   * the following month.
   *
   * @param {Number} aDayOfWeek   Day of the week see the day name constants
   * @param {Number} aPos         Nth occurrence of a given week day values
   *        of 1 and 0 both indicate the first weekday of that type. aPos may
   *        be either positive or negative
   *
   * @return {Number} numeric value indicating a day relative
   *                   to the current month of this time object
   */
  nthWeekDay(aDayOfWeek, aPos) {
    let daysInMonth = Time.daysInMonth(this.month, this.year);
    let weekday;
    let pos = aPos;

    let start = 0;

    let otherDay = this.clone();

    if (pos >= 0) {
      otherDay.day = 1;

      // because 0 means no position has been given
      // 1 and 0 indicate the same day.
      if (pos != 0) {
        // remove the extra numeric value
        pos--;
      }

      // set current start offset to current day.
      start = otherDay.day;

      // find the current day of week
      let startDow = otherDay.dayOfWeek();

      // calculate the difference between current
      // day of the week and desired day of the week
      let offset = aDayOfWeek - startDow;


      // if the offset goes into the past
      // week we add 7 so it goes into the next
      // week. We only want to go forward in time here.
      if (offset < 0)
        // this is really important otherwise we would
        // end up with dates from in the past.
        offset += 7;

      // add offset to start so start is the same
      // day of the week as the desired day of week.
      start += offset;

      // because we are going to add (and multiply)
      // the numeric value of the day we subtract it
      // from the start position so not to add it twice.
      start -= aDayOfWeek;

      // set week day
      weekday = aDayOfWeek;
    } else {

      // then we set it to the last day in the current month
      otherDay.day = daysInMonth;

      // find the ends weekday
      let endDow = otherDay.dayOfWeek();

      pos++;

      weekday = (endDow - aDayOfWeek);

      if (weekday < 0) {
        weekday += 7;
      }

      weekday = daysInMonth - weekday;
    }

    weekday += pos * 7;

    return start + weekday;
  }

  /**
   * Checks if current time is the nth weekday, relative to the current
   * month.  Will always return false when rule resolves outside of current
   * month.
   *
   * @param {weekDay} aDayOfWeek                 Day of week to check
   * @param {Number} aPos                        Relative position
   * @return {Boolean}                           True, if it is the nth weekday
   */
  isNthWeekDay(aDayOfWeek, aPos) {
    let dow = this.dayOfWeek();

    if (aPos === 0 && dow === aDayOfWeek) {
      return true;
    }

    // get pos
    let day = this.nthWeekDay(aDayOfWeek, aPos);

    if (day === this.day) {
      return true;
    }

    return false;
  }

  /**
   * Calculates the ISO 8601 week number. The first week of a year is the
   * week that contains the first Thursday. The year can have 53 weeks, if
   * January 1st is a Friday.
   *
   * Note there are regions where the first week of the year is the one that
   * starts on January 1st, which may offset the week number. Also, if a
   * different week start is specified, this will also affect the week
   * number.
   *
   * @see Time.weekOneStarts
   * @param {weekDay} aWeekStart                  The weekday the week starts with
   * @return {Number}                             The ISO week number
   */
  weekNumber(aWeekStart) {
    let wnCacheKey = (this.year << 12) + (this.month << 8) + (this.day << 3) + aWeekStart;
    if (wnCacheKey in Time._wnCache) {
      return Time._wnCache[wnCacheKey];
    }
    // This function courtesty of Julian Bucknall, published under the MIT license
    // http://www.boyet.com/articles/publishedarticles/calculatingtheisoweeknumb.html
    // plus some fixes to be able to use different week starts.
    let week1;

    let dt = this.clone();
    dt.isDate = true;
    let isoyear = this.year;

    if (dt.month == 12 && dt.day > 25) {
      week1 = Time.weekOneStarts(isoyear + 1, aWeekStart);
      if (dt.compare(week1) < 0) {
        week1 = Time.weekOneStarts(isoyear, aWeekStart);
      } else {
        isoyear++;
      }
    } else {
      week1 = Time.weekOneStarts(isoyear, aWeekStart);
      if (dt.compare(week1) < 0) {
        week1 = Time.weekOneStarts(--isoyear, aWeekStart);
      }
    }

    let daysBetween = (dt.subtractDate(week1).toSeconds() / 86400);
    let answer = trunc(daysBetween / 7) + 1;
    Time._wnCache[wnCacheKey] = answer;
    return answer;
  }

  /**
   * Adds the duration to the current time. The instance is modified in
   * place.
   *
   * @param {Duration} aDuration         The duration to add
   */
  addDuration(aDuration) {
    let mult = (aDuration.isNegative ? -1 : 1);

    // because of the duration optimizations it is much
    // more efficient to grab all the values up front
    // then set them directly (which will avoid a normalization call).
    // So we don't actually normalize until we need it.
    let second = this.second;
    let minute = this.minute;
    let hour = this.hour;
    let day = this.day;

    second += mult * aDuration.seconds;
    minute += mult * aDuration.minutes;
    hour += mult * aDuration.hours;
    day += mult * aDuration.days;
    day += mult * 7 * aDuration.weeks;

    this.second = second;
    this.minute = minute;
    this.hour = hour;
    this.day = day;

    this._cachedUnixTime = null;
  }

  /**
   * Subtract the date details (_excluding_ timezone).  Useful for finding
   * the relative difference between two time objects excluding their
   * timezone differences.
   *
   * @param {Time} aDate     The date to subtract
   * @return {Duration}      The difference as a duration
   */
  subtractDate(aDate) {
    let unixTime = this.toUnixTime() + this.utcOffset();
    let other = aDate.toUnixTime() + aDate.utcOffset();
    return Duration.fromSeconds(unixTime - other);
  }

  /**
   * Subtract the date details, taking timezones into account.
   *
   * @param {Time} aDate  The date to subtract
   * @return {Duration}   The difference in duration
   */
  subtractDateTz(aDate) {
    let unixTime = this.toUnixTime();
    let other = aDate.toUnixTime();
    return Duration.fromSeconds(unixTime - other);
  }

  /**
   * Compares the ICAL.Time instance with another one, or a period.
   *
   * @param {Time|Period} aOther                  The instance to compare with
   * @return {Number}                             -1, 0 or 1 for less/equal/greater
   */
  compare(other) {
    if (other instanceof Period) {
      return -1 * other.compare(this);
    } else {
      let a = this.toUnixTime();
      let b = other.toUnixTime();

      if (a > b) return 1;
      if (b > a) return -1;
      return 0;
    }
  }

  /**
   * Compares only the date part of this instance with another one.
   *
   * @param {Time} other                  The instance to compare with
   * @param {Timezone} tz                 The timezone to compare in
   * @return {Number}                     -1, 0 or 1 for less/equal/greater
   */
  compareDateOnlyTz(other, tz) {
    let a = this.convertToZone(tz);
    let b = other.convertToZone(tz);
    let rc = 0;

    if ((rc = Time._cmp_attr(a, b, "year")) != 0) return rc;
    if ((rc = Time._cmp_attr(a, b, "month")) != 0) return rc;
    if ((rc = Time._cmp_attr(a, b, "day")) != 0) return rc;

    return rc;
  }

  /**
   * Convert the instance into another timezone. The returned ICAL.Time
   * instance is always a copy.
   *
   * @param {Timezone} zone      The zone to convert to
   * @return {Time}              The copy, converted to the zone
   */
  convertToZone(zone) {
    let copy = this.clone();
    let zone_equals = (this.zone.tzid == zone.tzid);

    if (!this.isDate && !zone_equals) {
      Timezone.convert_time(copy, this.zone, zone);
    }

    copy.zone = zone;
    return copy;
  }

  /**
   * Calculates the UTC offset of the current date/time in the timezone it is
   * in.
   *
   * @return {Number}     UTC offset in seconds
   */
  utcOffset() {
    if (this.zone == Timezone.localTimezone ||
        this.zone == Timezone.utcTimezone) {
      return 0;
    } else {
      return this.zone.utcOffset(this);
    }
  }

  /**
   * Returns an RFC 5545 compliant ical representation of this object.
   *
   * @return {String} ical date/date-time
   */
  toICALString() {
    let string = this.toString();

    if (string.length > 10) {
      return design.icalendar.value['date-time'].toICAL(string);
    } else {
      return design.icalendar.value.date.toICAL(string);
    }
  }

  /**
   * The string representation of this date/time, in jCal form
   * (including : and - separators).
   * @return {String}
   */
  toString() {
    let result = this.year + '-' +
                 pad2(this.month) + '-' +
                 pad2(this.day);

    if (!this.isDate) {
        result += 'T' + pad2(this.hour) + ':' +
                  pad2(this.minute) + ':' +
                  pad2(this.second);

      if (this.zone === Timezone.utcTimezone) {
        result += 'Z';
      }
    }

    return result;
  }

  /**
   * Converts the current instance to a Javascript date
   * @return {Date}
   */
  toJSDate() {
    if (this.zone == Timezone.localTimezone) {
      if (this.isDate) {
        return new Date(this.year, this.month - 1, this.day);
      } else {
        return new Date(this.year, this.month - 1, this.day,
                        this.hour, this.minute, this.second, 0);
      }
    } else {
      return new Date(this.toUnixTime() * 1000);
    }
  }

  _normalize() {
    if (this._time.isDate) {
      this._time.hour = 0;
      this._time.minute = 0;
      this._time.second = 0;
    }
    this.adjust(0, 0, 0, 0);

    return this;
  }

  /**
   * Adjust the date/time by the given offset
   *
   * @param {Number} aExtraDays       The extra amount of days
   * @param {Number} aExtraHours      The extra amount of hours
   * @param {Number} aExtraMinutes    The extra amount of minutes
   * @param {Number} aExtraSeconds    The extra amount of seconds
   * @param {Number=} aTime           The time to adjust, defaults to the
   *                                    current instance.
   */
  adjust(aExtraDays, aExtraHours, aExtraMinutes, aExtraSeconds, aTime) {

    let minutesOverflow, hoursOverflow,
        daysOverflow = 0, yearsOverflow = 0;

    let second, minute, hour, day;
    let daysInMonth;

    let time = aTime || this._time;

    if (!time.isDate) {
      second = time.second + aExtraSeconds;
      time.second = second % 60;
      minutesOverflow = trunc(second / 60);
      if (time.second < 0) {
        time.second += 60;
        minutesOverflow--;
      }

      minute = time.minute + aExtraMinutes + minutesOverflow;
      time.minute = minute % 60;
      hoursOverflow = trunc(minute / 60);
      if (time.minute < 0) {
        time.minute += 60;
        hoursOverflow--;
      }

      hour = time.hour + aExtraHours + hoursOverflow;

      time.hour = hour % 24;
      daysOverflow = trunc(hour / 24);
      if (time.hour < 0) {
        time.hour += 24;
        daysOverflow--;
      }
    }


    // Adjust month and year first, because we need to know what month the day
    // is in before adjusting it.
    if (time.month > 12) {
      yearsOverflow = trunc((time.month - 1) / 12);
    } else if (time.month < 1) {
      yearsOverflow = trunc(time.month / 12) - 1;
    }

    time.year += yearsOverflow;
    time.month -= 12 * yearsOverflow;

    // Now take care of the days (and adjust month if needed)
    day = time.day + aExtraDays + daysOverflow;

    if (day > 0) {
      for (;;) {
        daysInMonth = Time.daysInMonth(time.month, time.year);
        if (day <= daysInMonth) {
          break;
        }

        time.month++;
        if (time.month > 12) {
          time.year++;
          time.month = 1;
        }

        day -= daysInMonth;
      }
    } else {
      while (day <= 0) {
        if (time.month == 1) {
          time.year--;
          time.month = 12;
        } else {
          time.month--;
        }

        day += Time.daysInMonth(time.month, time.year);
      }
    }

    time.day = day;

    this._cachedUnixTime = null;
    return this;
  }

  /**
   * Sets up the current instance from unix time, the number of seconds since
   * January 1st, 1970.
   *
   * @param {Number} seconds      The seconds to set up with
   */
  fromUnixTime(seconds) {
    this.zone = Timezone.utcTimezone;
    // We could use `fromJSDate` here, but this is about twice as fast.
    // We could also clone `epochTime` and use `adjust` for a more
    // ical.js-centric approach, but this is about 100 times as fast.
    let date = new Date(seconds * 1000);
    this.year = date.getUTCFullYear();
    this.month = date.getUTCMonth() + 1;
    this.day = date.getUTCDate();
    if (this._time.isDate) {
      this.hour = 0;
      this.minute = 0;
      this.second = 0;
    } else {
      this.hour = date.getUTCHours();
      this.minute = date.getUTCMinutes();
      this.second = date.getUTCSeconds();
    }

    this._cachedUnixTime = null;
  }

  /**
   * Converts the current instance to seconds since January 1st 1970.
   *
   * @return {Number}         Seconds since 1970
   */
  toUnixTime() {
    if (this._cachedUnixTime !== null) {
      return this._cachedUnixTime;
    }
    let offset = this.utcOffset();

    // we use the offset trick to ensure
    // that we are getting the actual UTC time
    let ms = Date.UTC(
      this.year,
      this.month - 1,
      this.day,
      this.hour,
      this.minute,
      this.second - offset
    );

    // seconds
    this._cachedUnixTime = ms / 1000;
    return this._cachedUnixTime;
  }

  /**
   * Converts time to into Object which can be serialized then re-created
   * using the constructor.
   *
   * @example
   * // toJSON will automatically be called
   * var json = JSON.stringify(mytime);
   *
   * var deserialized = JSON.parse(json);
   *
   * var time = new ICAL.Time(deserialized);
   *
   * @return {Object}
   */
  toJSON() {
    let copy = [
      'year',
      'month',
      'day',
      'hour',
      'minute',
      'second',
      'isDate'
    ];

    let result = Object.create(null);

    let i = 0;
    let len = copy.length;
    let prop;

    for (; i < len; i++) {
      prop = copy[i];
      result[prop] = this[prop];
    }

    if (this.zone) {
      result.timezone = this.zone.tzid;
    }

    return result;
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 *
 * @ignore
 * @typedef {import("./types.js").parserState} parserState
 * Imports the 'parserState' type from the "types.js" module
 * @typedef {import("./types.js").designSet} designSet
 * Imports the 'designSet' type from the "types.js" module
 */

const CHAR = /[^ \t]/;
const VALUE_DELIMITER = ':';
const PARAM_DELIMITER = ';';
const PARAM_NAME_DELIMITER = '=';
const DEFAULT_VALUE_TYPE$1 = 'unknown';
const DEFAULT_PARAM_TYPE = 'text';
const RFC6868_REPLACE_MAP$1 = { "^'": '"', "^n": "\n", "^^": "^" };

/**
 * Parses iCalendar or vCard data into a raw jCal object. Consult
 * documentation on the {@tutorial layers|layers of parsing} for more
 * details.
 *
 * @function ICAL.parse
 * @memberof ICAL
 * @variation function
 * @todo Fix the API to be more clear on the return type
 * @param {String} input      The string data to parse
 * @return {Object|Object[]}  A single jCal object, or an array thereof
 */
function parse(input) {
  let state = {};
  let root = state.component = [];

  state.stack = [root];

  parse._eachLine(input, function(err, line) {
    parse._handleContentLine(line, state);
  });


  // when there are still items on the stack
  // throw a fatal error, a component was not closed
  // correctly in that case.
  if (state.stack.length > 1) {
    throw new ParserError(
      'invalid ical body. component began but did not end'
    );
  }

  state = null;

  return (root.length == 1 ? root[0] : root);
}

/**
 * Parse an iCalendar property value into the jCal for a single property
 *
 * @function ICAL.parse.property
 * @param {String} str
 *   The iCalendar property string to parse
 * @param {designSet=} designSet
 *   The design data to use for this property
 * @return {Object}
 *   The jCal Object containing the property
 */
parse.property = function(str, designSet) {
  let state = {
    component: [[], []],
    designSet: designSet || design.defaultSet
  };
  parse._handleContentLine(str, state);
  return state.component[1][0];
};

/**
 * Convenience method to parse a component. You can use ICAL.parse() directly
 * instead.
 *
 * @function ICAL.parse.component
 * @see ICAL.parse(function)
 * @param {String} str    The iCalendar component string to parse
 * @return {Object}       The jCal Object containing the component
 */
parse.component = function(str) {
  return parse(str);
};


/**
 * An error that occurred during parsing.
 *
 * @param {String} message        The error message
 * @memberof ICAL.parse
 * @extends {Error}
 */
class ParserError extends Error {
  name = this.constructor.name;
}

// classes & constants
parse.ParserError = ParserError;


/**
 * Handles a single line of iCalendar/vCard, updating the state.
 *
 * @private
 * @function ICAL.parse._handleContentLine
 * @param {String} line          The content line to process
 * @param {parserState} state    The current state of the line parsing
 */
parse._handleContentLine = function(line, state) {
  // break up the parts of the line
  let valuePos = line.indexOf(VALUE_DELIMITER);
  let paramPos = line.indexOf(PARAM_DELIMITER);

  let lastParamIndex;
  let lastValuePos;

  // name of property or begin/end
  let name;
  let value;
  // params is only overridden if paramPos !== -1.
  // we can't do params = params || {} later on
  // because it sacrifices ops.
  let params = {};

  /**
   * Different property cases
   *
   *
   * 1. RRULE:FREQ=foo
   *    // FREQ= is not a param but the value
   *
   * 2. ATTENDEE;ROLE=REQ-PARTICIPANT;
   *    // ROLE= is a param because : has not happened yet
   */
    // when the parameter delimiter is after the
    // value delimiter then it is not a parameter.

  if ((paramPos !== -1 && valuePos !== -1)) {
    // when the parameter delimiter is after the
    // value delimiter then it is not a parameter.
    if (paramPos > valuePos) {
      paramPos = -1;
    }
  }

  let parsedParams;
  if (paramPos !== -1) {
    name = line.slice(0, Math.max(0, paramPos)).toLowerCase();
    parsedParams = parse._parseParameters(line.slice(Math.max(0, paramPos)), 0, state.designSet);
    if (parsedParams[2] == -1) {
      throw new ParserError("Invalid parameters in '" + line + "'");
    }
    params = parsedParams[0];
    // Handle parameter values with multiple entries
    let parsedParamLength;
    if (typeof parsedParams[1] === 'string') {
      parsedParamLength = parsedParams[1].length;
    } else {
      parsedParamLength = parsedParams[1].reduce((accumulator, currentValue) => {
        return accumulator + currentValue.length;
      }, 0);
    }
    lastParamIndex = parsedParamLength + parsedParams[2] + paramPos;
    if ((lastValuePos =
      line.slice(Math.max(0, lastParamIndex)).indexOf(VALUE_DELIMITER)) !== -1) {
      value = line.slice(Math.max(0, lastParamIndex + lastValuePos + 1));
    } else {
      throw new ParserError("Missing parameter value in '" + line + "'");
    }
  } else if (valuePos !== -1) {
    // without parmeters (BEGIN:VCAENDAR, CLASS:PUBLIC)
    name = line.slice(0, Math.max(0, valuePos)).toLowerCase();
    value = line.slice(Math.max(0, valuePos + 1));

    if (name === 'begin') {
      let newComponent = [value.toLowerCase(), [], []];
      if (state.stack.length === 1) {
        state.component.push(newComponent);
      } else {
        state.component[2].push(newComponent);
      }
      state.stack.push(state.component);
      state.component = newComponent;
      if (!state.designSet) {
        state.designSet = design.getDesignSet(state.component[0]);
      }
      return;
    } else if (name === 'end') {
      state.component = state.stack.pop();
      return;
    }
    // If it is not begin/end, then this is a property with an empty value,
    // which should be considered valid.
  } else {
    /**
     * Invalid line.
     * The rational to throw an error is we will
     * never be certain that the rest of the file
     * is sane and it is unlikely that we can serialize
     * the result correctly either.
     */
    throw new ParserError(
      'invalid line (no token ";" or ":") "' + line + '"'
    );
  }

  let valueType;
  let multiValue = false;
  let structuredValue = false;
  let propertyDetails;
  let splitName;
  let ungroupedName;

  // fetch the ungrouped part of the name
  if (state.designSet.propertyGroups && name.indexOf('.') !== -1) {
    splitName = name.split('.');
    params.group = splitName[0];
    ungroupedName = splitName[1];
  } else {
    ungroupedName = name;
  }

  if (ungroupedName in state.designSet.property) {
    propertyDetails = state.designSet.property[ungroupedName];

    if ('multiValue' in propertyDetails) {
      multiValue = propertyDetails.multiValue;
    }

    if ('structuredValue' in propertyDetails) {
      structuredValue = propertyDetails.structuredValue;
    }

    if (value && 'detectType' in propertyDetails) {
      valueType = propertyDetails.detectType(value);
    }
  }

  // attempt to determine value
  if (!valueType) {
    if (!('value' in params)) {
      if (propertyDetails) {
        valueType = propertyDetails.defaultType;
      } else {
        valueType = DEFAULT_VALUE_TYPE$1;
      }
    } else {
      // possible to avoid this?
      valueType = params.value.toLowerCase();
    }
  }

  delete params.value;

  /**
   * Note on `var result` juggling:
   *
   * I observed that building the array in pieces has adverse
   * effects on performance, so where possible we inline the creation.
   * It is a little ugly but resulted in ~2000 additional ops/sec.
   */

  let result;
  if (multiValue && structuredValue) {
    value = parse._parseMultiValue(value, structuredValue, valueType, [], multiValue, state.designSet, structuredValue);
    result = [ungroupedName, params, valueType, value];
  } else if (multiValue) {
    result = [ungroupedName, params, valueType];
    parse._parseMultiValue(value, multiValue, valueType, result, null, state.designSet, false);
  } else if (structuredValue) {
    value = parse._parseMultiValue(value, structuredValue, valueType, [], null, state.designSet, structuredValue);
    result = [ungroupedName, params, valueType, value];
  } else {
    value = parse._parseValue(value, valueType, state.designSet, false);
    result = [ungroupedName, params, valueType, value];
  }
  // rfc6350 requires that in vCard 4.0 the first component is the VERSION
  // component with as value 4.0, note that 3.0 does not have this requirement.
  if (state.component[0] === 'vcard' && state.component[1].length === 0 &&
          !(name === 'version' && value === '4.0')) {
    state.designSet = design.getDesignSet("vcard3");
  }
  state.component[1].push(result);
};

/**
 * Parse a value from the raw value into the jCard/jCal value.
 *
 * @private
 * @function ICAL.parse._parseValue
 * @param {String} value          Original value
 * @param {String} type           Type of value
 * @param {Object} designSet      The design data to use for this value
 * @return {Object} varies on type
 */
parse._parseValue = function(value, type, designSet, structuredValue) {
  if (type in designSet.value && 'fromICAL' in designSet.value[type]) {
    return designSet.value[type].fromICAL(value, structuredValue);
  }
  return value;
};

/**
 * Parse parameters from a string to object.
 *
 * @function ICAL.parse._parseParameters
 * @private
 * @param {String} line               A single unfolded line
 * @param {Number} start              Position to start looking for properties
 * @param {Object} designSet          The design data to use for this property
 * @return {Array}                    Array containing key/valye pairs of parsed parameters, the
 *                                      parsed value, and the position of the last parameter found
 */
parse._parseParameters = function(line, start, designSet) {
  let lastParam = start;
  let pos = 0;
  let delim = PARAM_NAME_DELIMITER;
  let result = {};
  let name, lcname;
  let value, valuePos = -1;
  let type, multiValue, mvdelim;

  // find the next '=' sign
  // use lastParam and pos to find name
  // check if " is used if so get value from "->"
  // then increment pos to find next ;

  while ((pos !== false) &&
         (pos = line.indexOf(delim, pos + 1)) !== -1) {

    name = line.slice(lastParam + 1, pos);
    if (name.length == 0) {
      throw new ParserError("Empty parameter name in '" + line + "'");
    }
    lcname = name.toLowerCase();
    mvdelim = false;
    multiValue = false;

    if (lcname in designSet.param && designSet.param[lcname].valueType) {
      type = designSet.param[lcname].valueType;
    } else {
      type = DEFAULT_PARAM_TYPE;
    }

    if (lcname in designSet.param) {
      multiValue = designSet.param[lcname].multiValue;
      if (designSet.param[lcname].multiValueSeparateDQuote) {
        mvdelim = parse._rfc6868Escape('"' + multiValue + '"');
      }
    }

    let nextChar = line[pos + 1];
    if (nextChar === '"') {
      valuePos = pos + 2;
      pos = line.indexOf('"', valuePos);
      if (multiValue && pos != -1) {
          let extendedValue = true;
          while (extendedValue) {
            if (line[pos + 1] == multiValue && line[pos + 2] == '"') {
              pos = line.indexOf('"', pos + 3);
            } else {
              extendedValue = false;
            }
          }
        }
      if (pos === -1) {
        throw new ParserError(
          'invalid line (no matching double quote) "' + line + '"'
        );
      }
      value = line.slice(valuePos, pos);
      lastParam = line.indexOf(PARAM_DELIMITER, pos);
      let propValuePos = line.indexOf(VALUE_DELIMITER, pos);
      // if either no next parameter or delimeter in property value, let's stop here
      if (lastParam === -1 || (propValuePos !== -1 && lastParam > propValuePos)) {
        pos = false;
      }
    } else {
      valuePos = pos + 1;

      // move to next ";"
      let nextPos = line.indexOf(PARAM_DELIMITER, valuePos);
      let propValuePos = line.indexOf(VALUE_DELIMITER, valuePos);
      if (propValuePos !== -1 && nextPos > propValuePos) {
        // this is a delimiter in the property value, let's stop here
        nextPos = propValuePos;
        pos = false;
      } else if (nextPos === -1) {
        // no ";"
        if (propValuePos === -1) {
          nextPos = line.length;
        } else {
          nextPos = propValuePos;
        }
        pos = false;
      } else {
        lastParam = nextPos;
        pos = nextPos;
      }

      value = line.slice(valuePos, nextPos);
    }

    const length_before = value.length;
    value = parse._rfc6868Escape(value);
    valuePos += length_before - value.length;
    if (multiValue) {
      let delimiter = mvdelim || multiValue;
      value = parse._parseMultiValue(value, delimiter, type, [], null, designSet);
    } else {
      value = parse._parseValue(value, type, designSet);
    }

    if (multiValue && (lcname in result)) {
      if (Array.isArray(result[lcname])) {
        result[lcname].push(value);
      } else {
        result[lcname] = [
          result[lcname],
          value
        ];
      }
    } else {
      result[lcname] = value;
    }
  }
  return [result, value, valuePos];
};

/**
 * Internal helper for rfc6868. Exposing this on ICAL.parse so that
 * hackers can disable the rfc6868 parsing if the really need to.
 *
 * @function ICAL.parse._rfc6868Escape
 * @param {String} val        The value to escape
 * @return {String}           The escaped value
 */
parse._rfc6868Escape = function(val) {
  return val.replace(/\^['n^]/g, function(x) {
    return RFC6868_REPLACE_MAP$1[x];
  });
};

/**
 * Parse a multi value string. This function is used either for parsing
 * actual multi-value property's values, or for handling parameter values. It
 * can be used for both multi-value properties and structured value properties.
 *
 * @private
 * @function ICAL.parse._parseMultiValue
 * @param {String} buffer           The buffer containing the full value
 * @param {String} delim            The multi-value delimiter
 * @param {String} type             The value type to be parsed
 * @param {Array.<?>} result        The array to append results to, varies on value type
 * @param {String} innerMulti       The inner delimiter to split each value with
 * @param {designSet} designSet     The design data for this value
 * @return {?|Array.<?>}            Either an array of results, or the first result
 */
parse._parseMultiValue = function(buffer, delim, type, result, innerMulti, designSet, structuredValue) {
  let pos = 0;
  let lastPos = 0;
  let value;
  if (delim.length === 0) {
    return buffer;
  }

  // split each piece
  while ((pos = unescapedIndexOf(buffer, delim, lastPos)) !== -1) {
    value = buffer.slice(lastPos, pos);
    if (innerMulti) {
      value = parse._parseMultiValue(value, innerMulti, type, [], null, designSet, structuredValue);
    } else {
      value = parse._parseValue(value, type, designSet, structuredValue);
    }
    result.push(value);
    lastPos = pos + delim.length;
  }

  // on the last piece take the rest of string
  value = buffer.slice(lastPos);
  if (innerMulti) {
    value = parse._parseMultiValue(value, innerMulti, type, [], null, designSet, structuredValue);
  } else {
    value = parse._parseValue(value, type, designSet, structuredValue);
  }
  result.push(value);

  return result.length == 1 ? result[0] : result;
};

/**
 * Process a complete buffer of iCalendar/vCard data line by line, correctly
 * unfolding content. Each line will be processed with the given callback
 *
 * @private
 * @function ICAL.parse._eachLine
 * @param {String} buffer                         The buffer to process
 * @param {function(?String, String)} callback    The callback for each line
 */
parse._eachLine = function(buffer, callback) {
  let len = buffer.length;
  let lastPos = buffer.search(CHAR);
  let pos = lastPos;
  let line;
  let firstChar;

  let newlineOffset;

  do {
    pos = buffer.indexOf('\n', lastPos) + 1;

    if (pos > 1 && buffer[pos - 2] === '\r') {
      newlineOffset = 2;
    } else {
      newlineOffset = 1;
    }

    if (pos === 0) {
      pos = len;
      newlineOffset = 0;
    }

    firstChar = buffer[lastPos];

    if (firstChar === ' ' || firstChar === '\t') {
      // add to line
      line += buffer.slice(lastPos + 1, pos - newlineOffset);
    } else {
      if (line)
        callback(null, line);
      // push line
      line = buffer.slice(lastPos, pos - newlineOffset);
    }

    lastPos = pos;
  } while (pos !== len);

  // extra ending line
  line = line.trim();

  if (line.length)
    callback(null, line);
};

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


const OPTIONS = ["tzid", "location", "tznames", "latitude", "longitude"];

/**
 * Timezone representation.
 *
 * @example
 * var vcalendar;
 * var timezoneComp = vcalendar.getFirstSubcomponent('vtimezone');
 * var tzid = timezoneComp.getFirstPropertyValue('tzid');
 *
 * var timezone = new ICAL.Timezone({
 *   component: timezoneComp,
 *   tzid
 * });
 *
 * @memberof ICAL
 */
class Timezone {
  static _compare_change_fn(a, b) {
    if (a.year < b.year) return -1;
    else if (a.year > b.year) return 1;

    if (a.month < b.month) return -1;
    else if (a.month > b.month) return 1;

    if (a.day < b.day) return -1;
    else if (a.day > b.day) return 1;

    if (a.hour < b.hour) return -1;
    else if (a.hour > b.hour) return 1;

    if (a.minute < b.minute) return -1;
    else if (a.minute > b.minute) return 1;

    if (a.second < b.second) return -1;
    else if (a.second > b.second) return 1;

    return 0;
  }

  /**
   * Convert the date/time from one zone to the next.
   *
   * @param {Time} tt                  The time to convert
   * @param {Timezone} from_zone       The source zone to convert from
   * @param {Timezone} to_zone         The target zone to convert to
   * @return {Time}                    The converted date/time object
   */
  static convert_time(tt, from_zone, to_zone) {
    if (tt.isDate ||
        from_zone.tzid == to_zone.tzid ||
        from_zone == Timezone.localTimezone ||
        to_zone == Timezone.localTimezone) {
      tt.zone = to_zone;
      return tt;
    }

    let utcOffset = from_zone.utcOffset(tt);
    tt.adjust(0, 0, 0, - utcOffset);

    utcOffset = to_zone.utcOffset(tt);
    tt.adjust(0, 0, 0, utcOffset);

    return null;
  }

  /**
   * Creates a new ICAL.Timezone instance from the passed data object.
   *
   * @param {Component|Object} aData options for class
   * @param {String|Component} aData.component
   *        If aData is a simple object, then this member can be set to either a
   *        string containing the component data, or an already parsed
   *        ICAL.Component
   * @param {String} aData.tzid      The timezone identifier
   * @param {String} aData.location  The timezone locationw
   * @param {String} aData.tznames   An alternative string representation of the
   *                                  timezone
   * @param {Number} aData.latitude  The latitude of the timezone
   * @param {Number} aData.longitude The longitude of the timezone
   */
  static fromData(aData) {
    let tt = new Timezone();
    return tt.fromData(aData);
  }

  /**
   * The instance describing the UTC timezone
   * @type {Timezone}
   * @constant
   * @instance
   */
  static #utcTimezone = null;
  static get utcTimezone() {
    if (!this.#utcTimezone) {
      this.#utcTimezone = Timezone.fromData({
        tzid: "UTC"
      });
    }
    return this.#utcTimezone;
  }

  /**
   * The instance describing the local timezone
   * @type {Timezone}
   * @constant
   * @instance
   */
  static #localTimezone = null;
  static get localTimezone() {
    if (!this.#localTimezone) {
      this.#localTimezone = Timezone.fromData({
        tzid: "floating"
      });
    }
    return this.#localTimezone;
  }

  /**
   * Adjust a timezone change object.
   * @private
   * @param {Object} change     The timezone change object
   * @param {Number} days       The extra amount of days
   * @param {Number} hours      The extra amount of hours
   * @param {Number} minutes    The extra amount of minutes
   * @param {Number} seconds    The extra amount of seconds
   */
  static adjust_change(change, days, hours, minutes, seconds) {
    return Time.prototype.adjust.call(
      change,
      days,
      hours,
      minutes,
      seconds,
      change
    );
  }

  static _minimumExpansionYear = -1;
  static EXTRA_COVERAGE = 5;

  /**
   * Creates a new ICAL.Timezone instance, by passing in a tzid and component.
   *
   * @param {Component|Object} data options for class
   * @param {String|Component} data.component
   *        If data is a simple object, then this member can be set to either a
   *        string containing the component data, or an already parsed
   *        ICAL.Component
   * @param {String} data.tzid      The timezone identifier
   * @param {String} data.location  The timezone locationw
   * @param {String} data.tznames   An alternative string representation of the
   *                                  timezone
   * @param {Number} data.latitude  The latitude of the timezone
   * @param {Number} data.longitude The longitude of the timezone
   */
  constructor(data) {
    this.wrappedJSObject = this;
    this.fromData(data);
  }


  /**
   * Timezone identifier
   * @type {String}
   */
  tzid = "";

  /**
   * Timezone location
   * @type {String}
   */
  location = "";

  /**
   * Alternative timezone name, for the string representation
   * @type {String}
   */
  tznames = "";

  /**
   * The primary latitude for the timezone.
   * @type {Number}
   */
  latitude = 0.0;

  /**
   * The primary longitude for the timezone.
   * @type {Number}
   */
  longitude = 0.0;

  /**
   * The vtimezone component for this timezone.
   * @type {Component}
   */
  component = null;

  /**
   * The year this timezone has been expanded to. All timezone transition
   * dates until this year are known and can be used for calculation
   *
   * @private
   * @type {Number}
   */
  expandedUntilYear = 0;

  /**
   * The class identifier.
   * @constant
   * @type {String}
   * @default "icaltimezone"
   */
  icalclass = "icaltimezone";

  /**
   * Sets up the current instance using members from the passed data object.
   *
   * @param {Component|Object} aData options for class
   * @param {String|Component} aData.component
   *        If aData is a simple object, then this member can be set to either a
   *        string containing the component data, or an already parsed
   *        ICAL.Component
   * @param {String} aData.tzid      The timezone identifier
   * @param {String} aData.location  The timezone locationw
   * @param {String} aData.tznames   An alternative string representation of the
   *                                  timezone
   * @param {Number} aData.latitude  The latitude of the timezone
   * @param {Number} aData.longitude The longitude of the timezone
   */
  fromData(aData) {
    this.expandedUntilYear = 0;
    this.changes = [];

    if (aData instanceof Component) {
      // Either a component is passed directly
      this.component = aData;
    } else {
      // Otherwise the component may be in the data object
      if (aData && "component" in aData) {
        if (typeof aData.component == "string") {
          // If a string was passed, parse it as a component
          let jCal = parse(aData.component);
          this.component = new Component(jCal);
        } else if (aData.component instanceof Component) {
          // If it was a component already, then just set it
          this.component = aData.component;
        } else {
          // Otherwise just null out the component
          this.component = null;
        }
      }

      // Copy remaining passed properties
      for (let prop of OPTIONS) {
        if (aData && prop in aData) {
          this[prop] = aData[prop];
        }
      }
    }

    // If we have a component but no TZID, attempt to get it from the
    // component's properties.
    if (this.component instanceof Component && !this.tzid) {
      this.tzid = this.component.getFirstPropertyValue('tzid');
    }

    return this;
  }

  /**
   * Finds the utcOffset the given time would occur in this timezone.
   *
   * @param {Time} tt         The time to check for
   * @return {Number}         utc offset in seconds
   */
  utcOffset(tt) {
    if (this == Timezone.utcTimezone || this == Timezone.localTimezone) {
      return 0;
    }

    this._ensureCoverage(tt.year);

    if (!this.changes.length) {
      return 0;
    }

    let tt_change = {
      year: tt.year,
      month: tt.month,
      day: tt.day,
      hour: tt.hour,
      minute: tt.minute,
      second: tt.second
    };

    let change_num = this._findNearbyChange(tt_change);
    let change_num_to_use = -1;
    let step = 1;

    // TODO: replace with bin search?
    for (;;) {
      let change = clone(this.changes[change_num], true);
      if (change.utcOffset < change.prevUtcOffset) {
        Timezone.adjust_change(change, 0, 0, 0, change.utcOffset);
      } else {
        Timezone.adjust_change(change, 0, 0, 0,
                                        change.prevUtcOffset);
      }

      let cmp = Timezone._compare_change_fn(tt_change, change);

      if (cmp >= 0) {
        change_num_to_use = change_num;
      } else {
        step = -1;
      }

      if (step == -1 && change_num_to_use != -1) {
        break;
      }

      change_num += step;

      if (change_num < 0) {
        return 0;
      }

      if (change_num >= this.changes.length) {
        break;
      }
    }

    let zone_change = this.changes[change_num_to_use];
    let utcOffset_change = zone_change.utcOffset - zone_change.prevUtcOffset;

    if (utcOffset_change < 0 && change_num_to_use > 0) {
      let tmp_change = clone(zone_change, true);
      Timezone.adjust_change(tmp_change, 0, 0, 0, tmp_change.prevUtcOffset);

      if (Timezone._compare_change_fn(tt_change, tmp_change) < 0) {
        let prev_zone_change = this.changes[change_num_to_use - 1];

        let want_daylight = false; // TODO

        if (zone_change.is_daylight != want_daylight &&
            prev_zone_change.is_daylight == want_daylight) {
          zone_change = prev_zone_change;
        }
      }
    }

    // TODO return is_daylight?
    return zone_change.utcOffset;
  }

  _findNearbyChange(change) {
    // find the closest match
    let idx = binsearchInsert(
      this.changes,
      change,
      Timezone._compare_change_fn
    );

    if (idx >= this.changes.length) {
      return this.changes.length - 1;
    }

    return idx;
  }

  _ensureCoverage(aYear) {
    if (Timezone._minimumExpansionYear == -1) {
      let today = Time.now();
      Timezone._minimumExpansionYear = today.year;
    }

    let changesEndYear = aYear;
    if (changesEndYear < Timezone._minimumExpansionYear) {
      changesEndYear = Timezone._minimumExpansionYear;
    }

    changesEndYear += Timezone.EXTRA_COVERAGE;

    if (!this.changes.length || this.expandedUntilYear < aYear) {
      let subcomps = this.component.getAllSubcomponents();
      let compLen = subcomps.length;
      let compIdx = 0;

      for (; compIdx < compLen; compIdx++) {
        this._expandComponent(
          subcomps[compIdx], changesEndYear, this.changes
        );
      }

      this.changes.sort(Timezone._compare_change_fn);
      this.expandedUntilYear = changesEndYear;
    }
  }

  _expandComponent(aComponent, aYear, changes) {
    if (!aComponent.hasProperty("dtstart") ||
        !aComponent.hasProperty("tzoffsetto") ||
        !aComponent.hasProperty("tzoffsetfrom")) {
      return null;
    }

    let dtstart = aComponent.getFirstProperty("dtstart").getFirstValue();
    let change;

    function convert_tzoffset(offset) {
      return offset.factor * (offset.hours * 3600 + offset.minutes * 60);
    }

    function init_changes() {
      let changebase = {};
      changebase.is_daylight = (aComponent.name == "daylight");
      changebase.utcOffset = convert_tzoffset(
        aComponent.getFirstProperty("tzoffsetto").getFirstValue()
      );

      changebase.prevUtcOffset = convert_tzoffset(
        aComponent.getFirstProperty("tzoffsetfrom").getFirstValue()
      );

      return changebase;
    }

    if (!aComponent.hasProperty("rrule") && !aComponent.hasProperty("rdate")) {
      change = init_changes();
      change.year = dtstart.year;
      change.month = dtstart.month;
      change.day = dtstart.day;
      change.hour = dtstart.hour;
      change.minute = dtstart.minute;
      change.second = dtstart.second;

      Timezone.adjust_change(change, 0, 0, 0, -change.prevUtcOffset);
      changes.push(change);
    } else {
      let props = aComponent.getAllProperties("rdate");
      for (let rdate of props) {
        let time = rdate.getFirstValue();
        change = init_changes();

        change.year = time.year;
        change.month = time.month;
        change.day = time.day;

        if (time.isDate) {
          change.hour = dtstart.hour;
          change.minute = dtstart.minute;
          change.second = dtstart.second;

          if (dtstart.zone != Timezone.utcTimezone) {
            Timezone.adjust_change(change, 0, 0, 0, -change.prevUtcOffset);
          }
        } else {
          change.hour = time.hour;
          change.minute = time.minute;
          change.second = time.second;

          if (time.zone != Timezone.utcTimezone) {
            Timezone.adjust_change(change, 0, 0, 0, -change.prevUtcOffset);
          }
        }

        changes.push(change);
      }

      let rrule = aComponent.getFirstProperty("rrule");

      if (rrule) {
        rrule = rrule.getFirstValue();
        change = init_changes();

        if (rrule.until && rrule.until.zone == Timezone.utcTimezone) {
          rrule.until.adjust(0, 0, 0, change.prevUtcOffset);
          rrule.until.zone = Timezone.localTimezone;
        }

        let iterator = rrule.iterator(dtstart);

        let occ;
        while ((occ = iterator.next())) {
          change = init_changes();
          if (occ.year > aYear || !occ) {
            break;
          }

          change.year = occ.year;
          change.month = occ.month;
          change.day = occ.day;
          change.hour = occ.hour;
          change.minute = occ.minute;
          change.second = occ.second;
          change.isDate = occ.isDate;

          Timezone.adjust_change(change, 0, 0, 0, -change.prevUtcOffset);
          changes.push(change);
        }
      }
    }

    return changes;
  }

  /**
   * The string representation of this timezone.
   * @return {String}
   */
  toString() {
    return (this.tznames ? this.tznames : this.tzid);
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


let zones = null;

/**
 * @classdesc
 * Singleton class to contain timezones.  Right now it is all manual registry in
 * the future we may use this class to download timezone information or handle
 * loading pre-expanded timezones.
 *
 * @exports module:ICAL.TimezoneService
 * @memberof ICAL
 */
const TimezoneService = {
  get count() {
    if (zones === null) {
      return 0;
    }

    return Object.keys(zones).length;
  },

  reset: function() {
    zones = Object.create(null);
    let utc = Timezone.utcTimezone;

    zones.Z = utc;
    zones.UTC = utc;
    zones.GMT = utc;
  },
  _hard_reset: function() {
    zones = null;
  },

  /**
   * Checks if timezone id has been registered.
   *
   * @param {String} tzid     Timezone identifier (e.g. America/Los_Angeles)
   * @return {Boolean}        False, when not present
   */
  has: function(tzid) {
    if (zones === null) {
      return false;
    }

    return !!zones[tzid];
  },

  /**
   * Returns a timezone by its tzid if present.
   *
   * @param {String} tzid               Timezone identifier (e.g. America/Los_Angeles)
   * @return {Timezone | undefined}     The timezone, or undefined if not found
   */
  get: function(tzid) {
    if (zones === null) {
      this.reset();
    }

    return zones[tzid];
  },

  /**
   * Registers a timezone object or component.
   *
   * @param {Component|Timezone} timezone
   *        The initialized zone or vtimezone.
   *
   * @param {String=} name
   *        The name of the timezone. Defaults to the component's TZID if not
   *        passed.
   */
  register: function(timezone, name) {
    if (zones === null) {
      this.reset();
    }

    // This avoids a breaking change by the change of argument order
    // TODO remove in v3
    if (typeof timezone === "string" && name instanceof Timezone) {
      [timezone, name] = [name, timezone];
    }

    if (!name) {
      if (timezone instanceof Timezone) {
        name = timezone.tzid;
      } else {
        if (timezone.name === 'vtimezone') {
          timezone = new Timezone(timezone);
          name = timezone.tzid;
        }
      }
    }

    if (!name) {
      throw new TypeError("Neither a timezone nor a name was passed");
    }

    if (timezone instanceof Timezone) {
      zones[name] = timezone;
    } else {
      throw new TypeError('timezone must be ICAL.Timezone or ICAL.Component');
    }
  },

  /**
   * Removes a timezone by its tzid from the list.
   *
   * @param {String} tzid     Timezone identifier (e.g. America/Los_Angeles)
   * @return {?Timezone}      The removed timezone, or null if not registered
   */
  remove: function(tzid) {
    if (zones === null) {
      return null;
    }

    return (delete zones[tzid]);
  }
};

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * Helper functions used in various places within ical.js
 * @module ICAL.helpers
 */

/**
 * Compiles a list of all referenced TZIDs in all subcomponents and
 * removes any extra VTIMEZONE subcomponents. In addition, if any TZIDs
 * are referenced by a component, but a VTIMEZONE does not exist,
 * an attempt will be made to generate a VTIMEZONE using ICAL.TimezoneService.
 *
 * @param {Component} vcal     The top-level VCALENDAR component.
 * @return {Component}         The ICAL.Component that was passed in.
 */
function updateTimezones(vcal) {
  let allsubs, properties, vtimezones, reqTzid, i;

  if (!vcal || vcal.name !== "vcalendar") {
    //not a top-level vcalendar component
    return vcal;
  }

  //Store vtimezone subcomponents in an object reference by tzid.
  //Store properties from everything else in another array
  allsubs = vcal.getAllSubcomponents();
  properties = [];
  vtimezones = {};
  for (i = 0; i < allsubs.length; i++) {
    if (allsubs[i].name === "vtimezone") {
      let tzid = allsubs[i].getFirstProperty("tzid").getFirstValue();
      vtimezones[tzid] = allsubs[i];
    } else {
      properties = properties.concat(allsubs[i].getAllProperties());
    }
  }

  //create an object with one entry for each required tz
  reqTzid = {};
  for (i = 0; i < properties.length; i++) {
    let tzid = properties[i].getParameter("tzid");
    if (tzid) {
      reqTzid[tzid] = true;
    }
  }

  //delete any vtimezones that are not on the reqTzid list.
  for (let [tzid, comp] of Object.entries(vtimezones)) {
    if (!reqTzid[tzid]) {
      vcal.removeSubcomponent(comp);
    }
  }

  //create any missing, but registered timezones
  for (let tzid of Object.keys(reqTzid)) {
    if (!vtimezones[tzid] && TimezoneService.has(tzid)) {
      vcal.addSubcomponent(TimezoneService.get(tzid).component);
    }
  }

  return vcal;
}

/**
 * Checks if the given type is of the number type and also NaN.
 *
 * @param {Number} number     The number to check
 * @return {Boolean}          True, if the number is strictly NaN
 */
function isStrictlyNaN(number) {
  return typeof(number) === 'number' && isNaN(number);
}

/**
 * Parses a string value that is expected to be an integer, when the valid is
 * not an integer throws a decoration error.
 *
 * @param {String} string     Raw string input
 * @return {Number}           Parsed integer
 */
function strictParseInt(string) {
  let result = parseInt(string, 10);

  if (isStrictlyNaN(result)) {
    throw new Error(
      'Could not extract integer from "' + string + '"'
    );
  }

  return result;
}

/**
 * Creates or returns a class instance of a given type with the initialization
 * data if the data is not already an instance of the given type.
 *
 * @example
 * var time = new ICAL.Time(...);
 * var result = ICAL.helpers.formatClassType(time, ICAL.Time);
 *
 * (result instanceof ICAL.Time)
 * // => true
 *
 * result = ICAL.helpers.formatClassType({}, ICAL.Time);
 * (result isntanceof ICAL.Time)
 * // => true
 *
 *
 * @param {Object} data       object initialization data
 * @param {Object} type       object type (like ICAL.Time)
 * @return {?}                An instance of the found type.
 */
function formatClassType(data, type) {
  if (typeof(data) === 'undefined') {
    return undefined;
  }

  if (data instanceof type) {
    return data;
  }
  return new type(data);
}

/**
 * Identical to indexOf but will only match values when they are not preceded
 * by a backslash character.
 *
 * @param {String} buffer         String to search
 * @param {String} search         Value to look for
 * @param {Number} pos            Start position
 * @return {Number}               The position, or -1 if not found
 */
function unescapedIndexOf(buffer, search, pos) {
  while ((pos = buffer.indexOf(search, pos)) !== -1) {
    if (pos > 0 && buffer[pos - 1] === '\\') {
      pos += 1;
    } else {
      return pos;
    }
  }
  return -1;
}

/**
 * Find the index for insertion using binary search.
 *
 * @param {Array} list            The list to search
 * @param {?} seekVal             The value to insert
 * @param {function(?,?)} cmpfunc The comparison func, that can
 *                                  compare two seekVals
 * @return {Number}               The insert position
 */
function binsearchInsert(list, seekVal, cmpfunc) {
  if (!list.length)
    return 0;

  let low = 0, high = list.length - 1,
      mid, cmpval;

  while (low <= high) {
    mid = low + Math.floor((high - low) / 2);
    cmpval = cmpfunc(seekVal, list[mid]);

    if (cmpval < 0)
      high = mid - 1;
    else if (cmpval > 0)
      low = mid + 1;
    else
      break;
  }

  if (cmpval < 0)
    return mid; // insertion is displacing, so use mid outright.
  else if (cmpval > 0)
    return mid + 1;
  else
    return mid;
}

/**
 * Clone the passed object or primitive. By default a shallow clone will be
 * executed.
 *
 * @param {*} aSrc            The thing to clone
 * @param {Boolean=} aDeep    If true, a deep clone will be performed
 * @return {*}                The copy of the thing
 */
function clone(aSrc, aDeep) {
  if (!aSrc || typeof aSrc != "object") {
    return aSrc;
  } else if (aSrc instanceof Date) {
    return new Date(aSrc.getTime());
  } else if ("clone" in aSrc) {
    return aSrc.clone();
  } else if (Array.isArray(aSrc)) {
    let arr = [];
    for (let i = 0; i < aSrc.length; i++) {
      arr.push(aDeep ? clone(aSrc[i], true) : aSrc[i]);
    }
    return arr;
  } else {
    let obj = {};
    for (let [name, value] of Object.entries(aSrc)) {
      if (aDeep) {
        obj[name] = clone(value, true);
      } else {
        obj[name] = value;
      }
    }
    return obj;
  }
}

/**
 * Performs iCalendar line folding. A line ending character is inserted and
 * the next line begins with a whitespace.
 *
 * @example
 * SUMMARY:This line will be fold
 *  ed right in the middle of a word.
 *
 * @param {String} aLine      The line to fold
 * @return {String}           The folded line
 */
function foldline(aLine) {
  let result = "";
  let line = aLine || "", pos = 0, line_length = 0;
  //pos counts position in line for the UTF-16 presentation
  //line_length counts the bytes for the UTF-8 presentation
  while (line.length) {
    let cp = line.codePointAt(pos);
    if (cp < 128) ++line_length;
    else if (cp < 2048) line_length += 2;//needs 2 UTF-8 bytes
    else if (cp < 65536) line_length += 3;
    else line_length += 4; //cp is less than 1114112
    if (line_length < ICALmodule.foldLength + 1)
      pos += cp > 65535 ? 2 : 1;
    else {
      result += ICALmodule.newLineChar + " " + line.slice(0, Math.max(0, pos));
      line = line.slice(Math.max(0, pos));
      pos = line_length = 0;
    }
  }
  return result.slice(ICALmodule.newLineChar.length + 1);
}

/**
 * Pads the given string or number with zeros so it will have at least two
 * characters.
 *
 * @param {String|Number} data    The string or number to pad
 * @return {String}               The number padded as a string
 */
function pad2(data) {
  if (typeof(data) !== 'string') {
    // handle fractions.
    if (typeof(data) === 'number') {
      data = parseInt(data);
    }
    data = String(data);
  }

  let len = data.length;

  switch (len) {
    case 0:
      return '00';
    case 1:
      return '0' + data;
    default:
      return data;
  }
}

/**
 * Truncates the given number, correctly handling negative numbers.
 *
 * @param {Number} number     The number to truncate
 * @return {Number}           The truncated number
 */
function trunc(number) {
  return (number < 0 ? Math.ceil(number) : Math.floor(number));
}

/**
 * Poor-man's cross-browser object extension. Doesn't support all the
 * features, but enough for our usage. Note that the target's properties are
 * not overwritten with the source properties.
 *
 * @example
 * var child = ICAL.helpers.extend(parent, {
 *   "bar": 123
 * });
 *
 * @param {Object} source     The object to extend
 * @param {Object} target     The object to extend with
 * @return {Object}           Returns the target.
 */
function extend(source, target) {
  for (let key in source) {
    let descr = Object.getOwnPropertyDescriptor(source, key);
    if (descr && !Object.getOwnPropertyDescriptor(target, key)) {
      Object.defineProperty(target, key, descr);
    }
  }
  return target;
}

var helpers = /*#__PURE__*/Object.freeze({
  __proto__: null,
  binsearchInsert: binsearchInsert,
  clone: clone,
  extend: extend,
  foldline: foldline,
  formatClassType: formatClassType,
  isStrictlyNaN: isStrictlyNaN,
  pad2: pad2,
  strictParseInt: strictParseInt,
  trunc: trunc,
  unescapedIndexOf: unescapedIndexOf,
  updateTimezones: updateTimezones
});

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This class represents the "utc-offset" value type, with various calculation and manipulation
 * methods.
 *
 * @memberof ICAL
 */
class UtcOffset {
  /**
   * Creates a new {@link ICAL.UtcOffset} instance from the passed string.
   *
   * @param {String} aString    The string to parse
   * @return {Duration}         The created utc-offset instance
   */
  static fromString(aString) {
    // -05:00
    let options = {};
    //TODO: support seconds per rfc5545 ?
    options.factor = (aString[0] === '+') ? 1 : -1;
    options.hours = strictParseInt(aString.slice(1, 3));
    options.minutes = strictParseInt(aString.slice(4, 6));

    return new UtcOffset(options);
  }

  /**
   * Creates a new {@link ICAL.UtcOffset} instance from the passed seconds
   * value.
   *
   * @param {Number} aSeconds       The number of seconds to convert
   */
  static fromSeconds(aSeconds) {
    let instance = new UtcOffset();
    instance.fromSeconds(aSeconds);
    return instance;
  }

  /**
   * Creates a new ICAL.UtcOffset instance.
   *
   * @param {Object} aData          An object with members of the utc offset
   * @param {Number=} aData.hours   The hours for the utc offset
   * @param {Number=} aData.minutes The minutes in the utc offset
   * @param {Number=} aData.factor  The factor for the utc-offset, either -1 or 1
   */
  constructor(aData) {
    this.fromData(aData);
  }

  /**
   * The hours in the utc-offset
   * @type {Number}
   */
  hours = 0;

  /**
   * The minutes in the utc-offset
   * @type {Number}
   */
  minutes = 0;

  /**
   * The sign of the utc offset, 1 for positive offset, -1 for negative
   * offsets.
   * @type {Number}
   */
  factor = 1;

  /**
   * The type name, to be used in the jCal object.
   * @constant
   * @type {String}
   * @default "utc-offset"
   */
  icaltype = "utc-offset";

  /**
   * Returns a clone of the utc offset object.
   *
   * @return {UtcOffset}     The cloned object
   */
  clone() {
    return UtcOffset.fromSeconds(this.toSeconds());
  }

  /**
   * Sets up the current instance using members from the passed data object.
   *
   * @param {Object} aData          An object with members of the utc offset
   * @param {Number=} aData.hours   The hours for the utc offset
   * @param {Number=} aData.minutes The minutes in the utc offset
   * @param {Number=} aData.factor  The factor for the utc-offset, either -1 or 1
   */
  fromData(aData) {
    if (aData) {
      for (let [key, value] of Object.entries(aData)) {
        this[key] = value;
      }
    }
    this._normalize();
  }

  /**
   * Sets up the current instance from the given seconds value. The seconds
   * value is truncated to the minute. Offsets are wrapped when the world
   * ends, the hour after UTC+14:00 is UTC-12:00.
   *
   * @param {Number} aSeconds         The seconds to convert into an offset
   */
  fromSeconds(aSeconds) {
    let secs = Math.abs(aSeconds);

    this.factor = aSeconds < 0 ? -1 : 1;
    this.hours = trunc(secs / 3600);

    secs -= (this.hours * 3600);
    this.minutes = trunc(secs / 60);
    return this;
  }

  /**
   * Convert the current offset to a value in seconds
   *
   * @return {Number}                 The offset in seconds
   */
  toSeconds() {
    return this.factor * (60 * this.minutes + 3600 * this.hours);
  }

  /**
   * Compare this utc offset with another one.
   *
   * @param {UtcOffset} other             The other offset to compare with
   * @return {Number}                     -1, 0 or 1 for less/equal/greater
   */
  compare(other) {
    let a = this.toSeconds();
    let b = other.toSeconds();
    return (a > b) - (b > a);
  }

  _normalize() {
    // Range: 97200 seconds (with 1 hour inbetween)
    let secs = this.toSeconds();
    let factor = this.factor;
    while (secs < -43200) { // = UTC-12:00
      secs += 97200;
    }
    while (secs > 50400) { // = UTC+14:00
      secs -= 97200;
    }

    this.fromSeconds(secs);

    // Avoid changing the factor when on zero seconds
    if (secs == 0) {
      this.factor = factor;
    }
  }

  /**
   * The iCalendar string representation of this utc-offset.
   * @return {String}
   */
  toICALString() {
    return design.icalendar.value['utc-offset'].toICAL(this.toString());
  }

  /**
   * The string representation of this utc-offset.
   * @return {String}
   */
  toString() {
    return (this.factor == 1 ? "+" : "-") + pad2(this.hours) + ':' + pad2(this.minutes);
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * Describes a vCard time, which has slight differences to the ICAL.Time.
 * Properties can be null if not specified, for example for dates with
 * reduced accuracy or truncation.
 *
 * Note that currently not all methods are correctly re-implemented for
 * VCardTime. For example, comparison will have undefined results when some
 * members are null.
 *
 * Also, normalization is not yet implemented for this class!
 *
 * @memberof ICAL
 * @extends {Time}
 */
class VCardTime extends Time {
  /**
   * Returns a new ICAL.VCardTime instance from a date and/or time string.
   *
   * @param {String} aValue     The string to create from
   * @param {String} aIcalType  The type for this instance, e.g. date-and-or-time
   * @return {VCardTime}        The date/time instance
   */
  static fromDateAndOrTimeString(aValue, aIcalType) {
    function part(v, s, e) {
      return v ? strictParseInt(v.slice(s, s + e)) : null;
    }
    let parts = aValue.split('T');
    let dt = parts[0], tmz = parts[1];
    let splitzone = tmz ? design.vcard.value.time._splitZone(tmz) : [];
    let zone = splitzone[0], tm = splitzone[1];

    let dtlen = dt ? dt.length : 0;
    let tmlen = tm ? tm.length : 0;

    let hasDashDate = dt && dt[0] == '-' && dt[1] == '-';
    let hasDashTime = tm && tm[0] == '-';

    let o = {
      year: hasDashDate ? null : part(dt, 0, 4),
      month: hasDashDate && (dtlen == 4 || dtlen == 7) ? part(dt, 2, 2) : dtlen == 7 ? part(dt, 5, 2) : dtlen == 10 ? part(dt, 5, 2) : null,
      day: dtlen == 5 ? part(dt, 3, 2) : dtlen == 7 && hasDashDate ? part(dt, 5, 2) : dtlen == 10 ? part(dt, 8, 2) : null,

      hour: hasDashTime ? null : part(tm, 0, 2),
      minute: hasDashTime && tmlen == 3 ? part(tm, 1, 2) : tmlen > 4 ? hasDashTime ? part(tm, 1, 2) : part(tm, 3, 2) : null,
      second: tmlen == 4 ? part(tm, 2, 2) : tmlen == 6 ? part(tm, 4, 2) : tmlen == 8 ? part(tm, 6, 2) : null
    };

    if (zone == 'Z') {
      zone = Timezone.utcTimezone;
    } else if (zone && zone[3] == ':') {
      zone = UtcOffset.fromString(zone);
    } else {
      zone = null;
    }

    return new VCardTime(o, zone, aIcalType);
  }


  /**
   * Creates a new ICAL.VCardTime instance.
   *
   * @param {Object} data                           The data for the time instance
   * @param {Number=} data.year                     The year for this date
   * @param {Number=} data.month                    The month for this date
   * @param {Number=} data.day                      The day for this date
   * @param {Number=} data.hour                     The hour for this date
   * @param {Number=} data.minute                   The minute for this date
   * @param {Number=} data.second                   The second for this date
   * @param {Timezone|UtcOffset} zone               The timezone to use
   * @param {String} icaltype                       The type for this date/time object
   */
  constructor(data, zone, icaltype) {
    super(data, zone);
    this.icaltype = icaltype || "date-and-or-time";
  }

  /**
   * The class identifier.
   * @constant
   * @type {String}
   * @default "vcardtime"
   */
  icalclass = "vcardtime";

  /**
   * The type name, to be used in the jCal object.
   * @type {String}
   * @default "date-and-or-time"
   */
  icaltype = "date-and-or-time";

  /**
   * Returns a clone of the vcard date/time object.
   *
   * @return {VCardTime}     The cloned object
   */
  clone() {
    return new VCardTime(this._time, this.zone, this.icaltype);
  }

  _normalize() {
    return this;
  }

  /**
   * @inheritdoc
   */
  utcOffset() {
    if (this.zone instanceof UtcOffset) {
      return this.zone.toSeconds();
    } else {
      return Time.prototype.utcOffset.apply(this, arguments);
    }
  }

  /**
   * Returns an RFC 6350 compliant representation of this object.
   *
   * @return {String}         vcard date/time string
   */
  toICALString() {
    return design.vcard.value[this.icaltype].toICAL(this.toString());
  }

  /**
   * The string representation of this date/time, in jCard form
   * (including : and - separators).
   * @return {String}
   */
  toString() {
    let y = this.year, m = this.month, d = this.day;
    let h = this.hour, mm = this.minute, s = this.second;

    let hasYear = y !== null, hasMonth = m !== null, hasDay = d !== null;
    let hasHour = h !== null, hasMinute = mm !== null, hasSecond = s !== null;

    let datepart = (hasYear ? pad2(y) + (hasMonth || hasDay ? '-' : '') : (hasMonth || hasDay ? '--' : '')) +
                   (hasMonth ? pad2(m) : '') +
                   (hasDay ? '-' + pad2(d) : '');
    let timepart = (hasHour ? pad2(h) : '-') + (hasHour && hasMinute ? ':' : '') +
                   (hasMinute ? pad2(mm) : '') + (!hasHour && !hasMinute ? '-' : '') +
                   (hasMinute && hasSecond ? ':' : '') +
                   (hasSecond ? pad2(s) : '');

    let zone;
    if (this.zone === Timezone.utcTimezone) {
      zone = 'Z';
    } else if (this.zone instanceof UtcOffset) {
      zone = this.zone.toString();
    } else if (this.zone === Timezone.localTimezone) {
      zone = '';
    } else if (this.zone instanceof Timezone) {
      let offset = UtcOffset.fromSeconds(this.zone.utcOffset(this));
      zone = offset.toString();
    } else {
      zone = '';
    }

    switch (this.icaltype) {
      case "time":
        return timepart + zone;
      case "date-and-or-time":
      case "date-time":
        return datepart + (timepart == '--' ? '' : 'T' + timepart + zone);
      case "date":
        return datepart;
    }
    return null;
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 *
 * @ignore
 * @typedef {import("./types.js").weekDay} weekDay
 * Imports the 'weekDay' type from the "types.js" module
 */

/**
 * An iterator for a single recurrence rule. This class usually doesn't have to be instanciated
 * directly, the convenience method {@link ICAL.Recur#iterator} can be used.
 *
 * @memberof ICAL
 */
class RecurIterator {
  static _indexMap = {
    "BYSECOND": 0,
    "BYMINUTE": 1,
    "BYHOUR": 2,
    "BYDAY": 3,
    "BYMONTHDAY": 4,
    "BYYEARDAY": 5,
    "BYWEEKNO": 6,
    "BYMONTH": 7,
    "BYSETPOS": 8
  };

  static _expandMap = {
    "SECONDLY": [1, 1, 1, 1, 1, 1, 1, 1],
    "MINUTELY": [2, 1, 1, 1, 1, 1, 1, 1],
    "HOURLY": [2, 2, 1, 1, 1, 1, 1, 1],
    "DAILY": [2, 2, 2, 1, 1, 1, 1, 1],
    "WEEKLY": [2, 2, 2, 2, 3, 3, 1, 1],
    "MONTHLY": [2, 2, 2, 2, 2, 3, 3, 1],
    "YEARLY": [2, 2, 2, 2, 2, 2, 2, 2]
  };

  static UNKNOWN = 0;
  static CONTRACT = 1;
  static EXPAND = 2;
  static ILLEGAL = 3;

  /**
   * Creates a new ICAL.RecurIterator instance. The options object may contain additional members
   * when resuming iteration from a previous run.
   *
   * @param {Object} options                The iterator options
   * @param {Recur} options.rule            The rule to iterate.
   * @param {Time} options.dtstart          The start date of the event.
   * @param {Boolean=} options.initialized  When true, assume that options are
   *        from a previously constructed iterator. Initialization will not be
   *        repeated.
   */
  constructor(options) {
    this.fromData(options);
  }

  /**
   * True when iteration is finished.
   * @type {Boolean}
   */
  completed = false;

  /**
   * The rule that is being iterated
   * @type {Recur}
   */
  rule = null;

  /**
   * The start date of the event being iterated.
   * @type {Time}
   */
  dtstart = null;

  /**
   * The last occurrence that was returned from the
   * {@link RecurIterator#next} method.
   * @type {Time}
   */
  last = null;

  /**
   * The sequence number from the occurrence
   * @type {Number}
   */
  occurrence_number = 0;

  /**
   * The indices used for the {@link ICAL.RecurIterator#by_data} object.
   * @type {Object}
   * @private
   */
  by_indices = null;

  /**
   * If true, the iterator has already been initialized
   * @type {Boolean}
   * @private
   */
  initialized = false;

  /**
   * The initializd by-data.
   * @type {Object}
   * @private
   */
  by_data = null;

  /**
   * The expanded yeardays
   * @type {Array}
   * @private
   */
  days = null;

  /**
   * The index in the {@link ICAL.RecurIterator#days} array.
   * @type {Number}
   * @private
   */
  days_index = 0;

  /**
   * Initialize the recurrence iterator from the passed data object. This
   * method is usually not called directly, you can initialize the iterator
   * through the constructor.
   *
   * @param {Object} options                The iterator options
   * @param {Recur} options.rule            The rule to iterate.
   * @param {Time} options.dtstart          The start date of the event.
   * @param {Boolean=} options.initialized  When true, assume that options are
   *        from a previously constructed iterator. Initialization will not be
   *        repeated.
   */
  fromData(options) {
    this.rule = formatClassType(options.rule, Recur);

    if (!this.rule) {
      throw new Error('iterator requires a (ICAL.Recur) rule');
    }

    this.dtstart = formatClassType(options.dtstart, Time);

    if (!this.dtstart) {
      throw new Error('iterator requires a (ICAL.Time) dtstart');
    }

    if (options.by_data) {
      this.by_data = options.by_data;
    } else {
      this.by_data = clone(this.rule.parts, true);
    }

    if (options.occurrence_number)
      this.occurrence_number = options.occurrence_number;

    this.days = options.days || [];
    if (options.last) {
      this.last = formatClassType(options.last, Time);
    }

    this.by_indices = options.by_indices;

    if (!this.by_indices) {
      this.by_indices = {
        "BYSECOND": 0,
        "BYMINUTE": 0,
        "BYHOUR": 0,
        "BYDAY": 0,
        "BYMONTH": 0,
        "BYWEEKNO": 0,
        "BYMONTHDAY": 0
      };
    }

    this.initialized = options.initialized || false;

    if (!this.initialized) {
      try {
        this.init();
      } catch (e) {
        if (e instanceof InvalidRecurrenceRuleError) {
          // Init may error if there are no possible recurrence instances from
          // the rule, but we don't want to bubble this error up. Instead, we
          // create an empty iterator.
          this.completed = true;
        } else {
          // Propagate other errors to consumers.
          throw e;
        }
      }
    }
  }

  /**
   * Initialize the iterator
   * @private
   */
  init() {
    this.initialized = true;
    this.last = this.dtstart.clone();
    let parts = this.by_data;

    if ("BYDAY" in parts) {
      // libical does this earlier when the rule is loaded, but we postpone to
      // now so we can preserve the original order.
      this.sort_byday_rules(parts.BYDAY);
    }

    // The BYYEARDAY may only appear with BYDAY
    if ("BYYEARDAY" in parts) {
      if ("BYMONTH" in parts || "BYWEEKNO" in parts ||
          "BYMONTHDAY" in parts) {
        throw new Error("Invalid BYYEARDAY rule");
      }
    }

    // BYWEEKNO and BYMONTHDAY rule parts may not both appear
    if ("BYWEEKNO" in parts && "BYMONTHDAY" in parts) {
      throw new Error("BYWEEKNO does not fit to BYMONTHDAY");
    }

    // For MONTHLY recurrences (FREQ=MONTHLY) neither BYYEARDAY nor
    // BYWEEKNO may appear.
    if (this.rule.freq == "MONTHLY" &&
        ("BYYEARDAY" in parts || "BYWEEKNO" in parts)) {
      throw new Error("For MONTHLY recurrences neither BYYEARDAY nor BYWEEKNO may appear");
    }

    // For WEEKLY recurrences (FREQ=WEEKLY) neither BYMONTHDAY nor
    // BYYEARDAY may appear.
    if (this.rule.freq == "WEEKLY" &&
        ("BYYEARDAY" in parts || "BYMONTHDAY" in parts)) {
      throw new Error("For WEEKLY recurrences neither BYMONTHDAY nor BYYEARDAY may appear");
    }

    // BYYEARDAY may only appear in YEARLY rules
    if (this.rule.freq != "YEARLY" && "BYYEARDAY" in parts) {
      throw new Error("BYYEARDAY may only appear in YEARLY rules");
    }

    this.last.second = this.setup_defaults("BYSECOND", "SECONDLY", this.dtstart.second);
    this.last.minute = this.setup_defaults("BYMINUTE", "MINUTELY", this.dtstart.minute);
    this.last.hour = this.setup_defaults("BYHOUR", "HOURLY", this.dtstart.hour);
    this.last.day = this.setup_defaults("BYMONTHDAY", "DAILY", this.dtstart.day);
    this.last.month = this.setup_defaults("BYMONTH", "MONTHLY", this.dtstart.month);

    if (this.rule.freq == "WEEKLY") {
      if ("BYDAY" in parts) {
        let [, dow] = this.ruleDayOfWeek(parts.BYDAY[0], this.rule.wkst);
        let wkdy = dow - this.last.dayOfWeek(this.rule.wkst);
        if ((this.last.dayOfWeek(this.rule.wkst) < dow && wkdy >= 0) || wkdy < 0) {
          // Initial time is after first day of BYDAY data
          this.last.day += wkdy;
        }
      } else {
        let dayName = Recur.numericDayToIcalDay(this.dtstart.dayOfWeek());
        parts.BYDAY = [dayName];
      }
    }

    if (this.rule.freq == "YEARLY") {
      // Some yearly recurrence rules may be specific enough to not actually
      // occur on a yearly basis, e.g. the 29th day of February or the fifth
      // Monday of a given month. The standard isn't clear on the intended
      // behavior in these cases, but `libical` at least will iterate until it
      // finds a matching year.
      // CAREFUL: Some rules may specify an occurrence that can never happen,
      // e.g. the first Monday of April so long as it falls on the 15th
      // through the 21st. Detecting these is non-trivial, so ensure that we
      // stop iterating at some point.
      const untilYear = this.rule.until ? this.rule.until.year : 20000;
      while (this.last.year <= untilYear) {
        this.expand_year_days(this.last.year);
        if (this.days.length > 0) {
          break;
        }
        this.increment_year(this.rule.interval);
      }

      if (this.days.length == 0) {
        throw new InvalidRecurrenceRuleError();
      }

      // If there's no occurrence in this year, try the following years. This
      // would only happen looking for day 366 or -366.
      if (!this._nextByYearDay() && !this.next_year() && !this.next_year() && !this.next_year()) {
        // This should not be possible, but just in case it is, stop.
        throw new InvalidRecurrenceRuleError();
      }
    }

    if (this.rule.freq == "MONTHLY") {
      if (this.has_by_data("BYDAY")) {
        let tempLast = null;
        let initLast = this.last.clone();
        let daysInMonth = Time.daysInMonth(this.last.month, this.last.year);

        // Check every weekday in BYDAY with relative dow and pos.
        for (let bydow of this.by_data.BYDAY) {
          this.last = initLast.clone();
          let [pos, dow] = this.ruleDayOfWeek(bydow);
          let dayOfMonth = this.last.nthWeekDay(dow, pos);

          // If |pos| >= 6, the byday is invalid for a monthly rule.
          if (pos >= 6 || pos <= -6) {
            throw new Error("Malformed values in BYDAY part");
          }

          // If a Byday with pos=+/-5 is not in the current month it
          // must be searched in the next months.
          if (dayOfMonth > daysInMonth || dayOfMonth <= 0) {
            // Skip if we have already found a "last" in this month.
            if (tempLast && tempLast.month == initLast.month) {
              continue;
            }
            while (dayOfMonth > daysInMonth || dayOfMonth <= 0) {
              this.increment_month();
              daysInMonth = Time.daysInMonth(this.last.month, this.last.year);
              dayOfMonth = this.last.nthWeekDay(dow, pos);
            }
          }

          this.last.day = dayOfMonth;
          if (!tempLast || this.last.compare(tempLast) < 0) {
            tempLast = this.last.clone();
          }
        }
        this.last = tempLast.clone();

        //XXX: This feels like a hack, but we need to initialize
        //     the BYMONTHDAY case correctly and byDayAndMonthDay handles
        //     this case. It accepts a special flag which will avoid incrementing
        //     the initial value without the flag days that match the start time
        //     would be missed.
        if (this.has_by_data('BYMONTHDAY')) {
          this._byDayAndMonthDay(true);
        }

        if (this.last.day > daysInMonth || this.last.day == 0) {
          throw new Error("Malformed values in BYDAY part");
        }
      } else if (this.has_by_data("BYMONTHDAY")) {
        // Change the day value so that normalisation won't change the month.
        this.last.day = 1;

        // Get a sorted list of days in the starting month that match the rule.
        let normalized = this.normalizeByMonthDayRules(
          this.last.year,
          this.last.month,
          this.rule.parts.BYMONTHDAY
        ).filter(d => d >= this.last.day);

        if (normalized.length) {
          // There's at least one valid day, use it.
          this.last.day = normalized[0];
          this.by_data.BYMONTHDAY = normalized;
        } else {
          // There's no occurrence in this month, find the next valid month.
          // The longest possible sequence of skipped months is February-April-June,
          // so we might need to call next_month up to three times.
          if (!this.next_month() && !this.next_month() && !this.next_month()) {
            throw new InvalidRecurrenceRuleError();
          }
        }
      }
    }
  }

  /**
   * Retrieve the next occurrence from the iterator.
   * @return {Time}
   */
  next(again = false) {
    let before = (this.last ? this.last.clone() : null);

    if ((this.rule.count && this.occurrence_number >= this.rule.count) ||
        (this.rule.until && this.last.compare(this.rule.until) > 0)) {
      this.completed = true;
    }

    if (this.completed) {
      return null;
    }

    if (this.occurrence_number == 0 && this.last.compare(this.dtstart) >= 0) {
      // First of all, give the instance that was initialized
      this.occurrence_number++;
      return this.last;
    }

    let valid;
    let invalid_count = 0;
    do {
      valid = 1;

      switch (this.rule.freq) {
      case "SECONDLY":
        this.next_second();
        break;
      case "MINUTELY":
        this.next_minute();
        break;
      case "HOURLY":
        this.next_hour();
        break;
      case "DAILY":
        this.next_day();
        break;
      case "WEEKLY":
        this.next_week();
        break;
      case "MONTHLY":
        valid = this.next_month();
        if (valid) {
          invalid_count = 0;
        } else if (++invalid_count == 336) {
          // We've been through all 91 month variations and not found a recurrence. Stop.
          // (12 months and 29-day February √ó 7 starting days.)
          this.completed = true;
          return null;
        }
        break;
      case "YEARLY":
        valid = this.next_year();
        if (valid) {
          invalid_count = 0;
        } else if (++invalid_count == 28) {
          // We've been through all 14 year variations and not found a recurrence. Stop.
          // (365-day and 366-day years √ó 7 starting days.)
          this.completed = true;
          return null;
        }
        break;

      default:
        return null;
      }
    } while (!this.check_contracting_rules() ||
             this.last.compare(this.dtstart) < 0 ||
             !valid);

    if (this.last.compare(before) == 0) {
      if (again) {
        throw new Error("Same occurrence found twice, protecting you from death by recursion");
      }
      this.next(true);
    }

    if (this.rule.until && this.last.compare(this.rule.until) > 0) {
      this.completed = true;
      return null;
    } else {
      this.occurrence_number++;
      return this.last;
    }
  }

  next_second() {
    return this.next_generic("BYSECOND", "SECONDLY", "second", "minute");
  }

  increment_second(inc) {
    return this.increment_generic(inc, "second", 60, "minute");
  }

  next_minute() {
    return this.next_generic("BYMINUTE", "MINUTELY",
                             "minute", "hour", "next_second");
  }

  increment_minute(inc) {
    return this.increment_generic(inc, "minute", 60, "hour");
  }

  next_hour() {
    return this.next_generic("BYHOUR", "HOURLY", "hour",
                             "monthday", "next_minute");
  }

  increment_hour(inc) {
    this.increment_generic(inc, "hour", 24, "monthday");
  }

  next_day() {
    let this_freq = (this.rule.freq == "DAILY");

    if (this.next_hour() == 0) {
      return 0;
    }

    if (this_freq) {
      this.increment_monthday(this.rule.interval);
    } else {
      this.increment_monthday(1);
    }

    return 0;
  }

  next_week() {
    let end_of_data = 0;

    if (this.next_weekday_by_week() == 0) {
      return end_of_data;
    }

    if (this.has_by_data("BYWEEKNO")) {
      this.by_indices.BYWEEKNO++;

      if (this.by_indices.BYWEEKNO == this.by_data.BYWEEKNO.length) {
        this.by_indices.BYWEEKNO = 0;
        end_of_data = 1;
      }

      // HACK should be first month of the year
      this.last.month = 1;
      this.last.day = 1;

      let week_no = this.by_data.BYWEEKNO[this.by_indices.BYWEEKNO];

      this.last.day += 7 * week_no;

      if (end_of_data) {
        this.increment_year(1);
      }
    } else {
      // Jump to the next week
      this.increment_monthday(7 * this.rule.interval);
    }

    return end_of_data;
  }

  /**
   * Normalize each by day rule for a given year/month.
   * Takes into account ordering and negative rules
   *
   * @private
   * @param {Number} year         Current year.
   * @param {Number} month        Current month.
   * @param {Array}  rules        Array of rules.
   *
   * @return {Array} sorted and normalized rules.
   *                 Negative rules will be expanded to their
   *                 correct positive values for easier processing.
   */
  normalizeByMonthDayRules(year, month, rules) {
    let daysInMonth = Time.daysInMonth(month, year);

    // XXX: This is probably bad for performance to allocate
    //      a new array for each month we scan, if possible
    //      we should try to optimize this...
    let newRules = [];

    let ruleIdx = 0;
    let len = rules.length;
    let rule;

    for (; ruleIdx < len; ruleIdx++) {
      rule = parseInt(rules[ruleIdx], 10);
      if (isNaN(rule)) {
        throw new Error('Invalid BYMONTHDAY value');
      }

      // if this rule falls outside of given
      // month discard it.
      if (Math.abs(rule) > daysInMonth) {
        continue;
      }

      // negative case
      if (rule < 0) {
        // we add (not subtract it is a negative number)
        // one from the rule because 1 === last day of month
        rule = daysInMonth + (rule + 1);
      } else if (rule === 0) {
        // skip zero: it is invalid.
        continue;
      }

      // only add unique items...
      if (newRules.indexOf(rule) === -1) {
        newRules.push(rule);
      }

    }

    // unique and sort
    return newRules.sort(function(a, b) { return a - b; });
  }

  /**
   * NOTES:
   * We are given a list of dates in the month (BYMONTHDAY) (23, etc..)
   * Also we are given a list of days (BYDAY) (MO, 2SU, etc..) when
   * both conditions match a given date (this.last.day) iteration stops.
   *
   * @private
   * @param {Boolean=} isInit     When given true will not increment the
   *                                current day (this.last).
   */
  _byDayAndMonthDay(isInit) {
    let byMonthDay; // setup in initMonth
    let byDay = this.by_data.BYDAY;

    let date;
    let dateIdx = 0;
    let dateLen; // setup in initMonth
    let dayLen = byDay.length;

    // we are not valid by default
    let dataIsValid = 0;

    let daysInMonth;
    let self = this;
    // we need a copy of this, because a DateTime gets normalized
    // automatically if the day is out of range. At some points we
    // set the last day to 0 to start counting.
    let lastDay = this.last.day;

    function initMonth() {
      daysInMonth = Time.daysInMonth(
        self.last.month, self.last.year
      );

      byMonthDay = self.normalizeByMonthDayRules(
        self.last.year,
        self.last.month,
        self.by_data.BYMONTHDAY
      );

      dateLen = byMonthDay.length;

      // For the case of more than one occurrence in one month
      // we have to be sure to start searching after the last
      // found date or at the last BYMONTHDAY, unless we are
      // initializing the iterator because in this case we have
      // to consider the last found date too.
      while (byMonthDay[dateIdx] <= lastDay &&
             !(isInit && byMonthDay[dateIdx] == lastDay) &&
             dateIdx < dateLen - 1) {
        dateIdx++;
      }
    }

    function nextMonth() {
      // since the day is incremented at the start
      // of the loop below, we need to start at 0
      lastDay = 0;
      self.increment_month();
      dateIdx = 0;
      initMonth();
    }

    initMonth();

    // should come after initMonth
    if (isInit) {
      lastDay -= 1;
    }

    // Use a counter to avoid an infinite loop with malformed rules.
    // Stop checking after 4 years so we consider also a leap year.
    let monthsCounter = 48;

    while (!dataIsValid && monthsCounter) {
      monthsCounter--;
      // increment the current date. This is really
      // important otherwise we may fall into the infinite
      // loop trap. The initial date takes care of the case
      // where the current date is the date we are looking
      // for.
      date = lastDay + 1;

      if (date > daysInMonth) {
        nextMonth();
        continue;
      }

      // find next date
      let next = byMonthDay[dateIdx++];

      // this logic is dependent on the BYMONTHDAYS
      // being in order (which is done by #normalizeByMonthDayRules)
      if (next >= date) {
        // if the next month day is in the future jump to it.
        lastDay = next;
      } else {
        // in this case the 'next' monthday has past
        // we must move to the month.
        nextMonth();
        continue;
      }

      // Now we can loop through the day rules to see
      // if one matches the current month date.
      for (let dayIdx = 0; dayIdx < dayLen; dayIdx++) {
        let parts = this.ruleDayOfWeek(byDay[dayIdx]);
        let pos = parts[0];
        let dow = parts[1];

        this.last.day = lastDay;
        if (this.last.isNthWeekDay(dow, pos)) {
          // when we find the valid one we can mark
          // the conditions as met and break the loop.
          // (Because we have this condition above
          //  it will also break the parent loop).
          dataIsValid = 1;
          break;
        }
      }

      // It is completely possible that the combination
      // cannot be matched in the current month.
      // When we reach the end of possible combinations
      // in the current month we iterate to the next one.
      // since dateIdx is incremented right after getting
      // "next", we don't need dateLen -1 here.
      if (!dataIsValid && dateIdx === dateLen) {
        nextMonth();
        continue;
      }
    }

    if (monthsCounter <= 0) {
      // Checked 4 years without finding a Byday that matches
      // a Bymonthday. Maybe the rule is not correct.
      throw new Error("Malformed values in BYDAY combined with BYMONTHDAY parts");
    }


    return dataIsValid;
  }

  next_month() {
    let data_valid = 1;

    if (this.next_hour() == 0) {
      return data_valid;
    }

    if (this.has_by_data("BYDAY") && this.has_by_data("BYMONTHDAY")) {
      data_valid = this._byDayAndMonthDay();
    } else if (this.has_by_data("BYDAY")) {
      let daysInMonth = Time.daysInMonth(this.last.month, this.last.year);
      let setpos = 0;
      let setpos_total = 0;

      if (this.has_by_data("BYSETPOS")) {
        let last_day = this.last.day;
        for (let day = 1; day <= daysInMonth; day++) {
          this.last.day = day;
          if (this.is_day_in_byday(this.last)) {
            setpos_total++;
            if (day <= last_day) {
              setpos++;
            }
          }
        }
        this.last.day = last_day;
      }

      data_valid = 0;
      let day;
      for (day = this.last.day + 1; day <= daysInMonth; day++) {
        this.last.day = day;

        if (this.is_day_in_byday(this.last)) {
          if (!this.has_by_data("BYSETPOS") ||
              this.check_set_position(++setpos) ||
              this.check_set_position(setpos - setpos_total - 1)) {

            data_valid = 1;
            break;
          }
        }
      }

      if (day > daysInMonth) {
        this.last.day = 1;
        this.increment_month();

        if (this.is_day_in_byday(this.last)) {
          if (!this.has_by_data("BYSETPOS") || this.check_set_position(1)) {
            data_valid = 1;
          }
        } else {
          data_valid = 0;
        }
      }
    } else if (this.has_by_data("BYMONTHDAY")) {
      this.by_indices.BYMONTHDAY++;

      if (this.by_indices.BYMONTHDAY >= this.by_data.BYMONTHDAY.length) {
        this.by_indices.BYMONTHDAY = 0;
        this.increment_month();
        if (this.by_indices.BYMONTHDAY >= this.by_data.BYMONTHDAY.length) {
          return 0;
        }
      }

      let daysInMonth = Time.daysInMonth(this.last.month, this.last.year);
      let day = this.by_data.BYMONTHDAY[this.by_indices.BYMONTHDAY];

      if (day < 0) {
        day = daysInMonth + day + 1;
      }

      if (day > daysInMonth) {
        this.last.day = 1;
        data_valid = this.is_day_in_byday(this.last);
      } else {
        this.last.day = day;
      }
    } else {
      this.increment_month();
      let daysInMonth = Time.daysInMonth(this.last.month, this.last.year);
      if (this.by_data.BYMONTHDAY[0] > daysInMonth) {
        data_valid = 0;
      } else {
        this.last.day = this.by_data.BYMONTHDAY[0];
      }
    }

    return data_valid;
  }

  next_weekday_by_week() {
    let end_of_data = 0;

    if (this.next_hour() == 0) {
      return end_of_data;
    }

    if (!this.has_by_data("BYDAY")) {
      return 1;
    }

    for (;;) {
      let tt = new Time();
      this.by_indices.BYDAY++;

      if (this.by_indices.BYDAY == Object.keys(this.by_data.BYDAY).length) {
        this.by_indices.BYDAY = 0;
        end_of_data = 1;
      }

      let coded_day = this.by_data.BYDAY[this.by_indices.BYDAY];
      let parts = this.ruleDayOfWeek(coded_day);
      let dow = parts[1];

      dow -= this.rule.wkst;

      if (dow < 0) {
        dow += 7;
      }

      tt.year = this.last.year;
      tt.month = this.last.month;
      tt.day = this.last.day;

      let startOfWeek = tt.startDoyWeek(this.rule.wkst);

      if (dow + startOfWeek < 1) {
        // The selected date is in the previous year
        if (!end_of_data) {
          continue;
        }
      }

      let next = Time.fromDayOfYear(startOfWeek + dow, this.last.year);

      /**
       * The normalization horrors below are due to
       * the fact that when the year/month/day changes
       * it can effect the other operations that come after.
       */
      this.last.year = next.year;
      this.last.month = next.month;
      this.last.day = next.day;

      return end_of_data;
    }
  }

  next_year() {
    if (this.next_hour() == 0) {
      return 0;
    }

    if (this.days.length == 0 || ++this.days_index == this.days.length) {
      this.days_index = 0;
      this.increment_year(this.rule.interval);
      if (this.has_by_data("BYMONTHDAY")) {
        this.by_data.BYMONTHDAY = this.normalizeByMonthDayRules(
          this.last.year,
          this.last.month,
          this.rule.parts.BYMONTHDAY
        );
      }
      this.expand_year_days(this.last.year);
      if (this.days.length == 0) {
        return 0;
      }
    }

    return this._nextByYearDay();
  }

  _nextByYearDay() {
    let doy = this.days[this.days_index];
    let year = this.last.year;

    if (Math.abs(doy) == 366 && !Time.isLeapYear(this.last.year)) {
      return 0;
    }

    if (doy < 1) {
        // Time.fromDayOfYear(doy, year) indexes relative to the
        // start of the given year. That is different from the
        // semantics of BYYEARDAY where negative indexes are an
        // offset from the end of the given year.
        doy += 1;
        year += 1;
    }
    let next = Time.fromDayOfYear(doy, year);
    this.last.day = next.day;
    this.last.month = next.month;

    return 1;
  }

  /**
   * @param dow (eg: '1TU', '-1MO')
   * @param {weekDay=} aWeekStart The week start weekday
   * @return [pos, numericDow] (eg: [1, 3]) numericDow is relative to aWeekStart
   */
  ruleDayOfWeek(dow, aWeekStart) {
    let matches = dow.match(/([+-]?[0-9])?(MO|TU|WE|TH|FR|SA|SU)/);
    if (matches) {
      let pos = parseInt(matches[1] || 0, 10);
      dow = Recur.icalDayToNumericDay(matches[2], aWeekStart);
      return [pos, dow];
    } else {
      return [0, 0];
    }
  }

  next_generic(aRuleType, aInterval, aDateAttr, aFollowingAttr, aPreviousIncr) {
    let has_by_rule = (aRuleType in this.by_data);
    let this_freq = (this.rule.freq == aInterval);
    let end_of_data = 0;

    if (aPreviousIncr && this[aPreviousIncr]() == 0) {
      return end_of_data;
    }

    if (has_by_rule) {
      this.by_indices[aRuleType]++;
      let dta = this.by_data[aRuleType];

      if (this.by_indices[aRuleType] == dta.length) {
        this.by_indices[aRuleType] = 0;
        end_of_data = 1;
      }
      this.last[aDateAttr] = dta[this.by_indices[aRuleType]];
    } else if (this_freq) {
      this["increment_" + aDateAttr](this.rule.interval);
    }

    if (has_by_rule && end_of_data && this_freq) {
      this["increment_" + aFollowingAttr](1);
    }

    return end_of_data;
  }

  increment_monthday(inc) {
    for (let i = 0; i < inc; i++) {
      let daysInMonth = Time.daysInMonth(this.last.month, this.last.year);
      this.last.day++;

      if (this.last.day > daysInMonth) {
        this.last.day -= daysInMonth;
        this.increment_month();
      }
    }
  }

  increment_month() {
    this.last.day = 1;
    if (this.has_by_data("BYMONTH")) {
      this.by_indices.BYMONTH++;

      if (this.by_indices.BYMONTH == this.by_data.BYMONTH.length) {
        this.by_indices.BYMONTH = 0;
        this.increment_year(1);
      }

      this.last.month = this.by_data.BYMONTH[this.by_indices.BYMONTH];
    } else {
      if (this.rule.freq == "MONTHLY") {
        this.last.month += this.rule.interval;
      } else {
        this.last.month++;
      }

      this.last.month--;
      let years = trunc(this.last.month / 12);
      this.last.month %= 12;
      this.last.month++;

      if (years != 0) {
        this.increment_year(years);
      }
    }

    if (this.has_by_data("BYMONTHDAY")) {
      this.by_data.BYMONTHDAY = this.normalizeByMonthDayRules(
        this.last.year,
        this.last.month,
        this.rule.parts.BYMONTHDAY
      );
    }
  }

  increment_year(inc) {
    // Don't jump into the next month if this.last is Feb 29.
    this.last.day = 1;
    this.last.year += inc;
  }

  increment_generic(inc, aDateAttr, aFactor, aNextIncrement) {
    this.last[aDateAttr] += inc;
    let nextunit = trunc(this.last[aDateAttr] / aFactor);
    this.last[aDateAttr] %= aFactor;
    if (nextunit != 0) {
      this["increment_" + aNextIncrement](nextunit);
    }
  }

  has_by_data(aRuleType) {
    return (aRuleType in this.rule.parts);
  }

  expand_year_days(aYear) {
    let t = new Time();
    this.days = [];

    // We need our own copy with a few keys set
    let parts = {};
    let rules = ["BYDAY", "BYWEEKNO", "BYMONTHDAY", "BYMONTH", "BYYEARDAY"];
    for (let part of rules) {
      if (part in this.rule.parts) {
        parts[part] = this.rule.parts[part];
      }
    }

    if ("BYMONTH" in parts && "BYWEEKNO" in parts) {
      let valid = 1;
      let validWeeks = {};
      t.year = aYear;
      t.isDate = true;

      for (let monthIdx = 0; monthIdx < this.by_data.BYMONTH.length; monthIdx++) {
        let month = this.by_data.BYMONTH[monthIdx];
        t.month = month;
        t.day = 1;
        let first_week = t.weekNumber(this.rule.wkst);
        t.day = Time.daysInMonth(month, aYear);
        let last_week = t.weekNumber(this.rule.wkst);
        for (monthIdx = first_week; monthIdx < last_week; monthIdx++) {
          validWeeks[monthIdx] = 1;
        }
      }

      for (let weekIdx = 0; weekIdx < this.by_data.BYWEEKNO.length && valid; weekIdx++) {
        let weekno = this.by_data.BYWEEKNO[weekIdx];
        if (weekno < 52) {
          valid &= validWeeks[weekIdx];
        } else {
          valid = 0;
        }
      }

      if (valid) {
        delete parts.BYMONTH;
      } else {
        delete parts.BYWEEKNO;
      }
    }

    let partCount = Object.keys(parts).length;

    if (partCount == 0) {
      let t1 = this.dtstart.clone();
      t1.year = this.last.year;
      this.days.push(t1.dayOfYear());
    } else if (partCount == 1 && "BYMONTH" in parts) {
      for (let month of this.by_data.BYMONTH) {
        let t2 = this.dtstart.clone();
        t2.year = aYear;
        t2.month = month;
        t2.isDate = true;
        this.days.push(t2.dayOfYear());
      }
    } else if (partCount == 1 && "BYMONTHDAY" in parts) {
      for (let monthday of this.by_data.BYMONTHDAY) {
        let t3 = this.dtstart.clone();
        if (monthday < 0) {
          let daysInMonth = Time.daysInMonth(t3.month, aYear);
          monthday = monthday + daysInMonth + 1;
        }
        t3.day = monthday;
        t3.year = aYear;
        t3.isDate = true;
        this.days.push(t3.dayOfYear());
      }
    } else if (partCount == 2 &&
               "BYMONTHDAY" in parts &&
               "BYMONTH" in parts) {
      for (let month of this.by_data.BYMONTH) {
        let daysInMonth = Time.daysInMonth(month, aYear);
        for (let monthday of this.by_data.BYMONTHDAY) {
          if (monthday < 0) {
            monthday = monthday + daysInMonth + 1;
          }
          t.day = monthday;
          t.month = month;
          t.year = aYear;
          t.isDate = true;

          this.days.push(t.dayOfYear());
        }
      }
    } else if (partCount == 1 && "BYWEEKNO" in parts) ; else if (partCount == 2 &&
               "BYWEEKNO" in parts &&
               "BYMONTHDAY" in parts) ; else if (partCount == 1 && "BYDAY" in parts) {
      this.days = this.days.concat(this.expand_by_day(aYear));
    } else if (partCount == 2 && "BYDAY" in parts && "BYMONTH" in parts) {
      for (let month of this.by_data.BYMONTH) {
        let daysInMonth = Time.daysInMonth(month, aYear);

        t.year = aYear;
        t.month = month;
        t.day = 1;
        t.isDate = true;

        let first_dow = t.dayOfWeek();
        let doy_offset = t.dayOfYear() - 1;

        t.day = daysInMonth;
        let last_dow = t.dayOfWeek();

        if (this.has_by_data("BYSETPOS")) {
          let by_month_day = [];
          for (let day = 1; day <= daysInMonth; day++) {
            t.day = day;
            if (this.is_day_in_byday(t)) {
              by_month_day.push(day);
            }
          }

          for (let spIndex = 0; spIndex < by_month_day.length; spIndex++) {
            if (this.check_set_position(spIndex + 1) ||
                this.check_set_position(spIndex - by_month_day.length)) {
              this.days.push(doy_offset + by_month_day[spIndex]);
            }
          }
        } else {
          for (let coded_day of this.by_data.BYDAY) {
            let bydayParts = this.ruleDayOfWeek(coded_day);
            let pos = bydayParts[0];
            let dow = bydayParts[1];
            let month_day;

            let first_matching_day = ((dow + 7 - first_dow) % 7) + 1;
            let last_matching_day = daysInMonth - ((last_dow + 7 - dow) % 7);

            if (pos == 0) {
              for (let day = first_matching_day; day <= daysInMonth; day += 7) {
                this.days.push(doy_offset + day);
              }
            } else if (pos > 0) {
              month_day = first_matching_day + (pos - 1) * 7;

              if (month_day <= daysInMonth) {
                this.days.push(doy_offset + month_day);
              }
            } else {
              month_day = last_matching_day + (pos + 1) * 7;

              if (month_day > 0) {
                this.days.push(doy_offset + month_day);
              }
            }
          }
        }
      }
      // Return dates in order of occurrence (1,2,3,...) instead
      // of by groups of weekdays (1,8,15,...,2,9,16,...).
      this.days.sort(function(a, b) { return a - b; }); // Comparator function allows to sort numbers.
    } else if (partCount == 2 && "BYDAY" in parts && "BYMONTHDAY" in parts) {
      let expandedDays = this.expand_by_day(aYear);

      for (let day of expandedDays) {
        let tt = Time.fromDayOfYear(day, aYear);
        if (this.by_data.BYMONTHDAY.indexOf(tt.day) >= 0) {
          this.days.push(day);
        }
      }
    } else if (partCount == 3 &&
               "BYDAY" in parts &&
               "BYMONTHDAY" in parts &&
               "BYMONTH" in parts) {
      let expandedDays = this.expand_by_day(aYear);

      for (let day of expandedDays) {
        let tt = Time.fromDayOfYear(day, aYear);

        if (this.by_data.BYMONTH.indexOf(tt.month) >= 0 &&
            this.by_data.BYMONTHDAY.indexOf(tt.day) >= 0) {
          this.days.push(day);
        }
      }
    } else if (partCount == 2 && "BYDAY" in parts && "BYWEEKNO" in parts) {
      let expandedDays = this.expand_by_day(aYear);

      for (let day of expandedDays) {
        let tt = Time.fromDayOfYear(day, aYear);
        let weekno = tt.weekNumber(this.rule.wkst);

        if (this.by_data.BYWEEKNO.indexOf(weekno)) {
          this.days.push(day);
        }
      }
    } else if (partCount == 3 &&
               "BYDAY" in parts &&
               "BYWEEKNO" in parts &&
               "BYMONTHDAY" in parts) ; else if (partCount == 1 && "BYYEARDAY" in parts) {
      this.days = this.days.concat(this.by_data.BYYEARDAY);
    } else if (partCount == 2 && "BYYEARDAY" in parts && "BYDAY" in parts) {
      let daysInYear = Time.isLeapYear(aYear) ? 366 : 365;
      let expandedDays = new Set(this.expand_by_day(aYear));

      for (let doy of this.by_data.BYYEARDAY) {
        if (doy < 0) {
          doy += daysInYear + 1;
        }

        if (expandedDays.has(doy)) {
          this.days.push(doy);
        }
      }
    } else {
      this.days = [];
    }

    let daysInYear = Time.isLeapYear(aYear) ? 366 : 365;
    this.days.sort((a, b) => {
      if (a < 0) a += daysInYear + 1;
      if (b < 0) b += daysInYear + 1;
      return a - b;
    });

    return 0;
  }

  expand_by_day(aYear) {

    let days_list = [];
    let tmp = this.last.clone();

    tmp.year = aYear;
    tmp.month = 1;
    tmp.day = 1;
    tmp.isDate = true;

    let start_dow = tmp.dayOfWeek();

    tmp.month = 12;
    tmp.day = 31;
    tmp.isDate = true;

    let end_dow = tmp.dayOfWeek();
    let end_year_day = tmp.dayOfYear();

    for (let day of this.by_data.BYDAY) {
      let parts = this.ruleDayOfWeek(day);
      let pos = parts[0];
      let dow = parts[1];

      if (pos == 0) {
        let tmp_start_doy = ((dow + 7 - start_dow) % 7) + 1;

        for (let doy = tmp_start_doy; doy <= end_year_day; doy += 7) {
          days_list.push(doy);
        }

      } else if (pos > 0) {
        let first;
        if (dow >= start_dow) {
          first = dow - start_dow + 1;
        } else {
          first = dow - start_dow + 8;
        }

        days_list.push(first + (pos - 1) * 7);
      } else {
        let last;
        pos = -pos;

        if (dow <= end_dow) {
          last = end_year_day - end_dow + dow;
        } else {
          last = end_year_day - end_dow + dow - 7;
        }

        days_list.push(last - (pos - 1) * 7);
      }
    }
    return days_list;
  }

  is_day_in_byday(tt) {
    if (this.by_data.BYDAY) {
      for (let day of this.by_data.BYDAY) {
        let parts = this.ruleDayOfWeek(day);
        let pos = parts[0];
        let dow = parts[1];
        let this_dow = tt.dayOfWeek();

        if ((pos == 0 && dow == this_dow) ||
            (tt.nthWeekDay(dow, pos) == tt.day)) {
          return 1;
        }
      }
    }

    return 0;
  }

  /**
   * Checks if given value is in BYSETPOS.
   *
   * @private
   * @param {Numeric} aPos position to check for.
   * @return {Boolean} false unless BYSETPOS rules exist
   *                   and the given value is present in rules.
   */
  check_set_position(aPos) {
    if (this.has_by_data('BYSETPOS')) {
      let idx = this.by_data.BYSETPOS.indexOf(aPos);
      // negative numbers are not false-y
      return idx !== -1;
    }
    return false;
  }

  sort_byday_rules(aRules) {
    for (let i = 0; i < aRules.length; i++) {
      for (let j = 0; j < i; j++) {
        let one = this.ruleDayOfWeek(aRules[j], this.rule.wkst)[1];
        let two = this.ruleDayOfWeek(aRules[i], this.rule.wkst)[1];

        if (one > two) {
          let tmp = aRules[i];
          aRules[i] = aRules[j];
          aRules[j] = tmp;
        }
      }
    }
  }

  check_contract_restriction(aRuleType, v) {
    let indexMapValue = RecurIterator._indexMap[aRuleType];
    let ruleMapValue = RecurIterator._expandMap[this.rule.freq][indexMapValue];
    let pass = false;

    if (aRuleType in this.by_data &&
        ruleMapValue == RecurIterator.CONTRACT) {

      let ruleType = this.by_data[aRuleType];

      for (let bydata of ruleType) {
        if (bydata == v) {
          pass = true;
          break;
        }
      }
    } else {
      // Not a contracting byrule or has no data, test passes
      pass = true;
    }
    return pass;
  }

  check_contracting_rules() {
    let dow = this.last.dayOfWeek();
    let weekNo = this.last.weekNumber(this.rule.wkst);
    let doy = this.last.dayOfYear();

    return (this.check_contract_restriction("BYSECOND", this.last.second) &&
            this.check_contract_restriction("BYMINUTE", this.last.minute) &&
            this.check_contract_restriction("BYHOUR", this.last.hour) &&
            this.check_contract_restriction("BYDAY", Recur.numericDayToIcalDay(dow)) &&
            this.check_contract_restriction("BYWEEKNO", weekNo) &&
            this.check_contract_restriction("BYMONTHDAY", this.last.day) &&
            this.check_contract_restriction("BYMONTH", this.last.month) &&
            this.check_contract_restriction("BYYEARDAY", doy));
  }

  setup_defaults(aRuleType, req, deftime) {
    let indexMapValue = RecurIterator._indexMap[aRuleType];
    let ruleMapValue = RecurIterator._expandMap[this.rule.freq][indexMapValue];

    if (ruleMapValue != RecurIterator.CONTRACT) {
      if (!(aRuleType in this.by_data)) {
        this.by_data[aRuleType] = [deftime];
      }
      if (this.rule.freq != req) {
        return this.by_data[aRuleType][0];
      }
    }
    return deftime;
  }

  /**
   * Convert iterator into a serialize-able object.  Will preserve current
   * iteration sequence to ensure the seamless continuation of the recurrence
   * rule.
   * @return {Object}
   */
  toJSON() {
    let result = Object.create(null);

    result.initialized = this.initialized;
    result.rule = this.rule.toJSON();
    result.dtstart = this.dtstart.toJSON();
    result.by_data = this.by_data;
    result.days = this.days;
    result.last = this.last.toJSON();
    result.by_indices = this.by_indices;
    result.occurrence_number = this.occurrence_number;

    return result;
  }
}

/**
 * An error indicating that a recurrence rule is invalid and produces no
 * occurrences.
 *
 * @extends {Error}
 * @class
 */
class InvalidRecurrenceRuleError extends Error {
  constructor() {
    super("Recurrence rule has no valid occurrences");
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 *
 * @ignore
 * @typedef {import("./types.js").weekDay} weekDay
 * Imports the 'weekDay' type from the "types.js" module
 * @typedef {import("./types.js").frequencyValues} frequencyValues
 * Imports the 'frequencyValues' type from the "types.js" module
 */

const VALID_DAY_NAMES = /^(SU|MO|TU|WE|TH|FR|SA)$/;
const VALID_BYDAY_PART = /^([+-])?(5[0-3]|[1-4][0-9]|[1-9])?(SU|MO|TU|WE|TH|FR|SA)$/;
const DOW_MAP = {
  SU: Time.SUNDAY,
  MO: Time.MONDAY,
  TU: Time.TUESDAY,
  WE: Time.WEDNESDAY,
  TH: Time.THURSDAY,
  FR: Time.FRIDAY,
  SA: Time.SATURDAY
};

const REVERSE_DOW_MAP = Object.fromEntries(Object.entries(DOW_MAP).map(entry => entry.reverse()));

const ALLOWED_FREQ = ['SECONDLY', 'MINUTELY', 'HOURLY',
                      'DAILY', 'WEEKLY', 'MONTHLY', 'YEARLY'];

/**
 * This class represents the "recur" value type, used for example by RRULE. It provides methods to
 * calculate occurrences among others.
 *
 * @memberof ICAL
 */
class Recur {
  /**
   * Creates a new {@link ICAL.Recur} instance from the passed string.
   *
   * @param {String} string         The string to parse
   * @return {Recur}                The created recurrence instance
   */
  static fromString(string) {
    let data = this._stringToData(string, false);
    return new Recur(data);
  }

  /**
   * Creates a new {@link ICAL.Recur} instance using members from the passed
   * data object.
   *
   * @param {Object} aData                              An object with members of the recurrence
   * @param {frequencyValues=} aData.freq               The frequency value
   * @param {Number=} aData.interval                    The INTERVAL value
   * @param {weekDay=} aData.wkst                       The week start value
   * @param {Time=} aData.until                         The end of the recurrence set
   * @param {Number=} aData.count                       The number of occurrences
   * @param {Array.<Number>=} aData.bysecond            The seconds for the BYSECOND part
   * @param {Array.<Number>=} aData.byminute            The minutes for the BYMINUTE part
   * @param {Array.<Number>=} aData.byhour              The hours for the BYHOUR part
   * @param {Array.<String>=} aData.byday               The BYDAY values
   * @param {Array.<Number>=} aData.bymonthday          The days for the BYMONTHDAY part
   * @param {Array.<Number>=} aData.byyearday           The days for the BYYEARDAY part
   * @param {Array.<Number>=} aData.byweekno            The weeks for the BYWEEKNO part
   * @param {Array.<Number>=} aData.bymonth             The month for the BYMONTH part
   * @param {Array.<Number>=} aData.bysetpos            The positionals for the BYSETPOS part
   */
  static fromData(aData) {
    return new Recur(aData);
  }

  /**
   * Converts a recurrence string to a data object, suitable for the fromData
   * method.
   *
   * @private
   * @param {String} string     The string to parse
   * @param {Boolean} fmtIcal   If true, the string is considered to be an
   *                              iCalendar string
   * @return {Recur}            The recurrence instance
   */
  static _stringToData(string, fmtIcal) {
    let dict = Object.create(null);

    // split is slower in FF but fast enough.
    // v8 however this is faster then manual split?
    let values = string.split(';');
    let len = values.length;

    for (let i = 0; i < len; i++) {
      let parts = values[i].split('=');
      let ucname = parts[0].toUpperCase();
      let lcname = parts[0].toLowerCase();
      let name = (fmtIcal ? lcname : ucname);
      let value = parts[1];

      if (ucname in partDesign) {
        let partArr = value.split(',');
        let partSet = new Set();

        for (let part of partArr) {
          partSet.add(partDesign[ucname](part));
        }
        partArr = [...partSet];

        dict[name] = (partArr.length == 1 ? partArr[0] : partArr);
      } else if (ucname in optionDesign) {
        optionDesign[ucname](value, dict, fmtIcal);
      } else {
        // Don't swallow unknown values. Just set them as they are.
        dict[lcname] = value;
      }
    }

    return dict;
  }

  /**
   * Convert an ical representation of a day (SU, MO, etc..)
   * into a numeric value of that day.
   *
   * @param {String} string     The iCalendar day name
   * @param {weekDay=} aWeekStart
   *        The week start weekday, defaults to SUNDAY
   * @return {Number}           Numeric value of given day
   */
  static icalDayToNumericDay(string, aWeekStart) {
    //XXX: this is here so we can deal
    //     with possibly invalid string values.
    let firstDow = aWeekStart || Time.SUNDAY;
    return ((DOW_MAP[string] - firstDow + 7) % 7) + 1;
  }

  /**
   * Convert a numeric day value into its ical representation (SU, MO, etc..)
   *
   * @param {Number} num        Numeric value of given day
   * @param {weekDay=} aWeekStart
   *        The week start weekday, defaults to SUNDAY
   * @return {String}           The ICAL day value, e.g SU,MO,...
   */
  static numericDayToIcalDay(num, aWeekStart) {
    //XXX: this is here so we can deal with possibly invalid number values.
    //     Also, this allows consistent mapping between day numbers and day
    //     names for external users.
    let firstDow = aWeekStart || Time.SUNDAY;
    let dow = (num + firstDow - Time.SUNDAY);
    if (dow > 7) {
      dow -= 7;
    }
    return REVERSE_DOW_MAP[dow];
  }

  /**
   * Create a new instance of the Recur class.
   *
   * @param {Object} data                               An object with members of the recurrence
   * @param {frequencyValues=} data.freq                The frequency value
   * @param {Number=} data.interval                     The INTERVAL value
   * @param {weekDay=} data.wkst                        The week start value
   * @param {Time=} data.until                          The end of the recurrence set
   * @param {Number=} data.count                        The number of occurrences
   * @param {Array.<Number>=} data.bysecond             The seconds for the BYSECOND part
   * @param {Array.<Number>=} data.byminute             The minutes for the BYMINUTE part
   * @param {Array.<Number>=} data.byhour               The hours for the BYHOUR part
   * @param {Array.<String>=} data.byday                The BYDAY values
   * @param {Array.<Number>=} data.bymonthday           The days for the BYMONTHDAY part
   * @param {Array.<Number>=} data.byyearday            The days for the BYYEARDAY part
   * @param {Array.<Number>=} data.byweekno             The weeks for the BYWEEKNO part
   * @param {Array.<Number>=} data.bymonth              The month for the BYMONTH part
   * @param {Array.<Number>=} data.bysetpos             The positionals for the BYSETPOS part
   */
  constructor(data) {
    this.wrappedJSObject = this;
    this.parts = {};

    if (data && typeof(data) === 'object') {
      this.fromData(data);
    }
  }

  /**
   * An object holding the BY-parts of the recurrence rule
   * @memberof ICAL.Recur
   * @typedef {Object} byParts
   * @property {Array.<Number>=} BYSECOND            The seconds for the BYSECOND part
   * @property {Array.<Number>=} BYMINUTE            The minutes for the BYMINUTE part
   * @property {Array.<Number>=} BYHOUR              The hours for the BYHOUR part
   * @property {Array.<String>=} BYDAY               The BYDAY values
   * @property {Array.<Number>=} BYMONTHDAY          The days for the BYMONTHDAY part
   * @property {Array.<Number>=} BYYEARDAY           The days for the BYYEARDAY part
   * @property {Array.<Number>=} BYWEEKNO            The weeks for the BYWEEKNO part
   * @property {Array.<Number>=} BYMONTH             The month for the BYMONTH part
   * @property {Array.<Number>=} BYSETPOS            The positionals for the BYSETPOS part
   */

  /**
   * An object holding the BY-parts of the recurrence rule
   * @type {byParts}
   */
  parts = null;

  /**
   * The interval value for the recurrence rule.
   * @type {Number}
   */
  interval = 1;

  /**
   * The week start day
   *
   * @type {weekDay}
   * @default ICAL.Time.MONDAY
   */
  wkst = Time.MONDAY;

  /**
   * The end of the recurrence
   * @type {?Time}
   */
  until = null;

  /**
   * The maximum number of occurrences
   * @type {?Number}
   */
  count = null;

  /**
   * The frequency value.
   * @type {frequencyValues}
   */
  freq = null;

  /**
   * The class identifier.
   * @constant
   * @type {String}
   * @default "icalrecur"
   */
  icalclass = "icalrecur";

  /**
   * The type name, to be used in the jCal object.
   * @constant
   * @type {String}
   * @default "recur"
   */
  icaltype = "recur";

  /**
   * Create a new iterator for this recurrence rule. The passed start date
   * must be the start date of the event, not the start of the range to
   * search in.
   *
   * @example
   * let recur = comp.getFirstPropertyValue('rrule');
   * let dtstart = comp.getFirstPropertyValue('dtstart');
   * let iter = recur.iterator(dtstart);
   * for (let next = iter.next(); next; next = iter.next()) {
   *   if (next.compare(rangeStart) < 0) {
   *     continue;
   *   }
   *   console.log(next.toString());
   * }
   *
   * @param {Time} aStart        The item's start date
   * @return {RecurIterator}     The recurrence iterator
   */
  iterator(aStart) {
    return new RecurIterator({
      rule: this,
      dtstart: aStart
    });
  }

  /**
   * Returns a clone of the recurrence object.
   *
   * @return {Recur}      The cloned object
   */
  clone() {
    return new Recur(this.toJSON());
  }

  /**
   * Checks if the current rule is finite, i.e. has a count or until part.
   *
   * @return {Boolean}        True, if the rule is finite
   */
  isFinite() {
    return !!(this.count || this.until);
  }

  /**
   * Checks if the current rule has a count part, and not limited by an until
   * part.
   *
   * @return {Boolean}        True, if the rule is by count
   */
  isByCount() {
    return !!(this.count && !this.until);
  }

  /**
   * Adds a component (part) to the recurrence rule. This is not a component
   * in the sense of {@link ICAL.Component}, but a part of the recurrence
   * rule, i.e. BYMONTH.
   *
   * @param {String} aType            The name of the component part
   * @param {Array|String} aValue     The component value
   */
  addComponent(aType, aValue) {
    let ucname = aType.toUpperCase();
    if (ucname in this.parts) {
      this.parts[ucname].push(aValue);
    } else {
      this.parts[ucname] = [aValue];
    }
  }

  /**
   * Sets the component value for the given by-part.
   *
   * @param {String} aType        The component part name
   * @param {Array} aValues       The component values
   */
  setComponent(aType, aValues) {
    this.parts[aType.toUpperCase()] = aValues.slice();
  }

  /**
   * Gets (a copy) of the requested component value.
   *
   * @param {String} aType        The component part name
   * @return {Array}              The component part value
   */
  getComponent(aType) {
    let ucname = aType.toUpperCase();
    return (ucname in this.parts ? this.parts[ucname].slice() : []);
  }

  /**
   * Retrieves the next occurrence after the given recurrence id. See the
   * guide on {@tutorial terminology} for more details.
   *
   * NOTE: Currently, this method iterates all occurrences from the start
   * date. It should not be called in a loop for performance reasons. If you
   * would like to get more than one occurrence, you can iterate the
   * occurrences manually, see the example on the
   * {@link ICAL.Recur#iterator iterator} method.
   *
   * @param {Time} aStartTime        The start of the event series
   * @param {Time} aRecurrenceId     The date of the last occurrence
   * @return {Time}                  The next occurrence after
   */
  getNextOccurrence(aStartTime, aRecurrenceId) {
    let iter = this.iterator(aStartTime);
    let next;

    do {
      next = iter.next();
    } while (next && next.compare(aRecurrenceId) <= 0);

    if (next && aRecurrenceId.zone) {
      next.zone = aRecurrenceId.zone;
    }

    return next;
  }

  /**
   * Sets up the current instance using members from the passed data object.
   *
   * @param {Object} data                               An object with members of the recurrence
   * @param {frequencyValues=} data.freq                The frequency value
   * @param {Number=} data.interval                     The INTERVAL value
   * @param {weekDay=} data.wkst                        The week start value
   * @param {Time=} data.until                          The end of the recurrence set
   * @param {Number=} data.count                        The number of occurrences
   * @param {Array.<Number>=} data.bysecond             The seconds for the BYSECOND part
   * @param {Array.<Number>=} data.byminute             The minutes for the BYMINUTE part
   * @param {Array.<Number>=} data.byhour               The hours for the BYHOUR part
   * @param {Array.<String>=} data.byday                The BYDAY values
   * @param {Array.<Number>=} data.bymonthday           The days for the BYMONTHDAY part
   * @param {Array.<Number>=} data.byyearday            The days for the BYYEARDAY part
   * @param {Array.<Number>=} data.byweekno             The weeks for the BYWEEKNO part
   * @param {Array.<Number>=} data.bymonth              The month for the BYMONTH part
   * @param {Array.<Number>=} data.bysetpos             The positionals for the BYSETPOS part
   */
  fromData(data) {
    for (let key in data) {
      let uckey = key.toUpperCase();

      if (uckey in partDesign) {
        if (Array.isArray(data[key])) {
          this.parts[uckey] = data[key];
        } else {
          this.parts[uckey] = [data[key]];
        }
      } else {
        this[key] = data[key];
      }
    }

    if (this.interval && typeof this.interval != "number") {
      optionDesign.INTERVAL(this.interval, this);
    }

    if (this.wkst && typeof this.wkst != "number") {
      this.wkst = Recur.icalDayToNumericDay(this.wkst);
    }

    if (this.until && !(this.until instanceof Time)) {
      this.until = Time.fromString(this.until);
    }
  }

  /**
   * The jCal representation of this recurrence type.
   * @return {Object}
   */
  toJSON() {
    let res = Object.create(null);
    res.freq = this.freq;

    if (this.count) {
      res.count = this.count;
    }

    if (this.interval > 1) {
      res.interval = this.interval;
    }

    for (let [k, kparts] of Object.entries(this.parts)) {
      if (Array.isArray(kparts) && kparts.length == 1) {
        res[k.toLowerCase()] = kparts[0];
      } else {
        res[k.toLowerCase()] = clone(kparts);
      }
    }

    if (this.until) {
      res.until = this.until.toString();
    }
    if ('wkst' in this && this.wkst !== Time.DEFAULT_WEEK_START) {
      res.wkst = Recur.numericDayToIcalDay(this.wkst);
    }
    return res;
  }

  /**
   * The string representation of this recurrence rule.
   * @return {String}
   */
  toString() {
    // TODO retain order
    let str = "FREQ=" + this.freq;
    if (this.count) {
      str += ";COUNT=" + this.count;
    }
    if (this.interval > 1) {
      str += ";INTERVAL=" + this.interval;
    }
    for (let [k, v] of Object.entries(this.parts)) {
      str += ";" + k + "=" + v;
    }
    if (this.until) {
      str += ';UNTIL=' + this.until.toICALString();
    }
    if ('wkst' in this && this.wkst !== Time.DEFAULT_WEEK_START) {
      str += ';WKST=' + Recur.numericDayToIcalDay(this.wkst);
    }
    return str;
  }
}

function parseNumericValue(type, min, max, value) {
  let result = value;

  if (value[0] === '+') {
    result = value.slice(1);
  }

  result = strictParseInt(result);

  if (min !== undefined && value < min) {
    throw new Error(
      type + ': invalid value "' + value + '" must be > ' + min
    );
  }

  if (max !== undefined && value > max) {
    throw new Error(
      type + ': invalid value "' + value + '" must be < ' + min
    );
  }

  return result;
}

const optionDesign = {
  FREQ: function(value, dict, fmtIcal) {
    // yes this is actually equal or faster then regex.
    // upside here is we can enumerate the valid values.
    if (ALLOWED_FREQ.indexOf(value) !== -1) {
      dict.freq = value;
    } else {
      throw new Error(
        'invalid frequency "' + value + '" expected: "' +
        ALLOWED_FREQ.join(', ') + '"'
      );
    }
  },

  COUNT: function(value, dict, fmtIcal) {
    dict.count = strictParseInt(value);
  },

  INTERVAL: function(value, dict, fmtIcal) {
    dict.interval = strictParseInt(value);
    if (dict.interval < 1) {
      // 0 or negative values are not allowed, some engines seem to generate
      // it though. Assume 1 instead.
      dict.interval = 1;
    }
  },

  UNTIL: function(value, dict, fmtIcal) {
    if (value.length > 10) {
      dict.until = design.icalendar.value['date-time'].fromICAL(value);
    } else {
      dict.until = design.icalendar.value.date.fromICAL(value);
    }
    if (!fmtIcal) {
      dict.until = Time.fromString(dict.until);
    }
  },

  WKST: function(value, dict, fmtIcal) {
    if (VALID_DAY_NAMES.test(value)) {
      dict.wkst = Recur.icalDayToNumericDay(value);
    } else {
      throw new Error('invalid WKST value "' + value + '"');
    }
  }
};

const partDesign = {
  BYSECOND: parseNumericValue.bind(undefined, 'BYSECOND', 0, 60),
  BYMINUTE: parseNumericValue.bind(undefined, 'BYMINUTE', 0, 59),
  BYHOUR: parseNumericValue.bind(undefined, 'BYHOUR', 0, 23),
  BYDAY: function(value) {
    if (VALID_BYDAY_PART.test(value)) {
      return value;
    } else {
      throw new Error('invalid BYDAY value "' + value + '"');
    }
  },
  BYMONTHDAY: parseNumericValue.bind(undefined, 'BYMONTHDAY', -31, 31),
  BYYEARDAY: parseNumericValue.bind(undefined, 'BYYEARDAY', -366, 366),
  BYWEEKNO: parseNumericValue.bind(undefined, 'BYWEEKNO', -53, 53),
  BYMONTH: parseNumericValue.bind(undefined, 'BYMONTH', 1, 12),
  BYSETPOS: parseNumericValue.bind(undefined, 'BYSETPOS', -366, 366)
};

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 * @ignore
 * @typedef {import("./types.js").designSet} designSet
 * Imports the 'designSet' type from the "types.js" module
 */

/** @module ICAL.design */

const FROM_ICAL_NEWLINE = /\\\\|\\;|\\,|\\[Nn]/g;
const TO_ICAL_NEWLINE = /\\|;|,|\n/g;
const FROM_VCARD_NEWLINE = /\\\\|\\,|\\[Nn]/g;
const TO_VCARD_NEWLINE = /\\|,|\n/g;

function createTextType(fromNewline, toNewline) {
  let result = {
    matches: /.*/,

    fromICAL: function(aValue, structuredEscape) {
      return replaceNewline(aValue, fromNewline, structuredEscape);
    },

    toICAL: function(aValue, structuredEscape) {
      let regEx = toNewline;
      if (structuredEscape)
         regEx = new RegExp(regEx.source + '|' + structuredEscape, regEx.flags);
      return aValue.replace(regEx, function(str) {
        switch (str) {
        case "\\":
          return "\\\\";
        case ";":
          return "\\;";
        case ",":
          return "\\,";
        case "\n":
          return "\\n";
        /* c8 ignore next 2 */
        default:
          return str;
        }
      });
    }
  };
  return result;
}

// default types used multiple times
const DEFAULT_TYPE_TEXT = { defaultType: "text" };
const DEFAULT_TYPE_TEXT_MULTI = { defaultType: "text", multiValue: "," };
const DEFAULT_TYPE_TEXT_STRUCTURED = { defaultType: "text", structuredValue: ";" };
const DEFAULT_TYPE_INTEGER = { defaultType: "integer" };
const DEFAULT_TYPE_DATETIME_DATE = { defaultType: "date-time", allowedTypes: ["date-time", "date"] };
const DEFAULT_TYPE_DATETIME = { defaultType: "date-time" };
const DEFAULT_TYPE_URI = { defaultType: "uri" };
const DEFAULT_TYPE_UTCOFFSET = { defaultType: "utc-offset" };
const DEFAULT_TYPE_RECUR = { defaultType: "recur" };
const DEFAULT_TYPE_DATE_ANDOR_TIME = { defaultType: "date-and-or-time", allowedTypes: ["date-time", "date", "text"] };

function replaceNewlineReplace(string) {
  switch (string) {
    case "\\\\":
      return "\\";
    case "\\;":
      return ";";
    case "\\,":
      return ",";
    case "\\n":
    case "\\N":
      return "\n";
    /* c8 ignore next 2 */
    default:
      return string;
  }
}

function replaceNewline(value, newline, structuredEscape) {
  // avoid regex when possible.
  if (value.indexOf('\\') === -1) {
    return value;
  }
  if (structuredEscape)
     newline = new RegExp(newline.source + '|\\\\' + structuredEscape, newline.flags);
  return value.replace(newline, replaceNewlineReplace);
}

let commonProperties = {
  "categories": DEFAULT_TYPE_TEXT_MULTI,
  "url": DEFAULT_TYPE_URI,
  "version": DEFAULT_TYPE_TEXT,
  "uid": DEFAULT_TYPE_TEXT
};

let commonValues = {
  "boolean": {
    values: ["TRUE", "FALSE"],

    fromICAL: function(aValue) {
      switch (aValue) {
        case 'TRUE':
          return true;
        case 'FALSE':
          return false;
        default:
          //TODO: parser warning
          return false;
      }
    },

    toICAL: function(aValue) {
      if (aValue) {
        return 'TRUE';
      }
      return 'FALSE';
    }

  },
  float: {
    matches: /^[+-]?\d+\.\d+$/,

    fromICAL: function(aValue) {
      let parsed = parseFloat(aValue);
      if (isStrictlyNaN(parsed)) {
        // TODO: parser warning
        return 0.0;
      }
      return parsed;
    },

    toICAL: function(aValue) {
      return String(aValue);
    }
  },
  integer: {
    fromICAL: function(aValue) {
      let parsed = parseInt(aValue);
      if (isStrictlyNaN(parsed)) {
        return 0;
      }
      return parsed;
    },

    toICAL: function(aValue) {
      return String(aValue);
    }
  },
  "utc-offset": {
    toICAL: function(aValue) {
      if (aValue.length < 7) {
        // no seconds
        // -0500
        return aValue.slice(0, 3) +
               aValue.slice(4, 6);
      } else {
        // seconds
        // -050000
        return aValue.slice(0, 3) +
               aValue.slice(4, 6) +
               aValue.slice(7, 9);
      }
    },

    fromICAL: function(aValue) {
      if (aValue.length < 6) {
        // no seconds
        // -05:00
        return aValue.slice(0, 3) + ':' +
               aValue.slice(3, 5);
      } else {
        // seconds
        // -05:00:00
        return aValue.slice(0, 3) + ':' +
               aValue.slice(3, 5) + ':' +
               aValue.slice(5, 7);
      }
    },

    decorate: function(aValue) {
      return UtcOffset.fromString(aValue);
    },

    undecorate: function(aValue) {
      return aValue.toString();
    }
  }
};

let icalParams = {
  // Although the syntax is DQUOTE uri DQUOTE, I don't think we should
  // enforce anything aside from it being a valid content line.
  //
  // At least some params require - if multi values are used - DQUOTEs
  // for each of its values - e.g. delegated-from="uri1","uri2"
  // To indicate this, I introduced the new k/v pair
  // multiValueSeparateDQuote: true
  //
  // "ALTREP": { ... },

  // CN just wants a param-value
  // "CN": { ... }

  "cutype": {
    values: ["INDIVIDUAL", "GROUP", "RESOURCE", "ROOM", "UNKNOWN"],
    allowXName: true,
    allowIanaToken: true
  },

  "delegated-from": {
    valueType: "cal-address",
    multiValue: ",",
    multiValueSeparateDQuote: true
  },
  "delegated-to": {
    valueType: "cal-address",
    multiValue: ",",
    multiValueSeparateDQuote: true
  },
  // "DIR": { ... }, // See ALTREP
  "encoding": {
    values: ["8BIT", "BASE64"]
  },
  // "FMTTYPE": { ... }, // See ALTREP
  "fbtype": {
    values: ["FREE", "BUSY", "BUSY-UNAVAILABLE", "BUSY-TENTATIVE"],
    allowXName: true,
    allowIanaToken: true
  },
  // "LANGUAGE": { ... }, // See ALTREP
  "member": {
    valueType: "cal-address",
    multiValue: ",",
    multiValueSeparateDQuote: true
  },
  "partstat": {
    // TODO These values are actually different per-component
    values: ["NEEDS-ACTION", "ACCEPTED", "DECLINED", "TENTATIVE",
             "DELEGATED", "COMPLETED", "IN-PROCESS"],
    allowXName: true,
    allowIanaToken: true
  },
  "range": {
    values: ["THISANDFUTURE"]
  },
  "related": {
    values: ["START", "END"]
  },
  "reltype": {
    values: ["PARENT", "CHILD", "SIBLING"],
    allowXName: true,
    allowIanaToken: true
  },
  "role": {
    values: ["REQ-PARTICIPANT", "CHAIR",
             "OPT-PARTICIPANT", "NON-PARTICIPANT"],
    allowXName: true,
    allowIanaToken: true
  },
  "rsvp": {
    values: ["TRUE", "FALSE"]
  },
  "sent-by": {
    valueType: "cal-address"
  },
  "tzid": {
    matches: /^\//
  },
  "value": {
    // since the value here is a 'type' lowercase is used.
    values: ["binary", "boolean", "cal-address", "date", "date-time",
             "duration", "float", "integer", "period", "recur", "text",
             "time", "uri", "utc-offset"],
    allowXName: true,
    allowIanaToken: true
  }
};

// When adding a value here, be sure to add it to the parameter types!
const icalValues = extend(commonValues, {
  text: createTextType(FROM_ICAL_NEWLINE, TO_ICAL_NEWLINE),

  uri: {
    // TODO
    /* ... */
  },

  "binary": {
    decorate: function(aString) {
      return Binary.fromString(aString);
    },

    undecorate: function(aBinary) {
      return aBinary.toString();
    }
  },
  "cal-address": {
    // needs to be an uri
  },
  "date": {
    decorate: function(aValue, aProp) {
      {
        return Time.fromDateString(aValue, aProp);
      }
    },

    /**
     * undecorates a time object.
     */
    undecorate: function(aValue) {
      return aValue.toString();
    },

    fromICAL: function(aValue) {
      // from: 20120901
      // to: 2012-09-01
      {
        return aValue.slice(0, 4) + '-' +
               aValue.slice(4, 6) + '-' +
               aValue.slice(6, 8);
      }
    },

    toICAL: function(aValue) {
      // from: 2012-09-01
      // to: 20120901
      let len = aValue.length;

      if (len == 10) {
        return aValue.slice(0, 4) +
               aValue.slice(5, 7) +
               aValue.slice(8, 10);
      } else if (len >= 19) {
        return icalValues["date-time"].toICAL(aValue);
      } else {
        //TODO: serialize warning?
        return aValue;
      }

    }
  },
  "date-time": {
    fromICAL: function(aValue) {
      // from: 20120901T130000
      // to: 2012-09-01T13:00:00
      {
        let result = aValue.slice(0, 4) + '-' +
                     aValue.slice(4, 6) + '-' +
                     aValue.slice(6, 8) + 'T' +
                     aValue.slice(9, 11) + ':' +
                     aValue.slice(11, 13) + ':' +
                     aValue.slice(13, 15);

        if (aValue[15] && aValue[15] === 'Z') {
          result += 'Z';
        }

        return result;
      }
    },

    toICAL: function(aValue) {
      // from: 2012-09-01T13:00:00
      // to: 20120901T130000
      let len = aValue.length;

      if (len >= 19) {
        let result = aValue.slice(0, 4) +
                     aValue.slice(5, 7) +
                     // grab the (DDTHH) segment
                     aValue.slice(8, 13) +
                     // MM
                     aValue.slice(14, 16) +
                     // SS
                     aValue.slice(17, 19);

        if (aValue[19] && aValue[19] === 'Z') {
          result += 'Z';
        }
        return result;
      } else {
        // TODO: error
        return aValue;
      }
    },

    decorate: function(aValue, aProp) {
      {
        return Time.fromDateTimeString(aValue, aProp);
      }
    },

    undecorate: function(aValue) {
      return aValue.toString();
    }
  },
  duration: {
    decorate: function(aValue) {
      return Duration.fromString(aValue);
    },
    undecorate: function(aValue) {
      return aValue.toString();
    }
  },
  period: {
    fromICAL: function(string) {
      let parts = string.split('/');
      parts[0] = icalValues['date-time'].fromICAL(parts[0]);

      if (!Duration.isValueString(parts[1])) {
        parts[1] = icalValues['date-time'].fromICAL(parts[1]);
      }

      return parts;
    },

    toICAL: function(parts) {
      parts = parts.slice();
      {
        parts[0] = icalValues['date-time'].toICAL(parts[0]);
      }

      if (!Duration.isValueString(parts[1])) {
        {
          parts[1] = icalValues['date-time'].toICAL(parts[1]);
        }
      }

      return parts.join("/");
    },

    decorate: function(aValue, aProp) {
      return Period.fromJSON(aValue, aProp, false);
    },

    undecorate: function(aValue) {
      return aValue.toJSON();
    }
  },
  recur: {
    fromICAL: function(string) {
      return Recur._stringToData(string, true);
    },

    toICAL: function(data) {
      let str = "";
      for (let [k, val] of Object.entries(data)) {
        if (k == "until") {
          if (val.length > 10) {
            val = icalValues['date-time'].toICAL(val);
          } else {
            val = icalValues.date.toICAL(val);
          }
        } else if (k == "wkst") {
          if (typeof val === 'number') {
            val = Recur.numericDayToIcalDay(val);
          }
        } else if (Array.isArray(val)) {
          val = val.join(",");
        }
        str += k.toUpperCase() + "=" + val + ";";
      }
      return str.slice(0, Math.max(0, str.length - 1));
    },

    decorate: function decorate(aValue) {
      return Recur.fromData(aValue);
    },

    undecorate: function(aRecur) {
      return aRecur.toJSON();
    }
  },

  time: {
    fromICAL: function(aValue) {
      // from: MMHHSS(Z)?
      // to: HH:MM:SS(Z)?
      if (aValue.length < 6) {
        // TODO: parser exception?
        return aValue;
      }

      // HH::MM::SSZ?
      let result = aValue.slice(0, 2) + ':' +
                   aValue.slice(2, 4) + ':' +
                   aValue.slice(4, 6);

      if (aValue[6] === 'Z') {
        result += 'Z';
      }

      return result;
    },

    toICAL: function(aValue) {
      // from: HH:MM:SS(Z)?
      // to: MMHHSS(Z)?
      if (aValue.length < 8) {
        //TODO: error
        return aValue;
      }

      let result = aValue.slice(0, 2) +
                   aValue.slice(3, 5) +
                   aValue.slice(6, 8);

      if (aValue[8] === 'Z') {
        result += 'Z';
      }

      return result;
    }
  }
});

let icalProperties = extend(commonProperties, {

  "action": DEFAULT_TYPE_TEXT,
  "attach": { defaultType: "uri" },
  "attendee": { defaultType: "cal-address" },
  "calscale": DEFAULT_TYPE_TEXT,
  "class": DEFAULT_TYPE_TEXT,
  "comment": DEFAULT_TYPE_TEXT,
  "completed": DEFAULT_TYPE_DATETIME,
  "contact": DEFAULT_TYPE_TEXT,
  "created": DEFAULT_TYPE_DATETIME,
  "description": DEFAULT_TYPE_TEXT,
  "dtend": DEFAULT_TYPE_DATETIME_DATE,
  "dtstamp": DEFAULT_TYPE_DATETIME,
  "dtstart": DEFAULT_TYPE_DATETIME_DATE,
  "due": DEFAULT_TYPE_DATETIME_DATE,
  "duration": { defaultType: "duration" },
  "exdate": {
    defaultType: "date-time",
    allowedTypes: ["date-time", "date"],
    multiValue: ','
  },
  "exrule": DEFAULT_TYPE_RECUR,
  "freebusy": { defaultType: "period", multiValue: "," },
  "geo": { defaultType: "float", structuredValue: ";" },
  "last-modified": DEFAULT_TYPE_DATETIME,
  "location": DEFAULT_TYPE_TEXT,
  "method": DEFAULT_TYPE_TEXT,
  "organizer": { defaultType: "cal-address" },
  "percent-complete": DEFAULT_TYPE_INTEGER,
  "priority": DEFAULT_TYPE_INTEGER,
  "prodid": DEFAULT_TYPE_TEXT,
  "related-to": DEFAULT_TYPE_TEXT,
  "repeat": DEFAULT_TYPE_INTEGER,
  "rdate": {
    defaultType: "date-time",
    allowedTypes: ["date-time", "date", "period"],
    multiValue: ',',
    detectType: function(string) {
      if (string.indexOf('/') !== -1) {
        return 'period';
      }
      return (string.indexOf('T') === -1) ? 'date' : 'date-time';
    }
  },
  "recurrence-id": DEFAULT_TYPE_DATETIME_DATE,
  "resources": DEFAULT_TYPE_TEXT_MULTI,
  "request-status": DEFAULT_TYPE_TEXT_STRUCTURED,
  "rrule": DEFAULT_TYPE_RECUR,
  "sequence": DEFAULT_TYPE_INTEGER,
  "status": DEFAULT_TYPE_TEXT,
  "summary": DEFAULT_TYPE_TEXT,
  "transp": DEFAULT_TYPE_TEXT,
  "trigger": { defaultType: "duration", allowedTypes: ["duration", "date-time"] },
  "tzoffsetfrom": DEFAULT_TYPE_UTCOFFSET,
  "tzoffsetto": DEFAULT_TYPE_UTCOFFSET,
  "tzurl": DEFAULT_TYPE_URI,
  "tzid": DEFAULT_TYPE_TEXT,
  "tzname": DEFAULT_TYPE_TEXT
});

// When adding a value here, be sure to add it to the parameter types!
const vcardValues = extend(commonValues, {
  text: createTextType(FROM_VCARD_NEWLINE, TO_VCARD_NEWLINE),
  uri: createTextType(FROM_VCARD_NEWLINE, TO_VCARD_NEWLINE),

  date: {
    decorate: function(aValue) {
      return VCardTime.fromDateAndOrTimeString(aValue, "date");
    },
    undecorate: function(aValue) {
      return aValue.toString();
    },
    fromICAL: function(aValue) {
      if (aValue.length == 8) {
        return icalValues.date.fromICAL(aValue);
      } else if (aValue[0] == '-' && aValue.length == 6) {
        return aValue.slice(0, 4) + '-' + aValue.slice(4);
      } else {
        return aValue;
      }
    },
    toICAL: function(aValue) {
      if (aValue.length == 10) {
        return icalValues.date.toICAL(aValue);
      } else if (aValue[0] == '-' && aValue.length == 7) {
        return aValue.slice(0, 4) + aValue.slice(5);
      } else {
        return aValue;
      }
    }
  },

  time: {
    decorate: function(aValue) {
      return VCardTime.fromDateAndOrTimeString("T" + aValue, "time");
    },
    undecorate: function(aValue) {
      return aValue.toString();
    },
    fromICAL: function(aValue) {
      let splitzone = vcardValues.time._splitZone(aValue, true);
      let zone = splitzone[0], value = splitzone[1];

      //console.log("SPLIT: ",splitzone);

      if (value.length == 6) {
        value = value.slice(0, 2) + ':' +
                value.slice(2, 4) + ':' +
                value.slice(4, 6);
      } else if (value.length == 4 && value[0] != '-') {
        value = value.slice(0, 2) + ':' + value.slice(2, 4);
      } else if (value.length == 5) {
        value = value.slice(0, 3) + ':' + value.slice(3, 5);
      }

      if (zone.length == 5 && (zone[0] == '-' || zone[0] == '+')) {
        zone = zone.slice(0, 3) + ':' + zone.slice(3);
      }

      return value + zone;
    },

    toICAL: function(aValue) {
      let splitzone = vcardValues.time._splitZone(aValue);
      let zone = splitzone[0], value = splitzone[1];

      if (value.length == 8) {
        value = value.slice(0, 2) +
                value.slice(3, 5) +
                value.slice(6, 8);
      } else if (value.length == 5 && value[0] != '-') {
        value = value.slice(0, 2) + value.slice(3, 5);
      } else if (value.length == 6) {
        value = value.slice(0, 3) + value.slice(4, 6);
      }

      if (zone.length == 6 && (zone[0] == '-' || zone[0] == '+')) {
        zone = zone.slice(0, 3) + zone.slice(4);
      }

      return value + zone;
    },

    _splitZone: function(aValue, isFromIcal) {
      let lastChar = aValue.length - 1;
      let signChar = aValue.length - (isFromIcal ? 5 : 6);
      let sign = aValue[signChar];
      let zone, value;

      if (aValue[lastChar] == 'Z') {
        zone = aValue[lastChar];
        value = aValue.slice(0, Math.max(0, lastChar));
      } else if (aValue.length > 6 && (sign == '-' || sign == '+')) {
        zone = aValue.slice(signChar);
        value = aValue.slice(0, Math.max(0, signChar));
      } else {
        zone = "";
        value = aValue;
      }

      return [zone, value];
    }
  },

  "date-time": {
    decorate: function(aValue) {
      return VCardTime.fromDateAndOrTimeString(aValue, "date-time");
    },

    undecorate: function(aValue) {
      return aValue.toString();
    },

    fromICAL: function(aValue) {
      return vcardValues['date-and-or-time'].fromICAL(aValue);
    },

    toICAL: function(aValue) {
      return vcardValues['date-and-or-time'].toICAL(aValue);
    }
  },

  "date-and-or-time": {
    decorate: function(aValue) {
      return VCardTime.fromDateAndOrTimeString(aValue, "date-and-or-time");
    },

    undecorate: function(aValue) {
      return aValue.toString();
    },

    fromICAL: function(aValue) {
      let parts = aValue.split('T');
      return (parts[0] ? vcardValues.date.fromICAL(parts[0]) : '') +
             (parts[1] ? 'T' + vcardValues.time.fromICAL(parts[1]) : '');
    },

    toICAL: function(aValue) {
      let parts = aValue.split('T');
      return vcardValues.date.toICAL(parts[0]) +
             (parts[1] ? 'T' + vcardValues.time.toICAL(parts[1]) : '');

    }
  },
  timestamp: icalValues['date-time'],
  "language-tag": {
    matches: /^[a-zA-Z0-9-]+$/ // Could go with a more strict regex here
  },
  "phone-number": {
    fromICAL: function(aValue) {
      return Array.from(aValue).filter(function(c) {
          return c === '\\' ? undefined : c;
        }).join('');
    },
    toICAL: function(aValue) {
      return Array.from(aValue).map(function(c) {
        return c === ',' || c === ";" ? '\\' + c : c;
      }).join('');
    }
  }
});

let vcardParams = {
  "type": {
    valueType: "text",
    multiValue: ","
  },
  "value": {
    // since the value here is a 'type' lowercase is used.
    values: ["text", "uri", "date", "time", "date-time", "date-and-or-time",
             "timestamp", "boolean", "integer", "float", "utc-offset",
             "language-tag"],
    allowXName: true,
    allowIanaToken: true
  }
};

let vcardProperties = extend(commonProperties, {
  "adr": { defaultType: "text", structuredValue: ";", multiValue: "," },
  "anniversary": DEFAULT_TYPE_DATE_ANDOR_TIME,
  "bday": DEFAULT_TYPE_DATE_ANDOR_TIME,
  "caladruri": DEFAULT_TYPE_URI,
  "caluri": DEFAULT_TYPE_URI,
  "clientpidmap": DEFAULT_TYPE_TEXT_STRUCTURED,
  "email": DEFAULT_TYPE_TEXT,
  "fburl": DEFAULT_TYPE_URI,
  "fn": DEFAULT_TYPE_TEXT,
  "gender": DEFAULT_TYPE_TEXT_STRUCTURED,
  "geo": DEFAULT_TYPE_URI,
  "impp": DEFAULT_TYPE_URI,
  "key": DEFAULT_TYPE_URI,
  "kind": DEFAULT_TYPE_TEXT,
  "lang": { defaultType: "language-tag" },
  "logo": DEFAULT_TYPE_URI,
  "member": DEFAULT_TYPE_URI,
  "n": { defaultType: "text", structuredValue: ";", multiValue: "," },
  "nickname": DEFAULT_TYPE_TEXT_MULTI,
  "note": DEFAULT_TYPE_TEXT,
  "org": { defaultType: "text", structuredValue: ";" },
  "photo": DEFAULT_TYPE_URI,
  "related": DEFAULT_TYPE_URI,
  "rev": { defaultType: "timestamp" },
  "role": DEFAULT_TYPE_TEXT,
  "sound": DEFAULT_TYPE_URI,
  "source": DEFAULT_TYPE_URI,
  "tel": { defaultType: "uri", allowedTypes: ["uri", "text"] },
  "title": DEFAULT_TYPE_TEXT,
  "tz": { defaultType: "text", allowedTypes: ["text", "utc-offset", "uri"] },
  "xml": DEFAULT_TYPE_TEXT
});

let vcard3Values = extend(commonValues, {
  binary: icalValues.binary,
  date: vcardValues.date,
  "date-time": vcardValues["date-time"],
  "phone-number": vcardValues["phone-number"],
  uri: icalValues.uri,
  text: vcardValues.text,
  time: icalValues.time,
  vcard: icalValues.text,
  "utc-offset": {
    toICAL: function(aValue) {
      return aValue.slice(0, 7);
    },

    fromICAL: function(aValue) {
      return aValue.slice(0, 7);
    },

    decorate: function(aValue) {
      return UtcOffset.fromString(aValue);
    },

    undecorate: function(aValue) {
      return aValue.toString();
    }
  }
});

let vcard3Params = {
  "type": {
    valueType: "text",
    multiValue: ","
  },
  "value": {
    // since the value here is a 'type' lowercase is used.
    values: ["text", "uri", "date", "date-time", "phone-number", "time",
             "boolean", "integer", "float", "utc-offset", "vcard", "binary"],
    allowXName: true,
    allowIanaToken: true
  }
};

let vcard3Properties = extend(commonProperties, {
  fn: DEFAULT_TYPE_TEXT,
  n: { defaultType: "text", structuredValue: ";", multiValue: "," },
  nickname: DEFAULT_TYPE_TEXT_MULTI,
  photo: { defaultType: "binary", allowedTypes: ["binary", "uri"] },
  bday: {
    defaultType: "date-time",
    allowedTypes: ["date-time", "date"],
    detectType: function(string) {
      return (string.indexOf('T') === -1) ? 'date' : 'date-time';
    }
  },

  adr: { defaultType: "text", structuredValue: ";", multiValue: "," },
  label: DEFAULT_TYPE_TEXT,

  tel: { defaultType: "phone-number" },
  email: DEFAULT_TYPE_TEXT,
  mailer: DEFAULT_TYPE_TEXT,

  tz: { defaultType: "utc-offset", allowedTypes: ["utc-offset", "text"] },
  geo: { defaultType: "float", structuredValue: ";" },

  title: DEFAULT_TYPE_TEXT,
  role: DEFAULT_TYPE_TEXT,
  logo: { defaultType: "binary", allowedTypes: ["binary", "uri"] },
  agent: { defaultType: "vcard", allowedTypes: ["vcard", "text", "uri"] },
  org: DEFAULT_TYPE_TEXT_STRUCTURED,

  note: DEFAULT_TYPE_TEXT_MULTI,
  prodid: DEFAULT_TYPE_TEXT,
  rev: {
    defaultType: "date-time",
    allowedTypes: ["date-time", "date"],
    detectType: function(string) {
      return (string.indexOf('T') === -1) ? 'date' : 'date-time';
    }
  },
  "sort-string": DEFAULT_TYPE_TEXT,
  sound: { defaultType: "binary", allowedTypes: ["binary", "uri"] },

  class: DEFAULT_TYPE_TEXT,
  key: { defaultType: "binary", allowedTypes: ["binary", "text"] }
});

/**
 * iCalendar design set
 * @type {designSet}
 */
let icalSet = {
  name: "ical",
  value: icalValues,
  param: icalParams,
  property: icalProperties,
  propertyGroups: false
};

/**
 * vCard 4.0 design set
 * @type {designSet}
 */
let vcardSet = {
  name: "vcard4",
  value: vcardValues,
  param: vcardParams,
  property: vcardProperties,
  propertyGroups: true
};

/**
 * vCard 3.0 design set
 * @type {designSet}
 */
let vcard3Set = {
  name: "vcard3",
  value: vcard3Values,
  param: vcard3Params,
  property: vcard3Properties,
  propertyGroups: true
};

/**
 * The design data, used by the parser to determine types for properties and
 * other metadata needed to produce correct jCard/jCal data.
 *
 * @alias ICAL.design
 * @exports module:ICAL.design
 */
const design = {
  /**
   * Can be set to false to make the parser more lenient.
   */
  strict: true,

  /**
   * The default set for new properties and components if none is specified.
   * @type {designSet}
   */
  defaultSet: icalSet,

  /**
   * The default type for unknown properties
   * @type {String}
   */
  defaultType: 'unknown',

  /**
   * Holds the design set for known top-level components
   *
   * @type {Object}
   * @property {designSet} vcard       vCard VCARD
   * @property {designSet} vevent      iCalendar VEVENT
   * @property {designSet} vtodo       iCalendar VTODO
   * @property {designSet} vjournal    iCalendar VJOURNAL
   * @property {designSet} valarm      iCalendar VALARM
   * @property {designSet} vtimezone   iCalendar VTIMEZONE
   * @property {designSet} daylight    iCalendar DAYLIGHT
   * @property {designSet} standard    iCalendar STANDARD
   *
   * @example
   * let propertyName = 'fn';
   * let componentDesign = ICAL.design.components.vcard;
   * let propertyDetails = componentDesign.property[propertyName];
   * if (propertyDetails.defaultType == 'text') {
   *   // Yep, sure is...
   * }
   */
  components: {
    vcard: vcardSet,
    vcard3: vcard3Set,
    vevent: icalSet,
    vtodo: icalSet,
    vjournal: icalSet,
    valarm: icalSet,
    vtimezone: icalSet,
    daylight: icalSet,
    standard: icalSet
  },


  /**
   * The design set for iCalendar (rfc5545/rfc7265) components.
   * @type {designSet}
   */
  icalendar: icalSet,

  /**
   * The design set for vCard (rfc6350/rfc7095) components.
   * @type {designSet}
   */
  vcard: vcardSet,

  /**
   * The design set for vCard (rfc2425/rfc2426/rfc7095) components.
   * @type {designSet}
   */
  vcard3: vcard3Set,

  /**
   * Gets the design set for the given component name.
   *
   * @param {String} componentName        The name of the component
   * @return {designSet}      The design set for the component
   */
  getDesignSet: function(componentName) {
    let isInDesign = componentName && componentName in design.components;
    return isInDesign ? design.components[componentName] : design.defaultSet;
  }
};

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 *
 * @ignore
 * @typedef {import("./types.js").designSet} designSet
 * Imports the 'designSet' type from the "types.js" module
 */

const LINE_ENDING = '\r\n';
const DEFAULT_VALUE_TYPE = 'unknown';
const RFC6868_REPLACE_MAP = { '"': "^'", "\n": "^n", "^": "^^" };

/**
 * Convert a full jCal/jCard array into a iCalendar/vCard string.
 *
 * @function ICAL.stringify
 * @variation function
 * @param {Array} jCal    The jCal/jCard document
 * @return {String}       The stringified iCalendar/vCard document
 */
function stringify(jCal) {
  if (typeof jCal[0] == "string") {
    // This is a single component
    jCal = [jCal];
  }

  let i = 0;
  let len = jCal.length;
  let result = '';

  for (; i < len; i++) {
    result += stringify.component(jCal[i]) + LINE_ENDING;
  }

  return result;
}

/**
 * Converts an jCal component array into a ICAL string.
 * Recursive will resolve sub-components.
 *
 * Exact component/property order is not saved all
 * properties will come before subcomponents.
 *
 * @function ICAL.stringify.component
 * @param {Array} component
 *        jCal/jCard fragment of a component
 * @param {designSet} designSet
 *        The design data to use for this component
 * @return {String}       The iCalendar/vCard string
 */
stringify.component = function(component, designSet) {
  let name = component[0].toUpperCase();
  let result = 'BEGIN:' + name + LINE_ENDING;

  let props = component[1];
  let propIdx = 0;
  let propLen = props.length;

  let designSetName = component[0];
  // rfc6350 requires that in vCard 4.0 the first component is the VERSION
  // component with as value 4.0, note that 3.0 does not have this requirement.
  if (designSetName === 'vcard' && component[1].length > 0 &&
          !(component[1][0][0] === "version" && component[1][0][3] === "4.0")) {
    designSetName = "vcard3";
  }
  designSet = designSet || design.getDesignSet(designSetName);

  for (; propIdx < propLen; propIdx++) {
    result += stringify.property(props[propIdx], designSet) + LINE_ENDING;
  }

  // Ignore subcomponents if none exist, e.g. in vCard.
  let comps = component[2] || [];
  let compIdx = 0;
  let compLen = comps.length;

  for (; compIdx < compLen; compIdx++) {
    result += stringify.component(comps[compIdx], designSet) + LINE_ENDING;
  }

  result += 'END:' + name;
  return result;
};

/**
 * Converts a single jCal/jCard property to a iCalendar/vCard string.
 *
 * @function ICAL.stringify.property
 * @param {Array} property
 *        jCal/jCard property array
 * @param {designSet} designSet
 *        The design data to use for this property
 * @param {Boolean} noFold
 *        If true, the line is not folded
 * @return {String}       The iCalendar/vCard string
 */
stringify.property = function(property, designSet, noFold) {
  let name = property[0].toUpperCase();
  let jsName = property[0];
  let params = property[1];

  if (!designSet) {
    designSet = design.defaultSet;
  }

  let groupName = params.group;
  let line;
  if (designSet.propertyGroups && groupName) {
    line = groupName.toUpperCase() + "." + name;
  } else {
    line = name;
  }

  for (let [paramName, value] of Object.entries(params)) {
    if (designSet.propertyGroups && paramName == 'group') {
      continue;
    }

    let paramDesign = designSet.param[paramName];
    let multiValue = paramDesign && paramDesign.multiValue;
    if (multiValue && Array.isArray(value)) {
      value = value.map(function(val) {
        val = stringify._rfc6868Unescape(val);
        val = stringify.paramPropertyValue(val, paramDesign.multiValueSeparateDQuote);
        return val;
      });
      value = stringify.multiValue(value, multiValue, "unknown", null, designSet);
    } else {
      value = stringify._rfc6868Unescape(value);
      value = stringify.paramPropertyValue(value);
    }

    line += ';' + paramName.toUpperCase() + '=' + value;
  }

  if (property.length === 3) {
    // If there are no values, we must assume a blank value
    return line + ':';
  }

  let valueType = property[2];

  let propDetails;
  let multiValue = false;
  let structuredValue = false;
  let isDefault = false;

  if (jsName in designSet.property) {
    propDetails = designSet.property[jsName];

    if ('multiValue' in propDetails) {
      multiValue = propDetails.multiValue;
    }

    if (('structuredValue' in propDetails) && Array.isArray(property[3])) {
      structuredValue = propDetails.structuredValue;
    }

    if ('defaultType' in propDetails) {
      if (valueType === propDetails.defaultType) {
        isDefault = true;
      }
    } else {
      if (valueType === DEFAULT_VALUE_TYPE) {
        isDefault = true;
      }
    }
  } else {
    if (valueType === DEFAULT_VALUE_TYPE) {
      isDefault = true;
    }
  }

  // push the VALUE property if type is not the default
  // for the current property.
  if (!isDefault) {
    // value will never contain ;/:/, so we don't escape it here.
    line += ';VALUE=' + valueType.toUpperCase();
  }

  line += ':';

  if (multiValue && structuredValue) {
    line += stringify.multiValue(
      property[3], structuredValue, valueType, multiValue, designSet, structuredValue
    );
  } else if (multiValue) {
    line += stringify.multiValue(
      property.slice(3), multiValue, valueType, null, designSet, false
    );
  } else if (structuredValue) {
    line += stringify.multiValue(
      property[3], structuredValue, valueType, null, designSet, structuredValue
    );
  } else {
    line += stringify.value(property[3], valueType, designSet, false);
  }

  return noFold ? line : foldline(line);
};

/**
 * Handles escaping of property values that may contain:
 *
 *    COLON (:), SEMICOLON (;), or COMMA (,)
 *
 * If any of the above are present the result is wrapped
 * in double quotes.
 *
 * @function ICAL.stringify.paramPropertyValue
 * @param {String} value      Raw property value
 * @param {boolean} force     If value should be escaped even when unnecessary
 * @return {String}           Given or escaped value when needed
 */
stringify.paramPropertyValue = function(value, force) {
  if (!force &&
      (value.indexOf(',') === -1) &&
      (value.indexOf(':') === -1) &&
      (value.indexOf(';') === -1)) {

    return value;
  }

  return '"' + value + '"';
};

/**
 * Converts an array of ical values into a single
 * string based on a type and a delimiter value (like ",").
 *
 * @function ICAL.stringify.multiValue
 * @param {Array} values      List of values to convert
 * @param {String} delim      Used to join the values (",", ";", ":")
 * @param {String} type       Lowecase ical value type
 *        (like boolean, date-time, etc..)
 * @param {?String} innerMulti If set, each value will again be processed
 *        Used for structured values
 * @param {designSet} designSet
 *        The design data to use for this property
 *
 * @return {String}           iCalendar/vCard string for value
 */
stringify.multiValue = function(values, delim, type, innerMulti, designSet, structuredValue) {
  let result = '';
  let len = values.length;
  let i = 0;

  for (; i < len; i++) {
    if (innerMulti && Array.isArray(values[i])) {
      result += stringify.multiValue(values[i], innerMulti, type, null, designSet, structuredValue);
    } else {
      result += stringify.value(values[i], type, designSet, structuredValue);
    }

    if (i !== (len - 1)) {
      result += delim;
    }
  }

  return result;
};

/**
 * Processes a single ical value runs the associated "toICAL" method from the
 * design value type if available to convert the value.
 *
 * @function ICAL.stringify.value
 * @param {String|Number} value       A formatted value
 * @param {String} type               Lowercase iCalendar/vCard value type
 *  (like boolean, date-time, etc..)
 * @return {String}                   iCalendar/vCard value for single value
 */
stringify.value = function(value, type, designSet, structuredValue) {
  if (type in designSet.value && 'toICAL' in designSet.value[type]) {
    return designSet.value[type].toICAL(value, structuredValue);
  }
  return value;
};

/**
 * Internal helper for rfc6868. Exposing this on ICAL.stringify so that
 * hackers can disable the rfc6868 parsing if the really need to.
 *
 * @param {String} val        The value to unescape
 * @return {String}           The escaped value
 */
stringify._rfc6868Unescape = function(val) {
  return val.replace(/[\n^"]/g, function(x) {
    return RFC6868_REPLACE_MAP[x];
  });
};

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */

const NAME_INDEX$1 = 0;
const PROP_INDEX = 1;
const TYPE_INDEX = 2;
const VALUE_INDEX = 3;

/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 * @ignore
 * @typedef {import("./types.js").designSet} designSet
 * Imports the 'designSet' type from the "types.js" module
 * @typedef {import("./types.js").Geo} Geo
 * Imports the 'Geo' type from the "types.js" module
 */

/**
 * Provides a layer on top of the raw jCal object for manipulating a single property, with its
 * parameters and value.
 *
 * @memberof ICAL
 */
class Property {
  /**
   * Create an {@link ICAL.Property} by parsing the passed iCalendar string.
   *
   * @param {String} str            The iCalendar string to parse
   * @param {designSet=} designSet  The design data to use for this property
   * @return {Property}             The created iCalendar property
   */
  static fromString(str, designSet) {
    return new Property(parse.property(str, designSet));
  }

  /**
   * Creates a new ICAL.Property instance.
   *
   * It is important to note that mutations done in the wrapper directly mutate the jCal object used
   * to initialize.
   *
   * Can also be used to create new properties by passing the name of the property (as a String).
   *
   * @param {Array|String} jCal         Raw jCal representation OR the new name of the property
   * @param {Component=} parent         Parent component
   */
  constructor(jCal, parent) {
    this._parent = parent || null;

    if (typeof(jCal) === 'string') {
      // We are creating the property by name and need to detect the type
      this.jCal = [jCal, {}, design.defaultType];
      this.jCal[TYPE_INDEX] = this.getDefaultType();
    } else {
      this.jCal = jCal;
    }
    this._updateType();
  }

  /**
   * The value type for this property
   * @type {String}
   */
  get type() {
    return this.jCal[TYPE_INDEX];
  }

  /**
   * The name of this property, in lowercase.
   * @type {String}
   */
  get name() {
    return this.jCal[NAME_INDEX$1];
  }

  /**
   * The parent component for this property.
   * @type {Component}
   */
  get parent() {
    return this._parent;
  }

  set parent(p) {
    // Before setting the parent, check if the design set has changed. If it
    // has, we later need to update the type if it was unknown before.
    let designSetChanged = !this._parent || (p && p._designSet != this._parent._designSet);

    this._parent = p;

    if (this.type == design.defaultType && designSetChanged) {
      this.jCal[TYPE_INDEX] = this.getDefaultType();
      this._updateType();
    }
  }

  /**
   * The design set for this property, e.g. icalendar vs vcard
   *
   * @type {designSet}
   * @private
   */
  get _designSet() {
    return this.parent ? this.parent._designSet : design.defaultSet;
  }

  /**
   * Updates the type metadata from the current jCal type and design set.
   *
   * @private
   */
  _updateType() {
    let designSet = this._designSet;

    if (this.type in designSet.value) {
      if ('decorate' in designSet.value[this.type]) {
        this.isDecorated = true;
      } else {
        this.isDecorated = false;
      }

      if (this.name in designSet.property) {
        this.isMultiValue = ('multiValue' in designSet.property[this.name]);
        this.isStructuredValue = ('structuredValue' in designSet.property[this.name]);
      }
    }
  }

  /**
   * Hydrate a single value. The act of hydrating means turning the raw jCal
   * value into a potentially wrapped object, for example {@link ICAL.Time}.
   *
   * @private
   * @param {Number} index        The index of the value to hydrate
   * @return {?Object}             The decorated value.
   */
  _hydrateValue(index) {
    if (this._values && this._values[index]) {
      return this._values[index];
    }

    // for the case where there is no value.
    if (this.jCal.length <= (VALUE_INDEX + index)) {
      return null;
    }

    if (this.isDecorated) {
      if (!this._values) {
        this._values = [];
      }
      return (this._values[index] = this._decorate(
        this.jCal[VALUE_INDEX + index]
      ));
    } else {
      return this.jCal[VALUE_INDEX + index];
    }
  }

  /**
   * Decorate a single value, returning its wrapped object. This is used by
   * the hydrate function to actually wrap the value.
   *
   * @private
   * @param {?} value         The value to decorate
   * @return {Object}         The decorated value
   */
  _decorate(value) {
    return this._designSet.value[this.type].decorate(value, this);
  }

  /**
   * Undecorate a single value, returning its raw jCal data.
   *
   * @private
   * @param {Object} value         The value to undecorate
   * @return {?}                   The undecorated value
   */
  _undecorate(value) {
    return this._designSet.value[this.type].undecorate(value, this);
  }

  /**
   * Sets the value at the given index while also hydrating it. The passed
   * value can either be a decorated or undecorated value.
   *
   * @private
   * @param {?} value             The value to set
   * @param {Number} index        The index to set it at
   */
  _setDecoratedValue(value, index) {
    if (!this._values) {
      this._values = [];
    }

    if (typeof(value) === 'object' && 'icaltype' in value) {
      // decorated value
      this.jCal[VALUE_INDEX + index] = this._undecorate(value);
      this._values[index] = value;
    } else {
      // undecorated value
      this.jCal[VALUE_INDEX + index] = value;
      this._values[index] = this._decorate(value);
    }
  }

  /**
   * Gets a parameter on the property.
   *
   * @param {String}        name   Parameter name (lowercase)
   * @return {Array|String}        Parameter value
   */
  getParameter(name) {
    if (name in this.jCal[PROP_INDEX]) {
      return this.jCal[PROP_INDEX][name];
    } else {
      return undefined;
    }
  }

  /**
   * Gets first parameter on the property.
   *
   * @param {String}        name   Parameter name (lowercase)
   * @return {String}        Parameter value
   */
  getFirstParameter(name) {
    let parameters = this.getParameter(name);

    if (Array.isArray(parameters)) {
      return parameters[0];
    }

    return parameters;
  }

  /**
   * Sets a parameter on the property.
   *
   * @param {String}       name     The parameter name
   * @param {Array|String} value    The parameter value
   */
  setParameter(name, value) {
    let lcname = name.toLowerCase();
    if (typeof value === "string" &&
        lcname in this._designSet.param &&
        'multiValue' in this._designSet.param[lcname]) {
        value = [value];
    }
    this.jCal[PROP_INDEX][name] = value;
  }

  /**
   * Removes a parameter
   *
   * @param {String} name     The parameter name
   */
  removeParameter(name) {
    delete this.jCal[PROP_INDEX][name];
  }

  /**
   * Get the default type based on this property's name.
   *
   * @return {String}     The default type for this property
   */
  getDefaultType() {
    let name = this.jCal[NAME_INDEX$1];
    let designSet = this._designSet;

    if (name in designSet.property) {
      let details = designSet.property[name];
      if ('defaultType' in details) {
        return details.defaultType;
      }
    }
    return design.defaultType;
  }

  /**
   * Sets type of property and clears out any existing values of the current
   * type.
   *
   * @param {String} type     New iCAL type (see design.*.values)
   */
  resetType(type) {
    this.removeAllValues();
    this.jCal[TYPE_INDEX] = type;
    this._updateType();
  }

  /**
   * Finds the first property value.
   *
   * @return {Binary | Duration | Period |
   * Recur | Time | UtcOffset | Geo | string | null}         First property value
   */
  getFirstValue() {
    return this._hydrateValue(0);
  }

  /**
   * Gets all values on the property.
   *
   * NOTE: this creates an array during each call.
   *
   * @return {Array}          List of values
   */
  getValues() {
    let len = this.jCal.length - VALUE_INDEX;

    if (len < 1) {
      // it is possible for a property to have no value.
      return [];
    }

    let i = 0;
    let result = [];

    for (; i < len; i++) {
      result[i] = this._hydrateValue(i);
    }

    return result;
  }

  /**
   * Removes all values from this property
   */
  removeAllValues() {
    if (this._values) {
      this._values.length = 0;
    }
    this.jCal.length = 3;
  }

  /**
   * Sets the values of the property.  Will overwrite the existing values.
   * This can only be used for multi-value properties.
   *
   * @param {Array} values    An array of values
   */
  setValues(values) {
    if (!this.isMultiValue) {
      throw new Error(
        this.name + ': does not not support mulitValue.\n' +
        'override isMultiValue'
      );
    }

    let len = values.length;
    let i = 0;
    this.removeAllValues();

    if (len > 0 &&
        typeof(values[0]) === 'object' &&
        'icaltype' in values[0]) {
      this.resetType(values[0].icaltype);
    }

    if (this.isDecorated) {
      for (; i < len; i++) {
        this._setDecoratedValue(values[i], i);
      }
    } else {
      for (; i < len; i++) {
        this.jCal[VALUE_INDEX + i] = values[i];
      }
    }
  }

  /**
   * Sets the current value of the property. If this is a multi-value
   * property, all other values will be removed.
   *
   * @param {String|Object} value     New property value.
   */
  setValue(value) {
    this.removeAllValues();
    if (typeof(value) === 'object' && 'icaltype' in value) {
      this.resetType(value.icaltype);
    }

    if (this.isDecorated) {
      this._setDecoratedValue(value, 0);
    } else {
      this.jCal[VALUE_INDEX] = value;
    }
  }

  /**
   * Returns the Object representation of this component. The returned object
   * is a live jCal object and should be cloned if modified.
   * @return {Object}
   */
  toJSON() {
    return this.jCal;
  }

  /**
   * The string representation of this component.
   * @return {String}
   */
  toICALString() {
    return stringify.property(
      this.jCal, this._designSet, true
    );
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 * @ignore
 * @typedef {import("./types.js").designSet} designSet
 * Imports the 'designSet' type from the "types.js" module
 * @typedef {import("./types.js").Geo} Geo
 * Imports the 'Geo' type from the "types.js" module
 */

const NAME_INDEX = 0;
const PROPERTY_INDEX = 1;
const COMPONENT_INDEX = 2;

const PROPERTY_NAME_INDEX = 0;
const PROPERTY_VALUE_INDEX = 3;

/**
 * Wraps a jCal component, adding convenience methods to add, remove and update subcomponents and
 * properties.
 *
 * @memberof ICAL
 */
class Component {
  /**
   * Create an {@link ICAL.Component} by parsing the passed iCalendar string.
   *
   * @param {String} str        The iCalendar string to parse
   */
  static fromString(str) {
    return new Component(parse.component(str));
  }

  /**
   * Creates a new Component instance.
   *
   * @param {Array|String} jCal         Raw jCal component data OR name of new
   *                                      component
   * @param {Component=} parent     Parent component to associate
   */
  constructor(jCal, parent) {
    if (typeof(jCal) === 'string') {
      // jCal spec (name, properties, components)
      jCal = [jCal, [], []];
    }

    // mostly for legacy reasons.
    this.jCal = jCal;

    this.parent = parent || null;

    if (!this.parent && this.name === 'vcalendar') {
      this._timezoneCache = new Map();
    }
  }

  /**
   * Hydrated properties are inserted into the _properties array at the same
   * position as in the jCal array, so it is possible that the array contains
   * undefined values for unhydrdated properties. To avoid iterating the
   * array when checking if all properties have been hydrated, we save the
   * count here.
   *
   * @type {Number}
   * @private
   */
  _hydratedPropertyCount = 0;

  /**
   * The same count as for _hydratedPropertyCount, but for subcomponents
   *
   * @type {Number}
   * @private
   */
  _hydratedComponentCount = 0;

  /**
   * A cache of hydrated time zone objects which may be used by consumers, keyed
   * by time zone ID.
   *
   * @type {Map}
   * @private
   */
  _timezoneCache = null;

  /**
   * @private
   */
  _components = null;

  /**
   * @private
   */
  _properties = null;

  /**
   * The name of this component
   *
   * @type {String}
   */
  get name() {
    return this.jCal[NAME_INDEX];
  }

  /**
   * The design set for this component, e.g. icalendar vs vcard
   *
   * @type {designSet}
   * @private
   */
  get _designSet() {
    let parentDesign = this.parent && this.parent._designSet;
    if (!parentDesign && this.name == "vcard") {
      // We can't decide on vcard3 vs vcard4 just based on the component name, the version number is
      // in the version property. We also can't use hydrated properties here because it would lead
      // to recursion, but the spec says that the version property needs to be the very first one.
      let versionProp = this.jCal[PROPERTY_INDEX]?.[0];

      if (versionProp && versionProp[PROPERTY_NAME_INDEX] == "version" && versionProp[PROPERTY_VALUE_INDEX] == "3.0") {
        return design.getDesignSet("vcard3");
      }
    }

    return parentDesign || design.getDesignSet(this.name);
  }

  /**
   * @private
   */
  _hydrateComponent(index) {
    if (!this._components) {
      this._components = [];
      this._hydratedComponentCount = 0;
    }

    if (this._components[index]) {
      return this._components[index];
    }

    let comp = new Component(
      this.jCal[COMPONENT_INDEX][index],
      this
    );

    this._hydratedComponentCount++;
    return (this._components[index] = comp);
  }

  /**
   * @private
   */
  _hydrateProperty(index) {
    if (!this._properties) {
      this._properties = [];
      this._hydratedPropertyCount = 0;
    }

    if (this._properties[index]) {
      return this._properties[index];
    }

    let prop = new Property(
      this.jCal[PROPERTY_INDEX][index],
      this
    );

    this._hydratedPropertyCount++;
    return (this._properties[index] = prop);
  }

  /**
   * Finds first sub component, optionally filtered by name.
   *
   * @param {String=} name        Optional name to filter by
   * @return {?Component}     The found subcomponent
   */
  getFirstSubcomponent(name) {
    if (name) {
      let i = 0;
      let comps = this.jCal[COMPONENT_INDEX];
      let len = comps.length;

      for (; i < len; i++) {
        if (comps[i][NAME_INDEX] === name) {
          let result = this._hydrateComponent(i);
          return result;
        }
      }
    } else {
      if (this.jCal[COMPONENT_INDEX].length) {
        return this._hydrateComponent(0);
      }
    }

    // ensure we return a value (strict mode)
    return null;
  }

  /**
   * Finds all sub components, optionally filtering by name.
   *
   * @param {String=} name            Optional name to filter by
   * @return {Component[]}       The found sub components
   */
  getAllSubcomponents(name) {
    let jCalLen = this.jCal[COMPONENT_INDEX].length;
    let i = 0;

    if (name) {
      let comps = this.jCal[COMPONENT_INDEX];
      let result = [];

      for (; i < jCalLen; i++) {
        if (name === comps[i][NAME_INDEX]) {
          result.push(
            this._hydrateComponent(i)
          );
        }
      }
      return result;
    } else {
      if (!this._components ||
          (this._hydratedComponentCount !== jCalLen)) {
        for (; i < jCalLen; i++) {
          this._hydrateComponent(i);
        }
      }

      return this._components || [];
    }
  }

  /**
   * Returns true when a named property exists.
   *
   * @param {String} name     The property name
   * @return {Boolean}        True, when property is found
   */
  hasProperty(name) {
    let props = this.jCal[PROPERTY_INDEX];
    let len = props.length;

    let i = 0;
    for (; i < len; i++) {
      // 0 is property name
      if (props[i][NAME_INDEX] === name) {
        return true;
      }
    }

    return false;
  }

  /**
   * Finds the first property, optionally with the given name.
   *
   * @param {String=} name        Lowercase property name
   * @return {?Property}     The found property
   */
  getFirstProperty(name) {
    if (name) {
      let i = 0;
      let props = this.jCal[PROPERTY_INDEX];
      let len = props.length;

      for (; i < len; i++) {
        if (props[i][NAME_INDEX] === name) {
          let result = this._hydrateProperty(i);
          return result;
        }
      }
    } else {
      if (this.jCal[PROPERTY_INDEX].length) {
        return this._hydrateProperty(0);
      }
    }

    return null;
  }

  /**
   * Returns first property's value, if available.
   *
   * @param {String=} name                    Lowercase property name
   * @return {Binary | Duration | Period |
   * Recur | Time | UtcOffset | Geo | string | null}         The found property value.
   */
  getFirstPropertyValue(name) {
    let prop = this.getFirstProperty(name);
    if (prop) {
      return prop.getFirstValue();
    }

    return null;
  }

  /**
   * Get all properties in the component, optionally filtered by name.
   *
   * @param {String=} name        Lowercase property name
   * @return {Property[]}    List of properties
   */
  getAllProperties(name) {
    let jCalLen = this.jCal[PROPERTY_INDEX].length;
    let i = 0;

    if (name) {
      let props = this.jCal[PROPERTY_INDEX];
      let result = [];

      for (; i < jCalLen; i++) {
        if (name === props[i][NAME_INDEX]) {
          result.push(
            this._hydrateProperty(i)
          );
        }
      }
      return result;
    } else {
      if (!this._properties ||
          (this._hydratedPropertyCount !== jCalLen)) {
        for (; i < jCalLen; i++) {
          this._hydrateProperty(i);
        }
      }

      return this._properties || [];
    }
  }

  /**
   * @private
   */
  _removeObjectByIndex(jCalIndex, cache, index) {
    cache = cache || [];
    // remove cached version
    if (cache[index]) {
      let obj = cache[index];
      if ("parent" in obj) {
          obj.parent = null;
      }
    }

    cache.splice(index, 1);

    // remove it from the jCal
    this.jCal[jCalIndex].splice(index, 1);
  }

  /**
   * @private
   */
  _removeObject(jCalIndex, cache, nameOrObject) {
    let i = 0;
    let objects = this.jCal[jCalIndex];
    let len = objects.length;
    let cached = this[cache];

    if (typeof(nameOrObject) === 'string') {
      for (; i < len; i++) {
        if (objects[i][NAME_INDEX] === nameOrObject) {
          this._removeObjectByIndex(jCalIndex, cached, i);
          return true;
        }
      }
    } else if (cached) {
      for (; i < len; i++) {
        if (cached[i] && cached[i] === nameOrObject) {
          this._removeObjectByIndex(jCalIndex, cached, i);
          return true;
        }
      }
    }

    return false;
  }

  /**
   * @private
   */
  _removeAllObjects(jCalIndex, cache, name) {
    let cached = this[cache];

    // Unfortunately we have to run through all children to reset their
    // parent property.
    let objects = this.jCal[jCalIndex];
    let i = objects.length - 1;

    // descending search required because splice
    // is used and will effect the indices.
    for (; i >= 0; i--) {
      if (!name || objects[i][NAME_INDEX] === name) {
        this._removeObjectByIndex(jCalIndex, cached, i);
      }
    }
  }

  /**
   * Adds a single sub component.
   *
   * @param {Component} component        The component to add
   * @return {Component}                 The passed in component
   */
  addSubcomponent(component) {
    if (!this._components) {
      this._components = [];
      this._hydratedComponentCount = 0;
    }

    if (component.parent) {
      component.parent.removeSubcomponent(component);
    }

    let idx = this.jCal[COMPONENT_INDEX].push(component.jCal);
    this._components[idx - 1] = component;
    this._hydratedComponentCount++;
    component.parent = this;
    return component;
  }

  /**
   * Removes a single component by name or the instance of a specific
   * component.
   *
   * @param {Component|String} nameOrComp    Name of component, or component
   * @return {Boolean}                            True when comp is removed
   */
  removeSubcomponent(nameOrComp) {
    let removed = this._removeObject(COMPONENT_INDEX, '_components', nameOrComp);
    if (removed) {
      this._hydratedComponentCount--;
    }
    return removed;
  }

  /**
   * Removes all components or (if given) all components by a particular
   * name.
   *
   * @param {String=} name            Lowercase component name
   */
  removeAllSubcomponents(name) {
    let removed = this._removeAllObjects(COMPONENT_INDEX, '_components', name);
    this._hydratedComponentCount = 0;
    return removed;
  }

  /**
   * Adds an {@link ICAL.Property} to the component.
   *
   * @param {Property} property      The property to add
   * @return {Property}              The passed in property
   */
  addProperty(property) {
    if (!(property instanceof Property)) {
      throw new TypeError('must be instance of ICAL.Property');
    }

    if (!this._properties) {
      this._properties = [];
      this._hydratedPropertyCount = 0;
    }

    if (property.parent) {
      property.parent.removeProperty(property);
    }

    let idx = this.jCal[PROPERTY_INDEX].push(property.jCal);
    this._properties[idx - 1] = property;
    this._hydratedPropertyCount++;
    property.parent = this;
    return property;
  }

  /**
   * Helper method to add a property with a value to the component.
   *
   * @param {String}               name         Property name to add
   * @param {String|Number|Object} value        Property value
   * @return {Property}                    The created property
   */
  addPropertyWithValue(name, value) {
    let prop = new Property(name);
    prop.setValue(value);

    this.addProperty(prop);

    return prop;
  }

  /**
   * Helper method that will update or create a property of the given name
   * and sets its value. If multiple properties with the given name exist,
   * only the first is updated.
   *
   * @param {String}               name         Property name to update
   * @param {String|Number|Object} value        Property value
   * @return {Property}                    The created property
   */
  updatePropertyWithValue(name, value) {
    let prop = this.getFirstProperty(name);

    if (prop) {
      prop.setValue(value);
    } else {
      prop = this.addPropertyWithValue(name, value);
    }

    return prop;
  }

  /**
   * Removes a single property by name or the instance of the specific
   * property.
   *
   * @param {String|Property} nameOrProp     Property name or instance to remove
   * @return {Boolean}                            True, when deleted
   */
  removeProperty(nameOrProp) {
    let removed = this._removeObject(PROPERTY_INDEX, '_properties', nameOrProp);
    if (removed) {
      this._hydratedPropertyCount--;
    }
    return removed;
  }

  /**
   * Removes all properties associated with this component, optionally
   * filtered by name.
   *
   * @param {String=} name        Lowercase property name
   * @return {Boolean}            True, when deleted
   */
  removeAllProperties(name) {
    let removed = this._removeAllObjects(PROPERTY_INDEX, '_properties', name);
    this._hydratedPropertyCount = 0;
    return removed;
  }

  /**
   * Returns the Object representation of this component. The returned object
   * is a live jCal object and should be cloned if modified.
   * @return {Object}
   */
  toJSON() {
    return this.jCal;
  }

  /**
   * The string representation of this component.
   * @return {String}
   */
  toString() {
    return stringify.component(
      this.jCal, this._designSet
    );
  }

  /**
   * Retrieve a time zone definition from the component tree, if any is present.
   * If the tree contains no time zone definitions or the TZID cannot be
   * matched, returns null.
   *
   * @param {String} tzid     The ID of the time zone to retrieve
   * @return {Timezone}  The time zone corresponding to the ID, or null
   */
  getTimeZoneByID(tzid) {
    // VTIMEZONE components can only appear as a child of the VCALENDAR
    // component; walk the tree if we're not the root.
    if (this.parent) {
      return this.parent.getTimeZoneByID(tzid);
    }

    // If there is no time zone cache, we are probably parsing an incomplete
    // file and will have no time zone definitions.
    if (!this._timezoneCache) {
      return null;
    }

    if (this._timezoneCache.has(tzid)) {
      return this._timezoneCache.get(tzid);
    }

    // If the time zone is not already cached, hydrate it from the
    // subcomponents.
    const zones = this.getAllSubcomponents('vtimezone');
    for (const zone of zones) {
      if (zone.getFirstProperty('tzid').getFirstValue() === tzid) {
        const hydratedZone = new Timezone({
          component: zone,
          tzid: tzid,
        });

        this._timezoneCache.set(tzid, hydratedZone);

        return hydratedZone;
      }
    }

    // Per the standard, we should always have a time zone defined in a file
    // for any referenced TZID, but don't blow up if the file is invalid.
    return null;
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * Primary class for expanding recurring rules.  Can take multiple rrules, rdates, exdate(s) and
 * iterate (in order) over each next occurrence.
 *
 * Once initialized this class can also be serialized saved and continue iteration from the last
 * point.
 *
 * NOTE: it is intended that this class is to be used with {@link ICAL.Event} which handles recurrence
 * exceptions.
 *
 * @example
 * // assuming event is a parsed ical component
 * var event;
 *
 * var expand = new ICAL.RecurExpansion({
 *   component: event,
 *   dtstart: event.getFirstPropertyValue('dtstart')
 * });
 *
 * // remember there are infinite rules so it is a good idea to limit the scope of the iterations
 * // then resume later on.
 *
 * // next is always an ICAL.Time or null
 * var next;
 *
 * while (someCondition && (next = expand.next())) {
 *   // do something with next
 * }
 *
 * // save instance for later
 * var json = JSON.stringify(expand);
 *
 * //...
 *
 * // NOTE: if the component's properties have changed you will need to rebuild the class and start
 * // over. This only works when the component's recurrence info is the same.
 * var expand = new ICAL.RecurExpansion(JSON.parse(json));
 *
 * @memberof ICAL
 */
class RecurExpansion {
  /**
   * Creates a new ICAL.RecurExpansion instance.
   *
   * The options object can be filled with the specified initial values. It can also contain
   * additional members, as a result of serializing a previous expansion state, as shown in the
   * example.
   *
   * @param {Object} options
   *        Recurrence expansion options
   * @param {Time} options.dtstart
   *        Start time of the event
   * @param {Component=} options.component
   *        Component for expansion, required if not resuming.
   */
  constructor(options) {
    this.ruleDates = [];
    this.exDates = [];
    this.fromData(options);
  }

  /**
   * True when iteration is fully completed.
   * @type {Boolean}
   */
  complete = false;

  /**
   * Array of rrule iterators.
   *
   * @type {RecurIterator[]}
   * @private
   */
  ruleIterators = null;

  /**
   * Array of rdate instances.
   *
   * @type {Time[]}
   * @private
   */
  ruleDates = null;

  /**
   * Array of exdate instances.
   *
   * @type {Time[]}
   * @private
   */
  exDates = null;

  /**
   * Current position in ruleDates array.
   * @type {Number}
   * @private
   */
  ruleDateInc = 0;

  /**
   * Current position in exDates array
   * @type {Number}
   * @private
   */
  exDateInc = 0;

  /**
   * Current negative date.
   *
   * @type {Time}
   * @private
   */
  exDate = null;

  /**
   * Current additional date.
   *
   * @type {Time}
   * @private
   */
  ruleDate = null;

  /**
   * Start date of recurring rules.
   *
   * @type {Time}
   */
  dtstart = null;

  /**
   * Last expanded time
   *
   * @type {Time}
   */
  last = null;

  /**
   * Initialize the recurrence expansion from the data object. The options
   * object may also contain additional members, see the
   * {@link ICAL.RecurExpansion constructor} for more details.
   *
   * @param {Object} options
   *        Recurrence expansion options
   * @param {Time} options.dtstart
   *        Start time of the event
   * @param {Component=} options.component
   *        Component for expansion, required if not resuming.
   */
  fromData(options) {
    let start = formatClassType(options.dtstart, Time);

    if (!start) {
      throw new Error('.dtstart (ICAL.Time) must be given');
    } else {
      this.dtstart = start;
    }

    if (options.component) {
      this._init(options.component);
    } else {
      this.last = formatClassType(options.last, Time) || start.clone();

      if (!options.ruleIterators) {
        throw new Error('.ruleIterators or .component must be given');
      }

      this.ruleIterators = options.ruleIterators.map(function(item) {
        return formatClassType(item, RecurIterator);
      });

      this.ruleDateInc = options.ruleDateInc;
      this.exDateInc = options.exDateInc;

      if (options.ruleDates) {
        this.ruleDates = options.ruleDates.map(item => formatClassType(item, Time));
        this.ruleDate = this.ruleDates[this.ruleDateInc];
      }

      if (options.exDates) {
        this.exDates = options.exDates.map(item => formatClassType(item, Time));
        this.exDate = this.exDates[this.exDateInc];
      }

      if (typeof(options.complete) !== 'undefined') {
        this.complete = options.complete;
      }
    }
  }

  /**
   * Compare two ICAL.Time objects.  When the second parameter is a DATE and the first parameter is
   * DATE-TIME, strip the time and compare only the days.
   *
   * @private
   * @param {Time} a   The one object to compare
   * @param {Time} b   The other object to compare
   */
  _compare_special(a, b) {
    if (!a.isDate && b.isDate)
      return new Time({ year: a.year, month: a.month, day: a.day }).compare(b);
    return a.compare(b);
  }

  /**
   * Retrieve the next occurrence in the series.
   * @return {Time}
   */
  next() {
    let iter;
    let next;
    let compare;

    let maxTries = 500;
    let currentTry = 0;

    while (true) {
      if (currentTry++ > maxTries) {
        throw new Error(
          'max tries have occurred, rule may be impossible to fulfill.'
        );
      }

      next = this.ruleDate;
      iter = this._nextRecurrenceIter(this.last);

      // no more matches
      // because we increment the rule day or rule
      // _after_ we choose a value this should be
      // the only spot where we need to worry about the
      // end of events.
      if (!next && !iter) {
        // there are no more iterators or rdates
        this.complete = true;
        break;
      }

      // no next rule day or recurrence rule is first.
      if (!next || (iter && next.compare(iter.last) > 0)) {
        // must be cloned, recur will reuse the time element.
        next = iter.last.clone();
        // move to next so we can continue
        iter.next();
      }

      // if the ruleDate is still next increment it.
      if (this.ruleDate === next) {
        this._nextRuleDay();
      }

      this.last = next;

      // check the negative rules
      if (this.exDate) {
        // EXDATE can be in DATE format, but DTSTART is in DATE-TIME format
        compare = this._compare_special(this.last, this.exDate);

        if (compare > 0) {
          this._nextExDay();
        }

        // if the current rule is excluded skip it.
        if (compare === 0) {
          this._nextExDay();
          continue;
        }
      }

      //XXX: The spec states that after we resolve the final
      //     list of dates we execute exdate this seems somewhat counter
      //     intuitive to what I have seen most servers do so for now
      //     I exclude based on the original date not the one that may
      //     have been modified by the exception.
      return this.last;
    }
  }

  /**
   * Converts object into a serialize-able format. This format can be passed
   * back into the expansion to resume iteration.
   * @return {Object}
   */
  toJSON() {
    function toJSON(item) {
      return item.toJSON();
    }

    let result = Object.create(null);
    result.ruleIterators = this.ruleIterators.map(toJSON);

    if (this.ruleDates) {
      result.ruleDates = this.ruleDates.map(toJSON);
    }

    if (this.exDates) {
      result.exDates = this.exDates.map(toJSON);
    }

    result.ruleDateInc = this.ruleDateInc;
    result.exDateInc = this.exDateInc;
    result.last = this.last.toJSON();
    result.dtstart = this.dtstart.toJSON();
    result.complete = this.complete;

    return result;
  }

  /**
   * Extract all dates from the properties in the given component. The
   * properties will be filtered by the property name.
   *
   * @private
   * @param {Component} component             The component to search in
   * @param {String} propertyName             The property name to search for
   * @return {Time[]}                         The extracted dates.
   */
  _extractDates(component, propertyName) {
    let result = [];
    let props = component.getAllProperties(propertyName);

    for (let i = 0, len = props.length; i < len; i++) {
      for (let prop of props[i].getValues()) {
        let idx = binsearchInsert(
          result,
          prop,
          (a, b) => a.compare(b)
        );

        // ordered insert
        result.splice(idx, 0, prop);
      }
    }

    return result;
  }

  /**
   * Initialize the recurrence expansion.
   *
   * @private
   * @param {Component} component    The component to initialize from.
   */
  _init(component) {
    this.ruleIterators = [];

    this.last = this.dtstart.clone();

    // to provide api consistency non-recurring
    // events can also use the iterator though it will
    // only return a single time.
    if (!component.hasProperty('rdate') &&
        !component.hasProperty('rrule') &&
        !component.hasProperty('recurrence-id')) {
      this.ruleDate = this.last.clone();
      this.complete = true;
      return;
    }

    if (component.hasProperty('rdate')) {
      this.ruleDates = this._extractDates(component, 'rdate');

      // special hack for cases where first rdate is prior
      // to the start date. We only check for the first rdate.
      // This is mostly for google's crazy recurring date logic
      // (contacts birthdays).
      if ((this.ruleDates[0]) &&
          (this.ruleDates[0].compare(this.dtstart) < 0)) {

        this.ruleDateInc = 0;
        this.last = this.ruleDates[0].clone();
      } else {
        this.ruleDateInc = binsearchInsert(
          this.ruleDates,
          this.last,
          (a, b) => a.compare(b)
        );
      }

      this.ruleDate = this.ruleDates[this.ruleDateInc];
    }

    if (component.hasProperty('rrule')) {
      let rules = component.getAllProperties('rrule');
      let i = 0;
      let len = rules.length;

      let rule;
      let iter;

      for (; i < len; i++) {
        rule = rules[i].getFirstValue();
        iter = rule.iterator(this.dtstart);
        this.ruleIterators.push(iter);

        // increment to the next occurrence so future
        // calls to next return times beyond the initial iteration.
        // XXX: I find this suspicious might be a bug?
        iter.next();
      }
    }

    if (component.hasProperty('exdate')) {
      this.exDates = this._extractDates(component, 'exdate');
      // if we have a .last day we increment the index to beyond it.
      // When DTSTART is in DATE-TIME format, EXDATE is in DATE format and EXDATE is
      // the date of DTSTART, _compare_special finds this out and compareTime fails.
      this.exDateInc = binsearchInsert(
        this.exDates,
        this.last,
        this._compare_special
      );

      this.exDate = this.exDates[this.exDateInc];
    }
  }

  /**
   * Advance to the next exdate
   * @private
   */
  _nextExDay() {
    this.exDate = this.exDates[++this.exDateInc];
  }

  /**
   * Advance to the next rule date
   * @private
   */
  _nextRuleDay() {
    this.ruleDate = this.ruleDates[++this.ruleDateInc];
  }

  /**
   * Find and return the recurrence rule with the most recent event and
   * return it.
   *
   * @private
   * @return {?RecurIterator}    Found iterator.
   */
  _nextRecurrenceIter() {
    let iters = this.ruleIterators;

    if (iters.length === 0) {
      return null;
    }

    let len = iters.length;
    let iter;
    let iterTime;
    let iterIdx = 0;
    let chosenIter;

    // loop through each iterator
    for (; iterIdx < len; iterIdx++) {
      iter = iters[iterIdx];
      iterTime = iter.last;

      // if iteration is complete
      // then we must exclude it from
      // the search and remove it.
      if (iter.completed) {
        len--;
        if (iterIdx !== 0) {
          iterIdx--;
        }
        iters.splice(iterIdx, 1);
        continue;
      }

      // find the most recent possible choice
      if (!chosenIter || chosenIter.last.compare(iterTime) > 0) {
        // that iterator is saved
        chosenIter = iter;
      }
    }

    // the chosen iterator is returned but not mutated
    // this iterator contains the most recent event.
    return chosenIter;
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 * @ignore
 * @typedef {import("./types.js").frequencyValues} frequencyValues
 * Imports the 'frequencyValues' type from the "types.js" module
 * @typedef {import("./types.js").occurrenceDetails} occurrenceDetails
 * Imports the 'occurrenceDetails' type from the "types.js" module
 */

/**
 * ICAL.js is organized into multiple layers. The bottom layer is a raw jCal
 * object, followed by the component/property layer. The highest level is the
 * event representation, which this class is part of. See the
 * {@tutorial layers} guide for more details.
 *
 * @memberof ICAL
 */
let Event$1 = class Event {
  /**
   * Creates a new ICAL.Event instance.
   *
   * @param {Component=} component              The ICAL.Component to base this event on
   * @param {Object} [options]                  Options for this event
   * @param {Boolean=} options.strictExceptions  When true, will verify exceptions are related by
   *                                              their UUID
   * @param {Array<Component|Event>=} options.exceptions
   *          Exceptions to this event, either as components or events. If not
   *            specified exceptions will automatically be set in relation of
   *            component's parent
   */
  constructor(component, options) {
    if (!(component instanceof Component)) {
      options = component;
      component = null;
    }

    if (component) {
      this.component = component;
    } else {
      this.component = new Component('vevent');
    }

    this._rangeExceptionCache = Object.create(null);
    this.exceptions = Object.create(null);
    this.rangeExceptions = [];

    if (options && options.strictExceptions) {
      this.strictExceptions = options.strictExceptions;
    }

    if (options && options.exceptions) {
      options.exceptions.forEach(this.relateException, this);
    } else if (this.component.parent && !this.isRecurrenceException()) {
      this.component.parent.getAllSubcomponents('vevent').forEach(function(event) {
        if (event.hasProperty('recurrence-id')) {
          this.relateException(event);
        }
      }, this);
    }
  }


  static THISANDFUTURE = 'THISANDFUTURE';

  /**
   * List of related event exceptions.
   *
   * @type {Event[]}
   */
  exceptions = null;

  /**
   * When true, will verify exceptions are related by their UUID.
   *
   * @type {Boolean}
   */
  strictExceptions = false;

  /**
   * Relates a given event exception to this object.  If the given component
   * does not share the UID of this event it cannot be related and will throw
   * an exception.
   *
   * If this component is an exception it cannot have other exceptions
   * related to it.
   *
   * @param {Component|Event} obj       Component or event
   */
  relateException(obj) {
    if (this.isRecurrenceException()) {
      throw new Error('cannot relate exception to exceptions');
    }

    if (obj instanceof Component) {
      obj = new Event(obj);
    }

    if (this.strictExceptions && obj.uid !== this.uid) {
      throw new Error('attempted to relate unrelated exception');
    }

    let id = obj.recurrenceId.toString();

    // we don't sort or manage exceptions directly
    // here the recurrence expander handles that.
    this.exceptions[id] = obj;

    // index RANGE=THISANDFUTURE exceptions so we can
    // look them up later in getOccurrenceDetails.
    if (obj.modifiesFuture()) {
      let item = [
        obj.recurrenceId.toUnixTime(), id
      ];

      // we keep them sorted so we can find the nearest
      // value later on...
      let idx = binsearchInsert(
        this.rangeExceptions,
        item,
        compareRangeException
      );

      this.rangeExceptions.splice(idx, 0, item);
    }
  }

  /**
   * Checks if this record is an exception and has the RANGE=THISANDFUTURE
   * value.
   *
   * @return {Boolean}        True, when exception is within range
   */
  modifiesFuture() {
    if (!this.component.hasProperty('recurrence-id')) {
      return false;
    }

    let range = this.component.getFirstProperty('recurrence-id').getParameter('range');
    return range === Event.THISANDFUTURE;
  }

  /**
   * Finds the range exception nearest to the given date.
   *
   * @param {Time} time   usually an occurrence time of an event
   * @return {?Event}     the related event/exception or null
   */
  findRangeException(time) {
    if (!this.rangeExceptions.length) {
      return null;
    }

    let utc = time.toUnixTime();
    let idx = binsearchInsert(
      this.rangeExceptions,
      [utc],
      compareRangeException
    );

    idx -= 1;

    // occurs before
    if (idx < 0) {
      return null;
    }

    let rangeItem = this.rangeExceptions[idx];

    /* c8 ignore next 4 */
    if (utc < rangeItem[0]) {
      // sanity check only
      return null;
    }

    return rangeItem[1];
  }

  /**
   * Returns the occurrence details based on its start time.  If the
   * occurrence has an exception will return the details for that exception.
   *
   * NOTE: this method is intend to be used in conjunction
   *       with the {@link ICAL.Event#iterator iterator} method.
   *
   * @param {Time} occurrence               time occurrence
   * @return {occurrenceDetails}            Information about the occurrence
   */
  getOccurrenceDetails(occurrence) {
    let id = occurrence.toString();
    let utcId = occurrence.convertToZone(Timezone.utcTimezone).toString();
    let item;
    let result = {
      //XXX: Clone?
      recurrenceId: occurrence
    };

    if (id in this.exceptions) {
      item = result.item = this.exceptions[id];
      result.startDate = item.startDate;
      result.endDate = item.endDate;
      result.item = item;
    } else if (utcId in this.exceptions) {
      item = this.exceptions[utcId];
      result.startDate = item.startDate;
      result.endDate = item.endDate;
      result.item = item;
    } else {
      // range exceptions (RANGE=THISANDFUTURE) have a
      // lower priority then direct exceptions but
      // must be accounted for first. Their item is
      // always the first exception with the range prop.
      let rangeExceptionId = this.findRangeException(
        occurrence
      );
      let end;

      if (rangeExceptionId) {
        let exception = this.exceptions[rangeExceptionId];

        // range exception must modify standard time
        // by the difference (if any) in start/end times.
        result.item = exception;

        let startDiff = this._rangeExceptionCache[rangeExceptionId];

        if (!startDiff) {
          let original = exception.recurrenceId.clone();
          let newStart = exception.startDate.clone();

          // zones must be same otherwise subtract may be incorrect.
          original.zone = newStart.zone;
          startDiff = newStart.subtractDate(original);

          this._rangeExceptionCache[rangeExceptionId] = startDiff;
        }

        let start = occurrence.clone();
        start.zone = exception.startDate.zone;
        start.addDuration(startDiff);

        end = start.clone();
        end.addDuration(exception.duration);

        result.startDate = start;
        result.endDate = end;
      } else {
        // no range exception standard expansion
        end = occurrence.clone();
        end.addDuration(this.duration);

        result.endDate = end;
        result.startDate = occurrence;
        result.item = this;
      }
    }

    return result;
  }

  /**
   * Builds a recur expansion instance for a specific point in time (defaults
   * to startDate).
   *
   * @param {Time=} startTime     Starting point for expansion
   * @return {RecurExpansion}    Expansion object
   */
  iterator(startTime) {
    return new RecurExpansion({
      component: this.component,
      dtstart: startTime || this.startDate
    });
  }

  /**
   * Checks if the event is recurring
   *
   * @return {Boolean}        True, if event is recurring
   */
  isRecurring() {
    let comp = this.component;
    return comp.hasProperty('rrule') || comp.hasProperty('rdate');
  }

  /**
   * Checks if the event describes a recurrence exception. See
   * {@tutorial terminology} for details.
   *
   * @return {Boolean}    True, if the event describes a recurrence exception
   */
  isRecurrenceException() {
    return this.component.hasProperty('recurrence-id');
  }

  /**
   * Returns the types of recurrences this event may have.
   *
   * Returned as an object with the following possible keys:
   *
   *    - YEARLY
   *    - MONTHLY
   *    - WEEKLY
   *    - DAILY
   *    - MINUTELY
   *    - SECONDLY
   *
   * @return {Object.<frequencyValues, Boolean>}
   *          Object of recurrence flags
   */
  getRecurrenceTypes() {
    let rules = this.component.getAllProperties('rrule');
    let i = 0;
    let len = rules.length;
    let result = Object.create(null);

    for (; i < len; i++) {
      let value = rules[i].getFirstValue();
      result[value.freq] = true;
    }

    return result;
  }

  /**
   * The uid of this event
   * @type {String}
   */
  get uid() {
    return this._firstProp('uid');
  }

  set uid(value) {
    this._setProp('uid', value);
  }

  /**
   * The start date
   * @type {Time}
   */
  get startDate() {
    return this._firstProp('dtstart');
  }

  set startDate(value) {
    this._setTime('dtstart', value);
  }

  /**
   * The end date. This can be the result directly from the property, or the
   * end date calculated from start date and duration. Setting the property
   * will remove any duration properties.
   * @type {Time}
   */
  get endDate() {
    let endDate = this._firstProp('dtend');
    if (!endDate) {
        let duration = this._firstProp('duration');
        endDate = this.startDate.clone();
        if (duration) {
            endDate.addDuration(duration);
        } else if (endDate.isDate) {
            endDate.day += 1;
        }
    }
    return endDate;
  }

  set endDate(value) {
    if (this.component.hasProperty('duration')) {
      this.component.removeProperty('duration');
    }
    this._setTime('dtend', value);
  }

  /**
   * The duration. This can be the result directly from the property, or the
   * duration calculated from start date and end date. Setting the property
   * will remove any `dtend` properties.
   * @type {Duration}
   */
  get duration() {
    let duration = this._firstProp('duration');
    if (!duration) {
      return this.endDate.subtractDateTz(this.startDate);
    }
    return duration;
  }

  set duration(value) {
    if (this.component.hasProperty('dtend')) {
      this.component.removeProperty('dtend');
    }

    this._setProp('duration', value);
  }

  /**
   * The location of the event.
   * @type {String}
   */
  get location() {
    return this._firstProp('location');
  }

  set location(value) {
    this._setProp('location', value);
  }

  /**
   * The attendees in the event
   * @type {Property[]}
   */
  get attendees() {
    //XXX: This is way lame we should have a better
    //     data structure for this later.
    return this.component.getAllProperties('attendee');
  }

  /**
   * The event summary
   * @type {String}
   */
  get summary() {
    return this._firstProp('summary');
  }

  set summary(value) {
    this._setProp('summary', value);
  }

  /**
   * The event description.
   * @type {String}
   */
  get description() {
    return this._firstProp('description');
  }

  set description(value) {
    this._setProp('description', value);
  }

  /**
   * The event color from [rfc7986](https://datatracker.ietf.org/doc/html/rfc7986)
   * @type {String}
   */
  get color() {
    return this._firstProp('color');
  }

  set color(value) {
    this._setProp('color', value);
  }

  /**
   * The organizer value as an uri. In most cases this is a mailto: uri, but
   * it can also be something else, like urn:uuid:...
   * @type {String}
   */
  get organizer() {
    return this._firstProp('organizer');
  }

  set organizer(value) {
    this._setProp('organizer', value);
  }

  /**
   * The sequence value for this event. Used for scheduling
   * see {@tutorial terminology}.
   * @type {Number}
   */
  get sequence() {
    return this._firstProp('sequence');
  }

  set sequence(value) {
    this._setProp('sequence', value);
  }

  /**
   * The recurrence id for this event. See {@tutorial terminology} for details.
   * @type {Time}
   */
  get recurrenceId() {
    return this._firstProp('recurrence-id');
  }

  set recurrenceId(value) {
    this._setTime('recurrence-id', value);
  }

  /**
   * Set/update a time property's value.
   * This will also update the TZID of the property.
   *
   * TODO: this method handles the case where we are switching
   * from a known timezone to an implied timezone (one without TZID).
   * This does _not_ handle the case of moving between a known
   *  (by TimezoneService) timezone to an unknown timezone...
   *
   * We will not add/remove/update the VTIMEZONE subcomponents
   *  leading to invalid ICAL data...
   * @private
   * @param {String} propName     The property name
   * @param {Time} time           The time to set
   */
  _setTime(propName, time) {
    let prop = this.component.getFirstProperty(propName);

    if (!prop) {
      prop = new Property(propName);
      this.component.addProperty(prop);
    }

    // utc and local don't get a tzid
    if (
      time.zone === Timezone.localTimezone ||
      time.zone === Timezone.utcTimezone
    ) {
      // remove the tzid
      prop.removeParameter('tzid');
    } else {
      prop.setParameter('tzid', time.zone.tzid);
    }

    prop.setValue(time);
  }

  _setProp(name, value) {
    this.component.updatePropertyWithValue(name, value);
  }

  _firstProp(name) {
    return this.component.getFirstPropertyValue(name);
  }

  /**
   * The string representation of this event.
   * @return {String}
   */
  toString() {
    return this.component.toString();
  }
};

function compareRangeException(a, b) {
  if (a[0] > b[0]) return 1;
  if (b[0] > a[0]) return -1;
  return 0;
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * The ComponentParser is used to process a String or jCal Object,
 * firing callbacks for various found components, as well as completion.
 *
 * @example
 * var options = {
 *   // when false no events will be emitted for type
 *   parseEvent: true,
 *   parseTimezone: true
 * };
 *
 * var parser = new ICAL.ComponentParser(options);
 *
 * parser.onevent(eventComponent) {
 *   //...
 * }
 *
 * // ontimezone, etc...
 *
 * parser.oncomplete = function() {
 *
 * };
 *
 * parser.process(stringOrComponent);
 *
 * @memberof ICAL
 */
class ComponentParser {
  /**
   * Creates a new ICAL.ComponentParser instance.
   *
   * @param {Object=} options                   Component parser options
   * @param {Boolean} options.parseEvent        Whether events should be parsed
   * @param {Boolean} options.parseTimezeone    Whether timezones should be parsed
   */
  constructor(options) {
    if (typeof(options) === 'undefined') {
      options = {};
    }

    for (let [key, value] of Object.entries(options)) {
      this[key] = value;
    }
  }

  /**
   * When true, parse events
   *
   * @type {Boolean}
   */
  parseEvent = true;

  /**
   * When true, parse timezones
   *
   * @type {Boolean}
   */
  parseTimezone = true;


  /* SAX like events here for reference */

  /**
   * Fired when parsing is complete
   * @callback
   */
  oncomplete = /* c8 ignore next */ function() {};

  /**
   * Fired if an error occurs during parsing.
   *
   * @callback
   * @param {Error} err details of error
   */
  onerror = /* c8 ignore next */ function(err) {};

  /**
   * Fired when a top level component (VTIMEZONE) is found
   *
   * @callback
   * @param {Timezone} component     Timezone object
   */
  ontimezone = /* c8 ignore next */ function(component) {};

  /**
   * Fired when a top level component (VEVENT) is found.
   *
   * @callback
   * @param {Event} component    Top level component
   */
  onevent = /* c8 ignore next */ function(component) {};

  /**
   * Process a string or parse ical object.  This function itself will return
   * nothing but will start the parsing process.
   *
   * Events must be registered prior to calling this method.
   *
   * @param {Component|String|Object} ical      The component to process,
   *        either in its final form, as a jCal Object, or string representation
   */
  process(ical) {
    //TODO: this is sync now in the future we will have a incremental parser.
    if (typeof(ical) === 'string') {
      ical = parse(ical);
    }

    if (!(ical instanceof Component)) {
      ical = new Component(ical);
    }

    let components = ical.getAllSubcomponents();
    let i = 0;
    let len = components.length;
    let component;

    for (; i < len; i++) {
      component = components[i];

      switch (component.name) {
        case 'vtimezone':
          if (this.parseTimezone) {
            let tzid = component.getFirstPropertyValue('tzid');
            if (tzid) {
              this.ontimezone(new Timezone({
                tzid: tzid,
                component: component
              }));
            }
          }
          break;
        case 'vevent':
          if (this.parseEvent) {
            this.onevent(new Event$1(component));
          }
          break;
        default:
          continue;
      }
    }

    //XXX: ideally we should do a "nextTick" here
    //     so in all cases this is actually async.
    this.oncomplete();
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * The main ICAL module. Provides access to everything else.
 *
 * @alias ICAL
 * @namespace ICAL
 * @property {ICAL.design} design
 * @property {ICAL.helpers} helpers
 */
var ICALmodule = {
  /**
   * The number of characters before iCalendar line folding should occur
   * @type {Number}
   * @default 75
   */
  foldLength: 75,

  debug: false,

  /**
   * The character(s) to be used for a newline. The default value is provided by
   * rfc5545.
   * @type {String}
   * @default "\r\n"
   */
  newLineChar: '\r\n',

  Binary,
  Component,
  ComponentParser,
  Duration,
  Event: Event$1,
  Period,
  Property,
  Recur,
  RecurExpansion,
  RecurIterator,
  Time,
  Timezone,
  TimezoneService,
  UtcOffset,
  VCardTime,

  parse,
  stringify,

  design,
  helpers
};

/* --- Obsidian Plugin: Periodic Notes Calendar View ---
  Developer: Tim Williams
  This plugin uses library: https://app.unpkg.com/ical.js@2.2.1/files/dist/ical.es5.min.cjs (c) 2024 Chris Lawley, MIT License  
*/


// Import necessary components from the Obsidian API.
const { Plugin, ItemView, PluginSettingTab, Notice, TFile, TFolder, Setting, Modal, Menu, AbstractInputSuggest, moment, MarkdownRenderer, setIcon, Platform } = require("obsidian");

// Define a unique type for this plugin's view.
const VIEW_TYPE_PERIOD = "calendar-period-week";

// Define the default settings for the plugin. This object is used as a fallback and for resetting configurations.
const DEFAULT_SETTINGS = {
    // General Display
    fontSize: "12px",
    dayNumberFontSize: "15px",
    navButtonHeight: "28px",
    headerRowBold: false,
    pwColumnBold: false,
    showCalendarGridLines: false,
    calendarGridGapWidth: "1px",
    contentBorderWidth: "1px",
    monthColorLight: "rgba(51, 51, 51, 1)", // Dark Grey for light mode
    monthColorDark: "rgba(255, 255, 255, 1)", // White for dark mode
    monthTitleFormat: "MMM YYYY",
    mainMonthYearTitleFontSize: "20px",
    mainMonthYearTitleBold: false,
    tabTitleFontSize: "15px",
    tabTitleBold: false,
    tabDisplayMode: "iconOnly",
    mobileTabDisplayMode: "iconOnly",
    collapsedNoteGroups: {},
    tabOrder: ["scratch", "notes", "tasks", "assets"],
    tabIcons: {
        scratch: "pencil",
        notes: "files",
        tasks: "check-circle",
        pinned: "pin",
        assets: "image-file"
    },
    assetsLookbackDays: 7,
    assetsDefaultView: 'grid',
    tabVisibility: {
        scratch: true,
        notes: true,
        tasks: true,
        assets: true,
    },
    calendarLayout: "normal",
    weekStartDay: "sunday",

    // Scratchpad
    fixedNoteFile: "ScratchPad.md",
    scratchFontSize: "14px",
    scratchBold: false,
    scratchFontFamily: "",
    scratchpadOpenAction: "new-tab",
    scratchpadHighlightColor: "rgba(255, 165, 0, 0.4)",
    scratchpad: {
        showPreviewToggle: false,
        showAddTaskButton: true,
        taskFormat: "- [ ] #Tag | üìÖ {friday}"
    },

    // Notes Tab
    ignoreFolders: [],
    pinTag: "pin",
    notesViewMode: "recent",
    notesFontSize: "14px",
    notesBold: false,
    notesOpenAction: "new-tab",
    notesLineHeight: 1.2,
    notesLookbackDays: 7,
    showNoteStatusDots: true,
    showNoteTooltips: true,
    pinnedNotesSortOrder: 'a-z', // can be 'a-z' or 'custom'
    pinnedNotesCustomOrder: [],  // Stores an array of note paths for custom order

    //Assets 
    hiddenAssetTypes: "base,canvas",
    showUnusedAssetsIndicator: true,
    assetsOpenAction: "new-tab",

    // Calendar Dots & Popups
    showOtherNoteDot: true,
    showModifiedFileDot: true,
    otherNoteIgnoreFolders: [],
    otherNoteHoverDelay: 100,
    popupHideDelay: 100,
    popupGap: -2,
    otherNotePopupFontSize: "14px",
    calendarDotSize: 4,
    showAssetDot: true,
    assetDotColor: "rgba(255, 0, 0, 1)", // Red
    calendarEventDotColor: 'rgba(148, 148, 148, 1)', // Grey
    assetIgnoreFolders: [],

    showPWColumnSeparator: true,
    pwColumnSeparatorColor: "rgba(128, 128, 128, 0.2)", // Grey separator line

    pwColumnFontColorLight: "rgba(51, 51, 51, 0.6)", // Dark grey for light mode
    pwColumnFontColorDark: "rgba(255, 255, 255, 0.6)", // White for dark mode
    weekNumberFontColorLight: "rgba(51, 51, 51, 0.6)", // Dark grey for light mode
    weekNumberFontColorDark: "rgba(255, 255, 255, 0.6)", // White for dark mode
    dayHeaderFontColorLight: "rgba(51, 51, 51, 0.6)", // Dark grey for light mode
    dayHeaderFontColorDark: "rgba(255, 255, 255, 0.6)", // White for dark mode

    dayCellFontColorLight: "rgba(51, 51, 51, 1)", // Current month dates - light
    dayCellFontColorDark: "rgba(255, 255, 255, 1)", // Current month dates - dark
    otherMonthFontColorLight: "rgba(153, 153, 153, 0.6)", // Previous/next month dates - light
    otherMonthFontColorDark: "rgba(153, 153, 153, 0.6)", // Previous/next month dates - dark

    // Task Count Badge
    taskIndicatorStyle: "heatmap", // 'none', 'badge', or 'heatmap'
    taskBadgeFontSize: "9px",
    taskBadgeColor: "rgba(100, 149, 237, 0.6)", // Cornflower Blue
    taskBadgeFontColor: "rgba(255, 255, 255, 1)", // White
    taskHeatmapStartColor: "rgba(100, 149, 237, 0.3)", // Cornflower Blue
    taskHeatmapMidColor: "rgba(255, 127, 80, 0.45)",    // Coral
    taskHeatmapEndColor: "rgba(255, 71, 71, 0.6)",     // Red
    taskHeatmapMidpoint: 5,
    taskHeatmapMaxpoint: 10,
    showTaskDot: false,
    taskDotColor: "rgba(200, 100, 200, 1)",

    // Daily Notes
    dailyNotesFolder: "Daily Notes",
    dailyNoteDateFormat: "YYYY-MM-DD",
    dailyNoteTemplatePath: "",
    dailyNoteOpenAction: "new-tab",

    //period / week numbers 
    showWeekNumbers: true,
    weekNumberType: "calendar", // 'period' or 'calendar'
    weekNumberColumnLabel: "CW",

    //calendar events (from ICS) settings
    icsUrl: '',
    showIcsDot: true,
    icsRefreshInterval: 60, // in minutes
    calendarEventsPlaceholder: '%%CALENDAR_EVENTS%%',
    calendarEventsFormat: '- {{startTime}} - {{endTime}}: {{summary}}',
    calendarEventIndicatorStyle: 'dot', // Options: 'dot', 'heatmap', 'badge'

    // Functional
    autoReloadInterval: 5000,
    startOfPeriod1Date: "2025-03-02",
    showPWColumn: false,
    pwFormat: "P#W#",
    enableRowHighlight: true,
    enableColumnHighlight: true,
    enableRowToDateHighlight: false,
    highlightCurrentWeek: false,

    // Colors
    selectedTabColor: "rgba(102, 102, 102, 1)",
    todayHighlightColorLight: "rgba(255, 255, 0, 0.3)", // Light yellow
    todayHighlightColorDark: "rgba(40, 120, 240, 1)",   // blue
    notesHoverColor: "rgba(171, 171, 171, 0.15)",
    dailyNoteDotColor: "rgba(74, 144, 226, 1)",
    noteCreatedColor: "rgba(76, 175, 80, 1)",
    noteModifiedColor: "rgba(255, 152, 0, 1)",
    otherNoteDotColor: "rgba(76, 175, 80, 1)",
    calendarModifiedDotColor: "rgba(255, 152, 0, 1)",
    rowHighlightColorLight: "rgba(163, 163, 163, 0.2)", // Lighter Grey
    rowHighlightColorDark: "rgba(51, 51, 51, 0.7)",     // Dark Grey
    dateCellHoverColorLight: "rgba(105, 105, 105, 0.75)",     // Light Grey
    dateCellHoverColorDark: "rgba(51, 51, 51, 1)",
    assetDotColor: "rgba(255, 0, 0, 1)",
    todayHighlightStyle: "circle", // 'cell' or 'circle'
    todayCircleColor: "rgba(40, 120, 240, 1)", // Cornflower Blue
    highlightTodayLabels: true,
    highlightTodayPWLabel: true,
    highlightWeekends: false, // New setting
    weekendShadeColorLight: "rgba(163, 163, 163, 0.15)", // Subtle grey for light theme
    weekendShadeColorDark: "rgba(51, 51, 51, 0.4)", // Subtle grey for dark theme


    // Weekly Notes (NEW)
    enableWeeklyNotes: true,
    weeklyNoteFolder: "Weekly Notes",
    weeklyNoteFormat: "YYYY-[W]CW", // e.g., 2025-W38
    weeklyNoteTemplate: "",
    showWeeklyNoteDot: true,
    weeklyNoteDotColor: "rgba(160, 115, 240, 1)",

    // Tasks Tab Settings
    taskIgnoreFolders: [],
    taskSortOrder: "dueDate",
    taskGroupBy: "date",
    taskDateGroupsToShow: ["overdue", "today", "tomorrow", "next7days", "future"],
    taskTextTruncate: false,
    showCompletedTasksToday: true,
    taskHeadingFontSize: "13px",
    taskTextFontSize: "14px",
    taskGroupIcons: {
        overdue: "alarm-clock-off",
        today: "target",
        tomorrow: "arrow-right",
        next7days: "calendar-days",
        future: "telescope",
        noDate: "help-circle",
        tag: "tag"
    },
    taskGroupColorOverdue: "rgba(255, 71, 71, 0.15)",
    taskGroupColorToday: "rgba(255, 165, 0, 0.15)",
    taskGroupColorTomorrow: "rgba(64, 158, 255, 0.15)",
    taskGroupColorNext7Days: "rgba(77, 171, 185, 0.15)",
    taskGroupColorFuture: "rgba(128, 128, 128, 0.15)",
    taskGroupColorNoDate: "rgba(105, 180, 105, 0.15)",
    taskGroupColorTag: "rgba(105, 105, 105, 0.15)",
    showPreviewToggle: true,
    showAddTaskButton: true,
    collapsedTaskGroups: {},
    collapsedAssetGroups: {},
};

// A string containing all the CSS for the plugin. It's injected into the document head on load.
const PLUGIN_STYLES = `
body.theme-light {
    --month-color-themed: var(--month-color-light);
    --today-highlight-color-themed: var(--today-highlight-color-light);
    --date-cell-hover-color-themed: var(--date-cell-hover-color-light);
    --pw-column-font-color-themed: var(--pw-column-font-color-light);
    --week-number-font-color-themed: var(--week-number-font-color-light);
    --day-header-font-color-themed: var(--day-header-font-color-light);
    --day-cell-font-color-themed: var(--day-cell-font-color-light);
    --other-month-font-color-themed: var(--other-month-font-color-light);
    --weekend-shade-color-themed: var(--weekend-shade-color-light);
}
body.theme-dark {
    --month-color-themed: var(--month-color-dark);
    --today-highlight-color-themed: var(--today-highlight-color-dark);
    --date-cell-hover-color-themed: var(--date-cell-hover-color-dark);
    --pw-column-font-color-themed: var(--pw-column-font-color-dark);
    --week-number-font-color-themed: var(--week-number-font-color-dark);
    --day-header-font-color-themed: var(--day-header-font-color-dark);
    --day-cell-font-color-themed: var(--day-cell-font-color-dark);
    --other-month-font-color-themed: var(--other-month-font-color-dark);
    --weekend-shade-color-themed: var(--weekend-shade-color-dark);
}

/* Day header row font color */
.period-calendar-table thead th {
    color: var(--day-header-font-color-themed);
}

/* Period/Week column font color */
.period-calendar-table .pw-label-cell,
.period-calendar-table .pw-label-cell .day-number {
    font-weight: var(--pw-column-font-weight);
    font-size: var(--header-font-size);
    color: var(--pw-column-font-color-themed);
}

/* Highlight today's P/W column with today color */
.period-calendar-table .pw-label-cell.today-pw-label .day-number,
.period-calendar-table .week-number-cell.today-pw-label .day-number {
    color: var(--today-circle-color);
    
}

/* Day header row font color */
.period-calendar-table thead th {
    color: var(--day-header-font-color-themed);
}

/* Highlight today's day column header with today color */
.period-calendar-table thead th.today-day-header {
    color: var(--today-circle-color);
    
}

/* Week number column font color */
.period-calendar-table .week-number-cell,
.period-calendar-table .week-number-cell .day-number {
    font-weight: var(--pw-column-font-weight);
    font-size: var(--header-font-size);
    color: var(--week-number-font-color-themed);
}


/* --- Main Layout --- */
.period-month-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  padding-top: 6px;
}
.month-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.1rem 0.25rem;
  margin-bottom: 0.5rem; /* Specific margin for spacing */
}
.month-header-title {
  font-size: var(--main-month-year-title-font-size);   
  font-weight: var(--main-month-year-title-weight); 
  color: var(--month-color-themed);
  white-space: nowrap;
  cursor: pointer;
}
.month-header-nav {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}
.month-header-nav button {
  height: var(--nav-button-height);
  min-height: var(--nav-button-height);
  padding: 0; /* Remove horizontal padding */
  width: var(--nav-button-height); /* Make the button square */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

/* Accent color for the locked popup button on desktop */
.month-header-nav button.popup-locked .svg-icon {
    color: var(--interactive-accent);
}

/* Specific override for mobile to ensure accent color is applied */
body.is-mobile .month-header-nav button.popup-locked .svg-icon {
    color: var(--interactive-accent);
}

/* --- Chevron Button Animation --- */
.month-header-nav button[aria-label="Toggle calendar visibility"] .svg-icon {
  transition: transform 0.3s ease-in-out;
}
.period-month-container.calendar-collapsed .month-header-nav button[aria-label="Toggle calendar visibility"] .svg-icon {
  transform: rotate(180deg);
}
body.is-mobile .month-header-nav button .svg-icon {
  width: 18px;
  height: 18px;
  color: var(--icon-color);
  flex-shrink: 0;
}
/* --- Calendar Collapse Animation --- */
.calendar-table-wrapper {
  flex-shrink: 0;
  max-height: 500px; 
  transition: max-height 0.3s ease-in-out, margin-bottom 0.3s ease-in-out;
  overflow: hidden;
  margin-bottom: 0.5rem;
}
.period-month-container.calendar-collapsed .calendar-table-wrapper {
  max-height: 0;
  margin-bottom: 0;
}

/* --- Calendar Table --- */
.period-calendar-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
}
.period-calendar-table th, .period-calendar-table td {
  text-align: center;
  vertical-align: middle;
  padding: 0;
  font-size: var(--header-font-size);
}
.period-calendar-table th {
    vertical-align: middle;
}

.period-calendar-table th {
  font-weight: var(--header-row-font-weight);
  height: 2.5em;
}
.period-calendar-table tbody td {
 cursor: pointer;
 overflow: hidden; 
 position: relative;
}
.period-month-container:not(.hide-grid) .period-calendar-table td {
    border: var(--calendar-grid-gap-width) solid var(--background-modifier-border);
}








/* 
.period-month-container.hide-grid.tabs-are-visible:not(.vertical-view-active) .period-calendar-table tbody tr:last-child td {
  border-bottom: 1px solid var(--background-modifier-border);
}
*/

/* --- Rounded Row Highlight --- */
.period-calendar-table .current-week-row td:first-child {
    border-top-left-radius: 6px;
    border-bottom-left-radius: 6px;
}

.period-calendar-table .current-week-row td:last-child {
    border-top-right-radius: 6px;
    border-bottom-right-radius: 6px;
}

.period-calendar-table tbody td:not(.pw-label-cell):not(.week-number-cell):hover .day-content {
  background-color: var(--date-cell-hover-color-themed) !important;
  border-radius: 6px;
  transition: background-color 0.15s ease;
}

/* Override even inline styles with !important on hover */
.period-calendar-table tbody td:not(.pw-label-cell):not(.week-number-cell):hover .day-content[style] {
    background-color: var(--date-cell-hover-color-themed) !important;
}

body .period-month-container.today-style-cell .today-cell .day-content {
  background-color: var(--today-highlight-color-themed);
  border-radius: 6px;
}

body .period-month-container.today-style-cell .period-calendar-table tbody tr.current-week-row td.today-cell .day-content {
    background-color: var(--today-highlight-color-themed) !important;
}

.period-month-container.today-style-circle .today-cell {
    position: relative; 
}
.period-month-container.today-style-circle .today-cell .day-number {
    background-color: var(--today-circle-color);
    /*color: var(--text-on-accent); Make text high-contrast */
    position: relative;
    z-index: 2;
    border-radius: 50%; /* Make it a circle */
    width: 1.5em;       /* was 1.7 Slightly increase size for better padding */
    height: 1.5em;      /* was 1.7 */ 
    display: flex;      /* Use flexbox for centering text */
    align-items: center; /* Center text vertically */
    justify-content: center; /* Center text horizontally */
    /* 'margin: auto' is removed to allow the parent grid to handle centering */
}

.period-month-container.today-style-number .today-cell .day-number {
    /*color: var(--text-on-accent);*/
    background-color: var(--today-circle-color);
    border-radius: 6px; /* A slightly smaller corner radius */
    padding: 1px 3px; /* Minimal padding for a tight fit */
    display: inline-block;
    position: relative;
    z-index: 2; /* Ensures it's drawn on top of the heatmap */
}

.period-calendar-table .pw-label-cell,
.period-calendar-table .week-number-cell {
  font-weight: var(--pw-column-font-weight);
  font-size: var(--header-font-size);
  position: relative;
}

/* --- Period/Week Column Separator Line --- */
.period-calendar-table tbody td.first-date-column::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 1px;
    background-color: var(--pw-separator-color);
    z-index: 1;
}

.week-dots-container {
    position: absolute;
    left: 0;
    width: 100%;
    display: flex;
    justify-content: center;
}

/* --- Calendar Dots Color Variables --- */
.calendar-dot {
    width: var(--calendar-dot-size);
    height: var(--calendar-dot-size);
    border-radius: 50%;
}

.ics-event-dot {
    background-color: var(--calendar-event-dot-color);
}

/* --- Calendar Layout Styles --- */
.period-month-container.layout-spacious .day-content {
    height: 3.8em;
}
.period-month-container.layout-normal .day-content {
    height: 3.0em;
}
.period-month-container.layout-condensed .day-content {
    height: 2.8em; /* Even smaller height */
    
}


/* Layout-specific rules for both dot containers */
.period-month-container.layout-spacious .dots-container,
.period-mont-container.layout-normal .week-dots-container {
    bottom: 8px;
}
.period-month-container.layout-normal .dots-container,
.period-month-container.layout-normal .week-dots-container {
    bottom: 4px;
}
.period-month-container.layout-condensed .dots-container,
.period-month-container.layout-condensed .week-dots-container {
    bottom: 2px; /* Moves dots closer to the bottom edge */
}


/* The weekly dot now just sets the color and re-uses .calendar-dot for its size */
.weekly-note-dot {
    background-color: var(--weekly-note-dot-color);
}

/* --- Calendar Day Content & Dots (REFACTORED) --- */
.day-content {
    display: grid; 
    grid-template-rows: auto 1fr minmax(10px, auto); /* 3 rows: badge(auto), number(fills space), dots(auto) */
    grid-template-areas:  /* Name the grid areas for clarity */
        "badge"
        "number"
        "dots";
    height: 3.5em;
    position: relative; /* Keep for popups */
    border-radius: 6px;
    box-sizing: border-box;
    transition: background-color 0.2s ease-in-out;
}

.day-number {
    grid-area: number; /* Place in the 'number' area */
    align-self: center;  /* Center vertically in its row */
    justify-self: center; /* Center horizontally */
    font-size: var(--day-number-font-size);
    color: var(--day-cell-font-color-themed);
}

.day-number-other-month {
    color: var(--other-month-font-color-themed) !important;
}


.dots-container {
    grid-area: dots; /* Place in the 'dots' area */
    align-self: end; /* Align to the bottom of its row */
    
    /* Simplified styles, as absolute positioning is no longer needed */
    display: flex;
    gap: 3px;
    justify-content: center;
    width: 100%;
}

/* --- Calendar Layout Styles --- */
.period-month-container.layout-spacious .dots-container  {
    padding-bottom: 10px; /* Creates space from the bottom edge */
}
.period-month-container.layout-spacious .dots-container:empty {
    padding-top: var(--calendar-dot-size);
}


.period-month-container.layout-normal .dots-container  {
    padding-bottom: 6px; /* Creates space from the bottom edge */
}
.period-month-container.layout-condensed .dots-container  {
    padding-bottom: 4px; /* Creates space from the bottom edge */
}

.task-count-badge {
    position: absolute;
    top: 2px;
    right: 3px;
    z-index: 3;
    width: 1.6em;
    height: 1.6em;
    border-radius: 50%;
    background-color: var(--task-badge-color);
    color: var(--task-badge-font-color);
    font-size: var(--task-badge-font-size);
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1; /* Prevents text from shifting vertically */
}


.calendar-dot {
  width: var(--calendar-dot-size);
  height: var(--calendar-dot-size);
  border-radius: 50%;
}
.other-note-dot { background-color: var(--other-note-dot-color); }
.modified-file-dot { background-color: var(--calendar-modified-dot-color); }
.asset-dot { background-color: var(--asset-dot-color); }
.task-dot { background-color: var(--task-dot-color); } 
.period-month-daily-note-dot { background-color: var(--daily-note-dot-color, var(--text-accent)); }
.period-month-daily-note-dot-other-month { opacity: 0.4; }

/* --- Tabs & Search Header --- */
.tabs-content-wrapper {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;
  min-height: 0;
}
.note-tab-header {
  display: flex;
  flex-shrink: 0;
  width: 100%;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 6px;
}
.tab-container {
  display: flex;
  align-items: center;
}
.note-tab {
  position: relative;
  flex: 0 1 auto;
  text-align: center;
  padding: 0.5rem 1rem;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  font-size: var(--tab-title-font-size);
  font-weight: var(--tab-title-bold);
  white-space: nowrap;
}
.note-tab:hover { background-color: var(--background-modifier-hover); }
.note-tab.active {
  border-bottom-color: var(--selected-tab-color);
}
.note-tab.dragging {
  opacity: 0.5;
  cursor: grabbing;
}
.note-tab.drag-over-indicator-before::before,
.note-tab.drag-over-indicator-after::after {
  content: '';
  position: absolute;
  top: 10%;
  bottom: 10%;
  width: 2px;
  background-color: var(--selected-tab-color);
}
.note-tab.drag-over-indicator-before::before { left: 0; }
.note-tab.drag-over-indicator-after::after { right: 0; }
.search-wrapper {
  flex-grow: 1;
  display: flex;
  justify-content: flex-end;
  padding-right: 8px;
}

/* --- Unified Search Input --- */
.pm-search-container {
    display: flex;
    align-items: center;
    position: relative;
    width: 100%;
}
.pm-search-input {
    background-color: var(--background-secondary);
    border: 1px solid var(--background-modifier-border);
    border-radius: var(--radius-s);
    color: var(--text-normal);
    width: 100%;
    padding: 4px 28px 4px 8px;
    box-sizing: border-box;
    line-height: var(--line-height-normal);
}
.pm-search-input:focus {
    border-color: var(--interactive-accent);
    box-shadow: 0 0 0 1px var(--interactive-accent);
}

/* --- Scratchpad Content & Buttons --- */
.scratchpad-wrapper {
  flex: 1 1 auto;
  display: grid;
  width: 100%;
  height: 100%;
  position: relative;
}
.scratch-content:focus {
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
}
/* This is the visual cutout */
.scratchpad-wrapper::before {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  width: 56px;
  height: 64px;
  background-color: var(--background-secondary);
  z-index: 3;
  border-bottom-left-radius: var(--radius-m);
}
.scratchpad-wrapper.markdown-preview-view {
  align-content: start; 
}
.scratchpad-wrapper.markdown-preview-view p {
  margin-block-start: 0 !important;
  margin-block-end: 0.5em !important; 
}
.scratchpad-actions-container {
  position: absolute;
  top: 8px;
  right: 8px;
  z-index: 10;
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.scratchpad-action-btn {
  cursor: pointer;
  background-color: var(--background-modifier-hover);
  border: 1px solid var(--background-modifier-border);
  border-radius: var(--radius-s);
  padding: 4px;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}
.scratchpad-action-btn .svg-icon {
    width: 16px;
    height: 16px;
}
.scratchpad-action-btn:hover {
  background-color: var(--background-modifier-border);
}

/* --- Scratchpad Textarea & Highlighter --- */
.scratch-base {
  margin: 0;
  padding: 0.75rem 3.5rem 0.5rem 0.5rem;
  border: none;
  font-family: var(--scratch-font-family);
  font-size: var(--scratch-font-size);
  font-weight: var(--scratch-bold);
  line-height: 1.5;
  white-space: pre-wrap;
  word-break: break-word;
  box-sizing: border-box;
  width: 100%;
  height: 100%;
  grid-area: 1 / 1;
  overflow: auto;
}
.scratch-highlighter {
  z-index: 1;
  color: transparent;
  pointer-events: none;
}
.scratch-highlighter mark {
  color: transparent;
  background-color: var(--scratchpad-highlight-color);
  border-radius: 3px;
}
.scratch-content {
  z-index: 2;
  background-color: transparent;
  resize: none;
}
.scratch-content:hover {
  background-color: transparent !important;
}
.scratch-content::selection {
  background-color: var(--scratchpad-highlight-color) !important;
}

/* --- Notes & Tasks List Styles --- */
.notes-container, .tasks-container {
  overflow-y: auto;
  flex: 1 1 auto;
  min-height: 0;
  padding: 4px 4px 48px;
}
.note-row, .task-row {
  display: flex;
  align-items: center;
  padding: 8px;
  border-radius: 8px;
  cursor: pointer;
  outline: none;
  width: 100%;
  box-sizing: border-box;
  overflow: hidden;
  position: relative;
}
.note-row {
  gap: 1em;
}
.task-row {
  gap: 0.5em;
}
.task-row .task-text > p {
    margin: 0;
    padding: 0;
}
.note-row:hover, .task-row:hover, .note-row:focus, .task-row:focus {
  background-color: var(--notes-hover-color);
}
.note-status-dot { 
  width: 8px; 
  height: 8px; 
  border-radius: 50%; 
  flex-shrink: 0; 
}
.note-status-dot-created { background-color: var(--note-created-color); }
.note-status-dot-modified { background-color: var(--note-modified-color); }
.note-row .note-title-wrapper { 
  display: flex; 
  align-items: flex-start;
  gap: 6px; 
  flex: 1; 
  min-width: 0; 
}
.note-row .note-title { 
  white-space: nowrap; 
  overflow: hidden; 
  text-overflow: ellipsis; 
  font-size: var(--notes-font-size); 
  font-weight: var(--notes-bold); 
}
.note-row .note-meta-container {
  display: flex;
  align-items: center;
  gap: 1em;
  flex-shrink: 0;
  margin-left: 1em;
}
.note-row .note-file-size {
  font-size: 0.8em;
  color: var(--text-muted);
  width: 65px;
  text-align: right;
}
.note-row .note-mod-date { 
  white-space: nowrap; 
  font-size: 0.8em; 
  color: var(--text-muted);
  width: 85px;
  text-align: right 
}

/* --- Tasks Specific Styles --- */
.task-group-container {
  margin-bottom: 10px;
  padding: 8px;
  border-radius: 8px;
}

/* --- Task Group Collapse Styles --- */
.task-group-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
  user-select: none;
  font-size: var(--task-heading-font-size);
}
.task-group-header-content {
  display: flex;
  align-items: center;
  gap: 6px;
}
.task-group-collapse-icon .svg-icon {
  transition: transform 0.3s ease-in-out;
}
.task-group-container.is-collapsed .task-group-collapse-icon .svg-icon {
  transform: rotate(-180deg);
}
.task-list-wrapper {
  transition: height 0.35s ease-in-out, opacity 0.35s ease-in-out;
  overflow: hidden;
  opacity: 1;
  height: var(--task-list-height, auto);
}

.task-group-container.is-collapsed .task-list-wrapper {
  height: 0;
  opacity: 0;
}


.task-group-empty-message {
  font-style: italic;
  color: var(--text-muted);
  padding: 4px 0;
  font-size: 0.9em;
}
.task-row .task-text {
  flex-grow: 1;
  font-size: var(--task-text-font-size);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.task-row .task-text.completed {
  text-decoration: line-through;
  color: var(--text-muted);
}
.tasks-container.show-full-text .task-row {
  align-items: flex-start;
}
.tasks-container.show-full-text .task-text {
  white-space: normal;
  word-break: break-word;
}
.tasks-container.show-full-text .task-row .task-checkbox {
  margin-top: 2px;
}

/* --- Popups & Tooltips --- */
/* Common base styles for popups */
.other-notes-popup, .custom-suggestion-container {
    position: absolute;
    z-index: 100;
    background-color: var(--background-secondary);
    border: 1px solid #4a4a4a;
    border-radius: 15px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    max-width: 650px;
}

/* Main popup specific styles */
.other-notes-popup {
    padding: 0;
    display: flex;
    flex-direction: column;
    overflow: hidden; /* Hide overflow on the main container */
    max-height: 250px; /* Increased slightly for mobile header */
}

/* Popup header */
.popup-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    border-bottom: 1px solid var(--background-modifier-border);
    flex-shrink: 0; /* Prevent header from shrinking */
    cursor: pointer;
    gap: 10px;
}
.popup-header-title {
    font-weight: normal;
    color: var(--text-muted);
    flex-grow: 1; /* Allow title to take available space */
    flex-shrink: 1; /* Allow title to shrink if needed */
    min-width: 0; /* Important for text-overflow to work with flex items */
    white-space: nowrap; /* Prevent title from wrapping */
    overflow: hidden; /* Hide overflow */
    text-overflow: ellipsis; /* Add ellipsis for long titles */
    font-size: --var(--other-note-popup-font-size);
}

.popup-close-btn {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    /* Default for DARK theme: Light grey circle */
    background-color: #9c9b9b; 
    /* Default for DARK theme: Dark 'x' icon */
    color: #383838; 
    transition: background-color 0.1s ease-in-out, color 0.1s ease-in-out;
}

.popup-close-btn:hover {
    /* Hover for DARK theme: Even lighter circle */
    background-color: #f5f5f5;
}

/* --- Light Theme Overrides --- */
body.theme-light .popup-close-btn {
    /* Default for LIGHT theme: Dark grey circle */
    background-color: #5c5c5c;
    /* Default for LIGHT theme: White 'x' icon */
    color: #ffffff;
}

body.theme-light .popup-close-btn:hover {
    /* Hover for LIGHT theme: Even darker circle */
    background-color: #383838;
}

.popup-close-btn .svg-icon {
    width: 14px;
    height: 14px;
}


/* Content wrapper for scrolling and padding */
.popup-content-wrapper {
    padding: 8px;
    overflow-y: auto;
}

/* Suggestion container specific styles */
.custom-suggestion-container {
    z-index: 999;
    margin-top: 4px;
    padding: 8px;
    max-height: 200px;
    overflow-y: auto;
}

.other-notes-popup-item {
  display: flex; 
  align-items: flex-start; 
  gap: 8px; 
  padding: 8px; 
  border-radius: 8px;
  overflow: hidden;
  cursor: pointer; 
  white-space: normal;
  word-break: break-word; 
  text-overflow: ellipsis; 
  font-size: var(--other-note-popup-font-size);
}
.other-notes-popup-item:hover { 
  background-color: var(--background-modifier-hover); 
}
.other-notes-popup-item .svg-icon {
  flex-shrink: 0;
  width: 1.2em;
  height: 1.2em;
}
.note-row .note-status-dot,
.other-notes-popup-item .popup-file-dot,
.other-notes-popup-item .popup-asset-thumbnail {
    margin-top: 5px; 
}
.other-notes-popup-item p {
    margin: 0;
}
.popup-file-dot { 
  width: 8px; 
  height: 8px; 
  border-radius: 50%; 
  flex-shrink: 0; 
}
.custom-suggestion-item { 
  padding: 8px 12px; 
  cursor: pointer; 
  font-size: var(--font-ui-small); 
}
.custom-suggestion-item:hover { 
  background-color: var(--background-modifier-hover); 
}
.setting-item-control { 
  position: relative; 
}
body:has(.note-title-wrapper:hover) .tooltip, 
body:has(.note-title-cell:hover) .tooltip,
body:has(.task-text:hover) .tooltip {
  text-align: left; 
  padding: 6px 10px; 
  white-space: pre-wrap; 
  max-width: 400px; 
  transition-delay: 0.5s !important; 
  background-color: var(--background-secondary); 
  box-shadow: 0 4px 12px rgba(0,0,0,0.2); 
  border-radius: 15px; 
  border: 1px solid #4a4a4a; 
  font-size: var(--other-note-popup-font-size); 
  color: var(--text-normal); 
  font-weight: normal;
}


/* --- Vertical View --- */
.vertical-calendar-scroller { 
  flex: 1; 
  overflow-y: auto; 
  padding: 0 0.5rem; 
}
.vertical-month-wrapper { 
  margin-bottom: 2rem; 
}
.vertical-month-title {
  font-size: var(--main-month-year-title-font-size);
  font-weight: var(--main-month-year-title-weight);
  color: var(--month-color-themed);
  position: sticky; 
  top: 0; 
  background-color: var(--background-secondary);
  z-index: 10;
  margin: 0.6rem 0; 
  height: 2rem; 
  display: flex; 
  align-items: center; 
  justify-content: center;
}
.period-month-container.vertical-view-active .tabs-content-wrapper { display: none; }
.period-month-container:not(.vertical-view-active) .vertical-calendar-scroller { display: none; }

/* --- Mobile-Specific Overrides --- */
.is-mobile .notes-table { 
  width: 100%; 
  border-collapse: collapse; 
  table-layout: fixed; 
}
.is-mobile .notes-table-row { 
  cursor: pointer; 
  border-bottom: 1px solid var(--background-modifier-border); 
}
.is-mobile .notes-table .note-title-cell, .is-mobile .notes-table .note-date-cell { 
  padding: 0.6rem 0.5rem; 
  vertical-align: top; 
}
.is-mobile .notes-table .note-title-cell { 
  display: flex; 
  align-items: center; 
  gap: 8px; 
  white-space: normal; 
  word-break: break-word; 
  font-size: var(--notes-font-size); 
  font-weight: var(--notes-bold); 
}
.is-mobile .notes-table .note-date-cell { 
  width: 85px; 
  text-align: right; 
  white-space: nowrap; 
  font-size: 0.8em; 
  color: var(--text-muted); 
}
.is-mobile .period-calendar-table th, .is-mobile .period-calendar-table .pw-label-cell { 
  font-size: 12px; 
  padding: 2px 0; 
}
.is-mobile .period-calendar-table .day-number { 
  font-size: 13px; 
}

.period-calendar-table .pw-label-cell .day-number,
.period-calendar-table .week-number-cell .day-number {
    font-size: inherit; /* Inherit the correct font size from the parent cell */
}


/* Default row height */
.period-calendar-table tbody tr {
    height: 40px;
    min-height: 40px;
}

.period-calendar-table tbody td {
    min-height: 40px;
}

/* Adjust row height for condensed layout */
.period-month-container.layout-condensed .period-calendar-table tbody tr {
    height: 36px;
    min-height: 36px;
}

.period-month-container.layout-condensed .period-calendar-table tbody td {
    min-height: 36px;
}

/* Adjust row height for spacious layout */
.period-month-container.layout-spacious .period-calendar-table tbody tr {
    height: 50px;
    min-height: 50px;
}

.period-month-container.layout-spacious .period-calendar-table tbody td {
    min-height: 50px;
}


/* --- Misc --- */
.period-month-container .svg-icon {
  color: var(--icon-color, currentColor);
}

/* --- Unified clear button for all search inputs --- */
.search-input-clear-btn {
    position: absolute;
    right: 6px;
    top: 50%;
    transform: translateY(-50%);
    visibility: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 15px;
    height: 15px;
    border-radius: 50%;
    cursor: pointer;
    transition: background-color 0.1s ease-in-out;
    background-color: #9c9b9b;
    /* Color is now set directly on the icon rule below */
}

.search-input-clear-btn:hover {
    background-color: #f5f5f5;
}

.search-input-clear-btn .svg-icon {
    width: 13px;
    height: 13px;
    /* FIX: Force the icon color to be dark */
    color: #383838 !important;
}

/* --- Light Theme Overrides --- */
body.theme-light .search-input-clear-btn {
    background-color: #5c5c5c;
}

body.theme-light .search-input-clear-btn:hover {
    background-color: #383838;
}

body.theme-light .search-input-clear-btn .svg-icon {
    /* FIX: Force the icon color to be white in the light theme */
    color: #ffffff !important;
}

/* --- Task Header Icons --- */
.task-group-header .icon {
  display: flex;
  align-items: center;
}
.task-group-header .icon .svg-icon {
  /*width: var(--task-heading-font-size);
  height: var(--task-heading-font-size);
*/
  }

/* --- Tab Icons --- */
.tab-icon {
  width: 1.2em;
  height: 1.2em;
}
.note-tab {
  display: flex;
  align-items: center;
  gap: 0.5em;
}

/* --- Asset List Styles --- */
.asset-thumbnail, .popup-asset-thumbnail {
  width: 28px;
  height: 28px;
  border-radius: var(--radius-s);
  object-fit: cover;
}
.popup-asset-thumbnail {
  width: 22px;
  height: 22px;
}
.asset-icon-container, .asset-thumbnail-container {
  width: 28px;
  height: 28px;
  flex-shrink: 0;
  margin-right: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.asset-icon-container .svg-icon {
  width: 20px;
  height: 20px;
}
.asset-action-icon {
  position: relative;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  margin-right: 6px;
}
.asset-action-icon > div {
  position: absolute;
  transition: opacity 0.2s ease-in-out;
}
.asset-action-icon .svg-icon {
  width: 16px;
  height: 16px;
}
.asset-action-icon div:nth-child(2) {
  opacity: 0;
}
.note-row:hover .asset-action-icon div:nth-child(1) {
  opacity: 0;
}
.note-row:hover .asset-action-icon div:nth-child(2) {
  opacity: 1;
}
.asset-action-icon:hover .svg-icon {
    color: var(--text-error);
}

/* --- Asset Grid Styles --- */
.note-list-wrapper.assets-grid-view {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    padding-top: 8px;
}
.asset-grid-item {
    flex-basis: calc(50% - 8px); 
    display: flex;
    flex-direction: column;
    cursor: pointer;
    border-radius: 12px;
    background-color: var(--background-secondary);
    overflow: hidden;
    border: 1px solid var(--background-modifier-border);
    padding: 8px;
    box-sizing: border-box; /* THIS IS THE CRITICAL MISSING LINE */
}
.asset-grid-preview {
    width: 100%;
    aspect-ratio: 4 / 3;
    background-color: var(--background-modifier-hover);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden; 
    border-radius: 8px;  
}
.asset-grid-preview img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}
.asset-grid-name {
    padding: 8px 4px 0; /* Adjusted padding */
    margin-top: 8px; /* Adds space between the image and text */
    font-size: 0.9em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    border-top: 1px solid var(--background-modifier-border);
}

.asset-grid-item:hover {
  border-color: rgba(200, 200, 200, 0.75); /* A lighter, semi-transparent gray */
}

/* --- Settings Tabs --- */
.period-settings-container {
  display: flex;
  height: 100%;
}
.period-settings-nav {
  display: flex;
  flex-direction: column;
  padding-right: 1.5rem;
  border-right: 1px solid var(--background-modifier-border);
  width: 170px;
  flex-shrink: 0;
}
.period-settings-nav-button {
      background: none;
      border: none;
      text-align: left;
      padding: 0.75rem 0.5rem;
      margin-bottom: 0.25rem;
      cursor: pointer;
      border-radius: var(--radius-m);
      color: var(--text-muted);
      font-size: var(--font-ui-small);
}
.period-settings-nav-button:hover {
      background-color: var(--background-modifier-hover);
      color: var(--text-normal);
}
.period-settings-nav-button.is-active {
      background-color: var(--interactive-accent);
      color: var(--text-on-accent);
      font-weight: bold;
}
.period-settings-content {
      flex-grow: 1;
      padding-left: 1.5rem;
      overflow-y: auto;
}
.popup-section-header {
    font-size: 0.8em;
    font-weight: bold;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin: 10px 8px 4px;
    padding: 0;
}
.popup-separator {
    border-bottom: 1px solid var(--background-modifier-border);
    margin: 6px 8px;
}
.other-notes-popup .popup-section-header:first-child {
    margin-top: 4px;
}
.note-group-header {
    font-size: 0.85em;
    font-weight: bold;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 12px 4px 4px;
}
.note-title-path-wrapper,
.other-notes-popup-item .note-title-path-wrapper {
    display: flex;
    flex-direction: column;
    min-width: 0; 
}
.note-row .note-path,
.other-notes-popup-item .note-path {
    font-size: 0.8em;
    color: var(--text-muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-top: 2px;
}

/* --- Final & Unified Task Styling --- */
.task-checkbox-symbol {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 1.35em;
    height: 1.35em;
    font-size: 1em;
    cursor: pointer;
    flex-shrink: 0;
    border: 1px solid var(--text-faint);
    border-radius: 50%;
    transition: all 0.1s ease-in-out;
    background-color: var(--background-primary);
}
.task-row:hover .task-checkbox-symbol,
.other-notes-popup-item:hover .task-checkbox-symbol {
    border-color: var(--text-normal);
}
.task-checkbox-symbol:has(.svg-icon) {
    border-color: transparent !important;
}
.task-checkbox-symbol.is-completed {
    background-color: var(--interactive-accent);
    border-color: var(--interactive-accent) !important;
}
.task-checkbox-symbol .svg-icon {
    width: 100%;
    height: 100%;
    padding: 0.1em;
    fill: currentColor;
}
.task-checkbox-symbol.is-completed .svg-icon {
    color: var(--text-on-accent) !important;
}

/* --- Note Group Collapse Styles --- */
.note-group-container {
  border: 1px solid var(--background-modifier-border); /* Adds a subtle, theme-aware border */
  border-radius: var(--radius-l); /* Rounds the corners of the card */
  padding: 0 8px 8px; /* Adds some internal spacing for the note list */
  margin-bottom: 12px; /* Increases space between cards */
}
.note-group-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
  user-select: none;
  font-size: 0.85em;
  font-weight: bold;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 12px 4px 4px;
}
.note-group-header:hover {
  color: var(--text-normal);
}
.note-group-header-content {
  display: flex;
  align-items: center;
  gap: 6px;
}
.note-group-count {
  font-size: 0.9em;
  background-color: var(--background-modifier-border);
  border-radius: 4px;
  padding: 1px 5px;
}
.note-group-collapse-icon .svg-icon {
  transition: transform 0.2s ease-in-out;
  width: 16px;
  height: 16px;
}
.note-group-container.is-collapsed .note-group-collapse-icon .svg-icon {
  transform: rotate(-90deg);
}
.note-list-wrapper {
  overflow: hidden;
  transition: max-height 0.3s ease-in-out, margin-top 0.3s ease-in-out;
  max-height: 2000px; /* A large value to accommodate many notes */
  margin-top: 4px;
}
.note-group-container.is-collapsed .note-list-wrapper {
  max-height: 0;
  margin-top: 0;
}

/* --- Pull to Refresh Indicator --- */
.pm-refresh-indicator {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--icon-color);
    z-index: 5;
    opacity: 0;
    transform: translateY(-50px) scale(0.7);
    transition: transform 0.3s, opacity 0.3s;
}
.pm-refresh-indicator.is-pulling {
    opacity: 0.8;
}
.pm-refresh-indicator.is-ready {
    opacity: 1;
    transform: translateY(0) scale(1);
}

.pm-refresh-indicator.is-refreshing .svg-icon {
    animation: spin 1.2s linear infinite;
}
/* Re-use the spin animation from the refresh button */
@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}
/* --- Mobile Keyboard Handling --- */
.scratch-content.is-editing-mobile {
    padding-bottom: 45vh; /* 45% of the visible screen height */
}

/* Colors for custom icons */
.task-row .task-checkbox-symbol .svg-icon[data-lucide="map-pin"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="map-pin"] { color: var(--text-accent) !important; }
.task-row .task-checkbox-symbol .svg-icon[data-lucide="flame"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="flame"] { color: var(--text-warning) !important; }
.task-row .task-checkbox-symbol .svg-icon[data-lucide="slash"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="slash"],
.task-row .task-checkbox-symbol .svg-icon[data-lucide="piggy-bank"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="piggy-bank"],
.task-row .task-checkbox-symbol .svg-icon[data-lucide="thumbs-up"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="thumbs-up"],
.task-row .task-checkbox-symbol .svg-icon[data-lucide="trophy"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="trophy"],
.task-row .task-checkbox-symbol .svg-icon[data-lucide="arrow-up"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="arrow-up"] { color: var(--text-success) !important; }
.task-row .task-checkbox-symbol .svg-icon[data-lucide="thumbs-down"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="thumbs-down"],
.task-row .task-checkbox-symbol .svg-icon[data-lucide="arrow-down"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="arrow-down"] { color: var(--text-error) !important; }
.task-row .task-checkbox-symbol .svg-icon[data-lucide="star"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="star"],
.task-row .task-checkbox-symbol .svg-icon[data-lucide="lightbulb"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="lightbulb"] { color: var(--color-yellow) !important; }
.task-row .task-checkbox-symbol .svg-icon[data-lucide="bookmark"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="bookmark"],
.task-row .task-checkbox-symbol .svg-icon[data-lucide="info"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="info"] { color: var(--color-blue) !important; }
.task-row .task-checkbox-symbol .svg-icon[data-lucide="help-circle"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="help-circle"] { color: var(--color-cyan) !important; }
.task-row .task-checkbox-symbol .svg-icon[data-lucide="key"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="key"] { color: goldenrod !important; }
.task-row .task-checkbox-symbol .svg-icon[data-lucide="minus"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="minus"],
.task-row .task-checkbox-symbol .svg-icon[data-lucide="quote"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="quote"] { color: var(--text-muted) !important; }
.task-row .task-checkbox-symbol .svg-icon[data-lucide="arrow-right"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="arrow-right"],
.task-row .task-checkbox-symbol .svg-icon[data-lucide="arrow-left"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="arrow-left"] { color: var(--text-normal) !important; }




/* ==========================================================================
   WEEKEND/WEEK HIGHLIGHTING LOGIC
   ========================================================================== */

/* 1. Neutralize weekend shade inside the current week row */
.period-calendar-table tbody tr.current-week-row {
  --weekend-shade-color-themed: transparent;
}

/* 2. Regular weekend shading for SUNDAY-START weeks */
.period-month-container:not(.monday-start).weekend-shading-enabled:not(.has-pw-column):not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(1),
.period-month-container:not(.monday-start).weekend-shading-enabled:not(.has-pw-column):not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(7),
.period-month-container:not(.monday-start).weekend-shading-enabled.has-pw-column:not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(2),
.period-month-container:not(.monday-start).weekend-shading-enabled.has-pw-column:not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(8),
.period-month-container:not(.monday-start).weekend-shading-enabled.has-week-numbers:not(.has-pw-column)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(2),
.period-month-container:not(.monday-start).weekend-shading-enabled.has-week-numbers:not(.has-pw-column)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(8),
.period-month-container:not(.monday-start).weekend-shading-enabled.has-pw-column.has-week-numbers
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(3),
.period-month-container:not(.monday-start).weekend-shading-enabled.has-pw-column.has-week-numbers
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(9) {
  background-color: var(--weekend-shade-color-themed);
}

/* 3. Weekend shading for MONDAY-START weeks */
.period-month-container.monday-start.weekend-shading-enabled:not(.has-pw-column):not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(6),
.period-month-container.monday-start.weekend-shading-enabled:not(.has-pw-column):not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(7),
.period-month-container.monday-start.weekend-shading-enabled.has-pw-column:not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(7),
.period-month-container.monday-start.weekend-shading-enabled.has-pw-column:not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(8),
.period-month-container.monday-start.weekend-shading-enabled.has-week-numbers:not(.has-pw-column)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(7),
.period-month-container.monday-start.weekend-shading-enabled.has-week-numbers:not(.has-pw-column)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(8),
.period-month-container.monday-start.weekend-shading-enabled.has-pw-column.has-week-numbers
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(8),
.period-month-container.monday-start.weekend-shading-enabled.has-pw-column.has-week-numbers
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(9) {
  background-color: var(--weekend-shade-color-themed);
}

/* 4. Make day-content transparent by default */
.period-calendar-table .day-content {
  background: transparent !important;
}

/* 5. If a cell uses border styling (today/tasks), keep its background transparent */
.period-calendar-table .day-content[style*="border"] {
  background: transparent !important;
}

/* 6. Always highlight the current week row via the inner content */
.period-month-container .period-calendar-table tbody tr.current-week-row td .day-content {
  background: var(--row-highlight-color-themed) !important;
}

.tab-order-container {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 10px;
}

.draggable-item {
  display: flex;
  align-items: center;
  padding: 8px;
  background-color: var(--background-secondary-alt);
  border-radius: 6px;
  border: 1px solid var(--background-modifier-border);
  cursor: grab;
}

.draggable-item.dragging {
  opacity: 0.5;
  background-color: var(--background-modifier-hover);
}

.drag-handle {
  margin-right: 12px;
  color: var(--text-muted);
}

.setting-spacer {
  height: 20px; /* Or use margin-top, e.g., margin-top: 20px; */
}

.note-group-header-content {
  cursor: pointer;
}

.pinned-sort-indicator {
  font-size: 0.85em;
  color: var(--text-muted);
  font-weight: normal;
  margin-left: 6px;
  /* Prevents the indicator from being selected as text when clicking */
  user-select: none; 
}

/* Hide drag handles by default in main UI */
.note-row .drag-handle {
    display: none;
    margin-right: 8px;
    color: var(--text-muted);
    cursor: grab;
}

/* Show drag handles when reorder mode is active */
.pinned-notes-reorder-mode .note-row .drag-handle {
    display: flex;
    align-items: center;
}

/* Visual feedback during drag */
.note-row.dragging {
    opacity: 0.5;
    background-color: var(--background-modifier-hover);
}

    `;

// === Helper Functions and Classes ===
/**
 * Parses an "rgba(r, g, b, a)" string into an object.
 * @param {string} rgbaString The input string.
 * @returns {{r: number, g: number, b: number, a: number} | null}
 */
function parseRgbaString(rgbaString) {
    if (!rgbaString) return null;
    const match = rgbaString.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);
    if (!match) return null;
    return {
        r: parseInt(match[1], 10),
        g: parseInt(match[2], 10),
        b: parseInt(match[3], 10),
        a: match[4] !== undefined ? parseFloat(match[4]) : 1,
    };
}

/**
 * Blends two RGBA color objects based on a mix factor.
 * @param {{r,g,b,a}} color1 The start color object.
 * @param {{r,g,b,a}} color2 The end color object.
 * @param {number} factor A value from 0 (100% color1) to 1 (100% color2).
 * @returns {string} The resulting "rgba(...)" string.
 */
function blendRgbaColors(color1, color2, factor) {
    const r = Math.round(color1.r * (1 - factor) + color2.r * factor);
    const g = Math.round(color1.g * (1 - factor) + color2.g * factor);
    const b = Math.round(color1.b * (1 - factor) + color2.b * factor);
    const a = (color1.a * (1 - factor) + color2.a * factor).toFixed(2);
    return `rgba(${r}, ${g}, ${b}, ${a})`;
}

/**
 * A reusable confirmation modal dialog.
 */
class ConfirmationModal extends Modal {
    constructor(app, title, message, onConfirm, confirmText = "Confirm") {
        super(app);
        this.title = title;
        this.message = message;
        this.onConfirm = onConfirm;
        this.confirmText = confirmText;
    }

    onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h1", { text: this.title });
        contentEl.createEl("p", { text: this.message });
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });

        buttonContainer.createEl("button", {
            text: this.confirmText,
            cls: "mod-cta",
        }).addEventListener("click", () => {
            this.close();
            this.onConfirm();
        });

        buttonContainer.createEl("button", {
            text: "Cancel",
        }).addEventListener("click", () => {
            this.close();
        });
    }

    onClose() {
        this.contentEl.empty();
    }
}

/* A modal dialog that presents multiple action choices to the user when creating a new daily note. */
class ActionChoiceModal extends Modal {
    constructor(app, title, message, buttons) {
        super(app);
        this.title = title;
        this.message = message;
        this.buttons = buttons;
    }

    onOpen() {
        const { contentEl } = this;
        contentEl.createEl('h2', { text: this.title });
        if (this.message) {
            contentEl.createEl('p', { text: this.message });
        }

        const buttonContainer = contentEl.createDiv({ cls: 'modal-button-container' });

        for (const buttonConfig of this.buttons) {
            const btn = buttonContainer.createEl('button', { text: buttonConfig.text });
            if (buttonConfig.cls) {
                btn.addClass(buttonConfig.cls);
            }
            btn.addEventListener('click', () => {
                this.close();
                if (buttonConfig.action) {
                    buttonConfig.action();
                }
            });
        }
    }

    onClose() {
        this.contentEl.empty();
    }
}

/**
 * Calculates the custom period and week number based on a given start date.
 * A year is divided into 13 periods of 4 weeks each.
 * @param {Date} date - The date to calculate for.
 * @param {string} startOfPeriodsOverride - The start date in "YYYY-MM-DD" format from settings.
 * @returns {{period: number, week: number, weekSinceStart: number}} An object with the period, week, and total weeks since start.
 */
function getPeriodWeek(date = new Date(), startOfPeriodsOverride) {
    const defaultStartString = "2025-03-02";
    let startString = startOfPeriodsOverride || defaultStartString;

    let startMoment = moment(startString, "YYYY-MM-DD", true);

    if (!startMoment.isValid()) {
        console.warn(
            `[Calendar Period Week Notes] Invalid "Start of Period 1" date format: "${startString}". ` +
            `It must be YYYY-MM-DD. Falling back to default date ${defaultStartString}.`
        );
        startMoment = moment(defaultStartString, "YYYY-MM-DD", true);
    }

    // Use moment's built-in diff method to correctly calculate the number of
    // calendar days. This automatically handles Daylight Saving Time and other offsets.
    const daysSinceStart = moment(date).startOf('day').diff(startMoment.startOf('day'), 'days');
    const weekNumber = Math.floor(daysSinceStart / 7);
    const periodIndex = Math.floor(weekNumber / 4);
    const period = ((periodIndex % 13) + 13) % 13 + 1;
    const week = ((weekNumber % 4) + 4) % 4 + 1;

    return { period, week, weekSinceStart: weekNumber + 1 };
}

/**
 * Parses a file's content to find all tasks and their metadata.
 * @param {TFile} file The file to parse.
 * @param {string} content The content of the file.
 * @returns {Array<object>} An array of structured task objects.
 */
function parseTasksFromFile(file, content) {
    const tasks = [];
    const lines = content.split('\n');

    const taskRegex = /^\s*(?:-|\d+\.)\s*\[(.)\]\s*(.*)/;
    const dueDateRegex = /üìÖ\s*(\d{4}-\d{2}-\d{2})/;
    const completionDateRegex = /‚úÖ\s*(\d{4}-\d{2}-\d{2})/;
    const tagRegex = /#([a-zA-Z0-9_\-\/]+)/g;

    lines.forEach((line, index) => {
        const match = line.match(taskRegex);
        if (match) {
            const status = match[1];
            const text = match[2];
            const isCompleted = status.toLowerCase() === 'x';

            const dueDateMatch = text.match(dueDateRegex);
            const dueDate = dueDateMatch ? moment(dueDateMatch[1], "YYYY-MM-DD").toDate() : null;

            const completionDateMatch = text.match(completionDateRegex);
            const completionDate = completionDateMatch ? moment(completionDateMatch[1], "YYYY-MM-DD").toDate() : null;

            const tags = Array.from(text.matchAll(tagRegex)).map(m => m[1]);

            let displayText = text.trim();
            // Optionally clean up the display text
            if (!isCompleted) {
                displayText = displayText.replace(completionDateRegex, '').trim();
            }

            tasks.push({
                text: displayText,
                originalText: text, // Keep original text for modifications
                file,
                lineNumber: index,
                dueDate,
                tags,
                status,
                completionDate
            });
        }
    });
    return tasks;
}

/**
 * Formats a date to show time if it's today, otherwise shows the full date.
 * @param {Date} date The date to format.
 * @returns {string} The formatted date string.
 */
function formatDateTime(date) {
    const now = new Date();
    if (isSameDay(date, now)) return moment(date).format('HH:mm');
    return moment(date).format('DD-MM-YYYY');
}

// Utility wrappers around moment.js for consistent date handling.
function formatDate(date, format) { return moment(date).format(format); }
function formatMonthTitle(date, format) { return moment(date).format(format); }
function isSameDay(a, b) { return moment(a).isSame(b, 'day'); }


/**
 * The main view class for the plugin, handling all rendering and user interaction.
 */
class PeriodMonthView extends ItemView {
    constructor(leaf, plugin) {
        super(leaf);
        this.plugin = plugin;
        this.calendarHeaderRowEl = null;
        this.pinnedSortOrder = this.plugin.settings.pinnedNotesSortOrder;

        //pull down to fresh
        this.taskPullStartY = 0;
        this.taskPullDistance = 0;
        this.isTaskPulling = false;


        // --- State Management ---
        this.displayedMonth = new Date(); // The month currently shown in the calendar.
        this.isVerticalView = false;      // Toggles between single-month and vertical scroll view.
        this.isPopupLocked = false;       // Tracks if popups are globally disabled
        this.isCalendarCollapsed = false; // Toggles the visibility of the calendar grid.
        this.isScratchpadPreview = false; // Toggles scratchpad between edit and preview mode.
        this.activeTab = null;            // Tracks the currently selected tab ('scratch', 'notes', etc.).
        this.isProgrammaticScroll = false; // Prevents scroll event loops during programmatic scrolling.

        // --- Search and Data States ---
        this.notesViewMode = this.plugin.settings.notesViewMode;
        this.notesSearchTerm = "";
        this.tasksSearchTerm = "";
        this.scratchpadSearchTerm = "";
        this.assetsSearchTerm = "";
        this.collapsedNoteGroups = this.plugin.settings.collapsedNoteGroups || {};
        this.collapsedTaskGroups = this.plugin.settings.collapsedTaskGroups || {};
        this.collapsedAssetGroups = this.plugin.settings.collapsedAssetGroups || {};

        // --- Caching and Data Maps ---
        // These maps store pre-processed data to avoid re-scanning the vault on every render.
        this.noteText = "";
        this.allTasks = [];
        this.createdNotesMap = new Map();
        this.modifiedNotesMap = new Map();
        this.assetCreationMap = new Map();
        this.tasksByDate = new Map();
        this.icsEventsByDate = new Map();
        this.processedEventSignatures = new Set();
        this.taskCache = new Map(); // Caches task content of files to detect changes.
        this.fileToTaskDates = new Map(); // Tracks which dates a file has tasks for. <filePath, Set<dateKey>>
        this.isAssetsGridView = this.plugin.settings.assetsDefaultView === 'grid';
        this.unusedAssetPathsCache = new Set();
        this.isUnusedAssetCacheValid = false;

        // --- UI and Event Handling ---
        this.todayBtn = null;
        this.scratchWrapperEl = null;
        this.scratchpadViewToggleBtn = null;
        this.hoverTimeout = null;
        this.hideTimeout = null;
        this.popupEl = null;
        this.taskRefreshDebounceTimer = null;
        this.notesRefreshDebounceTimer = null;
        this.calendarRefreshDebounceTimer = null;
        this.titleUpdateTimeout = null;
        this.existingWeeklyNotes = new Set();
        this.dailyRefreshTimeout = null; // Timeout to trigger daily refresh at midnight
        this.themeObserver = null;
        this.lastKnownToday = new Date();

        // --- Mobile Keyboard Handling ---
        this.isEditingMobile = false;

        // --- Icon Mapping for Task Statuses ---
        // Maps task status symbols to Lucide icon names.
        this.taskStatusIconMap = {
            // Standard Tasks
            '/': 'slash',       // In Progress
            '-': 'minus',       // Cancelled
            '>': 'arrow-right', // Forwarded
            '<': 'arrow-left',  // Scheduling
            // Extended Tasks from your list
            '?': 'help-circle', // Question
            '!': 'flame',       // Important
            '*': 'star',        // Star
            '"': 'quote',       // Quote
            'l': 'map-pin',     // Location
            'b': 'bookmark',    // Bookmark
            'i': 'info',        // Information
            'S': 'piggy-bank',  // Savings
            'I': 'lightbulb',   // Idea
            'p': 'thumbs-up',   // Pros
            'c': 'thumbs-down', // Cons
            'f': 'flame',       // Fire (using 'flame' as 'siren' can be too strong)
            'k': 'key',         // Key
            'w': 'trophy',      // Win
            'u': 'arrow-up',    // Up
            'd': 'arrow-down',  // Down
        };
    }

    _renderTaskSymbol(checkboxEl, task) {
        checkboxEl.empty();
        checkboxEl.className = 'task-checkbox-symbol'; // Reset classes

        const status = task.status;
        const iconName = this.taskStatusIconMap[status];

        // Case 1: Task is completed
        if (status.toLowerCase() === 'x') {
            setIcon(checkboxEl, 'check');
            checkboxEl.addClass('is-completed');
            checkboxEl.style.width = '1.25em';
            checkboxEl.style.height = '1.25em';

            checkboxEl.style.backgroundColor = 'var(--interactive-accent)';
            checkboxEl.style.border = 'none';
            checkboxEl.style.borderRadius = '50%';

            const svgEl = checkboxEl.querySelector('.svg-icon');
            if (svgEl) {
                svgEl.style.width = '75%';
                svgEl.style.height = '75%';
                svgEl.style.fill = 'none'; // Do not fill the shape
                svgEl.style.stroke = 'var(--text-on-accent)'; // Use high-contrast color for the line
                svgEl.style.strokeWidth = '3px'; // Make the line thick and clear
                svgEl.style.color = 'unset'; // Unset color to prevent conflicts
            }

            // Case 2: Task has a custom icon
        } else if (iconName) {
            setIcon(checkboxEl, iconName);
            const color = this.getIconColor(iconName);
            const svgEl = checkboxEl.querySelector('.svg-icon');
            if (svgEl) {
                svgEl.style.color = color;
                svgEl.style.fill = 'currentColor';
                svgEl.style.stroke = 'none';
            }
            checkboxEl.style.width = '1.25em';
            checkboxEl.style.height = '1.25em';
            checkboxEl.style.backgroundColor = 'transparent';
            checkboxEl.style.border = 'none';
            checkboxEl.style.borderRadius = '0';

            // Case 3: Default task (e.g., incomplete)
        } else {
            checkboxEl.setText(status.trim() || ' ');
            checkboxEl.style.width = '1.15em';
            checkboxEl.style.height = '1.15em';
            checkboxEl.style.backgroundColor = 'transparent';
            checkboxEl.style.color = 'var(--text-normal)';
            checkboxEl.style.borderRadius = '50%';
            checkboxEl.style.border = '1px solid var(--text-faint)';
        }
    }

    setupReorderMode() {
        const isMac = Platform.isMacOS;
        let isReorderMode = false;

        const handleKeyDown = (e) => {
            // Use Alt key (Option on Mac) or Ctrl key (Control on Windows)
            const isModifierPressed = isMac ? e.altKey : e.ctrlKey;

            // Only activate if we're in pinned notes view AND custom sort is selected
            if (isModifierPressed && !isReorderMode &&
                this.notesViewMode === 'pinned' &&
                this.pinnedSortOrder === 'custom') {

                isReorderMode = true;
                this.containerEl.addClass('pinned-notes-reorder-mode');
                //new Notice(`Reorder mode active (${modifierKeyName}) - drag to rearrange`);
            } else if (isModifierPressed && !isReorderMode &&
                this.notesViewMode === 'pinned' &&
                this.pinnedSortOrder !== 'custom') {
                // Show message if user tries to activate reorder mode when not in custom sort
                new Notice(`Switch to Custom sort order to enable drag reordering`);
            }
        };

        const handleKeyUp = (e) => {
            const wasModifierReleased = isMac ? !e.altKey : !e.ctrlKey;

            if (wasModifierReleased && isReorderMode) {
                isReorderMode = false;
                this.containerEl.removeClass('pinned-notes-reorder-mode');
                //new Notice('Reorder mode disabled');
            }
        };

        // Register the listeners using Obsidian's API for proper cleanup
        this.registerDomEvent(document, 'keydown', handleKeyDown);
        this.registerDomEvent(document, 'keyup', handleKeyUp);
    }



    getIconColor(iconName) {
        switch (iconName) {
            case 'map-pin':
                return 'var(--text-accent)'; // Red
            case 'flame':
                return 'var(--text-warning)'; // Orange
            case 'slash':
            case 'piggy-bank':
            case 'thumbs-up':
            case 'trophy':
            case 'arrow-up':
                return 'var(--text-success)'; // Green
            case 'thumbs-down':
            case 'arrow-down':
                return 'var(--text-error)'; // Muted Red
            case 'star':
            case 'lightbulb':
                return 'var(--color-yellow)'; // Yellow
            case 'bookmark':
            case 'info':
                return 'var(--color-blue)'; // Blue
            case 'help-circle':
                return 'var(--color-cyan)'; // Cyan
            case 'key':
                return 'goldenrod'; // Gold
            case 'minus':
            case 'quote':
                return 'var(--text-muted)'; // Grey
            default:
                return 'var(--text-normal)'; // Default color for arrows, etc.
        }
    }

    async handleFileClick(file, event) {
        // The Shift key is the ultimate override. If it's pressed, always open in a new leaf.
        if (event.shiftKey) {
            await this.app.workspace.openLinkText(file.path, '', true);
            return;
        }

        // --- If Shift is NOT pressed, proceed with normal logic ---
        const isAsset = file.extension.toLowerCase() !== 'md';

        if (isAsset) {
            // It's an asset, so respect the user's default setting for assets.
            const openInNewTab = this.plugin.settings.assetsOpenAction === 'new-tab';
            await this.app.workspace.openLinkText(file.path, '', openInNewTab);
        } else {
            // It's a note file. Here we must check for an existing open leaf.
            const markdownLeaves = this.app.workspace.getLeavesOfType("markdown");
            const existingLeaf = markdownLeaves.find(leaf => leaf.view.file?.path === file.path);

            if (existingLeaf) {
                // The note is already open, so just focus on that leaf.
                this.app.workspace.setActiveLeaf(existingLeaf);
            } else {
                // The note is not open, so respect the user's default setting for notes.
                const openInNewTab = this.plugin.settings.notesOpenAction === 'new-tab';
                await this.app.workspace.getLeaf(openInNewTab).openFile(file);
            }
        }
    }

    /**
     * Renders a single note item row in a given container.
     * @param {TFile} file The note file to render.
     * @param {HTMLElement} container The parent element to append the row to.
     */
    renderNoteItem(file, container) {
        const settings = this.plugin.settings;
        const searchInputEl = this.notesSearchInputEl;

        const row = container.createDiv({ cls: 'note-row' });
        row.draggable = true;
        row.dataset.filePath = file.path;

        const dragHandle = row.createDiv({ cls: 'drag-handle' });
        setIcon(dragHandle, 'grip-vertical');

        const titleWrapper = row.createDiv({ cls: 'note-title-wrapper' });

        if (settings.showNoteTooltips) {
            const ctime = new Date(file.stat.ctime).toLocaleString('en-GB', { dateStyle: 'short', timeStyle: 'short' });
            const mtime = new Date(file.stat.mtime).toLocaleString('en-GB', { dateStyle: 'short', timeStyle: 'short' });
            const size = `${(file.stat.size / 1024).toFixed(2)} KB`;
            const path = file.path;
            const tagsCache = this.app.metadataCache.getFileCache(file)?.tags;
            let tags = 'No tags';
            if (tagsCache && tagsCache.length > 0) {
                tags = [...new Set(tagsCache.map(t => t.tag))].join(', ');
            }
            titleWrapper.setAttribute('aria-label', `Created: ${ctime}\nModified: ${mtime}\nSize: ${size}\nPath: ${path}\nTags: ${tags}`);
        }

        if (settings.showNoteStatusDots) {
            const dot = titleWrapper.createDiv({ cls: 'note-status-dot' });
            if (this.isDailyNote(file)) {
                dot.style.backgroundColor = settings.dailyNoteDotColor;
            } else if (this.isWeeklyNote(file)) {
                dot.style.backgroundColor = settings.weeklyNoteDotColor;
            } else {
                dot.addClass(isSameDay(new Date(file.stat.ctime), new Date(file.stat.mtime)) ? 'note-status-dot-created' : 'note-status-dot-modified');
            }
        }

        const titlePathWrapper = titleWrapper.createDiv({ cls: 'note-title-path-wrapper' });
        titlePathWrapper.createDiv({ text: file.basename, cls: 'note-title' });
        if (file.parent && file.parent.path !== '/') {
            titlePathWrapper.createDiv({ text: file.parent.path, cls: 'note-path' });
        }

        row.createDiv({ text: formatDate(new Date(file.stat.mtime)), cls: 'note-mod-date' });

        let isDragging = false;

        row.addEventListener('mousedown', (e) => {
            e.clientX;
            e.clientY;
            isDragging = false;
        });

        row.addEventListener('dragstart', (e) => {
            isDragging = true;
            e.dataTransfer.setData('text/plain', file.path);
            e.dataTransfer.effectAllowed = 'move';
            setTimeout(() => row.addClass('dragging'), 0);
        });

        row.addEventListener('dragend', async () => {
            row.removeClass('dragging');
            
            // Use a brief timeout to ensure the click event has a chance to be ignored.
            setTimeout(() => { isDragging = false; }, 50);

            // Save the new order of the items in the list.
            // The `container` is the listWrapper, which holds all the note rows.
            await this.savePinnedOrder(container);
        });

        row.addEventListener('dragover', (e) => {
            e.preventDefault();
            const dragging = container.querySelector('.dragging');
            if (dragging && dragging !== row) {
                const rect = row.getBoundingClientRect();
                const isAfter = e.clientY > rect.top + rect.height / 2;
                if (isAfter) {
                    row.parentNode.insertBefore(dragging, row.nextSibling);
                } else {
                    row.parentNode.insertBefore(dragging, row);
                }
            }
        });

        // MODIFICATION: The 'drop' event listener that was here has been removed.
        // The new handler on the parent container in `populateNotes` now manages saving.

        row.addEventListener('click', (e) => {
            if (isDragging) {
                isDragging = false;
                return;
            }
            if (e.target.closest('.drag-handle')) {
                return;
            }
            this.handleFileClick(file, e);
        });

        this.addKeydownListeners(row, searchInputEl);
        this.addFileContextMenu(row, file, this.populateNotes.bind(this));
    }


    async savePinnedOrder(container) {
        // Add this line for debugging. You should see this notice pop up.
        //new Notice('Saving custom order...');

        const noteRows = container.querySelectorAll('.note-row');
        const newOrder = Array.from(noteRows).map(row => row.dataset.filePath);

        // Update the settings with the new order
        this.plugin.settings.pinnedNotesCustomOrder = newOrder;
        
        // Set the active sort mode to 'custom' since a manual sort just happened
        this.pinnedSortOrder = 'custom';
        
        await this.plugin.saveSettings();
        
        //new Notice('Custom pinned order saved!');

        // Refresh the view to ensure the header's sort indicator is updated
        await this.populateNotes();
    }


    /**
     * Formats a list of calendar events into a markdown string for template insertion.
     * @param {-} events 
     * @returns 
     */
    formatEventsForTemplate(events) {
        if (!events || events.length === 0) {
            return "";
        }

        // Retrieve the user-defined format from settings
        const formatString = this.plugin.settings.calendarEventsFormat || '- {{startTime}} - {{endTime}}: {{summary}}';

        // Sort events
        events.sort((a, b) => {
            if (a.isAllDay && !b.isAllDay) return -1;
            if (!a.isAllDay && b.isAllDay) return 1;
            if (a.isAllDay && b.isAllDay) return a.summary.localeCompare(b.summary);
            if (!a.startTime || !b.startTime) return 0;
            return a.startTime.localeCompare(b.startTime);
        });

        // Map each event to its formatted string
        const eventStrings = events.map(event => {
            let finalString;

            if (event.isAllDay) {
                // --- THE NEW LOGIC ---
                // For all-day events, replace the time placeholders with "All-day"
                // This regex looks for {{startTime}}, optional whitespace, a separator, optional whitespace, and {{endTime}}
                const timePlaceholderRegex = /{{\s*startTime\s*}}.*{{\s*endTime\s*}}/;

                finalString = formatString.replace(timePlaceholderRegex, 'All-day');

                // Now, replace the summary as usual
                finalString = finalString.replace(/{{summary}}/g, event.summary || '');

            } else {
                // For timed events, use the original logic
                const startTime = event.startTime || '';
                const endTime = event.endTime || '';

                finalString = formatString
                    .replace(/{{startTime}}/g, startTime)
                    .replace(/{{endTime}}/g, endTime)
                    .replace(/{{summary}}/g, event.summary || '');
            }

            // Trim any leftover whitespace or dangling separators
            return finalString.replace(/\s*:\s*$/, '').replace(/\s*-\s*$/, '').trim();
        });

        // Join the array of event strings with a double newline
        const eventBody = eventStrings.join('\n\n');

        // Construct the final output
        return eventBody;
    }



    /**
     * Schedules a refresh to occur at the next midnight.
     */
    scheduleDailyRefresh() {
        // Clear any existing timer to avoid duplicates
        if (this.dailyRefreshTimeout) {
            clearTimeout(this.dailyRefreshTimeout);
        }

        const now = moment();
        const endOfDay = moment().endOf('day');
        // Calculate milliseconds until the end of today, plus one to tick over to the new day
        const msUntilMidnight = endOfDay.diff(now) + 1;

        this.dailyRefreshTimeout = setTimeout(async () => {
            //console.log("Midnight refresh: Updating task view and calendar.");

            // Re-calculate all task due dates relative to the new "today"
            await this.buildTasksByDateMap();

            // Re-render the calendar to update heatmaps, badges, and today's highlight
            this.renderCalendar();

            // If the user is currently looking at the tasks tab, refresh its view
            if (this.activeTab === 'tasks') {
                await this.populateTasks();
            }

            // IMPORTANT: Schedule the next refresh for the following day
            this.scheduleDailyRefresh();

        }, msUntilMidnight);
    }

    handleViewportResize() {
        // This logic should only run on mobile
        if (!this.app.isMobile) return;

        // A threshold of 200px is a safe bet to assume the keyboard is open.
        // We compare the total window height with the currently visible area's height.
        const keyboardVisible = window.innerHeight - window.visualViewport.height > 200;

        // Toggle the class on the main plugin container
        this.containerEl.firstElementChild.classList.toggle('keyboard-visible', keyboardVisible);
    }

    async animateTaskGroup(taskListWrapper, expand) {
        // Cancel any ongoing animation on this element
        if (taskListWrapper.animation) {
            taskListWrapper.animation.cancel();
        }

        if (expand) {
            // --- EXPANDING ---
            // 1. Make the element visible so we can measure it.
            taskListWrapper.style.display = 'grid';

            // 2. READ: Get the full, unconstrained height of the content.
            const endHeight = taskListWrapper.scrollHeight;

            // 3. ANIMATE: Animate from a height of 0 to the full height.
            taskListWrapper.animation = taskListWrapper.animate([
                { height: '0px', opacity: 0 },
                { height: `${endHeight}px`, opacity: 1 }
            ], {
                duration: 350,
                easing: 'ease-in-out',
                fill: 'forwards'
            });

            // After the animation, set height to 'auto' to allow content to resize dynamically.
            taskListWrapper.animation.onfinish = () => {
                taskListWrapper.style.height = 'auto';
            };

        } else {
            // --- COLLAPSING ---
            // 1. READ: Get the current height of the element before collapsing.
            const startHeight = taskListWrapper.offsetHeight;

            // 2. ANIMATE: Animate from the current height down to 0.
            taskListWrapper.animation = taskListWrapper.animate([
                { height: `${startHeight}px`, opacity: 1 },
                { height: '0px', opacity: 0 }
            ], {
                duration: 350,
                easing: 'ease-in-out',
                fill: 'forwards'
            });

            // After the animation, hide the element completely.
            taskListWrapper.animation.onfinish = () => {
                taskListWrapper.style.display = 'none';
            };
        }
    }



    getViewType() { return VIEW_TYPE_PERIOD; }
    getDisplayText() { return "üìÖ Calendar Period Week Notes"; }
    getIcon() { return "calendar-check"; }

    async buildWeeklyNotesCache() {
        if (!this.plugin.settings.enableWeeklyNotes) return;
        this.existingWeeklyNotes.clear();
        const folderPath = this.plugin.settings.weeklyNoteFolder;
        const folder = this.app.vault.getAbstractFileByPath(folderPath);
        if (folder instanceof TFolder) {
            for (const file of folder.children) {
                if (file instanceof TFile && file.extension === 'md') {
                    this.existingWeeklyNotes.add(file.path);
                }
            }
        }
    }

    async refreshIcsEvents() {
        const { requestUrl, Notice } = require('obsidian');

        // This check is now redundant since ICAL is bundled, but it's safe to keep.
        if (!ICALmodule) {
            console.error("ical.js library not bundled correctly.");
            return;
        }

        this.icsEventsByDate.clear();
        this.processedEventSignatures.clear();

        const icsUrl = this.plugin.settings.icsUrl;
        if (!icsUrl) {
            if (this.isCalendarRendered) this.renderCalendar();
            return;
        }

        try {
            const response = await requestUrl({ url: icsUrl });
            const icalData = response.text;
            const calendar = new ICALmodule.Component(ICALmodule.parse(icalData));
            const icalEndDate = ICALmodule.Time.fromJSDate(moment().add(2, 'years').toDate());
            const icalStartDate = ICALmodule.Time.fromJSDate(moment().subtract(1, 'year').toDate());

            const events = calendar.getAllSubcomponents('vevent');
            for (const vevent of events) {
                const event = new ICALmodule.Event(vevent);

                // --- FINAL FIX ---
                // Add a check to skip any null or undefined event objects
                // that result from malformed data in the ICS feed.
                if (!event) {
                    continue;
                }
                // --- END OF FIX ---

                if (event.recurrenceId) {
                    this.addParsedEvent({ item: event }, false);
                } else if (event.isRecurring()) {
                    const iterator = event.iterator();
                    let next;
                    while ((next = iterator.next()) && next.compare(icalEndDate) <= 0) {
                        if (next.compare(icalStartDate) < 0) continue;

                        const occurrence = event.getOccurrenceDetails(next);
                        this.addParsedEvent(occurrence, true);
                    }
                } else {
                    this.addParsedEvent({ item: event }, false);
                }
            }
        } catch (error) {
            new Notice(`Calendar Period Week Notes - ICS error: ${error.message}`, 10000);
            console.error("A detailed ICS parsing error occurred:", error);
        }

        if (this.isCalendarRendered) this.renderCalendar();
    }


    /**
     *  Adds a parsed ICAL event occurrence to the events map, handling de-duplication.
     *  This method uses a hybrid approach to de-duplication:
     *  - For recurring instances, it uses a combination of UID and recurrenceId.
     *  - For single events, it uses a content-based signature (summary, start, end).   
     * 
     * @param {*} occurrence 
     * @param {*} isRecurringInstance 
     * @returns 
     */
    addParsedEvent(occurrence, isRecurringInstance) {
        const { item } = occurrence;
        if (!item) return;

        // --- HYBRID DE-DUPLICATION ---
        if (isRecurringInstance) {
            // For recurring instances, the UID is the UID of the parent event, and the
            // recurrenceId makes it unique. We create a signature from both.
            const recurrenceSignature = `${item.uid}:${occurrence.recurrenceId.toString()}`;
            if (this.processedEventSignatures.has(recurrenceSignature)) {
                return; // Skip duplicate recurring instance
            }
            this.processedEventSignatures.add(recurrenceSignature);
        } else {
            // For single events (like the duplicate 'Tim Holiday'), use the content signature.
            const singleEventSignature = `${item.summary}:${item.startDate.toString()}:${item.endDate.toString()}`;
            if (this.processedEventSignatures.has(singleEventSignature)) {
                return; // Skip duplicate single event
            }
            this.processedEventSignatures.add(singleEventSignature);
        }

        const startMoment = moment(occurrence.startDate ? occurrence.startDate.toJSDate() : item.startDate.toJSDate());
        const endMoment = moment(occurrence.endDate ? occurrence.endDate.toJSDate() : item.endDate.toJSDate());

        const isAllDay = item.startDate.isDate;
        if (isAllDay) {
            endMoment.subtract(1, 'second');
        }

        const eventData = {
            uid: item.uid,
            summary: item.summary,
            isAllDay: isAllDay,
            startTime: isAllDay ? null : startMoment.format('HH:mm'),
            endTime: isAllDay ? null : endMoment.format('HH:mm')
        };

        let currentDay = startMoment.clone().startOf('day');
        while (currentDay.isSameOrBefore(endMoment.startOf('day'))) {
            const dateKey = currentDay.format('YYYY-MM-DD');

            if (!this.icsEventsByDate.has(dateKey)) {
                this.icsEventsByDate.set(dateKey, []);
            }

            // Final simple check to prevent adding the exact same object twice in the loop
            if (!this.icsEventsByDate.get(dateKey).some(e => e.uid === eventData.uid && e.summary === eventData.summary)) {
                this.icsEventsByDate.get(dateKey).push(eventData);
            }

            currentDay.add(1, 'day');
        }
    }

    async openWeeklyNote(dateInfo) {
        // --- Start of Debugging ---
        if (!dateInfo || typeof dateInfo.year === 'undefined') {
            console.error("Weekly Note Error: Invalid dateInfo object received.", dateInfo);
            new Notice("Could not create weekly note due to an internal error. Check console for details.");
            return;
        }
        // --- End of Debugging ---

        if (!this.plugin.settings.enableWeeklyNotes) return;

        const { weeklyNoteFolder, weeklyNoteTemplate, weeklyNoteFormat } = this.plugin.settings;

        // 1. Calculate all possible placeholder values from the data object
        const pweek = ((dateInfo.weekSinceStart - 1) % 52) + 1; // Calculate the week (1-52) in the period year
        const replacements = {
            YYYY: dateInfo.year,
            MM: String(dateInfo.month + 1).padStart(2, '0'),
            PN: "P" + dateInfo.period,
            PW: "W" + dateInfo.week,
            WKP: String(pweek).padStart(2, '0'),
            WKC: String(dateInfo.calendarWeek).padStart(2, '0')
        };

        // 2. Build the filename by replacing placeholders in the format string
        const fileName = weeklyNoteFormat.replace(/YYYY|MM|PN|PW|WKP|WKC/g, (match) => {
            // This ensures that if a value is somehow undefined, it won't break the filename.
            return replacements[match] !== undefined ? replacements[match] : match;
        });

        // 3. The rest of the file creation/opening logic remains the same
        const path = `${weeklyNoteFolder}/${fileName}.md`;
        const file = this.app.vault.getAbstractFileByPath(path);

        if (file) {
            const leaf = this.app.workspace.getLeaf(false);
            await leaf.openFile(file);
        } else {
            new ConfirmationModal(this.app,
                "Create weekly note?",
                `A weekly note for "${fileName}" does not exist. Would you like to create it?`,
                async () => {
                    let fileContent = "";
                    const templateFile = this.app.vault.getAbstractFileByPath(weeklyNoteTemplate);
                    if (templateFile instanceof TFile) fileContent = await this.app.vault.read(templateFile);

                    if (!this.app.vault.getAbstractFileByPath(weeklyNoteFolder)) {
                        await this.app.vault.createFolder(weeklyNoteFolder);
                    }

                    const newFile = await this.app.vault.create(path, fileContent);
                    await this.buildWeeklyNotesCache();
                    this.renderCalendar();
                    const leaf = this.app.workspace.getLeaf(false);
                    await leaf.openFile(newFile);
                },
                "Yes, create it"
            ).open();
        }
    }

    generateMonthGrid(dateForMonth, targetBodyEl) {
        const { settings } = this.plugin;
        const today = new Date();
        const year = dateForMonth.getFullYear();
        const month = dateForMonth.getMonth();
        const firstDayOfMonth = new Date(year, month, 1);
        const folder = settings.dailyNotesFolder || "";
        const format = settings.dailyNoteDateFormat || "YYYY-MM-DD";
        const existingNotes = new Set(this.app.vault.getMarkdownFiles().filter(file => !folder || file.path.startsWith(folder + "/")).map(file => file.basename));

        // This new logic correctly calculates the first day to show on the calendar
        const startDayNumber = this.plugin.settings.weekStartDay === 'monday' ? 1 : 0; // Mon=1, Sun=0
        moment.updateLocale('en', { week: { dow: startDayNumber } });

        let dayOfWeek = firstDayOfMonth.getDay(); // JS standard: Sun=0, Mon=1...

        let diff = dayOfWeek - startDayNumber;
        if (diff < 0) {
            diff += 7; // Ensure we go back to the previous week
        }

        let currentDay = new Date(firstDayOfMonth);
        currentDay.setDate(firstDayOfMonth.getDate() - diff);

        const requiredRows = 6;
        for (let i = 0; i < requiredRows; i++) {
            const row = targetBodyEl.createEl("tr");

            if (settings.highlightCurrentWeek) {
                const todayMoment = moment();
                const startOfWeekMoment = moment(currentDay);
                if (todayMoment.weekYear() === startOfWeekMoment.weekYear() && todayMoment.week() === startOfWeekMoment.week()) {
                    row.addClass('current-week-row');
                }
            }

            const weekMoment = moment(new Date(currentDay));
            const isoWeek = weekMoment.isoWeek();
            const isoYear = weekMoment.isoWeekYear();
            const isoMonth = weekMoment.month();
            const periodWeekData = getPeriodWeek(new Date(currentDay), settings.startOfPeriod1Date);

            const dateInfoForWeek = {
                year: isoYear,
                month: isoMonth,
                period: periodWeekData.period,
                week: periodWeekData.week,
                calendarWeek: isoWeek,
                weekSinceStart: periodWeekData.weekSinceStart
            };

            const clickHandler = () => {
                this.openWeeklyNote(dateInfoForWeek);
            };

            let weeklyNoteExists = false;
            if (settings.enableWeeklyNotes) {
                const pweek = ((dateInfoForWeek.weekSinceStart - 1) % 52) + 1;
                const replacements = {
                    YYYY: dateInfoForWeek.year,
                    MM: String(dateInfoForWeek.month + 1).padStart(2, '0'),
                    PN: "P" + dateInfoForWeek.period,
                    PW: "W" + dateInfoForWeek.week,
                    WKP: String(pweek).padStart(2, '0'),
                    WKC: String(dateInfoForWeek.calendarWeek).padStart(2, '0')
                };
                const expectedFileName = settings.weeklyNoteFormat.replace(/YYYY|WKP|WKC|MM|PN|PW/g, match => replacements[match]);
                const expectedPath = `${settings.weeklyNoteFolder}/${expectedFileName}.md`;
                weeklyNoteExists = this.existingWeeklyNotes.has(expectedPath);
            }

            if (settings.showPWColumn) {
                const pwCell = row.createEl("td", { cls: "pw-label-cell" });
                const pwContent = pwCell.createDiv({ cls: "day-content" });
                pwContent.createDiv({ cls: "day-number" }).setText(this.formatPW(periodWeekData.period, periodWeekData.week));

                pwCell.style.cursor = "pointer";

                if (this.plugin.settings.highlightTodayPWLabel) {
                    for (let d = 0; d < 7; d++) {
                        const checkDate = new Date(currentDay);
                        checkDate.setDate(currentDay.getDate() + d);
                        if (isSameDay(checkDate, today)) {
                            pwCell.addClass("today-pw-label");
                            break;
                        }
                    }
                }

                if (weeklyNoteExists && settings.showWeeklyNoteDot && !settings.showWeekNumbers) {
                    const dotsContainer = pwContent.createDiv({ cls: 'dots-container' });
                    dotsContainer.createDiv({ cls: 'calendar-dot weekly-note-dot' });
                }
                pwCell.addEventListener('click', clickHandler);
                pwCell.addEventListener('mouseenter', () => { if (this.plugin.settings.enableRowHighlight) { const highlightColor = document.body.classList.contains('theme-dark') ? this.plugin.settings.rowHighlightColorDark : this.plugin.settings.rowHighlightColorLight; row.style.backgroundColor = highlightColor; } });
                pwCell.addEventListener('mouseleave', () => { row.style.backgroundColor = ''; });
            }

            if (settings.showWeekNumbers) {
                const weekNum = settings.weekNumberType === 'period' ? periodWeekData.weekSinceStart : isoWeek;
                const weekCell = row.createEl("td", { cls: "week-number-cell" });
                const weekContent = weekCell.createDiv({ cls: "day-content" });
                weekContent.createDiv({ cls: "day-number" }).setText(weekNum.toString());

                weekCell.style.cursor = "pointer";

                if (this.plugin.settings.highlightTodayPWLabel) {
                    for (let d = 0; d < 7; d++) {
                        const checkDate = new Date(currentDay);
                        checkDate.setDate(currentDay.getDate() + d);
                        if (isSameDay(checkDate, today)) {
                            weekCell.addClass("today-pw-label");
                            break;
                        }
                    }
                }

                if (weeklyNoteExists && settings.showWeeklyNoteDot) {
                    const dotsContainer = weekContent.createDiv({ cls: 'dots-container' });
                    dotsContainer.createDiv({ cls: 'calendar-dot weekly-note-dot' });
                }
                weekCell.addEventListener('click', clickHandler);
                weekCell.addEventListener('mouseenter', () => { if (this.plugin.settings.enableRowHighlight) { const highlightColor = document.body.classList.contains('theme-dark') ? this.plugin.settings.rowHighlightColorDark : this.plugin.settings.rowHighlightColorLight; row.style.backgroundColor = highlightColor; } });
                weekCell.addEventListener('mouseleave', () => { row.style.backgroundColor = ''; });
            }

            for (let d = 0; d < 7; d++) {
                const dayDate = new Date(currentDay);
                dayDate.setDate(currentDay.getDate() + d);
                const isOtherMonth = dayDate.getMonth() !== month;
                const cell = row.createEl("td");

                // Add separator class to first date column
                if (d === 0 && this.plugin.settings.showPWColumnSeparator &&
                    (this.plugin.settings.showPWColumn || this.plugin.settings.showWeekNumbers)) {
                    cell.addClass('first-date-column');
                }

                const contentDiv = cell.createDiv("day-content");
                const dayNumber = contentDiv.createDiv("day-number");
                dayNumber.textContent = dayDate.getDate().toString();
                const dateKey = moment(dayDate).format("YYYY-MM-DD");


                const icsEventsForDay = this.icsEventsByDate.get(dateKey);
                const tasksForDay = this.tasksByDate.get(dateKey);

                let totalTaskCount = tasksForDay ? tasksForDay.length : 0;
                const calendarEventCount = icsEventsForDay ? icsEventsForDay.length : 0;

                const eventIndicatorStyle = this.plugin.settings.calendarEventIndicatorStyle;

                // Conditionally add calendar event count to the total count for heatmap/badge
                if (eventIndicatorStyle === 'heatmap' || eventIndicatorStyle === 'badge') {
                    totalTaskCount += calendarEventCount;
                }

                const isToday = isSameDay(dayDate, today);
                if (totalTaskCount > 0) {
                    if (settings.taskIndicatorStyle === 'badge') {
                        contentDiv.createDiv({ cls: 'task-count-badge', text: totalTaskCount.toString() });

                    } else if (settings.taskIndicatorStyle === 'heatmap') {
                        const shouldApplyHeatmap = !(isToday && settings.todayHighlightStyle === 'cell');

                        if (shouldApplyHeatmap) {

                            const startColor = parseRgbaString(settings.taskHeatmapStartColor);
                            const midColor = parseRgbaString(settings.taskHeatmapMidColor);
                            const endColor = parseRgbaString(settings.taskHeatmapEndColor);
                            const midPoint = settings.taskHeatmapMidpoint;
                            const maxPoint = settings.taskHeatmapMaxpoint;


                            if (startColor && midColor && endColor) {
                                let finalColor;
                                if (totalTaskCount >= maxPoint) { finalColor = settings.taskHeatmapEndColor; }
                                else if (totalTaskCount >= midPoint) { const factor = (totalTaskCount - midPoint) / (maxPoint - midPoint); finalColor = blendRgbaColors(midColor, endColor, factor); }
                                else { const divisor = midPoint - 1; const factor = divisor > 0 ? (totalTaskCount - 1) / divisor : 1; finalColor = blendRgbaColors(startColor, midColor, factor); }




                                contentDiv.style.setProperty('background-color', finalColor, 'important');


                                // This creates a border using the theme's background color, making a clean gap.
                                // UPDATED: Check if this cell is in the current week row
                                const isInHighlightedRow = settings.highlightCurrentWeek &&
                                    row.classList.contains('current-week-row');

                                // Use the row highlight color as border if in highlighted row
                                if (isInHighlightedRow) {
                                    const borderColor = document.body.classList.contains('theme-dark')
                                        ? settings.rowHighlightColorDark
                                        : settings.rowHighlightColorLight;
                                    contentDiv.style.border = `${this.plugin.settings.contentBorderWidth} solid ${borderColor}`;
                                } else {
                                    contentDiv.style.border = `${this.plugin.settings.contentBorderWidth} solid var(--background-secondary)`;
                                }
                                // A slightly smaller radius makes it look neatly inset.
                                contentDiv.style.borderRadius = '8px';
                                contentDiv.style.boxSizing = 'border-box';

                            }
                        }
                    }
                }


                if (isOtherMonth) dayNumber.addClass("day-number-other-month");
                if (isSameDay(dayDate, today)) cell.addClass("today-cell");
                const createdFiles = this.createdNotesMap.get(dateKey) || [];
                const modifiedFiles = this.modifiedNotesMap.get(dateKey) || [];
                const dailyNoteFileName = formatDate(dayDate, format);
                const dailyNoteExists = existingNotes.has(dailyNoteFileName);
                const dotsContainer = contentDiv.createDiv({ cls: 'dots-container' });

                if (dailyNoteExists) { dotsContainer.createDiv({ cls: "period-month-daily-note-dot calendar-dot" }); }
                if (settings.showOtherNoteDot && createdFiles.length > 0) { dotsContainer.createDiv({ cls: 'other-note-dot calendar-dot' }); }
                if (settings.showModifiedFileDot && modifiedFiles.length > 0) { dotsContainer.createDiv({ cls: 'modified-file-dot calendar-dot' }); }
                const assetsCreated = this.assetCreationMap.get(dateKey) || [];
                if (settings.showAssetDot && assetsCreated.length > 0) { dotsContainer.createDiv({ cls: 'asset-dot calendar-dot' }); }
                if (settings.showTaskDot && totalTaskCount > 0) { dotsContainer.createDiv({ cls: 'task-dot calendar-dot' }); }


                if (eventIndicatorStyle === 'dot' && calendarEventCount > 0 || settings.showIcsDot && calendarEventCount > 0) {
                    dotsContainer.createDiv({ cls: 'calendar-dot ics-event-dot' });
                }

                const hasPopupContent = dailyNoteExists || (tasksForDay && tasksForDay.length > 0) || (createdFiles && createdFiles.length > 0) || (modifiedFiles && modifiedFiles.length > 0) || (assetsCreated && assetsCreated.length > 0) || (icsEventsForDay && icsEventsForDay.length > 0);

                if (hasPopupContent) {
                    cell.addEventListener('mouseenter', () => {
                        if (this.isPopupLocked) return;
                        this.hideFilePopup();
                        clearTimeout(this.hideTimeout);
                        this.hoverTimeout = setTimeout(() => {
                            const dailyNoteFile = dailyNoteExists ? this.app.vault.getAbstractFileByPath(folder ? `${folder}/${dailyNoteFileName}.md` : `${dailyNoteFileName}.md`) : null;
                            const dataToShow = {
                                tasks: tasksForDay,
                                daily: dailyNoteFile ? [dailyNoteFile] : [],
                                created: settings.showOtherNoteDot ? createdFiles : [],
                                modified: settings.showModifiedFileDot ? modifiedFiles : [],
                                assets: settings.showAssetDot ? assetsCreated : [],
                                ics: icsEventsForDay || [],
                            };
                            this.showFilePopup(cell, dataToShow, dayDate);
                        }, this.plugin.settings.otherNoteHoverDelay);
                    });
                    cell.addEventListener('mouseleave', () => {
                        clearTimeout(this.hoverTimeout);
                        this.hideTimeout = setTimeout(() => this.hideFilePopup(), this.plugin.settings.popupHideDelay);
                    });
                }
                cell.addEventListener("click", () => this.openDailyNote(dayDate));
                cell.addEventListener('mouseenter', () => {
                    if (!this.plugin.settings.enableRowToDateHighlight) return;
                    const highlightColor = document.body.classList.contains('theme-dark')
                        ? this.plugin.settings.rowHighlightColorDark
                        : this.plugin.settings.rowHighlightColorLight;
                    const row = cell.parentElement;
                    const allRows = Array.from(row.parentElement.children);
                    const rowIndex = allRows.indexOf(row);
                    const colIndex = Array.from(row.children).indexOf(cell);
                    const table = cell.closest('table');
                    for (let j = 0; j <= colIndex; j++) {
                        const cellToHighlight = row.children[j];
                        if (cellToHighlight) cellToHighlight.style.backgroundColor = highlightColor;
                    }
                    for (let i = 0; i < rowIndex; i++) {
                        const priorRow = allRows[i];
                        const cellToHighlight = priorRow.children[colIndex];
                        if (cellToHighlight) cellToHighlight.style.backgroundColor = highlightColor;
                    }
                    if (table) {
                        const headerRow = table.querySelector('thead tr');
                        if (headerRow) {
                            const headerCell = headerRow.children[colIndex];
                            if (headerCell) headerCell.style.backgroundColor = highlightColor;
                        }
                    }
                });
                cell.addEventListener('mouseleave', () => {
                    if (!this.plugin.settings.enableRowToDateHighlight) return;
                    const table = cell.closest('table');
                    if (table) {
                        const allCells = table.querySelectorAll('tbody td, thead th');
                        allCells.forEach(c => c.style.backgroundColor = '');
                    }
                });
            }
            currentDay.setDate(currentDay.getDate() + 7);
        }
        if (settings.highlightCurrentWeek) {
            const highlightedRow = targetBodyEl.querySelector('.current-week-row');
            if (highlightedRow) {
                const highlightColor = document.body.classList.contains('theme-dark')
                    ? settings.rowHighlightColorDark
                    : settings.rowHighlightColorLight;

                const cells = highlightedRow.querySelectorAll('td');
                cells.forEach(cell => {
                    cell.style.backgroundColor = highlightColor;
                });
            }
        }
    }

    /**
     * Finds all markdown files that link to or embed the given asset file.
     * @param {TFile} assetFile - The asset file to find backlinks for.
     * @returns {Promise<TFile[]>} A promise that resolves to an array of markdown files linking to the asset.
     */
    async findAssetBacklinks(assetFile) {
        const backlinks = [];
        const markdownFiles = this.app.vault.getMarkdownFiles();

        for (const mdFile of markdownFiles) {
            const cache = this.app.metadataCache.getFileCache(mdFile);
            if (!cache) continue;

            const linksAndEmbeds = [...(cache.embeds || []), ...(cache.links || [])];

            for (const ref of linksAndEmbeds) {
                const linkedFile = this.app.metadataCache.getFirstLinkpathDest(ref.link, mdFile.path);
                if (linkedFile && linkedFile.path === assetFile.path) {
                    backlinks.push(mdFile);
                    break; // Move to the next file once a link is found
                }
            }
        }
        return backlinks;
    }

    /**
      * Adds a right-click context menu to a file row for deletion.
      * @param {HTMLElement} element The row element to attach the listener to.
      * @param {TFile} file The file associated with the row.
      * @param {() => void} refreshCallback The function to call to refresh the list after deletion.
      */
    addFileContextMenu(element, file, refreshCallback) {
        element.addEventListener('contextmenu', (event) => {
            event.preventDefault();
            const menu = new Menu();

            menu.addItem((item) =>
                item
                    .setTitle("Delete file")
                    .setIcon("trash")
                    .onClick(() => {
                        new ConfirmationModal(
                            this.app,
                            "Confirm Deletion",
                            `Are you sure you want to permanently delete "${file.name}"? This action cannot be undone.`,
                            async () => {
                                try {
                                    await this.app.vault.trash(file, true); // true for permanent system trash
                                    new Notice(`Deleted: ${file.name}`);
                                    refreshCallback(); // Refresh the specific list
                                } catch (err) {
                                    new Notice(`Error deleting file: ${err.message}`);
                                    console.error(err);
                                }
                            },
                            "Yes, delete"
                        ).open();
                    })
            );

            menu.showAtMouseEvent(event);
        });
    }

    isWeeklyNote(file) {
        if (!this.plugin.settings.enableWeeklyNotes || !(file instanceof TFile)) {
            return false;
        }
        // A file is considered a weekly note if it's inside the specified folder.
        return file.parent?.path === this.plugin.settings.weeklyNoteFolder;
    }

    /**
   * Attaches touch event listeners for mobile swipe gestures.
   * @param {HTMLElement} calendarEl The element to listen for 'swipe up' on.
   * @param {HTMLElement} headerEl The element to listen for 'swipe down' on.
   */
    attachSwipeListeners(calendarEl, headerEl) {
        const swipeThreshold = 50;
        let startY = 0;
        let startX = 0;
        let isDragging = false;
        let dragTarget = null; // To know which element started the drag

        const handleDragStart = (e) => {
            isDragging = true;
            dragTarget = e.currentTarget; // Store if drag started on calendar or header
            startY = e.touches ? e.touches[0].clientY : e.clientY;
            startX = e.touches ? e.touches[0].clientX : e.clientX;

            // Add the 'end' listeners to the window to catch drags that end outside the element
            window.addEventListener('mouseup', handleDragEnd, { once: true });
            window.addEventListener('touchend', handleDragEnd, { once: true });
        };

        const handleDragEnd = (e) => {
            if (!isDragging) return;
            isDragging = false;

            const endY = e.changedTouches ? e.changedTouches[0].clientY : e.clientY;
            const endX = e.changedTouches ? e.changedTouches[0].clientX : e.clientX;
            const deltaY = startY - endY;
            const deltaX = Math.abs(startX - endX);

            // Check if it's a predominantly vertical swipe
            if (Math.abs(deltaY) > swipeThreshold && Math.abs(deltaY) > deltaX) {
                // Swipe Up on Calendar Body: Hide Calendar
                if (dragTarget === calendarEl && deltaY > 0 && !this.isCalendarCollapsed) {
                    this.isCalendarCollapsed = true;
                    this.containerEl.firstElementChild.classList.add("calendar-collapsed");
                }
                // Swipe Down on Header: Show Calendar
                else if (dragTarget === headerEl && deltaY < 0 && this.isCalendarCollapsed) {
                    this.isCalendarCollapsed = false;
                    this.containerEl.firstElementChild.classList.remove("calendar-collapsed");
                }
            }
        };

        // Attach start listeners for both mouse and touch to both elements
        calendarEl.addEventListener('mousedown', handleDragStart);
        calendarEl.addEventListener('touchstart', handleDragStart, { passive: true });
        headerEl.addEventListener('mousedown', handleDragStart);
        headerEl.addEventListener('touchstart', handleDragStart, { passive: true });
    }

    /**
     * Displays a popup list of notes that link to a specific asset.
     * @param {HTMLElement} targetEl - The element to position the popup relative to.
     * @param {TFile} assetFile - The asset whose backlinks should be displayed.
     */
    async showBacklinksPopup(targetEl, assetFile) {
        this.hideFilePopup(); // Hide any other popups
        const backlinks = await this.findAssetBacklinks(assetFile);

        if (backlinks.length === 0) {
            new Notice("No backlinks found for this asset.");
            return;
        }

        this.popupEl = createDiv({ cls: 'other-notes-popup' });

        // Add header with a close button
        const headerRow = this.popupEl.createDiv({ cls: 'popup-header' });
        headerRow.createDiv({ cls: 'popup-header-title', text: 'Backlinks' });
        const closeBtn = headerRow.createDiv({ cls: 'popup-close-btn' });
        setIcon(closeBtn, 'x');
        headerRow.addEventListener('click', () => this.hideFilePopup());

        // Create a scrollable wrapper for the content
        const contentWrapper = this.popupEl.createDiv({ cls: 'popup-content-wrapper' });

        backlinks.forEach(noteFile => {
            const itemEl = contentWrapper.createDiv({ cls: 'other-notes-popup-item' });
            setIcon(itemEl, 'file-text');

            const titlePathWrapper = itemEl.createDiv({ cls: 'note-title-path-wrapper' });
            titlePathWrapper.createDiv({ text: noteFile.basename, cls: "note-title" });
            if (noteFile.parent && noteFile.parent.path !== '/') {
                titlePathWrapper.createDiv({ text: noteFile.parent.path, cls: 'note-path' });
            }

            itemEl.addEventListener('click', async () => {
                const cache = this.app.metadataCache.getFileCache(noteFile);
                let targetLine = 0;
                if (cache) {
                    const allLinks = [...(cache.embeds || []), ...(cache.links || [])];
                    for (const ref of allLinks) {
                        const linkedFile = this.app.metadataCache.getFirstLinkpathDest(ref.link, noteFile.path);
                        if (linkedFile && linkedFile.path === assetFile.path) {
                            targetLine = ref.position.start.line;
                            break;
                        }
                    }
                }
                const openInNewTab = this.plugin.settings.notesOpenAction === 'new-tab';
                const leaf = this.app.workspace.getLeaf(openInNewTab);
                await leaf.openFile(noteFile, { eState: { line: targetLine } });
                this.hideFilePopup();
            });
        });

        this.popupEl.addEventListener('mouseenter', () => clearTimeout(this.hideTimeout));
        this.popupEl.addEventListener('mouseleave', () => {
            this.hideTimeout = setTimeout(() => this.hideFilePopup(), this.plugin.settings.popupHideDelay);
        });

        document.body.appendChild(this.popupEl);

        const popupRect = this.popupEl.getBoundingClientRect();
        const targetRect = targetEl.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;
        const margin = this.plugin.settings.popupGap;
        let finalTop = targetRect.bottom + margin;
        if (finalTop + popupRect.height > viewportHeight) finalTop = targetRect.top - popupRect.height - margin;
        if (finalTop < 0) finalTop = margin;
        let finalLeft = targetRect.left;
        if (finalLeft + popupRect.width > viewportWidth) finalLeft = targetRect.right - popupRect.width;
        if (finalLeft < 0) finalLeft = margin;

        this.popupEl.style.top = `${finalTop}px`;
        this.popupEl.style.left = `${finalLeft}px`;
    }

    /**
     * Extracts all task lines (e.g., "- [ ] ...") from a string of content.
     * @param {string} content - The markdown content to parse.
     * @returns {string[]} An array of strings, where each string is a task line.
     */
    extractTaskLines(content) {
        const taskLines = [];
        // This regex finds any line that looks like a Markdown task, completed or not.
        const taskRegex = /^\s*(?:-|\d+\.)\s*\[.\]\s*.*/;
        const lines = content.split('\n');
        for (const line of lines) {
            if (taskRegex.test(line)) {
                taskLines.push(line);
            }
        }
        return taskLines;
    }

    /**
     * Checks if a file is an image based on its extension.
     * @param {TFile} file The file to check.
     * @returns {boolean} True if the file is a common image type.
     */
    isImageAsset(file) {
        const imageExtensions = ['png', 'jpg', 'jpeg', 'gif', 'svg', 'webp'];
        return imageExtensions.includes(file.extension.toLowerCase());
    }

    /**
     * Dynamically generates the label for a tab, including icon and/or text based on settings.
     * @param {HTMLElement} container The HTML element to populate with the label.
     * @param {string} key The key of the tab (e.g., 'notes', 'scratch').
     */
    getTabLabel(container, key) {
        container.empty(); // Clear previous content

        const isMobile = document.body.classList.contains('is-mobile');
        const displayMode = isMobile ? this.plugin.settings.mobileTabDisplayMode : this.plugin.settings.tabDisplayMode;

        const icons = this.plugin.settings.tabIcons || DEFAULT_SETTINGS.tabIcons;
        const textLabels = {
            scratch: "ScratchPad",
            notes: "Notes",
            pinned: "Pinned",
            tasks: "Tasks", // This is a fallback
            assets: "Assets"
        };

        let iconName = '';
        let text = '';

        if (key === 'notes') {
            const mode = this.notesViewMode;
            iconName = mode === 'pinned' ? icons.pinned : icons.notes;
            text = mode === 'pinned' ? textLabels.pinned : textLabels.notes;
        }
        else if (key === 'tasks') {
            const groupBy = this.plugin.settings.taskGroupBy;
            iconName = groupBy === 'tag' ? 'circle-check' : icons.tasks;
            text = groupBy === 'tag' ? "Tasks by Tag" : "Tasks by Date";
        }
        else if (key === 'assets') {
            iconName = this.isAssetsGridView ? 'image' : 'file-image';
            text = textLabels[key];
        }
        else {
            iconName = icons[key];
            text = textLabels[key];
        }

        if (displayMode.includes("icon")) {
            const iconEl = container.createDiv({ cls: 'tab-icon' });
            setIcon(iconEl, iconName || 'file-question');
        }

        if (displayMode.toLowerCase().includes("text")) {
            container.createSpan({ cls: 'tab-text', text: text || '' });
        }
    }

    /**
     * Determines if a file is a daily note based on its name format and location.
     * @param {TFile} file The file to check.
     * @returns {boolean} True if the file matches the daily note criteria.
     */
    isDailyNote(file) {
        const settings = this.plugin.settings;
        const dailyNoteFolder = settings.dailyNotesFolder;
        const format = settings.dailyNoteDateFormat || "YYYY-MM-DD";

        // Check if the filename strictly matches the daily note date format.
        const isNameCorrect = moment(file.basename, format, true).isValid();
        if (!isNameCorrect) {
            return false;
        }

        // If a daily notes folder is specified, check if the file is directly inside it.
        if (dailyNoteFolder) {
            return file.parent?.path === dailyNoteFolder;
        }

        // If no folder is set, the file must be in the vault's root directory.
        return file.parent?.path === '/';
    }

    /**
     * Toggles the scratchpad between edit and preview mode and triggers a re-render.
     */
    toggleScratchpadView() {
        this.isScratchpadPreview = !this.isScratchpadPreview;
        // The button state and content visibility are handled by the render method.
        this.renderScratchpadContent();
    }

    /**
     * Processes date placeholders in a string and replaces them with formatted dates.
     * Also handles a cursor position marker.
     * @param {string} formatString The string containing placeholders like {today}, {monday}, {date}+7, and a cursor marker '|'.
     * @returns {{text: string, cursorOffset: number}} The processed string and the calculated final cursor position.
     */
    processDatePlaceholders(formatString) {
        const cursorMarker = '|';
        let cursorOffset = -1;

        // Find the cursor marker's position and remove it for processing.
        const markerIndex = formatString.indexOf(cursorMarker);
        if (markerIndex !== -1) {
            cursorOffset = markerIndex;
            formatString = formatString.replace(cursorMarker, '');
        }

        // Process date placeholders using a regex.
        const processedText = formatString.replace(/{([^}]+)}/g, (match, tag) => {
            const now = moment();
            tag = tag.toLowerCase().trim();

            if (tag === 'today') return now.format('YYYY-MM-DD');
            if (tag === 'tomorrow') return now.add(1, 'day').format('YYYY-MM-DD');

            const weekdays = { 'sunday': 0, 'monday': 1, 'tuesday': 2, 'wednesday': 3, 'thursday': 4, 'friday': 5, 'saturday': 6 };
            if (tag in weekdays) {
                const targetDay = weekdays[tag];
                const currentDay = now.day();
                let daysToAdd = targetDay - currentDay;
                if (daysToAdd <= 0) {
                    daysToAdd += 7; // Find the *next* instance of the day.
                }
                return now.add(daysToAdd, 'days').format('YYYY-MM-DD');
            }

            const dynamicDateMatch = tag.match(/^date\s*([+-])\s*(\d+)/);
            if (dynamicDateMatch) {
                const operator = dynamicDateMatch[1];
                const amount = parseInt(dynamicDateMatch[2], 10);
                return operator === '+' ? now.add(amount, 'days').format('YYYY-MM-DD') : now.subtract(amount, 'days').format('YYYY-MM-DD');
            }

            return match; // Return original match if no placeholder is recognized.
        });

        // If the cursor marker wasn't found, set the offset to the end of the text.
        if (cursorOffset === -1) {
            cursorOffset = processedText.length;
        }

        return { text: processedText, cursorOffset: cursorOffset };
    }

    /**
     * Scans the entire vault for open tasks with due dates (e.g., üìÖYYYY-MM-DD)
     * and populates `this.tasksByDate` map for quick lookups by the calendar view.
     */
    async buildTasksByDateMap() {
        this.tasksByDate.clear();
        this.fileToTaskDates.clear(); // Also clear the tracking map

        const files = this.app.vault.getMarkdownFiles();

        for (const file of files) {
            if (this.plugin.settings.taskIgnoreFolders.some(folder => file.path.startsWith(folder))) {
                continue;
            }

            const content = await this.app.vault.cachedRead(file);
            const tasks = parseTasksFromFile(file, content); // Use the new helper

            const dateKeysForFile = new Set();

            for (const task of tasks) {
                // We only care about incomplete tasks with due dates for the calendar grid
                if (task.status.toLowerCase() !== 'x' && task.dueDate) {
                    const dateKey = moment(task.dueDate).format("YYYY-MM-DD");
                    if (!this.tasksByDate.has(dateKey)) {
                        this.tasksByDate.set(dateKey, []);
                    }
                    this.tasksByDate.get(dateKey).push(task);
                    dateKeysForFile.add(dateKey);
                }
            }

            if (dateKeysForFile.size > 0) {
                this.fileToTaskDates.set(file.path, dateKeysForFile);
            }
        }
    }

    /**
     * Shows a confirmation modal and handles the permanent deletion of an asset file.
     * @param {TFile} file - The asset file to delete.
     */
    async handleDeleteAsset(file) {
        new ConfirmationModal(
            this.app,
            "Confirm Deletion",
            `Are you sure you want to permanently delete "${file.name}"? This action cannot be undone.`,
            async () => {
                try {
                    await this.app.vault.trash(file, true); // `true` for permanent deletion.
                    new Notice(`Deleted asset: ${file.name}`);
                    // Refresh data maps and UI components that depend on asset data.
                    await this.buildAssetCreationMap();
                    await this.buildTasksByDateMap();
                    this.populateAssets();
                    this.renderCalendar();
                } catch (err) {
                    new Notice(`Error deleting file: ${err.message}`);
                    console.error(err);
                }
            }
            , "Yes, delete").open();
    }

    /**
     * Renders the content of the scratchpad, switching between an editor textarea
     * and a rendered Markdown preview based on the current view mode.
     */
    async renderScratchpadContent() {
        if (!this.scratchWrapperEl) return;

        // Preserve focus on the textarea across re-renders.
        const wasFocused = this.noteTextarea === document.activeElement;

        this.scratchWrapperEl.empty();

        // Create a container for action buttons (Preview, Add Task).
        const actionsContainer = this.scratchWrapperEl.createDiv({
            cls: "scratchpad-actions-container"
        });

        // Only show the Preview/Edit toggle button if enabled in settings.
        if (this.plugin.settings.scratchpad?.showPreviewToggle) {
            this.scratchpadViewToggleBtn = actionsContainer.createEl("button", {
                cls: "scratchpad-action-btn"
            });
            this.scratchpadViewToggleBtn.addEventListener("click", () => this.toggleScratchpadView());
        }

        // Only show the Add Task button if enabled in settings.
        if (this.plugin.settings.scratchpad?.showAddTaskButton) {
            this.addTaskBtn = actionsContainer.createEl("button", {
                cls: "scratchpad-action-btn"
            });
            setIcon(this.addTaskBtn, "plus");
            this.addTaskBtn.setAttribute("aria-label", "Add new task");
            this.addTaskBtn.addEventListener("click", () => this.addNewTaskToScratchpad());
        }

        if (this.isScratchpadPreview && this.plugin.settings.scratchpad?.showPreviewToggle) {
            // --- CONFIGURE UI FOR PREVIEW MODE ---
            if (this.scratchpadViewToggleBtn) {
                setIcon(this.scratchpadViewToggleBtn, "edit"); // Switch to Edit icon
                this.scratchpadViewToggleBtn.setAttribute("aria-label", "Edit mode");
            }
            if (this.addTaskBtn) this.addTaskBtn.style.display = 'none';

            // Disable search controls in preview mode.
            if (this.scratchpadSearchInputEl) this.scratchpadSearchInputEl.disabled = true;
            if (this.scratchpadSearchControlsEl) {
                Array.from(this.scratchpadSearchControlsEl.children).forEach(child => {
                    if (child.matches('button')) child.disabled = true;
                });
            }

            // Render the content as Markdown.
            this.scratchWrapperEl.addClass("markdown-preview-view");
            const markdownContent = await this.loadNote();
            const file = this.app.vault.getAbstractFileByPath(this.plugin.settings.fixedNoteFile);
            if (file) {
                MarkdownRenderer.render(this.app, markdownContent, this.scratchWrapperEl, file.path, this);
            }

        } else {
            // --- CONFIGURE UI FOR EDIT MODE ---
            if (this.scratchpadViewToggleBtn) {
                setIcon(this.scratchpadViewToggleBtn, "eye"); // Switch to Preview icon
                this.scratchpadViewToggleBtn.setAttribute("aria-label", "Preview mode");
            }
            if (this.addTaskBtn) this.addTaskBtn.style.display = 'block';

            // Enable search controls in edit mode.
            if (this.scratchpadSearchInputEl) this.scratchpadSearchInputEl.disabled = false;
            if (this.scratchpadSearchControlsEl) {
                Array.from(this.scratchpadSearchControlsEl.children).forEach(child => {
                    if (child.matches('button')) child.disabled = false;
                });
            }

            this.scratchWrapperEl.removeClass("markdown-preview-view");
            // The highlighter is a div that sits behind the textarea to show search matches.
            this.scratchHighlighterEl = this.scratchWrapperEl.createDiv({ cls: "scratch-base scratch-highlighter" });
            this.noteTextarea = this.scratchWrapperEl.createEl("textarea", { cls: "scratch-base scratch-content" });

            if (this.app.isMobile) {
                this.noteTextarea.addEventListener('focus', () => {
                    // When you tap the text area, add the class to create the padding.
                    this.noteTextarea.classList.add('is-editing-mobile');
                });

                this.noteTextarea.addEventListener('blur', () => {
                    // When you tap away, remove the class to restore the normal view.
                    this.noteTextarea.classList.remove('is-editing-mobile');
                });
            }

            this.noteTextarea.value = this.noteText;
            if (wasFocused) this.noteTextarea.focus();
            this.updateScratchpadHighlights();


            // Save content on input.
            this.noteTextarea.addEventListener("input", async () => {
                this.noteText = this.noteTextarea.value;
                await this.saveFixedNote(this.noteText);
                this.updateScratchpadSearchCount();
                this.updateScratchpadHighlights();
            });

            // Synchronize scroll position between textarea and highlighter.
            this.noteTextarea.addEventListener('scroll', () => {
                if (this.scratchHighlighterEl) {
                    this.scratchHighlighterEl.scrollTop = this.noteTextarea.scrollTop;
                    this.scratchHighlighterEl.scrollLeft = this.noteTextarea.scrollLeft;
                }
            });
        }
    }

    /**
     * Called when the view is first opened. It loads all initial data and registers
     * event listeners for file changes and auto-reloading.
     */
    async onOpen() {
        // --- Load all initial data ---
        await this.buildCreatedNotesMap();
        await this.buildModifiedNotesMap();
        await this.buildAssetCreationMap();
        await this.buildTasksByDateMap();
        await this.refreshIcsEvents();
        await this.buildWeeklyNotesCache();
        this.noteText = await this.loadNote();
        this.render();
        this.setupReorderMode();

        // --- Register events and intervals ---
        const intervalMs = this.plugin.settings.autoReloadInterval || 5000;
        this.registerInterval(setInterval(async () => {
            if (document.activeElement === this.noteTextarea) return;
            const latest = await this.loadNote();
            if (latest !== this.noteText && this.noteTextarea) {
                this.noteText = latest;
                this.noteTextarea.value = latest;
            }
        }, intervalMs));

        // This listener checks the date when the app window gets focus.
        // This solves a 'stale date highlight after a device sleep' issue.
        this.registerDomEvent(window, 'focus', () => {
            const now = new Date();
            // Only proceed if the day has actually changed.
            if (!isSameDay(now, this.lastKnownToday)) {
                console.log("Window focus detected: Day has changed. Refreshing calendar.");

                // Update our tracker to the new date.
                this.lastKnownToday = now;

                // Efficiently re-render just the calendar grid.
                this.renderCalendar();
            }
        });

        const themeChangeCallback = (mutationsList) => {
            for (const mutation of mutationsList) {
                // We only care about changes to the 'class' attribute
                if (mutation.attributeName === 'class') {
                    const wasDark = mutation.oldValue?.includes('theme-dark');
                    const isDark = document.body.classList.contains('theme-dark');

                    // If the dark theme status has changed, trigger a re-render
                    if (wasDark !== isDark) {
                        console.log("Theme changed. Refreshing calendar view.");
                        this.render();
                    }
                }
            }
        };

        // Create and start the observer
        this.themeObserver = new MutationObserver(themeChangeCallback);
        this.themeObserver.observe(document.body, {
            attributes: true,
            attributeFilter: ['class'],
            attributeOldValue: true // We need the old value to detect the change
        });
        // Use metadataCache for modifications - it's more efficient
        this.registerEvent(this.app.metadataCache.on('changed', async (file) => {
            if (this.isWeeklyNote(file)) {
                this.existingWeeklyNotes.add(file.path);
            }

            // Incrementally update maps
            this.removeFileFromMaps(file.path);
            this.addFileToMaps(file);
            await this.updateTasksForFile(file);

            // Trigger a targeted UI refresh
            this.refreshUI(file);
        }));

        // Vault event for new files
        this.registerEvent(this.app.vault.on("create", async (file) => {
            if (!(file instanceof TFile)) return;
            if (this.isWeeklyNote(file)) this.existingWeeklyNotes.add(file.path);

            if (file.path.toLowerCase().endsWith('.md')) {
                this.addFileToMaps(file);
                await this.updateTasksForFile(file);
            } else {
                this.addFileToAssetMap(file);
            }
            this.refreshUI(file);
        }));

        // Vault event for deleted files
        this.registerEvent(this.app.vault.on("delete", async (file) => {
            if (!(file instanceof TFile)) return;
            if (this.existingWeeklyNotes.has(file.path)) this.existingWeeklyNotes.delete(file.path);

            if (file.path.toLowerCase().endsWith('.md')) {
                this.removeFileFromMaps(file.path);
                // Also remove tasks from the deleted file
                const oldDateKeys = this.fileToTaskDates.get(file.path) || new Set();
                for (const dateKey of oldDateKeys) {
                    const tasks = this.tasksByDate.get(dateKey);
                    if (tasks) {
                        const remaining = tasks.filter(t => t.file.path !== file.path);
                        if (remaining.length > 0) this.tasksByDate.set(dateKey, remaining);
                        else this.tasksByDate.delete(dateKey);
                    }
                }
                this.fileToTaskDates.delete(file.path);
            } else {
                this.removeFileFromAssetMap(file.path);
            }
            this.refreshUI(file);
        }));

        // Vault event for renamed files
        this.registerEvent(this.app.vault.on("rename", async (file, oldPath) => {
            if (!(file instanceof TFile)) return;
            if (this.existingWeeklyNotes.has(oldPath)) {
                this.existingWeeklyNotes.delete(oldPath);
            }
            if (this.isWeeklyNote(file)) {
                this.existingWeeklyNotes.add(file.path);
            }

            if (file.path.toLowerCase().endsWith('.md')) {
                this.removeFileFromMaps(oldPath);
                this.addFileToMaps(file);
                // Re-point tasks to the new file path
                await this.updateTasksForFile(file);
            } else {
                this.removeFileFromAssetMap(oldPath);
                this.addFileToAssetMap(file);
            }
            this.refreshUI(file);
        }));


        const PULL_THRESHOLD = 70; // How far the user needs to pull down to trigger a refresh

        const resetPullStyles = () => {
            this.taskRefreshIndicator.removeClass('is-ready', 'is-pulling', 'is-refreshing');
            this.tasksContentEl.style.transform = `translateY(0px)`;
            this.taskRefreshIndicator.style.transform = `translateY(-50px) scale(0.7)`;
            setIcon(this.taskRefreshIndicator, 'arrow-down');
        };

        this.registerDomEvent(this.tasksContentEl, 'touchstart', (e) => {
            if (this.tasksContentEl.scrollTop === 0) {
                this.isTaskPulling = true;
                this.taskPullStartY = e.touches[0].clientY;
            }
        }, { passive: false });

        this.registerDomEvent(this.tasksContentEl, 'touchmove', (e) => {
            if (!this.isTaskPulling) return;

            const currentY = e.touches[0].clientY;
            // We only care about the downward pull distance from the start
            this.taskPullDistance = Math.max(0, currentY - this.taskPullStartY);

            // Only interfere if the list is scrolled to the top AND the user is pulling down.
            if (this.tasksContentEl.scrollTop === 0 && this.taskPullDistance > 0) {
                // Prevent the browser from scrolling the page
                e.preventDefault();

                const pullRatio = Math.min(this.taskPullDistance, PULL_THRESHOLD);
                this.tasksContentEl.style.transform = `translateY(${pullRatio}px)`;

                this.taskRefreshIndicator.addClass('is-pulling');
                this.taskRefreshIndicator.style.transform = `translateY(${pullRatio - 50}px) scale(0.7)`;

                if (this.taskPullDistance > PULL_THRESHOLD) {
                    this.taskRefreshIndicator.addClass('is-ready');
                    setIcon(this.taskRefreshIndicator, 'check');
                } else {
                    this.taskRefreshIndicator.removeClass('is-ready');
                    setIcon(this.taskRefreshIndicator, 'arrow-down');
                }
            } else {
                // If we've started scrolling down the list, stop tracking the pull
                this.isTaskPulling = false;
            }

        }, { passive: false });

        this.registerDomEvent(this.tasksContentEl, 'touchend', async (e) => {
            if (!this.isTaskPulling) return;
            this.isTaskPulling = false;

            if (this.taskPullDistance > PULL_THRESHOLD) {
                // Trigger the refresh
                this.taskRefreshIndicator.addClass('is-refreshing', 'is-ready');
                setIcon(this.taskRefreshIndicator, 'loader');

                await this.populateTasks();

                // Reset styles after refresh is complete
                setTimeout(() => {
                    resetPullStyles();
                }, 300); // Small delay for user to see the end of the spin

            } else {
                // Snap back if not pulled far enough
                resetPullStyles();
            }

            this.taskPullDistance = 0;

        });



        this.scheduleDailyRefresh();

    }

    /**
     * Forces a full rebuild of all data maps and a complete re-render of the view.
     * Useful after major setting changes.
     */
    async rebuildAndRender() {
        await this.buildCreatedNotesMap();
        await this.buildModifiedNotesMap();
        await this.buildAssetCreationMap();
        await this.refreshIcsEvents();
        await this.buildWeeklyNotesCache();
        this.render();
    }

    /**
     * Performs a more targeted UI refresh based on which file was changed,
     * avoiding a full re-render when possible.
     * @param {TFile} file The file that was changed.
     */
    async refreshUI(file) {
        // Debounce calendar render as it's the most common update
        clearTimeout(this.calendarRefreshDebounceTimer);
        this.calendarRefreshDebounceTimer = setTimeout(() => {
            // If in vertical view, a full re-render is needed to update all visible months.
            if (this.isVerticalView) {
                this.render();
            } else {
                // Otherwise, just re-render the single calendar grid.
                this.renderCalendar();
            }
        }, 300);

        // Refresh active tab if it's open and relevant
        switch (this.activeTab) {
            case 'scratch':
                if (file?.path === this.plugin.settings.fixedNoteFile) {
                    this.noteText = await this.loadNote();
                    if (this.noteTextarea) this.noteTextarea.value = this.noteText;
                }
                break;
            case 'notes':
                clearTimeout(this.notesRefreshDebounceTimer);
                this.notesRefreshDebounceTimer = setTimeout(() => this.populateNotes(), 250);
                break;
            case 'tasks':
                clearTimeout(this.taskRefreshDebounceTimer);
                this.taskRefreshDebounceTimer = setTimeout(() => this.populateTasks(), 250);
                break;
            case 'assets':
                // Invalidate asset cache and refresh
                this.isUnusedAssetCacheValid = false;
                this.populateAssets();
                break;
        }
    }

    async updateTasksForFile(file) {
        if (!file || !(file instanceof TFile) || !file.path.toLowerCase().endsWith('.md')) {
            return; // Do nothing if it's not a markdown file
        }

        // 1. Efficiently remove all old tasks from this file
        const oldDateKeys = this.fileToTaskDates.get(file.path) || new Set();
        for (const dateKey of oldDateKeys) {
            const tasksOnDate = this.tasksByDate.get(dateKey);
            if (tasksOnDate) {
                const remainingTasks = tasksOnDate.filter(task => task.file.path !== file.path);
                if (remainingTasks.length > 0) {
                    this.tasksByDate.set(dateKey, remainingTasks);
                } else {
                    this.tasksByDate.delete(dateKey); // Clean up empty date entries
                }
            }
        }
        this.fileToTaskDates.delete(file.path);

        // 2. Re-process the single file and add its new tasks
        if (this.plugin.settings.taskIgnoreFolders.some(folder => file.path.startsWith(folder))) {
            return; // Don't re-add if it's in an ignored folder
        }

        const content = await this.app.vault.cachedRead(file);
        const tasks = parseTasksFromFile(file, content);
        const newDateKeys = new Set();

        for (const task of tasks) {
            if (task.status.toLowerCase() !== 'x' && task.dueDate) {
                const dateKey = moment(task.dueDate).format("YYYY-MM-DD");
                if (!this.tasksByDate.has(dateKey)) {
                    this.tasksByDate.set(dateKey, []);
                }
                this.tasksByDate.get(dateKey).push(task);
                newDateKeys.add(dateKey);
            }
        }

        if (newDateKeys.size > 0) {
            this.fileToTaskDates.set(file.path, newDateKeys);
        }
    }

    /**
     * Updates the highlighter div with <mark> tags to show search term matches.
     */
    updateScratchpadHighlights() {
        if (!this.scratchHighlighterEl || !this.noteTextarea) return;

        const text = this.noteTextarea.value;
        const term = this.scratchpadSearchTerm;

        if (!term) {
            this.scratchHighlighterEl.innerHTML = '';
            return;
        }

        // Sanitize text to prevent HTML injection before inserting it into the highlighter.
        const sanitizedText = text
            .replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;");

        const escapedTerm = term.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        const regex = new RegExp(escapedTerm, 'gi');

        const highlightedHtml = sanitizedText.replace(regex, (match) => `<mark>${match}</mark>`);
        this.scratchHighlighterEl.innerHTML = highlightedHtml;
    }

    /**
     * Counts and displays the number of search matches in the scratchpad.
     */
    updateScratchpadSearchCount() {
        if (!this.scratchpadSearchCountEl || !this.noteTextarea) return;

        const term = this.scratchpadSearchTerm;
        const text = this.noteTextarea.value;
        let matchCount = 0;

        if (term) {
            const escapedTerm = term.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
            const regex = new RegExp(escapedTerm, 'gi');
            matchCount = (text.match(regex) || []).length;
        }

        this.scratchpadSearchCountEl.setText(`(${matchCount})`);
    }

    /**
     * Checks if a file path should be ignored based on user settings.
     * @param {string} filePath The path of the file to check.
     * @param {string} settingKey The key for the ignore list in the plugin settings.
     * @returns {boolean} True if the path should be ignored.
     */
    isPathIgnored(filePath, settingKey = 'otherNoteIgnoreFolders') {
        // Normalize folder paths to end with a slash for consistent matching.
        const ignoreFolders = (this.plugin.settings[settingKey] || []).map(f => f.toLowerCase().endsWith('/') ? f.toLowerCase() : f.toLowerCase() + '/');
        const dailyNoteFolder = this.plugin.settings.dailyNotesFolder;
        const filePathLower = filePath.toLowerCase();

        // Always ignore files inside the daily notes folder for "other note" calculations.
        if (dailyNoteFolder && filePathLower.startsWith(dailyNoteFolder.toLowerCase() + "/")) {
            return true;
        }
        return ignoreFolders.some(folder => folder && filePathLower.startsWith(folder));
    }

    /**
     * Adds a file to the createdNotesMap and modifiedNotesMap.
     * @param {TFile} file The file to add.
     */
    addFileToMaps(file) {
        if (this.isPathIgnored(file.path)) return;

        // Add to createdNotesMap.
        const cdate = new Date(file.stat.ctime);
        const cdateKey = moment(cdate).format("YYYY-MM-DD");
        if (!this.createdNotesMap.has(cdateKey)) {
            this.createdNotesMap.set(cdateKey, []);
        }
        const createdFiles = this.createdNotesMap.get(cdateKey);
        if (!createdFiles.some(f => f.path === file.path)) {
            createdFiles.push(file);
        }

        // Add to modifiedNotesMap if modified date is on a different day than creation date.
        const mdate = new Date(file.stat.mtime);
        if (!isSameDay(cdate, mdate)) {
            const mdateKey = moment(mdate).format("YYYY-MM-DD");
            if (!this.modifiedNotesMap.has(mdateKey)) {
                this.modifiedNotesMap.set(mdateKey, []);
            }
            const modifiedFiles = this.modifiedNotesMap.get(mdateKey);
            if (!modifiedFiles.some(f => f.path === file.path)) {
                modifiedFiles.push(file);
            }
        }
    }

    /**
     * Removes a file from all internal note data maps by its path.
     * @param {string} filePath The path of the file to remove.
     */
    removeFileFromMaps(filePath) {
        // Iterate through maps and remove any entries with the given file path.
        for (const [key, files] of this.createdNotesMap.entries()) {
            const updatedFiles = files.filter(f => f.path !== filePath);
            if (updatedFiles.length < files.length) {
                if (updatedFiles.length === 0) {
                    this.createdNotesMap.delete(key);
                } else {
                    this.createdNotesMap.set(key, updatedFiles);
                }
            }
        }
        for (const [key, files] of this.modifiedNotesMap.entries()) {
            const updatedFiles = files.filter(f => f.path !== filePath);
            if (updatedFiles.length < files.length) {
                if (updatedFiles.length === 0) {
                    this.modifiedNotesMap.delete(key);
                } else {
                    this.modifiedNotesMap.set(key, updatedFiles);
                }
            }
        }
    }

    /**
     * Formats a file size in bytes into a human-readable string (B, KB, MB, GB).
     * @param {number} bytes The file size in bytes.
     * @returns {string} The formatted file size.
     */
    formatFileSize(bytes) {
        if (bytes === 0) return '0 B';
        const k = 1024;
        const sizes = ['B', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        const fixed = i < 2 ? 0 : 1;
        return parseFloat((bytes / Math.pow(k, i)).toFixed(fixed)) + ' ' + sizes[i];
    }

    /**
     * Adds a new task to the scratchpad note using the format defined in settings.
     */
    async addNewTaskToScratchpad() {
        if (this.isScratchpadPreview || !this.noteTextarea) {
            return;
        }

        const taskFormatSetting = this.plugin.settings.scratchpad?.taskFormat || "- [ ] ";
        const processed = this.processDatePlaceholders(taskFormatSetting);
        const textToInsert = processed.text;
        const ta = this.noteTextarea;

        // 1. Capture current state
        const selectionStart = ta.selectionStart;
        const textBeforeCursor = ta.value.substring(0, selectionStart);
        const textAfterCursor = ta.value.substring(selectionStart);

        // 2. Prepare new text and update the value
        const needsLeadingNewline = textBeforeCursor.length > 0 && !textBeforeCursor.endsWith("\n");
        const finalInsertionText = needsLeadingNewline ? "\n" + textToInsert : textToInsert;
        const newText = textBeforeCursor + finalInsertionText + textAfterCursor;
        ta.value = newText;

        // 3. Set the new cursor position
        const newCursorPosition = selectionStart + finalInsertionText.length - (textToInsert.length - processed.cursorOffset);
        ta.setSelectionRange(newCursorPosition, newCursorPosition);

        // 4. Give the textarea focus
        ta.focus();

        // 5. Save the new content immediately
        this.noteText = newText;
        await this.saveFixedNote(this.noteText);
        this.updateScratchpadSearchCount();
        this.updateScratchpadHighlights();

        // --- FINAL SCROLL FIX ---
        // 6. Use an awaited Promise with a longer delay to ensure this runs LAST.
        await new Promise(resolve => setTimeout(resolve, 50)); // 50ms delay

        const lineHeight = parseFloat(getComputedStyle(ta).lineHeight) || 20;
        const linesToCaret = ta.value.slice(0, newCursorPosition).split("\n").length;
        const targetScrollTop = (linesToCaret - 1) * lineHeight;

        // Directly set the scroll position as the final action.
        ta.scrollTop = targetScrollTop;
    }


    /**
     * Scans all Markdown files in the vault to build the initial `createdNotesMap`.
     */
    async buildCreatedNotesMap() {
        this.createdNotesMap.clear();
        const allNotes = this.app.vault.getMarkdownFiles();
        for (const file of allNotes) {
            if (this.isPathIgnored(file.path)) continue;

            const cdate = new Date(file.stat.ctime);
            const dateKey = moment(cdate).format("YYYY-MM-DD");
            if (!this.createdNotesMap.has(dateKey)) {
                this.createdNotesMap.set(dateKey, []);
            }
            this.createdNotesMap.get(dateKey).push(file);
        }
    }

    /**
     * Scans all Markdown files in the vault to build the initial `modifiedNotesMap`.
     */
    async buildModifiedNotesMap() {
        this.modifiedNotesMap.clear();
        const allNotes = this.app.vault.getMarkdownFiles();
        for (const file of allNotes) {
            if (this.isPathIgnored(file.path)) continue;

            const cdate = new Date(file.stat.ctime);
            const mdate = new Date(file.stat.mtime);
            if (!isSameDay(cdate, mdate)) {
                const dateKey = moment(mdate).format("YYYY-MM-DD");
                if (!this.modifiedNotesMap.has(dateKey)) {
                    this.modifiedNotesMap.set(dateKey, []);
                }
                if (!this.modifiedNotesMap.get(dateKey).some(f => f.path === file.path)) {
                    this.modifiedNotesMap.get(dateKey).push(file);
                }
            }
        }
    }

    /**
     * Scans all non-Markdown files in the vault to build the `assetCreationMap`.
     */
    async buildAssetCreationMap() {
        this.assetCreationMap.clear();
        const allFiles = this.app.vault.getFiles();
        const ignoreFolders = (this.plugin.settings.assetIgnoreFolders || []).map(f => f.toLowerCase().endsWith('/') ? f.toLowerCase() : f.toLowerCase() + '/');
        const hiddenTypes = (this.plugin.settings.hiddenAssetTypes || "")
            .split(',')
            .map(ext => ext.trim().toLowerCase())
            .filter(ext => ext.length > 0);

        for (const file of allFiles) {
            if (file.path.toLowerCase().endsWith('.md')) continue;
            if (hiddenTypes.includes(file.extension.toLowerCase())) continue; // Filter by extension

            const filePathLower = file.path.toLowerCase();
            if (ignoreFolders.some(folder => folder && filePathLower.startsWith(folder))) continue;

            const cdate = new Date(file.stat.ctime);
            const dateKey = moment(cdate).format("YYYY-MM-DD");
            if (!this.assetCreationMap.has(dateKey)) {
                this.assetCreationMap.set(dateKey, []);
            }
            this.assetCreationMap.get(dateKey).push(file);
        }
    }

    /**
     * Finds all asset files in the vault that are not linked to from any Markdown file.
     * @returns {Promise<Set<string>>} A promise that resolves to a Set of unused asset paths.
     */
    async getUnusedAssetPaths() {
        const allMarkdownFiles = this.app.vault.getMarkdownFiles();
        const referencedAssetPaths = new Set();

        for (const mdFile of allMarkdownFiles) {
            const cache = this.app.metadataCache.getFileCache(mdFile);
            if (!cache) continue;

            const linksAndEmbeds = [...(cache.embeds || []), ...(cache.links || [])];

            for (const ref of linksAndEmbeds) {
                const linkedFile = this.app.metadataCache.getFirstLinkpathDest(ref.link, mdFile.path);
                if (linkedFile && !linkedFile.path.toLowerCase().endsWith('.md')) {
                    referencedAssetPaths.add(linkedFile.path);
                }
            }
        }
        const allAssetPaths = this.app.vault.getFiles()
            .filter(file => !file.path.toLowerCase().endsWith('.md'))
            .map(file => file.path);

        const unusedAssetPaths = new Set(allAssetPaths.filter(assetPath => !referencedAssetPaths.has(assetPath)));
        return unusedAssetPaths;
    }

    /**
     * Renders the list of recent assets in the "Assets" tab.
     */
    async populateAssets() {
        if (!this.assetsContentEl) return;
        this.assetsContentEl.empty();

        const settings = this.plugin.settings;
        let unusedAssetPaths = new Set();
        if (settings.showUnusedAssetsIndicator) {
            if (!this.isUnusedAssetCacheValid) {
                this.unusedAssetPathsCache = await this.getUnusedAssetPaths();
                this.isUnusedAssetCacheValid = true;
            }
            unusedAssetPaths = this.unusedAssetPathsCache;
        }
        const cutoff = moment().startOf('day').subtract(settings.assetsLookbackDays - 1, 'days').valueOf();
        const ignoreFolders = (settings.assetIgnoreFolders || []).map(f => f.toLowerCase().endsWith('/') ? f.toLowerCase() : f.toLowerCase() + '/');
        const hiddenTypes = (settings.hiddenAssetTypes || "").split(',').map(ext => ext.trim().toLowerCase()).filter(ext => ext.length > 0);

        const allAssets = this.app.vault.getFiles()
            .filter(file =>
                !file.path.toLowerCase().endsWith('.md') &&
                !hiddenTypes.includes(file.extension.toLowerCase()) &&
                !ignoreFolders.some(f => file.path.toLowerCase().startsWith(f)) &&
                (file.stat.mtime >= cutoff || file.stat.ctime >= cutoff)
            )
            .sort((a, b) => b.stat.mtime - a.stat.mtime);

        const searchTerm = this.assetsSearchTerm.toLowerCase();
        const filteredAssets = searchTerm ? allAssets.filter(file => file.name.toLowerCase().includes(searchTerm)) : allAssets;
        const searchInputEl = this.assetsSearchInputEl;

        const groups = { today: [], yesterday: [], thisWeek: [], lastWeek: [], thisMonth: [], older: [] };
        const now = moment();
        filteredAssets.forEach(file => {
            const modTime = moment(file.stat.mtime);
            if (modTime.isSame(now, 'day')) groups.today.push(file);
            else if (modTime.isSame(now.clone().subtract(1, 'day'), 'day')) groups.yesterday.push(file);
            else if (modTime.isSame(now, 'week')) groups.thisWeek.push(file);
            else if (modTime.isSame(now.clone().subtract(1, 'week'), 'week')) groups.lastWeek.push(file);
            else if (modTime.isSame(now, 'month')) groups.thisMonth.push(file);
            else groups.older.push(file);
        });

        const groupOrder = [
            { key: 'today', label: 'Today' }, { key: 'yesterday', label: 'Yesterday' },
            { key: 'thisWeek', label: 'This Week' }, { key: 'lastWeek', label: 'Last Week' },
            { key: 'thisMonth', label: 'This Month' }, { key: 'older', label: 'Older' },
        ];

        if (filteredAssets.length === 0) {
            this.assetsContentEl.createDiv({ text: 'No assets found', cls: 'task-group-empty-message' });
            return;
        }

        groupOrder.forEach(groupInfo => {
            const assetsInGroup = groups[groupInfo.key];
            if (assetsInGroup.length > 0) {
                const groupContainer = this.assetsContentEl.createDiv({ cls: 'note-group-container' });
                const isCollapsed = this.collapsedAssetGroups[groupInfo.key];
                if (isCollapsed) groupContainer.addClass('is-collapsed');

                const header = groupContainer.createDiv({ cls: 'note-group-header' });
                const headerContent = header.createDiv({ cls: 'note-group-header-content' });
                const collapseIcon = headerContent.createDiv({ cls: 'note-group-collapse-icon' });
                setIcon(collapseIcon, 'chevron-down');
                headerContent.createSpan({ text: groupInfo.label });
                header.createDiv({ cls: 'note-group-count', text: assetsInGroup.length });


                header.addEventListener('click', () => {
                    // Toggle the collapsed state
                    const isCurrentlyCollapsed = groupContainer.classList.toggle('is-collapsed');

                    // Update and save the state
                    this.collapsedAssetGroups[groupInfo.key] = isCurrentlyCollapsed;
                    this.plugin.saveSettings();
                });

                /*header.addEventListener('click', () => {
                    const currentlyCollapsed = groupContainer.classList.toggle('is-collapsed');
                    this.collapsedAssetGroups[groupInfo.key] = currentlyCollapsed;
                    this.plugin.saveSettings();
                });
                */

                const listWrapper = groupContainer.createDiv({ cls: 'note-list-wrapper' });

                if (this.isAssetsGridView) {
                    listWrapper.addClass('assets-grid-view');
                    assetsInGroup.forEach(file => {
                        const item = listWrapper.createDiv("asset-grid-item");
                        item.setAttribute('aria-label', file.path);

                        const preview = item.createDiv("asset-grid-preview");
                        if (this.isImageAsset(file)) {
                            const thumbnail = preview.createEl('img');
                            thumbnail.src = this.app.vault.getResourcePath(file);
                        } else {
                            setIcon(preview, 'file-question');
                        }
                        const nameEl = item.createDiv({ text: file.name, cls: "asset-grid-name" });

                        // 1. Clicking the image preview opens the asset file.
                        preview.addEventListener("click", (e) => {
                            e.stopPropagation();
                            this.handleFileClick(file, e);
                        });

                        // 2. Clicking the name finds and opens the note the asset is on.
                        nameEl.addEventListener("click", async (e) => {
                            e.stopPropagation();
                            const backlinks = await this.findAssetBacklinks(file);
                            if (backlinks.length === 1) {
                                const noteFile = backlinks[0];
                                const cache = this.app.metadataCache.getFileCache(noteFile);
                                let targetLine = 0;
                                if (cache) {
                                    const allLinks = [...(cache.embeds || []), ...(cache.links || [])];
                                    for (const ref of allLinks) {
                                        const linkedFile = this.app.metadataCache.getFirstLinkpathDest(ref.link, noteFile.path);
                                        if (linkedFile && linkedFile.path === file.path) {
                                            targetLine = ref.position.start.line;
                                            break;
                                        }
                                    }
                                }
                                const openInNewTab = this.plugin.settings.notesOpenAction === 'new-tab';
                                const leaf = this.app.workspace.getLeaf(openInNewTab);
                                await leaf.openFile(noteFile, { eState: { line: targetLine } });
                            } else if (backlinks.length > 1) {
                                this.showBacklinksPopup(nameEl, file);
                            } else {
                                new Notice("This asset is not used in any notes.");
                            }
                        });

                        this.addFileContextMenu(item, file, () => this.populateAssets());
                    });
                } else {
                    listWrapper.removeClass('assets-grid-view');
                    assetsInGroup.forEach(file => {
                        const row = listWrapper.createDiv("note-row");
                        const isUnused = unusedAssetPaths.has(file.path);

                        const titleWrapper = row.createDiv({ cls: 'note-title-wrapper' });

                        const iconContainer = titleWrapper.createDiv({ cls: 'asset-icon-container' });
                        if (this.isImageAsset(file)) {
                            const thumbnail = iconContainer.createEl('img', { cls: 'asset-thumbnail' });
                            thumbnail.src = this.app.vault.getResourcePath(file);
                        }

                        // --- CLICK ICON TO OPEN ASSET ---
                        iconContainer.addEventListener('click', (e) => {
                            e.stopPropagation(); // Prevents the row's click listener from also firing
                            this.handleFileClick(file, e);
                        });

                        if (isUnused && settings.showUnusedAssetsIndicator) {
                            const actionIconContainer = titleWrapper.createDiv({ cls: 'asset-action-icon' });
                            const unlinkIcon = actionIconContainer.createDiv();
                            setIcon(unlinkIcon, 'unlink');
                            const deleteIcon = actionIconContainer.createDiv();
                            setIcon(deleteIcon, 'trash');
                            actionIconContainer.addEventListener('click', (e) => {
                                e.stopPropagation();
                                this.handleDeleteAsset(file);
                            });
                        }

                        const titleEl = titleWrapper.createDiv({ text: file.name, cls: "note-title" });
                        titleEl.setAttribute('aria-label', file.path);

                        const metaContainer = row.createDiv({ cls: 'note-meta-container' });
                        metaContainer.createSpan({ text: this.formatFileSize(file.stat.size), cls: "note-file-size" });
                        metaContainer.createSpan({ text: formatDateTime(new Date(file.stat.mtime)), cls: "note-mod-date" });

                        // --- CLICK ROW TO FIND NOTE(S) ---
                        row.addEventListener("click", async () => {
                            const backlinks = await this.findAssetBacklinks(file);
                            if (backlinks.length === 1) {
                                // If there's only one backlink, find its line number and scroll to it.
                                const noteFile = backlinks[0];
                                const cache = this.app.metadataCache.getFileCache(noteFile);
                                let targetLine = 0;
                                if (cache) {
                                    const allLinks = [...(cache.embeds || []), ...(cache.links || [])];
                                    for (const ref of allLinks) {
                                        const linkedFile = this.app.metadataCache.getFirstLinkpathDest(ref.link, noteFile.path);
                                        if (linkedFile && linkedFile.path === file.path) {
                                            targetLine = ref.position.start.line;
                                            break;
                                        }
                                    }
                                }
                                const openInNewTab = this.plugin.settings.notesOpenAction === 'new-tab';
                                const leaf = this.app.workspace.getLeaf(openInNewTab);
                                await leaf.openFile(noteFile, { eState: { line: targetLine } });

                            } else if (backlinks.length > 1) {
                                this.showBacklinksPopup(row, file);
                            } else {
                                new Notice("This asset is not used in any notes.");
                            }
                        });

                        this.addKeydownListeners(row, searchInputEl);
                        this.addFileContextMenu(row, file, () => this.populateAssets());
                    });
                }
            }
        });
    }

    /**
     * Gets the final, ordered list of tabs to display, combining user-defined order
     * with the full list of possible tabs to ensure none are missing.
     * @returns {string[]} An array of tab keys in the correct order.
     */
    getFinalTabOrder() {
        const allPossibleTabs = Object.keys(this.plugin.settings.tabVisibility);
        const userTabOrder = this.plugin.settings.tabOrder || allPossibleTabs;
        // Use a Set to merge the user's order with all possible tabs, ensuring no duplicates and that new tabs are appended.
        const finalTabOrder = [...new Set([...userTabOrder, ...allPossibleTabs])];
        return finalTabOrder;
    }

    /**
     * Adds a non-Markdown file to the `assetCreationMap`.
     * @param {TFile} file The asset file to add.
     */
    addFileToAssetMap(file) {
        if (file.path.toLowerCase().endsWith('.md')) return;

        const ignoreFolders = (this.plugin.settings.assetIgnoreFolders || []).map(f => f.toLowerCase().endsWith('/') ? f.toLowerCase() : f.toLowerCase() + '/');
        const filePathLower = file.path.toLowerCase();
        if (ignoreFolders.some(folder => folder && filePathLower.startsWith(folder))) return;

        const cdate = new Date(file.stat.ctime);
        const dateKey = moment(cdate).format("YYYY-MM-DD");
        if (!this.assetCreationMap.has(dateKey)) {
            this.assetCreationMap.set(dateKey, []);
        }
        const assets = this.assetCreationMap.get(dateKey);
        if (!assets.some(f => f.path === file.path)) {
            assets.push(file);
        }
    }

    /**
     * Removes a non-Markdown file from the `assetCreationMap` by its path.
     * @param {string} filePath The path of the asset file to remove.
     */
    removeFileFromAssetMap(filePath) {
        if (filePath.toLowerCase().endsWith('.md')) return;

        for (const [key, files] of this.assetCreationMap.entries()) {
            const updatedFiles = files.filter(f => f.path !== filePath);
            if (updatedFiles.length < files.length) {
                if (updatedFiles.length === 0) {
                    this.assetCreationMap.delete(key);
                } else {
                    this.assetCreationMap.set(key, updatedFiles);
                }
            }
        }
    }

    /**
     * Adds mouse hover listeners to calendar header cells to highlight the entire column.
     * @param {HTMLTableRowElement} headerRow The <thead> row element.
     * @param {HTMLTableSectionElement} tableBody The <tbody> element.
     */
    addColumnHighlighting(headerRow, tableBody) {
        if (!this.plugin.settings.enableColumnHighlight) return;
        const headerCells = headerRow.querySelectorAll('th');
        headerCells.forEach((th, colIndex) => {
            if (th.textContent.trim() === "") return;

            th.addEventListener('mouseenter', () => {
                const highlightColor = document.body.classList.contains('theme-dark')
                    ? this.plugin.settings.rowHighlightColorDark
                    : this.plugin.settings.rowHighlightColorLight;
                th.style.backgroundColor = highlightColor;
                const rows = tableBody.querySelectorAll('tr');
                rows.forEach(row => {
                    const cell = row.children[colIndex];
                    if (cell) cell.style.backgroundColor = highlightColor;
                });
            });
            th.addEventListener('mouseleave', () => {
                th.style.backgroundColor = ''; // Always clear the header's highlight
                const rows = tableBody.querySelectorAll('tr');
                rows.forEach(row => {
                    const cell = row.children[colIndex];
                    if (cell) {
                        // Check if the cell is in the permanently highlighted row
                        if (this.plugin.settings.highlightCurrentWeek && row.classList.contains('current-week-row')) {
                            // If yes, restore the permanent highlight color
                            const permanentColor = document.body.classList.contains('theme-dark')
                                ? this.plugin.settings.rowHighlightColorDark
                                : this.plugin.settings.rowHighlightColorLight;
                            cell.style.backgroundColor = permanentColor;
                        } else {
                            // Otherwise, clear the hover highlight as before
                            cell.style.backgroundColor = '';
                        }
                    }
                });
            });
        });
    }

    /**
     * Formats the period and week numbers according to the user's preference.
     * @param {number} period The period number.
     * @param {number} week The week number.
     * @returns {string} The formatted string.
     */
    formatPW(period, week) { return this.plugin.settings.pwFormat.replace('#', period).replace('#', week); }

    /**
     * Renders the infinite-scrolling vertical calendar view.
     * @param {HTMLElement} container The parent element to render into.
     */
    renderVerticalCalendar(container) {
        this.intersectionObserver?.disconnect();

        // FIX 1: The variable is now a class property `this.verticalScrollerEl`
        this.verticalScrollerEl = container.createDiv("vertical-calendar-scroller");

        const initialMonthId = `month-${this.displayedMonth.getFullYear()}-${this.displayedMonth.getMonth()}`;
        const numMonthsAfter = 12;
        for (let i = -6; i <= numMonthsAfter; i++) {
            const monthDate = new Date(this.displayedMonth.getFullYear(), this.displayedMonth.getMonth() + i, 1);

            // FIX 2: Use the new class property here
            const monthWrapper = this.verticalScrollerEl.createDiv({ cls: "vertical-month-wrapper" });

            monthWrapper.id = `month-${monthDate.getFullYear()}-${monthDate.getMonth()}`;
            monthWrapper.createEl("h3", {
                cls: "vertical-month-title",
                text: formatMonthTitle(monthDate, this.plugin.settings.monthTitleFormat)
            });
            const table = monthWrapper.createEl("table", { cls: "period-calendar-table" });
            const thead = table.createEl("thead");
            const headerRow = thead.createEl("tr");

            if (this.plugin.settings.showPWColumn) {
                headerRow.createEl("th", { text: " " });
            }
            if (this.plugin.settings.showWeekNumbers) {
                headerRow.createEl("th", { text: this.plugin.settings.weekNumberColumnLabel });
            }
            const startDayOffset = this.plugin.settings.weekStartDay === 'monday' ? 1 : 0;
            for (let d = 0; d < 7; d++) {
                const dayIndex = (d + startDayOffset) % 7;
                headerRow.createEl("th", { text: moment().day(dayIndex).format("ddd").toUpperCase() });
            }

            // Add today's header highlight
            if (this.plugin.settings.highlightTodayDayHeader) {
                const today = new Date();
                if (monthDate.getFullYear() === today.getFullYear() && monthDate.getMonth() === today.getMonth()) {
                    const todayHeaderIndex = Array.from(headerRow.children).findIndex(th => th.textContent.toLowerCase() === moment(today).format("ddd").toLowerCase());
                    if (todayHeaderIndex !== -1) {
                        headerRow.children[todayHeaderIndex].addClass("today-day-header");
                    }
                }
            }

            const tbody = table.createEl("tbody");
            this.generateMonthGrid(monthDate, tbody);
            this.addColumnHighlighting(headerRow, tbody);
        }

        // After the layout is ready, scroll the initial month into view.
        this.app.workspace.onLayoutReady(() => {
            // SET FLAG before scrolling
            this.isProgrammaticScroll = true;

            const initialEl = this.verticalScrollerEl.querySelector(`#${initialMonthId}`);
            if (initialEl) {
                initialEl.scrollIntoView({ block: 'start' });
            }

            // CLEAR FLAG after scroll completes
            setTimeout(() => {
                this.isProgrammaticScroll = false;
            }, 300);
        });

        // Use a scroll listener to update the main header title.
        // FIX 4: Use the new class property here
        this.verticalScrollerEl.addEventListener('scroll', () => {

            // if programmatic scroll is in progress, do nothing
            if (this.isProgrammaticScroll) {
                return;
            }

            clearTimeout(this.titleUpdateTimeout);
            this.titleUpdateTimeout = setTimeout(() => {
                let topmostVisibleMonth = null;
                let smallestTopValue = Infinity;

                // FIX 5 & 6: Use the new class property here
                const scrollerTop = this.verticalScrollerEl.getBoundingClientRect().top;
                const monthElements = this.verticalScrollerEl.querySelectorAll('.vertical-month-wrapper');

                for (const monthEl of monthElements) {
                    const monthTop = monthEl.getBoundingClientRect().top;
                    if (monthTop >= scrollerTop && monthTop < smallestTopValue) {
                        smallestTopValue = monthTop;
                        topmostVisibleMonth = monthEl;
                    }
                }
                if (topmostVisibleMonth) {
                    const [_, year, month] = topmostVisibleMonth.id.split('-').map(Number);
                    if (this.displayedMonth.getFullYear() !== year || this.displayedMonth.getMonth() !== month) {
                        this.displayedMonth = new Date(year, month, 1);
                        this.updateMonthTitle();
                        this.updateTodayBtnAriaLabel();
                    }
                }
            }, 100);
        });
    }



    async onclose() {
        this.intersectionObserver?.disconnect();
        if (this.dailyRefreshTimeout) clearTimeout(this.dailyRefreshTimeout);
        if (this.themeObserver) this.themeObserver.disconnect();
    }

    /**
    * A helper function to create a standardized search input with a clear button.
    * @param {HTMLElement} container The parent element.
    * @param {string} placeholder The placeholder text for the input.
    * @param {(term: string) => void} onInput The callback function to execute on input.
    * @returns {HTMLInputElement} The created input element.
    */
    setupSearchInput(container, placeholder, onInput) {
        const inputEl = container.createEl("input", {
            type: "text",
            placeholder: placeholder,
            cls: "pm-search-input" // Use a consistent class
        });

        // Create the clear button inside this function
        const clearButton = container.createDiv({ cls: "search-input-clear-btn" });
        setIcon(clearButton, "x");

        clearButton.addEventListener('click', () => {
            inputEl.value = "";
            inputEl.dispatchEvent(new Event('input'));
            inputEl.focus();
        });

        inputEl.addEventListener("input", (e) => {
            const term = e.target.value;
            clearButton.style.visibility = term ? 'visible' : 'hidden';
            onInput(term);
        });

        inputEl.addEventListener("keydown", (e) => {
            if (e.key === 'Escape') {
                e.preventDefault();
                inputEl.value = "";
                inputEl.dispatchEvent(new Event('input'));
            } else if (e.key === 'ArrowDown') {
                e.preventDefault();
                const contentEl = this.activeTab === 'notes' ? this.notesContentEl : this.tasksContentEl;
                const firstItem = contentEl.querySelector('.note-row, .task-row');
                if (firstItem) firstItem.focus();
            }
        });
        return inputEl;
    }

    /**
     * Sets up the tab container, creating draggable tabs with click and double-click behaviors.
     * @param {HTMLElement} tabContainer The parent element for the tabs.
     * @param {(tab: string) => void} switchTabs The function to call when a tab is clicked.
     * @returns {Object.<string, HTMLElement>} A map of tab keys to their corresponding HTML elements.
     */
    setupDraggableTabs(tabContainer, switchTabs) {
        tabContainer.empty();
        const tabOrder = this.getFinalTabOrder()
            .filter(key => this.plugin.settings.tabVisibility[key]);

        const tabElements = {};
        const tooltipLabels = {
            scratch: "ScratchPad",
            notes: "Recent Notes",
            pinned: "Pinned Notes",
            tasks: "Tasks",
            assets: "Assets"
        };

        for (const key of tabOrder) {
            const tabEl = tabContainer.createDiv({ cls: "note-tab" });
            this.getTabLabel(tabEl, key);
            tabEl.dataset.tabKey = key;

            const initialTooltip = key === 'notes'
                ? (this.notesViewMode === 'pinned' ? tooltipLabels.pinned : tooltipLabels.notes)
                : tooltipLabels[key];
            tabEl.setAttribute('aria-label', initialTooltip);

            tabElements[key] = tabEl;

            tabEl.addEventListener("click", async () => {
                if (this.activeTab === key) {
                    // This is a second click on an already active tab, which triggers a special action.
                    if (key === 'scratch') {
                        this.openScratchpadFile();
                    } else if (key === 'tasks') {
                        const currentGroupBy = this.plugin.settings.taskGroupBy;
                        const newGroupBy = currentGroupBy === 'date' ? 'tag' : 'date';
                        this.plugin.settings.taskGroupBy = newGroupBy;

                        await this.plugin.saveData(this.plugin.settings);
                        this.getTabLabel(tabEl, 'tasks');
                        await this.populateTasks();

                    } else if (key === 'assets') {
                        this.isAssetsGridView = !this.isAssetsGridView;
                        this.getTabLabel(tabEl, 'assets');
                        await this.populateAssets();
                        this.isAssetsGridView ? 'grid' : 'list';
                    } else if (key === 'notes') {
                        this.notesViewMode = this.notesViewMode === 'recent' ? 'pinned' : 'recent';
                        this.plugin.settings.notesViewMode = this.notesViewMode;
                        await this.plugin.saveData(this.plugin.settings);

                        this.getTabLabel(tabEl, 'notes');
                        const newTooltip = this.notesViewMode === 'pinned' ? tooltipLabels.pinned : tooltipLabels.notes;
                        tabEl.setAttribute('aria-label', newTooltip);

                        await this.populateNotes();
                    }
                } else {
                    // This is a first click, just switch to the tab.
                    switchTabs(key);
                }
            });

            // --- HTML5 Drag and Drop Listeners for reordering tabs ---
            tabEl.draggable = true;

            tabEl.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('text/plain', key);
                e.dataTransfer.effectAllowed = 'move';
                setTimeout(() => tabEl.classList.add('dragging'), 0);
            });

            tabEl.addEventListener('dragend', () => tabEl.classList.remove('dragging'));

            tabEl.addEventListener('dragover', (e) => {
                e.preventDefault();
                const target = e.currentTarget;
                const rect = target.getBoundingClientRect();
                const isAfter = e.clientX > rect.left + rect.width / 2;

                target.classList.remove('drag-over-indicator-before', 'drag-over-indicator-after');
                if (isAfter) {
                    target.classList.add('drag-over-indicator-after');
                } else {
                    target.classList.add('drag-over-indicator-before');
                }
            });

            tabEl.addEventListener('dragleave', (e) => {
                e.currentTarget.classList.remove('drag-over-indicator-before', 'drag-over-indicator-after');
            });

            tabEl.addEventListener('drop', async (e) => {
                e.preventDefault();
                e.currentTarget.classList.remove('drag-over-indicator-before', 'drag-over-indicator-after');

                const draggedKey = e.dataTransfer.getData('text/plain');
                const targetKey = e.currentTarget.dataset.tabKey;
                if (draggedKey === targetKey) return;

                const rect = e.currentTarget.getBoundingClientRect();
                const isAfter = e.clientX > rect.left + rect.width / 2;

                let currentOrder = this.plugin.settings.tabOrder;
                const newOrder = currentOrder.filter(k => k !== draggedKey);
                const targetIndex = newOrder.indexOf(targetKey);

                if (isAfter) {
                    newOrder.splice(targetIndex + 1, 0, draggedKey);
                } else {
                    newOrder.splice(targetIndex, 0, draggedKey);
                }

                this.plugin.settings.tabOrder = newOrder;
                await this.plugin.saveData(this.plugin.settings);

                newOrder.forEach(k => tabContainer.appendChild(tabElements[k]));
            });
        }
        return tabElements;
    }

    updateDayHeaderHighlight() {
        // 1. If the header row doesn't exist yet, do nothing.
        if (!this.calendarHeaderRowEl) return;

        // 2. Get all the header cells ('th' elements).
        const headers = this.calendarHeaderRowEl.querySelectorAll('th');
        const today = new Date();

        // 3. IMPORTANT: Remove the highlight from every header first to reset them.
        headers.forEach(th => th.classList.remove('today-day-header'));

        // 4. If the user has this feature turned off in settings, stop here.
        if (!this.plugin.settings.highlightTodayDayHeader) {
            return;
        }

        // 5. Check if the month/year being displayed is the actual current month/year.
        const isCurrentMonth = this.displayedMonth.getFullYear() === today.getFullYear() &&
            this.displayedMonth.getMonth() === today.getMonth();

        // 6. Only if it IS the current month, apply the highlight.
        if (isCurrentMonth) {
            const todayDayOfWeek = today.getDay(); // Sunday=0, Monday=1...
            const weekStartsOnMonday = this.plugin.settings.weekStartDay === 'monday';

            let todayColumnIndex;
            if (weekStartsOnMonday) {
                todayColumnIndex = (todayDayOfWeek === 0) ? 6 : todayDayOfWeek - 1; // Mon=0, Tue=1..Sun=6
            } else {
                todayColumnIndex = todayDayOfWeek; // Sun=0, Mon=1...
            }

            // Account for the extra columns you might have (PW, WeekNr)
            let offset = 0;
            if (this.plugin.settings.showPWColumn) offset++;
            if (this.plugin.settings.showWeekNumbers) offset++;

            const targetTh = headers[todayColumnIndex + offset];
            if (targetTh) {
                targetTh.classList.add('today-day-header');
            }
        }
    }

    /**
     * The main render function for the entire view. It builds the DOM from scratch.
     */
    render() {
        // Determine the first visible tab to be the default active tab.
        const finalTabOrder = this.getFinalTabOrder();
        const visibleTabs = finalTabOrder.filter(key => this.plugin.settings.tabVisibility[key]);

        // Only reset the active tab if it's not set or has become invisible
        if (!this.activeTab || !visibleTabs.includes(this.activeTab)) {
            this.activeTab = visibleTabs[0] || null;
        }

        this.containerEl.empty();
        const container = this.containerEl.createDiv("period-month-container");
        container.addClass(`layout-${this.plugin.settings.calendarLayout}`);
        container.addClass(`today-style-${this.plugin.settings.todayHighlightStyle}`);
        container.toggleClass("hide-grid", !this.plugin.settings.showCalendarGridLines);
        container.classList.toggle("calendar-collapsed", this.isCalendarCollapsed);
        container.toggleClass("vertical-view-active", this.isVerticalView);
        container.toggleClass('monday-start', this.plugin.settings.weekStartDay === 'monday');



        // Add weekend shading classes
        if (this.plugin.settings.highlightWeekends) {
            container.addClass('weekend-shading-enabled');
        }

        if (this.plugin.settings.showPWColumn) {
            container.addClass('has-pw-column');
        }

        if (this.plugin.settings.showWeekNumbers) {
            container.addClass('has-week-numbers');
        }

        // --- Header and Navigation ---
        const headerDiv = container.createDiv("month-header");
        this.monthNameEl = headerDiv.createDiv({ cls: "month-header-title" });
        this.updateMonthTitle();
        this.monthNameEl.addEventListener('click', () => {
            // SET THE FLAG before switching views
            this.isProgrammaticScroll = true;

            this.isVerticalView = !this.isVerticalView;
            this.render();

            // CLEAR THE FLAG after render and initial scroll complete
            setTimeout(() => {
                this.isProgrammaticScroll = false;
            }, 800);  // Longer delay for initial view render on mobile
        });
        const navDiv = headerDiv.createDiv({ cls: "month-header-nav" });

        const backBtn = navDiv.createEl("button");
        backBtn.setAttribute("aria-label", "Previous month");
        setIcon(backBtn, "chevron-left");
        backBtn.addEventListener('click', () => {
            if (this.isVerticalView) {
                // SET FLAG
                this.isProgrammaticScroll = true;

                this.displayedMonth.setMonth(this.displayedMonth.getMonth() - 1, 1);

                const targetMonthId = `month-${this.displayedMonth.getFullYear()}-${this.displayedMonth.getMonth()}`;
                const targetEl = this.verticalScrollerEl?.querySelector(`#${targetMonthId}`);

                if (targetEl) {
                    targetEl.scrollIntoView({ block: 'start', behavior: 'smooth' });
                    this.updateMonthTitle();
                    this.updateTodayBtnAriaLabel();

                    // CLEAR FLAG
                    setTimeout(() => {
                        this.isProgrammaticScroll = false;
                    }, 500);
                }
            } else {
                this.changeMonth(-1);
            }
        });
        // Store reference and add new event listener for the "Today" button
        const todayBtn = navDiv.createEl('button');
        this.todayBtn = todayBtn;
        setIcon(todayBtn, 'calendar-clock');

        // Apply initial style and ARIA label on render
        if (this.isPopupLocked) {
            this.todayBtn.classList.add('popup-locked');
        }
        this.updateTodayBtnAriaLabel();

        todayBtn.addEventListener('click', () => {
            // Primary Action: Unlock popups if they are locked.
            if (this.isPopupLocked) {
                this.isPopupLocked = false;
                this.todayBtn.classList.remove('popup-locked');
                //new Notice('Calendar popups re-enabled.');
                this.updateTodayBtnAriaLabel();
                return;
            }

            const now = new Date();
            const isAlreadyCurrentMonth = this.displayedMonth.getFullYear() === now.getFullYear() && this.displayedMonth.getMonth() === now.getMonth();

            if (!isAlreadyCurrentMonth) {
                // ACTION A: If not on the current month, navigate there.
                if (this.isVerticalView) {
                    // SET THE FLAG TO PREVENT SCROLL LISTENER INTERFERENCE
                    this.isProgrammaticScroll = true;

                    // Set state to today
                    this.displayedMonth = new Date();
                    const initialMonthId = `month-${this.displayedMonth.getFullYear()}-${this.displayedMonth.getMonth()}`;

                    // Use the stored scroller reference to find the element
                    if (this.verticalScrollerEl) {
                        const initialEl = this.verticalScrollerEl.querySelector(`#${initialMonthId}`);
                        if (initialEl) {
                            // Scroll to the element
                            initialEl.scrollIntoView({ block: 'start', behavior: 'smooth' });

                            // Update the UI immediately
                            this.updateMonthTitle();
                            this.updateTodayBtnAriaLabel();

                            // CLEAR THE FLAG AFTER SCROLL ANIMATION COMPLETES
                            // The timeout should match or exceed the smooth scroll duration
                            setTimeout(() => {
                                this.isProgrammaticScroll = false;
                            }, 500);  // Adjust timing if needed (600-800ms for longer scrolls)
                        }
                    }
                } else {
                    // This handles the standard single-month view
                    this.changeMonth(0, true);
                }
                return;
            }

            // ACTION B: If already on the current month, lock the popups.
            this.isPopupLocked = true;
            this.todayBtn.classList.add('popup-locked');
            //new Notice('Calendar popups disabled.');
            this.updateTodayBtnAriaLabel();
        });



        // Ensure the button style is correct on re-render
        if (this.isPopupLocked) {
            this.todayBtn.classList.add('popup-locked');
        }

        const forwardBtn = navDiv.createEl("button");
        forwardBtn.setAttribute("aria-label", "Next month");
        setIcon(forwardBtn, "chevron-right");
        forwardBtn.addEventListener('click', () => {
            if (this.isVerticalView) {
                // SET FLAG
                this.isProgrammaticScroll = true;

                this.displayedMonth.setMonth(this.displayedMonth.getMonth() + 1, 1);

                const targetMonthId = `month-${this.displayedMonth.getFullYear()}-${this.displayedMonth.getMonth()}`;
                const targetEl = this.verticalScrollerEl?.querySelector(`#${targetMonthId}`);

                if (targetEl) {
                    targetEl.scrollIntoView({ block: 'start', behavior: 'smooth' });
                    this.updateMonthTitle();
                    this.updateTodayBtnAriaLabel();

                    // CLEAR FLAG
                    setTimeout(() => {
                        this.isProgrammaticScroll = false;
                    }, 500);
                }
            } else {
                this.changeMonth(1);
            }
        });

        const collapseBtn = navDiv.createEl("button");
        this.collapseBtn = collapseBtn;
        collapseBtn.setAttribute("aria-label", "Toggle calendar visibility");

        setIcon(this.collapseBtn, this.isCalendarCollapsed ? "chevron-up" : "chevron-down");

        this.collapseBtn.addEventListener("click", () => {
            this.isCalendarCollapsed = !this.isCalendarCollapsed;
            this.containerEl.firstElementChild.classList.toggle("calendar-collapsed", this.isCalendarCollapsed);
        });

        // --- Calendar Rendering (Vertical or Horizontal) ---
        if (this.isVerticalView) {
            this.renderVerticalCalendar(container);
        } else {
            const tableWrapper = container.createDiv({ cls: "calendar-table-wrapper" });
            const table = tableWrapper.createEl("table", { cls: "period-calendar-table" });
            this.attachSwipeListeners(tableWrapper, headerDiv);
            const thead = table.createEl('thead');
            // Use 'this.' to store the header row so we can access it later
            this.calendarHeaderRowEl = thead.createEl('tr');

            if (this.plugin.settings.showPWColumn) {
                this.calendarHeaderRowEl.createEl('th', { text: '' });
            }
            if (this.plugin.settings.showWeekNumbers) {
                this.calendarHeaderRowEl.createEl('th', { text: this.plugin.settings.weekNumberColumnLabel });
            }

            const startDayOffset = this.plugin.settings.weekStartDay === 'monday' ? 1 : 0;
            for (let d = 0; d < 7; d++) {
                const dayIndex = (d + startDayOffset) % 7;
                // Note: The highlighting logic has been completely removed from this loop
                this.calendarHeaderRowEl.createEl('th', { text: moment().day(dayIndex).format('ddd').toUpperCase() });
            }

            // ... the next line in your code should be this.calendarBodyEl = table.createEl("tbody");
            this.calendarBodyEl = table.createEl("tbody");
            this.renderCalendar();
            this.addColumnHighlighting(this.calendarHeaderRowEl, this.calendarBodyEl);

            // Add this line right here to set the highlight correctly on the first load
            this.updateDayHeaderHighlight();


            // --- Tabs and Content Panels ---
            const tabWrapper = container.createDiv("tabs-content-wrapper");
            const areTabsVisible = Object.values(this.plugin.settings.tabVisibility).some(visible => visible);
            if (!areTabsVisible) {
                tabWrapper.style.display = 'none';
            } else {
                container.addClass("tabs-are-visible");
            }

            const tabHeader = tabWrapper.createDiv("note-tab-header");
            const tabContainer = tabHeader.createDiv("tab-container");
            const searchWrapper = tabHeader.createDiv("search-wrapper");

            const scratchpadSearchContainer = searchWrapper.createDiv({ cls: "pm-search-container" });
            const notesSearchContainer = searchWrapper.createDiv({ cls: "pm-search-container" });
            const assetsSearchContainer = searchWrapper.createDiv({ cls: "pm-search-container" });
            const tasksSearchContainer = searchWrapper.createDiv({ cls: "pm-search-container" });

            // -- CONTENT PANELS --
            this.scratchWrapperEl = tabWrapper.createDiv({ cls: "scratchpad-wrapper" });
            this.renderScratchpadContent();

            this.notesContentEl = tabWrapper.createDiv({ cls: "notes-container" });
            this.assetsContentEl = tabWrapper.createDiv({ cls: "notes-container" });
            this.tasksContentEl = tabWrapper.createDiv({ cls: "tasks-container" });

            this.taskRefreshIndicator = tabWrapper.createDiv({ cls: 'pm-refresh-indicator' });
            setIcon(this.taskRefreshIndicator, 'arrow-down');

            // Function to handle switching between tabs.
            const switchTabs = (tab) => {
                this.activeTab = tab;
                Object.values(tabElements).forEach(el => el.removeClass("active"));
                if (tabElements[tab]) tabElements[tab].addClass("active");

                // Toggle visibility of content panels and their corresponding search bars.
                this.scratchWrapperEl.style.display = (tab === "scratch") ? "grid" : "none";
                this.notesContentEl.style.display = (tab === "notes") ? "block" : "none";
                this.assetsContentEl.style.display = (tab === "assets") ? "" : "none";
                this.tasksContentEl.style.display = (tab === "tasks") ? "block" : "none";

                scratchpadSearchContainer.style.display = (tab === "scratch") ? "flex" : "none";
                notesSearchContainer.style.display = (tab === "notes") ? "flex" : "none";
                assetsSearchContainer.style.display = (tab === "assets") ? "flex" : "none";
                tasksSearchContainer.style.display = (tab === "tasks") ? "flex" : "none";

                // Populate the content of the newly activated tab.
                if (tab === "notes") this.populateNotes();
                if (tab === "assets") this.populateAssets();
                if (tab === "tasks") this.populateTasks();
            };

            const tabElements = this.setupDraggableTabs(tabContainer, switchTabs);

            // -- SEARCH LOGIC --
            this.scratchpadSearchInputEl = this.setupSearchInput(scratchpadSearchContainer, "Search ScratchPad...", (term) => {
                this.scratchpadSearchTerm = term;
                this.updateScratchpadHighlights();
            });

            // This is a logic bug from the original code; this needs to be inside the "else" block of the preview mode
            if (!this.isScratchpadPreview) {
                this.noteTextarea.value = this.noteText;
                this.noteTextarea.addEventListener("input", async () => {
                    this.noteText = this.noteTextarea.value;
                    await this.saveFixedNote(this.noteText);
                    this.updateScratchpadHighlights();
                });

                this.noteTextarea.addEventListener('scroll', () => {
                    if (this.scratchHighlighterEl) {
                        this.scratchHighlighterEl.scrollTop = this.noteTextarea.scrollTop;
                        this.scratchHighlighterEl.scrollLeft = this.noteTextarea.scrollLeft;
                    }
                });
            }

            const notesPlaceholder = this.notesViewMode === 'pinned' ? 'Filter notes...' : 'Filter notes...';
            this.notesSearchInputEl = this.setupSearchInput(notesSearchContainer, notesPlaceholder, (term) => {
                this.notesSearchTerm = term;
                this.populateNotes();
            });

            this.assetsSearchInputEl = this.setupSearchInput(assetsSearchContainer, "Filter assets...", (term) => {
                this.assetsSearchTerm = term;
                this.populateAssets();
            });

            this.tasksSearchInputEl = this.setupSearchInput(tasksSearchContainer, "Filter tasks...", (term) => {
                this.tasksSearchTerm = term;
                this.populateTasks();
            });

            this.updateScratchpadSearchCount();
            switchTabs(this.activeTab);
        }

    }

    /**
     * Finds and highlights the next or previous occurrence of the search term in the scratchpad textarea.
     * @param {'next' | 'prev'} direction The direction to search.
     */
    highlightInScratchpad(direction = 'next') {
        this.noteTextarea.focus();
        const text = this.noteTextarea.value;
        const term = this.scratchpadSearchTerm;
        if (!term) return;

        const lowerText = text.toLowerCase();
        const lowerTerm = term.toLowerCase();
        let matchIndex = -1;

        if (direction === 'next') {
            const searchFrom = this.noteTextarea.selectionEnd;
            matchIndex = lowerText.indexOf(lowerTerm, searchFrom);
            if (matchIndex === -1) { // Wrap around to the start if no match is found.
                matchIndex = lowerText.indexOf(lowerTerm);
            }
        } else { // 'prev'
            const searchFrom = this.noteTextarea.selectionStart > 0 ? this.noteTextarea.selectionStart - 1 : text.length;
            matchIndex = lowerText.lastIndexOf(lowerTerm, searchFrom);
            if (matchIndex === -1) { // Wrap around to the end.
                matchIndex = lowerText.lastIndexOf(lowerTerm);
            }
        }

        if (matchIndex !== -1) {
            // Select the found text and scroll it into view.
            this.noteTextarea.setSelectionRange(matchIndex, matchIndex + term.length);
            const lineHeight = parseFloat(getComputedStyle(this.noteTextarea).lineHeight);
            const lines = text.substring(0, matchIndex).split('\n').length;
            this.noteTextarea.scrollTop = (lines - 1) * lineHeight;
        } else {
            new Notice("No matches found");
        }
    }

    /**
     * Helper to re-render just the calendar grid.
     */
    renderCalendar() {
        if (this.calendarBodyEl) {
            this.calendarBodyEl.empty();
            this.generateMonthGrid(this.displayedMonth, this.calendarBodyEl);
        }
    }

    /**
     * Shows a popup listing all notes, tasks, and assets associated with a specific day.
     * @param {HTMLElement} targetEl The calendar day element to position the popup near.
     * @param {object} dataByType An object containing arrays of items to display, keyed by type.
     * @param {Date} date The date for which the popup is being shown.
     */
    showFilePopup(targetEl, dataByType, date) {
        this.hideFilePopup();
        this.popupEl = createDiv({ cls: 'other-notes-popup' });
        const { settings } = this.plugin;

        // Add header with a close button and dynamic date title
        const headerRow = this.popupEl.createDiv({ cls: 'popup-header' });
        const formattedDate = moment(date).format("dddd, D MMMM YYYY");
        headerRow.createDiv({ cls: 'popup-header-title', text: formattedDate });
        const closeBtn = headerRow.createDiv({ cls: 'popup-close-btn' });
        setIcon(closeBtn, 'x');
        // Make the entire header row clickable to close the popup
        headerRow.addEventListener('click', () => this.hideFilePopup());

        // Create a scrollable wrapper for the content
        const contentWrapper = this.popupEl.createDiv({ cls: 'popup-content-wrapper' });

        if (dataByType.ics && dataByType.ics.length > 0) {
            contentWrapper.createEl('h6', { text: "Calendar Events", cls: "popup-section-header" });

            dataByType.ics.forEach(event => {
                const itemEl = contentWrapper.createDiv({ cls: "other-notes-popup-item" });

                // Add an icon for visual distinction
                const iconEl = itemEl.createDiv({ cls: 'note-icon' });
                setIcon(iconEl, 'calendar');

                const titleWrapper = itemEl.createDiv({ cls: 'note-title-wrapper' });
                titleWrapper.createDiv({ cls: 'note-title' }).setText(event.summary);

                // If the event is NOT all-day, add a sub-line with the time
                if (!event.isAllDay && event.startTime && event.endTime) {
                    const timeString = `${event.startTime} - ${event.endTime}`;
                    titleWrapper.createDiv({ text: timeString, cls: 'note-path' }); // Re-use 'note-path' for styled sub-text
                }
            });

            // Add a separator if other content follows
            const hasOtherContent = (dataByType.tasks && dataByType.tasks.length > 0) || (dataByType.daily && dataByType.daily.length > 0);
            if (hasOtherContent) {
                contentWrapper.createDiv({ cls: "popup-separator" });
            }
        }

        const addFileToList = (container, file, type) => {
            const itemEl = container.createDiv({ cls: 'other-notes-popup-item' });
            if (type === 'asset' && this.isImageAsset(file)) {
                const thumbnail = itemEl.createEl('img', { cls: 'popup-asset-thumbnail' });
                thumbnail.src = this.app.vault.getResourcePath(file);
            } else {
                const dot = itemEl.createDiv({ cls: 'popup-file-dot' });
                if (type === 'daily') dot.style.backgroundColor = settings.dailyNoteDotColor;
                else if (type === 'created') dot.style.backgroundColor = settings.otherNoteDotColor;
                else if (type === 'modified') dot.style.backgroundColor = settings.calendarModifiedDotColor;
                else if (type === 'asset') dot.style.backgroundColor = settings.assetDotColor;
            }
            const titlePathWrapper = itemEl.createDiv({ cls: 'note-title-path-wrapper' });
            const displayName = file.path.toLowerCase().endsWith('.md') ? file.basename : file.name;
            titlePathWrapper.createDiv({ text: displayName, cls: "note-title" });
            if (file.parent && file.parent.path !== '/') {
                titlePathWrapper.createDiv({ text: file.parent.path, cls: 'note-path' });
            }
            itemEl.addEventListener('click', () => {
                this.app.workspace.openLinkText(file.path, "", settings.notesOpenAction === 'new-tab');
                this.hideFilePopup();
            });
        };

        const addTaskToList = (container, task) => {
            const itemEl = container.createDiv({ cls: 'other-notes-popup-item' });
            itemEl.dataset.taskStatus = task.status;
            const checkbox = itemEl.createDiv({ cls: 'task-checkbox-symbol' });
            this._renderTaskSymbol(checkbox, task);
            checkbox.addEventListener('click', async (e) => {
                e.stopPropagation();
                await this.toggleTaskCompletion(task);
                task.status = (task.status.toLowerCase() === 'x') ? ' ' : 'x';
                this._renderTaskSymbol(checkbox, task);
                await this.buildTasksByDateMap();
                this.renderCalendar();
            });
            const textSpan = itemEl.createSpan({ cls: 'task-text' });
            MarkdownRenderer.render(this.app, task.text, textSpan, task.file.path, this);
            itemEl.addEventListener('click', () => {
                this.app.workspace.openLinkText(task.file.path, '', false, { eState: { line: task.lineNumber } });
                this.hideFilePopup();
            });
        };

        const allFiles = [...(dataByType.daily || []), ...(dataByType.created || []), ...(dataByType.modified || []), ...(dataByType.assets || [])];
        const hasTasks = dataByType.tasks && dataByType.tasks.length > 0;
        const hasFiles = allFiles.length > 0;

        if (hasTasks) {
            contentWrapper.createEl('h6', { text: 'Tasks', cls: 'popup-section-header' });
            dataByType.tasks.forEach(task => addTaskToList(contentWrapper, task));
        }
        if (hasTasks && hasFiles) {
            contentWrapper.createDiv({ cls: 'popup-separator' });
        }
        if (hasFiles) {
            contentWrapper.createEl('h6', { text: 'Notes & Assets', cls: 'popup-section-header' });
            (dataByType.daily || []).forEach(file => addFileToList(contentWrapper, file, 'daily'));
            (dataByType.created || []).forEach(file => addFileToList(contentWrapper, file, 'created'));
            (dataByType.modified || []).forEach(file => addFileToList(contentWrapper, file, 'modified'));
            (dataByType.assets || []).forEach(file => addFileToList(contentWrapper, file, 'asset'));
        }

        if (!contentWrapper.hasChildNodes()) {
            this.hideFilePopup();
            return;
        }

        this.popupEl.addEventListener('mouseenter', () => clearTimeout(this.hideTimeout));
        this.popupEl.addEventListener('mouseleave', () => {
            this.hideTimeout = setTimeout(() => this.hideFilePopup(), this.plugin.settings.popupHideDelay);
        });

        document.body.appendChild(this.popupEl);

        const popupRect = this.popupEl.getBoundingClientRect();
        const targetRect = targetEl.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;
        const margin = this.plugin.settings.popupGap;
        let finalTop = targetRect.bottom + margin;
        if (finalTop + popupRect.height > viewportHeight) finalTop = targetRect.top - popupRect.height - margin;
        if (finalTop < margin) finalTop = margin;
        let finalLeft = targetRect.left;
        if (finalLeft + popupRect.width > viewportWidth - margin) finalLeft = targetRect.right - popupRect.width;
        if (finalLeft < margin) finalLeft = margin;
        this.popupEl.style.top = `${finalTop}px`;
        this.popupEl.style.left = `${finalLeft}px`;
        this.popupEl.style.visibility = 'visible';
    }

    /**
     * Hides and destroys the file popup element.
     */
    hideFilePopup() {
        clearTimeout(this.hoverTimeout);
        clearTimeout(this.hideTimeout);
        if (this.popupEl) {
            this.popupEl.remove();
            this.popupEl = null;
            this.taskRefreshDebounceTimer = null;
            this.taskCache = new Map();
        }
    }

    updateMonthTitle() { if (this.monthNameEl) this.monthNameEl.textContent = formatMonthTitle(this.displayedMonth, this.plugin.settings.monthTitleFormat); }
    changeMonth(offset, toToday = false) {
        if (toToday) {
            this.displayedMonth = new Date();
        } else {
            this.displayedMonth.setMonth(this.displayedMonth.getMonth() + offset, 1);
        }

        this.updateMonthTitle();
        this.renderCalendar();
        this.updateTodayBtnAriaLabel();

        this.updateDayHeaderHighlight();
    }

    updateTodayBtnAriaLabel() {
        if (!this.todayBtn) return;

        const now = new Date();
        const isCurrentMonth = this.displayedMonth.getFullYear() === now.getFullYear() && this.displayedMonth.getMonth() === now.getMonth();

        if (this.isPopupLocked) {
            // If popups are locked (accent on), the only action is to enable them.
            this.todayBtn.setAttribute('aria-label', 'Tap to enable calendar popups');
        } else {
            // If popups are unlocked (accent off)...
            if (isCurrentMonth) {
                // ...and we're on the current month, the next action is to disable them.
                this.todayBtn.setAttribute('aria-label', 'Tap to disable calendar popups');
            } else {
                // ...and we're on a different month, the action is to navigate.
                this.todayBtn.setAttribute('aria-label', 'Go to today');
            }
        }
    }

    /**
     * Adds keyboard event listeners to a row element for list navigation.
     * @param {HTMLElement} row The row element (e.g., a `.note-row` or `.task-row`).
     * @param {HTMLInputElement} searchInputEl The search input associated with the list.
     */
    addKeydownListeners(row, searchInputEl) {
        row.setAttribute('tabindex', -1); // Make the row focusable.
        row.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                row.click();
                return;
            }

            if (e.key !== 'ArrowDown' && e.key !== 'ArrowUp') return;

            e.preventDefault();

            const container = row.closest('.notes-container, .tasks-container');
            if (!container) return;

            const items = Array.from(container.querySelectorAll('.note-row, .task-row'));
            const currentIndex = items.indexOf(row);

            let nextIndex = e.key === 'ArrowDown' ? currentIndex + 1 : currentIndex - 1;

            if (nextIndex >= 0 && nextIndex < items.length) {
                items[nextIndex].focus();
            } else if (e.key === 'ArrowUp' && searchInputEl) {
                // If at the top of the list, focus the search input.
                searchInputEl.focus();
            }
        });
    }

    /**
     * Populates the "Notes" tab with either recent or pinned notes.
     */
    async populateNotes() {
        if (!this.notesContentEl) return;
        this.notesContentEl.empty();

        const settings = this.plugin.settings;
        let notesToShow;

        // --- 1. FILTER AND SORT NOTES ---
        if (this.notesViewMode === 'pinned') {
            const pinValue = settings.pinTag.toLowerCase();
            notesToShow = this.app.vault.getMarkdownFiles().filter(file => {
                const cache = this.app.metadataCache.getFileCache(file);
                if (!cache) return false;

                if (cache.tags?.some(tag => tag.tag.toLowerCase().includes(pinValue))) {
                    return true;
                }

                const frontmatter = cache.frontmatter;
                if (frontmatter) {
                    for (const key in frontmatter) {
                        const value = frontmatter[key];
                        if (typeof value === 'string' && value.toLowerCase().includes(pinValue)) {
                            return true;
                        }
                        if (Array.isArray(value) && value.some(item => typeof item === 'string' && item.toLowerCase().includes(pinValue))) {
                            return true;
                        }
                    }
                }
                return false;
            });

            if (this.pinnedSortOrder === 'z-a') {
                notesToShow.sort((a, b) => b.basename.localeCompare(a.basename));
            } else if (this.pinnedSortOrder === 'custom') {
                const customOrder = settings.pinnedNotesCustomOrder;
                // This robust sort handles new items not yet in the custom order array.
                notesToShow.sort((a, b) => {
                    const indexA = customOrder.indexOf(a.path);
                    const indexB = customOrder.indexOf(b.path);

                    // If both items are in the custom order, sort by their position.
                    if (indexA !== -1 && indexB !== -1) {
                        return indexA - indexB;
                    }
                    // If only A is in the order, it comes first.
                    if (indexA !== -1) {
                        return -1;
                    }
                    // If only B is in the order, it comes first.
                    if (indexB !== -1) {
                        return 1;
                    }
                    // If neither is in the order (e.g., new pinned notes), sort them alphabetically.
                    return a.basename.localeCompare(b.basename);
                });
            } else { // a-z
                notesToShow.sort((a, b) => a.basename.localeCompare(b.basename));
            }
        } else { // recent notes mode
            const cutoff = moment().subtract(settings.notesLookbackDays, 'days').valueOf();
            notesToShow = this.app.vault.getMarkdownFiles()
                .filter(file => !settings.ignoreFolders.some(f => file.path.startsWith(f)) && (file.stat.mtime >= cutoff || file.stat.ctime >= cutoff))
                .sort((a, b) => b.stat.mtime - a.stat.mtime);
        }

        // --- 2. APPLY SEARCH TERM ---
        const searchTerm = this.notesSearchTerm.toLowerCase();
        const filteredNotes = searchTerm ?
            notesToShow.filter(file => file.basename.toLowerCase().includes(searchTerm)) :
            notesToShow;

        if (filteredNotes.length === 0) {
            const message = this.notesViewMode === 'pinned' ? 'No pinned notes found.' : 'No recent notes found.';
            this.notesContentEl.createDiv({ text: message, cls: 'task-group-empty-message' });
            return;
        }

        // --- 3. RENDER THE VIEW ---
        if (this.notesViewMode === 'pinned') {
            const groupContainer = this.notesContentEl.createDiv({ cls: 'note-group-container' });
            const header = groupContainer.createDiv({ cls: 'note-group-header' });
            const headerContent = header.createDiv({ cls: 'note-group-header-content', attr: { 'aria-live': 'polite' } });
            setIcon(headerContent, settings.tabIcons.pinned || 'pin');
            headerContent.createSpan({ text: 'Pinned Notes' });

            const sortIndicator = headerContent.createSpan({ cls: 'pinned-sort-indicator' });
            const updateSortVisuals = () => {
                if (this.pinnedSortOrder === 'z-a') {
                    sortIndicator.setText('Z-A');
                    headerContent.setAttribute('aria-label', 'Current sort: Z-A. Click for Custom sort.');
                } else if (this.pinnedSortOrder === 'custom') {
                    sortIndicator.setText('Custom');
                    headerContent.setAttribute('aria-label', 'Current sort: Custom. Click for A-Z sort.');
                } else { // a-z
                    sortIndicator.setText('A-Z');
                    headerContent.setAttribute('aria-label', 'Current sort: A-Z. Click for Z-A sort.');
                }
            };
            updateSortVisuals();

            headerContent.addEventListener('click', () => {
                if (this.pinnedSortOrder === 'a-z') this.pinnedSortOrder = 'z-a';
                else if (this.pinnedSortOrder === 'z-a') this.pinnedSortOrder = 'custom';
                else this.pinnedSortOrder = 'a-z';
                this.populateNotes(); // Re-render
            });

            header.createDiv({ cls: 'note-group-count', text: filteredNotes.length.toString() });

            const listWrapper = groupContainer.createDiv({ cls: 'note-list-wrapper' });

            // MODIFICATION START: Add a single robust drop handler to the container
            listWrapper.addEventListener('drop', async (e) => {
                e.preventDefault();
                await this.savePinnedOrder(listWrapper);
            });
            // MODIFICATION END

            filteredNotes.forEach(file => {
                this.renderNoteItem(file, listWrapper);
            });

        } else { // Your original rendering logic for recent notes
            const groups = { today: [], yesterday: [], thisWeek: [], lastWeek: [], thisMonth: [], older: [] };
            const now = moment();

            filteredNotes.forEach(file => {
                const modTime = moment(file.stat.mtime);
                if (modTime.isSame(now, 'day')) groups.today.push(file);
                else if (modTime.isSame(now.clone().subtract(1, 'day'), 'day')) groups.yesterday.push(file);
                else if (modTime.isSame(now, 'week')) groups.thisWeek.push(file);
                else if (modTime.isSame(now.clone().subtract(1, 'week'), 'week')) groups.lastWeek.push(file);
                else if (modTime.isSame(now, 'month')) groups.thisMonth.push(file);
                else groups.older.push(file);
            });

            const groupOrder = [
                { key: 'today', label: 'Today' },
                { key: 'yesterday', label: 'Yesterday' },
                { key: 'thisWeek', label: 'This Week' },
                { key: 'lastWeek', label: 'Last Week' },
                { key: 'thisMonth', label: 'This Month' },
                { key: 'older', label: 'Older' },
            ];

            groupOrder.forEach(groupInfo => {
                const notesInGroup = groups[groupInfo.key];
                if (notesInGroup.length > 0) {
                    const groupContainer = this.notesContentEl.createDiv({ cls: 'note-group-container' });
                    const isCollapsed = this.collapsedNoteGroups[groupInfo.key];
                    if (isCollapsed) groupContainer.addClass('is-collapsed');

                    const header = groupContainer.createDiv({ cls: 'note-group-header' });
                    const headerContent = header.createDiv({ cls: 'note-group-header-content' });
                    const collapseIcon = headerContent.createDiv({ cls: 'note-group-collapse-icon' });
                    setIcon(collapseIcon, 'chevron-down');
                    headerContent.createSpan({ text: groupInfo.label });
                    header.createDiv({ cls: 'note-group-count', text: notesInGroup.length.toString() });

                    header.addEventListener('click', () => {
                        const currentlyCollapsed = groupContainer.classList.toggle('is-collapsed');
                        this.collapsedNoteGroups[groupInfo.key] = currentlyCollapsed;
                        this.plugin.saveSettings();
                    });

                    const listWrapper = groupContainer.createDiv({ cls: 'note-list-wrapper' });
                    notesInGroup.forEach(file => {
                        this.renderNoteItem(file, listWrapper);
                    });
                }
            });
        }
    }




    /**
     * Scans the vault for tasks, filters and sorts them, and populates the "Tasks" tab.
     */
    async populateTasks() {
        if (!this.tasksContentEl) return;

        const settings = this.plugin.settings;
        this.tasksContentEl.toggleClass('show-full-text', !settings.taskTextTruncate);

        if (this.taskCache) { this.taskCache.clear(); } else { this.taskCache = new Map(); }

        const taskIgnoreFolders = (settings.taskIgnoreFolders || []).map(f => f.toLowerCase().endsWith('/') ? f.toLowerCase() : f.toLowerCase() + '/');
        const files = this.app.vault.getMarkdownFiles().filter(file => {
            const filePathLower = file.path.toLowerCase();
            return !taskIgnoreFolders.some(folder => folder && filePathLower.startsWith(folder));
        });


        let allTasks = [];
        const taskRegex = /^\s*(?:-|\d+\.)\s*\[(.)\]\s*(.*)/;
        const dueDateRegex = /üìÖ\s*(\d{4}-\d{2}-\d{2})/;
        const completionDateRegex = /‚úÖ\s*(\d{4}-\d{2}-\d{2})/;
        const tagRegex = /#([a-zA-Z0-9_\-\/]+)/g;

        for (const file of files) {
            const content = await this.app.vault.cachedRead(file);
            const lines = content.split('\n');

            this.taskCache.set(file.path, this.extractTaskLines(content));

            lines.forEach((line, index) => {
                const match = line.match(taskRegex);
                if (match) {
                    const status = match[1];
                    const text = match[2];
                    const isCompleted = status.toLowerCase() === 'x';
                    const completionDateMatch = text.match(completionDateRegex);
                    const completionDate = completionDateMatch ? moment(completionDateMatch[1], "YYYY-MM-DD").toDate() : null;

                    if (isCompleted && !(settings.showCompletedTasksToday && completionDate && isSameDay(completionDate, new Date()))) {
                        return;
                    }

                    const dueDateMatch = text.match(dueDateRegex);
                    const dueDate = dueDateMatch ? moment(dueDateMatch[1], "YYYY-MM-DD").toDate() : null;
                    const tags = Array.from(text.matchAll(tagRegex)).map(m => m[1]);
                    let displayText = text.trim();
                    if (!isCompleted) {
                        displayText = displayText.replace(completionDateRegex, '').trim();
                    }
                    allTasks.push({ text: displayText, file, lineNumber: index, dueDate, tags, status, completionDate });
                }
            });
        }

        const searchTerm = this.tasksSearchTerm.toLowerCase();
        let filteredTasks = allTasks.filter(task => !searchTerm || task.text.toLowerCase().includes(searchTerm));

        filteredTasks.sort((a, b) => {
            if (settings.taskSortOrder === 'a-z') return a.text.localeCompare(b.text);
            if (settings.taskSortOrder === 'z-a') return b.text.localeCompare(a.text);
            if (a.dueDate && b.dueDate) return a.dueDate - b.dueDate;
            return a.dueDate ? -1 : (b.dueDate ? 1 : a.text.localeCompare(b.text));
        });

        // 2. MAP EXISTING DOM GROUPS
        const existingGroups = new Map();
        this.tasksContentEl.querySelectorAll('.task-group-container').forEach(groupEl => {
            if (groupEl.dataset.groupKey) {
                existingGroups.set(groupEl.dataset.groupKey, groupEl);
            }
        });

        // 3. GET NEW GROUP DATA
        const newGroupData = settings.taskGroupBy === 'tag'
            ? this.groupTasksByTag(filteredTasks)
            : this.groupTasksByDate(filteredTasks);

        const groupOrder = Object.keys(newGroupData);

        // 4. RECONCILE GROUPS
        let lastElement = null;
        groupOrder.forEach(groupKey => {
            const groupData = newGroupData[groupKey];
            let groupEl = existingGroups.get(groupKey);

            if (groupEl) {
                const headerContent = groupEl.querySelector('.task-group-header-content span:last-child');
                if (headerContent) headerContent.textContent = `${groupData.title} (${groupData.tasks.length})`;

                this.reconcileTaskList(groupEl.querySelector('.task-list-wrapper'), groupData.tasks);
                existingGroups.delete(groupKey);
            } else {
                groupEl = this.renderTaskGroup(groupKey, groupData);
            }

            if (lastElement) {
                lastElement.after(groupEl);
            } else {
                this.tasksContentEl.prepend(groupEl);
            }
            lastElement = groupEl;
        });

        // 5. REMOVE OLD GROUPS
        existingGroups.forEach(groupEl => groupEl.remove());

        if (this.tasksContentEl.children.length === 0) {
            // Clear any old message and add a new one
            this.tasksContentEl.empty();
            const message = searchTerm ? 'No tasks match your search term.' : 'No tasks found';
            this.tasksContentEl.createDiv({ text: message, cls: 'task-group-empty-message' });
        } else {
            // Remove any "no tasks" message if it exists
            const emptyMessage = this.tasksContentEl.querySelector('.task-group-empty-message');
            if (emptyMessage) emptyMessage.remove();
        }
    }


    // In your PeriodMonthView class
    getTaskKey(task) {
        return `${task.file.path}:${task.lineNumber}`;
    }

    updateTaskItem(taskRowEl, task) {
        if (taskRowEl.dataset.taskStatus !== task.status) {
            const checkbox = taskRowEl.querySelector('.task-checkbox-symbol');
            if (checkbox) {
                this._renderTaskSymbol(checkbox, task);
            }
            taskRowEl.dataset.taskStatus = task.status;
        }

        const textEl = taskRowEl.querySelector('.task-text');
        const existingText = textEl ? textEl.textContent : '';
        if (textEl && existingText !== task.text) {
            textEl.empty();
            MarkdownRenderer.render(this.app, task.text, textEl, task.file.path, this);
        }
    }

    groupTasksByDate(tasks) {
        const settings = this.plugin.settings;
        const now = moment().startOf('day');
        const groupsData = { overdue: [], today: [], tomorrow: [], next7days: [], future: [], noDate: [] };

        tasks.forEach(task => {
            if (!task.dueDate) { groupsData.noDate.push(task); return; }
            const due = moment(task.dueDate).startOf('day');
            if (due.isBefore(now)) groupsData.overdue.push(task);
            else if (due.isSame(now)) groupsData.today.push(task);
            else if (due.isSame(now.clone().add(1, 'day'))) groupsData.tomorrow.push(task);
            else if (due.isSameOrBefore(now.clone().add(7, 'days'))) groupsData.next7days.push(task);
            else groupsData.future.push(task);
        });

        const icons = settings.taskGroupIcons || DEFAULT_SETTINGS.taskGroupIcons;
        const groupOrder = [
            { key: 'overdue', title: 'Overdue', icon: icons.overdue, color: settings.taskGroupColorOverdue },
            { key: 'today', title: 'Today', icon: icons.today, color: settings.taskGroupColorToday },
            { key: 'tomorrow', title: 'Tomorrow', icon: icons.tomorrow, color: settings.taskGroupColorTomorrow },
            { key: 'next7days', title: 'Next 7 Days', icon: icons.next7days, color: settings.taskGroupColorNext7Days },
            { key: 'future', title: 'Future', icon: icons.future, color: settings.taskGroupColorFuture },
            { key: 'noDate', title: 'No Due Date', icon: icons.noDate, color: settings.taskGroupColorNoDate }
        ];

        const finalGroups = {};
        groupOrder.forEach(g => {
            if (settings.taskDateGroupsToShow.includes(g.key) || g.key === 'noDate') {
                if (groupsData[g.key].length > 0) {
                    finalGroups[g.key] = { ...g, tasks: groupsData[g.key] };
                }
            }
        });
        return finalGroups;
    }

    groupTasksByTag(tasks) {
        const settings = this.plugin.settings;
        const groupedByTag = tasks.reduce((acc, task) => {
            const tags = task.tags.length > 0 ? task.tags : ['#untagged'];
            tags.forEach(tag => {
                const key = tag.toLowerCase();
                if (!acc[key]) acc[key] = {
                    title: tag,
                    icon: settings.taskGroupIcons?.tag || 'tag',
                    color: settings.taskGroupColorTag,
                    tasks: []
                };
                acc[key].tasks.push(task);
            });
            return acc;
        }, {});

        // Sort groups alphabetically by tag name
        const sortedKeys = Object.keys(groupedByTag).sort((a, b) => a.localeCompare(b));
        const sortedGroups = {};
        for (const key of sortedKeys) {
            sortedGroups[key] = groupedByTag[key];
        }
        return sortedGroups;
    }

    renderTaskGroup(key, groupData) {
        const groupContainer = createDiv({ cls: 'task-group-container', attr: { style: `background-color: ${groupData.color}` } });
        groupContainer.dataset.groupKey = key;

        const isCollapsed = this.plugin.settings.collapsedTaskGroups[key];
        if (isCollapsed) groupContainer.addClass('is-collapsed');

        const header = groupContainer.createDiv({ cls: 'task-group-header' });

        header.addEventListener('click', () => {
            // Find the wrapper element for the list
            const taskListWrapper = groupContainer.querySelector('.task-list-wrapper');
            if (!taskListWrapper) return;

            // Check the current state
            const isCurrentlyCollapsed = groupContainer.classList.contains('is-collapsed');

            if (isCurrentlyCollapsed) {
                // --- EXPANDING ---
                // 1. Set the CSS variable to the element's full scroll height.
                //    This gives the 'height' property a specific value to animate *to*.
                const scrollHeight = taskListWrapper.scrollHeight;
                taskListWrapper.style.setProperty('--task-list-height', `${scrollHeight}px`);

                // 2. Remove the class to trigger the transition.
                groupContainer.classList.remove('is-collapsed');

                // After the animation, remove the explicit height to allow for dynamic content.
                setTimeout(() => {
                    taskListWrapper.style.removeProperty('--task-list-height');
                }, 350); // Match this to your CSS transition duration

            } else {
                // --- COLLAPSING ---
                // 1. Set the CSS variable to the element's current rendered height.
                //    This gives the 'height' property a specific value to animate *from*.
                const currentHeight = taskListWrapper.offsetHeight;
                taskListWrapper.style.setProperty('--task-list-height', `${currentHeight}px`);

                // This is a micro-delay to ensure the browser registers the starting height
                // before being told to transition to 0. This is the key to fixing the "instant collapse".
                requestAnimationFrame(() => {
                    // 2. Add the class to trigger the transition to height: 0.
                    groupContainer.classList.add('is-collapsed');
                });
            }

            // Update and save the state
            this.collapsedTaskGroups[key] = !isCurrentlyCollapsed;
            this.plugin.saveSettings();
        });
        /*
        header.addEventListener('click', () => {
            const currentlyCollapsed = groupContainer.classList.toggle('is-collapsed');
            this.plugin.settings.collapsedTaskGroups[key] = currentlyCollapsed;
            this.plugin.saveSettings();
        });
        */
        const headerContent = header.createSpan({ cls: 'task-group-header-content' });
        const iconEl = headerContent.createSpan({ cls: 'icon' });
        setIcon(iconEl, groupData.icon);
        headerContent.createSpan({ text: `${groupData.title} (${groupData.tasks.length})` });

        const collapseIcon = header.createSpan({ cls: 'task-group-collapse-icon' });
        setIcon(collapseIcon, 'chevron-down');

        const taskListWrapper = groupContainer.createDiv('task-list-wrapper');
        groupData.tasks.forEach(task => {
            const taskEl = this.renderTaskItem(task); // Use the modified renderTaskItem
            taskListWrapper.appendChild(taskEl);
        });

        return groupContainer;
    }

    reconcileTaskList(listWrapperEl, newTasks) {
        const existingTaskRows = new Map();
        listWrapperEl.querySelectorAll('.task-row').forEach(row => {
            if (row.dataset.key) {
                existingTaskRows.set(row.dataset.key, row);
            }
        });

        let lastElement = null;
        newTasks.forEach(task => {
            const taskKey = this.getTaskKey(task);
            let taskEl = existingTaskRows.get(taskKey);

            if (taskEl) {
                this.updateTaskItem(taskEl, task);
                existingTaskRows.delete(taskKey);
            } else {
                taskEl = this.renderTaskItem(task);
            }

            // Ensure the element is in the correct position
            if (lastElement) {
                lastElement.after(taskEl);
            } else {
                listWrapperEl.prepend(taskEl);
            }
            lastElement = taskEl;
        });

        existingTaskRows.forEach(row => row.remove());
    }


    renderTasksByTag(tasks, settings) { // Receives 'settings' as an argument
        // The duplicate declaration that caused the error has been removed.
        tasks = tasks.filter(task => {
            const isCompleted = task.status && task.status.toLowerCase() === 'x';
            if (!isCompleted) return true;
            return settings.showCompletedTasksToday && task.completionDate && isSameDay(task.completionDate, new Date());
        });

        const groupedByTag = tasks.reduce((acc, task) => {
            const tags = task.tags.length > 0 ? task.tags : ['#untagged'];
            tags.forEach(tag => {
                if (!acc[tag]) acc[tag] = [];
                acc[tag].push(task);
            });
            return acc;
        }, {});

        Object.keys(groupedByTag).sort().forEach(tag => {
            const tasksInGroup = groupedByTag[tag];

            const groupContainer = this.tasksContentEl.createDiv({ cls: 'task-group-container', attr: { style: `background-color: ${settings.taskGroupColorTag}` } });

            const isCollapsed = this.collapsedTaskGroups[tag];
            if (isCollapsed) groupContainer.addClass('is-collapsed');

            const header = groupContainer.createDiv({ cls: 'task-group-header' });

            header.addEventListener('click', () => {
                // Find the wrapper element for the list
                const taskListWrapper = groupContainer.querySelector('.task-list-wrapper');
                if (!taskListWrapper) return;

                // Check the current state
                const isCurrentlyCollapsed = groupContainer.classList.contains('is-collapsed');

                if (isCurrentlyCollapsed) {
                    // --- EXPANDING ---
                    // 1. Set the CSS variable to the element's full scroll height.
                    //    This gives the 'height' property a specific value to animate *to*.
                    const scrollHeight = taskListWrapper.scrollHeight;
                    taskListWrapper.style.setProperty('--task-list-height', `${scrollHeight}px`);

                    // 2. Remove the class to trigger the transition.
                    groupContainer.classList.remove('is-collapsed');

                    // After the animation, remove the explicit height to allow for dynamic content.
                    setTimeout(() => {
                        taskListWrapper.style.removeProperty('--task-list-height');
                    }, 350); // Match this to your CSS transition duration

                } else {
                    // --- COLLAPSING ---
                    // 1. Set the CSS variable to the element's current rendered height.
                    //    This gives the 'height' property a specific value to animate *from*.
                    const currentHeight = taskListWrapper.offsetHeight;
                    taskListWrapper.style.setProperty('--task-list-height', `${currentHeight}px`);

                    // This is a micro-delay to ensure the browser registers the starting height
                    // before being told to transition to 0. This is the key to fixing the "instant collapse".
                    requestAnimationFrame(() => {
                        // 2. Add the class to trigger the transition to height: 0.
                        groupContainer.classList.add('is-collapsed');
                    });
                }

                // Update and save the state
                this.collapsedTaskGroups[tag] = !isCurrentlyCollapsed;
                this.plugin.saveSettings();
            });
            /*
            header.addEventListener('click', () => {
                const currentlyCollapsed = groupContainer.classList.toggle('is-collapsed');
                this.collapsedTaskGroups[tag] = currentlyCollapsed;
                this.plugin.saveSettings();
            });
            */

            const headerContent = header.createSpan({ cls: 'task-group-header-content' });
            const tagIconName = settings.taskGroupIcons?.tag || 'tag';
            const iconEl = headerContent.createSpan({ cls: 'icon' });
            setIcon(iconEl, tagIconName);
            headerContent.createSpan({ text: `${tag} (${tasksInGroup.length})` });

            const collapseIcon = header.createSpan({ cls: 'task-group-collapse-icon' });
            setIcon(collapseIcon, 'chevron-down');

            const taskListWrapper = groupContainer.createDiv('task-list-wrapper');

            if (tasksInGroup.length > 0) {
                tasksInGroup.forEach(task => this.renderTaskItem(task, taskListWrapper));
            } else {
                taskListWrapper.createDiv({ text: 'No tasks with this tag.', cls: 'task-group-empty-message' });
                groupContainer.addClass('is-collapsed');
                taskListWrapper.style.display = 'none';
            }
        });

        if (tasks.length === 0) this.tasksContentEl.createDiv({ text: 'No tasks found', cls: 'task-group-empty-message' });
    }

    renderTasksByDate(tasks, settings) { // Receives 'settings' as an argument
        // The duplicate declaration that caused the error has been removed.
        const now = moment().startOf('day');
        let groups = { overdue: [], today: [], tomorrow: [], next7days: [], future: [], noDate: [] };

        tasks.forEach(task => {
            if (!task.dueDate) {
                groups.noDate.push(task);
                return;
            }
            const due = moment(task.dueDate).startOf('day');
            if (due.isBefore(now)) groups.overdue.push(task);
            else if (due.isSame(now)) groups.today.push(task);
            else if (due.isSame(now.clone().add(1, 'day'))) groups.tomorrow.push(task);
            else if (due.isSameOrBefore(now.clone().add(7, 'days'))) groups.next7days.push(task);
            else groups.future.push(task);
        });

        for (const groupKey in groups) {
            groups[groupKey] = groups[groupKey].filter(task => {
                const isCompleted = task.status && task.status.toLowerCase() === 'x';
                if (!isCompleted) return true;
                return settings.showCompletedTasksToday && task.completionDate && isSameDay(task.completionDate, new Date());
            });
        }

        const icons = settings.taskGroupIcons || DEFAULT_SETTINGS.taskGroupIcons;
        const groupOrder = [
            { key: 'overdue', title: 'Overdue', icon: icons.overdue, color: settings.taskGroupColorOverdue },
            { key: 'today', title: 'Today', icon: icons.today, color: settings.taskGroupColorToday },
            { key: 'tomorrow', title: 'Tomorrow', icon: icons.tomorrow, color: settings.taskGroupColorTomorrow },
            { key: 'next7days', title: 'Next 7 Days', icon: icons.next7days, color: settings.taskGroupColorNext7Days },
            { key: 'future', title: 'Future', icon: icons.future, color: settings.taskGroupColorFuture },
            { key: 'noDate', title: 'No Due Date', icon: icons.noDate, color: settings.taskGroupColorNoDate }
        ];

        let totalTasksRendered = 0;
        groupOrder.forEach(g => {
            if (settings.taskDateGroupsToShow.includes(g.key) || g.key === 'noDate') {
                const tasksInGroup = groups[g.key];
                totalTasksRendered += tasksInGroup.length;

                const groupContainer = this.tasksContentEl.createDiv({ cls: 'task-group-container', attr: { style: `background-color: ${g.color}` } });

                const isCollapsed = this.collapsedTaskGroups[g.key];
                if (isCollapsed) groupContainer.addClass('is-collapsed');

                const header = groupContainer.createDiv({ cls: 'task-group-header' });

                header.addEventListener('click', () => {
                    // Find the wrapper element for the list
                    const taskListWrapper = groupContainer.querySelector('.task-list-wrapper');
                    if (!taskListWrapper) return;

                    // Check the current state
                    const isCurrentlyCollapsed = groupContainer.classList.contains('is-collapsed');

                    if (isCurrentlyCollapsed) {
                        // --- EXPANDING ---
                        // 1. Set the CSS variable to the element's full scroll height.
                        //    This gives the 'height' property a specific value to animate *to*.
                        const scrollHeight = taskListWrapper.scrollHeight;
                        taskListWrapper.style.setProperty('--task-list-height', `${scrollHeight}px`);

                        // 2. Remove the class to trigger the transition.
                        groupContainer.classList.remove('is-collapsed');

                        // After the animation, remove the explicit height to allow for dynamic content.
                        setTimeout(() => {
                            taskListWrapper.style.removeProperty('--task-list-height');
                        }, 350); // Match this to your CSS transition duration

                    } else {
                        // --- COLLAPSING ---
                        // 1. Set the CSS variable to the element's current rendered height.
                        //    This gives the 'height' property a specific value to animate *from*.
                        const currentHeight = taskListWrapper.offsetHeight;
                        taskListWrapper.style.setProperty('--task-list-height', `${currentHeight}px`);

                        // This is a micro-delay to ensure the browser registers the starting height
                        // before being told to transition to 0. This is the key to fixing the "instant collapse".
                        requestAnimationFrame(() => {
                            // 2. Add the class to trigger the transition to height: 0.
                            groupContainer.classList.add('is-collapsed');
                        });
                    }

                    // Update and save the state
                    this.collapsedTaskGroups[g.key] = !isCurrentlyCollapsed;
                    this.plugin.saveSettings();
                });
                /*
                header.addEventListener('click', () => {
                    const currentlyCollapsed = groupContainer.classList.toggle('is-collapsed');
                    this.collapsedTaskGroups[g.key] = currentlyCollapsed;
                    this.plugin.saveSettings();
                });
                */

                const headerContent = header.createSpan({ cls: 'task-group-header-content' });
                const iconEl = headerContent.createSpan({ cls: 'icon' });
                setIcon(iconEl, g.icon);
                headerContent.createSpan({ text: `${g.title} (${tasksInGroup.length})` });

                const collapseIcon = header.createSpan({ cls: 'task-group-collapse-icon' });
                setIcon(collapseIcon, 'chevron-down');

                const taskListWrapper = groupContainer.createDiv('task-list-wrapper');
                if (tasksInGroup.length > 0) {
                    tasksInGroup.forEach(task => this.renderTaskItem(task, taskListWrapper));
                } else {
                    taskListWrapper.createDiv({ text: `No ${g.title.toLowerCase()} tasks.`, cls: 'task-group-empty-message' });
                    groupContainer.addClass('is-collapsed');
                    taskListWrapper.style.display = 'none';
                }
            }
        });

        if (totalTasksRendered === 0 && this.tasksSearchTerm) {
            this.tasksContentEl.createDiv({ text: 'No tasks match your search term.', cls: 'task-group-empty-message' });
        }
    }

    /**
     * Renders a single task item row in a task group.
     * @param {object} task The task object.
     * @param {HTMLElement} container The parent container for the task row.
     */
    renderTaskItem(task) {
        const taskRow = createDiv({ cls: 'task-row' });
        taskRow.dataset.key = this.getTaskKey(task);
        taskRow.dataset.taskStatus = task.status;
        const searchInputEl = this.tasksSearchInputEl;

        const checkbox = taskRow.createDiv({ cls: 'task-checkbox-symbol' });
        this._renderTaskSymbol(checkbox, task);
        const textEl = taskRow.createSpan({ cls: 'task-text' });

        // On initial render, check if the task is already completed and apply the style.
        if (task.status.toLowerCase() === 'x') {
            textEl.classList.add('completed');
        }

        checkbox.addEventListener('click', async (e) => {
            e.stopPropagation();

            // Determine the state *before* the change is made
            const wasCompleted = task.status.toLowerCase() === 'x';

            // Modify the file. This also triggers the background file watcher
            // which will correctly refresh the entire task list after a short delay.
            await this.toggleTaskCompletion(task);

            // --- Provide Instant UI Feedback ---
            // We update the local task object and the DOM immediately so the user
            // sees the change without waiting for the file watcher to finish.

            if (wasCompleted) {
                // If it WAS completed, its new state is INCOMPLETE
                task.status = ' ';
                textEl.classList.remove('completed');
            } else {
                // If it was NOT completed, its new state is COMPLETE
                task.status = 'x';
                textEl.classList.add('completed');
            }

            // Finally, re-render the checkbox symbol itself using the new status
            this._renderTaskSymbol(checkbox, task);
        });

        MarkdownRenderer.render(this.app, task.text, textEl, task.file.path, this);

        taskRow.addEventListener('click', () => this.app.workspace.openLinkText(task.file.path, '', false, { eState: { line: task.lineNumber } }));
        this.addKeydownListeners(taskRow, searchInputEl);

        setTimeout(() => {
            if (this.plugin.settings.taskTextTruncate && textEl.scrollWidth > textEl.clientWidth) {
                const tooltipText = `Task: ${task.text}\n\nFile: ${task.file.path}\nDue: ${task.dueDate ? moment(task.dueDate).format('YYYY-MM-DD') : 'None'}\nTags: ${task.tags.length > 0 ? task.tags.map(t => '#' + t).join(' ') : 'None'}`;
                textEl.setAttribute('aria-label', tooltipText);
            }
        }, 0);

        return taskRow;
    }

    /**
     * Toggles the completion state of a task by modifying the source Markdown file.
     * @param {object} task The task object to toggle.
     */
    async toggleTaskCompletion(task) {
        const content = await this.app.vault.read(task.file);
        const lines = content.split('\n');
        let line = lines[task.lineNumber];

        const completionDateRegex = /\s*‚úÖ\s*\d{4}-\d{2}-\d{2}/;
        const today = moment().format("YYYY-MM-DD");
        const isCompleted = task.status.toLowerCase() === 'x';

        // Find the task marker [.] and replace the character inside
        const taskMarkerRegex = /\[.\]/;

        if (isCompleted) {
            // Mark as incomplete: [x] -> [ ] and remove completion date
            let newLine = line.replace(taskMarkerRegex, '[ ]');
            lines[task.lineNumber] = newLine.replace(completionDateRegex, '').trim();
        } else {
            // Mark as complete: [ ] or [/] or [-] -> [x] and add completion date
            let newLine = line.replace(taskMarkerRegex, '[x]');
            newLine = newLine.replace(completionDateRegex, ''); // Remove any old one first
            lines[task.lineNumber] = `${newLine} ‚úÖ ${today}`;
        }
        await this.app.vault.modify(task.file, lines.join('\n'));
    }

    /**
     * Updates an existing task row in the DOM with new data.
     * @param {HTMLElement} taskRowEl The .task-row element to update.
     * @param {object} task The new task object with updated data.
     */
    updateTaskItem(taskRowEl, task) {
        // Only update if the text content has changed
        const textEl = taskRowEl.querySelector('.task-text');

        // Only update if the status has changed
        if (taskRowEl.dataset.taskStatus !== task.status) {
            const checkbox = taskRowEl.querySelector('.task-checkbox-symbol');
            if (checkbox) {
                this._renderTaskSymbol(checkbox, task);
            }
            taskRowEl.dataset.taskStatus = task.status;

            if (textEl) {
                if (task.status.toLowerCase() === 'x') {
                    textEl.classList.add('completed');
                } else {
                    textEl.classList.remove('completed');
                }
            }
        }

        // A simple check to see if the rendered HTML might be different
        if (textEl && textEl.textContent !== task.text) {
            textEl.empty(); // Clear existing rendered markdown
            MarkdownRenderer.render(this.app, task.text, textEl, task.file.path, this);
        }
    }

    /**
     * Opens the scratchpad note in a new or current tab.
     */
    async openScratchpadFile() {
        const path = this.plugin.settings.fixedNoteFile;
        // First, try to find an already open leaf for this file.
        let targetLeaf = this.app.workspace.getLeavesOfType("markdown").find(leaf => leaf.view.file?.path === path);
        if (targetLeaf) { this.app.workspace.revealLeaf(targetLeaf); return; }

        let file = this.app.vault.getAbstractFileByPath(path);
        // If the file doesn't exist, create it.
        if (!file) file = await this.app.vault.create(path, "").catch(() => new Notice(`Failed to create scratchpad: ${path}`));

        if (file instanceof TFile) this.app.workspace.getLeaf(this.plugin.settings.scratchpadOpenAction === 'new-tab').openFile(file);
    }

    /**
     * Saves text content to the scratchpad note file.
     * @param {string} text The text to save.
     */
    async saveFixedNote(text) {
        const path = this.plugin.settings.fixedNoteFile;
        const folderPath = path.substring(0, path.lastIndexOf("/"));
        // Create parent folder if it doesn't exist.
        if (folderPath && !this.app.vault.getAbstractFileByPath(folderPath)) {
            await this.app.vault.createFolder(folderPath).catch(err => console.error("Error creating folder:", err));
        }
        let file = this.app.vault.getAbstractFileByPath(path);
        if (!file) await this.app.vault.create(path, text);
        else if (file instanceof TFile) await this.app.vault.modify(file, text);
    }

    /**
     * Loads the content of the scratchpad note file.
     * @returns {Promise<string>} The content of the note, or an empty string if it doesn't exist.
     */
    async loadNote() {
        const path = this.plugin.settings.fixedNoteFile;
        const file = this.app.vault.getAbstractFileByPath(path);
        if (file instanceof TFile) return await this.app.vault.read(file);
        return "";
    }

    /**
     * Opens a daily note for a given date, creating it from a template if it doesn't exist.
     * @param {Date} date The date for the daily note.
     */
    async openDailyNote(date) {
        const {
            dailyNotesFolder,
            dailyNoteDateFormat,
            dailyNoteTemplatePath,
            dailyNoteOpenAction
        } = this.plugin.settings;
        const filename = formatDate(date, dailyNoteDateFormat);
        const path = dailyNotesFolder ? `${dailyNotesFolder}/${filename}.md` : `${filename}.md`;

        let file = this.app.vault.getAbstractFileByPath(path);
        if (file) {
            // File already exists, just open it
            const leaf = this.app.workspace.getLeaf(dailyNoteOpenAction === 'new-tab');
            await leaf.openFile(file);
            return;
        }
        // --- File does NOT exist, proceed with creation ---

        // This inner function is now updated to handle Templater correctly
        const createNote = async (includeEvents = false) => {
            //console.log("--- Starting Daily Note Creation ---");
            //console.log(`Creating note with includeEvents: ${includeEvents}`);

            let templateContent = "";
            const templateFile = dailyNoteTemplatePath ? this.app.vault.getAbstractFileByPath(dailyNoteTemplatePath) : null;

            if (templateFile instanceof TFile) {
                templateContent = await this.app.vault.read(templateFile);
                //console.log("Successfully read template file.");
            } else {
                console.warn(`Template file not found at: ${dailyNoteTemplatePath}`);
            }

            // Create the note with the placeholder first
            const newFile = await this.app.vault.create(path, templateContent);
            //console.log(`Created new note at: ${newFile.path}`);

            // Open the note
            const leaf = this.app.workspace.getLeaf(dailyNoteOpenAction === "new-tab");
            await leaf.openFile(newFile);

            const placeholder = this.plugin.settings.calendarEventsPlaceholder || '%%CALENDAR_EVENTS%%';

            // If including events, proceed with injection
            if (includeEvents) {
                //console.log("Waiting for Templater to process...");
                await new Promise(resolve => setTimeout(resolve, 200)); // Delay
                //console.log("...resuming event injection.");

                // 1. Check for events in the map
                const dateKey = moment(date).format("YYYY-MM-DD");
                const eventsForDay = this.icsEventsByDate.get(dateKey);
                //console.log(`Date Key: ${dateKey}`);
                //console.log("Events found for this key:", eventsForDay);

                if (eventsForDay && eventsForDay.length > 0) {
                    // 2. Format the events into a string
                    const eventContent = this.formatEventsForTemplate(eventsForDay) || "";
                    //console.log("Formatted Event Content:\n", eventContent);

                    // 3. Read the file *after* Templater has run
                    let currentContent = await this.app.vault.read(newFile);
                    //console.log(`File content before injection contains placeholder: ${currentContent.includes("%%CALENDAR_EVENTS%%")}`);


                    // 4. Replace placeholder and save
                    if (currentContent.includes(placeholder)) {
                        const finalContent = currentContent.replace(placeholder, eventContent);
                        await this.app.vault.modify(newFile, finalContent);
                        //console.log("Successfully injected events and saved the file.");
                    } else {
                        console.error(`Placeholder "${placeholder}" not found in the note after creation. Templater might be removing it.`);
                    }
                } else {
                    console.warn("No events found for this date, so nothing to inject.");
                }
            }
            // Logic for removing placeholder when includeEvents is false can be added here if needed
            else {
                //console.log("Cleaning up placeholder...");
                await new Promise(resolve => setTimeout(resolve, 200));
                let currentContent = await this.app.vault.read(newFile);
                if (currentContent.includes(placeholder)) {
                    const finalContent = currentContent.replace(placeholder, "").trim();
                    await this.app.vault.modify(newFile, finalContent);
                    //console.log("Placeholder removed.");
                }
            }

            //console.log("--- Daily Note Creation Finished ---");
        };

        const hasTemplate = !!dailyNoteTemplatePath && dailyNoteTemplatePath.length > 0;
        // The rest of your existing logic remains unchanged.
        const dateKey = moment(date).format('YYYY-MM-DD');
        const eventsForDay = this.icsEventsByDate.get(dateKey);
        const friendlyDate = date.toLocaleDateString(undefined, {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });

        if (eventsForDay && eventsForDay.length > 0) {
            // --- Case 1: Events exist for the selected day ---
            new ActionChoiceModal(this.app,
                `Create daily note for ${friendlyDate}?`,
                "This day has calendar events. How would you like to proceed?",
                [{
                    // Button 1: Always includes events
                    text: hasTemplate ? 'Create with Events & Template' : 'Create with Events',
                    cls: 'mod-cta',
                    action: () => createNote(true)
                }, {
                    // Button 2: Excludes events
                    text: hasTemplate ? 'Create from Template Only' : 'Create Blank Note',
                    action: () => createNote(false)
                }, {
                    text: 'Cancel',
                    action: () => { }
                }]
            ).open();
        } else {
            // --- Case 2: No events exist for the selected day ---
            new ActionChoiceModal(this.app,
                'Create daily note?',
                `A daily note for ${friendlyDate} does not exist. Would you like to create it?`,
                [{
                    // The main action button
                    text: hasTemplate ? 'Create from Template' : 'Create Blank Note',
                    cls: 'mod-cta',
                    action: () => createNote(false) // No events to include, so always false
                }, {
                    text: 'Cancel',
                    action: () => { }
                }]
            ).open();
        }
    }

}


/**
 * The main plugin class that registers the view and settings tab.
 */
class PeriodMonthPlugin extends Plugin {


    async onload() {
        this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
        this.addStyle();
        this.updateStyles();
        this.registerView(VIEW_TYPE_PERIOD, leaf => new PeriodMonthView(leaf, this));
        this.addRibbonIcon("calendar-check", "Open Calendar Period Week Notes", () => this.activateView());
        this.addCommand({ id: "open-period-month-view", name: "Open Calendar Period Week Notes", callback: () => this.activateView() });
        await this.resetIcsRefreshInterval();
        this.addSettingTab(new PeriodSettingsTab(this.app, this));
        this.activateView();
        this.icsRefreshIntervalId = null;
    }

    async saveSettings() {
        await this.saveData(this.settings);
    }

    /**
     * Injects the plugin's CSS into the document head.
     */
    addStyle() {
        const styleEl = document.createElement('style');
        styleEl.id = 'period-month-plugin-styles';
        styleEl.textContent = PLUGIN_STYLES;
        document.head.appendChild(styleEl);
    }

    /**
     * Updates CSS custom properties (variables) based on the current plugin settings.
     */
    updateStyles() {
        const styleProps = {
            '--header-font-size': this.settings.fontSize,
            '--day-number-font-size': this.settings.dayNumberFontSize,
            '--header-row-font-weight': this.settings.headerRowBold ? 'bold' : 'normal',
            '--pw-column-font-weight': this.settings.pwColumnBold ? 'bold' : 'normal',
            '--month-color-light': this.settings.monthColorLight,
            '--month-color-dark': this.settings.monthColorDark,
            '--pw-separator-color': this.settings.pwColumnSeparatorColor,
            '--pw-column-font-color-light': this.settings.pwColumnFontColorLight,
            '--pw-column-font-color-dark': this.settings.pwColumnFontColorDark,
            '--week-number-font-color-light': this.settings.weekNumberFontColorLight,
            '--week-number-font-color-dark': this.settings.weekNumberFontColorDark,
            '--day-header-font-color-light': this.settings.dayHeaderFontColorLight,
            '--day-header-font-color-dark': this.settings.dayHeaderFontColorDark,
            '--day-cell-font-color-light': this.settings.dayCellFontColorLight,
            '--day-cell-font-color-dark': this.settings.dayCellFontColorDark,
            '--other-month-font-color-light': this.settings.otherMonthFontColorLight,
            '--other-month-font-color-dark': this.settings.otherMonthFontColorDark,
            '--scratch-font-family': this.settings.scratchFontFamily,
            '--scratch-font-size': this.settings.scratchFontSize,
            '--scratch-bold': this.settings.scratchBold ? 'bold' : 'normal',
            '--notes-font-size': this.settings.notesFontSize,
            '--notes-bold': this.settings.notesBold ? 'bold' : 'normal',
            '--tab-title-font-size': this.settings.tabTitleFontSize,
            '--tab-title-bold': this.settings.tabTitleBold ? 'bold' : 'normal',
            '--notes-line-height': this.settings.notesLineHeight,
            '--selected-tab-color': this.settings.selectedTabColor,
            '--today-highlight-color-light': this.settings.todayHighlightColorLight,
            '--today-highlight-color-dark': this.settings.todayHighlightColorDark,
            '--notes-hover-color': this.settings.notesHoverColor,
            '--daily-note-dot-color': this.settings.dailyNoteDotColor,
            '--note-created-color': this.settings.noteCreatedColor,
            '--note-modified-color': this.settings.noteModifiedColor,
            '--other-note-dot-color': this.settings.otherNoteDotColor,
            '--calendar-grid-gap-width': this.settings.calendarGridGapWidth,
            '--calendar-modified-dot-color': this.settings.calendarModifiedDotColor,
            '--other-note-popup-font-size': this.settings.otherNotePopupFontSize,
            '--calendar-dot-size': this.settings.calendarDotSize + 'px',
            '--nav-button-height': this.settings.navButtonHeight,
            '--date-cell-hover-color-light': this.settings.dateCellHoverColorLight,
            '--date-cell-hover-color-dark': this.settings.dateCellHoverColorDark,
            '--main-month-year-title-font-size': this.settings.mainMonthYearTitleFontSize,
            '--main-month-year-title-weight': this.settings.mainMonthYearTitleBold ? 'bold' : 'normal',
            '--task-heading-font-size': this.settings.taskHeadingFontSize,
            '--task-text-font-size': this.settings.taskTextFontSize,
            '--scratchpad-highlight-color': this.settings.scratchpadHighlightColor,
            '--asset-dot-color': this.settings.assetDotColor,
            '--calendar-event-dot-color': this.settings.calendarEventDotColor,
            '--task-dot-color': this.settings.taskDotColor,
            '--task-badge-color': this.settings.taskBadgeColor,
            '--task-badge-font-color': this.settings.taskBadgeFontColor,
            '--task-badge-font-size': this.settings.taskBadgeFontSize,
            '--today-circle-color': this.settings.todayCircleColor,
            '--weekly-note-dot-color': this.settings.weeklyNoteDotColor,
            '--weekend-shade-color-light': this.settings.weekendShadeColorLight,
            '--weekend-shade-color-dark': this.settings.weekendShadeColorDark,
            '--weekly-note-dot-color': this.settings.weeklyNoteDotColor,
        };

        for (const key in styleProps) {
            document.documentElement.style.setProperty(key, styleProps[key]);
        }
    }

    /**
     * Opens the plugin view in a new leaf or reveals it if it's already open.
     */
    async activateView() {
        const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_PERIOD);
        if (leaves.length > 0) {
            this.app.workspace.revealLeaf(leaves[0]);
            return;
        }
        const leaf = this.app.workspace.getRightLeaf(false);
        await leaf.setViewState({ type: VIEW_TYPE_PERIOD, active: true });
        this.app.workspace.revealLeaf(leaf);
    }

    async resetIcsRefreshInterval() {
        // If there's an old interval running, clear it first
        if (this.icsRefreshIntervalId !== null) {
            window.clearInterval(this.icsRefreshIntervalId);
        }

        const intervalMinutes = this.settings.icsRefreshInterval;

        if (intervalMinutes > 0) {
            const intervalMilliseconds = intervalMinutes * 60 * 1000;

            this.icsRefreshIntervalId = this.registerInterval(
                window.setInterval(async () => {
                    console.log(`Periodic Notes: Automatically refreshing ICS feed (interval: ${intervalMinutes} minutes).`);

                    // We need to find the view to call its refresh method
                    const views = this.app.workspace.getLeavesOfType(VIEW_TYPE_PERIOD);
                    for (const leaf of views) {
                        if (leaf.view && leaf.view.refreshIcsEvents) {
                            await leaf.view.refreshIcsEvents();
                        }
                    }
                }, intervalMilliseconds)
            );
        }
    }


    onunload() {
        // Clean up when the plugin is disabled.
        const styleEl = document.getElementById('period-month-plugin-styles');
        if (styleEl) styleEl.remove();
        this.app.workspace.getLeavesOfType(VIEW_TYPE_PERIOD).forEach(leaf => leaf.detach());
    }
}

/**
 * The settings tab class for the plugin, responsible for building the settings UI.
 */
class PeriodSettingsTab extends PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
        this.activeTab = 'general'; // Default tab
        this.scrollPosition = 0;
    }

    refreshDisplay() {
        if (this.contentEl) {
            this.scrollPosition = this.contentEl.scrollTop;
        }
        this.display();
    }

    async hide() {
        // This function runs automatically when the user closes the settings tab.

        // Get all open views of your calendar type
        const views = this.app.workspace.getLeavesOfType(VIEW_TYPE_PERIOD);

        if (views.length > 0) {
            // Tell each open calendar view to re-render itself
            for (const leaf of views) {
                if (leaf.view instanceof PeriodMonthView) { // Assuming your view class is PeriodMonthView
                    // Calling renderCalendar() will redraw the view with the latest settings
                    await leaf.view.renderCalendar();
                }
            }
        }
    }

    /**
     * A helper function to save settings and trigger a full UI refresh in any open views.
     */
    async saveAndUpdate() {
        await this.plugin.saveData(this.plugin.settings);
        this.plugin.updateStyles();
        this.plugin.app.workspace.getLeavesOfType(VIEW_TYPE_PERIOD).forEach(leaf => {
            if (leaf.view instanceof PeriodMonthView) {
                leaf.view.rebuildAndRender();
            }
        });
    }

    /**
     * Parses an rgba() string into a hex color and an alpha value.
     * @param {string} rgbaString The input string (e.g., "rgba(255, 165, 0, 0.4)").
     * @returns {{color: string, alpha: number}}
     */
    parseRgba(rgbaString) {
        if (!rgbaString) return { color: '#000000', alpha: 1 };
        const match = rgbaString.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);
        if (!match) return { color: '#000000', alpha: 1 };
        const toHex = (c) => ('0' + parseInt(c, 10).toString(16)).slice(-2);
        const color = `#${toHex(match[1])}${toHex(match[2])}${toHex(match[3])}`;
        const alpha = match[4] !== undefined ? parseFloat(match[4]) : 1;
        return { color, alpha };
    }

    /**
     * Builds an rgba() string from a hex color and an alpha value.
     * @param {string} hex The hex color string (e.g., "#ffa500").
     * @param {number} alpha The alpha value (0 to 1).
     * @returns {string} The rgba string.
     */
    buildRgba(hex, alpha) {
        const r = parseInt(hex.slice(1, 3), 16);
        const g = parseInt(hex.slice(3, 5), 16);
        const b = parseInt(hex.slice(5, 7), 16);
        return `rgba(${r}, ${g}, ${b}, ${alpha.toFixed(2)})`;
    }

    /**
     * Creates a custom setting component with a color picker and an alpha slider.
     * @param {string} name The setting name.
     * @param {string} desc The setting description.
     * @param {string} settingKey The key in the settings object to modify.
     */
    createRgbaColorSetting(containerEl, name, desc, settingKey) {
        const setting = new Setting(containerEl)
            .setName(name)
            .setDesc(desc);

        let colorPicker;
        let slider;

        const initialValue = this.plugin.settings[settingKey] || DEFAULT_SETTINGS[settingKey];
        const { color: initialColor, alpha: initialAlpha } = this.parseRgba(initialValue);

        setting.addColorPicker(picker => {
            colorPicker = picker;
            picker.setValue(initialColor)
                .onChange(async (newColor) => {
                    const currentAlpha = slider ? slider.getValue() : 1;
                    const newRgba = this.buildRgba(newColor, currentAlpha);
                    this.plugin.settings[settingKey] = newRgba;
                    if (picker.colorEl) picker.colorEl.style.backgroundColor = newRgba;
                    await this.saveAndUpdate();
                });
        });

        setting.addSlider(sliderComponent => {
            slider = sliderComponent;
            slider.setLimits(0, 1, 0.05)
                .setValue(initialAlpha)
                .setDynamicTooltip()
                .onChange(async (newAlpha) => {
                    const currentColor = colorPicker ? colorPicker.getValue() : '#000000';
                    const newRgba = this.buildRgba(currentColor, newAlpha);
                    this.plugin.settings[settingKey] = newRgba;
                    if (colorPicker && colorPicker.colorEl) {
                        colorPicker.colorEl.style.backgroundColor = newRgba;
                    }
                    await this.saveAndUpdate();
                });
        });

        if (colorPicker && colorPicker.colorEl) {
            colorPicker.colorEl.style.backgroundColor = initialValue;
        }

        setting.addExtraButton(button => {
            button.setIcon("rotate-ccw").setTooltip("Reset to default").onClick(async () => {
                const defaultValue = DEFAULT_SETTINGS[settingKey];
                this.plugin.settings[settingKey] = defaultValue;

                const { color, alpha } = this.parseRgba(defaultValue);

                if (colorPicker) {
                    colorPicker.setValue(color);
                    if (colorPicker.colorEl) {
                        colorPicker.colorEl.style.backgroundColor = defaultValue;
                    }
                }
                if (slider) {
                    slider.setValue(alpha);
                }

                await this.saveAndUpdate();
            });
        });
    }

    /**
     * Creates a simple path suggestion popup for a text input element.
     * @param {HTMLInputElement} inputEl The input element to attach the suggester to.
     * @param {(query: string) => string[]} getSuggestions A function that returns a list of suggestion strings based on a query.
     */
    createPathSuggester(inputEl, getSuggestions) {
        const suggestionEl = createDiv({ cls: 'custom-suggestion-container' });
        suggestionEl.style.display = 'none';
        inputEl.parentElement.appendChild(suggestionEl);
        const showSuggestions = () => {
            const query = inputEl.value.toLowerCase();
            const suggestions = getSuggestions(query);
            suggestionEl.empty();
            if (suggestions.length === 0) {
                suggestionEl.style.display = 'none';
                return;
            }
            suggestionEl.style.display = 'block';
            suggestions.slice(0, 10).forEach(path => {
                const item = suggestionEl.createDiv({ cls: 'custom-suggestion-item', text: path });
                item.addEventListener('mousedown', (e) => {
                    e.preventDefault();
                    inputEl.value = path;
                    inputEl.dispatchEvent(new Event('input'));
                    suggestionEl.style.display = 'none';
                });
            });
        };
        inputEl.addEventListener('input', showSuggestions);
        inputEl.addEventListener('focus', showSuggestions);
        inputEl.addEventListener('blur', () => setTimeout(() => { suggestionEl.style.display = 'none'; }, 150));
    }

    /**
     * Creates a settings section for managing a list of ignored folder paths.
     * @param {HTMLElement} containerEl The parent container for this setting section.
     * @param {string} name The heading name for the section.
     * @param {string} desc The description for the section.
     * @param {string} settingKey The key in the settings object for the ignored folder array.
     */
    createIgnoredFolderList(containerEl, name, desc, settingKey) {
        new Setting(containerEl).setName(name).setDesc(desc).setHeading();
        const ignoredFolders = this.plugin.settings[settingKey];
        if (ignoredFolders && ignoredFolders.length > 0) {
            ignoredFolders.forEach((folder, index) => {
                new Setting(containerEl).setName(folder).addButton(button => {
                    button.setIcon("trash").setTooltip("Remove folder")
                        .onClick(async () => {
                            this.plugin.settings[settingKey].splice(index, 1);
                            await this.saveAndUpdate();
                            this.refreshDisplay();
                        });
                });
            });
        } else {
            containerEl.createEl('p', { text: 'No folders are being ignored.', cls: 'setting-item-description' });
        }
        const addSetting = new Setting(containerEl);
        let textInput;
        addSetting.addText(text => {
            textInput = text;
            const getFolders = (query) => this.app.vault.getAllLoadedFiles().filter(f => f instanceof TFolder && (!query || f.path.toLowerCase().includes(query))).map(f => f.path);
            this.createPathSuggester(text.inputEl, getFolders);
            text.setPlaceholder("Enter folder path to ignore...");
        }).addButton(button => {
            button.setButtonText("Add").setTooltip("Add this folder to the ignore list")
                .onClick(async () => {
                    const newFolder = textInput.getValue();
                    if (newFolder && !this.plugin.settings[settingKey].includes(newFolder)) {
                        this.plugin.settings[settingKey].push(newFolder);
                        await this.saveAndUpdate();
                        this.refreshDisplay();
                    }
                });
        });
    }

    display() {
        const { containerEl } = this;
        containerEl.empty();

        // Main container for the tabbed layout
        const settingsContainer = containerEl.createDiv({ cls: "period-settings-container" });
        const navEl = settingsContainer.createDiv({ cls: "period-settings-nav" });
        this.contentEl = settingsContainer.createDiv({ cls: "period-settings-content" });
        this.renderPinnedNotesSettings(this.containerEl);

        const tabs = {
            general: "General Display",
            functional: "Calendar Functional",
            dots: "Calendar Dots",
            weeklyNotes: "Weekly Notes",
            tasksIndicator: "Task Indicators",
            tabs: "General Tab",
            scratchpad: "ScratchPad Tab",
            notes: "Notes Tab",
            pinned: 'Pinned Notes Tab',
            assets: "Assets Tab",
            tasks: "Tasks Tab",
            importExport: "Import / Export",
            startHere: "Help",
            about: "About"
        };

        // Create navigation buttons
        for (const [key, name] of Object.entries(tabs)) {
            const navButton = navEl.createEl('button', {
                text: name,
                cls: 'period-settings-nav-button'
            });
            if (this.activeTab === key) {
                navButton.addClass('is-active');
            }
            navButton.addEventListener('click', () => {
                this.activeTab = key;
                // Re-render the entire display to update active state and content
                this.refreshDisplay();
            });
        }

        // Render the content for the active tab
        this.renderContentForActiveTab();
        // Restore scroll position after re-rendering
        if (this.contentEl && this.scrollPosition) {
            this.contentEl.scrollTop = this.scrollPosition;
        }
    }

    /*renderPinnedNotesSettings(containerEl) {
        //v2
        containerEl.createEl('h2', { text: 'Pinned Notes' });

        // Setting to choose the default sort order
        new Setting(containerEl)
            .setName('Default sort order for pinned notes')
                .setDesc('Choose the default sort order for pinned notes when the plugin is loaded. To change the order click on the PINNED NOTES title in the main view.')

            .setDesc("Choose whether to sort pinned notes alphabetically or by your custom order by default.")
            .addDropdown(dropdown => dropdown
                .addOption('a-z', 'A-Z (Default)')
                .addOption('custom', 'Custom Order')
                .setValue(this.plugin.settings.pinnedNotesSortOrder)
                .onChange(async (value) => {
                    this.plugin.settings.pinnedNotesSortOrder = value;
                    await this.plugin.saveSettings();
                    //this.refreshDisplay(); // Refresh the settings view
                }));

        // ADD THIS NEW SETTING HERE:
        const isMac = Platform.isMacOS;
        const modifierKey = isMac ? 'Option (‚å•)' : 'Ctrl';

        new Setting(containerEl)
            .setName('Change sort order in main view')
            .setDesc(`Click the "PINNED NOTES" header in the main view to cycle between A-Z, Z-A, and Custom sort orders.\n\nWhen in Custom order, hold ${modifierKey} and drag notes to reorder them.`);


        // UI for managing the custom order
        new Setting(containerEl)
            .setName('Set Custom Order')
            .setDesc('Drag and drop notes to arrange them. This order is used when "Custom Order" is selected.');

        const draggableContainer = containerEl.createDiv('pinned-notes-order-container');
        this.renderDraggablePinnedNotes(draggableContainer);
    }
        */

    // Function to render the draggable list of pinned notes
    async renderDraggablePinnedNotes(container) {
        container.empty();

        const pinValue = this.plugin.settings.pinTag.toLowerCase();
        const allMarkdownFiles = this.app.vault.getMarkdownFiles();

        // Filter for pinned notes (using your existing logic)
        const pinnedNotes = allMarkdownFiles.filter(file => {
            const cache = this.app.metadataCache.getFileCache(file);
            if (!cache) return false;

            // Check tags
            const hasPinTag = cache.tags?.some(tag => tag.tag.toLowerCase().includes(pinValue));
            if (hasPinTag) return true;

            // Check frontmatter
            const frontmatter = cache.frontmatter;
            if (frontmatter) {
                for (const key in frontmatter) {
                    const value = frontmatter[key];
                    if (typeof value === 'string' && value.toLowerCase().includes(pinValue)) return true;
                    if (Array.isArray(value) && value.some(item => typeof item === 'string' && item.toLowerCase().includes(pinValue))) return true;
                }
            }
            return false;
        });

        const customOrder = this.plugin.settings.pinnedNotesCustomOrder || [];

        // Sort the notes based on the saved custom order, with a fallback for new notes
        pinnedNotes.sort((a, b) => {
            const indexA = customOrder.indexOf(a.path);
            const indexB = customOrder.indexOf(b.path);

            if (indexA === -1 && indexB === -1) return a.basename.localeCompare(b.basename);
            if (indexA === -1) return 1;
            if (indexB === -1) return -1;
            return indexA - indexB;
        });

        // Create draggable elements
        pinnedNotes.forEach(file => {
            const itemEl = container.createDiv({ cls: 'draggable-item' });
            itemEl.draggable = true;
            itemEl.dataset.filePath = file.path;

            const handle = itemEl.createDiv({ cls: 'drag-handle' });
            setIcon(handle, 'grip-vertical');
            itemEl.createSpan({ text: file.basename });

            // Drag-and-Drop Event Listeners
            itemEl.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('text/plain', file.path);
                itemEl.classList.add('dragging');
            });

            itemEl.addEventListener('dragend', () => {
                itemEl.classList.remove('dragging');
            });

            itemEl.addEventListener('dragover', (e) => {
                e.preventDefault();
                const draggingItem = container.querySelector('.dragging');
                if (draggingItem && draggingItem !== itemEl) {
                    const rect = itemEl.getBoundingClientRect();
                    const isAfter = e.clientY > rect.top + rect.height / 2;
                    if (isAfter) {
                        itemEl.parentNode.insertBefore(draggingItem, itemEl.nextSibling);
                    } else {
                        itemEl.parentNode.insertBefore(draggingItem, itemEl);
                    }
                }
            });
        });

        // Save the new order on drop (by listening on the container)
        container.addEventListener('drop', async () => {
            const newOrder = Array.from(container.children).map(child => child.dataset.filePath);
            this.plugin.settings.pinnedNotesCustomOrder = newOrder;
            await this.plugin.saveSettings();
            new Notice('Custom pinned order saved!');
        });
    }

    renderContentForActiveTab() {
        this.contentEl.empty();
        switch (this.activeTab) {
            case 'general':
                this.renderGeneralSettings();
                break;
            case 'functional':
                this.renderFunctionalSettings();
                break;
            case 'dots':
                this.renderDotsSettings();
                break;
            case 'weeklyNotes':
                this.renderWeeklyNotesSettings();
                break;
            case 'tasksIndicator':
                this.renderTaskIndicatorSettings();
                break;
            case 'tabs':
                this.renderTabsSettings();
                break;
            case 'scratchpad':
                this.renderScratchpadSettings();
                break;
            case 'notes':
                this.renderNotesSettings();
                break;
            case 'pinned':
                this.renderPinnedNotesSettings();
                break;
            case 'assets':
                this.renderAssetsSettings();
                break;
            case 'tasks':
                this.renderTasksSettings();
                break;
            case 'importExport':
                this.renderImportExportTab();
                break;
            case 'startHere':
                this.renderStartHereTab();
                break;
            case 'about':
                this.renderAboutTab();
                break;
        }
    }

    // --- RENDER METHODS FOR EACH TAB ---
    renderGeneralSettings() {
        const containerEl = this.contentEl;
        containerEl.empty();

        containerEl.createEl("h1", { text: "General Display Settings" });

        // --- Titles & Headers Section ---
        new Setting(containerEl).setName("Titles & Headers").setHeading();
        const monthTitleSetting = new Setting(containerEl).setName("Month title format");
        monthTitleSetting.descEl.innerHTML = `
            Set the format for the calendar's month title. Uses <a href="https://momentjs.com/docs/#/displaying/format/">moment.js</a> format strings, e.g.
            <br><code>YYYY</code>: 4-digit year (e.g., 2025)
            <br><code>YY</code>: 2-digit year (e.g., 25)
            <br><code>MMMM</code>: Full month name (e.g., September)
            <br><code>MMM</code>: Short month name (e.g., Sep)
            <br><code>MM</code>: 2-digit month (e.g., 09)
            <br><code>M</code>: Month number (e.g., 9)
        `;

        monthTitleSetting.addText(text => text.setPlaceholder("MMMM YYYY").setValue(this.plugin.settings.monthTitleFormat).onChange(async (value) => { this.plugin.settings.monthTitleFormat = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Month title font size").setDesc("Font size for the main 'Month Year' title at the top of the calendar. Default is 20px.").addText(text => text.setValue(this.plugin.settings.mainMonthYearTitleFontSize).onChange(async value => { this.plugin.settings.mainMonthYearTitleFontSize = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Bold month title").setDesc("Toggles bold font weight for the main 'Month Year' title.").addToggle(toggle => toggle.setValue(this.plugin.settings.mainMonthYearTitleBold).onChange(async value => { this.plugin.settings.mainMonthYearTitleBold = value; await this.saveAndUpdate(); }));
        this.createRgbaColorSetting(containerEl, "Month Title Color (Light Mode)", "Color for the main 'Month Year' title in light mode.", "monthColorLight");
        this.createRgbaColorSetting(containerEl, "Month Title Color (Dark Mode)", "Color for the main 'Month Year' title in dark mode.", "monthColorDark");
        new Setting(containerEl).setName("Navigation buttons height").setDesc("Default is 28px.").addText(text => text.setValue(this.plugin.settings.navButtonHeight).onChange(async value => { this.plugin.settings.navButtonHeight = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Bold calendar header").setDesc("Toggles bold font weight for the day names row (Mon, Tue, etc.).").addToggle(toggle => toggle.setValue(this.plugin.settings.headerRowBold).onChange(async value => { this.plugin.settings.headerRowBold = value; await this.saveAndUpdate(); }));
        this.createRgbaColorSetting(containerEl, "Day header row font color (Light Mode)", "Text color for the day names (Sun, Mon, Tue, etc.) in light theme.", "dayHeaderFontColorLight");
        this.createRgbaColorSetting(containerEl, "Day header row font color (Dark Mode)", "Text color for the day names (Sun, Mon, Tue, etc.) in dark theme.", "dayHeaderFontColorDark");

        // --- Calendar Grid Section ---
        new Setting(containerEl).setName("Calendar Grid").setHeading();

        // THIS IS YOUR MISSING SETTING, NOW RESTORED
        new Setting(containerEl)
            .setName("Calendar grid layout")
            .setDesc("Choose between a spacious, normal or condensed layout for the calendar grid.")
            .addDropdown(dropdown => dropdown
                .addOption('spacious', 'Spacious')
                .addOption('normal', 'Normal')
                .addOption('condensed', 'Condensed')
                .setValue(this.plugin.settings.calendarLayout)
                .onChange(async (value) => {
                    this.plugin.settings.calendarLayout = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName('Calendar grid labels font size')
            .setDesc('Font size for calendar day lables and week, period/week columns. Default is 12px.')
            .addText(text => text
                .setValue(this.plugin.settings.fontSize)
                .onChange(async (value) => {
                    this.plugin.settings.fontSize = value;
                    await this.saveAndUpdate();
                }));
        new Setting(containerEl).setName("Calendar grid day numbers font size").setDesc("Font size for the day numbers in the calendar grid. Default is 15px.").addText(text => text.setValue(this.plugin.settings.dayNumberFontSize).onChange(async value => { this.plugin.settings.dayNumberFontSize = value; await this.saveAndUpdate(); }));
        this.createRgbaColorSetting(containerEl, "Date cell font color (Light Mode)", "Text color for the date numbers in light theme.", "dayCellFontColorLight");
        this.createRgbaColorSetting(containerEl, "Date cell font color (Dark Mode)", "Text color for the date numbers in dark theme.", "dayCellFontColorDark");
        this.createRgbaColorSetting(containerEl, "Other month date font color (Light Mode)", "Text color for dates outside the current month in light theme.", "otherMonthFontColorLight");
        this.createRgbaColorSetting(containerEl, "Other month date font color (Dark Mode)", "Text color for dates outside the current month in dark theme.", "otherMonthFontColorDark");

        new Setting(containerEl).setName("Show calendar grid lines").setDesc("Toggles the visibility of border lines around each date cell.").addToggle(toggle => toggle.setValue(this.plugin.settings.showCalendarGridLines).onChange(async value => { this.plugin.settings.showCalendarGridLines = value; await this.saveAndUpdate(); }));
        new Setting(containerEl)
            .setName("Calendar grid gap width")
            .setDesc("Width of the gap/border between calendar cells. The grid lines setting above needs to be toggled on. (e.g., 1px, 2px, 0.5px). Default is 1px.")
            .addText(text => text
                .setPlaceholder("1px")
                .setValue(this.plugin.settings.calendarGridGapWidth)
                .onChange(async (value) => {
                    this.plugin.settings.calendarGridGapWidth = value || "1px";
                    await this.saveAndUpdate();
                }));



        // --- Corrected Dynamic "Today's date style" Section ---
        const todayStyleSetting = new Setting(containerEl)
            .setName("Today's date style")
            .setDesc("Choose how to indicate the current day on the calendar.");

        const highlightOptionsContainer = containerEl.createDiv();

        const renderHighlightOptions = (style) => {
            highlightOptionsContainer.empty();
            if (style === 'cell') {
                this.createRgbaColorSetting(highlightOptionsContainer, "Todays Date Highlight (Light Mode)", "Background color for the current day's cell in light mode.", "todayHighlightColorLight");
                this.createRgbaColorSetting(highlightOptionsContainer, "Todays Date Highlight (Dark Mode)", "Background color for the current day's cell in dark mode.", "todayHighlightColorDark");
            } else if (style === 'circle' || style === 'number') {
                this.createRgbaColorSetting(highlightOptionsContainer, "Today's Highlight Color", "Controls the highlight for the 'Circle' and 'Square' styles.", "todayCircleColor");
            }
        };

        todayStyleSetting.addDropdown(dropdown => {
            dropdown
                .addOption('none', 'Off (No Highlight)')
                .addOption('cell', 'Highlight Cell')
                .addOption('circle', 'Circle Around Date')
                .addOption('number', 'Square Around Date')
                .setValue(this.plugin.settings.todayHighlightStyle)
                .onChange(async (value) => {
                    this.plugin.settings.todayHighlightStyle = value;
                    await this.saveAndUpdate();
                    renderHighlightOptions(value);
                });
        });

        renderHighlightOptions(this.plugin.settings.todayHighlightStyle);
        // --- End of Corrected Section ---

        new Setting(containerEl).setName("Highlight today's day header").setDesc("Colors the day column header (Sun, Mon, etc.) containing today.").addToggle(toggle => toggle.setValue(this.plugin.settings.highlightTodayDayHeader).onChange(async value => { this.plugin.settings.highlightTodayDayHeader = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Highlight today's P/W or week number").setDesc("Colors the Period/Week or Calendar Week number for the current week.").addToggle(toggle => toggle.setValue(this.plugin.settings.highlightTodayPWLabel).onChange(async value => { this.plugin.settings.highlightTodayPWLabel = value; await this.saveAndUpdate(); }));
        this.createRgbaColorSetting(containerEl, "Date Cell Hover Color (Light Mode)", "Background color when hovering over a date cell in light mode.", "dateCellHoverColorLight");
        this.createRgbaColorSetting(containerEl, "Date Cell Hover Color (Dark Mode)", "Background color when hovering over a date cell in dark mode.", "dateCellHoverColorDark");
        new Setting(containerEl).setName("Bold Period/Week column").setDesc("Toggles bold font weight for the Period/Week column.").addToggle(toggle => toggle.setValue(this.plugin.settings.pwColumnBold).onChange(async value => { this.plugin.settings.pwColumnBold = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Show P/W separator line").setDesc("Display a vertical line between the week columns and the date grid.").addToggle(toggle => toggle.setValue(this.plugin.settings.showPWColumnSeparator).onChange(async value => { this.plugin.settings.showPWColumnSeparator = value; await this.saveAndUpdate(); }));
        this.createRgbaColorSetting(containerEl, "P/W separator line color", "Color of the vertical separator line.", "pwColumnSeparatorColor");
        this.createRgbaColorSetting(containerEl, "Period/Week column font color (Light Mode)", "Text color for the Period/Week column in light theme.", "pwColumnFontColorLight");
        this.createRgbaColorSetting(containerEl, "Period/Week column font color (Dark Mode)", "Text color for the Period/Week column in dark theme.", "pwColumnFontColorDark");
        this.createRgbaColorSetting(containerEl, "Week number column font color (Light Mode)", "Text color for the week number column in light theme.", "weekNumberFontColorLight");
        this.createRgbaColorSetting(containerEl, "Week number column font color (Dark Mode)", "Text color for the week number column in dark theme.", "weekNumberFontColorDark");
    }



    renderFunctionalSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Calendar Functional Settings" });

        // --- Period/Week System Section ---
        new Setting(containerEl).setName("Period/Week System").setHeading();

        new Setting(containerEl)
            .setName("Week starts on")
            .setDesc("Choose whether the calendar week starts on Sunday or Monday.")
            .addDropdown(dropdown => dropdown
                .addOption('monday', 'Monday')
                .addOption('sunday', 'Sunday')
                .setValue(this.plugin.settings.weekStartDay)
                .onChange(async (value) => {
                    this.plugin.settings.weekStartDay = value;
                    await this.saveAndUpdate();
                    // Refresh the settings tab to show the updated validation message
                    this.refreshDisplay();
                }));

        const requiredDay = this.plugin.settings.weekStartDay === 'monday' ? 1 : 0; // Monday is 1, Sunday is 0
        const requiredDayName = this.plugin.settings.weekStartDay.charAt(0).toUpperCase() + this.plugin.settings.weekStartDay.slice(1);

        new Setting(containerEl)
            .setName("Start of Period 1 Week 1")
            .setDesc(`The date for the start of P1W1. This date MUST be a ${requiredDayName} to match your 'Week starts on' setting.`) // Dynamic description
            .addText(text => {
                text.inputEl.type = "date";
                text.setValue(this.plugin.settings.startOfPeriod1Date)
                    .onChange(async value => {
                        const selectedDate = moment(value, "YYYY-MM-DD");
                        if (selectedDate.day() !== requiredDay) {
                            new Notice(`Error: The start date must be a ${requiredDayName}.`, 5000);
                            return; // Do not save the invalid date
                        }
                        this.plugin.settings.startOfPeriod1Date = value;
                        await this.saveAndUpdate();
                    });
            });

        new Setting(containerEl).setName("Period/Week format").setDesc("Choose the display format for the P/W column.").addDropdown(dropdown => dropdown.addOption("P#W#", "P#W#").addOption("P# W#", "P# W#").addOption("# W#", "# W#").addOption("p#w#", "p#p#").addOption("p# w#", "p# w#").addOption("# w#", "# w#").addOption("#-#", "#-#").addOption("# - #", "# - #").addOption("#/#", "#/#").addOption("# / #", "# / #").addOption("#,#", "#,#").addOption("#, #", "#, #").setValue(this.plugin.settings.pwFormat).onChange(async (value) => { this.plugin.settings.pwFormat = value; await this.saveAndUpdate(); }));

        new Setting(containerEl).setName("Show Period/Week column").setDesc("Show or hide the Period/Week column on the left side of the calendar.").addToggle(toggle => toggle.setValue(this.plugin.settings.showPWColumn).onChange(async value => { this.plugin.settings.showPWColumn = value; await this.saveAndUpdate(); }));

        // --- Week Numbers Section ---
        new Setting(containerEl).setName("Week Numbers").setHeading();

        new Setting(containerEl)
            .setName("Show week number column")
            .setDesc("Display a column for week numbers on the left side of the calendar.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.showWeekNumbers)
                .onChange(async (value) => {
                    this.plugin.settings.showWeekNumbers = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Week number type")
            .setDesc("Choose which week numbering system to use.")
            .addDropdown(dropdown => dropdown
                .addOption('period', 'Period System Week')
                .addOption('calendar', 'Calendar Year Week (ISO)')
                .setValue(this.plugin.settings.weekNumberType)
                .onChange(async (value) => {
                    this.plugin.settings.weekNumberType = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Week number column label")
            .setDesc("The text to display at the top of the week number column.")
            .addText(text => text
                .setValue(this.plugin.settings.weekNumberColumnLabel)
                .onChange(async (value) => {
                    this.plugin.settings.weekNumberColumnLabel = value;
                    await this.saveAndUpdate();
                }));

        // --- Daily Notes Section ---
        new Setting(containerEl).setName("Daily Notes").setHeading();
        new Setting(containerEl).setName("Daily Notes folder").setDesc("Specify the folder where your daily notes are stored and created.").addText(text => { this.createPathSuggester(text.inputEl, (q) => this.app.vault.getAllLoadedFiles().filter(f => f instanceof TFolder && (!q || f.path.toLowerCase().includes(q))).map(f => f.path)); text.setValue(this.plugin.settings.dailyNotesFolder).onChange(async value => { this.plugin.settings.dailyNotesFolder = value; await this.saveAndUpdate(); }); });
        new Setting(containerEl).setName("Daily Note open behavior").addDropdown(dropdown => dropdown.addOption('new-tab', 'Open in a new tab').addOption('current-tab', 'Open in the current tab').setValue(this.plugin.settings.dailyNoteOpenAction).onChange(async (value) => { this.plugin.settings.dailyNoteOpenAction = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Daily note template").setDesc("Path to a template file to use when creating a new daily note.").addText(text => { this.createPathSuggester(text.inputEl, (q) => this.app.vault.getMarkdownFiles().filter(f => !q || f.path.toLowerCase().includes(q)).map(f => f.path)); text.setPlaceholder("Example: Templates/Daily.md").setValue(this.plugin.settings.dailyNoteTemplatePath).onChange(async (value) => { this.plugin.settings.dailyNoteTemplatePath = value; await this.saveAndUpdate(); }); });

        // --- Grid Highlighting Section ---
        new Setting(containerEl).setName("Grid Highlighting").setHeading();
        new Setting(containerEl).setName("Enable row highlight").setDesc("Highlights the entire week's row when hovering over the P/W label.").addToggle(toggle => toggle.setValue(this.plugin.settings.enableRowHighlight).onChange(async (value) => { this.plugin.settings.enableRowHighlight = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Enable column highlight").setDesc("Highlights the entire day's column when hovering over the day name (e.g., Mon).").addToggle(toggle => toggle.setValue(this.plugin.settings.enableColumnHighlight).onChange(async (value) => { this.plugin.settings.enableColumnHighlight = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Enable complex grid highlight").setDesc("When hovering a date, highlights all cells in its row and column up to that date.").addToggle(toggle => toggle.setValue(this.plugin.settings.enableRowToDateHighlight).onChange(async (value) => { this.plugin.settings.enableRowToDateHighlight = value; await this.saveAndUpdate(); }));




        new Setting(containerEl)
            .setName("Always highlight current week")
            .setDesc("Keeps the entire row for the current week permanently highlighted.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.highlightCurrentWeek)
                .onChange(async (value) => {
                    this.plugin.settings.highlightCurrentWeek = value;
                    await this.saveAndUpdate();
                }));


        this.createRgbaColorSetting(containerEl, "Grid Highlight Color (Light Mode)", "Color for row/column highlighting on hover in light mode.", "rowHighlightColorLight");
        this.createRgbaColorSetting(containerEl, "Grid Highlight Color (Dark Mode)", "Color for row/column highlighting on hover in dark mode.", "rowHighlightColorDark");


        new Setting(containerEl)
            .setName("Highlight weekends")
            .setDesc("Shade Saturday and Sunday columns with a subtle background color.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.highlightWeekends)
                .onChange(async (value) => {
                    this.plugin.settings.highlightWeekends = value;
                    await this.saveAndUpdate();
                }));

        this.createRgbaColorSetting(
            containerEl,
            "Weekend shade color (Light Mode)",
            "Background color for Saturday and Sunday columns in light theme.",
            "weekendShadeColorLight"
        );

        this.createRgbaColorSetting(
            containerEl,
            "Weekend shade color (Dark Mode)",
            "Background color for Saturday and Sunday columns in dark theme.",
            "weekendShadeColorDark"
        );


        new Setting(containerEl).setName("Integrate External Calendar Events").setHeading();

        new Setting(containerEl)
            .setName('External calendar URL (.ics)')
            .setDesc('Integrate an external .ics feed calendar URL (e.g., from Google Calendar using the \'Secret address in iCal format\' or \'Public address in iCal Format\') to indicate events as dots in the calendar grid and event details in the date popup box.')
            .addText(text => {
                text
                    .setPlaceholder('https://calendar.google.com/calendar/ical/.../basic.ics')
                    .setValue(this.plugin.settings.icsUrl)
                    .onChange(async (value) => {
                        this.plugin.settings.icsUrl = value;
                        await this.saveAndUpdate();
                    });
                text.inputEl.style.minWidth = "300px";
                text.inputEl.style.resize = "vertical";
            })
            .settingEl.style.alignItems = "flex-start";

        new Setting(containerEl)
            .setName('Auto-refresh Interval')
            .setDesc('How often the external calendar URL should be automatically refreshed in the background.')
            .addDropdown(dropdown => {
                dropdown
                    .addOption('15', '15 minutes')
                    .addOption('30', '30 minutes')
                    .addOption('60', '1 hour')
                    .addOption('180', '3 hours')
                    .addOption('360', '6 hours')
                    .addOption('720', '12 hours')
                    .setValue(this.plugin.settings.icsRefreshInterval.toString())
                    .onChange(async (value) => {
                        this.plugin.settings.icsRefreshInterval = parseInt(value, 10);
                        await this.plugin.saveSettings();

                        // Call a method on the main plugin to reset the timer
                        this.plugin.resetIcsRefreshInterval();
                    });
            });


        new Setting(containerEl)
            .setName('Calendar Event Indicator')
            .setDesc('Choose how to display external calendar events on the calendar grid. "Dot" shows a separate colored dot, while "Heatmap" and "Badge" will add the event count to the existing task indicators. If you select "Heatmap" or "Badge", ensure that the corresponding task indicator option is also enabled in the "Task Indicators" settings tab. Settings will be applied after closing the settings window.')
            .addDropdown(dropdown => dropdown
                .addOption('dot', 'Dot Only')
                .addOption('heatmap', 'Add to Heatmap')
                .addOption('badge', 'Add to Task Badge')
                .setValue(this.plugin.settings.calendarEventIndicatorStyle || 'dot')
                .onChange(async (value) => {
                    // Step 1: Save the new value
                    this.plugin.settings.calendarEventIndicatorStyle = value;
                    await this.plugin.saveSettings();
                }));

        new Setting(containerEl)
            .setName('Calendar Events Placeholder')
            .setDesc('The placeholder text to use in your daily note template. The plugin will replace this text with calendar events.')
            .addText(text => {
                text
                    .setPlaceholder('%%CALENDAR_EVENTS%%')
                    .setValue(this.plugin.settings.calendarEventsPlaceholder)
                    .onChange(async (value) => {
                        this.plugin.settings.calendarEventsPlaceholder = value.trim() || '%%CALENDAR_EVENTS%%';
                        await this.plugin.saveSettings();
                    });

                // Set the minimum width for the text input field
                text.inputEl.style.minWidth = "300px";
                text.inputEl.style.resize = "vertical";
            })
            .settingEl.style.alignItems = "flex-start";


        // Create a new setting container
        const calendarFormatSetting = new Setting(containerEl)
            .setName('Calendar Event Format')
            .addTextArea(text => {
                text
                    .setPlaceholder('- {{startTime}} - {{endTime}}: {{summary}}')
                    .setValue(this.plugin.settings.calendarEventsFormat)
                    .onChange(async (value) => {
                        this.plugin.settings.calendarEventsFormat = value || '- {{startTime}} - {{endTime}}: {{summary}}';
                        await this.plugin.saveSettings();
                    });

                // Apply styles to the textarea element
                text.inputEl.style.minWidth = "300px";
                text.inputEl.style.minHeight = "100px";
                text.inputEl.style.resize = "vertical";
            });

        // --- THIS IS THE NEW, CORRECTED DESCRIPTION LOGIC ---
        // We build the description separately and append it to the setting's description element.
        const descEl = calendarFormatSetting.descEl;
        descEl.appendText('Customize the format for each calendar event. Use these placeholders:');

        const placeholderList = descEl.createEl('ul');

        const placeholders = [
            { code: '{{summary}}', text: 'The event title' },
            { code: '{{startTime}}', text: 'The event start time (or "All-day")' },
            { code: '{{endTime}}', text: 'The event end time' }
        ];

        placeholders.forEach(p => {
            const item = placeholderList.createEl('li');
            item.createEl('code', { text: p.code });
            item.appendText(` ${p.text}`);
        });

        // Align the entire setting row to the top
        calendarFormatSetting.settingEl.style.alignItems = "flex-start";





    }

    renderDotsSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Calendar Dot Indicators" });
        // --- Dot Functionality Section ---
        new Setting(containerEl).setName("Functionality & Style").setHeading();
        new Setting(containerEl).setName("Show dot for created notes").setDesc("Show a dot on days where any note (that is not a daily note) was created.").addToggle(toggle => toggle.setValue(this.plugin.settings.showOtherNoteDot).onChange(async value => { this.plugin.settings.showOtherNoteDot = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Show dot for modified notes").setDesc("Show a dot on days where any note (that is not a daily note) was modified.").addToggle(toggle => toggle.setValue(this.plugin.settings.showModifiedFileDot).onChange(async value => { this.plugin.settings.showModifiedFileDot = value; await this.saveAndUpdate(); }));
        new Setting(containerEl)
            .setName("Show dot for new assets")
            .setDesc("Show a dot on days where an asset (image, PDF, etc.) was added to the vault.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.showAssetDot)
                .onChange(async (value) => {
                    this.plugin.settings.showAssetDot = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName('Show dot for external ics calendar events')
            .setDesc('Show a dot on days that have a calendard event from an external calendar source, e.g. Google Calendar.')
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.showIcsDot)
                .onChange(async (value) => {
                    this.plugin.settings.showIcsDot = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl).setName("Calendar dot size").setDesc("The size (in pixels) of the colored dots that appear under calendar days. Default is 4.").addText(text => text.setValue(String(this.plugin.settings.calendarDotSize)).onChange(async (value) => { this.plugin.settings.calendarDotSize = Number(value) || 4; await this.saveAndUpdate(); }));

        // --- Dot Colors Section ---
        new Setting(containerEl).setName("Dot Colors").setHeading();
        this.createRgbaColorSetting(containerEl, "Daily Note Dot", "Dot for daily notes on the calendar and note lists .", "dailyNoteDotColor");
        this.createRgbaColorSetting(containerEl, "Created Note Dot", "Dot on calendar and note lists for non-daily, newly created notes.", "otherNoteDotColor");
        this.createRgbaColorSetting(containerEl, "Modified Note Dot", "Dot on calendar and note lists for non-daily, modified notes.", "calendarModifiedDotColor");
        this.createRgbaColorSetting(containerEl, "Asset Note Dot", "Dot on calendar and note lists for newly added assets.", "assetDotColor");
        this.createRgbaColorSetting(containerEl, 'Calendar Event Dot', 'The color of the dot for events from your iCal/.ics feed.', 'calendarEventDotColor');
        // --- Popups Section ---
        new Setting(containerEl).setName("Popups").setHeading();
        new Setting(containerEl).setName("Popup hover delay").setDesc("How long to wait before showing the note list popup on hover. Default is 100.").addText(text => text.setValue(String(this.plugin.settings.otherNoteHoverDelay)).onChange(async (value) => { this.plugin.settings.otherNoteHoverDelay = Number(value) || 100; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Popup hide delay").setDesc("How long to wait before hiding the popup after the mouse leaves. Default is 100.").addText(text => text.setValue(String(this.plugin.settings.popupHideDelay)).onChange(async (value) => { this.plugin.settings.popupHideDelay = Number(value) || 100; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Popup gap").setDesc("The gap (in pixels) between a calendar day and its popup list. Can be negative. Default is -2.").addText(text => text.setValue(String(this.plugin.settings.popupGap)).onChange(async (value) => { this.plugin.settings.popupGap = Number(value) || -2; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Popup font size").setDesc("The font size for the note names inside the calendar popup. Default is 14px.").addText(text => text.setValue(this.plugin.settings.otherNotePopupFontSize).onChange(async value => { this.plugin.settings.otherNotePopupFontSize = value; await this.saveAndUpdate(); }));
        this.createIgnoredFolderList(containerEl, "Ignore folders for calendar grid dots", "Files in these folders will not create 'created' or 'modified' dots on the calendar.", 'otherNoteIgnoreFolders');
        this.createIgnoredFolderList(containerEl, "Ignore folders for asset dots", "Assets in these folders will not create dots on the calendar.", 'assetIgnoreFolders');

    }

    renderWeeklyNotesSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Weekly Notes Settings" });

        new Setting(containerEl)
            .setName("Enable Weekly Notes")
            .setDesc("Enable clicking on week numbers to open/create weekly notes and show the dot indicator.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.enableWeeklyNotes)
                .onChange(async (value) => {
                    this.plugin.settings.enableWeeklyNotes = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Weekly Note Folder")
            .setDesc("The folder where your weekly notes are stored. It will be created if it doesn't exist.")
            .addText(text => {
                this.createPathSuggester(text.inputEl, (q) => this.app.vault.getAllLoadedFiles().filter(f => f instanceof TFolder && (!q || f.path.toLowerCase().includes(q))).map(f => f.path));
                text.setValue(this.plugin.settings.weeklyNoteFolder)
                    .onChange(async value => {
                        this.plugin.settings.weeklyNoteFolder = value;
                        await this.saveAndUpdate();
                    });
            });

        // In the PeriodSettingsTab class, inside renderWeeklyNotesSettings()
        const weeklyFormatSetting = new Setting(containerEl).setName("Weekly Note Format");
        weeklyFormatSetting.descEl.innerHTML = `
            Set the filename format for weekly notes using dots, hyphens, or other separators.
            <br>The following placeholders will be replaced automatically:
            <br><code>YYYY</code> - The 4-digit year (e.g., 2025)
            <br><code>MM</code> - The 2-digit month (e.g., 08)
            <br><code>PN</code> - The Period Number with a 'P' prefix (e.g., P8)
            <br><code>PW</code> - The week number within the period with a 'W' prefix (e.g., W2)
            <br><code>WKP</code> - The week number (1-52) within your custom period year
            <br><code>WKC</code> - The standard ISO calendar week number (1-53)
            <br><br><b>Examples:</b>
            <br>Format: <code>YYYY-MM-PNPW</code> ‚Üí Filename: <code>2025-08-P8W2.md</code>
            <br>Format: <code>YYYY-MM-WKP</code> ‚Üí Filename: <code>2025-08-30.md</code>
            <br>Format: <code>YYYY-MM-WWKC</code> ‚Üí Filename: <code>2025-08-W38.md</code>
        `;
        weeklyFormatSetting.addText(text => text
            .setValue(this.plugin.settings.weeklyNoteFormat)
            .onChange(async (value) => {
                this.plugin.settings.weeklyNoteFormat = value;
                await this.saveAndUpdate();
            }));

        new Setting(containerEl)
            .setName("Weekly note template")
            .setDesc("Path to a template file to use when creating a new weekly note.")
            .addText(text => {
                this.createPathSuggester(text.inputEl, (q) => this.app.vault.getMarkdownFiles().filter(f => !q || f.path.toLowerCase().includes(q)).map(f => f.path));
                text.setPlaceholder("Example: Templates/Weekly.md")
                    .setValue(this.plugin.settings.weeklyNoteTemplate)
                    .onChange(async (value) => {
                        this.plugin.settings.weeklyNoteTemplate = value;
                        await this.saveAndUpdate();
                    });
            });

        new Setting(containerEl).setName("Dot Indicator").setHeading();

        new Setting(containerEl)
            .setName("Show dot for weekly notes")
            .setDesc("Show a dot in the week number column if a note for that week exists.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.showWeeklyNoteDot)
                .onChange(async (value) => {
                    this.plugin.settings.showWeeklyNoteDot = value;
                    await this.saveAndUpdate();
                }));

        this.createRgbaColorSetting(containerEl, "Weekly Note Dot Color", "The color of the dot for existing weekly notes.", "weeklyNoteDotColor");
    }

    renderTaskIndicatorSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Calendar Task Indicators" });
        new Setting(containerEl)
            .setName("Task indicator style")
            .setDesc("Choose how to indicate days with tasks on the calendar grid.")
            .addDropdown(dropdown => dropdown
                .addOption('none', 'None')
                .addOption('badge', 'Number Badge')
                .addOption('heatmap', 'Cell Color Heatmap')
                .setValue(this.plugin.settings.taskIndicatorStyle)
                .onChange(async (value) => {
                    this.plugin.settings.taskIndicatorStyle = value;
                    await this.saveAndUpdate();
                    // We re-render the settings display to show/hide relevant options
                    this.refreshDisplay();
                }));

        new Setting(containerEl)
            .setName("Show dot for tasks")
            .setDesc("Show a single dot on days with tasks. This can be used with or instead of the heatmap/badge.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.showTaskDot)
                .onChange(async (value) => {
                    this.plugin.settings.showTaskDot = value;
                    await this.saveAndUpdate();
                }));

        this.createRgbaColorSetting(containerEl, "Task Dot Color", "The color of the dot indicating a day has tasks.", "taskDotColor");

        // Only show the badge/heatmap settings if they are relevant
        if (this.plugin.settings.taskIndicatorStyle === 'badge') {
            new Setting(containerEl)
                .setName("Task badge font size")
                .setDesc("The font size for the number inside the task badge. Default is 9px.")
                .addText(text => text
                    .setValue(this.plugin.settings.taskBadgeFontSize)
                    .onChange(async (value) => {
                        this.plugin.settings.taskBadgeFontSize = value;
                        await this.saveAndUpdate();
                    }));

            this.createRgbaColorSetting(containerEl, "Task badge color", "The background color of the task count badge.", "taskBadgeColor");
            this.createRgbaColorSetting(containerEl, "Task badge font color", "The color of the number inside the task count badge.", "taskBadgeFontColor");
        }

        if (this.plugin.settings.taskIndicatorStyle === 'heatmap') {

            new Setting(containerEl)
                .setName("Heatmap content border width")
                .setDesc("Width of the border around the day heatmap content area (e.g., 1px, 2px, 3px). Creates visual separation inside cells. Default is 1px.")
                .addText(text => text
                    .setPlaceholder("1px")
                    .setValue(this.plugin.settings.contentBorderWidth)
                    .onChange(async (value) => {
                        this.plugin.settings.contentBorderWidth = value || "1px";
                        await this.saveAndUpdate();
                    }));

            containerEl.createEl('p', { text: 'Configure the start, middle, and end points of the dynamic color gradient. Colors will be blended smoothly between these points.', cls: 'setting-item-description' });

            new Setting(containerEl).setName("Gradient Midpoint").setDesc("The number of tasks that should have the exact 'Mid' color. Default is 5.").addText(text => text.setValue(String(this.plugin.settings.taskHeatmapMidpoint)).onChange(async (value) => { this.plugin.settings.taskHeatmapMidpoint = Number(value) || 5; await this.saveAndUpdate(); }));
            new Setting(containerEl).setName("Gradient Maxpoint").setDesc("The number of tasks that should have the exact 'End' color. Any day with more tasks will also use the end color. Default is 10.").addText(text => text.setValue(String(this.plugin.settings.taskHeatmapMaxpoint)).onChange(async (value) => { this.plugin.settings.taskHeatmapMaxpoint = Number(value) || 10; await this.saveAndUpdate(); }));

            this.createRgbaColorSetting(containerEl, "Heatmap: Start Color (1 Task)", "The color for days with 1 task.", "taskHeatmapStartColor");
            this.createRgbaColorSetting(containerEl, "Heatmap: Mid Color", "The color for days meeting the 'Midpoint' task count.", "taskHeatmapMidColor");
            this.createRgbaColorSetting(containerEl, "Heatmap: End Color", "The color for days meeting the 'Maxpoint' task count.", "taskHeatmapEndColor");
        }

        /*
        new Setting(containerEl)
            .setName("Task badge font size")
            .setDesc("The font size for the number inside the task badge. Default is 10px.")
            .addText(text => text
                .setValue(this.plugin.settings.taskBadgeFontSize)
                .onChange(async (value) => {
                    this.plugin.settings.taskBadgeFontSize = value;
                    await this.saveAndUpdate();
                }));

        this.createRgbaColorSetting(containerEl, "Task badge color", "The background color of the task count badge.", "taskBadgeColor");
        this.createRgbaColorSetting(containerEl, "Task badge font color", "The color of the number inside the task count badge.", "taskBadgeFontColor");
        */
    }

    // This function can be a method within your SettingTab class
    renderDraggableTabs(container) {
        container.empty(); // Clear the container first

        // Define labels for your tabs
        const tabLabels = {
            scratch: 'ScratchPad',
            notes: 'Notes',
            tasks: 'Tasks',
            assets: 'Assets'
            // Add other tabs if you have them
        };

        let draggedItem = null; // To keep track of the item being dragged

        this.plugin.settings.tabOrder.forEach((key, index) => {
            const settingItem = container.createDiv('draggable-item');
            settingItem.draggable = true;
            settingItem.dataset.tabKey = key;

            // Add a drag handle icon
            const handle = settingItem.createDiv('drag-handle');
            setIcon(handle, 'grip-vertical');

            // Add the tab's name
            settingItem.createSpan({ text: tabLabels[key] || key });

            // --- Drag and Drop Event Listeners ---

            settingItem.addEventListener('dragstart', (e) => {
                draggedItem = settingItem;
                setTimeout(() => settingItem.addClass('dragging'), 0);
            });

            settingItem.addEventListener('dragend', (e) => {
                draggedItem?.removeClass('dragging');
                draggedItem = null;
            });

            settingItem.addEventListener('dragover', (e) => {
                e.preventDefault();
                const draggingItem = document.querySelector('.dragging');
                if (draggingItem && draggingItem !== settingItem) {
                    // Get the bounding box of the item we're dragging over
                    const rect = settingItem.getBoundingClientRect();
                    // Check if we are in the top or bottom half of the item
                    const isAfter = e.clientY > rect.top + rect.height / 2;

                    if (isAfter) {
                        // Insert the dragged item after the current one
                        settingItem.parentNode.insertBefore(draggingItem, settingItem.nextSibling);
                    } else {
                        // Insert the dragged item before the current one
                        settingItem.parentNode.insertBefore(draggingItem, settingItem);
                    }
                }
            });

            settingItem.addEventListener('drop', async (e) => {
                e.preventDefault();
                const newOrder = Array.from(container.children).map(child => child.dataset.tabKey);
                this.plugin.settings.tabOrder = newOrder;
                await this.saveAndUpdate();
                new Notice('Tab order saved!');
            });
        });
    }

    renderTabsSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "General Tab Settings" });

        new Setting(containerEl)
            .setName("Desktop tab display style")
            .setDesc("Choose how tab names are displayed in the desktop client.")
            .addDropdown(dropdown => dropdown
                .addOption('text', 'Text Only')
                .addOption('iconAndText', 'Icon and Text')
                .addOption('iconOnly', 'Icon Only')
                .setValue(this.plugin.settings.tabDisplayMode)
                .onChange(async (value) => {
                    this.plugin.settings.tabDisplayMode = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Mobile tab display style")
            .setDesc("Choose a different, often more compact, display style for smaller mobile / tablet screens.")
            .addDropdown(dropdown => dropdown
                .addOption('text', 'Text Only')
                .addOption('iconAndText', 'Icon and Text')
                .addOption('iconOnly', 'Icon Only')
                .setValue(this.plugin.settings.mobileTabDisplayMode)
                .onChange(async (value) => {
                    this.plugin.settings.mobileTabDisplayMode = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl).setName("Tab title font size").setDesc("Font size for the tab titles (ScratchPad, Notes, Tasks). Default is 15px.").addText(text => text.setValue(this.plugin.settings.tabTitleFontSize).onChange(async value => { this.plugin.settings.tabTitleFontSize = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Bold tab titles").setDesc("Toggles bold font weight for the tab titles.").addToggle(toggle => toggle.setValue(this.plugin.settings.tabTitleBold).onChange(async value => { this.plugin.settings.tabTitleBold = value; await this.saveAndUpdate(); }));

        this.createRgbaColorSetting(containerEl, "Active Tab Indicator", "Underline color for the active tab.", "selectedTabColor");

        containerEl.createDiv('setting-spacer');

        new Setting(containerEl)
            .setName('Tab Order')
            .setDesc('Drag and drop the tabs to set their display order.');

        // Create a container for our draggable list
        const tabOrderContainer = containerEl.createDiv('tab-order-container');
        this.renderDraggableTabs(tabOrderContainer);

        containerEl.createDiv('setting-spacer');

        new Setting(containerEl).setName("Tab Visibility").setHeading();

        new Setting(containerEl)
            .setName("Show Tasks tab")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.tabVisibility.tasks)
                .onChange(async (value) => {
                    this.plugin.settings.tabVisibility.tasks = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Show ScratchPad tab")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.tabVisibility.scratch)
                .onChange(async (value) => {
                    this.plugin.settings.tabVisibility.scratch = value;
                    await this.saveAndUpdate();
                }));
        new Setting(containerEl)
            .setName("Show Notes tab")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.tabVisibility.notes)
                .onChange(async (value) => {
                    this.plugin.settings.tabVisibility.notes = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Show Assets tab")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.tabVisibility.assets)
                .onChange(async (value) => {
                    this.plugin.settings.tabVisibility.assets = value;
                    await this.saveAndUpdate();
                }));



        containerEl.createEl('h2', { text: 'Tab Icons' });

        const tabIconSettings = [
            { key: 'scratch', name: 'ScratchPad tab icon' },
            { key: 'notes', name: 'Notes tab icon' },
            { key: 'tasks', name: 'Tasks tab icon' },
            { key: 'pinned', name: 'Pinned View tab icon' },
            { key: 'assets', name: 'Assets View tab icon' }
        ];

        // Loop through each tab icon setting to create its input field and reset button
        tabIconSettings.forEach(s => {
            let textComponent; // Variable to hold the text component reference

            new Setting(containerEl)
                .setName(s.name)
                .setDesc('Enter any Lucide icon name.')
                .addText(text => {
                    textComponent = text; // Store the text component so the button can access it
                    text
                        .setValue(this.plugin.settings.tabIcons[s.key] || DEFAULT_SETTINGS.tabIcons[s.key])
                        .onChange(async (value) => {
                            this.plugin.settings.tabIcons[s.key] = value.trim();
                            await this.saveAndUpdate();
                        });
                })
                .addExtraButton(button => {
                    button
                        .setIcon('rotate-ccw') // A fitting icon for "reset"
                        .setTooltip('Reset to default')
                        .onClick(async () => {
                            // 1. Get the default value for this specific key
                            const defaultValue = DEFAULT_SETTINGS.tabIcons[s.key];

                            // 2. Update the setting in the plugin's data
                            this.plugin.settings.tabIcons[s.key] = defaultValue;

                            // 3. Visually update the text box to show the default value
                            if (textComponent) {
                                textComponent.setValue(defaultValue);
                            }

                            // 4. Save the setting and update the plugin view
                            await this.saveAndUpdate();
                            new Notice(`'${s.name}' reset to default.`);
                        });
                });
        });

        // --- Keep your existing "Reset All" button ---
        // This button's logic does not need to change.
        new Setting(containerEl)
            .addButton(button => button
                .setButtonText('Reset All Tab Icons')
                .setTooltip('Resets all tab icons to their original values')
                .onClick(async () => {
                    // Confirm with the user before resetting all
                    if (confirm('Are you sure you want to reset all tab icons?')) {
                        this.plugin.settings.tabIcons = { ...DEFAULT_SETTINGS.tabIcons };
                        await this.saveAndUpdate();
                        new Notice('All tab icons have been reset.');

                        // Refresh the settings display to show the changes
                        //this.display(); 
                        this.refreshDisplay();
                    }
                }));

    }

    renderScratchpadSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "ScratchPad Tab Settings" });
        new Setting(containerEl).setName("Functionality").setHeading();
        new Setting(containerEl).setName("ScratchPad tab click action").setDesc("What to do when the ScratchPad tab is clicked while it's already active.").addDropdown(dropdown => dropdown.addOption('new-tab', 'Open in a new tab').addOption('current-tab', 'Open in the current tab').setValue(this.plugin.settings.scratchpadOpenAction).onChange(async (value) => { this.plugin.settings.scratchpadOpenAction = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("ScratchPad note path").setDesc("The full path to the note that the ScratchPad tab will read from and write to.").addText(text => { this.createPathSuggester(text.inputEl, (q) => this.app.vault.getMarkdownFiles().filter(f => !q || f.path.toLowerCase().includes(q)).map(f => f.path)); text.setValue(this.plugin.settings.fixedNoteFile).onChange(async value => { this.plugin.settings.fixedNoteFile = value; await this.saveAndUpdate(); }); });
        new Setting(containerEl).setName("Show preview/edit button").setDesc("Show the button to toggle between plain text editing and a rendered Markdown preview.").addToggle(toggle => toggle.setValue(this.plugin.settings.scratchpad?.showPreviewToggle ?? false).onChange(async (value) => { if (!this.plugin.settings.scratchpad) this.plugin.settings.scratchpad = {}; this.plugin.settings.scratchpad.showPreviewToggle = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Show '+ Task' button").setDesc("Show the button in the scratchpad area to quickly add a new task.").addToggle(toggle => toggle.setValue(this.plugin.settings.scratchpad?.showAddTaskButton ?? true).onChange(async (value) => { if (!this.plugin.settings.scratchpad) this.plugin.settings.scratchpad = {}; this.plugin.settings.scratchpad.showAddTaskButton = value; await this.saveAndUpdate(); }));

        const taskTitleSetting = new Setting(containerEl).setName("Task Creation Format");
        taskTitleSetting.descEl.innerHTML = `
                Use the following to insert as placeholders for the task creation date:
                <br><code>{today}</code>, <code>{tomorrow}</code>
                <br><code>{monday}</code>, <code>{tuesday}</code>, etc. for the next upcoming day.
                <br><code>{date}+7</code> or <code>{date}-3</code> for dates in the future or past.
                <br>
                <br>Use <code>|</code> to set the final cursor position.
            `;

        taskTitleSetting.addText(text => text
            .setPlaceholder("- [ ] ")
            .setValue(this.plugin.settings.scratchpad?.taskFormat || "- [ ] ")
            .onChange(async (value) => {
                if (!this.plugin.settings.scratchpad) {
                    this.plugin.settings.scratchpad = {};
                }
                this.plugin.settings.scratchpad.taskFormat = value;
                await this.saveAndUpdate();
            }));

        new Setting(containerEl).setName("Appearance").setHeading();
        new Setting(containerEl).setName("ScratchPad font size").setDesc("Font size for the text inside the ScratchPad editor. Default is 14px.").addText(text => text.setValue(this.plugin.settings.scratchFontSize).onChange(async value => { this.plugin.settings.scratchFontSize = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Bold ScratchPad text").setDesc("Toggles bold font weight for the text in the ScratchPad.").addToggle(toggle => toggle.setValue(this.plugin.settings.scratchBold).onChange(async value => { this.plugin.settings.scratchBold = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("ScratchPad font family").setDesc("Examples: monospace, Arial, 'Courier New'. Leave blank to use the editor default.").addText(text => text.setValue(this.plugin.settings.scratchFontFamily).onChange(async (value) => { this.plugin.settings.scratchFontFamily = value; await this.saveAndUpdate(); }));
        this.createRgbaColorSetting(containerEl, "Search highlight color", "The background color for the selected search result in the ScratchPad.", "scratchpadHighlightColor");

    }

    renderNotesSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Notes Tab Settings" });
        new Setting(containerEl).setName("Functionality").setHeading();
        new Setting(containerEl).setName("Notes tab open behavior").setDesc("Choose how to open notes when clicked from the notes list.").addDropdown(dropdown => dropdown.addOption('new-tab', 'Open in a new tab').addOption('current-tab', 'Open in the current tab').setValue(this.plugin.settings.notesOpenAction).onChange(async (value) => { this.plugin.settings.notesOpenAction = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Notes lookback days").setDesc("How many days back the Notes tab should look for created or modified notes. Default is 7.").addText(text => text.setValue(String(this.plugin.settings.notesLookbackDays)).onChange(async value => { this.plugin.settings.notesLookbackDays = Number(value) || 7; await this.saveAndUpdate(); }));

        new Setting(containerEl).setName("Appearance").setHeading();
        new Setting(containerEl).setName("Show note status dots").setDesc("Show a colored dot next to each note, indicating if it was recently created or modified.").addToggle(toggle => toggle.setValue(this.plugin.settings.showNoteStatusDots).onChange(async value => { this.plugin.settings.showNoteStatusDots = value; await this.saveAndUpdate(); }));
        this.createRgbaColorSetting(containerEl, "Created Note Dot", "Color for the dot on recently created notes in the list.", "noteCreatedColor");
        this.createRgbaColorSetting(containerEl, "Modified Note Dot", "Color for the dot on recently modified notes in the list.", "noteModifiedColor");
        new Setting(containerEl).setName("Show note tooltips").setDesc("Show a detailed tooltip on hover, containing note path, dates, size, and tags.").addToggle(toggle => toggle.setValue(this.plugin.settings.showNoteTooltips).onChange(async value => { this.plugin.settings.showNoteTooltips = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Notes list font size").setDesc("Font size for note titles in the list. Default is 14px.").addText(text => text.setValue(this.plugin.settings.notesFontSize).onChange(async value => { this.plugin.settings.notesFontSize = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Bold note titles").setDesc("Toggles bold font weight for note titles in the list.").addToggle(toggle => toggle.setValue(this.plugin.settings.notesBold).onChange(async value => { this.plugin.settings.notesBold = value; await this.saveAndUpdate(); }));
        this.createRgbaColorSetting(containerEl, "Note/Task Hover Color", "Background color when hovering a note or task in a list.", "notesHoverColor");
        this.createIgnoredFolderList(containerEl, "Ignore folders in Notes tab", "Files in these folders will not appear in the 'Notes' list.", 'ignoreFolders');

    }

    renderPinnedNotesSettings() {
        const containerEl = this.contentEl; // All settings will be rendered into this element
        containerEl.createEl('h1', { text: 'Pinned Notes Settings' });
        new Setting(containerEl).setName('Functionality').setHeading();
        new Setting(containerEl)
            .setName("Pinned notes tag")
            .setDesc("The tag to use for pinned notes, enter in the text box without the '#'. For notes to appear in the pinned tab, (accessed with another click on the notes tab icon once it has focus), and if you set 'pin' as the tag name, then in your notes add #pin in the body or properties tag section. Default is 'pin'.")
            .addText(text => text
                .setValue(this.plugin.settings.pinTag)
                .onChange(async (value) => {
                    this.plugin.settings.pinTag = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl).setName('Sort Order').setHeading();
        new Setting(containerEl)
            .setName('Default sort order')
            .setDesc("Choose the default sort order for pinned notes when the plugin is loaded. To change the order click on the PINNED NOTES title in the main view.")
            .addDropdown(dropdown => dropdown
                .addOption('a-z', 'A-Z (Default)')
                .addOption('z-a', 'Z-A')
                .addOption('custom', 'Custom Order')
                .setValue(this.plugin.settings.pinnedNotesSortOrder)
                .onChange(async (value) => {
                    this.plugin.settings.pinnedNotesSortOrder = value;
                    await this.plugin.saveSettings();
                }));

        // ADD THIS NEW SETTING HERE:
        const isMac = Platform.isMacOS;
        const modifierKey = isMac ? 'Option (‚å•)' : 'Ctrl';

        new Setting(containerEl)
            .setName('How to change the sort order in the main view')
            .setDesc(`Click the "PINNED NOTES" header in the main view to cycle between A-Z, Z-A, and Custom sort orders.\n\nWhen in Custom order, hold ${modifierKey} and drag notes to reorder them.`);


        new Setting(containerEl)
            .setName('Set Custom Order')
            .setDesc('Drag and drop the notes below to set your preferred manual order.');

        // This container will hold the draggable list
        const draggableContainer = containerEl.createDiv('pinned-notes-order-container');
        this.renderDraggablePinnedNotes(draggableContainer);
    }

    renderAssetsSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Assets Tab Settings" });
        new Setting(containerEl)
            .setName("Asset open behavior")
            .setDesc("Choose how to open assets when clicked from the Assets list.")
            .addDropdown(dropdown => dropdown
                .addOption('new-tab', 'Open in a new tab')
                .addOption('current-tab', 'Open in the current tab')
                .setValue(this.plugin.settings.assetsOpenAction)
                .onChange(async (value) => {
                    this.plugin.settings.assetsOpenAction = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName('Default assets view')
            .setDesc('Choose the default layout for the assets tab.')
            .addDropdown(dropdown => dropdown
                .addOption('list', 'List')
                .addOption('grid', 'Grid')
                .setValue(this.plugin.settings.assetsDefaultView)
                .onChange(async (value) => {
                    this.plugin.settings.assetsDefaultView = value;
                    await this.plugin.saveSettings();
                }));

        new Setting(containerEl)
            .setName("Assets lookback days")
            .setDesc("How many days back the Assets tab should look for created or modified notes. Default is 7.")
            .addText(text => text
                .setValue(String(this.plugin.settings.assetsLookbackDays))
                .onChange(async value => {
                    this.plugin.settings.assetsLookbackDays = Number(value) || 7;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Hidden asset file types")
            .setDesc("A comma-separated list of file extensions to hide from the Assets tab and calendar dots (e.g., jpg,pdf,zip). Default is base,canvas.")
            .addText(text => text
                .setPlaceholder("e.g., jpg,pdf,zip")
                .setValue(this.plugin.settings.hiddenAssetTypes)
                .onChange(async (value) => {
                    this.plugin.settings.hiddenAssetTypes = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl).setName("Show indicator for unused assets").setDesc("An icon will appear next to assets that are not linked or embedded in any note, allowing for easier detection to delete.").addToggle(toggle => toggle.setValue(this.plugin.settings.showUnusedAssetsIndicator).onChange(async (value) => { this.plugin.settings.showUnusedAssetsIndicator = value; await this.saveAndUpdate(); }));

    }

    renderTasksSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Tasks Tab Settings" });
        new Setting(containerEl).setName("Display & Sorting").setHeading();
        new Setting(containerEl).setName("Task group heading font size").setDesc("The font size for the date/tag group headings (e.g., 'Overdue', 'Today'). Default is 13px.").addText(text => text.setValue(this.plugin.settings.taskHeadingFontSize).onChange(async value => { this.plugin.settings.taskHeadingFontSize = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Task text font size").setDesc("The font size for the individual task items in the list. Default is 14px.").addText(text => text.setValue(this.plugin.settings.taskTextFontSize).onChange(async value => { this.plugin.settings.taskTextFontSize = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Truncate long task text").setDesc("If enabled, long tasks will be shortened with '...'. If disabled, they will wrap to multiple lines.").addToggle(toggle => toggle.setValue(this.plugin.settings.taskTextTruncate).onChange(async (value) => { this.plugin.settings.taskTextTruncate = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Show completed tasks for Today").setDesc("If enabled, tasks that you marked as complete today will appear in the lists (regardless of their due date).").addToggle(toggle => toggle.setValue(this.plugin.settings.showCompletedTasksToday).onChange(async (value) => { this.plugin.settings.showCompletedTasksToday = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Task sort order").setDesc("The default order for tasks within each group.").addDropdown(dropdown => dropdown.addOption('dueDate', 'By Due Date (earliest first)').addOption('a-z', 'A-Z').addOption('z-a', 'Z-A').setValue(this.plugin.settings.taskSortOrder).onChange(async (value) => { this.plugin.settings.taskSortOrder = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Group tasks by").setDesc("Choose how to group tasks in the view. Second-clicking the Tasks tab will also toggle this.").addDropdown(dropdown => dropdown.addOption('date', 'Date (Overdue, Today, etc.)').addOption('tag', 'Tag').setValue(this.plugin.settings.taskGroupBy).onChange(async (value) => { this.plugin.settings.taskGroupBy = value; await this.saveAndUpdate(); this.refreshDisplay(); }));

        if (this.plugin.settings.taskGroupBy === 'date') {
            new Setting(containerEl).setName("Date Groups to Show").setHeading();
            const dateGroups = [{ key: 'overdue', name: 'Overdue' }, { key: 'today', name: 'Today' }, { key: 'tomorrow', name: 'Tomorrow' }, { key: 'next7days', name: 'Next 7 Days' }, { key: 'future', name: 'Future' },];
            dateGroups.forEach(g => { new Setting(containerEl).setName(g.name).addToggle(t => t.setValue(this.plugin.settings.taskDateGroupsToShow.includes(g.key)).onChange(async v => { const groups = this.plugin.settings.taskDateGroupsToShow; if (v && !groups.includes(g.key)) groups.push(g.key); else if (!v) this.plugin.settings.taskDateGroupsToShow = groups.filter(i => i !== g.key); await this.saveAndUpdate(); })); });
        }

        new Setting(containerEl).setName("Content & Appearance").setHeading();
        this.createIgnoredFolderList(containerEl, "Exclude folders from Task search", "Tasks in these folders will not appear in the 'Tasks' list.", 'taskIgnoreFolders');

        // Create the main heading for this section
        containerEl.createEl('h2', { text: 'Task Group Icons' });
        containerEl.createEl('p', { text: 'Customize the icon displayed next to each task group header.', cls: 'setting-item-description' });

        // Define the settings for each task group icon for easy iteration
        const taskGroupIconSettings = [
            { key: 'overdue', name: 'Overdue icon' },
            { key: 'today', name: 'Today icon' },
            { key: 'tomorrow', name: 'Tomorrow icon' },
            { key: 'next7days', name: 'Next 7 Days icon' },
            { key: 'future', name: 'Future icon' },
            { key: 'noDate', name: 'No Due Date icon' },
            { key: 'tag', name: 'Tag Group icon' }
        ];

        // Loop through the settings to create each input field and its reset button
        taskGroupIconSettings.forEach(s => {
            let textComponent; // This will hold a reference to the text input

            new Setting(containerEl)
                .setName(s.name)
                .setDesc('Enter any Lucide icon name.')
                .addText(text => {
                    textComponent = text; // Store the reference
                    text
                        .setValue(this.plugin.settings.taskGroupIcons[s.key] || DEFAULT_SETTINGS.taskGroupIcons[s.key])
                        .onChange(async (value) => {
                            this.plugin.settings.taskGroupIcons[s.key] = value.trim();
                            await this.saveAndUpdate();
                        });
                })
                .addExtraButton(button => {
                    button
                        .setIcon('rotate-ccw')
                        .setTooltip('Reset to default')
                        .onClick(async () => {
                            // 1. Get the default value for this specific icon
                            const defaultValue = DEFAULT_SETTINGS.taskGroupIcons[s.key];

                            // 2. Update the setting object
                            this.plugin.settings.taskGroupIcons[s.key] = defaultValue;

                            // 3. Update the text box on screen for instant feedback
                            if (textComponent) {
                                textComponent.setValue(defaultValue);
                            }

                            // 4. Save and trigger a UI refresh
                            await this.saveAndUpdate();
                            new Notice(`'${s.name}' reset to default.`);
                        });
                });
        });

        // Add the "Reset All" button at the end of the section
        new Setting(containerEl)
            .addButton(button => button
                .setButtonText('Reset All Task Group Icons')
                .setTooltip('Resets all task group icons to their original values')
                .onClick(async () => {
                    // Confirm with the user to prevent accidental resets
                    if (confirm('Are you sure you want to reset all task group icons?')) {
                        // Restore the entire object from default settings
                        this.plugin.settings.taskGroupIcons = { ...DEFAULT_SETTINGS.taskGroupIcons };
                        await this.saveAndUpdate();
                        new Notice('All task group icons have been reset.');

                        // Force a redraw of the settings page to show the reset values everywhere
                        this.refreshDisplay();
                    }
                }));

        new Setting(containerEl).setName("Task Group Backgrounds").setHeading();
        this.createRgbaColorSetting(containerEl, "Overdue", "Background color for the 'Overdue' task group.", "taskGroupColorOverdue");
        this.createRgbaColorSetting(containerEl, "Today", "Background color for the 'Today' task group.", "taskGroupColorToday");
        this.createRgbaColorSetting(containerEl, "Tomorrow", "Background color for the 'Tomorrow' task group.", "taskGroupColorTomorrow");
        this.createRgbaColorSetting(containerEl, "Next 7 Days", "Background color for the 'Next 7 Days' task group.", "taskGroupColorNext7Days");
        this.createRgbaColorSetting(containerEl, "Future", "Background color for 'Future' task group.", "taskGroupColorFuture");
        this.createRgbaColorSetting(containerEl, "No Due Date", "Background color for the 'No Due Date' task group.", "taskGroupColorNoDate");
        this.createRgbaColorSetting(containerEl, "Tag", "Background color for task groups when grouped by tag.", "taskGroupColorTag");
    }







    renderImportExportTab() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Import & Export Settings" });

        // --- EXPORT ---
        new Setting(containerEl)
            .setName("Export Settings")
            .setDesc("Save your plugin settings to a JSON file. Two options: all plugin settings or theme settins only. This is useful for backing up all your settings or sharing your theme configuration with others.")
            .addButton(button => {
                button
                    .setButtonText("Export All Settings")
                    .setIcon("save")
                    .setTooltip("Save all plugin settings to a file")
                    .onClick(() => this.handleExport('all'));

                button.buttonEl.style.cursor = 'pointer';
            })
            .addButton(button => {
                button
                    .setButtonText("Export Theme Only")
                    .setIcon("palette")
                    .setTooltip("Save only colors, fonts, and sizes to a theme file")
                    .onClick(() => this.handleExport('theme'));

                button.buttonEl.style.cursor = 'pointer';
            });

        // --- IMPORT ---
        new Setting(containerEl)
            .setName("Import Settings")
            .setDesc("Load settings from a JSON file. This will overwrite your current settings after confirmation.")
            .addButton(button => {
                button
                    .setButtonText("Import from File")
                    .setIcon("upload")
                    .setTooltip("Load settings from a .json file")
                    .onClick(() => {
                        const fileInput = containerEl.createEl('input', {
                            type: 'file',
                            attr: {
                                accept: '.json',
                                style: 'display: none;'
                            }
                        });

                        fileInput.addEventListener('change', (event) => {
                            const file = event.target.files[0];
                            if (file) {
                                this.handleImport(file);
                            }
                        });

                        fileInput.click();
                    });

                button.buttonEl.style.cursor = 'pointer';
            });
    }

    /**
     * Handles the export functionality.
     * @param {'all' | 'theme'} type The type of export to perform.
     */
    handleExport(type) {
        let settingsToExport;
        let fileName = `calendar-period-week-notes-settings.json`;

        if (type === 'theme') {
            const themeKeys = [
                // General appearance settings
                "fontSize",
                "dayNumberFontSize",
                "navButtonHeight",
                "headerRowBold",
                "pwColumnBold",
                "showCalendarGridLines",
                "showPWColumnSeparator",
                "pwColumnSeparatorColor",

                // Add all the font color settings
                "pwColumnFontColorLight",
                "pwColumnFontColorDark",
                "weekNumberFontColorLight",
                "weekNumberFontColorDark",
                "dayHeaderFontColorLight",
                "dayHeaderFontColorDark",
                "dayCellFontColorLight",
                "dayCellFontColorDark",
                "otherMonthFontColorLight",
                "otherMonthFontColorDark",

                // Add the highlight toggles
                "highlightTodayDayHeader",
                "highlightTodayPWLabel",

                // Add all the highlight color settings
                "monthColorLight",
                "monthColorDark",
                "mainMonthYearTitleFontSize",
                "mainMonthYearTitleBold",

                // Other settings
                "tabTitleFontSize",
                "tabTitleBold",
                "selectedTabColor",
                "todayHighlightColorLight",
                "todayHighlightColorDark",
                "notesHoverColor",
                "dailyNoteDotColor",
                "noteCreatedColor",
                "noteModifiedColor",
                "otherNoteDotColor",
                "calendarModifiedDotColor",
                "rowHighlightColorLight",
                "rowHighlightColorDark",
                'weekendShadeColorLight',
                'weekendShadeColorDark',
                "dateCellHoverColorLight",
                "dateCellHoverColorDark",
                "assetDotColor",
                "calendarEventDotColor",
                "todayHighlightStyle",
                "todayCircleColor",
                "weeklyNoteDotColor",
                "scratchFontSize",
                "scratchBold",
                "scratchFontFamily",
                "scratchpadHighlightColor",
                "notesFontSize",
                "notesBold",
                "notesLineHeight",
                "showNoteStatusDots",
                "otherNotePopupFontSize",
                "calendarDotSize",
                // Task settings
                "taskIndicatorStyle",
                "taskBadgeFontSize",
                "taskBadgeColor",
                "taskBadgeFontColor",
                "taskHeatmapStartColor",
                "taskHeatmapMidColor",
                "taskHeatmapEndColor",
                "taskHeadingFontSize",
                "taskTextFontSize",
                "taskGroupColorOverdue",
                "taskGroupColorToday",
                "taskGroupColorTomorrow",
                "taskGroupColorNext7Days",
                "taskGroupColorFuture",
                "taskGroupColorNoDate",
                "taskGroupColorTag"
            ];
            settingsToExport = {};
            for (const key of themeKeys) {
                settingsToExport[key] = this.plugin.settings[key];
            }
            fileName = `calendar-period-week-notes-theme.json`;
        } else {
            settingsToExport = this.plugin.settings;
        }

        const data = JSON.stringify(settingsToExport, null, 2);
        const blob = new Blob([data], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = fileName;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);

        new Notice(`${type === 'theme' ? 'Theme' : 'All'} settings exported.`);
    }

    /**
     * Handles the import functionality.
     * @param {File} file The JSON file selected by the user.
     */
    handleImport(file) {
        const reader = new FileReader();
        reader.onload = (event) => {
            try {
                const importedSettings = JSON.parse(event.target.result);

                // Basic validation to see if it's a valid settings file
                if (!importedSettings.hasOwnProperty('fontSize') && !importedSettings.hasOwnProperty('fixedNoteFile')) {
                    new Notice('Error: This does not appear to be a valid settings file.', 5000);
                    return;
                }

                new ConfirmationModal(this.app,
                    'Overwrite Settings?',
                    'Are you sure you want to import these settings? Your current configuration will be overwritten.',
                    async () => {
                        // Merge imported settings into the current settings
                        this.plugin.settings = Object.assign({}, this.plugin.settings, importedSettings);
                        await this.saveAndUpdate();
                        this.refreshDisplay(); // Re-render the settings tab
                        new Notice('Settings imported successfully!');
                    }
                ).open();

            } catch (e) {
                new Notice('Error: Could not parse the JSON file. Ensure it is not corrupted.', 5000);
                console.error("Failed to parse settings JSON:", e);
            }
        };
        reader.readAsText(file);
    }

    renderAboutTab() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "About Calendar Period Week Notes" });

        containerEl.createEl("p", {
            text: "This plugin provides two comprehensive calendar views together with an integrated panel containing a scratchpad area, notes, tasks, and assets."
        });

        new Setting(containerEl)
            .setName("Support the Developer")
            .setDesc("If you find this plugin useful, please consider supporting its development. It's greatly appreciated!")
            .addButton(button => {
                button
                    .setButtonText("‚òï Buy Me a Coffee")
                    .setTooltip("https://buymeacoffee.com/fikte")
                    .onClick(() => {
                        // Make sure to replace "your-username" with your actual username!
                        window.open("https://buymeacoffee.com/fikte");
                    });
                // This makes the button more prominent
                button.buttonEl.addClass('mod-cta');
                button.buttonEl.style.backgroundColor = '#FFDD00';
                button.buttonEl.style.color = '#000000';
                button.buttonEl.style.cursor = 'pointer';
            });
    }


    async renderStartHereTab() {
        const containerEl = this.contentEl;
        containerEl.empty();

        // We are setting the HTML directly to bypass the MarkdownRenderer and avoid plugin conflicts.
        containerEl.innerHTML = `
        <h2>üöÄ Quick Start: Initial Setup</h2>
        <hr>
        <p>Welcome, to get the most out of this plugin, it's recommended to configure a few key settings to match your workflow.</p>
        <hr>
        <h3>1. Set Up Your Scratchpad Note</h3>
        <p>The <strong>Scratchpad</strong> tab needs to point to a note file in your vault. By default, it looks for <code>ScratchPad.md</code> in your vault's root.</p>
        <ul>
            <li><strong>Go to:</strong> "ScratchPad Tab" ‚Üí "ScratchPage note path"></li>
            <li><strong>Action:</strong> Set the <strong>ScratchPad note path</strong> to any note you prefer. If it doesn't exist, the plugin will create it for you.</li>
        </ul>
        <hr>
        <h3>2. Configure Your Daily Notes</h3>
        <p>For calendar dots and click-to-open features to work, the plugin needs to know where your daily notes are.</p>
        <ul>
            <li><strong>Go to:</strong> "Calendar Functional" ‚Üí "Daily Notes"</li>
            <li><strong>Action:</strong> Set your <strong>Daily Notes folder</strong> and <strong>Daily note format</strong> to match your existing setup (e.g., YYYY-MM-DD).</li>
        </ul>
        <hr>
        <h3>3. Define Your Task Format</h3>
        <p>For the plugin to recognize your tasks and due dates, they <strong>must</strong> use the <code>üìÖ</code> emoji for due dates. Download the Tasks plugin for improved compatibility. The following examples show the format of tasks to be used:</p>
        <p><strong>Due Dates:</strong></p>
        <pre>- [ ] My task with a due date üìÖ 2025-10-26</pre>
        <pre>- [ ] Review project notes #work üìÖ 2025-11-01</code></pre>
        <p><strong>Completion Dates:</strong></p>
        <pre>- [x] My completed task üìÖ 2025-10-26 ‚úÖ 2025-09-19</pre>
        <p>NOTE: If you do not use this Task format then you can toggle off the Tasks Tab in the "General Tab" ‚Üí "Tab Visibility" section.</p>
        <hr>
        <h3>4. (Optional) Set Your Period/Week Start Date</h3>
        <p>If you plan to use the custom Period/Week calendar system (e.g., "P7W4"), you should set its starting date. The period/week calendar system, used by some companies for financial year tracking, assumes 13 periods with 4 weeks in each period.</p>
        <ul>
            <li><strong>Go to:</strong> "Calendar Functional" ‚Üí "Period/Week System"</li>
            <li><strong>Action:</strong> Set the <strong>Start of Period 1 Week 1</strong> to the Sunday date of your choice.</li>
        </ul>
    `;
    }

}

module.exports = PeriodMonthPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL2ljYWwuanMvZGlzdC9pY2FsLmpzIiwic3JjL21haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgQklOQVJZIHZhbHVlIHR5cGUsIHdoaWNoIGNvbnRhaW5zIGV4dHJhIG1ldGhvZHMgZm9yIGVuY29kaW5nIGFuZCBkZWNvZGluZy5cbiAqXG4gKiBAbWVtYmVyb2YgSUNBTFxuICovXG5jbGFzcyBCaW5hcnkge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIGJpbmFyeSB2YWx1ZSBmcm9tIHRoZSBnaXZlbiBzdHJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhU3RyaW5nICAgICAgICBUaGUgYmluYXJ5IHZhbHVlIHN0cmluZ1xuICAgKiBAcmV0dXJuIHtCaW5hcnl9ICAgICAgICAgICAgICAgVGhlIGJpbmFyeSB2YWx1ZSBpbnN0YW5jZVxuICAgKi9cbiAgc3RhdGljIGZyb21TdHJpbmcoYVN0cmluZykge1xuICAgIHJldHVybiBuZXcgQmluYXJ5KGFTdHJpbmcpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5CaW5hcnkgaW5zdGFuY2VcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFWYWx1ZSAgICAgVGhlIGJpbmFyeSBkYXRhIGZvciB0aGlzIHZhbHVlXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhVmFsdWUpIHtcbiAgICB0aGlzLnZhbHVlID0gYVZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSB0eXBlIG5hbWUsIHRvIGJlIHVzZWQgaW4gdGhlIGpDYWwgb2JqZWN0LlxuICAgKiBAZGVmYXVsdCBcImJpbmFyeVwiXG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgaWNhbHR5cGUgPSBcImJpbmFyeVwiO1xuXG4gIC8qKlxuICAgKiBCYXNlNjQgZGVjb2RlIHRoZSBjdXJyZW50IHZhbHVlXG4gICAqXG4gICAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICBUaGUgYmFzZTY0LWRlY29kZWQgdmFsdWVcbiAgICovXG4gIGRlY29kZVZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLl9iNjRfZGVjb2RlKHRoaXMudmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuY29kZXMgdGhlIHBhc3NlZCBwYXJhbWV0ZXIgd2l0aCBiYXNlNjQgYW5kIHNldHMgdGhlIGludGVybmFsXG4gICAqIHZhbHVlIHRvIHRoZSByZXN1bHQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhVmFsdWUgICAgICBUaGUgcmF3IGJpbmFyeSB2YWx1ZSB0byBlbmNvZGVcbiAgICovXG4gIHNldEVuY29kZWRWYWx1ZShhVmFsdWUpIHtcbiAgICB0aGlzLnZhbHVlID0gdGhpcy5fYjY0X2VuY29kZShhVmFsdWUpO1xuICB9XG5cbiAgX2I2NF9lbmNvZGUoZGF0YSkge1xuICAgIC8vIGh0dHA6Ly9rZXZpbi52YW56b25uZXZlbGQubmV0XG4gICAgLy8gKyAgIG9yaWdpbmFsIGJ5OiBUeWxlciBBa2lucyAoaHR0cDovL3J1bWtpbi5jb20pXG4gICAgLy8gKyAgIGltcHJvdmVkIGJ5OiBCYXlyb24gR3VldmFyYVxuICAgIC8vICsgICBpbXByb3ZlZCBieTogVGh1bmRlci5tXG4gICAgLy8gKyAgIGltcHJvdmVkIGJ5OiBLZXZpbiB2YW4gWm9ubmV2ZWxkIChodHRwOi8va2V2aW4udmFuem9ubmV2ZWxkLm5ldClcbiAgICAvLyArICAgYnVnZml4ZWQgYnk6IFBlbGxlbnRlc3F1ZSBNYWxlc3VhZGFcbiAgICAvLyArICAgaW1wcm92ZWQgYnk6IEtldmluIHZhbiBab25uZXZlbGQgKGh0dHA6Ly9rZXZpbi52YW56b25uZXZlbGQubmV0KVxuICAgIC8vICsgICBpbXByb3ZlZCBieTogUmFmYcWCIEt1a2F3c2tpIChodHRwOi8va3VrYXdza2kucGwpXG4gICAgLy8gKiAgICAgZXhhbXBsZSAxOiBiYXNlNjRfZW5jb2RlKCdLZXZpbiB2YW4gWm9ubmV2ZWxkJyk7XG4gICAgLy8gKiAgICAgcmV0dXJucyAxOiAnUzJWMmFXNGdkbUZ1SUZwdmJtNWxkbVZzWkE9PSdcbiAgICAvLyBtb3ppbGxhIGhhcyB0aGlzIG5hdGl2ZVxuICAgIC8vIC0gYnV0IGJyZWFrcyBpbiAyLjAuMC4xMiFcbiAgICAvL2lmICh0eXBlb2YgdGhpcy53aW5kb3dbJ2F0b2InXSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gICAgcmV0dXJuIGF0b2IoZGF0YSk7XG4gICAgLy99XG4gICAgbGV0IGI2NCA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpcIiArXG4gICAgICAgICAgICAgIFwiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XCI7XG4gICAgbGV0IG8xLCBvMiwgbzMsIGgxLCBoMiwgaDMsIGg0LCBiaXRzLCBpID0gMCxcbiAgICAgIGFjID0gMCxcbiAgICAgIGVuYyA9IFwiXCIsXG4gICAgICB0bXBfYXJyID0gW107XG5cbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIGRvIHsgLy8gcGFjayB0aHJlZSBvY3RldHMgaW50byBmb3VyIGhleGV0c1xuICAgICAgbzEgPSBkYXRhLmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgIG8yID0gZGF0YS5jaGFyQ29kZUF0KGkrKyk7XG4gICAgICBvMyA9IGRhdGEuY2hhckNvZGVBdChpKyspO1xuXG4gICAgICBiaXRzID0gbzEgPDwgMTYgfCBvMiA8PCA4IHwgbzM7XG5cbiAgICAgIGgxID0gYml0cyA+PiAxOCAmIDB4M2Y7XG4gICAgICBoMiA9IGJpdHMgPj4gMTIgJiAweDNmO1xuICAgICAgaDMgPSBiaXRzID4+IDYgJiAweDNmO1xuICAgICAgaDQgPSBiaXRzICYgMHgzZjtcblxuICAgICAgLy8gdXNlIGhleGV0cyB0byBpbmRleCBpbnRvIGI2NCwgYW5kIGFwcGVuZCByZXN1bHQgdG8gZW5jb2RlZCBzdHJpbmdcbiAgICAgIHRtcF9hcnJbYWMrK10gPSBiNjQuY2hhckF0KGgxKSArIGI2NC5jaGFyQXQoaDIpICsgYjY0LmNoYXJBdChoMykgKyBiNjQuY2hhckF0KGg0KTtcbiAgICB9IHdoaWxlIChpIDwgZGF0YS5sZW5ndGgpO1xuXG4gICAgZW5jID0gdG1wX2Fyci5qb2luKCcnKTtcblxuICAgIGxldCByID0gZGF0YS5sZW5ndGggJSAzO1xuXG4gICAgcmV0dXJuIChyID8gZW5jLnNsaWNlKDAsIHIgLSAzKSA6IGVuYykgKyAnPT09Jy5zbGljZShyIHx8IDMpO1xuXG4gIH1cblxuICBfYjY0X2RlY29kZShkYXRhKSB7XG4gICAgLy8gaHR0cDovL2tldmluLnZhbnpvbm5ldmVsZC5uZXRcbiAgICAvLyArICAgb3JpZ2luYWwgYnk6IFR5bGVyIEFraW5zIChodHRwOi8vcnVta2luLmNvbSlcbiAgICAvLyArICAgaW1wcm92ZWQgYnk6IFRodW5kZXIubVxuICAgIC8vICsgICAgICBpbnB1dCBieTogQW1hbiBHdXB0YVxuICAgIC8vICsgICBpbXByb3ZlZCBieTogS2V2aW4gdmFuIFpvbm5ldmVsZCAoaHR0cDovL2tldmluLnZhbnpvbm5ldmVsZC5uZXQpXG4gICAgLy8gKyAgIGJ1Z2ZpeGVkIGJ5OiBPbm5vIE1hcnNtYW5cbiAgICAvLyArICAgYnVnZml4ZWQgYnk6IFBlbGxlbnRlc3F1ZSBNYWxlc3VhZGFcbiAgICAvLyArICAgaW1wcm92ZWQgYnk6IEtldmluIHZhbiBab25uZXZlbGQgKGh0dHA6Ly9rZXZpbi52YW56b25uZXZlbGQubmV0KVxuICAgIC8vICsgICAgICBpbnB1dCBieTogQnJldHQgWmFtaXIgKGh0dHA6Ly9icmV0dC16YW1pci5tZSlcbiAgICAvLyArICAgYnVnZml4ZWQgYnk6IEtldmluIHZhbiBab25uZXZlbGQgKGh0dHA6Ly9rZXZpbi52YW56b25uZXZlbGQubmV0KVxuICAgIC8vICogICAgIGV4YW1wbGUgMTogYmFzZTY0X2RlY29kZSgnUzJWMmFXNGdkbUZ1SUZwdmJtNWxkbVZzWkE9PScpO1xuICAgIC8vICogICAgIHJldHVybnMgMTogJ0tldmluIHZhbiBab25uZXZlbGQnXG4gICAgLy8gbW96aWxsYSBoYXMgdGhpcyBuYXRpdmVcbiAgICAvLyAtIGJ1dCBicmVha3MgaW4gMi4wLjAuMTIhXG4gICAgLy9pZiAodHlwZW9mIHRoaXMud2luZG93WydidG9hJ10gPT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vICAgIHJldHVybiBidG9hKGRhdGEpO1xuICAgIC8vfVxuICAgIGxldCBiNjQgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaXCIgK1xuICAgICAgICAgICAgICBcImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVwiO1xuICAgIGxldCBvMSwgbzIsIG8zLCBoMSwgaDIsIGgzLCBoNCwgYml0cywgaSA9IDAsXG4gICAgICBhYyA9IDAsXG4gICAgICBkZWMgPSBcIlwiLFxuICAgICAgdG1wX2FyciA9IFtdO1xuXG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICBkYXRhICs9ICcnO1xuXG4gICAgZG8geyAvLyB1bnBhY2sgZm91ciBoZXhldHMgaW50byB0aHJlZSBvY3RldHMgdXNpbmcgaW5kZXggcG9pbnRzIGluIGI2NFxuICAgICAgaDEgPSBiNjQuaW5kZXhPZihkYXRhLmNoYXJBdChpKyspKTtcbiAgICAgIGgyID0gYjY0LmluZGV4T2YoZGF0YS5jaGFyQXQoaSsrKSk7XG4gICAgICBoMyA9IGI2NC5pbmRleE9mKGRhdGEuY2hhckF0KGkrKykpO1xuICAgICAgaDQgPSBiNjQuaW5kZXhPZihkYXRhLmNoYXJBdChpKyspKTtcblxuICAgICAgYml0cyA9IGgxIDw8IDE4IHwgaDIgPDwgMTIgfCBoMyA8PCA2IHwgaDQ7XG5cbiAgICAgIG8xID0gYml0cyA+PiAxNiAmIDB4ZmY7XG4gICAgICBvMiA9IGJpdHMgPj4gOCAmIDB4ZmY7XG4gICAgICBvMyA9IGJpdHMgJiAweGZmO1xuXG4gICAgICBpZiAoaDMgPT0gNjQpIHtcbiAgICAgICAgdG1wX2FyclthYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUobzEpO1xuICAgICAgfSBlbHNlIGlmIChoNCA9PSA2NCkge1xuICAgICAgICB0bXBfYXJyW2FjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZShvMSwgbzIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG1wX2FyclthYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUobzEsIG8yLCBvMyk7XG4gICAgICB9XG4gICAgfSB3aGlsZSAoaSA8IGRhdGEubGVuZ3RoKTtcblxuICAgIGRlYyA9IHRtcF9hcnIuam9pbignJyk7XG5cbiAgICByZXR1cm4gZGVjO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyB2YWx1ZVxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgfVxufVxuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG5jb25zdCBEVVJBVElPTl9MRVRURVJTID0gLyhbUERXSE1UU117MSwxfSkvO1xuY29uc3QgREFUQV9QUk9QU19UT19DT1BZID0gW1wid2Vla3NcIiwgXCJkYXlzXCIsIFwiaG91cnNcIiwgXCJtaW51dGVzXCIsIFwic2Vjb25kc1wiLCBcImlzTmVnYXRpdmVcIl07XG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBcImR1cmF0aW9uXCIgdmFsdWUgdHlwZSwgd2l0aCB2YXJpb3VzIGNhbGN1bGF0aW9uXG4gKiBhbmQgbWFuaXB1bGF0aW9uIG1ldGhvZHMuXG4gKlxuICogQG1lbWJlcm9mIElDQUxcbiAqL1xuY2xhc3MgRHVyYXRpb24ge1xuICAvKipcbiAgICogUmV0dXJucyBhIG5ldyBJQ0FMLkR1cmF0aW9uIGluc3RhbmNlIGZyb20gdGhlIHBhc3NlZCBzZWNvbmRzIHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gYVNlY29uZHMgICAgICAgVGhlIHNlY29uZHMgdG8gY3JlYXRlIHRoZSBpbnN0YW5jZSBmcm9tXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufSAgICAgICAgICAgICBUaGUgbmV3bHkgY3JlYXRlZCBkdXJhdGlvbiBpbnN0YW5jZVxuICAgKi9cbiAgc3RhdGljIGZyb21TZWNvbmRzKGFTZWNvbmRzKSB7XG4gICAgcmV0dXJuIChuZXcgRHVyYXRpb24oKSkuZnJvbVNlY29uZHMoYVNlY29uZHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gc3RyaW5nIGlzIGFuIGlDYWxlbmRhciBkdXJhdGlvbiB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlICAgICAgVGhlIHJhdyBpY2FsIHZhbHVlXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgICAgIFRydWUsIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBvZiB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiBpY2FsIHR5cGVcbiAgICovXG4gIHN0YXRpYyBpc1ZhbHVlU3RyaW5nKHN0cmluZykge1xuICAgIHJldHVybiAoc3RyaW5nWzBdID09PSAnUCcgfHwgc3RyaW5nWzFdID09PSAnUCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIElDQUwuRHVyYXRpb259IGluc3RhbmNlIGZyb20gdGhlIHBhc3NlZCBzdHJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhU3RyICAgICAgIFRoZSBzdHJpbmcgdG8gcGFyc2VcbiAgICogQHJldHVybiB7RHVyYXRpb259ICAgICAgICAgVGhlIGNyZWF0ZWQgZHVyYXRpb24gaW5zdGFuY2VcbiAgICovXG4gIHN0YXRpYyBmcm9tU3RyaW5nKGFTdHIpIHtcbiAgICBsZXQgcG9zID0gMDtcbiAgICBsZXQgZGljdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgbGV0IGNodW5rcyA9IDA7XG5cbiAgICB3aGlsZSAoKHBvcyA9IGFTdHIuc2VhcmNoKERVUkFUSU9OX0xFVFRFUlMpKSAhPT0gLTEpIHtcbiAgICAgIGxldCB0eXBlID0gYVN0cltwb3NdO1xuICAgICAgbGV0IG51bWVyaWMgPSBhU3RyLnNsaWNlKDAsIE1hdGgubWF4KDAsIHBvcykpO1xuICAgICAgYVN0ciA9IGFTdHIuc2xpY2UocG9zICsgMSk7XG5cbiAgICAgIGNodW5rcyArPSBwYXJzZUR1cmF0aW9uQ2h1bmsodHlwZSwgbnVtZXJpYywgZGljdCk7XG4gICAgfVxuXG4gICAgaWYgKGNodW5rcyA8IDIpIHtcbiAgICAgIC8vIFRoZXJlIG11c3QgYmUgYXQgbGVhc3QgYSBjaHVuayB3aXRoIFwiUFwiIGFuZCBzb21lIHVuaXQgY2h1bmtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ2ludmFsaWQgZHVyYXRpb24gdmFsdWU6IE5vdCBlbm91Z2ggZHVyYXRpb24gY29tcG9uZW50cyBpbiBcIicgKyBhU3RyICsgJ1wiJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IER1cmF0aW9uKGRpY3QpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5EdXJhdGlvbiBpbnN0YW5jZSBmcm9tIHRoZSBnaXZlbiBkYXRhIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGFEYXRhICAgICAgICAgICAgICAgIEFuIG9iamVjdCB3aXRoIG1lbWJlcnMgb2YgdGhlIGR1cmF0aW9uXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYURhdGEud2Vla3MgICAgICAgICBEdXJhdGlvbiBpbiB3ZWVrc1xuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLmRheXMgICAgICAgICAgRHVyYXRpb24gaW4gZGF5c1xuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLmhvdXJzICAgICAgICAgRHVyYXRpb24gaW4gaG91cnNcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBhRGF0YS5taW51dGVzICAgICAgIER1cmF0aW9uIGluIG1pbnV0ZXNcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBhRGF0YS5zZWNvbmRzICAgICAgIER1cmF0aW9uIGluIHNlY29uZHNcbiAgICogQHBhcmFtIHtCb29sZWFuPX0gYURhdGEuaXNOZWdhdGl2ZSAgIElmIHRydWUsIHRoZSBkdXJhdGlvbiBpcyBuZWdhdGl2ZVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn0gICAgICAgICAgICAgICAgICAgVGhlIGNyZWF0ZWFkIGR1cmF0aW9uIGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgZnJvbURhdGEoYURhdGEpIHtcbiAgICByZXR1cm4gbmV3IER1cmF0aW9uKGFEYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuRHVyYXRpb24gaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhICAgICAgICAgICAgICAgICBBbiBvYmplY3Qgd2l0aCBtZW1iZXJzIG9mIHRoZSBkdXJhdGlvblxuICAgKiBAcGFyYW0ge051bWJlcj19IGRhdGEud2Vla3MgICAgICAgICAgRHVyYXRpb24gaW4gd2Vla3NcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBkYXRhLmRheXMgICAgICAgICAgIER1cmF0aW9uIGluIGRheXNcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBkYXRhLmhvdXJzICAgICAgICAgIER1cmF0aW9uIGluIGhvdXJzXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS5taW51dGVzICAgICAgICBEdXJhdGlvbiBpbiBtaW51dGVzXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS5zZWNvbmRzICAgICAgICBEdXJhdGlvbiBpbiBzZWNvbmRzXG4gICAqIEBwYXJhbSB7Qm9vbGVhbj19IGRhdGEuaXNOZWdhdGl2ZSAgICBJZiB0cnVlLCB0aGUgZHVyYXRpb24gaXMgbmVnYXRpdmVcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICB0aGlzLndyYXBwZWRKU09iamVjdCA9IHRoaXM7XG4gICAgdGhpcy5mcm9tRGF0YShkYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgd2Vla3MgaW4gdGhpcyBkdXJhdGlvblxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuICB3ZWVrcyA9IDA7XG5cbiAgLyoqXG4gICAqIFRoZSBkYXlzIGluIHRoaXMgZHVyYXRpb25cbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cbiAgZGF5cyA9IDA7XG5cbiAgLyoqXG4gICAqIFRoZSBkYXlzIGluIHRoaXMgZHVyYXRpb25cbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cbiAgaG91cnMgPSAwO1xuXG4gIC8qKlxuICAgKiBUaGUgbWludXRlcyBpbiB0aGlzIGR1cmF0aW9uXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IDBcbiAgICovXG4gIG1pbnV0ZXMgPSAwO1xuXG4gIC8qKlxuICAgKiBUaGUgc2Vjb25kcyBpbiB0aGlzIGR1cmF0aW9uXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IDBcbiAgICovXG4gIHNlY29uZHMgPSAwO1xuXG4gIC8qKlxuICAgKiBUaGUgc2Vjb25kcyBpbiB0aGlzIGR1cmF0aW9uXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgaXNOZWdhdGl2ZSA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBUaGUgY2xhc3MgaWRlbnRpZmllci5cbiAgICogQGNvbnN0YW50XG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEBkZWZhdWx0IFwiaWNhbGR1cmF0aW9uXCJcbiAgICovXG4gIGljYWxjbGFzcyA9IFwiaWNhbGR1cmF0aW9uXCI7XG5cbiAgLyoqXG4gICAqIFRoZSB0eXBlIG5hbWUsIHRvIGJlIHVzZWQgaW4gdGhlIGpDYWwgb2JqZWN0LlxuICAgKiBAY29uc3RhbnRcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGRlZmF1bHQgXCJkdXJhdGlvblwiXG4gICAqL1xuICBpY2FsdHlwZSA9IFwiZHVyYXRpb25cIjtcblxuICAvKipcbiAgICogUmV0dXJucyBhIGNsb25lIG9mIHRoZSBkdXJhdGlvbiBvYmplY3QuXG4gICAqXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufSAgICAgIFRoZSBjbG9uZWQgb2JqZWN0XG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gRHVyYXRpb24uZnJvbURhdGEodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGR1cmF0aW9uIHZhbHVlIGV4cHJlc3NlZCBhcyBhIG51bWJlciBvZiBzZWNvbmRzLlxuICAgKlxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgICAgIFRoZSBkdXJhdGlvbiB2YWx1ZSBpbiBzZWNvbmRzXG4gICAqL1xuICB0b1NlY29uZHMoKSB7XG4gICAgbGV0IHNlY29uZHMgPSB0aGlzLnNlY29uZHMgKyA2MCAqIHRoaXMubWludXRlcyArIDM2MDAgKiB0aGlzLmhvdXJzICtcbiAgICAgICAgICAgICAgICAgIDg2NDAwICogdGhpcy5kYXlzICsgNyAqIDg2NDAwICogdGhpcy53ZWVrcztcbiAgICByZXR1cm4gKHRoaXMuaXNOZWdhdGl2ZSA/IC1zZWNvbmRzIDogc2Vjb25kcyk7XG4gIH1cblxuICAvKipcbiAgICogUmVhZHMgdGhlIHBhc3NlZCBzZWNvbmRzIHZhbHVlIGludG8gdGhpcyBkdXJhdGlvbiBvYmplY3QuIEFmdGVyd2FyZHMsXG4gICAqIG1lbWJlcnMgbGlrZSB7QGxpbmsgSUNBTC5EdXJhdGlvbiNkYXlzIGRheXN9IGFuZCB7QGxpbmsgSUNBTC5EdXJhdGlvbiN3ZWVrcyB3ZWVrc30gd2lsbCBiZSBzZXQgdXBcbiAgICogYWNjb3JkaW5nbHkuXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBhU2Vjb25kcyAgICAgVGhlIGR1cmF0aW9uIHZhbHVlIGluIHNlY29uZHNcbiAgICogQHJldHVybiB7RHVyYXRpb259ICAgICAgICAgICBSZXR1cm5zIHRoaXMgaW5zdGFuY2VcbiAgICovXG4gIGZyb21TZWNvbmRzKGFTZWNvbmRzKSB7XG4gICAgbGV0IHNlY3MgPSBNYXRoLmFicyhhU2Vjb25kcyk7XG5cbiAgICB0aGlzLmlzTmVnYXRpdmUgPSAoYVNlY29uZHMgPCAwKTtcbiAgICB0aGlzLmRheXMgPSB0cnVuYyhzZWNzIC8gODY0MDApO1xuXG4gICAgLy8gSWYgd2UgaGF2ZSBhIGZsYXQgbnVtYmVyIG9mIHdlZWtzLCB1c2UgdGhlbS5cbiAgICBpZiAodGhpcy5kYXlzICUgNyA9PSAwKSB7XG4gICAgICB0aGlzLndlZWtzID0gdGhpcy5kYXlzIC8gNztcbiAgICAgIHRoaXMuZGF5cyA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMud2Vla3MgPSAwO1xuICAgIH1cblxuICAgIHNlY3MgLT0gKHRoaXMuZGF5cyArIDcgKiB0aGlzLndlZWtzKSAqIDg2NDAwO1xuXG4gICAgdGhpcy5ob3VycyA9IHRydW5jKHNlY3MgLyAzNjAwKTtcbiAgICBzZWNzIC09IHRoaXMuaG91cnMgKiAzNjAwO1xuXG4gICAgdGhpcy5taW51dGVzID0gdHJ1bmMoc2VjcyAvIDYwKTtcbiAgICBzZWNzIC09IHRoaXMubWludXRlcyAqIDYwO1xuXG4gICAgdGhpcy5zZWNvbmRzID0gc2VjcztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIHRoZSBjdXJyZW50IGluc3RhbmNlIHVzaW5nIG1lbWJlcnMgZnJvbSB0aGUgcGFzc2VkIGRhdGEgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYURhdGEgICAgICAgICAgICAgICAgQW4gb2JqZWN0IHdpdGggbWVtYmVycyBvZiB0aGUgZHVyYXRpb25cbiAgICogQHBhcmFtIHtOdW1iZXI9fSBhRGF0YS53ZWVrcyAgICAgICAgIER1cmF0aW9uIGluIHdlZWtzXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYURhdGEuZGF5cyAgICAgICAgICBEdXJhdGlvbiBpbiBkYXlzXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYURhdGEuaG91cnMgICAgICAgICBEdXJhdGlvbiBpbiBob3Vyc1xuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLm1pbnV0ZXMgICAgICAgRHVyYXRpb24gaW4gbWludXRlc1xuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLnNlY29uZHMgICAgICAgRHVyYXRpb24gaW4gc2Vjb25kc1xuICAgKiBAcGFyYW0ge0Jvb2xlYW49fSBhRGF0YS5pc05lZ2F0aXZlICAgSWYgdHJ1ZSwgdGhlIGR1cmF0aW9uIGlzIG5lZ2F0aXZlXG4gICAqL1xuICBmcm9tRGF0YShhRGF0YSkge1xuICAgIGZvciAobGV0IHByb3Agb2YgREFUQV9QUk9QU19UT19DT1BZKSB7XG4gICAgICBpZiAoYURhdGEgJiYgcHJvcCBpbiBhRGF0YSkge1xuICAgICAgICB0aGlzW3Byb3BdID0gYURhdGFbcHJvcF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzW3Byb3BdID0gMDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzZXRzIHRoZSBkdXJhdGlvbiBpbnN0YW5jZSB0byB0aGUgZGVmYXVsdCB2YWx1ZXMsIGkuZS4gUFQwU1xuICAgKi9cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5pc05lZ2F0aXZlID0gZmFsc2U7XG4gICAgdGhpcy53ZWVrcyA9IDA7XG4gICAgdGhpcy5kYXlzID0gMDtcbiAgICB0aGlzLmhvdXJzID0gMDtcbiAgICB0aGlzLm1pbnV0ZXMgPSAwO1xuICAgIHRoaXMuc2Vjb25kcyA9IDA7XG4gIH1cblxuICAvKipcbiAgICogQ29tcGFyZXMgdGhlIGR1cmF0aW9uIGluc3RhbmNlIHdpdGggYW5vdGhlciBvbmUuXG4gICAqXG4gICAqIEBwYXJhbSB7RHVyYXRpb259IGFPdGhlciAgICAgICAgICAgICBUaGUgaW5zdGFuY2UgdG8gY29tcGFyZSB3aXRoXG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAgICAgICAgICAtMSwgMCBvciAxIGZvciBsZXNzL2VxdWFsL2dyZWF0ZXJcbiAgICovXG4gIGNvbXBhcmUoYU90aGVyKSB7XG4gICAgbGV0IHRoaXNTZWNvbmRzID0gdGhpcy50b1NlY29uZHMoKTtcbiAgICBsZXQgb3RoZXJTZWNvbmRzID0gYU90aGVyLnRvU2Vjb25kcygpO1xuICAgIHJldHVybiAodGhpc1NlY29uZHMgPiBvdGhlclNlY29uZHMpIC0gKHRoaXNTZWNvbmRzIDwgb3RoZXJTZWNvbmRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3JtYWxpemVzIHRoZSBkdXJhdGlvbiBpbnN0YW5jZS4gRm9yIGV4YW1wbGUsIGEgZHVyYXRpb24gd2l0aCBhIHZhbHVlXG4gICAqIG9mIDYxIHNlY29uZHMgd2lsbCBiZSBub3JtYWxpemVkIHRvIDEgbWludXRlIGFuZCAxIHNlY29uZC5cbiAgICovXG4gIG5vcm1hbGl6ZSgpIHtcbiAgICB0aGlzLmZyb21TZWNvbmRzKHRoaXMudG9TZWNvbmRzKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBkdXJhdGlvbi5cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgdG9TdHJpbmcoKSB7XG4gICAgaWYgKHRoaXMudG9TZWNvbmRzKCkgPT0gMCkge1xuICAgICAgcmV0dXJuIFwiUFQwU1wiO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgc3RyID0gXCJcIjtcbiAgICAgIGlmICh0aGlzLmlzTmVnYXRpdmUpIHN0ciArPSBcIi1cIjtcbiAgICAgIHN0ciArPSBcIlBcIjtcbiAgICAgIGxldCBoYXNXZWVrcyA9IGZhbHNlO1xuICAgICAgaWYgKHRoaXMud2Vla3MpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF5cyB8fCB0aGlzLmhvdXJzIHx8IHRoaXMubWludXRlcyB8fCB0aGlzLnNlY29uZHMpIHtcbiAgICAgICAgICBzdHIgKz0gKHRoaXMud2Vla3MgKiA3ICsgdGhpcy5kYXlzKSArIFwiRFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0ciArPSAodGhpcy53ZWVrcyArIFwiV1wiKTtcbiAgICAgICAgICBoYXNXZWVrcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXlzKSB7XG4gICAgICAgIHN0ciArPSAodGhpcy5kYXlzICsgXCJEXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWhhc1dlZWtzKSB7XG4gICAgICAgIGlmICh0aGlzLmhvdXJzIHx8IHRoaXMubWludXRlcyB8fCB0aGlzLnNlY29uZHMpIHtcbiAgICAgICAgICBzdHIgKz0gXCJUXCI7XG4gICAgICAgICAgaWYgKHRoaXMuaG91cnMpIHtcbiAgICAgICAgICAgIHN0ciArPSB0aGlzLmhvdXJzICsgXCJIXCI7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMubWludXRlcykge1xuICAgICAgICAgICAgc3RyICs9IHRoaXMubWludXRlcyArIFwiTVwiO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0aGlzLnNlY29uZHMpIHtcbiAgICAgICAgICAgIHN0ciArPSB0aGlzLnNlY29uZHMgKyBcIlNcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIGlDYWxlbmRhciBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBkdXJhdGlvbi5cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgdG9JQ0FMU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBJbnRlcm5hbCBoZWxwZXIgZnVuY3Rpb24gdG8gaGFuZGxlIGEgY2h1bmsgb2YgYSBkdXJhdGlvbi5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtTdHJpbmd9IGxldHRlciB0eXBlIG9mIGR1cmF0aW9uIGNodW5rXG4gKiBAcGFyYW0ge1N0cmluZ30gbnVtYmVyIG51bWVyaWMgdmFsdWUgb3IgLS8rXG4gKiBAcGFyYW0ge09iamVjdH0gZGljdCB0YXJnZXQgdG8gYXNzaWduIHZhbHVlcyB0b1xuICovXG5mdW5jdGlvbiBwYXJzZUR1cmF0aW9uQ2h1bmsobGV0dGVyLCBudW1iZXIsIG9iamVjdCkge1xuICBsZXQgdHlwZTtcbiAgc3dpdGNoIChsZXR0ZXIpIHtcbiAgICBjYXNlICdQJzpcbiAgICAgIGlmIChudW1iZXIgJiYgbnVtYmVyID09PSAnLScpIHtcbiAgICAgICAgb2JqZWN0LmlzTmVnYXRpdmUgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb2JqZWN0LmlzTmVnYXRpdmUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8vIHBlcmlvZFxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnRCc6XG4gICAgICB0eXBlID0gJ2RheXMnO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnVyc6XG4gICAgICB0eXBlID0gJ3dlZWtzJztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ0gnOlxuICAgICAgdHlwZSA9ICdob3Vycyc7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdNJzpcbiAgICAgIHR5cGUgPSAnbWludXRlcyc7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdTJzpcbiAgICAgIHR5cGUgPSAnc2Vjb25kcyc7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgLy8gTm90IGEgdmFsaWQgY2h1bmtcbiAgICAgIHJldHVybiAwO1xuICB9XG5cbiAgaWYgKHR5cGUpIHtcbiAgICBpZiAoIW51bWJlciAmJiBudW1iZXIgIT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ2ludmFsaWQgZHVyYXRpb24gdmFsdWU6IE1pc3NpbmcgbnVtYmVyIGJlZm9yZSBcIicgKyBsZXR0ZXIgKyAnXCInXG4gICAgICApO1xuICAgIH1cbiAgICBsZXQgbnVtID0gcGFyc2VJbnQobnVtYmVyLCAxMCk7XG4gICAgaWYgKGlzU3RyaWN0bHlOYU4obnVtKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnaW52YWxpZCBkdXJhdGlvbiB2YWx1ZTogSW52YWxpZCBudW1iZXIgXCInICsgbnVtYmVyICsgJ1wiIGJlZm9yZSBcIicgKyBsZXR0ZXIgKyAnXCInXG4gICAgICApO1xuICAgIH1cbiAgICBvYmplY3RbdHlwZV0gPSBudW07XG4gIH1cblxuICByZXR1cm4gMTtcbn1cblxuLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cblxuLyoqXG4gKiBUaGlzIGxldHMgdHlwZXNjcmlwdCByZXNvbHZlIG91ciBjdXN0b20gdHlwZXMgaW4gdGhlXG4gKiBnZW5lcmF0ZWQgZC50cyBmaWxlcyAoanNkb2MgdHlwZWRlZnMgYXJlIGNvbnZlcnRlZCB0byB0eXBlc2NyaXB0IHR5cGVzKS5cbiAqIElnbm9yZSBwcmV2ZW50cyB0aGUgdHlwZWRlZnMgZnJvbSBiZWluZyBkb2N1bWVudGVkIG1vcmUgdGhhbiBvbmNlLlxuICogQGlnbm9yZVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vdHlwZXMuanNcIikuakNhbENvbXBvbmVudH0gakNhbENvbXBvbmVudFxuICogSW1wb3J0cyB0aGUgJ29jY3VycmVuY2VEZXRhaWxzJyB0eXBlIGZyb20gdGhlIFwidHlwZXMuanNcIiBtb2R1bGVcbiAqL1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgXCJwZXJpb2RcIiB2YWx1ZSB0eXBlLCB3aXRoIHZhcmlvdXMgY2FsY3VsYXRpb24gYW5kIG1hbmlwdWxhdGlvbiBtZXRob2RzLlxuICpcbiAqIEBtZW1iZXJvZiBJQ0FMXG4gKi9cbmNsYXNzIFBlcmlvZCB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IHtAbGluayBJQ0FMLlBlcmlvZH0gaW5zdGFuY2UgZnJvbSB0aGUgcGFzc2VkIHN0cmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciAgICAgICAgICAgIFRoZSBzdHJpbmcgdG8gcGFyc2VcbiAgICogQHBhcmFtIHtQcm9wZXJ0eX0gcHJvcCAgICAgICAgIFRoZSBwcm9wZXJ0eSB0aGlzIHBlcmlvZCB3aWxsIGJlIG9uXG4gICAqIEByZXR1cm4ge1BlcmlvZH0gICAgICAgICAgICAgICBUaGUgY3JlYXRlZCBwZXJpb2QgaW5zdGFuY2VcbiAgICovXG4gIHN0YXRpYyBmcm9tU3RyaW5nKHN0ciwgcHJvcCkge1xuICAgIGxldCBwYXJ0cyA9IHN0ci5zcGxpdCgnLycpO1xuXG4gICAgaWYgKHBhcnRzLmxlbmd0aCAhPT0gMikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnSW52YWxpZCBzdHJpbmcgdmFsdWU6IFwiJyArIHN0ciArICdcIiBtdXN0IGNvbnRhaW4gYSBcIi9cIiBjaGFyLidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IG9wdGlvbnMgPSB7XG4gICAgICBzdGFydDogVGltZS5mcm9tRGF0ZVRpbWVTdHJpbmcocGFydHNbMF0sIHByb3ApXG4gICAgfTtcblxuICAgIGxldCBlbmQgPSBwYXJ0c1sxXTtcblxuICAgIGlmIChEdXJhdGlvbi5pc1ZhbHVlU3RyaW5nKGVuZCkpIHtcbiAgICAgIG9wdGlvbnMuZHVyYXRpb24gPSBEdXJhdGlvbi5mcm9tU3RyaW5nKGVuZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wdGlvbnMuZW5kID0gVGltZS5mcm9tRGF0ZVRpbWVTdHJpbmcoZW5kLCBwcm9wKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFBlcmlvZChvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IHtAbGluayBJQ0FMLlBlcmlvZH0gaW5zdGFuY2UgZnJvbSB0aGUgZ2l2ZW4gZGF0YSBvYmplY3QuXG4gICAqIFRoZSBwYXNzZWQgZGF0YSBvYmplY3QgY2Fubm90IGNvbnRhaW4gYm90aCBhbmQgZW5kIGRhdGUgYW5kIGEgZHVyYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhRGF0YSAgICAgICAgICAgICAgICAgIEFuIG9iamVjdCB3aXRoIG1lbWJlcnMgb2YgdGhlIHBlcmlvZFxuICAgKiBAcGFyYW0ge1RpbWU9fSBhRGF0YS5zdGFydCAgICAgICAgICAgICBUaGUgc3RhcnQgb2YgdGhlIHBlcmlvZFxuICAgKiBAcGFyYW0ge1RpbWU9fSBhRGF0YS5lbmQgICAgICAgICAgICAgICBUaGUgZW5kIG9mIHRoZSBwZXJpb2RcbiAgICogQHBhcmFtIHtEdXJhdGlvbj19IGFEYXRhLmR1cmF0aW9uICAgICAgVGhlIGR1cmF0aW9uIG9mIHRoZSBwZXJpb2RcbiAgICogQHJldHVybiB7UGVyaW9kfSAgICAgICAgICAgICAgICAgICAgICAgVGhlIHBlcmlvZCBpbnN0YW5jZVxuICAgKi9cbiAgc3RhdGljIGZyb21EYXRhKGFEYXRhKSB7XG4gICAgcmV0dXJuIG5ldyBQZXJpb2QoYURhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgcGVyaW9kIGluc3RhbmNlIGZyb20gdGhlIGdpdmVuIGpDYWwgZGF0YSBhcnJheS4gVGhlIGZpcnN0XG4gICAqIG1lbWJlciBpcyBhbHdheXMgdGhlIHN0YXJ0IGRhdGUgc3RyaW5nLCB0aGUgc2Vjb25kIG1lbWJlciBpcyBlaXRoZXIgYVxuICAgKiBkdXJhdGlvbiBvciBlbmQgZGF0ZSBzdHJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7akNhbENvbXBvbmVudH0gYURhdGEgICAgICAgICAgIFRoZSBqQ2FsIGRhdGEgYXJyYXlcbiAgICogQHBhcmFtIHtQcm9wZXJ0eX0gYVByb3AgICAgICAgICAgICAgICAgVGhlIHByb3BlcnR5IHRoaXMgakNhbCBkYXRhIGlzIG9uXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gYUxlbmllbnQgICAgICAgICAgICAgIElmIHRydWUsIGRhdGEgdmFsdWUgY2FuIGJlIGJvdGggZGF0ZSBhbmQgZGF0ZS10aW1lXG4gICAqIEByZXR1cm4ge1BlcmlvZH0gICAgICAgICAgICAgICAgICAgICAgIFRoZSBwZXJpb2QgaW5zdGFuY2VcbiAgICovXG4gIHN0YXRpYyBmcm9tSlNPTihhRGF0YSwgYVByb3AsIGFMZW5pZW50KSB7XG4gICAgZnVuY3Rpb24gZnJvbURhdGVPckRhdGVUaW1lU3RyaW5nKGFWYWx1ZSwgZGF0ZVByb3ApIHtcbiAgICAgIGlmIChhTGVuaWVudCkge1xuICAgICAgICByZXR1cm4gVGltZS5mcm9tU3RyaW5nKGFWYWx1ZSwgZGF0ZVByb3ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFRpbWUuZnJvbURhdGVUaW1lU3RyaW5nKGFWYWx1ZSwgZGF0ZVByb3ApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChEdXJhdGlvbi5pc1ZhbHVlU3RyaW5nKGFEYXRhWzFdKSkge1xuICAgICAgcmV0dXJuIFBlcmlvZC5mcm9tRGF0YSh7XG4gICAgICAgIHN0YXJ0OiBmcm9tRGF0ZU9yRGF0ZVRpbWVTdHJpbmcoYURhdGFbMF0sIGFQcm9wKSxcbiAgICAgICAgZHVyYXRpb246IER1cmF0aW9uLmZyb21TdHJpbmcoYURhdGFbMV0pXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFBlcmlvZC5mcm9tRGF0YSh7XG4gICAgICAgIHN0YXJ0OiBmcm9tRGF0ZU9yRGF0ZVRpbWVTdHJpbmcoYURhdGFbMF0sIGFQcm9wKSxcbiAgICAgICAgZW5kOiBmcm9tRGF0ZU9yRGF0ZVRpbWVTdHJpbmcoYURhdGFbMV0sIGFQcm9wKVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5QZXJpb2QgaW5zdGFuY2UuIFRoZSBwYXNzZWQgZGF0YSBvYmplY3QgY2Fubm90IGNvbnRhaW4gYm90aCBhbmQgZW5kIGRhdGUgYW5kXG4gICAqIGEgZHVyYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhRGF0YSAgICAgICAgICAgICAgICAgIEFuIG9iamVjdCB3aXRoIG1lbWJlcnMgb2YgdGhlIHBlcmlvZFxuICAgKiBAcGFyYW0ge1RpbWU9fSBhRGF0YS5zdGFydCAgICAgICAgICAgICBUaGUgc3RhcnQgb2YgdGhlIHBlcmlvZFxuICAgKiBAcGFyYW0ge1RpbWU9fSBhRGF0YS5lbmQgICAgICAgICAgICAgICBUaGUgZW5kIG9mIHRoZSBwZXJpb2RcbiAgICogQHBhcmFtIHtEdXJhdGlvbj19IGFEYXRhLmR1cmF0aW9uICAgICAgVGhlIGR1cmF0aW9uIG9mIHRoZSBwZXJpb2RcbiAgICovXG4gIGNvbnN0cnVjdG9yKGFEYXRhKSB7XG4gICAgdGhpcy53cmFwcGVkSlNPYmplY3QgPSB0aGlzO1xuXG4gICAgaWYgKGFEYXRhICYmICdzdGFydCcgaW4gYURhdGEpIHtcbiAgICAgIGlmIChhRGF0YS5zdGFydCAmJiAhKGFEYXRhLnN0YXJ0IGluc3RhbmNlb2YgVGltZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignLnN0YXJ0IG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgSUNBTC5UaW1lJyk7XG4gICAgICB9XG4gICAgICB0aGlzLnN0YXJ0ID0gYURhdGEuc3RhcnQ7XG4gICAgfVxuXG4gICAgaWYgKGFEYXRhICYmIGFEYXRhLmVuZCAmJiBhRGF0YS5kdXJhdGlvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjYW5ub3QgYWNjZXB0IGJvdGggZW5kIGFuZCBkdXJhdGlvbicpO1xuICAgIH1cblxuICAgIGlmIChhRGF0YSAmJiAnZW5kJyBpbiBhRGF0YSkge1xuICAgICAgaWYgKGFEYXRhLmVuZCAmJiAhKGFEYXRhLmVuZCBpbnN0YW5jZW9mIFRpbWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJy5lbmQgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBJQ0FMLlRpbWUnKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZW5kID0gYURhdGEuZW5kO1xuICAgIH1cblxuICAgIGlmIChhRGF0YSAmJiAnZHVyYXRpb24nIGluIGFEYXRhKSB7XG4gICAgICBpZiAoYURhdGEuZHVyYXRpb24gJiYgIShhRGF0YS5kdXJhdGlvbiBpbnN0YW5jZW9mIER1cmF0aW9uKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcuZHVyYXRpb24gbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBJQ0FMLkR1cmF0aW9uJyk7XG4gICAgICB9XG4gICAgICB0aGlzLmR1cmF0aW9uID0gYURhdGEuZHVyYXRpb247XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogVGhlIHN0YXJ0IG9mIHRoZSBwZXJpb2RcbiAgICogQHR5cGUge1RpbWV9XG4gICAqL1xuICBzdGFydCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBlbmQgb2YgdGhlIHBlcmlvZFxuICAgKiBAdHlwZSB7VGltZX1cbiAgICovXG4gIGVuZCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBkdXJhdGlvbiBvZiB0aGUgcGVyaW9kXG4gICAqIEB0eXBlIHtEdXJhdGlvbn1cbiAgICovXG4gIGR1cmF0aW9uID0gbnVsbDtcblxuICAvKipcbiAgICogVGhlIGNsYXNzIGlkZW50aWZpZXIuXG4gICAqIEBjb25zdGFudFxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAZGVmYXVsdCBcImljYWxwZXJpb2RcIlxuICAgKi9cbiAgaWNhbGNsYXNzID0gXCJpY2FscGVyaW9kXCI7XG5cbiAgLyoqXG4gICAqIFRoZSB0eXBlIG5hbWUsIHRvIGJlIHVzZWQgaW4gdGhlIGpDYWwgb2JqZWN0LlxuICAgKiBAY29uc3RhbnRcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGRlZmF1bHQgXCJwZXJpb2RcIlxuICAgKi9cbiAgaWNhbHR5cGUgPSBcInBlcmlvZFwiO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY2xvbmUgb2YgdGhlIGR1cmF0aW9uIG9iamVjdC5cbiAgICpcbiAgICogQHJldHVybiB7UGVyaW9kfSAgICAgIFRoZSBjbG9uZWQgb2JqZWN0XG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gUGVyaW9kLmZyb21EYXRhKHtcbiAgICAgIHN0YXJ0OiB0aGlzLnN0YXJ0ID8gdGhpcy5zdGFydC5jbG9uZSgpIDogbnVsbCxcbiAgICAgIGVuZDogdGhpcy5lbmQgPyB0aGlzLmVuZC5jbG9uZSgpIDogbnVsbCxcbiAgICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uID8gdGhpcy5kdXJhdGlvbi5jbG9uZSgpIDogbnVsbFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgdGhlIGR1cmF0aW9uIG9mIHRoZSBwZXJpb2QsIGVpdGhlciBkaXJlY3RseSBvciBieSBzdWJ0cmFjdGluZ1xuICAgKiBzdGFydCBmcm9tIGVuZCBkYXRlLlxuICAgKlxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn0gICAgICBUaGUgY2FsY3VsYXRlZCBkdXJhdGlvblxuICAgKi9cbiAgZ2V0RHVyYXRpb24oKSB7XG4gICAgaWYgKHRoaXMuZHVyYXRpb24pIHtcbiAgICAgIHJldHVybiB0aGlzLmR1cmF0aW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5lbmQuc3VidHJhY3REYXRlKHRoaXMuc3RhcnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGVzIHRoZSBlbmQgZGF0ZSBvZiB0aGUgcGVyaW9kLCBlaXRoZXIgZGlyZWN0bHkgb3IgYnkgYWRkaW5nXG4gICAqIGR1cmF0aW9uIHRvIHN0YXJ0IGRhdGUuXG4gICAqXG4gICAqIEByZXR1cm4ge1RpbWV9ICAgICAgICAgIFRoZSBjYWxjdWxhdGVkIGVuZCBkYXRlXG4gICAqL1xuICBnZXRFbmQoKSB7XG4gICAgaWYgKHRoaXMuZW5kKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbmQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBlbmQgPSB0aGlzLnN0YXJ0LmNsb25lKCk7XG4gICAgICBlbmQuYWRkRHVyYXRpb24odGhpcy5kdXJhdGlvbik7XG4gICAgICByZXR1cm4gZW5kO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wYXJlIHRoaXMgcGVyaW9kIHdpdGggYSBkYXRlIG9yIG90aGVyIHBlcmlvZC4gVG8gbWFpbnRhaW4gdGhlIGxvZ2ljIHdoZXJlIGEuY29tcGFyZShiKVxuICAgKiByZXR1cm5zIDEgd2hlbiBhID4gYiwgdGhpcyBmdW5jdGlvbiB3aWxsIHJldHVybiAxIHdoZW4gdGhlIHBlcmlvZCBpcyBhZnRlciB0aGUgZGF0ZSwgMCB3aGVuIHRoZVxuICAgKiBkYXRlIGlzIHdpdGhpbiB0aGUgcGVyaW9kLCBhbmQgLTEgd2hlbiB0aGUgcGVyaW9kIGlzIGJlZm9yZSB0aGUgZGF0ZS4gV2hlbiBjb21wYXJpbmcgdHdvXG4gICAqIHBlcmlvZHMsIGFzIHNvb24gYXMgdGhleSBvdmVybGFwIGluIGFueSB3YXkgdGhpcyB3aWxsIHJldHVybiAwLlxuICAgKlxuICAgKiBAcGFyYW0ge1RpbWV8UGVyaW9kfSBkdCAgICBUaGUgZGF0ZSBvciBvdGhlciBwZXJpb2QgdG8gY29tcGFyZSB3aXRoXG4gICAqL1xuICBjb21wYXJlKGR0KSB7XG4gICAgaWYgKGR0LmNvbXBhcmUodGhpcy5zdGFydCkgPCAwKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGR0LmNvbXBhcmUodGhpcy5nZXRFbmQoKSkgPiAwKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcGVyaW9kLlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5zdGFydCArIFwiL1wiICsgKHRoaXMuZW5kIHx8IHRoaXMuZHVyYXRpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBqQ2FsIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcGVyaW9kIHR5cGUuXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gW3RoaXMuc3RhcnQudG9TdHJpbmcoKSwgKHRoaXMuZW5kIHx8IHRoaXMuZHVyYXRpb24pLnRvU3RyaW5nKCldO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBpQ2FsZW5kYXIgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcGVyaW9kLlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICB0b0lDQUxTdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhcnQudG9JQ0FMU3RyaW5nKCkgKyBcIi9cIiArXG4gICAgICAgICAgICh0aGlzLmVuZCB8fCB0aGlzLmR1cmF0aW9uKS50b0lDQUxTdHJpbmcoKTtcbiAgfVxufVxuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG4vKipcbiAqIFRoaXMgbGV0cyB0eXBlc2NyaXB0IHJlc29sdmUgb3VyIGN1c3RvbSB0eXBlcyBpbiB0aGVcbiAqIGdlbmVyYXRlZCBkLnRzIGZpbGVzIChqc2RvYyB0eXBlZGVmcyBhcmUgY29udmVydGVkIHRvIHR5cGVzY3JpcHQgdHlwZXMpLlxuICogSWdub3JlIHByZXZlbnRzIHRoZSB0eXBlZGVmcyBmcm9tIGJlaW5nIGRvY3VtZW50ZWQgbW9yZSB0aGFuIG9uY2UuXG4gKlxuICogQGlnbm9yZVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vdHlwZXMuanNcIikud2Vla0RheX0gd2Vla0RheVxuICogSW1wb3J0cyB0aGUgJ3dlZWtEYXknIHR5cGUgZnJvbSB0aGUgXCJ0eXBlcy5qc1wiIG1vZHVsZVxuICpcbiAqIEBpZ25vcmVcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL3R5cGVzLmpzXCIpLnRpbWVJbml0fSB0aW1lSW5pdFxuICogSW1wb3J0cyB0aGUgJ3RpbWVJbml0JyB0eXBlIGZyb20gdGhlIFwidHlwZXMuanNcIiBtb2R1bGVcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIGlDYWxlbmRhciBUaW1lIHJlcHJlc2VudGF0aW9uIChzaW1pbGFyIHRvIEpTIERhdGUgb2JqZWN0KS4gIEZ1bGx5XG4gKiBpbmRlcGVuZGVudCBvZiBzeXN0ZW0gKE9TKSB0aW1lem9uZSAvIHRpbWUuICBVbmxpa2UgSlMgRGF0ZSwgdGhlIG1vbnRoXG4gKiBKYW51YXJ5IGlzIDEsIG5vdCB6ZXJvLlxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgdGltZSA9IG5ldyBJQ0FMLlRpbWUoe1xuICogICB5ZWFyOiAyMDEyLFxuICogICBtb250aDogMTAsXG4gKiAgIGRheTogMTFcbiAqICAgbWludXRlOiAwLFxuICogICBzZWNvbmQ6IDAsXG4gKiAgIGlzRGF0ZTogZmFsc2VcbiAqIH0pO1xuICpcbiAqXG4gKiBAbWVtYmVyb2YgSUNBTFxuKi9cbmNsYXNzIFRpbWUge1xuICBzdGF0aWMgX2Rvd0NhY2hlID0ge307XG4gIHN0YXRpYyBfd25DYWNoZSA9IHt9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBkYXlzIGluIHRoZSBnaXZlbiBtb250aFxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gbW9udGggICAgICBUaGUgbW9udGggdG8gY2hlY2tcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHllYXIgICAgICAgVGhlIHllYXIgdG8gY2hlY2tcbiAgICogQHJldHVybiB7TnVtYmVyfSAgICAgICAgICAgVGhlIG51bWJlciBvZiBkYXlzIGluIHRoZSBtb250aFxuICAgKi9cbiAgc3RhdGljIGRheXNJbk1vbnRoKG1vbnRoLCB5ZWFyKSB7XG4gICAgbGV0IF9kYXlzSW5Nb250aCA9IFswLCAzMSwgMjgsIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXTtcbiAgICBsZXQgZGF5cyA9IDMwO1xuXG4gICAgaWYgKG1vbnRoIDwgMSB8fCBtb250aCA+IDEyKSByZXR1cm4gZGF5cztcblxuICAgIGRheXMgPSBfZGF5c0luTW9udGhbbW9udGhdO1xuXG4gICAgaWYgKG1vbnRoID09IDIpIHtcbiAgICAgIGRheXMgKz0gVGltZS5pc0xlYXBZZWFyKHllYXIpO1xuICAgIH1cblxuICAgIHJldHVybiBkYXlzO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgeWVhciBpcyBhIGxlYXAgeWVhclxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0geWVhciAgICAgICBUaGUgeWVhciB0byBjaGVja1xuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgICBUcnVlLCBpZiB0aGUgeWVhciBpcyBhIGxlYXAgeWVhclxuICAgKi9cbiAgc3RhdGljIGlzTGVhcFllYXIoeWVhcikge1xuICAgIGlmICh5ZWFyIDw9IDE3NTIpIHtcbiAgICAgIHJldHVybiAoKHllYXIgJSA0KSA9PSAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICgoKHllYXIgJSA0ID09IDApICYmICh5ZWFyICUgMTAwICE9IDApKSB8fCAoeWVhciAlIDQwMCA9PSAwKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBJQ0FMLlRpbWUgZnJvbSB0aGUgZGF5IG9mIHllYXIgYW5kIHllYXIuIFRoZSBkYXRlIGlzIHJldHVybmVkXG4gICAqIGluIGZsb2F0aW5nIHRpbWV6b25lLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gYURheU9mWWVhciAgICAgVGhlIGRheSBvZiB5ZWFyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBhWWVhciAgICAgICAgICBUaGUgeWVhciB0byBjcmVhdGUgdGhlIGluc3RhbmNlIGluXG4gICAqIEByZXR1cm4ge1RpbWV9ICAgICAgICAgICAgICAgICBUaGUgY3JlYXRlZCBpbnN0YW5jZSB3aXRoIHRoZSBjYWxjdWxhdGVkIGRhdGVcbiAgICovXG4gIHN0YXRpYyBmcm9tRGF5T2ZZZWFyKGFEYXlPZlllYXIsIGFZZWFyKSB7XG4gICAgbGV0IHllYXIgPSBhWWVhcjtcbiAgICBsZXQgZG95ID0gYURheU9mWWVhcjtcbiAgICBsZXQgdHQgPSBuZXcgVGltZSgpO1xuICAgIHR0LmF1dG9fbm9ybWFsaXplID0gZmFsc2U7XG4gICAgbGV0IGlzX2xlYXAgPSAoVGltZS5pc0xlYXBZZWFyKHllYXIpID8gMSA6IDApO1xuXG4gICAgaWYgKGRveSA8IDEpIHtcbiAgICAgIHllYXItLTtcbiAgICAgIGlzX2xlYXAgPSAoVGltZS5pc0xlYXBZZWFyKHllYXIpID8gMSA6IDApO1xuICAgICAgZG95ICs9IFRpbWUuZGF5c0luWWVhclBhc3NlZE1vbnRoW2lzX2xlYXBdWzEyXTtcbiAgICAgIHJldHVybiBUaW1lLmZyb21EYXlPZlllYXIoZG95LCB5ZWFyKTtcbiAgICB9IGVsc2UgaWYgKGRveSA+IFRpbWUuZGF5c0luWWVhclBhc3NlZE1vbnRoW2lzX2xlYXBdWzEyXSkge1xuICAgICAgaXNfbGVhcCA9IChUaW1lLmlzTGVhcFllYXIoeWVhcikgPyAxIDogMCk7XG4gICAgICBkb3kgLT0gVGltZS5kYXlzSW5ZZWFyUGFzc2VkTW9udGhbaXNfbGVhcF1bMTJdO1xuICAgICAgeWVhcisrO1xuICAgICAgcmV0dXJuIFRpbWUuZnJvbURheU9mWWVhcihkb3ksIHllYXIpO1xuICAgIH1cblxuICAgIHR0LnllYXIgPSB5ZWFyO1xuICAgIHR0LmlzRGF0ZSA9IHRydWU7XG5cbiAgICBmb3IgKGxldCBtb250aCA9IDExOyBtb250aCA+PSAwOyBtb250aC0tKSB7XG4gICAgICBpZiAoZG95ID4gVGltZS5kYXlzSW5ZZWFyUGFzc2VkTW9udGhbaXNfbGVhcF1bbW9udGhdKSB7XG4gICAgICAgIHR0Lm1vbnRoID0gbW9udGggKyAxO1xuICAgICAgICB0dC5kYXkgPSBkb3kgLSBUaW1lLmRheXNJblllYXJQYXNzZWRNb250aFtpc19sZWFwXVttb250aF07XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHR0LmF1dG9fbm9ybWFsaXplID0gdHJ1ZTtcbiAgICByZXR1cm4gdHQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIG5ldyBJQ0FMLlRpbWUgaW5zdGFuY2UgZnJvbSBhIGRhdGUgc3RyaW5nLCBlLmcgMjAxNS0wMS0wMi5cbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgICAgICAgICAgICAgICAgVXNlIHtAbGluayBJQ0FMLlRpbWUuZnJvbURhdGVTdHJpbmd9IGluc3RlYWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciAgICAgICAgVGhlIHN0cmluZyB0byBjcmVhdGUgZnJvbVxuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgICAgICAgICBUaGUgZGF0ZS90aW1lIGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgZnJvbVN0cmluZ3YyKHN0cikge1xuICAgIHJldHVybiBuZXcgVGltZSh7XG4gICAgICB5ZWFyOiBwYXJzZUludChzdHIuc2xpY2UoMCwgNCksIDEwKSxcbiAgICAgIG1vbnRoOiBwYXJzZUludChzdHIuc2xpY2UoNSwgNyksIDEwKSxcbiAgICAgIGRheTogcGFyc2VJbnQoc3RyLnNsaWNlKDgsIDEwKSwgMTApLFxuICAgICAgaXNEYXRlOiB0cnVlXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIG5ldyBJQ0FMLlRpbWUgaW5zdGFuY2UgZnJvbSBhIGRhdGUgc3RyaW5nLCBlLmcgMjAxNS0wMS0wMi5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFWYWx1ZSAgICAgVGhlIHN0cmluZyB0byBjcmVhdGUgZnJvbVxuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgICAgICAgICBUaGUgZGF0ZS90aW1lIGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgZnJvbURhdGVTdHJpbmcoYVZhbHVlKSB7XG4gICAgLy8gRGF0ZXMgc2hvdWxkIGhhdmUgbm8gdGltZXpvbmUuXG4gICAgLy8gR29vZ2xlIGxpa2VzIHRvIHNvbWV0aW1lcyBzcGVjaWZ5IFogb24gZGF0ZXNcbiAgICAvLyB3ZSBzcGVjaWZpY2FsbHkgaWdub3JlIHRoYXQgdG8gYXZvaWQgaXNzdWVzLlxuXG4gICAgLy8gWVlZWS1NTS1ERFxuICAgIC8vIDIwMTItMTAtMTBcbiAgICByZXR1cm4gbmV3IFRpbWUoe1xuICAgICAgeWVhcjogc3RyaWN0UGFyc2VJbnQoYVZhbHVlLnNsaWNlKDAsIDQpKSxcbiAgICAgIG1vbnRoOiBzdHJpY3RQYXJzZUludChhVmFsdWUuc2xpY2UoNSwgNykpLFxuICAgICAgZGF5OiBzdHJpY3RQYXJzZUludChhVmFsdWUuc2xpY2UoOCwgMTApKSxcbiAgICAgIGlzRGF0ZTogdHJ1ZVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgSUNBTC5UaW1lIGluc3RhbmNlIGZyb20gYSBkYXRlLXRpbWUgc3RyaW5nLCBlLmdcbiAgICogMjAxNS0wMS0wMlQwMzowNDowNS4gSWYgYSBwcm9wZXJ0eSBpcyBzcGVjaWZpZWQsIHRoZSB0aW1lem9uZSBpcyBzZXQgdXBcbiAgICogZnJvbSB0aGUgcHJvcGVydHkncyBUWklEIHBhcmFtZXRlci5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFWYWx1ZSAgICAgICAgIFRoZSBzdHJpbmcgdG8gY3JlYXRlIGZyb21cbiAgICogQHBhcmFtIHtQcm9wZXJ0eT19IHByb3AgICAgICAgIFRoZSBwcm9wZXJ0eSB0aGUgZGF0ZSBiZWxvbmdzIHRvXG4gICAqIEByZXR1cm4ge1RpbWV9ICAgICAgICAgICAgICAgICBUaGUgZGF0ZS90aW1lIGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgZnJvbURhdGVUaW1lU3RyaW5nKGFWYWx1ZSwgcHJvcCkge1xuICAgIGlmIChhVmFsdWUubGVuZ3RoIDwgMTkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ2ludmFsaWQgZGF0ZS10aW1lIHZhbHVlOiBcIicgKyBhVmFsdWUgKyAnXCInXG4gICAgICApO1xuICAgIH1cblxuICAgIGxldCB6b25lO1xuICAgIGxldCB6b25lSWQ7XG5cbiAgICBpZiAoYVZhbHVlLnNsaWNlKC0xKSA9PT0gJ1onKSB7XG4gICAgICB6b25lID0gVGltZXpvbmUudXRjVGltZXpvbmU7XG4gICAgfSBlbHNlIGlmIChwcm9wKSB7XG4gICAgICB6b25lSWQgPSBwcm9wLmdldFBhcmFtZXRlcigndHppZCcpO1xuXG4gICAgICBpZiAocHJvcC5wYXJlbnQpIHtcbiAgICAgICAgaWYgKHByb3AucGFyZW50Lm5hbWUgPT09ICdzdGFuZGFyZCcgfHwgcHJvcC5wYXJlbnQubmFtZSA9PT0gJ2RheWxpZ2h0Jykge1xuICAgICAgICAgIC8vIFBlciBSRkMgNTU0NSAzLjguMi40IGFuZCAzLjguMi4yLCBzdGFydC9lbmQgZGF0ZS10aW1lcyB3aXRoaW5cbiAgICAgICAgICAvLyB0aGVzZSBjb21wb25lbnRzIE1VU1QgYmUgc3BlY2lmaWVkIGluIGxvY2FsIHRpbWUuXG4gICAgICAgICAgem9uZSA9IFRpbWV6b25lLmxvY2FsVGltZXpvbmU7XG4gICAgICAgIH0gZWxzZSBpZiAoem9uZUlkKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRlc2lyZWQgdGltZSB6b25lIGlzIGRlZmluZWQgd2l0aGluIHRoZSBjb21wb25lbnQgdHJlZSxcbiAgICAgICAgICAvLyBmZXRjaCBpdHMgZGVmaW5pdGlvbiBhbmQgcHJlZmVyIHRoYXQuXG4gICAgICAgICAgem9uZSA9IHByb3AucGFyZW50LmdldFRpbWVab25lQnlJRCh6b25lSWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdGltZURhdGEgPSB7XG4gICAgICB5ZWFyOiBzdHJpY3RQYXJzZUludChhVmFsdWUuc2xpY2UoMCwgNCkpLFxuICAgICAgbW9udGg6IHN0cmljdFBhcnNlSW50KGFWYWx1ZS5zbGljZSg1LCA3KSksXG4gICAgICBkYXk6IHN0cmljdFBhcnNlSW50KGFWYWx1ZS5zbGljZSg4LCAxMCkpLFxuICAgICAgaG91cjogc3RyaWN0UGFyc2VJbnQoYVZhbHVlLnNsaWNlKDExLCAxMykpLFxuICAgICAgbWludXRlOiBzdHJpY3RQYXJzZUludChhVmFsdWUuc2xpY2UoMTQsIDE2KSksXG4gICAgICBzZWNvbmQ6IHN0cmljdFBhcnNlSW50KGFWYWx1ZS5zbGljZSgxNywgMTkpKSxcbiAgICB9O1xuXG4gICAgLy8gQWx0aG91Z2ggUkZDIDU1NDUgcmVxdWlyZXMgdGhhdCBhbGwgVFpJRHMgdXNlZCB3aXRoaW4gYSBmaWxlIGhhdmUgYVxuICAgIC8vIGNvcnJlc3BvbmRpbmcgdGltZSB6b25lIGRlZmluaXRpb24sIHdlIG1heSBub3QgYmUgcGFyc2luZyB0aGUgZnVsbCBmaWxlXG4gICAgLy8gb3Igd2UgbWF5IGJlIGRlYWxpbmcgd2l0aCBhIG5vbi1jb21wbGlhbnQgZmlsZTsgaW4gZWl0aGVyIGNhc2UsIHdlIGNhblxuICAgIC8vIGNoZWNrIG91ciBvd24gdGltZSB6b25lIHNlcnZpY2UgZm9yIHRoZSBUWklEIGluIGEgbGFzdC1kaXRjaCBlZmZvcnQuXG4gICAgaWYgKHpvbmVJZCAmJiAhem9uZSkge1xuICAgICAgdGltZURhdGEudGltZXpvbmUgPSB6b25lSWQ7XG4gICAgfVxuXG4gICAgLy8gMjAxMi0xMC0xMFQxMDoxMDoxMChaKT9cbiAgICByZXR1cm4gbmV3IFRpbWUodGltZURhdGEsIHpvbmUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgSUNBTC5UaW1lIGluc3RhbmNlIGZyb20gYSBkYXRlIG9yIGRhdGUtdGltZSBzdHJpbmcsXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhVmFsdWUgICAgICAgICBUaGUgc3RyaW5nIHRvIGNyZWF0ZSBmcm9tXG4gICAqIEBwYXJhbSB7UHJvcGVydHk9fSBwcm9wICAgICAgICBUaGUgcHJvcGVydHkgdGhlIGRhdGUgYmVsb25ncyB0b1xuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgICAgICAgICAgICAgVGhlIGRhdGUvdGltZSBpbnN0YW5jZVxuICAgKi9cbiAgc3RhdGljIGZyb21TdHJpbmcoYVZhbHVlLCBhUHJvcGVydHkpIHtcbiAgICBpZiAoYVZhbHVlLmxlbmd0aCA+IDEwKSB7XG4gICAgICByZXR1cm4gVGltZS5mcm9tRGF0ZVRpbWVTdHJpbmcoYVZhbHVlLCBhUHJvcGVydHkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gVGltZS5mcm9tRGF0ZVN0cmluZyhhVmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuVGltZSBpbnN0YW5jZSBmcm9tIHRoZSBnaXZlbiBKYXZhc2NyaXB0IERhdGUuXG4gICAqXG4gICAqIEBwYXJhbSB7P0RhdGV9IGFEYXRlICAgICAgICAgICAgIFRoZSBKYXZhc2NyaXB0IERhdGUgdG8gcmVhZCwgb3IgbnVsbCB0byByZXNldFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VVVEM9ZmFsc2VdICBJZiB0cnVlLCB0aGUgVVRDIHZhbHVlcyBvZiB0aGUgZGF0ZSB3aWxsIGJlIHVzZWRcbiAgICovXG4gIHN0YXRpYyBmcm9tSlNEYXRlKGFEYXRlLCB1c2VVVEMpIHtcbiAgICBsZXQgdHQgPSBuZXcgVGltZSgpO1xuICAgIHJldHVybiB0dC5mcm9tSlNEYXRlKGFEYXRlLCB1c2VVVEMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5UaW1lIGluc3RhbmNlIGZyb20gdGhlIHRoZSBwYXNzZWQgZGF0YSBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7dGltZUluaXR9IGFEYXRhICAgICAgICAgIFRpbWUgaW5pdGlhbGl6YXRpb25cbiAgICogQHBhcmFtIHtUaW1lem9uZT19IGFab25lICAgICAgICAgVGltZXpvbmUgdGhpcyBwb3NpdGlvbiBvY2N1cnMgaW5cbiAgICovXG4gIHN0YXRpYyBmcm9tRGF0YSA9IGZ1bmN0aW9uIGZyb21EYXRhKGFEYXRhLCBhWm9uZSkge1xuICAgIGxldCB0ID0gbmV3IFRpbWUoKTtcbiAgICByZXR1cm4gdC5mcm9tRGF0YShhRGF0YSwgYVpvbmUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuVGltZSBpbnN0YW5jZSBmcm9tIHRoZSBjdXJyZW50IG1vbWVudC5cbiAgICogVGhlIGluc3RhbmNlIGlzIOKAnGZsb2F0aW5n4oCdIC0gaGFzIG5vIHRpbWV6b25lIHJlbGF0aW9uLlxuICAgKiBUbyBjcmVhdGUgYW4gaW5zdGFuY2UgY29uc2lkZXJpbmcgdGhlIHRpbWUgem9uZSwgY2FsbFxuICAgKiBJQ0FMLlRpbWUuZnJvbUpTRGF0ZShuZXcgRGF0ZSgpLCB0cnVlKVxuICAgKiBAcmV0dXJuIHtUaW1lfVxuICAgKi9cbiAgc3RhdGljIG5vdygpIHtcbiAgICByZXR1cm4gVGltZS5mcm9tSlNEYXRlKG5ldyBEYXRlKCksIGZhbHNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBkYXRlIG9uIHdoaWNoIElTTyB3ZWVrIG51bWJlciAxIHN0YXJ0cy5cbiAgICpcbiAgICogQHNlZSBUaW1lI3dlZWtOdW1iZXJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFZZWFyICAgICAgICAgICAgICAgICAgVGhlIHllYXIgdG8gc2VhcmNoIGluXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGFXZWVrU3RhcnQgICAgICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHdlZWtkYXksIHVzZWQgZm9yIGNhbGN1bGF0aW9uLlxuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgICAgICAgICAgICAgICAgICAgICBUaGUgZGF0ZSBvbiB3aGljaCB3ZWVrIG51bWJlciAxIHN0YXJ0c1xuICAgKi9cbiAgc3RhdGljIHdlZWtPbmVTdGFydHMoYVllYXIsIGFXZWVrU3RhcnQpIHtcbiAgICBsZXQgdCA9IFRpbWUuZnJvbURhdGEoe1xuICAgICAgeWVhcjogYVllYXIsXG4gICAgICBtb250aDogMSxcbiAgICAgIGRheTogMSxcbiAgICAgIGlzRGF0ZTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgbGV0IGRvdyA9IHQuZGF5T2ZXZWVrKCk7XG4gICAgbGV0IHdrc3QgPSBhV2Vla1N0YXJ0IHx8IFRpbWUuREVGQVVMVF9XRUVLX1NUQVJUO1xuICAgIGlmIChkb3cgPiBUaW1lLlRIVVJTREFZKSB7XG4gICAgICB0LmRheSArPSA3O1xuICAgIH1cbiAgICBpZiAod2tzdCA+IFRpbWUuVEhVUlNEQVkpIHtcbiAgICAgIHQuZGF5IC09IDc7XG4gICAgfVxuXG4gICAgdC5kYXkgLT0gZG93IC0gd2tzdDtcblxuICAgIHJldHVybiB0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZG9taW5pY2FsIGxldHRlciBmb3IgdGhlIGdpdmVuIHllYXIuIExldHRlcnMgcmFuZ2UgZnJvbSBBIC0gRyBmb3JcbiAgICogY29tbW9uIHllYXJzLCBhbmQgQUcgdG8gR0YgZm9yIGxlYXAgeWVhcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB5ciAgICAgICAgICAgVGhlIHllYXIgdG8gcmV0cmlldmUgdGhlIGxldHRlciBmb3JcbiAgICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgICAgICBUaGUgZG9taW5pY2FsIGxldHRlci5cbiAgICovXG4gIHN0YXRpYyBnZXREb21pbmljYWxMZXR0ZXIoeXIpIHtcbiAgICBsZXQgTFRSUyA9IFwiR0ZFRENCQVwiO1xuICAgIGxldCBkb20gPSAoeXIgKyAoeXIgLyA0IHwgMCkgKyAoeXIgLyA0MDAgfCAwKSAtICh5ciAvIDEwMCB8IDApIC0gMSkgJSA3O1xuICAgIGxldCBpc0xlYXAgPSBUaW1lLmlzTGVhcFllYXIoeXIpO1xuICAgIGlmIChpc0xlYXApIHtcbiAgICAgIHJldHVybiBMVFJTWyhkb20gKyA2KSAlIDddICsgTFRSU1tkb21dO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gTFRSU1tkb21dO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyAjZXBvY2hUaW1lID0gbnVsbDtcbiAgLyoqXG4gICAqIEphbnVhcnkgMXN0LCAxOTcwIGFzIGFuIElDQUwuVGltZS5cbiAgICogQHR5cGUge1RpbWV9XG4gICAqIEBjb25zdGFudFxuICAgKiBAaW5zdGFuY2VcbiAgICovXG4gIHN0YXRpYyBnZXQgZXBvY2hUaW1lKCkge1xuICAgIGlmICghdGhpcy4jZXBvY2hUaW1lKSB7XG4gICAgICB0aGlzLiNlcG9jaFRpbWUgPSBUaW1lLmZyb21EYXRhKHtcbiAgICAgICAgeWVhcjogMTk3MCxcbiAgICAgICAgbW9udGg6IDEsXG4gICAgICAgIGRheTogMSxcbiAgICAgICAgaG91cjogMCxcbiAgICAgICAgbWludXRlOiAwLFxuICAgICAgICBzZWNvbmQ6IDAsXG4gICAgICAgIGlzRGF0ZTogZmFsc2UsXG4gICAgICAgIHRpbWV6b25lOiBcIlpcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLiNlcG9jaFRpbWU7XG4gIH1cblxuICBzdGF0aWMgX2NtcF9hdHRyKGEsIGIsIGF0dHIpIHtcbiAgICBpZiAoYVthdHRyXSA+IGJbYXR0cl0pIHJldHVybiAxO1xuICAgIGlmIChhW2F0dHJdIDwgYlthdHRyXSkgcmV0dXJuIC0xO1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBkYXlzIHRoYXQgaGF2ZSBwYXNzZWQgaW4gdGhlIHllYXIgYWZ0ZXIgYSBnaXZlbiBtb250aC4gVGhlIGFycmF5IGhhc1xuICAgKiB0d28gbWVtYmVycywgb25lIGJlaW5nIGFuIGFycmF5IG9mIHBhc3NlZCBkYXlzIGZvciBub24tbGVhcCB5ZWFycywgdGhlXG4gICAqIG90aGVyIGFuYWxvZyBmb3IgbGVhcCB5ZWFycy5cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIGlzTGVhcFllYXIgPSBJQ0FMLlRpbWUuaXNMZWFwWWVhcih5ZWFyKTtcbiAgICogdmFyIHBhc3NlZERheXMgPSBJQ0FMLlRpbWUuZGF5c0luWWVhclBhc3NlZE1vbnRoW2lzTGVhcFllYXJdW21vbnRoXTtcbiAgICogQHR5cGUge0FycmF5LjxBcnJheS48TnVtYmVyPj59XG4gICAqL1xuICBzdGF0aWMgZGF5c0luWWVhclBhc3NlZE1vbnRoID0gW1xuICAgIFswLCAzMSwgNTksIDkwLCAxMjAsIDE1MSwgMTgxLCAyMTIsIDI0MywgMjczLCAzMDQsIDMzNCwgMzY1XSxcbiAgICBbMCwgMzEsIDYwLCA5MSwgMTIxLCAxNTIsIDE4MiwgMjEzLCAyNDQsIDI3NCwgMzA1LCAzMzUsIDM2Nl1cbiAgXTtcblxuICBzdGF0aWMgU1VOREFZID0gMTtcbiAgc3RhdGljIE1PTkRBWSA9IDI7XG4gIHN0YXRpYyBUVUVTREFZID0gMztcbiAgc3RhdGljIFdFRE5FU0RBWSA9IDQ7XG4gIHN0YXRpYyBUSFVSU0RBWSA9IDU7XG4gIHN0YXRpYyBGUklEQVkgPSA2O1xuICBzdGF0aWMgU0FUVVJEQVkgPSA3O1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCB3ZWVrZGF5IGZvciB0aGUgV0tTVCBwYXJ0LlxuICAgKiBAY29uc3RhbnRcbiAgICogQGRlZmF1bHQgSUNBTC5UaW1lLk1PTkRBWVxuICAgKi9cbiAgc3RhdGljIERFRkFVTFRfV0VFS19TVEFSVCA9IDI7IC8vIE1PTkRBWVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuVGltZSBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHt0aW1lSW5pdH0gZGF0YSAgICAgICAgICAgVGltZSBpbml0aWFsaXphdGlvblxuICAgKiBAcGFyYW0ge1RpbWV6b25lfSB6b25lICAgICAgICAgICB0aW1lem9uZSB0aGlzIHBvc2l0aW9uIG9jY3VycyBpblxuICAgKi9cbiAgY29uc3RydWN0b3IoZGF0YSwgem9uZSkge1xuICAgIHRoaXMud3JhcHBlZEpTT2JqZWN0ID0gdGhpcztcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHt0aW1lSW5pdH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuX3RpbWUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgLyogdGltZSBkZWZhdWx0cyAqL1xuICAgIHRoaXMuX3RpbWUueWVhciA9IDA7XG4gICAgdGhpcy5fdGltZS5tb250aCA9IDE7XG4gICAgdGhpcy5fdGltZS5kYXkgPSAxO1xuICAgIHRoaXMuX3RpbWUuaG91ciA9IDA7XG4gICAgdGhpcy5fdGltZS5taW51dGUgPSAwO1xuICAgIHRoaXMuX3RpbWUuc2Vjb25kID0gMDtcbiAgICB0aGlzLl90aW1lLmlzRGF0ZSA9IGZhbHNlO1xuXG4gICAgdGhpcy5mcm9tRGF0YShkYXRhLCB6b25lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY2xhc3MgaWRlbnRpZmllci5cbiAgICogQGNvbnN0YW50XG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEBkZWZhdWx0IFwiaWNhbHRpbWVcIlxuICAgKi9cbiAgaWNhbGNsYXNzID0gXCJpY2FsdGltZVwiO1xuICBfY2FjaGVkVW5peFRpbWUgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgdHlwZSBuYW1lLCB0byBiZSB1c2VkIGluIHRoZSBqQ2FsIG9iamVjdC4gVGhpcyB2YWx1ZSBtYXkgY2hhbmdlIGFuZFxuICAgKiBpcyBzdHJpY3RseSBkZWZpbmVkIGJ5IHRoZSB7QGxpbmsgSUNBTC5UaW1lI2lzRGF0ZSBpc0RhdGV9IG1lbWJlci5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGRlZmF1bHQgXCJkYXRlLXRpbWVcIlxuICAgKi9cbiAgZ2V0IGljYWx0eXBlKCkge1xuICAgIHJldHVybiB0aGlzLmlzRGF0ZSA/ICdkYXRlJyA6ICdkYXRlLXRpbWUnO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSB0aW1lem9uZSBmb3IgdGhpcyB0aW1lLlxuICAgKiBAdHlwZSB7VGltZXpvbmV9XG4gICAqL1xuICB6b25lID0gbnVsbDtcblxuICAvKipcbiAgICogSW50ZXJuYWwgdXNlcyB0byBpbmRpY2F0ZSB0aGF0IGEgY2hhbmdlIGhhcyBiZWVuIG1hZGUgYW5kIHRoZSBuZXh0IHJlYWRcbiAgICogb3BlcmF0aW9uIG11c3QgYXR0ZW1wdCB0byBub3JtYWxpemUgdGhlIHZhbHVlIChmb3IgZXhhbXBsZSBjaGFuZ2luZyB0aGVcbiAgICogZGF5IHRvIDMzKS5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcGVuZGluZ05vcm1hbGl6YXRpb24gPSBmYWxzZTtcblxuICAvKipcbiAgICogVGhlIHllYXIgb2YgdGhpcyBkYXRlLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgZ2V0IHllYXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldFRpbWVBdHRyKCd5ZWFyJyk7XG4gIH1cblxuICBzZXQgeWVhcih2YWwpIHtcbiAgICB0aGlzLl9zZXRUaW1lQXR0cigneWVhcicsIHZhbCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIG1vbnRoIG9mIHRoaXMgZGF0ZS5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGdldCBtb250aCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0VGltZUF0dHIoJ21vbnRoJyk7XG4gIH1cblxuICBzZXQgbW9udGgodmFsKSB7XG4gICAgdGhpcy5fc2V0VGltZUF0dHIoJ21vbnRoJywgdmFsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZGF5IG9mIHRoaXMgZGF0ZS5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGdldCBkYXkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldFRpbWVBdHRyKCdkYXknKTtcbiAgfVxuXG4gIHNldCBkYXkodmFsKSB7XG4gICAgdGhpcy5fc2V0VGltZUF0dHIoJ2RheScsIHZhbCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGhvdXIgb2YgdGhpcyBkYXRlLXRpbWUuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqL1xuICBnZXQgaG91cigpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0VGltZUF0dHIoJ2hvdXInKTtcbiAgfVxuXG4gIHNldCBob3VyKHZhbCkge1xuICAgIHRoaXMuX3NldFRpbWVBdHRyKCdob3VyJywgdmFsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgbWludXRlIG9mIHRoaXMgZGF0ZS10aW1lLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgZ2V0IG1pbnV0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0VGltZUF0dHIoJ21pbnV0ZScpO1xuICB9XG5cbiAgc2V0IG1pbnV0ZSh2YWwpIHtcbiAgICB0aGlzLl9zZXRUaW1lQXR0cignbWludXRlJywgdmFsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc2Vjb25kIG9mIHRoaXMgZGF0ZS10aW1lLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgZ2V0IHNlY29uZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0VGltZUF0dHIoJ3NlY29uZCcpO1xuICB9XG5cbiAgc2V0IHNlY29uZCh2YWwpIHtcbiAgICB0aGlzLl9zZXRUaW1lQXR0cignc2Vjb25kJywgdmFsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiB0cnVlLCB0aGUgaW5zdGFuY2UgcmVwcmVzZW50cyBhIGRhdGUgKGFzIG9wcG9zZWQgdG8gYSBkYXRlLXRpbWUpXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cbiAgZ2V0IGlzRGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0VGltZUF0dHIoJ2lzRGF0ZScpO1xuICB9XG5cbiAgc2V0IGlzRGF0ZSh2YWwpIHtcbiAgICB0aGlzLl9zZXRUaW1lQXR0cignaXNEYXRlJywgdmFsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYXR0ciAgICAgICAgICAgICBBdHRyaWJ1dGUgdG8gZ2V0IChvbmUgb2Y6IHllYXIsIG1vbnRoLFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBpc0RhdGUpXG4gICAqIEByZXR1cm4ge051bWJlcnxCb29sZWFufSAgICAgICAgIEN1cnJlbnQgdmFsdWUgZm9yIHRoZSBhdHRyaWJ1dGVcbiAgICovXG4gIF9nZXRUaW1lQXR0cihhdHRyKSB7XG4gICAgaWYgKHRoaXMuX3BlbmRpbmdOb3JtYWxpemF0aW9uKSB7XG4gICAgICB0aGlzLl9ub3JtYWxpemUoKTtcbiAgICAgIHRoaXMuX3BlbmRpbmdOb3JtYWxpemF0aW9uID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3RpbWVbYXR0cl07XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IGF0dHIgICAgICAgICAgICAgQXR0cmlidXRlIHRvIHNldCAob25lIG9mOiB5ZWFyLCBtb250aCxcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCwgaXNEYXRlKVxuICAgKiBAcGFyYW0ge051bWJlcnxCb29sZWFufSB2YWwgICAgICBOZXcgdmFsdWUgZm9yIHRoZSBhdHRyaWJ1dGVcbiAgICovXG4gIF9zZXRUaW1lQXR0cihhdHRyLCB2YWwpIHtcbiAgICAvLyBDaGVjayBpZiBpc0RhdGUgd2lsbCBiZSBzZXQgYW5kIGlmIHdhcyBub3Qgc2V0IHRvIG5vcm1hbGl6ZSBkYXRlLlxuICAgIC8vIFRoaXMgYXZvaWRzIGxvc2luZyBkYXlzIHdoZW4gc2Vjb25kcywgbWludXRlcyBhbmQgaG91cnMgYXJlIHplcm9lZFxuICAgIC8vIHdoYXQgbm9ybWFsaXplIHdpbGwgZG8gd2hlbiB0aW1lIGlzIGEgZGF0ZS5cbiAgICBpZiAoYXR0ciA9PT0gXCJpc0RhdGVcIiAmJiB2YWwgJiYgIXRoaXMuX3RpbWUuaXNEYXRlKSB7XG4gICAgICB0aGlzLmFkanVzdCgwLCAwLCAwLCAwKTtcbiAgICB9XG4gICAgdGhpcy5fY2FjaGVkVW5peFRpbWUgPSBudWxsO1xuICAgIHRoaXMuX3BlbmRpbmdOb3JtYWxpemF0aW9uID0gdHJ1ZTtcbiAgICB0aGlzLl90aW1lW2F0dHJdID0gdmFsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjbG9uZSBvZiB0aGUgdGltZSBvYmplY3QuXG4gICAqXG4gICAqIEByZXR1cm4ge1RpbWV9ICAgICAgICAgICAgICBUaGUgY2xvbmVkIG9iamVjdFxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBUaW1lKHRoaXMuX3RpbWUsIHRoaXMuem9uZSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgdGhlIHRpbWUgaW5zdGFuY2UgdG8gZXBvY2ggdGltZVxuICAgKi9cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5mcm9tRGF0YShUaW1lLmVwb2NoVGltZSk7XG4gICAgdGhpcy56b25lID0gVGltZXpvbmUudXRjVGltZXpvbmU7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgdGhlIHRpbWUgaW5zdGFuY2UgdG8gdGhlIGdpdmVuIGRhdGUvdGltZSB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB5ZWFyICAgICAgICAgICAgIFRoZSB5ZWFyIHRvIHNldFxuICAgKiBAcGFyYW0ge051bWJlcn0gbW9udGggICAgICAgICAgICBUaGUgbW9udGggdG8gc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkYXkgICAgICAgICAgICAgIFRoZSBkYXkgdG8gc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyfSBob3VyICAgICAgICAgICAgIFRoZSBob3VyIHRvIHNldFxuICAgKiBAcGFyYW0ge051bWJlcn0gbWludXRlICAgICAgICAgICBUaGUgbWludXRlIHRvIHNldFxuICAgKiBAcGFyYW0ge051bWJlcn0gc2Vjb25kICAgICAgICAgICBUaGUgc2Vjb25kIHRvIHNldFxuICAgKiBAcGFyYW0ge1RpbWV6b25lfSB0aW1lem9uZSAgICAgICBUaGUgdGltZXpvbmUgdG8gc2V0XG4gICAqL1xuICByZXNldFRvKHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCB0aW1lem9uZSkge1xuICAgIHRoaXMuZnJvbURhdGEoe1xuICAgICAgeWVhcjogeWVhcixcbiAgICAgIG1vbnRoOiBtb250aCxcbiAgICAgIGRheTogZGF5LFxuICAgICAgaG91cjogaG91cixcbiAgICAgIG1pbnV0ZTogbWludXRlLFxuICAgICAgc2Vjb25kOiBzZWNvbmQsXG4gICAgICB6b25lOiB0aW1lem9uZVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB1cCB0aGUgY3VycmVudCBpbnN0YW5jZSBmcm9tIHRoZSBKYXZhc2NyaXB0IGRhdGUgdmFsdWUuXG4gICAqXG4gICAqIEBwYXJhbSB7P0RhdGV9IGFEYXRlICAgICAgICAgICAgIFRoZSBKYXZhc2NyaXB0IERhdGUgdG8gcmVhZCwgb3IgbnVsbCB0byByZXNldFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VVVEM9ZmFsc2VdICBJZiB0cnVlLCB0aGUgVVRDIHZhbHVlcyBvZiB0aGUgZGF0ZSB3aWxsIGJlIHVzZWRcbiAgICovXG4gIGZyb21KU0RhdGUoYURhdGUsIHVzZVVUQykge1xuICAgIGlmICghYURhdGUpIHtcbiAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHVzZVVUQykge1xuICAgICAgICB0aGlzLnpvbmUgPSBUaW1lem9uZS51dGNUaW1lem9uZTtcbiAgICAgICAgdGhpcy55ZWFyID0gYURhdGUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgICAgICAgdGhpcy5tb250aCA9IGFEYXRlLmdldFVUQ01vbnRoKCkgKyAxO1xuICAgICAgICB0aGlzLmRheSA9IGFEYXRlLmdldFVUQ0RhdGUoKTtcbiAgICAgICAgdGhpcy5ob3VyID0gYURhdGUuZ2V0VVRDSG91cnMoKTtcbiAgICAgICAgdGhpcy5taW51dGUgPSBhRGF0ZS5nZXRVVENNaW51dGVzKCk7XG4gICAgICAgIHRoaXMuc2Vjb25kID0gYURhdGUuZ2V0VVRDU2Vjb25kcygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy56b25lID0gVGltZXpvbmUubG9jYWxUaW1lem9uZTtcbiAgICAgICAgdGhpcy55ZWFyID0gYURhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgdGhpcy5tb250aCA9IGFEYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgICAgICB0aGlzLmRheSA9IGFEYXRlLmdldERhdGUoKTtcbiAgICAgICAgdGhpcy5ob3VyID0gYURhdGUuZ2V0SG91cnMoKTtcbiAgICAgICAgdGhpcy5taW51dGUgPSBhRGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgICAgIHRoaXMuc2Vjb25kID0gYURhdGUuZ2V0U2Vjb25kcygpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9jYWNoZWRVbml4VGltZSA9IG51bGw7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB1cCB0aGUgY3VycmVudCBpbnN0YW5jZSB1c2luZyBtZW1iZXJzIGZyb20gdGhlIHBhc3NlZCBkYXRhIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHt0aW1lSW5pdH0gYURhdGEgICAgICAgICAgVGltZSBpbml0aWFsaXphdGlvblxuICAgKiBAcGFyYW0ge1RpbWV6b25lPX0gYVpvbmUgICAgICAgICBUaW1lem9uZSB0aGlzIHBvc2l0aW9uIG9jY3VycyBpblxuICAgKi9cbiAgZnJvbURhdGEoYURhdGEsIGFab25lKSB7XG4gICAgaWYgKGFEYXRhKSB7XG4gICAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoYURhdGEpKSB7XG4gICAgICAgICAgLy8gaWNhbCB0eXBlIGNhbm5vdCBiZSBzZXRcbiAgICAgICAgICBpZiAoa2V5ID09PSAnaWNhbHR5cGUnKSBjb250aW51ZTtcbiAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGFab25lKSB7XG4gICAgICB0aGlzLnpvbmUgPSBhWm9uZTtcbiAgICB9XG5cbiAgICBpZiAoYURhdGEgJiYgIShcImlzRGF0ZVwiIGluIGFEYXRhKSkge1xuICAgICAgdGhpcy5pc0RhdGUgPSAhKFwiaG91clwiIGluIGFEYXRhKTtcbiAgICB9IGVsc2UgaWYgKGFEYXRhICYmIChcImlzRGF0ZVwiIGluIGFEYXRhKSkge1xuICAgICAgdGhpcy5pc0RhdGUgPSBhRGF0YS5pc0RhdGU7XG4gICAgfVxuXG4gICAgaWYgKGFEYXRhICYmIFwidGltZXpvbmVcIiBpbiBhRGF0YSkge1xuICAgICAgbGV0IHpvbmUgPSBUaW1lem9uZVNlcnZpY2UuZ2V0KFxuICAgICAgICBhRGF0YS50aW1lem9uZVxuICAgICAgKTtcblxuICAgICAgdGhpcy56b25lID0gem9uZSB8fCBUaW1lem9uZS5sb2NhbFRpbWV6b25lO1xuICAgIH1cblxuICAgIGlmIChhRGF0YSAmJiBcInpvbmVcIiBpbiBhRGF0YSkge1xuICAgICAgdGhpcy56b25lID0gYURhdGEuem9uZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuem9uZSkge1xuICAgICAgdGhpcy56b25lID0gVGltZXpvbmUubG9jYWxUaW1lem9uZTtcbiAgICB9XG5cbiAgICB0aGlzLl9jYWNoZWRVbml4VGltZSA9IG51bGw7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRoZSBkYXkgb2Ygd2Vlay5cbiAgICogQHBhcmFtIHt3ZWVrRGF5PX0gYVdlZWtTdGFydFxuICAgKiAgICAgICAgVGhlIHdlZWsgc3RhcnQgd2Vla2RheSwgZGVmYXVsdHMgdG8gU1VOREFZXG4gICAqIEByZXR1cm4ge3dlZWtEYXl9XG4gICAqL1xuICBkYXlPZldlZWsoYVdlZWtTdGFydCkge1xuICAgIGxldCBmaXJzdERvdyA9IGFXZWVrU3RhcnQgfHwgVGltZS5TVU5EQVk7XG4gICAgbGV0IGRvd0NhY2hlS2V5ID0gKHRoaXMueWVhciA8PCAxMikgKyAodGhpcy5tb250aCA8PCA4KSArICh0aGlzLmRheSA8PCAzKSArIGZpcnN0RG93O1xuICAgIGlmIChkb3dDYWNoZUtleSBpbiBUaW1lLl9kb3dDYWNoZSkge1xuICAgICAgcmV0dXJuIFRpbWUuX2Rvd0NhY2hlW2Rvd0NhY2hlS2V5XTtcbiAgICB9XG5cbiAgICAvLyBVc2luZyBaZWxsZXIncyBhbGdvcml0aG1cbiAgICBsZXQgcSA9IHRoaXMuZGF5O1xuICAgIGxldCBtID0gdGhpcy5tb250aCArICh0aGlzLm1vbnRoIDwgMyA/IDEyIDogMCk7XG4gICAgbGV0IFkgPSB0aGlzLnllYXIgLSAodGhpcy5tb250aCA8IDMgPyAxIDogMCk7XG5cbiAgICBsZXQgaCA9IChxICsgWSArIHRydW5jKCgobSArIDEpICogMjYpIC8gMTApICsgdHJ1bmMoWSAvIDQpKTtcbiAgICB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXG4gICAgICBoICs9IHRydW5jKFkgLyAxMDApICogNiArIHRydW5jKFkgLyA0MDApO1xuICAgIH1cblxuICAgIC8vIE5vcm1hbGl6ZSB0byAxID0gd2tzdFxuICAgIGggPSAoKGggKyA3IC0gZmlyc3REb3cpICUgNykgKyAxO1xuICAgIFRpbWUuX2Rvd0NhY2hlW2Rvd0NhY2hlS2V5XSA9IGg7XG4gICAgcmV0dXJuIGg7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRoZSBkYXkgb2YgeWVhci5cbiAgICogQHJldHVybiB7TnVtYmVyfVxuICAgKi9cbiAgZGF5T2ZZZWFyKCkge1xuICAgIGxldCBpc19sZWFwID0gKFRpbWUuaXNMZWFwWWVhcih0aGlzLnllYXIpID8gMSA6IDApO1xuICAgIGxldCBkaXlwbSA9IFRpbWUuZGF5c0luWWVhclBhc3NlZE1vbnRoO1xuICAgIHJldHVybiBkaXlwbVtpc19sZWFwXVt0aGlzLm1vbnRoIC0gMV0gKyB0aGlzLmRheTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBkYXRlL3RpbWUsIHJld291bmQgdG8gdGhlIHN0YXJ0IG9mIHRoZVxuICAgKiB3ZWVrLiBUaGUgcmVzdWx0aW5nIElDQUwuVGltZSBpbnN0YW5jZSBpcyBvZiBpY2FsdHlwZSBkYXRlLCBldmVuIGlmIHRoaXNcbiAgICogaXMgYSBkYXRlLXRpbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGFXZWVrU3RhcnRcbiAgICogICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHdlZWtkYXksIGRlZmF1bHRzIHRvIFNVTkRBWVxuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgIFRoZSBzdGFydCBvZiB0aGUgd2VlayAoY2xvbmVkKVxuICAgKi9cbiAgc3RhcnRPZldlZWsoYVdlZWtTdGFydCkge1xuICAgIGxldCBmaXJzdERvdyA9IGFXZWVrU3RhcnQgfHwgVGltZS5TVU5EQVk7XG4gICAgbGV0IHJlc3VsdCA9IHRoaXMuY2xvbmUoKTtcbiAgICByZXN1bHQuZGF5IC09ICgodGhpcy5kYXlPZldlZWsoKSArIDcgLSBmaXJzdERvdykgJSA3KTtcbiAgICByZXN1bHQuaXNEYXRlID0gdHJ1ZTtcbiAgICByZXN1bHQuaG91ciA9IDA7XG4gICAgcmVzdWx0Lm1pbnV0ZSA9IDA7XG4gICAgcmVzdWx0LnNlY29uZCA9IDA7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBkYXRlL3RpbWUsIHNoaWZ0ZWQgdG8gdGhlIGVuZCBvZiB0aGUgd2Vlay5cbiAgICogVGhlIHJlc3VsdGluZyBJQ0FMLlRpbWUgaW5zdGFuY2UgaXMgb2YgaWNhbHR5cGUgZGF0ZSwgZXZlbiBpZiB0aGlzIGlzIGFcbiAgICogZGF0ZS10aW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge3dlZWtEYXk9fSBhV2Vla1N0YXJ0XG4gICAqICAgICAgICBUaGUgd2VlayBzdGFydCB3ZWVrZGF5LCBkZWZhdWx0cyB0byBTVU5EQVlcbiAgICogQHJldHVybiB7VGltZX0gICAgICBUaGUgZW5kIG9mIHRoZSB3ZWVrIChjbG9uZWQpXG4gICAqL1xuICBlbmRPZldlZWsoYVdlZWtTdGFydCkge1xuICAgIGxldCBmaXJzdERvdyA9IGFXZWVrU3RhcnQgfHwgVGltZS5TVU5EQVk7XG4gICAgbGV0IHJlc3VsdCA9IHRoaXMuY2xvbmUoKTtcbiAgICByZXN1bHQuZGF5ICs9ICg3IC0gdGhpcy5kYXlPZldlZWsoKSArIGZpcnN0RG93IC0gVGltZS5TVU5EQVkpICUgNztcbiAgICByZXN1bHQuaXNEYXRlID0gdHJ1ZTtcbiAgICByZXN1bHQuaG91ciA9IDA7XG4gICAgcmVzdWx0Lm1pbnV0ZSA9IDA7XG4gICAgcmVzdWx0LnNlY29uZCA9IDA7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBkYXRlL3RpbWUsIHJld291bmQgdG8gdGhlIHN0YXJ0IG9mIHRoZVxuICAgKiBtb250aC4gVGhlIHJlc3VsdGluZyBJQ0FMLlRpbWUgaW5zdGFuY2UgaXMgb2YgaWNhbHR5cGUgZGF0ZSwgZXZlbiBpZlxuICAgKiB0aGlzIGlzIGEgZGF0ZS10aW1lLlxuICAgKlxuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgIFRoZSBzdGFydCBvZiB0aGUgbW9udGggKGNsb25lZClcbiAgICovXG4gIHN0YXJ0T2ZNb250aCgpIHtcbiAgICBsZXQgcmVzdWx0ID0gdGhpcy5jbG9uZSgpO1xuICAgIHJlc3VsdC5kYXkgPSAxO1xuICAgIHJlc3VsdC5pc0RhdGUgPSB0cnVlO1xuICAgIHJlc3VsdC5ob3VyID0gMDtcbiAgICByZXN1bHQubWludXRlID0gMDtcbiAgICByZXN1bHQuc2Vjb25kID0gMDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IGRhdGUvdGltZSwgc2hpZnRlZCB0byB0aGUgZW5kIG9mIHRoZVxuICAgKiBtb250aC4gIFRoZSByZXN1bHRpbmcgSUNBTC5UaW1lIGluc3RhbmNlIGlzIG9mIGljYWx0eXBlIGRhdGUsIGV2ZW4gaWZcbiAgICogdGhpcyBpcyBhIGRhdGUtdGltZS5cbiAgICpcbiAgICogQHJldHVybiB7VGltZX0gICAgICBUaGUgZW5kIG9mIHRoZSBtb250aCAoY2xvbmVkKVxuICAgKi9cbiAgZW5kT2ZNb250aCgpIHtcbiAgICBsZXQgcmVzdWx0ID0gdGhpcy5jbG9uZSgpO1xuICAgIHJlc3VsdC5kYXkgPSBUaW1lLmRheXNJbk1vbnRoKHJlc3VsdC5tb250aCwgcmVzdWx0LnllYXIpO1xuICAgIHJlc3VsdC5pc0RhdGUgPSB0cnVlO1xuICAgIHJlc3VsdC5ob3VyID0gMDtcbiAgICByZXN1bHQubWludXRlID0gMDtcbiAgICByZXN1bHQuc2Vjb25kID0gMDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IGRhdGUvdGltZSwgcmV3b3VuZCB0byB0aGUgc3RhcnQgb2YgdGhlXG4gICAqIHllYXIuIFRoZSByZXN1bHRpbmcgSUNBTC5UaW1lIGluc3RhbmNlIGlzIG9mIGljYWx0eXBlIGRhdGUsIGV2ZW4gaWZcbiAgICogdGhpcyBpcyBhIGRhdGUtdGltZS5cbiAgICpcbiAgICogQHJldHVybiB7VGltZX0gICAgICBUaGUgc3RhcnQgb2YgdGhlIHllYXIgKGNsb25lZClcbiAgICovXG4gIHN0YXJ0T2ZZZWFyKCkge1xuICAgIGxldCByZXN1bHQgPSB0aGlzLmNsb25lKCk7XG4gICAgcmVzdWx0LmRheSA9IDE7XG4gICAgcmVzdWx0Lm1vbnRoID0gMTtcbiAgICByZXN1bHQuaXNEYXRlID0gdHJ1ZTtcbiAgICByZXN1bHQuaG91ciA9IDA7XG4gICAgcmVzdWx0Lm1pbnV0ZSA9IDA7XG4gICAgcmVzdWx0LnNlY29uZCA9IDA7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBkYXRlL3RpbWUsIHNoaWZ0ZWQgdG8gdGhlIGVuZCBvZiB0aGVcbiAgICogeWVhci4gIFRoZSByZXN1bHRpbmcgSUNBTC5UaW1lIGluc3RhbmNlIGlzIG9mIGljYWx0eXBlIGRhdGUsIGV2ZW4gaWZcbiAgICogdGhpcyBpcyBhIGRhdGUtdGltZS5cbiAgICpcbiAgICogQHJldHVybiB7VGltZX0gICAgICBUaGUgZW5kIG9mIHRoZSB5ZWFyIChjbG9uZWQpXG4gICAqL1xuICBlbmRPZlllYXIoKSB7XG4gICAgbGV0IHJlc3VsdCA9IHRoaXMuY2xvbmUoKTtcbiAgICByZXN1bHQuZGF5ID0gMzE7XG4gICAgcmVzdWx0Lm1vbnRoID0gMTI7XG4gICAgcmVzdWx0LmlzRGF0ZSA9IHRydWU7XG4gICAgcmVzdWx0LmhvdXIgPSAwO1xuICAgIHJlc3VsdC5taW51dGUgPSAwO1xuICAgIHJlc3VsdC5zZWNvbmQgPSAwO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogRmlyc3QgY2FsY3VsYXRlcyB0aGUgc3RhcnQgb2YgdGhlIHdlZWssIHRoZW4gcmV0dXJucyB0aGUgZGF5IG9mIHllYXIgZm9yXG4gICAqIHRoaXMgZGF0ZS4gSWYgdGhlIGRheSBmYWxscyBpbnRvIHRoZSBwcmV2aW91cyB5ZWFyLCB0aGUgZGF5IGlzIHplcm8gb3IgbmVnYXRpdmUuXG4gICAqXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGFGaXJzdERheU9mV2Vla1xuICAgKiAgICAgICAgVGhlIHdlZWsgc3RhcnQgd2Vla2RheSwgZGVmYXVsdHMgdG8gU1VOREFZXG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgIFRoZSBjYWxjdWxhdGVkIGRheSBvZiB5ZWFyXG4gICAqL1xuICBzdGFydERveVdlZWsoYUZpcnN0RGF5T2ZXZWVrKSB7XG4gICAgbGV0IGZpcnN0RG93ID0gYUZpcnN0RGF5T2ZXZWVrIHx8IFRpbWUuU1VOREFZO1xuICAgIGxldCBkZWx0YSA9IHRoaXMuZGF5T2ZXZWVrKCkgLSBmaXJzdERvdztcbiAgICBpZiAoZGVsdGEgPCAwKSBkZWx0YSArPSA3O1xuICAgIHJldHVybiB0aGlzLmRheU9mWWVhcigpIC0gZGVsdGE7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBkb21pbmljYWwgbGV0dGVyIGZvciB0aGUgY3VycmVudCB5ZWFyLiBMZXR0ZXJzIHJhbmdlIGZyb20gQSAtIEdcbiAgICogZm9yIGNvbW1vbiB5ZWFycywgYW5kIEFHIHRvIEdGIGZvciBsZWFwIHllYXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0geXIgICAgICAgICAgIFRoZSB5ZWFyIHRvIHJldHJpZXZlIHRoZSBsZXR0ZXIgZm9yXG4gICAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICAgICAgVGhlIGRvbWluaWNhbCBsZXR0ZXIuXG4gICAqL1xuICBnZXREb21pbmljYWxMZXR0ZXIoKSB7XG4gICAgcmV0dXJuIFRpbWUuZ2V0RG9taW5pY2FsTGV0dGVyKHRoaXMueWVhcik7XG4gIH1cblxuICAvKipcbiAgICogRmluZHMgdGhlIG50aFdlZWtEYXkgcmVsYXRpdmUgdG8gdGhlIGN1cnJlbnQgbW9udGggKG5vdCBkYXkpLiAgVGhlXG4gICAqIHJldHVybmVkIHZhbHVlIGlzIGEgZGF5IHJlbGF0aXZlIHRoZSBtb250aCB0aGF0IHRoaXMgbW9udGggYmVsb25ncyB0byBzb1xuICAgKiAxIHdvdWxkIGluZGljYXRlIHRoZSBmaXJzdCBvZiB0aGUgbW9udGggYW5kIDQwIHdvdWxkIGluZGljYXRlIGEgZGF5IGluXG4gICAqIHRoZSBmb2xsb3dpbmcgbW9udGguXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBhRGF5T2ZXZWVrICAgRGF5IG9mIHRoZSB3ZWVrIHNlZSB0aGUgZGF5IG5hbWUgY29uc3RhbnRzXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBhUG9zICAgICAgICAgTnRoIG9jY3VycmVuY2Ugb2YgYSBnaXZlbiB3ZWVrIGRheSB2YWx1ZXNcbiAgICogICAgICAgIG9mIDEgYW5kIDAgYm90aCBpbmRpY2F0ZSB0aGUgZmlyc3Qgd2Vla2RheSBvZiB0aGF0IHR5cGUuIGFQb3MgbWF5XG4gICAqICAgICAgICBiZSBlaXRoZXIgcG9zaXRpdmUgb3IgbmVnYXRpdmVcbiAgICpcbiAgICogQHJldHVybiB7TnVtYmVyfSBudW1lcmljIHZhbHVlIGluZGljYXRpbmcgYSBkYXkgcmVsYXRpdmVcbiAgICogICAgICAgICAgICAgICAgICAgdG8gdGhlIGN1cnJlbnQgbW9udGggb2YgdGhpcyB0aW1lIG9iamVjdFxuICAgKi9cbiAgbnRoV2Vla0RheShhRGF5T2ZXZWVrLCBhUG9zKSB7XG4gICAgbGV0IGRheXNJbk1vbnRoID0gVGltZS5kYXlzSW5Nb250aCh0aGlzLm1vbnRoLCB0aGlzLnllYXIpO1xuICAgIGxldCB3ZWVrZGF5O1xuICAgIGxldCBwb3MgPSBhUG9zO1xuXG4gICAgbGV0IHN0YXJ0ID0gMDtcblxuICAgIGxldCBvdGhlckRheSA9IHRoaXMuY2xvbmUoKTtcblxuICAgIGlmIChwb3MgPj0gMCkge1xuICAgICAgb3RoZXJEYXkuZGF5ID0gMTtcblxuICAgICAgLy8gYmVjYXVzZSAwIG1lYW5zIG5vIHBvc2l0aW9uIGhhcyBiZWVuIGdpdmVuXG4gICAgICAvLyAxIGFuZCAwIGluZGljYXRlIHRoZSBzYW1lIGRheS5cbiAgICAgIGlmIChwb3MgIT0gMCkge1xuICAgICAgICAvLyByZW1vdmUgdGhlIGV4dHJhIG51bWVyaWMgdmFsdWVcbiAgICAgICAgcG9zLS07XG4gICAgICB9XG5cbiAgICAgIC8vIHNldCBjdXJyZW50IHN0YXJ0IG9mZnNldCB0byBjdXJyZW50IGRheS5cbiAgICAgIHN0YXJ0ID0gb3RoZXJEYXkuZGF5O1xuXG4gICAgICAvLyBmaW5kIHRoZSBjdXJyZW50IGRheSBvZiB3ZWVrXG4gICAgICBsZXQgc3RhcnREb3cgPSBvdGhlckRheS5kYXlPZldlZWsoKTtcblxuICAgICAgLy8gY2FsY3VsYXRlIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gY3VycmVudFxuICAgICAgLy8gZGF5IG9mIHRoZSB3ZWVrIGFuZCBkZXNpcmVkIGRheSBvZiB0aGUgd2Vla1xuICAgICAgbGV0IG9mZnNldCA9IGFEYXlPZldlZWsgLSBzdGFydERvdztcblxuXG4gICAgICAvLyBpZiB0aGUgb2Zmc2V0IGdvZXMgaW50byB0aGUgcGFzdFxuICAgICAgLy8gd2VlayB3ZSBhZGQgNyBzbyBpdCBnb2VzIGludG8gdGhlIG5leHRcbiAgICAgIC8vIHdlZWsuIFdlIG9ubHkgd2FudCB0byBnbyBmb3J3YXJkIGluIHRpbWUgaGVyZS5cbiAgICAgIGlmIChvZmZzZXQgPCAwKVxuICAgICAgICAvLyB0aGlzIGlzIHJlYWxseSBpbXBvcnRhbnQgb3RoZXJ3aXNlIHdlIHdvdWxkXG4gICAgICAgIC8vIGVuZCB1cCB3aXRoIGRhdGVzIGZyb20gaW4gdGhlIHBhc3QuXG4gICAgICAgIG9mZnNldCArPSA3O1xuXG4gICAgICAvLyBhZGQgb2Zmc2V0IHRvIHN0YXJ0IHNvIHN0YXJ0IGlzIHRoZSBzYW1lXG4gICAgICAvLyBkYXkgb2YgdGhlIHdlZWsgYXMgdGhlIGRlc2lyZWQgZGF5IG9mIHdlZWsuXG4gICAgICBzdGFydCArPSBvZmZzZXQ7XG5cbiAgICAgIC8vIGJlY2F1c2Ugd2UgYXJlIGdvaW5nIHRvIGFkZCAoYW5kIG11bHRpcGx5KVxuICAgICAgLy8gdGhlIG51bWVyaWMgdmFsdWUgb2YgdGhlIGRheSB3ZSBzdWJ0cmFjdCBpdFxuICAgICAgLy8gZnJvbSB0aGUgc3RhcnQgcG9zaXRpb24gc28gbm90IHRvIGFkZCBpdCB0d2ljZS5cbiAgICAgIHN0YXJ0IC09IGFEYXlPZldlZWs7XG5cbiAgICAgIC8vIHNldCB3ZWVrIGRheVxuICAgICAgd2Vla2RheSA9IGFEYXlPZldlZWs7XG4gICAgfSBlbHNlIHtcblxuICAgICAgLy8gdGhlbiB3ZSBzZXQgaXQgdG8gdGhlIGxhc3QgZGF5IGluIHRoZSBjdXJyZW50IG1vbnRoXG4gICAgICBvdGhlckRheS5kYXkgPSBkYXlzSW5Nb250aDtcblxuICAgICAgLy8gZmluZCB0aGUgZW5kcyB3ZWVrZGF5XG4gICAgICBsZXQgZW5kRG93ID0gb3RoZXJEYXkuZGF5T2ZXZWVrKCk7XG5cbiAgICAgIHBvcysrO1xuXG4gICAgICB3ZWVrZGF5ID0gKGVuZERvdyAtIGFEYXlPZldlZWspO1xuXG4gICAgICBpZiAod2Vla2RheSA8IDApIHtcbiAgICAgICAgd2Vla2RheSArPSA3O1xuICAgICAgfVxuXG4gICAgICB3ZWVrZGF5ID0gZGF5c0luTW9udGggLSB3ZWVrZGF5O1xuICAgIH1cblxuICAgIHdlZWtkYXkgKz0gcG9zICogNztcblxuICAgIHJldHVybiBzdGFydCArIHdlZWtkYXk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGN1cnJlbnQgdGltZSBpcyB0aGUgbnRoIHdlZWtkYXksIHJlbGF0aXZlIHRvIHRoZSBjdXJyZW50XG4gICAqIG1vbnRoLiAgV2lsbCBhbHdheXMgcmV0dXJuIGZhbHNlIHdoZW4gcnVsZSByZXNvbHZlcyBvdXRzaWRlIG9mIGN1cnJlbnRcbiAgICogbW9udGguXG4gICAqXG4gICAqIEBwYXJhbSB7d2Vla0RheX0gYURheU9mV2VlayAgICAgICAgICAgICAgICAgRGF5IG9mIHdlZWsgdG8gY2hlY2tcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFQb3MgICAgICAgICAgICAgICAgICAgICAgICBSZWxhdGl2ZSBwb3NpdGlvblxuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgICAgICAgICAgICAgICAgICAgIFRydWUsIGlmIGl0IGlzIHRoZSBudGggd2Vla2RheVxuICAgKi9cbiAgaXNOdGhXZWVrRGF5KGFEYXlPZldlZWssIGFQb3MpIHtcbiAgICBsZXQgZG93ID0gdGhpcy5kYXlPZldlZWsoKTtcblxuICAgIGlmIChhUG9zID09PSAwICYmIGRvdyA9PT0gYURheU9mV2Vlaykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gZ2V0IHBvc1xuICAgIGxldCBkYXkgPSB0aGlzLm50aFdlZWtEYXkoYURheU9mV2VlaywgYVBvcyk7XG5cbiAgICBpZiAoZGF5ID09PSB0aGlzLmRheSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgdGhlIElTTyA4NjAxIHdlZWsgbnVtYmVyLiBUaGUgZmlyc3Qgd2VlayBvZiBhIHllYXIgaXMgdGhlXG4gICAqIHdlZWsgdGhhdCBjb250YWlucyB0aGUgZmlyc3QgVGh1cnNkYXkuIFRoZSB5ZWFyIGNhbiBoYXZlIDUzIHdlZWtzLCBpZlxuICAgKiBKYW51YXJ5IDFzdCBpcyBhIEZyaWRheS5cbiAgICpcbiAgICogTm90ZSB0aGVyZSBhcmUgcmVnaW9ucyB3aGVyZSB0aGUgZmlyc3Qgd2VlayBvZiB0aGUgeWVhciBpcyB0aGUgb25lIHRoYXRcbiAgICogc3RhcnRzIG9uIEphbnVhcnkgMXN0LCB3aGljaCBtYXkgb2Zmc2V0IHRoZSB3ZWVrIG51bWJlci4gQWxzbywgaWYgYVxuICAgKiBkaWZmZXJlbnQgd2VlayBzdGFydCBpcyBzcGVjaWZpZWQsIHRoaXMgd2lsbCBhbHNvIGFmZmVjdCB0aGUgd2Vla1xuICAgKiBudW1iZXIuXG4gICAqXG4gICAqIEBzZWUgVGltZS53ZWVrT25lU3RhcnRzXG4gICAqIEBwYXJhbSB7d2Vla0RheX0gYVdlZWtTdGFydCAgICAgICAgICAgICAgICAgIFRoZSB3ZWVrZGF5IHRoZSB3ZWVrIHN0YXJ0cyB3aXRoXG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBJU08gd2VlayBudW1iZXJcbiAgICovXG4gIHdlZWtOdW1iZXIoYVdlZWtTdGFydCkge1xuICAgIGxldCB3bkNhY2hlS2V5ID0gKHRoaXMueWVhciA8PCAxMikgKyAodGhpcy5tb250aCA8PCA4KSArICh0aGlzLmRheSA8PCAzKSArIGFXZWVrU3RhcnQ7XG4gICAgaWYgKHduQ2FjaGVLZXkgaW4gVGltZS5fd25DYWNoZSkge1xuICAgICAgcmV0dXJuIFRpbWUuX3duQ2FjaGVbd25DYWNoZUtleV07XG4gICAgfVxuICAgIC8vIFRoaXMgZnVuY3Rpb24gY291cnRlc3R5IG9mIEp1bGlhbiBCdWNrbmFsbCwgcHVibGlzaGVkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICAgIC8vIGh0dHA6Ly93d3cuYm95ZXQuY29tL2FydGljbGVzL3B1Ymxpc2hlZGFydGljbGVzL2NhbGN1bGF0aW5ndGhlaXNvd2Vla251bWIuaHRtbFxuICAgIC8vIHBsdXMgc29tZSBmaXhlcyB0byBiZSBhYmxlIHRvIHVzZSBkaWZmZXJlbnQgd2VlayBzdGFydHMuXG4gICAgbGV0IHdlZWsxO1xuXG4gICAgbGV0IGR0ID0gdGhpcy5jbG9uZSgpO1xuICAgIGR0LmlzRGF0ZSA9IHRydWU7XG4gICAgbGV0IGlzb3llYXIgPSB0aGlzLnllYXI7XG5cbiAgICBpZiAoZHQubW9udGggPT0gMTIgJiYgZHQuZGF5ID4gMjUpIHtcbiAgICAgIHdlZWsxID0gVGltZS53ZWVrT25lU3RhcnRzKGlzb3llYXIgKyAxLCBhV2Vla1N0YXJ0KTtcbiAgICAgIGlmIChkdC5jb21wYXJlKHdlZWsxKSA8IDApIHtcbiAgICAgICAgd2VlazEgPSBUaW1lLndlZWtPbmVTdGFydHMoaXNveWVhciwgYVdlZWtTdGFydCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpc295ZWFyKys7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdlZWsxID0gVGltZS53ZWVrT25lU3RhcnRzKGlzb3llYXIsIGFXZWVrU3RhcnQpO1xuICAgICAgaWYgKGR0LmNvbXBhcmUod2VlazEpIDwgMCkge1xuICAgICAgICB3ZWVrMSA9IFRpbWUud2Vla09uZVN0YXJ0cygtLWlzb3llYXIsIGFXZWVrU3RhcnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBkYXlzQmV0d2VlbiA9IChkdC5zdWJ0cmFjdERhdGUod2VlazEpLnRvU2Vjb25kcygpIC8gODY0MDApO1xuICAgIGxldCBhbnN3ZXIgPSB0cnVuYyhkYXlzQmV0d2VlbiAvIDcpICsgMTtcbiAgICBUaW1lLl93bkNhY2hlW3duQ2FjaGVLZXldID0gYW5zd2VyO1xuICAgIHJldHVybiBhbnN3ZXI7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyB0aGUgZHVyYXRpb24gdG8gdGhlIGN1cnJlbnQgdGltZS4gVGhlIGluc3RhbmNlIGlzIG1vZGlmaWVkIGluXG4gICAqIHBsYWNlLlxuICAgKlxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufSBhRHVyYXRpb24gICAgICAgICBUaGUgZHVyYXRpb24gdG8gYWRkXG4gICAqL1xuICBhZGREdXJhdGlvbihhRHVyYXRpb24pIHtcbiAgICBsZXQgbXVsdCA9IChhRHVyYXRpb24uaXNOZWdhdGl2ZSA/IC0xIDogMSk7XG5cbiAgICAvLyBiZWNhdXNlIG9mIHRoZSBkdXJhdGlvbiBvcHRpbWl6YXRpb25zIGl0IGlzIG11Y2hcbiAgICAvLyBtb3JlIGVmZmljaWVudCB0byBncmFiIGFsbCB0aGUgdmFsdWVzIHVwIGZyb250XG4gICAgLy8gdGhlbiBzZXQgdGhlbSBkaXJlY3RseSAod2hpY2ggd2lsbCBhdm9pZCBhIG5vcm1hbGl6YXRpb24gY2FsbCkuXG4gICAgLy8gU28gd2UgZG9uJ3QgYWN0dWFsbHkgbm9ybWFsaXplIHVudGlsIHdlIG5lZWQgaXQuXG4gICAgbGV0IHNlY29uZCA9IHRoaXMuc2Vjb25kO1xuICAgIGxldCBtaW51dGUgPSB0aGlzLm1pbnV0ZTtcbiAgICBsZXQgaG91ciA9IHRoaXMuaG91cjtcbiAgICBsZXQgZGF5ID0gdGhpcy5kYXk7XG5cbiAgICBzZWNvbmQgKz0gbXVsdCAqIGFEdXJhdGlvbi5zZWNvbmRzO1xuICAgIG1pbnV0ZSArPSBtdWx0ICogYUR1cmF0aW9uLm1pbnV0ZXM7XG4gICAgaG91ciArPSBtdWx0ICogYUR1cmF0aW9uLmhvdXJzO1xuICAgIGRheSArPSBtdWx0ICogYUR1cmF0aW9uLmRheXM7XG4gICAgZGF5ICs9IG11bHQgKiA3ICogYUR1cmF0aW9uLndlZWtzO1xuXG4gICAgdGhpcy5zZWNvbmQgPSBzZWNvbmQ7XG4gICAgdGhpcy5taW51dGUgPSBtaW51dGU7XG4gICAgdGhpcy5ob3VyID0gaG91cjtcbiAgICB0aGlzLmRheSA9IGRheTtcblxuICAgIHRoaXMuX2NhY2hlZFVuaXhUaW1lID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJ0cmFjdCB0aGUgZGF0ZSBkZXRhaWxzIChfZXhjbHVkaW5nXyB0aW1lem9uZSkuICBVc2VmdWwgZm9yIGZpbmRpbmdcbiAgICogdGhlIHJlbGF0aXZlIGRpZmZlcmVuY2UgYmV0d2VlbiB0d28gdGltZSBvYmplY3RzIGV4Y2x1ZGluZyB0aGVpclxuICAgKiB0aW1lem9uZSBkaWZmZXJlbmNlcy5cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lfSBhRGF0ZSAgICAgVGhlIGRhdGUgdG8gc3VidHJhY3RcbiAgICogQHJldHVybiB7RHVyYXRpb259ICAgICAgVGhlIGRpZmZlcmVuY2UgYXMgYSBkdXJhdGlvblxuICAgKi9cbiAgc3VidHJhY3REYXRlKGFEYXRlKSB7XG4gICAgbGV0IHVuaXhUaW1lID0gdGhpcy50b1VuaXhUaW1lKCkgKyB0aGlzLnV0Y09mZnNldCgpO1xuICAgIGxldCBvdGhlciA9IGFEYXRlLnRvVW5peFRpbWUoKSArIGFEYXRlLnV0Y09mZnNldCgpO1xuICAgIHJldHVybiBEdXJhdGlvbi5mcm9tU2Vjb25kcyh1bml4VGltZSAtIG90aGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJ0cmFjdCB0aGUgZGF0ZSBkZXRhaWxzLCB0YWtpbmcgdGltZXpvbmVzIGludG8gYWNjb3VudC5cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lfSBhRGF0ZSAgVGhlIGRhdGUgdG8gc3VidHJhY3RcbiAgICogQHJldHVybiB7RHVyYXRpb259ICAgVGhlIGRpZmZlcmVuY2UgaW4gZHVyYXRpb25cbiAgICovXG4gIHN1YnRyYWN0RGF0ZVR6KGFEYXRlKSB7XG4gICAgbGV0IHVuaXhUaW1lID0gdGhpcy50b1VuaXhUaW1lKCk7XG4gICAgbGV0IG90aGVyID0gYURhdGUudG9Vbml4VGltZSgpO1xuICAgIHJldHVybiBEdXJhdGlvbi5mcm9tU2Vjb25kcyh1bml4VGltZSAtIG90aGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wYXJlcyB0aGUgSUNBTC5UaW1lIGluc3RhbmNlIHdpdGggYW5vdGhlciBvbmUsIG9yIGEgcGVyaW9kLlxuICAgKlxuICAgKiBAcGFyYW0ge1RpbWV8UGVyaW9kfSBhT3RoZXIgICAgICAgICAgICAgICAgICBUaGUgaW5zdGFuY2UgdG8gY29tcGFyZSB3aXRoXG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0xLCAwIG9yIDEgZm9yIGxlc3MvZXF1YWwvZ3JlYXRlclxuICAgKi9cbiAgY29tcGFyZShvdGhlcikge1xuICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIFBlcmlvZCkge1xuICAgICAgcmV0dXJuIC0xICogb3RoZXIuY29tcGFyZSh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGEgPSB0aGlzLnRvVW5peFRpbWUoKTtcbiAgICAgIGxldCBiID0gb3RoZXIudG9Vbml4VGltZSgpO1xuXG4gICAgICBpZiAoYSA+IGIpIHJldHVybiAxO1xuICAgICAgaWYgKGIgPiBhKSByZXR1cm4gLTE7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29tcGFyZXMgb25seSB0aGUgZGF0ZSBwYXJ0IG9mIHRoaXMgaW5zdGFuY2Ugd2l0aCBhbm90aGVyIG9uZS5cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lfSBvdGhlciAgICAgICAgICAgICAgICAgIFRoZSBpbnN0YW5jZSB0byBjb21wYXJlIHdpdGhcbiAgICogQHBhcmFtIHtUaW1lem9uZX0gdHogICAgICAgICAgICAgICAgIFRoZSB0aW1lem9uZSB0byBjb21wYXJlIGluXG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAgICAgICAgICAtMSwgMCBvciAxIGZvciBsZXNzL2VxdWFsL2dyZWF0ZXJcbiAgICovXG4gIGNvbXBhcmVEYXRlT25seVR6KG90aGVyLCB0eikge1xuICAgIGxldCBhID0gdGhpcy5jb252ZXJ0VG9ab25lKHR6KTtcbiAgICBsZXQgYiA9IG90aGVyLmNvbnZlcnRUb1pvbmUodHopO1xuICAgIGxldCByYyA9IDA7XG5cbiAgICBpZiAoKHJjID0gVGltZS5fY21wX2F0dHIoYSwgYiwgXCJ5ZWFyXCIpKSAhPSAwKSByZXR1cm4gcmM7XG4gICAgaWYgKChyYyA9IFRpbWUuX2NtcF9hdHRyKGEsIGIsIFwibW9udGhcIikpICE9IDApIHJldHVybiByYztcbiAgICBpZiAoKHJjID0gVGltZS5fY21wX2F0dHIoYSwgYiwgXCJkYXlcIikpICE9IDApIHJldHVybiByYztcblxuICAgIHJldHVybiByYztcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IHRoZSBpbnN0YW5jZSBpbnRvIGFub3RoZXIgdGltZXpvbmUuIFRoZSByZXR1cm5lZCBJQ0FMLlRpbWVcbiAgICogaW5zdGFuY2UgaXMgYWx3YXlzIGEgY29weS5cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lem9uZX0gem9uZSAgICAgIFRoZSB6b25lIHRvIGNvbnZlcnQgdG9cbiAgICogQHJldHVybiB7VGltZX0gICAgICAgICAgICAgIFRoZSBjb3B5LCBjb252ZXJ0ZWQgdG8gdGhlIHpvbmVcbiAgICovXG4gIGNvbnZlcnRUb1pvbmUoem9uZSkge1xuICAgIGxldCBjb3B5ID0gdGhpcy5jbG9uZSgpO1xuICAgIGxldCB6b25lX2VxdWFscyA9ICh0aGlzLnpvbmUudHppZCA9PSB6b25lLnR6aWQpO1xuXG4gICAgaWYgKCF0aGlzLmlzRGF0ZSAmJiAhem9uZV9lcXVhbHMpIHtcbiAgICAgIFRpbWV6b25lLmNvbnZlcnRfdGltZShjb3B5LCB0aGlzLnpvbmUsIHpvbmUpO1xuICAgIH1cblxuICAgIGNvcHkuem9uZSA9IHpvbmU7XG4gICAgcmV0dXJuIGNvcHk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlcyB0aGUgVVRDIG9mZnNldCBvZiB0aGUgY3VycmVudCBkYXRlL3RpbWUgaW4gdGhlIHRpbWV6b25lIGl0IGlzXG4gICAqIGluLlxuICAgKlxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICBVVEMgb2Zmc2V0IGluIHNlY29uZHNcbiAgICovXG4gIHV0Y09mZnNldCgpIHtcbiAgICBpZiAodGhpcy56b25lID09IFRpbWV6b25lLmxvY2FsVGltZXpvbmUgfHxcbiAgICAgICAgdGhpcy56b25lID09IFRpbWV6b25lLnV0Y1RpbWV6b25lKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuem9uZS51dGNPZmZzZXQodGhpcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gUkZDIDU1NDUgY29tcGxpYW50IGljYWwgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBvYmplY3QuXG4gICAqXG4gICAqIEByZXR1cm4ge1N0cmluZ30gaWNhbCBkYXRlL2RhdGUtdGltZVxuICAgKi9cbiAgdG9JQ0FMU3RyaW5nKCkge1xuICAgIGxldCBzdHJpbmcgPSB0aGlzLnRvU3RyaW5nKCk7XG5cbiAgICBpZiAoc3RyaW5nLmxlbmd0aCA+IDEwKSB7XG4gICAgICByZXR1cm4gZGVzaWduLmljYWxlbmRhci52YWx1ZVsnZGF0ZS10aW1lJ10udG9JQ0FMKHN0cmluZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBkZXNpZ24uaWNhbGVuZGFyLnZhbHVlLmRhdGUudG9JQ0FMKHN0cmluZyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBkYXRlL3RpbWUsIGluIGpDYWwgZm9ybVxuICAgKiAoaW5jbHVkaW5nIDogYW5kIC0gc2VwYXJhdG9ycykuXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIHRvU3RyaW5nKCkge1xuICAgIGxldCByZXN1bHQgPSB0aGlzLnllYXIgKyAnLScgK1xuICAgICAgICAgICAgICAgICBwYWQyKHRoaXMubW9udGgpICsgJy0nICtcbiAgICAgICAgICAgICAgICAgcGFkMih0aGlzLmRheSk7XG5cbiAgICBpZiAoIXRoaXMuaXNEYXRlKSB7XG4gICAgICAgIHJlc3VsdCArPSAnVCcgKyBwYWQyKHRoaXMuaG91cikgKyAnOicgK1xuICAgICAgICAgICAgICAgICAgcGFkMih0aGlzLm1pbnV0ZSkgKyAnOicgK1xuICAgICAgICAgICAgICAgICAgcGFkMih0aGlzLnNlY29uZCk7XG5cbiAgICAgIGlmICh0aGlzLnpvbmUgPT09IFRpbWV6b25lLnV0Y1RpbWV6b25lKSB7XG4gICAgICAgIHJlc3VsdCArPSAnWic7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0aGUgY3VycmVudCBpbnN0YW5jZSB0byBhIEphdmFzY3JpcHQgZGF0ZVxuICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgKi9cbiAgdG9KU0RhdGUoKSB7XG4gICAgaWYgKHRoaXMuem9uZSA9PSBUaW1lem9uZS5sb2NhbFRpbWV6b25lKSB7XG4gICAgICBpZiAodGhpcy5pc0RhdGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMueWVhciwgdGhpcy5tb250aCAtIDEsIHRoaXMuZGF5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnllYXIsIHRoaXMubW9udGggLSAxLCB0aGlzLmRheSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaG91ciwgdGhpcy5taW51dGUsIHRoaXMuc2Vjb25kLCAwKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMudG9Vbml4VGltZSgpICogMTAwMCk7XG4gICAgfVxuICB9XG5cbiAgX25vcm1hbGl6ZSgpIHtcbiAgICBpZiAodGhpcy5fdGltZS5pc0RhdGUpIHtcbiAgICAgIHRoaXMuX3RpbWUuaG91ciA9IDA7XG4gICAgICB0aGlzLl90aW1lLm1pbnV0ZSA9IDA7XG4gICAgICB0aGlzLl90aW1lLnNlY29uZCA9IDA7XG4gICAgfVxuICAgIHRoaXMuYWRqdXN0KDAsIDAsIDAsIDApO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQWRqdXN0IHRoZSBkYXRlL3RpbWUgYnkgdGhlIGdpdmVuIG9mZnNldFxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gYUV4dHJhRGF5cyAgICAgICBUaGUgZXh0cmEgYW1vdW50IG9mIGRheXNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFFeHRyYUhvdXJzICAgICAgVGhlIGV4dHJhIGFtb3VudCBvZiBob3Vyc1xuICAgKiBAcGFyYW0ge051bWJlcn0gYUV4dHJhTWludXRlcyAgICBUaGUgZXh0cmEgYW1vdW50IG9mIG1pbnV0ZXNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFFeHRyYVNlY29uZHMgICAgVGhlIGV4dHJhIGFtb3VudCBvZiBzZWNvbmRzXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYVRpbWUgICAgICAgICAgIFRoZSB0aW1lIHRvIGFkanVzdCwgZGVmYXVsdHMgdG8gdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudCBpbnN0YW5jZS5cbiAgICovXG4gIGFkanVzdChhRXh0cmFEYXlzLCBhRXh0cmFIb3VycywgYUV4dHJhTWludXRlcywgYUV4dHJhU2Vjb25kcywgYVRpbWUpIHtcblxuICAgIGxldCBtaW51dGVzT3ZlcmZsb3csIGhvdXJzT3ZlcmZsb3csXG4gICAgICAgIGRheXNPdmVyZmxvdyA9IDAsIHllYXJzT3ZlcmZsb3cgPSAwO1xuXG4gICAgbGV0IHNlY29uZCwgbWludXRlLCBob3VyLCBkYXk7XG4gICAgbGV0IGRheXNJbk1vbnRoO1xuXG4gICAgbGV0IHRpbWUgPSBhVGltZSB8fCB0aGlzLl90aW1lO1xuXG4gICAgaWYgKCF0aW1lLmlzRGF0ZSkge1xuICAgICAgc2Vjb25kID0gdGltZS5zZWNvbmQgKyBhRXh0cmFTZWNvbmRzO1xuICAgICAgdGltZS5zZWNvbmQgPSBzZWNvbmQgJSA2MDtcbiAgICAgIG1pbnV0ZXNPdmVyZmxvdyA9IHRydW5jKHNlY29uZCAvIDYwKTtcbiAgICAgIGlmICh0aW1lLnNlY29uZCA8IDApIHtcbiAgICAgICAgdGltZS5zZWNvbmQgKz0gNjA7XG4gICAgICAgIG1pbnV0ZXNPdmVyZmxvdy0tO1xuICAgICAgfVxuXG4gICAgICBtaW51dGUgPSB0aW1lLm1pbnV0ZSArIGFFeHRyYU1pbnV0ZXMgKyBtaW51dGVzT3ZlcmZsb3c7XG4gICAgICB0aW1lLm1pbnV0ZSA9IG1pbnV0ZSAlIDYwO1xuICAgICAgaG91cnNPdmVyZmxvdyA9IHRydW5jKG1pbnV0ZSAvIDYwKTtcbiAgICAgIGlmICh0aW1lLm1pbnV0ZSA8IDApIHtcbiAgICAgICAgdGltZS5taW51dGUgKz0gNjA7XG4gICAgICAgIGhvdXJzT3ZlcmZsb3ctLTtcbiAgICAgIH1cblxuICAgICAgaG91ciA9IHRpbWUuaG91ciArIGFFeHRyYUhvdXJzICsgaG91cnNPdmVyZmxvdztcblxuICAgICAgdGltZS5ob3VyID0gaG91ciAlIDI0O1xuICAgICAgZGF5c092ZXJmbG93ID0gdHJ1bmMoaG91ciAvIDI0KTtcbiAgICAgIGlmICh0aW1lLmhvdXIgPCAwKSB7XG4gICAgICAgIHRpbWUuaG91ciArPSAyNDtcbiAgICAgICAgZGF5c092ZXJmbG93LS07XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICAvLyBBZGp1c3QgbW9udGggYW5kIHllYXIgZmlyc3QsIGJlY2F1c2Ugd2UgbmVlZCB0byBrbm93IHdoYXQgbW9udGggdGhlIGRheVxuICAgIC8vIGlzIGluIGJlZm9yZSBhZGp1c3RpbmcgaXQuXG4gICAgaWYgKHRpbWUubW9udGggPiAxMikge1xuICAgICAgeWVhcnNPdmVyZmxvdyA9IHRydW5jKCh0aW1lLm1vbnRoIC0gMSkgLyAxMik7XG4gICAgfSBlbHNlIGlmICh0aW1lLm1vbnRoIDwgMSkge1xuICAgICAgeWVhcnNPdmVyZmxvdyA9IHRydW5jKHRpbWUubW9udGggLyAxMikgLSAxO1xuICAgIH1cblxuICAgIHRpbWUueWVhciArPSB5ZWFyc092ZXJmbG93O1xuICAgIHRpbWUubW9udGggLT0gMTIgKiB5ZWFyc092ZXJmbG93O1xuXG4gICAgLy8gTm93IHRha2UgY2FyZSBvZiB0aGUgZGF5cyAoYW5kIGFkanVzdCBtb250aCBpZiBuZWVkZWQpXG4gICAgZGF5ID0gdGltZS5kYXkgKyBhRXh0cmFEYXlzICsgZGF5c092ZXJmbG93O1xuXG4gICAgaWYgKGRheSA+IDApIHtcbiAgICAgIGZvciAoOzspIHtcbiAgICAgICAgZGF5c0luTW9udGggPSBUaW1lLmRheXNJbk1vbnRoKHRpbWUubW9udGgsIHRpbWUueWVhcik7XG4gICAgICAgIGlmIChkYXkgPD0gZGF5c0luTW9udGgpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHRpbWUubW9udGgrKztcbiAgICAgICAgaWYgKHRpbWUubW9udGggPiAxMikge1xuICAgICAgICAgIHRpbWUueWVhcisrO1xuICAgICAgICAgIHRpbWUubW9udGggPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF5IC09IGRheXNJbk1vbnRoO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB3aGlsZSAoZGF5IDw9IDApIHtcbiAgICAgICAgaWYgKHRpbWUubW9udGggPT0gMSkge1xuICAgICAgICAgIHRpbWUueWVhci0tO1xuICAgICAgICAgIHRpbWUubW9udGggPSAxMjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aW1lLm1vbnRoLS07XG4gICAgICAgIH1cblxuICAgICAgICBkYXkgKz0gVGltZS5kYXlzSW5Nb250aCh0aW1lLm1vbnRoLCB0aW1lLnllYXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRpbWUuZGF5ID0gZGF5O1xuXG4gICAgdGhpcy5fY2FjaGVkVW5peFRpbWUgPSBudWxsO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgdGhlIGN1cnJlbnQgaW5zdGFuY2UgZnJvbSB1bml4IHRpbWUsIHRoZSBudW1iZXIgb2Ygc2Vjb25kcyBzaW5jZVxuICAgKiBKYW51YXJ5IDFzdCwgMTk3MC5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHNlY29uZHMgICAgICBUaGUgc2Vjb25kcyB0byBzZXQgdXAgd2l0aFxuICAgKi9cbiAgZnJvbVVuaXhUaW1lKHNlY29uZHMpIHtcbiAgICB0aGlzLnpvbmUgPSBUaW1lem9uZS51dGNUaW1lem9uZTtcbiAgICAvLyBXZSBjb3VsZCB1c2UgYGZyb21KU0RhdGVgIGhlcmUsIGJ1dCB0aGlzIGlzIGFib3V0IHR3aWNlIGFzIGZhc3QuXG4gICAgLy8gV2UgY291bGQgYWxzbyBjbG9uZSBgZXBvY2hUaW1lYCBhbmQgdXNlIGBhZGp1c3RgIGZvciBhIG1vcmVcbiAgICAvLyBpY2FsLmpzLWNlbnRyaWMgYXBwcm9hY2gsIGJ1dCB0aGlzIGlzIGFib3V0IDEwMCB0aW1lcyBhcyBmYXN0LlxuICAgIGxldCBkYXRlID0gbmV3IERhdGUoc2Vjb25kcyAqIDEwMDApO1xuICAgIHRoaXMueWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgICB0aGlzLm1vbnRoID0gZGF0ZS5nZXRVVENNb250aCgpICsgMTtcbiAgICB0aGlzLmRheSA9IGRhdGUuZ2V0VVRDRGF0ZSgpO1xuICAgIGlmICh0aGlzLl90aW1lLmlzRGF0ZSkge1xuICAgICAgdGhpcy5ob3VyID0gMDtcbiAgICAgIHRoaXMubWludXRlID0gMDtcbiAgICAgIHRoaXMuc2Vjb25kID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ob3VyID0gZGF0ZS5nZXRVVENIb3VycygpO1xuICAgICAgdGhpcy5taW51dGUgPSBkYXRlLmdldFVUQ01pbnV0ZXMoKTtcbiAgICAgIHRoaXMuc2Vjb25kID0gZGF0ZS5nZXRVVENTZWNvbmRzKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fY2FjaGVkVW5peFRpbWUgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIHRoZSBjdXJyZW50IGluc3RhbmNlIHRvIHNlY29uZHMgc2luY2UgSmFudWFyeSAxc3QgMTk3MC5cbiAgICpcbiAgICogQHJldHVybiB7TnVtYmVyfSAgICAgICAgIFNlY29uZHMgc2luY2UgMTk3MFxuICAgKi9cbiAgdG9Vbml4VGltZSgpIHtcbiAgICBpZiAodGhpcy5fY2FjaGVkVW5peFRpbWUgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRVbml4VGltZTtcbiAgICB9XG4gICAgbGV0IG9mZnNldCA9IHRoaXMudXRjT2Zmc2V0KCk7XG5cbiAgICAvLyB3ZSB1c2UgdGhlIG9mZnNldCB0cmljayB0byBlbnN1cmVcbiAgICAvLyB0aGF0IHdlIGFyZSBnZXR0aW5nIHRoZSBhY3R1YWwgVVRDIHRpbWVcbiAgICBsZXQgbXMgPSBEYXRlLlVUQyhcbiAgICAgIHRoaXMueWVhcixcbiAgICAgIHRoaXMubW9udGggLSAxLFxuICAgICAgdGhpcy5kYXksXG4gICAgICB0aGlzLmhvdXIsXG4gICAgICB0aGlzLm1pbnV0ZSxcbiAgICAgIHRoaXMuc2Vjb25kIC0gb2Zmc2V0XG4gICAgKTtcblxuICAgIC8vIHNlY29uZHNcbiAgICB0aGlzLl9jYWNoZWRVbml4VGltZSA9IG1zIC8gMTAwMDtcbiAgICByZXR1cm4gdGhpcy5fY2FjaGVkVW5peFRpbWU7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgdGltZSB0byBpbnRvIE9iamVjdCB3aGljaCBjYW4gYmUgc2VyaWFsaXplZCB0aGVuIHJlLWNyZWF0ZWRcbiAgICogdXNpbmcgdGhlIGNvbnN0cnVjdG9yLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAvLyB0b0pTT04gd2lsbCBhdXRvbWF0aWNhbGx5IGJlIGNhbGxlZFxuICAgKiB2YXIganNvbiA9IEpTT04uc3RyaW5naWZ5KG15dGltZSk7XG4gICAqXG4gICAqIHZhciBkZXNlcmlhbGl6ZWQgPSBKU09OLnBhcnNlKGpzb24pO1xuICAgKlxuICAgKiB2YXIgdGltZSA9IG5ldyBJQ0FMLlRpbWUoZGVzZXJpYWxpemVkKTtcbiAgICpcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgdG9KU09OKCkge1xuICAgIGxldCBjb3B5ID0gW1xuICAgICAgJ3llYXInLFxuICAgICAgJ21vbnRoJyxcbiAgICAgICdkYXknLFxuICAgICAgJ2hvdXInLFxuICAgICAgJ21pbnV0ZScsXG4gICAgICAnc2Vjb25kJyxcbiAgICAgICdpc0RhdGUnXG4gICAgXTtcblxuICAgIGxldCByZXN1bHQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCBsZW4gPSBjb3B5Lmxlbmd0aDtcbiAgICBsZXQgcHJvcDtcblxuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHByb3AgPSBjb3B5W2ldO1xuICAgICAgcmVzdWx0W3Byb3BdID0gdGhpc1twcm9wXTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy56b25lKSB7XG4gICAgICByZXN1bHQudGltZXpvbmUgPSB0aGlzLnpvbmUudHppZDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG5cbi8qIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKiBQb3J0aW9ucyBDb3B5cmlnaHQgKEMpIFBoaWxpcHAgS2V3aXNjaCAqL1xuXG5cbi8qKlxuICogVGhpcyBsZXRzIHR5cGVzY3JpcHQgcmVzb2x2ZSBvdXIgY3VzdG9tIHR5cGVzIGluIHRoZVxuICogZ2VuZXJhdGVkIGQudHMgZmlsZXMgKGpzZG9jIHR5cGVkZWZzIGFyZSBjb252ZXJ0ZWQgdG8gdHlwZXNjcmlwdCB0eXBlcykuXG4gKiBJZ25vcmUgcHJldmVudHMgdGhlIHR5cGVkZWZzIGZyb20gYmVpbmcgZG9jdW1lbnRlZCBtb3JlIHRoYW4gb25jZS5cbiAqXG4gKiBAaWdub3JlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS5wYXJzZXJTdGF0ZX0gcGFyc2VyU3RhdGVcbiAqIEltcG9ydHMgdGhlICdwYXJzZXJTdGF0ZScgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS5kZXNpZ25TZXR9IGRlc2lnblNldFxuICogSW1wb3J0cyB0aGUgJ2Rlc2lnblNldCcgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKi9cblxuY29uc3QgQ0hBUiA9IC9bXiBcXHRdLztcbmNvbnN0IFZBTFVFX0RFTElNSVRFUiA9ICc6JztcbmNvbnN0IFBBUkFNX0RFTElNSVRFUiA9ICc7JztcbmNvbnN0IFBBUkFNX05BTUVfREVMSU1JVEVSID0gJz0nO1xuY29uc3QgREVGQVVMVF9WQUxVRV9UWVBFJDEgPSAndW5rbm93bic7XG5jb25zdCBERUZBVUxUX1BBUkFNX1RZUEUgPSAndGV4dCc7XG5jb25zdCBSRkM2ODY4X1JFUExBQ0VfTUFQJDEgPSB7IFwiXidcIjogJ1wiJywgXCJeblwiOiBcIlxcblwiLCBcIl5eXCI6IFwiXlwiIH07XG5cbi8qKlxuICogUGFyc2VzIGlDYWxlbmRhciBvciB2Q2FyZCBkYXRhIGludG8gYSByYXcgakNhbCBvYmplY3QuIENvbnN1bHRcbiAqIGRvY3VtZW50YXRpb24gb24gdGhlIHtAdHV0b3JpYWwgbGF5ZXJzfGxheWVycyBvZiBwYXJzaW5nfSBmb3IgbW9yZVxuICogZGV0YWlscy5cbiAqXG4gKiBAZnVuY3Rpb24gSUNBTC5wYXJzZVxuICogQG1lbWJlcm9mIElDQUxcbiAqIEB2YXJpYXRpb24gZnVuY3Rpb25cbiAqIEB0b2RvIEZpeCB0aGUgQVBJIHRvIGJlIG1vcmUgY2xlYXIgb24gdGhlIHJldHVybiB0eXBlXG4gKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgICAgICBUaGUgc3RyaW5nIGRhdGEgdG8gcGFyc2VcbiAqIEByZXR1cm4ge09iamVjdHxPYmplY3RbXX0gIEEgc2luZ2xlIGpDYWwgb2JqZWN0LCBvciBhbiBhcnJheSB0aGVyZW9mXG4gKi9cbmZ1bmN0aW9uIHBhcnNlKGlucHV0KSB7XG4gIGxldCBzdGF0ZSA9IHt9O1xuICBsZXQgcm9vdCA9IHN0YXRlLmNvbXBvbmVudCA9IFtdO1xuXG4gIHN0YXRlLnN0YWNrID0gW3Jvb3RdO1xuXG4gIHBhcnNlLl9lYWNoTGluZShpbnB1dCwgZnVuY3Rpb24oZXJyLCBsaW5lKSB7XG4gICAgcGFyc2UuX2hhbmRsZUNvbnRlbnRMaW5lKGxpbmUsIHN0YXRlKTtcbiAgfSk7XG5cblxuICAvLyB3aGVuIHRoZXJlIGFyZSBzdGlsbCBpdGVtcyBvbiB0aGUgc3RhY2tcbiAgLy8gdGhyb3cgYSBmYXRhbCBlcnJvciwgYSBjb21wb25lbnQgd2FzIG5vdCBjbG9zZWRcbiAgLy8gY29ycmVjdGx5IGluIHRoYXQgY2FzZS5cbiAgaWYgKHN0YXRlLnN0YWNrLmxlbmd0aCA+IDEpIHtcbiAgICB0aHJvdyBuZXcgUGFyc2VyRXJyb3IoXG4gICAgICAnaW52YWxpZCBpY2FsIGJvZHkuIGNvbXBvbmVudCBiZWdhbiBidXQgZGlkIG5vdCBlbmQnXG4gICAgKTtcbiAgfVxuXG4gIHN0YXRlID0gbnVsbDtcblxuICByZXR1cm4gKHJvb3QubGVuZ3RoID09IDEgPyByb290WzBdIDogcm9vdCk7XG59XG5cbi8qKlxuICogUGFyc2UgYW4gaUNhbGVuZGFyIHByb3BlcnR5IHZhbHVlIGludG8gdGhlIGpDYWwgZm9yIGEgc2luZ2xlIHByb3BlcnR5XG4gKlxuICogQGZ1bmN0aW9uIElDQUwucGFyc2UucHJvcGVydHlcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqICAgVGhlIGlDYWxlbmRhciBwcm9wZXJ0eSBzdHJpbmcgdG8gcGFyc2VcbiAqIEBwYXJhbSB7ZGVzaWduU2V0PX0gZGVzaWduU2V0XG4gKiAgIFRoZSBkZXNpZ24gZGF0YSB0byB1c2UgZm9yIHRoaXMgcHJvcGVydHlcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqICAgVGhlIGpDYWwgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIHByb3BlcnR5XG4gKi9cbnBhcnNlLnByb3BlcnR5ID0gZnVuY3Rpb24oc3RyLCBkZXNpZ25TZXQpIHtcbiAgbGV0IHN0YXRlID0ge1xuICAgIGNvbXBvbmVudDogW1tdLCBbXV0sXG4gICAgZGVzaWduU2V0OiBkZXNpZ25TZXQgfHwgZGVzaWduLmRlZmF1bHRTZXRcbiAgfTtcbiAgcGFyc2UuX2hhbmRsZUNvbnRlbnRMaW5lKHN0ciwgc3RhdGUpO1xuICByZXR1cm4gc3RhdGUuY29tcG9uZW50WzFdWzBdO1xufTtcblxuLyoqXG4gKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcGFyc2UgYSBjb21wb25lbnQuIFlvdSBjYW4gdXNlIElDQUwucGFyc2UoKSBkaXJlY3RseVxuICogaW5zdGVhZC5cbiAqXG4gKiBAZnVuY3Rpb24gSUNBTC5wYXJzZS5jb21wb25lbnRcbiAqIEBzZWUgSUNBTC5wYXJzZShmdW5jdGlvbilcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgICAgVGhlIGlDYWxlbmRhciBjb21wb25lbnQgc3RyaW5nIHRvIHBhcnNlXG4gKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgIFRoZSBqQ2FsIE9iamVjdCBjb250YWluaW5nIHRoZSBjb21wb25lbnRcbiAqL1xucGFyc2UuY29tcG9uZW50ID0gZnVuY3Rpb24oc3RyKSB7XG4gIHJldHVybiBwYXJzZShzdHIpO1xufTtcblxuXG4vKipcbiAqIEFuIGVycm9yIHRoYXQgb2NjdXJyZWQgZHVyaW5nIHBhcnNpbmcuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgICAgICAgIFRoZSBlcnJvciBtZXNzYWdlXG4gKiBAbWVtYmVyb2YgSUNBTC5wYXJzZVxuICogQGV4dGVuZHMge0Vycm9yfVxuICovXG5jbGFzcyBQYXJzZXJFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgbmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcbn1cblxuLy8gY2xhc3NlcyAmIGNvbnN0YW50c1xucGFyc2UuUGFyc2VyRXJyb3IgPSBQYXJzZXJFcnJvcjtcblxuXG4vKipcbiAqIEhhbmRsZXMgYSBzaW5nbGUgbGluZSBvZiBpQ2FsZW5kYXIvdkNhcmQsIHVwZGF0aW5nIHRoZSBzdGF0ZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGZ1bmN0aW9uIElDQUwucGFyc2UuX2hhbmRsZUNvbnRlbnRMaW5lXG4gKiBAcGFyYW0ge1N0cmluZ30gbGluZSAgICAgICAgICBUaGUgY29udGVudCBsaW5lIHRvIHByb2Nlc3NcbiAqIEBwYXJhbSB7cGFyc2VyU3RhdGV9IHN0YXRlICAgIFRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBsaW5lIHBhcnNpbmdcbiAqL1xucGFyc2UuX2hhbmRsZUNvbnRlbnRMaW5lID0gZnVuY3Rpb24obGluZSwgc3RhdGUpIHtcbiAgLy8gYnJlYWsgdXAgdGhlIHBhcnRzIG9mIHRoZSBsaW5lXG4gIGxldCB2YWx1ZVBvcyA9IGxpbmUuaW5kZXhPZihWQUxVRV9ERUxJTUlURVIpO1xuICBsZXQgcGFyYW1Qb3MgPSBsaW5lLmluZGV4T2YoUEFSQU1fREVMSU1JVEVSKTtcblxuICBsZXQgbGFzdFBhcmFtSW5kZXg7XG4gIGxldCBsYXN0VmFsdWVQb3M7XG5cbiAgLy8gbmFtZSBvZiBwcm9wZXJ0eSBvciBiZWdpbi9lbmRcbiAgbGV0IG5hbWU7XG4gIGxldCB2YWx1ZTtcbiAgLy8gcGFyYW1zIGlzIG9ubHkgb3ZlcnJpZGRlbiBpZiBwYXJhbVBvcyAhPT0gLTEuXG4gIC8vIHdlIGNhbid0IGRvIHBhcmFtcyA9IHBhcmFtcyB8fCB7fSBsYXRlciBvblxuICAvLyBiZWNhdXNlIGl0IHNhY3JpZmljZXMgb3BzLlxuICBsZXQgcGFyYW1zID0ge307XG5cbiAgLyoqXG4gICAqIERpZmZlcmVudCBwcm9wZXJ0eSBjYXNlc1xuICAgKlxuICAgKlxuICAgKiAxLiBSUlVMRTpGUkVRPWZvb1xuICAgKiAgICAvLyBGUkVRPSBpcyBub3QgYSBwYXJhbSBidXQgdGhlIHZhbHVlXG4gICAqXG4gICAqIDIuIEFUVEVOREVFO1JPTEU9UkVRLVBBUlRJQ0lQQU5UO1xuICAgKiAgICAvLyBST0xFPSBpcyBhIHBhcmFtIGJlY2F1c2UgOiBoYXMgbm90IGhhcHBlbmVkIHlldFxuICAgKi9cbiAgICAvLyB3aGVuIHRoZSBwYXJhbWV0ZXIgZGVsaW1pdGVyIGlzIGFmdGVyIHRoZVxuICAgIC8vIHZhbHVlIGRlbGltaXRlciB0aGVuIGl0IGlzIG5vdCBhIHBhcmFtZXRlci5cblxuICBpZiAoKHBhcmFtUG9zICE9PSAtMSAmJiB2YWx1ZVBvcyAhPT0gLTEpKSB7XG4gICAgLy8gd2hlbiB0aGUgcGFyYW1ldGVyIGRlbGltaXRlciBpcyBhZnRlciB0aGVcbiAgICAvLyB2YWx1ZSBkZWxpbWl0ZXIgdGhlbiBpdCBpcyBub3QgYSBwYXJhbWV0ZXIuXG4gICAgaWYgKHBhcmFtUG9zID4gdmFsdWVQb3MpIHtcbiAgICAgIHBhcmFtUG9zID0gLTE7XG4gICAgfVxuICB9XG5cbiAgbGV0IHBhcnNlZFBhcmFtcztcbiAgaWYgKHBhcmFtUG9zICE9PSAtMSkge1xuICAgIG5hbWUgPSBsaW5lLnNsaWNlKDAsIE1hdGgubWF4KDAsIHBhcmFtUG9zKSkudG9Mb3dlckNhc2UoKTtcbiAgICBwYXJzZWRQYXJhbXMgPSBwYXJzZS5fcGFyc2VQYXJhbWV0ZXJzKGxpbmUuc2xpY2UoTWF0aC5tYXgoMCwgcGFyYW1Qb3MpKSwgMCwgc3RhdGUuZGVzaWduU2V0KTtcbiAgICBpZiAocGFyc2VkUGFyYW1zWzJdID09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgUGFyc2VyRXJyb3IoXCJJbnZhbGlkIHBhcmFtZXRlcnMgaW4gJ1wiICsgbGluZSArIFwiJ1wiKTtcbiAgICB9XG4gICAgcGFyYW1zID0gcGFyc2VkUGFyYW1zWzBdO1xuICAgIC8vIEhhbmRsZSBwYXJhbWV0ZXIgdmFsdWVzIHdpdGggbXVsdGlwbGUgZW50cmllc1xuICAgIGxldCBwYXJzZWRQYXJhbUxlbmd0aDtcbiAgICBpZiAodHlwZW9mIHBhcnNlZFBhcmFtc1sxXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHBhcnNlZFBhcmFtTGVuZ3RoID0gcGFyc2VkUGFyYW1zWzFdLmxlbmd0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFyc2VkUGFyYW1MZW5ndGggPSBwYXJzZWRQYXJhbXNbMV0ucmVkdWNlKChhY2N1bXVsYXRvciwgY3VycmVudFZhbHVlKSA9PiB7XG4gICAgICAgIHJldHVybiBhY2N1bXVsYXRvciArIGN1cnJlbnRWYWx1ZS5sZW5ndGg7XG4gICAgICB9LCAwKTtcbiAgICB9XG4gICAgbGFzdFBhcmFtSW5kZXggPSBwYXJzZWRQYXJhbUxlbmd0aCArIHBhcnNlZFBhcmFtc1syXSArIHBhcmFtUG9zO1xuICAgIGlmICgobGFzdFZhbHVlUG9zID1cbiAgICAgIGxpbmUuc2xpY2UoTWF0aC5tYXgoMCwgbGFzdFBhcmFtSW5kZXgpKS5pbmRleE9mKFZBTFVFX0RFTElNSVRFUikpICE9PSAtMSkge1xuICAgICAgdmFsdWUgPSBsaW5lLnNsaWNlKE1hdGgubWF4KDAsIGxhc3RQYXJhbUluZGV4ICsgbGFzdFZhbHVlUG9zICsgMSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgUGFyc2VyRXJyb3IoXCJNaXNzaW5nIHBhcmFtZXRlciB2YWx1ZSBpbiAnXCIgKyBsaW5lICsgXCInXCIpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh2YWx1ZVBvcyAhPT0gLTEpIHtcbiAgICAvLyB3aXRob3V0IHBhcm1ldGVycyAoQkVHSU46VkNBRU5EQVIsIENMQVNTOlBVQkxJQylcbiAgICBuYW1lID0gbGluZS5zbGljZSgwLCBNYXRoLm1heCgwLCB2YWx1ZVBvcykpLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFsdWUgPSBsaW5lLnNsaWNlKE1hdGgubWF4KDAsIHZhbHVlUG9zICsgMSkpO1xuXG4gICAgaWYgKG5hbWUgPT09ICdiZWdpbicpIHtcbiAgICAgIGxldCBuZXdDb21wb25lbnQgPSBbdmFsdWUudG9Mb3dlckNhc2UoKSwgW10sIFtdXTtcbiAgICAgIGlmIChzdGF0ZS5zdGFjay5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgc3RhdGUuY29tcG9uZW50LnB1c2gobmV3Q29tcG9uZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLmNvbXBvbmVudFsyXS5wdXNoKG5ld0NvbXBvbmVudCk7XG4gICAgICB9XG4gICAgICBzdGF0ZS5zdGFjay5wdXNoKHN0YXRlLmNvbXBvbmVudCk7XG4gICAgICBzdGF0ZS5jb21wb25lbnQgPSBuZXdDb21wb25lbnQ7XG4gICAgICBpZiAoIXN0YXRlLmRlc2lnblNldCkge1xuICAgICAgICBzdGF0ZS5kZXNpZ25TZXQgPSBkZXNpZ24uZ2V0RGVzaWduU2V0KHN0YXRlLmNvbXBvbmVudFswXSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChuYW1lID09PSAnZW5kJykge1xuICAgICAgc3RhdGUuY29tcG9uZW50ID0gc3RhdGUuc3RhY2sucG9wKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIElmIGl0IGlzIG5vdCBiZWdpbi9lbmQsIHRoZW4gdGhpcyBpcyBhIHByb3BlcnR5IHdpdGggYW4gZW1wdHkgdmFsdWUsXG4gICAgLy8gd2hpY2ggc2hvdWxkIGJlIGNvbnNpZGVyZWQgdmFsaWQuXG4gIH0gZWxzZSB7XG4gICAgLyoqXG4gICAgICogSW52YWxpZCBsaW5lLlxuICAgICAqIFRoZSByYXRpb25hbCB0byB0aHJvdyBhbiBlcnJvciBpcyB3ZSB3aWxsXG4gICAgICogbmV2ZXIgYmUgY2VydGFpbiB0aGF0IHRoZSByZXN0IG9mIHRoZSBmaWxlXG4gICAgICogaXMgc2FuZSBhbmQgaXQgaXMgdW5saWtlbHkgdGhhdCB3ZSBjYW4gc2VyaWFsaXplXG4gICAgICogdGhlIHJlc3VsdCBjb3JyZWN0bHkgZWl0aGVyLlxuICAgICAqL1xuICAgIHRocm93IG5ldyBQYXJzZXJFcnJvcihcbiAgICAgICdpbnZhbGlkIGxpbmUgKG5vIHRva2VuIFwiO1wiIG9yIFwiOlwiKSBcIicgKyBsaW5lICsgJ1wiJ1xuICAgICk7XG4gIH1cblxuICBsZXQgdmFsdWVUeXBlO1xuICBsZXQgbXVsdGlWYWx1ZSA9IGZhbHNlO1xuICBsZXQgc3RydWN0dXJlZFZhbHVlID0gZmFsc2U7XG4gIGxldCBwcm9wZXJ0eURldGFpbHM7XG4gIGxldCBzcGxpdE5hbWU7XG4gIGxldCB1bmdyb3VwZWROYW1lO1xuXG4gIC8vIGZldGNoIHRoZSB1bmdyb3VwZWQgcGFydCBvZiB0aGUgbmFtZVxuICBpZiAoc3RhdGUuZGVzaWduU2V0LnByb3BlcnR5R3JvdXBzICYmIG5hbWUuaW5kZXhPZignLicpICE9PSAtMSkge1xuICAgIHNwbGl0TmFtZSA9IG5hbWUuc3BsaXQoJy4nKTtcbiAgICBwYXJhbXMuZ3JvdXAgPSBzcGxpdE5hbWVbMF07XG4gICAgdW5ncm91cGVkTmFtZSA9IHNwbGl0TmFtZVsxXTtcbiAgfSBlbHNlIHtcbiAgICB1bmdyb3VwZWROYW1lID0gbmFtZTtcbiAgfVxuXG4gIGlmICh1bmdyb3VwZWROYW1lIGluIHN0YXRlLmRlc2lnblNldC5wcm9wZXJ0eSkge1xuICAgIHByb3BlcnR5RGV0YWlscyA9IHN0YXRlLmRlc2lnblNldC5wcm9wZXJ0eVt1bmdyb3VwZWROYW1lXTtcblxuICAgIGlmICgnbXVsdGlWYWx1ZScgaW4gcHJvcGVydHlEZXRhaWxzKSB7XG4gICAgICBtdWx0aVZhbHVlID0gcHJvcGVydHlEZXRhaWxzLm11bHRpVmFsdWU7XG4gICAgfVxuXG4gICAgaWYgKCdzdHJ1Y3R1cmVkVmFsdWUnIGluIHByb3BlcnR5RGV0YWlscykge1xuICAgICAgc3RydWN0dXJlZFZhbHVlID0gcHJvcGVydHlEZXRhaWxzLnN0cnVjdHVyZWRWYWx1ZTtcbiAgICB9XG5cbiAgICBpZiAodmFsdWUgJiYgJ2RldGVjdFR5cGUnIGluIHByb3BlcnR5RGV0YWlscykge1xuICAgICAgdmFsdWVUeXBlID0gcHJvcGVydHlEZXRhaWxzLmRldGVjdFR5cGUodmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGF0dGVtcHQgdG8gZGV0ZXJtaW5lIHZhbHVlXG4gIGlmICghdmFsdWVUeXBlKSB7XG4gICAgaWYgKCEoJ3ZhbHVlJyBpbiBwYXJhbXMpKSB7XG4gICAgICBpZiAocHJvcGVydHlEZXRhaWxzKSB7XG4gICAgICAgIHZhbHVlVHlwZSA9IHByb3BlcnR5RGV0YWlscy5kZWZhdWx0VHlwZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlVHlwZSA9IERFRkFVTFRfVkFMVUVfVFlQRSQxO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBwb3NzaWJsZSB0byBhdm9pZCB0aGlzP1xuICAgICAgdmFsdWVUeXBlID0gcGFyYW1zLnZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuICB9XG5cbiAgZGVsZXRlIHBhcmFtcy52YWx1ZTtcblxuICAvKipcbiAgICogTm90ZSBvbiBgdmFyIHJlc3VsdGAganVnZ2xpbmc6XG4gICAqXG4gICAqIEkgb2JzZXJ2ZWQgdGhhdCBidWlsZGluZyB0aGUgYXJyYXkgaW4gcGllY2VzIGhhcyBhZHZlcnNlXG4gICAqIGVmZmVjdHMgb24gcGVyZm9ybWFuY2UsIHNvIHdoZXJlIHBvc3NpYmxlIHdlIGlubGluZSB0aGUgY3JlYXRpb24uXG4gICAqIEl0IGlzIGEgbGl0dGxlIHVnbHkgYnV0IHJlc3VsdGVkIGluIH4yMDAwIGFkZGl0aW9uYWwgb3BzL3NlYy5cbiAgICovXG5cbiAgbGV0IHJlc3VsdDtcbiAgaWYgKG11bHRpVmFsdWUgJiYgc3RydWN0dXJlZFZhbHVlKSB7XG4gICAgdmFsdWUgPSBwYXJzZS5fcGFyc2VNdWx0aVZhbHVlKHZhbHVlLCBzdHJ1Y3R1cmVkVmFsdWUsIHZhbHVlVHlwZSwgW10sIG11bHRpVmFsdWUsIHN0YXRlLmRlc2lnblNldCwgc3RydWN0dXJlZFZhbHVlKTtcbiAgICByZXN1bHQgPSBbdW5ncm91cGVkTmFtZSwgcGFyYW1zLCB2YWx1ZVR5cGUsIHZhbHVlXTtcbiAgfSBlbHNlIGlmIChtdWx0aVZhbHVlKSB7XG4gICAgcmVzdWx0ID0gW3VuZ3JvdXBlZE5hbWUsIHBhcmFtcywgdmFsdWVUeXBlXTtcbiAgICBwYXJzZS5fcGFyc2VNdWx0aVZhbHVlKHZhbHVlLCBtdWx0aVZhbHVlLCB2YWx1ZVR5cGUsIHJlc3VsdCwgbnVsbCwgc3RhdGUuZGVzaWduU2V0LCBmYWxzZSk7XG4gIH0gZWxzZSBpZiAoc3RydWN0dXJlZFZhbHVlKSB7XG4gICAgdmFsdWUgPSBwYXJzZS5fcGFyc2VNdWx0aVZhbHVlKHZhbHVlLCBzdHJ1Y3R1cmVkVmFsdWUsIHZhbHVlVHlwZSwgW10sIG51bGwsIHN0YXRlLmRlc2lnblNldCwgc3RydWN0dXJlZFZhbHVlKTtcbiAgICByZXN1bHQgPSBbdW5ncm91cGVkTmFtZSwgcGFyYW1zLCB2YWx1ZVR5cGUsIHZhbHVlXTtcbiAgfSBlbHNlIHtcbiAgICB2YWx1ZSA9IHBhcnNlLl9wYXJzZVZhbHVlKHZhbHVlLCB2YWx1ZVR5cGUsIHN0YXRlLmRlc2lnblNldCwgZmFsc2UpO1xuICAgIHJlc3VsdCA9IFt1bmdyb3VwZWROYW1lLCBwYXJhbXMsIHZhbHVlVHlwZSwgdmFsdWVdO1xuICB9XG4gIC8vIHJmYzYzNTAgcmVxdWlyZXMgdGhhdCBpbiB2Q2FyZCA0LjAgdGhlIGZpcnN0IGNvbXBvbmVudCBpcyB0aGUgVkVSU0lPTlxuICAvLyBjb21wb25lbnQgd2l0aCBhcyB2YWx1ZSA0LjAsIG5vdGUgdGhhdCAzLjAgZG9lcyBub3QgaGF2ZSB0aGlzIHJlcXVpcmVtZW50LlxuICBpZiAoc3RhdGUuY29tcG9uZW50WzBdID09PSAndmNhcmQnICYmIHN0YXRlLmNvbXBvbmVudFsxXS5sZW5ndGggPT09IDAgJiZcbiAgICAgICAgICAhKG5hbWUgPT09ICd2ZXJzaW9uJyAmJiB2YWx1ZSA9PT0gJzQuMCcpKSB7XG4gICAgc3RhdGUuZGVzaWduU2V0ID0gZGVzaWduLmdldERlc2lnblNldChcInZjYXJkM1wiKTtcbiAgfVxuICBzdGF0ZS5jb21wb25lbnRbMV0ucHVzaChyZXN1bHQpO1xufTtcblxuLyoqXG4gKiBQYXJzZSBhIHZhbHVlIGZyb20gdGhlIHJhdyB2YWx1ZSBpbnRvIHRoZSBqQ2FyZC9qQ2FsIHZhbHVlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAZnVuY3Rpb24gSUNBTC5wYXJzZS5fcGFyc2VWYWx1ZVxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlICAgICAgICAgIE9yaWdpbmFsIHZhbHVlXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAgICAgICAgICAgVHlwZSBvZiB2YWx1ZVxuICogQHBhcmFtIHtPYmplY3R9IGRlc2lnblNldCAgICAgIFRoZSBkZXNpZ24gZGF0YSB0byB1c2UgZm9yIHRoaXMgdmFsdWVcbiAqIEByZXR1cm4ge09iamVjdH0gdmFyaWVzIG9uIHR5cGVcbiAqL1xucGFyc2UuX3BhcnNlVmFsdWUgPSBmdW5jdGlvbih2YWx1ZSwgdHlwZSwgZGVzaWduU2V0LCBzdHJ1Y3R1cmVkVmFsdWUpIHtcbiAgaWYgKHR5cGUgaW4gZGVzaWduU2V0LnZhbHVlICYmICdmcm9tSUNBTCcgaW4gZGVzaWduU2V0LnZhbHVlW3R5cGVdKSB7XG4gICAgcmV0dXJuIGRlc2lnblNldC52YWx1ZVt0eXBlXS5mcm9tSUNBTCh2YWx1ZSwgc3RydWN0dXJlZFZhbHVlKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59O1xuXG4vKipcbiAqIFBhcnNlIHBhcmFtZXRlcnMgZnJvbSBhIHN0cmluZyB0byBvYmplY3QuXG4gKlxuICogQGZ1bmN0aW9uIElDQUwucGFyc2UuX3BhcnNlUGFyYW1ldGVyc1xuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBsaW5lICAgICAgICAgICAgICAgQSBzaW5nbGUgdW5mb2xkZWQgbGluZVxuICogQHBhcmFtIHtOdW1iZXJ9IHN0YXJ0ICAgICAgICAgICAgICBQb3NpdGlvbiB0byBzdGFydCBsb29raW5nIGZvciBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge09iamVjdH0gZGVzaWduU2V0ICAgICAgICAgIFRoZSBkZXNpZ24gZGF0YSB0byB1c2UgZm9yIHRoaXMgcHJvcGVydHlcbiAqIEByZXR1cm4ge0FycmF5fSAgICAgICAgICAgICAgICAgICAgQXJyYXkgY29udGFpbmluZyBrZXkvdmFseWUgcGFpcnMgb2YgcGFyc2VkIHBhcmFtZXRlcnMsIHRoZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZCB2YWx1ZSwgYW5kIHRoZSBwb3NpdGlvbiBvZiB0aGUgbGFzdCBwYXJhbWV0ZXIgZm91bmRcbiAqL1xucGFyc2UuX3BhcnNlUGFyYW1ldGVycyA9IGZ1bmN0aW9uKGxpbmUsIHN0YXJ0LCBkZXNpZ25TZXQpIHtcbiAgbGV0IGxhc3RQYXJhbSA9IHN0YXJ0O1xuICBsZXQgcG9zID0gMDtcbiAgbGV0IGRlbGltID0gUEFSQU1fTkFNRV9ERUxJTUlURVI7XG4gIGxldCByZXN1bHQgPSB7fTtcbiAgbGV0IG5hbWUsIGxjbmFtZTtcbiAgbGV0IHZhbHVlLCB2YWx1ZVBvcyA9IC0xO1xuICBsZXQgdHlwZSwgbXVsdGlWYWx1ZSwgbXZkZWxpbTtcblxuICAvLyBmaW5kIHRoZSBuZXh0ICc9JyBzaWduXG4gIC8vIHVzZSBsYXN0UGFyYW0gYW5kIHBvcyB0byBmaW5kIG5hbWVcbiAgLy8gY2hlY2sgaWYgXCIgaXMgdXNlZCBpZiBzbyBnZXQgdmFsdWUgZnJvbSBcIi0+XCJcbiAgLy8gdGhlbiBpbmNyZW1lbnQgcG9zIHRvIGZpbmQgbmV4dCA7XG5cbiAgd2hpbGUgKChwb3MgIT09IGZhbHNlKSAmJlxuICAgICAgICAgKHBvcyA9IGxpbmUuaW5kZXhPZihkZWxpbSwgcG9zICsgMSkpICE9PSAtMSkge1xuXG4gICAgbmFtZSA9IGxpbmUuc2xpY2UobGFzdFBhcmFtICsgMSwgcG9zKTtcbiAgICBpZiAobmFtZS5sZW5ndGggPT0gMCkge1xuICAgICAgdGhyb3cgbmV3IFBhcnNlckVycm9yKFwiRW1wdHkgcGFyYW1ldGVyIG5hbWUgaW4gJ1wiICsgbGluZSArIFwiJ1wiKTtcbiAgICB9XG4gICAgbGNuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIG12ZGVsaW0gPSBmYWxzZTtcbiAgICBtdWx0aVZhbHVlID0gZmFsc2U7XG5cbiAgICBpZiAobGNuYW1lIGluIGRlc2lnblNldC5wYXJhbSAmJiBkZXNpZ25TZXQucGFyYW1bbGNuYW1lXS52YWx1ZVR5cGUpIHtcbiAgICAgIHR5cGUgPSBkZXNpZ25TZXQucGFyYW1bbGNuYW1lXS52YWx1ZVR5cGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHR5cGUgPSBERUZBVUxUX1BBUkFNX1RZUEU7XG4gICAgfVxuXG4gICAgaWYgKGxjbmFtZSBpbiBkZXNpZ25TZXQucGFyYW0pIHtcbiAgICAgIG11bHRpVmFsdWUgPSBkZXNpZ25TZXQucGFyYW1bbGNuYW1lXS5tdWx0aVZhbHVlO1xuICAgICAgaWYgKGRlc2lnblNldC5wYXJhbVtsY25hbWVdLm11bHRpVmFsdWVTZXBhcmF0ZURRdW90ZSkge1xuICAgICAgICBtdmRlbGltID0gcGFyc2UuX3JmYzY4NjhFc2NhcGUoJ1wiJyArIG11bHRpVmFsdWUgKyAnXCInKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgbmV4dENoYXIgPSBsaW5lW3BvcyArIDFdO1xuICAgIGlmIChuZXh0Q2hhciA9PT0gJ1wiJykge1xuICAgICAgdmFsdWVQb3MgPSBwb3MgKyAyO1xuICAgICAgcG9zID0gbGluZS5pbmRleE9mKCdcIicsIHZhbHVlUG9zKTtcbiAgICAgIGlmIChtdWx0aVZhbHVlICYmIHBvcyAhPSAtMSkge1xuICAgICAgICAgIGxldCBleHRlbmRlZFZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICB3aGlsZSAoZXh0ZW5kZWRWYWx1ZSkge1xuICAgICAgICAgICAgaWYgKGxpbmVbcG9zICsgMV0gPT0gbXVsdGlWYWx1ZSAmJiBsaW5lW3BvcyArIDJdID09ICdcIicpIHtcbiAgICAgICAgICAgICAgcG9zID0gbGluZS5pbmRleE9mKCdcIicsIHBvcyArIDMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZXh0ZW5kZWRWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgaWYgKHBvcyA9PT0gLTEpIHtcbiAgICAgICAgdGhyb3cgbmV3IFBhcnNlckVycm9yKFxuICAgICAgICAgICdpbnZhbGlkIGxpbmUgKG5vIG1hdGNoaW5nIGRvdWJsZSBxdW90ZSkgXCInICsgbGluZSArICdcIidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gbGluZS5zbGljZSh2YWx1ZVBvcywgcG9zKTtcbiAgICAgIGxhc3RQYXJhbSA9IGxpbmUuaW5kZXhPZihQQVJBTV9ERUxJTUlURVIsIHBvcyk7XG4gICAgICBsZXQgcHJvcFZhbHVlUG9zID0gbGluZS5pbmRleE9mKFZBTFVFX0RFTElNSVRFUiwgcG9zKTtcbiAgICAgIC8vIGlmIGVpdGhlciBubyBuZXh0IHBhcmFtZXRlciBvciBkZWxpbWV0ZXIgaW4gcHJvcGVydHkgdmFsdWUsIGxldCdzIHN0b3AgaGVyZVxuICAgICAgaWYgKGxhc3RQYXJhbSA9PT0gLTEgfHwgKHByb3BWYWx1ZVBvcyAhPT0gLTEgJiYgbGFzdFBhcmFtID4gcHJvcFZhbHVlUG9zKSkge1xuICAgICAgICBwb3MgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWVQb3MgPSBwb3MgKyAxO1xuXG4gICAgICAvLyBtb3ZlIHRvIG5leHQgXCI7XCJcbiAgICAgIGxldCBuZXh0UG9zID0gbGluZS5pbmRleE9mKFBBUkFNX0RFTElNSVRFUiwgdmFsdWVQb3MpO1xuICAgICAgbGV0IHByb3BWYWx1ZVBvcyA9IGxpbmUuaW5kZXhPZihWQUxVRV9ERUxJTUlURVIsIHZhbHVlUG9zKTtcbiAgICAgIGlmIChwcm9wVmFsdWVQb3MgIT09IC0xICYmIG5leHRQb3MgPiBwcm9wVmFsdWVQb3MpIHtcbiAgICAgICAgLy8gdGhpcyBpcyBhIGRlbGltaXRlciBpbiB0aGUgcHJvcGVydHkgdmFsdWUsIGxldCdzIHN0b3AgaGVyZVxuICAgICAgICBuZXh0UG9zID0gcHJvcFZhbHVlUG9zO1xuICAgICAgICBwb3MgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAobmV4dFBvcyA9PT0gLTEpIHtcbiAgICAgICAgLy8gbm8gXCI7XCJcbiAgICAgICAgaWYgKHByb3BWYWx1ZVBvcyA9PT0gLTEpIHtcbiAgICAgICAgICBuZXh0UG9zID0gbGluZS5sZW5ndGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV4dFBvcyA9IHByb3BWYWx1ZVBvcztcbiAgICAgICAgfVxuICAgICAgICBwb3MgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxhc3RQYXJhbSA9IG5leHRQb3M7XG4gICAgICAgIHBvcyA9IG5leHRQb3M7XG4gICAgICB9XG5cbiAgICAgIHZhbHVlID0gbGluZS5zbGljZSh2YWx1ZVBvcywgbmV4dFBvcyk7XG4gICAgfVxuXG4gICAgY29uc3QgbGVuZ3RoX2JlZm9yZSA9IHZhbHVlLmxlbmd0aDtcbiAgICB2YWx1ZSA9IHBhcnNlLl9yZmM2ODY4RXNjYXBlKHZhbHVlKTtcbiAgICB2YWx1ZVBvcyArPSBsZW5ndGhfYmVmb3JlIC0gdmFsdWUubGVuZ3RoO1xuICAgIGlmIChtdWx0aVZhbHVlKSB7XG4gICAgICBsZXQgZGVsaW1pdGVyID0gbXZkZWxpbSB8fCBtdWx0aVZhbHVlO1xuICAgICAgdmFsdWUgPSBwYXJzZS5fcGFyc2VNdWx0aVZhbHVlKHZhbHVlLCBkZWxpbWl0ZXIsIHR5cGUsIFtdLCBudWxsLCBkZXNpZ25TZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSA9IHBhcnNlLl9wYXJzZVZhbHVlKHZhbHVlLCB0eXBlLCBkZXNpZ25TZXQpO1xuICAgIH1cblxuICAgIGlmIChtdWx0aVZhbHVlICYmIChsY25hbWUgaW4gcmVzdWx0KSkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzdWx0W2xjbmFtZV0pKSB7XG4gICAgICAgIHJlc3VsdFtsY25hbWVdLnB1c2godmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0W2xjbmFtZV0gPSBbXG4gICAgICAgICAgcmVzdWx0W2xjbmFtZV0sXG4gICAgICAgICAgdmFsdWVcbiAgICAgICAgXTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0W2xjbmFtZV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFtyZXN1bHQsIHZhbHVlLCB2YWx1ZVBvc107XG59O1xuXG4vKipcbiAqIEludGVybmFsIGhlbHBlciBmb3IgcmZjNjg2OC4gRXhwb3NpbmcgdGhpcyBvbiBJQ0FMLnBhcnNlIHNvIHRoYXRcbiAqIGhhY2tlcnMgY2FuIGRpc2FibGUgdGhlIHJmYzY4NjggcGFyc2luZyBpZiB0aGUgcmVhbGx5IG5lZWQgdG8uXG4gKlxuICogQGZ1bmN0aW9uIElDQUwucGFyc2UuX3JmYzY4NjhFc2NhcGVcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWwgICAgICAgIFRoZSB2YWx1ZSB0byBlc2NhcGVcbiAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICAgIFRoZSBlc2NhcGVkIHZhbHVlXG4gKi9cbnBhcnNlLl9yZmM2ODY4RXNjYXBlID0gZnVuY3Rpb24odmFsKSB7XG4gIHJldHVybiB2YWwucmVwbGFjZSgvXFxeWyduXl0vZywgZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBSRkM2ODY4X1JFUExBQ0VfTUFQJDFbeF07XG4gIH0pO1xufTtcblxuLyoqXG4gKiBQYXJzZSBhIG11bHRpIHZhbHVlIHN0cmluZy4gVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGVpdGhlciBmb3IgcGFyc2luZ1xuICogYWN0dWFsIG11bHRpLXZhbHVlIHByb3BlcnR5J3MgdmFsdWVzLCBvciBmb3IgaGFuZGxpbmcgcGFyYW1ldGVyIHZhbHVlcy4gSXRcbiAqIGNhbiBiZSB1c2VkIGZvciBib3RoIG11bHRpLXZhbHVlIHByb3BlcnRpZXMgYW5kIHN0cnVjdHVyZWQgdmFsdWUgcHJvcGVydGllcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGZ1bmN0aW9uIElDQUwucGFyc2UuX3BhcnNlTXVsdGlWYWx1ZVxuICogQHBhcmFtIHtTdHJpbmd9IGJ1ZmZlciAgICAgICAgICAgVGhlIGJ1ZmZlciBjb250YWluaW5nIHRoZSBmdWxsIHZhbHVlXG4gKiBAcGFyYW0ge1N0cmluZ30gZGVsaW0gICAgICAgICAgICBUaGUgbXVsdGktdmFsdWUgZGVsaW1pdGVyXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAgICAgICAgICAgICBUaGUgdmFsdWUgdHlwZSB0byBiZSBwYXJzZWRcbiAqIEBwYXJhbSB7QXJyYXkuPD8+fSByZXN1bHQgICAgICAgIFRoZSBhcnJheSB0byBhcHBlbmQgcmVzdWx0cyB0bywgdmFyaWVzIG9uIHZhbHVlIHR5cGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBpbm5lck11bHRpICAgICAgIFRoZSBpbm5lciBkZWxpbWl0ZXIgdG8gc3BsaXQgZWFjaCB2YWx1ZSB3aXRoXG4gKiBAcGFyYW0ge2Rlc2lnblNldH0gZGVzaWduU2V0ICAgICBUaGUgZGVzaWduIGRhdGEgZm9yIHRoaXMgdmFsdWVcbiAqIEByZXR1cm4gez98QXJyYXkuPD8+fSAgICAgICAgICAgIEVpdGhlciBhbiBhcnJheSBvZiByZXN1bHRzLCBvciB0aGUgZmlyc3QgcmVzdWx0XG4gKi9cbnBhcnNlLl9wYXJzZU11bHRpVmFsdWUgPSBmdW5jdGlvbihidWZmZXIsIGRlbGltLCB0eXBlLCByZXN1bHQsIGlubmVyTXVsdGksIGRlc2lnblNldCwgc3RydWN0dXJlZFZhbHVlKSB7XG4gIGxldCBwb3MgPSAwO1xuICBsZXQgbGFzdFBvcyA9IDA7XG4gIGxldCB2YWx1ZTtcbiAgaWYgKGRlbGltLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBidWZmZXI7XG4gIH1cblxuICAvLyBzcGxpdCBlYWNoIHBpZWNlXG4gIHdoaWxlICgocG9zID0gdW5lc2NhcGVkSW5kZXhPZihidWZmZXIsIGRlbGltLCBsYXN0UG9zKSkgIT09IC0xKSB7XG4gICAgdmFsdWUgPSBidWZmZXIuc2xpY2UobGFzdFBvcywgcG9zKTtcbiAgICBpZiAoaW5uZXJNdWx0aSkge1xuICAgICAgdmFsdWUgPSBwYXJzZS5fcGFyc2VNdWx0aVZhbHVlKHZhbHVlLCBpbm5lck11bHRpLCB0eXBlLCBbXSwgbnVsbCwgZGVzaWduU2V0LCBzdHJ1Y3R1cmVkVmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSA9IHBhcnNlLl9wYXJzZVZhbHVlKHZhbHVlLCB0eXBlLCBkZXNpZ25TZXQsIHN0cnVjdHVyZWRWYWx1ZSk7XG4gICAgfVxuICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICBsYXN0UG9zID0gcG9zICsgZGVsaW0ubGVuZ3RoO1xuICB9XG5cbiAgLy8gb24gdGhlIGxhc3QgcGllY2UgdGFrZSB0aGUgcmVzdCBvZiBzdHJpbmdcbiAgdmFsdWUgPSBidWZmZXIuc2xpY2UobGFzdFBvcyk7XG4gIGlmIChpbm5lck11bHRpKSB7XG4gICAgdmFsdWUgPSBwYXJzZS5fcGFyc2VNdWx0aVZhbHVlKHZhbHVlLCBpbm5lck11bHRpLCB0eXBlLCBbXSwgbnVsbCwgZGVzaWduU2V0LCBzdHJ1Y3R1cmVkVmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHZhbHVlID0gcGFyc2UuX3BhcnNlVmFsdWUodmFsdWUsIHR5cGUsIGRlc2lnblNldCwgc3RydWN0dXJlZFZhbHVlKTtcbiAgfVxuICByZXN1bHQucHVzaCh2YWx1ZSk7XG5cbiAgcmV0dXJuIHJlc3VsdC5sZW5ndGggPT0gMSA/IHJlc3VsdFswXSA6IHJlc3VsdDtcbn07XG5cbi8qKlxuICogUHJvY2VzcyBhIGNvbXBsZXRlIGJ1ZmZlciBvZiBpQ2FsZW5kYXIvdkNhcmQgZGF0YSBsaW5lIGJ5IGxpbmUsIGNvcnJlY3RseVxuICogdW5mb2xkaW5nIGNvbnRlbnQuIEVhY2ggbGluZSB3aWxsIGJlIHByb2Nlc3NlZCB3aXRoIHRoZSBnaXZlbiBjYWxsYmFja1xuICpcbiAqIEBwcml2YXRlXG4gKiBAZnVuY3Rpb24gSUNBTC5wYXJzZS5fZWFjaExpbmVcbiAqIEBwYXJhbSB7U3RyaW5nfSBidWZmZXIgICAgICAgICAgICAgICAgICAgICAgICAgVGhlIGJ1ZmZlciB0byBwcm9jZXNzXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKD9TdHJpbmcsIFN0cmluZyl9IGNhbGxiYWNrICAgIFRoZSBjYWxsYmFjayBmb3IgZWFjaCBsaW5lXG4gKi9cbnBhcnNlLl9lYWNoTGluZSA9IGZ1bmN0aW9uKGJ1ZmZlciwgY2FsbGJhY2spIHtcbiAgbGV0IGxlbiA9IGJ1ZmZlci5sZW5ndGg7XG4gIGxldCBsYXN0UG9zID0gYnVmZmVyLnNlYXJjaChDSEFSKTtcbiAgbGV0IHBvcyA9IGxhc3RQb3M7XG4gIGxldCBsaW5lO1xuICBsZXQgZmlyc3RDaGFyO1xuXG4gIGxldCBuZXdsaW5lT2Zmc2V0O1xuXG4gIGRvIHtcbiAgICBwb3MgPSBidWZmZXIuaW5kZXhPZignXFxuJywgbGFzdFBvcykgKyAxO1xuXG4gICAgaWYgKHBvcyA+IDEgJiYgYnVmZmVyW3BvcyAtIDJdID09PSAnXFxyJykge1xuICAgICAgbmV3bGluZU9mZnNldCA9IDI7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld2xpbmVPZmZzZXQgPSAxO1xuICAgIH1cblxuICAgIGlmIChwb3MgPT09IDApIHtcbiAgICAgIHBvcyA9IGxlbjtcbiAgICAgIG5ld2xpbmVPZmZzZXQgPSAwO1xuICAgIH1cblxuICAgIGZpcnN0Q2hhciA9IGJ1ZmZlcltsYXN0UG9zXTtcblxuICAgIGlmIChmaXJzdENoYXIgPT09ICcgJyB8fCBmaXJzdENoYXIgPT09ICdcXHQnKSB7XG4gICAgICAvLyBhZGQgdG8gbGluZVxuICAgICAgbGluZSArPSBidWZmZXIuc2xpY2UobGFzdFBvcyArIDEsIHBvcyAtIG5ld2xpbmVPZmZzZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAobGluZSlcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgbGluZSk7XG4gICAgICAvLyBwdXNoIGxpbmVcbiAgICAgIGxpbmUgPSBidWZmZXIuc2xpY2UobGFzdFBvcywgcG9zIC0gbmV3bGluZU9mZnNldCk7XG4gICAgfVxuXG4gICAgbGFzdFBvcyA9IHBvcztcbiAgfSB3aGlsZSAocG9zICE9PSBsZW4pO1xuXG4gIC8vIGV4dHJhIGVuZGluZyBsaW5lXG4gIGxpbmUgPSBsaW5lLnRyaW0oKTtcblxuICBpZiAobGluZS5sZW5ndGgpXG4gICAgY2FsbGJhY2sobnVsbCwgbGluZSk7XG59O1xuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG5jb25zdCBPUFRJT05TID0gW1widHppZFwiLCBcImxvY2F0aW9uXCIsIFwidHpuYW1lc1wiLCBcImxhdGl0dWRlXCIsIFwibG9uZ2l0dWRlXCJdO1xuXG4vKipcbiAqIFRpbWV6b25lIHJlcHJlc2VudGF0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgdmNhbGVuZGFyO1xuICogdmFyIHRpbWV6b25lQ29tcCA9IHZjYWxlbmRhci5nZXRGaXJzdFN1YmNvbXBvbmVudCgndnRpbWV6b25lJyk7XG4gKiB2YXIgdHppZCA9IHRpbWV6b25lQ29tcC5nZXRGaXJzdFByb3BlcnR5VmFsdWUoJ3R6aWQnKTtcbiAqXG4gKiB2YXIgdGltZXpvbmUgPSBuZXcgSUNBTC5UaW1lem9uZSh7XG4gKiAgIGNvbXBvbmVudDogdGltZXpvbmVDb21wLFxuICogICB0emlkXG4gKiB9KTtcbiAqXG4gKiBAbWVtYmVyb2YgSUNBTFxuICovXG5jbGFzcyBUaW1lem9uZSB7XG4gIHN0YXRpYyBfY29tcGFyZV9jaGFuZ2VfZm4oYSwgYikge1xuICAgIGlmIChhLnllYXIgPCBiLnllYXIpIHJldHVybiAtMTtcbiAgICBlbHNlIGlmIChhLnllYXIgPiBiLnllYXIpIHJldHVybiAxO1xuXG4gICAgaWYgKGEubW9udGggPCBiLm1vbnRoKSByZXR1cm4gLTE7XG4gICAgZWxzZSBpZiAoYS5tb250aCA+IGIubW9udGgpIHJldHVybiAxO1xuXG4gICAgaWYgKGEuZGF5IDwgYi5kYXkpIHJldHVybiAtMTtcbiAgICBlbHNlIGlmIChhLmRheSA+IGIuZGF5KSByZXR1cm4gMTtcblxuICAgIGlmIChhLmhvdXIgPCBiLmhvdXIpIHJldHVybiAtMTtcbiAgICBlbHNlIGlmIChhLmhvdXIgPiBiLmhvdXIpIHJldHVybiAxO1xuXG4gICAgaWYgKGEubWludXRlIDwgYi5taW51dGUpIHJldHVybiAtMTtcbiAgICBlbHNlIGlmIChhLm1pbnV0ZSA+IGIubWludXRlKSByZXR1cm4gMTtcblxuICAgIGlmIChhLnNlY29uZCA8IGIuc2Vjb25kKSByZXR1cm4gLTE7XG4gICAgZWxzZSBpZiAoYS5zZWNvbmQgPiBiLnNlY29uZCkgcmV0dXJuIDE7XG5cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IHRoZSBkYXRlL3RpbWUgZnJvbSBvbmUgem9uZSB0byB0aGUgbmV4dC5cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lfSB0dCAgICAgICAgICAgICAgICAgIFRoZSB0aW1lIHRvIGNvbnZlcnRcbiAgICogQHBhcmFtIHtUaW1lem9uZX0gZnJvbV96b25lICAgICAgIFRoZSBzb3VyY2Ugem9uZSB0byBjb252ZXJ0IGZyb21cbiAgICogQHBhcmFtIHtUaW1lem9uZX0gdG9fem9uZSAgICAgICAgIFRoZSB0YXJnZXQgem9uZSB0byBjb252ZXJ0IHRvXG4gICAqIEByZXR1cm4ge1RpbWV9ICAgICAgICAgICAgICAgICAgICBUaGUgY29udmVydGVkIGRhdGUvdGltZSBvYmplY3RcbiAgICovXG4gIHN0YXRpYyBjb252ZXJ0X3RpbWUodHQsIGZyb21fem9uZSwgdG9fem9uZSkge1xuICAgIGlmICh0dC5pc0RhdGUgfHxcbiAgICAgICAgZnJvbV96b25lLnR6aWQgPT0gdG9fem9uZS50emlkIHx8XG4gICAgICAgIGZyb21fem9uZSA9PSBUaW1lem9uZS5sb2NhbFRpbWV6b25lIHx8XG4gICAgICAgIHRvX3pvbmUgPT0gVGltZXpvbmUubG9jYWxUaW1lem9uZSkge1xuICAgICAgdHQuem9uZSA9IHRvX3pvbmU7XG4gICAgICByZXR1cm4gdHQ7XG4gICAgfVxuXG4gICAgbGV0IHV0Y09mZnNldCA9IGZyb21fem9uZS51dGNPZmZzZXQodHQpO1xuICAgIHR0LmFkanVzdCgwLCAwLCAwLCAtIHV0Y09mZnNldCk7XG5cbiAgICB1dGNPZmZzZXQgPSB0b196b25lLnV0Y09mZnNldCh0dCk7XG4gICAgdHQuYWRqdXN0KDAsIDAsIDAsIHV0Y09mZnNldCk7XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuVGltZXpvbmUgaW5zdGFuY2UgZnJvbSB0aGUgcGFzc2VkIGRhdGEgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBvbmVudHxPYmplY3R9IGFEYXRhIG9wdGlvbnMgZm9yIGNsYXNzXG4gICAqIEBwYXJhbSB7U3RyaW5nfENvbXBvbmVudH0gYURhdGEuY29tcG9uZW50XG4gICAqICAgICAgICBJZiBhRGF0YSBpcyBhIHNpbXBsZSBvYmplY3QsIHRoZW4gdGhpcyBtZW1iZXIgY2FuIGJlIHNldCB0byBlaXRoZXIgYVxuICAgKiAgICAgICAgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIGNvbXBvbmVudCBkYXRhLCBvciBhbiBhbHJlYWR5IHBhcnNlZFxuICAgKiAgICAgICAgSUNBTC5Db21wb25lbnRcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFEYXRhLnR6aWQgICAgICBUaGUgdGltZXpvbmUgaWRlbnRpZmllclxuICAgKiBAcGFyYW0ge1N0cmluZ30gYURhdGEubG9jYXRpb24gIFRoZSB0aW1lem9uZSBsb2NhdGlvbndcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFEYXRhLnR6bmFtZXMgICBBbiBhbHRlcm5hdGl2ZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWV6b25lXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBhRGF0YS5sYXRpdHVkZSAgVGhlIGxhdGl0dWRlIG9mIHRoZSB0aW1lem9uZVxuICAgKiBAcGFyYW0ge051bWJlcn0gYURhdGEubG9uZ2l0dWRlIFRoZSBsb25naXR1ZGUgb2YgdGhlIHRpbWV6b25lXG4gICAqL1xuICBzdGF0aWMgZnJvbURhdGEoYURhdGEpIHtcbiAgICBsZXQgdHQgPSBuZXcgVGltZXpvbmUoKTtcbiAgICByZXR1cm4gdHQuZnJvbURhdGEoYURhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBpbnN0YW5jZSBkZXNjcmliaW5nIHRoZSBVVEMgdGltZXpvbmVcbiAgICogQHR5cGUge1RpbWV6b25lfVxuICAgKiBAY29uc3RhbnRcbiAgICogQGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgI3V0Y1RpbWV6b25lID0gbnVsbDtcbiAgc3RhdGljIGdldCB1dGNUaW1lem9uZSgpIHtcbiAgICBpZiAoIXRoaXMuI3V0Y1RpbWV6b25lKSB7XG4gICAgICB0aGlzLiN1dGNUaW1lem9uZSA9IFRpbWV6b25lLmZyb21EYXRhKHtcbiAgICAgICAgdHppZDogXCJVVENcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLiN1dGNUaW1lem9uZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgaW5zdGFuY2UgZGVzY3JpYmluZyB0aGUgbG9jYWwgdGltZXpvbmVcbiAgICogQHR5cGUge1RpbWV6b25lfVxuICAgKiBAY29uc3RhbnRcbiAgICogQGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgI2xvY2FsVGltZXpvbmUgPSBudWxsO1xuICBzdGF0aWMgZ2V0IGxvY2FsVGltZXpvbmUoKSB7XG4gICAgaWYgKCF0aGlzLiNsb2NhbFRpbWV6b25lKSB7XG4gICAgICB0aGlzLiNsb2NhbFRpbWV6b25lID0gVGltZXpvbmUuZnJvbURhdGEoe1xuICAgICAgICB0emlkOiBcImZsb2F0aW5nXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy4jbG9jYWxUaW1lem9uZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGp1c3QgYSB0aW1lem9uZSBjaGFuZ2Ugb2JqZWN0LlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gY2hhbmdlICAgICBUaGUgdGltZXpvbmUgY2hhbmdlIG9iamVjdFxuICAgKiBAcGFyYW0ge051bWJlcn0gZGF5cyAgICAgICBUaGUgZXh0cmEgYW1vdW50IG9mIGRheXNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGhvdXJzICAgICAgVGhlIGV4dHJhIGFtb3VudCBvZiBob3Vyc1xuICAgKiBAcGFyYW0ge051bWJlcn0gbWludXRlcyAgICBUaGUgZXh0cmEgYW1vdW50IG9mIG1pbnV0ZXNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHNlY29uZHMgICAgVGhlIGV4dHJhIGFtb3VudCBvZiBzZWNvbmRzXG4gICAqL1xuICBzdGF0aWMgYWRqdXN0X2NoYW5nZShjaGFuZ2UsIGRheXMsIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSB7XG4gICAgcmV0dXJuIFRpbWUucHJvdG90eXBlLmFkanVzdC5jYWxsKFxuICAgICAgY2hhbmdlLFxuICAgICAgZGF5cyxcbiAgICAgIGhvdXJzLFxuICAgICAgbWludXRlcyxcbiAgICAgIHNlY29uZHMsXG4gICAgICBjaGFuZ2VcbiAgICApO1xuICB9XG5cbiAgc3RhdGljIF9taW5pbXVtRXhwYW5zaW9uWWVhciA9IC0xO1xuICBzdGF0aWMgRVhUUkFfQ09WRVJBR0UgPSA1O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuVGltZXpvbmUgaW5zdGFuY2UsIGJ5IHBhc3NpbmcgaW4gYSB0emlkIGFuZCBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fE9iamVjdH0gZGF0YSBvcHRpb25zIGZvciBjbGFzc1xuICAgKiBAcGFyYW0ge1N0cmluZ3xDb21wb25lbnR9IGRhdGEuY29tcG9uZW50XG4gICAqICAgICAgICBJZiBkYXRhIGlzIGEgc2ltcGxlIG9iamVjdCwgdGhlbiB0aGlzIG1lbWJlciBjYW4gYmUgc2V0IHRvIGVpdGhlciBhXG4gICAqICAgICAgICBzdHJpbmcgY29udGFpbmluZyB0aGUgY29tcG9uZW50IGRhdGEsIG9yIGFuIGFscmVhZHkgcGFyc2VkXG4gICAqICAgICAgICBJQ0FMLkNvbXBvbmVudFxuICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0YS50emlkICAgICAgVGhlIHRpbWV6b25lIGlkZW50aWZpZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGEubG9jYXRpb24gIFRoZSB0aW1lem9uZSBsb2NhdGlvbndcbiAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGEudHpuYW1lcyAgIEFuIGFsdGVybmF0aXZlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXpvbmVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRhdGEubGF0aXR1ZGUgIFRoZSBsYXRpdHVkZSBvZiB0aGUgdGltZXpvbmVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRhdGEubG9uZ2l0dWRlIFRoZSBsb25naXR1ZGUgb2YgdGhlIHRpbWV6b25lXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgdGhpcy53cmFwcGVkSlNPYmplY3QgPSB0aGlzO1xuICAgIHRoaXMuZnJvbURhdGEoZGF0YSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBUaW1lem9uZSBpZGVudGlmaWVyXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICB0emlkID0gXCJcIjtcblxuICAvKipcbiAgICogVGltZXpvbmUgbG9jYXRpb25cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGxvY2F0aW9uID0gXCJcIjtcblxuICAvKipcbiAgICogQWx0ZXJuYXRpdmUgdGltZXpvbmUgbmFtZSwgZm9yIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb25cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIHR6bmFtZXMgPSBcIlwiO1xuXG4gIC8qKlxuICAgKiBUaGUgcHJpbWFyeSBsYXRpdHVkZSBmb3IgdGhlIHRpbWV6b25lLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgbGF0aXR1ZGUgPSAwLjA7XG5cbiAgLyoqXG4gICAqIFRoZSBwcmltYXJ5IGxvbmdpdHVkZSBmb3IgdGhlIHRpbWV6b25lLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgbG9uZ2l0dWRlID0gMC4wO1xuXG4gIC8qKlxuICAgKiBUaGUgdnRpbWV6b25lIGNvbXBvbmVudCBmb3IgdGhpcyB0aW1lem9uZS5cbiAgICogQHR5cGUge0NvbXBvbmVudH1cbiAgICovXG4gIGNvbXBvbmVudCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSB5ZWFyIHRoaXMgdGltZXpvbmUgaGFzIGJlZW4gZXhwYW5kZWQgdG8uIEFsbCB0aW1lem9uZSB0cmFuc2l0aW9uXG4gICAqIGRhdGVzIHVudGlsIHRoaXMgeWVhciBhcmUga25vd24gYW5kIGNhbiBiZSB1c2VkIGZvciBjYWxjdWxhdGlvblxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgZXhwYW5kZWRVbnRpbFllYXIgPSAwO1xuXG4gIC8qKlxuICAgKiBUaGUgY2xhc3MgaWRlbnRpZmllci5cbiAgICogQGNvbnN0YW50XG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEBkZWZhdWx0IFwiaWNhbHRpbWV6b25lXCJcbiAgICovXG4gIGljYWxjbGFzcyA9IFwiaWNhbHRpbWV6b25lXCI7XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgdGhlIGN1cnJlbnQgaW5zdGFuY2UgdXNpbmcgbWVtYmVycyBmcm9tIHRoZSBwYXNzZWQgZGF0YSBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fE9iamVjdH0gYURhdGEgb3B0aW9ucyBmb3IgY2xhc3NcbiAgICogQHBhcmFtIHtTdHJpbmd8Q29tcG9uZW50fSBhRGF0YS5jb21wb25lbnRcbiAgICogICAgICAgIElmIGFEYXRhIGlzIGEgc2ltcGxlIG9iamVjdCwgdGhlbiB0aGlzIG1lbWJlciBjYW4gYmUgc2V0IHRvIGVpdGhlciBhXG4gICAqICAgICAgICBzdHJpbmcgY29udGFpbmluZyB0aGUgY29tcG9uZW50IGRhdGEsIG9yIGFuIGFscmVhZHkgcGFyc2VkXG4gICAqICAgICAgICBJQ0FMLkNvbXBvbmVudFxuICAgKiBAcGFyYW0ge1N0cmluZ30gYURhdGEudHppZCAgICAgIFRoZSB0aW1lem9uZSBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhRGF0YS5sb2NhdGlvbiAgVGhlIHRpbWV6b25lIGxvY2F0aW9ud1xuICAgKiBAcGFyYW0ge1N0cmluZ30gYURhdGEudHpuYW1lcyAgIEFuIGFsdGVybmF0aXZlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXpvbmVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFEYXRhLmxhdGl0dWRlICBUaGUgbGF0aXR1ZGUgb2YgdGhlIHRpbWV6b25lXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBhRGF0YS5sb25naXR1ZGUgVGhlIGxvbmdpdHVkZSBvZiB0aGUgdGltZXpvbmVcbiAgICovXG4gIGZyb21EYXRhKGFEYXRhKSB7XG4gICAgdGhpcy5leHBhbmRlZFVudGlsWWVhciA9IDA7XG4gICAgdGhpcy5jaGFuZ2VzID0gW107XG5cbiAgICBpZiAoYURhdGEgaW5zdGFuY2VvZiBDb21wb25lbnQpIHtcbiAgICAgIC8vIEVpdGhlciBhIGNvbXBvbmVudCBpcyBwYXNzZWQgZGlyZWN0bHlcbiAgICAgIHRoaXMuY29tcG9uZW50ID0gYURhdGE7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE90aGVyd2lzZSB0aGUgY29tcG9uZW50IG1heSBiZSBpbiB0aGUgZGF0YSBvYmplY3RcbiAgICAgIGlmIChhRGF0YSAmJiBcImNvbXBvbmVudFwiIGluIGFEYXRhKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYURhdGEuY29tcG9uZW50ID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAvLyBJZiBhIHN0cmluZyB3YXMgcGFzc2VkLCBwYXJzZSBpdCBhcyBhIGNvbXBvbmVudFxuICAgICAgICAgIGxldCBqQ2FsID0gcGFyc2UoYURhdGEuY29tcG9uZW50KTtcbiAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IG5ldyBDb21wb25lbnQoakNhbCk7XG4gICAgICAgIH0gZWxzZSBpZiAoYURhdGEuY29tcG9uZW50IGluc3RhbmNlb2YgQ29tcG9uZW50KSB7XG4gICAgICAgICAgLy8gSWYgaXQgd2FzIGEgY29tcG9uZW50IGFscmVhZHksIHRoZW4ganVzdCBzZXQgaXRcbiAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGFEYXRhLmNvbXBvbmVudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBPdGhlcndpc2UganVzdCBudWxsIG91dCB0aGUgY29tcG9uZW50XG4gICAgICAgICAgdGhpcy5jb21wb25lbnQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENvcHkgcmVtYWluaW5nIHBhc3NlZCBwcm9wZXJ0aWVzXG4gICAgICBmb3IgKGxldCBwcm9wIG9mIE9QVElPTlMpIHtcbiAgICAgICAgaWYgKGFEYXRhICYmIHByb3AgaW4gYURhdGEpIHtcbiAgICAgICAgICB0aGlzW3Byb3BdID0gYURhdGFbcHJvcF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiB3ZSBoYXZlIGEgY29tcG9uZW50IGJ1dCBubyBUWklELCBhdHRlbXB0IHRvIGdldCBpdCBmcm9tIHRoZVxuICAgIC8vIGNvbXBvbmVudCdzIHByb3BlcnRpZXMuXG4gICAgaWYgKHRoaXMuY29tcG9uZW50IGluc3RhbmNlb2YgQ29tcG9uZW50ICYmICF0aGlzLnR6aWQpIHtcbiAgICAgIHRoaXMudHppZCA9IHRoaXMuY29tcG9uZW50LmdldEZpcnN0UHJvcGVydHlWYWx1ZSgndHppZCcpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmRzIHRoZSB1dGNPZmZzZXQgdGhlIGdpdmVuIHRpbWUgd291bGQgb2NjdXIgaW4gdGhpcyB0aW1lem9uZS5cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lfSB0dCAgICAgICAgIFRoZSB0aW1lIHRvIGNoZWNrIGZvclxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgdXRjIG9mZnNldCBpbiBzZWNvbmRzXG4gICAqL1xuICB1dGNPZmZzZXQodHQpIHtcbiAgICBpZiAodGhpcyA9PSBUaW1lem9uZS51dGNUaW1lem9uZSB8fCB0aGlzID09IFRpbWV6b25lLmxvY2FsVGltZXpvbmUpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHRoaXMuX2Vuc3VyZUNvdmVyYWdlKHR0LnllYXIpO1xuXG4gICAgaWYgKCF0aGlzLmNoYW5nZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBsZXQgdHRfY2hhbmdlID0ge1xuICAgICAgeWVhcjogdHQueWVhcixcbiAgICAgIG1vbnRoOiB0dC5tb250aCxcbiAgICAgIGRheTogdHQuZGF5LFxuICAgICAgaG91cjogdHQuaG91cixcbiAgICAgIG1pbnV0ZTogdHQubWludXRlLFxuICAgICAgc2Vjb25kOiB0dC5zZWNvbmRcbiAgICB9O1xuXG4gICAgbGV0IGNoYW5nZV9udW0gPSB0aGlzLl9maW5kTmVhcmJ5Q2hhbmdlKHR0X2NoYW5nZSk7XG4gICAgbGV0IGNoYW5nZV9udW1fdG9fdXNlID0gLTE7XG4gICAgbGV0IHN0ZXAgPSAxO1xuXG4gICAgLy8gVE9ETzogcmVwbGFjZSB3aXRoIGJpbiBzZWFyY2g/XG4gICAgZm9yICg7Oykge1xuICAgICAgbGV0IGNoYW5nZSA9IGNsb25lKHRoaXMuY2hhbmdlc1tjaGFuZ2VfbnVtXSwgdHJ1ZSk7XG4gICAgICBpZiAoY2hhbmdlLnV0Y09mZnNldCA8IGNoYW5nZS5wcmV2VXRjT2Zmc2V0KSB7XG4gICAgICAgIFRpbWV6b25lLmFkanVzdF9jaGFuZ2UoY2hhbmdlLCAwLCAwLCAwLCBjaGFuZ2UudXRjT2Zmc2V0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFRpbWV6b25lLmFkanVzdF9jaGFuZ2UoY2hhbmdlLCAwLCAwLCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZS5wcmV2VXRjT2Zmc2V0KTtcbiAgICAgIH1cblxuICAgICAgbGV0IGNtcCA9IFRpbWV6b25lLl9jb21wYXJlX2NoYW5nZV9mbih0dF9jaGFuZ2UsIGNoYW5nZSk7XG5cbiAgICAgIGlmIChjbXAgPj0gMCkge1xuICAgICAgICBjaGFuZ2VfbnVtX3RvX3VzZSA9IGNoYW5nZV9udW07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGVwID0gLTE7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGVwID09IC0xICYmIGNoYW5nZV9udW1fdG9fdXNlICE9IC0xKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjaGFuZ2VfbnVtICs9IHN0ZXA7XG5cbiAgICAgIGlmIChjaGFuZ2VfbnVtIDwgMCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYW5nZV9udW0gPj0gdGhpcy5jaGFuZ2VzLmxlbmd0aCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgem9uZV9jaGFuZ2UgPSB0aGlzLmNoYW5nZXNbY2hhbmdlX251bV90b191c2VdO1xuICAgIGxldCB1dGNPZmZzZXRfY2hhbmdlID0gem9uZV9jaGFuZ2UudXRjT2Zmc2V0IC0gem9uZV9jaGFuZ2UucHJldlV0Y09mZnNldDtcblxuICAgIGlmICh1dGNPZmZzZXRfY2hhbmdlIDwgMCAmJiBjaGFuZ2VfbnVtX3RvX3VzZSA+IDApIHtcbiAgICAgIGxldCB0bXBfY2hhbmdlID0gY2xvbmUoem9uZV9jaGFuZ2UsIHRydWUpO1xuICAgICAgVGltZXpvbmUuYWRqdXN0X2NoYW5nZSh0bXBfY2hhbmdlLCAwLCAwLCAwLCB0bXBfY2hhbmdlLnByZXZVdGNPZmZzZXQpO1xuXG4gICAgICBpZiAoVGltZXpvbmUuX2NvbXBhcmVfY2hhbmdlX2ZuKHR0X2NoYW5nZSwgdG1wX2NoYW5nZSkgPCAwKSB7XG4gICAgICAgIGxldCBwcmV2X3pvbmVfY2hhbmdlID0gdGhpcy5jaGFuZ2VzW2NoYW5nZV9udW1fdG9fdXNlIC0gMV07XG5cbiAgICAgICAgbGV0IHdhbnRfZGF5bGlnaHQgPSBmYWxzZTsgLy8gVE9ET1xuXG4gICAgICAgIGlmICh6b25lX2NoYW5nZS5pc19kYXlsaWdodCAhPSB3YW50X2RheWxpZ2h0ICYmXG4gICAgICAgICAgICBwcmV2X3pvbmVfY2hhbmdlLmlzX2RheWxpZ2h0ID09IHdhbnRfZGF5bGlnaHQpIHtcbiAgICAgICAgICB6b25lX2NoYW5nZSA9IHByZXZfem9uZV9jaGFuZ2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUT0RPIHJldHVybiBpc19kYXlsaWdodD9cbiAgICByZXR1cm4gem9uZV9jaGFuZ2UudXRjT2Zmc2V0O1xuICB9XG5cbiAgX2ZpbmROZWFyYnlDaGFuZ2UoY2hhbmdlKSB7XG4gICAgLy8gZmluZCB0aGUgY2xvc2VzdCBtYXRjaFxuICAgIGxldCBpZHggPSBiaW5zZWFyY2hJbnNlcnQoXG4gICAgICB0aGlzLmNoYW5nZXMsXG4gICAgICBjaGFuZ2UsXG4gICAgICBUaW1lem9uZS5fY29tcGFyZV9jaGFuZ2VfZm5cbiAgICApO1xuXG4gICAgaWYgKGlkeCA+PSB0aGlzLmNoYW5nZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmxlbmd0aCAtIDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlkeDtcbiAgfVxuXG4gIF9lbnN1cmVDb3ZlcmFnZShhWWVhcikge1xuICAgIGlmIChUaW1lem9uZS5fbWluaW11bUV4cGFuc2lvblllYXIgPT0gLTEpIHtcbiAgICAgIGxldCB0b2RheSA9IFRpbWUubm93KCk7XG4gICAgICBUaW1lem9uZS5fbWluaW11bUV4cGFuc2lvblllYXIgPSB0b2RheS55ZWFyO1xuICAgIH1cblxuICAgIGxldCBjaGFuZ2VzRW5kWWVhciA9IGFZZWFyO1xuICAgIGlmIChjaGFuZ2VzRW5kWWVhciA8IFRpbWV6b25lLl9taW5pbXVtRXhwYW5zaW9uWWVhcikge1xuICAgICAgY2hhbmdlc0VuZFllYXIgPSBUaW1lem9uZS5fbWluaW11bUV4cGFuc2lvblllYXI7XG4gICAgfVxuXG4gICAgY2hhbmdlc0VuZFllYXIgKz0gVGltZXpvbmUuRVhUUkFfQ09WRVJBR0U7XG5cbiAgICBpZiAoIXRoaXMuY2hhbmdlcy5sZW5ndGggfHwgdGhpcy5leHBhbmRlZFVudGlsWWVhciA8IGFZZWFyKSB7XG4gICAgICBsZXQgc3ViY29tcHMgPSB0aGlzLmNvbXBvbmVudC5nZXRBbGxTdWJjb21wb25lbnRzKCk7XG4gICAgICBsZXQgY29tcExlbiA9IHN1YmNvbXBzLmxlbmd0aDtcbiAgICAgIGxldCBjb21wSWR4ID0gMDtcblxuICAgICAgZm9yICg7IGNvbXBJZHggPCBjb21wTGVuOyBjb21wSWR4KyspIHtcbiAgICAgICAgdGhpcy5fZXhwYW5kQ29tcG9uZW50KFxuICAgICAgICAgIHN1YmNvbXBzW2NvbXBJZHhdLCBjaGFuZ2VzRW5kWWVhciwgdGhpcy5jaGFuZ2VzXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2hhbmdlcy5zb3J0KFRpbWV6b25lLl9jb21wYXJlX2NoYW5nZV9mbik7XG4gICAgICB0aGlzLmV4cGFuZGVkVW50aWxZZWFyID0gY2hhbmdlc0VuZFllYXI7XG4gICAgfVxuICB9XG5cbiAgX2V4cGFuZENvbXBvbmVudChhQ29tcG9uZW50LCBhWWVhciwgY2hhbmdlcykge1xuICAgIGlmICghYUNvbXBvbmVudC5oYXNQcm9wZXJ0eShcImR0c3RhcnRcIikgfHxcbiAgICAgICAgIWFDb21wb25lbnQuaGFzUHJvcGVydHkoXCJ0em9mZnNldHRvXCIpIHx8XG4gICAgICAgICFhQ29tcG9uZW50Lmhhc1Byb3BlcnR5KFwidHpvZmZzZXRmcm9tXCIpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBsZXQgZHRzdGFydCA9IGFDb21wb25lbnQuZ2V0Rmlyc3RQcm9wZXJ0eShcImR0c3RhcnRcIikuZ2V0Rmlyc3RWYWx1ZSgpO1xuICAgIGxldCBjaGFuZ2U7XG5cbiAgICBmdW5jdGlvbiBjb252ZXJ0X3R6b2Zmc2V0KG9mZnNldCkge1xuICAgICAgcmV0dXJuIG9mZnNldC5mYWN0b3IgKiAob2Zmc2V0LmhvdXJzICogMzYwMCArIG9mZnNldC5taW51dGVzICogNjApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXRfY2hhbmdlcygpIHtcbiAgICAgIGxldCBjaGFuZ2ViYXNlID0ge307XG4gICAgICBjaGFuZ2ViYXNlLmlzX2RheWxpZ2h0ID0gKGFDb21wb25lbnQubmFtZSA9PSBcImRheWxpZ2h0XCIpO1xuICAgICAgY2hhbmdlYmFzZS51dGNPZmZzZXQgPSBjb252ZXJ0X3R6b2Zmc2V0KFxuICAgICAgICBhQ29tcG9uZW50LmdldEZpcnN0UHJvcGVydHkoXCJ0em9mZnNldHRvXCIpLmdldEZpcnN0VmFsdWUoKVxuICAgICAgKTtcblxuICAgICAgY2hhbmdlYmFzZS5wcmV2VXRjT2Zmc2V0ID0gY29udmVydF90em9mZnNldChcbiAgICAgICAgYUNvbXBvbmVudC5nZXRGaXJzdFByb3BlcnR5KFwidHpvZmZzZXRmcm9tXCIpLmdldEZpcnN0VmFsdWUoKVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIGNoYW5nZWJhc2U7XG4gICAgfVxuXG4gICAgaWYgKCFhQ29tcG9uZW50Lmhhc1Byb3BlcnR5KFwicnJ1bGVcIikgJiYgIWFDb21wb25lbnQuaGFzUHJvcGVydHkoXCJyZGF0ZVwiKSkge1xuICAgICAgY2hhbmdlID0gaW5pdF9jaGFuZ2VzKCk7XG4gICAgICBjaGFuZ2UueWVhciA9IGR0c3RhcnQueWVhcjtcbiAgICAgIGNoYW5nZS5tb250aCA9IGR0c3RhcnQubW9udGg7XG4gICAgICBjaGFuZ2UuZGF5ID0gZHRzdGFydC5kYXk7XG4gICAgICBjaGFuZ2UuaG91ciA9IGR0c3RhcnQuaG91cjtcbiAgICAgIGNoYW5nZS5taW51dGUgPSBkdHN0YXJ0Lm1pbnV0ZTtcbiAgICAgIGNoYW5nZS5zZWNvbmQgPSBkdHN0YXJ0LnNlY29uZDtcblxuICAgICAgVGltZXpvbmUuYWRqdXN0X2NoYW5nZShjaGFuZ2UsIDAsIDAsIDAsIC1jaGFuZ2UucHJldlV0Y09mZnNldCk7XG4gICAgICBjaGFuZ2VzLnB1c2goY2hhbmdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHByb3BzID0gYUNvbXBvbmVudC5nZXRBbGxQcm9wZXJ0aWVzKFwicmRhdGVcIik7XG4gICAgICBmb3IgKGxldCByZGF0ZSBvZiBwcm9wcykge1xuICAgICAgICBsZXQgdGltZSA9IHJkYXRlLmdldEZpcnN0VmFsdWUoKTtcbiAgICAgICAgY2hhbmdlID0gaW5pdF9jaGFuZ2VzKCk7XG5cbiAgICAgICAgY2hhbmdlLnllYXIgPSB0aW1lLnllYXI7XG4gICAgICAgIGNoYW5nZS5tb250aCA9IHRpbWUubW9udGg7XG4gICAgICAgIGNoYW5nZS5kYXkgPSB0aW1lLmRheTtcblxuICAgICAgICBpZiAodGltZS5pc0RhdGUpIHtcbiAgICAgICAgICBjaGFuZ2UuaG91ciA9IGR0c3RhcnQuaG91cjtcbiAgICAgICAgICBjaGFuZ2UubWludXRlID0gZHRzdGFydC5taW51dGU7XG4gICAgICAgICAgY2hhbmdlLnNlY29uZCA9IGR0c3RhcnQuc2Vjb25kO1xuXG4gICAgICAgICAgaWYgKGR0c3RhcnQuem9uZSAhPSBUaW1lem9uZS51dGNUaW1lem9uZSkge1xuICAgICAgICAgICAgVGltZXpvbmUuYWRqdXN0X2NoYW5nZShjaGFuZ2UsIDAsIDAsIDAsIC1jaGFuZ2UucHJldlV0Y09mZnNldCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoYW5nZS5ob3VyID0gdGltZS5ob3VyO1xuICAgICAgICAgIGNoYW5nZS5taW51dGUgPSB0aW1lLm1pbnV0ZTtcbiAgICAgICAgICBjaGFuZ2Uuc2Vjb25kID0gdGltZS5zZWNvbmQ7XG5cbiAgICAgICAgICBpZiAodGltZS56b25lICE9IFRpbWV6b25lLnV0Y1RpbWV6b25lKSB7XG4gICAgICAgICAgICBUaW1lem9uZS5hZGp1c3RfY2hhbmdlKGNoYW5nZSwgMCwgMCwgMCwgLWNoYW5nZS5wcmV2VXRjT2Zmc2V0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjaGFuZ2VzLnB1c2goY2hhbmdlKTtcbiAgICAgIH1cblxuICAgICAgbGV0IHJydWxlID0gYUNvbXBvbmVudC5nZXRGaXJzdFByb3BlcnR5KFwicnJ1bGVcIik7XG5cbiAgICAgIGlmIChycnVsZSkge1xuICAgICAgICBycnVsZSA9IHJydWxlLmdldEZpcnN0VmFsdWUoKTtcbiAgICAgICAgY2hhbmdlID0gaW5pdF9jaGFuZ2VzKCk7XG5cbiAgICAgICAgaWYgKHJydWxlLnVudGlsICYmIHJydWxlLnVudGlsLnpvbmUgPT0gVGltZXpvbmUudXRjVGltZXpvbmUpIHtcbiAgICAgICAgICBycnVsZS51bnRpbC5hZGp1c3QoMCwgMCwgMCwgY2hhbmdlLnByZXZVdGNPZmZzZXQpO1xuICAgICAgICAgIHJydWxlLnVudGlsLnpvbmUgPSBUaW1lem9uZS5sb2NhbFRpbWV6b25lO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGl0ZXJhdG9yID0gcnJ1bGUuaXRlcmF0b3IoZHRzdGFydCk7XG5cbiAgICAgICAgbGV0IG9jYztcbiAgICAgICAgd2hpbGUgKChvY2MgPSBpdGVyYXRvci5uZXh0KCkpKSB7XG4gICAgICAgICAgY2hhbmdlID0gaW5pdF9jaGFuZ2VzKCk7XG4gICAgICAgICAgaWYgKG9jYy55ZWFyID4gYVllYXIgfHwgIW9jYykge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2hhbmdlLnllYXIgPSBvY2MueWVhcjtcbiAgICAgICAgICBjaGFuZ2UubW9udGggPSBvY2MubW9udGg7XG4gICAgICAgICAgY2hhbmdlLmRheSA9IG9jYy5kYXk7XG4gICAgICAgICAgY2hhbmdlLmhvdXIgPSBvY2MuaG91cjtcbiAgICAgICAgICBjaGFuZ2UubWludXRlID0gb2NjLm1pbnV0ZTtcbiAgICAgICAgICBjaGFuZ2Uuc2Vjb25kID0gb2NjLnNlY29uZDtcbiAgICAgICAgICBjaGFuZ2UuaXNEYXRlID0gb2NjLmlzRGF0ZTtcblxuICAgICAgICAgIFRpbWV6b25lLmFkanVzdF9jaGFuZ2UoY2hhbmdlLCAwLCAwLCAwLCAtY2hhbmdlLnByZXZVdGNPZmZzZXQpO1xuICAgICAgICAgIGNoYW5nZXMucHVzaChjaGFuZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYW5nZXM7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHRpbWV6b25lLlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gKHRoaXMudHpuYW1lcyA/IHRoaXMudHpuYW1lcyA6IHRoaXMudHppZCk7XG4gIH1cbn1cblxuLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cblxubGV0IHpvbmVzID0gbnVsbDtcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBTaW5nbGV0b24gY2xhc3MgdG8gY29udGFpbiB0aW1lem9uZXMuICBSaWdodCBub3cgaXQgaXMgYWxsIG1hbnVhbCByZWdpc3RyeSBpblxuICogdGhlIGZ1dHVyZSB3ZSBtYXkgdXNlIHRoaXMgY2xhc3MgdG8gZG93bmxvYWQgdGltZXpvbmUgaW5mb3JtYXRpb24gb3IgaGFuZGxlXG4gKiBsb2FkaW5nIHByZS1leHBhbmRlZCB0aW1lem9uZXMuXG4gKlxuICogQGV4cG9ydHMgbW9kdWxlOklDQUwuVGltZXpvbmVTZXJ2aWNlXG4gKiBAbWVtYmVyb2YgSUNBTFxuICovXG5jb25zdCBUaW1lem9uZVNlcnZpY2UgPSB7XG4gIGdldCBjb3VudCgpIHtcbiAgICBpZiAoem9uZXMgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHJldHVybiBPYmplY3Qua2V5cyh6b25lcykubGVuZ3RoO1xuICB9LFxuXG4gIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICB6b25lcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgbGV0IHV0YyA9IFRpbWV6b25lLnV0Y1RpbWV6b25lO1xuXG4gICAgem9uZXMuWiA9IHV0YztcbiAgICB6b25lcy5VVEMgPSB1dGM7XG4gICAgem9uZXMuR01UID0gdXRjO1xuICB9LFxuICBfaGFyZF9yZXNldDogZnVuY3Rpb24oKSB7XG4gICAgem9uZXMgPSBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGltZXpvbmUgaWQgaGFzIGJlZW4gcmVnaXN0ZXJlZC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR6aWQgICAgIFRpbWV6b25lIGlkZW50aWZpZXIgKGUuZy4gQW1lcmljYS9Mb3NfQW5nZWxlcylcbiAgICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgIEZhbHNlLCB3aGVuIG5vdCBwcmVzZW50XG4gICAqL1xuICBoYXM6IGZ1bmN0aW9uKHR6aWQpIHtcbiAgICBpZiAoem9uZXMgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gISF6b25lc1t0emlkXTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyBhIHRpbWV6b25lIGJ5IGl0cyB0emlkIGlmIHByZXNlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0emlkICAgICAgICAgICAgICAgVGltZXpvbmUgaWRlbnRpZmllciAoZS5nLiBBbWVyaWNhL0xvc19BbmdlbGVzKVxuICAgKiBAcmV0dXJuIHtUaW1lem9uZSB8IHVuZGVmaW5lZH0gICAgIFRoZSB0aW1lem9uZSwgb3IgdW5kZWZpbmVkIGlmIG5vdCBmb3VuZFxuICAgKi9cbiAgZ2V0OiBmdW5jdGlvbih0emlkKSB7XG4gICAgaWYgKHpvbmVzID09PSBudWxsKSB7XG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHpvbmVzW3R6aWRdO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSB0aW1lem9uZSBvYmplY3Qgb3IgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBvbmVudHxUaW1lem9uZX0gdGltZXpvbmVcbiAgICogICAgICAgIFRoZSBpbml0aWFsaXplZCB6b25lIG9yIHZ0aW1lem9uZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmc9fSBuYW1lXG4gICAqICAgICAgICBUaGUgbmFtZSBvZiB0aGUgdGltZXpvbmUuIERlZmF1bHRzIHRvIHRoZSBjb21wb25lbnQncyBUWklEIGlmIG5vdFxuICAgKiAgICAgICAgcGFzc2VkLlxuICAgKi9cbiAgcmVnaXN0ZXI6IGZ1bmN0aW9uKHRpbWV6b25lLCBuYW1lKSB7XG4gICAgaWYgKHpvbmVzID09PSBudWxsKSB7XG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgfVxuXG4gICAgLy8gVGhpcyBhdm9pZHMgYSBicmVha2luZyBjaGFuZ2UgYnkgdGhlIGNoYW5nZSBvZiBhcmd1bWVudCBvcmRlclxuICAgIC8vIFRPRE8gcmVtb3ZlIGluIHYzXG4gICAgaWYgKHR5cGVvZiB0aW1lem9uZSA9PT0gXCJzdHJpbmdcIiAmJiBuYW1lIGluc3RhbmNlb2YgVGltZXpvbmUpIHtcbiAgICAgIFt0aW1lem9uZSwgbmFtZV0gPSBbbmFtZSwgdGltZXpvbmVdO1xuICAgIH1cblxuICAgIGlmICghbmFtZSkge1xuICAgICAgaWYgKHRpbWV6b25lIGluc3RhbmNlb2YgVGltZXpvbmUpIHtcbiAgICAgICAgbmFtZSA9IHRpbWV6b25lLnR6aWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGltZXpvbmUubmFtZSA9PT0gJ3Z0aW1lem9uZScpIHtcbiAgICAgICAgICB0aW1lem9uZSA9IG5ldyBUaW1lem9uZSh0aW1lem9uZSk7XG4gICAgICAgICAgbmFtZSA9IHRpbWV6b25lLnR6aWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIW5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJOZWl0aGVyIGEgdGltZXpvbmUgbm9yIGEgbmFtZSB3YXMgcGFzc2VkXCIpO1xuICAgIH1cblxuICAgIGlmICh0aW1lem9uZSBpbnN0YW5jZW9mIFRpbWV6b25lKSB7XG4gICAgICB6b25lc1tuYW1lXSA9IHRpbWV6b25lO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd0aW1lem9uZSBtdXN0IGJlIElDQUwuVGltZXpvbmUgb3IgSUNBTC5Db21wb25lbnQnKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSB0aW1lem9uZSBieSBpdHMgdHppZCBmcm9tIHRoZSBsaXN0LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHppZCAgICAgVGltZXpvbmUgaWRlbnRpZmllciAoZS5nLiBBbWVyaWNhL0xvc19BbmdlbGVzKVxuICAgKiBAcmV0dXJuIHs/VGltZXpvbmV9ICAgICAgVGhlIHJlbW92ZWQgdGltZXpvbmUsIG9yIG51bGwgaWYgbm90IHJlZ2lzdGVyZWRcbiAgICovXG4gIHJlbW92ZTogZnVuY3Rpb24odHppZCkge1xuICAgIGlmICh6b25lcyA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIChkZWxldGUgem9uZXNbdHppZF0pO1xuICB9XG59O1xuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbnMgdXNlZCBpbiB2YXJpb3VzIHBsYWNlcyB3aXRoaW4gaWNhbC5qc1xuICogQG1vZHVsZSBJQ0FMLmhlbHBlcnNcbiAqL1xuXG4vKipcbiAqIENvbXBpbGVzIGEgbGlzdCBvZiBhbGwgcmVmZXJlbmNlZCBUWklEcyBpbiBhbGwgc3ViY29tcG9uZW50cyBhbmRcbiAqIHJlbW92ZXMgYW55IGV4dHJhIFZUSU1FWk9ORSBzdWJjb21wb25lbnRzLiBJbiBhZGRpdGlvbiwgaWYgYW55IFRaSURzXG4gKiBhcmUgcmVmZXJlbmNlZCBieSBhIGNvbXBvbmVudCwgYnV0IGEgVlRJTUVaT05FIGRvZXMgbm90IGV4aXN0LFxuICogYW4gYXR0ZW1wdCB3aWxsIGJlIG1hZGUgdG8gZ2VuZXJhdGUgYSBWVElNRVpPTkUgdXNpbmcgSUNBTC5UaW1lem9uZVNlcnZpY2UuXG4gKlxuICogQHBhcmFtIHtDb21wb25lbnR9IHZjYWwgICAgIFRoZSB0b3AtbGV2ZWwgVkNBTEVOREFSIGNvbXBvbmVudC5cbiAqIEByZXR1cm4ge0NvbXBvbmVudH0gICAgICAgICBUaGUgSUNBTC5Db21wb25lbnQgdGhhdCB3YXMgcGFzc2VkIGluLlxuICovXG5mdW5jdGlvbiB1cGRhdGVUaW1lem9uZXModmNhbCkge1xuICBsZXQgYWxsc3VicywgcHJvcGVydGllcywgdnRpbWV6b25lcywgcmVxVHppZCwgaTtcblxuICBpZiAoIXZjYWwgfHwgdmNhbC5uYW1lICE9PSBcInZjYWxlbmRhclwiKSB7XG4gICAgLy9ub3QgYSB0b3AtbGV2ZWwgdmNhbGVuZGFyIGNvbXBvbmVudFxuICAgIHJldHVybiB2Y2FsO1xuICB9XG5cbiAgLy9TdG9yZSB2dGltZXpvbmUgc3ViY29tcG9uZW50cyBpbiBhbiBvYmplY3QgcmVmZXJlbmNlIGJ5IHR6aWQuXG4gIC8vU3RvcmUgcHJvcGVydGllcyBmcm9tIGV2ZXJ5dGhpbmcgZWxzZSBpbiBhbm90aGVyIGFycmF5XG4gIGFsbHN1YnMgPSB2Y2FsLmdldEFsbFN1YmNvbXBvbmVudHMoKTtcbiAgcHJvcGVydGllcyA9IFtdO1xuICB2dGltZXpvbmVzID0ge307XG4gIGZvciAoaSA9IDA7IGkgPCBhbGxzdWJzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGFsbHN1YnNbaV0ubmFtZSA9PT0gXCJ2dGltZXpvbmVcIikge1xuICAgICAgbGV0IHR6aWQgPSBhbGxzdWJzW2ldLmdldEZpcnN0UHJvcGVydHkoXCJ0emlkXCIpLmdldEZpcnN0VmFsdWUoKTtcbiAgICAgIHZ0aW1lem9uZXNbdHppZF0gPSBhbGxzdWJzW2ldO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9wZXJ0aWVzID0gcHJvcGVydGllcy5jb25jYXQoYWxsc3Vic1tpXS5nZXRBbGxQcm9wZXJ0aWVzKCkpO1xuICAgIH1cbiAgfVxuXG4gIC8vY3JlYXRlIGFuIG9iamVjdCB3aXRoIG9uZSBlbnRyeSBmb3IgZWFjaCByZXF1aXJlZCB0elxuICByZXFUemlkID0ge307XG4gIGZvciAoaSA9IDA7IGkgPCBwcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IHR6aWQgPSBwcm9wZXJ0aWVzW2ldLmdldFBhcmFtZXRlcihcInR6aWRcIik7XG4gICAgaWYgKHR6aWQpIHtcbiAgICAgIHJlcVR6aWRbdHppZF0gPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8vZGVsZXRlIGFueSB2dGltZXpvbmVzIHRoYXQgYXJlIG5vdCBvbiB0aGUgcmVxVHppZCBsaXN0LlxuICBmb3IgKGxldCBbdHppZCwgY29tcF0gb2YgT2JqZWN0LmVudHJpZXModnRpbWV6b25lcykpIHtcbiAgICBpZiAoIXJlcVR6aWRbdHppZF0pIHtcbiAgICAgIHZjYWwucmVtb3ZlU3ViY29tcG9uZW50KGNvbXApO1xuICAgIH1cbiAgfVxuXG4gIC8vY3JlYXRlIGFueSBtaXNzaW5nLCBidXQgcmVnaXN0ZXJlZCB0aW1lem9uZXNcbiAgZm9yIChsZXQgdHppZCBvZiBPYmplY3Qua2V5cyhyZXFUemlkKSkge1xuICAgIGlmICghdnRpbWV6b25lc1t0emlkXSAmJiBUaW1lem9uZVNlcnZpY2UuaGFzKHR6aWQpKSB7XG4gICAgICB2Y2FsLmFkZFN1YmNvbXBvbmVudChUaW1lem9uZVNlcnZpY2UuZ2V0KHR6aWQpLmNvbXBvbmVudCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHZjYWw7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBnaXZlbiB0eXBlIGlzIG9mIHRoZSBudW1iZXIgdHlwZSBhbmQgYWxzbyBOYU4uXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG51bWJlciAgICAgVGhlIG51bWJlciB0byBjaGVja1xuICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgICAgVHJ1ZSwgaWYgdGhlIG51bWJlciBpcyBzdHJpY3RseSBOYU5cbiAqL1xuZnVuY3Rpb24gaXNTdHJpY3RseU5hTihudW1iZXIpIHtcbiAgcmV0dXJuIHR5cGVvZihudW1iZXIpID09PSAnbnVtYmVyJyAmJiBpc05hTihudW1iZXIpO1xufVxuXG4vKipcbiAqIFBhcnNlcyBhIHN0cmluZyB2YWx1ZSB0aGF0IGlzIGV4cGVjdGVkIHRvIGJlIGFuIGludGVnZXIsIHdoZW4gdGhlIHZhbGlkIGlzXG4gKiBub3QgYW4gaW50ZWdlciB0aHJvd3MgYSBkZWNvcmF0aW9uIGVycm9yLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgICAgIFJhdyBzdHJpbmcgaW5wdXRcbiAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgIFBhcnNlZCBpbnRlZ2VyXG4gKi9cbmZ1bmN0aW9uIHN0cmljdFBhcnNlSW50KHN0cmluZykge1xuICBsZXQgcmVzdWx0ID0gcGFyc2VJbnQoc3RyaW5nLCAxMCk7XG5cbiAgaWYgKGlzU3RyaWN0bHlOYU4ocmVzdWx0KSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdDb3VsZCBub3QgZXh0cmFjdCBpbnRlZ2VyIGZyb20gXCInICsgc3RyaW5nICsgJ1wiJ1xuICAgICk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgb3IgcmV0dXJucyBhIGNsYXNzIGluc3RhbmNlIG9mIGEgZ2l2ZW4gdHlwZSB3aXRoIHRoZSBpbml0aWFsaXphdGlvblxuICogZGF0YSBpZiB0aGUgZGF0YSBpcyBub3QgYWxyZWFkeSBhbiBpbnN0YW5jZSBvZiB0aGUgZ2l2ZW4gdHlwZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogdmFyIHRpbWUgPSBuZXcgSUNBTC5UaW1lKC4uLik7XG4gKiB2YXIgcmVzdWx0ID0gSUNBTC5oZWxwZXJzLmZvcm1hdENsYXNzVHlwZSh0aW1lLCBJQ0FMLlRpbWUpO1xuICpcbiAqIChyZXN1bHQgaW5zdGFuY2VvZiBJQ0FMLlRpbWUpXG4gKiAvLyA9PiB0cnVlXG4gKlxuICogcmVzdWx0ID0gSUNBTC5oZWxwZXJzLmZvcm1hdENsYXNzVHlwZSh7fSwgSUNBTC5UaW1lKTtcbiAqIChyZXN1bHQgaXNudGFuY2VvZiBJQ0FMLlRpbWUpXG4gKiAvLyA9PiB0cnVlXG4gKlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhICAgICAgIG9iamVjdCBpbml0aWFsaXphdGlvbiBkYXRhXG4gKiBAcGFyYW0ge09iamVjdH0gdHlwZSAgICAgICBvYmplY3QgdHlwZSAobGlrZSBJQ0FMLlRpbWUpXG4gKiBAcmV0dXJuIHs/fSAgICAgICAgICAgICAgICBBbiBpbnN0YW5jZSBvZiB0aGUgZm91bmQgdHlwZS5cbiAqL1xuZnVuY3Rpb24gZm9ybWF0Q2xhc3NUeXBlKGRhdGEsIHR5cGUpIHtcbiAgaWYgKHR5cGVvZihkYXRhKSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKGRhdGEgaW5zdGFuY2VvZiB0eXBlKSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgcmV0dXJuIG5ldyB0eXBlKGRhdGEpO1xufVxuXG4vKipcbiAqIElkZW50aWNhbCB0byBpbmRleE9mIGJ1dCB3aWxsIG9ubHkgbWF0Y2ggdmFsdWVzIHdoZW4gdGhleSBhcmUgbm90IHByZWNlZGVkXG4gKiBieSBhIGJhY2tzbGFzaCBjaGFyYWN0ZXIuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGJ1ZmZlciAgICAgICAgIFN0cmluZyB0byBzZWFyY2hcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2ggICAgICAgICBWYWx1ZSB0byBsb29rIGZvclxuICogQHBhcmFtIHtOdW1iZXJ9IHBvcyAgICAgICAgICAgIFN0YXJ0IHBvc2l0aW9uXG4gKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgICAgICAgVGhlIHBvc2l0aW9uLCBvciAtMSBpZiBub3QgZm91bmRcbiAqL1xuZnVuY3Rpb24gdW5lc2NhcGVkSW5kZXhPZihidWZmZXIsIHNlYXJjaCwgcG9zKSB7XG4gIHdoaWxlICgocG9zID0gYnVmZmVyLmluZGV4T2Yoc2VhcmNoLCBwb3MpKSAhPT0gLTEpIHtcbiAgICBpZiAocG9zID4gMCAmJiBidWZmZXJbcG9zIC0gMV0gPT09ICdcXFxcJykge1xuICAgICAgcG9zICs9IDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwb3M7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxuLyoqXG4gKiBGaW5kIHRoZSBpbmRleCBmb3IgaW5zZXJ0aW9uIHVzaW5nIGJpbmFyeSBzZWFyY2guXG4gKlxuICogQHBhcmFtIHtBcnJheX0gbGlzdCAgICAgICAgICAgIFRoZSBsaXN0IHRvIHNlYXJjaFxuICogQHBhcmFtIHs/fSBzZWVrVmFsICAgICAgICAgICAgIFRoZSB2YWx1ZSB0byBpbnNlcnRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oPyw/KX0gY21wZnVuYyBUaGUgY29tcGFyaXNvbiBmdW5jLCB0aGF0IGNhblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFyZSB0d28gc2Vla1ZhbHNcbiAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAgICBUaGUgaW5zZXJ0IHBvc2l0aW9uXG4gKi9cbmZ1bmN0aW9uIGJpbnNlYXJjaEluc2VydChsaXN0LCBzZWVrVmFsLCBjbXBmdW5jKSB7XG4gIGlmICghbGlzdC5sZW5ndGgpXG4gICAgcmV0dXJuIDA7XG5cbiAgbGV0IGxvdyA9IDAsIGhpZ2ggPSBsaXN0Lmxlbmd0aCAtIDEsXG4gICAgICBtaWQsIGNtcHZhbDtcblxuICB3aGlsZSAobG93IDw9IGhpZ2gpIHtcbiAgICBtaWQgPSBsb3cgKyBNYXRoLmZsb29yKChoaWdoIC0gbG93KSAvIDIpO1xuICAgIGNtcHZhbCA9IGNtcGZ1bmMoc2Vla1ZhbCwgbGlzdFttaWRdKTtcblxuICAgIGlmIChjbXB2YWwgPCAwKVxuICAgICAgaGlnaCA9IG1pZCAtIDE7XG4gICAgZWxzZSBpZiAoY21wdmFsID4gMClcbiAgICAgIGxvdyA9IG1pZCArIDE7XG4gICAgZWxzZVxuICAgICAgYnJlYWs7XG4gIH1cblxuICBpZiAoY21wdmFsIDwgMClcbiAgICByZXR1cm4gbWlkOyAvLyBpbnNlcnRpb24gaXMgZGlzcGxhY2luZywgc28gdXNlIG1pZCBvdXRyaWdodC5cbiAgZWxzZSBpZiAoY21wdmFsID4gMClcbiAgICByZXR1cm4gbWlkICsgMTtcbiAgZWxzZVxuICAgIHJldHVybiBtaWQ7XG59XG5cbi8qKlxuICogQ2xvbmUgdGhlIHBhc3NlZCBvYmplY3Qgb3IgcHJpbWl0aXZlLiBCeSBkZWZhdWx0IGEgc2hhbGxvdyBjbG9uZSB3aWxsIGJlXG4gKiBleGVjdXRlZC5cbiAqXG4gKiBAcGFyYW0geyp9IGFTcmMgICAgICAgICAgICBUaGUgdGhpbmcgdG8gY2xvbmVcbiAqIEBwYXJhbSB7Qm9vbGVhbj19IGFEZWVwICAgIElmIHRydWUsIGEgZGVlcCBjbG9uZSB3aWxsIGJlIHBlcmZvcm1lZFxuICogQHJldHVybiB7Kn0gICAgICAgICAgICAgICAgVGhlIGNvcHkgb2YgdGhlIHRoaW5nXG4gKi9cbmZ1bmN0aW9uIGNsb25lKGFTcmMsIGFEZWVwKSB7XG4gIGlmICghYVNyYyB8fCB0eXBlb2YgYVNyYyAhPSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIGFTcmM7XG4gIH0gZWxzZSBpZiAoYVNyYyBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoYVNyYy5nZXRUaW1lKCkpO1xuICB9IGVsc2UgaWYgKFwiY2xvbmVcIiBpbiBhU3JjKSB7XG4gICAgcmV0dXJuIGFTcmMuY2xvbmUoKTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFTcmMpKSB7XG4gICAgbGV0IGFyciA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYVNyYy5sZW5ndGg7IGkrKykge1xuICAgICAgYXJyLnB1c2goYURlZXAgPyBjbG9uZShhU3JjW2ldLCB0cnVlKSA6IGFTcmNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gYXJyO1xuICB9IGVsc2Uge1xuICAgIGxldCBvYmogPSB7fTtcbiAgICBmb3IgKGxldCBbbmFtZSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGFTcmMpKSB7XG4gICAgICBpZiAoYURlZXApIHtcbiAgICAgICAgb2JqW25hbWVdID0gY2xvbmUodmFsdWUsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb2JqW25hbWVdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH1cbn1cblxuLyoqXG4gKiBQZXJmb3JtcyBpQ2FsZW5kYXIgbGluZSBmb2xkaW5nLiBBIGxpbmUgZW5kaW5nIGNoYXJhY3RlciBpcyBpbnNlcnRlZCBhbmRcbiAqIHRoZSBuZXh0IGxpbmUgYmVnaW5zIHdpdGggYSB3aGl0ZXNwYWNlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBTVU1NQVJZOlRoaXMgbGluZSB3aWxsIGJlIGZvbGRcbiAqICBlZCByaWdodCBpbiB0aGUgbWlkZGxlIG9mIGEgd29yZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYUxpbmUgICAgICBUaGUgbGluZSB0byBmb2xkXG4gKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgICBUaGUgZm9sZGVkIGxpbmVcbiAqL1xuZnVuY3Rpb24gZm9sZGxpbmUoYUxpbmUpIHtcbiAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gIGxldCBsaW5lID0gYUxpbmUgfHwgXCJcIiwgcG9zID0gMCwgbGluZV9sZW5ndGggPSAwO1xuICAvL3BvcyBjb3VudHMgcG9zaXRpb24gaW4gbGluZSBmb3IgdGhlIFVURi0xNiBwcmVzZW50YXRpb25cbiAgLy9saW5lX2xlbmd0aCBjb3VudHMgdGhlIGJ5dGVzIGZvciB0aGUgVVRGLTggcHJlc2VudGF0aW9uXG4gIHdoaWxlIChsaW5lLmxlbmd0aCkge1xuICAgIGxldCBjcCA9IGxpbmUuY29kZVBvaW50QXQocG9zKTtcbiAgICBpZiAoY3AgPCAxMjgpICsrbGluZV9sZW5ndGg7XG4gICAgZWxzZSBpZiAoY3AgPCAyMDQ4KSBsaW5lX2xlbmd0aCArPSAyOy8vbmVlZHMgMiBVVEYtOCBieXRlc1xuICAgIGVsc2UgaWYgKGNwIDwgNjU1MzYpIGxpbmVfbGVuZ3RoICs9IDM7XG4gICAgZWxzZSBsaW5lX2xlbmd0aCArPSA0OyAvL2NwIGlzIGxlc3MgdGhhbiAxMTE0MTEyXG4gICAgaWYgKGxpbmVfbGVuZ3RoIDwgSUNBTG1vZHVsZS5mb2xkTGVuZ3RoICsgMSlcbiAgICAgIHBvcyArPSBjcCA+IDY1NTM1ID8gMiA6IDE7XG4gICAgZWxzZSB7XG4gICAgICByZXN1bHQgKz0gSUNBTG1vZHVsZS5uZXdMaW5lQ2hhciArIFwiIFwiICsgbGluZS5zbGljZSgwLCBNYXRoLm1heCgwLCBwb3MpKTtcbiAgICAgIGxpbmUgPSBsaW5lLnNsaWNlKE1hdGgubWF4KDAsIHBvcykpO1xuICAgICAgcG9zID0gbGluZV9sZW5ndGggPSAwO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0LnNsaWNlKElDQUxtb2R1bGUubmV3TGluZUNoYXIubGVuZ3RoICsgMSk7XG59XG5cbi8qKlxuICogUGFkcyB0aGUgZ2l2ZW4gc3RyaW5nIG9yIG51bWJlciB3aXRoIHplcm9zIHNvIGl0IHdpbGwgaGF2ZSBhdCBsZWFzdCB0d29cbiAqIGNoYXJhY3RlcnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBkYXRhICAgIFRoZSBzdHJpbmcgb3IgbnVtYmVyIHRvIHBhZFxuICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgICAgICAgIFRoZSBudW1iZXIgcGFkZGVkIGFzIGEgc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIHBhZDIoZGF0YSkge1xuICBpZiAodHlwZW9mKGRhdGEpICE9PSAnc3RyaW5nJykge1xuICAgIC8vIGhhbmRsZSBmcmFjdGlvbnMuXG4gICAgaWYgKHR5cGVvZihkYXRhKSA9PT0gJ251bWJlcicpIHtcbiAgICAgIGRhdGEgPSBwYXJzZUludChkYXRhKTtcbiAgICB9XG4gICAgZGF0YSA9IFN0cmluZyhkYXRhKTtcbiAgfVxuXG4gIGxldCBsZW4gPSBkYXRhLmxlbmd0aDtcblxuICBzd2l0Y2ggKGxlbikge1xuICAgIGNhc2UgMDpcbiAgICAgIHJldHVybiAnMDAnO1xuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiAnMCcgKyBkYXRhO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZGF0YTtcbiAgfVxufVxuXG4vKipcbiAqIFRydW5jYXRlcyB0aGUgZ2l2ZW4gbnVtYmVyLCBjb3JyZWN0bHkgaGFuZGxpbmcgbmVnYXRpdmUgbnVtYmVycy5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbnVtYmVyICAgICBUaGUgbnVtYmVyIHRvIHRydW5jYXRlXG4gKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgICBUaGUgdHJ1bmNhdGVkIG51bWJlclxuICovXG5mdW5jdGlvbiB0cnVuYyhudW1iZXIpIHtcbiAgcmV0dXJuIChudW1iZXIgPCAwID8gTWF0aC5jZWlsKG51bWJlcikgOiBNYXRoLmZsb29yKG51bWJlcikpO1xufVxuXG4vKipcbiAqIFBvb3ItbWFuJ3MgY3Jvc3MtYnJvd3NlciBvYmplY3QgZXh0ZW5zaW9uLiBEb2Vzbid0IHN1cHBvcnQgYWxsIHRoZVxuICogZmVhdHVyZXMsIGJ1dCBlbm91Z2ggZm9yIG91ciB1c2FnZS4gTm90ZSB0aGF0IHRoZSB0YXJnZXQncyBwcm9wZXJ0aWVzIGFyZVxuICogbm90IG92ZXJ3cml0dGVuIHdpdGggdGhlIHNvdXJjZSBwcm9wZXJ0aWVzLlxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgY2hpbGQgPSBJQ0FMLmhlbHBlcnMuZXh0ZW5kKHBhcmVudCwge1xuICogICBcImJhclwiOiAxMjNcbiAqIH0pO1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgICAgIFRoZSBvYmplY3QgdG8gZXh0ZW5kXG4gKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0ICAgICBUaGUgb2JqZWN0IHRvIGV4dGVuZCB3aXRoXG4gKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgICBSZXR1cm5zIHRoZSB0YXJnZXQuXG4gKi9cbmZ1bmN0aW9uIGV4dGVuZChzb3VyY2UsIHRhcmdldCkge1xuICBmb3IgKGxldCBrZXkgaW4gc291cmNlKSB7XG4gICAgbGV0IGRlc2NyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSk7XG4gICAgaWYgKGRlc2NyICYmICFPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBkZXNjcik7XG4gICAgfVxuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbnZhciBoZWxwZXJzID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIGJpbnNlYXJjaEluc2VydDogYmluc2VhcmNoSW5zZXJ0LFxuICBjbG9uZTogY2xvbmUsXG4gIGV4dGVuZDogZXh0ZW5kLFxuICBmb2xkbGluZTogZm9sZGxpbmUsXG4gIGZvcm1hdENsYXNzVHlwZTogZm9ybWF0Q2xhc3NUeXBlLFxuICBpc1N0cmljdGx5TmFOOiBpc1N0cmljdGx5TmFOLFxuICBwYWQyOiBwYWQyLFxuICBzdHJpY3RQYXJzZUludDogc3RyaWN0UGFyc2VJbnQsXG4gIHRydW5jOiB0cnVuYyxcbiAgdW5lc2NhcGVkSW5kZXhPZjogdW5lc2NhcGVkSW5kZXhPZixcbiAgdXBkYXRlVGltZXpvbmVzOiB1cGRhdGVUaW1lem9uZXNcbn0pO1xuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgXCJ1dGMtb2Zmc2V0XCIgdmFsdWUgdHlwZSwgd2l0aCB2YXJpb3VzIGNhbGN1bGF0aW9uIGFuZCBtYW5pcHVsYXRpb25cbiAqIG1ldGhvZHMuXG4gKlxuICogQG1lbWJlcm9mIElDQUxcbiAqL1xuY2xhc3MgVXRjT2Zmc2V0IHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIElDQUwuVXRjT2Zmc2V0fSBpbnN0YW5jZSBmcm9tIHRoZSBwYXNzZWQgc3RyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gYVN0cmluZyAgICBUaGUgc3RyaW5nIHRvIHBhcnNlXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufSAgICAgICAgIFRoZSBjcmVhdGVkIHV0Yy1vZmZzZXQgaW5zdGFuY2VcbiAgICovXG4gIHN0YXRpYyBmcm9tU3RyaW5nKGFTdHJpbmcpIHtcbiAgICAvLyAtMDU6MDBcbiAgICBsZXQgb3B0aW9ucyA9IHt9O1xuICAgIC8vVE9ETzogc3VwcG9ydCBzZWNvbmRzIHBlciByZmM1NTQ1ID9cbiAgICBvcHRpb25zLmZhY3RvciA9IChhU3RyaW5nWzBdID09PSAnKycpID8gMSA6IC0xO1xuICAgIG9wdGlvbnMuaG91cnMgPSBzdHJpY3RQYXJzZUludChhU3RyaW5nLnNsaWNlKDEsIDMpKTtcbiAgICBvcHRpb25zLm1pbnV0ZXMgPSBzdHJpY3RQYXJzZUludChhU3RyaW5nLnNsaWNlKDQsIDYpKTtcblxuICAgIHJldHVybiBuZXcgVXRjT2Zmc2V0KG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIElDQUwuVXRjT2Zmc2V0fSBpbnN0YW5jZSBmcm9tIHRoZSBwYXNzZWQgc2Vjb25kc1xuICAgKiB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFTZWNvbmRzICAgICAgIFRoZSBudW1iZXIgb2Ygc2Vjb25kcyB0byBjb252ZXJ0XG4gICAqL1xuICBzdGF0aWMgZnJvbVNlY29uZHMoYVNlY29uZHMpIHtcbiAgICBsZXQgaW5zdGFuY2UgPSBuZXcgVXRjT2Zmc2V0KCk7XG4gICAgaW5zdGFuY2UuZnJvbVNlY29uZHMoYVNlY29uZHMpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuVXRjT2Zmc2V0IGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYURhdGEgICAgICAgICAgQW4gb2JqZWN0IHdpdGggbWVtYmVycyBvZiB0aGUgdXRjIG9mZnNldFxuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLmhvdXJzICAgVGhlIGhvdXJzIGZvciB0aGUgdXRjIG9mZnNldFxuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLm1pbnV0ZXMgVGhlIG1pbnV0ZXMgaW4gdGhlIHV0YyBvZmZzZXRcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBhRGF0YS5mYWN0b3IgIFRoZSBmYWN0b3IgZm9yIHRoZSB1dGMtb2Zmc2V0LCBlaXRoZXIgLTEgb3IgMVxuICAgKi9cbiAgY29uc3RydWN0b3IoYURhdGEpIHtcbiAgICB0aGlzLmZyb21EYXRhKGFEYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgaG91cnMgaW4gdGhlIHV0Yy1vZmZzZXRcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGhvdXJzID0gMDtcblxuICAvKipcbiAgICogVGhlIG1pbnV0ZXMgaW4gdGhlIHV0Yy1vZmZzZXRcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIG1pbnV0ZXMgPSAwO1xuXG4gIC8qKlxuICAgKiBUaGUgc2lnbiBvZiB0aGUgdXRjIG9mZnNldCwgMSBmb3IgcG9zaXRpdmUgb2Zmc2V0LCAtMSBmb3IgbmVnYXRpdmVcbiAgICogb2Zmc2V0cy5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGZhY3RvciA9IDE7XG5cbiAgLyoqXG4gICAqIFRoZSB0eXBlIG5hbWUsIHRvIGJlIHVzZWQgaW4gdGhlIGpDYWwgb2JqZWN0LlxuICAgKiBAY29uc3RhbnRcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGRlZmF1bHQgXCJ1dGMtb2Zmc2V0XCJcbiAgICovXG4gIGljYWx0eXBlID0gXCJ1dGMtb2Zmc2V0XCI7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjbG9uZSBvZiB0aGUgdXRjIG9mZnNldCBvYmplY3QuXG4gICAqXG4gICAqIEByZXR1cm4ge1V0Y09mZnNldH0gICAgIFRoZSBjbG9uZWQgb2JqZWN0XG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gVXRjT2Zmc2V0LmZyb21TZWNvbmRzKHRoaXMudG9TZWNvbmRzKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgdGhlIGN1cnJlbnQgaW5zdGFuY2UgdXNpbmcgbWVtYmVycyBmcm9tIHRoZSBwYXNzZWQgZGF0YSBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhRGF0YSAgICAgICAgICBBbiBvYmplY3Qgd2l0aCBtZW1iZXJzIG9mIHRoZSB1dGMgb2Zmc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYURhdGEuaG91cnMgICBUaGUgaG91cnMgZm9yIHRoZSB1dGMgb2Zmc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYURhdGEubWludXRlcyBUaGUgbWludXRlcyBpbiB0aGUgdXRjIG9mZnNldFxuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLmZhY3RvciAgVGhlIGZhY3RvciBmb3IgdGhlIHV0Yy1vZmZzZXQsIGVpdGhlciAtMSBvciAxXG4gICAqL1xuICBmcm9tRGF0YShhRGF0YSkge1xuICAgIGlmIChhRGF0YSkge1xuICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGFEYXRhKSkge1xuICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fbm9ybWFsaXplKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB1cCB0aGUgY3VycmVudCBpbnN0YW5jZSBmcm9tIHRoZSBnaXZlbiBzZWNvbmRzIHZhbHVlLiBUaGUgc2Vjb25kc1xuICAgKiB2YWx1ZSBpcyB0cnVuY2F0ZWQgdG8gdGhlIG1pbnV0ZS4gT2Zmc2V0cyBhcmUgd3JhcHBlZCB3aGVuIHRoZSB3b3JsZFxuICAgKiBlbmRzLCB0aGUgaG91ciBhZnRlciBVVEMrMTQ6MDAgaXMgVVRDLTEyOjAwLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gYVNlY29uZHMgICAgICAgICBUaGUgc2Vjb25kcyB0byBjb252ZXJ0IGludG8gYW4gb2Zmc2V0XG4gICAqL1xuICBmcm9tU2Vjb25kcyhhU2Vjb25kcykge1xuICAgIGxldCBzZWNzID0gTWF0aC5hYnMoYVNlY29uZHMpO1xuXG4gICAgdGhpcy5mYWN0b3IgPSBhU2Vjb25kcyA8IDAgPyAtMSA6IDE7XG4gICAgdGhpcy5ob3VycyA9IHRydW5jKHNlY3MgLyAzNjAwKTtcblxuICAgIHNlY3MgLT0gKHRoaXMuaG91cnMgKiAzNjAwKTtcbiAgICB0aGlzLm1pbnV0ZXMgPSB0cnVuYyhzZWNzIC8gNjApO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgdGhlIGN1cnJlbnQgb2Zmc2V0IHRvIGEgdmFsdWUgaW4gc2Vjb25kc1xuICAgKlxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgICAgICAgICBUaGUgb2Zmc2V0IGluIHNlY29uZHNcbiAgICovXG4gIHRvU2Vjb25kcygpIHtcbiAgICByZXR1cm4gdGhpcy5mYWN0b3IgKiAoNjAgKiB0aGlzLm1pbnV0ZXMgKyAzNjAwICogdGhpcy5ob3Vycyk7XG4gIH1cblxuICAvKipcbiAgICogQ29tcGFyZSB0aGlzIHV0YyBvZmZzZXQgd2l0aCBhbm90aGVyIG9uZS5cbiAgICpcbiAgICogQHBhcmFtIHtVdGNPZmZzZXR9IG90aGVyICAgICAgICAgICAgIFRoZSBvdGhlciBvZmZzZXQgdG8gY29tcGFyZSB3aXRoXG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAgICAgICAgICAtMSwgMCBvciAxIGZvciBsZXNzL2VxdWFsL2dyZWF0ZXJcbiAgICovXG4gIGNvbXBhcmUob3RoZXIpIHtcbiAgICBsZXQgYSA9IHRoaXMudG9TZWNvbmRzKCk7XG4gICAgbGV0IGIgPSBvdGhlci50b1NlY29uZHMoKTtcbiAgICByZXR1cm4gKGEgPiBiKSAtIChiID4gYSk7XG4gIH1cblxuICBfbm9ybWFsaXplKCkge1xuICAgIC8vIFJhbmdlOiA5NzIwMCBzZWNvbmRzICh3aXRoIDEgaG91ciBpbmJldHdlZW4pXG4gICAgbGV0IHNlY3MgPSB0aGlzLnRvU2Vjb25kcygpO1xuICAgIGxldCBmYWN0b3IgPSB0aGlzLmZhY3RvcjtcbiAgICB3aGlsZSAoc2VjcyA8IC00MzIwMCkgeyAvLyA9IFVUQy0xMjowMFxuICAgICAgc2VjcyArPSA5NzIwMDtcbiAgICB9XG4gICAgd2hpbGUgKHNlY3MgPiA1MDQwMCkgeyAvLyA9IFVUQysxNDowMFxuICAgICAgc2VjcyAtPSA5NzIwMDtcbiAgICB9XG5cbiAgICB0aGlzLmZyb21TZWNvbmRzKHNlY3MpO1xuXG4gICAgLy8gQXZvaWQgY2hhbmdpbmcgdGhlIGZhY3RvciB3aGVuIG9uIHplcm8gc2Vjb25kc1xuICAgIGlmIChzZWNzID09IDApIHtcbiAgICAgIHRoaXMuZmFjdG9yID0gZmFjdG9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgaUNhbGVuZGFyIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHV0Yy1vZmZzZXQuXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIHRvSUNBTFN0cmluZygpIHtcbiAgICByZXR1cm4gZGVzaWduLmljYWxlbmRhci52YWx1ZVsndXRjLW9mZnNldCddLnRvSUNBTCh0aGlzLnRvU3RyaW5nKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyB1dGMtb2Zmc2V0LlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gKHRoaXMuZmFjdG9yID09IDEgPyBcIitcIiA6IFwiLVwiKSArIHBhZDIodGhpcy5ob3VycykgKyAnOicgKyBwYWQyKHRoaXMubWludXRlcyk7XG4gIH1cbn1cblxuLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cblxuLyoqXG4gKiBEZXNjcmliZXMgYSB2Q2FyZCB0aW1lLCB3aGljaCBoYXMgc2xpZ2h0IGRpZmZlcmVuY2VzIHRvIHRoZSBJQ0FMLlRpbWUuXG4gKiBQcm9wZXJ0aWVzIGNhbiBiZSBudWxsIGlmIG5vdCBzcGVjaWZpZWQsIGZvciBleGFtcGxlIGZvciBkYXRlcyB3aXRoXG4gKiByZWR1Y2VkIGFjY3VyYWN5IG9yIHRydW5jYXRpb24uXG4gKlxuICogTm90ZSB0aGF0IGN1cnJlbnRseSBub3QgYWxsIG1ldGhvZHMgYXJlIGNvcnJlY3RseSByZS1pbXBsZW1lbnRlZCBmb3JcbiAqIFZDYXJkVGltZS4gRm9yIGV4YW1wbGUsIGNvbXBhcmlzb24gd2lsbCBoYXZlIHVuZGVmaW5lZCByZXN1bHRzIHdoZW4gc29tZVxuICogbWVtYmVycyBhcmUgbnVsbC5cbiAqXG4gKiBBbHNvLCBub3JtYWxpemF0aW9uIGlzIG5vdCB5ZXQgaW1wbGVtZW50ZWQgZm9yIHRoaXMgY2xhc3MhXG4gKlxuICogQG1lbWJlcm9mIElDQUxcbiAqIEBleHRlbmRzIHtUaW1lfVxuICovXG5jbGFzcyBWQ2FyZFRpbWUgZXh0ZW5kcyBUaW1lIHtcbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgSUNBTC5WQ2FyZFRpbWUgaW5zdGFuY2UgZnJvbSBhIGRhdGUgYW5kL29yIHRpbWUgc3RyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gYVZhbHVlICAgICBUaGUgc3RyaW5nIHRvIGNyZWF0ZSBmcm9tXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhSWNhbFR5cGUgIFRoZSB0eXBlIGZvciB0aGlzIGluc3RhbmNlLCBlLmcuIGRhdGUtYW5kLW9yLXRpbWVcbiAgICogQHJldHVybiB7VkNhcmRUaW1lfSAgICAgICAgVGhlIGRhdGUvdGltZSBpbnN0YW5jZVxuICAgKi9cbiAgc3RhdGljIGZyb21EYXRlQW5kT3JUaW1lU3RyaW5nKGFWYWx1ZSwgYUljYWxUeXBlKSB7XG4gICAgZnVuY3Rpb24gcGFydCh2LCBzLCBlKSB7XG4gICAgICByZXR1cm4gdiA/IHN0cmljdFBhcnNlSW50KHYuc2xpY2UocywgcyArIGUpKSA6IG51bGw7XG4gICAgfVxuICAgIGxldCBwYXJ0cyA9IGFWYWx1ZS5zcGxpdCgnVCcpO1xuICAgIGxldCBkdCA9IHBhcnRzWzBdLCB0bXogPSBwYXJ0c1sxXTtcbiAgICBsZXQgc3BsaXR6b25lID0gdG16ID8gZGVzaWduLnZjYXJkLnZhbHVlLnRpbWUuX3NwbGl0Wm9uZSh0bXopIDogW107XG4gICAgbGV0IHpvbmUgPSBzcGxpdHpvbmVbMF0sIHRtID0gc3BsaXR6b25lWzFdO1xuXG4gICAgbGV0IGR0bGVuID0gZHQgPyBkdC5sZW5ndGggOiAwO1xuICAgIGxldCB0bWxlbiA9IHRtID8gdG0ubGVuZ3RoIDogMDtcblxuICAgIGxldCBoYXNEYXNoRGF0ZSA9IGR0ICYmIGR0WzBdID09ICctJyAmJiBkdFsxXSA9PSAnLSc7XG4gICAgbGV0IGhhc0Rhc2hUaW1lID0gdG0gJiYgdG1bMF0gPT0gJy0nO1xuXG4gICAgbGV0IG8gPSB7XG4gICAgICB5ZWFyOiBoYXNEYXNoRGF0ZSA/IG51bGwgOiBwYXJ0KGR0LCAwLCA0KSxcbiAgICAgIG1vbnRoOiBoYXNEYXNoRGF0ZSAmJiAoZHRsZW4gPT0gNCB8fCBkdGxlbiA9PSA3KSA/IHBhcnQoZHQsIDIsIDIpIDogZHRsZW4gPT0gNyA/IHBhcnQoZHQsIDUsIDIpIDogZHRsZW4gPT0gMTAgPyBwYXJ0KGR0LCA1LCAyKSA6IG51bGwsXG4gICAgICBkYXk6IGR0bGVuID09IDUgPyBwYXJ0KGR0LCAzLCAyKSA6IGR0bGVuID09IDcgJiYgaGFzRGFzaERhdGUgPyBwYXJ0KGR0LCA1LCAyKSA6IGR0bGVuID09IDEwID8gcGFydChkdCwgOCwgMikgOiBudWxsLFxuXG4gICAgICBob3VyOiBoYXNEYXNoVGltZSA/IG51bGwgOiBwYXJ0KHRtLCAwLCAyKSxcbiAgICAgIG1pbnV0ZTogaGFzRGFzaFRpbWUgJiYgdG1sZW4gPT0gMyA/IHBhcnQodG0sIDEsIDIpIDogdG1sZW4gPiA0ID8gaGFzRGFzaFRpbWUgPyBwYXJ0KHRtLCAxLCAyKSA6IHBhcnQodG0sIDMsIDIpIDogbnVsbCxcbiAgICAgIHNlY29uZDogdG1sZW4gPT0gNCA/IHBhcnQodG0sIDIsIDIpIDogdG1sZW4gPT0gNiA/IHBhcnQodG0sIDQsIDIpIDogdG1sZW4gPT0gOCA/IHBhcnQodG0sIDYsIDIpIDogbnVsbFxuICAgIH07XG5cbiAgICBpZiAoem9uZSA9PSAnWicpIHtcbiAgICAgIHpvbmUgPSBUaW1lem9uZS51dGNUaW1lem9uZTtcbiAgICB9IGVsc2UgaWYgKHpvbmUgJiYgem9uZVszXSA9PSAnOicpIHtcbiAgICAgIHpvbmUgPSBVdGNPZmZzZXQuZnJvbVN0cmluZyh6b25lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgem9uZSA9IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBWQ2FyZFRpbWUobywgem9uZSwgYUljYWxUeXBlKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5WQ2FyZFRpbWUgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhlIGRhdGEgZm9yIHRoZSB0aW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS55ZWFyICAgICAgICAgICAgICAgICAgICAgVGhlIHllYXIgZm9yIHRoaXMgZGF0ZVxuICAgKiBAcGFyYW0ge051bWJlcj19IGRhdGEubW9udGggICAgICAgICAgICAgICAgICAgIFRoZSBtb250aCBmb3IgdGhpcyBkYXRlXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS5kYXkgICAgICAgICAgICAgICAgICAgICAgVGhlIGRheSBmb3IgdGhpcyBkYXRlXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS5ob3VyICAgICAgICAgICAgICAgICAgICAgVGhlIGhvdXIgZm9yIHRoaXMgZGF0ZVxuICAgKiBAcGFyYW0ge051bWJlcj19IGRhdGEubWludXRlICAgICAgICAgICAgICAgICAgIFRoZSBtaW51dGUgZm9yIHRoaXMgZGF0ZVxuICAgKiBAcGFyYW0ge051bWJlcj19IGRhdGEuc2Vjb25kICAgICAgICAgICAgICAgICAgIFRoZSBzZWNvbmQgZm9yIHRoaXMgZGF0ZVxuICAgKiBAcGFyYW0ge1RpbWV6b25lfFV0Y09mZnNldH0gem9uZSAgICAgICAgICAgICAgIFRoZSB0aW1lem9uZSB0byB1c2VcbiAgICogQHBhcmFtIHtTdHJpbmd9IGljYWx0eXBlICAgICAgICAgICAgICAgICAgICAgICBUaGUgdHlwZSBmb3IgdGhpcyBkYXRlL3RpbWUgb2JqZWN0XG4gICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhLCB6b25lLCBpY2FsdHlwZSkge1xuICAgIHN1cGVyKGRhdGEsIHpvbmUpO1xuICAgIHRoaXMuaWNhbHR5cGUgPSBpY2FsdHlwZSB8fCBcImRhdGUtYW5kLW9yLXRpbWVcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY2xhc3MgaWRlbnRpZmllci5cbiAgICogQGNvbnN0YW50XG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEBkZWZhdWx0IFwidmNhcmR0aW1lXCJcbiAgICovXG4gIGljYWxjbGFzcyA9IFwidmNhcmR0aW1lXCI7XG5cbiAgLyoqXG4gICAqIFRoZSB0eXBlIG5hbWUsIHRvIGJlIHVzZWQgaW4gdGhlIGpDYWwgb2JqZWN0LlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAZGVmYXVsdCBcImRhdGUtYW5kLW9yLXRpbWVcIlxuICAgKi9cbiAgaWNhbHR5cGUgPSBcImRhdGUtYW5kLW9yLXRpbWVcIjtcblxuICAvKipcbiAgICogUmV0dXJucyBhIGNsb25lIG9mIHRoZSB2Y2FyZCBkYXRlL3RpbWUgb2JqZWN0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtWQ2FyZFRpbWV9ICAgICBUaGUgY2xvbmVkIG9iamVjdFxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBWQ2FyZFRpbWUodGhpcy5fdGltZSwgdGhpcy56b25lLCB0aGlzLmljYWx0eXBlKTtcbiAgfVxuXG4gIF9ub3JtYWxpemUoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXRkb2NcbiAgICovXG4gIHV0Y09mZnNldCgpIHtcbiAgICBpZiAodGhpcy56b25lIGluc3RhbmNlb2YgVXRjT2Zmc2V0KSB7XG4gICAgICByZXR1cm4gdGhpcy56b25lLnRvU2Vjb25kcygpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gVGltZS5wcm90b3R5cGUudXRjT2Zmc2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gUkZDIDYzNTAgY29tcGxpYW50IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgb2JqZWN0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgdmNhcmQgZGF0ZS90aW1lIHN0cmluZ1xuICAgKi9cbiAgdG9JQ0FMU3RyaW5nKCkge1xuICAgIHJldHVybiBkZXNpZ24udmNhcmQudmFsdWVbdGhpcy5pY2FsdHlwZV0udG9JQ0FMKHRoaXMudG9TdHJpbmcoKSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGRhdGUvdGltZSwgaW4gakNhcmQgZm9ybVxuICAgKiAoaW5jbHVkaW5nIDogYW5kIC0gc2VwYXJhdG9ycykuXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIHRvU3RyaW5nKCkge1xuICAgIGxldCB5ID0gdGhpcy55ZWFyLCBtID0gdGhpcy5tb250aCwgZCA9IHRoaXMuZGF5O1xuICAgIGxldCBoID0gdGhpcy5ob3VyLCBtbSA9IHRoaXMubWludXRlLCBzID0gdGhpcy5zZWNvbmQ7XG5cbiAgICBsZXQgaGFzWWVhciA9IHkgIT09IG51bGwsIGhhc01vbnRoID0gbSAhPT0gbnVsbCwgaGFzRGF5ID0gZCAhPT0gbnVsbDtcbiAgICBsZXQgaGFzSG91ciA9IGggIT09IG51bGwsIGhhc01pbnV0ZSA9IG1tICE9PSBudWxsLCBoYXNTZWNvbmQgPSBzICE9PSBudWxsO1xuXG4gICAgbGV0IGRhdGVwYXJ0ID0gKGhhc1llYXIgPyBwYWQyKHkpICsgKGhhc01vbnRoIHx8IGhhc0RheSA/ICctJyA6ICcnKSA6IChoYXNNb250aCB8fCBoYXNEYXkgPyAnLS0nIDogJycpKSArXG4gICAgICAgICAgICAgICAgICAgKGhhc01vbnRoID8gcGFkMihtKSA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAgKGhhc0RheSA/ICctJyArIHBhZDIoZCkgOiAnJyk7XG4gICAgbGV0IHRpbWVwYXJ0ID0gKGhhc0hvdXIgPyBwYWQyKGgpIDogJy0nKSArIChoYXNIb3VyICYmIGhhc01pbnV0ZSA/ICc6JyA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAgKGhhc01pbnV0ZSA/IHBhZDIobW0pIDogJycpICsgKCFoYXNIb3VyICYmICFoYXNNaW51dGUgPyAnLScgOiAnJykgK1xuICAgICAgICAgICAgICAgICAgIChoYXNNaW51dGUgJiYgaGFzU2Vjb25kID8gJzonIDogJycpICtcbiAgICAgICAgICAgICAgICAgICAoaGFzU2Vjb25kID8gcGFkMihzKSA6ICcnKTtcblxuICAgIGxldCB6b25lO1xuICAgIGlmICh0aGlzLnpvbmUgPT09IFRpbWV6b25lLnV0Y1RpbWV6b25lKSB7XG4gICAgICB6b25lID0gJ1onO1xuICAgIH0gZWxzZSBpZiAodGhpcy56b25lIGluc3RhbmNlb2YgVXRjT2Zmc2V0KSB7XG4gICAgICB6b25lID0gdGhpcy56b25lLnRvU3RyaW5nKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnpvbmUgPT09IFRpbWV6b25lLmxvY2FsVGltZXpvbmUpIHtcbiAgICAgIHpvbmUgPSAnJztcbiAgICB9IGVsc2UgaWYgKHRoaXMuem9uZSBpbnN0YW5jZW9mIFRpbWV6b25lKSB7XG4gICAgICBsZXQgb2Zmc2V0ID0gVXRjT2Zmc2V0LmZyb21TZWNvbmRzKHRoaXMuem9uZS51dGNPZmZzZXQodGhpcykpO1xuICAgICAgem9uZSA9IG9mZnNldC50b1N0cmluZygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB6b25lID0gJyc7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0aGlzLmljYWx0eXBlKSB7XG4gICAgICBjYXNlIFwidGltZVwiOlxuICAgICAgICByZXR1cm4gdGltZXBhcnQgKyB6b25lO1xuICAgICAgY2FzZSBcImRhdGUtYW5kLW9yLXRpbWVcIjpcbiAgICAgIGNhc2UgXCJkYXRlLXRpbWVcIjpcbiAgICAgICAgcmV0dXJuIGRhdGVwYXJ0ICsgKHRpbWVwYXJ0ID09ICctLScgPyAnJyA6ICdUJyArIHRpbWVwYXJ0ICsgem9uZSk7XG4gICAgICBjYXNlIFwiZGF0ZVwiOlxuICAgICAgICByZXR1cm4gZGF0ZXBhcnQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKiBQb3J0aW9ucyBDb3B5cmlnaHQgKEMpIFBoaWxpcHAgS2V3aXNjaCAqL1xuXG5cbi8qKlxuICogVGhpcyBsZXRzIHR5cGVzY3JpcHQgcmVzb2x2ZSBvdXIgY3VzdG9tIHR5cGVzIGluIHRoZVxuICogZ2VuZXJhdGVkIGQudHMgZmlsZXMgKGpzZG9jIHR5cGVkZWZzIGFyZSBjb252ZXJ0ZWQgdG8gdHlwZXNjcmlwdCB0eXBlcykuXG4gKiBJZ25vcmUgcHJldmVudHMgdGhlIHR5cGVkZWZzIGZyb20gYmVpbmcgZG9jdW1lbnRlZCBtb3JlIHRoYW4gb25jZS5cbiAqXG4gKiBAaWdub3JlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS53ZWVrRGF5fSB3ZWVrRGF5XG4gKiBJbXBvcnRzIHRoZSAnd2Vla0RheScgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKi9cblxuLyoqXG4gKiBBbiBpdGVyYXRvciBmb3IgYSBzaW5nbGUgcmVjdXJyZW5jZSBydWxlLiBUaGlzIGNsYXNzIHVzdWFsbHkgZG9lc24ndCBoYXZlIHRvIGJlIGluc3RhbmNpYXRlZFxuICogZGlyZWN0bHksIHRoZSBjb252ZW5pZW5jZSBtZXRob2Qge0BsaW5rIElDQUwuUmVjdXIjaXRlcmF0b3J9IGNhbiBiZSB1c2VkLlxuICpcbiAqIEBtZW1iZXJvZiBJQ0FMXG4gKi9cbmNsYXNzIFJlY3VySXRlcmF0b3Ige1xuICBzdGF0aWMgX2luZGV4TWFwID0ge1xuICAgIFwiQllTRUNPTkRcIjogMCxcbiAgICBcIkJZTUlOVVRFXCI6IDEsXG4gICAgXCJCWUhPVVJcIjogMixcbiAgICBcIkJZREFZXCI6IDMsXG4gICAgXCJCWU1PTlRIREFZXCI6IDQsXG4gICAgXCJCWVlFQVJEQVlcIjogNSxcbiAgICBcIkJZV0VFS05PXCI6IDYsXG4gICAgXCJCWU1PTlRIXCI6IDcsXG4gICAgXCJCWVNFVFBPU1wiOiA4XG4gIH07XG5cbiAgc3RhdGljIF9leHBhbmRNYXAgPSB7XG4gICAgXCJTRUNPTkRMWVwiOiBbMSwgMSwgMSwgMSwgMSwgMSwgMSwgMV0sXG4gICAgXCJNSU5VVEVMWVwiOiBbMiwgMSwgMSwgMSwgMSwgMSwgMSwgMV0sXG4gICAgXCJIT1VSTFlcIjogWzIsIDIsIDEsIDEsIDEsIDEsIDEsIDFdLFxuICAgIFwiREFJTFlcIjogWzIsIDIsIDIsIDEsIDEsIDEsIDEsIDFdLFxuICAgIFwiV0VFS0xZXCI6IFsyLCAyLCAyLCAyLCAzLCAzLCAxLCAxXSxcbiAgICBcIk1PTlRITFlcIjogWzIsIDIsIDIsIDIsIDIsIDMsIDMsIDFdLFxuICAgIFwiWUVBUkxZXCI6IFsyLCAyLCAyLCAyLCAyLCAyLCAyLCAyXVxuICB9O1xuXG4gIHN0YXRpYyBVTktOT1dOID0gMDtcbiAgc3RhdGljIENPTlRSQUNUID0gMTtcbiAgc3RhdGljIEVYUEFORCA9IDI7XG4gIHN0YXRpYyBJTExFR0FMID0gMztcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBJQ0FMLlJlY3VySXRlcmF0b3IgaW5zdGFuY2UuIFRoZSBvcHRpb25zIG9iamVjdCBtYXkgY29udGFpbiBhZGRpdGlvbmFsIG1lbWJlcnNcbiAgICogd2hlbiByZXN1bWluZyBpdGVyYXRpb24gZnJvbSBhIHByZXZpb3VzIHJ1bi5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgICAgICAgICAgICAgICAgVGhlIGl0ZXJhdG9yIG9wdGlvbnNcbiAgICogQHBhcmFtIHtSZWN1cn0gb3B0aW9ucy5ydWxlICAgICAgICAgICAgVGhlIHJ1bGUgdG8gaXRlcmF0ZS5cbiAgICogQHBhcmFtIHtUaW1lfSBvcHRpb25zLmR0c3RhcnQgICAgICAgICAgVGhlIHN0YXJ0IGRhdGUgb2YgdGhlIGV2ZW50LlxuICAgKiBAcGFyYW0ge0Jvb2xlYW49fSBvcHRpb25zLmluaXRpYWxpemVkICBXaGVuIHRydWUsIGFzc3VtZSB0aGF0IG9wdGlvbnMgYXJlXG4gICAqICAgICAgICBmcm9tIGEgcHJldmlvdXNseSBjb25zdHJ1Y3RlZCBpdGVyYXRvci4gSW5pdGlhbGl6YXRpb24gd2lsbCBub3QgYmVcbiAgICogICAgICAgIHJlcGVhdGVkLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuZnJvbURhdGEob3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogVHJ1ZSB3aGVuIGl0ZXJhdGlvbiBpcyBmaW5pc2hlZC5cbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuICBjb21wbGV0ZWQgPSBmYWxzZTtcblxuICAvKipcbiAgICogVGhlIHJ1bGUgdGhhdCBpcyBiZWluZyBpdGVyYXRlZFxuICAgKiBAdHlwZSB7UmVjdXJ9XG4gICAqL1xuICBydWxlID0gbnVsbDtcblxuICAvKipcbiAgICogVGhlIHN0YXJ0IGRhdGUgb2YgdGhlIGV2ZW50IGJlaW5nIGl0ZXJhdGVkLlxuICAgKiBAdHlwZSB7VGltZX1cbiAgICovXG4gIGR0c3RhcnQgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbGFzdCBvY2N1cnJlbmNlIHRoYXQgd2FzIHJldHVybmVkIGZyb20gdGhlXG4gICAqIHtAbGluayBSZWN1ckl0ZXJhdG9yI25leHR9IG1ldGhvZC5cbiAgICogQHR5cGUge1RpbWV9XG4gICAqL1xuICBsYXN0ID0gbnVsbDtcblxuICAvKipcbiAgICogVGhlIHNlcXVlbmNlIG51bWJlciBmcm9tIHRoZSBvY2N1cnJlbmNlXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqL1xuICBvY2N1cnJlbmNlX251bWJlciA9IDA7XG5cbiAgLyoqXG4gICAqIFRoZSBpbmRpY2VzIHVzZWQgZm9yIHRoZSB7QGxpbmsgSUNBTC5SZWN1ckl0ZXJhdG9yI2J5X2RhdGF9IG9iamVjdC5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGJ5X2luZGljZXMgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBJZiB0cnVlLCB0aGUgaXRlcmF0b3IgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZFxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIFRoZSBpbml0aWFsaXpkIGJ5LWRhdGEuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBieV9kYXRhID0gbnVsbDtcblxuICAvKipcbiAgICogVGhlIGV4cGFuZGVkIHllYXJkYXlzXG4gICAqIEB0eXBlIHtBcnJheX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRheXMgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgaW5kZXggaW4gdGhlIHtAbGluayBJQ0FMLlJlY3VySXRlcmF0b3IjZGF5c30gYXJyYXkuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkYXlzX2luZGV4ID0gMDtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSB0aGUgcmVjdXJyZW5jZSBpdGVyYXRvciBmcm9tIHRoZSBwYXNzZWQgZGF0YSBvYmplY3QuIFRoaXNcbiAgICogbWV0aG9kIGlzIHVzdWFsbHkgbm90IGNhbGxlZCBkaXJlY3RseSwgeW91IGNhbiBpbml0aWFsaXplIHRoZSBpdGVyYXRvclxuICAgKiB0aHJvdWdoIHRoZSBjb25zdHJ1Y3Rvci5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgICAgICAgICAgICAgICAgVGhlIGl0ZXJhdG9yIG9wdGlvbnNcbiAgICogQHBhcmFtIHtSZWN1cn0gb3B0aW9ucy5ydWxlICAgICAgICAgICAgVGhlIHJ1bGUgdG8gaXRlcmF0ZS5cbiAgICogQHBhcmFtIHtUaW1lfSBvcHRpb25zLmR0c3RhcnQgICAgICAgICAgVGhlIHN0YXJ0IGRhdGUgb2YgdGhlIGV2ZW50LlxuICAgKiBAcGFyYW0ge0Jvb2xlYW49fSBvcHRpb25zLmluaXRpYWxpemVkICBXaGVuIHRydWUsIGFzc3VtZSB0aGF0IG9wdGlvbnMgYXJlXG4gICAqICAgICAgICBmcm9tIGEgcHJldmlvdXNseSBjb25zdHJ1Y3RlZCBpdGVyYXRvci4gSW5pdGlhbGl6YXRpb24gd2lsbCBub3QgYmVcbiAgICogICAgICAgIHJlcGVhdGVkLlxuICAgKi9cbiAgZnJvbURhdGEob3B0aW9ucykge1xuICAgIHRoaXMucnVsZSA9IGZvcm1hdENsYXNzVHlwZShvcHRpb25zLnJ1bGUsIFJlY3VyKTtcblxuICAgIGlmICghdGhpcy5ydWxlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2l0ZXJhdG9yIHJlcXVpcmVzIGEgKElDQUwuUmVjdXIpIHJ1bGUnKTtcbiAgICB9XG5cbiAgICB0aGlzLmR0c3RhcnQgPSBmb3JtYXRDbGFzc1R5cGUob3B0aW9ucy5kdHN0YXJ0LCBUaW1lKTtcblxuICAgIGlmICghdGhpcy5kdHN0YXJ0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2l0ZXJhdG9yIHJlcXVpcmVzIGEgKElDQUwuVGltZSkgZHRzdGFydCcpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmJ5X2RhdGEpIHtcbiAgICAgIHRoaXMuYnlfZGF0YSA9IG9wdGlvbnMuYnlfZGF0YTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ieV9kYXRhID0gY2xvbmUodGhpcy5ydWxlLnBhcnRzLCB0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5vY2N1cnJlbmNlX251bWJlcilcbiAgICAgIHRoaXMub2NjdXJyZW5jZV9udW1iZXIgPSBvcHRpb25zLm9jY3VycmVuY2VfbnVtYmVyO1xuXG4gICAgdGhpcy5kYXlzID0gb3B0aW9ucy5kYXlzIHx8IFtdO1xuICAgIGlmIChvcHRpb25zLmxhc3QpIHtcbiAgICAgIHRoaXMubGFzdCA9IGZvcm1hdENsYXNzVHlwZShvcHRpb25zLmxhc3QsIFRpbWUpO1xuICAgIH1cblxuICAgIHRoaXMuYnlfaW5kaWNlcyA9IG9wdGlvbnMuYnlfaW5kaWNlcztcblxuICAgIGlmICghdGhpcy5ieV9pbmRpY2VzKSB7XG4gICAgICB0aGlzLmJ5X2luZGljZXMgPSB7XG4gICAgICAgIFwiQllTRUNPTkRcIjogMCxcbiAgICAgICAgXCJCWU1JTlVURVwiOiAwLFxuICAgICAgICBcIkJZSE9VUlwiOiAwLFxuICAgICAgICBcIkJZREFZXCI6IDAsXG4gICAgICAgIFwiQllNT05USFwiOiAwLFxuICAgICAgICBcIkJZV0VFS05PXCI6IDAsXG4gICAgICAgIFwiQllNT05USERBWVwiOiAwXG4gICAgICB9O1xuICAgIH1cblxuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBvcHRpb25zLmluaXRpYWxpemVkIHx8IGZhbHNlO1xuXG4gICAgaWYgKCF0aGlzLmluaXRpYWxpemVkKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBJbnZhbGlkUmVjdXJyZW5jZVJ1bGVFcnJvcikge1xuICAgICAgICAgIC8vIEluaXQgbWF5IGVycm9yIGlmIHRoZXJlIGFyZSBubyBwb3NzaWJsZSByZWN1cnJlbmNlIGluc3RhbmNlcyBmcm9tXG4gICAgICAgICAgLy8gdGhlIHJ1bGUsIGJ1dCB3ZSBkb24ndCB3YW50IHRvIGJ1YmJsZSB0aGlzIGVycm9yIHVwLiBJbnN0ZWFkLCB3ZVxuICAgICAgICAgIC8vIGNyZWF0ZSBhbiBlbXB0eSBpdGVyYXRvci5cbiAgICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUHJvcGFnYXRlIG90aGVyIGVycm9ycyB0byBjb25zdW1lcnMuXG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSBpdGVyYXRvclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaW5pdCgpIHtcbiAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICB0aGlzLmxhc3QgPSB0aGlzLmR0c3RhcnQuY2xvbmUoKTtcbiAgICBsZXQgcGFydHMgPSB0aGlzLmJ5X2RhdGE7XG5cbiAgICBpZiAoXCJCWURBWVwiIGluIHBhcnRzKSB7XG4gICAgICAvLyBsaWJpY2FsIGRvZXMgdGhpcyBlYXJsaWVyIHdoZW4gdGhlIHJ1bGUgaXMgbG9hZGVkLCBidXQgd2UgcG9zdHBvbmUgdG9cbiAgICAgIC8vIG5vdyBzbyB3ZSBjYW4gcHJlc2VydmUgdGhlIG9yaWdpbmFsIG9yZGVyLlxuICAgICAgdGhpcy5zb3J0X2J5ZGF5X3J1bGVzKHBhcnRzLkJZREFZKTtcbiAgICB9XG5cbiAgICAvLyBUaGUgQllZRUFSREFZIG1heSBvbmx5IGFwcGVhciB3aXRoIEJZREFZXG4gICAgaWYgKFwiQllZRUFSREFZXCIgaW4gcGFydHMpIHtcbiAgICAgIGlmIChcIkJZTU9OVEhcIiBpbiBwYXJ0cyB8fCBcIkJZV0VFS05PXCIgaW4gcGFydHMgfHxcbiAgICAgICAgICBcIkJZTU9OVEhEQVlcIiBpbiBwYXJ0cykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEJZWUVBUkRBWSBydWxlXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEJZV0VFS05PIGFuZCBCWU1PTlRIREFZIHJ1bGUgcGFydHMgbWF5IG5vdCBib3RoIGFwcGVhclxuICAgIGlmIChcIkJZV0VFS05PXCIgaW4gcGFydHMgJiYgXCJCWU1PTlRIREFZXCIgaW4gcGFydHMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkJZV0VFS05PIGRvZXMgbm90IGZpdCB0byBCWU1PTlRIREFZXCIpO1xuICAgIH1cblxuICAgIC8vIEZvciBNT05USExZIHJlY3VycmVuY2VzIChGUkVRPU1PTlRITFkpIG5laXRoZXIgQllZRUFSREFZIG5vclxuICAgIC8vIEJZV0VFS05PIG1heSBhcHBlYXIuXG4gICAgaWYgKHRoaXMucnVsZS5mcmVxID09IFwiTU9OVEhMWVwiICYmXG4gICAgICAgIChcIkJZWUVBUkRBWVwiIGluIHBhcnRzIHx8IFwiQllXRUVLTk9cIiBpbiBwYXJ0cykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZvciBNT05USExZIHJlY3VycmVuY2VzIG5laXRoZXIgQllZRUFSREFZIG5vciBCWVdFRUtOTyBtYXkgYXBwZWFyXCIpO1xuICAgIH1cblxuICAgIC8vIEZvciBXRUVLTFkgcmVjdXJyZW5jZXMgKEZSRVE9V0VFS0xZKSBuZWl0aGVyIEJZTU9OVEhEQVkgbm9yXG4gICAgLy8gQllZRUFSREFZIG1heSBhcHBlYXIuXG4gICAgaWYgKHRoaXMucnVsZS5mcmVxID09IFwiV0VFS0xZXCIgJiZcbiAgICAgICAgKFwiQllZRUFSREFZXCIgaW4gcGFydHMgfHwgXCJCWU1PTlRIREFZXCIgaW4gcGFydHMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGb3IgV0VFS0xZIHJlY3VycmVuY2VzIG5laXRoZXIgQllNT05USERBWSBub3IgQllZRUFSREFZIG1heSBhcHBlYXJcIik7XG4gICAgfVxuXG4gICAgLy8gQllZRUFSREFZIG1heSBvbmx5IGFwcGVhciBpbiBZRUFSTFkgcnVsZXNcbiAgICBpZiAodGhpcy5ydWxlLmZyZXEgIT0gXCJZRUFSTFlcIiAmJiBcIkJZWUVBUkRBWVwiIGluIHBhcnRzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCWVlFQVJEQVkgbWF5IG9ubHkgYXBwZWFyIGluIFlFQVJMWSBydWxlc1wiKTtcbiAgICB9XG5cbiAgICB0aGlzLmxhc3Quc2Vjb25kID0gdGhpcy5zZXR1cF9kZWZhdWx0cyhcIkJZU0VDT05EXCIsIFwiU0VDT05ETFlcIiwgdGhpcy5kdHN0YXJ0LnNlY29uZCk7XG4gICAgdGhpcy5sYXN0Lm1pbnV0ZSA9IHRoaXMuc2V0dXBfZGVmYXVsdHMoXCJCWU1JTlVURVwiLCBcIk1JTlVURUxZXCIsIHRoaXMuZHRzdGFydC5taW51dGUpO1xuICAgIHRoaXMubGFzdC5ob3VyID0gdGhpcy5zZXR1cF9kZWZhdWx0cyhcIkJZSE9VUlwiLCBcIkhPVVJMWVwiLCB0aGlzLmR0c3RhcnQuaG91cik7XG4gICAgdGhpcy5sYXN0LmRheSA9IHRoaXMuc2V0dXBfZGVmYXVsdHMoXCJCWU1PTlRIREFZXCIsIFwiREFJTFlcIiwgdGhpcy5kdHN0YXJ0LmRheSk7XG4gICAgdGhpcy5sYXN0Lm1vbnRoID0gdGhpcy5zZXR1cF9kZWZhdWx0cyhcIkJZTU9OVEhcIiwgXCJNT05USExZXCIsIHRoaXMuZHRzdGFydC5tb250aCk7XG5cbiAgICBpZiAodGhpcy5ydWxlLmZyZXEgPT0gXCJXRUVLTFlcIikge1xuICAgICAgaWYgKFwiQllEQVlcIiBpbiBwYXJ0cykge1xuICAgICAgICBsZXQgWywgZG93XSA9IHRoaXMucnVsZURheU9mV2VlayhwYXJ0cy5CWURBWVswXSwgdGhpcy5ydWxlLndrc3QpO1xuICAgICAgICBsZXQgd2tkeSA9IGRvdyAtIHRoaXMubGFzdC5kYXlPZldlZWsodGhpcy5ydWxlLndrc3QpO1xuICAgICAgICBpZiAoKHRoaXMubGFzdC5kYXlPZldlZWsodGhpcy5ydWxlLndrc3QpIDwgZG93ICYmIHdrZHkgPj0gMCkgfHwgd2tkeSA8IDApIHtcbiAgICAgICAgICAvLyBJbml0aWFsIHRpbWUgaXMgYWZ0ZXIgZmlyc3QgZGF5IG9mIEJZREFZIGRhdGFcbiAgICAgICAgICB0aGlzLmxhc3QuZGF5ICs9IHdrZHk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBkYXlOYW1lID0gUmVjdXIubnVtZXJpY0RheVRvSWNhbERheSh0aGlzLmR0c3RhcnQuZGF5T2ZXZWVrKCkpO1xuICAgICAgICBwYXJ0cy5CWURBWSA9IFtkYXlOYW1lXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5ydWxlLmZyZXEgPT0gXCJZRUFSTFlcIikge1xuICAgICAgLy8gU29tZSB5ZWFybHkgcmVjdXJyZW5jZSBydWxlcyBtYXkgYmUgc3BlY2lmaWMgZW5vdWdoIHRvIG5vdCBhY3R1YWxseVxuICAgICAgLy8gb2NjdXIgb24gYSB5ZWFybHkgYmFzaXMsIGUuZy4gdGhlIDI5dGggZGF5IG9mIEZlYnJ1YXJ5IG9yIHRoZSBmaWZ0aFxuICAgICAgLy8gTW9uZGF5IG9mIGEgZ2l2ZW4gbW9udGguIFRoZSBzdGFuZGFyZCBpc24ndCBjbGVhciBvbiB0aGUgaW50ZW5kZWRcbiAgICAgIC8vIGJlaGF2aW9yIGluIHRoZXNlIGNhc2VzLCBidXQgYGxpYmljYWxgIGF0IGxlYXN0IHdpbGwgaXRlcmF0ZSB1bnRpbCBpdFxuICAgICAgLy8gZmluZHMgYSBtYXRjaGluZyB5ZWFyLlxuICAgICAgLy8gQ0FSRUZVTDogU29tZSBydWxlcyBtYXkgc3BlY2lmeSBhbiBvY2N1cnJlbmNlIHRoYXQgY2FuIG5ldmVyIGhhcHBlbixcbiAgICAgIC8vIGUuZy4gdGhlIGZpcnN0IE1vbmRheSBvZiBBcHJpbCBzbyBsb25nIGFzIGl0IGZhbGxzIG9uIHRoZSAxNXRoXG4gICAgICAvLyB0aHJvdWdoIHRoZSAyMXN0LiBEZXRlY3RpbmcgdGhlc2UgaXMgbm9uLXRyaXZpYWwsIHNvIGVuc3VyZSB0aGF0IHdlXG4gICAgICAvLyBzdG9wIGl0ZXJhdGluZyBhdCBzb21lIHBvaW50LlxuICAgICAgY29uc3QgdW50aWxZZWFyID0gdGhpcy5ydWxlLnVudGlsID8gdGhpcy5ydWxlLnVudGlsLnllYXIgOiAyMDAwMDtcbiAgICAgIHdoaWxlICh0aGlzLmxhc3QueWVhciA8PSB1bnRpbFllYXIpIHtcbiAgICAgICAgdGhpcy5leHBhbmRfeWVhcl9kYXlzKHRoaXMubGFzdC55ZWFyKTtcbiAgICAgICAgaWYgKHRoaXMuZGF5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbmNyZW1lbnRfeWVhcih0aGlzLnJ1bGUuaW50ZXJ2YWwpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5kYXlzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkUmVjdXJyZW5jZVJ1bGVFcnJvcigpO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGVyZSdzIG5vIG9jY3VycmVuY2UgaW4gdGhpcyB5ZWFyLCB0cnkgdGhlIGZvbGxvd2luZyB5ZWFycy4gVGhpc1xuICAgICAgLy8gd291bGQgb25seSBoYXBwZW4gbG9va2luZyBmb3IgZGF5IDM2NiBvciAtMzY2LlxuICAgICAgaWYgKCF0aGlzLl9uZXh0QnlZZWFyRGF5KCkgJiYgIXRoaXMubmV4dF95ZWFyKCkgJiYgIXRoaXMubmV4dF95ZWFyKCkgJiYgIXRoaXMubmV4dF95ZWFyKCkpIHtcbiAgICAgICAgLy8gVGhpcyBzaG91bGQgbm90IGJlIHBvc3NpYmxlLCBidXQganVzdCBpbiBjYXNlIGl0IGlzLCBzdG9wLlxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFJlY3VycmVuY2VSdWxlRXJyb3IoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5ydWxlLmZyZXEgPT0gXCJNT05USExZXCIpIHtcbiAgICAgIGlmICh0aGlzLmhhc19ieV9kYXRhKFwiQllEQVlcIikpIHtcbiAgICAgICAgbGV0IHRlbXBMYXN0ID0gbnVsbDtcbiAgICAgICAgbGV0IGluaXRMYXN0ID0gdGhpcy5sYXN0LmNsb25lKCk7XG4gICAgICAgIGxldCBkYXlzSW5Nb250aCA9IFRpbWUuZGF5c0luTW9udGgodGhpcy5sYXN0Lm1vbnRoLCB0aGlzLmxhc3QueWVhcik7XG5cbiAgICAgICAgLy8gQ2hlY2sgZXZlcnkgd2Vla2RheSBpbiBCWURBWSB3aXRoIHJlbGF0aXZlIGRvdyBhbmQgcG9zLlxuICAgICAgICBmb3IgKGxldCBieWRvdyBvZiB0aGlzLmJ5X2RhdGEuQllEQVkpIHtcbiAgICAgICAgICB0aGlzLmxhc3QgPSBpbml0TGFzdC5jbG9uZSgpO1xuICAgICAgICAgIGxldCBbcG9zLCBkb3ddID0gdGhpcy5ydWxlRGF5T2ZXZWVrKGJ5ZG93KTtcbiAgICAgICAgICBsZXQgZGF5T2ZNb250aCA9IHRoaXMubGFzdC5udGhXZWVrRGF5KGRvdywgcG9zKTtcblxuICAgICAgICAgIC8vIElmIHxwb3N8ID49IDYsIHRoZSBieWRheSBpcyBpbnZhbGlkIGZvciBhIG1vbnRobHkgcnVsZS5cbiAgICAgICAgICBpZiAocG9zID49IDYgfHwgcG9zIDw9IC02KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYWxmb3JtZWQgdmFsdWVzIGluIEJZREFZIHBhcnRcIik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSWYgYSBCeWRheSB3aXRoIHBvcz0rLy01IGlzIG5vdCBpbiB0aGUgY3VycmVudCBtb250aCBpdFxuICAgICAgICAgIC8vIG11c3QgYmUgc2VhcmNoZWQgaW4gdGhlIG5leHQgbW9udGhzLlxuICAgICAgICAgIGlmIChkYXlPZk1vbnRoID4gZGF5c0luTW9udGggfHwgZGF5T2ZNb250aCA8PSAwKSB7XG4gICAgICAgICAgICAvLyBTa2lwIGlmIHdlIGhhdmUgYWxyZWFkeSBmb3VuZCBhIFwibGFzdFwiIGluIHRoaXMgbW9udGguXG4gICAgICAgICAgICBpZiAodGVtcExhc3QgJiYgdGVtcExhc3QubW9udGggPT0gaW5pdExhc3QubW9udGgpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoZGF5T2ZNb250aCA+IGRheXNJbk1vbnRoIHx8IGRheU9mTW9udGggPD0gMCkge1xuICAgICAgICAgICAgICB0aGlzLmluY3JlbWVudF9tb250aCgpO1xuICAgICAgICAgICAgICBkYXlzSW5Nb250aCA9IFRpbWUuZGF5c0luTW9udGgodGhpcy5sYXN0Lm1vbnRoLCB0aGlzLmxhc3QueWVhcik7XG4gICAgICAgICAgICAgIGRheU9mTW9udGggPSB0aGlzLmxhc3QubnRoV2Vla0RheShkb3csIHBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5sYXN0LmRheSA9IGRheU9mTW9udGg7XG4gICAgICAgICAgaWYgKCF0ZW1wTGFzdCB8fCB0aGlzLmxhc3QuY29tcGFyZSh0ZW1wTGFzdCkgPCAwKSB7XG4gICAgICAgICAgICB0ZW1wTGFzdCA9IHRoaXMubGFzdC5jbG9uZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3QgPSB0ZW1wTGFzdC5jbG9uZSgpO1xuXG4gICAgICAgIC8vWFhYOiBUaGlzIGZlZWxzIGxpa2UgYSBoYWNrLCBidXQgd2UgbmVlZCB0byBpbml0aWFsaXplXG4gICAgICAgIC8vICAgICB0aGUgQllNT05USERBWSBjYXNlIGNvcnJlY3RseSBhbmQgYnlEYXlBbmRNb250aERheSBoYW5kbGVzXG4gICAgICAgIC8vICAgICB0aGlzIGNhc2UuIEl0IGFjY2VwdHMgYSBzcGVjaWFsIGZsYWcgd2hpY2ggd2lsbCBhdm9pZCBpbmNyZW1lbnRpbmdcbiAgICAgICAgLy8gICAgIHRoZSBpbml0aWFsIHZhbHVlIHdpdGhvdXQgdGhlIGZsYWcgZGF5cyB0aGF0IG1hdGNoIHRoZSBzdGFydCB0aW1lXG4gICAgICAgIC8vICAgICB3b3VsZCBiZSBtaXNzZWQuXG4gICAgICAgIGlmICh0aGlzLmhhc19ieV9kYXRhKCdCWU1PTlRIREFZJykpIHtcbiAgICAgICAgICB0aGlzLl9ieURheUFuZE1vbnRoRGF5KHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubGFzdC5kYXkgPiBkYXlzSW5Nb250aCB8fCB0aGlzLmxhc3QuZGF5ID09IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYWxmb3JtZWQgdmFsdWVzIGluIEJZREFZIHBhcnRcIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5oYXNfYnlfZGF0YShcIkJZTU9OVEhEQVlcIikpIHtcbiAgICAgICAgLy8gQ2hhbmdlIHRoZSBkYXkgdmFsdWUgc28gdGhhdCBub3JtYWxpc2F0aW9uIHdvbid0IGNoYW5nZSB0aGUgbW9udGguXG4gICAgICAgIHRoaXMubGFzdC5kYXkgPSAxO1xuXG4gICAgICAgIC8vIEdldCBhIHNvcnRlZCBsaXN0IG9mIGRheXMgaW4gdGhlIHN0YXJ0aW5nIG1vbnRoIHRoYXQgbWF0Y2ggdGhlIHJ1bGUuXG4gICAgICAgIGxldCBub3JtYWxpemVkID0gdGhpcy5ub3JtYWxpemVCeU1vbnRoRGF5UnVsZXMoXG4gICAgICAgICAgdGhpcy5sYXN0LnllYXIsXG4gICAgICAgICAgdGhpcy5sYXN0Lm1vbnRoLFxuICAgICAgICAgIHRoaXMucnVsZS5wYXJ0cy5CWU1PTlRIREFZXG4gICAgICAgICkuZmlsdGVyKGQgPT4gZCA+PSB0aGlzLmxhc3QuZGF5KTtcblxuICAgICAgICBpZiAobm9ybWFsaXplZC5sZW5ndGgpIHtcbiAgICAgICAgICAvLyBUaGVyZSdzIGF0IGxlYXN0IG9uZSB2YWxpZCBkYXksIHVzZSBpdC5cbiAgICAgICAgICB0aGlzLmxhc3QuZGF5ID0gbm9ybWFsaXplZFswXTtcbiAgICAgICAgICB0aGlzLmJ5X2RhdGEuQllNT05USERBWSA9IG5vcm1hbGl6ZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVGhlcmUncyBubyBvY2N1cnJlbmNlIGluIHRoaXMgbW9udGgsIGZpbmQgdGhlIG5leHQgdmFsaWQgbW9udGguXG4gICAgICAgICAgLy8gVGhlIGxvbmdlc3QgcG9zc2libGUgc2VxdWVuY2Ugb2Ygc2tpcHBlZCBtb250aHMgaXMgRmVicnVhcnktQXByaWwtSnVuZSxcbiAgICAgICAgICAvLyBzbyB3ZSBtaWdodCBuZWVkIHRvIGNhbGwgbmV4dF9tb250aCB1cCB0byB0aHJlZSB0aW1lcy5cbiAgICAgICAgICBpZiAoIXRoaXMubmV4dF9tb250aCgpICYmICF0aGlzLm5leHRfbW9udGgoKSAmJiAhdGhpcy5uZXh0X21vbnRoKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkUmVjdXJyZW5jZVJ1bGVFcnJvcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSB0aGUgbmV4dCBvY2N1cnJlbmNlIGZyb20gdGhlIGl0ZXJhdG9yLlxuICAgKiBAcmV0dXJuIHtUaW1lfVxuICAgKi9cbiAgbmV4dChhZ2FpbiA9IGZhbHNlKSB7XG4gICAgbGV0IGJlZm9yZSA9ICh0aGlzLmxhc3QgPyB0aGlzLmxhc3QuY2xvbmUoKSA6IG51bGwpO1xuXG4gICAgaWYgKCh0aGlzLnJ1bGUuY291bnQgJiYgdGhpcy5vY2N1cnJlbmNlX251bWJlciA+PSB0aGlzLnJ1bGUuY291bnQpIHx8XG4gICAgICAgICh0aGlzLnJ1bGUudW50aWwgJiYgdGhpcy5sYXN0LmNvbXBhcmUodGhpcy5ydWxlLnVudGlsKSA+IDApKSB7XG4gICAgICB0aGlzLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29tcGxldGVkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vY2N1cnJlbmNlX251bWJlciA9PSAwICYmIHRoaXMubGFzdC5jb21wYXJlKHRoaXMuZHRzdGFydCkgPj0gMCkge1xuICAgICAgLy8gRmlyc3Qgb2YgYWxsLCBnaXZlIHRoZSBpbnN0YW5jZSB0aGF0IHdhcyBpbml0aWFsaXplZFxuICAgICAgdGhpcy5vY2N1cnJlbmNlX251bWJlcisrO1xuICAgICAgcmV0dXJuIHRoaXMubGFzdDtcbiAgICB9XG5cbiAgICBsZXQgdmFsaWQ7XG4gICAgbGV0IGludmFsaWRfY291bnQgPSAwO1xuICAgIGRvIHtcbiAgICAgIHZhbGlkID0gMTtcblxuICAgICAgc3dpdGNoICh0aGlzLnJ1bGUuZnJlcSkge1xuICAgICAgY2FzZSBcIlNFQ09ORExZXCI6XG4gICAgICAgIHRoaXMubmV4dF9zZWNvbmQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiTUlOVVRFTFlcIjpcbiAgICAgICAgdGhpcy5uZXh0X21pbnV0ZSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJIT1VSTFlcIjpcbiAgICAgICAgdGhpcy5uZXh0X2hvdXIoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiREFJTFlcIjpcbiAgICAgICAgdGhpcy5uZXh0X2RheSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJXRUVLTFlcIjpcbiAgICAgICAgdGhpcy5uZXh0X3dlZWsoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiTU9OVEhMWVwiOlxuICAgICAgICB2YWxpZCA9IHRoaXMubmV4dF9tb250aCgpO1xuICAgICAgICBpZiAodmFsaWQpIHtcbiAgICAgICAgICBpbnZhbGlkX2NvdW50ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmICgrK2ludmFsaWRfY291bnQgPT0gMzM2KSB7XG4gICAgICAgICAgLy8gV2UndmUgYmVlbiB0aHJvdWdoIGFsbCA5MSBtb250aCB2YXJpYXRpb25zIGFuZCBub3QgZm91bmQgYSByZWN1cnJlbmNlLiBTdG9wLlxuICAgICAgICAgIC8vICgxMiBtb250aHMgYW5kIDI5LWRheSBGZWJydWFyeSDDlyA3IHN0YXJ0aW5nIGRheXMuKVxuICAgICAgICAgIHRoaXMuY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJZRUFSTFlcIjpcbiAgICAgICAgdmFsaWQgPSB0aGlzLm5leHRfeWVhcigpO1xuICAgICAgICBpZiAodmFsaWQpIHtcbiAgICAgICAgICBpbnZhbGlkX2NvdW50ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmICgrK2ludmFsaWRfY291bnQgPT0gMjgpIHtcbiAgICAgICAgICAvLyBXZSd2ZSBiZWVuIHRocm91Z2ggYWxsIDE0IHllYXIgdmFyaWF0aW9ucyBhbmQgbm90IGZvdW5kIGEgcmVjdXJyZW5jZS4gU3RvcC5cbiAgICAgICAgICAvLyAoMzY1LWRheSBhbmQgMzY2LWRheSB5ZWFycyDDlyA3IHN0YXJ0aW5nIGRheXMuKVxuICAgICAgICAgIHRoaXMuY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSB3aGlsZSAoIXRoaXMuY2hlY2tfY29udHJhY3RpbmdfcnVsZXMoKSB8fFxuICAgICAgICAgICAgIHRoaXMubGFzdC5jb21wYXJlKHRoaXMuZHRzdGFydCkgPCAwIHx8XG4gICAgICAgICAgICAgIXZhbGlkKTtcblxuICAgIGlmICh0aGlzLmxhc3QuY29tcGFyZShiZWZvcmUpID09IDApIHtcbiAgICAgIGlmIChhZ2Fpbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTYW1lIG9jY3VycmVuY2UgZm91bmQgdHdpY2UsIHByb3RlY3RpbmcgeW91IGZyb20gZGVhdGggYnkgcmVjdXJzaW9uXCIpO1xuICAgICAgfVxuICAgICAgdGhpcy5uZXh0KHRydWUpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJ1bGUudW50aWwgJiYgdGhpcy5sYXN0LmNvbXBhcmUodGhpcy5ydWxlLnVudGlsKSA+IDApIHtcbiAgICAgIHRoaXMuY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9jY3VycmVuY2VfbnVtYmVyKys7XG4gICAgICByZXR1cm4gdGhpcy5sYXN0O1xuICAgIH1cbiAgfVxuXG4gIG5leHRfc2Vjb25kKCkge1xuICAgIHJldHVybiB0aGlzLm5leHRfZ2VuZXJpYyhcIkJZU0VDT05EXCIsIFwiU0VDT05ETFlcIiwgXCJzZWNvbmRcIiwgXCJtaW51dGVcIik7XG4gIH1cblxuICBpbmNyZW1lbnRfc2Vjb25kKGluYykge1xuICAgIHJldHVybiB0aGlzLmluY3JlbWVudF9nZW5lcmljKGluYywgXCJzZWNvbmRcIiwgNjAsIFwibWludXRlXCIpO1xuICB9XG5cbiAgbmV4dF9taW51dGUoKSB7XG4gICAgcmV0dXJuIHRoaXMubmV4dF9nZW5lcmljKFwiQllNSU5VVEVcIiwgXCJNSU5VVEVMWVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1pbnV0ZVwiLCBcImhvdXJcIiwgXCJuZXh0X3NlY29uZFwiKTtcbiAgfVxuXG4gIGluY3JlbWVudF9taW51dGUoaW5jKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5jcmVtZW50X2dlbmVyaWMoaW5jLCBcIm1pbnV0ZVwiLCA2MCwgXCJob3VyXCIpO1xuICB9XG5cbiAgbmV4dF9ob3VyKCkge1xuICAgIHJldHVybiB0aGlzLm5leHRfZ2VuZXJpYyhcIkJZSE9VUlwiLCBcIkhPVVJMWVwiLCBcImhvdXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtb250aGRheVwiLCBcIm5leHRfbWludXRlXCIpO1xuICB9XG5cbiAgaW5jcmVtZW50X2hvdXIoaW5jKSB7XG4gICAgdGhpcy5pbmNyZW1lbnRfZ2VuZXJpYyhpbmMsIFwiaG91clwiLCAyNCwgXCJtb250aGRheVwiKTtcbiAgfVxuXG4gIG5leHRfZGF5KCkge1xuICAgIGxldCB0aGlzX2ZyZXEgPSAodGhpcy5ydWxlLmZyZXEgPT0gXCJEQUlMWVwiKTtcblxuICAgIGlmICh0aGlzLm5leHRfaG91cigpID09IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGlmICh0aGlzX2ZyZXEpIHtcbiAgICAgIHRoaXMuaW5jcmVtZW50X21vbnRoZGF5KHRoaXMucnVsZS5pbnRlcnZhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaW5jcmVtZW50X21vbnRoZGF5KDEpO1xuICAgIH1cblxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgbmV4dF93ZWVrKCkge1xuICAgIGxldCBlbmRfb2ZfZGF0YSA9IDA7XG5cbiAgICBpZiAodGhpcy5uZXh0X3dlZWtkYXlfYnlfd2VlaygpID09IDApIHtcbiAgICAgIHJldHVybiBlbmRfb2ZfZGF0YTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5oYXNfYnlfZGF0YShcIkJZV0VFS05PXCIpKSB7XG4gICAgICB0aGlzLmJ5X2luZGljZXMuQllXRUVLTk8rKztcblxuICAgICAgaWYgKHRoaXMuYnlfaW5kaWNlcy5CWVdFRUtOTyA9PSB0aGlzLmJ5X2RhdGEuQllXRUVLTk8ubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuYnlfaW5kaWNlcy5CWVdFRUtOTyA9IDA7XG4gICAgICAgIGVuZF9vZl9kYXRhID0gMTtcbiAgICAgIH1cblxuICAgICAgLy8gSEFDSyBzaG91bGQgYmUgZmlyc3QgbW9udGggb2YgdGhlIHllYXJcbiAgICAgIHRoaXMubGFzdC5tb250aCA9IDE7XG4gICAgICB0aGlzLmxhc3QuZGF5ID0gMTtcblxuICAgICAgbGV0IHdlZWtfbm8gPSB0aGlzLmJ5X2RhdGEuQllXRUVLTk9bdGhpcy5ieV9pbmRpY2VzLkJZV0VFS05PXTtcblxuICAgICAgdGhpcy5sYXN0LmRheSArPSA3ICogd2Vla19ubztcblxuICAgICAgaWYgKGVuZF9vZl9kYXRhKSB7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50X3llYXIoMSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEp1bXAgdG8gdGhlIG5leHQgd2Vla1xuICAgICAgdGhpcy5pbmNyZW1lbnRfbW9udGhkYXkoNyAqIHRoaXMucnVsZS5pbnRlcnZhbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVuZF9vZl9kYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZSBlYWNoIGJ5IGRheSBydWxlIGZvciBhIGdpdmVuIHllYXIvbW9udGguXG4gICAqIFRha2VzIGludG8gYWNjb3VudCBvcmRlcmluZyBhbmQgbmVnYXRpdmUgcnVsZXNcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHllYXIgICAgICAgICBDdXJyZW50IHllYXIuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBtb250aCAgICAgICAgQ3VycmVudCBtb250aC5cbiAgICogQHBhcmFtIHtBcnJheX0gIHJ1bGVzICAgICAgICBBcnJheSBvZiBydWxlcy5cbiAgICpcbiAgICogQHJldHVybiB7QXJyYXl9IHNvcnRlZCBhbmQgbm9ybWFsaXplZCBydWxlcy5cbiAgICogICAgICAgICAgICAgICAgIE5lZ2F0aXZlIHJ1bGVzIHdpbGwgYmUgZXhwYW5kZWQgdG8gdGhlaXJcbiAgICogICAgICAgICAgICAgICAgIGNvcnJlY3QgcG9zaXRpdmUgdmFsdWVzIGZvciBlYXNpZXIgcHJvY2Vzc2luZy5cbiAgICovXG4gIG5vcm1hbGl6ZUJ5TW9udGhEYXlSdWxlcyh5ZWFyLCBtb250aCwgcnVsZXMpIHtcbiAgICBsZXQgZGF5c0luTW9udGggPSBUaW1lLmRheXNJbk1vbnRoKG1vbnRoLCB5ZWFyKTtcblxuICAgIC8vIFhYWDogVGhpcyBpcyBwcm9iYWJseSBiYWQgZm9yIHBlcmZvcm1hbmNlIHRvIGFsbG9jYXRlXG4gICAgLy8gICAgICBhIG5ldyBhcnJheSBmb3IgZWFjaCBtb250aCB3ZSBzY2FuLCBpZiBwb3NzaWJsZVxuICAgIC8vICAgICAgd2Ugc2hvdWxkIHRyeSB0byBvcHRpbWl6ZSB0aGlzLi4uXG4gICAgbGV0IG5ld1J1bGVzID0gW107XG5cbiAgICBsZXQgcnVsZUlkeCA9IDA7XG4gICAgbGV0IGxlbiA9IHJ1bGVzLmxlbmd0aDtcbiAgICBsZXQgcnVsZTtcblxuICAgIGZvciAoOyBydWxlSWR4IDwgbGVuOyBydWxlSWR4KyspIHtcbiAgICAgIHJ1bGUgPSBwYXJzZUludChydWxlc1tydWxlSWR4XSwgMTApO1xuICAgICAgaWYgKGlzTmFOKHJ1bGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBCWU1PTlRIREFZIHZhbHVlJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIHRoaXMgcnVsZSBmYWxscyBvdXRzaWRlIG9mIGdpdmVuXG4gICAgICAvLyBtb250aCBkaXNjYXJkIGl0LlxuICAgICAgaWYgKE1hdGguYWJzKHJ1bGUpID4gZGF5c0luTW9udGgpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIG5lZ2F0aXZlIGNhc2VcbiAgICAgIGlmIChydWxlIDwgMCkge1xuICAgICAgICAvLyB3ZSBhZGQgKG5vdCBzdWJ0cmFjdCBpdCBpcyBhIG5lZ2F0aXZlIG51bWJlcilcbiAgICAgICAgLy8gb25lIGZyb20gdGhlIHJ1bGUgYmVjYXVzZSAxID09PSBsYXN0IGRheSBvZiBtb250aFxuICAgICAgICBydWxlID0gZGF5c0luTW9udGggKyAocnVsZSArIDEpO1xuICAgICAgfSBlbHNlIGlmIChydWxlID09PSAwKSB7XG4gICAgICAgIC8vIHNraXAgemVybzogaXQgaXMgaW52YWxpZC5cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIG9ubHkgYWRkIHVuaXF1ZSBpdGVtcy4uLlxuICAgICAgaWYgKG5ld1J1bGVzLmluZGV4T2YocnVsZSkgPT09IC0xKSB7XG4gICAgICAgIG5ld1J1bGVzLnB1c2gocnVsZSk7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICAvLyB1bmlxdWUgYW5kIHNvcnRcbiAgICByZXR1cm4gbmV3UnVsZXMuc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhIC0gYjsgfSk7XG4gIH1cblxuICAvKipcbiAgICogTk9URVM6XG4gICAqIFdlIGFyZSBnaXZlbiBhIGxpc3Qgb2YgZGF0ZXMgaW4gdGhlIG1vbnRoIChCWU1PTlRIREFZKSAoMjMsIGV0Yy4uKVxuICAgKiBBbHNvIHdlIGFyZSBnaXZlbiBhIGxpc3Qgb2YgZGF5cyAoQllEQVkpIChNTywgMlNVLCBldGMuLikgd2hlblxuICAgKiBib3RoIGNvbmRpdGlvbnMgbWF0Y2ggYSBnaXZlbiBkYXRlICh0aGlzLmxhc3QuZGF5KSBpdGVyYXRpb24gc3RvcHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Qm9vbGVhbj19IGlzSW5pdCAgICAgV2hlbiBnaXZlbiB0cnVlIHdpbGwgbm90IGluY3JlbWVudCB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgZGF5ICh0aGlzLmxhc3QpLlxuICAgKi9cbiAgX2J5RGF5QW5kTW9udGhEYXkoaXNJbml0KSB7XG4gICAgbGV0IGJ5TW9udGhEYXk7IC8vIHNldHVwIGluIGluaXRNb250aFxuICAgIGxldCBieURheSA9IHRoaXMuYnlfZGF0YS5CWURBWTtcblxuICAgIGxldCBkYXRlO1xuICAgIGxldCBkYXRlSWR4ID0gMDtcbiAgICBsZXQgZGF0ZUxlbjsgLy8gc2V0dXAgaW4gaW5pdE1vbnRoXG4gICAgbGV0IGRheUxlbiA9IGJ5RGF5Lmxlbmd0aDtcblxuICAgIC8vIHdlIGFyZSBub3QgdmFsaWQgYnkgZGVmYXVsdFxuICAgIGxldCBkYXRhSXNWYWxpZCA9IDA7XG5cbiAgICBsZXQgZGF5c0luTW9udGg7XG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgIC8vIHdlIG5lZWQgYSBjb3B5IG9mIHRoaXMsIGJlY2F1c2UgYSBEYXRlVGltZSBnZXRzIG5vcm1hbGl6ZWRcbiAgICAvLyBhdXRvbWF0aWNhbGx5IGlmIHRoZSBkYXkgaXMgb3V0IG9mIHJhbmdlLiBBdCBzb21lIHBvaW50cyB3ZVxuICAgIC8vIHNldCB0aGUgbGFzdCBkYXkgdG8gMCB0byBzdGFydCBjb3VudGluZy5cbiAgICBsZXQgbGFzdERheSA9IHRoaXMubGFzdC5kYXk7XG5cbiAgICBmdW5jdGlvbiBpbml0TW9udGgoKSB7XG4gICAgICBkYXlzSW5Nb250aCA9IFRpbWUuZGF5c0luTW9udGgoXG4gICAgICAgIHNlbGYubGFzdC5tb250aCwgc2VsZi5sYXN0LnllYXJcbiAgICAgICk7XG5cbiAgICAgIGJ5TW9udGhEYXkgPSBzZWxmLm5vcm1hbGl6ZUJ5TW9udGhEYXlSdWxlcyhcbiAgICAgICAgc2VsZi5sYXN0LnllYXIsXG4gICAgICAgIHNlbGYubGFzdC5tb250aCxcbiAgICAgICAgc2VsZi5ieV9kYXRhLkJZTU9OVEhEQVlcbiAgICAgICk7XG5cbiAgICAgIGRhdGVMZW4gPSBieU1vbnRoRGF5Lmxlbmd0aDtcblxuICAgICAgLy8gRm9yIHRoZSBjYXNlIG9mIG1vcmUgdGhhbiBvbmUgb2NjdXJyZW5jZSBpbiBvbmUgbW9udGhcbiAgICAgIC8vIHdlIGhhdmUgdG8gYmUgc3VyZSB0byBzdGFydCBzZWFyY2hpbmcgYWZ0ZXIgdGhlIGxhc3RcbiAgICAgIC8vIGZvdW5kIGRhdGUgb3IgYXQgdGhlIGxhc3QgQllNT05USERBWSwgdW5sZXNzIHdlIGFyZVxuICAgICAgLy8gaW5pdGlhbGl6aW5nIHRoZSBpdGVyYXRvciBiZWNhdXNlIGluIHRoaXMgY2FzZSB3ZSBoYXZlXG4gICAgICAvLyB0byBjb25zaWRlciB0aGUgbGFzdCBmb3VuZCBkYXRlIHRvby5cbiAgICAgIHdoaWxlIChieU1vbnRoRGF5W2RhdGVJZHhdIDw9IGxhc3REYXkgJiZcbiAgICAgICAgICAgICAhKGlzSW5pdCAmJiBieU1vbnRoRGF5W2RhdGVJZHhdID09IGxhc3REYXkpICYmXG4gICAgICAgICAgICAgZGF0ZUlkeCA8IGRhdGVMZW4gLSAxKSB7XG4gICAgICAgIGRhdGVJZHgrKztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBuZXh0TW9udGgoKSB7XG4gICAgICAvLyBzaW5jZSB0aGUgZGF5IGlzIGluY3JlbWVudGVkIGF0IHRoZSBzdGFydFxuICAgICAgLy8gb2YgdGhlIGxvb3AgYmVsb3csIHdlIG5lZWQgdG8gc3RhcnQgYXQgMFxuICAgICAgbGFzdERheSA9IDA7XG4gICAgICBzZWxmLmluY3JlbWVudF9tb250aCgpO1xuICAgICAgZGF0ZUlkeCA9IDA7XG4gICAgICBpbml0TW9udGgoKTtcbiAgICB9XG5cbiAgICBpbml0TW9udGgoKTtcblxuICAgIC8vIHNob3VsZCBjb21lIGFmdGVyIGluaXRNb250aFxuICAgIGlmIChpc0luaXQpIHtcbiAgICAgIGxhc3REYXkgLT0gMTtcbiAgICB9XG5cbiAgICAvLyBVc2UgYSBjb3VudGVyIHRvIGF2b2lkIGFuIGluZmluaXRlIGxvb3Agd2l0aCBtYWxmb3JtZWQgcnVsZXMuXG4gICAgLy8gU3RvcCBjaGVja2luZyBhZnRlciA0IHllYXJzIHNvIHdlIGNvbnNpZGVyIGFsc28gYSBsZWFwIHllYXIuXG4gICAgbGV0IG1vbnRoc0NvdW50ZXIgPSA0ODtcblxuICAgIHdoaWxlICghZGF0YUlzVmFsaWQgJiYgbW9udGhzQ291bnRlcikge1xuICAgICAgbW9udGhzQ291bnRlci0tO1xuICAgICAgLy8gaW5jcmVtZW50IHRoZSBjdXJyZW50IGRhdGUuIFRoaXMgaXMgcmVhbGx5XG4gICAgICAvLyBpbXBvcnRhbnQgb3RoZXJ3aXNlIHdlIG1heSBmYWxsIGludG8gdGhlIGluZmluaXRlXG4gICAgICAvLyBsb29wIHRyYXAuIFRoZSBpbml0aWFsIGRhdGUgdGFrZXMgY2FyZSBvZiB0aGUgY2FzZVxuICAgICAgLy8gd2hlcmUgdGhlIGN1cnJlbnQgZGF0ZSBpcyB0aGUgZGF0ZSB3ZSBhcmUgbG9va2luZ1xuICAgICAgLy8gZm9yLlxuICAgICAgZGF0ZSA9IGxhc3REYXkgKyAxO1xuXG4gICAgICBpZiAoZGF0ZSA+IGRheXNJbk1vbnRoKSB7XG4gICAgICAgIG5leHRNb250aCgpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gZmluZCBuZXh0IGRhdGVcbiAgICAgIGxldCBuZXh0ID0gYnlNb250aERheVtkYXRlSWR4KytdO1xuXG4gICAgICAvLyB0aGlzIGxvZ2ljIGlzIGRlcGVuZGVudCBvbiB0aGUgQllNT05USERBWVNcbiAgICAgIC8vIGJlaW5nIGluIG9yZGVyICh3aGljaCBpcyBkb25lIGJ5ICNub3JtYWxpemVCeU1vbnRoRGF5UnVsZXMpXG4gICAgICBpZiAobmV4dCA+PSBkYXRlKSB7XG4gICAgICAgIC8vIGlmIHRoZSBuZXh0IG1vbnRoIGRheSBpcyBpbiB0aGUgZnV0dXJlIGp1bXAgdG8gaXQuXG4gICAgICAgIGxhc3REYXkgPSBuZXh0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaW4gdGhpcyBjYXNlIHRoZSAnbmV4dCcgbW9udGhkYXkgaGFzIHBhc3RcbiAgICAgICAgLy8gd2UgbXVzdCBtb3ZlIHRvIHRoZSBtb250aC5cbiAgICAgICAgbmV4dE1vbnRoKCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBOb3cgd2UgY2FuIGxvb3AgdGhyb3VnaCB0aGUgZGF5IHJ1bGVzIHRvIHNlZVxuICAgICAgLy8gaWYgb25lIG1hdGNoZXMgdGhlIGN1cnJlbnQgbW9udGggZGF0ZS5cbiAgICAgIGZvciAobGV0IGRheUlkeCA9IDA7IGRheUlkeCA8IGRheUxlbjsgZGF5SWR4KyspIHtcbiAgICAgICAgbGV0IHBhcnRzID0gdGhpcy5ydWxlRGF5T2ZXZWVrKGJ5RGF5W2RheUlkeF0pO1xuICAgICAgICBsZXQgcG9zID0gcGFydHNbMF07XG4gICAgICAgIGxldCBkb3cgPSBwYXJ0c1sxXTtcblxuICAgICAgICB0aGlzLmxhc3QuZGF5ID0gbGFzdERheTtcbiAgICAgICAgaWYgKHRoaXMubGFzdC5pc050aFdlZWtEYXkoZG93LCBwb3MpKSB7XG4gICAgICAgICAgLy8gd2hlbiB3ZSBmaW5kIHRoZSB2YWxpZCBvbmUgd2UgY2FuIG1hcmtcbiAgICAgICAgICAvLyB0aGUgY29uZGl0aW9ucyBhcyBtZXQgYW5kIGJyZWFrIHRoZSBsb29wLlxuICAgICAgICAgIC8vIChCZWNhdXNlIHdlIGhhdmUgdGhpcyBjb25kaXRpb24gYWJvdmVcbiAgICAgICAgICAvLyAgaXQgd2lsbCBhbHNvIGJyZWFrIHRoZSBwYXJlbnQgbG9vcCkuXG4gICAgICAgICAgZGF0YUlzVmFsaWQgPSAxO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEl0IGlzIGNvbXBsZXRlbHkgcG9zc2libGUgdGhhdCB0aGUgY29tYmluYXRpb25cbiAgICAgIC8vIGNhbm5vdCBiZSBtYXRjaGVkIGluIHRoZSBjdXJyZW50IG1vbnRoLlxuICAgICAgLy8gV2hlbiB3ZSByZWFjaCB0aGUgZW5kIG9mIHBvc3NpYmxlIGNvbWJpbmF0aW9uc1xuICAgICAgLy8gaW4gdGhlIGN1cnJlbnQgbW9udGggd2UgaXRlcmF0ZSB0byB0aGUgbmV4dCBvbmUuXG4gICAgICAvLyBzaW5jZSBkYXRlSWR4IGlzIGluY3JlbWVudGVkIHJpZ2h0IGFmdGVyIGdldHRpbmdcbiAgICAgIC8vIFwibmV4dFwiLCB3ZSBkb24ndCBuZWVkIGRhdGVMZW4gLTEgaGVyZS5cbiAgICAgIGlmICghZGF0YUlzVmFsaWQgJiYgZGF0ZUlkeCA9PT0gZGF0ZUxlbikge1xuICAgICAgICBuZXh0TW9udGgoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1vbnRoc0NvdW50ZXIgPD0gMCkge1xuICAgICAgLy8gQ2hlY2tlZCA0IHllYXJzIHdpdGhvdXQgZmluZGluZyBhIEJ5ZGF5IHRoYXQgbWF0Y2hlc1xuICAgICAgLy8gYSBCeW1vbnRoZGF5LiBNYXliZSB0aGUgcnVsZSBpcyBub3QgY29ycmVjdC5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk1hbGZvcm1lZCB2YWx1ZXMgaW4gQllEQVkgY29tYmluZWQgd2l0aCBCWU1PTlRIREFZIHBhcnRzXCIpO1xuICAgIH1cblxuXG4gICAgcmV0dXJuIGRhdGFJc1ZhbGlkO1xuICB9XG5cbiAgbmV4dF9tb250aCgpIHtcbiAgICBsZXQgZGF0YV92YWxpZCA9IDE7XG5cbiAgICBpZiAodGhpcy5uZXh0X2hvdXIoKSA9PSAwKSB7XG4gICAgICByZXR1cm4gZGF0YV92YWxpZDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5oYXNfYnlfZGF0YShcIkJZREFZXCIpICYmIHRoaXMuaGFzX2J5X2RhdGEoXCJCWU1PTlRIREFZXCIpKSB7XG4gICAgICBkYXRhX3ZhbGlkID0gdGhpcy5fYnlEYXlBbmRNb250aERheSgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5oYXNfYnlfZGF0YShcIkJZREFZXCIpKSB7XG4gICAgICBsZXQgZGF5c0luTW9udGggPSBUaW1lLmRheXNJbk1vbnRoKHRoaXMubGFzdC5tb250aCwgdGhpcy5sYXN0LnllYXIpO1xuICAgICAgbGV0IHNldHBvcyA9IDA7XG4gICAgICBsZXQgc2V0cG9zX3RvdGFsID0gMDtcblxuICAgICAgaWYgKHRoaXMuaGFzX2J5X2RhdGEoXCJCWVNFVFBPU1wiKSkge1xuICAgICAgICBsZXQgbGFzdF9kYXkgPSB0aGlzLmxhc3QuZGF5O1xuICAgICAgICBmb3IgKGxldCBkYXkgPSAxOyBkYXkgPD0gZGF5c0luTW9udGg7IGRheSsrKSB7XG4gICAgICAgICAgdGhpcy5sYXN0LmRheSA9IGRheTtcbiAgICAgICAgICBpZiAodGhpcy5pc19kYXlfaW5fYnlkYXkodGhpcy5sYXN0KSkge1xuICAgICAgICAgICAgc2V0cG9zX3RvdGFsKys7XG4gICAgICAgICAgICBpZiAoZGF5IDw9IGxhc3RfZGF5KSB7XG4gICAgICAgICAgICAgIHNldHBvcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3QuZGF5ID0gbGFzdF9kYXk7XG4gICAgICB9XG5cbiAgICAgIGRhdGFfdmFsaWQgPSAwO1xuICAgICAgbGV0IGRheTtcbiAgICAgIGZvciAoZGF5ID0gdGhpcy5sYXN0LmRheSArIDE7IGRheSA8PSBkYXlzSW5Nb250aDsgZGF5KyspIHtcbiAgICAgICAgdGhpcy5sYXN0LmRheSA9IGRheTtcblxuICAgICAgICBpZiAodGhpcy5pc19kYXlfaW5fYnlkYXkodGhpcy5sYXN0KSkge1xuICAgICAgICAgIGlmICghdGhpcy5oYXNfYnlfZGF0YShcIkJZU0VUUE9TXCIpIHx8XG4gICAgICAgICAgICAgIHRoaXMuY2hlY2tfc2V0X3Bvc2l0aW9uKCsrc2V0cG9zKSB8fFxuICAgICAgICAgICAgICB0aGlzLmNoZWNrX3NldF9wb3NpdGlvbihzZXRwb3MgLSBzZXRwb3NfdG90YWwgLSAxKSkge1xuXG4gICAgICAgICAgICBkYXRhX3ZhbGlkID0gMTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZGF5ID4gZGF5c0luTW9udGgpIHtcbiAgICAgICAgdGhpcy5sYXN0LmRheSA9IDE7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50X21vbnRoKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNfZGF5X2luX2J5ZGF5KHRoaXMubGFzdCkpIHtcbiAgICAgICAgICBpZiAoIXRoaXMuaGFzX2J5X2RhdGEoXCJCWVNFVFBPU1wiKSB8fCB0aGlzLmNoZWNrX3NldF9wb3NpdGlvbigxKSkge1xuICAgICAgICAgICAgZGF0YV92YWxpZCA9IDE7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGFfdmFsaWQgPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmhhc19ieV9kYXRhKFwiQllNT05USERBWVwiKSkge1xuICAgICAgdGhpcy5ieV9pbmRpY2VzLkJZTU9OVEhEQVkrKztcblxuICAgICAgaWYgKHRoaXMuYnlfaW5kaWNlcy5CWU1PTlRIREFZID49IHRoaXMuYnlfZGF0YS5CWU1PTlRIREFZLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmJ5X2luZGljZXMuQllNT05USERBWSA9IDA7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50X21vbnRoKCk7XG4gICAgICAgIGlmICh0aGlzLmJ5X2luZGljZXMuQllNT05USERBWSA+PSB0aGlzLmJ5X2RhdGEuQllNT05USERBWS5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsZXQgZGF5c0luTW9udGggPSBUaW1lLmRheXNJbk1vbnRoKHRoaXMubGFzdC5tb250aCwgdGhpcy5sYXN0LnllYXIpO1xuICAgICAgbGV0IGRheSA9IHRoaXMuYnlfZGF0YS5CWU1PTlRIREFZW3RoaXMuYnlfaW5kaWNlcy5CWU1PTlRIREFZXTtcblxuICAgICAgaWYgKGRheSA8IDApIHtcbiAgICAgICAgZGF5ID0gZGF5c0luTW9udGggKyBkYXkgKyAxO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGF5ID4gZGF5c0luTW9udGgpIHtcbiAgICAgICAgdGhpcy5sYXN0LmRheSA9IDE7XG4gICAgICAgIGRhdGFfdmFsaWQgPSB0aGlzLmlzX2RheV9pbl9ieWRheSh0aGlzLmxhc3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sYXN0LmRheSA9IGRheTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pbmNyZW1lbnRfbW9udGgoKTtcbiAgICAgIGxldCBkYXlzSW5Nb250aCA9IFRpbWUuZGF5c0luTW9udGgodGhpcy5sYXN0Lm1vbnRoLCB0aGlzLmxhc3QueWVhcik7XG4gICAgICBpZiAodGhpcy5ieV9kYXRhLkJZTU9OVEhEQVlbMF0gPiBkYXlzSW5Nb250aCkge1xuICAgICAgICBkYXRhX3ZhbGlkID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubGFzdC5kYXkgPSB0aGlzLmJ5X2RhdGEuQllNT05USERBWVswXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YV92YWxpZDtcbiAgfVxuXG4gIG5leHRfd2Vla2RheV9ieV93ZWVrKCkge1xuICAgIGxldCBlbmRfb2ZfZGF0YSA9IDA7XG5cbiAgICBpZiAodGhpcy5uZXh0X2hvdXIoKSA9PSAwKSB7XG4gICAgICByZXR1cm4gZW5kX29mX2RhdGE7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmhhc19ieV9kYXRhKFwiQllEQVlcIikpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cblxuICAgIGZvciAoOzspIHtcbiAgICAgIGxldCB0dCA9IG5ldyBUaW1lKCk7XG4gICAgICB0aGlzLmJ5X2luZGljZXMuQllEQVkrKztcblxuICAgICAgaWYgKHRoaXMuYnlfaW5kaWNlcy5CWURBWSA9PSBPYmplY3Qua2V5cyh0aGlzLmJ5X2RhdGEuQllEQVkpLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmJ5X2luZGljZXMuQllEQVkgPSAwO1xuICAgICAgICBlbmRfb2ZfZGF0YSA9IDE7XG4gICAgICB9XG5cbiAgICAgIGxldCBjb2RlZF9kYXkgPSB0aGlzLmJ5X2RhdGEuQllEQVlbdGhpcy5ieV9pbmRpY2VzLkJZREFZXTtcbiAgICAgIGxldCBwYXJ0cyA9IHRoaXMucnVsZURheU9mV2Vlayhjb2RlZF9kYXkpO1xuICAgICAgbGV0IGRvdyA9IHBhcnRzWzFdO1xuXG4gICAgICBkb3cgLT0gdGhpcy5ydWxlLndrc3Q7XG5cbiAgICAgIGlmIChkb3cgPCAwKSB7XG4gICAgICAgIGRvdyArPSA3O1xuICAgICAgfVxuXG4gICAgICB0dC55ZWFyID0gdGhpcy5sYXN0LnllYXI7XG4gICAgICB0dC5tb250aCA9IHRoaXMubGFzdC5tb250aDtcbiAgICAgIHR0LmRheSA9IHRoaXMubGFzdC5kYXk7XG5cbiAgICAgIGxldCBzdGFydE9mV2VlayA9IHR0LnN0YXJ0RG95V2Vlayh0aGlzLnJ1bGUud2tzdCk7XG5cbiAgICAgIGlmIChkb3cgKyBzdGFydE9mV2VlayA8IDEpIHtcbiAgICAgICAgLy8gVGhlIHNlbGVjdGVkIGRhdGUgaXMgaW4gdGhlIHByZXZpb3VzIHllYXJcbiAgICAgICAgaWYgKCFlbmRfb2ZfZGF0YSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCBuZXh0ID0gVGltZS5mcm9tRGF5T2ZZZWFyKHN0YXJ0T2ZXZWVrICsgZG93LCB0aGlzLmxhc3QueWVhcik7XG5cbiAgICAgIC8qKlxuICAgICAgICogVGhlIG5vcm1hbGl6YXRpb24gaG9ycm9ycyBiZWxvdyBhcmUgZHVlIHRvXG4gICAgICAgKiB0aGUgZmFjdCB0aGF0IHdoZW4gdGhlIHllYXIvbW9udGgvZGF5IGNoYW5nZXNcbiAgICAgICAqIGl0IGNhbiBlZmZlY3QgdGhlIG90aGVyIG9wZXJhdGlvbnMgdGhhdCBjb21lIGFmdGVyLlxuICAgICAgICovXG4gICAgICB0aGlzLmxhc3QueWVhciA9IG5leHQueWVhcjtcbiAgICAgIHRoaXMubGFzdC5tb250aCA9IG5leHQubW9udGg7XG4gICAgICB0aGlzLmxhc3QuZGF5ID0gbmV4dC5kYXk7XG5cbiAgICAgIHJldHVybiBlbmRfb2ZfZGF0YTtcbiAgICB9XG4gIH1cblxuICBuZXh0X3llYXIoKSB7XG4gICAgaWYgKHRoaXMubmV4dF9ob3VyKCkgPT0gMCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF5cy5sZW5ndGggPT0gMCB8fCArK3RoaXMuZGF5c19pbmRleCA9PSB0aGlzLmRheXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLmRheXNfaW5kZXggPSAwO1xuICAgICAgdGhpcy5pbmNyZW1lbnRfeWVhcih0aGlzLnJ1bGUuaW50ZXJ2YWwpO1xuICAgICAgaWYgKHRoaXMuaGFzX2J5X2RhdGEoXCJCWU1PTlRIREFZXCIpKSB7XG4gICAgICAgIHRoaXMuYnlfZGF0YS5CWU1PTlRIREFZID0gdGhpcy5ub3JtYWxpemVCeU1vbnRoRGF5UnVsZXMoXG4gICAgICAgICAgdGhpcy5sYXN0LnllYXIsXG4gICAgICAgICAgdGhpcy5sYXN0Lm1vbnRoLFxuICAgICAgICAgIHRoaXMucnVsZS5wYXJ0cy5CWU1PTlRIREFZXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aGlzLmV4cGFuZF95ZWFyX2RheXModGhpcy5sYXN0LnllYXIpO1xuICAgICAgaWYgKHRoaXMuZGF5cy5sZW5ndGggPT0gMCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fbmV4dEJ5WWVhckRheSgpO1xuICB9XG5cbiAgX25leHRCeVllYXJEYXkoKSB7XG4gICAgbGV0IGRveSA9IHRoaXMuZGF5c1t0aGlzLmRheXNfaW5kZXhdO1xuICAgIGxldCB5ZWFyID0gdGhpcy5sYXN0LnllYXI7XG5cbiAgICBpZiAoTWF0aC5hYnMoZG95KSA9PSAzNjYgJiYgIVRpbWUuaXNMZWFwWWVhcih0aGlzLmxhc3QueWVhcikpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGlmIChkb3kgPCAxKSB7XG4gICAgICAgIC8vIFRpbWUuZnJvbURheU9mWWVhcihkb3ksIHllYXIpIGluZGV4ZXMgcmVsYXRpdmUgdG8gdGhlXG4gICAgICAgIC8vIHN0YXJ0IG9mIHRoZSBnaXZlbiB5ZWFyLiBUaGF0IGlzIGRpZmZlcmVudCBmcm9tIHRoZVxuICAgICAgICAvLyBzZW1hbnRpY3Mgb2YgQllZRUFSREFZIHdoZXJlIG5lZ2F0aXZlIGluZGV4ZXMgYXJlIGFuXG4gICAgICAgIC8vIG9mZnNldCBmcm9tIHRoZSBlbmQgb2YgdGhlIGdpdmVuIHllYXIuXG4gICAgICAgIGRveSArPSAxO1xuICAgICAgICB5ZWFyICs9IDE7XG4gICAgfVxuICAgIGxldCBuZXh0ID0gVGltZS5mcm9tRGF5T2ZZZWFyKGRveSwgeWVhcik7XG4gICAgdGhpcy5sYXN0LmRheSA9IG5leHQuZGF5O1xuICAgIHRoaXMubGFzdC5tb250aCA9IG5leHQubW9udGg7XG5cbiAgICByZXR1cm4gMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0gZG93IChlZzogJzFUVScsICctMU1PJylcbiAgICogQHBhcmFtIHt3ZWVrRGF5PX0gYVdlZWtTdGFydCBUaGUgd2VlayBzdGFydCB3ZWVrZGF5XG4gICAqIEByZXR1cm4gW3BvcywgbnVtZXJpY0Rvd10gKGVnOiBbMSwgM10pIG51bWVyaWNEb3cgaXMgcmVsYXRpdmUgdG8gYVdlZWtTdGFydFxuICAgKi9cbiAgcnVsZURheU9mV2Vlayhkb3csIGFXZWVrU3RhcnQpIHtcbiAgICBsZXQgbWF0Y2hlcyA9IGRvdy5tYXRjaCgvKFsrLV0/WzAtOV0pPyhNT3xUVXxXRXxUSHxGUnxTQXxTVSkvKTtcbiAgICBpZiAobWF0Y2hlcykge1xuICAgICAgbGV0IHBvcyA9IHBhcnNlSW50KG1hdGNoZXNbMV0gfHwgMCwgMTApO1xuICAgICAgZG93ID0gUmVjdXIuaWNhbERheVRvTnVtZXJpY0RheShtYXRjaGVzWzJdLCBhV2Vla1N0YXJ0KTtcbiAgICAgIHJldHVybiBbcG9zLCBkb3ddO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gWzAsIDBdO1xuICAgIH1cbiAgfVxuXG4gIG5leHRfZ2VuZXJpYyhhUnVsZVR5cGUsIGFJbnRlcnZhbCwgYURhdGVBdHRyLCBhRm9sbG93aW5nQXR0ciwgYVByZXZpb3VzSW5jcikge1xuICAgIGxldCBoYXNfYnlfcnVsZSA9IChhUnVsZVR5cGUgaW4gdGhpcy5ieV9kYXRhKTtcbiAgICBsZXQgdGhpc19mcmVxID0gKHRoaXMucnVsZS5mcmVxID09IGFJbnRlcnZhbCk7XG4gICAgbGV0IGVuZF9vZl9kYXRhID0gMDtcblxuICAgIGlmIChhUHJldmlvdXNJbmNyICYmIHRoaXNbYVByZXZpb3VzSW5jcl0oKSA9PSAwKSB7XG4gICAgICByZXR1cm4gZW5kX29mX2RhdGE7XG4gICAgfVxuXG4gICAgaWYgKGhhc19ieV9ydWxlKSB7XG4gICAgICB0aGlzLmJ5X2luZGljZXNbYVJ1bGVUeXBlXSsrO1xuICAgICAgbGV0IGR0YSA9IHRoaXMuYnlfZGF0YVthUnVsZVR5cGVdO1xuXG4gICAgICBpZiAodGhpcy5ieV9pbmRpY2VzW2FSdWxlVHlwZV0gPT0gZHRhLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmJ5X2luZGljZXNbYVJ1bGVUeXBlXSA9IDA7XG4gICAgICAgIGVuZF9vZl9kYXRhID0gMTtcbiAgICAgIH1cbiAgICAgIHRoaXMubGFzdFthRGF0ZUF0dHJdID0gZHRhW3RoaXMuYnlfaW5kaWNlc1thUnVsZVR5cGVdXTtcbiAgICB9IGVsc2UgaWYgKHRoaXNfZnJlcSkge1xuICAgICAgdGhpc1tcImluY3JlbWVudF9cIiArIGFEYXRlQXR0cl0odGhpcy5ydWxlLmludGVydmFsKTtcbiAgICB9XG5cbiAgICBpZiAoaGFzX2J5X3J1bGUgJiYgZW5kX29mX2RhdGEgJiYgdGhpc19mcmVxKSB7XG4gICAgICB0aGlzW1wiaW5jcmVtZW50X1wiICsgYUZvbGxvd2luZ0F0dHJdKDEpO1xuICAgIH1cblxuICAgIHJldHVybiBlbmRfb2ZfZGF0YTtcbiAgfVxuXG4gIGluY3JlbWVudF9tb250aGRheShpbmMpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluYzsgaSsrKSB7XG4gICAgICBsZXQgZGF5c0luTW9udGggPSBUaW1lLmRheXNJbk1vbnRoKHRoaXMubGFzdC5tb250aCwgdGhpcy5sYXN0LnllYXIpO1xuICAgICAgdGhpcy5sYXN0LmRheSsrO1xuXG4gICAgICBpZiAodGhpcy5sYXN0LmRheSA+IGRheXNJbk1vbnRoKSB7XG4gICAgICAgIHRoaXMubGFzdC5kYXkgLT0gZGF5c0luTW9udGg7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50X21vbnRoKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaW5jcmVtZW50X21vbnRoKCkge1xuICAgIHRoaXMubGFzdC5kYXkgPSAxO1xuICAgIGlmICh0aGlzLmhhc19ieV9kYXRhKFwiQllNT05USFwiKSkge1xuICAgICAgdGhpcy5ieV9pbmRpY2VzLkJZTU9OVEgrKztcblxuICAgICAgaWYgKHRoaXMuYnlfaW5kaWNlcy5CWU1PTlRIID09IHRoaXMuYnlfZGF0YS5CWU1PTlRILmxlbmd0aCkge1xuICAgICAgICB0aGlzLmJ5X2luZGljZXMuQllNT05USCA9IDA7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50X3llYXIoMSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMubGFzdC5tb250aCA9IHRoaXMuYnlfZGF0YS5CWU1PTlRIW3RoaXMuYnlfaW5kaWNlcy5CWU1PTlRIXTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMucnVsZS5mcmVxID09IFwiTU9OVEhMWVwiKSB7XG4gICAgICAgIHRoaXMubGFzdC5tb250aCArPSB0aGlzLnJ1bGUuaW50ZXJ2YWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxhc3QubW9udGgrKztcbiAgICAgIH1cblxuICAgICAgdGhpcy5sYXN0Lm1vbnRoLS07XG4gICAgICBsZXQgeWVhcnMgPSB0cnVuYyh0aGlzLmxhc3QubW9udGggLyAxMik7XG4gICAgICB0aGlzLmxhc3QubW9udGggJT0gMTI7XG4gICAgICB0aGlzLmxhc3QubW9udGgrKztcblxuICAgICAgaWYgKHllYXJzICE9IDApIHtcbiAgICAgICAgdGhpcy5pbmNyZW1lbnRfeWVhcih5ZWFycyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaGFzX2J5X2RhdGEoXCJCWU1PTlRIREFZXCIpKSB7XG4gICAgICB0aGlzLmJ5X2RhdGEuQllNT05USERBWSA9IHRoaXMubm9ybWFsaXplQnlNb250aERheVJ1bGVzKFxuICAgICAgICB0aGlzLmxhc3QueWVhcixcbiAgICAgICAgdGhpcy5sYXN0Lm1vbnRoLFxuICAgICAgICB0aGlzLnJ1bGUucGFydHMuQllNT05USERBWVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBpbmNyZW1lbnRfeWVhcihpbmMpIHtcbiAgICAvLyBEb24ndCBqdW1wIGludG8gdGhlIG5leHQgbW9udGggaWYgdGhpcy5sYXN0IGlzIEZlYiAyOS5cbiAgICB0aGlzLmxhc3QuZGF5ID0gMTtcbiAgICB0aGlzLmxhc3QueWVhciArPSBpbmM7XG4gIH1cblxuICBpbmNyZW1lbnRfZ2VuZXJpYyhpbmMsIGFEYXRlQXR0ciwgYUZhY3RvciwgYU5leHRJbmNyZW1lbnQpIHtcbiAgICB0aGlzLmxhc3RbYURhdGVBdHRyXSArPSBpbmM7XG4gICAgbGV0IG5leHR1bml0ID0gdHJ1bmModGhpcy5sYXN0W2FEYXRlQXR0cl0gLyBhRmFjdG9yKTtcbiAgICB0aGlzLmxhc3RbYURhdGVBdHRyXSAlPSBhRmFjdG9yO1xuICAgIGlmIChuZXh0dW5pdCAhPSAwKSB7XG4gICAgICB0aGlzW1wiaW5jcmVtZW50X1wiICsgYU5leHRJbmNyZW1lbnRdKG5leHR1bml0KTtcbiAgICB9XG4gIH1cblxuICBoYXNfYnlfZGF0YShhUnVsZVR5cGUpIHtcbiAgICByZXR1cm4gKGFSdWxlVHlwZSBpbiB0aGlzLnJ1bGUucGFydHMpO1xuICB9XG5cbiAgZXhwYW5kX3llYXJfZGF5cyhhWWVhcikge1xuICAgIGxldCB0ID0gbmV3IFRpbWUoKTtcbiAgICB0aGlzLmRheXMgPSBbXTtcblxuICAgIC8vIFdlIG5lZWQgb3VyIG93biBjb3B5IHdpdGggYSBmZXcga2V5cyBzZXRcbiAgICBsZXQgcGFydHMgPSB7fTtcbiAgICBsZXQgcnVsZXMgPSBbXCJCWURBWVwiLCBcIkJZV0VFS05PXCIsIFwiQllNT05USERBWVwiLCBcIkJZTU9OVEhcIiwgXCJCWVlFQVJEQVlcIl07XG4gICAgZm9yIChsZXQgcGFydCBvZiBydWxlcykge1xuICAgICAgaWYgKHBhcnQgaW4gdGhpcy5ydWxlLnBhcnRzKSB7XG4gICAgICAgIHBhcnRzW3BhcnRdID0gdGhpcy5ydWxlLnBhcnRzW3BhcnRdO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChcIkJZTU9OVEhcIiBpbiBwYXJ0cyAmJiBcIkJZV0VFS05PXCIgaW4gcGFydHMpIHtcbiAgICAgIGxldCB2YWxpZCA9IDE7XG4gICAgICBsZXQgdmFsaWRXZWVrcyA9IHt9O1xuICAgICAgdC55ZWFyID0gYVllYXI7XG4gICAgICB0LmlzRGF0ZSA9IHRydWU7XG5cbiAgICAgIGZvciAobGV0IG1vbnRoSWR4ID0gMDsgbW9udGhJZHggPCB0aGlzLmJ5X2RhdGEuQllNT05USC5sZW5ndGg7IG1vbnRoSWR4KyspIHtcbiAgICAgICAgbGV0IG1vbnRoID0gdGhpcy5ieV9kYXRhLkJZTU9OVEhbbW9udGhJZHhdO1xuICAgICAgICB0Lm1vbnRoID0gbW9udGg7XG4gICAgICAgIHQuZGF5ID0gMTtcbiAgICAgICAgbGV0IGZpcnN0X3dlZWsgPSB0LndlZWtOdW1iZXIodGhpcy5ydWxlLndrc3QpO1xuICAgICAgICB0LmRheSA9IFRpbWUuZGF5c0luTW9udGgobW9udGgsIGFZZWFyKTtcbiAgICAgICAgbGV0IGxhc3Rfd2VlayA9IHQud2Vla051bWJlcih0aGlzLnJ1bGUud2tzdCk7XG4gICAgICAgIGZvciAobW9udGhJZHggPSBmaXJzdF93ZWVrOyBtb250aElkeCA8IGxhc3Rfd2VlazsgbW9udGhJZHgrKykge1xuICAgICAgICAgIHZhbGlkV2Vla3NbbW9udGhJZHhdID0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCB3ZWVrSWR4ID0gMDsgd2Vla0lkeCA8IHRoaXMuYnlfZGF0YS5CWVdFRUtOTy5sZW5ndGggJiYgdmFsaWQ7IHdlZWtJZHgrKykge1xuICAgICAgICBsZXQgd2Vla25vID0gdGhpcy5ieV9kYXRhLkJZV0VFS05PW3dlZWtJZHhdO1xuICAgICAgICBpZiAod2Vla25vIDwgNTIpIHtcbiAgICAgICAgICB2YWxpZCAmPSB2YWxpZFdlZWtzW3dlZWtJZHhdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbGlkID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodmFsaWQpIHtcbiAgICAgICAgZGVsZXRlIHBhcnRzLkJZTU9OVEg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWxldGUgcGFydHMuQllXRUVLTk87XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHBhcnRDb3VudCA9IE9iamVjdC5rZXlzKHBhcnRzKS5sZW5ndGg7XG5cbiAgICBpZiAocGFydENvdW50ID09IDApIHtcbiAgICAgIGxldCB0MSA9IHRoaXMuZHRzdGFydC5jbG9uZSgpO1xuICAgICAgdDEueWVhciA9IHRoaXMubGFzdC55ZWFyO1xuICAgICAgdGhpcy5kYXlzLnB1c2godDEuZGF5T2ZZZWFyKCkpO1xuICAgIH0gZWxzZSBpZiAocGFydENvdW50ID09IDEgJiYgXCJCWU1PTlRIXCIgaW4gcGFydHMpIHtcbiAgICAgIGZvciAobGV0IG1vbnRoIG9mIHRoaXMuYnlfZGF0YS5CWU1PTlRIKSB7XG4gICAgICAgIGxldCB0MiA9IHRoaXMuZHRzdGFydC5jbG9uZSgpO1xuICAgICAgICB0Mi55ZWFyID0gYVllYXI7XG4gICAgICAgIHQyLm1vbnRoID0gbW9udGg7XG4gICAgICAgIHQyLmlzRGF0ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuZGF5cy5wdXNoKHQyLmRheU9mWWVhcigpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAxICYmIFwiQllNT05USERBWVwiIGluIHBhcnRzKSB7XG4gICAgICBmb3IgKGxldCBtb250aGRheSBvZiB0aGlzLmJ5X2RhdGEuQllNT05USERBWSkge1xuICAgICAgICBsZXQgdDMgPSB0aGlzLmR0c3RhcnQuY2xvbmUoKTtcbiAgICAgICAgaWYgKG1vbnRoZGF5IDwgMCkge1xuICAgICAgICAgIGxldCBkYXlzSW5Nb250aCA9IFRpbWUuZGF5c0luTW9udGgodDMubW9udGgsIGFZZWFyKTtcbiAgICAgICAgICBtb250aGRheSA9IG1vbnRoZGF5ICsgZGF5c0luTW9udGggKyAxO1xuICAgICAgICB9XG4gICAgICAgIHQzLmRheSA9IG1vbnRoZGF5O1xuICAgICAgICB0My55ZWFyID0gYVllYXI7XG4gICAgICAgIHQzLmlzRGF0ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuZGF5cy5wdXNoKHQzLmRheU9mWWVhcigpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAyICYmXG4gICAgICAgICAgICAgICBcIkJZTU9OVEhEQVlcIiBpbiBwYXJ0cyAmJlxuICAgICAgICAgICAgICAgXCJCWU1PTlRIXCIgaW4gcGFydHMpIHtcbiAgICAgIGZvciAobGV0IG1vbnRoIG9mIHRoaXMuYnlfZGF0YS5CWU1PTlRIKSB7XG4gICAgICAgIGxldCBkYXlzSW5Nb250aCA9IFRpbWUuZGF5c0luTW9udGgobW9udGgsIGFZZWFyKTtcbiAgICAgICAgZm9yIChsZXQgbW9udGhkYXkgb2YgdGhpcy5ieV9kYXRhLkJZTU9OVEhEQVkpIHtcbiAgICAgICAgICBpZiAobW9udGhkYXkgPCAwKSB7XG4gICAgICAgICAgICBtb250aGRheSA9IG1vbnRoZGF5ICsgZGF5c0luTW9udGggKyAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0LmRheSA9IG1vbnRoZGF5O1xuICAgICAgICAgIHQubW9udGggPSBtb250aDtcbiAgICAgICAgICB0LnllYXIgPSBhWWVhcjtcbiAgICAgICAgICB0LmlzRGF0ZSA9IHRydWU7XG5cbiAgICAgICAgICB0aGlzLmRheXMucHVzaCh0LmRheU9mWWVhcigpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocGFydENvdW50ID09IDEgJiYgXCJCWVdFRUtOT1wiIGluIHBhcnRzKSA7IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAyICYmXG4gICAgICAgICAgICAgICBcIkJZV0VFS05PXCIgaW4gcGFydHMgJiZcbiAgICAgICAgICAgICAgIFwiQllNT05USERBWVwiIGluIHBhcnRzKSA7IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAxICYmIFwiQllEQVlcIiBpbiBwYXJ0cykge1xuICAgICAgdGhpcy5kYXlzID0gdGhpcy5kYXlzLmNvbmNhdCh0aGlzLmV4cGFuZF9ieV9kYXkoYVllYXIpKTtcbiAgICB9IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAyICYmIFwiQllEQVlcIiBpbiBwYXJ0cyAmJiBcIkJZTU9OVEhcIiBpbiBwYXJ0cykge1xuICAgICAgZm9yIChsZXQgbW9udGggb2YgdGhpcy5ieV9kYXRhLkJZTU9OVEgpIHtcbiAgICAgICAgbGV0IGRheXNJbk1vbnRoID0gVGltZS5kYXlzSW5Nb250aChtb250aCwgYVllYXIpO1xuXG4gICAgICAgIHQueWVhciA9IGFZZWFyO1xuICAgICAgICB0Lm1vbnRoID0gbW9udGg7XG4gICAgICAgIHQuZGF5ID0gMTtcbiAgICAgICAgdC5pc0RhdGUgPSB0cnVlO1xuXG4gICAgICAgIGxldCBmaXJzdF9kb3cgPSB0LmRheU9mV2VlaygpO1xuICAgICAgICBsZXQgZG95X29mZnNldCA9IHQuZGF5T2ZZZWFyKCkgLSAxO1xuXG4gICAgICAgIHQuZGF5ID0gZGF5c0luTW9udGg7XG4gICAgICAgIGxldCBsYXN0X2RvdyA9IHQuZGF5T2ZXZWVrKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuaGFzX2J5X2RhdGEoXCJCWVNFVFBPU1wiKSkge1xuICAgICAgICAgIGxldCBieV9tb250aF9kYXkgPSBbXTtcbiAgICAgICAgICBmb3IgKGxldCBkYXkgPSAxOyBkYXkgPD0gZGF5c0luTW9udGg7IGRheSsrKSB7XG4gICAgICAgICAgICB0LmRheSA9IGRheTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzX2RheV9pbl9ieWRheSh0KSkge1xuICAgICAgICAgICAgICBieV9tb250aF9kYXkucHVzaChkYXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvciAobGV0IHNwSW5kZXggPSAwOyBzcEluZGV4IDwgYnlfbW9udGhfZGF5Lmxlbmd0aDsgc3BJbmRleCsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja19zZXRfcG9zaXRpb24oc3BJbmRleCArIDEpIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja19zZXRfcG9zaXRpb24oc3BJbmRleCAtIGJ5X21vbnRoX2RheS5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgIHRoaXMuZGF5cy5wdXNoKGRveV9vZmZzZXQgKyBieV9tb250aF9kYXlbc3BJbmRleF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3IgKGxldCBjb2RlZF9kYXkgb2YgdGhpcy5ieV9kYXRhLkJZREFZKSB7XG4gICAgICAgICAgICBsZXQgYnlkYXlQYXJ0cyA9IHRoaXMucnVsZURheU9mV2Vlayhjb2RlZF9kYXkpO1xuICAgICAgICAgICAgbGV0IHBvcyA9IGJ5ZGF5UGFydHNbMF07XG4gICAgICAgICAgICBsZXQgZG93ID0gYnlkYXlQYXJ0c1sxXTtcbiAgICAgICAgICAgIGxldCBtb250aF9kYXk7XG5cbiAgICAgICAgICAgIGxldCBmaXJzdF9tYXRjaGluZ19kYXkgPSAoKGRvdyArIDcgLSBmaXJzdF9kb3cpICUgNykgKyAxO1xuICAgICAgICAgICAgbGV0IGxhc3RfbWF0Y2hpbmdfZGF5ID0gZGF5c0luTW9udGggLSAoKGxhc3RfZG93ICsgNyAtIGRvdykgJSA3KTtcblxuICAgICAgICAgICAgaWYgKHBvcyA9PSAwKSB7XG4gICAgICAgICAgICAgIGZvciAobGV0IGRheSA9IGZpcnN0X21hdGNoaW5nX2RheTsgZGF5IDw9IGRheXNJbk1vbnRoOyBkYXkgKz0gNykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF5cy5wdXNoKGRveV9vZmZzZXQgKyBkYXkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBvcyA+IDApIHtcbiAgICAgICAgICAgICAgbW9udGhfZGF5ID0gZmlyc3RfbWF0Y2hpbmdfZGF5ICsgKHBvcyAtIDEpICogNztcblxuICAgICAgICAgICAgICBpZiAobW9udGhfZGF5IDw9IGRheXNJbk1vbnRoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXlzLnB1c2goZG95X29mZnNldCArIG1vbnRoX2RheSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG1vbnRoX2RheSA9IGxhc3RfbWF0Y2hpbmdfZGF5ICsgKHBvcyArIDEpICogNztcblxuICAgICAgICAgICAgICBpZiAobW9udGhfZGF5ID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF5cy5wdXNoKGRveV9vZmZzZXQgKyBtb250aF9kYXkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBSZXR1cm4gZGF0ZXMgaW4gb3JkZXIgb2Ygb2NjdXJyZW5jZSAoMSwyLDMsLi4uKSBpbnN0ZWFkXG4gICAgICAvLyBvZiBieSBncm91cHMgb2Ygd2Vla2RheXMgKDEsOCwxNSwuLi4sMiw5LDE2LC4uLikuXG4gICAgICB0aGlzLmRheXMuc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhIC0gYjsgfSk7IC8vIENvbXBhcmF0b3IgZnVuY3Rpb24gYWxsb3dzIHRvIHNvcnQgbnVtYmVycy5cbiAgICB9IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAyICYmIFwiQllEQVlcIiBpbiBwYXJ0cyAmJiBcIkJZTU9OVEhEQVlcIiBpbiBwYXJ0cykge1xuICAgICAgbGV0IGV4cGFuZGVkRGF5cyA9IHRoaXMuZXhwYW5kX2J5X2RheShhWWVhcik7XG5cbiAgICAgIGZvciAobGV0IGRheSBvZiBleHBhbmRlZERheXMpIHtcbiAgICAgICAgbGV0IHR0ID0gVGltZS5mcm9tRGF5T2ZZZWFyKGRheSwgYVllYXIpO1xuICAgICAgICBpZiAodGhpcy5ieV9kYXRhLkJZTU9OVEhEQVkuaW5kZXhPZih0dC5kYXkpID49IDApIHtcbiAgICAgICAgICB0aGlzLmRheXMucHVzaChkYXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChwYXJ0Q291bnQgPT0gMyAmJlxuICAgICAgICAgICAgICAgXCJCWURBWVwiIGluIHBhcnRzICYmXG4gICAgICAgICAgICAgICBcIkJZTU9OVEhEQVlcIiBpbiBwYXJ0cyAmJlxuICAgICAgICAgICAgICAgXCJCWU1PTlRIXCIgaW4gcGFydHMpIHtcbiAgICAgIGxldCBleHBhbmRlZERheXMgPSB0aGlzLmV4cGFuZF9ieV9kYXkoYVllYXIpO1xuXG4gICAgICBmb3IgKGxldCBkYXkgb2YgZXhwYW5kZWREYXlzKSB7XG4gICAgICAgIGxldCB0dCA9IFRpbWUuZnJvbURheU9mWWVhcihkYXksIGFZZWFyKTtcblxuICAgICAgICBpZiAodGhpcy5ieV9kYXRhLkJZTU9OVEguaW5kZXhPZih0dC5tb250aCkgPj0gMCAmJlxuICAgICAgICAgICAgdGhpcy5ieV9kYXRhLkJZTU9OVEhEQVkuaW5kZXhPZih0dC5kYXkpID49IDApIHtcbiAgICAgICAgICB0aGlzLmRheXMucHVzaChkYXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChwYXJ0Q291bnQgPT0gMiAmJiBcIkJZREFZXCIgaW4gcGFydHMgJiYgXCJCWVdFRUtOT1wiIGluIHBhcnRzKSB7XG4gICAgICBsZXQgZXhwYW5kZWREYXlzID0gdGhpcy5leHBhbmRfYnlfZGF5KGFZZWFyKTtcblxuICAgICAgZm9yIChsZXQgZGF5IG9mIGV4cGFuZGVkRGF5cykge1xuICAgICAgICBsZXQgdHQgPSBUaW1lLmZyb21EYXlPZlllYXIoZGF5LCBhWWVhcik7XG4gICAgICAgIGxldCB3ZWVrbm8gPSB0dC53ZWVrTnVtYmVyKHRoaXMucnVsZS53a3N0KTtcblxuICAgICAgICBpZiAodGhpcy5ieV9kYXRhLkJZV0VFS05PLmluZGV4T2Yod2Vla25vKSkge1xuICAgICAgICAgIHRoaXMuZGF5cy5wdXNoKGRheSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAzICYmXG4gICAgICAgICAgICAgICBcIkJZREFZXCIgaW4gcGFydHMgJiZcbiAgICAgICAgICAgICAgIFwiQllXRUVLTk9cIiBpbiBwYXJ0cyAmJlxuICAgICAgICAgICAgICAgXCJCWU1PTlRIREFZXCIgaW4gcGFydHMpIDsgZWxzZSBpZiAocGFydENvdW50ID09IDEgJiYgXCJCWVlFQVJEQVlcIiBpbiBwYXJ0cykge1xuICAgICAgdGhpcy5kYXlzID0gdGhpcy5kYXlzLmNvbmNhdCh0aGlzLmJ5X2RhdGEuQllZRUFSREFZKTtcbiAgICB9IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAyICYmIFwiQllZRUFSREFZXCIgaW4gcGFydHMgJiYgXCJCWURBWVwiIGluIHBhcnRzKSB7XG4gICAgICBsZXQgZGF5c0luWWVhciA9IFRpbWUuaXNMZWFwWWVhcihhWWVhcikgPyAzNjYgOiAzNjU7XG4gICAgICBsZXQgZXhwYW5kZWREYXlzID0gbmV3IFNldCh0aGlzLmV4cGFuZF9ieV9kYXkoYVllYXIpKTtcblxuICAgICAgZm9yIChsZXQgZG95IG9mIHRoaXMuYnlfZGF0YS5CWVlFQVJEQVkpIHtcbiAgICAgICAgaWYgKGRveSA8IDApIHtcbiAgICAgICAgICBkb3kgKz0gZGF5c0luWWVhciArIDE7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXhwYW5kZWREYXlzLmhhcyhkb3kpKSB7XG4gICAgICAgICAgdGhpcy5kYXlzLnB1c2goZG95KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRheXMgPSBbXTtcbiAgICB9XG5cbiAgICBsZXQgZGF5c0luWWVhciA9IFRpbWUuaXNMZWFwWWVhcihhWWVhcikgPyAzNjYgOiAzNjU7XG4gICAgdGhpcy5kYXlzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGlmIChhIDwgMCkgYSArPSBkYXlzSW5ZZWFyICsgMTtcbiAgICAgIGlmIChiIDwgMCkgYiArPSBkYXlzSW5ZZWFyICsgMTtcbiAgICAgIHJldHVybiBhIC0gYjtcbiAgICB9KTtcblxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgZXhwYW5kX2J5X2RheShhWWVhcikge1xuXG4gICAgbGV0IGRheXNfbGlzdCA9IFtdO1xuICAgIGxldCB0bXAgPSB0aGlzLmxhc3QuY2xvbmUoKTtcblxuICAgIHRtcC55ZWFyID0gYVllYXI7XG4gICAgdG1wLm1vbnRoID0gMTtcbiAgICB0bXAuZGF5ID0gMTtcbiAgICB0bXAuaXNEYXRlID0gdHJ1ZTtcblxuICAgIGxldCBzdGFydF9kb3cgPSB0bXAuZGF5T2ZXZWVrKCk7XG5cbiAgICB0bXAubW9udGggPSAxMjtcbiAgICB0bXAuZGF5ID0gMzE7XG4gICAgdG1wLmlzRGF0ZSA9IHRydWU7XG5cbiAgICBsZXQgZW5kX2RvdyA9IHRtcC5kYXlPZldlZWsoKTtcbiAgICBsZXQgZW5kX3llYXJfZGF5ID0gdG1wLmRheU9mWWVhcigpO1xuXG4gICAgZm9yIChsZXQgZGF5IG9mIHRoaXMuYnlfZGF0YS5CWURBWSkge1xuICAgICAgbGV0IHBhcnRzID0gdGhpcy5ydWxlRGF5T2ZXZWVrKGRheSk7XG4gICAgICBsZXQgcG9zID0gcGFydHNbMF07XG4gICAgICBsZXQgZG93ID0gcGFydHNbMV07XG5cbiAgICAgIGlmIChwb3MgPT0gMCkge1xuICAgICAgICBsZXQgdG1wX3N0YXJ0X2RveSA9ICgoZG93ICsgNyAtIHN0YXJ0X2RvdykgJSA3KSArIDE7XG5cbiAgICAgICAgZm9yIChsZXQgZG95ID0gdG1wX3N0YXJ0X2RveTsgZG95IDw9IGVuZF95ZWFyX2RheTsgZG95ICs9IDcpIHtcbiAgICAgICAgICBkYXlzX2xpc3QucHVzaChkb3kpO1xuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSBpZiAocG9zID4gMCkge1xuICAgICAgICBsZXQgZmlyc3Q7XG4gICAgICAgIGlmIChkb3cgPj0gc3RhcnRfZG93KSB7XG4gICAgICAgICAgZmlyc3QgPSBkb3cgLSBzdGFydF9kb3cgKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpcnN0ID0gZG93IC0gc3RhcnRfZG93ICsgODtcbiAgICAgICAgfVxuXG4gICAgICAgIGRheXNfbGlzdC5wdXNoKGZpcnN0ICsgKHBvcyAtIDEpICogNyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgbGFzdDtcbiAgICAgICAgcG9zID0gLXBvcztcblxuICAgICAgICBpZiAoZG93IDw9IGVuZF9kb3cpIHtcbiAgICAgICAgICBsYXN0ID0gZW5kX3llYXJfZGF5IC0gZW5kX2RvdyArIGRvdztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYXN0ID0gZW5kX3llYXJfZGF5IC0gZW5kX2RvdyArIGRvdyAtIDc7XG4gICAgICAgIH1cblxuICAgICAgICBkYXlzX2xpc3QucHVzaChsYXN0IC0gKHBvcyAtIDEpICogNyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkYXlzX2xpc3Q7XG4gIH1cblxuICBpc19kYXlfaW5fYnlkYXkodHQpIHtcbiAgICBpZiAodGhpcy5ieV9kYXRhLkJZREFZKSB7XG4gICAgICBmb3IgKGxldCBkYXkgb2YgdGhpcy5ieV9kYXRhLkJZREFZKSB7XG4gICAgICAgIGxldCBwYXJ0cyA9IHRoaXMucnVsZURheU9mV2VlayhkYXkpO1xuICAgICAgICBsZXQgcG9zID0gcGFydHNbMF07XG4gICAgICAgIGxldCBkb3cgPSBwYXJ0c1sxXTtcbiAgICAgICAgbGV0IHRoaXNfZG93ID0gdHQuZGF5T2ZXZWVrKCk7XG5cbiAgICAgICAgaWYgKChwb3MgPT0gMCAmJiBkb3cgPT0gdGhpc19kb3cpIHx8XG4gICAgICAgICAgICAodHQubnRoV2Vla0RheShkb3csIHBvcykgPT0gdHQuZGF5KSkge1xuICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGdpdmVuIHZhbHVlIGlzIGluIEJZU0VUUE9TLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge051bWVyaWN9IGFQb3MgcG9zaXRpb24gdG8gY2hlY2sgZm9yLlxuICAgKiBAcmV0dXJuIHtCb29sZWFufSBmYWxzZSB1bmxlc3MgQllTRVRQT1MgcnVsZXMgZXhpc3RcbiAgICogICAgICAgICAgICAgICAgICAgYW5kIHRoZSBnaXZlbiB2YWx1ZSBpcyBwcmVzZW50IGluIHJ1bGVzLlxuICAgKi9cbiAgY2hlY2tfc2V0X3Bvc2l0aW9uKGFQb3MpIHtcbiAgICBpZiAodGhpcy5oYXNfYnlfZGF0YSgnQllTRVRQT1MnKSkge1xuICAgICAgbGV0IGlkeCA9IHRoaXMuYnlfZGF0YS5CWVNFVFBPUy5pbmRleE9mKGFQb3MpO1xuICAgICAgLy8gbmVnYXRpdmUgbnVtYmVycyBhcmUgbm90IGZhbHNlLXlcbiAgICAgIHJldHVybiBpZHggIT09IC0xO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzb3J0X2J5ZGF5X3J1bGVzKGFSdWxlcykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYVJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGk7IGorKykge1xuICAgICAgICBsZXQgb25lID0gdGhpcy5ydWxlRGF5T2ZXZWVrKGFSdWxlc1tqXSwgdGhpcy5ydWxlLndrc3QpWzFdO1xuICAgICAgICBsZXQgdHdvID0gdGhpcy5ydWxlRGF5T2ZXZWVrKGFSdWxlc1tpXSwgdGhpcy5ydWxlLndrc3QpWzFdO1xuXG4gICAgICAgIGlmIChvbmUgPiB0d28pIHtcbiAgICAgICAgICBsZXQgdG1wID0gYVJ1bGVzW2ldO1xuICAgICAgICAgIGFSdWxlc1tpXSA9IGFSdWxlc1tqXTtcbiAgICAgICAgICBhUnVsZXNbal0gPSB0bXA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjaGVja19jb250cmFjdF9yZXN0cmljdGlvbihhUnVsZVR5cGUsIHYpIHtcbiAgICBsZXQgaW5kZXhNYXBWYWx1ZSA9IFJlY3VySXRlcmF0b3IuX2luZGV4TWFwW2FSdWxlVHlwZV07XG4gICAgbGV0IHJ1bGVNYXBWYWx1ZSA9IFJlY3VySXRlcmF0b3IuX2V4cGFuZE1hcFt0aGlzLnJ1bGUuZnJlcV1baW5kZXhNYXBWYWx1ZV07XG4gICAgbGV0IHBhc3MgPSBmYWxzZTtcblxuICAgIGlmIChhUnVsZVR5cGUgaW4gdGhpcy5ieV9kYXRhICYmXG4gICAgICAgIHJ1bGVNYXBWYWx1ZSA9PSBSZWN1ckl0ZXJhdG9yLkNPTlRSQUNUKSB7XG5cbiAgICAgIGxldCBydWxlVHlwZSA9IHRoaXMuYnlfZGF0YVthUnVsZVR5cGVdO1xuXG4gICAgICBmb3IgKGxldCBieWRhdGEgb2YgcnVsZVR5cGUpIHtcbiAgICAgICAgaWYgKGJ5ZGF0YSA9PSB2KSB7XG4gICAgICAgICAgcGFzcyA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm90IGEgY29udHJhY3RpbmcgYnlydWxlIG9yIGhhcyBubyBkYXRhLCB0ZXN0IHBhc3Nlc1xuICAgICAgcGFzcyA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBwYXNzO1xuICB9XG5cbiAgY2hlY2tfY29udHJhY3RpbmdfcnVsZXMoKSB7XG4gICAgbGV0IGRvdyA9IHRoaXMubGFzdC5kYXlPZldlZWsoKTtcbiAgICBsZXQgd2Vla05vID0gdGhpcy5sYXN0LndlZWtOdW1iZXIodGhpcy5ydWxlLndrc3QpO1xuICAgIGxldCBkb3kgPSB0aGlzLmxhc3QuZGF5T2ZZZWFyKCk7XG5cbiAgICByZXR1cm4gKHRoaXMuY2hlY2tfY29udHJhY3RfcmVzdHJpY3Rpb24oXCJCWVNFQ09ORFwiLCB0aGlzLmxhc3Quc2Vjb25kKSAmJlxuICAgICAgICAgICAgdGhpcy5jaGVja19jb250cmFjdF9yZXN0cmljdGlvbihcIkJZTUlOVVRFXCIsIHRoaXMubGFzdC5taW51dGUpICYmXG4gICAgICAgICAgICB0aGlzLmNoZWNrX2NvbnRyYWN0X3Jlc3RyaWN0aW9uKFwiQllIT1VSXCIsIHRoaXMubGFzdC5ob3VyKSAmJlxuICAgICAgICAgICAgdGhpcy5jaGVja19jb250cmFjdF9yZXN0cmljdGlvbihcIkJZREFZXCIsIFJlY3VyLm51bWVyaWNEYXlUb0ljYWxEYXkoZG93KSkgJiZcbiAgICAgICAgICAgIHRoaXMuY2hlY2tfY29udHJhY3RfcmVzdHJpY3Rpb24oXCJCWVdFRUtOT1wiLCB3ZWVrTm8pICYmXG4gICAgICAgICAgICB0aGlzLmNoZWNrX2NvbnRyYWN0X3Jlc3RyaWN0aW9uKFwiQllNT05USERBWVwiLCB0aGlzLmxhc3QuZGF5KSAmJlxuICAgICAgICAgICAgdGhpcy5jaGVja19jb250cmFjdF9yZXN0cmljdGlvbihcIkJZTU9OVEhcIiwgdGhpcy5sYXN0Lm1vbnRoKSAmJlxuICAgICAgICAgICAgdGhpcy5jaGVja19jb250cmFjdF9yZXN0cmljdGlvbihcIkJZWUVBUkRBWVwiLCBkb3kpKTtcbiAgfVxuXG4gIHNldHVwX2RlZmF1bHRzKGFSdWxlVHlwZSwgcmVxLCBkZWZ0aW1lKSB7XG4gICAgbGV0IGluZGV4TWFwVmFsdWUgPSBSZWN1ckl0ZXJhdG9yLl9pbmRleE1hcFthUnVsZVR5cGVdO1xuICAgIGxldCBydWxlTWFwVmFsdWUgPSBSZWN1ckl0ZXJhdG9yLl9leHBhbmRNYXBbdGhpcy5ydWxlLmZyZXFdW2luZGV4TWFwVmFsdWVdO1xuXG4gICAgaWYgKHJ1bGVNYXBWYWx1ZSAhPSBSZWN1ckl0ZXJhdG9yLkNPTlRSQUNUKSB7XG4gICAgICBpZiAoIShhUnVsZVR5cGUgaW4gdGhpcy5ieV9kYXRhKSkge1xuICAgICAgICB0aGlzLmJ5X2RhdGFbYVJ1bGVUeXBlXSA9IFtkZWZ0aW1lXTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnJ1bGUuZnJlcSAhPSByZXEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnlfZGF0YVthUnVsZVR5cGVdWzBdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGVmdGltZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGl0ZXJhdG9yIGludG8gYSBzZXJpYWxpemUtYWJsZSBvYmplY3QuICBXaWxsIHByZXNlcnZlIGN1cnJlbnRcbiAgICogaXRlcmF0aW9uIHNlcXVlbmNlIHRvIGVuc3VyZSB0aGUgc2VhbWxlc3MgY29udGludWF0aW9uIG9mIHRoZSByZWN1cnJlbmNlXG4gICAqIHJ1bGUuXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICBsZXQgcmVzdWx0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIHJlc3VsdC5pbml0aWFsaXplZCA9IHRoaXMuaW5pdGlhbGl6ZWQ7XG4gICAgcmVzdWx0LnJ1bGUgPSB0aGlzLnJ1bGUudG9KU09OKCk7XG4gICAgcmVzdWx0LmR0c3RhcnQgPSB0aGlzLmR0c3RhcnQudG9KU09OKCk7XG4gICAgcmVzdWx0LmJ5X2RhdGEgPSB0aGlzLmJ5X2RhdGE7XG4gICAgcmVzdWx0LmRheXMgPSB0aGlzLmRheXM7XG4gICAgcmVzdWx0Lmxhc3QgPSB0aGlzLmxhc3QudG9KU09OKCk7XG4gICAgcmVzdWx0LmJ5X2luZGljZXMgPSB0aGlzLmJ5X2luZGljZXM7XG4gICAgcmVzdWx0Lm9jY3VycmVuY2VfbnVtYmVyID0gdGhpcy5vY2N1cnJlbmNlX251bWJlcjtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn1cblxuLyoqXG4gKiBBbiBlcnJvciBpbmRpY2F0aW5nIHRoYXQgYSByZWN1cnJlbmNlIHJ1bGUgaXMgaW52YWxpZCBhbmQgcHJvZHVjZXMgbm9cbiAqIG9jY3VycmVuY2VzLlxuICpcbiAqIEBleHRlbmRzIHtFcnJvcn1cbiAqIEBjbGFzc1xuICovXG5jbGFzcyBJbnZhbGlkUmVjdXJyZW5jZVJ1bGVFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoXCJSZWN1cnJlbmNlIHJ1bGUgaGFzIG5vIHZhbGlkIG9jY3VycmVuY2VzXCIpO1xuICB9XG59XG5cbi8qIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKiBQb3J0aW9ucyBDb3B5cmlnaHQgKEMpIFBoaWxpcHAgS2V3aXNjaCAqL1xuXG5cbi8qKlxuICogVGhpcyBsZXRzIHR5cGVzY3JpcHQgcmVzb2x2ZSBvdXIgY3VzdG9tIHR5cGVzIGluIHRoZVxuICogZ2VuZXJhdGVkIGQudHMgZmlsZXMgKGpzZG9jIHR5cGVkZWZzIGFyZSBjb252ZXJ0ZWQgdG8gdHlwZXNjcmlwdCB0eXBlcykuXG4gKiBJZ25vcmUgcHJldmVudHMgdGhlIHR5cGVkZWZzIGZyb20gYmVpbmcgZG9jdW1lbnRlZCBtb3JlIHRoYW4gb25jZS5cbiAqXG4gKiBAaWdub3JlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS53ZWVrRGF5fSB3ZWVrRGF5XG4gKiBJbXBvcnRzIHRoZSAnd2Vla0RheScgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS5mcmVxdWVuY3lWYWx1ZXN9IGZyZXF1ZW5jeVZhbHVlc1xuICogSW1wb3J0cyB0aGUgJ2ZyZXF1ZW5jeVZhbHVlcycgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKi9cblxuY29uc3QgVkFMSURfREFZX05BTUVTID0gL14oU1V8TU98VFV8V0V8VEh8RlJ8U0EpJC87XG5jb25zdCBWQUxJRF9CWURBWV9QQVJUID0gL14oWystXSk/KDVbMC0zXXxbMS00XVswLTldfFsxLTldKT8oU1V8TU98VFV8V0V8VEh8RlJ8U0EpJC87XG5jb25zdCBET1dfTUFQID0ge1xuICBTVTogVGltZS5TVU5EQVksXG4gIE1POiBUaW1lLk1PTkRBWSxcbiAgVFU6IFRpbWUuVFVFU0RBWSxcbiAgV0U6IFRpbWUuV0VETkVTREFZLFxuICBUSDogVGltZS5USFVSU0RBWSxcbiAgRlI6IFRpbWUuRlJJREFZLFxuICBTQTogVGltZS5TQVRVUkRBWVxufTtcblxuY29uc3QgUkVWRVJTRV9ET1dfTUFQID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKERPV19NQVApLm1hcChlbnRyeSA9PiBlbnRyeS5yZXZlcnNlKCkpKTtcblxuY29uc3QgQUxMT1dFRF9GUkVRID0gWydTRUNPTkRMWScsICdNSU5VVEVMWScsICdIT1VSTFknLFxuICAgICAgICAgICAgICAgICAgICAgICdEQUlMWScsICdXRUVLTFknLCAnTU9OVEhMWScsICdZRUFSTFknXTtcblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIFwicmVjdXJcIiB2YWx1ZSB0eXBlLCB1c2VkIGZvciBleGFtcGxlIGJ5IFJSVUxFLiBJdCBwcm92aWRlcyBtZXRob2RzIHRvXG4gKiBjYWxjdWxhdGUgb2NjdXJyZW5jZXMgYW1vbmcgb3RoZXJzLlxuICpcbiAqIEBtZW1iZXJvZiBJQ0FMXG4gKi9cbmNsYXNzIFJlY3VyIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIElDQUwuUmVjdXJ9IGluc3RhbmNlIGZyb20gdGhlIHBhc3NlZCBzdHJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgICAgICAgICBUaGUgc3RyaW5nIHRvIHBhcnNlXG4gICAqIEByZXR1cm4ge1JlY3VyfSAgICAgICAgICAgICAgICBUaGUgY3JlYXRlZCByZWN1cnJlbmNlIGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgZnJvbVN0cmluZyhzdHJpbmcpIHtcbiAgICBsZXQgZGF0YSA9IHRoaXMuX3N0cmluZ1RvRGF0YShzdHJpbmcsIGZhbHNlKTtcbiAgICByZXR1cm4gbmV3IFJlY3VyKGRhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIElDQUwuUmVjdXJ9IGluc3RhbmNlIHVzaW5nIG1lbWJlcnMgZnJvbSB0aGUgcGFzc2VkXG4gICAqIGRhdGEgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYURhdGEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbiBvYmplY3Qgd2l0aCBtZW1iZXJzIG9mIHRoZSByZWN1cnJlbmNlXG4gICAqIEBwYXJhbSB7ZnJlcXVlbmN5VmFsdWVzPX0gYURhdGEuZnJlcSAgICAgICAgICAgICAgIFRoZSBmcmVxdWVuY3kgdmFsdWVcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBhRGF0YS5pbnRlcnZhbCAgICAgICAgICAgICAgICAgICAgVGhlIElOVEVSVkFMIHZhbHVlXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGFEYXRhLndrc3QgICAgICAgICAgICAgICAgICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHZhbHVlXG4gICAqIEBwYXJhbSB7VGltZT19IGFEYXRhLnVudGlsICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBlbmQgb2YgdGhlIHJlY3VycmVuY2Ugc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYURhdGEuY291bnQgICAgICAgICAgICAgICAgICAgICAgIFRoZSBudW1iZXIgb2Ygb2NjdXJyZW5jZXNcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGFEYXRhLmJ5c2Vjb25kICAgICAgICAgICAgVGhlIHNlY29uZHMgZm9yIHRoZSBCWVNFQ09ORCBwYXJ0XG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBhRGF0YS5ieW1pbnV0ZSAgICAgICAgICAgIFRoZSBtaW51dGVzIGZvciB0aGUgQllNSU5VVEUgcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxOdW1iZXI+PX0gYURhdGEuYnlob3VyICAgICAgICAgICAgICBUaGUgaG91cnMgZm9yIHRoZSBCWUhPVVIgcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxTdHJpbmc+PX0gYURhdGEuYnlkYXkgICAgICAgICAgICAgICBUaGUgQllEQVkgdmFsdWVzXG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBhRGF0YS5ieW1vbnRoZGF5ICAgICAgICAgIFRoZSBkYXlzIGZvciB0aGUgQllNT05USERBWSBwYXJ0XG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBhRGF0YS5ieXllYXJkYXkgICAgICAgICAgIFRoZSBkYXlzIGZvciB0aGUgQllZRUFSREFZIHBhcnRcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGFEYXRhLmJ5d2Vla25vICAgICAgICAgICAgVGhlIHdlZWtzIGZvciB0aGUgQllXRUVLTk8gcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxOdW1iZXI+PX0gYURhdGEuYnltb250aCAgICAgICAgICAgICBUaGUgbW9udGggZm9yIHRoZSBCWU1PTlRIIHBhcnRcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGFEYXRhLmJ5c2V0cG9zICAgICAgICAgICAgVGhlIHBvc2l0aW9uYWxzIGZvciB0aGUgQllTRVRQT1MgcGFydFxuICAgKi9cbiAgc3RhdGljIGZyb21EYXRhKGFEYXRhKSB7XG4gICAgcmV0dXJuIG5ldyBSZWN1cihhRGF0YSk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgYSByZWN1cnJlbmNlIHN0cmluZyB0byBhIGRhdGEgb2JqZWN0LCBzdWl0YWJsZSBmb3IgdGhlIGZyb21EYXRhXG4gICAqIG1ldGhvZC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZyAgICAgVGhlIHN0cmluZyB0byBwYXJzZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZtdEljYWwgICBJZiB0cnVlLCB0aGUgc3RyaW5nIGlzIGNvbnNpZGVyZWQgdG8gYmUgYW5cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpQ2FsZW5kYXIgc3RyaW5nXG4gICAqIEByZXR1cm4ge1JlY3VyfSAgICAgICAgICAgIFRoZSByZWN1cnJlbmNlIGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgX3N0cmluZ1RvRGF0YShzdHJpbmcsIGZtdEljYWwpIHtcbiAgICBsZXQgZGljdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICAvLyBzcGxpdCBpcyBzbG93ZXIgaW4gRkYgYnV0IGZhc3QgZW5vdWdoLlxuICAgIC8vIHY4IGhvd2V2ZXIgdGhpcyBpcyBmYXN0ZXIgdGhlbiBtYW51YWwgc3BsaXQ/XG4gICAgbGV0IHZhbHVlcyA9IHN0cmluZy5zcGxpdCgnOycpO1xuICAgIGxldCBsZW4gPSB2YWx1ZXMubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgbGV0IHBhcnRzID0gdmFsdWVzW2ldLnNwbGl0KCc9Jyk7XG4gICAgICBsZXQgdWNuYW1lID0gcGFydHNbMF0udG9VcHBlckNhc2UoKTtcbiAgICAgIGxldCBsY25hbWUgPSBwYXJ0c1swXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgbGV0IG5hbWUgPSAoZm10SWNhbCA/IGxjbmFtZSA6IHVjbmFtZSk7XG4gICAgICBsZXQgdmFsdWUgPSBwYXJ0c1sxXTtcblxuICAgICAgaWYgKHVjbmFtZSBpbiBwYXJ0RGVzaWduKSB7XG4gICAgICAgIGxldCBwYXJ0QXJyID0gdmFsdWUuc3BsaXQoJywnKTtcbiAgICAgICAgbGV0IHBhcnRTZXQgPSBuZXcgU2V0KCk7XG5cbiAgICAgICAgZm9yIChsZXQgcGFydCBvZiBwYXJ0QXJyKSB7XG4gICAgICAgICAgcGFydFNldC5hZGQocGFydERlc2lnblt1Y25hbWVdKHBhcnQpKTtcbiAgICAgICAgfVxuICAgICAgICBwYXJ0QXJyID0gWy4uLnBhcnRTZXRdO1xuXG4gICAgICAgIGRpY3RbbmFtZV0gPSAocGFydEFyci5sZW5ndGggPT0gMSA/IHBhcnRBcnJbMF0gOiBwYXJ0QXJyKTtcbiAgICAgIH0gZWxzZSBpZiAodWNuYW1lIGluIG9wdGlvbkRlc2lnbikge1xuICAgICAgICBvcHRpb25EZXNpZ25bdWNuYW1lXSh2YWx1ZSwgZGljdCwgZm10SWNhbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBEb24ndCBzd2FsbG93IHVua25vd24gdmFsdWVzLiBKdXN0IHNldCB0aGVtIGFzIHRoZXkgYXJlLlxuICAgICAgICBkaWN0W2xjbmFtZV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGljdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGFuIGljYWwgcmVwcmVzZW50YXRpb24gb2YgYSBkYXkgKFNVLCBNTywgZXRjLi4pXG4gICAqIGludG8gYSBudW1lcmljIHZhbHVlIG9mIHRoYXQgZGF5LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nICAgICBUaGUgaUNhbGVuZGFyIGRheSBuYW1lXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGFXZWVrU3RhcnRcbiAgICogICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHdlZWtkYXksIGRlZmF1bHRzIHRvIFNVTkRBWVxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgICBOdW1lcmljIHZhbHVlIG9mIGdpdmVuIGRheVxuICAgKi9cbiAgc3RhdGljIGljYWxEYXlUb051bWVyaWNEYXkoc3RyaW5nLCBhV2Vla1N0YXJ0KSB7XG4gICAgLy9YWFg6IHRoaXMgaXMgaGVyZSBzbyB3ZSBjYW4gZGVhbFxuICAgIC8vICAgICB3aXRoIHBvc3NpYmx5IGludmFsaWQgc3RyaW5nIHZhbHVlcy5cbiAgICBsZXQgZmlyc3REb3cgPSBhV2Vla1N0YXJ0IHx8IFRpbWUuU1VOREFZO1xuICAgIHJldHVybiAoKERPV19NQVBbc3RyaW5nXSAtIGZpcnN0RG93ICsgNykgJSA3KSArIDE7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBhIG51bWVyaWMgZGF5IHZhbHVlIGludG8gaXRzIGljYWwgcmVwcmVzZW50YXRpb24gKFNVLCBNTywgZXRjLi4pXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBudW0gICAgICAgIE51bWVyaWMgdmFsdWUgb2YgZ2l2ZW4gZGF5XG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGFXZWVrU3RhcnRcbiAgICogICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHdlZWtkYXksIGRlZmF1bHRzIHRvIFNVTkRBWVxuICAgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgICBUaGUgSUNBTCBkYXkgdmFsdWUsIGUuZyBTVSxNTywuLi5cbiAgICovXG4gIHN0YXRpYyBudW1lcmljRGF5VG9JY2FsRGF5KG51bSwgYVdlZWtTdGFydCkge1xuICAgIC8vWFhYOiB0aGlzIGlzIGhlcmUgc28gd2UgY2FuIGRlYWwgd2l0aCBwb3NzaWJseSBpbnZhbGlkIG51bWJlciB2YWx1ZXMuXG4gICAgLy8gICAgIEFsc28sIHRoaXMgYWxsb3dzIGNvbnNpc3RlbnQgbWFwcGluZyBiZXR3ZWVuIGRheSBudW1iZXJzIGFuZCBkYXlcbiAgICAvLyAgICAgbmFtZXMgZm9yIGV4dGVybmFsIHVzZXJzLlxuICAgIGxldCBmaXJzdERvdyA9IGFXZWVrU3RhcnQgfHwgVGltZS5TVU5EQVk7XG4gICAgbGV0IGRvdyA9IChudW0gKyBmaXJzdERvdyAtIFRpbWUuU1VOREFZKTtcbiAgICBpZiAoZG93ID4gNykge1xuICAgICAgZG93IC09IDc7XG4gICAgfVxuICAgIHJldHVybiBSRVZFUlNFX0RPV19NQVBbZG93XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFJlY3VyIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbiBvYmplY3Qgd2l0aCBtZW1iZXJzIG9mIHRoZSByZWN1cnJlbmNlXG4gICAqIEBwYXJhbSB7ZnJlcXVlbmN5VmFsdWVzPX0gZGF0YS5mcmVxICAgICAgICAgICAgICAgIFRoZSBmcmVxdWVuY3kgdmFsdWVcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBkYXRhLmludGVydmFsICAgICAgICAgICAgICAgICAgICAgVGhlIElOVEVSVkFMIHZhbHVlXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGRhdGEud2tzdCAgICAgICAgICAgICAgICAgICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHZhbHVlXG4gICAqIEBwYXJhbSB7VGltZT19IGRhdGEudW50aWwgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBlbmQgb2YgdGhlIHJlY3VycmVuY2Ugc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS5jb3VudCAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBudW1iZXIgb2Ygb2NjdXJyZW5jZXNcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGRhdGEuYnlzZWNvbmQgICAgICAgICAgICAgVGhlIHNlY29uZHMgZm9yIHRoZSBCWVNFQ09ORCBwYXJ0XG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBkYXRhLmJ5bWludXRlICAgICAgICAgICAgIFRoZSBtaW51dGVzIGZvciB0aGUgQllNSU5VVEUgcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxOdW1iZXI+PX0gZGF0YS5ieWhvdXIgICAgICAgICAgICAgICBUaGUgaG91cnMgZm9yIHRoZSBCWUhPVVIgcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxTdHJpbmc+PX0gZGF0YS5ieWRheSAgICAgICAgICAgICAgICBUaGUgQllEQVkgdmFsdWVzXG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBkYXRhLmJ5bW9udGhkYXkgICAgICAgICAgIFRoZSBkYXlzIGZvciB0aGUgQllNT05USERBWSBwYXJ0XG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBkYXRhLmJ5eWVhcmRheSAgICAgICAgICAgIFRoZSBkYXlzIGZvciB0aGUgQllZRUFSREFZIHBhcnRcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGRhdGEuYnl3ZWVrbm8gICAgICAgICAgICAgVGhlIHdlZWtzIGZvciB0aGUgQllXRUVLTk8gcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxOdW1iZXI+PX0gZGF0YS5ieW1vbnRoICAgICAgICAgICAgICBUaGUgbW9udGggZm9yIHRoZSBCWU1PTlRIIHBhcnRcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGRhdGEuYnlzZXRwb3MgICAgICAgICAgICAgVGhlIHBvc2l0aW9uYWxzIGZvciB0aGUgQllTRVRQT1MgcGFydFxuICAgKi9cbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHRoaXMud3JhcHBlZEpTT2JqZWN0ID0gdGhpcztcbiAgICB0aGlzLnBhcnRzID0ge307XG5cbiAgICBpZiAoZGF0YSAmJiB0eXBlb2YoZGF0YSkgPT09ICdvYmplY3QnKSB7XG4gICAgICB0aGlzLmZyb21EYXRhKGRhdGEpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBbiBvYmplY3QgaG9sZGluZyB0aGUgQlktcGFydHMgb2YgdGhlIHJlY3VycmVuY2UgcnVsZVxuICAgKiBAbWVtYmVyb2YgSUNBTC5SZWN1clxuICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBieVBhcnRzXG4gICAqIEBwcm9wZXJ0eSB7QXJyYXkuPE51bWJlcj49fSBCWVNFQ09ORCAgICAgICAgICAgIFRoZSBzZWNvbmRzIGZvciB0aGUgQllTRUNPTkQgcGFydFxuICAgKiBAcHJvcGVydHkge0FycmF5LjxOdW1iZXI+PX0gQllNSU5VVEUgICAgICAgICAgICBUaGUgbWludXRlcyBmb3IgdGhlIEJZTUlOVVRFIHBhcnRcbiAgICogQHByb3BlcnR5IHtBcnJheS48TnVtYmVyPj19IEJZSE9VUiAgICAgICAgICAgICAgVGhlIGhvdXJzIGZvciB0aGUgQllIT1VSIHBhcnRcbiAgICogQHByb3BlcnR5IHtBcnJheS48U3RyaW5nPj19IEJZREFZICAgICAgICAgICAgICAgVGhlIEJZREFZIHZhbHVlc1xuICAgKiBAcHJvcGVydHkge0FycmF5LjxOdW1iZXI+PX0gQllNT05USERBWSAgICAgICAgICBUaGUgZGF5cyBmb3IgdGhlIEJZTU9OVEhEQVkgcGFydFxuICAgKiBAcHJvcGVydHkge0FycmF5LjxOdW1iZXI+PX0gQllZRUFSREFZICAgICAgICAgICBUaGUgZGF5cyBmb3IgdGhlIEJZWUVBUkRBWSBwYXJ0XG4gICAqIEBwcm9wZXJ0eSB7QXJyYXkuPE51bWJlcj49fSBCWVdFRUtOTyAgICAgICAgICAgIFRoZSB3ZWVrcyBmb3IgdGhlIEJZV0VFS05PIHBhcnRcbiAgICogQHByb3BlcnR5IHtBcnJheS48TnVtYmVyPj19IEJZTU9OVEggICAgICAgICAgICAgVGhlIG1vbnRoIGZvciB0aGUgQllNT05USCBwYXJ0XG4gICAqIEBwcm9wZXJ0eSB7QXJyYXkuPE51bWJlcj49fSBCWVNFVFBPUyAgICAgICAgICAgIFRoZSBwb3NpdGlvbmFscyBmb3IgdGhlIEJZU0VUUE9TIHBhcnRcbiAgICovXG5cbiAgLyoqXG4gICAqIEFuIG9iamVjdCBob2xkaW5nIHRoZSBCWS1wYXJ0cyBvZiB0aGUgcmVjdXJyZW5jZSBydWxlXG4gICAqIEB0eXBlIHtieVBhcnRzfVxuICAgKi9cbiAgcGFydHMgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgaW50ZXJ2YWwgdmFsdWUgZm9yIHRoZSByZWN1cnJlbmNlIHJ1bGUuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqL1xuICBpbnRlcnZhbCA9IDE7XG5cbiAgLyoqXG4gICAqIFRoZSB3ZWVrIHN0YXJ0IGRheVxuICAgKlxuICAgKiBAdHlwZSB7d2Vla0RheX1cbiAgICogQGRlZmF1bHQgSUNBTC5UaW1lLk1PTkRBWVxuICAgKi9cbiAgd2tzdCA9IFRpbWUuTU9OREFZO1xuXG4gIC8qKlxuICAgKiBUaGUgZW5kIG9mIHRoZSByZWN1cnJlbmNlXG4gICAqIEB0eXBlIHs/VGltZX1cbiAgICovXG4gIHVudGlsID0gbnVsbDtcblxuICAvKipcbiAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIG9jY3VycmVuY2VzXG4gICAqIEB0eXBlIHs/TnVtYmVyfVxuICAgKi9cbiAgY291bnQgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgZnJlcXVlbmN5IHZhbHVlLlxuICAgKiBAdHlwZSB7ZnJlcXVlbmN5VmFsdWVzfVxuICAgKi9cbiAgZnJlcSA9IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBjbGFzcyBpZGVudGlmaWVyLlxuICAgKiBAY29uc3RhbnRcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGRlZmF1bHQgXCJpY2FscmVjdXJcIlxuICAgKi9cbiAgaWNhbGNsYXNzID0gXCJpY2FscmVjdXJcIjtcblxuICAvKipcbiAgICogVGhlIHR5cGUgbmFtZSwgdG8gYmUgdXNlZCBpbiB0aGUgakNhbCBvYmplY3QuXG4gICAqIEBjb25zdGFudFxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAZGVmYXVsdCBcInJlY3VyXCJcbiAgICovXG4gIGljYWx0eXBlID0gXCJyZWN1clwiO1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgaXRlcmF0b3IgZm9yIHRoaXMgcmVjdXJyZW5jZSBydWxlLiBUaGUgcGFzc2VkIHN0YXJ0IGRhdGVcbiAgICogbXVzdCBiZSB0aGUgc3RhcnQgZGF0ZSBvZiB0aGUgZXZlbnQsIG5vdCB0aGUgc3RhcnQgb2YgdGhlIHJhbmdlIHRvXG4gICAqIHNlYXJjaCBpbi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogbGV0IHJlY3VyID0gY29tcC5nZXRGaXJzdFByb3BlcnR5VmFsdWUoJ3JydWxlJyk7XG4gICAqIGxldCBkdHN0YXJ0ID0gY29tcC5nZXRGaXJzdFByb3BlcnR5VmFsdWUoJ2R0c3RhcnQnKTtcbiAgICogbGV0IGl0ZXIgPSByZWN1ci5pdGVyYXRvcihkdHN0YXJ0KTtcbiAgICogZm9yIChsZXQgbmV4dCA9IGl0ZXIubmV4dCgpOyBuZXh0OyBuZXh0ID0gaXRlci5uZXh0KCkpIHtcbiAgICogICBpZiAobmV4dC5jb21wYXJlKHJhbmdlU3RhcnQpIDwgMCkge1xuICAgKiAgICAgY29udGludWU7XG4gICAqICAgfVxuICAgKiAgIGNvbnNvbGUubG9nKG5leHQudG9TdHJpbmcoKSk7XG4gICAqIH1cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lfSBhU3RhcnQgICAgICAgIFRoZSBpdGVtJ3Mgc3RhcnQgZGF0ZVxuICAgKiBAcmV0dXJuIHtSZWN1ckl0ZXJhdG9yfSAgICAgVGhlIHJlY3VycmVuY2UgaXRlcmF0b3JcbiAgICovXG4gIGl0ZXJhdG9yKGFTdGFydCkge1xuICAgIHJldHVybiBuZXcgUmVjdXJJdGVyYXRvcih7XG4gICAgICBydWxlOiB0aGlzLFxuICAgICAgZHRzdGFydDogYVN0YXJ0XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGNsb25lIG9mIHRoZSByZWN1cnJlbmNlIG9iamVjdC5cbiAgICpcbiAgICogQHJldHVybiB7UmVjdXJ9ICAgICAgVGhlIGNsb25lZCBvYmplY3RcbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgUmVjdXIodGhpcy50b0pTT04oKSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSBjdXJyZW50IHJ1bGUgaXMgZmluaXRlLCBpLmUuIGhhcyBhIGNvdW50IG9yIHVudGlsIHBhcnQuXG4gICAqXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgICBUcnVlLCBpZiB0aGUgcnVsZSBpcyBmaW5pdGVcbiAgICovXG4gIGlzRmluaXRlKCkge1xuICAgIHJldHVybiAhISh0aGlzLmNvdW50IHx8IHRoaXMudW50aWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgY3VycmVudCBydWxlIGhhcyBhIGNvdW50IHBhcnQsIGFuZCBub3QgbGltaXRlZCBieSBhbiB1bnRpbFxuICAgKiBwYXJ0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgVHJ1ZSwgaWYgdGhlIHJ1bGUgaXMgYnkgY291bnRcbiAgICovXG4gIGlzQnlDb3VudCgpIHtcbiAgICByZXR1cm4gISEodGhpcy5jb3VudCAmJiAhdGhpcy51bnRpbCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIGNvbXBvbmVudCAocGFydCkgdG8gdGhlIHJlY3VycmVuY2UgcnVsZS4gVGhpcyBpcyBub3QgYSBjb21wb25lbnRcbiAgICogaW4gdGhlIHNlbnNlIG9mIHtAbGluayBJQ0FMLkNvbXBvbmVudH0sIGJ1dCBhIHBhcnQgb2YgdGhlIHJlY3VycmVuY2VcbiAgICogcnVsZSwgaS5lLiBCWU1PTlRILlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gYVR5cGUgICAgICAgICAgICBUaGUgbmFtZSBvZiB0aGUgY29tcG9uZW50IHBhcnRcbiAgICogQHBhcmFtIHtBcnJheXxTdHJpbmd9IGFWYWx1ZSAgICAgVGhlIGNvbXBvbmVudCB2YWx1ZVxuICAgKi9cbiAgYWRkQ29tcG9uZW50KGFUeXBlLCBhVmFsdWUpIHtcbiAgICBsZXQgdWNuYW1lID0gYVR5cGUudG9VcHBlckNhc2UoKTtcbiAgICBpZiAodWNuYW1lIGluIHRoaXMucGFydHMpIHtcbiAgICAgIHRoaXMucGFydHNbdWNuYW1lXS5wdXNoKGFWYWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucGFydHNbdWNuYW1lXSA9IFthVmFsdWVdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjb21wb25lbnQgdmFsdWUgZm9yIHRoZSBnaXZlbiBieS1wYXJ0LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gYVR5cGUgICAgICAgIFRoZSBjb21wb25lbnQgcGFydCBuYW1lXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFWYWx1ZXMgICAgICAgVGhlIGNvbXBvbmVudCB2YWx1ZXNcbiAgICovXG4gIHNldENvbXBvbmVudChhVHlwZSwgYVZhbHVlcykge1xuICAgIHRoaXMucGFydHNbYVR5cGUudG9VcHBlckNhc2UoKV0gPSBhVmFsdWVzLnNsaWNlKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyAoYSBjb3B5KSBvZiB0aGUgcmVxdWVzdGVkIGNvbXBvbmVudCB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFUeXBlICAgICAgICBUaGUgY29tcG9uZW50IHBhcnQgbmFtZVxuICAgKiBAcmV0dXJuIHtBcnJheX0gICAgICAgICAgICAgIFRoZSBjb21wb25lbnQgcGFydCB2YWx1ZVxuICAgKi9cbiAgZ2V0Q29tcG9uZW50KGFUeXBlKSB7XG4gICAgbGV0IHVjbmFtZSA9IGFUeXBlLnRvVXBwZXJDYXNlKCk7XG4gICAgcmV0dXJuICh1Y25hbWUgaW4gdGhpcy5wYXJ0cyA/IHRoaXMucGFydHNbdWNuYW1lXS5zbGljZSgpIDogW10pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyB0aGUgbmV4dCBvY2N1cnJlbmNlIGFmdGVyIHRoZSBnaXZlbiByZWN1cnJlbmNlIGlkLiBTZWUgdGhlXG4gICAqIGd1aWRlIG9uIHtAdHV0b3JpYWwgdGVybWlub2xvZ3l9IGZvciBtb3JlIGRldGFpbHMuXG4gICAqXG4gICAqIE5PVEU6IEN1cnJlbnRseSwgdGhpcyBtZXRob2QgaXRlcmF0ZXMgYWxsIG9jY3VycmVuY2VzIGZyb20gdGhlIHN0YXJ0XG4gICAqIGRhdGUuIEl0IHNob3VsZCBub3QgYmUgY2FsbGVkIGluIGEgbG9vcCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy4gSWYgeW91XG4gICAqIHdvdWxkIGxpa2UgdG8gZ2V0IG1vcmUgdGhhbiBvbmUgb2NjdXJyZW5jZSwgeW91IGNhbiBpdGVyYXRlIHRoZVxuICAgKiBvY2N1cnJlbmNlcyBtYW51YWxseSwgc2VlIHRoZSBleGFtcGxlIG9uIHRoZVxuICAgKiB7QGxpbmsgSUNBTC5SZWN1ciNpdGVyYXRvciBpdGVyYXRvcn0gbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0ge1RpbWV9IGFTdGFydFRpbWUgICAgICAgIFRoZSBzdGFydCBvZiB0aGUgZXZlbnQgc2VyaWVzXG4gICAqIEBwYXJhbSB7VGltZX0gYVJlY3VycmVuY2VJZCAgICAgVGhlIGRhdGUgb2YgdGhlIGxhc3Qgb2NjdXJyZW5jZVxuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgICAgICAgICAgICAgIFRoZSBuZXh0IG9jY3VycmVuY2UgYWZ0ZXJcbiAgICovXG4gIGdldE5leHRPY2N1cnJlbmNlKGFTdGFydFRpbWUsIGFSZWN1cnJlbmNlSWQpIHtcbiAgICBsZXQgaXRlciA9IHRoaXMuaXRlcmF0b3IoYVN0YXJ0VGltZSk7XG4gICAgbGV0IG5leHQ7XG5cbiAgICBkbyB7XG4gICAgICBuZXh0ID0gaXRlci5uZXh0KCk7XG4gICAgfSB3aGlsZSAobmV4dCAmJiBuZXh0LmNvbXBhcmUoYVJlY3VycmVuY2VJZCkgPD0gMCk7XG5cbiAgICBpZiAobmV4dCAmJiBhUmVjdXJyZW5jZUlkLnpvbmUpIHtcbiAgICAgIG5leHQuem9uZSA9IGFSZWN1cnJlbmNlSWQuem9uZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV4dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIHRoZSBjdXJyZW50IGluc3RhbmNlIHVzaW5nIG1lbWJlcnMgZnJvbSB0aGUgcGFzc2VkIGRhdGEgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbiBvYmplY3Qgd2l0aCBtZW1iZXJzIG9mIHRoZSByZWN1cnJlbmNlXG4gICAqIEBwYXJhbSB7ZnJlcXVlbmN5VmFsdWVzPX0gZGF0YS5mcmVxICAgICAgICAgICAgICAgIFRoZSBmcmVxdWVuY3kgdmFsdWVcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBkYXRhLmludGVydmFsICAgICAgICAgICAgICAgICAgICAgVGhlIElOVEVSVkFMIHZhbHVlXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGRhdGEud2tzdCAgICAgICAgICAgICAgICAgICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHZhbHVlXG4gICAqIEBwYXJhbSB7VGltZT19IGRhdGEudW50aWwgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBlbmQgb2YgdGhlIHJlY3VycmVuY2Ugc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS5jb3VudCAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBudW1iZXIgb2Ygb2NjdXJyZW5jZXNcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGRhdGEuYnlzZWNvbmQgICAgICAgICAgICAgVGhlIHNlY29uZHMgZm9yIHRoZSBCWVNFQ09ORCBwYXJ0XG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBkYXRhLmJ5bWludXRlICAgICAgICAgICAgIFRoZSBtaW51dGVzIGZvciB0aGUgQllNSU5VVEUgcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxOdW1iZXI+PX0gZGF0YS5ieWhvdXIgICAgICAgICAgICAgICBUaGUgaG91cnMgZm9yIHRoZSBCWUhPVVIgcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxTdHJpbmc+PX0gZGF0YS5ieWRheSAgICAgICAgICAgICAgICBUaGUgQllEQVkgdmFsdWVzXG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBkYXRhLmJ5bW9udGhkYXkgICAgICAgICAgIFRoZSBkYXlzIGZvciB0aGUgQllNT05USERBWSBwYXJ0XG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBkYXRhLmJ5eWVhcmRheSAgICAgICAgICAgIFRoZSBkYXlzIGZvciB0aGUgQllZRUFSREFZIHBhcnRcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGRhdGEuYnl3ZWVrbm8gICAgICAgICAgICAgVGhlIHdlZWtzIGZvciB0aGUgQllXRUVLTk8gcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxOdW1iZXI+PX0gZGF0YS5ieW1vbnRoICAgICAgICAgICAgICBUaGUgbW9udGggZm9yIHRoZSBCWU1PTlRIIHBhcnRcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGRhdGEuYnlzZXRwb3MgICAgICAgICAgICAgVGhlIHBvc2l0aW9uYWxzIGZvciB0aGUgQllTRVRQT1MgcGFydFxuICAgKi9cbiAgZnJvbURhdGEoZGF0YSkge1xuICAgIGZvciAobGV0IGtleSBpbiBkYXRhKSB7XG4gICAgICBsZXQgdWNrZXkgPSBrZXkudG9VcHBlckNhc2UoKTtcblxuICAgICAgaWYgKHVja2V5IGluIHBhcnREZXNpZ24pIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YVtrZXldKSkge1xuICAgICAgICAgIHRoaXMucGFydHNbdWNrZXldID0gZGF0YVtrZXldO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucGFydHNbdWNrZXldID0gW2RhdGFba2V5XV07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXNba2V5XSA9IGRhdGFba2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5pbnRlcnZhbCAmJiB0eXBlb2YgdGhpcy5pbnRlcnZhbCAhPSBcIm51bWJlclwiKSB7XG4gICAgICBvcHRpb25EZXNpZ24uSU5URVJWQUwodGhpcy5pbnRlcnZhbCwgdGhpcyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMud2tzdCAmJiB0eXBlb2YgdGhpcy53a3N0ICE9IFwibnVtYmVyXCIpIHtcbiAgICAgIHRoaXMud2tzdCA9IFJlY3VyLmljYWxEYXlUb051bWVyaWNEYXkodGhpcy53a3N0KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy51bnRpbCAmJiAhKHRoaXMudW50aWwgaW5zdGFuY2VvZiBUaW1lKSkge1xuICAgICAgdGhpcy51bnRpbCA9IFRpbWUuZnJvbVN0cmluZyh0aGlzLnVudGlsKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIGpDYWwgcmVwcmVzZW50YXRpb24gb2YgdGhpcyByZWN1cnJlbmNlIHR5cGUuXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICBsZXQgcmVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZXMuZnJlcSA9IHRoaXMuZnJlcTtcblxuICAgIGlmICh0aGlzLmNvdW50KSB7XG4gICAgICByZXMuY291bnQgPSB0aGlzLmNvdW50O1xuICAgIH1cblxuICAgIGlmICh0aGlzLmludGVydmFsID4gMSkge1xuICAgICAgcmVzLmludGVydmFsID0gdGhpcy5pbnRlcnZhbDtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBbaywga3BhcnRzXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnBhcnRzKSkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoa3BhcnRzKSAmJiBrcGFydHMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgcmVzW2sudG9Mb3dlckNhc2UoKV0gPSBrcGFydHNbMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNbay50b0xvd2VyQ2FzZSgpXSA9IGNsb25lKGtwYXJ0cyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudW50aWwpIHtcbiAgICAgIHJlcy51bnRpbCA9IHRoaXMudW50aWwudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgaWYgKCd3a3N0JyBpbiB0aGlzICYmIHRoaXMud2tzdCAhPT0gVGltZS5ERUZBVUxUX1dFRUtfU1RBUlQpIHtcbiAgICAgIHJlcy53a3N0ID0gUmVjdXIubnVtZXJpY0RheVRvSWNhbERheSh0aGlzLndrc3QpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyByZWN1cnJlbmNlIHJ1bGUuXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIHRvU3RyaW5nKCkge1xuICAgIC8vIFRPRE8gcmV0YWluIG9yZGVyXG4gICAgbGV0IHN0ciA9IFwiRlJFUT1cIiArIHRoaXMuZnJlcTtcbiAgICBpZiAodGhpcy5jb3VudCkge1xuICAgICAgc3RyICs9IFwiO0NPVU5UPVwiICsgdGhpcy5jb3VudDtcbiAgICB9XG4gICAgaWYgKHRoaXMuaW50ZXJ2YWwgPiAxKSB7XG4gICAgICBzdHIgKz0gXCI7SU5URVJWQUw9XCIgKyB0aGlzLmludGVydmFsO1xuICAgIH1cbiAgICBmb3IgKGxldCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5wYXJ0cykpIHtcbiAgICAgIHN0ciArPSBcIjtcIiArIGsgKyBcIj1cIiArIHY7XG4gICAgfVxuICAgIGlmICh0aGlzLnVudGlsKSB7XG4gICAgICBzdHIgKz0gJztVTlRJTD0nICsgdGhpcy51bnRpbC50b0lDQUxTdHJpbmcoKTtcbiAgICB9XG4gICAgaWYgKCd3a3N0JyBpbiB0aGlzICYmIHRoaXMud2tzdCAhPT0gVGltZS5ERUZBVUxUX1dFRUtfU1RBUlQpIHtcbiAgICAgIHN0ciArPSAnO1dLU1Q9JyArIFJlY3VyLm51bWVyaWNEYXlUb0ljYWxEYXkodGhpcy53a3N0KTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxufVxuXG5mdW5jdGlvbiBwYXJzZU51bWVyaWNWYWx1ZSh0eXBlLCBtaW4sIG1heCwgdmFsdWUpIHtcbiAgbGV0IHJlc3VsdCA9IHZhbHVlO1xuXG4gIGlmICh2YWx1ZVswXSA9PT0gJysnKSB7XG4gICAgcmVzdWx0ID0gdmFsdWUuc2xpY2UoMSk7XG4gIH1cblxuICByZXN1bHQgPSBzdHJpY3RQYXJzZUludChyZXN1bHQpO1xuXG4gIGlmIChtaW4gIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA8IG1pbikge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIHR5cGUgKyAnOiBpbnZhbGlkIHZhbHVlIFwiJyArIHZhbHVlICsgJ1wiIG11c3QgYmUgPiAnICsgbWluXG4gICAgKTtcbiAgfVxuXG4gIGlmIChtYXggIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA+IG1heCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIHR5cGUgKyAnOiBpbnZhbGlkIHZhbHVlIFwiJyArIHZhbHVlICsgJ1wiIG11c3QgYmUgPCAnICsgbWluXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmNvbnN0IG9wdGlvbkRlc2lnbiA9IHtcbiAgRlJFUTogZnVuY3Rpb24odmFsdWUsIGRpY3QsIGZtdEljYWwpIHtcbiAgICAvLyB5ZXMgdGhpcyBpcyBhY3R1YWxseSBlcXVhbCBvciBmYXN0ZXIgdGhlbiByZWdleC5cbiAgICAvLyB1cHNpZGUgaGVyZSBpcyB3ZSBjYW4gZW51bWVyYXRlIHRoZSB2YWxpZCB2YWx1ZXMuXG4gICAgaWYgKEFMTE9XRURfRlJFUS5pbmRleE9mKHZhbHVlKSAhPT0gLTEpIHtcbiAgICAgIGRpY3QuZnJlcSA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdpbnZhbGlkIGZyZXF1ZW5jeSBcIicgKyB2YWx1ZSArICdcIiBleHBlY3RlZDogXCInICtcbiAgICAgICAgQUxMT1dFRF9GUkVRLmpvaW4oJywgJykgKyAnXCInXG4gICAgICApO1xuICAgIH1cbiAgfSxcblxuICBDT1VOVDogZnVuY3Rpb24odmFsdWUsIGRpY3QsIGZtdEljYWwpIHtcbiAgICBkaWN0LmNvdW50ID0gc3RyaWN0UGFyc2VJbnQodmFsdWUpO1xuICB9LFxuXG4gIElOVEVSVkFMOiBmdW5jdGlvbih2YWx1ZSwgZGljdCwgZm10SWNhbCkge1xuICAgIGRpY3QuaW50ZXJ2YWwgPSBzdHJpY3RQYXJzZUludCh2YWx1ZSk7XG4gICAgaWYgKGRpY3QuaW50ZXJ2YWwgPCAxKSB7XG4gICAgICAvLyAwIG9yIG5lZ2F0aXZlIHZhbHVlcyBhcmUgbm90IGFsbG93ZWQsIHNvbWUgZW5naW5lcyBzZWVtIHRvIGdlbmVyYXRlXG4gICAgICAvLyBpdCB0aG91Z2guIEFzc3VtZSAxIGluc3RlYWQuXG4gICAgICBkaWN0LmludGVydmFsID0gMTtcbiAgICB9XG4gIH0sXG5cbiAgVU5USUw6IGZ1bmN0aW9uKHZhbHVlLCBkaWN0LCBmbXRJY2FsKSB7XG4gICAgaWYgKHZhbHVlLmxlbmd0aCA+IDEwKSB7XG4gICAgICBkaWN0LnVudGlsID0gZGVzaWduLmljYWxlbmRhci52YWx1ZVsnZGF0ZS10aW1lJ10uZnJvbUlDQUwodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaWN0LnVudGlsID0gZGVzaWduLmljYWxlbmRhci52YWx1ZS5kYXRlLmZyb21JQ0FMKHZhbHVlKTtcbiAgICB9XG4gICAgaWYgKCFmbXRJY2FsKSB7XG4gICAgICBkaWN0LnVudGlsID0gVGltZS5mcm9tU3RyaW5nKGRpY3QudW50aWwpO1xuICAgIH1cbiAgfSxcblxuICBXS1NUOiBmdW5jdGlvbih2YWx1ZSwgZGljdCwgZm10SWNhbCkge1xuICAgIGlmIChWQUxJRF9EQVlfTkFNRVMudGVzdCh2YWx1ZSkpIHtcbiAgICAgIGRpY3Qud2tzdCA9IFJlY3VyLmljYWxEYXlUb051bWVyaWNEYXkodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgV0tTVCB2YWx1ZSBcIicgKyB2YWx1ZSArICdcIicpO1xuICAgIH1cbiAgfVxufTtcblxuY29uc3QgcGFydERlc2lnbiA9IHtcbiAgQllTRUNPTkQ6IHBhcnNlTnVtZXJpY1ZhbHVlLmJpbmQodW5kZWZpbmVkLCAnQllTRUNPTkQnLCAwLCA2MCksXG4gIEJZTUlOVVRFOiBwYXJzZU51bWVyaWNWYWx1ZS5iaW5kKHVuZGVmaW5lZCwgJ0JZTUlOVVRFJywgMCwgNTkpLFxuICBCWUhPVVI6IHBhcnNlTnVtZXJpY1ZhbHVlLmJpbmQodW5kZWZpbmVkLCAnQllIT1VSJywgMCwgMjMpLFxuICBCWURBWTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoVkFMSURfQllEQVlfUEFSVC50ZXN0KHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgQllEQVkgdmFsdWUgXCInICsgdmFsdWUgKyAnXCInKTtcbiAgICB9XG4gIH0sXG4gIEJZTU9OVEhEQVk6IHBhcnNlTnVtZXJpY1ZhbHVlLmJpbmQodW5kZWZpbmVkLCAnQllNT05USERBWScsIC0zMSwgMzEpLFxuICBCWVlFQVJEQVk6IHBhcnNlTnVtZXJpY1ZhbHVlLmJpbmQodW5kZWZpbmVkLCAnQllZRUFSREFZJywgLTM2NiwgMzY2KSxcbiAgQllXRUVLTk86IHBhcnNlTnVtZXJpY1ZhbHVlLmJpbmQodW5kZWZpbmVkLCAnQllXRUVLTk8nLCAtNTMsIDUzKSxcbiAgQllNT05USDogcGFyc2VOdW1lcmljVmFsdWUuYmluZCh1bmRlZmluZWQsICdCWU1PTlRIJywgMSwgMTIpLFxuICBCWVNFVFBPUzogcGFyc2VOdW1lcmljVmFsdWUuYmluZCh1bmRlZmluZWQsICdCWVNFVFBPUycsIC0zNjYsIDM2Nilcbn07XG5cbi8qIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKiBQb3J0aW9ucyBDb3B5cmlnaHQgKEMpIFBoaWxpcHAgS2V3aXNjaCAqL1xuXG5cbi8qKlxuICogVGhpcyBsZXRzIHR5cGVzY3JpcHQgcmVzb2x2ZSBvdXIgY3VzdG9tIHR5cGVzIGluIHRoZVxuICogZ2VuZXJhdGVkIGQudHMgZmlsZXMgKGpzZG9jIHR5cGVkZWZzIGFyZSBjb252ZXJ0ZWQgdG8gdHlwZXNjcmlwdCB0eXBlcykuXG4gKiBJZ25vcmUgcHJldmVudHMgdGhlIHR5cGVkZWZzIGZyb20gYmVpbmcgZG9jdW1lbnRlZCBtb3JlIHRoYW4gb25jZS5cbiAqIEBpZ25vcmVcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL3R5cGVzLmpzXCIpLmRlc2lnblNldH0gZGVzaWduU2V0XG4gKiBJbXBvcnRzIHRoZSAnZGVzaWduU2V0JyB0eXBlIGZyb20gdGhlIFwidHlwZXMuanNcIiBtb2R1bGVcbiAqL1xuXG4vKiogQG1vZHVsZSBJQ0FMLmRlc2lnbiAqL1xuXG5jb25zdCBGUk9NX0lDQUxfTkVXTElORSA9IC9cXFxcXFxcXHxcXFxcO3xcXFxcLHxcXFxcW05uXS9nO1xuY29uc3QgVE9fSUNBTF9ORVdMSU5FID0gL1xcXFx8O3wsfFxcbi9nO1xuY29uc3QgRlJPTV9WQ0FSRF9ORVdMSU5FID0gL1xcXFxcXFxcfFxcXFwsfFxcXFxbTm5dL2c7XG5jb25zdCBUT19WQ0FSRF9ORVdMSU5FID0gL1xcXFx8LHxcXG4vZztcblxuZnVuY3Rpb24gY3JlYXRlVGV4dFR5cGUoZnJvbU5ld2xpbmUsIHRvTmV3bGluZSkge1xuICBsZXQgcmVzdWx0ID0ge1xuICAgIG1hdGNoZXM6IC8uKi8sXG5cbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlLCBzdHJ1Y3R1cmVkRXNjYXBlKSB7XG4gICAgICByZXR1cm4gcmVwbGFjZU5ld2xpbmUoYVZhbHVlLCBmcm9tTmV3bGluZSwgc3RydWN0dXJlZEVzY2FwZSk7XG4gICAgfSxcblxuICAgIHRvSUNBTDogZnVuY3Rpb24oYVZhbHVlLCBzdHJ1Y3R1cmVkRXNjYXBlKSB7XG4gICAgICBsZXQgcmVnRXggPSB0b05ld2xpbmU7XG4gICAgICBpZiAoc3RydWN0dXJlZEVzY2FwZSlcbiAgICAgICAgIHJlZ0V4ID0gbmV3IFJlZ0V4cChyZWdFeC5zb3VyY2UgKyAnfCcgKyBzdHJ1Y3R1cmVkRXNjYXBlLCByZWdFeC5mbGFncyk7XG4gICAgICByZXR1cm4gYVZhbHVlLnJlcGxhY2UocmVnRXgsIGZ1bmN0aW9uKHN0cikge1xuICAgICAgICBzd2l0Y2ggKHN0cikge1xuICAgICAgICBjYXNlIFwiXFxcXFwiOlxuICAgICAgICAgIHJldHVybiBcIlxcXFxcXFxcXCI7XG4gICAgICAgIGNhc2UgXCI7XCI6XG4gICAgICAgICAgcmV0dXJuIFwiXFxcXDtcIjtcbiAgICAgICAgY2FzZSBcIixcIjpcbiAgICAgICAgICByZXR1cm4gXCJcXFxcLFwiO1xuICAgICAgICBjYXNlIFwiXFxuXCI6XG4gICAgICAgICAgcmV0dXJuIFwiXFxcXG5cIjtcbiAgICAgICAgLyogYzggaWdub3JlIG5leHQgMiAqL1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiBzdHI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLy8gZGVmYXVsdCB0eXBlcyB1c2VkIG11bHRpcGxlIHRpbWVzXG5jb25zdCBERUZBVUxUX1RZUEVfVEVYVCA9IHsgZGVmYXVsdFR5cGU6IFwidGV4dFwiIH07XG5jb25zdCBERUZBVUxUX1RZUEVfVEVYVF9NVUxUSSA9IHsgZGVmYXVsdFR5cGU6IFwidGV4dFwiLCBtdWx0aVZhbHVlOiBcIixcIiB9O1xuY29uc3QgREVGQVVMVF9UWVBFX1RFWFRfU1RSVUNUVVJFRCA9IHsgZGVmYXVsdFR5cGU6IFwidGV4dFwiLCBzdHJ1Y3R1cmVkVmFsdWU6IFwiO1wiIH07XG5jb25zdCBERUZBVUxUX1RZUEVfSU5URUdFUiA9IHsgZGVmYXVsdFR5cGU6IFwiaW50ZWdlclwiIH07XG5jb25zdCBERUZBVUxUX1RZUEVfREFURVRJTUVfREFURSA9IHsgZGVmYXVsdFR5cGU6IFwiZGF0ZS10aW1lXCIsIGFsbG93ZWRUeXBlczogW1wiZGF0ZS10aW1lXCIsIFwiZGF0ZVwiXSB9O1xuY29uc3QgREVGQVVMVF9UWVBFX0RBVEVUSU1FID0geyBkZWZhdWx0VHlwZTogXCJkYXRlLXRpbWVcIiB9O1xuY29uc3QgREVGQVVMVF9UWVBFX1VSSSA9IHsgZGVmYXVsdFR5cGU6IFwidXJpXCIgfTtcbmNvbnN0IERFRkFVTFRfVFlQRV9VVENPRkZTRVQgPSB7IGRlZmF1bHRUeXBlOiBcInV0Yy1vZmZzZXRcIiB9O1xuY29uc3QgREVGQVVMVF9UWVBFX1JFQ1VSID0geyBkZWZhdWx0VHlwZTogXCJyZWN1clwiIH07XG5jb25zdCBERUZBVUxUX1RZUEVfREFURV9BTkRPUl9USU1FID0geyBkZWZhdWx0VHlwZTogXCJkYXRlLWFuZC1vci10aW1lXCIsIGFsbG93ZWRUeXBlczogW1wiZGF0ZS10aW1lXCIsIFwiZGF0ZVwiLCBcInRleHRcIl0gfTtcblxuZnVuY3Rpb24gcmVwbGFjZU5ld2xpbmVSZXBsYWNlKHN0cmluZykge1xuICBzd2l0Y2ggKHN0cmluZykge1xuICAgIGNhc2UgXCJcXFxcXFxcXFwiOlxuICAgICAgcmV0dXJuIFwiXFxcXFwiO1xuICAgIGNhc2UgXCJcXFxcO1wiOlxuICAgICAgcmV0dXJuIFwiO1wiO1xuICAgIGNhc2UgXCJcXFxcLFwiOlxuICAgICAgcmV0dXJuIFwiLFwiO1xuICAgIGNhc2UgXCJcXFxcblwiOlxuICAgIGNhc2UgXCJcXFxcTlwiOlxuICAgICAgcmV0dXJuIFwiXFxuXCI7XG4gICAgLyogYzggaWdub3JlIG5leHQgMiAqL1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RyaW5nO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlcGxhY2VOZXdsaW5lKHZhbHVlLCBuZXdsaW5lLCBzdHJ1Y3R1cmVkRXNjYXBlKSB7XG4gIC8vIGF2b2lkIHJlZ2V4IHdoZW4gcG9zc2libGUuXG4gIGlmICh2YWx1ZS5pbmRleE9mKCdcXFxcJykgPT09IC0xKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChzdHJ1Y3R1cmVkRXNjYXBlKVxuICAgICBuZXdsaW5lID0gbmV3IFJlZ0V4cChuZXdsaW5lLnNvdXJjZSArICd8XFxcXFxcXFwnICsgc3RydWN0dXJlZEVzY2FwZSwgbmV3bGluZS5mbGFncyk7XG4gIHJldHVybiB2YWx1ZS5yZXBsYWNlKG5ld2xpbmUsIHJlcGxhY2VOZXdsaW5lUmVwbGFjZSk7XG59XG5cbmxldCBjb21tb25Qcm9wZXJ0aWVzID0ge1xuICBcImNhdGVnb3JpZXNcIjogREVGQVVMVF9UWVBFX1RFWFRfTVVMVEksXG4gIFwidXJsXCI6IERFRkFVTFRfVFlQRV9VUkksXG4gIFwidmVyc2lvblwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJ1aWRcIjogREVGQVVMVF9UWVBFX1RFWFRcbn07XG5cbmxldCBjb21tb25WYWx1ZXMgPSB7XG4gIFwiYm9vbGVhblwiOiB7XG4gICAgdmFsdWVzOiBbXCJUUlVFXCIsIFwiRkFMU0VcIl0sXG5cbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBzd2l0Y2ggKGFWYWx1ZSkge1xuICAgICAgICBjYXNlICdUUlVFJzpcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgY2FzZSAnRkFMU0UnOlxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAvL1RPRE86IHBhcnNlciB3YXJuaW5nXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgaWYgKGFWYWx1ZSkge1xuICAgICAgICByZXR1cm4gJ1RSVUUnO1xuICAgICAgfVxuICAgICAgcmV0dXJuICdGQUxTRSc7XG4gICAgfVxuXG4gIH0sXG4gIGZsb2F0OiB7XG4gICAgbWF0Y2hlczogL15bKy1dP1xcZCtcXC5cXGQrJC8sXG5cbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBsZXQgcGFyc2VkID0gcGFyc2VGbG9hdChhVmFsdWUpO1xuICAgICAgaWYgKGlzU3RyaWN0bHlOYU4ocGFyc2VkKSkge1xuICAgICAgICAvLyBUT0RPOiBwYXJzZXIgd2FybmluZ1xuICAgICAgICByZXR1cm4gMC4wO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhcnNlZDtcbiAgICB9LFxuXG4gICAgdG9JQ0FMOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBTdHJpbmcoYVZhbHVlKTtcbiAgICB9XG4gIH0sXG4gIGludGVnZXI6IHtcbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBsZXQgcGFyc2VkID0gcGFyc2VJbnQoYVZhbHVlKTtcbiAgICAgIGlmIChpc1N0cmljdGx5TmFOKHBhcnNlZCkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGFyc2VkO1xuICAgIH0sXG5cbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIFN0cmluZyhhVmFsdWUpO1xuICAgIH1cbiAgfSxcbiAgXCJ1dGMtb2Zmc2V0XCI6IHtcbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgaWYgKGFWYWx1ZS5sZW5ndGggPCA3KSB7XG4gICAgICAgIC8vIG5vIHNlY29uZHNcbiAgICAgICAgLy8gLTA1MDBcbiAgICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCAzKSArXG4gICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNCwgNik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzZWNvbmRzXG4gICAgICAgIC8vIC0wNTAwMDBcbiAgICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCAzKSArXG4gICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNCwgNikgK1xuICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDcsIDkpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBpZiAoYVZhbHVlLmxlbmd0aCA8IDYpIHtcbiAgICAgICAgLy8gbm8gc2Vjb25kc1xuICAgICAgICAvLyAtMDU6MDBcbiAgICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCAzKSArICc6JyArXG4gICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoMywgNSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzZWNvbmRzXG4gICAgICAgIC8vIC0wNTowMDowMFxuICAgICAgICByZXR1cm4gYVZhbHVlLnNsaWNlKDAsIDMpICsgJzonICtcbiAgICAgICAgICAgICAgIGFWYWx1ZS5zbGljZSgzLCA1KSArICc6JyArXG4gICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNSwgNyk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGRlY29yYXRlOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBVdGNPZmZzZXQuZnJvbVN0cmluZyhhVmFsdWUpO1xuICAgIH0sXG5cbiAgICB1bmRlY29yYXRlOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBhVmFsdWUudG9TdHJpbmcoKTtcbiAgICB9XG4gIH1cbn07XG5cbmxldCBpY2FsUGFyYW1zID0ge1xuICAvLyBBbHRob3VnaCB0aGUgc3ludGF4IGlzIERRVU9URSB1cmkgRFFVT1RFLCBJIGRvbid0IHRoaW5rIHdlIHNob3VsZFxuICAvLyBlbmZvcmNlIGFueXRoaW5nIGFzaWRlIGZyb20gaXQgYmVpbmcgYSB2YWxpZCBjb250ZW50IGxpbmUuXG4gIC8vXG4gIC8vIEF0IGxlYXN0IHNvbWUgcGFyYW1zIHJlcXVpcmUgLSBpZiBtdWx0aSB2YWx1ZXMgYXJlIHVzZWQgLSBEUVVPVEVzXG4gIC8vIGZvciBlYWNoIG9mIGl0cyB2YWx1ZXMgLSBlLmcuIGRlbGVnYXRlZC1mcm9tPVwidXJpMVwiLFwidXJpMlwiXG4gIC8vIFRvIGluZGljYXRlIHRoaXMsIEkgaW50cm9kdWNlZCB0aGUgbmV3IGsvdiBwYWlyXG4gIC8vIG11bHRpVmFsdWVTZXBhcmF0ZURRdW90ZTogdHJ1ZVxuICAvL1xuICAvLyBcIkFMVFJFUFwiOiB7IC4uLiB9LFxuXG4gIC8vIENOIGp1c3Qgd2FudHMgYSBwYXJhbS12YWx1ZVxuICAvLyBcIkNOXCI6IHsgLi4uIH1cblxuICBcImN1dHlwZVwiOiB7XG4gICAgdmFsdWVzOiBbXCJJTkRJVklEVUFMXCIsIFwiR1JPVVBcIiwgXCJSRVNPVVJDRVwiLCBcIlJPT01cIiwgXCJVTktOT1dOXCJdLFxuICAgIGFsbG93WE5hbWU6IHRydWUsXG4gICAgYWxsb3dJYW5hVG9rZW46IHRydWVcbiAgfSxcblxuICBcImRlbGVnYXRlZC1mcm9tXCI6IHtcbiAgICB2YWx1ZVR5cGU6IFwiY2FsLWFkZHJlc3NcIixcbiAgICBtdWx0aVZhbHVlOiBcIixcIixcbiAgICBtdWx0aVZhbHVlU2VwYXJhdGVEUXVvdGU6IHRydWVcbiAgfSxcbiAgXCJkZWxlZ2F0ZWQtdG9cIjoge1xuICAgIHZhbHVlVHlwZTogXCJjYWwtYWRkcmVzc1wiLFxuICAgIG11bHRpVmFsdWU6IFwiLFwiLFxuICAgIG11bHRpVmFsdWVTZXBhcmF0ZURRdW90ZTogdHJ1ZVxuICB9LFxuICAvLyBcIkRJUlwiOiB7IC4uLiB9LCAvLyBTZWUgQUxUUkVQXG4gIFwiZW5jb2RpbmdcIjoge1xuICAgIHZhbHVlczogW1wiOEJJVFwiLCBcIkJBU0U2NFwiXVxuICB9LFxuICAvLyBcIkZNVFRZUEVcIjogeyAuLi4gfSwgLy8gU2VlIEFMVFJFUFxuICBcImZidHlwZVwiOiB7XG4gICAgdmFsdWVzOiBbXCJGUkVFXCIsIFwiQlVTWVwiLCBcIkJVU1ktVU5BVkFJTEFCTEVcIiwgXCJCVVNZLVRFTlRBVElWRVwiXSxcbiAgICBhbGxvd1hOYW1lOiB0cnVlLFxuICAgIGFsbG93SWFuYVRva2VuOiB0cnVlXG4gIH0sXG4gIC8vIFwiTEFOR1VBR0VcIjogeyAuLi4gfSwgLy8gU2VlIEFMVFJFUFxuICBcIm1lbWJlclwiOiB7XG4gICAgdmFsdWVUeXBlOiBcImNhbC1hZGRyZXNzXCIsXG4gICAgbXVsdGlWYWx1ZTogXCIsXCIsXG4gICAgbXVsdGlWYWx1ZVNlcGFyYXRlRFF1b3RlOiB0cnVlXG4gIH0sXG4gIFwicGFydHN0YXRcIjoge1xuICAgIC8vIFRPRE8gVGhlc2UgdmFsdWVzIGFyZSBhY3R1YWxseSBkaWZmZXJlbnQgcGVyLWNvbXBvbmVudFxuICAgIHZhbHVlczogW1wiTkVFRFMtQUNUSU9OXCIsIFwiQUNDRVBURURcIiwgXCJERUNMSU5FRFwiLCBcIlRFTlRBVElWRVwiLFxuICAgICAgICAgICAgIFwiREVMRUdBVEVEXCIsIFwiQ09NUExFVEVEXCIsIFwiSU4tUFJPQ0VTU1wiXSxcbiAgICBhbGxvd1hOYW1lOiB0cnVlLFxuICAgIGFsbG93SWFuYVRva2VuOiB0cnVlXG4gIH0sXG4gIFwicmFuZ2VcIjoge1xuICAgIHZhbHVlczogW1wiVEhJU0FOREZVVFVSRVwiXVxuICB9LFxuICBcInJlbGF0ZWRcIjoge1xuICAgIHZhbHVlczogW1wiU1RBUlRcIiwgXCJFTkRcIl1cbiAgfSxcbiAgXCJyZWx0eXBlXCI6IHtcbiAgICB2YWx1ZXM6IFtcIlBBUkVOVFwiLCBcIkNISUxEXCIsIFwiU0lCTElOR1wiXSxcbiAgICBhbGxvd1hOYW1lOiB0cnVlLFxuICAgIGFsbG93SWFuYVRva2VuOiB0cnVlXG4gIH0sXG4gIFwicm9sZVwiOiB7XG4gICAgdmFsdWVzOiBbXCJSRVEtUEFSVElDSVBBTlRcIiwgXCJDSEFJUlwiLFxuICAgICAgICAgICAgIFwiT1BULVBBUlRJQ0lQQU5UXCIsIFwiTk9OLVBBUlRJQ0lQQU5UXCJdLFxuICAgIGFsbG93WE5hbWU6IHRydWUsXG4gICAgYWxsb3dJYW5hVG9rZW46IHRydWVcbiAgfSxcbiAgXCJyc3ZwXCI6IHtcbiAgICB2YWx1ZXM6IFtcIlRSVUVcIiwgXCJGQUxTRVwiXVxuICB9LFxuICBcInNlbnQtYnlcIjoge1xuICAgIHZhbHVlVHlwZTogXCJjYWwtYWRkcmVzc1wiXG4gIH0sXG4gIFwidHppZFwiOiB7XG4gICAgbWF0Y2hlczogL15cXC8vXG4gIH0sXG4gIFwidmFsdWVcIjoge1xuICAgIC8vIHNpbmNlIHRoZSB2YWx1ZSBoZXJlIGlzIGEgJ3R5cGUnIGxvd2VyY2FzZSBpcyB1c2VkLlxuICAgIHZhbHVlczogW1wiYmluYXJ5XCIsIFwiYm9vbGVhblwiLCBcImNhbC1hZGRyZXNzXCIsIFwiZGF0ZVwiLCBcImRhdGUtdGltZVwiLFxuICAgICAgICAgICAgIFwiZHVyYXRpb25cIiwgXCJmbG9hdFwiLCBcImludGVnZXJcIiwgXCJwZXJpb2RcIiwgXCJyZWN1clwiLCBcInRleHRcIixcbiAgICAgICAgICAgICBcInRpbWVcIiwgXCJ1cmlcIiwgXCJ1dGMtb2Zmc2V0XCJdLFxuICAgIGFsbG93WE5hbWU6IHRydWUsXG4gICAgYWxsb3dJYW5hVG9rZW46IHRydWVcbiAgfVxufTtcblxuLy8gV2hlbiBhZGRpbmcgYSB2YWx1ZSBoZXJlLCBiZSBzdXJlIHRvIGFkZCBpdCB0byB0aGUgcGFyYW1ldGVyIHR5cGVzIVxuY29uc3QgaWNhbFZhbHVlcyA9IGV4dGVuZChjb21tb25WYWx1ZXMsIHtcbiAgdGV4dDogY3JlYXRlVGV4dFR5cGUoRlJPTV9JQ0FMX05FV0xJTkUsIFRPX0lDQUxfTkVXTElORSksXG5cbiAgdXJpOiB7XG4gICAgLy8gVE9ET1xuICAgIC8qIC4uLiAqL1xuICB9LFxuXG4gIFwiYmluYXJ5XCI6IHtcbiAgICBkZWNvcmF0ZTogZnVuY3Rpb24oYVN0cmluZykge1xuICAgICAgcmV0dXJuIEJpbmFyeS5mcm9tU3RyaW5nKGFTdHJpbmcpO1xuICAgIH0sXG5cbiAgICB1bmRlY29yYXRlOiBmdW5jdGlvbihhQmluYXJ5KSB7XG4gICAgICByZXR1cm4gYUJpbmFyeS50b1N0cmluZygpO1xuICAgIH1cbiAgfSxcbiAgXCJjYWwtYWRkcmVzc1wiOiB7XG4gICAgLy8gbmVlZHMgdG8gYmUgYW4gdXJpXG4gIH0sXG4gIFwiZGF0ZVwiOiB7XG4gICAgZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSwgYVByb3ApIHtcbiAgICAgIGlmIChkZXNpZ24uc3RyaWN0KSB7XG4gICAgICAgIHJldHVybiBUaW1lLmZyb21EYXRlU3RyaW5nKGFWYWx1ZSwgYVByb3ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFRpbWUuZnJvbVN0cmluZyhhVmFsdWUsIGFQcm9wKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogdW5kZWNvcmF0ZXMgYSB0aW1lIG9iamVjdC5cbiAgICAgKi9cbiAgICB1bmRlY29yYXRlOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBhVmFsdWUudG9TdHJpbmcoKTtcbiAgICB9LFxuXG4gICAgZnJvbUlDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgLy8gZnJvbTogMjAxMjA5MDFcbiAgICAgIC8vIHRvOiAyMDEyLTA5LTAxXG4gICAgICBpZiAoIWRlc2lnbi5zdHJpY3QgJiYgYVZhbHVlLmxlbmd0aCA+PSAxNSkge1xuICAgICAgICAvLyBUaGlzIGlzIHByb2JhYmx5IGEgZGF0ZS10aW1lLCBlLmcuIDIwMTIwOTAxVDEzMDAwMFpcbiAgICAgICAgcmV0dXJuIGljYWxWYWx1ZXNbXCJkYXRlLXRpbWVcIl0uZnJvbUlDQUwoYVZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhVmFsdWUuc2xpY2UoMCwgNCkgKyAnLScgK1xuICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDQsIDYpICsgJy0nICtcbiAgICAgICAgICAgICAgIGFWYWx1ZS5zbGljZSg2LCA4KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdG9JQ0FMOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIC8vIGZyb206IDIwMTItMDktMDFcbiAgICAgIC8vIHRvOiAyMDEyMDkwMVxuICAgICAgbGV0IGxlbiA9IGFWYWx1ZS5sZW5ndGg7XG5cbiAgICAgIGlmIChsZW4gPT0gMTApIHtcbiAgICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCA0KSArXG4gICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNSwgNykgK1xuICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDgsIDEwKTtcbiAgICAgIH0gZWxzZSBpZiAobGVuID49IDE5KSB7XG4gICAgICAgIHJldHVybiBpY2FsVmFsdWVzW1wiZGF0ZS10aW1lXCJdLnRvSUNBTChhVmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy9UT0RPOiBzZXJpYWxpemUgd2FybmluZz9cbiAgICAgICAgcmV0dXJuIGFWYWx1ZTtcbiAgICAgIH1cblxuICAgIH1cbiAgfSxcbiAgXCJkYXRlLXRpbWVcIjoge1xuICAgIGZyb21JQ0FMOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIC8vIGZyb206IDIwMTIwOTAxVDEzMDAwMFxuICAgICAgLy8gdG86IDIwMTItMDktMDFUMTM6MDA6MDBcbiAgICAgIGlmICghZGVzaWduLnN0cmljdCAmJiBhVmFsdWUubGVuZ3RoID09IDgpIHtcbiAgICAgICAgLy8gVGhpcyBpcyBwcm9iYWJseSBhIGRhdGUsIGUuZy4gMjAxMjA5MDFcbiAgICAgICAgcmV0dXJuIGljYWxWYWx1ZXMuZGF0ZS5mcm9tSUNBTChhVmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGFWYWx1ZS5zbGljZSgwLCA0KSArICctJyArXG4gICAgICAgICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNCwgNikgKyAnLScgK1xuICAgICAgICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDYsIDgpICsgJ1QnICtcbiAgICAgICAgICAgICAgICAgICAgIGFWYWx1ZS5zbGljZSg5LCAxMSkgKyAnOicgK1xuICAgICAgICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDExLCAxMykgKyAnOicgK1xuICAgICAgICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDEzLCAxNSk7XG5cbiAgICAgICAgaWYgKGFWYWx1ZVsxNV0gJiYgYVZhbHVlWzE1XSA9PT0gJ1onKSB7XG4gICAgICAgICAgcmVzdWx0ICs9ICdaJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHRvSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICAvLyBmcm9tOiAyMDEyLTA5LTAxVDEzOjAwOjAwXG4gICAgICAvLyB0bzogMjAxMjA5MDFUMTMwMDAwXG4gICAgICBsZXQgbGVuID0gYVZhbHVlLmxlbmd0aDtcblxuICAgICAgaWYgKGxlbiA9PSAxMCAmJiAhZGVzaWduLnN0cmljdCkge1xuICAgICAgICByZXR1cm4gaWNhbFZhbHVlcy5kYXRlLnRvSUNBTChhVmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChsZW4gPj0gMTkpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGFWYWx1ZS5zbGljZSgwLCA0KSArXG4gICAgICAgICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNSwgNykgK1xuICAgICAgICAgICAgICAgICAgICAgLy8gZ3JhYiB0aGUgKEREVEhIKSBzZWdtZW50XG4gICAgICAgICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoOCwgMTMpICtcbiAgICAgICAgICAgICAgICAgICAgIC8vIE1NXG4gICAgICAgICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoMTQsIDE2KSArXG4gICAgICAgICAgICAgICAgICAgICAvLyBTU1xuICAgICAgICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDE3LCAxOSk7XG5cbiAgICAgICAgaWYgKGFWYWx1ZVsxOV0gJiYgYVZhbHVlWzE5XSA9PT0gJ1onKSB7XG4gICAgICAgICAgcmVzdWx0ICs9ICdaJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVE9ETzogZXJyb3JcbiAgICAgICAgcmV0dXJuIGFWYWx1ZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSwgYVByb3ApIHtcbiAgICAgIGlmIChkZXNpZ24uc3RyaWN0KSB7XG4gICAgICAgIHJldHVybiBUaW1lLmZyb21EYXRlVGltZVN0cmluZyhhVmFsdWUsIGFQcm9wKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBUaW1lLmZyb21TdHJpbmcoYVZhbHVlLCBhUHJvcCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHVuZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIGFWYWx1ZS50b1N0cmluZygpO1xuICAgIH1cbiAgfSxcbiAgZHVyYXRpb246IHtcbiAgICBkZWNvcmF0ZTogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24uZnJvbVN0cmluZyhhVmFsdWUpO1xuICAgIH0sXG4gICAgdW5kZWNvcmF0ZTogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICByZXR1cm4gYVZhbHVlLnRvU3RyaW5nKCk7XG4gICAgfVxuICB9LFxuICBwZXJpb2Q6IHtcbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICBsZXQgcGFydHMgPSBzdHJpbmcuc3BsaXQoJy8nKTtcbiAgICAgIHBhcnRzWzBdID0gaWNhbFZhbHVlc1snZGF0ZS10aW1lJ10uZnJvbUlDQUwocGFydHNbMF0pO1xuXG4gICAgICBpZiAoIUR1cmF0aW9uLmlzVmFsdWVTdHJpbmcocGFydHNbMV0pKSB7XG4gICAgICAgIHBhcnRzWzFdID0gaWNhbFZhbHVlc1snZGF0ZS10aW1lJ10uZnJvbUlDQUwocGFydHNbMV0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGFydHM7XG4gICAgfSxcblxuICAgIHRvSUNBTDogZnVuY3Rpb24ocGFydHMpIHtcbiAgICAgIHBhcnRzID0gcGFydHMuc2xpY2UoKTtcbiAgICAgIGlmICghZGVzaWduLnN0cmljdCAmJiBwYXJ0c1swXS5sZW5ndGggPT0gMTApIHtcbiAgICAgICAgcGFydHNbMF0gPSBpY2FsVmFsdWVzLmRhdGUudG9JQ0FMKHBhcnRzWzBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnRzWzBdID0gaWNhbFZhbHVlc1snZGF0ZS10aW1lJ10udG9JQ0FMKHBhcnRzWzBdKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFEdXJhdGlvbi5pc1ZhbHVlU3RyaW5nKHBhcnRzWzFdKSkge1xuICAgICAgICBpZiAoIWRlc2lnbi5zdHJpY3QgJiYgcGFydHNbMV0ubGVuZ3RoID09IDEwKSB7XG4gICAgICAgICAgcGFydHNbMV0gPSBpY2FsVmFsdWVzLmRhdGUudG9JQ0FMKHBhcnRzWzFdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJ0c1sxXSA9IGljYWxWYWx1ZXNbJ2RhdGUtdGltZSddLnRvSUNBTChwYXJ0c1sxXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBhcnRzLmpvaW4oXCIvXCIpO1xuICAgIH0sXG5cbiAgICBkZWNvcmF0ZTogZnVuY3Rpb24oYVZhbHVlLCBhUHJvcCkge1xuICAgICAgcmV0dXJuIFBlcmlvZC5mcm9tSlNPTihhVmFsdWUsIGFQcm9wLCAhZGVzaWduLnN0cmljdCk7XG4gICAgfSxcblxuICAgIHVuZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIGFWYWx1ZS50b0pTT04oKTtcbiAgICB9XG4gIH0sXG4gIHJlY3VyOiB7XG4gICAgZnJvbUlDQUw6IGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgcmV0dXJuIFJlY3VyLl9zdHJpbmdUb0RhdGEoc3RyaW5nLCB0cnVlKTtcbiAgICB9LFxuXG4gICAgdG9JQ0FMOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBsZXQgc3RyID0gXCJcIjtcbiAgICAgIGZvciAobGV0IFtrLCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEpKSB7XG4gICAgICAgIGlmIChrID09IFwidW50aWxcIikge1xuICAgICAgICAgIGlmICh2YWwubGVuZ3RoID4gMTApIHtcbiAgICAgICAgICAgIHZhbCA9IGljYWxWYWx1ZXNbJ2RhdGUtdGltZSddLnRvSUNBTCh2YWwpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YWwgPSBpY2FsVmFsdWVzLmRhdGUudG9JQ0FMKHZhbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGsgPT0gXCJ3a3N0XCIpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHZhbCA9IFJlY3VyLm51bWVyaWNEYXlUb0ljYWxEYXkodmFsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICAgICAgdmFsID0gdmFsLmpvaW4oXCIsXCIpO1xuICAgICAgICB9XG4gICAgICAgIHN0ciArPSBrLnRvVXBwZXJDYXNlKCkgKyBcIj1cIiArIHZhbCArIFwiO1wiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0ci5zbGljZSgwLCBNYXRoLm1heCgwLCBzdHIubGVuZ3RoIC0gMSkpO1xuICAgIH0sXG5cbiAgICBkZWNvcmF0ZTogZnVuY3Rpb24gZGVjb3JhdGUoYVZhbHVlKSB7XG4gICAgICByZXR1cm4gUmVjdXIuZnJvbURhdGEoYVZhbHVlKTtcbiAgICB9LFxuXG4gICAgdW5kZWNvcmF0ZTogZnVuY3Rpb24oYVJlY3VyKSB7XG4gICAgICByZXR1cm4gYVJlY3VyLnRvSlNPTigpO1xuICAgIH1cbiAgfSxcblxuICB0aW1lOiB7XG4gICAgZnJvbUlDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgLy8gZnJvbTogTU1ISFNTKFopP1xuICAgICAgLy8gdG86IEhIOk1NOlNTKFopP1xuICAgICAgaWYgKGFWYWx1ZS5sZW5ndGggPCA2KSB7XG4gICAgICAgIC8vIFRPRE86IHBhcnNlciBleGNlcHRpb24/XG4gICAgICAgIHJldHVybiBhVmFsdWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEhIOjpNTTo6U1NaP1xuICAgICAgbGV0IHJlc3VsdCA9IGFWYWx1ZS5zbGljZSgwLCAyKSArICc6JyArXG4gICAgICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDIsIDQpICsgJzonICtcbiAgICAgICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNCwgNik7XG5cbiAgICAgIGlmIChhVmFsdWVbNl0gPT09ICdaJykge1xuICAgICAgICByZXN1bHQgKz0gJ1onO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgLy8gZnJvbTogSEg6TU06U1MoWik/XG4gICAgICAvLyB0bzogTU1ISFNTKFopP1xuICAgICAgaWYgKGFWYWx1ZS5sZW5ndGggPCA4KSB7XG4gICAgICAgIC8vVE9ETzogZXJyb3JcbiAgICAgICAgcmV0dXJuIGFWYWx1ZTtcbiAgICAgIH1cblxuICAgICAgbGV0IHJlc3VsdCA9IGFWYWx1ZS5zbGljZSgwLCAyKSArXG4gICAgICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDMsIDUpICtcbiAgICAgICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNiwgOCk7XG5cbiAgICAgIGlmIChhVmFsdWVbOF0gPT09ICdaJykge1xuICAgICAgICByZXN1bHQgKz0gJ1onO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgfVxufSk7XG5cbmxldCBpY2FsUHJvcGVydGllcyA9IGV4dGVuZChjb21tb25Qcm9wZXJ0aWVzLCB7XG5cbiAgXCJhY3Rpb25cIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwiYXR0YWNoXCI6IHsgZGVmYXVsdFR5cGU6IFwidXJpXCIgfSxcbiAgXCJhdHRlbmRlZVwiOiB7IGRlZmF1bHRUeXBlOiBcImNhbC1hZGRyZXNzXCIgfSxcbiAgXCJjYWxzY2FsZVwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJjbGFzc1wiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJjb21tZW50XCI6IERFRkFVTFRfVFlQRV9URVhULFxuICBcImNvbXBsZXRlZFwiOiBERUZBVUxUX1RZUEVfREFURVRJTUUsXG4gIFwiY29udGFjdFwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJjcmVhdGVkXCI6IERFRkFVTFRfVFlQRV9EQVRFVElNRSxcbiAgXCJkZXNjcmlwdGlvblwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJkdGVuZFwiOiBERUZBVUxUX1RZUEVfREFURVRJTUVfREFURSxcbiAgXCJkdHN0YW1wXCI6IERFRkFVTFRfVFlQRV9EQVRFVElNRSxcbiAgXCJkdHN0YXJ0XCI6IERFRkFVTFRfVFlQRV9EQVRFVElNRV9EQVRFLFxuICBcImR1ZVwiOiBERUZBVUxUX1RZUEVfREFURVRJTUVfREFURSxcbiAgXCJkdXJhdGlvblwiOiB7IGRlZmF1bHRUeXBlOiBcImR1cmF0aW9uXCIgfSxcbiAgXCJleGRhdGVcIjoge1xuICAgIGRlZmF1bHRUeXBlOiBcImRhdGUtdGltZVwiLFxuICAgIGFsbG93ZWRUeXBlczogW1wiZGF0ZS10aW1lXCIsIFwiZGF0ZVwiXSxcbiAgICBtdWx0aVZhbHVlOiAnLCdcbiAgfSxcbiAgXCJleHJ1bGVcIjogREVGQVVMVF9UWVBFX1JFQ1VSLFxuICBcImZyZWVidXN5XCI6IHsgZGVmYXVsdFR5cGU6IFwicGVyaW9kXCIsIG11bHRpVmFsdWU6IFwiLFwiIH0sXG4gIFwiZ2VvXCI6IHsgZGVmYXVsdFR5cGU6IFwiZmxvYXRcIiwgc3RydWN0dXJlZFZhbHVlOiBcIjtcIiB9LFxuICBcImxhc3QtbW9kaWZpZWRcIjogREVGQVVMVF9UWVBFX0RBVEVUSU1FLFxuICBcImxvY2F0aW9uXCI6IERFRkFVTFRfVFlQRV9URVhULFxuICBcIm1ldGhvZFwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJvcmdhbml6ZXJcIjogeyBkZWZhdWx0VHlwZTogXCJjYWwtYWRkcmVzc1wiIH0sXG4gIFwicGVyY2VudC1jb21wbGV0ZVwiOiBERUZBVUxUX1RZUEVfSU5URUdFUixcbiAgXCJwcmlvcml0eVwiOiBERUZBVUxUX1RZUEVfSU5URUdFUixcbiAgXCJwcm9kaWRcIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwicmVsYXRlZC10b1wiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJyZXBlYXRcIjogREVGQVVMVF9UWVBFX0lOVEVHRVIsXG4gIFwicmRhdGVcIjoge1xuICAgIGRlZmF1bHRUeXBlOiBcImRhdGUtdGltZVwiLFxuICAgIGFsbG93ZWRUeXBlczogW1wiZGF0ZS10aW1lXCIsIFwiZGF0ZVwiLCBcInBlcmlvZFwiXSxcbiAgICBtdWx0aVZhbHVlOiAnLCcsXG4gICAgZGV0ZWN0VHlwZTogZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICBpZiAoc3RyaW5nLmluZGV4T2YoJy8nKSAhPT0gLTEpIHtcbiAgICAgICAgcmV0dXJuICdwZXJpb2QnO1xuICAgICAgfVxuICAgICAgcmV0dXJuIChzdHJpbmcuaW5kZXhPZignVCcpID09PSAtMSkgPyAnZGF0ZScgOiAnZGF0ZS10aW1lJztcbiAgICB9XG4gIH0sXG4gIFwicmVjdXJyZW5jZS1pZFwiOiBERUZBVUxUX1RZUEVfREFURVRJTUVfREFURSxcbiAgXCJyZXNvdXJjZXNcIjogREVGQVVMVF9UWVBFX1RFWFRfTVVMVEksXG4gIFwicmVxdWVzdC1zdGF0dXNcIjogREVGQVVMVF9UWVBFX1RFWFRfU1RSVUNUVVJFRCxcbiAgXCJycnVsZVwiOiBERUZBVUxUX1RZUEVfUkVDVVIsXG4gIFwic2VxdWVuY2VcIjogREVGQVVMVF9UWVBFX0lOVEVHRVIsXG4gIFwic3RhdHVzXCI6IERFRkFVTFRfVFlQRV9URVhULFxuICBcInN1bW1hcnlcIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwidHJhbnNwXCI6IERFRkFVTFRfVFlQRV9URVhULFxuICBcInRyaWdnZXJcIjogeyBkZWZhdWx0VHlwZTogXCJkdXJhdGlvblwiLCBhbGxvd2VkVHlwZXM6IFtcImR1cmF0aW9uXCIsIFwiZGF0ZS10aW1lXCJdIH0sXG4gIFwidHpvZmZzZXRmcm9tXCI6IERFRkFVTFRfVFlQRV9VVENPRkZTRVQsXG4gIFwidHpvZmZzZXR0b1wiOiBERUZBVUxUX1RZUEVfVVRDT0ZGU0VULFxuICBcInR6dXJsXCI6IERFRkFVTFRfVFlQRV9VUkksXG4gIFwidHppZFwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJ0em5hbWVcIjogREVGQVVMVF9UWVBFX1RFWFRcbn0pO1xuXG4vLyBXaGVuIGFkZGluZyBhIHZhbHVlIGhlcmUsIGJlIHN1cmUgdG8gYWRkIGl0IHRvIHRoZSBwYXJhbWV0ZXIgdHlwZXMhXG5jb25zdCB2Y2FyZFZhbHVlcyA9IGV4dGVuZChjb21tb25WYWx1ZXMsIHtcbiAgdGV4dDogY3JlYXRlVGV4dFR5cGUoRlJPTV9WQ0FSRF9ORVdMSU5FLCBUT19WQ0FSRF9ORVdMSU5FKSxcbiAgdXJpOiBjcmVhdGVUZXh0VHlwZShGUk9NX1ZDQVJEX05FV0xJTkUsIFRPX1ZDQVJEX05FV0xJTkUpLFxuXG4gIGRhdGU6IHtcbiAgICBkZWNvcmF0ZTogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICByZXR1cm4gVkNhcmRUaW1lLmZyb21EYXRlQW5kT3JUaW1lU3RyaW5nKGFWYWx1ZSwgXCJkYXRlXCIpO1xuICAgIH0sXG4gICAgdW5kZWNvcmF0ZTogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICByZXR1cm4gYVZhbHVlLnRvU3RyaW5nKCk7XG4gICAgfSxcbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBpZiAoYVZhbHVlLmxlbmd0aCA9PSA4KSB7XG4gICAgICAgIHJldHVybiBpY2FsVmFsdWVzLmRhdGUuZnJvbUlDQUwoYVZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoYVZhbHVlWzBdID09ICctJyAmJiBhVmFsdWUubGVuZ3RoID09IDYpIHtcbiAgICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCA0KSArICctJyArIGFWYWx1ZS5zbGljZSg0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhVmFsdWU7XG4gICAgICB9XG4gICAgfSxcbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgaWYgKGFWYWx1ZS5sZW5ndGggPT0gMTApIHtcbiAgICAgICAgcmV0dXJuIGljYWxWYWx1ZXMuZGF0ZS50b0lDQUwoYVZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoYVZhbHVlWzBdID09ICctJyAmJiBhVmFsdWUubGVuZ3RoID09IDcpIHtcbiAgICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCA0KSArIGFWYWx1ZS5zbGljZSg1KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhVmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHRpbWU6IHtcbiAgICBkZWNvcmF0ZTogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICByZXR1cm4gVkNhcmRUaW1lLmZyb21EYXRlQW5kT3JUaW1lU3RyaW5nKFwiVFwiICsgYVZhbHVlLCBcInRpbWVcIik7XG4gICAgfSxcbiAgICB1bmRlY29yYXRlOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBhVmFsdWUudG9TdHJpbmcoKTtcbiAgICB9LFxuICAgIGZyb21JQ0FMOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIGxldCBzcGxpdHpvbmUgPSB2Y2FyZFZhbHVlcy50aW1lLl9zcGxpdFpvbmUoYVZhbHVlLCB0cnVlKTtcbiAgICAgIGxldCB6b25lID0gc3BsaXR6b25lWzBdLCB2YWx1ZSA9IHNwbGl0em9uZVsxXTtcblxuICAgICAgLy9jb25zb2xlLmxvZyhcIlNQTElUOiBcIixzcGxpdHpvbmUpO1xuXG4gICAgICBpZiAodmFsdWUubGVuZ3RoID09IDYpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCAyKSArICc6JyArXG4gICAgICAgICAgICAgICAgdmFsdWUuc2xpY2UoMiwgNCkgKyAnOicgK1xuICAgICAgICAgICAgICAgIHZhbHVlLnNsaWNlKDQsIDYpO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZS5sZW5ndGggPT0gNCAmJiB2YWx1ZVswXSAhPSAnLScpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCAyKSArICc6JyArIHZhbHVlLnNsaWNlKDIsIDQpO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZS5sZW5ndGggPT0gNSkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDAsIDMpICsgJzonICsgdmFsdWUuc2xpY2UoMywgNSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh6b25lLmxlbmd0aCA9PSA1ICYmICh6b25lWzBdID09ICctJyB8fCB6b25lWzBdID09ICcrJykpIHtcbiAgICAgICAgem9uZSA9IHpvbmUuc2xpY2UoMCwgMykgKyAnOicgKyB6b25lLnNsaWNlKDMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsdWUgKyB6b25lO1xuICAgIH0sXG5cbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgbGV0IHNwbGl0em9uZSA9IHZjYXJkVmFsdWVzLnRpbWUuX3NwbGl0Wm9uZShhVmFsdWUpO1xuICAgICAgbGV0IHpvbmUgPSBzcGxpdHpvbmVbMF0sIHZhbHVlID0gc3BsaXR6b25lWzFdO1xuXG4gICAgICBpZiAodmFsdWUubGVuZ3RoID09IDgpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCAyKSArXG4gICAgICAgICAgICAgICAgdmFsdWUuc2xpY2UoMywgNSkgK1xuICAgICAgICAgICAgICAgIHZhbHVlLnNsaWNlKDYsIDgpO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZS5sZW5ndGggPT0gNSAmJiB2YWx1ZVswXSAhPSAnLScpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCAyKSArIHZhbHVlLnNsaWNlKDMsIDUpO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZS5sZW5ndGggPT0gNikge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDAsIDMpICsgdmFsdWUuc2xpY2UoNCwgNik7XG4gICAgICB9XG5cbiAgICAgIGlmICh6b25lLmxlbmd0aCA9PSA2ICYmICh6b25lWzBdID09ICctJyB8fCB6b25lWzBdID09ICcrJykpIHtcbiAgICAgICAgem9uZSA9IHpvbmUuc2xpY2UoMCwgMykgKyB6b25lLnNsaWNlKDQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsdWUgKyB6b25lO1xuICAgIH0sXG5cbiAgICBfc3BsaXRab25lOiBmdW5jdGlvbihhVmFsdWUsIGlzRnJvbUljYWwpIHtcbiAgICAgIGxldCBsYXN0Q2hhciA9IGFWYWx1ZS5sZW5ndGggLSAxO1xuICAgICAgbGV0IHNpZ25DaGFyID0gYVZhbHVlLmxlbmd0aCAtIChpc0Zyb21JY2FsID8gNSA6IDYpO1xuICAgICAgbGV0IHNpZ24gPSBhVmFsdWVbc2lnbkNoYXJdO1xuICAgICAgbGV0IHpvbmUsIHZhbHVlO1xuXG4gICAgICBpZiAoYVZhbHVlW2xhc3RDaGFyXSA9PSAnWicpIHtcbiAgICAgICAgem9uZSA9IGFWYWx1ZVtsYXN0Q2hhcl07XG4gICAgICAgIHZhbHVlID0gYVZhbHVlLnNsaWNlKDAsIE1hdGgubWF4KDAsIGxhc3RDaGFyKSk7XG4gICAgICB9IGVsc2UgaWYgKGFWYWx1ZS5sZW5ndGggPiA2ICYmIChzaWduID09ICctJyB8fCBzaWduID09ICcrJykpIHtcbiAgICAgICAgem9uZSA9IGFWYWx1ZS5zbGljZShzaWduQ2hhcik7XG4gICAgICAgIHZhbHVlID0gYVZhbHVlLnNsaWNlKDAsIE1hdGgubWF4KDAsIHNpZ25DaGFyKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB6b25lID0gXCJcIjtcbiAgICAgICAgdmFsdWUgPSBhVmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbem9uZSwgdmFsdWVdO1xuICAgIH1cbiAgfSxcblxuICBcImRhdGUtdGltZVwiOiB7XG4gICAgZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIFZDYXJkVGltZS5mcm9tRGF0ZUFuZE9yVGltZVN0cmluZyhhVmFsdWUsIFwiZGF0ZS10aW1lXCIpO1xuICAgIH0sXG5cbiAgICB1bmRlY29yYXRlOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBhVmFsdWUudG9TdHJpbmcoKTtcbiAgICB9LFxuXG4gICAgZnJvbUlDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIHZjYXJkVmFsdWVzWydkYXRlLWFuZC1vci10aW1lJ10uZnJvbUlDQUwoYVZhbHVlKTtcbiAgICB9LFxuXG4gICAgdG9JQ0FMOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiB2Y2FyZFZhbHVlc1snZGF0ZS1hbmQtb3ItdGltZSddLnRvSUNBTChhVmFsdWUpO1xuICAgIH1cbiAgfSxcblxuICBcImRhdGUtYW5kLW9yLXRpbWVcIjoge1xuICAgIGRlY29yYXRlOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBWQ2FyZFRpbWUuZnJvbURhdGVBbmRPclRpbWVTdHJpbmcoYVZhbHVlLCBcImRhdGUtYW5kLW9yLXRpbWVcIik7XG4gICAgfSxcblxuICAgIHVuZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIGFWYWx1ZS50b1N0cmluZygpO1xuICAgIH0sXG5cbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBsZXQgcGFydHMgPSBhVmFsdWUuc3BsaXQoJ1QnKTtcbiAgICAgIHJldHVybiAocGFydHNbMF0gPyB2Y2FyZFZhbHVlcy5kYXRlLmZyb21JQ0FMKHBhcnRzWzBdKSA6ICcnKSArXG4gICAgICAgICAgICAgKHBhcnRzWzFdID8gJ1QnICsgdmNhcmRWYWx1ZXMudGltZS5mcm9tSUNBTChwYXJ0c1sxXSkgOiAnJyk7XG4gICAgfSxcblxuICAgIHRvSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBsZXQgcGFydHMgPSBhVmFsdWUuc3BsaXQoJ1QnKTtcbiAgICAgIHJldHVybiB2Y2FyZFZhbHVlcy5kYXRlLnRvSUNBTChwYXJ0c1swXSkgK1xuICAgICAgICAgICAgIChwYXJ0c1sxXSA/ICdUJyArIHZjYXJkVmFsdWVzLnRpbWUudG9JQ0FMKHBhcnRzWzFdKSA6ICcnKTtcblxuICAgIH1cbiAgfSxcbiAgdGltZXN0YW1wOiBpY2FsVmFsdWVzWydkYXRlLXRpbWUnXSxcbiAgXCJsYW5ndWFnZS10YWdcIjoge1xuICAgIG1hdGNoZXM6IC9eW2EtekEtWjAtOS1dKyQvIC8vIENvdWxkIGdvIHdpdGggYSBtb3JlIHN0cmljdCByZWdleCBoZXJlXG4gIH0sXG4gIFwicGhvbmUtbnVtYmVyXCI6IHtcbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICByZXR1cm4gQXJyYXkuZnJvbShhVmFsdWUpLmZpbHRlcihmdW5jdGlvbihjKSB7XG4gICAgICAgICAgcmV0dXJuIGMgPT09ICdcXFxcJyA/IHVuZGVmaW5lZCA6IGM7XG4gICAgICAgIH0pLmpvaW4oJycpO1xuICAgIH0sXG4gICAgdG9JQ0FMOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBBcnJheS5mcm9tKGFWYWx1ZSkubWFwKGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgcmV0dXJuIGMgPT09ICcsJyB8fCBjID09PSBcIjtcIiA/ICdcXFxcJyArIGMgOiBjO1xuICAgICAgfSkuam9pbignJyk7XG4gICAgfVxuICB9XG59KTtcblxubGV0IHZjYXJkUGFyYW1zID0ge1xuICBcInR5cGVcIjoge1xuICAgIHZhbHVlVHlwZTogXCJ0ZXh0XCIsXG4gICAgbXVsdGlWYWx1ZTogXCIsXCJcbiAgfSxcbiAgXCJ2YWx1ZVwiOiB7XG4gICAgLy8gc2luY2UgdGhlIHZhbHVlIGhlcmUgaXMgYSAndHlwZScgbG93ZXJjYXNlIGlzIHVzZWQuXG4gICAgdmFsdWVzOiBbXCJ0ZXh0XCIsIFwidXJpXCIsIFwiZGF0ZVwiLCBcInRpbWVcIiwgXCJkYXRlLXRpbWVcIiwgXCJkYXRlLWFuZC1vci10aW1lXCIsXG4gICAgICAgICAgICAgXCJ0aW1lc3RhbXBcIiwgXCJib29sZWFuXCIsIFwiaW50ZWdlclwiLCBcImZsb2F0XCIsIFwidXRjLW9mZnNldFwiLFxuICAgICAgICAgICAgIFwibGFuZ3VhZ2UtdGFnXCJdLFxuICAgIGFsbG93WE5hbWU6IHRydWUsXG4gICAgYWxsb3dJYW5hVG9rZW46IHRydWVcbiAgfVxufTtcblxubGV0IHZjYXJkUHJvcGVydGllcyA9IGV4dGVuZChjb21tb25Qcm9wZXJ0aWVzLCB7XG4gIFwiYWRyXCI6IHsgZGVmYXVsdFR5cGU6IFwidGV4dFwiLCBzdHJ1Y3R1cmVkVmFsdWU6IFwiO1wiLCBtdWx0aVZhbHVlOiBcIixcIiB9LFxuICBcImFubml2ZXJzYXJ5XCI6IERFRkFVTFRfVFlQRV9EQVRFX0FORE9SX1RJTUUsXG4gIFwiYmRheVwiOiBERUZBVUxUX1RZUEVfREFURV9BTkRPUl9USU1FLFxuICBcImNhbGFkcnVyaVwiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcImNhbHVyaVwiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcImNsaWVudHBpZG1hcFwiOiBERUZBVUxUX1RZUEVfVEVYVF9TVFJVQ1RVUkVELFxuICBcImVtYWlsXCI6IERFRkFVTFRfVFlQRV9URVhULFxuICBcImZidXJsXCI6IERFRkFVTFRfVFlQRV9VUkksXG4gIFwiZm5cIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwiZ2VuZGVyXCI6IERFRkFVTFRfVFlQRV9URVhUX1NUUlVDVFVSRUQsXG4gIFwiZ2VvXCI6IERFRkFVTFRfVFlQRV9VUkksXG4gIFwiaW1wcFwiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcImtleVwiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcImtpbmRcIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwibGFuZ1wiOiB7IGRlZmF1bHRUeXBlOiBcImxhbmd1YWdlLXRhZ1wiIH0sXG4gIFwibG9nb1wiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcIm1lbWJlclwiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcIm5cIjogeyBkZWZhdWx0VHlwZTogXCJ0ZXh0XCIsIHN0cnVjdHVyZWRWYWx1ZTogXCI7XCIsIG11bHRpVmFsdWU6IFwiLFwiIH0sXG4gIFwibmlja25hbWVcIjogREVGQVVMVF9UWVBFX1RFWFRfTVVMVEksXG4gIFwibm90ZVwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJvcmdcIjogeyBkZWZhdWx0VHlwZTogXCJ0ZXh0XCIsIHN0cnVjdHVyZWRWYWx1ZTogXCI7XCIgfSxcbiAgXCJwaG90b1wiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcInJlbGF0ZWRcIjogREVGQVVMVF9UWVBFX1VSSSxcbiAgXCJyZXZcIjogeyBkZWZhdWx0VHlwZTogXCJ0aW1lc3RhbXBcIiB9LFxuICBcInJvbGVcIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwic291bmRcIjogREVGQVVMVF9UWVBFX1VSSSxcbiAgXCJzb3VyY2VcIjogREVGQVVMVF9UWVBFX1VSSSxcbiAgXCJ0ZWxcIjogeyBkZWZhdWx0VHlwZTogXCJ1cmlcIiwgYWxsb3dlZFR5cGVzOiBbXCJ1cmlcIiwgXCJ0ZXh0XCJdIH0sXG4gIFwidGl0bGVcIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwidHpcIjogeyBkZWZhdWx0VHlwZTogXCJ0ZXh0XCIsIGFsbG93ZWRUeXBlczogW1widGV4dFwiLCBcInV0Yy1vZmZzZXRcIiwgXCJ1cmlcIl0gfSxcbiAgXCJ4bWxcIjogREVGQVVMVF9UWVBFX1RFWFRcbn0pO1xuXG5sZXQgdmNhcmQzVmFsdWVzID0gZXh0ZW5kKGNvbW1vblZhbHVlcywge1xuICBiaW5hcnk6IGljYWxWYWx1ZXMuYmluYXJ5LFxuICBkYXRlOiB2Y2FyZFZhbHVlcy5kYXRlLFxuICBcImRhdGUtdGltZVwiOiB2Y2FyZFZhbHVlc1tcImRhdGUtdGltZVwiXSxcbiAgXCJwaG9uZS1udW1iZXJcIjogdmNhcmRWYWx1ZXNbXCJwaG9uZS1udW1iZXJcIl0sXG4gIHVyaTogaWNhbFZhbHVlcy51cmksXG4gIHRleHQ6IHZjYXJkVmFsdWVzLnRleHQsXG4gIHRpbWU6IGljYWxWYWx1ZXMudGltZSxcbiAgdmNhcmQ6IGljYWxWYWx1ZXMudGV4dCxcbiAgXCJ1dGMtb2Zmc2V0XCI6IHtcbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCA3KTtcbiAgICB9LFxuXG4gICAgZnJvbUlDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCA3KTtcbiAgICB9LFxuXG4gICAgZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIFV0Y09mZnNldC5mcm9tU3RyaW5nKGFWYWx1ZSk7XG4gICAgfSxcblxuICAgIHVuZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIGFWYWx1ZS50b1N0cmluZygpO1xuICAgIH1cbiAgfVxufSk7XG5cbmxldCB2Y2FyZDNQYXJhbXMgPSB7XG4gIFwidHlwZVwiOiB7XG4gICAgdmFsdWVUeXBlOiBcInRleHRcIixcbiAgICBtdWx0aVZhbHVlOiBcIixcIlxuICB9LFxuICBcInZhbHVlXCI6IHtcbiAgICAvLyBzaW5jZSB0aGUgdmFsdWUgaGVyZSBpcyBhICd0eXBlJyBsb3dlcmNhc2UgaXMgdXNlZC5cbiAgICB2YWx1ZXM6IFtcInRleHRcIiwgXCJ1cmlcIiwgXCJkYXRlXCIsIFwiZGF0ZS10aW1lXCIsIFwicGhvbmUtbnVtYmVyXCIsIFwidGltZVwiLFxuICAgICAgICAgICAgIFwiYm9vbGVhblwiLCBcImludGVnZXJcIiwgXCJmbG9hdFwiLCBcInV0Yy1vZmZzZXRcIiwgXCJ2Y2FyZFwiLCBcImJpbmFyeVwiXSxcbiAgICBhbGxvd1hOYW1lOiB0cnVlLFxuICAgIGFsbG93SWFuYVRva2VuOiB0cnVlXG4gIH1cbn07XG5cbmxldCB2Y2FyZDNQcm9wZXJ0aWVzID0gZXh0ZW5kKGNvbW1vblByb3BlcnRpZXMsIHtcbiAgZm46IERFRkFVTFRfVFlQRV9URVhULFxuICBuOiB7IGRlZmF1bHRUeXBlOiBcInRleHRcIiwgc3RydWN0dXJlZFZhbHVlOiBcIjtcIiwgbXVsdGlWYWx1ZTogXCIsXCIgfSxcbiAgbmlja25hbWU6IERFRkFVTFRfVFlQRV9URVhUX01VTFRJLFxuICBwaG90bzogeyBkZWZhdWx0VHlwZTogXCJiaW5hcnlcIiwgYWxsb3dlZFR5cGVzOiBbXCJiaW5hcnlcIiwgXCJ1cmlcIl0gfSxcbiAgYmRheToge1xuICAgIGRlZmF1bHRUeXBlOiBcImRhdGUtdGltZVwiLFxuICAgIGFsbG93ZWRUeXBlczogW1wiZGF0ZS10aW1lXCIsIFwiZGF0ZVwiXSxcbiAgICBkZXRlY3RUeXBlOiBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICAgIHJldHVybiAoc3RyaW5nLmluZGV4T2YoJ1QnKSA9PT0gLTEpID8gJ2RhdGUnIDogJ2RhdGUtdGltZSc7XG4gICAgfVxuICB9LFxuXG4gIGFkcjogeyBkZWZhdWx0VHlwZTogXCJ0ZXh0XCIsIHN0cnVjdHVyZWRWYWx1ZTogXCI7XCIsIG11bHRpVmFsdWU6IFwiLFwiIH0sXG4gIGxhYmVsOiBERUZBVUxUX1RZUEVfVEVYVCxcblxuICB0ZWw6IHsgZGVmYXVsdFR5cGU6IFwicGhvbmUtbnVtYmVyXCIgfSxcbiAgZW1haWw6IERFRkFVTFRfVFlQRV9URVhULFxuICBtYWlsZXI6IERFRkFVTFRfVFlQRV9URVhULFxuXG4gIHR6OiB7IGRlZmF1bHRUeXBlOiBcInV0Yy1vZmZzZXRcIiwgYWxsb3dlZFR5cGVzOiBbXCJ1dGMtb2Zmc2V0XCIsIFwidGV4dFwiXSB9LFxuICBnZW86IHsgZGVmYXVsdFR5cGU6IFwiZmxvYXRcIiwgc3RydWN0dXJlZFZhbHVlOiBcIjtcIiB9LFxuXG4gIHRpdGxlOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgcm9sZTogREVGQVVMVF9UWVBFX1RFWFQsXG4gIGxvZ286IHsgZGVmYXVsdFR5cGU6IFwiYmluYXJ5XCIsIGFsbG93ZWRUeXBlczogW1wiYmluYXJ5XCIsIFwidXJpXCJdIH0sXG4gIGFnZW50OiB7IGRlZmF1bHRUeXBlOiBcInZjYXJkXCIsIGFsbG93ZWRUeXBlczogW1widmNhcmRcIiwgXCJ0ZXh0XCIsIFwidXJpXCJdIH0sXG4gIG9yZzogREVGQVVMVF9UWVBFX1RFWFRfU1RSVUNUVVJFRCxcblxuICBub3RlOiBERUZBVUxUX1RZUEVfVEVYVF9NVUxUSSxcbiAgcHJvZGlkOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgcmV2OiB7XG4gICAgZGVmYXVsdFR5cGU6IFwiZGF0ZS10aW1lXCIsXG4gICAgYWxsb3dlZFR5cGVzOiBbXCJkYXRlLXRpbWVcIiwgXCJkYXRlXCJdLFxuICAgIGRldGVjdFR5cGU6IGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgcmV0dXJuIChzdHJpbmcuaW5kZXhPZignVCcpID09PSAtMSkgPyAnZGF0ZScgOiAnZGF0ZS10aW1lJztcbiAgICB9XG4gIH0sXG4gIFwic29ydC1zdHJpbmdcIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIHNvdW5kOiB7IGRlZmF1bHRUeXBlOiBcImJpbmFyeVwiLCBhbGxvd2VkVHlwZXM6IFtcImJpbmFyeVwiLCBcInVyaVwiXSB9LFxuXG4gIGNsYXNzOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAga2V5OiB7IGRlZmF1bHRUeXBlOiBcImJpbmFyeVwiLCBhbGxvd2VkVHlwZXM6IFtcImJpbmFyeVwiLCBcInRleHRcIl0gfVxufSk7XG5cbi8qKlxuICogaUNhbGVuZGFyIGRlc2lnbiBzZXRcbiAqIEB0eXBlIHtkZXNpZ25TZXR9XG4gKi9cbmxldCBpY2FsU2V0ID0ge1xuICBuYW1lOiBcImljYWxcIixcbiAgdmFsdWU6IGljYWxWYWx1ZXMsXG4gIHBhcmFtOiBpY2FsUGFyYW1zLFxuICBwcm9wZXJ0eTogaWNhbFByb3BlcnRpZXMsXG4gIHByb3BlcnR5R3JvdXBzOiBmYWxzZVxufTtcblxuLyoqXG4gKiB2Q2FyZCA0LjAgZGVzaWduIHNldFxuICogQHR5cGUge2Rlc2lnblNldH1cbiAqL1xubGV0IHZjYXJkU2V0ID0ge1xuICBuYW1lOiBcInZjYXJkNFwiLFxuICB2YWx1ZTogdmNhcmRWYWx1ZXMsXG4gIHBhcmFtOiB2Y2FyZFBhcmFtcyxcbiAgcHJvcGVydHk6IHZjYXJkUHJvcGVydGllcyxcbiAgcHJvcGVydHlHcm91cHM6IHRydWVcbn07XG5cbi8qKlxuICogdkNhcmQgMy4wIGRlc2lnbiBzZXRcbiAqIEB0eXBlIHtkZXNpZ25TZXR9XG4gKi9cbmxldCB2Y2FyZDNTZXQgPSB7XG4gIG5hbWU6IFwidmNhcmQzXCIsXG4gIHZhbHVlOiB2Y2FyZDNWYWx1ZXMsXG4gIHBhcmFtOiB2Y2FyZDNQYXJhbXMsXG4gIHByb3BlcnR5OiB2Y2FyZDNQcm9wZXJ0aWVzLFxuICBwcm9wZXJ0eUdyb3VwczogdHJ1ZVxufTtcblxuLyoqXG4gKiBUaGUgZGVzaWduIGRhdGEsIHVzZWQgYnkgdGhlIHBhcnNlciB0byBkZXRlcm1pbmUgdHlwZXMgZm9yIHByb3BlcnRpZXMgYW5kXG4gKiBvdGhlciBtZXRhZGF0YSBuZWVkZWQgdG8gcHJvZHVjZSBjb3JyZWN0IGpDYXJkL2pDYWwgZGF0YS5cbiAqXG4gKiBAYWxpYXMgSUNBTC5kZXNpZ25cbiAqIEBleHBvcnRzIG1vZHVsZTpJQ0FMLmRlc2lnblxuICovXG5jb25zdCBkZXNpZ24gPSB7XG4gIC8qKlxuICAgKiBDYW4gYmUgc2V0IHRvIGZhbHNlIHRvIG1ha2UgdGhlIHBhcnNlciBtb3JlIGxlbmllbnQuXG4gICAqL1xuICBzdHJpY3Q6IHRydWUsXG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IHNldCBmb3IgbmV3IHByb3BlcnRpZXMgYW5kIGNvbXBvbmVudHMgaWYgbm9uZSBpcyBzcGVjaWZpZWQuXG4gICAqIEB0eXBlIHtkZXNpZ25TZXR9XG4gICAqL1xuICBkZWZhdWx0U2V0OiBpY2FsU2V0LFxuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCB0eXBlIGZvciB1bmtub3duIHByb3BlcnRpZXNcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGRlZmF1bHRUeXBlOiAndW5rbm93bicsXG5cbiAgLyoqXG4gICAqIEhvbGRzIHRoZSBkZXNpZ24gc2V0IGZvciBrbm93biB0b3AtbGV2ZWwgY29tcG9uZW50c1xuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAcHJvcGVydHkge2Rlc2lnblNldH0gdmNhcmQgICAgICAgdkNhcmQgVkNBUkRcbiAgICogQHByb3BlcnR5IHtkZXNpZ25TZXR9IHZldmVudCAgICAgIGlDYWxlbmRhciBWRVZFTlRcbiAgICogQHByb3BlcnR5IHtkZXNpZ25TZXR9IHZ0b2RvICAgICAgIGlDYWxlbmRhciBWVE9ET1xuICAgKiBAcHJvcGVydHkge2Rlc2lnblNldH0gdmpvdXJuYWwgICAgaUNhbGVuZGFyIFZKT1VSTkFMXG4gICAqIEBwcm9wZXJ0eSB7ZGVzaWduU2V0fSB2YWxhcm0gICAgICBpQ2FsZW5kYXIgVkFMQVJNXG4gICAqIEBwcm9wZXJ0eSB7ZGVzaWduU2V0fSB2dGltZXpvbmUgICBpQ2FsZW5kYXIgVlRJTUVaT05FXG4gICAqIEBwcm9wZXJ0eSB7ZGVzaWduU2V0fSBkYXlsaWdodCAgICBpQ2FsZW5kYXIgREFZTElHSFRcbiAgICogQHByb3BlcnR5IHtkZXNpZ25TZXR9IHN0YW5kYXJkICAgIGlDYWxlbmRhciBTVEFOREFSRFxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBsZXQgcHJvcGVydHlOYW1lID0gJ2ZuJztcbiAgICogbGV0IGNvbXBvbmVudERlc2lnbiA9IElDQUwuZGVzaWduLmNvbXBvbmVudHMudmNhcmQ7XG4gICAqIGxldCBwcm9wZXJ0eURldGFpbHMgPSBjb21wb25lbnREZXNpZ24ucHJvcGVydHlbcHJvcGVydHlOYW1lXTtcbiAgICogaWYgKHByb3BlcnR5RGV0YWlscy5kZWZhdWx0VHlwZSA9PSAndGV4dCcpIHtcbiAgICogICAvLyBZZXAsIHN1cmUgaXMuLi5cbiAgICogfVxuICAgKi9cbiAgY29tcG9uZW50czoge1xuICAgIHZjYXJkOiB2Y2FyZFNldCxcbiAgICB2Y2FyZDM6IHZjYXJkM1NldCxcbiAgICB2ZXZlbnQ6IGljYWxTZXQsXG4gICAgdnRvZG86IGljYWxTZXQsXG4gICAgdmpvdXJuYWw6IGljYWxTZXQsXG4gICAgdmFsYXJtOiBpY2FsU2V0LFxuICAgIHZ0aW1lem9uZTogaWNhbFNldCxcbiAgICBkYXlsaWdodDogaWNhbFNldCxcbiAgICBzdGFuZGFyZDogaWNhbFNldFxuICB9LFxuXG5cbiAgLyoqXG4gICAqIFRoZSBkZXNpZ24gc2V0IGZvciBpQ2FsZW5kYXIgKHJmYzU1NDUvcmZjNzI2NSkgY29tcG9uZW50cy5cbiAgICogQHR5cGUge2Rlc2lnblNldH1cbiAgICovXG4gIGljYWxlbmRhcjogaWNhbFNldCxcblxuICAvKipcbiAgICogVGhlIGRlc2lnbiBzZXQgZm9yIHZDYXJkIChyZmM2MzUwL3JmYzcwOTUpIGNvbXBvbmVudHMuXG4gICAqIEB0eXBlIHtkZXNpZ25TZXR9XG4gICAqL1xuICB2Y2FyZDogdmNhcmRTZXQsXG5cbiAgLyoqXG4gICAqIFRoZSBkZXNpZ24gc2V0IGZvciB2Q2FyZCAocmZjMjQyNS9yZmMyNDI2L3JmYzcwOTUpIGNvbXBvbmVudHMuXG4gICAqIEB0eXBlIHtkZXNpZ25TZXR9XG4gICAqL1xuICB2Y2FyZDM6IHZjYXJkM1NldCxcblxuICAvKipcbiAgICogR2V0cyB0aGUgZGVzaWduIHNldCBmb3IgdGhlIGdpdmVuIGNvbXBvbmVudCBuYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gY29tcG9uZW50TmFtZSAgICAgICAgVGhlIG5hbWUgb2YgdGhlIGNvbXBvbmVudFxuICAgKiBAcmV0dXJuIHtkZXNpZ25TZXR9ICAgICAgVGhlIGRlc2lnbiBzZXQgZm9yIHRoZSBjb21wb25lbnRcbiAgICovXG4gIGdldERlc2lnblNldDogZnVuY3Rpb24oY29tcG9uZW50TmFtZSkge1xuICAgIGxldCBpc0luRGVzaWduID0gY29tcG9uZW50TmFtZSAmJiBjb21wb25lbnROYW1lIGluIGRlc2lnbi5jb21wb25lbnRzO1xuICAgIHJldHVybiBpc0luRGVzaWduID8gZGVzaWduLmNvbXBvbmVudHNbY29tcG9uZW50TmFtZV0gOiBkZXNpZ24uZGVmYXVsdFNldDtcbiAgfVxufTtcblxuLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cblxuLyoqXG4gKiBUaGlzIGxldHMgdHlwZXNjcmlwdCByZXNvbHZlIG91ciBjdXN0b20gdHlwZXMgaW4gdGhlXG4gKiBnZW5lcmF0ZWQgZC50cyBmaWxlcyAoanNkb2MgdHlwZWRlZnMgYXJlIGNvbnZlcnRlZCB0byB0eXBlc2NyaXB0IHR5cGVzKS5cbiAqIElnbm9yZSBwcmV2ZW50cyB0aGUgdHlwZWRlZnMgZnJvbSBiZWluZyBkb2N1bWVudGVkIG1vcmUgdGhhbiBvbmNlLlxuICpcbiAqIEBpZ25vcmVcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL3R5cGVzLmpzXCIpLmRlc2lnblNldH0gZGVzaWduU2V0XG4gKiBJbXBvcnRzIHRoZSAnZGVzaWduU2V0JyB0eXBlIGZyb20gdGhlIFwidHlwZXMuanNcIiBtb2R1bGVcbiAqL1xuXG5jb25zdCBMSU5FX0VORElORyA9ICdcXHJcXG4nO1xuY29uc3QgREVGQVVMVF9WQUxVRV9UWVBFID0gJ3Vua25vd24nO1xuY29uc3QgUkZDNjg2OF9SRVBMQUNFX01BUCA9IHsgJ1wiJzogXCJeJ1wiLCBcIlxcblwiOiBcIl5uXCIsIFwiXlwiOiBcIl5eXCIgfTtcblxuLyoqXG4gKiBDb252ZXJ0IGEgZnVsbCBqQ2FsL2pDYXJkIGFycmF5IGludG8gYSBpQ2FsZW5kYXIvdkNhcmQgc3RyaW5nLlxuICpcbiAqIEBmdW5jdGlvbiBJQ0FMLnN0cmluZ2lmeVxuICogQHZhcmlhdGlvbiBmdW5jdGlvblxuICogQHBhcmFtIHtBcnJheX0gakNhbCAgICBUaGUgakNhbC9qQ2FyZCBkb2N1bWVudFxuICogQHJldHVybiB7U3RyaW5nfSAgICAgICBUaGUgc3RyaW5naWZpZWQgaUNhbGVuZGFyL3ZDYXJkIGRvY3VtZW50XG4gKi9cbmZ1bmN0aW9uIHN0cmluZ2lmeShqQ2FsKSB7XG4gIGlmICh0eXBlb2YgakNhbFswXSA9PSBcInN0cmluZ1wiKSB7XG4gICAgLy8gVGhpcyBpcyBhIHNpbmdsZSBjb21wb25lbnRcbiAgICBqQ2FsID0gW2pDYWxdO1xuICB9XG5cbiAgbGV0IGkgPSAwO1xuICBsZXQgbGVuID0gakNhbC5sZW5ndGg7XG4gIGxldCByZXN1bHQgPSAnJztcblxuICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgcmVzdWx0ICs9IHN0cmluZ2lmeS5jb21wb25lbnQoakNhbFtpXSkgKyBMSU5FX0VORElORztcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gakNhbCBjb21wb25lbnQgYXJyYXkgaW50byBhIElDQUwgc3RyaW5nLlxuICogUmVjdXJzaXZlIHdpbGwgcmVzb2x2ZSBzdWItY29tcG9uZW50cy5cbiAqXG4gKiBFeGFjdCBjb21wb25lbnQvcHJvcGVydHkgb3JkZXIgaXMgbm90IHNhdmVkIGFsbFxuICogcHJvcGVydGllcyB3aWxsIGNvbWUgYmVmb3JlIHN1YmNvbXBvbmVudHMuXG4gKlxuICogQGZ1bmN0aW9uIElDQUwuc3RyaW5naWZ5LmNvbXBvbmVudFxuICogQHBhcmFtIHtBcnJheX0gY29tcG9uZW50XG4gKiAgICAgICAgakNhbC9qQ2FyZCBmcmFnbWVudCBvZiBhIGNvbXBvbmVudFxuICogQHBhcmFtIHtkZXNpZ25TZXR9IGRlc2lnblNldFxuICogICAgICAgIFRoZSBkZXNpZ24gZGF0YSB0byB1c2UgZm9yIHRoaXMgY29tcG9uZW50XG4gKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgIFRoZSBpQ2FsZW5kYXIvdkNhcmQgc3RyaW5nXG4gKi9cbnN0cmluZ2lmeS5jb21wb25lbnQgPSBmdW5jdGlvbihjb21wb25lbnQsIGRlc2lnblNldCkge1xuICBsZXQgbmFtZSA9IGNvbXBvbmVudFswXS50b1VwcGVyQ2FzZSgpO1xuICBsZXQgcmVzdWx0ID0gJ0JFR0lOOicgKyBuYW1lICsgTElORV9FTkRJTkc7XG5cbiAgbGV0IHByb3BzID0gY29tcG9uZW50WzFdO1xuICBsZXQgcHJvcElkeCA9IDA7XG4gIGxldCBwcm9wTGVuID0gcHJvcHMubGVuZ3RoO1xuXG4gIGxldCBkZXNpZ25TZXROYW1lID0gY29tcG9uZW50WzBdO1xuICAvLyByZmM2MzUwIHJlcXVpcmVzIHRoYXQgaW4gdkNhcmQgNC4wIHRoZSBmaXJzdCBjb21wb25lbnQgaXMgdGhlIFZFUlNJT05cbiAgLy8gY29tcG9uZW50IHdpdGggYXMgdmFsdWUgNC4wLCBub3RlIHRoYXQgMy4wIGRvZXMgbm90IGhhdmUgdGhpcyByZXF1aXJlbWVudC5cbiAgaWYgKGRlc2lnblNldE5hbWUgPT09ICd2Y2FyZCcgJiYgY29tcG9uZW50WzFdLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAhKGNvbXBvbmVudFsxXVswXVswXSA9PT0gXCJ2ZXJzaW9uXCIgJiYgY29tcG9uZW50WzFdWzBdWzNdID09PSBcIjQuMFwiKSkge1xuICAgIGRlc2lnblNldE5hbWUgPSBcInZjYXJkM1wiO1xuICB9XG4gIGRlc2lnblNldCA9IGRlc2lnblNldCB8fCBkZXNpZ24uZ2V0RGVzaWduU2V0KGRlc2lnblNldE5hbWUpO1xuXG4gIGZvciAoOyBwcm9wSWR4IDwgcHJvcExlbjsgcHJvcElkeCsrKSB7XG4gICAgcmVzdWx0ICs9IHN0cmluZ2lmeS5wcm9wZXJ0eShwcm9wc1twcm9wSWR4XSwgZGVzaWduU2V0KSArIExJTkVfRU5ESU5HO1xuICB9XG5cbiAgLy8gSWdub3JlIHN1YmNvbXBvbmVudHMgaWYgbm9uZSBleGlzdCwgZS5nLiBpbiB2Q2FyZC5cbiAgbGV0IGNvbXBzID0gY29tcG9uZW50WzJdIHx8IFtdO1xuICBsZXQgY29tcElkeCA9IDA7XG4gIGxldCBjb21wTGVuID0gY29tcHMubGVuZ3RoO1xuXG4gIGZvciAoOyBjb21wSWR4IDwgY29tcExlbjsgY29tcElkeCsrKSB7XG4gICAgcmVzdWx0ICs9IHN0cmluZ2lmeS5jb21wb25lbnQoY29tcHNbY29tcElkeF0sIGRlc2lnblNldCkgKyBMSU5FX0VORElORztcbiAgfVxuXG4gIHJlc3VsdCArPSAnRU5EOicgKyBuYW1lO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBDb252ZXJ0cyBhIHNpbmdsZSBqQ2FsL2pDYXJkIHByb3BlcnR5IHRvIGEgaUNhbGVuZGFyL3ZDYXJkIHN0cmluZy5cbiAqXG4gKiBAZnVuY3Rpb24gSUNBTC5zdHJpbmdpZnkucHJvcGVydHlcbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BlcnR5XG4gKiAgICAgICAgakNhbC9qQ2FyZCBwcm9wZXJ0eSBhcnJheVxuICogQHBhcmFtIHtkZXNpZ25TZXR9IGRlc2lnblNldFxuICogICAgICAgIFRoZSBkZXNpZ24gZGF0YSB0byB1c2UgZm9yIHRoaXMgcHJvcGVydHlcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gbm9Gb2xkXG4gKiAgICAgICAgSWYgdHJ1ZSwgdGhlIGxpbmUgaXMgbm90IGZvbGRlZFxuICogQHJldHVybiB7U3RyaW5nfSAgICAgICBUaGUgaUNhbGVuZGFyL3ZDYXJkIHN0cmluZ1xuICovXG5zdHJpbmdpZnkucHJvcGVydHkgPSBmdW5jdGlvbihwcm9wZXJ0eSwgZGVzaWduU2V0LCBub0ZvbGQpIHtcbiAgbGV0IG5hbWUgPSBwcm9wZXJ0eVswXS50b1VwcGVyQ2FzZSgpO1xuICBsZXQganNOYW1lID0gcHJvcGVydHlbMF07XG4gIGxldCBwYXJhbXMgPSBwcm9wZXJ0eVsxXTtcblxuICBpZiAoIWRlc2lnblNldCkge1xuICAgIGRlc2lnblNldCA9IGRlc2lnbi5kZWZhdWx0U2V0O1xuICB9XG5cbiAgbGV0IGdyb3VwTmFtZSA9IHBhcmFtcy5ncm91cDtcbiAgbGV0IGxpbmU7XG4gIGlmIChkZXNpZ25TZXQucHJvcGVydHlHcm91cHMgJiYgZ3JvdXBOYW1lKSB7XG4gICAgbGluZSA9IGdyb3VwTmFtZS50b1VwcGVyQ2FzZSgpICsgXCIuXCIgKyBuYW1lO1xuICB9IGVsc2Uge1xuICAgIGxpbmUgPSBuYW1lO1xuICB9XG5cbiAgZm9yIChsZXQgW3BhcmFtTmFtZSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHBhcmFtcykpIHtcbiAgICBpZiAoZGVzaWduU2V0LnByb3BlcnR5R3JvdXBzICYmIHBhcmFtTmFtZSA9PSAnZ3JvdXAnKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBsZXQgcGFyYW1EZXNpZ24gPSBkZXNpZ25TZXQucGFyYW1bcGFyYW1OYW1lXTtcbiAgICBsZXQgbXVsdGlWYWx1ZSA9IHBhcmFtRGVzaWduICYmIHBhcmFtRGVzaWduLm11bHRpVmFsdWU7XG4gICAgaWYgKG11bHRpVmFsdWUgJiYgQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUubWFwKGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICB2YWwgPSBzdHJpbmdpZnkuX3JmYzY4NjhVbmVzY2FwZSh2YWwpO1xuICAgICAgICB2YWwgPSBzdHJpbmdpZnkucGFyYW1Qcm9wZXJ0eVZhbHVlKHZhbCwgcGFyYW1EZXNpZ24ubXVsdGlWYWx1ZVNlcGFyYXRlRFF1b3RlKTtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH0pO1xuICAgICAgdmFsdWUgPSBzdHJpbmdpZnkubXVsdGlWYWx1ZSh2YWx1ZSwgbXVsdGlWYWx1ZSwgXCJ1bmtub3duXCIsIG51bGwsIGRlc2lnblNldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlID0gc3RyaW5naWZ5Ll9yZmM2ODY4VW5lc2NhcGUodmFsdWUpO1xuICAgICAgdmFsdWUgPSBzdHJpbmdpZnkucGFyYW1Qcm9wZXJ0eVZhbHVlKHZhbHVlKTtcbiAgICB9XG5cbiAgICBsaW5lICs9ICc7JyArIHBhcmFtTmFtZS50b1VwcGVyQ2FzZSgpICsgJz0nICsgdmFsdWU7XG4gIH1cblxuICBpZiAocHJvcGVydHkubGVuZ3RoID09PSAzKSB7XG4gICAgLy8gSWYgdGhlcmUgYXJlIG5vIHZhbHVlcywgd2UgbXVzdCBhc3N1bWUgYSBibGFuayB2YWx1ZVxuICAgIHJldHVybiBsaW5lICsgJzonO1xuICB9XG5cbiAgbGV0IHZhbHVlVHlwZSA9IHByb3BlcnR5WzJdO1xuXG4gIGxldCBwcm9wRGV0YWlscztcbiAgbGV0IG11bHRpVmFsdWUgPSBmYWxzZTtcbiAgbGV0IHN0cnVjdHVyZWRWYWx1ZSA9IGZhbHNlO1xuICBsZXQgaXNEZWZhdWx0ID0gZmFsc2U7XG5cbiAgaWYgKGpzTmFtZSBpbiBkZXNpZ25TZXQucHJvcGVydHkpIHtcbiAgICBwcm9wRGV0YWlscyA9IGRlc2lnblNldC5wcm9wZXJ0eVtqc05hbWVdO1xuXG4gICAgaWYgKCdtdWx0aVZhbHVlJyBpbiBwcm9wRGV0YWlscykge1xuICAgICAgbXVsdGlWYWx1ZSA9IHByb3BEZXRhaWxzLm11bHRpVmFsdWU7XG4gICAgfVxuXG4gICAgaWYgKCgnc3RydWN0dXJlZFZhbHVlJyBpbiBwcm9wRGV0YWlscykgJiYgQXJyYXkuaXNBcnJheShwcm9wZXJ0eVszXSkpIHtcbiAgICAgIHN0cnVjdHVyZWRWYWx1ZSA9IHByb3BEZXRhaWxzLnN0cnVjdHVyZWRWYWx1ZTtcbiAgICB9XG5cbiAgICBpZiAoJ2RlZmF1bHRUeXBlJyBpbiBwcm9wRGV0YWlscykge1xuICAgICAgaWYgKHZhbHVlVHlwZSA9PT0gcHJvcERldGFpbHMuZGVmYXVsdFR5cGUpIHtcbiAgICAgICAgaXNEZWZhdWx0ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHZhbHVlVHlwZSA9PT0gREVGQVVMVF9WQUxVRV9UWVBFKSB7XG4gICAgICAgIGlzRGVmYXVsdCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmICh2YWx1ZVR5cGUgPT09IERFRkFVTFRfVkFMVUVfVFlQRSkge1xuICAgICAgaXNEZWZhdWx0ID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvLyBwdXNoIHRoZSBWQUxVRSBwcm9wZXJ0eSBpZiB0eXBlIGlzIG5vdCB0aGUgZGVmYXVsdFxuICAvLyBmb3IgdGhlIGN1cnJlbnQgcHJvcGVydHkuXG4gIGlmICghaXNEZWZhdWx0KSB7XG4gICAgLy8gdmFsdWUgd2lsbCBuZXZlciBjb250YWluIDsvOi8sIHNvIHdlIGRvbid0IGVzY2FwZSBpdCBoZXJlLlxuICAgIGxpbmUgKz0gJztWQUxVRT0nICsgdmFsdWVUeXBlLnRvVXBwZXJDYXNlKCk7XG4gIH1cblxuICBsaW5lICs9ICc6JztcblxuICBpZiAobXVsdGlWYWx1ZSAmJiBzdHJ1Y3R1cmVkVmFsdWUpIHtcbiAgICBsaW5lICs9IHN0cmluZ2lmeS5tdWx0aVZhbHVlKFxuICAgICAgcHJvcGVydHlbM10sIHN0cnVjdHVyZWRWYWx1ZSwgdmFsdWVUeXBlLCBtdWx0aVZhbHVlLCBkZXNpZ25TZXQsIHN0cnVjdHVyZWRWYWx1ZVxuICAgICk7XG4gIH0gZWxzZSBpZiAobXVsdGlWYWx1ZSkge1xuICAgIGxpbmUgKz0gc3RyaW5naWZ5Lm11bHRpVmFsdWUoXG4gICAgICBwcm9wZXJ0eS5zbGljZSgzKSwgbXVsdGlWYWx1ZSwgdmFsdWVUeXBlLCBudWxsLCBkZXNpZ25TZXQsIGZhbHNlXG4gICAgKTtcbiAgfSBlbHNlIGlmIChzdHJ1Y3R1cmVkVmFsdWUpIHtcbiAgICBsaW5lICs9IHN0cmluZ2lmeS5tdWx0aVZhbHVlKFxuICAgICAgcHJvcGVydHlbM10sIHN0cnVjdHVyZWRWYWx1ZSwgdmFsdWVUeXBlLCBudWxsLCBkZXNpZ25TZXQsIHN0cnVjdHVyZWRWYWx1ZVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgbGluZSArPSBzdHJpbmdpZnkudmFsdWUocHJvcGVydHlbM10sIHZhbHVlVHlwZSwgZGVzaWduU2V0LCBmYWxzZSk7XG4gIH1cblxuICByZXR1cm4gbm9Gb2xkID8gbGluZSA6IGZvbGRsaW5lKGxpbmUpO1xufTtcblxuLyoqXG4gKiBIYW5kbGVzIGVzY2FwaW5nIG9mIHByb3BlcnR5IHZhbHVlcyB0aGF0IG1heSBjb250YWluOlxuICpcbiAqICAgIENPTE9OICg6KSwgU0VNSUNPTE9OICg7KSwgb3IgQ09NTUEgKCwpXG4gKlxuICogSWYgYW55IG9mIHRoZSBhYm92ZSBhcmUgcHJlc2VudCB0aGUgcmVzdWx0IGlzIHdyYXBwZWRcbiAqIGluIGRvdWJsZSBxdW90ZXMuXG4gKlxuICogQGZ1bmN0aW9uIElDQUwuc3RyaW5naWZ5LnBhcmFtUHJvcGVydHlWYWx1ZVxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlICAgICAgUmF3IHByb3BlcnR5IHZhbHVlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGZvcmNlICAgICBJZiB2YWx1ZSBzaG91bGQgYmUgZXNjYXBlZCBldmVuIHdoZW4gdW5uZWNlc3NhcnlcbiAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICAgIEdpdmVuIG9yIGVzY2FwZWQgdmFsdWUgd2hlbiBuZWVkZWRcbiAqL1xuc3RyaW5naWZ5LnBhcmFtUHJvcGVydHlWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlLCBmb3JjZSkge1xuICBpZiAoIWZvcmNlICYmXG4gICAgICAodmFsdWUuaW5kZXhPZignLCcpID09PSAtMSkgJiZcbiAgICAgICh2YWx1ZS5pbmRleE9mKCc6JykgPT09IC0xKSAmJlxuICAgICAgKHZhbHVlLmluZGV4T2YoJzsnKSA9PT0gLTEpKSB7XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gJ1wiJyArIHZhbHVlICsgJ1wiJztcbn07XG5cbi8qKlxuICogQ29udmVydHMgYW4gYXJyYXkgb2YgaWNhbCB2YWx1ZXMgaW50byBhIHNpbmdsZVxuICogc3RyaW5nIGJhc2VkIG9uIGEgdHlwZSBhbmQgYSBkZWxpbWl0ZXIgdmFsdWUgKGxpa2UgXCIsXCIpLlxuICpcbiAqIEBmdW5jdGlvbiBJQ0FMLnN0cmluZ2lmeS5tdWx0aVZhbHVlXG4gKiBAcGFyYW0ge0FycmF5fSB2YWx1ZXMgICAgICBMaXN0IG9mIHZhbHVlcyB0byBjb252ZXJ0XG4gKiBAcGFyYW0ge1N0cmluZ30gZGVsaW0gICAgICBVc2VkIHRvIGpvaW4gdGhlIHZhbHVlcyAoXCIsXCIsIFwiO1wiLCBcIjpcIilcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlICAgICAgIExvd2VjYXNlIGljYWwgdmFsdWUgdHlwZVxuICogICAgICAgIChsaWtlIGJvb2xlYW4sIGRhdGUtdGltZSwgZXRjLi4pXG4gKiBAcGFyYW0gez9TdHJpbmd9IGlubmVyTXVsdGkgSWYgc2V0LCBlYWNoIHZhbHVlIHdpbGwgYWdhaW4gYmUgcHJvY2Vzc2VkXG4gKiAgICAgICAgVXNlZCBmb3Igc3RydWN0dXJlZCB2YWx1ZXNcbiAqIEBwYXJhbSB7ZGVzaWduU2V0fSBkZXNpZ25TZXRcbiAqICAgICAgICBUaGUgZGVzaWduIGRhdGEgdG8gdXNlIGZvciB0aGlzIHByb3BlcnR5XG4gKlxuICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgICAgaUNhbGVuZGFyL3ZDYXJkIHN0cmluZyBmb3IgdmFsdWVcbiAqL1xuc3RyaW5naWZ5Lm11bHRpVmFsdWUgPSBmdW5jdGlvbih2YWx1ZXMsIGRlbGltLCB0eXBlLCBpbm5lck11bHRpLCBkZXNpZ25TZXQsIHN0cnVjdHVyZWRWYWx1ZSkge1xuICBsZXQgcmVzdWx0ID0gJyc7XG4gIGxldCBsZW4gPSB2YWx1ZXMubGVuZ3RoO1xuICBsZXQgaSA9IDA7XG5cbiAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgIGlmIChpbm5lck11bHRpICYmIEFycmF5LmlzQXJyYXkodmFsdWVzW2ldKSkge1xuICAgICAgcmVzdWx0ICs9IHN0cmluZ2lmeS5tdWx0aVZhbHVlKHZhbHVlc1tpXSwgaW5uZXJNdWx0aSwgdHlwZSwgbnVsbCwgZGVzaWduU2V0LCBzdHJ1Y3R1cmVkVmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQgKz0gc3RyaW5naWZ5LnZhbHVlKHZhbHVlc1tpXSwgdHlwZSwgZGVzaWduU2V0LCBzdHJ1Y3R1cmVkVmFsdWUpO1xuICAgIH1cblxuICAgIGlmIChpICE9PSAobGVuIC0gMSkpIHtcbiAgICAgIHJlc3VsdCArPSBkZWxpbTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBQcm9jZXNzZXMgYSBzaW5nbGUgaWNhbCB2YWx1ZSBydW5zIHRoZSBhc3NvY2lhdGVkIFwidG9JQ0FMXCIgbWV0aG9kIGZyb20gdGhlXG4gKiBkZXNpZ24gdmFsdWUgdHlwZSBpZiBhdmFpbGFibGUgdG8gY29udmVydCB0aGUgdmFsdWUuXG4gKlxuICogQGZ1bmN0aW9uIElDQUwuc3RyaW5naWZ5LnZhbHVlXG4gKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IHZhbHVlICAgICAgIEEgZm9ybWF0dGVkIHZhbHVlXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAgICAgICAgICAgICAgIExvd2VyY2FzZSBpQ2FsZW5kYXIvdkNhcmQgdmFsdWUgdHlwZVxuICogIChsaWtlIGJvb2xlYW4sIGRhdGUtdGltZSwgZXRjLi4pXG4gKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgICAgICAgICAgIGlDYWxlbmRhci92Q2FyZCB2YWx1ZSBmb3Igc2luZ2xlIHZhbHVlXG4gKi9cbnN0cmluZ2lmeS52YWx1ZSA9IGZ1bmN0aW9uKHZhbHVlLCB0eXBlLCBkZXNpZ25TZXQsIHN0cnVjdHVyZWRWYWx1ZSkge1xuICBpZiAodHlwZSBpbiBkZXNpZ25TZXQudmFsdWUgJiYgJ3RvSUNBTCcgaW4gZGVzaWduU2V0LnZhbHVlW3R5cGVdKSB7XG4gICAgcmV0dXJuIGRlc2lnblNldC52YWx1ZVt0eXBlXS50b0lDQUwodmFsdWUsIHN0cnVjdHVyZWRWYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuLyoqXG4gKiBJbnRlcm5hbCBoZWxwZXIgZm9yIHJmYzY4NjguIEV4cG9zaW5nIHRoaXMgb24gSUNBTC5zdHJpbmdpZnkgc28gdGhhdFxuICogaGFja2VycyBjYW4gZGlzYWJsZSB0aGUgcmZjNjg2OCBwYXJzaW5nIGlmIHRoZSByZWFsbHkgbmVlZCB0by5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsICAgICAgICBUaGUgdmFsdWUgdG8gdW5lc2NhcGVcbiAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICAgIFRoZSBlc2NhcGVkIHZhbHVlXG4gKi9cbnN0cmluZ2lmeS5fcmZjNjg2OFVuZXNjYXBlID0gZnVuY3Rpb24odmFsKSB7XG4gIHJldHVybiB2YWwucmVwbGFjZSgvW1xcbl5cIl0vZywgZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBSRkM2ODY4X1JFUExBQ0VfTUFQW3hdO1xuICB9KTtcbn07XG5cbi8qIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKiBQb3J0aW9ucyBDb3B5cmlnaHQgKEMpIFBoaWxpcHAgS2V3aXNjaCAqL1xuXG5jb25zdCBOQU1FX0lOREVYJDEgPSAwO1xuY29uc3QgUFJPUF9JTkRFWCA9IDE7XG5jb25zdCBUWVBFX0lOREVYID0gMjtcbmNvbnN0IFZBTFVFX0lOREVYID0gMztcblxuLyoqXG4gKiBUaGlzIGxldHMgdHlwZXNjcmlwdCByZXNvbHZlIG91ciBjdXN0b20gdHlwZXMgaW4gdGhlXG4gKiBnZW5lcmF0ZWQgZC50cyBmaWxlcyAoanNkb2MgdHlwZWRlZnMgYXJlIGNvbnZlcnRlZCB0byB0eXBlc2NyaXB0IHR5cGVzKS5cbiAqIElnbm9yZSBwcmV2ZW50cyB0aGUgdHlwZWRlZnMgZnJvbSBiZWluZyBkb2N1bWVudGVkIG1vcmUgdGhhbiBvbmNlLlxuICogQGlnbm9yZVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vdHlwZXMuanNcIikuZGVzaWduU2V0fSBkZXNpZ25TZXRcbiAqIEltcG9ydHMgdGhlICdkZXNpZ25TZXQnIHR5cGUgZnJvbSB0aGUgXCJ0eXBlcy5qc1wiIG1vZHVsZVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vdHlwZXMuanNcIikuR2VvfSBHZW9cbiAqIEltcG9ydHMgdGhlICdHZW8nIHR5cGUgZnJvbSB0aGUgXCJ0eXBlcy5qc1wiIG1vZHVsZVxuICovXG5cbi8qKlxuICogUHJvdmlkZXMgYSBsYXllciBvbiB0b3Agb2YgdGhlIHJhdyBqQ2FsIG9iamVjdCBmb3IgbWFuaXB1bGF0aW5nIGEgc2luZ2xlIHByb3BlcnR5LCB3aXRoIGl0c1xuICogcGFyYW1ldGVycyBhbmQgdmFsdWUuXG4gKlxuICogQG1lbWJlcm9mIElDQUxcbiAqL1xuY2xhc3MgUHJvcGVydHkge1xuICAvKipcbiAgICogQ3JlYXRlIGFuIHtAbGluayBJQ0FMLlByb3BlcnR5fSBieSBwYXJzaW5nIHRoZSBwYXNzZWQgaUNhbGVuZGFyIHN0cmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciAgICAgICAgICAgIFRoZSBpQ2FsZW5kYXIgc3RyaW5nIHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7ZGVzaWduU2V0PX0gZGVzaWduU2V0ICBUaGUgZGVzaWduIGRhdGEgdG8gdXNlIGZvciB0aGlzIHByb3BlcnR5XG4gICAqIEByZXR1cm4ge1Byb3BlcnR5fSAgICAgICAgICAgICBUaGUgY3JlYXRlZCBpQ2FsZW5kYXIgcHJvcGVydHlcbiAgICovXG4gIHN0YXRpYyBmcm9tU3RyaW5nKHN0ciwgZGVzaWduU2V0KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9wZXJ0eShwYXJzZS5wcm9wZXJ0eShzdHIsIGRlc2lnblNldCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5Qcm9wZXJ0eSBpbnN0YW5jZS5cbiAgICpcbiAgICogSXQgaXMgaW1wb3J0YW50IHRvIG5vdGUgdGhhdCBtdXRhdGlvbnMgZG9uZSBpbiB0aGUgd3JhcHBlciBkaXJlY3RseSBtdXRhdGUgdGhlIGpDYWwgb2JqZWN0IHVzZWRcbiAgICogdG8gaW5pdGlhbGl6ZS5cbiAgICpcbiAgICogQ2FuIGFsc28gYmUgdXNlZCB0byBjcmVhdGUgbmV3IHByb3BlcnRpZXMgYnkgcGFzc2luZyB0aGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgKGFzIGEgU3RyaW5nKS5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheXxTdHJpbmd9IGpDYWwgICAgICAgICBSYXcgakNhbCByZXByZXNlbnRhdGlvbiBPUiB0aGUgbmV3IG5hbWUgb2YgdGhlIHByb3BlcnR5XG4gICAqIEBwYXJhbSB7Q29tcG9uZW50PX0gcGFyZW50ICAgICAgICAgUGFyZW50IGNvbXBvbmVudFxuICAgKi9cbiAgY29uc3RydWN0b3IoakNhbCwgcGFyZW50KSB7XG4gICAgdGhpcy5fcGFyZW50ID0gcGFyZW50IHx8IG51bGw7XG5cbiAgICBpZiAodHlwZW9mKGpDYWwpID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gV2UgYXJlIGNyZWF0aW5nIHRoZSBwcm9wZXJ0eSBieSBuYW1lIGFuZCBuZWVkIHRvIGRldGVjdCB0aGUgdHlwZVxuICAgICAgdGhpcy5qQ2FsID0gW2pDYWwsIHt9LCBkZXNpZ24uZGVmYXVsdFR5cGVdO1xuICAgICAgdGhpcy5qQ2FsW1RZUEVfSU5ERVhdID0gdGhpcy5nZXREZWZhdWx0VHlwZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmpDYWwgPSBqQ2FsO1xuICAgIH1cbiAgICB0aGlzLl91cGRhdGVUeXBlKCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHZhbHVlIHR5cGUgZm9yIHRoaXMgcHJvcGVydHlcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCB0eXBlKCkge1xuICAgIHJldHVybiB0aGlzLmpDYWxbVFlQRV9JTkRFWF07XG4gIH1cblxuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhpcyBwcm9wZXJ0eSwgaW4gbG93ZXJjYXNlLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuakNhbFtOQU1FX0lOREVYJDFdO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBwYXJlbnQgY29tcG9uZW50IGZvciB0aGlzIHByb3BlcnR5LlxuICAgKiBAdHlwZSB7Q29tcG9uZW50fVxuICAgKi9cbiAgZ2V0IHBhcmVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFyZW50O1xuICB9XG5cbiAgc2V0IHBhcmVudChwKSB7XG4gICAgLy8gQmVmb3JlIHNldHRpbmcgdGhlIHBhcmVudCwgY2hlY2sgaWYgdGhlIGRlc2lnbiBzZXQgaGFzIGNoYW5nZWQuIElmIGl0XG4gICAgLy8gaGFzLCB3ZSBsYXRlciBuZWVkIHRvIHVwZGF0ZSB0aGUgdHlwZSBpZiBpdCB3YXMgdW5rbm93biBiZWZvcmUuXG4gICAgbGV0IGRlc2lnblNldENoYW5nZWQgPSAhdGhpcy5fcGFyZW50IHx8IChwICYmIHAuX2Rlc2lnblNldCAhPSB0aGlzLl9wYXJlbnQuX2Rlc2lnblNldCk7XG5cbiAgICB0aGlzLl9wYXJlbnQgPSBwO1xuXG4gICAgaWYgKHRoaXMudHlwZSA9PSBkZXNpZ24uZGVmYXVsdFR5cGUgJiYgZGVzaWduU2V0Q2hhbmdlZCkge1xuICAgICAgdGhpcy5qQ2FsW1RZUEVfSU5ERVhdID0gdGhpcy5nZXREZWZhdWx0VHlwZSgpO1xuICAgICAgdGhpcy5fdXBkYXRlVHlwZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZGVzaWduIHNldCBmb3IgdGhpcyBwcm9wZXJ0eSwgZS5nLiBpY2FsZW5kYXIgdnMgdmNhcmRcbiAgICpcbiAgICogQHR5cGUge2Rlc2lnblNldH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldCBfZGVzaWduU2V0KCkge1xuICAgIHJldHVybiB0aGlzLnBhcmVudCA/IHRoaXMucGFyZW50Ll9kZXNpZ25TZXQgOiBkZXNpZ24uZGVmYXVsdFNldDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSB0eXBlIG1ldGFkYXRhIGZyb20gdGhlIGN1cnJlbnQgakNhbCB0eXBlIGFuZCBkZXNpZ24gc2V0LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3VwZGF0ZVR5cGUoKSB7XG4gICAgbGV0IGRlc2lnblNldCA9IHRoaXMuX2Rlc2lnblNldDtcblxuICAgIGlmICh0aGlzLnR5cGUgaW4gZGVzaWduU2V0LnZhbHVlKSB7XG4gICAgICBpZiAoJ2RlY29yYXRlJyBpbiBkZXNpZ25TZXQudmFsdWVbdGhpcy50eXBlXSkge1xuICAgICAgICB0aGlzLmlzRGVjb3JhdGVkID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaXNEZWNvcmF0ZWQgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMubmFtZSBpbiBkZXNpZ25TZXQucHJvcGVydHkpIHtcbiAgICAgICAgdGhpcy5pc011bHRpVmFsdWUgPSAoJ211bHRpVmFsdWUnIGluIGRlc2lnblNldC5wcm9wZXJ0eVt0aGlzLm5hbWVdKTtcbiAgICAgICAgdGhpcy5pc1N0cnVjdHVyZWRWYWx1ZSA9ICgnc3RydWN0dXJlZFZhbHVlJyBpbiBkZXNpZ25TZXQucHJvcGVydHlbdGhpcy5uYW1lXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEh5ZHJhdGUgYSBzaW5nbGUgdmFsdWUuIFRoZSBhY3Qgb2YgaHlkcmF0aW5nIG1lYW5zIHR1cm5pbmcgdGhlIHJhdyBqQ2FsXG4gICAqIHZhbHVlIGludG8gYSBwb3RlbnRpYWxseSB3cmFwcGVkIG9iamVjdCwgZm9yIGV4YW1wbGUge0BsaW5rIElDQUwuVGltZX0uXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleCAgICAgICAgVGhlIGluZGV4IG9mIHRoZSB2YWx1ZSB0byBoeWRyYXRlXG4gICAqIEByZXR1cm4gez9PYmplY3R9ICAgICAgICAgICAgIFRoZSBkZWNvcmF0ZWQgdmFsdWUuXG4gICAqL1xuICBfaHlkcmF0ZVZhbHVlKGluZGV4KSB7XG4gICAgaWYgKHRoaXMuX3ZhbHVlcyAmJiB0aGlzLl92YWx1ZXNbaW5kZXhdKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdmFsdWVzW2luZGV4XTtcbiAgICB9XG5cbiAgICAvLyBmb3IgdGhlIGNhc2Ugd2hlcmUgdGhlcmUgaXMgbm8gdmFsdWUuXG4gICAgaWYgKHRoaXMuakNhbC5sZW5ndGggPD0gKFZBTFVFX0lOREVYICsgaW5kZXgpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc0RlY29yYXRlZCkge1xuICAgICAgaWYgKCF0aGlzLl92YWx1ZXMpIHtcbiAgICAgICAgdGhpcy5fdmFsdWVzID0gW107XG4gICAgICB9XG4gICAgICByZXR1cm4gKHRoaXMuX3ZhbHVlc1tpbmRleF0gPSB0aGlzLl9kZWNvcmF0ZShcbiAgICAgICAgdGhpcy5qQ2FsW1ZBTFVFX0lOREVYICsgaW5kZXhdXG4gICAgICApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuakNhbFtWQUxVRV9JTkRFWCArIGluZGV4XTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGVjb3JhdGUgYSBzaW5nbGUgdmFsdWUsIHJldHVybmluZyBpdHMgd3JhcHBlZCBvYmplY3QuIFRoaXMgaXMgdXNlZCBieVxuICAgKiB0aGUgaHlkcmF0ZSBmdW5jdGlvbiB0byBhY3R1YWxseSB3cmFwIHRoZSB2YWx1ZS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHs/fSB2YWx1ZSAgICAgICAgIFRoZSB2YWx1ZSB0byBkZWNvcmF0ZVxuICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgVGhlIGRlY29yYXRlZCB2YWx1ZVxuICAgKi9cbiAgX2RlY29yYXRlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Rlc2lnblNldC52YWx1ZVt0aGlzLnR5cGVdLmRlY29yYXRlKHZhbHVlLCB0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbmRlY29yYXRlIGEgc2luZ2xlIHZhbHVlLCByZXR1cm5pbmcgaXRzIHJhdyBqQ2FsIGRhdGEuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZSAgICAgICAgIFRoZSB2YWx1ZSB0byB1bmRlY29yYXRlXG4gICAqIEByZXR1cm4gez99ICAgICAgICAgICAgICAgICAgIFRoZSB1bmRlY29yYXRlZCB2YWx1ZVxuICAgKi9cbiAgX3VuZGVjb3JhdGUodmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5fZGVzaWduU2V0LnZhbHVlW3RoaXMudHlwZV0udW5kZWNvcmF0ZSh2YWx1ZSwgdGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWUgYXQgdGhlIGdpdmVuIGluZGV4IHdoaWxlIGFsc28gaHlkcmF0aW5nIGl0LiBUaGUgcGFzc2VkXG4gICAqIHZhbHVlIGNhbiBlaXRoZXIgYmUgYSBkZWNvcmF0ZWQgb3IgdW5kZWNvcmF0ZWQgdmFsdWUuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7P30gdmFsdWUgICAgICAgICAgICAgVGhlIHZhbHVlIHRvIHNldFxuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXggICAgICAgIFRoZSBpbmRleCB0byBzZXQgaXQgYXRcbiAgICovXG4gIF9zZXREZWNvcmF0ZWRWYWx1ZSh2YWx1ZSwgaW5kZXgpIHtcbiAgICBpZiAoIXRoaXMuX3ZhbHVlcykge1xuICAgICAgdGhpcy5fdmFsdWVzID0gW107XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZih2YWx1ZSkgPT09ICdvYmplY3QnICYmICdpY2FsdHlwZScgaW4gdmFsdWUpIHtcbiAgICAgIC8vIGRlY29yYXRlZCB2YWx1ZVxuICAgICAgdGhpcy5qQ2FsW1ZBTFVFX0lOREVYICsgaW5kZXhdID0gdGhpcy5fdW5kZWNvcmF0ZSh2YWx1ZSk7XG4gICAgICB0aGlzLl92YWx1ZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHVuZGVjb3JhdGVkIHZhbHVlXG4gICAgICB0aGlzLmpDYWxbVkFMVUVfSU5ERVggKyBpbmRleF0gPSB2YWx1ZTtcbiAgICAgIHRoaXMuX3ZhbHVlc1tpbmRleF0gPSB0aGlzLl9kZWNvcmF0ZSh2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYSBwYXJhbWV0ZXIgb24gdGhlIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gICAgICAgIG5hbWUgICBQYXJhbWV0ZXIgbmFtZSAobG93ZXJjYXNlKVxuICAgKiBAcmV0dXJuIHtBcnJheXxTdHJpbmd9ICAgICAgICBQYXJhbWV0ZXIgdmFsdWVcbiAgICovXG4gIGdldFBhcmFtZXRlcihuYW1lKSB7XG4gICAgaWYgKG5hbWUgaW4gdGhpcy5qQ2FsW1BST1BfSU5ERVhdKSB7XG4gICAgICByZXR1cm4gdGhpcy5qQ2FsW1BST1BfSU5ERVhdW25hbWVdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGZpcnN0IHBhcmFtZXRlciBvbiB0aGUgcHJvcGVydHkuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSAgICAgICAgbmFtZSAgIFBhcmFtZXRlciBuYW1lIChsb3dlcmNhc2UpXG4gICAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgIFBhcmFtZXRlciB2YWx1ZVxuICAgKi9cbiAgZ2V0Rmlyc3RQYXJhbWV0ZXIobmFtZSkge1xuICAgIGxldCBwYXJhbWV0ZXJzID0gdGhpcy5nZXRQYXJhbWV0ZXIobmFtZSk7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShwYXJhbWV0ZXJzKSkge1xuICAgICAgcmV0dXJuIHBhcmFtZXRlcnNbMF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcmFtZXRlcnM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBhIHBhcmFtZXRlciBvbiB0aGUgcHJvcGVydHkuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSAgICAgICBuYW1lICAgICBUaGUgcGFyYW1ldGVyIG5hbWVcbiAgICogQHBhcmFtIHtBcnJheXxTdHJpbmd9IHZhbHVlICAgIFRoZSBwYXJhbWV0ZXIgdmFsdWVcbiAgICovXG4gIHNldFBhcmFtZXRlcihuYW1lLCB2YWx1ZSkge1xuICAgIGxldCBsY25hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICBsY25hbWUgaW4gdGhpcy5fZGVzaWduU2V0LnBhcmFtICYmXG4gICAgICAgICdtdWx0aVZhbHVlJyBpbiB0aGlzLl9kZXNpZ25TZXQucGFyYW1bbGNuYW1lXSkge1xuICAgICAgICB2YWx1ZSA9IFt2YWx1ZV07XG4gICAgfVxuICAgIHRoaXMuakNhbFtQUk9QX0lOREVYXVtuYW1lXSA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBwYXJhbWV0ZXJcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgICAgIFRoZSBwYXJhbWV0ZXIgbmFtZVxuICAgKi9cbiAgcmVtb3ZlUGFyYW1ldGVyKG5hbWUpIHtcbiAgICBkZWxldGUgdGhpcy5qQ2FsW1BST1BfSU5ERVhdW25hbWVdO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZGVmYXVsdCB0eXBlIGJhc2VkIG9uIHRoaXMgcHJvcGVydHkncyBuYW1lLlxuICAgKlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICBUaGUgZGVmYXVsdCB0eXBlIGZvciB0aGlzIHByb3BlcnR5XG4gICAqL1xuICBnZXREZWZhdWx0VHlwZSgpIHtcbiAgICBsZXQgbmFtZSA9IHRoaXMuakNhbFtOQU1FX0lOREVYJDFdO1xuICAgIGxldCBkZXNpZ25TZXQgPSB0aGlzLl9kZXNpZ25TZXQ7XG5cbiAgICBpZiAobmFtZSBpbiBkZXNpZ25TZXQucHJvcGVydHkpIHtcbiAgICAgIGxldCBkZXRhaWxzID0gZGVzaWduU2V0LnByb3BlcnR5W25hbWVdO1xuICAgICAgaWYgKCdkZWZhdWx0VHlwZScgaW4gZGV0YWlscykge1xuICAgICAgICByZXR1cm4gZGV0YWlscy5kZWZhdWx0VHlwZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRlc2lnbi5kZWZhdWx0VHlwZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHR5cGUgb2YgcHJvcGVydHkgYW5kIGNsZWFycyBvdXQgYW55IGV4aXN0aW5nIHZhbHVlcyBvZiB0aGUgY3VycmVudFxuICAgKiB0eXBlLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAgICAgTmV3IGlDQUwgdHlwZSAoc2VlIGRlc2lnbi4qLnZhbHVlcylcbiAgICovXG4gIHJlc2V0VHlwZSh0eXBlKSB7XG4gICAgdGhpcy5yZW1vdmVBbGxWYWx1ZXMoKTtcbiAgICB0aGlzLmpDYWxbVFlQRV9JTkRFWF0gPSB0eXBlO1xuICAgIHRoaXMuX3VwZGF0ZVR5cGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyB0aGUgZmlyc3QgcHJvcGVydHkgdmFsdWUuXG4gICAqXG4gICAqIEByZXR1cm4ge0JpbmFyeSB8IER1cmF0aW9uIHwgUGVyaW9kIHxcbiAgICogUmVjdXIgfCBUaW1lIHwgVXRjT2Zmc2V0IHwgR2VvIHwgc3RyaW5nIHwgbnVsbH0gICAgICAgICBGaXJzdCBwcm9wZXJ0eSB2YWx1ZVxuICAgKi9cbiAgZ2V0Rmlyc3RWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5faHlkcmF0ZVZhbHVlKDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYWxsIHZhbHVlcyBvbiB0aGUgcHJvcGVydHkuXG4gICAqXG4gICAqIE5PVEU6IHRoaXMgY3JlYXRlcyBhbiBhcnJheSBkdXJpbmcgZWFjaCBjYWxsLlxuICAgKlxuICAgKiBAcmV0dXJuIHtBcnJheX0gICAgICAgICAgTGlzdCBvZiB2YWx1ZXNcbiAgICovXG4gIGdldFZhbHVlcygpIHtcbiAgICBsZXQgbGVuID0gdGhpcy5qQ2FsLmxlbmd0aCAtIFZBTFVFX0lOREVYO1xuXG4gICAgaWYgKGxlbiA8IDEpIHtcbiAgICAgIC8vIGl0IGlzIHBvc3NpYmxlIGZvciBhIHByb3BlcnR5IHRvIGhhdmUgbm8gdmFsdWUuXG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCByZXN1bHQgPSBbXTtcblxuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHJlc3VsdFtpXSA9IHRoaXMuX2h5ZHJhdGVWYWx1ZShpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYWxsIHZhbHVlcyBmcm9tIHRoaXMgcHJvcGVydHlcbiAgICovXG4gIHJlbW92ZUFsbFZhbHVlcygpIHtcbiAgICBpZiAodGhpcy5fdmFsdWVzKSB7XG4gICAgICB0aGlzLl92YWx1ZXMubGVuZ3RoID0gMDtcbiAgICB9XG4gICAgdGhpcy5qQ2FsLmxlbmd0aCA9IDM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWVzIG9mIHRoZSBwcm9wZXJ0eS4gIFdpbGwgb3ZlcndyaXRlIHRoZSBleGlzdGluZyB2YWx1ZXMuXG4gICAqIFRoaXMgY2FuIG9ubHkgYmUgdXNlZCBmb3IgbXVsdGktdmFsdWUgcHJvcGVydGllcy5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gdmFsdWVzICAgIEFuIGFycmF5IG9mIHZhbHVlc1xuICAgKi9cbiAgc2V0VmFsdWVzKHZhbHVlcykge1xuICAgIGlmICghdGhpcy5pc011bHRpVmFsdWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgdGhpcy5uYW1lICsgJzogZG9lcyBub3Qgbm90IHN1cHBvcnQgbXVsaXRWYWx1ZS5cXG4nICtcbiAgICAgICAgJ292ZXJyaWRlIGlzTXVsdGlWYWx1ZSdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IGxlbiA9IHZhbHVlcy5sZW5ndGg7XG4gICAgbGV0IGkgPSAwO1xuICAgIHRoaXMucmVtb3ZlQWxsVmFsdWVzKCk7XG5cbiAgICBpZiAobGVuID4gMCAmJlxuICAgICAgICB0eXBlb2YodmFsdWVzWzBdKSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgJ2ljYWx0eXBlJyBpbiB2YWx1ZXNbMF0pIHtcbiAgICAgIHRoaXMucmVzZXRUeXBlKHZhbHVlc1swXS5pY2FsdHlwZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNEZWNvcmF0ZWQpIHtcbiAgICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdGhpcy5fc2V0RGVjb3JhdGVkVmFsdWUodmFsdWVzW2ldLCBpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB0aGlzLmpDYWxbVkFMVUVfSU5ERVggKyBpXSA9IHZhbHVlc1tpXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgcHJvcGVydHkuIElmIHRoaXMgaXMgYSBtdWx0aS12YWx1ZVxuICAgKiBwcm9wZXJ0eSwgYWxsIG90aGVyIHZhbHVlcyB3aWxsIGJlIHJlbW92ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gdmFsdWUgICAgIE5ldyBwcm9wZXJ0eSB2YWx1ZS5cbiAgICovXG4gIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgdGhpcy5yZW1vdmVBbGxWYWx1ZXMoKTtcbiAgICBpZiAodHlwZW9mKHZhbHVlKSA9PT0gJ29iamVjdCcgJiYgJ2ljYWx0eXBlJyBpbiB2YWx1ZSkge1xuICAgICAgdGhpcy5yZXNldFR5cGUodmFsdWUuaWNhbHR5cGUpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzRGVjb3JhdGVkKSB7XG4gICAgICB0aGlzLl9zZXREZWNvcmF0ZWRWYWx1ZSh2YWx1ZSwgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuakNhbFtWQUxVRV9JTkRFWF0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgT2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgY29tcG9uZW50LiBUaGUgcmV0dXJuZWQgb2JqZWN0XG4gICAqIGlzIGEgbGl2ZSBqQ2FsIG9iamVjdCBhbmQgc2hvdWxkIGJlIGNsb25lZCBpZiBtb2RpZmllZC5cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB0aGlzLmpDYWw7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGNvbXBvbmVudC5cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgdG9JQ0FMU3RyaW5nKCkge1xuICAgIHJldHVybiBzdHJpbmdpZnkucHJvcGVydHkoXG4gICAgICB0aGlzLmpDYWwsIHRoaXMuX2Rlc2lnblNldCwgdHJ1ZVxuICAgICk7XG4gIH1cbn1cblxuLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cblxuLyoqXG4gKiBUaGlzIGxldHMgdHlwZXNjcmlwdCByZXNvbHZlIG91ciBjdXN0b20gdHlwZXMgaW4gdGhlXG4gKiBnZW5lcmF0ZWQgZC50cyBmaWxlcyAoanNkb2MgdHlwZWRlZnMgYXJlIGNvbnZlcnRlZCB0byB0eXBlc2NyaXB0IHR5cGVzKS5cbiAqIElnbm9yZSBwcmV2ZW50cyB0aGUgdHlwZWRlZnMgZnJvbSBiZWluZyBkb2N1bWVudGVkIG1vcmUgdGhhbiBvbmNlLlxuICogQGlnbm9yZVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vdHlwZXMuanNcIikuZGVzaWduU2V0fSBkZXNpZ25TZXRcbiAqIEltcG9ydHMgdGhlICdkZXNpZ25TZXQnIHR5cGUgZnJvbSB0aGUgXCJ0eXBlcy5qc1wiIG1vZHVsZVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vdHlwZXMuanNcIikuR2VvfSBHZW9cbiAqIEltcG9ydHMgdGhlICdHZW8nIHR5cGUgZnJvbSB0aGUgXCJ0eXBlcy5qc1wiIG1vZHVsZVxuICovXG5cbmNvbnN0IE5BTUVfSU5ERVggPSAwO1xuY29uc3QgUFJPUEVSVFlfSU5ERVggPSAxO1xuY29uc3QgQ09NUE9ORU5UX0lOREVYID0gMjtcblxuY29uc3QgUFJPUEVSVFlfTkFNRV9JTkRFWCA9IDA7XG5jb25zdCBQUk9QRVJUWV9WQUxVRV9JTkRFWCA9IDM7XG5cbi8qKlxuICogV3JhcHMgYSBqQ2FsIGNvbXBvbmVudCwgYWRkaW5nIGNvbnZlbmllbmNlIG1ldGhvZHMgdG8gYWRkLCByZW1vdmUgYW5kIHVwZGF0ZSBzdWJjb21wb25lbnRzIGFuZFxuICogcHJvcGVydGllcy5cbiAqXG4gKiBAbWVtYmVyb2YgSUNBTFxuICovXG5jbGFzcyBDb21wb25lbnQge1xuICAvKipcbiAgICogQ3JlYXRlIGFuIHtAbGluayBJQ0FMLkNvbXBvbmVudH0gYnkgcGFyc2luZyB0aGUgcGFzc2VkIGlDYWxlbmRhciBzdHJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgICAgICAgIFRoZSBpQ2FsZW5kYXIgc3RyaW5nIHRvIHBhcnNlXG4gICAqL1xuICBzdGF0aWMgZnJvbVN0cmluZyhzdHIpIHtcbiAgICByZXR1cm4gbmV3IENvbXBvbmVudChwYXJzZS5jb21wb25lbnQoc3RyKSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBDb21wb25lbnQgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl8U3RyaW5nfSBqQ2FsICAgICAgICAgUmF3IGpDYWwgY29tcG9uZW50IGRhdGEgT1IgbmFtZSBvZiBuZXdcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudFxuICAgKiBAcGFyYW0ge0NvbXBvbmVudD19IHBhcmVudCAgICAgUGFyZW50IGNvbXBvbmVudCB0byBhc3NvY2lhdGVcbiAgICovXG4gIGNvbnN0cnVjdG9yKGpDYWwsIHBhcmVudCkge1xuICAgIGlmICh0eXBlb2YoakNhbCkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBqQ2FsIHNwZWMgKG5hbWUsIHByb3BlcnRpZXMsIGNvbXBvbmVudHMpXG4gICAgICBqQ2FsID0gW2pDYWwsIFtdLCBbXV07XG4gICAgfVxuXG4gICAgLy8gbW9zdGx5IGZvciBsZWdhY3kgcmVhc29ucy5cbiAgICB0aGlzLmpDYWwgPSBqQ2FsO1xuXG4gICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQgfHwgbnVsbDtcblxuICAgIGlmICghdGhpcy5wYXJlbnQgJiYgdGhpcy5uYW1lID09PSAndmNhbGVuZGFyJykge1xuICAgICAgdGhpcy5fdGltZXpvbmVDYWNoZSA9IG5ldyBNYXAoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSHlkcmF0ZWQgcHJvcGVydGllcyBhcmUgaW5zZXJ0ZWQgaW50byB0aGUgX3Byb3BlcnRpZXMgYXJyYXkgYXQgdGhlIHNhbWVcbiAgICogcG9zaXRpb24gYXMgaW4gdGhlIGpDYWwgYXJyYXksIHNvIGl0IGlzIHBvc3NpYmxlIHRoYXQgdGhlIGFycmF5IGNvbnRhaW5zXG4gICAqIHVuZGVmaW5lZCB2YWx1ZXMgZm9yIHVuaHlkcmRhdGVkIHByb3BlcnRpZXMuIFRvIGF2b2lkIGl0ZXJhdGluZyB0aGVcbiAgICogYXJyYXkgd2hlbiBjaGVja2luZyBpZiBhbGwgcHJvcGVydGllcyBoYXZlIGJlZW4gaHlkcmF0ZWQsIHdlIHNhdmUgdGhlXG4gICAqIGNvdW50IGhlcmUuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaHlkcmF0ZWRQcm9wZXJ0eUNvdW50ID0gMDtcblxuICAvKipcbiAgICogVGhlIHNhbWUgY291bnQgYXMgZm9yIF9oeWRyYXRlZFByb3BlcnR5Q291bnQsIGJ1dCBmb3Igc3ViY29tcG9uZW50c1xuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2h5ZHJhdGVkQ29tcG9uZW50Q291bnQgPSAwO1xuXG4gIC8qKlxuICAgKiBBIGNhY2hlIG9mIGh5ZHJhdGVkIHRpbWUgem9uZSBvYmplY3RzIHdoaWNoIG1heSBiZSB1c2VkIGJ5IGNvbnN1bWVycywga2V5ZWRcbiAgICogYnkgdGltZSB6b25lIElELlxuICAgKlxuICAgKiBAdHlwZSB7TWFwfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3RpbWV6b25lQ2FjaGUgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2NvbXBvbmVudHMgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Byb3BlcnRpZXMgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGlzIGNvbXBvbmVudFxuICAgKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuakNhbFtOQU1FX0lOREVYXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZGVzaWduIHNldCBmb3IgdGhpcyBjb21wb25lbnQsIGUuZy4gaWNhbGVuZGFyIHZzIHZjYXJkXG4gICAqXG4gICAqIEB0eXBlIHtkZXNpZ25TZXR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXQgX2Rlc2lnblNldCgpIHtcbiAgICBsZXQgcGFyZW50RGVzaWduID0gdGhpcy5wYXJlbnQgJiYgdGhpcy5wYXJlbnQuX2Rlc2lnblNldDtcbiAgICBpZiAoIXBhcmVudERlc2lnbiAmJiB0aGlzLm5hbWUgPT0gXCJ2Y2FyZFwiKSB7XG4gICAgICAvLyBXZSBjYW4ndCBkZWNpZGUgb24gdmNhcmQzIHZzIHZjYXJkNCBqdXN0IGJhc2VkIG9uIHRoZSBjb21wb25lbnQgbmFtZSwgdGhlIHZlcnNpb24gbnVtYmVyIGlzXG4gICAgICAvLyBpbiB0aGUgdmVyc2lvbiBwcm9wZXJ0eS4gV2UgYWxzbyBjYW4ndCB1c2UgaHlkcmF0ZWQgcHJvcGVydGllcyBoZXJlIGJlY2F1c2UgaXQgd291bGQgbGVhZFxuICAgICAgLy8gdG8gcmVjdXJzaW9uLCBidXQgdGhlIHNwZWMgc2F5cyB0aGF0IHRoZSB2ZXJzaW9uIHByb3BlcnR5IG5lZWRzIHRvIGJlIHRoZSB2ZXJ5IGZpcnN0IG9uZS5cbiAgICAgIGxldCB2ZXJzaW9uUHJvcCA9IHRoaXMuakNhbFtQUk9QRVJUWV9JTkRFWF0/LlswXTtcblxuICAgICAgaWYgKHZlcnNpb25Qcm9wICYmIHZlcnNpb25Qcm9wW1BST1BFUlRZX05BTUVfSU5ERVhdID09IFwidmVyc2lvblwiICYmIHZlcnNpb25Qcm9wW1BST1BFUlRZX1ZBTFVFX0lOREVYXSA9PSBcIjMuMFwiKSB7XG4gICAgICAgIHJldHVybiBkZXNpZ24uZ2V0RGVzaWduU2V0KFwidmNhcmQzXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwYXJlbnREZXNpZ24gfHwgZGVzaWduLmdldERlc2lnblNldCh0aGlzLm5hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaHlkcmF0ZUNvbXBvbmVudChpbmRleCkge1xuICAgIGlmICghdGhpcy5fY29tcG9uZW50cykge1xuICAgICAgdGhpcy5fY29tcG9uZW50cyA9IFtdO1xuICAgICAgdGhpcy5faHlkcmF0ZWRDb21wb25lbnRDb3VudCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2NvbXBvbmVudHNbaW5kZXhdKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29tcG9uZW50c1tpbmRleF07XG4gICAgfVxuXG4gICAgbGV0IGNvbXAgPSBuZXcgQ29tcG9uZW50KFxuICAgICAgdGhpcy5qQ2FsW0NPTVBPTkVOVF9JTkRFWF1baW5kZXhdLFxuICAgICAgdGhpc1xuICAgICk7XG5cbiAgICB0aGlzLl9oeWRyYXRlZENvbXBvbmVudENvdW50Kys7XG4gICAgcmV0dXJuICh0aGlzLl9jb21wb25lbnRzW2luZGV4XSA9IGNvbXApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaHlkcmF0ZVByb3BlcnR5KGluZGV4KSB7XG4gICAgaWYgKCF0aGlzLl9wcm9wZXJ0aWVzKSB7XG4gICAgICB0aGlzLl9wcm9wZXJ0aWVzID0gW107XG4gICAgICB0aGlzLl9oeWRyYXRlZFByb3BlcnR5Q291bnQgPSAwO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9wcm9wZXJ0aWVzW2luZGV4XSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Byb3BlcnRpZXNbaW5kZXhdO1xuICAgIH1cblxuICAgIGxldCBwcm9wID0gbmV3IFByb3BlcnR5KFxuICAgICAgdGhpcy5qQ2FsW1BST1BFUlRZX0lOREVYXVtpbmRleF0sXG4gICAgICB0aGlzXG4gICAgKTtcblxuICAgIHRoaXMuX2h5ZHJhdGVkUHJvcGVydHlDb3VudCsrO1xuICAgIHJldHVybiAodGhpcy5fcHJvcGVydGllc1tpbmRleF0gPSBwcm9wKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyBmaXJzdCBzdWIgY29tcG9uZW50LCBvcHRpb25hbGx5IGZpbHRlcmVkIGJ5IG5hbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nPX0gbmFtZSAgICAgICAgT3B0aW9uYWwgbmFtZSB0byBmaWx0ZXIgYnlcbiAgICogQHJldHVybiB7P0NvbXBvbmVudH0gICAgIFRoZSBmb3VuZCBzdWJjb21wb25lbnRcbiAgICovXG4gIGdldEZpcnN0U3ViY29tcG9uZW50KG5hbWUpIHtcbiAgICBpZiAobmFtZSkge1xuICAgICAgbGV0IGkgPSAwO1xuICAgICAgbGV0IGNvbXBzID0gdGhpcy5qQ2FsW0NPTVBPTkVOVF9JTkRFWF07XG4gICAgICBsZXQgbGVuID0gY29tcHMubGVuZ3RoO1xuXG4gICAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmIChjb21wc1tpXVtOQU1FX0lOREVYXSA9PT0gbmFtZSkge1xuICAgICAgICAgIGxldCByZXN1bHQgPSB0aGlzLl9oeWRyYXRlQ29tcG9uZW50KGkpO1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuakNhbFtDT01QT05FTlRfSU5ERVhdLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faHlkcmF0ZUNvbXBvbmVudCgwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBlbnN1cmUgd2UgcmV0dXJuIGEgdmFsdWUgKHN0cmljdCBtb2RlKVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmRzIGFsbCBzdWIgY29tcG9uZW50cywgb3B0aW9uYWxseSBmaWx0ZXJpbmcgYnkgbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmc9fSBuYW1lICAgICAgICAgICAgT3B0aW9uYWwgbmFtZSB0byBmaWx0ZXIgYnlcbiAgICogQHJldHVybiB7Q29tcG9uZW50W119ICAgICAgIFRoZSBmb3VuZCBzdWIgY29tcG9uZW50c1xuICAgKi9cbiAgZ2V0QWxsU3ViY29tcG9uZW50cyhuYW1lKSB7XG4gICAgbGV0IGpDYWxMZW4gPSB0aGlzLmpDYWxbQ09NUE9ORU5UX0lOREVYXS5sZW5ndGg7XG4gICAgbGV0IGkgPSAwO1xuXG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIGxldCBjb21wcyA9IHRoaXMuakNhbFtDT01QT05FTlRfSU5ERVhdO1xuICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuXG4gICAgICBmb3IgKDsgaSA8IGpDYWxMZW47IGkrKykge1xuICAgICAgICBpZiAobmFtZSA9PT0gY29tcHNbaV1bTkFNRV9JTkRFWF0pIHtcbiAgICAgICAgICByZXN1bHQucHVzaChcbiAgICAgICAgICAgIHRoaXMuX2h5ZHJhdGVDb21wb25lbnQoaSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXRoaXMuX2NvbXBvbmVudHMgfHxcbiAgICAgICAgICAodGhpcy5faHlkcmF0ZWRDb21wb25lbnRDb3VudCAhPT0gakNhbExlbikpIHtcbiAgICAgICAgZm9yICg7IGkgPCBqQ2FsTGVuOyBpKyspIHtcbiAgICAgICAgICB0aGlzLl9oeWRyYXRlQ29tcG9uZW50KGkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLl9jb21wb25lbnRzIHx8IFtdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgd2hlbiBhIG5hbWVkIHByb3BlcnR5IGV4aXN0cy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgICAgIFRoZSBwcm9wZXJ0eSBuYW1lXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgICBUcnVlLCB3aGVuIHByb3BlcnR5IGlzIGZvdW5kXG4gICAqL1xuICBoYXNQcm9wZXJ0eShuYW1lKSB7XG4gICAgbGV0IHByb3BzID0gdGhpcy5qQ2FsW1BST1BFUlRZX0lOREVYXTtcbiAgICBsZXQgbGVuID0gcHJvcHMubGVuZ3RoO1xuXG4gICAgbGV0IGkgPSAwO1xuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIC8vIDAgaXMgcHJvcGVydHkgbmFtZVxuICAgICAgaWYgKHByb3BzW2ldW05BTUVfSU5ERVhdID09PSBuYW1lKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyB0aGUgZmlyc3QgcHJvcGVydHksIG9wdGlvbmFsbHkgd2l0aCB0aGUgZ2l2ZW4gbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmc9fSBuYW1lICAgICAgICBMb3dlcmNhc2UgcHJvcGVydHkgbmFtZVxuICAgKiBAcmV0dXJuIHs/UHJvcGVydHl9ICAgICBUaGUgZm91bmQgcHJvcGVydHlcbiAgICovXG4gIGdldEZpcnN0UHJvcGVydHkobmFtZSkge1xuICAgIGlmIChuYW1lKSB7XG4gICAgICBsZXQgaSA9IDA7XG4gICAgICBsZXQgcHJvcHMgPSB0aGlzLmpDYWxbUFJPUEVSVFlfSU5ERVhdO1xuICAgICAgbGV0IGxlbiA9IHByb3BzLmxlbmd0aDtcblxuICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBpZiAocHJvcHNbaV1bTkFNRV9JTkRFWF0gPT09IG5hbWUpIHtcbiAgICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5faHlkcmF0ZVByb3BlcnR5KGkpO1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuakNhbFtQUk9QRVJUWV9JTkRFWF0ubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oeWRyYXRlUHJvcGVydHkoMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBmaXJzdCBwcm9wZXJ0eSdzIHZhbHVlLCBpZiBhdmFpbGFibGUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nPX0gbmFtZSAgICAgICAgICAgICAgICAgICAgTG93ZXJjYXNlIHByb3BlcnR5IG5hbWVcbiAgICogQHJldHVybiB7QmluYXJ5IHwgRHVyYXRpb24gfCBQZXJpb2QgfFxuICAgKiBSZWN1ciB8IFRpbWUgfCBVdGNPZmZzZXQgfCBHZW8gfCBzdHJpbmcgfCBudWxsfSAgICAgICAgIFRoZSBmb3VuZCBwcm9wZXJ0eSB2YWx1ZS5cbiAgICovXG4gIGdldEZpcnN0UHJvcGVydHlWYWx1ZShuYW1lKSB7XG4gICAgbGV0IHByb3AgPSB0aGlzLmdldEZpcnN0UHJvcGVydHkobmFtZSk7XG4gICAgaWYgKHByb3ApIHtcbiAgICAgIHJldHVybiBwcm9wLmdldEZpcnN0VmFsdWUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIHByb3BlcnRpZXMgaW4gdGhlIGNvbXBvbmVudCwgb3B0aW9uYWxseSBmaWx0ZXJlZCBieSBuYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZz19IG5hbWUgICAgICAgIExvd2VyY2FzZSBwcm9wZXJ0eSBuYW1lXG4gICAqIEByZXR1cm4ge1Byb3BlcnR5W119ICAgIExpc3Qgb2YgcHJvcGVydGllc1xuICAgKi9cbiAgZ2V0QWxsUHJvcGVydGllcyhuYW1lKSB7XG4gICAgbGV0IGpDYWxMZW4gPSB0aGlzLmpDYWxbUFJPUEVSVFlfSU5ERVhdLmxlbmd0aDtcbiAgICBsZXQgaSA9IDA7XG5cbiAgICBpZiAobmFtZSkge1xuICAgICAgbGV0IHByb3BzID0gdGhpcy5qQ2FsW1BST1BFUlRZX0lOREVYXTtcbiAgICAgIGxldCByZXN1bHQgPSBbXTtcblxuICAgICAgZm9yICg7IGkgPCBqQ2FsTGVuOyBpKyspIHtcbiAgICAgICAgaWYgKG5hbWUgPT09IHByb3BzW2ldW05BTUVfSU5ERVhdKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2goXG4gICAgICAgICAgICB0aGlzLl9oeWRyYXRlUHJvcGVydHkoaSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXRoaXMuX3Byb3BlcnRpZXMgfHxcbiAgICAgICAgICAodGhpcy5faHlkcmF0ZWRQcm9wZXJ0eUNvdW50ICE9PSBqQ2FsTGVuKSkge1xuICAgICAgICBmb3IgKDsgaSA8IGpDYWxMZW47IGkrKykge1xuICAgICAgICAgIHRoaXMuX2h5ZHJhdGVQcm9wZXJ0eShpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5fcHJvcGVydGllcyB8fCBbXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW1vdmVPYmplY3RCeUluZGV4KGpDYWxJbmRleCwgY2FjaGUsIGluZGV4KSB7XG4gICAgY2FjaGUgPSBjYWNoZSB8fCBbXTtcbiAgICAvLyByZW1vdmUgY2FjaGVkIHZlcnNpb25cbiAgICBpZiAoY2FjaGVbaW5kZXhdKSB7XG4gICAgICBsZXQgb2JqID0gY2FjaGVbaW5kZXhdO1xuICAgICAgaWYgKFwicGFyZW50XCIgaW4gb2JqKSB7XG4gICAgICAgICAgb2JqLnBhcmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2FjaGUuc3BsaWNlKGluZGV4LCAxKTtcblxuICAgIC8vIHJlbW92ZSBpdCBmcm9tIHRoZSBqQ2FsXG4gICAgdGhpcy5qQ2FsW2pDYWxJbmRleF0uc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3JlbW92ZU9iamVjdChqQ2FsSW5kZXgsIGNhY2hlLCBuYW1lT3JPYmplY3QpIHtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IG9iamVjdHMgPSB0aGlzLmpDYWxbakNhbEluZGV4XTtcbiAgICBsZXQgbGVuID0gb2JqZWN0cy5sZW5ndGg7XG4gICAgbGV0IGNhY2hlZCA9IHRoaXNbY2FjaGVdO1xuXG4gICAgaWYgKHR5cGVvZihuYW1lT3JPYmplY3QpID09PSAnc3RyaW5nJykge1xuICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBpZiAob2JqZWN0c1tpXVtOQU1FX0lOREVYXSA9PT0gbmFtZU9yT2JqZWN0KSB7XG4gICAgICAgICAgdGhpcy5fcmVtb3ZlT2JqZWN0QnlJbmRleChqQ2FsSW5kZXgsIGNhY2hlZCwgaSk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNhY2hlZCkge1xuICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBpZiAoY2FjaGVkW2ldICYmIGNhY2hlZFtpXSA9PT0gbmFtZU9yT2JqZWN0KSB7XG4gICAgICAgICAgdGhpcy5fcmVtb3ZlT2JqZWN0QnlJbmRleChqQ2FsSW5kZXgsIGNhY2hlZCwgaSk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW1vdmVBbGxPYmplY3RzKGpDYWxJbmRleCwgY2FjaGUsIG5hbWUpIHtcbiAgICBsZXQgY2FjaGVkID0gdGhpc1tjYWNoZV07XG5cbiAgICAvLyBVbmZvcnR1bmF0ZWx5IHdlIGhhdmUgdG8gcnVuIHRocm91Z2ggYWxsIGNoaWxkcmVuIHRvIHJlc2V0IHRoZWlyXG4gICAgLy8gcGFyZW50IHByb3BlcnR5LlxuICAgIGxldCBvYmplY3RzID0gdGhpcy5qQ2FsW2pDYWxJbmRleF07XG4gICAgbGV0IGkgPSBvYmplY3RzLmxlbmd0aCAtIDE7XG5cbiAgICAvLyBkZXNjZW5kaW5nIHNlYXJjaCByZXF1aXJlZCBiZWNhdXNlIHNwbGljZVxuICAgIC8vIGlzIHVzZWQgYW5kIHdpbGwgZWZmZWN0IHRoZSBpbmRpY2VzLlxuICAgIGZvciAoOyBpID49IDA7IGktLSkge1xuICAgICAgaWYgKCFuYW1lIHx8IG9iamVjdHNbaV1bTkFNRV9JTkRFWF0gPT09IG5hbWUpIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlT2JqZWN0QnlJbmRleChqQ2FsSW5kZXgsIGNhY2hlZCwgaSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBzaW5nbGUgc3ViIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtDb21wb25lbnR9IGNvbXBvbmVudCAgICAgICAgVGhlIGNvbXBvbmVudCB0byBhZGRcbiAgICogQHJldHVybiB7Q29tcG9uZW50fSAgICAgICAgICAgICAgICAgVGhlIHBhc3NlZCBpbiBjb21wb25lbnRcbiAgICovXG4gIGFkZFN1YmNvbXBvbmVudChjb21wb25lbnQpIHtcbiAgICBpZiAoIXRoaXMuX2NvbXBvbmVudHMpIHtcbiAgICAgIHRoaXMuX2NvbXBvbmVudHMgPSBbXTtcbiAgICAgIHRoaXMuX2h5ZHJhdGVkQ29tcG9uZW50Q291bnQgPSAwO1xuICAgIH1cblxuICAgIGlmIChjb21wb25lbnQucGFyZW50KSB7XG4gICAgICBjb21wb25lbnQucGFyZW50LnJlbW92ZVN1YmNvbXBvbmVudChjb21wb25lbnQpO1xuICAgIH1cblxuICAgIGxldCBpZHggPSB0aGlzLmpDYWxbQ09NUE9ORU5UX0lOREVYXS5wdXNoKGNvbXBvbmVudC5qQ2FsKTtcbiAgICB0aGlzLl9jb21wb25lbnRzW2lkeCAtIDFdID0gY29tcG9uZW50O1xuICAgIHRoaXMuX2h5ZHJhdGVkQ29tcG9uZW50Q291bnQrKztcbiAgICBjb21wb25lbnQucGFyZW50ID0gdGhpcztcbiAgICByZXR1cm4gY29tcG9uZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBzaW5nbGUgY29tcG9uZW50IGJ5IG5hbWUgb3IgdGhlIGluc3RhbmNlIG9mIGEgc3BlY2lmaWNcbiAgICogY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBvbmVudHxTdHJpbmd9IG5hbWVPckNvbXAgICAgTmFtZSBvZiBjb21wb25lbnQsIG9yIGNvbXBvbmVudFxuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgICAgICAgICAgICAgICAgICAgICBUcnVlIHdoZW4gY29tcCBpcyByZW1vdmVkXG4gICAqL1xuICByZW1vdmVTdWJjb21wb25lbnQobmFtZU9yQ29tcCkge1xuICAgIGxldCByZW1vdmVkID0gdGhpcy5fcmVtb3ZlT2JqZWN0KENPTVBPTkVOVF9JTkRFWCwgJ19jb21wb25lbnRzJywgbmFtZU9yQ29tcCk7XG4gICAgaWYgKHJlbW92ZWQpIHtcbiAgICAgIHRoaXMuX2h5ZHJhdGVkQ29tcG9uZW50Q291bnQtLTtcbiAgICB9XG4gICAgcmV0dXJuIHJlbW92ZWQ7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgY29tcG9uZW50cyBvciAoaWYgZ2l2ZW4pIGFsbCBjb21wb25lbnRzIGJ5IGEgcGFydGljdWxhclxuICAgKiBuYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZz19IG5hbWUgICAgICAgICAgICBMb3dlcmNhc2UgY29tcG9uZW50IG5hbWVcbiAgICovXG4gIHJlbW92ZUFsbFN1YmNvbXBvbmVudHMobmFtZSkge1xuICAgIGxldCByZW1vdmVkID0gdGhpcy5fcmVtb3ZlQWxsT2JqZWN0cyhDT01QT05FTlRfSU5ERVgsICdfY29tcG9uZW50cycsIG5hbWUpO1xuICAgIHRoaXMuX2h5ZHJhdGVkQ29tcG9uZW50Q291bnQgPSAwO1xuICAgIHJldHVybiByZW1vdmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYW4ge0BsaW5rIElDQUwuUHJvcGVydHl9IHRvIHRoZSBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UHJvcGVydHl9IHByb3BlcnR5ICAgICAgVGhlIHByb3BlcnR5IHRvIGFkZFxuICAgKiBAcmV0dXJuIHtQcm9wZXJ0eX0gICAgICAgICAgICAgIFRoZSBwYXNzZWQgaW4gcHJvcGVydHlcbiAgICovXG4gIGFkZFByb3BlcnR5KHByb3BlcnR5KSB7XG4gICAgaWYgKCEocHJvcGVydHkgaW5zdGFuY2VvZiBQcm9wZXJ0eSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ211c3QgYmUgaW5zdGFuY2Ugb2YgSUNBTC5Qcm9wZXJ0eScpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fcHJvcGVydGllcykge1xuICAgICAgdGhpcy5fcHJvcGVydGllcyA9IFtdO1xuICAgICAgdGhpcy5faHlkcmF0ZWRQcm9wZXJ0eUNvdW50ID0gMDtcbiAgICB9XG5cbiAgICBpZiAocHJvcGVydHkucGFyZW50KSB7XG4gICAgICBwcm9wZXJ0eS5wYXJlbnQucmVtb3ZlUHJvcGVydHkocHJvcGVydHkpO1xuICAgIH1cblxuICAgIGxldCBpZHggPSB0aGlzLmpDYWxbUFJPUEVSVFlfSU5ERVhdLnB1c2gocHJvcGVydHkuakNhbCk7XG4gICAgdGhpcy5fcHJvcGVydGllc1tpZHggLSAxXSA9IHByb3BlcnR5O1xuICAgIHRoaXMuX2h5ZHJhdGVkUHJvcGVydHlDb3VudCsrO1xuICAgIHByb3BlcnR5LnBhcmVudCA9IHRoaXM7XG4gICAgcmV0dXJuIHByb3BlcnR5O1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciBtZXRob2QgdG8gYWRkIGEgcHJvcGVydHkgd2l0aCBhIHZhbHVlIHRvIHRoZSBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSAgICAgICAgICAgICAgIG5hbWUgICAgICAgICBQcm9wZXJ0eSBuYW1lIHRvIGFkZFxuICAgKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ8T2JqZWN0fSB2YWx1ZSAgICAgICAgUHJvcGVydHkgdmFsdWVcbiAgICogQHJldHVybiB7UHJvcGVydHl9ICAgICAgICAgICAgICAgICAgICBUaGUgY3JlYXRlZCBwcm9wZXJ0eVxuICAgKi9cbiAgYWRkUHJvcGVydHlXaXRoVmFsdWUobmFtZSwgdmFsdWUpIHtcbiAgICBsZXQgcHJvcCA9IG5ldyBQcm9wZXJ0eShuYW1lKTtcbiAgICBwcm9wLnNldFZhbHVlKHZhbHVlKTtcblxuICAgIHRoaXMuYWRkUHJvcGVydHkocHJvcCk7XG5cbiAgICByZXR1cm4gcHJvcDtcbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgbWV0aG9kIHRoYXQgd2lsbCB1cGRhdGUgb3IgY3JlYXRlIGEgcHJvcGVydHkgb2YgdGhlIGdpdmVuIG5hbWVcbiAgICogYW5kIHNldHMgaXRzIHZhbHVlLiBJZiBtdWx0aXBsZSBwcm9wZXJ0aWVzIHdpdGggdGhlIGdpdmVuIG5hbWUgZXhpc3QsXG4gICAqIG9ubHkgdGhlIGZpcnN0IGlzIHVwZGF0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSAgICAgICAgICAgICAgIG5hbWUgICAgICAgICBQcm9wZXJ0eSBuYW1lIHRvIHVwZGF0ZVxuICAgKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ8T2JqZWN0fSB2YWx1ZSAgICAgICAgUHJvcGVydHkgdmFsdWVcbiAgICogQHJldHVybiB7UHJvcGVydHl9ICAgICAgICAgICAgICAgICAgICBUaGUgY3JlYXRlZCBwcm9wZXJ0eVxuICAgKi9cbiAgdXBkYXRlUHJvcGVydHlXaXRoVmFsdWUobmFtZSwgdmFsdWUpIHtcbiAgICBsZXQgcHJvcCA9IHRoaXMuZ2V0Rmlyc3RQcm9wZXJ0eShuYW1lKTtcblxuICAgIGlmIChwcm9wKSB7XG4gICAgICBwcm9wLnNldFZhbHVlKHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvcCA9IHRoaXMuYWRkUHJvcGVydHlXaXRoVmFsdWUobmFtZSwgdmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9wO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBzaW5nbGUgcHJvcGVydHkgYnkgbmFtZSBvciB0aGUgaW5zdGFuY2Ugb2YgdGhlIHNwZWNpZmljXG4gICAqIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xQcm9wZXJ0eX0gbmFtZU9yUHJvcCAgICAgUHJvcGVydHkgbmFtZSBvciBpbnN0YW5jZSB0byByZW1vdmVcbiAgICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgICAgICAgICAgICAgICAgICAgICAgVHJ1ZSwgd2hlbiBkZWxldGVkXG4gICAqL1xuICByZW1vdmVQcm9wZXJ0eShuYW1lT3JQcm9wKSB7XG4gICAgbGV0IHJlbW92ZWQgPSB0aGlzLl9yZW1vdmVPYmplY3QoUFJPUEVSVFlfSU5ERVgsICdfcHJvcGVydGllcycsIG5hbWVPclByb3ApO1xuICAgIGlmIChyZW1vdmVkKSB7XG4gICAgICB0aGlzLl9oeWRyYXRlZFByb3BlcnR5Q291bnQtLTtcbiAgICB9XG4gICAgcmV0dXJuIHJlbW92ZWQ7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgcHJvcGVydGllcyBhc3NvY2lhdGVkIHdpdGggdGhpcyBjb21wb25lbnQsIG9wdGlvbmFsbHlcbiAgICogZmlsdGVyZWQgYnkgbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmc9fSBuYW1lICAgICAgICBMb3dlcmNhc2UgcHJvcGVydHkgbmFtZVxuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgICAgIFRydWUsIHdoZW4gZGVsZXRlZFxuICAgKi9cbiAgcmVtb3ZlQWxsUHJvcGVydGllcyhuYW1lKSB7XG4gICAgbGV0IHJlbW92ZWQgPSB0aGlzLl9yZW1vdmVBbGxPYmplY3RzKFBST1BFUlRZX0lOREVYLCAnX3Byb3BlcnRpZXMnLCBuYW1lKTtcbiAgICB0aGlzLl9oeWRyYXRlZFByb3BlcnR5Q291bnQgPSAwO1xuICAgIHJldHVybiByZW1vdmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIE9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGNvbXBvbmVudC4gVGhlIHJldHVybmVkIG9iamVjdFxuICAgKiBpcyBhIGxpdmUgakNhbCBvYmplY3QgYW5kIHNob3VsZCBiZSBjbG9uZWQgaWYgbW9kaWZpZWQuXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy5qQ2FsO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBjb21wb25lbnQuXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiBzdHJpbmdpZnkuY29tcG9uZW50KFxuICAgICAgdGhpcy5qQ2FsLCB0aGlzLl9kZXNpZ25TZXRcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIGEgdGltZSB6b25lIGRlZmluaXRpb24gZnJvbSB0aGUgY29tcG9uZW50IHRyZWUsIGlmIGFueSBpcyBwcmVzZW50LlxuICAgKiBJZiB0aGUgdHJlZSBjb250YWlucyBubyB0aW1lIHpvbmUgZGVmaW5pdGlvbnMgb3IgdGhlIFRaSUQgY2Fubm90IGJlXG4gICAqIG1hdGNoZWQsIHJldHVybnMgbnVsbC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR6aWQgICAgIFRoZSBJRCBvZiB0aGUgdGltZSB6b25lIHRvIHJldHJpZXZlXG4gICAqIEByZXR1cm4ge1RpbWV6b25lfSAgVGhlIHRpbWUgem9uZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBJRCwgb3IgbnVsbFxuICAgKi9cbiAgZ2V0VGltZVpvbmVCeUlEKHR6aWQpIHtcbiAgICAvLyBWVElNRVpPTkUgY29tcG9uZW50cyBjYW4gb25seSBhcHBlYXIgYXMgYSBjaGlsZCBvZiB0aGUgVkNBTEVOREFSXG4gICAgLy8gY29tcG9uZW50OyB3YWxrIHRoZSB0cmVlIGlmIHdlJ3JlIG5vdCB0aGUgcm9vdC5cbiAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXRUaW1lWm9uZUJ5SUQodHppZCk7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gdGltZSB6b25lIGNhY2hlLCB3ZSBhcmUgcHJvYmFibHkgcGFyc2luZyBhbiBpbmNvbXBsZXRlXG4gICAgLy8gZmlsZSBhbmQgd2lsbCBoYXZlIG5vIHRpbWUgem9uZSBkZWZpbml0aW9ucy5cbiAgICBpZiAoIXRoaXMuX3RpbWV6b25lQ2FjaGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl90aW1lem9uZUNhY2hlLmhhcyh0emlkKSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3RpbWV6b25lQ2FjaGUuZ2V0KHR6aWQpO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSB0aW1lIHpvbmUgaXMgbm90IGFscmVhZHkgY2FjaGVkLCBoeWRyYXRlIGl0IGZyb20gdGhlXG4gICAgLy8gc3ViY29tcG9uZW50cy5cbiAgICBjb25zdCB6b25lcyA9IHRoaXMuZ2V0QWxsU3ViY29tcG9uZW50cygndnRpbWV6b25lJyk7XG4gICAgZm9yIChjb25zdCB6b25lIG9mIHpvbmVzKSB7XG4gICAgICBpZiAoem9uZS5nZXRGaXJzdFByb3BlcnR5KCd0emlkJykuZ2V0Rmlyc3RWYWx1ZSgpID09PSB0emlkKSB7XG4gICAgICAgIGNvbnN0IGh5ZHJhdGVkWm9uZSA9IG5ldyBUaW1lem9uZSh7XG4gICAgICAgICAgY29tcG9uZW50OiB6b25lLFxuICAgICAgICAgIHR6aWQ6IHR6aWQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuX3RpbWV6b25lQ2FjaGUuc2V0KHR6aWQsIGh5ZHJhdGVkWm9uZSk7XG5cbiAgICAgICAgcmV0dXJuIGh5ZHJhdGVkWm9uZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQZXIgdGhlIHN0YW5kYXJkLCB3ZSBzaG91bGQgYWx3YXlzIGhhdmUgYSB0aW1lIHpvbmUgZGVmaW5lZCBpbiBhIGZpbGVcbiAgICAvLyBmb3IgYW55IHJlZmVyZW5jZWQgVFpJRCwgYnV0IGRvbid0IGJsb3cgdXAgaWYgdGhlIGZpbGUgaXMgaW52YWxpZC5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG4vKipcbiAqIFByaW1hcnkgY2xhc3MgZm9yIGV4cGFuZGluZyByZWN1cnJpbmcgcnVsZXMuICBDYW4gdGFrZSBtdWx0aXBsZSBycnVsZXMsIHJkYXRlcywgZXhkYXRlKHMpIGFuZFxuICogaXRlcmF0ZSAoaW4gb3JkZXIpIG92ZXIgZWFjaCBuZXh0IG9jY3VycmVuY2UuXG4gKlxuICogT25jZSBpbml0aWFsaXplZCB0aGlzIGNsYXNzIGNhbiBhbHNvIGJlIHNlcmlhbGl6ZWQgc2F2ZWQgYW5kIGNvbnRpbnVlIGl0ZXJhdGlvbiBmcm9tIHRoZSBsYXN0XG4gKiBwb2ludC5cbiAqXG4gKiBOT1RFOiBpdCBpcyBpbnRlbmRlZCB0aGF0IHRoaXMgY2xhc3MgaXMgdG8gYmUgdXNlZCB3aXRoIHtAbGluayBJQ0FMLkV2ZW50fSB3aGljaCBoYW5kbGVzIHJlY3VycmVuY2VcbiAqIGV4Y2VwdGlvbnMuXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIGFzc3VtaW5nIGV2ZW50IGlzIGEgcGFyc2VkIGljYWwgY29tcG9uZW50XG4gKiB2YXIgZXZlbnQ7XG4gKlxuICogdmFyIGV4cGFuZCA9IG5ldyBJQ0FMLlJlY3VyRXhwYW5zaW9uKHtcbiAqICAgY29tcG9uZW50OiBldmVudCxcbiAqICAgZHRzdGFydDogZXZlbnQuZ2V0Rmlyc3RQcm9wZXJ0eVZhbHVlKCdkdHN0YXJ0JylcbiAqIH0pO1xuICpcbiAqIC8vIHJlbWVtYmVyIHRoZXJlIGFyZSBpbmZpbml0ZSBydWxlcyBzbyBpdCBpcyBhIGdvb2QgaWRlYSB0byBsaW1pdCB0aGUgc2NvcGUgb2YgdGhlIGl0ZXJhdGlvbnNcbiAqIC8vIHRoZW4gcmVzdW1lIGxhdGVyIG9uLlxuICpcbiAqIC8vIG5leHQgaXMgYWx3YXlzIGFuIElDQUwuVGltZSBvciBudWxsXG4gKiB2YXIgbmV4dDtcbiAqXG4gKiB3aGlsZSAoc29tZUNvbmRpdGlvbiAmJiAobmV4dCA9IGV4cGFuZC5uZXh0KCkpKSB7XG4gKiAgIC8vIGRvIHNvbWV0aGluZyB3aXRoIG5leHRcbiAqIH1cbiAqXG4gKiAvLyBzYXZlIGluc3RhbmNlIGZvciBsYXRlclxuICogdmFyIGpzb24gPSBKU09OLnN0cmluZ2lmeShleHBhbmQpO1xuICpcbiAqIC8vLi4uXG4gKlxuICogLy8gTk9URTogaWYgdGhlIGNvbXBvbmVudCdzIHByb3BlcnRpZXMgaGF2ZSBjaGFuZ2VkIHlvdSB3aWxsIG5lZWQgdG8gcmVidWlsZCB0aGUgY2xhc3MgYW5kIHN0YXJ0XG4gKiAvLyBvdmVyLiBUaGlzIG9ubHkgd29ya3Mgd2hlbiB0aGUgY29tcG9uZW50J3MgcmVjdXJyZW5jZSBpbmZvIGlzIHRoZSBzYW1lLlxuICogdmFyIGV4cGFuZCA9IG5ldyBJQ0FMLlJlY3VyRXhwYW5zaW9uKEpTT04ucGFyc2UoanNvbikpO1xuICpcbiAqIEBtZW1iZXJvZiBJQ0FMXG4gKi9cbmNsYXNzIFJlY3VyRXhwYW5zaW9uIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5SZWN1ckV4cGFuc2lvbiBpbnN0YW5jZS5cbiAgICpcbiAgICogVGhlIG9wdGlvbnMgb2JqZWN0IGNhbiBiZSBmaWxsZWQgd2l0aCB0aGUgc3BlY2lmaWVkIGluaXRpYWwgdmFsdWVzLiBJdCBjYW4gYWxzbyBjb250YWluXG4gICAqIGFkZGl0aW9uYWwgbWVtYmVycywgYXMgYSByZXN1bHQgb2Ygc2VyaWFsaXppbmcgYSBwcmV2aW91cyBleHBhbnNpb24gc3RhdGUsIGFzIHNob3duIGluIHRoZVxuICAgKiBleGFtcGxlLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiAgICAgICAgUmVjdXJyZW5jZSBleHBhbnNpb24gb3B0aW9uc1xuICAgKiBAcGFyYW0ge1RpbWV9IG9wdGlvbnMuZHRzdGFydFxuICAgKiAgICAgICAgU3RhcnQgdGltZSBvZiB0aGUgZXZlbnRcbiAgICogQHBhcmFtIHtDb21wb25lbnQ9fSBvcHRpb25zLmNvbXBvbmVudFxuICAgKiAgICAgICAgQ29tcG9uZW50IGZvciBleHBhbnNpb24sIHJlcXVpcmVkIGlmIG5vdCByZXN1bWluZy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLnJ1bGVEYXRlcyA9IFtdO1xuICAgIHRoaXMuZXhEYXRlcyA9IFtdO1xuICAgIHRoaXMuZnJvbURhdGEob3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogVHJ1ZSB3aGVuIGl0ZXJhdGlvbiBpcyBmdWxseSBjb21wbGV0ZWQuXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cbiAgY29tcGxldGUgPSBmYWxzZTtcblxuICAvKipcbiAgICogQXJyYXkgb2YgcnJ1bGUgaXRlcmF0b3JzLlxuICAgKlxuICAgKiBAdHlwZSB7UmVjdXJJdGVyYXRvcltdfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcnVsZUl0ZXJhdG9ycyA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEFycmF5IG9mIHJkYXRlIGluc3RhbmNlcy5cbiAgICpcbiAgICogQHR5cGUge1RpbWVbXX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJ1bGVEYXRlcyA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEFycmF5IG9mIGV4ZGF0ZSBpbnN0YW5jZXMuXG4gICAqXG4gICAqIEB0eXBlIHtUaW1lW119XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBleERhdGVzID0gbnVsbDtcblxuICAvKipcbiAgICogQ3VycmVudCBwb3NpdGlvbiBpbiBydWxlRGF0ZXMgYXJyYXkuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBydWxlRGF0ZUluYyA9IDA7XG5cbiAgLyoqXG4gICAqIEN1cnJlbnQgcG9zaXRpb24gaW4gZXhEYXRlcyBhcnJheVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZXhEYXRlSW5jID0gMDtcblxuICAvKipcbiAgICogQ3VycmVudCBuZWdhdGl2ZSBkYXRlLlxuICAgKlxuICAgKiBAdHlwZSB7VGltZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGV4RGF0ZSA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEN1cnJlbnQgYWRkaXRpb25hbCBkYXRlLlxuICAgKlxuICAgKiBAdHlwZSB7VGltZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJ1bGVEYXRlID0gbnVsbDtcblxuICAvKipcbiAgICogU3RhcnQgZGF0ZSBvZiByZWN1cnJpbmcgcnVsZXMuXG4gICAqXG4gICAqIEB0eXBlIHtUaW1lfVxuICAgKi9cbiAgZHRzdGFydCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIExhc3QgZXhwYW5kZWQgdGltZVxuICAgKlxuICAgKiBAdHlwZSB7VGltZX1cbiAgICovXG4gIGxhc3QgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSByZWN1cnJlbmNlIGV4cGFuc2lvbiBmcm9tIHRoZSBkYXRhIG9iamVjdC4gVGhlIG9wdGlvbnNcbiAgICogb2JqZWN0IG1heSBhbHNvIGNvbnRhaW4gYWRkaXRpb25hbCBtZW1iZXJzLCBzZWUgdGhlXG4gICAqIHtAbGluayBJQ0FMLlJlY3VyRXhwYW5zaW9uIGNvbnN0cnVjdG9yfSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiAgICAgICAgUmVjdXJyZW5jZSBleHBhbnNpb24gb3B0aW9uc1xuICAgKiBAcGFyYW0ge1RpbWV9IG9wdGlvbnMuZHRzdGFydFxuICAgKiAgICAgICAgU3RhcnQgdGltZSBvZiB0aGUgZXZlbnRcbiAgICogQHBhcmFtIHtDb21wb25lbnQ9fSBvcHRpb25zLmNvbXBvbmVudFxuICAgKiAgICAgICAgQ29tcG9uZW50IGZvciBleHBhbnNpb24sIHJlcXVpcmVkIGlmIG5vdCByZXN1bWluZy5cbiAgICovXG4gIGZyb21EYXRhKG9wdGlvbnMpIHtcbiAgICBsZXQgc3RhcnQgPSBmb3JtYXRDbGFzc1R5cGUob3B0aW9ucy5kdHN0YXJ0LCBUaW1lKTtcblxuICAgIGlmICghc3RhcnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignLmR0c3RhcnQgKElDQUwuVGltZSkgbXVzdCBiZSBnaXZlbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmR0c3RhcnQgPSBzdGFydDtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5jb21wb25lbnQpIHtcbiAgICAgIHRoaXMuX2luaXQob3B0aW9ucy5jb21wb25lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxhc3QgPSBmb3JtYXRDbGFzc1R5cGUob3B0aW9ucy5sYXN0LCBUaW1lKSB8fCBzdGFydC5jbG9uZSgpO1xuXG4gICAgICBpZiAoIW9wdGlvbnMucnVsZUl0ZXJhdG9ycykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJy5ydWxlSXRlcmF0b3JzIG9yIC5jb21wb25lbnQgbXVzdCBiZSBnaXZlbicpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnJ1bGVJdGVyYXRvcnMgPSBvcHRpb25zLnJ1bGVJdGVyYXRvcnMubWFwKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGZvcm1hdENsYXNzVHlwZShpdGVtLCBSZWN1ckl0ZXJhdG9yKTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnJ1bGVEYXRlSW5jID0gb3B0aW9ucy5ydWxlRGF0ZUluYztcbiAgICAgIHRoaXMuZXhEYXRlSW5jID0gb3B0aW9ucy5leERhdGVJbmM7XG5cbiAgICAgIGlmIChvcHRpb25zLnJ1bGVEYXRlcykge1xuICAgICAgICB0aGlzLnJ1bGVEYXRlcyA9IG9wdGlvbnMucnVsZURhdGVzLm1hcChpdGVtID0+IGZvcm1hdENsYXNzVHlwZShpdGVtLCBUaW1lKSk7XG4gICAgICAgIHRoaXMucnVsZURhdGUgPSB0aGlzLnJ1bGVEYXRlc1t0aGlzLnJ1bGVEYXRlSW5jXTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMuZXhEYXRlcykge1xuICAgICAgICB0aGlzLmV4RGF0ZXMgPSBvcHRpb25zLmV4RGF0ZXMubWFwKGl0ZW0gPT4gZm9ybWF0Q2xhc3NUeXBlKGl0ZW0sIFRpbWUpKTtcbiAgICAgICAgdGhpcy5leERhdGUgPSB0aGlzLmV4RGF0ZXNbdGhpcy5leERhdGVJbmNdO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mKG9wdGlvbnMuY29tcGxldGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLmNvbXBsZXRlID0gb3B0aW9ucy5jb21wbGV0ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29tcGFyZSB0d28gSUNBTC5UaW1lIG9iamVjdHMuICBXaGVuIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGlzIGEgREFURSBhbmQgdGhlIGZpcnN0IHBhcmFtZXRlciBpc1xuICAgKiBEQVRFLVRJTUUsIHN0cmlwIHRoZSB0aW1lIGFuZCBjb21wYXJlIG9ubHkgdGhlIGRheXMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7VGltZX0gYSAgIFRoZSBvbmUgb2JqZWN0IHRvIGNvbXBhcmVcbiAgICogQHBhcmFtIHtUaW1lfSBiICAgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlXG4gICAqL1xuICBfY29tcGFyZV9zcGVjaWFsKGEsIGIpIHtcbiAgICBpZiAoIWEuaXNEYXRlICYmIGIuaXNEYXRlKVxuICAgICAgcmV0dXJuIG5ldyBUaW1lKHsgeWVhcjogYS55ZWFyLCBtb250aDogYS5tb250aCwgZGF5OiBhLmRheSB9KS5jb21wYXJlKGIpO1xuICAgIHJldHVybiBhLmNvbXBhcmUoYik7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgdGhlIG5leHQgb2NjdXJyZW5jZSBpbiB0aGUgc2VyaWVzLlxuICAgKiBAcmV0dXJuIHtUaW1lfVxuICAgKi9cbiAgbmV4dCgpIHtcbiAgICBsZXQgaXRlcjtcbiAgICBsZXQgbmV4dDtcbiAgICBsZXQgY29tcGFyZTtcblxuICAgIGxldCBtYXhUcmllcyA9IDUwMDtcbiAgICBsZXQgY3VycmVudFRyeSA9IDA7XG5cbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgaWYgKGN1cnJlbnRUcnkrKyA+IG1heFRyaWVzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAnbWF4IHRyaWVzIGhhdmUgb2NjdXJyZWQsIHJ1bGUgbWF5IGJlIGltcG9zc2libGUgdG8gZnVsZmlsbC4nXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIG5leHQgPSB0aGlzLnJ1bGVEYXRlO1xuICAgICAgaXRlciA9IHRoaXMuX25leHRSZWN1cnJlbmNlSXRlcih0aGlzLmxhc3QpO1xuXG4gICAgICAvLyBubyBtb3JlIG1hdGNoZXNcbiAgICAgIC8vIGJlY2F1c2Ugd2UgaW5jcmVtZW50IHRoZSBydWxlIGRheSBvciBydWxlXG4gICAgICAvLyBfYWZ0ZXJfIHdlIGNob29zZSBhIHZhbHVlIHRoaXMgc2hvdWxkIGJlXG4gICAgICAvLyB0aGUgb25seSBzcG90IHdoZXJlIHdlIG5lZWQgdG8gd29ycnkgYWJvdXQgdGhlXG4gICAgICAvLyBlbmQgb2YgZXZlbnRzLlxuICAgICAgaWYgKCFuZXh0ICYmICFpdGVyKSB7XG4gICAgICAgIC8vIHRoZXJlIGFyZSBubyBtb3JlIGl0ZXJhdG9ycyBvciByZGF0ZXNcbiAgICAgICAgdGhpcy5jb21wbGV0ZSA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICAvLyBubyBuZXh0IHJ1bGUgZGF5IG9yIHJlY3VycmVuY2UgcnVsZSBpcyBmaXJzdC5cbiAgICAgIGlmICghbmV4dCB8fCAoaXRlciAmJiBuZXh0LmNvbXBhcmUoaXRlci5sYXN0KSA+IDApKSB7XG4gICAgICAgIC8vIG11c3QgYmUgY2xvbmVkLCByZWN1ciB3aWxsIHJldXNlIHRoZSB0aW1lIGVsZW1lbnQuXG4gICAgICAgIG5leHQgPSBpdGVyLmxhc3QuY2xvbmUoKTtcbiAgICAgICAgLy8gbW92ZSB0byBuZXh0IHNvIHdlIGNhbiBjb250aW51ZVxuICAgICAgICBpdGVyLm5leHQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gaWYgdGhlIHJ1bGVEYXRlIGlzIHN0aWxsIG5leHQgaW5jcmVtZW50IGl0LlxuICAgICAgaWYgKHRoaXMucnVsZURhdGUgPT09IG5leHQpIHtcbiAgICAgICAgdGhpcy5fbmV4dFJ1bGVEYXkoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5sYXN0ID0gbmV4dDtcblxuICAgICAgLy8gY2hlY2sgdGhlIG5lZ2F0aXZlIHJ1bGVzXG4gICAgICBpZiAodGhpcy5leERhdGUpIHtcbiAgICAgICAgLy8gRVhEQVRFIGNhbiBiZSBpbiBEQVRFIGZvcm1hdCwgYnV0IERUU1RBUlQgaXMgaW4gREFURS1USU1FIGZvcm1hdFxuICAgICAgICBjb21wYXJlID0gdGhpcy5fY29tcGFyZV9zcGVjaWFsKHRoaXMubGFzdCwgdGhpcy5leERhdGUpO1xuXG4gICAgICAgIGlmIChjb21wYXJlID4gMCkge1xuICAgICAgICAgIHRoaXMuX25leHRFeERheSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgdGhlIGN1cnJlbnQgcnVsZSBpcyBleGNsdWRlZCBza2lwIGl0LlxuICAgICAgICBpZiAoY29tcGFyZSA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX25leHRFeERheSgpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vWFhYOiBUaGUgc3BlYyBzdGF0ZXMgdGhhdCBhZnRlciB3ZSByZXNvbHZlIHRoZSBmaW5hbFxuICAgICAgLy8gICAgIGxpc3Qgb2YgZGF0ZXMgd2UgZXhlY3V0ZSBleGRhdGUgdGhpcyBzZWVtcyBzb21ld2hhdCBjb3VudGVyXG4gICAgICAvLyAgICAgaW50dWl0aXZlIHRvIHdoYXQgSSBoYXZlIHNlZW4gbW9zdCBzZXJ2ZXJzIGRvIHNvIGZvciBub3dcbiAgICAgIC8vICAgICBJIGV4Y2x1ZGUgYmFzZWQgb24gdGhlIG9yaWdpbmFsIGRhdGUgbm90IHRoZSBvbmUgdGhhdCBtYXlcbiAgICAgIC8vICAgICBoYXZlIGJlZW4gbW9kaWZpZWQgYnkgdGhlIGV4Y2VwdGlvbi5cbiAgICAgIHJldHVybiB0aGlzLmxhc3Q7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIG9iamVjdCBpbnRvIGEgc2VyaWFsaXplLWFibGUgZm9ybWF0LiBUaGlzIGZvcm1hdCBjYW4gYmUgcGFzc2VkXG4gICAqIGJhY2sgaW50byB0aGUgZXhwYW5zaW9uIHRvIHJlc3VtZSBpdGVyYXRpb24uXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICBmdW5jdGlvbiB0b0pTT04oaXRlbSkge1xuICAgICAgcmV0dXJuIGl0ZW0udG9KU09OKCk7XG4gICAgfVxuXG4gICAgbGV0IHJlc3VsdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgcmVzdWx0LnJ1bGVJdGVyYXRvcnMgPSB0aGlzLnJ1bGVJdGVyYXRvcnMubWFwKHRvSlNPTik7XG5cbiAgICBpZiAodGhpcy5ydWxlRGF0ZXMpIHtcbiAgICAgIHJlc3VsdC5ydWxlRGF0ZXMgPSB0aGlzLnJ1bGVEYXRlcy5tYXAodG9KU09OKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5leERhdGVzKSB7XG4gICAgICByZXN1bHQuZXhEYXRlcyA9IHRoaXMuZXhEYXRlcy5tYXAodG9KU09OKTtcbiAgICB9XG5cbiAgICByZXN1bHQucnVsZURhdGVJbmMgPSB0aGlzLnJ1bGVEYXRlSW5jO1xuICAgIHJlc3VsdC5leERhdGVJbmMgPSB0aGlzLmV4RGF0ZUluYztcbiAgICByZXN1bHQubGFzdCA9IHRoaXMubGFzdC50b0pTT04oKTtcbiAgICByZXN1bHQuZHRzdGFydCA9IHRoaXMuZHRzdGFydC50b0pTT04oKTtcbiAgICByZXN1bHQuY29tcGxldGUgPSB0aGlzLmNvbXBsZXRlO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IGFsbCBkYXRlcyBmcm9tIHRoZSBwcm9wZXJ0aWVzIGluIHRoZSBnaXZlbiBjb21wb25lbnQuIFRoZVxuICAgKiBwcm9wZXJ0aWVzIHdpbGwgYmUgZmlsdGVyZWQgYnkgdGhlIHByb3BlcnR5IG5hbWUuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fSBjb21wb25lbnQgICAgICAgICAgICAgVGhlIGNvbXBvbmVudCB0byBzZWFyY2ggaW5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5TmFtZSAgICAgICAgICAgICBUaGUgcHJvcGVydHkgbmFtZSB0byBzZWFyY2ggZm9yXG4gICAqIEByZXR1cm4ge1RpbWVbXX0gICAgICAgICAgICAgICAgICAgICAgICAgVGhlIGV4dHJhY3RlZCBkYXRlcy5cbiAgICovXG4gIF9leHRyYWN0RGF0ZXMoY29tcG9uZW50LCBwcm9wZXJ0eU5hbWUpIHtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgbGV0IHByb3BzID0gY29tcG9uZW50LmdldEFsbFByb3BlcnRpZXMocHJvcGVydHlOYW1lKTtcblxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBwcm9wcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgZm9yIChsZXQgcHJvcCBvZiBwcm9wc1tpXS5nZXRWYWx1ZXMoKSkge1xuICAgICAgICBsZXQgaWR4ID0gYmluc2VhcmNoSW5zZXJ0KFxuICAgICAgICAgIHJlc3VsdCxcbiAgICAgICAgICBwcm9wLFxuICAgICAgICAgIChhLCBiKSA9PiBhLmNvbXBhcmUoYilcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBvcmRlcmVkIGluc2VydFxuICAgICAgICByZXN1bHQuc3BsaWNlKGlkeCwgMCwgcHJvcCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSByZWN1cnJlbmNlIGV4cGFuc2lvbi5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtDb21wb25lbnR9IGNvbXBvbmVudCAgICBUaGUgY29tcG9uZW50IHRvIGluaXRpYWxpemUgZnJvbS5cbiAgICovXG4gIF9pbml0KGNvbXBvbmVudCkge1xuICAgIHRoaXMucnVsZUl0ZXJhdG9ycyA9IFtdO1xuXG4gICAgdGhpcy5sYXN0ID0gdGhpcy5kdHN0YXJ0LmNsb25lKCk7XG5cbiAgICAvLyB0byBwcm92aWRlIGFwaSBjb25zaXN0ZW5jeSBub24tcmVjdXJyaW5nXG4gICAgLy8gZXZlbnRzIGNhbiBhbHNvIHVzZSB0aGUgaXRlcmF0b3IgdGhvdWdoIGl0IHdpbGxcbiAgICAvLyBvbmx5IHJldHVybiBhIHNpbmdsZSB0aW1lLlxuICAgIGlmICghY29tcG9uZW50Lmhhc1Byb3BlcnR5KCdyZGF0ZScpICYmXG4gICAgICAgICFjb21wb25lbnQuaGFzUHJvcGVydHkoJ3JydWxlJykgJiZcbiAgICAgICAgIWNvbXBvbmVudC5oYXNQcm9wZXJ0eSgncmVjdXJyZW5jZS1pZCcpKSB7XG4gICAgICB0aGlzLnJ1bGVEYXRlID0gdGhpcy5sYXN0LmNsb25lKCk7XG4gICAgICB0aGlzLmNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoY29tcG9uZW50Lmhhc1Byb3BlcnR5KCdyZGF0ZScpKSB7XG4gICAgICB0aGlzLnJ1bGVEYXRlcyA9IHRoaXMuX2V4dHJhY3REYXRlcyhjb21wb25lbnQsICdyZGF0ZScpO1xuXG4gICAgICAvLyBzcGVjaWFsIGhhY2sgZm9yIGNhc2VzIHdoZXJlIGZpcnN0IHJkYXRlIGlzIHByaW9yXG4gICAgICAvLyB0byB0aGUgc3RhcnQgZGF0ZS4gV2Ugb25seSBjaGVjayBmb3IgdGhlIGZpcnN0IHJkYXRlLlxuICAgICAgLy8gVGhpcyBpcyBtb3N0bHkgZm9yIGdvb2dsZSdzIGNyYXp5IHJlY3VycmluZyBkYXRlIGxvZ2ljXG4gICAgICAvLyAoY29udGFjdHMgYmlydGhkYXlzKS5cbiAgICAgIGlmICgodGhpcy5ydWxlRGF0ZXNbMF0pICYmXG4gICAgICAgICAgKHRoaXMucnVsZURhdGVzWzBdLmNvbXBhcmUodGhpcy5kdHN0YXJ0KSA8IDApKSB7XG5cbiAgICAgICAgdGhpcy5ydWxlRGF0ZUluYyA9IDA7XG4gICAgICAgIHRoaXMubGFzdCA9IHRoaXMucnVsZURhdGVzWzBdLmNsb25lKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJ1bGVEYXRlSW5jID0gYmluc2VhcmNoSW5zZXJ0KFxuICAgICAgICAgIHRoaXMucnVsZURhdGVzLFxuICAgICAgICAgIHRoaXMubGFzdCxcbiAgICAgICAgICAoYSwgYikgPT4gYS5jb21wYXJlKGIpXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucnVsZURhdGUgPSB0aGlzLnJ1bGVEYXRlc1t0aGlzLnJ1bGVEYXRlSW5jXTtcbiAgICB9XG5cbiAgICBpZiAoY29tcG9uZW50Lmhhc1Byb3BlcnR5KCdycnVsZScpKSB7XG4gICAgICBsZXQgcnVsZXMgPSBjb21wb25lbnQuZ2V0QWxsUHJvcGVydGllcygncnJ1bGUnKTtcbiAgICAgIGxldCBpID0gMDtcbiAgICAgIGxldCBsZW4gPSBydWxlcy5sZW5ndGg7XG5cbiAgICAgIGxldCBydWxlO1xuICAgICAgbGV0IGl0ZXI7XG5cbiAgICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgcnVsZSA9IHJ1bGVzW2ldLmdldEZpcnN0VmFsdWUoKTtcbiAgICAgICAgaXRlciA9IHJ1bGUuaXRlcmF0b3IodGhpcy5kdHN0YXJ0KTtcbiAgICAgICAgdGhpcy5ydWxlSXRlcmF0b3JzLnB1c2goaXRlcik7XG5cbiAgICAgICAgLy8gaW5jcmVtZW50IHRvIHRoZSBuZXh0IG9jY3VycmVuY2Ugc28gZnV0dXJlXG4gICAgICAgIC8vIGNhbGxzIHRvIG5leHQgcmV0dXJuIHRpbWVzIGJleW9uZCB0aGUgaW5pdGlhbCBpdGVyYXRpb24uXG4gICAgICAgIC8vIFhYWDogSSBmaW5kIHRoaXMgc3VzcGljaW91cyBtaWdodCBiZSBhIGJ1Zz9cbiAgICAgICAgaXRlci5uZXh0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvbXBvbmVudC5oYXNQcm9wZXJ0eSgnZXhkYXRlJykpIHtcbiAgICAgIHRoaXMuZXhEYXRlcyA9IHRoaXMuX2V4dHJhY3REYXRlcyhjb21wb25lbnQsICdleGRhdGUnKTtcbiAgICAgIC8vIGlmIHdlIGhhdmUgYSAubGFzdCBkYXkgd2UgaW5jcmVtZW50IHRoZSBpbmRleCB0byBiZXlvbmQgaXQuXG4gICAgICAvLyBXaGVuIERUU1RBUlQgaXMgaW4gREFURS1USU1FIGZvcm1hdCwgRVhEQVRFIGlzIGluIERBVEUgZm9ybWF0IGFuZCBFWERBVEUgaXNcbiAgICAgIC8vIHRoZSBkYXRlIG9mIERUU1RBUlQsIF9jb21wYXJlX3NwZWNpYWwgZmluZHMgdGhpcyBvdXQgYW5kIGNvbXBhcmVUaW1lIGZhaWxzLlxuICAgICAgdGhpcy5leERhdGVJbmMgPSBiaW5zZWFyY2hJbnNlcnQoXG4gICAgICAgIHRoaXMuZXhEYXRlcyxcbiAgICAgICAgdGhpcy5sYXN0LFxuICAgICAgICB0aGlzLl9jb21wYXJlX3NwZWNpYWxcbiAgICAgICk7XG5cbiAgICAgIHRoaXMuZXhEYXRlID0gdGhpcy5leERhdGVzW3RoaXMuZXhEYXRlSW5jXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWR2YW5jZSB0byB0aGUgbmV4dCBleGRhdGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9uZXh0RXhEYXkoKSB7XG4gICAgdGhpcy5leERhdGUgPSB0aGlzLmV4RGF0ZXNbKyt0aGlzLmV4RGF0ZUluY107XG4gIH1cblxuICAvKipcbiAgICogQWR2YW5jZSB0byB0aGUgbmV4dCBydWxlIGRhdGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9uZXh0UnVsZURheSgpIHtcbiAgICB0aGlzLnJ1bGVEYXRlID0gdGhpcy5ydWxlRGF0ZXNbKyt0aGlzLnJ1bGVEYXRlSW5jXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIGFuZCByZXR1cm4gdGhlIHJlY3VycmVuY2UgcnVsZSB3aXRoIHRoZSBtb3N0IHJlY2VudCBldmVudCBhbmRcbiAgICogcmV0dXJuIGl0LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJuIHs/UmVjdXJJdGVyYXRvcn0gICAgRm91bmQgaXRlcmF0b3IuXG4gICAqL1xuICBfbmV4dFJlY3VycmVuY2VJdGVyKCkge1xuICAgIGxldCBpdGVycyA9IHRoaXMucnVsZUl0ZXJhdG9ycztcblxuICAgIGlmIChpdGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCBsZW4gPSBpdGVycy5sZW5ndGg7XG4gICAgbGV0IGl0ZXI7XG4gICAgbGV0IGl0ZXJUaW1lO1xuICAgIGxldCBpdGVySWR4ID0gMDtcbiAgICBsZXQgY2hvc2VuSXRlcjtcblxuICAgIC8vIGxvb3AgdGhyb3VnaCBlYWNoIGl0ZXJhdG9yXG4gICAgZm9yICg7IGl0ZXJJZHggPCBsZW47IGl0ZXJJZHgrKykge1xuICAgICAgaXRlciA9IGl0ZXJzW2l0ZXJJZHhdO1xuICAgICAgaXRlclRpbWUgPSBpdGVyLmxhc3Q7XG5cbiAgICAgIC8vIGlmIGl0ZXJhdGlvbiBpcyBjb21wbGV0ZVxuICAgICAgLy8gdGhlbiB3ZSBtdXN0IGV4Y2x1ZGUgaXQgZnJvbVxuICAgICAgLy8gdGhlIHNlYXJjaCBhbmQgcmVtb3ZlIGl0LlxuICAgICAgaWYgKGl0ZXIuY29tcGxldGVkKSB7XG4gICAgICAgIGxlbi0tO1xuICAgICAgICBpZiAoaXRlcklkeCAhPT0gMCkge1xuICAgICAgICAgIGl0ZXJJZHgtLTtcbiAgICAgICAgfVxuICAgICAgICBpdGVycy5zcGxpY2UoaXRlcklkeCwgMSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBmaW5kIHRoZSBtb3N0IHJlY2VudCBwb3NzaWJsZSBjaG9pY2VcbiAgICAgIGlmICghY2hvc2VuSXRlciB8fCBjaG9zZW5JdGVyLmxhc3QuY29tcGFyZShpdGVyVGltZSkgPiAwKSB7XG4gICAgICAgIC8vIHRoYXQgaXRlcmF0b3IgaXMgc2F2ZWRcbiAgICAgICAgY2hvc2VuSXRlciA9IGl0ZXI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gdGhlIGNob3NlbiBpdGVyYXRvciBpcyByZXR1cm5lZCBidXQgbm90IG11dGF0ZWRcbiAgICAvLyB0aGlzIGl0ZXJhdG9yIGNvbnRhaW5zIHRoZSBtb3N0IHJlY2VudCBldmVudC5cbiAgICByZXR1cm4gY2hvc2VuSXRlcjtcbiAgfVxufVxuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG4vKipcbiAqIFRoaXMgbGV0cyB0eXBlc2NyaXB0IHJlc29sdmUgb3VyIGN1c3RvbSB0eXBlcyBpbiB0aGVcbiAqIGdlbmVyYXRlZCBkLnRzIGZpbGVzIChqc2RvYyB0eXBlZGVmcyBhcmUgY29udmVydGVkIHRvIHR5cGVzY3JpcHQgdHlwZXMpLlxuICogSWdub3JlIHByZXZlbnRzIHRoZSB0eXBlZGVmcyBmcm9tIGJlaW5nIGRvY3VtZW50ZWQgbW9yZSB0aGFuIG9uY2UuXG4gKiBAaWdub3JlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS5mcmVxdWVuY3lWYWx1ZXN9IGZyZXF1ZW5jeVZhbHVlc1xuICogSW1wb3J0cyB0aGUgJ2ZyZXF1ZW5jeVZhbHVlcycgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS5vY2N1cnJlbmNlRGV0YWlsc30gb2NjdXJyZW5jZURldGFpbHNcbiAqIEltcG9ydHMgdGhlICdvY2N1cnJlbmNlRGV0YWlscycgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKi9cblxuLyoqXG4gKiBJQ0FMLmpzIGlzIG9yZ2FuaXplZCBpbnRvIG11bHRpcGxlIGxheWVycy4gVGhlIGJvdHRvbSBsYXllciBpcyBhIHJhdyBqQ2FsXG4gKiBvYmplY3QsIGZvbGxvd2VkIGJ5IHRoZSBjb21wb25lbnQvcHJvcGVydHkgbGF5ZXIuIFRoZSBoaWdoZXN0IGxldmVsIGlzIHRoZVxuICogZXZlbnQgcmVwcmVzZW50YXRpb24sIHdoaWNoIHRoaXMgY2xhc3MgaXMgcGFydCBvZi4gU2VlIHRoZVxuICoge0B0dXRvcmlhbCBsYXllcnN9IGd1aWRlIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogQG1lbWJlcm9mIElDQUxcbiAqL1xuY2xhc3MgRXZlbnQge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBJQ0FMLkV2ZW50IGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBvbmVudD19IGNvbXBvbmVudCAgICAgICAgICAgICAgVGhlIElDQUwuQ29tcG9uZW50IHRvIGJhc2UgdGhpcyBldmVudCBvblxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdICAgICAgICAgICAgICAgICAgT3B0aW9ucyBmb3IgdGhpcyBldmVudFxuICAgKiBAcGFyYW0ge0Jvb2xlYW49fSBvcHRpb25zLnN0cmljdEV4Y2VwdGlvbnMgIFdoZW4gdHJ1ZSwgd2lsbCB2ZXJpZnkgZXhjZXB0aW9ucyBhcmUgcmVsYXRlZCBieVxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVpciBVVUlEXG4gICAqIEBwYXJhbSB7QXJyYXk8Q29tcG9uZW50fEV2ZW50Pj19IG9wdGlvbnMuZXhjZXB0aW9uc1xuICAgKiAgICAgICAgICBFeGNlcHRpb25zIHRvIHRoaXMgZXZlbnQsIGVpdGhlciBhcyBjb21wb25lbnRzIG9yIGV2ZW50cy4gSWYgbm90XG4gICAqICAgICAgICAgICAgc3BlY2lmaWVkIGV4Y2VwdGlvbnMgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIHNldCBpbiByZWxhdGlvbiBvZlxuICAgKiAgICAgICAgICAgIGNvbXBvbmVudCdzIHBhcmVudFxuICAgKi9cbiAgY29uc3RydWN0b3IoY29tcG9uZW50LCBvcHRpb25zKSB7XG4gICAgaWYgKCEoY29tcG9uZW50IGluc3RhbmNlb2YgQ29tcG9uZW50KSkge1xuICAgICAgb3B0aW9ucyA9IGNvbXBvbmVudDtcbiAgICAgIGNvbXBvbmVudCA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGNvbXBvbmVudCkge1xuICAgICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY29tcG9uZW50ID0gbmV3IENvbXBvbmVudCgndmV2ZW50Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5fcmFuZ2VFeGNlcHRpb25DYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5leGNlcHRpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLnJhbmdlRXhjZXB0aW9ucyA9IFtdO1xuXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5zdHJpY3RFeGNlcHRpb25zKSB7XG4gICAgICB0aGlzLnN0cmljdEV4Y2VwdGlvbnMgPSBvcHRpb25zLnN0cmljdEV4Y2VwdGlvbnM7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5leGNlcHRpb25zKSB7XG4gICAgICBvcHRpb25zLmV4Y2VwdGlvbnMuZm9yRWFjaCh0aGlzLnJlbGF0ZUV4Y2VwdGlvbiwgdGhpcyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmNvbXBvbmVudC5wYXJlbnQgJiYgIXRoaXMuaXNSZWN1cnJlbmNlRXhjZXB0aW9uKCkpIHtcbiAgICAgIHRoaXMuY29tcG9uZW50LnBhcmVudC5nZXRBbGxTdWJjb21wb25lbnRzKCd2ZXZlbnQnKS5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5oYXNQcm9wZXJ0eSgncmVjdXJyZW5jZS1pZCcpKSB7XG4gICAgICAgICAgdGhpcy5yZWxhdGVFeGNlcHRpb24oZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG4gIH1cblxuXG4gIHN0YXRpYyBUSElTQU5ERlVUVVJFID0gJ1RISVNBTkRGVVRVUkUnO1xuXG4gIC8qKlxuICAgKiBMaXN0IG9mIHJlbGF0ZWQgZXZlbnQgZXhjZXB0aW9ucy5cbiAgICpcbiAgICogQHR5cGUge0V2ZW50W119XG4gICAqL1xuICBleGNlcHRpb25zID0gbnVsbDtcblxuICAvKipcbiAgICogV2hlbiB0cnVlLCB3aWxsIHZlcmlmeSBleGNlcHRpb25zIGFyZSByZWxhdGVkIGJ5IHRoZWlyIFVVSUQuXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cbiAgc3RyaWN0RXhjZXB0aW9ucyA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBSZWxhdGVzIGEgZ2l2ZW4gZXZlbnQgZXhjZXB0aW9uIHRvIHRoaXMgb2JqZWN0LiAgSWYgdGhlIGdpdmVuIGNvbXBvbmVudFxuICAgKiBkb2VzIG5vdCBzaGFyZSB0aGUgVUlEIG9mIHRoaXMgZXZlbnQgaXQgY2Fubm90IGJlIHJlbGF0ZWQgYW5kIHdpbGwgdGhyb3dcbiAgICogYW4gZXhjZXB0aW9uLlxuICAgKlxuICAgKiBJZiB0aGlzIGNvbXBvbmVudCBpcyBhbiBleGNlcHRpb24gaXQgY2Fubm90IGhhdmUgb3RoZXIgZXhjZXB0aW9uc1xuICAgKiByZWxhdGVkIHRvIGl0LlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBvbmVudHxFdmVudH0gb2JqICAgICAgIENvbXBvbmVudCBvciBldmVudFxuICAgKi9cbiAgcmVsYXRlRXhjZXB0aW9uKG9iaikge1xuICAgIGlmICh0aGlzLmlzUmVjdXJyZW5jZUV4Y2VwdGlvbigpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Nhbm5vdCByZWxhdGUgZXhjZXB0aW9uIHRvIGV4Y2VwdGlvbnMnKTtcbiAgICB9XG5cbiAgICBpZiAob2JqIGluc3RhbmNlb2YgQ29tcG9uZW50KSB7XG4gICAgICBvYmogPSBuZXcgRXZlbnQob2JqKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdHJpY3RFeGNlcHRpb25zICYmIG9iai51aWQgIT09IHRoaXMudWlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2F0dGVtcHRlZCB0byByZWxhdGUgdW5yZWxhdGVkIGV4Y2VwdGlvbicpO1xuICAgIH1cblxuICAgIGxldCBpZCA9IG9iai5yZWN1cnJlbmNlSWQudG9TdHJpbmcoKTtcblxuICAgIC8vIHdlIGRvbid0IHNvcnQgb3IgbWFuYWdlIGV4Y2VwdGlvbnMgZGlyZWN0bHlcbiAgICAvLyBoZXJlIHRoZSByZWN1cnJlbmNlIGV4cGFuZGVyIGhhbmRsZXMgdGhhdC5cbiAgICB0aGlzLmV4Y2VwdGlvbnNbaWRdID0gb2JqO1xuXG4gICAgLy8gaW5kZXggUkFOR0U9VEhJU0FOREZVVFVSRSBleGNlcHRpb25zIHNvIHdlIGNhblxuICAgIC8vIGxvb2sgdGhlbSB1cCBsYXRlciBpbiBnZXRPY2N1cnJlbmNlRGV0YWlscy5cbiAgICBpZiAob2JqLm1vZGlmaWVzRnV0dXJlKCkpIHtcbiAgICAgIGxldCBpdGVtID0gW1xuICAgICAgICBvYmoucmVjdXJyZW5jZUlkLnRvVW5peFRpbWUoKSwgaWRcbiAgICAgIF07XG5cbiAgICAgIC8vIHdlIGtlZXAgdGhlbSBzb3J0ZWQgc28gd2UgY2FuIGZpbmQgdGhlIG5lYXJlc3RcbiAgICAgIC8vIHZhbHVlIGxhdGVyIG9uLi4uXG4gICAgICBsZXQgaWR4ID0gYmluc2VhcmNoSW5zZXJ0KFxuICAgICAgICB0aGlzLnJhbmdlRXhjZXB0aW9ucyxcbiAgICAgICAgaXRlbSxcbiAgICAgICAgY29tcGFyZVJhbmdlRXhjZXB0aW9uXG4gICAgICApO1xuXG4gICAgICB0aGlzLnJhbmdlRXhjZXB0aW9ucy5zcGxpY2UoaWR4LCAwLCBpdGVtKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoaXMgcmVjb3JkIGlzIGFuIGV4Y2VwdGlvbiBhbmQgaGFzIHRoZSBSQU5HRT1USElTQU5ERlVUVVJFXG4gICAqIHZhbHVlLlxuICAgKlxuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgVHJ1ZSwgd2hlbiBleGNlcHRpb24gaXMgd2l0aGluIHJhbmdlXG4gICAqL1xuICBtb2RpZmllc0Z1dHVyZSgpIHtcbiAgICBpZiAoIXRoaXMuY29tcG9uZW50Lmhhc1Byb3BlcnR5KCdyZWN1cnJlbmNlLWlkJykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBsZXQgcmFuZ2UgPSB0aGlzLmNvbXBvbmVudC5nZXRGaXJzdFByb3BlcnR5KCdyZWN1cnJlbmNlLWlkJykuZ2V0UGFyYW1ldGVyKCdyYW5nZScpO1xuICAgIHJldHVybiByYW5nZSA9PT0gRXZlbnQuVEhJU0FOREZVVFVSRTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyB0aGUgcmFuZ2UgZXhjZXB0aW9uIG5lYXJlc3QgdG8gdGhlIGdpdmVuIGRhdGUuXG4gICAqXG4gICAqIEBwYXJhbSB7VGltZX0gdGltZSAgIHVzdWFsbHkgYW4gb2NjdXJyZW5jZSB0aW1lIG9mIGFuIGV2ZW50XG4gICAqIEByZXR1cm4gez9FdmVudH0gICAgIHRoZSByZWxhdGVkIGV2ZW50L2V4Y2VwdGlvbiBvciBudWxsXG4gICAqL1xuICBmaW5kUmFuZ2VFeGNlcHRpb24odGltZSkge1xuICAgIGlmICghdGhpcy5yYW5nZUV4Y2VwdGlvbnMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBsZXQgdXRjID0gdGltZS50b1VuaXhUaW1lKCk7XG4gICAgbGV0IGlkeCA9IGJpbnNlYXJjaEluc2VydChcbiAgICAgIHRoaXMucmFuZ2VFeGNlcHRpb25zLFxuICAgICAgW3V0Y10sXG4gICAgICBjb21wYXJlUmFuZ2VFeGNlcHRpb25cbiAgICApO1xuXG4gICAgaWR4IC09IDE7XG5cbiAgICAvLyBvY2N1cnMgYmVmb3JlXG4gICAgaWYgKGlkeCA8IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCByYW5nZUl0ZW0gPSB0aGlzLnJhbmdlRXhjZXB0aW9uc1tpZHhdO1xuXG4gICAgLyogYzggaWdub3JlIG5leHQgNCAqL1xuICAgIGlmICh1dGMgPCByYW5nZUl0ZW1bMF0pIHtcbiAgICAgIC8vIHNhbml0eSBjaGVjayBvbmx5XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmFuZ2VJdGVtWzFdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG9jY3VycmVuY2UgZGV0YWlscyBiYXNlZCBvbiBpdHMgc3RhcnQgdGltZS4gIElmIHRoZVxuICAgKiBvY2N1cnJlbmNlIGhhcyBhbiBleGNlcHRpb24gd2lsbCByZXR1cm4gdGhlIGRldGFpbHMgZm9yIHRoYXQgZXhjZXB0aW9uLlxuICAgKlxuICAgKiBOT1RFOiB0aGlzIG1ldGhvZCBpcyBpbnRlbmQgdG8gYmUgdXNlZCBpbiBjb25qdW5jdGlvblxuICAgKiAgICAgICB3aXRoIHRoZSB7QGxpbmsgSUNBTC5FdmVudCNpdGVyYXRvciBpdGVyYXRvcn0gbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0ge1RpbWV9IG9jY3VycmVuY2UgICAgICAgICAgICAgICB0aW1lIG9jY3VycmVuY2VcbiAgICogQHJldHVybiB7b2NjdXJyZW5jZURldGFpbHN9ICAgICAgICAgICAgSW5mb3JtYXRpb24gYWJvdXQgdGhlIG9jY3VycmVuY2VcbiAgICovXG4gIGdldE9jY3VycmVuY2VEZXRhaWxzKG9jY3VycmVuY2UpIHtcbiAgICBsZXQgaWQgPSBvY2N1cnJlbmNlLnRvU3RyaW5nKCk7XG4gICAgbGV0IHV0Y0lkID0gb2NjdXJyZW5jZS5jb252ZXJ0VG9ab25lKFRpbWV6b25lLnV0Y1RpbWV6b25lKS50b1N0cmluZygpO1xuICAgIGxldCBpdGVtO1xuICAgIGxldCByZXN1bHQgPSB7XG4gICAgICAvL1hYWDogQ2xvbmU/XG4gICAgICByZWN1cnJlbmNlSWQ6IG9jY3VycmVuY2VcbiAgICB9O1xuXG4gICAgaWYgKGlkIGluIHRoaXMuZXhjZXB0aW9ucykge1xuICAgICAgaXRlbSA9IHJlc3VsdC5pdGVtID0gdGhpcy5leGNlcHRpb25zW2lkXTtcbiAgICAgIHJlc3VsdC5zdGFydERhdGUgPSBpdGVtLnN0YXJ0RGF0ZTtcbiAgICAgIHJlc3VsdC5lbmREYXRlID0gaXRlbS5lbmREYXRlO1xuICAgICAgcmVzdWx0Lml0ZW0gPSBpdGVtO1xuICAgIH0gZWxzZSBpZiAodXRjSWQgaW4gdGhpcy5leGNlcHRpb25zKSB7XG4gICAgICBpdGVtID0gdGhpcy5leGNlcHRpb25zW3V0Y0lkXTtcbiAgICAgIHJlc3VsdC5zdGFydERhdGUgPSBpdGVtLnN0YXJ0RGF0ZTtcbiAgICAgIHJlc3VsdC5lbmREYXRlID0gaXRlbS5lbmREYXRlO1xuICAgICAgcmVzdWx0Lml0ZW0gPSBpdGVtO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyByYW5nZSBleGNlcHRpb25zIChSQU5HRT1USElTQU5ERlVUVVJFKSBoYXZlIGFcbiAgICAgIC8vIGxvd2VyIHByaW9yaXR5IHRoZW4gZGlyZWN0IGV4Y2VwdGlvbnMgYnV0XG4gICAgICAvLyBtdXN0IGJlIGFjY291bnRlZCBmb3IgZmlyc3QuIFRoZWlyIGl0ZW0gaXNcbiAgICAgIC8vIGFsd2F5cyB0aGUgZmlyc3QgZXhjZXB0aW9uIHdpdGggdGhlIHJhbmdlIHByb3AuXG4gICAgICBsZXQgcmFuZ2VFeGNlcHRpb25JZCA9IHRoaXMuZmluZFJhbmdlRXhjZXB0aW9uKFxuICAgICAgICBvY2N1cnJlbmNlXG4gICAgICApO1xuICAgICAgbGV0IGVuZDtcblxuICAgICAgaWYgKHJhbmdlRXhjZXB0aW9uSWQpIHtcbiAgICAgICAgbGV0IGV4Y2VwdGlvbiA9IHRoaXMuZXhjZXB0aW9uc1tyYW5nZUV4Y2VwdGlvbklkXTtcblxuICAgICAgICAvLyByYW5nZSBleGNlcHRpb24gbXVzdCBtb2RpZnkgc3RhbmRhcmQgdGltZVxuICAgICAgICAvLyBieSB0aGUgZGlmZmVyZW5jZSAoaWYgYW55KSBpbiBzdGFydC9lbmQgdGltZXMuXG4gICAgICAgIHJlc3VsdC5pdGVtID0gZXhjZXB0aW9uO1xuXG4gICAgICAgIGxldCBzdGFydERpZmYgPSB0aGlzLl9yYW5nZUV4Y2VwdGlvbkNhY2hlW3JhbmdlRXhjZXB0aW9uSWRdO1xuXG4gICAgICAgIGlmICghc3RhcnREaWZmKSB7XG4gICAgICAgICAgbGV0IG9yaWdpbmFsID0gZXhjZXB0aW9uLnJlY3VycmVuY2VJZC5jbG9uZSgpO1xuICAgICAgICAgIGxldCBuZXdTdGFydCA9IGV4Y2VwdGlvbi5zdGFydERhdGUuY2xvbmUoKTtcblxuICAgICAgICAgIC8vIHpvbmVzIG11c3QgYmUgc2FtZSBvdGhlcndpc2Ugc3VidHJhY3QgbWF5IGJlIGluY29ycmVjdC5cbiAgICAgICAgICBvcmlnaW5hbC56b25lID0gbmV3U3RhcnQuem9uZTtcbiAgICAgICAgICBzdGFydERpZmYgPSBuZXdTdGFydC5zdWJ0cmFjdERhdGUob3JpZ2luYWwpO1xuXG4gICAgICAgICAgdGhpcy5fcmFuZ2VFeGNlcHRpb25DYWNoZVtyYW5nZUV4Y2VwdGlvbklkXSA9IHN0YXJ0RGlmZjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzdGFydCA9IG9jY3VycmVuY2UuY2xvbmUoKTtcbiAgICAgICAgc3RhcnQuem9uZSA9IGV4Y2VwdGlvbi5zdGFydERhdGUuem9uZTtcbiAgICAgICAgc3RhcnQuYWRkRHVyYXRpb24oc3RhcnREaWZmKTtcblxuICAgICAgICBlbmQgPSBzdGFydC5jbG9uZSgpO1xuICAgICAgICBlbmQuYWRkRHVyYXRpb24oZXhjZXB0aW9uLmR1cmF0aW9uKTtcblxuICAgICAgICByZXN1bHQuc3RhcnREYXRlID0gc3RhcnQ7XG4gICAgICAgIHJlc3VsdC5lbmREYXRlID0gZW5kO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbm8gcmFuZ2UgZXhjZXB0aW9uIHN0YW5kYXJkIGV4cGFuc2lvblxuICAgICAgICBlbmQgPSBvY2N1cnJlbmNlLmNsb25lKCk7XG4gICAgICAgIGVuZC5hZGREdXJhdGlvbih0aGlzLmR1cmF0aW9uKTtcblxuICAgICAgICByZXN1bHQuZW5kRGF0ZSA9IGVuZDtcbiAgICAgICAgcmVzdWx0LnN0YXJ0RGF0ZSA9IG9jY3VycmVuY2U7XG4gICAgICAgIHJlc3VsdC5pdGVtID0gdGhpcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkcyBhIHJlY3VyIGV4cGFuc2lvbiBpbnN0YW5jZSBmb3IgYSBzcGVjaWZpYyBwb2ludCBpbiB0aW1lIChkZWZhdWx0c1xuICAgKiB0byBzdGFydERhdGUpLlxuICAgKlxuICAgKiBAcGFyYW0ge1RpbWU9fSBzdGFydFRpbWUgICAgIFN0YXJ0aW5nIHBvaW50IGZvciBleHBhbnNpb25cbiAgICogQHJldHVybiB7UmVjdXJFeHBhbnNpb259ICAgIEV4cGFuc2lvbiBvYmplY3RcbiAgICovXG4gIGl0ZXJhdG9yKHN0YXJ0VGltZSkge1xuICAgIHJldHVybiBuZXcgUmVjdXJFeHBhbnNpb24oe1xuICAgICAgY29tcG9uZW50OiB0aGlzLmNvbXBvbmVudCxcbiAgICAgIGR0c3RhcnQ6IHN0YXJ0VGltZSB8fCB0aGlzLnN0YXJ0RGF0ZVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgZXZlbnQgaXMgcmVjdXJyaW5nXG4gICAqXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgICBUcnVlLCBpZiBldmVudCBpcyByZWN1cnJpbmdcbiAgICovXG4gIGlzUmVjdXJyaW5nKCkge1xuICAgIGxldCBjb21wID0gdGhpcy5jb21wb25lbnQ7XG4gICAgcmV0dXJuIGNvbXAuaGFzUHJvcGVydHkoJ3JydWxlJykgfHwgY29tcC5oYXNQcm9wZXJ0eSgncmRhdGUnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIGV2ZW50IGRlc2NyaWJlcyBhIHJlY3VycmVuY2UgZXhjZXB0aW9uLiBTZWVcbiAgICoge0B0dXRvcmlhbCB0ZXJtaW5vbG9neX0gZm9yIGRldGFpbHMuXG4gICAqXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59ICAgIFRydWUsIGlmIHRoZSBldmVudCBkZXNjcmliZXMgYSByZWN1cnJlbmNlIGV4Y2VwdGlvblxuICAgKi9cbiAgaXNSZWN1cnJlbmNlRXhjZXB0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudC5oYXNQcm9wZXJ0eSgncmVjdXJyZW5jZS1pZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHR5cGVzIG9mIHJlY3VycmVuY2VzIHRoaXMgZXZlbnQgbWF5IGhhdmUuXG4gICAqXG4gICAqIFJldHVybmVkIGFzIGFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcG9zc2libGUga2V5czpcbiAgICpcbiAgICogICAgLSBZRUFSTFlcbiAgICogICAgLSBNT05USExZXG4gICAqICAgIC0gV0VFS0xZXG4gICAqICAgIC0gREFJTFlcbiAgICogICAgLSBNSU5VVEVMWVxuICAgKiAgICAtIFNFQ09ORExZXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdC48ZnJlcXVlbmN5VmFsdWVzLCBCb29sZWFuPn1cbiAgICogICAgICAgICAgT2JqZWN0IG9mIHJlY3VycmVuY2UgZmxhZ3NcbiAgICovXG4gIGdldFJlY3VycmVuY2VUeXBlcygpIHtcbiAgICBsZXQgcnVsZXMgPSB0aGlzLmNvbXBvbmVudC5nZXRBbGxQcm9wZXJ0aWVzKCdycnVsZScpO1xuICAgIGxldCBpID0gMDtcbiAgICBsZXQgbGVuID0gcnVsZXMubGVuZ3RoO1xuICAgIGxldCByZXN1bHQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgbGV0IHZhbHVlID0gcnVsZXNbaV0uZ2V0Rmlyc3RWYWx1ZSgpO1xuICAgICAgcmVzdWx0W3ZhbHVlLmZyZXFdID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSB1aWQgb2YgdGhpcyBldmVudFxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IHVpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZmlyc3RQcm9wKCd1aWQnKTtcbiAgfVxuXG4gIHNldCB1aWQodmFsdWUpIHtcbiAgICB0aGlzLl9zZXRQcm9wKCd1aWQnLCB2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHN0YXJ0IGRhdGVcbiAgICogQHR5cGUge1RpbWV9XG4gICAqL1xuICBnZXQgc3RhcnREYXRlKCkge1xuICAgIHJldHVybiB0aGlzLl9maXJzdFByb3AoJ2R0c3RhcnQnKTtcbiAgfVxuXG4gIHNldCBzdGFydERhdGUodmFsdWUpIHtcbiAgICB0aGlzLl9zZXRUaW1lKCdkdHN0YXJ0JywgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBlbmQgZGF0ZS4gVGhpcyBjYW4gYmUgdGhlIHJlc3VsdCBkaXJlY3RseSBmcm9tIHRoZSBwcm9wZXJ0eSwgb3IgdGhlXG4gICAqIGVuZCBkYXRlIGNhbGN1bGF0ZWQgZnJvbSBzdGFydCBkYXRlIGFuZCBkdXJhdGlvbi4gU2V0dGluZyB0aGUgcHJvcGVydHlcbiAgICogd2lsbCByZW1vdmUgYW55IGR1cmF0aW9uIHByb3BlcnRpZXMuXG4gICAqIEB0eXBlIHtUaW1lfVxuICAgKi9cbiAgZ2V0IGVuZERhdGUoKSB7XG4gICAgbGV0IGVuZERhdGUgPSB0aGlzLl9maXJzdFByb3AoJ2R0ZW5kJyk7XG4gICAgaWYgKCFlbmREYXRlKSB7XG4gICAgICAgIGxldCBkdXJhdGlvbiA9IHRoaXMuX2ZpcnN0UHJvcCgnZHVyYXRpb24nKTtcbiAgICAgICAgZW5kRGF0ZSA9IHRoaXMuc3RhcnREYXRlLmNsb25lKCk7XG4gICAgICAgIGlmIChkdXJhdGlvbikge1xuICAgICAgICAgICAgZW5kRGF0ZS5hZGREdXJhdGlvbihkdXJhdGlvbik7XG4gICAgICAgIH0gZWxzZSBpZiAoZW5kRGF0ZS5pc0RhdGUpIHtcbiAgICAgICAgICAgIGVuZERhdGUuZGF5ICs9IDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVuZERhdGU7XG4gIH1cblxuICBzZXQgZW5kRGF0ZSh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmNvbXBvbmVudC5oYXNQcm9wZXJ0eSgnZHVyYXRpb24nKSkge1xuICAgICAgdGhpcy5jb21wb25lbnQucmVtb3ZlUHJvcGVydHkoJ2R1cmF0aW9uJyk7XG4gICAgfVxuICAgIHRoaXMuX3NldFRpbWUoJ2R0ZW5kJywgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBkdXJhdGlvbi4gVGhpcyBjYW4gYmUgdGhlIHJlc3VsdCBkaXJlY3RseSBmcm9tIHRoZSBwcm9wZXJ0eSwgb3IgdGhlXG4gICAqIGR1cmF0aW9uIGNhbGN1bGF0ZWQgZnJvbSBzdGFydCBkYXRlIGFuZCBlbmQgZGF0ZS4gU2V0dGluZyB0aGUgcHJvcGVydHlcbiAgICogd2lsbCByZW1vdmUgYW55IGBkdGVuZGAgcHJvcGVydGllcy5cbiAgICogQHR5cGUge0R1cmF0aW9ufVxuICAgKi9cbiAgZ2V0IGR1cmF0aW9uKCkge1xuICAgIGxldCBkdXJhdGlvbiA9IHRoaXMuX2ZpcnN0UHJvcCgnZHVyYXRpb24nKTtcbiAgICBpZiAoIWR1cmF0aW9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbmREYXRlLnN1YnRyYWN0RGF0ZVR6KHRoaXMuc3RhcnREYXRlKTtcbiAgICB9XG4gICAgcmV0dXJuIGR1cmF0aW9uO1xuICB9XG5cbiAgc2V0IGR1cmF0aW9uKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuY29tcG9uZW50Lmhhc1Byb3BlcnR5KCdkdGVuZCcpKSB7XG4gICAgICB0aGlzLmNvbXBvbmVudC5yZW1vdmVQcm9wZXJ0eSgnZHRlbmQnKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zZXRQcm9wKCdkdXJhdGlvbicsIHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgbG9jYXRpb24gb2YgdGhlIGV2ZW50LlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IGxvY2F0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9maXJzdFByb3AoJ2xvY2F0aW9uJyk7XG4gIH1cblxuICBzZXQgbG9jYXRpb24odmFsdWUpIHtcbiAgICB0aGlzLl9zZXRQcm9wKCdsb2NhdGlvbicsIHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYXR0ZW5kZWVzIGluIHRoZSBldmVudFxuICAgKiBAdHlwZSB7UHJvcGVydHlbXX1cbiAgICovXG4gIGdldCBhdHRlbmRlZXMoKSB7XG4gICAgLy9YWFg6IFRoaXMgaXMgd2F5IGxhbWUgd2Ugc2hvdWxkIGhhdmUgYSBiZXR0ZXJcbiAgICAvLyAgICAgZGF0YSBzdHJ1Y3R1cmUgZm9yIHRoaXMgbGF0ZXIuXG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50LmdldEFsbFByb3BlcnRpZXMoJ2F0dGVuZGVlJyk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGV2ZW50IHN1bW1hcnlcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCBzdW1tYXJ5KCkge1xuICAgIHJldHVybiB0aGlzLl9maXJzdFByb3AoJ3N1bW1hcnknKTtcbiAgfVxuXG4gIHNldCBzdW1tYXJ5KHZhbHVlKSB7XG4gICAgdGhpcy5fc2V0UHJvcCgnc3VtbWFyeScsIHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZXZlbnQgZGVzY3JpcHRpb24uXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgZGVzY3JpcHRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZpcnN0UHJvcCgnZGVzY3JpcHRpb24nKTtcbiAgfVxuXG4gIHNldCBkZXNjcmlwdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuX3NldFByb3AoJ2Rlc2NyaXB0aW9uJywgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBldmVudCBjb2xvciBmcm9tIFtyZmM3OTg2XShodHRwczovL2RhdGF0cmFja2VyLmlldGYub3JnL2RvYy9odG1sL3JmYzc5ODYpXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgY29sb3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZpcnN0UHJvcCgnY29sb3InKTtcbiAgfVxuXG4gIHNldCBjb2xvcih2YWx1ZSkge1xuICAgIHRoaXMuX3NldFByb3AoJ2NvbG9yJywgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBvcmdhbml6ZXIgdmFsdWUgYXMgYW4gdXJpLiBJbiBtb3N0IGNhc2VzIHRoaXMgaXMgYSBtYWlsdG86IHVyaSwgYnV0XG4gICAqIGl0IGNhbiBhbHNvIGJlIHNvbWV0aGluZyBlbHNlLCBsaWtlIHVybjp1dWlkOi4uLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IG9yZ2FuaXplcigpIHtcbiAgICByZXR1cm4gdGhpcy5fZmlyc3RQcm9wKCdvcmdhbml6ZXInKTtcbiAgfVxuXG4gIHNldCBvcmdhbml6ZXIodmFsdWUpIHtcbiAgICB0aGlzLl9zZXRQcm9wKCdvcmdhbml6ZXInLCB2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHNlcXVlbmNlIHZhbHVlIGZvciB0aGlzIGV2ZW50LiBVc2VkIGZvciBzY2hlZHVsaW5nXG4gICAqIHNlZSB7QHR1dG9yaWFsIHRlcm1pbm9sb2d5fS5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGdldCBzZXF1ZW5jZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZmlyc3RQcm9wKCdzZXF1ZW5jZScpO1xuICB9XG5cbiAgc2V0IHNlcXVlbmNlKHZhbHVlKSB7XG4gICAgdGhpcy5fc2V0UHJvcCgnc2VxdWVuY2UnLCB2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHJlY3VycmVuY2UgaWQgZm9yIHRoaXMgZXZlbnQuIFNlZSB7QHR1dG9yaWFsIHRlcm1pbm9sb2d5fSBmb3IgZGV0YWlscy5cbiAgICogQHR5cGUge1RpbWV9XG4gICAqL1xuICBnZXQgcmVjdXJyZW5jZUlkKCkge1xuICAgIHJldHVybiB0aGlzLl9maXJzdFByb3AoJ3JlY3VycmVuY2UtaWQnKTtcbiAgfVxuXG4gIHNldCByZWN1cnJlbmNlSWQodmFsdWUpIHtcbiAgICB0aGlzLl9zZXRUaW1lKCdyZWN1cnJlbmNlLWlkJywgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldC91cGRhdGUgYSB0aW1lIHByb3BlcnR5J3MgdmFsdWUuXG4gICAqIFRoaXMgd2lsbCBhbHNvIHVwZGF0ZSB0aGUgVFpJRCBvZiB0aGUgcHJvcGVydHkuXG4gICAqXG4gICAqIFRPRE86IHRoaXMgbWV0aG9kIGhhbmRsZXMgdGhlIGNhc2Ugd2hlcmUgd2UgYXJlIHN3aXRjaGluZ1xuICAgKiBmcm9tIGEga25vd24gdGltZXpvbmUgdG8gYW4gaW1wbGllZCB0aW1lem9uZSAob25lIHdpdGhvdXQgVFpJRCkuXG4gICAqIFRoaXMgZG9lcyBfbm90XyBoYW5kbGUgdGhlIGNhc2Ugb2YgbW92aW5nIGJldHdlZW4gYSBrbm93blxuICAgKiAgKGJ5IFRpbWV6b25lU2VydmljZSkgdGltZXpvbmUgdG8gYW4gdW5rbm93biB0aW1lem9uZS4uLlxuICAgKlxuICAgKiBXZSB3aWxsIG5vdCBhZGQvcmVtb3ZlL3VwZGF0ZSB0aGUgVlRJTUVaT05FIHN1YmNvbXBvbmVudHNcbiAgICogIGxlYWRpbmcgdG8gaW52YWxpZCBJQ0FMIGRhdGEuLi5cbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BOYW1lICAgICBUaGUgcHJvcGVydHkgbmFtZVxuICAgKiBAcGFyYW0ge1RpbWV9IHRpbWUgICAgICAgICAgIFRoZSB0aW1lIHRvIHNldFxuICAgKi9cbiAgX3NldFRpbWUocHJvcE5hbWUsIHRpbWUpIHtcbiAgICBsZXQgcHJvcCA9IHRoaXMuY29tcG9uZW50LmdldEZpcnN0UHJvcGVydHkocHJvcE5hbWUpO1xuXG4gICAgaWYgKCFwcm9wKSB7XG4gICAgICBwcm9wID0gbmV3IFByb3BlcnR5KHByb3BOYW1lKTtcbiAgICAgIHRoaXMuY29tcG9uZW50LmFkZFByb3BlcnR5KHByb3ApO1xuICAgIH1cblxuICAgIC8vIHV0YyBhbmQgbG9jYWwgZG9uJ3QgZ2V0IGEgdHppZFxuICAgIGlmIChcbiAgICAgIHRpbWUuem9uZSA9PT0gVGltZXpvbmUubG9jYWxUaW1lem9uZSB8fFxuICAgICAgdGltZS56b25lID09PSBUaW1lem9uZS51dGNUaW1lem9uZVxuICAgICkge1xuICAgICAgLy8gcmVtb3ZlIHRoZSB0emlkXG4gICAgICBwcm9wLnJlbW92ZVBhcmFtZXRlcigndHppZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9wLnNldFBhcmFtZXRlcigndHppZCcsIHRpbWUuem9uZS50emlkKTtcbiAgICB9XG5cbiAgICBwcm9wLnNldFZhbHVlKHRpbWUpO1xuICB9XG5cbiAgX3NldFByb3AobmFtZSwgdmFsdWUpIHtcbiAgICB0aGlzLmNvbXBvbmVudC51cGRhdGVQcm9wZXJ0eVdpdGhWYWx1ZShuYW1lLCB2YWx1ZSk7XG4gIH1cblxuICBfZmlyc3RQcm9wKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5jb21wb25lbnQuZ2V0Rmlyc3RQcm9wZXJ0eVZhbHVlKG5hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBldmVudC5cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50LnRvU3RyaW5nKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY29tcGFyZVJhbmdlRXhjZXB0aW9uKGEsIGIpIHtcbiAgaWYgKGFbMF0gPiBiWzBdKSByZXR1cm4gMTtcbiAgaWYgKGJbMF0gPiBhWzBdKSByZXR1cm4gLTE7XG4gIHJldHVybiAwO1xufVxuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG4vKipcbiAqIFRoZSBDb21wb25lbnRQYXJzZXIgaXMgdXNlZCB0byBwcm9jZXNzIGEgU3RyaW5nIG9yIGpDYWwgT2JqZWN0LFxuICogZmlyaW5nIGNhbGxiYWNrcyBmb3IgdmFyaW91cyBmb3VuZCBjb21wb25lbnRzLCBhcyB3ZWxsIGFzIGNvbXBsZXRpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciBvcHRpb25zID0ge1xuICogICAvLyB3aGVuIGZhbHNlIG5vIGV2ZW50cyB3aWxsIGJlIGVtaXR0ZWQgZm9yIHR5cGVcbiAqICAgcGFyc2VFdmVudDogdHJ1ZSxcbiAqICAgcGFyc2VUaW1lem9uZTogdHJ1ZVxuICogfTtcbiAqXG4gKiB2YXIgcGFyc2VyID0gbmV3IElDQUwuQ29tcG9uZW50UGFyc2VyKG9wdGlvbnMpO1xuICpcbiAqIHBhcnNlci5vbmV2ZW50KGV2ZW50Q29tcG9uZW50KSB7XG4gKiAgIC8vLi4uXG4gKiB9XG4gKlxuICogLy8gb250aW1lem9uZSwgZXRjLi4uXG4gKlxuICogcGFyc2VyLm9uY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAqXG4gKiB9O1xuICpcbiAqIHBhcnNlci5wcm9jZXNzKHN0cmluZ09yQ29tcG9uZW50KTtcbiAqXG4gKiBAbWVtYmVyb2YgSUNBTFxuICovXG5jbGFzcyBDb21wb25lbnRQYXJzZXIge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBJQ0FMLkNvbXBvbmVudFBhcnNlciBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zICAgICAgICAgICAgICAgICAgIENvbXBvbmVudCBwYXJzZXIgb3B0aW9uc1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMucGFyc2VFdmVudCAgICAgICAgV2hldGhlciBldmVudHMgc2hvdWxkIGJlIHBhcnNlZFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMucGFyc2VUaW1lemVvbmUgICAgV2hldGhlciB0aW1lem9uZXMgc2hvdWxkIGJlIHBhcnNlZFxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIGlmICh0eXBlb2Yob3B0aW9ucykgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKG9wdGlvbnMpKSB7XG4gICAgICB0aGlzW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV2hlbiB0cnVlLCBwYXJzZSBldmVudHNcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuICBwYXJzZUV2ZW50ID0gdHJ1ZTtcblxuICAvKipcbiAgICogV2hlbiB0cnVlLCBwYXJzZSB0aW1lem9uZXNcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuICBwYXJzZVRpbWV6b25lID0gdHJ1ZTtcblxuXG4gIC8qIFNBWCBsaWtlIGV2ZW50cyBoZXJlIGZvciByZWZlcmVuY2UgKi9cblxuICAvKipcbiAgICogRmlyZWQgd2hlbiBwYXJzaW5nIGlzIGNvbXBsZXRlXG4gICAqIEBjYWxsYmFja1xuICAgKi9cbiAgb25jb21wbGV0ZSA9IC8qIGM4IGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKCkge307XG5cbiAgLyoqXG4gICAqIEZpcmVkIGlmIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgcGFyc2luZy5cbiAgICpcbiAgICogQGNhbGxiYWNrXG4gICAqIEBwYXJhbSB7RXJyb3J9IGVyciBkZXRhaWxzIG9mIGVycm9yXG4gICAqL1xuICBvbmVycm9yID0gLyogYzggaWdub3JlIG5leHQgKi8gZnVuY3Rpb24oZXJyKSB7fTtcblxuICAvKipcbiAgICogRmlyZWQgd2hlbiBhIHRvcCBsZXZlbCBjb21wb25lbnQgKFZUSU1FWk9ORSkgaXMgZm91bmRcbiAgICpcbiAgICogQGNhbGxiYWNrXG4gICAqIEBwYXJhbSB7VGltZXpvbmV9IGNvbXBvbmVudCAgICAgVGltZXpvbmUgb2JqZWN0XG4gICAqL1xuICBvbnRpbWV6b25lID0gLyogYzggaWdub3JlIG5leHQgKi8gZnVuY3Rpb24oY29tcG9uZW50KSB7fTtcblxuICAvKipcbiAgICogRmlyZWQgd2hlbiBhIHRvcCBsZXZlbCBjb21wb25lbnQgKFZFVkVOVCkgaXMgZm91bmQuXG4gICAqXG4gICAqIEBjYWxsYmFja1xuICAgKiBAcGFyYW0ge0V2ZW50fSBjb21wb25lbnQgICAgVG9wIGxldmVsIGNvbXBvbmVudFxuICAgKi9cbiAgb25ldmVudCA9IC8qIGM4IGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKGNvbXBvbmVudCkge307XG5cbiAgLyoqXG4gICAqIFByb2Nlc3MgYSBzdHJpbmcgb3IgcGFyc2UgaWNhbCBvYmplY3QuICBUaGlzIGZ1bmN0aW9uIGl0c2VsZiB3aWxsIHJldHVyblxuICAgKiBub3RoaW5nIGJ1dCB3aWxsIHN0YXJ0IHRoZSBwYXJzaW5nIHByb2Nlc3MuXG4gICAqXG4gICAqIEV2ZW50cyBtdXN0IGJlIHJlZ2lzdGVyZWQgcHJpb3IgdG8gY2FsbGluZyB0aGlzIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIHtDb21wb25lbnR8U3RyaW5nfE9iamVjdH0gaWNhbCAgICAgIFRoZSBjb21wb25lbnQgdG8gcHJvY2VzcyxcbiAgICogICAgICAgIGVpdGhlciBpbiBpdHMgZmluYWwgZm9ybSwgYXMgYSBqQ2FsIE9iamVjdCwgb3Igc3RyaW5nIHJlcHJlc2VudGF0aW9uXG4gICAqL1xuICBwcm9jZXNzKGljYWwpIHtcbiAgICAvL1RPRE86IHRoaXMgaXMgc3luYyBub3cgaW4gdGhlIGZ1dHVyZSB3ZSB3aWxsIGhhdmUgYSBpbmNyZW1lbnRhbCBwYXJzZXIuXG4gICAgaWYgKHR5cGVvZihpY2FsKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGljYWwgPSBwYXJzZShpY2FsKTtcbiAgICB9XG5cbiAgICBpZiAoIShpY2FsIGluc3RhbmNlb2YgQ29tcG9uZW50KSkge1xuICAgICAgaWNhbCA9IG5ldyBDb21wb25lbnQoaWNhbCk7XG4gICAgfVxuXG4gICAgbGV0IGNvbXBvbmVudHMgPSBpY2FsLmdldEFsbFN1YmNvbXBvbmVudHMoKTtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IGxlbiA9IGNvbXBvbmVudHMubGVuZ3RoO1xuICAgIGxldCBjb21wb25lbnQ7XG5cbiAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBjb21wb25lbnQgPSBjb21wb25lbnRzW2ldO1xuXG4gICAgICBzd2l0Y2ggKGNvbXBvbmVudC5uYW1lKSB7XG4gICAgICAgIGNhc2UgJ3Z0aW1lem9uZSc6XG4gICAgICAgICAgaWYgKHRoaXMucGFyc2VUaW1lem9uZSkge1xuICAgICAgICAgICAgbGV0IHR6aWQgPSBjb21wb25lbnQuZ2V0Rmlyc3RQcm9wZXJ0eVZhbHVlKCd0emlkJyk7XG4gICAgICAgICAgICBpZiAodHppZCkge1xuICAgICAgICAgICAgICB0aGlzLm9udGltZXpvbmUobmV3IFRpbWV6b25lKHtcbiAgICAgICAgICAgICAgICB0emlkOiB0emlkLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogY29tcG9uZW50XG4gICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3ZldmVudCc6XG4gICAgICAgICAgaWYgKHRoaXMucGFyc2VFdmVudCkge1xuICAgICAgICAgICAgdGhpcy5vbmV2ZW50KG5ldyBFdmVudChjb21wb25lbnQpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy9YWFg6IGlkZWFsbHkgd2Ugc2hvdWxkIGRvIGEgXCJuZXh0VGlja1wiIGhlcmVcbiAgICAvLyAgICAgc28gaW4gYWxsIGNhc2VzIHRoaXMgaXMgYWN0dWFsbHkgYXN5bmMuXG4gICAgdGhpcy5vbmNvbXBsZXRlKCk7XG4gIH1cbn1cblxuLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cblxuLyoqXG4gKiBUaGUgbWFpbiBJQ0FMIG1vZHVsZS4gUHJvdmlkZXMgYWNjZXNzIHRvIGV2ZXJ5dGhpbmcgZWxzZS5cbiAqXG4gKiBAYWxpYXMgSUNBTFxuICogQG5hbWVzcGFjZSBJQ0FMXG4gKiBAcHJvcGVydHkge0lDQUwuZGVzaWdufSBkZXNpZ25cbiAqIEBwcm9wZXJ0eSB7SUNBTC5oZWxwZXJzfSBoZWxwZXJzXG4gKi9cbnZhciBJQ0FMbW9kdWxlID0ge1xuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBjaGFyYWN0ZXJzIGJlZm9yZSBpQ2FsZW5kYXIgbGluZSBmb2xkaW5nIHNob3VsZCBvY2N1clxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAZGVmYXVsdCA3NVxuICAgKi9cbiAgZm9sZExlbmd0aDogNzUsXG5cbiAgZGVidWc6IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBUaGUgY2hhcmFjdGVyKHMpIHRvIGJlIHVzZWQgZm9yIGEgbmV3bGluZS4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgcHJvdmlkZWQgYnlcbiAgICogcmZjNTU0NS5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGRlZmF1bHQgXCJcXHJcXG5cIlxuICAgKi9cbiAgbmV3TGluZUNoYXI6ICdcXHJcXG4nLFxuXG4gIEJpbmFyeSxcbiAgQ29tcG9uZW50LFxuICBDb21wb25lbnRQYXJzZXIsXG4gIER1cmF0aW9uLFxuICBFdmVudCxcbiAgUGVyaW9kLFxuICBQcm9wZXJ0eSxcbiAgUmVjdXIsXG4gIFJlY3VyRXhwYW5zaW9uLFxuICBSZWN1ckl0ZXJhdG9yLFxuICBUaW1lLFxuICBUaW1lem9uZSxcbiAgVGltZXpvbmVTZXJ2aWNlLFxuICBVdGNPZmZzZXQsXG4gIFZDYXJkVGltZSxcblxuICBwYXJzZSxcbiAgc3RyaW5naWZ5LFxuXG4gIGRlc2lnbixcbiAgaGVscGVyc1xufTtcblxuZXhwb3J0IHsgSUNBTG1vZHVsZSBhcyBkZWZhdWx0IH07XG4iLCIvKiAtLS0gT2JzaWRpYW4gUGx1Z2luOiBQZXJpb2RpYyBOb3RlcyBDYWxlbmRhciBWaWV3IC0tLVxuICBEZXZlbG9wZXI6IFRpbSBXaWxsaWFtc1xuICBUaGlzIHBsdWdpbiB1c2VzIGxpYnJhcnk6IGh0dHBzOi8vYXBwLnVucGtnLmNvbS9pY2FsLmpzQDIuMi4xL2ZpbGVzL2Rpc3QvaWNhbC5lczUubWluLmNqcyAoYykgMjAyNCBDaHJpcyBMYXdsZXksIE1JVCBMaWNlbnNlICBcbiovXG5cbmltcG9ydCBJQ0FMIGZyb20gJ2ljYWwuanMnO1xuXG4vLyBJbXBvcnQgbmVjZXNzYXJ5IGNvbXBvbmVudHMgZnJvbSB0aGUgT2JzaWRpYW4gQVBJLlxuY29uc3QgeyBQbHVnaW4sIEl0ZW1WaWV3LCBQbHVnaW5TZXR0aW5nVGFiLCBOb3RpY2UsIFRGaWxlLCBURm9sZGVyLCBTZXR0aW5nLCBNb2RhbCwgTWVudSwgQWJzdHJhY3RJbnB1dFN1Z2dlc3QsIG1vbWVudCwgTWFya2Rvd25SZW5kZXJlciwgc2V0SWNvbiwgUGxhdGZvcm0gfSA9IHJlcXVpcmUoXCJvYnNpZGlhblwiKTtcblxuLy8gRGVmaW5lIGEgdW5pcXVlIHR5cGUgZm9yIHRoaXMgcGx1Z2luJ3Mgdmlldy5cbmNvbnN0IFZJRVdfVFlQRV9QRVJJT0QgPSBcImNhbGVuZGFyLXBlcmlvZC13ZWVrXCI7XG5cbi8vIERlZmluZSB0aGUgZGVmYXVsdCBzZXR0aW5ncyBmb3IgdGhlIHBsdWdpbi4gVGhpcyBvYmplY3QgaXMgdXNlZCBhcyBhIGZhbGxiYWNrIGFuZCBmb3IgcmVzZXR0aW5nIGNvbmZpZ3VyYXRpb25zLlxuY29uc3QgREVGQVVMVF9TRVRUSU5HUyA9IHtcbiAgICAvLyBHZW5lcmFsIERpc3BsYXlcbiAgICBmb250U2l6ZTogXCIxMnB4XCIsXG4gICAgZGF5TnVtYmVyRm9udFNpemU6IFwiMTVweFwiLFxuICAgIG5hdkJ1dHRvbkhlaWdodDogXCIyOHB4XCIsXG4gICAgaGVhZGVyUm93Qm9sZDogZmFsc2UsXG4gICAgcHdDb2x1bW5Cb2xkOiBmYWxzZSxcbiAgICBzaG93Q2FsZW5kYXJHcmlkTGluZXM6IGZhbHNlLFxuICAgIGNhbGVuZGFyR3JpZEdhcFdpZHRoOiBcIjFweFwiLFxuICAgIGNvbnRlbnRCb3JkZXJXaWR0aDogXCIxcHhcIixcbiAgICBtb250aENvbG9yTGlnaHQ6IFwicmdiYSg1MSwgNTEsIDUxLCAxKVwiLCAvLyBEYXJrIEdyZXkgZm9yIGxpZ2h0IG1vZGVcbiAgICBtb250aENvbG9yRGFyazogXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIDEpXCIsIC8vIFdoaXRlIGZvciBkYXJrIG1vZGVcbiAgICBtb250aFRpdGxlRm9ybWF0OiBcIk1NTSBZWVlZXCIsXG4gICAgbWFpbk1vbnRoWWVhclRpdGxlRm9udFNpemU6IFwiMjBweFwiLFxuICAgIG1haW5Nb250aFllYXJUaXRsZUJvbGQ6IGZhbHNlLFxuICAgIHRhYlRpdGxlRm9udFNpemU6IFwiMTVweFwiLFxuICAgIHRhYlRpdGxlQm9sZDogZmFsc2UsXG4gICAgdGFiRGlzcGxheU1vZGU6IFwiaWNvbk9ubHlcIixcbiAgICBtb2JpbGVUYWJEaXNwbGF5TW9kZTogXCJpY29uT25seVwiLFxuICAgIGNvbGxhcHNlZE5vdGVHcm91cHM6IHt9LFxuICAgIHRhYk9yZGVyOiBbXCJzY3JhdGNoXCIsIFwibm90ZXNcIiwgXCJ0YXNrc1wiLCBcImFzc2V0c1wiXSxcbiAgICB0YWJJY29uczoge1xuICAgICAgICBzY3JhdGNoOiBcInBlbmNpbFwiLFxuICAgICAgICBub3RlczogXCJmaWxlc1wiLFxuICAgICAgICB0YXNrczogXCJjaGVjay1jaXJjbGVcIixcbiAgICAgICAgcGlubmVkOiBcInBpblwiLFxuICAgICAgICBhc3NldHM6IFwiaW1hZ2UtZmlsZVwiXG4gICAgfSxcbiAgICBhc3NldHNMb29rYmFja0RheXM6IDcsXG4gICAgYXNzZXRzRGVmYXVsdFZpZXc6ICdncmlkJyxcbiAgICB0YWJWaXNpYmlsaXR5OiB7XG4gICAgICAgIHNjcmF0Y2g6IHRydWUsXG4gICAgICAgIG5vdGVzOiB0cnVlLFxuICAgICAgICB0YXNrczogdHJ1ZSxcbiAgICAgICAgYXNzZXRzOiB0cnVlLFxuICAgIH0sXG4gICAgY2FsZW5kYXJMYXlvdXQ6IFwibm9ybWFsXCIsXG4gICAgd2Vla1N0YXJ0RGF5OiBcInN1bmRheVwiLFxuXG4gICAgLy8gU2NyYXRjaHBhZFxuICAgIGZpeGVkTm90ZUZpbGU6IFwiU2NyYXRjaFBhZC5tZFwiLFxuICAgIHNjcmF0Y2hGb250U2l6ZTogXCIxNHB4XCIsXG4gICAgc2NyYXRjaEJvbGQ6IGZhbHNlLFxuICAgIHNjcmF0Y2hGb250RmFtaWx5OiBcIlwiLFxuICAgIHNjcmF0Y2hwYWRPcGVuQWN0aW9uOiBcIm5ldy10YWJcIixcbiAgICBzY3JhdGNocGFkSGlnaGxpZ2h0Q29sb3I6IFwicmdiYSgyNTUsIDE2NSwgMCwgMC40KVwiLFxuICAgIHNjcmF0Y2hwYWQ6IHtcbiAgICAgICAgc2hvd1ByZXZpZXdUb2dnbGU6IGZhbHNlLFxuICAgICAgICBzaG93QWRkVGFza0J1dHRvbjogdHJ1ZSxcbiAgICAgICAgdGFza0Zvcm1hdDogXCItIFsgXSAjVGFnIHwg8J+ThSB7ZnJpZGF5fVwiXG4gICAgfSxcblxuICAgIC8vIE5vdGVzIFRhYlxuICAgIGlnbm9yZUZvbGRlcnM6IFtdLFxuICAgIHBpblRhZzogXCJwaW5cIixcbiAgICBub3Rlc1ZpZXdNb2RlOiBcInJlY2VudFwiLFxuICAgIG5vdGVzRm9udFNpemU6IFwiMTRweFwiLFxuICAgIG5vdGVzQm9sZDogZmFsc2UsXG4gICAgbm90ZXNPcGVuQWN0aW9uOiBcIm5ldy10YWJcIixcbiAgICBub3Rlc0xpbmVIZWlnaHQ6IDEuMixcbiAgICBub3Rlc0xvb2tiYWNrRGF5czogNyxcbiAgICBzaG93Tm90ZVN0YXR1c0RvdHM6IHRydWUsXG4gICAgc2hvd05vdGVUb29sdGlwczogdHJ1ZSxcbiAgICBwaW5uZWROb3Rlc1NvcnRPcmRlcjogJ2EteicsIC8vIGNhbiBiZSAnYS16JyBvciAnY3VzdG9tJ1xuICAgIHBpbm5lZE5vdGVzQ3VzdG9tT3JkZXI6IFtdLCAgLy8gU3RvcmVzIGFuIGFycmF5IG9mIG5vdGUgcGF0aHMgZm9yIGN1c3RvbSBvcmRlclxuXG4gICAgLy9Bc3NldHMgXG4gICAgaGlkZGVuQXNzZXRUeXBlczogXCJiYXNlLGNhbnZhc1wiLFxuICAgIHNob3dVbnVzZWRBc3NldHNJbmRpY2F0b3I6IHRydWUsXG4gICAgYXNzZXRzT3BlbkFjdGlvbjogXCJuZXctdGFiXCIsXG5cbiAgICAvLyBDYWxlbmRhciBEb3RzICYgUG9wdXBzXG4gICAgc2hvd090aGVyTm90ZURvdDogdHJ1ZSxcbiAgICBzaG93TW9kaWZpZWRGaWxlRG90OiB0cnVlLFxuICAgIG90aGVyTm90ZUlnbm9yZUZvbGRlcnM6IFtdLFxuICAgIG90aGVyTm90ZUhvdmVyRGVsYXk6IDEwMCxcbiAgICBwb3B1cEhpZGVEZWxheTogMTAwLFxuICAgIHBvcHVwR2FwOiAtMixcbiAgICBvdGhlck5vdGVQb3B1cEZvbnRTaXplOiBcIjE0cHhcIixcbiAgICBjYWxlbmRhckRvdFNpemU6IDQsXG4gICAgc2hvd0Fzc2V0RG90OiB0cnVlLFxuICAgIGFzc2V0RG90Q29sb3I6IFwicmdiYSgyNTUsIDAsIDAsIDEpXCIsIC8vIFJlZFxuICAgIGNhbGVuZGFyRXZlbnREb3RDb2xvcjogJ3JnYmEoMTQ4LCAxNDgsIDE0OCwgMSknLCAvLyBHcmV5XG4gICAgYXNzZXRJZ25vcmVGb2xkZXJzOiBbXSxcblxuICAgIHNob3dQV0NvbHVtblNlcGFyYXRvcjogdHJ1ZSxcbiAgICBwd0NvbHVtblNlcGFyYXRvckNvbG9yOiBcInJnYmEoMTI4LCAxMjgsIDEyOCwgMC4yKVwiLCAvLyBHcmV5IHNlcGFyYXRvciBsaW5lXG5cbiAgICBwd0NvbHVtbkZvbnRDb2xvckxpZ2h0OiBcInJnYmEoNTEsIDUxLCA1MSwgMC42KVwiLCAvLyBEYXJrIGdyZXkgZm9yIGxpZ2h0IG1vZGVcbiAgICBwd0NvbHVtbkZvbnRDb2xvckRhcms6IFwicmdiYSgyNTUsIDI1NSwgMjU1LCAwLjYpXCIsIC8vIFdoaXRlIGZvciBkYXJrIG1vZGVcbiAgICB3ZWVrTnVtYmVyRm9udENvbG9yTGlnaHQ6IFwicmdiYSg1MSwgNTEsIDUxLCAwLjYpXCIsIC8vIERhcmsgZ3JleSBmb3IgbGlnaHQgbW9kZVxuICAgIHdlZWtOdW1iZXJGb250Q29sb3JEYXJrOiBcInJnYmEoMjU1LCAyNTUsIDI1NSwgMC42KVwiLCAvLyBXaGl0ZSBmb3IgZGFyayBtb2RlXG4gICAgZGF5SGVhZGVyRm9udENvbG9yTGlnaHQ6IFwicmdiYSg1MSwgNTEsIDUxLCAwLjYpXCIsIC8vIERhcmsgZ3JleSBmb3IgbGlnaHQgbW9kZVxuICAgIGRheUhlYWRlckZvbnRDb2xvckRhcms6IFwicmdiYSgyNTUsIDI1NSwgMjU1LCAwLjYpXCIsIC8vIFdoaXRlIGZvciBkYXJrIG1vZGVcblxuICAgIGRheUNlbGxGb250Q29sb3JMaWdodDogXCJyZ2JhKDUxLCA1MSwgNTEsIDEpXCIsIC8vIEN1cnJlbnQgbW9udGggZGF0ZXMgLSBsaWdodFxuICAgIGRheUNlbGxGb250Q29sb3JEYXJrOiBcInJnYmEoMjU1LCAyNTUsIDI1NSwgMSlcIiwgLy8gQ3VycmVudCBtb250aCBkYXRlcyAtIGRhcmtcbiAgICBvdGhlck1vbnRoRm9udENvbG9yTGlnaHQ6IFwicmdiYSgxNTMsIDE1MywgMTUzLCAwLjYpXCIsIC8vIFByZXZpb3VzL25leHQgbW9udGggZGF0ZXMgLSBsaWdodFxuICAgIG90aGVyTW9udGhGb250Q29sb3JEYXJrOiBcInJnYmEoMTUzLCAxNTMsIDE1MywgMC42KVwiLCAvLyBQcmV2aW91cy9uZXh0IG1vbnRoIGRhdGVzIC0gZGFya1xuXG4gICAgLy8gVGFzayBDb3VudCBCYWRnZVxuICAgIHRhc2tJbmRpY2F0b3JTdHlsZTogXCJoZWF0bWFwXCIsIC8vICdub25lJywgJ2JhZGdlJywgb3IgJ2hlYXRtYXAnXG4gICAgdGFza0JhZGdlRm9udFNpemU6IFwiOXB4XCIsXG4gICAgdGFza0JhZGdlQ29sb3I6IFwicmdiYSgxMDAsIDE0OSwgMjM3LCAwLjYpXCIsIC8vIENvcm5mbG93ZXIgQmx1ZVxuICAgIHRhc2tCYWRnZUZvbnRDb2xvcjogXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIDEpXCIsIC8vIFdoaXRlXG4gICAgdGFza0hlYXRtYXBTdGFydENvbG9yOiBcInJnYmEoMTAwLCAxNDksIDIzNywgMC4zKVwiLCAvLyBDb3JuZmxvd2VyIEJsdWVcbiAgICB0YXNrSGVhdG1hcE1pZENvbG9yOiBcInJnYmEoMjU1LCAxMjcsIDgwLCAwLjQ1KVwiLCAgICAvLyBDb3JhbFxuICAgIHRhc2tIZWF0bWFwRW5kQ29sb3I6IFwicmdiYSgyNTUsIDcxLCA3MSwgMC42KVwiLCAgICAgLy8gUmVkXG4gICAgdGFza0hlYXRtYXBNaWRwb2ludDogNSxcbiAgICB0YXNrSGVhdG1hcE1heHBvaW50OiAxMCxcbiAgICBzaG93VGFza0RvdDogZmFsc2UsXG4gICAgdGFza0RvdENvbG9yOiBcInJnYmEoMjAwLCAxMDAsIDIwMCwgMSlcIixcblxuICAgIC8vIERhaWx5IE5vdGVzXG4gICAgZGFpbHlOb3Rlc0ZvbGRlcjogXCJEYWlseSBOb3Rlc1wiLFxuICAgIGRhaWx5Tm90ZURhdGVGb3JtYXQ6IFwiWVlZWS1NTS1ERFwiLFxuICAgIGRhaWx5Tm90ZVRlbXBsYXRlUGF0aDogXCJcIixcbiAgICBkYWlseU5vdGVPcGVuQWN0aW9uOiBcIm5ldy10YWJcIixcblxuICAgIC8vcGVyaW9kIC8gd2VlayBudW1iZXJzIFxuICAgIHNob3dXZWVrTnVtYmVyczogdHJ1ZSxcbiAgICB3ZWVrTnVtYmVyVHlwZTogXCJjYWxlbmRhclwiLCAvLyAncGVyaW9kJyBvciAnY2FsZW5kYXInXG4gICAgd2Vla051bWJlckNvbHVtbkxhYmVsOiBcIkNXXCIsXG5cbiAgICAvL2NhbGVuZGFyIGV2ZW50cyAoZnJvbSBJQ1MpIHNldHRpbmdzXG4gICAgaWNzVXJsOiAnJyxcbiAgICBzaG93SWNzRG90OiB0cnVlLFxuICAgIGljc1JlZnJlc2hJbnRlcnZhbDogNjAsIC8vIGluIG1pbnV0ZXNcbiAgICBjYWxlbmRhckV2ZW50c1BsYWNlaG9sZGVyOiAnJSVDQUxFTkRBUl9FVkVOVFMlJScsXG4gICAgY2FsZW5kYXJFdmVudHNGb3JtYXQ6ICctIHt7c3RhcnRUaW1lfX0gLSB7e2VuZFRpbWV9fToge3tzdW1tYXJ5fX0nLFxuICAgIGNhbGVuZGFyRXZlbnRJbmRpY2F0b3JTdHlsZTogJ2RvdCcsIC8vIE9wdGlvbnM6ICdkb3QnLCAnaGVhdG1hcCcsICdiYWRnZSdcblxuICAgIC8vIEZ1bmN0aW9uYWxcbiAgICBhdXRvUmVsb2FkSW50ZXJ2YWw6IDUwMDAsXG4gICAgc3RhcnRPZlBlcmlvZDFEYXRlOiBcIjIwMjUtMDMtMDJcIixcbiAgICBzaG93UFdDb2x1bW46IGZhbHNlLFxuICAgIHB3Rm9ybWF0OiBcIlAjVyNcIixcbiAgICBlbmFibGVSb3dIaWdobGlnaHQ6IHRydWUsXG4gICAgZW5hYmxlQ29sdW1uSGlnaGxpZ2h0OiB0cnVlLFxuICAgIGVuYWJsZVJvd1RvRGF0ZUhpZ2hsaWdodDogZmFsc2UsXG4gICAgaGlnaGxpZ2h0Q3VycmVudFdlZWs6IGZhbHNlLFxuXG4gICAgLy8gQ29sb3JzXG4gICAgc2VsZWN0ZWRUYWJDb2xvcjogXCJyZ2JhKDEwMiwgMTAyLCAxMDIsIDEpXCIsXG4gICAgdG9kYXlIaWdobGlnaHRDb2xvckxpZ2h0OiBcInJnYmEoMjU1LCAyNTUsIDAsIDAuMylcIiwgLy8gTGlnaHQgeWVsbG93XG4gICAgdG9kYXlIaWdobGlnaHRDb2xvckRhcms6IFwicmdiYSg0MCwgMTIwLCAyNDAsIDEpXCIsICAgLy8gYmx1ZVxuICAgIG5vdGVzSG92ZXJDb2xvcjogXCJyZ2JhKDE3MSwgMTcxLCAxNzEsIDAuMTUpXCIsXG4gICAgZGFpbHlOb3RlRG90Q29sb3I6IFwicmdiYSg3NCwgMTQ0LCAyMjYsIDEpXCIsXG4gICAgbm90ZUNyZWF0ZWRDb2xvcjogXCJyZ2JhKDc2LCAxNzUsIDgwLCAxKVwiLFxuICAgIG5vdGVNb2RpZmllZENvbG9yOiBcInJnYmEoMjU1LCAxNTIsIDAsIDEpXCIsXG4gICAgb3RoZXJOb3RlRG90Q29sb3I6IFwicmdiYSg3NiwgMTc1LCA4MCwgMSlcIixcbiAgICBjYWxlbmRhck1vZGlmaWVkRG90Q29sb3I6IFwicmdiYSgyNTUsIDE1MiwgMCwgMSlcIixcbiAgICByb3dIaWdobGlnaHRDb2xvckxpZ2h0OiBcInJnYmEoMTYzLCAxNjMsIDE2MywgMC4yKVwiLCAvLyBMaWdodGVyIEdyZXlcbiAgICByb3dIaWdobGlnaHRDb2xvckRhcms6IFwicmdiYSg1MSwgNTEsIDUxLCAwLjcpXCIsICAgICAvLyBEYXJrIEdyZXlcbiAgICBkYXRlQ2VsbEhvdmVyQ29sb3JMaWdodDogXCJyZ2JhKDEwNSwgMTA1LCAxMDUsIDAuNzUpXCIsICAgICAvLyBMaWdodCBHcmV5XG4gICAgZGF0ZUNlbGxIb3ZlckNvbG9yRGFyazogXCJyZ2JhKDUxLCA1MSwgNTEsIDEpXCIsXG4gICAgYXNzZXREb3RDb2xvcjogXCJyZ2JhKDI1NSwgMCwgMCwgMSlcIixcbiAgICB0b2RheUhpZ2hsaWdodFN0eWxlOiBcImNpcmNsZVwiLCAvLyAnY2VsbCcgb3IgJ2NpcmNsZSdcbiAgICB0b2RheUNpcmNsZUNvbG9yOiBcInJnYmEoNDAsIDEyMCwgMjQwLCAxKVwiLCAvLyBDb3JuZmxvd2VyIEJsdWVcbiAgICBoaWdobGlnaHRUb2RheUxhYmVsczogdHJ1ZSxcbiAgICBoaWdobGlnaHRUb2RheVBXTGFiZWw6IHRydWUsXG4gICAgaGlnaGxpZ2h0V2Vla2VuZHM6IGZhbHNlLCAvLyBOZXcgc2V0dGluZ1xuICAgIHdlZWtlbmRTaGFkZUNvbG9yTGlnaHQ6IFwicmdiYSgxNjMsIDE2MywgMTYzLCAwLjE1KVwiLCAvLyBTdWJ0bGUgZ3JleSBmb3IgbGlnaHQgdGhlbWVcbiAgICB3ZWVrZW5kU2hhZGVDb2xvckRhcms6IFwicmdiYSg1MSwgNTEsIDUxLCAwLjQpXCIsIC8vIFN1YnRsZSBncmV5IGZvciBkYXJrIHRoZW1lXG5cblxuICAgIC8vIFdlZWtseSBOb3RlcyAoTkVXKVxuICAgIGVuYWJsZVdlZWtseU5vdGVzOiB0cnVlLFxuICAgIHdlZWtseU5vdGVGb2xkZXI6IFwiV2Vla2x5IE5vdGVzXCIsXG4gICAgd2Vla2x5Tm90ZUZvcm1hdDogXCJZWVlZLVtXXUNXXCIsIC8vIGUuZy4sIDIwMjUtVzM4XG4gICAgd2Vla2x5Tm90ZVRlbXBsYXRlOiBcIlwiLFxuICAgIHNob3dXZWVrbHlOb3RlRG90OiB0cnVlLFxuICAgIHdlZWtseU5vdGVEb3RDb2xvcjogXCJyZ2JhKDE2MCwgMTE1LCAyNDAsIDEpXCIsXG5cbiAgICAvLyBUYXNrcyBUYWIgU2V0dGluZ3NcbiAgICB0YXNrSWdub3JlRm9sZGVyczogW10sXG4gICAgdGFza1NvcnRPcmRlcjogXCJkdWVEYXRlXCIsXG4gICAgdGFza0dyb3VwQnk6IFwiZGF0ZVwiLFxuICAgIHRhc2tEYXRlR3JvdXBzVG9TaG93OiBbXCJvdmVyZHVlXCIsIFwidG9kYXlcIiwgXCJ0b21vcnJvd1wiLCBcIm5leHQ3ZGF5c1wiLCBcImZ1dHVyZVwiXSxcbiAgICB0YXNrVGV4dFRydW5jYXRlOiBmYWxzZSxcbiAgICBzaG93Q29tcGxldGVkVGFza3NUb2RheTogdHJ1ZSxcbiAgICB0YXNrSGVhZGluZ0ZvbnRTaXplOiBcIjEzcHhcIixcbiAgICB0YXNrVGV4dEZvbnRTaXplOiBcIjE0cHhcIixcbiAgICB0YXNrR3JvdXBJY29uczoge1xuICAgICAgICBvdmVyZHVlOiBcImFsYXJtLWNsb2NrLW9mZlwiLFxuICAgICAgICB0b2RheTogXCJ0YXJnZXRcIixcbiAgICAgICAgdG9tb3Jyb3c6IFwiYXJyb3ctcmlnaHRcIixcbiAgICAgICAgbmV4dDdkYXlzOiBcImNhbGVuZGFyLWRheXNcIixcbiAgICAgICAgZnV0dXJlOiBcInRlbGVzY29wZVwiLFxuICAgICAgICBub0RhdGU6IFwiaGVscC1jaXJjbGVcIixcbiAgICAgICAgdGFnOiBcInRhZ1wiXG4gICAgfSxcbiAgICB0YXNrR3JvdXBDb2xvck92ZXJkdWU6IFwicmdiYSgyNTUsIDcxLCA3MSwgMC4xNSlcIixcbiAgICB0YXNrR3JvdXBDb2xvclRvZGF5OiBcInJnYmEoMjU1LCAxNjUsIDAsIDAuMTUpXCIsXG4gICAgdGFza0dyb3VwQ29sb3JUb21vcnJvdzogXCJyZ2JhKDY0LCAxNTgsIDI1NSwgMC4xNSlcIixcbiAgICB0YXNrR3JvdXBDb2xvck5leHQ3RGF5czogXCJyZ2JhKDc3LCAxNzEsIDE4NSwgMC4xNSlcIixcbiAgICB0YXNrR3JvdXBDb2xvckZ1dHVyZTogXCJyZ2JhKDEyOCwgMTI4LCAxMjgsIDAuMTUpXCIsXG4gICAgdGFza0dyb3VwQ29sb3JOb0RhdGU6IFwicmdiYSgxMDUsIDE4MCwgMTA1LCAwLjE1KVwiLFxuICAgIHRhc2tHcm91cENvbG9yVGFnOiBcInJnYmEoMTA1LCAxMDUsIDEwNSwgMC4xNSlcIixcbiAgICBzaG93UHJldmlld1RvZ2dsZTogdHJ1ZSxcbiAgICBzaG93QWRkVGFza0J1dHRvbjogdHJ1ZSxcbiAgICBjb2xsYXBzZWRUYXNrR3JvdXBzOiB7fSxcbiAgICBjb2xsYXBzZWRBc3NldEdyb3Vwczoge30sXG59O1xuXG4vLyBBIHN0cmluZyBjb250YWluaW5nIGFsbCB0aGUgQ1NTIGZvciB0aGUgcGx1Z2luLiBJdCdzIGluamVjdGVkIGludG8gdGhlIGRvY3VtZW50IGhlYWQgb24gbG9hZC5cbmNvbnN0IFBMVUdJTl9TVFlMRVMgPSBgXG5ib2R5LnRoZW1lLWxpZ2h0IHtcbiAgICAtLW1vbnRoLWNvbG9yLXRoZW1lZDogdmFyKC0tbW9udGgtY29sb3ItbGlnaHQpO1xuICAgIC0tdG9kYXktaGlnaGxpZ2h0LWNvbG9yLXRoZW1lZDogdmFyKC0tdG9kYXktaGlnaGxpZ2h0LWNvbG9yLWxpZ2h0KTtcbiAgICAtLWRhdGUtY2VsbC1ob3Zlci1jb2xvci10aGVtZWQ6IHZhcigtLWRhdGUtY2VsbC1ob3Zlci1jb2xvci1saWdodCk7XG4gICAgLS1wdy1jb2x1bW4tZm9udC1jb2xvci10aGVtZWQ6IHZhcigtLXB3LWNvbHVtbi1mb250LWNvbG9yLWxpZ2h0KTtcbiAgICAtLXdlZWstbnVtYmVyLWZvbnQtY29sb3ItdGhlbWVkOiB2YXIoLS13ZWVrLW51bWJlci1mb250LWNvbG9yLWxpZ2h0KTtcbiAgICAtLWRheS1oZWFkZXItZm9udC1jb2xvci10aGVtZWQ6IHZhcigtLWRheS1oZWFkZXItZm9udC1jb2xvci1saWdodCk7XG4gICAgLS1kYXktY2VsbC1mb250LWNvbG9yLXRoZW1lZDogdmFyKC0tZGF5LWNlbGwtZm9udC1jb2xvci1saWdodCk7XG4gICAgLS1vdGhlci1tb250aC1mb250LWNvbG9yLXRoZW1lZDogdmFyKC0tb3RoZXItbW9udGgtZm9udC1jb2xvci1saWdodCk7XG4gICAgLS13ZWVrZW5kLXNoYWRlLWNvbG9yLXRoZW1lZDogdmFyKC0td2Vla2VuZC1zaGFkZS1jb2xvci1saWdodCk7XG59XG5ib2R5LnRoZW1lLWRhcmsge1xuICAgIC0tbW9udGgtY29sb3ItdGhlbWVkOiB2YXIoLS1tb250aC1jb2xvci1kYXJrKTtcbiAgICAtLXRvZGF5LWhpZ2hsaWdodC1jb2xvci10aGVtZWQ6IHZhcigtLXRvZGF5LWhpZ2hsaWdodC1jb2xvci1kYXJrKTtcbiAgICAtLWRhdGUtY2VsbC1ob3Zlci1jb2xvci10aGVtZWQ6IHZhcigtLWRhdGUtY2VsbC1ob3Zlci1jb2xvci1kYXJrKTtcbiAgICAtLXB3LWNvbHVtbi1mb250LWNvbG9yLXRoZW1lZDogdmFyKC0tcHctY29sdW1uLWZvbnQtY29sb3ItZGFyayk7XG4gICAgLS13ZWVrLW51bWJlci1mb250LWNvbG9yLXRoZW1lZDogdmFyKC0td2Vlay1udW1iZXItZm9udC1jb2xvci1kYXJrKTtcbiAgICAtLWRheS1oZWFkZXItZm9udC1jb2xvci10aGVtZWQ6IHZhcigtLWRheS1oZWFkZXItZm9udC1jb2xvci1kYXJrKTtcbiAgICAtLWRheS1jZWxsLWZvbnQtY29sb3ItdGhlbWVkOiB2YXIoLS1kYXktY2VsbC1mb250LWNvbG9yLWRhcmspO1xuICAgIC0tb3RoZXItbW9udGgtZm9udC1jb2xvci10aGVtZWQ6IHZhcigtLW90aGVyLW1vbnRoLWZvbnQtY29sb3ItZGFyayk7XG4gICAgLS13ZWVrZW5kLXNoYWRlLWNvbG9yLXRoZW1lZDogdmFyKC0td2Vla2VuZC1zaGFkZS1jb2xvci1kYXJrKTtcbn1cblxuLyogRGF5IGhlYWRlciByb3cgZm9udCBjb2xvciAqL1xuLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0aGVhZCB0aCB7XG4gICAgY29sb3I6IHZhcigtLWRheS1oZWFkZXItZm9udC1jb2xvci10aGVtZWQpO1xufVxuXG4vKiBQZXJpb2QvV2VlayBjb2x1bW4gZm9udCBjb2xvciAqL1xuLnBlcmlvZC1jYWxlbmRhci10YWJsZSAucHctbGFiZWwtY2VsbCxcbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgLnB3LWxhYmVsLWNlbGwgLmRheS1udW1iZXIge1xuICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1wdy1jb2x1bW4tZm9udC13ZWlnaHQpO1xuICAgIGZvbnQtc2l6ZTogdmFyKC0taGVhZGVyLWZvbnQtc2l6ZSk7XG4gICAgY29sb3I6IHZhcigtLXB3LWNvbHVtbi1mb250LWNvbG9yLXRoZW1lZCk7XG59XG5cbi8qIEhpZ2hsaWdodCB0b2RheSdzIFAvVyBjb2x1bW4gd2l0aCB0b2RheSBjb2xvciAqL1xuLnBlcmlvZC1jYWxlbmRhci10YWJsZSAucHctbGFiZWwtY2VsbC50b2RheS1wdy1sYWJlbCAuZGF5LW51bWJlcixcbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgLndlZWstbnVtYmVyLWNlbGwudG9kYXktcHctbGFiZWwgLmRheS1udW1iZXIge1xuICAgIGNvbG9yOiB2YXIoLS10b2RheS1jaXJjbGUtY29sb3IpO1xuICAgIFxufVxuXG4vKiBEYXkgaGVhZGVyIHJvdyBmb250IGNvbG9yICovXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRoZWFkIHRoIHtcbiAgICBjb2xvcjogdmFyKC0tZGF5LWhlYWRlci1mb250LWNvbG9yLXRoZW1lZCk7XG59XG5cbi8qIEhpZ2hsaWdodCB0b2RheSdzIGRheSBjb2x1bW4gaGVhZGVyIHdpdGggdG9kYXkgY29sb3IgKi9cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGhlYWQgdGgudG9kYXktZGF5LWhlYWRlciB7XG4gICAgY29sb3I6IHZhcigtLXRvZGF5LWNpcmNsZS1jb2xvcik7XG4gICAgXG59XG5cbi8qIFdlZWsgbnVtYmVyIGNvbHVtbiBmb250IGNvbG9yICovXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIC53ZWVrLW51bWJlci1jZWxsLFxuLnBlcmlvZC1jYWxlbmRhci10YWJsZSAud2Vlay1udW1iZXItY2VsbCAuZGF5LW51bWJlciB7XG4gICAgZm9udC13ZWlnaHQ6IHZhcigtLXB3LWNvbHVtbi1mb250LXdlaWdodCk7XG4gICAgZm9udC1zaXplOiB2YXIoLS1oZWFkZXItZm9udC1zaXplKTtcbiAgICBjb2xvcjogdmFyKC0td2Vlay1udW1iZXItZm9udC1jb2xvci10aGVtZWQpO1xufVxuXG5cbi8qIC0tLSBNYWluIExheW91dCAtLS0gKi9cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgaGVpZ2h0OiAxMDAlO1xuICBwYWRkaW5nLXRvcDogNnB4O1xufVxuLm1vbnRoLWhlYWRlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgcGFkZGluZzogMC4xcmVtIDAuMjVyZW07XG4gIG1hcmdpbi1ib3R0b206IDAuNXJlbTsgLyogU3BlY2lmaWMgbWFyZ2luIGZvciBzcGFjaW5nICovXG59XG4ubW9udGgtaGVhZGVyLXRpdGxlIHtcbiAgZm9udC1zaXplOiB2YXIoLS1tYWluLW1vbnRoLXllYXItdGl0bGUtZm9udC1zaXplKTsgICBcbiAgZm9udC13ZWlnaHQ6IHZhcigtLW1haW4tbW9udGgteWVhci10aXRsZS13ZWlnaHQpOyBcbiAgY29sb3I6IHZhcigtLW1vbnRoLWNvbG9yLXRoZW1lZCk7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cbi5tb250aC1oZWFkZXItbmF2IHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZ2FwOiAwLjI1cmVtO1xufVxuLm1vbnRoLWhlYWRlci1uYXYgYnV0dG9uIHtcbiAgaGVpZ2h0OiB2YXIoLS1uYXYtYnV0dG9uLWhlaWdodCk7XG4gIG1pbi1oZWlnaHQ6IHZhcigtLW5hdi1idXR0b24taGVpZ2h0KTtcbiAgcGFkZGluZzogMDsgLyogUmVtb3ZlIGhvcml6b250YWwgcGFkZGluZyAqL1xuICB3aWR0aDogdmFyKC0tbmF2LWJ1dHRvbi1oZWlnaHQpOyAvKiBNYWtlIHRoZSBidXR0b24gc3F1YXJlICovXG4gIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4vKiBBY2NlbnQgY29sb3IgZm9yIHRoZSBsb2NrZWQgcG9wdXAgYnV0dG9uIG9uIGRlc2t0b3AgKi9cbi5tb250aC1oZWFkZXItbmF2IGJ1dHRvbi5wb3B1cC1sb2NrZWQgLnN2Zy1pY29uIHtcbiAgICBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbn1cblxuLyogU3BlY2lmaWMgb3ZlcnJpZGUgZm9yIG1vYmlsZSB0byBlbnN1cmUgYWNjZW50IGNvbG9yIGlzIGFwcGxpZWQgKi9cbmJvZHkuaXMtbW9iaWxlIC5tb250aC1oZWFkZXItbmF2IGJ1dHRvbi5wb3B1cC1sb2NrZWQgLnN2Zy1pY29uIHtcbiAgICBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbn1cblxuLyogLS0tIENoZXZyb24gQnV0dG9uIEFuaW1hdGlvbiAtLS0gKi9cbi5tb250aC1oZWFkZXItbmF2IGJ1dHRvblthcmlhLWxhYmVsPVwiVG9nZ2xlIGNhbGVuZGFyIHZpc2liaWxpdHlcIl0gLnN2Zy1pY29uIHtcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MgZWFzZS1pbi1vdXQ7XG59XG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5jYWxlbmRhci1jb2xsYXBzZWQgLm1vbnRoLWhlYWRlci1uYXYgYnV0dG9uW2FyaWEtbGFiZWw9XCJUb2dnbGUgY2FsZW5kYXIgdmlzaWJpbGl0eVwiXSAuc3ZnLWljb24ge1xuICB0cmFuc2Zvcm06IHJvdGF0ZSgxODBkZWcpO1xufVxuYm9keS5pcy1tb2JpbGUgLm1vbnRoLWhlYWRlci1uYXYgYnV0dG9uIC5zdmctaWNvbiB7XG4gIHdpZHRoOiAxOHB4O1xuICBoZWlnaHQ6IDE4cHg7XG4gIGNvbG9yOiB2YXIoLS1pY29uLWNvbG9yKTtcbiAgZmxleC1zaHJpbms6IDA7XG59XG4vKiAtLS0gQ2FsZW5kYXIgQ29sbGFwc2UgQW5pbWF0aW9uIC0tLSAqL1xuLmNhbGVuZGFyLXRhYmxlLXdyYXBwZXIge1xuICBmbGV4LXNocmluazogMDtcbiAgbWF4LWhlaWdodDogNTAwcHg7IFxuICB0cmFuc2l0aW9uOiBtYXgtaGVpZ2h0IDAuM3MgZWFzZS1pbi1vdXQsIG1hcmdpbi1ib3R0b20gMC4zcyBlYXNlLWluLW91dDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgbWFyZ2luLWJvdHRvbTogMC41cmVtO1xufVxuLnBlcmlvZC1tb250aC1jb250YWluZXIuY2FsZW5kYXItY29sbGFwc2VkIC5jYWxlbmRhci10YWJsZS13cmFwcGVyIHtcbiAgbWF4LWhlaWdodDogMDtcbiAgbWFyZ2luLWJvdHRvbTogMDtcbn1cblxuLyogLS0tIENhbGVuZGFyIFRhYmxlIC0tLSAqL1xuLnBlcmlvZC1jYWxlbmRhci10YWJsZSB7XG4gIHdpZHRoOiAxMDAlO1xuICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xuICB0YWJsZS1sYXlvdXQ6IGZpeGVkO1xufVxuLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0aCwgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0ZCB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbiAgcGFkZGluZzogMDtcbiAgZm9udC1zaXplOiB2YXIoLS1oZWFkZXItZm9udC1zaXplKTtcbn1cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGgge1xuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG59XG5cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGgge1xuICBmb250LXdlaWdodDogdmFyKC0taGVhZGVyLXJvdy1mb250LXdlaWdodCk7XG4gIGhlaWdodDogMi41ZW07XG59XG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRib2R5IHRkIHtcbiBjdXJzb3I6IHBvaW50ZXI7XG4gb3ZlcmZsb3c6IGhpZGRlbjsgXG4gcG9zaXRpb246IHJlbGF0aXZlO1xufVxuLnBlcmlvZC1tb250aC1jb250YWluZXI6bm90KC5oaWRlLWdyaWQpIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGQge1xuICAgIGJvcmRlcjogdmFyKC0tY2FsZW5kYXItZ3JpZC1nYXAtd2lkdGgpIHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbn1cblxuXG5cblxuXG5cblxuXG4vKiBcbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLmhpZGUtZ3JpZC50YWJzLWFyZS12aXNpYmxlOm5vdCgudmVydGljYWwtdmlldy1hY3RpdmUpIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bGFzdC1jaGlsZCB0ZCB7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG59XG4qL1xuXG4vKiAtLS0gUm91bmRlZCBSb3cgSGlnaGxpZ2h0IC0tLSAqL1xuLnBlcmlvZC1jYWxlbmRhci10YWJsZSAuY3VycmVudC13ZWVrLXJvdyB0ZDpmaXJzdC1jaGlsZCB7XG4gICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogNnB4O1xuICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDZweDtcbn1cblxuLnBlcmlvZC1jYWxlbmRhci10YWJsZSAuY3VycmVudC13ZWVrLXJvdyB0ZDpsYXN0LWNoaWxkIHtcbiAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNnB4O1xuICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA2cHg7XG59XG5cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdGQ6bm90KC5wdy1sYWJlbC1jZWxsKTpub3QoLndlZWstbnVtYmVyLWNlbGwpOmhvdmVyIC5kYXktY29udGVudCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWRhdGUtY2VsbC1ob3Zlci1jb2xvci10aGVtZWQpICFpbXBvcnRhbnQ7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjE1cyBlYXNlO1xufVxuXG4vKiBPdmVycmlkZSBldmVuIGlubGluZSBzdHlsZXMgd2l0aCAhaW1wb3J0YW50IG9uIGhvdmVyICovXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRib2R5IHRkOm5vdCgucHctbGFiZWwtY2VsbCk6bm90KC53ZWVrLW51bWJlci1jZWxsKTpob3ZlciAuZGF5LWNvbnRlbnRbc3R5bGVdIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1kYXRlLWNlbGwtaG92ZXItY29sb3ItdGhlbWVkKSAhaW1wb3J0YW50O1xufVxuXG5ib2R5IC5wZXJpb2QtbW9udGgtY29udGFpbmVyLnRvZGF5LXN0eWxlLWNlbGwgLnRvZGF5LWNlbGwgLmRheS1jb250ZW50IHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdG9kYXktaGlnaGxpZ2h0LWNvbG9yLXRoZW1lZCk7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbn1cblxuYm9keSAucGVyaW9kLW1vbnRoLWNvbnRhaW5lci50b2RheS1zdHlsZS1jZWxsIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHIuY3VycmVudC13ZWVrLXJvdyB0ZC50b2RheS1jZWxsIC5kYXktY29udGVudCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdG9kYXktaGlnaGxpZ2h0LWNvbG9yLXRoZW1lZCkgIWltcG9ydGFudDtcbn1cblxuLnBlcmlvZC1tb250aC1jb250YWluZXIudG9kYXktc3R5bGUtY2lyY2xlIC50b2RheS1jZWxsIHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7IFxufVxuLnBlcmlvZC1tb250aC1jb250YWluZXIudG9kYXktc3R5bGUtY2lyY2xlIC50b2RheS1jZWxsIC5kYXktbnVtYmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10b2RheS1jaXJjbGUtY29sb3IpO1xuICAgIC8qY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTsgTWFrZSB0ZXh0IGhpZ2gtY29udHJhc3QgKi9cbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgei1pbmRleDogMjtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7IC8qIE1ha2UgaXQgYSBjaXJjbGUgKi9cbiAgICB3aWR0aDogMS41ZW07ICAgICAgIC8qIHdhcyAxLjcgU2xpZ2h0bHkgaW5jcmVhc2Ugc2l6ZSBmb3IgYmV0dGVyIHBhZGRpbmcgKi9cbiAgICBoZWlnaHQ6IDEuNWVtOyAgICAgIC8qIHdhcyAxLjcgKi8gXG4gICAgZGlzcGxheTogZmxleDsgICAgICAvKiBVc2UgZmxleGJveCBmb3IgY2VudGVyaW5nIHRleHQgKi9cbiAgICBhbGlnbi1pdGVtczogY2VudGVyOyAvKiBDZW50ZXIgdGV4dCB2ZXJ0aWNhbGx5ICovXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IC8qIENlbnRlciB0ZXh0IGhvcml6b250YWxseSAqL1xuICAgIC8qICdtYXJnaW46IGF1dG8nIGlzIHJlbW92ZWQgdG8gYWxsb3cgdGhlIHBhcmVudCBncmlkIHRvIGhhbmRsZSBjZW50ZXJpbmcgKi9cbn1cblxuLnBlcmlvZC1tb250aC1jb250YWluZXIudG9kYXktc3R5bGUtbnVtYmVyIC50b2RheS1jZWxsIC5kYXktbnVtYmVyIHtcbiAgICAvKmNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7Ki9cbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10b2RheS1jaXJjbGUtY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IDZweDsgLyogQSBzbGlnaHRseSBzbWFsbGVyIGNvcm5lciByYWRpdXMgKi9cbiAgICBwYWRkaW5nOiAxcHggM3B4OyAvKiBNaW5pbWFsIHBhZGRpbmcgZm9yIGEgdGlnaHQgZml0ICovXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB6LWluZGV4OiAyOyAvKiBFbnN1cmVzIGl0J3MgZHJhd24gb24gdG9wIG9mIHRoZSBoZWF0bWFwICovXG59XG5cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgLnB3LWxhYmVsLWNlbGwsXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIC53ZWVrLW51bWJlci1jZWxsIHtcbiAgZm9udC13ZWlnaHQ6IHZhcigtLXB3LWNvbHVtbi1mb250LXdlaWdodCk7XG4gIGZvbnQtc2l6ZTogdmFyKC0taGVhZGVyLWZvbnQtc2l6ZSk7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cblxuLyogLS0tIFBlcmlvZC9XZWVrIENvbHVtbiBTZXBhcmF0b3IgTGluZSAtLS0gKi9cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdGQuZmlyc3QtZGF0ZS1jb2x1bW46OmJlZm9yZSB7XG4gICAgY29udGVudDogJyc7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IDA7XG4gICAgdG9wOiAwO1xuICAgIGJvdHRvbTogMDtcbiAgICB3aWR0aDogMXB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXB3LXNlcGFyYXRvci1jb2xvcik7XG4gICAgei1pbmRleDogMTtcbn1cblxuLndlZWstZG90cy1jb250YWluZXIge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBsZWZ0OiAwO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi8qIC0tLSBDYWxlbmRhciBEb3RzIENvbG9yIFZhcmlhYmxlcyAtLS0gKi9cbi5jYWxlbmRhci1kb3Qge1xuICAgIHdpZHRoOiB2YXIoLS1jYWxlbmRhci1kb3Qtc2l6ZSk7XG4gICAgaGVpZ2h0OiB2YXIoLS1jYWxlbmRhci1kb3Qtc2l6ZSk7XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xufVxuXG4uaWNzLWV2ZW50LWRvdCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY2FsZW5kYXItZXZlbnQtZG90LWNvbG9yKTtcbn1cblxuLyogLS0tIENhbGVuZGFyIExheW91dCBTdHlsZXMgLS0tICovXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5sYXlvdXQtc3BhY2lvdXMgLmRheS1jb250ZW50IHtcbiAgICBoZWlnaHQ6IDMuOGVtO1xufVxuLnBlcmlvZC1tb250aC1jb250YWluZXIubGF5b3V0LW5vcm1hbCAuZGF5LWNvbnRlbnQge1xuICAgIGhlaWdodDogMy4wZW07XG59XG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5sYXlvdXQtY29uZGVuc2VkIC5kYXktY29udGVudCB7XG4gICAgaGVpZ2h0OiAyLjhlbTsgLyogRXZlbiBzbWFsbGVyIGhlaWdodCAqL1xuICAgIFxufVxuXG5cbi8qIExheW91dC1zcGVjaWZpYyBydWxlcyBmb3IgYm90aCBkb3QgY29udGFpbmVycyAqL1xuLnBlcmlvZC1tb250aC1jb250YWluZXIubGF5b3V0LXNwYWNpb3VzIC5kb3RzLWNvbnRhaW5lcixcbi5wZXJpb2QtbW9udC1jb250YWluZXIubGF5b3V0LW5vcm1hbCAud2Vlay1kb3RzLWNvbnRhaW5lciB7XG4gICAgYm90dG9tOiA4cHg7XG59XG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5sYXlvdXQtbm9ybWFsIC5kb3RzLWNvbnRhaW5lcixcbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLmxheW91dC1ub3JtYWwgLndlZWstZG90cy1jb250YWluZXIge1xuICAgIGJvdHRvbTogNHB4O1xufVxuLnBlcmlvZC1tb250aC1jb250YWluZXIubGF5b3V0LWNvbmRlbnNlZCAuZG90cy1jb250YWluZXIsXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5sYXlvdXQtY29uZGVuc2VkIC53ZWVrLWRvdHMtY29udGFpbmVyIHtcbiAgICBib3R0b206IDJweDsgLyogTW92ZXMgZG90cyBjbG9zZXIgdG8gdGhlIGJvdHRvbSBlZGdlICovXG59XG5cblxuLyogVGhlIHdlZWtseSBkb3Qgbm93IGp1c3Qgc2V0cyB0aGUgY29sb3IgYW5kIHJlLXVzZXMgLmNhbGVuZGFyLWRvdCBmb3IgaXRzIHNpemUgKi9cbi53ZWVrbHktbm90ZS1kb3Qge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXdlZWtseS1ub3RlLWRvdC1jb2xvcik7XG59XG5cbi8qIC0tLSBDYWxlbmRhciBEYXkgQ29udGVudCAmIERvdHMgKFJFRkFDVE9SRUQpIC0tLSAqL1xuLmRheS1jb250ZW50IHtcbiAgICBkaXNwbGF5OiBncmlkOyBcbiAgICBncmlkLXRlbXBsYXRlLXJvd3M6IGF1dG8gMWZyIG1pbm1heCgxMHB4LCBhdXRvKTsgLyogMyByb3dzOiBiYWRnZShhdXRvKSwgbnVtYmVyKGZpbGxzIHNwYWNlKSwgZG90cyhhdXRvKSAqL1xuICAgIGdyaWQtdGVtcGxhdGUtYXJlYXM6ICAvKiBOYW1lIHRoZSBncmlkIGFyZWFzIGZvciBjbGFyaXR5ICovXG4gICAgICAgIFwiYmFkZ2VcIlxuICAgICAgICBcIm51bWJlclwiXG4gICAgICAgIFwiZG90c1wiO1xuICAgIGhlaWdodDogMy41ZW07XG4gICAgcG9zaXRpb246IHJlbGF0aXZlOyAvKiBLZWVwIGZvciBwb3B1cHMgKi9cbiAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZS1pbi1vdXQ7XG59XG5cbi5kYXktbnVtYmVyIHtcbiAgICBncmlkLWFyZWE6IG51bWJlcjsgLyogUGxhY2UgaW4gdGhlICdudW1iZXInIGFyZWEgKi9cbiAgICBhbGlnbi1zZWxmOiBjZW50ZXI7ICAvKiBDZW50ZXIgdmVydGljYWxseSBpbiBpdHMgcm93ICovXG4gICAganVzdGlmeS1zZWxmOiBjZW50ZXI7IC8qIENlbnRlciBob3Jpem9udGFsbHkgKi9cbiAgICBmb250LXNpemU6IHZhcigtLWRheS1udW1iZXItZm9udC1zaXplKTtcbiAgICBjb2xvcjogdmFyKC0tZGF5LWNlbGwtZm9udC1jb2xvci10aGVtZWQpO1xufVxuXG4uZGF5LW51bWJlci1vdGhlci1tb250aCB7XG4gICAgY29sb3I6IHZhcigtLW90aGVyLW1vbnRoLWZvbnQtY29sb3ItdGhlbWVkKSAhaW1wb3J0YW50O1xufVxuXG5cbi5kb3RzLWNvbnRhaW5lciB7XG4gICAgZ3JpZC1hcmVhOiBkb3RzOyAvKiBQbGFjZSBpbiB0aGUgJ2RvdHMnIGFyZWEgKi9cbiAgICBhbGlnbi1zZWxmOiBlbmQ7IC8qIEFsaWduIHRvIHRoZSBib3R0b20gb2YgaXRzIHJvdyAqL1xuICAgIFxuICAgIC8qIFNpbXBsaWZpZWQgc3R5bGVzLCBhcyBhYnNvbHV0ZSBwb3NpdGlvbmluZyBpcyBubyBsb25nZXIgbmVlZGVkICovXG4gICAgZGlzcGxheTogZmxleDtcbiAgICBnYXA6IDNweDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICB3aWR0aDogMTAwJTtcbn1cblxuLyogLS0tIENhbGVuZGFyIExheW91dCBTdHlsZXMgLS0tICovXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5sYXlvdXQtc3BhY2lvdXMgLmRvdHMtY29udGFpbmVyICB7XG4gICAgcGFkZGluZy1ib3R0b206IDEwcHg7IC8qIENyZWF0ZXMgc3BhY2UgZnJvbSB0aGUgYm90dG9tIGVkZ2UgKi9cbn1cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLmxheW91dC1zcGFjaW91cyAuZG90cy1jb250YWluZXI6ZW1wdHkge1xuICAgIHBhZGRpbmctdG9wOiB2YXIoLS1jYWxlbmRhci1kb3Qtc2l6ZSk7XG59XG5cblxuLnBlcmlvZC1tb250aC1jb250YWluZXIubGF5b3V0LW5vcm1hbCAuZG90cy1jb250YWluZXIgIHtcbiAgICBwYWRkaW5nLWJvdHRvbTogNnB4OyAvKiBDcmVhdGVzIHNwYWNlIGZyb20gdGhlIGJvdHRvbSBlZGdlICovXG59XG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5sYXlvdXQtY29uZGVuc2VkIC5kb3RzLWNvbnRhaW5lciAge1xuICAgIHBhZGRpbmctYm90dG9tOiA0cHg7IC8qIENyZWF0ZXMgc3BhY2UgZnJvbSB0aGUgYm90dG9tIGVkZ2UgKi9cbn1cblxuLnRhc2stY291bnQtYmFkZ2Uge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDJweDtcbiAgICByaWdodDogM3B4O1xuICAgIHotaW5kZXg6IDM7XG4gICAgd2lkdGg6IDEuNmVtO1xuICAgIGhlaWdodDogMS42ZW07XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRhc2stYmFkZ2UtY29sb3IpO1xuICAgIGNvbG9yOiB2YXIoLS10YXNrLWJhZGdlLWZvbnQtY29sb3IpO1xuICAgIGZvbnQtc2l6ZTogdmFyKC0tdGFzay1iYWRnZS1mb250LXNpemUpO1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBsaW5lLWhlaWdodDogMTsgLyogUHJldmVudHMgdGV4dCBmcm9tIHNoaWZ0aW5nIHZlcnRpY2FsbHkgKi9cbn1cblxuXG4uY2FsZW5kYXItZG90IHtcbiAgd2lkdGg6IHZhcigtLWNhbGVuZGFyLWRvdC1zaXplKTtcbiAgaGVpZ2h0OiB2YXIoLS1jYWxlbmRhci1kb3Qtc2l6ZSk7XG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcbn1cbi5vdGhlci1ub3RlLWRvdCB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLW90aGVyLW5vdGUtZG90LWNvbG9yKTsgfVxuLm1vZGlmaWVkLWZpbGUtZG90IHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY2FsZW5kYXItbW9kaWZpZWQtZG90LWNvbG9yKTsgfVxuLmFzc2V0LWRvdCB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWFzc2V0LWRvdC1jb2xvcik7IH1cbi50YXNrLWRvdCB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRhc2stZG90LWNvbG9yKTsgfSBcbi5wZXJpb2QtbW9udGgtZGFpbHktbm90ZS1kb3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1kYWlseS1ub3RlLWRvdC1jb2xvciwgdmFyKC0tdGV4dC1hY2NlbnQpKTsgfVxuLnBlcmlvZC1tb250aC1kYWlseS1ub3RlLWRvdC1vdGhlci1tb250aCB7IG9wYWNpdHk6IDAuNDsgfVxuXG4vKiAtLS0gVGFicyAmIFNlYXJjaCBIZWFkZXIgLS0tICovXG4udGFicy1jb250ZW50LXdyYXBwZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBmbGV4OiAxIDEgYXV0bztcbiAgbWluLWhlaWdodDogMDtcbn1cbi5ub3RlLXRhYi1oZWFkZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LXNocmluazogMDtcbiAgd2lkdGg6IDEwMCU7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgbWFyZ2luLWJvdHRvbTogNnB4O1xufVxuLnRhYi1jb250YWluZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuLm5vdGUtdGFiIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBmbGV4OiAwIDEgYXV0bztcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBwYWRkaW5nOiAwLjVyZW0gMXJlbTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBib3JkZXItYm90dG9tOiAycHggc29saWQgdHJhbnNwYXJlbnQ7XG4gIGZvbnQtc2l6ZTogdmFyKC0tdGFiLXRpdGxlLWZvbnQtc2l6ZSk7XG4gIGZvbnQtd2VpZ2h0OiB2YXIoLS10YWItdGl0bGUtYm9sZCk7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG59XG4ubm90ZS10YWI6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTsgfVxuLm5vdGUtdGFiLmFjdGl2ZSB7XG4gIGJvcmRlci1ib3R0b20tY29sb3I6IHZhcigtLXNlbGVjdGVkLXRhYi1jb2xvcik7XG59XG4ubm90ZS10YWIuZHJhZ2dpbmcge1xuICBvcGFjaXR5OiAwLjU7XG4gIGN1cnNvcjogZ3JhYmJpbmc7XG59XG4ubm90ZS10YWIuZHJhZy1vdmVyLWluZGljYXRvci1iZWZvcmU6OmJlZm9yZSxcbi5ub3RlLXRhYi5kcmFnLW92ZXItaW5kaWNhdG9yLWFmdGVyOjphZnRlciB7XG4gIGNvbnRlbnQ6ICcnO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMTAlO1xuICBib3R0b206IDEwJTtcbiAgd2lkdGg6IDJweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2VsZWN0ZWQtdGFiLWNvbG9yKTtcbn1cbi5ub3RlLXRhYi5kcmFnLW92ZXItaW5kaWNhdG9yLWJlZm9yZTo6YmVmb3JlIHsgbGVmdDogMDsgfVxuLm5vdGUtdGFiLmRyYWctb3Zlci1pbmRpY2F0b3ItYWZ0ZXI6OmFmdGVyIHsgcmlnaHQ6IDA7IH1cbi5zZWFyY2gtd3JhcHBlciB7XG4gIGZsZXgtZ3JvdzogMTtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgcGFkZGluZy1yaWdodDogOHB4O1xufVxuXG4vKiAtLS0gVW5pZmllZCBTZWFyY2ggSW5wdXQgLS0tICovXG4ucG0tc2VhcmNoLWNvbnRhaW5lciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB3aWR0aDogMTAwJTtcbn1cbi5wbS1zZWFyY2gtaW5wdXQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLXMpO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgcGFkZGluZzogNHB4IDI4cHggNHB4IDhweDtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIGxpbmUtaGVpZ2h0OiB2YXIoLS1saW5lLWhlaWdodC1ub3JtYWwpO1xufVxuLnBtLXNlYXJjaC1pbnB1dDpmb2N1cyB7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xufVxuXG4vKiAtLS0gU2NyYXRjaHBhZCBDb250ZW50ICYgQnV0dG9ucyAtLS0gKi9cbi5zY3JhdGNocGFkLXdyYXBwZXIge1xuICBmbGV4OiAxIDEgYXV0bztcbiAgZGlzcGxheTogZ3JpZDtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuLnNjcmF0Y2gtY29udGVudDpmb2N1cyB7XG4gICAgYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7XG4gICAgb3V0bGluZTogbm9uZSAhaW1wb3J0YW50O1xuICAgIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDtcbn1cbi8qIFRoaXMgaXMgdGhlIHZpc3VhbCBjdXRvdXQgKi9cbi5zY3JhdGNocGFkLXdyYXBwZXI6OmJlZm9yZSB7XG4gIGNvbnRlbnQ6ICcnO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgcmlnaHQ6IDA7XG4gIHdpZHRoOiA1NnB4O1xuICBoZWlnaHQ6IDY0cHg7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgei1pbmRleDogMztcbiAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogdmFyKC0tcmFkaXVzLW0pO1xufVxuLnNjcmF0Y2hwYWQtd3JhcHBlci5tYXJrZG93bi1wcmV2aWV3LXZpZXcge1xuICBhbGlnbi1jb250ZW50OiBzdGFydDsgXG59XG4uc2NyYXRjaHBhZC13cmFwcGVyLm1hcmtkb3duLXByZXZpZXctdmlldyBwIHtcbiAgbWFyZ2luLWJsb2NrLXN0YXJ0OiAwICFpbXBvcnRhbnQ7XG4gIG1hcmdpbi1ibG9jay1lbmQ6IDAuNWVtICFpbXBvcnRhbnQ7IFxufVxuLnNjcmF0Y2hwYWQtYWN0aW9ucy1jb250YWluZXIge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogOHB4O1xuICByaWdodDogOHB4O1xuICB6LWluZGV4OiAxMDtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgZ2FwOiA2cHg7XG59XG4uc2NyYXRjaHBhZC1hY3Rpb24tYnRuIHtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtcyk7XG4gIHBhZGRpbmc6IDRweDtcbiAgbGluZS1oZWlnaHQ6IDE7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuLnNjcmF0Y2hwYWQtYWN0aW9uLWJ0biAuc3ZnLWljb24ge1xuICAgIHdpZHRoOiAxNnB4O1xuICAgIGhlaWdodDogMTZweDtcbn1cbi5zY3JhdGNocGFkLWFjdGlvbi1idG46aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG59XG5cbi8qIC0tLSBTY3JhdGNocGFkIFRleHRhcmVhICYgSGlnaGxpZ2h0ZXIgLS0tICovXG4uc2NyYXRjaC1iYXNlIHtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwLjc1cmVtIDMuNXJlbSAwLjVyZW0gMC41cmVtO1xuICBib3JkZXI6IG5vbmU7XG4gIGZvbnQtZmFtaWx5OiB2YXIoLS1zY3JhdGNoLWZvbnQtZmFtaWx5KTtcbiAgZm9udC1zaXplOiB2YXIoLS1zY3JhdGNoLWZvbnQtc2l6ZSk7XG4gIGZvbnQtd2VpZ2h0OiB2YXIoLS1zY3JhdGNoLWJvbGQpO1xuICBsaW5lLWhlaWdodDogMS41O1xuICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIGdyaWQtYXJlYTogMSAvIDE7XG4gIG92ZXJmbG93OiBhdXRvO1xufVxuLnNjcmF0Y2gtaGlnaGxpZ2h0ZXIge1xuICB6LWluZGV4OiAxO1xuICBjb2xvcjogdHJhbnNwYXJlbnQ7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xufVxuLnNjcmF0Y2gtaGlnaGxpZ2h0ZXIgbWFyayB7XG4gIGNvbG9yOiB0cmFuc3BhcmVudDtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2NyYXRjaHBhZC1oaWdobGlnaHQtY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiAzcHg7XG59XG4uc2NyYXRjaC1jb250ZW50IHtcbiAgei1pbmRleDogMjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIHJlc2l6ZTogbm9uZTtcbn1cbi5zY3JhdGNoLWNvbnRlbnQ6aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50O1xufVxuLnNjcmF0Y2gtY29udGVudDo6c2VsZWN0aW9uIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2NyYXRjaHBhZC1oaWdobGlnaHQtY29sb3IpICFpbXBvcnRhbnQ7XG59XG5cbi8qIC0tLSBOb3RlcyAmIFRhc2tzIExpc3QgU3R5bGVzIC0tLSAqL1xuLm5vdGVzLWNvbnRhaW5lciwgLnRhc2tzLWNvbnRhaW5lciB7XG4gIG92ZXJmbG93LXk6IGF1dG87XG4gIGZsZXg6IDEgMSBhdXRvO1xuICBtaW4taGVpZ2h0OiAwO1xuICBwYWRkaW5nOiA0cHggNHB4IDQ4cHg7XG59XG4ubm90ZS1yb3csIC50YXNrLXJvdyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDhweDtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIG91dGxpbmU6IG5vbmU7XG4gIHdpZHRoOiAxMDAlO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG59XG4ubm90ZS1yb3cge1xuICBnYXA6IDFlbTtcbn1cbi50YXNrLXJvdyB7XG4gIGdhcDogMC41ZW07XG59XG4udGFzay1yb3cgLnRhc2stdGV4dCA+IHAge1xuICAgIG1hcmdpbjogMDtcbiAgICBwYWRkaW5nOiAwO1xufVxuLm5vdGUtcm93OmhvdmVyLCAudGFzay1yb3c6aG92ZXIsIC5ub3RlLXJvdzpmb2N1cywgLnRhc2stcm93OmZvY3VzIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbm90ZXMtaG92ZXItY29sb3IpO1xufVxuLm5vdGUtc3RhdHVzLWRvdCB7IFxuICB3aWR0aDogOHB4OyBcbiAgaGVpZ2h0OiA4cHg7IFxuICBib3JkZXItcmFkaXVzOiA1MCU7IFxuICBmbGV4LXNocmluazogMDsgXG59XG4ubm90ZS1zdGF0dXMtZG90LWNyZWF0ZWQgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1ub3RlLWNyZWF0ZWQtY29sb3IpOyB9XG4ubm90ZS1zdGF0dXMtZG90LW1vZGlmaWVkIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbm90ZS1tb2RpZmllZC1jb2xvcik7IH1cbi5ub3RlLXJvdyAubm90ZS10aXRsZS13cmFwcGVyIHsgXG4gIGRpc3BsYXk6IGZsZXg7IFxuICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgZ2FwOiA2cHg7IFxuICBmbGV4OiAxOyBcbiAgbWluLXdpZHRoOiAwOyBcbn1cbi5ub3RlLXJvdyAubm90ZS10aXRsZSB7IFxuICB3aGl0ZS1zcGFjZTogbm93cmFwOyBcbiAgb3ZlcmZsb3c6IGhpZGRlbjsgXG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyBcbiAgZm9udC1zaXplOiB2YXIoLS1ub3Rlcy1mb250LXNpemUpOyBcbiAgZm9udC13ZWlnaHQ6IHZhcigtLW5vdGVzLWJvbGQpOyBcbn1cbi5ub3RlLXJvdyAubm90ZS1tZXRhLWNvbnRhaW5lciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGdhcDogMWVtO1xuICBmbGV4LXNocmluazogMDtcbiAgbWFyZ2luLWxlZnQ6IDFlbTtcbn1cbi5ub3RlLXJvdyAubm90ZS1maWxlLXNpemUge1xuICBmb250LXNpemU6IDAuOGVtO1xuICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gIHdpZHRoOiA2NXB4O1xuICB0ZXh0LWFsaWduOiByaWdodDtcbn1cbi5ub3RlLXJvdyAubm90ZS1tb2QtZGF0ZSB7IFxuICB3aGl0ZS1zcGFjZTogbm93cmFwOyBcbiAgZm9udC1zaXplOiAwLjhlbTsgXG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgd2lkdGg6IDg1cHg7XG4gIHRleHQtYWxpZ246IHJpZ2h0IFxufVxuXG4vKiAtLS0gVGFza3MgU3BlY2lmaWMgU3R5bGVzIC0tLSAqL1xuLnRhc2stZ3JvdXAtY29udGFpbmVyIHtcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgcGFkZGluZzogOHB4O1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG59XG5cbi8qIC0tLSBUYXNrIEdyb3VwIENvbGxhcHNlIFN0eWxlcyAtLS0gKi9cbi50YXNrLWdyb3VwLWhlYWRlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgZm9udC1zaXplOiB2YXIoLS10YXNrLWhlYWRpbmctZm9udC1zaXplKTtcbn1cbi50YXNrLWdyb3VwLWhlYWRlci1jb250ZW50IHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZ2FwOiA2cHg7XG59XG4udGFzay1ncm91cC1jb2xsYXBzZS1pY29uIC5zdmctaWNvbiB7XG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzIGVhc2UtaW4tb3V0O1xufVxuLnRhc2stZ3JvdXAtY29udGFpbmVyLmlzLWNvbGxhcHNlZCAudGFzay1ncm91cC1jb2xsYXBzZS1pY29uIC5zdmctaWNvbiB7XG4gIHRyYW5zZm9ybTogcm90YXRlKC0xODBkZWcpO1xufVxuLnRhc2stbGlzdC13cmFwcGVyIHtcbiAgdHJhbnNpdGlvbjogaGVpZ2h0IDAuMzVzIGVhc2UtaW4tb3V0LCBvcGFjaXR5IDAuMzVzIGVhc2UtaW4tb3V0O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICBvcGFjaXR5OiAxO1xuICBoZWlnaHQ6IHZhcigtLXRhc2stbGlzdC1oZWlnaHQsIGF1dG8pO1xufVxuXG4udGFzay1ncm91cC1jb250YWluZXIuaXMtY29sbGFwc2VkIC50YXNrLWxpc3Qtd3JhcHBlciB7XG4gIGhlaWdodDogMDtcbiAgb3BhY2l0eTogMDtcbn1cblxuXG4udGFzay1ncm91cC1lbXB0eS1tZXNzYWdlIHtcbiAgZm9udC1zdHlsZTogaXRhbGljO1xuICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gIHBhZGRpbmc6IDRweCAwO1xuICBmb250LXNpemU6IDAuOWVtO1xufVxuLnRhc2stcm93IC50YXNrLXRleHQge1xuICBmbGV4LWdyb3c6IDE7XG4gIGZvbnQtc2l6ZTogdmFyKC0tdGFzay10ZXh0LWZvbnQtc2l6ZSk7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xufVxuLnRhc2stcm93IC50YXNrLXRleHQuY29tcGxldGVkIHtcbiAgdGV4dC1kZWNvcmF0aW9uOiBsaW5lLXRocm91Z2g7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbn1cbi50YXNrcy1jb250YWluZXIuc2hvdy1mdWxsLXRleHQgLnRhc2stcm93IHtcbiAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XG59XG4udGFza3MtY29udGFpbmVyLnNob3ctZnVsbC10ZXh0IC50YXNrLXRleHQge1xuICB3aGl0ZS1zcGFjZTogbm9ybWFsO1xuICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xufVxuLnRhc2tzLWNvbnRhaW5lci5zaG93LWZ1bGwtdGV4dCAudGFzay1yb3cgLnRhc2stY2hlY2tib3gge1xuICBtYXJnaW4tdG9wOiAycHg7XG59XG5cbi8qIC0tLSBQb3B1cHMgJiBUb29sdGlwcyAtLS0gKi9cbi8qIENvbW1vbiBiYXNlIHN0eWxlcyBmb3IgcG9wdXBzICovXG4ub3RoZXItbm90ZXMtcG9wdXAsIC5jdXN0b20tc3VnZ2VzdGlvbi1jb250YWluZXIge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB6LWluZGV4OiAxMDA7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICM0YTRhNGE7XG4gICAgYm9yZGVyLXJhZGl1czogMTVweDtcbiAgICBib3gtc2hhZG93OiAwIDRweCAxMnB4IHJnYmEoMCwwLDAsMC4yKTtcbiAgICBtYXgtd2lkdGg6IDY1MHB4O1xufVxuXG4vKiBNYWluIHBvcHVwIHNwZWNpZmljIHN0eWxlcyAqL1xuLm90aGVyLW5vdGVzLXBvcHVwIHtcbiAgICBwYWRkaW5nOiAwO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBvdmVyZmxvdzogaGlkZGVuOyAvKiBIaWRlIG92ZXJmbG93IG9uIHRoZSBtYWluIGNvbnRhaW5lciAqL1xuICAgIG1heC1oZWlnaHQ6IDI1MHB4OyAvKiBJbmNyZWFzZWQgc2xpZ2h0bHkgZm9yIG1vYmlsZSBoZWFkZXIgKi9cbn1cblxuLyogUG9wdXAgaGVhZGVyICovXG4ucG9wdXAtaGVhZGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgZmxleC1zaHJpbms6IDA7IC8qIFByZXZlbnQgaGVhZGVyIGZyb20gc2hyaW5raW5nICovXG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGdhcDogMTBweDtcbn1cbi5wb3B1cC1oZWFkZXItdGl0bGUge1xuICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIGZsZXgtZ3JvdzogMTsgLyogQWxsb3cgdGl0bGUgdG8gdGFrZSBhdmFpbGFibGUgc3BhY2UgKi9cbiAgICBmbGV4LXNocmluazogMTsgLyogQWxsb3cgdGl0bGUgdG8gc2hyaW5rIGlmIG5lZWRlZCAqL1xuICAgIG1pbi13aWR0aDogMDsgLyogSW1wb3J0YW50IGZvciB0ZXh0LW92ZXJmbG93IHRvIHdvcmsgd2l0aCBmbGV4IGl0ZW1zICovXG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsgLyogUHJldmVudCB0aXRsZSBmcm9tIHdyYXBwaW5nICovXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjsgLyogSGlkZSBvdmVyZmxvdyAqL1xuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyAvKiBBZGQgZWxsaXBzaXMgZm9yIGxvbmcgdGl0bGVzICovXG4gICAgZm9udC1zaXplOiAtLXZhcigtLW90aGVyLW5vdGUtcG9wdXAtZm9udC1zaXplKTtcbn1cblxuLnBvcHVwLWNsb3NlLWJ0biB7XG4gICAgZmxleC1zaHJpbms6IDA7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIHdpZHRoOiAxNnB4O1xuICAgIGhlaWdodDogMTZweDtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgLyogRGVmYXVsdCBmb3IgREFSSyB0aGVtZTogTGlnaHQgZ3JleSBjaXJjbGUgKi9cbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjOWM5YjliOyBcbiAgICAvKiBEZWZhdWx0IGZvciBEQVJLIHRoZW1lOiBEYXJrICd4JyBpY29uICovXG4gICAgY29sb3I6ICMzODM4Mzg7IFxuICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4xcyBlYXNlLWluLW91dCwgY29sb3IgMC4xcyBlYXNlLWluLW91dDtcbn1cblxuLnBvcHVwLWNsb3NlLWJ0bjpob3ZlciB7XG4gICAgLyogSG92ZXIgZm9yIERBUksgdGhlbWU6IEV2ZW4gbGlnaHRlciBjaXJjbGUgKi9cbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1O1xufVxuXG4vKiAtLS0gTGlnaHQgVGhlbWUgT3ZlcnJpZGVzIC0tLSAqL1xuYm9keS50aGVtZS1saWdodCAucG9wdXAtY2xvc2UtYnRuIHtcbiAgICAvKiBEZWZhdWx0IGZvciBMSUdIVCB0aGVtZTogRGFyayBncmV5IGNpcmNsZSAqL1xuICAgIGJhY2tncm91bmQtY29sb3I6ICM1YzVjNWM7XG4gICAgLyogRGVmYXVsdCBmb3IgTElHSFQgdGhlbWU6IFdoaXRlICd4JyBpY29uICovXG4gICAgY29sb3I6ICNmZmZmZmY7XG59XG5cbmJvZHkudGhlbWUtbGlnaHQgLnBvcHVwLWNsb3NlLWJ0bjpob3ZlciB7XG4gICAgLyogSG92ZXIgZm9yIExJR0hUIHRoZW1lOiBFdmVuIGRhcmtlciBjaXJjbGUgKi9cbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzgzODM4O1xufVxuXG4ucG9wdXAtY2xvc2UtYnRuIC5zdmctaWNvbiB7XG4gICAgd2lkdGg6IDE0cHg7XG4gICAgaGVpZ2h0OiAxNHB4O1xufVxuXG5cbi8qIENvbnRlbnQgd3JhcHBlciBmb3Igc2Nyb2xsaW5nIGFuZCBwYWRkaW5nICovXG4ucG9wdXAtY29udGVudC13cmFwcGVyIHtcbiAgICBwYWRkaW5nOiA4cHg7XG4gICAgb3ZlcmZsb3cteTogYXV0bztcbn1cblxuLyogU3VnZ2VzdGlvbiBjb250YWluZXIgc3BlY2lmaWMgc3R5bGVzICovXG4uY3VzdG9tLXN1Z2dlc3Rpb24tY29udGFpbmVyIHtcbiAgICB6LWluZGV4OiA5OTk7XG4gICAgbWFyZ2luLXRvcDogNHB4O1xuICAgIHBhZGRpbmc6IDhweDtcbiAgICBtYXgtaGVpZ2h0OiAyMDBweDtcbiAgICBvdmVyZmxvdy15OiBhdXRvO1xufVxuXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbSB7XG4gIGRpc3BsYXk6IGZsZXg7IFxuICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsgXG4gIGdhcDogOHB4OyBcbiAgcGFkZGluZzogOHB4OyBcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICBjdXJzb3I6IHBvaW50ZXI7IFxuICB3aGl0ZS1zcGFjZTogbm9ybWFsO1xuICB3b3JkLWJyZWFrOiBicmVhay13b3JkOyBcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IFxuICBmb250LXNpemU6IHZhcigtLW90aGVyLW5vdGUtcG9wdXAtZm9udC1zaXplKTtcbn1cbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtOmhvdmVyIHsgXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpOyBcbn1cbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC5zdmctaWNvbiB7XG4gIGZsZXgtc2hyaW5rOiAwO1xuICB3aWR0aDogMS4yZW07XG4gIGhlaWdodDogMS4yZW07XG59XG4ubm90ZS1yb3cgLm5vdGUtc3RhdHVzLWRvdCxcbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC5wb3B1cC1maWxlLWRvdCxcbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC5wb3B1cC1hc3NldC10aHVtYm5haWwge1xuICAgIG1hcmdpbi10b3A6IDVweDsgXG59XG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbSBwIHtcbiAgICBtYXJnaW46IDA7XG59XG4ucG9wdXAtZmlsZS1kb3QgeyBcbiAgd2lkdGg6IDhweDsgXG4gIGhlaWdodDogOHB4OyBcbiAgYm9yZGVyLXJhZGl1czogNTAlOyBcbiAgZmxleC1zaHJpbms6IDA7IFxufVxuLmN1c3RvbS1zdWdnZXN0aW9uLWl0ZW0geyBcbiAgcGFkZGluZzogOHB4IDEycHg7IFxuICBjdXJzb3I6IHBvaW50ZXI7IFxuICBmb250LXNpemU6IHZhcigtLWZvbnQtdWktc21hbGwpOyBcbn1cbi5jdXN0b20tc3VnZ2VzdGlvbi1pdGVtOmhvdmVyIHsgXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpOyBcbn1cbi5zZXR0aW5nLWl0ZW0tY29udHJvbCB7IFxuICBwb3NpdGlvbjogcmVsYXRpdmU7IFxufVxuYm9keTpoYXMoLm5vdGUtdGl0bGUtd3JhcHBlcjpob3ZlcikgLnRvb2x0aXAsIFxuYm9keTpoYXMoLm5vdGUtdGl0bGUtY2VsbDpob3ZlcikgLnRvb2x0aXAsXG5ib2R5OmhhcygudGFzay10ZXh0OmhvdmVyKSAudG9vbHRpcCB7XG4gIHRleHQtYWxpZ246IGxlZnQ7IFxuICBwYWRkaW5nOiA2cHggMTBweDsgXG4gIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsgXG4gIG1heC13aWR0aDogNDAwcHg7IFxuICB0cmFuc2l0aW9uLWRlbGF5OiAwLjVzICFpbXBvcnRhbnQ7IFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7IFxuICBib3gtc2hhZG93OiAwIDRweCAxMnB4IHJnYmEoMCwwLDAsMC4yKTsgXG4gIGJvcmRlci1yYWRpdXM6IDE1cHg7IFxuICBib3JkZXI6IDFweCBzb2xpZCAjNGE0YTRhOyBcbiAgZm9udC1zaXplOiB2YXIoLS1vdGhlci1ub3RlLXBvcHVwLWZvbnQtc2l6ZSk7IFxuICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpOyBcbiAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbn1cblxuXG4vKiAtLS0gVmVydGljYWwgVmlldyAtLS0gKi9cbi52ZXJ0aWNhbC1jYWxlbmRhci1zY3JvbGxlciB7IFxuICBmbGV4OiAxOyBcbiAgb3ZlcmZsb3cteTogYXV0bzsgXG4gIHBhZGRpbmc6IDAgMC41cmVtOyBcbn1cbi52ZXJ0aWNhbC1tb250aC13cmFwcGVyIHsgXG4gIG1hcmdpbi1ib3R0b206IDJyZW07IFxufVxuLnZlcnRpY2FsLW1vbnRoLXRpdGxlIHtcbiAgZm9udC1zaXplOiB2YXIoLS1tYWluLW1vbnRoLXllYXItdGl0bGUtZm9udC1zaXplKTtcbiAgZm9udC13ZWlnaHQ6IHZhcigtLW1haW4tbW9udGgteWVhci10aXRsZS13ZWlnaHQpO1xuICBjb2xvcjogdmFyKC0tbW9udGgtY29sb3ItdGhlbWVkKTtcbiAgcG9zaXRpb246IHN0aWNreTsgXG4gIHRvcDogMDsgXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgei1pbmRleDogMTA7XG4gIG1hcmdpbjogMC42cmVtIDA7IFxuICBoZWlnaHQ6IDJyZW07IFxuICBkaXNwbGF5OiBmbGV4OyBcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjsgXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuLnBlcmlvZC1tb250aC1jb250YWluZXIudmVydGljYWwtdmlldy1hY3RpdmUgLnRhYnMtY29udGVudC13cmFwcGVyIHsgZGlzcGxheTogbm9uZTsgfVxuLnBlcmlvZC1tb250aC1jb250YWluZXI6bm90KC52ZXJ0aWNhbC12aWV3LWFjdGl2ZSkgLnZlcnRpY2FsLWNhbGVuZGFyLXNjcm9sbGVyIHsgZGlzcGxheTogbm9uZTsgfVxuXG4vKiAtLS0gTW9iaWxlLVNwZWNpZmljIE92ZXJyaWRlcyAtLS0gKi9cbi5pcy1tb2JpbGUgLm5vdGVzLXRhYmxlIHsgXG4gIHdpZHRoOiAxMDAlOyBcbiAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgXG4gIHRhYmxlLWxheW91dDogZml4ZWQ7IFxufVxuLmlzLW1vYmlsZSAubm90ZXMtdGFibGUtcm93IHsgXG4gIGN1cnNvcjogcG9pbnRlcjsgXG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7IFxufVxuLmlzLW1vYmlsZSAubm90ZXMtdGFibGUgLm5vdGUtdGl0bGUtY2VsbCwgLmlzLW1vYmlsZSAubm90ZXMtdGFibGUgLm5vdGUtZGF0ZS1jZWxsIHsgXG4gIHBhZGRpbmc6IDAuNnJlbSAwLjVyZW07IFxuICB2ZXJ0aWNhbC1hbGlnbjogdG9wOyBcbn1cbi5pcy1tb2JpbGUgLm5vdGVzLXRhYmxlIC5ub3RlLXRpdGxlLWNlbGwgeyBcbiAgZGlzcGxheTogZmxleDsgXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7IFxuICBnYXA6IDhweDsgXG4gIHdoaXRlLXNwYWNlOiBub3JtYWw7IFxuICB3b3JkLWJyZWFrOiBicmVhay13b3JkOyBcbiAgZm9udC1zaXplOiB2YXIoLS1ub3Rlcy1mb250LXNpemUpOyBcbiAgZm9udC13ZWlnaHQ6IHZhcigtLW5vdGVzLWJvbGQpOyBcbn1cbi5pcy1tb2JpbGUgLm5vdGVzLXRhYmxlIC5ub3RlLWRhdGUtY2VsbCB7IFxuICB3aWR0aDogODVweDsgXG4gIHRleHQtYWxpZ246IHJpZ2h0OyBcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDsgXG4gIGZvbnQtc2l6ZTogMC44ZW07IFxuICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7IFxufVxuLmlzLW1vYmlsZSAucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRoLCAuaXMtbW9iaWxlIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgLnB3LWxhYmVsLWNlbGwgeyBcbiAgZm9udC1zaXplOiAxMnB4OyBcbiAgcGFkZGluZzogMnB4IDA7IFxufVxuLmlzLW1vYmlsZSAucGVyaW9kLWNhbGVuZGFyLXRhYmxlIC5kYXktbnVtYmVyIHsgXG4gIGZvbnQtc2l6ZTogMTNweDsgXG59XG5cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgLnB3LWxhYmVsLWNlbGwgLmRheS1udW1iZXIsXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIC53ZWVrLW51bWJlci1jZWxsIC5kYXktbnVtYmVyIHtcbiAgICBmb250LXNpemU6IGluaGVyaXQ7IC8qIEluaGVyaXQgdGhlIGNvcnJlY3QgZm9udCBzaXplIGZyb20gdGhlIHBhcmVudCBjZWxsICovXG59XG5cblxuLyogRGVmYXVsdCByb3cgaGVpZ2h0ICovXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRib2R5IHRyIHtcbiAgICBoZWlnaHQ6IDQwcHg7XG4gICAgbWluLWhlaWdodDogNDBweDtcbn1cblxuLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0ZCB7XG4gICAgbWluLWhlaWdodDogNDBweDtcbn1cblxuLyogQWRqdXN0IHJvdyBoZWlnaHQgZm9yIGNvbmRlbnNlZCBsYXlvdXQgKi9cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLmxheW91dC1jb25kZW5zZWQgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0ciB7XG4gICAgaGVpZ2h0OiAzNnB4O1xuICAgIG1pbi1oZWlnaHQ6IDM2cHg7XG59XG5cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLmxheW91dC1jb25kZW5zZWQgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0ZCB7XG4gICAgbWluLWhlaWdodDogMzZweDtcbn1cblxuLyogQWRqdXN0IHJvdyBoZWlnaHQgZm9yIHNwYWNpb3VzIGxheW91dCAqL1xuLnBlcmlvZC1tb250aC1jb250YWluZXIubGF5b3V0LXNwYWNpb3VzIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHIge1xuICAgIGhlaWdodDogNTBweDtcbiAgICBtaW4taGVpZ2h0OiA1MHB4O1xufVxuXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5sYXlvdXQtc3BhY2lvdXMgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0ZCB7XG4gICAgbWluLWhlaWdodDogNTBweDtcbn1cblxuXG4vKiAtLS0gTWlzYyAtLS0gKi9cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyIC5zdmctaWNvbiB7XG4gIGNvbG9yOiB2YXIoLS1pY29uLWNvbG9yLCBjdXJyZW50Q29sb3IpO1xufVxuXG4vKiAtLS0gVW5pZmllZCBjbGVhciBidXR0b24gZm9yIGFsbCBzZWFyY2ggaW5wdXRzIC0tLSAqL1xuLnNlYXJjaC1pbnB1dC1jbGVhci1idG4ge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICByaWdodDogNnB4O1xuICAgIHRvcDogNTAlO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcbiAgICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIHdpZHRoOiAxNXB4O1xuICAgIGhlaWdodDogMTVweDtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4xcyBlYXNlLWluLW91dDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjOWM5YjliO1xuICAgIC8qIENvbG9yIGlzIG5vdyBzZXQgZGlyZWN0bHkgb24gdGhlIGljb24gcnVsZSBiZWxvdyAqL1xufVxuXG4uc2VhcmNoLWlucHV0LWNsZWFyLWJ0bjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTtcbn1cblxuLnNlYXJjaC1pbnB1dC1jbGVhci1idG4gLnN2Zy1pY29uIHtcbiAgICB3aWR0aDogMTNweDtcbiAgICBoZWlnaHQ6IDEzcHg7XG4gICAgLyogRklYOiBGb3JjZSB0aGUgaWNvbiBjb2xvciB0byBiZSBkYXJrICovXG4gICAgY29sb3I6ICMzODM4MzggIWltcG9ydGFudDtcbn1cblxuLyogLS0tIExpZ2h0IFRoZW1lIE92ZXJyaWRlcyAtLS0gKi9cbmJvZHkudGhlbWUtbGlnaHQgLnNlYXJjaC1pbnB1dC1jbGVhci1idG4ge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICM1YzVjNWM7XG59XG5cbmJvZHkudGhlbWUtbGlnaHQgLnNlYXJjaC1pbnB1dC1jbGVhci1idG46aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICMzODM4Mzg7XG59XG5cbmJvZHkudGhlbWUtbGlnaHQgLnNlYXJjaC1pbnB1dC1jbGVhci1idG4gLnN2Zy1pY29uIHtcbiAgICAvKiBGSVg6IEZvcmNlIHRoZSBpY29uIGNvbG9yIHRvIGJlIHdoaXRlIGluIHRoZSBsaWdodCB0aGVtZSAqL1xuICAgIGNvbG9yOiAjZmZmZmZmICFpbXBvcnRhbnQ7XG59XG5cbi8qIC0tLSBUYXNrIEhlYWRlciBJY29ucyAtLS0gKi9cbi50YXNrLWdyb3VwLWhlYWRlciAuaWNvbiB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG4udGFzay1ncm91cC1oZWFkZXIgLmljb24gLnN2Zy1pY29uIHtcbiAgLyp3aWR0aDogdmFyKC0tdGFzay1oZWFkaW5nLWZvbnQtc2l6ZSk7XG4gIGhlaWdodDogdmFyKC0tdGFzay1oZWFkaW5nLWZvbnQtc2l6ZSk7XG4qL1xuICB9XG5cbi8qIC0tLSBUYWIgSWNvbnMgLS0tICovXG4udGFiLWljb24ge1xuICB3aWR0aDogMS4yZW07XG4gIGhlaWdodDogMS4yZW07XG59XG4ubm90ZS10YWIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBnYXA6IDAuNWVtO1xufVxuXG4vKiAtLS0gQXNzZXQgTGlzdCBTdHlsZXMgLS0tICovXG4uYXNzZXQtdGh1bWJuYWlsLCAucG9wdXAtYXNzZXQtdGh1bWJuYWlsIHtcbiAgd2lkdGg6IDI4cHg7XG4gIGhlaWdodDogMjhweDtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLXMpO1xuICBvYmplY3QtZml0OiBjb3Zlcjtcbn1cbi5wb3B1cC1hc3NldC10aHVtYm5haWwge1xuICB3aWR0aDogMjJweDtcbiAgaGVpZ2h0OiAyMnB4O1xufVxuLmFzc2V0LWljb24tY29udGFpbmVyLCAuYXNzZXQtdGh1bWJuYWlsLWNvbnRhaW5lciB7XG4gIHdpZHRoOiAyOHB4O1xuICBoZWlnaHQ6IDI4cHg7XG4gIGZsZXgtc2hyaW5rOiAwO1xuICBtYXJnaW4tcmlnaHQ6IDhweDtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG4uYXNzZXQtaWNvbi1jb250YWluZXIgLnN2Zy1pY29uIHtcbiAgd2lkdGg6IDIwcHg7XG4gIGhlaWdodDogMjBweDtcbn1cbi5hc3NldC1hY3Rpb24taWNvbiB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgd2lkdGg6IDIwcHg7XG4gIGhlaWdodDogMjBweDtcbiAgbWFyZ2luLXJpZ2h0OiA2cHg7XG59XG4uYXNzZXQtYWN0aW9uLWljb24gPiBkaXYge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlLWluLW91dDtcbn1cbi5hc3NldC1hY3Rpb24taWNvbiAuc3ZnLWljb24ge1xuICB3aWR0aDogMTZweDtcbiAgaGVpZ2h0OiAxNnB4O1xufVxuLmFzc2V0LWFjdGlvbi1pY29uIGRpdjpudGgtY2hpbGQoMikge1xuICBvcGFjaXR5OiAwO1xufVxuLm5vdGUtcm93OmhvdmVyIC5hc3NldC1hY3Rpb24taWNvbiBkaXY6bnRoLWNoaWxkKDEpIHtcbiAgb3BhY2l0eTogMDtcbn1cbi5ub3RlLXJvdzpob3ZlciAuYXNzZXQtYWN0aW9uLWljb24gZGl2Om50aC1jaGlsZCgyKSB7XG4gIG9wYWNpdHk6IDE7XG59XG4uYXNzZXQtYWN0aW9uLWljb246aG92ZXIgLnN2Zy1pY29uIHtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1lcnJvcik7XG59XG5cbi8qIC0tLSBBc3NldCBHcmlkIFN0eWxlcyAtLS0gKi9cbi5ub3RlLWxpc3Qtd3JhcHBlci5hc3NldHMtZ3JpZC12aWV3IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICBnYXA6IDE2cHg7XG4gICAgcGFkZGluZy10b3A6IDhweDtcbn1cbi5hc3NldC1ncmlkLWl0ZW0ge1xuICAgIGZsZXgtYmFzaXM6IGNhbGMoNTAlIC0gOHB4KTsgXG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBwYWRkaW5nOiA4cHg7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDsgLyogVEhJUyBJUyBUSEUgQ1JJVElDQUwgTUlTU0lORyBMSU5FICovXG59XG4uYXNzZXQtZ3JpZC1wcmV2aWV3IHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBhc3BlY3QtcmF0aW86IDQgLyAzO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBvdmVyZmxvdzogaGlkZGVuOyBcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7ICBcbn1cbi5hc3NldC1ncmlkLXByZXZpZXcgaW1nIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgb2JqZWN0LWZpdDogY292ZXI7XG59XG4uYXNzZXQtZ3JpZC1uYW1lIHtcbiAgICBwYWRkaW5nOiA4cHggNHB4IDA7IC8qIEFkanVzdGVkIHBhZGRpbmcgKi9cbiAgICBtYXJnaW4tdG9wOiA4cHg7IC8qIEFkZHMgc3BhY2UgYmV0d2VlbiB0aGUgaW1hZ2UgYW5kIHRleHQgKi9cbiAgICBmb250LXNpemU6IDAuOWVtO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xufVxuXG4uYXNzZXQtZ3JpZC1pdGVtOmhvdmVyIHtcbiAgYm9yZGVyLWNvbG9yOiByZ2JhKDIwMCwgMjAwLCAyMDAsIDAuNzUpOyAvKiBBIGxpZ2h0ZXIsIHNlbWktdHJhbnNwYXJlbnQgZ3JheSAqL1xufVxuXG4vKiAtLS0gU2V0dGluZ3MgVGFicyAtLS0gKi9cbi5wZXJpb2Qtc2V0dGluZ3MtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuLnBlcmlvZC1zZXR0aW5ncy1uYXYge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBwYWRkaW5nLXJpZ2h0OiAxLjVyZW07XG4gIGJvcmRlci1yaWdodDogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgd2lkdGg6IDE3MHB4O1xuICBmbGV4LXNocmluazogMDtcbn1cbi5wZXJpb2Qtc2V0dGluZ3MtbmF2LWJ1dHRvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgIHBhZGRpbmc6IDAuNzVyZW0gMC41cmVtO1xuICAgICAgbWFyZ2luLWJvdHRvbTogMC4yNXJlbTtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1tKTtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIGZvbnQtc2l6ZTogdmFyKC0tZm9udC11aS1zbWFsbCk7XG59XG4ucGVyaW9kLXNldHRpbmdzLW5hdi1idXR0b246aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xufVxuLnBlcmlvZC1zZXR0aW5ncy1uYXYtYnV0dG9uLmlzLWFjdGl2ZSB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxuLnBlcmlvZC1zZXR0aW5ncy1jb250ZW50IHtcbiAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICAgIHBhZGRpbmctbGVmdDogMS41cmVtO1xuICAgICAgb3ZlcmZsb3cteTogYXV0bztcbn1cbi5wb3B1cC1zZWN0aW9uLWhlYWRlciB7XG4gICAgZm9udC1zaXplOiAwLjhlbTtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgICBsZXR0ZXItc3BhY2luZzogMC4wNWVtO1xuICAgIG1hcmdpbjogMTBweCA4cHggNHB4O1xuICAgIHBhZGRpbmc6IDA7XG59XG4ucG9wdXAtc2VwYXJhdG9yIHtcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIG1hcmdpbjogNnB4IDhweDtcbn1cbi5vdGhlci1ub3Rlcy1wb3B1cCAucG9wdXAtc2VjdGlvbi1oZWFkZXI6Zmlyc3QtY2hpbGQge1xuICAgIG1hcmdpbi10b3A6IDRweDtcbn1cbi5ub3RlLWdyb3VwLWhlYWRlciB7XG4gICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgbGV0dGVyLXNwYWNpbmc6IDAuMDVlbTtcbiAgICBwYWRkaW5nOiAxMnB4IDRweCA0cHg7XG59XG4ubm90ZS10aXRsZS1wYXRoLXdyYXBwZXIsXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbSAubm90ZS10aXRsZS1wYXRoLXdyYXBwZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBtaW4td2lkdGg6IDA7IFxufVxuLm5vdGUtcm93IC5ub3RlLXBhdGgsXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbSAubm90ZS1wYXRoIHtcbiAgICBmb250LXNpemU6IDAuOGVtO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgbWFyZ2luLXRvcDogMnB4O1xufVxuXG4vKiAtLS0gRmluYWwgJiBVbmlmaWVkIFRhc2sgU3R5bGluZyAtLS0gKi9cbi50YXNrLWNoZWNrYm94LXN5bWJvbCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIHdpZHRoOiAxLjM1ZW07XG4gICAgaGVpZ2h0OiAxLjM1ZW07XG4gICAgZm9udC1zaXplOiAxZW07XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLXRleHQtZmFpbnQpO1xuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICB0cmFuc2l0aW9uOiBhbGwgMC4xcyBlYXNlLWluLW91dDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xufVxuLnRhc2stcm93OmhvdmVyIC50YXNrLWNoZWNrYm94LXN5bWJvbCxcbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtOmhvdmVyIC50YXNrLWNoZWNrYm94LXN5bWJvbCB7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG59XG4udGFzay1jaGVja2JveC1zeW1ib2w6aGFzKC5zdmctaWNvbikge1xuICAgIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcbn1cbi50YXNrLWNoZWNrYm94LXN5bWJvbC5pcy1jb21wbGV0ZWQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpICFpbXBvcnRhbnQ7XG59XG4udGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgcGFkZGluZzogMC4xZW07XG4gICAgZmlsbDogY3VycmVudENvbG9yO1xufVxuLnRhc2stY2hlY2tib3gtc3ltYm9sLmlzLWNvbXBsZXRlZCAuc3ZnLWljb24ge1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCkgIWltcG9ydGFudDtcbn1cblxuLyogLS0tIE5vdGUgR3JvdXAgQ29sbGFwc2UgU3R5bGVzIC0tLSAqL1xuLm5vdGUtZ3JvdXAtY29udGFpbmVyIHtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpOyAvKiBBZGRzIGEgc3VidGxlLCB0aGVtZS1hd2FyZSBib3JkZXIgKi9cbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLWwpOyAvKiBSb3VuZHMgdGhlIGNvcm5lcnMgb2YgdGhlIGNhcmQgKi9cbiAgcGFkZGluZzogMCA4cHggOHB4OyAvKiBBZGRzIHNvbWUgaW50ZXJuYWwgc3BhY2luZyBmb3IgdGhlIG5vdGUgbGlzdCAqL1xuICBtYXJnaW4tYm90dG9tOiAxMnB4OyAvKiBJbmNyZWFzZXMgc3BhY2UgYmV0d2VlbiBjYXJkcyAqL1xufVxuLm5vdGUtZ3JvdXAtaGVhZGVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHVzZXItc2VsZWN0OiBub25lO1xuICBmb250LXNpemU6IDAuODVlbTtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgbGV0dGVyLXNwYWNpbmc6IDAuMDVlbTtcbiAgcGFkZGluZzogMTJweCA0cHggNHB4O1xufVxuLm5vdGUtZ3JvdXAtaGVhZGVyOmhvdmVyIHtcbiAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbn1cbi5ub3RlLWdyb3VwLWhlYWRlci1jb250ZW50IHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZ2FwOiA2cHg7XG59XG4ubm90ZS1ncm91cC1jb3VudCB7XG4gIGZvbnQtc2l6ZTogMC45ZW07XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBwYWRkaW5nOiAxcHggNXB4O1xufVxuLm5vdGUtZ3JvdXAtY29sbGFwc2UtaWNvbiAuc3ZnLWljb24ge1xuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4ycyBlYXNlLWluLW91dDtcbiAgd2lkdGg6IDE2cHg7XG4gIGhlaWdodDogMTZweDtcbn1cbi5ub3RlLWdyb3VwLWNvbnRhaW5lci5pcy1jb2xsYXBzZWQgLm5vdGUtZ3JvdXAtY29sbGFwc2UtaWNvbiAuc3ZnLWljb24ge1xuICB0cmFuc2Zvcm06IHJvdGF0ZSgtOTBkZWcpO1xufVxuLm5vdGUtbGlzdC13cmFwcGVyIHtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgdHJhbnNpdGlvbjogbWF4LWhlaWdodCAwLjNzIGVhc2UtaW4tb3V0LCBtYXJnaW4tdG9wIDAuM3MgZWFzZS1pbi1vdXQ7XG4gIG1heC1oZWlnaHQ6IDIwMDBweDsgLyogQSBsYXJnZSB2YWx1ZSB0byBhY2NvbW1vZGF0ZSBtYW55IG5vdGVzICovXG4gIG1hcmdpbi10b3A6IDRweDtcbn1cbi5ub3RlLWdyb3VwLWNvbnRhaW5lci5pcy1jb2xsYXBzZWQgLm5vdGUtbGlzdC13cmFwcGVyIHtcbiAgbWF4LWhlaWdodDogMDtcbiAgbWFyZ2luLXRvcDogMDtcbn1cblxuLyogLS0tIFB1bGwgdG8gUmVmcmVzaCBJbmRpY2F0b3IgLS0tICovXG4ucG0tcmVmcmVzaC1pbmRpY2F0b3Ige1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgbGVmdDogMDtcbiAgICByaWdodDogMDtcbiAgICBoZWlnaHQ6IDUwcHg7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGNvbG9yOiB2YXIoLS1pY29uLWNvbG9yKTtcbiAgICB6LWluZGV4OiA1O1xuICAgIG9wYWNpdHk6IDA7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MHB4KSBzY2FsZSgwLjcpO1xuICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzLCBvcGFjaXR5IDAuM3M7XG59XG4ucG0tcmVmcmVzaC1pbmRpY2F0b3IuaXMtcHVsbGluZyB7XG4gICAgb3BhY2l0eTogMC44O1xufVxuLnBtLXJlZnJlc2gtaW5kaWNhdG9yLmlzLXJlYWR5IHtcbiAgICBvcGFjaXR5OiAxO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKSBzY2FsZSgxKTtcbn1cblxuLnBtLXJlZnJlc2gtaW5kaWNhdG9yLmlzLXJlZnJlc2hpbmcgLnN2Zy1pY29uIHtcbiAgICBhbmltYXRpb246IHNwaW4gMS4ycyBsaW5lYXIgaW5maW5pdGU7XG59XG4vKiBSZS11c2UgdGhlIHNwaW4gYW5pbWF0aW9uIGZyb20gdGhlIHJlZnJlc2ggYnV0dG9uICovXG5Aa2V5ZnJhbWVzIHNwaW4ge1xuICAgIGZyb20geyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfVxuICAgIHRvIHsgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsgfVxufVxuLyogLS0tIE1vYmlsZSBLZXlib2FyZCBIYW5kbGluZyAtLS0gKi9cbi5zY3JhdGNoLWNvbnRlbnQuaXMtZWRpdGluZy1tb2JpbGUge1xuICAgIHBhZGRpbmctYm90dG9tOiA0NXZoOyAvKiA0NSUgb2YgdGhlIHZpc2libGUgc2NyZWVuIGhlaWdodCAqL1xufVxuXG4vKiBDb2xvcnMgZm9yIGN1c3RvbSBpY29ucyAqL1xuLnRhc2stcm93IC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJtYXAtcGluXCJdLFxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cIm1hcC1waW5cIl0geyBjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpICFpbXBvcnRhbnQ7IH1cbi50YXNrLXJvdyAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwiZmxhbWVcIl0sXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbSAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwiZmxhbWVcIl0geyBjb2xvcjogdmFyKC0tdGV4dC13YXJuaW5nKSAhaW1wb3J0YW50OyB9XG4udGFzay1yb3cgLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cInNsYXNoXCJdLFxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cInNsYXNoXCJdLFxuLnRhc2stcm93IC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJwaWdneS1iYW5rXCJdLFxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cInBpZ2d5LWJhbmtcIl0sXG4udGFzay1yb3cgLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cInRodW1icy11cFwiXSxcbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJ0aHVtYnMtdXBcIl0sXG4udGFzay1yb3cgLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cInRyb3BoeVwiXSxcbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJ0cm9waHlcIl0sXG4udGFzay1yb3cgLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cImFycm93LXVwXCJdLFxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cImFycm93LXVwXCJdIHsgY29sb3I6IHZhcigtLXRleHQtc3VjY2VzcykgIWltcG9ydGFudDsgfVxuLnRhc2stcm93IC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJ0aHVtYnMtZG93blwiXSxcbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJ0aHVtYnMtZG93blwiXSxcbi50YXNrLXJvdyAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwiYXJyb3ctZG93blwiXSxcbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJhcnJvdy1kb3duXCJdIHsgY29sb3I6IHZhcigtLXRleHQtZXJyb3IpICFpbXBvcnRhbnQ7IH1cbi50YXNrLXJvdyAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwic3RhclwiXSxcbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJzdGFyXCJdLFxuLnRhc2stcm93IC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJsaWdodGJ1bGJcIl0sXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbSAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwibGlnaHRidWxiXCJdIHsgY29sb3I6IHZhcigtLWNvbG9yLXllbGxvdykgIWltcG9ydGFudDsgfVxuLnRhc2stcm93IC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJib29rbWFya1wiXSxcbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJib29rbWFya1wiXSxcbi50YXNrLXJvdyAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwiaW5mb1wiXSxcbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJpbmZvXCJdIHsgY29sb3I6IHZhcigtLWNvbG9yLWJsdWUpICFpbXBvcnRhbnQ7IH1cbi50YXNrLXJvdyAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwiaGVscC1jaXJjbGVcIl0sXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbSAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwiaGVscC1jaXJjbGVcIl0geyBjb2xvcjogdmFyKC0tY29sb3ItY3lhbikgIWltcG9ydGFudDsgfVxuLnRhc2stcm93IC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJrZXlcIl0sXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbSAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwia2V5XCJdIHsgY29sb3I6IGdvbGRlbnJvZCAhaW1wb3J0YW50OyB9XG4udGFzay1yb3cgLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cIm1pbnVzXCJdLFxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cIm1pbnVzXCJdLFxuLnRhc2stcm93IC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJxdW90ZVwiXSxcbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJxdW90ZVwiXSB7IGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKSAhaW1wb3J0YW50OyB9XG4udGFzay1yb3cgLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cImFycm93LXJpZ2h0XCJdLFxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cImFycm93LXJpZ2h0XCJdLFxuLnRhc2stcm93IC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJhcnJvdy1sZWZ0XCJdLFxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cImFycm93LWxlZnRcIl0geyBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpICFpbXBvcnRhbnQ7IH1cblxuXG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgIFdFRUtFTkQvV0VFSyBISUdITElHSFRJTkcgTE9HSUNcbiAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbi8qIDEuIE5ldXRyYWxpemUgd2Vla2VuZCBzaGFkZSBpbnNpZGUgdGhlIGN1cnJlbnQgd2VlayByb3cgKi9cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHIuY3VycmVudC13ZWVrLXJvdyB7XG4gIC0td2Vla2VuZC1zaGFkZS1jb2xvci10aGVtZWQ6IHRyYW5zcGFyZW50O1xufVxuXG4vKiAyLiBSZWd1bGFyIHdlZWtlbmQgc2hhZGluZyBmb3IgU1VOREFZLVNUQVJUIHdlZWtzICovXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lcjpub3QoLm1vbmRheS1zdGFydCkud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQ6bm90KC5oYXMtcHctY29sdW1uKTpub3QoLmhhcy13ZWVrLW51bWJlcnMpXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoMSksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lcjpub3QoLm1vbmRheS1zdGFydCkud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQ6bm90KC5oYXMtcHctY29sdW1uKTpub3QoLmhhcy13ZWVrLW51bWJlcnMpXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoNyksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lcjpub3QoLm1vbmRheS1zdGFydCkud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXB3LWNvbHVtbjpub3QoLmhhcy13ZWVrLW51bWJlcnMpXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoMiksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lcjpub3QoLm1vbmRheS1zdGFydCkud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXB3LWNvbHVtbjpub3QoLmhhcy13ZWVrLW51bWJlcnMpXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoOCksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lcjpub3QoLm1vbmRheS1zdGFydCkud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXdlZWstbnVtYmVyczpub3QoLmhhcy1wdy1jb2x1bW4pXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoMiksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lcjpub3QoLm1vbmRheS1zdGFydCkud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXdlZWstbnVtYmVyczpub3QoLmhhcy1wdy1jb2x1bW4pXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoOCksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lcjpub3QoLm1vbmRheS1zdGFydCkud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXB3LWNvbHVtbi5oYXMtd2Vlay1udW1iZXJzXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoMyksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lcjpub3QoLm1vbmRheS1zdGFydCkud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXB3LWNvbHVtbi5oYXMtd2Vlay1udW1iZXJzXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoOSkge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS13ZWVrZW5kLXNoYWRlLWNvbG9yLXRoZW1lZCk7XG59XG5cbi8qIDMuIFdlZWtlbmQgc2hhZGluZyBmb3IgTU9OREFZLVNUQVJUIHdlZWtzICovXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5tb25kYXktc3RhcnQud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQ6bm90KC5oYXMtcHctY29sdW1uKTpub3QoLmhhcy13ZWVrLW51bWJlcnMpXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoNiksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5tb25kYXktc3RhcnQud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQ6bm90KC5oYXMtcHctY29sdW1uKTpub3QoLmhhcy13ZWVrLW51bWJlcnMpXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoNyksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5tb25kYXktc3RhcnQud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXB3LWNvbHVtbjpub3QoLmhhcy13ZWVrLW51bWJlcnMpXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoNyksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5tb25kYXktc3RhcnQud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXB3LWNvbHVtbjpub3QoLmhhcy13ZWVrLW51bWJlcnMpXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoOCksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5tb25kYXktc3RhcnQud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXdlZWstbnVtYmVyczpub3QoLmhhcy1wdy1jb2x1bW4pXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoNyksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5tb25kYXktc3RhcnQud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXdlZWstbnVtYmVyczpub3QoLmhhcy1wdy1jb2x1bW4pXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoOCksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5tb25kYXktc3RhcnQud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXB3LWNvbHVtbi5oYXMtd2Vlay1udW1iZXJzXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoOCksXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5tb25kYXktc3RhcnQud2Vla2VuZC1zaGFkaW5nLWVuYWJsZWQuaGFzLXB3LWNvbHVtbi5oYXMtd2Vlay1udW1iZXJzXG4gIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHI6bm90KC5jdXJyZW50LXdlZWstcm93KSB0ZDpudGgtY2hpbGQoOSkge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS13ZWVrZW5kLXNoYWRlLWNvbG9yLXRoZW1lZCk7XG59XG5cbi8qIDQuIE1ha2UgZGF5LWNvbnRlbnQgdHJhbnNwYXJlbnQgYnkgZGVmYXVsdCAqL1xuLnBlcmlvZC1jYWxlbmRhci10YWJsZSAuZGF5LWNvbnRlbnQge1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50O1xufVxuXG4vKiA1LiBJZiBhIGNlbGwgdXNlcyBib3JkZXIgc3R5bGluZyAodG9kYXkvdGFza3MpLCBrZWVwIGl0cyBiYWNrZ3JvdW5kIHRyYW5zcGFyZW50ICovXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIC5kYXktY29udGVudFtzdHlsZSo9XCJib3JkZXJcIl0ge1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50O1xufVxuXG4vKiA2LiBBbHdheXMgaGlnaGxpZ2h0IHRoZSBjdXJyZW50IHdlZWsgcm93IHZpYSB0aGUgaW5uZXIgY29udGVudCAqL1xuLnBlcmlvZC1tb250aC1jb250YWluZXIgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0ci5jdXJyZW50LXdlZWstcm93IHRkIC5kYXktY29udGVudCB7XG4gIGJhY2tncm91bmQ6IHZhcigtLXJvdy1oaWdobGlnaHQtY29sb3ItdGhlbWVkKSAhaW1wb3J0YW50O1xufVxuXG4udGFiLW9yZGVyLWNvbnRhaW5lciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGdhcDogOHB4O1xuICBtYXJnaW4tdG9wOiAxMHB4O1xufVxuXG4uZHJhZ2dhYmxlLWl0ZW0ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nOiA4cHg7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5LWFsdCk7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICBjdXJzb3I6IGdyYWI7XG59XG5cbi5kcmFnZ2FibGUtaXRlbS5kcmFnZ2luZyB7XG4gIG9wYWNpdHk6IDAuNTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG59XG5cbi5kcmFnLWhhbmRsZSB7XG4gIG1hcmdpbi1yaWdodDogMTJweDtcbiAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xufVxuXG4uc2V0dGluZy1zcGFjZXIge1xuICBoZWlnaHQ6IDIwcHg7IC8qIE9yIHVzZSBtYXJnaW4tdG9wLCBlLmcuLCBtYXJnaW4tdG9wOiAyMHB4OyAqL1xufVxuXG4ubm90ZS1ncm91cC1oZWFkZXItY29udGVudCB7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLnBpbm5lZC1zb3J0LWluZGljYXRvciB7XG4gIGZvbnQtc2l6ZTogMC44NWVtO1xuICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG4gIG1hcmdpbi1sZWZ0OiA2cHg7XG4gIC8qIFByZXZlbnRzIHRoZSBpbmRpY2F0b3IgZnJvbSBiZWluZyBzZWxlY3RlZCBhcyB0ZXh0IHdoZW4gY2xpY2tpbmcgKi9cbiAgdXNlci1zZWxlY3Q6IG5vbmU7IFxufVxuXG4vKiBIaWRlIGRyYWcgaGFuZGxlcyBieSBkZWZhdWx0IGluIG1haW4gVUkgKi9cbi5ub3RlLXJvdyAuZHJhZy1oYW5kbGUge1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIGN1cnNvcjogZ3JhYjtcbn1cblxuLyogU2hvdyBkcmFnIGhhbmRsZXMgd2hlbiByZW9yZGVyIG1vZGUgaXMgYWN0aXZlICovXG4ucGlubmVkLW5vdGVzLXJlb3JkZXItbW9kZSAubm90ZS1yb3cgLmRyYWctaGFuZGxlIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG5cbi8qIFZpc3VhbCBmZWVkYmFjayBkdXJpbmcgZHJhZyAqL1xuLm5vdGUtcm93LmRyYWdnaW5nIHtcbiAgICBvcGFjaXR5OiAwLjU7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG59XG5cbiAgICBgO1xuXG4vLyA9PT0gSGVscGVyIEZ1bmN0aW9ucyBhbmQgQ2xhc3NlcyA9PT1cbi8qKlxuICogUGFyc2VzIGFuIFwicmdiYShyLCBnLCBiLCBhKVwiIHN0cmluZyBpbnRvIGFuIG9iamVjdC5cbiAqIEBwYXJhbSB7c3RyaW5nfSByZ2JhU3RyaW5nIFRoZSBpbnB1dCBzdHJpbmcuXG4gKiBAcmV0dXJucyB7e3I6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIsIGE6IG51bWJlcn0gfCBudWxsfVxuICovXG5mdW5jdGlvbiBwYXJzZVJnYmFTdHJpbmcocmdiYVN0cmluZykge1xuICAgIGlmICghcmdiYVN0cmluZykgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgbWF0Y2ggPSByZ2JhU3RyaW5nLm1hdGNoKC9yZ2JhP1xcKChcXGQrKSxcXHMqKFxcZCspLFxccyooXFxkKykoPzosXFxzKihbXFxkLl0rKSk/XFwpLyk7XG4gICAgaWYgKCFtYXRjaCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcjogcGFyc2VJbnQobWF0Y2hbMV0sIDEwKSxcbiAgICAgICAgZzogcGFyc2VJbnQobWF0Y2hbMl0sIDEwKSxcbiAgICAgICAgYjogcGFyc2VJbnQobWF0Y2hbM10sIDEwKSxcbiAgICAgICAgYTogbWF0Y2hbNF0gIT09IHVuZGVmaW5lZCA/IHBhcnNlRmxvYXQobWF0Y2hbNF0pIDogMSxcbiAgICB9O1xufVxuXG4vKipcbiAqIEJsZW5kcyB0d28gUkdCQSBjb2xvciBvYmplY3RzIGJhc2VkIG9uIGEgbWl4IGZhY3Rvci5cbiAqIEBwYXJhbSB7e3IsZyxiLGF9fSBjb2xvcjEgVGhlIHN0YXJ0IGNvbG9yIG9iamVjdC5cbiAqIEBwYXJhbSB7e3IsZyxiLGF9fSBjb2xvcjIgVGhlIGVuZCBjb2xvciBvYmplY3QuXG4gKiBAcGFyYW0ge251bWJlcn0gZmFjdG9yIEEgdmFsdWUgZnJvbSAwICgxMDAlIGNvbG9yMSkgdG8gMSAoMTAwJSBjb2xvcjIpLlxuICogQHJldHVybnMge3N0cmluZ30gVGhlIHJlc3VsdGluZyBcInJnYmEoLi4uKVwiIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gYmxlbmRSZ2JhQ29sb3JzKGNvbG9yMSwgY29sb3IyLCBmYWN0b3IpIHtcbiAgICBjb25zdCByID0gTWF0aC5yb3VuZChjb2xvcjEuciAqICgxIC0gZmFjdG9yKSArIGNvbG9yMi5yICogZmFjdG9yKTtcbiAgICBjb25zdCBnID0gTWF0aC5yb3VuZChjb2xvcjEuZyAqICgxIC0gZmFjdG9yKSArIGNvbG9yMi5nICogZmFjdG9yKTtcbiAgICBjb25zdCBiID0gTWF0aC5yb3VuZChjb2xvcjEuYiAqICgxIC0gZmFjdG9yKSArIGNvbG9yMi5iICogZmFjdG9yKTtcbiAgICBjb25zdCBhID0gKGNvbG9yMS5hICogKDEgLSBmYWN0b3IpICsgY29sb3IyLmEgKiBmYWN0b3IpLnRvRml4ZWQoMik7XG4gICAgcmV0dXJuIGByZ2JhKCR7cn0sICR7Z30sICR7Yn0sICR7YX0pYDtcbn1cblxuLyoqXG4gKiBBIHJldXNhYmxlIGNvbmZpcm1hdGlvbiBtb2RhbCBkaWFsb2cuXG4gKi9cbmNsYXNzIENvbmZpcm1hdGlvbk1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIGNvbnN0cnVjdG9yKGFwcCwgdGl0bGUsIG1lc3NhZ2UsIG9uQ29uZmlybSwgY29uZmlybVRleHQgPSBcIkNvbmZpcm1cIikge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMub25Db25maXJtID0gb25Db25maXJtO1xuICAgICAgICB0aGlzLmNvbmZpcm1UZXh0ID0gY29uZmlybVRleHQ7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiB0aGlzLnRpdGxlIH0pO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogdGhpcy5tZXNzYWdlIH0pO1xuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblxuICAgICAgICBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgdGV4dDogdGhpcy5jb25maXJtVGV4dCxcbiAgICAgICAgICAgIGNsczogXCJtb2QtY3RhXCIsXG4gICAgICAgIH0pLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB0aGlzLm9uQ29uZmlybSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgdGV4dDogXCJDYW5jZWxcIixcbiAgICAgICAgfSkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG5cbi8qIEEgbW9kYWwgZGlhbG9nIHRoYXQgcHJlc2VudHMgbXVsdGlwbGUgYWN0aW9uIGNob2ljZXMgdG8gdGhlIHVzZXIgd2hlbiBjcmVhdGluZyBhIG5ldyBkYWlseSBub3RlLiAqL1xuY2xhc3MgQWN0aW9uQ2hvaWNlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgY29uc3RydWN0b3IoYXBwLCB0aXRsZSwgbWVzc2FnZSwgYnV0dG9ucykge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMuYnV0dG9ucyA9IGJ1dHRvbnM7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogdGhpcy50aXRsZSB9KTtcbiAgICAgICAgaWYgKHRoaXMubWVzc2FnZSkge1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiB0aGlzLm1lc3NhZ2UgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG5cbiAgICAgICAgZm9yIChjb25zdCBidXR0b25Db25maWcgb2YgdGhpcy5idXR0b25zKSB7XG4gICAgICAgICAgICBjb25zdCBidG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogYnV0dG9uQ29uZmlnLnRleHQgfSk7XG4gICAgICAgICAgICBpZiAoYnV0dG9uQ29uZmlnLmNscykge1xuICAgICAgICAgICAgICAgIGJ0bi5hZGRDbGFzcyhidXR0b25Db25maWcuY2xzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGJ1dHRvbkNvbmZpZy5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uQ29uZmlnLmFjdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG5cblxuLyoqXG4gKiBQcm92aWRlcyBhdXRvY29tcGxldGUgc3VnZ2VzdGlvbnMgZm9yIE1hcmtkb3duIGZpbGUgcGF0aHMgaW4gYSB0ZXh0IGlucHV0LlxuICovXG5jbGFzcyBUZW1wbGF0ZUZpbGVTdWdnZXN0IGV4dGVuZHMgQWJzdHJhY3RJbnB1dFN1Z2dlc3Qge1xuICAgIGNvbnN0cnVjdG9yKGFwcCwgaW5wdXRFbCkge1xuICAgICAgICBzdXBlcihhcHAsIGlucHV0RWwpO1xuICAgIH1cblxuICAgIGdldFN1Z2dlc3Rpb25zKHF1ZXJ5KSB7XG4gICAgICAgIGNvbnN0IG1hcmtkb3duRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGNvbnN0IGxvd2VyQ2FzZVF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKCFsb3dlckNhc2VRdWVyeSkgcmV0dXJuIG1hcmtkb3duRmlsZXM7XG4gICAgICAgIHJldHVybiBtYXJrZG93bkZpbGVzLmZpbHRlcihmaWxlID0+IGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyQ2FzZVF1ZXJ5KSk7XG4gICAgfVxuXG4gICAgcmVuZGVyU3VnZ2VzdGlvbihmaWxlLCBlbCkgeyBlbC5zZXRUZXh0KGZpbGUucGF0aCk7IH1cblxuICAgIHNlbGVjdFN1Z2dlc3Rpb24oZmlsZSkge1xuICAgICAgICB0aGlzLmlucHV0RWwudmFsdWUgPSBmaWxlLnBhdGg7XG4gICAgICAgIHRoaXMuaW5wdXRFbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIpKTtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBjdXN0b20gcGVyaW9kIGFuZCB3ZWVrIG51bWJlciBiYXNlZCBvbiBhIGdpdmVuIHN0YXJ0IGRhdGUuXG4gKiBBIHllYXIgaXMgZGl2aWRlZCBpbnRvIDEzIHBlcmlvZHMgb2YgNCB3ZWVrcyBlYWNoLlxuICogQHBhcmFtIHtEYXRlfSBkYXRlIC0gVGhlIGRhdGUgdG8gY2FsY3VsYXRlIGZvci5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdGFydE9mUGVyaW9kc092ZXJyaWRlIC0gVGhlIHN0YXJ0IGRhdGUgaW4gXCJZWVlZLU1NLUREXCIgZm9ybWF0IGZyb20gc2V0dGluZ3MuXG4gKiBAcmV0dXJucyB7e3BlcmlvZDogbnVtYmVyLCB3ZWVrOiBudW1iZXIsIHdlZWtTaW5jZVN0YXJ0OiBudW1iZXJ9fSBBbiBvYmplY3Qgd2l0aCB0aGUgcGVyaW9kLCB3ZWVrLCBhbmQgdG90YWwgd2Vla3Mgc2luY2Ugc3RhcnQuXG4gKi9cbmZ1bmN0aW9uIGdldFBlcmlvZFdlZWsoZGF0ZSA9IG5ldyBEYXRlKCksIHN0YXJ0T2ZQZXJpb2RzT3ZlcnJpZGUpIHtcbiAgICBjb25zdCBkZWZhdWx0U3RhcnRTdHJpbmcgPSBcIjIwMjUtMDMtMDJcIjtcbiAgICBsZXQgc3RhcnRTdHJpbmcgPSBzdGFydE9mUGVyaW9kc092ZXJyaWRlIHx8IGRlZmF1bHRTdGFydFN0cmluZztcblxuICAgIGxldCBzdGFydE1vbWVudCA9IG1vbWVudChzdGFydFN0cmluZywgXCJZWVlZLU1NLUREXCIsIHRydWUpO1xuXG4gICAgaWYgKCFzdGFydE1vbWVudC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgYFtDYWxlbmRhciBQZXJpb2QgV2VlayBOb3Rlc10gSW52YWxpZCBcIlN0YXJ0IG9mIFBlcmlvZCAxXCIgZGF0ZSBmb3JtYXQ6IFwiJHtzdGFydFN0cmluZ31cIi4gYCArXG4gICAgICAgICAgICBgSXQgbXVzdCBiZSBZWVlZLU1NLURELiBGYWxsaW5nIGJhY2sgdG8gZGVmYXVsdCBkYXRlICR7ZGVmYXVsdFN0YXJ0U3RyaW5nfS5gXG4gICAgICAgICk7XG4gICAgICAgIHN0YXJ0TW9tZW50ID0gbW9tZW50KGRlZmF1bHRTdGFydFN0cmluZywgXCJZWVlZLU1NLUREXCIsIHRydWUpO1xuICAgIH1cblxuICAgIC8vIFVzZSBtb21lbnQncyBidWlsdC1pbiBkaWZmIG1ldGhvZCB0byBjb3JyZWN0bHkgY2FsY3VsYXRlIHRoZSBudW1iZXIgb2ZcbiAgICAvLyBjYWxlbmRhciBkYXlzLiBUaGlzIGF1dG9tYXRpY2FsbHkgaGFuZGxlcyBEYXlsaWdodCBTYXZpbmcgVGltZSBhbmQgb3RoZXIgb2Zmc2V0cy5cbiAgICBjb25zdCBkYXlzU2luY2VTdGFydCA9IG1vbWVudChkYXRlKS5zdGFydE9mKCdkYXknKS5kaWZmKHN0YXJ0TW9tZW50LnN0YXJ0T2YoJ2RheScpLCAnZGF5cycpO1xuICAgIGNvbnN0IHdlZWtOdW1iZXIgPSBNYXRoLmZsb29yKGRheXNTaW5jZVN0YXJ0IC8gNyk7XG4gICAgY29uc3QgcGVyaW9kSW5kZXggPSBNYXRoLmZsb29yKHdlZWtOdW1iZXIgLyA0KTtcbiAgICBjb25zdCBwZXJpb2QgPSAoKHBlcmlvZEluZGV4ICUgMTMpICsgMTMpICUgMTMgKyAxO1xuICAgIGNvbnN0IHdlZWsgPSAoKHdlZWtOdW1iZXIgJSA0KSArIDQpICUgNCArIDE7XG5cbiAgICByZXR1cm4geyBwZXJpb2QsIHdlZWssIHdlZWtTaW5jZVN0YXJ0OiB3ZWVrTnVtYmVyICsgMSB9O1xufVxuXG4vKipcbiAqIFBhcnNlcyBhIGZpbGUncyBjb250ZW50IHRvIGZpbmQgYWxsIHRhc2tzIGFuZCB0aGVpciBtZXRhZGF0YS5cbiAqIEBwYXJhbSB7VEZpbGV9IGZpbGUgVGhlIGZpbGUgdG8gcGFyc2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gY29udGVudCBUaGUgY29udGVudCBvZiB0aGUgZmlsZS5cbiAqIEByZXR1cm5zIHtBcnJheTxvYmplY3Q+fSBBbiBhcnJheSBvZiBzdHJ1Y3R1cmVkIHRhc2sgb2JqZWN0cy5cbiAqL1xuZnVuY3Rpb24gcGFyc2VUYXNrc0Zyb21GaWxlKGZpbGUsIGNvbnRlbnQpIHtcbiAgICBjb25zdCB0YXNrcyA9IFtdO1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG5cbiAgICBjb25zdCB0YXNrUmVnZXggPSAvXlxccyooPzotfFxcZCtcXC4pXFxzKlxcWyguKVxcXVxccyooLiopLztcbiAgICBjb25zdCBkdWVEYXRlUmVnZXggPSAv8J+ThVxccyooXFxkezR9LVxcZHsyfS1cXGR7Mn0pLztcbiAgICBjb25zdCBjb21wbGV0aW9uRGF0ZVJlZ2V4ID0gL+KchVxccyooXFxkezR9LVxcZHsyfS1cXGR7Mn0pLztcbiAgICBjb25zdCB0YWdSZWdleCA9IC8jKFthLXpBLVowLTlfXFwtXFwvXSspL2c7XG5cbiAgICBsaW5lcy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2godGFza1JlZ2V4KTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0dXMgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSBtYXRjaFsyXTtcbiAgICAgICAgICAgIGNvbnN0IGlzQ29tcGxldGVkID0gc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICd4JztcblxuICAgICAgICAgICAgY29uc3QgZHVlRGF0ZU1hdGNoID0gdGV4dC5tYXRjaChkdWVEYXRlUmVnZXgpO1xuICAgICAgICAgICAgY29uc3QgZHVlRGF0ZSA9IGR1ZURhdGVNYXRjaCA/IG1vbWVudChkdWVEYXRlTWF0Y2hbMV0sIFwiWVlZWS1NTS1ERFwiKS50b0RhdGUoKSA6IG51bGw7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25EYXRlTWF0Y2ggPSB0ZXh0Lm1hdGNoKGNvbXBsZXRpb25EYXRlUmVnZXgpO1xuICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbkRhdGUgPSBjb21wbGV0aW9uRGF0ZU1hdGNoID8gbW9tZW50KGNvbXBsZXRpb25EYXRlTWF0Y2hbMV0sIFwiWVlZWS1NTS1ERFwiKS50b0RhdGUoKSA6IG51bGw7XG5cbiAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSBBcnJheS5mcm9tKHRleHQubWF0Y2hBbGwodGFnUmVnZXgpKS5tYXAobSA9PiBtWzFdKTtcblxuICAgICAgICAgICAgbGV0IGRpc3BsYXlUZXh0ID0gdGV4dC50cmltKCk7XG4gICAgICAgICAgICAvLyBPcHRpb25hbGx5IGNsZWFuIHVwIHRoZSBkaXNwbGF5IHRleHRcbiAgICAgICAgICAgIGlmICghaXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5VGV4dCA9IGRpc3BsYXlUZXh0LnJlcGxhY2UoY29tcGxldGlvbkRhdGVSZWdleCwgJycpLnRyaW0oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGFza3MucHVzaCh7XG4gICAgICAgICAgICAgICAgdGV4dDogZGlzcGxheVRleHQsXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxUZXh0OiB0ZXh0LCAvLyBLZWVwIG9yaWdpbmFsIHRleHQgZm9yIG1vZGlmaWNhdGlvbnNcbiAgICAgICAgICAgICAgICBmaWxlLFxuICAgICAgICAgICAgICAgIGxpbmVOdW1iZXI6IGluZGV4LFxuICAgICAgICAgICAgICAgIGR1ZURhdGUsXG4gICAgICAgICAgICAgICAgdGFncyxcbiAgICAgICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgICAgICAgY29tcGxldGlvbkRhdGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRhc2tzO1xufVxuXG4vKipcbiAqIEZvcm1hdHMgYSBkYXRlIHRvIHNob3cgdGltZSBpZiBpdCdzIHRvZGF5LCBvdGhlcndpc2Ugc2hvd3MgdGhlIGZ1bGwgZGF0ZS5cbiAqIEBwYXJhbSB7RGF0ZX0gZGF0ZSBUaGUgZGF0ZSB0byBmb3JtYXQuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIGRhdGUgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBmb3JtYXREYXRlVGltZShkYXRlKSB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBpZiAoaXNTYW1lRGF5KGRhdGUsIG5vdykpIHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KCdISDptbScpO1xuICAgIHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KCdERC1NTS1ZWVlZJyk7XG59XG5cbi8vIFV0aWxpdHkgd3JhcHBlcnMgYXJvdW5kIG1vbWVudC5qcyBmb3IgY29uc2lzdGVudCBkYXRlIGhhbmRsaW5nLlxuZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlLCBmb3JtYXQpIHsgcmV0dXJuIG1vbWVudChkYXRlKS5mb3JtYXQoZm9ybWF0KTsgfVxuZnVuY3Rpb24gZm9ybWF0TW9udGhUaXRsZShkYXRlLCBmb3JtYXQpIHsgcmV0dXJuIG1vbWVudChkYXRlKS5mb3JtYXQoZm9ybWF0KTsgfVxuZnVuY3Rpb24gaXNTYW1lRGF5KGEsIGIpIHsgcmV0dXJuIG1vbWVudChhKS5pc1NhbWUoYiwgJ2RheScpOyB9XG5cblxuLyoqXG4gKiBUaGUgbWFpbiB2aWV3IGNsYXNzIGZvciB0aGUgcGx1Z2luLCBoYW5kbGluZyBhbGwgcmVuZGVyaW5nIGFuZCB1c2VyIGludGVyYWN0aW9uLlxuICovXG5jbGFzcyBQZXJpb2RNb250aFZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gICAgY29uc3RydWN0b3IobGVhZiwgcGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGxlYWYpO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5jYWxlbmRhckhlYWRlclJvd0VsID0gbnVsbDtcbiAgICAgICAgdGhpcy5waW5uZWRTb3J0T3JkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5waW5uZWROb3Rlc1NvcnRPcmRlcjtcblxuICAgICAgICAvL3B1bGwgZG93biB0byBmcmVzaFxuICAgICAgICB0aGlzLnRhc2tQdWxsU3RhcnRZID0gMDtcbiAgICAgICAgdGhpcy50YXNrUHVsbERpc3RhbmNlID0gMDtcbiAgICAgICAgdGhpcy5pc1Rhc2tQdWxsaW5nID0gZmFsc2U7XG5cblxuICAgICAgICAvLyAtLS0gU3RhdGUgTWFuYWdlbWVudCAtLS1cbiAgICAgICAgdGhpcy5kaXNwbGF5ZWRNb250aCA9IG5ldyBEYXRlKCk7IC8vIFRoZSBtb250aCBjdXJyZW50bHkgc2hvd24gaW4gdGhlIGNhbGVuZGFyLlxuICAgICAgICB0aGlzLmlzVmVydGljYWxWaWV3ID0gZmFsc2U7ICAgICAgLy8gVG9nZ2xlcyBiZXR3ZWVuIHNpbmdsZS1tb250aCBhbmQgdmVydGljYWwgc2Nyb2xsIHZpZXcuXG4gICAgICAgIHRoaXMuaXNQb3B1cExvY2tlZCA9IGZhbHNlOyAgICAgICAvLyBUcmFja3MgaWYgcG9wdXBzIGFyZSBnbG9iYWxseSBkaXNhYmxlZFxuICAgICAgICB0aGlzLmlzQ2FsZW5kYXJDb2xsYXBzZWQgPSBmYWxzZTsgLy8gVG9nZ2xlcyB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgY2FsZW5kYXIgZ3JpZC5cbiAgICAgICAgdGhpcy5pc1NjcmF0Y2hwYWRQcmV2aWV3ID0gZmFsc2U7IC8vIFRvZ2dsZXMgc2NyYXRjaHBhZCBiZXR3ZWVuIGVkaXQgYW5kIHByZXZpZXcgbW9kZS5cbiAgICAgICAgdGhpcy5hY3RpdmVUYWIgPSBudWxsOyAgICAgICAgICAgIC8vIFRyYWNrcyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHRhYiAoJ3NjcmF0Y2gnLCAnbm90ZXMnLCBldGMuKS5cbiAgICAgICAgdGhpcy5pc1Byb2dyYW1tYXRpY1Njcm9sbCA9IGZhbHNlOyAvLyBQcmV2ZW50cyBzY3JvbGwgZXZlbnQgbG9vcHMgZHVyaW5nIHByb2dyYW1tYXRpYyBzY3JvbGxpbmcuXG5cbiAgICAgICAgLy8gLS0tIFNlYXJjaCBhbmQgRGF0YSBTdGF0ZXMgLS0tXG4gICAgICAgIHRoaXMubm90ZXNWaWV3TW9kZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVzVmlld01vZGU7XG4gICAgICAgIHRoaXMubm90ZXNTZWFyY2hUZXJtID0gXCJcIjtcbiAgICAgICAgdGhpcy50YXNrc1NlYXJjaFRlcm0gPSBcIlwiO1xuICAgICAgICB0aGlzLnNjcmF0Y2hwYWRTZWFyY2hUZXJtID0gXCJcIjtcbiAgICAgICAgdGhpcy5hc3NldHNTZWFyY2hUZXJtID0gXCJcIjtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWROb3RlR3JvdXBzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29sbGFwc2VkTm90ZUdyb3VwcyB8fCB7fTtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWRUYXNrR3JvdXBzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29sbGFwc2VkVGFza0dyb3VwcyB8fCB7fTtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWRBc3NldEdyb3VwcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbGxhcHNlZEFzc2V0R3JvdXBzIHx8IHt9O1xuXG4gICAgICAgIC8vIC0tLSBDYWNoaW5nIGFuZCBEYXRhIE1hcHMgLS0tXG4gICAgICAgIC8vIFRoZXNlIG1hcHMgc3RvcmUgcHJlLXByb2Nlc3NlZCBkYXRhIHRvIGF2b2lkIHJlLXNjYW5uaW5nIHRoZSB2YXVsdCBvbiBldmVyeSByZW5kZXIuXG4gICAgICAgIHRoaXMubm90ZVRleHQgPSBcIlwiO1xuICAgICAgICB0aGlzLmFsbFRhc2tzID0gW107XG4gICAgICAgIHRoaXMuY3JlYXRlZE5vdGVzTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLm1vZGlmaWVkTm90ZXNNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuYXNzZXRDcmVhdGlvbk1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy50YXNrc0J5RGF0ZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5pY3NFdmVudHNCeURhdGUgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMucHJvY2Vzc2VkRXZlbnRTaWduYXR1cmVzID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzLnRhc2tDYWNoZSA9IG5ldyBNYXAoKTsgLy8gQ2FjaGVzIHRhc2sgY29udGVudCBvZiBmaWxlcyB0byBkZXRlY3QgY2hhbmdlcy5cbiAgICAgICAgdGhpcy5maWxlVG9UYXNrRGF0ZXMgPSBuZXcgTWFwKCk7IC8vIFRyYWNrcyB3aGljaCBkYXRlcyBhIGZpbGUgaGFzIHRhc2tzIGZvci4gPGZpbGVQYXRoLCBTZXQ8ZGF0ZUtleT4+XG4gICAgICAgIHRoaXMuaXNBc3NldHNHcmlkVmlldyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmFzc2V0c0RlZmF1bHRWaWV3ID09PSAnZ3JpZCc7XG4gICAgICAgIHRoaXMudW51c2VkQXNzZXRQYXRoc0NhY2hlID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzLmlzVW51c2VkQXNzZXRDYWNoZVZhbGlkID0gZmFsc2U7XG5cbiAgICAgICAgLy8gLS0tIFVJIGFuZCBFdmVudCBIYW5kbGluZyAtLS1cbiAgICAgICAgdGhpcy50b2RheUJ0biA9IG51bGw7XG4gICAgICAgIHRoaXMuc2NyYXRjaFdyYXBwZXJFbCA9IG51bGw7XG4gICAgICAgIHRoaXMuc2NyYXRjaHBhZFZpZXdUb2dnbGVCdG4gPSBudWxsO1xuICAgICAgICB0aGlzLmhvdmVyVGltZW91dCA9IG51bGw7XG4gICAgICAgIHRoaXMuaGlkZVRpbWVvdXQgPSBudWxsO1xuICAgICAgICB0aGlzLnBvcHVwRWwgPSBudWxsO1xuICAgICAgICB0aGlzLnRhc2tSZWZyZXNoRGVib3VuY2VUaW1lciA9IG51bGw7XG4gICAgICAgIHRoaXMubm90ZXNSZWZyZXNoRGVib3VuY2VUaW1lciA9IG51bGw7XG4gICAgICAgIHRoaXMuY2FsZW5kYXJSZWZyZXNoRGVib3VuY2VUaW1lciA9IG51bGw7XG4gICAgICAgIHRoaXMudGl0bGVVcGRhdGVUaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5leGlzdGluZ1dlZWtseU5vdGVzID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzLmRhaWx5UmVmcmVzaFRpbWVvdXQgPSBudWxsOyAvLyBUaW1lb3V0IHRvIHRyaWdnZXIgZGFpbHkgcmVmcmVzaCBhdCBtaWRuaWdodFxuICAgICAgICB0aGlzLnRoZW1lT2JzZXJ2ZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmxhc3RLbm93blRvZGF5ID0gbmV3IERhdGUoKTtcblxuICAgICAgICAvLyAtLS0gTW9iaWxlIEtleWJvYXJkIEhhbmRsaW5nIC0tLVxuICAgICAgICB0aGlzLmlzRWRpdGluZ01vYmlsZSA9IGZhbHNlO1xuXG4gICAgICAgIC8vIC0tLSBJY29uIE1hcHBpbmcgZm9yIFRhc2sgU3RhdHVzZXMgLS0tXG4gICAgICAgIC8vIE1hcHMgdGFzayBzdGF0dXMgc3ltYm9scyB0byBMdWNpZGUgaWNvbiBuYW1lcy5cbiAgICAgICAgdGhpcy50YXNrU3RhdHVzSWNvbk1hcCA9IHtcbiAgICAgICAgICAgIC8vIFN0YW5kYXJkIFRhc2tzXG4gICAgICAgICAgICAnLyc6ICdzbGFzaCcsICAgICAgIC8vIEluIFByb2dyZXNzXG4gICAgICAgICAgICAnLSc6ICdtaW51cycsICAgICAgIC8vIENhbmNlbGxlZFxuICAgICAgICAgICAgJz4nOiAnYXJyb3ctcmlnaHQnLCAvLyBGb3J3YXJkZWRcbiAgICAgICAgICAgICc8JzogJ2Fycm93LWxlZnQnLCAgLy8gU2NoZWR1bGluZ1xuICAgICAgICAgICAgLy8gRXh0ZW5kZWQgVGFza3MgZnJvbSB5b3VyIGxpc3RcbiAgICAgICAgICAgICc/JzogJ2hlbHAtY2lyY2xlJywgLy8gUXVlc3Rpb25cbiAgICAgICAgICAgICchJzogJ2ZsYW1lJywgICAgICAgLy8gSW1wb3J0YW50XG4gICAgICAgICAgICAnKic6ICdzdGFyJywgICAgICAgIC8vIFN0YXJcbiAgICAgICAgICAgICdcIic6ICdxdW90ZScsICAgICAgIC8vIFF1b3RlXG4gICAgICAgICAgICAnbCc6ICdtYXAtcGluJywgICAgIC8vIExvY2F0aW9uXG4gICAgICAgICAgICAnYic6ICdib29rbWFyaycsICAgIC8vIEJvb2ttYXJrXG4gICAgICAgICAgICAnaSc6ICdpbmZvJywgICAgICAgIC8vIEluZm9ybWF0aW9uXG4gICAgICAgICAgICAnUyc6ICdwaWdneS1iYW5rJywgIC8vIFNhdmluZ3NcbiAgICAgICAgICAgICdJJzogJ2xpZ2h0YnVsYicsICAgLy8gSWRlYVxuICAgICAgICAgICAgJ3AnOiAndGh1bWJzLXVwJywgICAvLyBQcm9zXG4gICAgICAgICAgICAnYyc6ICd0aHVtYnMtZG93bicsIC8vIENvbnNcbiAgICAgICAgICAgICdmJzogJ2ZsYW1lJywgICAgICAgLy8gRmlyZSAodXNpbmcgJ2ZsYW1lJyBhcyAnc2lyZW4nIGNhbiBiZSB0b28gc3Ryb25nKVxuICAgICAgICAgICAgJ2snOiAna2V5JywgICAgICAgICAvLyBLZXlcbiAgICAgICAgICAgICd3JzogJ3Ryb3BoeScsICAgICAgLy8gV2luXG4gICAgICAgICAgICAndSc6ICdhcnJvdy11cCcsICAgIC8vIFVwXG4gICAgICAgICAgICAnZCc6ICdhcnJvdy1kb3duJywgIC8vIERvd25cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBfcmVuZGVyVGFza1N5bWJvbChjaGVja2JveEVsLCB0YXNrKSB7XG4gICAgICAgIGNoZWNrYm94RWwuZW1wdHkoKTtcbiAgICAgICAgY2hlY2tib3hFbC5jbGFzc05hbWUgPSAndGFzay1jaGVja2JveC1zeW1ib2wnOyAvLyBSZXNldCBjbGFzc2VzXG5cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gdGFzay5zdGF0dXM7XG4gICAgICAgIGNvbnN0IGljb25OYW1lID0gdGhpcy50YXNrU3RhdHVzSWNvbk1hcFtzdGF0dXNdO1xuXG4gICAgICAgIC8vIENhc2UgMTogVGFzayBpcyBjb21wbGV0ZWRcbiAgICAgICAgaWYgKHN0YXR1cy50b0xvd2VyQ2FzZSgpID09PSAneCcpIHtcbiAgICAgICAgICAgIHNldEljb24oY2hlY2tib3hFbCwgJ2NoZWNrJyk7XG4gICAgICAgICAgICBjaGVja2JveEVsLmFkZENsYXNzKCdpcy1jb21wbGV0ZWQnKTtcbiAgICAgICAgICAgIGNoZWNrYm94RWwuc3R5bGUud2lkdGggPSAnMS4yNWVtJztcbiAgICAgICAgICAgIGNoZWNrYm94RWwuc3R5bGUuaGVpZ2h0ID0gJzEuMjVlbSc7XG5cbiAgICAgICAgICAgIGNoZWNrYm94RWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWludGVyYWN0aXZlLWFjY2VudCknO1xuICAgICAgICAgICAgY2hlY2tib3hFbC5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XG4gICAgICAgICAgICBjaGVja2JveEVsLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc1MCUnO1xuXG4gICAgICAgICAgICBjb25zdCBzdmdFbCA9IGNoZWNrYm94RWwucXVlcnlTZWxlY3RvcignLnN2Zy1pY29uJyk7XG4gICAgICAgICAgICBpZiAoc3ZnRWwpIHtcbiAgICAgICAgICAgICAgICBzdmdFbC5zdHlsZS53aWR0aCA9ICc3NSUnO1xuICAgICAgICAgICAgICAgIHN2Z0VsLnN0eWxlLmhlaWdodCA9ICc3NSUnO1xuICAgICAgICAgICAgICAgIHN2Z0VsLnN0eWxlLmZpbGwgPSAnbm9uZSc7IC8vIERvIG5vdCBmaWxsIHRoZSBzaGFwZVxuICAgICAgICAgICAgICAgIHN2Z0VsLnN0eWxlLnN0cm9rZSA9ICd2YXIoLS10ZXh0LW9uLWFjY2VudCknOyAvLyBVc2UgaGlnaC1jb250cmFzdCBjb2xvciBmb3IgdGhlIGxpbmVcbiAgICAgICAgICAgICAgICBzdmdFbC5zdHlsZS5zdHJva2VXaWR0aCA9ICczcHgnOyAvLyBNYWtlIHRoZSBsaW5lIHRoaWNrIGFuZCBjbGVhclxuICAgICAgICAgICAgICAgIHN2Z0VsLnN0eWxlLmNvbG9yID0gJ3Vuc2V0JzsgLy8gVW5zZXQgY29sb3IgdG8gcHJldmVudCBjb25mbGljdHNcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2FzZSAyOiBUYXNrIGhhcyBhIGN1c3RvbSBpY29uXG4gICAgICAgIH0gZWxzZSBpZiAoaWNvbk5hbWUpIHtcbiAgICAgICAgICAgIHNldEljb24oY2hlY2tib3hFbCwgaWNvbk5hbWUpO1xuICAgICAgICAgICAgY29uc3QgY29sb3IgPSB0aGlzLmdldEljb25Db2xvcihpY29uTmFtZSk7XG4gICAgICAgICAgICBjb25zdCBzdmdFbCA9IGNoZWNrYm94RWwucXVlcnlTZWxlY3RvcignLnN2Zy1pY29uJyk7XG4gICAgICAgICAgICBpZiAoc3ZnRWwpIHtcbiAgICAgICAgICAgICAgICBzdmdFbC5zdHlsZS5jb2xvciA9IGNvbG9yO1xuICAgICAgICAgICAgICAgIHN2Z0VsLnN0eWxlLmZpbGwgPSAnY3VycmVudENvbG9yJztcbiAgICAgICAgICAgICAgICBzdmdFbC5zdHlsZS5zdHJva2UgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGVja2JveEVsLnN0eWxlLndpZHRoID0gJzEuMjVlbSc7XG4gICAgICAgICAgICBjaGVja2JveEVsLnN0eWxlLmhlaWdodCA9ICcxLjI1ZW0nO1xuICAgICAgICAgICAgY2hlY2tib3hFbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xuICAgICAgICAgICAgY2hlY2tib3hFbC5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XG4gICAgICAgICAgICBjaGVja2JveEVsLnN0eWxlLmJvcmRlclJhZGl1cyA9ICcwJztcblxuICAgICAgICAgICAgLy8gQ2FzZSAzOiBEZWZhdWx0IHRhc2sgKGUuZy4sIGluY29tcGxldGUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGVja2JveEVsLnNldFRleHQoc3RhdHVzLnRyaW0oKSB8fCAnICcpO1xuICAgICAgICAgICAgY2hlY2tib3hFbC5zdHlsZS53aWR0aCA9ICcxLjE1ZW0nO1xuICAgICAgICAgICAgY2hlY2tib3hFbC5zdHlsZS5oZWlnaHQgPSAnMS4xNWVtJztcbiAgICAgICAgICAgIGNoZWNrYm94RWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3RyYW5zcGFyZW50JztcbiAgICAgICAgICAgIGNoZWNrYm94RWwuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1ub3JtYWwpJztcbiAgICAgICAgICAgIGNoZWNrYm94RWwuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzUwJSc7XG4gICAgICAgICAgICBjaGVja2JveEVsLnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgdmFyKC0tdGV4dC1mYWludCknO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0dXBSZW9yZGVyTW9kZSgpIHtcbiAgICAgICAgY29uc3QgaXNNYWMgPSBQbGF0Zm9ybS5pc01hY09TO1xuICAgICAgICBjb25zdCBtb2RpZmllcktleU5hbWUgPSBpc01hYyA/ICdPcHRpb24nIDogJ0N0cmwnO1xuICAgICAgICBsZXQgaXNSZW9yZGVyTW9kZSA9IGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZSkgPT4ge1xuICAgICAgICAgICAgLy8gVXNlIEFsdCBrZXkgKE9wdGlvbiBvbiBNYWMpIG9yIEN0cmwga2V5IChDb250cm9sIG9uIFdpbmRvd3MpXG4gICAgICAgICAgICBjb25zdCBpc01vZGlmaWVyUHJlc3NlZCA9IGlzTWFjID8gZS5hbHRLZXkgOiBlLmN0cmxLZXk7XG5cbiAgICAgICAgICAgIC8vIE9ubHkgYWN0aXZhdGUgaWYgd2UncmUgaW4gcGlubmVkIG5vdGVzIHZpZXcgQU5EIGN1c3RvbSBzb3J0IGlzIHNlbGVjdGVkXG4gICAgICAgICAgICBpZiAoaXNNb2RpZmllclByZXNzZWQgJiYgIWlzUmVvcmRlck1vZGUgJiZcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGVzVmlld01vZGUgPT09ICdwaW5uZWQnICYmXG4gICAgICAgICAgICAgICAgdGhpcy5waW5uZWRTb3J0T3JkZXIgPT09ICdjdXN0b20nKSB7XG5cbiAgICAgICAgICAgICAgICBpc1Jlb3JkZXJNb2RlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmFkZENsYXNzKCdwaW5uZWQtbm90ZXMtcmVvcmRlci1tb2RlJyk7XG4gICAgICAgICAgICAgICAgLy9uZXcgTm90aWNlKGBSZW9yZGVyIG1vZGUgYWN0aXZlICgke21vZGlmaWVyS2V5TmFtZX0pIC0gZHJhZyB0byByZWFycmFuZ2VgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNNb2RpZmllclByZXNzZWQgJiYgIWlzUmVvcmRlck1vZGUgJiZcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGVzVmlld01vZGUgPT09ICdwaW5uZWQnICYmXG4gICAgICAgICAgICAgICAgdGhpcy5waW5uZWRTb3J0T3JkZXIgIT09ICdjdXN0b20nKSB7XG4gICAgICAgICAgICAgICAgLy8gU2hvdyBtZXNzYWdlIGlmIHVzZXIgdHJpZXMgdG8gYWN0aXZhdGUgcmVvcmRlciBtb2RlIHdoZW4gbm90IGluIGN1c3RvbSBzb3J0XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgU3dpdGNoIHRvIEN1c3RvbSBzb3J0IG9yZGVyIHRvIGVuYWJsZSBkcmFnIHJlb3JkZXJpbmdgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBoYW5kbGVLZXlVcCA9IChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB3YXNNb2RpZmllclJlbGVhc2VkID0gaXNNYWMgPyAhZS5hbHRLZXkgOiAhZS5jdHJsS2V5O1xuXG4gICAgICAgICAgICBpZiAod2FzTW9kaWZpZXJSZWxlYXNlZCAmJiBpc1Jlb3JkZXJNb2RlKSB7XG4gICAgICAgICAgICAgICAgaXNSZW9yZGVyTW9kZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwucmVtb3ZlQ2xhc3MoJ3Bpbm5lZC1ub3Rlcy1yZW9yZGVyLW1vZGUnKTtcbiAgICAgICAgICAgICAgICAvL25ldyBOb3RpY2UoJ1Jlb3JkZXIgbW9kZSBkaXNhYmxlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFJlZ2lzdGVyIHRoZSBsaXN0ZW5lcnMgdXNpbmcgT2JzaWRpYW4ncyBBUEkgZm9yIHByb3BlciBjbGVhbnVwXG4gICAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAna2V5dXAnLCBoYW5kbGVLZXlVcCk7XG4gICAgfVxuXG5cblxuICAgIGdldEljb25Db2xvcihpY29uTmFtZSkge1xuICAgICAgICBzd2l0Y2ggKGljb25OYW1lKSB7XG4gICAgICAgICAgICBjYXNlICdtYXAtcGluJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3ZhcigtLXRleHQtYWNjZW50KSc7IC8vIFJlZFxuICAgICAgICAgICAgY2FzZSAnZmxhbWUnOlxuICAgICAgICAgICAgICAgIHJldHVybiAndmFyKC0tdGV4dC13YXJuaW5nKSc7IC8vIE9yYW5nZVxuICAgICAgICAgICAgY2FzZSAnc2xhc2gnOlxuICAgICAgICAgICAgY2FzZSAncGlnZ3ktYmFuayc6XG4gICAgICAgICAgICBjYXNlICd0aHVtYnMtdXAnOlxuICAgICAgICAgICAgY2FzZSAndHJvcGh5JzpcbiAgICAgICAgICAgIGNhc2UgJ2Fycm93LXVwJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3ZhcigtLXRleHQtc3VjY2VzcyknOyAvLyBHcmVlblxuICAgICAgICAgICAgY2FzZSAndGh1bWJzLWRvd24nOlxuICAgICAgICAgICAgY2FzZSAnYXJyb3ctZG93bic6XG4gICAgICAgICAgICAgICAgcmV0dXJuICd2YXIoLS10ZXh0LWVycm9yKSc7IC8vIE11dGVkIFJlZFxuICAgICAgICAgICAgY2FzZSAnc3Rhcic6XG4gICAgICAgICAgICBjYXNlICdsaWdodGJ1bGInOlxuICAgICAgICAgICAgICAgIHJldHVybiAndmFyKC0tY29sb3IteWVsbG93KSc7IC8vIFllbGxvd1xuICAgICAgICAgICAgY2FzZSAnYm9va21hcmsnOlxuICAgICAgICAgICAgY2FzZSAnaW5mbyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuICd2YXIoLS1jb2xvci1ibHVlKSc7IC8vIEJsdWVcbiAgICAgICAgICAgIGNhc2UgJ2hlbHAtY2lyY2xlJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3ZhcigtLWNvbG9yLWN5YW4pJzsgLy8gQ3lhblxuICAgICAgICAgICAgY2FzZSAna2V5JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2dvbGRlbnJvZCc7IC8vIEdvbGRcbiAgICAgICAgICAgIGNhc2UgJ21pbnVzJzpcbiAgICAgICAgICAgIGNhc2UgJ3F1b3RlJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3ZhcigtLXRleHQtbXV0ZWQpJzsgLy8gR3JleVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3ZhcigtLXRleHQtbm9ybWFsKSc7IC8vIERlZmF1bHQgY29sb3IgZm9yIGFycm93cywgZXRjLlxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgaGFuZGxlRmlsZUNsaWNrKGZpbGUsIGV2ZW50KSB7XG4gICAgICAgIC8vIFRoZSBTaGlmdCBrZXkgaXMgdGhlIHVsdGltYXRlIG92ZXJyaWRlLiBJZiBpdCdzIHByZXNzZWQsIGFsd2F5cyBvcGVuIGluIGEgbmV3IGxlYWYuXG4gICAgICAgIGlmIChldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChmaWxlLnBhdGgsICcnLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLSBJZiBTaGlmdCBpcyBOT1QgcHJlc3NlZCwgcHJvY2VlZCB3aXRoIG5vcm1hbCBsb2dpYyAtLS1cbiAgICAgICAgY29uc3QgaXNBc3NldCA9IGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkgIT09ICdtZCc7XG5cbiAgICAgICAgaWYgKGlzQXNzZXQpIHtcbiAgICAgICAgICAgIC8vIEl0J3MgYW4gYXNzZXQsIHNvIHJlc3BlY3QgdGhlIHVzZXIncyBkZWZhdWx0IHNldHRpbmcgZm9yIGFzc2V0cy5cbiAgICAgICAgICAgIGNvbnN0IG9wZW5Jbk5ld1RhYiA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmFzc2V0c09wZW5BY3Rpb24gPT09ICduZXctdGFiJztcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQoZmlsZS5wYXRoLCAnJywgb3BlbkluTmV3VGFiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEl0J3MgYSBub3RlIGZpbGUuIEhlcmUgd2UgbXVzdCBjaGVjayBmb3IgYW4gZXhpc3Rpbmcgb3BlbiBsZWFmLlxuICAgICAgICAgICAgY29uc3QgbWFya2Rvd25MZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFwibWFya2Rvd25cIik7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0xlYWYgPSBtYXJrZG93bkxlYXZlcy5maW5kKGxlYWYgPT4gbGVhZi52aWV3LmZpbGU/LnBhdGggPT09IGZpbGUucGF0aCk7XG5cbiAgICAgICAgICAgIGlmIChleGlzdGluZ0xlYWYpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgbm90ZSBpcyBhbHJlYWR5IG9wZW4sIHNvIGp1c3QgZm9jdXMgb24gdGhhdCBsZWFmLlxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGV4aXN0aW5nTGVhZik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBub3RlIGlzIG5vdCBvcGVuLCBzbyByZXNwZWN0IHRoZSB1c2VyJ3MgZGVmYXVsdCBzZXR0aW5nIGZvciBub3Rlcy5cbiAgICAgICAgICAgICAgICBjb25zdCBvcGVuSW5OZXdUYWIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub3Rlc09wZW5BY3Rpb24gPT09ICduZXctdGFiJztcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihvcGVuSW5OZXdUYWIpLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyBhIHNpbmdsZSBub3RlIGl0ZW0gcm93IGluIGEgZ2l2ZW4gY29udGFpbmVyLlxuICAgICAqIEBwYXJhbSB7VEZpbGV9IGZpbGUgVGhlIG5vdGUgZmlsZSB0byByZW5kZXIuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIFRoZSBwYXJlbnQgZWxlbWVudCB0byBhcHBlbmQgdGhlIHJvdyB0by5cbiAgICAgKi9cbiAgICByZW5kZXJOb3RlSXRlbShmaWxlLCBjb250YWluZXIpIHtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcbiAgICAgICAgY29uc3Qgc2VhcmNoSW5wdXRFbCA9IHRoaXMubm90ZXNTZWFyY2hJbnB1dEVsO1xuXG4gICAgICAgIGNvbnN0IHJvdyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLXJvdycgfSk7XG4gICAgICAgIHJvdy5kcmFnZ2FibGUgPSB0cnVlO1xuICAgICAgICByb3cuZGF0YXNldC5maWxlUGF0aCA9IGZpbGUucGF0aDtcblxuICAgICAgICBjb25zdCBkcmFnSGFuZGxlID0gcm93LmNyZWF0ZURpdih7IGNsczogJ2RyYWctaGFuZGxlJyB9KTtcbiAgICAgICAgc2V0SWNvbihkcmFnSGFuZGxlLCAnZ3JpcC12ZXJ0aWNhbCcpO1xuXG4gICAgICAgIGNvbnN0IHRpdGxlV3JhcHBlciA9IHJvdy5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLXRpdGxlLXdyYXBwZXInIH0pO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5zaG93Tm90ZVRvb2x0aXBzKSB7XG4gICAgICAgICAgICBjb25zdCBjdGltZSA9IG5ldyBEYXRlKGZpbGUuc3RhdC5jdGltZSkudG9Mb2NhbGVTdHJpbmcoJ2VuLUdCJywgeyBkYXRlU3R5bGU6ICdzaG9ydCcsIHRpbWVTdHlsZTogJ3Nob3J0JyB9KTtcbiAgICAgICAgICAgIGNvbnN0IG10aW1lID0gbmV3IERhdGUoZmlsZS5zdGF0Lm10aW1lKS50b0xvY2FsZVN0cmluZygnZW4tR0InLCB7IGRhdGVTdHlsZTogJ3Nob3J0JywgdGltZVN0eWxlOiAnc2hvcnQnIH0pO1xuICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IGAkeyhmaWxlLnN0YXQuc2l6ZSAvIDEwMjQpLnRvRml4ZWQoMil9IEtCYDtcbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBmaWxlLnBhdGg7XG4gICAgICAgICAgICBjb25zdCB0YWdzQ2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8udGFncztcbiAgICAgICAgICAgIGxldCB0YWdzID0gJ05vIHRhZ3MnO1xuICAgICAgICAgICAgaWYgKHRhZ3NDYWNoZSAmJiB0YWdzQ2FjaGUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRhZ3MgPSBbLi4ubmV3IFNldCh0YWdzQ2FjaGUubWFwKHQgPT4gdC50YWcpKV0uam9pbignLCAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRpdGxlV3JhcHBlci5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBgQ3JlYXRlZDogJHtjdGltZX1cXG5Nb2RpZmllZDogJHttdGltZX1cXG5TaXplOiAke3NpemV9XFxuUGF0aDogJHtwYXRofVxcblRhZ3M6ICR7dGFnc31gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZXR0aW5ncy5zaG93Tm90ZVN0YXR1c0RvdHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGRvdCA9IHRpdGxlV3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLXN0YXR1cy1kb3QnIH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEYWlseU5vdGUoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICBkb3Quc3R5bGUuYmFja2dyb3VuZENvbG9yID0gc2V0dGluZ3MuZGFpbHlOb3RlRG90Q29sb3I7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNXZWVrbHlOb3RlKGZpbGUpKSB7XG4gICAgICAgICAgICAgICAgZG90LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHNldHRpbmdzLndlZWtseU5vdGVEb3RDb2xvcjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZG90LmFkZENsYXNzKGlzU2FtZURheShuZXcgRGF0ZShmaWxlLnN0YXQuY3RpbWUpLCBuZXcgRGF0ZShmaWxlLnN0YXQubXRpbWUpKSA/ICdub3RlLXN0YXR1cy1kb3QtY3JlYXRlZCcgOiAnbm90ZS1zdGF0dXMtZG90LW1vZGlmaWVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0aXRsZVBhdGhXcmFwcGVyID0gdGl0bGVXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogJ25vdGUtdGl0bGUtcGF0aC13cmFwcGVyJyB9KTtcbiAgICAgICAgdGl0bGVQYXRoV3JhcHBlci5jcmVhdGVEaXYoeyB0ZXh0OiBmaWxlLmJhc2VuYW1lLCBjbHM6ICdub3RlLXRpdGxlJyB9KTtcbiAgICAgICAgaWYgKGZpbGUucGFyZW50ICYmIGZpbGUucGFyZW50LnBhdGggIT09ICcvJykge1xuICAgICAgICAgICAgdGl0bGVQYXRoV3JhcHBlci5jcmVhdGVEaXYoeyB0ZXh0OiBmaWxlLnBhcmVudC5wYXRoLCBjbHM6ICdub3RlLXBhdGgnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcm93LmNyZWF0ZURpdih7IHRleHQ6IGZvcm1hdERhdGUobmV3IERhdGUoZmlsZS5zdGF0Lm10aW1lKSksIGNsczogJ25vdGUtbW9kLWRhdGUnIH0pO1xuXG4gICAgICAgIGxldCBpc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgIGxldCBkcmFnU3RhcnRYID0gMDtcbiAgICAgICAgbGV0IGRyYWdTdGFydFkgPSAwO1xuXG4gICAgICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSkgPT4ge1xuICAgICAgICAgICAgZHJhZ1N0YXJ0WCA9IGUuY2xpZW50WDtcbiAgICAgICAgICAgIGRyYWdTdGFydFkgPSBlLmNsaWVudFk7XG4gICAgICAgICAgICBpc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgaXNEcmFnZ2luZyA9IHRydWU7XG4gICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSAnbW92ZSc7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJvdy5hZGRDbGFzcygnZHJhZ2dpbmcnKSwgMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgcm93LnJlbW92ZUNsYXNzKCdkcmFnZ2luZycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVc2UgYSBicmllZiB0aW1lb3V0IHRvIGVuc3VyZSB0aGUgY2xpY2sgZXZlbnQgaGFzIGEgY2hhbmNlIHRvIGJlIGlnbm9yZWQuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgaXNEcmFnZ2luZyA9IGZhbHNlOyB9LCA1MCk7XG5cbiAgICAgICAgICAgIC8vIFNhdmUgdGhlIG5ldyBvcmRlciBvZiB0aGUgaXRlbXMgaW4gdGhlIGxpc3QuXG4gICAgICAgICAgICAvLyBUaGUgYGNvbnRhaW5lcmAgaXMgdGhlIGxpc3RXcmFwcGVyLCB3aGljaCBob2xkcyBhbGwgdGhlIG5vdGUgcm93cy5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVBpbm5lZE9yZGVyKGNvbnRhaW5lcik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBjb25zdCBkcmFnZ2luZyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZHJhZ2dpbmcnKTtcbiAgICAgICAgICAgIGlmIChkcmFnZ2luZyAmJiBkcmFnZ2luZyAhPT0gcm93KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHJvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0FmdGVyID0gZS5jbGllbnRZID4gcmVjdC50b3AgKyByZWN0LmhlaWdodCAvIDI7XG4gICAgICAgICAgICAgICAgaWYgKGlzQWZ0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGRyYWdnaW5nLCByb3cubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkcmFnZ2luZywgcm93KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE1PRElGSUNBVElPTjogVGhlICdkcm9wJyBldmVudCBsaXN0ZW5lciB0aGF0IHdhcyBoZXJlIGhhcyBiZWVuIHJlbW92ZWQuXG4gICAgICAgIC8vIFRoZSBuZXcgaGFuZGxlciBvbiB0aGUgcGFyZW50IGNvbnRhaW5lciBpbiBgcG9wdWxhdGVOb3Rlc2Agbm93IG1hbmFnZXMgc2F2aW5nLlxuXG4gICAgICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNEcmFnZ2luZykge1xuICAgICAgICAgICAgICAgIGlzRHJhZ2dpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLmRyYWctaGFuZGxlJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUZpbGVDbGljayhmaWxlLCBlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRLZXlkb3duTGlzdGVuZXJzKHJvdywgc2VhcmNoSW5wdXRFbCk7XG4gICAgICAgIHRoaXMuYWRkRmlsZUNvbnRleHRNZW51KHJvdywgZmlsZSwgdGhpcy5wb3B1bGF0ZU5vdGVzLmJpbmQodGhpcykpO1xuICAgIH1cblxuXG4gICAgYXN5bmMgc2F2ZVBpbm5lZE9yZGVyKGNvbnRhaW5lcikge1xuICAgICAgICAvLyBBZGQgdGhpcyBsaW5lIGZvciBkZWJ1Z2dpbmcuIFlvdSBzaG91bGQgc2VlIHRoaXMgbm90aWNlIHBvcCB1cC5cbiAgICAgICAgLy9uZXcgTm90aWNlKCdTYXZpbmcgY3VzdG9tIG9yZGVyLi4uJyk7XG5cbiAgICAgICAgY29uc3Qgbm90ZVJvd3MgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLm5vdGUtcm93Jyk7XG4gICAgICAgIGNvbnN0IG5ld09yZGVyID0gQXJyYXkuZnJvbShub3RlUm93cykubWFwKHJvdyA9PiByb3cuZGF0YXNldC5maWxlUGF0aCk7XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSBzZXR0aW5ncyB3aXRoIHRoZSBuZXcgb3JkZXJcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucGlubmVkTm90ZXNDdXN0b21PcmRlciA9IG5ld09yZGVyO1xuICAgICAgICBcbiAgICAgICAgLy8gU2V0IHRoZSBhY3RpdmUgc29ydCBtb2RlIHRvICdjdXN0b20nIHNpbmNlIGEgbWFudWFsIHNvcnQganVzdCBoYXBwZW5lZFxuICAgICAgICB0aGlzLnBpbm5lZFNvcnRPcmRlciA9ICdjdXN0b20nO1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIFxuICAgICAgICAvL25ldyBOb3RpY2UoJ0N1c3RvbSBwaW5uZWQgb3JkZXIgc2F2ZWQhJyk7XG5cbiAgICAgICAgLy8gUmVmcmVzaCB0aGUgdmlldyB0byBlbnN1cmUgdGhlIGhlYWRlcidzIHNvcnQgaW5kaWNhdG9yIGlzIHVwZGF0ZWRcbiAgICAgICAgYXdhaXQgdGhpcy5wb3B1bGF0ZU5vdGVzKCk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBGb3JtYXRzIGEgbGlzdCBvZiBjYWxlbmRhciBldmVudHMgaW50byBhIG1hcmtkb3duIHN0cmluZyBmb3IgdGVtcGxhdGUgaW5zZXJ0aW9uLlxuICAgICAqIEBwYXJhbSB7LX0gZXZlbnRzIFxuICAgICAqIEByZXR1cm5zIFxuICAgICAqL1xuICAgIGZvcm1hdEV2ZW50c0ZvclRlbXBsYXRlKGV2ZW50cykge1xuICAgICAgICBpZiAoIWV2ZW50cyB8fCBldmVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldHJpZXZlIHRoZSB1c2VyLWRlZmluZWQgZm9ybWF0IGZyb20gc2V0dGluZ3NcbiAgICAgICAgY29uc3QgZm9ybWF0U3RyaW5nID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FsZW5kYXJFdmVudHNGb3JtYXQgfHwgJy0ge3tzdGFydFRpbWV9fSAtIHt7ZW5kVGltZX19OiB7e3N1bW1hcnl9fSc7XG5cbiAgICAgICAgLy8gU29ydCBldmVudHNcbiAgICAgICAgZXZlbnRzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGlmIChhLmlzQWxsRGF5ICYmICFiLmlzQWxsRGF5KSByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAoIWEuaXNBbGxEYXkgJiYgYi5pc0FsbERheSkgcmV0dXJuIDE7XG4gICAgICAgICAgICBpZiAoYS5pc0FsbERheSAmJiBiLmlzQWxsRGF5KSByZXR1cm4gYS5zdW1tYXJ5LmxvY2FsZUNvbXBhcmUoYi5zdW1tYXJ5KTtcbiAgICAgICAgICAgIGlmICghYS5zdGFydFRpbWUgfHwgIWIuc3RhcnRUaW1lKSByZXR1cm4gMDtcbiAgICAgICAgICAgIHJldHVybiBhLnN0YXJ0VGltZS5sb2NhbGVDb21wYXJlKGIuc3RhcnRUaW1lKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gTWFwIGVhY2ggZXZlbnQgdG8gaXRzIGZvcm1hdHRlZCBzdHJpbmdcbiAgICAgICAgY29uc3QgZXZlbnRTdHJpbmdzID0gZXZlbnRzLm1hcChldmVudCA9PiB7XG4gICAgICAgICAgICBsZXQgZmluYWxTdHJpbmc7XG5cbiAgICAgICAgICAgIGlmIChldmVudC5pc0FsbERheSkge1xuICAgICAgICAgICAgICAgIC8vIC0tLSBUSEUgTkVXIExPR0lDIC0tLVxuICAgICAgICAgICAgICAgIC8vIEZvciBhbGwtZGF5IGV2ZW50cywgcmVwbGFjZSB0aGUgdGltZSBwbGFjZWhvbGRlcnMgd2l0aCBcIkFsbC1kYXlcIlxuICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVnZXggbG9va3MgZm9yIHt7c3RhcnRUaW1lfX0sIG9wdGlvbmFsIHdoaXRlc3BhY2UsIGEgc2VwYXJhdG9yLCBvcHRpb25hbCB3aGl0ZXNwYWNlLCBhbmQge3tlbmRUaW1lfX1cbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lUGxhY2Vob2xkZXJSZWdleCA9IC97e1xccypzdGFydFRpbWVcXHMqfX0uKnt7XFxzKmVuZFRpbWVcXHMqfX0vO1xuXG4gICAgICAgICAgICAgICAgZmluYWxTdHJpbmcgPSBmb3JtYXRTdHJpbmcucmVwbGFjZSh0aW1lUGxhY2Vob2xkZXJSZWdleCwgJ0FsbC1kYXknKTtcblxuICAgICAgICAgICAgICAgIC8vIE5vdywgcmVwbGFjZSB0aGUgc3VtbWFyeSBhcyB1c3VhbFxuICAgICAgICAgICAgICAgIGZpbmFsU3RyaW5nID0gZmluYWxTdHJpbmcucmVwbGFjZSgve3tzdW1tYXJ5fX0vZywgZXZlbnQuc3VtbWFyeSB8fCAnJyk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRm9yIHRpbWVkIGV2ZW50cywgdXNlIHRoZSBvcmlnaW5hbCBsb2dpY1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IGV2ZW50LnN0YXJ0VGltZSB8fCAnJztcbiAgICAgICAgICAgICAgICBjb25zdCBlbmRUaW1lID0gZXZlbnQuZW5kVGltZSB8fCAnJztcblxuICAgICAgICAgICAgICAgIGZpbmFsU3RyaW5nID0gZm9ybWF0U3RyaW5nXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC97e3N0YXJ0VGltZX19L2csIHN0YXJ0VGltZSlcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL3t7ZW5kVGltZX19L2csIGVuZFRpbWUpXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC97e3N1bW1hcnl9fS9nLCBldmVudC5zdW1tYXJ5IHx8ICcnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVHJpbSBhbnkgbGVmdG92ZXIgd2hpdGVzcGFjZSBvciBkYW5nbGluZyBzZXBhcmF0b3JzXG4gICAgICAgICAgICByZXR1cm4gZmluYWxTdHJpbmcucmVwbGFjZSgvXFxzKjpcXHMqJC8sICcnKS5yZXBsYWNlKC9cXHMqLVxccyokLywgJycpLnRyaW0oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gSm9pbiB0aGUgYXJyYXkgb2YgZXZlbnQgc3RyaW5ncyB3aXRoIGEgZG91YmxlIG5ld2xpbmVcbiAgICAgICAgY29uc3QgZXZlbnRCb2R5ID0gZXZlbnRTdHJpbmdzLmpvaW4oJ1xcblxcbicpO1xuXG4gICAgICAgIC8vIENvbnN0cnVjdCB0aGUgZmluYWwgb3V0cHV0XG4gICAgICAgIHJldHVybiBldmVudEJvZHk7XG4gICAgfVxuXG5cblxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhIHJlZnJlc2ggdG8gb2NjdXIgYXQgdGhlIG5leHQgbWlkbmlnaHQuXG4gICAgICovXG4gICAgc2NoZWR1bGVEYWlseVJlZnJlc2goKSB7XG4gICAgICAgIC8vIENsZWFyIGFueSBleGlzdGluZyB0aW1lciB0byBhdm9pZCBkdXBsaWNhdGVzXG4gICAgICAgIGlmICh0aGlzLmRhaWx5UmVmcmVzaFRpbWVvdXQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRhaWx5UmVmcmVzaFRpbWVvdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgbm93ID0gbW9tZW50KCk7XG4gICAgICAgIGNvbnN0IGVuZE9mRGF5ID0gbW9tZW50KCkuZW5kT2YoJ2RheScpO1xuICAgICAgICAvLyBDYWxjdWxhdGUgbWlsbGlzZWNvbmRzIHVudGlsIHRoZSBlbmQgb2YgdG9kYXksIHBsdXMgb25lIHRvIHRpY2sgb3ZlciB0byB0aGUgbmV3IGRheVxuICAgICAgICBjb25zdCBtc1VudGlsTWlkbmlnaHQgPSBlbmRPZkRheS5kaWZmKG5vdykgKyAxO1xuXG4gICAgICAgIHRoaXMuZGFpbHlSZWZyZXNoVGltZW91dCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIk1pZG5pZ2h0IHJlZnJlc2g6IFVwZGF0aW5nIHRhc2sgdmlldyBhbmQgY2FsZW5kYXIuXCIpO1xuXG4gICAgICAgICAgICAvLyBSZS1jYWxjdWxhdGUgYWxsIHRhc2sgZHVlIGRhdGVzIHJlbGF0aXZlIHRvIHRoZSBuZXcgXCJ0b2RheVwiXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkVGFza3NCeURhdGVNYXAoKTtcblxuICAgICAgICAgICAgLy8gUmUtcmVuZGVyIHRoZSBjYWxlbmRhciB0byB1cGRhdGUgaGVhdG1hcHMsIGJhZGdlcywgYW5kIHRvZGF5J3MgaGlnaGxpZ2h0XG4gICAgICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSB1c2VyIGlzIGN1cnJlbnRseSBsb29raW5nIGF0IHRoZSB0YXNrcyB0YWIsIHJlZnJlc2ggaXRzIHZpZXdcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0gJ3Rhc2tzJykge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucG9wdWxhdGVUYXNrcygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJTVBPUlRBTlQ6IFNjaGVkdWxlIHRoZSBuZXh0IHJlZnJlc2ggZm9yIHRoZSBmb2xsb3dpbmcgZGF5XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlRGFpbHlSZWZyZXNoKCk7XG5cbiAgICAgICAgfSwgbXNVbnRpbE1pZG5pZ2h0KTtcbiAgICB9XG5cbiAgICBoYW5kbGVWaWV3cG9ydFJlc2l6ZSgpIHtcbiAgICAgICAgLy8gVGhpcyBsb2dpYyBzaG91bGQgb25seSBydW4gb24gbW9iaWxlXG4gICAgICAgIGlmICghdGhpcy5hcHAuaXNNb2JpbGUpIHJldHVybjtcblxuICAgICAgICAvLyBBIHRocmVzaG9sZCBvZiAyMDBweCBpcyBhIHNhZmUgYmV0IHRvIGFzc3VtZSB0aGUga2V5Ym9hcmQgaXMgb3Blbi5cbiAgICAgICAgLy8gV2UgY29tcGFyZSB0aGUgdG90YWwgd2luZG93IGhlaWdodCB3aXRoIHRoZSBjdXJyZW50bHkgdmlzaWJsZSBhcmVhJ3MgaGVpZ2h0LlxuICAgICAgICBjb25zdCBrZXlib2FyZFZpc2libGUgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSB3aW5kb3cudmlzdWFsVmlld3BvcnQuaGVpZ2h0ID4gMjAwO1xuXG4gICAgICAgIC8vIFRvZ2dsZSB0aGUgY2xhc3Mgb24gdGhlIG1haW4gcGx1Z2luIGNvbnRhaW5lclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC50b2dnbGUoJ2tleWJvYXJkLXZpc2libGUnLCBrZXlib2FyZFZpc2libGUpO1xuICAgIH1cblxuICAgIGFzeW5jIGFuaW1hdGVUYXNrR3JvdXAodGFza0xpc3RXcmFwcGVyLCBleHBhbmQpIHtcbiAgICAgICAgLy8gQ2FuY2VsIGFueSBvbmdvaW5nIGFuaW1hdGlvbiBvbiB0aGlzIGVsZW1lbnRcbiAgICAgICAgaWYgKHRhc2tMaXN0V3JhcHBlci5hbmltYXRpb24pIHtcbiAgICAgICAgICAgIHRhc2tMaXN0V3JhcHBlci5hbmltYXRpb24uY2FuY2VsKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXhwYW5kKSB7XG4gICAgICAgICAgICAvLyAtLS0gRVhQQU5ESU5HIC0tLVxuICAgICAgICAgICAgLy8gMS4gTWFrZSB0aGUgZWxlbWVudCB2aXNpYmxlIHNvIHdlIGNhbiBtZWFzdXJlIGl0LlxuICAgICAgICAgICAgdGFza0xpc3RXcmFwcGVyLnN0eWxlLmRpc3BsYXkgPSAnZ3JpZCc7XG5cbiAgICAgICAgICAgIC8vIDIuIFJFQUQ6IEdldCB0aGUgZnVsbCwgdW5jb25zdHJhaW5lZCBoZWlnaHQgb2YgdGhlIGNvbnRlbnQuXG4gICAgICAgICAgICBjb25zdCBlbmRIZWlnaHQgPSB0YXNrTGlzdFdyYXBwZXIuc2Nyb2xsSGVpZ2h0O1xuXG4gICAgICAgICAgICAvLyAzLiBBTklNQVRFOiBBbmltYXRlIGZyb20gYSBoZWlnaHQgb2YgMCB0byB0aGUgZnVsbCBoZWlnaHQuXG4gICAgICAgICAgICB0YXNrTGlzdFdyYXBwZXIuYW5pbWF0aW9uID0gdGFza0xpc3RXcmFwcGVyLmFuaW1hdGUoW1xuICAgICAgICAgICAgICAgIHsgaGVpZ2h0OiAnMHB4Jywgb3BhY2l0eTogMCB9LFxuICAgICAgICAgICAgICAgIHsgaGVpZ2h0OiBgJHtlbmRIZWlnaHR9cHhgLCBvcGFjaXR5OiAxIH1cbiAgICAgICAgICAgIF0sIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzUwLFxuICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2UtaW4tb3V0JyxcbiAgICAgICAgICAgICAgICBmaWxsOiAnZm9yd2FyZHMnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gQWZ0ZXIgdGhlIGFuaW1hdGlvbiwgc2V0IGhlaWdodCB0byAnYXV0bycgdG8gYWxsb3cgY29udGVudCB0byByZXNpemUgZHluYW1pY2FsbHkuXG4gICAgICAgICAgICB0YXNrTGlzdFdyYXBwZXIuYW5pbWF0aW9uLm9uZmluaXNoID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRhc2tMaXN0V3JhcHBlci5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyAtLS0gQ09MTEFQU0lORyAtLS1cbiAgICAgICAgICAgIC8vIDEuIFJFQUQ6IEdldCB0aGUgY3VycmVudCBoZWlnaHQgb2YgdGhlIGVsZW1lbnQgYmVmb3JlIGNvbGxhcHNpbmcuXG4gICAgICAgICAgICBjb25zdCBzdGFydEhlaWdodCA9IHRhc2tMaXN0V3JhcHBlci5vZmZzZXRIZWlnaHQ7XG5cbiAgICAgICAgICAgIC8vIDIuIEFOSU1BVEU6IEFuaW1hdGUgZnJvbSB0aGUgY3VycmVudCBoZWlnaHQgZG93biB0byAwLlxuICAgICAgICAgICAgdGFza0xpc3RXcmFwcGVyLmFuaW1hdGlvbiA9IHRhc2tMaXN0V3JhcHBlci5hbmltYXRlKFtcbiAgICAgICAgICAgICAgICB7IGhlaWdodDogYCR7c3RhcnRIZWlnaHR9cHhgLCBvcGFjaXR5OiAxIH0sXG4gICAgICAgICAgICAgICAgeyBoZWlnaHQ6ICcwcHgnLCBvcGFjaXR5OiAwIH1cbiAgICAgICAgICAgIF0sIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzUwLFxuICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2UtaW4tb3V0JyxcbiAgICAgICAgICAgICAgICBmaWxsOiAnZm9yd2FyZHMnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gQWZ0ZXIgdGhlIGFuaW1hdGlvbiwgaGlkZSB0aGUgZWxlbWVudCBjb21wbGV0ZWx5LlxuICAgICAgICAgICAgdGFza0xpc3RXcmFwcGVyLmFuaW1hdGlvbi5vbmZpbmlzaCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0YXNrTGlzdFdyYXBwZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG4gICAgZ2V0Vmlld1R5cGUoKSB7IHJldHVybiBWSUVXX1RZUEVfUEVSSU9EOyB9XG4gICAgZ2V0RGlzcGxheVRleHQoKSB7IHJldHVybiBcIvCfk4UgQ2FsZW5kYXIgUGVyaW9kIFdlZWsgTm90ZXNcIjsgfVxuICAgIGdldEljb24oKSB7IHJldHVybiBcImNhbGVuZGFyLWNoZWNrXCI7IH1cblxuICAgIGFzeW5jIGJ1aWxkV2Vla2x5Tm90ZXNDYWNoZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVXZWVrbHlOb3RlcykgcmV0dXJuO1xuICAgICAgICB0aGlzLmV4aXN0aW5nV2Vla2x5Tm90ZXMuY2xlYXIoKTtcbiAgICAgICAgY29uc3QgZm9sZGVyUGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtseU5vdGVGb2xkZXI7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcbiAgICAgICAgaWYgKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmb2xkZXIuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhpc3RpbmdXZWVrbHlOb3Rlcy5hZGQoZmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyByZWZyZXNoSWNzRXZlbnRzKCkge1xuICAgICAgICBjb25zdCB7IHJlcXVlc3RVcmwsIE5vdGljZSB9ID0gcmVxdWlyZSgnb2JzaWRpYW4nKTtcblxuICAgICAgICAvLyBUaGlzIGNoZWNrIGlzIG5vdyByZWR1bmRhbnQgc2luY2UgSUNBTCBpcyBidW5kbGVkLCBidXQgaXQncyBzYWZlIHRvIGtlZXAuXG4gICAgICAgIGlmICghSUNBTCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImljYWwuanMgbGlicmFyeSBub3QgYnVuZGxlZCBjb3JyZWN0bHkuXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pY3NFdmVudHNCeURhdGUuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5wcm9jZXNzZWRFdmVudFNpZ25hdHVyZXMuY2xlYXIoKTtcblxuICAgICAgICBjb25zdCBpY3NVcmwgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY3NVcmw7XG4gICAgICAgIGlmICghaWNzVXJsKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NhbGVuZGFyUmVuZGVyZWQpIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoeyB1cmw6IGljc1VybCB9KTtcbiAgICAgICAgICAgIGNvbnN0IGljYWxEYXRhID0gcmVzcG9uc2UudGV4dDtcbiAgICAgICAgICAgIGNvbnN0IGNhbGVuZGFyID0gbmV3IElDQUwuQ29tcG9uZW50KElDQUwucGFyc2UoaWNhbERhdGEpKTtcbiAgICAgICAgICAgIGNvbnN0IGljYWxFbmREYXRlID0gSUNBTC5UaW1lLmZyb21KU0RhdGUobW9tZW50KCkuYWRkKDIsICd5ZWFycycpLnRvRGF0ZSgpKTtcbiAgICAgICAgICAgIGNvbnN0IGljYWxTdGFydERhdGUgPSBJQ0FMLlRpbWUuZnJvbUpTRGF0ZShtb21lbnQoKS5zdWJ0cmFjdCgxLCAneWVhcicpLnRvRGF0ZSgpKTtcblxuICAgICAgICAgICAgY29uc3QgZXZlbnRzID0gY2FsZW5kYXIuZ2V0QWxsU3ViY29tcG9uZW50cygndmV2ZW50Jyk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHZldmVudCBvZiBldmVudHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBJQ0FMLkV2ZW50KHZldmVudCk7XG5cbiAgICAgICAgICAgICAgICAvLyAtLS0gRklOQUwgRklYIC0tLVxuICAgICAgICAgICAgICAgIC8vIEFkZCBhIGNoZWNrIHRvIHNraXAgYW55IG51bGwgb3IgdW5kZWZpbmVkIGV2ZW50IG9iamVjdHNcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHJlc3VsdCBmcm9tIG1hbGZvcm1lZCBkYXRhIGluIHRoZSBJQ1MgZmVlZC5cbiAgICAgICAgICAgICAgICBpZiAoIWV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyAtLS0gRU5EIE9GIEZJWCAtLS1cblxuICAgICAgICAgICAgICAgIGlmIChldmVudC5yZWN1cnJlbmNlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRQYXJzZWRFdmVudCh7IGl0ZW06IGV2ZW50IH0sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmlzUmVjdXJyaW5nKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlcmF0b3IgPSBldmVudC5pdGVyYXRvcigpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChuZXh0ID0gaXRlcmF0b3IubmV4dCgpKSAmJiBuZXh0LmNvbXBhcmUoaWNhbEVuZERhdGUpIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LmNvbXBhcmUoaWNhbFN0YXJ0RGF0ZSkgPCAwKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2NjdXJyZW5jZSA9IGV2ZW50LmdldE9jY3VycmVuY2VEZXRhaWxzKG5leHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRQYXJzZWRFdmVudChvY2N1cnJlbmNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUGFyc2VkRXZlbnQoeyBpdGVtOiBldmVudCB9LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgQ2FsZW5kYXIgUGVyaW9kIFdlZWsgTm90ZXMgLSBJQ1MgZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gLCAxMDAwMCk7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQSBkZXRhaWxlZCBJQ1MgcGFyc2luZyBlcnJvciBvY2N1cnJlZDpcIiwgZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaXNDYWxlbmRhclJlbmRlcmVkKSB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiAgQWRkcyBhIHBhcnNlZCBJQ0FMIGV2ZW50IG9jY3VycmVuY2UgdG8gdGhlIGV2ZW50cyBtYXAsIGhhbmRsaW5nIGRlLWR1cGxpY2F0aW9uLlxuICAgICAqICBUaGlzIG1ldGhvZCB1c2VzIGEgaHlicmlkIGFwcHJvYWNoIHRvIGRlLWR1cGxpY2F0aW9uOlxuICAgICAqICAtIEZvciByZWN1cnJpbmcgaW5zdGFuY2VzLCBpdCB1c2VzIGEgY29tYmluYXRpb24gb2YgVUlEIGFuZCByZWN1cnJlbmNlSWQuXG4gICAgICogIC0gRm9yIHNpbmdsZSBldmVudHMsIGl0IHVzZXMgYSBjb250ZW50LWJhc2VkIHNpZ25hdHVyZSAoc3VtbWFyeSwgc3RhcnQsIGVuZCkuICAgXG4gICAgICogXG4gICAgICogQHBhcmFtIHsqfSBvY2N1cnJlbmNlIFxuICAgICAqIEBwYXJhbSB7Kn0gaXNSZWN1cnJpbmdJbnN0YW5jZSBcbiAgICAgKiBAcmV0dXJucyBcbiAgICAgKi9cbiAgICBhZGRQYXJzZWRFdmVudChvY2N1cnJlbmNlLCBpc1JlY3VycmluZ0luc3RhbmNlKSB7XG4gICAgICAgIGNvbnN0IHsgaXRlbSB9ID0gb2NjdXJyZW5jZTtcbiAgICAgICAgaWYgKCFpdGVtKSByZXR1cm47XG5cbiAgICAgICAgLy8gLS0tIEhZQlJJRCBERS1EVVBMSUNBVElPTiAtLS1cbiAgICAgICAgaWYgKGlzUmVjdXJyaW5nSW5zdGFuY2UpIHtcbiAgICAgICAgICAgIC8vIEZvciByZWN1cnJpbmcgaW5zdGFuY2VzLCB0aGUgVUlEIGlzIHRoZSBVSUQgb2YgdGhlIHBhcmVudCBldmVudCwgYW5kIHRoZVxuICAgICAgICAgICAgLy8gcmVjdXJyZW5jZUlkIG1ha2VzIGl0IHVuaXF1ZS4gV2UgY3JlYXRlIGEgc2lnbmF0dXJlIGZyb20gYm90aC5cbiAgICAgICAgICAgIGNvbnN0IHJlY3VycmVuY2VTaWduYXR1cmUgPSBgJHtpdGVtLnVpZH06JHtvY2N1cnJlbmNlLnJlY3VycmVuY2VJZC50b1N0cmluZygpfWA7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9jZXNzZWRFdmVudFNpZ25hdHVyZXMuaGFzKHJlY3VycmVuY2VTaWduYXR1cmUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBTa2lwIGR1cGxpY2F0ZSByZWN1cnJpbmcgaW5zdGFuY2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc2VkRXZlbnRTaWduYXR1cmVzLmFkZChyZWN1cnJlbmNlU2lnbmF0dXJlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZvciBzaW5nbGUgZXZlbnRzIChsaWtlIHRoZSBkdXBsaWNhdGUgJ1RpbSBIb2xpZGF5JyksIHVzZSB0aGUgY29udGVudCBzaWduYXR1cmUuXG4gICAgICAgICAgICBjb25zdCBzaW5nbGVFdmVudFNpZ25hdHVyZSA9IGAke2l0ZW0uc3VtbWFyeX06JHtpdGVtLnN0YXJ0RGF0ZS50b1N0cmluZygpfToke2l0ZW0uZW5kRGF0ZS50b1N0cmluZygpfWA7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9jZXNzZWRFdmVudFNpZ25hdHVyZXMuaGFzKHNpbmdsZUV2ZW50U2lnbmF0dXJlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjsgLy8gU2tpcCBkdXBsaWNhdGUgc2luZ2xlIGV2ZW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NlZEV2ZW50U2lnbmF0dXJlcy5hZGQoc2luZ2xlRXZlbnRTaWduYXR1cmUpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhcnRNb21lbnQgPSBtb21lbnQob2NjdXJyZW5jZS5zdGFydERhdGUgPyBvY2N1cnJlbmNlLnN0YXJ0RGF0ZS50b0pTRGF0ZSgpIDogaXRlbS5zdGFydERhdGUudG9KU0RhdGUoKSk7XG4gICAgICAgIGNvbnN0IGVuZE1vbWVudCA9IG1vbWVudChvY2N1cnJlbmNlLmVuZERhdGUgPyBvY2N1cnJlbmNlLmVuZERhdGUudG9KU0RhdGUoKSA6IGl0ZW0uZW5kRGF0ZS50b0pTRGF0ZSgpKTtcblxuICAgICAgICBjb25zdCBpc0FsbERheSA9IGl0ZW0uc3RhcnREYXRlLmlzRGF0ZTtcbiAgICAgICAgaWYgKGlzQWxsRGF5KSB7XG4gICAgICAgICAgICBlbmRNb21lbnQuc3VidHJhY3QoMSwgJ3NlY29uZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZXZlbnREYXRhID0ge1xuICAgICAgICAgICAgdWlkOiBpdGVtLnVpZCxcbiAgICAgICAgICAgIHN1bW1hcnk6IGl0ZW0uc3VtbWFyeSxcbiAgICAgICAgICAgIGlzQWxsRGF5OiBpc0FsbERheSxcbiAgICAgICAgICAgIHN0YXJ0VGltZTogaXNBbGxEYXkgPyBudWxsIDogc3RhcnRNb21lbnQuZm9ybWF0KCdISDptbScpLFxuICAgICAgICAgICAgZW5kVGltZTogaXNBbGxEYXkgPyBudWxsIDogZW5kTW9tZW50LmZvcm1hdCgnSEg6bW0nKVxuICAgICAgICB9O1xuXG4gICAgICAgIGxldCBjdXJyZW50RGF5ID0gc3RhcnRNb21lbnQuY2xvbmUoKS5zdGFydE9mKCdkYXknKTtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnREYXkuaXNTYW1lT3JCZWZvcmUoZW5kTW9tZW50LnN0YXJ0T2YoJ2RheScpKSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZUtleSA9IGN1cnJlbnREYXkuZm9ybWF0KCdZWVlZLU1NLUREJyk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5pY3NFdmVudHNCeURhdGUuaGFzKGRhdGVLZXkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pY3NFdmVudHNCeURhdGUuc2V0KGRhdGVLZXksIFtdKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRmluYWwgc2ltcGxlIGNoZWNrIHRvIHByZXZlbnQgYWRkaW5nIHRoZSBleGFjdCBzYW1lIG9iamVjdCB0d2ljZSBpbiB0aGUgbG9vcFxuICAgICAgICAgICAgaWYgKCF0aGlzLmljc0V2ZW50c0J5RGF0ZS5nZXQoZGF0ZUtleSkuc29tZShlID0+IGUudWlkID09PSBldmVudERhdGEudWlkICYmIGUuc3VtbWFyeSA9PT0gZXZlbnREYXRhLnN1bW1hcnkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pY3NFdmVudHNCeURhdGUuZ2V0KGRhdGVLZXkpLnB1c2goZXZlbnREYXRhKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY3VycmVudERheS5hZGQoMSwgJ2RheScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgb3BlbldlZWtseU5vdGUoZGF0ZUluZm8pIHtcbiAgICAgICAgLy8gLS0tIFN0YXJ0IG9mIERlYnVnZ2luZyAtLS1cbiAgICAgICAgaWYgKCFkYXRlSW5mbyB8fCB0eXBlb2YgZGF0ZUluZm8ueWVhciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJXZWVrbHkgTm90ZSBFcnJvcjogSW52YWxpZCBkYXRlSW5mbyBvYmplY3QgcmVjZWl2ZWQuXCIsIGRhdGVJbmZvKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDb3VsZCBub3QgY3JlYXRlIHdlZWtseSBub3RlIGR1ZSB0byBhbiBpbnRlcm5hbCBlcnJvci4gQ2hlY2sgY29uc29sZSBmb3IgZGV0YWlscy5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gLS0tIEVuZCBvZiBEZWJ1Z2dpbmcgLS0tXG5cbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVXZWVrbHlOb3RlcykgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHsgd2Vla2x5Tm90ZUZvbGRlciwgd2Vla2x5Tm90ZVRlbXBsYXRlLCB3ZWVrbHlOb3RlRm9ybWF0IH0gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcblxuICAgICAgICAvLyAxLiBDYWxjdWxhdGUgYWxsIHBvc3NpYmxlIHBsYWNlaG9sZGVyIHZhbHVlcyBmcm9tIHRoZSBkYXRhIG9iamVjdFxuICAgICAgICBjb25zdCBwd2VlayA9ICgoZGF0ZUluZm8ud2Vla1NpbmNlU3RhcnQgLSAxKSAlIDUyKSArIDE7IC8vIENhbGN1bGF0ZSB0aGUgd2VlayAoMS01MikgaW4gdGhlIHBlcmlvZCB5ZWFyXG4gICAgICAgIGNvbnN0IHJlcGxhY2VtZW50cyA9IHtcbiAgICAgICAgICAgIFlZWVk6IGRhdGVJbmZvLnllYXIsXG4gICAgICAgICAgICBNTTogU3RyaW5nKGRhdGVJbmZvLm1vbnRoICsgMSkucGFkU3RhcnQoMiwgJzAnKSxcbiAgICAgICAgICAgIFBOOiBcIlBcIiArIGRhdGVJbmZvLnBlcmlvZCxcbiAgICAgICAgICAgIFBXOiBcIldcIiArIGRhdGVJbmZvLndlZWssXG4gICAgICAgICAgICBXS1A6IFN0cmluZyhwd2VlaykucGFkU3RhcnQoMiwgJzAnKSxcbiAgICAgICAgICAgIFdLQzogU3RyaW5nKGRhdGVJbmZvLmNhbGVuZGFyV2VlaykucGFkU3RhcnQoMiwgJzAnKVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIDIuIEJ1aWxkIHRoZSBmaWxlbmFtZSBieSByZXBsYWNpbmcgcGxhY2Vob2xkZXJzIGluIHRoZSBmb3JtYXQgc3RyaW5nXG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gd2Vla2x5Tm90ZUZvcm1hdC5yZXBsYWNlKC9ZWVlZfE1NfFBOfFBXfFdLUHxXS0MvZywgKG1hdGNoKSA9PiB7XG4gICAgICAgICAgICAvLyBUaGlzIGVuc3VyZXMgdGhhdCBpZiBhIHZhbHVlIGlzIHNvbWVob3cgdW5kZWZpbmVkLCBpdCB3b24ndCBicmVhayB0aGUgZmlsZW5hbWUuXG4gICAgICAgICAgICByZXR1cm4gcmVwbGFjZW1lbnRzW21hdGNoXSAhPT0gdW5kZWZpbmVkID8gcmVwbGFjZW1lbnRzW21hdGNoXSA6IG1hdGNoO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyAzLiBUaGUgcmVzdCBvZiB0aGUgZmlsZSBjcmVhdGlvbi9vcGVuaW5nIGxvZ2ljIHJlbWFpbnMgdGhlIHNhbWVcbiAgICAgICAgY29uc3QgcGF0aCA9IGAke3dlZWtseU5vdGVGb2xkZXJ9LyR7ZmlsZU5hbWV9Lm1kYDtcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcblxuICAgICAgICBpZiAoZmlsZSkge1xuICAgICAgICAgICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKTtcbiAgICAgICAgICAgIGF3YWl0IGxlYWYub3BlbkZpbGUoZmlsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgQ29uZmlybWF0aW9uTW9kYWwodGhpcy5hcHAsXG4gICAgICAgICAgICAgICAgXCJDcmVhdGUgd2Vla2x5IG5vdGU/XCIsXG4gICAgICAgICAgICAgICAgYEEgd2Vla2x5IG5vdGUgZm9yIFwiJHtmaWxlTmFtZX1cIiBkb2VzIG5vdCBleGlzdC4gV291bGQgeW91IGxpa2UgdG8gY3JlYXRlIGl0P2AsXG4gICAgICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmlsZUNvbnRlbnQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZUZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgod2Vla2x5Tm90ZVRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBsYXRlRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQodGVtcGxhdGVGaWxlKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh3ZWVrbHlOb3RlRm9sZGVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKHdlZWtseU5vdGVGb2xkZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3RmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShwYXRoLCBmaWxlQ29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYnVpbGRXZWVrbHlOb3Rlc0NhY2hlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbGVhZi5vcGVuRmlsZShuZXdGaWxlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwiWWVzLCBjcmVhdGUgaXRcIlxuICAgICAgICAgICAgKS5vcGVuKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZW5lcmF0ZU1vbnRoR3JpZChkYXRlRm9yTW9udGgsIHRhcmdldEJvZHlFbCkge1xuICAgICAgICBjb25zdCB7IHNldHRpbmdzIH0gPSB0aGlzLnBsdWdpbjtcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCB5ZWFyID0gZGF0ZUZvck1vbnRoLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIGNvbnN0IG1vbnRoID0gZGF0ZUZvck1vbnRoLmdldE1vbnRoKCk7XG4gICAgICAgIGNvbnN0IGZpcnN0RGF5T2ZNb250aCA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKTtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gc2V0dGluZ3MuZGFpbHlOb3Rlc0ZvbGRlciB8fCBcIlwiO1xuICAgICAgICBjb25zdCBmb3JtYXQgPSBzZXR0aW5ncy5kYWlseU5vdGVEYXRlRm9ybWF0IHx8IFwiWVlZWS1NTS1ERFwiO1xuICAgICAgICBjb25zdCBleGlzdGluZ05vdGVzID0gbmV3IFNldCh0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGZpbGUgPT4gIWZvbGRlciB8fCBmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyBcIi9cIikpLm1hcChmaWxlID0+IGZpbGUuYmFzZW5hbWUpKTtcblxuICAgICAgICAvLyBUaGlzIG5ldyBsb2dpYyBjb3JyZWN0bHkgY2FsY3VsYXRlcyB0aGUgZmlyc3QgZGF5IHRvIHNob3cgb24gdGhlIGNhbGVuZGFyXG4gICAgICAgIGNvbnN0IHN0YXJ0RGF5TnVtYmVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla1N0YXJ0RGF5ID09PSAnbW9uZGF5JyA/IDEgOiAwOyAvLyBNb249MSwgU3VuPTBcbiAgICAgICAgbW9tZW50LnVwZGF0ZUxvY2FsZSgnZW4nLCB7IHdlZWs6IHsgZG93OiBzdGFydERheU51bWJlciB9IH0pO1xuXG4gICAgICAgIGxldCBkYXlPZldlZWsgPSBmaXJzdERheU9mTW9udGguZ2V0RGF5KCk7IC8vIEpTIHN0YW5kYXJkOiBTdW49MCwgTW9uPTEuLi5cblxuICAgICAgICBsZXQgZGlmZiA9IGRheU9mV2VlayAtIHN0YXJ0RGF5TnVtYmVyO1xuICAgICAgICBpZiAoZGlmZiA8IDApIHtcbiAgICAgICAgICAgIGRpZmYgKz0gNzsgLy8gRW5zdXJlIHdlIGdvIGJhY2sgdG8gdGhlIHByZXZpb3VzIHdlZWtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjdXJyZW50RGF5ID0gbmV3IERhdGUoZmlyc3REYXlPZk1vbnRoKTtcbiAgICAgICAgY3VycmVudERheS5zZXREYXRlKGZpcnN0RGF5T2ZNb250aC5nZXREYXRlKCkgLSBkaWZmKTtcblxuICAgICAgICBjb25zdCByZXF1aXJlZFJvd3MgPSA2O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcXVpcmVkUm93czsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCByb3cgPSB0YXJnZXRCb2R5RWwuY3JlYXRlRWwoXCJ0clwiKTtcblxuICAgICAgICAgICAgaWYgKHNldHRpbmdzLmhpZ2hsaWdodEN1cnJlbnRXZWVrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9kYXlNb21lbnQgPSBtb21lbnQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydE9mV2Vla01vbWVudCA9IG1vbWVudChjdXJyZW50RGF5KTtcbiAgICAgICAgICAgICAgICBpZiAodG9kYXlNb21lbnQud2Vla1llYXIoKSA9PT0gc3RhcnRPZldlZWtNb21lbnQud2Vla1llYXIoKSAmJiB0b2RheU1vbWVudC53ZWVrKCkgPT09IHN0YXJ0T2ZXZWVrTW9tZW50LndlZWsoKSkge1xuICAgICAgICAgICAgICAgICAgICByb3cuYWRkQ2xhc3MoJ2N1cnJlbnQtd2Vlay1yb3cnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHdlZWtNb21lbnQgPSBtb21lbnQobmV3IERhdGUoY3VycmVudERheSkpO1xuICAgICAgICAgICAgY29uc3QgaXNvV2VlayA9IHdlZWtNb21lbnQuaXNvV2VlaygpO1xuICAgICAgICAgICAgY29uc3QgaXNvWWVhciA9IHdlZWtNb21lbnQuaXNvV2Vla1llYXIoKTtcbiAgICAgICAgICAgIGNvbnN0IGlzb01vbnRoID0gd2Vla01vbWVudC5tb250aCgpO1xuICAgICAgICAgICAgY29uc3QgcGVyaW9kV2Vla0RhdGEgPSBnZXRQZXJpb2RXZWVrKG5ldyBEYXRlKGN1cnJlbnREYXkpLCBzZXR0aW5ncy5zdGFydE9mUGVyaW9kMURhdGUpO1xuXG4gICAgICAgICAgICBjb25zdCBkYXRlSW5mb0ZvcldlZWsgPSB7XG4gICAgICAgICAgICAgICAgeWVhcjogaXNvWWVhcixcbiAgICAgICAgICAgICAgICBtb250aDogaXNvTW9udGgsXG4gICAgICAgICAgICAgICAgcGVyaW9kOiBwZXJpb2RXZWVrRGF0YS5wZXJpb2QsXG4gICAgICAgICAgICAgICAgd2VlazogcGVyaW9kV2Vla0RhdGEud2VlayxcbiAgICAgICAgICAgICAgICBjYWxlbmRhcldlZWs6IGlzb1dlZWssXG4gICAgICAgICAgICAgICAgd2Vla1NpbmNlU3RhcnQ6IHBlcmlvZFdlZWtEYXRhLndlZWtTaW5jZVN0YXJ0XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBjbGlja0hhbmRsZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuV2Vla2x5Tm90ZShkYXRlSW5mb0ZvcldlZWspO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGV0IHdlZWtseU5vdGVFeGlzdHMgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5lbmFibGVXZWVrbHlOb3Rlcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHB3ZWVrID0gKChkYXRlSW5mb0ZvcldlZWsud2Vla1NpbmNlU3RhcnQgLSAxKSAlIDUyKSArIDE7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVwbGFjZW1lbnRzID0ge1xuICAgICAgICAgICAgICAgICAgICBZWVlZOiBkYXRlSW5mb0ZvcldlZWsueWVhcixcbiAgICAgICAgICAgICAgICAgICAgTU06IFN0cmluZyhkYXRlSW5mb0ZvcldlZWsubW9udGggKyAxKS5wYWRTdGFydCgyLCAnMCcpLFxuICAgICAgICAgICAgICAgICAgICBQTjogXCJQXCIgKyBkYXRlSW5mb0ZvcldlZWsucGVyaW9kLFxuICAgICAgICAgICAgICAgICAgICBQVzogXCJXXCIgKyBkYXRlSW5mb0ZvcldlZWsud2VlayxcbiAgICAgICAgICAgICAgICAgICAgV0tQOiBTdHJpbmcocHdlZWspLnBhZFN0YXJ0KDIsICcwJyksXG4gICAgICAgICAgICAgICAgICAgIFdLQzogU3RyaW5nKGRhdGVJbmZvRm9yV2Vlay5jYWxlbmRhcldlZWspLnBhZFN0YXJ0KDIsICcwJylcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkRmlsZU5hbWUgPSBzZXR0aW5ncy53ZWVrbHlOb3RlRm9ybWF0LnJlcGxhY2UoL1lZWVl8V0tQfFdLQ3xNTXxQTnxQVy9nLCBtYXRjaCA9PiByZXBsYWNlbWVudHNbbWF0Y2hdKTtcbiAgICAgICAgICAgICAgICBjb25zdCBleHBlY3RlZFBhdGggPSBgJHtzZXR0aW5ncy53ZWVrbHlOb3RlRm9sZGVyfS8ke2V4cGVjdGVkRmlsZU5hbWV9Lm1kYDtcbiAgICAgICAgICAgICAgICB3ZWVrbHlOb3RlRXhpc3RzID0gdGhpcy5leGlzdGluZ1dlZWtseU5vdGVzLmhhcyhleHBlY3RlZFBhdGgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2hvd1BXQ29sdW1uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHdDZWxsID0gcm93LmNyZWF0ZUVsKFwidGRcIiwgeyBjbHM6IFwicHctbGFiZWwtY2VsbFwiIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHB3Q29udGVudCA9IHB3Q2VsbC5jcmVhdGVEaXYoeyBjbHM6IFwiZGF5LWNvbnRlbnRcIiB9KTtcbiAgICAgICAgICAgICAgICBwd0NvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcImRheS1udW1iZXJcIiB9KS5zZXRUZXh0KHRoaXMuZm9ybWF0UFcocGVyaW9kV2Vla0RhdGEucGVyaW9kLCBwZXJpb2RXZWVrRGF0YS53ZWVrKSk7XG5cbiAgICAgICAgICAgICAgICBwd0NlbGwuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0VG9kYXlQV0xhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGQgPSAwOyBkIDwgNzsgZCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGVja0RhdGUgPSBuZXcgRGF0ZShjdXJyZW50RGF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrRGF0ZS5zZXREYXRlKGN1cnJlbnREYXkuZ2V0RGF0ZSgpICsgZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTYW1lRGF5KGNoZWNrRGF0ZSwgdG9kYXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHdDZWxsLmFkZENsYXNzKFwidG9kYXktcHctbGFiZWxcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAod2Vla2x5Tm90ZUV4aXN0cyAmJiBzZXR0aW5ncy5zaG93V2Vla2x5Tm90ZURvdCAmJiAhc2V0dGluZ3Muc2hvd1dlZWtOdW1iZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRvdHNDb250YWluZXIgPSBwd0NvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnZG90cy1jb250YWluZXInIH0pO1xuICAgICAgICAgICAgICAgICAgICBkb3RzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NhbGVuZGFyLWRvdCB3ZWVrbHktbm90ZS1kb3QnIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwd0NlbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgICAgIHB3Q2VsbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4geyBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlUm93SGlnaGxpZ2h0KSB7IGNvbnN0IGhpZ2hsaWdodENvbG9yID0gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3RoZW1lLWRhcmsnKSA/IHRoaXMucGx1Z2luLnNldHRpbmdzLnJvd0hpZ2hsaWdodENvbG9yRGFyayA6IHRoaXMucGx1Z2luLnNldHRpbmdzLnJvd0hpZ2hsaWdodENvbG9yTGlnaHQ7IHJvdy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBoaWdobGlnaHRDb2xvcjsgfSB9KTtcbiAgICAgICAgICAgICAgICBwd0NlbGwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHsgcm93LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcnOyB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNob3dXZWVrTnVtYmVycykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdlZWtOdW0gPSBzZXR0aW5ncy53ZWVrTnVtYmVyVHlwZSA9PT0gJ3BlcmlvZCcgPyBwZXJpb2RXZWVrRGF0YS53ZWVrU2luY2VTdGFydCA6IGlzb1dlZWs7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2Vla0NlbGwgPSByb3cuY3JlYXRlRWwoXCJ0ZFwiLCB7IGNsczogXCJ3ZWVrLW51bWJlci1jZWxsXCIgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2Vla0NvbnRlbnQgPSB3ZWVrQ2VsbC5jcmVhdGVEaXYoeyBjbHM6IFwiZGF5LWNvbnRlbnRcIiB9KTtcbiAgICAgICAgICAgICAgICB3ZWVrQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwiZGF5LW51bWJlclwiIH0pLnNldFRleHQod2Vla051bS50b1N0cmluZygpKTtcblxuICAgICAgICAgICAgICAgIHdlZWtDZWxsLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodFRvZGF5UFdMYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBkID0gMDsgZCA8IDc7IGQrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hlY2tEYXRlID0gbmV3IERhdGUoY3VycmVudERheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0RhdGUuc2V0RGF0ZShjdXJyZW50RGF5LmdldERhdGUoKSArIGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzU2FtZURheShjaGVja0RhdGUsIHRvZGF5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlZWtDZWxsLmFkZENsYXNzKFwidG9kYXktcHctbGFiZWxcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAod2Vla2x5Tm90ZUV4aXN0cyAmJiBzZXR0aW5ncy5zaG93V2Vla2x5Tm90ZURvdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkb3RzQ29udGFpbmVyID0gd2Vla0NvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnZG90cy1jb250YWluZXInIH0pO1xuICAgICAgICAgICAgICAgICAgICBkb3RzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NhbGVuZGFyLWRvdCB3ZWVrbHktbm90ZS1kb3QnIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB3ZWVrQ2VsbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICAgICAgd2Vla0NlbGwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHsgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVJvd0hpZ2hsaWdodCkgeyBjb25zdCBoaWdobGlnaHRDb2xvciA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd0aGVtZS1kYXJrJykgPyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yb3dIaWdobGlnaHRDb2xvckRhcmsgOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yb3dIaWdobGlnaHRDb2xvckxpZ2h0OyByb3cuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gaGlnaGxpZ2h0Q29sb3I7IH0gfSk7XG4gICAgICAgICAgICAgICAgd2Vla0NlbGwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHsgcm93LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcnOyB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChsZXQgZCA9IDA7IGQgPCA3OyBkKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXlEYXRlID0gbmV3IERhdGUoY3VycmVudERheSk7XG4gICAgICAgICAgICAgICAgZGF5RGF0ZS5zZXREYXRlKGN1cnJlbnREYXkuZ2V0RGF0ZSgpICsgZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNPdGhlck1vbnRoID0gZGF5RGF0ZS5nZXRNb250aCgpICE9PSBtb250aDtcbiAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gcm93LmNyZWF0ZUVsKFwidGRcIik7XG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgc2VwYXJhdG9yIGNsYXNzIHRvIGZpcnN0IGRhdGUgY29sdW1uXG4gICAgICAgICAgICAgICAgaWYgKGQgPT09IDAgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1BXQ29sdW1uU2VwYXJhdG9yICYmXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93UFdDb2x1bW4gfHwgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1dlZWtOdW1iZXJzKSkge1xuICAgICAgICAgICAgICAgICAgICBjZWxsLmFkZENsYXNzKCdmaXJzdC1kYXRlLWNvbHVtbicpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnREaXYgPSBjZWxsLmNyZWF0ZURpdihcImRheS1jb250ZW50XCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRheU51bWJlciA9IGNvbnRlbnREaXYuY3JlYXRlRGl2KFwiZGF5LW51bWJlclwiKTtcbiAgICAgICAgICAgICAgICBkYXlOdW1iZXIudGV4dENvbnRlbnQgPSBkYXlEYXRlLmdldERhdGUoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVLZXkgPSBtb21lbnQoZGF5RGF0ZSkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKTtcblxuXG4gICAgICAgICAgICAgICAgY29uc3QgaWNzRXZlbnRzRm9yRGF5ID0gdGhpcy5pY3NFdmVudHNCeURhdGUuZ2V0KGRhdGVLZXkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tzRm9yRGF5ID0gdGhpcy50YXNrc0J5RGF0ZS5nZXQoZGF0ZUtleSk7XG5cbiAgICAgICAgICAgICAgICBsZXQgdG90YWxUYXNrQ291bnQgPSB0YXNrc0ZvckRheSA/IHRhc2tzRm9yRGF5Lmxlbmd0aCA6IDA7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FsZW5kYXJFdmVudENvdW50ID0gaWNzRXZlbnRzRm9yRGF5ID8gaWNzRXZlbnRzRm9yRGF5Lmxlbmd0aCA6IDA7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBldmVudEluZGljYXRvclN0eWxlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FsZW5kYXJFdmVudEluZGljYXRvclN0eWxlO1xuXG4gICAgICAgICAgICAgICAgLy8gQ29uZGl0aW9uYWxseSBhZGQgY2FsZW5kYXIgZXZlbnQgY291bnQgdG8gdGhlIHRvdGFsIGNvdW50IGZvciBoZWF0bWFwL2JhZGdlXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50SW5kaWNhdG9yU3R5bGUgPT09ICdoZWF0bWFwJyB8fCBldmVudEluZGljYXRvclN0eWxlID09PSAnYmFkZ2UnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsVGFza0NvdW50ICs9IGNhbGVuZGFyRXZlbnRDb3VudDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBpc1RvZGF5ID0gaXNTYW1lRGF5KGRheURhdGUsIHRvZGF5KVxuICAgICAgICAgICAgICAgIGlmICh0b3RhbFRhc2tDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnRhc2tJbmRpY2F0b3JTdHlsZSA9PT0gJ2JhZGdlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudERpdi5jcmVhdGVEaXYoeyBjbHM6ICd0YXNrLWNvdW50LWJhZGdlJywgdGV4dDogdG90YWxUYXNrQ291bnQudG9TdHJpbmcoKSB9KTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNldHRpbmdzLnRhc2tJbmRpY2F0b3JTdHlsZSA9PT0gJ2hlYXRtYXAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaG91bGRBcHBseUhlYXRtYXAgPSAhKGlzVG9kYXkgJiYgc2V0dGluZ3MudG9kYXlIaWdobGlnaHRTdHlsZSA9PT0gJ2NlbGwnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFwcGx5SGVhdG1hcCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRDb2xvciA9IHBhcnNlUmdiYVN0cmluZyhzZXR0aW5ncy50YXNrSGVhdG1hcFN0YXJ0Q29sb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pZENvbG9yID0gcGFyc2VSZ2JhU3RyaW5nKHNldHRpbmdzLnRhc2tIZWF0bWFwTWlkQ29sb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZENvbG9yID0gcGFyc2VSZ2JhU3RyaW5nKHNldHRpbmdzLnRhc2tIZWF0bWFwRW5kQ29sb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pZFBvaW50ID0gc2V0dGluZ3MudGFza0hlYXRtYXBNaWRwb2ludDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXhQb2ludCA9IHNldHRpbmdzLnRhc2tIZWF0bWFwTWF4cG9pbnQ7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGFydENvbG9yICYmIG1pZENvbG9yICYmIGVuZENvbG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbENvbG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodG90YWxUYXNrQ291bnQgPj0gbWF4UG9pbnQpIHsgZmluYWxDb2xvciA9IHNldHRpbmdzLnRhc2tIZWF0bWFwRW5kQ29sb3I7IH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodG90YWxUYXNrQ291bnQgPj0gbWlkUG9pbnQpIHsgY29uc3QgZmFjdG9yID0gKHRvdGFsVGFza0NvdW50IC0gbWlkUG9pbnQpIC8gKG1heFBvaW50IC0gbWlkUG9pbnQpOyBmaW5hbENvbG9yID0gYmxlbmRSZ2JhQ29sb3JzKG1pZENvbG9yLCBlbmRDb2xvciwgZmFjdG9yKTsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsgY29uc3QgZGl2aXNvciA9IG1pZFBvaW50IC0gMTsgY29uc3QgZmFjdG9yID0gZGl2aXNvciA+IDAgPyAodG90YWxUYXNrQ291bnQgLSAxKSAvIGRpdmlzb3IgOiAxOyBmaW5hbENvbG9yID0gYmxlbmRSZ2JhQ29sb3JzKHN0YXJ0Q29sb3IsIG1pZENvbG9yLCBmYWN0b3IpOyB9XG5cblxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudERpdi5zdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZC1jb2xvcicsIGZpbmFsQ29sb3IsICdpbXBvcnRhbnQnKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgY3JlYXRlcyBhIGJvcmRlciB1c2luZyB0aGUgdGhlbWUncyBiYWNrZ3JvdW5kIGNvbG9yLCBtYWtpbmcgYSBjbGVhbiBnYXAuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVQREFURUQ6IENoZWNrIGlmIHRoaXMgY2VsbCBpcyBpbiB0aGUgY3VycmVudCB3ZWVrIHJvd1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0luSGlnaGxpZ2h0ZWRSb3cgPSBzZXR0aW5ncy5oaWdobGlnaHRDdXJyZW50V2VlayAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93LmNsYXNzTGlzdC5jb250YWlucygnY3VycmVudC13ZWVrLXJvdycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgcm93IGhpZ2hsaWdodCBjb2xvciBhcyBib3JkZXIgaWYgaW4gaGlnaGxpZ2h0ZWQgcm93XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0luSGlnaGxpZ2h0ZWRSb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvcmRlckNvbG9yID0gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3RoZW1lLWRhcmsnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0dGluZ3Mucm93SGlnaGxpZ2h0Q29sb3JEYXJrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzZXR0aW5ncy5yb3dIaWdobGlnaHRDb2xvckxpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudERpdi5zdHlsZS5ib3JkZXIgPSBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250ZW50Qm9yZGVyV2lkdGh9IHNvbGlkICR7Ym9yZGVyQ29sb3J9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnREaXYuc3R5bGUuYm9yZGVyID0gYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGVudEJvcmRlcldpZHRofSBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSlgO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEEgc2xpZ2h0bHkgc21hbGxlciByYWRpdXMgbWFrZXMgaXQgbG9vayBuZWF0bHkgaW5zZXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnREaXYuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzhweCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnREaXYuc3R5bGUuYm94U2l6aW5nID0gJ2JvcmRlci1ib3gnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICBpZiAoaXNPdGhlck1vbnRoKSBkYXlOdW1iZXIuYWRkQ2xhc3MoXCJkYXktbnVtYmVyLW90aGVyLW1vbnRoXCIpO1xuICAgICAgICAgICAgICAgIGlmIChpc1NhbWVEYXkoZGF5RGF0ZSwgdG9kYXkpKSBjZWxsLmFkZENsYXNzKFwidG9kYXktY2VsbFwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjcmVhdGVkRmlsZXMgPSB0aGlzLmNyZWF0ZWROb3Rlc01hcC5nZXQoZGF0ZUtleSkgfHwgW107XG4gICAgICAgICAgICAgICAgY29uc3QgbW9kaWZpZWRGaWxlcyA9IHRoaXMubW9kaWZpZWROb3Rlc01hcC5nZXQoZGF0ZUtleSkgfHwgW107XG4gICAgICAgICAgICAgICAgY29uc3QgZGFpbHlOb3RlRmlsZU5hbWUgPSBmb3JtYXREYXRlKGRheURhdGUsIGZvcm1hdCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGFpbHlOb3RlRXhpc3RzID0gZXhpc3RpbmdOb3Rlcy5oYXMoZGFpbHlOb3RlRmlsZU5hbWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRvdHNDb250YWluZXIgPSBjb250ZW50RGl2LmNyZWF0ZURpdih7IGNsczogJ2RvdHMtY29udGFpbmVyJyB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChkYWlseU5vdGVFeGlzdHMpIHsgZG90c0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwicGVyaW9kLW1vbnRoLWRhaWx5LW5vdGUtZG90IGNhbGVuZGFyLWRvdFwiIH0pOyB9XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNob3dPdGhlck5vdGVEb3QgJiYgY3JlYXRlZEZpbGVzLmxlbmd0aCA+IDApIHsgZG90c0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdvdGhlci1ub3RlLWRvdCBjYWxlbmRhci1kb3QnIH0pOyB9XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNob3dNb2RpZmllZEZpbGVEb3QgJiYgbW9kaWZpZWRGaWxlcy5sZW5ndGggPiAwKSB7IGRvdHNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbW9kaWZpZWQtZmlsZS1kb3QgY2FsZW5kYXItZG90JyB9KTsgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGFzc2V0c0NyZWF0ZWQgPSB0aGlzLmFzc2V0Q3JlYXRpb25NYXAuZ2V0KGRhdGVLZXkpIHx8IFtdO1xuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zaG93QXNzZXREb3QgJiYgYXNzZXRzQ3JlYXRlZC5sZW5ndGggPiAwKSB7IGRvdHNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnYXNzZXQtZG90IGNhbGVuZGFyLWRvdCcgfSk7IH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2hvd1Rhc2tEb3QgJiYgdG90YWxUYXNrQ291bnQgPiAwKSB7IGRvdHNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAndGFzay1kb3QgY2FsZW5kYXItZG90JyB9KTsgfVxuXG5cbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRJbmRpY2F0b3JTdHlsZSA9PT0gJ2RvdCcgJiYgY2FsZW5kYXJFdmVudENvdW50ID4gMCB8fCBzZXR0aW5ncy5zaG93SWNzRG90ICYmIGNhbGVuZGFyRXZlbnRDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZG90c0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjYWxlbmRhci1kb3QgaWNzLWV2ZW50LWRvdCcgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgaGFzUG9wdXBDb250ZW50ID0gZGFpbHlOb3RlRXhpc3RzIHx8ICh0YXNrc0ZvckRheSAmJiB0YXNrc0ZvckRheS5sZW5ndGggPiAwKSB8fCAoY3JlYXRlZEZpbGVzICYmIGNyZWF0ZWRGaWxlcy5sZW5ndGggPiAwKSB8fCAobW9kaWZpZWRGaWxlcyAmJiBtb2RpZmllZEZpbGVzLmxlbmd0aCA+IDApIHx8IChhc3NldHNDcmVhdGVkICYmIGFzc2V0c0NyZWF0ZWQubGVuZ3RoID4gMCkgfHwgKGljc0V2ZW50c0ZvckRheSAmJiBpY3NFdmVudHNGb3JEYXkubGVuZ3RoID4gMCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoaGFzUG9wdXBDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUG9wdXBMb2NrZWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZUZpbGVQb3B1cCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ob3ZlclRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYWlseU5vdGVGaWxlID0gZGFpbHlOb3RlRXhpc3RzID8gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlciA/IGAke2ZvbGRlcn0vJHtkYWlseU5vdGVGaWxlTmFtZX0ubWRgIDogYCR7ZGFpbHlOb3RlRmlsZU5hbWV9Lm1kYCkgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFUb1Nob3cgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tzOiB0YXNrc0ZvckRheSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFpbHk6IGRhaWx5Tm90ZUZpbGUgPyBbZGFpbHlOb3RlRmlsZV0gOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlZDogc2V0dGluZ3Muc2hvd090aGVyTm90ZURvdCA/IGNyZWF0ZWRGaWxlcyA6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RpZmllZDogc2V0dGluZ3Muc2hvd01vZGlmaWVkRmlsZURvdCA/IG1vZGlmaWVkRmlsZXMgOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzOiBzZXR0aW5ncy5zaG93QXNzZXREb3QgPyBhc3NldHNDcmVhdGVkIDogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljczogaWNzRXZlbnRzRm9yRGF5IHx8IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RmlsZVBvcHVwKGNlbGwsIGRhdGFUb1Nob3csIGRheURhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3RoZXJOb3RlSG92ZXJEZWxheSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5ob3ZlclRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5oaWRlRmlsZVBvcHVwKCksIHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcHVwSGlkZURlbGF5KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMub3BlbkRhaWx5Tm90ZShkYXlEYXRlKSk7XG4gICAgICAgICAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVJvd1RvRGF0ZUhpZ2hsaWdodCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoaWdobGlnaHRDb2xvciA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd0aGVtZS1kYXJrJylcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5wbHVnaW4uc2V0dGluZ3Mucm93SGlnaGxpZ2h0Q29sb3JEYXJrXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMucGx1Z2luLnNldHRpbmdzLnJvd0hpZ2hsaWdodENvbG9yTGlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvdyA9IGNlbGwucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsUm93cyA9IEFycmF5LmZyb20ocm93LnBhcmVudEVsZW1lbnQuY2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByb3dJbmRleCA9IGFsbFJvd3MuaW5kZXhPZihyb3cpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xJbmRleCA9IEFycmF5LmZyb20ocm93LmNoaWxkcmVuKS5pbmRleE9mKGNlbGwpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWJsZSA9IGNlbGwuY2xvc2VzdCgndGFibGUnKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPD0gY29sSW5kZXg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbFRvSGlnaGxpZ2h0ID0gcm93LmNoaWxkcmVuW2pdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGxUb0hpZ2hsaWdodCkgY2VsbFRvSGlnaGxpZ2h0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGhpZ2hsaWdodENvbG9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93SW5kZXg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJpb3JSb3cgPSBhbGxSb3dzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbFRvSGlnaGxpZ2h0ID0gcHJpb3JSb3cuY2hpbGRyZW5bY29sSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGxUb0hpZ2hsaWdodCkgY2VsbFRvSGlnaGxpZ2h0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGhpZ2hsaWdodENvbG9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gdGFibGUucXVlcnlTZWxlY3RvcigndGhlYWQgdHInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXJSb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJDZWxsID0gaGVhZGVyUm93LmNoaWxkcmVuW2NvbEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVyQ2VsbCkgaGVhZGVyQ2VsbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBoaWdobGlnaHRDb2xvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVSb3dUb0RhdGVIaWdobGlnaHQpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFibGUgPSBjZWxsLmNsb3Nlc3QoJ3RhYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsQ2VsbHMgPSB0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0Ym9keSB0ZCwgdGhlYWQgdGgnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbENlbGxzLmZvckVhY2goYyA9PiBjLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudERheS5zZXREYXRlKGN1cnJlbnREYXkuZ2V0RGF0ZSgpICsgNyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNldHRpbmdzLmhpZ2hsaWdodEN1cnJlbnRXZWVrKSB7XG4gICAgICAgICAgICBjb25zdCBoaWdobGlnaHRlZFJvdyA9IHRhcmdldEJvZHlFbC5xdWVyeVNlbGVjdG9yKCcuY3VycmVudC13ZWVrLXJvdycpO1xuICAgICAgICAgICAgaWYgKGhpZ2hsaWdodGVkUm93KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaGlnaGxpZ2h0Q29sb3IgPSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygndGhlbWUtZGFyaycpXG4gICAgICAgICAgICAgICAgICAgID8gc2V0dGluZ3Mucm93SGlnaGxpZ2h0Q29sb3JEYXJrXG4gICAgICAgICAgICAgICAgICAgIDogc2V0dGluZ3Mucm93SGlnaGxpZ2h0Q29sb3JMaWdodDtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gaGlnaGxpZ2h0ZWRSb3cucXVlcnlTZWxlY3RvckFsbCgndGQnKTtcbiAgICAgICAgICAgICAgICBjZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGhpZ2hsaWdodENvbG9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZHMgYWxsIG1hcmtkb3duIGZpbGVzIHRoYXQgbGluayB0byBvciBlbWJlZCB0aGUgZ2l2ZW4gYXNzZXQgZmlsZS5cbiAgICAgKiBAcGFyYW0ge1RGaWxlfSBhc3NldEZpbGUgLSBUaGUgYXNzZXQgZmlsZSB0byBmaW5kIGJhY2tsaW5rcyBmb3IuXG4gICAgICogQHJldHVybnMge1Byb21pc2U8VEZpbGVbXT59IEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIGFycmF5IG9mIG1hcmtkb3duIGZpbGVzIGxpbmtpbmcgdG8gdGhlIGFzc2V0LlxuICAgICAqL1xuICAgIGFzeW5jIGZpbmRBc3NldEJhY2tsaW5rcyhhc3NldEZpbGUpIHtcbiAgICAgICAgY29uc3QgYmFja2xpbmtzID0gW107XG4gICAgICAgIGNvbnN0IG1hcmtkb3duRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cbiAgICAgICAgZm9yIChjb25zdCBtZEZpbGUgb2YgbWFya2Rvd25GaWxlcykge1xuICAgICAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShtZEZpbGUpO1xuICAgICAgICAgICAgaWYgKCFjYWNoZSkgY29udGludWU7XG5cbiAgICAgICAgICAgIGNvbnN0IGxpbmtzQW5kRW1iZWRzID0gWy4uLihjYWNoZS5lbWJlZHMgfHwgW10pLCAuLi4oY2FjaGUubGlua3MgfHwgW10pXTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCByZWYgb2YgbGlua3NBbmRFbWJlZHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rZWRGaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChyZWYubGluaywgbWRGaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgIGlmIChsaW5rZWRGaWxlICYmIGxpbmtlZEZpbGUucGF0aCA9PT0gYXNzZXRGaWxlLnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2xpbmtzLnB1c2gobWRGaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7IC8vIE1vdmUgdG8gdGhlIG5leHQgZmlsZSBvbmNlIGEgbGluayBpcyBmb3VuZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmFja2xpbmtzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAgKiBBZGRzIGEgcmlnaHQtY2xpY2sgY29udGV4dCBtZW51IHRvIGEgZmlsZSByb3cgZm9yIGRlbGV0aW9uLlxuICAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IFRoZSByb3cgZWxlbWVudCB0byBhdHRhY2ggdGhlIGxpc3RlbmVyIHRvLlxuICAgICAgKiBAcGFyYW0ge1RGaWxlfSBmaWxlIFRoZSBmaWxlIGFzc29jaWF0ZWQgd2l0aCB0aGUgcm93LlxuICAgICAgKiBAcGFyYW0geygpID0+IHZvaWR9IHJlZnJlc2hDYWxsYmFjayBUaGUgZnVuY3Rpb24gdG8gY2FsbCB0byByZWZyZXNoIHRoZSBsaXN0IGFmdGVyIGRlbGV0aW9uLlxuICAgICAgKi9cbiAgICBhZGRGaWxlQ29udGV4dE1lbnUoZWxlbWVudCwgZmlsZSwgcmVmcmVzaENhbGxiYWNrKSB7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcblxuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiRGVsZXRlIGZpbGVcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJ0cmFzaFwiKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgQ29uZmlybWF0aW9uTW9kYWwoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJDb25maXJtIERlbGV0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBwZXJtYW5lbnRseSBkZWxldGUgXCIke2ZpbGUubmFtZX1cIj8gVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZS5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LnRyYXNoKGZpbGUsIHRydWUpOyAvLyB0cnVlIGZvciBwZXJtYW5lbnQgc3lzdGVtIHRyYXNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBEZWxldGVkOiAke2ZpbGUubmFtZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hDYWxsYmFjaygpOyAvLyBSZWZyZXNoIHRoZSBzcGVjaWZpYyBsaXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3IgZGVsZXRpbmcgZmlsZTogJHtlcnIubWVzc2FnZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJZZXMsIGRlbGV0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICApLm9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlzV2Vla2x5Tm90ZShmaWxlKSB7XG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlV2Vla2x5Tm90ZXMgfHwgIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQSBmaWxlIGlzIGNvbnNpZGVyZWQgYSB3ZWVrbHkgbm90ZSBpZiBpdCdzIGluc2lkZSB0aGUgc3BlY2lmaWVkIGZvbGRlci5cbiAgICAgICAgcmV0dXJuIGZpbGUucGFyZW50Py5wYXRoID09PSB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrbHlOb3RlRm9sZGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgKiBBdHRhY2hlcyB0b3VjaCBldmVudCBsaXN0ZW5lcnMgZm9yIG1vYmlsZSBzd2lwZSBnZXN0dXJlcy5cbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2FsZW5kYXJFbCBUaGUgZWxlbWVudCB0byBsaXN0ZW4gZm9yICdzd2lwZSB1cCcgb24uXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGhlYWRlckVsIFRoZSBlbGVtZW50IHRvIGxpc3RlbiBmb3IgJ3N3aXBlIGRvd24nIG9uLlxuICAgKi9cbiAgICBhdHRhY2hTd2lwZUxpc3RlbmVycyhjYWxlbmRhckVsLCBoZWFkZXJFbCkge1xuICAgICAgICBjb25zdCBzd2lwZVRocmVzaG9sZCA9IDUwO1xuICAgICAgICBsZXQgc3RhcnRZID0gMDtcbiAgICAgICAgbGV0IHN0YXJ0WCA9IDA7XG4gICAgICAgIGxldCBpc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgIGxldCBkcmFnVGFyZ2V0ID0gbnVsbDsgLy8gVG8ga25vdyB3aGljaCBlbGVtZW50IHN0YXJ0ZWQgdGhlIGRyYWdcblxuICAgICAgICBjb25zdCBoYW5kbGVEcmFnU3RhcnQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaXNEcmFnZ2luZyA9IHRydWU7XG4gICAgICAgICAgICBkcmFnVGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0OyAvLyBTdG9yZSBpZiBkcmFnIHN0YXJ0ZWQgb24gY2FsZW5kYXIgb3IgaGVhZGVyXG4gICAgICAgICAgICBzdGFydFkgPSBlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0uY2xpZW50WSA6IGUuY2xpZW50WTtcbiAgICAgICAgICAgIHN0YXJ0WCA9IGUudG91Y2hlcyA/IGUudG91Y2hlc1swXS5jbGllbnRYIDogZS5jbGllbnRYO1xuXG4gICAgICAgICAgICAvLyBBZGQgdGhlICdlbmQnIGxpc3RlbmVycyB0byB0aGUgd2luZG93IHRvIGNhdGNoIGRyYWdzIHRoYXQgZW5kIG91dHNpZGUgdGhlIGVsZW1lbnRcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgaGFuZGxlRHJhZ0VuZCwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgaGFuZGxlRHJhZ0VuZCwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZURyYWdFbmQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFpc0RyYWdnaW5nKSByZXR1cm47XG4gICAgICAgICAgICBpc0RyYWdnaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGNvbnN0IGVuZFkgPSBlLmNoYW5nZWRUb3VjaGVzID8gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZIDogZS5jbGllbnRZO1xuICAgICAgICAgICAgY29uc3QgZW5kWCA9IGUuY2hhbmdlZFRvdWNoZXMgPyBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFggOiBlLmNsaWVudFg7XG4gICAgICAgICAgICBjb25zdCBkZWx0YVkgPSBzdGFydFkgLSBlbmRZO1xuICAgICAgICAgICAgY29uc3QgZGVsdGFYID0gTWF0aC5hYnMoc3RhcnRYIC0gZW5kWCk7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGl0J3MgYSBwcmVkb21pbmFudGx5IHZlcnRpY2FsIHN3aXBlXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoZGVsdGFZKSA+IHN3aXBlVGhyZXNob2xkICYmIE1hdGguYWJzKGRlbHRhWSkgPiBkZWx0YVgpIHtcbiAgICAgICAgICAgICAgICAvLyBTd2lwZSBVcCBvbiBDYWxlbmRhciBCb2R5OiBIaWRlIENhbGVuZGFyXG4gICAgICAgICAgICAgICAgaWYgKGRyYWdUYXJnZXQgPT09IGNhbGVuZGFyRWwgJiYgZGVsdGFZID4gMCAmJiAhdGhpcy5pc0NhbGVuZGFyQ29sbGFwc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDYWxlbmRhckNvbGxhcHNlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LmFkZChcImNhbGVuZGFyLWNvbGxhcHNlZFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gU3dpcGUgRG93biBvbiBIZWFkZXI6IFNob3cgQ2FsZW5kYXJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkcmFnVGFyZ2V0ID09PSBoZWFkZXJFbCAmJiBkZWx0YVkgPCAwICYmIHRoaXMuaXNDYWxlbmRhckNvbGxhcHNlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ2FsZW5kYXJDb2xsYXBzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QucmVtb3ZlKFwiY2FsZW5kYXItY29sbGFwc2VkXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBBdHRhY2ggc3RhcnQgbGlzdGVuZXJzIGZvciBib3RoIG1vdXNlIGFuZCB0b3VjaCB0byBib3RoIGVsZW1lbnRzXG4gICAgICAgIGNhbGVuZGFyRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlRHJhZ1N0YXJ0KTtcbiAgICAgICAgY2FsZW5kYXJFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgaGFuZGxlRHJhZ1N0YXJ0LCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgICAgIGhlYWRlckVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZURyYWdTdGFydCk7XG4gICAgICAgIGhlYWRlckVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBoYW5kbGVEcmFnU3RhcnQsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEaXNwbGF5cyBhIHBvcHVwIGxpc3Qgb2Ygbm90ZXMgdGhhdCBsaW5rIHRvIGEgc3BlY2lmaWMgYXNzZXQuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0RWwgLSBUaGUgZWxlbWVudCB0byBwb3NpdGlvbiB0aGUgcG9wdXAgcmVsYXRpdmUgdG8uXG4gICAgICogQHBhcmFtIHtURmlsZX0gYXNzZXRGaWxlIC0gVGhlIGFzc2V0IHdob3NlIGJhY2tsaW5rcyBzaG91bGQgYmUgZGlzcGxheWVkLlxuICAgICAqL1xuICAgIGFzeW5jIHNob3dCYWNrbGlua3NQb3B1cCh0YXJnZXRFbCwgYXNzZXRGaWxlKSB7XG4gICAgICAgIHRoaXMuaGlkZUZpbGVQb3B1cCgpOyAvLyBIaWRlIGFueSBvdGhlciBwb3B1cHNcbiAgICAgICAgY29uc3QgYmFja2xpbmtzID0gYXdhaXQgdGhpcy5maW5kQXNzZXRCYWNrbGlua3MoYXNzZXRGaWxlKTtcblxuICAgICAgICBpZiAoYmFja2xpbmtzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIGJhY2tsaW5rcyBmb3VuZCBmb3IgdGhpcyBhc3NldC5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBvcHVwRWwgPSBjcmVhdGVEaXYoeyBjbHM6ICdvdGhlci1ub3Rlcy1wb3B1cCcgfSk7XG5cbiAgICAgICAgLy8gQWRkIGhlYWRlciB3aXRoIGEgY2xvc2UgYnV0dG9uXG4gICAgICAgIGNvbnN0IGhlYWRlclJvdyA9IHRoaXMucG9wdXBFbC5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC1oZWFkZXInIH0pO1xuICAgICAgICBoZWFkZXJSb3cuY3JlYXRlRGl2KHsgY2xzOiAncG9wdXAtaGVhZGVyLXRpdGxlJywgdGV4dDogJ0JhY2tsaW5rcycgfSk7XG4gICAgICAgIGNvbnN0IGNsb3NlQnRuID0gaGVhZGVyUm93LmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWNsb3NlLWJ0bicgfSk7XG4gICAgICAgIHNldEljb24oY2xvc2VCdG4sICd4Jyk7XG4gICAgICAgIGhlYWRlclJvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGlkZUZpbGVQb3B1cCgpKTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBzY3JvbGxhYmxlIHdyYXBwZXIgZm9yIHRoZSBjb250ZW50XG4gICAgICAgIGNvbnN0IGNvbnRlbnRXcmFwcGVyID0gdGhpcy5wb3B1cEVsLmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWNvbnRlbnQtd3JhcHBlcicgfSk7XG5cbiAgICAgICAgYmFja2xpbmtzLmZvckVhY2gobm90ZUZpbGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXRlbUVsID0gY29udGVudFdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiAnb3RoZXItbm90ZXMtcG9wdXAtaXRlbScgfSk7XG4gICAgICAgICAgICBzZXRJY29uKGl0ZW1FbCwgJ2ZpbGUtdGV4dCcpO1xuXG4gICAgICAgICAgICBjb25zdCB0aXRsZVBhdGhXcmFwcGVyID0gaXRlbUVsLmNyZWF0ZURpdih7IGNsczogJ25vdGUtdGl0bGUtcGF0aC13cmFwcGVyJyB9KTtcbiAgICAgICAgICAgIHRpdGxlUGF0aFdyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogbm90ZUZpbGUuYmFzZW5hbWUsIGNsczogXCJub3RlLXRpdGxlXCIgfSk7XG4gICAgICAgICAgICBpZiAobm90ZUZpbGUucGFyZW50ICYmIG5vdGVGaWxlLnBhcmVudC5wYXRoICE9PSAnLycpIHtcbiAgICAgICAgICAgICAgICB0aXRsZVBhdGhXcmFwcGVyLmNyZWF0ZURpdih7IHRleHQ6IG5vdGVGaWxlLnBhcmVudC5wYXRoLCBjbHM6ICdub3RlLXBhdGgnIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpdGVtRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShub3RlRmlsZSk7XG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldExpbmUgPSAwO1xuICAgICAgICAgICAgICAgIGlmIChjYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxMaW5rcyA9IFsuLi4oY2FjaGUuZW1iZWRzIHx8IFtdKSwgLi4uKGNhY2hlLmxpbmtzIHx8IFtdKV07XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcmVmIG9mIGFsbExpbmtzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rZWRGaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChyZWYubGluaywgbm90ZUZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlua2VkRmlsZSAmJiBsaW5rZWRGaWxlLnBhdGggPT09IGFzc2V0RmlsZS5wYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TGluZSA9IHJlZi5wb3NpdGlvbi5zdGFydC5saW5lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG9wZW5Jbk5ld1RhYiA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVzT3BlbkFjdGlvbiA9PT0gJ25ldy10YWInO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihvcGVuSW5OZXdUYWIpO1xuICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYub3BlbkZpbGUobm90ZUZpbGUsIHsgZVN0YXRlOiB7IGxpbmU6IHRhcmdldExpbmUgfSB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVGaWxlUG9wdXAoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnBvcHVwRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IGNsZWFyVGltZW91dCh0aGlzLmhpZGVUaW1lb3V0KSk7XG4gICAgICAgIHRoaXMucG9wdXBFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oaWRlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5oaWRlRmlsZVBvcHVwKCksIHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcHVwSGlkZURlbGF5KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnBvcHVwRWwpO1xuXG4gICAgICAgIGNvbnN0IHBvcHVwUmVjdCA9IHRoaXMucG9wdXBFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3QgdGFyZ2V0UmVjdCA9IHRhcmdldEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCB2aWV3cG9ydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIGNvbnN0IHZpZXdwb3J0SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICBjb25zdCBtYXJnaW4gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wb3B1cEdhcDtcbiAgICAgICAgbGV0IGZpbmFsVG9wID0gdGFyZ2V0UmVjdC5ib3R0b20gKyBtYXJnaW47XG4gICAgICAgIGlmIChmaW5hbFRvcCArIHBvcHVwUmVjdC5oZWlnaHQgPiB2aWV3cG9ydEhlaWdodCkgZmluYWxUb3AgPSB0YXJnZXRSZWN0LnRvcCAtIHBvcHVwUmVjdC5oZWlnaHQgLSBtYXJnaW47XG4gICAgICAgIGlmIChmaW5hbFRvcCA8IDApIGZpbmFsVG9wID0gbWFyZ2luO1xuICAgICAgICBsZXQgZmluYWxMZWZ0ID0gdGFyZ2V0UmVjdC5sZWZ0O1xuICAgICAgICBpZiAoZmluYWxMZWZ0ICsgcG9wdXBSZWN0LndpZHRoID4gdmlld3BvcnRXaWR0aCkgZmluYWxMZWZ0ID0gdGFyZ2V0UmVjdC5yaWdodCAtIHBvcHVwUmVjdC53aWR0aDtcbiAgICAgICAgaWYgKGZpbmFsTGVmdCA8IDApIGZpbmFsTGVmdCA9IG1hcmdpbjtcblxuICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUudG9wID0gYCR7ZmluYWxUb3B9cHhgO1xuICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUubGVmdCA9IGAke2ZpbmFsTGVmdH1weGA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0cmFjdHMgYWxsIHRhc2sgbGluZXMgKGUuZy4sIFwiLSBbIF0gLi4uXCIpIGZyb20gYSBzdHJpbmcgb2YgY29udGVudC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29udGVudCAtIFRoZSBtYXJrZG93biBjb250ZW50IHRvIHBhcnNlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmdbXX0gQW4gYXJyYXkgb2Ygc3RyaW5ncywgd2hlcmUgZWFjaCBzdHJpbmcgaXMgYSB0YXNrIGxpbmUuXG4gICAgICovXG4gICAgZXh0cmFjdFRhc2tMaW5lcyhjb250ZW50KSB7XG4gICAgICAgIGNvbnN0IHRhc2tMaW5lcyA9IFtdO1xuICAgICAgICAvLyBUaGlzIHJlZ2V4IGZpbmRzIGFueSBsaW5lIHRoYXQgbG9va3MgbGlrZSBhIE1hcmtkb3duIHRhc2ssIGNvbXBsZXRlZCBvciBub3QuXG4gICAgICAgIGNvbnN0IHRhc2tSZWdleCA9IC9eXFxzKig/Oi18XFxkK1xcLilcXHMqXFxbLlxcXVxccyouKi87XG4gICAgICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgICAgICAgICAgaWYgKHRhc2tSZWdleC50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICAgICAgdGFza0xpbmVzLnB1c2gobGluZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhc2tMaW5lcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYSBmaWxlIGlzIGFuIGltYWdlIGJhc2VkIG9uIGl0cyBleHRlbnNpb24uXG4gICAgICogQHBhcmFtIHtURmlsZX0gZmlsZSBUaGUgZmlsZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZmlsZSBpcyBhIGNvbW1vbiBpbWFnZSB0eXBlLlxuICAgICAqL1xuICAgIGlzSW1hZ2VBc3NldChmaWxlKSB7XG4gICAgICAgIGNvbnN0IGltYWdlRXh0ZW5zaW9ucyA9IFsncG5nJywgJ2pwZycsICdqcGVnJywgJ2dpZicsICdzdmcnLCAnd2VicCddO1xuICAgICAgICByZXR1cm4gaW1hZ2VFeHRlbnNpb25zLmluY2x1ZGVzKGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIER5bmFtaWNhbGx5IGdlbmVyYXRlcyB0aGUgbGFiZWwgZm9yIGEgdGFiLCBpbmNsdWRpbmcgaWNvbiBhbmQvb3IgdGV4dCBiYXNlZCBvbiBzZXR0aW5ncy5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIgVGhlIEhUTUwgZWxlbWVudCB0byBwb3B1bGF0ZSB3aXRoIHRoZSBsYWJlbC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHRhYiAoZS5nLiwgJ25vdGVzJywgJ3NjcmF0Y2gnKS5cbiAgICAgKi9cbiAgICBnZXRUYWJMYWJlbChjb250YWluZXIsIGtleSkge1xuICAgICAgICBjb250YWluZXIuZW1wdHkoKTsgLy8gQ2xlYXIgcHJldmlvdXMgY29udGVudFxuXG4gICAgICAgIGNvbnN0IGlzTW9iaWxlID0gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLW1vYmlsZScpO1xuICAgICAgICBjb25zdCBkaXNwbGF5TW9kZSA9IGlzTW9iaWxlID8gdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlVGFiRGlzcGxheU1vZGUgOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJEaXNwbGF5TW9kZTtcblxuICAgICAgICBjb25zdCBpY29ucyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYkljb25zIHx8IERFRkFVTFRfU0VUVElOR1MudGFiSWNvbnM7XG4gICAgICAgIGNvbnN0IHRleHRMYWJlbHMgPSB7XG4gICAgICAgICAgICBzY3JhdGNoOiBcIlNjcmF0Y2hQYWRcIixcbiAgICAgICAgICAgIG5vdGVzOiBcIk5vdGVzXCIsXG4gICAgICAgICAgICBwaW5uZWQ6IFwiUGlubmVkXCIsXG4gICAgICAgICAgICB0YXNrczogXCJUYXNrc1wiLCAvLyBUaGlzIGlzIGEgZmFsbGJhY2tcbiAgICAgICAgICAgIGFzc2V0czogXCJBc3NldHNcIlxuICAgICAgICB9O1xuXG4gICAgICAgIGxldCBpY29uTmFtZSA9ICcnO1xuICAgICAgICBsZXQgdGV4dCA9ICcnO1xuXG4gICAgICAgIGlmIChrZXkgPT09ICdub3RlcycpIHtcbiAgICAgICAgICAgIGNvbnN0IG1vZGUgPSB0aGlzLm5vdGVzVmlld01vZGU7XG4gICAgICAgICAgICBpY29uTmFtZSA9IG1vZGUgPT09ICdwaW5uZWQnID8gaWNvbnMucGlubmVkIDogaWNvbnMubm90ZXM7XG4gICAgICAgICAgICB0ZXh0ID0gbW9kZSA9PT0gJ3Bpbm5lZCcgPyB0ZXh0TGFiZWxzLnBpbm5lZCA6IHRleHRMYWJlbHMubm90ZXM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSAndGFza3MnKSB7XG4gICAgICAgICAgICBjb25zdCBncm91cEJ5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0dyb3VwQnk7XG4gICAgICAgICAgICBpY29uTmFtZSA9IGdyb3VwQnkgPT09ICd0YWcnID8gJ2NpcmNsZS1jaGVjaycgOiBpY29ucy50YXNrcztcbiAgICAgICAgICAgIHRleHQgPSBncm91cEJ5ID09PSAndGFnJyA/IFwiVGFza3MgYnkgVGFnXCIgOiBcIlRhc2tzIGJ5IERhdGVcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09ICdhc3NldHMnKSB7XG4gICAgICAgICAgICBpY29uTmFtZSA9IHRoaXMuaXNBc3NldHNHcmlkVmlldyA/ICdpbWFnZScgOiAnZmlsZS1pbWFnZSc7XG4gICAgICAgICAgICB0ZXh0ID0gdGV4dExhYmVsc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWNvbk5hbWUgPSBpY29uc1trZXldO1xuICAgICAgICAgICAgdGV4dCA9IHRleHRMYWJlbHNba2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkaXNwbGF5TW9kZS5pbmNsdWRlcyhcImljb25cIikpIHtcbiAgICAgICAgICAgIGNvbnN0IGljb25FbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd0YWItaWNvbicgfSk7XG4gICAgICAgICAgICBzZXRJY29uKGljb25FbCwgaWNvbk5hbWUgfHwgJ2ZpbGUtcXVlc3Rpb24nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkaXNwbGF5TW9kZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwidGV4dFwiKSkge1xuICAgICAgICAgICAgY29udGFpbmVyLmNyZWF0ZVNwYW4oeyBjbHM6ICd0YWItdGV4dCcsIHRleHQ6IHRleHQgfHwgJycgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIGEgZmlsZSBpcyBhIGRhaWx5IG5vdGUgYmFzZWQgb24gaXRzIG5hbWUgZm9ybWF0IGFuZCBsb2NhdGlvbi5cbiAgICAgKiBAcGFyYW0ge1RGaWxlfSBmaWxlIFRoZSBmaWxlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBmaWxlIG1hdGNoZXMgdGhlIGRhaWx5IG5vdGUgY3JpdGVyaWEuXG4gICAgICovXG4gICAgaXNEYWlseU5vdGUoZmlsZSkge1xuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuICAgICAgICBjb25zdCBkYWlseU5vdGVGb2xkZXIgPSBzZXR0aW5ncy5kYWlseU5vdGVzRm9sZGVyO1xuICAgICAgICBjb25zdCBmb3JtYXQgPSBzZXR0aW5ncy5kYWlseU5vdGVEYXRlRm9ybWF0IHx8IFwiWVlZWS1NTS1ERFwiO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBmaWxlbmFtZSBzdHJpY3RseSBtYXRjaGVzIHRoZSBkYWlseSBub3RlIGRhdGUgZm9ybWF0LlxuICAgICAgICBjb25zdCBpc05hbWVDb3JyZWN0ID0gbW9tZW50KGZpbGUuYmFzZW5hbWUsIGZvcm1hdCwgdHJ1ZSkuaXNWYWxpZCgpO1xuICAgICAgICBpZiAoIWlzTmFtZUNvcnJlY3QpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIGEgZGFpbHkgbm90ZXMgZm9sZGVyIGlzIHNwZWNpZmllZCwgY2hlY2sgaWYgdGhlIGZpbGUgaXMgZGlyZWN0bHkgaW5zaWRlIGl0LlxuICAgICAgICBpZiAoZGFpbHlOb3RlRm9sZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gZmlsZS5wYXJlbnQ/LnBhdGggPT09IGRhaWx5Tm90ZUZvbGRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIG5vIGZvbGRlciBpcyBzZXQsIHRoZSBmaWxlIG11c3QgYmUgaW4gdGhlIHZhdWx0J3Mgcm9vdCBkaXJlY3RvcnkuXG4gICAgICAgIHJldHVybiBmaWxlLnBhcmVudD8ucGF0aCA9PT0gJy8nO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRvZ2dsZXMgdGhlIHNjcmF0Y2hwYWQgYmV0d2VlbiBlZGl0IGFuZCBwcmV2aWV3IG1vZGUgYW5kIHRyaWdnZXJzIGEgcmUtcmVuZGVyLlxuICAgICAqL1xuICAgIHRvZ2dsZVNjcmF0Y2hwYWRWaWV3KCkge1xuICAgICAgICB0aGlzLmlzU2NyYXRjaHBhZFByZXZpZXcgPSAhdGhpcy5pc1NjcmF0Y2hwYWRQcmV2aWV3O1xuICAgICAgICAvLyBUaGUgYnV0dG9uIHN0YXRlIGFuZCBjb250ZW50IHZpc2liaWxpdHkgYXJlIGhhbmRsZWQgYnkgdGhlIHJlbmRlciBtZXRob2QuXG4gICAgICAgIHRoaXMucmVuZGVyU2NyYXRjaHBhZENvbnRlbnQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzZXMgZGF0ZSBwbGFjZWhvbGRlcnMgaW4gYSBzdHJpbmcgYW5kIHJlcGxhY2VzIHRoZW0gd2l0aCBmb3JtYXR0ZWQgZGF0ZXMuXG4gICAgICogQWxzbyBoYW5kbGVzIGEgY3Vyc29yIHBvc2l0aW9uIG1hcmtlci5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZm9ybWF0U3RyaW5nIFRoZSBzdHJpbmcgY29udGFpbmluZyBwbGFjZWhvbGRlcnMgbGlrZSB7dG9kYXl9LCB7bW9uZGF5fSwge2RhdGV9KzcsIGFuZCBhIGN1cnNvciBtYXJrZXIgJ3wnLlxuICAgICAqIEByZXR1cm5zIHt7dGV4dDogc3RyaW5nLCBjdXJzb3JPZmZzZXQ6IG51bWJlcn19IFRoZSBwcm9jZXNzZWQgc3RyaW5nIGFuZCB0aGUgY2FsY3VsYXRlZCBmaW5hbCBjdXJzb3IgcG9zaXRpb24uXG4gICAgICovXG4gICAgcHJvY2Vzc0RhdGVQbGFjZWhvbGRlcnMoZm9ybWF0U3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGN1cnNvck1hcmtlciA9ICd8JztcbiAgICAgICAgbGV0IGN1cnNvck9mZnNldCA9IC0xO1xuXG4gICAgICAgIC8vIEZpbmQgdGhlIGN1cnNvciBtYXJrZXIncyBwb3NpdGlvbiBhbmQgcmVtb3ZlIGl0IGZvciBwcm9jZXNzaW5nLlxuICAgICAgICBjb25zdCBtYXJrZXJJbmRleCA9IGZvcm1hdFN0cmluZy5pbmRleE9mKGN1cnNvck1hcmtlcik7XG4gICAgICAgIGlmIChtYXJrZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIGN1cnNvck9mZnNldCA9IG1hcmtlckluZGV4O1xuICAgICAgICAgICAgZm9ybWF0U3RyaW5nID0gZm9ybWF0U3RyaW5nLnJlcGxhY2UoY3Vyc29yTWFya2VyLCAnJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQcm9jZXNzIGRhdGUgcGxhY2Vob2xkZXJzIHVzaW5nIGEgcmVnZXguXG4gICAgICAgIGNvbnN0IHByb2Nlc3NlZFRleHQgPSBmb3JtYXRTdHJpbmcucmVwbGFjZSgveyhbXn1dKyl9L2csIChtYXRjaCwgdGFnKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSBtb21lbnQoKTtcbiAgICAgICAgICAgIHRhZyA9IHRhZy50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcblxuICAgICAgICAgICAgaWYgKHRhZyA9PT0gJ3RvZGF5JykgcmV0dXJuIG5vdy5mb3JtYXQoJ1lZWVktTU0tREQnKTtcbiAgICAgICAgICAgIGlmICh0YWcgPT09ICd0b21vcnJvdycpIHJldHVybiBub3cuYWRkKDEsICdkYXknKS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcblxuICAgICAgICAgICAgY29uc3Qgd2Vla2RheXMgPSB7ICdzdW5kYXknOiAwLCAnbW9uZGF5JzogMSwgJ3R1ZXNkYXknOiAyLCAnd2VkbmVzZGF5JzogMywgJ3RodXJzZGF5JzogNCwgJ2ZyaWRheSc6IDUsICdzYXR1cmRheSc6IDYgfTtcbiAgICAgICAgICAgIGlmICh0YWcgaW4gd2Vla2RheXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXREYXkgPSB3ZWVrZGF5c1t0YWddO1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXkgPSBub3cuZGF5KCk7XG4gICAgICAgICAgICAgICAgbGV0IGRheXNUb0FkZCA9IHRhcmdldERheSAtIGN1cnJlbnREYXk7XG4gICAgICAgICAgICAgICAgaWYgKGRheXNUb0FkZCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRheXNUb0FkZCArPSA3OyAvLyBGaW5kIHRoZSAqbmV4dCogaW5zdGFuY2Ugb2YgdGhlIGRheS5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vdy5hZGQoZGF5c1RvQWRkLCAnZGF5cycpLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBkeW5hbWljRGF0ZU1hdGNoID0gdGFnLm1hdGNoKC9eZGF0ZVxccyooWystXSlcXHMqKFxcZCspLyk7XG4gICAgICAgICAgICBpZiAoZHluYW1pY0RhdGVNYXRjaCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9wZXJhdG9yID0gZHluYW1pY0RhdGVNYXRjaFsxXTtcbiAgICAgICAgICAgICAgICBjb25zdCBhbW91bnQgPSBwYXJzZUludChkeW5hbWljRGF0ZU1hdGNoWzJdLCAxMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wZXJhdG9yID09PSAnKycgPyBub3cuYWRkKGFtb3VudCwgJ2RheXMnKS5mb3JtYXQoJ1lZWVktTU0tREQnKSA6IG5vdy5zdWJ0cmFjdChhbW91bnQsICdkYXlzJykuZm9ybWF0KCdZWVlZLU1NLUREJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBtYXRjaDsgLy8gUmV0dXJuIG9yaWdpbmFsIG1hdGNoIGlmIG5vIHBsYWNlaG9sZGVyIGlzIHJlY29nbml6ZWQuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIElmIHRoZSBjdXJzb3IgbWFya2VyIHdhc24ndCBmb3VuZCwgc2V0IHRoZSBvZmZzZXQgdG8gdGhlIGVuZCBvZiB0aGUgdGV4dC5cbiAgICAgICAgaWYgKGN1cnNvck9mZnNldCA9PT0gLTEpIHtcbiAgICAgICAgICAgIGN1cnNvck9mZnNldCA9IHByb2Nlc3NlZFRleHQubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHsgdGV4dDogcHJvY2Vzc2VkVGV4dCwgY3Vyc29yT2Zmc2V0OiBjdXJzb3JPZmZzZXQgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTY2FucyB0aGUgZW50aXJlIHZhdWx0IGZvciBvcGVuIHRhc2tzIHdpdGggZHVlIGRhdGVzIChlLmcuLCDwn5OFWVlZWS1NTS1ERClcbiAgICAgKiBhbmQgcG9wdWxhdGVzIGB0aGlzLnRhc2tzQnlEYXRlYCBtYXAgZm9yIHF1aWNrIGxvb2t1cHMgYnkgdGhlIGNhbGVuZGFyIHZpZXcuXG4gICAgICovXG4gICAgYXN5bmMgYnVpbGRUYXNrc0J5RGF0ZU1hcCgpIHtcbiAgICAgICAgdGhpcy50YXNrc0J5RGF0ZS5jbGVhcigpO1xuICAgICAgICB0aGlzLmZpbGVUb1Rhc2tEYXRlcy5jbGVhcigpOyAvLyBBbHNvIGNsZWFyIHRoZSB0cmFja2luZyBtYXBcblxuICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrSWdub3JlRm9sZGVycy5zb21lKGZvbGRlciA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXIpKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlKTtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tzID0gcGFyc2VUYXNrc0Zyb21GaWxlKGZpbGUsIGNvbnRlbnQpOyAvLyBVc2UgdGhlIG5ldyBoZWxwZXJcblxuICAgICAgICAgICAgY29uc3QgZGF0ZUtleXNGb3JGaWxlID0gbmV3IFNldCgpO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGFza3MpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBvbmx5IGNhcmUgYWJvdXQgaW5jb21wbGV0ZSB0YXNrcyB3aXRoIGR1ZSBkYXRlcyBmb3IgdGhlIGNhbGVuZGFyIGdyaWRcbiAgICAgICAgICAgICAgICBpZiAodGFzay5zdGF0dXMudG9Mb3dlckNhc2UoKSAhPT0gJ3gnICYmIHRhc2suZHVlRGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlS2V5ID0gbW9tZW50KHRhc2suZHVlRGF0ZSkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnRhc2tzQnlEYXRlLmhhcyhkYXRlS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrc0J5RGF0ZS5zZXQoZGF0ZUtleSwgW10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFza3NCeURhdGUuZ2V0KGRhdGVLZXkpLnB1c2godGFzayk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGVLZXlzRm9yRmlsZS5hZGQoZGF0ZUtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGF0ZUtleXNGb3JGaWxlLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxlVG9UYXNrRGF0ZXMuc2V0KGZpbGUucGF0aCwgZGF0ZUtleXNGb3JGaWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNob3dzIGEgY29uZmlybWF0aW9uIG1vZGFsIGFuZCBoYW5kbGVzIHRoZSBwZXJtYW5lbnQgZGVsZXRpb24gb2YgYW4gYXNzZXQgZmlsZS5cbiAgICAgKiBAcGFyYW0ge1RGaWxlfSBmaWxlIC0gVGhlIGFzc2V0IGZpbGUgdG8gZGVsZXRlLlxuICAgICAqL1xuICAgIGFzeW5jIGhhbmRsZURlbGV0ZUFzc2V0KGZpbGUpIHtcbiAgICAgICAgbmV3IENvbmZpcm1hdGlvbk1vZGFsKFxuICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICBcIkNvbmZpcm0gRGVsZXRpb25cIixcbiAgICAgICAgICAgIGBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcGVybWFuZW50bHkgZGVsZXRlIFwiJHtmaWxlLm5hbWV9XCI/IFRoaXMgYWN0aW9uIGNhbm5vdCBiZSB1bmRvbmUuYCxcbiAgICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC50cmFzaChmaWxlLCB0cnVlKTsgLy8gYHRydWVgIGZvciBwZXJtYW5lbnQgZGVsZXRpb24uXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYERlbGV0ZWQgYXNzZXQ6ICR7ZmlsZS5uYW1lfWApO1xuICAgICAgICAgICAgICAgICAgICAvLyBSZWZyZXNoIGRhdGEgbWFwcyBhbmQgVUkgY29tcG9uZW50cyB0aGF0IGRlcGVuZCBvbiBhc3NldCBkYXRhLlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkQXNzZXRDcmVhdGlvbk1hcCgpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkVGFza3NCeURhdGVNYXAoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZUFzc2V0cygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yIGRlbGV0aW5nIGZpbGU6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAsIFwiWWVzLCBkZWxldGVcIikub3BlbigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgdGhlIGNvbnRlbnQgb2YgdGhlIHNjcmF0Y2hwYWQsIHN3aXRjaGluZyBiZXR3ZWVuIGFuIGVkaXRvciB0ZXh0YXJlYVxuICAgICAqIGFuZCBhIHJlbmRlcmVkIE1hcmtkb3duIHByZXZpZXcgYmFzZWQgb24gdGhlIGN1cnJlbnQgdmlldyBtb2RlLlxuICAgICAqL1xuICAgIGFzeW5jIHJlbmRlclNjcmF0Y2hwYWRDb250ZW50KCkge1xuICAgICAgICBpZiAoIXRoaXMuc2NyYXRjaFdyYXBwZXJFbCkgcmV0dXJuO1xuXG4gICAgICAgIC8vIFByZXNlcnZlIGZvY3VzIG9uIHRoZSB0ZXh0YXJlYSBhY3Jvc3MgcmUtcmVuZGVycy5cbiAgICAgICAgY29uc3Qgd2FzRm9jdXNlZCA9IHRoaXMubm90ZVRleHRhcmVhID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXG4gICAgICAgIHRoaXMuc2NyYXRjaFdyYXBwZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhIGNvbnRhaW5lciBmb3IgYWN0aW9uIGJ1dHRvbnMgKFByZXZpZXcsIEFkZCBUYXNrKS5cbiAgICAgICAgY29uc3QgYWN0aW9uc0NvbnRhaW5lciA9IHRoaXMuc2NyYXRjaFdyYXBwZXJFbC5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgY2xzOiBcInNjcmF0Y2hwYWQtYWN0aW9ucy1jb250YWluZXJcIlxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBPbmx5IHNob3cgdGhlIFByZXZpZXcvRWRpdCB0b2dnbGUgYnV0dG9uIGlmIGVuYWJsZWQgaW4gc2V0dGluZ3MuXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNocGFkPy5zaG93UHJldmlld1RvZ2dsZSkge1xuICAgICAgICAgICAgdGhpcy5zY3JhdGNocGFkVmlld1RvZ2dsZUJ0biA9IGFjdGlvbnNDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgICAgIGNsczogXCJzY3JhdGNocGFkLWFjdGlvbi1idG5cIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNjcmF0Y2hwYWRWaWV3VG9nZ2xlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnRvZ2dsZVNjcmF0Y2hwYWRWaWV3KCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gT25seSBzaG93IHRoZSBBZGQgVGFzayBidXR0b24gaWYgZW5hYmxlZCBpbiBzZXR0aW5ncy5cbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQ/LnNob3dBZGRUYXNrQnV0dG9uKSB7XG4gICAgICAgICAgICB0aGlzLmFkZFRhc2tCdG4gPSBhY3Rpb25zQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICAgICAgICBjbHM6IFwic2NyYXRjaHBhZC1hY3Rpb24tYnRuXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2V0SWNvbih0aGlzLmFkZFRhc2tCdG4sIFwicGx1c1wiKTtcbiAgICAgICAgICAgIHRoaXMuYWRkVGFza0J0bi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiQWRkIG5ldyB0YXNrXCIpO1xuICAgICAgICAgICAgdGhpcy5hZGRUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmFkZE5ld1Rhc2tUb1NjcmF0Y2hwYWQoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pc1NjcmF0Y2hwYWRQcmV2aWV3ICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQ/LnNob3dQcmV2aWV3VG9nZ2xlKSB7XG4gICAgICAgICAgICAvLyAtLS0gQ09ORklHVVJFIFVJIEZPUiBQUkVWSUVXIE1PREUgLS0tXG4gICAgICAgICAgICBpZiAodGhpcy5zY3JhdGNocGFkVmlld1RvZ2dsZUJ0bikge1xuICAgICAgICAgICAgICAgIHNldEljb24odGhpcy5zY3JhdGNocGFkVmlld1RvZ2dsZUJ0biwgXCJlZGl0XCIpOyAvLyBTd2l0Y2ggdG8gRWRpdCBpY29uXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JhdGNocGFkVmlld1RvZ2dsZUJ0bi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiRWRpdCBtb2RlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWRkVGFza0J0bikgdGhpcy5hZGRUYXNrQnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgIC8vIERpc2FibGUgc2VhcmNoIGNvbnRyb2xzIGluIHByZXZpZXcgbW9kZS5cbiAgICAgICAgICAgIGlmICh0aGlzLnNjcmF0Y2hwYWRTZWFyY2hJbnB1dEVsKSB0aGlzLnNjcmF0Y2hwYWRTZWFyY2hJbnB1dEVsLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNjcmF0Y2hwYWRTZWFyY2hDb250cm9sc0VsKSB7XG4gICAgICAgICAgICAgICAgQXJyYXkuZnJvbSh0aGlzLnNjcmF0Y2hwYWRTZWFyY2hDb250cm9sc0VsLmNoaWxkcmVuKS5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkLm1hdGNoZXMoJ2J1dHRvbicpKSBjaGlsZC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJlbmRlciB0aGUgY29udGVudCBhcyBNYXJrZG93bi5cbiAgICAgICAgICAgIHRoaXMuc2NyYXRjaFdyYXBwZXJFbC5hZGRDbGFzcyhcIm1hcmtkb3duLXByZXZpZXctdmlld1wiKTtcbiAgICAgICAgICAgIGNvbnN0IG1hcmtkb3duQ29udGVudCA9IGF3YWl0IHRoaXMubG9hZE5vdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5wbHVnaW4uc2V0dGluZ3MuZml4ZWROb3RlRmlsZSk7XG4gICAgICAgICAgICBpZiAoZmlsZSkge1xuICAgICAgICAgICAgICAgIE1hcmtkb3duUmVuZGVyZXIucmVuZGVyKHRoaXMuYXBwLCBtYXJrZG93bkNvbnRlbnQsIHRoaXMuc2NyYXRjaFdyYXBwZXJFbCwgZmlsZS5wYXRoLCB0aGlzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gLS0tIENPTkZJR1VSRSBVSSBGT1IgRURJVCBNT0RFIC0tLVxuICAgICAgICAgICAgaWYgKHRoaXMuc2NyYXRjaHBhZFZpZXdUb2dnbGVCdG4pIHtcbiAgICAgICAgICAgICAgICBzZXRJY29uKHRoaXMuc2NyYXRjaHBhZFZpZXdUb2dnbGVCdG4sIFwiZXllXCIpOyAvLyBTd2l0Y2ggdG8gUHJldmlldyBpY29uXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JhdGNocGFkVmlld1RvZ2dsZUJ0bi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiUHJldmlldyBtb2RlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWRkVGFza0J0bikgdGhpcy5hZGRUYXNrQnRuLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgICAgICAgICAvLyBFbmFibGUgc2VhcmNoIGNvbnRyb2xzIGluIGVkaXQgbW9kZS5cbiAgICAgICAgICAgIGlmICh0aGlzLnNjcmF0Y2hwYWRTZWFyY2hJbnB1dEVsKSB0aGlzLnNjcmF0Y2hwYWRTZWFyY2hJbnB1dEVsLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodGhpcy5zY3JhdGNocGFkU2VhcmNoQ29udHJvbHNFbCkge1xuICAgICAgICAgICAgICAgIEFycmF5LmZyb20odGhpcy5zY3JhdGNocGFkU2VhcmNoQ29udHJvbHNFbC5jaGlsZHJlbikuZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5tYXRjaGVzKCdidXR0b24nKSkgY2hpbGQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5zY3JhdGNoV3JhcHBlckVsLnJlbW92ZUNsYXNzKFwibWFya2Rvd24tcHJldmlldy12aWV3XCIpO1xuICAgICAgICAgICAgLy8gVGhlIGhpZ2hsaWdodGVyIGlzIGEgZGl2IHRoYXQgc2l0cyBiZWhpbmQgdGhlIHRleHRhcmVhIHRvIHNob3cgc2VhcmNoIG1hdGNoZXMuXG4gICAgICAgICAgICB0aGlzLnNjcmF0Y2hIaWdobGlnaHRlckVsID0gdGhpcy5zY3JhdGNoV3JhcHBlckVsLmNyZWF0ZURpdih7IGNsczogXCJzY3JhdGNoLWJhc2Ugc2NyYXRjaC1oaWdobGlnaHRlclwiIH0pO1xuICAgICAgICAgICAgdGhpcy5ub3RlVGV4dGFyZWEgPSB0aGlzLnNjcmF0Y2hXcmFwcGVyRWwuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzY3JhdGNoLWJhc2Ugc2NyYXRjaC1jb250ZW50XCIgfSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmFwcC5pc01vYmlsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubm90ZVRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHlvdSB0YXAgdGhlIHRleHQgYXJlYSwgYWRkIHRoZSBjbGFzcyB0byBjcmVhdGUgdGhlIHBhZGRpbmcuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90ZVRleHRhcmVhLmNsYXNzTGlzdC5hZGQoJ2lzLWVkaXRpbmctbW9iaWxlJyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLm5vdGVUZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHlvdSB0YXAgYXdheSwgcmVtb3ZlIHRoZSBjbGFzcyB0byByZXN0b3JlIHRoZSBub3JtYWwgdmlldy5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RlVGV4dGFyZWEuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZWRpdGluZy1tb2JpbGUnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5ub3RlVGV4dGFyZWEudmFsdWUgPSB0aGlzLm5vdGVUZXh0O1xuICAgICAgICAgICAgaWYgKHdhc0ZvY3VzZWQpIHRoaXMubm90ZVRleHRhcmVhLmZvY3VzKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNjcmF0Y2hwYWRIaWdobGlnaHRzKCk7XG5cblxuICAgICAgICAgICAgLy8gU2F2ZSBjb250ZW50IG9uIGlucHV0LlxuICAgICAgICAgICAgdGhpcy5ub3RlVGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGVUZXh0ID0gdGhpcy5ub3RlVGV4dGFyZWEudmFsdWU7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlRml4ZWROb3RlKHRoaXMubm90ZVRleHQpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2NyYXRjaHBhZFNlYXJjaENvdW50KCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTY3JhdGNocGFkSGlnaGxpZ2h0cygpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFN5bmNocm9uaXplIHNjcm9sbCBwb3NpdGlvbiBiZXR3ZWVuIHRleHRhcmVhIGFuZCBoaWdobGlnaHRlci5cbiAgICAgICAgICAgIHRoaXMubm90ZVRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zY3JhdGNoSGlnaGxpZ2h0ZXJFbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcmF0Y2hIaWdobGlnaHRlckVsLnNjcm9sbFRvcCA9IHRoaXMubm90ZVRleHRhcmVhLnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JhdGNoSGlnaGxpZ2h0ZXJFbC5zY3JvbGxMZWZ0ID0gdGhpcy5ub3RlVGV4dGFyZWEuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxlZCB3aGVuIHRoZSB2aWV3IGlzIGZpcnN0IG9wZW5lZC4gSXQgbG9hZHMgYWxsIGluaXRpYWwgZGF0YSBhbmQgcmVnaXN0ZXJzXG4gICAgICogZXZlbnQgbGlzdGVuZXJzIGZvciBmaWxlIGNoYW5nZXMgYW5kIGF1dG8tcmVsb2FkaW5nLlxuICAgICAqL1xuICAgIGFzeW5jIG9uT3BlbigpIHtcbiAgICAgICAgLy8gLS0tIExvYWQgYWxsIGluaXRpYWwgZGF0YSAtLS1cbiAgICAgICAgYXdhaXQgdGhpcy5idWlsZENyZWF0ZWROb3Rlc01hcCgpO1xuICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkTW9kaWZpZWROb3Rlc01hcCgpO1xuICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkQXNzZXRDcmVhdGlvbk1hcCgpO1xuICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkVGFza3NCeURhdGVNYXAoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoSWNzRXZlbnRzKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYnVpbGRXZWVrbHlOb3Rlc0NhY2hlKCk7XG4gICAgICAgIHRoaXMubm90ZVRleHQgPSBhd2FpdCB0aGlzLmxvYWROb3RlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIHRoaXMuc2V0dXBSZW9yZGVyTW9kZSgpO1xuXG4gICAgICAgIC8vIC0tLSBSZWdpc3RlciBldmVudHMgYW5kIGludGVydmFscyAtLS1cbiAgICAgICAgY29uc3QgaW50ZXJ2YWxNcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9SZWxvYWRJbnRlcnZhbCB8fCA1MDAwO1xuICAgICAgICB0aGlzLnJlZ2lzdGVySW50ZXJ2YWwoc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IHRoaXMubm90ZVRleHRhcmVhKSByZXR1cm47XG4gICAgICAgICAgICBjb25zdCBsYXRlc3QgPSBhd2FpdCB0aGlzLmxvYWROb3RlKCk7XG4gICAgICAgICAgICBpZiAobGF0ZXN0ICE9PSB0aGlzLm5vdGVUZXh0ICYmIHRoaXMubm90ZVRleHRhcmVhKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RlVGV4dCA9IGxhdGVzdDtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGVUZXh0YXJlYS52YWx1ZSA9IGxhdGVzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaW50ZXJ2YWxNcykpO1xuXG4gICAgICAgIC8vIFRoaXMgbGlzdGVuZXIgY2hlY2tzIHRoZSBkYXRlIHdoZW4gdGhlIGFwcCB3aW5kb3cgZ2V0cyBmb2N1cy5cbiAgICAgICAgLy8gVGhpcyBzb2x2ZXMgYSAnc3RhbGUgZGF0ZSBoaWdobGlnaHQgYWZ0ZXIgYSBkZXZpY2Ugc2xlZXAnIGlzc3VlLlxuICAgICAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQod2luZG93LCAnZm9jdXMnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgLy8gT25seSBwcm9jZWVkIGlmIHRoZSBkYXkgaGFzIGFjdHVhbGx5IGNoYW5nZWQuXG4gICAgICAgICAgICBpZiAoIWlzU2FtZURheShub3csIHRoaXMubGFzdEtub3duVG9kYXkpKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJXaW5kb3cgZm9jdXMgZGV0ZWN0ZWQ6IERheSBoYXMgY2hhbmdlZC4gUmVmcmVzaGluZyBjYWxlbmRhci5cIik7XG5cbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgb3VyIHRyYWNrZXIgdG8gdGhlIG5ldyBkYXRlLlxuICAgICAgICAgICAgICAgIHRoaXMubGFzdEtub3duVG9kYXkgPSBub3c7XG5cbiAgICAgICAgICAgICAgICAvLyBFZmZpY2llbnRseSByZS1yZW5kZXIganVzdCB0aGUgY2FsZW5kYXIgZ3JpZC5cbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHRoZW1lQ2hhbmdlQ2FsbGJhY2sgPSAobXV0YXRpb25zTGlzdCkgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBtdXRhdGlvbiBvZiBtdXRhdGlvbnNMaXN0KSB7XG4gICAgICAgICAgICAgICAgLy8gV2Ugb25seSBjYXJlIGFib3V0IGNoYW5nZXMgdG8gdGhlICdjbGFzcycgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09ICdjbGFzcycpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2FzRGFyayA9IG11dGF0aW9uLm9sZFZhbHVlPy5pbmNsdWRlcygndGhlbWUtZGFyaycpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0RhcmsgPSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygndGhlbWUtZGFyaycpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBkYXJrIHRoZW1lIHN0YXR1cyBoYXMgY2hhbmdlZCwgdHJpZ2dlciBhIHJlLXJlbmRlclxuICAgICAgICAgICAgICAgICAgICBpZiAod2FzRGFyayAhPT0gaXNEYXJrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRoZW1lIGNoYW5nZWQuIFJlZnJlc2hpbmcgY2FsZW5kYXIgdmlldy5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIENyZWF0ZSBhbmQgc3RhcnQgdGhlIG9ic2VydmVyXG4gICAgICAgIHRoaXMudGhlbWVPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHRoZW1lQ2hhbmdlQ2FsbGJhY2spO1xuICAgICAgICB0aGlzLnRoZW1lT2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgICAgICAgICAgYXR0cmlidXRlRmlsdGVyOiBbJ2NsYXNzJ10sXG4gICAgICAgICAgICBhdHRyaWJ1dGVPbGRWYWx1ZTogdHJ1ZSAvLyBXZSBuZWVkIHRoZSBvbGQgdmFsdWUgdG8gZGV0ZWN0IHRoZSBjaGFuZ2VcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFVzZSBtZXRhZGF0YUNhY2hlIGZvciBtb2RpZmljYXRpb25zIC0gaXQncyBtb3JlIGVmZmljaWVudFxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAubWV0YWRhdGFDYWNoZS5vbignY2hhbmdlZCcsIGFzeW5jIChmaWxlKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1dlZWtseU5vdGUoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4aXN0aW5nV2Vla2x5Tm90ZXMuYWRkKGZpbGUucGF0aCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEluY3JlbWVudGFsbHkgdXBkYXRlIG1hcHNcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRmlsZUZyb21NYXBzKGZpbGUucGF0aCk7XG4gICAgICAgICAgICB0aGlzLmFkZEZpbGVUb01hcHMoZmlsZSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVRhc2tzRm9yRmlsZShmaWxlKTtcblxuICAgICAgICAgICAgLy8gVHJpZ2dlciBhIHRhcmdldGVkIFVJIHJlZnJlc2hcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFVJKGZpbGUpO1xuICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gVmF1bHQgZXZlbnQgZm9yIG5ldyBmaWxlc1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAudmF1bHQub24oXCJjcmVhdGVcIiwgYXN5bmMgKGZpbGUpID0+IHtcbiAgICAgICAgICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzV2Vla2x5Tm90ZShmaWxlKSkgdGhpcy5leGlzdGluZ1dlZWtseU5vdGVzLmFkZChmaWxlLnBhdGgpO1xuXG4gICAgICAgICAgICBpZiAoZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5tZCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRGaWxlVG9NYXBzKGZpbGUpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlVGFza3NGb3JGaWxlKGZpbGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEZpbGVUb0Fzc2V0TWFwKGZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVUkoZmlsZSk7XG4gICAgICAgIH0pKTtcblxuICAgICAgICAvLyBWYXVsdCBldmVudCBmb3IgZGVsZXRlZCBmaWxlc1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAudmF1bHQub24oXCJkZWxldGVcIiwgYXN5bmMgKGZpbGUpID0+IHtcbiAgICAgICAgICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcbiAgICAgICAgICAgIGlmICh0aGlzLmV4aXN0aW5nV2Vla2x5Tm90ZXMuaGFzKGZpbGUucGF0aCkpIHRoaXMuZXhpc3RpbmdXZWVrbHlOb3Rlcy5kZWxldGUoZmlsZS5wYXRoKTtcblxuICAgICAgICAgICAgaWYgKGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCcubWQnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRmlsZUZyb21NYXBzKGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgLy8gQWxzbyByZW1vdmUgdGFza3MgZnJvbSB0aGUgZGVsZXRlZCBmaWxlXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkRGF0ZUtleXMgPSB0aGlzLmZpbGVUb1Rhc2tEYXRlcy5nZXQoZmlsZS5wYXRoKSB8fCBuZXcgU2V0KCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBkYXRlS2V5IG9mIG9sZERhdGVLZXlzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tzID0gdGhpcy50YXNrc0J5RGF0ZS5nZXQoZGF0ZUtleSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXNrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nID0gdGFza3MuZmlsdGVyKHQgPT4gdC5maWxlLnBhdGggIT09IGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVtYWluaW5nLmxlbmd0aCA+IDApIHRoaXMudGFza3NCeURhdGUuc2V0KGRhdGVLZXksIHJlbWFpbmluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHRoaXMudGFza3NCeURhdGUuZGVsZXRlKGRhdGVLZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZmlsZVRvVGFza0RhdGVzLmRlbGV0ZShmaWxlLnBhdGgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZpbGVGcm9tQXNzZXRNYXAoZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFVJKGZpbGUpO1xuICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gVmF1bHQgZXZlbnQgZm9yIHJlbmFtZWQgZmlsZXNcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKFwicmVuYW1lXCIsIGFzeW5jIChmaWxlLCBvbGRQYXRoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSByZXR1cm47XG4gICAgICAgICAgICBpZiAodGhpcy5leGlzdGluZ1dlZWtseU5vdGVzLmhhcyhvbGRQYXRoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhpc3RpbmdXZWVrbHlOb3Rlcy5kZWxldGUob2xkUGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc1dlZWtseU5vdGUoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4aXN0aW5nV2Vla2x5Tm90ZXMuYWRkKGZpbGUucGF0aCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChmaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLm1kJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZpbGVGcm9tTWFwcyhvbGRQYXRoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEZpbGVUb01hcHMoZmlsZSk7XG4gICAgICAgICAgICAgICAgLy8gUmUtcG9pbnQgdGFza3MgdG8gdGhlIG5ldyBmaWxlIHBhdGhcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVRhc2tzRm9yRmlsZShmaWxlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGaWxlRnJvbUFzc2V0TWFwKG9sZFBhdGgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkRmlsZVRvQXNzZXRNYXAoZmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hVSShmaWxlKTtcbiAgICAgICAgfSkpO1xuXG5cbiAgICAgICAgY29uc3QgUFVMTF9USFJFU0hPTEQgPSA3MDsgLy8gSG93IGZhciB0aGUgdXNlciBuZWVkcyB0byBwdWxsIGRvd24gdG8gdHJpZ2dlciBhIHJlZnJlc2hcblxuICAgICAgICBjb25zdCByZXNldFB1bGxTdHlsZXMgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRhc2tSZWZyZXNoSW5kaWNhdG9yLnJlbW92ZUNsYXNzKCdpcy1yZWFkeScsICdpcy1wdWxsaW5nJywgJ2lzLXJlZnJlc2hpbmcnKTtcbiAgICAgICAgICAgIHRoaXMudGFza3NDb250ZW50RWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVkoMHB4KWA7XG4gICAgICAgICAgICB0aGlzLnRhc2tSZWZyZXNoSW5kaWNhdG9yLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKC01MHB4KSBzY2FsZSgwLjcpYDtcbiAgICAgICAgICAgIHNldEljb24odGhpcy50YXNrUmVmcmVzaEluZGljYXRvciwgJ2Fycm93LWRvd24nKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQodGhpcy50YXNrc0NvbnRlbnRFbCwgJ3RvdWNoc3RhcnQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMudGFza3NDb250ZW50RWwuc2Nyb2xsVG9wID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1Rhc2tQdWxsaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2tQdWxsU3RhcnRZID0gZS50b3VjaGVzWzBdLmNsaWVudFk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG5cbiAgICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KHRoaXMudGFza3NDb250ZW50RWwsICd0b3VjaG1vdmUnLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVGFza1B1bGxpbmcpIHJldHVybjtcblxuICAgICAgICAgICAgY29uc3QgY3VycmVudFkgPSBlLnRvdWNoZXNbMF0uY2xpZW50WTtcbiAgICAgICAgICAgIC8vIFdlIG9ubHkgY2FyZSBhYm91dCB0aGUgZG93bndhcmQgcHVsbCBkaXN0YW5jZSBmcm9tIHRoZSBzdGFydFxuICAgICAgICAgICAgdGhpcy50YXNrUHVsbERpc3RhbmNlID0gTWF0aC5tYXgoMCwgY3VycmVudFkgLSB0aGlzLnRhc2tQdWxsU3RhcnRZKTtcblxuICAgICAgICAgICAgLy8gT25seSBpbnRlcmZlcmUgaWYgdGhlIGxpc3QgaXMgc2Nyb2xsZWQgdG8gdGhlIHRvcCBBTkQgdGhlIHVzZXIgaXMgcHVsbGluZyBkb3duLlxuICAgICAgICAgICAgaWYgKHRoaXMudGFza3NDb250ZW50RWwuc2Nyb2xsVG9wID09PSAwICYmIHRoaXMudGFza1B1bGxEaXN0YW5jZSA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IHRoZSBicm93c2VyIGZyb20gc2Nyb2xsaW5nIHRoZSBwYWdlXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcHVsbFJhdGlvID0gTWF0aC5taW4odGhpcy50YXNrUHVsbERpc3RhbmNlLCBQVUxMX1RIUkVTSE9MRCk7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrc0NvbnRlbnRFbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWSgke3B1bGxSYXRpb31weClgO1xuXG4gICAgICAgICAgICAgICAgdGhpcy50YXNrUmVmcmVzaEluZGljYXRvci5hZGRDbGFzcygnaXMtcHVsbGluZycpO1xuICAgICAgICAgICAgICAgIHRoaXMudGFza1JlZnJlc2hJbmRpY2F0b3Iuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVkoJHtwdWxsUmF0aW8gLSA1MH1weCkgc2NhbGUoMC43KWA7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YXNrUHVsbERpc3RhbmNlID4gUFVMTF9USFJFU0hPTEQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrUmVmcmVzaEluZGljYXRvci5hZGRDbGFzcygnaXMtcmVhZHknKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0SWNvbih0aGlzLnRhc2tSZWZyZXNoSW5kaWNhdG9yLCAnY2hlY2snKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tSZWZyZXNoSW5kaWNhdG9yLnJlbW92ZUNsYXNzKCdpcy1yZWFkeScpO1xuICAgICAgICAgICAgICAgICAgICBzZXRJY29uKHRoaXMudGFza1JlZnJlc2hJbmRpY2F0b3IsICdhcnJvdy1kb3duJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBzdGFydGVkIHNjcm9sbGluZyBkb3duIHRoZSBsaXN0LCBzdG9wIHRyYWNraW5nIHRoZSBwdWxsXG4gICAgICAgICAgICAgICAgdGhpcy5pc1Rhc2tQdWxsaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSwgeyBwYXNzaXZlOiBmYWxzZSB9KTtcblxuICAgICAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQodGhpcy50YXNrc0NvbnRlbnRFbCwgJ3RvdWNoZW5kJywgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1Rhc2tQdWxsaW5nKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLmlzVGFza1B1bGxpbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgaWYgKHRoaXMudGFza1B1bGxEaXN0YW5jZSA+IFBVTExfVEhSRVNIT0xEKSB7XG4gICAgICAgICAgICAgICAgLy8gVHJpZ2dlciB0aGUgcmVmcmVzaFxuICAgICAgICAgICAgICAgIHRoaXMudGFza1JlZnJlc2hJbmRpY2F0b3IuYWRkQ2xhc3MoJ2lzLXJlZnJlc2hpbmcnLCAnaXMtcmVhZHknKTtcbiAgICAgICAgICAgICAgICBzZXRJY29uKHRoaXMudGFza1JlZnJlc2hJbmRpY2F0b3IsICdsb2FkZXInKTtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucG9wdWxhdGVUYXNrcygpO1xuXG4gICAgICAgICAgICAgICAgLy8gUmVzZXQgc3R5bGVzIGFmdGVyIHJlZnJlc2ggaXMgY29tcGxldGVcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRQdWxsU3R5bGVzKCk7XG4gICAgICAgICAgICAgICAgfSwgMzAwKTsgLy8gU21hbGwgZGVsYXkgZm9yIHVzZXIgdG8gc2VlIHRoZSBlbmQgb2YgdGhlIHNwaW5cblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBTbmFwIGJhY2sgaWYgbm90IHB1bGxlZCBmYXIgZW5vdWdoXG4gICAgICAgICAgICAgICAgcmVzZXRQdWxsU3R5bGVzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudGFza1B1bGxEaXN0YW5jZSA9IDA7XG5cbiAgICAgICAgfSk7XG5cblxuXG4gICAgICAgIHRoaXMuc2NoZWR1bGVEYWlseVJlZnJlc2goKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZvcmNlcyBhIGZ1bGwgcmVidWlsZCBvZiBhbGwgZGF0YSBtYXBzIGFuZCBhIGNvbXBsZXRlIHJlLXJlbmRlciBvZiB0aGUgdmlldy5cbiAgICAgKiBVc2VmdWwgYWZ0ZXIgbWFqb3Igc2V0dGluZyBjaGFuZ2VzLlxuICAgICAqL1xuICAgIGFzeW5jIHJlYnVpbGRBbmRSZW5kZXIoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYnVpbGRDcmVhdGVkTm90ZXNNYXAoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5idWlsZE1vZGlmaWVkTm90ZXNNYXAoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5idWlsZEFzc2V0Q3JlYXRpb25NYXAoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoSWNzRXZlbnRzKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYnVpbGRXZWVrbHlOb3Rlc0NhY2hlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBtb3JlIHRhcmdldGVkIFVJIHJlZnJlc2ggYmFzZWQgb24gd2hpY2ggZmlsZSB3YXMgY2hhbmdlZCxcbiAgICAgKiBhdm9pZGluZyBhIGZ1bGwgcmUtcmVuZGVyIHdoZW4gcG9zc2libGUuXG4gICAgICogQHBhcmFtIHtURmlsZX0gZmlsZSBUaGUgZmlsZSB0aGF0IHdhcyBjaGFuZ2VkLlxuICAgICAqL1xuICAgIGFzeW5jIHJlZnJlc2hVSShmaWxlKSB7XG4gICAgICAgIC8vIERlYm91bmNlIGNhbGVuZGFyIHJlbmRlciBhcyBpdCdzIHRoZSBtb3N0IGNvbW1vbiB1cGRhdGVcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY2FsZW5kYXJSZWZyZXNoRGVib3VuY2VUaW1lcik7XG4gICAgICAgIHRoaXMuY2FsZW5kYXJSZWZyZXNoRGVib3VuY2VUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgLy8gSWYgaW4gdmVydGljYWwgdmlldywgYSBmdWxsIHJlLXJlbmRlciBpcyBuZWVkZWQgdG8gdXBkYXRlIGFsbCB2aXNpYmxlIG1vbnRocy5cbiAgICAgICAgICAgIGlmICh0aGlzLmlzVmVydGljYWxWaWV3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCBqdXN0IHJlLXJlbmRlciB0aGUgc2luZ2xlIGNhbGVuZGFyIGdyaWQuXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAzMDApO1xuXG4gICAgICAgIC8vIFJlZnJlc2ggYWN0aXZlIHRhYiBpZiBpdCdzIG9wZW4gYW5kIHJlbGV2YW50XG4gICAgICAgIHN3aXRjaCAodGhpcy5hY3RpdmVUYWIpIHtcbiAgICAgICAgICAgIGNhc2UgJ3NjcmF0Y2gnOlxuICAgICAgICAgICAgICAgIGlmIChmaWxlPy5wYXRoID09PSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5maXhlZE5vdGVGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90ZVRleHQgPSBhd2FpdCB0aGlzLmxvYWROb3RlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5vdGVUZXh0YXJlYSkgdGhpcy5ub3RlVGV4dGFyZWEudmFsdWUgPSB0aGlzLm5vdGVUZXh0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ25vdGVzJzpcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5ub3Rlc1JlZnJlc2hEZWJvdW5jZVRpbWVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGVzUmVmcmVzaERlYm91bmNlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMucG9wdWxhdGVOb3RlcygpLCAyNTApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndGFza3MnOlxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRhc2tSZWZyZXNoRGVib3VuY2VUaW1lcik7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrUmVmcmVzaERlYm91bmNlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMucG9wdWxhdGVUYXNrcygpLCAyNTApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYXNzZXRzJzpcbiAgICAgICAgICAgICAgICAvLyBJbnZhbGlkYXRlIGFzc2V0IGNhY2hlIGFuZCByZWZyZXNoXG4gICAgICAgICAgICAgICAgdGhpcy5pc1VudXNlZEFzc2V0Q2FjaGVWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdWxhdGVBc3NldHMoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZVRhc2tzRm9yRmlsZShmaWxlKSB7XG4gICAgICAgIGlmICghZmlsZSB8fCAhKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkgfHwgIWZpbGUucGF0aC50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCcubWQnKSkge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBEbyBub3RoaW5nIGlmIGl0J3Mgbm90IGEgbWFya2Rvd24gZmlsZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gMS4gRWZmaWNpZW50bHkgcmVtb3ZlIGFsbCBvbGQgdGFza3MgZnJvbSB0aGlzIGZpbGVcbiAgICAgICAgY29uc3Qgb2xkRGF0ZUtleXMgPSB0aGlzLmZpbGVUb1Rhc2tEYXRlcy5nZXQoZmlsZS5wYXRoKSB8fCBuZXcgU2V0KCk7XG4gICAgICAgIGZvciAoY29uc3QgZGF0ZUtleSBvZiBvbGREYXRlS2V5cykge1xuICAgICAgICAgICAgY29uc3QgdGFza3NPbkRhdGUgPSB0aGlzLnRhc2tzQnlEYXRlLmdldChkYXRlS2V5KTtcbiAgICAgICAgICAgIGlmICh0YXNrc09uRGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ1Rhc2tzID0gdGFza3NPbkRhdGUuZmlsdGVyKHRhc2sgPT4gdGFzay5maWxlLnBhdGggIT09IGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZ1Rhc2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrc0J5RGF0ZS5zZXQoZGF0ZUtleSwgcmVtYWluaW5nVGFza3MpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFza3NCeURhdGUuZGVsZXRlKGRhdGVLZXkpOyAvLyBDbGVhbiB1cCBlbXB0eSBkYXRlIGVudHJpZXNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5maWxlVG9UYXNrRGF0ZXMuZGVsZXRlKGZpbGUucGF0aCk7XG5cbiAgICAgICAgLy8gMi4gUmUtcHJvY2VzcyB0aGUgc2luZ2xlIGZpbGUgYW5kIGFkZCBpdHMgbmV3IHRhc2tzXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrSWdub3JlRm9sZGVycy5zb21lKGZvbGRlciA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXIpKSkge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBEb24ndCByZS1hZGQgaWYgaXQncyBpbiBhbiBpZ25vcmVkIGZvbGRlclxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQoZmlsZSk7XG4gICAgICAgIGNvbnN0IHRhc2tzID0gcGFyc2VUYXNrc0Zyb21GaWxlKGZpbGUsIGNvbnRlbnQpO1xuICAgICAgICBjb25zdCBuZXdEYXRlS2V5cyA9IG5ldyBTZXQoKTtcblxuICAgICAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGFza3MpIHtcbiAgICAgICAgICAgIGlmICh0YXNrLnN0YXR1cy50b0xvd2VyQ2FzZSgpICE9PSAneCcgJiYgdGFzay5kdWVEYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZUtleSA9IG1vbWVudCh0YXNrLmR1ZURhdGUpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnRhc2tzQnlEYXRlLmhhcyhkYXRlS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tzQnlEYXRlLnNldChkYXRlS2V5LCBbXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudGFza3NCeURhdGUuZ2V0KGRhdGVLZXkpLnB1c2godGFzayk7XG4gICAgICAgICAgICAgICAgbmV3RGF0ZUtleXMuYWRkKGRhdGVLZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld0RhdGVLZXlzLnNpemUgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmZpbGVUb1Rhc2tEYXRlcy5zZXQoZmlsZS5wYXRoLCBuZXdEYXRlS2V5cyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBoaWdobGlnaHRlciBkaXYgd2l0aCA8bWFyaz4gdGFncyB0byBzaG93IHNlYXJjaCB0ZXJtIG1hdGNoZXMuXG4gICAgICovXG4gICAgdXBkYXRlU2NyYXRjaHBhZEhpZ2hsaWdodHMoKSB7XG4gICAgICAgIGlmICghdGhpcy5zY3JhdGNoSGlnaGxpZ2h0ZXJFbCB8fCAhdGhpcy5ub3RlVGV4dGFyZWEpIHJldHVybjtcblxuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5ub3RlVGV4dGFyZWEudmFsdWU7XG4gICAgICAgIGNvbnN0IHRlcm0gPSB0aGlzLnNjcmF0Y2hwYWRTZWFyY2hUZXJtO1xuXG4gICAgICAgIGlmICghdGVybSkge1xuICAgICAgICAgICAgdGhpcy5zY3JhdGNoSGlnaGxpZ2h0ZXJFbC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNhbml0aXplIHRleHQgdG8gcHJldmVudCBIVE1MIGluamVjdGlvbiBiZWZvcmUgaW5zZXJ0aW5nIGl0IGludG8gdGhlIGhpZ2hsaWdodGVyLlxuICAgICAgICBjb25zdCBzYW5pdGl6ZWRUZXh0ID0gdGV4dFxuICAgICAgICAgICAgLnJlcGxhY2UoLyYvZywgXCImYW1wO1wiKVxuICAgICAgICAgICAgLnJlcGxhY2UoLzwvZywgXCImbHQ7XCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvPi9nLCBcIiZndDtcIik7XG5cbiAgICAgICAgY29uc3QgZXNjYXBlZFRlcm0gPSB0ZXJtLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCAnXFxcXCQmJyk7XG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChlc2NhcGVkVGVybSwgJ2dpJyk7XG5cbiAgICAgICAgY29uc3QgaGlnaGxpZ2h0ZWRIdG1sID0gc2FuaXRpemVkVGV4dC5yZXBsYWNlKHJlZ2V4LCAobWF0Y2gpID0+IGA8bWFyaz4ke21hdGNofTwvbWFyaz5gKTtcbiAgICAgICAgdGhpcy5zY3JhdGNoSGlnaGxpZ2h0ZXJFbC5pbm5lckhUTUwgPSBoaWdobGlnaHRlZEh0bWw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ291bnRzIGFuZCBkaXNwbGF5cyB0aGUgbnVtYmVyIG9mIHNlYXJjaCBtYXRjaGVzIGluIHRoZSBzY3JhdGNocGFkLlxuICAgICAqL1xuICAgIHVwZGF0ZVNjcmF0Y2hwYWRTZWFyY2hDb3VudCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNjcmF0Y2hwYWRTZWFyY2hDb3VudEVsIHx8ICF0aGlzLm5vdGVUZXh0YXJlYSkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHRlcm0gPSB0aGlzLnNjcmF0Y2hwYWRTZWFyY2hUZXJtO1xuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5ub3RlVGV4dGFyZWEudmFsdWU7XG4gICAgICAgIGxldCBtYXRjaENvdW50ID0gMDtcblxuICAgICAgICBpZiAodGVybSkge1xuICAgICAgICAgICAgY29uc3QgZXNjYXBlZFRlcm0gPSB0ZXJtLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCAnXFxcXCQmJyk7XG4gICAgICAgICAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoZXNjYXBlZFRlcm0sICdnaScpO1xuICAgICAgICAgICAgbWF0Y2hDb3VudCA9ICh0ZXh0Lm1hdGNoKHJlZ2V4KSB8fCBbXSkubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zY3JhdGNocGFkU2VhcmNoQ291bnRFbC5zZXRUZXh0KGAoJHttYXRjaENvdW50fSlgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYSBmaWxlIHBhdGggc2hvdWxkIGJlIGlnbm9yZWQgYmFzZWQgb24gdXNlciBzZXR0aW5ncy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZVBhdGggVGhlIHBhdGggb2YgdGhlIGZpbGUgdG8gY2hlY2suXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNldHRpbmdLZXkgVGhlIGtleSBmb3IgdGhlIGlnbm9yZSBsaXN0IGluIHRoZSBwbHVnaW4gc2V0dGluZ3MuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHBhdGggc2hvdWxkIGJlIGlnbm9yZWQuXG4gICAgICovXG4gICAgaXNQYXRoSWdub3JlZChmaWxlUGF0aCwgc2V0dGluZ0tleSA9ICdvdGhlck5vdGVJZ25vcmVGb2xkZXJzJykge1xuICAgICAgICAvLyBOb3JtYWxpemUgZm9sZGVyIHBhdGhzIHRvIGVuZCB3aXRoIGEgc2xhc2ggZm9yIGNvbnNpc3RlbnQgbWF0Y2hpbmcuXG4gICAgICAgIGNvbnN0IGlnbm9yZUZvbGRlcnMgPSAodGhpcy5wbHVnaW4uc2V0dGluZ3Nbc2V0dGluZ0tleV0gfHwgW10pLm1hcChmID0+IGYudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLycpID8gZi50b0xvd2VyQ2FzZSgpIDogZi50b0xvd2VyQ2FzZSgpICsgJy8nKTtcbiAgICAgICAgY29uc3QgZGFpbHlOb3RlRm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGFpbHlOb3Rlc0ZvbGRlcjtcbiAgICAgICAgY29uc3QgZmlsZVBhdGhMb3dlciA9IGZpbGVQYXRoLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgLy8gQWx3YXlzIGlnbm9yZSBmaWxlcyBpbnNpZGUgdGhlIGRhaWx5IG5vdGVzIGZvbGRlciBmb3IgXCJvdGhlciBub3RlXCIgY2FsY3VsYXRpb25zLlxuICAgICAgICBpZiAoZGFpbHlOb3RlRm9sZGVyICYmIGZpbGVQYXRoTG93ZXIuc3RhcnRzV2l0aChkYWlseU5vdGVGb2xkZXIudG9Mb3dlckNhc2UoKSArIFwiL1wiKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlnbm9yZUZvbGRlcnMuc29tZShmb2xkZXIgPT4gZm9sZGVyICYmIGZpbGVQYXRoTG93ZXIuc3RhcnRzV2l0aChmb2xkZXIpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgZmlsZSB0byB0aGUgY3JlYXRlZE5vdGVzTWFwIGFuZCBtb2RpZmllZE5vdGVzTWFwLlxuICAgICAqIEBwYXJhbSB7VEZpbGV9IGZpbGUgVGhlIGZpbGUgdG8gYWRkLlxuICAgICAqL1xuICAgIGFkZEZpbGVUb01hcHMoZmlsZSkge1xuICAgICAgICBpZiAodGhpcy5pc1BhdGhJZ25vcmVkKGZpbGUucGF0aCkpIHJldHVybjtcblxuICAgICAgICAvLyBBZGQgdG8gY3JlYXRlZE5vdGVzTWFwLlxuICAgICAgICBjb25zdCBjZGF0ZSA9IG5ldyBEYXRlKGZpbGUuc3RhdC5jdGltZSk7XG4gICAgICAgIGNvbnN0IGNkYXRlS2V5ID0gbW9tZW50KGNkYXRlKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xuICAgICAgICBpZiAoIXRoaXMuY3JlYXRlZE5vdGVzTWFwLmhhcyhjZGF0ZUtleSkpIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlZE5vdGVzTWFwLnNldChjZGF0ZUtleSwgW10pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRGaWxlcyA9IHRoaXMuY3JlYXRlZE5vdGVzTWFwLmdldChjZGF0ZUtleSk7XG4gICAgICAgIGlmICghY3JlYXRlZEZpbGVzLnNvbWUoZiA9PiBmLnBhdGggPT09IGZpbGUucGF0aCkpIHtcbiAgICAgICAgICAgIGNyZWF0ZWRGaWxlcy5wdXNoKGZpbGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIHRvIG1vZGlmaWVkTm90ZXNNYXAgaWYgbW9kaWZpZWQgZGF0ZSBpcyBvbiBhIGRpZmZlcmVudCBkYXkgdGhhbiBjcmVhdGlvbiBkYXRlLlxuICAgICAgICBjb25zdCBtZGF0ZSA9IG5ldyBEYXRlKGZpbGUuc3RhdC5tdGltZSk7XG4gICAgICAgIGlmICghaXNTYW1lRGF5KGNkYXRlLCBtZGF0ZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IG1kYXRlS2V5ID0gbW9tZW50KG1kYXRlKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLm1vZGlmaWVkTm90ZXNNYXAuaGFzKG1kYXRlS2V5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMubW9kaWZpZWROb3Rlc01hcC5zZXQobWRhdGVLZXksIFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1vZGlmaWVkRmlsZXMgPSB0aGlzLm1vZGlmaWVkTm90ZXNNYXAuZ2V0KG1kYXRlS2V5KTtcbiAgICAgICAgICAgIGlmICghbW9kaWZpZWRGaWxlcy5zb21lKGYgPT4gZi5wYXRoID09PSBmaWxlLnBhdGgpKSB7XG4gICAgICAgICAgICAgICAgbW9kaWZpZWRGaWxlcy5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGZpbGUgZnJvbSBhbGwgaW50ZXJuYWwgbm90ZSBkYXRhIG1hcHMgYnkgaXRzIHBhdGguXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGVQYXRoIFRoZSBwYXRoIG9mIHRoZSBmaWxlIHRvIHJlbW92ZS5cbiAgICAgKi9cbiAgICByZW1vdmVGaWxlRnJvbU1hcHMoZmlsZVBhdGgpIHtcbiAgICAgICAgLy8gSXRlcmF0ZSB0aHJvdWdoIG1hcHMgYW5kIHJlbW92ZSBhbnkgZW50cmllcyB3aXRoIHRoZSBnaXZlbiBmaWxlIHBhdGguXG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgZmlsZXNdIG9mIHRoaXMuY3JlYXRlZE5vdGVzTWFwLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlZEZpbGVzID0gZmlsZXMuZmlsdGVyKGYgPT4gZi5wYXRoICE9PSBmaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAodXBkYXRlZEZpbGVzLmxlbmd0aCA8IGZpbGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICh1cGRhdGVkRmlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlZE5vdGVzTWFwLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlZE5vdGVzTWFwLnNldChrZXksIHVwZGF0ZWRGaWxlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgZmlsZXNdIG9mIHRoaXMubW9kaWZpZWROb3Rlc01hcC5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRGaWxlcyA9IGZpbGVzLmZpbHRlcihmID0+IGYucGF0aCAhPT0gZmlsZVBhdGgpO1xuICAgICAgICAgICAgaWYgKHVwZGF0ZWRGaWxlcy5sZW5ndGggPCBmaWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAodXBkYXRlZEZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGlmaWVkTm90ZXNNYXAuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RpZmllZE5vdGVzTWFwLnNldChrZXksIHVwZGF0ZWRGaWxlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRm9ybWF0cyBhIGZpbGUgc2l6ZSBpbiBieXRlcyBpbnRvIGEgaHVtYW4tcmVhZGFibGUgc3RyaW5nIChCLCBLQiwgTUIsIEdCKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYnl0ZXMgVGhlIGZpbGUgc2l6ZSBpbiBieXRlcy5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIGZpbGUgc2l6ZS5cbiAgICAgKi9cbiAgICBmb3JtYXRGaWxlU2l6ZShieXRlcykge1xuICAgICAgICBpZiAoYnl0ZXMgPT09IDApIHJldHVybiAnMCBCJztcbiAgICAgICAgY29uc3QgayA9IDEwMjQ7XG4gICAgICAgIGNvbnN0IHNpemVzID0gWydCJywgJ0tCJywgJ01CJywgJ0dCJ107XG4gICAgICAgIGNvbnN0IGkgPSBNYXRoLmZsb29yKE1hdGgubG9nKGJ5dGVzKSAvIE1hdGgubG9nKGspKTtcbiAgICAgICAgY29uc3QgZml4ZWQgPSBpIDwgMiA/IDAgOiAxO1xuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCgoYnl0ZXMgLyBNYXRoLnBvdyhrLCBpKSkudG9GaXhlZChmaXhlZCkpICsgJyAnICsgc2l6ZXNbaV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyB0YXNrIHRvIHRoZSBzY3JhdGNocGFkIG5vdGUgdXNpbmcgdGhlIGZvcm1hdCBkZWZpbmVkIGluIHNldHRpbmdzLlxuICAgICAqL1xuICAgIGFzeW5jIGFkZE5ld1Rhc2tUb1NjcmF0Y2hwYWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzU2NyYXRjaHBhZFByZXZpZXcgfHwgIXRoaXMubm90ZVRleHRhcmVhKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0YXNrRm9ybWF0U2V0dGluZyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQ/LnRhc2tGb3JtYXQgfHwgXCItIFsgXSBcIjtcbiAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gdGhpcy5wcm9jZXNzRGF0ZVBsYWNlaG9sZGVycyh0YXNrRm9ybWF0U2V0dGluZyk7XG4gICAgICAgIGNvbnN0IHRleHRUb0luc2VydCA9IHByb2Nlc3NlZC50ZXh0O1xuICAgICAgICBjb25zdCB0YSA9IHRoaXMubm90ZVRleHRhcmVhO1xuXG4gICAgICAgIC8vIDEuIENhcHR1cmUgY3VycmVudCBzdGF0ZVxuICAgICAgICBjb25zdCBzZWxlY3Rpb25TdGFydCA9IHRhLnNlbGVjdGlvblN0YXJ0O1xuICAgICAgICBjb25zdCB0ZXh0QmVmb3JlQ3Vyc29yID0gdGEudmFsdWUuc3Vic3RyaW5nKDAsIHNlbGVjdGlvblN0YXJ0KTtcbiAgICAgICAgY29uc3QgdGV4dEFmdGVyQ3Vyc29yID0gdGEudmFsdWUuc3Vic3RyaW5nKHNlbGVjdGlvblN0YXJ0KTtcblxuICAgICAgICAvLyAyLiBQcmVwYXJlIG5ldyB0ZXh0IGFuZCB1cGRhdGUgdGhlIHZhbHVlXG4gICAgICAgIGNvbnN0IG5lZWRzTGVhZGluZ05ld2xpbmUgPSB0ZXh0QmVmb3JlQ3Vyc29yLmxlbmd0aCA+IDAgJiYgIXRleHRCZWZvcmVDdXJzb3IuZW5kc1dpdGgoXCJcXG5cIik7XG4gICAgICAgIGNvbnN0IGZpbmFsSW5zZXJ0aW9uVGV4dCA9IG5lZWRzTGVhZGluZ05ld2xpbmUgPyBcIlxcblwiICsgdGV4dFRvSW5zZXJ0IDogdGV4dFRvSW5zZXJ0O1xuICAgICAgICBjb25zdCBuZXdUZXh0ID0gdGV4dEJlZm9yZUN1cnNvciArIGZpbmFsSW5zZXJ0aW9uVGV4dCArIHRleHRBZnRlckN1cnNvcjtcbiAgICAgICAgdGEudmFsdWUgPSBuZXdUZXh0O1xuXG4gICAgICAgIC8vIDMuIFNldCB0aGUgbmV3IGN1cnNvciBwb3NpdGlvblxuICAgICAgICBjb25zdCBuZXdDdXJzb3JQb3NpdGlvbiA9IHNlbGVjdGlvblN0YXJ0ICsgZmluYWxJbnNlcnRpb25UZXh0Lmxlbmd0aCAtICh0ZXh0VG9JbnNlcnQubGVuZ3RoIC0gcHJvY2Vzc2VkLmN1cnNvck9mZnNldCk7XG4gICAgICAgIHRhLnNldFNlbGVjdGlvblJhbmdlKG5ld0N1cnNvclBvc2l0aW9uLCBuZXdDdXJzb3JQb3NpdGlvbik7XG5cbiAgICAgICAgLy8gNC4gR2l2ZSB0aGUgdGV4dGFyZWEgZm9jdXNcbiAgICAgICAgdGEuZm9jdXMoKTtcblxuICAgICAgICAvLyA1LiBTYXZlIHRoZSBuZXcgY29udGVudCBpbW1lZGlhdGVseVxuICAgICAgICB0aGlzLm5vdGVUZXh0ID0gbmV3VGV4dDtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRml4ZWROb3RlKHRoaXMubm90ZVRleHQpO1xuICAgICAgICB0aGlzLnVwZGF0ZVNjcmF0Y2hwYWRTZWFyY2hDb3VudCgpO1xuICAgICAgICB0aGlzLnVwZGF0ZVNjcmF0Y2hwYWRIaWdobGlnaHRzKCk7XG5cbiAgICAgICAgLy8gLS0tIEZJTkFMIFNDUk9MTCBGSVggLS0tXG4gICAgICAgIC8vIDYuIFVzZSBhbiBhd2FpdGVkIFByb21pc2Ugd2l0aCBhIGxvbmdlciBkZWxheSB0byBlbnN1cmUgdGhpcyBydW5zIExBU1QuXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MCkpOyAvLyA1MG1zIGRlbGF5XG5cbiAgICAgICAgY29uc3QgbGluZUhlaWdodCA9IHBhcnNlRmxvYXQoZ2V0Q29tcHV0ZWRTdHlsZSh0YSkubGluZUhlaWdodCkgfHwgMjA7XG4gICAgICAgIGNvbnN0IGxpbmVzVG9DYXJldCA9IHRhLnZhbHVlLnNsaWNlKDAsIG5ld0N1cnNvclBvc2l0aW9uKS5zcGxpdChcIlxcblwiKS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHRhcmdldFNjcm9sbFRvcCA9IChsaW5lc1RvQ2FyZXQgLSAxKSAqIGxpbmVIZWlnaHQ7XG5cbiAgICAgICAgLy8gRGlyZWN0bHkgc2V0IHRoZSBzY3JvbGwgcG9zaXRpb24gYXMgdGhlIGZpbmFsIGFjdGlvbi5cbiAgICAgICAgdGEuc2Nyb2xsVG9wID0gdGFyZ2V0U2Nyb2xsVG9wO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogU2NhbnMgYWxsIE1hcmtkb3duIGZpbGVzIGluIHRoZSB2YXVsdCB0byBidWlsZCB0aGUgaW5pdGlhbCBgY3JlYXRlZE5vdGVzTWFwYC5cbiAgICAgKi9cbiAgICBhc3luYyBidWlsZENyZWF0ZWROb3Rlc01hcCgpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVkTm90ZXNNYXAuY2xlYXIoKTtcbiAgICAgICAgY29uc3QgYWxsTm90ZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBhbGxOb3Rlcykge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNQYXRoSWdub3JlZChmaWxlLnBhdGgpKSBjb250aW51ZTtcblxuICAgICAgICAgICAgY29uc3QgY2RhdGUgPSBuZXcgRGF0ZShmaWxlLnN0YXQuY3RpbWUpO1xuICAgICAgICAgICAgY29uc3QgZGF0ZUtleSA9IG1vbWVudChjZGF0ZSkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5jcmVhdGVkTm90ZXNNYXAuaGFzKGRhdGVLZXkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVkTm90ZXNNYXAuc2V0KGRhdGVLZXksIFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3JlYXRlZE5vdGVzTWFwLmdldChkYXRlS2V5KS5wdXNoKGZpbGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2NhbnMgYWxsIE1hcmtkb3duIGZpbGVzIGluIHRoZSB2YXVsdCB0byBidWlsZCB0aGUgaW5pdGlhbCBgbW9kaWZpZWROb3Rlc01hcGAuXG4gICAgICovXG4gICAgYXN5bmMgYnVpbGRNb2RpZmllZE5vdGVzTWFwKCkge1xuICAgICAgICB0aGlzLm1vZGlmaWVkTm90ZXNNYXAuY2xlYXIoKTtcbiAgICAgICAgY29uc3QgYWxsTm90ZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBhbGxOb3Rlcykge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNQYXRoSWdub3JlZChmaWxlLnBhdGgpKSBjb250aW51ZTtcblxuICAgICAgICAgICAgY29uc3QgY2RhdGUgPSBuZXcgRGF0ZShmaWxlLnN0YXQuY3RpbWUpO1xuICAgICAgICAgICAgY29uc3QgbWRhdGUgPSBuZXcgRGF0ZShmaWxlLnN0YXQubXRpbWUpO1xuICAgICAgICAgICAgaWYgKCFpc1NhbWVEYXkoY2RhdGUsIG1kYXRlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVLZXkgPSBtb21lbnQobWRhdGUpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLm1vZGlmaWVkTm90ZXNNYXAuaGFzKGRhdGVLZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9kaWZpZWROb3Rlc01hcC5zZXQoZGF0ZUtleSwgW10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubW9kaWZpZWROb3Rlc01hcC5nZXQoZGF0ZUtleSkuc29tZShmID0+IGYucGF0aCA9PT0gZmlsZS5wYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGlmaWVkTm90ZXNNYXAuZ2V0KGRhdGVLZXkpLnB1c2goZmlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2NhbnMgYWxsIG5vbi1NYXJrZG93biBmaWxlcyBpbiB0aGUgdmF1bHQgdG8gYnVpbGQgdGhlIGBhc3NldENyZWF0aW9uTWFwYC5cbiAgICAgKi9cbiAgICBhc3luYyBidWlsZEFzc2V0Q3JlYXRpb25NYXAoKSB7XG4gICAgICAgIHRoaXMuYXNzZXRDcmVhdGlvbk1hcC5jbGVhcigpO1xuICAgICAgICBjb25zdCBhbGxGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKCk7XG4gICAgICAgIGNvbnN0IGlnbm9yZUZvbGRlcnMgPSAodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXNzZXRJZ25vcmVGb2xkZXJzIHx8IFtdKS5tYXAoZiA9PiBmLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy8nKSA/IGYudG9Mb3dlckNhc2UoKSA6IGYudG9Mb3dlckNhc2UoKSArICcvJyk7XG4gICAgICAgIGNvbnN0IGhpZGRlblR5cGVzID0gKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGRlbkFzc2V0VHlwZXMgfHwgXCJcIilcbiAgICAgICAgICAgIC5zcGxpdCgnLCcpXG4gICAgICAgICAgICAubWFwKGV4dCA9PiBleHQudHJpbSgpLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICAgICAuZmlsdGVyKGV4dCA9PiBleHQubGVuZ3RoID4gMCk7XG5cbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGFsbEZpbGVzKSB7XG4gICAgICAgICAgICBpZiAoZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5tZCcpKSBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChoaWRkZW5UeXBlcy5pbmNsdWRlcyhmaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpKSkgY29udGludWU7IC8vIEZpbHRlciBieSBleHRlbnNpb25cblxuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGhMb3dlciA9IGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgaWYgKGlnbm9yZUZvbGRlcnMuc29tZShmb2xkZXIgPT4gZm9sZGVyICYmIGZpbGVQYXRoTG93ZXIuc3RhcnRzV2l0aChmb2xkZXIpKSkgY29udGludWU7XG5cbiAgICAgICAgICAgIGNvbnN0IGNkYXRlID0gbmV3IERhdGUoZmlsZS5zdGF0LmN0aW1lKTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGVLZXkgPSBtb21lbnQoY2RhdGUpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXNzZXRDcmVhdGlvbk1hcC5oYXMoZGF0ZUtleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2V0Q3JlYXRpb25NYXAuc2V0KGRhdGVLZXksIFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYXNzZXRDcmVhdGlvbk1hcC5nZXQoZGF0ZUtleSkucHVzaChmaWxlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbmRzIGFsbCBhc3NldCBmaWxlcyBpbiB0aGUgdmF1bHQgdGhhdCBhcmUgbm90IGxpbmtlZCB0byBmcm9tIGFueSBNYXJrZG93biBmaWxlLlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFNldDxzdHJpbmc+Pn0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBTZXQgb2YgdW51c2VkIGFzc2V0IHBhdGhzLlxuICAgICAqL1xuICAgIGFzeW5jIGdldFVudXNlZEFzc2V0UGF0aHMoKSB7XG4gICAgICAgIGNvbnN0IGFsbE1hcmtkb3duRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGNvbnN0IHJlZmVyZW5jZWRBc3NldFBhdGhzID0gbmV3IFNldCgpO1xuXG4gICAgICAgIGZvciAoY29uc3QgbWRGaWxlIG9mIGFsbE1hcmtkb3duRmlsZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUobWRGaWxlKTtcbiAgICAgICAgICAgIGlmICghY2FjaGUpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBjb25zdCBsaW5rc0FuZEVtYmVkcyA9IFsuLi4oY2FjaGUuZW1iZWRzIHx8IFtdKSwgLi4uKGNhY2hlLmxpbmtzIHx8IFtdKV07XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVmIG9mIGxpbmtzQW5kRW1iZWRzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGlua2VkRmlsZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QocmVmLmxpbmssIG1kRmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICBpZiAobGlua2VkRmlsZSAmJiAhbGlua2VkRmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5tZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZWRBc3NldFBhdGhzLmFkZChsaW5rZWRGaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbGxBc3NldFBhdGhzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKVxuICAgICAgICAgICAgLmZpbHRlcihmaWxlID0+ICFmaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLm1kJykpXG4gICAgICAgICAgICAubWFwKGZpbGUgPT4gZmlsZS5wYXRoKTtcblxuICAgICAgICBjb25zdCB1bnVzZWRBc3NldFBhdGhzID0gbmV3IFNldChhbGxBc3NldFBhdGhzLmZpbHRlcihhc3NldFBhdGggPT4gIXJlZmVyZW5jZWRBc3NldFBhdGhzLmhhcyhhc3NldFBhdGgpKSk7XG4gICAgICAgIHJldHVybiB1bnVzZWRBc3NldFBhdGhzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgdGhlIGxpc3Qgb2YgcmVjZW50IGFzc2V0cyBpbiB0aGUgXCJBc3NldHNcIiB0YWIuXG4gICAgICovXG4gICAgYXN5bmMgcG9wdWxhdGVBc3NldHMoKSB7XG4gICAgICAgIGlmICghdGhpcy5hc3NldHNDb250ZW50RWwpIHJldHVybjtcbiAgICAgICAgdGhpcy5hc3NldHNDb250ZW50RWwuZW1wdHkoKTtcblxuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuICAgICAgICBsZXQgdW51c2VkQXNzZXRQYXRocyA9IG5ldyBTZXQoKTtcbiAgICAgICAgaWYgKHNldHRpbmdzLnNob3dVbnVzZWRBc3NldHNJbmRpY2F0b3IpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1VudXNlZEFzc2V0Q2FjaGVWYWxpZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudW51c2VkQXNzZXRQYXRoc0NhY2hlID0gYXdhaXQgdGhpcy5nZXRVbnVzZWRBc3NldFBhdGhzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1VudXNlZEFzc2V0Q2FjaGVWYWxpZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1bnVzZWRBc3NldFBhdGhzID0gdGhpcy51bnVzZWRBc3NldFBhdGhzQ2FjaGU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3V0b2ZmID0gbW9tZW50KCkuc3RhcnRPZignZGF5Jykuc3VidHJhY3Qoc2V0dGluZ3MuYXNzZXRzTG9va2JhY2tEYXlzIC0gMSwgJ2RheXMnKS52YWx1ZU9mKCk7XG4gICAgICAgIGNvbnN0IGlnbm9yZUZvbGRlcnMgPSAoc2V0dGluZ3MuYXNzZXRJZ25vcmVGb2xkZXJzIHx8IFtdKS5tYXAoZiA9PiBmLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy8nKSA/IGYudG9Mb3dlckNhc2UoKSA6IGYudG9Mb3dlckNhc2UoKSArICcvJyk7XG4gICAgICAgIGNvbnN0IGhpZGRlblR5cGVzID0gKHNldHRpbmdzLmhpZGRlbkFzc2V0VHlwZXMgfHwgXCJcIikuc3BsaXQoJywnKS5tYXAoZXh0ID0+IGV4dC50cmltKCkudG9Mb3dlckNhc2UoKSkuZmlsdGVyKGV4dCA9PiBleHQubGVuZ3RoID4gMCk7XG5cbiAgICAgICAgY29uc3QgYWxsQXNzZXRzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKVxuICAgICAgICAgICAgLmZpbHRlcihmaWxlID0+XG4gICAgICAgICAgICAgICAgIWZpbGUucGF0aC50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCcubWQnKSAmJlxuICAgICAgICAgICAgICAgICFoaWRkZW5UeXBlcy5pbmNsdWRlcyhmaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpKSAmJlxuICAgICAgICAgICAgICAgICFpZ25vcmVGb2xkZXJzLnNvbWUoZiA9PiBmaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKGYpKSAmJlxuICAgICAgICAgICAgICAgIChmaWxlLnN0YXQubXRpbWUgPj0gY3V0b2ZmIHx8IGZpbGUuc3RhdC5jdGltZSA+PSBjdXRvZmYpXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYi5zdGF0Lm10aW1lIC0gYS5zdGF0Lm10aW1lKTtcblxuICAgICAgICBjb25zdCBzZWFyY2hUZXJtID0gdGhpcy5hc3NldHNTZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkQXNzZXRzID0gc2VhcmNoVGVybSA/IGFsbEFzc2V0cy5maWx0ZXIoZmlsZSA9PiBmaWxlLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXJtKSkgOiBhbGxBc3NldHM7XG4gICAgICAgIGNvbnN0IHNlYXJjaElucHV0RWwgPSB0aGlzLmFzc2V0c1NlYXJjaElucHV0RWw7XG5cbiAgICAgICAgY29uc3QgZ3JvdXBzID0geyB0b2RheTogW10sIHllc3RlcmRheTogW10sIHRoaXNXZWVrOiBbXSwgbGFzdFdlZWs6IFtdLCB0aGlzTW9udGg6IFtdLCBvbGRlcjogW10gfTtcbiAgICAgICAgY29uc3Qgbm93ID0gbW9tZW50KCk7XG4gICAgICAgIGZpbHRlcmVkQXNzZXRzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtb2RUaW1lID0gbW9tZW50KGZpbGUuc3RhdC5tdGltZSk7XG4gICAgICAgICAgICBpZiAobW9kVGltZS5pc1NhbWUobm93LCAnZGF5JykpIGdyb3Vwcy50b2RheS5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgZWxzZSBpZiAobW9kVGltZS5pc1NhbWUobm93LmNsb25lKCkuc3VidHJhY3QoMSwgJ2RheScpLCAnZGF5JykpIGdyb3Vwcy55ZXN0ZXJkYXkucHVzaChmaWxlKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKG1vZFRpbWUuaXNTYW1lKG5vdywgJ3dlZWsnKSkgZ3JvdXBzLnRoaXNXZWVrLnB1c2goZmlsZSk7XG4gICAgICAgICAgICBlbHNlIGlmIChtb2RUaW1lLmlzU2FtZShub3cuY2xvbmUoKS5zdWJ0cmFjdCgxLCAnd2VlaycpLCAnd2VlaycpKSBncm91cHMubGFzdFdlZWsucHVzaChmaWxlKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKG1vZFRpbWUuaXNTYW1lKG5vdywgJ21vbnRoJykpIGdyb3Vwcy50aGlzTW9udGgucHVzaChmaWxlKTtcbiAgICAgICAgICAgIGVsc2UgZ3JvdXBzLm9sZGVyLnB1c2goZmlsZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGdyb3VwT3JkZXIgPSBbXG4gICAgICAgICAgICB7IGtleTogJ3RvZGF5JywgbGFiZWw6ICdUb2RheScgfSwgeyBrZXk6ICd5ZXN0ZXJkYXknLCBsYWJlbDogJ1llc3RlcmRheScgfSxcbiAgICAgICAgICAgIHsga2V5OiAndGhpc1dlZWsnLCBsYWJlbDogJ1RoaXMgV2VlaycgfSwgeyBrZXk6ICdsYXN0V2VlaycsIGxhYmVsOiAnTGFzdCBXZWVrJyB9LFxuICAgICAgICAgICAgeyBrZXk6ICd0aGlzTW9udGgnLCBsYWJlbDogJ1RoaXMgTW9udGgnIH0sIHsga2V5OiAnb2xkZXInLCBsYWJlbDogJ09sZGVyJyB9LFxuICAgICAgICBdO1xuXG4gICAgICAgIGlmIChmaWx0ZXJlZEFzc2V0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuYXNzZXRzQ29udGVudEVsLmNyZWF0ZURpdih7IHRleHQ6ICdObyBhc3NldHMgZm91bmQnLCBjbHM6ICd0YXNrLWdyb3VwLWVtcHR5LW1lc3NhZ2UnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZ3JvdXBPcmRlci5mb3JFYWNoKGdyb3VwSW5mbyA9PiB7XG4gICAgICAgICAgICBjb25zdCBhc3NldHNJbkdyb3VwID0gZ3JvdXBzW2dyb3VwSW5mby5rZXldO1xuICAgICAgICAgICAgaWYgKGFzc2V0c0luR3JvdXAubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwQ29udGFpbmVyID0gdGhpcy5hc3NldHNDb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1jb250YWluZXInIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzQ29sbGFwc2VkID0gdGhpcy5jb2xsYXBzZWRBc3NldEdyb3Vwc1tncm91cEluZm8ua2V5XTtcbiAgICAgICAgICAgICAgICBpZiAoaXNDb2xsYXBzZWQpIGdyb3VwQ29udGFpbmVyLmFkZENsYXNzKCdpcy1jb2xsYXBzZWQnKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ25vdGUtZ3JvdXAtaGVhZGVyJyB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJDb250ZW50ID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ25vdGUtZ3JvdXAtaGVhZGVyLWNvbnRlbnQnIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbGxhcHNlSWNvbiA9IGhlYWRlckNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1jb2xsYXBzZS1pY29uJyB9KTtcbiAgICAgICAgICAgICAgICBzZXRJY29uKGNvbGxhcHNlSWNvbiwgJ2NoZXZyb24tZG93bicpO1xuICAgICAgICAgICAgICAgIGhlYWRlckNvbnRlbnQuY3JlYXRlU3Bhbih7IHRleHQ6IGdyb3VwSW5mby5sYWJlbCB9KTtcbiAgICAgICAgICAgICAgICBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1jb3VudCcsIHRleHQ6IGFzc2V0c0luR3JvdXAubGVuZ3RoIH0pO1xuXG5cbiAgICAgICAgICAgICAgICBoZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRvZ2dsZSB0aGUgY29sbGFwc2VkIHN0YXRlXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQ3VycmVudGx5Q29sbGFwc2VkID0gZ3JvdXBDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtY29sbGFwc2VkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIGFuZCBzYXZlIHRoZSBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlZEFzc2V0R3JvdXBzW2dyb3VwSW5mby5rZXldID0gaXNDdXJyZW50bHlDb2xsYXBzZWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLypoZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRseUNvbGxhcHNlZCA9IGdyb3VwQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWNvbGxhcHNlZCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlZEFzc2V0R3JvdXBzW2dyb3VwSW5mby5rZXldID0gY3VycmVudGx5Q29sbGFwc2VkO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgY29uc3QgbGlzdFdyYXBwZXIgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLWxpc3Qtd3JhcHBlcicgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0Fzc2V0c0dyaWRWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RXcmFwcGVyLmFkZENsYXNzKCdhc3NldHMtZ3JpZC12aWV3Jyk7XG4gICAgICAgICAgICAgICAgICAgIGFzc2V0c0luR3JvdXAuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBsaXN0V3JhcHBlci5jcmVhdGVEaXYoXCJhc3NldC1ncmlkLWl0ZW1cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGZpbGUucGF0aCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpZXcgPSBpdGVtLmNyZWF0ZURpdihcImFzc2V0LWdyaWQtcHJldmlld1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzSW1hZ2VBc3NldChmaWxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRodW1ibmFpbCA9IHByZXZpZXcuY3JlYXRlRWwoJ2ltZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRodW1ibmFpbC5zcmMgPSB0aGlzLmFwcC52YXVsdC5nZXRSZXNvdXJjZVBhdGgoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEljb24ocHJldmlldywgJ2ZpbGUtcXVlc3Rpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVFbCA9IGl0ZW0uY3JlYXRlRGl2KHsgdGV4dDogZmlsZS5uYW1lLCBjbHM6IFwiYXNzZXQtZ3JpZC1uYW1lXCIgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDEuIENsaWNraW5nIHRoZSBpbWFnZSBwcmV2aWV3IG9wZW5zIHRoZSBhc3NldCBmaWxlLlxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlldy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRmlsZUNsaWNrKGZpbGUsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDIuIENsaWNraW5nIHRoZSBuYW1lIGZpbmRzIGFuZCBvcGVucyB0aGUgbm90ZSB0aGUgYXNzZXQgaXMgb24uXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiYWNrbGlua3MgPSBhd2FpdCB0aGlzLmZpbmRBc3NldEJhY2tsaW5rcyhmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmFja2xpbmtzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub3RlRmlsZSA9IGJhY2tsaW5rc1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShub3RlRmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXRMaW5lID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxMaW5rcyA9IFsuLi4oY2FjaGUuZW1iZWRzIHx8IFtdKSwgLi4uKGNhY2hlLmxpbmtzIHx8IFtdKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlZiBvZiBhbGxMaW5rcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtlZEZpbGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHJlZi5saW5rLCBub3RlRmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlua2VkRmlsZSAmJiBsaW5rZWRGaWxlLnBhdGggPT09IGZpbGUucGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRMaW5lID0gcmVmLnBvc2l0aW9uLnN0YXJ0LmxpbmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcGVuSW5OZXdUYWIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub3Rlc09wZW5BY3Rpb24gPT09ICduZXctdGFiJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKG9wZW5Jbk5ld1RhYik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYub3BlbkZpbGUobm90ZUZpbGUsIHsgZVN0YXRlOiB7IGxpbmU6IHRhcmdldExpbmUgfSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJhY2tsaW5rcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0JhY2tsaW5rc1BvcHVwKG5hbWVFbCwgZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlRoaXMgYXNzZXQgaXMgbm90IHVzZWQgaW4gYW55IG5vdGVzLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRGaWxlQ29udGV4dE1lbnUoaXRlbSwgZmlsZSwgKCkgPT4gdGhpcy5wb3B1bGF0ZUFzc2V0cygpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGlzdFdyYXBwZXIucmVtb3ZlQ2xhc3MoJ2Fzc2V0cy1ncmlkLXZpZXcnKTtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRzSW5Hcm91cC5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gbGlzdFdyYXBwZXIuY3JlYXRlRGl2KFwibm90ZS1yb3dcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1VudXNlZCA9IHVudXNlZEFzc2V0UGF0aHMuaGFzKGZpbGUucGF0aCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlV3JhcHBlciA9IHJvdy5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLXRpdGxlLXdyYXBwZXInIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpY29uQ29udGFpbmVyID0gdGl0bGVXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogJ2Fzc2V0LWljb24tY29udGFpbmVyJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzSW1hZ2VBc3NldChmaWxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRodW1ibmFpbCA9IGljb25Db250YWluZXIuY3JlYXRlRWwoJ2ltZycsIHsgY2xzOiAnYXNzZXQtdGh1bWJuYWlsJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWwuc3JjID0gdGhpcy5hcHAudmF1bHQuZ2V0UmVzb3VyY2VQYXRoKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0gQ0xJQ0sgSUNPTiBUTyBPUEVOIEFTU0VUIC0tLVxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsgLy8gUHJldmVudHMgdGhlIHJvdydzIGNsaWNrIGxpc3RlbmVyIGZyb20gYWxzbyBmaXJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUZpbGVDbGljayhmaWxlLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNVbnVzZWQgJiYgc2V0dGluZ3Muc2hvd1VudXNlZEFzc2V0c0luZGljYXRvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdGlvbkljb25Db250YWluZXIgPSB0aXRsZVdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiAnYXNzZXQtYWN0aW9uLWljb24nIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVubGlua0ljb24gPSBhY3Rpb25JY29uQ29udGFpbmVyLmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEljb24odW5saW5rSWNvbiwgJ3VubGluaycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbGV0ZUljb24gPSBhY3Rpb25JY29uQ29udGFpbmVyLmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEljb24oZGVsZXRlSWNvbiwgJ3RyYXNoJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uSWNvbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRGVsZXRlQXNzZXQoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlRWwgPSB0aXRsZVdyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogZmlsZS5uYW1lLCBjbHM6IFwibm90ZS10aXRsZVwiIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGVFbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBmaWxlLnBhdGgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXRhQ29udGFpbmVyID0gcm93LmNyZWF0ZURpdih7IGNsczogJ25vdGUtbWV0YS1jb250YWluZXInIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0YUNvbnRhaW5lci5jcmVhdGVTcGFuKHsgdGV4dDogdGhpcy5mb3JtYXRGaWxlU2l6ZShmaWxlLnN0YXQuc2l6ZSksIGNsczogXCJub3RlLWZpbGUtc2l6ZVwiIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0YUNvbnRhaW5lci5jcmVhdGVTcGFuKHsgdGV4dDogZm9ybWF0RGF0ZVRpbWUobmV3IERhdGUoZmlsZS5zdGF0Lm10aW1lKSksIGNsczogXCJub3RlLW1vZC1kYXRlXCIgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0tLSBDTElDSyBST1cgVE8gRklORCBOT1RFKFMpIC0tLVxuICAgICAgICAgICAgICAgICAgICAgICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFja2xpbmtzID0gYXdhaXQgdGhpcy5maW5kQXNzZXRCYWNrbGlua3MoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJhY2tsaW5rcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBvbmx5IG9uZSBiYWNrbGluaywgZmluZCBpdHMgbGluZSBudW1iZXIgYW5kIHNjcm9sbCB0byBpdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90ZUZpbGUgPSBiYWNrbGlua3NbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUobm90ZUZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0TGluZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsTGlua3MgPSBbLi4uKGNhY2hlLmVtYmVkcyB8fCBbXSksIC4uLihjYWNoZS5saW5rcyB8fCBbXSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCByZWYgb2YgYWxsTGlua3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rZWRGaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChyZWYubGluaywgbm90ZUZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmtlZEZpbGUgJiYgbGlua2VkRmlsZS5wYXRoID09PSBmaWxlLnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TGluZSA9IHJlZi5wb3NpdGlvbi5zdGFydC5saW5lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3BlbkluTmV3VGFiID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZXNPcGVuQWN0aW9uID09PSAnbmV3LXRhYic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihvcGVuSW5OZXdUYWIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKG5vdGVGaWxlLCB7IGVTdGF0ZTogeyBsaW5lOiB0YXJnZXRMaW5lIH0gfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJhY2tsaW5rcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0JhY2tsaW5rc1BvcHVwKHJvdywgZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlRoaXMgYXNzZXQgaXMgbm90IHVzZWQgaW4gYW55IG5vdGVzLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRLZXlkb3duTGlzdGVuZXJzKHJvdywgc2VhcmNoSW5wdXRFbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEZpbGVDb250ZXh0TWVudShyb3csIGZpbGUsICgpID0+IHRoaXMucG9wdWxhdGVBc3NldHMoKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZmluYWwsIG9yZGVyZWQgbGlzdCBvZiB0YWJzIHRvIGRpc3BsYXksIGNvbWJpbmluZyB1c2VyLWRlZmluZWQgb3JkZXJcbiAgICAgKiB3aXRoIHRoZSBmdWxsIGxpc3Qgb2YgcG9zc2libGUgdGFicyB0byBlbnN1cmUgbm9uZSBhcmUgbWlzc2luZy5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nW119IEFuIGFycmF5IG9mIHRhYiBrZXlzIGluIHRoZSBjb3JyZWN0IG9yZGVyLlxuICAgICAqL1xuICAgIGdldEZpbmFsVGFiT3JkZXIoKSB7XG4gICAgICAgIGNvbnN0IGFsbFBvc3NpYmxlVGFicyA9IE9iamVjdC5rZXlzKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYlZpc2liaWxpdHkpO1xuICAgICAgICBjb25zdCB1c2VyVGFiT3JkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJPcmRlciB8fCBhbGxQb3NzaWJsZVRhYnM7XG4gICAgICAgIC8vIFVzZSBhIFNldCB0byBtZXJnZSB0aGUgdXNlcidzIG9yZGVyIHdpdGggYWxsIHBvc3NpYmxlIHRhYnMsIGVuc3VyaW5nIG5vIGR1cGxpY2F0ZXMgYW5kIHRoYXQgbmV3IHRhYnMgYXJlIGFwcGVuZGVkLlxuICAgICAgICBjb25zdCBmaW5hbFRhYk9yZGVyID0gWy4uLm5ldyBTZXQoWy4uLnVzZXJUYWJPcmRlciwgLi4uYWxsUG9zc2libGVUYWJzXSldO1xuICAgICAgICByZXR1cm4gZmluYWxUYWJPcmRlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbm9uLU1hcmtkb3duIGZpbGUgdG8gdGhlIGBhc3NldENyZWF0aW9uTWFwYC5cbiAgICAgKiBAcGFyYW0ge1RGaWxlfSBmaWxlIFRoZSBhc3NldCBmaWxlIHRvIGFkZC5cbiAgICAgKi9cbiAgICBhZGRGaWxlVG9Bc3NldE1hcChmaWxlKSB7XG4gICAgICAgIGlmIChmaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLm1kJykpIHJldHVybjtcblxuICAgICAgICBjb25zdCBpZ25vcmVGb2xkZXJzID0gKHRoaXMucGx1Z2luLnNldHRpbmdzLmFzc2V0SWdub3JlRm9sZGVycyB8fCBbXSkubWFwKGYgPT4gZi50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCcvJykgPyBmLnRvTG93ZXJDYXNlKCkgOiBmLnRvTG93ZXJDYXNlKCkgKyAnLycpO1xuICAgICAgICBjb25zdCBmaWxlUGF0aExvd2VyID0gZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmIChpZ25vcmVGb2xkZXJzLnNvbWUoZm9sZGVyID0+IGZvbGRlciAmJiBmaWxlUGF0aExvd2VyLnN0YXJ0c1dpdGgoZm9sZGVyKSkpIHJldHVybjtcblxuICAgICAgICBjb25zdCBjZGF0ZSA9IG5ldyBEYXRlKGZpbGUuc3RhdC5jdGltZSk7XG4gICAgICAgIGNvbnN0IGRhdGVLZXkgPSBtb21lbnQoY2RhdGUpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG4gICAgICAgIGlmICghdGhpcy5hc3NldENyZWF0aW9uTWFwLmhhcyhkYXRlS2V5KSkge1xuICAgICAgICAgICAgdGhpcy5hc3NldENyZWF0aW9uTWFwLnNldChkYXRlS2V5LCBbXSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXNzZXRzID0gdGhpcy5hc3NldENyZWF0aW9uTWFwLmdldChkYXRlS2V5KTtcbiAgICAgICAgaWYgKCFhc3NldHMuc29tZShmID0+IGYucGF0aCA9PT0gZmlsZS5wYXRoKSkge1xuICAgICAgICAgICAgYXNzZXRzLnB1c2goZmlsZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgbm9uLU1hcmtkb3duIGZpbGUgZnJvbSB0aGUgYGFzc2V0Q3JlYXRpb25NYXBgIGJ5IGl0cyBwYXRoLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlUGF0aCBUaGUgcGF0aCBvZiB0aGUgYXNzZXQgZmlsZSB0byByZW1vdmUuXG4gICAgICovXG4gICAgcmVtb3ZlRmlsZUZyb21Bc3NldE1hcChmaWxlUGF0aCkge1xuICAgICAgICBpZiAoZmlsZVBhdGgudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLm1kJykpIHJldHVybjtcblxuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIGZpbGVzXSBvZiB0aGlzLmFzc2V0Q3JlYXRpb25NYXAuZW50cmllcygpKSB7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkRmlsZXMgPSBmaWxlcy5maWx0ZXIoZiA9PiBmLnBhdGggIT09IGZpbGVQYXRoKTtcbiAgICAgICAgICAgIGlmICh1cGRhdGVkRmlsZXMubGVuZ3RoIDwgZmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHVwZGF0ZWRGaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3NldENyZWF0aW9uTWFwLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXRDcmVhdGlvbk1hcC5zZXQoa2V5LCB1cGRhdGVkRmlsZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgbW91c2UgaG92ZXIgbGlzdGVuZXJzIHRvIGNhbGVuZGFyIGhlYWRlciBjZWxscyB0byBoaWdobGlnaHQgdGhlIGVudGlyZSBjb2x1bW4uXG4gICAgICogQHBhcmFtIHtIVE1MVGFibGVSb3dFbGVtZW50fSBoZWFkZXJSb3cgVGhlIDx0aGVhZD4gcm93IGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtIVE1MVGFibGVTZWN0aW9uRWxlbWVudH0gdGFibGVCb2R5IFRoZSA8dGJvZHk+IGVsZW1lbnQuXG4gICAgICovXG4gICAgYWRkQ29sdW1uSGlnaGxpZ2h0aW5nKGhlYWRlclJvdywgdGFibGVCb2R5KSB7XG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQ29sdW1uSGlnaGxpZ2h0KSByZXR1cm47XG4gICAgICAgIGNvbnN0IGhlYWRlckNlbGxzID0gaGVhZGVyUm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJyk7XG4gICAgICAgIGhlYWRlckNlbGxzLmZvckVhY2goKHRoLCBjb2xJbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoLnRleHRDb250ZW50LnRyaW0oKSA9PT0gXCJcIikgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhpZ2hsaWdodENvbG9yID0gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3RoZW1lLWRhcmsnKVxuICAgICAgICAgICAgICAgICAgICA/IHRoaXMucGx1Z2luLnNldHRpbmdzLnJvd0hpZ2hsaWdodENvbG9yRGFya1xuICAgICAgICAgICAgICAgICAgICA6IHRoaXMucGx1Z2luLnNldHRpbmdzLnJvd0hpZ2hsaWdodENvbG9yTGlnaHQ7XG4gICAgICAgICAgICAgICAgdGguc3R5bGUuYmFja2dyb3VuZENvbG9yID0gaGlnaGxpZ2h0Q29sb3I7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm93cyA9IHRhYmxlQm9keS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xuICAgICAgICAgICAgICAgIHJvd3MuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gcm93LmNoaWxkcmVuW2NvbEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwpIGNlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gaGlnaGxpZ2h0Q29sb3I7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGguc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyc7IC8vIEFsd2F5cyBjbGVhciB0aGUgaGVhZGVyJ3MgaGlnaGxpZ2h0XG4gICAgICAgICAgICAgICAgY29uc3Qgcm93cyA9IHRhYmxlQm9keS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpO1xuICAgICAgICAgICAgICAgIHJvd3MuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gcm93LmNoaWxkcmVuW2NvbEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBjZWxsIGlzIGluIHRoZSBwZXJtYW5lbnRseSBoaWdobGlnaHRlZCByb3dcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRDdXJyZW50V2VlayAmJiByb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCdjdXJyZW50LXdlZWstcm93JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB5ZXMsIHJlc3RvcmUgdGhlIHBlcm1hbmVudCBoaWdobGlnaHQgY29sb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwZXJtYW5lbnRDb2xvciA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd0aGVtZS1kYXJrJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yb3dIaWdobGlnaHRDb2xvckRhcmtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yb3dIaWdobGlnaHRDb2xvckxpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gcGVybWFuZW50Q29sb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgY2xlYXIgdGhlIGhvdmVyIGhpZ2hsaWdodCBhcyBiZWZvcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRm9ybWF0cyB0aGUgcGVyaW9kIGFuZCB3ZWVrIG51bWJlcnMgYWNjb3JkaW5nIHRvIHRoZSB1c2VyJ3MgcHJlZmVyZW5jZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGVyaW9kIFRoZSBwZXJpb2QgbnVtYmVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3ZWVrIFRoZSB3ZWVrIG51bWJlci5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIHN0cmluZy5cbiAgICAgKi9cbiAgICBmb3JtYXRQVyhwZXJpb2QsIHdlZWspIHsgcmV0dXJuIHRoaXMucGx1Z2luLnNldHRpbmdzLnB3Rm9ybWF0LnJlcGxhY2UoJyMnLCBwZXJpb2QpLnJlcGxhY2UoJyMnLCB3ZWVrKTsgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyB0aGUgaW5maW5pdGUtc2Nyb2xsaW5nIHZlcnRpY2FsIGNhbGVuZGFyIHZpZXcuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIFRoZSBwYXJlbnQgZWxlbWVudCB0byByZW5kZXIgaW50by5cbiAgICAgKi9cbiAgICByZW5kZXJWZXJ0aWNhbENhbGVuZGFyKGNvbnRhaW5lcikge1xuICAgICAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyPy5kaXNjb25uZWN0KCk7XG5cbiAgICAgICAgLy8gRklYIDE6IFRoZSB2YXJpYWJsZSBpcyBub3cgYSBjbGFzcyBwcm9wZXJ0eSBgdGhpcy52ZXJ0aWNhbFNjcm9sbGVyRWxgXG4gICAgICAgIHRoaXMudmVydGljYWxTY3JvbGxlckVsID0gY29udGFpbmVyLmNyZWF0ZURpdihcInZlcnRpY2FsLWNhbGVuZGFyLXNjcm9sbGVyXCIpO1xuXG4gICAgICAgIGNvbnN0IGluaXRpYWxNb250aElkID0gYG1vbnRoLSR7dGhpcy5kaXNwbGF5ZWRNb250aC5nZXRGdWxsWWVhcigpfS0ke3RoaXMuZGlzcGxheWVkTW9udGguZ2V0TW9udGgoKX1gO1xuXG4gICAgICAgIC8vIFJlbmRlciBhIHJhbmdlIG9mIG1vbnRocyBhcm91bmQgdGhlIGN1cnJlbnRseSBkaXNwbGF5ZWQgbW9udGguXG4gICAgICAgIGNvbnN0IG51bU1vbnRoc0JlZm9yZSA9IDY7XG4gICAgICAgIGNvbnN0IG51bU1vbnRoc0FmdGVyID0gMTI7XG4gICAgICAgIGZvciAobGV0IGkgPSAtbnVtTW9udGhzQmVmb3JlOyBpIDw9IG51bU1vbnRoc0FmdGVyOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoRGF0ZSA9IG5ldyBEYXRlKHRoaXMuZGlzcGxheWVkTW9udGguZ2V0RnVsbFllYXIoKSwgdGhpcy5kaXNwbGF5ZWRNb250aC5nZXRNb250aCgpICsgaSwgMSk7XG5cbiAgICAgICAgICAgIC8vIEZJWCAyOiBVc2UgdGhlIG5ldyBjbGFzcyBwcm9wZXJ0eSBoZXJlXG4gICAgICAgICAgICBjb25zdCBtb250aFdyYXBwZXIgPSB0aGlzLnZlcnRpY2FsU2Nyb2xsZXJFbC5jcmVhdGVEaXYoeyBjbHM6IFwidmVydGljYWwtbW9udGgtd3JhcHBlclwiIH0pO1xuXG4gICAgICAgICAgICBtb250aFdyYXBwZXIuaWQgPSBgbW9udGgtJHttb250aERhdGUuZ2V0RnVsbFllYXIoKX0tJHttb250aERhdGUuZ2V0TW9udGgoKX1gO1xuICAgICAgICAgICAgbW9udGhXcmFwcGVyLmNyZWF0ZUVsKFwiaDNcIiwge1xuICAgICAgICAgICAgICAgIGNsczogXCJ2ZXJ0aWNhbC1tb250aC10aXRsZVwiLFxuICAgICAgICAgICAgICAgIHRleHQ6IGZvcm1hdE1vbnRoVGl0bGUobW9udGhEYXRlLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb250aFRpdGxlRm9ybWF0KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCB0YWJsZSA9IG1vbnRoV3JhcHBlci5jcmVhdGVFbChcInRhYmxlXCIsIHsgY2xzOiBcInBlcmlvZC1jYWxlbmRhci10YWJsZVwiIH0pO1xuICAgICAgICAgICAgY29uc3QgdGhlYWQgPSB0YWJsZS5jcmVhdGVFbChcInRoZWFkXCIpO1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gdGhlYWQuY3JlYXRlRWwoXCJ0clwiKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dQV0NvbHVtbikge1xuICAgICAgICAgICAgICAgIGhlYWRlclJvdy5jcmVhdGVFbChcInRoXCIsIHsgdGV4dDogXCIgXCIgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1dlZWtOdW1iZXJzKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUm93LmNyZWF0ZUVsKFwidGhcIiwgeyB0ZXh0OiB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrTnVtYmVyQ29sdW1uTGFiZWwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzdGFydERheU9mZnNldCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtTdGFydERheSA9PT0gJ21vbmRheScgPyAxIDogMDtcbiAgICAgICAgICAgIGZvciAobGV0IGQgPSAwOyBkIDwgNzsgZCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF5SW5kZXggPSAoZCArIHN0YXJ0RGF5T2Zmc2V0KSAlIDc7XG4gICAgICAgICAgICAgICAgaGVhZGVyUm93LmNyZWF0ZUVsKFwidGhcIiwgeyB0ZXh0OiBtb21lbnQoKS5kYXkoZGF5SW5kZXgpLmZvcm1hdChcImRkZFwiKS50b1VwcGVyQ2FzZSgpIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgdG9kYXkncyBoZWFkZXIgaGlnaGxpZ2h0XG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0VG9kYXlEYXlIZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1vbnRoRGF0ZS5nZXRGdWxsWWVhcigpID09PSB0b2RheS5nZXRGdWxsWWVhcigpICYmIG1vbnRoRGF0ZS5nZXRNb250aCgpID09PSB0b2RheS5nZXRNb250aCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvZGF5SGVhZGVySW5kZXggPSBBcnJheS5mcm9tKGhlYWRlclJvdy5jaGlsZHJlbikuZmluZEluZGV4KHRoID0+IHRoLnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCkgPT09IG1vbWVudCh0b2RheSkuZm9ybWF0KFwiZGRkXCIpLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9kYXlIZWFkZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlclJvdy5jaGlsZHJlblt0b2RheUhlYWRlckluZGV4XS5hZGRDbGFzcyhcInRvZGF5LWRheS1oZWFkZXJcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHRib2R5ID0gdGFibGUuY3JlYXRlRWwoXCJ0Ym9keVwiKTtcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aEdyaWQobW9udGhEYXRlLCB0Ym9keSk7XG4gICAgICAgICAgICB0aGlzLmFkZENvbHVtbkhpZ2hsaWdodGluZyhoZWFkZXJSb3csIHRib2R5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFmdGVyIHRoZSBsYXlvdXQgaXMgcmVhZHksIHNjcm9sbCB0aGUgaW5pdGlhbCBtb250aCBpbnRvIHZpZXcuXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcbiAgICAgICAgICAgIC8vIFNFVCBGTEFHIGJlZm9yZSBzY3JvbGxpbmdcbiAgICAgICAgICAgIHRoaXMuaXNQcm9ncmFtbWF0aWNTY3JvbGwgPSB0cnVlO1xuXG4gICAgICAgICAgICBjb25zdCBpbml0aWFsRWwgPSB0aGlzLnZlcnRpY2FsU2Nyb2xsZXJFbC5xdWVyeVNlbGVjdG9yKGAjJHtpbml0aWFsTW9udGhJZH1gKTtcbiAgICAgICAgICAgIGlmIChpbml0aWFsRWwpIHtcbiAgICAgICAgICAgICAgICBpbml0aWFsRWwuc2Nyb2xsSW50b1ZpZXcoeyBibG9jazogJ3N0YXJ0JyB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ0xFQVIgRkxBRyBhZnRlciBzY3JvbGwgY29tcGxldGVzXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzUHJvZ3JhbW1hdGljU2Nyb2xsID0gZmFsc2U7XG4gICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBVc2UgYSBzY3JvbGwgbGlzdGVuZXIgdG8gdXBkYXRlIHRoZSBtYWluIGhlYWRlciB0aXRsZS5cbiAgICAgICAgLy8gRklYIDQ6IFVzZSB0aGUgbmV3IGNsYXNzIHByb3BlcnR5IGhlcmVcbiAgICAgICAgdGhpcy52ZXJ0aWNhbFNjcm9sbGVyRWwuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xuXG4gICAgICAgICAgICAvLyBpZiBwcm9ncmFtbWF0aWMgc2Nyb2xsIGlzIGluIHByb2dyZXNzLCBkbyBub3RoaW5nXG4gICAgICAgICAgICBpZiAodGhpcy5pc1Byb2dyYW1tYXRpY1Njcm9sbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGl0bGVVcGRhdGVUaW1lb3V0KTtcbiAgICAgICAgICAgIHRoaXMudGl0bGVVcGRhdGVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHRvcG1vc3RWaXNpYmxlTW9udGggPSBudWxsO1xuICAgICAgICAgICAgICAgIGxldCBzbWFsbGVzdFRvcFZhbHVlID0gSW5maW5pdHk7XG5cbiAgICAgICAgICAgICAgICAvLyBGSVggNSAmIDY6IFVzZSB0aGUgbmV3IGNsYXNzIHByb3BlcnR5IGhlcmVcbiAgICAgICAgICAgICAgICBjb25zdCBzY3JvbGxlclRvcCA9IHRoaXMudmVydGljYWxTY3JvbGxlckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcbiAgICAgICAgICAgICAgICBjb25zdCBtb250aEVsZW1lbnRzID0gdGhpcy52ZXJ0aWNhbFNjcm9sbGVyRWwucXVlcnlTZWxlY3RvckFsbCgnLnZlcnRpY2FsLW1vbnRoLXdyYXBwZXInKTtcblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbW9udGhFbCBvZiBtb250aEVsZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vbnRoVG9wID0gbW9udGhFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb250aFRvcCA+PSBzY3JvbGxlclRvcCAmJiBtb250aFRvcCA8IHNtYWxsZXN0VG9wVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtYWxsZXN0VG9wVmFsdWUgPSBtb250aFRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcG1vc3RWaXNpYmxlTW9udGggPSBtb250aEVsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0b3Btb3N0VmlzaWJsZU1vbnRoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFtfLCB5ZWFyLCBtb250aF0gPSB0b3Btb3N0VmlzaWJsZU1vbnRoLmlkLnNwbGl0KCctJykubWFwKE51bWJlcik7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpc3BsYXllZE1vbnRoLmdldEZ1bGxZZWFyKCkgIT09IHllYXIgfHwgdGhpcy5kaXNwbGF5ZWRNb250aC5nZXRNb250aCgpICE9PSBtb250aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5ZWRNb250aCA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTW9udGhUaXRsZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUb2RheUJ0bkFyaWFMYWJlbCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cblxuICAgIGFzeW5jIG9uY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgaWYgKHRoaXMuZGFpbHlSZWZyZXNoVGltZW91dCkgY2xlYXJUaW1lb3V0KHRoaXMuZGFpbHlSZWZyZXNoVGltZW91dCk7XG4gICAgICAgIGlmICh0aGlzLnRoZW1lT2JzZXJ2ZXIpIHRoaXMudGhlbWVPYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBBIGhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgYSBzdGFuZGFyZGl6ZWQgc2VhcmNoIGlucHV0IHdpdGggYSBjbGVhciBidXR0b24uXG4gICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIgVGhlIHBhcmVudCBlbGVtZW50LlxuICAgICogQHBhcmFtIHtzdHJpbmd9IHBsYWNlaG9sZGVyIFRoZSBwbGFjZWhvbGRlciB0ZXh0IGZvciB0aGUgaW5wdXQuXG4gICAgKiBAcGFyYW0geyh0ZXJtOiBzdHJpbmcpID0+IHZvaWR9IG9uSW5wdXQgVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgb24gaW5wdXQuXG4gICAgKiBAcmV0dXJucyB7SFRNTElucHV0RWxlbWVudH0gVGhlIGNyZWF0ZWQgaW5wdXQgZWxlbWVudC5cbiAgICAqL1xuICAgIHNldHVwU2VhcmNoSW5wdXQoY29udGFpbmVyLCBwbGFjZWhvbGRlciwgb25JbnB1dCkge1xuICAgICAgICBjb25zdCBpbnB1dEVsID0gY29udGFpbmVyLmNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogcGxhY2Vob2xkZXIsXG4gICAgICAgICAgICBjbHM6IFwicG0tc2VhcmNoLWlucHV0XCIgLy8gVXNlIGEgY29uc2lzdGVudCBjbGFzc1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDcmVhdGUgdGhlIGNsZWFyIGJ1dHRvbiBpbnNpZGUgdGhpcyBmdW5jdGlvblxuICAgICAgICBjb25zdCBjbGVhckJ1dHRvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic2VhcmNoLWlucHV0LWNsZWFyLWJ0blwiIH0pO1xuICAgICAgICBzZXRJY29uKGNsZWFyQnV0dG9uLCBcInhcIik7XG5cbiAgICAgICAgY2xlYXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBpbnB1dEVsLnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgIGlucHV0RWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2lucHV0JykpO1xuICAgICAgICAgICAgaW5wdXRFbC5mb2N1cygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGVybSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgY2xlYXJCdXR0b24uc3R5bGUudmlzaWJpbGl0eSA9IHRlcm0gPyAndmlzaWJsZScgOiAnaGlkZGVuJztcbiAgICAgICAgICAgIG9uSW5wdXQodGVybSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgaW5wdXRFbC52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgaW5wdXRFbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnQXJyb3dEb3duJykge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50RWwgPSB0aGlzLmFjdGl2ZVRhYiA9PT0gJ25vdGVzJyA/IHRoaXMubm90ZXNDb250ZW50RWwgOiB0aGlzLnRhc2tzQ29udGVudEVsO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcubm90ZS1yb3csIC50YXNrLXJvdycpO1xuICAgICAgICAgICAgICAgIGlmIChmaXJzdEl0ZW0pIGZpcnN0SXRlbS5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGlucHV0RWw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB1cCB0aGUgdGFiIGNvbnRhaW5lciwgY3JlYXRpbmcgZHJhZ2dhYmxlIHRhYnMgd2l0aCBjbGljayBhbmQgZG91YmxlLWNsaWNrIGJlaGF2aW9ycy5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YWJDb250YWluZXIgVGhlIHBhcmVudCBlbGVtZW50IGZvciB0aGUgdGFicy5cbiAgICAgKiBAcGFyYW0geyh0YWI6IHN0cmluZykgPT4gdm9pZH0gc3dpdGNoVGFicyBUaGUgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIGEgdGFiIGlzIGNsaWNrZWQuXG4gICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCBIVE1MRWxlbWVudD59IEEgbWFwIG9mIHRhYiBrZXlzIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgSFRNTCBlbGVtZW50cy5cbiAgICAgKi9cbiAgICBzZXR1cERyYWdnYWJsZVRhYnModGFiQ29udGFpbmVyLCBzd2l0Y2hUYWJzKSB7XG4gICAgICAgIHRhYkNvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICBjb25zdCB0YWJPcmRlciA9IHRoaXMuZ2V0RmluYWxUYWJPcmRlcigpXG4gICAgICAgICAgICAuZmlsdGVyKGtleSA9PiB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJWaXNpYmlsaXR5W2tleV0pO1xuXG4gICAgICAgIGNvbnN0IHRhYkVsZW1lbnRzID0ge307XG4gICAgICAgIGNvbnN0IHRvb2x0aXBMYWJlbHMgPSB7XG4gICAgICAgICAgICBzY3JhdGNoOiBcIlNjcmF0Y2hQYWRcIixcbiAgICAgICAgICAgIG5vdGVzOiBcIlJlY2VudCBOb3Rlc1wiLFxuICAgICAgICAgICAgcGlubmVkOiBcIlBpbm5lZCBOb3Rlc1wiLFxuICAgICAgICAgICAgdGFza3M6IFwiVGFza3NcIixcbiAgICAgICAgICAgIGFzc2V0czogXCJBc3NldHNcIlxuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHRhYk9yZGVyKSB7XG4gICAgICAgICAgICBjb25zdCB0YWJFbCA9IHRhYkNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwibm90ZS10YWJcIiB9KTtcbiAgICAgICAgICAgIHRoaXMuZ2V0VGFiTGFiZWwodGFiRWwsIGtleSk7XG4gICAgICAgICAgICB0YWJFbC5kYXRhc2V0LnRhYktleSA9IGtleTtcblxuICAgICAgICAgICAgY29uc3QgaW5pdGlhbFRvb2x0aXAgPSBrZXkgPT09ICdub3RlcydcbiAgICAgICAgICAgICAgICA/ICh0aGlzLm5vdGVzVmlld01vZGUgPT09ICdwaW5uZWQnID8gdG9vbHRpcExhYmVscy5waW5uZWQgOiB0b29sdGlwTGFiZWxzLm5vdGVzKVxuICAgICAgICAgICAgICAgIDogdG9vbHRpcExhYmVsc1trZXldO1xuICAgICAgICAgICAgdGFiRWwuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgaW5pdGlhbFRvb2x0aXApO1xuXG4gICAgICAgICAgICB0YWJFbGVtZW50c1trZXldID0gdGFiRWw7XG5cbiAgICAgICAgICAgIHRhYkVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlVGFiID09PSBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHNlY29uZCBjbGljayBvbiBhbiBhbHJlYWR5IGFjdGl2ZSB0YWIsIHdoaWNoIHRyaWdnZXJzIGEgc3BlY2lhbCBhY3Rpb24uXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09ICdzY3JhdGNoJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuU2NyYXRjaHBhZEZpbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICd0YXNrcycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRHcm91cEJ5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0dyb3VwQnk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdHcm91cEJ5ID0gY3VycmVudEdyb3VwQnkgPT09ICdkYXRlJyA/ICd0YWcnIDogJ2RhdGUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0dyb3VwQnkgPSBuZXdHcm91cEJ5O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFRhYkxhYmVsKHRhYkVsLCAndGFza3MnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucG9wdWxhdGVUYXNrcygpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnYXNzZXRzJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0Fzc2V0c0dyaWRWaWV3ID0gIXRoaXMuaXNBc3NldHNHcmlkVmlldztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VGFiTGFiZWwodGFiRWwsICdhc3NldHMnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucG9wdWxhdGVBc3NldHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpZXdNb2RlID0gdGhpcy5pc0Fzc2V0c0dyaWRWaWV3ID8gJ2dyaWQnIDogJ2xpc3QnO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ25vdGVzJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3Rlc1ZpZXdNb2RlID0gdGhpcy5ub3Rlc1ZpZXdNb2RlID09PSAncmVjZW50JyA/ICdwaW5uZWQnIDogJ3JlY2VudCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub3Rlc1ZpZXdNb2RlID0gdGhpcy5ub3Rlc1ZpZXdNb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFRhYkxhYmVsKHRhYkVsLCAnbm90ZXMnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Rvb2x0aXAgPSB0aGlzLm5vdGVzVmlld01vZGUgPT09ICdwaW5uZWQnID8gdG9vbHRpcExhYmVscy5waW5uZWQgOiB0b29sdGlwTGFiZWxzLm5vdGVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFiRWwuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgbmV3VG9vbHRpcCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucG9wdWxhdGVOb3RlcygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGZpcnN0IGNsaWNrLCBqdXN0IHN3aXRjaCB0byB0aGUgdGFiLlxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2hUYWJzKGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIC0tLSBIVE1MNSBEcmFnIGFuZCBEcm9wIExpc3RlbmVycyBmb3IgcmVvcmRlcmluZyB0YWJzIC0tLVxuICAgICAgICAgICAgdGFiRWwuZHJhZ2dhYmxlID0gdHJ1ZTtcblxuICAgICAgICAgICAgdGFiRWwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywga2V5KTtcbiAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gJ21vdmUnO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGFiRWwuY2xhc3NMaXN0LmFkZCgnZHJhZ2dpbmcnKSwgMCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGFiRWwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsICgpID0+IHRhYkVsLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWdnaW5nJykpO1xuXG4gICAgICAgICAgICB0YWJFbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUuY3VycmVudFRhcmdldDtcbiAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzQWZ0ZXIgPSBlLmNsaWVudFggPiByZWN0LmxlZnQgKyByZWN0LndpZHRoIC8gMjtcblxuICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnLW92ZXItaW5kaWNhdG9yLWJlZm9yZScsICdkcmFnLW92ZXItaW5kaWNhdG9yLWFmdGVyJyk7XG4gICAgICAgICAgICAgICAgaWYgKGlzQWZ0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2RyYWctb3Zlci1pbmRpY2F0b3ItYWZ0ZXInKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnZHJhZy1vdmVyLWluZGljYXRvci1iZWZvcmUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGFiRWwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyLWluZGljYXRvci1iZWZvcmUnLCAnZHJhZy1vdmVyLWluZGljYXRvci1hZnRlcicpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRhYkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyLWluZGljYXRvci1iZWZvcmUnLCAnZHJhZy1vdmVyLWluZGljYXRvci1hZnRlcicpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZHJhZ2dlZEtleSA9IGUuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRLZXkgPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC50YWJLZXk7XG4gICAgICAgICAgICAgICAgaWYgKGRyYWdnZWRLZXkgPT09IHRhcmdldEtleSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IGUuY3VycmVudFRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0FmdGVyID0gZS5jbGllbnRYID4gcmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDI7XG5cbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudE9yZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiT3JkZXI7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3T3JkZXIgPSBjdXJyZW50T3JkZXIuZmlsdGVyKGsgPT4gayAhPT0gZHJhZ2dlZEtleSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SW5kZXggPSBuZXdPcmRlci5pbmRleE9mKHRhcmdldEtleSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNBZnRlcikge1xuICAgICAgICAgICAgICAgICAgICBuZXdPcmRlci5zcGxpY2UodGFyZ2V0SW5kZXggKyAxLCAwLCBkcmFnZ2VkS2V5KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXdPcmRlci5zcGxpY2UodGFyZ2V0SW5kZXgsIDAsIGRyYWdnZWRLZXkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYk9yZGVyID0gbmV3T3JkZXI7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuXG4gICAgICAgICAgICAgICAgbmV3T3JkZXIuZm9yRWFjaChrID0+IHRhYkNvbnRhaW5lci5hcHBlbmRDaGlsZCh0YWJFbGVtZW50c1trXSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhYkVsZW1lbnRzO1xuICAgIH1cblxuICAgIHVwZGF0ZURheUhlYWRlckhpZ2hsaWdodCgpIHtcbiAgICAgICAgLy8gMS4gSWYgdGhlIGhlYWRlciByb3cgZG9lc24ndCBleGlzdCB5ZXQsIGRvIG5vdGhpbmcuXG4gICAgICAgIGlmICghdGhpcy5jYWxlbmRhckhlYWRlclJvd0VsKSByZXR1cm47XG5cbiAgICAgICAgLy8gMi4gR2V0IGFsbCB0aGUgaGVhZGVyIGNlbGxzICgndGgnIGVsZW1lbnRzKS5cbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHRoaXMuY2FsZW5kYXJIZWFkZXJSb3dFbC5xdWVyeVNlbGVjdG9yQWxsKCd0aCcpO1xuICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG5cbiAgICAgICAgLy8gMy4gSU1QT1JUQU5UOiBSZW1vdmUgdGhlIGhpZ2hsaWdodCBmcm9tIGV2ZXJ5IGhlYWRlciBmaXJzdCB0byByZXNldCB0aGVtLlxuICAgICAgICBoZWFkZXJzLmZvckVhY2godGggPT4gdGguY2xhc3NMaXN0LnJlbW92ZSgndG9kYXktZGF5LWhlYWRlcicpKTtcblxuICAgICAgICAvLyA0LiBJZiB0aGUgdXNlciBoYXMgdGhpcyBmZWF0dXJlIHR1cm5lZCBvZmYgaW4gc2V0dGluZ3MsIHN0b3AgaGVyZS5cbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRUb2RheURheUhlYWRlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gNS4gQ2hlY2sgaWYgdGhlIG1vbnRoL3llYXIgYmVpbmcgZGlzcGxheWVkIGlzIHRoZSBhY3R1YWwgY3VycmVudCBtb250aC95ZWFyLlxuICAgICAgICBjb25zdCBpc0N1cnJlbnRNb250aCA9IHRoaXMuZGlzcGxheWVkTW9udGguZ2V0RnVsbFllYXIoKSA9PT0gdG9kYXkuZ2V0RnVsbFllYXIoKSAmJlxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5ZWRNb250aC5nZXRNb250aCgpID09PSB0b2RheS5nZXRNb250aCgpO1xuXG4gICAgICAgIC8vIDYuIE9ubHkgaWYgaXQgSVMgdGhlIGN1cnJlbnQgbW9udGgsIGFwcGx5IHRoZSBoaWdobGlnaHQuXG4gICAgICAgIGlmIChpc0N1cnJlbnRNb250aCkge1xuICAgICAgICAgICAgY29uc3QgdG9kYXlEYXlPZldlZWsgPSB0b2RheS5nZXREYXkoKTsgLy8gU3VuZGF5PTAsIE1vbmRheT0xLi4uXG4gICAgICAgICAgICBjb25zdCB3ZWVrU3RhcnRzT25Nb25kYXkgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrU3RhcnREYXkgPT09ICdtb25kYXknO1xuXG4gICAgICAgICAgICBsZXQgdG9kYXlDb2x1bW5JbmRleDtcbiAgICAgICAgICAgIGlmICh3ZWVrU3RhcnRzT25Nb25kYXkpIHtcbiAgICAgICAgICAgICAgICB0b2RheUNvbHVtbkluZGV4ID0gKHRvZGF5RGF5T2ZXZWVrID09PSAwKSA/IDYgOiB0b2RheURheU9mV2VlayAtIDE7IC8vIE1vbj0wLCBUdWU9MS4uU3VuPTZcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdG9kYXlDb2x1bW5JbmRleCA9IHRvZGF5RGF5T2ZXZWVrOyAvLyBTdW49MCwgTW9uPTEuLi5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWNjb3VudCBmb3IgdGhlIGV4dHJhIGNvbHVtbnMgeW91IG1pZ2h0IGhhdmUgKFBXLCBXZWVrTnIpXG4gICAgICAgICAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93UFdDb2x1bW4pIG9mZnNldCsrO1xuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dXZWVrTnVtYmVycykgb2Zmc2V0Kys7XG5cbiAgICAgICAgICAgIGNvbnN0IHRhcmdldFRoID0gaGVhZGVyc1t0b2RheUNvbHVtbkluZGV4ICsgb2Zmc2V0XTtcbiAgICAgICAgICAgIGlmICh0YXJnZXRUaCkge1xuICAgICAgICAgICAgICAgIHRhcmdldFRoLmNsYXNzTGlzdC5hZGQoJ3RvZGF5LWRheS1oZWFkZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBtYWluIHJlbmRlciBmdW5jdGlvbiBmb3IgdGhlIGVudGlyZSB2aWV3LiBJdCBidWlsZHMgdGhlIERPTSBmcm9tIHNjcmF0Y2guXG4gICAgICovXG4gICAgcmVuZGVyKCkge1xuICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGZpcnN0IHZpc2libGUgdGFiIHRvIGJlIHRoZSBkZWZhdWx0IGFjdGl2ZSB0YWIuXG4gICAgICAgIGNvbnN0IGZpbmFsVGFiT3JkZXIgPSB0aGlzLmdldEZpbmFsVGFiT3JkZXIoKTtcbiAgICAgICAgY29uc3QgdmlzaWJsZVRhYnMgPSBmaW5hbFRhYk9yZGVyLmZpbHRlcihrZXkgPT4gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiVmlzaWJpbGl0eVtrZXldKTtcblxuICAgICAgICAvLyBPbmx5IHJlc2V0IHRoZSBhY3RpdmUgdGFiIGlmIGl0J3Mgbm90IHNldCBvciBoYXMgYmVjb21lIGludmlzaWJsZVxuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlVGFiIHx8ICF2aXNpYmxlVGFicy5pbmNsdWRlcyh0aGlzLmFjdGl2ZVRhYikpIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlVGFiID0gdmlzaWJsZVRhYnNbMF0gfHwgbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoXCJwZXJpb2QtbW9udGgtY29udGFpbmVyXCIpO1xuICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoYGxheW91dC0ke3RoaXMucGx1Z2luLnNldHRpbmdzLmNhbGVuZGFyTGF5b3V0fWApO1xuICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoYHRvZGF5LXN0eWxlLSR7dGhpcy5wbHVnaW4uc2V0dGluZ3MudG9kYXlIaWdobGlnaHRTdHlsZX1gKTtcbiAgICAgICAgY29udGFpbmVyLnRvZ2dsZUNsYXNzKFwiaGlkZS1ncmlkXCIsICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Q2FsZW5kYXJHcmlkTGluZXMpO1xuICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImNhbGVuZGFyLWNvbGxhcHNlZFwiLCB0aGlzLmlzQ2FsZW5kYXJDb2xsYXBzZWQpO1xuICAgICAgICBjb250YWluZXIudG9nZ2xlQ2xhc3MoXCJ2ZXJ0aWNhbC12aWV3LWFjdGl2ZVwiLCB0aGlzLmlzVmVydGljYWxWaWV3KTtcbiAgICAgICAgY29udGFpbmVyLnRvZ2dsZUNsYXNzKCdtb25kYXktc3RhcnQnLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrU3RhcnREYXkgPT09ICdtb25kYXknKTtcblxuXG5cbiAgICAgICAgLy8gQWRkIHdlZWtlbmQgc2hhZGluZyBjbGFzc2VzXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRXZWVrZW5kcykge1xuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKCd3ZWVrZW5kLXNoYWRpbmctZW5hYmxlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dQV0NvbHVtbikge1xuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKCdoYXMtcHctY29sdW1uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1dlZWtOdW1iZXJzKSB7XG4gICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoJ2hhcy13ZWVrLW51bWJlcnMnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLSBIZWFkZXIgYW5kIE5hdmlnYXRpb24gLS0tXG4gICAgICAgIGNvbnN0IGhlYWRlckRpdiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoXCJtb250aC1oZWFkZXJcIik7XG4gICAgICAgIHRoaXMubW9udGhOYW1lRWwgPSBoZWFkZXJEaXYuY3JlYXRlRGl2KHsgY2xzOiBcIm1vbnRoLWhlYWRlci10aXRsZVwiIH0pO1xuICAgICAgICB0aGlzLnVwZGF0ZU1vbnRoVGl0bGUoKTtcbiAgICAgICAgdGhpcy5tb250aE5hbWVFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIC8vIFNFVCBUSEUgRkxBRyBiZWZvcmUgc3dpdGNoaW5nIHZpZXdzXG4gICAgICAgICAgICB0aGlzLmlzUHJvZ3JhbW1hdGljU2Nyb2xsID0gdHJ1ZTtcblxuICAgICAgICAgICAgdGhpcy5pc1ZlcnRpY2FsVmlldyA9ICF0aGlzLmlzVmVydGljYWxWaWV3O1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcblxuICAgICAgICAgICAgLy8gQ0xFQVIgVEhFIEZMQUcgYWZ0ZXIgcmVuZGVyIGFuZCBpbml0aWFsIHNjcm9sbCBjb21wbGV0ZVxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1Byb2dyYW1tYXRpY1Njcm9sbCA9IGZhbHNlO1xuICAgICAgICAgICAgfSwgODAwKTsgIC8vIExvbmdlciBkZWxheSBmb3IgaW5pdGlhbCB2aWV3IHJlbmRlciBvbiBtb2JpbGVcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG5hdkRpdiA9IGhlYWRlckRpdi5jcmVhdGVEaXYoeyBjbHM6IFwibW9udGgtaGVhZGVyLW5hdlwiIH0pO1xuXG4gICAgICAgIGNvbnN0IGJhY2tCdG4gPSBuYXZEaXYuY3JlYXRlRWwoXCJidXR0b25cIik7XG4gICAgICAgIGJhY2tCdG4uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBcIlByZXZpb3VzIG1vbnRoXCIpO1xuICAgICAgICBzZXRJY29uKGJhY2tCdG4sIFwiY2hldnJvbi1sZWZ0XCIpO1xuICAgICAgICBiYWNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNWZXJ0aWNhbFZpZXcpIHtcbiAgICAgICAgICAgICAgICAvLyBTRVQgRkxBR1xuICAgICAgICAgICAgICAgIHRoaXMuaXNQcm9ncmFtbWF0aWNTY3JvbGwgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5ZWRNb250aC5zZXRNb250aCh0aGlzLmRpc3BsYXllZE1vbnRoLmdldE1vbnRoKCkgLSAxLCAxKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldE1vbnRoSWQgPSBgbW9udGgtJHt0aGlzLmRpc3BsYXllZE1vbnRoLmdldEZ1bGxZZWFyKCl9LSR7dGhpcy5kaXNwbGF5ZWRNb250aC5nZXRNb250aCgpfWA7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0RWwgPSB0aGlzLnZlcnRpY2FsU2Nyb2xsZXJFbD8ucXVlcnlTZWxlY3RvcihgIyR7dGFyZ2V0TW9udGhJZH1gKTtcblxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRFbCkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRFbC5zY3JvbGxJbnRvVmlldyh7IGJsb2NrOiAnc3RhcnQnLCBiZWhhdmlvcjogJ3Ntb290aCcgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTW9udGhUaXRsZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRvZGF5QnRuQXJpYUxhYmVsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ0xFQVIgRkxBR1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQcm9ncmFtbWF0aWNTY3JvbGwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlTW9udGgoLTEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gU3RvcmUgcmVmZXJlbmNlIGFuZCBhZGQgbmV3IGV2ZW50IGxpc3RlbmVyIGZvciB0aGUgXCJUb2RheVwiIGJ1dHRvblxuICAgICAgICBjb25zdCB0b2RheUJ0biA9IG5hdkRpdi5jcmVhdGVFbCgnYnV0dG9uJyk7XG4gICAgICAgIHRoaXMudG9kYXlCdG4gPSB0b2RheUJ0bjtcbiAgICAgICAgc2V0SWNvbih0b2RheUJ0biwgJ2NhbGVuZGFyLWNsb2NrJyk7XG5cbiAgICAgICAgLy8gQXBwbHkgaW5pdGlhbCBzdHlsZSBhbmQgQVJJQSBsYWJlbCBvbiByZW5kZXJcbiAgICAgICAgaWYgKHRoaXMuaXNQb3B1cExvY2tlZCkge1xuICAgICAgICAgICAgdGhpcy50b2RheUJ0bi5jbGFzc0xpc3QuYWRkKCdwb3B1cC1sb2NrZWQnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVRvZGF5QnRuQXJpYUxhYmVsKCk7XG5cbiAgICAgICAgdG9kYXlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBQcmltYXJ5IEFjdGlvbjogVW5sb2NrIHBvcHVwcyBpZiB0aGV5IGFyZSBsb2NrZWQuXG4gICAgICAgICAgICBpZiAodGhpcy5pc1BvcHVwTG9ja2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1BvcHVwTG9ja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy50b2RheUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cC1sb2NrZWQnKTtcbiAgICAgICAgICAgICAgICAvL25ldyBOb3RpY2UoJ0NhbGVuZGFyIHBvcHVwcyByZS1lbmFibGVkLicpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVG9kYXlCdG5BcmlhTGFiZWwoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICBjb25zdCBpc0FscmVhZHlDdXJyZW50TW9udGggPSB0aGlzLmRpc3BsYXllZE1vbnRoLmdldEZ1bGxZZWFyKCkgPT09IG5vdy5nZXRGdWxsWWVhcigpICYmIHRoaXMuZGlzcGxheWVkTW9udGguZ2V0TW9udGgoKSA9PT0gbm93LmdldE1vbnRoKCk7XG5cbiAgICAgICAgICAgIGlmICghaXNBbHJlYWR5Q3VycmVudE1vbnRoKSB7XG4gICAgICAgICAgICAgICAgLy8gQUNUSU9OIEE6IElmIG5vdCBvbiB0aGUgY3VycmVudCBtb250aCwgbmF2aWdhdGUgdGhlcmUuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNWZXJ0aWNhbFZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU0VUIFRIRSBGTEFHIFRPIFBSRVZFTlQgU0NST0xMIExJU1RFTkVSIElOVEVSRkVSRU5DRVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUHJvZ3JhbW1hdGljU2Nyb2xsID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBTZXQgc3RhdGUgdG8gdG9kYXlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5ZWRNb250aCA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluaXRpYWxNb250aElkID0gYG1vbnRoLSR7dGhpcy5kaXNwbGF5ZWRNb250aC5nZXRGdWxsWWVhcigpfS0ke3RoaXMuZGlzcGxheWVkTW9udGguZ2V0TW9udGgoKX1gO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgc3RvcmVkIHNjcm9sbGVyIHJlZmVyZW5jZSB0byBmaW5kIHRoZSBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZlcnRpY2FsU2Nyb2xsZXJFbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5pdGlhbEVsID0gdGhpcy52ZXJ0aWNhbFNjcm9sbGVyRWwucXVlcnlTZWxlY3RvcihgIyR7aW5pdGlhbE1vbnRoSWR9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbEVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2Nyb2xsIHRvIHRoZSBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbEVsLnNjcm9sbEludG9WaWV3KHsgYmxvY2s6ICdzdGFydCcsIGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgVUkgaW1tZWRpYXRlbHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1vbnRoVGl0bGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRvZGF5QnRuQXJpYUxhYmVsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDTEVBUiBUSEUgRkxBRyBBRlRFUiBTQ1JPTEwgQU5JTUFUSU9OIENPTVBMRVRFU1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSB0aW1lb3V0IHNob3VsZCBtYXRjaCBvciBleGNlZWQgdGhlIHNtb290aCBzY3JvbGwgZHVyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1Byb2dyYW1tYXRpY1Njcm9sbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7ICAvLyBBZGp1c3QgdGltaW5nIGlmIG5lZWRlZCAoNjAwLTgwMG1zIGZvciBsb25nZXIgc2Nyb2xscylcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaGFuZGxlcyB0aGUgc3RhbmRhcmQgc2luZ2xlLW1vbnRoIHZpZXdcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VNb250aCgwLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBQ1RJT04gQjogSWYgYWxyZWFkeSBvbiB0aGUgY3VycmVudCBtb250aCwgbG9jayB0aGUgcG9wdXBzLlxuICAgICAgICAgICAgdGhpcy5pc1BvcHVwTG9ja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMudG9kYXlCdG4uY2xhc3NMaXN0LmFkZCgncG9wdXAtbG9ja2VkJyk7XG4gICAgICAgICAgICAvL25ldyBOb3RpY2UoJ0NhbGVuZGFyIHBvcHVwcyBkaXNhYmxlZC4nKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVG9kYXlCdG5BcmlhTGFiZWwoKTtcbiAgICAgICAgfSk7XG5cblxuXG4gICAgICAgIC8vIEVuc3VyZSB0aGUgYnV0dG9uIHN0eWxlIGlzIGNvcnJlY3Qgb24gcmUtcmVuZGVyXG4gICAgICAgIGlmICh0aGlzLmlzUG9wdXBMb2NrZWQpIHtcbiAgICAgICAgICAgIHRoaXMudG9kYXlCdG4uY2xhc3NMaXN0LmFkZCgncG9wdXAtbG9ja2VkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmb3J3YXJkQnRuID0gbmF2RGl2LmNyZWF0ZUVsKFwiYnV0dG9uXCIpO1xuICAgICAgICBmb3J3YXJkQnRuLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgXCJOZXh0IG1vbnRoXCIpO1xuICAgICAgICBzZXRJY29uKGZvcndhcmRCdG4sIFwiY2hldnJvbi1yaWdodFwiKTtcbiAgICAgICAgZm9yd2FyZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVmVydGljYWxWaWV3KSB7XG4gICAgICAgICAgICAgICAgLy8gU0VUIEZMQUdcbiAgICAgICAgICAgICAgICB0aGlzLmlzUHJvZ3JhbW1hdGljU2Nyb2xsID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheWVkTW9udGguc2V0TW9udGgodGhpcy5kaXNwbGF5ZWRNb250aC5nZXRNb250aCgpICsgMSwgMSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRNb250aElkID0gYG1vbnRoLSR7dGhpcy5kaXNwbGF5ZWRNb250aC5nZXRGdWxsWWVhcigpfS0ke3RoaXMuZGlzcGxheWVkTW9udGguZ2V0TW9udGgoKX1gO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEVsID0gdGhpcy52ZXJ0aWNhbFNjcm9sbGVyRWw/LnF1ZXJ5U2VsZWN0b3IoYCMke3RhcmdldE1vbnRoSWR9YCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0RWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RWwuc2Nyb2xsSW50b1ZpZXcoeyBibG9jazogJ3N0YXJ0JywgYmVoYXZpb3I6ICdzbW9vdGgnIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1vbnRoVGl0bGUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUb2RheUJ0bkFyaWFMYWJlbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIENMRUFSIEZMQUdcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUHJvZ3JhbW1hdGljU2Nyb2xsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZU1vbnRoKDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjb2xsYXBzZUJ0biA9IG5hdkRpdi5jcmVhdGVFbChcImJ1dHRvblwiKTtcbiAgICAgICAgdGhpcy5jb2xsYXBzZUJ0biA9IGNvbGxhcHNlQnRuO1xuICAgICAgICBjb2xsYXBzZUJ0bi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiVG9nZ2xlIGNhbGVuZGFyIHZpc2liaWxpdHlcIik7XG5cbiAgICAgICAgc2V0SWNvbih0aGlzLmNvbGxhcHNlQnRuLCB0aGlzLmlzQ2FsZW5kYXJDb2xsYXBzZWQgPyBcImNoZXZyb24tdXBcIiA6IFwiY2hldnJvbi1kb3duXCIpO1xuXG4gICAgICAgIHRoaXMuY29sbGFwc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNDYWxlbmRhckNvbGxhcHNlZCA9ICF0aGlzLmlzQ2FsZW5kYXJDb2xsYXBzZWQ7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC50b2dnbGUoXCJjYWxlbmRhci1jb2xsYXBzZWRcIiwgdGhpcy5pc0NhbGVuZGFyQ29sbGFwc2VkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gLS0tIENhbGVuZGFyIFJlbmRlcmluZyAoVmVydGljYWwgb3IgSG9yaXpvbnRhbCkgLS0tXG4gICAgICAgIGlmICh0aGlzLmlzVmVydGljYWxWaWV3KSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclZlcnRpY2FsQ2FsZW5kYXIoY29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlV3JhcHBlciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwiY2FsZW5kYXItdGFibGUtd3JhcHBlclwiIH0pO1xuICAgICAgICAgICAgY29uc3QgdGFibGUgPSB0YWJsZVdyYXBwZXIuY3JlYXRlRWwoXCJ0YWJsZVwiLCB7IGNsczogXCJwZXJpb2QtY2FsZW5kYXItdGFibGVcIiB9KTtcbiAgICAgICAgICAgIHRoaXMuYXR0YWNoU3dpcGVMaXN0ZW5lcnModGFibGVXcmFwcGVyLCBoZWFkZXJEaXYpO1xuICAgICAgICAgICAgY29uc3QgdGhlYWQgPSB0YWJsZS5jcmVhdGVFbCgndGhlYWQnKTtcbiAgICAgICAgICAgIC8vIFVzZSAndGhpcy4nIHRvIHN0b3JlIHRoZSBoZWFkZXIgcm93IHNvIHdlIGNhbiBhY2Nlc3MgaXQgbGF0ZXJcbiAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJIZWFkZXJSb3dFbCA9IHRoZWFkLmNyZWF0ZUVsKCd0cicpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1BXQ29sdW1uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWxlbmRhckhlYWRlclJvd0VsLmNyZWF0ZUVsKCd0aCcsIHsgdGV4dDogJycgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1dlZWtOdW1iZXJzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWxlbmRhckhlYWRlclJvd0VsLmNyZWF0ZUVsKCd0aCcsIHsgdGV4dDogdGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla051bWJlckNvbHVtbkxhYmVsIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBzdGFydERheU9mZnNldCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtTdGFydERheSA9PT0gJ21vbmRheScgPyAxIDogMDtcbiAgICAgICAgICAgIGZvciAobGV0IGQgPSAwOyBkIDwgNzsgZCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF5SW5kZXggPSAoZCArIHN0YXJ0RGF5T2Zmc2V0KSAlIDc7XG4gICAgICAgICAgICAgICAgLy8gTm90ZTogVGhlIGhpZ2hsaWdodGluZyBsb2dpYyBoYXMgYmVlbiBjb21wbGV0ZWx5IHJlbW92ZWQgZnJvbSB0aGlzIGxvb3BcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGVuZGFySGVhZGVyUm93RWwuY3JlYXRlRWwoJ3RoJywgeyB0ZXh0OiBtb21lbnQoKS5kYXkoZGF5SW5kZXgpLmZvcm1hdCgnZGRkJykudG9VcHBlckNhc2UoKSB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gLi4uIHRoZSBuZXh0IGxpbmUgaW4geW91ciBjb2RlIHNob3VsZCBiZSB0aGlzLmNhbGVuZGFyQm9keUVsID0gdGFibGUuY3JlYXRlRWwoXCJ0Ym9keVwiKTtcbiAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJCb2R5RWwgPSB0YWJsZS5jcmVhdGVFbChcInRib2R5XCIpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xuICAgICAgICAgICAgdGhpcy5hZGRDb2x1bW5IaWdobGlnaHRpbmcodGhpcy5jYWxlbmRhckhlYWRlclJvd0VsLCB0aGlzLmNhbGVuZGFyQm9keUVsKTtcblxuICAgICAgICAgICAgLy8gQWRkIHRoaXMgbGluZSByaWdodCBoZXJlIHRvIHNldCB0aGUgaGlnaGxpZ2h0IGNvcnJlY3RseSBvbiB0aGUgZmlyc3QgbG9hZFxuICAgICAgICAgICAgdGhpcy51cGRhdGVEYXlIZWFkZXJIaWdobGlnaHQoKTtcblxuXG4gICAgICAgICAgICAvLyAtLS0gVGFicyBhbmQgQ29udGVudCBQYW5lbHMgLS0tXG4gICAgICAgICAgICBjb25zdCB0YWJXcmFwcGVyID0gY29udGFpbmVyLmNyZWF0ZURpdihcInRhYnMtY29udGVudC13cmFwcGVyXCIpO1xuICAgICAgICAgICAgY29uc3QgYXJlVGFic1Zpc2libGUgPSBPYmplY3QudmFsdWVzKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYlZpc2liaWxpdHkpLnNvbWUodmlzaWJsZSA9PiB2aXNpYmxlKTtcbiAgICAgICAgICAgIGlmICghYXJlVGFic1Zpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0YWJXcmFwcGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyhcInRhYnMtYXJlLXZpc2libGVcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHRhYkhlYWRlciA9IHRhYldyYXBwZXIuY3JlYXRlRGl2KFwibm90ZS10YWItaGVhZGVyXCIpO1xuICAgICAgICAgICAgY29uc3QgdGFiQ29udGFpbmVyID0gdGFiSGVhZGVyLmNyZWF0ZURpdihcInRhYi1jb250YWluZXJcIik7XG4gICAgICAgICAgICBjb25zdCBzZWFyY2hXcmFwcGVyID0gdGFiSGVhZGVyLmNyZWF0ZURpdihcInNlYXJjaC13cmFwcGVyXCIpO1xuXG4gICAgICAgICAgICBjb25zdCBzY3JhdGNocGFkU2VhcmNoQ29udGFpbmVyID0gc2VhcmNoV3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6IFwicG0tc2VhcmNoLWNvbnRhaW5lclwiIH0pO1xuICAgICAgICAgICAgY29uc3Qgbm90ZXNTZWFyY2hDb250YWluZXIgPSBzZWFyY2hXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogXCJwbS1zZWFyY2gtY29udGFpbmVyXCIgfSk7XG4gICAgICAgICAgICBjb25zdCBhc3NldHNTZWFyY2hDb250YWluZXIgPSBzZWFyY2hXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogXCJwbS1zZWFyY2gtY29udGFpbmVyXCIgfSk7XG4gICAgICAgICAgICBjb25zdCB0YXNrc1NlYXJjaENvbnRhaW5lciA9IHNlYXJjaFdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiBcInBtLXNlYXJjaC1jb250YWluZXJcIiB9KTtcblxuICAgICAgICAgICAgLy8gLS0gQ09OVEVOVCBQQU5FTFMgLS1cbiAgICAgICAgICAgIHRoaXMuc2NyYXRjaFdyYXBwZXJFbCA9IHRhYldyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiBcInNjcmF0Y2hwYWQtd3JhcHBlclwiIH0pO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJTY3JhdGNocGFkQ29udGVudCgpO1xuXG4gICAgICAgICAgICB0aGlzLm5vdGVzQ29udGVudEVsID0gdGFiV3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6IFwibm90ZXMtY29udGFpbmVyXCIgfSk7XG4gICAgICAgICAgICB0aGlzLmFzc2V0c0NvbnRlbnRFbCA9IHRhYldyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiBcIm5vdGVzLWNvbnRhaW5lclwiIH0pO1xuICAgICAgICAgICAgdGhpcy50YXNrc0NvbnRlbnRFbCA9IHRhYldyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiBcInRhc2tzLWNvbnRhaW5lclwiIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnRhc2tSZWZyZXNoSW5kaWNhdG9yID0gdGFiV3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6ICdwbS1yZWZyZXNoLWluZGljYXRvcicgfSk7XG4gICAgICAgICAgICBzZXRJY29uKHRoaXMudGFza1JlZnJlc2hJbmRpY2F0b3IsICdhcnJvdy1kb3duJyk7XG5cbiAgICAgICAgICAgIC8vIEZ1bmN0aW9uIHRvIGhhbmRsZSBzd2l0Y2hpbmcgYmV0d2VlbiB0YWJzLlxuICAgICAgICAgICAgY29uc3Qgc3dpdGNoVGFicyA9ICh0YWIpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYiA9IHRhYjtcbiAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKHRhYkVsZW1lbnRzKS5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpKTtcbiAgICAgICAgICAgICAgICBpZiAodGFiRWxlbWVudHNbdGFiXSkgdGFiRWxlbWVudHNbdGFiXS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcblxuICAgICAgICAgICAgICAgIC8vIFRvZ2dsZSB2aXNpYmlsaXR5IG9mIGNvbnRlbnQgcGFuZWxzIGFuZCB0aGVpciBjb3JyZXNwb25kaW5nIHNlYXJjaCBiYXJzLlxuICAgICAgICAgICAgICAgIHRoaXMuc2NyYXRjaFdyYXBwZXJFbC5zdHlsZS5kaXNwbGF5ID0gKHRhYiA9PT0gXCJzY3JhdGNoXCIpID8gXCJncmlkXCIgOiBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGVzQ29udGVudEVsLnN0eWxlLmRpc3BsYXkgPSAodGFiID09PSBcIm5vdGVzXCIpID8gXCJibG9ja1wiIDogXCJub25lXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NldHNDb250ZW50RWwuc3R5bGUuZGlzcGxheSA9ICh0YWIgPT09IFwiYXNzZXRzXCIpID8gXCJcIiA6IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIHRoaXMudGFza3NDb250ZW50RWwuc3R5bGUuZGlzcGxheSA9ICh0YWIgPT09IFwidGFza3NcIikgPyBcImJsb2NrXCIgOiBcIm5vbmVcIjtcblxuICAgICAgICAgICAgICAgIHNjcmF0Y2hwYWRTZWFyY2hDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICh0YWIgPT09IFwic2NyYXRjaFwiKSA/IFwiZmxleFwiIDogXCJub25lXCI7XG4gICAgICAgICAgICAgICAgbm90ZXNTZWFyY2hDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICh0YWIgPT09IFwibm90ZXNcIikgPyBcImZsZXhcIiA6IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIGFzc2V0c1NlYXJjaENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gKHRhYiA9PT0gXCJhc3NldHNcIikgPyBcImZsZXhcIiA6IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIHRhc2tzU2VhcmNoQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAodGFiID09PSBcInRhc2tzXCIpID8gXCJmbGV4XCIgOiBcIm5vbmVcIjtcblxuICAgICAgICAgICAgICAgIC8vIFBvcHVsYXRlIHRoZSBjb250ZW50IG9mIHRoZSBuZXdseSBhY3RpdmF0ZWQgdGFiLlxuICAgICAgICAgICAgICAgIGlmICh0YWIgPT09IFwibm90ZXNcIikgdGhpcy5wb3B1bGF0ZU5vdGVzKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRhYiA9PT0gXCJhc3NldHNcIikgdGhpcy5wb3B1bGF0ZUFzc2V0cygpO1xuICAgICAgICAgICAgICAgIGlmICh0YWIgPT09IFwidGFza3NcIikgdGhpcy5wb3B1bGF0ZVRhc2tzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCB0YWJFbGVtZW50cyA9IHRoaXMuc2V0dXBEcmFnZ2FibGVUYWJzKHRhYkNvbnRhaW5lciwgc3dpdGNoVGFicyk7XG5cbiAgICAgICAgICAgIC8vIC0tIFNFQVJDSCBMT0dJQyAtLVxuICAgICAgICAgICAgdGhpcy5zY3JhdGNocGFkU2VhcmNoSW5wdXRFbCA9IHRoaXMuc2V0dXBTZWFyY2hJbnB1dChzY3JhdGNocGFkU2VhcmNoQ29udGFpbmVyLCBcIlNlYXJjaCBTY3JhdGNoUGFkLi4uXCIsICh0ZXJtKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JhdGNocGFkU2VhcmNoVGVybSA9IHRlcm07XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTY3JhdGNocGFkSGlnaGxpZ2h0cygpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBsb2dpYyBidWcgZnJvbSB0aGUgb3JpZ2luYWwgY29kZTsgdGhpcyBuZWVkcyB0byBiZSBpbnNpZGUgdGhlIFwiZWxzZVwiIGJsb2NrIG9mIHRoZSBwcmV2aWV3IG1vZGVcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1NjcmF0Y2hwYWRQcmV2aWV3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RlVGV4dGFyZWEudmFsdWUgPSB0aGlzLm5vdGVUZXh0O1xuICAgICAgICAgICAgICAgIHRoaXMubm90ZVRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90ZVRleHQgPSB0aGlzLm5vdGVUZXh0YXJlYS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlRml4ZWROb3RlKHRoaXMubm90ZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNjcmF0Y2hwYWRIaWdobGlnaHRzKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLm5vdGVUZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNjcmF0Y2hIaWdobGlnaHRlckVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcmF0Y2hIaWdobGlnaHRlckVsLnNjcm9sbFRvcCA9IHRoaXMubm90ZVRleHRhcmVhLnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NyYXRjaEhpZ2hsaWdodGVyRWwuc2Nyb2xsTGVmdCA9IHRoaXMubm90ZVRleHRhcmVhLnNjcm9sbExlZnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgbm90ZXNQbGFjZWhvbGRlciA9IHRoaXMubm90ZXNWaWV3TW9kZSA9PT0gJ3Bpbm5lZCcgPyAnRmlsdGVyIG5vdGVzLi4uJyA6ICdGaWx0ZXIgbm90ZXMuLi4nO1xuICAgICAgICAgICAgdGhpcy5ub3Rlc1NlYXJjaElucHV0RWwgPSB0aGlzLnNldHVwU2VhcmNoSW5wdXQobm90ZXNTZWFyY2hDb250YWluZXIsIG5vdGVzUGxhY2Vob2xkZXIsICh0ZXJtKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3Rlc1NlYXJjaFRlcm0gPSB0ZXJtO1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdWxhdGVOb3RlcygpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuYXNzZXRzU2VhcmNoSW5wdXRFbCA9IHRoaXMuc2V0dXBTZWFyY2hJbnB1dChhc3NldHNTZWFyY2hDb250YWluZXIsIFwiRmlsdGVyIGFzc2V0cy4uLlwiLCAodGVybSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXNzZXRzU2VhcmNoVGVybSA9IHRlcm07XG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZUFzc2V0cygpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMudGFza3NTZWFyY2hJbnB1dEVsID0gdGhpcy5zZXR1cFNlYXJjaElucHV0KHRhc2tzU2VhcmNoQ29udGFpbmVyLCBcIkZpbHRlciB0YXNrcy4uLlwiLCAodGVybSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudGFza3NTZWFyY2hUZXJtID0gdGVybTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVsYXRlVGFza3MoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNjcmF0Y2hwYWRTZWFyY2hDb3VudCgpO1xuICAgICAgICAgICAgc3dpdGNoVGFicyh0aGlzLmFjdGl2ZVRhYik7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbmRzIGFuZCBoaWdobGlnaHRzIHRoZSBuZXh0IG9yIHByZXZpb3VzIG9jY3VycmVuY2Ugb2YgdGhlIHNlYXJjaCB0ZXJtIGluIHRoZSBzY3JhdGNocGFkIHRleHRhcmVhLlxuICAgICAqIEBwYXJhbSB7J25leHQnIHwgJ3ByZXYnfSBkaXJlY3Rpb24gVGhlIGRpcmVjdGlvbiB0byBzZWFyY2guXG4gICAgICovXG4gICAgaGlnaGxpZ2h0SW5TY3JhdGNocGFkKGRpcmVjdGlvbiA9ICduZXh0Jykge1xuICAgICAgICB0aGlzLm5vdGVUZXh0YXJlYS5mb2N1cygpO1xuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5ub3RlVGV4dGFyZWEudmFsdWU7XG4gICAgICAgIGNvbnN0IHRlcm0gPSB0aGlzLnNjcmF0Y2hwYWRTZWFyY2hUZXJtO1xuICAgICAgICBpZiAoIXRlcm0pIHJldHVybjtcblxuICAgICAgICBjb25zdCBsb3dlclRleHQgPSB0ZXh0LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IGxvd2VyVGVybSA9IHRlcm0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgbGV0IG1hdGNoSW5kZXggPSAtMTtcblxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnbmV4dCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlYXJjaEZyb20gPSB0aGlzLm5vdGVUZXh0YXJlYS5zZWxlY3Rpb25FbmQ7XG4gICAgICAgICAgICBtYXRjaEluZGV4ID0gbG93ZXJUZXh0LmluZGV4T2YobG93ZXJUZXJtLCBzZWFyY2hGcm9tKTtcbiAgICAgICAgICAgIGlmIChtYXRjaEluZGV4ID09PSAtMSkgeyAvLyBXcmFwIGFyb3VuZCB0byB0aGUgc3RhcnQgaWYgbm8gbWF0Y2ggaXMgZm91bmQuXG4gICAgICAgICAgICAgICAgbWF0Y2hJbmRleCA9IGxvd2VyVGV4dC5pbmRleE9mKGxvd2VyVGVybSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7IC8vICdwcmV2J1xuICAgICAgICAgICAgY29uc3Qgc2VhcmNoRnJvbSA9IHRoaXMubm90ZVRleHRhcmVhLnNlbGVjdGlvblN0YXJ0ID4gMCA/IHRoaXMubm90ZVRleHRhcmVhLnNlbGVjdGlvblN0YXJ0IC0gMSA6IHRleHQubGVuZ3RoO1xuICAgICAgICAgICAgbWF0Y2hJbmRleCA9IGxvd2VyVGV4dC5sYXN0SW5kZXhPZihsb3dlclRlcm0sIHNlYXJjaEZyb20pO1xuICAgICAgICAgICAgaWYgKG1hdGNoSW5kZXggPT09IC0xKSB7IC8vIFdyYXAgYXJvdW5kIHRvIHRoZSBlbmQuXG4gICAgICAgICAgICAgICAgbWF0Y2hJbmRleCA9IGxvd2VyVGV4dC5sYXN0SW5kZXhPZihsb3dlclRlcm0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1hdGNoSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAvLyBTZWxlY3QgdGhlIGZvdW5kIHRleHQgYW5kIHNjcm9sbCBpdCBpbnRvIHZpZXcuXG4gICAgICAgICAgICB0aGlzLm5vdGVUZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZShtYXRjaEluZGV4LCBtYXRjaEluZGV4ICsgdGVybS5sZW5ndGgpO1xuICAgICAgICAgICAgY29uc3QgbGluZUhlaWdodCA9IHBhcnNlRmxvYXQoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLm5vdGVUZXh0YXJlYSkubGluZUhlaWdodCk7XG4gICAgICAgICAgICBjb25zdCBsaW5lcyA9IHRleHQuc3Vic3RyaW5nKDAsIG1hdGNoSW5kZXgpLnNwbGl0KCdcXG4nKS5sZW5ndGg7XG4gICAgICAgICAgICB0aGlzLm5vdGVUZXh0YXJlYS5zY3JvbGxUb3AgPSAobGluZXMgLSAxKSAqIGxpbmVIZWlnaHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gbWF0Y2hlcyBmb3VuZFwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciB0byByZS1yZW5kZXIganVzdCB0aGUgY2FsZW5kYXIgZ3JpZC5cbiAgICAgKi9cbiAgICByZW5kZXJDYWxlbmRhcigpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FsZW5kYXJCb2R5RWwpIHtcbiAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJCb2R5RWwuZW1wdHkoKTtcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aEdyaWQodGhpcy5kaXNwbGF5ZWRNb250aCwgdGhpcy5jYWxlbmRhckJvZHlFbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93cyBhIHBvcHVwIGxpc3RpbmcgYWxsIG5vdGVzLCB0YXNrcywgYW5kIGFzc2V0cyBhc3NvY2lhdGVkIHdpdGggYSBzcGVjaWZpYyBkYXkuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0RWwgVGhlIGNhbGVuZGFyIGRheSBlbGVtZW50IHRvIHBvc2l0aW9uIHRoZSBwb3B1cCBuZWFyLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhQnlUeXBlIEFuIG9iamVjdCBjb250YWluaW5nIGFycmF5cyBvZiBpdGVtcyB0byBkaXNwbGF5LCBrZXllZCBieSB0eXBlLlxuICAgICAqIEBwYXJhbSB7RGF0ZX0gZGF0ZSBUaGUgZGF0ZSBmb3Igd2hpY2ggdGhlIHBvcHVwIGlzIGJlaW5nIHNob3duLlxuICAgICAqL1xuICAgIHNob3dGaWxlUG9wdXAodGFyZ2V0RWwsIGRhdGFCeVR5cGUsIGRhdGUpIHtcbiAgICAgICAgdGhpcy5oaWRlRmlsZVBvcHVwKCk7XG4gICAgICAgIHRoaXMucG9wdXBFbCA9IGNyZWF0ZURpdih7IGNsczogJ290aGVyLW5vdGVzLXBvcHVwJyB9KTtcbiAgICAgICAgY29uc3QgeyBzZXR0aW5ncyB9ID0gdGhpcy5wbHVnaW47XG5cbiAgICAgICAgLy8gQWRkIGhlYWRlciB3aXRoIGEgY2xvc2UgYnV0dG9uIGFuZCBkeW5hbWljIGRhdGUgdGl0bGVcbiAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gdGhpcy5wb3B1cEVsLmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWhlYWRlcicgfSk7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBtb21lbnQoZGF0ZSkuZm9ybWF0KFwiZGRkZCwgRCBNTU1NIFlZWVlcIik7XG4gICAgICAgIGhlYWRlclJvdy5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC1oZWFkZXItdGl0bGUnLCB0ZXh0OiBmb3JtYXR0ZWREYXRlIH0pO1xuICAgICAgICBjb25zdCBjbG9zZUJ0biA9IGhlYWRlclJvdy5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC1jbG9zZS1idG4nIH0pO1xuICAgICAgICBzZXRJY29uKGNsb3NlQnRuLCAneCcpO1xuICAgICAgICAvLyBNYWtlIHRoZSBlbnRpcmUgaGVhZGVyIHJvdyBjbGlja2FibGUgdG8gY2xvc2UgdGhlIHBvcHVwXG4gICAgICAgIGhlYWRlclJvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGlkZUZpbGVQb3B1cCgpKTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBzY3JvbGxhYmxlIHdyYXBwZXIgZm9yIHRoZSBjb250ZW50XG4gICAgICAgIGNvbnN0IGNvbnRlbnRXcmFwcGVyID0gdGhpcy5wb3B1cEVsLmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWNvbnRlbnQtd3JhcHBlcicgfSk7XG5cbiAgICAgICAgaWYgKGRhdGFCeVR5cGUuaWNzICYmIGRhdGFCeVR5cGUuaWNzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbnRXcmFwcGVyLmNyZWF0ZUVsKCdoNicsIHsgdGV4dDogXCJDYWxlbmRhciBFdmVudHNcIiwgY2xzOiBcInBvcHVwLXNlY3Rpb24taGVhZGVyXCIgfSk7XG5cbiAgICAgICAgICAgIGRhdGFCeVR5cGUuaWNzLmZvckVhY2goZXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1FbCA9IGNvbnRlbnRXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogXCJvdGhlci1ub3Rlcy1wb3B1cC1pdGVtXCIgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgYW4gaWNvbiBmb3IgdmlzdWFsIGRpc3RpbmN0aW9uXG4gICAgICAgICAgICAgICAgY29uc3QgaWNvbkVsID0gaXRlbUVsLmNyZWF0ZURpdih7IGNsczogJ25vdGUtaWNvbicgfSk7XG4gICAgICAgICAgICAgICAgc2V0SWNvbihpY29uRWwsICdjYWxlbmRhcicpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdGl0bGVXcmFwcGVyID0gaXRlbUVsLmNyZWF0ZURpdih7IGNsczogJ25vdGUtdGl0bGUtd3JhcHBlcicgfSk7XG4gICAgICAgICAgICAgICAgdGl0bGVXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogJ25vdGUtdGl0bGUnIH0pLnNldFRleHQoZXZlbnQuc3VtbWFyeSk7XG5cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgZXZlbnQgaXMgTk9UIGFsbC1kYXksIGFkZCBhIHN1Yi1saW5lIHdpdGggdGhlIHRpbWVcbiAgICAgICAgICAgICAgICBpZiAoIWV2ZW50LmlzQWxsRGF5ICYmIGV2ZW50LnN0YXJ0VGltZSAmJiBldmVudC5lbmRUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVTdHJpbmcgPSBgJHtldmVudC5zdGFydFRpbWV9IC0gJHtldmVudC5lbmRUaW1lfWA7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlV3JhcHBlci5jcmVhdGVEaXYoeyB0ZXh0OiB0aW1lU3RyaW5nLCBjbHM6ICdub3RlLXBhdGgnIH0pOyAvLyBSZS11c2UgJ25vdGUtcGF0aCcgZm9yIHN0eWxlZCBzdWItdGV4dFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBBZGQgYSBzZXBhcmF0b3IgaWYgb3RoZXIgY29udGVudCBmb2xsb3dzXG4gICAgICAgICAgICBjb25zdCBoYXNPdGhlckNvbnRlbnQgPSAoZGF0YUJ5VHlwZS50YXNrcyAmJiBkYXRhQnlUeXBlLnRhc2tzLmxlbmd0aCA+IDApIHx8IChkYXRhQnlUeXBlLmRhaWx5ICYmIGRhdGFCeVR5cGUuZGFpbHkubGVuZ3RoID4gMCk7XG4gICAgICAgICAgICBpZiAoaGFzT3RoZXJDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgY29udGVudFdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiBcInBvcHVwLXNlcGFyYXRvclwiIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYWRkRmlsZVRvTGlzdCA9IChjb250YWluZXIsIGZpbGUsIHR5cGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1FbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdvdGhlci1ub3Rlcy1wb3B1cC1pdGVtJyB9KTtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnYXNzZXQnICYmIHRoaXMuaXNJbWFnZUFzc2V0KGZpbGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGh1bWJuYWlsID0gaXRlbUVsLmNyZWF0ZUVsKCdpbWcnLCB7IGNsczogJ3BvcHVwLWFzc2V0LXRodW1ibmFpbCcgfSk7XG4gICAgICAgICAgICAgICAgdGh1bWJuYWlsLnNyYyA9IHRoaXMuYXBwLnZhdWx0LmdldFJlc291cmNlUGF0aChmaWxlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZG90ID0gaXRlbUVsLmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWZpbGUtZG90JyB9KTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2RhaWx5JykgZG90LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHNldHRpbmdzLmRhaWx5Tm90ZURvdENvbG9yO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdjcmVhdGVkJykgZG90LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHNldHRpbmdzLm90aGVyTm90ZURvdENvbG9yO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdtb2RpZmllZCcpIGRvdC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBzZXR0aW5ncy5jYWxlbmRhck1vZGlmaWVkRG90Q29sb3I7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ2Fzc2V0JykgZG90LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHNldHRpbmdzLmFzc2V0RG90Q29sb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0aXRsZVBhdGhXcmFwcGVyID0gaXRlbUVsLmNyZWF0ZURpdih7IGNsczogJ25vdGUtdGl0bGUtcGF0aC13cmFwcGVyJyB9KTtcbiAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5tZCcpID8gZmlsZS5iYXNlbmFtZSA6IGZpbGUubmFtZTtcbiAgICAgICAgICAgIHRpdGxlUGF0aFdyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogZGlzcGxheU5hbWUsIGNsczogXCJub3RlLXRpdGxlXCIgfSk7XG4gICAgICAgICAgICBpZiAoZmlsZS5wYXJlbnQgJiYgZmlsZS5wYXJlbnQucGF0aCAhPT0gJy8nKSB7XG4gICAgICAgICAgICAgICAgdGl0bGVQYXRoV3JhcHBlci5jcmVhdGVEaXYoeyB0ZXh0OiBmaWxlLnBhcmVudC5wYXRoLCBjbHM6ICdub3RlLXBhdGgnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQoZmlsZS5wYXRoLCBcIlwiLCBzZXR0aW5ncy5ub3Rlc09wZW5BY3Rpb24gPT09ICduZXctdGFiJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlRmlsZVBvcHVwKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBhZGRUYXNrVG9MaXN0ID0gKGNvbnRhaW5lciwgdGFzaykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXRlbUVsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ290aGVyLW5vdGVzLXBvcHVwLWl0ZW0nIH0pO1xuICAgICAgICAgICAgaXRlbUVsLmRhdGFzZXQudGFza1N0YXR1cyA9IHRhc2suc3RhdHVzO1xuICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSBpdGVtRWwuY3JlYXRlRGl2KHsgY2xzOiAndGFzay1jaGVja2JveC1zeW1ib2wnIH0pO1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyVGFza1N5bWJvbChjaGVja2JveCwgdGFzayk7XG4gICAgICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnRvZ2dsZVRhc2tDb21wbGV0aW9uKHRhc2spO1xuICAgICAgICAgICAgICAgIHRhc2suc3RhdHVzID0gKHRhc2suc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICd4JykgPyAnICcgOiAneCc7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyVGFza1N5bWJvbChjaGVja2JveCwgdGFzayk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5idWlsZFRhc2tzQnlEYXRlTWFwKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCB0ZXh0U3BhbiA9IGl0ZW1FbC5jcmVhdGVTcGFuKHsgY2xzOiAndGFzay10ZXh0JyB9KTtcbiAgICAgICAgICAgIE1hcmtkb3duUmVuZGVyZXIucmVuZGVyKHRoaXMuYXBwLCB0YXNrLnRleHQsIHRleHRTcGFuLCB0YXNrLmZpbGUucGF0aCwgdGhpcyk7XG4gICAgICAgICAgICBpdGVtRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dCh0YXNrLmZpbGUucGF0aCwgJycsIGZhbHNlLCB7IGVTdGF0ZTogeyBsaW5lOiB0YXNrLmxpbmVOdW1iZXIgfSB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVGaWxlUG9wdXAoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGFsbEZpbGVzID0gWy4uLihkYXRhQnlUeXBlLmRhaWx5IHx8IFtdKSwgLi4uKGRhdGFCeVR5cGUuY3JlYXRlZCB8fCBbXSksIC4uLihkYXRhQnlUeXBlLm1vZGlmaWVkIHx8IFtdKSwgLi4uKGRhdGFCeVR5cGUuYXNzZXRzIHx8IFtdKV07XG4gICAgICAgIGNvbnN0IGhhc1Rhc2tzID0gZGF0YUJ5VHlwZS50YXNrcyAmJiBkYXRhQnlUeXBlLnRhc2tzLmxlbmd0aCA+IDA7XG4gICAgICAgIGNvbnN0IGhhc0ZpbGVzID0gYWxsRmlsZXMubGVuZ3RoID4gMDtcblxuICAgICAgICBpZiAoaGFzVGFza3MpIHtcbiAgICAgICAgICAgIGNvbnRlbnRXcmFwcGVyLmNyZWF0ZUVsKCdoNicsIHsgdGV4dDogJ1Rhc2tzJywgY2xzOiAncG9wdXAtc2VjdGlvbi1oZWFkZXInIH0pO1xuICAgICAgICAgICAgZGF0YUJ5VHlwZS50YXNrcy5mb3JFYWNoKHRhc2sgPT4gYWRkVGFza1RvTGlzdChjb250ZW50V3JhcHBlciwgdGFzaykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNUYXNrcyAmJiBoYXNGaWxlcykge1xuICAgICAgICAgICAgY29udGVudFdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiAncG9wdXAtc2VwYXJhdG9yJyB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzRmlsZXMpIHtcbiAgICAgICAgICAgIGNvbnRlbnRXcmFwcGVyLmNyZWF0ZUVsKCdoNicsIHsgdGV4dDogJ05vdGVzICYgQXNzZXRzJywgY2xzOiAncG9wdXAtc2VjdGlvbi1oZWFkZXInIH0pO1xuICAgICAgICAgICAgKGRhdGFCeVR5cGUuZGFpbHkgfHwgW10pLmZvckVhY2goZmlsZSA9PiBhZGRGaWxlVG9MaXN0KGNvbnRlbnRXcmFwcGVyLCBmaWxlLCAnZGFpbHknKSk7XG4gICAgICAgICAgICAoZGF0YUJ5VHlwZS5jcmVhdGVkIHx8IFtdKS5mb3JFYWNoKGZpbGUgPT4gYWRkRmlsZVRvTGlzdChjb250ZW50V3JhcHBlciwgZmlsZSwgJ2NyZWF0ZWQnKSk7XG4gICAgICAgICAgICAoZGF0YUJ5VHlwZS5tb2RpZmllZCB8fCBbXSkuZm9yRWFjaChmaWxlID0+IGFkZEZpbGVUb0xpc3QoY29udGVudFdyYXBwZXIsIGZpbGUsICdtb2RpZmllZCcpKTtcbiAgICAgICAgICAgIChkYXRhQnlUeXBlLmFzc2V0cyB8fCBbXSkuZm9yRWFjaChmaWxlID0+IGFkZEZpbGVUb0xpc3QoY29udGVudFdyYXBwZXIsIGZpbGUsICdhc3NldCcpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29udGVudFdyYXBwZXIuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICAgICAgICB0aGlzLmhpZGVGaWxlUG9wdXAoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucG9wdXBFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4gY2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVvdXQpKTtcbiAgICAgICAgdGhpcy5wb3B1cEVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhpZGVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLmhpZGVGaWxlUG9wdXAoKSwgdGhpcy5wbHVnaW4uc2V0dGluZ3MucG9wdXBIaWRlRGVsYXkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMucG9wdXBFbCk7XG5cbiAgICAgICAgY29uc3QgcG9wdXBSZWN0ID0gdGhpcy5wb3B1cEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCB0YXJnZXRSZWN0ID0gdGFyZ2V0RWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IHZpZXdwb3J0V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgY29uc3Qgdmlld3BvcnRIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgIGNvbnN0IG1hcmdpbiA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcHVwR2FwO1xuICAgICAgICBsZXQgZmluYWxUb3AgPSB0YXJnZXRSZWN0LmJvdHRvbSArIG1hcmdpbjtcbiAgICAgICAgaWYgKGZpbmFsVG9wICsgcG9wdXBSZWN0LmhlaWdodCA+IHZpZXdwb3J0SGVpZ2h0KSBmaW5hbFRvcCA9IHRhcmdldFJlY3QudG9wIC0gcG9wdXBSZWN0LmhlaWdodCAtIG1hcmdpbjtcbiAgICAgICAgaWYgKGZpbmFsVG9wIDwgbWFyZ2luKSBmaW5hbFRvcCA9IG1hcmdpbjtcbiAgICAgICAgbGV0IGZpbmFsTGVmdCA9IHRhcmdldFJlY3QubGVmdDtcbiAgICAgICAgaWYgKGZpbmFsTGVmdCArIHBvcHVwUmVjdC53aWR0aCA+IHZpZXdwb3J0V2lkdGggLSBtYXJnaW4pIGZpbmFsTGVmdCA9IHRhcmdldFJlY3QucmlnaHQgLSBwb3B1cFJlY3Qud2lkdGg7XG4gICAgICAgIGlmIChmaW5hbExlZnQgPCBtYXJnaW4pIGZpbmFsTGVmdCA9IG1hcmdpbjtcbiAgICAgICAgdGhpcy5wb3B1cEVsLnN0eWxlLnRvcCA9IGAke2ZpbmFsVG9wfXB4YDtcbiAgICAgICAgdGhpcy5wb3B1cEVsLnN0eWxlLmxlZnQgPSBgJHtmaW5hbExlZnR9cHhgO1xuICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIaWRlcyBhbmQgZGVzdHJveXMgdGhlIGZpbGUgcG9wdXAgZWxlbWVudC5cbiAgICAgKi9cbiAgICBoaWRlRmlsZVBvcHVwKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5ob3ZlclRpbWVvdXQpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5oaWRlVGltZW91dCk7XG4gICAgICAgIGlmICh0aGlzLnBvcHVwRWwpIHtcbiAgICAgICAgICAgIHRoaXMucG9wdXBFbC5yZW1vdmUoKTtcbiAgICAgICAgICAgIHRoaXMucG9wdXBFbCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnRhc2tSZWZyZXNoRGVib3VuY2VUaW1lciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnRhc2tDYWNoZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZU1vbnRoVGl0bGUoKSB7IGlmICh0aGlzLm1vbnRoTmFtZUVsKSB0aGlzLm1vbnRoTmFtZUVsLnRleHRDb250ZW50ID0gZm9ybWF0TW9udGhUaXRsZSh0aGlzLmRpc3BsYXllZE1vbnRoLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb250aFRpdGxlRm9ybWF0KTsgfVxuICAgIGNoYW5nZU1vbnRoKG9mZnNldCwgdG9Ub2RheSA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0b1RvZGF5KSB7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXllZE1vbnRoID0gbmV3IERhdGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheWVkTW9udGguc2V0TW9udGgodGhpcy5kaXNwbGF5ZWRNb250aC5nZXRNb250aCgpICsgb2Zmc2V0LCAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudXBkYXRlTW9udGhUaXRsZSgpO1xuICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XG4gICAgICAgIHRoaXMudXBkYXRlVG9kYXlCdG5BcmlhTGFiZWwoKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZURheUhlYWRlckhpZ2hsaWdodCgpO1xuICAgIH1cblxuICAgIHVwZGF0ZVRvZGF5QnRuQXJpYUxhYmVsKCkge1xuICAgICAgICBpZiAoIXRoaXMudG9kYXlCdG4pIHJldHVybjtcblxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCBpc0N1cnJlbnRNb250aCA9IHRoaXMuZGlzcGxheWVkTW9udGguZ2V0RnVsbFllYXIoKSA9PT0gbm93LmdldEZ1bGxZZWFyKCkgJiYgdGhpcy5kaXNwbGF5ZWRNb250aC5nZXRNb250aCgpID09PSBub3cuZ2V0TW9udGgoKTtcblxuICAgICAgICBpZiAodGhpcy5pc1BvcHVwTG9ja2VkKSB7XG4gICAgICAgICAgICAvLyBJZiBwb3B1cHMgYXJlIGxvY2tlZCAoYWNjZW50IG9uKSwgdGhlIG9ubHkgYWN0aW9uIGlzIHRvIGVuYWJsZSB0aGVtLlxuICAgICAgICAgICAgdGhpcy50b2RheUJ0bi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnVGFwIHRvIGVuYWJsZSBjYWxlbmRhciBwb3B1cHMnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIElmIHBvcHVwcyBhcmUgdW5sb2NrZWQgKGFjY2VudCBvZmYpLi4uXG4gICAgICAgICAgICBpZiAoaXNDdXJyZW50TW9udGgpIHtcbiAgICAgICAgICAgICAgICAvLyAuLi5hbmQgd2UncmUgb24gdGhlIGN1cnJlbnQgbW9udGgsIHRoZSBuZXh0IGFjdGlvbiBpcyB0byBkaXNhYmxlIHRoZW0uXG4gICAgICAgICAgICAgICAgdGhpcy50b2RheUJ0bi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnVGFwIHRvIGRpc2FibGUgY2FsZW5kYXIgcG9wdXBzJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIC4uLmFuZCB3ZSdyZSBvbiBhIGRpZmZlcmVudCBtb250aCwgdGhlIGFjdGlvbiBpcyB0byBuYXZpZ2F0ZS5cbiAgICAgICAgICAgICAgICB0aGlzLnRvZGF5QnRuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdHbyB0byB0b2RheScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBrZXlib2FyZCBldmVudCBsaXN0ZW5lcnMgdG8gYSByb3cgZWxlbWVudCBmb3IgbGlzdCBuYXZpZ2F0aW9uLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHJvdyBUaGUgcm93IGVsZW1lbnQgKGUuZy4sIGEgYC5ub3RlLXJvd2Agb3IgYC50YXNrLXJvd2ApLlxuICAgICAqIEBwYXJhbSB7SFRNTElucHV0RWxlbWVudH0gc2VhcmNoSW5wdXRFbCBUaGUgc2VhcmNoIGlucHV0IGFzc29jaWF0ZWQgd2l0aCB0aGUgbGlzdC5cbiAgICAgKi9cbiAgICBhZGRLZXlkb3duTGlzdGVuZXJzKHJvdywgc2VhcmNoSW5wdXRFbCkge1xuICAgICAgICByb3cuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIC0xKTsgLy8gTWFrZSB0aGUgcm93IGZvY3VzYWJsZS5cbiAgICAgICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHJvdy5jbGljaygpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGUua2V5ICE9PSAnQXJyb3dEb3duJyAmJiBlLmtleSAhPT0gJ0Fycm93VXAnKSByZXR1cm47XG5cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcm93LmNsb3Nlc3QoJy5ub3Rlcy1jb250YWluZXIsIC50YXNrcy1jb250YWluZXInKTtcbiAgICAgICAgICAgIGlmICghY29udGFpbmVyKSByZXR1cm47XG5cbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbShjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLm5vdGUtcm93LCAudGFzay1yb3cnKSk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SW5kZXggPSBpdGVtcy5pbmRleE9mKHJvdyk7XG5cbiAgICAgICAgICAgIGxldCBuZXh0SW5kZXggPSBlLmtleSA9PT0gJ0Fycm93RG93bicgPyBjdXJyZW50SW5kZXggKyAxIDogY3VycmVudEluZGV4IC0gMTtcblxuICAgICAgICAgICAgaWYgKG5leHRJbmRleCA+PSAwICYmIG5leHRJbmRleCA8IGl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGl0ZW1zW25leHRJbmRleF0uZm9jdXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd1VwJyAmJiBzZWFyY2hJbnB1dEVsKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgYXQgdGhlIHRvcCBvZiB0aGUgbGlzdCwgZm9jdXMgdGhlIHNlYXJjaCBpbnB1dC5cbiAgICAgICAgICAgICAgICBzZWFyY2hJbnB1dEVsLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBvcHVsYXRlcyB0aGUgXCJOb3Rlc1wiIHRhYiB3aXRoIGVpdGhlciByZWNlbnQgb3IgcGlubmVkIG5vdGVzLlxuICAgICAqL1xuICAgIGFzeW5jIHBvcHVsYXRlTm90ZXMoKSB7XG4gICAgICAgIGlmICghdGhpcy5ub3Rlc0NvbnRlbnRFbCkgcmV0dXJuO1xuICAgICAgICB0aGlzLm5vdGVzQ29udGVudEVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcbiAgICAgICAgbGV0IG5vdGVzVG9TaG93O1xuXG4gICAgICAgIC8vIC0tLSAxLiBGSUxURVIgQU5EIFNPUlQgTk9URVMgLS0tXG4gICAgICAgIGlmICh0aGlzLm5vdGVzVmlld01vZGUgPT09ICdwaW5uZWQnKSB7XG4gICAgICAgICAgICBjb25zdCBwaW5WYWx1ZSA9IHNldHRpbmdzLnBpblRhZy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgbm90ZXNUb1Nob3cgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFjYWNoZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlLnRhZ3M/LnNvbWUodGFnID0+IHRhZy50YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhwaW5WYWx1ZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGZyb250bWF0dGVyID0gY2FjaGUuZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICAgICAgaWYgKGZyb250bWF0dGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGZyb250bWF0dGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGZyb250bWF0dGVyW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBpblZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLnNvbWUoaXRlbSA9PiB0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycgJiYgaXRlbS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBpblZhbHVlKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMucGlubmVkU29ydE9yZGVyID09PSAnei1hJykge1xuICAgICAgICAgICAgICAgIG5vdGVzVG9TaG93LnNvcnQoKGEsIGIpID0+IGIuYmFzZW5hbWUubG9jYWxlQ29tcGFyZShhLmJhc2VuYW1lKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGlubmVkU29ydE9yZGVyID09PSAnY3VzdG9tJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1c3RvbU9yZGVyID0gc2V0dGluZ3MucGlubmVkTm90ZXNDdXN0b21PcmRlcjtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHJvYnVzdCBzb3J0IGhhbmRsZXMgbmV3IGl0ZW1zIG5vdCB5ZXQgaW4gdGhlIGN1c3RvbSBvcmRlciBhcnJheS5cbiAgICAgICAgICAgICAgICBub3Rlc1RvU2hvdy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4QSA9IGN1c3RvbU9yZGVyLmluZGV4T2YoYS5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXhCID0gY3VzdG9tT3JkZXIuaW5kZXhPZihiLnBhdGgpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGJvdGggaXRlbXMgYXJlIGluIHRoZSBjdXN0b20gb3JkZXIsIHNvcnQgYnkgdGhlaXIgcG9zaXRpb24uXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleEEgIT09IC0xICYmIGluZGV4QiAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmRleEEgLSBpbmRleEI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgb25seSBBIGlzIGluIHRoZSBvcmRlciwgaXQgY29tZXMgZmlyc3QuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleEEgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgb25seSBCIGlzIGluIHRoZSBvcmRlciwgaXQgY29tZXMgZmlyc3QuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleEIgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBuZWl0aGVyIGlzIGluIHRoZSBvcmRlciAoZS5nLiwgbmV3IHBpbm5lZCBub3RlcyksIHNvcnQgdGhlbSBhbHBoYWJldGljYWxseS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuYmFzZW5hbWUubG9jYWxlQ29tcGFyZShiLmJhc2VuYW1lKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIGEtelxuICAgICAgICAgICAgICAgIG5vdGVzVG9TaG93LnNvcnQoKGEsIGIpID0+IGEuYmFzZW5hbWUubG9jYWxlQ29tcGFyZShiLmJhc2VuYW1lKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7IC8vIHJlY2VudCBub3RlcyBtb2RlXG4gICAgICAgICAgICBjb25zdCBjdXRvZmYgPSBtb21lbnQoKS5zdWJ0cmFjdChzZXR0aW5ncy5ub3Rlc0xvb2tiYWNrRGF5cywgJ2RheXMnKS52YWx1ZU9mKCk7XG4gICAgICAgICAgICBub3Rlc1RvU2hvdyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoZmlsZSA9PiAhc2V0dGluZ3MuaWdub3JlRm9sZGVycy5zb21lKGYgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZikpICYmIChmaWxlLnN0YXQubXRpbWUgPj0gY3V0b2ZmIHx8IGZpbGUuc3RhdC5jdGltZSA+PSBjdXRvZmYpKVxuICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLnN0YXQubXRpbWUgLSBhLnN0YXQubXRpbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIDIuIEFQUExZIFNFQVJDSCBURVJNIC0tLVxuICAgICAgICBjb25zdCBzZWFyY2hUZXJtID0gdGhpcy5ub3Rlc1NlYXJjaFRlcm0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgZmlsdGVyZWROb3RlcyA9IHNlYXJjaFRlcm0gP1xuICAgICAgICAgICAgbm90ZXNUb1Nob3cuZmlsdGVyKGZpbGUgPT4gZmlsZS5iYXNlbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0pKSA6XG4gICAgICAgICAgICBub3Rlc1RvU2hvdztcblxuICAgICAgICBpZiAoZmlsdGVyZWROb3Rlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLm5vdGVzVmlld01vZGUgPT09ICdwaW5uZWQnID8gJ05vIHBpbm5lZCBub3RlcyBmb3VuZC4nIDogJ05vIHJlY2VudCBub3RlcyBmb3VuZC4nO1xuICAgICAgICAgICAgdGhpcy5ub3Rlc0NvbnRlbnRFbC5jcmVhdGVEaXYoeyB0ZXh0OiBtZXNzYWdlLCBjbHM6ICd0YXNrLWdyb3VwLWVtcHR5LW1lc3NhZ2UnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIDMuIFJFTkRFUiBUSEUgVklFVyAtLS1cbiAgICAgICAgaWYgKHRoaXMubm90ZXNWaWV3TW9kZSA9PT0gJ3Bpbm5lZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwQ29udGFpbmVyID0gdGhpcy5ub3Rlc0NvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLWdyb3VwLWNvbnRhaW5lcicgfSk7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXIgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLWdyb3VwLWhlYWRlcicgfSk7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJDb250ZW50ID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ25vdGUtZ3JvdXAtaGVhZGVyLWNvbnRlbnQnLCBhdHRyOiB7ICdhcmlhLWxpdmUnOiAncG9saXRlJyB9IH0pO1xuICAgICAgICAgICAgc2V0SWNvbihoZWFkZXJDb250ZW50LCBzZXR0aW5ncy50YWJJY29ucy5waW5uZWQgfHwgJ3BpbicpO1xuICAgICAgICAgICAgaGVhZGVyQ29udGVudC5jcmVhdGVTcGFuKHsgdGV4dDogJ1Bpbm5lZCBOb3RlcycgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNvcnRJbmRpY2F0b3IgPSBoZWFkZXJDb250ZW50LmNyZWF0ZVNwYW4oeyBjbHM6ICdwaW5uZWQtc29ydC1pbmRpY2F0b3InIH0pO1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlU29ydFZpc3VhbHMgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGlubmVkU29ydE9yZGVyID09PSAnei1hJykge1xuICAgICAgICAgICAgICAgICAgICBzb3J0SW5kaWNhdG9yLnNldFRleHQoJ1otQScpO1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJDb250ZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdDdXJyZW50IHNvcnQ6IFotQS4gQ2xpY2sgZm9yIEN1c3RvbSBzb3J0LicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5waW5uZWRTb3J0T3JkZXIgPT09ICdjdXN0b20nKSB7XG4gICAgICAgICAgICAgICAgICAgIHNvcnRJbmRpY2F0b3Iuc2V0VGV4dCgnQ3VzdG9tJyk7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlckNvbnRlbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0N1cnJlbnQgc29ydDogQ3VzdG9tLiBDbGljayBmb3IgQS1aIHNvcnQuJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gYS16XG4gICAgICAgICAgICAgICAgICAgIHNvcnRJbmRpY2F0b3Iuc2V0VGV4dCgnQS1aJyk7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlckNvbnRlbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0N1cnJlbnQgc29ydDogQS1aLiBDbGljayBmb3IgWi1BIHNvcnQuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHVwZGF0ZVNvcnRWaXN1YWxzKCk7XG5cbiAgICAgICAgICAgIGhlYWRlckNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGlubmVkU29ydE9yZGVyID09PSAnYS16JykgdGhpcy5waW5uZWRTb3J0T3JkZXIgPSAnei1hJztcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnBpbm5lZFNvcnRPcmRlciA9PT0gJ3otYScpIHRoaXMucGlubmVkU29ydE9yZGVyID0gJ2N1c3RvbSc7XG4gICAgICAgICAgICAgICAgZWxzZSB0aGlzLnBpbm5lZFNvcnRPcmRlciA9ICdhLXonO1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdWxhdGVOb3RlcygpOyAvLyBSZS1yZW5kZXJcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1jb3VudCcsIHRleHQ6IGZpbHRlcmVkTm90ZXMubGVuZ3RoLnRvU3RyaW5nKCkgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGxpc3RXcmFwcGVyID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1saXN0LXdyYXBwZXInIH0pO1xuXG4gICAgICAgICAgICAvLyBNT0RJRklDQVRJT04gU1RBUlQ6IEFkZCBhIHNpbmdsZSByb2J1c3QgZHJvcCBoYW5kbGVyIHRvIHRoZSBjb250YWluZXJcbiAgICAgICAgICAgIGxpc3RXcmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVQaW5uZWRPcmRlcihsaXN0V3JhcHBlcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIE1PRElGSUNBVElPTiBFTkRcblxuICAgICAgICAgICAgZmlsdGVyZWROb3Rlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyTm90ZUl0ZW0oZmlsZSwgbGlzdFdyYXBwZXIpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSBlbHNlIHsgLy8gWW91ciBvcmlnaW5hbCByZW5kZXJpbmcgbG9naWMgZm9yIHJlY2VudCBub3Rlc1xuICAgICAgICAgICAgY29uc3QgZ3JvdXBzID0geyB0b2RheTogW10sIHllc3RlcmRheTogW10sIHRoaXNXZWVrOiBbXSwgbGFzdFdlZWs6IFtdLCB0aGlzTW9udGg6IFtdLCBvbGRlcjogW10gfTtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG1vbWVudCgpO1xuXG4gICAgICAgICAgICBmaWx0ZXJlZE5vdGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9kVGltZSA9IG1vbWVudChmaWxlLnN0YXQubXRpbWUpO1xuICAgICAgICAgICAgICAgIGlmIChtb2RUaW1lLmlzU2FtZShub3csICdkYXknKSkgZ3JvdXBzLnRvZGF5LnB1c2goZmlsZSk7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobW9kVGltZS5pc1NhbWUobm93LmNsb25lKCkuc3VidHJhY3QoMSwgJ2RheScpLCAnZGF5JykpIGdyb3Vwcy55ZXN0ZXJkYXkucHVzaChmaWxlKTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtb2RUaW1lLmlzU2FtZShub3csICd3ZWVrJykpIGdyb3Vwcy50aGlzV2Vlay5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1vZFRpbWUuaXNTYW1lKG5vdy5jbG9uZSgpLnN1YnRyYWN0KDEsICd3ZWVrJyksICd3ZWVrJykpIGdyb3Vwcy5sYXN0V2Vlay5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1vZFRpbWUuaXNTYW1lKG5vdywgJ21vbnRoJykpIGdyb3Vwcy50aGlzTW9udGgucHVzaChmaWxlKTtcbiAgICAgICAgICAgICAgICBlbHNlIGdyb3Vwcy5vbGRlci5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGdyb3VwT3JkZXIgPSBbXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0b2RheScsIGxhYmVsOiAnVG9kYXknIH0sXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd5ZXN0ZXJkYXknLCBsYWJlbDogJ1llc3RlcmRheScgfSxcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RoaXNXZWVrJywgbGFiZWw6ICdUaGlzIFdlZWsnIH0sXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdsYXN0V2VlaycsIGxhYmVsOiAnTGFzdCBXZWVrJyB9LFxuICAgICAgICAgICAgICAgIHsga2V5OiAndGhpc01vbnRoJywgbGFiZWw6ICdUaGlzIE1vbnRoJyB9LFxuICAgICAgICAgICAgICAgIHsga2V5OiAnb2xkZXInLCBsYWJlbDogJ09sZGVyJyB9LFxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgZ3JvdXBPcmRlci5mb3JFYWNoKGdyb3VwSW5mbyA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm90ZXNJbkdyb3VwID0gZ3JvdXBzW2dyb3VwSW5mby5rZXldO1xuICAgICAgICAgICAgICAgIGlmIChub3Rlc0luR3JvdXAubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cENvbnRhaW5lciA9IHRoaXMubm90ZXNDb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1jb250YWluZXInIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0NvbGxhcHNlZCA9IHRoaXMuY29sbGFwc2VkTm90ZUdyb3Vwc1tncm91cEluZm8ua2V5XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ29sbGFwc2VkKSBncm91cENvbnRhaW5lci5hZGRDbGFzcygnaXMtY29sbGFwc2VkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1oZWFkZXInIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJDb250ZW50ID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ25vdGUtZ3JvdXAtaGVhZGVyLWNvbnRlbnQnIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xsYXBzZUljb24gPSBoZWFkZXJDb250ZW50LmNyZWF0ZURpdih7IGNsczogJ25vdGUtZ3JvdXAtY29sbGFwc2UtaWNvbicgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNldEljb24oY29sbGFwc2VJY29uLCAnY2hldnJvbi1kb3duJyk7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlckNvbnRlbnQuY3JlYXRlU3Bhbih7IHRleHQ6IGdyb3VwSW5mby5sYWJlbCB9KTtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ25vdGUtZ3JvdXAtY291bnQnLCB0ZXh0OiBub3Rlc0luR3JvdXAubGVuZ3RoLnRvU3RyaW5nKCkgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudGx5Q29sbGFwc2VkID0gZ3JvdXBDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtY29sbGFwc2VkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlZE5vdGVHcm91cHNbZ3JvdXBJbmZvLmtleV0gPSBjdXJyZW50bHlDb2xsYXBzZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlzdFdyYXBwZXIgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLWxpc3Qtd3JhcHBlcicgfSk7XG4gICAgICAgICAgICAgICAgICAgIG5vdGVzSW5Hcm91cC5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJOb3RlSXRlbShmaWxlLCBsaXN0V3JhcHBlcik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxuXG4gICAgLyoqXG4gICAgICogU2NhbnMgdGhlIHZhdWx0IGZvciB0YXNrcywgZmlsdGVycyBhbmQgc29ydHMgdGhlbSwgYW5kIHBvcHVsYXRlcyB0aGUgXCJUYXNrc1wiIHRhYi5cbiAgICAgKi9cbiAgICBhc3luYyBwb3B1bGF0ZVRhc2tzKCkge1xuICAgICAgICBpZiAoIXRoaXMudGFza3NDb250ZW50RWwpIHJldHVybjtcblxuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuICAgICAgICB0aGlzLnRhc2tzQ29udGVudEVsLnRvZ2dsZUNsYXNzKCdzaG93LWZ1bGwtdGV4dCcsICFzZXR0aW5ncy50YXNrVGV4dFRydW5jYXRlKTtcblxuICAgICAgICBpZiAodGhpcy50YXNrQ2FjaGUpIHsgdGhpcy50YXNrQ2FjaGUuY2xlYXIoKTsgfSBlbHNlIHsgdGhpcy50YXNrQ2FjaGUgPSBuZXcgTWFwKCk7IH1cblxuICAgICAgICBjb25zdCB0YXNrSWdub3JlRm9sZGVycyA9IChzZXR0aW5ncy50YXNrSWdub3JlRm9sZGVycyB8fCBbXSkubWFwKGYgPT4gZi50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCcvJykgPyBmLnRvTG93ZXJDYXNlKCkgOiBmLnRvTG93ZXJDYXNlKCkgKyAnLycpO1xuICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZmlsZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aExvd2VyID0gZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICByZXR1cm4gIXRhc2tJZ25vcmVGb2xkZXJzLnNvbWUoZm9sZGVyID0+IGZvbGRlciAmJiBmaWxlUGF0aExvd2VyLnN0YXJ0c1dpdGgoZm9sZGVyKSk7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgbGV0IGFsbFRhc2tzID0gW107XG4gICAgICAgIGNvbnN0IHRhc2tSZWdleCA9IC9eXFxzKig/Oi18XFxkK1xcLilcXHMqXFxbKC4pXFxdXFxzKiguKikvO1xuICAgICAgICBjb25zdCBkdWVEYXRlUmVnZXggPSAv8J+ThVxccyooXFxkezR9LVxcZHsyfS1cXGR7Mn0pLztcbiAgICAgICAgY29uc3QgY29tcGxldGlvbkRhdGVSZWdleCA9IC/inIVcXHMqKFxcZHs0fS1cXGR7Mn0tXFxkezJ9KS87XG4gICAgICAgIGNvbnN0IHRhZ1JlZ2V4ID0gLyMoW2EtekEtWjAtOV9cXC1cXC9dKykvZztcblxuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpO1xuICAgICAgICAgICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcblxuICAgICAgICAgICAgdGhpcy50YXNrQ2FjaGUuc2V0KGZpbGUucGF0aCwgdGhpcy5leHRyYWN0VGFza0xpbmVzKGNvbnRlbnQpKTtcblxuICAgICAgICAgICAgbGluZXMuZm9yRWFjaCgobGluZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2godGFza1JlZ2V4KTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gbWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBtYXRjaFsyXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNDb21wbGV0ZWQgPSBzdGF0dXMudG9Mb3dlckNhc2UoKSA9PT0gJ3gnO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uRGF0ZU1hdGNoID0gdGV4dC5tYXRjaChjb21wbGV0aW9uRGF0ZVJlZ2V4KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbkRhdGUgPSBjb21wbGV0aW9uRGF0ZU1hdGNoID8gbW9tZW50KGNvbXBsZXRpb25EYXRlTWF0Y2hbMV0sIFwiWVlZWS1NTS1ERFwiKS50b0RhdGUoKSA6IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ29tcGxldGVkICYmICEoc2V0dGluZ3Muc2hvd0NvbXBsZXRlZFRhc2tzVG9kYXkgJiYgY29tcGxldGlvbkRhdGUgJiYgaXNTYW1lRGF5KGNvbXBsZXRpb25EYXRlLCBuZXcgRGF0ZSgpKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGR1ZURhdGVNYXRjaCA9IHRleHQubWF0Y2goZHVlRGF0ZVJlZ2V4KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHVlRGF0ZSA9IGR1ZURhdGVNYXRjaCA/IG1vbWVudChkdWVEYXRlTWF0Y2hbMV0sIFwiWVlZWS1NTS1ERFwiKS50b0RhdGUoKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSBBcnJheS5mcm9tKHRleHQubWF0Y2hBbGwodGFnUmVnZXgpKS5tYXAobSA9PiBtWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRpc3BsYXlUZXh0ID0gdGV4dC50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlUZXh0ID0gZGlzcGxheVRleHQucmVwbGFjZShjb21wbGV0aW9uRGF0ZVJlZ2V4LCAnJykudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGFsbFRhc2tzLnB1c2goeyB0ZXh0OiBkaXNwbGF5VGV4dCwgZmlsZSwgbGluZU51bWJlcjogaW5kZXgsIGR1ZURhdGUsIHRhZ3MsIHN0YXR1cywgY29tcGxldGlvbkRhdGUgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzZWFyY2hUZXJtID0gdGhpcy50YXNrc1NlYXJjaFRlcm0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgbGV0IGZpbHRlcmVkVGFza3MgPSBhbGxUYXNrcy5maWx0ZXIodGFzayA9PiAhc2VhcmNoVGVybSB8fCB0YXNrLnRleHQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXJtKSk7XG5cbiAgICAgICAgZmlsdGVyZWRUYXNrcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MudGFza1NvcnRPcmRlciA9PT0gJ2EteicpIHJldHVybiBhLnRleHQubG9jYWxlQ29tcGFyZShiLnRleHQpO1xuICAgICAgICAgICAgaWYgKHNldHRpbmdzLnRhc2tTb3J0T3JkZXIgPT09ICd6LWEnKSByZXR1cm4gYi50ZXh0LmxvY2FsZUNvbXBhcmUoYS50ZXh0KTtcbiAgICAgICAgICAgIGlmIChhLmR1ZURhdGUgJiYgYi5kdWVEYXRlKSByZXR1cm4gYS5kdWVEYXRlIC0gYi5kdWVEYXRlO1xuICAgICAgICAgICAgcmV0dXJuIGEuZHVlRGF0ZSA/IC0xIDogKGIuZHVlRGF0ZSA/IDEgOiBhLnRleHQubG9jYWxlQ29tcGFyZShiLnRleHQpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gMi4gTUFQIEVYSVNUSU5HIERPTSBHUk9VUFNcbiAgICAgICAgY29uc3QgZXhpc3RpbmdHcm91cHMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMudGFza3NDb250ZW50RWwucXVlcnlTZWxlY3RvckFsbCgnLnRhc2stZ3JvdXAtY29udGFpbmVyJykuZm9yRWFjaChncm91cEVsID0+IHtcbiAgICAgICAgICAgIGlmIChncm91cEVsLmRhdGFzZXQuZ3JvdXBLZXkpIHtcbiAgICAgICAgICAgICAgICBleGlzdGluZ0dyb3Vwcy5zZXQoZ3JvdXBFbC5kYXRhc2V0Lmdyb3VwS2V5LCBncm91cEVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gMy4gR0VUIE5FVyBHUk9VUCBEQVRBXG4gICAgICAgIGNvbnN0IG5ld0dyb3VwRGF0YSA9IHNldHRpbmdzLnRhc2tHcm91cEJ5ID09PSAndGFnJ1xuICAgICAgICAgICAgPyB0aGlzLmdyb3VwVGFza3NCeVRhZyhmaWx0ZXJlZFRhc2tzKVxuICAgICAgICAgICAgOiB0aGlzLmdyb3VwVGFza3NCeURhdGUoZmlsdGVyZWRUYXNrcyk7XG5cbiAgICAgICAgY29uc3QgZ3JvdXBPcmRlciA9IE9iamVjdC5rZXlzKG5ld0dyb3VwRGF0YSk7XG5cbiAgICAgICAgLy8gNC4gUkVDT05DSUxFIEdST1VQU1xuICAgICAgICBsZXQgbGFzdEVsZW1lbnQgPSBudWxsO1xuICAgICAgICBncm91cE9yZGVyLmZvckVhY2goZ3JvdXBLZXkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZ3JvdXBEYXRhID0gbmV3R3JvdXBEYXRhW2dyb3VwS2V5XTtcbiAgICAgICAgICAgIGxldCBncm91cEVsID0gZXhpc3RpbmdHcm91cHMuZ2V0KGdyb3VwS2V5KTtcblxuICAgICAgICAgICAgaWYgKGdyb3VwRWwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJDb250ZW50ID0gZ3JvdXBFbC5xdWVyeVNlbGVjdG9yKCcudGFzay1ncm91cC1oZWFkZXItY29udGVudCBzcGFuOmxhc3QtY2hpbGQnKTtcbiAgICAgICAgICAgICAgICBpZiAoaGVhZGVyQ29udGVudCkgaGVhZGVyQ29udGVudC50ZXh0Q29udGVudCA9IGAke2dyb3VwRGF0YS50aXRsZX0gKCR7Z3JvdXBEYXRhLnRhc2tzLmxlbmd0aH0pYDtcblxuICAgICAgICAgICAgICAgIHRoaXMucmVjb25jaWxlVGFza0xpc3QoZ3JvdXBFbC5xdWVyeVNlbGVjdG9yKCcudGFzay1saXN0LXdyYXBwZXInKSwgZ3JvdXBEYXRhLnRhc2tzKTtcbiAgICAgICAgICAgICAgICBleGlzdGluZ0dyb3Vwcy5kZWxldGUoZ3JvdXBLZXkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBncm91cEVsID0gdGhpcy5yZW5kZXJUYXNrR3JvdXAoZ3JvdXBLZXksIGdyb3VwRGF0YSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChsYXN0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50LmFmdGVyKGdyb3VwRWwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2tzQ29udGVudEVsLnByZXBlbmQoZ3JvdXBFbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsYXN0RWxlbWVudCA9IGdyb3VwRWw7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIDUuIFJFTU9WRSBPTEQgR1JPVVBTXG4gICAgICAgIGV4aXN0aW5nR3JvdXBzLmZvckVhY2goZ3JvdXBFbCA9PiBncm91cEVsLnJlbW92ZSgpKTtcblxuICAgICAgICBpZiAodGhpcy50YXNrc0NvbnRlbnRFbC5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIC8vIENsZWFyIGFueSBvbGQgbWVzc2FnZSBhbmQgYWRkIGEgbmV3IG9uZVxuICAgICAgICAgICAgdGhpcy50YXNrc0NvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHNlYXJjaFRlcm0gPyAnTm8gdGFza3MgbWF0Y2ggeW91ciBzZWFyY2ggdGVybS4nIDogJ05vIHRhc2tzIGZvdW5kJztcbiAgICAgICAgICAgIHRoaXMudGFza3NDb250ZW50RWwuY3JlYXRlRGl2KHsgdGV4dDogbWVzc2FnZSwgY2xzOiAndGFzay1ncm91cC1lbXB0eS1tZXNzYWdlJyB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBhbnkgXCJubyB0YXNrc1wiIG1lc3NhZ2UgaWYgaXQgZXhpc3RzXG4gICAgICAgICAgICBjb25zdCBlbXB0eU1lc3NhZ2UgPSB0aGlzLnRhc2tzQ29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWdyb3VwLWVtcHR5LW1lc3NhZ2UnKTtcbiAgICAgICAgICAgIGlmIChlbXB0eU1lc3NhZ2UpIGVtcHR5TWVzc2FnZS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLy8gSW4geW91ciBQZXJpb2RNb250aFZpZXcgY2xhc3NcbiAgICBnZXRUYXNrS2V5KHRhc2spIHtcbiAgICAgICAgcmV0dXJuIGAke3Rhc2suZmlsZS5wYXRofToke3Rhc2subGluZU51bWJlcn1gO1xuICAgIH1cblxuICAgIHVwZGF0ZVRhc2tJdGVtKHRhc2tSb3dFbCwgdGFzaykge1xuICAgICAgICBpZiAodGFza1Jvd0VsLmRhdGFzZXQudGFza1N0YXR1cyAhPT0gdGFzay5zdGF0dXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gdGFza1Jvd0VsLnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWNoZWNrYm94LXN5bWJvbCcpO1xuICAgICAgICAgICAgaWYgKGNoZWNrYm94KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyVGFza1N5bWJvbChjaGVja2JveCwgdGFzayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YXNrUm93RWwuZGF0YXNldC50YXNrU3RhdHVzID0gdGFzay5zdGF0dXM7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0ZXh0RWwgPSB0YXNrUm93RWwucXVlcnlTZWxlY3RvcignLnRhc2stdGV4dCcpO1xuICAgICAgICBjb25zdCBleGlzdGluZ1RleHQgPSB0ZXh0RWwgPyB0ZXh0RWwudGV4dENvbnRlbnQgOiAnJztcbiAgICAgICAgaWYgKHRleHRFbCAmJiBleGlzdGluZ1RleHQgIT09IHRhc2sudGV4dCkge1xuICAgICAgICAgICAgdGV4dEVsLmVtcHR5KCk7XG4gICAgICAgICAgICBNYXJrZG93blJlbmRlcmVyLnJlbmRlcih0aGlzLmFwcCwgdGFzay50ZXh0LCB0ZXh0RWwsIHRhc2suZmlsZS5wYXRoLCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdyb3VwVGFza3NCeURhdGUodGFza3MpIHtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcbiAgICAgICAgY29uc3Qgbm93ID0gbW9tZW50KCkuc3RhcnRPZignZGF5Jyk7XG4gICAgICAgIGNvbnN0IGdyb3Vwc0RhdGEgPSB7IG92ZXJkdWU6IFtdLCB0b2RheTogW10sIHRvbW9ycm93OiBbXSwgbmV4dDdkYXlzOiBbXSwgZnV0dXJlOiBbXSwgbm9EYXRlOiBbXSB9O1xuXG4gICAgICAgIHRhc2tzLmZvckVhY2godGFzayA9PiB7XG4gICAgICAgICAgICBpZiAoIXRhc2suZHVlRGF0ZSkgeyBncm91cHNEYXRhLm5vRGF0ZS5wdXNoKHRhc2spOyByZXR1cm47IH1cbiAgICAgICAgICAgIGNvbnN0IGR1ZSA9IG1vbWVudCh0YXNrLmR1ZURhdGUpLnN0YXJ0T2YoJ2RheScpO1xuICAgICAgICAgICAgaWYgKGR1ZS5pc0JlZm9yZShub3cpKSBncm91cHNEYXRhLm92ZXJkdWUucHVzaCh0YXNrKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGR1ZS5pc1NhbWUobm93KSkgZ3JvdXBzRGF0YS50b2RheS5wdXNoKHRhc2spO1xuICAgICAgICAgICAgZWxzZSBpZiAoZHVlLmlzU2FtZShub3cuY2xvbmUoKS5hZGQoMSwgJ2RheScpKSkgZ3JvdXBzRGF0YS50b21vcnJvdy5wdXNoKHRhc2spO1xuICAgICAgICAgICAgZWxzZSBpZiAoZHVlLmlzU2FtZU9yQmVmb3JlKG5vdy5jbG9uZSgpLmFkZCg3LCAnZGF5cycpKSkgZ3JvdXBzRGF0YS5uZXh0N2RheXMucHVzaCh0YXNrKTtcbiAgICAgICAgICAgIGVsc2UgZ3JvdXBzRGF0YS5mdXR1cmUucHVzaCh0YXNrKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgaWNvbnMgPSBzZXR0aW5ncy50YXNrR3JvdXBJY29ucyB8fCBERUZBVUxUX1NFVFRJTkdTLnRhc2tHcm91cEljb25zO1xuICAgICAgICBjb25zdCBncm91cE9yZGVyID0gW1xuICAgICAgICAgICAgeyBrZXk6ICdvdmVyZHVlJywgdGl0bGU6ICdPdmVyZHVlJywgaWNvbjogaWNvbnMub3ZlcmR1ZSwgY29sb3I6IHNldHRpbmdzLnRhc2tHcm91cENvbG9yT3ZlcmR1ZSB9LFxuICAgICAgICAgICAgeyBrZXk6ICd0b2RheScsIHRpdGxlOiAnVG9kYXknLCBpY29uOiBpY29ucy50b2RheSwgY29sb3I6IHNldHRpbmdzLnRhc2tHcm91cENvbG9yVG9kYXkgfSxcbiAgICAgICAgICAgIHsga2V5OiAndG9tb3Jyb3cnLCB0aXRsZTogJ1RvbW9ycm93JywgaWNvbjogaWNvbnMudG9tb3Jyb3csIGNvbG9yOiBzZXR0aW5ncy50YXNrR3JvdXBDb2xvclRvbW9ycm93IH0sXG4gICAgICAgICAgICB7IGtleTogJ25leHQ3ZGF5cycsIHRpdGxlOiAnTmV4dCA3IERheXMnLCBpY29uOiBpY29ucy5uZXh0N2RheXMsIGNvbG9yOiBzZXR0aW5ncy50YXNrR3JvdXBDb2xvck5leHQ3RGF5cyB9LFxuICAgICAgICAgICAgeyBrZXk6ICdmdXR1cmUnLCB0aXRsZTogJ0Z1dHVyZScsIGljb246IGljb25zLmZ1dHVyZSwgY29sb3I6IHNldHRpbmdzLnRhc2tHcm91cENvbG9yRnV0dXJlIH0sXG4gICAgICAgICAgICB7IGtleTogJ25vRGF0ZScsIHRpdGxlOiAnTm8gRHVlIERhdGUnLCBpY29uOiBpY29ucy5ub0RhdGUsIGNvbG9yOiBzZXR0aW5ncy50YXNrR3JvdXBDb2xvck5vRGF0ZSB9XG4gICAgICAgIF07XG5cbiAgICAgICAgY29uc3QgZmluYWxHcm91cHMgPSB7fTtcbiAgICAgICAgZ3JvdXBPcmRlci5mb3JFYWNoKGcgPT4ge1xuICAgICAgICAgICAgaWYgKHNldHRpbmdzLnRhc2tEYXRlR3JvdXBzVG9TaG93LmluY2x1ZGVzKGcua2V5KSB8fCBnLmtleSA9PT0gJ25vRGF0ZScpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXBzRGF0YVtnLmtleV0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBmaW5hbEdyb3Vwc1tnLmtleV0gPSB7IC4uLmcsIHRhc2tzOiBncm91cHNEYXRhW2cua2V5XSB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmaW5hbEdyb3VwcztcbiAgICB9XG5cbiAgICBncm91cFRhc2tzQnlUYWcodGFza3MpIHtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcbiAgICAgICAgY29uc3QgZ3JvdXBlZEJ5VGFnID0gdGFza3MucmVkdWNlKChhY2MsIHRhc2spID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSB0YXNrLnRhZ3MubGVuZ3RoID4gMCA/IHRhc2sudGFncyA6IFsnI3VudGFnZ2VkJ107XG4gICAgICAgICAgICB0YWdzLmZvckVhY2godGFnID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSB0YWcudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWFjY1trZXldKSBhY2Nba2V5XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRhZyxcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogc2V0dGluZ3MudGFza0dyb3VwSWNvbnM/LnRhZyB8fCAndGFnJyxcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHNldHRpbmdzLnRhc2tHcm91cENvbG9yVGFnLFxuICAgICAgICAgICAgICAgICAgICB0YXNrczogW11cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGFjY1trZXldLnRhc2tzLnB1c2godGFzayk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9KTtcblxuICAgICAgICAvLyBTb3J0IGdyb3VwcyBhbHBoYWJldGljYWxseSBieSB0YWcgbmFtZVxuICAgICAgICBjb25zdCBzb3J0ZWRLZXlzID0gT2JqZWN0LmtleXMoZ3JvdXBlZEJ5VGFnKS5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpO1xuICAgICAgICBjb25zdCBzb3J0ZWRHcm91cHMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc29ydGVkS2V5cykge1xuICAgICAgICAgICAgc29ydGVkR3JvdXBzW2tleV0gPSBncm91cGVkQnlUYWdba2V5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc29ydGVkR3JvdXBzO1xuICAgIH1cblxuICAgIHJlbmRlclRhc2tHcm91cChrZXksIGdyb3VwRGF0YSkge1xuICAgICAgICBjb25zdCBncm91cENvbnRhaW5lciA9IGNyZWF0ZURpdih7IGNsczogJ3Rhc2stZ3JvdXAtY29udGFpbmVyJywgYXR0cjogeyBzdHlsZTogYGJhY2tncm91bmQtY29sb3I6ICR7Z3JvdXBEYXRhLmNvbG9yfWAgfSB9KTtcbiAgICAgICAgZ3JvdXBDb250YWluZXIuZGF0YXNldC5ncm91cEtleSA9IGtleTtcblxuICAgICAgICBjb25zdCBpc0NvbGxhcHNlZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbGxhcHNlZFRhc2tHcm91cHNba2V5XTtcbiAgICAgICAgaWYgKGlzQ29sbGFwc2VkKSBncm91cENvbnRhaW5lci5hZGRDbGFzcygnaXMtY29sbGFwc2VkJyk7XG5cbiAgICAgICAgY29uc3QgaGVhZGVyID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAndGFzay1ncm91cC1oZWFkZXInIH0pO1xuXG4gICAgICAgIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHdyYXBwZXIgZWxlbWVudCBmb3IgdGhlIGxpc3RcbiAgICAgICAgICAgIGNvbnN0IHRhc2tMaXN0V3JhcHBlciA9IGdyb3VwQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWxpc3Qtd3JhcHBlcicpO1xuICAgICAgICAgICAgaWYgKCF0YXNrTGlzdFdyYXBwZXIpIHJldHVybjtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgdGhlIGN1cnJlbnQgc3RhdGVcbiAgICAgICAgICAgIGNvbnN0IGlzQ3VycmVudGx5Q29sbGFwc2VkID0gZ3JvdXBDb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1jb2xsYXBzZWQnKTtcblxuICAgICAgICAgICAgaWYgKGlzQ3VycmVudGx5Q29sbGFwc2VkKSB7XG4gICAgICAgICAgICAgICAgLy8gLS0tIEVYUEFORElORyAtLS1cbiAgICAgICAgICAgICAgICAvLyAxLiBTZXQgdGhlIENTUyB2YXJpYWJsZSB0byB0aGUgZWxlbWVudCdzIGZ1bGwgc2Nyb2xsIGhlaWdodC5cbiAgICAgICAgICAgICAgICAvLyAgICBUaGlzIGdpdmVzIHRoZSAnaGVpZ2h0JyBwcm9wZXJ0eSBhIHNwZWNpZmljIHZhbHVlIHRvIGFuaW1hdGUgKnRvKi5cbiAgICAgICAgICAgICAgICBjb25zdCBzY3JvbGxIZWlnaHQgPSB0YXNrTGlzdFdyYXBwZXIuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgICAgICAgIHRhc2tMaXN0V3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS10YXNrLWxpc3QtaGVpZ2h0JywgYCR7c2Nyb2xsSGVpZ2h0fXB4YCk7XG5cbiAgICAgICAgICAgICAgICAvLyAyLiBSZW1vdmUgdGhlIGNsYXNzIHRvIHRyaWdnZXIgdGhlIHRyYW5zaXRpb24uXG4gICAgICAgICAgICAgICAgZ3JvdXBDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaXMtY29sbGFwc2VkJyk7XG5cbiAgICAgICAgICAgICAgICAvLyBBZnRlciB0aGUgYW5pbWF0aW9uLCByZW1vdmUgdGhlIGV4cGxpY2l0IGhlaWdodCB0byBhbGxvdyBmb3IgZHluYW1pYyBjb250ZW50LlxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0YXNrTGlzdFdyYXBwZXIuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tdGFzay1saXN0LWhlaWdodCcpO1xuICAgICAgICAgICAgICAgIH0sIDM1MCk7IC8vIE1hdGNoIHRoaXMgdG8geW91ciBDU1MgdHJhbnNpdGlvbiBkdXJhdGlvblxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIC0tLSBDT0xMQVBTSU5HIC0tLVxuICAgICAgICAgICAgICAgIC8vIDEuIFNldCB0aGUgQ1NTIHZhcmlhYmxlIHRvIHRoZSBlbGVtZW50J3MgY3VycmVudCByZW5kZXJlZCBoZWlnaHQuXG4gICAgICAgICAgICAgICAgLy8gICAgVGhpcyBnaXZlcyB0aGUgJ2hlaWdodCcgcHJvcGVydHkgYSBzcGVjaWZpYyB2YWx1ZSB0byBhbmltYXRlICpmcm9tKi5cbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50SGVpZ2h0ID0gdGFza0xpc3RXcmFwcGVyLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICB0YXNrTGlzdFdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tdGFzay1saXN0LWhlaWdodCcsIGAke2N1cnJlbnRIZWlnaHR9cHhgKTtcblxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBtaWNyby1kZWxheSB0byBlbnN1cmUgdGhlIGJyb3dzZXIgcmVnaXN0ZXJzIHRoZSBzdGFydGluZyBoZWlnaHRcbiAgICAgICAgICAgICAgICAvLyBiZWZvcmUgYmVpbmcgdG9sZCB0byB0cmFuc2l0aW9uIHRvIDAuIFRoaXMgaXMgdGhlIGtleSB0byBmaXhpbmcgdGhlIFwiaW5zdGFudCBjb2xsYXBzZVwiLlxuICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIDIuIEFkZCB0aGUgY2xhc3MgdG8gdHJpZ2dlciB0aGUgdHJhbnNpdGlvbiB0byBoZWlnaHQ6IDAuXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2lzLWNvbGxhcHNlZCcpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBVcGRhdGUgYW5kIHNhdmUgdGhlIHN0YXRlXG4gICAgICAgICAgICB0aGlzLmNvbGxhcHNlZFRhc2tHcm91cHNba2V5XSA9ICFpc0N1cnJlbnRseUNvbGxhcHNlZDtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9KTtcbiAgICAgICAgLypcbiAgICAgICAgaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudGx5Q29sbGFwc2VkID0gZ3JvdXBDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtY29sbGFwc2VkJyk7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb2xsYXBzZWRUYXNrR3JvdXBzW2tleV0gPSBjdXJyZW50bHlDb2xsYXBzZWQ7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfSk7XG4gICAgICAgICovXG4gICAgICAgIGNvbnN0IGhlYWRlckNvbnRlbnQgPSBoZWFkZXIuY3JlYXRlU3Bhbih7IGNsczogJ3Rhc2stZ3JvdXAtaGVhZGVyLWNvbnRlbnQnIH0pO1xuICAgICAgICBjb25zdCBpY29uRWwgPSBoZWFkZXJDb250ZW50LmNyZWF0ZVNwYW4oeyBjbHM6ICdpY29uJyB9KTtcbiAgICAgICAgc2V0SWNvbihpY29uRWwsIGdyb3VwRGF0YS5pY29uKTtcbiAgICAgICAgaGVhZGVyQ29udGVudC5jcmVhdGVTcGFuKHsgdGV4dDogYCR7Z3JvdXBEYXRhLnRpdGxlfSAoJHtncm91cERhdGEudGFza3MubGVuZ3RofSlgIH0pO1xuXG4gICAgICAgIGNvbnN0IGNvbGxhcHNlSWNvbiA9IGhlYWRlci5jcmVhdGVTcGFuKHsgY2xzOiAndGFzay1ncm91cC1jb2xsYXBzZS1pY29uJyB9KTtcbiAgICAgICAgc2V0SWNvbihjb2xsYXBzZUljb24sICdjaGV2cm9uLWRvd24nKTtcblxuICAgICAgICBjb25zdCB0YXNrTGlzdFdyYXBwZXIgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoJ3Rhc2stbGlzdC13cmFwcGVyJyk7XG4gICAgICAgIGdyb3VwRGF0YS50YXNrcy5mb3JFYWNoKHRhc2sgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFza0VsID0gdGhpcy5yZW5kZXJUYXNrSXRlbSh0YXNrKTsgLy8gVXNlIHRoZSBtb2RpZmllZCByZW5kZXJUYXNrSXRlbVxuICAgICAgICAgICAgdGFza0xpc3RXcmFwcGVyLmFwcGVuZENoaWxkKHRhc2tFbCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBncm91cENvbnRhaW5lcjtcbiAgICB9XG5cbiAgICByZWNvbmNpbGVUYXNrTGlzdChsaXN0V3JhcHBlckVsLCBuZXdUYXNrcykge1xuICAgICAgICBjb25zdCBleGlzdGluZ1Rhc2tSb3dzID0gbmV3IE1hcCgpO1xuICAgICAgICBsaXN0V3JhcHBlckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrLXJvdycpLmZvckVhY2gocm93ID0+IHtcbiAgICAgICAgICAgIGlmIChyb3cuZGF0YXNldC5rZXkpIHtcbiAgICAgICAgICAgICAgICBleGlzdGluZ1Rhc2tSb3dzLnNldChyb3cuZGF0YXNldC5rZXksIHJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBsYXN0RWxlbWVudCA9IG51bGw7XG4gICAgICAgIG5ld1Rhc2tzLmZvckVhY2godGFzayA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXNrS2V5ID0gdGhpcy5nZXRUYXNrS2V5KHRhc2spO1xuICAgICAgICAgICAgbGV0IHRhc2tFbCA9IGV4aXN0aW5nVGFza1Jvd3MuZ2V0KHRhc2tLZXkpO1xuXG4gICAgICAgICAgICBpZiAodGFza0VsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUYXNrSXRlbSh0YXNrRWwsIHRhc2spO1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nVGFza1Jvd3MuZGVsZXRlKHRhc2tLZXkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXNrRWwgPSB0aGlzLnJlbmRlclRhc2tJdGVtKHRhc2spO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBFbnN1cmUgdGhlIGVsZW1lbnQgaXMgaW4gdGhlIGNvcnJlY3QgcG9zaXRpb25cbiAgICAgICAgICAgIGlmIChsYXN0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50LmFmdGVyKHRhc2tFbCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxpc3RXcmFwcGVyRWwucHJlcGVuZCh0YXNrRWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGFzdEVsZW1lbnQgPSB0YXNrRWw7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV4aXN0aW5nVGFza1Jvd3MuZm9yRWFjaChyb3cgPT4gcm93LnJlbW92ZSgpKTtcbiAgICB9XG5cblxuICAgIHJlbmRlclRhc2tzQnlUYWcodGFza3MsIHNldHRpbmdzKSB7IC8vIFJlY2VpdmVzICdzZXR0aW5ncycgYXMgYW4gYXJndW1lbnRcbiAgICAgICAgLy8gVGhlIGR1cGxpY2F0ZSBkZWNsYXJhdGlvbiB0aGF0IGNhdXNlZCB0aGUgZXJyb3IgaGFzIGJlZW4gcmVtb3ZlZC5cbiAgICAgICAgdGFza3MgPSB0YXNrcy5maWx0ZXIodGFzayA9PiB7XG4gICAgICAgICAgICBjb25zdCBpc0NvbXBsZXRlZCA9IHRhc2suc3RhdHVzICYmIHRhc2suc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICd4JztcbiAgICAgICAgICAgIGlmICghaXNDb21wbGV0ZWQpIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdzLnNob3dDb21wbGV0ZWRUYXNrc1RvZGF5ICYmIHRhc2suY29tcGxldGlvbkRhdGUgJiYgaXNTYW1lRGF5KHRhc2suY29tcGxldGlvbkRhdGUsIG5ldyBEYXRlKCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBncm91cGVkQnlUYWcgPSB0YXNrcy5yZWR1Y2UoKGFjYywgdGFzaykgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFncyA9IHRhc2sudGFncy5sZW5ndGggPiAwID8gdGFzay50YWdzIDogWycjdW50YWdnZWQnXTtcbiAgICAgICAgICAgIHRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghYWNjW3RhZ10pIGFjY1t0YWddID0gW107XG4gICAgICAgICAgICAgICAgYWNjW3RhZ10ucHVzaCh0YXNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30pO1xuXG4gICAgICAgIE9iamVjdC5rZXlzKGdyb3VwZWRCeVRhZykuc29ydCgpLmZvckVhY2godGFnID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tzSW5Hcm91cCA9IGdyb3VwZWRCeVRhZ1t0YWddO1xuXG4gICAgICAgICAgICBjb25zdCBncm91cENvbnRhaW5lciA9IHRoaXMudGFza3NDb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAndGFzay1ncm91cC1jb250YWluZXInLCBhdHRyOiB7IHN0eWxlOiBgYmFja2dyb3VuZC1jb2xvcjogJHtzZXR0aW5ncy50YXNrR3JvdXBDb2xvclRhZ31gIH0gfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGlzQ29sbGFwc2VkID0gdGhpcy5jb2xsYXBzZWRUYXNrR3JvdXBzW3RhZ107XG4gICAgICAgICAgICBpZiAoaXNDb2xsYXBzZWQpIGdyb3VwQ29udGFpbmVyLmFkZENsYXNzKCdpcy1jb2xsYXBzZWQnKTtcblxuICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAndGFzay1ncm91cC1oZWFkZXInIH0pO1xuXG4gICAgICAgICAgICBoZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgd3JhcHBlciBlbGVtZW50IGZvciB0aGUgbGlzdFxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tMaXN0V3JhcHBlciA9IGdyb3VwQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWxpc3Qtd3JhcHBlcicpO1xuICAgICAgICAgICAgICAgIGlmICghdGFza0xpc3RXcmFwcGVyKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAvLyBDaGVjayB0aGUgY3VycmVudCBzdGF0ZVxuICAgICAgICAgICAgICAgIGNvbnN0IGlzQ3VycmVudGx5Q29sbGFwc2VkID0gZ3JvdXBDb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1jb2xsYXBzZWQnKTtcblxuICAgICAgICAgICAgICAgIGlmIChpc0N1cnJlbnRseUNvbGxhcHNlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyAtLS0gRVhQQU5ESU5HIC0tLVxuICAgICAgICAgICAgICAgICAgICAvLyAxLiBTZXQgdGhlIENTUyB2YXJpYWJsZSB0byB0aGUgZWxlbWVudCdzIGZ1bGwgc2Nyb2xsIGhlaWdodC5cbiAgICAgICAgICAgICAgICAgICAgLy8gICAgVGhpcyBnaXZlcyB0aGUgJ2hlaWdodCcgcHJvcGVydHkgYSBzcGVjaWZpYyB2YWx1ZSB0byBhbmltYXRlICp0byouXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjcm9sbEhlaWdodCA9IHRhc2tMaXN0V3JhcHBlci5zY3JvbGxIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tMaXN0V3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS10YXNrLWxpc3QtaGVpZ2h0JywgYCR7c2Nyb2xsSGVpZ2h0fXB4YCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gMi4gUmVtb3ZlIHRoZSBjbGFzcyB0byB0cmlnZ2VyIHRoZSB0cmFuc2l0aW9uLlxuICAgICAgICAgICAgICAgICAgICBncm91cENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdpcy1jb2xsYXBzZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBBZnRlciB0aGUgYW5pbWF0aW9uLCByZW1vdmUgdGhlIGV4cGxpY2l0IGhlaWdodCB0byBhbGxvdyBmb3IgZHluYW1pYyBjb250ZW50LlxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tMaXN0V3JhcHBlci5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS10YXNrLWxpc3QtaGVpZ2h0Jyk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDM1MCk7IC8vIE1hdGNoIHRoaXMgdG8geW91ciBDU1MgdHJhbnNpdGlvbiBkdXJhdGlvblxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIENPTExBUFNJTkcgLS0tXG4gICAgICAgICAgICAgICAgICAgIC8vIDEuIFNldCB0aGUgQ1NTIHZhcmlhYmxlIHRvIHRoZSBlbGVtZW50J3MgY3VycmVudCByZW5kZXJlZCBoZWlnaHQuXG4gICAgICAgICAgICAgICAgICAgIC8vICAgIFRoaXMgZ2l2ZXMgdGhlICdoZWlnaHQnIHByb3BlcnR5IGEgc3BlY2lmaWMgdmFsdWUgdG8gYW5pbWF0ZSAqZnJvbSouXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRIZWlnaHQgPSB0YXNrTGlzdFdyYXBwZXIub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB0YXNrTGlzdFdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tdGFzay1saXN0LWhlaWdodCcsIGAke2N1cnJlbnRIZWlnaHR9cHhgKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgbWljcm8tZGVsYXkgdG8gZW5zdXJlIHRoZSBicm93c2VyIHJlZ2lzdGVycyB0aGUgc3RhcnRpbmcgaGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgIC8vIGJlZm9yZSBiZWluZyB0b2xkIHRvIHRyYW5zaXRpb24gdG8gMC4gVGhpcyBpcyB0aGUga2V5IHRvIGZpeGluZyB0aGUgXCJpbnN0YW50IGNvbGxhcHNlXCIuXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAyLiBBZGQgdGhlIGNsYXNzIHRvIHRyaWdnZXIgdGhlIHRyYW5zaXRpb24gdG8gaGVpZ2h0OiAwLlxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaXMtY29sbGFwc2VkJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBhbmQgc2F2ZSB0aGUgc3RhdGVcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlZFRhc2tHcm91cHNbdGFnXSA9ICFpc0N1cnJlbnRseUNvbGxhcHNlZDtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLypcbiAgICAgICAgICAgIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50bHlDb2xsYXBzZWQgPSBncm91cENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdpcy1jb2xsYXBzZWQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlZFRhc2tHcm91cHNbdGFnXSA9IGN1cnJlbnRseUNvbGxhcHNlZDtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgY29uc3QgaGVhZGVyQ29udGVudCA9IGhlYWRlci5jcmVhdGVTcGFuKHsgY2xzOiAndGFzay1ncm91cC1oZWFkZXItY29udGVudCcgfSk7XG4gICAgICAgICAgICBjb25zdCB0YWdJY29uTmFtZSA9IHNldHRpbmdzLnRhc2tHcm91cEljb25zPy50YWcgfHwgJ3RhZyc7XG4gICAgICAgICAgICBjb25zdCBpY29uRWwgPSBoZWFkZXJDb250ZW50LmNyZWF0ZVNwYW4oeyBjbHM6ICdpY29uJyB9KTtcbiAgICAgICAgICAgIHNldEljb24oaWNvbkVsLCB0YWdJY29uTmFtZSk7XG4gICAgICAgICAgICBoZWFkZXJDb250ZW50LmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHt0YWd9ICgke3Rhc2tzSW5Hcm91cC5sZW5ndGh9KWAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbGxhcHNlSWNvbiA9IGhlYWRlci5jcmVhdGVTcGFuKHsgY2xzOiAndGFzay1ncm91cC1jb2xsYXBzZS1pY29uJyB9KTtcbiAgICAgICAgICAgIHNldEljb24oY29sbGFwc2VJY29uLCAnY2hldnJvbi1kb3duJyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHRhc2tMaXN0V3JhcHBlciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdigndGFzay1saXN0LXdyYXBwZXInKTtcblxuICAgICAgICAgICAgaWYgKHRhc2tzSW5Hcm91cC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGFza3NJbkdyb3VwLmZvckVhY2godGFzayA9PiB0aGlzLnJlbmRlclRhc2tJdGVtKHRhc2ssIHRhc2tMaXN0V3JhcHBlcikpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXNrTGlzdFdyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogJ05vIHRhc2tzIHdpdGggdGhpcyB0YWcuJywgY2xzOiAndGFzay1ncm91cC1lbXB0eS1tZXNzYWdlJyB9KTtcbiAgICAgICAgICAgICAgICBncm91cENvbnRhaW5lci5hZGRDbGFzcygnaXMtY29sbGFwc2VkJyk7XG4gICAgICAgICAgICAgICAgdGFza0xpc3RXcmFwcGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0YXNrcy5sZW5ndGggPT09IDApIHRoaXMudGFza3NDb250ZW50RWwuY3JlYXRlRGl2KHsgdGV4dDogJ05vIHRhc2tzIGZvdW5kJywgY2xzOiAndGFzay1ncm91cC1lbXB0eS1tZXNzYWdlJyB9KTtcbiAgICB9XG5cbiAgICByZW5kZXJUYXNrc0J5RGF0ZSh0YXNrcywgc2V0dGluZ3MpIHsgLy8gUmVjZWl2ZXMgJ3NldHRpbmdzJyBhcyBhbiBhcmd1bWVudFxuICAgICAgICAvLyBUaGUgZHVwbGljYXRlIGRlY2xhcmF0aW9uIHRoYXQgY2F1c2VkIHRoZSBlcnJvciBoYXMgYmVlbiByZW1vdmVkLlxuICAgICAgICBjb25zdCBub3cgPSBtb21lbnQoKS5zdGFydE9mKCdkYXknKTtcbiAgICAgICAgbGV0IGdyb3VwcyA9IHsgb3ZlcmR1ZTogW10sIHRvZGF5OiBbXSwgdG9tb3Jyb3c6IFtdLCBuZXh0N2RheXM6IFtdLCBmdXR1cmU6IFtdLCBub0RhdGU6IFtdIH07XG5cbiAgICAgICAgdGFza3MuZm9yRWFjaCh0YXNrID0+IHtcbiAgICAgICAgICAgIGlmICghdGFzay5kdWVEYXRlKSB7XG4gICAgICAgICAgICAgICAgZ3JvdXBzLm5vRGF0ZS5wdXNoKHRhc2spO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGR1ZSA9IG1vbWVudCh0YXNrLmR1ZURhdGUpLnN0YXJ0T2YoJ2RheScpO1xuICAgICAgICAgICAgaWYgKGR1ZS5pc0JlZm9yZShub3cpKSBncm91cHMub3ZlcmR1ZS5wdXNoKHRhc2spO1xuICAgICAgICAgICAgZWxzZSBpZiAoZHVlLmlzU2FtZShub3cpKSBncm91cHMudG9kYXkucHVzaCh0YXNrKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGR1ZS5pc1NhbWUobm93LmNsb25lKCkuYWRkKDEsICdkYXknKSkpIGdyb3Vwcy50b21vcnJvdy5wdXNoKHRhc2spO1xuICAgICAgICAgICAgZWxzZSBpZiAoZHVlLmlzU2FtZU9yQmVmb3JlKG5vdy5jbG9uZSgpLmFkZCg3LCAnZGF5cycpKSkgZ3JvdXBzLm5leHQ3ZGF5cy5wdXNoKHRhc2spO1xuICAgICAgICAgICAgZWxzZSBncm91cHMuZnV0dXJlLnB1c2godGFzayk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZvciAoY29uc3QgZ3JvdXBLZXkgaW4gZ3JvdXBzKSB7XG4gICAgICAgICAgICBncm91cHNbZ3JvdXBLZXldID0gZ3JvdXBzW2dyb3VwS2V5XS5maWx0ZXIodGFzayA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNDb21wbGV0ZWQgPSB0YXNrLnN0YXR1cyAmJiB0YXNrLnN0YXR1cy50b0xvd2VyQ2FzZSgpID09PSAneCc7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0NvbXBsZXRlZCkgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdzLnNob3dDb21wbGV0ZWRUYXNrc1RvZGF5ICYmIHRhc2suY29tcGxldGlvbkRhdGUgJiYgaXNTYW1lRGF5KHRhc2suY29tcGxldGlvbkRhdGUsIG5ldyBEYXRlKCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpY29ucyA9IHNldHRpbmdzLnRhc2tHcm91cEljb25zIHx8IERFRkFVTFRfU0VUVElOR1MudGFza0dyb3VwSWNvbnM7XG4gICAgICAgIGNvbnN0IGdyb3VwT3JkZXIgPSBbXG4gICAgICAgICAgICB7IGtleTogJ292ZXJkdWUnLCB0aXRsZTogJ092ZXJkdWUnLCBpY29uOiBpY29ucy5vdmVyZHVlLCBjb2xvcjogc2V0dGluZ3MudGFza0dyb3VwQ29sb3JPdmVyZHVlIH0sXG4gICAgICAgICAgICB7IGtleTogJ3RvZGF5JywgdGl0bGU6ICdUb2RheScsIGljb246IGljb25zLnRvZGF5LCBjb2xvcjogc2V0dGluZ3MudGFza0dyb3VwQ29sb3JUb2RheSB9LFxuICAgICAgICAgICAgeyBrZXk6ICd0b21vcnJvdycsIHRpdGxlOiAnVG9tb3Jyb3cnLCBpY29uOiBpY29ucy50b21vcnJvdywgY29sb3I6IHNldHRpbmdzLnRhc2tHcm91cENvbG9yVG9tb3Jyb3cgfSxcbiAgICAgICAgICAgIHsga2V5OiAnbmV4dDdkYXlzJywgdGl0bGU6ICdOZXh0IDcgRGF5cycsIGljb246IGljb25zLm5leHQ3ZGF5cywgY29sb3I6IHNldHRpbmdzLnRhc2tHcm91cENvbG9yTmV4dDdEYXlzIH0sXG4gICAgICAgICAgICB7IGtleTogJ2Z1dHVyZScsIHRpdGxlOiAnRnV0dXJlJywgaWNvbjogaWNvbnMuZnV0dXJlLCBjb2xvcjogc2V0dGluZ3MudGFza0dyb3VwQ29sb3JGdXR1cmUgfSxcbiAgICAgICAgICAgIHsga2V5OiAnbm9EYXRlJywgdGl0bGU6ICdObyBEdWUgRGF0ZScsIGljb246IGljb25zLm5vRGF0ZSwgY29sb3I6IHNldHRpbmdzLnRhc2tHcm91cENvbG9yTm9EYXRlIH1cbiAgICAgICAgXTtcblxuICAgICAgICBsZXQgdG90YWxUYXNrc1JlbmRlcmVkID0gMDtcbiAgICAgICAgZ3JvdXBPcmRlci5mb3JFYWNoKGcgPT4ge1xuICAgICAgICAgICAgaWYgKHNldHRpbmdzLnRhc2tEYXRlR3JvdXBzVG9TaG93LmluY2x1ZGVzKGcua2V5KSB8fCBnLmtleSA9PT0gJ25vRGF0ZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrc0luR3JvdXAgPSBncm91cHNbZy5rZXldO1xuICAgICAgICAgICAgICAgIHRvdGFsVGFza3NSZW5kZXJlZCArPSB0YXNrc0luR3JvdXAubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBDb250YWluZXIgPSB0aGlzLnRhc2tzQ29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ3Rhc2stZ3JvdXAtY29udGFpbmVyJywgYXR0cjogeyBzdHlsZTogYGJhY2tncm91bmQtY29sb3I6ICR7Zy5jb2xvcn1gIH0gfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBpc0NvbGxhcHNlZCA9IHRoaXMuY29sbGFwc2VkVGFza0dyb3Vwc1tnLmtleV07XG4gICAgICAgICAgICAgICAgaWYgKGlzQ29sbGFwc2VkKSBncm91cENvbnRhaW5lci5hZGRDbGFzcygnaXMtY29sbGFwc2VkJyk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXIgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd0YXNrLWdyb3VwLWhlYWRlcicgfSk7XG5cbiAgICAgICAgICAgICAgICBoZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIHdyYXBwZXIgZWxlbWVudCBmb3IgdGhlIGxpc3RcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFza0xpc3RXcmFwcGVyID0gZ3JvdXBDb250YWluZXIucXVlcnlTZWxlY3RvcignLnRhc2stbGlzdC13cmFwcGVyJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFza0xpc3RXcmFwcGVyKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhlIGN1cnJlbnQgc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNDdXJyZW50bHlDb2xsYXBzZWQgPSBncm91cENvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWNvbGxhcHNlZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0N1cnJlbnRseUNvbGxhcHNlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIEVYUEFORElORyAtLS1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDEuIFNldCB0aGUgQ1NTIHZhcmlhYmxlIHRvIHRoZSBlbGVtZW50J3MgZnVsbCBzY3JvbGwgaGVpZ2h0LlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgVGhpcyBnaXZlcyB0aGUgJ2hlaWdodCcgcHJvcGVydHkgYSBzcGVjaWZpYyB2YWx1ZSB0byBhbmltYXRlICp0byouXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzY3JvbGxIZWlnaHQgPSB0YXNrTGlzdFdyYXBwZXIuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFza0xpc3RXcmFwcGVyLnN0eWxlLnNldFByb3BlcnR5KCctLXRhc2stbGlzdC1oZWlnaHQnLCBgJHtzY3JvbGxIZWlnaHR9cHhgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMi4gUmVtb3ZlIHRoZSBjbGFzcyB0byB0cmlnZ2VyIHRoZSB0cmFuc2l0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaXMtY29sbGFwc2VkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFmdGVyIHRoZSBhbmltYXRpb24sIHJlbW92ZSB0aGUgZXhwbGljaXQgaGVpZ2h0IHRvIGFsbG93IGZvciBkeW5hbWljIGNvbnRlbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrTGlzdFdyYXBwZXIuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tdGFzay1saXN0LWhlaWdodCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzUwKTsgLy8gTWF0Y2ggdGhpcyB0byB5b3VyIENTUyB0cmFuc2l0aW9uIGR1cmF0aW9uXG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0tLSBDT0xMQVBTSU5HIC0tLVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMS4gU2V0IHRoZSBDU1MgdmFyaWFibGUgdG8gdGhlIGVsZW1lbnQncyBjdXJyZW50IHJlbmRlcmVkIGhlaWdodC5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIFRoaXMgZ2l2ZXMgdGhlICdoZWlnaHQnIHByb3BlcnR5IGEgc3BlY2lmaWMgdmFsdWUgdG8gYW5pbWF0ZSAqZnJvbSouXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50SGVpZ2h0ID0gdGFza0xpc3RXcmFwcGVyLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tMaXN0V3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS10YXNrLWxpc3QtaGVpZ2h0JywgYCR7Y3VycmVudEhlaWdodH1weGApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgbWljcm8tZGVsYXkgdG8gZW5zdXJlIHRoZSBicm93c2VyIHJlZ2lzdGVycyB0aGUgc3RhcnRpbmcgaGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiZWZvcmUgYmVpbmcgdG9sZCB0byB0cmFuc2l0aW9uIHRvIDAuIFRoaXMgaXMgdGhlIGtleSB0byBmaXhpbmcgdGhlIFwiaW5zdGFudCBjb2xsYXBzZVwiLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAyLiBBZGQgdGhlIGNsYXNzIHRvIHRyaWdnZXIgdGhlIHRyYW5zaXRpb24gdG8gaGVpZ2h0OiAwLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2lzLWNvbGxhcHNlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgYW5kIHNhdmUgdGhlIHN0YXRlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VkVGFza0dyb3Vwc1tnLmtleV0gPSAhaXNDdXJyZW50bHlDb2xsYXBzZWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50bHlDb2xsYXBzZWQgPSBncm91cENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdpcy1jb2xsYXBzZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZWRUYXNrR3JvdXBzW2cua2V5XSA9IGN1cnJlbnRseUNvbGxhcHNlZDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlckNvbnRlbnQgPSBoZWFkZXIuY3JlYXRlU3Bhbih7IGNsczogJ3Rhc2stZ3JvdXAtaGVhZGVyLWNvbnRlbnQnIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGljb25FbCA9IGhlYWRlckNvbnRlbnQuY3JlYXRlU3Bhbih7IGNsczogJ2ljb24nIH0pO1xuICAgICAgICAgICAgICAgIHNldEljb24oaWNvbkVsLCBnLmljb24pO1xuICAgICAgICAgICAgICAgIGhlYWRlckNvbnRlbnQuY3JlYXRlU3Bhbih7IHRleHQ6IGAke2cudGl0bGV9ICgke3Rhc2tzSW5Hcm91cC5sZW5ndGh9KWAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjb2xsYXBzZUljb24gPSBoZWFkZXIuY3JlYXRlU3Bhbih7IGNsczogJ3Rhc2stZ3JvdXAtY29sbGFwc2UtaWNvbicgfSk7XG4gICAgICAgICAgICAgICAgc2V0SWNvbihjb2xsYXBzZUljb24sICdjaGV2cm9uLWRvd24nKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tMaXN0V3JhcHBlciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdigndGFzay1saXN0LXdyYXBwZXInKTtcbiAgICAgICAgICAgICAgICBpZiAodGFza3NJbkdyb3VwLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGFza3NJbkdyb3VwLmZvckVhY2godGFzayA9PiB0aGlzLnJlbmRlclRhc2tJdGVtKHRhc2ssIHRhc2tMaXN0V3JhcHBlcikpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tMaXN0V3JhcHBlci5jcmVhdGVEaXYoeyB0ZXh0OiBgTm8gJHtnLnRpdGxlLnRvTG93ZXJDYXNlKCl9IHRhc2tzLmAsIGNsczogJ3Rhc2stZ3JvdXAtZW1wdHktbWVzc2FnZScgfSk7XG4gICAgICAgICAgICAgICAgICAgIGdyb3VwQ29udGFpbmVyLmFkZENsYXNzKCdpcy1jb2xsYXBzZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgdGFza0xpc3RXcmFwcGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodG90YWxUYXNrc1JlbmRlcmVkID09PSAwICYmIHRoaXMudGFza3NTZWFyY2hUZXJtKSB7XG4gICAgICAgICAgICB0aGlzLnRhc2tzQ29udGVudEVsLmNyZWF0ZURpdih7IHRleHQ6ICdObyB0YXNrcyBtYXRjaCB5b3VyIHNlYXJjaCB0ZXJtLicsIGNsczogJ3Rhc2stZ3JvdXAtZW1wdHktbWVzc2FnZScgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXJzIGEgc2luZ2xlIHRhc2sgaXRlbSByb3cgaW4gYSB0YXNrIGdyb3VwLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSB0YXNrIFRoZSB0YXNrIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIgVGhlIHBhcmVudCBjb250YWluZXIgZm9yIHRoZSB0YXNrIHJvdy5cbiAgICAgKi9cbiAgICByZW5kZXJUYXNrSXRlbSh0YXNrKSB7XG4gICAgICAgIGNvbnN0IHRhc2tSb3cgPSBjcmVhdGVEaXYoeyBjbHM6ICd0YXNrLXJvdycgfSk7XG4gICAgICAgIHRhc2tSb3cuZGF0YXNldC5rZXkgPSB0aGlzLmdldFRhc2tLZXkodGFzayk7XG4gICAgICAgIHRhc2tSb3cuZGF0YXNldC50YXNrU3RhdHVzID0gdGFzay5zdGF0dXM7XG4gICAgICAgIGNvbnN0IHNlYXJjaElucHV0RWwgPSB0aGlzLnRhc2tzU2VhcmNoSW5wdXRFbDtcblxuICAgICAgICBjb25zdCBjaGVja2JveCA9IHRhc2tSb3cuY3JlYXRlRGl2KHsgY2xzOiAndGFzay1jaGVja2JveC1zeW1ib2wnIH0pO1xuICAgICAgICB0aGlzLl9yZW5kZXJUYXNrU3ltYm9sKGNoZWNrYm94LCB0YXNrKTtcbiAgICAgICAgY29uc3QgdGV4dEVsID0gdGFza1Jvdy5jcmVhdGVTcGFuKHsgY2xzOiAndGFzay10ZXh0JyB9KTtcblxuICAgICAgICAvLyBPbiBpbml0aWFsIHJlbmRlciwgY2hlY2sgaWYgdGhlIHRhc2sgaXMgYWxyZWFkeSBjb21wbGV0ZWQgYW5kIGFwcGx5IHRoZSBzdHlsZS5cbiAgICAgICAgaWYgKHRhc2suc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICd4Jykge1xuICAgICAgICAgICAgdGV4dEVsLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBzdGF0ZSAqYmVmb3JlKiB0aGUgY2hhbmdlIGlzIG1hZGVcbiAgICAgICAgICAgIGNvbnN0IHdhc0NvbXBsZXRlZCA9IHRhc2suc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICd4JztcblxuICAgICAgICAgICAgLy8gTW9kaWZ5IHRoZSBmaWxlLiBUaGlzIGFsc28gdHJpZ2dlcnMgdGhlIGJhY2tncm91bmQgZmlsZSB3YXRjaGVyXG4gICAgICAgICAgICAvLyB3aGljaCB3aWxsIGNvcnJlY3RseSByZWZyZXNoIHRoZSBlbnRpcmUgdGFzayBsaXN0IGFmdGVyIGEgc2hvcnQgZGVsYXkuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnRvZ2dsZVRhc2tDb21wbGV0aW9uKHRhc2spO1xuXG4gICAgICAgICAgICAvLyAtLS0gUHJvdmlkZSBJbnN0YW50IFVJIEZlZWRiYWNrIC0tLVxuICAgICAgICAgICAgLy8gV2UgdXBkYXRlIHRoZSBsb2NhbCB0YXNrIG9iamVjdCBhbmQgdGhlIERPTSBpbW1lZGlhdGVseSBzbyB0aGUgdXNlclxuICAgICAgICAgICAgLy8gc2VlcyB0aGUgY2hhbmdlIHdpdGhvdXQgd2FpdGluZyBmb3IgdGhlIGZpbGUgd2F0Y2hlciB0byBmaW5pc2guXG5cbiAgICAgICAgICAgIGlmICh3YXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBpdCBXQVMgY29tcGxldGVkLCBpdHMgbmV3IHN0YXRlIGlzIElOQ09NUExFVEVcbiAgICAgICAgICAgICAgICB0YXNrLnN0YXR1cyA9ICcgJztcbiAgICAgICAgICAgICAgICB0ZXh0RWwuY2xhc3NMaXN0LnJlbW92ZSgnY29tcGxldGVkJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIElmIGl0IHdhcyBOT1QgY29tcGxldGVkLCBpdHMgbmV3IHN0YXRlIGlzIENPTVBMRVRFXG4gICAgICAgICAgICAgICAgdGFzay5zdGF0dXMgPSAneCc7XG4gICAgICAgICAgICAgICAgdGV4dEVsLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlZCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBGaW5hbGx5LCByZS1yZW5kZXIgdGhlIGNoZWNrYm94IHN5bWJvbCBpdHNlbGYgdXNpbmcgdGhlIG5ldyBzdGF0dXNcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlclRhc2tTeW1ib2woY2hlY2tib3gsIHRhc2spO1xuICAgICAgICB9KTtcblxuICAgICAgICBNYXJrZG93blJlbmRlcmVyLnJlbmRlcih0aGlzLmFwcCwgdGFzay50ZXh0LCB0ZXh0RWwsIHRhc2suZmlsZS5wYXRoLCB0aGlzKTtcblxuICAgICAgICB0YXNrUm93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dCh0YXNrLmZpbGUucGF0aCwgJycsIGZhbHNlLCB7IGVTdGF0ZTogeyBsaW5lOiB0YXNrLmxpbmVOdW1iZXIgfSB9KSk7XG4gICAgICAgIHRoaXMuYWRkS2V5ZG93bkxpc3RlbmVycyh0YXNrUm93LCBzZWFyY2hJbnB1dEVsKTtcblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrVGV4dFRydW5jYXRlICYmIHRleHRFbC5zY3JvbGxXaWR0aCA+IHRleHRFbC5jbGllbnRXaWR0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb2x0aXBUZXh0ID0gYFRhc2s6ICR7dGFzay50ZXh0fVxcblxcbkZpbGU6ICR7dGFzay5maWxlLnBhdGh9XFxuRHVlOiAke3Rhc2suZHVlRGF0ZSA/IG1vbWVudCh0YXNrLmR1ZURhdGUpLmZvcm1hdCgnWVlZWS1NTS1ERCcpIDogJ05vbmUnfVxcblRhZ3M6ICR7dGFzay50YWdzLmxlbmd0aCA+IDAgPyB0YXNrLnRhZ3MubWFwKHQgPT4gJyMnICsgdCkuam9pbignICcpIDogJ05vbmUnfWA7XG4gICAgICAgICAgICAgICAgdGV4dEVsLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHRvb2x0aXBUZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMCk7XG5cbiAgICAgICAgcmV0dXJuIHRhc2tSb3c7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVG9nZ2xlcyB0aGUgY29tcGxldGlvbiBzdGF0ZSBvZiBhIHRhc2sgYnkgbW9kaWZ5aW5nIHRoZSBzb3VyY2UgTWFya2Rvd24gZmlsZS5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gdGFzayBUaGUgdGFzayBvYmplY3QgdG8gdG9nZ2xlLlxuICAgICAqL1xuICAgIGFzeW5jIHRvZ2dsZVRhc2tDb21wbGV0aW9uKHRhc2spIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQodGFzay5maWxlKTtcbiAgICAgICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICAgICAgbGV0IGxpbmUgPSBsaW5lc1t0YXNrLmxpbmVOdW1iZXJdO1xuXG4gICAgICAgIGNvbnN0IGNvbXBsZXRpb25EYXRlUmVnZXggPSAvXFxzKuKchVxccypcXGR7NH0tXFxkezJ9LVxcZHsyfS87XG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbW9tZW50KCkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKTtcbiAgICAgICAgY29uc3QgaXNDb21wbGV0ZWQgPSB0YXNrLnN0YXR1cy50b0xvd2VyQ2FzZSgpID09PSAneCc7XG5cbiAgICAgICAgLy8gRmluZCB0aGUgdGFzayBtYXJrZXIgWy5dIGFuZCByZXBsYWNlIHRoZSBjaGFyYWN0ZXIgaW5zaWRlXG4gICAgICAgIGNvbnN0IHRhc2tNYXJrZXJSZWdleCA9IC9cXFsuXFxdLztcblxuICAgICAgICBpZiAoaXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgIC8vIE1hcmsgYXMgaW5jb21wbGV0ZTogW3hdIC0+IFsgXSBhbmQgcmVtb3ZlIGNvbXBsZXRpb24gZGF0ZVxuICAgICAgICAgICAgbGV0IG5ld0xpbmUgPSBsaW5lLnJlcGxhY2UodGFza01hcmtlclJlZ2V4LCAnWyBdJyk7XG4gICAgICAgICAgICBsaW5lc1t0YXNrLmxpbmVOdW1iZXJdID0gbmV3TGluZS5yZXBsYWNlKGNvbXBsZXRpb25EYXRlUmVnZXgsICcnKS50cmltKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBNYXJrIGFzIGNvbXBsZXRlOiBbIF0gb3IgWy9dIG9yIFstXSAtPiBbeF0gYW5kIGFkZCBjb21wbGV0aW9uIGRhdGVcbiAgICAgICAgICAgIGxldCBuZXdMaW5lID0gbGluZS5yZXBsYWNlKHRhc2tNYXJrZXJSZWdleCwgJ1t4XScpO1xuICAgICAgICAgICAgbmV3TGluZSA9IG5ld0xpbmUucmVwbGFjZShjb21wbGV0aW9uRGF0ZVJlZ2V4LCAnJyk7IC8vIFJlbW92ZSBhbnkgb2xkIG9uZSBmaXJzdFxuICAgICAgICAgICAgbGluZXNbdGFzay5saW5lTnVtYmVyXSA9IGAke25ld0xpbmV9IOKchSAke3RvZGF5fWA7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KHRhc2suZmlsZSwgbGluZXMuam9pbignXFxuJykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgYW4gZXhpc3RpbmcgdGFzayByb3cgaW4gdGhlIERPTSB3aXRoIG5ldyBkYXRhLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhc2tSb3dFbCBUaGUgLnRhc2stcm93IGVsZW1lbnQgdG8gdXBkYXRlLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSB0YXNrIFRoZSBuZXcgdGFzayBvYmplY3Qgd2l0aCB1cGRhdGVkIGRhdGEuXG4gICAgICovXG4gICAgdXBkYXRlVGFza0l0ZW0odGFza1Jvd0VsLCB0YXNrKSB7XG4gICAgICAgIC8vIE9ubHkgdXBkYXRlIGlmIHRoZSB0ZXh0IGNvbnRlbnQgaGFzIGNoYW5nZWRcbiAgICAgICAgY29uc3QgdGV4dEVsID0gdGFza1Jvd0VsLnF1ZXJ5U2VsZWN0b3IoJy50YXNrLXRleHQnKTtcblxuICAgICAgICAvLyBPbmx5IHVwZGF0ZSBpZiB0aGUgc3RhdHVzIGhhcyBjaGFuZ2VkXG4gICAgICAgIGlmICh0YXNrUm93RWwuZGF0YXNldC50YXNrU3RhdHVzICE9PSB0YXNrLnN0YXR1cykge1xuICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSB0YXNrUm93RWwucXVlcnlTZWxlY3RvcignLnRhc2stY2hlY2tib3gtc3ltYm9sJyk7XG4gICAgICAgICAgICBpZiAoY2hlY2tib3gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJUYXNrU3ltYm9sKGNoZWNrYm94LCB0YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhc2tSb3dFbC5kYXRhc2V0LnRhc2tTdGF0dXMgPSB0YXNrLnN0YXR1cztcblxuICAgICAgICAgICAgaWYgKHRleHRFbCkge1xuICAgICAgICAgICAgICAgIGlmICh0YXNrLnN0YXR1cy50b0xvd2VyQ2FzZSgpID09PSAneCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dEVsLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlZCcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRFbC5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBIHNpbXBsZSBjaGVjayB0byBzZWUgaWYgdGhlIHJlbmRlcmVkIEhUTUwgbWlnaHQgYmUgZGlmZmVyZW50XG4gICAgICAgIGlmICh0ZXh0RWwgJiYgdGV4dEVsLnRleHRDb250ZW50ICE9PSB0YXNrLnRleHQpIHtcbiAgICAgICAgICAgIHRleHRFbC5lbXB0eSgpOyAvLyBDbGVhciBleGlzdGluZyByZW5kZXJlZCBtYXJrZG93blxuICAgICAgICAgICAgTWFya2Rvd25SZW5kZXJlci5yZW5kZXIodGhpcy5hcHAsIHRhc2sudGV4dCwgdGV4dEVsLCB0YXNrLmZpbGUucGF0aCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPcGVucyB0aGUgc2NyYXRjaHBhZCBub3RlIGluIGEgbmV3IG9yIGN1cnJlbnQgdGFiLlxuICAgICAqL1xuICAgIGFzeW5jIG9wZW5TY3JhdGNocGFkRmlsZSgpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZpeGVkTm90ZUZpbGU7XG4gICAgICAgIC8vIEZpcnN0LCB0cnkgdG8gZmluZCBhbiBhbHJlYWR5IG9wZW4gbGVhZiBmb3IgdGhpcyBmaWxlLlxuICAgICAgICBsZXQgdGFyZ2V0TGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXCJtYXJrZG93blwiKS5maW5kKGxlYWYgPT4gbGVhZi52aWV3LmZpbGU/LnBhdGggPT09IHBhdGgpO1xuICAgICAgICBpZiAodGFyZ2V0TGVhZikgeyB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZih0YXJnZXRMZWFmKTsgcmV0dXJuOyB9XG5cbiAgICAgICAgbGV0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XG4gICAgICAgIC8vIElmIHRoZSBmaWxlIGRvZXNuJ3QgZXhpc3QsIGNyZWF0ZSBpdC5cbiAgICAgICAgaWYgKCFmaWxlKSBmaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHBhdGgsIFwiXCIpLmNhdGNoKCgpID0+IG5ldyBOb3RpY2UoYEZhaWxlZCB0byBjcmVhdGUgc2NyYXRjaHBhZDogJHtwYXRofWApKTtcblxuICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNocGFkT3BlbkFjdGlvbiA9PT0gJ25ldy10YWInKS5vcGVuRmlsZShmaWxlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTYXZlcyB0ZXh0IGNvbnRlbnQgdG8gdGhlIHNjcmF0Y2hwYWQgbm90ZSBmaWxlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IHRvIHNhdmUuXG4gICAgICovXG4gICAgYXN5bmMgc2F2ZUZpeGVkTm90ZSh0ZXh0KSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5maXhlZE5vdGVGaWxlO1xuICAgICAgICBjb25zdCBmb2xkZXJQYXRoID0gcGF0aC5zdWJzdHJpbmcoMCwgcGF0aC5sYXN0SW5kZXhPZihcIi9cIikpO1xuICAgICAgICAvLyBDcmVhdGUgcGFyZW50IGZvbGRlciBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuICAgICAgICBpZiAoZm9sZGVyUGF0aCAmJiAhdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclBhdGgpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyUGF0aCkuY2F0Y2goZXJyID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhdGluZyBmb2xkZXI6XCIsIGVycikpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xuICAgICAgICBpZiAoIWZpbGUpIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShwYXRoLCB0ZXh0KTtcbiAgICAgICAgZWxzZSBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgdGV4dCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZHMgdGhlIGNvbnRlbnQgb2YgdGhlIHNjcmF0Y2hwYWQgbm90ZSBmaWxlLlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IFRoZSBjb250ZW50IG9mIHRoZSBub3RlLCBvciBhbiBlbXB0eSBzdHJpbmcgaWYgaXQgZG9lc24ndCBleGlzdC5cbiAgICAgKi9cbiAgICBhc3luYyBsb2FkTm90ZSgpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZpeGVkTm90ZUZpbGU7XG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHJldHVybiBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPcGVucyBhIGRhaWx5IG5vdGUgZm9yIGEgZ2l2ZW4gZGF0ZSwgY3JlYXRpbmcgaXQgZnJvbSBhIHRlbXBsYXRlIGlmIGl0IGRvZXNuJ3QgZXhpc3QuXG4gICAgICogQHBhcmFtIHtEYXRlfSBkYXRlIFRoZSBkYXRlIGZvciB0aGUgZGFpbHkgbm90ZS5cbiAgICAgKi9cbiAgICBhc3luYyBvcGVuRGFpbHlOb3RlKGRhdGUpIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgZGFpbHlOb3Rlc0ZvbGRlcixcbiAgICAgICAgICAgIGRhaWx5Tm90ZURhdGVGb3JtYXQsXG4gICAgICAgICAgICBkYWlseU5vdGVUZW1wbGF0ZVBhdGgsXG4gICAgICAgICAgICBkYWlseU5vdGVPcGVuQWN0aW9uXG4gICAgICAgIH0gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBmb3JtYXREYXRlKGRhdGUsIGRhaWx5Tm90ZURhdGVGb3JtYXQpO1xuICAgICAgICBjb25zdCBwYXRoID0gZGFpbHlOb3Rlc0ZvbGRlciA/IGAke2RhaWx5Tm90ZXNGb2xkZXJ9LyR7ZmlsZW5hbWV9Lm1kYCA6IGAke2ZpbGVuYW1lfS5tZGA7XG5cbiAgICAgICAgbGV0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XG4gICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgICAvLyBGaWxlIGFscmVhZHkgZXhpc3RzLCBqdXN0IG9wZW4gaXRcbiAgICAgICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihkYWlseU5vdGVPcGVuQWN0aW9uID09PSAnbmV3LXRhYicpO1xuICAgICAgICAgICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyAtLS0gRmlsZSBkb2VzIE5PVCBleGlzdCwgcHJvY2VlZCB3aXRoIGNyZWF0aW9uIC0tLVxuXG4gICAgICAgIC8vIFRoaXMgaW5uZXIgZnVuY3Rpb24gaXMgbm93IHVwZGF0ZWQgdG8gaGFuZGxlIFRlbXBsYXRlciBjb3JyZWN0bHlcbiAgICAgICAgY29uc3QgY3JlYXRlTm90ZSA9IGFzeW5jIChpbmNsdWRlRXZlbnRzID0gZmFsc2UpID0+IHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCItLS0gU3RhcnRpbmcgRGFpbHkgTm90ZSBDcmVhdGlvbiAtLS1cIik7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKGBDcmVhdGluZyBub3RlIHdpdGggaW5jbHVkZUV2ZW50czogJHtpbmNsdWRlRXZlbnRzfWApO1xuXG4gICAgICAgICAgICBsZXQgdGVtcGxhdGVDb250ZW50ID0gXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlRmlsZSA9IGRhaWx5Tm90ZVRlbXBsYXRlUGF0aCA/IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChkYWlseU5vdGVUZW1wbGF0ZVBhdGgpIDogbnVsbDtcblxuICAgICAgICAgICAgaWYgKHRlbXBsYXRlRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZCh0ZW1wbGF0ZUZpbGUpO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJTdWNjZXNzZnVsbHkgcmVhZCB0ZW1wbGF0ZSBmaWxlLlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBUZW1wbGF0ZSBmaWxlIG5vdCBmb3VuZCBhdDogJHtkYWlseU5vdGVUZW1wbGF0ZVBhdGh9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgbm90ZSB3aXRoIHRoZSBwbGFjZWhvbGRlciBmaXJzdFxuICAgICAgICAgICAgY29uc3QgbmV3RmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShwYXRoLCB0ZW1wbGF0ZUNvbnRlbnQpO1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhgQ3JlYXRlZCBuZXcgbm90ZSBhdDogJHtuZXdGaWxlLnBhdGh9YCk7XG5cbiAgICAgICAgICAgIC8vIE9wZW4gdGhlIG5vdGVcbiAgICAgICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihkYWlseU5vdGVPcGVuQWN0aW9uID09PSBcIm5ldy10YWJcIik7XG4gICAgICAgICAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKG5ld0ZpbGUpO1xuXG4gICAgICAgICAgICBjb25zdCBwbGFjZWhvbGRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNhbGVuZGFyRXZlbnRzUGxhY2Vob2xkZXIgfHwgJyUlQ0FMRU5EQVJfRVZFTlRTJSUnO1xuXG4gICAgICAgICAgICAvLyBJZiBpbmNsdWRpbmcgZXZlbnRzLCBwcm9jZWVkIHdpdGggaW5qZWN0aW9uXG4gICAgICAgICAgICBpZiAoaW5jbHVkZUV2ZW50cykge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJXYWl0aW5nIGZvciBUZW1wbGF0ZXIgdG8gcHJvY2Vzcy4uLlwiKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwKSk7IC8vIERlbGF5XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIi4uLnJlc3VtaW5nIGV2ZW50IGluamVjdGlvbi5cIik7XG5cbiAgICAgICAgICAgICAgICAvLyAxLiBDaGVjayBmb3IgZXZlbnRzIGluIHRoZSBtYXBcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlS2V5ID0gbW9tZW50KGRhdGUpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnRzRm9yRGF5ID0gdGhpcy5pY3NFdmVudHNCeURhdGUuZ2V0KGRhdGVLZXkpO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coYERhdGUgS2V5OiAke2RhdGVLZXl9YCk7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkV2ZW50cyBmb3VuZCBmb3IgdGhpcyBrZXk6XCIsIGV2ZW50c0ZvckRheSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRzRm9yRGF5ICYmIGV2ZW50c0ZvckRheS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIDIuIEZvcm1hdCB0aGUgZXZlbnRzIGludG8gYSBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXZlbnRDb250ZW50ID0gdGhpcy5mb3JtYXRFdmVudHNGb3JUZW1wbGF0ZShldmVudHNGb3JEYXkpIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJGb3JtYXR0ZWQgRXZlbnQgQ29udGVudDpcXG5cIiwgZXZlbnRDb250ZW50KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyAzLiBSZWFkIHRoZSBmaWxlICphZnRlciogVGVtcGxhdGVyIGhhcyBydW5cbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChuZXdGaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhgRmlsZSBjb250ZW50IGJlZm9yZSBpbmplY3Rpb24gY29udGFpbnMgcGxhY2Vob2xkZXI6ICR7Y3VycmVudENvbnRlbnQuaW5jbHVkZXMoXCIlJUNBTEVOREFSX0VWRU5UUyUlXCIpfWApO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gNC4gUmVwbGFjZSBwbGFjZWhvbGRlciBhbmQgc2F2ZVxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvbnRlbnQuaW5jbHVkZXMocGxhY2Vob2xkZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5hbENvbnRlbnQgPSBjdXJyZW50Q29udGVudC5yZXBsYWNlKHBsYWNlaG9sZGVyLCBldmVudENvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KG5ld0ZpbGUsIGZpbmFsQ29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiU3VjY2Vzc2Z1bGx5IGluamVjdGVkIGV2ZW50cyBhbmQgc2F2ZWQgdGhlIGZpbGUuXCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgUGxhY2Vob2xkZXIgXCIke3BsYWNlaG9sZGVyfVwiIG5vdCBmb3VuZCBpbiB0aGUgbm90ZSBhZnRlciBjcmVhdGlvbi4gVGVtcGxhdGVyIG1pZ2h0IGJlIHJlbW92aW5nIGl0LmApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiTm8gZXZlbnRzIGZvdW5kIGZvciB0aGlzIGRhdGUsIHNvIG5vdGhpbmcgdG8gaW5qZWN0LlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBMb2dpYyBmb3IgcmVtb3ZpbmcgcGxhY2Vob2xkZXIgd2hlbiBpbmNsdWRlRXZlbnRzIGlzIGZhbHNlIGNhbiBiZSBhZGRlZCBoZXJlIGlmIG5lZWRlZFxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkNsZWFuaW5nIHVwIHBsYWNlaG9sZGVyLi4uXCIpO1xuICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAyMDApKTtcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudENvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKG5ld0ZpbGUpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q29udGVudC5pbmNsdWRlcyhwbGFjZWhvbGRlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmluYWxDb250ZW50ID0gY3VycmVudENvbnRlbnQucmVwbGFjZShwbGFjZWhvbGRlciwgXCJcIikudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkobmV3RmlsZSwgZmluYWxDb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIlBsYWNlaG9sZGVyIHJlbW92ZWQuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIi0tLSBEYWlseSBOb3RlIENyZWF0aW9uIEZpbmlzaGVkIC0tLVwiKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBoYXNUZW1wbGF0ZSA9ICEhZGFpbHlOb3RlVGVtcGxhdGVQYXRoICYmIGRhaWx5Tm90ZVRlbXBsYXRlUGF0aC5sZW5ndGggPiAwXG4gICAgICAgIC8vIFRoZSByZXN0IG9mIHlvdXIgZXhpc3RpbmcgbG9naWMgcmVtYWlucyB1bmNoYW5nZWQuXG4gICAgICAgIGNvbnN0IGRhdGVLZXkgPSBtb21lbnQoZGF0ZSkuZm9ybWF0KCdZWVlZLU1NLUREJyk7XG4gICAgICAgIGNvbnN0IGV2ZW50c0ZvckRheSA9IHRoaXMuaWNzRXZlbnRzQnlEYXRlLmdldChkYXRlS2V5KTtcbiAgICAgICAgY29uc3QgZnJpZW5kbHlEYXRlID0gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcodW5kZWZpbmVkLCB7XG4gICAgICAgICAgICB3ZWVrZGF5OiAnbG9uZycsXG4gICAgICAgICAgICB5ZWFyOiAnbnVtZXJpYycsXG4gICAgICAgICAgICBtb250aDogJ2xvbmcnLFxuICAgICAgICAgICAgZGF5OiAnbnVtZXJpYydcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGV2ZW50c0ZvckRheSAmJiBldmVudHNGb3JEYXkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gLS0tIENhc2UgMTogRXZlbnRzIGV4aXN0IGZvciB0aGUgc2VsZWN0ZWQgZGF5IC0tLVxuICAgICAgICAgICAgbmV3IEFjdGlvbkNob2ljZU1vZGFsKHRoaXMuYXBwLFxuICAgICAgICAgICAgICAgIGBDcmVhdGUgZGFpbHkgbm90ZSBmb3IgJHtmcmllbmRseURhdGV9P2AsXG4gICAgICAgICAgICAgICAgXCJUaGlzIGRheSBoYXMgY2FsZW5kYXIgZXZlbnRzLiBIb3cgd291bGQgeW91IGxpa2UgdG8gcHJvY2VlZD9cIixcbiAgICAgICAgICAgICAgICBbe1xuICAgICAgICAgICAgICAgICAgICAvLyBCdXR0b24gMTogQWx3YXlzIGluY2x1ZGVzIGV2ZW50c1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBoYXNUZW1wbGF0ZSA/ICdDcmVhdGUgd2l0aCBFdmVudHMgJiBUZW1wbGF0ZScgOiAnQ3JlYXRlIHdpdGggRXZlbnRzJyxcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAnbW9kLWN0YScsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4gY3JlYXRlTm90ZSh0cnVlKVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQnV0dG9uIDI6IEV4Y2x1ZGVzIGV2ZW50c1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBoYXNUZW1wbGF0ZSA/ICdDcmVhdGUgZnJvbSBUZW1wbGF0ZSBPbmx5JyA6ICdDcmVhdGUgQmxhbmsgTm90ZScsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4gY3JlYXRlTm90ZShmYWxzZSlcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdDYW5jZWwnLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHsgfVxuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICApLm9wZW4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIC0tLSBDYXNlIDI6IE5vIGV2ZW50cyBleGlzdCBmb3IgdGhlIHNlbGVjdGVkIGRheSAtLS1cbiAgICAgICAgICAgIG5ldyBBY3Rpb25DaG9pY2VNb2RhbCh0aGlzLmFwcCxcbiAgICAgICAgICAgICAgICAnQ3JlYXRlIGRhaWx5IG5vdGU/JyxcbiAgICAgICAgICAgICAgICBgQSBkYWlseSBub3RlIGZvciAke2ZyaWVuZGx5RGF0ZX0gZG9lcyBub3QgZXhpc3QuIFdvdWxkIHlvdSBsaWtlIHRvIGNyZWF0ZSBpdD9gLFxuICAgICAgICAgICAgICAgIFt7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBtYWluIGFjdGlvbiBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgdGV4dDogaGFzVGVtcGxhdGUgPyAnQ3JlYXRlIGZyb20gVGVtcGxhdGUnIDogJ0NyZWF0ZSBCbGFuayBOb3RlJyxcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAnbW9kLWN0YScsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4gY3JlYXRlTm90ZShmYWxzZSkgLy8gTm8gZXZlbnRzIHRvIGluY2x1ZGUsIHNvIGFsd2F5cyBmYWxzZVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ0NhbmNlbCcsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4geyB9XG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICkub3BlbigpO1xuICAgICAgICB9XG4gICAgfVxuXG59XG5cblxuLyoqXG4gKiBUaGUgbWFpbiBwbHVnaW4gY2xhc3MgdGhhdCByZWdpc3RlcnMgdGhlIHZpZXcgYW5kIHNldHRpbmdzIHRhYi5cbiAqL1xuY2xhc3MgUGVyaW9kTW9udGhQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICAgICAgICB0aGlzLmFkZFN0eWxlKCk7XG4gICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJWaWV3KFZJRVdfVFlQRV9QRVJJT0QsIGxlYWYgPT4gbmV3IFBlcmlvZE1vbnRoVmlldyhsZWFmLCB0aGlzKSk7XG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbihcImNhbGVuZGFyLWNoZWNrXCIsIFwiT3BlbiBDYWxlbmRhciBQZXJpb2QgV2VlayBOb3Rlc1wiLCAoKSA9PiB0aGlzLmFjdGl2YXRlVmlldygpKTtcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHsgaWQ6IFwib3Blbi1wZXJpb2QtbW9udGgtdmlld1wiLCBuYW1lOiBcIk9wZW4gQ2FsZW5kYXIgUGVyaW9kIFdlZWsgTm90ZXNcIiwgY2FsbGJhY2s6ICgpID0+IHRoaXMuYWN0aXZhdGVWaWV3KCkgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMucmVzZXRJY3NSZWZyZXNoSW50ZXJ2YWwoKTtcbiAgICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBQZXJpb2RTZXR0aW5nc1RhYih0aGlzLmFwcCwgdGhpcykpO1xuICAgICAgICB0aGlzLmFjdGl2YXRlVmlldygpO1xuICAgICAgICB0aGlzLmljc1JlZnJlc2hJbnRlcnZhbElkID0gbnVsbDtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5qZWN0cyB0aGUgcGx1Z2luJ3MgQ1NTIGludG8gdGhlIGRvY3VtZW50IGhlYWQuXG4gICAgICovXG4gICAgYWRkU3R5bGUoKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICBzdHlsZUVsLmlkID0gJ3BlcmlvZC1tb250aC1wbHVnaW4tc3R5bGVzJztcbiAgICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IFBMVUdJTl9TVFlMRVM7XG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBDU1MgY3VzdG9tIHByb3BlcnRpZXMgKHZhcmlhYmxlcykgYmFzZWQgb24gdGhlIGN1cnJlbnQgcGx1Z2luIHNldHRpbmdzLlxuICAgICAqL1xuICAgIHVwZGF0ZVN0eWxlcygpIHtcbiAgICAgICAgY29uc3Qgc3R5bGVQcm9wcyA9IHtcbiAgICAgICAgICAgICctLWhlYWRlci1mb250LXNpemUnOiB0aGlzLnNldHRpbmdzLmZvbnRTaXplLFxuICAgICAgICAgICAgJy0tZGF5LW51bWJlci1mb250LXNpemUnOiB0aGlzLnNldHRpbmdzLmRheU51bWJlckZvbnRTaXplLFxuICAgICAgICAgICAgJy0taGVhZGVyLXJvdy1mb250LXdlaWdodCc6IHRoaXMuc2V0dGluZ3MuaGVhZGVyUm93Qm9sZCA/ICdib2xkJyA6ICdub3JtYWwnLFxuICAgICAgICAgICAgJy0tcHctY29sdW1uLWZvbnQtd2VpZ2h0JzogdGhpcy5zZXR0aW5ncy5wd0NvbHVtbkJvbGQgPyAnYm9sZCcgOiAnbm9ybWFsJyxcbiAgICAgICAgICAgICctLW1vbnRoLWNvbG9yLWxpZ2h0JzogdGhpcy5zZXR0aW5ncy5tb250aENvbG9yTGlnaHQsXG4gICAgICAgICAgICAnLS1tb250aC1jb2xvci1kYXJrJzogdGhpcy5zZXR0aW5ncy5tb250aENvbG9yRGFyayxcbiAgICAgICAgICAgICctLXB3LXNlcGFyYXRvci1jb2xvcic6IHRoaXMuc2V0dGluZ3MucHdDb2x1bW5TZXBhcmF0b3JDb2xvcixcbiAgICAgICAgICAgICctLXB3LWNvbHVtbi1mb250LWNvbG9yLWxpZ2h0JzogdGhpcy5zZXR0aW5ncy5wd0NvbHVtbkZvbnRDb2xvckxpZ2h0LFxuICAgICAgICAgICAgJy0tcHctY29sdW1uLWZvbnQtY29sb3ItZGFyayc6IHRoaXMuc2V0dGluZ3MucHdDb2x1bW5Gb250Q29sb3JEYXJrLFxuICAgICAgICAgICAgJy0td2Vlay1udW1iZXItZm9udC1jb2xvci1saWdodCc6IHRoaXMuc2V0dGluZ3Mud2Vla051bWJlckZvbnRDb2xvckxpZ2h0LFxuICAgICAgICAgICAgJy0td2Vlay1udW1iZXItZm9udC1jb2xvci1kYXJrJzogdGhpcy5zZXR0aW5ncy53ZWVrTnVtYmVyRm9udENvbG9yRGFyayxcbiAgICAgICAgICAgICctLWRheS1oZWFkZXItZm9udC1jb2xvci1saWdodCc6IHRoaXMuc2V0dGluZ3MuZGF5SGVhZGVyRm9udENvbG9yTGlnaHQsXG4gICAgICAgICAgICAnLS1kYXktaGVhZGVyLWZvbnQtY29sb3ItZGFyayc6IHRoaXMuc2V0dGluZ3MuZGF5SGVhZGVyRm9udENvbG9yRGFyayxcbiAgICAgICAgICAgICctLWRheS1jZWxsLWZvbnQtY29sb3ItbGlnaHQnOiB0aGlzLnNldHRpbmdzLmRheUNlbGxGb250Q29sb3JMaWdodCxcbiAgICAgICAgICAgICctLWRheS1jZWxsLWZvbnQtY29sb3ItZGFyayc6IHRoaXMuc2V0dGluZ3MuZGF5Q2VsbEZvbnRDb2xvckRhcmssXG4gICAgICAgICAgICAnLS1vdGhlci1tb250aC1mb250LWNvbG9yLWxpZ2h0JzogdGhpcy5zZXR0aW5ncy5vdGhlck1vbnRoRm9udENvbG9yTGlnaHQsXG4gICAgICAgICAgICAnLS1vdGhlci1tb250aC1mb250LWNvbG9yLWRhcmsnOiB0aGlzLnNldHRpbmdzLm90aGVyTW9udGhGb250Q29sb3JEYXJrLFxuICAgICAgICAgICAgJy0tc2NyYXRjaC1mb250LWZhbWlseSc6IHRoaXMuc2V0dGluZ3Muc2NyYXRjaEZvbnRGYW1pbHksXG4gICAgICAgICAgICAnLS1zY3JhdGNoLWZvbnQtc2l6ZSc6IHRoaXMuc2V0dGluZ3Muc2NyYXRjaEZvbnRTaXplLFxuICAgICAgICAgICAgJy0tc2NyYXRjaC1ib2xkJzogdGhpcy5zZXR0aW5ncy5zY3JhdGNoQm9sZCA/ICdib2xkJyA6ICdub3JtYWwnLFxuICAgICAgICAgICAgJy0tbm90ZXMtZm9udC1zaXplJzogdGhpcy5zZXR0aW5ncy5ub3Rlc0ZvbnRTaXplLFxuICAgICAgICAgICAgJy0tbm90ZXMtYm9sZCc6IHRoaXMuc2V0dGluZ3Mubm90ZXNCb2xkID8gJ2JvbGQnIDogJ25vcm1hbCcsXG4gICAgICAgICAgICAnLS10YWItdGl0bGUtZm9udC1zaXplJzogdGhpcy5zZXR0aW5ncy50YWJUaXRsZUZvbnRTaXplLFxuICAgICAgICAgICAgJy0tdGFiLXRpdGxlLWJvbGQnOiB0aGlzLnNldHRpbmdzLnRhYlRpdGxlQm9sZCA/ICdib2xkJyA6ICdub3JtYWwnLFxuICAgICAgICAgICAgJy0tbm90ZXMtbGluZS1oZWlnaHQnOiB0aGlzLnNldHRpbmdzLm5vdGVzTGluZUhlaWdodCxcbiAgICAgICAgICAgICctLXNlbGVjdGVkLXRhYi1jb2xvcic6IHRoaXMuc2V0dGluZ3Muc2VsZWN0ZWRUYWJDb2xvcixcbiAgICAgICAgICAgICctLXRvZGF5LWhpZ2hsaWdodC1jb2xvci1saWdodCc6IHRoaXMuc2V0dGluZ3MudG9kYXlIaWdobGlnaHRDb2xvckxpZ2h0LFxuICAgICAgICAgICAgJy0tdG9kYXktaGlnaGxpZ2h0LWNvbG9yLWRhcmsnOiB0aGlzLnNldHRpbmdzLnRvZGF5SGlnaGxpZ2h0Q29sb3JEYXJrLFxuICAgICAgICAgICAgJy0tbm90ZXMtaG92ZXItY29sb3InOiB0aGlzLnNldHRpbmdzLm5vdGVzSG92ZXJDb2xvcixcbiAgICAgICAgICAgICctLWRhaWx5LW5vdGUtZG90LWNvbG9yJzogdGhpcy5zZXR0aW5ncy5kYWlseU5vdGVEb3RDb2xvcixcbiAgICAgICAgICAgICctLW5vdGUtY3JlYXRlZC1jb2xvcic6IHRoaXMuc2V0dGluZ3Mubm90ZUNyZWF0ZWRDb2xvcixcbiAgICAgICAgICAgICctLW5vdGUtbW9kaWZpZWQtY29sb3InOiB0aGlzLnNldHRpbmdzLm5vdGVNb2RpZmllZENvbG9yLFxuICAgICAgICAgICAgJy0tb3RoZXItbm90ZS1kb3QtY29sb3InOiB0aGlzLnNldHRpbmdzLm90aGVyTm90ZURvdENvbG9yLFxuICAgICAgICAgICAgJy0tY2FsZW5kYXItZ3JpZC1nYXAtd2lkdGgnOiB0aGlzLnNldHRpbmdzLmNhbGVuZGFyR3JpZEdhcFdpZHRoLFxuICAgICAgICAgICAgJy0tY2FsZW5kYXItbW9kaWZpZWQtZG90LWNvbG9yJzogdGhpcy5zZXR0aW5ncy5jYWxlbmRhck1vZGlmaWVkRG90Q29sb3IsXG4gICAgICAgICAgICAnLS1vdGhlci1ub3RlLXBvcHVwLWZvbnQtc2l6ZSc6IHRoaXMuc2V0dGluZ3Mub3RoZXJOb3RlUG9wdXBGb250U2l6ZSxcbiAgICAgICAgICAgICctLWNhbGVuZGFyLWRvdC1zaXplJzogdGhpcy5zZXR0aW5ncy5jYWxlbmRhckRvdFNpemUgKyAncHgnLFxuICAgICAgICAgICAgJy0tbmF2LWJ1dHRvbi1oZWlnaHQnOiB0aGlzLnNldHRpbmdzLm5hdkJ1dHRvbkhlaWdodCxcbiAgICAgICAgICAgICctLWRhdGUtY2VsbC1ob3Zlci1jb2xvci1saWdodCc6IHRoaXMuc2V0dGluZ3MuZGF0ZUNlbGxIb3ZlckNvbG9yTGlnaHQsXG4gICAgICAgICAgICAnLS1kYXRlLWNlbGwtaG92ZXItY29sb3ItZGFyayc6IHRoaXMuc2V0dGluZ3MuZGF0ZUNlbGxIb3ZlckNvbG9yRGFyayxcbiAgICAgICAgICAgICctLW1haW4tbW9udGgteWVhci10aXRsZS1mb250LXNpemUnOiB0aGlzLnNldHRpbmdzLm1haW5Nb250aFllYXJUaXRsZUZvbnRTaXplLFxuICAgICAgICAgICAgJy0tbWFpbi1tb250aC15ZWFyLXRpdGxlLXdlaWdodCc6IHRoaXMuc2V0dGluZ3MubWFpbk1vbnRoWWVhclRpdGxlQm9sZCA/ICdib2xkJyA6ICdub3JtYWwnLFxuICAgICAgICAgICAgJy0tdGFzay1oZWFkaW5nLWZvbnQtc2l6ZSc6IHRoaXMuc2V0dGluZ3MudGFza0hlYWRpbmdGb250U2l6ZSxcbiAgICAgICAgICAgICctLXRhc2stdGV4dC1mb250LXNpemUnOiB0aGlzLnNldHRpbmdzLnRhc2tUZXh0Rm9udFNpemUsXG4gICAgICAgICAgICAnLS1zY3JhdGNocGFkLWhpZ2hsaWdodC1jb2xvcic6IHRoaXMuc2V0dGluZ3Muc2NyYXRjaHBhZEhpZ2hsaWdodENvbG9yLFxuICAgICAgICAgICAgJy0tYXNzZXQtZG90LWNvbG9yJzogdGhpcy5zZXR0aW5ncy5hc3NldERvdENvbG9yLFxuICAgICAgICAgICAgJy0tY2FsZW5kYXItZXZlbnQtZG90LWNvbG9yJzogdGhpcy5zZXR0aW5ncy5jYWxlbmRhckV2ZW50RG90Q29sb3IsXG4gICAgICAgICAgICAnLS10YXNrLWRvdC1jb2xvcic6IHRoaXMuc2V0dGluZ3MudGFza0RvdENvbG9yLFxuICAgICAgICAgICAgJy0tdGFzay1iYWRnZS1jb2xvcic6IHRoaXMuc2V0dGluZ3MudGFza0JhZGdlQ29sb3IsXG4gICAgICAgICAgICAnLS10YXNrLWJhZGdlLWZvbnQtY29sb3InOiB0aGlzLnNldHRpbmdzLnRhc2tCYWRnZUZvbnRDb2xvcixcbiAgICAgICAgICAgICctLXRhc2stYmFkZ2UtZm9udC1zaXplJzogdGhpcy5zZXR0aW5ncy50YXNrQmFkZ2VGb250U2l6ZSxcbiAgICAgICAgICAgICctLXRvZGF5LWNpcmNsZS1jb2xvcic6IHRoaXMuc2V0dGluZ3MudG9kYXlDaXJjbGVDb2xvcixcbiAgICAgICAgICAgICctLXdlZWtseS1ub3RlLWRvdC1jb2xvcic6IHRoaXMuc2V0dGluZ3Mud2Vla2x5Tm90ZURvdENvbG9yLFxuICAgICAgICAgICAgJy0td2Vla2VuZC1zaGFkZS1jb2xvci1saWdodCc6IHRoaXMuc2V0dGluZ3Mud2Vla2VuZFNoYWRlQ29sb3JMaWdodCxcbiAgICAgICAgICAgICctLXdlZWtlbmQtc2hhZGUtY29sb3ItZGFyayc6IHRoaXMuc2V0dGluZ3Mud2Vla2VuZFNoYWRlQ29sb3JEYXJrLFxuICAgICAgICAgICAgJy0td2Vla2x5LW5vdGUtZG90LWNvbG9yJzogdGhpcy5zZXR0aW5ncy53ZWVrbHlOb3RlRG90Q29sb3IsXG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc3R5bGVQcm9wcykge1xuICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KGtleSwgc3R5bGVQcm9wc1trZXldKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9wZW5zIHRoZSBwbHVnaW4gdmlldyBpbiBhIG5ldyBsZWFmIG9yIHJldmVhbHMgaXQgaWYgaXQncyBhbHJlYWR5IG9wZW4uXG4gICAgICovXG4gICAgYXN5bmMgYWN0aXZhdGVWaWV3KCkge1xuICAgICAgICBjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9QRVJJT0QpO1xuICAgICAgICBpZiAobGVhdmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYXZlc1swXSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xuICAgICAgICBhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7IHR5cGU6IFZJRVdfVFlQRV9QRVJJT0QsIGFjdGl2ZTogdHJ1ZSB9KTtcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gICAgfVxuXG4gICAgYXN5bmMgcmVzZXRJY3NSZWZyZXNoSW50ZXJ2YWwoKSB7XG4gICAgICAgIC8vIElmIHRoZXJlJ3MgYW4gb2xkIGludGVydmFsIHJ1bm5pbmcsIGNsZWFyIGl0IGZpcnN0XG4gICAgICAgIGlmICh0aGlzLmljc1JlZnJlc2hJbnRlcnZhbElkICE9PSBudWxsKSB7XG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLmljc1JlZnJlc2hJbnRlcnZhbElkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGludGVydmFsTWludXRlcyA9IHRoaXMuc2V0dGluZ3MuaWNzUmVmcmVzaEludGVydmFsO1xuXG4gICAgICAgIGlmIChpbnRlcnZhbE1pbnV0ZXMgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBpbnRlcnZhbE1pbGxpc2Vjb25kcyA9IGludGVydmFsTWludXRlcyAqIDYwICogMTAwMDtcblxuICAgICAgICAgICAgdGhpcy5pY3NSZWZyZXNoSW50ZXJ2YWxJZCA9IHRoaXMucmVnaXN0ZXJJbnRlcnZhbChcbiAgICAgICAgICAgICAgICB3aW5kb3cuc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgUGVyaW9kaWMgTm90ZXM6IEF1dG9tYXRpY2FsbHkgcmVmcmVzaGluZyBJQ1MgZmVlZCAoaW50ZXJ2YWw6ICR7aW50ZXJ2YWxNaW51dGVzfSBtaW51dGVzKS5gKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGZpbmQgdGhlIHZpZXcgdG8gY2FsbCBpdHMgcmVmcmVzaCBtZXRob2RcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgdmlld3MgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9QRVJJT0QpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxlYWYgb2Ygdmlld3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZWFmLnZpZXcgJiYgbGVhZi52aWV3LnJlZnJlc2hJY3NFdmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBsZWFmLnZpZXcucmVmcmVzaEljc0V2ZW50cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaW50ZXJ2YWxNaWxsaXNlY29uZHMpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBvbnVubG9hZCgpIHtcbiAgICAgICAgLy8gQ2xlYW4gdXAgd2hlbiB0aGUgcGx1Z2luIGlzIGRpc2FibGVkLlxuICAgICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlcmlvZC1tb250aC1wbHVnaW4tc3R5bGVzJyk7XG4gICAgICAgIGlmIChzdHlsZUVsKSBzdHlsZUVsLnJlbW92ZSgpO1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9QRVJJT0QpLmZvckVhY2gobGVhZiA9PiBsZWFmLmRldGFjaCgpKTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhlIHNldHRpbmdzIHRhYiBjbGFzcyBmb3IgdGhlIHBsdWdpbiwgcmVzcG9uc2libGUgZm9yIGJ1aWxkaW5nIHRoZSBzZXR0aW5ncyBVSS5cbiAqL1xuY2xhc3MgUGVyaW9kU2V0dGluZ3NUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgICBjb25zdHJ1Y3RvcihhcHAsIHBsdWdpbikge1xuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmFjdGl2ZVRhYiA9ICdnZW5lcmFsJzsgLy8gRGVmYXVsdCB0YWJcbiAgICAgICAgdGhpcy5zY3JvbGxQb3NpdGlvbiA9IDA7XG4gICAgfVxuXG4gICAgcmVmcmVzaERpc3BsYXkoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnRFbCkge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxQb3NpdGlvbiA9IHRoaXMuY29udGVudEVsLnNjcm9sbFRvcDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICB9XG5cbiAgICBhc3luYyBoaWRlKCkge1xuICAgICAgICAvLyBUaGlzIGZ1bmN0aW9uIHJ1bnMgYXV0b21hdGljYWxseSB3aGVuIHRoZSB1c2VyIGNsb3NlcyB0aGUgc2V0dGluZ3MgdGFiLlxuXG4gICAgICAgIC8vIEdldCBhbGwgb3BlbiB2aWV3cyBvZiB5b3VyIGNhbGVuZGFyIHR5cGVcbiAgICAgICAgY29uc3Qgdmlld3MgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9QRVJJT0QpO1xuXG4gICAgICAgIGlmICh2aWV3cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBUZWxsIGVhY2ggb3BlbiBjYWxlbmRhciB2aWV3IHRvIHJlLXJlbmRlciBpdHNlbGZcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGVhZiBvZiB2aWV3cykge1xuICAgICAgICAgICAgICAgIGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBQZXJpb2RNb250aFZpZXcpIHsgLy8gQXNzdW1pbmcgeW91ciB2aWV3IGNsYXNzIGlzIFBlcmlvZE1vbnRoVmlld1xuICAgICAgICAgICAgICAgICAgICAvLyBDYWxsaW5nIHJlbmRlckNhbGVuZGFyKCkgd2lsbCByZWRyYXcgdGhlIHZpZXcgd2l0aCB0aGUgbGF0ZXN0IHNldHRpbmdzXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYudmlldy5yZW5kZXJDYWxlbmRhcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgaGVscGVyIGZ1bmN0aW9uIHRvIHNhdmUgc2V0dGluZ3MgYW5kIHRyaWdnZXIgYSBmdWxsIFVJIHJlZnJlc2ggaW4gYW55IG9wZW4gdmlld3MuXG4gICAgICovXG4gICAgYXN5bmMgc2F2ZUFuZFVwZGF0ZSgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgICB0aGlzLnBsdWdpbi51cGRhdGVTdHlsZXMoKTtcbiAgICAgICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1BFUklPRCkuZm9yRWFjaChsZWFmID0+IHtcbiAgICAgICAgICAgIGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBQZXJpb2RNb250aFZpZXcpIHtcbiAgICAgICAgICAgICAgICBsZWFmLnZpZXcucmVidWlsZEFuZFJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYW4gcmdiYSgpIHN0cmluZyBpbnRvIGEgaGV4IGNvbG9yIGFuZCBhbiBhbHBoYSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmdiYVN0cmluZyBUaGUgaW5wdXQgc3RyaW5nIChlLmcuLCBcInJnYmEoMjU1LCAxNjUsIDAsIDAuNClcIikuXG4gICAgICogQHJldHVybnMge3tjb2xvcjogc3RyaW5nLCBhbHBoYTogbnVtYmVyfX1cbiAgICAgKi9cbiAgICBwYXJzZVJnYmEocmdiYVN0cmluZykge1xuICAgICAgICBpZiAoIXJnYmFTdHJpbmcpIHJldHVybiB7IGNvbG9yOiAnIzAwMDAwMCcsIGFscGhhOiAxIH07XG4gICAgICAgIGNvbnN0IG1hdGNoID0gcmdiYVN0cmluZy5tYXRjaCgvcmdiYT9cXCgoXFxkKyksXFxzKihcXGQrKSxcXHMqKFxcZCspKD86LFxccyooW1xcZC5dKykpP1xcKS8pO1xuICAgICAgICBpZiAoIW1hdGNoKSByZXR1cm4geyBjb2xvcjogJyMwMDAwMDAnLCBhbHBoYTogMSB9O1xuICAgICAgICBjb25zdCB0b0hleCA9IChjKSA9PiAoJzAnICsgcGFyc2VJbnQoYywgMTApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpO1xuICAgICAgICBjb25zdCBjb2xvciA9IGAjJHt0b0hleChtYXRjaFsxXSl9JHt0b0hleChtYXRjaFsyXSl9JHt0b0hleChtYXRjaFszXSl9YDtcbiAgICAgICAgY29uc3QgYWxwaGEgPSBtYXRjaFs0XSAhPT0gdW5kZWZpbmVkID8gcGFyc2VGbG9hdChtYXRjaFs0XSkgOiAxO1xuICAgICAgICByZXR1cm4geyBjb2xvciwgYWxwaGEgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCdWlsZHMgYW4gcmdiYSgpIHN0cmluZyBmcm9tIGEgaGV4IGNvbG9yIGFuZCBhbiBhbHBoYSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaGV4IFRoZSBoZXggY29sb3Igc3RyaW5nIChlLmcuLCBcIiNmZmE1MDBcIikuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFscGhhIFRoZSBhbHBoYSB2YWx1ZSAoMCB0byAxKS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgcmdiYSBzdHJpbmcuXG4gICAgICovXG4gICAgYnVpbGRSZ2JhKGhleCwgYWxwaGEpIHtcbiAgICAgICAgY29uc3QgciA9IHBhcnNlSW50KGhleC5zbGljZSgxLCAzKSwgMTYpO1xuICAgICAgICBjb25zdCBnID0gcGFyc2VJbnQoaGV4LnNsaWNlKDMsIDUpLCAxNik7XG4gICAgICAgIGNvbnN0IGIgPSBwYXJzZUludChoZXguc2xpY2UoNSwgNyksIDE2KTtcbiAgICAgICAgcmV0dXJuIGByZ2JhKCR7cn0sICR7Z30sICR7Yn0sICR7YWxwaGEudG9GaXhlZCgyKX0pYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY3VzdG9tIHNldHRpbmcgY29tcG9uZW50IHdpdGggYSBjb2xvciBwaWNrZXIgYW5kIGFuIGFscGhhIHNsaWRlci5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgc2V0dGluZyBuYW1lLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkZXNjIFRoZSBzZXR0aW5nIGRlc2NyaXB0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzZXR0aW5nS2V5IFRoZSBrZXkgaW4gdGhlIHNldHRpbmdzIG9iamVjdCB0byBtb2RpZnkuXG4gICAgICovXG4gICAgY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgbmFtZSwgZGVzYywgc2V0dGluZ0tleSkge1xuICAgICAgICBjb25zdCBzZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShuYW1lKVxuICAgICAgICAgICAgLnNldERlc2MoZGVzYyk7XG5cbiAgICAgICAgbGV0IGNvbG9yUGlja2VyO1xuICAgICAgICBsZXQgc2xpZGVyO1xuXG4gICAgICAgIGNvbnN0IGluaXRpYWxWYWx1ZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzW3NldHRpbmdLZXldIHx8IERFRkFVTFRfU0VUVElOR1Nbc2V0dGluZ0tleV07XG4gICAgICAgIGNvbnN0IHsgY29sb3I6IGluaXRpYWxDb2xvciwgYWxwaGE6IGluaXRpYWxBbHBoYSB9ID0gdGhpcy5wYXJzZVJnYmEoaW5pdGlhbFZhbHVlKTtcblxuICAgICAgICBzZXR0aW5nLmFkZENvbG9yUGlja2VyKHBpY2tlciA9PiB7XG4gICAgICAgICAgICBjb2xvclBpY2tlciA9IHBpY2tlcjtcbiAgICAgICAgICAgIHBpY2tlci5zZXRWYWx1ZShpbml0aWFsQ29sb3IpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIChuZXdDb2xvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50QWxwaGEgPSBzbGlkZXIgPyBzbGlkZXIuZ2V0VmFsdWUoKSA6IDE7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1JnYmEgPSB0aGlzLmJ1aWxkUmdiYShuZXdDb2xvciwgY3VycmVudEFscGhhKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Nbc2V0dGluZ0tleV0gPSBuZXdSZ2JhO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGlja2VyLmNvbG9yRWwpIHBpY2tlci5jb2xvckVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG5ld1JnYmE7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBzZXR0aW5nLmFkZFNsaWRlcihzbGlkZXJDb21wb25lbnQgPT4ge1xuICAgICAgICAgICAgc2xpZGVyID0gc2xpZGVyQ29tcG9uZW50O1xuICAgICAgICAgICAgc2xpZGVyLnNldExpbWl0cygwLCAxLCAwLjA1KVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShpbml0aWFsQWxwaGEpXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKG5ld0FscGhhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDb2xvciA9IGNvbG9yUGlja2VyID8gY29sb3JQaWNrZXIuZ2V0VmFsdWUoKSA6ICcjMDAwMDAwJztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UmdiYSA9IHRoaXMuYnVpbGRSZ2JhKGN1cnJlbnRDb2xvciwgbmV3QWxwaGEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5nc1tzZXR0aW5nS2V5XSA9IG5ld1JnYmE7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xvclBpY2tlciAmJiBjb2xvclBpY2tlci5jb2xvckVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvclBpY2tlci5jb2xvckVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG5ld1JnYmE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChjb2xvclBpY2tlciAmJiBjb2xvclBpY2tlci5jb2xvckVsKSB7XG4gICAgICAgICAgICBjb2xvclBpY2tlci5jb2xvckVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGluaXRpYWxWYWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldHRpbmcuYWRkRXh0cmFCdXR0b24oYnV0dG9uID0+IHtcbiAgICAgICAgICAgIGJ1dHRvbi5zZXRJY29uKFwicm90YXRlLWNjd1wiKS5zZXRUb29sdGlwKFwiUmVzZXQgdG8gZGVmYXVsdFwiKS5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSBERUZBVUxUX1NFVFRJTkdTW3NldHRpbmdLZXldO1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzW3NldHRpbmdLZXldID0gZGVmYXVsdFZhbHVlO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgeyBjb2xvciwgYWxwaGEgfSA9IHRoaXMucGFyc2VSZ2JhKGRlZmF1bHRWYWx1ZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoY29sb3JQaWNrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sb3JQaWNrZXIuc2V0VmFsdWUoY29sb3IpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29sb3JQaWNrZXIuY29sb3JFbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JQaWNrZXIuY29sb3JFbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNsaWRlcikge1xuICAgICAgICAgICAgICAgICAgICBzbGlkZXIuc2V0VmFsdWUoYWxwaGEpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzaW1wbGUgcGF0aCBzdWdnZXN0aW9uIHBvcHVwIGZvciBhIHRleHQgaW5wdXQgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge0hUTUxJbnB1dEVsZW1lbnR9IGlucHV0RWwgVGhlIGlucHV0IGVsZW1lbnQgdG8gYXR0YWNoIHRoZSBzdWdnZXN0ZXIgdG8uXG4gICAgICogQHBhcmFtIHsocXVlcnk6IHN0cmluZykgPT4gc3RyaW5nW119IGdldFN1Z2dlc3Rpb25zIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgbGlzdCBvZiBzdWdnZXN0aW9uIHN0cmluZ3MgYmFzZWQgb24gYSBxdWVyeS5cbiAgICAgKi9cbiAgICBjcmVhdGVQYXRoU3VnZ2VzdGVyKGlucHV0RWwsIGdldFN1Z2dlc3Rpb25zKSB7XG4gICAgICAgIGNvbnN0IHN1Z2dlc3Rpb25FbCA9IGNyZWF0ZURpdih7IGNsczogJ2N1c3RvbS1zdWdnZXN0aW9uLWNvbnRhaW5lcicgfSk7XG4gICAgICAgIHN1Z2dlc3Rpb25FbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBpbnB1dEVsLnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoc3VnZ2VzdGlvbkVsKTtcbiAgICAgICAgY29uc3Qgc2hvd1N1Z2dlc3Rpb25zID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcXVlcnkgPSBpbnB1dEVsLnZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBjb25zdCBzdWdnZXN0aW9ucyA9IGdldFN1Z2dlc3Rpb25zKHF1ZXJ5KTtcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25FbC5lbXB0eSgpO1xuICAgICAgICAgICAgaWYgKHN1Z2dlc3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb25FbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1Z2dlc3Rpb25FbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zLnNsaWNlKDAsIDEwKS5mb3JFYWNoKHBhdGggPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBzdWdnZXN0aW9uRWwuY3JlYXRlRGl2KHsgY2xzOiAnY3VzdG9tLXN1Z2dlc3Rpb24taXRlbScsIHRleHQ6IHBhdGggfSk7XG4gICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0RWwudmFsdWUgPSBwYXRoO1xuICAgICAgICAgICAgICAgICAgICBpbnB1dEVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdpbnB1dCcpKTtcbiAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbkVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHNob3dTdWdnZXN0aW9ucyk7XG4gICAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBzaG93U3VnZ2VzdGlvbnMpO1xuICAgICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiBzZXRUaW1lb3V0KCgpID0+IHsgc3VnZ2VzdGlvbkVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH0sIDE1MCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzZXR0aW5ncyBzZWN0aW9uIGZvciBtYW5hZ2luZyBhIGxpc3Qgb2YgaWdub3JlZCBmb2xkZXIgcGF0aHMuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyRWwgVGhlIHBhcmVudCBjb250YWluZXIgZm9yIHRoaXMgc2V0dGluZyBzZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBoZWFkaW5nIG5hbWUgZm9yIHRoZSBzZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkZXNjIFRoZSBkZXNjcmlwdGlvbiBmb3IgdGhlIHNlY3Rpb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNldHRpbmdLZXkgVGhlIGtleSBpbiB0aGUgc2V0dGluZ3Mgb2JqZWN0IGZvciB0aGUgaWdub3JlZCBmb2xkZXIgYXJyYXkuXG4gICAgICovXG4gICAgY3JlYXRlSWdub3JlZEZvbGRlckxpc3QoY29udGFpbmVyRWwsIG5hbWUsIGRlc2MsIHNldHRpbmdLZXkpIHtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUobmFtZSkuc2V0RGVzYyhkZXNjKS5zZXRIZWFkaW5nKCk7XG4gICAgICAgIGNvbnN0IGlnbm9yZWRGb2xkZXJzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Nbc2V0dGluZ0tleV07XG4gICAgICAgIGlmIChpZ25vcmVkRm9sZGVycyAmJiBpZ25vcmVkRm9sZGVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZ25vcmVkRm9sZGVycy5mb3JFYWNoKChmb2xkZXIsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoZm9sZGVyKS5hZGRCdXR0b24oYnV0dG9uID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEljb24oXCJ0cmFzaFwiKS5zZXRUb29sdGlwKFwiUmVtb3ZlIGZvbGRlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzW3NldHRpbmdLZXldLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGlzcGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnTm8gZm9sZGVycyBhcmUgYmVpbmcgaWdub3JlZC4nLCBjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFkZFNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbCk7XG4gICAgICAgIGxldCB0ZXh0SW5wdXQ7XG4gICAgICAgIGFkZFNldHRpbmcuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgIHRleHRJbnB1dCA9IHRleHQ7XG4gICAgICAgICAgICBjb25zdCBnZXRGb2xkZXJzID0gKHF1ZXJ5KSA9PiB0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBURm9sZGVyICYmICghcXVlcnkgfHwgZi5wYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpKSkubWFwKGYgPT4gZi5wYXRoKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUGF0aFN1Z2dlc3Rlcih0ZXh0LmlucHV0RWwsIGdldEZvbGRlcnMpO1xuICAgICAgICAgICAgdGV4dC5zZXRQbGFjZWhvbGRlcihcIkVudGVyIGZvbGRlciBwYXRoIHRvIGlnbm9yZS4uLlwiKTtcbiAgICAgICAgfSkuYWRkQnV0dG9uKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dChcIkFkZFwiKS5zZXRUb29sdGlwKFwiQWRkIHRoaXMgZm9sZGVyIHRvIHRoZSBpZ25vcmUgbGlzdFwiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Rm9sZGVyID0gdGV4dElucHV0LmdldFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdGb2xkZXIgJiYgIXRoaXMucGx1Z2luLnNldHRpbmdzW3NldHRpbmdLZXldLmluY2x1ZGVzKG5ld0ZvbGRlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzW3NldHRpbmdLZXldLnB1c2gobmV3Rm9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGlzcGxheSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGRpc3BsYXkoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICAgICAgLy8gTWFpbiBjb250YWluZXIgZm9yIHRoZSB0YWJiZWQgbGF5b3V0XG4gICAgICAgIGNvbnN0IHNldHRpbmdzQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiBcInBlcmlvZC1zZXR0aW5ncy1jb250YWluZXJcIiB9KTtcbiAgICAgICAgY29uc3QgbmF2RWwgPSBzZXR0aW5nc0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwicGVyaW9kLXNldHRpbmdzLW5hdlwiIH0pO1xuICAgICAgICB0aGlzLmNvbnRlbnRFbCA9IHNldHRpbmdzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJwZXJpb2Qtc2V0dGluZ3MtY29udGVudFwiIH0pO1xuICAgICAgICB0aGlzLnJlbmRlclBpbm5lZE5vdGVzU2V0dGluZ3ModGhpcy5jb250YWluZXJFbCk7XG5cbiAgICAgICAgY29uc3QgdGFicyA9IHtcbiAgICAgICAgICAgIGdlbmVyYWw6IFwiR2VuZXJhbCBEaXNwbGF5XCIsXG4gICAgICAgICAgICBmdW5jdGlvbmFsOiBcIkNhbGVuZGFyIEZ1bmN0aW9uYWxcIixcbiAgICAgICAgICAgIGRvdHM6IFwiQ2FsZW5kYXIgRG90c1wiLFxuICAgICAgICAgICAgd2Vla2x5Tm90ZXM6IFwiV2Vla2x5IE5vdGVzXCIsXG4gICAgICAgICAgICB0YXNrc0luZGljYXRvcjogXCJUYXNrIEluZGljYXRvcnNcIixcbiAgICAgICAgICAgIHRhYnM6IFwiR2VuZXJhbCBUYWJcIixcbiAgICAgICAgICAgIHNjcmF0Y2hwYWQ6IFwiU2NyYXRjaFBhZCBUYWJcIixcbiAgICAgICAgICAgIG5vdGVzOiBcIk5vdGVzIFRhYlwiLFxuICAgICAgICAgICAgcGlubmVkOiAnUGlubmVkIE5vdGVzIFRhYicsXG4gICAgICAgICAgICBhc3NldHM6IFwiQXNzZXRzIFRhYlwiLFxuICAgICAgICAgICAgdGFza3M6IFwiVGFza3MgVGFiXCIsXG4gICAgICAgICAgICBpbXBvcnRFeHBvcnQ6IFwiSW1wb3J0IC8gRXhwb3J0XCIsXG4gICAgICAgICAgICBzdGFydEhlcmU6IFwiSGVscFwiLFxuICAgICAgICAgICAgYWJvdXQ6IFwiQWJvdXRcIlxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIENyZWF0ZSBuYXZpZ2F0aW9uIGJ1dHRvbnNcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBuYW1lXSBvZiBPYmplY3QuZW50cmllcyh0YWJzKSkge1xuICAgICAgICAgICAgY29uc3QgbmF2QnV0dG9uID0gbmF2RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBuYW1lLFxuICAgICAgICAgICAgICAgIGNsczogJ3BlcmlvZC1zZXR0aW5ncy1uYXYtYnV0dG9uJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVUYWIgPT09IGtleSkge1xuICAgICAgICAgICAgICAgIG5hdkJ1dHRvbi5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuYXZCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVUYWIgPSBrZXk7XG4gICAgICAgICAgICAgICAgLy8gUmUtcmVuZGVyIHRoZSBlbnRpcmUgZGlzcGxheSB0byB1cGRhdGUgYWN0aXZlIHN0YXRlIGFuZCBjb250ZW50XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGlzcGxheSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW5kZXIgdGhlIGNvbnRlbnQgZm9yIHRoZSBhY3RpdmUgdGFiXG4gICAgICAgIHRoaXMucmVuZGVyQ29udGVudEZvckFjdGl2ZVRhYigpO1xuICAgICAgICAvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZS1yZW5kZXJpbmdcbiAgICAgICAgaWYgKHRoaXMuY29udGVudEVsICYmIHRoaXMuc2Nyb2xsUG9zaXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsLnNjcm9sbFRvcCA9IHRoaXMuc2Nyb2xsUG9zaXRpb247XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKnJlbmRlclBpbm5lZE5vdGVzU2V0dGluZ3MoY29udGFpbmVyRWwpIHtcbiAgICAgICAgLy92MlxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdQaW5uZWQgTm90ZXMnIH0pO1xuXG4gICAgICAgIC8vIFNldHRpbmcgdG8gY2hvb3NlIHRoZSBkZWZhdWx0IHNvcnQgb3JkZXJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRGVmYXVsdCBzb3J0IG9yZGVyIGZvciBwaW5uZWQgbm90ZXMnKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKCdDaG9vc2UgdGhlIGRlZmF1bHQgc29ydCBvcmRlciBmb3IgcGlubmVkIG5vdGVzIHdoZW4gdGhlIHBsdWdpbiBpcyBsb2FkZWQuIFRvIGNoYW5nZSB0aGUgb3JkZXIgY2xpY2sgb24gdGhlIFBJTk5FRCBOT1RFUyB0aXRsZSBpbiB0aGUgbWFpbiB2aWV3LicpXG5cbiAgICAgICAgICAgIC5zZXREZXNjKFwiQ2hvb3NlIHdoZXRoZXIgdG8gc29ydCBwaW5uZWQgbm90ZXMgYWxwaGFiZXRpY2FsbHkgb3IgYnkgeW91ciBjdXN0b20gb3JkZXIgYnkgZGVmYXVsdC5cIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2EteicsICdBLVogKERlZmF1bHQpJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjdXN0b20nLCAnQ3VzdG9tIE9yZGVyJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucGlubmVkTm90ZXNTb3J0T3JkZXIpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5waW5uZWROb3Rlc1NvcnRPcmRlciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgLy90aGlzLnJlZnJlc2hEaXNwbGF5KCk7IC8vIFJlZnJlc2ggdGhlIHNldHRpbmdzIHZpZXdcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQUREIFRISVMgTkVXIFNFVFRJTkcgSEVSRTpcbiAgICAgICAgY29uc3QgaXNNYWMgPSBQbGF0Zm9ybS5pc01hY09TO1xuICAgICAgICBjb25zdCBtb2RpZmllcktleSA9IGlzTWFjID8gJ09wdGlvbiAo4oylKScgOiAnQ3RybCc7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ2hhbmdlIHNvcnQgb3JkZXIgaW4gbWFpbiB2aWV3JylcbiAgICAgICAgICAgIC5zZXREZXNjKGBDbGljayB0aGUgXCJQSU5ORUQgTk9URVNcIiBoZWFkZXIgaW4gdGhlIG1haW4gdmlldyB0byBjeWNsZSBiZXR3ZWVuIEEtWiwgWi1BLCBhbmQgQ3VzdG9tIHNvcnQgb3JkZXJzLlxcblxcbldoZW4gaW4gQ3VzdG9tIG9yZGVyLCBob2xkICR7bW9kaWZpZXJLZXl9IGFuZCBkcmFnIG5vdGVzIHRvIHJlb3JkZXIgdGhlbS5gKTtcblxuXG4gICAgICAgIC8vIFVJIGZvciBtYW5hZ2luZyB0aGUgY3VzdG9tIG9yZGVyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1NldCBDdXN0b20gT3JkZXInKVxuICAgICAgICAgICAgLnNldERlc2MoJ0RyYWcgYW5kIGRyb3Agbm90ZXMgdG8gYXJyYW5nZSB0aGVtLiBUaGlzIG9yZGVyIGlzIHVzZWQgd2hlbiBcIkN1c3RvbSBPcmRlclwiIGlzIHNlbGVjdGVkLicpO1xuXG4gICAgICAgIGNvbnN0IGRyYWdnYWJsZUNvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigncGlubmVkLW5vdGVzLW9yZGVyLWNvbnRhaW5lcicpO1xuICAgICAgICB0aGlzLnJlbmRlckRyYWdnYWJsZVBpbm5lZE5vdGVzKGRyYWdnYWJsZUNvbnRhaW5lcik7XG4gICAgfVxuICAgICAgICAqL1xuXG4gICAgLy8gRnVuY3Rpb24gdG8gcmVuZGVyIHRoZSBkcmFnZ2FibGUgbGlzdCBvZiBwaW5uZWQgbm90ZXNcbiAgICBhc3luYyByZW5kZXJEcmFnZ2FibGVQaW5uZWROb3Rlcyhjb250YWluZXIpIHtcbiAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICAgICAgY29uc3QgcGluVmFsdWUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5waW5UYWcudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgYWxsTWFya2Rvd25GaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgICAgICAvLyBGaWx0ZXIgZm9yIHBpbm5lZCBub3RlcyAodXNpbmcgeW91ciBleGlzdGluZyBsb2dpYylcbiAgICAgICAgY29uc3QgcGlubmVkTm90ZXMgPSBhbGxNYXJrZG93bkZpbGVzLmZpbHRlcihmaWxlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgICAgICBpZiAoIWNhY2hlKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIHRhZ3NcbiAgICAgICAgICAgIGNvbnN0IGhhc1BpblRhZyA9IGNhY2hlLnRhZ3M/LnNvbWUodGFnID0+IHRhZy50YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhwaW5WYWx1ZSkpO1xuICAgICAgICAgICAgaWYgKGhhc1BpblRhZykgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGZyb250bWF0dGVyXG4gICAgICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IGNhY2hlLmZyb250bWF0dGVyO1xuICAgICAgICAgICAgaWYgKGZyb250bWF0dGVyKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBmcm9udG1hdHRlcltrZXldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBpblZhbHVlKSkgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5zb21lKGl0ZW0gPT4gdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnICYmIGl0ZW0udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhwaW5WYWx1ZSkpKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGN1c3RvbU9yZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucGlubmVkTm90ZXNDdXN0b21PcmRlciB8fCBbXTtcblxuICAgICAgICAvLyBTb3J0IHRoZSBub3RlcyBiYXNlZCBvbiB0aGUgc2F2ZWQgY3VzdG9tIG9yZGVyLCB3aXRoIGEgZmFsbGJhY2sgZm9yIG5ldyBub3Rlc1xuICAgICAgICBwaW5uZWROb3Rlcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbmRleEEgPSBjdXN0b21PcmRlci5pbmRleE9mKGEucGF0aCk7XG4gICAgICAgICAgICBjb25zdCBpbmRleEIgPSBjdXN0b21PcmRlci5pbmRleE9mKGIucGF0aCk7XG5cbiAgICAgICAgICAgIGlmIChpbmRleEEgPT09IC0xICYmIGluZGV4QiA9PT0gLTEpIHJldHVybiBhLmJhc2VuYW1lLmxvY2FsZUNvbXBhcmUoYi5iYXNlbmFtZSk7XG4gICAgICAgICAgICBpZiAoaW5kZXhBID09PSAtMSkgcmV0dXJuIDE7XG4gICAgICAgICAgICBpZiAoaW5kZXhCID09PSAtMSkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4QSAtIGluZGV4QjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGRyYWdnYWJsZSBlbGVtZW50c1xuICAgICAgICBwaW5uZWROb3Rlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXRlbUVsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2RyYWdnYWJsZS1pdGVtJyB9KTtcbiAgICAgICAgICAgIGl0ZW1FbC5kcmFnZ2FibGUgPSB0cnVlO1xuICAgICAgICAgICAgaXRlbUVsLmRhdGFzZXQuZmlsZVBhdGggPSBmaWxlLnBhdGg7XG5cbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZSA9IGl0ZW1FbC5jcmVhdGVEaXYoeyBjbHM6ICdkcmFnLWhhbmRsZScgfSk7XG4gICAgICAgICAgICBzZXRJY29uKGhhbmRsZSwgJ2dyaXAtdmVydGljYWwnKTtcbiAgICAgICAgICAgIGl0ZW1FbC5jcmVhdGVTcGFuKHsgdGV4dDogZmlsZS5iYXNlbmFtZSB9KTtcblxuICAgICAgICAgICAgLy8gRHJhZy1hbmQtRHJvcCBFdmVudCBMaXN0ZW5lcnNcbiAgICAgICAgICAgIGl0ZW1FbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgIGl0ZW1FbC5jbGFzc0xpc3QuYWRkKCdkcmFnZ2luZycpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGl0ZW1FbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGl0ZW1FbC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnZ2luZycpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGl0ZW1FbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRyYWdnaW5nSXRlbSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZHJhZ2dpbmcnKTtcbiAgICAgICAgICAgICAgICBpZiAoZHJhZ2dpbmdJdGVtICYmIGRyYWdnaW5nSXRlbSAhPT0gaXRlbUVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBpdGVtRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQWZ0ZXIgPSBlLmNsaWVudFkgPiByZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWZ0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1FbC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkcmFnZ2luZ0l0ZW0sIGl0ZW1FbC5uZXh0U2libGluZyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtRWwucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZHJhZ2dpbmdJdGVtLCBpdGVtRWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNhdmUgdGhlIG5ldyBvcmRlciBvbiBkcm9wIChieSBsaXN0ZW5pbmcgb24gdGhlIGNvbnRhaW5lcilcbiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdPcmRlciA9IEFycmF5LmZyb20oY29udGFpbmVyLmNoaWxkcmVuKS5tYXAoY2hpbGQgPT4gY2hpbGQuZGF0YXNldC5maWxlUGF0aCk7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5waW5uZWROb3Rlc0N1c3RvbU9yZGVyID0gbmV3T3JkZXI7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0N1c3RvbSBwaW5uZWQgb3JkZXIgc2F2ZWQhJyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlckNvbnRlbnRGb3JBY3RpdmVUYWIoKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIHN3aXRjaCAodGhpcy5hY3RpdmVUYWIpIHtcbiAgICAgICAgICAgIGNhc2UgJ2dlbmVyYWwnOlxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyR2VuZXJhbFNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdmdW5jdGlvbmFsJzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckZ1bmN0aW9uYWxTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZG90cyc6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJEb3RzU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3dlZWtseU5vdGVzJzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcldlZWtseU5vdGVzU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3Rhc2tzSW5kaWNhdG9yJzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclRhc2tJbmRpY2F0b3JTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndGFicyc6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJUYWJzU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3NjcmF0Y2hwYWQnOlxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2NyYXRjaHBhZFNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdub3Rlcyc6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJOb3Rlc1NldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdwaW5uZWQnOlxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyUGlubmVkTm90ZXNTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYXNzZXRzJzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckFzc2V0c1NldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd0YXNrcyc6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJUYXNrc1NldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdpbXBvcnRFeHBvcnQnOlxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVySW1wb3J0RXhwb3J0VGFiKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdzdGFydEhlcmUnOlxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU3RhcnRIZXJlVGFiKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhYm91dCc6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJBYm91dFRhYigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gLS0tIFJFTkRFUiBNRVRIT0RTIEZPUiBFQUNIIFRBQiAtLS1cbiAgICByZW5kZXJHZW5lcmFsU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWw7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiR2VuZXJhbCBEaXNwbGF5IFNldHRpbmdzXCIgfSk7XG5cbiAgICAgICAgLy8gLS0tIFRpdGxlcyAmIEhlYWRlcnMgU2VjdGlvbiAtLS1cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJUaXRsZXMgJiBIZWFkZXJzXCIpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgY29uc3QgbW9udGhUaXRsZVNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIk1vbnRoIHRpdGxlIGZvcm1hdFwiKTtcbiAgICAgICAgbW9udGhUaXRsZVNldHRpbmcuZGVzY0VsLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIFNldCB0aGUgZm9ybWF0IGZvciB0aGUgY2FsZW5kYXIncyBtb250aCB0aXRsZS4gVXNlcyA8YSBocmVmPVwiaHR0cHM6Ly9tb21lbnRqcy5jb20vZG9jcy8jL2Rpc3BsYXlpbmcvZm9ybWF0L1wiPm1vbWVudC5qczwvYT4gZm9ybWF0IHN0cmluZ3MsIGUuZy5cbiAgICAgICAgICAgIDxicj48Y29kZT5ZWVlZPC9jb2RlPjogNC1kaWdpdCB5ZWFyIChlLmcuLCAyMDI1KVxuICAgICAgICAgICAgPGJyPjxjb2RlPllZPC9jb2RlPjogMi1kaWdpdCB5ZWFyIChlLmcuLCAyNSlcbiAgICAgICAgICAgIDxicj48Y29kZT5NTU1NPC9jb2RlPjogRnVsbCBtb250aCBuYW1lIChlLmcuLCBTZXB0ZW1iZXIpXG4gICAgICAgICAgICA8YnI+PGNvZGU+TU1NPC9jb2RlPjogU2hvcnQgbW9udGggbmFtZSAoZS5nLiwgU2VwKVxuICAgICAgICAgICAgPGJyPjxjb2RlPk1NPC9jb2RlPjogMi1kaWdpdCBtb250aCAoZS5nLiwgMDkpXG4gICAgICAgICAgICA8YnI+PGNvZGU+TTwvY29kZT46IE1vbnRoIG51bWJlciAoZS5nLiwgOSlcbiAgICAgICAgYDtcblxuICAgICAgICBtb250aFRpdGxlU2V0dGluZy5hZGRUZXh0KHRleHQgPT4gdGV4dC5zZXRQbGFjZWhvbGRlcihcIk1NTU0gWVlZWVwiKS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb250aFRpdGxlRm9ybWF0KS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9udGhUaXRsZUZvcm1hdCA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIk1vbnRoIHRpdGxlIGZvbnQgc2l6ZVwiKS5zZXREZXNjKFwiRm9udCBzaXplIGZvciB0aGUgbWFpbiAnTW9udGggWWVhcicgdGl0bGUgYXQgdGhlIHRvcCBvZiB0aGUgY2FsZW5kYXIuIERlZmF1bHQgaXMgMjBweC5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubWFpbk1vbnRoWWVhclRpdGxlRm9udFNpemUpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MubWFpbk1vbnRoWWVhclRpdGxlRm9udFNpemUgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJCb2xkIG1vbnRoIHRpdGxlXCIpLnNldERlc2MoXCJUb2dnbGVzIGJvbGQgZm9udCB3ZWlnaHQgZm9yIHRoZSBtYWluICdNb250aCBZZWFyJyB0aXRsZS5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubWFpbk1vbnRoWWVhclRpdGxlQm9sZCkub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYWluTW9udGhZZWFyVGl0bGVCb2xkID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJNb250aCBUaXRsZSBDb2xvciAoTGlnaHQgTW9kZSlcIiwgXCJDb2xvciBmb3IgdGhlIG1haW4gJ01vbnRoIFllYXInIHRpdGxlIGluIGxpZ2h0IG1vZGUuXCIsIFwibW9udGhDb2xvckxpZ2h0XCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiTW9udGggVGl0bGUgQ29sb3IgKERhcmsgTW9kZSlcIiwgXCJDb2xvciBmb3IgdGhlIG1haW4gJ01vbnRoIFllYXInIHRpdGxlIGluIGRhcmsgbW9kZS5cIiwgXCJtb250aENvbG9yRGFya1wiKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJOYXZpZ2F0aW9uIGJ1dHRvbnMgaGVpZ2h0XCIpLnNldERlc2MoXCJEZWZhdWx0IGlzIDI4cHguXCIpLmFkZFRleHQodGV4dCA9PiB0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm5hdkJ1dHRvbkhlaWdodCkub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5uYXZCdXR0b25IZWlnaHQgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJCb2xkIGNhbGVuZGFyIGhlYWRlclwiKS5zZXREZXNjKFwiVG9nZ2xlcyBib2xkIGZvbnQgd2VpZ2h0IGZvciB0aGUgZGF5IG5hbWVzIHJvdyAoTW9uLCBUdWUsIGV0Yy4pLlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oZWFkZXJSb3dCb2xkKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLmhlYWRlclJvd0JvbGQgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIkRheSBoZWFkZXIgcm93IGZvbnQgY29sb3IgKExpZ2h0IE1vZGUpXCIsIFwiVGV4dCBjb2xvciBmb3IgdGhlIGRheSBuYW1lcyAoU3VuLCBNb24sIFR1ZSwgZXRjLikgaW4gbGlnaHQgdGhlbWUuXCIsIFwiZGF5SGVhZGVyRm9udENvbG9yTGlnaHRcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJEYXkgaGVhZGVyIHJvdyBmb250IGNvbG9yIChEYXJrIE1vZGUpXCIsIFwiVGV4dCBjb2xvciBmb3IgdGhlIGRheSBuYW1lcyAoU3VuLCBNb24sIFR1ZSwgZXRjLikgaW4gZGFyayB0aGVtZS5cIiwgXCJkYXlIZWFkZXJGb250Q29sb3JEYXJrXCIpO1xuXG4gICAgICAgIC8vIC0tLSBDYWxlbmRhciBHcmlkIFNlY3Rpb24gLS0tXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiQ2FsZW5kYXIgR3JpZFwiKS5zZXRIZWFkaW5nKCk7XG5cbiAgICAgICAgLy8gVEhJUyBJUyBZT1VSIE1JU1NJTkcgU0VUVElORywgTk9XIFJFU1RPUkVEXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJDYWxlbmRhciBncmlkIGxheW91dFwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJDaG9vc2UgYmV0d2VlbiBhIHNwYWNpb3VzLCBub3JtYWwgb3IgY29uZGVuc2VkIGxheW91dCBmb3IgdGhlIGNhbGVuZGFyIGdyaWQuXCIpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdzcGFjaW91cycsICdTcGFjaW91cycpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignbm9ybWFsJywgJ05vcm1hbCcpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY29uZGVuc2VkJywgJ0NvbmRlbnNlZCcpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNhbGVuZGFyTGF5b3V0KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FsZW5kYXJMYXlvdXQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0NhbGVuZGFyIGdyaWQgbGFiZWxzIGZvbnQgc2l6ZScpXG4gICAgICAgICAgICAuc2V0RGVzYygnRm9udCBzaXplIGZvciBjYWxlbmRhciBkYXkgbGFibGVzIGFuZCB3ZWVrLCBwZXJpb2Qvd2VlayBjb2x1bW5zLiBEZWZhdWx0IGlzIDEycHguJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb250U2l6ZSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbnRTaXplID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJDYWxlbmRhciBncmlkIGRheSBudW1iZXJzIGZvbnQgc2l6ZVwiKS5zZXREZXNjKFwiRm9udCBzaXplIGZvciB0aGUgZGF5IG51bWJlcnMgaW4gdGhlIGNhbGVuZGFyIGdyaWQuIERlZmF1bHQgaXMgMTVweC5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGF5TnVtYmVyRm9udFNpemUpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGF5TnVtYmVyRm9udFNpemUgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIkRhdGUgY2VsbCBmb250IGNvbG9yIChMaWdodCBNb2RlKVwiLCBcIlRleHQgY29sb3IgZm9yIHRoZSBkYXRlIG51bWJlcnMgaW4gbGlnaHQgdGhlbWUuXCIsIFwiZGF5Q2VsbEZvbnRDb2xvckxpZ2h0XCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiRGF0ZSBjZWxsIGZvbnQgY29sb3IgKERhcmsgTW9kZSlcIiwgXCJUZXh0IGNvbG9yIGZvciB0aGUgZGF0ZSBudW1iZXJzIGluIGRhcmsgdGhlbWUuXCIsIFwiZGF5Q2VsbEZvbnRDb2xvckRhcmtcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJPdGhlciBtb250aCBkYXRlIGZvbnQgY29sb3IgKExpZ2h0IE1vZGUpXCIsIFwiVGV4dCBjb2xvciBmb3IgZGF0ZXMgb3V0c2lkZSB0aGUgY3VycmVudCBtb250aCBpbiBsaWdodCB0aGVtZS5cIiwgXCJvdGhlck1vbnRoRm9udENvbG9yTGlnaHRcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJPdGhlciBtb250aCBkYXRlIGZvbnQgY29sb3IgKERhcmsgTW9kZSlcIiwgXCJUZXh0IGNvbG9yIGZvciBkYXRlcyBvdXRzaWRlIHRoZSBjdXJyZW50IG1vbnRoIGluIGRhcmsgdGhlbWUuXCIsIFwib3RoZXJNb250aEZvbnRDb2xvckRhcmtcIik7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJTaG93IGNhbGVuZGFyIGdyaWQgbGluZXNcIikuc2V0RGVzYyhcIlRvZ2dsZXMgdGhlIHZpc2liaWxpdHkgb2YgYm9yZGVyIGxpbmVzIGFyb3VuZCBlYWNoIGRhdGUgY2VsbC5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0NhbGVuZGFyR3JpZExpbmVzKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dDYWxlbmRhckdyaWRMaW5lcyA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQ2FsZW5kYXIgZ3JpZCBnYXAgd2lkdGhcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiV2lkdGggb2YgdGhlIGdhcC9ib3JkZXIgYmV0d2VlbiBjYWxlbmRhciBjZWxscy4gVGhlIGdyaWQgbGluZXMgc2V0dGluZyBhYm92ZSBuZWVkcyB0byBiZSB0b2dnbGVkIG9uLiAoZS5nLiwgMXB4LCAycHgsIDAuNXB4KS4gRGVmYXVsdCBpcyAxcHguXCIpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCIxcHhcIilcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FsZW5kYXJHcmlkR2FwV2lkdGgpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckdyaWRHYXBXaWR0aCA9IHZhbHVlIHx8IFwiMXB4XCI7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuXG5cbiAgICAgICAgLy8gLS0tIENvcnJlY3RlZCBEeW5hbWljIFwiVG9kYXkncyBkYXRlIHN0eWxlXCIgU2VjdGlvbiAtLS1cbiAgICAgICAgY29uc3QgdG9kYXlTdHlsZVNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiVG9kYXkncyBkYXRlIHN0eWxlXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkNob29zZSBob3cgdG8gaW5kaWNhdGUgdGhlIGN1cnJlbnQgZGF5IG9uIHRoZSBjYWxlbmRhci5cIik7XG5cbiAgICAgICAgY29uc3QgaGlnaGxpZ2h0T3B0aW9uc0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuXG4gICAgICAgIGNvbnN0IHJlbmRlckhpZ2hsaWdodE9wdGlvbnMgPSAoc3R5bGUpID0+IHtcbiAgICAgICAgICAgIGhpZ2hsaWdodE9wdGlvbnNDb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgICAgIGlmIChzdHlsZSA9PT0gJ2NlbGwnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGhpZ2hsaWdodE9wdGlvbnNDb250YWluZXIsIFwiVG9kYXlzIERhdGUgSGlnaGxpZ2h0IChMaWdodCBNb2RlKVwiLCBcIkJhY2tncm91bmQgY29sb3IgZm9yIHRoZSBjdXJyZW50IGRheSdzIGNlbGwgaW4gbGlnaHQgbW9kZS5cIiwgXCJ0b2RheUhpZ2hsaWdodENvbG9yTGlnaHRcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGhpZ2hsaWdodE9wdGlvbnNDb250YWluZXIsIFwiVG9kYXlzIERhdGUgSGlnaGxpZ2h0IChEYXJrIE1vZGUpXCIsIFwiQmFja2dyb3VuZCBjb2xvciBmb3IgdGhlIGN1cnJlbnQgZGF5J3MgY2VsbCBpbiBkYXJrIG1vZGUuXCIsIFwidG9kYXlIaWdobGlnaHRDb2xvckRhcmtcIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0eWxlID09PSAnY2lyY2xlJyB8fCBzdHlsZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoaGlnaGxpZ2h0T3B0aW9uc0NvbnRhaW5lciwgXCJUb2RheSdzIEhpZ2hsaWdodCBDb2xvclwiLCBcIkNvbnRyb2xzIHRoZSBoaWdobGlnaHQgZm9yIHRoZSAnQ2lyY2xlJyBhbmQgJ1NxdWFyZScgc3R5bGVzLlwiLCBcInRvZGF5Q2lyY2xlQ29sb3JcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdG9kYXlTdHlsZVNldHRpbmcuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdub25lJywgJ09mZiAoTm8gSGlnaGxpZ2h0KScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2VsbCcsICdIaWdobGlnaHQgQ2VsbCcpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2lyY2xlJywgJ0NpcmNsZSBBcm91bmQgRGF0ZScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignbnVtYmVyJywgJ1NxdWFyZSBBcm91bmQgRGF0ZScpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRvZGF5SGlnaGxpZ2h0U3R5bGUpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50b2RheUhpZ2hsaWdodFN0eWxlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICByZW5kZXJIaWdobGlnaHRPcHRpb25zKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVuZGVySGlnaGxpZ2h0T3B0aW9ucyh0aGlzLnBsdWdpbi5zZXR0aW5ncy50b2RheUhpZ2hsaWdodFN0eWxlKTtcbiAgICAgICAgLy8gLS0tIEVuZCBvZiBDb3JyZWN0ZWQgU2VjdGlvbiAtLS1cblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkhpZ2hsaWdodCB0b2RheSdzIGRheSBoZWFkZXJcIikuc2V0RGVzYyhcIkNvbG9ycyB0aGUgZGF5IGNvbHVtbiBoZWFkZXIgKFN1biwgTW9uLCBldGMuKSBjb250YWluaW5nIHRvZGF5LlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRUb2RheURheUhlYWRlcikub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRUb2RheURheUhlYWRlciA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkhpZ2hsaWdodCB0b2RheSdzIFAvVyBvciB3ZWVrIG51bWJlclwiKS5zZXREZXNjKFwiQ29sb3JzIHRoZSBQZXJpb2QvV2VlayBvciBDYWxlbmRhciBXZWVrIG51bWJlciBmb3IgdGhlIGN1cnJlbnQgd2Vlay5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0VG9kYXlQV0xhYmVsKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodFRvZGF5UFdMYWJlbCA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiRGF0ZSBDZWxsIEhvdmVyIENvbG9yIChMaWdodCBNb2RlKVwiLCBcIkJhY2tncm91bmQgY29sb3Igd2hlbiBob3ZlcmluZyBvdmVyIGEgZGF0ZSBjZWxsIGluIGxpZ2h0IG1vZGUuXCIsIFwiZGF0ZUNlbGxIb3ZlckNvbG9yTGlnaHRcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJEYXRlIENlbGwgSG92ZXIgQ29sb3IgKERhcmsgTW9kZSlcIiwgXCJCYWNrZ3JvdW5kIGNvbG9yIHdoZW4gaG92ZXJpbmcgb3ZlciBhIGRhdGUgY2VsbCBpbiBkYXJrIG1vZGUuXCIsIFwiZGF0ZUNlbGxIb3ZlckNvbG9yRGFya1wiKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJCb2xkIFBlcmlvZC9XZWVrIGNvbHVtblwiKS5zZXREZXNjKFwiVG9nZ2xlcyBib2xkIGZvbnQgd2VpZ2h0IGZvciB0aGUgUGVyaW9kL1dlZWsgY29sdW1uLlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wd0NvbHVtbkJvbGQpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHdDb2x1bW5Cb2xkID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiU2hvdyBQL1cgc2VwYXJhdG9yIGxpbmVcIikuc2V0RGVzYyhcIkRpc3BsYXkgYSB2ZXJ0aWNhbCBsaW5lIGJldHdlZW4gdGhlIHdlZWsgY29sdW1ucyBhbmQgdGhlIGRhdGUgZ3JpZC5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1BXQ29sdW1uU2VwYXJhdG9yKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dQV0NvbHVtblNlcGFyYXRvciA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiUC9XIHNlcGFyYXRvciBsaW5lIGNvbG9yXCIsIFwiQ29sb3Igb2YgdGhlIHZlcnRpY2FsIHNlcGFyYXRvciBsaW5lLlwiLCBcInB3Q29sdW1uU2VwYXJhdG9yQ29sb3JcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJQZXJpb2QvV2VlayBjb2x1bW4gZm9udCBjb2xvciAoTGlnaHQgTW9kZSlcIiwgXCJUZXh0IGNvbG9yIGZvciB0aGUgUGVyaW9kL1dlZWsgY29sdW1uIGluIGxpZ2h0IHRoZW1lLlwiLCBcInB3Q29sdW1uRm9udENvbG9yTGlnaHRcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJQZXJpb2QvV2VlayBjb2x1bW4gZm9udCBjb2xvciAoRGFyayBNb2RlKVwiLCBcIlRleHQgY29sb3IgZm9yIHRoZSBQZXJpb2QvV2VlayBjb2x1bW4gaW4gZGFyayB0aGVtZS5cIiwgXCJwd0NvbHVtbkZvbnRDb2xvckRhcmtcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJXZWVrIG51bWJlciBjb2x1bW4gZm9udCBjb2xvciAoTGlnaHQgTW9kZSlcIiwgXCJUZXh0IGNvbG9yIGZvciB0aGUgd2VlayBudW1iZXIgY29sdW1uIGluIGxpZ2h0IHRoZW1lLlwiLCBcIndlZWtOdW1iZXJGb250Q29sb3JMaWdodFwiKTtcbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIldlZWsgbnVtYmVyIGNvbHVtbiBmb250IGNvbG9yIChEYXJrIE1vZGUpXCIsIFwiVGV4dCBjb2xvciBmb3IgdGhlIHdlZWsgbnVtYmVyIGNvbHVtbiBpbiBkYXJrIHRoZW1lLlwiLCBcIndlZWtOdW1iZXJGb250Q29sb3JEYXJrXCIpO1xuICAgIH1cblxuXG5cbiAgICByZW5kZXJGdW5jdGlvbmFsU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWw7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkNhbGVuZGFyIEZ1bmN0aW9uYWwgU2V0dGluZ3NcIiB9KTtcblxuICAgICAgICAvLyAtLS0gUGVyaW9kL1dlZWsgU3lzdGVtIFNlY3Rpb24gLS0tXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiUGVyaW9kL1dlZWsgU3lzdGVtXCIpLnNldEhlYWRpbmcoKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiV2VlayBzdGFydHMgb25cIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiQ2hvb3NlIHdoZXRoZXIgdGhlIGNhbGVuZGFyIHdlZWsgc3RhcnRzIG9uIFN1bmRheSBvciBNb25kYXkuXCIpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdtb25kYXknLCAnTW9uZGF5JylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdzdW5kYXknLCAnU3VuZGF5JylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla1N0YXJ0RGF5KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla1N0YXJ0RGF5ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBSZWZyZXNoIHRoZSBzZXR0aW5ncyB0YWIgdG8gc2hvdyB0aGUgdXBkYXRlZCB2YWxpZGF0aW9uIG1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGlzcGxheSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBjb25zdCByZXF1aXJlZERheSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtTdGFydERheSA9PT0gJ21vbmRheScgPyAxIDogMDsgLy8gTW9uZGF5IGlzIDEsIFN1bmRheSBpcyAwXG4gICAgICAgIGNvbnN0IHJlcXVpcmVkRGF5TmFtZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtTdGFydERheS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtTdGFydERheS5zbGljZSgxKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU3RhcnQgb2YgUGVyaW9kIDEgV2VlayAxXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhgVGhlIGRhdGUgZm9yIHRoZSBzdGFydCBvZiBQMVcxLiBUaGlzIGRhdGUgTVVTVCBiZSBhICR7cmVxdWlyZWREYXlOYW1lfSB0byBtYXRjaCB5b3VyICdXZWVrIHN0YXJ0cyBvbicgc2V0dGluZy5gKSAvLyBEeW5hbWljIGRlc2NyaXB0aW9uXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwudHlwZSA9IFwiZGF0ZVwiO1xuICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RhcnRPZlBlcmlvZDFEYXRlKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWREYXRlID0gbW9tZW50KHZhbHVlLCBcIllZWVktTU0tRERcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWREYXRlLmRheSgpICE9PSByZXF1aXJlZERheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiBUaGUgc3RhcnQgZGF0ZSBtdXN0IGJlIGEgJHtyZXF1aXJlZERheU5hbWV9LmAsIDUwMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gRG8gbm90IHNhdmUgdGhlIGludmFsaWQgZGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RhcnRPZlBlcmlvZDFEYXRlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlBlcmlvZC9XZWVrIGZvcm1hdFwiKS5zZXREZXNjKFwiQ2hvb3NlIHRoZSBkaXNwbGF5IGZvcm1hdCBmb3IgdGhlIFAvVyBjb2x1bW4uXCIpLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duLmFkZE9wdGlvbihcIlAjVyNcIiwgXCJQI1cjXCIpLmFkZE9wdGlvbihcIlAjIFcjXCIsIFwiUCMgVyNcIikuYWRkT3B0aW9uKFwiIyBXI1wiLCBcIiMgVyNcIikuYWRkT3B0aW9uKFwicCN3I1wiLCBcInAjcCNcIikuYWRkT3B0aW9uKFwicCMgdyNcIiwgXCJwIyB3I1wiKS5hZGRPcHRpb24oXCIjIHcjXCIsIFwiIyB3I1wiKS5hZGRPcHRpb24oXCIjLSNcIiwgXCIjLSNcIikuYWRkT3B0aW9uKFwiIyAtICNcIiwgXCIjIC0gI1wiKS5hZGRPcHRpb24oXCIjLyNcIiwgXCIjLyNcIikuYWRkT3B0aW9uKFwiIyAvICNcIiwgXCIjIC8gI1wiKS5hZGRPcHRpb24oXCIjLCNcIiwgXCIjLCNcIikuYWRkT3B0aW9uKFwiIywgI1wiLCBcIiMsICNcIikuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucHdGb3JtYXQpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wd0Zvcm1hdCA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiU2hvdyBQZXJpb2QvV2VlayBjb2x1bW5cIikuc2V0RGVzYyhcIlNob3cgb3IgaGlkZSB0aGUgUGVyaW9kL1dlZWsgY29sdW1uIG9uIHRoZSBsZWZ0IHNpZGUgb2YgdGhlIGNhbGVuZGFyLlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93UFdDb2x1bW4pLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1BXQ29sdW1uID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG5cbiAgICAgICAgLy8gLS0tIFdlZWsgTnVtYmVycyBTZWN0aW9uIC0tLVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIldlZWsgTnVtYmVyc1wiKS5zZXRIZWFkaW5nKCk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlNob3cgd2VlayBudW1iZXIgY29sdW1uXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkRpc3BsYXkgYSBjb2x1bW4gZm9yIHdlZWsgbnVtYmVycyBvbiB0aGUgbGVmdCBzaWRlIG9mIHRoZSBjYWxlbmRhci5cIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93V2Vla051bWJlcnMpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93V2Vla051bWJlcnMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJXZWVrIG51bWJlciB0eXBlXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkNob29zZSB3aGljaCB3ZWVrIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlLlwiKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbigncGVyaW9kJywgJ1BlcmlvZCBTeXN0ZW0gV2VlaycpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2FsZW5kYXInLCAnQ2FsZW5kYXIgWWVhciBXZWVrIChJU08pJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla051bWJlclR5cGUpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrTnVtYmVyVHlwZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIldlZWsgbnVtYmVyIGNvbHVtbiBsYWJlbFwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJUaGUgdGV4dCB0byBkaXNwbGF5IGF0IHRoZSB0b3Agb2YgdGhlIHdlZWsgbnVtYmVyIGNvbHVtbi5cIilcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrTnVtYmVyQ29sdW1uTGFiZWwpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrTnVtYmVyQ29sdW1uTGFiZWwgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIC0tLSBEYWlseSBOb3RlcyBTZWN0aW9uIC0tLVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkRhaWx5IE5vdGVzXCIpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJEYWlseSBOb3RlcyBmb2xkZXJcIikuc2V0RGVzYyhcIlNwZWNpZnkgdGhlIGZvbGRlciB3aGVyZSB5b3VyIGRhaWx5IG5vdGVzIGFyZSBzdG9yZWQgYW5kIGNyZWF0ZWQuXCIpLmFkZFRleHQodGV4dCA9PiB7IHRoaXMuY3JlYXRlUGF0aFN1Z2dlc3Rlcih0ZXh0LmlucHV0RWwsIChxKSA9PiB0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBURm9sZGVyICYmICghcSB8fCBmLnBhdGgudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSkpLm1hcChmID0+IGYucGF0aCkpOyB0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRhaWx5Tm90ZXNGb2xkZXIpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGFpbHlOb3Rlc0ZvbGRlciA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSk7IH0pO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkRhaWx5IE5vdGUgb3BlbiBiZWhhdmlvclwiKS5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93bi5hZGRPcHRpb24oJ25ldy10YWInLCAnT3BlbiBpbiBhIG5ldyB0YWInKS5hZGRPcHRpb24oJ2N1cnJlbnQtdGFiJywgJ09wZW4gaW4gdGhlIGN1cnJlbnQgdGFiJykuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGFpbHlOb3RlT3BlbkFjdGlvbikub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLmRhaWx5Tm90ZU9wZW5BY3Rpb24gPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJEYWlseSBub3RlIHRlbXBsYXRlXCIpLnNldERlc2MoXCJQYXRoIHRvIGEgdGVtcGxhdGUgZmlsZSB0byB1c2Ugd2hlbiBjcmVhdGluZyBhIG5ldyBkYWlseSBub3RlLlwiKS5hZGRUZXh0KHRleHQgPT4geyB0aGlzLmNyZWF0ZVBhdGhTdWdnZXN0ZXIodGV4dC5pbnB1dEVsLCAocSkgPT4gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcihmID0+ICFxIHx8IGYucGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHEpKS5tYXAoZiA9PiBmLnBhdGgpKTsgdGV4dC5zZXRQbGFjZWhvbGRlcihcIkV4YW1wbGU6IFRlbXBsYXRlcy9EYWlseS5tZFwiKS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYWlseU5vdGVUZW1wbGF0ZVBhdGgpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYWlseU5vdGVUZW1wbGF0ZVBhdGggPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pOyB9KTtcblxuICAgICAgICAvLyAtLS0gR3JpZCBIaWdobGlnaHRpbmcgU2VjdGlvbiAtLS1cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJHcmlkIEhpZ2hsaWdodGluZ1wiKS5zZXRIZWFkaW5nKCk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiRW5hYmxlIHJvdyBoaWdobGlnaHRcIikuc2V0RGVzYyhcIkhpZ2hsaWdodHMgdGhlIGVudGlyZSB3ZWVrJ3Mgcm93IHdoZW4gaG92ZXJpbmcgb3ZlciB0aGUgUC9XIGxhYmVsLlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVSb3dIaWdobGlnaHQpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVSb3dIaWdobGlnaHQgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJFbmFibGUgY29sdW1uIGhpZ2hsaWdodFwiKS5zZXREZXNjKFwiSGlnaGxpZ2h0cyB0aGUgZW50aXJlIGRheSdzIGNvbHVtbiB3aGVuIGhvdmVyaW5nIG92ZXIgdGhlIGRheSBuYW1lIChlLmcuLCBNb24pLlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb2x1bW5IaWdobGlnaHQpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb2x1bW5IaWdobGlnaHQgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJFbmFibGUgY29tcGxleCBncmlkIGhpZ2hsaWdodFwiKS5zZXREZXNjKFwiV2hlbiBob3ZlcmluZyBhIGRhdGUsIGhpZ2hsaWdodHMgYWxsIGNlbGxzIGluIGl0cyByb3cgYW5kIGNvbHVtbiB1cCB0byB0aGF0IGRhdGUuXCIpLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVJvd1RvRGF0ZUhpZ2hsaWdodCkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVJvd1RvRGF0ZUhpZ2hsaWdodCA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuXG5cblxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJBbHdheXMgaGlnaGxpZ2h0IGN1cnJlbnQgd2Vla1wiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJLZWVwcyB0aGUgZW50aXJlIHJvdyBmb3IgdGhlIGN1cnJlbnQgd2VlayBwZXJtYW5lbnRseSBoaWdobGlnaHRlZC5cIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRDdXJyZW50V2VlaylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodEN1cnJlbnRXZWVrID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuXG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJHcmlkIEhpZ2hsaWdodCBDb2xvciAoTGlnaHQgTW9kZSlcIiwgXCJDb2xvciBmb3Igcm93L2NvbHVtbiBoaWdobGlnaHRpbmcgb24gaG92ZXIgaW4gbGlnaHQgbW9kZS5cIiwgXCJyb3dIaWdobGlnaHRDb2xvckxpZ2h0XCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiR3JpZCBIaWdobGlnaHQgQ29sb3IgKERhcmsgTW9kZSlcIiwgXCJDb2xvciBmb3Igcm93L2NvbHVtbiBoaWdobGlnaHRpbmcgb24gaG92ZXIgaW4gZGFyayBtb2RlLlwiLCBcInJvd0hpZ2hsaWdodENvbG9yRGFya1wiKTtcblxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJIaWdobGlnaHQgd2Vla2VuZHNcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiU2hhZGUgU2F0dXJkYXkgYW5kIFN1bmRheSBjb2x1bW5zIHdpdGggYSBzdWJ0bGUgYmFja2dyb3VuZCBjb2xvci5cIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRXZWVrZW5kcylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodFdlZWtlbmRzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoXG4gICAgICAgICAgICBjb250YWluZXJFbCxcbiAgICAgICAgICAgIFwiV2Vla2VuZCBzaGFkZSBjb2xvciAoTGlnaHQgTW9kZSlcIixcbiAgICAgICAgICAgIFwiQmFja2dyb3VuZCBjb2xvciBmb3IgU2F0dXJkYXkgYW5kIFN1bmRheSBjb2x1bW5zIGluIGxpZ2h0IHRoZW1lLlwiLFxuICAgICAgICAgICAgXCJ3ZWVrZW5kU2hhZGVDb2xvckxpZ2h0XCJcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoXG4gICAgICAgICAgICBjb250YWluZXJFbCxcbiAgICAgICAgICAgIFwiV2Vla2VuZCBzaGFkZSBjb2xvciAoRGFyayBNb2RlKVwiLFxuICAgICAgICAgICAgXCJCYWNrZ3JvdW5kIGNvbG9yIGZvciBTYXR1cmRheSBhbmQgU3VuZGF5IGNvbHVtbnMgaW4gZGFyayB0aGVtZS5cIixcbiAgICAgICAgICAgIFwid2Vla2VuZFNoYWRlQ29sb3JEYXJrXCJcbiAgICAgICAgKTtcblxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiSW50ZWdyYXRlIEV4dGVybmFsIENhbGVuZGFyIEV2ZW50c1wiKS5zZXRIZWFkaW5nKCk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRXh0ZXJuYWwgY2FsZW5kYXIgVVJMICguaWNzKScpXG4gICAgICAgICAgICAuc2V0RGVzYygnSW50ZWdyYXRlIGFuIGV4dGVybmFsIC5pY3MgZmVlZCBjYWxlbmRhciBVUkwgKGUuZy4sIGZyb20gR29vZ2xlIENhbGVuZGFyIHVzaW5nIHRoZSBcXCdTZWNyZXQgYWRkcmVzcyBpbiBpQ2FsIGZvcm1hdFxcJyBvciBcXCdQdWJsaWMgYWRkcmVzcyBpbiBpQ2FsIEZvcm1hdFxcJykgdG8gaW5kaWNhdGUgZXZlbnRzIGFzIGRvdHMgaW4gdGhlIGNhbGVuZGFyIGdyaWQgYW5kIGV2ZW50IGRldGFpbHMgaW4gdGhlIGRhdGUgcG9wdXAgYm94LicpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignaHR0cHM6Ly9jYWxlbmRhci5nb29nbGUuY29tL2NhbGVuZGFyL2ljYWwvLi4uL2Jhc2ljLmljcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY3NVcmwpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmljc1VybCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnN0eWxlLm1pbldpZHRoID0gXCIzMDBweFwiO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS5yZXNpemUgPSBcInZlcnRpY2FsXCI7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnNldHRpbmdFbC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJmbGV4LXN0YXJ0XCI7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnQXV0by1yZWZyZXNoIEludGVydmFsJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdIb3cgb2Z0ZW4gdGhlIGV4dGVybmFsIGNhbGVuZGFyIFVSTCBzaG91bGQgYmUgYXV0b21hdGljYWxseSByZWZyZXNoZWQgaW4gdGhlIGJhY2tncm91bmQuJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgICAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignMTUnLCAnMTUgbWludXRlcycpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJzMwJywgJzMwIG1pbnV0ZXMnKVxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCc2MCcsICcxIGhvdXInKVxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCcxODAnLCAnMyBob3VycycpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJzM2MCcsICc2IGhvdXJzJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignNzIwJywgJzEyIGhvdXJzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmljc1JlZnJlc2hJbnRlcnZhbC50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY3NSZWZyZXNoSW50ZXJ2YWwgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbGwgYSBtZXRob2Qgb24gdGhlIG1haW4gcGx1Z2luIHRvIHJlc2V0IHRoZSB0aW1lclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ucmVzZXRJY3NSZWZyZXNoSW50ZXJ2YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0NhbGVuZGFyIEV2ZW50IEluZGljYXRvcicpXG4gICAgICAgICAgICAuc2V0RGVzYygnQ2hvb3NlIGhvdyB0byBkaXNwbGF5IGV4dGVybmFsIGNhbGVuZGFyIGV2ZW50cyBvbiB0aGUgY2FsZW5kYXIgZ3JpZC4gXCJEb3RcIiBzaG93cyBhIHNlcGFyYXRlIGNvbG9yZWQgZG90LCB3aGlsZSBcIkhlYXRtYXBcIiBhbmQgXCJCYWRnZVwiIHdpbGwgYWRkIHRoZSBldmVudCBjb3VudCB0byB0aGUgZXhpc3RpbmcgdGFzayBpbmRpY2F0b3JzLiBJZiB5b3Ugc2VsZWN0IFwiSGVhdG1hcFwiIG9yIFwiQmFkZ2VcIiwgZW5zdXJlIHRoYXQgdGhlIGNvcnJlc3BvbmRpbmcgdGFzayBpbmRpY2F0b3Igb3B0aW9uIGlzIGFsc28gZW5hYmxlZCBpbiB0aGUgXCJUYXNrIEluZGljYXRvcnNcIiBzZXR0aW5ncyB0YWIuIFNldHRpbmdzIHdpbGwgYmUgYXBwbGllZCBhZnRlciBjbG9zaW5nIHRoZSBzZXR0aW5ncyB3aW5kb3cuJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2RvdCcsICdEb3QgT25seScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignaGVhdG1hcCcsICdBZGQgdG8gSGVhdG1hcCcpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignYmFkZ2UnLCAnQWRkIHRvIFRhc2sgQmFkZ2UnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckV2ZW50SW5kaWNhdG9yU3R5bGUgfHwgJ2RvdCcpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBTdGVwIDE6IFNhdmUgdGhlIG5ldyB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckV2ZW50SW5kaWNhdG9yU3R5bGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0NhbGVuZGFyIEV2ZW50cyBQbGFjZWhvbGRlcicpXG4gICAgICAgICAgICAuc2V0RGVzYygnVGhlIHBsYWNlaG9sZGVyIHRleHQgdG8gdXNlIGluIHlvdXIgZGFpbHkgbm90ZSB0ZW1wbGF0ZS4gVGhlIHBsdWdpbiB3aWxsIHJlcGxhY2UgdGhpcyB0ZXh0IHdpdGggY2FsZW5kYXIgZXZlbnRzLicpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignJSVDQUxFTkRBUl9FVkVOVFMlJScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckV2ZW50c1BsYWNlaG9sZGVyKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckV2ZW50c1BsYWNlaG9sZGVyID0gdmFsdWUudHJpbSgpIHx8ICclJUNBTEVOREFSX0VWRU5UUyUlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgbWluaW11bSB3aWR0aCBmb3IgdGhlIHRleHQgaW5wdXQgZmllbGRcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUubWluV2lkdGggPSBcIjMwMHB4XCI7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnN0eWxlLnJlc2l6ZSA9IFwidmVydGljYWxcIjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc2V0dGluZ0VsLnN0eWxlLmFsaWduSXRlbXMgPSBcImZsZXgtc3RhcnRcIjtcblxuXG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBzZXR0aW5nIGNvbnRhaW5lclxuICAgICAgICBjb25zdCBjYWxlbmRhckZvcm1hdFNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdDYWxlbmRhciBFdmVudCBGb3JtYXQnKVxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4ge1xuICAgICAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCctIHt7c3RhcnRUaW1lfX0gLSB7e2VuZFRpbWV9fToge3tzdW1tYXJ5fX0nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FsZW5kYXJFdmVudHNGb3JtYXQpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNhbGVuZGFyRXZlbnRzRm9ybWF0ID0gdmFsdWUgfHwgJy0ge3tzdGFydFRpbWV9fSAtIHt7ZW5kVGltZX19OiB7e3N1bW1hcnl9fSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBBcHBseSBzdHlsZXMgdG8gdGhlIHRleHRhcmVhIGVsZW1lbnRcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUubWluV2lkdGggPSBcIjMwMHB4XCI7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnN0eWxlLm1pbkhlaWdodCA9IFwiMTAwcHhcIjtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUucmVzaXplID0gXCJ2ZXJ0aWNhbFwiO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gLS0tIFRISVMgSVMgVEhFIE5FVywgQ09SUkVDVEVEIERFU0NSSVBUSU9OIExPR0lDIC0tLVxuICAgICAgICAvLyBXZSBidWlsZCB0aGUgZGVzY3JpcHRpb24gc2VwYXJhdGVseSBhbmQgYXBwZW5kIGl0IHRvIHRoZSBzZXR0aW5nJ3MgZGVzY3JpcHRpb24gZWxlbWVudC5cbiAgICAgICAgY29uc3QgZGVzY0VsID0gY2FsZW5kYXJGb3JtYXRTZXR0aW5nLmRlc2NFbDtcbiAgICAgICAgZGVzY0VsLmFwcGVuZFRleHQoJ0N1c3RvbWl6ZSB0aGUgZm9ybWF0IGZvciBlYWNoIGNhbGVuZGFyIGV2ZW50LiBVc2UgdGhlc2UgcGxhY2Vob2xkZXJzOicpO1xuXG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyTGlzdCA9IGRlc2NFbC5jcmVhdGVFbCgndWwnKTtcblxuICAgICAgICBjb25zdCBwbGFjZWhvbGRlcnMgPSBbXG4gICAgICAgICAgICB7IGNvZGU6ICd7e3N1bW1hcnl9fScsIHRleHQ6ICdUaGUgZXZlbnQgdGl0bGUnIH0sXG4gICAgICAgICAgICB7IGNvZGU6ICd7e3N0YXJ0VGltZX19JywgdGV4dDogJ1RoZSBldmVudCBzdGFydCB0aW1lIChvciBcIkFsbC1kYXlcIiknIH0sXG4gICAgICAgICAgICB7IGNvZGU6ICd7e2VuZFRpbWV9fScsIHRleHQ6ICdUaGUgZXZlbnQgZW5kIHRpbWUnIH1cbiAgICAgICAgXTtcblxuICAgICAgICBwbGFjZWhvbGRlcnMuZm9yRWFjaChwID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBwbGFjZWhvbGRlckxpc3QuY3JlYXRlRWwoJ2xpJyk7XG4gICAgICAgICAgICBpdGVtLmNyZWF0ZUVsKCdjb2RlJywgeyB0ZXh0OiBwLmNvZGUgfSk7XG4gICAgICAgICAgICBpdGVtLmFwcGVuZFRleHQoYCAke3AudGV4dH1gKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWxpZ24gdGhlIGVudGlyZSBzZXR0aW5nIHJvdyB0byB0aGUgdG9wXG4gICAgICAgIGNhbGVuZGFyRm9ybWF0U2V0dGluZy5zZXR0aW5nRWwuc3R5bGUuYWxpZ25JdGVtcyA9IFwiZmxleC1zdGFydFwiO1xuXG5cblxuXG5cbiAgICB9XG5cbiAgICByZW5kZXJEb3RzU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWw7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkNhbGVuZGFyIERvdCBJbmRpY2F0b3JzXCIgfSk7XG4gICAgICAgIC8vIC0tLSBEb3QgRnVuY3Rpb25hbGl0eSBTZWN0aW9uIC0tLVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkZ1bmN0aW9uYWxpdHkgJiBTdHlsZVwiKS5zZXRIZWFkaW5nKCk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiU2hvdyBkb3QgZm9yIGNyZWF0ZWQgbm90ZXNcIikuc2V0RGVzYyhcIlNob3cgYSBkb3Qgb24gZGF5cyB3aGVyZSBhbnkgbm90ZSAodGhhdCBpcyBub3QgYSBkYWlseSBub3RlKSB3YXMgY3JlYXRlZC5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd090aGVyTm90ZURvdCkub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93T3RoZXJOb3RlRG90ID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiU2hvdyBkb3QgZm9yIG1vZGlmaWVkIG5vdGVzXCIpLnNldERlc2MoXCJTaG93IGEgZG90IG9uIGRheXMgd2hlcmUgYW55IG5vdGUgKHRoYXQgaXMgbm90IGEgZGFpbHkgbm90ZSkgd2FzIG1vZGlmaWVkLlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93TW9kaWZpZWRGaWxlRG90KS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dNb2RpZmllZEZpbGVEb3QgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlNob3cgZG90IGZvciBuZXcgYXNzZXRzXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlNob3cgYSBkb3Qgb24gZGF5cyB3aGVyZSBhbiBhc3NldCAoaW1hZ2UsIFBERiwgZXRjLikgd2FzIGFkZGVkIHRvIHRoZSB2YXVsdC5cIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93QXNzZXREb3QpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93QXNzZXREb3QgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1Nob3cgZG90IGZvciBleHRlcm5hbCBpY3MgY2FsZW5kYXIgZXZlbnRzJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdTaG93IGEgZG90IG9uIGRheXMgdGhhdCBoYXZlIGEgY2FsZW5kYXJkIGV2ZW50IGZyb20gYW4gZXh0ZXJuYWwgY2FsZW5kYXIgc291cmNlLCBlLmcuIEdvb2dsZSBDYWxlbmRhci4nKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dJY3NEb3QpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93SWNzRG90ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkNhbGVuZGFyIGRvdCBzaXplXCIpLnNldERlc2MoXCJUaGUgc2l6ZSAoaW4gcGl4ZWxzKSBvZiB0aGUgY29sb3JlZCBkb3RzIHRoYXQgYXBwZWFyIHVuZGVyIGNhbGVuZGFyIGRheXMuIERlZmF1bHQgaXMgNC5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLmNhbGVuZGFyRG90U2l6ZSkpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckRvdFNpemUgPSBOdW1iZXIodmFsdWUpIHx8IDQ7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG5cbiAgICAgICAgLy8gLS0tIERvdCBDb2xvcnMgU2VjdGlvbiAtLS1cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJEb3QgQ29sb3JzXCIpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIkRhaWx5IE5vdGUgRG90XCIsIFwiRG90IGZvciBkYWlseSBub3RlcyBvbiB0aGUgY2FsZW5kYXIgYW5kIG5vdGUgbGlzdHMgLlwiLCBcImRhaWx5Tm90ZURvdENvbG9yXCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiQ3JlYXRlZCBOb3RlIERvdFwiLCBcIkRvdCBvbiBjYWxlbmRhciBhbmQgbm90ZSBsaXN0cyBmb3Igbm9uLWRhaWx5LCBuZXdseSBjcmVhdGVkIG5vdGVzLlwiLCBcIm90aGVyTm90ZURvdENvbG9yXCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiTW9kaWZpZWQgTm90ZSBEb3RcIiwgXCJEb3Qgb24gY2FsZW5kYXIgYW5kIG5vdGUgbGlzdHMgZm9yIG5vbi1kYWlseSwgbW9kaWZpZWQgbm90ZXMuXCIsIFwiY2FsZW5kYXJNb2RpZmllZERvdENvbG9yXCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiQXNzZXQgTm90ZSBEb3RcIiwgXCJEb3Qgb24gY2FsZW5kYXIgYW5kIG5vdGUgbGlzdHMgZm9yIG5ld2x5IGFkZGVkIGFzc2V0cy5cIiwgXCJhc3NldERvdENvbG9yXCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsICdDYWxlbmRhciBFdmVudCBEb3QnLCAnVGhlIGNvbG9yIG9mIHRoZSBkb3QgZm9yIGV2ZW50cyBmcm9tIHlvdXIgaUNhbC8uaWNzIGZlZWQuJywgJ2NhbGVuZGFyRXZlbnREb3RDb2xvcicpO1xuICAgICAgICAvLyAtLS0gUG9wdXBzIFNlY3Rpb24gLS0tXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiUG9wdXBzXCIpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJQb3B1cCBob3ZlciBkZWxheVwiKS5zZXREZXNjKFwiSG93IGxvbmcgdG8gd2FpdCBiZWZvcmUgc2hvd2luZyB0aGUgbm90ZSBsaXN0IHBvcHVwIG9uIGhvdmVyLiBEZWZhdWx0IGlzIDEwMC5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLm90aGVyTm90ZUhvdmVyRGVsYXkpKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3RoZXJOb3RlSG92ZXJEZWxheSA9IE51bWJlcih2YWx1ZSkgfHwgMTAwOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlBvcHVwIGhpZGUgZGVsYXlcIikuc2V0RGVzYyhcIkhvdyBsb25nIHRvIHdhaXQgYmVmb3JlIGhpZGluZyB0aGUgcG9wdXAgYWZ0ZXIgdGhlIG1vdXNlIGxlYXZlcy4gRGVmYXVsdCBpcyAxMDAuXCIpLmFkZFRleHQodGV4dCA9PiB0ZXh0LnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wb3B1cEhpZGVEZWxheSkpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wb3B1cEhpZGVEZWxheSA9IE51bWJlcih2YWx1ZSkgfHwgMTAwOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlBvcHVwIGdhcFwiKS5zZXREZXNjKFwiVGhlIGdhcCAoaW4gcGl4ZWxzKSBiZXR3ZWVuIGEgY2FsZW5kYXIgZGF5IGFuZCBpdHMgcG9wdXAgbGlzdC4gQ2FuIGJlIG5lZ2F0aXZlLiBEZWZhdWx0IGlzIC0yLlwiKS5hZGRUZXh0KHRleHQgPT4gdGV4dC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MucG9wdXBHYXApKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MucG9wdXBHYXAgPSBOdW1iZXIodmFsdWUpIHx8IC0yOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlBvcHVwIGZvbnQgc2l6ZVwiKS5zZXREZXNjKFwiVGhlIGZvbnQgc2l6ZSBmb3IgdGhlIG5vdGUgbmFtZXMgaW5zaWRlIHRoZSBjYWxlbmRhciBwb3B1cC4gRGVmYXVsdCBpcyAxNHB4LlwiKS5hZGRUZXh0KHRleHQgPT4gdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vdGhlck5vdGVQb3B1cEZvbnRTaXplKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLm90aGVyTm90ZVBvcHVwRm9udFNpemUgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgdGhpcy5jcmVhdGVJZ25vcmVkRm9sZGVyTGlzdChjb250YWluZXJFbCwgXCJJZ25vcmUgZm9sZGVycyBmb3IgY2FsZW5kYXIgZ3JpZCBkb3RzXCIsIFwiRmlsZXMgaW4gdGhlc2UgZm9sZGVycyB3aWxsIG5vdCBjcmVhdGUgJ2NyZWF0ZWQnIG9yICdtb2RpZmllZCcgZG90cyBvbiB0aGUgY2FsZW5kYXIuXCIsICdvdGhlck5vdGVJZ25vcmVGb2xkZXJzJyk7XG4gICAgICAgIHRoaXMuY3JlYXRlSWdub3JlZEZvbGRlckxpc3QoY29udGFpbmVyRWwsIFwiSWdub3JlIGZvbGRlcnMgZm9yIGFzc2V0IGRvdHNcIiwgXCJBc3NldHMgaW4gdGhlc2UgZm9sZGVycyB3aWxsIG5vdCBjcmVhdGUgZG90cyBvbiB0aGUgY2FsZW5kYXIuXCIsICdhc3NldElnbm9yZUZvbGRlcnMnKTtcblxuICAgIH1cblxuICAgIHJlbmRlcldlZWtseU5vdGVzU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWw7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIldlZWtseSBOb3RlcyBTZXR0aW5nc1wiIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJFbmFibGUgV2Vla2x5IE5vdGVzXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkVuYWJsZSBjbGlja2luZyBvbiB3ZWVrIG51bWJlcnMgdG8gb3Blbi9jcmVhdGUgd2Vla2x5IG5vdGVzIGFuZCBzaG93IHRoZSBkb3QgaW5kaWNhdG9yLlwiKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVdlZWtseU5vdGVzKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlV2Vla2x5Tm90ZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJXZWVrbHkgTm90ZSBGb2xkZXJcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiVGhlIGZvbGRlciB3aGVyZSB5b3VyIHdlZWtseSBub3RlcyBhcmUgc3RvcmVkLiBJdCB3aWxsIGJlIGNyZWF0ZWQgaWYgaXQgZG9lc24ndCBleGlzdC5cIilcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlUGF0aFN1Z2dlc3Rlcih0ZXh0LmlucHV0RWwsIChxKSA9PiB0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBURm9sZGVyICYmICghcSB8fCBmLnBhdGgudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSkpLm1hcChmID0+IGYucGF0aCkpO1xuICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla2x5Tm90ZUZvbGRlcilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtseU5vdGVGb2xkZXIgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEluIHRoZSBQZXJpb2RTZXR0aW5nc1RhYiBjbGFzcywgaW5zaWRlIHJlbmRlcldlZWtseU5vdGVzU2V0dGluZ3MoKVxuICAgICAgICBjb25zdCB3ZWVrbHlGb3JtYXRTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJXZWVrbHkgTm90ZSBGb3JtYXRcIik7XG4gICAgICAgIHdlZWtseUZvcm1hdFNldHRpbmcuZGVzY0VsLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIFNldCB0aGUgZmlsZW5hbWUgZm9ybWF0IGZvciB3ZWVrbHkgbm90ZXMgdXNpbmcgZG90cywgaHlwaGVucywgb3Igb3RoZXIgc2VwYXJhdG9ycy5cbiAgICAgICAgICAgIDxicj5UaGUgZm9sbG93aW5nIHBsYWNlaG9sZGVycyB3aWxsIGJlIHJlcGxhY2VkIGF1dG9tYXRpY2FsbHk6XG4gICAgICAgICAgICA8YnI+PGNvZGU+WVlZWTwvY29kZT4gLSBUaGUgNC1kaWdpdCB5ZWFyIChlLmcuLCAyMDI1KVxuICAgICAgICAgICAgPGJyPjxjb2RlPk1NPC9jb2RlPiAtIFRoZSAyLWRpZ2l0IG1vbnRoIChlLmcuLCAwOClcbiAgICAgICAgICAgIDxicj48Y29kZT5QTjwvY29kZT4gLSBUaGUgUGVyaW9kIE51bWJlciB3aXRoIGEgJ1AnIHByZWZpeCAoZS5nLiwgUDgpXG4gICAgICAgICAgICA8YnI+PGNvZGU+UFc8L2NvZGU+IC0gVGhlIHdlZWsgbnVtYmVyIHdpdGhpbiB0aGUgcGVyaW9kIHdpdGggYSAnVycgcHJlZml4IChlLmcuLCBXMilcbiAgICAgICAgICAgIDxicj48Y29kZT5XS1A8L2NvZGU+IC0gVGhlIHdlZWsgbnVtYmVyICgxLTUyKSB3aXRoaW4geW91ciBjdXN0b20gcGVyaW9kIHllYXJcbiAgICAgICAgICAgIDxicj48Y29kZT5XS0M8L2NvZGU+IC0gVGhlIHN0YW5kYXJkIElTTyBjYWxlbmRhciB3ZWVrIG51bWJlciAoMS01MylcbiAgICAgICAgICAgIDxicj48YnI+PGI+RXhhbXBsZXM6PC9iPlxuICAgICAgICAgICAgPGJyPkZvcm1hdDogPGNvZGU+WVlZWS1NTS1QTlBXPC9jb2RlPiDihpIgRmlsZW5hbWU6IDxjb2RlPjIwMjUtMDgtUDhXMi5tZDwvY29kZT5cbiAgICAgICAgICAgIDxicj5Gb3JtYXQ6IDxjb2RlPllZWVktTU0tV0tQPC9jb2RlPiDihpIgRmlsZW5hbWU6IDxjb2RlPjIwMjUtMDgtMzAubWQ8L2NvZGU+XG4gICAgICAgICAgICA8YnI+Rm9ybWF0OiA8Y29kZT5ZWVlZLU1NLVdXS0M8L2NvZGU+IOKGkiBGaWxlbmFtZTogPGNvZGU+MjAyNS0wOC1XMzgubWQ8L2NvZGU+XG4gICAgICAgIGA7XG4gICAgICAgIHdlZWtseUZvcm1hdFNldHRpbmcuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrbHlOb3RlRm9ybWF0KVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtseU5vdGVGb3JtYXQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiV2Vla2x5IG5vdGUgdGVtcGxhdGVcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiUGF0aCB0byBhIHRlbXBsYXRlIGZpbGUgdG8gdXNlIHdoZW4gY3JlYXRpbmcgYSBuZXcgd2Vla2x5IG5vdGUuXCIpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVBhdGhTdWdnZXN0ZXIodGV4dC5pbnB1dEVsLCAocSkgPT4gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcihmID0+ICFxIHx8IGYucGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHEpKS5tYXAoZiA9PiBmLnBhdGgpKTtcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKFwiRXhhbXBsZTogVGVtcGxhdGVzL1dlZWtseS5tZFwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla2x5Tm90ZVRlbXBsYXRlKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrbHlOb3RlVGVtcGxhdGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiRG90IEluZGljYXRvclwiKS5zZXRIZWFkaW5nKCk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlNob3cgZG90IGZvciB3ZWVrbHkgbm90ZXNcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiU2hvdyBhIGRvdCBpbiB0aGUgd2VlayBudW1iZXIgY29sdW1uIGlmIGEgbm90ZSBmb3IgdGhhdCB3ZWVrIGV4aXN0cy5cIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93V2Vla2x5Tm90ZURvdClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dXZWVrbHlOb3RlRG90ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiV2Vla2x5IE5vdGUgRG90IENvbG9yXCIsIFwiVGhlIGNvbG9yIG9mIHRoZSBkb3QgZm9yIGV4aXN0aW5nIHdlZWtseSBub3Rlcy5cIiwgXCJ3ZWVrbHlOb3RlRG90Q29sb3JcIik7XG4gICAgfVxuXG4gICAgcmVuZGVyVGFza0luZGljYXRvclNldHRpbmdzKCkge1xuICAgICAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGVudEVsO1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJDYWxlbmRhciBUYXNrIEluZGljYXRvcnNcIiB9KTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlRhc2sgaW5kaWNhdG9yIHN0eWxlXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkNob29zZSBob3cgdG8gaW5kaWNhdGUgZGF5cyB3aXRoIHRhc2tzIG9uIHRoZSBjYWxlbmRhciBncmlkLlwiKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignbm9uZScsICdOb25lJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdiYWRnZScsICdOdW1iZXIgQmFkZ2UnKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2hlYXRtYXAnLCAnQ2VsbCBDb2xvciBIZWF0bWFwJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0luZGljYXRvclN0eWxlKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0luZGljYXRvclN0eWxlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSByZS1yZW5kZXIgdGhlIHNldHRpbmdzIGRpc3BsYXkgdG8gc2hvdy9oaWRlIHJlbGV2YW50IG9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGlzcGxheSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2hvdyBkb3QgZm9yIHRhc2tzXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlNob3cgYSBzaW5nbGUgZG90IG9uIGRheXMgd2l0aCB0YXNrcy4gVGhpcyBjYW4gYmUgdXNlZCB3aXRoIG9yIGluc3RlYWQgb2YgdGhlIGhlYXRtYXAvYmFkZ2UuXCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rhc2tEb3QpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VGFza0RvdCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIlRhc2sgRG90IENvbG9yXCIsIFwiVGhlIGNvbG9yIG9mIHRoZSBkb3QgaW5kaWNhdGluZyBhIGRheSBoYXMgdGFza3MuXCIsIFwidGFza0RvdENvbG9yXCIpO1xuXG4gICAgICAgIC8vIE9ubHkgc2hvdyB0aGUgYmFkZ2UvaGVhdG1hcCBzZXR0aW5ncyBpZiB0aGV5IGFyZSByZWxldmFudFxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0luZGljYXRvclN0eWxlID09PSAnYmFkZ2UnKSB7XG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIlRhc2sgYmFkZ2UgZm9udCBzaXplXCIpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJUaGUgZm9udCBzaXplIGZvciB0aGUgbnVtYmVyIGluc2lkZSB0aGUgdGFzayBiYWRnZS4gRGVmYXVsdCBpcyA5cHguXCIpXG4gICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrQmFkZ2VGb250U2l6ZSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0JhZGdlRm9udFNpemUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJUYXNrIGJhZGdlIGNvbG9yXCIsIFwiVGhlIGJhY2tncm91bmQgY29sb3Igb2YgdGhlIHRhc2sgY291bnQgYmFkZ2UuXCIsIFwidGFza0JhZGdlQ29sb3JcIik7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiVGFzayBiYWRnZSBmb250IGNvbG9yXCIsIFwiVGhlIGNvbG9yIG9mIHRoZSBudW1iZXIgaW5zaWRlIHRoZSB0YXNrIGNvdW50IGJhZGdlLlwiLCBcInRhc2tCYWRnZUZvbnRDb2xvclwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrSW5kaWNhdG9yU3R5bGUgPT09ICdoZWF0bWFwJykge1xuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIkhlYXRtYXAgY29udGVudCBib3JkZXIgd2lkdGhcIilcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcIldpZHRoIG9mIHRoZSBib3JkZXIgYXJvdW5kIHRoZSBkYXkgaGVhdG1hcCBjb250ZW50IGFyZWEgKGUuZy4sIDFweCwgMnB4LCAzcHgpLiBDcmVhdGVzIHZpc3VhbCBzZXBhcmF0aW9uIGluc2lkZSBjZWxscy4gRGVmYXVsdCBpcyAxcHguXCIpXG4gICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIjFweFwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGVudEJvcmRlcldpZHRoKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250ZW50Qm9yZGVyV2lkdGggPSB2YWx1ZSB8fCBcIjFweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdDb25maWd1cmUgdGhlIHN0YXJ0LCBtaWRkbGUsIGFuZCBlbmQgcG9pbnRzIG9mIHRoZSBkeW5hbWljIGNvbG9yIGdyYWRpZW50LiBDb2xvcnMgd2lsbCBiZSBibGVuZGVkIHNtb290aGx5IGJldHdlZW4gdGhlc2UgcG9pbnRzLicsIGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicgfSk7XG5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiR3JhZGllbnQgTWlkcG9pbnRcIikuc2V0RGVzYyhcIlRoZSBudW1iZXIgb2YgdGFza3MgdGhhdCBzaG91bGQgaGF2ZSB0aGUgZXhhY3QgJ01pZCcgY29sb3IuIERlZmF1bHQgaXMgNS5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tIZWF0bWFwTWlkcG9pbnQpKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0hlYXRtYXBNaWRwb2ludCA9IE51bWJlcih2YWx1ZSkgfHwgNTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiR3JhZGllbnQgTWF4cG9pbnRcIikuc2V0RGVzYyhcIlRoZSBudW1iZXIgb2YgdGFza3MgdGhhdCBzaG91bGQgaGF2ZSB0aGUgZXhhY3QgJ0VuZCcgY29sb3IuIEFueSBkYXkgd2l0aCBtb3JlIHRhc2tzIHdpbGwgYWxzbyB1c2UgdGhlIGVuZCBjb2xvci4gRGVmYXVsdCBpcyAxMC5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tIZWF0bWFwTWF4cG9pbnQpKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0hlYXRtYXBNYXhwb2ludCA9IE51bWJlcih2YWx1ZSkgfHwgMTA7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG5cbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJIZWF0bWFwOiBTdGFydCBDb2xvciAoMSBUYXNrKVwiLCBcIlRoZSBjb2xvciBmb3IgZGF5cyB3aXRoIDEgdGFzay5cIiwgXCJ0YXNrSGVhdG1hcFN0YXJ0Q29sb3JcIik7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiSGVhdG1hcDogTWlkIENvbG9yXCIsIFwiVGhlIGNvbG9yIGZvciBkYXlzIG1lZXRpbmcgdGhlICdNaWRwb2ludCcgdGFzayBjb3VudC5cIiwgXCJ0YXNrSGVhdG1hcE1pZENvbG9yXCIpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIkhlYXRtYXA6IEVuZCBDb2xvclwiLCBcIlRoZSBjb2xvciBmb3IgZGF5cyBtZWV0aW5nIHRoZSAnTWF4cG9pbnQnIHRhc2sgY291bnQuXCIsIFwidGFza0hlYXRtYXBFbmRDb2xvclwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJUYXNrIGJhZGdlIGZvbnQgc2l6ZVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJUaGUgZm9udCBzaXplIGZvciB0aGUgbnVtYmVyIGluc2lkZSB0aGUgdGFzayBiYWRnZS4gRGVmYXVsdCBpcyAxMHB4LlwiKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tCYWRnZUZvbnRTaXplKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0JhZGdlRm9udFNpemUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJUYXNrIGJhZGdlIGNvbG9yXCIsIFwiVGhlIGJhY2tncm91bmQgY29sb3Igb2YgdGhlIHRhc2sgY291bnQgYmFkZ2UuXCIsIFwidGFza0JhZGdlQ29sb3JcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJUYXNrIGJhZGdlIGZvbnQgY29sb3JcIiwgXCJUaGUgY29sb3Igb2YgdGhlIG51bWJlciBpbnNpZGUgdGhlIHRhc2sgY291bnQgYmFkZ2UuXCIsIFwidGFza0JhZGdlRm9udENvbG9yXCIpO1xuICAgICAgICAqL1xuICAgIH1cblxuICAgIC8vIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGEgbWV0aG9kIHdpdGhpbiB5b3VyIFNldHRpbmdUYWIgY2xhc3NcbiAgICByZW5kZXJEcmFnZ2FibGVUYWJzKGNvbnRhaW5lcikge1xuICAgICAgICBjb250YWluZXIuZW1wdHkoKTsgLy8gQ2xlYXIgdGhlIGNvbnRhaW5lciBmaXJzdFxuXG4gICAgICAgIC8vIERlZmluZSBsYWJlbHMgZm9yIHlvdXIgdGFic1xuICAgICAgICBjb25zdCB0YWJMYWJlbHMgPSB7XG4gICAgICAgICAgICBzY3JhdGNoOiAnU2NyYXRjaFBhZCcsXG4gICAgICAgICAgICBub3RlczogJ05vdGVzJyxcbiAgICAgICAgICAgIHRhc2tzOiAnVGFza3MnLFxuICAgICAgICAgICAgYXNzZXRzOiAnQXNzZXRzJ1xuICAgICAgICAgICAgLy8gQWRkIG90aGVyIHRhYnMgaWYgeW91IGhhdmUgdGhlbVxuICAgICAgICB9O1xuXG4gICAgICAgIGxldCBkcmFnZ2VkSXRlbSA9IG51bGw7IC8vIFRvIGtlZXAgdHJhY2sgb2YgdGhlIGl0ZW0gYmVpbmcgZHJhZ2dlZFxuXG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYk9yZGVyLmZvckVhY2goKGtleSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNldHRpbmdJdGVtID0gY29udGFpbmVyLmNyZWF0ZURpdignZHJhZ2dhYmxlLWl0ZW0nKTtcbiAgICAgICAgICAgIHNldHRpbmdJdGVtLmRyYWdnYWJsZSA9IHRydWU7XG4gICAgICAgICAgICBzZXR0aW5nSXRlbS5kYXRhc2V0LnRhYktleSA9IGtleTtcblxuICAgICAgICAgICAgLy8gQWRkIGEgZHJhZyBoYW5kbGUgaWNvblxuICAgICAgICAgICAgY29uc3QgaGFuZGxlID0gc2V0dGluZ0l0ZW0uY3JlYXRlRGl2KCdkcmFnLWhhbmRsZScpO1xuICAgICAgICAgICAgc2V0SWNvbihoYW5kbGUsICdncmlwLXZlcnRpY2FsJyk7XG5cbiAgICAgICAgICAgIC8vIEFkZCB0aGUgdGFiJ3MgbmFtZVxuICAgICAgICAgICAgc2V0dGluZ0l0ZW0uY3JlYXRlU3Bhbih7IHRleHQ6IHRhYkxhYmVsc1trZXldIHx8IGtleSB9KTtcblxuICAgICAgICAgICAgLy8gLS0tIERyYWcgYW5kIERyb3AgRXZlbnQgTGlzdGVuZXJzIC0tLVxuXG4gICAgICAgICAgICBzZXR0aW5nSXRlbS5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGRyYWdnZWRJdGVtID0gc2V0dGluZ0l0ZW07XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBzZXR0aW5nSXRlbS5hZGRDbGFzcygnZHJhZ2dpbmcnKSwgMCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgc2V0dGluZ0l0ZW0uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZHJhZ2dlZEl0ZW0/LnJlbW92ZUNsYXNzKCdkcmFnZ2luZycpO1xuICAgICAgICAgICAgICAgIGRyYWdnZWRJdGVtID0gbnVsbDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzZXR0aW5nSXRlbS5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRyYWdnaW5nSXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kcmFnZ2luZycpO1xuICAgICAgICAgICAgICAgIGlmIChkcmFnZ2luZ0l0ZW0gJiYgZHJhZ2dpbmdJdGVtICE9PSBzZXR0aW5nSXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGJvdW5kaW5nIGJveCBvZiB0aGUgaXRlbSB3ZSdyZSBkcmFnZ2luZyBvdmVyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBzZXR0aW5nSXRlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UgYXJlIGluIHRoZSB0b3Agb3IgYm90dG9tIGhhbGYgb2YgdGhlIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNBZnRlciA9IGUuY2xpZW50WSA+IHJlY3QudG9wICsgcmVjdC5oZWlnaHQgLyAyO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0FmdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnNlcnQgdGhlIGRyYWdnZWQgaXRlbSBhZnRlciB0aGUgY3VycmVudCBvbmVcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdJdGVtLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGRyYWdnaW5nSXRlbSwgc2V0dGluZ0l0ZW0ubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5zZXJ0IHRoZSBkcmFnZ2VkIGl0ZW0gYmVmb3JlIHRoZSBjdXJyZW50IG9uZVxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ0l0ZW0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZHJhZ2dpbmdJdGVtLCBzZXR0aW5nSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgc2V0dGluZ0l0ZW0uYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld09yZGVyID0gQXJyYXkuZnJvbShjb250YWluZXIuY2hpbGRyZW4pLm1hcChjaGlsZCA9PiBjaGlsZC5kYXRhc2V0LnRhYktleSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiT3JkZXIgPSBuZXdPcmRlcjtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdUYWIgb3JkZXIgc2F2ZWQhJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyVGFic1NldHRpbmdzKCkge1xuICAgICAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGVudEVsO1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJHZW5lcmFsIFRhYiBTZXR0aW5nc1wiIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJEZXNrdG9wIHRhYiBkaXNwbGF5IHN0eWxlXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkNob29zZSBob3cgdGFiIG5hbWVzIGFyZSBkaXNwbGF5ZWQgaW4gdGhlIGRlc2t0b3AgY2xpZW50LlwiKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbigndGV4dCcsICdUZXh0IE9ubHknKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2ljb25BbmRUZXh0JywgJ0ljb24gYW5kIFRleHQnKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2ljb25Pbmx5JywgJ0ljb24gT25seScpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYkRpc3BsYXlNb2RlKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiRGlzcGxheU1vZGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJNb2JpbGUgdGFiIGRpc3BsYXkgc3R5bGVcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiQ2hvb3NlIGEgZGlmZmVyZW50LCBvZnRlbiBtb3JlIGNvbXBhY3QsIGRpc3BsYXkgc3R5bGUgZm9yIHNtYWxsZXIgbW9iaWxlIC8gdGFibGV0IHNjcmVlbnMuXCIpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCd0ZXh0JywgJ1RleHQgT25seScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignaWNvbkFuZFRleHQnLCAnSWNvbiBhbmQgVGV4dCcpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignaWNvbk9ubHknLCAnSWNvbiBPbmx5JylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlVGFiRGlzcGxheU1vZGUpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVUYWJEaXNwbGF5TW9kZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJUYWIgdGl0bGUgZm9udCBzaXplXCIpLnNldERlc2MoXCJGb250IHNpemUgZm9yIHRoZSB0YWIgdGl0bGVzIChTY3JhdGNoUGFkLCBOb3RlcywgVGFza3MpLiBEZWZhdWx0IGlzIDE1cHguXCIpLmFkZFRleHQodGV4dCA9PiB0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYlRpdGxlRm9udFNpemUpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiVGl0bGVGb250U2l6ZSA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkJvbGQgdGFiIHRpdGxlc1wiKS5zZXREZXNjKFwiVG9nZ2xlcyBib2xkIGZvbnQgd2VpZ2h0IGZvciB0aGUgdGFiIHRpdGxlcy5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiVGl0bGVCb2xkKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYlRpdGxlQm9sZCA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuXG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJBY3RpdmUgVGFiIEluZGljYXRvclwiLCBcIlVuZGVybGluZSBjb2xvciBmb3IgdGhlIGFjdGl2ZSB0YWIuXCIsIFwic2VsZWN0ZWRUYWJDb2xvclwiKTtcblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3NldHRpbmctc3BhY2VyJyk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnVGFiIE9yZGVyJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdEcmFnIGFuZCBkcm9wIHRoZSB0YWJzIHRvIHNldCB0aGVpciBkaXNwbGF5IG9yZGVyLicpO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhIGNvbnRhaW5lciBmb3Igb3VyIGRyYWdnYWJsZSBsaXN0XG4gICAgICAgIGNvbnN0IHRhYk9yZGVyQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCd0YWItb3JkZXItY29udGFpbmVyJyk7XG4gICAgICAgIHRoaXMucmVuZGVyRHJhZ2dhYmxlVGFicyh0YWJPcmRlckNvbnRhaW5lcik7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRGl2KCdzZXR0aW5nLXNwYWNlcicpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiVGFiIFZpc2liaWxpdHlcIikuc2V0SGVhZGluZygpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJTaG93IFRhc2tzIHRhYlwiKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYlZpc2liaWxpdHkudGFza3MpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJWaXNpYmlsaXR5LnRhc2tzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2hvdyBTY3JhdGNoUGFkIHRhYlwiKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYlZpc2liaWxpdHkuc2NyYXRjaClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYlZpc2liaWxpdHkuc2NyYXRjaCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJTaG93IE5vdGVzIHRhYlwiKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYlZpc2liaWxpdHkubm90ZXMpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJWaXNpYmlsaXR5Lm5vdGVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2hvdyBBc3NldHMgdGFiXCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiVmlzaWJpbGl0eS5hc3NldHMpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJWaXNpYmlsaXR5LmFzc2V0cyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cblxuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1RhYiBJY29ucycgfSk7XG5cbiAgICAgICAgY29uc3QgdGFiSWNvblNldHRpbmdzID0gW1xuICAgICAgICAgICAgeyBrZXk6ICdzY3JhdGNoJywgbmFtZTogJ1NjcmF0Y2hQYWQgdGFiIGljb24nIH0sXG4gICAgICAgICAgICB7IGtleTogJ25vdGVzJywgbmFtZTogJ05vdGVzIHRhYiBpY29uJyB9LFxuICAgICAgICAgICAgeyBrZXk6ICd0YXNrcycsIG5hbWU6ICdUYXNrcyB0YWIgaWNvbicgfSxcbiAgICAgICAgICAgIHsga2V5OiAncGlubmVkJywgbmFtZTogJ1Bpbm5lZCBWaWV3IHRhYiBpY29uJyB9LFxuICAgICAgICAgICAgeyBrZXk6ICdhc3NldHMnLCBuYW1lOiAnQXNzZXRzIFZpZXcgdGFiIGljb24nIH1cbiAgICAgICAgXTtcblxuICAgICAgICAvLyBMb29wIHRocm91Z2ggZWFjaCB0YWIgaWNvbiBzZXR0aW5nIHRvIGNyZWF0ZSBpdHMgaW5wdXQgZmllbGQgYW5kIHJlc2V0IGJ1dHRvblxuICAgICAgICB0YWJJY29uU2V0dGluZ3MuZm9yRWFjaChzID0+IHtcbiAgICAgICAgICAgIGxldCB0ZXh0Q29tcG9uZW50OyAvLyBWYXJpYWJsZSB0byBob2xkIHRoZSB0ZXh0IGNvbXBvbmVudCByZWZlcmVuY2VcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUocy5uYW1lKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFbnRlciBhbnkgTHVjaWRlIGljb24gbmFtZS4nKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0Q29tcG9uZW50ID0gdGV4dDsgLy8gU3RvcmUgdGhlIHRleHQgY29tcG9uZW50IHNvIHRoZSBidXR0b24gY2FuIGFjY2VzcyBpdFxuICAgICAgICAgICAgICAgICAgICB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiSWNvbnNbcy5rZXldIHx8IERFRkFVTFRfU0VUVElOR1MudGFiSWNvbnNbcy5rZXldKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYkljb25zW3Mua2V5XSA9IHZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oJ3JvdGF0ZS1jY3cnKSAvLyBBIGZpdHRpbmcgaWNvbiBmb3IgXCJyZXNldFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcCgnUmVzZXQgdG8gZGVmYXVsdCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMS4gR2V0IHRoZSBkZWZhdWx0IHZhbHVlIGZvciB0aGlzIHNwZWNpZmljIGtleVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IERFRkFVTFRfU0VUVElOR1MudGFiSWNvbnNbcy5rZXldO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMi4gVXBkYXRlIHRoZSBzZXR0aW5nIGluIHRoZSBwbHVnaW4ncyBkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiSWNvbnNbcy5rZXldID0gZGVmYXVsdFZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMy4gVmlzdWFsbHkgdXBkYXRlIHRoZSB0ZXh0IGJveCB0byBzaG93IHRoZSBkZWZhdWx0IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRleHRDb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENvbXBvbmVudC5zZXRWYWx1ZShkZWZhdWx0VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDQuIFNhdmUgdGhlIHNldHRpbmcgYW5kIHVwZGF0ZSB0aGUgcGx1Z2luIHZpZXdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGAnJHtzLm5hbWV9JyByZXNldCB0byBkZWZhdWx0LmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIC0tLSBLZWVwIHlvdXIgZXhpc3RpbmcgXCJSZXNldCBBbGxcIiBidXR0b24gLS0tXG4gICAgICAgIC8vIFRoaXMgYnV0dG9uJ3MgbG9naWMgZG9lcyBub3QgbmVlZCB0byBjaGFuZ2UuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1Jlc2V0IEFsbCBUYWIgSWNvbnMnKVxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdSZXNldHMgYWxsIHRhYiBpY29ucyB0byB0aGVpciBvcmlnaW5hbCB2YWx1ZXMnKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29uZmlybSB3aXRoIHRoZSB1c2VyIGJlZm9yZSByZXNldHRpbmcgYWxsXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcmVzZXQgYWxsIHRhYiBpY29ucz8nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiSWNvbnMgPSB7IC4uLkRFRkFVTFRfU0VUVElOR1MudGFiSWNvbnMgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQWxsIHRhYiBpY29ucyBoYXZlIGJlZW4gcmVzZXQuJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlZnJlc2ggdGhlIHNldHRpbmdzIGRpc3BsYXkgdG8gc2hvdyB0aGUgY2hhbmdlc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLmRpc3BsYXkoKTsgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hEaXNwbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICB9XG5cbiAgICByZW5kZXJTY3JhdGNocGFkU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWw7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIlNjcmF0Y2hQYWQgVGFiIFNldHRpbmdzXCIgfSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiRnVuY3Rpb25hbGl0eVwiKS5zZXRIZWFkaW5nKCk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiU2NyYXRjaFBhZCB0YWIgY2xpY2sgYWN0aW9uXCIpLnNldERlc2MoXCJXaGF0IHRvIGRvIHdoZW4gdGhlIFNjcmF0Y2hQYWQgdGFiIGlzIGNsaWNrZWQgd2hpbGUgaXQncyBhbHJlYWR5IGFjdGl2ZS5cIikuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd24uYWRkT3B0aW9uKCduZXctdGFiJywgJ09wZW4gaW4gYSBuZXcgdGFiJykuYWRkT3B0aW9uKCdjdXJyZW50LXRhYicsICdPcGVuIGluIHRoZSBjdXJyZW50IHRhYicpLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWRPcGVuQWN0aW9uKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaHBhZE9wZW5BY3Rpb24gPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJTY3JhdGNoUGFkIG5vdGUgcGF0aFwiKS5zZXREZXNjKFwiVGhlIGZ1bGwgcGF0aCB0byB0aGUgbm90ZSB0aGF0IHRoZSBTY3JhdGNoUGFkIHRhYiB3aWxsIHJlYWQgZnJvbSBhbmQgd3JpdGUgdG8uXCIpLmFkZFRleHQodGV4dCA9PiB7IHRoaXMuY3JlYXRlUGF0aFN1Z2dlc3Rlcih0ZXh0LmlucHV0RWwsIChxKSA9PiB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGYgPT4gIXEgfHwgZi5wYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocSkpLm1hcChmID0+IGYucGF0aCkpOyB0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZpeGVkTm90ZUZpbGUpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZml4ZWROb3RlRmlsZSA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSk7IH0pO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlNob3cgcHJldmlldy9lZGl0IGJ1dHRvblwiKS5zZXREZXNjKFwiU2hvdyB0aGUgYnV0dG9uIHRvIHRvZ2dsZSBiZXR3ZWVuIHBsYWluIHRleHQgZWRpdGluZyBhbmQgYSByZW5kZXJlZCBNYXJrZG93biBwcmV2aWV3LlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNocGFkPy5zaG93UHJldmlld1RvZ2dsZSA/PyBmYWxzZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaHBhZCkgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaHBhZCA9IHt9OyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNocGFkLnNob3dQcmV2aWV3VG9nZ2xlID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiU2hvdyAnKyBUYXNrJyBidXR0b25cIikuc2V0RGVzYyhcIlNob3cgdGhlIGJ1dHRvbiBpbiB0aGUgc2NyYXRjaHBhZCBhcmVhIHRvIHF1aWNrbHkgYWRkIGEgbmV3IHRhc2suXCIpLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQ/LnNob3dBZGRUYXNrQnV0dG9uID8/IHRydWUpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQpIHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQgPSB7fTsgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaHBhZC5zaG93QWRkVGFza0J1dHRvbiA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuXG4gICAgICAgIGNvbnN0IHRhc2tUaXRsZVNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlRhc2sgQ3JlYXRpb24gRm9ybWF0XCIpO1xuICAgICAgICB0YXNrVGl0bGVTZXR0aW5nLmRlc2NFbC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICAgICAgVXNlIHRoZSBmb2xsb3dpbmcgdG8gaW5zZXJ0IGFzIHBsYWNlaG9sZGVycyBmb3IgdGhlIHRhc2sgY3JlYXRpb24gZGF0ZTpcbiAgICAgICAgICAgICAgICA8YnI+PGNvZGU+e3RvZGF5fTwvY29kZT4sIDxjb2RlPnt0b21vcnJvd308L2NvZGU+XG4gICAgICAgICAgICAgICAgPGJyPjxjb2RlPnttb25kYXl9PC9jb2RlPiwgPGNvZGU+e3R1ZXNkYXl9PC9jb2RlPiwgZXRjLiBmb3IgdGhlIG5leHQgdXBjb21pbmcgZGF5LlxuICAgICAgICAgICAgICAgIDxicj48Y29kZT57ZGF0ZX0rNzwvY29kZT4gb3IgPGNvZGU+e2RhdGV9LTM8L2NvZGU+IGZvciBkYXRlcyBpbiB0aGUgZnV0dXJlIG9yIHBhc3QuXG4gICAgICAgICAgICAgICAgPGJyPlxuICAgICAgICAgICAgICAgIDxicj5Vc2UgPGNvZGU+fDwvY29kZT4gdG8gc2V0IHRoZSBmaW5hbCBjdXJzb3IgcG9zaXRpb24uXG4gICAgICAgICAgICBgO1xuXG4gICAgICAgIHRhc2tUaXRsZVNldHRpbmcuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIi0gWyBdIFwiKVxuICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQ/LnRhc2tGb3JtYXQgfHwgXCItIFsgXSBcIilcbiAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaHBhZCA9IHt9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNocGFkLnRhc2tGb3JtYXQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkFwcGVhcmFuY2VcIikuc2V0SGVhZGluZygpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlNjcmF0Y2hQYWQgZm9udCBzaXplXCIpLnNldERlc2MoXCJGb250IHNpemUgZm9yIHRoZSB0ZXh0IGluc2lkZSB0aGUgU2NyYXRjaFBhZCBlZGl0b3IuIERlZmF1bHQgaXMgMTRweC5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaEZvbnRTaXplKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hGb250U2l6ZSA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkJvbGQgU2NyYXRjaFBhZCB0ZXh0XCIpLnNldERlc2MoXCJUb2dnbGVzIGJvbGQgZm9udCB3ZWlnaHQgZm9yIHRoZSB0ZXh0IGluIHRoZSBTY3JhdGNoUGFkLlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNoQm9sZCkub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNoQm9sZCA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlNjcmF0Y2hQYWQgZm9udCBmYW1pbHlcIikuc2V0RGVzYyhcIkV4YW1wbGVzOiBtb25vc3BhY2UsIEFyaWFsLCAnQ291cmllciBOZXcnLiBMZWF2ZSBibGFuayB0byB1c2UgdGhlIGVkaXRvciBkZWZhdWx0LlwiKS5hZGRUZXh0KHRleHQgPT4gdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNoRm9udEZhbWlseSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hGb250RmFtaWx5ID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJTZWFyY2ggaGlnaGxpZ2h0IGNvbG9yXCIsIFwiVGhlIGJhY2tncm91bmQgY29sb3IgZm9yIHRoZSBzZWxlY3RlZCBzZWFyY2ggcmVzdWx0IGluIHRoZSBTY3JhdGNoUGFkLlwiLCBcInNjcmF0Y2hwYWRIaWdobGlnaHRDb2xvclwiKTtcblxuICAgIH1cblxuICAgIHJlbmRlck5vdGVzU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWw7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIk5vdGVzIFRhYiBTZXR0aW5nc1wiIH0pO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkZ1bmN0aW9uYWxpdHlcIikuc2V0SGVhZGluZygpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIk5vdGVzIHRhYiBvcGVuIGJlaGF2aW9yXCIpLnNldERlc2MoXCJDaG9vc2UgaG93IHRvIG9wZW4gbm90ZXMgd2hlbiBjbGlja2VkIGZyb20gdGhlIG5vdGVzIGxpc3QuXCIpLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duLmFkZE9wdGlvbignbmV3LXRhYicsICdPcGVuIGluIGEgbmV3IHRhYicpLmFkZE9wdGlvbignY3VycmVudC10YWInLCAnT3BlbiBpbiB0aGUgY3VycmVudCB0YWInKS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub3Rlc09wZW5BY3Rpb24pLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub3Rlc09wZW5BY3Rpb24gPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJOb3RlcyBsb29rYmFjayBkYXlzXCIpLnNldERlc2MoXCJIb3cgbWFueSBkYXlzIGJhY2sgdGhlIE5vdGVzIHRhYiBzaG91bGQgbG9vayBmb3IgY3JlYXRlZCBvciBtb2RpZmllZCBub3Rlcy4gRGVmYXVsdCBpcyA3LlwiKS5hZGRUZXh0KHRleHQgPT4gdGV4dC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZXNMb29rYmFja0RheXMpKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVzTG9va2JhY2tEYXlzID0gTnVtYmVyKHZhbHVlKSB8fCA3OyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiQXBwZWFyYW5jZVwiKS5zZXRIZWFkaW5nKCk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiU2hvdyBub3RlIHN0YXR1cyBkb3RzXCIpLnNldERlc2MoXCJTaG93IGEgY29sb3JlZCBkb3QgbmV4dCB0byBlYWNoIG5vdGUsIGluZGljYXRpbmcgaWYgaXQgd2FzIHJlY2VudGx5IGNyZWF0ZWQgb3IgbW9kaWZpZWQuXCIpLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dOb3RlU3RhdHVzRG90cykub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Tm90ZVN0YXR1c0RvdHMgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIkNyZWF0ZWQgTm90ZSBEb3RcIiwgXCJDb2xvciBmb3IgdGhlIGRvdCBvbiByZWNlbnRseSBjcmVhdGVkIG5vdGVzIGluIHRoZSBsaXN0LlwiLCBcIm5vdGVDcmVhdGVkQ29sb3JcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJNb2RpZmllZCBOb3RlIERvdFwiLCBcIkNvbG9yIGZvciB0aGUgZG90IG9uIHJlY2VudGx5IG1vZGlmaWVkIG5vdGVzIGluIHRoZSBsaXN0LlwiLCBcIm5vdGVNb2RpZmllZENvbG9yXCIpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlNob3cgbm90ZSB0b29sdGlwc1wiKS5zZXREZXNjKFwiU2hvdyBhIGRldGFpbGVkIHRvb2x0aXAgb24gaG92ZXIsIGNvbnRhaW5pbmcgbm90ZSBwYXRoLCBkYXRlcywgc2l6ZSwgYW5kIHRhZ3MuXCIpLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dOb3RlVG9vbHRpcHMpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd05vdGVUb29sdGlwcyA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIk5vdGVzIGxpc3QgZm9udCBzaXplXCIpLnNldERlc2MoXCJGb250IHNpemUgZm9yIG5vdGUgdGl0bGVzIGluIHRoZSBsaXN0LiBEZWZhdWx0IGlzIDE0cHguXCIpLmFkZFRleHQodGV4dCA9PiB0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVzRm9udFNpemUpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZXNGb250U2l6ZSA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkJvbGQgbm90ZSB0aXRsZXNcIikuc2V0RGVzYyhcIlRvZ2dsZXMgYm9sZCBmb250IHdlaWdodCBmb3Igbm90ZSB0aXRsZXMgaW4gdGhlIGxpc3QuXCIpLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVzQm9sZCkub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub3Rlc0JvbGQgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIk5vdGUvVGFzayBIb3ZlciBDb2xvclwiLCBcIkJhY2tncm91bmQgY29sb3Igd2hlbiBob3ZlcmluZyBhIG5vdGUgb3IgdGFzayBpbiBhIGxpc3QuXCIsIFwibm90ZXNIb3ZlckNvbG9yXCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZUlnbm9yZWRGb2xkZXJMaXN0KGNvbnRhaW5lckVsLCBcIklnbm9yZSBmb2xkZXJzIGluIE5vdGVzIHRhYlwiLCBcIkZpbGVzIGluIHRoZXNlIGZvbGRlcnMgd2lsbCBub3QgYXBwZWFyIGluIHRoZSAnTm90ZXMnIGxpc3QuXCIsICdpZ25vcmVGb2xkZXJzJyk7XG5cbiAgICB9XG5cbiAgICByZW5kZXJQaW5uZWROb3Rlc1NldHRpbmdzKCkge1xuICAgICAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGVudEVsOyAvLyBBbGwgc2V0dGluZ3Mgd2lsbCBiZSByZW5kZXJlZCBpbnRvIHRoaXMgZWxlbWVudFxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDEnLCB7IHRleHQ6ICdQaW5uZWQgTm90ZXMgU2V0dGluZ3MnIH0pO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZSgnRnVuY3Rpb25hbGl0eScpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlBpbm5lZCBub3RlcyB0YWdcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiVGhlIHRhZyB0byB1c2UgZm9yIHBpbm5lZCBub3RlcywgZW50ZXIgaW4gdGhlIHRleHQgYm94IHdpdGhvdXQgdGhlICcjJy4gRm9yIG5vdGVzIHRvIGFwcGVhciBpbiB0aGUgcGlubmVkIHRhYiwgKGFjY2Vzc2VkIHdpdGggYW5vdGhlciBjbGljayBvbiB0aGUgbm90ZXMgdGFiIGljb24gb25jZSBpdCBoYXMgZm9jdXMpLCBhbmQgaWYgeW91IHNldCAncGluJyBhcyB0aGUgdGFnIG5hbWUsIHRoZW4gaW4geW91ciBub3RlcyBhZGQgI3BpbiBpbiB0aGUgYm9keSBvciBwcm9wZXJ0aWVzIHRhZyBzZWN0aW9uLiBEZWZhdWx0IGlzICdwaW4nLlwiKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnBpblRhZylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnBpblRhZyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoJ1NvcnQgT3JkZXInKS5zZXRIZWFkaW5nKCk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0RlZmF1bHQgc29ydCBvcmRlcicpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkNob29zZSB0aGUgZGVmYXVsdCBzb3J0IG9yZGVyIGZvciBwaW5uZWQgbm90ZXMgd2hlbiB0aGUgcGx1Z2luIGlzIGxvYWRlZC4gVG8gY2hhbmdlIHRoZSBvcmRlciBjbGljayBvbiB0aGUgUElOTkVEIE5PVEVTIHRpdGxlIGluIHRoZSBtYWluIHZpZXcuXCIpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdhLXonLCAnQS1aIChEZWZhdWx0KScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignei1hJywgJ1otQScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY3VzdG9tJywgJ0N1c3RvbSBPcmRlcicpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnBpbm5lZE5vdGVzU29ydE9yZGVyKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucGlubmVkTm90ZXNTb3J0T3JkZXIgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIEFERCBUSElTIE5FVyBTRVRUSU5HIEhFUkU6XG4gICAgICAgIGNvbnN0IGlzTWFjID0gUGxhdGZvcm0uaXNNYWNPUztcbiAgICAgICAgY29uc3QgbW9kaWZpZXJLZXkgPSBpc01hYyA/ICdPcHRpb24gKOKMpSknIDogJ0N0cmwnO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0hvdyB0byBjaGFuZ2UgdGhlIHNvcnQgb3JkZXIgaW4gdGhlIG1haW4gdmlldycpXG4gICAgICAgICAgICAuc2V0RGVzYyhgQ2xpY2sgdGhlIFwiUElOTkVEIE5PVEVTXCIgaGVhZGVyIGluIHRoZSBtYWluIHZpZXcgdG8gY3ljbGUgYmV0d2VlbiBBLVosIFotQSwgYW5kIEN1c3RvbSBzb3J0IG9yZGVycy5cXG5cXG5XaGVuIGluIEN1c3RvbSBvcmRlciwgaG9sZCAke21vZGlmaWVyS2V5fSBhbmQgZHJhZyBub3RlcyB0byByZW9yZGVyIHRoZW0uYCk7XG5cblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdTZXQgQ3VzdG9tIE9yZGVyJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdEcmFnIGFuZCBkcm9wIHRoZSBub3RlcyBiZWxvdyB0byBzZXQgeW91ciBwcmVmZXJyZWQgbWFudWFsIG9yZGVyLicpO1xuXG4gICAgICAgIC8vIFRoaXMgY29udGFpbmVyIHdpbGwgaG9sZCB0aGUgZHJhZ2dhYmxlIGxpc3RcbiAgICAgICAgY29uc3QgZHJhZ2dhYmxlQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCdwaW5uZWQtbm90ZXMtb3JkZXItY29udGFpbmVyJyk7XG4gICAgICAgIHRoaXMucmVuZGVyRHJhZ2dhYmxlUGlubmVkTm90ZXMoZHJhZ2dhYmxlQ29udGFpbmVyKTtcbiAgICB9XG5cbiAgICByZW5kZXJBc3NldHNTZXR0aW5ncygpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyRWwgPSB0aGlzLmNvbnRlbnRFbDtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiQXNzZXRzIFRhYiBTZXR0aW5nc1wiIH0pO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQXNzZXQgb3BlbiBiZWhhdmlvclwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJDaG9vc2UgaG93IHRvIG9wZW4gYXNzZXRzIHdoZW4gY2xpY2tlZCBmcm9tIHRoZSBBc3NldHMgbGlzdC5cIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ25ldy10YWInLCAnT3BlbiBpbiBhIG5ldyB0YWInKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2N1cnJlbnQtdGFiJywgJ09wZW4gaW4gdGhlIGN1cnJlbnQgdGFiJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXNzZXRzT3BlbkFjdGlvbilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFzc2V0c09wZW5BY3Rpb24gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0RlZmF1bHQgYXNzZXRzIHZpZXcnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0Nob29zZSB0aGUgZGVmYXVsdCBsYXlvdXQgZm9yIHRoZSBhc3NldHMgdGFiLicpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdsaXN0JywgJ0xpc3QnKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dyaWQnLCAnR3JpZCcpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFzc2V0c0RlZmF1bHRWaWV3KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXNzZXRzRGVmYXVsdFZpZXcgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJBc3NldHMgbG9va2JhY2sgZGF5c1wiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJIb3cgbWFueSBkYXlzIGJhY2sgdGhlIEFzc2V0cyB0YWIgc2hvdWxkIGxvb2sgZm9yIGNyZWF0ZWQgb3IgbW9kaWZpZWQgbm90ZXMuIERlZmF1bHQgaXMgNy5cIilcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXNzZXRzTG9va2JhY2tEYXlzKSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hc3NldHNMb29rYmFja0RheXMgPSBOdW1iZXIodmFsdWUpIHx8IDc7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiSGlkZGVuIGFzc2V0IGZpbGUgdHlwZXNcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiQSBjb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiBmaWxlIGV4dGVuc2lvbnMgdG8gaGlkZSBmcm9tIHRoZSBBc3NldHMgdGFiIGFuZCBjYWxlbmRhciBkb3RzIChlLmcuLCBqcGcscGRmLHppcCkuIERlZmF1bHQgaXMgYmFzZSxjYW52YXMuXCIpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJlLmcuLCBqcGcscGRmLHppcFwiKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWRkZW5Bc3NldFR5cGVzKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZGVuQXNzZXRUeXBlcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJTaG93IGluZGljYXRvciBmb3IgdW51c2VkIGFzc2V0c1wiKS5zZXREZXNjKFwiQW4gaWNvbiB3aWxsIGFwcGVhciBuZXh0IHRvIGFzc2V0cyB0aGF0IGFyZSBub3QgbGlua2VkIG9yIGVtYmVkZGVkIGluIGFueSBub3RlLCBhbGxvd2luZyBmb3IgZWFzaWVyIGRldGVjdGlvbiB0byBkZWxldGUuXCIpLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dVbnVzZWRBc3NldHNJbmRpY2F0b3IpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VW51c2VkQXNzZXRzSW5kaWNhdG9yID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG5cbiAgICB9XG5cbiAgICByZW5kZXJUYXNrc1NldHRpbmdzKCkge1xuICAgICAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGVudEVsO1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJUYXNrcyBUYWIgU2V0dGluZ3NcIiB9KTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJEaXNwbGF5ICYgU29ydGluZ1wiKS5zZXRIZWFkaW5nKCk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiVGFzayBncm91cCBoZWFkaW5nIGZvbnQgc2l6ZVwiKS5zZXREZXNjKFwiVGhlIGZvbnQgc2l6ZSBmb3IgdGhlIGRhdGUvdGFnIGdyb3VwIGhlYWRpbmdzIChlLmcuLCAnT3ZlcmR1ZScsICdUb2RheScpLiBEZWZhdWx0IGlzIDEzcHguXCIpLmFkZFRleHQodGV4dCA9PiB0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tIZWFkaW5nRm9udFNpemUpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0hlYWRpbmdGb250U2l6ZSA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlRhc2sgdGV4dCBmb250IHNpemVcIikuc2V0RGVzYyhcIlRoZSBmb250IHNpemUgZm9yIHRoZSBpbmRpdmlkdWFsIHRhc2sgaXRlbXMgaW4gdGhlIGxpc3QuIERlZmF1bHQgaXMgMTRweC5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza1RleHRGb250U2l6ZSkub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrVGV4dEZvbnRTaXplID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiVHJ1bmNhdGUgbG9uZyB0YXNrIHRleHRcIikuc2V0RGVzYyhcIklmIGVuYWJsZWQsIGxvbmcgdGFza3Mgd2lsbCBiZSBzaG9ydGVuZWQgd2l0aCAnLi4uJy4gSWYgZGlzYWJsZWQsIHRoZXkgd2lsbCB3cmFwIHRvIG11bHRpcGxlIGxpbmVzLlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrVGV4dFRydW5jYXRlKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza1RleHRUcnVuY2F0ZSA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlNob3cgY29tcGxldGVkIHRhc2tzIGZvciBUb2RheVwiKS5zZXREZXNjKFwiSWYgZW5hYmxlZCwgdGFza3MgdGhhdCB5b3UgbWFya2VkIGFzIGNvbXBsZXRlIHRvZGF5IHdpbGwgYXBwZWFyIGluIHRoZSBsaXN0cyAocmVnYXJkbGVzcyBvZiB0aGVpciBkdWUgZGF0ZSkuXCIpLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dDb21wbGV0ZWRUYXNrc1RvZGF5KS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0NvbXBsZXRlZFRhc2tzVG9kYXkgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJUYXNrIHNvcnQgb3JkZXJcIikuc2V0RGVzYyhcIlRoZSBkZWZhdWx0IG9yZGVyIGZvciB0YXNrcyB3aXRoaW4gZWFjaCBncm91cC5cIikuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd24uYWRkT3B0aW9uKCdkdWVEYXRlJywgJ0J5IER1ZSBEYXRlIChlYXJsaWVzdCBmaXJzdCknKS5hZGRPcHRpb24oJ2EteicsICdBLVonKS5hZGRPcHRpb24oJ3otYScsICdaLUEnKS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrU29ydE9yZGVyKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza1NvcnRPcmRlciA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkdyb3VwIHRhc2tzIGJ5XCIpLnNldERlc2MoXCJDaG9vc2UgaG93IHRvIGdyb3VwIHRhc2tzIGluIHRoZSB2aWV3LiBTZWNvbmQtY2xpY2tpbmcgdGhlIFRhc2tzIHRhYiB3aWxsIGFsc28gdG9nZ2xlIHRoaXMuXCIpLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duLmFkZE9wdGlvbignZGF0ZScsICdEYXRlIChPdmVyZHVlLCBUb2RheSwgZXRjLiknKS5hZGRPcHRpb24oJ3RhZycsICdUYWcnKS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrR3JvdXBCeSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tHcm91cEJ5ID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB0aGlzLnJlZnJlc2hEaXNwbGF5KCk7IH0pKTtcblxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0dyb3VwQnkgPT09ICdkYXRlJykge1xuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJEYXRlIEdyb3VwcyB0byBTaG93XCIpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGVHcm91cHMgPSBbeyBrZXk6ICdvdmVyZHVlJywgbmFtZTogJ092ZXJkdWUnIH0sIHsga2V5OiAndG9kYXknLCBuYW1lOiAnVG9kYXknIH0sIHsga2V5OiAndG9tb3Jyb3cnLCBuYW1lOiAnVG9tb3Jyb3cnIH0sIHsga2V5OiAnbmV4dDdkYXlzJywgbmFtZTogJ05leHQgNyBEYXlzJyB9LCB7IGtleTogJ2Z1dHVyZScsIG5hbWU6ICdGdXR1cmUnIH0sXTtcbiAgICAgICAgICAgIGRhdGVHcm91cHMuZm9yRWFjaChnID0+IHsgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoZy5uYW1lKS5hZGRUb2dnbGUodCA9PiB0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tEYXRlR3JvdXBzVG9TaG93LmluY2x1ZGVzKGcua2V5KSkub25DaGFuZ2UoYXN5bmMgdiA9PiB7IGNvbnN0IGdyb3VwcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tEYXRlR3JvdXBzVG9TaG93OyBpZiAodiAmJiAhZ3JvdXBzLmluY2x1ZGVzKGcua2V5KSkgZ3JvdXBzLnB1c2goZy5rZXkpOyBlbHNlIGlmICghdikgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0RhdGVHcm91cHNUb1Nob3cgPSBncm91cHMuZmlsdGVyKGkgPT4gaSAhPT0gZy5rZXkpOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpOyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiQ29udGVudCAmIEFwcGVhcmFuY2VcIikuc2V0SGVhZGluZygpO1xuICAgICAgICB0aGlzLmNyZWF0ZUlnbm9yZWRGb2xkZXJMaXN0KGNvbnRhaW5lckVsLCBcIkV4Y2x1ZGUgZm9sZGVycyBmcm9tIFRhc2sgc2VhcmNoXCIsIFwiVGFza3MgaW4gdGhlc2UgZm9sZGVycyB3aWxsIG5vdCBhcHBlYXIgaW4gdGhlICdUYXNrcycgbGlzdC5cIiwgJ3Rhc2tJZ25vcmVGb2xkZXJzJyk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBtYWluIGhlYWRpbmcgZm9yIHRoaXMgc2VjdGlvblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdUYXNrIEdyb3VwIEljb25zJyB9KTtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdDdXN0b21pemUgdGhlIGljb24gZGlzcGxheWVkIG5leHQgdG8gZWFjaCB0YXNrIGdyb3VwIGhlYWRlci4nLCBjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nIH0pO1xuXG4gICAgICAgIC8vIERlZmluZSB0aGUgc2V0dGluZ3MgZm9yIGVhY2ggdGFzayBncm91cCBpY29uIGZvciBlYXN5IGl0ZXJhdGlvblxuICAgICAgICBjb25zdCB0YXNrR3JvdXBJY29uU2V0dGluZ3MgPSBbXG4gICAgICAgICAgICB7IGtleTogJ292ZXJkdWUnLCBuYW1lOiAnT3ZlcmR1ZSBpY29uJyB9LFxuICAgICAgICAgICAgeyBrZXk6ICd0b2RheScsIG5hbWU6ICdUb2RheSBpY29uJyB9LFxuICAgICAgICAgICAgeyBrZXk6ICd0b21vcnJvdycsIG5hbWU6ICdUb21vcnJvdyBpY29uJyB9LFxuICAgICAgICAgICAgeyBrZXk6ICduZXh0N2RheXMnLCBuYW1lOiAnTmV4dCA3IERheXMgaWNvbicgfSxcbiAgICAgICAgICAgIHsga2V5OiAnZnV0dXJlJywgbmFtZTogJ0Z1dHVyZSBpY29uJyB9LFxuICAgICAgICAgICAgeyBrZXk6ICdub0RhdGUnLCBuYW1lOiAnTm8gRHVlIERhdGUgaWNvbicgfSxcbiAgICAgICAgICAgIHsga2V5OiAndGFnJywgbmFtZTogJ1RhZyBHcm91cCBpY29uJyB9XG4gICAgICAgIF07XG5cbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIHRoZSBzZXR0aW5ncyB0byBjcmVhdGUgZWFjaCBpbnB1dCBmaWVsZCBhbmQgaXRzIHJlc2V0IGJ1dHRvblxuICAgICAgICB0YXNrR3JvdXBJY29uU2V0dGluZ3MuZm9yRWFjaChzID0+IHtcbiAgICAgICAgICAgIGxldCB0ZXh0Q29tcG9uZW50OyAvLyBUaGlzIHdpbGwgaG9sZCBhIHJlZmVyZW5jZSB0byB0aGUgdGV4dCBpbnB1dFxuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShzLm5hbWUpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoJ0VudGVyIGFueSBMdWNpZGUgaWNvbiBuYW1lLicpXG4gICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRDb21wb25lbnQgPSB0ZXh0OyAvLyBTdG9yZSB0aGUgcmVmZXJlbmNlXG4gICAgICAgICAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrR3JvdXBJY29uc1tzLmtleV0gfHwgREVGQVVMVF9TRVRUSU5HUy50YXNrR3JvdXBJY29uc1tzLmtleV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0dyb3VwSWNvbnNbcy5rZXldID0gdmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYWRkRXh0cmFCdXR0b24oYnV0dG9uID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbigncm90YXRlLWNjdycpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcCgnUmVzZXQgdG8gZGVmYXVsdCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMS4gR2V0IHRoZSBkZWZhdWx0IHZhbHVlIGZvciB0aGlzIHNwZWNpZmljIGljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSBERUZBVUxUX1NFVFRJTkdTLnRhc2tHcm91cEljb25zW3Mua2V5XTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDIuIFVwZGF0ZSB0aGUgc2V0dGluZyBvYmplY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrR3JvdXBJY29uc1tzLmtleV0gPSBkZWZhdWx0VmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAzLiBVcGRhdGUgdGhlIHRleHQgYm94IG9uIHNjcmVlbiBmb3IgaW5zdGFudCBmZWVkYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0Q29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRDb21wb25lbnQuc2V0VmFsdWUoZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA0LiBTYXZlIGFuZCB0cmlnZ2VyIGEgVUkgcmVmcmVzaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYCcke3MubmFtZX0nIHJlc2V0IHRvIGRlZmF1bHQuYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIHRoZSBcIlJlc2V0IEFsbFwiIGJ1dHRvbiBhdCB0aGUgZW5kIG9mIHRoZSBzZWN0aW9uXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1Jlc2V0IEFsbCBUYXNrIEdyb3VwIEljb25zJylcbiAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcCgnUmVzZXRzIGFsbCB0YXNrIGdyb3VwIGljb25zIHRvIHRoZWlyIG9yaWdpbmFsIHZhbHVlcycpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBDb25maXJtIHdpdGggdGhlIHVzZXIgdG8gcHJldmVudCBhY2NpZGVudGFsIHJlc2V0c1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHJlc2V0IGFsbCB0YXNrIGdyb3VwIGljb25zPycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXN0b3JlIHRoZSBlbnRpcmUgb2JqZWN0IGZyb20gZGVmYXVsdCBzZXR0aW5nc1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0dyb3VwSWNvbnMgPSB7IC4uLkRFRkFVTFRfU0VUVElOR1MudGFza0dyb3VwSWNvbnMgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQWxsIHRhc2sgZ3JvdXAgaWNvbnMgaGF2ZSBiZWVuIHJlc2V0LicpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JjZSBhIHJlZHJhdyBvZiB0aGUgc2V0dGluZ3MgcGFnZSB0byBzaG93IHRoZSByZXNldCB2YWx1ZXMgZXZlcnl3aGVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGlzcGxheSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiVGFzayBHcm91cCBCYWNrZ3JvdW5kc1wiKS5zZXRIZWFkaW5nKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJPdmVyZHVlXCIsIFwiQmFja2dyb3VuZCBjb2xvciBmb3IgdGhlICdPdmVyZHVlJyB0YXNrIGdyb3VwLlwiLCBcInRhc2tHcm91cENvbG9yT3ZlcmR1ZVwiKTtcbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIlRvZGF5XCIsIFwiQmFja2dyb3VuZCBjb2xvciBmb3IgdGhlICdUb2RheScgdGFzayBncm91cC5cIiwgXCJ0YXNrR3JvdXBDb2xvclRvZGF5XCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiVG9tb3Jyb3dcIiwgXCJCYWNrZ3JvdW5kIGNvbG9yIGZvciB0aGUgJ1RvbW9ycm93JyB0YXNrIGdyb3VwLlwiLCBcInRhc2tHcm91cENvbG9yVG9tb3Jyb3dcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJOZXh0IDcgRGF5c1wiLCBcIkJhY2tncm91bmQgY29sb3IgZm9yIHRoZSAnTmV4dCA3IERheXMnIHRhc2sgZ3JvdXAuXCIsIFwidGFza0dyb3VwQ29sb3JOZXh0N0RheXNcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJGdXR1cmVcIiwgXCJCYWNrZ3JvdW5kIGNvbG9yIGZvciAnRnV0dXJlJyB0YXNrIGdyb3VwLlwiLCBcInRhc2tHcm91cENvbG9yRnV0dXJlXCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiTm8gRHVlIERhdGVcIiwgXCJCYWNrZ3JvdW5kIGNvbG9yIGZvciB0aGUgJ05vIER1ZSBEYXRlJyB0YXNrIGdyb3VwLlwiLCBcInRhc2tHcm91cENvbG9yTm9EYXRlXCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiVGFnXCIsIFwiQmFja2dyb3VuZCBjb2xvciBmb3IgdGFzayBncm91cHMgd2hlbiBncm91cGVkIGJ5IHRhZy5cIiwgXCJ0YXNrR3JvdXBDb2xvclRhZ1wiKTtcbiAgICB9XG5cblxuXG5cblxuXG5cbiAgICByZW5kZXJJbXBvcnRFeHBvcnRUYWIoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWw7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkltcG9ydCAmIEV4cG9ydCBTZXR0aW5nc1wiIH0pO1xuXG4gICAgICAgIC8vIC0tLSBFWFBPUlQgLS0tXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJFeHBvcnQgU2V0dGluZ3NcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiU2F2ZSB5b3VyIHBsdWdpbiBzZXR0aW5ncyB0byBhIEpTT04gZmlsZS4gVHdvIG9wdGlvbnM6IGFsbCBwbHVnaW4gc2V0dGluZ3Mgb3IgdGhlbWUgc2V0dGlucyBvbmx5LiBUaGlzIGlzIHVzZWZ1bCBmb3IgYmFja2luZyB1cCBhbGwgeW91ciBzZXR0aW5ncyBvciBzaGFyaW5nIHlvdXIgdGhlbWUgY29uZmlndXJhdGlvbiB3aXRoIG90aGVycy5cIilcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IHtcbiAgICAgICAgICAgICAgICBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJFeHBvcnQgQWxsIFNldHRpbmdzXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwic2F2ZVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcChcIlNhdmUgYWxsIHBsdWdpbiBzZXR0aW5ncyB0byBhIGZpbGVcIilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5oYW5kbGVFeHBvcnQoJ2FsbCcpKTtcblxuICAgICAgICAgICAgICAgIGJ1dHRvbi5idXR0b25FbC5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkV4cG9ydCBUaGVtZSBPbmx5XCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwicGFsZXR0ZVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcChcIlNhdmUgb25seSBjb2xvcnMsIGZvbnRzLCBhbmQgc2l6ZXMgdG8gYSB0aGVtZSBmaWxlXCIpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHRoaXMuaGFuZGxlRXhwb3J0KCd0aGVtZScpKTtcblxuICAgICAgICAgICAgICAgIGJ1dHRvbi5idXR0b25FbC5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyAtLS0gSU1QT1JUIC0tLVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiSW1wb3J0IFNldHRpbmdzXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkxvYWQgc2V0dGluZ3MgZnJvbSBhIEpTT04gZmlsZS4gVGhpcyB3aWxsIG92ZXJ3cml0ZSB5b3VyIGN1cnJlbnQgc2V0dGluZ3MgYWZ0ZXIgY29uZmlybWF0aW9uLlwiKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkltcG9ydCBmcm9tIEZpbGVcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJ1cGxvYWRcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoXCJMb2FkIHNldHRpbmdzIGZyb20gYSAuanNvbiBmaWxlXCIpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVJbnB1dCA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZmlsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NlcHQ6ICcuanNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiAnZGlzcGxheTogbm9uZTsnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlSW1wb3J0KGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlSW5wdXQuY2xpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBidXR0b24uYnV0dG9uRWwuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUgZXhwb3J0IGZ1bmN0aW9uYWxpdHkuXG4gICAgICogQHBhcmFtIHsnYWxsJyB8ICd0aGVtZSd9IHR5cGUgVGhlIHR5cGUgb2YgZXhwb3J0IHRvIHBlcmZvcm0uXG4gICAgICovXG4gICAgaGFuZGxlRXhwb3J0KHR5cGUpIHtcbiAgICAgICAgbGV0IHNldHRpbmdzVG9FeHBvcnQ7XG4gICAgICAgIGxldCBmaWxlTmFtZSA9IGBjYWxlbmRhci1wZXJpb2Qtd2Vlay1ub3Rlcy1zZXR0aW5ncy5qc29uYDtcblxuICAgICAgICBpZiAodHlwZSA9PT0gJ3RoZW1lJykge1xuICAgICAgICAgICAgY29uc3QgdGhlbWVLZXlzID0gW1xuICAgICAgICAgICAgICAgIC8vIEdlbmVyYWwgYXBwZWFyYW5jZSBzZXR0aW5nc1xuICAgICAgICAgICAgICAgIFwiZm9udFNpemVcIixcbiAgICAgICAgICAgICAgICBcImRheU51bWJlckZvbnRTaXplXCIsXG4gICAgICAgICAgICAgICAgXCJuYXZCdXR0b25IZWlnaHRcIixcbiAgICAgICAgICAgICAgICBcImhlYWRlclJvd0JvbGRcIixcbiAgICAgICAgICAgICAgICBcInB3Q29sdW1uQm9sZFwiLFxuICAgICAgICAgICAgICAgIFwic2hvd0NhbGVuZGFyR3JpZExpbmVzXCIsXG4gICAgICAgICAgICAgICAgXCJzaG93UFdDb2x1bW5TZXBhcmF0b3JcIixcbiAgICAgICAgICAgICAgICBcInB3Q29sdW1uU2VwYXJhdG9yQ29sb3JcIixcblxuICAgICAgICAgICAgICAgIC8vIEFkZCBhbGwgdGhlIGZvbnQgY29sb3Igc2V0dGluZ3NcbiAgICAgICAgICAgICAgICBcInB3Q29sdW1uRm9udENvbG9yTGlnaHRcIixcbiAgICAgICAgICAgICAgICBcInB3Q29sdW1uRm9udENvbG9yRGFya1wiLFxuICAgICAgICAgICAgICAgIFwid2Vla051bWJlckZvbnRDb2xvckxpZ2h0XCIsXG4gICAgICAgICAgICAgICAgXCJ3ZWVrTnVtYmVyRm9udENvbG9yRGFya1wiLFxuICAgICAgICAgICAgICAgIFwiZGF5SGVhZGVyRm9udENvbG9yTGlnaHRcIixcbiAgICAgICAgICAgICAgICBcImRheUhlYWRlckZvbnRDb2xvckRhcmtcIixcbiAgICAgICAgICAgICAgICBcImRheUNlbGxGb250Q29sb3JMaWdodFwiLFxuICAgICAgICAgICAgICAgIFwiZGF5Q2VsbEZvbnRDb2xvckRhcmtcIixcbiAgICAgICAgICAgICAgICBcIm90aGVyTW9udGhGb250Q29sb3JMaWdodFwiLFxuICAgICAgICAgICAgICAgIFwib3RoZXJNb250aEZvbnRDb2xvckRhcmtcIixcblxuICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgaGlnaGxpZ2h0IHRvZ2dsZXNcbiAgICAgICAgICAgICAgICBcImhpZ2hsaWdodFRvZGF5RGF5SGVhZGVyXCIsXG4gICAgICAgICAgICAgICAgXCJoaWdobGlnaHRUb2RheVBXTGFiZWxcIixcblxuICAgICAgICAgICAgICAgIC8vIEFkZCBhbGwgdGhlIGhpZ2hsaWdodCBjb2xvciBzZXR0aW5nc1xuICAgICAgICAgICAgICAgIFwibW9udGhDb2xvckxpZ2h0XCIsXG4gICAgICAgICAgICAgICAgXCJtb250aENvbG9yRGFya1wiLFxuICAgICAgICAgICAgICAgIFwibWFpbk1vbnRoWWVhclRpdGxlRm9udFNpemVcIixcbiAgICAgICAgICAgICAgICBcIm1haW5Nb250aFllYXJUaXRsZUJvbGRcIixcblxuICAgICAgICAgICAgICAgIC8vIE90aGVyIHNldHRpbmdzXG4gICAgICAgICAgICAgICAgXCJ0YWJUaXRsZUZvbnRTaXplXCIsXG4gICAgICAgICAgICAgICAgXCJ0YWJUaXRsZUJvbGRcIixcbiAgICAgICAgICAgICAgICBcInNlbGVjdGVkVGFiQ29sb3JcIixcbiAgICAgICAgICAgICAgICBcInRvZGF5SGlnaGxpZ2h0Q29sb3JMaWdodFwiLFxuICAgICAgICAgICAgICAgIFwidG9kYXlIaWdobGlnaHRDb2xvckRhcmtcIixcbiAgICAgICAgICAgICAgICBcIm5vdGVzSG92ZXJDb2xvclwiLFxuICAgICAgICAgICAgICAgIFwiZGFpbHlOb3RlRG90Q29sb3JcIixcbiAgICAgICAgICAgICAgICBcIm5vdGVDcmVhdGVkQ29sb3JcIixcbiAgICAgICAgICAgICAgICBcIm5vdGVNb2RpZmllZENvbG9yXCIsXG4gICAgICAgICAgICAgICAgXCJvdGhlck5vdGVEb3RDb2xvclwiLFxuICAgICAgICAgICAgICAgIFwiY2FsZW5kYXJNb2RpZmllZERvdENvbG9yXCIsXG4gICAgICAgICAgICAgICAgXCJyb3dIaWdobGlnaHRDb2xvckxpZ2h0XCIsXG4gICAgICAgICAgICAgICAgXCJyb3dIaWdobGlnaHRDb2xvckRhcmtcIixcbiAgICAgICAgICAgICAgICAnd2Vla2VuZFNoYWRlQ29sb3JMaWdodCcsXG4gICAgICAgICAgICAgICAgJ3dlZWtlbmRTaGFkZUNvbG9yRGFyaycsXG4gICAgICAgICAgICAgICAgXCJkYXRlQ2VsbEhvdmVyQ29sb3JMaWdodFwiLFxuICAgICAgICAgICAgICAgIFwiZGF0ZUNlbGxIb3ZlckNvbG9yRGFya1wiLFxuICAgICAgICAgICAgICAgIFwiYXNzZXREb3RDb2xvclwiLFxuICAgICAgICAgICAgICAgIFwiY2FsZW5kYXJFdmVudERvdENvbG9yXCIsXG4gICAgICAgICAgICAgICAgXCJ0b2RheUhpZ2hsaWdodFN0eWxlXCIsXG4gICAgICAgICAgICAgICAgXCJ0b2RheUNpcmNsZUNvbG9yXCIsXG4gICAgICAgICAgICAgICAgXCJ3ZWVrbHlOb3RlRG90Q29sb3JcIixcbiAgICAgICAgICAgICAgICBcInNjcmF0Y2hGb250U2l6ZVwiLFxuICAgICAgICAgICAgICAgIFwic2NyYXRjaEJvbGRcIixcbiAgICAgICAgICAgICAgICBcInNjcmF0Y2hGb250RmFtaWx5XCIsXG4gICAgICAgICAgICAgICAgXCJzY3JhdGNocGFkSGlnaGxpZ2h0Q29sb3JcIixcbiAgICAgICAgICAgICAgICBcIm5vdGVzRm9udFNpemVcIixcbiAgICAgICAgICAgICAgICBcIm5vdGVzQm9sZFwiLFxuICAgICAgICAgICAgICAgIFwibm90ZXNMaW5lSGVpZ2h0XCIsXG4gICAgICAgICAgICAgICAgXCJzaG93Tm90ZVN0YXR1c0RvdHNcIixcbiAgICAgICAgICAgICAgICBcIm90aGVyTm90ZVBvcHVwRm9udFNpemVcIixcbiAgICAgICAgICAgICAgICBcImNhbGVuZGFyRG90U2l6ZVwiLFxuICAgICAgICAgICAgICAgIC8vIFRhc2sgc2V0dGluZ3NcbiAgICAgICAgICAgICAgICBcInRhc2tJbmRpY2F0b3JTdHlsZVwiLFxuICAgICAgICAgICAgICAgIFwidGFza0JhZGdlRm9udFNpemVcIixcbiAgICAgICAgICAgICAgICBcInRhc2tCYWRnZUNvbG9yXCIsXG4gICAgICAgICAgICAgICAgXCJ0YXNrQmFkZ2VGb250Q29sb3JcIixcbiAgICAgICAgICAgICAgICBcInRhc2tIZWF0bWFwU3RhcnRDb2xvclwiLFxuICAgICAgICAgICAgICAgIFwidGFza0hlYXRtYXBNaWRDb2xvclwiLFxuICAgICAgICAgICAgICAgIFwidGFza0hlYXRtYXBFbmRDb2xvclwiLFxuICAgICAgICAgICAgICAgIFwidGFza0hlYWRpbmdGb250U2l6ZVwiLFxuICAgICAgICAgICAgICAgIFwidGFza1RleHRGb250U2l6ZVwiLFxuICAgICAgICAgICAgICAgIFwidGFza0dyb3VwQ29sb3JPdmVyZHVlXCIsXG4gICAgICAgICAgICAgICAgXCJ0YXNrR3JvdXBDb2xvclRvZGF5XCIsXG4gICAgICAgICAgICAgICAgXCJ0YXNrR3JvdXBDb2xvclRvbW9ycm93XCIsXG4gICAgICAgICAgICAgICAgXCJ0YXNrR3JvdXBDb2xvck5leHQ3RGF5c1wiLFxuICAgICAgICAgICAgICAgIFwidGFza0dyb3VwQ29sb3JGdXR1cmVcIixcbiAgICAgICAgICAgICAgICBcInRhc2tHcm91cENvbG9yTm9EYXRlXCIsXG4gICAgICAgICAgICAgICAgXCJ0YXNrR3JvdXBDb2xvclRhZ1wiXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgc2V0dGluZ3NUb0V4cG9ydCA9IHt9O1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdGhlbWVLZXlzKSB7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3NUb0V4cG9ydFtrZXldID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Nba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbGVOYW1lID0gYGNhbGVuZGFyLXBlcmlvZC13ZWVrLW5vdGVzLXRoZW1lLmpzb25gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0dGluZ3NUb0V4cG9ydCA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHNldHRpbmdzVG9FeHBvcnQsIG51bGwsIDIpO1xuICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2RhdGFdLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyB9KTtcbiAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgYS5ocmVmID0gdXJsO1xuICAgICAgICBhLmRvd25sb2FkID0gZmlsZU5hbWU7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7XG4gICAgICAgIGEuY2xpY2soKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTtcbiAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuXG4gICAgICAgIG5ldyBOb3RpY2UoYCR7dHlwZSA9PT0gJ3RoZW1lJyA/ICdUaGVtZScgOiAnQWxsJ30gc2V0dGluZ3MgZXhwb3J0ZWQuYCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUgaW1wb3J0IGZ1bmN0aW9uYWxpdHkuXG4gICAgICogQHBhcmFtIHtGaWxlfSBmaWxlIFRoZSBKU09OIGZpbGUgc2VsZWN0ZWQgYnkgdGhlIHVzZXIuXG4gICAgICovXG4gICAgaGFuZGxlSW1wb3J0KGZpbGUpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbXBvcnRlZFNldHRpbmdzID0gSlNPTi5wYXJzZShldmVudC50YXJnZXQucmVzdWx0KTtcblxuICAgICAgICAgICAgICAgIC8vIEJhc2ljIHZhbGlkYXRpb24gdG8gc2VlIGlmIGl0J3MgYSB2YWxpZCBzZXR0aW5ncyBmaWxlXG4gICAgICAgICAgICAgICAgaWYgKCFpbXBvcnRlZFNldHRpbmdzLmhhc093blByb3BlcnR5KCdmb250U2l6ZScpICYmICFpbXBvcnRlZFNldHRpbmdzLmhhc093blByb3BlcnR5KCdmaXhlZE5vdGVGaWxlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3I6IFRoaXMgZG9lcyBub3QgYXBwZWFyIHRvIGJlIGEgdmFsaWQgc2V0dGluZ3MgZmlsZS4nLCA1MDAwKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG5ldyBDb25maXJtYXRpb25Nb2RhbCh0aGlzLmFwcCxcbiAgICAgICAgICAgICAgICAgICAgJ092ZXJ3cml0ZSBTZXR0aW5ncz8nLFxuICAgICAgICAgICAgICAgICAgICAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGltcG9ydCB0aGVzZSBzZXR0aW5ncz8gWW91ciBjdXJyZW50IGNvbmZpZ3VyYXRpb24gd2lsbCBiZSBvdmVyd3JpdHRlbi4nLFxuICAgICAgICAgICAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNZXJnZSBpbXBvcnRlZCBzZXR0aW5ncyBpbnRvIHRoZSBjdXJyZW50IHNldHRpbmdzXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMucGx1Z2luLnNldHRpbmdzLCBpbXBvcnRlZFNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGlzcGxheSgpOyAvLyBSZS1yZW5kZXIgdGhlIHNldHRpbmdzIHRhYlxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnU2V0dGluZ3MgaW1wb3J0ZWQgc3VjY2Vzc2Z1bGx5IScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKS5vcGVuKCk7XG5cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdFcnJvcjogQ291bGQgbm90IHBhcnNlIHRoZSBKU09OIGZpbGUuIEVuc3VyZSBpdCBpcyBub3QgY29ycnVwdGVkLicsIDUwMDApO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gcGFyc2Ugc2V0dGluZ3MgSlNPTjpcIiwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpO1xuICAgIH1cblxuICAgIHJlbmRlckFib3V0VGFiKCkge1xuICAgICAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGVudEVsO1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJBYm91dCBDYWxlbmRhciBQZXJpb2QgV2VlayBOb3Rlc1wiIH0pO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XG4gICAgICAgICAgICB0ZXh0OiBcIlRoaXMgcGx1Z2luIHByb3ZpZGVzIHR3byBjb21wcmVoZW5zaXZlIGNhbGVuZGFyIHZpZXdzIHRvZ2V0aGVyIHdpdGggYW4gaW50ZWdyYXRlZCBwYW5lbCBjb250YWluaW5nIGEgc2NyYXRjaHBhZCBhcmVhLCBub3RlcywgdGFza3MsIGFuZCBhc3NldHMuXCJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlN1cHBvcnQgdGhlIERldmVsb3BlclwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJJZiB5b3UgZmluZCB0aGlzIHBsdWdpbiB1c2VmdWwsIHBsZWFzZSBjb25zaWRlciBzdXBwb3J0aW5nIGl0cyBkZXZlbG9wbWVudC4gSXQncyBncmVhdGx5IGFwcHJlY2lhdGVkIVwiKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIuKYlSBCdXkgTWUgYSBDb2ZmZWVcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoXCJodHRwczovL2J1eW1lYWNvZmZlZS5jb20vZmlrdGVcIilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRvIHJlcGxhY2UgXCJ5b3VyLXVzZXJuYW1lXCIgd2l0aCB5b3VyIGFjdHVhbCB1c2VybmFtZSFcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKFwiaHR0cHM6Ly9idXltZWFjb2ZmZWUuY29tL2Zpa3RlXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIG1ha2VzIHRoZSBidXR0b24gbW9yZSBwcm9taW5lbnRcbiAgICAgICAgICAgICAgICBidXR0b24uYnV0dG9uRWwuYWRkQ2xhc3MoJ21vZC1jdGEnKTtcbiAgICAgICAgICAgICAgICBidXR0b24uYnV0dG9uRWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNGRkREMDAnO1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5idXR0b25FbC5zdHlsZS5jb2xvciA9ICcjMDAwMDAwJztcbiAgICAgICAgICAgICAgICBidXR0b24uYnV0dG9uRWwuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICBhc3luYyByZW5kZXJTdGFydEhlcmVUYWIoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWw7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICAgICAgLy8gV2UgYXJlIHNldHRpbmcgdGhlIEhUTUwgZGlyZWN0bHkgdG8gYnlwYXNzIHRoZSBNYXJrZG93blJlbmRlcmVyIGFuZCBhdm9pZCBwbHVnaW4gY29uZmxpY3RzLlxuICAgICAgICBjb250YWluZXJFbC5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxoMj7wn5qAIFF1aWNrIFN0YXJ0OiBJbml0aWFsIFNldHVwPC9oMj5cbiAgICAgICAgPGhyPlxuICAgICAgICA8cD5XZWxjb21lLCB0byBnZXQgdGhlIG1vc3Qgb3V0IG9mIHRoaXMgcGx1Z2luLCBpdCdzIHJlY29tbWVuZGVkIHRvIGNvbmZpZ3VyZSBhIGZldyBrZXkgc2V0dGluZ3MgdG8gbWF0Y2ggeW91ciB3b3JrZmxvdy48L3A+XG4gICAgICAgIDxocj5cbiAgICAgICAgPGgzPjEuIFNldCBVcCBZb3VyIFNjcmF0Y2hwYWQgTm90ZTwvaDM+XG4gICAgICAgIDxwPlRoZSA8c3Ryb25nPlNjcmF0Y2hwYWQ8L3N0cm9uZz4gdGFiIG5lZWRzIHRvIHBvaW50IHRvIGEgbm90ZSBmaWxlIGluIHlvdXIgdmF1bHQuIEJ5IGRlZmF1bHQsIGl0IGxvb2tzIGZvciA8Y29kZT5TY3JhdGNoUGFkLm1kPC9jb2RlPiBpbiB5b3VyIHZhdWx0J3Mgcm9vdC48L3A+XG4gICAgICAgIDx1bD5cbiAgICAgICAgICAgIDxsaT48c3Ryb25nPkdvIHRvOjwvc3Ryb25nPiBcIlNjcmF0Y2hQYWQgVGFiXCIg4oaSIFwiU2NyYXRjaFBhZ2Ugbm90ZSBwYXRoXCI+PC9saT5cbiAgICAgICAgICAgIDxsaT48c3Ryb25nPkFjdGlvbjo8L3N0cm9uZz4gU2V0IHRoZSA8c3Ryb25nPlNjcmF0Y2hQYWQgbm90ZSBwYXRoPC9zdHJvbmc+IHRvIGFueSBub3RlIHlvdSBwcmVmZXIuIElmIGl0IGRvZXNuJ3QgZXhpc3QsIHRoZSBwbHVnaW4gd2lsbCBjcmVhdGUgaXQgZm9yIHlvdS48L2xpPlxuICAgICAgICA8L3VsPlxuICAgICAgICA8aHI+XG4gICAgICAgIDxoMz4yLiBDb25maWd1cmUgWW91ciBEYWlseSBOb3RlczwvaDM+XG4gICAgICAgIDxwPkZvciBjYWxlbmRhciBkb3RzIGFuZCBjbGljay10by1vcGVuIGZlYXR1cmVzIHRvIHdvcmssIHRoZSBwbHVnaW4gbmVlZHMgdG8ga25vdyB3aGVyZSB5b3VyIGRhaWx5IG5vdGVzIGFyZS48L3A+XG4gICAgICAgIDx1bD5cbiAgICAgICAgICAgIDxsaT48c3Ryb25nPkdvIHRvOjwvc3Ryb25nPiBcIkNhbGVuZGFyIEZ1bmN0aW9uYWxcIiDihpIgXCJEYWlseSBOb3Rlc1wiPC9saT5cbiAgICAgICAgICAgIDxsaT48c3Ryb25nPkFjdGlvbjo8L3N0cm9uZz4gU2V0IHlvdXIgPHN0cm9uZz5EYWlseSBOb3RlcyBmb2xkZXI8L3N0cm9uZz4gYW5kIDxzdHJvbmc+RGFpbHkgbm90ZSBmb3JtYXQ8L3N0cm9uZz4gdG8gbWF0Y2ggeW91ciBleGlzdGluZyBzZXR1cCAoZS5nLiwgWVlZWS1NTS1ERCkuPC9saT5cbiAgICAgICAgPC91bD5cbiAgICAgICAgPGhyPlxuICAgICAgICA8aDM+My4gRGVmaW5lIFlvdXIgVGFzayBGb3JtYXQ8L2gzPlxuICAgICAgICA8cD5Gb3IgdGhlIHBsdWdpbiB0byByZWNvZ25pemUgeW91ciB0YXNrcyBhbmQgZHVlIGRhdGVzLCB0aGV5IDxzdHJvbmc+bXVzdDwvc3Ryb25nPiB1c2UgdGhlIDxjb2RlPvCfk4U8L2NvZGU+IGVtb2ppIGZvciBkdWUgZGF0ZXMuIERvd25sb2FkIHRoZSBUYXNrcyBwbHVnaW4gZm9yIGltcHJvdmVkIGNvbXBhdGliaWxpdHkuIFRoZSBmb2xsb3dpbmcgZXhhbXBsZXMgc2hvdyB0aGUgZm9ybWF0IG9mIHRhc2tzIHRvIGJlIHVzZWQ6PC9wPlxuICAgICAgICA8cD48c3Ryb25nPkR1ZSBEYXRlczo8L3N0cm9uZz48L3A+XG4gICAgICAgIDxwcmU+LSBbIF0gTXkgdGFzayB3aXRoIGEgZHVlIGRhdGUg8J+ThSAyMDI1LTEwLTI2PC9wcmU+XG4gICAgICAgIDxwcmU+LSBbIF0gUmV2aWV3IHByb2plY3Qgbm90ZXMgI3dvcmsg8J+ThSAyMDI1LTExLTAxPC9jb2RlPjwvcHJlPlxuICAgICAgICA8cD48c3Ryb25nPkNvbXBsZXRpb24gRGF0ZXM6PC9zdHJvbmc+PC9wPlxuICAgICAgICA8cHJlPi0gW3hdIE15IGNvbXBsZXRlZCB0YXNrIPCfk4UgMjAyNS0xMC0yNiDinIUgMjAyNS0wOS0xOTwvcHJlPlxuICAgICAgICA8cD5OT1RFOiBJZiB5b3UgZG8gbm90IHVzZSB0aGlzIFRhc2sgZm9ybWF0IHRoZW4geW91IGNhbiB0b2dnbGUgb2ZmIHRoZSBUYXNrcyBUYWIgaW4gdGhlIFwiR2VuZXJhbCBUYWJcIiDihpIgXCJUYWIgVmlzaWJpbGl0eVwiIHNlY3Rpb24uPC9wPlxuICAgICAgICA8aHI+XG4gICAgICAgIDxoMz40LiAoT3B0aW9uYWwpIFNldCBZb3VyIFBlcmlvZC9XZWVrIFN0YXJ0IERhdGU8L2gzPlxuICAgICAgICA8cD5JZiB5b3UgcGxhbiB0byB1c2UgdGhlIGN1c3RvbSBQZXJpb2QvV2VlayBjYWxlbmRhciBzeXN0ZW0gKGUuZy4sIFwiUDdXNFwiKSwgeW91IHNob3VsZCBzZXQgaXRzIHN0YXJ0aW5nIGRhdGUuIFRoZSBwZXJpb2Qvd2VlayBjYWxlbmRhciBzeXN0ZW0sIHVzZWQgYnkgc29tZSBjb21wYW5pZXMgZm9yIGZpbmFuY2lhbCB5ZWFyIHRyYWNraW5nLCBhc3N1bWVzIDEzIHBlcmlvZHMgd2l0aCA0IHdlZWtzIGluIGVhY2ggcGVyaW9kLjwvcD5cbiAgICAgICAgPHVsPlxuICAgICAgICAgICAgPGxpPjxzdHJvbmc+R28gdG86PC9zdHJvbmc+IFwiQ2FsZW5kYXIgRnVuY3Rpb25hbFwiIOKGkiBcIlBlcmlvZC9XZWVrIFN5c3RlbVwiPC9saT5cbiAgICAgICAgICAgIDxsaT48c3Ryb25nPkFjdGlvbjo8L3N0cm9uZz4gU2V0IHRoZSA8c3Ryb25nPlN0YXJ0IG9mIFBlcmlvZCAxIFdlZWsgMTwvc3Ryb25nPiB0byB0aGUgU3VuZGF5IGRhdGUgb2YgeW91ciBjaG9pY2UuPC9saT5cbiAgICAgICAgPC91bD5cbiAgICBgO1xuICAgIH1cblxufVxuZXhwb3J0IGRlZmF1bHQgUGVyaW9kTW9udGhQbHVnaW47Il0sIm5hbWVzIjpbIkV2ZW50IiwiSUNBTCJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7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LENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFO0FBQ2xDLFNBQVMsSUFBSSxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDOztBQUV0QyxJQUFJLElBQUksQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRTtBQUNwQyxTQUFTLElBQUksQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQzs7QUFFeEMsSUFBSSxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUU7QUFDaEMsU0FBUyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUM7O0FBRXBDLElBQUksSUFBSSxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFO0FBQ2xDLFNBQVMsSUFBSSxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDOztBQUV0QyxJQUFJLElBQUksQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRTtBQUN0QyxTQUFTLElBQUksQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQzs7QUFFMUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUU7QUFDdEMsU0FBUyxJQUFJLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUM7O0FBRTFDLElBQUksT0FBTyxDQUFDO0FBQ1osRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxPQUFPLFlBQVksQ0FBQyxFQUFFLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRTtBQUM5QyxJQUFJLElBQUksRUFBRSxDQUFDLE1BQU07QUFDakIsUUFBUSxTQUFTLENBQUMsSUFBSSxJQUFJLE9BQU8sQ0FBQyxJQUFJO0FBQ3RDLFFBQVEsU0FBUyxJQUFJLFFBQVEsQ0FBQyxhQUFhO0FBQzNDLFFBQVEsT0FBTyxJQUFJLFFBQVEsQ0FBQyxhQUFhLEVBQUU7QUFDM0MsTUFBTSxFQUFFLENBQUMsSUFBSSxHQUFHLE9BQU87QUFDdkIsTUFBTSxPQUFPLEVBQUU7QUFDZixJQUFJOztBQUVKLElBQUksSUFBSSxTQUFTLEdBQUcsU0FBUyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUM7QUFDM0MsSUFBSSxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsU0FBUyxDQUFDOztBQUVuQyxJQUFJLFNBQVMsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQztBQUNyQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsU0FBUyxDQUFDOztBQUVqQyxJQUFJLE9BQU8sSUFBSTtBQUNmLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxPQUFPLFFBQVEsQ0FBQyxLQUFLLEVBQUU7QUFDekIsSUFBSSxJQUFJLEVBQUUsR0FBRyxJQUFJLFFBQVEsRUFBRTtBQUMzQixJQUFJLE9BQU8sRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7QUFDN0IsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLE9BQU8sWUFBWSxHQUFHLElBQUk7QUFDNUIsRUFBRSxXQUFXLFdBQVcsR0FBRztBQUMzQixJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFO0FBQzVCLE1BQU0sSUFBSSxDQUFDLFlBQVksR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDO0FBQzVDLFFBQVEsSUFBSSxFQUFFO0FBQ2QsT0FBTyxDQUFDO0FBQ1IsSUFBSTtBQUNKLElBQUksT0FBTyxJQUFJLENBQUMsWUFBWTtBQUM1QixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsT0FBTyxjQUFjLEdBQUcsSUFBSTtBQUM5QixFQUFFLFdBQVcsYUFBYSxHQUFHO0FBQzdCLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUU7QUFDOUIsTUFBTSxJQUFJLENBQUMsY0FBYyxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUM7QUFDOUMsUUFBUSxJQUFJLEVBQUU7QUFDZCxPQUFPLENBQUM7QUFDUixJQUFJO0FBQ0osSUFBSSxPQUFPLElBQUksQ0FBQyxjQUFjO0FBQzlCLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxPQUFPLGFBQWEsQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFO0FBQzlELElBQUksT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxJQUFJO0FBQ3JDLE1BQU0sTUFBTTtBQUNaLE1BQU0sSUFBSTtBQUNWLE1BQU0sS0FBSztBQUNYLE1BQU0sT0FBTztBQUNiLE1BQU0sT0FBTztBQUNiLE1BQU07QUFDTixLQUFLO0FBQ0wsRUFBRTs7QUFFRixFQUFFLE9BQU8scUJBQXFCLEdBQUcsRUFBRTtBQUNuQyxFQUFFLE9BQU8sY0FBYyxHQUFHLENBQUM7O0FBRTNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsV0FBVyxDQUFDLElBQUksRUFBRTtBQUNwQixJQUFJLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSTtBQUMvQixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO0FBQ3ZCLEVBQUU7OztBQUdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxJQUFJLEdBQUcsRUFBRTs7QUFFWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsUUFBUSxHQUFHLEVBQUU7O0FBRWY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLE9BQU8sR0FBRyxFQUFFOztBQUVkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxRQUFRLEdBQUcsR0FBRzs7QUFFaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFNBQVMsR0FBRyxHQUFHOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsU0FBUyxHQUFHLElBQUk7O0FBRWxCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxpQkFBaUIsR0FBRyxDQUFDOztBQUV2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFNBQVMsR0FBRyxjQUFjOztBQUU1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFFBQVEsQ0FBQyxLQUFLLEVBQUU7QUFDbEIsSUFBSSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsQ0FBQztBQUM5QixJQUFJLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRTs7QUFFckIsSUFBSSxJQUFJLEtBQUssWUFBWSxTQUFTLEVBQUU7QUFDcEM7QUFDQSxNQUFNLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSztBQUM1QixJQUFJLENBQUMsTUFBTTtBQUNYO0FBQ0EsTUFBTSxJQUFJLEtBQUssSUFBSSxXQUFXLElBQUksS0FBSyxFQUFFO0FBQ3pDLFFBQVEsSUFBSSxPQUFPLEtBQUssQ0FBQyxTQUFTLElBQUksUUFBUSxFQUFFO0FBQ2hEO0FBQ0EsVUFBVSxJQUFJLElBQUksR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQztBQUMzQyxVQUFVLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxTQUFTLENBQUMsSUFBSSxDQUFDO0FBQzlDLFFBQVEsQ0FBQyxNQUFNLElBQUksS0FBSyxDQUFDLFNBQVMsWUFBWSxTQUFTLEVBQUU7QUFDekQ7QUFDQSxVQUFVLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDLFNBQVM7QUFDMUMsUUFBUSxDQUFDLE1BQU07QUFDZjtBQUNBLFVBQVUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJO0FBQy9CLFFBQVE7QUFDUixNQUFNOztBQUVOO0FBQ0EsTUFBTSxLQUFLLElBQUksSUFBSSxJQUFJLE9BQU8sRUFBRTtBQUNoQyxRQUFRLElBQUksS0FBSyxJQUFJLElBQUksSUFBSSxLQUFLLEVBQUU7QUFDcEMsVUFBVSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQztBQUNsQyxRQUFRO0FBQ1IsTUFBTTtBQUNOLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUksSUFBSSxJQUFJLENBQUMsU0FBUyxZQUFZLFNBQVMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUU7QUFDM0QsTUFBTSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDO0FBQzlELElBQUk7O0FBRUosSUFBSSxPQUFPLElBQUk7QUFDZixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsU0FBUyxDQUFDLEVBQUUsRUFBRTtBQUNoQixJQUFJLElBQUksSUFBSSxJQUFJLFFBQVEsQ0FBQyxXQUFXLElBQUksSUFBSSxJQUFJLFFBQVEsQ0FBQyxhQUFhLEVBQUU7QUFDeEUsTUFBTSxPQUFPLENBQUM7QUFDZCxJQUFJOztBQUVKLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDOztBQUVqQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRTtBQUM5QixNQUFNLE9BQU8sQ0FBQztBQUNkLElBQUk7O0FBRUosSUFBSSxJQUFJLFNBQVMsR0FBRztBQUNwQixNQUFNLElBQUksRUFBRSxFQUFFLENBQUMsSUFBSTtBQUNuQixNQUFNLEtBQUssRUFBRSxFQUFFLENBQUMsS0FBSztBQUNyQixNQUFNLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRztBQUNqQixNQUFNLElBQUksRUFBRSxFQUFFLENBQUMsSUFBSTtBQUNuQixNQUFNLE1BQU0sRUFBRSxFQUFFLENBQUMsTUFBTTtBQUN2QixNQUFNLE1BQU0sRUFBRSxFQUFFLENBQUM7QUFDakIsS0FBSzs7QUFFTCxJQUFJLElBQUksVUFBVSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLENBQUM7QUFDdEQsSUFBSSxJQUFJLGlCQUFpQixHQUFHLEVBQUU7QUFDOUIsSUFBSSxJQUFJLElBQUksR0FBRyxDQUFDOztBQUVoQjtBQUNBLElBQUksU0FBUztBQUNiLE1BQU0sSUFBSSxNQUFNLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLEVBQUUsSUFBSSxDQUFDO0FBQ3hELE1BQU0sSUFBSSxNQUFNLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQyxhQUFhLEVBQUU7QUFDbkQsUUFBUSxRQUFRLENBQUMsYUFBYSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsU0FBUyxDQUFDO0FBQ2pFLE1BQU0sQ0FBQyxNQUFNO0FBQ2IsUUFBUSxRQUFRLENBQUMsYUFBYSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7QUFDOUMsd0NBQXdDLE1BQU0sQ0FBQyxhQUFhLENBQUM7QUFDN0QsTUFBTTs7QUFFTixNQUFNLElBQUksR0FBRyxHQUFHLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLEVBQUUsTUFBTSxDQUFDOztBQUU5RCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsRUFBRTtBQUNwQixRQUFRLGlCQUFpQixHQUFHLFVBQVU7QUFDdEMsTUFBTSxDQUFDLE1BQU07QUFDYixRQUFRLElBQUksR0FBRyxFQUFFO0FBQ2pCLE1BQU07O0FBRU4sTUFBTSxJQUFJLElBQUksSUFBSSxFQUFFLElBQUksaUJBQWlCLElBQUksRUFBRSxFQUFFO0FBQ2pELFFBQVE7QUFDUixNQUFNOztBQUVOLE1BQU0sVUFBVSxJQUFJLElBQUk7O0FBRXhCLE1BQU0sSUFBSSxVQUFVLEdBQUcsQ0FBQyxFQUFFO0FBQzFCLFFBQVEsT0FBTyxDQUFDO0FBQ2hCLE1BQU07O0FBRU4sTUFBTSxJQUFJLFVBQVUsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRTtBQUM3QyxRQUFRO0FBQ1IsTUFBTTtBQUNOLElBQUk7O0FBRUosSUFBSSxJQUFJLFdBQVcsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0FBQ3JELElBQUksSUFBSSxnQkFBZ0IsR0FBRyxXQUFXLENBQUMsU0FBUyxHQUFHLFdBQVcsQ0FBQyxhQUFhOztBQUU1RSxJQUFJLElBQUksZ0JBQWdCLEdBQUcsQ0FBQyxJQUFJLGlCQUFpQixHQUFHLENBQUMsRUFBRTtBQUN2RCxNQUFNLElBQUksVUFBVSxHQUFHLEtBQUssQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDO0FBQy9DLE1BQU0sUUFBUSxDQUFDLGFBQWEsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsVUFBVSxDQUFDLGFBQWEsQ0FBQzs7QUFFM0UsTUFBTSxJQUFJLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLEVBQUUsVUFBVSxDQUFDLEdBQUcsQ0FBQyxFQUFFO0FBQ2xFLFFBQVEsSUFBSSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGlCQUFpQixHQUFHLENBQUMsQ0FBQzs7QUFFbEUsUUFBUSxJQUFJLGFBQWEsR0FBRyxLQUFLLENBQUM7O0FBRWxDLFFBQVEsSUFBSSxXQUFXLENBQUMsV0FBVyxJQUFJLGFBQWE7QUFDcEQsWUFBWSxnQkFBZ0IsQ0FBQyxXQUFXLElBQUksYUFBYSxFQUFFO0FBQzNELFVBQVUsV0FBVyxHQUFHLGdCQUFnQjtBQUN4QyxRQUFRO0FBQ1IsTUFBTTtBQUNOLElBQUk7O0FBRUo7QUFDQSxJQUFJLE9BQU8sV0FBVyxDQUFDLFNBQVM7QUFDaEMsRUFBRTs7QUFFRixFQUFFLGlCQUFpQixDQUFDLE1BQU0sRUFBRTtBQUM1QjtBQUNBLElBQUksSUFBSSxHQUFHLEdBQUcsZUFBZTtBQUM3QixNQUFNLElBQUksQ0FBQyxPQUFPO0FBQ2xCLE1BQU0sTUFBTTtBQUNaLE1BQU0sUUFBUSxDQUFDO0FBQ2YsS0FBSzs7QUFFTCxJQUFJLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFO0FBQ3BDLE1BQU0sT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDO0FBQ3BDLElBQUk7O0FBRUosSUFBSSxPQUFPLEdBQUc7QUFDZCxFQUFFOztBQUVGLEVBQUUsZUFBZSxDQUFDLEtBQUssRUFBRTtBQUN6QixJQUFJLElBQUksUUFBUSxDQUFDLHFCQUFxQixJQUFJLEVBQUUsRUFBRTtBQUM5QyxNQUFNLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFDNUIsTUFBTSxRQUFRLENBQUMscUJBQXFCLEdBQUcsS0FBSyxDQUFDLElBQUk7QUFDakQsSUFBSTs7QUFFSixJQUFJLElBQUksY0FBYyxHQUFHLEtBQUs7QUFDOUIsSUFBSSxJQUFJLGNBQWMsR0FBRyxRQUFRLENBQUMscUJBQXFCLEVBQUU7QUFDekQsTUFBTSxjQUFjLEdBQUcsUUFBUSxDQUFDLHFCQUFxQjtBQUNyRCxJQUFJOztBQUVKLElBQUksY0FBYyxJQUFJLFFBQVEsQ0FBQyxjQUFjOztBQUU3QyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsS0FBSyxFQUFFO0FBQ2hFLE1BQU0sSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxtQkFBbUIsRUFBRTtBQUN6RCxNQUFNLElBQUksT0FBTyxHQUFHLFFBQVEsQ0FBQyxNQUFNO0FBQ25DLE1BQU0sSUFBSSxPQUFPLEdBQUcsQ0FBQzs7QUFFckIsTUFBTSxPQUFPLE9BQU8sR0FBRyxPQUFPLEVBQUUsT0FBTyxFQUFFLEVBQUU7QUFDM0MsUUFBUSxJQUFJLENBQUMsZ0JBQWdCO0FBQzdCLFVBQVUsUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFLGNBQWMsRUFBRSxJQUFJLENBQUM7QUFDbEQsU0FBUztBQUNULE1BQU07O0FBRU4sTUFBTSxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsa0JBQWtCLENBQUM7QUFDcEQsTUFBTSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsY0FBYztBQUM3QyxJQUFJO0FBQ0osRUFBRTs7QUFFRixFQUFFLGdCQUFnQixDQUFDLFVBQVUsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFO0FBQy9DLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDO0FBQzFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQztBQUM3QyxRQUFRLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsRUFBRTtBQUNqRCxNQUFNLE9BQU8sSUFBSTtBQUNqQixJQUFJOztBQUVKLElBQUksSUFBSSxPQUFPLEdBQUcsVUFBVSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUFDLGFBQWEsRUFBRTtBQUN4RSxJQUFJLElBQUksTUFBTTs7QUFFZCxJQUFJLFNBQVMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFO0FBQ3RDLE1BQU0sT0FBTyxNQUFNLENBQUMsTUFBTSxJQUFJLE1BQU0sQ0FBQyxLQUFLLEdBQUcsSUFBSSxHQUFHLE1BQU0sQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO0FBQ3hFLElBQUk7O0FBRUosSUFBSSxTQUFTLFlBQVksR0FBRztBQUM1QixNQUFNLElBQUksVUFBVSxHQUFHLEVBQUU7QUFDekIsTUFBTSxVQUFVLENBQUMsV0FBVyxJQUFJLFVBQVUsQ0FBQyxJQUFJLElBQUksVUFBVSxDQUFDO0FBQzlELE1BQU0sVUFBVSxDQUFDLFNBQVMsR0FBRyxnQkFBZ0I7QUFDN0MsUUFBUSxVQUFVLENBQUMsZ0JBQWdCLENBQUMsWUFBWSxDQUFDLENBQUMsYUFBYTtBQUMvRCxPQUFPOztBQUVQLE1BQU0sVUFBVSxDQUFDLGFBQWEsR0FBRyxnQkFBZ0I7QUFDakQsUUFBUSxVQUFVLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLENBQUMsYUFBYTtBQUNqRSxPQUFPOztBQUVQLE1BQU0sT0FBTyxVQUFVO0FBQ3ZCLElBQUk7O0FBRUosSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFDOUUsTUFBTSxNQUFNLEdBQUcsWUFBWSxFQUFFO0FBQzdCLE1BQU0sTUFBTSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSTtBQUNoQyxNQUFNLE1BQU0sQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFDLEtBQUs7QUFDbEMsTUFBTSxNQUFNLENBQUMsR0FBRyxHQUFHLE9BQU8sQ0FBQyxHQUFHO0FBQzlCLE1BQU0sTUFBTSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSTtBQUNoQyxNQUFNLE1BQU0sQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU07QUFDcEMsTUFBTSxNQUFNLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxNQUFNOztBQUVwQyxNQUFNLFFBQVEsQ0FBQyxhQUFhLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQztBQUNwRSxNQUFNLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO0FBQzFCLElBQUksQ0FBQyxNQUFNO0FBQ1gsTUFBTSxJQUFJLEtBQUssR0FBRyxVQUFVLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDO0FBQ3RELE1BQU0sS0FBSyxJQUFJLEtBQUssSUFBSSxLQUFLLEVBQUU7QUFDL0IsUUFBUSxJQUFJLElBQUksR0FBRyxLQUFLLENBQUMsYUFBYSxFQUFFO0FBQ3hDLFFBQVEsTUFBTSxHQUFHLFlBQVksRUFBRTs7QUFFL0IsUUFBUSxNQUFNLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJO0FBQy9CLFFBQVEsTUFBTSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSztBQUNqQyxRQUFRLE1BQU0sQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUc7O0FBRTdCLFFBQVEsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO0FBQ3pCLFVBQVUsTUFBTSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSTtBQUNwQyxVQUFVLE1BQU0sQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU07QUFDeEMsVUFBVSxNQUFNLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxNQUFNOztBQUV4QyxVQUFVLElBQUksT0FBTyxDQUFDLElBQUksSUFBSSxRQUFRLENBQUMsV0FBVyxFQUFFO0FBQ3BELFlBQVksUUFBUSxDQUFDLGFBQWEsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDO0FBQzFFLFVBQVU7QUFDVixRQUFRLENBQUMsTUFBTTtBQUNmLFVBQVUsTUFBTSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSTtBQUNqQyxVQUFVLE1BQU0sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU07QUFDckMsVUFBVSxNQUFNLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNOztBQUVyQyxVQUFVLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxRQUFRLENBQUMsV0FBVyxFQUFFO0FBQ2pELFlBQVksUUFBUSxDQUFDLGFBQWEsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDO0FBQzFFLFVBQVU7QUFDVixRQUFROztBQUVSLFFBQVEsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7QUFDNUIsTUFBTTs7QUFFTixNQUFNLElBQUksS0FBSyxHQUFHLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUM7O0FBRXRELE1BQU0sSUFBSSxLQUFLLEVBQUU7QUFDakIsUUFBUSxLQUFLLEdBQUcsS0FBSyxDQUFDLGFBQWEsRUFBRTtBQUNyQyxRQUFRLE1BQU0sR0FBRyxZQUFZLEVBQUU7O0FBRS9CLFFBQVEsSUFBSSxLQUFLLENBQUMsS0FBSyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLFFBQVEsQ0FBQyxXQUFXLEVBQUU7QUFDckUsVUFBVSxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsYUFBYSxDQUFDO0FBQzNELFVBQVUsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsUUFBUSxDQUFDLGFBQWE7QUFDbkQsUUFBUTs7QUFFUixRQUFRLElBQUksUUFBUSxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDOztBQUU5QyxRQUFRLElBQUksR0FBRztBQUNmLFFBQVEsUUFBUSxHQUFHLEdBQUcsUUFBUSxDQUFDLElBQUksRUFBRSxHQUFHO0FBQ3hDLFVBQVUsTUFBTSxHQUFHLFlBQVksRUFBRTtBQUNqQyxVQUFVLElBQUksR0FBRyxDQUFDLElBQUksR0FBRyxLQUFLLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFDeEMsWUFBWTtBQUNaLFVBQVU7O0FBRVYsVUFBVSxNQUFNLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJO0FBQ2hDLFVBQVUsTUFBTSxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUMsS0FBSztBQUNsQyxVQUFVLE1BQU0sQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUc7QUFDOUIsVUFBVSxNQUFNLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJO0FBQ2hDLFVBQVUsTUFBTSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsTUFBTTtBQUNwQyxVQUFVLE1BQU0sQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDLE1BQU07QUFDcEMsVUFBVSxNQUFNLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxNQUFNOztBQUVwQyxVQUFVLFFBQVEsQ0FBQyxhQUFhLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQztBQUN4RSxVQUFVLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO0FBQzlCLFFBQVE7QUFDUixNQUFNO0FBQ04sSUFBSTs7QUFFSixJQUFJLE9BQU8sT0FBTztBQUNsQixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxRQUFRLEdBQUc7QUFDYixJQUFJLFFBQVEsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJO0FBQ25ELEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0EsSUFBSSxLQUFLLEdBQUcsSUFBSTs7QUFFaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxlQUFlLEdBQUc7QUFDeEIsRUFBRSxJQUFJLEtBQUssR0FBRztBQUNkLElBQUksSUFBSSxLQUFLLEtBQUssSUFBSSxFQUFFO0FBQ3hCLE1BQU0sT0FBTyxDQUFDO0FBQ2QsSUFBSTs7QUFFSixJQUFJLE9BQU8sTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNO0FBQ3BDLEVBQUUsQ0FBQzs7QUFFSCxFQUFFLEtBQUssRUFBRSxXQUFXO0FBQ3BCLElBQUksS0FBSyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDO0FBQy9CLElBQUksSUFBSSxHQUFHLEdBQUcsUUFBUSxDQUFDLFdBQVc7O0FBRWxDLElBQUksS0FBSyxDQUFDLENBQUMsR0FBRyxHQUFHO0FBQ2pCLElBQUksS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHO0FBQ25CLElBQUksS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHO0FBQ25CLEVBQUUsQ0FBQztBQUNILEVBQUUsV0FBVyxFQUFFLFdBQVc7QUFDMUIsSUFBSSxLQUFLLEdBQUcsSUFBSTtBQUNoQixFQUFFLENBQUM7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxHQUFHLEVBQUUsU0FBUyxJQUFJLEVBQUU7QUFDdEIsSUFBSSxJQUFJLEtBQUssS0FBSyxJQUFJLEVBQUU7QUFDeEIsTUFBTSxPQUFPLEtBQUs7QUFDbEIsSUFBSTs7QUFFSixJQUFJLE9BQU8sQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUM7QUFDeEIsRUFBRSxDQUFDOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsR0FBRyxFQUFFLFNBQVMsSUFBSSxFQUFFO0FBQ3RCLElBQUksSUFBSSxLQUFLLEtBQUssSUFBSSxFQUFFO0FBQ3hCLE1BQU0sSUFBSSxDQUFDLEtBQUssRUFBRTtBQUNsQixJQUFJOztBQUVKLElBQUksT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDO0FBQ3RCLEVBQUUsQ0FBQzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsUUFBUSxFQUFFLFNBQVMsUUFBUSxFQUFFLElBQUksRUFBRTtBQUNyQyxJQUFJLElBQUksS0FBSyxLQUFLLElBQUksRUFBRTtBQUN4QixNQUFNLElBQUksQ0FBQyxLQUFLLEVBQUU7QUFDbEIsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsSUFBSSxJQUFJLE9BQU8sUUFBUSxLQUFLLFFBQVEsSUFBSSxJQUFJLFlBQVksUUFBUSxFQUFFO0FBQ2xFLE1BQU0sQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDO0FBQ3pDLElBQUk7O0FBRUosSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO0FBQ2YsTUFBTSxJQUFJLFFBQVEsWUFBWSxRQUFRLEVBQUU7QUFDeEMsUUFBUSxJQUFJLEdBQUcsUUFBUSxDQUFDLElBQUk7QUFDNUIsTUFBTSxDQUFDLE1BQU07QUFDYixRQUFRLElBQUksUUFBUSxDQUFDLElBQUksS0FBSyxXQUFXLEVBQUU7QUFDM0MsVUFBVSxRQUFRLEdBQUcsSUFBSSxRQUFRLENBQUMsUUFBUSxDQUFDO0FBQzNDLFVBQVUsSUFBSSxHQUFHLFFBQVEsQ0FBQyxJQUFJO0FBQzlCLFFBQVE7QUFDUixNQUFNO0FBQ04sSUFBSTs7QUFFSixJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUU7QUFDZixNQUFNLE1BQU0sSUFBSSxTQUFTLENBQUMsMENBQTBDLENBQUM7QUFDckUsSUFBSTs7QUFFSixJQUFJLElBQUksUUFBUSxZQUFZLFFBQVEsRUFBRTtBQUN0QyxNQUFNLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxRQUFRO0FBQzVCLElBQUksQ0FBQyxNQUFNO0FBQ1gsTUFBTSxNQUFNLElBQUksU0FBUyxDQUFDLGtEQUFrRCxDQUFDO0FBQzdFLElBQUk7QUFDSixFQUFFLENBQUM7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxNQUFNLEVBQUUsU0FBUyxJQUFJLEVBQUU7QUFDekIsSUFBSSxJQUFJLEtBQUssS0FBSyxJQUFJLEVBQUU7QUFDeEIsTUFBTSxPQUFPLElBQUk7QUFDakIsSUFBSTs7QUFFSixJQUFJLFFBQVEsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDO0FBQzlCLEVBQUU7QUFDRixDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGVBQWUsQ0FBQyxJQUFJLEVBQUU7QUFDL0IsRUFBRSxJQUFJLE9BQU8sRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxDQUFDOztBQUVqRCxFQUFFLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxXQUFXLEVBQUU7QUFDMUM7QUFDQSxJQUFJLE9BQU8sSUFBSTtBQUNmLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUUsT0FBTyxHQUFHLElBQUksQ0FBQyxtQkFBbUIsRUFBRTtBQUN0QyxFQUFFLFVBQVUsR0FBRyxFQUFFO0FBQ2pCLEVBQUUsVUFBVSxHQUFHLEVBQUU7QUFDakIsRUFBRSxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDdkMsSUFBSSxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssV0FBVyxFQUFFO0FBQ3pDLE1BQU0sSUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDLGFBQWEsRUFBRTtBQUNwRSxNQUFNLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBQ25DLElBQUksQ0FBQyxNQUFNO0FBQ1gsTUFBTSxVQUFVLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztBQUNuRSxJQUFJO0FBQ0osRUFBRTs7QUFFRjtBQUNBLEVBQUUsT0FBTyxHQUFHLEVBQUU7QUFDZCxFQUFFLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsVUFBVSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUMxQyxJQUFJLElBQUksSUFBSSxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDO0FBQ2pELElBQUksSUFBSSxJQUFJLEVBQUU7QUFDZCxNQUFNLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJO0FBQzFCLElBQUk7QUFDSixFQUFFOztBQUVGO0FBQ0EsRUFBRSxLQUFLLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsRUFBRTtBQUN2RCxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUU7QUFDeEIsTUFBTSxJQUFJLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDO0FBQ25DLElBQUk7QUFDSixFQUFFOztBQUVGO0FBQ0EsRUFBRSxLQUFLLElBQUksSUFBSSxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFDekMsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLGVBQWUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUU7QUFDeEQsTUFBTSxJQUFJLENBQUMsZUFBZSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxDQUFDO0FBQy9ELElBQUk7QUFDSixFQUFFOztBQUVGLEVBQUUsT0FBTyxJQUFJO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxhQUFhLENBQUMsTUFBTSxFQUFFO0FBQy9CLEVBQUUsT0FBTyxPQUFPLE1BQU0sQ0FBQyxLQUFLLFFBQVEsSUFBSSxLQUFLLENBQUMsTUFBTSxDQUFDO0FBQ3JEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxjQUFjLENBQUMsTUFBTSxFQUFFO0FBQ2hDLEVBQUUsSUFBSSxNQUFNLEdBQUcsUUFBUSxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUM7O0FBRW5DLEVBQUUsSUFBSSxhQUFhLENBQUMsTUFBTSxDQUFDLEVBQUU7QUFDN0IsSUFBSSxNQUFNLElBQUksS0FBSztBQUNuQixNQUFNLGtDQUFrQyxHQUFHLE1BQU0sR0FBRztBQUNwRCxLQUFLO0FBQ0wsRUFBRTs7QUFFRixFQUFFLE9BQU8sTUFBTTtBQUNmOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGVBQWUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFO0FBQ3JDLEVBQUUsSUFBSSxPQUFPLElBQUksQ0FBQyxLQUFLLFdBQVcsRUFBRTtBQUNwQyxJQUFJLE9BQU8sU0FBUztBQUNwQixFQUFFOztBQUVGLEVBQUUsSUFBSSxJQUFJLFlBQVksSUFBSSxFQUFFO0FBQzVCLElBQUksT0FBTyxJQUFJO0FBQ2YsRUFBRTtBQUNGLEVBQUUsT0FBTyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDdkI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRTtBQUMvQyxFQUFFLE9BQU8sQ0FBQyxHQUFHLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxFQUFFO0FBQ3JELElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEtBQUssSUFBSSxFQUFFO0FBQzdDLE1BQU0sR0FBRyxJQUFJLENBQUM7QUFDZCxJQUFJLENBQUMsTUFBTTtBQUNYLE1BQU0sT0FBTyxHQUFHO0FBQ2hCLElBQUk7QUFDSixFQUFFO0FBQ0YsRUFBRSxPQUFPLEVBQUU7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGVBQWUsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRTtBQUNqRCxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTTtBQUNsQixJQUFJLE9BQU8sQ0FBQzs7QUFFWixFQUFFLElBQUksR0FBRyxHQUFHLENBQUMsRUFBRSxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDO0FBQ3JDLE1BQU0sR0FBRyxFQUFFLE1BQU07O0FBRWpCLEVBQUUsT0FBTyxHQUFHLElBQUksSUFBSSxFQUFFO0FBQ3RCLElBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUM7QUFDNUMsSUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7O0FBRXhDLElBQUksSUFBSSxNQUFNLEdBQUcsQ0FBQztBQUNsQixNQUFNLElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQztBQUNwQixTQUFTLElBQUksTUFBTSxHQUFHLENBQUM7QUFDdkIsTUFBTSxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFDbkI7QUFDQSxNQUFNO0FBQ04sRUFBRTs7QUFFRixFQUFFLElBQUksTUFBTSxHQUFHLENBQUM7QUFDaEIsSUFBSSxPQUFPLEdBQUcsQ0FBQztBQUNmLE9BQU8sSUFBSSxNQUFNLEdBQUcsQ0FBQztBQUNyQixJQUFJLE9BQU8sR0FBRyxHQUFHLENBQUM7QUFDbEI7QUFDQSxJQUFJLE9BQU8sR0FBRztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLEtBQUssQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFO0FBQzVCLEVBQUUsSUFBSSxDQUFDLElBQUksSUFBSSxPQUFPLElBQUksSUFBSSxRQUFRLEVBQUU7QUFDeEMsSUFBSSxPQUFPLElBQUk7QUFDZixFQUFFLENBQUMsTUFBTSxJQUFJLElBQUksWUFBWSxJQUFJLEVBQUU7QUFDbkMsSUFBSSxPQUFPLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUNuQyxFQUFFLENBQUMsTUFBTSxJQUFJLE9BQU8sSUFBSSxJQUFJLEVBQUU7QUFDOUIsSUFBSSxPQUFPLElBQUksQ0FBQyxLQUFLLEVBQUU7QUFDdkIsRUFBRSxDQUFDLE1BQU0sSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO0FBQ2xDLElBQUksSUFBSSxHQUFHLEdBQUcsRUFBRTtBQUNoQixJQUFJLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQzFDLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEQsSUFBSTtBQUNKLElBQUksT0FBTyxHQUFHO0FBQ2QsRUFBRSxDQUFDLE1BQU07QUFDVCxJQUFJLElBQUksR0FBRyxHQUFHLEVBQUU7QUFDaEIsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtBQUNwRCxNQUFNLElBQUksS0FBSyxFQUFFO0FBQ2pCLFFBQVEsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDO0FBQ3RDLE1BQU0sQ0FBQyxNQUFNO0FBQ2IsUUFBUSxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsS0FBSztBQUN6QixNQUFNO0FBQ04sSUFBSTtBQUNKLElBQUksT0FBTyxHQUFHO0FBQ2QsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLFFBQVEsQ0FBQyxLQUFLLEVBQUU7QUFDekIsRUFBRSxJQUFJLE1BQU0sR0FBRyxFQUFFO0FBQ2pCLEVBQUUsSUFBSSxJQUFJLEdBQUcsS0FBSyxJQUFJLEVBQUUsRUFBRSxHQUFHLEdBQUcsQ0FBQyxFQUFFLFdBQVcsR0FBRyxDQUFDO0FBQ2xEO0FBQ0E7QUFDQSxFQUFFLE9BQU8sSUFBSSxDQUFDLE1BQU0sRUFBRTtBQUN0QixJQUFJLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDO0FBQ2xDLElBQUksSUFBSSxFQUFFLEdBQUcsR0FBRyxFQUFFLEVBQUUsV0FBVztBQUMvQixTQUFTLElBQUksRUFBRSxHQUFHLElBQUksRUFBRSxXQUFXLElBQUksQ0FBQyxDQUFDO0FBQ3pDLFNBQVMsSUFBSSxFQUFFLEdBQUcsS0FBSyxFQUFFLFdBQVcsSUFBSSxDQUFDO0FBQ3pDLFNBQVMsV0FBVyxJQUFJLENBQUMsQ0FBQztBQUMxQixJQUFJLElBQUksV0FBVyxHQUFHLFVBQVUsQ0FBQyxVQUFVLEdBQUcsQ0FBQztBQUMvQyxNQUFNLEdBQUcsSUFBSSxFQUFFLEdBQUcsS0FBSyxHQUFHLENBQUMsR0FBRyxDQUFDO0FBQy9CLFNBQVM7QUFDVCxNQUFNLE1BQU0sSUFBSSxVQUFVLENBQUMsV0FBVyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUM5RSxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQ3pDLE1BQU0sR0FBRyxHQUFHLFdBQVcsR0FBRyxDQUFDO0FBQzNCLElBQUk7QUFDSixFQUFFO0FBQ0YsRUFBRSxPQUFPLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0FBQ3hEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxJQUFJLENBQUMsSUFBSSxFQUFFO0FBQ3BCLEVBQUUsSUFBSSxPQUFPLElBQUksQ0FBQyxLQUFLLFFBQVEsRUFBRTtBQUNqQztBQUNBLElBQUksSUFBSSxPQUFPLElBQUksQ0FBQyxLQUFLLFFBQVEsRUFBRTtBQUNuQyxNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDO0FBQzNCLElBQUk7QUFDSixJQUFJLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDO0FBQ3ZCLEVBQUU7O0FBRUYsRUFBRSxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTTs7QUFFdkIsRUFBRSxRQUFRLEdBQUc7QUFDYixJQUFJLEtBQUssQ0FBQztBQUNWLE1BQU0sT0FBTyxJQUFJO0FBQ2pCLElBQUksS0FBSyxDQUFDO0FBQ1YsTUFBTSxPQUFPLEdBQUcsR0FBRyxJQUFJO0FBQ3ZCLElBQUk7QUFDSixNQUFNLE9BQU8sSUFBSTtBQUNqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsS0FBSyxDQUFDLE1BQU0sRUFBRTtBQUN2QixFQUFFLFFBQVEsTUFBTSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO0FBQzdEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLE1BQU0sQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ2hDLEVBQUUsS0FBSyxJQUFJLEdBQUcsSUFBSSxNQUFNLEVBQUU7QUFDMUIsSUFBSSxJQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsd0JBQXdCLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQztBQUM1RCxJQUFJLElBQUksS0FBSyxJQUFJLENBQUMsTUFBTSxDQUFDLHdCQUF3QixDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsRUFBRTtBQUNoRSxNQUFNLE1BQU0sQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxLQUFLLENBQUM7QUFDL0MsSUFBSTtBQUNKLEVBQUU7QUFDRixFQUFFLE9BQU8sTUFBTTtBQUNmOztBQUVBLElBQUksT0FBTyxnQkFBZ0IsTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUN6QyxFQUFFLFNBQVMsRUFBRSxJQUFJO0FBQ2pCLEVBQUUsZUFBZSxFQUFFLGVBQWU7QUFDbEMsRUFBRSxLQUFLLEVBQUUsS0FBSztBQUNkLEVBQUUsTUFBTSxFQUFFLE1BQU07QUFDaEIsRUFBRSxRQUFRLEVBQUUsUUFBUTtBQUNwQixFQUFFLGVBQWUsRUFBRSxlQUFlO0FBQ2xDLEVBQUUsYUFBYSxFQUFFLGFBQWE7QUFDOUIsRUFBRSxJQUFJLEVBQUUsSUFBSTtBQUNaLEVBQUUsY0FBYyxFQUFFLGNBQWM7QUFDaEMsRUFBRSxLQUFLLEVBQUUsS0FBSztBQUNkLEVBQUUsZ0JBQWdCLEVBQUUsZ0JBQWdCO0FBQ3BDLEVBQUUsZUFBZSxFQUFFO0FBQ25CLENBQUMsQ0FBQzs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxTQUFTLENBQUM7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxPQUFPLFVBQVUsQ0FBQyxPQUFPLEVBQUU7QUFDN0I7QUFDQSxJQUFJLElBQUksT0FBTyxHQUFHLEVBQUU7QUFDcEI7QUFDQSxJQUFJLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFO0FBQ2xELElBQUksT0FBTyxDQUFDLEtBQUssR0FBRyxjQUFjLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDdkQsSUFBSSxPQUFPLENBQUMsT0FBTyxHQUFHLGNBQWMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQzs7QUFFekQsSUFBSSxPQUFPLElBQUksU0FBUyxDQUFDLE9BQU8sQ0FBQztBQUNqQyxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsT0FBTyxXQUFXLENBQUMsUUFBUSxFQUFFO0FBQy9CLElBQUksSUFBSSxRQUFRLEdBQUcsSUFBSSxTQUFTLEVBQUU7QUFDbEMsSUFBSSxRQUFRLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQztBQUNsQyxJQUFJLE9BQU8sUUFBUTtBQUNuQixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFdBQVcsQ0FBQyxLQUFLLEVBQUU7QUFDckIsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQztBQUN4QixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxLQUFLLEdBQUcsQ0FBQzs7QUFFWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsT0FBTyxHQUFHLENBQUM7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsTUFBTSxHQUFHLENBQUM7O0FBRVo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxRQUFRLEdBQUcsWUFBWTs7QUFFekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsS0FBSyxHQUFHO0FBQ1YsSUFBSSxPQUFPLFNBQVMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO0FBQ2xELEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsUUFBUSxDQUFDLEtBQUssRUFBRTtBQUNsQixJQUFJLElBQUksS0FBSyxFQUFFO0FBQ2YsTUFBTSxLQUFLLElBQUksQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtBQUN0RCxRQUFRLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLO0FBQ3pCLE1BQU07QUFDTixJQUFJO0FBQ0osSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO0FBQ3JCLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFdBQVcsQ0FBQyxRQUFRLEVBQUU7QUFDeEIsSUFBSSxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQzs7QUFFakMsSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLFFBQVEsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUM7QUFDdkMsSUFBSSxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDOztBQUVuQyxJQUFJLElBQUksS0FBSyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztBQUMvQixJQUFJLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7QUFDbkMsSUFBSSxPQUFPLElBQUk7QUFDZixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFNBQVMsR0FBRztBQUNkLElBQUksT0FBTyxJQUFJLENBQUMsTUFBTSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO0FBQ2hFLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxPQUFPLENBQUMsS0FBSyxFQUFFO0FBQ2pCLElBQUksSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRTtBQUM1QixJQUFJLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQyxTQUFTLEVBQUU7QUFDN0IsSUFBSSxPQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzVCLEVBQUU7O0FBRUYsRUFBRSxVQUFVLEdBQUc7QUFDZjtBQUNBLElBQUksSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRTtBQUMvQixJQUFJLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNO0FBQzVCLElBQUksT0FBTyxJQUFJLEdBQUcsTUFBTSxFQUFFO0FBQzFCLE1BQU0sSUFBSSxJQUFJLEtBQUs7QUFDbkIsSUFBSTtBQUNKLElBQUksT0FBTyxJQUFJLEdBQUcsS0FBSyxFQUFFO0FBQ3pCLE1BQU0sSUFBSSxJQUFJLEtBQUs7QUFDbkIsSUFBSTs7QUFFSixJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDOztBQUUxQjtBQUNBLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxFQUFFO0FBQ25CLE1BQU0sSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNO0FBQzFCLElBQUk7QUFDSixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxZQUFZLEdBQUc7QUFDakIsSUFBSSxPQUFPLE1BQU0sQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7QUFDdkUsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsUUFBUSxHQUFHO0FBQ2IsSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztBQUN2RixFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLFNBQVMsU0FBUyxJQUFJLENBQUM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLE9BQU8sdUJBQXVCLENBQUMsTUFBTSxFQUFFLFNBQVMsRUFBRTtBQUNwRCxJQUFJLFNBQVMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQzNCLE1BQU0sT0FBTyxDQUFDLEdBQUcsY0FBYyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUk7QUFDekQsSUFBSTtBQUNKLElBQUksSUFBSSxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7QUFDakMsSUFBSSxJQUFJLEVBQUUsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDckMsSUFBSSxJQUFJLFNBQVMsR0FBRyxHQUFHLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFO0FBQ3RFLElBQUksSUFBSSxJQUFJLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDOztBQUU5QyxJQUFJLElBQUksS0FBSyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsTUFBTSxHQUFHLENBQUM7QUFDbEMsSUFBSSxJQUFJLEtBQUssR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLE1BQU0sR0FBRyxDQUFDOztBQUVsQyxJQUFJLElBQUksV0FBVyxHQUFHLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHO0FBQ3hELElBQUksSUFBSSxXQUFXLEdBQUcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHOztBQUV4QyxJQUFJLElBQUksQ0FBQyxHQUFHO0FBQ1osTUFBTSxJQUFJLEVBQUUsV0FBVyxHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDL0MsTUFBTSxLQUFLLEVBQUUsV0FBVyxLQUFLLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSyxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJO0FBQzNJLE1BQU0sR0FBRyxFQUFFLEtBQUssSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsSUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSyxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJOztBQUV6SCxNQUFNLElBQUksRUFBRSxXQUFXLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUMvQyxNQUFNLE1BQU0sRUFBRSxXQUFXLElBQUksS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLLEdBQUcsQ0FBQyxHQUFHLFdBQVcsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJO0FBQzNILE1BQU0sTUFBTSxFQUFFLEtBQUssSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHO0FBQ3hHLEtBQUs7O0FBRUwsSUFBSSxJQUFJLElBQUksSUFBSSxHQUFHLEVBQUU7QUFDckIsTUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLFdBQVc7QUFDakMsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsRUFBRTtBQUN2QyxNQUFNLElBQUksR0FBRyxTQUFTLENBQUMsVUFB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LEdBQUc7QUFDdkMsZ0JBQWdCLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUNqQyxNQUFNLENBQUMsTUFBTSxJQUFJLEtBQUssQ0FBQyxNQUFNLElBQUksQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLEVBQUU7QUFDdkQsUUFBUSxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUMzRCxNQUFNLENBQUMsTUFBTSxJQUFJLEtBQUssQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO0FBQ3BDLFFBQVEsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDM0QsTUFBTTs7QUFFTixNQUFNLElBQUksSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLEVBQUU7QUFDbEUsUUFBUSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQ3JELE1BQU07O0FBRU4sTUFBTSxPQUFPLEtBQUssR0FBRyxJQUFJO0FBQ3pCLElBQUksQ0FBQzs7QUFFTCxJQUFJLE1BQU0sRUFBRSxTQUFTLE1BQU0sRUFBRTtBQUM3QixNQUFNLElBQUksU0FBUyxHQUFHLFdBQVcsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQztBQUN6RCxNQUFNLElBQUksSUFBSSxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLEdBQUcsU0FB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QTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxJQUFJLENBQUM7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxlQUFlLENBQUMsVUFBVSxFQUFFO0FBQ3JDLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRSxPQUFPLElBQUk7QUFDaEMsSUFBSSxNQUFNLEtBQUssR0FBRyxVQUFVLENBQUMsS0FBSyxDQUFDLG1EQUFtRCxDQUFDO0FBQ3ZGLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxPQUFPLElBQUk7QUFDM0IsSUFBSSxPQUFPO0FBQ1gsUUFBUSxDQUFDLEVBQUUsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDakMsUUFBUSxDQUFDLEVBQUUsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDakMsUUFBUSxDQUFDLEVBQUUsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDakMsUUFBUSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLFNBQVMsR0FBRyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztBQUM1RCxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGVBQWUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUNqRCxJQUFJLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUM7QUFDckUsSUFBSSxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDO0FBQ3JFLElBQUksTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQztBQUNyRSxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztBQUN0RSxJQUFJLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FB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SSxDQUFDLFVBQVUsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFO0FBQzlELFFBQVEsTUFBTSxLQUFLLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxtREFBbUQsQ0FBQztBQUMzRixRQUFRLElBQUksQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRTtBQUN6RCxRQUFRLE1BQU0sS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLFFBQVEsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUM7QUFDM0UsUUFBUSxNQUFNLEtBQUssR0FBRyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvRSxRQUFRLE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxTQUFTLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7QUFDdkUsUUFBUSxPQUFPLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRTtBQUMvQixJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksU0FBUyxDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUU7QUFDMUIsUUFBUSxNQUFNLENBQUMsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO0FBQy9DLFFBQVEsTUFBTSxDQUFDLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQUMvQyxRQUFRLE1BQU0sQ0FBQyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDL0MsUUFBUSxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzVELElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxzQkFBc0IsQ0FBQyxXQUFXLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUU7QUFDaEUsUUFBUSxNQUFNLE9BQU8sR0FBRyxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQy9DLGFBQWEsT0FBTyxDQUFDLElBQUk7QUFDekIsYUFBYSxPQUFPLENBQUMsSUFBSSxDQUFDOztBQUUxQixRQUFRLElBQUksV0FBVztBQUN2QixRQUFRLElBQUksTUFBTTs7QUFFbEIsUUFBUSxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsSUFBSSxnQkFBZ0IsQ0FBQyxVQUFVLENBQUM7QUFDN0YsUUFBUSxNQUFNLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsWUFBWSxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUM7O0FBRXpGLFFBQVEsT0FBTyxDQUFDLGNBQWMsQ0FBQyxNQUFNLElBQUk7QUFDekMsWUFBWSxXQUFXLEdBQUcsTUFBTTtBQUNoQyxZQUFZLE1BQU0sQ0FBQyxRQUFRLENBQUMsWUFBWTtBQUN4QyxpQkFBaUIsUUFBUSxDQUFDLE9BQU8sUUFBUSxLQUFLO0FBQzlDLG9CQUFvQixNQUFNLFlBQVksR0FBRyxNQUFNLEdBQUcsTUFBTSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUM7QUFDdkUsb0JBQW9CLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLFlBQVksQ0FBQztBQUMxRSxvQkFBb0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLEdBQUcsT0FBTztBQUM5RCxvQkFBb0IsSUFBSSxNQUFNLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLGVBQWUsR0FBRyxPQUFPO0FBQ3RGLG9CQUFvQixNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUU7QUFDOUMsZ0JBQWdCLENBQUMsQ0FBQztBQUNsQixRQUFRLENBQUMsQ0FBQzs7QUFFVixRQUFRLE9BQU8sQ0FBQyxTQUFTLENBQUMsZUFBZSxJQUFJO0FBQzdDLFlBQVksTUFBTSxHQUFHLGVBQWU7QUFDcEMsWUFBWSxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSTtBQUN2QyxpQkFBaUIsUUFBUSxDQUFDLFlBQVk7QUFDdEMsaUJBQWlCLGlCQUFpQjtBQUNsQyxpQkFBaUIsUUFBUSxDQUFDLE9BQU8sUUFBUSxLQUFLO0FBQzlDLG9CQUFvQixNQUFNLFlBQVksR0FBRyxXQUFXLEdBQUcsV0FBVyxDQUFDLFFBQVEsRUFBRSxHQUFHLFNBQVM7QUFDekYsb0JBQW9CLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQztBQUMxRSxvQkFBb0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLEdBQUcsT0FBTztBQUM5RCxvQkFBb0IsSUFBSSxXQUFXLElBQUksV0FBVyxDQUFDLE9BQU8sRUFBRTtBQUM1RCx3QkFBd0IsV0FBVyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsZUFBZSxHQUFHLE9BQU87QUFDM0Usb0JBQW9CO0FBQ3BCLG9CQUFvQixNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUU7QUFDOUMsZ0JBQWdCLENBQUMsQ0FBQztBQUNsQixRQUFRLENBQUMsQ0FBQzs7QUFFVixRQUFRLElBQUksV0FBVyxJQUFJLFdBQVcsQ0FBQyxPQUFPLEVBQUU7QUFDaEQsWUFBWSxXQUFXLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxlQUFlLEdBQUcsWUFBWTtBQUNwRSxRQUFROztBQUVSLFFBQVEsT0FBTyxDQUFDLGNBQWMsQ0FBQyxNQUFNLElBQUk7QUFDekMsWUFBWSxNQUFNLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLFVBQVUsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZO0FBQzVGLGdCQUFnQixNQUFNLFlBQVksR0FBRyxnQkFBZ0IsQ0FBQyxVQUFVLENBQUM7QUFDakUsZ0JBQWdCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxHQUFHLFlBQVk7O0FBRS9ELGdCQUFnQixNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDOztBQUVyRSxnQkFBZ0IsSUFBSSxXQUFXLEVBQUU7QUFDakMsb0JBQW9CLFdBQVcsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO0FBQy9DLG9CQUFvQixJQUFJLFdBQVcsQ0FBQyxPQUFPLEVBQUU7QUFDN0Msd0JBQXdCLFdBQVcsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLGVBQWUsR0FBRyxZQUFZO0FBQ2hGLG9CQUFvQjtBQUNwQixnQkFBZ0I7QUFDaEIsZ0JBQWdCLElBQUksTUFBTSxFQUFFO0FBQzVCLG9CQUFvQixNQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQztBQUMxQyxnQkFBZ0I7O0FBRWhCLGdCQUFnQixNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUU7QUFDMUMsWUFBWSxDQUFDLENBQUM7QUFDZCxRQUFRLENBQUMsQ0FBQztBQUNWLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksbUJBQW1CLENBQUMsT0FBTyxFQUFFLGNBQWMsRUFBRTtBQUNqRCxRQUFRLE1BQU0sWUFBWSxHQUFHLFNBQVMsQ0FBQyxFQUFFLEdBQUcsRUFBRSw2QkFBNkIsRUFBRSxDQUFDO0FBQzlFLFFBQVEsWUFBWSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsTUFBTTtBQUMzQyxRQUFRLE9BQU8sQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQztBQUN2RCxRQUFRLE1BQU0sZUFBZSxHQUFHLE1BQU07QUFDdEMsWUFBWSxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRTtBQUNyRCxZQUFZLE1BQU0sV0FBVyxHQUFHLGNBQWMsQ0FBQyxLQUFLLENBQUM7QUFDckQsWUFBWSxZQUFZLENBQUMsS0FBSyxFQUFFO0FBQ2hDLFlBQVksSUFBSSxXQUFXLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtBQUMxQyxnQkFBZ0IsWUFBWSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsTUFBTTtBQUNuRCxnQkFBZ0I7QUFDaEIsWUFBWTtBQUNaLFlBQVksWUFBWSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsT0FBTztBQUNoRCxZQUFZLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUk7QUFDckQsZ0JBQWdCLE1BQU0sSUFBSSxHQUFHLFlBQVksQ0FBQyxTQUFTLENBQUMsRUFBRSxHQUFHLEVBQUUsd0JBQXdCLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDO0FBQ2xHLGdCQUFnQixJQUFJLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxLQUFLO0FBQzFELG9CQUFvQixDQUFDLENBQUMsY0FBYyxFQUFFO0FBQ3RDLG9CQUFvQixPQUFPLENBQUMsS0FBSyxHQUFHLElBQUk7QUFDeEMsb0JBQW9CLE9BQU8sQ0FBQyxhQUFhLENBQUMsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDN0Qsb0JBQW9CLFlBQVksQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE1BQU07QUFDdkQsZ0JBQWdCLENBQUMsQ0FBQztBQUNsQixZQUFZLENBQUMsQ0FBQztBQUNkLFFBQVEsQ0FBQztBQUNULFFBQVEsT0FBTyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxlQUFlLENBQUM7QUFDMUQsUUFBUSxPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLGVBQWUsQ0FBQztBQUMxRCxRQUFRLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsTUFBTSxVQUFVLENBQUMsTUFBTSxFQUFFLFlBQVksQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUMvRyxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSx1QkFBdUIsQ0FBQyxXQUFXLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUU7QUFDakUsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFVBQVUsRUFBRTtBQUN6RSxRQUFRLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQztBQUMvRCxRQUFRLElBQUksY0FBYyxJQUFJLGNBQWMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQ3pELFlBQVksY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sRUFBRSxLQUFLLEtBQUs7QUFDdEQsZ0JBQWdCLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxJQUFJO0FBQzdFLG9CQUFvQixNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFVBQVUsQ0FBQyxlQUFlO0FBQ3RFLHlCQUF5QixPQUFPLENBQUMsWUFBWTtBQUM3Qyw0QkFBNEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7QUFDN0UsNEJBQTRCLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRTtBQUN0RCw0QkFBNEIsSUFBSSxDQUFDLGNBQWMsRUFBRTtBQUNqRCx3QkFBd0IsQ0FBQyxDQUFDO0FBQzFCLGdCQUFnQixDQUFDLENBQUM7QUFDbEIsWUFBWSxDQUFDLENBQUM7QUFDZCxRQUFRLENBQUMsTUFBTTtBQUNmLFlBQVksV0FBVyxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsRUFBRSxJQUFJLEVBQUUsK0JBQStCLEVBQUUsR0FBRyxFQUFFLDBCQUEwQixFQUFFLENBQUM7QUFDakgsUUFBUTtBQUNSLFFBQVEsTUFBTSxVQUFVLEdBQUcsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ25ELFFBQVEsSUFBSSxTQUFTO0FBQ3JCLFFBQVEsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUk7QUFDbkMsWUFBWSxTQUFTLEdBQUcsSUFBSTtBQUM1QixZQUFZLE1BQU0sVUFBVSxHQUFHLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLGlCQUFpQixFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksT0FBTyxLQUFLLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUM7QUFDbkwsWUFBWSxJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxVQUFVLENBQUM7QUFDOUQsWUFBWSxJQUFJLENBQUMsY0FBYyxDQUFDLGdDQUFnQyxDQUFDO0FBQ2pFLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sSUFBSTtBQUMvQixZQUFZLE1BQU0sQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUMsVUFBVSxDQUFDLG9DQUFvQztBQUN2RixpQkFBaUIsT0FBTyxDQUFDLFlBQVk7QUFDckMsb0JBQW9CLE1BQU0sU0FBUyxHQUFHLFNBQVMsQ0FBQyxRQUFRLEVBQUU7QUFDMUQsb0JBQW9CLElBQUksU0FBUyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxFQUFFO0FBQzVGLHdCQUF3QixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDO0FBQ3hFLHdCQUF3QixNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUU7QUFDbEQsd0JBQXdCLElBQUksQ0FBQyxjQUFjLEVBQUU7QUFDN0Msb0JBQW9CO0FBQ3BCLGdCQUFnQixDQUFDLENBQUM7QUFDbEIsUUFBUSxDQUFDLENBQUM7QUFDVixJQUFJOztBQUVKLElBQUksT0FBTyxHQUFHO0FBQ2QsUUFBUSxNQUFNLEVBQUUsV0FBVyxFQUFFLEdBQUcsSUFBSTtBQUNwQyxRQUFRLFdBQVcsQ0FBQyxLQUFLLEVBQUU7O0FBRTNCO0FBQ0EsUUFBUSxNQUFNLGlCQUFpQixHQUFHLFdBQVcsQ0FBQyxTQUFTLENBQUMsRUFBRSxHQUFHLEVBQUUsMkJBQTJCLEVBQUUsQ0FBQztBQUM3RixRQUFRLE1BQU0sS0FBSyxHQUFHLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxxQkFBcUIsRUFBRSxDQUFDO0FBQ2pGLFFBQVEsSUFBSSxDQUFDLFNBQVMsR0FBRyxpQkFBaUIsQ0FBQyxTQUFTLENBQUMsRUFBRSxHQUFHLEVBQUUseUJBQXlCLEVBQUUsQ0FBQztBQUN4RixRQUFRLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDOztBQUV4RCxRQUFRLE1BQU0sSUFBSSxHQUFHO0FBQ3JCLFlBQVksT0FBTyxFQUFFLGlCQUFpQjtBQUN0QyxZQUFZLFVBQVUsRUFBRSxxQkFBcUI7QUFDN0MsWUFBWSxJQUFJLEVBQUUsZUFBZTtBQUNqQyxZQUFZLFdBQVcsRUFBRSxjQUFjO0FBQ3ZDLFlBQVksY0FBYyxFQUFFLGlCQUFpQjtBQUM3QyxZQUFZLElBQUksRUFBRSxhQUFhO0FBQy9CLFlBQVksVUFBVSxFQUFFLGdCQUFnQjtBQUN4QyxZQUFZLEtBQUssRUFBRSxXQUFXO0FBQzlCLFlBQVksTUFBTSxFQUFFLGtCQUFrQjtBQUN0QyxZQUFZLE1BQU0sRUFBRSxZQUFZO0FBQ2hDLFlBQVksS0FBSyxFQUFFLFdBQVc7QUFDOUIsWUFBWSxZQUFZLEVBQUUsaUJBQWlCO0FBQzNDLFlBQVksU0FBUyxFQUFFLE1BQU07QUFDN0IsWUFBWSxLQUFLLEVBQUU7QUFDbkIsU0FBUzs7QUFFVDtBQUNBLFFBQVEsS0FBSyxNQUFNLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUU7QUFDeEQsWUFBWSxNQUFNLFNBQVMsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRTtBQUN2RCxnQkFBZ0IsSUFBSSxFQUFFLElBQUk7QUFDMUIsZ0JBQWdCLEdBQUcsRUFBRTtBQUNyQixhQUFhLENBQUM7QUFDZCxZQUFZLElBQUksSUFBSSxDQUFDLFNBQVMsS0FBSyxHQUFHLEVBQUU7QUFDeEMsZ0JBQWdCLFNBQVMsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDO0FBQy9DLFlBQVk7QUFDWixZQUFZLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsTUFBTTtBQUN0RCxnQkFBZ0IsSUFBSSxDQUFDLFNBQVMsR0FBRyxHQUFHO0FBQ3BDO0FBQ0EsZ0JBQWdCLElBQUksQ0FBQyxjQUFjLEVBQUU7QUFDckMsWUFBWSxDQUFDLENBQUM7QUFDZCxRQUFROztBQUVSO0FBQ0EsUUFBUSxJQUFJLENBQUMseUJBQXlCLEVBQUU7QUFDeEM7QUFDQSxRQUFRLElBQUksSUFBSSxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFO0FBQ25ELFlBQVksSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLGNBQWM7QUFDMUQsUUFBUTtBQUNSLElBQUk7O0FBRUo7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSSxNQUFNLDBCQUEwQixDQUFDLFNBQVMsRUFBRTtBQUNoRCxRQUFRLFNBQVMsQ0FBQyxLQUFLLEVBQUU7O0FBRXpCLFFBQVEsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFdBQVcsRUFBRTtBQUNsRSxRQUFRLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLEVBQUU7O0FBRWxFO0FBQ0EsUUFBUSxNQUFNLFdBQVcsR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsSUFBSSxJQUFJO0FBQzVELFlBQVksTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQztBQUNuRSxZQUFZLElBQUksQ0FBQyxLQUFLLEVBQUUsT0FBTyxLQUFLOztBQUVwQztBQUNBLFlBQVksTUFBTSxTQUFTLEdBQUcsS0FBSyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQy9GLFlBQVksSUFBSSxTQUFTLEVBQUUsT0FBTyxJQUFJOztBQUV0QztBQUNBLFlBQVksTUFBTSxXQUFXLEdBQUcsS0FBSyxDQUFDLFdBQVc7QUFDakQsWUFBWSxJQUFJLFdBQVcsRUFBRTtBQUM3QixnQkFBZ0IsS0FBSyxNQUFNLEdBQUcsSUFBSSxXQUFXLEVBQUU7QUFDL0Msb0JBQW9CLE1BQU0sS0FBSyxHQUFHLFdBQVcsQ0FBQyxHQUFHLENBQUM7QUFDbEQsb0JBQW9CLElBQUksT0FBTyxLQUFLLEtBQUssUUFBUSxJQUFJLEtBQUssQ0FBQyxXQUFXLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUUsT0FBTyxJQUFJO0FBQ3hHLG9CQUFvQixJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksT0FBTyxJQUFJLEtBQUssUUFBUSxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxPQUFPLElBQUk7QUFDbEosZ0JBQWdCO0FBQ2hCLFlBQVk7QUFDWixZQUFZLE9BQU8sS0FBSztBQUN4QixRQUFRLENBQUMsQ0FBQzs7QUFFVixRQUFRLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLHNCQUFzQixJQUFJLEVBQUU7O0FBRTdFO0FBQ0EsUUFBUSxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSztBQUNuQyxZQUFZLE1BQU0sTUFBTSxHQUFHLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztBQUN0RCxZQUFZLE1BQU0sTUFBTSxHQUFHLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQzs7QUFFdEQsWUFBWSxJQUFJLE1BQU0sS0FBSyxFQUFFLElBQUksTUFBTSxLQUFLLEVBQUUsRUFBRSxPQUFPLENBQUMsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUM7QUFDM0YsWUFBWSxJQUFJLE1BQU0sS0FBSyxFQUFFLEVBQUUsT0FBTyxDQUFDO0FBQ3ZDLFlBQVksSUFBSSxNQUFNLEtBQUssRUFBRSxFQUFFLE9BQU8sRUFBRTtBQUN4QyxZQUFZLE9BQU8sTUFBTSxHQUFHLE1BQU07QUFDbEMsUUFBUSxDQUFDLENBQUM7O0FBRVY7QUFDQSxRQUFRLFdBQVcsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJO0FBQ3BDLFlBQVksTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDLFNBQVMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxnQkFBZ0IsRUFBRSxDQUFDO0FBQ3pFLFlBQVksTUFBTSxDQUFDLFNBQVMsR0FBRyxJQUFJO0FBQ25DLFlBQVksTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUk7O0FBRS9DLFlBQVksTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxhQUFhLEVBQUUsQ0FBQztBQUNuRSxZQUFZLE9BQU8sQ0FBQyxNQUFNLEVBQUUsZUFBZSxDQUFDO0FBQzVDLFlBQVksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7O0FBRXREO0FBQ0EsWUFBWSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxLQUFLO0FBQ3hELGdCQUFnQixDQUFDLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQztBQUMvRCxnQkFBZ0IsTUFBTSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDO0FBQ2hELFlBQVksQ0FBQyxDQUFDOztBQUVkLFlBQVksTUFBTSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsRUFBRSxNQUFNO0FBQ3JELGdCQUFnQixNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUM7QUFDbkQsWUFBWSxDQUFDLENBQUM7O0FBRWQsWUFBWSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxLQUFLO0FBQ3ZELGdCQUFnQixDQUFDLENBQUMsY0FBYyxFQUFFO0FBQ2xDLGdCQUFnQixNQUFNLFlBQVksR0FBRyxTQUFTLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQztBQUN6RSxnQkFBZ0IsSUFBSSxZQUFZLElBQUksWUFBWSxLQUFLLE1BQU0sRUFBRTtBQUM3RCxvQkFBb0IsTUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLHFCQUFxQixFQUFFO0FBQy9ELG9CQUFvQixNQUFNLE9BQU8sR0FBRyxDQUFDLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDO0FBQzFFLG9CQUFvQixJQUFJLE9BQU8sRUFBRTtBQUNqQyx3QkFBd0IsTUFBTSxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQyxXQUFXLENBQUM7QUFDeEYsb0JBQW9CLENBQUMsTUFBTTtBQUMzQix3QkFBd0IsTUFBTSxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQztBQUM1RSxvQkFBb0I7QUFDcEIsZ0JBQWdCO0FBQ2hCLFlBQVksQ0FBQyxDQUFDO0FBQ2QsUUFBUSxDQUFDLENBQUM7O0FBRVY7QUFDQSxRQUFRLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsWUFBWTtBQUN2RCxZQUFZLE1BQU0sUUFBUSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDaEcsWUFBWSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxzQkFBc0IsR0FBRyxRQUFRO0FBQ2xFLFlBQVksTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRTtBQUM1QyxZQUFZLElBQUksTUFBTSxDQUFDLDRCQUE0QixDQUFDO0FBQ3BELFFBQVEsQ0FBQyxDQUFDO0FBQ1YsSUFBSTs7QUFFSixJQUFJLHlCQUF5QixHQUFHO0FBQ2hDLFFBQVEsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUU7QUFDOUIsUUFBUSxRQUFRLElBQUksQ0FBQyxTQUFTO0FBQzlCLFlBQVksS0FBSyxTQUFTO0FBQzFCLGdCQUFnQixJQUFJLENBQUMscUJBQXFCLEVBQUU7QUFDNUMsZ0JBQWdCO0FBQ2hCLFlBQVksS0FBSyxZQUFZO0FBQzdCLGdCQUFnQixJQUFJLENBQUMsd0JBQXdCLEVBQUU7QUFDL0MsZ0JBQWdCO0FBQ2hCLFlBQVksS0FBSyxNQUFNO0FBQ3ZCLGdCQUFnQixJQUFJLENBQUMsa0JBQWtCLEVBQUU7QUFDekMsZ0JBQWdCO0FBQ2hCLFlBQVksS0FBSyxhQUFhO0FBQzlCLGdCQUFnQixJQUFJLENBQUMseUJBQXlCLEVBQUU7QUFDaEQsZ0JBQWdCO0FBQ2hCLFlBQVksS0FBSyxnQkFBZ0I7QUFDakMsZ0JBQWdCLElBQUksQ0FBQywyQkFBMkIsRUFBRTtBQUNsRCxnQkFBZ0I7QUFDaEIsWUFBWSxLQUFLLE1BQU07QUFDdkIsZ0JBQWdCLElBQUksQ0FBQyxrQkFBa0IsRUFBRTtBQUN6QyxnQkFBZ0I7QUFDaEIsWUFBWSxLQUFLLFlBQVk7QUFDN0IsZ0JBQWdCLElBQUksQ0FBQyx3QkFBd0IsRUFBRTtBQUMvQyxnQkFBZ0I7QUFDaEIsWUFBWSxLQUFLLE9BQU87QUFDeEIsZ0JBQWdCLElBQUksQ0FBQyxtQkFBbUIsRUFBRTtBQUMxQyxnQkFBZ0I7QUFDaEIsWUFBWSxLQUFLLFFBQVE7QUFDekIsZ0JBQWdCLElBQUksQ0FBQyx5QkFBeUIsRUFBRTtBQUNoRCxnQkFBZ0I7QUFDaEIsWUFBWSxLQUFLLFFBQVE7QUFDekIsZ0JBQWdCLElBQUksQ0FBQyxvQkFBb0IsRUFBRTtBQUMzQyxnQkFBZ0I7QUFDaEIsWUFBWSxLQUFLLE9BQU87QUFDeEIsZ0JBQWdCLElBQUksQ0FBQyxtQkFBbUIsRUFBRTtBQUMxQyxnQkFBZ0I7QUFDaEIsWUFBWSxLQUFLLGNBQWM7QUFDL0IsZ0JBQWdCLElBQUksQ0FBQyxxQkFBcUIsRUFBRTtBQUM1QyxnQkFBZ0I7QUFDaEIsWUFBWSxLQUFLLFdBQVc7QUFDNUIsZ0JBQWdCLElBQUksQ0FBQyxrQkFBa0IsRUFBRTtBQUN6QyxnQkFBZ0I7QUFDaEIsWUFBWSxLQUFLLE9BQU87QUFDeEIsZ0JBQWdCLElBQUksQ0FBQyxjQUFjLEVBQUU7QUFDckMsZ0JBQWdCO0FBQ2hCO0FBQ0EsSUFBSTs7QUFFSjtBQUNBLElBQUkscUJBQXFCLEdBQUc7QUFDNUIsUUFBUSxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsU0FBUztBQUMxQyxRQUFRLFdBQVcsQ0FBQyxLQUFLLEVBQUU7O0FBRTNCLFFBQVEsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsMEJBQTBCLEVBQUUsQ0FBQzs7QUFFeEU7QUFDQSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLFVBQVUsRUFBRTtBQUN6RSxRQUFRLE1BQU0saUJBQWlCLEdBQUcsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQ3hGLFFBQVEsaUJBQWlCLENBQUMsTUFBTSxDQUFDLFNBQVMsR0FBRztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsQ0FBQzs7QUFFVCxRQUFRLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxLQUFLLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsR0FBRyxLQUFLLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3JPLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLHVCQUF1QixDQUFDLENBQUMsT0FBTyxDQUFDLHdGQUF3RixDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLDBCQUEwQixDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sS0FBSyxJQUFJLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsMEJBQTBCLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNyVyxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQywyREFBMkQsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLEtBQUssSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLHNCQUFzQixHQUFHLEtBQUssQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDalUsUUFBUSxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLGdDQUFnQyxFQUFFLHNEQUFzRCxFQUFFLGlCQUFpQixDQUFDO0FBQzdKLFFBQVEsSUFBSSxDQUFDLHNCQUFzQixDQUFDLFdBQVcsRUFBRSwrQkFBK0IsRUFBRSxxREFBcUQsRUFBRSxnQkFBZ0IsQ0FBQztBQUMxSixRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxLQUFLLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxlQUFlLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3USxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxrRUFBa0UsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxLQUFLLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMxVCxRQUFRLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxXQUFXLEVBQUUsd0NBQXdDLEVBQUUsb0VBQW9FLEVBQUUseUJBQXlCLENBQUM7QUFDM0wsUUFBUSxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLHVDQUF1QyxFQUFFLG1FQUFtRSxFQUFFLHdCQUF3QixDQUFDOztBQUV4TDtBQUNBLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDLFVBQVUsRUFBRTs7QUFFdEU7QUFDQSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVc7QUFDL0IsYUFBYSxPQUFPLENBQUMsc0JBQXNCO0FBQzNDLGFBQWEsT0FBTyxDQUFDLDhFQUE4RTtBQUNuRyxhQUFhLFdBQVcsQ0FBQyxRQUFRLElBQUk7QUFDckMsaUJBQWlCLFNBQVMsQ0FBQyxVQUFVLEVBQUUsVUFBVTtBQUNqRCxpQkFBaUIsU0FBUyxDQUFDLFFBQVEsRUFBRSxRQUFRO0FBQzdDLGlCQUFpQixTQUFTLENBQUMsV0FBVyxFQUFFLFdBQVc7QUFDbkQsaUJBQWlCLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxjQUFjO0FBQzdELGlCQUFpQixRQUFRLENBQUMsT0FBTyxLQUFLLEtBQUs7QUFDM0Msb0JBQW9CLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGNBQWMsR0FBRyxLQUFLO0FBQy9ELG9CQUFvQixNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUU7QUFDOUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDOztBQUVuQixRQUFRLElBQUksT0FBTyxDQUFDLFdBQVc7QUFDL0IsYUFBYSxPQUFPLENBQUMsZ0NBQWdDO0FBQ3JELGFBQWEsT0FBTyxDQUFDLG1GQUFtRjtBQUN4RyxhQUFhLE9BQU8sQ0FBQyxJQUFJLElBQUk7QUFDN0IsaUJBQWlCLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRO0FBQ3ZELGlCQUFpQixRQUFRLENBQUMsT0FBTyxLQUFLLEtBQUs7QUFDM0Msb0JBQW9CLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFFBQVEsR0FBRyxLQUFLO0FBQ3pELG9CQUFvQixNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUU7QUFDOUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO0FBQ25CLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLHFDQUFxQyxDQUFDLENBQUMsT0FBTyxDQUFDLHNFQUFzRSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGlCQUFpQixDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sS0FBSyxJQUFJLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsaUJBQWlCLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvVSxRQUFRLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxXQUFXLEVBQUUsbUNBQW1DLEVBQUUsaURBQWlELEVBQUUsdUJBQXVCLENBQUM7QUFDakssUUFBUSxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLGtDQUFrQyxFQUFFLGdEQUFnRCxFQUFFLHNCQUFzQixDQUFDO0FBQzlKLFFBQVEsSUFBSSxDQUFDLHNCQUFzQixDQUFDLFdBQVcsRUFBRSwwQ0FBMEMsRUFBRSxnRUFBZ0UsRUFBRSwwQkFBMEIsQ0FBQztBQUMxTCxRQUFRLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxXQUFXLEVBQUUseUNBQXlDLEVBQUUsK0RBQStELEVBQUUseUJBQXlCLENBQUM7O0FBRXZMLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUMsT0FBTyxDQUFDLCtEQUErRCxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLHFCQUFxQixDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sS0FBSyxJQUFJLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMscUJBQXFCLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzVSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVc7QUFDL0IsYUFBYSxPQUFPLENBQUMseUJBQXlCO0FBQzlDLGFBQWEsT0FBTyxDQUFDLCtJQUErSTtBQUNwSyxhQUFhLE9BQU8sQ0FBQyxJQUFJLElBQUk7QUFDN0IsaUJBQWlCLGNBQWMsQ0FBQyxLQUFLO0FBQ3JDLGlCQUFpQixRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsb0JBQW9CO0FBQ25FLGlCQUFpQixRQUFRLENBQUMsT0FBTyxLQUFLLEtBQUs7QUFDM0Msb0JBQW9CLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLG9CQUFvQixHQUFHLEtBQUssSUFBSSxLQUFLO0FBQzlFLG9CQUFvQixNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUU7QUFDOUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDOzs7O0FBSW5CO0FBQ0EsUUFBUSxNQUFNLGlCQUFpQixHQUFHLElBQUksT0FBTyxDQUFDLFdBQVc7QUFDekQsYUFBYSxPQUFPLENBQUMsb0JBQW9CO0FBQ3pDLGFBQWEsT0FBTyxDQUFDLHlEQUF5RCxDQUFDOztBQUUvRSxRQUFRLE1BQU0seUJBQXlCLEdBQUcsV0FBVyxDQUFDLFNBQVMsRUFBRTs7QUFFakUsUUFBUSxNQUFNLHNCQUFzQixHQUFHLENBQUMsS0FBSyxLQUFLO0FBQ2xELFlBQVkseUJBQXlCLENBQUMsS0FBSyxFQUFFO0FBQzdDLFlBQVksSUFBSSxLQUFLLEtBQUssTUFBTSxFQUFFO0FBQ2xDLGdCQUFnQixJQUFJLENBQUMsc0JBQXNCLENBQUMseUJBQXlCLEVBQUUsb0NBQW9DLEVBQUUsNERBQTRELEVBQUUsMEJBQTBCLENBQUM7QUFDdE0sZ0JBQWdCLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyx5QkFBeUIsRUFBRSxtQ0FBbUMsRUFBRSwyREFBMkQsRUFBRSx5QkFBeUIsQ0FBQztBQUNuTSxZQUFZLENBQUMsTUFBTSxJQUFJLEtBQUssS0FBSyxRQUFRLElBQUksS0FBSyxLQUFLLFFBQVEsRUFBRTtBQUNqRSxnQkFBZ0IsSUFBSSxDQUFDLHNCQUFzQixDQUFDLHlCQUF5QixFQUFFLHlCQUF5QixFQUFFLDhEQUE4RCxFQUFFLGtCQUFrQixDQUFDO0FBQ3JMLFlBQVk7QUFDWixRQUFRLENBQUM7O0FBRVQsUUFBUSxpQkFBaUIsQ0FBQyxXQUFXLENBQUMsUUFBUSxJQUFJO0FBQ2xELFlBQVk7QUFDWixpQkFBaUIsU0FBUyxDQUFDLE1BQU0sRUFBRSxvQkFBb0I7QUFDdkQsaUJBQWlCLFNBQVMsQ0FBQyxNQUFNLEVBQUUsZ0JBQWdCO0FBQ25ELGlCQUFpQixTQUFTLENBQUMsUUFBUSxFQUFFLG9CQUFvQjtBQUN6RCxpQkFBaUIsU0FBUyxDQUFDLFFBQVEsRUFBRSxvQkFBb0I7QUFDekQsaUJBQWlCLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUI7QUFDbEUsaUJBQWlCLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUMzQyxvQkFBb0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsbUJBQW1CLEdBQUcsS0FBSztBQUNwRSxvQkFBb0IsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFO0FBQzlDLG9CQUFvQixzQkFBc0IsQ0FBQyxLQUFLLENBQUM7QUFDakQsZ0JBQWdCLENBQUMsQ0FBQztBQUNsQixRQUFRLENBQUMsQ0FBQzs7QUFFVixRQUFRLHNCQUFzQixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDO0FBQ3hFOztBQUVBLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLDhCQUE4QixDQUFDLENBQUMsT0FBTyxDQUFDLGlFQUFpRSxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLHVCQUF1QixDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sS0FBSyxJQUFJLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsdUJBQXVCLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNyVixRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxzQ0FBc0MsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxzRUFBc0UsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLEtBQUssSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLHFCQUFxQixHQUFHLEtBQUssQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDOVYsUUFBUSxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLG9DQUFvQyxFQUFFLGdFQUFnRSxFQUFFLHlCQUF5QixDQUFDO0FBQ25MLFFBQVEsSUFBSSxDQUFDLHNCQUFzQixDQUFDLFdBQVcsRUFBRSxtQ0FBbUMsRUFBRSwrREFBK0QsRUFBRSx3QkFBd0IsQ0FBQztBQUNoTCxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxzREFBc0QsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxLQUFLLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvUyxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxxRUFBcUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLEtBQUssSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLHFCQUFxQixHQUFHLEtBQUssQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaFYsUUFBUSxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLDBCQUEwQixFQUFFLHVDQUF1QyxFQUFFLHdCQUF3QixDQUFDO0FBQy9JLFFBQVEsSUFBSSxDQUFDLHNCQUFzQixDQUFDLFdBQVcsRUFBRSw0Q0FBNEMsRUFBRSx1REFBdUQsRUFBRSx3QkFBd0IsQ0FBQztBQUNqTCxRQUFRLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxXQUFXLEVBQUUsMkNBQTJDLEVBQUUsc0RBQXNELEVBQUUsdUJBQXVCLENBQUM7QUFDOUssUUFBUSxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLDRDQUE0QyxFQUFFLHVEQUF1RCxFQUFFLDBCQUEwQixDQUFDO0FBQ25MLFFBQVEsSUFBSSxDQUFDLHNCQUFzQixDQUFDLFdBQVcsRUFBRSwyQ0FBMkMsRUFBRSxzREFBc0QsRUFBRSx5QkFBeUIsQ0FBQztBQUNoTCxJQUFJOzs7O0FBSUosSUFBSSx3QkFBd0IsR0FBRztBQUMvQixRQUFRLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxTQUFTO0FBQzFDLFFBQVEsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsOEJBQThCLEVBQUUsQ0FBQzs7QUFFNUU7QUFDQSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLFVBQVUsRUFBRTs7QUFFM0UsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQy9CLGFBQWEsT0FBTyxDQUFDLGdCQUFnQjtBQUNyQyxhQUFhLE9BQU8sQ0FBQyw4REFBOEQ7QUFDbkYsYUFBYSxXQUFXLENBQUMsUUFBUSxJQUFJO0FBQ3JDLGlCQUFpQixTQUFTLENBQUMsUUFBUSxFQUFFLFFBQVE7QUFDN0MsaUJBQWlCLFNBQVMsQ0FBQyxRQUFRLEVBQUUsUUFBUTtBQUM3QyxpQkFBaUIsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFlBQVk7QUFDM0QsaUJBQWlCLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUMzQyxvQkFBb0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsWUFBWSxHQUFHLEtBQUs7QUFDN0Qsb0JBQW9CLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRTtBQUM5QztBQUNBLG9CQUFvQixJQUFJLENBQUMsY0FBYyxFQUFFO0FBQ3pDLGdCQUFnQixDQUFDLENBQUMsQ0FBQzs7QUFFbkIsUUFBUSxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxZQUFZLEtBQUssUUFBUSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDbkYsUUFBUSxNQUFNLGVBQWUsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDOztBQUV0SSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVc7QUFDL0IsYUFBYSxPQUFPLENBQUMsMEJBQTBCO0FBQy9DLGFBQWEsT0FBTyxDQUFDLENBQUMsb0RBQW9ELEVBQUUsZUFBZSxDQUFDLHdDQUF3QyxDQUFDLENBQUM7QUFDdEksYUFBYSxPQUFPLENBQUMsSUFBSSxJQUFJO0FBQzdCLGdCQUFnQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksR0FBRyxNQUFNO0FBQzFDLGdCQUFnQixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGtCQUFrQjtBQUNyRSxxQkFBcUIsUUFBUSxDQUFDLE1BQU0sS0FBSyxJQUFJO0FBQzdDLHdCQUF3QixNQUFNLFlBQVksR0FBRyxNQUFNLENBQUMsS0FBSyxFQUFFLFlBQVksQ0FBQztBQUN4RSx3QkFBd0IsSUFBSSxZQUFZLENBQUMsR0FBRyxFQUFFLEtBQUssV0FBVyxFQUFFO0FBQ2hFLDRCQUE0QixJQUFJLE1BQU0sQ0FBQyxDQUFDLGdDQUFnQyxFQUFFLGVBQWUsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUM7QUFDbkcsNEJBQTRCLE9BQU87QUFDbkMsd0JBQXdCO0FBQ3hCLHdCQUF3QixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsR0FBRyxLQUFLO0FBQ3ZFLHdCQUF3QixNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUU7QUFDbEQsb0JBQW9CLENBQUMsQ0FBQztBQUN0QixZQUFZLENBQUMsQ0FBQzs7QUFFZCxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQywrQ0FBK0MsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxRQUFRLElBQUksUUFBUSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxLQUFLLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7QUFFN2xCLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLHlCQUF5QixDQUFDLENBQUMsT0FBTyxDQUFDLHVFQUF1RSxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLEtBQUssSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOztBQUVoVTtBQUNBLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLFVBQVUsRUFBRTs7QUFFckUsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQy9CLGFBQWEsT0FBTyxDQUFDLHlCQUF5QjtBQUM5QyxhQUFhLE9BQU8sQ0FBQyxxRUFBcUU7QUFDMUYsYUFBYSxTQUFTLENBQUMsTUFBTSxJQUFJO0FBQ2pDLGlCQUFpQixRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsZUFBZTtBQUM5RCxpQkFBaUIsUUFBUSxDQUFDLE9BQU8sS0FBSyxLQUFLO0FBQzNDLG9CQUFvQixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxlQUFlLEdBQUcsS0FBSztBQUNoRSxvQkFBb0IsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFO0FBQzlDLGdCQUFnQixDQUFDLENBQUMsQ0FBQzs7QUFFbkIsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQy9CLGFBQWEsT0FBTyxDQUFDLGtCQUFrQjtBQUN2QyxhQUFhLE9BQU8sQ0FBQyw0Q0FBNEM7QUFDakUsYUFBYSxXQUFXLENBQUMsUUFBUSxJQUFJO0FBQ3JDLGlCQUFpQixTQUFTLENBQUMsUUFBUSxFQUFFLG9CQUFvQjtBQUN6RCxpQkFBaUIsU0FBUyxDQUFDLFVBQVUsRUFBRSwwQkFBMEI7QUFDakUsaUJBQWlCLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxjQUFjO0FBQzdELGlCQUFpQixRQUFRLENBQUMsT0FBTyxLQUFLLEtBQUs7QUFDM0Msb0JBQW9CLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGNBQWMsR0FBRyxLQUFLO0FBQy9ELG9CQUFvQixNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUU7QUFDOUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDOztBQUVuQixRQUFRLElBQUksT0FBTyxDQUFDLFdBQVc7QUFDL0IsYUFBYSxPQUFPLENBQUMsMEJBQTBCO0FBQy9DLGFBQWEsT0FBTyxDQUFDLDJEQUEyRDtBQUNoRixhQUFhLE9BQU8sQ0FBQyxJQUFJLElBQUk7QUFDN0IsaUJBQWlCLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxxQkFBcUI7QUFDcEUsaUJBQWlCLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUMzQyxvQkFBb0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMscUJBQXFCLEdBQUcsS0FBSztBQUN0RSxvQkFBb0IsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFO0FBQzlDLGdCQUFnQixDQUFDLENBQUMsQ0FBQzs7QUFFbkI7QUFDQSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQyxVQUFVLEVBQUU7QUFDcEUsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxPQUFPLENBQUMsbUVBQW1FLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLEVBQUUsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxPQUFPLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sS0FBSyxJQUFJLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoZixRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxRQUFRLElBQUksUUFBUSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEVBQUUsbUJBQW1CLENBQUMsQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFLHlCQUF5QixDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLENBQUMsUUFBUSxDQUFDLE9BQU8sS0FBSyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsbUJBQW1CLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNwVyxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxnRUFBZ0UsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksRUFBRSxJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLHFCQUFxQixHQUFHLEtBQUssQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7O0FBRTdnQjtBQUNBLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUMsVUFBVSxFQUFFO0FBQzFFLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLHNCQUFzQixDQUFDLENBQUMsT0FBTyxDQUFDLG9FQUFvRSxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDLENBQUMsUUFBUSxDQUFDLE9BQU8sS0FBSyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsa0JBQWtCLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN4VSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxpRkFBaUYsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLHFCQUFxQixHQUFHLEtBQUssQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDOVYsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsK0JBQStCLENBQUMsQ0FBQyxPQUFPLENBQUMsbUZBQW1GLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxLQUFLLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyx3QkFBd0IsR0FBRyxLQUFLLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOzs7OztBQUs1VyxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVc7QUFDL0IsYUFBYSxPQUFPLENBQUMsK0JBQStCO0FBQ3BELGFBQWEsT0FBTyxDQUFDLG9FQUFvRTtBQUN6RixhQUFhLFNBQVMsQ0FBQyxNQUFNLElBQUk7QUFDakMsaUJBQWlCLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxvQkFBb0I7QUFDbkUsaUJBQWlCLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUMzQyxvQkFBb0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsb0JBQW9CLEdBQUcsS0FBSztBQUNyRSxvQkFBb0IsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFO0FBQzlDLGdCQUFnQixDQUFDLENBQUMsQ0FBQzs7O0FBR25CLFFBQVEsSUFBSSxDQUFDLHNCQUFzQixDQUFDLFdBQVcsRUFBRSxtQ0FBbUMsRUFBRSwyREFBMkQsRUFBRSx3QkFBd0IsQ0FBQztBQUM1SyxRQUFRLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxXQUFXLEVBQUUsa0NBQWtDLEVBQUUsMERBQTBELEVBQUUsdUJBQXVCLENBQUM7OztBQUd6SyxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVc7QUFDL0IsYUFBYSxPQUFPLENBQUMsb0JBQW9CO0FBQ3pDLGFBQWEsT0FBTyxDQUFDLG1FQUFtRTtBQUN4RixhQUFhLFNBQVMsQ0FBQyxNQUFNLElBQUk7QUFDakMsaUJBQWlCLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUI7QUFDaEUsaUJBQWlCLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUMzQyxvQkFBb0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsaUJBQWlCLEdBQUcsS0FBSztBQUNsRSxvQkFBb0IsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFO0FBQzlDLGdCQUFnQixDQUFDLENBQUMsQ0FBQzs7QUFFbkIsUUFBUSxJQUFJLENBQUMsc0JBQXNCO0FBQ25DLFlBQVksV0FBVztBQUN2QixZQUFZLGtDQUFrQztBQUM5QyxZQUFZLGtFQUFrRTtBQUM5RSxZQUFZO0FBQ1osU0FBUzs7QUFFVCxRQUFRLElBQUksQ0FBQyxzQkFBc0I7QUFDbkMsWUFBWSxXQUFXO0FBQ3ZCLFlBQVksaUNBQWlDO0FBQzdDLFlBQVksaUVBQWlFO0FBQzdFLFlBQVk7QUFDWixTQUFTOzs7QUFHVCxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxvQ0FBb0MsQ0FBQyxDQUFDLFVBQVUsRUFBRTs7QUFFM0YsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQy9CLGFBQWEsT0FBTyxDQUFDLDhCQUE4QjtBQUNuRCxhQUFhLE9BQU8sQ0FBQyxxUEFBcVA7QUFDMVEsYUFBYSxPQUFPLENBQUMsSUFBSSxJQUFJO0FBQzdCLGdCQUFnQjtBQUNoQixxQkFBcUIsY0FBYyxDQUFDLHlEQUF5RDtBQUM3RixxQkFBcUIsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU07QUFDekQscUJBQXFCLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUMvQyx3QkFBd0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLEtBQUs7QUFDM0Qsd0JBQXdCLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRTtBQUNsRCxvQkFBb0IsQ0FBQztBQUNyQixnQkFBZ0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLE9BQU87QUFDckQsZ0JBQWdCLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxVQUFVO0FBQ3RELFlBQVksQ0FBQztBQUNiLGFBQWEsU0FBUyxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsWUFBWTs7QUFFdEQsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQy9CLGFBQWEsT0FBTyxDQUFDLHVCQUF1QjtBQUM1QyxhQUFhLE9BQU8sQ0FBQywwRkFBMEY7QUFDL0csYUFBYSxXQUFXLENBQUMsUUFBUSxJQUFJO0FBQ3JDLGdCQUFnQjtBQUNoQixxQkFBcUIsU0FBUyxDQUFDLElBQUksRUFBRSxZQUFZO0FBQ2pELHFCQUFxQixTQUFTLENBQUMsSUFBSSxFQUFFLFlBQVk7QUFDakQscUJBQXFCLFNBQVMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtBQUM3QyxxQkFBcUIsU0FBUyxDQUFDLEtBQUssRUFBRSxTQUFTO0FBQy9DLHFCQUFxQixTQUFTLENBQUMsS0FBSyxFQUFFLFNBQVM7QUFDL0MscUJBQXFCLFNBQVMsQ0FBQyxLQUFLLEVBQUUsVUFBVTtBQUNoRCxxQkFBcUIsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDLFFBQVEsRUFBRTtBQUNoRixxQkFBcUIsUUFBUSxDQUFDLE9BQU8sS0FBSyxLQUFLO0FBQy9DLHdCQUF3QixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsR0FBRyxRQUFRLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQztBQUNyRix3QkFBd0IsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRTs7QUFFeEQ7QUFDQSx3QkFBd0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyx1QkFBdUIsRUFBRTtBQUM3RCxvQkFBb0IsQ0FBQyxDQUFDO0FBQ3RCLFlBQVksQ0FBQyxDQUFDOzs7QUFHZCxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVc7QUFDL0IsYUFBYSxPQUFPLENBQUMsMEJBQTBCO0FBQy9DLGFBQWEsT0FBTyxDQUFDLDJZQUEyWTtBQUNoYSxhQUFhLFdBQVcsQ0FBQyxRQUFRLElBQUk7QUFDckMsaUJBQWlCLFNBQVMsQ0FBQyxLQUFLLEVBQUUsVUFBVTtBQUM1QyxpQkFBaUIsU0FBUyxDQUFDLFNBQVMsRUFBRSxnQkFBZ0I7QUFDdEQsaUJBQWlCLFNBQVMsQ0FBQyxPQUFPLEVBQUUsbUJBQW1CO0FBQ3ZELGlCQUFpQixRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsMkJBQTJCLElBQUksS0FBSztBQUNuRixpQkFBaUIsUUFBUSxDQUFDLE9BQU8sS0FBSyxLQUFLO0FBQzNDO0FBQ0Esb0JBQW9CLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLDJCQUEyQixHQUFHLEtBQUs7QUFDNUUsb0JBQW9CLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUU7QUFDcEQsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDOztBQUVuQixRQUFRLElBQUksT0FBTyxDQUFDLFdBQVc7QUFDL0IsYUFBYSxPQUFPLENBQUMsNkJBQTZCO0FBQ2xELGFBQWEsT0FBTyxDQUFDLGtIQUFrSDtBQUN2SSxhQUFhLE9BQU8sQ0FBQyxJQUFJLElBQUk7QUFDN0IsZ0JBQWdCO0FBQ2hCLHFCQUFxQixjQUFjLENBQUMscUJBQXFCO0FBQ3pELHFCQUFxQixRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMseUJBQXlCO0FBQzVFLHFCQUFxQixRQUFRLENBQUMsT0FBTyxLQUFLLEtBQUs7QUFDL0Msd0JBQXdCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLHlCQUF5QixHQUFHLEtBQUssQ0FBQyxJQUFJLEVBQUUsSUFBSSxxQkFBcUI7QUFDOUcsd0JBQXdCLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUU7QUFDeEQsb0JBQW9CLENBQUMsQ0FBQzs7QUFFdEI7QUFDQSxnQkFBZ0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLE9BQU87QUFDckQsZ0JBQWdCLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxVQUFVO0FBQ3RELFlBQVksQ0FBQztBQUNiLGFBQWEsU0FBUyxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsWUFBWTs7O0FBR3REO0FBQ0EsUUFBUSxNQUFNLHFCQUFxQixHQUFHLElBQUksT0FBTyxDQUFDLFdBQVc7QUFDN0QsYUFBYSxPQUFPLENBQUMsdUJBQXVCO0FBQzVDLGFBQWEsV0FBVyxDQUFDLElBQUksSUFBSTtBQUNqQyxnQkFBZ0I7QUFDaEIscUJBQXFCLGNBQWMsQ0FBQyw0Q0FBNEM7QUFDaEYscUJBQXFCLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxvQkFBb0I7QUFDdkUscUJBQXFCLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUMvQyx3QkFBd0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsb0JBQW9CLEdBQUcsS0FBSyxJQUFJLDRDQUE0QztBQUN6SCx3QkFBd0IsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRTtBQUN4RCxvQkFBb0IsQ0FBQyxDQUFDOztBQUV0QjtBQUNBLGdCQUFnQixJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsT0FBTztBQUNyRCxnQkFBZ0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLE9BQU87QUFDdEQsZ0JBQWdCLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxVQUFVO0FBQ3RELFlBQVksQ0FBQyxDQUFDOztBQUVkO0FBQ0E7QUFDQSxRQUFRLE1BQU0sTUFBTSxHQUFHLHFCQUFxQixDQUFDLE1BQU07QUFDbkQsUUFBUSxNQUFNLENBQUMsVUFBVSxDQUFDLHVFQUF1RSxDQUFDOztBQUVsRyxRQUFRLE1BQU0sZUFBZSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDOztBQUVyRCxRQUFRLE1BQU0sWUFBWSxHQUFHO0FBQzdCLFlBQVksRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFLElBQUksRUFBRSxpQkFBaUIsRUFBRTtBQUM1RCxZQUFZLEVBQUUsSUFBSSxFQUFFLGVBQWUsRUFBRSxJQUFJLEVBQUUscUNBQXFDLEVBQUU7QUFDbEYsWUFBWSxFQUFFLElBQUksRUFBRSxhQUFhLEVBQUUsSUFBSSxFQUFFLG9CQUFvQjtBQUM3RCxTQUFTOztBQUVULFFBQVEsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUk7QUFDbEMsWUFBWSxNQUFNLElBQUksR0FBRyxlQUFlLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztBQUN2RCxZQUFZLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNuRCxZQUFZLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDekMsUUFBUSxDQUFDLENBQUM7O0FBRVY7QUFDQSxRQUFRLHFCQUFxQixDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLFlBQVk7Ozs7OztBQU12RSxJQUFJOztBQUVKLElBQUksa0JBQWtCLEdBQUc7QUFDekIsUUFBUSxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsU0FBUztBQUMxQyxRQUFRLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLHlCQUF5QixFQUFFLENBQUM7QUFDdkU7QUFDQSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLFVBQVUsRUFBRTtBQUM5RSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDLE9BQU8sQ0FBQywyRUFBMkUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLEtBQUssSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGdCQUFnQixHQUFHLEtBQUssQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL1UsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsNkJBQTZCLENBQUMsQ0FBQyxPQUFPLENBQUMsNEVBQTRFLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxLQUFLLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsR0FBRyxLQUFLLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3ZWLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVztBQUMvQixhQUFhLE9BQU8sQ0FBQyx5QkFBeUI7QUFDOUMsYUFBYSxPQUFPLENBQUMsOEVBQThFO0FBQ25HLGFBQWEsU0FBUyxDQUFDLE1BQU0sSUFBSTtBQUNqQyxpQkFBaUIsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFlBQVk7QUFDM0QsaUJBQWlCLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUMzQyxvQkFBb0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsWUFBWSxHQUFHLEtBQUs7QUFDN0Qsb0JBQW9CLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRTtBQUM5QyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7O0FBRW5CLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVztBQUMvQixhQUFhLE9BQU8sQ0FBQywyQ0FBMkM7QUFDaEUsYUFBYSxPQUFPLENBQUMsd0dBQXdHO0FBQzdILGFBQWEsU0FBUyxDQUFDLE1BQU0sSUFBSTtBQUNqQyxpQkFBaUIsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFVBQVU7QUFDekQsaUJBQWlCLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUMzQyxvQkFBb0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsVUFBVSxHQUFHLEtBQUs7QUFDM0Qsb0JBQW9CLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRTtBQUM5QyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7O0FBRW5CLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUMsT0FBTyxDQUFDLHlGQUF5RixDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGVBQWUsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7QUFFblc7QUFDQSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQyxVQUFVLEVBQUU7QUFDbkUsUUFBUSxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLGdCQUFnQixFQUFFLHNEQUFzRCxFQUFFLG1CQUFtQixDQUFDO0FBQy9JLFFBQVEsSUFBSSxDQUFDLHNCQUFzQixDQUFDLFdBQVcsRUFBRSxrQkFBa0IsRUFBRSxvRUFBb0UsRUFBRSxtQkFBbUIsQ0FBQztBQUMvSixRQUFRLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxXQUFXLEVBQUUsbUJBQW1CLEVBQUUsK0RBQStELEVBQUUsMEJBQTBCLENBQUM7QUFDbEssUUFBUSxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLGdCQUFnQixFQUFFLHdEQUF3RCxFQUFFLGVBQWUsQ0FBQztBQUM3SSxRQUFRLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxXQUFXLEVBQUUsb0JBQW9CLEVBQUUsMkRBQTJELEVBQUUsdUJBQXVCLENBQUM7QUFDNUo7QUFDQSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxVQUFVLEVBQUU7QUFDL0QsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxPQUFPLENBQUMsK0VBQStFLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxLQUFLLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNuVyxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxrRkFBa0YsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxLQUFLLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxjQUFjLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDM1YsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLGdHQUFnRyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNyVixRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyw4RUFBOEUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLEtBQUssSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLHNCQUFzQixHQUFHLEtBQUssQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN1UsUUFBUSxJQUFJLENBQUMsdUJBQXVCLENBQUMsV0FBVyxFQUFFLHVDQUF1QyxFQUFFLHNGQUFzRixFQUFFLHdCQUF3QixDQUFDO0FBQzVNLFFBQVEsSUFBSSxDQUFDLHVCQUF1QixDQUFDLFdBQVcsRUFBRSwrQkFBK0IsRUFBRSwrREFBK0QsRUFBRSxvQkFBb0IsQ0FBQzs7QUFFekssSUFBSTs7QUFFSixJQUFJLHlCQUF5QixHQUFHO0FBQ2hDLFFBQVEsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLFNBQVM7QUFDMUMsUUFBUSxXQUFXLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSx1QkFBdUIsRUFBRSxDQUFDOztBQUVyRSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVc7QUFDL0IsYUFBYSxPQUFPLENBQUMscUJBQXFCO0FBQzFDLGFBQWEsT0FBTyxDQUFDLHlGQUF5RjtBQUM5RyxhQUFhLFNBQVMsQ0FBQyxNQUFNLElBQUk7QUFDakMsaUJBQWlCLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUI7QUFDaEUsaUJBQWlCLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUMzQyxvQkFBb0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsaUJBQWlCLEdBQUcsS0FBSztBQUNsRSxvQkFBb0IsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFO0FBQzlDLGdCQUFnQixDQUFDLENBQUMsQ0FBQzs7QUFFbkIsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQy9CLGFBQWEsT0FBTyxDQUFDLG9CQUFvQjtBQUN6QyxhQUFhLE9BQU8sQ0FBQyx3RkFBd0Y7QUFDN0csYUFBYSxPQUFPLENBQUMsSUFBSSxJQUFJO0FBQzdCLGdCQUFnQixJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLE9BQU8sS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDaE0sZ0JBQWdCLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsZ0JBQWdCO0FBQ25FLHFCQUFxQixRQUFRLENBQUMsTUFBTSxLQUFLLElBQUk7QUFDN0Msd0JBQXdCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGdCQUFnQixHQUFHLEtBQUs7QUFDckUsd0JBQXdCLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRTtBQUNsRCxvQkFBb0IsQ0FBQyxDQUFDO0FBQ3RCLFlBQVksQ0FBQyxDQUFDOztBQUVkO0FBQ0EsUUFBUSxNQUFNLG1CQUFtQixHQUFHLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQztBQUMxRixRQUFRLG1CQUFtQixDQUFDLE1BQU0sQ0FBQyxTQUFTLEdBQUc7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxDQUFDO0FBQ1QsUUFBUSxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJO0FBQzVDLGFBQWEsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGdCQUFnQjtBQUMzRCxhQUFhLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUN2QyxnQkFBZ0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLEdBQUcsS0FBSztBQUM3RCxnQkFBZ0IsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFO0FBQzFDLFlBQVksQ0FBQyxDQUFDLENBQUM7O0FBRWYsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQy9CLGFBQWEsT0FBTyxDQUFDLHNCQUFzQjtBQUMzQyxhQUFhLE9BQU8sQ0FBQyxpRUFBaUU7QUFDdEYsYUFBYSxPQUFPLENBQUMsSUFBSSxJQUFJO0FBQzdCLGdCQUFnQixJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNySyxnQkFBZ0IsSUFBSSxDQUFDLGNBQWMsQ0FBQyw4QkFBOEI7QUFDbEUscUJBQXFCLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxrQkFBa0I7QUFDckUscUJBQXFCLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUMvQyx3QkFBd0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsa0JBQWtCLEdBQUcsS0FBSztBQUN2RSx3QkFBd0IsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFO0FBQ2xELG9CQUFvQixDQUFDLENBQUM7QUFDdEIsWUFBWSxDQUFDLENBQUM7O0FBRWQsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUMsVUFBVSxFQUFFOztBQUV0RSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVc7QUFDL0IsYUFBYSxPQUFPLENBQUMsMkJBQTJCO0FBQ2hELGFBQWEsT0FBTyxDQUFDLHNFQUFzRTtBQUMzRixhQUFhLFNBQVMsQ0FBQyxNQUFNLElBQUk7QUFDakMsaUJBQWlCLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUI7QUFDaEUsaUJBQWlCLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUMzQyxvQkFBb0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsaUJBQWlCLEdBQUcsS0FBSztBQUNsRSxvQkFBb0IsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFO0FBQzlDLGdCQUFnQixDQUFDLENBQUMsQ0FBQzs7QUFFbkIsUUFBUSxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLHVCQUF1QixFQUFFLGlEQUFpRCxFQUFFLG9CQUFvQixDQUFDO0FBQ2xKLElBQUk7O0FBRUosSUFBSSwyQkFBMkIsR0FBRztBQUNsQyxRQUFRLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxTQUFTO0FBQzFDLFFBQVEsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsMEJBQTBCLEVBQUUsQ0FBQztBQUN4RSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVc7QUFDL0IsYUFBYSxPQUFPLENBQUMsc0JBQXNCO0FBQzNDLGFBQWEsT0FBTyxDQUFDLDhEQUE4RDtBQUNuRixhQUFhLFdBQVcsQ0FBQyxRQUFRLElBQUk7QUFDckMsaUJBQWlCLFNBQVMsQ0FBQyxNQUFNLEVBQUUsTUFBTTtBQUN6QyxpQkFBaUIsU0FBUyxDQUFDLE9BQU8sRUFBRSxjQUFjO0FBQ2xELGlCQUFpQixTQUFTLENBQUMsU0FBUyxFQUFFLG9CQUFvQjtBQUMxRCxpQkFBaUIsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGtCQUFrQjtBQUNqRSxpQkFBaUIsUUFBUSxDQUFDLE9BQU8sS0FBSyxLQUFLO0FBQzNDLG9CQUFvQixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsR0FBRyxLQUFLO0FBQ25FLG9CQUFvQixNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUU7QUFDOUM7QUFDQSxvQkFBb0IsSUFBSSxDQUFDLGNBQWMsRUFBRTtBQUN6QyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7O0FBRW5CLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVztBQUMvQixhQUFhLE9BQU8sQ0FBQyxvQkFBb0I7QUFDekMsYUFBYSxPQUFPLENBQUMsOEZBQThGO0FBQ25ILGFBQWEsU0FBUyxDQUFDLE1BQU0sSUFBSTtBQUNqQyxpQkFBaUIsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFdBQVc7QUFDMUQsaUJBQWlCLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUMzQyxvQkFBb0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsV0FBVyxHQUFHLEtBQUs7QUFDNUQsb0JBQW9CLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRTtBQUM5QyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7O0FBRW5CLFFBQVEsSUFBSSxDQUFDLHNCQUFzQixDQUFDLFdBQVcsRUFBRSxnQkFBZ0IsRUFBRSxrREFBa0QsRUFBRSxjQUFjLENBQUM7O0FBRXRJO0FBQ0EsUUFBUSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGtCQUFrQixLQUFLLE9BQU8sRUFBRTtBQUNqRSxZQUFZLElBQUksT0FBTyxDQUFDLFdBQVc7QUFDbkMsaUJBQWlCLE9BQU8sQ0FBQyxzQkFBc0I7QUFDL0MsaUJBQWlCLE9BQU8sQ0FBQyxxRUFBcUU7QUFDOUYsaUJBQWlCLE9BQU8sQ0FBQyxJQUFJLElBQUk7QUFDakMscUJBQXFCLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUI7QUFDcEUscUJBQXFCLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUMvQyx3QkFBd0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsaUJBQWlCLEdBQUcsS0FBSztBQUN0RSx3QkFBd0IsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFO0FBQ2xELG9CQUFvQixDQUFDLENBQUMsQ0FBQzs7QUFFdkIsWUFBWSxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLGtCQUFrQixFQUFFLCtDQUErQyxFQUFFLGdCQUFnQixDQUFDO0FBQzNJLFlBQVksSUFBSSxDQUFDLHNCQUFzQixDQUFDLFdBQVcsRUFBRSx1QkFBdUIsRUFBRSxzREFBc0QsRUFBRSxvQkFBb0IsQ0FBQztBQUMzSixRQUFROztBQUVSLFFBQVEsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsS0FBSyxTQUFTLEVBQUU7O0FBRW5FLFlBQVksSUFBSSxPQUFPLENBQUMsV0FBVztBQUNuQyxpQkFBaUIsT0FBTyxDQUFDLDhCQUE4QjtBQUN2RCxpQkFBaUIsT0FBTyxDQUFDLHdJQUF3STtBQUNqSyxpQkFBaUIsT0FBTyxDQUFDLElBQUksSUFBSTtBQUNqQyxxQkFBcUIsY0FBYyxDQUFDLEtBQUs7QUFDekMscUJBQXFCLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxrQkFBa0I7QUFDckUscUJBQXFCLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUMvQyx3QkFBd0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsa0JBQWtCLEdBQUcsS0FBSyxJQUFJLEtBQUs7QUFDaEYsd0JBQXdCLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRTtBQUNsRCxvQkFBb0IsQ0FBQyxDQUFDLENBQUM7O0FBRXZCLFlBQVksV0FBVyxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsRUFBRSxJQUFJLEVBQUUsa0lBQWtJLEVBQUUsR0FBRyxFQUFFLDBCQUEwQixFQUFFLENBQUM7O0FBRXBOLFlBQVksSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUMsT0FBTyxDQUFDLDJFQUEyRSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLE9BQU8sS0FBSyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsbUJBQW1CLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDalcsWUFBWSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxPQUFPLENBQUMsaUlBQWlJLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxLQUFLLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7QUFFeFosWUFBWSxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLCtCQUErQixFQUFFLGlDQUFpQyxFQUFFLHVCQUF1QixDQUFDO0FBQ2pKLFlBQVksSUFBSSxDQUFDLHNCQUFzQixDQUFDLFdBQVcsRUFBRSxvQkFBb0IsRUFBRSx1REFBdUQsRUFBRSxxQkFBcUIsQ0FBQztBQUMxSixZQUFZLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxXQUFXLEVBQUUsb0JBQW9CLEVBQUUsdURBQXVELEVBQUUscUJBQXFCLENBQUM7QUFDMUosUUFBUTs7QUFFUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0EsSUFBSSxtQkFBbUIsQ0FBQyxTQUFTLEVBQUU7QUFDbkMsUUFBUSxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7O0FBRTFCO0FBQ0EsUUFBUSxNQUFNLFNBQVMsR0FBRztBQUMxQixZQUFZLE9BQU8sRUFBRSxZQUFZO0FBQ2pDLFlBQVksS0FBSyxFQUFFLE9BQU87QUFDMUIsWUFBWSxLQUFLLEVBQUUsT0FBTztBQUMxQixZQUFZLE1BQU0sRUFBRTtBQUNwQjtBQUNBLFNBQVM7O0FBRVQsUUFBUSxJQUFJLFdBQVcsR0FBRyxJQUFJLENBQUM7O0FBRS9CLFFBQVEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxLQUFLLEtBQUs7QUFDOUQsWUFBWSxNQUFNLFdBQVcsR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDO0FBQ3JFLFlBQVksV0FBVyxDQUFDLFNBQVMsR0FBRyxJQUFJO0FBQ3hDLFlBQVksV0FBVyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsR0FBRzs7QUFFNUM7QUFDQSxZQUFZLE1BQU0sTUFBTSxHQUFHLFdBQVcsQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDO0FBQy9ELFlBQVksT0FBTyxDQUFDLE1BQU0sRUFBRSxlQUFlLENBQUM7O0FBRTVDO0FBQ0EsWUFBWSxXQUFXLENBQUMsVUFBVSxDQUFDLEVBQUUsSUFBSSxFQUFFLFNBQVMsQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQzs7QUFFbkU7O0FBRUEsWUFBWSxXQUFXLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxLQUFLO0FBQzdELGdCQUFnQixXQUFXLEdBQUcsV0FBVztBQUN6QyxnQkFBZ0IsVUFBVSxDQUFDLE1BQU0sV0FBVyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDckUsWUFBWSxDQUFDLENBQUM7O0FBRWQsWUFBWSxXQUFXLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxLQUFLO0FBQzNELGdCQUFnQixXQUFXLEVBQUUsV0FBVyxDQUFDLFVBQVUsQ0FBQztBQUNwRCxnQkFBZ0IsV0FBVyxHQUFHLElBQUk7QUFDbEMsWUFBWSxDQUFDLENBQUM7O0FBRWQsWUFBWSxXQUFXLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxLQUFLO0FBQzVELGdCQUFnQixDQUFDLENBQUMsY0FBYyxFQUFFO0FBQ2xDLGdCQUFnQixNQUFNLFlBQVksR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQztBQUN4RSxnQkFBZ0IsSUFBSSxZQUFZLElBQUksWUFBWSxLQUFLLFdBQVcsRUFBRTtBQUNsRTtBQUNBLG9CQUFvQixNQUFNLElBQUksR0FBRyxXQUFXLENBQUMscUJBQXFCLEVBQUU7QUFDcEU7QUFDQSxvQkFBb0IsTUFBTSxPQUFPLEdBQUcsQ0FBQyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQzs7QUFFMUUsb0JBQW9CLElBQUksT0FBTyxFQUFFO0FBQ2pDO0FBQ0Esd0JBQXdCLFdBQVcsQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLFlBQVksRUFBRSxXQUFXLENBQUMsV0FBVyxDQUFDO0FBQ2xHLG9CQUFvQixDQUFDLE1BQU07QUFDM0I7QUFDQSx3QkFBd0IsV0FBVyxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsWUFBWSxFQUFFLFdBQVcsQ0FBQztBQUN0RixvQkFBb0I7QUFDcEIsZ0JBQWdCO0FBQ2hCLFlBQVksQ0FBQyxDQUFDOztBQUVkLFlBQVksV0FBVyxDQUFDLGdCQUFnQixDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsS0FBSztBQUM5RCxnQkFBZ0IsQ0FBQyxDQUFDLGNBQWMsRUFBRTtBQUNsQyxnQkFBZ0IsTUFBTSxRQUFRLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUNsRyxnQkFBZ0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsUUFBUSxHQUFHLFFBQVE7QUFDeEQsZ0JBQWdCLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRTtBQUMxQyxnQkFBZ0IsSUFBSSxNQUFNLENBQUMsa0JBQWtCLENBQUM7QUFDOUMsWUFBWSxDQUFDLENBQUM7QUFDZCxRQUFRLENBQUMsQ0FBQztBQUNWLElBQUk7O0FBRUosSUFBSSxrQkFBa0IsR0FBRztBQUN6QixRQUFRLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxTQUFTO0FBQzFDLFFBQVEsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsc0JBQXNCLEVBQUUsQ0FBQzs7QUFFcEUsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQy9CLGFBQWEsT0FBTyxDQUFDLDJCQUEyQjtBQUNoRCxhQUFhLE9BQU8sQ0FBQywyREFBMkQ7QUFDaEYsYUFBYSxXQUFXLENBQUMsUUFBUSxJQUFJO0FBQ3JDLGlCQUFpQixTQUFTLENBQUMsTUFBTSxFQUFFLFdBQVc7QUFDOUMsaUJBQWlCLFNBQVMsQ0FBQyxhQUFhLEVBQUUsZUFBZTtBQUN6RCxpQkFBaUIsU0FBUyxDQUFDLFVBQVUsRUFBRSxXQUFXO0FBQ2xELGlCQUFpQixRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsY0FBYztBQUM3RCxpQkFBaUIsUUFBUSxDQUFDLE9BQU8sS0FBSyxLQUFLO0FBQzNDLG9CQUFvQixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxjQUFjLEdBQUcsS0FBSztBQUMvRCxvQkFBb0IsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFO0FBQzlDLGdCQUFnQixDQUFDLENBQUMsQ0FBQzs7QUFFbkIsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQy9CLGFBQWEsT0FBTyxDQUFDLDBCQUEwQjtBQUMvQyxhQUFhLE9BQU8sQ0FBQyw0RkFBNEY7QUFDakgsYUFBYSxXQUFXLENBQUMsUUFBUSxJQUFJO0FBQ3JDLGlCQUFpQixTQUFTLENBQUMsTUFBTSxFQUFFLFdBQVc7QUFDOUMsaUJBQWlCLFNBQVMsQ0FBQyxhQUFhLEVBQUUsZUFBZTtBQUN6RCxpQkFBaUIsU0FBUyxDQUFDLFVBQVUsRUFBRSxXQUFXO0FBQ2xELGlCQUFpQixRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsb0JBQW9CO0FBQ25FLGlCQUFpQixRQUFRLENBQUMsT0FBTyxLQUFLLEtBQUs7QUFDM0Msb0JBQW9CLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLG9CQUFvQixHQUFHLEtBQUs7QUFDckUsb0JBQW9CLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRTtBQUM5QyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7O0FBRW5CLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLHFCQUFxQixDQUFDLENBQUMsT0FBTyxDQUFDLDJFQUEyRSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sS0FBSyxJQUFJLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsVSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyw4Q0FBOEMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxLQUFLLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7QUFFL1IsUUFBUSxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLHNCQUFzQixFQUFFLHFDQUFxQyxFQUFFLGtCQUFrQixDQUFDOztBQUVuSSxRQUFRLFdBQVcsQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUM7O0FBRS9DLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVztBQUMvQixhQUFhLE9BQU8sQ0FBQyxXQUFXO0FBQ2hDLGFBQWEsT0FBTyxDQUFDLG9EQUFvRCxDQUFDOztBQUUxRTtBQUNBLFFBQVEsTUFBTSxpQkFBaUIsR0FBRyxXQUFXLENBQUMsU0FBUyxDQUFDLHFCQUFxQixDQUFDO0FBQzlFLFFBQVEsSUFBSSxDQUFDLG1CQUFtQixDQUFDLGlCQUFpQixDQUFDOztBQUVuRCxRQUFRLFdBQVcsQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUM7O0FBRS9DLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUMsVUFBVSxFQUFFOztBQUV2RSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVc7QUFDL0IsYUFBYSxPQUFPLENBQUMsZ0JBQWdCO0FBQ3JDLGFBQWEsU0FBUyxDQUFDLE1BQU0sSUFBSTtBQUNqQyxpQkFBaUIsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLO0FBQ2xFLGlCQUFpQixRQUFRLENBQUMsT0FBTyxLQUFLLEtBQUs7QUFDM0Msb0JBQW9CLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLEdBQUcsS0FBSztBQUNwRSxvQkFBb0IsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFO0FBQzlDLGdCQUFnQixDQUFDLENBQUMsQ0FBQzs7QUFFbkIsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQy9CLGFBQWEsT0FBTyxDQUFDLHFCQUFxQjtBQUMxQyxhQUFhLFNBQVMsQ0FBQyxNQUFNLElBQUk7QUFDakMsaUJBQWlCLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsT0FBTztBQUNwRSxpQkFBaUIsUUFBUSxDQUFDLE9BQU8sS0FBSyxLQUFLO0FBQzNDLG9CQUFvQixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsT0FBTyxHQUFHLEtBQUs7QUFDdEUsb0JBQW9CLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRTtBQUM5QyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7QUFDbkIsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQy9CLGFBQWEsT0FBTyxDQUFDLGdCQUFnQjtBQUNyQyxhQUFhLFNBQVMsQ0FBQyxNQUFNLElBQUk7QUFDakMsaUJBQWlCLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSztBQUNsRSxpQkFBaUIsUUFBUSxDQUFDLE9BQU8sS0FBSyxLQUFLO0FBQzNDLG9CQUFvQixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxHQUFHLEtBQUs7QUFDcEUsb0JBQW9CLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRTtBQUM5QyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7O0FBRW5CLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVztBQUMvQixhQUFhLE9BQU8sQ0FBQyxpQkFBaUI7QUFDdEMsYUFBYSxTQUFTLENBQUMsTUFBTSxJQUFJO0FBQ2pDLGlCQUFpQixRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLE1BQU07QUFDbkUsaUJBQWlCLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUMzQyxvQkFBb0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLE1BQU0sR0FBRyxLQUFLO0FBQ3JFLG9CQUFvQixNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUU7QUFDOUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDOzs7O0FBSW5CLFFBQVEsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLENBQUM7O0FBRXpELFFBQVEsTUFBTSxlQUFlLEdBQUc7QUFDaEMsWUFBWSxFQUFFLEdBQUcsRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLHFCQUFxQixFQUFFO0FBQzNELFlBQVksRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxnQkFBZ0IsRUFBRTtBQUNwRCxZQUFZLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsZ0JBQWdCLEVBQUU7QUFDcEQsWUFBWSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLHNCQUFzQixFQUFFO0FBQzNELFlBQVksRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxzQkFBc0I7QUFDekQsU0FBUzs7QUFFVDtBQUNBLFFBQVEsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUk7QUFDckMsWUFBWSxJQUFJLGFBQWEsQ0FBQzs7QUFFOUIsWUFBWSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQ25DLGlCQUFpQixPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUk7QUFDL0IsaUJBQWlCLE9BQU8sQ0FBQyw2QkFBNkI7QUFDdEQsaUJBQWlCLE9BQU8sQ0FBQyxJQUFJLElBQUk7QUFDakMsb0JBQW9CLGFBQWEsR0FBRyxJQUFJLENBQUM7QUFDekMsb0JBQW9CO0FBQ3BCLHlCQUF5QixRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztBQUMxRyx5QkFBeUIsUUFBUSxDQUFDLE9BQU8sS0FBSyxLQUFLO0FBQ25ELDRCQUE0QixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxJQUFJLEVBQUU7QUFDL0UsNEJBQTRCLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRTtBQUN0RCx3QkFBd0IsQ0FBQyxDQUFDO0FBQzFCLGdCQUFnQixDQUFDO0FBQ2pCLGlCQUFpQixjQUFjLENBQUMsTUFBTSxJQUFJO0FBQzFDLG9CQUFvQjtBQUNwQix5QkFBeUIsT0FBTyxDQUFDLFlBQVksQ0FBQztBQUM5Qyx5QkFBeUIsVUFBVSxDQUFDLGtCQUFrQjtBQUN0RCx5QkFBeUIsT0FBTyxDQUFDLFlBQVk7QUFDN0M7QUFDQSw0QkFBNEIsTUFBTSxZQUFZLEdBQUcsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7O0FBRWpGO0FBQ0EsNEJBQTRCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsWUFBWTs7QUFFL0U7QUFDQSw0QkFBNEIsSUFBSSxhQUFhLEVBQUU7QUFDL0MsZ0NBQWdDLGFBQWEsQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDO0FBQ3BFLDRCQUE0Qjs7QUFFNUI7QUFDQSw0QkFBNEIsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFO0FBQ3RELDRCQUE0QixJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUM7QUFDdkUsd0JBQXdCLENBQUMsQ0FBQztBQUMxQixnQkFBZ0IsQ0FBQyxDQUFDO0FBQ2xCLFFBQVEsQ0FBQyxDQUFDOztBQUVWO0FBQ0E7QUFDQSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVc7QUFDL0IsYUFBYSxTQUFTLENBQUMsTUFBTSxJQUFJO0FBQ2pDLGlCQUFpQixhQUFhLENBQUMscUJBQXFCO0FBQ3BELGlCQUFpQixVQUFVLENBQUMsK0NBQStDO0FBQzNFLGlCQUFpQixPQUFPLENBQUMsWUFBWTtBQUNyQztBQUNBLG9CQUFvQixJQUFJLE9BQU8sQ0FBQywrQ0FBK0MsQ0FBQyxFQUFFO0FBQ2xGLHdCQUF3QixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsRUFBRSxHQUFHLGdCQUFnQixDQUFDLFFBQVEsRUFBRTtBQUN4Rix3QkFBd0IsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFO0FBQ2xELHdCQUF3QixJQUFJLE1BQU0sQ0FBQyxnQ0FBZ0MsQ0FBQzs7QUFFcEU7QUFDQTtBQUNBLHdCQUF3QixJQUFJLENBQUMsY0FBYyxFQUFFO0FBQzdDLG9CQUFvQjtBQUNwQixnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7O0FBRW5CLElBQUk7O0FBRUosSUFBSSx3QkFBd0IsR0FBRztBQUMvQixRQUFRLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxTQUFTO0FBQzFDLFFBQVEsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUseUJBQXlCLEVBQUUsQ0FBQztBQUN2RSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQyxVQUFVLEVBQUU7QUFDdEUsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsNkJBQTZCLENBQUMsQ0FBQyxPQUFPLENBQUMsMEVBQTBFLENBQUMsQ0FBQyxXQUFXLENBQUMsUUFBUSxJQUFJLFFBQVEsQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLG1CQUFtQixDQUFDLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSx5QkFBeUIsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLG9CQUFvQixHQUFHLEtBQUssQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN2IsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxPQUFPLENBQUMsZ0ZBQWdGLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLEVBQUUsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sS0FBSyxJQUFJLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDOWQsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsMEJBQTBCLENBQUMsQ0FBQyxPQUFPLENBQUMsdUZBQXVGLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsVUFBVSxFQUFFLGlCQUFpQixJQUFJLEtBQUssQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxpQkFBaUIsR0FBRyxLQUFLLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3pjLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLHNCQUFzQixDQUFDLENBQUMsT0FBTyxDQUFDLG1FQUFtRSxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFVBQVUsRUFBRSxpQkFBaUIsSUFBSSxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxLQUFLLEtBQUssRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsaUJBQWlCLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7QUFFaGIsUUFBUSxNQUFNLGdCQUFnQixHQUFHLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQztBQUN6RixRQUFRLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxTQUFTLEdBQUc7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxDQUFDOztBQUViLFFBQVEsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLElBQUksSUFBSTtBQUN6QyxhQUFhLGNBQWMsQ0FBQyxRQUFRO0FBQ3BDLGFBQWEsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFVBQVUsRUFBRSxVQUFVLElBQUksUUFBUTtBQUM3RSxhQUFhLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUN2QyxnQkFBZ0IsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFVBQVUsRUFBRTtBQUN0RCxvQkFBb0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsVUFBVSxHQUFHLEVBQUU7QUFDeEQsZ0JBQWdCO0FBQ2hCLGdCQUFnQixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsVUFBVSxHQUFHLEtBQUs7QUFDbEUsZ0JBQWdCLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRTtBQUMxQyxZQUFZLENBQUMsQ0FBQyxDQUFDOztBQUVmLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLFVBQVUsRUFBRTtBQUNuRSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQyx1RUFBdUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxLQUFLLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxlQUFlLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3VCxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQywwREFBMEQsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxLQUFLLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM5UyxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxtRkFBbUYsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDalYsUUFBUSxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLHdCQUF3QixFQUFFLHdFQUF3RSxFQUFFLDBCQUEwQixDQUFDOztBQUVoTCxJQUFJOztBQUVKLElBQUksbUJBQW1CLEdBQUc7QUFDMUIsUUFBUSxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsU0FBUztBQUMxQyxRQUFRLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLG9CQUFvQixFQUFFLENBQUM7QUFDbEUsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUMsVUFBVSxFQUFFO0FBQ3RFLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLHlCQUF5QixDQUFDLENBQUMsT0FBTyxDQUFDLDREQUE0RCxDQUFDLENBQUMsV0FBVyxDQUFDLFFBQVEsSUFBSSxRQUFRLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxhQUFhLEVBQUUseUJBQXlCLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLENBQUMsUUFBUSxDQUFDLE9BQU8sS0FBSyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsZUFBZSxHQUFHLEtBQUssQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDamEsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMscUJBQXFCLENBQUMsQ0FBQyxPQUFPLENBQUMsMkZBQTJGLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxLQUFLLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7QUFFelcsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsVUFBVSxFQUFFO0FBQ25FLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLHVCQUF1QixDQUFDLENBQUMsT0FBTyxDQUFDLDBGQUEwRixDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sS0FBSyxJQUFJLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsa0JBQWtCLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3VixRQUFRLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxXQUFXLEVBQUUsa0JBQWtCLEVBQUUsMERBQTBELEVBQUUsa0JBQWtCLENBQUM7QUFDcEosUUFBUSxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLG1CQUFtQixFQUFFLDJEQUEyRCxFQUFFLG1CQUFtQixDQUFDO0FBQ3ZKLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLG9CQUFvQixDQUFDLENBQUMsT0FBTyxDQUFDLGdGQUFnRixDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sS0FBSyxJQUFJLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM1VSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQyx5REFBeUQsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxLQUFLLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzUyxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQyx1REFBdUQsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxLQUFLLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNuUyxRQUFRLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxXQUFXLEVBQUUsdUJBQXVCLEVBQUUsMERBQTBELEVBQUUsaUJBQWlCLENBQUM7QUFDeEosUUFBUSxJQUFJLENBQUMsdUJBQXVCLENBQUMsV0FBVyxFQUFFLDZCQUE2QixFQUFFLDZEQUE2RCxFQUFFLGVBQWUsQ0FBQzs7QUFFaEssSUFBSTs7QUFFSixJQUFJLHlCQUF5QixHQUFHO0FBQ2hDLFFBQVEsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQztBQUMzQyxRQUFRLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLHVCQUF1QixFQUFFLENBQUM7QUFDckUsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUMsVUFBVSxFQUFFO0FBQ3RFLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVztBQUMvQixhQUFhLE9BQU8sQ0FBQyxrQkFBa0I7QUFDdkMsYUFBYSxPQUFPLENBQUMsa1RBQWtUO0FBQ3ZVLGFBQWEsT0FBTyxDQUFDLElBQUksSUFBSTtBQUM3QixpQkFBaUIsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU07QUFDckQsaUJBQWlCLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUMzQyxvQkFBb0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLEtBQUs7QUFDdkQsb0JBQW9CLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRTtBQUM5QyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7O0FBRW5CLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLFVBQVUsRUFBRTtBQUNuRSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVc7QUFDL0IsYUFBYSxPQUFPLENBQUMsb0JBQW9CO0FBQ3pDLGFBQWEsT0FBTyxDQUFDLGlKQUFpSjtBQUN0SyxhQUFhLFdBQVcsQ0FBQyxRQUFRLElBQUk7QUFDckMsaUJBQWlCLFNBQVMsQ0FBQyxLQUFLLEVBQUUsZUFBZTtBQUNqRCxpQkFBaUIsU0FBUyxDQUFDLEtBQUssRUFBRSxLQUFLO0FBQ3ZDLGlCQUFpQixTQUFTLENBQUMsUUFBUSxFQUFFLGNBQWM7QUFDbkQsaUJBQWlCLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxvQkFBb0I7QUFDbkUsaUJBQWlCLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUMzQyxvQkFBb0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsb0JBQW9CLEdBQUcsS0FBSztBQUNyRSxvQkFBb0IsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRTtBQUNwRCxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7O0FBRW5CO0FBQ0EsUUFBUSxNQUFNLEtBQUssR0FBRyxRQUFRLENBQUMsT0FBTztBQUN0QyxRQUFRLE1BQU0sV0FBVyxHQUFHLEtBQUssR0FBRyxZQUFZLEdBQUcsTUFBTTs7QUFFekQsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQy9CLGFBQWEsT0FBTyxDQUFDLCtDQUErQztBQUNwRSxhQUFhLE9BQU8sQ0FBQyxDQUFDLGtJQUFrSSxFQUFFLFdBQVcsQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDOzs7QUFHeE0sUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQy9CLGFBQWEsT0FBTyxDQUFDLGtCQUFrQjtBQUN2QyxhQUFhLE9BQU8sQ0FBQyxtRUFBbUUsQ0FBQzs7QUFFekY7QUFDQSxRQUFRLE1BQU0sa0JBQWtCLEdBQUcsV0FBVyxDQUFDLFNBQVMsQ0FBQyw4QkFBOEIsQ0FBQztBQUN4RixRQUFRLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxrQkFBa0IsQ0FBQztBQUMzRCxJQUFJOztBQUVKLElBQUksb0JBQW9CLEdBQUc7QUFDM0IsUUFBUSxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsU0FBUztBQUMxQyxRQUFRLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLHFCQUFxQixFQUFFLENBQUM7QUFDbkUsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQy9CLGFBQWEsT0FBTyxDQUFDLHFCQUFxQjtBQUMxQyxhQUFhLE9BQU8sQ0FBQyw4REFBOEQ7QUFDbkYsYUFBYSxXQUFXLENBQUMsUUFBUSxJQUFJO0FBQ3JDLGlCQUFpQixTQUFTLENBQUMsU0FBUyxFQUFFLG1CQUFtQjtBQUN6RCxpQkFBaUIsU0FBUyxDQUFDLGFBQWEsRUFBRSx5QkFBeUI7QUFDbkUsaUJBQWlCLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0I7QUFDL0QsaUJBQWlCLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUMzQyxvQkFBb0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLEdBQUcsS0FBSztBQUNqRSxvQkFBb0IsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFO0FBQzlDLGdCQUFnQixDQUFDLENBQUMsQ0FBQzs7QUFFbkIsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQy9CLGFBQWEsT0FBTyxDQUFDLHFCQUFxQjtBQUMxQyxhQUFhLE9BQU8sQ0FBQywrQ0FBK0M7QUFDcEUsYUFBYSxXQUFXLENBQUMsUUFBUSxJQUFJO0FBQ3JDLGlCQUFpQixTQUFTLENBQUMsTUFBTSxFQUFFLE1BQU07QUFDekMsaUJBQWlCLFNBQVMsQ0FBQyxNQUFNLEVBQUUsTUFBTTtBQUN6QyxpQkFBaUIsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGlCQUFpQjtBQUNoRSxpQkFBaUIsUUFBUSxDQUFDLE9BQU8sS0FBSyxLQUFLO0FBQzNDLG9CQUFvQixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsR0FBRyxLQUFLO0FBQ2xFLG9CQUFvQixNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFO0FBQ3BELGdCQUFnQixDQUFDLENBQUMsQ0FBQzs7QUFFbkIsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQy9CLGFBQWEsT0FBTyxDQUFDLHNCQUFzQjtBQUMzQyxhQUFhLE9BQU8sQ0FBQyw0RkFBNEY7QUFDakgsYUFBYSxPQUFPLENBQUMsSUFBSSxJQUFJO0FBQzdCLGlCQUFpQixRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDO0FBQ3pFLGlCQUFpQixRQUFRLENBQUMsTUFBTSxLQUFLLElBQUk7QUFDekMsb0JBQW9CLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGtCQUFrQixHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO0FBQ2hGLG9CQUFvQixNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUU7QUFDOUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDOztBQUVuQixRQUFRLElBQUksT0FBTyxDQUFDLFdBQVc7QUFDL0IsYUFBYSxPQUFPLENBQUMseUJBQXlCO0FBQzlDLGFBQWEsT0FBTyxDQUFDLHNJQUFzSTtBQUMzSixhQUFhLE9BQU8sQ0FBQyxJQUFJLElBQUk7QUFDN0IsaUJBQWlCLGNBQWMsQ0FBQyxtQkFBbUI7QUFDbkQsaUJBQWlCLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0I7QUFDL0QsaUJBQWlCLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSztBQUMzQyxvQkFBb0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLEdBQUcsS0FBSztBQUNqRSxvQkFBb0IsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFO0FBQzlDLGdCQUFnQixDQUFDLENBQUMsQ0FBQzs7QUFFbkIsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsa0NBQWtDLENBQUMsQ0FBQyxPQUFPLENBQUMsMEhBQTBILENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMseUJBQXlCLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxLQUFLLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyx5QkFBeUIsR0FBRyxLQUFLLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOztBQUV4WixJQUFJOztBQUVKLElBQUksbUJBQW1CLEdBQUc7QUFDMUIsUUFBUSxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsU0FBUztBQUMxQyxRQUFRLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLG9CQUFvQixFQUFFLENBQUM7QUFDbEUsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxVQUFVLEVBQUU7QUFDMUUsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsOEJBQThCLENBQUMsQ0FBQyxPQUFPLENBQUMsNEZBQTRGLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxLQUFLLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsR0FBRyxLQUFLLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xXLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLHFCQUFxQixDQUFDLENBQUMsT0FBTyxDQUFDLDJFQUEyRSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sS0FBSyxJQUFJLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsVSxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxxR0FBcUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLEtBQUssS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGdCQUFnQixHQUFHLEtBQUssQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDeFcsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsZ0NBQWdDLENBQUMsQ0FBQyxPQUFPLENBQUMsOEdBQThHLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxLQUFLLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyx1QkFBdUIsR0FBRyxLQUFLLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3RZLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUMsT0FBTyxDQUFDLGdEQUFnRCxDQUFDLENBQUMsV0FBVyxDQUFDLFFBQVEsSUFBSSxRQUFRLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSw4QkFBOEIsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUMsUUFBUSxDQUFDLE9BQU8sS0FBSyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaFosUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxPQUFPLENBQUMsNkZBQTZGLENBQUMsQ0FBQyxXQUFXLENBQUMsUUFBUSxJQUFJLFFBQVEsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLDZCQUE2QixDQUFDLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUMsUUFBUSxDQUFDLE9BQU8sS0FBSyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7O0FBRW5iLFFBQVEsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxXQUFXLEtBQUssTUFBTSxFQUFFO0FBQ3pELFlBQVksSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLHFCQUFxQixDQUFDLENBQUMsVUFBVSxFQUFFO0FBQ2hGLFlBQVksTUFBTSxVQUFVLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFLGFBQWEsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLEVBQUU7QUFDM04sWUFBWSxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLG9CQUFvQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLG9CQUFvQixHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdmEsUUFBUTs7QUFFUixRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLFVBQVUsRUFBRTtBQUM3RSxRQUFRLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxXQUFXLEVBQUUsa0NBQWtDLEVBQUUsNkRBQTZELEVBQUUsbUJBQW1CLENBQUM7O0FBRXpLO0FBQ0EsUUFBUSxXQUFXLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxrQkFBa0IsRUFBRSxDQUFDO0FBQ2hFLFFBQVEsV0FBVyxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsRUFBRSxJQUFJLEVBQUUsOERBQThELEVBQUUsR0FBRyxFQUFFLDBCQUEwQixFQUFFLENBQUM7O0FBRTVJO0FBQ0EsUUFBUSxNQUFNLHFCQUFxQixHQUFHO0FBQ3RDLFlBQVksRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUU7QUFDcEQsWUFBWSxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRTtBQUNoRCxZQUFZLEVBQUUsR0FBRyxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsZUFBZSxFQUFFO0FBQ3RELFlBQVksRUFBRSxHQUFHLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxrQkFBa0IsRUFBRTtBQUMxRCxZQUFZLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFO0FBQ2xELFlBQVksRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxrQkFBa0IsRUFBRTtBQUN2RCxZQUFZLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsZ0JBQWdCO0FBQ2hELFNBQVM7O0FBRVQ7QUFDQSxRQUFRLHFCQUFxQixDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUk7QUFDM0MsWUFBWSxJQUFJLGFBQWEsQ0FBQzs7QUFFOUIsWUFBWSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQ25DLGlCQUFpQixPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUk7QUFDL0IsaUJBQWlCLE9BQU8sQ0FBQyw2QkFBNkI7QUFDdEQsaUJBQWlCLE9BQU8sQ0FBQyxJQUFJLElBQUk7QUFDakMsb0JBQW9CLGFBQWEsR0FBRyxJQUFJLENBQUM7QUFDekMsb0JBQW9CO0FBQ3BCLHlCQUF5QixRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztBQUN0SCx5QkFBeUIsUUFBUSxDQUFDLE9BQU8sS0FBSyxLQUFLO0FBQ25ELDRCQUE0QixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxJQUFJLEVBQUU7QUFDckYsNEJBQTRCLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRTtBQUN0RCx3QkFBd0IsQ0FBQyxDQUFDO0FBQzFCLGdCQUFnQixDQUFDO0FBQ2pCLGlCQUFpQixjQUFjLENBQUMsTUFBTSxJQUFJO0FBQzFDLG9CQUFvQjtBQUNwQix5QkFBeUIsT0FBTyxDQUFDLFlBQVk7QUFDN0MseUJBQXlCLFVBQVUsQ0FBQyxrQkFBa0I7QUFDdEQseUJBQXlCLE9BQU8sQ0FBQyxZQUFZO0FBQzdDO0FBQ0EsNEJBQTRCLE1BQU0sWUFBWSxHQUFHLGdCQUFnQixDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDOztBQUV2RjtBQUNBLDRCQUE0QixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLFlBQVk7O0FBRXJGO0FBQ0EsNEJBQTRCLElBQUksYUFBYSxFQUFFO0FBQy9DLGdDQUFnQyxhQUFhLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQztBQUNwRSw0QkFBNEI7O0FBRTVCO0FBQ0EsNEJBQTRCLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRTtBQUN0RCw0QkFBNEIsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0FBQ3ZFLHdCQUF3QixDQUFDLENBQUM7QUFDMUIsZ0JBQWdCLENBQUMsQ0FBQztBQUNsQixRQUFRLENBQUMsQ0FBQzs7QUFFVjtBQUNBLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVztBQUMvQixhQUFhLFNBQVMsQ0FBQyxNQUFNLElBQUk7QUFDakMsaUJBQWlCLGFBQWEsQ0FBQyw0QkFBNEI7QUFDM0QsaUJBQWlCLFVBQVUsQ0FBQyxzREFBc0Q7QUFDbEYsaUJBQWlCLE9BQU8sQ0FBQyxZQUFZO0FBQ3JDO0FBQ0Esb0JBQW9CLElBQUksT0FBTyxDQUFDLHNEQUFzRCxDQUFDLEVBQUU7QUFDekY7QUFDQSx3QkFBd0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsY0FBYyxHQUFHLEVBQUUsR0FBRyxnQkFBZ0IsQ0FBQyxjQUFjLEVBQUU7QUFDcEcsd0JBQXdCLE1BQU0sSUFBSSxDQUFDLGFBQWEsRUFBRTtBQUNsRCx3QkFBd0IsSUFBSSxNQUFNLENBQUMsdUNBQXVDLENBQUM7O0FBRTNFO0FBQ0Esd0JBQXdCLElBQUksQ0FBQyxjQUFjLEVBQUU7QUFDN0Msb0JBQW9CO0FBQ3BCLGdCQUFnQixDQUFDLENBQUMsQ0FBQzs7QUFFbkIsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxVQUFVLEVBQUU7QUFDL0UsUUFBUSxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLFNBQVMsRUFBRSxnREFBZ0QsRUFBRSx1QkFBdUIsQ0FBQztBQUN0SSxRQUFRLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxXQUFXLEVBQUUsT0FBTyxFQUFFLDhDQUE4QyxFQUFFLHFCQUFxQixDQUFDO0FBQ2hJLFFBQVEsSUFBSSxDQUFDLHNCQUFzQixDQUFDLFdBQVcsRUFBRSxVQUFVLEVBQUUsaURBQWlELEVBQUUsd0JBQXdCLENBQUM7QUFDekksUUFBUSxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLGFBQWEsRUFBRSxvREFBb0QsRUFBRSx5QkFBeUIsQ0FBQztBQUNoSixRQUFRLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxXQUFXLEVBQUUsUUFBUSxFQUFFLDJDQUEyQyxFQUFFLHNCQUFzQixDQUFDO0FBQy9ILFFBQVEsSUFBSSxDQUFDLHNCQUFzQixDQUFDLFdBQVcsRUFBRSxhQUFhLEVBQUUsb0RBQW9ELEVBQUUsc0JBQXNCLENBQUM7QUFDN0ksUUFBUSxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLEtBQUssRUFBRSx1REFBdUQsRUFBRSxtQkFBbUIsQ0FBQztBQUNySSxJQUFJOzs7Ozs7OztBQVFKLElBQUkscUJBQXFCLEdBQUc7QUFDNUIsUUFBUSxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsU0FBUztBQUMxQyxRQUFRLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLDBCQUEwQixFQUFFLENBQUM7O0FBRXhFO0FBQ0EsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQy9CLGFBQWEsT0FBTyxDQUFDLGlCQUFpQjtBQUN0QyxhQUFhLE9BQU8sQ0FBQyxvTUFBb007QUFDek4sYUFBYSxTQUFTLENBQUMsTUFBTSxJQUFJO0FBQ2pDLGdCQUFnQjtBQUNoQixxQkFBcUIsYUFBYSxDQUFDLHFCQUFxQjtBQUN4RCxxQkFBcUIsT0FBTyxDQUFDLE1BQU07QUFDbkMscUJBQXFCLFVBQVUsQ0FBQyxvQ0FBb0M7QUFDcEUscUJBQXFCLE9BQU8sQ0FBQyxNQUFNLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7O0FBRTVELGdCQUFnQixNQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsU0FBUztBQUN4RCxZQUFZLENBQUM7QUFDYixhQUFhLFNBQVMsQ0FBQyxNQUFNLElBQUk7QUFDakMsZ0JBQWdCO0FBQ2hCLHFCQUFxQixhQUFhLENBQUMsbUJBQW1CO0FBQ3RELHFCQUFxQixPQUFPLENBQUMsU0FBUztBQUN0QyxxQkFBcUIsVUFBVSxDQUFDLG9EQUFvRDtBQUNwRixxQkFBcUIsT0FBTyxDQUFDLE1BQU0sSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQzs7QUFFOUQsZ0JBQWdCLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxTQUFTO0FBQ3hELFlBQVksQ0FBQyxDQUFDOztBQUVkO0FBQ0EsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQy9CLGFBQWEsT0FBTyxDQUFDLGlCQUFpQjtBQUN0QyxhQUFhLE9BQU8sQ0FBQywrRkFBK0Y7QUFDcEgsYUFBYSxTQUFTLENBQUMsTUFBTSxJQUFJO0FBQ2pDLGdCQUFnQjtBQUNoQixxQkFBcUIsYUFBYSxDQUFDLGtCQUFrQjtBQUNyRCxxQkFBcUIsT0FBTyxDQUFDLFFBQVE7QUFDckMscUJBQXFCLFVBQVUsQ0FBQyxpQ0FBaUM7QUFDakUscUJBQXFCLE9BQU8sQ0FBQyxNQUFNO0FBQ25DLHdCQUF3QixNQUFNLFNBQVMsR0FBRyxXQUFXLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRTtBQUN4RSw0QkFBNEIsSUFBSSxFQUFFLE1BQU07QUFDeEMsNEJBQTRCLElBQUksRUFBRTtBQUNsQyxnQ0FBZ0MsTUFBTSxFQUFFLE9BQU87QUFDL0MsZ0NBQWdDLEtBQUssRUFBRTtBQUN2QztBQUNBLHlCQUF5QixDQUFDOztBQUUxQix3QkFBd0IsU0FBUyxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxDQUFDLEtBQUssS0FBSztBQUN4RSw0QkFBNEIsTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQzlELDRCQUE0QixJQUFJLElBQUksRUFBRTtBQUN0QyxnQ0FBZ0MsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUM7QUFDdkQsNEJBQTRCO0FBQzVCLHdCQUF3QixDQUFDLENBQUM7O0FBRTFCLHdCQUF3QixTQUFTLENBQUMsS0FBSyxFQUFFO0FBQ3pDLG9CQUFvQixDQUFDLENBQUM7O0FBRXRCLGdCQUFnQixNQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsU0FBUztBQUN4RCxZQUFZLENBQUMsQ0FBQztBQUNkLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLFlBQVksQ0FBQyxJQUFJLEVBQUU7QUFDdkIsUUFBUSxJQUFJLGdCQUFnQjtBQUM1QixRQUFRLElBQUksUUFBUSxHQUFHLENBQUMsd0NBQXdDLENBQUM7O0FBRWpFLFFBQVEsSUFBSSxJQUFJLEtBQUssT0FBTyxFQUFFO0FBQzlCLFlBQVksTUFBTSxTQUFTLEdBQUc7QUFDOUI7QUFDQSxnQkFBZ0IsVUFBVTtBQUMxQixnQkFBZ0IsbUJBQW1CO0FBQ25DLGdCQUFnQixpQkFBaUI7QUFDakMsZ0JBQWdCLGVBQWU7QUFDL0IsZ0JBQWdCLGNBQWM7QUFDOUIsZ0JBQWdCLHVCQUF1QjtBQUN2QyxnQkFBZ0IsdUJBQXVCO0FBQ3ZDLGdCQUFnQix3QkFBd0I7O0FBRXhDO0FBQ0EsZ0JBQWdCLHdCQUF3QjtBQUN4QyxnQkFBZ0IsdUJBQXVCO0FBQ3ZDLGdCQUFnQiwwQkFBMEI7QUFDMUMsZ0JBQWdCLHlCQUF5QjtBQUN6QyxnQkFBZ0IseUJBQXlCO0FBQ3pDLGdCQUFnQix3QkFBd0I7QUFDeEMsZ0JBQWdCLHVCQUF1QjtBQUN2QyxnQkFBZ0Isc0JBQXNCO0FBQ3RDLGdCQUFnQiwwQkFBMEI7QUFDMUMsZ0JBQWdCLHlCQUF5Qjs7QUFFekM7QUFDQSxnQkFBZ0IseUJBQXlCO0FBQ3pDLGdCQUFnQix1QkFBdUI7O0FBRXZDO0FBQ0EsZ0JBQWdCLGlCQUFpQjtBQUNqQyxnQkFBZ0IsZ0JBQWdCO0FBQ2hDLGdCQUFnQiw0QkFBNEI7QUFDNUMsZ0JBQWdCLHdCQUF3Qjs7QUFFeEM7QUFDQSxnQkFBZ0Isa0JBQWtCO0FBQ2xDLGdCQUFnQixjQUFjO0FBQzlCLGdCQUFnQixrQkFBa0I7QUFDbEMsZ0JBQWdCLDBCQUEwQjtBQUMxQyxnQkFBZ0IseUJBQXlCO0FBQ3pDLGdCQUFnQixpQkFBaUI7QUFDakMsZ0JBQWdCLG1CQUFtQjtBQUNuQyxnQkFBZ0Isa0JBQWtCO0FBQ2xDLGdCQUFnQixtQkFBbUI7QUFDbkMsZ0JBQWdCLG1CQUFtQjtBQUNuQyxnQkFBZ0IsMEJBQTBCO0FBQzFDLGdCQUFnQix3QkFBd0I7QUFDeEMsZ0JBQWdCLHVCQUF1QjtBQUN2QyxnQkFBZ0Isd0JBQXdCO0FBQ3hDLGdCQUFnQix1QkFBdUI7QUFDdkMsZ0JBQWdCLHlCQUF5QjtBQUN6QyxnQkFBZ0Isd0JBQXdCO0FBQ3hDLGdCQUFnQixlQUFlO0FBQy9CLGdCQUFnQix1QkFBdUI7QUFDdkMsZ0JBQWdCLHFCQUFxQjtBQUNyQyxnQkFBZ0Isa0JBQWtCO0FBQ2xDLGdCQUFnQixvQkFBb0I7QUFDcEMsZ0JBQWdCLGlCQUFpQjtBQUNqQyxnQkFBZ0IsYUFBYTtBQUM3QixnQkFBZ0IsbUJBQW1CO0FBQ25DLGdCQUFnQiwwQkFBMEI7QUFDMUMsZ0JBQWdCLGVBQWU7QUFDL0IsZ0JBQWdCLFdBQVc7QUFDM0IsZ0JBQWdCLGlCQUFpQjtBQUNqQyxnQkFBZ0Isb0JBQW9CO0FBQ3BDLGdCQUFnQix3QkFBd0I7QUFDeEMsZ0JBQWdCLGlCQUFpQjtBQUNqQztBQUNBLGdCQUFnQixvQkFBb0I7QUFDcEMsZ0JBQWdCLG1CQUFtQjtBQUNuQyxnQkFBZ0IsZ0JBQWdCO0FBQ2hDLGdCQUFnQixvQkFBb0I7QUFDcEMsZ0JBQWdCLHVCQUF1QjtBQUN2QyxnQkFBZ0IscUJBQXFCO0FBQ3JDLGdCQUFnQixxQkFBcUI7QUFDckMsZ0JBQWdCLHFCQUFxQjtBQUNyQyxnQkFBZ0Isa0JBQWtCO0FBQ2xDLGdCQUFnQix1QkFBdUI7QUFDdkMsZ0JBQWdCLHFCQUFxQjtBQUNyQyxnQkFBZ0Isd0JBQXdCO0FBQ3hDLGdCQUFnQix5QkFBeUI7QUFDekMsZ0JBQWdCLHNCQUFzQjtBQUN0QyxnQkFBZ0Isc0JBQXNCO0FBQ3RDLGdCQUFnQjtBQUNoQixhQUFhO0FBQ2IsWUFBWSxnQkFBZ0IsR0FBRyxFQUFFO0FBQ2pDLFlBQVksS0FBSyxNQUFNLEdBQUcsSUFBSSxTQUFTLEVBQUU7QUFDekMsZ0JBQWdCLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQztBQUNqRSxZQUFZO0FBQ1osWUFBWSxRQUFRLEdBQUcsQ0FBQyxxQ0FBcUMsQ0FBQztBQUM5RCxRQUFRLENBQUMsTUFBTTtBQUNmLFlBQVksZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRO0FBQ25ELFFBQVE7O0FBRVIsUUFBUSxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLGdCQUFnQixFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7QUFDOUQsUUFBUSxNQUFNLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLGtCQUFrQixFQUFFLENBQUM7QUFDbkUsUUFBUSxNQUFNLEdBQUcsR0FBRyxHQUFHLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQztBQUM3QyxRQUFRLE1BQU0sQ0FBQyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDO0FBQzdDLFFBQVEsQ0FBQyxDQUFDLElBQUksR0FBRyxHQUFHO0FBQ3BCLFFBQVEsQ0FBQyxDQUFDLFFBQVEsR0FBRyxRQUFRO0FBQzdCLFFBQVEsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO0FBQ3BDLFFBQVEsQ0FBQyxDQUFDLEtBQUssRUFBRTtBQUNqQixRQUFRLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztBQUNwQyxRQUFRLEdBQUcsQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDOztBQUVoQyxRQUFRLElBQUksTUFBTSxDQUFDLENBQUMsRUFBRSxJQUFJLEtBQUssT0FBTyxHQUFHLE9BQU8sR0FBRyxLQUFLLENBQUMsbUJBQW1CLENBQUMsQ0FBQztBQUM5RSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxZQUFZLENBQUMsSUFBSSxFQUFFO0FBQ3ZCLFFBQVEsTUFBTSxNQUFNLEdBQUcsSUFBSSxVQUFVLEVBQUU7QUFDdkMsUUFBUSxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsS0FBSyxLQUFLO0FBQ25DLFlBQVksSUFBSTtBQUNoQixnQkFBZ0IsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDOztBQUV4RTtBQUNBLGdCQUFnQixJQUFJLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBQyxFQUFFO0FBQ3ZILG9CQUFvQixJQUFJLE1BQU0sQ0FBQywwREFBMEQsRUFBRSxJQUFJLENBQUM7QUFDaEcsb0JBQW9CO0FBQ3BCLGdCQUFnQjs7QUFFaEIsZ0JBQWdCLElBQUksaUJBQWlCLENBQUMsSUFBSSxDQUFDLEdBQUc7QUFDOUMsb0JBQW9CLHFCQUFxQjtBQUN6QyxvQkFBb0IsaUdBQWlHO0FBQ3JILG9CQUFvQixZQUFZO0FBQ2hDO0FBQ0Esd0JBQXdCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLGdCQUFnQixDQUFDO0FBQ3hHLHdCQUF3QixNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUU7QUFDbEQsd0JBQXdCLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUM5Qyx3QkFBd0IsSUFBSSxNQUFNLENBQUMsaUNBQWlDLENBQUM7QUFDckUsb0JBQW9CO0FBQ3BCLGlCQUFpQixDQUFDLElBQUksRUFBRTs7QUFFeEIsWUFBWSxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFDeEIsZ0JBQWdCLElBQUksTUFBTSxDQUFDLG1FQUFtRSxFQUFFLElBQUksQ0FBQztBQUNyRyxnQkFBZ0IsT0FBTyxDQUFDLEtBQUssQ0FBQyxnQ0FBZ0MsRUFBRSxDQUFDLENBQUM7QUFDbEUsWUFBWTtBQUNaLFFBQVEsQ0FBQztBQUNULFFBQVEsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUM7QUFDL0IsSUFBSTs7QUFFSixJQUFJLGNBQWMsR0FBRztBQUNyQixRQUFRLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxTQUFTO0FBQzFDLFFBQVEsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsa0NBQWtDLEVBQUUsQ0FBQzs7QUFFaEYsUUFBUSxXQUFXLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRTtBQUNsQyxZQUFZLElBQUksRUFBRTtBQUNsQixTQUFTLENBQUM7O0FBRVYsUUFBUSxJQUFJLE9BQU8sQ0FBQyxXQUFXO0FBQy9CLGFBQWEsT0FBTyxDQUFDLHVCQUF1QjtBQUM1QyxhQUFhLE9BQU8sQ0FBQyx1R0FBdUc7QUFDNUgsYUFBYSxTQUFTLENBQUMsTUFBTSxJQUFJO0FBQ2pDLGdCQUFnQjtBQUNoQixxQkFBcUIsYUFBYSxDQUFDLG1CQUFtQjtBQUN0RCxxQkFBcUIsVUFBVSxDQUFDLGdDQUFnQztBQUNoRSxxQkFBcUIsT0FBTyxDQUFDLE1BQU07QUFDbkM7QUFDQSx3QkFBd0IsTUFBTSxDQUFDLElBQUksQ0FBQyxnQ0FBZ0MsQ0FBQztBQUNyRSxvQkFBb0IsQ0FBQyxDQUFDO0FBQ3RCO0FBQ0EsZ0JBQWdCLE1BQU0sQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQztBQUNuRCxnQkFBZ0IsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsZUFBZSxHQUFHLFNBQVM7QUFDakUsZ0JBQWdCLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxTQUFTO0FBQ3ZELGdCQUFnQixNQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsU0FBUztBQUN4RCxZQUFZLENBQUMsQ0FBQztBQUNkLElBQUk7OztBQUdKLElBQUksTUFBTSxrQkFBa0IsR0FBRztBQUMvQixRQUFRLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxTQUFTO0FBQzFDLFFBQVEsV0FBVyxDQUFDLEtBQUssRUFBRTs7QUFFM0I7QUFDQSxRQUFRLFdBQVcsQ0FBQyxTQUFTLEdBQUc7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxDQUFDO0FBQ0wsSUFBSTs7QUFFSjs7OzsiLCJ4X2dvb2dsZV9pZ25vcmVMaXN0IjpbMF19
