'use strict';

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */

/**
 * Represents the BINARY value type, which contains extra methods for encoding and decoding.
 *
 * @memberof ICAL
 */
class Binary {
  /**
   * Creates a binary value from the given string.
   *
   * @param {String} aString        The binary value string
   * @return {Binary}               The binary value instance
   */
  static fromString(aString) {
    return new Binary(aString);
  }

  /**
   * Creates a new ICAL.Binary instance
   *
   * @param {String} aValue     The binary data for this value
   */
  constructor(aValue) {
    this.value = aValue;
  }

  /**
   * The type name, to be used in the jCal object.
   * @default "binary"
   * @constant
   */
  icaltype = "binary";

  /**
   * Base64 decode the current value
   *
   * @return {String}         The base64-decoded value
   */
  decodeValue() {
    return this._b64_decode(this.value);
  }

  /**
   * Encodes the passed parameter with base64 and sets the internal
   * value to the result.
   *
   * @param {String} aValue      The raw binary value to encode
   */
  setEncodedValue(aValue) {
    this.value = this._b64_encode(aValue);
  }

  _b64_encode(data) {
    // http://kevin.vanzonneveld.net
    // +   original by: Tyler Akins (http://rumkin.com)
    // +   improved by: Bayron Guevara
    // +   improved by: Thunder.m
    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +   bugfixed by: Pellentesque Malesuada
    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +   improved by: Rafał Kukawski (http://kukawski.pl)
    // *     example 1: base64_encode('Kevin van Zonneveld');
    // *     returns 1: 'S2V2aW4gdmFuIFpvbm5ldmVsZA=='
    // mozilla has this native
    // - but breaks in 2.0.0.12!
    //if (typeof this.window['atob'] == 'function') {
    //    return atob(data);
    //}
    let b64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ" +
              "abcdefghijklmnopqrstuvwxyz0123456789+/=";
    let o1, o2, o3, h1, h2, h3, h4, bits, i = 0,
      ac = 0,
      enc = "",
      tmp_arr = [];

    if (!data) {
      return data;
    }

    do { // pack three octets into four hexets
      o1 = data.charCodeAt(i++);
      o2 = data.charCodeAt(i++);
      o3 = data.charCodeAt(i++);

      bits = o1 << 16 | o2 << 8 | o3;

      h1 = bits >> 18 & 0x3f;
      h2 = bits >> 12 & 0x3f;
      h3 = bits >> 6 & 0x3f;
      h4 = bits & 0x3f;

      // use hexets to index into b64, and append result to encoded string
      tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);
    } while (i < data.length);

    enc = tmp_arr.join('');

    let r = data.length % 3;

    return (r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3);

  }

  _b64_decode(data) {
    // http://kevin.vanzonneveld.net
    // +   original by: Tyler Akins (http://rumkin.com)
    // +   improved by: Thunder.m
    // +      input by: Aman Gupta
    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +   bugfixed by: Onno Marsman
    // +   bugfixed by: Pellentesque Malesuada
    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +      input by: Brett Zamir (http://brett-zamir.me)
    // +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // *     example 1: base64_decode('S2V2aW4gdmFuIFpvbm5ldmVsZA==');
    // *     returns 1: 'Kevin van Zonneveld'
    // mozilla has this native
    // - but breaks in 2.0.0.12!
    //if (typeof this.window['btoa'] == 'function') {
    //    return btoa(data);
    //}
    let b64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ" +
              "abcdefghijklmnopqrstuvwxyz0123456789+/=";
    let o1, o2, o3, h1, h2, h3, h4, bits, i = 0,
      ac = 0,
      dec = "",
      tmp_arr = [];

    if (!data) {
      return data;
    }

    data += '';

    do { // unpack four hexets into three octets using index points in b64
      h1 = b64.indexOf(data.charAt(i++));
      h2 = b64.indexOf(data.charAt(i++));
      h3 = b64.indexOf(data.charAt(i++));
      h4 = b64.indexOf(data.charAt(i++));

      bits = h1 << 18 | h2 << 12 | h3 << 6 | h4;

      o1 = bits >> 16 & 0xff;
      o2 = bits >> 8 & 0xff;
      o3 = bits & 0xff;

      if (h3 == 64) {
        tmp_arr[ac++] = String.fromCharCode(o1);
      } else if (h4 == 64) {
        tmp_arr[ac++] = String.fromCharCode(o1, o2);
      } else {
        tmp_arr[ac++] = String.fromCharCode(o1, o2, o3);
      }
    } while (i < data.length);

    dec = tmp_arr.join('');

    return dec;
  }

  /**
   * The string representation of this value
   * @return {String}
   */
  toString() {
    return this.value;
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


const DURATION_LETTERS = /([PDWHMTS]{1,1})/;
const DATA_PROPS_TO_COPY = ["weeks", "days", "hours", "minutes", "seconds", "isNegative"];

/**
 * This class represents the "duration" value type, with various calculation
 * and manipulation methods.
 *
 * @memberof ICAL
 */
class Duration {
  /**
   * Returns a new ICAL.Duration instance from the passed seconds value.
   *
   * @param {Number} aSeconds       The seconds to create the instance from
   * @return {Duration}             The newly created duration instance
   */
  static fromSeconds(aSeconds) {
    return (new Duration()).fromSeconds(aSeconds);
  }

  /**
   * Checks if the given string is an iCalendar duration value.
   *
   * @param {String} value      The raw ical value
   * @return {Boolean}          True, if the given value is of the
   *                              duration ical type
   */
  static isValueString(string) {
    return (string[0] === 'P' || string[1] === 'P');
  }

  /**
   * Creates a new {@link ICAL.Duration} instance from the passed string.
   *
   * @param {String} aStr       The string to parse
   * @return {Duration}         The created duration instance
   */
  static fromString(aStr) {
    let pos = 0;
    let dict = Object.create(null);
    let chunks = 0;

    while ((pos = aStr.search(DURATION_LETTERS)) !== -1) {
      let type = aStr[pos];
      let numeric = aStr.slice(0, Math.max(0, pos));
      aStr = aStr.slice(pos + 1);

      chunks += parseDurationChunk(type, numeric, dict);
    }

    if (chunks < 2) {
      // There must be at least a chunk with "P" and some unit chunk
      throw new Error(
        'invalid duration value: Not enough duration components in "' + aStr + '"'
      );
    }

    return new Duration(dict);
  }

  /**
   * Creates a new ICAL.Duration instance from the given data object.
   *
   * @param {Object} aData                An object with members of the duration
   * @param {Number=} aData.weeks         Duration in weeks
   * @param {Number=} aData.days          Duration in days
   * @param {Number=} aData.hours         Duration in hours
   * @param {Number=} aData.minutes       Duration in minutes
   * @param {Number=} aData.seconds       Duration in seconds
   * @param {Boolean=} aData.isNegative   If true, the duration is negative
   * @return {Duration}                   The createad duration instance
   */
  static fromData(aData) {
    return new Duration(aData);
  }

  /**
   * Creates a new ICAL.Duration instance.
   *
   * @param {Object} data                 An object with members of the duration
   * @param {Number=} data.weeks          Duration in weeks
   * @param {Number=} data.days           Duration in days
   * @param {Number=} data.hours          Duration in hours
   * @param {Number=} data.minutes        Duration in minutes
   * @param {Number=} data.seconds        Duration in seconds
   * @param {Boolean=} data.isNegative    If true, the duration is negative
   */
  constructor(data) {
    this.wrappedJSObject = this;
    this.fromData(data);
  }

  /**
   * The weeks in this duration
   * @type {Number}
   * @default 0
   */
  weeks = 0;

  /**
   * The days in this duration
   * @type {Number}
   * @default 0
   */
  days = 0;

  /**
   * The days in this duration
   * @type {Number}
   * @default 0
   */
  hours = 0;

  /**
   * The minutes in this duration
   * @type {Number}
   * @default 0
   */
  minutes = 0;

  /**
   * The seconds in this duration
   * @type {Number}
   * @default 0
   */
  seconds = 0;

  /**
   * The seconds in this duration
   * @type {Boolean}
   * @default false
   */
  isNegative = false;

  /**
   * The class identifier.
   * @constant
   * @type {String}
   * @default "icalduration"
   */
  icalclass = "icalduration";

  /**
   * The type name, to be used in the jCal object.
   * @constant
   * @type {String}
   * @default "duration"
   */
  icaltype = "duration";

  /**
   * Returns a clone of the duration object.
   *
   * @return {Duration}      The cloned object
   */
  clone() {
    return Duration.fromData(this);
  }

  /**
   * The duration value expressed as a number of seconds.
   *
   * @return {Number}             The duration value in seconds
   */
  toSeconds() {
    let seconds = this.seconds + 60 * this.minutes + 3600 * this.hours +
                  86400 * this.days + 7 * 86400 * this.weeks;
    return (this.isNegative ? -seconds : seconds);
  }

  /**
   * Reads the passed seconds value into this duration object. Afterwards,
   * members like {@link ICAL.Duration#days days} and {@link ICAL.Duration#weeks weeks} will be set up
   * accordingly.
   *
   * @param {Number} aSeconds     The duration value in seconds
   * @return {Duration}           Returns this instance
   */
  fromSeconds(aSeconds) {
    let secs = Math.abs(aSeconds);

    this.isNegative = (aSeconds < 0);
    this.days = trunc(secs / 86400);

    // If we have a flat number of weeks, use them.
    if (this.days % 7 == 0) {
      this.weeks = this.days / 7;
      this.days = 0;
    } else {
      this.weeks = 0;
    }

    secs -= (this.days + 7 * this.weeks) * 86400;

    this.hours = trunc(secs / 3600);
    secs -= this.hours * 3600;

    this.minutes = trunc(secs / 60);
    secs -= this.minutes * 60;

    this.seconds = secs;
    return this;
  }

  /**
   * Sets up the current instance using members from the passed data object.
   *
   * @param {Object} aData                An object with members of the duration
   * @param {Number=} aData.weeks         Duration in weeks
   * @param {Number=} aData.days          Duration in days
   * @param {Number=} aData.hours         Duration in hours
   * @param {Number=} aData.minutes       Duration in minutes
   * @param {Number=} aData.seconds       Duration in seconds
   * @param {Boolean=} aData.isNegative   If true, the duration is negative
   */
  fromData(aData) {
    for (let prop of DATA_PROPS_TO_COPY) {
      if (aData && prop in aData) {
        this[prop] = aData[prop];
      } else {
        this[prop] = 0;
      }
    }
  }

  /**
   * Resets the duration instance to the default values, i.e. PT0S
   */
  reset() {
    this.isNegative = false;
    this.weeks = 0;
    this.days = 0;
    this.hours = 0;
    this.minutes = 0;
    this.seconds = 0;
  }

  /**
   * Compares the duration instance with another one.
   *
   * @param {Duration} aOther             The instance to compare with
   * @return {Number}                     -1, 0 or 1 for less/equal/greater
   */
  compare(aOther) {
    let thisSeconds = this.toSeconds();
    let otherSeconds = aOther.toSeconds();
    return (thisSeconds > otherSeconds) - (thisSeconds < otherSeconds);
  }

  /**
   * Normalizes the duration instance. For example, a duration with a value
   * of 61 seconds will be normalized to 1 minute and 1 second.
   */
  normalize() {
    this.fromSeconds(this.toSeconds());
  }

  /**
   * The string representation of this duration.
   * @return {String}
   */
  toString() {
    if (this.toSeconds() == 0) {
      return "PT0S";
    } else {
      let str = "";
      if (this.isNegative) str += "-";
      str += "P";
      let hasWeeks = false;
      if (this.weeks) {
        if (this.days || this.hours || this.minutes || this.seconds) {
          str += (this.weeks * 7 + this.days) + "D";
        } else {
          str += (this.weeks + "W");
          hasWeeks = true;
        }
      } else if (this.days) {
        str += (this.days + "D");
      }

      if (!hasWeeks) {
        if (this.hours || this.minutes || this.seconds) {
          str += "T";
          if (this.hours) {
            str += this.hours + "H";
          }

          if (this.minutes) {
            str += this.minutes + "M";
          }

          if (this.seconds) {
            str += this.seconds + "S";
          }
        }
      }

      return str;
    }
  }

  /**
   * The iCalendar string representation of this duration.
   * @return {String}
   */
  toICALString() {
    return this.toString();
  }
}

/**
 * Internal helper function to handle a chunk of a duration.
 *
 * @private
 * @param {String} letter type of duration chunk
 * @param {String} number numeric value or -/+
 * @param {Object} dict target to assign values to
 */
function parseDurationChunk(letter, number, object) {
  let type;
  switch (letter) {
    case 'P':
      if (number && number === '-') {
        object.isNegative = true;
      } else {
        object.isNegative = false;
      }
      // period
      break;
    case 'D':
      type = 'days';
      break;
    case 'W':
      type = 'weeks';
      break;
    case 'H':
      type = 'hours';
      break;
    case 'M':
      type = 'minutes';
      break;
    case 'S':
      type = 'seconds';
      break;
    default:
      // Not a valid chunk
      return 0;
  }

  if (type) {
    if (!number && number !== 0) {
      throw new Error(
        'invalid duration value: Missing number before "' + letter + '"'
      );
    }
    let num = parseInt(number, 10);
    if (isStrictlyNaN(num)) {
      throw new Error(
        'invalid duration value: Invalid number "' + number + '" before "' + letter + '"'
      );
    }
    object[type] = num;
  }

  return 1;
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 * @ignore
 * @typedef {import("./types.js").jCalComponent} jCalComponent
 * Imports the 'occurrenceDetails' type from the "types.js" module
 */

/**
 * This class represents the "period" value type, with various calculation and manipulation methods.
 *
 * @memberof ICAL
 */
class Period {
  /**
   * Creates a new {@link ICAL.Period} instance from the passed string.
   *
   * @param {String} str            The string to parse
   * @param {Property} prop         The property this period will be on
   * @return {Period}               The created period instance
   */
  static fromString(str, prop) {
    let parts = str.split('/');

    if (parts.length !== 2) {
      throw new Error(
        'Invalid string value: "' + str + '" must contain a "/" char.'
      );
    }

    let options = {
      start: Time.fromDateTimeString(parts[0], prop)
    };

    let end = parts[1];

    if (Duration.isValueString(end)) {
      options.duration = Duration.fromString(end);
    } else {
      options.end = Time.fromDateTimeString(end, prop);
    }

    return new Period(options);
  }

  /**
   * Creates a new {@link ICAL.Period} instance from the given data object.
   * The passed data object cannot contain both and end date and a duration.
   *
   * @param {Object} aData                  An object with members of the period
   * @param {Time=} aData.start             The start of the period
   * @param {Time=} aData.end               The end of the period
   * @param {Duration=} aData.duration      The duration of the period
   * @return {Period}                       The period instance
   */
  static fromData(aData) {
    return new Period(aData);
  }

  /**
   * Returns a new period instance from the given jCal data array. The first
   * member is always the start date string, the second member is either a
   * duration or end date string.
   *
   * @param {jCalComponent} aData           The jCal data array
   * @param {Property} aProp                The property this jCal data is on
   * @param {Boolean} aLenient              If true, data value can be both date and date-time
   * @return {Period}                       The period instance
   */
  static fromJSON(aData, aProp, aLenient) {
    function fromDateOrDateTimeString(aValue, dateProp) {
      if (aLenient) {
        return Time.fromString(aValue, dateProp);
      } else {
        return Time.fromDateTimeString(aValue, dateProp);
      }
    }

    if (Duration.isValueString(aData[1])) {
      return Period.fromData({
        start: fromDateOrDateTimeString(aData[0], aProp),
        duration: Duration.fromString(aData[1])
      });
    } else {
      return Period.fromData({
        start: fromDateOrDateTimeString(aData[0], aProp),
        end: fromDateOrDateTimeString(aData[1], aProp)
      });
    }
  }

  /**
   * Creates a new ICAL.Period instance. The passed data object cannot contain both and end date and
   * a duration.
   *
   * @param {Object} aData                  An object with members of the period
   * @param {Time=} aData.start             The start of the period
   * @param {Time=} aData.end               The end of the period
   * @param {Duration=} aData.duration      The duration of the period
   */
  constructor(aData) {
    this.wrappedJSObject = this;

    if (aData && 'start' in aData) {
      if (aData.start && !(aData.start instanceof Time)) {
        throw new TypeError('.start must be an instance of ICAL.Time');
      }
      this.start = aData.start;
    }

    if (aData && aData.end && aData.duration) {
      throw new Error('cannot accept both end and duration');
    }

    if (aData && 'end' in aData) {
      if (aData.end && !(aData.end instanceof Time)) {
        throw new TypeError('.end must be an instance of ICAL.Time');
      }
      this.end = aData.end;
    }

    if (aData && 'duration' in aData) {
      if (aData.duration && !(aData.duration instanceof Duration)) {
        throw new TypeError('.duration must be an instance of ICAL.Duration');
      }
      this.duration = aData.duration;
    }
  }


  /**
   * The start of the period
   * @type {Time}
   */
  start = null;

  /**
   * The end of the period
   * @type {Time}
   */
  end = null;

  /**
   * The duration of the period
   * @type {Duration}
   */
  duration = null;

  /**
   * The class identifier.
   * @constant
   * @type {String}
   * @default "icalperiod"
   */
  icalclass = "icalperiod";

  /**
   * The type name, to be used in the jCal object.
   * @constant
   * @type {String}
   * @default "period"
   */
  icaltype = "period";

  /**
   * Returns a clone of the duration object.
   *
   * @return {Period}      The cloned object
   */
  clone() {
    return Period.fromData({
      start: this.start ? this.start.clone() : null,
      end: this.end ? this.end.clone() : null,
      duration: this.duration ? this.duration.clone() : null
    });
  }

  /**
   * Calculates the duration of the period, either directly or by subtracting
   * start from end date.
   *
   * @return {Duration}      The calculated duration
   */
  getDuration() {
    if (this.duration) {
      return this.duration;
    } else {
      return this.end.subtractDate(this.start);
    }
  }

  /**
   * Calculates the end date of the period, either directly or by adding
   * duration to start date.
   *
   * @return {Time}          The calculated end date
   */
  getEnd() {
    if (this.end) {
      return this.end;
    } else {
      let end = this.start.clone();
      end.addDuration(this.duration);
      return end;
    }
  }

  /**
   * Compare this period with a date or other period. To maintain the logic where a.compare(b)
   * returns 1 when a > b, this function will return 1 when the period is after the date, 0 when the
   * date is within the period, and -1 when the period is before the date. When comparing two
   * periods, as soon as they overlap in any way this will return 0.
   *
   * @param {Time|Period} dt    The date or other period to compare with
   */
  compare(dt) {
    if (dt.compare(this.start) < 0) {
      return 1;
    } else if (dt.compare(this.getEnd()) > 0) {
      return -1;
    } else {
      return 0;
    }
  }

  /**
   * The string representation of this period.
   * @return {String}
   */
  toString() {
    return this.start + "/" + (this.end || this.duration);
  }

  /**
   * The jCal representation of this period type.
   * @return {Object}
   */
  toJSON() {
    return [this.start.toString(), (this.end || this.duration).toString()];
  }

  /**
   * The iCalendar string representation of this period.
   * @return {String}
   */
  toICALString() {
    return this.start.toICALString() + "/" +
           (this.end || this.duration).toICALString();
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 *
 * @ignore
 * @typedef {import("./types.js").weekDay} weekDay
 * Imports the 'weekDay' type from the "types.js" module
 *
 * @ignore
 * @typedef {import("./types.js").timeInit} timeInit
 * Imports the 'timeInit' type from the "types.js" module
 */

/**
 * @classdesc
 * iCalendar Time representation (similar to JS Date object).  Fully
 * independent of system (OS) timezone / time.  Unlike JS Date, the month
 * January is 1, not zero.
 *
 * @example
 * var time = new ICAL.Time({
 *   year: 2012,
 *   month: 10,
 *   day: 11
 *   minute: 0,
 *   second: 0,
 *   isDate: false
 * });
 *
 *
 * @memberof ICAL
*/
class Time {
  static _dowCache = {};
  static _wnCache = {};

  /**
   * Returns the days in the given month
   *
   * @param {Number} month      The month to check
   * @param {Number} year       The year to check
   * @return {Number}           The number of days in the month
   */
  static daysInMonth(month, year) {
    let _daysInMonth = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    let days = 30;

    if (month < 1 || month > 12) return days;

    days = _daysInMonth[month];

    if (month == 2) {
      days += Time.isLeapYear(year);
    }

    return days;
  }

  /**
   * Checks if the year is a leap year
   *
   * @param {Number} year       The year to check
   * @return {Boolean}          True, if the year is a leap year
   */
  static isLeapYear(year) {
    if (year <= 1752) {
      return ((year % 4) == 0);
    } else {
      return (((year % 4 == 0) && (year % 100 != 0)) || (year % 400 == 0));
    }
  }

  /**
   * Create a new ICAL.Time from the day of year and year. The date is returned
   * in floating timezone.
   *
   * @param {Number} aDayOfYear     The day of year
   * @param {Number} aYear          The year to create the instance in
   * @return {Time}                 The created instance with the calculated date
   */
  static fromDayOfYear(aDayOfYear, aYear) {
    let year = aYear;
    let doy = aDayOfYear;
    let tt = new Time();
    tt.auto_normalize = false;
    let is_leap = (Time.isLeapYear(year) ? 1 : 0);

    if (doy < 1) {
      year--;
      is_leap = (Time.isLeapYear(year) ? 1 : 0);
      doy += Time.daysInYearPassedMonth[is_leap][12];
      return Time.fromDayOfYear(doy, year);
    } else if (doy > Time.daysInYearPassedMonth[is_leap][12]) {
      is_leap = (Time.isLeapYear(year) ? 1 : 0);
      doy -= Time.daysInYearPassedMonth[is_leap][12];
      year++;
      return Time.fromDayOfYear(doy, year);
    }

    tt.year = year;
    tt.isDate = true;

    for (let month = 11; month >= 0; month--) {
      if (doy > Time.daysInYearPassedMonth[is_leap][month]) {
        tt.month = month + 1;
        tt.day = doy - Time.daysInYearPassedMonth[is_leap][month];
        break;
      }
    }

    tt.auto_normalize = true;
    return tt;
  }

  /**
   * Returns a new ICAL.Time instance from a date string, e.g 2015-01-02.
   *
   * @deprecated                Use {@link ICAL.Time.fromDateString} instead
   * @param {String} str        The string to create from
   * @return {Time}             The date/time instance
   */
  static fromStringv2(str) {
    return new Time({
      year: parseInt(str.slice(0, 4), 10),
      month: parseInt(str.slice(5, 7), 10),
      day: parseInt(str.slice(8, 10), 10),
      isDate: true
    });
  }

  /**
   * Returns a new ICAL.Time instance from a date string, e.g 2015-01-02.
   *
   * @param {String} aValue     The string to create from
   * @return {Time}             The date/time instance
   */
  static fromDateString(aValue) {
    // Dates should have no timezone.
    // Google likes to sometimes specify Z on dates
    // we specifically ignore that to avoid issues.

    // YYYY-MM-DD
    // 2012-10-10
    return new Time({
      year: strictParseInt(aValue.slice(0, 4)),
      month: strictParseInt(aValue.slice(5, 7)),
      day: strictParseInt(aValue.slice(8, 10)),
      isDate: true
    });
  }

  /**
   * Returns a new ICAL.Time instance from a date-time string, e.g
   * 2015-01-02T03:04:05. If a property is specified, the timezone is set up
   * from the property's TZID parameter.
   *
   * @param {String} aValue         The string to create from
   * @param {Property=} prop        The property the date belongs to
   * @return {Time}                 The date/time instance
   */
  static fromDateTimeString(aValue, prop) {
    if (aValue.length < 19) {
      throw new Error(
        'invalid date-time value: "' + aValue + '"'
      );
    }

    let zone;
    let zoneId;

    if (aValue.slice(-1) === 'Z') {
      zone = Timezone.utcTimezone;
    } else if (prop) {
      zoneId = prop.getParameter('tzid');

      if (prop.parent) {
        if (prop.parent.name === 'standard' || prop.parent.name === 'daylight') {
          // Per RFC 5545 3.8.2.4 and 3.8.2.2, start/end date-times within
          // these components MUST be specified in local time.
          zone = Timezone.localTimezone;
        } else if (zoneId) {
          // If the desired time zone is defined within the component tree,
          // fetch its definition and prefer that.
          zone = prop.parent.getTimeZoneByID(zoneId);
        }
      }
    }

    const timeData = {
      year: strictParseInt(aValue.slice(0, 4)),
      month: strictParseInt(aValue.slice(5, 7)),
      day: strictParseInt(aValue.slice(8, 10)),
      hour: strictParseInt(aValue.slice(11, 13)),
      minute: strictParseInt(aValue.slice(14, 16)),
      second: strictParseInt(aValue.slice(17, 19)),
    };

    // Although RFC 5545 requires that all TZIDs used within a file have a
    // corresponding time zone definition, we may not be parsing the full file
    // or we may be dealing with a non-compliant file; in either case, we can
    // check our own time zone service for the TZID in a last-ditch effort.
    if (zoneId && !zone) {
      timeData.timezone = zoneId;
    }

    // 2012-10-10T10:10:10(Z)?
    return new Time(timeData, zone);
  }

  /**
   * Returns a new ICAL.Time instance from a date or date-time string,
   *
   * @param {String} aValue         The string to create from
   * @param {Property=} prop        The property the date belongs to
   * @return {Time}                 The date/time instance
   */
  static fromString(aValue, aProperty) {
    if (aValue.length > 10) {
      return Time.fromDateTimeString(aValue, aProperty);
    } else {
      return Time.fromDateString(aValue);
    }
  }

  /**
   * Creates a new ICAL.Time instance from the given Javascript Date.
   *
   * @param {?Date} aDate             The Javascript Date to read, or null to reset
   * @param {Boolean} [useUTC=false]  If true, the UTC values of the date will be used
   */
  static fromJSDate(aDate, useUTC) {
    let tt = new Time();
    return tt.fromJSDate(aDate, useUTC);
  }

  /**
   * Creates a new ICAL.Time instance from the the passed data object.
   *
   * @param {timeInit} aData          Time initialization
   * @param {Timezone=} aZone         Timezone this position occurs in
   */
  static fromData = function fromData(aData, aZone) {
    let t = new Time();
    return t.fromData(aData, aZone);
  };

  /**
   * Creates a new ICAL.Time instance from the current moment.
   * The instance is “floating” - has no timezone relation.
   * To create an instance considering the time zone, call
   * ICAL.Time.fromJSDate(new Date(), true)
   * @return {Time}
   */
  static now() {
    return Time.fromJSDate(new Date(), false);
  }

  /**
   * Returns the date on which ISO week number 1 starts.
   *
   * @see Time#weekNumber
   * @param {Number} aYear                  The year to search in
   * @param {weekDay=} aWeekStart           The week start weekday, used for calculation.
   * @return {Time}                         The date on which week number 1 starts
   */
  static weekOneStarts(aYear, aWeekStart) {
    let t = Time.fromData({
      year: aYear,
      month: 1,
      day: 1,
      isDate: true
    });

    let dow = t.dayOfWeek();
    let wkst = aWeekStart || Time.DEFAULT_WEEK_START;
    if (dow > Time.THURSDAY) {
      t.day += 7;
    }
    if (wkst > Time.THURSDAY) {
      t.day -= 7;
    }

    t.day -= dow - wkst;

    return t;
  }

  /**
   * Get the dominical letter for the given year. Letters range from A - G for
   * common years, and AG to GF for leap years.
   *
   * @param {Number} yr           The year to retrieve the letter for
   * @return {String}             The dominical letter.
   */
  static getDominicalLetter(yr) {
    let LTRS = "GFEDCBA";
    let dom = (yr + (yr / 4 | 0) + (yr / 400 | 0) - (yr / 100 | 0) - 1) % 7;
    let isLeap = Time.isLeapYear(yr);
    if (isLeap) {
      return LTRS[(dom + 6) % 7] + LTRS[dom];
    } else {
      return LTRS[dom];
    }
  }

  static #epochTime = null;
  /**
   * January 1st, 1970 as an ICAL.Time.
   * @type {Time}
   * @constant
   * @instance
   */
  static get epochTime() {
    if (!this.#epochTime) {
      this.#epochTime = Time.fromData({
        year: 1970,
        month: 1,
        day: 1,
        hour: 0,
        minute: 0,
        second: 0,
        isDate: false,
        timezone: "Z"
      });
    }
    return this.#epochTime;
  }

  static _cmp_attr(a, b, attr) {
    if (a[attr] > b[attr]) return 1;
    if (a[attr] < b[attr]) return -1;
    return 0;
  }

  /**
   * The days that have passed in the year after a given month. The array has
   * two members, one being an array of passed days for non-leap years, the
   * other analog for leap years.
   * @example
   * var isLeapYear = ICAL.Time.isLeapYear(year);
   * var passedDays = ICAL.Time.daysInYearPassedMonth[isLeapYear][month];
   * @type {Array.<Array.<Number>>}
   */
  static daysInYearPassedMonth = [
    [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 365],
    [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335, 366]
  ];

  static SUNDAY = 1;
  static MONDAY = 2;
  static TUESDAY = 3;
  static WEDNESDAY = 4;
  static THURSDAY = 5;
  static FRIDAY = 6;
  static SATURDAY = 7;

  /**
   * The default weekday for the WKST part.
   * @constant
   * @default ICAL.Time.MONDAY
   */
  static DEFAULT_WEEK_START = 2; // MONDAY

  /**
   * Creates a new ICAL.Time instance.
   *
   * @param {timeInit} data           Time initialization
   * @param {Timezone} zone           timezone this position occurs in
   */
  constructor(data, zone) {
    this.wrappedJSObject = this;

    /**
     * @type {timeInit}
     * @private
     */
    this._time = Object.create(null);

    /* time defaults */
    this._time.year = 0;
    this._time.month = 1;
    this._time.day = 1;
    this._time.hour = 0;
    this._time.minute = 0;
    this._time.second = 0;
    this._time.isDate = false;

    this.fromData(data, zone);
  }

  /**
   * The class identifier.
   * @constant
   * @type {String}
   * @default "icaltime"
   */
  icalclass = "icaltime";
  _cachedUnixTime = null;

  /**
   * The type name, to be used in the jCal object. This value may change and
   * is strictly defined by the {@link ICAL.Time#isDate isDate} member.
   * @type {String}
   * @default "date-time"
   */
  get icaltype() {
    return this.isDate ? 'date' : 'date-time';
  }

  /**
   * The timezone for this time.
   * @type {Timezone}
   */
  zone = null;

  /**
   * Internal uses to indicate that a change has been made and the next read
   * operation must attempt to normalize the value (for example changing the
   * day to 33).
   *
   * @type {Boolean}
   * @private
   */
  _pendingNormalization = false;

  /**
   * The year of this date.
   * @type {Number}
   */
  get year() {
    return this._getTimeAttr('year');
  }

  set year(val) {
    this._setTimeAttr('year', val);
  }

  /**
   * The month of this date.
   * @type {Number}
   */
  get month() {
    return this._getTimeAttr('month');
  }

  set month(val) {
    this._setTimeAttr('month', val);
  }

  /**
   * The day of this date.
   * @type {Number}
   */
  get day() {
    return this._getTimeAttr('day');
  }

  set day(val) {
    this._setTimeAttr('day', val);
  }

  /**
   * The hour of this date-time.
   * @type {Number}
   */
  get hour() {
    return this._getTimeAttr('hour');
  }

  set hour(val) {
    this._setTimeAttr('hour', val);
  }

  /**
   * The minute of this date-time.
   * @type {Number}
   */
  get minute() {
    return this._getTimeAttr('minute');
  }

  set minute(val) {
    this._setTimeAttr('minute', val);
  }

  /**
   * The second of this date-time.
   * @type {Number}
   */
  get second() {
    return this._getTimeAttr('second');
  }

  set second(val) {
    this._setTimeAttr('second', val);
  }

  /**
   * If true, the instance represents a date (as opposed to a date-time)
   * @type {Boolean}
   */
  get isDate() {
    return this._getTimeAttr('isDate');
  }

  set isDate(val) {
    this._setTimeAttr('isDate', val);
  }

  /**
   * @private
   * @param {String} attr             Attribute to get (one of: year, month,
   *                                  day, hour, minute, second, isDate)
   * @return {Number|Boolean}         Current value for the attribute
   */
  _getTimeAttr(attr) {
    if (this._pendingNormalization) {
      this._normalize();
      this._pendingNormalization = false;
    }

    return this._time[attr];
  }

  /**
   * @private
   * @param {String} attr             Attribute to set (one of: year, month,
   *                                  day, hour, minute, second, isDate)
   * @param {Number|Boolean} val      New value for the attribute
   */
  _setTimeAttr(attr, val) {
    // Check if isDate will be set and if was not set to normalize date.
    // This avoids losing days when seconds, minutes and hours are zeroed
    // what normalize will do when time is a date.
    if (attr === "isDate" && val && !this._time.isDate) {
      this.adjust(0, 0, 0, 0);
    }
    this._cachedUnixTime = null;
    this._pendingNormalization = true;
    this._time[attr] = val;
  }

  /**
   * Returns a clone of the time object.
   *
   * @return {Time}              The cloned object
   */
  clone() {
    return new Time(this._time, this.zone);
  }

  /**
   * Reset the time instance to epoch time
   */
  reset() {
    this.fromData(Time.epochTime);
    this.zone = Timezone.utcTimezone;
  }

  /**
   * Reset the time instance to the given date/time values.
   *
   * @param {Number} year             The year to set
   * @param {Number} month            The month to set
   * @param {Number} day              The day to set
   * @param {Number} hour             The hour to set
   * @param {Number} minute           The minute to set
   * @param {Number} second           The second to set
   * @param {Timezone} timezone       The timezone to set
   */
  resetTo(year, month, day, hour, minute, second, timezone) {
    this.fromData({
      year: year,
      month: month,
      day: day,
      hour: hour,
      minute: minute,
      second: second,
      zone: timezone
    });
  }

  /**
   * Set up the current instance from the Javascript date value.
   *
   * @param {?Date} aDate             The Javascript Date to read, or null to reset
   * @param {Boolean} [useUTC=false]  If true, the UTC values of the date will be used
   */
  fromJSDate(aDate, useUTC) {
    if (!aDate) {
      this.reset();
    } else {
      if (useUTC) {
        this.zone = Timezone.utcTimezone;
        this.year = aDate.getUTCFullYear();
        this.month = aDate.getUTCMonth() + 1;
        this.day = aDate.getUTCDate();
        this.hour = aDate.getUTCHours();
        this.minute = aDate.getUTCMinutes();
        this.second = aDate.getUTCSeconds();
      } else {
        this.zone = Timezone.localTimezone;
        this.year = aDate.getFullYear();
        this.month = aDate.getMonth() + 1;
        this.day = aDate.getDate();
        this.hour = aDate.getHours();
        this.minute = aDate.getMinutes();
        this.second = aDate.getSeconds();
      }
    }
    this._cachedUnixTime = null;
    return this;
  }

  /**
   * Sets up the current instance using members from the passed data object.
   *
   * @param {timeInit} aData          Time initialization
   * @param {Timezone=} aZone         Timezone this position occurs in
   */
  fromData(aData, aZone) {
    if (aData) {
      for (let [key, value] of Object.entries(aData)) {
          // ical type cannot be set
          if (key === 'icaltype') continue;
        this[key] = value;
      }
    }

    if (aZone) {
      this.zone = aZone;
    }

    if (aData && !("isDate" in aData)) {
      this.isDate = !("hour" in aData);
    } else if (aData && ("isDate" in aData)) {
      this.isDate = aData.isDate;
    }

    if (aData && "timezone" in aData) {
      let zone = TimezoneService.get(
        aData.timezone
      );

      this.zone = zone || Timezone.localTimezone;
    }

    if (aData && "zone" in aData) {
      this.zone = aData.zone;
    }

    if (!this.zone) {
      this.zone = Timezone.localTimezone;
    }

    this._cachedUnixTime = null;
    return this;
  }

  /**
   * Calculate the day of week.
   * @param {weekDay=} aWeekStart
   *        The week start weekday, defaults to SUNDAY
   * @return {weekDay}
   */
  dayOfWeek(aWeekStart) {
    let firstDow = aWeekStart || Time.SUNDAY;
    let dowCacheKey = (this.year << 12) + (this.month << 8) + (this.day << 3) + firstDow;
    if (dowCacheKey in Time._dowCache) {
      return Time._dowCache[dowCacheKey];
    }

    // Using Zeller's algorithm
    let q = this.day;
    let m = this.month + (this.month < 3 ? 12 : 0);
    let Y = this.year - (this.month < 3 ? 1 : 0);

    let h = (q + Y + trunc(((m + 1) * 26) / 10) + trunc(Y / 4));
    { // eslint-disable-line no-constant-condition
      h += trunc(Y / 100) * 6 + trunc(Y / 400);
    }

    // Normalize to 1 = wkst
    h = ((h + 7 - firstDow) % 7) + 1;
    Time._dowCache[dowCacheKey] = h;
    return h;
  }

  /**
   * Calculate the day of year.
   * @return {Number}
   */
  dayOfYear() {
    let is_leap = (Time.isLeapYear(this.year) ? 1 : 0);
    let diypm = Time.daysInYearPassedMonth;
    return diypm[is_leap][this.month - 1] + this.day;
  }

  /**
   * Returns a copy of the current date/time, rewound to the start of the
   * week. The resulting ICAL.Time instance is of icaltype date, even if this
   * is a date-time.
   *
   * @param {weekDay=} aWeekStart
   *        The week start weekday, defaults to SUNDAY
   * @return {Time}      The start of the week (cloned)
   */
  startOfWeek(aWeekStart) {
    let firstDow = aWeekStart || Time.SUNDAY;
    let result = this.clone();
    result.day -= ((this.dayOfWeek() + 7 - firstDow) % 7);
    result.isDate = true;
    result.hour = 0;
    result.minute = 0;
    result.second = 0;
    return result;
  }

  /**
   * Returns a copy of the current date/time, shifted to the end of the week.
   * The resulting ICAL.Time instance is of icaltype date, even if this is a
   * date-time.
   *
   * @param {weekDay=} aWeekStart
   *        The week start weekday, defaults to SUNDAY
   * @return {Time}      The end of the week (cloned)
   */
  endOfWeek(aWeekStart) {
    let firstDow = aWeekStart || Time.SUNDAY;
    let result = this.clone();
    result.day += (7 - this.dayOfWeek() + firstDow - Time.SUNDAY) % 7;
    result.isDate = true;
    result.hour = 0;
    result.minute = 0;
    result.second = 0;
    return result;
  }

  /**
   * Returns a copy of the current date/time, rewound to the start of the
   * month. The resulting ICAL.Time instance is of icaltype date, even if
   * this is a date-time.
   *
   * @return {Time}      The start of the month (cloned)
   */
  startOfMonth() {
    let result = this.clone();
    result.day = 1;
    result.isDate = true;
    result.hour = 0;
    result.minute = 0;
    result.second = 0;
    return result;
  }

  /**
   * Returns a copy of the current date/time, shifted to the end of the
   * month.  The resulting ICAL.Time instance is of icaltype date, even if
   * this is a date-time.
   *
   * @return {Time}      The end of the month (cloned)
   */
  endOfMonth() {
    let result = this.clone();
    result.day = Time.daysInMonth(result.month, result.year);
    result.isDate = true;
    result.hour = 0;
    result.minute = 0;
    result.second = 0;
    return result;
  }

  /**
   * Returns a copy of the current date/time, rewound to the start of the
   * year. The resulting ICAL.Time instance is of icaltype date, even if
   * this is a date-time.
   *
   * @return {Time}      The start of the year (cloned)
   */
  startOfYear() {
    let result = this.clone();
    result.day = 1;
    result.month = 1;
    result.isDate = true;
    result.hour = 0;
    result.minute = 0;
    result.second = 0;
    return result;
  }

  /**
   * Returns a copy of the current date/time, shifted to the end of the
   * year.  The resulting ICAL.Time instance is of icaltype date, even if
   * this is a date-time.
   *
   * @return {Time}      The end of the year (cloned)
   */
  endOfYear() {
    let result = this.clone();
    result.day = 31;
    result.month = 12;
    result.isDate = true;
    result.hour = 0;
    result.minute = 0;
    result.second = 0;
    return result;
  }

  /**
   * First calculates the start of the week, then returns the day of year for
   * this date. If the day falls into the previous year, the day is zero or negative.
   *
   * @param {weekDay=} aFirstDayOfWeek
   *        The week start weekday, defaults to SUNDAY
   * @return {Number}     The calculated day of year
   */
  startDoyWeek(aFirstDayOfWeek) {
    let firstDow = aFirstDayOfWeek || Time.SUNDAY;
    let delta = this.dayOfWeek() - firstDow;
    if (delta < 0) delta += 7;
    return this.dayOfYear() - delta;
  }

  /**
   * Get the dominical letter for the current year. Letters range from A - G
   * for common years, and AG to GF for leap years.
   *
   * @param {Number} yr           The year to retrieve the letter for
   * @return {String}             The dominical letter.
   */
  getDominicalLetter() {
    return Time.getDominicalLetter(this.year);
  }

  /**
   * Finds the nthWeekDay relative to the current month (not day).  The
   * returned value is a day relative the month that this month belongs to so
   * 1 would indicate the first of the month and 40 would indicate a day in
   * the following month.
   *
   * @param {Number} aDayOfWeek   Day of the week see the day name constants
   * @param {Number} aPos         Nth occurrence of a given week day values
   *        of 1 and 0 both indicate the first weekday of that type. aPos may
   *        be either positive or negative
   *
   * @return {Number} numeric value indicating a day relative
   *                   to the current month of this time object
   */
  nthWeekDay(aDayOfWeek, aPos) {
    let daysInMonth = Time.daysInMonth(this.month, this.year);
    let weekday;
    let pos = aPos;

    let start = 0;

    let otherDay = this.clone();

    if (pos >= 0) {
      otherDay.day = 1;

      // because 0 means no position has been given
      // 1 and 0 indicate the same day.
      if (pos != 0) {
        // remove the extra numeric value
        pos--;
      }

      // set current start offset to current day.
      start = otherDay.day;

      // find the current day of week
      let startDow = otherDay.dayOfWeek();

      // calculate the difference between current
      // day of the week and desired day of the week
      let offset = aDayOfWeek - startDow;


      // if the offset goes into the past
      // week we add 7 so it goes into the next
      // week. We only want to go forward in time here.
      if (offset < 0)
        // this is really important otherwise we would
        // end up with dates from in the past.
        offset += 7;

      // add offset to start so start is the same
      // day of the week as the desired day of week.
      start += offset;

      // because we are going to add (and multiply)
      // the numeric value of the day we subtract it
      // from the start position so not to add it twice.
      start -= aDayOfWeek;

      // set week day
      weekday = aDayOfWeek;
    } else {

      // then we set it to the last day in the current month
      otherDay.day = daysInMonth;

      // find the ends weekday
      let endDow = otherDay.dayOfWeek();

      pos++;

      weekday = (endDow - aDayOfWeek);

      if (weekday < 0) {
        weekday += 7;
      }

      weekday = daysInMonth - weekday;
    }

    weekday += pos * 7;

    return start + weekday;
  }

  /**
   * Checks if current time is the nth weekday, relative to the current
   * month.  Will always return false when rule resolves outside of current
   * month.
   *
   * @param {weekDay} aDayOfWeek                 Day of week to check
   * @param {Number} aPos                        Relative position
   * @return {Boolean}                           True, if it is the nth weekday
   */
  isNthWeekDay(aDayOfWeek, aPos) {
    let dow = this.dayOfWeek();

    if (aPos === 0 && dow === aDayOfWeek) {
      return true;
    }

    // get pos
    let day = this.nthWeekDay(aDayOfWeek, aPos);

    if (day === this.day) {
      return true;
    }

    return false;
  }

  /**
   * Calculates the ISO 8601 week number. The first week of a year is the
   * week that contains the first Thursday. The year can have 53 weeks, if
   * January 1st is a Friday.
   *
   * Note there are regions where the first week of the year is the one that
   * starts on January 1st, which may offset the week number. Also, if a
   * different week start is specified, this will also affect the week
   * number.
   *
   * @see Time.weekOneStarts
   * @param {weekDay} aWeekStart                  The weekday the week starts with
   * @return {Number}                             The ISO week number
   */
  weekNumber(aWeekStart) {
    let wnCacheKey = (this.year << 12) + (this.month << 8) + (this.day << 3) + aWeekStart;
    if (wnCacheKey in Time._wnCache) {
      return Time._wnCache[wnCacheKey];
    }
    // This function courtesty of Julian Bucknall, published under the MIT license
    // http://www.boyet.com/articles/publishedarticles/calculatingtheisoweeknumb.html
    // plus some fixes to be able to use different week starts.
    let week1;

    let dt = this.clone();
    dt.isDate = true;
    let isoyear = this.year;

    if (dt.month == 12 && dt.day > 25) {
      week1 = Time.weekOneStarts(isoyear + 1, aWeekStart);
      if (dt.compare(week1) < 0) {
        week1 = Time.weekOneStarts(isoyear, aWeekStart);
      } else {
        isoyear++;
      }
    } else {
      week1 = Time.weekOneStarts(isoyear, aWeekStart);
      if (dt.compare(week1) < 0) {
        week1 = Time.weekOneStarts(--isoyear, aWeekStart);
      }
    }

    let daysBetween = (dt.subtractDate(week1).toSeconds() / 86400);
    let answer = trunc(daysBetween / 7) + 1;
    Time._wnCache[wnCacheKey] = answer;
    return answer;
  }

  /**
   * Adds the duration to the current time. The instance is modified in
   * place.
   *
   * @param {Duration} aDuration         The duration to add
   */
  addDuration(aDuration) {
    let mult = (aDuration.isNegative ? -1 : 1);

    // because of the duration optimizations it is much
    // more efficient to grab all the values up front
    // then set them directly (which will avoid a normalization call).
    // So we don't actually normalize until we need it.
    let second = this.second;
    let minute = this.minute;
    let hour = this.hour;
    let day = this.day;

    second += mult * aDuration.seconds;
    minute += mult * aDuration.minutes;
    hour += mult * aDuration.hours;
    day += mult * aDuration.days;
    day += mult * 7 * aDuration.weeks;

    this.second = second;
    this.minute = minute;
    this.hour = hour;
    this.day = day;

    this._cachedUnixTime = null;
  }

  /**
   * Subtract the date details (_excluding_ timezone).  Useful for finding
   * the relative difference between two time objects excluding their
   * timezone differences.
   *
   * @param {Time} aDate     The date to subtract
   * @return {Duration}      The difference as a duration
   */
  subtractDate(aDate) {
    let unixTime = this.toUnixTime() + this.utcOffset();
    let other = aDate.toUnixTime() + aDate.utcOffset();
    return Duration.fromSeconds(unixTime - other);
  }

  /**
   * Subtract the date details, taking timezones into account.
   *
   * @param {Time} aDate  The date to subtract
   * @return {Duration}   The difference in duration
   */
  subtractDateTz(aDate) {
    let unixTime = this.toUnixTime();
    let other = aDate.toUnixTime();
    return Duration.fromSeconds(unixTime - other);
  }

  /**
   * Compares the ICAL.Time instance with another one, or a period.
   *
   * @param {Time|Period} aOther                  The instance to compare with
   * @return {Number}                             -1, 0 or 1 for less/equal/greater
   */
  compare(other) {
    if (other instanceof Period) {
      return -1 * other.compare(this);
    } else {
      let a = this.toUnixTime();
      let b = other.toUnixTime();

      if (a > b) return 1;
      if (b > a) return -1;
      return 0;
    }
  }

  /**
   * Compares only the date part of this instance with another one.
   *
   * @param {Time} other                  The instance to compare with
   * @param {Timezone} tz                 The timezone to compare in
   * @return {Number}                     -1, 0 or 1 for less/equal/greater
   */
  compareDateOnlyTz(other, tz) {
    let a = this.convertToZone(tz);
    let b = other.convertToZone(tz);
    let rc = 0;

    if ((rc = Time._cmp_attr(a, b, "year")) != 0) return rc;
    if ((rc = Time._cmp_attr(a, b, "month")) != 0) return rc;
    if ((rc = Time._cmp_attr(a, b, "day")) != 0) return rc;

    return rc;
  }

  /**
   * Convert the instance into another timezone. The returned ICAL.Time
   * instance is always a copy.
   *
   * @param {Timezone} zone      The zone to convert to
   * @return {Time}              The copy, converted to the zone
   */
  convertToZone(zone) {
    let copy = this.clone();
    let zone_equals = (this.zone.tzid == zone.tzid);

    if (!this.isDate && !zone_equals) {
      Timezone.convert_time(copy, this.zone, zone);
    }

    copy.zone = zone;
    return copy;
  }

  /**
   * Calculates the UTC offset of the current date/time in the timezone it is
   * in.
   *
   * @return {Number}     UTC offset in seconds
   */
  utcOffset() {
    if (this.zone == Timezone.localTimezone ||
        this.zone == Timezone.utcTimezone) {
      return 0;
    } else {
      return this.zone.utcOffset(this);
    }
  }

  /**
   * Returns an RFC 5545 compliant ical representation of this object.
   *
   * @return {String} ical date/date-time
   */
  toICALString() {
    let string = this.toString();

    if (string.length > 10) {
      return design.icalendar.value['date-time'].toICAL(string);
    } else {
      return design.icalendar.value.date.toICAL(string);
    }
  }

  /**
   * The string representation of this date/time, in jCal form
   * (including : and - separators).
   * @return {String}
   */
  toString() {
    let result = this.year + '-' +
                 pad2(this.month) + '-' +
                 pad2(this.day);

    if (!this.isDate) {
        result += 'T' + pad2(this.hour) + ':' +
                  pad2(this.minute) + ':' +
                  pad2(this.second);

      if (this.zone === Timezone.utcTimezone) {
        result += 'Z';
      }
    }

    return result;
  }

  /**
   * Converts the current instance to a Javascript date
   * @return {Date}
   */
  toJSDate() {
    if (this.zone == Timezone.localTimezone) {
      if (this.isDate) {
        return new Date(this.year, this.month - 1, this.day);
      } else {
        return new Date(this.year, this.month - 1, this.day,
                        this.hour, this.minute, this.second, 0);
      }
    } else {
      return new Date(this.toUnixTime() * 1000);
    }
  }

  _normalize() {
    if (this._time.isDate) {
      this._time.hour = 0;
      this._time.minute = 0;
      this._time.second = 0;
    }
    this.adjust(0, 0, 0, 0);

    return this;
  }

  /**
   * Adjust the date/time by the given offset
   *
   * @param {Number} aExtraDays       The extra amount of days
   * @param {Number} aExtraHours      The extra amount of hours
   * @param {Number} aExtraMinutes    The extra amount of minutes
   * @param {Number} aExtraSeconds    The extra amount of seconds
   * @param {Number=} aTime           The time to adjust, defaults to the
   *                                    current instance.
   */
  adjust(aExtraDays, aExtraHours, aExtraMinutes, aExtraSeconds, aTime) {

    let minutesOverflow, hoursOverflow,
        daysOverflow = 0, yearsOverflow = 0;

    let second, minute, hour, day;
    let daysInMonth;

    let time = aTime || this._time;

    if (!time.isDate) {
      second = time.second + aExtraSeconds;
      time.second = second % 60;
      minutesOverflow = trunc(second / 60);
      if (time.second < 0) {
        time.second += 60;
        minutesOverflow--;
      }

      minute = time.minute + aExtraMinutes + minutesOverflow;
      time.minute = minute % 60;
      hoursOverflow = trunc(minute / 60);
      if (time.minute < 0) {
        time.minute += 60;
        hoursOverflow--;
      }

      hour = time.hour + aExtraHours + hoursOverflow;

      time.hour = hour % 24;
      daysOverflow = trunc(hour / 24);
      if (time.hour < 0) {
        time.hour += 24;
        daysOverflow--;
      }
    }


    // Adjust month and year first, because we need to know what month the day
    // is in before adjusting it.
    if (time.month > 12) {
      yearsOverflow = trunc((time.month - 1) / 12);
    } else if (time.month < 1) {
      yearsOverflow = trunc(time.month / 12) - 1;
    }

    time.year += yearsOverflow;
    time.month -= 12 * yearsOverflow;

    // Now take care of the days (and adjust month if needed)
    day = time.day + aExtraDays + daysOverflow;

    if (day > 0) {
      for (;;) {
        daysInMonth = Time.daysInMonth(time.month, time.year);
        if (day <= daysInMonth) {
          break;
        }

        time.month++;
        if (time.month > 12) {
          time.year++;
          time.month = 1;
        }

        day -= daysInMonth;
      }
    } else {
      while (day <= 0) {
        if (time.month == 1) {
          time.year--;
          time.month = 12;
        } else {
          time.month--;
        }

        day += Time.daysInMonth(time.month, time.year);
      }
    }

    time.day = day;

    this._cachedUnixTime = null;
    return this;
  }

  /**
   * Sets up the current instance from unix time, the number of seconds since
   * January 1st, 1970.
   *
   * @param {Number} seconds      The seconds to set up with
   */
  fromUnixTime(seconds) {
    this.zone = Timezone.utcTimezone;
    // We could use `fromJSDate` here, but this is about twice as fast.
    // We could also clone `epochTime` and use `adjust` for a more
    // ical.js-centric approach, but this is about 100 times as fast.
    let date = new Date(seconds * 1000);
    this.year = date.getUTCFullYear();
    this.month = date.getUTCMonth() + 1;
    this.day = date.getUTCDate();
    if (this._time.isDate) {
      this.hour = 0;
      this.minute = 0;
      this.second = 0;
    } else {
      this.hour = date.getUTCHours();
      this.minute = date.getUTCMinutes();
      this.second = date.getUTCSeconds();
    }

    this._cachedUnixTime = null;
  }

  /**
   * Converts the current instance to seconds since January 1st 1970.
   *
   * @return {Number}         Seconds since 1970
   */
  toUnixTime() {
    if (this._cachedUnixTime !== null) {
      return this._cachedUnixTime;
    }
    let offset = this.utcOffset();

    // we use the offset trick to ensure
    // that we are getting the actual UTC time
    let ms = Date.UTC(
      this.year,
      this.month - 1,
      this.day,
      this.hour,
      this.minute,
      this.second - offset
    );

    // seconds
    this._cachedUnixTime = ms / 1000;
    return this._cachedUnixTime;
  }

  /**
   * Converts time to into Object which can be serialized then re-created
   * using the constructor.
   *
   * @example
   * // toJSON will automatically be called
   * var json = JSON.stringify(mytime);
   *
   * var deserialized = JSON.parse(json);
   *
   * var time = new ICAL.Time(deserialized);
   *
   * @return {Object}
   */
  toJSON() {
    let copy = [
      'year',
      'month',
      'day',
      'hour',
      'minute',
      'second',
      'isDate'
    ];

    let result = Object.create(null);

    let i = 0;
    let len = copy.length;
    let prop;

    for (; i < len; i++) {
      prop = copy[i];
      result[prop] = this[prop];
    }

    if (this.zone) {
      result.timezone = this.zone.tzid;
    }

    return result;
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 *
 * @ignore
 * @typedef {import("./types.js").parserState} parserState
 * Imports the 'parserState' type from the "types.js" module
 * @typedef {import("./types.js").designSet} designSet
 * Imports the 'designSet' type from the "types.js" module
 */

const CHAR = /[^ \t]/;
const VALUE_DELIMITER = ':';
const PARAM_DELIMITER = ';';
const PARAM_NAME_DELIMITER = '=';
const DEFAULT_VALUE_TYPE$1 = 'unknown';
const DEFAULT_PARAM_TYPE = 'text';
const RFC6868_REPLACE_MAP$1 = { "^'": '"', "^n": "\n", "^^": "^" };

/**
 * Parses iCalendar or vCard data into a raw jCal object. Consult
 * documentation on the {@tutorial layers|layers of parsing} for more
 * details.
 *
 * @function ICAL.parse
 * @memberof ICAL
 * @variation function
 * @todo Fix the API to be more clear on the return type
 * @param {String} input      The string data to parse
 * @return {Object|Object[]}  A single jCal object, or an array thereof
 */
function parse(input) {
  let state = {};
  let root = state.component = [];

  state.stack = [root];

  parse._eachLine(input, function(err, line) {
    parse._handleContentLine(line, state);
  });


  // when there are still items on the stack
  // throw a fatal error, a component was not closed
  // correctly in that case.
  if (state.stack.length > 1) {
    throw new ParserError(
      'invalid ical body. component began but did not end'
    );
  }

  state = null;

  return (root.length == 1 ? root[0] : root);
}

/**
 * Parse an iCalendar property value into the jCal for a single property
 *
 * @function ICAL.parse.property
 * @param {String} str
 *   The iCalendar property string to parse
 * @param {designSet=} designSet
 *   The design data to use for this property
 * @return {Object}
 *   The jCal Object containing the property
 */
parse.property = function(str, designSet) {
  let state = {
    component: [[], []],
    designSet: designSet || design.defaultSet
  };
  parse._handleContentLine(str, state);
  return state.component[1][0];
};

/**
 * Convenience method to parse a component. You can use ICAL.parse() directly
 * instead.
 *
 * @function ICAL.parse.component
 * @see ICAL.parse(function)
 * @param {String} str    The iCalendar component string to parse
 * @return {Object}       The jCal Object containing the component
 */
parse.component = function(str) {
  return parse(str);
};


/**
 * An error that occurred during parsing.
 *
 * @param {String} message        The error message
 * @memberof ICAL.parse
 * @extends {Error}
 */
class ParserError extends Error {
  name = this.constructor.name;
}

// classes & constants
parse.ParserError = ParserError;


/**
 * Handles a single line of iCalendar/vCard, updating the state.
 *
 * @private
 * @function ICAL.parse._handleContentLine
 * @param {String} line          The content line to process
 * @param {parserState} state    The current state of the line parsing
 */
parse._handleContentLine = function(line, state) {
  // break up the parts of the line
  let valuePos = line.indexOf(VALUE_DELIMITER);
  let paramPos = line.indexOf(PARAM_DELIMITER);

  let lastParamIndex;
  let lastValuePos;

  // name of property or begin/end
  let name;
  let value;
  // params is only overridden if paramPos !== -1.
  // we can't do params = params || {} later on
  // because it sacrifices ops.
  let params = {};

  /**
   * Different property cases
   *
   *
   * 1. RRULE:FREQ=foo
   *    // FREQ= is not a param but the value
   *
   * 2. ATTENDEE;ROLE=REQ-PARTICIPANT;
   *    // ROLE= is a param because : has not happened yet
   */
    // when the parameter delimiter is after the
    // value delimiter then it is not a parameter.

  if ((paramPos !== -1 && valuePos !== -1)) {
    // when the parameter delimiter is after the
    // value delimiter then it is not a parameter.
    if (paramPos > valuePos) {
      paramPos = -1;
    }
  }

  let parsedParams;
  if (paramPos !== -1) {
    name = line.slice(0, Math.max(0, paramPos)).toLowerCase();
    parsedParams = parse._parseParameters(line.slice(Math.max(0, paramPos)), 0, state.designSet);
    if (parsedParams[2] == -1) {
      throw new ParserError("Invalid parameters in '" + line + "'");
    }
    params = parsedParams[0];
    // Handle parameter values with multiple entries
    let parsedParamLength;
    if (typeof parsedParams[1] === 'string') {
      parsedParamLength = parsedParams[1].length;
    } else {
      parsedParamLength = parsedParams[1].reduce((accumulator, currentValue) => {
        return accumulator + currentValue.length;
      }, 0);
    }
    lastParamIndex = parsedParamLength + parsedParams[2] + paramPos;
    if ((lastValuePos =
      line.slice(Math.max(0, lastParamIndex)).indexOf(VALUE_DELIMITER)) !== -1) {
      value = line.slice(Math.max(0, lastParamIndex + lastValuePos + 1));
    } else {
      throw new ParserError("Missing parameter value in '" + line + "'");
    }
  } else if (valuePos !== -1) {
    // without parmeters (BEGIN:VCAENDAR, CLASS:PUBLIC)
    name = line.slice(0, Math.max(0, valuePos)).toLowerCase();
    value = line.slice(Math.max(0, valuePos + 1));

    if (name === 'begin') {
      let newComponent = [value.toLowerCase(), [], []];
      if (state.stack.length === 1) {
        state.component.push(newComponent);
      } else {
        state.component[2].push(newComponent);
      }
      state.stack.push(state.component);
      state.component = newComponent;
      if (!state.designSet) {
        state.designSet = design.getDesignSet(state.component[0]);
      }
      return;
    } else if (name === 'end') {
      state.component = state.stack.pop();
      return;
    }
    // If it is not begin/end, then this is a property with an empty value,
    // which should be considered valid.
  } else {
    /**
     * Invalid line.
     * The rational to throw an error is we will
     * never be certain that the rest of the file
     * is sane and it is unlikely that we can serialize
     * the result correctly either.
     */
    throw new ParserError(
      'invalid line (no token ";" or ":") "' + line + '"'
    );
  }

  let valueType;
  let multiValue = false;
  let structuredValue = false;
  let propertyDetails;
  let splitName;
  let ungroupedName;

  // fetch the ungrouped part of the name
  if (state.designSet.propertyGroups && name.indexOf('.') !== -1) {
    splitName = name.split('.');
    params.group = splitName[0];
    ungroupedName = splitName[1];
  } else {
    ungroupedName = name;
  }

  if (ungroupedName in state.designSet.property) {
    propertyDetails = state.designSet.property[ungroupedName];

    if ('multiValue' in propertyDetails) {
      multiValue = propertyDetails.multiValue;
    }

    if ('structuredValue' in propertyDetails) {
      structuredValue = propertyDetails.structuredValue;
    }

    if (value && 'detectType' in propertyDetails) {
      valueType = propertyDetails.detectType(value);
    }
  }

  // attempt to determine value
  if (!valueType) {
    if (!('value' in params)) {
      if (propertyDetails) {
        valueType = propertyDetails.defaultType;
      } else {
        valueType = DEFAULT_VALUE_TYPE$1;
      }
    } else {
      // possible to avoid this?
      valueType = params.value.toLowerCase();
    }
  }

  delete params.value;

  /**
   * Note on `var result` juggling:
   *
   * I observed that building the array in pieces has adverse
   * effects on performance, so where possible we inline the creation.
   * It is a little ugly but resulted in ~2000 additional ops/sec.
   */

  let result;
  if (multiValue && structuredValue) {
    value = parse._parseMultiValue(value, structuredValue, valueType, [], multiValue, state.designSet, structuredValue);
    result = [ungroupedName, params, valueType, value];
  } else if (multiValue) {
    result = [ungroupedName, params, valueType];
    parse._parseMultiValue(value, multiValue, valueType, result, null, state.designSet, false);
  } else if (structuredValue) {
    value = parse._parseMultiValue(value, structuredValue, valueType, [], null, state.designSet, structuredValue);
    result = [ungroupedName, params, valueType, value];
  } else {
    value = parse._parseValue(value, valueType, state.designSet, false);
    result = [ungroupedName, params, valueType, value];
  }
  // rfc6350 requires that in vCard 4.0 the first component is the VERSION
  // component with as value 4.0, note that 3.0 does not have this requirement.
  if (state.component[0] === 'vcard' && state.component[1].length === 0 &&
          !(name === 'version' && value === '4.0')) {
    state.designSet = design.getDesignSet("vcard3");
  }
  state.component[1].push(result);
};

/**
 * Parse a value from the raw value into the jCard/jCal value.
 *
 * @private
 * @function ICAL.parse._parseValue
 * @param {String} value          Original value
 * @param {String} type           Type of value
 * @param {Object} designSet      The design data to use for this value
 * @return {Object} varies on type
 */
parse._parseValue = function(value, type, designSet, structuredValue) {
  if (type in designSet.value && 'fromICAL' in designSet.value[type]) {
    return designSet.value[type].fromICAL(value, structuredValue);
  }
  return value;
};

/**
 * Parse parameters from a string to object.
 *
 * @function ICAL.parse._parseParameters
 * @private
 * @param {String} line               A single unfolded line
 * @param {Number} start              Position to start looking for properties
 * @param {Object} designSet          The design data to use for this property
 * @return {Array}                    Array containing key/valye pairs of parsed parameters, the
 *                                      parsed value, and the position of the last parameter found
 */
parse._parseParameters = function(line, start, designSet) {
  let lastParam = start;
  let pos = 0;
  let delim = PARAM_NAME_DELIMITER;
  let result = {};
  let name, lcname;
  let value, valuePos = -1;
  let type, multiValue, mvdelim;

  // find the next '=' sign
  // use lastParam and pos to find name
  // check if " is used if so get value from "->"
  // then increment pos to find next ;

  while ((pos !== false) &&
         (pos = line.indexOf(delim, pos + 1)) !== -1) {

    name = line.slice(lastParam + 1, pos);
    if (name.length == 0) {
      throw new ParserError("Empty parameter name in '" + line + "'");
    }
    lcname = name.toLowerCase();
    mvdelim = false;
    multiValue = false;

    if (lcname in designSet.param && designSet.param[lcname].valueType) {
      type = designSet.param[lcname].valueType;
    } else {
      type = DEFAULT_PARAM_TYPE;
    }

    if (lcname in designSet.param) {
      multiValue = designSet.param[lcname].multiValue;
      if (designSet.param[lcname].multiValueSeparateDQuote) {
        mvdelim = parse._rfc6868Escape('"' + multiValue + '"');
      }
    }

    let nextChar = line[pos + 1];
    if (nextChar === '"') {
      valuePos = pos + 2;
      pos = line.indexOf('"', valuePos);
      if (multiValue && pos != -1) {
          let extendedValue = true;
          while (extendedValue) {
            if (line[pos + 1] == multiValue && line[pos + 2] == '"') {
              pos = line.indexOf('"', pos + 3);
            } else {
              extendedValue = false;
            }
          }
        }
      if (pos === -1) {
        throw new ParserError(
          'invalid line (no matching double quote) "' + line + '"'
        );
      }
      value = line.slice(valuePos, pos);
      lastParam = line.indexOf(PARAM_DELIMITER, pos);
      let propValuePos = line.indexOf(VALUE_DELIMITER, pos);
      // if either no next parameter or delimeter in property value, let's stop here
      if (lastParam === -1 || (propValuePos !== -1 && lastParam > propValuePos)) {
        pos = false;
      }
    } else {
      valuePos = pos + 1;

      // move to next ";"
      let nextPos = line.indexOf(PARAM_DELIMITER, valuePos);
      let propValuePos = line.indexOf(VALUE_DELIMITER, valuePos);
      if (propValuePos !== -1 && nextPos > propValuePos) {
        // this is a delimiter in the property value, let's stop here
        nextPos = propValuePos;
        pos = false;
      } else if (nextPos === -1) {
        // no ";"
        if (propValuePos === -1) {
          nextPos = line.length;
        } else {
          nextPos = propValuePos;
        }
        pos = false;
      } else {
        lastParam = nextPos;
        pos = nextPos;
      }

      value = line.slice(valuePos, nextPos);
    }

    const length_before = value.length;
    value = parse._rfc6868Escape(value);
    valuePos += length_before - value.length;
    if (multiValue) {
      let delimiter = mvdelim || multiValue;
      value = parse._parseMultiValue(value, delimiter, type, [], null, designSet);
    } else {
      value = parse._parseValue(value, type, designSet);
    }

    if (multiValue && (lcname in result)) {
      if (Array.isArray(result[lcname])) {
        result[lcname].push(value);
      } else {
        result[lcname] = [
          result[lcname],
          value
        ];
      }
    } else {
      result[lcname] = value;
    }
  }
  return [result, value, valuePos];
};

/**
 * Internal helper for rfc6868. Exposing this on ICAL.parse so that
 * hackers can disable the rfc6868 parsing if the really need to.
 *
 * @function ICAL.parse._rfc6868Escape
 * @param {String} val        The value to escape
 * @return {String}           The escaped value
 */
parse._rfc6868Escape = function(val) {
  return val.replace(/\^['n^]/g, function(x) {
    return RFC6868_REPLACE_MAP$1[x];
  });
};

/**
 * Parse a multi value string. This function is used either for parsing
 * actual multi-value property's values, or for handling parameter values. It
 * can be used for both multi-value properties and structured value properties.
 *
 * @private
 * @function ICAL.parse._parseMultiValue
 * @param {String} buffer           The buffer containing the full value
 * @param {String} delim            The multi-value delimiter
 * @param {String} type             The value type to be parsed
 * @param {Array.<?>} result        The array to append results to, varies on value type
 * @param {String} innerMulti       The inner delimiter to split each value with
 * @param {designSet} designSet     The design data for this value
 * @return {?|Array.<?>}            Either an array of results, or the first result
 */
parse._parseMultiValue = function(buffer, delim, type, result, innerMulti, designSet, structuredValue) {
  let pos = 0;
  let lastPos = 0;
  let value;
  if (delim.length === 0) {
    return buffer;
  }

  // split each piece
  while ((pos = unescapedIndexOf(buffer, delim, lastPos)) !== -1) {
    value = buffer.slice(lastPos, pos);
    if (innerMulti) {
      value = parse._parseMultiValue(value, innerMulti, type, [], null, designSet, structuredValue);
    } else {
      value = parse._parseValue(value, type, designSet, structuredValue);
    }
    result.push(value);
    lastPos = pos + delim.length;
  }

  // on the last piece take the rest of string
  value = buffer.slice(lastPos);
  if (innerMulti) {
    value = parse._parseMultiValue(value, innerMulti, type, [], null, designSet, structuredValue);
  } else {
    value = parse._parseValue(value, type, designSet, structuredValue);
  }
  result.push(value);

  return result.length == 1 ? result[0] : result;
};

/**
 * Process a complete buffer of iCalendar/vCard data line by line, correctly
 * unfolding content. Each line will be processed with the given callback
 *
 * @private
 * @function ICAL.parse._eachLine
 * @param {String} buffer                         The buffer to process
 * @param {function(?String, String)} callback    The callback for each line
 */
parse._eachLine = function(buffer, callback) {
  let len = buffer.length;
  let lastPos = buffer.search(CHAR);
  let pos = lastPos;
  let line;
  let firstChar;

  let newlineOffset;

  do {
    pos = buffer.indexOf('\n', lastPos) + 1;

    if (pos > 1 && buffer[pos - 2] === '\r') {
      newlineOffset = 2;
    } else {
      newlineOffset = 1;
    }

    if (pos === 0) {
      pos = len;
      newlineOffset = 0;
    }

    firstChar = buffer[lastPos];

    if (firstChar === ' ' || firstChar === '\t') {
      // add to line
      line += buffer.slice(lastPos + 1, pos - newlineOffset);
    } else {
      if (line)
        callback(null, line);
      // push line
      line = buffer.slice(lastPos, pos - newlineOffset);
    }

    lastPos = pos;
  } while (pos !== len);

  // extra ending line
  line = line.trim();

  if (line.length)
    callback(null, line);
};

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


const OPTIONS = ["tzid", "location", "tznames", "latitude", "longitude"];

/**
 * Timezone representation.
 *
 * @example
 * var vcalendar;
 * var timezoneComp = vcalendar.getFirstSubcomponent('vtimezone');
 * var tzid = timezoneComp.getFirstPropertyValue('tzid');
 *
 * var timezone = new ICAL.Timezone({
 *   component: timezoneComp,
 *   tzid
 * });
 *
 * @memberof ICAL
 */
class Timezone {
  static _compare_change_fn(a, b) {
    if (a.year < b.year) return -1;
    else if (a.year > b.year) return 1;

    if (a.month < b.month) return -1;
    else if (a.month > b.month) return 1;

    if (a.day < b.day) return -1;
    else if (a.day > b.day) return 1;

    if (a.hour < b.hour) return -1;
    else if (a.hour > b.hour) return 1;

    if (a.minute < b.minute) return -1;
    else if (a.minute > b.minute) return 1;

    if (a.second < b.second) return -1;
    else if (a.second > b.second) return 1;

    return 0;
  }

  /**
   * Convert the date/time from one zone to the next.
   *
   * @param {Time} tt                  The time to convert
   * @param {Timezone} from_zone       The source zone to convert from
   * @param {Timezone} to_zone         The target zone to convert to
   * @return {Time}                    The converted date/time object
   */
  static convert_time(tt, from_zone, to_zone) {
    if (tt.isDate ||
        from_zone.tzid == to_zone.tzid ||
        from_zone == Timezone.localTimezone ||
        to_zone == Timezone.localTimezone) {
      tt.zone = to_zone;
      return tt;
    }

    let utcOffset = from_zone.utcOffset(tt);
    tt.adjust(0, 0, 0, - utcOffset);

    utcOffset = to_zone.utcOffset(tt);
    tt.adjust(0, 0, 0, utcOffset);

    return null;
  }

  /**
   * Creates a new ICAL.Timezone instance from the passed data object.
   *
   * @param {Component|Object} aData options for class
   * @param {String|Component} aData.component
   *        If aData is a simple object, then this member can be set to either a
   *        string containing the component data, or an already parsed
   *        ICAL.Component
   * @param {String} aData.tzid      The timezone identifier
   * @param {String} aData.location  The timezone locationw
   * @param {String} aData.tznames   An alternative string representation of the
   *                                  timezone
   * @param {Number} aData.latitude  The latitude of the timezone
   * @param {Number} aData.longitude The longitude of the timezone
   */
  static fromData(aData) {
    let tt = new Timezone();
    return tt.fromData(aData);
  }

  /**
   * The instance describing the UTC timezone
   * @type {Timezone}
   * @constant
   * @instance
   */
  static #utcTimezone = null;
  static get utcTimezone() {
    if (!this.#utcTimezone) {
      this.#utcTimezone = Timezone.fromData({
        tzid: "UTC"
      });
    }
    return this.#utcTimezone;
  }

  /**
   * The instance describing the local timezone
   * @type {Timezone}
   * @constant
   * @instance
   */
  static #localTimezone = null;
  static get localTimezone() {
    if (!this.#localTimezone) {
      this.#localTimezone = Timezone.fromData({
        tzid: "floating"
      });
    }
    return this.#localTimezone;
  }

  /**
   * Adjust a timezone change object.
   * @private
   * @param {Object} change     The timezone change object
   * @param {Number} days       The extra amount of days
   * @param {Number} hours      The extra amount of hours
   * @param {Number} minutes    The extra amount of minutes
   * @param {Number} seconds    The extra amount of seconds
   */
  static adjust_change(change, days, hours, minutes, seconds) {
    return Time.prototype.adjust.call(
      change,
      days,
      hours,
      minutes,
      seconds,
      change
    );
  }

  static _minimumExpansionYear = -1;
  static EXTRA_COVERAGE = 5;

  /**
   * Creates a new ICAL.Timezone instance, by passing in a tzid and component.
   *
   * @param {Component|Object} data options for class
   * @param {String|Component} data.component
   *        If data is a simple object, then this member can be set to either a
   *        string containing the component data, or an already parsed
   *        ICAL.Component
   * @param {String} data.tzid      The timezone identifier
   * @param {String} data.location  The timezone locationw
   * @param {String} data.tznames   An alternative string representation of the
   *                                  timezone
   * @param {Number} data.latitude  The latitude of the timezone
   * @param {Number} data.longitude The longitude of the timezone
   */
  constructor(data) {
    this.wrappedJSObject = this;
    this.fromData(data);
  }


  /**
   * Timezone identifier
   * @type {String}
   */
  tzid = "";

  /**
   * Timezone location
   * @type {String}
   */
  location = "";

  /**
   * Alternative timezone name, for the string representation
   * @type {String}
   */
  tznames = "";

  /**
   * The primary latitude for the timezone.
   * @type {Number}
   */
  latitude = 0.0;

  /**
   * The primary longitude for the timezone.
   * @type {Number}
   */
  longitude = 0.0;

  /**
   * The vtimezone component for this timezone.
   * @type {Component}
   */
  component = null;

  /**
   * The year this timezone has been expanded to. All timezone transition
   * dates until this year are known and can be used for calculation
   *
   * @private
   * @type {Number}
   */
  expandedUntilYear = 0;

  /**
   * The class identifier.
   * @constant
   * @type {String}
   * @default "icaltimezone"
   */
  icalclass = "icaltimezone";

  /**
   * Sets up the current instance using members from the passed data object.
   *
   * @param {Component|Object} aData options for class
   * @param {String|Component} aData.component
   *        If aData is a simple object, then this member can be set to either a
   *        string containing the component data, or an already parsed
   *        ICAL.Component
   * @param {String} aData.tzid      The timezone identifier
   * @param {String} aData.location  The timezone locationw
   * @param {String} aData.tznames   An alternative string representation of the
   *                                  timezone
   * @param {Number} aData.latitude  The latitude of the timezone
   * @param {Number} aData.longitude The longitude of the timezone
   */
  fromData(aData) {
    this.expandedUntilYear = 0;
    this.changes = [];

    if (aData instanceof Component) {
      // Either a component is passed directly
      this.component = aData;
    } else {
      // Otherwise the component may be in the data object
      if (aData && "component" in aData) {
        if (typeof aData.component == "string") {
          // If a string was passed, parse it as a component
          let jCal = parse(aData.component);
          this.component = new Component(jCal);
        } else if (aData.component instanceof Component) {
          // If it was a component already, then just set it
          this.component = aData.component;
        } else {
          // Otherwise just null out the component
          this.component = null;
        }
      }

      // Copy remaining passed properties
      for (let prop of OPTIONS) {
        if (aData && prop in aData) {
          this[prop] = aData[prop];
        }
      }
    }

    // If we have a component but no TZID, attempt to get it from the
    // component's properties.
    if (this.component instanceof Component && !this.tzid) {
      this.tzid = this.component.getFirstPropertyValue('tzid');
    }

    return this;
  }

  /**
   * Finds the utcOffset the given time would occur in this timezone.
   *
   * @param {Time} tt         The time to check for
   * @return {Number}         utc offset in seconds
   */
  utcOffset(tt) {
    if (this == Timezone.utcTimezone || this == Timezone.localTimezone) {
      return 0;
    }

    this._ensureCoverage(tt.year);

    if (!this.changes.length) {
      return 0;
    }

    let tt_change = {
      year: tt.year,
      month: tt.month,
      day: tt.day,
      hour: tt.hour,
      minute: tt.minute,
      second: tt.second
    };

    let change_num = this._findNearbyChange(tt_change);
    let change_num_to_use = -1;
    let step = 1;

    // TODO: replace with bin search?
    for (;;) {
      let change = clone(this.changes[change_num], true);
      if (change.utcOffset < change.prevUtcOffset) {
        Timezone.adjust_change(change, 0, 0, 0, change.utcOffset);
      } else {
        Timezone.adjust_change(change, 0, 0, 0,
                                        change.prevUtcOffset);
      }

      let cmp = Timezone._compare_change_fn(tt_change, change);

      if (cmp >= 0) {
        change_num_to_use = change_num;
      } else {
        step = -1;
      }

      if (step == -1 && change_num_to_use != -1) {
        break;
      }

      change_num += step;

      if (change_num < 0) {
        return 0;
      }

      if (change_num >= this.changes.length) {
        break;
      }
    }

    let zone_change = this.changes[change_num_to_use];
    let utcOffset_change = zone_change.utcOffset - zone_change.prevUtcOffset;

    if (utcOffset_change < 0 && change_num_to_use > 0) {
      let tmp_change = clone(zone_change, true);
      Timezone.adjust_change(tmp_change, 0, 0, 0, tmp_change.prevUtcOffset);

      if (Timezone._compare_change_fn(tt_change, tmp_change) < 0) {
        let prev_zone_change = this.changes[change_num_to_use - 1];

        let want_daylight = false; // TODO

        if (zone_change.is_daylight != want_daylight &&
            prev_zone_change.is_daylight == want_daylight) {
          zone_change = prev_zone_change;
        }
      }
    }

    // TODO return is_daylight?
    return zone_change.utcOffset;
  }

  _findNearbyChange(change) {
    // find the closest match
    let idx = binsearchInsert(
      this.changes,
      change,
      Timezone._compare_change_fn
    );

    if (idx >= this.changes.length) {
      return this.changes.length - 1;
    }

    return idx;
  }

  _ensureCoverage(aYear) {
    if (Timezone._minimumExpansionYear == -1) {
      let today = Time.now();
      Timezone._minimumExpansionYear = today.year;
    }

    let changesEndYear = aYear;
    if (changesEndYear < Timezone._minimumExpansionYear) {
      changesEndYear = Timezone._minimumExpansionYear;
    }

    changesEndYear += Timezone.EXTRA_COVERAGE;

    if (!this.changes.length || this.expandedUntilYear < aYear) {
      let subcomps = this.component.getAllSubcomponents();
      let compLen = subcomps.length;
      let compIdx = 0;

      for (; compIdx < compLen; compIdx++) {
        this._expandComponent(
          subcomps[compIdx], changesEndYear, this.changes
        );
      }

      this.changes.sort(Timezone._compare_change_fn);
      this.expandedUntilYear = changesEndYear;
    }
  }

  _expandComponent(aComponent, aYear, changes) {
    if (!aComponent.hasProperty("dtstart") ||
        !aComponent.hasProperty("tzoffsetto") ||
        !aComponent.hasProperty("tzoffsetfrom")) {
      return null;
    }

    let dtstart = aComponent.getFirstProperty("dtstart").getFirstValue();
    let change;

    function convert_tzoffset(offset) {
      return offset.factor * (offset.hours * 3600 + offset.minutes * 60);
    }

    function init_changes() {
      let changebase = {};
      changebase.is_daylight = (aComponent.name == "daylight");
      changebase.utcOffset = convert_tzoffset(
        aComponent.getFirstProperty("tzoffsetto").getFirstValue()
      );

      changebase.prevUtcOffset = convert_tzoffset(
        aComponent.getFirstProperty("tzoffsetfrom").getFirstValue()
      );

      return changebase;
    }

    if (!aComponent.hasProperty("rrule") && !aComponent.hasProperty("rdate")) {
      change = init_changes();
      change.year = dtstart.year;
      change.month = dtstart.month;
      change.day = dtstart.day;
      change.hour = dtstart.hour;
      change.minute = dtstart.minute;
      change.second = dtstart.second;

      Timezone.adjust_change(change, 0, 0, 0, -change.prevUtcOffset);
      changes.push(change);
    } else {
      let props = aComponent.getAllProperties("rdate");
      for (let rdate of props) {
        let time = rdate.getFirstValue();
        change = init_changes();

        change.year = time.year;
        change.month = time.month;
        change.day = time.day;

        if (time.isDate) {
          change.hour = dtstart.hour;
          change.minute = dtstart.minute;
          change.second = dtstart.second;

          if (dtstart.zone != Timezone.utcTimezone) {
            Timezone.adjust_change(change, 0, 0, 0, -change.prevUtcOffset);
          }
        } else {
          change.hour = time.hour;
          change.minute = time.minute;
          change.second = time.second;

          if (time.zone != Timezone.utcTimezone) {
            Timezone.adjust_change(change, 0, 0, 0, -change.prevUtcOffset);
          }
        }

        changes.push(change);
      }

      let rrule = aComponent.getFirstProperty("rrule");

      if (rrule) {
        rrule = rrule.getFirstValue();
        change = init_changes();

        if (rrule.until && rrule.until.zone == Timezone.utcTimezone) {
          rrule.until.adjust(0, 0, 0, change.prevUtcOffset);
          rrule.until.zone = Timezone.localTimezone;
        }

        let iterator = rrule.iterator(dtstart);

        let occ;
        while ((occ = iterator.next())) {
          change = init_changes();
          if (occ.year > aYear || !occ) {
            break;
          }

          change.year = occ.year;
          change.month = occ.month;
          change.day = occ.day;
          change.hour = occ.hour;
          change.minute = occ.minute;
          change.second = occ.second;
          change.isDate = occ.isDate;

          Timezone.adjust_change(change, 0, 0, 0, -change.prevUtcOffset);
          changes.push(change);
        }
      }
    }

    return changes;
  }

  /**
   * The string representation of this timezone.
   * @return {String}
   */
  toString() {
    return (this.tznames ? this.tznames : this.tzid);
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


let zones = null;

/**
 * @classdesc
 * Singleton class to contain timezones.  Right now it is all manual registry in
 * the future we may use this class to download timezone information or handle
 * loading pre-expanded timezones.
 *
 * @exports module:ICAL.TimezoneService
 * @memberof ICAL
 */
const TimezoneService = {
  get count() {
    if (zones === null) {
      return 0;
    }

    return Object.keys(zones).length;
  },

  reset: function() {
    zones = Object.create(null);
    let utc = Timezone.utcTimezone;

    zones.Z = utc;
    zones.UTC = utc;
    zones.GMT = utc;
  },
  _hard_reset: function() {
    zones = null;
  },

  /**
   * Checks if timezone id has been registered.
   *
   * @param {String} tzid     Timezone identifier (e.g. America/Los_Angeles)
   * @return {Boolean}        False, when not present
   */
  has: function(tzid) {
    if (zones === null) {
      return false;
    }

    return !!zones[tzid];
  },

  /**
   * Returns a timezone by its tzid if present.
   *
   * @param {String} tzid               Timezone identifier (e.g. America/Los_Angeles)
   * @return {Timezone | undefined}     The timezone, or undefined if not found
   */
  get: function(tzid) {
    if (zones === null) {
      this.reset();
    }

    return zones[tzid];
  },

  /**
   * Registers a timezone object or component.
   *
   * @param {Component|Timezone} timezone
   *        The initialized zone or vtimezone.
   *
   * @param {String=} name
   *        The name of the timezone. Defaults to the component's TZID if not
   *        passed.
   */
  register: function(timezone, name) {
    if (zones === null) {
      this.reset();
    }

    // This avoids a breaking change by the change of argument order
    // TODO remove in v3
    if (typeof timezone === "string" && name instanceof Timezone) {
      [timezone, name] = [name, timezone];
    }

    if (!name) {
      if (timezone instanceof Timezone) {
        name = timezone.tzid;
      } else {
        if (timezone.name === 'vtimezone') {
          timezone = new Timezone(timezone);
          name = timezone.tzid;
        }
      }
    }

    if (!name) {
      throw new TypeError("Neither a timezone nor a name was passed");
    }

    if (timezone instanceof Timezone) {
      zones[name] = timezone;
    } else {
      throw new TypeError('timezone must be ICAL.Timezone or ICAL.Component');
    }
  },

  /**
   * Removes a timezone by its tzid from the list.
   *
   * @param {String} tzid     Timezone identifier (e.g. America/Los_Angeles)
   * @return {?Timezone}      The removed timezone, or null if not registered
   */
  remove: function(tzid) {
    if (zones === null) {
      return null;
    }

    return (delete zones[tzid]);
  }
};

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * Helper functions used in various places within ical.js
 * @module ICAL.helpers
 */

/**
 * Compiles a list of all referenced TZIDs in all subcomponents and
 * removes any extra VTIMEZONE subcomponents. In addition, if any TZIDs
 * are referenced by a component, but a VTIMEZONE does not exist,
 * an attempt will be made to generate a VTIMEZONE using ICAL.TimezoneService.
 *
 * @param {Component} vcal     The top-level VCALENDAR component.
 * @return {Component}         The ICAL.Component that was passed in.
 */
function updateTimezones(vcal) {
  let allsubs, properties, vtimezones, reqTzid, i;

  if (!vcal || vcal.name !== "vcalendar") {
    //not a top-level vcalendar component
    return vcal;
  }

  //Store vtimezone subcomponents in an object reference by tzid.
  //Store properties from everything else in another array
  allsubs = vcal.getAllSubcomponents();
  properties = [];
  vtimezones = {};
  for (i = 0; i < allsubs.length; i++) {
    if (allsubs[i].name === "vtimezone") {
      let tzid = allsubs[i].getFirstProperty("tzid").getFirstValue();
      vtimezones[tzid] = allsubs[i];
    } else {
      properties = properties.concat(allsubs[i].getAllProperties());
    }
  }

  //create an object with one entry for each required tz
  reqTzid = {};
  for (i = 0; i < properties.length; i++) {
    let tzid = properties[i].getParameter("tzid");
    if (tzid) {
      reqTzid[tzid] = true;
    }
  }

  //delete any vtimezones that are not on the reqTzid list.
  for (let [tzid, comp] of Object.entries(vtimezones)) {
    if (!reqTzid[tzid]) {
      vcal.removeSubcomponent(comp);
    }
  }

  //create any missing, but registered timezones
  for (let tzid of Object.keys(reqTzid)) {
    if (!vtimezones[tzid] && TimezoneService.has(tzid)) {
      vcal.addSubcomponent(TimezoneService.get(tzid).component);
    }
  }

  return vcal;
}

/**
 * Checks if the given type is of the number type and also NaN.
 *
 * @param {Number} number     The number to check
 * @return {Boolean}          True, if the number is strictly NaN
 */
function isStrictlyNaN(number) {
  return typeof(number) === 'number' && isNaN(number);
}

/**
 * Parses a string value that is expected to be an integer, when the valid is
 * not an integer throws a decoration error.
 *
 * @param {String} string     Raw string input
 * @return {Number}           Parsed integer
 */
function strictParseInt(string) {
  let result = parseInt(string, 10);

  if (isStrictlyNaN(result)) {
    throw new Error(
      'Could not extract integer from "' + string + '"'
    );
  }

  return result;
}

/**
 * Creates or returns a class instance of a given type with the initialization
 * data if the data is not already an instance of the given type.
 *
 * @example
 * var time = new ICAL.Time(...);
 * var result = ICAL.helpers.formatClassType(time, ICAL.Time);
 *
 * (result instanceof ICAL.Time)
 * // => true
 *
 * result = ICAL.helpers.formatClassType({}, ICAL.Time);
 * (result isntanceof ICAL.Time)
 * // => true
 *
 *
 * @param {Object} data       object initialization data
 * @param {Object} type       object type (like ICAL.Time)
 * @return {?}                An instance of the found type.
 */
function formatClassType(data, type) {
  if (typeof(data) === 'undefined') {
    return undefined;
  }

  if (data instanceof type) {
    return data;
  }
  return new type(data);
}

/**
 * Identical to indexOf but will only match values when they are not preceded
 * by a backslash character.
 *
 * @param {String} buffer         String to search
 * @param {String} search         Value to look for
 * @param {Number} pos            Start position
 * @return {Number}               The position, or -1 if not found
 */
function unescapedIndexOf(buffer, search, pos) {
  while ((pos = buffer.indexOf(search, pos)) !== -1) {
    if (pos > 0 && buffer[pos - 1] === '\\') {
      pos += 1;
    } else {
      return pos;
    }
  }
  return -1;
}

/**
 * Find the index for insertion using binary search.
 *
 * @param {Array} list            The list to search
 * @param {?} seekVal             The value to insert
 * @param {function(?,?)} cmpfunc The comparison func, that can
 *                                  compare two seekVals
 * @return {Number}               The insert position
 */
function binsearchInsert(list, seekVal, cmpfunc) {
  if (!list.length)
    return 0;

  let low = 0, high = list.length - 1,
      mid, cmpval;

  while (low <= high) {
    mid = low + Math.floor((high - low) / 2);
    cmpval = cmpfunc(seekVal, list[mid]);

    if (cmpval < 0)
      high = mid - 1;
    else if (cmpval > 0)
      low = mid + 1;
    else
      break;
  }

  if (cmpval < 0)
    return mid; // insertion is displacing, so use mid outright.
  else if (cmpval > 0)
    return mid + 1;
  else
    return mid;
}

/**
 * Clone the passed object or primitive. By default a shallow clone will be
 * executed.
 *
 * @param {*} aSrc            The thing to clone
 * @param {Boolean=} aDeep    If true, a deep clone will be performed
 * @return {*}                The copy of the thing
 */
function clone(aSrc, aDeep) {
  if (!aSrc || typeof aSrc != "object") {
    return aSrc;
  } else if (aSrc instanceof Date) {
    return new Date(aSrc.getTime());
  } else if ("clone" in aSrc) {
    return aSrc.clone();
  } else if (Array.isArray(aSrc)) {
    let arr = [];
    for (let i = 0; i < aSrc.length; i++) {
      arr.push(aDeep ? clone(aSrc[i], true) : aSrc[i]);
    }
    return arr;
  } else {
    let obj = {};
    for (let [name, value] of Object.entries(aSrc)) {
      if (aDeep) {
        obj[name] = clone(value, true);
      } else {
        obj[name] = value;
      }
    }
    return obj;
  }
}

/**
 * Performs iCalendar line folding. A line ending character is inserted and
 * the next line begins with a whitespace.
 *
 * @example
 * SUMMARY:This line will be fold
 *  ed right in the middle of a word.
 *
 * @param {String} aLine      The line to fold
 * @return {String}           The folded line
 */
function foldline(aLine) {
  let result = "";
  let line = aLine || "", pos = 0, line_length = 0;
  //pos counts position in line for the UTF-16 presentation
  //line_length counts the bytes for the UTF-8 presentation
  while (line.length) {
    let cp = line.codePointAt(pos);
    if (cp < 128) ++line_length;
    else if (cp < 2048) line_length += 2;//needs 2 UTF-8 bytes
    else if (cp < 65536) line_length += 3;
    else line_length += 4; //cp is less than 1114112
    if (line_length < ICALmodule.foldLength + 1)
      pos += cp > 65535 ? 2 : 1;
    else {
      result += ICALmodule.newLineChar + " " + line.slice(0, Math.max(0, pos));
      line = line.slice(Math.max(0, pos));
      pos = line_length = 0;
    }
  }
  return result.slice(ICALmodule.newLineChar.length + 1);
}

/**
 * Pads the given string or number with zeros so it will have at least two
 * characters.
 *
 * @param {String|Number} data    The string or number to pad
 * @return {String}               The number padded as a string
 */
function pad2(data) {
  if (typeof(data) !== 'string') {
    // handle fractions.
    if (typeof(data) === 'number') {
      data = parseInt(data);
    }
    data = String(data);
  }

  let len = data.length;

  switch (len) {
    case 0:
      return '00';
    case 1:
      return '0' + data;
    default:
      return data;
  }
}

/**
 * Truncates the given number, correctly handling negative numbers.
 *
 * @param {Number} number     The number to truncate
 * @return {Number}           The truncated number
 */
function trunc(number) {
  return (number < 0 ? Math.ceil(number) : Math.floor(number));
}

/**
 * Poor-man's cross-browser object extension. Doesn't support all the
 * features, but enough for our usage. Note that the target's properties are
 * not overwritten with the source properties.
 *
 * @example
 * var child = ICAL.helpers.extend(parent, {
 *   "bar": 123
 * });
 *
 * @param {Object} source     The object to extend
 * @param {Object} target     The object to extend with
 * @return {Object}           Returns the target.
 */
function extend(source, target) {
  for (let key in source) {
    let descr = Object.getOwnPropertyDescriptor(source, key);
    if (descr && !Object.getOwnPropertyDescriptor(target, key)) {
      Object.defineProperty(target, key, descr);
    }
  }
  return target;
}

var helpers = /*#__PURE__*/Object.freeze({
  __proto__: null,
  binsearchInsert: binsearchInsert,
  clone: clone,
  extend: extend,
  foldline: foldline,
  formatClassType: formatClassType,
  isStrictlyNaN: isStrictlyNaN,
  pad2: pad2,
  strictParseInt: strictParseInt,
  trunc: trunc,
  unescapedIndexOf: unescapedIndexOf,
  updateTimezones: updateTimezones
});

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This class represents the "utc-offset" value type, with various calculation and manipulation
 * methods.
 *
 * @memberof ICAL
 */
class UtcOffset {
  /**
   * Creates a new {@link ICAL.UtcOffset} instance from the passed string.
   *
   * @param {String} aString    The string to parse
   * @return {Duration}         The created utc-offset instance
   */
  static fromString(aString) {
    // -05:00
    let options = {};
    //TODO: support seconds per rfc5545 ?
    options.factor = (aString[0] === '+') ? 1 : -1;
    options.hours = strictParseInt(aString.slice(1, 3));
    options.minutes = strictParseInt(aString.slice(4, 6));

    return new UtcOffset(options);
  }

  /**
   * Creates a new {@link ICAL.UtcOffset} instance from the passed seconds
   * value.
   *
   * @param {Number} aSeconds       The number of seconds to convert
   */
  static fromSeconds(aSeconds) {
    let instance = new UtcOffset();
    instance.fromSeconds(aSeconds);
    return instance;
  }

  /**
   * Creates a new ICAL.UtcOffset instance.
   *
   * @param {Object} aData          An object with members of the utc offset
   * @param {Number=} aData.hours   The hours for the utc offset
   * @param {Number=} aData.minutes The minutes in the utc offset
   * @param {Number=} aData.factor  The factor for the utc-offset, either -1 or 1
   */
  constructor(aData) {
    this.fromData(aData);
  }

  /**
   * The hours in the utc-offset
   * @type {Number}
   */
  hours = 0;

  /**
   * The minutes in the utc-offset
   * @type {Number}
   */
  minutes = 0;

  /**
   * The sign of the utc offset, 1 for positive offset, -1 for negative
   * offsets.
   * @type {Number}
   */
  factor = 1;

  /**
   * The type name, to be used in the jCal object.
   * @constant
   * @type {String}
   * @default "utc-offset"
   */
  icaltype = "utc-offset";

  /**
   * Returns a clone of the utc offset object.
   *
   * @return {UtcOffset}     The cloned object
   */
  clone() {
    return UtcOffset.fromSeconds(this.toSeconds());
  }

  /**
   * Sets up the current instance using members from the passed data object.
   *
   * @param {Object} aData          An object with members of the utc offset
   * @param {Number=} aData.hours   The hours for the utc offset
   * @param {Number=} aData.minutes The minutes in the utc offset
   * @param {Number=} aData.factor  The factor for the utc-offset, either -1 or 1
   */
  fromData(aData) {
    if (aData) {
      for (let [key, value] of Object.entries(aData)) {
        this[key] = value;
      }
    }
    this._normalize();
  }

  /**
   * Sets up the current instance from the given seconds value. The seconds
   * value is truncated to the minute. Offsets are wrapped when the world
   * ends, the hour after UTC+14:00 is UTC-12:00.
   *
   * @param {Number} aSeconds         The seconds to convert into an offset
   */
  fromSeconds(aSeconds) {
    let secs = Math.abs(aSeconds);

    this.factor = aSeconds < 0 ? -1 : 1;
    this.hours = trunc(secs / 3600);

    secs -= (this.hours * 3600);
    this.minutes = trunc(secs / 60);
    return this;
  }

  /**
   * Convert the current offset to a value in seconds
   *
   * @return {Number}                 The offset in seconds
   */
  toSeconds() {
    return this.factor * (60 * this.minutes + 3600 * this.hours);
  }

  /**
   * Compare this utc offset with another one.
   *
   * @param {UtcOffset} other             The other offset to compare with
   * @return {Number}                     -1, 0 or 1 for less/equal/greater
   */
  compare(other) {
    let a = this.toSeconds();
    let b = other.toSeconds();
    return (a > b) - (b > a);
  }

  _normalize() {
    // Range: 97200 seconds (with 1 hour inbetween)
    let secs = this.toSeconds();
    let factor = this.factor;
    while (secs < -43200) { // = UTC-12:00
      secs += 97200;
    }
    while (secs > 50400) { // = UTC+14:00
      secs -= 97200;
    }

    this.fromSeconds(secs);

    // Avoid changing the factor when on zero seconds
    if (secs == 0) {
      this.factor = factor;
    }
  }

  /**
   * The iCalendar string representation of this utc-offset.
   * @return {String}
   */
  toICALString() {
    return design.icalendar.value['utc-offset'].toICAL(this.toString());
  }

  /**
   * The string representation of this utc-offset.
   * @return {String}
   */
  toString() {
    return (this.factor == 1 ? "+" : "-") + pad2(this.hours) + ':' + pad2(this.minutes);
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * Describes a vCard time, which has slight differences to the ICAL.Time.
 * Properties can be null if not specified, for example for dates with
 * reduced accuracy or truncation.
 *
 * Note that currently not all methods are correctly re-implemented for
 * VCardTime. For example, comparison will have undefined results when some
 * members are null.
 *
 * Also, normalization is not yet implemented for this class!
 *
 * @memberof ICAL
 * @extends {Time}
 */
class VCardTime extends Time {
  /**
   * Returns a new ICAL.VCardTime instance from a date and/or time string.
   *
   * @param {String} aValue     The string to create from
   * @param {String} aIcalType  The type for this instance, e.g. date-and-or-time
   * @return {VCardTime}        The date/time instance
   */
  static fromDateAndOrTimeString(aValue, aIcalType) {
    function part(v, s, e) {
      return v ? strictParseInt(v.slice(s, s + e)) : null;
    }
    let parts = aValue.split('T');
    let dt = parts[0], tmz = parts[1];
    let splitzone = tmz ? design.vcard.value.time._splitZone(tmz) : [];
    let zone = splitzone[0], tm = splitzone[1];

    let dtlen = dt ? dt.length : 0;
    let tmlen = tm ? tm.length : 0;

    let hasDashDate = dt && dt[0] == '-' && dt[1] == '-';
    let hasDashTime = tm && tm[0] == '-';

    let o = {
      year: hasDashDate ? null : part(dt, 0, 4),
      month: hasDashDate && (dtlen == 4 || dtlen == 7) ? part(dt, 2, 2) : dtlen == 7 ? part(dt, 5, 2) : dtlen == 10 ? part(dt, 5, 2) : null,
      day: dtlen == 5 ? part(dt, 3, 2) : dtlen == 7 && hasDashDate ? part(dt, 5, 2) : dtlen == 10 ? part(dt, 8, 2) : null,

      hour: hasDashTime ? null : part(tm, 0, 2),
      minute: hasDashTime && tmlen == 3 ? part(tm, 1, 2) : tmlen > 4 ? hasDashTime ? part(tm, 1, 2) : part(tm, 3, 2) : null,
      second: tmlen == 4 ? part(tm, 2, 2) : tmlen == 6 ? part(tm, 4, 2) : tmlen == 8 ? part(tm, 6, 2) : null
    };

    if (zone == 'Z') {
      zone = Timezone.utcTimezone;
    } else if (zone && zone[3] == ':') {
      zone = UtcOffset.fromString(zone);
    } else {
      zone = null;
    }

    return new VCardTime(o, zone, aIcalType);
  }


  /**
   * Creates a new ICAL.VCardTime instance.
   *
   * @param {Object} data                           The data for the time instance
   * @param {Number=} data.year                     The year for this date
   * @param {Number=} data.month                    The month for this date
   * @param {Number=} data.day                      The day for this date
   * @param {Number=} data.hour                     The hour for this date
   * @param {Number=} data.minute                   The minute for this date
   * @param {Number=} data.second                   The second for this date
   * @param {Timezone|UtcOffset} zone               The timezone to use
   * @param {String} icaltype                       The type for this date/time object
   */
  constructor(data, zone, icaltype) {
    super(data, zone);
    this.icaltype = icaltype || "date-and-or-time";
  }

  /**
   * The class identifier.
   * @constant
   * @type {String}
   * @default "vcardtime"
   */
  icalclass = "vcardtime";

  /**
   * The type name, to be used in the jCal object.
   * @type {String}
   * @default "date-and-or-time"
   */
  icaltype = "date-and-or-time";

  /**
   * Returns a clone of the vcard date/time object.
   *
   * @return {VCardTime}     The cloned object
   */
  clone() {
    return new VCardTime(this._time, this.zone, this.icaltype);
  }

  _normalize() {
    return this;
  }

  /**
   * @inheritdoc
   */
  utcOffset() {
    if (this.zone instanceof UtcOffset) {
      return this.zone.toSeconds();
    } else {
      return Time.prototype.utcOffset.apply(this, arguments);
    }
  }

  /**
   * Returns an RFC 6350 compliant representation of this object.
   *
   * @return {String}         vcard date/time string
   */
  toICALString() {
    return design.vcard.value[this.icaltype].toICAL(this.toString());
  }

  /**
   * The string representation of this date/time, in jCard form
   * (including : and - separators).
   * @return {String}
   */
  toString() {
    let y = this.year, m = this.month, d = this.day;
    let h = this.hour, mm = this.minute, s = this.second;

    let hasYear = y !== null, hasMonth = m !== null, hasDay = d !== null;
    let hasHour = h !== null, hasMinute = mm !== null, hasSecond = s !== null;

    let datepart = (hasYear ? pad2(y) + (hasMonth || hasDay ? '-' : '') : (hasMonth || hasDay ? '--' : '')) +
                   (hasMonth ? pad2(m) : '') +
                   (hasDay ? '-' + pad2(d) : '');
    let timepart = (hasHour ? pad2(h) : '-') + (hasHour && hasMinute ? ':' : '') +
                   (hasMinute ? pad2(mm) : '') + (!hasHour && !hasMinute ? '-' : '') +
                   (hasMinute && hasSecond ? ':' : '') +
                   (hasSecond ? pad2(s) : '');

    let zone;
    if (this.zone === Timezone.utcTimezone) {
      zone = 'Z';
    } else if (this.zone instanceof UtcOffset) {
      zone = this.zone.toString();
    } else if (this.zone === Timezone.localTimezone) {
      zone = '';
    } else if (this.zone instanceof Timezone) {
      let offset = UtcOffset.fromSeconds(this.zone.utcOffset(this));
      zone = offset.toString();
    } else {
      zone = '';
    }

    switch (this.icaltype) {
      case "time":
        return timepart + zone;
      case "date-and-or-time":
      case "date-time":
        return datepart + (timepart == '--' ? '' : 'T' + timepart + zone);
      case "date":
        return datepart;
    }
    return null;
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 *
 * @ignore
 * @typedef {import("./types.js").weekDay} weekDay
 * Imports the 'weekDay' type from the "types.js" module
 */

/**
 * An iterator for a single recurrence rule. This class usually doesn't have to be instanciated
 * directly, the convenience method {@link ICAL.Recur#iterator} can be used.
 *
 * @memberof ICAL
 */
class RecurIterator {
  static _indexMap = {
    "BYSECOND": 0,
    "BYMINUTE": 1,
    "BYHOUR": 2,
    "BYDAY": 3,
    "BYMONTHDAY": 4,
    "BYYEARDAY": 5,
    "BYWEEKNO": 6,
    "BYMONTH": 7,
    "BYSETPOS": 8
  };

  static _expandMap = {
    "SECONDLY": [1, 1, 1, 1, 1, 1, 1, 1],
    "MINUTELY": [2, 1, 1, 1, 1, 1, 1, 1],
    "HOURLY": [2, 2, 1, 1, 1, 1, 1, 1],
    "DAILY": [2, 2, 2, 1, 1, 1, 1, 1],
    "WEEKLY": [2, 2, 2, 2, 3, 3, 1, 1],
    "MONTHLY": [2, 2, 2, 2, 2, 3, 3, 1],
    "YEARLY": [2, 2, 2, 2, 2, 2, 2, 2]
  };

  static UNKNOWN = 0;
  static CONTRACT = 1;
  static EXPAND = 2;
  static ILLEGAL = 3;

  /**
   * Creates a new ICAL.RecurIterator instance. The options object may contain additional members
   * when resuming iteration from a previous run.
   *
   * @param {Object} options                The iterator options
   * @param {Recur} options.rule            The rule to iterate.
   * @param {Time} options.dtstart          The start date of the event.
   * @param {Boolean=} options.initialized  When true, assume that options are
   *        from a previously constructed iterator. Initialization will not be
   *        repeated.
   */
  constructor(options) {
    this.fromData(options);
  }

  /**
   * True when iteration is finished.
   * @type {Boolean}
   */
  completed = false;

  /**
   * The rule that is being iterated
   * @type {Recur}
   */
  rule = null;

  /**
   * The start date of the event being iterated.
   * @type {Time}
   */
  dtstart = null;

  /**
   * The last occurrence that was returned from the
   * {@link RecurIterator#next} method.
   * @type {Time}
   */
  last = null;

  /**
   * The sequence number from the occurrence
   * @type {Number}
   */
  occurrence_number = 0;

  /**
   * The indices used for the {@link ICAL.RecurIterator#by_data} object.
   * @type {Object}
   * @private
   */
  by_indices = null;

  /**
   * If true, the iterator has already been initialized
   * @type {Boolean}
   * @private
   */
  initialized = false;

  /**
   * The initializd by-data.
   * @type {Object}
   * @private
   */
  by_data = null;

  /**
   * The expanded yeardays
   * @type {Array}
   * @private
   */
  days = null;

  /**
   * The index in the {@link ICAL.RecurIterator#days} array.
   * @type {Number}
   * @private
   */
  days_index = 0;

  /**
   * Initialize the recurrence iterator from the passed data object. This
   * method is usually not called directly, you can initialize the iterator
   * through the constructor.
   *
   * @param {Object} options                The iterator options
   * @param {Recur} options.rule            The rule to iterate.
   * @param {Time} options.dtstart          The start date of the event.
   * @param {Boolean=} options.initialized  When true, assume that options are
   *        from a previously constructed iterator. Initialization will not be
   *        repeated.
   */
  fromData(options) {
    this.rule = formatClassType(options.rule, Recur);

    if (!this.rule) {
      throw new Error('iterator requires a (ICAL.Recur) rule');
    }

    this.dtstart = formatClassType(options.dtstart, Time);

    if (!this.dtstart) {
      throw new Error('iterator requires a (ICAL.Time) dtstart');
    }

    if (options.by_data) {
      this.by_data = options.by_data;
    } else {
      this.by_data = clone(this.rule.parts, true);
    }

    if (options.occurrence_number)
      this.occurrence_number = options.occurrence_number;

    this.days = options.days || [];
    if (options.last) {
      this.last = formatClassType(options.last, Time);
    }

    this.by_indices = options.by_indices;

    if (!this.by_indices) {
      this.by_indices = {
        "BYSECOND": 0,
        "BYMINUTE": 0,
        "BYHOUR": 0,
        "BYDAY": 0,
        "BYMONTH": 0,
        "BYWEEKNO": 0,
        "BYMONTHDAY": 0
      };
    }

    this.initialized = options.initialized || false;

    if (!this.initialized) {
      try {
        this.init();
      } catch (e) {
        if (e instanceof InvalidRecurrenceRuleError) {
          // Init may error if there are no possible recurrence instances from
          // the rule, but we don't want to bubble this error up. Instead, we
          // create an empty iterator.
          this.completed = true;
        } else {
          // Propagate other errors to consumers.
          throw e;
        }
      }
    }
  }

  /**
   * Initialize the iterator
   * @private
   */
  init() {
    this.initialized = true;
    this.last = this.dtstart.clone();
    let parts = this.by_data;

    if ("BYDAY" in parts) {
      // libical does this earlier when the rule is loaded, but we postpone to
      // now so we can preserve the original order.
      this.sort_byday_rules(parts.BYDAY);
    }

    // The BYYEARDAY may only appear with BYDAY
    if ("BYYEARDAY" in parts) {
      if ("BYMONTH" in parts || "BYWEEKNO" in parts ||
          "BYMONTHDAY" in parts) {
        throw new Error("Invalid BYYEARDAY rule");
      }
    }

    // BYWEEKNO and BYMONTHDAY rule parts may not both appear
    if ("BYWEEKNO" in parts && "BYMONTHDAY" in parts) {
      throw new Error("BYWEEKNO does not fit to BYMONTHDAY");
    }

    // For MONTHLY recurrences (FREQ=MONTHLY) neither BYYEARDAY nor
    // BYWEEKNO may appear.
    if (this.rule.freq == "MONTHLY" &&
        ("BYYEARDAY" in parts || "BYWEEKNO" in parts)) {
      throw new Error("For MONTHLY recurrences neither BYYEARDAY nor BYWEEKNO may appear");
    }

    // For WEEKLY recurrences (FREQ=WEEKLY) neither BYMONTHDAY nor
    // BYYEARDAY may appear.
    if (this.rule.freq == "WEEKLY" &&
        ("BYYEARDAY" in parts || "BYMONTHDAY" in parts)) {
      throw new Error("For WEEKLY recurrences neither BYMONTHDAY nor BYYEARDAY may appear");
    }

    // BYYEARDAY may only appear in YEARLY rules
    if (this.rule.freq != "YEARLY" && "BYYEARDAY" in parts) {
      throw new Error("BYYEARDAY may only appear in YEARLY rules");
    }

    this.last.second = this.setup_defaults("BYSECOND", "SECONDLY", this.dtstart.second);
    this.last.minute = this.setup_defaults("BYMINUTE", "MINUTELY", this.dtstart.minute);
    this.last.hour = this.setup_defaults("BYHOUR", "HOURLY", this.dtstart.hour);
    this.last.day = this.setup_defaults("BYMONTHDAY", "DAILY", this.dtstart.day);
    this.last.month = this.setup_defaults("BYMONTH", "MONTHLY", this.dtstart.month);

    if (this.rule.freq == "WEEKLY") {
      if ("BYDAY" in parts) {
        let [, dow] = this.ruleDayOfWeek(parts.BYDAY[0], this.rule.wkst);
        let wkdy = dow - this.last.dayOfWeek(this.rule.wkst);
        if ((this.last.dayOfWeek(this.rule.wkst) < dow && wkdy >= 0) || wkdy < 0) {
          // Initial time is after first day of BYDAY data
          this.last.day += wkdy;
        }
      } else {
        let dayName = Recur.numericDayToIcalDay(this.dtstart.dayOfWeek());
        parts.BYDAY = [dayName];
      }
    }

    if (this.rule.freq == "YEARLY") {
      // Some yearly recurrence rules may be specific enough to not actually
      // occur on a yearly basis, e.g. the 29th day of February or the fifth
      // Monday of a given month. The standard isn't clear on the intended
      // behavior in these cases, but `libical` at least will iterate until it
      // finds a matching year.
      // CAREFUL: Some rules may specify an occurrence that can never happen,
      // e.g. the first Monday of April so long as it falls on the 15th
      // through the 21st. Detecting these is non-trivial, so ensure that we
      // stop iterating at some point.
      const untilYear = this.rule.until ? this.rule.until.year : 20000;
      while (this.last.year <= untilYear) {
        this.expand_year_days(this.last.year);
        if (this.days.length > 0) {
          break;
        }
        this.increment_year(this.rule.interval);
      }

      if (this.days.length == 0) {
        throw new InvalidRecurrenceRuleError();
      }

      // If there's no occurrence in this year, try the following years. This
      // would only happen looking for day 366 or -366.
      if (!this._nextByYearDay() && !this.next_year() && !this.next_year() && !this.next_year()) {
        // This should not be possible, but just in case it is, stop.
        throw new InvalidRecurrenceRuleError();
      }
    }

    if (this.rule.freq == "MONTHLY") {
      if (this.has_by_data("BYDAY")) {
        let tempLast = null;
        let initLast = this.last.clone();
        let daysInMonth = Time.daysInMonth(this.last.month, this.last.year);

        // Check every weekday in BYDAY with relative dow and pos.
        for (let bydow of this.by_data.BYDAY) {
          this.last = initLast.clone();
          let [pos, dow] = this.ruleDayOfWeek(bydow);
          let dayOfMonth = this.last.nthWeekDay(dow, pos);

          // If |pos| >= 6, the byday is invalid for a monthly rule.
          if (pos >= 6 || pos <= -6) {
            throw new Error("Malformed values in BYDAY part");
          }

          // If a Byday with pos=+/-5 is not in the current month it
          // must be searched in the next months.
          if (dayOfMonth > daysInMonth || dayOfMonth <= 0) {
            // Skip if we have already found a "last" in this month.
            if (tempLast && tempLast.month == initLast.month) {
              continue;
            }
            while (dayOfMonth > daysInMonth || dayOfMonth <= 0) {
              this.increment_month();
              daysInMonth = Time.daysInMonth(this.last.month, this.last.year);
              dayOfMonth = this.last.nthWeekDay(dow, pos);
            }
          }

          this.last.day = dayOfMonth;
          if (!tempLast || this.last.compare(tempLast) < 0) {
            tempLast = this.last.clone();
          }
        }
        this.last = tempLast.clone();

        //XXX: This feels like a hack, but we need to initialize
        //     the BYMONTHDAY case correctly and byDayAndMonthDay handles
        //     this case. It accepts a special flag which will avoid incrementing
        //     the initial value without the flag days that match the start time
        //     would be missed.
        if (this.has_by_data('BYMONTHDAY')) {
          this._byDayAndMonthDay(true);
        }

        if (this.last.day > daysInMonth || this.last.day == 0) {
          throw new Error("Malformed values in BYDAY part");
        }
      } else if (this.has_by_data("BYMONTHDAY")) {
        // Change the day value so that normalisation won't change the month.
        this.last.day = 1;

        // Get a sorted list of days in the starting month that match the rule.
        let normalized = this.normalizeByMonthDayRules(
          this.last.year,
          this.last.month,
          this.rule.parts.BYMONTHDAY
        ).filter(d => d >= this.last.day);

        if (normalized.length) {
          // There's at least one valid day, use it.
          this.last.day = normalized[0];
          this.by_data.BYMONTHDAY = normalized;
        } else {
          // There's no occurrence in this month, find the next valid month.
          // The longest possible sequence of skipped months is February-April-June,
          // so we might need to call next_month up to three times.
          if (!this.next_month() && !this.next_month() && !this.next_month()) {
            throw new InvalidRecurrenceRuleError();
          }
        }
      }
    }
  }

  /**
   * Retrieve the next occurrence from the iterator.
   * @return {Time}
   */
  next(again = false) {
    let before = (this.last ? this.last.clone() : null);

    if ((this.rule.count && this.occurrence_number >= this.rule.count) ||
        (this.rule.until && this.last.compare(this.rule.until) > 0)) {
      this.completed = true;
    }

    if (this.completed) {
      return null;
    }

    if (this.occurrence_number == 0 && this.last.compare(this.dtstart) >= 0) {
      // First of all, give the instance that was initialized
      this.occurrence_number++;
      return this.last;
    }

    let valid;
    let invalid_count = 0;
    do {
      valid = 1;

      switch (this.rule.freq) {
      case "SECONDLY":
        this.next_second();
        break;
      case "MINUTELY":
        this.next_minute();
        break;
      case "HOURLY":
        this.next_hour();
        break;
      case "DAILY":
        this.next_day();
        break;
      case "WEEKLY":
        this.next_week();
        break;
      case "MONTHLY":
        valid = this.next_month();
        if (valid) {
          invalid_count = 0;
        } else if (++invalid_count == 336) {
          // We've been through all 91 month variations and not found a recurrence. Stop.
          // (12 months and 29-day February × 7 starting days.)
          this.completed = true;
          return null;
        }
        break;
      case "YEARLY":
        valid = this.next_year();
        if (valid) {
          invalid_count = 0;
        } else if (++invalid_count == 28) {
          // We've been through all 14 year variations and not found a recurrence. Stop.
          // (365-day and 366-day years × 7 starting days.)
          this.completed = true;
          return null;
        }
        break;

      default:
        return null;
      }
    } while (!this.check_contracting_rules() ||
             this.last.compare(this.dtstart) < 0 ||
             !valid);

    if (this.last.compare(before) == 0) {
      if (again) {
        throw new Error("Same occurrence found twice, protecting you from death by recursion");
      }
      this.next(true);
    }

    if (this.rule.until && this.last.compare(this.rule.until) > 0) {
      this.completed = true;
      return null;
    } else {
      this.occurrence_number++;
      return this.last;
    }
  }

  next_second() {
    return this.next_generic("BYSECOND", "SECONDLY", "second", "minute");
  }

  increment_second(inc) {
    return this.increment_generic(inc, "second", 60, "minute");
  }

  next_minute() {
    return this.next_generic("BYMINUTE", "MINUTELY",
                             "minute", "hour", "next_second");
  }

  increment_minute(inc) {
    return this.increment_generic(inc, "minute", 60, "hour");
  }

  next_hour() {
    return this.next_generic("BYHOUR", "HOURLY", "hour",
                             "monthday", "next_minute");
  }

  increment_hour(inc) {
    this.increment_generic(inc, "hour", 24, "monthday");
  }

  next_day() {
    let this_freq = (this.rule.freq == "DAILY");

    if (this.next_hour() == 0) {
      return 0;
    }

    if (this_freq) {
      this.increment_monthday(this.rule.interval);
    } else {
      this.increment_monthday(1);
    }

    return 0;
  }

  next_week() {
    let end_of_data = 0;

    if (this.next_weekday_by_week() == 0) {
      return end_of_data;
    }

    if (this.has_by_data("BYWEEKNO")) {
      this.by_indices.BYWEEKNO++;

      if (this.by_indices.BYWEEKNO == this.by_data.BYWEEKNO.length) {
        this.by_indices.BYWEEKNO = 0;
        end_of_data = 1;
      }

      // HACK should be first month of the year
      this.last.month = 1;
      this.last.day = 1;

      let week_no = this.by_data.BYWEEKNO[this.by_indices.BYWEEKNO];

      this.last.day += 7 * week_no;

      if (end_of_data) {
        this.increment_year(1);
      }
    } else {
      // Jump to the next week
      this.increment_monthday(7 * this.rule.interval);
    }

    return end_of_data;
  }

  /**
   * Normalize each by day rule for a given year/month.
   * Takes into account ordering and negative rules
   *
   * @private
   * @param {Number} year         Current year.
   * @param {Number} month        Current month.
   * @param {Array}  rules        Array of rules.
   *
   * @return {Array} sorted and normalized rules.
   *                 Negative rules will be expanded to their
   *                 correct positive values for easier processing.
   */
  normalizeByMonthDayRules(year, month, rules) {
    let daysInMonth = Time.daysInMonth(month, year);

    // XXX: This is probably bad for performance to allocate
    //      a new array for each month we scan, if possible
    //      we should try to optimize this...
    let newRules = [];

    let ruleIdx = 0;
    let len = rules.length;
    let rule;

    for (; ruleIdx < len; ruleIdx++) {
      rule = parseInt(rules[ruleIdx], 10);
      if (isNaN(rule)) {
        throw new Error('Invalid BYMONTHDAY value');
      }

      // if this rule falls outside of given
      // month discard it.
      if (Math.abs(rule) > daysInMonth) {
        continue;
      }

      // negative case
      if (rule < 0) {
        // we add (not subtract it is a negative number)
        // one from the rule because 1 === last day of month
        rule = daysInMonth + (rule + 1);
      } else if (rule === 0) {
        // skip zero: it is invalid.
        continue;
      }

      // only add unique items...
      if (newRules.indexOf(rule) === -1) {
        newRules.push(rule);
      }

    }

    // unique and sort
    return newRules.sort(function(a, b) { return a - b; });
  }

  /**
   * NOTES:
   * We are given a list of dates in the month (BYMONTHDAY) (23, etc..)
   * Also we are given a list of days (BYDAY) (MO, 2SU, etc..) when
   * both conditions match a given date (this.last.day) iteration stops.
   *
   * @private
   * @param {Boolean=} isInit     When given true will not increment the
   *                                current day (this.last).
   */
  _byDayAndMonthDay(isInit) {
    let byMonthDay; // setup in initMonth
    let byDay = this.by_data.BYDAY;

    let date;
    let dateIdx = 0;
    let dateLen; // setup in initMonth
    let dayLen = byDay.length;

    // we are not valid by default
    let dataIsValid = 0;

    let daysInMonth;
    let self = this;
    // we need a copy of this, because a DateTime gets normalized
    // automatically if the day is out of range. At some points we
    // set the last day to 0 to start counting.
    let lastDay = this.last.day;

    function initMonth() {
      daysInMonth = Time.daysInMonth(
        self.last.month, self.last.year
      );

      byMonthDay = self.normalizeByMonthDayRules(
        self.last.year,
        self.last.month,
        self.by_data.BYMONTHDAY
      );

      dateLen = byMonthDay.length;

      // For the case of more than one occurrence in one month
      // we have to be sure to start searching after the last
      // found date or at the last BYMONTHDAY, unless we are
      // initializing the iterator because in this case we have
      // to consider the last found date too.
      while (byMonthDay[dateIdx] <= lastDay &&
             !(isInit && byMonthDay[dateIdx] == lastDay) &&
             dateIdx < dateLen - 1) {
        dateIdx++;
      }
    }

    function nextMonth() {
      // since the day is incremented at the start
      // of the loop below, we need to start at 0
      lastDay = 0;
      self.increment_month();
      dateIdx = 0;
      initMonth();
    }

    initMonth();

    // should come after initMonth
    if (isInit) {
      lastDay -= 1;
    }

    // Use a counter to avoid an infinite loop with malformed rules.
    // Stop checking after 4 years so we consider also a leap year.
    let monthsCounter = 48;

    while (!dataIsValid && monthsCounter) {
      monthsCounter--;
      // increment the current date. This is really
      // important otherwise we may fall into the infinite
      // loop trap. The initial date takes care of the case
      // where the current date is the date we are looking
      // for.
      date = lastDay + 1;

      if (date > daysInMonth) {
        nextMonth();
        continue;
      }

      // find next date
      let next = byMonthDay[dateIdx++];

      // this logic is dependent on the BYMONTHDAYS
      // being in order (which is done by #normalizeByMonthDayRules)
      if (next >= date) {
        // if the next month day is in the future jump to it.
        lastDay = next;
      } else {
        // in this case the 'next' monthday has past
        // we must move to the month.
        nextMonth();
        continue;
      }

      // Now we can loop through the day rules to see
      // if one matches the current month date.
      for (let dayIdx = 0; dayIdx < dayLen; dayIdx++) {
        let parts = this.ruleDayOfWeek(byDay[dayIdx]);
        let pos = parts[0];
        let dow = parts[1];

        this.last.day = lastDay;
        if (this.last.isNthWeekDay(dow, pos)) {
          // when we find the valid one we can mark
          // the conditions as met and break the loop.
          // (Because we have this condition above
          //  it will also break the parent loop).
          dataIsValid = 1;
          break;
        }
      }

      // It is completely possible that the combination
      // cannot be matched in the current month.
      // When we reach the end of possible combinations
      // in the current month we iterate to the next one.
      // since dateIdx is incremented right after getting
      // "next", we don't need dateLen -1 here.
      if (!dataIsValid && dateIdx === dateLen) {
        nextMonth();
        continue;
      }
    }

    if (monthsCounter <= 0) {
      // Checked 4 years without finding a Byday that matches
      // a Bymonthday. Maybe the rule is not correct.
      throw new Error("Malformed values in BYDAY combined with BYMONTHDAY parts");
    }


    return dataIsValid;
  }

  next_month() {
    let data_valid = 1;

    if (this.next_hour() == 0) {
      return data_valid;
    }

    if (this.has_by_data("BYDAY") && this.has_by_data("BYMONTHDAY")) {
      data_valid = this._byDayAndMonthDay();
    } else if (this.has_by_data("BYDAY")) {
      let daysInMonth = Time.daysInMonth(this.last.month, this.last.year);
      let setpos = 0;
      let setpos_total = 0;

      if (this.has_by_data("BYSETPOS")) {
        let last_day = this.last.day;
        for (let day = 1; day <= daysInMonth; day++) {
          this.last.day = day;
          if (this.is_day_in_byday(this.last)) {
            setpos_total++;
            if (day <= last_day) {
              setpos++;
            }
          }
        }
        this.last.day = last_day;
      }

      data_valid = 0;
      let day;
      for (day = this.last.day + 1; day <= daysInMonth; day++) {
        this.last.day = day;

        if (this.is_day_in_byday(this.last)) {
          if (!this.has_by_data("BYSETPOS") ||
              this.check_set_position(++setpos) ||
              this.check_set_position(setpos - setpos_total - 1)) {

            data_valid = 1;
            break;
          }
        }
      }

      if (day > daysInMonth) {
        this.last.day = 1;
        this.increment_month();

        if (this.is_day_in_byday(this.last)) {
          if (!this.has_by_data("BYSETPOS") || this.check_set_position(1)) {
            data_valid = 1;
          }
        } else {
          data_valid = 0;
        }
      }
    } else if (this.has_by_data("BYMONTHDAY")) {
      this.by_indices.BYMONTHDAY++;

      if (this.by_indices.BYMONTHDAY >= this.by_data.BYMONTHDAY.length) {
        this.by_indices.BYMONTHDAY = 0;
        this.increment_month();
        if (this.by_indices.BYMONTHDAY >= this.by_data.BYMONTHDAY.length) {
          return 0;
        }
      }

      let daysInMonth = Time.daysInMonth(this.last.month, this.last.year);
      let day = this.by_data.BYMONTHDAY[this.by_indices.BYMONTHDAY];

      if (day < 0) {
        day = daysInMonth + day + 1;
      }

      if (day > daysInMonth) {
        this.last.day = 1;
        data_valid = this.is_day_in_byday(this.last);
      } else {
        this.last.day = day;
      }
    } else {
      this.increment_month();
      let daysInMonth = Time.daysInMonth(this.last.month, this.last.year);
      if (this.by_data.BYMONTHDAY[0] > daysInMonth) {
        data_valid = 0;
      } else {
        this.last.day = this.by_data.BYMONTHDAY[0];
      }
    }

    return data_valid;
  }

  next_weekday_by_week() {
    let end_of_data = 0;

    if (this.next_hour() == 0) {
      return end_of_data;
    }

    if (!this.has_by_data("BYDAY")) {
      return 1;
    }

    for (;;) {
      let tt = new Time();
      this.by_indices.BYDAY++;

      if (this.by_indices.BYDAY == Object.keys(this.by_data.BYDAY).length) {
        this.by_indices.BYDAY = 0;
        end_of_data = 1;
      }

      let coded_day = this.by_data.BYDAY[this.by_indices.BYDAY];
      let parts = this.ruleDayOfWeek(coded_day);
      let dow = parts[1];

      dow -= this.rule.wkst;

      if (dow < 0) {
        dow += 7;
      }

      tt.year = this.last.year;
      tt.month = this.last.month;
      tt.day = this.last.day;

      let startOfWeek = tt.startDoyWeek(this.rule.wkst);

      if (dow + startOfWeek < 1) {
        // The selected date is in the previous year
        if (!end_of_data) {
          continue;
        }
      }

      let next = Time.fromDayOfYear(startOfWeek + dow, this.last.year);

      /**
       * The normalization horrors below are due to
       * the fact that when the year/month/day changes
       * it can effect the other operations that come after.
       */
      this.last.year = next.year;
      this.last.month = next.month;
      this.last.day = next.day;

      return end_of_data;
    }
  }

  next_year() {
    if (this.next_hour() == 0) {
      return 0;
    }

    if (this.days.length == 0 || ++this.days_index == this.days.length) {
      this.days_index = 0;
      this.increment_year(this.rule.interval);
      if (this.has_by_data("BYMONTHDAY")) {
        this.by_data.BYMONTHDAY = this.normalizeByMonthDayRules(
          this.last.year,
          this.last.month,
          this.rule.parts.BYMONTHDAY
        );
      }
      this.expand_year_days(this.last.year);
      if (this.days.length == 0) {
        return 0;
      }
    }

    return this._nextByYearDay();
  }

  _nextByYearDay() {
    let doy = this.days[this.days_index];
    let year = this.last.year;

    if (Math.abs(doy) == 366 && !Time.isLeapYear(this.last.year)) {
      return 0;
    }

    if (doy < 1) {
        // Time.fromDayOfYear(doy, year) indexes relative to the
        // start of the given year. That is different from the
        // semantics of BYYEARDAY where negative indexes are an
        // offset from the end of the given year.
        doy += 1;
        year += 1;
    }
    let next = Time.fromDayOfYear(doy, year);
    this.last.day = next.day;
    this.last.month = next.month;

    return 1;
  }

  /**
   * @param dow (eg: '1TU', '-1MO')
   * @param {weekDay=} aWeekStart The week start weekday
   * @return [pos, numericDow] (eg: [1, 3]) numericDow is relative to aWeekStart
   */
  ruleDayOfWeek(dow, aWeekStart) {
    let matches = dow.match(/([+-]?[0-9])?(MO|TU|WE|TH|FR|SA|SU)/);
    if (matches) {
      let pos = parseInt(matches[1] || 0, 10);
      dow = Recur.icalDayToNumericDay(matches[2], aWeekStart);
      return [pos, dow];
    } else {
      return [0, 0];
    }
  }

  next_generic(aRuleType, aInterval, aDateAttr, aFollowingAttr, aPreviousIncr) {
    let has_by_rule = (aRuleType in this.by_data);
    let this_freq = (this.rule.freq == aInterval);
    let end_of_data = 0;

    if (aPreviousIncr && this[aPreviousIncr]() == 0) {
      return end_of_data;
    }

    if (has_by_rule) {
      this.by_indices[aRuleType]++;
      let dta = this.by_data[aRuleType];

      if (this.by_indices[aRuleType] == dta.length) {
        this.by_indices[aRuleType] = 0;
        end_of_data = 1;
      }
      this.last[aDateAttr] = dta[this.by_indices[aRuleType]];
    } else if (this_freq) {
      this["increment_" + aDateAttr](this.rule.interval);
    }

    if (has_by_rule && end_of_data && this_freq) {
      this["increment_" + aFollowingAttr](1);
    }

    return end_of_data;
  }

  increment_monthday(inc) {
    for (let i = 0; i < inc; i++) {
      let daysInMonth = Time.daysInMonth(this.last.month, this.last.year);
      this.last.day++;

      if (this.last.day > daysInMonth) {
        this.last.day -= daysInMonth;
        this.increment_month();
      }
    }
  }

  increment_month() {
    this.last.day = 1;
    if (this.has_by_data("BYMONTH")) {
      this.by_indices.BYMONTH++;

      if (this.by_indices.BYMONTH == this.by_data.BYMONTH.length) {
        this.by_indices.BYMONTH = 0;
        this.increment_year(1);
      }

      this.last.month = this.by_data.BYMONTH[this.by_indices.BYMONTH];
    } else {
      if (this.rule.freq == "MONTHLY") {
        this.last.month += this.rule.interval;
      } else {
        this.last.month++;
      }

      this.last.month--;
      let years = trunc(this.last.month / 12);
      this.last.month %= 12;
      this.last.month++;

      if (years != 0) {
        this.increment_year(years);
      }
    }

    if (this.has_by_data("BYMONTHDAY")) {
      this.by_data.BYMONTHDAY = this.normalizeByMonthDayRules(
        this.last.year,
        this.last.month,
        this.rule.parts.BYMONTHDAY
      );
    }
  }

  increment_year(inc) {
    // Don't jump into the next month if this.last is Feb 29.
    this.last.day = 1;
    this.last.year += inc;
  }

  increment_generic(inc, aDateAttr, aFactor, aNextIncrement) {
    this.last[aDateAttr] += inc;
    let nextunit = trunc(this.last[aDateAttr] / aFactor);
    this.last[aDateAttr] %= aFactor;
    if (nextunit != 0) {
      this["increment_" + aNextIncrement](nextunit);
    }
  }

  has_by_data(aRuleType) {
    return (aRuleType in this.rule.parts);
  }

  expand_year_days(aYear) {
    let t = new Time();
    this.days = [];

    // We need our own copy with a few keys set
    let parts = {};
    let rules = ["BYDAY", "BYWEEKNO", "BYMONTHDAY", "BYMONTH", "BYYEARDAY"];
    for (let part of rules) {
      if (part in this.rule.parts) {
        parts[part] = this.rule.parts[part];
      }
    }

    if ("BYMONTH" in parts && "BYWEEKNO" in parts) {
      let valid = 1;
      let validWeeks = {};
      t.year = aYear;
      t.isDate = true;

      for (let monthIdx = 0; monthIdx < this.by_data.BYMONTH.length; monthIdx++) {
        let month = this.by_data.BYMONTH[monthIdx];
        t.month = month;
        t.day = 1;
        let first_week = t.weekNumber(this.rule.wkst);
        t.day = Time.daysInMonth(month, aYear);
        let last_week = t.weekNumber(this.rule.wkst);
        for (monthIdx = first_week; monthIdx < last_week; monthIdx++) {
          validWeeks[monthIdx] = 1;
        }
      }

      for (let weekIdx = 0; weekIdx < this.by_data.BYWEEKNO.length && valid; weekIdx++) {
        let weekno = this.by_data.BYWEEKNO[weekIdx];
        if (weekno < 52) {
          valid &= validWeeks[weekIdx];
        } else {
          valid = 0;
        }
      }

      if (valid) {
        delete parts.BYMONTH;
      } else {
        delete parts.BYWEEKNO;
      }
    }

    let partCount = Object.keys(parts).length;

    if (partCount == 0) {
      let t1 = this.dtstart.clone();
      t1.year = this.last.year;
      this.days.push(t1.dayOfYear());
    } else if (partCount == 1 && "BYMONTH" in parts) {
      for (let month of this.by_data.BYMONTH) {
        let t2 = this.dtstart.clone();
        t2.year = aYear;
        t2.month = month;
        t2.isDate = true;
        this.days.push(t2.dayOfYear());
      }
    } else if (partCount == 1 && "BYMONTHDAY" in parts) {
      for (let monthday of this.by_data.BYMONTHDAY) {
        let t3 = this.dtstart.clone();
        if (monthday < 0) {
          let daysInMonth = Time.daysInMonth(t3.month, aYear);
          monthday = monthday + daysInMonth + 1;
        }
        t3.day = monthday;
        t3.year = aYear;
        t3.isDate = true;
        this.days.push(t3.dayOfYear());
      }
    } else if (partCount == 2 &&
               "BYMONTHDAY" in parts &&
               "BYMONTH" in parts) {
      for (let month of this.by_data.BYMONTH) {
        let daysInMonth = Time.daysInMonth(month, aYear);
        for (let monthday of this.by_data.BYMONTHDAY) {
          if (monthday < 0) {
            monthday = monthday + daysInMonth + 1;
          }
          t.day = monthday;
          t.month = month;
          t.year = aYear;
          t.isDate = true;

          this.days.push(t.dayOfYear());
        }
      }
    } else if (partCount == 1 && "BYWEEKNO" in parts) ; else if (partCount == 2 &&
               "BYWEEKNO" in parts &&
               "BYMONTHDAY" in parts) ; else if (partCount == 1 && "BYDAY" in parts) {
      this.days = this.days.concat(this.expand_by_day(aYear));
    } else if (partCount == 2 && "BYDAY" in parts && "BYMONTH" in parts) {
      for (let month of this.by_data.BYMONTH) {
        let daysInMonth = Time.daysInMonth(month, aYear);

        t.year = aYear;
        t.month = month;
        t.day = 1;
        t.isDate = true;

        let first_dow = t.dayOfWeek();
        let doy_offset = t.dayOfYear() - 1;

        t.day = daysInMonth;
        let last_dow = t.dayOfWeek();

        if (this.has_by_data("BYSETPOS")) {
          let by_month_day = [];
          for (let day = 1; day <= daysInMonth; day++) {
            t.day = day;
            if (this.is_day_in_byday(t)) {
              by_month_day.push(day);
            }
          }

          for (let spIndex = 0; spIndex < by_month_day.length; spIndex++) {
            if (this.check_set_position(spIndex + 1) ||
                this.check_set_position(spIndex - by_month_day.length)) {
              this.days.push(doy_offset + by_month_day[spIndex]);
            }
          }
        } else {
          for (let coded_day of this.by_data.BYDAY) {
            let bydayParts = this.ruleDayOfWeek(coded_day);
            let pos = bydayParts[0];
            let dow = bydayParts[1];
            let month_day;

            let first_matching_day = ((dow + 7 - first_dow) % 7) + 1;
            let last_matching_day = daysInMonth - ((last_dow + 7 - dow) % 7);

            if (pos == 0) {
              for (let day = first_matching_day; day <= daysInMonth; day += 7) {
                this.days.push(doy_offset + day);
              }
            } else if (pos > 0) {
              month_day = first_matching_day + (pos - 1) * 7;

              if (month_day <= daysInMonth) {
                this.days.push(doy_offset + month_day);
              }
            } else {
              month_day = last_matching_day + (pos + 1) * 7;

              if (month_day > 0) {
                this.days.push(doy_offset + month_day);
              }
            }
          }
        }
      }
      // Return dates in order of occurrence (1,2,3,...) instead
      // of by groups of weekdays (1,8,15,...,2,9,16,...).
      this.days.sort(function(a, b) { return a - b; }); // Comparator function allows to sort numbers.
    } else if (partCount == 2 && "BYDAY" in parts && "BYMONTHDAY" in parts) {
      let expandedDays = this.expand_by_day(aYear);

      for (let day of expandedDays) {
        let tt = Time.fromDayOfYear(day, aYear);
        if (this.by_data.BYMONTHDAY.indexOf(tt.day) >= 0) {
          this.days.push(day);
        }
      }
    } else if (partCount == 3 &&
               "BYDAY" in parts &&
               "BYMONTHDAY" in parts &&
               "BYMONTH" in parts) {
      let expandedDays = this.expand_by_day(aYear);

      for (let day of expandedDays) {
        let tt = Time.fromDayOfYear(day, aYear);

        if (this.by_data.BYMONTH.indexOf(tt.month) >= 0 &&
            this.by_data.BYMONTHDAY.indexOf(tt.day) >= 0) {
          this.days.push(day);
        }
      }
    } else if (partCount == 2 && "BYDAY" in parts && "BYWEEKNO" in parts) {
      let expandedDays = this.expand_by_day(aYear);

      for (let day of expandedDays) {
        let tt = Time.fromDayOfYear(day, aYear);
        let weekno = tt.weekNumber(this.rule.wkst);

        if (this.by_data.BYWEEKNO.indexOf(weekno)) {
          this.days.push(day);
        }
      }
    } else if (partCount == 3 &&
               "BYDAY" in parts &&
               "BYWEEKNO" in parts &&
               "BYMONTHDAY" in parts) ; else if (partCount == 1 && "BYYEARDAY" in parts) {
      this.days = this.days.concat(this.by_data.BYYEARDAY);
    } else if (partCount == 2 && "BYYEARDAY" in parts && "BYDAY" in parts) {
      let daysInYear = Time.isLeapYear(aYear) ? 366 : 365;
      let expandedDays = new Set(this.expand_by_day(aYear));

      for (let doy of this.by_data.BYYEARDAY) {
        if (doy < 0) {
          doy += daysInYear + 1;
        }

        if (expandedDays.has(doy)) {
          this.days.push(doy);
        }
      }
    } else {
      this.days = [];
    }

    let daysInYear = Time.isLeapYear(aYear) ? 366 : 365;
    this.days.sort((a, b) => {
      if (a < 0) a += daysInYear + 1;
      if (b < 0) b += daysInYear + 1;
      return a - b;
    });

    return 0;
  }

  expand_by_day(aYear) {

    let days_list = [];
    let tmp = this.last.clone();

    tmp.year = aYear;
    tmp.month = 1;
    tmp.day = 1;
    tmp.isDate = true;

    let start_dow = tmp.dayOfWeek();

    tmp.month = 12;
    tmp.day = 31;
    tmp.isDate = true;

    let end_dow = tmp.dayOfWeek();
    let end_year_day = tmp.dayOfYear();

    for (let day of this.by_data.BYDAY) {
      let parts = this.ruleDayOfWeek(day);
      let pos = parts[0];
      let dow = parts[1];

      if (pos == 0) {
        let tmp_start_doy = ((dow + 7 - start_dow) % 7) + 1;

        for (let doy = tmp_start_doy; doy <= end_year_day; doy += 7) {
          days_list.push(doy);
        }

      } else if (pos > 0) {
        let first;
        if (dow >= start_dow) {
          first = dow - start_dow + 1;
        } else {
          first = dow - start_dow + 8;
        }

        days_list.push(first + (pos - 1) * 7);
      } else {
        let last;
        pos = -pos;

        if (dow <= end_dow) {
          last = end_year_day - end_dow + dow;
        } else {
          last = end_year_day - end_dow + dow - 7;
        }

        days_list.push(last - (pos - 1) * 7);
      }
    }
    return days_list;
  }

  is_day_in_byday(tt) {
    if (this.by_data.BYDAY) {
      for (let day of this.by_data.BYDAY) {
        let parts = this.ruleDayOfWeek(day);
        let pos = parts[0];
        let dow = parts[1];
        let this_dow = tt.dayOfWeek();

        if ((pos == 0 && dow == this_dow) ||
            (tt.nthWeekDay(dow, pos) == tt.day)) {
          return 1;
        }
      }
    }

    return 0;
  }

  /**
   * Checks if given value is in BYSETPOS.
   *
   * @private
   * @param {Numeric} aPos position to check for.
   * @return {Boolean} false unless BYSETPOS rules exist
   *                   and the given value is present in rules.
   */
  check_set_position(aPos) {
    if (this.has_by_data('BYSETPOS')) {
      let idx = this.by_data.BYSETPOS.indexOf(aPos);
      // negative numbers are not false-y
      return idx !== -1;
    }
    return false;
  }

  sort_byday_rules(aRules) {
    for (let i = 0; i < aRules.length; i++) {
      for (let j = 0; j < i; j++) {
        let one = this.ruleDayOfWeek(aRules[j], this.rule.wkst)[1];
        let two = this.ruleDayOfWeek(aRules[i], this.rule.wkst)[1];

        if (one > two) {
          let tmp = aRules[i];
          aRules[i] = aRules[j];
          aRules[j] = tmp;
        }
      }
    }
  }

  check_contract_restriction(aRuleType, v) {
    let indexMapValue = RecurIterator._indexMap[aRuleType];
    let ruleMapValue = RecurIterator._expandMap[this.rule.freq][indexMapValue];
    let pass = false;

    if (aRuleType in this.by_data &&
        ruleMapValue == RecurIterator.CONTRACT) {

      let ruleType = this.by_data[aRuleType];

      for (let bydata of ruleType) {
        if (bydata == v) {
          pass = true;
          break;
        }
      }
    } else {
      // Not a contracting byrule or has no data, test passes
      pass = true;
    }
    return pass;
  }

  check_contracting_rules() {
    let dow = this.last.dayOfWeek();
    let weekNo = this.last.weekNumber(this.rule.wkst);
    let doy = this.last.dayOfYear();

    return (this.check_contract_restriction("BYSECOND", this.last.second) &&
            this.check_contract_restriction("BYMINUTE", this.last.minute) &&
            this.check_contract_restriction("BYHOUR", this.last.hour) &&
            this.check_contract_restriction("BYDAY", Recur.numericDayToIcalDay(dow)) &&
            this.check_contract_restriction("BYWEEKNO", weekNo) &&
            this.check_contract_restriction("BYMONTHDAY", this.last.day) &&
            this.check_contract_restriction("BYMONTH", this.last.month) &&
            this.check_contract_restriction("BYYEARDAY", doy));
  }

  setup_defaults(aRuleType, req, deftime) {
    let indexMapValue = RecurIterator._indexMap[aRuleType];
    let ruleMapValue = RecurIterator._expandMap[this.rule.freq][indexMapValue];

    if (ruleMapValue != RecurIterator.CONTRACT) {
      if (!(aRuleType in this.by_data)) {
        this.by_data[aRuleType] = [deftime];
      }
      if (this.rule.freq != req) {
        return this.by_data[aRuleType][0];
      }
    }
    return deftime;
  }

  /**
   * Convert iterator into a serialize-able object.  Will preserve current
   * iteration sequence to ensure the seamless continuation of the recurrence
   * rule.
   * @return {Object}
   */
  toJSON() {
    let result = Object.create(null);

    result.initialized = this.initialized;
    result.rule = this.rule.toJSON();
    result.dtstart = this.dtstart.toJSON();
    result.by_data = this.by_data;
    result.days = this.days;
    result.last = this.last.toJSON();
    result.by_indices = this.by_indices;
    result.occurrence_number = this.occurrence_number;

    return result;
  }
}

/**
 * An error indicating that a recurrence rule is invalid and produces no
 * occurrences.
 *
 * @extends {Error}
 * @class
 */
class InvalidRecurrenceRuleError extends Error {
  constructor() {
    super("Recurrence rule has no valid occurrences");
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 *
 * @ignore
 * @typedef {import("./types.js").weekDay} weekDay
 * Imports the 'weekDay' type from the "types.js" module
 * @typedef {import("./types.js").frequencyValues} frequencyValues
 * Imports the 'frequencyValues' type from the "types.js" module
 */

const VALID_DAY_NAMES = /^(SU|MO|TU|WE|TH|FR|SA)$/;
const VALID_BYDAY_PART = /^([+-])?(5[0-3]|[1-4][0-9]|[1-9])?(SU|MO|TU|WE|TH|FR|SA)$/;
const DOW_MAP = {
  SU: Time.SUNDAY,
  MO: Time.MONDAY,
  TU: Time.TUESDAY,
  WE: Time.WEDNESDAY,
  TH: Time.THURSDAY,
  FR: Time.FRIDAY,
  SA: Time.SATURDAY
};

const REVERSE_DOW_MAP = Object.fromEntries(Object.entries(DOW_MAP).map(entry => entry.reverse()));

const ALLOWED_FREQ = ['SECONDLY', 'MINUTELY', 'HOURLY',
                      'DAILY', 'WEEKLY', 'MONTHLY', 'YEARLY'];

/**
 * This class represents the "recur" value type, used for example by RRULE. It provides methods to
 * calculate occurrences among others.
 *
 * @memberof ICAL
 */
class Recur {
  /**
   * Creates a new {@link ICAL.Recur} instance from the passed string.
   *
   * @param {String} string         The string to parse
   * @return {Recur}                The created recurrence instance
   */
  static fromString(string) {
    let data = this._stringToData(string, false);
    return new Recur(data);
  }

  /**
   * Creates a new {@link ICAL.Recur} instance using members from the passed
   * data object.
   *
   * @param {Object} aData                              An object with members of the recurrence
   * @param {frequencyValues=} aData.freq               The frequency value
   * @param {Number=} aData.interval                    The INTERVAL value
   * @param {weekDay=} aData.wkst                       The week start value
   * @param {Time=} aData.until                         The end of the recurrence set
   * @param {Number=} aData.count                       The number of occurrences
   * @param {Array.<Number>=} aData.bysecond            The seconds for the BYSECOND part
   * @param {Array.<Number>=} aData.byminute            The minutes for the BYMINUTE part
   * @param {Array.<Number>=} aData.byhour              The hours for the BYHOUR part
   * @param {Array.<String>=} aData.byday               The BYDAY values
   * @param {Array.<Number>=} aData.bymonthday          The days for the BYMONTHDAY part
   * @param {Array.<Number>=} aData.byyearday           The days for the BYYEARDAY part
   * @param {Array.<Number>=} aData.byweekno            The weeks for the BYWEEKNO part
   * @param {Array.<Number>=} aData.bymonth             The month for the BYMONTH part
   * @param {Array.<Number>=} aData.bysetpos            The positionals for the BYSETPOS part
   */
  static fromData(aData) {
    return new Recur(aData);
  }

  /**
   * Converts a recurrence string to a data object, suitable for the fromData
   * method.
   *
   * @private
   * @param {String} string     The string to parse
   * @param {Boolean} fmtIcal   If true, the string is considered to be an
   *                              iCalendar string
   * @return {Recur}            The recurrence instance
   */
  static _stringToData(string, fmtIcal) {
    let dict = Object.create(null);

    // split is slower in FF but fast enough.
    // v8 however this is faster then manual split?
    let values = string.split(';');
    let len = values.length;

    for (let i = 0; i < len; i++) {
      let parts = values[i].split('=');
      let ucname = parts[0].toUpperCase();
      let lcname = parts[0].toLowerCase();
      let name = (fmtIcal ? lcname : ucname);
      let value = parts[1];

      if (ucname in partDesign) {
        let partArr = value.split(',');
        let partSet = new Set();

        for (let part of partArr) {
          partSet.add(partDesign[ucname](part));
        }
        partArr = [...partSet];

        dict[name] = (partArr.length == 1 ? partArr[0] : partArr);
      } else if (ucname in optionDesign) {
        optionDesign[ucname](value, dict, fmtIcal);
      } else {
        // Don't swallow unknown values. Just set them as they are.
        dict[lcname] = value;
      }
    }

    return dict;
  }

  /**
   * Convert an ical representation of a day (SU, MO, etc..)
   * into a numeric value of that day.
   *
   * @param {String} string     The iCalendar day name
   * @param {weekDay=} aWeekStart
   *        The week start weekday, defaults to SUNDAY
   * @return {Number}           Numeric value of given day
   */
  static icalDayToNumericDay(string, aWeekStart) {
    //XXX: this is here so we can deal
    //     with possibly invalid string values.
    let firstDow = aWeekStart || Time.SUNDAY;
    return ((DOW_MAP[string] - firstDow + 7) % 7) + 1;
  }

  /**
   * Convert a numeric day value into its ical representation (SU, MO, etc..)
   *
   * @param {Number} num        Numeric value of given day
   * @param {weekDay=} aWeekStart
   *        The week start weekday, defaults to SUNDAY
   * @return {String}           The ICAL day value, e.g SU,MO,...
   */
  static numericDayToIcalDay(num, aWeekStart) {
    //XXX: this is here so we can deal with possibly invalid number values.
    //     Also, this allows consistent mapping between day numbers and day
    //     names for external users.
    let firstDow = aWeekStart || Time.SUNDAY;
    let dow = (num + firstDow - Time.SUNDAY);
    if (dow > 7) {
      dow -= 7;
    }
    return REVERSE_DOW_MAP[dow];
  }

  /**
   * Create a new instance of the Recur class.
   *
   * @param {Object} data                               An object with members of the recurrence
   * @param {frequencyValues=} data.freq                The frequency value
   * @param {Number=} data.interval                     The INTERVAL value
   * @param {weekDay=} data.wkst                        The week start value
   * @param {Time=} data.until                          The end of the recurrence set
   * @param {Number=} data.count                        The number of occurrences
   * @param {Array.<Number>=} data.bysecond             The seconds for the BYSECOND part
   * @param {Array.<Number>=} data.byminute             The minutes for the BYMINUTE part
   * @param {Array.<Number>=} data.byhour               The hours for the BYHOUR part
   * @param {Array.<String>=} data.byday                The BYDAY values
   * @param {Array.<Number>=} data.bymonthday           The days for the BYMONTHDAY part
   * @param {Array.<Number>=} data.byyearday            The days for the BYYEARDAY part
   * @param {Array.<Number>=} data.byweekno             The weeks for the BYWEEKNO part
   * @param {Array.<Number>=} data.bymonth              The month for the BYMONTH part
   * @param {Array.<Number>=} data.bysetpos             The positionals for the BYSETPOS part
   */
  constructor(data) {
    this.wrappedJSObject = this;
    this.parts = {};

    if (data && typeof(data) === 'object') {
      this.fromData(data);
    }
  }

  /**
   * An object holding the BY-parts of the recurrence rule
   * @memberof ICAL.Recur
   * @typedef {Object} byParts
   * @property {Array.<Number>=} BYSECOND            The seconds for the BYSECOND part
   * @property {Array.<Number>=} BYMINUTE            The minutes for the BYMINUTE part
   * @property {Array.<Number>=} BYHOUR              The hours for the BYHOUR part
   * @property {Array.<String>=} BYDAY               The BYDAY values
   * @property {Array.<Number>=} BYMONTHDAY          The days for the BYMONTHDAY part
   * @property {Array.<Number>=} BYYEARDAY           The days for the BYYEARDAY part
   * @property {Array.<Number>=} BYWEEKNO            The weeks for the BYWEEKNO part
   * @property {Array.<Number>=} BYMONTH             The month for the BYMONTH part
   * @property {Array.<Number>=} BYSETPOS            The positionals for the BYSETPOS part
   */

  /**
   * An object holding the BY-parts of the recurrence rule
   * @type {byParts}
   */
  parts = null;

  /**
   * The interval value for the recurrence rule.
   * @type {Number}
   */
  interval = 1;

  /**
   * The week start day
   *
   * @type {weekDay}
   * @default ICAL.Time.MONDAY
   */
  wkst = Time.MONDAY;

  /**
   * The end of the recurrence
   * @type {?Time}
   */
  until = null;

  /**
   * The maximum number of occurrences
   * @type {?Number}
   */
  count = null;

  /**
   * The frequency value.
   * @type {frequencyValues}
   */
  freq = null;

  /**
   * The class identifier.
   * @constant
   * @type {String}
   * @default "icalrecur"
   */
  icalclass = "icalrecur";

  /**
   * The type name, to be used in the jCal object.
   * @constant
   * @type {String}
   * @default "recur"
   */
  icaltype = "recur";

  /**
   * Create a new iterator for this recurrence rule. The passed start date
   * must be the start date of the event, not the start of the range to
   * search in.
   *
   * @example
   * let recur = comp.getFirstPropertyValue('rrule');
   * let dtstart = comp.getFirstPropertyValue('dtstart');
   * let iter = recur.iterator(dtstart);
   * for (let next = iter.next(); next; next = iter.next()) {
   *   if (next.compare(rangeStart) < 0) {
   *     continue;
   *   }
   *   console.log(next.toString());
   * }
   *
   * @param {Time} aStart        The item's start date
   * @return {RecurIterator}     The recurrence iterator
   */
  iterator(aStart) {
    return new RecurIterator({
      rule: this,
      dtstart: aStart
    });
  }

  /**
   * Returns a clone of the recurrence object.
   *
   * @return {Recur}      The cloned object
   */
  clone() {
    return new Recur(this.toJSON());
  }

  /**
   * Checks if the current rule is finite, i.e. has a count or until part.
   *
   * @return {Boolean}        True, if the rule is finite
   */
  isFinite() {
    return !!(this.count || this.until);
  }

  /**
   * Checks if the current rule has a count part, and not limited by an until
   * part.
   *
   * @return {Boolean}        True, if the rule is by count
   */
  isByCount() {
    return !!(this.count && !this.until);
  }

  /**
   * Adds a component (part) to the recurrence rule. This is not a component
   * in the sense of {@link ICAL.Component}, but a part of the recurrence
   * rule, i.e. BYMONTH.
   *
   * @param {String} aType            The name of the component part
   * @param {Array|String} aValue     The component value
   */
  addComponent(aType, aValue) {
    let ucname = aType.toUpperCase();
    if (ucname in this.parts) {
      this.parts[ucname].push(aValue);
    } else {
      this.parts[ucname] = [aValue];
    }
  }

  /**
   * Sets the component value for the given by-part.
   *
   * @param {String} aType        The component part name
   * @param {Array} aValues       The component values
   */
  setComponent(aType, aValues) {
    this.parts[aType.toUpperCase()] = aValues.slice();
  }

  /**
   * Gets (a copy) of the requested component value.
   *
   * @param {String} aType        The component part name
   * @return {Array}              The component part value
   */
  getComponent(aType) {
    let ucname = aType.toUpperCase();
    return (ucname in this.parts ? this.parts[ucname].slice() : []);
  }

  /**
   * Retrieves the next occurrence after the given recurrence id. See the
   * guide on {@tutorial terminology} for more details.
   *
   * NOTE: Currently, this method iterates all occurrences from the start
   * date. It should not be called in a loop for performance reasons. If you
   * would like to get more than one occurrence, you can iterate the
   * occurrences manually, see the example on the
   * {@link ICAL.Recur#iterator iterator} method.
   *
   * @param {Time} aStartTime        The start of the event series
   * @param {Time} aRecurrenceId     The date of the last occurrence
   * @return {Time}                  The next occurrence after
   */
  getNextOccurrence(aStartTime, aRecurrenceId) {
    let iter = this.iterator(aStartTime);
    let next;

    do {
      next = iter.next();
    } while (next && next.compare(aRecurrenceId) <= 0);

    if (next && aRecurrenceId.zone) {
      next.zone = aRecurrenceId.zone;
    }

    return next;
  }

  /**
   * Sets up the current instance using members from the passed data object.
   *
   * @param {Object} data                               An object with members of the recurrence
   * @param {frequencyValues=} data.freq                The frequency value
   * @param {Number=} data.interval                     The INTERVAL value
   * @param {weekDay=} data.wkst                        The week start value
   * @param {Time=} data.until                          The end of the recurrence set
   * @param {Number=} data.count                        The number of occurrences
   * @param {Array.<Number>=} data.bysecond             The seconds for the BYSECOND part
   * @param {Array.<Number>=} data.byminute             The minutes for the BYMINUTE part
   * @param {Array.<Number>=} data.byhour               The hours for the BYHOUR part
   * @param {Array.<String>=} data.byday                The BYDAY values
   * @param {Array.<Number>=} data.bymonthday           The days for the BYMONTHDAY part
   * @param {Array.<Number>=} data.byyearday            The days for the BYYEARDAY part
   * @param {Array.<Number>=} data.byweekno             The weeks for the BYWEEKNO part
   * @param {Array.<Number>=} data.bymonth              The month for the BYMONTH part
   * @param {Array.<Number>=} data.bysetpos             The positionals for the BYSETPOS part
   */
  fromData(data) {
    for (let key in data) {
      let uckey = key.toUpperCase();

      if (uckey in partDesign) {
        if (Array.isArray(data[key])) {
          this.parts[uckey] = data[key];
        } else {
          this.parts[uckey] = [data[key]];
        }
      } else {
        this[key] = data[key];
      }
    }

    if (this.interval && typeof this.interval != "number") {
      optionDesign.INTERVAL(this.interval, this);
    }

    if (this.wkst && typeof this.wkst != "number") {
      this.wkst = Recur.icalDayToNumericDay(this.wkst);
    }

    if (this.until && !(this.until instanceof Time)) {
      this.until = Time.fromString(this.until);
    }
  }

  /**
   * The jCal representation of this recurrence type.
   * @return {Object}
   */
  toJSON() {
    let res = Object.create(null);
    res.freq = this.freq;

    if (this.count) {
      res.count = this.count;
    }

    if (this.interval > 1) {
      res.interval = this.interval;
    }

    for (let [k, kparts] of Object.entries(this.parts)) {
      if (Array.isArray(kparts) && kparts.length == 1) {
        res[k.toLowerCase()] = kparts[0];
      } else {
        res[k.toLowerCase()] = clone(kparts);
      }
    }

    if (this.until) {
      res.until = this.until.toString();
    }
    if ('wkst' in this && this.wkst !== Time.DEFAULT_WEEK_START) {
      res.wkst = Recur.numericDayToIcalDay(this.wkst);
    }
    return res;
  }

  /**
   * The string representation of this recurrence rule.
   * @return {String}
   */
  toString() {
    // TODO retain order
    let str = "FREQ=" + this.freq;
    if (this.count) {
      str += ";COUNT=" + this.count;
    }
    if (this.interval > 1) {
      str += ";INTERVAL=" + this.interval;
    }
    for (let [k, v] of Object.entries(this.parts)) {
      str += ";" + k + "=" + v;
    }
    if (this.until) {
      str += ';UNTIL=' + this.until.toICALString();
    }
    if ('wkst' in this && this.wkst !== Time.DEFAULT_WEEK_START) {
      str += ';WKST=' + Recur.numericDayToIcalDay(this.wkst);
    }
    return str;
  }
}

function parseNumericValue(type, min, max, value) {
  let result = value;

  if (value[0] === '+') {
    result = value.slice(1);
  }

  result = strictParseInt(result);

  if (min !== undefined && value < min) {
    throw new Error(
      type + ': invalid value "' + value + '" must be > ' + min
    );
  }

  if (max !== undefined && value > max) {
    throw new Error(
      type + ': invalid value "' + value + '" must be < ' + min
    );
  }

  return result;
}

const optionDesign = {
  FREQ: function(value, dict, fmtIcal) {
    // yes this is actually equal or faster then regex.
    // upside here is we can enumerate the valid values.
    if (ALLOWED_FREQ.indexOf(value) !== -1) {
      dict.freq = value;
    } else {
      throw new Error(
        'invalid frequency "' + value + '" expected: "' +
        ALLOWED_FREQ.join(', ') + '"'
      );
    }
  },

  COUNT: function(value, dict, fmtIcal) {
    dict.count = strictParseInt(value);
  },

  INTERVAL: function(value, dict, fmtIcal) {
    dict.interval = strictParseInt(value);
    if (dict.interval < 1) {
      // 0 or negative values are not allowed, some engines seem to generate
      // it though. Assume 1 instead.
      dict.interval = 1;
    }
  },

  UNTIL: function(value, dict, fmtIcal) {
    if (value.length > 10) {
      dict.until = design.icalendar.value['date-time'].fromICAL(value);
    } else {
      dict.until = design.icalendar.value.date.fromICAL(value);
    }
    if (!fmtIcal) {
      dict.until = Time.fromString(dict.until);
    }
  },

  WKST: function(value, dict, fmtIcal) {
    if (VALID_DAY_NAMES.test(value)) {
      dict.wkst = Recur.icalDayToNumericDay(value);
    } else {
      throw new Error('invalid WKST value "' + value + '"');
    }
  }
};

const partDesign = {
  BYSECOND: parseNumericValue.bind(undefined, 'BYSECOND', 0, 60),
  BYMINUTE: parseNumericValue.bind(undefined, 'BYMINUTE', 0, 59),
  BYHOUR: parseNumericValue.bind(undefined, 'BYHOUR', 0, 23),
  BYDAY: function(value) {
    if (VALID_BYDAY_PART.test(value)) {
      return value;
    } else {
      throw new Error('invalid BYDAY value "' + value + '"');
    }
  },
  BYMONTHDAY: parseNumericValue.bind(undefined, 'BYMONTHDAY', -31, 31),
  BYYEARDAY: parseNumericValue.bind(undefined, 'BYYEARDAY', -366, 366),
  BYWEEKNO: parseNumericValue.bind(undefined, 'BYWEEKNO', -53, 53),
  BYMONTH: parseNumericValue.bind(undefined, 'BYMONTH', 1, 12),
  BYSETPOS: parseNumericValue.bind(undefined, 'BYSETPOS', -366, 366)
};

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 * @ignore
 * @typedef {import("./types.js").designSet} designSet
 * Imports the 'designSet' type from the "types.js" module
 */

/** @module ICAL.design */

const FROM_ICAL_NEWLINE = /\\\\|\\;|\\,|\\[Nn]/g;
const TO_ICAL_NEWLINE = /\\|;|,|\n/g;
const FROM_VCARD_NEWLINE = /\\\\|\\,|\\[Nn]/g;
const TO_VCARD_NEWLINE = /\\|,|\n/g;

function createTextType(fromNewline, toNewline) {
  let result = {
    matches: /.*/,

    fromICAL: function(aValue, structuredEscape) {
      return replaceNewline(aValue, fromNewline, structuredEscape);
    },

    toICAL: function(aValue, structuredEscape) {
      let regEx = toNewline;
      if (structuredEscape)
         regEx = new RegExp(regEx.source + '|' + structuredEscape, regEx.flags);
      return aValue.replace(regEx, function(str) {
        switch (str) {
        case "\\":
          return "\\\\";
        case ";":
          return "\\;";
        case ",":
          return "\\,";
        case "\n":
          return "\\n";
        /* c8 ignore next 2 */
        default:
          return str;
        }
      });
    }
  };
  return result;
}

// default types used multiple times
const DEFAULT_TYPE_TEXT = { defaultType: "text" };
const DEFAULT_TYPE_TEXT_MULTI = { defaultType: "text", multiValue: "," };
const DEFAULT_TYPE_TEXT_STRUCTURED = { defaultType: "text", structuredValue: ";" };
const DEFAULT_TYPE_INTEGER = { defaultType: "integer" };
const DEFAULT_TYPE_DATETIME_DATE = { defaultType: "date-time", allowedTypes: ["date-time", "date"] };
const DEFAULT_TYPE_DATETIME = { defaultType: "date-time" };
const DEFAULT_TYPE_URI = { defaultType: "uri" };
const DEFAULT_TYPE_UTCOFFSET = { defaultType: "utc-offset" };
const DEFAULT_TYPE_RECUR = { defaultType: "recur" };
const DEFAULT_TYPE_DATE_ANDOR_TIME = { defaultType: "date-and-or-time", allowedTypes: ["date-time", "date", "text"] };

function replaceNewlineReplace(string) {
  switch (string) {
    case "\\\\":
      return "\\";
    case "\\;":
      return ";";
    case "\\,":
      return ",";
    case "\\n":
    case "\\N":
      return "\n";
    /* c8 ignore next 2 */
    default:
      return string;
  }
}

function replaceNewline(value, newline, structuredEscape) {
  // avoid regex when possible.
  if (value.indexOf('\\') === -1) {
    return value;
  }
  if (structuredEscape)
     newline = new RegExp(newline.source + '|\\\\' + structuredEscape, newline.flags);
  return value.replace(newline, replaceNewlineReplace);
}

let commonProperties = {
  "categories": DEFAULT_TYPE_TEXT_MULTI,
  "url": DEFAULT_TYPE_URI,
  "version": DEFAULT_TYPE_TEXT,
  "uid": DEFAULT_TYPE_TEXT
};

let commonValues = {
  "boolean": {
    values: ["TRUE", "FALSE"],

    fromICAL: function(aValue) {
      switch (aValue) {
        case 'TRUE':
          return true;
        case 'FALSE':
          return false;
        default:
          //TODO: parser warning
          return false;
      }
    },

    toICAL: function(aValue) {
      if (aValue) {
        return 'TRUE';
      }
      return 'FALSE';
    }

  },
  float: {
    matches: /^[+-]?\d+\.\d+$/,

    fromICAL: function(aValue) {
      let parsed = parseFloat(aValue);
      if (isStrictlyNaN(parsed)) {
        // TODO: parser warning
        return 0.0;
      }
      return parsed;
    },

    toICAL: function(aValue) {
      return String(aValue);
    }
  },
  integer: {
    fromICAL: function(aValue) {
      let parsed = parseInt(aValue);
      if (isStrictlyNaN(parsed)) {
        return 0;
      }
      return parsed;
    },

    toICAL: function(aValue) {
      return String(aValue);
    }
  },
  "utc-offset": {
    toICAL: function(aValue) {
      if (aValue.length < 7) {
        // no seconds
        // -0500
        return aValue.slice(0, 3) +
               aValue.slice(4, 6);
      } else {
        // seconds
        // -050000
        return aValue.slice(0, 3) +
               aValue.slice(4, 6) +
               aValue.slice(7, 9);
      }
    },

    fromICAL: function(aValue) {
      if (aValue.length < 6) {
        // no seconds
        // -05:00
        return aValue.slice(0, 3) + ':' +
               aValue.slice(3, 5);
      } else {
        // seconds
        // -05:00:00
        return aValue.slice(0, 3) + ':' +
               aValue.slice(3, 5) + ':' +
               aValue.slice(5, 7);
      }
    },

    decorate: function(aValue) {
      return UtcOffset.fromString(aValue);
    },

    undecorate: function(aValue) {
      return aValue.toString();
    }
  }
};

let icalParams = {
  // Although the syntax is DQUOTE uri DQUOTE, I don't think we should
  // enforce anything aside from it being a valid content line.
  //
  // At least some params require - if multi values are used - DQUOTEs
  // for each of its values - e.g. delegated-from="uri1","uri2"
  // To indicate this, I introduced the new k/v pair
  // multiValueSeparateDQuote: true
  //
  // "ALTREP": { ... },

  // CN just wants a param-value
  // "CN": { ... }

  "cutype": {
    values: ["INDIVIDUAL", "GROUP", "RESOURCE", "ROOM", "UNKNOWN"],
    allowXName: true,
    allowIanaToken: true
  },

  "delegated-from": {
    valueType: "cal-address",
    multiValue: ",",
    multiValueSeparateDQuote: true
  },
  "delegated-to": {
    valueType: "cal-address",
    multiValue: ",",
    multiValueSeparateDQuote: true
  },
  // "DIR": { ... }, // See ALTREP
  "encoding": {
    values: ["8BIT", "BASE64"]
  },
  // "FMTTYPE": { ... }, // See ALTREP
  "fbtype": {
    values: ["FREE", "BUSY", "BUSY-UNAVAILABLE", "BUSY-TENTATIVE"],
    allowXName: true,
    allowIanaToken: true
  },
  // "LANGUAGE": { ... }, // See ALTREP
  "member": {
    valueType: "cal-address",
    multiValue: ",",
    multiValueSeparateDQuote: true
  },
  "partstat": {
    // TODO These values are actually different per-component
    values: ["NEEDS-ACTION", "ACCEPTED", "DECLINED", "TENTATIVE",
             "DELEGATED", "COMPLETED", "IN-PROCESS"],
    allowXName: true,
    allowIanaToken: true
  },
  "range": {
    values: ["THISANDFUTURE"]
  },
  "related": {
    values: ["START", "END"]
  },
  "reltype": {
    values: ["PARENT", "CHILD", "SIBLING"],
    allowXName: true,
    allowIanaToken: true
  },
  "role": {
    values: ["REQ-PARTICIPANT", "CHAIR",
             "OPT-PARTICIPANT", "NON-PARTICIPANT"],
    allowXName: true,
    allowIanaToken: true
  },
  "rsvp": {
    values: ["TRUE", "FALSE"]
  },
  "sent-by": {
    valueType: "cal-address"
  },
  "tzid": {
    matches: /^\//
  },
  "value": {
    // since the value here is a 'type' lowercase is used.
    values: ["binary", "boolean", "cal-address", "date", "date-time",
             "duration", "float", "integer", "period", "recur", "text",
             "time", "uri", "utc-offset"],
    allowXName: true,
    allowIanaToken: true
  }
};

// When adding a value here, be sure to add it to the parameter types!
const icalValues = extend(commonValues, {
  text: createTextType(FROM_ICAL_NEWLINE, TO_ICAL_NEWLINE),

  uri: {
    // TODO
    /* ... */
  },

  "binary": {
    decorate: function(aString) {
      return Binary.fromString(aString);
    },

    undecorate: function(aBinary) {
      return aBinary.toString();
    }
  },
  "cal-address": {
    // needs to be an uri
  },
  "date": {
    decorate: function(aValue, aProp) {
      {
        return Time.fromDateString(aValue, aProp);
      }
    },

    /**
     * undecorates a time object.
     */
    undecorate: function(aValue) {
      return aValue.toString();
    },

    fromICAL: function(aValue) {
      // from: 20120901
      // to: 2012-09-01
      {
        return aValue.slice(0, 4) + '-' +
               aValue.slice(4, 6) + '-' +
               aValue.slice(6, 8);
      }
    },

    toICAL: function(aValue) {
      // from: 2012-09-01
      // to: 20120901
      let len = aValue.length;

      if (len == 10) {
        return aValue.slice(0, 4) +
               aValue.slice(5, 7) +
               aValue.slice(8, 10);
      } else if (len >= 19) {
        return icalValues["date-time"].toICAL(aValue);
      } else {
        //TODO: serialize warning?
        return aValue;
      }

    }
  },
  "date-time": {
    fromICAL: function(aValue) {
      // from: 20120901T130000
      // to: 2012-09-01T13:00:00
      {
        let result = aValue.slice(0, 4) + '-' +
                     aValue.slice(4, 6) + '-' +
                     aValue.slice(6, 8) + 'T' +
                     aValue.slice(9, 11) + ':' +
                     aValue.slice(11, 13) + ':' +
                     aValue.slice(13, 15);

        if (aValue[15] && aValue[15] === 'Z') {
          result += 'Z';
        }

        return result;
      }
    },

    toICAL: function(aValue) {
      // from: 2012-09-01T13:00:00
      // to: 20120901T130000
      let len = aValue.length;

      if (len >= 19) {
        let result = aValue.slice(0, 4) +
                     aValue.slice(5, 7) +
                     // grab the (DDTHH) segment
                     aValue.slice(8, 13) +
                     // MM
                     aValue.slice(14, 16) +
                     // SS
                     aValue.slice(17, 19);

        if (aValue[19] && aValue[19] === 'Z') {
          result += 'Z';
        }
        return result;
      } else {
        // TODO: error
        return aValue;
      }
    },

    decorate: function(aValue, aProp) {
      {
        return Time.fromDateTimeString(aValue, aProp);
      }
    },

    undecorate: function(aValue) {
      return aValue.toString();
    }
  },
  duration: {
    decorate: function(aValue) {
      return Duration.fromString(aValue);
    },
    undecorate: function(aValue) {
      return aValue.toString();
    }
  },
  period: {
    fromICAL: function(string) {
      let parts = string.split('/');
      parts[0] = icalValues['date-time'].fromICAL(parts[0]);

      if (!Duration.isValueString(parts[1])) {
        parts[1] = icalValues['date-time'].fromICAL(parts[1]);
      }

      return parts;
    },

    toICAL: function(parts) {
      parts = parts.slice();
      {
        parts[0] = icalValues['date-time'].toICAL(parts[0]);
      }

      if (!Duration.isValueString(parts[1])) {
        {
          parts[1] = icalValues['date-time'].toICAL(parts[1]);
        }
      }

      return parts.join("/");
    },

    decorate: function(aValue, aProp) {
      return Period.fromJSON(aValue, aProp, false);
    },

    undecorate: function(aValue) {
      return aValue.toJSON();
    }
  },
  recur: {
    fromICAL: function(string) {
      return Recur._stringToData(string, true);
    },

    toICAL: function(data) {
      let str = "";
      for (let [k, val] of Object.entries(data)) {
        if (k == "until") {
          if (val.length > 10) {
            val = icalValues['date-time'].toICAL(val);
          } else {
            val = icalValues.date.toICAL(val);
          }
        } else if (k == "wkst") {
          if (typeof val === 'number') {
            val = Recur.numericDayToIcalDay(val);
          }
        } else if (Array.isArray(val)) {
          val = val.join(",");
        }
        str += k.toUpperCase() + "=" + val + ";";
      }
      return str.slice(0, Math.max(0, str.length - 1));
    },

    decorate: function decorate(aValue) {
      return Recur.fromData(aValue);
    },

    undecorate: function(aRecur) {
      return aRecur.toJSON();
    }
  },

  time: {
    fromICAL: function(aValue) {
      // from: MMHHSS(Z)?
      // to: HH:MM:SS(Z)?
      if (aValue.length < 6) {
        // TODO: parser exception?
        return aValue;
      }

      // HH::MM::SSZ?
      let result = aValue.slice(0, 2) + ':' +
                   aValue.slice(2, 4) + ':' +
                   aValue.slice(4, 6);

      if (aValue[6] === 'Z') {
        result += 'Z';
      }

      return result;
    },

    toICAL: function(aValue) {
      // from: HH:MM:SS(Z)?
      // to: MMHHSS(Z)?
      if (aValue.length < 8) {
        //TODO: error
        return aValue;
      }

      let result = aValue.slice(0, 2) +
                   aValue.slice(3, 5) +
                   aValue.slice(6, 8);

      if (aValue[8] === 'Z') {
        result += 'Z';
      }

      return result;
    }
  }
});

let icalProperties = extend(commonProperties, {

  "action": DEFAULT_TYPE_TEXT,
  "attach": { defaultType: "uri" },
  "attendee": { defaultType: "cal-address" },
  "calscale": DEFAULT_TYPE_TEXT,
  "class": DEFAULT_TYPE_TEXT,
  "comment": DEFAULT_TYPE_TEXT,
  "completed": DEFAULT_TYPE_DATETIME,
  "contact": DEFAULT_TYPE_TEXT,
  "created": DEFAULT_TYPE_DATETIME,
  "description": DEFAULT_TYPE_TEXT,
  "dtend": DEFAULT_TYPE_DATETIME_DATE,
  "dtstamp": DEFAULT_TYPE_DATETIME,
  "dtstart": DEFAULT_TYPE_DATETIME_DATE,
  "due": DEFAULT_TYPE_DATETIME_DATE,
  "duration": { defaultType: "duration" },
  "exdate": {
    defaultType: "date-time",
    allowedTypes: ["date-time", "date"],
    multiValue: ','
  },
  "exrule": DEFAULT_TYPE_RECUR,
  "freebusy": { defaultType: "period", multiValue: "," },
  "geo": { defaultType: "float", structuredValue: ";" },
  "last-modified": DEFAULT_TYPE_DATETIME,
  "location": DEFAULT_TYPE_TEXT,
  "method": DEFAULT_TYPE_TEXT,
  "organizer": { defaultType: "cal-address" },
  "percent-complete": DEFAULT_TYPE_INTEGER,
  "priority": DEFAULT_TYPE_INTEGER,
  "prodid": DEFAULT_TYPE_TEXT,
  "related-to": DEFAULT_TYPE_TEXT,
  "repeat": DEFAULT_TYPE_INTEGER,
  "rdate": {
    defaultType: "date-time",
    allowedTypes: ["date-time", "date", "period"],
    multiValue: ',',
    detectType: function(string) {
      if (string.indexOf('/') !== -1) {
        return 'period';
      }
      return (string.indexOf('T') === -1) ? 'date' : 'date-time';
    }
  },
  "recurrence-id": DEFAULT_TYPE_DATETIME_DATE,
  "resources": DEFAULT_TYPE_TEXT_MULTI,
  "request-status": DEFAULT_TYPE_TEXT_STRUCTURED,
  "rrule": DEFAULT_TYPE_RECUR,
  "sequence": DEFAULT_TYPE_INTEGER,
  "status": DEFAULT_TYPE_TEXT,
  "summary": DEFAULT_TYPE_TEXT,
  "transp": DEFAULT_TYPE_TEXT,
  "trigger": { defaultType: "duration", allowedTypes: ["duration", "date-time"] },
  "tzoffsetfrom": DEFAULT_TYPE_UTCOFFSET,
  "tzoffsetto": DEFAULT_TYPE_UTCOFFSET,
  "tzurl": DEFAULT_TYPE_URI,
  "tzid": DEFAULT_TYPE_TEXT,
  "tzname": DEFAULT_TYPE_TEXT
});

// When adding a value here, be sure to add it to the parameter types!
const vcardValues = extend(commonValues, {
  text: createTextType(FROM_VCARD_NEWLINE, TO_VCARD_NEWLINE),
  uri: createTextType(FROM_VCARD_NEWLINE, TO_VCARD_NEWLINE),

  date: {
    decorate: function(aValue) {
      return VCardTime.fromDateAndOrTimeString(aValue, "date");
    },
    undecorate: function(aValue) {
      return aValue.toString();
    },
    fromICAL: function(aValue) {
      if (aValue.length == 8) {
        return icalValues.date.fromICAL(aValue);
      } else if (aValue[0] == '-' && aValue.length == 6) {
        return aValue.slice(0, 4) + '-' + aValue.slice(4);
      } else {
        return aValue;
      }
    },
    toICAL: function(aValue) {
      if (aValue.length == 10) {
        return icalValues.date.toICAL(aValue);
      } else if (aValue[0] == '-' && aValue.length == 7) {
        return aValue.slice(0, 4) + aValue.slice(5);
      } else {
        return aValue;
      }
    }
  },

  time: {
    decorate: function(aValue) {
      return VCardTime.fromDateAndOrTimeString("T" + aValue, "time");
    },
    undecorate: function(aValue) {
      return aValue.toString();
    },
    fromICAL: function(aValue) {
      let splitzone = vcardValues.time._splitZone(aValue, true);
      let zone = splitzone[0], value = splitzone[1];

      //console.log("SPLIT: ",splitzone);

      if (value.length == 6) {
        value = value.slice(0, 2) + ':' +
                value.slice(2, 4) + ':' +
                value.slice(4, 6);
      } else if (value.length == 4 && value[0] != '-') {
        value = value.slice(0, 2) + ':' + value.slice(2, 4);
      } else if (value.length == 5) {
        value = value.slice(0, 3) + ':' + value.slice(3, 5);
      }

      if (zone.length == 5 && (zone[0] == '-' || zone[0] == '+')) {
        zone = zone.slice(0, 3) + ':' + zone.slice(3);
      }

      return value + zone;
    },

    toICAL: function(aValue) {
      let splitzone = vcardValues.time._splitZone(aValue);
      let zone = splitzone[0], value = splitzone[1];

      if (value.length == 8) {
        value = value.slice(0, 2) +
                value.slice(3, 5) +
                value.slice(6, 8);
      } else if (value.length == 5 && value[0] != '-') {
        value = value.slice(0, 2) + value.slice(3, 5);
      } else if (value.length == 6) {
        value = value.slice(0, 3) + value.slice(4, 6);
      }

      if (zone.length == 6 && (zone[0] == '-' || zone[0] == '+')) {
        zone = zone.slice(0, 3) + zone.slice(4);
      }

      return value + zone;
    },

    _splitZone: function(aValue, isFromIcal) {
      let lastChar = aValue.length - 1;
      let signChar = aValue.length - (isFromIcal ? 5 : 6);
      let sign = aValue[signChar];
      let zone, value;

      if (aValue[lastChar] == 'Z') {
        zone = aValue[lastChar];
        value = aValue.slice(0, Math.max(0, lastChar));
      } else if (aValue.length > 6 && (sign == '-' || sign == '+')) {
        zone = aValue.slice(signChar);
        value = aValue.slice(0, Math.max(0, signChar));
      } else {
        zone = "";
        value = aValue;
      }

      return [zone, value];
    }
  },

  "date-time": {
    decorate: function(aValue) {
      return VCardTime.fromDateAndOrTimeString(aValue, "date-time");
    },

    undecorate: function(aValue) {
      return aValue.toString();
    },

    fromICAL: function(aValue) {
      return vcardValues['date-and-or-time'].fromICAL(aValue);
    },

    toICAL: function(aValue) {
      return vcardValues['date-and-or-time'].toICAL(aValue);
    }
  },

  "date-and-or-time": {
    decorate: function(aValue) {
      return VCardTime.fromDateAndOrTimeString(aValue, "date-and-or-time");
    },

    undecorate: function(aValue) {
      return aValue.toString();
    },

    fromICAL: function(aValue) {
      let parts = aValue.split('T');
      return (parts[0] ? vcardValues.date.fromICAL(parts[0]) : '') +
             (parts[1] ? 'T' + vcardValues.time.fromICAL(parts[1]) : '');
    },

    toICAL: function(aValue) {
      let parts = aValue.split('T');
      return vcardValues.date.toICAL(parts[0]) +
             (parts[1] ? 'T' + vcardValues.time.toICAL(parts[1]) : '');

    }
  },
  timestamp: icalValues['date-time'],
  "language-tag": {
    matches: /^[a-zA-Z0-9-]+$/ // Could go with a more strict regex here
  },
  "phone-number": {
    fromICAL: function(aValue) {
      return Array.from(aValue).filter(function(c) {
          return c === '\\' ? undefined : c;
        }).join('');
    },
    toICAL: function(aValue) {
      return Array.from(aValue).map(function(c) {
        return c === ',' || c === ";" ? '\\' + c : c;
      }).join('');
    }
  }
});

let vcardParams = {
  "type": {
    valueType: "text",
    multiValue: ","
  },
  "value": {
    // since the value here is a 'type' lowercase is used.
    values: ["text", "uri", "date", "time", "date-time", "date-and-or-time",
             "timestamp", "boolean", "integer", "float", "utc-offset",
             "language-tag"],
    allowXName: true,
    allowIanaToken: true
  }
};

let vcardProperties = extend(commonProperties, {
  "adr": { defaultType: "text", structuredValue: ";", multiValue: "," },
  "anniversary": DEFAULT_TYPE_DATE_ANDOR_TIME,
  "bday": DEFAULT_TYPE_DATE_ANDOR_TIME,
  "caladruri": DEFAULT_TYPE_URI,
  "caluri": DEFAULT_TYPE_URI,
  "clientpidmap": DEFAULT_TYPE_TEXT_STRUCTURED,
  "email": DEFAULT_TYPE_TEXT,
  "fburl": DEFAULT_TYPE_URI,
  "fn": DEFAULT_TYPE_TEXT,
  "gender": DEFAULT_TYPE_TEXT_STRUCTURED,
  "geo": DEFAULT_TYPE_URI,
  "impp": DEFAULT_TYPE_URI,
  "key": DEFAULT_TYPE_URI,
  "kind": DEFAULT_TYPE_TEXT,
  "lang": { defaultType: "language-tag" },
  "logo": DEFAULT_TYPE_URI,
  "member": DEFAULT_TYPE_URI,
  "n": { defaultType: "text", structuredValue: ";", multiValue: "," },
  "nickname": DEFAULT_TYPE_TEXT_MULTI,
  "note": DEFAULT_TYPE_TEXT,
  "org": { defaultType: "text", structuredValue: ";" },
  "photo": DEFAULT_TYPE_URI,
  "related": DEFAULT_TYPE_URI,
  "rev": { defaultType: "timestamp" },
  "role": DEFAULT_TYPE_TEXT,
  "sound": DEFAULT_TYPE_URI,
  "source": DEFAULT_TYPE_URI,
  "tel": { defaultType: "uri", allowedTypes: ["uri", "text"] },
  "title": DEFAULT_TYPE_TEXT,
  "tz": { defaultType: "text", allowedTypes: ["text", "utc-offset", "uri"] },
  "xml": DEFAULT_TYPE_TEXT
});

let vcard3Values = extend(commonValues, {
  binary: icalValues.binary,
  date: vcardValues.date,
  "date-time": vcardValues["date-time"],
  "phone-number": vcardValues["phone-number"],
  uri: icalValues.uri,
  text: vcardValues.text,
  time: icalValues.time,
  vcard: icalValues.text,
  "utc-offset": {
    toICAL: function(aValue) {
      return aValue.slice(0, 7);
    },

    fromICAL: function(aValue) {
      return aValue.slice(0, 7);
    },

    decorate: function(aValue) {
      return UtcOffset.fromString(aValue);
    },

    undecorate: function(aValue) {
      return aValue.toString();
    }
  }
});

let vcard3Params = {
  "type": {
    valueType: "text",
    multiValue: ","
  },
  "value": {
    // since the value here is a 'type' lowercase is used.
    values: ["text", "uri", "date", "date-time", "phone-number", "time",
             "boolean", "integer", "float", "utc-offset", "vcard", "binary"],
    allowXName: true,
    allowIanaToken: true
  }
};

let vcard3Properties = extend(commonProperties, {
  fn: DEFAULT_TYPE_TEXT,
  n: { defaultType: "text", structuredValue: ";", multiValue: "," },
  nickname: DEFAULT_TYPE_TEXT_MULTI,
  photo: { defaultType: "binary", allowedTypes: ["binary", "uri"] },
  bday: {
    defaultType: "date-time",
    allowedTypes: ["date-time", "date"],
    detectType: function(string) {
      return (string.indexOf('T') === -1) ? 'date' : 'date-time';
    }
  },

  adr: { defaultType: "text", structuredValue: ";", multiValue: "," },
  label: DEFAULT_TYPE_TEXT,

  tel: { defaultType: "phone-number" },
  email: DEFAULT_TYPE_TEXT,
  mailer: DEFAULT_TYPE_TEXT,

  tz: { defaultType: "utc-offset", allowedTypes: ["utc-offset", "text"] },
  geo: { defaultType: "float", structuredValue: ";" },

  title: DEFAULT_TYPE_TEXT,
  role: DEFAULT_TYPE_TEXT,
  logo: { defaultType: "binary", allowedTypes: ["binary", "uri"] },
  agent: { defaultType: "vcard", allowedTypes: ["vcard", "text", "uri"] },
  org: DEFAULT_TYPE_TEXT_STRUCTURED,

  note: DEFAULT_TYPE_TEXT_MULTI,
  prodid: DEFAULT_TYPE_TEXT,
  rev: {
    defaultType: "date-time",
    allowedTypes: ["date-time", "date"],
    detectType: function(string) {
      return (string.indexOf('T') === -1) ? 'date' : 'date-time';
    }
  },
  "sort-string": DEFAULT_TYPE_TEXT,
  sound: { defaultType: "binary", allowedTypes: ["binary", "uri"] },

  class: DEFAULT_TYPE_TEXT,
  key: { defaultType: "binary", allowedTypes: ["binary", "text"] }
});

/**
 * iCalendar design set
 * @type {designSet}
 */
let icalSet = {
  name: "ical",
  value: icalValues,
  param: icalParams,
  property: icalProperties,
  propertyGroups: false
};

/**
 * vCard 4.0 design set
 * @type {designSet}
 */
let vcardSet = {
  name: "vcard4",
  value: vcardValues,
  param: vcardParams,
  property: vcardProperties,
  propertyGroups: true
};

/**
 * vCard 3.0 design set
 * @type {designSet}
 */
let vcard3Set = {
  name: "vcard3",
  value: vcard3Values,
  param: vcard3Params,
  property: vcard3Properties,
  propertyGroups: true
};

/**
 * The design data, used by the parser to determine types for properties and
 * other metadata needed to produce correct jCard/jCal data.
 *
 * @alias ICAL.design
 * @exports module:ICAL.design
 */
const design = {
  /**
   * Can be set to false to make the parser more lenient.
   */
  strict: true,

  /**
   * The default set for new properties and components if none is specified.
   * @type {designSet}
   */
  defaultSet: icalSet,

  /**
   * The default type for unknown properties
   * @type {String}
   */
  defaultType: 'unknown',

  /**
   * Holds the design set for known top-level components
   *
   * @type {Object}
   * @property {designSet} vcard       vCard VCARD
   * @property {designSet} vevent      iCalendar VEVENT
   * @property {designSet} vtodo       iCalendar VTODO
   * @property {designSet} vjournal    iCalendar VJOURNAL
   * @property {designSet} valarm      iCalendar VALARM
   * @property {designSet} vtimezone   iCalendar VTIMEZONE
   * @property {designSet} daylight    iCalendar DAYLIGHT
   * @property {designSet} standard    iCalendar STANDARD
   *
   * @example
   * let propertyName = 'fn';
   * let componentDesign = ICAL.design.components.vcard;
   * let propertyDetails = componentDesign.property[propertyName];
   * if (propertyDetails.defaultType == 'text') {
   *   // Yep, sure is...
   * }
   */
  components: {
    vcard: vcardSet,
    vcard3: vcard3Set,
    vevent: icalSet,
    vtodo: icalSet,
    vjournal: icalSet,
    valarm: icalSet,
    vtimezone: icalSet,
    daylight: icalSet,
    standard: icalSet
  },


  /**
   * The design set for iCalendar (rfc5545/rfc7265) components.
   * @type {designSet}
   */
  icalendar: icalSet,

  /**
   * The design set for vCard (rfc6350/rfc7095) components.
   * @type {designSet}
   */
  vcard: vcardSet,

  /**
   * The design set for vCard (rfc2425/rfc2426/rfc7095) components.
   * @type {designSet}
   */
  vcard3: vcard3Set,

  /**
   * Gets the design set for the given component name.
   *
   * @param {String} componentName        The name of the component
   * @return {designSet}      The design set for the component
   */
  getDesignSet: function(componentName) {
    let isInDesign = componentName && componentName in design.components;
    return isInDesign ? design.components[componentName] : design.defaultSet;
  }
};

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 *
 * @ignore
 * @typedef {import("./types.js").designSet} designSet
 * Imports the 'designSet' type from the "types.js" module
 */

const LINE_ENDING = '\r\n';
const DEFAULT_VALUE_TYPE = 'unknown';
const RFC6868_REPLACE_MAP = { '"': "^'", "\n": "^n", "^": "^^" };

/**
 * Convert a full jCal/jCard array into a iCalendar/vCard string.
 *
 * @function ICAL.stringify
 * @variation function
 * @param {Array} jCal    The jCal/jCard document
 * @return {String}       The stringified iCalendar/vCard document
 */
function stringify(jCal) {
  if (typeof jCal[0] == "string") {
    // This is a single component
    jCal = [jCal];
  }

  let i = 0;
  let len = jCal.length;
  let result = '';

  for (; i < len; i++) {
    result += stringify.component(jCal[i]) + LINE_ENDING;
  }

  return result;
}

/**
 * Converts an jCal component array into a ICAL string.
 * Recursive will resolve sub-components.
 *
 * Exact component/property order is not saved all
 * properties will come before subcomponents.
 *
 * @function ICAL.stringify.component
 * @param {Array} component
 *        jCal/jCard fragment of a component
 * @param {designSet} designSet
 *        The design data to use for this component
 * @return {String}       The iCalendar/vCard string
 */
stringify.component = function(component, designSet) {
  let name = component[0].toUpperCase();
  let result = 'BEGIN:' + name + LINE_ENDING;

  let props = component[1];
  let propIdx = 0;
  let propLen = props.length;

  let designSetName = component[0];
  // rfc6350 requires that in vCard 4.0 the first component is the VERSION
  // component with as value 4.0, note that 3.0 does not have this requirement.
  if (designSetName === 'vcard' && component[1].length > 0 &&
          !(component[1][0][0] === "version" && component[1][0][3] === "4.0")) {
    designSetName = "vcard3";
  }
  designSet = designSet || design.getDesignSet(designSetName);

  for (; propIdx < propLen; propIdx++) {
    result += stringify.property(props[propIdx], designSet) + LINE_ENDING;
  }

  // Ignore subcomponents if none exist, e.g. in vCard.
  let comps = component[2] || [];
  let compIdx = 0;
  let compLen = comps.length;

  for (; compIdx < compLen; compIdx++) {
    result += stringify.component(comps[compIdx], designSet) + LINE_ENDING;
  }

  result += 'END:' + name;
  return result;
};

/**
 * Converts a single jCal/jCard property to a iCalendar/vCard string.
 *
 * @function ICAL.stringify.property
 * @param {Array} property
 *        jCal/jCard property array
 * @param {designSet} designSet
 *        The design data to use for this property
 * @param {Boolean} noFold
 *        If true, the line is not folded
 * @return {String}       The iCalendar/vCard string
 */
stringify.property = function(property, designSet, noFold) {
  let name = property[0].toUpperCase();
  let jsName = property[0];
  let params = property[1];

  if (!designSet) {
    designSet = design.defaultSet;
  }

  let groupName = params.group;
  let line;
  if (designSet.propertyGroups && groupName) {
    line = groupName.toUpperCase() + "." + name;
  } else {
    line = name;
  }

  for (let [paramName, value] of Object.entries(params)) {
    if (designSet.propertyGroups && paramName == 'group') {
      continue;
    }

    let paramDesign = designSet.param[paramName];
    let multiValue = paramDesign && paramDesign.multiValue;
    if (multiValue && Array.isArray(value)) {
      value = value.map(function(val) {
        val = stringify._rfc6868Unescape(val);
        val = stringify.paramPropertyValue(val, paramDesign.multiValueSeparateDQuote);
        return val;
      });
      value = stringify.multiValue(value, multiValue, "unknown", null, designSet);
    } else {
      value = stringify._rfc6868Unescape(value);
      value = stringify.paramPropertyValue(value);
    }

    line += ';' + paramName.toUpperCase() + '=' + value;
  }

  if (property.length === 3) {
    // If there are no values, we must assume a blank value
    return line + ':';
  }

  let valueType = property[2];

  let propDetails;
  let multiValue = false;
  let structuredValue = false;
  let isDefault = false;

  if (jsName in designSet.property) {
    propDetails = designSet.property[jsName];

    if ('multiValue' in propDetails) {
      multiValue = propDetails.multiValue;
    }

    if (('structuredValue' in propDetails) && Array.isArray(property[3])) {
      structuredValue = propDetails.structuredValue;
    }

    if ('defaultType' in propDetails) {
      if (valueType === propDetails.defaultType) {
        isDefault = true;
      }
    } else {
      if (valueType === DEFAULT_VALUE_TYPE) {
        isDefault = true;
      }
    }
  } else {
    if (valueType === DEFAULT_VALUE_TYPE) {
      isDefault = true;
    }
  }

  // push the VALUE property if type is not the default
  // for the current property.
  if (!isDefault) {
    // value will never contain ;/:/, so we don't escape it here.
    line += ';VALUE=' + valueType.toUpperCase();
  }

  line += ':';

  if (multiValue && structuredValue) {
    line += stringify.multiValue(
      property[3], structuredValue, valueType, multiValue, designSet, structuredValue
    );
  } else if (multiValue) {
    line += stringify.multiValue(
      property.slice(3), multiValue, valueType, null, designSet, false
    );
  } else if (structuredValue) {
    line += stringify.multiValue(
      property[3], structuredValue, valueType, null, designSet, structuredValue
    );
  } else {
    line += stringify.value(property[3], valueType, designSet, false);
  }

  return noFold ? line : foldline(line);
};

/**
 * Handles escaping of property values that may contain:
 *
 *    COLON (:), SEMICOLON (;), or COMMA (,)
 *
 * If any of the above are present the result is wrapped
 * in double quotes.
 *
 * @function ICAL.stringify.paramPropertyValue
 * @param {String} value      Raw property value
 * @param {boolean} force     If value should be escaped even when unnecessary
 * @return {String}           Given or escaped value when needed
 */
stringify.paramPropertyValue = function(value, force) {
  if (!force &&
      (value.indexOf(',') === -1) &&
      (value.indexOf(':') === -1) &&
      (value.indexOf(';') === -1)) {

    return value;
  }

  return '"' + value + '"';
};

/**
 * Converts an array of ical values into a single
 * string based on a type and a delimiter value (like ",").
 *
 * @function ICAL.stringify.multiValue
 * @param {Array} values      List of values to convert
 * @param {String} delim      Used to join the values (",", ";", ":")
 * @param {String} type       Lowecase ical value type
 *        (like boolean, date-time, etc..)
 * @param {?String} innerMulti If set, each value will again be processed
 *        Used for structured values
 * @param {designSet} designSet
 *        The design data to use for this property
 *
 * @return {String}           iCalendar/vCard string for value
 */
stringify.multiValue = function(values, delim, type, innerMulti, designSet, structuredValue) {
  let result = '';
  let len = values.length;
  let i = 0;

  for (; i < len; i++) {
    if (innerMulti && Array.isArray(values[i])) {
      result += stringify.multiValue(values[i], innerMulti, type, null, designSet, structuredValue);
    } else {
      result += stringify.value(values[i], type, designSet, structuredValue);
    }

    if (i !== (len - 1)) {
      result += delim;
    }
  }

  return result;
};

/**
 * Processes a single ical value runs the associated "toICAL" method from the
 * design value type if available to convert the value.
 *
 * @function ICAL.stringify.value
 * @param {String|Number} value       A formatted value
 * @param {String} type               Lowercase iCalendar/vCard value type
 *  (like boolean, date-time, etc..)
 * @return {String}                   iCalendar/vCard value for single value
 */
stringify.value = function(value, type, designSet, structuredValue) {
  if (type in designSet.value && 'toICAL' in designSet.value[type]) {
    return designSet.value[type].toICAL(value, structuredValue);
  }
  return value;
};

/**
 * Internal helper for rfc6868. Exposing this on ICAL.stringify so that
 * hackers can disable the rfc6868 parsing if the really need to.
 *
 * @param {String} val        The value to unescape
 * @return {String}           The escaped value
 */
stringify._rfc6868Unescape = function(val) {
  return val.replace(/[\n^"]/g, function(x) {
    return RFC6868_REPLACE_MAP[x];
  });
};

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */

const NAME_INDEX$1 = 0;
const PROP_INDEX = 1;
const TYPE_INDEX = 2;
const VALUE_INDEX = 3;

/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 * @ignore
 * @typedef {import("./types.js").designSet} designSet
 * Imports the 'designSet' type from the "types.js" module
 * @typedef {import("./types.js").Geo} Geo
 * Imports the 'Geo' type from the "types.js" module
 */

/**
 * Provides a layer on top of the raw jCal object for manipulating a single property, with its
 * parameters and value.
 *
 * @memberof ICAL
 */
class Property {
  /**
   * Create an {@link ICAL.Property} by parsing the passed iCalendar string.
   *
   * @param {String} str            The iCalendar string to parse
   * @param {designSet=} designSet  The design data to use for this property
   * @return {Property}             The created iCalendar property
   */
  static fromString(str, designSet) {
    return new Property(parse.property(str, designSet));
  }

  /**
   * Creates a new ICAL.Property instance.
   *
   * It is important to note that mutations done in the wrapper directly mutate the jCal object used
   * to initialize.
   *
   * Can also be used to create new properties by passing the name of the property (as a String).
   *
   * @param {Array|String} jCal         Raw jCal representation OR the new name of the property
   * @param {Component=} parent         Parent component
   */
  constructor(jCal, parent) {
    this._parent = parent || null;

    if (typeof(jCal) === 'string') {
      // We are creating the property by name and need to detect the type
      this.jCal = [jCal, {}, design.defaultType];
      this.jCal[TYPE_INDEX] = this.getDefaultType();
    } else {
      this.jCal = jCal;
    }
    this._updateType();
  }

  /**
   * The value type for this property
   * @type {String}
   */
  get type() {
    return this.jCal[TYPE_INDEX];
  }

  /**
   * The name of this property, in lowercase.
   * @type {String}
   */
  get name() {
    return this.jCal[NAME_INDEX$1];
  }

  /**
   * The parent component for this property.
   * @type {Component}
   */
  get parent() {
    return this._parent;
  }

  set parent(p) {
    // Before setting the parent, check if the design set has changed. If it
    // has, we later need to update the type if it was unknown before.
    let designSetChanged = !this._parent || (p && p._designSet != this._parent._designSet);

    this._parent = p;

    if (this.type == design.defaultType && designSetChanged) {
      this.jCal[TYPE_INDEX] = this.getDefaultType();
      this._updateType();
    }
  }

  /**
   * The design set for this property, e.g. icalendar vs vcard
   *
   * @type {designSet}
   * @private
   */
  get _designSet() {
    return this.parent ? this.parent._designSet : design.defaultSet;
  }

  /**
   * Updates the type metadata from the current jCal type and design set.
   *
   * @private
   */
  _updateType() {
    let designSet = this._designSet;

    if (this.type in designSet.value) {
      if ('decorate' in designSet.value[this.type]) {
        this.isDecorated = true;
      } else {
        this.isDecorated = false;
      }

      if (this.name in designSet.property) {
        this.isMultiValue = ('multiValue' in designSet.property[this.name]);
        this.isStructuredValue = ('structuredValue' in designSet.property[this.name]);
      }
    }
  }

  /**
   * Hydrate a single value. The act of hydrating means turning the raw jCal
   * value into a potentially wrapped object, for example {@link ICAL.Time}.
   *
   * @private
   * @param {Number} index        The index of the value to hydrate
   * @return {?Object}             The decorated value.
   */
  _hydrateValue(index) {
    if (this._values && this._values[index]) {
      return this._values[index];
    }

    // for the case where there is no value.
    if (this.jCal.length <= (VALUE_INDEX + index)) {
      return null;
    }

    if (this.isDecorated) {
      if (!this._values) {
        this._values = [];
      }
      return (this._values[index] = this._decorate(
        this.jCal[VALUE_INDEX + index]
      ));
    } else {
      return this.jCal[VALUE_INDEX + index];
    }
  }

  /**
   * Decorate a single value, returning its wrapped object. This is used by
   * the hydrate function to actually wrap the value.
   *
   * @private
   * @param {?} value         The value to decorate
   * @return {Object}         The decorated value
   */
  _decorate(value) {
    return this._designSet.value[this.type].decorate(value, this);
  }

  /**
   * Undecorate a single value, returning its raw jCal data.
   *
   * @private
   * @param {Object} value         The value to undecorate
   * @return {?}                   The undecorated value
   */
  _undecorate(value) {
    return this._designSet.value[this.type].undecorate(value, this);
  }

  /**
   * Sets the value at the given index while also hydrating it. The passed
   * value can either be a decorated or undecorated value.
   *
   * @private
   * @param {?} value             The value to set
   * @param {Number} index        The index to set it at
   */
  _setDecoratedValue(value, index) {
    if (!this._values) {
      this._values = [];
    }

    if (typeof(value) === 'object' && 'icaltype' in value) {
      // decorated value
      this.jCal[VALUE_INDEX + index] = this._undecorate(value);
      this._values[index] = value;
    } else {
      // undecorated value
      this.jCal[VALUE_INDEX + index] = value;
      this._values[index] = this._decorate(value);
    }
  }

  /**
   * Gets a parameter on the property.
   *
   * @param {String}        name   Parameter name (lowercase)
   * @return {Array|String}        Parameter value
   */
  getParameter(name) {
    if (name in this.jCal[PROP_INDEX]) {
      return this.jCal[PROP_INDEX][name];
    } else {
      return undefined;
    }
  }

  /**
   * Gets first parameter on the property.
   *
   * @param {String}        name   Parameter name (lowercase)
   * @return {String}        Parameter value
   */
  getFirstParameter(name) {
    let parameters = this.getParameter(name);

    if (Array.isArray(parameters)) {
      return parameters[0];
    }

    return parameters;
  }

  /**
   * Sets a parameter on the property.
   *
   * @param {String}       name     The parameter name
   * @param {Array|String} value    The parameter value
   */
  setParameter(name, value) {
    let lcname = name.toLowerCase();
    if (typeof value === "string" &&
        lcname in this._designSet.param &&
        'multiValue' in this._designSet.param[lcname]) {
        value = [value];
    }
    this.jCal[PROP_INDEX][name] = value;
  }

  /**
   * Removes a parameter
   *
   * @param {String} name     The parameter name
   */
  removeParameter(name) {
    delete this.jCal[PROP_INDEX][name];
  }

  /**
   * Get the default type based on this property's name.
   *
   * @return {String}     The default type for this property
   */
  getDefaultType() {
    let name = this.jCal[NAME_INDEX$1];
    let designSet = this._designSet;

    if (name in designSet.property) {
      let details = designSet.property[name];
      if ('defaultType' in details) {
        return details.defaultType;
      }
    }
    return design.defaultType;
  }

  /**
   * Sets type of property and clears out any existing values of the current
   * type.
   *
   * @param {String} type     New iCAL type (see design.*.values)
   */
  resetType(type) {
    this.removeAllValues();
    this.jCal[TYPE_INDEX] = type;
    this._updateType();
  }

  /**
   * Finds the first property value.
   *
   * @return {Binary | Duration | Period |
   * Recur | Time | UtcOffset | Geo | string | null}         First property value
   */
  getFirstValue() {
    return this._hydrateValue(0);
  }

  /**
   * Gets all values on the property.
   *
   * NOTE: this creates an array during each call.
   *
   * @return {Array}          List of values
   */
  getValues() {
    let len = this.jCal.length - VALUE_INDEX;

    if (len < 1) {
      // it is possible for a property to have no value.
      return [];
    }

    let i = 0;
    let result = [];

    for (; i < len; i++) {
      result[i] = this._hydrateValue(i);
    }

    return result;
  }

  /**
   * Removes all values from this property
   */
  removeAllValues() {
    if (this._values) {
      this._values.length = 0;
    }
    this.jCal.length = 3;
  }

  /**
   * Sets the values of the property.  Will overwrite the existing values.
   * This can only be used for multi-value properties.
   *
   * @param {Array} values    An array of values
   */
  setValues(values) {
    if (!this.isMultiValue) {
      throw new Error(
        this.name + ': does not not support mulitValue.\n' +
        'override isMultiValue'
      );
    }

    let len = values.length;
    let i = 0;
    this.removeAllValues();

    if (len > 0 &&
        typeof(values[0]) === 'object' &&
        'icaltype' in values[0]) {
      this.resetType(values[0].icaltype);
    }

    if (this.isDecorated) {
      for (; i < len; i++) {
        this._setDecoratedValue(values[i], i);
      }
    } else {
      for (; i < len; i++) {
        this.jCal[VALUE_INDEX + i] = values[i];
      }
    }
  }

  /**
   * Sets the current value of the property. If this is a multi-value
   * property, all other values will be removed.
   *
   * @param {String|Object} value     New property value.
   */
  setValue(value) {
    this.removeAllValues();
    if (typeof(value) === 'object' && 'icaltype' in value) {
      this.resetType(value.icaltype);
    }

    if (this.isDecorated) {
      this._setDecoratedValue(value, 0);
    } else {
      this.jCal[VALUE_INDEX] = value;
    }
  }

  /**
   * Returns the Object representation of this component. The returned object
   * is a live jCal object and should be cloned if modified.
   * @return {Object}
   */
  toJSON() {
    return this.jCal;
  }

  /**
   * The string representation of this component.
   * @return {String}
   */
  toICALString() {
    return stringify.property(
      this.jCal, this._designSet, true
    );
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 * @ignore
 * @typedef {import("./types.js").designSet} designSet
 * Imports the 'designSet' type from the "types.js" module
 * @typedef {import("./types.js").Geo} Geo
 * Imports the 'Geo' type from the "types.js" module
 */

const NAME_INDEX = 0;
const PROPERTY_INDEX = 1;
const COMPONENT_INDEX = 2;

const PROPERTY_NAME_INDEX = 0;
const PROPERTY_VALUE_INDEX = 3;

/**
 * Wraps a jCal component, adding convenience methods to add, remove and update subcomponents and
 * properties.
 *
 * @memberof ICAL
 */
class Component {
  /**
   * Create an {@link ICAL.Component} by parsing the passed iCalendar string.
   *
   * @param {String} str        The iCalendar string to parse
   */
  static fromString(str) {
    return new Component(parse.component(str));
  }

  /**
   * Creates a new Component instance.
   *
   * @param {Array|String} jCal         Raw jCal component data OR name of new
   *                                      component
   * @param {Component=} parent     Parent component to associate
   */
  constructor(jCal, parent) {
    if (typeof(jCal) === 'string') {
      // jCal spec (name, properties, components)
      jCal = [jCal, [], []];
    }

    // mostly for legacy reasons.
    this.jCal = jCal;

    this.parent = parent || null;

    if (!this.parent && this.name === 'vcalendar') {
      this._timezoneCache = new Map();
    }
  }

  /**
   * Hydrated properties are inserted into the _properties array at the same
   * position as in the jCal array, so it is possible that the array contains
   * undefined values for unhydrdated properties. To avoid iterating the
   * array when checking if all properties have been hydrated, we save the
   * count here.
   *
   * @type {Number}
   * @private
   */
  _hydratedPropertyCount = 0;

  /**
   * The same count as for _hydratedPropertyCount, but for subcomponents
   *
   * @type {Number}
   * @private
   */
  _hydratedComponentCount = 0;

  /**
   * A cache of hydrated time zone objects which may be used by consumers, keyed
   * by time zone ID.
   *
   * @type {Map}
   * @private
   */
  _timezoneCache = null;

  /**
   * @private
   */
  _components = null;

  /**
   * @private
   */
  _properties = null;

  /**
   * The name of this component
   *
   * @type {String}
   */
  get name() {
    return this.jCal[NAME_INDEX];
  }

  /**
   * The design set for this component, e.g. icalendar vs vcard
   *
   * @type {designSet}
   * @private
   */
  get _designSet() {
    let parentDesign = this.parent && this.parent._designSet;
    if (!parentDesign && this.name == "vcard") {
      // We can't decide on vcard3 vs vcard4 just based on the component name, the version number is
      // in the version property. We also can't use hydrated properties here because it would lead
      // to recursion, but the spec says that the version property needs to be the very first one.
      let versionProp = this.jCal[PROPERTY_INDEX]?.[0];

      if (versionProp && versionProp[PROPERTY_NAME_INDEX] == "version" && versionProp[PROPERTY_VALUE_INDEX] == "3.0") {
        return design.getDesignSet("vcard3");
      }
    }

    return parentDesign || design.getDesignSet(this.name);
  }

  /**
   * @private
   */
  _hydrateComponent(index) {
    if (!this._components) {
      this._components = [];
      this._hydratedComponentCount = 0;
    }

    if (this._components[index]) {
      return this._components[index];
    }

    let comp = new Component(
      this.jCal[COMPONENT_INDEX][index],
      this
    );

    this._hydratedComponentCount++;
    return (this._components[index] = comp);
  }

  /**
   * @private
   */
  _hydrateProperty(index) {
    if (!this._properties) {
      this._properties = [];
      this._hydratedPropertyCount = 0;
    }

    if (this._properties[index]) {
      return this._properties[index];
    }

    let prop = new Property(
      this.jCal[PROPERTY_INDEX][index],
      this
    );

    this._hydratedPropertyCount++;
    return (this._properties[index] = prop);
  }

  /**
   * Finds first sub component, optionally filtered by name.
   *
   * @param {String=} name        Optional name to filter by
   * @return {?Component}     The found subcomponent
   */
  getFirstSubcomponent(name) {
    if (name) {
      let i = 0;
      let comps = this.jCal[COMPONENT_INDEX];
      let len = comps.length;

      for (; i < len; i++) {
        if (comps[i][NAME_INDEX] === name) {
          let result = this._hydrateComponent(i);
          return result;
        }
      }
    } else {
      if (this.jCal[COMPONENT_INDEX].length) {
        return this._hydrateComponent(0);
      }
    }

    // ensure we return a value (strict mode)
    return null;
  }

  /**
   * Finds all sub components, optionally filtering by name.
   *
   * @param {String=} name            Optional name to filter by
   * @return {Component[]}       The found sub components
   */
  getAllSubcomponents(name) {
    let jCalLen = this.jCal[COMPONENT_INDEX].length;
    let i = 0;

    if (name) {
      let comps = this.jCal[COMPONENT_INDEX];
      let result = [];

      for (; i < jCalLen; i++) {
        if (name === comps[i][NAME_INDEX]) {
          result.push(
            this._hydrateComponent(i)
          );
        }
      }
      return result;
    } else {
      if (!this._components ||
          (this._hydratedComponentCount !== jCalLen)) {
        for (; i < jCalLen; i++) {
          this._hydrateComponent(i);
        }
      }

      return this._components || [];
    }
  }

  /**
   * Returns true when a named property exists.
   *
   * @param {String} name     The property name
   * @return {Boolean}        True, when property is found
   */
  hasProperty(name) {
    let props = this.jCal[PROPERTY_INDEX];
    let len = props.length;

    let i = 0;
    for (; i < len; i++) {
      // 0 is property name
      if (props[i][NAME_INDEX] === name) {
        return true;
      }
    }

    return false;
  }

  /**
   * Finds the first property, optionally with the given name.
   *
   * @param {String=} name        Lowercase property name
   * @return {?Property}     The found property
   */
  getFirstProperty(name) {
    if (name) {
      let i = 0;
      let props = this.jCal[PROPERTY_INDEX];
      let len = props.length;

      for (; i < len; i++) {
        if (props[i][NAME_INDEX] === name) {
          let result = this._hydrateProperty(i);
          return result;
        }
      }
    } else {
      if (this.jCal[PROPERTY_INDEX].length) {
        return this._hydrateProperty(0);
      }
    }

    return null;
  }

  /**
   * Returns first property's value, if available.
   *
   * @param {String=} name                    Lowercase property name
   * @return {Binary | Duration | Period |
   * Recur | Time | UtcOffset | Geo | string | null}         The found property value.
   */
  getFirstPropertyValue(name) {
    let prop = this.getFirstProperty(name);
    if (prop) {
      return prop.getFirstValue();
    }

    return null;
  }

  /**
   * Get all properties in the component, optionally filtered by name.
   *
   * @param {String=} name        Lowercase property name
   * @return {Property[]}    List of properties
   */
  getAllProperties(name) {
    let jCalLen = this.jCal[PROPERTY_INDEX].length;
    let i = 0;

    if (name) {
      let props = this.jCal[PROPERTY_INDEX];
      let result = [];

      for (; i < jCalLen; i++) {
        if (name === props[i][NAME_INDEX]) {
          result.push(
            this._hydrateProperty(i)
          );
        }
      }
      return result;
    } else {
      if (!this._properties ||
          (this._hydratedPropertyCount !== jCalLen)) {
        for (; i < jCalLen; i++) {
          this._hydrateProperty(i);
        }
      }

      return this._properties || [];
    }
  }

  /**
   * @private
   */
  _removeObjectByIndex(jCalIndex, cache, index) {
    cache = cache || [];
    // remove cached version
    if (cache[index]) {
      let obj = cache[index];
      if ("parent" in obj) {
          obj.parent = null;
      }
    }

    cache.splice(index, 1);

    // remove it from the jCal
    this.jCal[jCalIndex].splice(index, 1);
  }

  /**
   * @private
   */
  _removeObject(jCalIndex, cache, nameOrObject) {
    let i = 0;
    let objects = this.jCal[jCalIndex];
    let len = objects.length;
    let cached = this[cache];

    if (typeof(nameOrObject) === 'string') {
      for (; i < len; i++) {
        if (objects[i][NAME_INDEX] === nameOrObject) {
          this._removeObjectByIndex(jCalIndex, cached, i);
          return true;
        }
      }
    } else if (cached) {
      for (; i < len; i++) {
        if (cached[i] && cached[i] === nameOrObject) {
          this._removeObjectByIndex(jCalIndex, cached, i);
          return true;
        }
      }
    }

    return false;
  }

  /**
   * @private
   */
  _removeAllObjects(jCalIndex, cache, name) {
    let cached = this[cache];

    // Unfortunately we have to run through all children to reset their
    // parent property.
    let objects = this.jCal[jCalIndex];
    let i = objects.length - 1;

    // descending search required because splice
    // is used and will effect the indices.
    for (; i >= 0; i--) {
      if (!name || objects[i][NAME_INDEX] === name) {
        this._removeObjectByIndex(jCalIndex, cached, i);
      }
    }
  }

  /**
   * Adds a single sub component.
   *
   * @param {Component} component        The component to add
   * @return {Component}                 The passed in component
   */
  addSubcomponent(component) {
    if (!this._components) {
      this._components = [];
      this._hydratedComponentCount = 0;
    }

    if (component.parent) {
      component.parent.removeSubcomponent(component);
    }

    let idx = this.jCal[COMPONENT_INDEX].push(component.jCal);
    this._components[idx - 1] = component;
    this._hydratedComponentCount++;
    component.parent = this;
    return component;
  }

  /**
   * Removes a single component by name or the instance of a specific
   * component.
   *
   * @param {Component|String} nameOrComp    Name of component, or component
   * @return {Boolean}                            True when comp is removed
   */
  removeSubcomponent(nameOrComp) {
    let removed = this._removeObject(COMPONENT_INDEX, '_components', nameOrComp);
    if (removed) {
      this._hydratedComponentCount--;
    }
    return removed;
  }

  /**
   * Removes all components or (if given) all components by a particular
   * name.
   *
   * @param {String=} name            Lowercase component name
   */
  removeAllSubcomponents(name) {
    let removed = this._removeAllObjects(COMPONENT_INDEX, '_components', name);
    this._hydratedComponentCount = 0;
    return removed;
  }

  /**
   * Adds an {@link ICAL.Property} to the component.
   *
   * @param {Property} property      The property to add
   * @return {Property}              The passed in property
   */
  addProperty(property) {
    if (!(property instanceof Property)) {
      throw new TypeError('must be instance of ICAL.Property');
    }

    if (!this._properties) {
      this._properties = [];
      this._hydratedPropertyCount = 0;
    }

    if (property.parent) {
      property.parent.removeProperty(property);
    }

    let idx = this.jCal[PROPERTY_INDEX].push(property.jCal);
    this._properties[idx - 1] = property;
    this._hydratedPropertyCount++;
    property.parent = this;
    return property;
  }

  /**
   * Helper method to add a property with a value to the component.
   *
   * @param {String}               name         Property name to add
   * @param {String|Number|Object} value        Property value
   * @return {Property}                    The created property
   */
  addPropertyWithValue(name, value) {
    let prop = new Property(name);
    prop.setValue(value);

    this.addProperty(prop);

    return prop;
  }

  /**
   * Helper method that will update or create a property of the given name
   * and sets its value. If multiple properties with the given name exist,
   * only the first is updated.
   *
   * @param {String}               name         Property name to update
   * @param {String|Number|Object} value        Property value
   * @return {Property}                    The created property
   */
  updatePropertyWithValue(name, value) {
    let prop = this.getFirstProperty(name);

    if (prop) {
      prop.setValue(value);
    } else {
      prop = this.addPropertyWithValue(name, value);
    }

    return prop;
  }

  /**
   * Removes a single property by name or the instance of the specific
   * property.
   *
   * @param {String|Property} nameOrProp     Property name or instance to remove
   * @return {Boolean}                            True, when deleted
   */
  removeProperty(nameOrProp) {
    let removed = this._removeObject(PROPERTY_INDEX, '_properties', nameOrProp);
    if (removed) {
      this._hydratedPropertyCount--;
    }
    return removed;
  }

  /**
   * Removes all properties associated with this component, optionally
   * filtered by name.
   *
   * @param {String=} name        Lowercase property name
   * @return {Boolean}            True, when deleted
   */
  removeAllProperties(name) {
    let removed = this._removeAllObjects(PROPERTY_INDEX, '_properties', name);
    this._hydratedPropertyCount = 0;
    return removed;
  }

  /**
   * Returns the Object representation of this component. The returned object
   * is a live jCal object and should be cloned if modified.
   * @return {Object}
   */
  toJSON() {
    return this.jCal;
  }

  /**
   * The string representation of this component.
   * @return {String}
   */
  toString() {
    return stringify.component(
      this.jCal, this._designSet
    );
  }

  /**
   * Retrieve a time zone definition from the component tree, if any is present.
   * If the tree contains no time zone definitions or the TZID cannot be
   * matched, returns null.
   *
   * @param {String} tzid     The ID of the time zone to retrieve
   * @return {Timezone}  The time zone corresponding to the ID, or null
   */
  getTimeZoneByID(tzid) {
    // VTIMEZONE components can only appear as a child of the VCALENDAR
    // component; walk the tree if we're not the root.
    if (this.parent) {
      return this.parent.getTimeZoneByID(tzid);
    }

    // If there is no time zone cache, we are probably parsing an incomplete
    // file and will have no time zone definitions.
    if (!this._timezoneCache) {
      return null;
    }

    if (this._timezoneCache.has(tzid)) {
      return this._timezoneCache.get(tzid);
    }

    // If the time zone is not already cached, hydrate it from the
    // subcomponents.
    const zones = this.getAllSubcomponents('vtimezone');
    for (const zone of zones) {
      if (zone.getFirstProperty('tzid').getFirstValue() === tzid) {
        const hydratedZone = new Timezone({
          component: zone,
          tzid: tzid,
        });

        this._timezoneCache.set(tzid, hydratedZone);

        return hydratedZone;
      }
    }

    // Per the standard, we should always have a time zone defined in a file
    // for any referenced TZID, but don't blow up if the file is invalid.
    return null;
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * Primary class for expanding recurring rules.  Can take multiple rrules, rdates, exdate(s) and
 * iterate (in order) over each next occurrence.
 *
 * Once initialized this class can also be serialized saved and continue iteration from the last
 * point.
 *
 * NOTE: it is intended that this class is to be used with {@link ICAL.Event} which handles recurrence
 * exceptions.
 *
 * @example
 * // assuming event is a parsed ical component
 * var event;
 *
 * var expand = new ICAL.RecurExpansion({
 *   component: event,
 *   dtstart: event.getFirstPropertyValue('dtstart')
 * });
 *
 * // remember there are infinite rules so it is a good idea to limit the scope of the iterations
 * // then resume later on.
 *
 * // next is always an ICAL.Time or null
 * var next;
 *
 * while (someCondition && (next = expand.next())) {
 *   // do something with next
 * }
 *
 * // save instance for later
 * var json = JSON.stringify(expand);
 *
 * //...
 *
 * // NOTE: if the component's properties have changed you will need to rebuild the class and start
 * // over. This only works when the component's recurrence info is the same.
 * var expand = new ICAL.RecurExpansion(JSON.parse(json));
 *
 * @memberof ICAL
 */
class RecurExpansion {
  /**
   * Creates a new ICAL.RecurExpansion instance.
   *
   * The options object can be filled with the specified initial values. It can also contain
   * additional members, as a result of serializing a previous expansion state, as shown in the
   * example.
   *
   * @param {Object} options
   *        Recurrence expansion options
   * @param {Time} options.dtstart
   *        Start time of the event
   * @param {Component=} options.component
   *        Component for expansion, required if not resuming.
   */
  constructor(options) {
    this.ruleDates = [];
    this.exDates = [];
    this.fromData(options);
  }

  /**
   * True when iteration is fully completed.
   * @type {Boolean}
   */
  complete = false;

  /**
   * Array of rrule iterators.
   *
   * @type {RecurIterator[]}
   * @private
   */
  ruleIterators = null;

  /**
   * Array of rdate instances.
   *
   * @type {Time[]}
   * @private
   */
  ruleDates = null;

  /**
   * Array of exdate instances.
   *
   * @type {Time[]}
   * @private
   */
  exDates = null;

  /**
   * Current position in ruleDates array.
   * @type {Number}
   * @private
   */
  ruleDateInc = 0;

  /**
   * Current position in exDates array
   * @type {Number}
   * @private
   */
  exDateInc = 0;

  /**
   * Current negative date.
   *
   * @type {Time}
   * @private
   */
  exDate = null;

  /**
   * Current additional date.
   *
   * @type {Time}
   * @private
   */
  ruleDate = null;

  /**
   * Start date of recurring rules.
   *
   * @type {Time}
   */
  dtstart = null;

  /**
   * Last expanded time
   *
   * @type {Time}
   */
  last = null;

  /**
   * Initialize the recurrence expansion from the data object. The options
   * object may also contain additional members, see the
   * {@link ICAL.RecurExpansion constructor} for more details.
   *
   * @param {Object} options
   *        Recurrence expansion options
   * @param {Time} options.dtstart
   *        Start time of the event
   * @param {Component=} options.component
   *        Component for expansion, required if not resuming.
   */
  fromData(options) {
    let start = formatClassType(options.dtstart, Time);

    if (!start) {
      throw new Error('.dtstart (ICAL.Time) must be given');
    } else {
      this.dtstart = start;
    }

    if (options.component) {
      this._init(options.component);
    } else {
      this.last = formatClassType(options.last, Time) || start.clone();

      if (!options.ruleIterators) {
        throw new Error('.ruleIterators or .component must be given');
      }

      this.ruleIterators = options.ruleIterators.map(function(item) {
        return formatClassType(item, RecurIterator);
      });

      this.ruleDateInc = options.ruleDateInc;
      this.exDateInc = options.exDateInc;

      if (options.ruleDates) {
        this.ruleDates = options.ruleDates.map(item => formatClassType(item, Time));
        this.ruleDate = this.ruleDates[this.ruleDateInc];
      }

      if (options.exDates) {
        this.exDates = options.exDates.map(item => formatClassType(item, Time));
        this.exDate = this.exDates[this.exDateInc];
      }

      if (typeof(options.complete) !== 'undefined') {
        this.complete = options.complete;
      }
    }
  }

  /**
   * Compare two ICAL.Time objects.  When the second parameter is a DATE and the first parameter is
   * DATE-TIME, strip the time and compare only the days.
   *
   * @private
   * @param {Time} a   The one object to compare
   * @param {Time} b   The other object to compare
   */
  _compare_special(a, b) {
    if (!a.isDate && b.isDate)
      return new Time({ year: a.year, month: a.month, day: a.day }).compare(b);
    return a.compare(b);
  }

  /**
   * Retrieve the next occurrence in the series.
   * @return {Time}
   */
  next() {
    let iter;
    let next;
    let compare;

    let maxTries = 500;
    let currentTry = 0;

    while (true) {
      if (currentTry++ > maxTries) {
        throw new Error(
          'max tries have occurred, rule may be impossible to fulfill.'
        );
      }

      next = this.ruleDate;
      iter = this._nextRecurrenceIter(this.last);

      // no more matches
      // because we increment the rule day or rule
      // _after_ we choose a value this should be
      // the only spot where we need to worry about the
      // end of events.
      if (!next && !iter) {
        // there are no more iterators or rdates
        this.complete = true;
        break;
      }

      // no next rule day or recurrence rule is first.
      if (!next || (iter && next.compare(iter.last) > 0)) {
        // must be cloned, recur will reuse the time element.
        next = iter.last.clone();
        // move to next so we can continue
        iter.next();
      }

      // if the ruleDate is still next increment it.
      if (this.ruleDate === next) {
        this._nextRuleDay();
      }

      this.last = next;

      // check the negative rules
      if (this.exDate) {
        // EXDATE can be in DATE format, but DTSTART is in DATE-TIME format
        compare = this._compare_special(this.last, this.exDate);

        if (compare > 0) {
          this._nextExDay();
        }

        // if the current rule is excluded skip it.
        if (compare === 0) {
          this._nextExDay();
          continue;
        }
      }

      //XXX: The spec states that after we resolve the final
      //     list of dates we execute exdate this seems somewhat counter
      //     intuitive to what I have seen most servers do so for now
      //     I exclude based on the original date not the one that may
      //     have been modified by the exception.
      return this.last;
    }
  }

  /**
   * Converts object into a serialize-able format. This format can be passed
   * back into the expansion to resume iteration.
   * @return {Object}
   */
  toJSON() {
    function toJSON(item) {
      return item.toJSON();
    }

    let result = Object.create(null);
    result.ruleIterators = this.ruleIterators.map(toJSON);

    if (this.ruleDates) {
      result.ruleDates = this.ruleDates.map(toJSON);
    }

    if (this.exDates) {
      result.exDates = this.exDates.map(toJSON);
    }

    result.ruleDateInc = this.ruleDateInc;
    result.exDateInc = this.exDateInc;
    result.last = this.last.toJSON();
    result.dtstart = this.dtstart.toJSON();
    result.complete = this.complete;

    return result;
  }

  /**
   * Extract all dates from the properties in the given component. The
   * properties will be filtered by the property name.
   *
   * @private
   * @param {Component} component             The component to search in
   * @param {String} propertyName             The property name to search for
   * @return {Time[]}                         The extracted dates.
   */
  _extractDates(component, propertyName) {
    let result = [];
    let props = component.getAllProperties(propertyName);

    for (let i = 0, len = props.length; i < len; i++) {
      for (let prop of props[i].getValues()) {
        let idx = binsearchInsert(
          result,
          prop,
          (a, b) => a.compare(b)
        );

        // ordered insert
        result.splice(idx, 0, prop);
      }
    }

    return result;
  }

  /**
   * Initialize the recurrence expansion.
   *
   * @private
   * @param {Component} component    The component to initialize from.
   */
  _init(component) {
    this.ruleIterators = [];

    this.last = this.dtstart.clone();

    // to provide api consistency non-recurring
    // events can also use the iterator though it will
    // only return a single time.
    if (!component.hasProperty('rdate') &&
        !component.hasProperty('rrule') &&
        !component.hasProperty('recurrence-id')) {
      this.ruleDate = this.last.clone();
      this.complete = true;
      return;
    }

    if (component.hasProperty('rdate')) {
      this.ruleDates = this._extractDates(component, 'rdate');

      // special hack for cases where first rdate is prior
      // to the start date. We only check for the first rdate.
      // This is mostly for google's crazy recurring date logic
      // (contacts birthdays).
      if ((this.ruleDates[0]) &&
          (this.ruleDates[0].compare(this.dtstart) < 0)) {

        this.ruleDateInc = 0;
        this.last = this.ruleDates[0].clone();
      } else {
        this.ruleDateInc = binsearchInsert(
          this.ruleDates,
          this.last,
          (a, b) => a.compare(b)
        );
      }

      this.ruleDate = this.ruleDates[this.ruleDateInc];
    }

    if (component.hasProperty('rrule')) {
      let rules = component.getAllProperties('rrule');
      let i = 0;
      let len = rules.length;

      let rule;
      let iter;

      for (; i < len; i++) {
        rule = rules[i].getFirstValue();
        iter = rule.iterator(this.dtstart);
        this.ruleIterators.push(iter);

        // increment to the next occurrence so future
        // calls to next return times beyond the initial iteration.
        // XXX: I find this suspicious might be a bug?
        iter.next();
      }
    }

    if (component.hasProperty('exdate')) {
      this.exDates = this._extractDates(component, 'exdate');
      // if we have a .last day we increment the index to beyond it.
      // When DTSTART is in DATE-TIME format, EXDATE is in DATE format and EXDATE is
      // the date of DTSTART, _compare_special finds this out and compareTime fails.
      this.exDateInc = binsearchInsert(
        this.exDates,
        this.last,
        this._compare_special
      );

      this.exDate = this.exDates[this.exDateInc];
    }
  }

  /**
   * Advance to the next exdate
   * @private
   */
  _nextExDay() {
    this.exDate = this.exDates[++this.exDateInc];
  }

  /**
   * Advance to the next rule date
   * @private
   */
  _nextRuleDay() {
    this.ruleDate = this.ruleDates[++this.ruleDateInc];
  }

  /**
   * Find and return the recurrence rule with the most recent event and
   * return it.
   *
   * @private
   * @return {?RecurIterator}    Found iterator.
   */
  _nextRecurrenceIter() {
    let iters = this.ruleIterators;

    if (iters.length === 0) {
      return null;
    }

    let len = iters.length;
    let iter;
    let iterTime;
    let iterIdx = 0;
    let chosenIter;

    // loop through each iterator
    for (; iterIdx < len; iterIdx++) {
      iter = iters[iterIdx];
      iterTime = iter.last;

      // if iteration is complete
      // then we must exclude it from
      // the search and remove it.
      if (iter.completed) {
        len--;
        if (iterIdx !== 0) {
          iterIdx--;
        }
        iters.splice(iterIdx, 1);
        continue;
      }

      // find the most recent possible choice
      if (!chosenIter || chosenIter.last.compare(iterTime) > 0) {
        // that iterator is saved
        chosenIter = iter;
      }
    }

    // the chosen iterator is returned but not mutated
    // this iterator contains the most recent event.
    return chosenIter;
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * This lets typescript resolve our custom types in the
 * generated d.ts files (jsdoc typedefs are converted to typescript types).
 * Ignore prevents the typedefs from being documented more than once.
 * @ignore
 * @typedef {import("./types.js").frequencyValues} frequencyValues
 * Imports the 'frequencyValues' type from the "types.js" module
 * @typedef {import("./types.js").occurrenceDetails} occurrenceDetails
 * Imports the 'occurrenceDetails' type from the "types.js" module
 */

/**
 * ICAL.js is organized into multiple layers. The bottom layer is a raw jCal
 * object, followed by the component/property layer. The highest level is the
 * event representation, which this class is part of. See the
 * {@tutorial layers} guide for more details.
 *
 * @memberof ICAL
 */
let Event$1 = class Event {
  /**
   * Creates a new ICAL.Event instance.
   *
   * @param {Component=} component              The ICAL.Component to base this event on
   * @param {Object} [options]                  Options for this event
   * @param {Boolean=} options.strictExceptions  When true, will verify exceptions are related by
   *                                              their UUID
   * @param {Array<Component|Event>=} options.exceptions
   *          Exceptions to this event, either as components or events. If not
   *            specified exceptions will automatically be set in relation of
   *            component's parent
   */
  constructor(component, options) {
    if (!(component instanceof Component)) {
      options = component;
      component = null;
    }

    if (component) {
      this.component = component;
    } else {
      this.component = new Component('vevent');
    }

    this._rangeExceptionCache = Object.create(null);
    this.exceptions = Object.create(null);
    this.rangeExceptions = [];

    if (options && options.strictExceptions) {
      this.strictExceptions = options.strictExceptions;
    }

    if (options && options.exceptions) {
      options.exceptions.forEach(this.relateException, this);
    } else if (this.component.parent && !this.isRecurrenceException()) {
      this.component.parent.getAllSubcomponents('vevent').forEach(function(event) {
        if (event.hasProperty('recurrence-id')) {
          this.relateException(event);
        }
      }, this);
    }
  }


  static THISANDFUTURE = 'THISANDFUTURE';

  /**
   * List of related event exceptions.
   *
   * @type {Event[]}
   */
  exceptions = null;

  /**
   * When true, will verify exceptions are related by their UUID.
   *
   * @type {Boolean}
   */
  strictExceptions = false;

  /**
   * Relates a given event exception to this object.  If the given component
   * does not share the UID of this event it cannot be related and will throw
   * an exception.
   *
   * If this component is an exception it cannot have other exceptions
   * related to it.
   *
   * @param {Component|Event} obj       Component or event
   */
  relateException(obj) {
    if (this.isRecurrenceException()) {
      throw new Error('cannot relate exception to exceptions');
    }

    if (obj instanceof Component) {
      obj = new Event(obj);
    }

    if (this.strictExceptions && obj.uid !== this.uid) {
      throw new Error('attempted to relate unrelated exception');
    }

    let id = obj.recurrenceId.toString();

    // we don't sort or manage exceptions directly
    // here the recurrence expander handles that.
    this.exceptions[id] = obj;

    // index RANGE=THISANDFUTURE exceptions so we can
    // look them up later in getOccurrenceDetails.
    if (obj.modifiesFuture()) {
      let item = [
        obj.recurrenceId.toUnixTime(), id
      ];

      // we keep them sorted so we can find the nearest
      // value later on...
      let idx = binsearchInsert(
        this.rangeExceptions,
        item,
        compareRangeException
      );

      this.rangeExceptions.splice(idx, 0, item);
    }
  }

  /**
   * Checks if this record is an exception and has the RANGE=THISANDFUTURE
   * value.
   *
   * @return {Boolean}        True, when exception is within range
   */
  modifiesFuture() {
    if (!this.component.hasProperty('recurrence-id')) {
      return false;
    }

    let range = this.component.getFirstProperty('recurrence-id').getParameter('range');
    return range === Event.THISANDFUTURE;
  }

  /**
   * Finds the range exception nearest to the given date.
   *
   * @param {Time} time   usually an occurrence time of an event
   * @return {?Event}     the related event/exception or null
   */
  findRangeException(time) {
    if (!this.rangeExceptions.length) {
      return null;
    }

    let utc = time.toUnixTime();
    let idx = binsearchInsert(
      this.rangeExceptions,
      [utc],
      compareRangeException
    );

    idx -= 1;

    // occurs before
    if (idx < 0) {
      return null;
    }

    let rangeItem = this.rangeExceptions[idx];

    /* c8 ignore next 4 */
    if (utc < rangeItem[0]) {
      // sanity check only
      return null;
    }

    return rangeItem[1];
  }

  /**
   * Returns the occurrence details based on its start time.  If the
   * occurrence has an exception will return the details for that exception.
   *
   * NOTE: this method is intend to be used in conjunction
   *       with the {@link ICAL.Event#iterator iterator} method.
   *
   * @param {Time} occurrence               time occurrence
   * @return {occurrenceDetails}            Information about the occurrence
   */
  getOccurrenceDetails(occurrence) {
    let id = occurrence.toString();
    let utcId = occurrence.convertToZone(Timezone.utcTimezone).toString();
    let item;
    let result = {
      //XXX: Clone?
      recurrenceId: occurrence
    };

    if (id in this.exceptions) {
      item = result.item = this.exceptions[id];
      result.startDate = item.startDate;
      result.endDate = item.endDate;
      result.item = item;
    } else if (utcId in this.exceptions) {
      item = this.exceptions[utcId];
      result.startDate = item.startDate;
      result.endDate = item.endDate;
      result.item = item;
    } else {
      // range exceptions (RANGE=THISANDFUTURE) have a
      // lower priority then direct exceptions but
      // must be accounted for first. Their item is
      // always the first exception with the range prop.
      let rangeExceptionId = this.findRangeException(
        occurrence
      );
      let end;

      if (rangeExceptionId) {
        let exception = this.exceptions[rangeExceptionId];

        // range exception must modify standard time
        // by the difference (if any) in start/end times.
        result.item = exception;

        let startDiff = this._rangeExceptionCache[rangeExceptionId];

        if (!startDiff) {
          let original = exception.recurrenceId.clone();
          let newStart = exception.startDate.clone();

          // zones must be same otherwise subtract may be incorrect.
          original.zone = newStart.zone;
          startDiff = newStart.subtractDate(original);

          this._rangeExceptionCache[rangeExceptionId] = startDiff;
        }

        let start = occurrence.clone();
        start.zone = exception.startDate.zone;
        start.addDuration(startDiff);

        end = start.clone();
        end.addDuration(exception.duration);

        result.startDate = start;
        result.endDate = end;
      } else {
        // no range exception standard expansion
        end = occurrence.clone();
        end.addDuration(this.duration);

        result.endDate = end;
        result.startDate = occurrence;
        result.item = this;
      }
    }

    return result;
  }

  /**
   * Builds a recur expansion instance for a specific point in time (defaults
   * to startDate).
   *
   * @param {Time=} startTime     Starting point for expansion
   * @return {RecurExpansion}    Expansion object
   */
  iterator(startTime) {
    return new RecurExpansion({
      component: this.component,
      dtstart: startTime || this.startDate
    });
  }

  /**
   * Checks if the event is recurring
   *
   * @return {Boolean}        True, if event is recurring
   */
  isRecurring() {
    let comp = this.component;
    return comp.hasProperty('rrule') || comp.hasProperty('rdate');
  }

  /**
   * Checks if the event describes a recurrence exception. See
   * {@tutorial terminology} for details.
   *
   * @return {Boolean}    True, if the event describes a recurrence exception
   */
  isRecurrenceException() {
    return this.component.hasProperty('recurrence-id');
  }

  /**
   * Returns the types of recurrences this event may have.
   *
   * Returned as an object with the following possible keys:
   *
   *    - YEARLY
   *    - MONTHLY
   *    - WEEKLY
   *    - DAILY
   *    - MINUTELY
   *    - SECONDLY
   *
   * @return {Object.<frequencyValues, Boolean>}
   *          Object of recurrence flags
   */
  getRecurrenceTypes() {
    let rules = this.component.getAllProperties('rrule');
    let i = 0;
    let len = rules.length;
    let result = Object.create(null);

    for (; i < len; i++) {
      let value = rules[i].getFirstValue();
      result[value.freq] = true;
    }

    return result;
  }

  /**
   * The uid of this event
   * @type {String}
   */
  get uid() {
    return this._firstProp('uid');
  }

  set uid(value) {
    this._setProp('uid', value);
  }

  /**
   * The start date
   * @type {Time}
   */
  get startDate() {
    return this._firstProp('dtstart');
  }

  set startDate(value) {
    this._setTime('dtstart', value);
  }

  /**
   * The end date. This can be the result directly from the property, or the
   * end date calculated from start date and duration. Setting the property
   * will remove any duration properties.
   * @type {Time}
   */
  get endDate() {
    let endDate = this._firstProp('dtend');
    if (!endDate) {
        let duration = this._firstProp('duration');
        endDate = this.startDate.clone();
        if (duration) {
            endDate.addDuration(duration);
        } else if (endDate.isDate) {
            endDate.day += 1;
        }
    }
    return endDate;
  }

  set endDate(value) {
    if (this.component.hasProperty('duration')) {
      this.component.removeProperty('duration');
    }
    this._setTime('dtend', value);
  }

  /**
   * The duration. This can be the result directly from the property, or the
   * duration calculated from start date and end date. Setting the property
   * will remove any `dtend` properties.
   * @type {Duration}
   */
  get duration() {
    let duration = this._firstProp('duration');
    if (!duration) {
      return this.endDate.subtractDateTz(this.startDate);
    }
    return duration;
  }

  set duration(value) {
    if (this.component.hasProperty('dtend')) {
      this.component.removeProperty('dtend');
    }

    this._setProp('duration', value);
  }

  /**
   * The location of the event.
   * @type {String}
   */
  get location() {
    return this._firstProp('location');
  }

  set location(value) {
    this._setProp('location', value);
  }

  /**
   * The attendees in the event
   * @type {Property[]}
   */
  get attendees() {
    //XXX: This is way lame we should have a better
    //     data structure for this later.
    return this.component.getAllProperties('attendee');
  }

  /**
   * The event summary
   * @type {String}
   */
  get summary() {
    return this._firstProp('summary');
  }

  set summary(value) {
    this._setProp('summary', value);
  }

  /**
   * The event description.
   * @type {String}
   */
  get description() {
    return this._firstProp('description');
  }

  set description(value) {
    this._setProp('description', value);
  }

  /**
   * The event color from [rfc7986](https://datatracker.ietf.org/doc/html/rfc7986)
   * @type {String}
   */
  get color() {
    return this._firstProp('color');
  }

  set color(value) {
    this._setProp('color', value);
  }

  /**
   * The organizer value as an uri. In most cases this is a mailto: uri, but
   * it can also be something else, like urn:uuid:...
   * @type {String}
   */
  get organizer() {
    return this._firstProp('organizer');
  }

  set organizer(value) {
    this._setProp('organizer', value);
  }

  /**
   * The sequence value for this event. Used for scheduling
   * see {@tutorial terminology}.
   * @type {Number}
   */
  get sequence() {
    return this._firstProp('sequence');
  }

  set sequence(value) {
    this._setProp('sequence', value);
  }

  /**
   * The recurrence id for this event. See {@tutorial terminology} for details.
   * @type {Time}
   */
  get recurrenceId() {
    return this._firstProp('recurrence-id');
  }

  set recurrenceId(value) {
    this._setTime('recurrence-id', value);
  }

  /**
   * Set/update a time property's value.
   * This will also update the TZID of the property.
   *
   * TODO: this method handles the case where we are switching
   * from a known timezone to an implied timezone (one without TZID).
   * This does _not_ handle the case of moving between a known
   *  (by TimezoneService) timezone to an unknown timezone...
   *
   * We will not add/remove/update the VTIMEZONE subcomponents
   *  leading to invalid ICAL data...
   * @private
   * @param {String} propName     The property name
   * @param {Time} time           The time to set
   */
  _setTime(propName, time) {
    let prop = this.component.getFirstProperty(propName);

    if (!prop) {
      prop = new Property(propName);
      this.component.addProperty(prop);
    }

    // utc and local don't get a tzid
    if (
      time.zone === Timezone.localTimezone ||
      time.zone === Timezone.utcTimezone
    ) {
      // remove the tzid
      prop.removeParameter('tzid');
    } else {
      prop.setParameter('tzid', time.zone.tzid);
    }

    prop.setValue(time);
  }

  _setProp(name, value) {
    this.component.updatePropertyWithValue(name, value);
  }

  _firstProp(name) {
    return this.component.getFirstPropertyValue(name);
  }

  /**
   * The string representation of this event.
   * @return {String}
   */
  toString() {
    return this.component.toString();
  }
};

function compareRangeException(a, b) {
  if (a[0] > b[0]) return 1;
  if (b[0] > a[0]) return -1;
  return 0;
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * The ComponentParser is used to process a String or jCal Object,
 * firing callbacks for various found components, as well as completion.
 *
 * @example
 * var options = {
 *   // when false no events will be emitted for type
 *   parseEvent: true,
 *   parseTimezone: true
 * };
 *
 * var parser = new ICAL.ComponentParser(options);
 *
 * parser.onevent(eventComponent) {
 *   //...
 * }
 *
 * // ontimezone, etc...
 *
 * parser.oncomplete = function() {
 *
 * };
 *
 * parser.process(stringOrComponent);
 *
 * @memberof ICAL
 */
class ComponentParser {
  /**
   * Creates a new ICAL.ComponentParser instance.
   *
   * @param {Object=} options                   Component parser options
   * @param {Boolean} options.parseEvent        Whether events should be parsed
   * @param {Boolean} options.parseTimezeone    Whether timezones should be parsed
   */
  constructor(options) {
    if (typeof(options) === 'undefined') {
      options = {};
    }

    for (let [key, value] of Object.entries(options)) {
      this[key] = value;
    }
  }

  /**
   * When true, parse events
   *
   * @type {Boolean}
   */
  parseEvent = true;

  /**
   * When true, parse timezones
   *
   * @type {Boolean}
   */
  parseTimezone = true;


  /* SAX like events here for reference */

  /**
   * Fired when parsing is complete
   * @callback
   */
  oncomplete = /* c8 ignore next */ function() {};

  /**
   * Fired if an error occurs during parsing.
   *
   * @callback
   * @param {Error} err details of error
   */
  onerror = /* c8 ignore next */ function(err) {};

  /**
   * Fired when a top level component (VTIMEZONE) is found
   *
   * @callback
   * @param {Timezone} component     Timezone object
   */
  ontimezone = /* c8 ignore next */ function(component) {};

  /**
   * Fired when a top level component (VEVENT) is found.
   *
   * @callback
   * @param {Event} component    Top level component
   */
  onevent = /* c8 ignore next */ function(component) {};

  /**
   * Process a string or parse ical object.  This function itself will return
   * nothing but will start the parsing process.
   *
   * Events must be registered prior to calling this method.
   *
   * @param {Component|String|Object} ical      The component to process,
   *        either in its final form, as a jCal Object, or string representation
   */
  process(ical) {
    //TODO: this is sync now in the future we will have a incremental parser.
    if (typeof(ical) === 'string') {
      ical = parse(ical);
    }

    if (!(ical instanceof Component)) {
      ical = new Component(ical);
    }

    let components = ical.getAllSubcomponents();
    let i = 0;
    let len = components.length;
    let component;

    for (; i < len; i++) {
      component = components[i];

      switch (component.name) {
        case 'vtimezone':
          if (this.parseTimezone) {
            let tzid = component.getFirstPropertyValue('tzid');
            if (tzid) {
              this.ontimezone(new Timezone({
                tzid: tzid,
                component: component
              }));
            }
          }
          break;
        case 'vevent':
          if (this.parseEvent) {
            this.onevent(new Event$1(component));
          }
          break;
        default:
          continue;
      }
    }

    //XXX: ideally we should do a "nextTick" here
    //     so in all cases this is actually async.
    this.oncomplete();
  }
}

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * Portions Copyright (C) Philipp Kewisch */


/**
 * The main ICAL module. Provides access to everything else.
 *
 * @alias ICAL
 * @namespace ICAL
 * @property {ICAL.design} design
 * @property {ICAL.helpers} helpers
 */
var ICALmodule = {
  /**
   * The number of characters before iCalendar line folding should occur
   * @type {Number}
   * @default 75
   */
  foldLength: 75,

  debug: false,

  /**
   * The character(s) to be used for a newline. The default value is provided by
   * rfc5545.
   * @type {String}
   * @default "\r\n"
   */
  newLineChar: '\r\n',

  Binary,
  Component,
  ComponentParser,
  Duration,
  Event: Event$1,
  Period,
  Property,
  Recur,
  RecurExpansion,
  RecurIterator,
  Time,
  Timezone,
  TimezoneService,
  UtcOffset,
  VCardTime,

  parse,
  stringify,

  design,
  helpers
};

/* --- Obsidian Plugin: Periodic Notes Calendar View ---
  Developer: Tim Williams
  This plugin uses library: https://app.unpkg.com/ical.js@2.2.1/files/dist/ical.es5.min.cjs (c) 2024 Chris Lawley, MIT License  
*/


// Import necessary components from the Obsidian API.
const { Plugin, ItemView, PluginSettingTab, Notice, TFile, TFolder, Setting, Modal, Menu, AbstractInputSuggest, moment, MarkdownRenderer, setIcon, Platform } = require("obsidian");

// Define a unique type for this plugin's view.
const VIEW_TYPE_PERIOD = "calendar-period-week";

// Define the default settings for the plugin. This object is used as a fallback and for resetting configurations.
const DEFAULT_SETTINGS = {
    // General Display
    appliedTheme: "",
    fontSize: "12px",
    dayNumberFontSize: "15px",
    navButtonHeight: "28px",
    headerRowBold: false,
    pwColumnBold: false,
    showCalendarGridLines: false,
    calendarGridGapWidth: "1px",
    contentBorderWidth: "1px",
    monthColorLight: "rgba(51, 51, 51, 1)", // Dark Grey for light mode
    monthColorDark: "rgba(255, 255, 255, 1)", // White for dark mode
    yearColorLight: "rgba(255, 0, 0, 1)", // Darker red for light mode
    yearColorDark: "rgba(255, 80, 80, 1)",  // Brighter red for dark mode
    currentHighlightLabelColorLight: "rgba(255, 80, 80, 1)", // A distinct but readable red for light mode
    currentHighlightLabelColorDark: "rgba(255, 80, 80, 1)",  // A brighter red for dark mode
    monthTitleFormat: "MMMM YYYY",
    mainMonthYearTitleFontSize: "22px",
    mainMonthTitleBold: true,
    mainYearTitleBold: false,
    todayHighlightSize: "2.2em",
    tabTitleBold: false,
    tabDisplayMode: "iconOnly",
    mobileTabDisplayMode: "iconOnly",
    collapsedNoteGroups: {},
    tabOrder: ["scratch", "notes", "tasks", "assets"],
    tabIcons: {
        scratch: "pencil",
        notes: "files",
        tasks: "check-circle",
        pinned: "pin",
        assets: "image-file"
    },
    assetsLookbackDays: 7,
    assetsDefaultView: 'grid',
    tabVisibility: {
        scratch: true,
        notes: true,
        tasks: true,
        assets: true,
    },
    calendarLayout: "normal",
    weekStartDay: "sunday",

    // Scratchpad
    fixedNoteFile: "ScratchPad.md",
    scratchFontSize: "14px",
    scratchBold: false,
    scratchFontFamily: "",
    scratchpadOpenAction: "new-tab",
    scratchpadHighlightColor: "rgba(255, 165, 0, 0.4)",
    scratchpad: {
        showPreviewToggle: true,
        showAddTaskButton: true,
        taskFormat: "- [ ] #Tag | 📅 {friday}"
    },

    // Notes Tab
    ignoreFolders: [],
    pinTag: "pin",
    notesViewMode: "recent",
    notesFontSize: "14px",
    notesBold: false,
    notesOpenAction: "new-tab",
    notesLineHeight: 1.2,
    notesLookbackDays: 7,
    showNoteStatusDots: true,
    showNoteTooltips: true,
    pinnedNotesSortOrder: 'a-z', // can be 'a-z' or 'custom'
    pinnedNotesCustomOrder: [],  // Stores an array of note paths for custom order

    //Assets 
    hiddenAssetTypes: "base,canvas",
    showUnusedAssetsIndicator: true,
    assetsOpenAction: "new-tab",

    // Calendar Dots & Popups
    showOtherNoteDot: true,
    showModifiedFileDot: true,
    otherNoteIgnoreFolders: [],
    otherNoteHoverDelay: 800,
    popupHideDelay: 50,
    popupGap: -2,
    otherNotePopupFontSize: "14px",
    calendarDotSize: 4,
    showAssetDot: true,
    assetDotColor: "rgba(255, 0, 0, 1)", // Red
    calendarEventDotColor: 'rgba(148, 148, 148, 1)', // Grey

    assetIgnoreFolders: [],

    showPWColumnSeparator: true,
    pwColumnSeparatorColor: "rgba(128, 128, 128, 0.2)", // Grey separator line

    pwColumnFontColorLight: "rgba(51, 51, 51, 0.6)", // Dark grey for light mode
    pwColumnFontColorDark: "rgba(255, 255, 255, 0.6)", // White for dark mode
    weekNumberFontColorLight: "rgba(51, 51, 51, 0.6)", // Dark grey for light mode
    weekNumberFontColorDark: "rgba(255, 255, 255, 0.6)", // White for dark mode
    dayHeaderFontColorLight: "rgba(51, 51, 51, 0.6)", // Dark grey for light mode
    dayHeaderFontColorDark: "rgba(255, 255, 255, 0.6)", // White for dark mode

    dayCellFontColorLight: "rgba(51, 51, 51, 1)", // Current month dates - light
    dayCellFontColorDark: "rgba(255, 255, 255, 1)", // Current month dates - dark
    otherMonthFontColorLight: "rgba(153, 153, 153, 0.6)", // Previous/next month dates - light
    otherMonthFontColorDark: "rgba(153, 153, 153, 0.6)", // Previous/next month dates - dark

    // Task Count Badge
    taskIndicatorStyle: "heatmap", // 'none', 'badge', or 'heatmap'
    taskBadgeFontSize: "11px",
    taskBadgeColor: "rgba(100, 149, 237, 0.6)", // Cornflower Blue
    taskBadgeFontColor: "rgba(255, 255, 255, 1)", // White
    taskHeatmapStartColor: "rgba(100, 149, 237, 0.3)", // Cornflower Blue
    taskHeatmapMidColor: "rgba(255, 127, 80, 0.45)",    // Coral
    taskHeatmapEndColor: "rgba(255, 71, 71, 0.6)",     // Red
    taskHeatmapMidpoint: 5,
    taskHeatmapMaxpoint: 10,
    showTaskDot: false,
    taskDotColor: "rgba(200, 100, 200, 1)",

    // Daily Notes
    dailyNotesFolder: "Daily Notes",
    dailyNoteDateFormat: "YYYY-MM-DD",
    dailyNoteTemplatePath: "",
    dailyNoteOpenAction: "new-tab",

    //period / week numbers 
    showWeekNumbers: true,
    weekNumberType: "calendar", // 'period' or 'calendar'
    weekNumberColumnLabel: "CW",

    //calendar events (from ICS) settings
    icsUrl: '',
    showIcsDot: true,
    icsRefreshInterval: 60, // in minutes
    calendarEventsPlaceholder: '%%CALENDAR_EVENTS%%',
    calendarEventsFormat: '- {{startTime}} - {{endTime}}: {{summary}}',
    calendarEventIndicatorStyle: 'dot', // Options: 'dot', 'heatmap', 'badge'

    // Functional
    autoReloadInterval: 5000,
    startOfPeriod1Date: "2025-03-02",
    showPWColumn: false,
    pwFormat: "P#W#",
    enableRowHighlight: true,
    enableColumnHighlight: true,
    enableRowToDateHighlight: false,
    highlightCurrentWeek: true,

    // Colors
    selectedTabColor: "rgba(102, 102, 102, 1)",
    todayHighlightColorLight: "rgba(255, 80, 80, 0.40)",
    todayHighlightColorDark: "rgba(255, 80, 80, 0.75)",
    notesHoverColor: "rgba(171, 171, 171, 0.15)",
    dailyNoteDotColor: "rgba(74, 144, 226, 1)",
    noteCreatedColor: "rgba(76, 175, 80, 1)",
    noteModifiedColor: "rgba(255, 152, 0, 1)",
    rowHighlightColorLight: "rgba(163, 163, 163, 0.2)", // Lighter Grey
    rowHighlightColorDark: "rgba(51, 51, 51, 0.7)",     // Dark Grey
    dateCellHoverColorLight: "rgba(105, 105, 105, 0.75)",     // Light Grey
    dateCellHoverColorDark: "rgba(51, 51, 51, 1)",
    assetDotColor: "rgba(255, 0, 0, 1)",
    todayHighlightStyle: "circle", // 'cell' or 'circle'
    todayCircleColorLight: "rgba(255, 80, 80, 0.40)",
    todayCircleColorDark: "rgba(255, 80, 80, 0.75)",
    highlightTodayLabels: true,
    highlightTodayPWLabel: true,
    highlightTodayDayHeader: true,
    highlightWeekends: false,
    weekendShadeColorLight: "rgba(163, 163, 163, 0.15)", // Subtle grey for light theme
    weekendShadeColorDark: "rgba(51, 51, 51, 0.4)", // Subtle grey for dark theme


    // Weekly Notes (NEW)
    enableWeeklyNotes: true,
    weeklyNoteFolder: "Weekly Notes",
    weeklyNoteFormat: "YYYY-[W]CW", // e.g., 2025-W38
    weeklyNoteTemplate: "",
    showWeeklyNoteDot: true,
    weeklyNoteDotColor: "rgba(128, 128, 128, 1)",

    // Tasks Tab Settings
    taskIgnoreFolders: [],
    taskSortOrder: "dueDate",
    taskGroupBy: "date",
    taskDateGroupsToShow: ["overdue", "today", "tomorrow", "next7days", "future"],
    taskTextTruncate: false,
    showCompletedTasksToday: true,
    taskHeadingFontSize: "13px",
    taskTextFontSize: "14px",
    taskGroupIcons: {
        overdue: "alarm-clock-off",
        today: "target",
        tomorrow: "arrow-right",
        next7days: "calendar-days",
        future: "telescope",
        noDate: "help-circle",
        tag: "tag"
    },
    taskGroupColorOverdue: "rgba(40, 40, 40, 0.15)",
    taskGroupColorToday: "rgba(60, 60, 60, 0.15)",
    taskGroupColorTomorrow: "rgba(80, 80, 80, 0.15)",
    taskGroupColorNext7Days: "rgba(100, 100, 100, 0.15)",
    taskGroupColorFuture: "rgba(120, 120, 120, 0.15)",
    taskGroupColorNoDate: "rgba(140, 140, 140, 0.15)",
    taskGroupColorTag: "rgba(40, 40, 40, 0.15)",
    showPreviewToggle: true,
    showAddTaskButton: true,
    collapsedTaskGroups: {},
    collapsedAssetGroups: {},
};

// A string containing all the CSS for the plugin. It's injected into the document head on load.
const PLUGIN_STYLES = `
body.theme-light {
    --month-color-themed: var(--month-color-light);
    --today-circle-color-themed: var(--today-circle-color-light);
    --today-highlight-color-themed: var(--today-highlight-color-light);
    --date-cell-hover-color-themed: var(--date-cell-hover-color-light);
    --pw-column-font-color-themed: var(--pw-column-font-color-light);
    --week-number-font-color-themed: var(--week-number-font-color-light);
    --day-header-font-color-themed: var(--day-header-font-color-light);
    --day-cell-font-color-themed: var(--day-cell-font-color-light);
    --other-month-font-color-themed: var(--other-month-font-color-light);
    --weekend-shade-color-themed: var(--weekend-shade-color-light);
    --row-highlight-color-themed: var(--row-highlight-color-light);
    --year-color-themed: var(--year-color-light);
    --current-label-highlight-color-themed: var(--current-highlight-label-color-light); 

}
body.theme-dark {
    --month-color-themed: var(--month-color-dark);
    --today-circle-color-themed: var(--today-circle-color-dark);
    --today-highlight-color-themed: var(--today-highlight-color-dark);
    --date-cell-hover-color-themed: var(--date-cell-hover-color-dark);
    --pw-column-font-color-themed: var(--pw-column-font-color-dark);
    --week-number-font-color-themed: var(--week-number-font-color-dark);
    --day-header-font-color-themed: var(--day-header-font-color-dark);
    --day-cell-font-color-themed: var(--day-cell-font-color-dark);
    --other-month-font-color-themed: var(--other-month-font-color-dark);
    --weekend-shade-color-themed: var(--weekend-shade-color-dark);
    --row-highlight-color-themed: var(--row-highlight-color-dark);
    --year-color-themed: var(--year-color-dark);
    --current-label-highlight-color-themed: var(--current-highlight-label-color-dark); 

}

/* Style for the "Month" part (uses your existing --month-color-themed variable) */
.month-title-month {
    color: var(--month-color-themed);
}

/* Style for the "Year" part (uses the new variable) */
.month-title-year {
    color: var(--year-color-themed);
}

/* 4. Ensure individual date hover appears ON TOP of other highlights */
.period-calendar-table td:hover td:not(.pw-label-cell):not(.week-number-cell):hover .day-content {
    background-color: var(--date-cell-hover-color-themed) !important;
}

.period-calendar-table td.row-hover:not(.pw-label-cell):not(.week-number-cell) {
    background-color: var(--row-highlight-color-themed);
}

/* Day header row font color */
.period-calendar-table thead th {
    color: var(--day-header-font-color-themed);
}

/* Period/Week column font color */
.period-calendar-table .pw-label-cell,
.period-calendar-table .pw-label-cell .day-number {
    font-weight: var(--pw-column-font-weight);
    font-size: var(--header-font-size);
    color: var(--pw-column-font-color-themed);
}

/* Highlight today's P/W column with today color */
.period-calendar-table .pw-label-cell.today-pw-label .day-number,
.period-calendar-table .week-number-cell.today-pw-label .day-number {
    color: var(--current-label-highlight-color-themed);
    
}

/* Highlight today's day column header with today color */
.period-calendar-table thead th.today-day-header {
    color: var(--current-label-highlight-color-themed);    
}

/* Week number column font color */
.period-calendar-table .week-number-cell,
.period-calendar-table .week-number-cell .day-number {
    font-weight: var(--pw-column-font-weight);
    font-size: var(--header-font-size);
    color: var(--week-number-font-color-themed);
}

/* --- Main Layout --- */
.period-month-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  padding-top: 6px;
}
.month-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.1rem 0.25rem;
  margin-bottom: 0.5rem; /* Specific margin for spacing */
}
.month-header-title {
    font-size: var(--main-month-year-title-font-size);
    white-space: nowrap;
    cursor: pointer;
}
.month-title-month {
    font-weight: var(--main-month-title-weight);
}

.month-title-year {
    font-weight: var(--main-year-title-weight);
}

.month-header-nav {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}
.month-header-nav button {
  height: var(--nav-button-height);
  min-height: var(--nav-button-height);
  padding: 0; /* Remove horizontal padding */
  width: var(--nav-button-height); /* Make the button square */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

/* Accent color for the locked popup button on desktop */
.month-header-nav button.popup-locked .svg-icon {
    color: var(--interactive-accent);
}

/* Specific override for mobile to ensure accent color is applied */
body.is-mobile .month-header-nav button.popup-locked .svg-icon {
    color: var(--interactive-accent);
}

/* --- Chevron Button Animation --- */
.month-header-nav button[aria-label="Toggle calendar visibility"] .svg-icon {
  transition: transform 0.3s ease-in-out;
}
.period-month-container.calendar-collapsed .month-header-nav button[aria-label="Toggle calendar visibility"] .svg-icon {
  transform: rotate(180deg);
}
body.is-mobile .month-header-nav button .svg-icon {
  width: 18px;
  height: 18px;
  color: var(--icon-color);
  flex-shrink: 0;
}
/* --- Calendar Collapse Animation --- */
.calendar-table-wrapper {
  flex-shrink: 0;
  max-height: 500px; 
  transition: max-height 0.3s ease-in-out, margin-bottom 0.3s ease-in-out;
  overflow: hidden;
  margin-bottom: 0.5rem;
}
.period-month-container.calendar-collapsed .calendar-table-wrapper {
  max-height: 0;
  margin-bottom: 0;
}

/* --- Calendar Table --- */
.period-calendar-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
}
.period-calendar-table th, .period-calendar-table td {
  text-align: center;
  vertical-align: middle;
  padding: 0;
  font-size: var(--header-font-size);
}
.period-calendar-table th {
    vertical-align: middle;
}

.period-calendar-table th {
  font-weight: var(--header-row-font-weight);
  height: 2.5em;
}
.period-calendar-table tbody td {
 cursor: pointer;
 overflow: visible; 
 position: relative;
}
.period-month-container:not(.hide-grid) .period-calendar-table td {
    border: var(--calendar-grid-gap-width) solid var(--background-modifier-border);
}

/* --- Rounded Row Highlight --- */
.period-calendar-table .current-week-row td:first-child {
    border-top-left-radius: 6px;
    border-bottom-left-radius: 6px;
}

.period-calendar-table .current-week-row td:last-child {
    border-top-right-radius: 6px;
    border-bottom-right-radius: 6px;
}

.period-calendar-table tbody td:not(.pw-label-cell):not(.week-number-cell):hover .day-content {
  background-color: var(--date-cell-hover-color-themed);
  border-radius: 6px;
  transition: background-color 0.15s ease;
}

body .period-month-container.today-style-cell .today-cell .day-content {
  background-color: var(--today-highlight-color-themed);
  border-radius: 6px;
}

body .period-month-container.today-style-cell .period-calendar-table tbody tr.current-week-row td.today-cell .day-content {
    background-color: var(--today-highlight-color-themed) !important;
}

.period-month-container.today-style-circle .today-cell .day-number {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: var(--today-circle-color-themed);
    z-index: 2;
    border-radius: 50%;
    width: var(--today-highlight-size);
    height: var(--today-highlight-size);
    display: flex;
    align-items: center; 
    justify-content: center;
}

.period-month-container.today-style-number .today-cell .day-number {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: var(--today-circle-color-themed);
    border-radius: 6px; 
    padding: 0px 10px; /* Minimal padding for a tight fit */
    display: flex;
    align-items: center; 
    z-index: 2; /* Ensures it's drawn on top of the heatmap */
}

.period-calendar-table td .day-content.heatmap-cell {
    background-color: var(--heatmap-color) !important;
}

.period-calendar-table .pw-label-cell,
.period-calendar-table .week-number-cell {
  font-weight: var(--pw-column-font-weight);
  font-size: var(--header-font-size);
  position: relative;
}

/* --- Period/Week Column Separator Line --- */
.period-calendar-table tbody td.first-date-column::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 1px;
    background-color: var(--pw-separator-color);
    z-index: 1;
}

.week-dots-container {
    position: absolute;
    left: 0;
    width: 100%;
    display: flex;
    justify-content: center;
}

/* --- Calendar Dots Color Variables --- */
.calendar-dot {
    width: var(--calendar-dot-size);
    height: var(--calendar-dot-size);
    border-radius: 50%;
}

.ics-event-dot {
    background-color: var(--calendar-event-dot-color);
}

/* --- Calendar Layout Styles --- */
.period-month-container.layout-spacious .day-content {
    height: 3.8em;
}
.period-month-container.layout-normal .day-content {
    height: 3.0em;
}
.period-month-container.layout-condensed .day-content {
    height: 2.8em; /* Even smaller height */
    
}

/* The weekly dot now just sets the color and re-uses .calendar-dot for its size */
.weekly-note-dot {
    background-color: var(--weekly-note-dot-color);
}

/* --- Calendar Day Content & Dots (REFACTORED) --- */
/* 1. The Day Content Wrapper */
/* Its ONLY job is to be the positioning anchor. No more flexbox. */
.day-content {
    position: relative;
    width: 100%;
    height: 100%;
}

/* 2. The Day Number */
/* We now position it absolutely to ensure it is perfectly centered. */
.day-number {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1; /* Sits on top of the highlight circle */
    font-size: var(--calendar-day-number-font-size);
    color: var(--day-cell-font-color-themed);
}

/* 3. The Dots Container (with dynamic bottom positioning) */
/* The base rule removes the bottom property. */
.dots-container, .week-dots-container {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    justify-content: center;
    gap: 3px;
    z-index: 2; /* Sits on top of the day number */
}

/* These layout-specific classes now have full control and will work correctly. */
.dots-container.layout-condensed,
.week-dots-container.layout-condensed {
    top: 26px; 
}

.dots-container.layout-normal,
.week-dots-container.layout-normal {
    top: 28px; 
}

.dots-container.layout-spacious,
.week-dots-container.layout-spacious {
    top: 34px; 
}

/* 4. Ensure other layered items are also positioned absolutely */


.badge-container {
    position: absolute;
    top: 2px;
    right: 2px;
    z-index: 3; /* Sits at the very top */
}

.day-header-cell, .pw-cell, .week-number-cell {
    /* Uses the general font size for labels */
    font-size: var(--calendar-label-font-size); 
}

.day-number-other-month {
    color: var(--other-month-font-color-themed) !important;
}

.period-calendar-table th, .period-calendar-table .pw-cell, .period-calendar-table .week-number-cell {
    font-size: var(--calendar-label-font-size); 
}

/* --- Calendar Layout Styles --- */
.period-month-container.layout-spacious .dots-container  {
    padding-bottom: 10px; /* Creates space from the bottom edge */
}
.period-month-container.layout-spacious .dots-container:empty {
    padding-top: var(--calendar-dot-size);
}

.period-month-container.layout-normal .dots-container  {
    padding-bottom: 6px; /* Creates space from the bottom edge */
}
.period-month-container.layout-condensed .dots-container  {
    padding-bottom: 4px; /* Creates space from the bottom edge */
}

.task-count-badge {
    position: absolute;
    top: 2px;
    right: 3px;
    z-index: 3;
    width: 1.6em;
    height: 1.6em;
    border-radius: 50%;
    background-color: var(--task-badge-color);
    color: var(--task-badge-font-color);
    font-size: var(--task-badge-font-size);
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1; /* Prevents text from shifting vertically */
}

.calendar-dot {
  width: var(--calendar-dot-size);
  height: var(--calendar-dot-size);
  border-radius: 50%;
}
.other-note-dot { background-color: var(--other-note-dot-color); }
.modified-file-dot { background-color: var(--calendar-modified-dot-color); }
.asset-dot { background-color: var(--asset-dot-color); }
.task-dot { background-color: var(--task-dot-color); } 
.period-month-daily-note-dot { background-color: var(--daily-note-dot-color, var(--text-accent)); }
.period-month-daily-note-dot-other-month { opacity: 0.4; }

/* --- Tabs & Search Header --- */
.tabs-content-wrapper {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;
  min-height: 0;
}
.note-tab-header {
  display: flex;
  flex-shrink: 0;
  width: 100%;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 6px;
}
.tab-container {
  display: flex;
  align-items: center;
}
.note-tab {
  position: relative;
  flex: 0 1 auto;
  text-align: center;
  padding: 0.5rem 1rem;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  font-size: var(--tab-title-font-size);
  font-weight: var(--tab-title-bold);
  white-space: nowrap;
}
.note-tab:hover { background-color: var(--background-modifier-hover); }
.note-tab.active {
  border-bottom-color: var(--selected-tab-color);
}
.note-tab.dragging {
  opacity: 0.5;
  cursor: grabbing;
}
.note-tab.drag-over-indicator-before::before,
.note-tab.drag-over-indicator-after::after {
  content: '';
  position: absolute;
  top: 10%;
  bottom: 10%;
  width: 2px;
  background-color: var(--selected-tab-color);
}
.note-tab.drag-over-indicator-before::before { left: 0; }
.note-tab.drag-over-indicator-after::after { right: 0; }
.search-wrapper {
  flex-grow: 1;
  display: flex;
  justify-content: flex-end;
  padding-right: 8px;
}

/* --- Unified Search Input --- */
.pm-search-container {
    display: flex;
    align-items: center;
    position: relative;
    width: 100%;
}
.pm-search-input {
    background-color: var(--background-secondary);
    border: 1px solid var(--background-modifier-border);
    border-radius: var(--radius-s);
    color: var(--text-normal);
    width: 100%;
    padding: 4px 28px 4px 8px;
    box-sizing: border-box;
    line-height: var(--line-height-normal);
}
.pm-search-input:focus {
    border-color: var(--interactive-accent);
    box-shadow: 0 0 0 1px var(--interactive-accent);
}

/* --- Scratchpad Content & Buttons --- */
.scratchpad-wrapper {
  flex: 1 1 auto;
  display: grid;
  width: 100%;
  height: 100%;
  position: relative;
}
.scratch-content:focus {
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
}
/* This is the visual cutout */
.scratchpad-wrapper::before {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  width: 56px;
  height: 64px;
  background-color: var(--background-secondary);
  z-index: 3;
  border-bottom-left-radius: var(--radius-m);
}
.scratchpad-wrapper.markdown-preview-view {
  align-content: start; 
}
.scratchpad-wrapper.markdown-preview-view p {
  margin-block-start: 0 !important;
  margin-block-end: 0.5em !important; 
}
.scratchpad-actions-container {
  position: absolute;
  top: 8px;
  right: 8px;
  z-index: 10;
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.scratchpad-action-btn {
  cursor: pointer;
  background-color: var(--background-modifier-hover);
  border: 1px solid var(--background-modifier-border);
  border-radius: var(--radius-s);
  padding: 4px;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}
.scratchpad-action-btn .svg-icon {
    width: 16px;
    height: 16px;
}
.scratchpad-action-btn:hover {
  background-color: var(--background-modifier-border);
}

/* --- Scratchpad Textarea & Highlighter --- */
.scratch-base {
  margin: 0;
  padding: 0.75rem 3.5rem 0.5rem 0.5rem;
  border: none;
  font-family: var(--scratch-font-family);
  font-size: var(--scratch-font-size);
  font-weight: var(--scratch-bold);
  line-height: 1.5;
  white-space: pre-wrap;
  word-break: break-word;
  box-sizing: border-box;
  width: 100%;
  height: 100%;
  grid-area: 1 / 1;
  overflow: auto;
}
.scratch-highlighter {
  z-index: 1;
  color: transparent;
  pointer-events: none;
}
.scratch-highlighter mark {
  color: transparent;
  background-color: var(--scratchpad-highlight-color);
  border-radius: 3px;
}
.scratch-content {
  z-index: 2;
  background-color: transparent;
  resize: none;
}
.scratch-content:hover {
  background-color: transparent !important;
}
.scratch-content::selection {
  background-color: var(--scratchpad-highlight-color) !important;
}

/* --- Notes & Tasks List Styles --- */
.notes-container, .tasks-container {
  overflow-y: auto;
  flex: 1 1 auto;
  min-height: 0;
  padding: 4px 4px 48px;
}
.note-row, .task-row {
  display: flex;
  align-items: center;
  padding: 8px;
  border-radius: 8px;
  cursor: pointer;
  outline: none;
  width: 100%;
  box-sizing: border-box;
  overflow: hidden;
  position: relative;
}
.note-row {
  gap: 1em;
}
.task-row {
  gap: 0.5em;
}
.task-row .task-text > p {
    margin: 0;
    padding: 0;
}

#notes-list-view .note-row:hover,
#asset-list-view .note-row:hover,
#pinned-notes-list .note-row:hover,
.tasks-container .task-row:hover,
#notes-list-view .note-row:focus,
#asset-list-view .note-row:focus,
#pinned-notes-list .note-row:focus,
.tasks-container .task-row:focus {
    background-color: var(--notes-hover-color);
}

.note-status-dot { 
  width: 8px; 
  height: 8px; 
  border-radius: 50%; 
  flex-shrink: 0; 
}
.note-status-dot-created { background-color: var(--note-created-color); }
.note-status-dot-modified { background-color: var(--note-modified-color); }
.note-row .note-title-wrapper { 
  display: flex; 
  align-items: flex-start;
  gap: 6px; 
  flex: 1; 
  min-width: 0; 
}
.note-row .note-title { 
  white-space: nowrap; 
  overflow: hidden; 
  text-overflow: ellipsis; 
  font-size: var(--notes-font-size); 
  font-weight: var(--notes-bold); 
}
.note-row .note-meta-container {
  display: flex;
  align-items: center;
  gap: 1em;
  flex-shrink: 0;
  margin-left: 1em;
}
.note-row .note-file-size {
  font-size: 0.8em;
  color: var(--text-muted);
  width: 65px;
  text-align: right;
}
.note-row .note-mod-date { 
  white-space: nowrap; 
  font-size: 0.8em; 
  color: var(--text-muted);
  width: 85px;
  text-align: right 
}

/* --- Tasks Specific Styles --- */
.task-group-container {
  margin-bottom: 10px;
  padding: 8px;
  border-radius: 8px;
}

/* --- Task Group Collapse Styles --- */
.task-group-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
  user-select: none;
  font-size: var(--task-heading-font-size);
}
.task-group-header-content {
  display: flex;
  align-items: center;
  gap: 6px;
}
.task-group-collapse-icon .svg-icon {
  transition: transform 0.3s ease-in-out;
}
.task-group-container.is-collapsed .task-group-collapse-icon .svg-icon {
  transform: rotate(-180deg);
}
.task-list-wrapper {
  transition: height 0.35s ease-in-out, opacity 0.35s ease-in-out;
  overflow: hidden;
  opacity: 1;
  height: var(--task-list-height, auto);
}

.task-group-container.is-collapsed .task-list-wrapper {
  height: 0;
  opacity: 0;
}

.task-group-empty-message {
  font-style: italic;
  color: var(--text-muted);
  padding: 4px 0;
  font-size: 0.9em;
}
.task-row .task-text {
  flex-grow: 1;
  font-size: var(--task-text-font-size);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.task-row .task-text.completed {
  text-decoration: line-through;
  color: var(--text-muted);
}
.tasks-container.show-full-text .task-row {
  align-items: flex-start;
}
.tasks-container.show-full-text .task-text {
  white-space: normal;
  word-break: break-word;
}
.tasks-container.show-full-text .task-row .task-checkbox {
  margin-top: 2px;
}

/* --- Popups & Tooltips --- */
/* Common base styles for popups */
.other-notes-popup, .custom-suggestion-container {
    position: absolute;
    z-index: 100;
    background-color: var(--background-secondary);
    border: 1px solid #4a4a4a;
    border-radius: 15px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    min-width: 450px;
    max-width: 658px;
}

/* Main popup specific styles */
.other-notes-popup {
    padding: 0;
    display: flex;
    flex-direction: column;
    overflow: hidden; /* Hide overflow on the main container */
    max-height: 250px; /* Increased slightly for mobile header */
}

/* Popup header */
.popup-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    border-bottom: 1px solid var(--background-modifier-border);
    flex-shrink: 0; /* Prevent header from shrinking */
    cursor: pointer;
    gap: 10px;
}
.popup-header-title {
    font-weight: normal;
    color: var(--text-muted);
    flex-grow: 1; /* Allow title to take available space */
    flex-shrink: 1; /* Allow title to shrink if needed */
    min-width: 0; /* Important for text-overflow to work with flex items */
    white-space: nowrap; /* Prevent title from wrapping */
    overflow: hidden; /* Hide overflow */
    text-overflow: ellipsis; /* Add ellipsis for long titles */
    font-size: --var(--other-note-popup-font-size);
    /* max-width: 420px;  */
    
}

.popup-close-btn {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    /* Default for DARK theme: Light grey circle */
    background-color: #9c9b9b; 
    /* Default for DARK theme: Dark 'x' icon */
    color: #383838; 
    transition: background-color 0.1s ease-in-out, color 0.1s ease-in-out;
}

.popup-close-btn:hover {
    /* Hover for DARK theme: Even lighter circle */
    background-color: #f5f5f5;
}

/* --- Light Theme Overrides --- */
body.theme-light .popup-close-btn {
    /* Default for LIGHT theme: Dark grey circle */
    background-color: #5c5c5c;
    /* Default for LIGHT theme: White 'x' icon */
    color: #ffffff;
}

body.theme-light .popup-close-btn:hover {
    /* Hover for LIGHT theme: Even darker circle */
    background-color: #383838;
}

.popup-close-btn .svg-icon {
    width: 14px;
    height: 14px;
}

/* Content wrapper for scrolling and padding */
.popup-content-wrapper {
    padding: 8px;
    overflow-y: auto;
}

/* Suggestion container specific styles */
.custom-suggestion-container {
    z-index: 999;
    margin-top: 4px;
    padding: 8px;
    max-height: 200px;
    overflow-y: auto;
}

.other-notes-popup-item {
  display: flex; 
  align-items: flex-start; 
  gap: 8px; 
  padding: 8px; 
  border-radius: 8px;
  overflow: hidden;
  cursor: pointer; 
  white-space: normal;
  word-break: break-word; 
  text-overflow: ellipsis; 
  font-size: var(--other-note-popup-font-size);
}
.other-notes-popup-item:hover { 
  background-color: var(--background-modifier-hover); 
}
.other-notes-popup-item .svg-icon {
  flex-shrink: 0;
  width: 1.2em;
  height: 1.2em;
}
.note-row .note-status-dot,
.other-notes-popup-item .popup-file-dot,
.other-notes-popup-item .popup-asset-thumbnail {
    margin-top: 5px; 
}
.other-notes-popup-item p {
    margin: 0;
}
.popup-file-dot { 
  width: 8px; 
  height: 8px; 
  border-radius: 50%; 
  flex-shrink: 0; 
}
.custom-suggestion-item { 
  padding: 8px 12px; 
  cursor: pointer; 
  font-size: var(--font-ui-small); 
}
.custom-suggestion-item:hover { 
  background-color: var(--background-modifier-hover); 
}
.setting-item-control { 
  position: relative; 
}
body:has(.note-title-wrapper:hover) .tooltip, 
body:has(.note-title-cell:hover) .tooltip,
body:has(.task-text:hover) .tooltip {
  text-align: left; 
  padding: 6px 10px; 
  white-space: pre-wrap; 
  max-width: 400px; 
  transition-delay: 0.5s !important; 
  background-color: var(--background-secondary); 
  box-shadow: 0 4px 12px rgba(0,0,0,0.2); 
  border-radius: 15px; 
  border: 1px solid #4a4a4a; 
  font-size: var(--other-note-popup-font-size); 
  color: var(--text-normal); 
  font-weight: normal;
}


/* --- Vertical View --- */
.vertical-calendar-scroller { 
  flex: 1; 
  overflow-y: auto; 
}
.vertical-month-wrapper { 
  margin-bottom: 2rem; 
}
.vertical-month-title {
  font-size: var(--main-month-year-title-font-size);
  font-weight: var(--main-month-year-title-weight);
  position: sticky; 
  top: 0; 
  z-index: 10;
  margin: 0.6rem 0; 
  height: 2rem; 
  display: flex; 
  align-items: center; 
  justify-content: center;
  cursor: pointer;
}

.theme-light .vertical-month-title {
    color: var(--month-color-themed);
    background-color: var(--background-primary);
}
.theme-dark .vertical-month-title {
    color: var(--month-color-themed);
    background-color: var(--background-secondary);
   /* color: var(--text-normal);  Ensure text is readable */
}

.period-month-container.vertical-view-active .tabs-content-wrapper { display: none; }
.period-month-container:not(.vertical-view-active) .vertical-calendar-scroller { display: none; }

/* --- Mobile-Specific Overrides --- */
.is-mobile .notes-table { 
  width: 100%; 
  border-collapse: collapse; 
  table-layout: fixed; 
}
.is-mobile .notes-table-row { 
  cursor: pointer; 
  border-bottom: 1px solid var(--background-modifier-border); 
}
.is-mobile .notes-table .note-title-cell, .is-mobile .notes-table .note-date-cell { 
  padding: 0.6rem 0.5rem; 
  vertical-align: top; 
}
.is-mobile .notes-table .note-title-cell { 
  display: flex; 
  align-items: center; 
  gap: 8px; 
  white-space: normal; 
  word-break: break-word; 
  font-size: var(--notes-font-size); 
  font-weight: var(--notes-bold); 
}
.is-mobile .notes-table .note-date-cell { 
  width: 85px; 
  text-align: right; 
  white-space: nowrap; 
  font-size: 0.8em; 
  color: var(--text-muted); 
}
.is-mobile .period-calendar-table th, .is-mobile .period-calendar-table .pw-label-cell { 
  /*font-size: 12px; */
  font-size: calc(var(--calendar-label-font-size) * 0.9);
  padding: 0; 
}

.is-mobile .period-calendar-table .day-number { 
    font-size: calc(var(--calendar-day-number-font-size) * 0.9);
}

.period-calendar-table .pw-label-cell .day-number,
.period-calendar-table .week-number-cell .day-number {
    font-size: inherit; /* Inherit the correct font size from the parent cell */
}

/* Default row height */
.period-calendar-table tbody tr {
    height: 36px;
    min-height: 36px;
}

.period-calendar-table tbody td {
    min-height: 36px;
}

/* Adjust row height for condensed layout */
.period-month-container.layout-condensed .period-calendar-table tbody tr {
    height: 30px;
    min-height: 30px;
}

.period-month-container.layout-condensed .period-calendar-table tbody td {
    min-height: 30px;
}

/* Adjust row height for spacious layout */
.period-month-container.layout-spacious .period-calendar-table tbody tr {
    height: 40px;
    min-height: 40px;
}

.period-month-container.layout-spacious .period-calendar-table tbody td {
    min-height: 40px;
}

/* --- Misc --- */
.period-month-container .svg-icon {
  color: var(--icon-color, currentColor);
}

/* --- Unified clear button for all search inputs --- */
.search-input-clear-btn {
    position: absolute;
    right: 6px;
    top: 50%;
    transform: translateY(-50%);
    visibility: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 15px;
    height: 15px;
    border-radius: 50%;
    cursor: pointer;
    transition: background-color 0.1s ease-in-out;
    background-color: #9c9b9b;
    /* Color is now set directly on the icon rule below */
}

.search-input-clear-btn:hover {
    background-color: #f5f5f5;
}

.search-input-clear-btn .svg-icon {
    width: 13px;
    height: 13px;
    /* FIX: Force the icon color to be dark */
    color: #383838 !important;
}

/* --- Light Theme Overrides --- */
body.theme-light .search-input-clear-btn {
    background-color: #5c5c5c;
}

body.theme-light .search-input-clear-btn:hover {
    background-color: #383838;
}

body.theme-light .search-input-clear-btn .svg-icon {
    /* FIX: Force the icon color to be white in the light theme */
    color: #ffffff !important;
}

/* --- Task Header Icons --- */
.task-group-header .icon {
  display: flex;
  align-items: center;
}
.task-group-header .icon .svg-icon {
  /*width: var(--task-heading-font-size);
  height: var(--task-heading-font-size);
*/
  }

/* --- Tab Icons --- */
.tab-icon {
  width: 1.2em;
  height: 1.2em;
}
.note-tab {
  display: flex;
  align-items: center;
  gap: 0.5em;
}

/* --- Asset List Styles --- */
.asset-thumbnail, .popup-asset-thumbnail {
  width: 28px;
  height: 28px;
  border-radius: var(--radius-s);
  object-fit: cover;
}
.popup-asset-thumbnail {
  width: 22px;
  height: 22px;
}
.asset-icon-container, .asset-thumbnail-container {
  width: 28px;
  height: 28px;
  flex-shrink: 0;
  margin-right: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.asset-icon-container .svg-icon {
  width: 20px;
  height: 20px;
}
.asset-action-icon {
  position: relative;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  margin-right: 6px;
}
.asset-action-icon > div {
  position: absolute;
  transition: opacity 0.2s ease-in-out;
}
.asset-action-icon .svg-icon {
  width: 16px;
  height: 16px;
}
.asset-action-icon div:nth-child(2) {
  opacity: 0;
}
.note-row:hover .asset-action-icon div:nth-child(1) {
  opacity: 0;
}
.note-row:hover .asset-action-icon div:nth-child(2) {
  opacity: 1;
}
.asset-action-icon:hover .svg-icon {
    color: var(--text-error);
}

/* --- Asset Grid Styles --- */
.note-list-wrapper.assets-grid-view {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    padding-top: 8px;
}
.asset-grid-item {
    flex-basis: calc(50% - 8px); 
    display: flex;
    flex-direction: column;
    cursor: pointer;
    border-radius: 12px;
    background-color: var(--background-secondary);
    overflow: hidden;
    border: 1px solid var(--background-modifier-border);
    padding: 8px;
    box-sizing: border-box; /* THIS IS THE CRITICAL MISSING LINE */
}
.asset-grid-preview {
    width: 100%;
    aspect-ratio: 4 / 3;
    background-color: var(--background-modifier-hover);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden; 
    border-radius: 8px;  
}
.asset-grid-preview img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}
.asset-grid-name {
    padding: 8px 4px 0; /* Adjusted padding */
    margin-top: 8px; /* Adds space between the image and text */
    font-size: 0.9em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    border-top: 1px solid var(--background-modifier-border);
}

.asset-grid-item:hover {
  background-color: var(--notes-hover-color);
  border-color: rgba(200, 200, 200, 0.75); /* A lighter, semi-transparent gray */
}

/* --- Settings Tabs --- */
.period-settings-container {
  display: flex;
  height: 100%;
}

/* Base style for all navigation buttons in the settings panel */
.period-settings-nav button {
    transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
}

/* Highlight style for the currently active settings tab button */
.period-settings-nav button.is-active {
    background-color: var(--interactive-accent);
    color: var(--text-on-accent); /* Standard Obsidian variable for contrast */
}

.period-settings-container .setting-item-heading {
    color: var(--text-normal);
}

.period-settings-nav {
  display: flex;
  flex-direction: column;
  padding-right: 1.5rem;
  border-right: 1px solid var(--background-modifier-border);
  width: 160px;
  flex-shrink: 0;
  gap: 4px;
}
.period-settings-nav-button {
      background: none;
      border: none;
      text-align: left;
      padding: 0.75rem 0.5rem;
      margin-bottom: 0.25rem;
      cursor: pointer;
      border-radius: var(--radius-m);
      color: var(--text-muted);
      font-size: var(--font-ui-small);
}
.period-settings-nav-button:hover {
      background-color: var(--background-modifier-hover);
      color: var(--text-normal);
}
.period-settings-nav-button.is-active {
      background-color: var(--interactive-accent);
      color: var(--text-on-accent);
      font-weight: bold;
}
.period-settings-content {
      flex-grow: 1;
      padding-left: 1.5rem;
      overflow-y: auto;
}
.period-settings-content > :first-child {
    /* Remove the browser's default top margin from the header */
    margin-top: 0;
    
    /* Add a small amount of padding to vertically align it with the text inside the buttons */
    padding-top: 6px; 
}
.popup-section-header {
    font-size: 0.8em;
    font-weight: bold;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin: 10px 8px 4px;
    padding: 0;
}
.popup-separator {
    border-bottom: 1px solid var(--background-modifier-border);
    margin: 6px 8px;
}
.other-notes-popup .popup-section-header:first-child {
    margin-top: 4px;
}
.note-group-header {
    font-size: 0.85em;
    font-weight: bold;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 12px 4px 4px;
}
.note-title-path-wrapper,
.other-notes-popup-item .note-title-path-wrapper {
    display: flex;
    flex-direction: column;
    min-width: 0; 
}
.note-row .note-path,
.other-notes-popup-item .note-path {
    font-size: 0.8em;
    color: var(--text-muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-top: 2px;
}

/* --- Final & Unified Task Styling --- */
.task-checkbox-symbol {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 1.35em;
    height: 1.35em;
    font-size: 1em;
    cursor: pointer;
    flex-shrink: 0;
    border: 1px solid var(--text-faint);
    border-radius: 50%;
    transition: all 0.1s ease-in-out;
    background-color: var(--background-primary);
}
.task-row:hover .task-checkbox-symbol,
.other-notes-popup-item:hover .task-checkbox-symbol {
    border-color: var(--text-normal);
}
.task-checkbox-symbol:has(.svg-icon) {
    border-color: transparent !important;
}
.task-checkbox-symbol.is-completed {
    background-color: var(--interactive-accent);
    border-color: var(--interactive-accent) !important;
}
.task-checkbox-symbol .svg-icon {
    width: 100%;
    height: 100%;
    padding: 0.1em;
    fill: currentColor;
}
.task-checkbox-symbol.is-completed .svg-icon {
    color: var(--text-on-accent) !important;
}

/* --- Note Group Collapse Styles --- */
.note-group-container {
  border: 1px solid var(--background-modifier-border); /* Adds a subtle, theme-aware border */
  border-radius: var(--radius-l); /* Rounds the corners of the card */
  padding: 0 8px 8px; /* Adds some internal spacing for the note list */
  margin-bottom: 12px; /* Increases space between cards */
}
.note-group-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
  user-select: none;
  font-size: 0.85em;
  font-weight: bold;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 12px 4px 4px;
}
.note-group-header:hover {
  color: var(--text-normal);
}
.note-group-header-content {
  display: flex;
  align-items: center;
  gap: 6px;
}
.note-group-count {
  font-size: 0.9em;
  background-color: var(--background-modifier-border);
  border-radius: 4px;
  padding: 1px 5px;
}
.note-group-collapse-icon .svg-icon {
  transition: transform 0.2s ease-in-out;
  width: 16px;
  height: 16px;
}
.note-group-container.is-collapsed .note-group-collapse-icon .svg-icon {
  transform: rotate(-90deg);
}
.note-list-wrapper {
  overflow: hidden;
  transition: max-height 0.3s ease-in-out, margin-top 0.3s ease-in-out;
  max-height: 2000px; /* A large value to accommodate many notes */
  margin-top: 4px;
}
.note-group-container.is-collapsed .note-list-wrapper {
  max-height: 0;
  margin-top: 0;
}

/* --- Pull to Refresh Indicator --- */
.pm-refresh-indicator {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--icon-color);
    z-index: 5;
    opacity: 0;
    transform: translateY(-50px) scale(0.7);
    transition: transform 0.3s, opacity 0.3s;
}
.pm-refresh-indicator.is-pulling {
    opacity: 0.8;
}
.pm-refresh-indicator.is-ready {
    opacity: 1;
    transform: translateY(0) scale(1);
}

.pm-refresh-indicator.is-refreshing .svg-icon {
    animation: spin 1.2s linear infinite;
}
/* Re-use the spin animation from the refresh button */
@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}
/* --- Mobile Keyboard Handling --- */
.scratch-content.is-editing-mobile {
    padding-bottom: 45vh; /* 45% of the visible screen height */
}

/* Colors for custom icons */
.task-row .task-checkbox-symbol .svg-icon[data-lucide="map-pin"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="map-pin"] { color: var(--text-accent) !important; }
.task-row .task-checkbox-symbol .svg-icon[data-lucide="flame"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="flame"] { color: var(--text-warning) !important; }
.task-row .task-checkbox-symbol .svg-icon[data-lucide="slash"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="slash"],
.task-row .task-checkbox-symbol .svg-icon[data-lucide="piggy-bank"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="piggy-bank"],
.task-row .task-checkbox-symbol .svg-icon[data-lucide="thumbs-up"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="thumbs-up"],
.task-row .task-checkbox-symbol .svg-icon[data-lucide="trophy"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="trophy"],
.task-row .task-checkbox-symbol .svg-icon[data-lucide="arrow-up"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="arrow-up"] { color: var(--text-success) !important; }
.task-row .task-checkbox-symbol .svg-icon[data-lucide="thumbs-down"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="thumbs-down"],
.task-row .task-checkbox-symbol .svg-icon[data-lucide="arrow-down"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="arrow-down"] { color: var(--text-error) !important; }
.task-row .task-checkbox-symbol .svg-icon[data-lucide="star"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="star"],
.task-row .task-checkbox-symbol .svg-icon[data-lucide="lightbulb"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="lightbulb"] { color: var(--color-yellow) !important; }
.task-row .task-checkbox-symbol .svg-icon[data-lucide="bookmark"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="bookmark"],
.task-row .task-checkbox-symbol .svg-icon[data-lucide="info"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="info"] { color: var(--color-blue) !important; }
.task-row .task-checkbox-symbol .svg-icon[data-lucide="help-circle"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="help-circle"] { color: var(--color-cyan) !important; }
.task-row .task-checkbox-symbol .svg-icon[data-lucide="key"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="key"] { color: goldenrod !important; }
.task-row .task-checkbox-symbol .svg-icon[data-lucide="minus"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="minus"],
.task-row .task-checkbox-symbol .svg-icon[data-lucide="quote"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="quote"] { color: var(--text-muted) !important; }
.task-row .task-checkbox-symbol .svg-icon[data-lucide="arrow-right"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="arrow-right"],
.task-row .task-checkbox-symbol .svg-icon[data-lucide="arrow-left"],
.other-notes-popup-item .task-checkbox-symbol .svg-icon[data-lucide="arrow-left"] { color: var(--text-normal) !important; }

/* ==========================================================================
   WEEKEND/WEEK HIGHLIGHTING LOGIC
   ========================================================================== */

/* 1. Neutralize weekend shade inside the current week row */
.period-calendar-table tbody tr.current-week-row {
  --weekend-shade-color-themed: transparent;
}

/* 2. Regular weekend shading for SUNDAY-START weeks */
.period-month-container:not(.monday-start).weekend-shading-enabled:not(.has-pw-column):not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(1),
.period-month-container:not(.monday-start).weekend-shading-enabled:not(.has-pw-column):not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(7),
.period-month-container:not(.monday-start).weekend-shading-enabled.has-pw-column:not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(2),
.period-month-container:not(.monday-start).weekend-shading-enabled.has-pw-column:not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(8),
.period-month-container:not(.monday-start).weekend-shading-enabled.has-week-numbers:not(.has-pw-column)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(2),
.period-month-container:not(.monday-start).weekend-shading-enabled.has-week-numbers:not(.has-pw-column)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(8),
.period-month-container:not(.monday-start).weekend-shading-enabled.has-pw-column.has-week-numbers
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(3),
.period-month-container:not(.monday-start).weekend-shading-enabled.has-pw-column.has-week-numbers
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(9) {
  background-color: var(--weekend-shade-color-themed);
}

/* 3. Weekend shading for MONDAY-START weeks */
.period-month-container.monday-start.weekend-shading-enabled:not(.has-pw-column):not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(6),
.period-month-container.monday-start.weekend-shading-enabled:not(.has-pw-column):not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(7),
.period-month-container.monday-start.weekend-shading-enabled.has-pw-column:not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(7),
.period-month-container.monday-start.weekend-shading-enabled.has-pw-column:not(.has-week-numbers)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(8),
.period-month-container.monday-start.weekend-shading-enabled.has-week-numbers:not(.has-pw-column)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(7),
.period-month-container.monday-start.weekend-shading-enabled.has-week-numbers:not(.has-pw-column)
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(8),
.period-month-container.monday-start.weekend-shading-enabled.has-pw-column.has-week-numbers
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(8),
.period-month-container.monday-start.weekend-shading-enabled.has-pw-column.has-week-numbers
  .period-calendar-table tbody tr:not(.current-week-row) td:nth-child(9) {
  background-color: var(--weekend-shade-color-themed);
}

/* 4. Make day-content transparent by default */
.period-calendar-table .day-content {
  background: transparent !important;
}

/* 5. If a cell uses border styling (today/tasks), keep its background transparent */
.period-calendar-table .day-content[style*="border"] {
  background: transparent !important;
}

/* This rule highlights the header cell itself and should work as intended. */
.period-calendar-table th.column-hover {
    background: var(--row-highlight-color-themed);
    border-top-left-radius: 6px;
    border-top-right-radius: 6px;
}

/* This rule now targets the <td> element directly, just like the working row hover,
   instead of the .day-content div inside it. */
.period-calendar-table td.column-hover {
    background: var(--row-highlight-color-themed);
}

/* Ensures individual date hover is always on top */
.period-calendar-table td:not(.pw-label-cell):not(.week-number-cell):hover .day-content {
    background-color: var(--date-cell-hover-color-themed) !important;
}


/* 1. Base style for the permanent current week highlight */
.period-calendar-table tr.current-week-row .day-content {
    background-color: var(--row-highlight-color-themed);
}


.period-calendar-table tr.current-week-row td {
    background-color: var(--row-highlight-color-themed);
}
.period-calendar-table tr.row-hover:not(.current-week-row) td {
    background-color: var(--row-highlight-color-themed);
}

.tab-order-container {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 10px;
}

.draggable-item {
  display: flex;
  align-items: center;
  padding: 8px;
  background-color: var(--background-secondary-alt);
  border-radius: 6px;
  border: 1px solid var(--background-modifier-border);
  cursor: grab;
}

.draggable-item.dragging {
  opacity: 0.5;
  background-color: var(--background-modifier-hover);
}

.drag-handle {
  margin-right: 12px;
  color: var(--text-muted);
}

.setting-spacer {
  height: 20px; /* Or use margin-top, e.g., margin-top: 20px; */
}

.note-group-header-content {
  cursor: pointer;
}

.pinned-sort-indicator {
  font-size: 0.85em;
  color: var(--text-muted);
  font-weight: normal;
  margin-left: 6px;
  /* Prevents the indicator from being selected as text when clicking */
  user-select: none; 
}

/* Hide drag handles by default in main UI */
.note-row .drag-handle {
    display: none;
    margin-right: 8px;
    color: var(--text-muted);
    cursor: grab;
}

/* Show drag handles when reorder mode is active */
.pinned-notes-reorder-mode .note-row .drag-handle {
    display: flex;
    align-items: center;
}

/* Visual feedback during drag */
.note-row.dragging {
    opacity: 0.5;
    background-color: var(--background-modifier-hover);
}

/* == --- Theme Settings Tab Layout --- */
/* Main container for each task group row */
.preview-task-group {
    display: flex;
    justify-content: space-between; /* Pushes the title and count apart */
    align-items: center;
    padding: 10px 14px; /* Adjust padding to match main UI */
    margin-bottom: 8px; /* Space between rows */
    border-radius: 8px; /* Slightly more rounded corners */
}

/* Wrapper for the icon and title to keep them together */
.preview-task-content-wrapper {
    display: flex;
    align-items: center;
    gap: 10px; /* Space between the icon and the title text */
}

/* Style for the icon itself */
.preview-task-icon .svg-icon {
    width: 18px; /* Match icon size from main UI */
    height: 18px;
    stroke-width: 2.25; /* A good balance of boldness */
}

/* Style for the title text (e.g., "Overdue") */
.preview-task-title {
    font-size: var(--task-heading-font-size);
}

.theme-list-item:focus {
    border: 1px solid var(--interactive-accent);
    box-shadow: 0 0 5px var(--interactive-accent);
    outline: none; /* Prevents the default browser outline */
}

/* 1. Main container for the entire Themes tab layout */
.theme-settings-container {
    display: flex;
    gap: 20px;
    align-items: flex-start; /* CRITICAL: Aligns the tops of both columns */
}

/* 2. Left column containing the list of themes */
.theme-list-container {
    flex: 1;
}

/* 3. Right column containing the live preview */
.theme-preview-wrapper {
    flex: 2;
    position: sticky; /* Keeps preview visible on scroll */
    top: 20px;
    padding-left: 20px;
    border-left: 1px solid var(--background-modifier-border);
}

/* 4. Align the titles of both columns */
.theme-list-container > h3,
.theme-preview-wrapper > h3 {
    margin-top: 0;
    margin-bottom: 12px;
    font-weight: 600;
}

/* 5. Fix the large gap above the "October 2025" title */
.theme-preview-pane .preview-section-header {
    margin-top: 0 !important;
    padding-top: 0 !important;
}
.theme-preview-pane .preview-section-header h3 {
    margin-top: 0 !important;
}

/* Reduce the space below the task list wrapper in the preview */
.theme-preview-pane .preview-section-wrapper {
  margin-bottom: 8px; /* Default is likely 20px or more */
}

/* Reduce the space above the "DOT COLOR KEY" title */
.theme-preview-pane .preview-dot-key-container {
  margin-top: 10px; /* Default is likely 15px or more */
}

/* 6. General wrapper for sections inside the preview */
.preview-section-wrapper {
    margin-bottom: 15px;
    padding: 10px;
    border-radius: 6px;
}

/* 7. NEW: Two-column layout for the dot color key */
.preview-dot-key-container {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* Creates two equal columns */
    gap: 0 20px; /* 0px vertical gap, 20px horizontal gap */
    margin-top: 15px;
    padding-top: 0;
    border-top: none !important; /* Explicitly removes the horizontal line */
}

.preview-dot-key-container h5 {
    grid-column: 1 / -1; /* Makes the "DOT COLOR KEY" title span both columns */
    margin-bottom: 10px;
}

/* Styling for the list of theme files */
.theme-list-item {
    padding: 8px 12px;
    border-radius: 6px;
    cursor: pointer;
    margin-bottom: 4px;
    transition: background-color 0.2s ease, color 0.2s ease;
}

.theme-list-item:hover {
    background-color: var(--background-modifier-hover);
}

.theme-list-item.is-active {
    background-color: var(--interactive-accent);
    color: var(--text-on-accent);
    font-weight: 600;
}

/* --- Theme Preview --- */
/* Tab buttons for light/dark mode */
.theme-preview-tabs { display: flex; gap: 8px; margin-bottom: 12px; }
.theme-preview-tabs button { padding: 6px 12px; border: none; border-radius: var(--radius-m); cursor: pointer; background-color: var(--background-modifier-hover); color: var(--text-muted); transition: background-color 0.2s ease; }
.theme-preview-tabs button.is-active { background-color: var(--interactive-accent); color: var(--text-on-accent); font-weight: 600; }

/* Main preview pane layout */
.theme-preview-pane { padding: 15px; border-radius: 8px; border: 1px solid var(--background-modifier-border); }

/* Inner wrappers for sections */
.preview-section-wrapper { padding: 10px; border-radius: 6px; margin-bottom: 20px; }

/* Calendar layout styles */
/*
.preview-calendar-grid { width: 100%; border-collapse: collapse; font-size: 11px; }
.preview-calendar-grid th { font-weight: 600; padding-bottom: 8px; }
.preview-calendar-grid td { vertical-align: middle; text-align: center; }
.preview-day-content { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 4px; padding: 4px 0; border-radius: 6px; height: 45px; }
.preview-day-number { display: flex; align-items: center; justify-content: center; font-weight: 500; font-size: 13px; }
.preview-day-number.today { width: 2.2em; height: 2.2em; border-radius: 50%; }
.preview-dots-container { display: flex; gap: 3px; height: 4px; }
.preview-dot { width: 4px; height: 4px; border-radius: 50%; }
*/
/* Base styles for the preview grid container */
.preview-calendar-grid {
    width: 100%;
    border-collapse: collapse;
    font-size: 11px;
}
.preview-calendar-grid th {
    font-weight: 600;
    padding-bottom: 8px;
}
.preview-calendar-grid td {
    vertical-align: middle;
    text-align: center;
    height: 45px; /* Give the cell a fixed height */
}

/* 
  1. The Preview Day Content Wrapper
  This is now the positioning anchor, just like the main calendar.
*/
.preview-day-content {
    position: relative;
    width: 100%;
    height: 100%;
}

/* 
  2. The Preview Day Number
  Now uses absolute positioning to guarantee it is centered.
*/
.preview-day-number {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1; /* Sits above the highlight */
    
    font-weight: 500;
    font-size: 13px;
}

/* Style for the "today" highlight in the preview */
.preview-day-number.today {
    width: 2.2em;
    height: 2.2em;
    border-radius: 50%; /* Or 6px for a squircle */
    
    /* Use flex to center the number text INSIDE the highlight */
    display: flex;
    align-items: center;
    justify-content: center;
}

/* 
  3. The Preview Dots Container
  Now uses absolute positioning for perfect alignment.
*/
.preview-dots-container {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    
    /* 
      This 'top' value positions the dots vertically. 
      It should correspond to the 'normal' layout setting for a good preview.
    */
    top: 30px; 
    
    display: flex;
    gap: 3px;
    z-index: 2; /* Sits on top of the highlight */
}

/* Style for the individual dots in the preview */
.preview-dot {
    width: 4px;
    height: 4px;
    border-radius: 50%;
}

/* Tasks layout styles */
.preview-task-group { display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; border-radius: 6px; font-weight: 500; margin-bottom: 6px; }

.is-mobile .period-calendar-table tbody td.first-date-column::before {
    display: none;
}
.is-mobile .period-calendar-table tbody tr {
    height: auto;
}

.applied-theme-indicator .setting-item-name {
    color: var(--text-normal) !important;
}

.applied-theme-indicator .setting-item-description {
    color: var(--text-muted) !important;
}
.preview-dot-key-container {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* Creates two equal columns */
    gap: 0 20px; /* 0px vertical gap, 20px horizontal gap */
    margin-top: 15px;
    padding-top: 0;
    border-top: none !important; /* Ensures the line is removed */
}
.preview-dot-key-container h5 {
    font-weight: bold;
    margin-bottom: 10px;
}

.preview-dot-key-item {
    display: flex;
    align-items: center;
    margin-bottom: 5px;
}

.preview-dot-key-swatch {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    margin-right: 8px;
    flex-shrink: 0;
}

/* Organizes the header into a flexible container */
.popup-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* Creates a vertical stack for the title and path */
.popup-title-container {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden; /* Prevents long text from breaking the layout */
    margin-right: 10px; /* Adds space between the text and the close button */
}

/* Styles the new path element */
.popup-header-path {
    font-size: 0.8em; /* Smaller font for the path */
    color: var(--text-muted); /* Uses the theme's muted text color */
    white-space: nowrap; /* Prevents the path from wrapping */
    overflow: hidden;
    text-overflow: ellipsis; /* Adds "..." to very long paths */
}

/* In the File Info section, allow the path text to wrap */
.other-notes-popup-item .note-title-path-wrapper .note-path {
    white-space: normal; /* Allows text to wrap */
    word-break: break-all; /* Breaks long paths without spaces */
}

/* Styles the container for the 'No backlinks' message and delete button */
.other-notes-popup-item-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    background-color: var(--background-secondary-alt); /* A subtle background to distinguish it */
    border-radius: 6px;
    margin-top: 4px;
}

/*
 * Styles the "Delete File" button to be less intrusive.
 * It uses theme variables for a consistent look and feel.
 */
.other-notes-popup-item-actions button.mod-danger {
    background-color: var(--background-modifier-hover);
    border: 1px solid var(--background-modifier-border);
    color: var(--text-muted);
    font-size: 12px;
    padding: 4px 10px;
    border-radius: 5px;
    margin-left: 16px; /* Adds space between the message and the button */
    transition: all 0.2s ease-in-out;
}

/* Adds a more prominent style when hovering over the delete button */
.other-notes-popup-item-actions button.mod-danger:hover {
    background-color: var(--interactive-accent);
    color: var(--text-on-accent);
    border-color: var(--interactive-accent);
}

/*
 * Styles the wrapper for the icon and the "No backlinks" text.
 * This ensures the icon and text are aligned and spaced correctly.
 */
.other-notes-popup-item-actions > div {
    display: flex;
    align-items: center;
    gap: 8px; /* Adds space between the icon and the text */
    color: var(--text-muted); /* Uses a more subtle text color */
}

/* Ensures the full file path in the info section can wrap to multiple lines */
.other-notes-popup-item .note-title-path-wrapper .note-path {
    white-space: normal;
    word-break: break-all;
}

/* Standard clickable cursor for the file info section */
.other-notes-popup-item.is-clickable {
    cursor: pointer;
}

.popup-asset-thumbnail {
    width: 22px;
    height: 22px;
    object-fit: cover;
    border-radius: 4px;
    margin-right: 8px; /* Adds space between thumbnail and text */
}

/* Adjust the main item layout to use flexbox */
.other-notes-popup-item {
    display: flex;
    align-items: center;
}

/* --- Mobile-Specific Popup Styles --- */
@media only screen and (max-width: 600px) {

    .other-notes-popup {
        /* 
         * Sizing:
         * - Make it 90% of the viewport width.
         * - Unset the fixed min-width from the desktop rule.
         * - Ensure it doesn't get wider than 450px.
        */
        width: 90vw !important;
        min-width: unset !important;
        max-width: 450px !important;
        
        /* Positioning: Fix it to the bottom of the screen. */
        position: fixed !important;
        bottom: 8px !important;
        left: 50% !important;
        transform: translateX(-50%) !important;
        
        /* Appearance: Style it like a modern mobile bottom sheet. */
        max-height: 50vh !important; /* Prevents it from covering the whole screen. */
        border-radius: 12px 12px 0 0 !important; /* Rounds only the top corners. */
        box-shadow: 0 -4px 16px rgba(0,0,0,0.2) !important; /* Shadow to lift it off the page. */
        
        /* Reset any desktop positioning styles. */
        top: auto !important; 
        margin: 0 !important;
    }

    /* Ensure the scrollable content area has appropriate padding. */
    .popup-content-wrapper {
        padding: 8px 12px !important;
    }
}

.other-notes-popup.is-mobile-popup {
    border-radius: 12px 12px 0 0; /* Rounded top corners */
    box-shadow: 0 -4px 16px rgba(0,0,0,0.2); /* Shadow at the top */
    border-top: 1px solid var(--background-modifier-border);
}

/* --- Popup Actions --- */
.popup-actions-footer {
    display: flex;
    justify-content: flex-end;
    padding: 4px 8px; /* A little less padding for just an icon */
    margin-top: 4px;
    border-top: 1px solid var(--background-modifier-border);
    background-color: transparent !important;
}

.popup-info-message {
    display: flex;
    align-items: center;
    gap: 8px; /* Space between icon and text */
    font-size: 12px;
    color: var(--text-muted);
    /* Ensure it also has no background */
    background-color: transparent !important;
}

.other-notes-popup-item {
    background-color: transparent;
}

/* Style for the icon button itself */
.popup-action-icon-btn {
    cursor: pointer;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: background-color 0.2s ease;
}

.popup-action-icon-btn .svg-icon {
    width: 16px;
    height: 16px;
    color: var(--text-muted);
}

.popup-action-icon-btn:hover {
    background-color: var(--background-modifier-hover);
}

/* Specific danger state for delete */
.popup-action-icon-btn.mod-danger:hover {
    background-color: var(--color-red);
}

.popup-action-icon-btn.mod-danger:hover .svg-icon {
    color: var(--text-on-accent);
}

`;

// === Helper Functions and Classes ===
/**
 * Parses an "rgba(r, g, b, a)" string into an object.
 * @param {string} rgbaString The input string.
 * @returns {{r: number, g: number, b: number, a: number} | null}
 */
function parseRgbaString(rgbaString) {
    if (!rgbaString) return null;
    const match = rgbaString.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);
    if (!match) return null;
    return {
        r: parseInt(match[1], 10),
        g: parseInt(match[2], 10),
        b: parseInt(match[3], 10),
        a: match[4] !== undefined ? parseFloat(match[4]) : 1,
    };
}

/**
 * Blends two RGBA color objects based on a mix factor.
 * @param {{r,g,b,a}} color1 The start color object.
 * @param {{r,g,b,a}} color2 The end color object.
 * @param {number} factor A value from 0 (100% color1) to 1 (100% color2).
 * @returns {string} The resulting "rgba(...)" string.
 */
function blendRgbaColors(color1, color2, factor) {
    const r = Math.round(color1.r * (1 - factor) + color2.r * factor);
    const g = Math.round(color1.g * (1 - factor) + color2.g * factor);
    const b = Math.round(color1.b * (1 - factor) + color2.b * factor);
    const a = (color1.a * (1 - factor) + color2.a * factor).toFixed(2);
    return `rgba(${r}, ${g}, ${b}, ${a})`;
}

/**
 * A reusable confirmation modal dialog.
 */
class ConfirmationModal extends Modal {
    constructor(app, title, message, onConfirm, confirmText = "Confirm") {
        super(app);
        this.title = title;
        this.message = message;
        this.onConfirm = onConfirm;
        this.confirmText = confirmText;
    }

    onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h1", { text: this.title });
        contentEl.createEl("p", { text: this.message });
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });

        buttonContainer.createEl("button", {
            text: this.confirmText,
            cls: "mod-cta",
        }).addEventListener("click", () => {
            this.close();
            this.onConfirm();
        });

        buttonContainer.createEl("button", {
            text: "Cancel",
        }).addEventListener("click", () => {
            this.close();
        });
    }

    onClose() {
        this.contentEl.empty();
    }
}

/* A modal dialog that presents multiple action choices to the user when creating a new daily note. */
class ActionChoiceModal extends Modal {
    constructor(app, title, message, buttons) {
        super(app);
        this.title = title;
        this.message = message;
        this.buttons = buttons;
    }

    onOpen() {
        const { contentEl } = this;
        contentEl.createEl('h2', { text: this.title });
        if (this.message) {
            contentEl.createEl('p', { text: this.message });
        }

        const buttonContainer = contentEl.createDiv({ cls: 'modal-button-container' });

        for (const buttonConfig of this.buttons) {
            const btn = buttonContainer.createEl('button', { text: buttonConfig.text });
            if (buttonConfig.cls) {
                btn.addClass(buttonConfig.cls);
            }
            btn.addEventListener('click', () => {
                this.close();
                if (buttonConfig.action) {
                    buttonConfig.action();
                }
            });
        }
    }

    onClose() {
        this.contentEl.empty();
    }
}

/**
 * Calculates the custom period and week number based on a given start date.
 * A year is divided into 13 periods of 4 weeks each.
 * @param {Date} date - The date to calculate for.
 * @param {string} startOfPeriodsOverride - The start date in "YYYY-MM-DD" format from settings.
 * @returns {{period: number, week: number, weekSinceStart: number}} An object with the period, week, and total weeks since start.
 */
function getPeriodWeek(date = new Date(), startOfPeriodsOverride) {
    const defaultStartString = "2025-03-02";
    let startString = startOfPeriodsOverride || defaultStartString;

    let startMoment = moment(startString, "YYYY-MM-DD", true);

    if (!startMoment.isValid()) {
        console.warn(
            `[Calendar Period Week Notes] Invalid "Start of Period 1" date format: "${startString}". ` +
            `It must be YYYY-MM-DD. Falling back to default date ${defaultStartString}.`
        );
        startMoment = moment(defaultStartString, "YYYY-MM-DD", true);
    }

    // Use moment's built-in diff method to correctly calculate the number of
    // calendar days. This automatically handles Daylight Saving Time and other offsets.
    const daysSinceStart = moment(date).startOf('day').diff(startMoment.startOf('day'), 'days');
    const weekNumber = Math.floor(daysSinceStart / 7);
    const periodIndex = Math.floor(weekNumber / 4);
    const period = ((periodIndex % 13) + 13) % 13 + 1;
    const week = ((weekNumber % 4) + 4) % 4 + 1;

    return { period, week, weekSinceStart: weekNumber + 1 };
}

/**
 * Parses a file's content to find all tasks and their metadata.
 * @param {TFile} file The file to parse.
 * @param {string} content The content of the file.
 * @returns {Array<object>} An array of structured task objects.
 */
function parseTasksFromFile(file, content) {
    const tasks = [];
    const lines = content.split('\n');

    const taskRegex = /^\s*(?:-|\d+\.)\s*\[(.)\]\s*(.*)/;
    const dueDateRegex = /📅\s*(\d{4}-\d{2}-\d{2})/;
    const completionDateRegex = /✅\s*(\d{4}-\d{2}-\d{2})/;
    const tagRegex = /#([a-zA-Z0-9_\-\/]+)/g;

    lines.forEach((line, index) => {
        const match = line.match(taskRegex);
        if (match) {
            const status = match[1];
            const text = match[2];
            const isCompleted = status.toLowerCase() === 'x';

            const dueDateMatch = text.match(dueDateRegex);
            const dueDate = dueDateMatch ? moment(dueDateMatch[1], "YYYY-MM-DD").toDate() : null;

            const completionDateMatch = text.match(completionDateRegex);
            const completionDate = completionDateMatch ? moment(completionDateMatch[1], "YYYY-MM-DD").toDate() : null;

            const tags = Array.from(text.matchAll(tagRegex)).map(m => m[1]);

            let displayText = text.trim();
            // Optionally clean up the display text
            if (!isCompleted) {
                displayText = displayText.replace(completionDateRegex, '').trim();
            }

            tasks.push({
                text: displayText,
                originalText: text, // Keep original text for modifications
                file,
                lineNumber: index,
                dueDate,
                tags,
                status,
                completionDate
            });
        }
    });
    return tasks;
}

/**
 * Formats a date to show time if it's today, otherwise shows the full date.
 * @param {Date} date The date to format.
 * @returns {string} The formatted date string.
 */
function formatDateTime(date) {
    const now = new Date();
    if (isSameDay(date, now)) return moment(date).format('HH:mm');
    return moment(date).format('DD-MM-YYYY');
}

// Utility wrappers around moment.js for consistent date handling.
function formatDate(date, format) { return moment(date).format(format); }
function formatMonthTitle(date, format) { return moment(date).format(format); }
function isSameDay(a, b) { return moment(a).isSame(b, 'day'); }

class ConfirmationModalWithStyles extends ConfirmationModal {
    onOpen() {
        super.onOpen();

        const { contentEl } = this;

        // Style the main content container
        contentEl.style.padding = '20px 24px';
        contentEl.style.textAlign = 'center';

        // Style the title using CSS variables
        const titleEl = contentEl.querySelector('h1, h2');
        if (titleEl) {
            titleEl.style.marginBottom = '16px';
            titleEl.style.fontSize = '1.3rem';
            // Use the primary text color variable
            titleEl.style.color = 'var(--text-normal)';
        }

        // Style the message paragraph using CSS variables
        const messageEl = contentEl.querySelector('p');
        if (messageEl) {
            messageEl.style.lineHeight = '1.6';
            messageEl.style.marginBottom = '24px';
            messageEl.style.fontSize = '1rem';
            // Use the muted text color variable for secondary text
            messageEl.style.color = 'var(--text-muted)';
        }

        // Style the button container
        const buttonContainer = contentEl.querySelector('.modal-button-container');
        if (buttonContainer) {
            buttonContainer.style.display = 'flex';
            buttonContainer.style.justifyContent = 'center';
            buttonContainer.style.gap = '12px';
        }

        // Style the primary confirmation button
        const confirmButton = contentEl.querySelector('.mod-cta');
        if (confirmButton) {
            confirmButton.style.fontWeight = '600';
        }
    }

}

/**
 * The main view class for the plugin, handling all rendering and user interaction.
 */
class PeriodMonthView extends ItemView {
    constructor(leaf, plugin) {
        super(leaf);
        this.plugin = plugin;
        this.themeChangeDebounceTimer = null;
        this.calendarHeaderRowEl = null;
        this.pinnedSortOrder = this.plugin.settings.pinnedNotesSortOrder;
        this.blurActiveInput = this.blurActiveInput.bind(this);

        //pull down to fresh
        this.taskPullStartY = 0;
        this.taskPullDistance = 0;
        this.isTaskPulling = false;

        // --- State Management ---
        this.displayedMonth = new Date(); // The month currently shown in the calendar.
        this.isVerticalView = false;      // Toggles between single-month and vertical scroll view.
        this.isPopupLocked = false;       // Tracks if popups are globally disabled
        this.isCalendarCollapsed = false; // Toggles the visibility of the calendar grid.
        this.calendarWasCollapsedForEditing = false;
        this.isCollapseTogglePressed = false;
        this.isScratchpadPreview = false; // Toggles scratchpad between edit and preview mode.
        this.activeTab = null;            // Tracks the currently selected tab ('scratch', 'notes', etc.).
        this.isProgrammaticScroll = false; // Prevents scroll event loops during programmatic scrolling.
        this.isDraggingNote = false;      // Tracks if a note is currently being dragged for reordering.
        this.isMouseDown = false;         // Tracks if the mouse button is currently pressed.

        // --- Search and Data States ---
        this.notesViewMode = this.plugin.settings.notesViewMode;
        this.notesSearchTerm = "";
        this.tasksSearchTerm = "";
        this.scratchpadSearchTerm = "";
        this.assetsSearchTerm = "";
        this.collapsedNoteGroups = this.plugin.settings.collapsedNoteGroups || {};
        this.collapsedTaskGroups = this.plugin.settings.collapsedTaskGroups || {};
        this.collapsedAssetGroups = this.plugin.settings.collapsedAssetGroups || {};

        // --- Caching and Data Maps ---
        // These maps store pre-processed data to avoid re-scanning the vault on every render.
        this.noteText = "";
        this.allTasks = [];
        this.createdNotesMap = new Map();
        this.modifiedNotesMap = new Map();
        this.assetCreationMap = new Map();
        this.tasksByDate = new Map();
        this.icsEventsByDate = new Map();
        this.processedEventSignatures = new Set();
        this.taskCache = new Map(); // Caches task content of files to detect changes.
        this.fileToTaskDates = new Map(); // Tracks which dates a file has tasks for. <filePath, Set<dateKey>>
        this.isAssetsGridView = this.plugin.settings.assetsDefaultView === 'grid';
        this.unusedAssetPathsCache = new Set();
        this.isUnusedAssetCacheValid = false;

        // --- UI and Event Handling ---
        this.todayBtn = null;
        this.scratchWrapperEl = null;
        this.scratchpadViewToggleBtn = null;
        this.hoverTimeout = null;
        this.hideTimeout = null;
        this.popupEl = null;
        this.taskRefreshDebounceTimer = null;
        this.notesRefreshDebounceTimer = null;
        this.calendarRefreshDebounceTimer = null;
        this.titleUpdateTimeout = null;
        this.existingWeeklyNotes = new Set();
        this.dailyRefreshTimeout = null; // Timeout to trigger daily refresh at midnight
        this.themeObserver = null;
        this.lastKnownToday = new Date();

        // --- Mobile Keyboard Handling ---
        this.isEditingMobile = false;

        // --- Icon Mapping for Task Statuses ---
        // Maps task status symbols to Lucide icon names.
        this.taskStatusIconMap = {
            // Standard Tasks
            '/': 'slash',       // In Progress
            '-': 'minus',       // Cancelled
            '>': 'arrow-right', // Forwarded
            '<': 'arrow-left',  // Scheduling
            // Extended Tasks from your list
            '?': 'help-circle', // Question
            '!': 'flame',       // Important
            '*': 'star',        // Star
            '"': 'quote',       // Quote
            'l': 'map-pin',     // Location
            'b': 'bookmark',    // Bookmark
            'i': 'info',        // Information
            'S': 'piggy-bank',  // Savings
            'I': 'lightbulb',   // Idea
            'p': 'thumbs-up',   // Pros
            'c': 'thumbs-down', // Cons
            'f': 'flame',       // Fire (using 'flame' as 'siren' can be too strong)
            'k': 'key',         // Key
            'w': 'trophy',      // Win
            'u': 'arrow-up',    // Up
            'd': 'arrow-down',  // Down
        };

        // Initialize a MutationObserver to watch for theme changes.
        this.themeObserver = new MutationObserver(() => {
            // Debounce the re-render to avoid multiple calls during theme switching.
            if (this.themeChangeDebounceTimer) {
                clearTimeout(this.themeChangeDebounceTimer);
            }
            this.themeChangeDebounceTimer = setTimeout(() => {
                // If the calendar grid exists, re-render it to apply new theme colors.
                if (this.calendarBodyEl) {
                    this.renderCalendar();
                }
            }, 100); // A 100ms delay is usually sufficient.
        });

        // Start observing the `class` attribute on the document body.
        this.themeObserver.observe(document.body, {
            attributes: true,
            attributeFilter: ['class']
        });

        this.registerDomEvent(document, 'mouseup', () => {
            // Always reset the mousedown flag.
            if (this.isMouseDown) {
                this.isMouseDown = false;
            }
            // Also, critically, reset the dragging flag as a safety net.
            // This prevents the flag from getting stuck if dragend doesn't fire.
            if (this.isDraggingNote) {
                this.isDraggingNote = false;
            }
        });
    }

    _renderTaskSymbol(checkboxEl, task) {
        checkboxEl.empty();
        checkboxEl.className = 'task-checkbox-symbol'; // Reset classes

        const status = task.status;
        const iconName = this.taskStatusIconMap[status];

        // Case 1: Task is completed
        if (status.toLowerCase() === 'x') {
            setIcon(checkboxEl, 'check');
            checkboxEl.addClass('is-completed');
            checkboxEl.style.width = '1.25em';
            checkboxEl.style.height = '1.25em';

            checkboxEl.style.backgroundColor = 'var(--interactive-accent)';
            checkboxEl.style.border = 'none';
            checkboxEl.style.borderRadius = '50%';

            const svgEl = checkboxEl.querySelector('.svg-icon');
            if (svgEl) {
                svgEl.style.width = '75%';
                svgEl.style.height = '75%';
                svgEl.style.fill = 'none'; // Do not fill the shape
                svgEl.style.stroke = 'var(--text-on-accent)'; // Use high-contrast color for the line
                svgEl.style.strokeWidth = '3px'; // Make the line thick and clear
                svgEl.style.color = 'unset'; // Unset color to prevent conflicts
            }

            // Case 2: Task has a custom icon
        } else if (iconName) {
            setIcon(checkboxEl, iconName);
            const color = this.getIconColor(iconName);
            const svgEl = checkboxEl.querySelector('.svg-icon');
            if (svgEl) {
                svgEl.style.color = color;
                svgEl.style.fill = 'currentColor';
                svgEl.style.stroke = 'none';
            }
            checkboxEl.style.width = '1.25em';
            checkboxEl.style.height = '1.25em';
            checkboxEl.style.backgroundColor = 'transparent';
            checkboxEl.style.border = 'none';
            checkboxEl.style.borderRadius = '0';

            // Case 3: Default task (e.g., incomplete)
        } else {
            checkboxEl.setText(status.trim() || ' ');
            checkboxEl.style.width = '1.15em';
            checkboxEl.style.height = '1.15em';
            checkboxEl.style.backgroundColor = 'transparent';
            checkboxEl.style.color = 'var(--text-normal)';
            checkboxEl.style.borderRadius = '50%';
            checkboxEl.style.border = '1px solid var(--text-faint)';
        }
    }

    blurActiveInput() {
        setTimeout(() => {
            const activeEl = document.activeElement;

            // Check if it's an element that can be blurred before calling the method
            if (activeEl instanceof HTMLElement && typeof activeEl.blur === 'function') {
                activeEl.blur();
            }
        }, 0);
    }

    handleThemeChange() {
        // This function forces a re-render of the calendar grid,
        // ensuring all theme-dependent styles are reapplied correctly.
        if (this.calendarBodyEl) {
            this.renderCalendar();
        }
    }

    /**
     * The single source of truth for collapsing or expanding the calendar view.
     * @param {boolean} shouldBeCollapsed - The desired state. True to collapse, false to expand.
     */
    toggleCalendar(shouldBeCollapsed) {
        // If the UI is already in the desired state, do nothing.
        if (this.isCalendarCollapsed === shouldBeCollapsed) {
            return;
        }

        this.isCalendarCollapsed = shouldBeCollapsed;

        // Toggle the main CSS class that controls the collapse animation.
        // The CSS will automatically handle rotating the chevron icon.
        if (this.containerEl && this.containerEl.firstElementChild) {
            this.containerEl.firstElementChild.classList.toggle('calendar-collapsed', shouldBeCollapsed);
        }
    }

    setupReorderMode() {
        const isMac = Platform.isMacOS;
        let isReorderMode = false;

        const handleKeyDown = (e) => {
            // Use Alt key (Option on Mac) or Ctrl key (Control on Windows)
            const isModifierPressed = isMac ? e.altKey : e.ctrlKey;

            // Only activate if we're in pinned notes view AND custom sort is selected
            if (isModifierPressed && !isReorderMode &&
                this.notesViewMode === 'pinned' &&
                this.pinnedSortOrder === 'custom') {

                isReorderMode = true;
                this.containerEl.addClass('pinned-notes-reorder-mode');
                //new Notice(`Reorder mode active (${modifierKeyName}) - drag to rearrange`);
            } else if (isModifierPressed && !isReorderMode &&
                this.notesViewMode === 'pinned' &&
                this.pinnedSortOrder !== 'custom') {
                // Show message if user tries to activate reorder mode when not in custom sort
                new Notice(`Switch to Custom sort order to enable drag reordering`);
            }
        };

        const handleKeyUp = (e) => {
            const wasModifierReleased = isMac ? !e.altKey : !e.ctrlKey;

            if (wasModifierReleased && isReorderMode) {
                isReorderMode = false;
                this.containerEl.removeClass('pinned-notes-reorder-mode');
                //new Notice('Reorder mode disabled');
            }
        };

        // Register the listeners using Obsidian's API for proper cleanup
        this.registerDomEvent(document, 'keydown', handleKeyDown);
        this.registerDomEvent(document, 'keyup', handleKeyUp);
    }

    /**
    * Navigates the calendar to the current month with a smooth scroll animation
    * in the vertical view. It forces a re-render to ensure the target element
    * exists before scrolling.
    */
    async goToCurrentMonth() {
        const now = new Date();
        // Using moment.js for a reliable month comparison
        const isAlreadyCurrentMonth = moment(this.displayedMonth).isSame(now, 'month');

        if (isAlreadyCurrentMonth) {
            // If already on the current month, toggle the popup lock.
            this.isPopupLocked = !this.isPopupLocked;
            this.todayBtn.classList.toggle('popup-locked', this.isPopupLocked);
            new Notice(`Calendar popups ${this.isPopupLocked ? 'disabled' : 're-enabled'}.`);
            this.updateTodayBtnAriaLabel();
            return;
        }

        // Reset the internal state to today's date first.
        this.displayedMonth = new Date(now.getFullYear(), now.getMonth(), 1);

        if (this.isVerticalView) {
            // Re-render the entire view to ensure the current month is in the DOM.
            await this.render();

            // Use a small timeout to wait for the DOM to update after the render.
            setTimeout(() => {
                const targetMonthId = `month-${this.displayedMonth.getFullYear()}-${this.displayedMonth.getMonth()}`;
                const targetEl = this.verticalScrollerEl?.querySelector(`#${targetMonthId}`);

                if (targetEl) {
                    targetEl.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            }, 100); // A 100ms delay is usually sufficient for the DOM to update.

        } else {
            // The horizontal view's logic remains the same.
            await this.changeMonth(0, true);
        }
    }

    getIconColor(iconName) {
        switch (iconName) {
            case 'map-pin':
                return 'var(--text-accent)'; // Red
            case 'flame':
                return 'var(--text-warning)'; // Orange
            case 'slash':
            case 'piggy-bank':
            case 'thumbs-up':
            case 'trophy':
            case 'arrow-up':
                return 'var(--text-success)'; // Green
            case 'thumbs-down':
            case 'arrow-down':
                return 'var(--text-error)'; // Muted Red
            case 'star':
            case 'lightbulb':
                return 'var(--color-yellow)'; // Yellow
            case 'bookmark':
            case 'info':
                return 'var(--color-blue)'; // Blue
            case 'help-circle':
                return 'var(--color-cyan)'; // Cyan
            case 'key':
                return 'goldenrod'; // Gold
            case 'minus':
            case 'quote':
                return 'var(--text-muted)'; // Grey
            default:
                return 'var(--text-normal)'; // Default color for arrows, etc.
        }
    }

    /**
     * Applies font size settings as CSS variables to the view's root element,
     * allowing all CSS rules to update dynamically.
     */
    applyFontSettings() {
        if (!this.containerEl) return;

        // Get values from settings, providing default fallbacks.
        const labelFontSize = this.plugin.settings.fontSize || '12px';
        const dayNumberFontSize = this.plugin.settings.dayNumberFontSize || '15px';

        // Set the CSS variables on the main container element for this view.
        this.containerEl.style.setProperty('--calendar-label-font-size', labelFontSize);
        this.containerEl.style.setProperty('--calendar-day-number-font-size', dayNumberFontSize);
    }

    async handleFileClick(file, event) {
        // The Shift key is the ultimate override. If it's pressed, always open in a new leaf.
        if (event.shiftKey) {
            await this.app.workspace.openLinkText(file.path, '', true);
            return;
        }

        // --- If Shift is NOT pressed, proceed with normal logic ---
        const isAsset = file.extension.toLowerCase() !== 'md';

        if (isAsset) {
            // It's an asset, so respect the user's default setting for assets.
            const openInNewTab = this.plugin.settings.assetsOpenAction === 'new-tab';
            await this.app.workspace.openLinkText(file.path, '', openInNewTab);
        } else {
            // It's a note file. Here we must check for an existing open leaf.
            const markdownLeaves = this.app.workspace.getLeavesOfType("markdown");
            const existingLeaf = markdownLeaves.find(leaf => leaf.view.file?.path === file.path);

            if (existingLeaf) {
                // The note is already open, so just focus on that leaf.
                this.app.workspace.setActiveLeaf(existingLeaf);
            } else {
                // The note is not open, so respect the user's default setting for notes.
                const openInNewTab = this.plugin.settings.notesOpenAction === 'new-tab';
                await this.app.workspace.getLeaf(openInNewTab).openFile(file);
            }
        }
    }

    /**
     * Renders a single note item row in a given container.
     * @param {TFile} file The note file to render.
     * @param {HTMLElement} container The parent element to append the row to.
     */
    renderNoteItem(file, container) {
        const settings = this.plugin.settings;
        const searchInputEl = this.notesSearchInputEl;

        const row = container.createDiv({ cls: 'note-row' });
        row.dataset.filePath = file.path;

        // --- ENHANCEMENT: Set mousedown flag and hide any open popup ---
        row.addEventListener('mousedown', () => {
            this.isMouseDown = true;
            this.hideFilePopup(); // Immediately hide any visible popup
        });

        let isDragging = false;
        let longPressOccurred = false;
        const isReorderable = this.notesViewMode === 'pinned' && this.pinnedSortOrder === 'custom';

        if (isReorderable) {
            row.draggable = true;
            const dragHandle = row.createDiv({ cls: 'drag-handle' });
            setIcon(dragHandle, 'grip-vertical');

            row.addEventListener('dragstart', (e) => {
                isDragging = true;
                this.isDraggingNote = true;
                e.dataTransfer.setData('text/plain', file.path);
                e.dataTransfer.effectAllowed = 'move';
                setTimeout(() => row.addClass('dragging'), 0);
            });

            row.addEventListener('dragend', async () => {
                row.removeClass('dragging');
                this.isDraggingNote = false;
                setTimeout(() => { isDragging = false; }, 50);
                await this.savePinnedOrder(container);
            });

            row.addEventListener('dragover', (e) => {
                e.preventDefault();
                const dragging = container.querySelector('.dragging');
                if (dragging && dragging !== row) {
                    const rect = row.getBoundingClientRect();
                    const isAfter = e.clientY > rect.top + rect.height / 2;
                    row.parentNode.insertBefore(dragging, isAfter ? row.nextSibling : row);
                }
            });
        }

        const titleWrapper = row.createDiv({ cls: 'note-title-wrapper' });

        // --- Popup and Long-Press Logic ---
        if (Platform.isMobile) {
            let touchTimer;
            row.addEventListener('touchstart', (e) => {
                if (this.isDraggingNote) return;
                longPressOccurred = false;
                touchTimer = setTimeout(() => {
                    longPressOccurred = true;
                    if (isReorderable) {
                        if (navigator.vibrate) navigator.vibrate(50);
                        new Notice('Drag to reorder');
                    } else {
                        this.showNotePopup(row, file);
                    }
                }, 500);

                const cancelTimer = () => clearTimeout(touchTimer);
                row.addEventListener('touchend', cancelTimer, { once: true });
                row.addEventListener('touchmove', cancelTimer, { once: true });
            });
        } else if (settings.showNoteTooltips) {
            let hoverTimeout;
            row.addEventListener('mouseenter', () => {
                if (this.isDraggingNote) {
                    return;
                }
                clearTimeout(this.hideTimeout);
                this.hideFilePopup();
                hoverTimeout = setTimeout(() => {
                    // When the timer fires, do a final check: is the mouse button still down?
                    // If the user started a click/drag on this or another element and is still holding, don't show the popup.
                    if (this.isMouseDown) {
                        return;
                    }
                    this.showNotePopup(row, file);
                }, settings.otherNoteHoverDelay);

            });
            row.addEventListener('mouseleave', () => {
                clearTimeout(hoverTimeout);
                this.hideTimeout = setTimeout(() => this.hideFilePopup(), settings.popupHideDelay);
            });
        }

        if (settings.showNoteStatusDots) {
            const dot = titleWrapper.createDiv({ cls: 'note-status-dot' });
            if (this.isDailyNote(file)) {
                dot.style.backgroundColor = settings.dailyNoteDotColor;
            } else if (this.isWeeklyNote(file)) {
                dot.style.backgroundColor = settings.weeklyNoteDotColor;
            } else {
                dot.addClass(isSameDay(new Date(file.stat.ctime), new Date(file.stat.mtime)) ? 'note-status-dot-created' : 'note-status-dot-modified');
            }
        }

        const titlePathWrapper = titleWrapper.createDiv({ cls: 'note-title-path-wrapper' });
        titlePathWrapper.createDiv({ text: file.basename, cls: 'note-title' });
        if (file.parent && file.parent.path !== '/') {
            titlePathWrapper.createDiv({ text: file.parent.path, cls: 'note-path' });
        }

        row.createDiv({ text: formatDate(new Date(file.stat.mtime), 'DD-MM-YYYY'), cls: 'note-mod-date' });

        // The 'drop' event listener that was here has been removed.
        // The new handler on the parent container in `populateNotes` now manages saving.
        row.addEventListener('click', (e) => {
            // The isDragging flag is now correctly scoped and will prevent clicks after a drag.
            if (longPressOccurred || isDragging) {
                return;
            }
            if (e.target.closest('.drag-handle')) {
                return;
            }
            this.handleFileClick(file, e);
        });

        this.addKeydownListeners(row, searchInputEl);
        return row;

    }

    async savePinnedOrder(container) {
        // Add this line for debugging. You should see this notice pop up.
        const noteRows = container.querySelectorAll('.note-row');
        const newOrder = Array.from(noteRows).map(row => row.dataset.filePath);

        // Update the settings with the new order
        this.plugin.settings.pinnedNotesCustomOrder = newOrder;

        // Set the active sort mode to 'custom' since a manual sort just happened
        this.pinnedSortOrder = 'custom';

        await this.plugin.saveSettings();

        // Refresh the view to ensure the header's sort indicator is updated
        await this.populateNotes();
    }

    /**
     * Formats a list of calendar events into a markdown string for template insertion.
     * @param {-} events 
     * @returns 
     */
    formatEventsForTemplate(events) {
        if (!events || events.length === 0) {
            return "";
        }

        // Retrieve the user-defined format from settings
        const formatString = this.plugin.settings.calendarEventsFormat || '- {{startTime}} - {{endTime}}: {{summary}}';

        // Sort events
        events.sort((a, b) => {
            if (a.isAllDay && !b.isAllDay) return -1;
            if (!a.isAllDay && b.isAllDay) return 1;
            if (a.isAllDay && b.isAllDay) return a.summary.localeCompare(b.summary);
            if (!a.startTime || !b.startTime) return 0;
            return a.startTime.localeCompare(b.startTime);
        });

        // Map each event to its formatted string
        const eventStrings = events.map(event => {
            let finalString;

            if (event.isAllDay) {
                // For all-day events, replace the time placeholders with "All-day"
                // This regex looks for {{startTime}}, optional whitespace, a separator, optional whitespace, and {{endTime}}
                const timePlaceholderRegex = /{{\s*startTime\s*}}.*{{\s*endTime\s*}}/;

                finalString = formatString.replace(timePlaceholderRegex, 'All-day');

                // Now, replace the summary as usual
                finalString = finalString.replace(/{{summary}}/g, event.summary || '');

            } else {
                // For timed events, use the original logic
                const startTime = event.startTime || '';
                const endTime = event.endTime || '';

                finalString = formatString
                    .replace(/{{startTime}}/g, startTime)
                    .replace(/{{endTime}}/g, endTime)
                    .replace(/{{summary}}/g, event.summary || '');
            }

            // Trim any leftover whitespace or dangling separators
            return finalString.replace(/\s*:\s*$/, '').replace(/\s*-\s*$/, '').trim();
        });

        // Join the array of event strings with a double newline
        const eventBody = eventStrings.join('\n\n');

        // Construct the final output
        return eventBody;
    }

    /**
     * Schedules a refresh to occur at the next midnight.
     */
    scheduleDailyRefresh() {
        // Clear any existing timer to avoid duplicates
        if (this.dailyRefreshTimeout) {
            clearTimeout(this.dailyRefreshTimeout);
        }

        const now = moment();
        const endOfDay = moment().endOf('day');
        // Calculate milliseconds until the end of today, plus one to tick over to the new day
        const msUntilMidnight = endOfDay.diff(now) + 1;

        this.dailyRefreshTimeout = setTimeout(async () => {

            // Re-calculate all task due dates relative to the new "today"
            await this.buildTasksByDateMap();

            // Re-render the calendar to update heatmaps, badges, and today's highlight
            this.renderCalendar();

            // If the user is currently looking at the tasks tab, refresh its view
            if (this.activeTab === 'tasks') {
                await this.populateTasks();
            }

            // IMPORTANT: Schedule the next refresh for the following day
            this.scheduleDailyRefresh();

        }, msUntilMidnight);
    }

    handleViewportResize() {
        // This logic should only run on mobile
        if (!this.app.isMobile) return;

        // A threshold of 200px is a safe bet to assume the keyboard is open.
        // We compare the total window height with the currently visible area's height.
        const keyboardVisible = window.innerHeight - window.visualViewport.height > 200;

        // Toggle the class on the main plugin container
        this.containerEl.firstElementChild.classList.toggle('keyboard-visible', keyboardVisible);
    }

    async animateTaskGroup(taskListWrapper, expand) {
        // Cancel any ongoing animation on this element
        if (taskListWrapper.animation) {
            taskListWrapper.animation.cancel();
        }

        if (expand) {
            // --- EXPANDING ---
            // 1. Make the element visible so we can measure it.
            taskListWrapper.style.display = 'grid';

            // 2. READ: Get the full, unconstrained height of the content.
            const endHeight = taskListWrapper.scrollHeight;

            // 3. ANIMATE: Animate from a height of 0 to the full height.
            taskListWrapper.animation = taskListWrapper.animate([
                { height: '0px', opacity: 0 },
                { height: `${endHeight}px`, opacity: 1 }
            ], {
                duration: 350,
                easing: 'ease-in-out',
                fill: 'forwards'
            });

            // After the animation, set height to 'auto' to allow content to resize dynamically.
            taskListWrapper.animation.onfinish = () => {
                taskListWrapper.style.height = 'auto';
            };

        } else {
            // --- COLLAPSING ---
            // 1. READ: Get the current height of the element before collapsing.
            const startHeight = taskListWrapper.offsetHeight;

            // 2. ANIMATE: Animate from the current height down to 0.
            taskListWrapper.animation = taskListWrapper.animate([
                { height: `${startHeight}px`, opacity: 1 },
                { height: '0px', opacity: 0 }
            ], {
                duration: 350,
                easing: 'ease-in-out',
                fill: 'forwards'
            });

            // After the animation, hide the element completely.
            taskListWrapper.animation.onfinish = () => {
                taskListWrapper.style.display = 'none';
            };
        }
    }

    getViewType() { return VIEW_TYPE_PERIOD; }
    getDisplayText() { return "📅 Calendar Period Week Notes"; }
    getIcon() { return "calendar-check"; }

    async buildWeeklyNotesCache() {
        if (!this.plugin.settings.enableWeeklyNotes) return;
        this.existingWeeklyNotes.clear();
        const folderPath = this.plugin.settings.weeklyNoteFolder;
        const folder = this.app.vault.getAbstractFileByPath(folderPath);
        if (folder instanceof TFolder) {
            for (const file of folder.children) {
                if (file instanceof TFile && file.extension === 'md') {
                    this.existingWeeklyNotes.add(file.path);
                }
            }
        }
    }

    async refreshIcsEvents() {
        const { requestUrl, Notice } = require('obsidian');

        // This check is now redundant since ICAL is bundled, but it's safe to keep.
        if (!ICALmodule) {
            console.error("ical.js library not bundled correctly.");
            return;
        }

        this.icsEventsByDate.clear();
        this.processedEventSignatures.clear();

        const icsUrl = this.plugin.settings.icsUrl;
        if (!icsUrl) {
            if (this.isCalendarRendered) this.renderCalendar();
            return;
        }

        try {
            const response = await requestUrl({ url: icsUrl });
            const icalData = response.text;
            const calendar = new ICALmodule.Component(ICALmodule.parse(icalData));
            const icalEndDate = ICALmodule.Time.fromJSDate(moment().add(2, 'years').toDate());
            const icalStartDate = ICALmodule.Time.fromJSDate(moment().subtract(1, 'year').toDate());

            const events = calendar.getAllSubcomponents('vevent');
            for (const vevent of events) {
                const event = new ICALmodule.Event(vevent);

                // Add a check to skip any null or undefined event objects
                // that result from malformed data in the ICS feed.
                if (!event) {
                    continue;
                }

                if (event.recurrenceId) {
                    this.addParsedEvent({ item: event }, false);
                } else if (event.isRecurring()) {
                    const iterator = event.iterator();
                    let next;
                    while ((next = iterator.next()) && next.compare(icalEndDate) <= 0) {
                        if (next.compare(icalStartDate) < 0) continue;

                        const occurrence = event.getOccurrenceDetails(next);
                        this.addParsedEvent(occurrence, true);
                    }
                } else {
                    this.addParsedEvent({ item: event }, false);
                }
            }
        } catch (error) {
            new Notice(`Calendar Period Week Notes - ICS error: ${error.message}`, 10000);
            console.error("A detailed ICS parsing error occurred:", error);
        }

        if (this.isCalendarRendered) this.renderCalendar();
    }

    /**
     *  Adds a parsed ICAL event occurrence to the events map, handling de-duplication.
     *  This method uses a hybrid approach to de-duplication:
     *  - For recurring instances, it uses a combination of UID and recurrenceId.
     *  - For single events, it uses a content-based signature (summary, start, end).   
     * 
     * @param {*} occurrence 
     * @param {*} isRecurringInstance 
     * @returns 
     */
    addParsedEvent(occurrence, isRecurringInstance) {
        const { item } = occurrence;
        if (!item) return;

        if (isRecurringInstance) {
            // For recurring instances, the UID is the UID of the parent event, and the
            // recurrenceId makes it unique. We create a signature from both.
            const recurrenceSignature = `${item.uid}:${occurrence.recurrenceId.toString()}`;
            if (this.processedEventSignatures.has(recurrenceSignature)) {
                return; // Skip duplicate recurring instance
            }
            this.processedEventSignatures.add(recurrenceSignature);
        } else {
            const singleEventSignature = `${item.summary}:${item.startDate.toString()}:${item.endDate.toString()}`;
            if (this.processedEventSignatures.has(singleEventSignature)) {
                return; // Skip duplicate single event
            }
            this.processedEventSignatures.add(singleEventSignature);
        }

        const startMoment = moment(occurrence.startDate ? occurrence.startDate.toJSDate() : item.startDate.toJSDate());
        const endMoment = moment(occurrence.endDate ? occurrence.endDate.toJSDate() : item.endDate.toJSDate());

        const isAllDay = item.startDate.isDate;
        if (isAllDay) {
            endMoment.subtract(1, 'second');
        }

        const eventData = {
            uid: item.uid,
            summary: item.summary,
            isAllDay: isAllDay,
            startTime: isAllDay ? null : startMoment.format('HH:mm'),
            endTime: isAllDay ? null : endMoment.format('HH:mm')
        };

        let currentDay = startMoment.clone().startOf('day');
        while (currentDay.isSameOrBefore(endMoment.startOf('day'))) {
            const dateKey = currentDay.format('YYYY-MM-DD');

            if (!this.icsEventsByDate.has(dateKey)) {
                this.icsEventsByDate.set(dateKey, []);
            }

            // Final simple check to prevent adding the exact same object twice in the loop
            if (!this.icsEventsByDate.get(dateKey).some(e => e.uid === eventData.uid && e.summary === eventData.summary)) {
                this.icsEventsByDate.get(dateKey).push(eventData);
            }

            currentDay.add(1, 'day');
        }
    }

    async openWeeklyNote(dateInfo) {
        // --- Start of Debugging ---
        if (!dateInfo || typeof dateInfo.year === 'undefined') {
            console.error("Weekly Note Error: Invalid dateInfo object received.", dateInfo);
            new Notice("Could not create weekly note due to an internal error. Check console for details.");
            return;
        }
        // --- End of Debugging ---

        if (!this.plugin.settings.enableWeeklyNotes) return;

        const { weeklyNoteFolder, weeklyNoteTemplate, weeklyNoteFormat } = this.plugin.settings;

        // 1. Calculate all possible placeholder values from the data object
        const pweek = ((dateInfo.weekSinceStart - 1) % 52) + 1; // Calculate the week (1-52) in the period year
        const replacements = {
            YYYY: dateInfo.year,
            MM: String(dateInfo.month + 1).padStart(2, '0'),
            PN: "P" + dateInfo.period,
            PW: "W" + dateInfo.week,
            WKP: String(pweek).padStart(2, '0'),
            WKC: String(dateInfo.calendarWeek).padStart(2, '0')
        };

        // 2. Build the filename by replacing placeholders in the format string
        const fileName = weeklyNoteFormat.replace(/YYYY|MM|PN|PW|WKP|WKC/g, (match) => {
            // This ensures that if a value is somehow undefined, it won't break the filename.
            return replacements[match] !== undefined ? replacements[match] : match;
        });

        // 3. The rest of the file creation/opening logic remains the same
        const path = `${weeklyNoteFolder}/${fileName}.md`;
        const file = this.app.vault.getAbstractFileByPath(path);

        if (file) {
            const leaf = this.app.workspace.getLeaf(false);
            await leaf.openFile(file);
        } else {
            new ConfirmationModal(this.app,
                "Create weekly note?",
                `A weekly note for "${fileName}" does not exist. Would you like to create it?`,
                async () => {
                    let fileContent = "";
                    const templateFile = this.app.vault.getAbstractFileByPath(weeklyNoteTemplate);
                    if (templateFile instanceof TFile) fileContent = await this.app.vault.read(templateFile);

                    if (!this.app.vault.getAbstractFileByPath(weeklyNoteFolder)) {
                        await this.app.vault.createFolder(weeklyNoteFolder);
                    }

                    const newFile = await this.app.vault.create(path, fileContent);
                    await this.buildWeeklyNotesCache();
                    this.renderCalendar();
                    const leaf = this.app.workspace.getLeaf(false);
                    await leaf.openFile(newFile);
                },
                "Yes, create it"
            ).open();
        }
    }

    positionPopupForMobile(targetEl) {
        if (!this.popupEl) return;

        const margin = 8; // A small, consistent margin for mobile screens

        // check for landscape orientation
        const isLandscape = window.innerWidth > window.innerHeight;
        const maxHeight = isLandscape ? '60vh' : '45vh'; // Allow more height in landscape

        this.popupEl.style.position = 'fixed';
        this.popupEl.style.bottom = `${margin}px`;
        this.popupEl.style.left = `${margin}px`;
        this.popupEl.style.right = `${margin}px`;
        this.popupEl.style.top = ''; // Unset any top property
        this.popupEl.style.maxHeight = maxHeight;
        this.popupEl.style.width = `calc(100% - ${margin * 2}px)`;
        this.popupEl.style.boxSizing = 'border-box';
    }

    generateMonthGrid(dateForMonth, targetBodyEl) {
        const { settings } = this.plugin;
        const today = new Date();
        const year = dateForMonth.getFullYear();
        const month = dateForMonth.getMonth();
        const firstDayOfMonth = new Date(year, month, 1);
        const folder = settings.dailyNotesFolder || "";
        const format = settings.dailyNoteDateFormat || "YYYY-MM-DD";
        const existingNotes = new Set(this.app.vault.getMarkdownFiles().filter(file => !folder || file.path.startsWith(folder + "/")).map(file => file.basename));

        // This new logic correctly calculates the first day to show on the calendar
        const startDayNumber = this.plugin.settings.weekStartDay === 'monday' ? 1 : 0; // Mon=1, Sun=0
        moment.updateLocale('en', { week: { dow: startDayNumber } });

        let dayOfWeek = firstDayOfMonth.getDay(); // JS standard: Sun=0, Mon=1...

        let diff = dayOfWeek - startDayNumber;
        if (diff < 0) {
            diff += 7; // Ensure we go back to the previous week
        }

        let currentDay = new Date(firstDayOfMonth);
        currentDay.setDate(firstDayOfMonth.getDate() - diff);

        const requiredRows = 6;
        for (let i = 0; i < requiredRows; i++) {
            const row = targetBodyEl.createEl("tr");

            if (settings.highlightCurrentWeek) {
                const todayMoment = moment();
                const startOfWeekMoment = moment(currentDay);
                if (todayMoment.weekYear() === startOfWeekMoment.weekYear() && todayMoment.week() === startOfWeekMoment.week()) {
                    row.addClass('current-week-row');
                }
            }

            const weekMoment = moment(new Date(currentDay));
            const isoWeek = weekMoment.isoWeek();
            const isoYear = weekMoment.isoWeekYear();
            const isoMonth = weekMoment.month();
            const periodWeekData = getPeriodWeek(new Date(currentDay), settings.startOfPeriod1Date);

            const dateInfoForWeek = {
                year: isoYear,
                month: isoMonth,
                period: periodWeekData.period,
                week: periodWeekData.week,
                calendarWeek: isoWeek,
                weekSinceStart: periodWeekData.weekSinceStart
            };

            const clickHandler = () => {
                this.openWeeklyNote(dateInfoForWeek);
            };

            let weeklyNoteExists = false;
            if (settings.enableWeeklyNotes) {
                const pweek = ((dateInfoForWeek.weekSinceStart - 1) % 52) + 1;
                const replacements = {
                    YYYY: dateInfoForWeek.year,
                    MM: String(dateInfoForWeek.month + 1).padStart(2, '0'),
                    PN: "P" + dateInfoForWeek.period,
                    PW: "W" + dateInfoForWeek.week,
                    WKP: String(pweek).padStart(2, '0'),
                    WKC: String(dateInfoForWeek.calendarWeek).padStart(2, '0')
                };
                const expectedFileName = settings.weeklyNoteFormat.replace(/YYYY|WKP|WKC|MM|PN|PW/g, match => replacements[match]);
                const expectedPath = `${settings.weeklyNoteFolder}/${expectedFileName}.md`;
                weeklyNoteExists = this.existingWeeklyNotes.has(expectedPath);
            }

            if (settings.showPWColumn) {
                const pwCell = row.createEl("td", { cls: "pw-label-cell" });
                const pwContent = pwCell.createDiv({ cls: "day-content" });
                pwContent.createDiv({ cls: "day-number" }).setText(this.formatPW(periodWeekData.period, periodWeekData.week));

                pwCell.style.cursor = "pointer";

                if (this.plugin.settings.highlightTodayPWLabel) {
                    for (let d = 0; d < 7; d++) {
                        const checkDate = new Date(currentDay);
                        checkDate.setDate(currentDay.getDate() + d);
                        if (isSameDay(checkDate, today)) {
                            pwCell.addClass("today-pw-label");
                            break;
                        }
                    }
                }

                if (weeklyNoteExists && settings.showWeeklyNoteDot && !settings.showWeekNumbers) {
                    const dotsContainer = pwContent.createDiv({ cls: 'dots-container' });

                    const layout = this.plugin.settings.calendarLayout || 'normal';
                    dotsContainer.classList.remove('layout-condensed', 'layout-normal', 'layout-spacious');
                    dotsContainer.classList.add(`layout-${layout}`);
                    dotsContainer.createDiv({ cls: 'calendar-dot weekly-note-dot' });
                }
                pwCell.addEventListener('click', clickHandler);

                const handleRowHoverEnter = () => {
                    if (this.plugin.settings.enableRowHighlight) {
                        row.classList.add('row-hover');
                    }
                };
                const handleRowHoverLeave = () => {
                    row.classList.remove('row-hover');
                };

                pwCell.addEventListener('mouseenter', handleRowHoverEnter);
                pwCell.addEventListener('mouseleave', handleRowHoverLeave);

            }

            if (settings.showWeekNumbers) {
                const weekNum = settings.weekNumberType === 'period' ? periodWeekData.weekSinceStart : isoWeek;
                const weekCell = row.createEl("td", { cls: "week-number-cell" });
                const weekContent = weekCell.createDiv({ cls: "day-content" });
                weekContent.createDiv({ cls: "day-number" }).setText(weekNum.toString());

                weekCell.style.cursor = "pointer";

                if (this.plugin.settings.highlightTodayPWLabel) {
                    for (let d = 0; d < 7; d++) {
                        const checkDate = new Date(currentDay);
                        checkDate.setDate(currentDay.getDate() + d);
                        if (isSameDay(checkDate, today)) {
                            weekCell.addClass("today-pw-label");
                            break;
                        }
                    }
                }

                if (weeklyNoteExists && settings.showWeeklyNoteDot) {
                    const dotsContainer = weekContent.createDiv({ cls: 'dots-container' });

                    const layout = this.plugin.settings.calendarLayout || 'normal';
                    dotsContainer.classList.remove('layout-condensed', 'layout-normal', 'layout-spacious');
                    dotsContainer.classList.add(`layout-${layout}`);

                    dotsContainer.createDiv({ cls: 'calendar-dot weekly-note-dot' });
                }
                weekCell.addEventListener('click', clickHandler);

                const handleRowHoverEnter = () => {
                    if (this.plugin.settings.enableRowHighlight) {
                        row.classList.add('row-hover');
                    }
                };
                const handleRowHoverLeave = () => {
                    row.classList.remove('row-hover');
                };

                weekCell.addEventListener('mouseenter', handleRowHoverEnter);
                weekCell.addEventListener('mouseleave', handleRowHoverLeave);
            }

            for (let d = 0; d < 7; d++) {
                const dayDate = new Date(currentDay);
                dayDate.setDate(currentDay.getDate() + d);
                const isOtherMonth = dayDate.getMonth() !== month;
                const cell = row.createEl("td");

                // Add separator class to first date column
                if (d === 0 && this.plugin.settings.showPWColumnSeparator &&
                    (this.plugin.settings.showPWColumn || this.plugin.settings.showWeekNumbers)) {
                    cell.addClass('first-date-column');
                }

                const contentDiv = cell.createDiv("day-content");
                const dayNumber = contentDiv.createDiv("day-number");
                dayNumber.textContent = dayDate.getDate().toString();
                const dateKey = moment(dayDate).format("YYYY-MM-DD");
                const icsEventsForDay = this.icsEventsByDate.get(dateKey);
                const tasksForDay = this.tasksByDate.get(dateKey);
                const createdFiles = this.createdNotesMap.get(dateKey) || [];
                const modifiedFiles = this.modifiedNotesMap.get(dateKey) || [];
                const assetsCreated = this.assetCreationMap.get(dateKey) || [];
                const dailyNoteFileName = formatDate(dayDate, format);
                const dailyNoteExists = existingNotes.has(dailyNoteFileName);

                let totalTaskCount = tasksForDay ? tasksForDay.length : 0;
                const calendarEventCount = icsEventsForDay ? icsEventsForDay.length : 0;
                const eventIndicatorStyle = this.plugin.settings.calendarEventIndicatorStyle;

                // Conditionally add calendar event count to the total count for heatmap/badge
                if (eventIndicatorStyle === 'heatmap' || eventIndicatorStyle === 'badge') {
                    totalTaskCount += calendarEventCount;
                }

                const isToday = isSameDay(dayDate, today);
                if (totalTaskCount > 0) {
                    if (settings.taskIndicatorStyle === 'badge') {
                        contentDiv.createDiv({ cls: 'task-count-badge', text: totalTaskCount.toString() });

                    } else if (settings.taskIndicatorStyle === 'heatmap') {
                        const shouldApplyHeatmap = !(isToday && settings.todayHighlightStyle === 'cell');

                        if (shouldApplyHeatmap) {

                            const startColor = parseRgbaString(settings.taskHeatmapStartColor);
                            const midColor = parseRgbaString(settings.taskHeatmapMidColor);
                            const endColor = parseRgbaString(settings.taskHeatmapEndColor);
                            const midPoint = settings.taskHeatmapMidpoint;
                            const maxPoint = settings.taskHeatmapMaxpoint;


                            if (startColor && midColor && endColor) {
                                let finalColor;
                                if (totalTaskCount >= maxPoint) { finalColor = settings.taskHeatmapEndColor; }
                                else if (totalTaskCount >= midPoint) { const factor = (totalTaskCount - midPoint) / (maxPoint - midPoint); finalColor = blendRgbaColors(midColor, endColor, factor); }
                                else { const divisor = midPoint - 1; const factor = divisor > 0 ? (totalTaskCount - 1) / divisor : 1; finalColor = blendRgbaColors(startColor, midColor, factor); }

                                contentDiv.classList.add('heatmap-cell');
                                contentDiv.style.setProperty('--heatmap-color', finalColor);

                                // This creates a border using the theme's background color, making a clean gap.
                                const isInHighlightedRow = settings.highlightCurrentWeek &&
                                    row.classList.contains('current-week-row');

                                // Use the row highlight color as border if in highlighted row
                                if (isInHighlightedRow) {
                                    const borderColor = document.body.classList.contains('theme-dark')
                                        ? settings.rowHighlightColorDark
                                        : settings.rowHighlightColorLight;
                                    contentDiv.style.border = `${this.plugin.settings.contentBorderWidth} solid ${borderColor}`;
                                } else {
                                    contentDiv.style.border = `${this.plugin.settings.contentBorderWidth} solid var(--background-secondary)`;
                                }
                                // A slightly smaller radius makes it look neatly inset.
                                contentDiv.style.borderRadius = '8px';
                                contentDiv.style.boxSizing = 'border-box';

                            }
                        }
                    }
                }


                if (isOtherMonth) dayNumber.addClass("day-number-other-month");
                if (isSameDay(dayDate, today)) cell.addClass("today-cell");

                const dotsContainer = contentDiv.createDiv({ cls: 'dots-container' });
                const layout = this.plugin.settings.calendarLayout || 'normal';

                // Ensure no old layout classes are lingering
                dotsContainer.classList.remove('layout-condensed', 'layout-normal', 'layout-spacious');

                // Apply the correct class based on the current setting
                dotsContainer.classList.add(`layout-${layout}`);


                if (dailyNoteExists) { dotsContainer.createDiv({ cls: "period-month-daily-note-dot calendar-dot" }); }
                if (settings.showOtherNoteDot && createdFiles.length > 0) { dotsContainer.createDiv({ cls: 'other-note-dot calendar-dot' }); }
                if (settings.showModifiedFileDot && modifiedFiles.length > 0) { dotsContainer.createDiv({ cls: 'modified-file-dot calendar-dot' }); }

                if (settings.showAssetDot && assetsCreated.length > 0) { dotsContainer.createDiv({ cls: 'asset-dot calendar-dot' }); }
                if (settings.showTaskDot && totalTaskCount > 0) { dotsContainer.createDiv({ cls: 'task-dot calendar-dot' }); }


                if (eventIndicatorStyle === 'dot' && calendarEventCount > 0 || settings.showIcsDot && calendarEventCount > 0) {
                    dotsContainer.createDiv({ cls: 'calendar-dot ics-event-dot' });
                }

                const hasPopupContent = dailyNoteExists || (totalTaskCount > 0) || (createdFiles.length > 0) || (modifiedFiles.length > 0) || (assetsCreated.length > 0) || (calendarEventCount > 0);

                let dataToShow = {};
                if (hasPopupContent) {
                    const dailyNoteFile = dailyNoteExists ? this.app.vault.getAbstractFileByPath(folder ? `${folder}/${dailyNoteFileName}.md` : `${dailyNoteFileName}.md`) : null;
                    dataToShow = {
                        tasks: tasksForDay,
                        daily: dailyNoteFile ? [dailyNoteFile] : [],
                        created: settings.showOtherNoteDot ? createdFiles : [],
                        modified: settings.showModifiedFileDot ? modifiedFiles : [],
                        assets: settings.showAssetDot ? assetsCreated : [],
                        ics: icsEventsForDay || [],
                    };
                }

                let longPressOccurred = false;
                let touchTimer = null;

                if (Platform.isMobile) {
                    // --- MOBILE: Long-press for popup, tap for daily note ---
                    cell.addEventListener('touchstart', (e) => {
                        longPressOccurred = false; // Reset on new touch
                        if (hasPopupContent) {
                            touchTimer = setTimeout(() => {
                                longPressOccurred = true;
                                this.showFilePopup(cell, dataToShow, dayDate, true); // Pass 'true' for mobile
                                e.preventDefault(); // Prevents context menu and text selection
                            }, 500); // 500ms for a long-press
                        }
                    });

                    const cancelLongPress = () => clearTimeout(touchTimer);
                    cell.addEventListener('touchend', cancelLongPress);
                    cell.addEventListener('touchmove', cancelLongPress);

                } else {
                    // --- DESKTOP: Hover for popup ---
                    if (hasPopupContent) {
                        cell.addEventListener('mouseenter', () => {
                            if (this.isPopupLocked) return;
                            clearTimeout(this.hideTimeout);
                            this.hideFilePopup();
                            this.hoverTimeout = setTimeout(() => {
                                this.showFilePopup(cell, dataToShow, dayDate, false); // Pass 'false' for desktop
                            }, this.plugin.settings.otherNoteHoverDelay);
                        });

                        cell.addEventListener('mouseleave', () => {
                            clearTimeout(this.hoverTimeout);
                            this.hideTimeout = setTimeout(() => this.hideFilePopup(), this.plugin.settings.popupHideDelay);
                        });
                    }
                }

                // --- UNIFIED CLICK HANDLER ---
                cell.addEventListener('click', (event) => {
                    if (longPressOccurred) {
                        // A long-press just happened and showed a popup, so ignore this subsequent 'click' event.
                        return;
                    }
                    this.hideFilePopup();
                    this.openDailyNote(dayDate);
                });
                cell.addEventListener('mouseenter', () => {
                    if (!this.plugin.settings.enableRowToDateHighlight) return;
                    const highlightColor = document.body.classList.contains('theme-dark')
                        ? this.plugin.settings.rowHighlightColorDark
                        : this.plugin.settings.rowHighlightColorLight;
                    const row = cell.parentElement;
                    const allRows = Array.from(row.parentElement.children);
                    const rowIndex = allRows.indexOf(row);
                    const colIndex = Array.from(row.children).indexOf(cell);
                    const table = cell.closest('table');
                    for (let j = 0; j <= colIndex; j++) {
                        const cellToHighlight = row.children[j];
                        if (cellToHighlight) cellToHighlight.style.backgroundColor = highlightColor;
                    }
                    for (let i = 0; i < rowIndex; i++) {
                        const priorRow = allRows[i];
                        const cellToHighlight = priorRow.children[colIndex];
                        if (cellToHighlight) cellToHighlight.style.backgroundColor = highlightColor;
                    }
                    if (table) {
                        const headerRow = table.querySelector('thead tr');
                        if (headerRow) {
                            const headerCell = headerRow.children[colIndex];
                            if (headerCell) headerCell.style.backgroundColor = highlightColor;
                        }
                    }
                });
                cell.addEventListener('mouseleave', () => {
                    if (!this.plugin.settings.enableRowToDateHighlight) return;
                    const table = cell.closest('table');
                    if (table) {
                        const allCells = table.querySelectorAll('tbody td, thead th');
                        allCells.forEach(c => c.style.backgroundColor = '');
                    }
                });
            }
            currentDay.setDate(currentDay.getDate() + 7);
        }
    }

    /**
     * Finds all markdown files that link to or embed the given asset file.
     * @param {TFile} assetFile - The asset file to find backlinks for.
     * @returns {Promise<TFile[]>} A promise that resolves to an array of markdown files linking to the asset.
     */
    async findAssetBacklinks(assetFile) {
        const backlinks = [];
        const markdownFiles = this.app.vault.getMarkdownFiles();

        for (const mdFile of markdownFiles) {
            const cache = this.app.metadataCache.getFileCache(mdFile);
            if (!cache) continue;

            const linksAndEmbeds = [...(cache.embeds || []), ...(cache.links || [])];

            for (const ref of linksAndEmbeds) {
                const linkedFile = this.app.metadataCache.getFirstLinkpathDest(ref.link, mdFile.path);
                if (linkedFile && linkedFile.path === assetFile.path) {
                    backlinks.push(mdFile);
                    break; // Move to the next file once a link is found
                }
            }
        }
        return backlinks;
    }

    isWeeklyNote(file) {
        if (!this.plugin.settings.enableWeeklyNotes || !(file instanceof TFile)) {
            return false;
        }
        // A file is considered a weekly note if it's inside the specified folder.
        return file.parent?.path === this.plugin.settings.weeklyNoteFolder;
    }

    /**
   * Attaches touch event listeners for mobile swipe gestures.
   * @param {HTMLElement} calendarEl The element to listen for 'swipe up' on.
   * @param {HTMLElement} headerEl The element to listen for 'swipe down' on.
   */
    attachSwipeListeners(calendarEl, headerEl) {
        const swipeThreshold = 50;
        let startY = 0;
        let startX = 0;
        let isDragging = false;
        let dragTarget = null; // To know which element started the drag

        const handleDragStart = (e) => {
            isDragging = true;
            dragTarget = e.currentTarget; // Store if drag started on calendar or header
            startY = e.touches ? e.touches[0].clientY : e.clientY;
            startX = e.touches ? e.touches[0].clientX : e.clientX;

            // Add the 'end' listeners to the window to catch drags that end outside the element
            window.addEventListener('mouseup', handleDragEnd, { once: true });
            window.addEventListener('touchend', handleDragEnd, { once: true });
        };

        const handleDragEnd = (e) => {
            if (!isDragging) return;
            isDragging = false;

            const endY = e.changedTouches ? e.changedTouches[0].clientY : e.clientY;
            const endX = e.changedTouches ? e.changedTouches[0].clientX : e.clientX;
            const deltaY = startY - endY;
            const deltaX = Math.abs(startX - endX);

            // Check if it's a predominantly vertical swipe
            if (Math.abs(deltaY) > swipeThreshold && Math.abs(deltaY) > deltaX) {
                // Swipe Up on Calendar Body: Hide Calendar
                if (dragTarget === calendarEl && deltaY > 0 && !this.isCalendarCollapsed) {
                    this.calendarWasCollapsedForEditing = false;
                    this.toggleCalendar(true); // Collapse
                }
                // Swipe Down on Header: Show Calendar
                else if (dragTarget === headerEl && deltaY < 0 && this.isCalendarCollapsed) {
                    this.calendarWasCollapsedForEditing = false;
                    this.toggleCalendar(false); // Use the helper

                    this.blurActiveInput();   // Explicitly dismiss the keyboard
                }
                else if (this.app.isMobile && dragTarget === calendarEl && deltaY < -80) { // A longer swipe down gesture
                    this.isVerticalView = true;
                    this.render(); // Re-render the entire view to switch to vertical mode
                }
            }
        };

        // Attach start listeners for both mouse and touch to both elements
        calendarEl.addEventListener('mousedown', handleDragStart);
        calendarEl.addEventListener('touchstart', handleDragStart, { passive: true });
        headerEl.addEventListener('mousedown', handleDragStart);
        headerEl.addEventListener('touchstart', handleDragStart, { passive: true });
    }

    /**
     * Displays a popup list of notes that link to a specific asset.
     * @param {HTMLElement} targetEl - The element to position the popup relative to.
     * @param {TFile} assetFile - The asset whose backlinks should be displayed.
     */
    async showBacklinksPopup(targetEl, assetFile) {
        this.hideFilePopup(); // Hide any other popups
        const backlinks = await this.findAssetBacklinks(assetFile);

        if (backlinks.length === 0) {
            new Notice("No backlinks found for this asset.");
            return;
        }

        this.popupEl = createDiv({ cls: 'other-notes-popup' });

        // Add header with a close button
        const headerRow = this.popupEl.createDiv({ cls: 'popup-header' });
        headerRow.createDiv({ cls: 'popup-header-title', text: 'Backlinks' });
        const closeBtn = headerRow.createDiv({ cls: 'popup-close-btn' });
        setIcon(closeBtn, 'x');
        headerRow.addEventListener('click', () => this.hideFilePopup());

        // Create a scrollable wrapper for the content
        const contentWrapper = this.popupEl.createDiv({ cls: 'popup-content-wrapper' });

        backlinks.forEach(noteFile => {
            const itemEl = contentWrapper.createDiv({ cls: 'other-notes-popup-item' });
            setIcon(itemEl, 'file-text');

            const titlePathWrapper = itemEl.createDiv({ cls: 'note-title-path-wrapper' });
            titlePathWrapper.createDiv({ text: noteFile.basename, cls: "note-title" });
            if (noteFile.parent && noteFile.parent.path !== '/') {
                titlePathWrapper.createDiv({ text: noteFile.parent.path, cls: 'note-path' });
            }

            itemEl.addEventListener('click', async () => {
                const cache = this.app.metadataCache.getFileCache(noteFile);
                let targetLine = 0;
                if (cache) {
                    const allLinks = [...(cache.embeds || []), ...(cache.links || [])];
                    for (const ref of allLinks) {
                        const linkedFile = this.app.metadataCache.getFirstLinkpathDest(ref.link, noteFile.path);
                        if (linkedFile && linkedFile.path === assetFile.path) {
                            targetLine = ref.position.start.line;
                            break;
                        }
                    }
                }
                const openInNewTab = this.plugin.settings.notesOpenAction === 'new-tab';
                const leaf = this.app.workspace.getLeaf(openInNewTab);
                await leaf.openFile(noteFile, { eState: { line: targetLine } });
                this.hideFilePopup();
            });
        });

        this.popupEl.addEventListener('mouseenter', () => clearTimeout(this.hideTimeout));
        this.popupEl.addEventListener('mouseleave', () => {
            this.hideTimeout = setTimeout(() => this.hideFilePopup(), this.plugin.settings.popupHideDelay);
        });

        document.body.appendChild(this.popupEl);

        const popupRect = this.popupEl.getBoundingClientRect();
        const targetRect = targetEl.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;
        const margin = this.plugin.settings.popupGap;
        let finalTop = targetRect.bottom + margin;
        if (finalTop + popupRect.height > viewportHeight) finalTop = targetRect.top - popupRect.height - margin;
        if (finalTop < 0) finalTop = margin;
        let finalLeft = targetRect.left;
        if (finalLeft + popupRect.width > viewportWidth) finalLeft = targetRect.right - popupRect.width;
        if (finalLeft < 0) finalLeft = margin;

        this.popupEl.style.top = `${finalTop}px`;
        this.popupEl.style.left = `${finalLeft}px`;
    }

    /**
     * Extracts all task lines (e.g., "- [ ] ...") from a string of content.
     * @param {string} content - The markdown content to parse.
     * @returns {string[]} An array of strings, where each string is a task line.
     */
    extractTaskLines(content) {
        const taskLines = [];
        // This regex finds any line that looks like a Markdown task, completed or not.
        const taskRegex = /^\s*(?:-|\d+\.)\s*\[.\]\s*.*/;
        const lines = content.split('\n');
        for (const line of lines) {
            if (taskRegex.test(line)) {
                taskLines.push(line);
            }
        }
        return taskLines;
    }

    /**
     * Checks if a file is an image based on its extension.
     * @param {TFile} file The file to check.
     * @returns {boolean} True if the file is a common image type.
     */
    isImageAsset(file) {
        const imageExtensions = ['png', 'jpg', 'jpeg', 'gif', 'svg', 'webp'];
        return imageExtensions.includes(file.extension.toLowerCase());
    }

    /**
     * Dynamically generates the label for a tab, including icon and/or text based on settings.
     * @param {HTMLElement} container The HTML element to populate with the label.
     * @param {string} key The key of the tab (e.g., 'notes', 'scratch').
     */
    getTabLabel(container, key) {
        container.empty(); // Clear previous content

        const isMobile = document.body.classList.contains('is-mobile');
        const displayMode = isMobile ? this.plugin.settings.mobileTabDisplayMode : this.plugin.settings.tabDisplayMode;

        const icons = this.plugin.settings.tabIcons || DEFAULT_SETTINGS.tabIcons;
        const textLabels = {
            scratch: "ScratchPad",
            notes: "Notes",
            pinned: "Pinned",
            tasks: "Tasks", // This is a fallback
            assets: "Assets"
        };

        let iconName = '';
        let text = '';

        if (key === 'notes') {
            const mode = this.notesViewMode;
            iconName = mode === 'pinned' ? icons.pinned : icons.notes;
            text = mode === 'pinned' ? textLabels.pinned : textLabels.notes;
        }
        else if (key === 'tasks') {
            const groupBy = this.plugin.settings.taskGroupBy;
            iconName = groupBy === 'tag' ? 'circle-check' : icons.tasks;
            text = groupBy === 'tag' ? "Tasks by Tag" : "Tasks by Date";
        }
        else if (key === 'assets') {
            iconName = this.isAssetsGridView ? 'image' : 'file-image';
            text = textLabels[key];
        }
        else {
            iconName = icons[key];
            text = textLabels[key];
        }

        if (displayMode.includes("icon")) {
            const iconEl = container.createDiv({ cls: 'tab-icon' });
            setIcon(iconEl, iconName || 'file-question');
        }

        if (displayMode.toLowerCase().includes("text")) {
            container.createSpan({ cls: 'tab-text', text: text || '' });
        }
    }

    /**
     * Determines if a file is a daily note based on its name format and location.
     * @param {TFile} file The file to check.
     * @returns {boolean} True if the file matches the daily note criteria.
     */
    isDailyNote(file) {
        const settings = this.plugin.settings;
        const dailyNoteFolder = settings.dailyNotesFolder;
        const format = settings.dailyNoteDateFormat || "YYYY-MM-DD";

        // Check if the filename strictly matches the daily note date format.
        const isNameCorrect = moment(file.basename, format, true).isValid();
        if (!isNameCorrect) {
            return false;
        }

        // If a daily notes folder is specified, check if the file is directly inside it.
        if (dailyNoteFolder) {
            return file.parent?.path === dailyNoteFolder;
        }

        // If no folder is set, the file must be in the vault's root directory.
        return file.parent?.path === '/';
    }

    /**
     * Toggles the scratchpad between edit and preview mode and triggers a re-render.
     */
    toggleScratchpadView() {
        this.isScratchpadPreview = !this.isScratchpadPreview;
        // The button state and content visibility are handled by the render method.
        this.renderScratchpadContent();
    }

    /**
     * Processes date placeholders in a string and replaces them with formatted dates.
     * Also handles a cursor position marker.
     * @param {string} formatString The string containing placeholders like {today}, {monday}, {date}+7, and a cursor marker '|'.
     * @returns {{text: string, cursorOffset: number}} The processed string and the calculated final cursor position.
     */
    processDatePlaceholders(formatString) {
        const cursorMarker = '|';
        let cursorOffset = -1;

        // Find the cursor marker's position and remove it for processing.
        const markerIndex = formatString.indexOf(cursorMarker);
        if (markerIndex !== -1) {
            cursorOffset = markerIndex;
            formatString = formatString.replace(cursorMarker, '');
        }

        // Process date placeholders using a regex.
        const processedText = formatString.replace(/{([^}]+)}/g, (match, tag) => {
            const now = moment();
            tag = tag.toLowerCase().trim();

            if (tag === 'today') return now.format('YYYY-MM-DD');
            if (tag === 'tomorrow') return now.add(1, 'day').format('YYYY-MM-DD');

            const weekdays = { 'sunday': 0, 'monday': 1, 'tuesday': 2, 'wednesday': 3, 'thursday': 4, 'friday': 5, 'saturday': 6 };
            if (tag in weekdays) {
                const targetDay = weekdays[tag];
                const currentDay = now.day();
                let daysToAdd = targetDay - currentDay;
                if (daysToAdd <= 0) {
                    daysToAdd += 7; // Find the *next* instance of the day.
                }
                return now.add(daysToAdd, 'days').format('YYYY-MM-DD');
            }

            const dynamicDateMatch = tag.match(/^date\s*([+-])\s*(\d+)/);
            if (dynamicDateMatch) {
                const operator = dynamicDateMatch[1];
                const amount = parseInt(dynamicDateMatch[2], 10);
                return operator === '+' ? now.add(amount, 'days').format('YYYY-MM-DD') : now.subtract(amount, 'days').format('YYYY-MM-DD');
            }

            return match; // Return original match if no placeholder is recognized.
        });

        // If the cursor marker wasn't found, set the offset to the end of the text.
        if (cursorOffset === -1) {
            cursorOffset = processedText.length;
        }

        return { text: processedText, cursorOffset: cursorOffset };
    }

    /**
     * Scans the entire vault for open tasks with due dates (e.g., 📅YYYY-MM-DD)
     * and populates `this.tasksByDate` map for quick lookups by the calendar view.
     */
    async buildTasksByDateMap() {
        this.tasksByDate.clear();
        this.fileToTaskDates.clear(); // Also clear the tracking map

        const files = this.app.vault.getMarkdownFiles();

        for (const file of files) {
            if (this.plugin.settings.taskIgnoreFolders.some(folder => file.path.startsWith(folder))) {
                continue;
            }

            const content = await this.app.vault.cachedRead(file);
            const tasks = parseTasksFromFile(file, content); // Use the new helper

            const dateKeysForFile = new Set();

            for (const task of tasks) {
                // We only care about incomplete tasks with due dates for the calendar grid
                if (task.status.toLowerCase() !== 'x' && task.dueDate) {
                    const dateKey = moment(task.dueDate).format("YYYY-MM-DD");
                    if (!this.tasksByDate.has(dateKey)) {
                        this.tasksByDate.set(dateKey, []);
                    }
                    this.tasksByDate.get(dateKey).push(task);
                    dateKeysForFile.add(dateKey);
                }
            }

            if (dateKeysForFile.size > 0) {
                this.fileToTaskDates.set(file.path, dateKeysForFile);
            }
        }
    }

    /**
     * Shows a confirmation modal and handles the permanent deletion of an asset file.
     * @param {TFile} file - The asset file to delete.
     */
    async handleDeleteAsset(file) {
        new ConfirmationModal(
            this.app,
            "Confirm Deletion",
            `Are you sure you want to permanently delete "${file.name}"? This action cannot be undone.`,
            async () => {
                try {
                    await this.app.vault.trash(file, true); // `true` for permanent deletion.
                    new Notice(`Deleted asset: ${file.name}`);
                    // Refresh data maps and UI components that depend on asset data.
                    await this.buildAssetCreationMap();
                    await this.buildTasksByDateMap();
                    this.populateAssets();
                    this.renderCalendar();
                } catch (err) {
                    new Notice(`Error deleting file: ${err.message}`);
                    console.error(err);
                }
            }
            , "Yes, delete").open();
    }

    /**
     * Renders the content of the scratchpad, switching between an editor textarea
     * and a rendered Markdown preview based on the current view mode.
     */
    async renderScratchpadContent() {
        if (!this.scratchWrapperEl) return;

        // Preserve focus on the textarea across re-renders.
        const wasFocused = this.noteTextarea === document.activeElement;

        this.scratchWrapperEl.empty();

        // Create a container for action buttons (Preview, Add Task).
        const actionsContainer = this.scratchWrapperEl.createDiv({
            cls: "scratchpad-actions-container"
        });

        // Only show the Preview/Edit toggle button if enabled in settings.
        if (this.plugin.settings.scratchpad?.showPreviewToggle) {
            this.scratchpadViewToggleBtn = actionsContainer.createEl("button", {
                cls: "scratchpad-action-btn"
            });
            this.scratchpadViewToggleBtn.addEventListener("click", () => this.toggleScratchpadView());
        }

        // Only show the Add Task button if enabled in settings.
        if (this.plugin.settings.scratchpad?.showAddTaskButton) {
            this.addTaskBtn = actionsContainer.createEl("button", {
                cls: "scratchpad-action-btn"
            });
            setIcon(this.addTaskBtn, "plus");
            this.addTaskBtn.setAttribute("aria-label", "Add new task");
            this.addTaskBtn.addEventListener("click", () => this.addNewTaskToScratchpad());
        }

        if (this.isScratchpadPreview && this.plugin.settings.scratchpad?.showPreviewToggle) {
            // --- CONFIGURE UI FOR PREVIEW MODE ---
            if (this.scratchpadViewToggleBtn) {
                setIcon(this.scratchpadViewToggleBtn, "edit"); // Switch to Edit icon
                this.scratchpadViewToggleBtn.setAttribute("aria-label", "Edit mode");
            }
            if (this.addTaskBtn) this.addTaskBtn.style.display = 'none';

            // Disable search controls in preview mode.
            if (this.scratchpadSearchInputEl) this.scratchpadSearchInputEl.disabled = true;
            if (this.scratchpadSearchControlsEl) {
                Array.from(this.scratchpadSearchControlsEl.children).forEach(child => {
                    if (child.matches('button')) child.disabled = true;
                });
            }

            // Render the content as Markdown.
            this.scratchWrapperEl.addClass("markdown-preview-view");
            const markdownContent = await this.loadNote();
            const file = this.app.vault.getAbstractFileByPath(this.plugin.settings.fixedNoteFile);
            if (file) {
                MarkdownRenderer.render(this.app, markdownContent, this.scratchWrapperEl, file.path, this);
            }

        } else {
            // --- CONFIGURE UI FOR EDIT MODE ---
            if (this.scratchpadViewToggleBtn) {
                setIcon(this.scratchpadViewToggleBtn, "eye"); // Switch to Preview icon
                this.scratchpadViewToggleBtn.setAttribute("aria-label", "Preview mode");
            }
            if (this.addTaskBtn) this.addTaskBtn.style.display = 'block';

            // Enable search controls in edit mode.
            if (this.scratchpadSearchInputEl) this.scratchpadSearchInputEl.disabled = false;
            if (this.scratchpadSearchControlsEl) {
                Array.from(this.scratchpadSearchControlsEl.children).forEach(child => {
                    if (child.matches('button')) child.disabled = false;
                });
            }

            this.scratchWrapperEl.removeClass("markdown-preview-view");
            // The highlighter is a div that sits behind the textarea to show search matches.
            this.scratchHighlighterEl = this.scratchWrapperEl.createDiv({ cls: "scratch-base scratch-highlighter" });
            this.noteTextarea = this.scratchWrapperEl.createEl("textarea", { cls: "scratch-base scratch-content" });

            if (this.app.isMobile) {

                this.noteTextarea.addEventListener('focus', () => {
                    this.calendarWasCollapsedForEditing = true;
                    this.toggleCalendar(true);
                    this.noteTextarea.classList.add('is-editing-mobile');
                });

                this.noteTextarea.addEventListener('blur', (e) => {
                    if (e.relatedTarget === this.collapseBtn) {
                        this.noteTextarea.classList.remove('is-editing-mobile');
                        return;
                    }

                    // Otherwise, auto-expand if needed.
                    if (this.calendarWasCollapsedForEditing) {
                        this.calendarWasCollapsedForEditing = false;
                        this.toggleCalendar(false);
                    }
                    this.noteTextarea.classList.remove('is-editing-mobile');
                });
            }

            this.noteTextarea.value = this.noteText;
            if (wasFocused) this.noteTextarea.focus();
            this.updateScratchpadHighlights();


            // Save content on input.
            this.noteTextarea.addEventListener("input", async () => {
                this.noteText = this.noteTextarea.value;
                await this.saveFixedNote(this.noteText);
                this.updateScratchpadSearchCount();
                this.updateScratchpadHighlights();
            });

            // Synchronize scroll position between textarea and highlighter.
            this.noteTextarea.addEventListener('scroll', () => {
                if (this.scratchHighlighterEl) {
                    this.scratchHighlighterEl.scrollTop = this.noteTextarea.scrollTop;
                    this.scratchHighlighterEl.scrollLeft = this.noteTextarea.scrollLeft;
                }
            });
        }
    }

    /**
     * Called when the view is first opened. It loads all initial data and registers
     * event listeners for file changes and auto-reloading.
     */
    async onOpen() {
        // --- Load all initial data ---
        await this.buildCreatedNotesMap();
        await this.buildModifiedNotesMap();
        await this.buildAssetCreationMap();
        await this.buildTasksByDateMap();
        await this.refreshIcsEvents();
        await this.buildWeeklyNotesCache();
        this.noteText = await this.loadNote();
        this.render();
        this.setupReorderMode();

        // --- Register events and intervals ---
        const intervalMs = this.plugin.settings.autoReloadInterval || 5000;
        this.registerInterval(setInterval(async () => {
            if (document.activeElement === this.noteTextarea) return;
            const latest = await this.loadNote();
            if (latest !== this.noteText && this.noteTextarea) {
                this.noteText = latest;
                this.noteTextarea.value = latest;
            }
        }, intervalMs));

        // This listener checks the date when the app window gets focus.
        // This solves a 'stale date highlight after a device sleep' issue.
        this.registerDomEvent(window, 'focus', () => {
            const now = new Date();
            // Only proceed if the day has actually changed.
            if (!isSameDay(now, this.lastKnownToday)) {
                console.log("Window focus detected: Day has changed. Refreshing calendar.");

                // Update our tracker to the new date.
                this.lastKnownToday = now;

                // Efficiently re-render just the calendar grid.
                this.renderCalendar();
            }
        });


        // Use metadataCache for modifications - it's more efficient
        this.registerEvent(this.app.metadataCache.on('changed', async (file) => {
            if (this.isWeeklyNote(file)) {
                this.existingWeeklyNotes.add(file.path);
            }

            // Incrementally update maps
            this.removeFileFromMaps(file.path);
            this.addFileToMaps(file);
            await this.updateTasksForFile(file);

            // Trigger a targeted UI refresh
            this.refreshUI(file);
        }));

        // Vault event for new files
        this.registerEvent(this.app.vault.on("create", async (file) => {
            if (!(file instanceof TFile)) return;
            if (this.isWeeklyNote(file)) this.existingWeeklyNotes.add(file.path);

            if (file.path.toLowerCase().endsWith('.md')) {
                this.addFileToMaps(file);
                await this.updateTasksForFile(file);
            } else {
                this.addFileToAssetMap(file);
            }
            this.refreshUI(file);
        }));

        // Add a global listener to blur inputs when tapping outside.
        // Uses 'mousedown' and the 'capture: true' phase for mobile reliability.
        this.registerDomEvent(this.containerEl, 'mousedown', (event) => {
            const activeEl = document.activeElement;
            const target = event.target;

            // Safely check if the clicked target is a valid HTML element.
            // If not, do nothing. This prevents the errors you saw before.
            if (!(target instanceof HTMLElement)) {
                return;
            }

            // Define the list of inputs this behavior applies to.
            const focusableInputs = [
                this.notesSearchInputEl,
                this.tasksSearchInputEl,
                this.assetsSearchInputEl,
                this.scratchpadSearchInputEl,
                this.noteTextarea
            ].filter(Boolean); // Removes any non-existent elements

            // Check if one of our inputs currently has focus.
            const isInputFocused = focusableInputs.includes(activeEl);

            // Check if the tap occurred on one of the inputs themselves.
            const clickedOnInput = focusableInputs.some(input => input.contains(target));

            // If an input is focused, but the tap was *outside* of it, blur the input.
            if (isInputFocused && !clickedOnInput) {
                // This re-uses the same helper function from the swipe fix.
                this.blurActiveInput();
            }
        }, true); // 'true' enables the capture phase, which is crucial for reliability.


        // Vault event for deleted files
        this.registerEvent(this.app.vault.on("delete", async (file) => {
            if (!(file instanceof TFile)) return;
            if (this.existingWeeklyNotes.has(file.path)) this.existingWeeklyNotes.delete(file.path);

            if (file.path.toLowerCase().endsWith('.md')) {
                this.removeFileFromMaps(file.path);
                // Also remove tasks from the deleted file
                const oldDateKeys = this.fileToTaskDates.get(file.path) || new Set();
                for (const dateKey of oldDateKeys) {
                    const tasks = this.tasksByDate.get(dateKey);
                    if (tasks) {
                        const remaining = tasks.filter(t => t.file.path !== file.path);
                        if (remaining.length > 0) this.tasksByDate.set(dateKey, remaining);
                        else this.tasksByDate.delete(dateKey);
                    }
                }
                this.fileToTaskDates.delete(file.path);
            } else {
                this.removeFileFromAssetMap(file.path);
            }
            this.refreshUI(file);
        }));

        // Vault event for renamed files
        this.registerEvent(this.app.vault.on("rename", async (file, oldPath) => {
            if (!(file instanceof TFile)) return;
            if (this.existingWeeklyNotes.has(oldPath)) {
                this.existingWeeklyNotes.delete(oldPath);
            }
            if (this.isWeeklyNote(file)) {
                this.existingWeeklyNotes.add(file.path);
            }

            if (file.path.toLowerCase().endsWith('.md')) {
                this.removeFileFromMaps(oldPath);
                this.addFileToMaps(file);
                // Re-point tasks to the new file path
                await this.updateTasksForFile(file);
            } else {
                this.removeFileFromAssetMap(oldPath);
                this.addFileToAssetMap(file);
            }
            this.refreshUI(file);
        }));


        const PULL_THRESHOLD = 70; // How far the user needs to pull down to trigger a refresh

        const resetPullStyles = () => {
            this.taskRefreshIndicator.removeClass('is-ready', 'is-pulling', 'is-refreshing');
            this.tasksContentEl.style.transform = `translateY(0px)`;
            this.taskRefreshIndicator.style.transform = `translateY(-50px) scale(0.7)`;
            setIcon(this.taskRefreshIndicator, 'arrow-down');
        };

        this.registerDomEvent(this.tasksContentEl, 'touchstart', (e) => {
            if (this.tasksContentEl.scrollTop === 0) {
                this.isTaskPulling = true;
                this.taskPullStartY = e.touches[0].clientY;
            }
        }, { passive: false });

        this.registerDomEvent(this.tasksContentEl, 'touchmove', (e) => {
            if (!this.isTaskPulling) return;

            const currentY = e.touches[0].clientY;
            // We only care about the downward pull distance from the start
            this.taskPullDistance = Math.max(0, currentY - this.taskPullStartY);

            // Only interfere if the list is scrolled to the top AND the user is pulling down.
            if (this.tasksContentEl.scrollTop === 0 && this.taskPullDistance > 0) {
                // Prevent the browser from scrolling the page
                e.preventDefault();

                const pullRatio = Math.min(this.taskPullDistance, PULL_THRESHOLD);
                this.tasksContentEl.style.transform = `translateY(${pullRatio}px)`;

                this.taskRefreshIndicator.addClass('is-pulling');
                this.taskRefreshIndicator.style.transform = `translateY(${pullRatio - 50}px) scale(0.7)`;

                if (this.taskPullDistance > PULL_THRESHOLD) {
                    this.taskRefreshIndicator.addClass('is-ready');
                    setIcon(this.taskRefreshIndicator, 'check');
                } else {
                    this.taskRefreshIndicator.removeClass('is-ready');
                    setIcon(this.taskRefreshIndicator, 'arrow-down');
                }
            } else {
                // If we've started scrolling down the list, stop tracking the pull
                this.isTaskPulling = false;
            }

        }, { passive: false });

        this.registerDomEvent(this.tasksContentEl, 'touchend', async (e) => {
            if (!this.isTaskPulling) return;
            this.isTaskPulling = false;

            if (this.taskPullDistance > PULL_THRESHOLD) {

                this.blurActiveInput();
                // Trigger the refresh
                this.taskRefreshIndicator.addClass('is-refreshing', 'is-ready');
                setIcon(this.taskRefreshIndicator, 'loader');

                await this.populateTasks();

                // Reset styles after refresh is complete
                setTimeout(() => {
                    resetPullStyles();
                }, 300); // Small delay for user to see the end of the spin

            } else {
                // Snap back if not pulled far enough
                resetPullStyles();
            }

            this.taskPullDistance = 0;

        });
        this.scheduleDailyRefresh();

    }

    /**
     * Forces a full rebuild of all data maps and a complete re-render of the view.
     * Useful after major setting changes.
     */
    async rebuildAndRender() {
        await this.buildCreatedNotesMap();
        await this.buildModifiedNotesMap();
        await this.buildAssetCreationMap();
        await this.refreshIcsEvents();
        await this.buildWeeklyNotesCache();
        this.render();
    }

    /**
     * Performs a more targeted UI refresh based on which file was changed,
     * avoiding a full re-render when possible.
     * @param {TFile} file The file that was changed.
     */
    async refreshUI(file) {
        // Debounce calendar render as it's the most common update
        clearTimeout(this.calendarRefreshDebounceTimer);
        this.calendarRefreshDebounceTimer = setTimeout(() => {
            // If in vertical view, a full re-render is needed to update all visible months.
            if (this.isVerticalView) {
                this.render();
            } else {
                // Otherwise, just re-render the single calendar grid.
                this.renderCalendar();
            }
        }, 300);

        // Refresh active tab if it's open and relevant
        switch (this.activeTab) {
            case 'scratch':
                if (file?.path === this.plugin.settings.fixedNoteFile) {
                    this.noteText = await this.loadNote();
                    if (this.noteTextarea) this.noteTextarea.value = this.noteText;
                }
                break;
            case 'notes':
                clearTimeout(this.notesRefreshDebounceTimer);
                this.notesRefreshDebounceTimer = setTimeout(() => this.populateNotes(), 250);
                break;
            case 'tasks':
                clearTimeout(this.taskRefreshDebounceTimer);
                this.taskRefreshDebounceTimer = setTimeout(() => this.populateTasks(), 250);
                break;
            case 'assets':
                // Invalidate asset cache and refresh
                this.isUnusedAssetCacheValid = false;
                this.populateAssets();
                break;
        }
    }

    async updateTasksForFile(file) {
        if (!file || !(file instanceof TFile) || !file.path.toLowerCase().endsWith('.md')) {
            return; // Do nothing if it's not a markdown file
        }

        // 1. Efficiently remove all old tasks from this file
        const oldDateKeys = this.fileToTaskDates.get(file.path) || new Set();
        for (const dateKey of oldDateKeys) {
            const tasksOnDate = this.tasksByDate.get(dateKey);
            if (tasksOnDate) {
                const remainingTasks = tasksOnDate.filter(task => task.file.path !== file.path);
                if (remainingTasks.length > 0) {
                    this.tasksByDate.set(dateKey, remainingTasks);
                } else {
                    this.tasksByDate.delete(dateKey); // Clean up empty date entries
                }
            }
        }
        this.fileToTaskDates.delete(file.path);

        // 2. Re-process the single file and add its new tasks
        if (this.plugin.settings.taskIgnoreFolders.some(folder => file.path.startsWith(folder))) {
            return; // Don't re-add if it's in an ignored folder
        }

        const content = await this.app.vault.cachedRead(file);
        const tasks = parseTasksFromFile(file, content);
        const newDateKeys = new Set();

        for (const task of tasks) {
            if (task.status.toLowerCase() !== 'x' && task.dueDate) {
                const dateKey = moment(task.dueDate).format("YYYY-MM-DD");
                if (!this.tasksByDate.has(dateKey)) {
                    this.tasksByDate.set(dateKey, []);
                }
                this.tasksByDate.get(dateKey).push(task);
                newDateKeys.add(dateKey);
            }
        }

        if (newDateKeys.size > 0) {
            this.fileToTaskDates.set(file.path, newDateKeys);
        }
    }

    /**
     * Updates the highlighter div with <mark> tags to show search term matches.
     */
    updateScratchpadHighlights() {
        if (!this.scratchHighlighterEl || !this.noteTextarea) return;

        const text = this.noteTextarea.value;
        const term = this.scratchpadSearchTerm;

        if (!term) {
            this.scratchHighlighterEl.innerHTML = '';
            return;
        }

        // Sanitize text to prevent HTML injection before inserting it into the highlighter.
        const sanitizedText = text
            .replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;");

        const escapedTerm = term.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        const regex = new RegExp(escapedTerm, 'gi');

        const highlightedHtml = sanitizedText.replace(regex, (match) => `<mark>${match}</mark>`);
        this.scratchHighlighterEl.innerHTML = highlightedHtml;
    }

    /**
     * Counts and displays the number of search matches in the scratchpad.
     */
    updateScratchpadSearchCount() {
        if (!this.scratchpadSearchCountEl || !this.noteTextarea) return;

        const term = this.scratchpadSearchTerm;
        const text = this.noteTextarea.value;
        let matchCount = 0;

        if (term) {
            const escapedTerm = term.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
            const regex = new RegExp(escapedTerm, 'gi');
            matchCount = (text.match(regex) || []).length;
        }

        this.scratchpadSearchCountEl.setText(`(${matchCount})`);
    }

    /**
     * Checks if a file path should be ignored based on user settings.
     * @param {string} filePath The path of the file to check.
     * @param {string} settingKey The key for the ignore list in the plugin settings.
     * @returns {boolean} True if the path should be ignored.
     */
    isPathIgnored(filePath, settingKey = 'otherNoteIgnoreFolders') {
        // Normalize folder paths to end with a slash for consistent matching.
        const ignoreFolders = (this.plugin.settings[settingKey] || []).map(f => f.toLowerCase().endsWith('/') ? f.toLowerCase() : f.toLowerCase() + '/');
        const dailyNoteFolder = this.plugin.settings.dailyNotesFolder;
        const filePathLower = filePath.toLowerCase();

        // Always ignore files inside the daily notes folder for "other note" calculations.
        if (dailyNoteFolder && filePathLower.startsWith(dailyNoteFolder.toLowerCase() + "/")) {
            return true;
        }
        return ignoreFolders.some(folder => folder && filePathLower.startsWith(folder));
    }

    /**
     * Adds a file to the createdNotesMap and modifiedNotesMap.
     * @param {TFile} file The file to add.
     */
    addFileToMaps(file) {
        if (this.isPathIgnored(file.path)) return;

        // Add to createdNotesMap.
        const cdate = new Date(file.stat.ctime);
        const cdateKey = moment(cdate).format("YYYY-MM-DD");
        if (!this.createdNotesMap.has(cdateKey)) {
            this.createdNotesMap.set(cdateKey, []);
        }
        const createdFiles = this.createdNotesMap.get(cdateKey);
        if (!createdFiles.some(f => f.path === file.path)) {
            createdFiles.push(file);
        }

        // Add to modifiedNotesMap if modified date is on a different day than creation date.
        const mdate = new Date(file.stat.mtime);
        if (!isSameDay(cdate, mdate)) {
            const mdateKey = moment(mdate).format("YYYY-MM-DD");
            if (!this.modifiedNotesMap.has(mdateKey)) {
                this.modifiedNotesMap.set(mdateKey, []);
            }
            const modifiedFiles = this.modifiedNotesMap.get(mdateKey);
            if (!modifiedFiles.some(f => f.path === file.path)) {
                modifiedFiles.push(file);
            }
        }
    }

    /**
     * Removes a file from all internal note data maps by its path.
     * @param {string} filePath The path of the file to remove.
     */
    removeFileFromMaps(filePath) {
        // Iterate through maps and remove any entries with the given file path.
        for (const [key, files] of this.createdNotesMap.entries()) {
            const updatedFiles = files.filter(f => f.path !== filePath);
            if (updatedFiles.length < files.length) {
                if (updatedFiles.length === 0) {
                    this.createdNotesMap.delete(key);
                } else {
                    this.createdNotesMap.set(key, updatedFiles);
                }
            }
        }
        for (const [key, files] of this.modifiedNotesMap.entries()) {
            const updatedFiles = files.filter(f => f.path !== filePath);
            if (updatedFiles.length < files.length) {
                if (updatedFiles.length === 0) {
                    this.modifiedNotesMap.delete(key);
                } else {
                    this.modifiedNotesMap.set(key, updatedFiles);
                }
            }
        }
    }

    /**
     * Formats a file size in bytes into a human-readable string (B, KB, MB, GB).
     * @param {number} bytes The file size in bytes.
     * @returns {string} The formatted file size.
     */
    formatFileSize(bytes) {
        if (bytes === 0) return '0 B';
        const k = 1024;
        const sizes = ['B', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        const fixed = i < 2 ? 0 : 1;
        return parseFloat((bytes / Math.pow(k, i)).toFixed(fixed)) + ' ' + sizes[i];
    }

    /**
     * Adds a new task to the scratchpad note using the format defined in settings.
     */
    async addNewTaskToScratchpad() {
        if (this.isScratchpadPreview || !this.noteTextarea) {
            return;
        }

        const taskFormatSetting = this.plugin.settings.scratchpad?.taskFormat || "- [ ] ";
        const processed = this.processDatePlaceholders(taskFormatSetting);
        const textToInsert = processed.text;
        const ta = this.noteTextarea;

        // 1. Capture current state
        const selectionStart = ta.selectionStart;
        const textBeforeCursor = ta.value.substring(0, selectionStart);
        const textAfterCursor = ta.value.substring(selectionStart);

        // 2. Prepare new text and update the value
        const needsLeadingNewline = textBeforeCursor.length > 0 && !textBeforeCursor.endsWith("\n");
        const finalInsertionText = needsLeadingNewline ? "\n" + textToInsert : textToInsert;
        const newText = textBeforeCursor + finalInsertionText + textAfterCursor;
        ta.value = newText;

        // 3. Set the new cursor position
        const newCursorPosition = selectionStart + finalInsertionText.length - (textToInsert.length - processed.cursorOffset);
        ta.setSelectionRange(newCursorPosition, newCursorPosition);

        // 4. Give the textarea focus
        ta.focus();

        // 5. Save the new content immediately
        this.noteText = newText;
        await this.saveFixedNote(this.noteText);
        this.updateScratchpadSearchCount();
        this.updateScratchpadHighlights();

        // 6. Use an awaited Promise with a longer delay to ensure this runs LAST.
        await new Promise(resolve => setTimeout(resolve, 50)); // 50ms delay

        const lineHeight = parseFloat(getComputedStyle(ta).lineHeight) || 20;
        const linesToCaret = ta.value.slice(0, newCursorPosition).split("\n").length;
        const targetScrollTop = (linesToCaret - 1) * lineHeight;

        // Directly set the scroll position as the final action.
        ta.scrollTop = targetScrollTop;
    }


    /**
     * Scans all Markdown files in the vault to build the initial `createdNotesMap`.
     */
    async buildCreatedNotesMap() {
        this.createdNotesMap.clear();
        const allNotes = this.app.vault.getMarkdownFiles();
        for (const file of allNotes) {
            if (this.isPathIgnored(file.path)) continue;

            const cdate = new Date(file.stat.ctime);
            const dateKey = moment(cdate).format("YYYY-MM-DD");
            if (!this.createdNotesMap.has(dateKey)) {
                this.createdNotesMap.set(dateKey, []);
            }
            this.createdNotesMap.get(dateKey).push(file);
        }
    }

    /**
     * Scans all Markdown files in the vault to build the initial `modifiedNotesMap`.
     */
    async buildModifiedNotesMap() {
        this.modifiedNotesMap.clear();
        const allNotes = this.app.vault.getMarkdownFiles();
        for (const file of allNotes) {
            if (this.isPathIgnored(file.path)) continue;

            const cdate = new Date(file.stat.ctime);
            const mdate = new Date(file.stat.mtime);
            if (!isSameDay(cdate, mdate)) {
                const dateKey = moment(mdate).format("YYYY-MM-DD");
                if (!this.modifiedNotesMap.has(dateKey)) {
                    this.modifiedNotesMap.set(dateKey, []);
                }
                if (!this.modifiedNotesMap.get(dateKey).some(f => f.path === file.path)) {
                    this.modifiedNotesMap.get(dateKey).push(file);
                }
            }
        }
    }

    /**
     * Scans all non-Markdown files in the vault to build the `assetCreationMap`.
     */
    async buildAssetCreationMap() {
        this.assetCreationMap.clear();
        const allFiles = this.app.vault.getFiles();
        const ignoreFolders = (this.plugin.settings.assetIgnoreFolders || []).map(f => f.toLowerCase().endsWith('/') ? f.toLowerCase() : f.toLowerCase() + '/');
        const hiddenTypes = (this.plugin.settings.hiddenAssetTypes || "")
            .split(',')
            .map(ext => ext.trim().toLowerCase())
            .filter(ext => ext.length > 0);

        for (const file of allFiles) {
            if (file.path.toLowerCase().endsWith('.md')) continue;
            if (hiddenTypes.includes(file.extension.toLowerCase())) continue; // Filter by extension

            const filePathLower = file.path.toLowerCase();
            if (ignoreFolders.some(folder => folder && filePathLower.startsWith(folder))) continue;

            const cdate = new Date(file.stat.ctime);
            const dateKey = moment(cdate).format("YYYY-MM-DD");
            if (!this.assetCreationMap.has(dateKey)) {
                this.assetCreationMap.set(dateKey, []);
            }
            this.assetCreationMap.get(dateKey).push(file);
        }
    }

    /**
     * Finds all asset files in the vault that are not linked to from any Markdown file.
     * @returns {Promise<Set<string>>} A promise that resolves to a Set of unused asset paths.
     */
    async getUnusedAssetPaths() {
        const allMarkdownFiles = this.app.vault.getMarkdownFiles();
        const referencedAssetPaths = new Set();

        for (const mdFile of allMarkdownFiles) {
            const cache = this.app.metadataCache.getFileCache(mdFile);
            if (!cache) continue;

            const linksAndEmbeds = [...(cache.embeds || []), ...(cache.links || [])];

            for (const ref of linksAndEmbeds) {
                const linkedFile = this.app.metadataCache.getFirstLinkpathDest(ref.link, mdFile.path);
                if (linkedFile && !linkedFile.path.toLowerCase().endsWith('.md')) {
                    referencedAssetPaths.add(linkedFile.path);
                }
            }
        }
        const allAssetPaths = this.app.vault.getFiles()
            .filter(file => !file.path.toLowerCase().endsWith('.md'))
            .map(file => file.path);

        const unusedAssetPaths = new Set(allAssetPaths.filter(assetPath => !referencedAssetPaths.has(assetPath)));
        return unusedAssetPaths;
    }

    _createBacklinkItem(container, noteFile, assetFile) {
        const itemEl = container.createDiv({ cls: 'other-notes-popup-item' });

        if (this.isImageAsset(noteFile)) {
            const thumbnail = itemEl.createEl('img', { cls: 'popup-asset-thumbnail' });
            thumbnail.src = this.app.vault.getResourcePath(noteFile);
        } else {
            setIcon(itemEl, 'file-text'); // Fallback to a generic icon
        }

        const titlePathWrapper = itemEl.createDiv({ cls: 'note-title-path-wrapper' });
        titlePathWrapper.createDiv({ text: noteFile.basename, cls: 'note-title' });
        if (noteFile.parent && noteFile.parent.path !== '/') {
            titlePathWrapper.createDiv({ text: noteFile.parent.path, cls: 'note-path' });
        }

        itemEl.addEventListener('click', async () => {
            // Find the specific line where the asset is mentioned
            const cache = this.app.metadataCache.getFileCache(noteFile);
            let targetLine = 0;
            if (cache) {
                const allLinks = [...(cache.embeds || []), ...(cache.links || [])];
                for (const ref of allLinks) {
                    const linkedFile = this.app.metadataCache.getFirstLinkpathDest(ref.link, noteFile.path);
                    if (linkedFile && linkedFile.path === assetFile.path) {
                        targetLine = ref.position.start.line;
                        break;
                    }
                }
            }

            const openInNewTab = this.plugin.settings.notesOpenAction === 'new-tab';
            const leaf = this.app.workspace.getLeaf(openInNewTab);
            await leaf.openFile(noteFile, { eState: { line: targetLine } }); // Open and scroll to the line
            this.hideFilePopup();
        });
    }

    isImageAsset(file) {
        const imageExtensions = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'svg'];
        return imageExtensions.includes(file.extension.toLowerCase());
    }

    async showNotePopup(targetEl, noteFile) {
        this.hideFilePopup(); // Clear any existing popups

        this.popupEl = createDiv({ cls: 'other-notes-popup' });

        // --- 1. Header with Note Basename and Path ---
        const headerRow = this.popupEl.createDiv({ cls: 'popup-header' });
        headerRow.addEventListener('click', () => this.hideFilePopup());

        const titleContainer = headerRow.createDiv({ cls: 'popup-title-container' });
        // Use .basename to show name without .md extension
        titleContainer.createEl('div', { text: noteFile.basename, cls: 'popup-header-title' });
        //titleContainer.createEl('div', { text: noteFile.path, cls: 'popup-header-path' });

        const closeBtn = headerRow.createDiv({ cls: 'popup-close-btn' });
        setIcon(closeBtn, 'x');
        closeBtn.addEventListener('click', () => this.hideFilePopup());

        const contentWrapper = this.popupEl.createDiv({ cls: 'popup-content-wrapper' });

        // --- 2. File Details Section ---
        contentWrapper.createEl('h6', { text: 'Details', cls: 'popup-section-header' });
        const infoContainer = contentWrapper.createDiv({ cls: 'other-notes-popup-item is-clickable' });
        infoContainer.addEventListener('click', () => {
            const openInNewTab = this.plugin.settings.notesOpenAction === 'new-tab';
            this.app.workspace.getLeaf(openInNewTab).openFile(noteFile);
            this.hideFilePopup();
        });

        setIcon(infoContainer, 'info');
        const infoWrapper = infoContainer.createDiv({ cls: 'note-title-path-wrapper' });

        const size = this.formatFileSize ? this.formatFileSize(noteFile.stat.size) : 'N/A';
        const created = this.formatDateTime ? this.formatDateTime(new Date(noteFile.stat.ctime)) : 'N/A';
        const modified = this.formatDateTime ? this.formatDateTime(new Date(noteFile.stat.mtime)) : 'N/A';

        infoWrapper.createDiv({ text: `Created: ${created}`, cls: 'note-path' });
        infoWrapper.createDiv({ text: `Modified: ${modified}`, cls: 'note-path' });
        infoWrapper.createDiv({ text: `Size: ${size}`, cls: 'note-path' });
        infoWrapper.createDiv({ text: `Path: ${noteFile.path}`, cls: 'note-path' });

        const cache = this.app.metadataCache.getFileCache(noteFile);
        let tagsText = 'No tags'; // Initialize with the default value

        if (cache && cache.tags && cache.tags.length > 0) {
            const tagStrings = cache.tags.map(t => t.tag);
            // Use a Set to get unique values, then sort alphabetically
            const uniqueTags = [...new Set(tagStrings)].sort();
            tagsText = uniqueTags.join(', ');
        }
        infoWrapper.createDiv({ text: `Tags: ${tagsText}`, cls: 'note-path' });

        contentWrapper.createDiv({ cls: 'popup-separator' });
        const footer = this.popupEl.createDiv({ cls: 'popup-actions-footer' });

        const deleteBtn = footer.createDiv({ cls: 'popup-action-icon-btn mod-danger' });
        setIcon(deleteBtn, 'trash-2'); // Use the Lucide 'trash-2' icon
        deleteBtn.setAttribute('aria-label', 'Delete File'); // For accessibility

        deleteBtn.addEventListener('click', () => {
            this.hideFilePopup();
            this.handleDeleteFile(noteFile);
        });

        // --- 3. Linked Assets Section ---
        const linkedAssets = [];
        if (cache) {
            const allLinks = [...(cache.embeds || []), ...(cache.links || [])];
            for (const ref of allLinks) {
                const linkedFile = this.app.metadataCache.getFirstLinkpathDest(ref.link, noteFile.path);
                if (linkedFile && !linkedFile.path.toLowerCase().endsWith('.md')) {
                    if (!linkedAssets.some(asset => asset.path === linkedFile.path)) {
                        linkedAssets.push(linkedFile);
                    }
                }
            }
        }

        if (linkedAssets.length > 0) {
            contentWrapper.createEl('h6', { text: 'Assets in Note', cls: 'popup-section-header' });
            linkedAssets.forEach(assetFile => {
                // Assuming you have a helper like _createBacklinkItem that shows a preview
                this._createAssetListItem(contentWrapper, assetFile);
            });
        }

        // --- 4. Finalize and Display ---
        document.body.appendChild(this.popupEl);
        if (this.positionPopup) {
            this.positionPopup(targetEl);
        }

        this.popupEl.addEventListener('mouseenter', () => clearTimeout(this.hideTimeout));
        this.popupEl.addEventListener('mouseleave', () => {
            this.hideTimeout = setTimeout(() => this.hideFilePopup(), this.plugin.settings.popupHideDelay);
        });
    }

    positionPopup(targetEl) {
        if (!this.popupEl) return;

        const popupRect = this.popupEl.getBoundingClientRect();
        const targetRect = targetEl.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;
        const margin = this.plugin.settings.popupGap;
        let finalTop = targetRect.bottom + margin;

        // Standard overflow check (keep this)
        if (finalTop + popupRect.height > viewportHeight) {
            finalTop = targetRect.top - popupRect.height - margin;
        }

        // Mobile-specific logic to force to bottom half
        if (Platform.isMobile) {
            const viewportMidpoint = viewportHeight / 2;
            if (finalTop < viewportMidpoint) {
                finalTop = viewportMidpoint; // Force it to start at the halfway mark
            }
        }

        // Ensure it doesn't go off the top of the screen after the mobile adjustment
        if (finalTop < 0) {
            finalTop = margin;
        }

        // Adjust left position as before
        let finalLeft = targetRect.left;
        if (finalLeft + popupRect.width > viewportWidth) {
            finalLeft = targetRect.right - popupRect.width;
        }
        if (finalLeft < 0) {
            finalLeft = margin;
        }

        this.popupEl.style.top = `${finalTop}px`;
        this.popupEl.style.left = `${finalLeft}px`;
    }


    _createAssetListItem(container, assetFile) {
        const itemEl = container.createDiv({ cls: 'other-notes-popup-item is-clickable' });

        // Show a thumbnail preview if it's an image asset
        if (this.isImageAsset(assetFile)) {
            const thumbnail = itemEl.createEl('img', { cls: 'popup-asset-thumbnail' });
            thumbnail.src = this.app.vault.getResourcePath(assetFile);
        } else {
            setIcon(itemEl, 'file-text'); // Fallback icon for non-image files
        }

        // Display the asset's name and parent folder path
        const titlePathWrapper = itemEl.createDiv({ cls: 'note-title-path-wrapper' });
        titlePathWrapper.createDiv({ text: assetFile.basename, cls: 'note-title' });
        if (assetFile.parent && assetFile.parent.path !== '/') {
            titlePathWrapper.createDiv({ text: assetFile.parent.path, cls: 'note-path' });
        }

        // Add a click listener to open the asset file
        itemEl.addEventListener('click', async () => {
            const openInNewTab = this.plugin.settings.assetsOpenAction === 'new-tab';
            const leaf = this.app.workspace.getLeaf(openInNewTab);
            await leaf.openFile(assetFile);
            this.hideFilePopup(); // Close the popup after clicking
        });
    }

    async showAssetPopup(targetEl, assetFile) {
        this.hideFilePopup();
        const backlinks = await this.findAssetBacklinks(assetFile);
        this.popupEl = createDiv({ cls: 'other-notes-popup' });

        // --- 1. Header ---
        const headerRow = this.popupEl.createDiv({ cls: 'popup-header' });
        const titleContainer = headerRow.createDiv({ cls: 'popup-title-container' });
        titleContainer.createEl('div', { text: assetFile.name, cls: 'popup-header-title' });
        const closeBtn = headerRow.createDiv({ cls: 'popup-close-btn' });
        setIcon(closeBtn, 'x');
        headerRow.addEventListener('click', () => this.hideFilePopup());

        const contentWrapper = this.popupEl.createDiv({ cls: 'popup-content-wrapper' });

        // --- 2. Asset Details & Preview ---
        contentWrapper.createEl('h6', { text: 'Details', cls: 'popup-section-header' });
        const infoContainer = contentWrapper.createDiv({ cls: 'other-notes-popup-item' });
        infoContainer.addEventListener('click', (e) => {
            this.handleFileClick(assetFile, e);
            this.hideFilePopup();
        });

        if (this.isImageAsset(assetFile)) {
            const thumbnail = infoContainer.createEl('img', { cls: 'popup-asset-thumbnail' });
            thumbnail.src = this.app.vault.getResourcePath(assetFile);
        } else {
            setIcon(infoContainer, 'file-question');
        }
        const infoWrapper = infoContainer.createDiv({ cls: 'note-title-path-wrapper' });
        infoWrapper.createDiv({ text: `Modified: ${this.formatDateTime(new Date(assetFile.stat.mtime))}`, cls: 'note-path' });
        infoWrapper.createDiv({ text: `Size: ${this.formatFileSize(assetFile.stat.size)}`, cls: 'note-path' });
        infoWrapper.createDiv({ text: `Path: ${assetFile.path}`, cls: 'note-path' });

        // --- 3. Backlinks Section ---
        if (backlinks.length > 0) {
            contentWrapper.createDiv({ cls: 'popup-separator' });
            contentWrapper.createEl('h6', { text: `Used in ${backlinks.length} note(s)`, cls: 'popup-section-header' });
            backlinks.forEach(noteFile => {
                this._createBacklinkItem(contentWrapper, noteFile, assetFile);
            });
        }

        // --- 4. Actions Section ---
        const footer = this.popupEl.createDiv({ cls: 'popup-actions-footer' });

        if (backlinks.length === 0) {
            // NEW: Use a dedicated class for the info message for easy styling
            const infoMessage = footer.createDiv({ cls: 'popup-info-message' });
            setIcon(infoMessage, 'info');
            infoMessage.createSpan({ text: 'Not used in any notes.' });
        }

        // This spacer pushes the delete button to the far right
        footer.createDiv({ style: 'flex-grow: 1;' });

        // Create the icon button
        const deleteBtn = footer.createDiv({ cls: 'popup-action-icon-btn mod-danger' });
        setIcon(deleteBtn, 'trash-2');
        deleteBtn.setAttribute('aria-label', 'Delete Asset');

        deleteBtn.addEventListener('click', () => {
            this.hideFilePopup();
            this.handleDeleteFile(assetFile);
        });


        // --- 5. Finalize and Display ---
        document.body.appendChild(this.popupEl);
        this.positionPopup(targetEl);
        this.popupEl.addEventListener('mouseenter', () => clearTimeout(this.hideTimeout));
        this.popupEl.addEventListener('mouseleave', () => {
            this.hideTimeout = setTimeout(() => this.hideFilePopup(), this.plugin.settings.popupHideDelay);
        });
    }

    /**
     * Shows a confirmation modal and handles the permanent deletion of any file.
     * After deletion, it refreshes the notes and assets tabs.
     * @param {TFile} file - The file (note or asset) to delete.
     */
    async handleDeleteFile(file) {
        new ConfirmationModal(
            this.app,
            'Confirm Deletion',
            `Are you sure you want to permanently delete "${file.name}"? This action cannot be undone.`,
            async () => {
                try {
                    await this.app.vault.trash(file, true); // true for permanent deletion
                    new Notice(`Deleted: ${file.name}`);

                    // Refresh all relevant views
                    this.populateNotes();
                    this.populateAssets();

                    // Also refresh the calendar to remove any dots associated with the file
                    this.renderCalendar();

                } catch (err) {
                    new Notice(`Error deleting file: ${err.message}`);
                    console.error("Error during file deletion:", err);
                }
            },
            'Yes, delete'
        ).open();
    }

    /**
     * Formats a date to show time if it's today, otherwise shows the full date.
     * @param {Date} date The date to format.
     * @returns {string} The formatted date string.
     */
    formatDateTime(date) {
        if (!date) return 'N/A';
        // Ensure you are using the moment.js library instance available in Obsidian
        const momentDate = moment(date);
        if (momentDate.isSame(new Date(), 'day')) {
            return momentDate.format('HH:mm');
        }
        return momentDate.format('DD-MM-YYYY');
    }

    /**
     * Formats file size in bytes into a human-readable string (KB, MB, etc.).
     * @param {number} bytes The size of the file in bytes.
     * @returns {string} The formatted file size string.
     */
    formatFileSize(bytes) {
        if (bytes === undefined || bytes === null) return 'N/A';
        if (bytes === 0) return '0 B';

        const units = ['B', 'KB', 'MB', 'GB', 'TB'];
        const i = Math.floor(Math.log(bytes) / Math.log(1024));

        return `${parseFloat((bytes / Math.pow(1024, i)).toFixed(2))} ${units[i]}`;
    }

    /**
     * Renders the list of recent assets in the "Assets" tab.
     */
    async populateAssets() {
        if (!this.assetsContentEl) return;
        this.assetsContentEl.empty();

        const settings = this.plugin.settings;
        let unusedAssetPaths = new Set();
        if (settings.showUnusedAssetsIndicator) {
            if (!this.isUnusedAssetCacheValid) {
                this.unusedAssetPathsCache = await this.getUnusedAssetPaths();
                this.isUnusedAssetCacheValid = true;
            }
            unusedAssetPaths = this.unusedAssetPathsCache;
        }
        const cutoff = moment().startOf('day').subtract(settings.assetsLookbackDays - 1, 'days').valueOf();
        const ignoreFolders = (settings.assetIgnoreFolders || []).map(f => f.toLowerCase().endsWith('/') ? f.toLowerCase() : f.toLowerCase() + '/');
        const hiddenTypes = (settings.hiddenAssetTypes || "").split(',').map(ext => ext.trim().toLowerCase()).filter(ext => ext.length > 0);

        const allAssets = this.app.vault.getFiles()
            .filter(file =>
                !file.path.toLowerCase().endsWith('.md') &&
                !hiddenTypes.includes(file.extension.toLowerCase()) &&
                !ignoreFolders.some(f => file.path.toLowerCase().startsWith(f)) &&
                (file.stat.mtime >= cutoff || file.stat.ctime >= cutoff)
            )
            .sort((a, b) => b.stat.mtime - a.stat.mtime);

        const searchTerm = this.assetsSearchTerm.toLowerCase();
        const filteredAssets = searchTerm ? allAssets.filter(file => file.name.toLowerCase().includes(searchTerm)) : allAssets;
        const searchInputEl = this.assetsSearchInputEl;

        const groups = { today: [], yesterday: [], thisWeek: [], lastWeek: [], thisMonth: [], older: [] };
        const now = moment();
        filteredAssets.forEach(file => {
            const modTime = moment(file.stat.mtime);
            if (modTime.isSame(now, 'day')) groups.today.push(file);
            else if (modTime.isSame(now.clone().subtract(1, 'day'), 'day')) groups.yesterday.push(file);
            else if (modTime.isSame(now, 'week')) groups.thisWeek.push(file);
            else if (modTime.isSame(now.clone().subtract(1, 'week'), 'week')) groups.lastWeek.push(file);
            else if (modTime.isSame(now, 'month')) groups.thisMonth.push(file);
            else groups.older.push(file);
        });

        const groupOrder = [
            { key: 'today', label: 'Today' }, { key: 'yesterday', label: 'Yesterday' },
            { key: 'thisWeek', label: 'This Week' }, { key: 'lastWeek', label: 'Last Week' },
            { key: 'thisMonth', label: 'This Month' }, { key: 'older', label: 'Older' },
        ];

        if (filteredAssets.length === 0) {
            this.assetsContentEl.createDiv({ text: 'No assets found', cls: 'task-group-empty-message' });
            return;
        }

        groupOrder.forEach(groupInfo => {
            const assetsInGroup = groups[groupInfo.key];
            if (assetsInGroup.length > 0) {
                const groupContainer = this.assetsContentEl.createDiv({ cls: 'note-group-container' });
                const isCollapsed = this.collapsedAssetGroups[groupInfo.key];
                if (isCollapsed) groupContainer.addClass('is-collapsed');

                const header = groupContainer.createDiv({ cls: 'note-group-header' });
                const headerContent = header.createDiv({ cls: 'note-group-header-content' });
                const collapseIcon = headerContent.createDiv({ cls: 'note-group-collapse-icon' });
                setIcon(collapseIcon, 'chevron-down');
                headerContent.createSpan({ text: groupInfo.label });
                header.createDiv({ cls: 'note-group-count', text: assetsInGroup.length });


                header.addEventListener('click', () => {
                    // Toggle the collapsed state
                    const isCurrentlyCollapsed = groupContainer.classList.toggle('is-collapsed');

                    // Update and save the state
                    this.collapsedAssetGroups[groupInfo.key] = isCurrentlyCollapsed;
                    this.plugin.saveSettings();
                });

                const listWrapper = groupContainer.createDiv({ cls: 'note-list-wrapper' });

                if (this.isAssetsGridView) {
                    listWrapper.addClass('assets-grid-view');
                    assetsInGroup.forEach(file => {
                        // This single 'item' will be either a grid box or a list row.
                        const item = this.isAssetsGridView
                            ? listWrapper.createDiv({ cls: 'asset-grid-item' })
                            : listWrapper.createDiv({ cls: 'note-row' });

                        // --- 1. SETUP EVENT LISTENERS (for the entire item) ---
                        let longPressOccurred = false;

                        if (Platform.isMobile) {
                            // Mobile: Touch-and-hold for popup
                            let touchTimer;
                            item.addEventListener('touchstart', (e) => {
                                longPressOccurred = false;
                                touchTimer = setTimeout(() => {
                                    longPressOccurred = true;
                                    this.showAssetPopup(item, file);
                                    //this.showAssetGridPopup(item, file);
                                }, 500);
                            });
                            const cancelTimer = () => clearTimeout(touchTimer);
                            item.addEventListener('touchend', cancelTimer);
                            item.addEventListener('touchmove', cancelTimer);
                        } else {
                            // Desktop: Hover for popup
                            let t;
                            item.addEventListener('mouseenter', () => {
                                clearTimeout(this.hideTimeout);
                                this.hideFilePopup();
                                t = setTimeout(() => {
                                    this.showAssetPopup(item, file);
                                    //this.showAssetGridPopup(item, file);
                                }, this.plugin.settings.otherNoteHoverDelay);
                            });
                            item.addEventListener('mouseleave', () => {
                                clearTimeout(t);
                                this.hideTimeout = setTimeout(() => {
                                    this.hideFilePopup();
                                }, this.plugin.settings.popupHideDelay);
                            });
                        }

                        // --- 2. SETUP THE PRIMARY CLICK ACTION (the only click listener) ---
                        item.addEventListener('click', (e) => {
                            if (longPressOccurred) {
                                return; // A long press just happened, so do nothing.
                            }
                            // Otherwise, open the asset file.
                            this.handleFileClick(file, e);
                        });

                        // --- 3. BUILD THE ITEM'S VISUAL CONTENT (without any new listeners) ---
                        if (this.isAssetsGridView) {
                            const preview = item.createDiv('asset-grid-preview');
                            if (this.isImageAsset(file)) {
                                const thumbnail = preview.createEl('img');
                                thumbnail.src = this.app.vault.getResourcePath(file);
                            } else {
                                setIcon(preview, 'file-question');
                            }
                            item.createDiv({ text: file.name, cls: 'asset-grid-name' });
                        } else { // List View
                            const titleWrapper = item.createDiv({ cls: 'note-title-wrapper' });
                            const iconContainer = titleWrapper.createDiv({ cls: 'asset-icon-container' });
                            if (this.isImageAsset(file)) {
                                const thumbnail = iconContainer.createEl('img', { cls: 'asset-thumbnail' });
                                thumbnail.src = this.app.vault.getResourcePath(file);
                            } else {
                                setIcon(iconContainer, 'file-text');
                            }
                            const titleEl = titleWrapper.createDiv({ text: file.name, cls: 'note-title' });
                            titleEl.setAttribute('aria-label', file.path);
                            const metaContainer = item.createDiv({ cls: 'note-meta-container' });
                            metaContainer.createSpan({ text: this.formatFileSize(file.stat.size), cls: 'note-file-size' });
                            metaContainer.createSpan({ text: formatDateTime(new Date(file.stat.mtime)), cls: 'note-mod-date' });
                        }

                    });
                } else {
                    listWrapper.removeClass('assets-grid-view');
                    assetsInGroup.forEach(file => {
                        const row = listWrapper.createDiv("note-row");

                        if (Platform.isMobile) {
                            let touchTimer;
                            row.addEventListener('touchstart', (e) => {
                                touchTimer = setTimeout(() => {
                                    this.showNotePopup(row, file);
                                }, 500); // Standard 500ms long-press duration
                            });

                            const cancelTimer = () => {
                                clearTimeout(touchTimer);
                            };

                            row.addEventListener('touchend', cancelTimer);
                            row.addEventListener('touchmove', cancelTimer);

                        } else if (settings.showNoteTooltips) {

                            let t;
                            row.addEventListener('mouseenter', () => {
                                clearTimeout(this.hideTimeout);
                                this.hideFilePopup();
                                //t = setTimeout(() => this.showAssetGridPopup(row, file), this.plugin.settings.otherNoteHoverDelay);
                                t = setTimeout(() => this.showAssetPopup(row, file), this.plugin.settings.otherNoteHoverDelay);

                            });
                            row.addEventListener('mouseleave', () => {
                                clearTimeout(t);
                                this.hideTimeout = setTimeout(() => this.hideFilePopup(), this.plugin.settings.popupHideDelay);
                            });
                        }


                        const isUnused = unusedAssetPaths.has(file.path);
                        const titleWrapper = row.createDiv({ cls: 'note-title-wrapper' });
                        const iconContainer = titleWrapper.createDiv({ cls: 'asset-icon-container' });
                        if (this.isImageAsset(file)) {
                            const thumbnail = iconContainer.createEl('img', { cls: 'asset-thumbnail' });
                            thumbnail.src = this.app.vault.getResourcePath(file);
                        }

                        // --- CLICK ICON TO OPEN ASSET ---
                        iconContainer.addEventListener('click', (e) => {
                            e.stopPropagation(); // Prevents the row's click listener from also firing
                            this.handleFileClick(file, e);
                        });

                        if (isUnused && settings.showUnusedAssetsIndicator) {
                            const actionIconContainer = titleWrapper.createDiv({ cls: 'asset-action-icon' });
                            const unlinkIcon = actionIconContainer.createDiv();
                            setIcon(unlinkIcon, 'unlink');
                            const deleteIcon = actionIconContainer.createDiv();
                            setIcon(deleteIcon, 'trash');
                            actionIconContainer.addEventListener('click', (e) => {
                                e.stopPropagation();
                                this.handleDeleteFile(file);
                            });
                        }

                        titleWrapper.createDiv({ text: file.name, cls: "note-title" });
                        const metaContainer = row.createDiv({ cls: 'note-meta-container' });
                        metaContainer.createSpan({ text: this.formatFileSize(file.stat.size), cls: "note-file-size" });
                        metaContainer.createSpan({ text: formatDateTime(new Date(file.stat.mtime)), cls: "note-mod-date" });

                        // --- CLICK ROW TO FIND NOTE(S) ---
                        row.addEventListener("click", async () => {
                            const backlinks = await this.findAssetBacklinks(file);
                            if (backlinks.length === 1) {
                                // If there's only one backlink, find its line number and scroll to it.
                                const noteFile = backlinks[0];
                                const cache = this.app.metadataCache.getFileCache(noteFile);
                                let targetLine = 0;
                                if (cache) {
                                    const allLinks = [...(cache.embeds || []), ...(cache.links || [])];
                                    for (const ref of allLinks) {
                                        const linkedFile = this.app.metadataCache.getFirstLinkpathDest(ref.link, noteFile.path);
                                        if (linkedFile && linkedFile.path === file.path) {
                                            targetLine = ref.position.start.line;
                                            break;
                                        }
                                    }
                                }
                                const openInNewTab = this.plugin.settings.notesOpenAction === 'new-tab';
                                const leaf = this.app.workspace.getLeaf(openInNewTab);
                                await leaf.openFile(noteFile, { eState: { line: targetLine } });

                            } else if (backlinks.length > 1) {
                                this.showBacklinksPopup(row, file);
                            } else {
                                new Notice("This asset is not used in any notes.");
                            }
                        });

                        this.addKeydownListeners(row, searchInputEl);
                    });
                }
            }
        });
    }

    /**
     * Gets the final, ordered list of tabs to display, combining user-defined order
     * with the full list of possible tabs to ensure none are missing.
     * @returns {string[]} An array of tab keys in the correct order.
     */
    getFinalTabOrder() {
        const allPossibleTabs = Object.keys(this.plugin.settings.tabVisibility);
        const userTabOrder = this.plugin.settings.tabOrder || allPossibleTabs;
        // Use a Set to merge the user's order with all possible tabs, ensuring no duplicates and that new tabs are appended.
        const finalTabOrder = [...new Set([...userTabOrder, ...allPossibleTabs])];
        return finalTabOrder;
    }

    /**
     * Adds a non-Markdown file to the `assetCreationMap`.
     * @param {TFile} file The asset file to add.
     */
    addFileToAssetMap(file) {
        if (file.path.toLowerCase().endsWith('.md')) return;

        const ignoreFolders = (this.plugin.settings.assetIgnoreFolders || []).map(f => f.toLowerCase().endsWith('/') ? f.toLowerCase() : f.toLowerCase() + '/');
        const filePathLower = file.path.toLowerCase();
        if (ignoreFolders.some(folder => folder && filePathLower.startsWith(folder))) return;

        const cdate = new Date(file.stat.ctime);
        const dateKey = moment(cdate).format("YYYY-MM-DD");
        if (!this.assetCreationMap.has(dateKey)) {
            this.assetCreationMap.set(dateKey, []);
        }
        const assets = this.assetCreationMap.get(dateKey);
        if (!assets.some(f => f.path === file.path)) {
            assets.push(file);
        }
    }

    /**
     * Removes a non-Markdown file from the `assetCreationMap` by its path.
     * @param {string} filePath The path of the asset file to remove.
     */
    removeFileFromAssetMap(filePath) {
        if (filePath.toLowerCase().endsWith('.md')) return;

        for (const [key, files] of this.assetCreationMap.entries()) {
            const updatedFiles = files.filter(f => f.path !== filePath);
            if (updatedFiles.length < files.length) {
                if (updatedFiles.length === 0) {
                    this.assetCreationMap.delete(key);
                } else {
                    this.assetCreationMap.set(key, updatedFiles);
                }
            }
        }
    }

    /**
     * Adds hover event listeners to table headers to highlight the entire column.
     * This version fixes two bugs:
     * 1. A race condition on initial load by querying for rows inside the event listener.
     * 2. A state conflict by intelligently restoring the current week highlight on mouseleave.
     *
     * @param {HTMLTableRowElement} headerRow The <tr> element containing the header cells.
     * @param {HTMLTableSectionElement} tableBody The <tbody> element of the calendar table.
     */
    addColumnHighlighting(headerRow, tableBody) {
        if (!this.plugin.settings.enableColumnHighlight) return;

        const headerCells = headerRow.querySelectorAll("th");
        document.body.classList.contains('theme-dark')
            ? this.plugin.settings.rowHighlightColorDark
            : this.plugin.settings.rowHighlightColorLight;

        headerCells.forEach((th, colIndex) => {
            if (!th.textContent.trim()) return;

            th.addEventListener('mouseenter', () => {
                const rows = tableBody.querySelectorAll('tr');
                th.classList.add('column-hover');
                rows.forEach(row => row.children[colIndex]?.classList.add('column-hover'));
            });

            th.addEventListener('mouseleave', () => {
                const rows = tableBody.querySelectorAll('tr');
                th.classList.remove('column-hover');
                rows.forEach(row => row.children[colIndex]?.classList.remove('column-hover'));
            });
        });
    }


    /**
     * Populates a given HTML element with the styled month and year title,
     * respecting all user settings. This is the single source of truth for all titles.
     * @param {HTMLElement} targetEl The element to populate.
     * @param {Date} date The date to display.
     */
    populateStyledTitle(targetEl, date) {
        if (!targetEl) return;

        targetEl.empty();

        const format = this.plugin.settings.monthTitleFormat || "MMMM YYYY";
        const formatParts = format.split(' ');

        formatParts.forEach((part, index) => {
            const isYear = /[Yy]/.test(part);

            targetEl.createSpan({
                cls: isYear ? 'month-title-year' : 'month-title-month',
                text: moment(date).format(part)
            });

            // If this is not the last part, append a NON-BREAKING space.
            // This is the only reliable way to ensure a space is rendered in a flex container.
            if (index < formatParts.length - 1) {
                targetEl.appendText('\u00A0'); // This is the unicode for a non-breaking space (&nbsp;)
            }
        });
    }


    /**
     * Formats the period and week numbers according to the user's preference.
     * @param {number} period The period number.
     * @param {number} week The week number.
     * @returns {string} The formatted string.
     */
    formatPW(period, week) { return this.plugin.settings.pwFormat.replace('#', period).replace('#', week); }

    /**
     * Renders the infinite-scrolling vertical calendar view.
     * @param {HTMLElement} container The parent element to render into.
     */
    renderVerticalCalendar(container) {
        this.intersectionObserver?.disconnect();

        // FIX 1: The variable is now a class property `this.verticalScrollerEl`
        this.verticalScrollerEl = container.createDiv("vertical-calendar-scroller");

        const initialMonthId = `month-${this.displayedMonth.getFullYear()}-${this.displayedMonth.getMonth()}`;
        const numMonthsAfter = 12;
        for (let i = -6; i <= numMonthsAfter; i++) {
            const monthDate = new Date(this.displayedMonth.getFullYear(), this.displayedMonth.getMonth() + i, 1);

            // FIX 2: Use the new class property here
            const monthWrapper = this.verticalScrollerEl.createDiv({ cls: "vertical-month-wrapper" });

            monthWrapper.id = `month-${monthDate.getFullYear()}-${monthDate.getMonth()}`;

            // Create the month title heading for the vertical list.
            const monthTitleEl = monthWrapper.createEl("h3", {
                cls: "vertical-month-title",
                // Set the initial text using the simple formatter.
                text: formatMonthTitle(monthDate, this.plugin.settings.monthTitleFormat)
            });
            monthTitleEl.style.cursor = "pointer";

            let hoverTimeout;

            monthTitleEl.addEventListener('mouseenter', () => {
                // After 400ms, use our new helper to build the perfectly consistent, styled title.
                hoverTimeout = setTimeout(() => {
                    this.populateStyledTitle(monthTitleEl, monthDate);
                }, 500);
            });

            monthTitleEl.addEventListener('mouseleave', () => {
                clearTimeout(hoverTimeout);
                // On leave, revert back to the simple text format.
                monthTitleEl.empty();
                monthTitleEl.setText(formatMonthTitle(monthDate, this.plugin.settings.monthTitleFormat));
            });

            monthTitleEl.addEventListener('click', () => {
                // Click logic remains the same.
                this.displayedMonth = monthDate;
                this.isVerticalView = false;
                this.render();
            });

            const table = monthWrapper.createEl("table", { cls: "period-calendar-table" });
            const thead = table.createEl("thead");
            const headerRow = thead.createEl("tr");

            if (this.plugin.settings.showPWColumn) {
                headerRow.createEl("th", { text: " " });
            }
            if (this.plugin.settings.showWeekNumbers) {
                headerRow.createEl("th", { text: this.plugin.settings.weekNumberColumnLabel });
            }
            const startDayOffset = this.plugin.settings.weekStartDay === 'monday' ? 1 : 0;
            for (let d = 0; d < 7; d++) {
                const dayIndex = (d + startDayOffset) % 7;
                headerRow.createEl("th", { text: moment().day(dayIndex).format("ddd").toUpperCase() });
            }

            // Add today's header highlight
            if (this.plugin.settings.highlightTodayDayHeader) {
                const today = new Date();
                if (monthDate.getFullYear() === today.getFullYear() && monthDate.getMonth() === today.getMonth()) {
                    const todayHeaderIndex = Array.from(headerRow.children).findIndex(th => th.textContent.toLowerCase() === moment(today).format("ddd").toLowerCase());
                    if (todayHeaderIndex !== -1) {
                        headerRow.children[todayHeaderIndex].addClass("today-day-header");
                    }
                }
            }

            const tbody = table.createEl("tbody");
            this.generateMonthGrid(monthDate, tbody);
            this.addColumnHighlighting(headerRow, tbody);
        }

        // After the layout is ready, scroll the initial month into view.
        this.app.workspace.onLayoutReady(() => {
            // SET FLAG before scrolling
            this.isProgrammaticScroll = true;

            const initialEl = this.verticalScrollerEl.querySelector(`#${initialMonthId}`);
            if (initialEl) {
                initialEl.scrollIntoView({ block: 'start' });
            }

            // CLEAR FLAG after scroll completes
            setTimeout(() => {
                this.isProgrammaticScroll = false;
            }, 300);
        });

        // Use a scroll listener to update the main header title.
        this.verticalScrollerEl.addEventListener('scroll', () => {

            // if programmatic scroll is in progress, do nothing
            if (this.isProgrammaticScroll) {
                return;
            }

            clearTimeout(this.titleUpdateTimeout);
            this.titleUpdateTimeout = setTimeout(() => {
                let topmostVisibleMonth = null;
                let smallestTopValue = Infinity;

                const scrollerTop = this.verticalScrollerEl.getBoundingClientRect().top;
                const monthElements = this.verticalScrollerEl.querySelectorAll('.vertical-month-wrapper');

                for (const monthEl of monthElements) {
                    const monthTop = monthEl.getBoundingClientRect().top;
                    if (monthTop >= scrollerTop && monthTop < smallestTopValue) {
                        smallestTopValue = monthTop;
                        topmostVisibleMonth = monthEl;
                    }
                }
                if (topmostVisibleMonth) {
                    const [_, year, month] = topmostVisibleMonth.id.split('-').map(Number);
                    if (this.displayedMonth.getFullYear() !== year || this.displayedMonth.getMonth() !== month) {
                        this.displayedMonth = new Date(year, month, 1);
                        this.updateMonthTitle();
                        this.updateTodayBtnAriaLabel();
                    }
                }
            }, 100);
        });
    }

    async onclose() {
        this.intersectionObserver?.disconnect();
        if (this.dailyRefreshTimeout) clearTimeout(this.dailyRefreshTimeout);
    }

    /**
    * A helper function to create a standardized search input with a clear button.
    * @param {HTMLElement} container The parent element.
    * @param {string} placeholder The placeholder text for the input.
    * @param {(term: string) => void} onInput The callback function to execute on input.
    * @returns {HTMLInputElement} The created input element.
    */
    setupSearchInput(container, placeholder, onInput) {
        const inputEl = container.createEl("input", {
            type: "text",
            placeholder: placeholder,
            cls: "pm-search-input" // Use a consistent class
        });

        // Create the clear button inside this function
        const clearButton = container.createDiv({ cls: "search-input-clear-btn" });
        setIcon(clearButton, "x");

        clearButton.addEventListener('click', () => {
            const wasFocused = document.activeElement === inputEl;

            inputEl.value = "";
            inputEl.dispatchEvent(new Event('input'));

            if (wasFocused) {
                inputEl.focus();
            }
        });

        inputEl.addEventListener("input", (e) => {
            const term = e.target.value;
            clearButton.style.visibility = term ? 'visible' : 'hidden';
            onInput(term);
        });

        inputEl.addEventListener("keydown", (e) => {
            if (e.key === 'Escape') {
                e.preventDefault();
                inputEl.value = "";
                inputEl.dispatchEvent(new Event('input'));
            } else if (e.key === 'ArrowDown') {
                e.preventDefault();
                const contentEl = this.activeTab === 'notes' ? this.notesContentEl : this.tasksContentEl;
                const firstItem = contentEl.querySelector('.note-row, .task-row');
                if (firstItem) firstItem.focus();
            }
        });

        if (this.app.isMobile) {
            inputEl.addEventListener('focus', () => {
                this.calendarWasCollapsedForEditing = true;
                // This call handles state, class, AND icon.
                this.toggleCalendar(true);
            });

            inputEl.addEventListener('blur', (e) => {
                // Prevent race condition
                if (e.relatedTarget === this.collapseBtn) return;

                // Otherwise, proceed with auto-expansion logic.
                if (this.calendarWasCollapsedForEditing) {
                    this.calendarWasCollapsedForEditing = false;
                    this.toggleCalendar(false);
                }
            });
        }
        return inputEl;
    }

    /**
     * Sets up the tab container, creating draggable tabs with click and double-click behaviors.
     * @param {HTMLElement} tabContainer The parent element for the tabs.
     * @param {(tab: string) => void} switchTabs The function to call when a tab is clicked.
     * @returns {Object.<string, HTMLElement>} A map of tab keys to their corresponding HTML elements.
     */
    setupDraggableTabs(tabContainer, switchTabs) {
        tabContainer.empty();
        const tabOrder = this.getFinalTabOrder()
            .filter(key => this.plugin.settings.tabVisibility[key]);

        const tabElements = {};
        const tooltipLabels = {
            scratch: "ScratchPad",
            notes: "Recent Notes",
            pinned: "Pinned Notes",
            tasks: "Tasks",
            assets: "Assets"
        };

        for (const key of tabOrder) {
            const tabEl = tabContainer.createDiv({ cls: "note-tab" });
            this.getTabLabel(tabEl, key);
            tabEl.dataset.tabKey = key;

            const initialTooltip = key === 'notes'
                ? (this.notesViewMode === 'pinned' ? tooltipLabels.pinned : tooltipLabels.notes)
                : tooltipLabels[key];
            tabEl.setAttribute('aria-label', initialTooltip);

            tabElements[key] = tabEl;

            tabEl.addEventListener("click", async () => {
                if (this.activeTab === key) {
                    // This is a second click on an already active tab, which triggers a special action.
                    if (key === 'scratch') {
                        this.openScratchpadFile();
                    } else if (key === 'tasks') {
                        const currentGroupBy = this.plugin.settings.taskGroupBy;
                        const newGroupBy = currentGroupBy === 'date' ? 'tag' : 'date';
                        this.plugin.settings.taskGroupBy = newGroupBy;

                        await this.plugin.saveData(this.plugin.settings);
                        this.getTabLabel(tabEl, 'tasks');
                        await this.populateTasks();

                    } else if (key === 'assets') {
                        this.isAssetsGridView = !this.isAssetsGridView;
                        this.getTabLabel(tabEl, 'assets');
                        await this.populateAssets();
                        this.isAssetsGridView ? 'grid' : 'list';
                    } else if (key === 'notes') {
                        this.notesViewMode = this.notesViewMode === 'recent' ? 'pinned' : 'recent';
                        this.plugin.settings.notesViewMode = this.notesViewMode;
                        await this.plugin.saveData(this.plugin.settings);

                        this.getTabLabel(tabEl, 'notes');
                        const newTooltip = this.notesViewMode === 'pinned' ? tooltipLabels.pinned : tooltipLabels.notes;
                        tabEl.setAttribute('aria-label', newTooltip);

                        await this.populateNotes();
                    }
                } else {
                    // This is a first click, just switch to the tab.
                    switchTabs(key);
                }
            });

            tabEl.draggable = true;
            tabEl.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('text/plain', key);
                e.dataTransfer.effectAllowed = 'move';
                setTimeout(() => tabEl.classList.add('dragging'), 0);
            });

            tabEl.addEventListener('dragend', () => tabEl.classList.remove('dragging'));

            tabEl.addEventListener('dragover', (e) => {
                e.preventDefault();
                const target = e.currentTarget;
                const rect = target.getBoundingClientRect();
                const isAfter = e.clientX > rect.left + rect.width / 2;

                target.classList.remove('drag-over-indicator-before', 'drag-over-indicator-after');
                if (isAfter) {
                    target.classList.add('drag-over-indicator-after');
                } else {
                    target.classList.add('drag-over-indicator-before');
                }
            });

            tabEl.addEventListener('dragleave', (e) => {
                e.currentTarget.classList.remove('drag-over-indicator-before', 'drag-over-indicator-after');
            });

            tabEl.addEventListener('drop', async (e) => {
                e.preventDefault();
                e.currentTarget.classList.remove('drag-over-indicator-before', 'drag-over-indicator-after');

                const draggedKey = e.dataTransfer.getData('text/plain');
                const targetKey = e.currentTarget.dataset.tabKey;
                if (draggedKey === targetKey) return;

                const rect = e.currentTarget.getBoundingClientRect();
                const isAfter = e.clientX > rect.left + rect.width / 2;

                let currentOrder = this.plugin.settings.tabOrder;
                const newOrder = currentOrder.filter(k => k !== draggedKey);
                const targetIndex = newOrder.indexOf(targetKey);

                if (isAfter) {
                    newOrder.splice(targetIndex + 1, 0, draggedKey);
                } else {
                    newOrder.splice(targetIndex, 0, draggedKey);
                }

                this.plugin.settings.tabOrder = newOrder;
                await this.plugin.saveData(this.plugin.settings);

                newOrder.forEach(k => tabContainer.appendChild(tabElements[k]));
            });
        }
        return tabElements;
    }

    updateDayHeaderHighlight() {
        // 1. If the header row doesn't exist yet, do nothing.
        if (!this.calendarHeaderRowEl) return;

        // 2. Get all the header cells ('th' elements).
        const headers = this.calendarHeaderRowEl.querySelectorAll('th');
        const today = new Date();

        // 3. IMPORTANT: Remove the highlight from every header first to reset them.
        headers.forEach(th => th.classList.remove('today-day-header'));

        // 4. If the user has this feature turned off in settings, stop here.
        if (!this.plugin.settings.highlightTodayDayHeader) {
            return;
        }

        // 5. Check if the month/year being displayed is the actual current month/year.
        const isCurrentMonth = this.displayedMonth.getFullYear() === today.getFullYear() &&
            this.displayedMonth.getMonth() === today.getMonth();

        // 6. Only if it IS the current month, apply the highlight.
        if (isCurrentMonth) {
            const todayDayOfWeek = today.getDay(); // Sunday=0, Monday=1...
            const weekStartsOnMonday = this.plugin.settings.weekStartDay === 'monday';

            let todayColumnIndex;
            if (weekStartsOnMonday) {
                todayColumnIndex = (todayDayOfWeek === 0) ? 6 : todayDayOfWeek - 1; // Mon=0, Tue=1..Sun=6
            } else {
                todayColumnIndex = todayDayOfWeek; // Sun=0, Mon=1...
            }

            // Account for the extra columns you might have (PW, WeekNr)
            let offset = 0;
            if (this.plugin.settings.showPWColumn) offset++;
            if (this.plugin.settings.showWeekNumbers) offset++;

            const targetTh = headers[todayColumnIndex + offset];
            if (targetTh) {
                targetTh.classList.add('today-day-header');
            }
        }
    }

    /**
     * The main render function for the entire view. It builds the DOM from scratch.
     */
    render() {
        // Determine the first visible tab to be the default active tab.
        const finalTabOrder = this.getFinalTabOrder();
        const visibleTabs = finalTabOrder.filter(key => this.plugin.settings.tabVisibility[key]);

        // Only reset the active tab if it's not set or has become invisible
        if (!this.activeTab || !visibleTabs.includes(this.activeTab)) {
            this.activeTab = visibleTabs[0] || null;
        }

        this.containerEl.empty();
        const container = this.containerEl.createDiv("period-month-container");
        container.addClass(`layout-${this.plugin.settings.calendarLayout}`);
        container.addClass(`today-style-${this.plugin.settings.todayHighlightStyle}`);
        container.toggleClass("hide-grid", !this.plugin.settings.showCalendarGridLines);
        container.classList.toggle("calendar-collapsed", this.isCalendarCollapsed);
        container.toggleClass("vertical-view-active", this.isVerticalView);
        container.toggleClass('monday-start', this.plugin.settings.weekStartDay === 'monday');

        // Add weekend shading classes
        if (this.plugin.settings.highlightWeekends) {
            container.addClass('weekend-shading-enabled');
        }

        if (this.plugin.settings.showPWColumn) {
            container.addClass('has-pw-column');
        }

        if (this.plugin.settings.showWeekNumbers) {
            container.addClass('has-week-numbers');
        }

        // --- Header and Navigation ---
        const headerDiv = container.createDiv("month-header");

        this.monthNameEl = headerDiv.createDiv({ cls: "month-header-title" });
        this.updateMonthTitle();
        this.monthNameEl.addEventListener('click', () => {
            // SET THE FLAG before switching views
            this.isProgrammaticScroll = true;

            this.isVerticalView = !this.isVerticalView;
            this.render();

            // CLEAR THE FLAG after render and initial scroll complete
            setTimeout(() => {
                this.isProgrammaticScroll = false;
            }, 800);  // Longer delay for initial view render on mobile
        });
        const navDiv = headerDiv.createDiv({ cls: "month-header-nav" });

        const backBtn = navDiv.createEl("button");
        backBtn.setAttribute("aria-label", "Previous month");
        setIcon(backBtn, "chevron-left");
        backBtn.addEventListener('click', () => {
            if (this.isVerticalView) {
                // SET FLAG
                this.isProgrammaticScroll = true;

                this.displayedMonth.setMonth(this.displayedMonth.getMonth() - 1, 1);

                const targetMonthId = `month-${this.displayedMonth.getFullYear()}-${this.displayedMonth.getMonth()}`;
                const targetEl = this.verticalScrollerEl?.querySelector(`#${targetMonthId}`);

                if (targetEl) {
                    targetEl.scrollIntoView({ block: 'start', behavior: 'smooth' });
                    this.updateMonthTitle();
                    this.updateTodayBtnAriaLabel();

                    // CLEAR FLAG
                    setTimeout(() => {
                        this.isProgrammaticScroll = false;
                    }, 500);
                }
            } else {
                this.changeMonth(-1);
            }
        });
        // Store reference and add new event listener for the "Today" button
        const todayBtn = navDiv.createEl('button');
        this.todayBtn = todayBtn;
        setIcon(todayBtn, 'calendar-clock');

        // Apply initial style and ARIA label on render
        if (this.isPopupLocked) {
            this.todayBtn.classList.add('popup-locked');
        }
        this.updateTodayBtnAriaLabel();

        todayBtn.addEventListener('click', () => {

            this.goToCurrentMonth();

        });

        // Ensure the button style is correct on re-render
        if (this.isPopupLocked) {
            this.todayBtn.classList.add('popup-locked');
        }

        const forwardBtn = navDiv.createEl("button");
        forwardBtn.setAttribute("aria-label", "Next month");
        setIcon(forwardBtn, "chevron-right");
        forwardBtn.addEventListener('click', () => {
            if (this.isVerticalView) {
                // SET FLAG
                this.isProgrammaticScroll = true;
                this.displayedMonth.setMonth(this.displayedMonth.getMonth() + 1, 1);

                const targetMonthId = `month-${this.displayedMonth.getFullYear()}-${this.displayedMonth.getMonth()}`;
                const targetEl = this.verticalScrollerEl?.querySelector(`#${targetMonthId}`);

                if (targetEl) {
                    targetEl.scrollIntoView({ block: 'start', behavior: 'smooth' });
                    this.updateMonthTitle();
                    this.updateTodayBtnAriaLabel();

                    // CLEAR FLAG
                    setTimeout(() => {
                        this.isProgrammaticScroll = false;
                    }, 500);
                }
            } else {
                this.changeMonth(1);
            }
        });

        const collapseBtn = navDiv.createEl("button");
        this.collapseBtn = collapseBtn;
        collapseBtn.setAttribute("aria-label", "Toggle calendar visibility");

        //setIcon(this.collapseBtn, this.isCalendarCollapsed ? "chevron-up" : "chevron-down");
        setIcon(this.collapseBtn, 'chevron-down');


        this.collapseBtn.addEventListener('click', () => {
            // This is a manual user action, so reset the "editing" flag.
            this.calendarWasCollapsedForEditing = false;

            // Use the helper to toggle to the opposite of the current state.
            this.toggleCalendar(!this.isCalendarCollapsed);

            // If the result of the toggle is that the calendar is now expanded,
            // dismiss any active keyboard.
            if (!this.isCalendarCollapsed) {
                this.blurActiveInput();
            }
        });

        // --- Calendar Rendering (Vertical or Horizontal) ---
        if (this.isVerticalView) {
            this.renderVerticalCalendar(container);
        } else {
            const tableWrapper = container.createDiv({ cls: "calendar-table-wrapper" });
            const table = tableWrapper.createEl("table", { cls: "period-calendar-table" });
            this.attachSwipeListeners(tableWrapper, headerDiv);
            const thead = table.createEl('thead');
            this.calendarHeaderRowEl = thead.createEl('tr');

            if (this.plugin.settings.showPWColumn) {
                this.calendarHeaderRowEl.createEl('th', { text: '' });
            }
            if (this.plugin.settings.showWeekNumbers) {
                this.calendarHeaderRowEl.createEl('th', { text: this.plugin.settings.weekNumberColumnLabel });
            }

            const startDayOffset = this.plugin.settings.weekStartDay === 'monday' ? 1 : 0;
            for (let d = 0; d < 7; d++) {
                const dayIndex = (d + startDayOffset) % 7;
                // Note: The highlighting logic has been completely removed from this loop
                this.calendarHeaderRowEl.createEl('th', { text: moment().day(dayIndex).format('ddd').toUpperCase() });
            }

            this.calendarBodyEl = table.createEl("tbody");
            this.renderCalendar();
            setTimeout(() => {
                this.addColumnHighlighting(this.calendarHeaderRowEl, this.calendarBodyEl);
            }, 0);
            // Add this line right here to set the highlight correctly on the first load
            this.updateDayHeaderHighlight();

            // --- Tabs and Content Panels ---
            const tabWrapper = container.createDiv("tabs-content-wrapper");
            const areTabsVisible = Object.values(this.plugin.settings.tabVisibility).some(visible => visible);
            if (!areTabsVisible) {
                tabWrapper.style.display = 'none';
            } else {
                container.addClass("tabs-are-visible");
            }

            const tabHeader = tabWrapper.createDiv("note-tab-header");
            const tabContainer = tabHeader.createDiv("tab-container");
            const searchWrapper = tabHeader.createDiv("search-wrapper");

            const scratchpadSearchContainer = searchWrapper.createDiv({ cls: "pm-search-container" });
            const notesSearchContainer = searchWrapper.createDiv({ cls: "pm-search-container" });
            const assetsSearchContainer = searchWrapper.createDiv({ cls: "pm-search-container" });
            const tasksSearchContainer = searchWrapper.createDiv({ cls: "pm-search-container" });

            // -- CONTENT PANELS --
            this.scratchWrapperEl = tabWrapper.createDiv({ cls: "scratchpad-wrapper" });
            this.renderScratchpadContent();

            this.notesContentEl = tabWrapper.createDiv({ cls: "notes-container" });
            this.assetsContentEl = tabWrapper.createDiv({ cls: "notes-container" });
            this.tasksContentEl = tabWrapper.createDiv({ cls: "tasks-container" });

            this.taskRefreshIndicator = tabWrapper.createDiv({ cls: 'pm-refresh-indicator' });
            setIcon(this.taskRefreshIndicator, 'arrow-down');

            // Function to handle switching between tabs.
            const switchTabs = (tab) => {
                this.activeTab = tab;
                Object.values(tabElements).forEach(el => el.removeClass("active"));
                if (tabElements[tab]) tabElements[tab].addClass("active");

                // Toggle visibility of content panels and their corresponding search bars.
                this.scratchWrapperEl.style.display = (tab === "scratch") ? "grid" : "none";
                this.notesContentEl.style.display = (tab === "notes") ? "block" : "none";
                this.assetsContentEl.style.display = (tab === "assets") ? "" : "none";
                this.tasksContentEl.style.display = (tab === "tasks") ? "block" : "none";

                scratchpadSearchContainer.style.display = (tab === "scratch") ? "flex" : "none";
                notesSearchContainer.style.display = (tab === "notes") ? "flex" : "none";
                assetsSearchContainer.style.display = (tab === "assets") ? "flex" : "none";
                tasksSearchContainer.style.display = (tab === "tasks") ? "flex" : "none";

                // Populate the content of the newly activated tab.
                if (tab === "notes") this.populateNotes();
                if (tab === "assets") this.populateAssets();
                if (tab === "tasks") this.populateTasks();
            };

            const tabElements = this.setupDraggableTabs(tabContainer, switchTabs);

            // -- SEARCH LOGIC --
            this.scratchpadSearchInputEl = this.setupSearchInput(scratchpadSearchContainer, "Search ScratchPad...", (term) => {
                this.scratchpadSearchTerm = term;
                this.updateScratchpadHighlights();
            });

            // This is a logic bug from the original code; this needs to be inside the "else" block of the preview mode
            if (!this.isScratchpadPreview) {
                this.noteTextarea.value = this.noteText;
                this.noteTextarea.addEventListener("input", async () => {
                    this.noteText = this.noteTextarea.value;
                    await this.saveFixedNote(this.noteText);
                    this.updateScratchpadHighlights();
                });

                this.noteTextarea.addEventListener('scroll', () => {
                    if (this.scratchHighlighterEl) {
                        this.scratchHighlighterEl.scrollTop = this.noteTextarea.scrollTop;
                        this.scratchHighlighterEl.scrollLeft = this.noteTextarea.scrollLeft;
                    }
                });
            }

            const notesPlaceholder = this.notesViewMode === 'pinned' ? 'Filter notes...' : 'Filter notes...';
            this.notesSearchInputEl = this.setupSearchInput(notesSearchContainer, notesPlaceholder, (term) => {
                this.notesSearchTerm = term;
                this.populateNotes();
            });

            this.assetsSearchInputEl = this.setupSearchInput(assetsSearchContainer, "Filter assets...", (term) => {
                this.assetsSearchTerm = term;
                this.populateAssets();
            });

            this.tasksSearchInputEl = this.setupSearchInput(tasksSearchContainer, "Filter tasks...", (term) => {
                this.tasksSearchTerm = term;
                this.populateTasks();
            });

            this.updateScratchpadSearchCount();
            switchTabs(this.activeTab);
        }
        this.applyFontSettings();

    }

    /**
     * Finds and highlights the next or previous occurrence of the search term in the scratchpad textarea.
     * @param {'next' | 'prev'} direction The direction to search.
     */
    highlightInScratchpad(direction = 'next') {
        this.noteTextarea.focus();
        const text = this.noteTextarea.value;
        const term = this.scratchpadSearchTerm;
        if (!term) return;

        const lowerText = text.toLowerCase();
        const lowerTerm = term.toLowerCase();
        let matchIndex = -1;

        if (direction === 'next') {
            const searchFrom = this.noteTextarea.selectionEnd;
            matchIndex = lowerText.indexOf(lowerTerm, searchFrom);
            if (matchIndex === -1) { // Wrap around to the start if no match is found.
                matchIndex = lowerText.indexOf(lowerTerm);
            }
        } else { // 'prev'
            const searchFrom = this.noteTextarea.selectionStart > 0 ? this.noteTextarea.selectionStart - 1 : text.length;
            matchIndex = lowerText.lastIndexOf(lowerTerm, searchFrom);
            if (matchIndex === -1) { // Wrap around to the end.
                matchIndex = lowerText.lastIndexOf(lowerTerm);
            }
        }

        if (matchIndex !== -1) {
            // Select the found text and scroll it into view.
            this.noteTextarea.setSelectionRange(matchIndex, matchIndex + term.length);
            const lineHeight = parseFloat(getComputedStyle(this.noteTextarea).lineHeight);
            const lines = text.substring(0, matchIndex).split('\n').length;
            this.noteTextarea.scrollTop = (lines - 1) * lineHeight;
        } else {
            new Notice("No matches found");
        }
    }

    /**
     * Helper to re-render just the calendar grid.
     */
    renderCalendar() {
        if (this.calendarBodyEl) {
            this.calendarBodyEl.empty();
            this.generateMonthGrid(this.displayedMonth, this.calendarBodyEl);
        }
    }

    /**
     * Shows a popup listing all notes, tasks, and assets associated with a specific day.
     * @param {HTMLElement} targetEl The calendar day element to position the popup near.
     * @param {object} dataByType An object containing arrays of items to display, keyed by type.
     * @param {Date} date The date for which the popup is being shown.
     */
    showFilePopup(targetEl, dataByType, date, isMobile = false) {
        this.hideFilePopup();
        this.popupEl = createDiv({ cls: 'other-notes-popup' });
        const { settings } = this.plugin;

        if (isMobile) {
            this.popupEl.addClass('is-mobile-popup');
        }

        // Add header with a close button and dynamic date title
        const headerRow = this.popupEl.createDiv({ cls: 'popup-header' });
        const formattedDate = moment(date).format("dddd, D MMMM YYYY");
        headerRow.createDiv({ cls: 'popup-header-title', text: formattedDate });
        const closeBtn = headerRow.createDiv({ cls: 'popup-close-btn' });
        setIcon(closeBtn, 'x');
        // Make the entire header row clickable to close the popup
        headerRow.addEventListener('click', () => this.hideFilePopup());

        // Create a scrollable wrapper for the content
        const contentWrapper = this.popupEl.createDiv({ cls: 'popup-content-wrapper' });

        if (dataByType.ics && dataByType.ics.length > 0) {
            contentWrapper.createEl('h6', { text: "Calendar Events", cls: "popup-section-header" });

            dataByType.ics.forEach(event => {
                const itemEl = contentWrapper.createDiv({ cls: "other-notes-popup-item" });

                const iconEl = itemEl.createDiv({ cls: 'note-icon' });
                setIcon(iconEl, 'calendar');

                const titleWrapper = itemEl.createDiv({ cls: 'note-title-wrapper' });
                titleWrapper.createDiv({ cls: 'note-title' }).setText(event.summary);

                if (!event.isAllDay && event.startTime && event.endTime) {
                    const timeString = `${event.startTime} - ${event.endTime}`;
                    titleWrapper.createDiv({ text: timeString, cls: 'note-path' });
                }
            });

            const hasOtherContent = (dataByType.tasks && dataByType.tasks.length > 0) || (dataByType.daily && dataByType.daily.length > 0);
            if (hasOtherContent) {
                contentWrapper.createDiv({ cls: "popup-separator" });
            }
        }

        const addFileToList = (container, file, type) => {
            const itemEl = container.createDiv({ cls: 'other-notes-popup-item' });
            if (type === 'asset' && this.isImageAsset(file)) {
                const thumbnail = itemEl.createEl('img', { cls: 'popup-asset-thumbnail' });
                thumbnail.src = this.app.vault.getResourcePath(file);
            } else {

                const dot = itemEl.createDiv({ cls: 'popup-file-dot' });
                if (type === 'daily') dot.style.backgroundColor = settings.dailyNoteDotColor;
                else if (type === 'created') dot.style.backgroundColor = settings.noteCreatedColor;
                else if (type === 'modified') dot.style.backgroundColor = settings.noteModifiedColor;
                else if (type === 'asset') dot.style.backgroundColor = settings.assetDotColor;

            }
            const titlePathWrapper = itemEl.createDiv({ cls: 'note-title-path-wrapper' });
            const displayName = file.path.toLowerCase().endsWith('.md') ? file.basename : file.name;
            titlePathWrapper.createDiv({ text: displayName, cls: "note-title" });
            if (file.parent && file.parent.path !== '/') {
                titlePathWrapper.createDiv({ text: file.parent.path, cls: 'note-path' });
            }
            itemEl.addEventListener('click', () => {
                this.app.workspace.openLinkText(file.path, "", settings.notesOpenAction === 'new-tab');
                this.hideFilePopup();
            });
        };

        const addTaskToList = (container, task) => {
            const itemEl = container.createDiv({ cls: 'other-notes-popup-item' });
            itemEl.dataset.taskStatus = task.status;
            const checkbox = itemEl.createDiv({ cls: 'task-checkbox-symbol' });
            this._renderTaskSymbol(checkbox, task);
            checkbox.addEventListener('click', async (e) => {
                e.stopPropagation();
                await this.toggleTaskCompletion(task);
                task.status = (task.status.toLowerCase() === 'x') ? ' ' : 'x';
                this._renderTaskSymbol(checkbox, task);
                await this.buildTasksByDateMap();
                this.renderCalendar();
            });
            const textSpan = itemEl.createSpan({ cls: 'task-text' });
            MarkdownRenderer.render(this.app, task.text, textSpan, task.file.path, this);
            itemEl.addEventListener('click', () => {
                this.app.workspace.openLinkText(task.file.path, '', false, { eState: { line: task.lineNumber } });
                this.hideFilePopup();
            });
        };

        const allFiles = [...(dataByType.daily || []), ...(dataByType.created || []), ...(dataByType.modified || []), ...(dataByType.assets || [])];
        const hasTasks = dataByType.tasks && dataByType.tasks.length > 0;
        const hasFiles = allFiles.length > 0;

        if (hasTasks) {
            contentWrapper.createEl('h6', { text: 'Tasks', cls: 'popup-section-header' });
            dataByType.tasks.forEach(task => addTaskToList(contentWrapper, task));
        }
        if (hasTasks && hasFiles) {
            contentWrapper.createDiv({ cls: 'popup-separator' });
        }
        if (hasFiles) {
            contentWrapper.createEl('h6', { text: 'Notes & Assets', cls: 'popup-section-header' });
            (dataByType.daily || []).forEach(file => addFileToList(contentWrapper, file, 'daily'));
            (dataByType.created || []).forEach(file => addFileToList(contentWrapper, file, 'created'));
            (dataByType.modified || []).forEach(file => addFileToList(contentWrapper, file, 'modified'));
            (dataByType.assets || []).forEach(file => addFileToList(contentWrapper, file, 'asset'));
        }

        if (!contentWrapper.hasChildNodes()) {
            this.hideFilePopup();
            return;
        }

        this.popupEl.addEventListener('mouseenter', () => clearTimeout(this.hideTimeout));
        this.popupEl.addEventListener('mouseleave', () => {
            this.hideTimeout = setTimeout(() => this.hideFilePopup(), this.plugin.settings.popupHideDelay);
        });

        document.body.appendChild(this.popupEl);

        if (isMobile) {
            const margin = 8;
            this.popupEl.style.position = 'fixed';
            this.popupEl.style.bottom = `${margin}px`;
            this.popupEl.style.left = `${margin}px`;
            this.popupEl.style.width = `calc(100% - ${margin * 2}px)`;
            this.popupEl.style.maxHeight = '45vh';
            this.popupEl.style.boxSizing = 'border-box';
            this.popupEl.style.top = ''; // Unset any previous 'top' value
            this.popupEl.style.visibility = 'visible';

        } else {
            const popupRect = this.popupEl.getBoundingClientRect();
            const targetRect = targetEl.getBoundingClientRect();
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            const margin = this.plugin.settings.popupGap;
            let finalTop = targetRect.bottom + margin;
            if (finalTop + popupRect.height > viewportHeight) finalTop = targetRect.top - popupRect.height - margin;
            if (finalTop < margin) finalTop = margin;
            let finalLeft = targetRect.left;
            if (finalLeft + popupRect.width > viewportWidth - margin) finalLeft = targetRect.right - popupRect.width;
            if (finalLeft < margin) finalLeft = margin;
            this.popupEl.style.top = `${finalTop}px`;
            this.popupEl.style.left = `${finalLeft}px`;
            this.popupEl.style.visibility = 'visible';
        }
    }

    /**
     * Hides and destroys the file popup element.
     */
    hideFilePopup() {
        clearTimeout(this.hoverTimeout);
        clearTimeout(this.hideTimeout);
        if (this.popupEl) {
            this.popupEl.remove();
            this.popupEl = null;
            this.taskRefreshDebounceTimer = null;
            this.taskCache = new Map();
        }
    }

    updateMonthTitle() {
        this.populateStyledTitle(this.monthNameEl, this.displayedMonth);
    }

    changeMonth(offset, toToday = false) {
        if (toToday) {
            this.displayedMonth = new Date();
        } else {
            this.displayedMonth.setMonth(this.displayedMonth.getMonth() + offset, 1);
        }

        this.updateMonthTitle();
        this.renderCalendar();
        this.updateTodayBtnAriaLabel();

        this.updateDayHeaderHighlight();
    }

    updateTodayBtnAriaLabel() {
        if (!this.todayBtn) return;

        const now = new Date();
        const isCurrentMonth = this.displayedMonth.getFullYear() === now.getFullYear() && this.displayedMonth.getMonth() === now.getMonth();

        if (this.isPopupLocked) {
            // If popups are locked (accent on), the only action is to enable them.
            this.todayBtn.setAttribute('aria-label', 'Tap to enable calendar popups');
        } else {
            // If popups are unlocked (accent off)...
            if (isCurrentMonth) {
                // ...and we're on the current month, the next action is to disable them.
                this.todayBtn.setAttribute('aria-label', 'Tap to disable calendar popups');
            } else {
                // ...and we're on a different month, the action is to navigate.
                this.todayBtn.setAttribute('aria-label', 'Go to today');
            }
        }
    }

    /**
     * Adds keyboard event listeners to a row element for list navigation.
     * @param {HTMLElement} row The row element (e.g., a `.note-row` or `.task-row`).
     * @param {HTMLInputElement} searchInputEl The search input associated with the list.
     */
    addKeydownListeners(row, searchInputEl) {
        row.setAttribute('tabindex', -1); // Make the row focusable.
        row.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                row.click();
                return;
            }

            if (e.key !== 'ArrowDown' && e.key !== 'ArrowUp') return;

            e.preventDefault();

            const container = row.closest('.notes-container, .tasks-container');
            if (!container) return;

            const items = Array.from(container.querySelectorAll('.note-row, .task-row'));
            const currentIndex = items.indexOf(row);

            let nextIndex = e.key === 'ArrowDown' ? currentIndex + 1 : currentIndex - 1;

            if (nextIndex >= 0 && nextIndex < items.length) {
                items[nextIndex].focus();
            } else if (e.key === 'ArrowUp' && searchInputEl) {
                // If at the top of the list, focus the search input.
                searchInputEl.focus();
            }
        });
    }

    /**
     * Populates the "Notes" tab with either recent or pinned notes.
     */
    async populateNotes() {
        if (!this.notesContentEl) return;
        this.notesContentEl.empty();

        const settings = this.plugin.settings;
        let notesToShow = [];

        // --- 1. FILTER AND SORT NOTES ---
        if (this.notesViewMode === 'pinned') {
            const pinValue = settings.pinTag.toLowerCase();
            notesToShow = this.app.vault.getMarkdownFiles().filter(file => {
                const cache = this.app.metadataCache.getFileCache(file);
                if (!cache) return false;

                if (cache.tags?.some(tag => tag.tag.toLowerCase().includes(pinValue))) {
                    return true;
                }

                const frontmatter = cache.frontmatter;
                if (frontmatter) {
                    for (const key in frontmatter) {
                        const value = frontmatter[key];
                        if (typeof value === 'string' && value.toLowerCase().includes(pinValue)) {
                            return true;
                        }
                        if (Array.isArray(value) && value.some(item => typeof item === 'string' && item.toLowerCase().includes(pinValue))) {
                            return true;
                        }
                    }
                }
                return false;
            });

            if (this.pinnedSortOrder === 'z-a') {
                notesToShow.sort((a, b) => b.basename.localeCompare(a.basename));
            } else if (this.pinnedSortOrder === 'custom') {
                const customOrder = settings.pinnedNotesCustomOrder;
                // This robust sort handles new items not yet in the custom order array.
                notesToShow.sort((a, b) => {
                    const indexA = customOrder.indexOf(a.path);
                    const indexB = customOrder.indexOf(b.path);

                    // If both items are in the custom order, sort by their position.
                    if (indexA !== -1 && indexB !== -1) {
                        return indexA - indexB;
                    }
                    // If only A is in the order, it comes first.
                    if (indexA !== -1) {
                        return -1;
                    }
                    // If only B is in the order, it comes first.
                    if (indexB !== -1) {
                        return 1;
                    }
                    // If neither is in the order (e.g., new pinned notes), sort them alphabetically.
                    return a.basename.localeCompare(b.basename);
                });
            } else { // a-z
                notesToShow.sort((a, b) => a.basename.localeCompare(b.basename));
            }
        } else { // recent notes mode
            const cutoff = moment().subtract(settings.notesLookbackDays, 'days').valueOf();
            notesToShow = this.app.vault.getMarkdownFiles()
                .filter(file => !settings.ignoreFolders.some(f => file.path.startsWith(f)) && (file.stat.mtime >= cutoff || file.stat.ctime >= cutoff))
                .sort((a, b) => b.stat.mtime - a.stat.mtime);
        }

        // --- 2. APPLY SEARCH TERM ---
        const searchTerm = this.notesSearchTerm.toLowerCase();

        const filteredNotes = searchTerm ?
            notesToShow.filter(file => file.basename.toLowerCase().includes(searchTerm)) :
            notesToShow;

        if (filteredNotes.length === 0) {
            const message = this.notesViewMode === 'pinned' ? 'No pinned notes found.' : 'No recent notes found.';
            this.notesContentEl.createDiv({ text: message, cls: 'task-group-empty-message' });
            return;
        }

        // --- 3. RENDER THE VIEW ---
        if (this.notesViewMode === 'pinned') {
            const groupContainer = this.notesContentEl.createDiv({ cls: 'note-group-container' });
            const header = groupContainer.createDiv({ cls: 'note-group-header' });
            const headerContent = header.createDiv({ cls: 'note-group-header-content', attr: { 'aria-live': 'polite' } });
            setIcon(headerContent, settings.tabIcons.pinned || 'pin');
            headerContent.createSpan({ text: 'Pinned Notes' });

            const sortIndicator = headerContent.createSpan({ cls: 'pinned-sort-indicator' });
            const updateSortVisuals = () => {
                if (this.pinnedSortOrder === 'z-a') {
                    sortIndicator.setText('Z-A');
                    headerContent.setAttribute('aria-label', 'Current sort: Z-A. Click for Custom sort.');
                } else if (this.pinnedSortOrder === 'custom') {
                    sortIndicator.setText('Custom');
                    headerContent.setAttribute('aria-label', 'Current sort: Custom. Click for A-Z sort.');
                } else { // a-z
                    sortIndicator.setText('A-Z');
                    headerContent.setAttribute('aria-label', 'Current sort: A-Z. Click for Z-A sort.');
                }
            };
            updateSortVisuals();

            headerContent.addEventListener('click', () => {
                if (this.pinnedSortOrder === 'a-z') this.pinnedSortOrder = 'z-a';
                else if (this.pinnedSortOrder === 'z-a') this.pinnedSortOrder = 'custom';
                else this.pinnedSortOrder = 'a-z';
                this.populateNotes();
            });

            header.createDiv({ cls: 'note-group-count', text: filteredNotes.length.toString() });

            const listWrapper = groupContainer.createDiv({ cls: 'note-list-wrapper' });

            listWrapper.addEventListener('drop', async (e) => {
                e.preventDefault();
                await this.savePinnedOrder(listWrapper);
            });

            filteredNotes.forEach(file => {
                this.renderNoteItem(file, listWrapper);
            });

        } else {
            const groups = { today: [], yesterday: [], thisWeek: [], lastWeek: [], thisMonth: [], older: [] };
            const now = moment();

            filteredNotes.forEach(file => {
                const modTime = moment(file.stat.mtime);
                if (modTime.isSame(now, 'day')) groups.today.push(file);
                else if (modTime.isSame(now.clone().subtract(1, 'day'), 'day')) groups.yesterday.push(file);
                else if (modTime.isSame(now, 'week')) groups.thisWeek.push(file);
                else if (modTime.isSame(now.clone().subtract(1, 'week'), 'week')) groups.lastWeek.push(file);
                else if (modTime.isSame(now, 'month')) groups.thisMonth.push(file);
                else groups.older.push(file);
            });

            const groupOrder = [
                { key: 'today', label: 'Today' },
                { key: 'yesterday', label: 'Yesterday' },
                { key: 'thisWeek', label: 'This Week' },
                { key: 'lastWeek', label: 'Last Week' },
                { key: 'thisMonth', label: 'This Month' },
                { key: 'older', label: 'Older' },
            ];

            groupOrder.forEach(groupInfo => {
                const notesInGroup = groups[groupInfo.key];
                if (notesInGroup.length > 0) {
                    const groupContainer = this.notesContentEl.createDiv({ cls: 'note-group-container' });
                    const isCollapsed = this.collapsedNoteGroups[groupInfo.key];
                    if (isCollapsed) groupContainer.addClass('is-collapsed');

                    const header = groupContainer.createDiv({ cls: 'note-group-header' });
                    const headerContent = header.createDiv({ cls: 'note-group-header-content' });
                    const collapseIcon = headerContent.createDiv({ cls: 'note-group-collapse-icon' });
                    setIcon(collapseIcon, 'chevron-down');
                    headerContent.createSpan({ text: groupInfo.label });
                    header.createDiv({ cls: 'note-group-count', text: notesInGroup.length.toString() });

                    header.addEventListener('click', () => {
                        const currentlyCollapsed = groupContainer.classList.toggle('is-collapsed');
                        this.collapsedNoteGroups[groupInfo.key] = currentlyCollapsed;
                        this.plugin.saveSettings();
                    });

                    const listWrapper = groupContainer.createDiv({ cls: 'note-list-wrapper' });
                    notesInGroup.forEach(file => {
                        this.renderNoteItem(file, listWrapper);
                    });
                }
            });
        }
    }

    /**
     * Scans the vault for tasks, filters and sorts them, and populates the "Tasks" tab.
     */
    async populateTasks() {
        if (!this.tasksContentEl) return;

        const settings = this.plugin.settings;
        this.tasksContentEl.toggleClass('show-full-text', !settings.taskTextTruncate);

        if (this.taskCache) { this.taskCache.clear(); } else { this.taskCache = new Map(); }

        const taskIgnoreFolders = (settings.taskIgnoreFolders || []).map(f => f.toLowerCase().endsWith('/') ? f.toLowerCase() : f.toLowerCase() + '/');
        const files = this.app.vault.getMarkdownFiles().filter(file => {
            const filePathLower = file.path.toLowerCase();
            return !taskIgnoreFolders.some(folder => folder && filePathLower.startsWith(folder));
        });


        let allTasks = [];
        const taskRegex = /^\s*(?:-|\d+\.)\s*\[(.)\]\s*(.*)/;
        const dueDateRegex = /📅\s*(\d{4}-\d{2}-\d{2})/;
        const completionDateRegex = /✅\s*(\d{4}-\d{2}-\d{2})/;
        const tagRegex = /#([a-zA-Z0-9_\-\/]+)/g;

        for (const file of files) {
            const content = await this.app.vault.cachedRead(file);
            const lines = content.split('\n');

            this.taskCache.set(file.path, this.extractTaskLines(content));

            lines.forEach((line, index) => {
                const match = line.match(taskRegex);
                if (match) {
                    const status = match[1];
                    const text = match[2];
                    const isCompleted = status.toLowerCase() === 'x';
                    const completionDateMatch = text.match(completionDateRegex);
                    const completionDate = completionDateMatch ? moment(completionDateMatch[1], "YYYY-MM-DD").toDate() : null;

                    if (isCompleted && !(settings.showCompletedTasksToday && completionDate && isSameDay(completionDate, new Date()))) {
                        return;
                    }

                    const dueDateMatch = text.match(dueDateRegex);
                    const dueDate = dueDateMatch ? moment(dueDateMatch[1], "YYYY-MM-DD").toDate() : null;
                    const tags = Array.from(text.matchAll(tagRegex)).map(m => m[1]);
                    let displayText = text.trim();
                    if (!isCompleted) {
                        displayText = displayText.replace(completionDateRegex, '').trim();
                    }
                    allTasks.push({ text: displayText, file, lineNumber: index, dueDate, tags, status, completionDate });
                }
            });
        }

        const searchTerm = this.tasksSearchTerm.toLowerCase();
        let filteredTasks = allTasks.filter(task => !searchTerm || task.text.toLowerCase().includes(searchTerm));

        filteredTasks.sort((a, b) => {
            if (settings.taskSortOrder === 'a-z') return a.text.localeCompare(b.text);
            if (settings.taskSortOrder === 'z-a') return b.text.localeCompare(a.text);
            if (a.dueDate && b.dueDate) return a.dueDate - b.dueDate;
            return a.dueDate ? -1 : (b.dueDate ? 1 : a.text.localeCompare(b.text));
        });

        // 2. MAP EXISTING DOM GROUPS
        const existingGroups = new Map();
        this.tasksContentEl.querySelectorAll('.task-group-container').forEach(groupEl => {
            if (groupEl.dataset.groupKey) {
                existingGroups.set(groupEl.dataset.groupKey, groupEl);
            }
        });

        // 3. GET NEW GROUP DATA
        const newGroupData = settings.taskGroupBy === 'tag'
            ? this.groupTasksByTag(filteredTasks)
            : this.groupTasksByDate(filteredTasks);

        const groupOrder = Object.keys(newGroupData);

        // 4. RECONCILE GROUPS
        let lastElement = null;
        groupOrder.forEach(groupKey => {
            const groupData = newGroupData[groupKey];
            let groupEl = existingGroups.get(groupKey);

            if (groupEl) {
                const headerContent = groupEl.querySelector('.task-group-header-content span:last-child');
                if (headerContent) headerContent.textContent = `${groupData.title} (${groupData.tasks.length})`;

                this.reconcileTaskList(groupEl.querySelector('.task-list-wrapper'), groupData.tasks);
                existingGroups.delete(groupKey);
            } else {
                groupEl = this.renderTaskGroup(groupKey, groupData);
            }

            if (lastElement) {
                lastElement.after(groupEl);
            } else {
                this.tasksContentEl.prepend(groupEl);
            }
            lastElement = groupEl;
        });

        // 5. REMOVE OLD GROUPS
        existingGroups.forEach(groupEl => groupEl.remove());

        if (this.tasksContentEl.children.length === 0) {
            // Clear any old message and add a new one
            this.tasksContentEl.empty();
            const message = searchTerm ? 'No tasks match your search term.' : 'No tasks found';
            this.tasksContentEl.createDiv({ text: message, cls: 'task-group-empty-message' });
        } else {
            // Remove any "no tasks" message if it exists
            const emptyMessage = this.tasksContentEl.querySelector('.task-group-empty-message');
            if (emptyMessage) emptyMessage.remove();
        }
    }

    getTaskKey(task) {
        return `${task.file.path}:${task.lineNumber}`;
    }

    updateTaskItem(taskRowEl, task) {
        if (taskRowEl.dataset.taskStatus !== task.status) {
            const checkbox = taskRowEl.querySelector('.task-checkbox-symbol');
            if (checkbox) {
                this._renderTaskSymbol(checkbox, task);
            }
            taskRowEl.dataset.taskStatus = task.status;
        }

        const textEl = taskRowEl.querySelector('.task-text');
        const existingText = textEl ? textEl.textContent : '';
        if (textEl && existingText !== task.text) {
            textEl.empty();
            MarkdownRenderer.render(this.app, task.text, textEl, task.file.path, this);
        }
    }

    groupTasksByDate(tasks) {
        const settings = this.plugin.settings;
        const now = moment().startOf('day');
        const groupsData = { overdue: [], today: [], tomorrow: [], next7days: [], future: [], noDate: [] };

        tasks.forEach(task => {
            if (!task.dueDate) { groupsData.noDate.push(task); return; }
            const due = moment(task.dueDate).startOf('day');
            if (due.isBefore(now)) groupsData.overdue.push(task);
            else if (due.isSame(now)) groupsData.today.push(task);
            else if (due.isSame(now.clone().add(1, 'day'))) groupsData.tomorrow.push(task);
            else if (due.isSameOrBefore(now.clone().add(7, 'days'))) groupsData.next7days.push(task);
            else groupsData.future.push(task);
        });

        const icons = settings.taskGroupIcons || DEFAULT_SETTINGS.taskGroupIcons;
        const groupOrder = [
            { key: 'overdue', title: 'Overdue', icon: icons.overdue, color: settings.taskGroupColorOverdue },
            { key: 'today', title: 'Today', icon: icons.today, color: settings.taskGroupColorToday },
            { key: 'tomorrow', title: 'Tomorrow', icon: icons.tomorrow, color: settings.taskGroupColorTomorrow },
            { key: 'next7days', title: 'Next 7 Days', icon: icons.next7days, color: settings.taskGroupColorNext7Days },
            { key: 'future', title: 'Future', icon: icons.future, color: settings.taskGroupColorFuture },
            { key: 'noDate', title: 'No Due Date', icon: icons.noDate, color: settings.taskGroupColorNoDate }
        ];

        const finalGroups = {};
        groupOrder.forEach(g => {
            if (settings.taskDateGroupsToShow.includes(g.key) || g.key === 'noDate') {
                if (groupsData[g.key].length > 0) {
                    finalGroups[g.key] = { ...g, tasks: groupsData[g.key] };
                }
            }
        });
        return finalGroups;
    }

    groupTasksByTag(tasks) {
        const settings = this.plugin.settings;
        const groupedByTag = tasks.reduce((acc, task) => {
            const tags = task.tags.length > 0 ? task.tags : ['#untagged'];
            tags.forEach(tag => {
                const key = tag.toLowerCase();
                if (!acc[key]) acc[key] = {
                    title: tag,
                    icon: settings.taskGroupIcons?.tag || 'tag',
                    color: settings.taskGroupColorTag,
                    tasks: []
                };
                acc[key].tasks.push(task);
            });
            return acc;
        }, {});

        // Sort groups alphabetically by tag name
        const sortedKeys = Object.keys(groupedByTag).sort((a, b) => a.localeCompare(b));
        const sortedGroups = {};
        for (const key of sortedKeys) {
            sortedGroups[key] = groupedByTag[key];
        }
        return sortedGroups;
    }

    renderTaskGroup(key, groupData) {
        const groupContainer = createDiv({ cls: 'task-group-container', attr: { style: `background-color: ${groupData.color}` } });
        groupContainer.dataset.groupKey = key;

        const isCollapsed = this.plugin.settings.collapsedTaskGroups[key];
        if (isCollapsed) groupContainer.addClass('is-collapsed');

        const header = groupContainer.createDiv({ cls: 'task-group-header' });

        header.addEventListener('click', () => {
            // Find the wrapper element for the list
            const taskListWrapper = groupContainer.querySelector('.task-list-wrapper');
            if (!taskListWrapper) return;

            // Check the current state
            const isCurrentlyCollapsed = groupContainer.classList.contains('is-collapsed');

            if (isCurrentlyCollapsed) {
                // --- EXPANDING ---
                // 1. Set the CSS variable to the element's full scroll height.
                //    This gives the 'height' property a specific value to animate *to*.
                const scrollHeight = taskListWrapper.scrollHeight;
                taskListWrapper.style.setProperty('--task-list-height', `${scrollHeight}px`);

                // 2. Remove the class to trigger the transition.
                groupContainer.classList.remove('is-collapsed');

                // After the animation, remove the explicit height to allow for dynamic content.
                setTimeout(() => {
                    taskListWrapper.style.removeProperty('--task-list-height');
                }, 350); // Match this to your CSS transition duration

            } else {
                // --- COLLAPSING ---
                // 1. Set the CSS variable to the element's current rendered height.
                //    This gives the 'height' property a specific value to animate *from*.
                const currentHeight = taskListWrapper.offsetHeight;
                taskListWrapper.style.setProperty('--task-list-height', `${currentHeight}px`);

                // This is a micro-delay to ensure the browser registers the starting height
                // before being told to transition to 0. This is the key to fixing the "instant collapse".
                requestAnimationFrame(() => {
                    // 2. Add the class to trigger the transition to height: 0.
                    groupContainer.classList.add('is-collapsed');
                });
            }

            // Update and save the state
            this.collapsedTaskGroups[key] = !isCurrentlyCollapsed;
            this.plugin.saveSettings();
        });
       
        const headerContent = header.createSpan({ cls: 'task-group-header-content' });
        const iconEl = headerContent.createSpan({ cls: 'icon' });
        setIcon(iconEl, groupData.icon);
        headerContent.createSpan({ text: `${groupData.title} (${groupData.tasks.length})` });

        const collapseIcon = header.createSpan({ cls: 'task-group-collapse-icon' });
        setIcon(collapseIcon, 'chevron-down');

        const taskListWrapper = groupContainer.createDiv('task-list-wrapper');
        groupData.tasks.forEach(task => {
            const taskEl = this.renderTaskItem(task); // Use the modified renderTaskItem
            taskListWrapper.appendChild(taskEl);
        });

        return groupContainer;
    }

    reconcileTaskList(listWrapperEl, newTasks) {
        const existingTaskRows = new Map();
        listWrapperEl.querySelectorAll('.task-row').forEach(row => {
            if (row.dataset.key) {
                existingTaskRows.set(row.dataset.key, row);
            }
        });

        let lastElement = null;
        newTasks.forEach(task => {
            const taskKey = this.getTaskKey(task);
            let taskEl = existingTaskRows.get(taskKey);

            if (taskEl) {
                this.updateTaskItem(taskEl, task);
                existingTaskRows.delete(taskKey);
            } else {
                taskEl = this.renderTaskItem(task);
            }

            // Ensure the element is in the correct position
            if (lastElement) {
                lastElement.after(taskEl);
            } else {
                listWrapperEl.prepend(taskEl);
            }
            lastElement = taskEl;
        });

        existingTaskRows.forEach(row => row.remove());
    }


    renderTasksByTag(tasks, settings) { // Receives 'settings' as an argument
        // The duplicate declaration that caused the error has been removed.
        tasks = tasks.filter(task => {
            const isCompleted = task.status && task.status.toLowerCase() === 'x';
            if (!isCompleted) return true;
            return settings.showCompletedTasksToday && task.completionDate && isSameDay(task.completionDate, new Date());
        });

        const groupedByTag = tasks.reduce((acc, task) => {
            const tags = task.tags.length > 0 ? task.tags : ['#untagged'];
            tags.forEach(tag => {
                if (!acc[tag]) acc[tag] = [];
                acc[tag].push(task);
            });
            return acc;
        }, {});

        Object.keys(groupedByTag).sort().forEach(tag => {
            const tasksInGroup = groupedByTag[tag];

            const groupContainer = this.tasksContentEl.createDiv({ cls: 'task-group-container', attr: { style: `background-color: ${settings.taskGroupColorTag}` } });

            const isCollapsed = this.collapsedTaskGroups[tag];
            if (isCollapsed) groupContainer.addClass('is-collapsed');

            const header = groupContainer.createDiv({ cls: 'task-group-header' });

            header.addEventListener('click', () => {
                // Find the wrapper element for the list
                const taskListWrapper = groupContainer.querySelector('.task-list-wrapper');
                if (!taskListWrapper) return;

                // Check the current state
                const isCurrentlyCollapsed = groupContainer.classList.contains('is-collapsed');

                if (isCurrentlyCollapsed) {
                    // --- EXPANDING ---
                    // 1. Set the CSS variable to the element's full scroll height.
                    //    This gives the 'height' property a specific value to animate *to*.
                    const scrollHeight = taskListWrapper.scrollHeight;
                    taskListWrapper.style.setProperty('--task-list-height', `${scrollHeight}px`);

                    // 2. Remove the class to trigger the transition.
                    groupContainer.classList.remove('is-collapsed');

                    // After the animation, remove the explicit height to allow for dynamic content.
                    setTimeout(() => {
                        taskListWrapper.style.removeProperty('--task-list-height');
                    }, 350); // Match this to your CSS transition duration

                } else {
                    // --- COLLAPSING ---
                    // 1. Set the CSS variable to the element's current rendered height.
                    //    This gives the 'height' property a specific value to animate *from*.
                    const currentHeight = taskListWrapper.offsetHeight;
                    taskListWrapper.style.setProperty('--task-list-height', `${currentHeight}px`);

                    // This is a micro-delay to ensure the browser registers the starting height
                    // before being told to transition to 0. This is the key to fixing the "instant collapse".
                    requestAnimationFrame(() => {
                        // 2. Add the class to trigger the transition to height: 0.
                        groupContainer.classList.add('is-collapsed');
                    });
                }

                // Update and save the state
                this.collapsedTaskGroups[tag] = !isCurrentlyCollapsed;
                this.plugin.saveSettings();
            });

            const headerContent = header.createSpan({ cls: 'task-group-header-content' });
            const tagIconName = settings.taskGroupIcons?.tag || 'tag';
            const iconEl = headerContent.createSpan({ cls: 'icon' });
            setIcon(iconEl, tagIconName);
            headerContent.createSpan({ text: `${tag} (${tasksInGroup.length})` });

            const collapseIcon = header.createSpan({ cls: 'task-group-collapse-icon' });
            setIcon(collapseIcon, 'chevron-down');

            const taskListWrapper = groupContainer.createDiv('task-list-wrapper');

            if (tasksInGroup.length > 0) {
                tasksInGroup.forEach(task => this.renderTaskItem(task, taskListWrapper));
            } else {
                taskListWrapper.createDiv({ text: 'No tasks with this tag.', cls: 'task-group-empty-message' });
                groupContainer.addClass('is-collapsed');
                taskListWrapper.style.display = 'none';
            }
        });

        if (tasks.length === 0) this.tasksContentEl.createDiv({ text: 'No tasks found', cls: 'task-group-empty-message' });
    }

    renderTasksByDate(tasks, settings) { // Receives 'settings' as an argument
        // The duplicate declaration that caused the error has been removed.
        const now = moment().startOf('day');
        let groups = { overdue: [], today: [], tomorrow: [], next7days: [], future: [], noDate: [] };

        tasks.forEach(task => {
            if (!task.dueDate) {
                groups.noDate.push(task);
                return;
            }
            const due = moment(task.dueDate).startOf('day');
            if (due.isBefore(now)) groups.overdue.push(task);
            else if (due.isSame(now)) groups.today.push(task);
            else if (due.isSame(now.clone().add(1, 'day'))) groups.tomorrow.push(task);
            else if (due.isSameOrBefore(now.clone().add(7, 'days'))) groups.next7days.push(task);
            else groups.future.push(task);
        });

        for (const groupKey in groups) {
            groups[groupKey] = groups[groupKey].filter(task => {
                const isCompleted = task.status && task.status.toLowerCase() === 'x';
                if (!isCompleted) return true;
                return settings.showCompletedTasksToday && task.completionDate && isSameDay(task.completionDate, new Date());
            });
        }

        const icons = settings.taskGroupIcons || DEFAULT_SETTINGS.taskGroupIcons;
        const groupOrder = [
            { key: 'overdue', title: 'Overdue', icon: icons.overdue, color: settings.taskGroupColorOverdue },
            { key: 'today', title: 'Today', icon: icons.today, color: settings.taskGroupColorToday },
            { key: 'tomorrow', title: 'Tomorrow', icon: icons.tomorrow, color: settings.taskGroupColorTomorrow },
            { key: 'next7days', title: 'Next 7 Days', icon: icons.next7days, color: settings.taskGroupColorNext7Days },
            { key: 'future', title: 'Future', icon: icons.future, color: settings.taskGroupColorFuture },
            { key: 'noDate', title: 'No Due Date', icon: icons.noDate, color: settings.taskGroupColorNoDate }
        ];

        let totalTasksRendered = 0;
        groupOrder.forEach(g => {
            if (settings.taskDateGroupsToShow.includes(g.key) || g.key === 'noDate') {
                const tasksInGroup = groups[g.key];
                totalTasksRendered += tasksInGroup.length;

                const groupContainer = this.tasksContentEl.createDiv({ cls: 'task-group-container', attr: { style: `background-color: ${g.color}` } });

                const isCollapsed = this.collapsedTaskGroups[g.key];
                if (isCollapsed) groupContainer.addClass('is-collapsed');

                const header = groupContainer.createDiv({ cls: 'task-group-header' });

                header.addEventListener('click', () => {
                    // Find the wrapper element for the list
                    const taskListWrapper = groupContainer.querySelector('.task-list-wrapper');
                    if (!taskListWrapper) return;

                    // Check the current state
                    const isCurrentlyCollapsed = groupContainer.classList.contains('is-collapsed');

                    if (isCurrentlyCollapsed) {
                        // --- EXPANDING ---
                        // 1. Set the CSS variable to the element's full scroll height.
                        //    This gives the 'height' property a specific value to animate *to*.
                        const scrollHeight = taskListWrapper.scrollHeight;
                        taskListWrapper.style.setProperty('--task-list-height', `${scrollHeight}px`);

                        // 2. Remove the class to trigger the transition.
                        groupContainer.classList.remove('is-collapsed');

                        // After the animation, remove the explicit height to allow for dynamic content.
                        setTimeout(() => {
                            taskListWrapper.style.removeProperty('--task-list-height');
                        }, 350); // Match this to your CSS transition duration

                    } else {
                        // --- COLLAPSING ---
                        // 1. Set the CSS variable to the element's current rendered height.
                        //    This gives the 'height' property a specific value to animate *from*.
                        const currentHeight = taskListWrapper.offsetHeight;
                        taskListWrapper.style.setProperty('--task-list-height', `${currentHeight}px`);

                        // This is a micro-delay to ensure the browser registers the starting height
                        // before being told to transition to 0. This is the key to fixing the "instant collapse".
                        requestAnimationFrame(() => {
                            // 2. Add the class to trigger the transition to height: 0.
                            groupContainer.classList.add('is-collapsed');
                        });
                    }

                    // Update and save the state
                    this.collapsedTaskGroups[g.key] = !isCurrentlyCollapsed;
                    this.plugin.saveSettings();
                });

                const headerContent = header.createSpan({ cls: 'task-group-header-content' });
                const iconEl = headerContent.createSpan({ cls: 'icon' });
                setIcon(iconEl, g.icon);
                headerContent.createSpan({ text: `${g.title} (${tasksInGroup.length})` });

                const collapseIcon = header.createSpan({ cls: 'task-group-collapse-icon' });
                setIcon(collapseIcon, 'chevron-down');

                const taskListWrapper = groupContainer.createDiv('task-list-wrapper');
                if (tasksInGroup.length > 0) {
                    tasksInGroup.forEach(task => this.renderTaskItem(task, taskListWrapper));
                } else {
                    taskListWrapper.createDiv({ text: `No ${g.title.toLowerCase()} tasks.`, cls: 'task-group-empty-message' });
                    groupContainer.addClass('is-collapsed');
                    taskListWrapper.style.display = 'none';
                }
            }
        });

        if (totalTasksRendered === 0 && this.tasksSearchTerm) {
            this.tasksContentEl.createDiv({ text: 'No tasks match your search term.', cls: 'task-group-empty-message' });
        }
    }

    /**
     * Renders a single task item row in a task group.
     * @param {object} task The task object.
     * @param {HTMLElement} container The parent container for the task row.
     */
    renderTaskItem(task) {
        const taskRow = createDiv({ cls: 'task-row' });
        taskRow.dataset.key = this.getTaskKey(task);
        taskRow.dataset.taskStatus = task.status;
        const searchInputEl = this.tasksSearchInputEl;

        const checkbox = taskRow.createDiv({ cls: 'task-checkbox-symbol' });
        this._renderTaskSymbol(checkbox, task);
        const textEl = taskRow.createSpan({ cls: 'task-text' });

        // On initial render, check if the task is already completed and apply the style.
        if (task.status.toLowerCase() === 'x') {
            textEl.classList.add('completed');
        }

        checkbox.addEventListener('click', async (e) => {
            e.stopPropagation();

            // Determine the state *before* the change is made
            const wasCompleted = task.status.toLowerCase() === 'x';

            // Modify the file. This also triggers the background file watcher
            // which will correctly refresh the entire task list after a short delay.
            await this.toggleTaskCompletion(task);

            // --- Provide Instant UI Feedback ---
            // We update the local task object and the DOM immediately so the user
            // sees the change without waiting for the file watcher to finish.

            if (wasCompleted) {
                // If it WAS completed, its new state is INCOMPLETE
                task.status = ' ';
                textEl.classList.remove('completed');
            } else {
                // If it was NOT completed, its new state is COMPLETE
                task.status = 'x';
                textEl.classList.add('completed');
            }

            // Finally, re-render the checkbox symbol itself using the new status
            this._renderTaskSymbol(checkbox, task);
        });

        MarkdownRenderer.render(this.app, task.text, textEl, task.file.path, this);

        taskRow.addEventListener('click', () => this.app.workspace.openLinkText(task.file.path, '', false, { eState: { line: task.lineNumber } }));
        this.addKeydownListeners(taskRow, searchInputEl);

        setTimeout(() => {
            if (this.plugin.settings.taskTextTruncate && textEl.scrollWidth > textEl.clientWidth) {
                const tooltipText = `Task: ${task.text}\n\nFile: ${task.file.path}\nDue: ${task.dueDate ? moment(task.dueDate).format('YYYY-MM-DD') : 'None'}\nTags: ${task.tags.length > 0 ? task.tags.map(t => '#' + t).join(' ') : 'None'}`;
                textEl.setAttribute('aria-label', tooltipText);
            }
        }, 0);

        return taskRow;
    }

    /**
     * Toggles the completion state of a task by modifying the source Markdown file.
     * @param {object} task The task object to toggle.
     */
    async toggleTaskCompletion(task) {
        const content = await this.app.vault.read(task.file);
        const lines = content.split('\n');
        let line = lines[task.lineNumber];

        const completionDateRegex = /\s*✅\s*\d{4}-\d{2}-\d{2}/;
        const today = moment().format("YYYY-MM-DD");
        const isCompleted = task.status.toLowerCase() === 'x';

        // Find the task marker [.] and replace the character inside
        const taskMarkerRegex = /\[.\]/;

        if (isCompleted) {
            // Mark as incomplete: [x] -> [ ] and remove completion date
            let newLine = line.replace(taskMarkerRegex, '[ ]');
            lines[task.lineNumber] = newLine.replace(completionDateRegex, '').trim();
        } else {
            // Mark as complete: [ ] or [/] or [-] -> [x] and add completion date
            let newLine = line.replace(taskMarkerRegex, '[x]');
            newLine = newLine.replace(completionDateRegex, ''); // Remove any old one first
            lines[task.lineNumber] = `${newLine} ✅ ${today}`;
        }
        await this.app.vault.modify(task.file, lines.join('\n'));
    }

    /**
     * Updates an existing task row in the DOM with new data.
     * @param {HTMLElement} taskRowEl The .task-row element to update.
     * @param {object} task The new task object with updated data.
     */
    updateTaskItem(taskRowEl, task) {
        // Only update if the text content has changed
        const textEl = taskRowEl.querySelector('.task-text');

        // Only update if the status has changed
        if (taskRowEl.dataset.taskStatus !== task.status) {
            const checkbox = taskRowEl.querySelector('.task-checkbox-symbol');
            if (checkbox) {
                this._renderTaskSymbol(checkbox, task);
            }
            taskRowEl.dataset.taskStatus = task.status;

            if (textEl) {
                if (task.status.toLowerCase() === 'x') {
                    textEl.classList.add('completed');
                } else {
                    textEl.classList.remove('completed');
                }
            }
        }

        // A simple check to see if the rendered HTML might be different
        if (textEl && textEl.textContent !== task.text) {
            textEl.empty(); // Clear existing rendered markdown
            MarkdownRenderer.render(this.app, task.text, textEl, task.file.path, this);
        }
    }

    /**
     * Opens the scratchpad note in a new or current tab.
     */
    async openScratchpadFile() {
        const path = this.plugin.settings.fixedNoteFile;

        if (this.app.isMobile) {
            let file = this.app.vault.getAbstractFileByPath(path);
            if (!file) {
                try {
                    file = await this.app.vault.create(path, '');
                } catch (err) {
                    new Notice('Failed to create scratchpad file.');
                    console.error(err);
                    return;
                }
            }

            if (file instanceof TFile) {
                // The `true` argument forces a new leaf, which reliably brings the note to the front on mobile.
                this.app.workspace.getLeaf(true).openFile(file);
            } else {
                new Notice('Scratchpad path is invalid or could not be created.');
            }
            return;
        }

        // First, try to find an already open leaf for this file.
        let targetLeaf = this.app.workspace.getLeavesOfType("markdown").find(leaf => leaf.view.file?.path === path);
        if (targetLeaf) { this.app.workspace.revealLeaf(targetLeaf); return; }

        let file = this.app.vault.getAbstractFileByPath(path);
        // If the file doesn't exist, create it.
        if (!file) file = await this.app.vault.create(path, "").catch(() => new Notice(`Failed to create scratchpad: ${path}`));

        if (file instanceof TFile) this.app.workspace.getLeaf(this.plugin.settings.scratchpadOpenAction === 'new-tab').openFile(file);
    }

    /**
     * Saves text content to the scratchpad note file.
     * @param {string} text The text to save.
     */
    async saveFixedNote(text) {
        const path = this.plugin.settings.fixedNoteFile;
        const folderPath = path.substring(0, path.lastIndexOf("/"));
        // Create parent folder if it doesn't exist.
        if (folderPath && !this.app.vault.getAbstractFileByPath(folderPath)) {
            await this.app.vault.createFolder(folderPath).catch(err => console.error("Error creating folder:", err));
        }
        let file = this.app.vault.getAbstractFileByPath(path);
        if (!file) await this.app.vault.create(path, text);
        else if (file instanceof TFile) await this.app.vault.modify(file, text);
    }

    /**
     * Loads the content of the scratchpad note file.
     * @returns {Promise<string>} The content of the note, or an empty string if it doesn't exist.
     */
    async loadNote() {
        const path = this.plugin.settings.fixedNoteFile;
        const file = this.app.vault.getAbstractFileByPath(path);
        if (file instanceof TFile) return await this.app.vault.read(file);
        return "";
    }

    /**
     * Opens a daily note for a given date, creating it from a template if it doesn't exist.
     * @param {Date} date The date for the daily note.
     */
    async openDailyNote(date) {
        const {
            dailyNotesFolder,
            dailyNoteDateFormat,
            dailyNoteTemplatePath,
            dailyNoteOpenAction
        } = this.plugin.settings;
        const filename = formatDate(date, dailyNoteDateFormat);
        const path = dailyNotesFolder ? `${dailyNotesFolder}/${filename}.md` : `${filename}.md`;

        let file = this.app.vault.getAbstractFileByPath(path);
        if (file) {
            // File already exists, just open it
            const leaf = this.app.workspace.getLeaf(dailyNoteOpenAction === 'new-tab');
            await leaf.openFile(file);
            return;
        }
        // --- File does NOT exist, proceed with creation ---

        // This inner function is now updated to handle Templater correctly
        const createNote = async (includeEvents = false) => {

            let templateContent = "";
            const templateFile = dailyNoteTemplatePath ? this.app.vault.getAbstractFileByPath(dailyNoteTemplatePath) : null;

            if (templateFile instanceof TFile) {
                templateContent = await this.app.vault.read(templateFile);
            } else {
                console.warn(`Template file not found at: ${dailyNoteTemplatePath}`);
            }

            // Create the note with the placeholder first
            const newFile = await this.app.vault.create(path, templateContent);

            // Open the note
            const leaf = this.app.workspace.getLeaf(dailyNoteOpenAction === "new-tab");
            await leaf.openFile(newFile);

            const placeholder = this.plugin.settings.calendarEventsPlaceholder || '%%CALENDAR_EVENTS%%';

            // If including events, proceed with injection
            if (includeEvents) {
                await new Promise(resolve => setTimeout(resolve, 200)); // Delay

                // 1. Check for events in the map
                const dateKey = moment(date).format("YYYY-MM-DD");
                const eventsForDay = this.icsEventsByDate.get(dateKey);

                if (eventsForDay && eventsForDay.length > 0) {
                    // 2. Format the events into a string
                    const eventContent = this.formatEventsForTemplate(eventsForDay) || "";

                    // 3. Read the file *after* Templater has run
                    let currentContent = await this.app.vault.read(newFile);

                    // 4. Replace placeholder and save
                    if (currentContent.includes(placeholder)) {
                        const finalContent = currentContent.replace(placeholder, eventContent);
                        await this.app.vault.modify(newFile, finalContent);
                    } else {
                        console.error(`Placeholder "${placeholder}" not found in the note after creation. Templater might be removing it.`);
                    }
                } else {
                    console.warn("No events found for this date, so nothing to inject.");
                }
            }
            // Logic for removing placeholder when includeEvents is false can be added here if needed
            else {
                await new Promise(resolve => setTimeout(resolve, 200));
                let currentContent = await this.app.vault.read(newFile);
                if (currentContent.includes(placeholder)) {
                    const finalContent = currentContent.replace(placeholder, "").trim();
                    await this.app.vault.modify(newFile, finalContent);
                }
            }
        };

        const hasTemplate = !!dailyNoteTemplatePath && dailyNoteTemplatePath.length > 0;
        // The rest of your existing logic remains unchanged.
        const dateKey = moment(date).format('YYYY-MM-DD');
        const eventsForDay = this.icsEventsByDate.get(dateKey);
        const friendlyDate = date.toLocaleDateString(undefined, {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });

        if (eventsForDay && eventsForDay.length > 0) {
            // --- Case 1: Events exist for the selected day ---
            new ActionChoiceModal(this.app,
                `Create daily note for ${friendlyDate}?`,
                "This day has calendar events. How would you like to proceed?",
                [{
                    // Button 1: Always includes events
                    text: hasTemplate ? 'Create with Events & Template' : 'Create with Events',
                    cls: 'mod-cta',
                    action: () => createNote(true)
                }, {
                    // Button 2: Excludes events
                    text: hasTemplate ? 'Create from Template Only' : 'Create Blank Note',
                    action: () => createNote(false)
                }, {
                    text: 'Cancel',
                    action: () => { }
                }]
            ).open();
        } else {
            // --- Case 2: No events exist for the selected day ---
            new ActionChoiceModal(this.app,
                'Create daily note?',
                `A daily note for ${friendlyDate} does not exist. Would you like to create it?`,
                [{
                    // The main action button
                    text: hasTemplate ? 'Create from Template' : 'Create Blank Note',
                    cls: 'mod-cta',
                    action: () => createNote(false) // No events to include, so always false
                }, {
                    text: 'Cancel',
                    action: () => { }
                }]
            ).open();
        }
    }
}


/**
 * The main plugin class that registers the view and settings tab.
 */
class PeriodMonthPlugin extends Plugin {

    themeObserver = null;
    themeChangeDebounceTimer = null;

    async onload() {
        this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
        this.addStyle();
        this.updateStyles();
        this.registerView(VIEW_TYPE_PERIOD, leaf => new PeriodMonthView(leaf, this));
        this.addRibbonIcon("calendar-check", "Open Calendar Period Week Notes", () => this.activateView());
        this.addCommand({ id: "open-period-month-view", name: "Open Calendar Period Week Notes", callback: () => this.activateView() });
        await this.resetIcsRefreshInterval();
        this.addSettingTab(new PeriodSettingsTab(this.app, this));

        this.themeObserver = new MutationObserver(() => {
            clearTimeout(this.themeChangeDebounceTimer);
            this.themeChangeDebounceTimer = setTimeout(() => {
                this.updateStyles();
            }, 100);
        });

        this.themeObserver.observe(document.body, { attributes: true, attributeFilter: ['class'] });

        this.icsRefreshIntervalId = null;
        this.app.workspace.onLayoutReady(() => {
            this.activateView();
        });
    }

    async saveSettings() {
        await this.saveData(this.settings);
    }

    /**
     * Injects the plugin's CSS into the document head.
     */
    addStyle() {
        const styleEl = document.createElement('style');
        styleEl.id = 'period-month-plugin-styles';
        styleEl.textContent = PLUGIN_STYLES;
        document.head.appendChild(styleEl);
    }


    /**
     * Updates CSS custom properties (variables) based on the current plugin settings.
     */
    updateStyles() {
        const styleProps = {
            '--header-font-size': this.settings.fontSize,
            '--day-number-font-size': this.settings.dayNumberFontSize,
            '--header-row-font-weight': this.settings.headerRowBold ? 'bold' : 'normal',
            '--pw-column-font-weight': this.settings.pwColumnBold ? 'bold' : 'normal',
            '--month-color-light': this.settings.monthColorLight,
            '--month-color-dark': this.settings.monthColorDark,
            '--year-color-light': this.settings.yearColorLight,
            '--year-color-dark': this.settings.yearColorDark,
            '--current-highlight-label-color-light': this.settings.currentHighlightLabelColorLight,
            '--current-highlight-label-color-dark': this.settings.currentHighlightLabelColorDark,
            '--pw-separator-color': this.settings.pwColumnSeparatorColor,
            '--pw-column-font-color-light': this.settings.pwColumnFontColorLight,
            '--pw-column-font-color-dark': this.settings.pwColumnFontColorDark,
            '--week-number-font-color-light': this.settings.weekNumberFontColorLight,
            '--week-number-font-color-dark': this.settings.weekNumberFontColorDark,
            '--day-header-font-color-light': this.settings.dayHeaderFontColorLight,
            '--day-header-font-color-dark': this.settings.dayHeaderFontColorDark,
            '--day-cell-font-color-light': this.settings.dayCellFontColorLight,
            '--day-cell-font-color-dark': this.settings.dayCellFontColorDark,
            '--other-month-font-color-light': this.settings.otherMonthFontColorLight,
            '--other-month-font-color-dark': this.settings.otherMonthFontColorDark,
            '--scratch-font-family': this.settings.scratchFontFamily,
            '--scratch-font-size': this.settings.scratchFontSize,
            '--scratch-bold': this.settings.scratchBold ? 'bold' : 'normal',
            '--notes-font-size': this.settings.notesFontSize,
            '--notes-bold': this.settings.notesBold ? 'bold' : 'normal',
            '--tab-title-font-size': this.settings.tabTitleFontSize,
            '--tab-title-bold': this.settings.tabTitleBold ? 'bold' : 'normal',
            '--notes-line-height': this.settings.notesLineHeight,
            '--selected-tab-color': this.settings.selectedTabColor,
            '--today-highlight-color-light': this.settings.todayHighlightColorLight,
            '--today-highlight-color-dark': this.settings.todayHighlightColorDark,
            '--notes-hover-color': this.settings.notesHoverColor,
            '--daily-note-dot-color': this.settings.dailyNoteDotColor,
            '--note-created-color': this.settings.noteCreatedColor,
            '--note-modified-color': this.settings.noteModifiedColor,
            '--other-note-dot-color': this.settings.noteCreatedColor,
            '--calendar-grid-gap-width': this.settings.calendarGridGapWidth,
            '--calendar-modified-dot-color': this.settings.noteModifiedColor,
            '--other-note-popup-font-size': this.settings.otherNotePopupFontSize,
            '--calendar-dot-size': this.settings.calendarDotSize + 'px',
            '--nav-button-height': this.settings.navButtonHeight,
            '--date-cell-hover-color-light': this.settings.dateCellHoverColorLight,
            '--date-cell-hover-color-dark': this.settings.dateCellHoverColorDark,
            '--main-month-year-title-font-size': this.settings.mainMonthYearTitleFontSize,
            '--main-month-title-weight': this.settings.mainMonthTitleBold ? 'bold' : 'normal',
            '--main-year-title-weight': this.settings.mainYearTitleBold ? 'bold' : 'normal',
            '--today-highlight-size': this.settings.todayHighlightSize,
            '--task-heading-font-size': this.settings.taskHeadingFontSize,
            '--task-text-font-size': this.settings.taskTextFontSize,
            '--scratchpad-highlight-color': this.settings.scratchpadHighlightColor,
            '--asset-dot-color': this.settings.assetDotColor,
            '--calendar-event-dot-color': this.settings.calendarEventDotColor,
            '--task-dot-color': this.settings.taskDotColor,
            '--task-badge-color': this.settings.taskBadgeColor,
            '--task-badge-font-color': this.settings.taskBadgeFontColor,
            '--task-badge-font-size': this.settings.taskBadgeFontSize,
            '--today-circle-color-light': this.settings.todayCircleColorLight,
            '--today-circle-color-dark': this.settings.todayCircleColorDark,
            '--weekly-note-dot-color': this.settings.weeklyNoteDotColor,
            '--weekend-shade-color-light': this.settings.weekendShadeColorLight,
            '--weekend-shade-color-dark': this.settings.weekendShadeColorDark,
            '--weekly-note-dot-color': this.settings.weeklyNoteDotColor,
            '--row-highlight-color-light': this.settings.rowHighlightColorLight,
            '--row-highlight-color-dark': this.settings.rowHighlightColorDark,

        };

        for (const key in styleProps) {
            document.documentElement.style.setProperty(key, styleProps[key]);
        }
    }

    /**
     * Opens the plugin view in a new leaf or reveals it if it's already open.
     */
    async activateView() {
        const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_PERIOD);
        if (leaves.length > 0) {
            this.app.workspace.revealLeaf(leaves[0]);
            return;
        }
        const leaf = this.app.workspace.getRightLeaf(false);
        await leaf.setViewState({ type: VIEW_TYPE_PERIOD, active: true });
        this.app.workspace.revealLeaf(leaf);
    }

    async resetIcsRefreshInterval() {
        // If there's an old interval running, clear it first
        if (this.icsRefreshIntervalId !== null) {
            window.clearInterval(this.icsRefreshIntervalId);
        }

        const intervalMinutes = this.settings.icsRefreshInterval;

        if (intervalMinutes > 0) {
            const intervalMilliseconds = intervalMinutes * 60 * 1000;

            this.icsRefreshIntervalId = this.registerInterval(
                window.setInterval(async () => {
                    console.log(`Periodic Notes: Automatically refreshing ICS feed (interval: ${intervalMinutes} minutes).`);

                    // We need to find the view to call its refresh method
                    const views = this.app.workspace.getLeavesOfType(VIEW_TYPE_PERIOD);
                    for (const leaf of views) {
                        if (leaf.view && leaf.view.refreshIcsEvents) {
                            await leaf.view.refreshIcsEvents();
                        }
                    }
                }, intervalMilliseconds)
            );
        }
    }


    onunload() {
        // Clean up when the plugin is disabled.
        const styleEl = document.getElementById('period-month-plugin-styles');
        if (styleEl) styleEl.remove();
        this.app.workspace.getLeavesOfType(VIEW_TYPE_PERIOD).forEach(leaf => leaf.detach());

        if (this.themeObserver) {
            this.themeObserver.disconnect();
        }

    }
}

/**
 * The settings tab class for the plugin, responsible for building the settings UI.
 */
class PeriodSettingsTab extends PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
        this.activeTab = 'general';
        this.activePreviewMode = null;
        this.scrollPosition = 0;
        this.colorClipboard = null;
        this.selectedThemeFile = null;
        this.currentThemeDefaults = { ...DEFAULT_SETTINGS };
    }

    refreshDisplay() {
        if (this.contentEl) {
            this.scrollPosition = this.contentEl.scrollTop;
        }
        this.display();
    }

    async loadCurrentThemeDefaults() {
        // If a theme is active, try to load its settings
        if (this.plugin.settings.appliedTheme) {
            const themeName = this.plugin.settings.appliedTheme;
            const themePath = `${this.plugin.manifest.dir}/themes/${themeName}.json`;
            try {
                if (await this.app.vault.adapter.exists(themePath)) {
                    const fileContent = await this.app.vault.adapter.read(themePath);
                    const themeSettings = JSON.parse(fileContent);
                    // Merge theme settings over base defaults to get the final defaults
                    this.currentThemeDefaults = { ...DEFAULT_SETTINGS, ...themeSettings };
                } else {
                    // If the theme file is missing, fall back to base defaults
                    console.warn(`Applied theme file "${themeName}.json" not found. Using base defaults.`);
                    this.currentThemeDefaults = { ...DEFAULT_SETTINGS };
                }
            } catch (e) {
                console.error("Error loading theme defaults:", e);
                this.currentThemeDefaults = { ...DEFAULT_SETTINGS };
            }
        } else {
            // If no theme is active, the defaults are just the base defaults
            this.currentThemeDefaults = { ...DEFAULT_SETTINGS };
        }
    }

    async hide() {
        // This function runs automatically when the user closes the settings tab.
        // Get all open views of your calendar type
        const views = this.app.workspace.getLeavesOfType(VIEW_TYPE_PERIOD);

        if (views.length > 0) {
            // Tell each open calendar view to re-render itself
            for (const leaf of views) {
                if (leaf.view instanceof PeriodMonthView) { // Assuming your view class is PeriodMonthView
                    // Calling renderCalendar() will redraw the view with the latest settings
                    await leaf.view.renderCalendar();
                }
            }
        }
    }

    /**
     * A helper function to save settings and trigger a full UI refresh in any open views.
     */
    async saveAndUpdate() {
        await this.plugin.saveData(this.plugin.settings);
        this.plugin.updateStyles();
        this.plugin.app.workspace.getLeavesOfType(VIEW_TYPE_PERIOD).forEach(leaf => {
            if (leaf.view instanceof PeriodMonthView) {
                leaf.view.rebuildAndRender();
            }
        });
    }

    /**
     * Parses an rgba() string into a hex color and an alpha value.
     * @param {string} rgbaString The input string (e.g., "rgba(255, 165, 0, 0.4)").
     * @returns {{color: string, alpha: number}}
     */
    parseRgba(rgbaString) {
        if (!rgbaString) return { color: '#000000', alpha: 1 };
        const match = rgbaString.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);
        if (!match) return { color: '#000000', alpha: 1 };
        const toHex = (c) => ('0' + parseInt(c, 10).toString(16)).slice(-2);
        const color = `#${toHex(match[1])}${toHex(match[2])}${toHex(match[3])}`;
        const alpha = match[4] !== undefined ? parseFloat(match[4]) : 1;
        return { color, alpha };
    }

    /**
     * Builds an rgba() string from a hex color and an alpha value.
     * @param {string} hex The hex color string (e.g., "#ffa500").
     * @param {number} alpha The alpha value (0 to 1).
     * @returns {string} The rgba string.
     */
    buildRgba(hex, alpha) {
        const r = parseInt(hex.slice(1, 3), 16);
        const g = parseInt(hex.slice(3, 5), 16);
        const b = parseInt(hex.slice(5, 7), 16);
        return `rgba(${r}, ${g}, ${b}, ${alpha.toFixed(2)})`;
    }

    /**
     * Creates a custom setting component with a color picker and an alpha slider.
     * @param {string} name The setting name.
     * @param {string} desc The setting description.
     * @param {string} settingKey The key in the settings object to modify.
     */
    createRgbaColorSetting(containerEl, name, desc, settingKey) {
        const setting = new Setting(containerEl)
            .setName(name)
            .setDesc(desc);

        let colorPicker;
        let slider;

        const initialValue = this.plugin.settings[settingKey] || DEFAULT_SETTINGS[settingKey];
        const { color: initialColor, alpha: initialAlpha } = this.parseRgba(initialValue);

        setting.addColorPicker(picker => {
            colorPicker = picker;
            picker
                .setValue(initialColor)
                .onChange(async (newColor) => {
                    const currentAlpha = slider ? slider.getValue() : 1;
                    const newRgba = this.buildRgba(newColor, currentAlpha);
                    this.plugin.settings[settingKey] = newRgba;
                    if (picker.colorEl) {
                        picker.colorEl.style.backgroundColor = newRgba;
                    }
                    await this.saveAndUpdate();
                });
        });

        setting.addSlider(sliderComponent => {
            slider = sliderComponent;
            slider
                .setLimits(0, 1, 0.05)
                .setValue(initialAlpha)
                .setDynamicTooltip()
                .onChange(async (newAlpha) => {
                    const currentColor = colorPicker ? colorPicker.getValue() : '#000000';
                    const newRgba = this.buildRgba(currentColor, newAlpha);
                    this.plugin.settings[settingKey] = newRgba;
                    if (colorPicker && colorPicker.colorEl) {
                        colorPicker.colorEl.style.backgroundColor = newRgba;
                    }
                    await this.saveAndUpdate();
                });
        });

        // Set the initial color swatch correctly
        if (colorPicker && colorPicker.colorEl) {
            colorPicker.colorEl.style.backgroundColor = initialValue;
        }

        // --- NEW COPY AND PASTE BUTTONS ---
        setting.addExtraButton(button => {
            button
                .setIcon("copy")
                .setTooltip("Copy color and transparency")
                .onClick(() => {
                    this.colorClipboard = this.plugin.settings[settingKey];
                });
        });

        setting.addExtraButton(button => {
            button
                .setIcon("paste")
                .setTooltip("Paste color and transparency")
                .onClick(async () => {
                    if (!this.colorClipboard) {
                        new Notice("Clipboard is empty.");
                        return;
                    }

                    this.plugin.settings[settingKey] = this.colorClipboard;

                    const { color, alpha } = this.parseRgba(this.colorClipboard);

                    if (colorPicker) {
                        colorPicker.setValue(color);
                        if (colorPicker.colorEl) {
                            colorPicker.colorEl.style.backgroundColor = this.colorClipboard;
                        }
                    }
                    if (slider) {
                        slider.setValue(alpha);
                    }

                    await this.saveAndUpdate();
                });
        });

        setting.addExtraButton(button => {
            button
                .setIcon('rotate-ccw')
                .setTooltip('Reset to default')
                .onClick(async () => {
                    const defaultValue = this.currentThemeDefaults[settingKey];
                    this.plugin.settings[settingKey] = defaultValue;
                    const { color, alpha } = this.parseRgba(defaultValue);

                    if (colorPicker) {
                        colorPicker.setValue(color);
                        if (colorPicker.colorEl) {
                            colorPicker.colorEl.style.backgroundColor = defaultValue;
                        }
                    }
                    if (slider) {
                        slider.setValue(alpha);
                    }
                    await this.saveAndUpdate();
                });
        });
    }


    /**
     * Creates a simple path suggestion popup for a text input element.
     * @param {HTMLInputElement} inputEl The input element to attach the suggester to.
     * @param {(query: string) => string[]} getSuggestions A function that returns a list of suggestion strings based on a query.
     */
    createPathSuggester(inputEl, getSuggestions) {
        const suggestionEl = createDiv({ cls: 'custom-suggestion-container' });
        suggestionEl.style.display = 'none';
        inputEl.parentElement.appendChild(suggestionEl);
        const showSuggestions = () => {
            const query = inputEl.value.toLowerCase();
            const suggestions = getSuggestions(query);
            suggestionEl.empty();
            if (suggestions.length === 0) {
                suggestionEl.style.display = 'none';
                return;
            }
            suggestionEl.style.display = 'block';
            suggestions.slice(0, 10).forEach(path => {
                const item = suggestionEl.createDiv({ cls: 'custom-suggestion-item', text: path });
                item.addEventListener('mousedown', (e) => {
                    e.preventDefault();
                    inputEl.value = path;
                    inputEl.dispatchEvent(new Event('input'));
                    suggestionEl.style.display = 'none';
                });
            });
        };
        inputEl.addEventListener('input', showSuggestions);
        inputEl.addEventListener('focus', showSuggestions);
        inputEl.addEventListener('blur', () => setTimeout(() => { suggestionEl.style.display = 'none'; }, 150));
    }

    /**
     * Creates a settings section for managing a list of ignored folder paths.
     * @param {HTMLElement} containerEl The parent container for this setting section.
     * @param {string} name The heading name for the section.
     * @param {string} desc The description for the section.
     * @param {string} settingKey The key in the settings object for the ignored folder array.
     */
    createIgnoredFolderList(containerEl, name, desc, settingKey) {
        new Setting(containerEl).setName(name).setDesc(desc).setHeading();
        const ignoredFolders = this.plugin.settings[settingKey];
        if (ignoredFolders && ignoredFolders.length > 0) {
            ignoredFolders.forEach((folder, index) => {
                new Setting(containerEl).setName(folder).addButton(button => {
                    button.setIcon("trash").setTooltip("Remove folder")
                        .onClick(async () => {
                            this.plugin.settings[settingKey].splice(index, 1);
                            await this.saveAndUpdate();
                            this.refreshDisplay();
                        });
                });
            });
        } else {
            containerEl.createEl('p', { text: 'No folders are being ignored.', cls: 'setting-item-description' });
        }
        const addSetting = new Setting(containerEl);
        let textInput;
        addSetting.addText(text => {
            textInput = text;
            const getFolders = (query) => this.app.vault.getAllLoadedFiles().filter(f => f instanceof TFolder && (!query || f.path.toLowerCase().includes(query))).map(f => f.path);
            this.createPathSuggester(text.inputEl, getFolders);
            text.setPlaceholder("Enter folder path to ignore...");
        }).addButton(button => {
            button.setButtonText("Add").setTooltip("Add this folder to the ignore list")
                .onClick(async () => {
                    const newFolder = textInput.getValue();
                    if (newFolder && !this.plugin.settings[settingKey].includes(newFolder)) {
                        this.plugin.settings[settingKey].push(newFolder);
                        await this.saveAndUpdate();
                        this.refreshDisplay();
                    }
                });
        });
    }

    async display() {
        const { containerEl } = this;
        containerEl.empty();

        await this.loadCurrentThemeDefaults();

        // Create the main two-column layout
        const settingsContainer = containerEl.createDiv({ cls: 'period-settings-container' });
        const navEl = settingsContainer.createDiv({ cls: 'period-settings-nav' });
        this.contentEl = settingsContainer.createDiv({ cls: 'period-settings-content' }); // Assign content area to this.contentEl

        const tabs = {
            general: "General Display",
            functional: "Calendar Functional",
            popup: "Popup Controls",
            dots: "Dot Indicators",
            weeklyNotes: "Weekly Notes",
            tasksIndicator: "Task Indicators",
            tabs: "General Tab",
            scratchpad: "ScratchPad Tab",
            notes: "Notes Tab",
            pinned: 'Pinned Notes Tab',
            assets: "Assets Tab",
            tasks: "Tasks Tab",
            themes: "Themes",
            importExport: "Import / Export",
            startHere: "Help",
            about: "About"
        };

        // Create the navigation buttons on the left
        for (const [key, label] of Object.entries(tabs)) {
            const button = navEl.createEl('button', { text: label });
            if (this.activeTab === key) {
                button.addClass('is-active');
            }
            button.addEventListener('click', () => {
                this.activeTab = key;
                this.display(); // Re-render the whole tab on click
            });
        }

        // Now, render the content for the active tab into this.contentEl
        this.renderContentForActiveTab();
    }

    // Function to render the draggable list of pinned notes
    async renderDraggablePinnedNotes(container) {
        container.empty();

        const pinValue = this.plugin.settings.pinTag.toLowerCase();
        const allMarkdownFiles = this.app.vault.getMarkdownFiles();

        // Filter for pinned notes (using your existing logic)
        const pinnedNotes = allMarkdownFiles.filter(file => {
            const cache = this.app.metadataCache.getFileCache(file);
            if (!cache) return false;

            // Check tags
            const hasPinTag = cache.tags?.some(tag => tag.tag.toLowerCase().includes(pinValue));
            if (hasPinTag) return true;

            // Check frontmatter
            const frontmatter = cache.frontmatter;
            if (frontmatter) {
                for (const key in frontmatter) {
                    const value = frontmatter[key];
                    if (typeof value === 'string' && value.toLowerCase().includes(pinValue)) return true;
                    if (Array.isArray(value) && value.some(item => typeof item === 'string' && item.toLowerCase().includes(pinValue))) return true;
                }
            }
            return false;
        });

        const customOrder = this.plugin.settings.pinnedNotesCustomOrder || [];

        // Sort the notes based on the saved custom order, with a fallback for new notes
        pinnedNotes.sort((a, b) => {
            const indexA = customOrder.indexOf(a.path);
            const indexB = customOrder.indexOf(b.path);

            if (indexA === -1 && indexB === -1) return a.basename.localeCompare(b.basename);
            if (indexA === -1) return 1;
            if (indexB === -1) return -1;
            return indexA - indexB;
        });

        // Create draggable elements
        pinnedNotes.forEach(file => {
            const itemEl = container.createDiv({ cls: 'draggable-item' });
            itemEl.draggable = true;
            itemEl.dataset.filePath = file.path;

            const handle = itemEl.createDiv({ cls: 'drag-handle' });
            setIcon(handle, 'grip-vertical');
            itemEl.createSpan({ text: file.basename });

            // Drag-and-Drop Event Listeners
            itemEl.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('text/plain', file.path);
                itemEl.classList.add('dragging');
            });

            itemEl.addEventListener('dragend', () => {
                itemEl.classList.remove('dragging');
            });

            itemEl.addEventListener('dragover', (e) => {
                e.preventDefault();
                const draggingItem = container.querySelector('.dragging');
                if (draggingItem && draggingItem !== itemEl) {
                    const rect = itemEl.getBoundingClientRect();
                    const isAfter = e.clientY > rect.top + rect.height / 2;
                    if (isAfter) {
                        itemEl.parentNode.insertBefore(draggingItem, itemEl.nextSibling);
                    } else {
                        itemEl.parentNode.insertBefore(draggingItem, itemEl);
                    }
                }
            });
        });

        // Save the new order on drop (by listening on the container)
        container.addEventListener('drop', async () => {
            const newOrder = Array.from(container.children).map(child => child.dataset.filePath);
            this.plugin.settings.pinnedNotesCustomOrder = newOrder;
            await this.plugin.saveSettings();
            new Notice('Custom pinned order saved!');
        });
    }

    renderContentForActiveTab() {
        this.contentEl.empty();
        switch (this.activeTab) {
            case 'general':
                this.renderGeneralSettings();
                break;
            case 'functional':
                this.renderFunctionalSettings();
                break;
            case 'popup':
                this.renderPopupSettings();
                break;
            case 'dots':
                this.renderDotsSettings();
                break;
            case 'weeklyNotes':
                this.renderWeeklyNotesSettings();
                break;
            case 'tasksIndicator':
                this.renderTaskIndicatorSettings();
                break;
            case 'tabs':
                this.renderTabsSettings();
                break;
            case 'scratchpad':
                this.renderScratchpadSettings();
                break;
            case 'notes':
                this.renderNotesSettings();
                break;
            case 'pinned':
                this.renderPinnedNotesSettings();
                break;
            case 'assets':
                this.renderAssetsSettings();
                break;
            case 'tasks':
                this.renderTasksSettings();
                break;
            case 'themes':
                this.renderThemesSettings();
                break;
            case 'importExport':
                this.renderImportExportTab();
                break;
            case 'startHere':
                this.renderStartHereTab();
                break;
            case 'about':
                this.renderAboutTab();
                break;
        }
    }

    // --- RENDER METHODS FOR EACH TAB ---
    renderGeneralSettings() {
        const containerEl = this.contentEl;
        containerEl.empty();

        containerEl.createEl("h1", { text: "General Display Settings" });

        // --- Titles & Headers Section ---
        new Setting(containerEl).setName("Titles & Headers").setHeading();
        const monthTitleSetting = new Setting(containerEl).setName("Month title format");
        monthTitleSetting.descEl.innerHTML = `
            Set the format for the calendar's month title. Uses <a href="https://momentjs.com/docs/#/displaying/format/">moment.js</a> format strings, e.g.
            <br><code>YYYY</code>: 4-digit year (e.g., 2025)
            <br><code>YY</code>: 2-digit year (e.g., 25)
            <br><code>MMMM</code>: Full month name (e.g., September)
            <br><code>MMM</code>: Short month name (e.g., Sep)
            <br><code>MM</code>: 2-digit month (e.g., 09)
            <br><code>M</code>: Month number (e.g., 9)
        `;

        monthTitleSetting.addText(text => text.setPlaceholder("MMMM YYYY").setValue(this.plugin.settings.monthTitleFormat).onChange(async (value) => { this.plugin.settings.monthTitleFormat = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Month title font size").setDesc("Font size for the main 'Month Year' title at the top of the calendar. Default is 22px.").addText(text => text.setValue(this.plugin.settings.mainMonthYearTitleFontSize).onChange(async value => { this.plugin.settings.mainMonthYearTitleFontSize = value; await this.saveAndUpdate(); }));

        new Setting(containerEl)
            .setName("Bold month in title")
            .setDesc("Toggles bold font weight for the month part of the title.")
            .addToggle(toggle => {
                toggle
                    .setValue(this.plugin.settings.mainMonthTitleBold)
                    .onChange(async (value) => {
                        this.plugin.settings.mainMonthTitleBold = value;
                        await this.saveAndUpdate();
                    });
            });

        this.createRgbaColorSetting(containerEl, "Month Title Color (Light Mode)", "Color for the main 'Month' title in light mode.", "monthColorLight");
        this.createRgbaColorSetting(containerEl, "Month Title Color (Dark Mode)", "Color for the main 'Month' title in dark mode.", "monthColorDark");

        new Setting(containerEl)
            .setName("Bold year in title")
            .setDesc("Toggles bold font weight for the year part of the title.")
            .addToggle(toggle => {
                toggle
                    .setValue(this.plugin.settings.mainYearTitleBold)
                    .onChange(async (value) => {
                        this.plugin.settings.mainYearTitleBold = value;
                        await this.saveAndUpdate();
                    });
            });

        this.createRgbaColorSetting(
            containerEl,
            'Year Title Color (Light Mode)',
            'Color for the year text in the main title in light mode.',
            'yearColorLight'
        );
        this.createRgbaColorSetting(
            containerEl,
            'Year Title Color (Dark Mode)',
            'Color for the year text in the main title in dark mode.',
            'yearColorDark'
        );

        new Setting(containerEl).setName("Navigation buttons height").setDesc("Default is 28px.").addText(text => text.setValue(this.plugin.settings.navButtonHeight).onChange(async value => { this.plugin.settings.navButtonHeight = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Bold calendar header").setDesc("Toggles bold font weight for the day names row (Mon, Tue, etc.).").addToggle(toggle => toggle.setValue(this.plugin.settings.headerRowBold).onChange(async value => { this.plugin.settings.headerRowBold = value; await this.saveAndUpdate(); }));
        this.createRgbaColorSetting(containerEl, "Day header row font color (Light Mode)", "Text color for the day names (Sun, Mon, Tue, etc.) in light theme.", "dayHeaderFontColorLight");
        this.createRgbaColorSetting(containerEl, "Day header row font color (Dark Mode)", "Text color for the day names (Sun, Mon, Tue, etc.) in dark theme.", "dayHeaderFontColorDark");

        // --- Calendar Grid Section ---
        new Setting(containerEl).setName("Calendar Grid").setHeading();

        new Setting(containerEl)
            .setName("Calendar grid layout")
            .setDesc("Choose between a spacious, normal or condensed layout for the calendar grid.")
            .addDropdown(dropdown => dropdown
                .addOption('spacious', 'Spacious')
                .addOption('normal', 'Normal')
                .addOption('condensed', 'Condensed')
                .setValue(this.plugin.settings.calendarLayout)
                .onChange(async (value) => {
                    this.plugin.settings.calendarLayout = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName('Calendar grid labels font size')
            .setDesc('Font size for calendar day lables and week, period/week columns. Default is 12px.')
            .addText(text => text
                .setValue(this.plugin.settings.fontSize)
                .onChange(async (value) => {
                    this.plugin.settings.fontSize = value;
                    await this.saveAndUpdate();
                }));
        new Setting(containerEl).setName("Calendar grid day numbers font size").setDesc("Font size for the day numbers in the calendar grid. Default is 15px.").addText(text => text.setValue(this.plugin.settings.dayNumberFontSize).onChange(async value => { this.plugin.settings.dayNumberFontSize = value; await this.saveAndUpdate(); }));
        this.createRgbaColorSetting(containerEl, "Date cell font color (Light Mode)", "Text color for the date numbers in light theme.", "dayCellFontColorLight");
        this.createRgbaColorSetting(containerEl, "Date cell font color (Dark Mode)", "Text color for the date numbers in dark theme.", "dayCellFontColorDark");
        this.createRgbaColorSetting(containerEl, "Other month date font color (Light Mode)", "Text color for dates outside the current month in light theme.", "otherMonthFontColorLight");
        this.createRgbaColorSetting(containerEl, "Other month date font color (Dark Mode)", "Text color for dates outside the current month in dark theme.", "otherMonthFontColorDark");

        new Setting(containerEl).setName("Show calendar grid lines").setDesc("Toggles the visibility of border lines around each date cell.").addToggle(toggle => toggle.setValue(this.plugin.settings.showCalendarGridLines).onChange(async value => { this.plugin.settings.showCalendarGridLines = value; await this.saveAndUpdate(); }));
        new Setting(containerEl)
            .setName("Calendar grid gap width")
            .setDesc("Width of the gap/border between calendar cells. The grid lines setting above needs to be toggled on. (e.g., 1px, 2px, 0.5px). Default is 1px.")
            .addText(text => text
                .setPlaceholder("1px")
                .setValue(this.plugin.settings.calendarGridGapWidth)
                .onChange(async (value) => {
                    this.plugin.settings.calendarGridGapWidth = value || "1px";
                    await this.saveAndUpdate();
                }));

        // --- Corrected Dynamic "Today's date style" Section ---
        const todayStyleSetting = new Setting(containerEl)
            .setName("Today's date style")
            .setDesc("Choose how to indicate the current day on the calendar.");

        const todayHighlightSizeSetting = new Setting(containerEl)
            .setName("Today circle highlight size")
            .setDesc("Adjust the size of the 'today' highlight circle.")
            .addSlider(slider => slider
                .setLimits(1.5, 3.4, 0.1) // Min size, Max size, Step increment

                // This part is correct: It gives the slider the number it needs.
                .setValue(parseFloat(this.plugin.settings.todayHighlightSize))

                .setDynamicTooltip() // Shows the current value as you slide
                .onChange(async (value) => {

                    this.plugin.settings.todayHighlightSize = `${value}em`;
                    await this.saveAndUpdate();
                    this.plugin.app.workspace.getLeavesOfType(VIEW_TYPE_PERIOD).forEach(leaf => {
                        if (leaf.view instanceof CalendarPeriodWeekView) {
                            leaf.view.containerEl.style.setProperty(
                                '--today-highlight-size',
                                this.plugin.settings.todayHighlightSize // Now using the correct value from settings
                            );
                        }
                    });
                }));

        const highlightOptionsContainer = containerEl.createDiv();
        const renderHighlightOptions = (style) => {
            highlightOptionsContainer.empty();

            if (style === 'cell') {
                this.createRgbaColorSetting(highlightOptionsContainer, "Today's Date Cell Highlight (Light Mode)", "Background color for the current day's cell in light mode.", "todayHighlightColorLight");
                this.createRgbaColorSetting(highlightOptionsContainer, "Today's Date Cell Highlight (Dark Mode)", "Background color for the current day's cell in dark mode.", "todayHighlightColorDark");
            } else if (style === 'circle' || style === 'number') {

                this.createRgbaColorSetting(highlightOptionsContainer, "Today's Date Highlight Color (Light Mode)", "Controls the highlight for Circle/Square styles in light mode.", "todayCircleColorLight");
                this.createRgbaColorSetting(highlightOptionsContainer, "Today's Date Highlight Color (Dark Mode)", "Controls the highlight for Circle/Square styles in dark mode.", "todayCircleColorDark");
            }

            if (style === 'circle') {

                todayHighlightSizeSetting.settingEl.style.display = '';
            } else {
                todayHighlightSizeSetting.settingEl.style.display = 'none';

            }
        };

        todayStyleSetting.addDropdown(dropdown => {
            dropdown
                .addOption('none', 'Off (No Highlight)')
                .addOption('cell', 'Highlight Cell')
                .addOption('circle', 'Circle Around Date')
                .addOption('number', 'Square Around Date')
                .setValue(this.plugin.settings.todayHighlightStyle)
                .onChange(async (value) => {
                    this.plugin.settings.todayHighlightStyle = value;
                    await this.saveAndUpdate();
                    renderHighlightOptions(value);
                });
        });

        renderHighlightOptions(this.plugin.settings.todayHighlightStyle);
        // --- End of Corrected Section ---

        new Setting(containerEl).setName("Highlight today's day header").setDesc("Colors the day column header (Sun, Mon, etc.) containing today.").addToggle(toggle => toggle.setValue(this.plugin.settings.highlightTodayDayHeader).onChange(async value => { this.plugin.settings.highlightTodayDayHeader = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Highlight today's P/W or week number").setDesc("Colors the Period/Week or Calendar Week number for the current week.").addToggle(toggle => toggle.setValue(this.plugin.settings.highlightTodayPWLabel).onChange(async value => { this.plugin.settings.highlightTodayPWLabel = value; await this.saveAndUpdate(); }));

        this.createRgbaColorSetting(
            containerEl,
            "Current Day / Week Label Highlight (Light Mode)",
            "Color for the current day's labels, (e.g. SUN, MON) and period week / calendar week labels in light mode.",
            "currentHighlightLabelColorLight"
        );

        this.createRgbaColorSetting(
            containerEl,
            "Current Day / Week Label Highlight (Dark Mode)",
            "Color for the current day's labels, (e.g. SUN, MON) and period week / calendar week labels in dark mode.",
            "currentHighlightLabelColorDark"
        );

        this.createRgbaColorSetting(containerEl, "Date Cell Hover Color (Light Mode)", "Background color when hovering over a date cell in light mode.", "dateCellHoverColorLight");
        this.createRgbaColorSetting(containerEl, "Date Cell Hover Color (Dark Mode)", "Background color when hovering over a date cell in dark mode.", "dateCellHoverColorDark");
        new Setting(containerEl).setName("Bold Period/Week column").setDesc("Toggles bold font weight for the Period/Week column.").addToggle(toggle => toggle.setValue(this.plugin.settings.pwColumnBold).onChange(async value => { this.plugin.settings.pwColumnBold = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Show P/W separator line").setDesc("Display a vertical line between the week columns and the date grid.").addToggle(toggle => toggle.setValue(this.plugin.settings.showPWColumnSeparator).onChange(async value => { this.plugin.settings.showPWColumnSeparator = value; await this.saveAndUpdate(); }));
        this.createRgbaColorSetting(containerEl, "P/W separator line color", "Color of the vertical separator line.", "pwColumnSeparatorColor");
        this.createRgbaColorSetting(containerEl, "Period/Week column font color (Light Mode)", "Text color for the Period/Week column in light theme.", "pwColumnFontColorLight");
        this.createRgbaColorSetting(containerEl, "Period/Week column font color (Dark Mode)", "Text color for the Period/Week column in dark theme.", "pwColumnFontColorDark");
        this.createRgbaColorSetting(containerEl, "Week number column font color (Light Mode)", "Text color for the week number column in light theme.", "weekNumberFontColorLight");
        this.createRgbaColorSetting(containerEl, "Week number column font color (Dark Mode)", "Text color for the week number column in dark theme.", "weekNumberFontColorDark");
    }

    renderFunctionalSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Calendar Functional Settings" });

        // --- Period/Week System Section ---
        new Setting(containerEl).setName("Period/Week System").setHeading();

        new Setting(containerEl)
            .setName("Week starts on")
            .setDesc("Choose whether the calendar week starts on Sunday or Monday.")
            .addDropdown(dropdown => dropdown
                .addOption('monday', 'Monday')
                .addOption('sunday', 'Sunday')
                .setValue(this.plugin.settings.weekStartDay)
                .onChange(async (value) => {
                    this.plugin.settings.weekStartDay = value;
                    await this.saveAndUpdate();
                    // Refresh the settings tab to show the updated validation message
                    this.refreshDisplay();
                }));

        const requiredDay = this.plugin.settings.weekStartDay === 'monday' ? 1 : 0; // Monday is 1, Sunday is 0
        const requiredDayName = this.plugin.settings.weekStartDay.charAt(0).toUpperCase() + this.plugin.settings.weekStartDay.slice(1);

        new Setting(containerEl)
            .setName("Start of Period 1 Week 1")
            .setDesc(`The date for the start of P1W1. This date MUST be a ${requiredDayName} to match your 'Week starts on' setting.`) // Dynamic description
            .addText(text => {
                text.inputEl.type = "date";
                text.setValue(this.plugin.settings.startOfPeriod1Date)
                    .onChange(async value => {
                        const selectedDate = moment(value, "YYYY-MM-DD");
                        if (selectedDate.day() !== requiredDay) {
                            new Notice(`Error: The start date must be a ${requiredDayName}.`, 5000);
                            return; // Do not save the invalid date
                        }
                        this.plugin.settings.startOfPeriod1Date = value;
                        await this.saveAndUpdate();
                    });
            });

        new Setting(containerEl).setName("Period/Week format").setDesc("Choose the display format for the P/W column.").addDropdown(dropdown => dropdown.addOption("P#W#", "P#W#").addOption("P# W#", "P# W#").addOption("# W#", "# W#").addOption("p#w#", "p#p#").addOption("p# w#", "p# w#").addOption("# w#", "# w#").addOption("#-#", "#-#").addOption("# - #", "# - #").addOption("#/#", "#/#").addOption("# / #", "# / #").addOption("#,#", "#,#").addOption("#, #", "#, #").setValue(this.plugin.settings.pwFormat).onChange(async (value) => { this.plugin.settings.pwFormat = value; await this.saveAndUpdate(); }));

        new Setting(containerEl).setName("Show Period/Week column").setDesc("Show or hide the Period/Week column on the left side of the calendar.").addToggle(toggle => toggle.setValue(this.plugin.settings.showPWColumn).onChange(async value => { this.plugin.settings.showPWColumn = value; await this.saveAndUpdate(); }));

        // --- Week Numbers Section ---
        new Setting(containerEl).setName("Week Numbers").setHeading();

        new Setting(containerEl)
            .setName("Show week number column")
            .setDesc("Display a column for week numbers on the left side of the calendar.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.showWeekNumbers)
                .onChange(async (value) => {
                    this.plugin.settings.showWeekNumbers = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Week number type")
            .setDesc("Choose which week numbering system to use.")
            .addDropdown(dropdown => dropdown
                .addOption('period', 'Period System Week')
                .addOption('calendar', 'Calendar Year Week (ISO)')
                .setValue(this.plugin.settings.weekNumberType)
                .onChange(async (value) => {
                    this.plugin.settings.weekNumberType = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Week number column label")
            .setDesc("The text to display at the top of the week number column.")
            .addText(text => text
                .setValue(this.plugin.settings.weekNumberColumnLabel)
                .onChange(async (value) => {
                    this.plugin.settings.weekNumberColumnLabel = value;
                    await this.saveAndUpdate();
                }));

        // --- Daily Notes Section ---
        new Setting(containerEl).setName("Daily Notes").setHeading();
        new Setting(containerEl).setName("Daily Notes folder").setDesc("Specify the folder where your daily notes are stored and created.").addText(text => { this.createPathSuggester(text.inputEl, (q) => this.app.vault.getAllLoadedFiles().filter(f => f instanceof TFolder && (!q || f.path.toLowerCase().includes(q))).map(f => f.path)); text.setValue(this.plugin.settings.dailyNotesFolder).onChange(async value => { this.plugin.settings.dailyNotesFolder = value; await this.saveAndUpdate(); }); });
        new Setting(containerEl).setName("Daily Note open behavior").addDropdown(dropdown => dropdown.addOption('new-tab', 'Open in a new tab').addOption('current-tab', 'Open in the current tab').setValue(this.plugin.settings.dailyNoteOpenAction).onChange(async (value) => { this.plugin.settings.dailyNoteOpenAction = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Daily note template").setDesc("Path to a template file to use when creating a new daily note.").addText(text => { this.createPathSuggester(text.inputEl, (q) => this.app.vault.getMarkdownFiles().filter(f => !q || f.path.toLowerCase().includes(q)).map(f => f.path)); text.setPlaceholder("Example: Templates/Daily.md").setValue(this.plugin.settings.dailyNoteTemplatePath).onChange(async (value) => { this.plugin.settings.dailyNoteTemplatePath = value; await this.saveAndUpdate(); }); });

        // --- Grid Highlighting Section ---
        new Setting(containerEl).setName("Grid Highlighting").setHeading();
        new Setting(containerEl).setName("Enable row highlight").setDesc("Highlights the entire week's row when hovering over the P/W label.").addToggle(toggle => toggle.setValue(this.plugin.settings.enableRowHighlight).onChange(async (value) => { this.plugin.settings.enableRowHighlight = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Enable column highlight").setDesc("Highlights the entire day's column when hovering over the day name (e.g., Mon).").addToggle(toggle => toggle.setValue(this.plugin.settings.enableColumnHighlight).onChange(async (value) => { this.plugin.settings.enableColumnHighlight = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Enable complex grid highlight").setDesc("When hovering a date, highlights all cells in its row and column up to that date.").addToggle(toggle => toggle.setValue(this.plugin.settings.enableRowToDateHighlight).onChange(async (value) => { this.plugin.settings.enableRowToDateHighlight = value; await this.saveAndUpdate(); }));

        new Setting(containerEl)
            .setName("Always highlight current week")
            .setDesc("Keeps the entire row for the current week permanently highlighted.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.highlightCurrentWeek)
                .onChange(async (value) => {
                    this.plugin.settings.highlightCurrentWeek = value;
                    await this.saveAndUpdate();
                }));


        this.createRgbaColorSetting(containerEl, "Grid Highlight Color (Light Mode)", "Color for row/column highlighting on hover in light mode.", "rowHighlightColorLight");
        this.createRgbaColorSetting(containerEl, "Grid Highlight Color (Dark Mode)", "Color for row/column highlighting on hover in dark mode.", "rowHighlightColorDark");

        new Setting(containerEl)
            .setName("Highlight weekends")
            .setDesc("Shade Saturday and Sunday columns with a subtle background color.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.highlightWeekends)
                .onChange(async (value) => {
                    this.plugin.settings.highlightWeekends = value;
                    await this.saveAndUpdate();
                }));

        this.createRgbaColorSetting(
            containerEl,
            "Weekend shade color (Light Mode)",
            "Background color for Saturday and Sunday columns in light theme.",
            "weekendShadeColorLight"
        );

        this.createRgbaColorSetting(
            containerEl,
            "Weekend shade color (Dark Mode)",
            "Background color for Saturday and Sunday columns in dark theme.",
            "weekendShadeColorDark"
        );

        new Setting(containerEl).setName("Integrate External Calendar Events").setHeading();

        new Setting(containerEl)
            .setName('External calendar URL (.ics)')
            .setDesc('Integrate an external .ics feed calendar URL (e.g., from Google Calendar using the \'Secret address in iCal format\' or \'Public address in iCal Format\') to indicate events as dots in the calendar grid and event details in the date popup box.')
            .addText(text => {
                text
                    .setPlaceholder('https://calendar.google.com/calendar/ical/.../basic.ics')
                    .setValue(this.plugin.settings.icsUrl)
                    .onChange(async (value) => {
                        this.plugin.settings.icsUrl = value;
                        await this.saveAndUpdate();
                    });
                text.inputEl.style.minWidth = "300px";
                text.inputEl.style.resize = "vertical";
            })
            .settingEl.style.alignItems = "flex-start";

        new Setting(containerEl)
            .setName('Auto-refresh Interval')
            .setDesc('How often the external calendar URL should be automatically refreshed in the background.')
            .addDropdown(dropdown => {
                dropdown
                    .addOption('15', '15 minutes')
                    .addOption('30', '30 minutes')
                    .addOption('60', '1 hour')
                    .addOption('180', '3 hours')
                    .addOption('360', '6 hours')
                    .addOption('720', '12 hours')
                    .setValue(this.plugin.settings.icsRefreshInterval.toString())
                    .onChange(async (value) => {
                        this.plugin.settings.icsRefreshInterval = parseInt(value, 10);
                        await this.plugin.saveSettings();

                        // Call a method on the main plugin to reset the timer
                        this.plugin.resetIcsRefreshInterval();
                    });
            });

        new Setting(containerEl)
            .setName('Calendar Event Indicator')
            .setDesc('Choose how to display external calendar events on the calendar grid. "Dot" shows a separate colored dot, while "Heatmap" and "Badge" will add the event count to the existing task indicators. If you select "Heatmap" or "Badge", ensure that the corresponding task indicator option is also enabled in the "Task Indicators" settings tab. Settings will be applied after closing the settings window.')
            .addDropdown(dropdown => dropdown
                .addOption('dot', 'Dot Only')
                .addOption('heatmap', 'Add to Heatmap')
                .addOption('badge', 'Add to Task Badge')
                .setValue(this.plugin.settings.calendarEventIndicatorStyle || 'dot')
                .onChange(async (value) => {
                    // Step 1: Save the new value
                    this.plugin.settings.calendarEventIndicatorStyle = value;
                    await this.plugin.saveSettings();
                }));

        new Setting(containerEl)
            .setName('Calendar Events Placeholder')
            .setDesc('The placeholder text to use in your daily note template. The plugin will replace this text with calendar events.')
            .addText(text => {
                text
                    .setPlaceholder('%%CALENDAR_EVENTS%%')
                    .setValue(this.plugin.settings.calendarEventsPlaceholder)
                    .onChange(async (value) => {
                        this.plugin.settings.calendarEventsPlaceholder = value.trim() || '%%CALENDAR_EVENTS%%';
                        await this.plugin.saveSettings();
                    });

                // Set the minimum width for the text input field
                text.inputEl.style.minWidth = "300px";
                text.inputEl.style.resize = "vertical";
            })
            .settingEl.style.alignItems = "flex-start";


        const calendarFormatSetting = new Setting(containerEl)
            .setName('Calendar Event Format')
            .addTextArea(text => {
                text
                    .setPlaceholder('- {{startTime}} - {{endTime}}: {{summary}}')
                    .setValue(this.plugin.settings.calendarEventsFormat)
                    .onChange(async (value) => {
                        this.plugin.settings.calendarEventsFormat = value || '- {{startTime}} - {{endTime}}: {{summary}}';
                        await this.plugin.saveSettings();
                    });

                // Apply styles to the textarea element
                text.inputEl.style.minWidth = "300px";
                text.inputEl.style.minHeight = "100px";
                text.inputEl.style.resize = "vertical";
            });

        const descEl = calendarFormatSetting.descEl;
        descEl.appendText('Customize the format for each calendar event. Use these placeholders:');

        const placeholderList = descEl.createEl('ul');

        const placeholders = [
            { code: '{{summary}}', text: 'The event title' },
            { code: '{{startTime}}', text: 'The event start time (or "All-day")' },
            { code: '{{endTime}}', text: 'The event end time' }
        ];

        placeholders.forEach(p => {
            const item = placeholderList.createEl('li');
            item.createEl('code', { text: p.code });
            item.appendText(` ${p.text}`);
        });

        // Align the entire setting row to the top
        calendarFormatSetting.settingEl.style.alignItems = "flex-start";

    }

    renderPopupSettings() {

        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Popup Controls" });

        // --- Popups Section ---
        new Setting(containerEl).setName("Popup hover delay").setDesc("How long to wait before showing the note list popup on hover. Default is 800.").addText(text => text.setValue(String(this.plugin.settings.otherNoteHoverDelay)).onChange(async (value) => { this.plugin.settings.otherNoteHoverDelay = Number(value) || 100; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Popup hide delay").setDesc("How long to wait before hiding the popup after the mouse leaves. Default is 50.").addText(text => text.setValue(String(this.plugin.settings.popupHideDelay)).onChange(async (value) => { this.plugin.settings.popupHideDelay = Number(value) || 100; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Popup gap").setDesc("The gap (in pixels) between a calendar day and its popup list. Can be negative. Default is -2.").addText(text => text.setValue(String(this.plugin.settings.popupGap)).onChange(async (value) => { this.plugin.settings.popupGap = Number(value) || -2; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Popup font size").setDesc("The font size for the note names inside the calendar popup. Default is 14px.").addText(text => text.setValue(this.plugin.settings.otherNotePopupFontSize).onChange(async value => { this.plugin.settings.otherNotePopupFontSize = value; await this.saveAndUpdate(); }));

    }

    renderDotsSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Dot Indicators" });
        // --- Dot Functionality Section ---
        new Setting(containerEl).setName("Calendar Functionality & Style").setHeading();
        new Setting(containerEl).setName("Show dot for created notes").setDesc("Show a dot on days where any note (that is not a daily note) was created.").addToggle(toggle => toggle.setValue(this.plugin.settings.showOtherNoteDot).onChange(async value => { this.plugin.settings.showOtherNoteDot = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Show dot for modified notes").setDesc("Show a dot on days where any note (that is not a daily note) was modified.").addToggle(toggle => toggle.setValue(this.plugin.settings.showModifiedFileDot).onChange(async value => { this.plugin.settings.showModifiedFileDot = value; await this.saveAndUpdate(); }));
        new Setting(containerEl)
            .setName("Show dot for new assets")
            .setDesc("Show a dot on days where an asset (image, PDF, etc.) was added to the vault.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.showAssetDot)
                .onChange(async (value) => {
                    this.plugin.settings.showAssetDot = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName('Show dot for external ics calendar events')
            .setDesc('Show a dot on days that have a calendard event from an external calendar source, e.g. Google Calendar.')
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.showIcsDot)
                .onChange(async (value) => {
                    this.plugin.settings.showIcsDot = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl).setName("Calendar dot size").setDesc("The size (in pixels) of the colored dots that appear under calendar days. Default is 4.").addText(text => text.setValue(String(this.plugin.settings.calendarDotSize)).onChange(async (value) => { this.plugin.settings.calendarDotSize = Number(value) || 4; await this.saveAndUpdate(); }));

        // --- Dot Colors Section ---
        new Setting(containerEl).setName("Dot Colors").setHeading();
        this.createRgbaColorSetting(containerEl, "Daily Note", "Used for daily notes.", "dailyNoteDotColor");
        this.createRgbaColorSetting(containerEl, "Created Note", "Uses the created file date for notes, not used for Daily / Weekly Notes.", "noteCreatedColor");
        this.createRgbaColorSetting(containerEl, "Modified Note", "Uses the modified file date for notes, not used for Daily / Weekly Notes.", "noteModifiedColor");
        this.createRgbaColorSetting(containerEl, "Asset Note", "Uses the created file date for newly added assets.", "assetDotColor");
        this.createRgbaColorSetting(containerEl, 'Calendar Event', 'Used for events from your iCal/.ics feed.', 'calendarEventDotColor');
        this.createIgnoredFolderList(containerEl, "Ignore folders for note dots", "Files in these folders will not create 'created' or 'modified' dots on the calendar grid or lists.", 'otherNoteIgnoreFolders');
        this.createIgnoredFolderList(containerEl, "Ignore folders for asset dots", "Assets in these folders will not create dots on the calendar and lists.", 'assetIgnoreFolders');

    }

    renderWeeklyNotesSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Weekly Notes Settings" });

        new Setting(containerEl)
            .setName("Enable Weekly Notes")
            .setDesc("Enable clicking on week numbers to open/create weekly notes and show the dot indicator.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.enableWeeklyNotes)
                .onChange(async (value) => {
                    this.plugin.settings.enableWeeklyNotes = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Weekly Note Folder")
            .setDesc("The folder where your weekly notes are stored. It will be created if it doesn't exist.")
            .addText(text => {
                this.createPathSuggester(text.inputEl, (q) => this.app.vault.getAllLoadedFiles().filter(f => f instanceof TFolder && (!q || f.path.toLowerCase().includes(q))).map(f => f.path));
                text.setValue(this.plugin.settings.weeklyNoteFolder)
                    .onChange(async value => {
                        this.plugin.settings.weeklyNoteFolder = value;
                        await this.saveAndUpdate();
                    });
            });

        // In the PeriodSettingsTab class, inside renderWeeklyNotesSettings()
        const weeklyFormatSetting = new Setting(containerEl).setName("Weekly Note Format");
        weeklyFormatSetting.descEl.innerHTML = `
            Set the filename format for weekly notes using dots, hyphens, or other separators.
            <br>The following placeholders will be replaced automatically:
            <br><code>YYYY</code> - The 4-digit year (e.g., 2025)
            <br><code>MM</code> - The 2-digit month (e.g., 08)
            <br><code>PN</code> - The Period Number with a 'P' prefix (e.g., P8)
            <br><code>PW</code> - The week number within the period with a 'W' prefix (e.g., W2)
            <br><code>WKP</code> - The week number (1-52) within your custom period year
            <br><code>WKC</code> - The standard ISO calendar week number (1-53)
            <br><br><b>Examples:</b>
            <br>Format: <code>YYYY-MM-PNPW</code> → Filename: <code>2025-08-P8W2.md</code>
            <br>Format: <code>YYYY-MM-WKP</code> → Filename: <code>2025-08-30.md</code>
            <br>Format: <code>YYYY-MM-WWKC</code> → Filename: <code>2025-08-W38.md</code>
        `;
        weeklyFormatSetting.addText(text => text
            .setValue(this.plugin.settings.weeklyNoteFormat)
            .onChange(async (value) => {
                this.plugin.settings.weeklyNoteFormat = value;
                await this.saveAndUpdate();
            }));

        new Setting(containerEl)
            .setName("Weekly note template")
            .setDesc("Path to a template file to use when creating a new weekly note.")
            .addText(text => {
                this.createPathSuggester(text.inputEl, (q) => this.app.vault.getMarkdownFiles().filter(f => !q || f.path.toLowerCase().includes(q)).map(f => f.path));
                text.setPlaceholder("Example: Templates/Weekly.md")
                    .setValue(this.plugin.settings.weeklyNoteTemplate)
                    .onChange(async (value) => {
                        this.plugin.settings.weeklyNoteTemplate = value;
                        await this.saveAndUpdate();
                    });
            });

        new Setting(containerEl).setName("Dot Indicator").setHeading();

        new Setting(containerEl)
            .setName("Show dot for weekly notes")
            .setDesc("Show a dot in the week number column if a note for that week exists.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.showWeeklyNoteDot)
                .onChange(async (value) => {
                    this.plugin.settings.showWeeklyNoteDot = value;
                    await this.saveAndUpdate();
                }));

        this.createRgbaColorSetting(containerEl, "Weekly Note Dot Color", "The color of the dot for existing weekly notes.", "weeklyNoteDotColor");
    }

    renderTaskIndicatorSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Calendar Task Indicators" });
        new Setting(containerEl)
            .setName("Task indicator style")
            .setDesc("Choose how to indicate days with tasks on the calendar grid.")
            .addDropdown(dropdown => dropdown
                .addOption('none', 'None')
                .addOption('badge', 'Number Badge')
                .addOption('heatmap', 'Cell Color Heatmap')
                .setValue(this.plugin.settings.taskIndicatorStyle)
                .onChange(async (value) => {
                    this.plugin.settings.taskIndicatorStyle = value;
                    await this.saveAndUpdate();
                    // We re-render the settings display to show/hide relevant options
                    this.refreshDisplay();
                }));

        new Setting(containerEl)
            .setName("Show dot for tasks")
            .setDesc("Show a single dot on days with tasks. This can be used with or instead of the heatmap/badge.")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.showTaskDot)
                .onChange(async (value) => {
                    this.plugin.settings.showTaskDot = value;
                    await this.saveAndUpdate();
                }));

        this.createRgbaColorSetting(containerEl, "Task Dot Color", "The color of the dot indicating a day has tasks.", "taskDotColor");

        // Only show the badge/heatmap settings if they are relevant
        if (this.plugin.settings.taskIndicatorStyle === 'badge') {
            new Setting(containerEl)
                .setName("Task badge font size")
                .setDesc("The font size for the number inside the task badge. Default is 11px.")
                .addText(text => text
                    .setValue(this.plugin.settings.taskBadgeFontSize)
                    .onChange(async (value) => {
                        this.plugin.settings.taskBadgeFontSize = value;
                        await this.saveAndUpdate();
                    }));

            this.createRgbaColorSetting(containerEl, "Task badge color", "The background color of the task count badge.", "taskBadgeColor");
            this.createRgbaColorSetting(containerEl, "Task badge font color", "The color of the number inside the task count badge.", "taskBadgeFontColor");
        }

        if (this.plugin.settings.taskIndicatorStyle === 'heatmap') {

            new Setting(containerEl)
                .setName("Heatmap content border width")
                .setDesc("Width of the border around the day heatmap content area (e.g., 1px, 2px, 3px). Creates visual separation inside cells. Default is 1px.")
                .addText(text => text
                    .setPlaceholder("1px")
                    .setValue(this.plugin.settings.contentBorderWidth)
                    .onChange(async (value) => {
                        this.plugin.settings.contentBorderWidth = value || "1px";
                        await this.saveAndUpdate();
                    }));

            containerEl.createEl('p', { text: 'Configure the start, middle, and end points of the dynamic color gradient. Colors will be blended smoothly between these points.', cls: 'setting-item-description' });

            new Setting(containerEl).setName("Gradient Midpoint").setDesc("The number of tasks that should have the exact 'Mid' color. Default is 5.").addText(text => text.setValue(String(this.plugin.settings.taskHeatmapMidpoint)).onChange(async (value) => { this.plugin.settings.taskHeatmapMidpoint = Number(value) || 5; await this.saveAndUpdate(); }));
            new Setting(containerEl).setName("Gradient Maxpoint").setDesc("The number of tasks that should have the exact 'End' color. Any day with more tasks will also use the end color. Default is 10.").addText(text => text.setValue(String(this.plugin.settings.taskHeatmapMaxpoint)).onChange(async (value) => { this.plugin.settings.taskHeatmapMaxpoint = Number(value) || 10; await this.saveAndUpdate(); }));

            this.createRgbaColorSetting(containerEl, "Heatmap: Start Color (1 Task)", "The color for days with 1 task.", "taskHeatmapStartColor");
            this.createRgbaColorSetting(containerEl, "Heatmap: Mid Color", "The color for days meeting the 'Midpoint' task count.", "taskHeatmapMidColor");
            this.createRgbaColorSetting(containerEl, "Heatmap: End Color", "The color for days meeting the 'Maxpoint' task count.", "taskHeatmapEndColor");
        }
    }

    renderDraggableTabs(container) {
        container.empty(); // Clear the container first

        // Define labels for your tabs
        const tabLabels = {
            scratch: 'ScratchPad',
            notes: 'Notes',
            tasks: 'Tasks',
            assets: 'Assets'
            // Add other tabs if you have them
        };

        let draggedItem = null; // To keep track of the item being dragged

        this.plugin.settings.tabOrder.forEach((key, index) => {
            const settingItem = container.createDiv('draggable-item');
            settingItem.draggable = true;
            settingItem.dataset.tabKey = key;

            // Add a drag handle icon
            const handle = settingItem.createDiv('drag-handle');
            setIcon(handle, 'grip-vertical');

            // Add the tab's name
            settingItem.createSpan({ text: tabLabels[key] || key });

            // --- Drag and Drop Event Listeners ---

            settingItem.addEventListener('dragstart', (e) => {
                draggedItem = settingItem;
                setTimeout(() => settingItem.addClass('dragging'), 0);
            });

            settingItem.addEventListener('dragend', (e) => {
                draggedItem?.removeClass('dragging');
                draggedItem = null;
            });

            settingItem.addEventListener('dragover', (e) => {
                e.preventDefault();
                const draggingItem = document.querySelector('.dragging');
                if (draggingItem && draggingItem !== settingItem) {
                    // Get the bounding box of the item we're dragging over
                    const rect = settingItem.getBoundingClientRect();
                    // Check if we are in the top or bottom half of the item
                    const isAfter = e.clientY > rect.top + rect.height / 2;

                    if (isAfter) {
                        // Insert the dragged item after the current one
                        settingItem.parentNode.insertBefore(draggingItem, settingItem.nextSibling);
                    } else {
                        // Insert the dragged item before the current one
                        settingItem.parentNode.insertBefore(draggingItem, settingItem);
                    }
                }
            });

            settingItem.addEventListener('drop', async (e) => {
                e.preventDefault();
                const newOrder = Array.from(container.children).map(child => child.dataset.tabKey);
                this.plugin.settings.tabOrder = newOrder;
                await this.saveAndUpdate();
                new Notice('Tab order saved!');
            });
        });
    }

    renderTabsSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "General Tab Settings" });

        new Setting(containerEl)
            .setName("Desktop tab display style")
            .setDesc("Choose how tab names are displayed in the desktop client.")
            .addDropdown(dropdown => dropdown
                .addOption('text', 'Text Only')
                .addOption('iconAndText', 'Icon and Text')
                .addOption('iconOnly', 'Icon Only')
                .setValue(this.plugin.settings.tabDisplayMode)
                .onChange(async (value) => {
                    this.plugin.settings.tabDisplayMode = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Mobile tab display style")
            .setDesc("Choose a different, often more compact, display style for smaller mobile / tablet screens.")
            .addDropdown(dropdown => dropdown
                .addOption('text', 'Text Only')
                .addOption('iconAndText', 'Icon and Text')
                .addOption('iconOnly', 'Icon Only')
                .setValue(this.plugin.settings.mobileTabDisplayMode)
                .onChange(async (value) => {
                    this.plugin.settings.mobileTabDisplayMode = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl).setName("Tab title font size").setDesc("Font size for the tab titles (ScratchPad, Notes, Tasks). Default is 15px.").addText(text => text.setValue(this.plugin.settings.tabTitleFontSize).onChange(async value => { this.plugin.settings.tabTitleFontSize = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Bold tab titles").setDesc("Toggles bold font weight for the tab titles.").addToggle(toggle => toggle.setValue(this.plugin.settings.tabTitleBold).onChange(async value => { this.plugin.settings.tabTitleBold = value; await this.saveAndUpdate(); }));

        this.createRgbaColorSetting(containerEl, "Active Tab Indicator", "Underline color for the active tab.", "selectedTabColor");

        containerEl.createDiv('setting-spacer');

        new Setting(containerEl)
            .setName('Tab Order')
            .setDesc('Drag and drop the tabs to set their display order.');

        // Create a container for our draggable list
        const tabOrderContainer = containerEl.createDiv('tab-order-container');
        this.renderDraggableTabs(tabOrderContainer);

        containerEl.createDiv('setting-spacer');

        new Setting(containerEl).setName("Tab Visibility").setHeading();

        new Setting(containerEl)
            .setName("Show Tasks tab")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.tabVisibility.tasks)
                .onChange(async (value) => {
                    this.plugin.settings.tabVisibility.tasks = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Show ScratchPad tab")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.tabVisibility.scratch)
                .onChange(async (value) => {
                    this.plugin.settings.tabVisibility.scratch = value;
                    await this.saveAndUpdate();
                }));
        new Setting(containerEl)
            .setName("Show Notes tab")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.tabVisibility.notes)
                .onChange(async (value) => {
                    this.plugin.settings.tabVisibility.notes = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Show Assets tab")
            .addToggle(toggle => toggle
                .setValue(this.plugin.settings.tabVisibility.assets)
                .onChange(async (value) => {
                    this.plugin.settings.tabVisibility.assets = value;
                    await this.saveAndUpdate();
                }));

        containerEl.createEl('h2', { text: 'Tab Icons' });
        const tabIconSettings = [
            { key: 'scratch', name: 'ScratchPad tab icon' },
            { key: 'notes', name: 'Notes tab icon' },
            { key: 'tasks', name: 'Tasks tab icon' },
            { key: 'pinned', name: 'Pinned View tab icon' },
            { key: 'assets', name: 'Assets View tab icon' }
        ];

        // Loop through each tab icon setting to create its input field and reset button
        tabIconSettings.forEach(s => {
            let textComponent; // Variable to hold the text component reference

            new Setting(containerEl)
                .setName(s.name)
                .setDesc('Enter any Lucide icon name.')
                .addText(text => {
                    textComponent = text; // Store the text component so the button can access it
                    text
                        .setValue(this.plugin.settings.tabIcons[s.key] || DEFAULT_SETTINGS.tabIcons[s.key])
                        .onChange(async (value) => {
                            this.plugin.settings.tabIcons[s.key] = value.trim();
                            await this.saveAndUpdate();
                        });
                })
                .addExtraButton(button => {
                    button
                        .setIcon('rotate-ccw') // A fitting icon for "reset"
                        .setTooltip('Reset to default')
                        .onClick(async () => {
                            // 1. Get the default value for this specific key
                            //const defaultValue = DEFAULT_SETTINGS.tabIcons[s.key];
                            const defaultValue = this.currentThemeDefaults.tabIcons[s.key];

                            // 2. Update the setting in the plugin's data
                            this.plugin.settings.tabIcons[s.key] = defaultValue;

                            // 3. Visually update the text box to show the default value
                            if (textComponent) {
                                textComponent.setValue(defaultValue);
                            }

                            // 4. Save the setting and update the plugin view
                            await this.saveAndUpdate();
                            new Notice(`'${s.name}' reset to default.`);
                        });
                });
        });

        new Setting(containerEl)
            .addButton(button => button
                .setButtonText('Reset All Tab Icons')
                .setTooltip('Resets all tab icons to their original values')
                .onClick(async () => {
                    // Confirm with the user before resetting all
                    if (confirm('Are you sure you want to reset all tab icons?')) {
                        this.plugin.settings.tabIcons = { ...DEFAULT_SETTINGS.tabIcons };
                        await this.saveAndUpdate();
                        new Notice('All tab icons have been reset.');

                        // Refresh the settings display to show the changes
                        this.refreshDisplay();
                    }
                }));

    }

    renderScratchpadSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "ScratchPad Tab Settings" });
        new Setting(containerEl).setName("Functionality").setHeading();
        new Setting(containerEl).setName("ScratchPad tab click action").setDesc("What to do when the ScratchPad tab is clicked while it's already active.").addDropdown(dropdown => dropdown.addOption('new-tab', 'Open in a new tab').addOption('current-tab', 'Open in the current tab').setValue(this.plugin.settings.scratchpadOpenAction).onChange(async (value) => { this.plugin.settings.scratchpadOpenAction = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("ScratchPad note path").setDesc("The full path to the note that the ScratchPad tab will read from and write to.").addText(text => { this.createPathSuggester(text.inputEl, (q) => this.app.vault.getMarkdownFiles().filter(f => !q || f.path.toLowerCase().includes(q)).map(f => f.path)); text.setValue(this.plugin.settings.fixedNoteFile).onChange(async value => { this.plugin.settings.fixedNoteFile = value; await this.saveAndUpdate(); }); });
        new Setting(containerEl).setName("Show preview/edit button").setDesc("Show the button to toggle between plain text editing and a rendered Markdown preview.").addToggle(toggle => toggle.setValue(this.plugin.settings.scratchpad?.showPreviewToggle ?? false).onChange(async (value) => { if (!this.plugin.settings.scratchpad) this.plugin.settings.scratchpad = {}; this.plugin.settings.scratchpad.showPreviewToggle = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Show '+ Task' button").setDesc("Show the button in the scratchpad area to quickly add a new task.").addToggle(toggle => toggle.setValue(this.plugin.settings.scratchpad?.showAddTaskButton ?? true).onChange(async (value) => { if (!this.plugin.settings.scratchpad) this.plugin.settings.scratchpad = {}; this.plugin.settings.scratchpad.showAddTaskButton = value; await this.saveAndUpdate(); }));

        const taskTitleSetting = new Setting(containerEl).setName("Task Creation Format");
        taskTitleSetting.descEl.innerHTML = `
                Use the following to insert as placeholders for the task creation date:
                <br><code>{today}</code>, <code>{tomorrow}</code>
                <br><code>{monday}</code>, <code>{tuesday}</code>, etc. for the next upcoming day.
                <br><code>{date}+7</code> or <code>{date}-3</code> for dates in the future or past.
                <br>
                <br>Use <code>|</code> to set the final cursor position.
            `;

        taskTitleSetting.addText(text => text
            .setPlaceholder("- [ ] ")
            .setValue(this.plugin.settings.scratchpad?.taskFormat || "- [ ] ")
            .onChange(async (value) => {
                if (!this.plugin.settings.scratchpad) {
                    this.plugin.settings.scratchpad = {};
                }
                this.plugin.settings.scratchpad.taskFormat = value;
                await this.saveAndUpdate();
            }));

        new Setting(containerEl).setName("Appearance").setHeading();
        new Setting(containerEl).setName("ScratchPad font size").setDesc("Font size for the text inside the ScratchPad editor. Default is 14px.").addText(text => text.setValue(this.plugin.settings.scratchFontSize).onChange(async value => { this.plugin.settings.scratchFontSize = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Bold ScratchPad text").setDesc("Toggles bold font weight for the text in the ScratchPad.").addToggle(toggle => toggle.setValue(this.plugin.settings.scratchBold).onChange(async value => { this.plugin.settings.scratchBold = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("ScratchPad font family").setDesc("Examples: monospace, Arial, 'Courier New'. Leave blank to use the editor default.").addText(text => text.setValue(this.plugin.settings.scratchFontFamily).onChange(async (value) => { this.plugin.settings.scratchFontFamily = value; await this.saveAndUpdate(); }));
        this.createRgbaColorSetting(containerEl, "Search highlight color", "The background color for the selected search result in the ScratchPad.", "scratchpadHighlightColor");

    }

    renderNotesSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Notes Tab Settings" });
        new Setting(containerEl).setName("Functionality").setHeading();
        new Setting(containerEl).setName("Notes tab open behavior").setDesc("Choose how to open notes when clicked from the notes list.").addDropdown(dropdown => dropdown.addOption('new-tab', 'Open in a new tab').addOption('current-tab', 'Open in the current tab').setValue(this.plugin.settings.notesOpenAction).onChange(async (value) => { this.plugin.settings.notesOpenAction = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Notes lookback days").setDesc("How many days back the Notes tab should look for created or modified notes. Default is 7.").addText(text => text.setValue(String(this.plugin.settings.notesLookbackDays)).onChange(async value => { this.plugin.settings.notesLookbackDays = Number(value) || 7; await this.saveAndUpdate(); }));

        new Setting(containerEl).setName("Appearance").setHeading();
        new Setting(containerEl).setName("Show note status dots").setDesc("Show a colored dot next to each note, indicating if it was recently created or modified.").addToggle(toggle => toggle.setValue(this.plugin.settings.showNoteStatusDots).onChange(async value => { this.plugin.settings.showNoteStatusDots = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Show note tooltips").setDesc("Show a detailed tooltip on hover, containing note path, dates, size, and tags.").addToggle(toggle => toggle.setValue(this.plugin.settings.showNoteTooltips).onChange(async value => { this.plugin.settings.showNoteTooltips = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Notes list font size").setDesc("Font size for note titles in the list. Default is 14px.").addText(text => text.setValue(this.plugin.settings.notesFontSize).onChange(async value => { this.plugin.settings.notesFontSize = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Bold note titles").setDesc("Toggles bold font weight for note titles in the list.").addToggle(toggle => toggle.setValue(this.plugin.settings.notesBold).onChange(async value => { this.plugin.settings.notesBold = value; await this.saveAndUpdate(); }));
        this.createRgbaColorSetting(containerEl, "Note/Task Hover Color", "Background color when hovering a note or task in a list.", "notesHoverColor");
        this.createIgnoredFolderList(containerEl, "Ignore folders in Notes tab", "Files in these folders will not appear in the 'Notes' list.", 'ignoreFolders');

    }

    renderPinnedNotesSettings() {
        const containerEl = this.contentEl; // All settings will be rendered into this element
        containerEl.createEl('h1', { text: 'Pinned Notes Settings' });
        new Setting(containerEl).setName('Functionality').setHeading();
        new Setting(containerEl)
            .setName("Pinned notes tag")
            .setDesc("The tag to use for pinned notes, enter in the text box without the '#'. For notes to appear in the pinned tab, (accessed with another click on the notes tab icon once it has focus), and if you set 'pin' as the tag name, then in your notes add #pin in the body or properties tag section. Default is 'pin'.")
            .addText(text => text
                .setValue(this.plugin.settings.pinTag)
                .onChange(async (value) => {
                    this.plugin.settings.pinTag = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl).setName('Sort Order').setHeading();
        new Setting(containerEl)
            .setName('Default sort order')
            .setDesc("Choose the default sort order for pinned notes when the plugin is loaded. To change the order click on the PINNED NOTES title in the main view.")
            .addDropdown(dropdown => dropdown
                .addOption('a-z', 'A-Z (Default)')
                .addOption('z-a', 'Z-A')
                .addOption('custom', 'Custom Order')
                .setValue(this.plugin.settings.pinnedNotesSortOrder)
                .onChange(async (value) => {
                    this.plugin.settings.pinnedNotesSortOrder = value;
                    await this.plugin.saveSettings();
                }));

        const isMac = Platform.isMacOS;
        const modifierKey = isMac ? 'Option (⌥)' : 'Ctrl';

        new Setting(containerEl)
            .setName('How to change the sort order in the main view')
            .setDesc(`Click the "PINNED NOTES" header in the main view to cycle between A-Z, Z-A, and Custom sort orders.\n\nWhen in Custom order, hold ${modifierKey} and drag notes to reorder them.`);

        new Setting(containerEl)
            .setName('Set Custom Order')
            .setDesc('Drag and drop the notes below to set your preferred manual order.');

        const draggableContainer = containerEl.createDiv('pinned-notes-order-container');
        this.renderDraggablePinnedNotes(draggableContainer);
    }

    renderAssetsSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Assets Tab Settings" });
        new Setting(containerEl)
            .setName("Asset open behavior")
            .setDesc("Choose how to open assets when clicked from the Assets list.")
            .addDropdown(dropdown => dropdown
                .addOption('new-tab', 'Open in a new tab')
                .addOption('current-tab', 'Open in the current tab')
                .setValue(this.plugin.settings.assetsOpenAction)
                .onChange(async (value) => {
                    this.plugin.settings.assetsOpenAction = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName('Default assets view')
            .setDesc('Choose the default layout for the assets tab.')
            .addDropdown(dropdown => dropdown
                .addOption('list', 'List')
                .addOption('grid', 'Grid')
                .setValue(this.plugin.settings.assetsDefaultView)
                .onChange(async (value) => {
                    this.plugin.settings.assetsDefaultView = value;
                    await this.plugin.saveSettings();
                }));

        new Setting(containerEl)
            .setName("Assets lookback days")
            .setDesc("How many days back the Assets tab should look for created or modified notes. Default is 7.")
            .addText(text => text
                .setValue(String(this.plugin.settings.assetsLookbackDays))
                .onChange(async value => {
                    this.plugin.settings.assetsLookbackDays = Number(value) || 7;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl)
            .setName("Hidden asset file types")
            .setDesc("A comma-separated list of file extensions to hide from the Assets tab and calendar dots (e.g., jpg,pdf,zip). Default is base,canvas.")
            .addText(text => text
                .setPlaceholder("e.g., jpg,pdf,zip")
                .setValue(this.plugin.settings.hiddenAssetTypes)
                .onChange(async (value) => {
                    this.plugin.settings.hiddenAssetTypes = value;
                    await this.saveAndUpdate();
                }));

        new Setting(containerEl).setName("Show indicator for unused assets").setDesc("An icon will appear next to assets that are not linked or embedded in any note, allowing for easier detection to delete.").addToggle(toggle => toggle.setValue(this.plugin.settings.showUnusedAssetsIndicator).onChange(async (value) => { this.plugin.settings.showUnusedAssetsIndicator = value; await this.saveAndUpdate(); }));

    }

    renderTasksSettings() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Tasks Tab Settings" });
        new Setting(containerEl).setName("Display & Sorting").setHeading();
        new Setting(containerEl).setName("Task group heading font size").setDesc("The font size for the date/tag group headings (e.g., 'Overdue', 'Today'). Default is 13px.").addText(text => text.setValue(this.plugin.settings.taskHeadingFontSize).onChange(async value => { this.plugin.settings.taskHeadingFontSize = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Task text font size").setDesc("The font size for the individual task items in the list. Default is 14px.").addText(text => text.setValue(this.plugin.settings.taskTextFontSize).onChange(async value => { this.plugin.settings.taskTextFontSize = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Truncate long task text").setDesc("If enabled, long tasks will be shortened with '...'. If disabled, they will wrap to multiple lines.").addToggle(toggle => toggle.setValue(this.plugin.settings.taskTextTruncate).onChange(async (value) => { this.plugin.settings.taskTextTruncate = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Show completed tasks for Today").setDesc("If enabled, tasks that you marked as complete today will appear in the lists (regardless of their due date).").addToggle(toggle => toggle.setValue(this.plugin.settings.showCompletedTasksToday).onChange(async (value) => { this.plugin.settings.showCompletedTasksToday = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Task sort order").setDesc("The default order for tasks within each group.").addDropdown(dropdown => dropdown.addOption('dueDate', 'By Due Date (earliest first)').addOption('a-z', 'A-Z').addOption('z-a', 'Z-A').setValue(this.plugin.settings.taskSortOrder).onChange(async (value) => { this.plugin.settings.taskSortOrder = value; await this.saveAndUpdate(); }));
        new Setting(containerEl).setName("Group tasks by").setDesc("Choose how to group tasks in the view. Second-clicking the Tasks tab will also toggle this.").addDropdown(dropdown => dropdown.addOption('date', 'Date (Overdue, Today, etc.)').addOption('tag', 'Tag').setValue(this.plugin.settings.taskGroupBy).onChange(async (value) => { this.plugin.settings.taskGroupBy = value; await this.saveAndUpdate(); this.refreshDisplay(); }));

        if (this.plugin.settings.taskGroupBy === 'date') {
            new Setting(containerEl).setName("Date Groups to Show").setHeading();
            const dateGroups = [{ key: 'overdue', name: 'Overdue' }, { key: 'today', name: 'Today' }, { key: 'tomorrow', name: 'Tomorrow' }, { key: 'next7days', name: 'Next 7 Days' }, { key: 'future', name: 'Future' },];
            dateGroups.forEach(g => { new Setting(containerEl).setName(g.name).addToggle(t => t.setValue(this.plugin.settings.taskDateGroupsToShow.includes(g.key)).onChange(async v => { const groups = this.plugin.settings.taskDateGroupsToShow; if (v && !groups.includes(g.key)) groups.push(g.key); else if (!v) this.plugin.settings.taskDateGroupsToShow = groups.filter(i => i !== g.key); await this.saveAndUpdate(); })); });
        }

        new Setting(containerEl).setName("Content & Appearance").setHeading();
        this.createIgnoredFolderList(containerEl, "Exclude folders from Task search", "Tasks in these folders will not appear in the 'Tasks' list.", 'taskIgnoreFolders');

        containerEl.createEl('h2', { text: 'Task Group Icons' });
        containerEl.createEl('p', { text: 'Customize the icon displayed next to each task group header.', cls: 'setting-item-description' });

        const taskGroupIconSettings = [
            { key: 'overdue', name: 'Overdue icon' },
            { key: 'today', name: 'Today icon' },
            { key: 'tomorrow', name: 'Tomorrow icon' },
            { key: 'next7days', name: 'Next 7 Days icon' },
            { key: 'future', name: 'Future icon' },
            { key: 'noDate', name: 'No Due Date icon' },
            { key: 'tag', name: 'Tag Group icon' }
        ];

        // Loop through the settings to create each input field and its reset button
        taskGroupIconSettings.forEach(s => {
            let textComponent; // This will hold a reference to the text input

            new Setting(containerEl)
                .setName(s.name)
                .setDesc('Enter any Lucide icon name.')
                .addText(text => {
                    textComponent = text; // Store the reference
                    text
                        .setValue(this.plugin.settings.taskGroupIcons[s.key] || DEFAULT_SETTINGS.taskGroupIcons[s.key])
                        .onChange(async (value) => {
                            this.plugin.settings.taskGroupIcons[s.key] = value.trim();
                            await this.saveAndUpdate();
                        });
                })
                .addExtraButton(button => {
                    button
                        .setIcon('rotate-ccw')
                        .setTooltip('Reset to default')
                        .onClick(async () => {
                            const defaultValue = this.currentThemeDefaults.tabIcons[s.key];
                            this.plugin.settings.taskGroupIcons[s.key] = defaultValue;
                            if (textComponent) {
                                textComponent.setValue(defaultValue);
                            }

                            await this.saveAndUpdate();
                            new Notice(`'${s.name}' reset to default.`);
                        });
                });
        });

        new Setting(containerEl)
            .addButton(button => button
                .setButtonText('Reset All Task Group Icons')
                .setTooltip('Resets all task group icons to their original values')
                .onClick(async () => {
                    if (confirm('Are you sure you want to reset all task group icons?')) {
                        this.plugin.settings.taskGroupIcons = { ...DEFAULT_SETTINGS.taskGroupIcons };
                        await this.saveAndUpdate();
                        new Notice('All task group icons have been reset.');
                        this.refreshDisplay();
                    }
                }));

        new Setting(containerEl).setName("Task Group Backgrounds").setHeading();
        this.createRgbaColorSetting(containerEl, "Overdue", "Background color for the 'Overdue' task group.", "taskGroupColorOverdue");
        this.createRgbaColorSetting(containerEl, "Today", "Background color for the 'Today' task group.", "taskGroupColorToday");
        this.createRgbaColorSetting(containerEl, "Tomorrow", "Background color for the 'Tomorrow' task group.", "taskGroupColorTomorrow");
        this.createRgbaColorSetting(containerEl, "Next 7 Days", "Background color for the 'Next 7 Days' task group.", "taskGroupColorNext7Days");
        this.createRgbaColorSetting(containerEl, "Future", "Background color for 'Future' task group.", "taskGroupColorFuture");
        this.createRgbaColorSetting(containerEl, "No Due Date", "Background color for the 'No Due Date' task group.", "taskGroupColorNoDate");
        this.createRgbaColorSetting(containerEl, "Tag", "Background color for task groups when grouped by tag.", "taskGroupColorTag");
    }


    async renderThemesSettings() {
        const containerEl = this.contentEl;
        containerEl.empty(); // Clear previous content to prevent duplicating event listeners
        containerEl.createEl('h2', { text: 'Theme Management' });

        // Display an indicator if a theme is currently applied
        if (this.plugin.settings.appliedTheme) {
            new Setting(containerEl)
                .setName('Currently Applied Theme: ' + this.plugin.settings.appliedTheme)
                .setDesc(`The appearance settings from the "${this.plugin.settings.appliedTheme}" theme are currently active.`)
                .addButton(button =>
                    button
                        .setButtonText('Clear')
                        .setTooltip('Clear this indicator. This does not change your settings.')
                        .onClick(async () => {
                            this.plugin.settings.appliedTheme = '';
                            await this.plugin.saveSettings();
                            this.display(); // Re-render the entire settings tab
                            new Notice('Applied theme indicator cleared.');
                        })
                )
                .settingEl.addClass('applied-theme-indicator');
        }

        // Find theme files in the plugin's "themes" directory
        const themesFolderPath = this.plugin.manifest.dir + '/Themes';
        const themeFiles = await this.getThemeFiles(themesFolderPath);

        if (!themeFiles) {
            containerEl.createEl('p', { text: 'The Themes folder could not be found in the plugin directory.' });
            return;
        }

        if (themeFiles.length === 0) {
            containerEl.createEl('p', { text: 'No theme files (.json) were found in the Themes folder.' });
            return;
        }

        // Create the main two-column layout
        const mainContainer = containerEl.createDiv({ cls: 'theme-settings-container' });
        const listContainer = mainContainer.createDiv({ cls: 'theme-list-container' });
        this.previewContainer = mainContainer.createDiv({ cls: 'theme-preview-wrapper' });

        listContainer.createEl('h3', { text: 'Available Themes' });

        // Sort the theme files alphabetically before rendering.
        themeFiles.sort((a, b) => a.localeCompare(b));

        // Create a list item for each theme file
        themeFiles.forEach(file => {
            const themeName = file.split('/').pop().replace('.json', '');
            const itemEl = listContainer.createDiv({ text: themeName, cls: 'theme-list-item' });

            if (themeName === this.plugin.settings.appliedTheme) {
                itemEl.classList.add('is-active');
            }

            // Add a click listener to each theme item to render its preview
            itemEl.addEventListener('click', async () => {
                Array.from(listContainer.querySelectorAll('.theme-list-item')).forEach(child => child.classList.remove('is-active'));
                itemEl.classList.add('is-active');
                this.selectedThemeFile = { name: file };

                try {
                    const fileContent = await this.app.vault.adapter.read(file);
                    const themeSettings = JSON.parse(fileContent);
                    this.renderThemePreview(themeSettings, themeName);
                } catch (e) {
                    new Notice(`Error reading theme file: ${themeName}`);
                    console.error('Theme file read error:', e);
                }
            });
        });

        const themeItems = Array.from(listContainer.querySelectorAll('.theme-list-item'));
        let focusedIndex = -1;

        if (themeItems.length > 0) {
            // Determine the initial item to focus on (the active theme, or the first one)
            const initiallyActiveIndex = themeItems.findIndex(item => item.classList.contains('is-active'));
            focusedIndex = (initiallyActiveIndex !== -1) ? initiallyActiveIndex : 0;

            // Set tabindex to manage focus: '0' for the focusable item, '-1' for the rest
            themeItems.forEach((item, index) => {
                item.setAttribute('tabindex', index === focusedIndex ? '0' : '-1');
            });

            themeItems[focusedIndex].focus();

            // Load the initial preview if the pane is empty
            if (!this.previewContainer.hasChildNodes()) {
                themeItems[focusedIndex].click();
            }

            // --- GLOBAL KEYBOARD NAVIGATION ---
            // Attach a single, persistent listener to the settings tab's root container.
            // This captures arrow keys regardless of what specific element has focus.
            this.containerEl.onkeydown = (e) => {
                // Ignore key presses if the user is typing in an input field
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                    return;
                }

                const key = e.key;
                if (!['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(key)) {
                    return;
                }

                e.preventDefault();

                // Handle Up/Down for theme selection
                if (key === 'ArrowUp' || key === 'ArrowDown') {
                    themeItems[focusedIndex].setAttribute('tabindex', '-1');
                    if (key === 'ArrowDown') {
                        focusedIndex = (focusedIndex + 1) % themeItems.length;
                    } else {
                        focusedIndex = (focusedIndex - 1 + themeItems.length) % themeItems.length;
                    }
                    const newItem = themeItems[focusedIndex];
                    newItem.setAttribute('tabindex', '0');
                    newItem.focus();
                    newItem.click(); // Click to load preview instantly

                    // Handle Left/Right for light/dark mode toggle
                } else if (key === 'ArrowLeft' || key === 'ArrowRight') {
                    // Find buttons by their data-mode attribute inside the preview container
                    const lightButton = this.previewContainer.querySelector('button[data-mode="light"]');
                    const darkButton = this.previewContainer.querySelector('button[data-mode="dark"]');

                    if (lightButton && darkButton) {
                        // Click the button that is NOT currently active
                        const targetButton = lightButton.classList.contains('is-active') ? darkButton : lightButton;
                        targetButton.click();
                    }
                }
            };
        } else {
            this.renderInitialPreview();
        }
    }

    async getThemeFiles(themesFolderPath) {
        try {
            if (!await this.app.vault.adapter.exists(themesFolderPath)) return null;
            const list = await this.app.vault.adapter.list(themesFolderPath);
            return list.files.filter(file => file.endsWith('.json'));
        } catch (e) {
            console.error("Error accessing themes folder:", e);
            return null;
        }
    }

    renderInitialPreview() {
        if (!this.previewContainer) return;
        this.previewContainer.empty();
        this.previewContainer.createEl('h3', { text: 'Theme Preview' });
        const placeholder = this.previewContainer.createDiv({ cls: 'theme-preview-placeholder' });
        placeholder.setText('Select a theme to see a preview and apply it.');
    }

    renderThemePreview(settings, fileName) {
        if (!this.previewContainer) return;
        this.previewContainer.empty();

        this.previewContainer.createEl('h3', { text: 'Live Theme Preview' });

        const tabContainer = this.previewContainer.createDiv({ cls: 'theme-preview-tabs' });
        const lightTabBtn = tabContainer.createEl('button', { text: 'Light Mode' });
        lightTabBtn.setAttribute('data-mode', 'light');

        const darkTabBtn = tabContainer.createEl('button', { text: 'Dark Mode' });
        darkTabBtn.setAttribute('data-mode', 'dark');

        const previewContent = this.previewContainer.createDiv();

        const render = (mode) => {
            this.activePreviewMode = mode;
            previewContent.empty();
            previewContent.className = '';
            previewContent.addClass('theme-preview-pane');

            if (mode === 'light') {
                previewContent.style.backgroundColor = settings.backgroundColorLight || '#ffffff';
                previewContent.style.color = settings.textColorLight || '#000000';
            } else {
                previewContent.style.backgroundColor = settings.backgroundColorDark || '#1e1e1e';
                previewContent.style.color = settings.textColorDark || '#dddddd';
            }

            this.createComprehensivePreview(previewContent, settings, mode);
        };

        lightTabBtn.addEventListener('click', () => {
            darkTabBtn.classList.remove('is-active');
            lightTabBtn.classList.add('is-active');
            render('light');
        });

        darkTabBtn.addEventListener('click', () => {
            lightTabBtn.classList.remove('is-active');
            darkTabBtn.classList.add('is-active');
            render('dark');
        });

        // Initialize the preview mode based on app appearance ONLY if it hasn't been set yet.
        if (!this.activePreviewMode) {
            this.activePreviewMode = document.body.classList.contains('theme-dark') ? 'dark' : 'light';
        }

        // Trigger the click on the correct button based on the *stored* preview mode.
        if (this.activePreviewMode === 'dark') {
            darkTabBtn.click();
        } else {
            lightTabBtn.click();
        }

        const initialMode = this.activePreviewMode || (document.body.classList.contains('theme-dark') ? 'dark' : 'light');
        if (initialMode === 'light') {
            lightTabBtn.click();
        } else {
            darkTabBtn.click();
        }

        new Setting(this.previewContainer)
            .setName("Apply this theme")
            .setDesc("This will overwrite your current appearance settings with the previewed values.")
            .addButton(button => {
                button
                    .setButtonText("Apply")
                    .setCta() // Makes the button more prominent, indicating a primary action
                    .onClick(async () => {
                        // 1. Apply the settings from the previewed theme
                        for (const key of Object.keys(settings)) {
                            if (this.plugin.settings.hasOwnProperty(key)) {
                                this.plugin.settings[key] = settings[key];
                            }
                        }

                        // 2. Save the name of the applied theme file
                        if (fileName) {
                            this.plugin.settings.appliedTheme = fileName.replace(/\.json$/, '');
                            //console.log("Applied theme settings:", fileName, settings);
                        }

                        // 3. Save the new settings to disk and update the live styles
                        await this.plugin.saveSettings();
                        this.plugin.updateStyles();

                        // 4. Force the entire settings tab to re-render from scratch
                        this.refreshDisplay();

                        new Notice('Theme applied successfully!');

                        // 5. Force any open calendar views to update with the new theme
                        const leaf = this.app.workspace.getLeavesOfType('calendar-period-week')[0];
                        if (leaf && leaf.view instanceof PeriodMonthView) {
                            await leaf.view.render();
                        }
                    });
            });

    }

    getPreviewColor(themeSettings, key) {
        // 1. Prioritize the color from the loaded theme file
        if (themeSettings && themeSettings[key] !== undefined) {
            return themeSettings[key];
        }
        // 2. Fallback to the live plugin settings if the key is missing in the theme
        if (this.plugin.settings && this.plugin.settings[key] !== undefined) {
            return this.plugin.settings[key];
        }
        // 3. Provide a safe default if the setting is defined nowhere
        // This is a fallback for older themes that might not have all keys
        if (key.toLowerCase().includes('light')) {
            return 'rgba(0, 0, 0, 1)'; // Default to black for light mode
        }
        return 'rgba(255, 255, 255, 1)'; // Default to white for dark mode
    }


    createComprehensivePreview(container, settings, mode) {
        const isLight = mode === 'light';
        container.addClass(`theme-preview-pane-${mode}`);

        // --- Calendar Grid Preview ---
        const calendarGridHeader = container.createEl('div', { cls: 'preview-section-header' });

        // --- Month and Year Title Preview ---
        const monthTitleContainer = calendarGridHeader.createEl('h3');
        monthTitleContainer.style.fontSize = this.getPreviewColor(settings, 'mainMonthYearTitleFontSize', '22px');

        // Create a span for the MONTH part of the title
        const monthSpan = monthTitleContainer.createSpan({
            text: moment(new Date()).format('MMMM')
        });
        monthSpan.style.color = this.getPreviewColor(settings, isLight ? 'monthColorLight' : 'monthColorDark');
        monthSpan.style.fontWeight = this.getPreviewColor(settings, 'mainMonthTitleBold', false) ? 'bold' : 'normal';

        // Create a span for the YEAR part of the title
        const yearSpan = monthTitleContainer.createSpan({
            text: ` ${moment(new Date()).format('YYYY')}` // Note the leading space
        });
        yearSpan.style.color = this.getPreviewColor(settings, isLight ? 'yearColorLight' : 'yearColorDark');
        yearSpan.style.fontWeight = this.getPreviewColor(settings, 'mainYearTitleBold', false) ? 'bold' : 'normal';

        // --- Calendar Grid Preview ---
        const calendarWrapper = container.createDiv({ cls: `preview-section-wrapper ${mode}` });
        calendarWrapper.style.backgroundColor = isLight ? (settings.backgroundColorLight || '#f5f5f5') : (settings.backgroundColorDark || '#2a2a2a');

        const table = calendarWrapper.createEl('table', { cls: 'preview-calendar-grid' });

        // --- Table Header (thead) ---
        const thead = table.createEl('thead');
        const headerRow = thead.createEl('tr');
        const headers = ['CW', 'SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT'];

        headers.forEach(headerText => {
            const th = headerRow.createEl('th', { text: headerText });

            // Always use the standard day header font color for the CW header text
            if (headerText === 'CW') {
                th.style.color = this.getPreviewColor(settings, isLight ? 'dayHeaderFontColorLight' : 'dayHeaderFontColorDark');
            }
            // For the SAT header, check if it should be highlighted
            else if (headerText === 'SAT' && this.getPreviewColor(settings, 'highlightTodayLabels', true) && this.getPreviewColor(settings, 'highlightTodayDayHeader', true)) {
                th.style.color = this.getPreviewColor(settings, isLight ? 'todayCircleColorLight' : 'todayCircleColorDark');
            }
            // For all other headers, use the standard day color
            else {
                th.style.color = this.getPreviewColor(settings, isLight ? 'dayHeaderFontColorLight' : 'dayHeaderFontColorDark');
            }
        });

        // --- Table Body (tbody) ---
        const tbody = table.createEl('tbody');
        const bodyRow = tbody.createEl('tr');

        // --- 1. Define All Dot Colors ---
        const dayDotColors = [
            this.getPreviewColor(settings, 'dailyNoteDotColor', '#4a90e2'),
            this.getPreviewColor(settings, 'noteCreatedColor', '#4caf50'),
            this.getPreviewColor(settings, 'noteModifiedColor', '#ff9800'),
            this.getPreviewColor(settings, 'assetDotColor', '#ff0000'),
            this.getPreviewColor(settings, 'calendarEventDotColor', '#c864c8'),
            this.getPreviewColor(settings, 'taskDotColor', '#80128D')
        ];

        // --- 2. Create the 'CW' cell (This was the missing part) ---
        const cwCell = bodyRow.createEl('td');
        const cwContent = cwCell.createDiv({ cls: 'preview-day-content' });
        const cwNumber = cwContent.createDiv({ text: '42', cls: 'preview-day-number' });

        // Style the week number based on theme settings
        if (this.getPreviewColor(settings, 'highlightTodayLabels', true) && this.getPreviewColor(settings, 'highlightTodayPWLabel', true)) {
            cwNumber.style.color = this.getPreviewColor(settings, isLight ? 'todayCircleColorLight' : 'todayCircleColorDark');
        } else {
            cwNumber.style.color = this.getPreviewColor(settings, isLight ? 'weekNumberFontColorLight' : 'weekNumberFontColorDark');
        }

        // Add the exclusive weekly note dot to the CW column
        if (this.getPreviewColor(settings, 'showWeeklyNoteDot', true)) {
            const weeklyDotsContainer = cwContent.createDiv({ cls: 'preview-dots-container' });
            const weeklyNoteDot = weeklyDotsContainer.createDiv({ cls: 'preview-dot' });
            weeklyNoteDot.style.backgroundColor = this.getPreviewColor(settings, 'weeklyNoteDotColor', '#a073f0');
        }

        // --- 3. Create the Day Cells (Sunday to Saturday) ---
        const dotDistribution = new Map([
            [5, [dayDotColors[1]]],
            [6, dayDotColors],
            [7, [dayDotColors[2]]],
            [8, [dayDotColors[0], dayDotColors[1]]],
            [9, [dayDotColors[1], dayDotColors[2], dayDotColors[3]]],
            [10, [dayDotColors[3], dayDotColors[4]]],
            [11, [dayDotColors[1], dayDotColors[2]]]
        ]);

        for (let i = 5; i <= 11; i++) {
            const td = bodyRow.createEl('td');
            const dayContent = td.createDiv({ cls: 'preview-day-content' });
            const dayNumber = dayContent.createDiv({ text: i.toString(), cls: 'preview-day-number' });

            const dotsToShow = dotDistribution.get(i);
            if (dotsToShow && dotsToShow.length > 0) {
                const dotsContainer = dayContent.createDiv({ cls: 'preview-dots-container' });
                dotsToShow.forEach(color => {
                    const dot = dotsContainer.createDiv({ cls: 'preview-dot' });
                    dot.style.backgroundColor = color;
                });
            }

            if (i === 11) {
                dayNumber.addClass('today');
                dayNumber.style.backgroundColor = this.getPreviewColor(settings, isLight ? 'todayCircleColorLight' : 'todayCircleColorDark');
                dayNumber.style.color = this.getPreviewColor(settings, isLight ? 'todayCircleTextColorLight' : 'todayCircleTextColorDark', '#000000');
            } else {
                dayNumber.style.color = this.getPreviewColor(settings, isLight ? 'dayCellFontColorLight' : 'dayCellFontColorDark');
            }
        }

        const tasksWrapper = container.createDiv({ cls: `preview-section-wrapper ${mode}` });
        tasksWrapper.style.backgroundColor = isLight ? (settings.backgroundColorLight || '#f5f5f5') : (settings.backgroundColorDark || '#2a2a2a');

        const taskGroups = [
            { name: "Overdue", colorKey: "taskGroupColorOverdue", count: 2, icon: "alarm-clock-off" },
            { name: "Today", colorKey: "taskGroupColorToday", count: 3, icon: "target" },
            { name: "Tomorrow", colorKey: "taskGroupColorTomorrow", count: 1, icon: "calendar-days" }, // "Tomorrow" maps to "Next 7 Days" icon
            { name: "Future", colorKey: "taskGroupColorFuture", count: 5, icon: "telescope" },
            { name: "No Date", colorKey: "taskGroupColorNoDate", count: 4, icon: "help-circle" }
        ];


        taskGroups.forEach(group => {
            const taskGroupEl = tasksWrapper.createDiv({ cls: 'preview-task-group' });
            taskGroupEl.style.backgroundColor = this.getPreviewColor(settings, group.colorKey);

            // This wrapper keeps the icon and title together on the left
            const contentWrapper = taskGroupEl.createDiv({ cls: 'preview-task-content-wrapper' });

            // Add the group's main icon (e.g., target, telescope)
            const iconEl = contentWrapper.createDiv({ cls: 'preview-task-icon' });
            setIcon(iconEl, group.icon);

            // The text now becomes "Overdue (2)", "Today (3)", etc.
            contentWrapper.createSpan({
                text: `${group.name} (${group.count})`,
                cls: 'preview-task-title'
            });

            const collapseIconEl = taskGroupEl.createDiv({ cls: 'preview-collapse-icon' });
            setIcon(collapseIconEl, 'chevron-up'); 

            // Set the text color for all elements inside the group
            const textColor = this.getPreviewColor(settings, isLight ? 'taskGroupTextColorLight' : 'taskGroupTextColorDark');
            contentWrapper.style.color = textColor;
            collapseIconEl.style.color = textColor;
        });


        // --- 3. Create the Dot Color Key ---
        const keyContainer = container.createDiv({ cls: 'preview-dot-key-container' });
        keyContainer.createEl('h5', { text: 'Calendar Grid Dot Color Key' });

        // Create a mapping of the dot colors to their names
        const dotKeyMap = new Map([
            [this.getPreviewColor(settings, 'weeklyNoteDotColor', '#a073f0'), 'Weekly Note'],
            [this.getPreviewColor(settings, 'dailyNoteDotColor', '#4a90e2'), 'Daily Note'],
            [this.getPreviewColor(settings, 'noteCreatedColor', '#4caf50'), 'Created Note'],
            [this.getPreviewColor(settings, 'noteModifiedColor', '#ff9800'), 'Modified Note'],
            [this.getPreviewColor(settings, 'assetDotColor', '#ff0000'), 'Asset'],
            [this.getPreviewColor(settings, 'calendarEventDotColor', '#c864c8'), 'Event'],
            [this.getPreviewColor(settings, 'taskDotColor', '#80128D'), 'Task']
        ]);

        // Loop through the map and create a key item for each dot type
        for (const [color, name] of dotKeyMap.entries()) {
            const keyItem = keyContainer.createDiv({ cls: 'preview-dot-key-item' });
            const keyDot = keyItem.createDiv({ cls: 'preview-dot-key-swatch' });
            keyDot.style.backgroundColor = color;
            keyItem.createSpan({ text: name });
        }
    }

    renderImportExportTab() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "Import & Export Settings" });

        // --- EXPORT ---
        new Setting(containerEl)
            .setName("Export Settings")
            .setDesc("Save your plugin settings to a JSON file. Two options: all plugin settings or theme settins only. This is useful for backing up all your settings or sharing your theme configuration with others.")
            .addButton(button => {
                button
                    .setButtonText("Export All Settings")
                    .setIcon("save")
                    .setTooltip("Save all plugin settings to a file")
                    .onClick(() => this.handleExport('all'));

                button.buttonEl.style.cursor = 'pointer';
            })
            .addButton(button => {
                button
                    .setButtonText("Export Theme Only")
                    .setIcon("palette")
                    .setTooltip("Save only colors, fonts, and sizes to a theme file")
                    .onClick(() => this.handleExport('theme'));

                button.buttonEl.style.cursor = 'pointer';
            });

        // --- IMPORT ---
        new Setting(containerEl)
            .setName("Import Settings")
            .setDesc("Load settings from a JSON file. This will overwrite your current settings after confirmation.")
            .addButton(button => {
                button
                    .setButtonText("Import from File")
                    .setIcon("upload")
                    .setTooltip("Load settings from a .json file")
                    .onClick(() => {
                        const fileInput = containerEl.createEl('input', {
                            type: 'file',
                            attr: {
                                accept: '.json',
                                style: 'display: none;'
                            }
                        });

                        fileInput.addEventListener('change', (event) => {
                            const file = event.target.files[0];
                            if (file) {
                                this.handleImport(file);
                            }
                        });

                        fileInput.click();
                    });

                button.buttonEl.style.cursor = 'pointer';
            });
    }

    /**
     * Handles the export functionality.
     * @param {'all' | 'theme'} type The type of export to perform.
     */
    handleExport(type) {
        let settingsToExport;
        let fileName;

        if (type === 'theme') {
            const themeKeys = [
                // General appearance settings
                "fontSize",
                "dayNumberFontSize",
                "navButtonHeight",
                "headerRowBold",
                "pwColumnBold",
                "pwColumnSeparatorColor",

                // Add all the font color settings
                "pwColumnFontColorLight",
                "pwColumnFontColorDark",
                "weekNumberFontColorLight",
                "weekNumberFontColorDark",
                "dayHeaderFontColorLight",
                "dayHeaderFontColorDark",
                "dayCellFontColorLight",
                "dayCellFontColorDark",
                "otherMonthFontColorLight",
                "otherMonthFontColorDark",

                // Add the highlight toggles
                "highlightTodayDayHeader",
                "highlightTodayPWLabel",
                "todayHighlightSize",

                "currentHighlightLabelColorLight",
                "currentHighlightLabelColorDark",

                // Add all the highlight color settings
                "monthColorLight",
                "monthColorDark",
                "yearColorLight",
                "yearColorDark",

                "mainMonthYearTitleFontSize",
                "mainMonthTitleBold",
                "mainYearTitleBold",

                // Other settings
                "tabTitleFontSize",
                "tabTitleBold",
                "selectedTabColor",
                "todayHighlightColorLight",
                "todayHighlightColorDark",
                "notesHoverColor",
                "dailyNoteDotColor",
                "noteCreatedColor",
                "noteModifiedColor",
                "rowHighlightColorLight",
                "rowHighlightColorDark",
                'weekendShadeColorLight',
                'weekendShadeColorDark',
                "dateCellHoverColorLight",
                "dateCellHoverColorDark",
                "assetDotColor",
                "calendarEventDotColor",
                "todayHighlightStyle",
                "todayCircleColorLight",
                "todayCircleColorDark",
                "weeklyNoteDotColor",
                "scratchFontSize",
                "scratchBold",
                "scratchFontFamily",
                "scratchpadHighlightColor",
                "notesFontSize",
                "notesBold",
                "notesLineHeight",
                "showNoteStatusDots",
                "otherNotePopupFontSize",
                "calendarDotSize",
                // Task settings
                "taskIndicatorStyle",
                "taskDotColor",
                "taskBadgeFontSize",
                "taskBadgeColor",
                "taskBadgeFontColor",
                "taskHeatmapStartColor",
                "taskHeatmapMidColor",
                "taskHeatmapEndColor",
                "taskHeadingFontSize",
                "taskTextFontSize",
                "taskGroupColorOverdue",
                "taskGroupColorToday",
                "taskGroupColorTomorrow",
                "taskGroupColorNext7Days",
                "taskGroupColorFuture",
                "taskGroupColorNoDate",
                "taskGroupColorTag"
            ];
            settingsToExport = {};
            for (const key of themeKeys) {
                if (this.plugin.settings.hasOwnProperty(key)) {
                    settingsToExport[key] = this.plugin.settings[key];
                }
            }
            // Add the theme-specific identifier
            settingsToExport.__exportType = "theme";
            fileName = `calendar-period-week-notes-theme.json`;

        } else { // 'all'
            // Create a copy to avoid modifying the live settings object
            settingsToExport = { ...this.plugin.settings };
            // Add the 'all' settings identifier
            settingsToExport.__exportType = "all";
            fileName = `calendar-period-week-notes-settings.json`;
        }

        const data = JSON.stringify(settingsToExport, null, 2);
        const blob = new Blob([data], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = fileName;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);

        new Notice(`${type === 'theme' ? 'Theme' : 'All'} settings exported.`);
    }

    /**
     * Handles the import functionality.
     * @param {File} file The JSON file selected by the user.
     */
    handleImport(file) {
        const reader = new FileReader();
        reader.onload = (event) => {
            try {
                const importedSettings = JSON.parse(event.target.result);
                const exportType = importedSettings.__exportType;

                // Define default/fallback messages
                let title = 'Overwrite Settings?';
                let message = 'This appears to be an older settings file. Are you sure you want to import it? Your current configuration will be overwritten.';
                let confirmText = 'Import';

                // Customize messages based on the export type
                if (exportType === 'theme') {
                    title = 'Import Theme Settings?';
                    message = 'You are about to import a theme file. This will overwrite only your current appearance settings (colors, fonts, etc.).';
                    confirmText = 'Import Theme';
                } else if (exportType === 'all') {
                    title = 'Import All Settings?';
                    message = 'You are about to import a full settings file. This will overwrite your ENTIRE current configuration for this plugin.';
                    confirmText = 'Import All';
                } else {
                    // Basic validation for old files without an identifier
                    if (!importedSettings.hasOwnProperty('fontSize') && !importedSettings.hasOwnProperty('fixedNoteFile')) {
                        new Notice('Error: This does not appear to be a valid settings file.', 5000);
                        return;
                    }
                }

                // Remove the identifier before merging so it's not saved into the plugin's data
                if (exportType) {
                    delete importedSettings.__exportType;
                }

                // Show the confirmation modal with the appropriate message
                new ConfirmationModalWithStyles(this.app,
                    title,
                    message,
                    async () => {
                        this.plugin.settings = Object.assign({}, this.plugin.settings, importedSettings);

                        if (exportType === 'theme') {
                            this.plugin.settings.appliedTheme = file.name.replace(/\.json$/, '');
                        }

                        await this.saveAndUpdate();
                        this.refreshDisplay(); // Re-render the settings tab
                        new Notice('Settings imported successfully!');
                    },
                    confirmText // Use the customized button text
                ).open();

            } catch (e) {
                new Notice('Error: Could not parse the JSON file. Ensure it is not corrupted.', 5000);
                console.error("Failed to parse settings JSON:", e);
            }
        };
        reader.readAsText(file);
    }

    renderAboutTab() {
        const containerEl = this.contentEl;
        containerEl.createEl("h1", { text: "About Calendar Period Week Notes" });

        containerEl.createEl("p", {
            text: "This plugin provides two comprehensive calendar views together with an integrated panel containing a scratchpad area, notes, tasks, and assets."
        });

        new Setting(containerEl)
            .setName("Support the Developer")
            .setDesc("If you find this plugin useful, please consider supporting its development. It's greatly appreciated!")
            .addButton(button => {
                button
                    .setButtonText("☕ Buy Me a Coffee")
                    .setTooltip("https://buymeacoffee.com/fikte")
                    .onClick(() => {
                        // Make sure to replace "your-username" with your actual username!
                        window.open("https://buymeacoffee.com/fikte");
                    });
                // This makes the button more prominent
                button.buttonEl.addClass('mod-cta');
                button.buttonEl.style.backgroundColor = '#FFDD00';
                button.buttonEl.style.color = '#000000';
                button.buttonEl.style.cursor = 'pointer';
            });
    }

    async renderStartHereTab() {
        const containerEl = this.contentEl;
        containerEl.empty();

        // We are setting the HTML directly to bypass the MarkdownRenderer and avoid plugin conflicts.
        containerEl.innerHTML = `
        <h2>🚀 Quick Start: Initial Setup</h2>
        <hr>
        <p>Welcome, to get the most out of this plugin, it's recommended to configure a few key settings to match your workflow.</p>
        <hr>
        <h3>1. Set Up Your Scratchpad Note</h3>
        <p>The <strong>Scratchpad</strong> tab needs to point to a note file in your vault. By default, it looks for <code>ScratchPad.md</code> in your vault's root.</p>
        <ul>
            <li><strong>Go to:</strong> "ScratchPad Tab" → "ScratchPage note path"></li>
            <li><strong>Action:</strong> Set the <strong>ScratchPad note path</strong> to any note you prefer. If it doesn't exist, the plugin will create it for you.</li>
        </ul>
        <hr>
        <h3>2. Configure Your Daily Notes</h3>
        <p>For calendar and list dots and click-to-open features to work, the plugin needs to know where your daily notes are.</p>
        <ul>
            <li><strong>Go to:</strong> "Calendar Functional" → "Daily Notes"</li>
            <li><strong>Action:</strong> Set your <strong>Daily Notes folder</strong> and <strong>Daily note format</strong> to match your existing setup (e.g., YYYY-MM-DD).</li>
        </ul>
        <hr>
        <h3>3. Define Your Task Format</h3>
        <p>For the plugin to recognise your task due dates, they <strong>must</strong> use the <code>📅</code> emoji for due dates. Download the Tasks plugin for improved compatibility. The following examples show the format of tasks to be used:</p>
        <p><strong>Due Dates:</strong></p>
        <pre>- [ ] My task with a due date 📅 2025-10-26</pre>
        <pre>- [ ] Review project notes #work 📅 2025-11-01</code></pre>
        <p><strong>Completion Dates:</strong></p>
        <pre>- [x] My completed task 📅 2025-10-26 ✅ 2025-09-19</pre>
        <p>NOTE: If you do not use this Task format then you can toggle off the Tasks Tab in the "General Tab" → "Tab Visibility" section.</p>
        <hr>
        <h3>4. (Optional) Set Your Period/Week Start Date</h3>
        <p>If you plan to use the custom Period/Week calendar system (e.g., "P7W4"), you should set its starting date. The period/week calendar system, used by some companies for financial year tracking, assumes 13 periods with 4 weeks in each period.</p>
        <ul>
            <li><strong>Go to:</strong> "Calendar Functional" → "Period/Week System"</li>
            <li><strong>Action:</strong> Set the <strong>Start of Period 1 Week 1</strong> to the Sunday date of your choice.</li>
        </ul>
    `;
    }

}

module.exports = PeriodMonthPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL2ljYWwuanMvZGlzdC9pY2FsLmpzIiwic3JjL21haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgQklOQVJZIHZhbHVlIHR5cGUsIHdoaWNoIGNvbnRhaW5zIGV4dHJhIG1ldGhvZHMgZm9yIGVuY29kaW5nIGFuZCBkZWNvZGluZy5cbiAqXG4gKiBAbWVtYmVyb2YgSUNBTFxuICovXG5jbGFzcyBCaW5hcnkge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIGJpbmFyeSB2YWx1ZSBmcm9tIHRoZSBnaXZlbiBzdHJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhU3RyaW5nICAgICAgICBUaGUgYmluYXJ5IHZhbHVlIHN0cmluZ1xuICAgKiBAcmV0dXJuIHtCaW5hcnl9ICAgICAgICAgICAgICAgVGhlIGJpbmFyeSB2YWx1ZSBpbnN0YW5jZVxuICAgKi9cbiAgc3RhdGljIGZyb21TdHJpbmcoYVN0cmluZykge1xuICAgIHJldHVybiBuZXcgQmluYXJ5KGFTdHJpbmcpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5CaW5hcnkgaW5zdGFuY2VcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFWYWx1ZSAgICAgVGhlIGJpbmFyeSBkYXRhIGZvciB0aGlzIHZhbHVlXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhVmFsdWUpIHtcbiAgICB0aGlzLnZhbHVlID0gYVZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSB0eXBlIG5hbWUsIHRvIGJlIHVzZWQgaW4gdGhlIGpDYWwgb2JqZWN0LlxuICAgKiBAZGVmYXVsdCBcImJpbmFyeVwiXG4gICAqIEBjb25zdGFudFxuICAgKi9cbiAgaWNhbHR5cGUgPSBcImJpbmFyeVwiO1xuXG4gIC8qKlxuICAgKiBCYXNlNjQgZGVjb2RlIHRoZSBjdXJyZW50IHZhbHVlXG4gICAqXG4gICAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICBUaGUgYmFzZTY0LWRlY29kZWQgdmFsdWVcbiAgICovXG4gIGRlY29kZVZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLl9iNjRfZGVjb2RlKHRoaXMudmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuY29kZXMgdGhlIHBhc3NlZCBwYXJhbWV0ZXIgd2l0aCBiYXNlNjQgYW5kIHNldHMgdGhlIGludGVybmFsXG4gICAqIHZhbHVlIHRvIHRoZSByZXN1bHQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhVmFsdWUgICAgICBUaGUgcmF3IGJpbmFyeSB2YWx1ZSB0byBlbmNvZGVcbiAgICovXG4gIHNldEVuY29kZWRWYWx1ZShhVmFsdWUpIHtcbiAgICB0aGlzLnZhbHVlID0gdGhpcy5fYjY0X2VuY29kZShhVmFsdWUpO1xuICB9XG5cbiAgX2I2NF9lbmNvZGUoZGF0YSkge1xuICAgIC8vIGh0dHA6Ly9rZXZpbi52YW56b25uZXZlbGQubmV0XG4gICAgLy8gKyAgIG9yaWdpbmFsIGJ5OiBUeWxlciBBa2lucyAoaHR0cDovL3J1bWtpbi5jb20pXG4gICAgLy8gKyAgIGltcHJvdmVkIGJ5OiBCYXlyb24gR3VldmFyYVxuICAgIC8vICsgICBpbXByb3ZlZCBieTogVGh1bmRlci5tXG4gICAgLy8gKyAgIGltcHJvdmVkIGJ5OiBLZXZpbiB2YW4gWm9ubmV2ZWxkIChodHRwOi8va2V2aW4udmFuem9ubmV2ZWxkLm5ldClcbiAgICAvLyArICAgYnVnZml4ZWQgYnk6IFBlbGxlbnRlc3F1ZSBNYWxlc3VhZGFcbiAgICAvLyArICAgaW1wcm92ZWQgYnk6IEtldmluIHZhbiBab25uZXZlbGQgKGh0dHA6Ly9rZXZpbi52YW56b25uZXZlbGQubmV0KVxuICAgIC8vICsgICBpbXByb3ZlZCBieTogUmFmYcWCIEt1a2F3c2tpIChodHRwOi8va3VrYXdza2kucGwpXG4gICAgLy8gKiAgICAgZXhhbXBsZSAxOiBiYXNlNjRfZW5jb2RlKCdLZXZpbiB2YW4gWm9ubmV2ZWxkJyk7XG4gICAgLy8gKiAgICAgcmV0dXJucyAxOiAnUzJWMmFXNGdkbUZ1SUZwdmJtNWxkbVZzWkE9PSdcbiAgICAvLyBtb3ppbGxhIGhhcyB0aGlzIG5hdGl2ZVxuICAgIC8vIC0gYnV0IGJyZWFrcyBpbiAyLjAuMC4xMiFcbiAgICAvL2lmICh0eXBlb2YgdGhpcy53aW5kb3dbJ2F0b2InXSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gICAgcmV0dXJuIGF0b2IoZGF0YSk7XG4gICAgLy99XG4gICAgbGV0IGI2NCA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpcIiArXG4gICAgICAgICAgICAgIFwiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XCI7XG4gICAgbGV0IG8xLCBvMiwgbzMsIGgxLCBoMiwgaDMsIGg0LCBiaXRzLCBpID0gMCxcbiAgICAgIGFjID0gMCxcbiAgICAgIGVuYyA9IFwiXCIsXG4gICAgICB0bXBfYXJyID0gW107XG5cbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIGRvIHsgLy8gcGFjayB0aHJlZSBvY3RldHMgaW50byBmb3VyIGhleGV0c1xuICAgICAgbzEgPSBkYXRhLmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgIG8yID0gZGF0YS5jaGFyQ29kZUF0KGkrKyk7XG4gICAgICBvMyA9IGRhdGEuY2hhckNvZGVBdChpKyspO1xuXG4gICAgICBiaXRzID0gbzEgPDwgMTYgfCBvMiA8PCA4IHwgbzM7XG5cbiAgICAgIGgxID0gYml0cyA+PiAxOCAmIDB4M2Y7XG4gICAgICBoMiA9IGJpdHMgPj4gMTIgJiAweDNmO1xuICAgICAgaDMgPSBiaXRzID4+IDYgJiAweDNmO1xuICAgICAgaDQgPSBiaXRzICYgMHgzZjtcblxuICAgICAgLy8gdXNlIGhleGV0cyB0byBpbmRleCBpbnRvIGI2NCwgYW5kIGFwcGVuZCByZXN1bHQgdG8gZW5jb2RlZCBzdHJpbmdcbiAgICAgIHRtcF9hcnJbYWMrK10gPSBiNjQuY2hhckF0KGgxKSArIGI2NC5jaGFyQXQoaDIpICsgYjY0LmNoYXJBdChoMykgKyBiNjQuY2hhckF0KGg0KTtcbiAgICB9IHdoaWxlIChpIDwgZGF0YS5sZW5ndGgpO1xuXG4gICAgZW5jID0gdG1wX2Fyci5qb2luKCcnKTtcblxuICAgIGxldCByID0gZGF0YS5sZW5ndGggJSAzO1xuXG4gICAgcmV0dXJuIChyID8gZW5jLnNsaWNlKDAsIHIgLSAzKSA6IGVuYykgKyAnPT09Jy5zbGljZShyIHx8IDMpO1xuXG4gIH1cblxuICBfYjY0X2RlY29kZShkYXRhKSB7XG4gICAgLy8gaHR0cDovL2tldmluLnZhbnpvbm5ldmVsZC5uZXRcbiAgICAvLyArICAgb3JpZ2luYWwgYnk6IFR5bGVyIEFraW5zIChodHRwOi8vcnVta2luLmNvbSlcbiAgICAvLyArICAgaW1wcm92ZWQgYnk6IFRodW5kZXIubVxuICAgIC8vICsgICAgICBpbnB1dCBieTogQW1hbiBHdXB0YVxuICAgIC8vICsgICBpbXByb3ZlZCBieTogS2V2aW4gdmFuIFpvbm5ldmVsZCAoaHR0cDovL2tldmluLnZhbnpvbm5ldmVsZC5uZXQpXG4gICAgLy8gKyAgIGJ1Z2ZpeGVkIGJ5OiBPbm5vIE1hcnNtYW5cbiAgICAvLyArICAgYnVnZml4ZWQgYnk6IFBlbGxlbnRlc3F1ZSBNYWxlc3VhZGFcbiAgICAvLyArICAgaW1wcm92ZWQgYnk6IEtldmluIHZhbiBab25uZXZlbGQgKGh0dHA6Ly9rZXZpbi52YW56b25uZXZlbGQubmV0KVxuICAgIC8vICsgICAgICBpbnB1dCBieTogQnJldHQgWmFtaXIgKGh0dHA6Ly9icmV0dC16YW1pci5tZSlcbiAgICAvLyArICAgYnVnZml4ZWQgYnk6IEtldmluIHZhbiBab25uZXZlbGQgKGh0dHA6Ly9rZXZpbi52YW56b25uZXZlbGQubmV0KVxuICAgIC8vICogICAgIGV4YW1wbGUgMTogYmFzZTY0X2RlY29kZSgnUzJWMmFXNGdkbUZ1SUZwdmJtNWxkbVZzWkE9PScpO1xuICAgIC8vICogICAgIHJldHVybnMgMTogJ0tldmluIHZhbiBab25uZXZlbGQnXG4gICAgLy8gbW96aWxsYSBoYXMgdGhpcyBuYXRpdmVcbiAgICAvLyAtIGJ1dCBicmVha3MgaW4gMi4wLjAuMTIhXG4gICAgLy9pZiAodHlwZW9mIHRoaXMud2luZG93WydidG9hJ10gPT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vICAgIHJldHVybiBidG9hKGRhdGEpO1xuICAgIC8vfVxuICAgIGxldCBiNjQgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaXCIgK1xuICAgICAgICAgICAgICBcImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVwiO1xuICAgIGxldCBvMSwgbzIsIG8zLCBoMSwgaDIsIGgzLCBoNCwgYml0cywgaSA9IDAsXG4gICAgICBhYyA9IDAsXG4gICAgICBkZWMgPSBcIlwiLFxuICAgICAgdG1wX2FyciA9IFtdO1xuXG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICBkYXRhICs9ICcnO1xuXG4gICAgZG8geyAvLyB1bnBhY2sgZm91ciBoZXhldHMgaW50byB0aHJlZSBvY3RldHMgdXNpbmcgaW5kZXggcG9pbnRzIGluIGI2NFxuICAgICAgaDEgPSBiNjQuaW5kZXhPZihkYXRhLmNoYXJBdChpKyspKTtcbiAgICAgIGgyID0gYjY0LmluZGV4T2YoZGF0YS5jaGFyQXQoaSsrKSk7XG4gICAgICBoMyA9IGI2NC5pbmRleE9mKGRhdGEuY2hhckF0KGkrKykpO1xuICAgICAgaDQgPSBiNjQuaW5kZXhPZihkYXRhLmNoYXJBdChpKyspKTtcblxuICAgICAgYml0cyA9IGgxIDw8IDE4IHwgaDIgPDwgMTIgfCBoMyA8PCA2IHwgaDQ7XG5cbiAgICAgIG8xID0gYml0cyA+PiAxNiAmIDB4ZmY7XG4gICAgICBvMiA9IGJpdHMgPj4gOCAmIDB4ZmY7XG4gICAgICBvMyA9IGJpdHMgJiAweGZmO1xuXG4gICAgICBpZiAoaDMgPT0gNjQpIHtcbiAgICAgICAgdG1wX2FyclthYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUobzEpO1xuICAgICAgfSBlbHNlIGlmIChoNCA9PSA2NCkge1xuICAgICAgICB0bXBfYXJyW2FjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZShvMSwgbzIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG1wX2FyclthYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUobzEsIG8yLCBvMyk7XG4gICAgICB9XG4gICAgfSB3aGlsZSAoaSA8IGRhdGEubGVuZ3RoKTtcblxuICAgIGRlYyA9IHRtcF9hcnIuam9pbignJyk7XG5cbiAgICByZXR1cm4gZGVjO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyB2YWx1ZVxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgfVxufVxuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG5jb25zdCBEVVJBVElPTl9MRVRURVJTID0gLyhbUERXSE1UU117MSwxfSkvO1xuY29uc3QgREFUQV9QUk9QU19UT19DT1BZID0gW1wid2Vla3NcIiwgXCJkYXlzXCIsIFwiaG91cnNcIiwgXCJtaW51dGVzXCIsIFwic2Vjb25kc1wiLCBcImlzTmVnYXRpdmVcIl07XG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBcImR1cmF0aW9uXCIgdmFsdWUgdHlwZSwgd2l0aCB2YXJpb3VzIGNhbGN1bGF0aW9uXG4gKiBhbmQgbWFuaXB1bGF0aW9uIG1ldGhvZHMuXG4gKlxuICogQG1lbWJlcm9mIElDQUxcbiAqL1xuY2xhc3MgRHVyYXRpb24ge1xuICAvKipcbiAgICogUmV0dXJucyBhIG5ldyBJQ0FMLkR1cmF0aW9uIGluc3RhbmNlIGZyb20gdGhlIHBhc3NlZCBzZWNvbmRzIHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gYVNlY29uZHMgICAgICAgVGhlIHNlY29uZHMgdG8gY3JlYXRlIHRoZSBpbnN0YW5jZSBmcm9tXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufSAgICAgICAgICAgICBUaGUgbmV3bHkgY3JlYXRlZCBkdXJhdGlvbiBpbnN0YW5jZVxuICAgKi9cbiAgc3RhdGljIGZyb21TZWNvbmRzKGFTZWNvbmRzKSB7XG4gICAgcmV0dXJuIChuZXcgRHVyYXRpb24oKSkuZnJvbVNlY29uZHMoYVNlY29uZHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gc3RyaW5nIGlzIGFuIGlDYWxlbmRhciBkdXJhdGlvbiB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlICAgICAgVGhlIHJhdyBpY2FsIHZhbHVlXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgICAgIFRydWUsIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBvZiB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiBpY2FsIHR5cGVcbiAgICovXG4gIHN0YXRpYyBpc1ZhbHVlU3RyaW5nKHN0cmluZykge1xuICAgIHJldHVybiAoc3RyaW5nWzBdID09PSAnUCcgfHwgc3RyaW5nWzFdID09PSAnUCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIElDQUwuRHVyYXRpb259IGluc3RhbmNlIGZyb20gdGhlIHBhc3NlZCBzdHJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhU3RyICAgICAgIFRoZSBzdHJpbmcgdG8gcGFyc2VcbiAgICogQHJldHVybiB7RHVyYXRpb259ICAgICAgICAgVGhlIGNyZWF0ZWQgZHVyYXRpb24gaW5zdGFuY2VcbiAgICovXG4gIHN0YXRpYyBmcm9tU3RyaW5nKGFTdHIpIHtcbiAgICBsZXQgcG9zID0gMDtcbiAgICBsZXQgZGljdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgbGV0IGNodW5rcyA9IDA7XG5cbiAgICB3aGlsZSAoKHBvcyA9IGFTdHIuc2VhcmNoKERVUkFUSU9OX0xFVFRFUlMpKSAhPT0gLTEpIHtcbiAgICAgIGxldCB0eXBlID0gYVN0cltwb3NdO1xuICAgICAgbGV0IG51bWVyaWMgPSBhU3RyLnNsaWNlKDAsIE1hdGgubWF4KDAsIHBvcykpO1xuICAgICAgYVN0ciA9IGFTdHIuc2xpY2UocG9zICsgMSk7XG5cbiAgICAgIGNodW5rcyArPSBwYXJzZUR1cmF0aW9uQ2h1bmsodHlwZSwgbnVtZXJpYywgZGljdCk7XG4gICAgfVxuXG4gICAgaWYgKGNodW5rcyA8IDIpIHtcbiAgICAgIC8vIFRoZXJlIG11c3QgYmUgYXQgbGVhc3QgYSBjaHVuayB3aXRoIFwiUFwiIGFuZCBzb21lIHVuaXQgY2h1bmtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ2ludmFsaWQgZHVyYXRpb24gdmFsdWU6IE5vdCBlbm91Z2ggZHVyYXRpb24gY29tcG9uZW50cyBpbiBcIicgKyBhU3RyICsgJ1wiJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IER1cmF0aW9uKGRpY3QpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5EdXJhdGlvbiBpbnN0YW5jZSBmcm9tIHRoZSBnaXZlbiBkYXRhIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGFEYXRhICAgICAgICAgICAgICAgIEFuIG9iamVjdCB3aXRoIG1lbWJlcnMgb2YgdGhlIGR1cmF0aW9uXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYURhdGEud2Vla3MgICAgICAgICBEdXJhdGlvbiBpbiB3ZWVrc1xuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLmRheXMgICAgICAgICAgRHVyYXRpb24gaW4gZGF5c1xuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLmhvdXJzICAgICAgICAgRHVyYXRpb24gaW4gaG91cnNcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBhRGF0YS5taW51dGVzICAgICAgIER1cmF0aW9uIGluIG1pbnV0ZXNcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBhRGF0YS5zZWNvbmRzICAgICAgIER1cmF0aW9uIGluIHNlY29uZHNcbiAgICogQHBhcmFtIHtCb29sZWFuPX0gYURhdGEuaXNOZWdhdGl2ZSAgIElmIHRydWUsIHRoZSBkdXJhdGlvbiBpcyBuZWdhdGl2ZVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn0gICAgICAgICAgICAgICAgICAgVGhlIGNyZWF0ZWFkIGR1cmF0aW9uIGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgZnJvbURhdGEoYURhdGEpIHtcbiAgICByZXR1cm4gbmV3IER1cmF0aW9uKGFEYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuRHVyYXRpb24gaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhICAgICAgICAgICAgICAgICBBbiBvYmplY3Qgd2l0aCBtZW1iZXJzIG9mIHRoZSBkdXJhdGlvblxuICAgKiBAcGFyYW0ge051bWJlcj19IGRhdGEud2Vla3MgICAgICAgICAgRHVyYXRpb24gaW4gd2Vla3NcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBkYXRhLmRheXMgICAgICAgICAgIER1cmF0aW9uIGluIGRheXNcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBkYXRhLmhvdXJzICAgICAgICAgIER1cmF0aW9uIGluIGhvdXJzXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS5taW51dGVzICAgICAgICBEdXJhdGlvbiBpbiBtaW51dGVzXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS5zZWNvbmRzICAgICAgICBEdXJhdGlvbiBpbiBzZWNvbmRzXG4gICAqIEBwYXJhbSB7Qm9vbGVhbj19IGRhdGEuaXNOZWdhdGl2ZSAgICBJZiB0cnVlLCB0aGUgZHVyYXRpb24gaXMgbmVnYXRpdmVcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICB0aGlzLndyYXBwZWRKU09iamVjdCA9IHRoaXM7XG4gICAgdGhpcy5mcm9tRGF0YShkYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgd2Vla3MgaW4gdGhpcyBkdXJhdGlvblxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuICB3ZWVrcyA9IDA7XG5cbiAgLyoqXG4gICAqIFRoZSBkYXlzIGluIHRoaXMgZHVyYXRpb25cbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cbiAgZGF5cyA9IDA7XG5cbiAgLyoqXG4gICAqIFRoZSBkYXlzIGluIHRoaXMgZHVyYXRpb25cbiAgICogQHR5cGUge051bWJlcn1cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cbiAgaG91cnMgPSAwO1xuXG4gIC8qKlxuICAgKiBUaGUgbWludXRlcyBpbiB0aGlzIGR1cmF0aW9uXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IDBcbiAgICovXG4gIG1pbnV0ZXMgPSAwO1xuXG4gIC8qKlxuICAgKiBUaGUgc2Vjb25kcyBpbiB0aGlzIGR1cmF0aW9uXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBkZWZhdWx0IDBcbiAgICovXG4gIHNlY29uZHMgPSAwO1xuXG4gIC8qKlxuICAgKiBUaGUgc2Vjb25kcyBpbiB0aGlzIGR1cmF0aW9uXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgaXNOZWdhdGl2ZSA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBUaGUgY2xhc3MgaWRlbnRpZmllci5cbiAgICogQGNvbnN0YW50XG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEBkZWZhdWx0IFwiaWNhbGR1cmF0aW9uXCJcbiAgICovXG4gIGljYWxjbGFzcyA9IFwiaWNhbGR1cmF0aW9uXCI7XG5cbiAgLyoqXG4gICAqIFRoZSB0eXBlIG5hbWUsIHRvIGJlIHVzZWQgaW4gdGhlIGpDYWwgb2JqZWN0LlxuICAgKiBAY29uc3RhbnRcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGRlZmF1bHQgXCJkdXJhdGlvblwiXG4gICAqL1xuICBpY2FsdHlwZSA9IFwiZHVyYXRpb25cIjtcblxuICAvKipcbiAgICogUmV0dXJucyBhIGNsb25lIG9mIHRoZSBkdXJhdGlvbiBvYmplY3QuXG4gICAqXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufSAgICAgIFRoZSBjbG9uZWQgb2JqZWN0XG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gRHVyYXRpb24uZnJvbURhdGEodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGR1cmF0aW9uIHZhbHVlIGV4cHJlc3NlZCBhcyBhIG51bWJlciBvZiBzZWNvbmRzLlxuICAgKlxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgICAgIFRoZSBkdXJhdGlvbiB2YWx1ZSBpbiBzZWNvbmRzXG4gICAqL1xuICB0b1NlY29uZHMoKSB7XG4gICAgbGV0IHNlY29uZHMgPSB0aGlzLnNlY29uZHMgKyA2MCAqIHRoaXMubWludXRlcyArIDM2MDAgKiB0aGlzLmhvdXJzICtcbiAgICAgICAgICAgICAgICAgIDg2NDAwICogdGhpcy5kYXlzICsgNyAqIDg2NDAwICogdGhpcy53ZWVrcztcbiAgICByZXR1cm4gKHRoaXMuaXNOZWdhdGl2ZSA/IC1zZWNvbmRzIDogc2Vjb25kcyk7XG4gIH1cblxuICAvKipcbiAgICogUmVhZHMgdGhlIHBhc3NlZCBzZWNvbmRzIHZhbHVlIGludG8gdGhpcyBkdXJhdGlvbiBvYmplY3QuIEFmdGVyd2FyZHMsXG4gICAqIG1lbWJlcnMgbGlrZSB7QGxpbmsgSUNBTC5EdXJhdGlvbiNkYXlzIGRheXN9IGFuZCB7QGxpbmsgSUNBTC5EdXJhdGlvbiN3ZWVrcyB3ZWVrc30gd2lsbCBiZSBzZXQgdXBcbiAgICogYWNjb3JkaW5nbHkuXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBhU2Vjb25kcyAgICAgVGhlIGR1cmF0aW9uIHZhbHVlIGluIHNlY29uZHNcbiAgICogQHJldHVybiB7RHVyYXRpb259ICAgICAgICAgICBSZXR1cm5zIHRoaXMgaW5zdGFuY2VcbiAgICovXG4gIGZyb21TZWNvbmRzKGFTZWNvbmRzKSB7XG4gICAgbGV0IHNlY3MgPSBNYXRoLmFicyhhU2Vjb25kcyk7XG5cbiAgICB0aGlzLmlzTmVnYXRpdmUgPSAoYVNlY29uZHMgPCAwKTtcbiAgICB0aGlzLmRheXMgPSB0cnVuYyhzZWNzIC8gODY0MDApO1xuXG4gICAgLy8gSWYgd2UgaGF2ZSBhIGZsYXQgbnVtYmVyIG9mIHdlZWtzLCB1c2UgdGhlbS5cbiAgICBpZiAodGhpcy5kYXlzICUgNyA9PSAwKSB7XG4gICAgICB0aGlzLndlZWtzID0gdGhpcy5kYXlzIC8gNztcbiAgICAgIHRoaXMuZGF5cyA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMud2Vla3MgPSAwO1xuICAgIH1cblxuICAgIHNlY3MgLT0gKHRoaXMuZGF5cyArIDcgKiB0aGlzLndlZWtzKSAqIDg2NDAwO1xuXG4gICAgdGhpcy5ob3VycyA9IHRydW5jKHNlY3MgLyAzNjAwKTtcbiAgICBzZWNzIC09IHRoaXMuaG91cnMgKiAzNjAwO1xuXG4gICAgdGhpcy5taW51dGVzID0gdHJ1bmMoc2VjcyAvIDYwKTtcbiAgICBzZWNzIC09IHRoaXMubWludXRlcyAqIDYwO1xuXG4gICAgdGhpcy5zZWNvbmRzID0gc2VjcztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIHRoZSBjdXJyZW50IGluc3RhbmNlIHVzaW5nIG1lbWJlcnMgZnJvbSB0aGUgcGFzc2VkIGRhdGEgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYURhdGEgICAgICAgICAgICAgICAgQW4gb2JqZWN0IHdpdGggbWVtYmVycyBvZiB0aGUgZHVyYXRpb25cbiAgICogQHBhcmFtIHtOdW1iZXI9fSBhRGF0YS53ZWVrcyAgICAgICAgIER1cmF0aW9uIGluIHdlZWtzXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYURhdGEuZGF5cyAgICAgICAgICBEdXJhdGlvbiBpbiBkYXlzXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYURhdGEuaG91cnMgICAgICAgICBEdXJhdGlvbiBpbiBob3Vyc1xuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLm1pbnV0ZXMgICAgICAgRHVyYXRpb24gaW4gbWludXRlc1xuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLnNlY29uZHMgICAgICAgRHVyYXRpb24gaW4gc2Vjb25kc1xuICAgKiBAcGFyYW0ge0Jvb2xlYW49fSBhRGF0YS5pc05lZ2F0aXZlICAgSWYgdHJ1ZSwgdGhlIGR1cmF0aW9uIGlzIG5lZ2F0aXZlXG4gICAqL1xuICBmcm9tRGF0YShhRGF0YSkge1xuICAgIGZvciAobGV0IHByb3Agb2YgREFUQV9QUk9QU19UT19DT1BZKSB7XG4gICAgICBpZiAoYURhdGEgJiYgcHJvcCBpbiBhRGF0YSkge1xuICAgICAgICB0aGlzW3Byb3BdID0gYURhdGFbcHJvcF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzW3Byb3BdID0gMDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzZXRzIHRoZSBkdXJhdGlvbiBpbnN0YW5jZSB0byB0aGUgZGVmYXVsdCB2YWx1ZXMsIGkuZS4gUFQwU1xuICAgKi9cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5pc05lZ2F0aXZlID0gZmFsc2U7XG4gICAgdGhpcy53ZWVrcyA9IDA7XG4gICAgdGhpcy5kYXlzID0gMDtcbiAgICB0aGlzLmhvdXJzID0gMDtcbiAgICB0aGlzLm1pbnV0ZXMgPSAwO1xuICAgIHRoaXMuc2Vjb25kcyA9IDA7XG4gIH1cblxuICAvKipcbiAgICogQ29tcGFyZXMgdGhlIGR1cmF0aW9uIGluc3RhbmNlIHdpdGggYW5vdGhlciBvbmUuXG4gICAqXG4gICAqIEBwYXJhbSB7RHVyYXRpb259IGFPdGhlciAgICAgICAgICAgICBUaGUgaW5zdGFuY2UgdG8gY29tcGFyZSB3aXRoXG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAgICAgICAgICAtMSwgMCBvciAxIGZvciBsZXNzL2VxdWFsL2dyZWF0ZXJcbiAgICovXG4gIGNvbXBhcmUoYU90aGVyKSB7XG4gICAgbGV0IHRoaXNTZWNvbmRzID0gdGhpcy50b1NlY29uZHMoKTtcbiAgICBsZXQgb3RoZXJTZWNvbmRzID0gYU90aGVyLnRvU2Vjb25kcygpO1xuICAgIHJldHVybiAodGhpc1NlY29uZHMgPiBvdGhlclNlY29uZHMpIC0gKHRoaXNTZWNvbmRzIDwgb3RoZXJTZWNvbmRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3JtYWxpemVzIHRoZSBkdXJhdGlvbiBpbnN0YW5jZS4gRm9yIGV4YW1wbGUsIGEgZHVyYXRpb24gd2l0aCBhIHZhbHVlXG4gICAqIG9mIDYxIHNlY29uZHMgd2lsbCBiZSBub3JtYWxpemVkIHRvIDEgbWludXRlIGFuZCAxIHNlY29uZC5cbiAgICovXG4gIG5vcm1hbGl6ZSgpIHtcbiAgICB0aGlzLmZyb21TZWNvbmRzKHRoaXMudG9TZWNvbmRzKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBkdXJhdGlvbi5cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgdG9TdHJpbmcoKSB7XG4gICAgaWYgKHRoaXMudG9TZWNvbmRzKCkgPT0gMCkge1xuICAgICAgcmV0dXJuIFwiUFQwU1wiO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgc3RyID0gXCJcIjtcbiAgICAgIGlmICh0aGlzLmlzTmVnYXRpdmUpIHN0ciArPSBcIi1cIjtcbiAgICAgIHN0ciArPSBcIlBcIjtcbiAgICAgIGxldCBoYXNXZWVrcyA9IGZhbHNlO1xuICAgICAgaWYgKHRoaXMud2Vla3MpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF5cyB8fCB0aGlzLmhvdXJzIHx8IHRoaXMubWludXRlcyB8fCB0aGlzLnNlY29uZHMpIHtcbiAgICAgICAgICBzdHIgKz0gKHRoaXMud2Vla3MgKiA3ICsgdGhpcy5kYXlzKSArIFwiRFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0ciArPSAodGhpcy53ZWVrcyArIFwiV1wiKTtcbiAgICAgICAgICBoYXNXZWVrcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXlzKSB7XG4gICAgICAgIHN0ciArPSAodGhpcy5kYXlzICsgXCJEXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWhhc1dlZWtzKSB7XG4gICAgICAgIGlmICh0aGlzLmhvdXJzIHx8IHRoaXMubWludXRlcyB8fCB0aGlzLnNlY29uZHMpIHtcbiAgICAgICAgICBzdHIgKz0gXCJUXCI7XG4gICAgICAgICAgaWYgKHRoaXMuaG91cnMpIHtcbiAgICAgICAgICAgIHN0ciArPSB0aGlzLmhvdXJzICsgXCJIXCI7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMubWludXRlcykge1xuICAgICAgICAgICAgc3RyICs9IHRoaXMubWludXRlcyArIFwiTVwiO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0aGlzLnNlY29uZHMpIHtcbiAgICAgICAgICAgIHN0ciArPSB0aGlzLnNlY29uZHMgKyBcIlNcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIGlDYWxlbmRhciBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBkdXJhdGlvbi5cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgdG9JQ0FMU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBJbnRlcm5hbCBoZWxwZXIgZnVuY3Rpb24gdG8gaGFuZGxlIGEgY2h1bmsgb2YgYSBkdXJhdGlvbi5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtTdHJpbmd9IGxldHRlciB0eXBlIG9mIGR1cmF0aW9uIGNodW5rXG4gKiBAcGFyYW0ge1N0cmluZ30gbnVtYmVyIG51bWVyaWMgdmFsdWUgb3IgLS8rXG4gKiBAcGFyYW0ge09iamVjdH0gZGljdCB0YXJnZXQgdG8gYXNzaWduIHZhbHVlcyB0b1xuICovXG5mdW5jdGlvbiBwYXJzZUR1cmF0aW9uQ2h1bmsobGV0dGVyLCBudW1iZXIsIG9iamVjdCkge1xuICBsZXQgdHlwZTtcbiAgc3dpdGNoIChsZXR0ZXIpIHtcbiAgICBjYXNlICdQJzpcbiAgICAgIGlmIChudW1iZXIgJiYgbnVtYmVyID09PSAnLScpIHtcbiAgICAgICAgb2JqZWN0LmlzTmVnYXRpdmUgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb2JqZWN0LmlzTmVnYXRpdmUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8vIHBlcmlvZFxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnRCc6XG4gICAgICB0eXBlID0gJ2RheXMnO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnVyc6XG4gICAgICB0eXBlID0gJ3dlZWtzJztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ0gnOlxuICAgICAgdHlwZSA9ICdob3Vycyc7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdNJzpcbiAgICAgIHR5cGUgPSAnbWludXRlcyc7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdTJzpcbiAgICAgIHR5cGUgPSAnc2Vjb25kcyc7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgLy8gTm90IGEgdmFsaWQgY2h1bmtcbiAgICAgIHJldHVybiAwO1xuICB9XG5cbiAgaWYgKHR5cGUpIHtcbiAgICBpZiAoIW51bWJlciAmJiBudW1iZXIgIT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ2ludmFsaWQgZHVyYXRpb24gdmFsdWU6IE1pc3NpbmcgbnVtYmVyIGJlZm9yZSBcIicgKyBsZXR0ZXIgKyAnXCInXG4gICAgICApO1xuICAgIH1cbiAgICBsZXQgbnVtID0gcGFyc2VJbnQobnVtYmVyLCAxMCk7XG4gICAgaWYgKGlzU3RyaWN0bHlOYU4obnVtKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnaW52YWxpZCBkdXJhdGlvbiB2YWx1ZTogSW52YWxpZCBudW1iZXIgXCInICsgbnVtYmVyICsgJ1wiIGJlZm9yZSBcIicgKyBsZXR0ZXIgKyAnXCInXG4gICAgICApO1xuICAgIH1cbiAgICBvYmplY3RbdHlwZV0gPSBudW07XG4gIH1cblxuICByZXR1cm4gMTtcbn1cblxuLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cblxuLyoqXG4gKiBUaGlzIGxldHMgdHlwZXNjcmlwdCByZXNvbHZlIG91ciBjdXN0b20gdHlwZXMgaW4gdGhlXG4gKiBnZW5lcmF0ZWQgZC50cyBmaWxlcyAoanNkb2MgdHlwZWRlZnMgYXJlIGNvbnZlcnRlZCB0byB0eXBlc2NyaXB0IHR5cGVzKS5cbiAqIElnbm9yZSBwcmV2ZW50cyB0aGUgdHlwZWRlZnMgZnJvbSBiZWluZyBkb2N1bWVudGVkIG1vcmUgdGhhbiBvbmNlLlxuICogQGlnbm9yZVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vdHlwZXMuanNcIikuakNhbENvbXBvbmVudH0gakNhbENvbXBvbmVudFxuICogSW1wb3J0cyB0aGUgJ29jY3VycmVuY2VEZXRhaWxzJyB0eXBlIGZyb20gdGhlIFwidHlwZXMuanNcIiBtb2R1bGVcbiAqL1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgXCJwZXJpb2RcIiB2YWx1ZSB0eXBlLCB3aXRoIHZhcmlvdXMgY2FsY3VsYXRpb24gYW5kIG1hbmlwdWxhdGlvbiBtZXRob2RzLlxuICpcbiAqIEBtZW1iZXJvZiBJQ0FMXG4gKi9cbmNsYXNzIFBlcmlvZCB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IHtAbGluayBJQ0FMLlBlcmlvZH0gaW5zdGFuY2UgZnJvbSB0aGUgcGFzc2VkIHN0cmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciAgICAgICAgICAgIFRoZSBzdHJpbmcgdG8gcGFyc2VcbiAgICogQHBhcmFtIHtQcm9wZXJ0eX0gcHJvcCAgICAgICAgIFRoZSBwcm9wZXJ0eSB0aGlzIHBlcmlvZCB3aWxsIGJlIG9uXG4gICAqIEByZXR1cm4ge1BlcmlvZH0gICAgICAgICAgICAgICBUaGUgY3JlYXRlZCBwZXJpb2QgaW5zdGFuY2VcbiAgICovXG4gIHN0YXRpYyBmcm9tU3RyaW5nKHN0ciwgcHJvcCkge1xuICAgIGxldCBwYXJ0cyA9IHN0ci5zcGxpdCgnLycpO1xuXG4gICAgaWYgKHBhcnRzLmxlbmd0aCAhPT0gMikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnSW52YWxpZCBzdHJpbmcgdmFsdWU6IFwiJyArIHN0ciArICdcIiBtdXN0IGNvbnRhaW4gYSBcIi9cIiBjaGFyLidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IG9wdGlvbnMgPSB7XG4gICAgICBzdGFydDogVGltZS5mcm9tRGF0ZVRpbWVTdHJpbmcocGFydHNbMF0sIHByb3ApXG4gICAgfTtcblxuICAgIGxldCBlbmQgPSBwYXJ0c1sxXTtcblxuICAgIGlmIChEdXJhdGlvbi5pc1ZhbHVlU3RyaW5nKGVuZCkpIHtcbiAgICAgIG9wdGlvbnMuZHVyYXRpb24gPSBEdXJhdGlvbi5mcm9tU3RyaW5nKGVuZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wdGlvbnMuZW5kID0gVGltZS5mcm9tRGF0ZVRpbWVTdHJpbmcoZW5kLCBwcm9wKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFBlcmlvZChvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IHtAbGluayBJQ0FMLlBlcmlvZH0gaW5zdGFuY2UgZnJvbSB0aGUgZ2l2ZW4gZGF0YSBvYmplY3QuXG4gICAqIFRoZSBwYXNzZWQgZGF0YSBvYmplY3QgY2Fubm90IGNvbnRhaW4gYm90aCBhbmQgZW5kIGRhdGUgYW5kIGEgZHVyYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhRGF0YSAgICAgICAgICAgICAgICAgIEFuIG9iamVjdCB3aXRoIG1lbWJlcnMgb2YgdGhlIHBlcmlvZFxuICAgKiBAcGFyYW0ge1RpbWU9fSBhRGF0YS5zdGFydCAgICAgICAgICAgICBUaGUgc3RhcnQgb2YgdGhlIHBlcmlvZFxuICAgKiBAcGFyYW0ge1RpbWU9fSBhRGF0YS5lbmQgICAgICAgICAgICAgICBUaGUgZW5kIG9mIHRoZSBwZXJpb2RcbiAgICogQHBhcmFtIHtEdXJhdGlvbj19IGFEYXRhLmR1cmF0aW9uICAgICAgVGhlIGR1cmF0aW9uIG9mIHRoZSBwZXJpb2RcbiAgICogQHJldHVybiB7UGVyaW9kfSAgICAgICAgICAgICAgICAgICAgICAgVGhlIHBlcmlvZCBpbnN0YW5jZVxuICAgKi9cbiAgc3RhdGljIGZyb21EYXRhKGFEYXRhKSB7XG4gICAgcmV0dXJuIG5ldyBQZXJpb2QoYURhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgcGVyaW9kIGluc3RhbmNlIGZyb20gdGhlIGdpdmVuIGpDYWwgZGF0YSBhcnJheS4gVGhlIGZpcnN0XG4gICAqIG1lbWJlciBpcyBhbHdheXMgdGhlIHN0YXJ0IGRhdGUgc3RyaW5nLCB0aGUgc2Vjb25kIG1lbWJlciBpcyBlaXRoZXIgYVxuICAgKiBkdXJhdGlvbiBvciBlbmQgZGF0ZSBzdHJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7akNhbENvbXBvbmVudH0gYURhdGEgICAgICAgICAgIFRoZSBqQ2FsIGRhdGEgYXJyYXlcbiAgICogQHBhcmFtIHtQcm9wZXJ0eX0gYVByb3AgICAgICAgICAgICAgICAgVGhlIHByb3BlcnR5IHRoaXMgakNhbCBkYXRhIGlzIG9uXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gYUxlbmllbnQgICAgICAgICAgICAgIElmIHRydWUsIGRhdGEgdmFsdWUgY2FuIGJlIGJvdGggZGF0ZSBhbmQgZGF0ZS10aW1lXG4gICAqIEByZXR1cm4ge1BlcmlvZH0gICAgICAgICAgICAgICAgICAgICAgIFRoZSBwZXJpb2QgaW5zdGFuY2VcbiAgICovXG4gIHN0YXRpYyBmcm9tSlNPTihhRGF0YSwgYVByb3AsIGFMZW5pZW50KSB7XG4gICAgZnVuY3Rpb24gZnJvbURhdGVPckRhdGVUaW1lU3RyaW5nKGFWYWx1ZSwgZGF0ZVByb3ApIHtcbiAgICAgIGlmIChhTGVuaWVudCkge1xuICAgICAgICByZXR1cm4gVGltZS5mcm9tU3RyaW5nKGFWYWx1ZSwgZGF0ZVByb3ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFRpbWUuZnJvbURhdGVUaW1lU3RyaW5nKGFWYWx1ZSwgZGF0ZVByb3ApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChEdXJhdGlvbi5pc1ZhbHVlU3RyaW5nKGFEYXRhWzFdKSkge1xuICAgICAgcmV0dXJuIFBlcmlvZC5mcm9tRGF0YSh7XG4gICAgICAgIHN0YXJ0OiBmcm9tRGF0ZU9yRGF0ZVRpbWVTdHJpbmcoYURhdGFbMF0sIGFQcm9wKSxcbiAgICAgICAgZHVyYXRpb246IER1cmF0aW9uLmZyb21TdHJpbmcoYURhdGFbMV0pXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFBlcmlvZC5mcm9tRGF0YSh7XG4gICAgICAgIHN0YXJ0OiBmcm9tRGF0ZU9yRGF0ZVRpbWVTdHJpbmcoYURhdGFbMF0sIGFQcm9wKSxcbiAgICAgICAgZW5kOiBmcm9tRGF0ZU9yRGF0ZVRpbWVTdHJpbmcoYURhdGFbMV0sIGFQcm9wKVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5QZXJpb2QgaW5zdGFuY2UuIFRoZSBwYXNzZWQgZGF0YSBvYmplY3QgY2Fubm90IGNvbnRhaW4gYm90aCBhbmQgZW5kIGRhdGUgYW5kXG4gICAqIGEgZHVyYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhRGF0YSAgICAgICAgICAgICAgICAgIEFuIG9iamVjdCB3aXRoIG1lbWJlcnMgb2YgdGhlIHBlcmlvZFxuICAgKiBAcGFyYW0ge1RpbWU9fSBhRGF0YS5zdGFydCAgICAgICAgICAgICBUaGUgc3RhcnQgb2YgdGhlIHBlcmlvZFxuICAgKiBAcGFyYW0ge1RpbWU9fSBhRGF0YS5lbmQgICAgICAgICAgICAgICBUaGUgZW5kIG9mIHRoZSBwZXJpb2RcbiAgICogQHBhcmFtIHtEdXJhdGlvbj19IGFEYXRhLmR1cmF0aW9uICAgICAgVGhlIGR1cmF0aW9uIG9mIHRoZSBwZXJpb2RcbiAgICovXG4gIGNvbnN0cnVjdG9yKGFEYXRhKSB7XG4gICAgdGhpcy53cmFwcGVkSlNPYmplY3QgPSB0aGlzO1xuXG4gICAgaWYgKGFEYXRhICYmICdzdGFydCcgaW4gYURhdGEpIHtcbiAgICAgIGlmIChhRGF0YS5zdGFydCAmJiAhKGFEYXRhLnN0YXJ0IGluc3RhbmNlb2YgVGltZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignLnN0YXJ0IG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgSUNBTC5UaW1lJyk7XG4gICAgICB9XG4gICAgICB0aGlzLnN0YXJ0ID0gYURhdGEuc3RhcnQ7XG4gICAgfVxuXG4gICAgaWYgKGFEYXRhICYmIGFEYXRhLmVuZCAmJiBhRGF0YS5kdXJhdGlvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjYW5ub3QgYWNjZXB0IGJvdGggZW5kIGFuZCBkdXJhdGlvbicpO1xuICAgIH1cblxuICAgIGlmIChhRGF0YSAmJiAnZW5kJyBpbiBhRGF0YSkge1xuICAgICAgaWYgKGFEYXRhLmVuZCAmJiAhKGFEYXRhLmVuZCBpbnN0YW5jZW9mIFRpbWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJy5lbmQgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBJQ0FMLlRpbWUnKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZW5kID0gYURhdGEuZW5kO1xuICAgIH1cblxuICAgIGlmIChhRGF0YSAmJiAnZHVyYXRpb24nIGluIGFEYXRhKSB7XG4gICAgICBpZiAoYURhdGEuZHVyYXRpb24gJiYgIShhRGF0YS5kdXJhdGlvbiBpbnN0YW5jZW9mIER1cmF0aW9uKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcuZHVyYXRpb24gbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBJQ0FMLkR1cmF0aW9uJyk7XG4gICAgICB9XG4gICAgICB0aGlzLmR1cmF0aW9uID0gYURhdGEuZHVyYXRpb247XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogVGhlIHN0YXJ0IG9mIHRoZSBwZXJpb2RcbiAgICogQHR5cGUge1RpbWV9XG4gICAqL1xuICBzdGFydCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBlbmQgb2YgdGhlIHBlcmlvZFxuICAgKiBAdHlwZSB7VGltZX1cbiAgICovXG4gIGVuZCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBkdXJhdGlvbiBvZiB0aGUgcGVyaW9kXG4gICAqIEB0eXBlIHtEdXJhdGlvbn1cbiAgICovXG4gIGR1cmF0aW9uID0gbnVsbDtcblxuICAvKipcbiAgICogVGhlIGNsYXNzIGlkZW50aWZpZXIuXG4gICAqIEBjb25zdGFudFxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAZGVmYXVsdCBcImljYWxwZXJpb2RcIlxuICAgKi9cbiAgaWNhbGNsYXNzID0gXCJpY2FscGVyaW9kXCI7XG5cbiAgLyoqXG4gICAqIFRoZSB0eXBlIG5hbWUsIHRvIGJlIHVzZWQgaW4gdGhlIGpDYWwgb2JqZWN0LlxuICAgKiBAY29uc3RhbnRcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGRlZmF1bHQgXCJwZXJpb2RcIlxuICAgKi9cbiAgaWNhbHR5cGUgPSBcInBlcmlvZFwiO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY2xvbmUgb2YgdGhlIGR1cmF0aW9uIG9iamVjdC5cbiAgICpcbiAgICogQHJldHVybiB7UGVyaW9kfSAgICAgIFRoZSBjbG9uZWQgb2JqZWN0XG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gUGVyaW9kLmZyb21EYXRhKHtcbiAgICAgIHN0YXJ0OiB0aGlzLnN0YXJ0ID8gdGhpcy5zdGFydC5jbG9uZSgpIDogbnVsbCxcbiAgICAgIGVuZDogdGhpcy5lbmQgPyB0aGlzLmVuZC5jbG9uZSgpIDogbnVsbCxcbiAgICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uID8gdGhpcy5kdXJhdGlvbi5jbG9uZSgpIDogbnVsbFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgdGhlIGR1cmF0aW9uIG9mIHRoZSBwZXJpb2QsIGVpdGhlciBkaXJlY3RseSBvciBieSBzdWJ0cmFjdGluZ1xuICAgKiBzdGFydCBmcm9tIGVuZCBkYXRlLlxuICAgKlxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn0gICAgICBUaGUgY2FsY3VsYXRlZCBkdXJhdGlvblxuICAgKi9cbiAgZ2V0RHVyYXRpb24oKSB7XG4gICAgaWYgKHRoaXMuZHVyYXRpb24pIHtcbiAgICAgIHJldHVybiB0aGlzLmR1cmF0aW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5lbmQuc3VidHJhY3REYXRlKHRoaXMuc3RhcnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGVzIHRoZSBlbmQgZGF0ZSBvZiB0aGUgcGVyaW9kLCBlaXRoZXIgZGlyZWN0bHkgb3IgYnkgYWRkaW5nXG4gICAqIGR1cmF0aW9uIHRvIHN0YXJ0IGRhdGUuXG4gICAqXG4gICAqIEByZXR1cm4ge1RpbWV9ICAgICAgICAgIFRoZSBjYWxjdWxhdGVkIGVuZCBkYXRlXG4gICAqL1xuICBnZXRFbmQoKSB7XG4gICAgaWYgKHRoaXMuZW5kKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbmQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBlbmQgPSB0aGlzLnN0YXJ0LmNsb25lKCk7XG4gICAgICBlbmQuYWRkRHVyYXRpb24odGhpcy5kdXJhdGlvbik7XG4gICAgICByZXR1cm4gZW5kO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wYXJlIHRoaXMgcGVyaW9kIHdpdGggYSBkYXRlIG9yIG90aGVyIHBlcmlvZC4gVG8gbWFpbnRhaW4gdGhlIGxvZ2ljIHdoZXJlIGEuY29tcGFyZShiKVxuICAgKiByZXR1cm5zIDEgd2hlbiBhID4gYiwgdGhpcyBmdW5jdGlvbiB3aWxsIHJldHVybiAxIHdoZW4gdGhlIHBlcmlvZCBpcyBhZnRlciB0aGUgZGF0ZSwgMCB3aGVuIHRoZVxuICAgKiBkYXRlIGlzIHdpdGhpbiB0aGUgcGVyaW9kLCBhbmQgLTEgd2hlbiB0aGUgcGVyaW9kIGlzIGJlZm9yZSB0aGUgZGF0ZS4gV2hlbiBjb21wYXJpbmcgdHdvXG4gICAqIHBlcmlvZHMsIGFzIHNvb24gYXMgdGhleSBvdmVybGFwIGluIGFueSB3YXkgdGhpcyB3aWxsIHJldHVybiAwLlxuICAgKlxuICAgKiBAcGFyYW0ge1RpbWV8UGVyaW9kfSBkdCAgICBUaGUgZGF0ZSBvciBvdGhlciBwZXJpb2QgdG8gY29tcGFyZSB3aXRoXG4gICAqL1xuICBjb21wYXJlKGR0KSB7XG4gICAgaWYgKGR0LmNvbXBhcmUodGhpcy5zdGFydCkgPCAwKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGR0LmNvbXBhcmUodGhpcy5nZXRFbmQoKSkgPiAwKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcGVyaW9kLlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5zdGFydCArIFwiL1wiICsgKHRoaXMuZW5kIHx8IHRoaXMuZHVyYXRpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBqQ2FsIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcGVyaW9kIHR5cGUuXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gW3RoaXMuc3RhcnQudG9TdHJpbmcoKSwgKHRoaXMuZW5kIHx8IHRoaXMuZHVyYXRpb24pLnRvU3RyaW5nKCldO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBpQ2FsZW5kYXIgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcGVyaW9kLlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICB0b0lDQUxTdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhcnQudG9JQ0FMU3RyaW5nKCkgKyBcIi9cIiArXG4gICAgICAgICAgICh0aGlzLmVuZCB8fCB0aGlzLmR1cmF0aW9uKS50b0lDQUxTdHJpbmcoKTtcbiAgfVxufVxuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG4vKipcbiAqIFRoaXMgbGV0cyB0eXBlc2NyaXB0IHJlc29sdmUgb3VyIGN1c3RvbSB0eXBlcyBpbiB0aGVcbiAqIGdlbmVyYXRlZCBkLnRzIGZpbGVzIChqc2RvYyB0eXBlZGVmcyBhcmUgY29udmVydGVkIHRvIHR5cGVzY3JpcHQgdHlwZXMpLlxuICogSWdub3JlIHByZXZlbnRzIHRoZSB0eXBlZGVmcyBmcm9tIGJlaW5nIGRvY3VtZW50ZWQgbW9yZSB0aGFuIG9uY2UuXG4gKlxuICogQGlnbm9yZVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vdHlwZXMuanNcIikud2Vla0RheX0gd2Vla0RheVxuICogSW1wb3J0cyB0aGUgJ3dlZWtEYXknIHR5cGUgZnJvbSB0aGUgXCJ0eXBlcy5qc1wiIG1vZHVsZVxuICpcbiAqIEBpZ25vcmVcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL3R5cGVzLmpzXCIpLnRpbWVJbml0fSB0aW1lSW5pdFxuICogSW1wb3J0cyB0aGUgJ3RpbWVJbml0JyB0eXBlIGZyb20gdGhlIFwidHlwZXMuanNcIiBtb2R1bGVcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIGlDYWxlbmRhciBUaW1lIHJlcHJlc2VudGF0aW9uIChzaW1pbGFyIHRvIEpTIERhdGUgb2JqZWN0KS4gIEZ1bGx5XG4gKiBpbmRlcGVuZGVudCBvZiBzeXN0ZW0gKE9TKSB0aW1lem9uZSAvIHRpbWUuICBVbmxpa2UgSlMgRGF0ZSwgdGhlIG1vbnRoXG4gKiBKYW51YXJ5IGlzIDEsIG5vdCB6ZXJvLlxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgdGltZSA9IG5ldyBJQ0FMLlRpbWUoe1xuICogICB5ZWFyOiAyMDEyLFxuICogICBtb250aDogMTAsXG4gKiAgIGRheTogMTFcbiAqICAgbWludXRlOiAwLFxuICogICBzZWNvbmQ6IDAsXG4gKiAgIGlzRGF0ZTogZmFsc2VcbiAqIH0pO1xuICpcbiAqXG4gKiBAbWVtYmVyb2YgSUNBTFxuKi9cbmNsYXNzIFRpbWUge1xuICBzdGF0aWMgX2Rvd0NhY2hlID0ge307XG4gIHN0YXRpYyBfd25DYWNoZSA9IHt9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBkYXlzIGluIHRoZSBnaXZlbiBtb250aFxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gbW9udGggICAgICBUaGUgbW9udGggdG8gY2hlY2tcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHllYXIgICAgICAgVGhlIHllYXIgdG8gY2hlY2tcbiAgICogQHJldHVybiB7TnVtYmVyfSAgICAgICAgICAgVGhlIG51bWJlciBvZiBkYXlzIGluIHRoZSBtb250aFxuICAgKi9cbiAgc3RhdGljIGRheXNJbk1vbnRoKG1vbnRoLCB5ZWFyKSB7XG4gICAgbGV0IF9kYXlzSW5Nb250aCA9IFswLCAzMSwgMjgsIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXTtcbiAgICBsZXQgZGF5cyA9IDMwO1xuXG4gICAgaWYgKG1vbnRoIDwgMSB8fCBtb250aCA+IDEyKSByZXR1cm4gZGF5cztcblxuICAgIGRheXMgPSBfZGF5c0luTW9udGhbbW9udGhdO1xuXG4gICAgaWYgKG1vbnRoID09IDIpIHtcbiAgICAgIGRheXMgKz0gVGltZS5pc0xlYXBZZWFyKHllYXIpO1xuICAgIH1cblxuICAgIHJldHVybiBkYXlzO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgeWVhciBpcyBhIGxlYXAgeWVhclxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0geWVhciAgICAgICBUaGUgeWVhciB0byBjaGVja1xuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgICBUcnVlLCBpZiB0aGUgeWVhciBpcyBhIGxlYXAgeWVhclxuICAgKi9cbiAgc3RhdGljIGlzTGVhcFllYXIoeWVhcikge1xuICAgIGlmICh5ZWFyIDw9IDE3NTIpIHtcbiAgICAgIHJldHVybiAoKHllYXIgJSA0KSA9PSAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICgoKHllYXIgJSA0ID09IDApICYmICh5ZWFyICUgMTAwICE9IDApKSB8fCAoeWVhciAlIDQwMCA9PSAwKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBJQ0FMLlRpbWUgZnJvbSB0aGUgZGF5IG9mIHllYXIgYW5kIHllYXIuIFRoZSBkYXRlIGlzIHJldHVybmVkXG4gICAqIGluIGZsb2F0aW5nIHRpbWV6b25lLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gYURheU9mWWVhciAgICAgVGhlIGRheSBvZiB5ZWFyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBhWWVhciAgICAgICAgICBUaGUgeWVhciB0byBjcmVhdGUgdGhlIGluc3RhbmNlIGluXG4gICAqIEByZXR1cm4ge1RpbWV9ICAgICAgICAgICAgICAgICBUaGUgY3JlYXRlZCBpbnN0YW5jZSB3aXRoIHRoZSBjYWxjdWxhdGVkIGRhdGVcbiAgICovXG4gIHN0YXRpYyBmcm9tRGF5T2ZZZWFyKGFEYXlPZlllYXIsIGFZZWFyKSB7XG4gICAgbGV0IHllYXIgPSBhWWVhcjtcbiAgICBsZXQgZG95ID0gYURheU9mWWVhcjtcbiAgICBsZXQgdHQgPSBuZXcgVGltZSgpO1xuICAgIHR0LmF1dG9fbm9ybWFsaXplID0gZmFsc2U7XG4gICAgbGV0IGlzX2xlYXAgPSAoVGltZS5pc0xlYXBZZWFyKHllYXIpID8gMSA6IDApO1xuXG4gICAgaWYgKGRveSA8IDEpIHtcbiAgICAgIHllYXItLTtcbiAgICAgIGlzX2xlYXAgPSAoVGltZS5pc0xlYXBZZWFyKHllYXIpID8gMSA6IDApO1xuICAgICAgZG95ICs9IFRpbWUuZGF5c0luWWVhclBhc3NlZE1vbnRoW2lzX2xlYXBdWzEyXTtcbiAgICAgIHJldHVybiBUaW1lLmZyb21EYXlPZlllYXIoZG95LCB5ZWFyKTtcbiAgICB9IGVsc2UgaWYgKGRveSA+IFRpbWUuZGF5c0luWWVhclBhc3NlZE1vbnRoW2lzX2xlYXBdWzEyXSkge1xuICAgICAgaXNfbGVhcCA9IChUaW1lLmlzTGVhcFllYXIoeWVhcikgPyAxIDogMCk7XG4gICAgICBkb3kgLT0gVGltZS5kYXlzSW5ZZWFyUGFzc2VkTW9udGhbaXNfbGVhcF1bMTJdO1xuICAgICAgeWVhcisrO1xuICAgICAgcmV0dXJuIFRpbWUuZnJvbURheU9mWWVhcihkb3ksIHllYXIpO1xuICAgIH1cblxuICAgIHR0LnllYXIgPSB5ZWFyO1xuICAgIHR0LmlzRGF0ZSA9IHRydWU7XG5cbiAgICBmb3IgKGxldCBtb250aCA9IDExOyBtb250aCA+PSAwOyBtb250aC0tKSB7XG4gICAgICBpZiAoZG95ID4gVGltZS5kYXlzSW5ZZWFyUGFzc2VkTW9udGhbaXNfbGVhcF1bbW9udGhdKSB7XG4gICAgICAgIHR0Lm1vbnRoID0gbW9udGggKyAxO1xuICAgICAgICB0dC5kYXkgPSBkb3kgLSBUaW1lLmRheXNJblllYXJQYXNzZWRNb250aFtpc19sZWFwXVttb250aF07XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHR0LmF1dG9fbm9ybWFsaXplID0gdHJ1ZTtcbiAgICByZXR1cm4gdHQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIG5ldyBJQ0FMLlRpbWUgaW5zdGFuY2UgZnJvbSBhIGRhdGUgc3RyaW5nLCBlLmcgMjAxNS0wMS0wMi5cbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgICAgICAgICAgICAgICAgVXNlIHtAbGluayBJQ0FMLlRpbWUuZnJvbURhdGVTdHJpbmd9IGluc3RlYWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciAgICAgICAgVGhlIHN0cmluZyB0byBjcmVhdGUgZnJvbVxuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgICAgICAgICBUaGUgZGF0ZS90aW1lIGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgZnJvbVN0cmluZ3YyKHN0cikge1xuICAgIHJldHVybiBuZXcgVGltZSh7XG4gICAgICB5ZWFyOiBwYXJzZUludChzdHIuc2xpY2UoMCwgNCksIDEwKSxcbiAgICAgIG1vbnRoOiBwYXJzZUludChzdHIuc2xpY2UoNSwgNyksIDEwKSxcbiAgICAgIGRheTogcGFyc2VJbnQoc3RyLnNsaWNlKDgsIDEwKSwgMTApLFxuICAgICAgaXNEYXRlOiB0cnVlXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIG5ldyBJQ0FMLlRpbWUgaW5zdGFuY2UgZnJvbSBhIGRhdGUgc3RyaW5nLCBlLmcgMjAxNS0wMS0wMi5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFWYWx1ZSAgICAgVGhlIHN0cmluZyB0byBjcmVhdGUgZnJvbVxuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgICAgICAgICBUaGUgZGF0ZS90aW1lIGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgZnJvbURhdGVTdHJpbmcoYVZhbHVlKSB7XG4gICAgLy8gRGF0ZXMgc2hvdWxkIGhhdmUgbm8gdGltZXpvbmUuXG4gICAgLy8gR29vZ2xlIGxpa2VzIHRvIHNvbWV0aW1lcyBzcGVjaWZ5IFogb24gZGF0ZXNcbiAgICAvLyB3ZSBzcGVjaWZpY2FsbHkgaWdub3JlIHRoYXQgdG8gYXZvaWQgaXNzdWVzLlxuXG4gICAgLy8gWVlZWS1NTS1ERFxuICAgIC8vIDIwMTItMTAtMTBcbiAgICByZXR1cm4gbmV3IFRpbWUoe1xuICAgICAgeWVhcjogc3RyaWN0UGFyc2VJbnQoYVZhbHVlLnNsaWNlKDAsIDQpKSxcbiAgICAgIG1vbnRoOiBzdHJpY3RQYXJzZUludChhVmFsdWUuc2xpY2UoNSwgNykpLFxuICAgICAgZGF5OiBzdHJpY3RQYXJzZUludChhVmFsdWUuc2xpY2UoOCwgMTApKSxcbiAgICAgIGlzRGF0ZTogdHJ1ZVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgSUNBTC5UaW1lIGluc3RhbmNlIGZyb20gYSBkYXRlLXRpbWUgc3RyaW5nLCBlLmdcbiAgICogMjAxNS0wMS0wMlQwMzowNDowNS4gSWYgYSBwcm9wZXJ0eSBpcyBzcGVjaWZpZWQsIHRoZSB0aW1lem9uZSBpcyBzZXQgdXBcbiAgICogZnJvbSB0aGUgcHJvcGVydHkncyBUWklEIHBhcmFtZXRlci5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFWYWx1ZSAgICAgICAgIFRoZSBzdHJpbmcgdG8gY3JlYXRlIGZyb21cbiAgICogQHBhcmFtIHtQcm9wZXJ0eT19IHByb3AgICAgICAgIFRoZSBwcm9wZXJ0eSB0aGUgZGF0ZSBiZWxvbmdzIHRvXG4gICAqIEByZXR1cm4ge1RpbWV9ICAgICAgICAgICAgICAgICBUaGUgZGF0ZS90aW1lIGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgZnJvbURhdGVUaW1lU3RyaW5nKGFWYWx1ZSwgcHJvcCkge1xuICAgIGlmIChhVmFsdWUubGVuZ3RoIDwgMTkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ2ludmFsaWQgZGF0ZS10aW1lIHZhbHVlOiBcIicgKyBhVmFsdWUgKyAnXCInXG4gICAgICApO1xuICAgIH1cblxuICAgIGxldCB6b25lO1xuICAgIGxldCB6b25lSWQ7XG5cbiAgICBpZiAoYVZhbHVlLnNsaWNlKC0xKSA9PT0gJ1onKSB7XG4gICAgICB6b25lID0gVGltZXpvbmUudXRjVGltZXpvbmU7XG4gICAgfSBlbHNlIGlmIChwcm9wKSB7XG4gICAgICB6b25lSWQgPSBwcm9wLmdldFBhcmFtZXRlcigndHppZCcpO1xuXG4gICAgICBpZiAocHJvcC5wYXJlbnQpIHtcbiAgICAgICAgaWYgKHByb3AucGFyZW50Lm5hbWUgPT09ICdzdGFuZGFyZCcgfHwgcHJvcC5wYXJlbnQubmFtZSA9PT0gJ2RheWxpZ2h0Jykge1xuICAgICAgICAgIC8vIFBlciBSRkMgNTU0NSAzLjguMi40IGFuZCAzLjguMi4yLCBzdGFydC9lbmQgZGF0ZS10aW1lcyB3aXRoaW5cbiAgICAgICAgICAvLyB0aGVzZSBjb21wb25lbnRzIE1VU1QgYmUgc3BlY2lmaWVkIGluIGxvY2FsIHRpbWUuXG4gICAgICAgICAgem9uZSA9IFRpbWV6b25lLmxvY2FsVGltZXpvbmU7XG4gICAgICAgIH0gZWxzZSBpZiAoem9uZUlkKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRlc2lyZWQgdGltZSB6b25lIGlzIGRlZmluZWQgd2l0aGluIHRoZSBjb21wb25lbnQgdHJlZSxcbiAgICAgICAgICAvLyBmZXRjaCBpdHMgZGVmaW5pdGlvbiBhbmQgcHJlZmVyIHRoYXQuXG4gICAgICAgICAgem9uZSA9IHByb3AucGFyZW50LmdldFRpbWVab25lQnlJRCh6b25lSWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdGltZURhdGEgPSB7XG4gICAgICB5ZWFyOiBzdHJpY3RQYXJzZUludChhVmFsdWUuc2xpY2UoMCwgNCkpLFxuICAgICAgbW9udGg6IHN0cmljdFBhcnNlSW50KGFWYWx1ZS5zbGljZSg1LCA3KSksXG4gICAgICBkYXk6IHN0cmljdFBhcnNlSW50KGFWYWx1ZS5zbGljZSg4LCAxMCkpLFxuICAgICAgaG91cjogc3RyaWN0UGFyc2VJbnQoYVZhbHVlLnNsaWNlKDExLCAxMykpLFxuICAgICAgbWludXRlOiBzdHJpY3RQYXJzZUludChhVmFsdWUuc2xpY2UoMTQsIDE2KSksXG4gICAgICBzZWNvbmQ6IHN0cmljdFBhcnNlSW50KGFWYWx1ZS5zbGljZSgxNywgMTkpKSxcbiAgICB9O1xuXG4gICAgLy8gQWx0aG91Z2ggUkZDIDU1NDUgcmVxdWlyZXMgdGhhdCBhbGwgVFpJRHMgdXNlZCB3aXRoaW4gYSBmaWxlIGhhdmUgYVxuICAgIC8vIGNvcnJlc3BvbmRpbmcgdGltZSB6b25lIGRlZmluaXRpb24sIHdlIG1heSBub3QgYmUgcGFyc2luZyB0aGUgZnVsbCBmaWxlXG4gICAgLy8gb3Igd2UgbWF5IGJlIGRlYWxpbmcgd2l0aCBhIG5vbi1jb21wbGlhbnQgZmlsZTsgaW4gZWl0aGVyIGNhc2UsIHdlIGNhblxuICAgIC8vIGNoZWNrIG91ciBvd24gdGltZSB6b25lIHNlcnZpY2UgZm9yIHRoZSBUWklEIGluIGEgbGFzdC1kaXRjaCBlZmZvcnQuXG4gICAgaWYgKHpvbmVJZCAmJiAhem9uZSkge1xuICAgICAgdGltZURhdGEudGltZXpvbmUgPSB6b25lSWQ7XG4gICAgfVxuXG4gICAgLy8gMjAxMi0xMC0xMFQxMDoxMDoxMChaKT9cbiAgICByZXR1cm4gbmV3IFRpbWUodGltZURhdGEsIHpvbmUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgSUNBTC5UaW1lIGluc3RhbmNlIGZyb20gYSBkYXRlIG9yIGRhdGUtdGltZSBzdHJpbmcsXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhVmFsdWUgICAgICAgICBUaGUgc3RyaW5nIHRvIGNyZWF0ZSBmcm9tXG4gICAqIEBwYXJhbSB7UHJvcGVydHk9fSBwcm9wICAgICAgICBUaGUgcHJvcGVydHkgdGhlIGRhdGUgYmVsb25ncyB0b1xuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgICAgICAgICAgICAgVGhlIGRhdGUvdGltZSBpbnN0YW5jZVxuICAgKi9cbiAgc3RhdGljIGZyb21TdHJpbmcoYVZhbHVlLCBhUHJvcGVydHkpIHtcbiAgICBpZiAoYVZhbHVlLmxlbmd0aCA+IDEwKSB7XG4gICAgICByZXR1cm4gVGltZS5mcm9tRGF0ZVRpbWVTdHJpbmcoYVZhbHVlLCBhUHJvcGVydHkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gVGltZS5mcm9tRGF0ZVN0cmluZyhhVmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuVGltZSBpbnN0YW5jZSBmcm9tIHRoZSBnaXZlbiBKYXZhc2NyaXB0IERhdGUuXG4gICAqXG4gICAqIEBwYXJhbSB7P0RhdGV9IGFEYXRlICAgICAgICAgICAgIFRoZSBKYXZhc2NyaXB0IERhdGUgdG8gcmVhZCwgb3IgbnVsbCB0byByZXNldFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VVVEM9ZmFsc2VdICBJZiB0cnVlLCB0aGUgVVRDIHZhbHVlcyBvZiB0aGUgZGF0ZSB3aWxsIGJlIHVzZWRcbiAgICovXG4gIHN0YXRpYyBmcm9tSlNEYXRlKGFEYXRlLCB1c2VVVEMpIHtcbiAgICBsZXQgdHQgPSBuZXcgVGltZSgpO1xuICAgIHJldHVybiB0dC5mcm9tSlNEYXRlKGFEYXRlLCB1c2VVVEMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5UaW1lIGluc3RhbmNlIGZyb20gdGhlIHRoZSBwYXNzZWQgZGF0YSBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7dGltZUluaXR9IGFEYXRhICAgICAgICAgIFRpbWUgaW5pdGlhbGl6YXRpb25cbiAgICogQHBhcmFtIHtUaW1lem9uZT19IGFab25lICAgICAgICAgVGltZXpvbmUgdGhpcyBwb3NpdGlvbiBvY2N1cnMgaW5cbiAgICovXG4gIHN0YXRpYyBmcm9tRGF0YSA9IGZ1bmN0aW9uIGZyb21EYXRhKGFEYXRhLCBhWm9uZSkge1xuICAgIGxldCB0ID0gbmV3IFRpbWUoKTtcbiAgICByZXR1cm4gdC5mcm9tRGF0YShhRGF0YSwgYVpvbmUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuVGltZSBpbnN0YW5jZSBmcm9tIHRoZSBjdXJyZW50IG1vbWVudC5cbiAgICogVGhlIGluc3RhbmNlIGlzIOKAnGZsb2F0aW5n4oCdIC0gaGFzIG5vIHRpbWV6b25lIHJlbGF0aW9uLlxuICAgKiBUbyBjcmVhdGUgYW4gaW5zdGFuY2UgY29uc2lkZXJpbmcgdGhlIHRpbWUgem9uZSwgY2FsbFxuICAgKiBJQ0FMLlRpbWUuZnJvbUpTRGF0ZShuZXcgRGF0ZSgpLCB0cnVlKVxuICAgKiBAcmV0dXJuIHtUaW1lfVxuICAgKi9cbiAgc3RhdGljIG5vdygpIHtcbiAgICByZXR1cm4gVGltZS5mcm9tSlNEYXRlKG5ldyBEYXRlKCksIGZhbHNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBkYXRlIG9uIHdoaWNoIElTTyB3ZWVrIG51bWJlciAxIHN0YXJ0cy5cbiAgICpcbiAgICogQHNlZSBUaW1lI3dlZWtOdW1iZXJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFZZWFyICAgICAgICAgICAgICAgICAgVGhlIHllYXIgdG8gc2VhcmNoIGluXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGFXZWVrU3RhcnQgICAgICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHdlZWtkYXksIHVzZWQgZm9yIGNhbGN1bGF0aW9uLlxuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgICAgICAgICAgICAgICAgICAgICBUaGUgZGF0ZSBvbiB3aGljaCB3ZWVrIG51bWJlciAxIHN0YXJ0c1xuICAgKi9cbiAgc3RhdGljIHdlZWtPbmVTdGFydHMoYVllYXIsIGFXZWVrU3RhcnQpIHtcbiAgICBsZXQgdCA9IFRpbWUuZnJvbURhdGEoe1xuICAgICAgeWVhcjogYVllYXIsXG4gICAgICBtb250aDogMSxcbiAgICAgIGRheTogMSxcbiAgICAgIGlzRGF0ZTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgbGV0IGRvdyA9IHQuZGF5T2ZXZWVrKCk7XG4gICAgbGV0IHdrc3QgPSBhV2Vla1N0YXJ0IHx8IFRpbWUuREVGQVVMVF9XRUVLX1NUQVJUO1xuICAgIGlmIChkb3cgPiBUaW1lLlRIVVJTREFZKSB7XG4gICAgICB0LmRheSArPSA3O1xuICAgIH1cbiAgICBpZiAod2tzdCA+IFRpbWUuVEhVUlNEQVkpIHtcbiAgICAgIHQuZGF5IC09IDc7XG4gICAgfVxuXG4gICAgdC5kYXkgLT0gZG93IC0gd2tzdDtcblxuICAgIHJldHVybiB0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZG9taW5pY2FsIGxldHRlciBmb3IgdGhlIGdpdmVuIHllYXIuIExldHRlcnMgcmFuZ2UgZnJvbSBBIC0gRyBmb3JcbiAgICogY29tbW9uIHllYXJzLCBhbmQgQUcgdG8gR0YgZm9yIGxlYXAgeWVhcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB5ciAgICAgICAgICAgVGhlIHllYXIgdG8gcmV0cmlldmUgdGhlIGxldHRlciBmb3JcbiAgICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgICAgICBUaGUgZG9taW5pY2FsIGxldHRlci5cbiAgICovXG4gIHN0YXRpYyBnZXREb21pbmljYWxMZXR0ZXIoeXIpIHtcbiAgICBsZXQgTFRSUyA9IFwiR0ZFRENCQVwiO1xuICAgIGxldCBkb20gPSAoeXIgKyAoeXIgLyA0IHwgMCkgKyAoeXIgLyA0MDAgfCAwKSAtICh5ciAvIDEwMCB8IDApIC0gMSkgJSA3O1xuICAgIGxldCBpc0xlYXAgPSBUaW1lLmlzTGVhcFllYXIoeXIpO1xuICAgIGlmIChpc0xlYXApIHtcbiAgICAgIHJldHVybiBMVFJTWyhkb20gKyA2KSAlIDddICsgTFRSU1tkb21dO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gTFRSU1tkb21dO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyAjZXBvY2hUaW1lID0gbnVsbDtcbiAgLyoqXG4gICAqIEphbnVhcnkgMXN0LCAxOTcwIGFzIGFuIElDQUwuVGltZS5cbiAgICogQHR5cGUge1RpbWV9XG4gICAqIEBjb25zdGFudFxuICAgKiBAaW5zdGFuY2VcbiAgICovXG4gIHN0YXRpYyBnZXQgZXBvY2hUaW1lKCkge1xuICAgIGlmICghdGhpcy4jZXBvY2hUaW1lKSB7XG4gICAgICB0aGlzLiNlcG9jaFRpbWUgPSBUaW1lLmZyb21EYXRhKHtcbiAgICAgICAgeWVhcjogMTk3MCxcbiAgICAgICAgbW9udGg6IDEsXG4gICAgICAgIGRheTogMSxcbiAgICAgICAgaG91cjogMCxcbiAgICAgICAgbWludXRlOiAwLFxuICAgICAgICBzZWNvbmQ6IDAsXG4gICAgICAgIGlzRGF0ZTogZmFsc2UsXG4gICAgICAgIHRpbWV6b25lOiBcIlpcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLiNlcG9jaFRpbWU7XG4gIH1cblxuICBzdGF0aWMgX2NtcF9hdHRyKGEsIGIsIGF0dHIpIHtcbiAgICBpZiAoYVthdHRyXSA+IGJbYXR0cl0pIHJldHVybiAxO1xuICAgIGlmIChhW2F0dHJdIDwgYlthdHRyXSkgcmV0dXJuIC0xO1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBkYXlzIHRoYXQgaGF2ZSBwYXNzZWQgaW4gdGhlIHllYXIgYWZ0ZXIgYSBnaXZlbiBtb250aC4gVGhlIGFycmF5IGhhc1xuICAgKiB0d28gbWVtYmVycywgb25lIGJlaW5nIGFuIGFycmF5IG9mIHBhc3NlZCBkYXlzIGZvciBub24tbGVhcCB5ZWFycywgdGhlXG4gICAqIG90aGVyIGFuYWxvZyBmb3IgbGVhcCB5ZWFycy5cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIGlzTGVhcFllYXIgPSBJQ0FMLlRpbWUuaXNMZWFwWWVhcih5ZWFyKTtcbiAgICogdmFyIHBhc3NlZERheXMgPSBJQ0FMLlRpbWUuZGF5c0luWWVhclBhc3NlZE1vbnRoW2lzTGVhcFllYXJdW21vbnRoXTtcbiAgICogQHR5cGUge0FycmF5LjxBcnJheS48TnVtYmVyPj59XG4gICAqL1xuICBzdGF0aWMgZGF5c0luWWVhclBhc3NlZE1vbnRoID0gW1xuICAgIFswLCAzMSwgNTksIDkwLCAxMjAsIDE1MSwgMTgxLCAyMTIsIDI0MywgMjczLCAzMDQsIDMzNCwgMzY1XSxcbiAgICBbMCwgMzEsIDYwLCA5MSwgMTIxLCAxNTIsIDE4MiwgMjEzLCAyNDQsIDI3NCwgMzA1LCAzMzUsIDM2Nl1cbiAgXTtcblxuICBzdGF0aWMgU1VOREFZID0gMTtcbiAgc3RhdGljIE1PTkRBWSA9IDI7XG4gIHN0YXRpYyBUVUVTREFZID0gMztcbiAgc3RhdGljIFdFRE5FU0RBWSA9IDQ7XG4gIHN0YXRpYyBUSFVSU0RBWSA9IDU7XG4gIHN0YXRpYyBGUklEQVkgPSA2O1xuICBzdGF0aWMgU0FUVVJEQVkgPSA3O1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCB3ZWVrZGF5IGZvciB0aGUgV0tTVCBwYXJ0LlxuICAgKiBAY29uc3RhbnRcbiAgICogQGRlZmF1bHQgSUNBTC5UaW1lLk1PTkRBWVxuICAgKi9cbiAgc3RhdGljIERFRkFVTFRfV0VFS19TVEFSVCA9IDI7IC8vIE1PTkRBWVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuVGltZSBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHt0aW1lSW5pdH0gZGF0YSAgICAgICAgICAgVGltZSBpbml0aWFsaXphdGlvblxuICAgKiBAcGFyYW0ge1RpbWV6b25lfSB6b25lICAgICAgICAgICB0aW1lem9uZSB0aGlzIHBvc2l0aW9uIG9jY3VycyBpblxuICAgKi9cbiAgY29uc3RydWN0b3IoZGF0YSwgem9uZSkge1xuICAgIHRoaXMud3JhcHBlZEpTT2JqZWN0ID0gdGhpcztcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHt0aW1lSW5pdH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuX3RpbWUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgLyogdGltZSBkZWZhdWx0cyAqL1xuICAgIHRoaXMuX3RpbWUueWVhciA9IDA7XG4gICAgdGhpcy5fdGltZS5tb250aCA9IDE7XG4gICAgdGhpcy5fdGltZS5kYXkgPSAxO1xuICAgIHRoaXMuX3RpbWUuaG91ciA9IDA7XG4gICAgdGhpcy5fdGltZS5taW51dGUgPSAwO1xuICAgIHRoaXMuX3RpbWUuc2Vjb25kID0gMDtcbiAgICB0aGlzLl90aW1lLmlzRGF0ZSA9IGZhbHNlO1xuXG4gICAgdGhpcy5mcm9tRGF0YShkYXRhLCB6b25lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY2xhc3MgaWRlbnRpZmllci5cbiAgICogQGNvbnN0YW50XG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEBkZWZhdWx0IFwiaWNhbHRpbWVcIlxuICAgKi9cbiAgaWNhbGNsYXNzID0gXCJpY2FsdGltZVwiO1xuICBfY2FjaGVkVW5peFRpbWUgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgdHlwZSBuYW1lLCB0byBiZSB1c2VkIGluIHRoZSBqQ2FsIG9iamVjdC4gVGhpcyB2YWx1ZSBtYXkgY2hhbmdlIGFuZFxuICAgKiBpcyBzdHJpY3RseSBkZWZpbmVkIGJ5IHRoZSB7QGxpbmsgSUNBTC5UaW1lI2lzRGF0ZSBpc0RhdGV9IG1lbWJlci5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGRlZmF1bHQgXCJkYXRlLXRpbWVcIlxuICAgKi9cbiAgZ2V0IGljYWx0eXBlKCkge1xuICAgIHJldHVybiB0aGlzLmlzRGF0ZSA/ICdkYXRlJyA6ICdkYXRlLXRpbWUnO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSB0aW1lem9uZSBmb3IgdGhpcyB0aW1lLlxuICAgKiBAdHlwZSB7VGltZXpvbmV9XG4gICAqL1xuICB6b25lID0gbnVsbDtcblxuICAvKipcbiAgICogSW50ZXJuYWwgdXNlcyB0byBpbmRpY2F0ZSB0aGF0IGEgY2hhbmdlIGhhcyBiZWVuIG1hZGUgYW5kIHRoZSBuZXh0IHJlYWRcbiAgICogb3BlcmF0aW9uIG11c3QgYXR0ZW1wdCB0byBub3JtYWxpemUgdGhlIHZhbHVlIChmb3IgZXhhbXBsZSBjaGFuZ2luZyB0aGVcbiAgICogZGF5IHRvIDMzKS5cbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcGVuZGluZ05vcm1hbGl6YXRpb24gPSBmYWxzZTtcblxuICAvKipcbiAgICogVGhlIHllYXIgb2YgdGhpcyBkYXRlLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgZ2V0IHllYXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldFRpbWVBdHRyKCd5ZWFyJyk7XG4gIH1cblxuICBzZXQgeWVhcih2YWwpIHtcbiAgICB0aGlzLl9zZXRUaW1lQXR0cigneWVhcicsIHZhbCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIG1vbnRoIG9mIHRoaXMgZGF0ZS5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGdldCBtb250aCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0VGltZUF0dHIoJ21vbnRoJyk7XG4gIH1cblxuICBzZXQgbW9udGgodmFsKSB7XG4gICAgdGhpcy5fc2V0VGltZUF0dHIoJ21vbnRoJywgdmFsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZGF5IG9mIHRoaXMgZGF0ZS5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGdldCBkYXkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldFRpbWVBdHRyKCdkYXknKTtcbiAgfVxuXG4gIHNldCBkYXkodmFsKSB7XG4gICAgdGhpcy5fc2V0VGltZUF0dHIoJ2RheScsIHZhbCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGhvdXIgb2YgdGhpcyBkYXRlLXRpbWUuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqL1xuICBnZXQgaG91cigpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0VGltZUF0dHIoJ2hvdXInKTtcbiAgfVxuXG4gIHNldCBob3VyKHZhbCkge1xuICAgIHRoaXMuX3NldFRpbWVBdHRyKCdob3VyJywgdmFsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgbWludXRlIG9mIHRoaXMgZGF0ZS10aW1lLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgZ2V0IG1pbnV0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0VGltZUF0dHIoJ21pbnV0ZScpO1xuICB9XG5cbiAgc2V0IG1pbnV0ZSh2YWwpIHtcbiAgICB0aGlzLl9zZXRUaW1lQXR0cignbWludXRlJywgdmFsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc2Vjb25kIG9mIHRoaXMgZGF0ZS10aW1lLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgZ2V0IHNlY29uZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0VGltZUF0dHIoJ3NlY29uZCcpO1xuICB9XG5cbiAgc2V0IHNlY29uZCh2YWwpIHtcbiAgICB0aGlzLl9zZXRUaW1lQXR0cignc2Vjb25kJywgdmFsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiB0cnVlLCB0aGUgaW5zdGFuY2UgcmVwcmVzZW50cyBhIGRhdGUgKGFzIG9wcG9zZWQgdG8gYSBkYXRlLXRpbWUpXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cbiAgZ2V0IGlzRGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0VGltZUF0dHIoJ2lzRGF0ZScpO1xuICB9XG5cbiAgc2V0IGlzRGF0ZSh2YWwpIHtcbiAgICB0aGlzLl9zZXRUaW1lQXR0cignaXNEYXRlJywgdmFsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYXR0ciAgICAgICAgICAgICBBdHRyaWJ1dGUgdG8gZ2V0IChvbmUgb2Y6IHllYXIsIG1vbnRoLFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBpc0RhdGUpXG4gICAqIEByZXR1cm4ge051bWJlcnxCb29sZWFufSAgICAgICAgIEN1cnJlbnQgdmFsdWUgZm9yIHRoZSBhdHRyaWJ1dGVcbiAgICovXG4gIF9nZXRUaW1lQXR0cihhdHRyKSB7XG4gICAgaWYgKHRoaXMuX3BlbmRpbmdOb3JtYWxpemF0aW9uKSB7XG4gICAgICB0aGlzLl9ub3JtYWxpemUoKTtcbiAgICAgIHRoaXMuX3BlbmRpbmdOb3JtYWxpemF0aW9uID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3RpbWVbYXR0cl07XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IGF0dHIgICAgICAgICAgICAgQXR0cmlidXRlIHRvIHNldCAob25lIG9mOiB5ZWFyLCBtb250aCxcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCwgaXNEYXRlKVxuICAgKiBAcGFyYW0ge051bWJlcnxCb29sZWFufSB2YWwgICAgICBOZXcgdmFsdWUgZm9yIHRoZSBhdHRyaWJ1dGVcbiAgICovXG4gIF9zZXRUaW1lQXR0cihhdHRyLCB2YWwpIHtcbiAgICAvLyBDaGVjayBpZiBpc0RhdGUgd2lsbCBiZSBzZXQgYW5kIGlmIHdhcyBub3Qgc2V0IHRvIG5vcm1hbGl6ZSBkYXRlLlxuICAgIC8vIFRoaXMgYXZvaWRzIGxvc2luZyBkYXlzIHdoZW4gc2Vjb25kcywgbWludXRlcyBhbmQgaG91cnMgYXJlIHplcm9lZFxuICAgIC8vIHdoYXQgbm9ybWFsaXplIHdpbGwgZG8gd2hlbiB0aW1lIGlzIGEgZGF0ZS5cbiAgICBpZiAoYXR0ciA9PT0gXCJpc0RhdGVcIiAmJiB2YWwgJiYgIXRoaXMuX3RpbWUuaXNEYXRlKSB7XG4gICAgICB0aGlzLmFkanVzdCgwLCAwLCAwLCAwKTtcbiAgICB9XG4gICAgdGhpcy5fY2FjaGVkVW5peFRpbWUgPSBudWxsO1xuICAgIHRoaXMuX3BlbmRpbmdOb3JtYWxpemF0aW9uID0gdHJ1ZTtcbiAgICB0aGlzLl90aW1lW2F0dHJdID0gdmFsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjbG9uZSBvZiB0aGUgdGltZSBvYmplY3QuXG4gICAqXG4gICAqIEByZXR1cm4ge1RpbWV9ICAgICAgICAgICAgICBUaGUgY2xvbmVkIG9iamVjdFxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBUaW1lKHRoaXMuX3RpbWUsIHRoaXMuem9uZSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgdGhlIHRpbWUgaW5zdGFuY2UgdG8gZXBvY2ggdGltZVxuICAgKi9cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5mcm9tRGF0YShUaW1lLmVwb2NoVGltZSk7XG4gICAgdGhpcy56b25lID0gVGltZXpvbmUudXRjVGltZXpvbmU7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgdGhlIHRpbWUgaW5zdGFuY2UgdG8gdGhlIGdpdmVuIGRhdGUvdGltZSB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB5ZWFyICAgICAgICAgICAgIFRoZSB5ZWFyIHRvIHNldFxuICAgKiBAcGFyYW0ge051bWJlcn0gbW9udGggICAgICAgICAgICBUaGUgbW9udGggdG8gc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkYXkgICAgICAgICAgICAgIFRoZSBkYXkgdG8gc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyfSBob3VyICAgICAgICAgICAgIFRoZSBob3VyIHRvIHNldFxuICAgKiBAcGFyYW0ge051bWJlcn0gbWludXRlICAgICAgICAgICBUaGUgbWludXRlIHRvIHNldFxuICAgKiBAcGFyYW0ge051bWJlcn0gc2Vjb25kICAgICAgICAgICBUaGUgc2Vjb25kIHRvIHNldFxuICAgKiBAcGFyYW0ge1RpbWV6b25lfSB0aW1lem9uZSAgICAgICBUaGUgdGltZXpvbmUgdG8gc2V0XG4gICAqL1xuICByZXNldFRvKHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCB0aW1lem9uZSkge1xuICAgIHRoaXMuZnJvbURhdGEoe1xuICAgICAgeWVhcjogeWVhcixcbiAgICAgIG1vbnRoOiBtb250aCxcbiAgICAgIGRheTogZGF5LFxuICAgICAgaG91cjogaG91cixcbiAgICAgIG1pbnV0ZTogbWludXRlLFxuICAgICAgc2Vjb25kOiBzZWNvbmQsXG4gICAgICB6b25lOiB0aW1lem9uZVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB1cCB0aGUgY3VycmVudCBpbnN0YW5jZSBmcm9tIHRoZSBKYXZhc2NyaXB0IGRhdGUgdmFsdWUuXG4gICAqXG4gICAqIEBwYXJhbSB7P0RhdGV9IGFEYXRlICAgICAgICAgICAgIFRoZSBKYXZhc2NyaXB0IERhdGUgdG8gcmVhZCwgb3IgbnVsbCB0byByZXNldFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VVVEM9ZmFsc2VdICBJZiB0cnVlLCB0aGUgVVRDIHZhbHVlcyBvZiB0aGUgZGF0ZSB3aWxsIGJlIHVzZWRcbiAgICovXG4gIGZyb21KU0RhdGUoYURhdGUsIHVzZVVUQykge1xuICAgIGlmICghYURhdGUpIHtcbiAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHVzZVVUQykge1xuICAgICAgICB0aGlzLnpvbmUgPSBUaW1lem9uZS51dGNUaW1lem9uZTtcbiAgICAgICAgdGhpcy55ZWFyID0gYURhdGUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgICAgICAgdGhpcy5tb250aCA9IGFEYXRlLmdldFVUQ01vbnRoKCkgKyAxO1xuICAgICAgICB0aGlzLmRheSA9IGFEYXRlLmdldFVUQ0RhdGUoKTtcbiAgICAgICAgdGhpcy5ob3VyID0gYURhdGUuZ2V0VVRDSG91cnMoKTtcbiAgICAgICAgdGhpcy5taW51dGUgPSBhRGF0ZS5nZXRVVENNaW51dGVzKCk7XG4gICAgICAgIHRoaXMuc2Vjb25kID0gYURhdGUuZ2V0VVRDU2Vjb25kcygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy56b25lID0gVGltZXpvbmUubG9jYWxUaW1lem9uZTtcbiAgICAgICAgdGhpcy55ZWFyID0gYURhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgdGhpcy5tb250aCA9IGFEYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgICAgICB0aGlzLmRheSA9IGFEYXRlLmdldERhdGUoKTtcbiAgICAgICAgdGhpcy5ob3VyID0gYURhdGUuZ2V0SG91cnMoKTtcbiAgICAgICAgdGhpcy5taW51dGUgPSBhRGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgICAgIHRoaXMuc2Vjb25kID0gYURhdGUuZ2V0U2Vjb25kcygpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9jYWNoZWRVbml4VGltZSA9IG51bGw7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB1cCB0aGUgY3VycmVudCBpbnN0YW5jZSB1c2luZyBtZW1iZXJzIGZyb20gdGhlIHBhc3NlZCBkYXRhIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHt0aW1lSW5pdH0gYURhdGEgICAgICAgICAgVGltZSBpbml0aWFsaXphdGlvblxuICAgKiBAcGFyYW0ge1RpbWV6b25lPX0gYVpvbmUgICAgICAgICBUaW1lem9uZSB0aGlzIHBvc2l0aW9uIG9jY3VycyBpblxuICAgKi9cbiAgZnJvbURhdGEoYURhdGEsIGFab25lKSB7XG4gICAgaWYgKGFEYXRhKSB7XG4gICAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoYURhdGEpKSB7XG4gICAgICAgICAgLy8gaWNhbCB0eXBlIGNhbm5vdCBiZSBzZXRcbiAgICAgICAgICBpZiAoa2V5ID09PSAnaWNhbHR5cGUnKSBjb250aW51ZTtcbiAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGFab25lKSB7XG4gICAgICB0aGlzLnpvbmUgPSBhWm9uZTtcbiAgICB9XG5cbiAgICBpZiAoYURhdGEgJiYgIShcImlzRGF0ZVwiIGluIGFEYXRhKSkge1xuICAgICAgdGhpcy5pc0RhdGUgPSAhKFwiaG91clwiIGluIGFEYXRhKTtcbiAgICB9IGVsc2UgaWYgKGFEYXRhICYmIChcImlzRGF0ZVwiIGluIGFEYXRhKSkge1xuICAgICAgdGhpcy5pc0RhdGUgPSBhRGF0YS5pc0RhdGU7XG4gICAgfVxuXG4gICAgaWYgKGFEYXRhICYmIFwidGltZXpvbmVcIiBpbiBhRGF0YSkge1xuICAgICAgbGV0IHpvbmUgPSBUaW1lem9uZVNlcnZpY2UuZ2V0KFxuICAgICAgICBhRGF0YS50aW1lem9uZVxuICAgICAgKTtcblxuICAgICAgdGhpcy56b25lID0gem9uZSB8fCBUaW1lem9uZS5sb2NhbFRpbWV6b25lO1xuICAgIH1cblxuICAgIGlmIChhRGF0YSAmJiBcInpvbmVcIiBpbiBhRGF0YSkge1xuICAgICAgdGhpcy56b25lID0gYURhdGEuem9uZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuem9uZSkge1xuICAgICAgdGhpcy56b25lID0gVGltZXpvbmUubG9jYWxUaW1lem9uZTtcbiAgICB9XG5cbiAgICB0aGlzLl9jYWNoZWRVbml4VGltZSA9IG51bGw7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRoZSBkYXkgb2Ygd2Vlay5cbiAgICogQHBhcmFtIHt3ZWVrRGF5PX0gYVdlZWtTdGFydFxuICAgKiAgICAgICAgVGhlIHdlZWsgc3RhcnQgd2Vla2RheSwgZGVmYXVsdHMgdG8gU1VOREFZXG4gICAqIEByZXR1cm4ge3dlZWtEYXl9XG4gICAqL1xuICBkYXlPZldlZWsoYVdlZWtTdGFydCkge1xuICAgIGxldCBmaXJzdERvdyA9IGFXZWVrU3RhcnQgfHwgVGltZS5TVU5EQVk7XG4gICAgbGV0IGRvd0NhY2hlS2V5ID0gKHRoaXMueWVhciA8PCAxMikgKyAodGhpcy5tb250aCA8PCA4KSArICh0aGlzLmRheSA8PCAzKSArIGZpcnN0RG93O1xuICAgIGlmIChkb3dDYWNoZUtleSBpbiBUaW1lLl9kb3dDYWNoZSkge1xuICAgICAgcmV0dXJuIFRpbWUuX2Rvd0NhY2hlW2Rvd0NhY2hlS2V5XTtcbiAgICB9XG5cbiAgICAvLyBVc2luZyBaZWxsZXIncyBhbGdvcml0aG1cbiAgICBsZXQgcSA9IHRoaXMuZGF5O1xuICAgIGxldCBtID0gdGhpcy5tb250aCArICh0aGlzLm1vbnRoIDwgMyA/IDEyIDogMCk7XG4gICAgbGV0IFkgPSB0aGlzLnllYXIgLSAodGhpcy5tb250aCA8IDMgPyAxIDogMCk7XG5cbiAgICBsZXQgaCA9IChxICsgWSArIHRydW5jKCgobSArIDEpICogMjYpIC8gMTApICsgdHJ1bmMoWSAvIDQpKTtcbiAgICB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXG4gICAgICBoICs9IHRydW5jKFkgLyAxMDApICogNiArIHRydW5jKFkgLyA0MDApO1xuICAgIH1cblxuICAgIC8vIE5vcm1hbGl6ZSB0byAxID0gd2tzdFxuICAgIGggPSAoKGggKyA3IC0gZmlyc3REb3cpICUgNykgKyAxO1xuICAgIFRpbWUuX2Rvd0NhY2hlW2Rvd0NhY2hlS2V5XSA9IGg7XG4gICAgcmV0dXJuIGg7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRoZSBkYXkgb2YgeWVhci5cbiAgICogQHJldHVybiB7TnVtYmVyfVxuICAgKi9cbiAgZGF5T2ZZZWFyKCkge1xuICAgIGxldCBpc19sZWFwID0gKFRpbWUuaXNMZWFwWWVhcih0aGlzLnllYXIpID8gMSA6IDApO1xuICAgIGxldCBkaXlwbSA9IFRpbWUuZGF5c0luWWVhclBhc3NlZE1vbnRoO1xuICAgIHJldHVybiBkaXlwbVtpc19sZWFwXVt0aGlzLm1vbnRoIC0gMV0gKyB0aGlzLmRheTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBkYXRlL3RpbWUsIHJld291bmQgdG8gdGhlIHN0YXJ0IG9mIHRoZVxuICAgKiB3ZWVrLiBUaGUgcmVzdWx0aW5nIElDQUwuVGltZSBpbnN0YW5jZSBpcyBvZiBpY2FsdHlwZSBkYXRlLCBldmVuIGlmIHRoaXNcbiAgICogaXMgYSBkYXRlLXRpbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGFXZWVrU3RhcnRcbiAgICogICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHdlZWtkYXksIGRlZmF1bHRzIHRvIFNVTkRBWVxuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgIFRoZSBzdGFydCBvZiB0aGUgd2VlayAoY2xvbmVkKVxuICAgKi9cbiAgc3RhcnRPZldlZWsoYVdlZWtTdGFydCkge1xuICAgIGxldCBmaXJzdERvdyA9IGFXZWVrU3RhcnQgfHwgVGltZS5TVU5EQVk7XG4gICAgbGV0IHJlc3VsdCA9IHRoaXMuY2xvbmUoKTtcbiAgICByZXN1bHQuZGF5IC09ICgodGhpcy5kYXlPZldlZWsoKSArIDcgLSBmaXJzdERvdykgJSA3KTtcbiAgICByZXN1bHQuaXNEYXRlID0gdHJ1ZTtcbiAgICByZXN1bHQuaG91ciA9IDA7XG4gICAgcmVzdWx0Lm1pbnV0ZSA9IDA7XG4gICAgcmVzdWx0LnNlY29uZCA9IDA7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBkYXRlL3RpbWUsIHNoaWZ0ZWQgdG8gdGhlIGVuZCBvZiB0aGUgd2Vlay5cbiAgICogVGhlIHJlc3VsdGluZyBJQ0FMLlRpbWUgaW5zdGFuY2UgaXMgb2YgaWNhbHR5cGUgZGF0ZSwgZXZlbiBpZiB0aGlzIGlzIGFcbiAgICogZGF0ZS10aW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge3dlZWtEYXk9fSBhV2Vla1N0YXJ0XG4gICAqICAgICAgICBUaGUgd2VlayBzdGFydCB3ZWVrZGF5LCBkZWZhdWx0cyB0byBTVU5EQVlcbiAgICogQHJldHVybiB7VGltZX0gICAgICBUaGUgZW5kIG9mIHRoZSB3ZWVrIChjbG9uZWQpXG4gICAqL1xuICBlbmRPZldlZWsoYVdlZWtTdGFydCkge1xuICAgIGxldCBmaXJzdERvdyA9IGFXZWVrU3RhcnQgfHwgVGltZS5TVU5EQVk7XG4gICAgbGV0IHJlc3VsdCA9IHRoaXMuY2xvbmUoKTtcbiAgICByZXN1bHQuZGF5ICs9ICg3IC0gdGhpcy5kYXlPZldlZWsoKSArIGZpcnN0RG93IC0gVGltZS5TVU5EQVkpICUgNztcbiAgICByZXN1bHQuaXNEYXRlID0gdHJ1ZTtcbiAgICByZXN1bHQuaG91ciA9IDA7XG4gICAgcmVzdWx0Lm1pbnV0ZSA9IDA7XG4gICAgcmVzdWx0LnNlY29uZCA9IDA7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBkYXRlL3RpbWUsIHJld291bmQgdG8gdGhlIHN0YXJ0IG9mIHRoZVxuICAgKiBtb250aC4gVGhlIHJlc3VsdGluZyBJQ0FMLlRpbWUgaW5zdGFuY2UgaXMgb2YgaWNhbHR5cGUgZGF0ZSwgZXZlbiBpZlxuICAgKiB0aGlzIGlzIGEgZGF0ZS10aW1lLlxuICAgKlxuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgIFRoZSBzdGFydCBvZiB0aGUgbW9udGggKGNsb25lZClcbiAgICovXG4gIHN0YXJ0T2ZNb250aCgpIHtcbiAgICBsZXQgcmVzdWx0ID0gdGhpcy5jbG9uZSgpO1xuICAgIHJlc3VsdC5kYXkgPSAxO1xuICAgIHJlc3VsdC5pc0RhdGUgPSB0cnVlO1xuICAgIHJlc3VsdC5ob3VyID0gMDtcbiAgICByZXN1bHQubWludXRlID0gMDtcbiAgICByZXN1bHQuc2Vjb25kID0gMDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IGRhdGUvdGltZSwgc2hpZnRlZCB0byB0aGUgZW5kIG9mIHRoZVxuICAgKiBtb250aC4gIFRoZSByZXN1bHRpbmcgSUNBTC5UaW1lIGluc3RhbmNlIGlzIG9mIGljYWx0eXBlIGRhdGUsIGV2ZW4gaWZcbiAgICogdGhpcyBpcyBhIGRhdGUtdGltZS5cbiAgICpcbiAgICogQHJldHVybiB7VGltZX0gICAgICBUaGUgZW5kIG9mIHRoZSBtb250aCAoY2xvbmVkKVxuICAgKi9cbiAgZW5kT2ZNb250aCgpIHtcbiAgICBsZXQgcmVzdWx0ID0gdGhpcy5jbG9uZSgpO1xuICAgIHJlc3VsdC5kYXkgPSBUaW1lLmRheXNJbk1vbnRoKHJlc3VsdC5tb250aCwgcmVzdWx0LnllYXIpO1xuICAgIHJlc3VsdC5pc0RhdGUgPSB0cnVlO1xuICAgIHJlc3VsdC5ob3VyID0gMDtcbiAgICByZXN1bHQubWludXRlID0gMDtcbiAgICByZXN1bHQuc2Vjb25kID0gMDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IGRhdGUvdGltZSwgcmV3b3VuZCB0byB0aGUgc3RhcnQgb2YgdGhlXG4gICAqIHllYXIuIFRoZSByZXN1bHRpbmcgSUNBTC5UaW1lIGluc3RhbmNlIGlzIG9mIGljYWx0eXBlIGRhdGUsIGV2ZW4gaWZcbiAgICogdGhpcyBpcyBhIGRhdGUtdGltZS5cbiAgICpcbiAgICogQHJldHVybiB7VGltZX0gICAgICBUaGUgc3RhcnQgb2YgdGhlIHllYXIgKGNsb25lZClcbiAgICovXG4gIHN0YXJ0T2ZZZWFyKCkge1xuICAgIGxldCByZXN1bHQgPSB0aGlzLmNsb25lKCk7XG4gICAgcmVzdWx0LmRheSA9IDE7XG4gICAgcmVzdWx0Lm1vbnRoID0gMTtcbiAgICByZXN1bHQuaXNEYXRlID0gdHJ1ZTtcbiAgICByZXN1bHQuaG91ciA9IDA7XG4gICAgcmVzdWx0Lm1pbnV0ZSA9IDA7XG4gICAgcmVzdWx0LnNlY29uZCA9IDA7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBkYXRlL3RpbWUsIHNoaWZ0ZWQgdG8gdGhlIGVuZCBvZiB0aGVcbiAgICogeWVhci4gIFRoZSByZXN1bHRpbmcgSUNBTC5UaW1lIGluc3RhbmNlIGlzIG9mIGljYWx0eXBlIGRhdGUsIGV2ZW4gaWZcbiAgICogdGhpcyBpcyBhIGRhdGUtdGltZS5cbiAgICpcbiAgICogQHJldHVybiB7VGltZX0gICAgICBUaGUgZW5kIG9mIHRoZSB5ZWFyIChjbG9uZWQpXG4gICAqL1xuICBlbmRPZlllYXIoKSB7XG4gICAgbGV0IHJlc3VsdCA9IHRoaXMuY2xvbmUoKTtcbiAgICByZXN1bHQuZGF5ID0gMzE7XG4gICAgcmVzdWx0Lm1vbnRoID0gMTI7XG4gICAgcmVzdWx0LmlzRGF0ZSA9IHRydWU7XG4gICAgcmVzdWx0LmhvdXIgPSAwO1xuICAgIHJlc3VsdC5taW51dGUgPSAwO1xuICAgIHJlc3VsdC5zZWNvbmQgPSAwO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogRmlyc3QgY2FsY3VsYXRlcyB0aGUgc3RhcnQgb2YgdGhlIHdlZWssIHRoZW4gcmV0dXJucyB0aGUgZGF5IG9mIHllYXIgZm9yXG4gICAqIHRoaXMgZGF0ZS4gSWYgdGhlIGRheSBmYWxscyBpbnRvIHRoZSBwcmV2aW91cyB5ZWFyLCB0aGUgZGF5IGlzIHplcm8gb3IgbmVnYXRpdmUuXG4gICAqXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGFGaXJzdERheU9mV2Vla1xuICAgKiAgICAgICAgVGhlIHdlZWsgc3RhcnQgd2Vla2RheSwgZGVmYXVsdHMgdG8gU1VOREFZXG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgIFRoZSBjYWxjdWxhdGVkIGRheSBvZiB5ZWFyXG4gICAqL1xuICBzdGFydERveVdlZWsoYUZpcnN0RGF5T2ZXZWVrKSB7XG4gICAgbGV0IGZpcnN0RG93ID0gYUZpcnN0RGF5T2ZXZWVrIHx8IFRpbWUuU1VOREFZO1xuICAgIGxldCBkZWx0YSA9IHRoaXMuZGF5T2ZXZWVrKCkgLSBmaXJzdERvdztcbiAgICBpZiAoZGVsdGEgPCAwKSBkZWx0YSArPSA3O1xuICAgIHJldHVybiB0aGlzLmRheU9mWWVhcigpIC0gZGVsdGE7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBkb21pbmljYWwgbGV0dGVyIGZvciB0aGUgY3VycmVudCB5ZWFyLiBMZXR0ZXJzIHJhbmdlIGZyb20gQSAtIEdcbiAgICogZm9yIGNvbW1vbiB5ZWFycywgYW5kIEFHIHRvIEdGIGZvciBsZWFwIHllYXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0geXIgICAgICAgICAgIFRoZSB5ZWFyIHRvIHJldHJpZXZlIHRoZSBsZXR0ZXIgZm9yXG4gICAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICAgICAgVGhlIGRvbWluaWNhbCBsZXR0ZXIuXG4gICAqL1xuICBnZXREb21pbmljYWxMZXR0ZXIoKSB7XG4gICAgcmV0dXJuIFRpbWUuZ2V0RG9taW5pY2FsTGV0dGVyKHRoaXMueWVhcik7XG4gIH1cblxuICAvKipcbiAgICogRmluZHMgdGhlIG50aFdlZWtEYXkgcmVsYXRpdmUgdG8gdGhlIGN1cnJlbnQgbW9udGggKG5vdCBkYXkpLiAgVGhlXG4gICAqIHJldHVybmVkIHZhbHVlIGlzIGEgZGF5IHJlbGF0aXZlIHRoZSBtb250aCB0aGF0IHRoaXMgbW9udGggYmVsb25ncyB0byBzb1xuICAgKiAxIHdvdWxkIGluZGljYXRlIHRoZSBmaXJzdCBvZiB0aGUgbW9udGggYW5kIDQwIHdvdWxkIGluZGljYXRlIGEgZGF5IGluXG4gICAqIHRoZSBmb2xsb3dpbmcgbW9udGguXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBhRGF5T2ZXZWVrICAgRGF5IG9mIHRoZSB3ZWVrIHNlZSB0aGUgZGF5IG5hbWUgY29uc3RhbnRzXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBhUG9zICAgICAgICAgTnRoIG9jY3VycmVuY2Ugb2YgYSBnaXZlbiB3ZWVrIGRheSB2YWx1ZXNcbiAgICogICAgICAgIG9mIDEgYW5kIDAgYm90aCBpbmRpY2F0ZSB0aGUgZmlyc3Qgd2Vla2RheSBvZiB0aGF0IHR5cGUuIGFQb3MgbWF5XG4gICAqICAgICAgICBiZSBlaXRoZXIgcG9zaXRpdmUgb3IgbmVnYXRpdmVcbiAgICpcbiAgICogQHJldHVybiB7TnVtYmVyfSBudW1lcmljIHZhbHVlIGluZGljYXRpbmcgYSBkYXkgcmVsYXRpdmVcbiAgICogICAgICAgICAgICAgICAgICAgdG8gdGhlIGN1cnJlbnQgbW9udGggb2YgdGhpcyB0aW1lIG9iamVjdFxuICAgKi9cbiAgbnRoV2Vla0RheShhRGF5T2ZXZWVrLCBhUG9zKSB7XG4gICAgbGV0IGRheXNJbk1vbnRoID0gVGltZS5kYXlzSW5Nb250aCh0aGlzLm1vbnRoLCB0aGlzLnllYXIpO1xuICAgIGxldCB3ZWVrZGF5O1xuICAgIGxldCBwb3MgPSBhUG9zO1xuXG4gICAgbGV0IHN0YXJ0ID0gMDtcblxuICAgIGxldCBvdGhlckRheSA9IHRoaXMuY2xvbmUoKTtcblxuICAgIGlmIChwb3MgPj0gMCkge1xuICAgICAgb3RoZXJEYXkuZGF5ID0gMTtcblxuICAgICAgLy8gYmVjYXVzZSAwIG1lYW5zIG5vIHBvc2l0aW9uIGhhcyBiZWVuIGdpdmVuXG4gICAgICAvLyAxIGFuZCAwIGluZGljYXRlIHRoZSBzYW1lIGRheS5cbiAgICAgIGlmIChwb3MgIT0gMCkge1xuICAgICAgICAvLyByZW1vdmUgdGhlIGV4dHJhIG51bWVyaWMgdmFsdWVcbiAgICAgICAgcG9zLS07XG4gICAgICB9XG5cbiAgICAgIC8vIHNldCBjdXJyZW50IHN0YXJ0IG9mZnNldCB0byBjdXJyZW50IGRheS5cbiAgICAgIHN0YXJ0ID0gb3RoZXJEYXkuZGF5O1xuXG4gICAgICAvLyBmaW5kIHRoZSBjdXJyZW50IGRheSBvZiB3ZWVrXG4gICAgICBsZXQgc3RhcnREb3cgPSBvdGhlckRheS5kYXlPZldlZWsoKTtcblxuICAgICAgLy8gY2FsY3VsYXRlIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gY3VycmVudFxuICAgICAgLy8gZGF5IG9mIHRoZSB3ZWVrIGFuZCBkZXNpcmVkIGRheSBvZiB0aGUgd2Vla1xuICAgICAgbGV0IG9mZnNldCA9IGFEYXlPZldlZWsgLSBzdGFydERvdztcblxuXG4gICAgICAvLyBpZiB0aGUgb2Zmc2V0IGdvZXMgaW50byB0aGUgcGFzdFxuICAgICAgLy8gd2VlayB3ZSBhZGQgNyBzbyBpdCBnb2VzIGludG8gdGhlIG5leHRcbiAgICAgIC8vIHdlZWsuIFdlIG9ubHkgd2FudCB0byBnbyBmb3J3YXJkIGluIHRpbWUgaGVyZS5cbiAgICAgIGlmIChvZmZzZXQgPCAwKVxuICAgICAgICAvLyB0aGlzIGlzIHJlYWxseSBpbXBvcnRhbnQgb3RoZXJ3aXNlIHdlIHdvdWxkXG4gICAgICAgIC8vIGVuZCB1cCB3aXRoIGRhdGVzIGZyb20gaW4gdGhlIHBhc3QuXG4gICAgICAgIG9mZnNldCArPSA3O1xuXG4gICAgICAvLyBhZGQgb2Zmc2V0IHRvIHN0YXJ0IHNvIHN0YXJ0IGlzIHRoZSBzYW1lXG4gICAgICAvLyBkYXkgb2YgdGhlIHdlZWsgYXMgdGhlIGRlc2lyZWQgZGF5IG9mIHdlZWsuXG4gICAgICBzdGFydCArPSBvZmZzZXQ7XG5cbiAgICAgIC8vIGJlY2F1c2Ugd2UgYXJlIGdvaW5nIHRvIGFkZCAoYW5kIG11bHRpcGx5KVxuICAgICAgLy8gdGhlIG51bWVyaWMgdmFsdWUgb2YgdGhlIGRheSB3ZSBzdWJ0cmFjdCBpdFxuICAgICAgLy8gZnJvbSB0aGUgc3RhcnQgcG9zaXRpb24gc28gbm90IHRvIGFkZCBpdCB0d2ljZS5cbiAgICAgIHN0YXJ0IC09IGFEYXlPZldlZWs7XG5cbiAgICAgIC8vIHNldCB3ZWVrIGRheVxuICAgICAgd2Vla2RheSA9IGFEYXlPZldlZWs7XG4gICAgfSBlbHNlIHtcblxuICAgICAgLy8gdGhlbiB3ZSBzZXQgaXQgdG8gdGhlIGxhc3QgZGF5IGluIHRoZSBjdXJyZW50IG1vbnRoXG4gICAgICBvdGhlckRheS5kYXkgPSBkYXlzSW5Nb250aDtcblxuICAgICAgLy8gZmluZCB0aGUgZW5kcyB3ZWVrZGF5XG4gICAgICBsZXQgZW5kRG93ID0gb3RoZXJEYXkuZGF5T2ZXZWVrKCk7XG5cbiAgICAgIHBvcysrO1xuXG4gICAgICB3ZWVrZGF5ID0gKGVuZERvdyAtIGFEYXlPZldlZWspO1xuXG4gICAgICBpZiAod2Vla2RheSA8IDApIHtcbiAgICAgICAgd2Vla2RheSArPSA3O1xuICAgICAgfVxuXG4gICAgICB3ZWVrZGF5ID0gZGF5c0luTW9udGggLSB3ZWVrZGF5O1xuICAgIH1cblxuICAgIHdlZWtkYXkgKz0gcG9zICogNztcblxuICAgIHJldHVybiBzdGFydCArIHdlZWtkYXk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGN1cnJlbnQgdGltZSBpcyB0aGUgbnRoIHdlZWtkYXksIHJlbGF0aXZlIHRvIHRoZSBjdXJyZW50XG4gICAqIG1vbnRoLiAgV2lsbCBhbHdheXMgcmV0dXJuIGZhbHNlIHdoZW4gcnVsZSByZXNvbHZlcyBvdXRzaWRlIG9mIGN1cnJlbnRcbiAgICogbW9udGguXG4gICAqXG4gICAqIEBwYXJhbSB7d2Vla0RheX0gYURheU9mV2VlayAgICAgICAgICAgICAgICAgRGF5IG9mIHdlZWsgdG8gY2hlY2tcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFQb3MgICAgICAgICAgICAgICAgICAgICAgICBSZWxhdGl2ZSBwb3NpdGlvblxuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgICAgICAgICAgICAgICAgICAgIFRydWUsIGlmIGl0IGlzIHRoZSBudGggd2Vla2RheVxuICAgKi9cbiAgaXNOdGhXZWVrRGF5KGFEYXlPZldlZWssIGFQb3MpIHtcbiAgICBsZXQgZG93ID0gdGhpcy5kYXlPZldlZWsoKTtcblxuICAgIGlmIChhUG9zID09PSAwICYmIGRvdyA9PT0gYURheU9mV2Vlaykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gZ2V0IHBvc1xuICAgIGxldCBkYXkgPSB0aGlzLm50aFdlZWtEYXkoYURheU9mV2VlaywgYVBvcyk7XG5cbiAgICBpZiAoZGF5ID09PSB0aGlzLmRheSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgdGhlIElTTyA4NjAxIHdlZWsgbnVtYmVyLiBUaGUgZmlyc3Qgd2VlayBvZiBhIHllYXIgaXMgdGhlXG4gICAqIHdlZWsgdGhhdCBjb250YWlucyB0aGUgZmlyc3QgVGh1cnNkYXkuIFRoZSB5ZWFyIGNhbiBoYXZlIDUzIHdlZWtzLCBpZlxuICAgKiBKYW51YXJ5IDFzdCBpcyBhIEZyaWRheS5cbiAgICpcbiAgICogTm90ZSB0aGVyZSBhcmUgcmVnaW9ucyB3aGVyZSB0aGUgZmlyc3Qgd2VlayBvZiB0aGUgeWVhciBpcyB0aGUgb25lIHRoYXRcbiAgICogc3RhcnRzIG9uIEphbnVhcnkgMXN0LCB3aGljaCBtYXkgb2Zmc2V0IHRoZSB3ZWVrIG51bWJlci4gQWxzbywgaWYgYVxuICAgKiBkaWZmZXJlbnQgd2VlayBzdGFydCBpcyBzcGVjaWZpZWQsIHRoaXMgd2lsbCBhbHNvIGFmZmVjdCB0aGUgd2Vla1xuICAgKiBudW1iZXIuXG4gICAqXG4gICAqIEBzZWUgVGltZS53ZWVrT25lU3RhcnRzXG4gICAqIEBwYXJhbSB7d2Vla0RheX0gYVdlZWtTdGFydCAgICAgICAgICAgICAgICAgIFRoZSB3ZWVrZGF5IHRoZSB3ZWVrIHN0YXJ0cyB3aXRoXG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBJU08gd2VlayBudW1iZXJcbiAgICovXG4gIHdlZWtOdW1iZXIoYVdlZWtTdGFydCkge1xuICAgIGxldCB3bkNhY2hlS2V5ID0gKHRoaXMueWVhciA8PCAxMikgKyAodGhpcy5tb250aCA8PCA4KSArICh0aGlzLmRheSA8PCAzKSArIGFXZWVrU3RhcnQ7XG4gICAgaWYgKHduQ2FjaGVLZXkgaW4gVGltZS5fd25DYWNoZSkge1xuICAgICAgcmV0dXJuIFRpbWUuX3duQ2FjaGVbd25DYWNoZUtleV07XG4gICAgfVxuICAgIC8vIFRoaXMgZnVuY3Rpb24gY291cnRlc3R5IG9mIEp1bGlhbiBCdWNrbmFsbCwgcHVibGlzaGVkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICAgIC8vIGh0dHA6Ly93d3cuYm95ZXQuY29tL2FydGljbGVzL3B1Ymxpc2hlZGFydGljbGVzL2NhbGN1bGF0aW5ndGhlaXNvd2Vla251bWIuaHRtbFxuICAgIC8vIHBsdXMgc29tZSBmaXhlcyB0byBiZSBhYmxlIHRvIHVzZSBkaWZmZXJlbnQgd2VlayBzdGFydHMuXG4gICAgbGV0IHdlZWsxO1xuXG4gICAgbGV0IGR0ID0gdGhpcy5jbG9uZSgpO1xuICAgIGR0LmlzRGF0ZSA9IHRydWU7XG4gICAgbGV0IGlzb3llYXIgPSB0aGlzLnllYXI7XG5cbiAgICBpZiAoZHQubW9udGggPT0gMTIgJiYgZHQuZGF5ID4gMjUpIHtcbiAgICAgIHdlZWsxID0gVGltZS53ZWVrT25lU3RhcnRzKGlzb3llYXIgKyAxLCBhV2Vla1N0YXJ0KTtcbiAgICAgIGlmIChkdC5jb21wYXJlKHdlZWsxKSA8IDApIHtcbiAgICAgICAgd2VlazEgPSBUaW1lLndlZWtPbmVTdGFydHMoaXNveWVhciwgYVdlZWtTdGFydCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpc295ZWFyKys7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdlZWsxID0gVGltZS53ZWVrT25lU3RhcnRzKGlzb3llYXIsIGFXZWVrU3RhcnQpO1xuICAgICAgaWYgKGR0LmNvbXBhcmUod2VlazEpIDwgMCkge1xuICAgICAgICB3ZWVrMSA9IFRpbWUud2Vla09uZVN0YXJ0cygtLWlzb3llYXIsIGFXZWVrU3RhcnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBkYXlzQmV0d2VlbiA9IChkdC5zdWJ0cmFjdERhdGUod2VlazEpLnRvU2Vjb25kcygpIC8gODY0MDApO1xuICAgIGxldCBhbnN3ZXIgPSB0cnVuYyhkYXlzQmV0d2VlbiAvIDcpICsgMTtcbiAgICBUaW1lLl93bkNhY2hlW3duQ2FjaGVLZXldID0gYW5zd2VyO1xuICAgIHJldHVybiBhbnN3ZXI7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyB0aGUgZHVyYXRpb24gdG8gdGhlIGN1cnJlbnQgdGltZS4gVGhlIGluc3RhbmNlIGlzIG1vZGlmaWVkIGluXG4gICAqIHBsYWNlLlxuICAgKlxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufSBhRHVyYXRpb24gICAgICAgICBUaGUgZHVyYXRpb24gdG8gYWRkXG4gICAqL1xuICBhZGREdXJhdGlvbihhRHVyYXRpb24pIHtcbiAgICBsZXQgbXVsdCA9IChhRHVyYXRpb24uaXNOZWdhdGl2ZSA/IC0xIDogMSk7XG5cbiAgICAvLyBiZWNhdXNlIG9mIHRoZSBkdXJhdGlvbiBvcHRpbWl6YXRpb25zIGl0IGlzIG11Y2hcbiAgICAvLyBtb3JlIGVmZmljaWVudCB0byBncmFiIGFsbCB0aGUgdmFsdWVzIHVwIGZyb250XG4gICAgLy8gdGhlbiBzZXQgdGhlbSBkaXJlY3RseSAod2hpY2ggd2lsbCBhdm9pZCBhIG5vcm1hbGl6YXRpb24gY2FsbCkuXG4gICAgLy8gU28gd2UgZG9uJ3QgYWN0dWFsbHkgbm9ybWFsaXplIHVudGlsIHdlIG5lZWQgaXQuXG4gICAgbGV0IHNlY29uZCA9IHRoaXMuc2Vjb25kO1xuICAgIGxldCBtaW51dGUgPSB0aGlzLm1pbnV0ZTtcbiAgICBsZXQgaG91ciA9IHRoaXMuaG91cjtcbiAgICBsZXQgZGF5ID0gdGhpcy5kYXk7XG5cbiAgICBzZWNvbmQgKz0gbXVsdCAqIGFEdXJhdGlvbi5zZWNvbmRzO1xuICAgIG1pbnV0ZSArPSBtdWx0ICogYUR1cmF0aW9uLm1pbnV0ZXM7XG4gICAgaG91ciArPSBtdWx0ICogYUR1cmF0aW9uLmhvdXJzO1xuICAgIGRheSArPSBtdWx0ICogYUR1cmF0aW9uLmRheXM7XG4gICAgZGF5ICs9IG11bHQgKiA3ICogYUR1cmF0aW9uLndlZWtzO1xuXG4gICAgdGhpcy5zZWNvbmQgPSBzZWNvbmQ7XG4gICAgdGhpcy5taW51dGUgPSBtaW51dGU7XG4gICAgdGhpcy5ob3VyID0gaG91cjtcbiAgICB0aGlzLmRheSA9IGRheTtcblxuICAgIHRoaXMuX2NhY2hlZFVuaXhUaW1lID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJ0cmFjdCB0aGUgZGF0ZSBkZXRhaWxzIChfZXhjbHVkaW5nXyB0aW1lem9uZSkuICBVc2VmdWwgZm9yIGZpbmRpbmdcbiAgICogdGhlIHJlbGF0aXZlIGRpZmZlcmVuY2UgYmV0d2VlbiB0d28gdGltZSBvYmplY3RzIGV4Y2x1ZGluZyB0aGVpclxuICAgKiB0aW1lem9uZSBkaWZmZXJlbmNlcy5cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lfSBhRGF0ZSAgICAgVGhlIGRhdGUgdG8gc3VidHJhY3RcbiAgICogQHJldHVybiB7RHVyYXRpb259ICAgICAgVGhlIGRpZmZlcmVuY2UgYXMgYSBkdXJhdGlvblxuICAgKi9cbiAgc3VidHJhY3REYXRlKGFEYXRlKSB7XG4gICAgbGV0IHVuaXhUaW1lID0gdGhpcy50b1VuaXhUaW1lKCkgKyB0aGlzLnV0Y09mZnNldCgpO1xuICAgIGxldCBvdGhlciA9IGFEYXRlLnRvVW5peFRpbWUoKSArIGFEYXRlLnV0Y09mZnNldCgpO1xuICAgIHJldHVybiBEdXJhdGlvbi5mcm9tU2Vjb25kcyh1bml4VGltZSAtIG90aGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJ0cmFjdCB0aGUgZGF0ZSBkZXRhaWxzLCB0YWtpbmcgdGltZXpvbmVzIGludG8gYWNjb3VudC5cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lfSBhRGF0ZSAgVGhlIGRhdGUgdG8gc3VidHJhY3RcbiAgICogQHJldHVybiB7RHVyYXRpb259ICAgVGhlIGRpZmZlcmVuY2UgaW4gZHVyYXRpb25cbiAgICovXG4gIHN1YnRyYWN0RGF0ZVR6KGFEYXRlKSB7XG4gICAgbGV0IHVuaXhUaW1lID0gdGhpcy50b1VuaXhUaW1lKCk7XG4gICAgbGV0IG90aGVyID0gYURhdGUudG9Vbml4VGltZSgpO1xuICAgIHJldHVybiBEdXJhdGlvbi5mcm9tU2Vjb25kcyh1bml4VGltZSAtIG90aGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wYXJlcyB0aGUgSUNBTC5UaW1lIGluc3RhbmNlIHdpdGggYW5vdGhlciBvbmUsIG9yIGEgcGVyaW9kLlxuICAgKlxuICAgKiBAcGFyYW0ge1RpbWV8UGVyaW9kfSBhT3RoZXIgICAgICAgICAgICAgICAgICBUaGUgaW5zdGFuY2UgdG8gY29tcGFyZSB3aXRoXG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0xLCAwIG9yIDEgZm9yIGxlc3MvZXF1YWwvZ3JlYXRlclxuICAgKi9cbiAgY29tcGFyZShvdGhlcikge1xuICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIFBlcmlvZCkge1xuICAgICAgcmV0dXJuIC0xICogb3RoZXIuY29tcGFyZSh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGEgPSB0aGlzLnRvVW5peFRpbWUoKTtcbiAgICAgIGxldCBiID0gb3RoZXIudG9Vbml4VGltZSgpO1xuXG4gICAgICBpZiAoYSA+IGIpIHJldHVybiAxO1xuICAgICAgaWYgKGIgPiBhKSByZXR1cm4gLTE7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29tcGFyZXMgb25seSB0aGUgZGF0ZSBwYXJ0IG9mIHRoaXMgaW5zdGFuY2Ugd2l0aCBhbm90aGVyIG9uZS5cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lfSBvdGhlciAgICAgICAgICAgICAgICAgIFRoZSBpbnN0YW5jZSB0byBjb21wYXJlIHdpdGhcbiAgICogQHBhcmFtIHtUaW1lem9uZX0gdHogICAgICAgICAgICAgICAgIFRoZSB0aW1lem9uZSB0byBjb21wYXJlIGluXG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAgICAgICAgICAtMSwgMCBvciAxIGZvciBsZXNzL2VxdWFsL2dyZWF0ZXJcbiAgICovXG4gIGNvbXBhcmVEYXRlT25seVR6KG90aGVyLCB0eikge1xuICAgIGxldCBhID0gdGhpcy5jb252ZXJ0VG9ab25lKHR6KTtcbiAgICBsZXQgYiA9IG90aGVyLmNvbnZlcnRUb1pvbmUodHopO1xuICAgIGxldCByYyA9IDA7XG5cbiAgICBpZiAoKHJjID0gVGltZS5fY21wX2F0dHIoYSwgYiwgXCJ5ZWFyXCIpKSAhPSAwKSByZXR1cm4gcmM7XG4gICAgaWYgKChyYyA9IFRpbWUuX2NtcF9hdHRyKGEsIGIsIFwibW9udGhcIikpICE9IDApIHJldHVybiByYztcbiAgICBpZiAoKHJjID0gVGltZS5fY21wX2F0dHIoYSwgYiwgXCJkYXlcIikpICE9IDApIHJldHVybiByYztcblxuICAgIHJldHVybiByYztcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IHRoZSBpbnN0YW5jZSBpbnRvIGFub3RoZXIgdGltZXpvbmUuIFRoZSByZXR1cm5lZCBJQ0FMLlRpbWVcbiAgICogaW5zdGFuY2UgaXMgYWx3YXlzIGEgY29weS5cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lem9uZX0gem9uZSAgICAgIFRoZSB6b25lIHRvIGNvbnZlcnQgdG9cbiAgICogQHJldHVybiB7VGltZX0gICAgICAgICAgICAgIFRoZSBjb3B5LCBjb252ZXJ0ZWQgdG8gdGhlIHpvbmVcbiAgICovXG4gIGNvbnZlcnRUb1pvbmUoem9uZSkge1xuICAgIGxldCBjb3B5ID0gdGhpcy5jbG9uZSgpO1xuICAgIGxldCB6b25lX2VxdWFscyA9ICh0aGlzLnpvbmUudHppZCA9PSB6b25lLnR6aWQpO1xuXG4gICAgaWYgKCF0aGlzLmlzRGF0ZSAmJiAhem9uZV9lcXVhbHMpIHtcbiAgICAgIFRpbWV6b25lLmNvbnZlcnRfdGltZShjb3B5LCB0aGlzLnpvbmUsIHpvbmUpO1xuICAgIH1cblxuICAgIGNvcHkuem9uZSA9IHpvbmU7XG4gICAgcmV0dXJuIGNvcHk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlcyB0aGUgVVRDIG9mZnNldCBvZiB0aGUgY3VycmVudCBkYXRlL3RpbWUgaW4gdGhlIHRpbWV6b25lIGl0IGlzXG4gICAqIGluLlxuICAgKlxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICBVVEMgb2Zmc2V0IGluIHNlY29uZHNcbiAgICovXG4gIHV0Y09mZnNldCgpIHtcbiAgICBpZiAodGhpcy56b25lID09IFRpbWV6b25lLmxvY2FsVGltZXpvbmUgfHxcbiAgICAgICAgdGhpcy56b25lID09IFRpbWV6b25lLnV0Y1RpbWV6b25lKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuem9uZS51dGNPZmZzZXQodGhpcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gUkZDIDU1NDUgY29tcGxpYW50IGljYWwgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBvYmplY3QuXG4gICAqXG4gICAqIEByZXR1cm4ge1N0cmluZ30gaWNhbCBkYXRlL2RhdGUtdGltZVxuICAgKi9cbiAgdG9JQ0FMU3RyaW5nKCkge1xuICAgIGxldCBzdHJpbmcgPSB0aGlzLnRvU3RyaW5nKCk7XG5cbiAgICBpZiAoc3RyaW5nLmxlbmd0aCA+IDEwKSB7XG4gICAgICByZXR1cm4gZGVzaWduLmljYWxlbmRhci52YWx1ZVsnZGF0ZS10aW1lJ10udG9JQ0FMKHN0cmluZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBkZXNpZ24uaWNhbGVuZGFyLnZhbHVlLmRhdGUudG9JQ0FMKHN0cmluZyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBkYXRlL3RpbWUsIGluIGpDYWwgZm9ybVxuICAgKiAoaW5jbHVkaW5nIDogYW5kIC0gc2VwYXJhdG9ycykuXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIHRvU3RyaW5nKCkge1xuICAgIGxldCByZXN1bHQgPSB0aGlzLnllYXIgKyAnLScgK1xuICAgICAgICAgICAgICAgICBwYWQyKHRoaXMubW9udGgpICsgJy0nICtcbiAgICAgICAgICAgICAgICAgcGFkMih0aGlzLmRheSk7XG5cbiAgICBpZiAoIXRoaXMuaXNEYXRlKSB7XG4gICAgICAgIHJlc3VsdCArPSAnVCcgKyBwYWQyKHRoaXMuaG91cikgKyAnOicgK1xuICAgICAgICAgICAgICAgICAgcGFkMih0aGlzLm1pbnV0ZSkgKyAnOicgK1xuICAgICAgICAgICAgICAgICAgcGFkMih0aGlzLnNlY29uZCk7XG5cbiAgICAgIGlmICh0aGlzLnpvbmUgPT09IFRpbWV6b25lLnV0Y1RpbWV6b25lKSB7XG4gICAgICAgIHJlc3VsdCArPSAnWic7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0aGUgY3VycmVudCBpbnN0YW5jZSB0byBhIEphdmFzY3JpcHQgZGF0ZVxuICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgKi9cbiAgdG9KU0RhdGUoKSB7XG4gICAgaWYgKHRoaXMuem9uZSA9PSBUaW1lem9uZS5sb2NhbFRpbWV6b25lKSB7XG4gICAgICBpZiAodGhpcy5pc0RhdGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMueWVhciwgdGhpcy5tb250aCAtIDEsIHRoaXMuZGF5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnllYXIsIHRoaXMubW9udGggLSAxLCB0aGlzLmRheSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaG91ciwgdGhpcy5taW51dGUsIHRoaXMuc2Vjb25kLCAwKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMudG9Vbml4VGltZSgpICogMTAwMCk7XG4gICAgfVxuICB9XG5cbiAgX25vcm1hbGl6ZSgpIHtcbiAgICBpZiAodGhpcy5fdGltZS5pc0RhdGUpIHtcbiAgICAgIHRoaXMuX3RpbWUuaG91ciA9IDA7XG4gICAgICB0aGlzLl90aW1lLm1pbnV0ZSA9IDA7XG4gICAgICB0aGlzLl90aW1lLnNlY29uZCA9IDA7XG4gICAgfVxuICAgIHRoaXMuYWRqdXN0KDAsIDAsIDAsIDApO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQWRqdXN0IHRoZSBkYXRlL3RpbWUgYnkgdGhlIGdpdmVuIG9mZnNldFxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gYUV4dHJhRGF5cyAgICAgICBUaGUgZXh0cmEgYW1vdW50IG9mIGRheXNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFFeHRyYUhvdXJzICAgICAgVGhlIGV4dHJhIGFtb3VudCBvZiBob3Vyc1xuICAgKiBAcGFyYW0ge051bWJlcn0gYUV4dHJhTWludXRlcyAgICBUaGUgZXh0cmEgYW1vdW50IG9mIG1pbnV0ZXNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFFeHRyYVNlY29uZHMgICAgVGhlIGV4dHJhIGFtb3VudCBvZiBzZWNvbmRzXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYVRpbWUgICAgICAgICAgIFRoZSB0aW1lIHRvIGFkanVzdCwgZGVmYXVsdHMgdG8gdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudCBpbnN0YW5jZS5cbiAgICovXG4gIGFkanVzdChhRXh0cmFEYXlzLCBhRXh0cmFIb3VycywgYUV4dHJhTWludXRlcywgYUV4dHJhU2Vjb25kcywgYVRpbWUpIHtcblxuICAgIGxldCBtaW51dGVzT3ZlcmZsb3csIGhvdXJzT3ZlcmZsb3csXG4gICAgICAgIGRheXNPdmVyZmxvdyA9IDAsIHllYXJzT3ZlcmZsb3cgPSAwO1xuXG4gICAgbGV0IHNlY29uZCwgbWludXRlLCBob3VyLCBkYXk7XG4gICAgbGV0IGRheXNJbk1vbnRoO1xuXG4gICAgbGV0IHRpbWUgPSBhVGltZSB8fCB0aGlzLl90aW1lO1xuXG4gICAgaWYgKCF0aW1lLmlzRGF0ZSkge1xuICAgICAgc2Vjb25kID0gdGltZS5zZWNvbmQgKyBhRXh0cmFTZWNvbmRzO1xuICAgICAgdGltZS5zZWNvbmQgPSBzZWNvbmQgJSA2MDtcbiAgICAgIG1pbnV0ZXNPdmVyZmxvdyA9IHRydW5jKHNlY29uZCAvIDYwKTtcbiAgICAgIGlmICh0aW1lLnNlY29uZCA8IDApIHtcbiAgICAgICAgdGltZS5zZWNvbmQgKz0gNjA7XG4gICAgICAgIG1pbnV0ZXNPdmVyZmxvdy0tO1xuICAgICAgfVxuXG4gICAgICBtaW51dGUgPSB0aW1lLm1pbnV0ZSArIGFFeHRyYU1pbnV0ZXMgKyBtaW51dGVzT3ZlcmZsb3c7XG4gICAgICB0aW1lLm1pbnV0ZSA9IG1pbnV0ZSAlIDYwO1xuICAgICAgaG91cnNPdmVyZmxvdyA9IHRydW5jKG1pbnV0ZSAvIDYwKTtcbiAgICAgIGlmICh0aW1lLm1pbnV0ZSA8IDApIHtcbiAgICAgICAgdGltZS5taW51dGUgKz0gNjA7XG4gICAgICAgIGhvdXJzT3ZlcmZsb3ctLTtcbiAgICAgIH1cblxuICAgICAgaG91ciA9IHRpbWUuaG91ciArIGFFeHRyYUhvdXJzICsgaG91cnNPdmVyZmxvdztcblxuICAgICAgdGltZS5ob3VyID0gaG91ciAlIDI0O1xuICAgICAgZGF5c092ZXJmbG93ID0gdHJ1bmMoaG91ciAvIDI0KTtcbiAgICAgIGlmICh0aW1lLmhvdXIgPCAwKSB7XG4gICAgICAgIHRpbWUuaG91ciArPSAyNDtcbiAgICAgICAgZGF5c092ZXJmbG93LS07XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICAvLyBBZGp1c3QgbW9udGggYW5kIHllYXIgZmlyc3QsIGJlY2F1c2Ugd2UgbmVlZCB0byBrbm93IHdoYXQgbW9udGggdGhlIGRheVxuICAgIC8vIGlzIGluIGJlZm9yZSBhZGp1c3RpbmcgaXQuXG4gICAgaWYgKHRpbWUubW9udGggPiAxMikge1xuICAgICAgeWVhcnNPdmVyZmxvdyA9IHRydW5jKCh0aW1lLm1vbnRoIC0gMSkgLyAxMik7XG4gICAgfSBlbHNlIGlmICh0aW1lLm1vbnRoIDwgMSkge1xuICAgICAgeWVhcnNPdmVyZmxvdyA9IHRydW5jKHRpbWUubW9udGggLyAxMikgLSAxO1xuICAgIH1cblxuICAgIHRpbWUueWVhciArPSB5ZWFyc092ZXJmbG93O1xuICAgIHRpbWUubW9udGggLT0gMTIgKiB5ZWFyc092ZXJmbG93O1xuXG4gICAgLy8gTm93IHRha2UgY2FyZSBvZiB0aGUgZGF5cyAoYW5kIGFkanVzdCBtb250aCBpZiBuZWVkZWQpXG4gICAgZGF5ID0gdGltZS5kYXkgKyBhRXh0cmFEYXlzICsgZGF5c092ZXJmbG93O1xuXG4gICAgaWYgKGRheSA+IDApIHtcbiAgICAgIGZvciAoOzspIHtcbiAgICAgICAgZGF5c0luTW9udGggPSBUaW1lLmRheXNJbk1vbnRoKHRpbWUubW9udGgsIHRpbWUueWVhcik7XG4gICAgICAgIGlmIChkYXkgPD0gZGF5c0luTW9udGgpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHRpbWUubW9udGgrKztcbiAgICAgICAgaWYgKHRpbWUubW9udGggPiAxMikge1xuICAgICAgICAgIHRpbWUueWVhcisrO1xuICAgICAgICAgIHRpbWUubW9udGggPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF5IC09IGRheXNJbk1vbnRoO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB3aGlsZSAoZGF5IDw9IDApIHtcbiAgICAgICAgaWYgKHRpbWUubW9udGggPT0gMSkge1xuICAgICAgICAgIHRpbWUueWVhci0tO1xuICAgICAgICAgIHRpbWUubW9udGggPSAxMjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aW1lLm1vbnRoLS07XG4gICAgICAgIH1cblxuICAgICAgICBkYXkgKz0gVGltZS5kYXlzSW5Nb250aCh0aW1lLm1vbnRoLCB0aW1lLnllYXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRpbWUuZGF5ID0gZGF5O1xuXG4gICAgdGhpcy5fY2FjaGVkVW5peFRpbWUgPSBudWxsO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgdGhlIGN1cnJlbnQgaW5zdGFuY2UgZnJvbSB1bml4IHRpbWUsIHRoZSBudW1iZXIgb2Ygc2Vjb25kcyBzaW5jZVxuICAgKiBKYW51YXJ5IDFzdCwgMTk3MC5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHNlY29uZHMgICAgICBUaGUgc2Vjb25kcyB0byBzZXQgdXAgd2l0aFxuICAgKi9cbiAgZnJvbVVuaXhUaW1lKHNlY29uZHMpIHtcbiAgICB0aGlzLnpvbmUgPSBUaW1lem9uZS51dGNUaW1lem9uZTtcbiAgICAvLyBXZSBjb3VsZCB1c2UgYGZyb21KU0RhdGVgIGhlcmUsIGJ1dCB0aGlzIGlzIGFib3V0IHR3aWNlIGFzIGZhc3QuXG4gICAgLy8gV2UgY291bGQgYWxzbyBjbG9uZSBgZXBvY2hUaW1lYCBhbmQgdXNlIGBhZGp1c3RgIGZvciBhIG1vcmVcbiAgICAvLyBpY2FsLmpzLWNlbnRyaWMgYXBwcm9hY2gsIGJ1dCB0aGlzIGlzIGFib3V0IDEwMCB0aW1lcyBhcyBmYXN0LlxuICAgIGxldCBkYXRlID0gbmV3IERhdGUoc2Vjb25kcyAqIDEwMDApO1xuICAgIHRoaXMueWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgICB0aGlzLm1vbnRoID0gZGF0ZS5nZXRVVENNb250aCgpICsgMTtcbiAgICB0aGlzLmRheSA9IGRhdGUuZ2V0VVRDRGF0ZSgpO1xuICAgIGlmICh0aGlzLl90aW1lLmlzRGF0ZSkge1xuICAgICAgdGhpcy5ob3VyID0gMDtcbiAgICAgIHRoaXMubWludXRlID0gMDtcbiAgICAgIHRoaXMuc2Vjb25kID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ob3VyID0gZGF0ZS5nZXRVVENIb3VycygpO1xuICAgICAgdGhpcy5taW51dGUgPSBkYXRlLmdldFVUQ01pbnV0ZXMoKTtcbiAgICAgIHRoaXMuc2Vjb25kID0gZGF0ZS5nZXRVVENTZWNvbmRzKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fY2FjaGVkVW5peFRpbWUgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIHRoZSBjdXJyZW50IGluc3RhbmNlIHRvIHNlY29uZHMgc2luY2UgSmFudWFyeSAxc3QgMTk3MC5cbiAgICpcbiAgICogQHJldHVybiB7TnVtYmVyfSAgICAgICAgIFNlY29uZHMgc2luY2UgMTk3MFxuICAgKi9cbiAgdG9Vbml4VGltZSgpIHtcbiAgICBpZiAodGhpcy5fY2FjaGVkVW5peFRpbWUgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRVbml4VGltZTtcbiAgICB9XG4gICAgbGV0IG9mZnNldCA9IHRoaXMudXRjT2Zmc2V0KCk7XG5cbiAgICAvLyB3ZSB1c2UgdGhlIG9mZnNldCB0cmljayB0byBlbnN1cmVcbiAgICAvLyB0aGF0IHdlIGFyZSBnZXR0aW5nIHRoZSBhY3R1YWwgVVRDIHRpbWVcbiAgICBsZXQgbXMgPSBEYXRlLlVUQyhcbiAgICAgIHRoaXMueWVhcixcbiAgICAgIHRoaXMubW9udGggLSAxLFxuICAgICAgdGhpcy5kYXksXG4gICAgICB0aGlzLmhvdXIsXG4gICAgICB0aGlzLm1pbnV0ZSxcbiAgICAgIHRoaXMuc2Vjb25kIC0gb2Zmc2V0XG4gICAgKTtcblxuICAgIC8vIHNlY29uZHNcbiAgICB0aGlzLl9jYWNoZWRVbml4VGltZSA9IG1zIC8gMTAwMDtcbiAgICByZXR1cm4gdGhpcy5fY2FjaGVkVW5peFRpbWU7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgdGltZSB0byBpbnRvIE9iamVjdCB3aGljaCBjYW4gYmUgc2VyaWFsaXplZCB0aGVuIHJlLWNyZWF0ZWRcbiAgICogdXNpbmcgdGhlIGNvbnN0cnVjdG9yLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAvLyB0b0pTT04gd2lsbCBhdXRvbWF0aWNhbGx5IGJlIGNhbGxlZFxuICAgKiB2YXIganNvbiA9IEpTT04uc3RyaW5naWZ5KG15dGltZSk7XG4gICAqXG4gICAqIHZhciBkZXNlcmlhbGl6ZWQgPSBKU09OLnBhcnNlKGpzb24pO1xuICAgKlxuICAgKiB2YXIgdGltZSA9IG5ldyBJQ0FMLlRpbWUoZGVzZXJpYWxpemVkKTtcbiAgICpcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgdG9KU09OKCkge1xuICAgIGxldCBjb3B5ID0gW1xuICAgICAgJ3llYXInLFxuICAgICAgJ21vbnRoJyxcbiAgICAgICdkYXknLFxuICAgICAgJ2hvdXInLFxuICAgICAgJ21pbnV0ZScsXG4gICAgICAnc2Vjb25kJyxcbiAgICAgICdpc0RhdGUnXG4gICAgXTtcblxuICAgIGxldCByZXN1bHQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCBsZW4gPSBjb3B5Lmxlbmd0aDtcbiAgICBsZXQgcHJvcDtcblxuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHByb3AgPSBjb3B5W2ldO1xuICAgICAgcmVzdWx0W3Byb3BdID0gdGhpc1twcm9wXTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy56b25lKSB7XG4gICAgICByZXN1bHQudGltZXpvbmUgPSB0aGlzLnpvbmUudHppZDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG5cbi8qIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKiBQb3J0aW9ucyBDb3B5cmlnaHQgKEMpIFBoaWxpcHAgS2V3aXNjaCAqL1xuXG5cbi8qKlxuICogVGhpcyBsZXRzIHR5cGVzY3JpcHQgcmVzb2x2ZSBvdXIgY3VzdG9tIHR5cGVzIGluIHRoZVxuICogZ2VuZXJhdGVkIGQudHMgZmlsZXMgKGpzZG9jIHR5cGVkZWZzIGFyZSBjb252ZXJ0ZWQgdG8gdHlwZXNjcmlwdCB0eXBlcykuXG4gKiBJZ25vcmUgcHJldmVudHMgdGhlIHR5cGVkZWZzIGZyb20gYmVpbmcgZG9jdW1lbnRlZCBtb3JlIHRoYW4gb25jZS5cbiAqXG4gKiBAaWdub3JlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS5wYXJzZXJTdGF0ZX0gcGFyc2VyU3RhdGVcbiAqIEltcG9ydHMgdGhlICdwYXJzZXJTdGF0ZScgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS5kZXNpZ25TZXR9IGRlc2lnblNldFxuICogSW1wb3J0cyB0aGUgJ2Rlc2lnblNldCcgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKi9cblxuY29uc3QgQ0hBUiA9IC9bXiBcXHRdLztcbmNvbnN0IFZBTFVFX0RFTElNSVRFUiA9ICc6JztcbmNvbnN0IFBBUkFNX0RFTElNSVRFUiA9ICc7JztcbmNvbnN0IFBBUkFNX05BTUVfREVMSU1JVEVSID0gJz0nO1xuY29uc3QgREVGQVVMVF9WQUxVRV9UWVBFJDEgPSAndW5rbm93bic7XG5jb25zdCBERUZBVUxUX1BBUkFNX1RZUEUgPSAndGV4dCc7XG5jb25zdCBSRkM2ODY4X1JFUExBQ0VfTUFQJDEgPSB7IFwiXidcIjogJ1wiJywgXCJeblwiOiBcIlxcblwiLCBcIl5eXCI6IFwiXlwiIH07XG5cbi8qKlxuICogUGFyc2VzIGlDYWxlbmRhciBvciB2Q2FyZCBkYXRhIGludG8gYSByYXcgakNhbCBvYmplY3QuIENvbnN1bHRcbiAqIGRvY3VtZW50YXRpb24gb24gdGhlIHtAdHV0b3JpYWwgbGF5ZXJzfGxheWVycyBvZiBwYXJzaW5nfSBmb3IgbW9yZVxuICogZGV0YWlscy5cbiAqXG4gKiBAZnVuY3Rpb24gSUNBTC5wYXJzZVxuICogQG1lbWJlcm9mIElDQUxcbiAqIEB2YXJpYXRpb24gZnVuY3Rpb25cbiAqIEB0b2RvIEZpeCB0aGUgQVBJIHRvIGJlIG1vcmUgY2xlYXIgb24gdGhlIHJldHVybiB0eXBlXG4gKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgICAgICBUaGUgc3RyaW5nIGRhdGEgdG8gcGFyc2VcbiAqIEByZXR1cm4ge09iamVjdHxPYmplY3RbXX0gIEEgc2luZ2xlIGpDYWwgb2JqZWN0LCBvciBhbiBhcnJheSB0aGVyZW9mXG4gKi9cbmZ1bmN0aW9uIHBhcnNlKGlucHV0KSB7XG4gIGxldCBzdGF0ZSA9IHt9O1xuICBsZXQgcm9vdCA9IHN0YXRlLmNvbXBvbmVudCA9IFtdO1xuXG4gIHN0YXRlLnN0YWNrID0gW3Jvb3RdO1xuXG4gIHBhcnNlLl9lYWNoTGluZShpbnB1dCwgZnVuY3Rpb24oZXJyLCBsaW5lKSB7XG4gICAgcGFyc2UuX2hhbmRsZUNvbnRlbnRMaW5lKGxpbmUsIHN0YXRlKTtcbiAgfSk7XG5cblxuICAvLyB3aGVuIHRoZXJlIGFyZSBzdGlsbCBpdGVtcyBvbiB0aGUgc3RhY2tcbiAgLy8gdGhyb3cgYSBmYXRhbCBlcnJvciwgYSBjb21wb25lbnQgd2FzIG5vdCBjbG9zZWRcbiAgLy8gY29ycmVjdGx5IGluIHRoYXQgY2FzZS5cbiAgaWYgKHN0YXRlLnN0YWNrLmxlbmd0aCA+IDEpIHtcbiAgICB0aHJvdyBuZXcgUGFyc2VyRXJyb3IoXG4gICAgICAnaW52YWxpZCBpY2FsIGJvZHkuIGNvbXBvbmVudCBiZWdhbiBidXQgZGlkIG5vdCBlbmQnXG4gICAgKTtcbiAgfVxuXG4gIHN0YXRlID0gbnVsbDtcblxuICByZXR1cm4gKHJvb3QubGVuZ3RoID09IDEgPyByb290WzBdIDogcm9vdCk7XG59XG5cbi8qKlxuICogUGFyc2UgYW4gaUNhbGVuZGFyIHByb3BlcnR5IHZhbHVlIGludG8gdGhlIGpDYWwgZm9yIGEgc2luZ2xlIHByb3BlcnR5XG4gKlxuICogQGZ1bmN0aW9uIElDQUwucGFyc2UucHJvcGVydHlcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqICAgVGhlIGlDYWxlbmRhciBwcm9wZXJ0eSBzdHJpbmcgdG8gcGFyc2VcbiAqIEBwYXJhbSB7ZGVzaWduU2V0PX0gZGVzaWduU2V0XG4gKiAgIFRoZSBkZXNpZ24gZGF0YSB0byB1c2UgZm9yIHRoaXMgcHJvcGVydHlcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqICAgVGhlIGpDYWwgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIHByb3BlcnR5XG4gKi9cbnBhcnNlLnByb3BlcnR5ID0gZnVuY3Rpb24oc3RyLCBkZXNpZ25TZXQpIHtcbiAgbGV0IHN0YXRlID0ge1xuICAgIGNvbXBvbmVudDogW1tdLCBbXV0sXG4gICAgZGVzaWduU2V0OiBkZXNpZ25TZXQgfHwgZGVzaWduLmRlZmF1bHRTZXRcbiAgfTtcbiAgcGFyc2UuX2hhbmRsZUNvbnRlbnRMaW5lKHN0ciwgc3RhdGUpO1xuICByZXR1cm4gc3RhdGUuY29tcG9uZW50WzFdWzBdO1xufTtcblxuLyoqXG4gKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcGFyc2UgYSBjb21wb25lbnQuIFlvdSBjYW4gdXNlIElDQUwucGFyc2UoKSBkaXJlY3RseVxuICogaW5zdGVhZC5cbiAqXG4gKiBAZnVuY3Rpb24gSUNBTC5wYXJzZS5jb21wb25lbnRcbiAqIEBzZWUgSUNBTC5wYXJzZShmdW5jdGlvbilcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgICAgVGhlIGlDYWxlbmRhciBjb21wb25lbnQgc3RyaW5nIHRvIHBhcnNlXG4gKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgIFRoZSBqQ2FsIE9iamVjdCBjb250YWluaW5nIHRoZSBjb21wb25lbnRcbiAqL1xucGFyc2UuY29tcG9uZW50ID0gZnVuY3Rpb24oc3RyKSB7XG4gIHJldHVybiBwYXJzZShzdHIpO1xufTtcblxuXG4vKipcbiAqIEFuIGVycm9yIHRoYXQgb2NjdXJyZWQgZHVyaW5nIHBhcnNpbmcuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgICAgICAgIFRoZSBlcnJvciBtZXNzYWdlXG4gKiBAbWVtYmVyb2YgSUNBTC5wYXJzZVxuICogQGV4dGVuZHMge0Vycm9yfVxuICovXG5jbGFzcyBQYXJzZXJFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgbmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcbn1cblxuLy8gY2xhc3NlcyAmIGNvbnN0YW50c1xucGFyc2UuUGFyc2VyRXJyb3IgPSBQYXJzZXJFcnJvcjtcblxuXG4vKipcbiAqIEhhbmRsZXMgYSBzaW5nbGUgbGluZSBvZiBpQ2FsZW5kYXIvdkNhcmQsIHVwZGF0aW5nIHRoZSBzdGF0ZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGZ1bmN0aW9uIElDQUwucGFyc2UuX2hhbmRsZUNvbnRlbnRMaW5lXG4gKiBAcGFyYW0ge1N0cmluZ30gbGluZSAgICAgICAgICBUaGUgY29udGVudCBsaW5lIHRvIHByb2Nlc3NcbiAqIEBwYXJhbSB7cGFyc2VyU3RhdGV9IHN0YXRlICAgIFRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBsaW5lIHBhcnNpbmdcbiAqL1xucGFyc2UuX2hhbmRsZUNvbnRlbnRMaW5lID0gZnVuY3Rpb24obGluZSwgc3RhdGUpIHtcbiAgLy8gYnJlYWsgdXAgdGhlIHBhcnRzIG9mIHRoZSBsaW5lXG4gIGxldCB2YWx1ZVBvcyA9IGxpbmUuaW5kZXhPZihWQUxVRV9ERUxJTUlURVIpO1xuICBsZXQgcGFyYW1Qb3MgPSBsaW5lLmluZGV4T2YoUEFSQU1fREVMSU1JVEVSKTtcblxuICBsZXQgbGFzdFBhcmFtSW5kZXg7XG4gIGxldCBsYXN0VmFsdWVQb3M7XG5cbiAgLy8gbmFtZSBvZiBwcm9wZXJ0eSBvciBiZWdpbi9lbmRcbiAgbGV0IG5hbWU7XG4gIGxldCB2YWx1ZTtcbiAgLy8gcGFyYW1zIGlzIG9ubHkgb3ZlcnJpZGRlbiBpZiBwYXJhbVBvcyAhPT0gLTEuXG4gIC8vIHdlIGNhbid0IGRvIHBhcmFtcyA9IHBhcmFtcyB8fCB7fSBsYXRlciBvblxuICAvLyBiZWNhdXNlIGl0IHNhY3JpZmljZXMgb3BzLlxuICBsZXQgcGFyYW1zID0ge307XG5cbiAgLyoqXG4gICAqIERpZmZlcmVudCBwcm9wZXJ0eSBjYXNlc1xuICAgKlxuICAgKlxuICAgKiAxLiBSUlVMRTpGUkVRPWZvb1xuICAgKiAgICAvLyBGUkVRPSBpcyBub3QgYSBwYXJhbSBidXQgdGhlIHZhbHVlXG4gICAqXG4gICAqIDIuIEFUVEVOREVFO1JPTEU9UkVRLVBBUlRJQ0lQQU5UO1xuICAgKiAgICAvLyBST0xFPSBpcyBhIHBhcmFtIGJlY2F1c2UgOiBoYXMgbm90IGhhcHBlbmVkIHlldFxuICAgKi9cbiAgICAvLyB3aGVuIHRoZSBwYXJhbWV0ZXIgZGVsaW1pdGVyIGlzIGFmdGVyIHRoZVxuICAgIC8vIHZhbHVlIGRlbGltaXRlciB0aGVuIGl0IGlzIG5vdCBhIHBhcmFtZXRlci5cblxuICBpZiAoKHBhcmFtUG9zICE9PSAtMSAmJiB2YWx1ZVBvcyAhPT0gLTEpKSB7XG4gICAgLy8gd2hlbiB0aGUgcGFyYW1ldGVyIGRlbGltaXRlciBpcyBhZnRlciB0aGVcbiAgICAvLyB2YWx1ZSBkZWxpbWl0ZXIgdGhlbiBpdCBpcyBub3QgYSBwYXJhbWV0ZXIuXG4gICAgaWYgKHBhcmFtUG9zID4gdmFsdWVQb3MpIHtcbiAgICAgIHBhcmFtUG9zID0gLTE7XG4gICAgfVxuICB9XG5cbiAgbGV0IHBhcnNlZFBhcmFtcztcbiAgaWYgKHBhcmFtUG9zICE9PSAtMSkge1xuICAgIG5hbWUgPSBsaW5lLnNsaWNlKDAsIE1hdGgubWF4KDAsIHBhcmFtUG9zKSkudG9Mb3dlckNhc2UoKTtcbiAgICBwYXJzZWRQYXJhbXMgPSBwYXJzZS5fcGFyc2VQYXJhbWV0ZXJzKGxpbmUuc2xpY2UoTWF0aC5tYXgoMCwgcGFyYW1Qb3MpKSwgMCwgc3RhdGUuZGVzaWduU2V0KTtcbiAgICBpZiAocGFyc2VkUGFyYW1zWzJdID09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgUGFyc2VyRXJyb3IoXCJJbnZhbGlkIHBhcmFtZXRlcnMgaW4gJ1wiICsgbGluZSArIFwiJ1wiKTtcbiAgICB9XG4gICAgcGFyYW1zID0gcGFyc2VkUGFyYW1zWzBdO1xuICAgIC8vIEhhbmRsZSBwYXJhbWV0ZXIgdmFsdWVzIHdpdGggbXVsdGlwbGUgZW50cmllc1xuICAgIGxldCBwYXJzZWRQYXJhbUxlbmd0aDtcbiAgICBpZiAodHlwZW9mIHBhcnNlZFBhcmFtc1sxXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHBhcnNlZFBhcmFtTGVuZ3RoID0gcGFyc2VkUGFyYW1zWzFdLmxlbmd0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFyc2VkUGFyYW1MZW5ndGggPSBwYXJzZWRQYXJhbXNbMV0ucmVkdWNlKChhY2N1bXVsYXRvciwgY3VycmVudFZhbHVlKSA9PiB7XG4gICAgICAgIHJldHVybiBhY2N1bXVsYXRvciArIGN1cnJlbnRWYWx1ZS5sZW5ndGg7XG4gICAgICB9LCAwKTtcbiAgICB9XG4gICAgbGFzdFBhcmFtSW5kZXggPSBwYXJzZWRQYXJhbUxlbmd0aCArIHBhcnNlZFBhcmFtc1syXSArIHBhcmFtUG9zO1xuICAgIGlmICgobGFzdFZhbHVlUG9zID1cbiAgICAgIGxpbmUuc2xpY2UoTWF0aC5tYXgoMCwgbGFzdFBhcmFtSW5kZXgpKS5pbmRleE9mKFZBTFVFX0RFTElNSVRFUikpICE9PSAtMSkge1xuICAgICAgdmFsdWUgPSBsaW5lLnNsaWNlKE1hdGgubWF4KDAsIGxhc3RQYXJhbUluZGV4ICsgbGFzdFZhbHVlUG9zICsgMSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgUGFyc2VyRXJyb3IoXCJNaXNzaW5nIHBhcmFtZXRlciB2YWx1ZSBpbiAnXCIgKyBsaW5lICsgXCInXCIpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh2YWx1ZVBvcyAhPT0gLTEpIHtcbiAgICAvLyB3aXRob3V0IHBhcm1ldGVycyAoQkVHSU46VkNBRU5EQVIsIENMQVNTOlBVQkxJQylcbiAgICBuYW1lID0gbGluZS5zbGljZSgwLCBNYXRoLm1heCgwLCB2YWx1ZVBvcykpLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFsdWUgPSBsaW5lLnNsaWNlKE1hdGgubWF4KDAsIHZhbHVlUG9zICsgMSkpO1xuXG4gICAgaWYgKG5hbWUgPT09ICdiZWdpbicpIHtcbiAgICAgIGxldCBuZXdDb21wb25lbnQgPSBbdmFsdWUudG9Mb3dlckNhc2UoKSwgW10sIFtdXTtcbiAgICAgIGlmIChzdGF0ZS5zdGFjay5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgc3RhdGUuY29tcG9uZW50LnB1c2gobmV3Q29tcG9uZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLmNvbXBvbmVudFsyXS5wdXNoKG5ld0NvbXBvbmVudCk7XG4gICAgICB9XG4gICAgICBzdGF0ZS5zdGFjay5wdXNoKHN0YXRlLmNvbXBvbmVudCk7XG4gICAgICBzdGF0ZS5jb21wb25lbnQgPSBuZXdDb21wb25lbnQ7XG4gICAgICBpZiAoIXN0YXRlLmRlc2lnblNldCkge1xuICAgICAgICBzdGF0ZS5kZXNpZ25TZXQgPSBkZXNpZ24uZ2V0RGVzaWduU2V0KHN0YXRlLmNvbXBvbmVudFswXSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChuYW1lID09PSAnZW5kJykge1xuICAgICAgc3RhdGUuY29tcG9uZW50ID0gc3RhdGUuc3RhY2sucG9wKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIElmIGl0IGlzIG5vdCBiZWdpbi9lbmQsIHRoZW4gdGhpcyBpcyBhIHByb3BlcnR5IHdpdGggYW4gZW1wdHkgdmFsdWUsXG4gICAgLy8gd2hpY2ggc2hvdWxkIGJlIGNvbnNpZGVyZWQgdmFsaWQuXG4gIH0gZWxzZSB7XG4gICAgLyoqXG4gICAgICogSW52YWxpZCBsaW5lLlxuICAgICAqIFRoZSByYXRpb25hbCB0byB0aHJvdyBhbiBlcnJvciBpcyB3ZSB3aWxsXG4gICAgICogbmV2ZXIgYmUgY2VydGFpbiB0aGF0IHRoZSByZXN0IG9mIHRoZSBmaWxlXG4gICAgICogaXMgc2FuZSBhbmQgaXQgaXMgdW5saWtlbHkgdGhhdCB3ZSBjYW4gc2VyaWFsaXplXG4gICAgICogdGhlIHJlc3VsdCBjb3JyZWN0bHkgZWl0aGVyLlxuICAgICAqL1xuICAgIHRocm93IG5ldyBQYXJzZXJFcnJvcihcbiAgICAgICdpbnZhbGlkIGxpbmUgKG5vIHRva2VuIFwiO1wiIG9yIFwiOlwiKSBcIicgKyBsaW5lICsgJ1wiJ1xuICAgICk7XG4gIH1cblxuICBsZXQgdmFsdWVUeXBlO1xuICBsZXQgbXVsdGlWYWx1ZSA9IGZhbHNlO1xuICBsZXQgc3RydWN0dXJlZFZhbHVlID0gZmFsc2U7XG4gIGxldCBwcm9wZXJ0eURldGFpbHM7XG4gIGxldCBzcGxpdE5hbWU7XG4gIGxldCB1bmdyb3VwZWROYW1lO1xuXG4gIC8vIGZldGNoIHRoZSB1bmdyb3VwZWQgcGFydCBvZiB0aGUgbmFtZVxuICBpZiAoc3RhdGUuZGVzaWduU2V0LnByb3BlcnR5R3JvdXBzICYmIG5hbWUuaW5kZXhPZignLicpICE9PSAtMSkge1xuICAgIHNwbGl0TmFtZSA9IG5hbWUuc3BsaXQoJy4nKTtcbiAgICBwYXJhbXMuZ3JvdXAgPSBzcGxpdE5hbWVbMF07XG4gICAgdW5ncm91cGVkTmFtZSA9IHNwbGl0TmFtZVsxXTtcbiAgfSBlbHNlIHtcbiAgICB1bmdyb3VwZWROYW1lID0gbmFtZTtcbiAgfVxuXG4gIGlmICh1bmdyb3VwZWROYW1lIGluIHN0YXRlLmRlc2lnblNldC5wcm9wZXJ0eSkge1xuICAgIHByb3BlcnR5RGV0YWlscyA9IHN0YXRlLmRlc2lnblNldC5wcm9wZXJ0eVt1bmdyb3VwZWROYW1lXTtcblxuICAgIGlmICgnbXVsdGlWYWx1ZScgaW4gcHJvcGVydHlEZXRhaWxzKSB7XG4gICAgICBtdWx0aVZhbHVlID0gcHJvcGVydHlEZXRhaWxzLm11bHRpVmFsdWU7XG4gICAgfVxuXG4gICAgaWYgKCdzdHJ1Y3R1cmVkVmFsdWUnIGluIHByb3BlcnR5RGV0YWlscykge1xuICAgICAgc3RydWN0dXJlZFZhbHVlID0gcHJvcGVydHlEZXRhaWxzLnN0cnVjdHVyZWRWYWx1ZTtcbiAgICB9XG5cbiAgICBpZiAodmFsdWUgJiYgJ2RldGVjdFR5cGUnIGluIHByb3BlcnR5RGV0YWlscykge1xuICAgICAgdmFsdWVUeXBlID0gcHJvcGVydHlEZXRhaWxzLmRldGVjdFR5cGUodmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGF0dGVtcHQgdG8gZGV0ZXJtaW5lIHZhbHVlXG4gIGlmICghdmFsdWVUeXBlKSB7XG4gICAgaWYgKCEoJ3ZhbHVlJyBpbiBwYXJhbXMpKSB7XG4gICAgICBpZiAocHJvcGVydHlEZXRhaWxzKSB7XG4gICAgICAgIHZhbHVlVHlwZSA9IHByb3BlcnR5RGV0YWlscy5kZWZhdWx0VHlwZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlVHlwZSA9IERFRkFVTFRfVkFMVUVfVFlQRSQxO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBwb3NzaWJsZSB0byBhdm9pZCB0aGlzP1xuICAgICAgdmFsdWVUeXBlID0gcGFyYW1zLnZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuICB9XG5cbiAgZGVsZXRlIHBhcmFtcy52YWx1ZTtcblxuICAvKipcbiAgICogTm90ZSBvbiBgdmFyIHJlc3VsdGAganVnZ2xpbmc6XG4gICAqXG4gICAqIEkgb2JzZXJ2ZWQgdGhhdCBidWlsZGluZyB0aGUgYXJyYXkgaW4gcGllY2VzIGhhcyBhZHZlcnNlXG4gICAqIGVmZmVjdHMgb24gcGVyZm9ybWFuY2UsIHNvIHdoZXJlIHBvc3NpYmxlIHdlIGlubGluZSB0aGUgY3JlYXRpb24uXG4gICAqIEl0IGlzIGEgbGl0dGxlIHVnbHkgYnV0IHJlc3VsdGVkIGluIH4yMDAwIGFkZGl0aW9uYWwgb3BzL3NlYy5cbiAgICovXG5cbiAgbGV0IHJlc3VsdDtcbiAgaWYgKG11bHRpVmFsdWUgJiYgc3RydWN0dXJlZFZhbHVlKSB7XG4gICAgdmFsdWUgPSBwYXJzZS5fcGFyc2VNdWx0aVZhbHVlKHZhbHVlLCBzdHJ1Y3R1cmVkVmFsdWUsIHZhbHVlVHlwZSwgW10sIG11bHRpVmFsdWUsIHN0YXRlLmRlc2lnblNldCwgc3RydWN0dXJlZFZhbHVlKTtcbiAgICByZXN1bHQgPSBbdW5ncm91cGVkTmFtZSwgcGFyYW1zLCB2YWx1ZVR5cGUsIHZhbHVlXTtcbiAgfSBlbHNlIGlmIChtdWx0aVZhbHVlKSB7XG4gICAgcmVzdWx0ID0gW3VuZ3JvdXBlZE5hbWUsIHBhcmFtcywgdmFsdWVUeXBlXTtcbiAgICBwYXJzZS5fcGFyc2VNdWx0aVZhbHVlKHZhbHVlLCBtdWx0aVZhbHVlLCB2YWx1ZVR5cGUsIHJlc3VsdCwgbnVsbCwgc3RhdGUuZGVzaWduU2V0LCBmYWxzZSk7XG4gIH0gZWxzZSBpZiAoc3RydWN0dXJlZFZhbHVlKSB7XG4gICAgdmFsdWUgPSBwYXJzZS5fcGFyc2VNdWx0aVZhbHVlKHZhbHVlLCBzdHJ1Y3R1cmVkVmFsdWUsIHZhbHVlVHlwZSwgW10sIG51bGwsIHN0YXRlLmRlc2lnblNldCwgc3RydWN0dXJlZFZhbHVlKTtcbiAgICByZXN1bHQgPSBbdW5ncm91cGVkTmFtZSwgcGFyYW1zLCB2YWx1ZVR5cGUsIHZhbHVlXTtcbiAgfSBlbHNlIHtcbiAgICB2YWx1ZSA9IHBhcnNlLl9wYXJzZVZhbHVlKHZhbHVlLCB2YWx1ZVR5cGUsIHN0YXRlLmRlc2lnblNldCwgZmFsc2UpO1xuICAgIHJlc3VsdCA9IFt1bmdyb3VwZWROYW1lLCBwYXJhbXMsIHZhbHVlVHlwZSwgdmFsdWVdO1xuICB9XG4gIC8vIHJmYzYzNTAgcmVxdWlyZXMgdGhhdCBpbiB2Q2FyZCA0LjAgdGhlIGZpcnN0IGNvbXBvbmVudCBpcyB0aGUgVkVSU0lPTlxuICAvLyBjb21wb25lbnQgd2l0aCBhcyB2YWx1ZSA0LjAsIG5vdGUgdGhhdCAzLjAgZG9lcyBub3QgaGF2ZSB0aGlzIHJlcXVpcmVtZW50LlxuICBpZiAoc3RhdGUuY29tcG9uZW50WzBdID09PSAndmNhcmQnICYmIHN0YXRlLmNvbXBvbmVudFsxXS5sZW5ndGggPT09IDAgJiZcbiAgICAgICAgICAhKG5hbWUgPT09ICd2ZXJzaW9uJyAmJiB2YWx1ZSA9PT0gJzQuMCcpKSB7XG4gICAgc3RhdGUuZGVzaWduU2V0ID0gZGVzaWduLmdldERlc2lnblNldChcInZjYXJkM1wiKTtcbiAgfVxuICBzdGF0ZS5jb21wb25lbnRbMV0ucHVzaChyZXN1bHQpO1xufTtcblxuLyoqXG4gKiBQYXJzZSBhIHZhbHVlIGZyb20gdGhlIHJhdyB2YWx1ZSBpbnRvIHRoZSBqQ2FyZC9qQ2FsIHZhbHVlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAZnVuY3Rpb24gSUNBTC5wYXJzZS5fcGFyc2VWYWx1ZVxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlICAgICAgICAgIE9yaWdpbmFsIHZhbHVlXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAgICAgICAgICAgVHlwZSBvZiB2YWx1ZVxuICogQHBhcmFtIHtPYmplY3R9IGRlc2lnblNldCAgICAgIFRoZSBkZXNpZ24gZGF0YSB0byB1c2UgZm9yIHRoaXMgdmFsdWVcbiAqIEByZXR1cm4ge09iamVjdH0gdmFyaWVzIG9uIHR5cGVcbiAqL1xucGFyc2UuX3BhcnNlVmFsdWUgPSBmdW5jdGlvbih2YWx1ZSwgdHlwZSwgZGVzaWduU2V0LCBzdHJ1Y3R1cmVkVmFsdWUpIHtcbiAgaWYgKHR5cGUgaW4gZGVzaWduU2V0LnZhbHVlICYmICdmcm9tSUNBTCcgaW4gZGVzaWduU2V0LnZhbHVlW3R5cGVdKSB7XG4gICAgcmV0dXJuIGRlc2lnblNldC52YWx1ZVt0eXBlXS5mcm9tSUNBTCh2YWx1ZSwgc3RydWN0dXJlZFZhbHVlKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59O1xuXG4vKipcbiAqIFBhcnNlIHBhcmFtZXRlcnMgZnJvbSBhIHN0cmluZyB0byBvYmplY3QuXG4gKlxuICogQGZ1bmN0aW9uIElDQUwucGFyc2UuX3BhcnNlUGFyYW1ldGVyc1xuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBsaW5lICAgICAgICAgICAgICAgQSBzaW5nbGUgdW5mb2xkZWQgbGluZVxuICogQHBhcmFtIHtOdW1iZXJ9IHN0YXJ0ICAgICAgICAgICAgICBQb3NpdGlvbiB0byBzdGFydCBsb29raW5nIGZvciBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge09iamVjdH0gZGVzaWduU2V0ICAgICAgICAgIFRoZSBkZXNpZ24gZGF0YSB0byB1c2UgZm9yIHRoaXMgcHJvcGVydHlcbiAqIEByZXR1cm4ge0FycmF5fSAgICAgICAgICAgICAgICAgICAgQXJyYXkgY29udGFpbmluZyBrZXkvdmFseWUgcGFpcnMgb2YgcGFyc2VkIHBhcmFtZXRlcnMsIHRoZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZCB2YWx1ZSwgYW5kIHRoZSBwb3NpdGlvbiBvZiB0aGUgbGFzdCBwYXJhbWV0ZXIgZm91bmRcbiAqL1xucGFyc2UuX3BhcnNlUGFyYW1ldGVycyA9IGZ1bmN0aW9uKGxpbmUsIHN0YXJ0LCBkZXNpZ25TZXQpIHtcbiAgbGV0IGxhc3RQYXJhbSA9IHN0YXJ0O1xuICBsZXQgcG9zID0gMDtcbiAgbGV0IGRlbGltID0gUEFSQU1fTkFNRV9ERUxJTUlURVI7XG4gIGxldCByZXN1bHQgPSB7fTtcbiAgbGV0IG5hbWUsIGxjbmFtZTtcbiAgbGV0IHZhbHVlLCB2YWx1ZVBvcyA9IC0xO1xuICBsZXQgdHlwZSwgbXVsdGlWYWx1ZSwgbXZkZWxpbTtcblxuICAvLyBmaW5kIHRoZSBuZXh0ICc9JyBzaWduXG4gIC8vIHVzZSBsYXN0UGFyYW0gYW5kIHBvcyB0byBmaW5kIG5hbWVcbiAgLy8gY2hlY2sgaWYgXCIgaXMgdXNlZCBpZiBzbyBnZXQgdmFsdWUgZnJvbSBcIi0+XCJcbiAgLy8gdGhlbiBpbmNyZW1lbnQgcG9zIHRvIGZpbmQgbmV4dCA7XG5cbiAgd2hpbGUgKChwb3MgIT09IGZhbHNlKSAmJlxuICAgICAgICAgKHBvcyA9IGxpbmUuaW5kZXhPZihkZWxpbSwgcG9zICsgMSkpICE9PSAtMSkge1xuXG4gICAgbmFtZSA9IGxpbmUuc2xpY2UobGFzdFBhcmFtICsgMSwgcG9zKTtcbiAgICBpZiAobmFtZS5sZW5ndGggPT0gMCkge1xuICAgICAgdGhyb3cgbmV3IFBhcnNlckVycm9yKFwiRW1wdHkgcGFyYW1ldGVyIG5hbWUgaW4gJ1wiICsgbGluZSArIFwiJ1wiKTtcbiAgICB9XG4gICAgbGNuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIG12ZGVsaW0gPSBmYWxzZTtcbiAgICBtdWx0aVZhbHVlID0gZmFsc2U7XG5cbiAgICBpZiAobGNuYW1lIGluIGRlc2lnblNldC5wYXJhbSAmJiBkZXNpZ25TZXQucGFyYW1bbGNuYW1lXS52YWx1ZVR5cGUpIHtcbiAgICAgIHR5cGUgPSBkZXNpZ25TZXQucGFyYW1bbGNuYW1lXS52YWx1ZVR5cGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHR5cGUgPSBERUZBVUxUX1BBUkFNX1RZUEU7XG4gICAgfVxuXG4gICAgaWYgKGxjbmFtZSBpbiBkZXNpZ25TZXQucGFyYW0pIHtcbiAgICAgIG11bHRpVmFsdWUgPSBkZXNpZ25TZXQucGFyYW1bbGNuYW1lXS5tdWx0aVZhbHVlO1xuICAgICAgaWYgKGRlc2lnblNldC5wYXJhbVtsY25hbWVdLm11bHRpVmFsdWVTZXBhcmF0ZURRdW90ZSkge1xuICAgICAgICBtdmRlbGltID0gcGFyc2UuX3JmYzY4NjhFc2NhcGUoJ1wiJyArIG11bHRpVmFsdWUgKyAnXCInKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgbmV4dENoYXIgPSBsaW5lW3BvcyArIDFdO1xuICAgIGlmIChuZXh0Q2hhciA9PT0gJ1wiJykge1xuICAgICAgdmFsdWVQb3MgPSBwb3MgKyAyO1xuICAgICAgcG9zID0gbGluZS5pbmRleE9mKCdcIicsIHZhbHVlUG9zKTtcbiAgICAgIGlmIChtdWx0aVZhbHVlICYmIHBvcyAhPSAtMSkge1xuICAgICAgICAgIGxldCBleHRlbmRlZFZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICB3aGlsZSAoZXh0ZW5kZWRWYWx1ZSkge1xuICAgICAgICAgICAgaWYgKGxpbmVbcG9zICsgMV0gPT0gbXVsdGlWYWx1ZSAmJiBsaW5lW3BvcyArIDJdID09ICdcIicpIHtcbiAgICAgICAgICAgICAgcG9zID0gbGluZS5pbmRleE9mKCdcIicsIHBvcyArIDMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZXh0ZW5kZWRWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgaWYgKHBvcyA9PT0gLTEpIHtcbiAgICAgICAgdGhyb3cgbmV3IFBhcnNlckVycm9yKFxuICAgICAgICAgICdpbnZhbGlkIGxpbmUgKG5vIG1hdGNoaW5nIGRvdWJsZSBxdW90ZSkgXCInICsgbGluZSArICdcIidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gbGluZS5zbGljZSh2YWx1ZVBvcywgcG9zKTtcbiAgICAgIGxhc3RQYXJhbSA9IGxpbmUuaW5kZXhPZihQQVJBTV9ERUxJTUlURVIsIHBvcyk7XG4gICAgICBsZXQgcHJvcFZhbHVlUG9zID0gbGluZS5pbmRleE9mKFZBTFVFX0RFTElNSVRFUiwgcG9zKTtcbiAgICAgIC8vIGlmIGVpdGhlciBubyBuZXh0IHBhcmFtZXRlciBvciBkZWxpbWV0ZXIgaW4gcHJvcGVydHkgdmFsdWUsIGxldCdzIHN0b3AgaGVyZVxuICAgICAgaWYgKGxhc3RQYXJhbSA9PT0gLTEgfHwgKHByb3BWYWx1ZVBvcyAhPT0gLTEgJiYgbGFzdFBhcmFtID4gcHJvcFZhbHVlUG9zKSkge1xuICAgICAgICBwb3MgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWVQb3MgPSBwb3MgKyAxO1xuXG4gICAgICAvLyBtb3ZlIHRvIG5leHQgXCI7XCJcbiAgICAgIGxldCBuZXh0UG9zID0gbGluZS5pbmRleE9mKFBBUkFNX0RFTElNSVRFUiwgdmFsdWVQb3MpO1xuICAgICAgbGV0IHByb3BWYWx1ZVBvcyA9IGxpbmUuaW5kZXhPZihWQUxVRV9ERUxJTUlURVIsIHZhbHVlUG9zKTtcbiAgICAgIGlmIChwcm9wVmFsdWVQb3MgIT09IC0xICYmIG5leHRQb3MgPiBwcm9wVmFsdWVQb3MpIHtcbiAgICAgICAgLy8gdGhpcyBpcyBhIGRlbGltaXRlciBpbiB0aGUgcHJvcGVydHkgdmFsdWUsIGxldCdzIHN0b3AgaGVyZVxuICAgICAgICBuZXh0UG9zID0gcHJvcFZhbHVlUG9zO1xuICAgICAgICBwb3MgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAobmV4dFBvcyA9PT0gLTEpIHtcbiAgICAgICAgLy8gbm8gXCI7XCJcbiAgICAgICAgaWYgKHByb3BWYWx1ZVBvcyA9PT0gLTEpIHtcbiAgICAgICAgICBuZXh0UG9zID0gbGluZS5sZW5ndGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV4dFBvcyA9IHByb3BWYWx1ZVBvcztcbiAgICAgICAgfVxuICAgICAgICBwb3MgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxhc3RQYXJhbSA9IG5leHRQb3M7XG4gICAgICAgIHBvcyA9IG5leHRQb3M7XG4gICAgICB9XG5cbiAgICAgIHZhbHVlID0gbGluZS5zbGljZSh2YWx1ZVBvcywgbmV4dFBvcyk7XG4gICAgfVxuXG4gICAgY29uc3QgbGVuZ3RoX2JlZm9yZSA9IHZhbHVlLmxlbmd0aDtcbiAgICB2YWx1ZSA9IHBhcnNlLl9yZmM2ODY4RXNjYXBlKHZhbHVlKTtcbiAgICB2YWx1ZVBvcyArPSBsZW5ndGhfYmVmb3JlIC0gdmFsdWUubGVuZ3RoO1xuICAgIGlmIChtdWx0aVZhbHVlKSB7XG4gICAgICBsZXQgZGVsaW1pdGVyID0gbXZkZWxpbSB8fCBtdWx0aVZhbHVlO1xuICAgICAgdmFsdWUgPSBwYXJzZS5fcGFyc2VNdWx0aVZhbHVlKHZhbHVlLCBkZWxpbWl0ZXIsIHR5cGUsIFtdLCBudWxsLCBkZXNpZ25TZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSA9IHBhcnNlLl9wYXJzZVZhbHVlKHZhbHVlLCB0eXBlLCBkZXNpZ25TZXQpO1xuICAgIH1cblxuICAgIGlmIChtdWx0aVZhbHVlICYmIChsY25hbWUgaW4gcmVzdWx0KSkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzdWx0W2xjbmFtZV0pKSB7XG4gICAgICAgIHJlc3VsdFtsY25hbWVdLnB1c2godmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0W2xjbmFtZV0gPSBbXG4gICAgICAgICAgcmVzdWx0W2xjbmFtZV0sXG4gICAgICAgICAgdmFsdWVcbiAgICAgICAgXTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0W2xjbmFtZV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFtyZXN1bHQsIHZhbHVlLCB2YWx1ZVBvc107XG59O1xuXG4vKipcbiAqIEludGVybmFsIGhlbHBlciBmb3IgcmZjNjg2OC4gRXhwb3NpbmcgdGhpcyBvbiBJQ0FMLnBhcnNlIHNvIHRoYXRcbiAqIGhhY2tlcnMgY2FuIGRpc2FibGUgdGhlIHJmYzY4NjggcGFyc2luZyBpZiB0aGUgcmVhbGx5IG5lZWQgdG8uXG4gKlxuICogQGZ1bmN0aW9uIElDQUwucGFyc2UuX3JmYzY4NjhFc2NhcGVcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWwgICAgICAgIFRoZSB2YWx1ZSB0byBlc2NhcGVcbiAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICAgIFRoZSBlc2NhcGVkIHZhbHVlXG4gKi9cbnBhcnNlLl9yZmM2ODY4RXNjYXBlID0gZnVuY3Rpb24odmFsKSB7XG4gIHJldHVybiB2YWwucmVwbGFjZSgvXFxeWyduXl0vZywgZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBSRkM2ODY4X1JFUExBQ0VfTUFQJDFbeF07XG4gIH0pO1xufTtcblxuLyoqXG4gKiBQYXJzZSBhIG11bHRpIHZhbHVlIHN0cmluZy4gVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGVpdGhlciBmb3IgcGFyc2luZ1xuICogYWN0dWFsIG11bHRpLXZhbHVlIHByb3BlcnR5J3MgdmFsdWVzLCBvciBmb3IgaGFuZGxpbmcgcGFyYW1ldGVyIHZhbHVlcy4gSXRcbiAqIGNhbiBiZSB1c2VkIGZvciBib3RoIG11bHRpLXZhbHVlIHByb3BlcnRpZXMgYW5kIHN0cnVjdHVyZWQgdmFsdWUgcHJvcGVydGllcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGZ1bmN0aW9uIElDQUwucGFyc2UuX3BhcnNlTXVsdGlWYWx1ZVxuICogQHBhcmFtIHtTdHJpbmd9IGJ1ZmZlciAgICAgICAgICAgVGhlIGJ1ZmZlciBjb250YWluaW5nIHRoZSBmdWxsIHZhbHVlXG4gKiBAcGFyYW0ge1N0cmluZ30gZGVsaW0gICAgICAgICAgICBUaGUgbXVsdGktdmFsdWUgZGVsaW1pdGVyXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAgICAgICAgICAgICBUaGUgdmFsdWUgdHlwZSB0byBiZSBwYXJzZWRcbiAqIEBwYXJhbSB7QXJyYXkuPD8+fSByZXN1bHQgICAgICAgIFRoZSBhcnJheSB0byBhcHBlbmQgcmVzdWx0cyB0bywgdmFyaWVzIG9uIHZhbHVlIHR5cGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBpbm5lck11bHRpICAgICAgIFRoZSBpbm5lciBkZWxpbWl0ZXIgdG8gc3BsaXQgZWFjaCB2YWx1ZSB3aXRoXG4gKiBAcGFyYW0ge2Rlc2lnblNldH0gZGVzaWduU2V0ICAgICBUaGUgZGVzaWduIGRhdGEgZm9yIHRoaXMgdmFsdWVcbiAqIEByZXR1cm4gez98QXJyYXkuPD8+fSAgICAgICAgICAgIEVpdGhlciBhbiBhcnJheSBvZiByZXN1bHRzLCBvciB0aGUgZmlyc3QgcmVzdWx0XG4gKi9cbnBhcnNlLl9wYXJzZU11bHRpVmFsdWUgPSBmdW5jdGlvbihidWZmZXIsIGRlbGltLCB0eXBlLCByZXN1bHQsIGlubmVyTXVsdGksIGRlc2lnblNldCwgc3RydWN0dXJlZFZhbHVlKSB7XG4gIGxldCBwb3MgPSAwO1xuICBsZXQgbGFzdFBvcyA9IDA7XG4gIGxldCB2YWx1ZTtcbiAgaWYgKGRlbGltLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBidWZmZXI7XG4gIH1cblxuICAvLyBzcGxpdCBlYWNoIHBpZWNlXG4gIHdoaWxlICgocG9zID0gdW5lc2NhcGVkSW5kZXhPZihidWZmZXIsIGRlbGltLCBsYXN0UG9zKSkgIT09IC0xKSB7XG4gICAgdmFsdWUgPSBidWZmZXIuc2xpY2UobGFzdFBvcywgcG9zKTtcbiAgICBpZiAoaW5uZXJNdWx0aSkge1xuICAgICAgdmFsdWUgPSBwYXJzZS5fcGFyc2VNdWx0aVZhbHVlKHZhbHVlLCBpbm5lck11bHRpLCB0eXBlLCBbXSwgbnVsbCwgZGVzaWduU2V0LCBzdHJ1Y3R1cmVkVmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSA9IHBhcnNlLl9wYXJzZVZhbHVlKHZhbHVlLCB0eXBlLCBkZXNpZ25TZXQsIHN0cnVjdHVyZWRWYWx1ZSk7XG4gICAgfVxuICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICBsYXN0UG9zID0gcG9zICsgZGVsaW0ubGVuZ3RoO1xuICB9XG5cbiAgLy8gb24gdGhlIGxhc3QgcGllY2UgdGFrZSB0aGUgcmVzdCBvZiBzdHJpbmdcbiAgdmFsdWUgPSBidWZmZXIuc2xpY2UobGFzdFBvcyk7XG4gIGlmIChpbm5lck11bHRpKSB7XG4gICAgdmFsdWUgPSBwYXJzZS5fcGFyc2VNdWx0aVZhbHVlKHZhbHVlLCBpbm5lck11bHRpLCB0eXBlLCBbXSwgbnVsbCwgZGVzaWduU2V0LCBzdHJ1Y3R1cmVkVmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHZhbHVlID0gcGFyc2UuX3BhcnNlVmFsdWUodmFsdWUsIHR5cGUsIGRlc2lnblNldCwgc3RydWN0dXJlZFZhbHVlKTtcbiAgfVxuICByZXN1bHQucHVzaCh2YWx1ZSk7XG5cbiAgcmV0dXJuIHJlc3VsdC5sZW5ndGggPT0gMSA/IHJlc3VsdFswXSA6IHJlc3VsdDtcbn07XG5cbi8qKlxuICogUHJvY2VzcyBhIGNvbXBsZXRlIGJ1ZmZlciBvZiBpQ2FsZW5kYXIvdkNhcmQgZGF0YSBsaW5lIGJ5IGxpbmUsIGNvcnJlY3RseVxuICogdW5mb2xkaW5nIGNvbnRlbnQuIEVhY2ggbGluZSB3aWxsIGJlIHByb2Nlc3NlZCB3aXRoIHRoZSBnaXZlbiBjYWxsYmFja1xuICpcbiAqIEBwcml2YXRlXG4gKiBAZnVuY3Rpb24gSUNBTC5wYXJzZS5fZWFjaExpbmVcbiAqIEBwYXJhbSB7U3RyaW5nfSBidWZmZXIgICAgICAgICAgICAgICAgICAgICAgICAgVGhlIGJ1ZmZlciB0byBwcm9jZXNzXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKD9TdHJpbmcsIFN0cmluZyl9IGNhbGxiYWNrICAgIFRoZSBjYWxsYmFjayBmb3IgZWFjaCBsaW5lXG4gKi9cbnBhcnNlLl9lYWNoTGluZSA9IGZ1bmN0aW9uKGJ1ZmZlciwgY2FsbGJhY2spIHtcbiAgbGV0IGxlbiA9IGJ1ZmZlci5sZW5ndGg7XG4gIGxldCBsYXN0UG9zID0gYnVmZmVyLnNlYXJjaChDSEFSKTtcbiAgbGV0IHBvcyA9IGxhc3RQb3M7XG4gIGxldCBsaW5lO1xuICBsZXQgZmlyc3RDaGFyO1xuXG4gIGxldCBuZXdsaW5lT2Zmc2V0O1xuXG4gIGRvIHtcbiAgICBwb3MgPSBidWZmZXIuaW5kZXhPZignXFxuJywgbGFzdFBvcykgKyAxO1xuXG4gICAgaWYgKHBvcyA+IDEgJiYgYnVmZmVyW3BvcyAtIDJdID09PSAnXFxyJykge1xuICAgICAgbmV3bGluZU9mZnNldCA9IDI7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld2xpbmVPZmZzZXQgPSAxO1xuICAgIH1cblxuICAgIGlmIChwb3MgPT09IDApIHtcbiAgICAgIHBvcyA9IGxlbjtcbiAgICAgIG5ld2xpbmVPZmZzZXQgPSAwO1xuICAgIH1cblxuICAgIGZpcnN0Q2hhciA9IGJ1ZmZlcltsYXN0UG9zXTtcblxuICAgIGlmIChmaXJzdENoYXIgPT09ICcgJyB8fCBmaXJzdENoYXIgPT09ICdcXHQnKSB7XG4gICAgICAvLyBhZGQgdG8gbGluZVxuICAgICAgbGluZSArPSBidWZmZXIuc2xpY2UobGFzdFBvcyArIDEsIHBvcyAtIG5ld2xpbmVPZmZzZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAobGluZSlcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgbGluZSk7XG4gICAgICAvLyBwdXNoIGxpbmVcbiAgICAgIGxpbmUgPSBidWZmZXIuc2xpY2UobGFzdFBvcywgcG9zIC0gbmV3bGluZU9mZnNldCk7XG4gICAgfVxuXG4gICAgbGFzdFBvcyA9IHBvcztcbiAgfSB3aGlsZSAocG9zICE9PSBsZW4pO1xuXG4gIC8vIGV4dHJhIGVuZGluZyBsaW5lXG4gIGxpbmUgPSBsaW5lLnRyaW0oKTtcblxuICBpZiAobGluZS5sZW5ndGgpXG4gICAgY2FsbGJhY2sobnVsbCwgbGluZSk7XG59O1xuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG5jb25zdCBPUFRJT05TID0gW1widHppZFwiLCBcImxvY2F0aW9uXCIsIFwidHpuYW1lc1wiLCBcImxhdGl0dWRlXCIsIFwibG9uZ2l0dWRlXCJdO1xuXG4vKipcbiAqIFRpbWV6b25lIHJlcHJlc2VudGF0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgdmNhbGVuZGFyO1xuICogdmFyIHRpbWV6b25lQ29tcCA9IHZjYWxlbmRhci5nZXRGaXJzdFN1YmNvbXBvbmVudCgndnRpbWV6b25lJyk7XG4gKiB2YXIgdHppZCA9IHRpbWV6b25lQ29tcC5nZXRGaXJzdFByb3BlcnR5VmFsdWUoJ3R6aWQnKTtcbiAqXG4gKiB2YXIgdGltZXpvbmUgPSBuZXcgSUNBTC5UaW1lem9uZSh7XG4gKiAgIGNvbXBvbmVudDogdGltZXpvbmVDb21wLFxuICogICB0emlkXG4gKiB9KTtcbiAqXG4gKiBAbWVtYmVyb2YgSUNBTFxuICovXG5jbGFzcyBUaW1lem9uZSB7XG4gIHN0YXRpYyBfY29tcGFyZV9jaGFuZ2VfZm4oYSwgYikge1xuICAgIGlmIChhLnllYXIgPCBiLnllYXIpIHJldHVybiAtMTtcbiAgICBlbHNlIGlmIChhLnllYXIgPiBiLnllYXIpIHJldHVybiAxO1xuXG4gICAgaWYgKGEubW9udGggPCBiLm1vbnRoKSByZXR1cm4gLTE7XG4gICAgZWxzZSBpZiAoYS5tb250aCA+IGIubW9udGgpIHJldHVybiAxO1xuXG4gICAgaWYgKGEuZGF5IDwgYi5kYXkpIHJldHVybiAtMTtcbiAgICBlbHNlIGlmIChhLmRheSA+IGIuZGF5KSByZXR1cm4gMTtcblxuICAgIGlmIChhLmhvdXIgPCBiLmhvdXIpIHJldHVybiAtMTtcbiAgICBlbHNlIGlmIChhLmhvdXIgPiBiLmhvdXIpIHJldHVybiAxO1xuXG4gICAgaWYgKGEubWludXRlIDwgYi5taW51dGUpIHJldHVybiAtMTtcbiAgICBlbHNlIGlmIChhLm1pbnV0ZSA+IGIubWludXRlKSByZXR1cm4gMTtcblxuICAgIGlmIChhLnNlY29uZCA8IGIuc2Vjb25kKSByZXR1cm4gLTE7XG4gICAgZWxzZSBpZiAoYS5zZWNvbmQgPiBiLnNlY29uZCkgcmV0dXJuIDE7XG5cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IHRoZSBkYXRlL3RpbWUgZnJvbSBvbmUgem9uZSB0byB0aGUgbmV4dC5cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lfSB0dCAgICAgICAgICAgICAgICAgIFRoZSB0aW1lIHRvIGNvbnZlcnRcbiAgICogQHBhcmFtIHtUaW1lem9uZX0gZnJvbV96b25lICAgICAgIFRoZSBzb3VyY2Ugem9uZSB0byBjb252ZXJ0IGZyb21cbiAgICogQHBhcmFtIHtUaW1lem9uZX0gdG9fem9uZSAgICAgICAgIFRoZSB0YXJnZXQgem9uZSB0byBjb252ZXJ0IHRvXG4gICAqIEByZXR1cm4ge1RpbWV9ICAgICAgICAgICAgICAgICAgICBUaGUgY29udmVydGVkIGRhdGUvdGltZSBvYmplY3RcbiAgICovXG4gIHN0YXRpYyBjb252ZXJ0X3RpbWUodHQsIGZyb21fem9uZSwgdG9fem9uZSkge1xuICAgIGlmICh0dC5pc0RhdGUgfHxcbiAgICAgICAgZnJvbV96b25lLnR6aWQgPT0gdG9fem9uZS50emlkIHx8XG4gICAgICAgIGZyb21fem9uZSA9PSBUaW1lem9uZS5sb2NhbFRpbWV6b25lIHx8XG4gICAgICAgIHRvX3pvbmUgPT0gVGltZXpvbmUubG9jYWxUaW1lem9uZSkge1xuICAgICAgdHQuem9uZSA9IHRvX3pvbmU7XG4gICAgICByZXR1cm4gdHQ7XG4gICAgfVxuXG4gICAgbGV0IHV0Y09mZnNldCA9IGZyb21fem9uZS51dGNPZmZzZXQodHQpO1xuICAgIHR0LmFkanVzdCgwLCAwLCAwLCAtIHV0Y09mZnNldCk7XG5cbiAgICB1dGNPZmZzZXQgPSB0b196b25lLnV0Y09mZnNldCh0dCk7XG4gICAgdHQuYWRqdXN0KDAsIDAsIDAsIHV0Y09mZnNldCk7XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuVGltZXpvbmUgaW5zdGFuY2UgZnJvbSB0aGUgcGFzc2VkIGRhdGEgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBvbmVudHxPYmplY3R9IGFEYXRhIG9wdGlvbnMgZm9yIGNsYXNzXG4gICAqIEBwYXJhbSB7U3RyaW5nfENvbXBvbmVudH0gYURhdGEuY29tcG9uZW50XG4gICAqICAgICAgICBJZiBhRGF0YSBpcyBhIHNpbXBsZSBvYmplY3QsIHRoZW4gdGhpcyBtZW1iZXIgY2FuIGJlIHNldCB0byBlaXRoZXIgYVxuICAgKiAgICAgICAgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIGNvbXBvbmVudCBkYXRhLCBvciBhbiBhbHJlYWR5IHBhcnNlZFxuICAgKiAgICAgICAgSUNBTC5Db21wb25lbnRcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFEYXRhLnR6aWQgICAgICBUaGUgdGltZXpvbmUgaWRlbnRpZmllclxuICAgKiBAcGFyYW0ge1N0cmluZ30gYURhdGEubG9jYXRpb24gIFRoZSB0aW1lem9uZSBsb2NhdGlvbndcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFEYXRhLnR6bmFtZXMgICBBbiBhbHRlcm5hdGl2ZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWV6b25lXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBhRGF0YS5sYXRpdHVkZSAgVGhlIGxhdGl0dWRlIG9mIHRoZSB0aW1lem9uZVxuICAgKiBAcGFyYW0ge051bWJlcn0gYURhdGEubG9uZ2l0dWRlIFRoZSBsb25naXR1ZGUgb2YgdGhlIHRpbWV6b25lXG4gICAqL1xuICBzdGF0aWMgZnJvbURhdGEoYURhdGEpIHtcbiAgICBsZXQgdHQgPSBuZXcgVGltZXpvbmUoKTtcbiAgICByZXR1cm4gdHQuZnJvbURhdGEoYURhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBpbnN0YW5jZSBkZXNjcmliaW5nIHRoZSBVVEMgdGltZXpvbmVcbiAgICogQHR5cGUge1RpbWV6b25lfVxuICAgKiBAY29uc3RhbnRcbiAgICogQGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgI3V0Y1RpbWV6b25lID0gbnVsbDtcbiAgc3RhdGljIGdldCB1dGNUaW1lem9uZSgpIHtcbiAgICBpZiAoIXRoaXMuI3V0Y1RpbWV6b25lKSB7XG4gICAgICB0aGlzLiN1dGNUaW1lem9uZSA9IFRpbWV6b25lLmZyb21EYXRhKHtcbiAgICAgICAgdHppZDogXCJVVENcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLiN1dGNUaW1lem9uZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgaW5zdGFuY2UgZGVzY3JpYmluZyB0aGUgbG9jYWwgdGltZXpvbmVcbiAgICogQHR5cGUge1RpbWV6b25lfVxuICAgKiBAY29uc3RhbnRcbiAgICogQGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgI2xvY2FsVGltZXpvbmUgPSBudWxsO1xuICBzdGF0aWMgZ2V0IGxvY2FsVGltZXpvbmUoKSB7XG4gICAgaWYgKCF0aGlzLiNsb2NhbFRpbWV6b25lKSB7XG4gICAgICB0aGlzLiNsb2NhbFRpbWV6b25lID0gVGltZXpvbmUuZnJvbURhdGEoe1xuICAgICAgICB0emlkOiBcImZsb2F0aW5nXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy4jbG9jYWxUaW1lem9uZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGp1c3QgYSB0aW1lem9uZSBjaGFuZ2Ugb2JqZWN0LlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gY2hhbmdlICAgICBUaGUgdGltZXpvbmUgY2hhbmdlIG9iamVjdFxuICAgKiBAcGFyYW0ge051bWJlcn0gZGF5cyAgICAgICBUaGUgZXh0cmEgYW1vdW50IG9mIGRheXNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGhvdXJzICAgICAgVGhlIGV4dHJhIGFtb3VudCBvZiBob3Vyc1xuICAgKiBAcGFyYW0ge051bWJlcn0gbWludXRlcyAgICBUaGUgZXh0cmEgYW1vdW50IG9mIG1pbnV0ZXNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHNlY29uZHMgICAgVGhlIGV4dHJhIGFtb3VudCBvZiBzZWNvbmRzXG4gICAqL1xuICBzdGF0aWMgYWRqdXN0X2NoYW5nZShjaGFuZ2UsIGRheXMsIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSB7XG4gICAgcmV0dXJuIFRpbWUucHJvdG90eXBlLmFkanVzdC5jYWxsKFxuICAgICAgY2hhbmdlLFxuICAgICAgZGF5cyxcbiAgICAgIGhvdXJzLFxuICAgICAgbWludXRlcyxcbiAgICAgIHNlY29uZHMsXG4gICAgICBjaGFuZ2VcbiAgICApO1xuICB9XG5cbiAgc3RhdGljIF9taW5pbXVtRXhwYW5zaW9uWWVhciA9IC0xO1xuICBzdGF0aWMgRVhUUkFfQ09WRVJBR0UgPSA1O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuVGltZXpvbmUgaW5zdGFuY2UsIGJ5IHBhc3NpbmcgaW4gYSB0emlkIGFuZCBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fE9iamVjdH0gZGF0YSBvcHRpb25zIGZvciBjbGFzc1xuICAgKiBAcGFyYW0ge1N0cmluZ3xDb21wb25lbnR9IGRhdGEuY29tcG9uZW50XG4gICAqICAgICAgICBJZiBkYXRhIGlzIGEgc2ltcGxlIG9iamVjdCwgdGhlbiB0aGlzIG1lbWJlciBjYW4gYmUgc2V0IHRvIGVpdGhlciBhXG4gICAqICAgICAgICBzdHJpbmcgY29udGFpbmluZyB0aGUgY29tcG9uZW50IGRhdGEsIG9yIGFuIGFscmVhZHkgcGFyc2VkXG4gICAqICAgICAgICBJQ0FMLkNvbXBvbmVudFxuICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0YS50emlkICAgICAgVGhlIHRpbWV6b25lIGlkZW50aWZpZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGEubG9jYXRpb24gIFRoZSB0aW1lem9uZSBsb2NhdGlvbndcbiAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGEudHpuYW1lcyAgIEFuIGFsdGVybmF0aXZlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXpvbmVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRhdGEubGF0aXR1ZGUgIFRoZSBsYXRpdHVkZSBvZiB0aGUgdGltZXpvbmVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRhdGEubG9uZ2l0dWRlIFRoZSBsb25naXR1ZGUgb2YgdGhlIHRpbWV6b25lXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgdGhpcy53cmFwcGVkSlNPYmplY3QgPSB0aGlzO1xuICAgIHRoaXMuZnJvbURhdGEoZGF0YSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBUaW1lem9uZSBpZGVudGlmaWVyXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICB0emlkID0gXCJcIjtcblxuICAvKipcbiAgICogVGltZXpvbmUgbG9jYXRpb25cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGxvY2F0aW9uID0gXCJcIjtcblxuICAvKipcbiAgICogQWx0ZXJuYXRpdmUgdGltZXpvbmUgbmFtZSwgZm9yIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb25cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIHR6bmFtZXMgPSBcIlwiO1xuXG4gIC8qKlxuICAgKiBUaGUgcHJpbWFyeSBsYXRpdHVkZSBmb3IgdGhlIHRpbWV6b25lLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgbGF0aXR1ZGUgPSAwLjA7XG5cbiAgLyoqXG4gICAqIFRoZSBwcmltYXJ5IGxvbmdpdHVkZSBmb3IgdGhlIHRpbWV6b25lLlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgbG9uZ2l0dWRlID0gMC4wO1xuXG4gIC8qKlxuICAgKiBUaGUgdnRpbWV6b25lIGNvbXBvbmVudCBmb3IgdGhpcyB0aW1lem9uZS5cbiAgICogQHR5cGUge0NvbXBvbmVudH1cbiAgICovXG4gIGNvbXBvbmVudCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSB5ZWFyIHRoaXMgdGltZXpvbmUgaGFzIGJlZW4gZXhwYW5kZWQgdG8uIEFsbCB0aW1lem9uZSB0cmFuc2l0aW9uXG4gICAqIGRhdGVzIHVudGlsIHRoaXMgeWVhciBhcmUga25vd24gYW5kIGNhbiBiZSB1c2VkIGZvciBjYWxjdWxhdGlvblxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKi9cbiAgZXhwYW5kZWRVbnRpbFllYXIgPSAwO1xuXG4gIC8qKlxuICAgKiBUaGUgY2xhc3MgaWRlbnRpZmllci5cbiAgICogQGNvbnN0YW50XG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEBkZWZhdWx0IFwiaWNhbHRpbWV6b25lXCJcbiAgICovXG4gIGljYWxjbGFzcyA9IFwiaWNhbHRpbWV6b25lXCI7XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgdGhlIGN1cnJlbnQgaW5zdGFuY2UgdXNpbmcgbWVtYmVycyBmcm9tIHRoZSBwYXNzZWQgZGF0YSBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fE9iamVjdH0gYURhdGEgb3B0aW9ucyBmb3IgY2xhc3NcbiAgICogQHBhcmFtIHtTdHJpbmd8Q29tcG9uZW50fSBhRGF0YS5jb21wb25lbnRcbiAgICogICAgICAgIElmIGFEYXRhIGlzIGEgc2ltcGxlIG9iamVjdCwgdGhlbiB0aGlzIG1lbWJlciBjYW4gYmUgc2V0IHRvIGVpdGhlciBhXG4gICAqICAgICAgICBzdHJpbmcgY29udGFpbmluZyB0aGUgY29tcG9uZW50IGRhdGEsIG9yIGFuIGFscmVhZHkgcGFyc2VkXG4gICAqICAgICAgICBJQ0FMLkNvbXBvbmVudFxuICAgKiBAcGFyYW0ge1N0cmluZ30gYURhdGEudHppZCAgICAgIFRoZSB0aW1lem9uZSBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhRGF0YS5sb2NhdGlvbiAgVGhlIHRpbWV6b25lIGxvY2F0aW9ud1xuICAgKiBAcGFyYW0ge1N0cmluZ30gYURhdGEudHpuYW1lcyAgIEFuIGFsdGVybmF0aXZlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXpvbmVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFEYXRhLmxhdGl0dWRlICBUaGUgbGF0aXR1ZGUgb2YgdGhlIHRpbWV6b25lXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBhRGF0YS5sb25naXR1ZGUgVGhlIGxvbmdpdHVkZSBvZiB0aGUgdGltZXpvbmVcbiAgICovXG4gIGZyb21EYXRhKGFEYXRhKSB7XG4gICAgdGhpcy5leHBhbmRlZFVudGlsWWVhciA9IDA7XG4gICAgdGhpcy5jaGFuZ2VzID0gW107XG5cbiAgICBpZiAoYURhdGEgaW5zdGFuY2VvZiBDb21wb25lbnQpIHtcbiAgICAgIC8vIEVpdGhlciBhIGNvbXBvbmVudCBpcyBwYXNzZWQgZGlyZWN0bHlcbiAgICAgIHRoaXMuY29tcG9uZW50ID0gYURhdGE7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE90aGVyd2lzZSB0aGUgY29tcG9uZW50IG1heSBiZSBpbiB0aGUgZGF0YSBvYmplY3RcbiAgICAgIGlmIChhRGF0YSAmJiBcImNvbXBvbmVudFwiIGluIGFEYXRhKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYURhdGEuY29tcG9uZW50ID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAvLyBJZiBhIHN0cmluZyB3YXMgcGFzc2VkLCBwYXJzZSBpdCBhcyBhIGNvbXBvbmVudFxuICAgICAgICAgIGxldCBqQ2FsID0gcGFyc2UoYURhdGEuY29tcG9uZW50KTtcbiAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IG5ldyBDb21wb25lbnQoakNhbCk7XG4gICAgICAgIH0gZWxzZSBpZiAoYURhdGEuY29tcG9uZW50IGluc3RhbmNlb2YgQ29tcG9uZW50KSB7XG4gICAgICAgICAgLy8gSWYgaXQgd2FzIGEgY29tcG9uZW50IGFscmVhZHksIHRoZW4ganVzdCBzZXQgaXRcbiAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGFEYXRhLmNvbXBvbmVudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBPdGhlcndpc2UganVzdCBudWxsIG91dCB0aGUgY29tcG9uZW50XG4gICAgICAgICAgdGhpcy5jb21wb25lbnQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENvcHkgcmVtYWluaW5nIHBhc3NlZCBwcm9wZXJ0aWVzXG4gICAgICBmb3IgKGxldCBwcm9wIG9mIE9QVElPTlMpIHtcbiAgICAgICAgaWYgKGFEYXRhICYmIHByb3AgaW4gYURhdGEpIHtcbiAgICAgICAgICB0aGlzW3Byb3BdID0gYURhdGFbcHJvcF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiB3ZSBoYXZlIGEgY29tcG9uZW50IGJ1dCBubyBUWklELCBhdHRlbXB0IHRvIGdldCBpdCBmcm9tIHRoZVxuICAgIC8vIGNvbXBvbmVudCdzIHByb3BlcnRpZXMuXG4gICAgaWYgKHRoaXMuY29tcG9uZW50IGluc3RhbmNlb2YgQ29tcG9uZW50ICYmICF0aGlzLnR6aWQpIHtcbiAgICAgIHRoaXMudHppZCA9IHRoaXMuY29tcG9uZW50LmdldEZpcnN0UHJvcGVydHlWYWx1ZSgndHppZCcpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmRzIHRoZSB1dGNPZmZzZXQgdGhlIGdpdmVuIHRpbWUgd291bGQgb2NjdXIgaW4gdGhpcyB0aW1lem9uZS5cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lfSB0dCAgICAgICAgIFRoZSB0aW1lIHRvIGNoZWNrIGZvclxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgdXRjIG9mZnNldCBpbiBzZWNvbmRzXG4gICAqL1xuICB1dGNPZmZzZXQodHQpIHtcbiAgICBpZiAodGhpcyA9PSBUaW1lem9uZS51dGNUaW1lem9uZSB8fCB0aGlzID09IFRpbWV6b25lLmxvY2FsVGltZXpvbmUpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHRoaXMuX2Vuc3VyZUNvdmVyYWdlKHR0LnllYXIpO1xuXG4gICAgaWYgKCF0aGlzLmNoYW5nZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBsZXQgdHRfY2hhbmdlID0ge1xuICAgICAgeWVhcjogdHQueWVhcixcbiAgICAgIG1vbnRoOiB0dC5tb250aCxcbiAgICAgIGRheTogdHQuZGF5LFxuICAgICAgaG91cjogdHQuaG91cixcbiAgICAgIG1pbnV0ZTogdHQubWludXRlLFxuICAgICAgc2Vjb25kOiB0dC5zZWNvbmRcbiAgICB9O1xuXG4gICAgbGV0IGNoYW5nZV9udW0gPSB0aGlzLl9maW5kTmVhcmJ5Q2hhbmdlKHR0X2NoYW5nZSk7XG4gICAgbGV0IGNoYW5nZV9udW1fdG9fdXNlID0gLTE7XG4gICAgbGV0IHN0ZXAgPSAxO1xuXG4gICAgLy8gVE9ETzogcmVwbGFjZSB3aXRoIGJpbiBzZWFyY2g/XG4gICAgZm9yICg7Oykge1xuICAgICAgbGV0IGNoYW5nZSA9IGNsb25lKHRoaXMuY2hhbmdlc1tjaGFuZ2VfbnVtXSwgdHJ1ZSk7XG4gICAgICBpZiAoY2hhbmdlLnV0Y09mZnNldCA8IGNoYW5nZS5wcmV2VXRjT2Zmc2V0KSB7XG4gICAgICAgIFRpbWV6b25lLmFkanVzdF9jaGFuZ2UoY2hhbmdlLCAwLCAwLCAwLCBjaGFuZ2UudXRjT2Zmc2V0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFRpbWV6b25lLmFkanVzdF9jaGFuZ2UoY2hhbmdlLCAwLCAwLCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZS5wcmV2VXRjT2Zmc2V0KTtcbiAgICAgIH1cblxuICAgICAgbGV0IGNtcCA9IFRpbWV6b25lLl9jb21wYXJlX2NoYW5nZV9mbih0dF9jaGFuZ2UsIGNoYW5nZSk7XG5cbiAgICAgIGlmIChjbXAgPj0gMCkge1xuICAgICAgICBjaGFuZ2VfbnVtX3RvX3VzZSA9IGNoYW5nZV9udW07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGVwID0gLTE7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGVwID09IC0xICYmIGNoYW5nZV9udW1fdG9fdXNlICE9IC0xKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjaGFuZ2VfbnVtICs9IHN0ZXA7XG5cbiAgICAgIGlmIChjaGFuZ2VfbnVtIDwgMCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYW5nZV9udW0gPj0gdGhpcy5jaGFuZ2VzLmxlbmd0aCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgem9uZV9jaGFuZ2UgPSB0aGlzLmNoYW5nZXNbY2hhbmdlX251bV90b191c2VdO1xuICAgIGxldCB1dGNPZmZzZXRfY2hhbmdlID0gem9uZV9jaGFuZ2UudXRjT2Zmc2V0IC0gem9uZV9jaGFuZ2UucHJldlV0Y09mZnNldDtcblxuICAgIGlmICh1dGNPZmZzZXRfY2hhbmdlIDwgMCAmJiBjaGFuZ2VfbnVtX3RvX3VzZSA+IDApIHtcbiAgICAgIGxldCB0bXBfY2hhbmdlID0gY2xvbmUoem9uZV9jaGFuZ2UsIHRydWUpO1xuICAgICAgVGltZXpvbmUuYWRqdXN0X2NoYW5nZSh0bXBfY2hhbmdlLCAwLCAwLCAwLCB0bXBfY2hhbmdlLnByZXZVdGNPZmZzZXQpO1xuXG4gICAgICBpZiAoVGltZXpvbmUuX2NvbXBhcmVfY2hhbmdlX2ZuKHR0X2NoYW5nZSwgdG1wX2NoYW5nZSkgPCAwKSB7XG4gICAgICAgIGxldCBwcmV2X3pvbmVfY2hhbmdlID0gdGhpcy5jaGFuZ2VzW2NoYW5nZV9udW1fdG9fdXNlIC0gMV07XG5cbiAgICAgICAgbGV0IHdhbnRfZGF5bGlnaHQgPSBmYWxzZTsgLy8gVE9ET1xuXG4gICAgICAgIGlmICh6b25lX2NoYW5nZS5pc19kYXlsaWdodCAhPSB3YW50X2RheWxpZ2h0ICYmXG4gICAgICAgICAgICBwcmV2X3pvbmVfY2hhbmdlLmlzX2RheWxpZ2h0ID09IHdhbnRfZGF5bGlnaHQpIHtcbiAgICAgICAgICB6b25lX2NoYW5nZSA9IHByZXZfem9uZV9jaGFuZ2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUT0RPIHJldHVybiBpc19kYXlsaWdodD9cbiAgICByZXR1cm4gem9uZV9jaGFuZ2UudXRjT2Zmc2V0O1xuICB9XG5cbiAgX2ZpbmROZWFyYnlDaGFuZ2UoY2hhbmdlKSB7XG4gICAgLy8gZmluZCB0aGUgY2xvc2VzdCBtYXRjaFxuICAgIGxldCBpZHggPSBiaW5zZWFyY2hJbnNlcnQoXG4gICAgICB0aGlzLmNoYW5nZXMsXG4gICAgICBjaGFuZ2UsXG4gICAgICBUaW1lem9uZS5fY29tcGFyZV9jaGFuZ2VfZm5cbiAgICApO1xuXG4gICAgaWYgKGlkeCA+PSB0aGlzLmNoYW5nZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmxlbmd0aCAtIDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlkeDtcbiAgfVxuXG4gIF9lbnN1cmVDb3ZlcmFnZShhWWVhcikge1xuICAgIGlmIChUaW1lem9uZS5fbWluaW11bUV4cGFuc2lvblllYXIgPT0gLTEpIHtcbiAgICAgIGxldCB0b2RheSA9IFRpbWUubm93KCk7XG4gICAgICBUaW1lem9uZS5fbWluaW11bUV4cGFuc2lvblllYXIgPSB0b2RheS55ZWFyO1xuICAgIH1cblxuICAgIGxldCBjaGFuZ2VzRW5kWWVhciA9IGFZZWFyO1xuICAgIGlmIChjaGFuZ2VzRW5kWWVhciA8IFRpbWV6b25lLl9taW5pbXVtRXhwYW5zaW9uWWVhcikge1xuICAgICAgY2hhbmdlc0VuZFllYXIgPSBUaW1lem9uZS5fbWluaW11bUV4cGFuc2lvblllYXI7XG4gICAgfVxuXG4gICAgY2hhbmdlc0VuZFllYXIgKz0gVGltZXpvbmUuRVhUUkFfQ09WRVJBR0U7XG5cbiAgICBpZiAoIXRoaXMuY2hhbmdlcy5sZW5ndGggfHwgdGhpcy5leHBhbmRlZFVudGlsWWVhciA8IGFZZWFyKSB7XG4gICAgICBsZXQgc3ViY29tcHMgPSB0aGlzLmNvbXBvbmVudC5nZXRBbGxTdWJjb21wb25lbnRzKCk7XG4gICAgICBsZXQgY29tcExlbiA9IHN1YmNvbXBzLmxlbmd0aDtcbiAgICAgIGxldCBjb21wSWR4ID0gMDtcblxuICAgICAgZm9yICg7IGNvbXBJZHggPCBjb21wTGVuOyBjb21wSWR4KyspIHtcbiAgICAgICAgdGhpcy5fZXhwYW5kQ29tcG9uZW50KFxuICAgICAgICAgIHN1YmNvbXBzW2NvbXBJZHhdLCBjaGFuZ2VzRW5kWWVhciwgdGhpcy5jaGFuZ2VzXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2hhbmdlcy5zb3J0KFRpbWV6b25lLl9jb21wYXJlX2NoYW5nZV9mbik7XG4gICAgICB0aGlzLmV4cGFuZGVkVW50aWxZZWFyID0gY2hhbmdlc0VuZFllYXI7XG4gICAgfVxuICB9XG5cbiAgX2V4cGFuZENvbXBvbmVudChhQ29tcG9uZW50LCBhWWVhciwgY2hhbmdlcykge1xuICAgIGlmICghYUNvbXBvbmVudC5oYXNQcm9wZXJ0eShcImR0c3RhcnRcIikgfHxcbiAgICAgICAgIWFDb21wb25lbnQuaGFzUHJvcGVydHkoXCJ0em9mZnNldHRvXCIpIHx8XG4gICAgICAgICFhQ29tcG9uZW50Lmhhc1Byb3BlcnR5KFwidHpvZmZzZXRmcm9tXCIpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBsZXQgZHRzdGFydCA9IGFDb21wb25lbnQuZ2V0Rmlyc3RQcm9wZXJ0eShcImR0c3RhcnRcIikuZ2V0Rmlyc3RWYWx1ZSgpO1xuICAgIGxldCBjaGFuZ2U7XG5cbiAgICBmdW5jdGlvbiBjb252ZXJ0X3R6b2Zmc2V0KG9mZnNldCkge1xuICAgICAgcmV0dXJuIG9mZnNldC5mYWN0b3IgKiAob2Zmc2V0LmhvdXJzICogMzYwMCArIG9mZnNldC5taW51dGVzICogNjApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXRfY2hhbmdlcygpIHtcbiAgICAgIGxldCBjaGFuZ2ViYXNlID0ge307XG4gICAgICBjaGFuZ2ViYXNlLmlzX2RheWxpZ2h0ID0gKGFDb21wb25lbnQubmFtZSA9PSBcImRheWxpZ2h0XCIpO1xuICAgICAgY2hhbmdlYmFzZS51dGNPZmZzZXQgPSBjb252ZXJ0X3R6b2Zmc2V0KFxuICAgICAgICBhQ29tcG9uZW50LmdldEZpcnN0UHJvcGVydHkoXCJ0em9mZnNldHRvXCIpLmdldEZpcnN0VmFsdWUoKVxuICAgICAgKTtcblxuICAgICAgY2hhbmdlYmFzZS5wcmV2VXRjT2Zmc2V0ID0gY29udmVydF90em9mZnNldChcbiAgICAgICAgYUNvbXBvbmVudC5nZXRGaXJzdFByb3BlcnR5KFwidHpvZmZzZXRmcm9tXCIpLmdldEZpcnN0VmFsdWUoKVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIGNoYW5nZWJhc2U7XG4gICAgfVxuXG4gICAgaWYgKCFhQ29tcG9uZW50Lmhhc1Byb3BlcnR5KFwicnJ1bGVcIikgJiYgIWFDb21wb25lbnQuaGFzUHJvcGVydHkoXCJyZGF0ZVwiKSkge1xuICAgICAgY2hhbmdlID0gaW5pdF9jaGFuZ2VzKCk7XG4gICAgICBjaGFuZ2UueWVhciA9IGR0c3RhcnQueWVhcjtcbiAgICAgIGNoYW5nZS5tb250aCA9IGR0c3RhcnQubW9udGg7XG4gICAgICBjaGFuZ2UuZGF5ID0gZHRzdGFydC5kYXk7XG4gICAgICBjaGFuZ2UuaG91ciA9IGR0c3RhcnQuaG91cjtcbiAgICAgIGNoYW5nZS5taW51dGUgPSBkdHN0YXJ0Lm1pbnV0ZTtcbiAgICAgIGNoYW5nZS5zZWNvbmQgPSBkdHN0YXJ0LnNlY29uZDtcblxuICAgICAgVGltZXpvbmUuYWRqdXN0X2NoYW5nZShjaGFuZ2UsIDAsIDAsIDAsIC1jaGFuZ2UucHJldlV0Y09mZnNldCk7XG4gICAgICBjaGFuZ2VzLnB1c2goY2hhbmdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHByb3BzID0gYUNvbXBvbmVudC5nZXRBbGxQcm9wZXJ0aWVzKFwicmRhdGVcIik7XG4gICAgICBmb3IgKGxldCByZGF0ZSBvZiBwcm9wcykge1xuICAgICAgICBsZXQgdGltZSA9IHJkYXRlLmdldEZpcnN0VmFsdWUoKTtcbiAgICAgICAgY2hhbmdlID0gaW5pdF9jaGFuZ2VzKCk7XG5cbiAgICAgICAgY2hhbmdlLnllYXIgPSB0aW1lLnllYXI7XG4gICAgICAgIGNoYW5nZS5tb250aCA9IHRpbWUubW9udGg7XG4gICAgICAgIGNoYW5nZS5kYXkgPSB0aW1lLmRheTtcblxuICAgICAgICBpZiAodGltZS5pc0RhdGUpIHtcbiAgICAgICAgICBjaGFuZ2UuaG91ciA9IGR0c3RhcnQuaG91cjtcbiAgICAgICAgICBjaGFuZ2UubWludXRlID0gZHRzdGFydC5taW51dGU7XG4gICAgICAgICAgY2hhbmdlLnNlY29uZCA9IGR0c3RhcnQuc2Vjb25kO1xuXG4gICAgICAgICAgaWYgKGR0c3RhcnQuem9uZSAhPSBUaW1lem9uZS51dGNUaW1lem9uZSkge1xuICAgICAgICAgICAgVGltZXpvbmUuYWRqdXN0X2NoYW5nZShjaGFuZ2UsIDAsIDAsIDAsIC1jaGFuZ2UucHJldlV0Y09mZnNldCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoYW5nZS5ob3VyID0gdGltZS5ob3VyO1xuICAgICAgICAgIGNoYW5nZS5taW51dGUgPSB0aW1lLm1pbnV0ZTtcbiAgICAgICAgICBjaGFuZ2Uuc2Vjb25kID0gdGltZS5zZWNvbmQ7XG5cbiAgICAgICAgICBpZiAodGltZS56b25lICE9IFRpbWV6b25lLnV0Y1RpbWV6b25lKSB7XG4gICAgICAgICAgICBUaW1lem9uZS5hZGp1c3RfY2hhbmdlKGNoYW5nZSwgMCwgMCwgMCwgLWNoYW5nZS5wcmV2VXRjT2Zmc2V0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjaGFuZ2VzLnB1c2goY2hhbmdlKTtcbiAgICAgIH1cblxuICAgICAgbGV0IHJydWxlID0gYUNvbXBvbmVudC5nZXRGaXJzdFByb3BlcnR5KFwicnJ1bGVcIik7XG5cbiAgICAgIGlmIChycnVsZSkge1xuICAgICAgICBycnVsZSA9IHJydWxlLmdldEZpcnN0VmFsdWUoKTtcbiAgICAgICAgY2hhbmdlID0gaW5pdF9jaGFuZ2VzKCk7XG5cbiAgICAgICAgaWYgKHJydWxlLnVudGlsICYmIHJydWxlLnVudGlsLnpvbmUgPT0gVGltZXpvbmUudXRjVGltZXpvbmUpIHtcbiAgICAgICAgICBycnVsZS51bnRpbC5hZGp1c3QoMCwgMCwgMCwgY2hhbmdlLnByZXZVdGNPZmZzZXQpO1xuICAgICAgICAgIHJydWxlLnVudGlsLnpvbmUgPSBUaW1lem9uZS5sb2NhbFRpbWV6b25lO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGl0ZXJhdG9yID0gcnJ1bGUuaXRlcmF0b3IoZHRzdGFydCk7XG5cbiAgICAgICAgbGV0IG9jYztcbiAgICAgICAgd2hpbGUgKChvY2MgPSBpdGVyYXRvci5uZXh0KCkpKSB7XG4gICAgICAgICAgY2hhbmdlID0gaW5pdF9jaGFuZ2VzKCk7XG4gICAgICAgICAgaWYgKG9jYy55ZWFyID4gYVllYXIgfHwgIW9jYykge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2hhbmdlLnllYXIgPSBvY2MueWVhcjtcbiAgICAgICAgICBjaGFuZ2UubW9udGggPSBvY2MubW9udGg7XG4gICAgICAgICAgY2hhbmdlLmRheSA9IG9jYy5kYXk7XG4gICAgICAgICAgY2hhbmdlLmhvdXIgPSBvY2MuaG91cjtcbiAgICAgICAgICBjaGFuZ2UubWludXRlID0gb2NjLm1pbnV0ZTtcbiAgICAgICAgICBjaGFuZ2Uuc2Vjb25kID0gb2NjLnNlY29uZDtcbiAgICAgICAgICBjaGFuZ2UuaXNEYXRlID0gb2NjLmlzRGF0ZTtcblxuICAgICAgICAgIFRpbWV6b25lLmFkanVzdF9jaGFuZ2UoY2hhbmdlLCAwLCAwLCAwLCAtY2hhbmdlLnByZXZVdGNPZmZzZXQpO1xuICAgICAgICAgIGNoYW5nZXMucHVzaChjaGFuZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYW5nZXM7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHRpbWV6b25lLlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gKHRoaXMudHpuYW1lcyA/IHRoaXMudHpuYW1lcyA6IHRoaXMudHppZCk7XG4gIH1cbn1cblxuLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cblxubGV0IHpvbmVzID0gbnVsbDtcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBTaW5nbGV0b24gY2xhc3MgdG8gY29udGFpbiB0aW1lem9uZXMuICBSaWdodCBub3cgaXQgaXMgYWxsIG1hbnVhbCByZWdpc3RyeSBpblxuICogdGhlIGZ1dHVyZSB3ZSBtYXkgdXNlIHRoaXMgY2xhc3MgdG8gZG93bmxvYWQgdGltZXpvbmUgaW5mb3JtYXRpb24gb3IgaGFuZGxlXG4gKiBsb2FkaW5nIHByZS1leHBhbmRlZCB0aW1lem9uZXMuXG4gKlxuICogQGV4cG9ydHMgbW9kdWxlOklDQUwuVGltZXpvbmVTZXJ2aWNlXG4gKiBAbWVtYmVyb2YgSUNBTFxuICovXG5jb25zdCBUaW1lem9uZVNlcnZpY2UgPSB7XG4gIGdldCBjb3VudCgpIHtcbiAgICBpZiAoem9uZXMgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHJldHVybiBPYmplY3Qua2V5cyh6b25lcykubGVuZ3RoO1xuICB9LFxuXG4gIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICB6b25lcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgbGV0IHV0YyA9IFRpbWV6b25lLnV0Y1RpbWV6b25lO1xuXG4gICAgem9uZXMuWiA9IHV0YztcbiAgICB6b25lcy5VVEMgPSB1dGM7XG4gICAgem9uZXMuR01UID0gdXRjO1xuICB9LFxuICBfaGFyZF9yZXNldDogZnVuY3Rpb24oKSB7XG4gICAgem9uZXMgPSBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGltZXpvbmUgaWQgaGFzIGJlZW4gcmVnaXN0ZXJlZC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR6aWQgICAgIFRpbWV6b25lIGlkZW50aWZpZXIgKGUuZy4gQW1lcmljYS9Mb3NfQW5nZWxlcylcbiAgICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgIEZhbHNlLCB3aGVuIG5vdCBwcmVzZW50XG4gICAqL1xuICBoYXM6IGZ1bmN0aW9uKHR6aWQpIHtcbiAgICBpZiAoem9uZXMgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gISF6b25lc1t0emlkXTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyBhIHRpbWV6b25lIGJ5IGl0cyB0emlkIGlmIHByZXNlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0emlkICAgICAgICAgICAgICAgVGltZXpvbmUgaWRlbnRpZmllciAoZS5nLiBBbWVyaWNhL0xvc19BbmdlbGVzKVxuICAgKiBAcmV0dXJuIHtUaW1lem9uZSB8IHVuZGVmaW5lZH0gICAgIFRoZSB0aW1lem9uZSwgb3IgdW5kZWZpbmVkIGlmIG5vdCBmb3VuZFxuICAgKi9cbiAgZ2V0OiBmdW5jdGlvbih0emlkKSB7XG4gICAgaWYgKHpvbmVzID09PSBudWxsKSB7XG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHpvbmVzW3R6aWRdO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSB0aW1lem9uZSBvYmplY3Qgb3IgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBvbmVudHxUaW1lem9uZX0gdGltZXpvbmVcbiAgICogICAgICAgIFRoZSBpbml0aWFsaXplZCB6b25lIG9yIHZ0aW1lem9uZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmc9fSBuYW1lXG4gICAqICAgICAgICBUaGUgbmFtZSBvZiB0aGUgdGltZXpvbmUuIERlZmF1bHRzIHRvIHRoZSBjb21wb25lbnQncyBUWklEIGlmIG5vdFxuICAgKiAgICAgICAgcGFzc2VkLlxuICAgKi9cbiAgcmVnaXN0ZXI6IGZ1bmN0aW9uKHRpbWV6b25lLCBuYW1lKSB7XG4gICAgaWYgKHpvbmVzID09PSBudWxsKSB7XG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgfVxuXG4gICAgLy8gVGhpcyBhdm9pZHMgYSBicmVha2luZyBjaGFuZ2UgYnkgdGhlIGNoYW5nZSBvZiBhcmd1bWVudCBvcmRlclxuICAgIC8vIFRPRE8gcmVtb3ZlIGluIHYzXG4gICAgaWYgKHR5cGVvZiB0aW1lem9uZSA9PT0gXCJzdHJpbmdcIiAmJiBuYW1lIGluc3RhbmNlb2YgVGltZXpvbmUpIHtcbiAgICAgIFt0aW1lem9uZSwgbmFtZV0gPSBbbmFtZSwgdGltZXpvbmVdO1xuICAgIH1cblxuICAgIGlmICghbmFtZSkge1xuICAgICAgaWYgKHRpbWV6b25lIGluc3RhbmNlb2YgVGltZXpvbmUpIHtcbiAgICAgICAgbmFtZSA9IHRpbWV6b25lLnR6aWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGltZXpvbmUubmFtZSA9PT0gJ3Z0aW1lem9uZScpIHtcbiAgICAgICAgICB0aW1lem9uZSA9IG5ldyBUaW1lem9uZSh0aW1lem9uZSk7XG4gICAgICAgICAgbmFtZSA9IHRpbWV6b25lLnR6aWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIW5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJOZWl0aGVyIGEgdGltZXpvbmUgbm9yIGEgbmFtZSB3YXMgcGFzc2VkXCIpO1xuICAgIH1cblxuICAgIGlmICh0aW1lem9uZSBpbnN0YW5jZW9mIFRpbWV6b25lKSB7XG4gICAgICB6b25lc1tuYW1lXSA9IHRpbWV6b25lO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd0aW1lem9uZSBtdXN0IGJlIElDQUwuVGltZXpvbmUgb3IgSUNBTC5Db21wb25lbnQnKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSB0aW1lem9uZSBieSBpdHMgdHppZCBmcm9tIHRoZSBsaXN0LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHppZCAgICAgVGltZXpvbmUgaWRlbnRpZmllciAoZS5nLiBBbWVyaWNhL0xvc19BbmdlbGVzKVxuICAgKiBAcmV0dXJuIHs/VGltZXpvbmV9ICAgICAgVGhlIHJlbW92ZWQgdGltZXpvbmUsIG9yIG51bGwgaWYgbm90IHJlZ2lzdGVyZWRcbiAgICovXG4gIHJlbW92ZTogZnVuY3Rpb24odHppZCkge1xuICAgIGlmICh6b25lcyA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIChkZWxldGUgem9uZXNbdHppZF0pO1xuICB9XG59O1xuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbnMgdXNlZCBpbiB2YXJpb3VzIHBsYWNlcyB3aXRoaW4gaWNhbC5qc1xuICogQG1vZHVsZSBJQ0FMLmhlbHBlcnNcbiAqL1xuXG4vKipcbiAqIENvbXBpbGVzIGEgbGlzdCBvZiBhbGwgcmVmZXJlbmNlZCBUWklEcyBpbiBhbGwgc3ViY29tcG9uZW50cyBhbmRcbiAqIHJlbW92ZXMgYW55IGV4dHJhIFZUSU1FWk9ORSBzdWJjb21wb25lbnRzLiBJbiBhZGRpdGlvbiwgaWYgYW55IFRaSURzXG4gKiBhcmUgcmVmZXJlbmNlZCBieSBhIGNvbXBvbmVudCwgYnV0IGEgVlRJTUVaT05FIGRvZXMgbm90IGV4aXN0LFxuICogYW4gYXR0ZW1wdCB3aWxsIGJlIG1hZGUgdG8gZ2VuZXJhdGUgYSBWVElNRVpPTkUgdXNpbmcgSUNBTC5UaW1lem9uZVNlcnZpY2UuXG4gKlxuICogQHBhcmFtIHtDb21wb25lbnR9IHZjYWwgICAgIFRoZSB0b3AtbGV2ZWwgVkNBTEVOREFSIGNvbXBvbmVudC5cbiAqIEByZXR1cm4ge0NvbXBvbmVudH0gICAgICAgICBUaGUgSUNBTC5Db21wb25lbnQgdGhhdCB3YXMgcGFzc2VkIGluLlxuICovXG5mdW5jdGlvbiB1cGRhdGVUaW1lem9uZXModmNhbCkge1xuICBsZXQgYWxsc3VicywgcHJvcGVydGllcywgdnRpbWV6b25lcywgcmVxVHppZCwgaTtcblxuICBpZiAoIXZjYWwgfHwgdmNhbC5uYW1lICE9PSBcInZjYWxlbmRhclwiKSB7XG4gICAgLy9ub3QgYSB0b3AtbGV2ZWwgdmNhbGVuZGFyIGNvbXBvbmVudFxuICAgIHJldHVybiB2Y2FsO1xuICB9XG5cbiAgLy9TdG9yZSB2dGltZXpvbmUgc3ViY29tcG9uZW50cyBpbiBhbiBvYmplY3QgcmVmZXJlbmNlIGJ5IHR6aWQuXG4gIC8vU3RvcmUgcHJvcGVydGllcyBmcm9tIGV2ZXJ5dGhpbmcgZWxzZSBpbiBhbm90aGVyIGFycmF5XG4gIGFsbHN1YnMgPSB2Y2FsLmdldEFsbFN1YmNvbXBvbmVudHMoKTtcbiAgcHJvcGVydGllcyA9IFtdO1xuICB2dGltZXpvbmVzID0ge307XG4gIGZvciAoaSA9IDA7IGkgPCBhbGxzdWJzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGFsbHN1YnNbaV0ubmFtZSA9PT0gXCJ2dGltZXpvbmVcIikge1xuICAgICAgbGV0IHR6aWQgPSBhbGxzdWJzW2ldLmdldEZpcnN0UHJvcGVydHkoXCJ0emlkXCIpLmdldEZpcnN0VmFsdWUoKTtcbiAgICAgIHZ0aW1lem9uZXNbdHppZF0gPSBhbGxzdWJzW2ldO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9wZXJ0aWVzID0gcHJvcGVydGllcy5jb25jYXQoYWxsc3Vic1tpXS5nZXRBbGxQcm9wZXJ0aWVzKCkpO1xuICAgIH1cbiAgfVxuXG4gIC8vY3JlYXRlIGFuIG9iamVjdCB3aXRoIG9uZSBlbnRyeSBmb3IgZWFjaCByZXF1aXJlZCB0elxuICByZXFUemlkID0ge307XG4gIGZvciAoaSA9IDA7IGkgPCBwcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IHR6aWQgPSBwcm9wZXJ0aWVzW2ldLmdldFBhcmFtZXRlcihcInR6aWRcIik7XG4gICAgaWYgKHR6aWQpIHtcbiAgICAgIHJlcVR6aWRbdHppZF0gPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8vZGVsZXRlIGFueSB2dGltZXpvbmVzIHRoYXQgYXJlIG5vdCBvbiB0aGUgcmVxVHppZCBsaXN0LlxuICBmb3IgKGxldCBbdHppZCwgY29tcF0gb2YgT2JqZWN0LmVudHJpZXModnRpbWV6b25lcykpIHtcbiAgICBpZiAoIXJlcVR6aWRbdHppZF0pIHtcbiAgICAgIHZjYWwucmVtb3ZlU3ViY29tcG9uZW50KGNvbXApO1xuICAgIH1cbiAgfVxuXG4gIC8vY3JlYXRlIGFueSBtaXNzaW5nLCBidXQgcmVnaXN0ZXJlZCB0aW1lem9uZXNcbiAgZm9yIChsZXQgdHppZCBvZiBPYmplY3Qua2V5cyhyZXFUemlkKSkge1xuICAgIGlmICghdnRpbWV6b25lc1t0emlkXSAmJiBUaW1lem9uZVNlcnZpY2UuaGFzKHR6aWQpKSB7XG4gICAgICB2Y2FsLmFkZFN1YmNvbXBvbmVudChUaW1lem9uZVNlcnZpY2UuZ2V0KHR6aWQpLmNvbXBvbmVudCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHZjYWw7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBnaXZlbiB0eXBlIGlzIG9mIHRoZSBudW1iZXIgdHlwZSBhbmQgYWxzbyBOYU4uXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG51bWJlciAgICAgVGhlIG51bWJlciB0byBjaGVja1xuICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgICAgVHJ1ZSwgaWYgdGhlIG51bWJlciBpcyBzdHJpY3RseSBOYU5cbiAqL1xuZnVuY3Rpb24gaXNTdHJpY3RseU5hTihudW1iZXIpIHtcbiAgcmV0dXJuIHR5cGVvZihudW1iZXIpID09PSAnbnVtYmVyJyAmJiBpc05hTihudW1iZXIpO1xufVxuXG4vKipcbiAqIFBhcnNlcyBhIHN0cmluZyB2YWx1ZSB0aGF0IGlzIGV4cGVjdGVkIHRvIGJlIGFuIGludGVnZXIsIHdoZW4gdGhlIHZhbGlkIGlzXG4gKiBub3QgYW4gaW50ZWdlciB0aHJvd3MgYSBkZWNvcmF0aW9uIGVycm9yLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgICAgIFJhdyBzdHJpbmcgaW5wdXRcbiAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgIFBhcnNlZCBpbnRlZ2VyXG4gKi9cbmZ1bmN0aW9uIHN0cmljdFBhcnNlSW50KHN0cmluZykge1xuICBsZXQgcmVzdWx0ID0gcGFyc2VJbnQoc3RyaW5nLCAxMCk7XG5cbiAgaWYgKGlzU3RyaWN0bHlOYU4ocmVzdWx0KSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdDb3VsZCBub3QgZXh0cmFjdCBpbnRlZ2VyIGZyb20gXCInICsgc3RyaW5nICsgJ1wiJ1xuICAgICk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgb3IgcmV0dXJucyBhIGNsYXNzIGluc3RhbmNlIG9mIGEgZ2l2ZW4gdHlwZSB3aXRoIHRoZSBpbml0aWFsaXphdGlvblxuICogZGF0YSBpZiB0aGUgZGF0YSBpcyBub3QgYWxyZWFkeSBhbiBpbnN0YW5jZSBvZiB0aGUgZ2l2ZW4gdHlwZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogdmFyIHRpbWUgPSBuZXcgSUNBTC5UaW1lKC4uLik7XG4gKiB2YXIgcmVzdWx0ID0gSUNBTC5oZWxwZXJzLmZvcm1hdENsYXNzVHlwZSh0aW1lLCBJQ0FMLlRpbWUpO1xuICpcbiAqIChyZXN1bHQgaW5zdGFuY2VvZiBJQ0FMLlRpbWUpXG4gKiAvLyA9PiB0cnVlXG4gKlxuICogcmVzdWx0ID0gSUNBTC5oZWxwZXJzLmZvcm1hdENsYXNzVHlwZSh7fSwgSUNBTC5UaW1lKTtcbiAqIChyZXN1bHQgaXNudGFuY2VvZiBJQ0FMLlRpbWUpXG4gKiAvLyA9PiB0cnVlXG4gKlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhICAgICAgIG9iamVjdCBpbml0aWFsaXphdGlvbiBkYXRhXG4gKiBAcGFyYW0ge09iamVjdH0gdHlwZSAgICAgICBvYmplY3QgdHlwZSAobGlrZSBJQ0FMLlRpbWUpXG4gKiBAcmV0dXJuIHs/fSAgICAgICAgICAgICAgICBBbiBpbnN0YW5jZSBvZiB0aGUgZm91bmQgdHlwZS5cbiAqL1xuZnVuY3Rpb24gZm9ybWF0Q2xhc3NUeXBlKGRhdGEsIHR5cGUpIHtcbiAgaWYgKHR5cGVvZihkYXRhKSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKGRhdGEgaW5zdGFuY2VvZiB0eXBlKSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgcmV0dXJuIG5ldyB0eXBlKGRhdGEpO1xufVxuXG4vKipcbiAqIElkZW50aWNhbCB0byBpbmRleE9mIGJ1dCB3aWxsIG9ubHkgbWF0Y2ggdmFsdWVzIHdoZW4gdGhleSBhcmUgbm90IHByZWNlZGVkXG4gKiBieSBhIGJhY2tzbGFzaCBjaGFyYWN0ZXIuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGJ1ZmZlciAgICAgICAgIFN0cmluZyB0byBzZWFyY2hcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2ggICAgICAgICBWYWx1ZSB0byBsb29rIGZvclxuICogQHBhcmFtIHtOdW1iZXJ9IHBvcyAgICAgICAgICAgIFN0YXJ0IHBvc2l0aW9uXG4gKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgICAgICAgVGhlIHBvc2l0aW9uLCBvciAtMSBpZiBub3QgZm91bmRcbiAqL1xuZnVuY3Rpb24gdW5lc2NhcGVkSW5kZXhPZihidWZmZXIsIHNlYXJjaCwgcG9zKSB7XG4gIHdoaWxlICgocG9zID0gYnVmZmVyLmluZGV4T2Yoc2VhcmNoLCBwb3MpKSAhPT0gLTEpIHtcbiAgICBpZiAocG9zID4gMCAmJiBidWZmZXJbcG9zIC0gMV0gPT09ICdcXFxcJykge1xuICAgICAgcG9zICs9IDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwb3M7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxuLyoqXG4gKiBGaW5kIHRoZSBpbmRleCBmb3IgaW5zZXJ0aW9uIHVzaW5nIGJpbmFyeSBzZWFyY2guXG4gKlxuICogQHBhcmFtIHtBcnJheX0gbGlzdCAgICAgICAgICAgIFRoZSBsaXN0IHRvIHNlYXJjaFxuICogQHBhcmFtIHs/fSBzZWVrVmFsICAgICAgICAgICAgIFRoZSB2YWx1ZSB0byBpbnNlcnRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oPyw/KX0gY21wZnVuYyBUaGUgY29tcGFyaXNvbiBmdW5jLCB0aGF0IGNhblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFyZSB0d28gc2Vla1ZhbHNcbiAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAgICBUaGUgaW5zZXJ0IHBvc2l0aW9uXG4gKi9cbmZ1bmN0aW9uIGJpbnNlYXJjaEluc2VydChsaXN0LCBzZWVrVmFsLCBjbXBmdW5jKSB7XG4gIGlmICghbGlzdC5sZW5ndGgpXG4gICAgcmV0dXJuIDA7XG5cbiAgbGV0IGxvdyA9IDAsIGhpZ2ggPSBsaXN0Lmxlbmd0aCAtIDEsXG4gICAgICBtaWQsIGNtcHZhbDtcblxuICB3aGlsZSAobG93IDw9IGhpZ2gpIHtcbiAgICBtaWQgPSBsb3cgKyBNYXRoLmZsb29yKChoaWdoIC0gbG93KSAvIDIpO1xuICAgIGNtcHZhbCA9IGNtcGZ1bmMoc2Vla1ZhbCwgbGlzdFttaWRdKTtcblxuICAgIGlmIChjbXB2YWwgPCAwKVxuICAgICAgaGlnaCA9IG1pZCAtIDE7XG4gICAgZWxzZSBpZiAoY21wdmFsID4gMClcbiAgICAgIGxvdyA9IG1pZCArIDE7XG4gICAgZWxzZVxuICAgICAgYnJlYWs7XG4gIH1cblxuICBpZiAoY21wdmFsIDwgMClcbiAgICByZXR1cm4gbWlkOyAvLyBpbnNlcnRpb24gaXMgZGlzcGxhY2luZywgc28gdXNlIG1pZCBvdXRyaWdodC5cbiAgZWxzZSBpZiAoY21wdmFsID4gMClcbiAgICByZXR1cm4gbWlkICsgMTtcbiAgZWxzZVxuICAgIHJldHVybiBtaWQ7XG59XG5cbi8qKlxuICogQ2xvbmUgdGhlIHBhc3NlZCBvYmplY3Qgb3IgcHJpbWl0aXZlLiBCeSBkZWZhdWx0IGEgc2hhbGxvdyBjbG9uZSB3aWxsIGJlXG4gKiBleGVjdXRlZC5cbiAqXG4gKiBAcGFyYW0geyp9IGFTcmMgICAgICAgICAgICBUaGUgdGhpbmcgdG8gY2xvbmVcbiAqIEBwYXJhbSB7Qm9vbGVhbj19IGFEZWVwICAgIElmIHRydWUsIGEgZGVlcCBjbG9uZSB3aWxsIGJlIHBlcmZvcm1lZFxuICogQHJldHVybiB7Kn0gICAgICAgICAgICAgICAgVGhlIGNvcHkgb2YgdGhlIHRoaW5nXG4gKi9cbmZ1bmN0aW9uIGNsb25lKGFTcmMsIGFEZWVwKSB7XG4gIGlmICghYVNyYyB8fCB0eXBlb2YgYVNyYyAhPSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIGFTcmM7XG4gIH0gZWxzZSBpZiAoYVNyYyBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoYVNyYy5nZXRUaW1lKCkpO1xuICB9IGVsc2UgaWYgKFwiY2xvbmVcIiBpbiBhU3JjKSB7XG4gICAgcmV0dXJuIGFTcmMuY2xvbmUoKTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFTcmMpKSB7XG4gICAgbGV0IGFyciA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYVNyYy5sZW5ndGg7IGkrKykge1xuICAgICAgYXJyLnB1c2goYURlZXAgPyBjbG9uZShhU3JjW2ldLCB0cnVlKSA6IGFTcmNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gYXJyO1xuICB9IGVsc2Uge1xuICAgIGxldCBvYmogPSB7fTtcbiAgICBmb3IgKGxldCBbbmFtZSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGFTcmMpKSB7XG4gICAgICBpZiAoYURlZXApIHtcbiAgICAgICAgb2JqW25hbWVdID0gY2xvbmUodmFsdWUsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb2JqW25hbWVdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH1cbn1cblxuLyoqXG4gKiBQZXJmb3JtcyBpQ2FsZW5kYXIgbGluZSBmb2xkaW5nLiBBIGxpbmUgZW5kaW5nIGNoYXJhY3RlciBpcyBpbnNlcnRlZCBhbmRcbiAqIHRoZSBuZXh0IGxpbmUgYmVnaW5zIHdpdGggYSB3aGl0ZXNwYWNlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBTVU1NQVJZOlRoaXMgbGluZSB3aWxsIGJlIGZvbGRcbiAqICBlZCByaWdodCBpbiB0aGUgbWlkZGxlIG9mIGEgd29yZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYUxpbmUgICAgICBUaGUgbGluZSB0byBmb2xkXG4gKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgICBUaGUgZm9sZGVkIGxpbmVcbiAqL1xuZnVuY3Rpb24gZm9sZGxpbmUoYUxpbmUpIHtcbiAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gIGxldCBsaW5lID0gYUxpbmUgfHwgXCJcIiwgcG9zID0gMCwgbGluZV9sZW5ndGggPSAwO1xuICAvL3BvcyBjb3VudHMgcG9zaXRpb24gaW4gbGluZSBmb3IgdGhlIFVURi0xNiBwcmVzZW50YXRpb25cbiAgLy9saW5lX2xlbmd0aCBjb3VudHMgdGhlIGJ5dGVzIGZvciB0aGUgVVRGLTggcHJlc2VudGF0aW9uXG4gIHdoaWxlIChsaW5lLmxlbmd0aCkge1xuICAgIGxldCBjcCA9IGxpbmUuY29kZVBvaW50QXQocG9zKTtcbiAgICBpZiAoY3AgPCAxMjgpICsrbGluZV9sZW5ndGg7XG4gICAgZWxzZSBpZiAoY3AgPCAyMDQ4KSBsaW5lX2xlbmd0aCArPSAyOy8vbmVlZHMgMiBVVEYtOCBieXRlc1xuICAgIGVsc2UgaWYgKGNwIDwgNjU1MzYpIGxpbmVfbGVuZ3RoICs9IDM7XG4gICAgZWxzZSBsaW5lX2xlbmd0aCArPSA0OyAvL2NwIGlzIGxlc3MgdGhhbiAxMTE0MTEyXG4gICAgaWYgKGxpbmVfbGVuZ3RoIDwgSUNBTG1vZHVsZS5mb2xkTGVuZ3RoICsgMSlcbiAgICAgIHBvcyArPSBjcCA+IDY1NTM1ID8gMiA6IDE7XG4gICAgZWxzZSB7XG4gICAgICByZXN1bHQgKz0gSUNBTG1vZHVsZS5uZXdMaW5lQ2hhciArIFwiIFwiICsgbGluZS5zbGljZSgwLCBNYXRoLm1heCgwLCBwb3MpKTtcbiAgICAgIGxpbmUgPSBsaW5lLnNsaWNlKE1hdGgubWF4KDAsIHBvcykpO1xuICAgICAgcG9zID0gbGluZV9sZW5ndGggPSAwO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0LnNsaWNlKElDQUxtb2R1bGUubmV3TGluZUNoYXIubGVuZ3RoICsgMSk7XG59XG5cbi8qKlxuICogUGFkcyB0aGUgZ2l2ZW4gc3RyaW5nIG9yIG51bWJlciB3aXRoIHplcm9zIHNvIGl0IHdpbGwgaGF2ZSBhdCBsZWFzdCB0d29cbiAqIGNoYXJhY3RlcnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBkYXRhICAgIFRoZSBzdHJpbmcgb3IgbnVtYmVyIHRvIHBhZFxuICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgICAgICAgIFRoZSBudW1iZXIgcGFkZGVkIGFzIGEgc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIHBhZDIoZGF0YSkge1xuICBpZiAodHlwZW9mKGRhdGEpICE9PSAnc3RyaW5nJykge1xuICAgIC8vIGhhbmRsZSBmcmFjdGlvbnMuXG4gICAgaWYgKHR5cGVvZihkYXRhKSA9PT0gJ251bWJlcicpIHtcbiAgICAgIGRhdGEgPSBwYXJzZUludChkYXRhKTtcbiAgICB9XG4gICAgZGF0YSA9IFN0cmluZyhkYXRhKTtcbiAgfVxuXG4gIGxldCBsZW4gPSBkYXRhLmxlbmd0aDtcblxuICBzd2l0Y2ggKGxlbikge1xuICAgIGNhc2UgMDpcbiAgICAgIHJldHVybiAnMDAnO1xuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiAnMCcgKyBkYXRhO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZGF0YTtcbiAgfVxufVxuXG4vKipcbiAqIFRydW5jYXRlcyB0aGUgZ2l2ZW4gbnVtYmVyLCBjb3JyZWN0bHkgaGFuZGxpbmcgbmVnYXRpdmUgbnVtYmVycy5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbnVtYmVyICAgICBUaGUgbnVtYmVyIHRvIHRydW5jYXRlXG4gKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgICBUaGUgdHJ1bmNhdGVkIG51bWJlclxuICovXG5mdW5jdGlvbiB0cnVuYyhudW1iZXIpIHtcbiAgcmV0dXJuIChudW1iZXIgPCAwID8gTWF0aC5jZWlsKG51bWJlcikgOiBNYXRoLmZsb29yKG51bWJlcikpO1xufVxuXG4vKipcbiAqIFBvb3ItbWFuJ3MgY3Jvc3MtYnJvd3NlciBvYmplY3QgZXh0ZW5zaW9uLiBEb2Vzbid0IHN1cHBvcnQgYWxsIHRoZVxuICogZmVhdHVyZXMsIGJ1dCBlbm91Z2ggZm9yIG91ciB1c2FnZS4gTm90ZSB0aGF0IHRoZSB0YXJnZXQncyBwcm9wZXJ0aWVzIGFyZVxuICogbm90IG92ZXJ3cml0dGVuIHdpdGggdGhlIHNvdXJjZSBwcm9wZXJ0aWVzLlxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgY2hpbGQgPSBJQ0FMLmhlbHBlcnMuZXh0ZW5kKHBhcmVudCwge1xuICogICBcImJhclwiOiAxMjNcbiAqIH0pO1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgICAgIFRoZSBvYmplY3QgdG8gZXh0ZW5kXG4gKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0ICAgICBUaGUgb2JqZWN0IHRvIGV4dGVuZCB3aXRoXG4gKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgICBSZXR1cm5zIHRoZSB0YXJnZXQuXG4gKi9cbmZ1bmN0aW9uIGV4dGVuZChzb3VyY2UsIHRhcmdldCkge1xuICBmb3IgKGxldCBrZXkgaW4gc291cmNlKSB7XG4gICAgbGV0IGRlc2NyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSk7XG4gICAgaWYgKGRlc2NyICYmICFPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBkZXNjcik7XG4gICAgfVxuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbnZhciBoZWxwZXJzID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIGJpbnNlYXJjaEluc2VydDogYmluc2VhcmNoSW5zZXJ0LFxuICBjbG9uZTogY2xvbmUsXG4gIGV4dGVuZDogZXh0ZW5kLFxuICBmb2xkbGluZTogZm9sZGxpbmUsXG4gIGZvcm1hdENsYXNzVHlwZTogZm9ybWF0Q2xhc3NUeXBlLFxuICBpc1N0cmljdGx5TmFOOiBpc1N0cmljdGx5TmFOLFxuICBwYWQyOiBwYWQyLFxuICBzdHJpY3RQYXJzZUludDogc3RyaWN0UGFyc2VJbnQsXG4gIHRydW5jOiB0cnVuYyxcbiAgdW5lc2NhcGVkSW5kZXhPZjogdW5lc2NhcGVkSW5kZXhPZixcbiAgdXBkYXRlVGltZXpvbmVzOiB1cGRhdGVUaW1lem9uZXNcbn0pO1xuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgXCJ1dGMtb2Zmc2V0XCIgdmFsdWUgdHlwZSwgd2l0aCB2YXJpb3VzIGNhbGN1bGF0aW9uIGFuZCBtYW5pcHVsYXRpb25cbiAqIG1ldGhvZHMuXG4gKlxuICogQG1lbWJlcm9mIElDQUxcbiAqL1xuY2xhc3MgVXRjT2Zmc2V0IHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIElDQUwuVXRjT2Zmc2V0fSBpbnN0YW5jZSBmcm9tIHRoZSBwYXNzZWQgc3RyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gYVN0cmluZyAgICBUaGUgc3RyaW5nIHRvIHBhcnNlXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufSAgICAgICAgIFRoZSBjcmVhdGVkIHV0Yy1vZmZzZXQgaW5zdGFuY2VcbiAgICovXG4gIHN0YXRpYyBmcm9tU3RyaW5nKGFTdHJpbmcpIHtcbiAgICAvLyAtMDU6MDBcbiAgICBsZXQgb3B0aW9ucyA9IHt9O1xuICAgIC8vVE9ETzogc3VwcG9ydCBzZWNvbmRzIHBlciByZmM1NTQ1ID9cbiAgICBvcHRpb25zLmZhY3RvciA9IChhU3RyaW5nWzBdID09PSAnKycpID8gMSA6IC0xO1xuICAgIG9wdGlvbnMuaG91cnMgPSBzdHJpY3RQYXJzZUludChhU3RyaW5nLnNsaWNlKDEsIDMpKTtcbiAgICBvcHRpb25zLm1pbnV0ZXMgPSBzdHJpY3RQYXJzZUludChhU3RyaW5nLnNsaWNlKDQsIDYpKTtcblxuICAgIHJldHVybiBuZXcgVXRjT2Zmc2V0KG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIElDQUwuVXRjT2Zmc2V0fSBpbnN0YW5jZSBmcm9tIHRoZSBwYXNzZWQgc2Vjb25kc1xuICAgKiB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGFTZWNvbmRzICAgICAgIFRoZSBudW1iZXIgb2Ygc2Vjb25kcyB0byBjb252ZXJ0XG4gICAqL1xuICBzdGF0aWMgZnJvbVNlY29uZHMoYVNlY29uZHMpIHtcbiAgICBsZXQgaW5zdGFuY2UgPSBuZXcgVXRjT2Zmc2V0KCk7XG4gICAgaW5zdGFuY2UuZnJvbVNlY29uZHMoYVNlY29uZHMpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IElDQUwuVXRjT2Zmc2V0IGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYURhdGEgICAgICAgICAgQW4gb2JqZWN0IHdpdGggbWVtYmVycyBvZiB0aGUgdXRjIG9mZnNldFxuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLmhvdXJzICAgVGhlIGhvdXJzIGZvciB0aGUgdXRjIG9mZnNldFxuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLm1pbnV0ZXMgVGhlIG1pbnV0ZXMgaW4gdGhlIHV0YyBvZmZzZXRcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBhRGF0YS5mYWN0b3IgIFRoZSBmYWN0b3IgZm9yIHRoZSB1dGMtb2Zmc2V0LCBlaXRoZXIgLTEgb3IgMVxuICAgKi9cbiAgY29uc3RydWN0b3IoYURhdGEpIHtcbiAgICB0aGlzLmZyb21EYXRhKGFEYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgaG91cnMgaW4gdGhlIHV0Yy1vZmZzZXRcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGhvdXJzID0gMDtcblxuICAvKipcbiAgICogVGhlIG1pbnV0ZXMgaW4gdGhlIHV0Yy1vZmZzZXRcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIG1pbnV0ZXMgPSAwO1xuXG4gIC8qKlxuICAgKiBUaGUgc2lnbiBvZiB0aGUgdXRjIG9mZnNldCwgMSBmb3IgcG9zaXRpdmUgb2Zmc2V0LCAtMSBmb3IgbmVnYXRpdmVcbiAgICogb2Zmc2V0cy5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGZhY3RvciA9IDE7XG5cbiAgLyoqXG4gICAqIFRoZSB0eXBlIG5hbWUsIHRvIGJlIHVzZWQgaW4gdGhlIGpDYWwgb2JqZWN0LlxuICAgKiBAY29uc3RhbnRcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGRlZmF1bHQgXCJ1dGMtb2Zmc2V0XCJcbiAgICovXG4gIGljYWx0eXBlID0gXCJ1dGMtb2Zmc2V0XCI7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjbG9uZSBvZiB0aGUgdXRjIG9mZnNldCBvYmplY3QuXG4gICAqXG4gICAqIEByZXR1cm4ge1V0Y09mZnNldH0gICAgIFRoZSBjbG9uZWQgb2JqZWN0XG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gVXRjT2Zmc2V0LmZyb21TZWNvbmRzKHRoaXMudG9TZWNvbmRzKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgdGhlIGN1cnJlbnQgaW5zdGFuY2UgdXNpbmcgbWVtYmVycyBmcm9tIHRoZSBwYXNzZWQgZGF0YSBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhRGF0YSAgICAgICAgICBBbiBvYmplY3Qgd2l0aCBtZW1iZXJzIG9mIHRoZSB1dGMgb2Zmc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYURhdGEuaG91cnMgICBUaGUgaG91cnMgZm9yIHRoZSB1dGMgb2Zmc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYURhdGEubWludXRlcyBUaGUgbWludXRlcyBpbiB0aGUgdXRjIG9mZnNldFxuICAgKiBAcGFyYW0ge051bWJlcj19IGFEYXRhLmZhY3RvciAgVGhlIGZhY3RvciBmb3IgdGhlIHV0Yy1vZmZzZXQsIGVpdGhlciAtMSBvciAxXG4gICAqL1xuICBmcm9tRGF0YShhRGF0YSkge1xuICAgIGlmIChhRGF0YSkge1xuICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGFEYXRhKSkge1xuICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fbm9ybWFsaXplKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB1cCB0aGUgY3VycmVudCBpbnN0YW5jZSBmcm9tIHRoZSBnaXZlbiBzZWNvbmRzIHZhbHVlLiBUaGUgc2Vjb25kc1xuICAgKiB2YWx1ZSBpcyB0cnVuY2F0ZWQgdG8gdGhlIG1pbnV0ZS4gT2Zmc2V0cyBhcmUgd3JhcHBlZCB3aGVuIHRoZSB3b3JsZFxuICAgKiBlbmRzLCB0aGUgaG91ciBhZnRlciBVVEMrMTQ6MDAgaXMgVVRDLTEyOjAwLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gYVNlY29uZHMgICAgICAgICBUaGUgc2Vjb25kcyB0byBjb252ZXJ0IGludG8gYW4gb2Zmc2V0XG4gICAqL1xuICBmcm9tU2Vjb25kcyhhU2Vjb25kcykge1xuICAgIGxldCBzZWNzID0gTWF0aC5hYnMoYVNlY29uZHMpO1xuXG4gICAgdGhpcy5mYWN0b3IgPSBhU2Vjb25kcyA8IDAgPyAtMSA6IDE7XG4gICAgdGhpcy5ob3VycyA9IHRydW5jKHNlY3MgLyAzNjAwKTtcblxuICAgIHNlY3MgLT0gKHRoaXMuaG91cnMgKiAzNjAwKTtcbiAgICB0aGlzLm1pbnV0ZXMgPSB0cnVuYyhzZWNzIC8gNjApO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgdGhlIGN1cnJlbnQgb2Zmc2V0IHRvIGEgdmFsdWUgaW4gc2Vjb25kc1xuICAgKlxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgICAgICAgICBUaGUgb2Zmc2V0IGluIHNlY29uZHNcbiAgICovXG4gIHRvU2Vjb25kcygpIHtcbiAgICByZXR1cm4gdGhpcy5mYWN0b3IgKiAoNjAgKiB0aGlzLm1pbnV0ZXMgKyAzNjAwICogdGhpcy5ob3Vycyk7XG4gIH1cblxuICAvKipcbiAgICogQ29tcGFyZSB0aGlzIHV0YyBvZmZzZXQgd2l0aCBhbm90aGVyIG9uZS5cbiAgICpcbiAgICogQHBhcmFtIHtVdGNPZmZzZXR9IG90aGVyICAgICAgICAgICAgIFRoZSBvdGhlciBvZmZzZXQgdG8gY29tcGFyZSB3aXRoXG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAgICAgICAgICAtMSwgMCBvciAxIGZvciBsZXNzL2VxdWFsL2dyZWF0ZXJcbiAgICovXG4gIGNvbXBhcmUob3RoZXIpIHtcbiAgICBsZXQgYSA9IHRoaXMudG9TZWNvbmRzKCk7XG4gICAgbGV0IGIgPSBvdGhlci50b1NlY29uZHMoKTtcbiAgICByZXR1cm4gKGEgPiBiKSAtIChiID4gYSk7XG4gIH1cblxuICBfbm9ybWFsaXplKCkge1xuICAgIC8vIFJhbmdlOiA5NzIwMCBzZWNvbmRzICh3aXRoIDEgaG91ciBpbmJldHdlZW4pXG4gICAgbGV0IHNlY3MgPSB0aGlzLnRvU2Vjb25kcygpO1xuICAgIGxldCBmYWN0b3IgPSB0aGlzLmZhY3RvcjtcbiAgICB3aGlsZSAoc2VjcyA8IC00MzIwMCkgeyAvLyA9IFVUQy0xMjowMFxuICAgICAgc2VjcyArPSA5NzIwMDtcbiAgICB9XG4gICAgd2hpbGUgKHNlY3MgPiA1MDQwMCkgeyAvLyA9IFVUQysxNDowMFxuICAgICAgc2VjcyAtPSA5NzIwMDtcbiAgICB9XG5cbiAgICB0aGlzLmZyb21TZWNvbmRzKHNlY3MpO1xuXG4gICAgLy8gQXZvaWQgY2hhbmdpbmcgdGhlIGZhY3RvciB3aGVuIG9uIHplcm8gc2Vjb25kc1xuICAgIGlmIChzZWNzID09IDApIHtcbiAgICAgIHRoaXMuZmFjdG9yID0gZmFjdG9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgaUNhbGVuZGFyIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHV0Yy1vZmZzZXQuXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIHRvSUNBTFN0cmluZygpIHtcbiAgICByZXR1cm4gZGVzaWduLmljYWxlbmRhci52YWx1ZVsndXRjLW9mZnNldCddLnRvSUNBTCh0aGlzLnRvU3RyaW5nKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyB1dGMtb2Zmc2V0LlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gKHRoaXMuZmFjdG9yID09IDEgPyBcIitcIiA6IFwiLVwiKSArIHBhZDIodGhpcy5ob3VycykgKyAnOicgKyBwYWQyKHRoaXMubWludXRlcyk7XG4gIH1cbn1cblxuLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cblxuLyoqXG4gKiBEZXNjcmliZXMgYSB2Q2FyZCB0aW1lLCB3aGljaCBoYXMgc2xpZ2h0IGRpZmZlcmVuY2VzIHRvIHRoZSBJQ0FMLlRpbWUuXG4gKiBQcm9wZXJ0aWVzIGNhbiBiZSBudWxsIGlmIG5vdCBzcGVjaWZpZWQsIGZvciBleGFtcGxlIGZvciBkYXRlcyB3aXRoXG4gKiByZWR1Y2VkIGFjY3VyYWN5IG9yIHRydW5jYXRpb24uXG4gKlxuICogTm90ZSB0aGF0IGN1cnJlbnRseSBub3QgYWxsIG1ldGhvZHMgYXJlIGNvcnJlY3RseSByZS1pbXBsZW1lbnRlZCBmb3JcbiAqIFZDYXJkVGltZS4gRm9yIGV4YW1wbGUsIGNvbXBhcmlzb24gd2lsbCBoYXZlIHVuZGVmaW5lZCByZXN1bHRzIHdoZW4gc29tZVxuICogbWVtYmVycyBhcmUgbnVsbC5cbiAqXG4gKiBBbHNvLCBub3JtYWxpemF0aW9uIGlzIG5vdCB5ZXQgaW1wbGVtZW50ZWQgZm9yIHRoaXMgY2xhc3MhXG4gKlxuICogQG1lbWJlcm9mIElDQUxcbiAqIEBleHRlbmRzIHtUaW1lfVxuICovXG5jbGFzcyBWQ2FyZFRpbWUgZXh0ZW5kcyBUaW1lIHtcbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgSUNBTC5WQ2FyZFRpbWUgaW5zdGFuY2UgZnJvbSBhIGRhdGUgYW5kL29yIHRpbWUgc3RyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gYVZhbHVlICAgICBUaGUgc3RyaW5nIHRvIGNyZWF0ZSBmcm9tXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhSWNhbFR5cGUgIFRoZSB0eXBlIGZvciB0aGlzIGluc3RhbmNlLCBlLmcuIGRhdGUtYW5kLW9yLXRpbWVcbiAgICogQHJldHVybiB7VkNhcmRUaW1lfSAgICAgICAgVGhlIGRhdGUvdGltZSBpbnN0YW5jZVxuICAgKi9cbiAgc3RhdGljIGZyb21EYXRlQW5kT3JUaW1lU3RyaW5nKGFWYWx1ZSwgYUljYWxUeXBlKSB7XG4gICAgZnVuY3Rpb24gcGFydCh2LCBzLCBlKSB7XG4gICAgICByZXR1cm4gdiA/IHN0cmljdFBhcnNlSW50KHYuc2xpY2UocywgcyArIGUpKSA6IG51bGw7XG4gICAgfVxuICAgIGxldCBwYXJ0cyA9IGFWYWx1ZS5zcGxpdCgnVCcpO1xuICAgIGxldCBkdCA9IHBhcnRzWzBdLCB0bXogPSBwYXJ0c1sxXTtcbiAgICBsZXQgc3BsaXR6b25lID0gdG16ID8gZGVzaWduLnZjYXJkLnZhbHVlLnRpbWUuX3NwbGl0Wm9uZSh0bXopIDogW107XG4gICAgbGV0IHpvbmUgPSBzcGxpdHpvbmVbMF0sIHRtID0gc3BsaXR6b25lWzFdO1xuXG4gICAgbGV0IGR0bGVuID0gZHQgPyBkdC5sZW5ndGggOiAwO1xuICAgIGxldCB0bWxlbiA9IHRtID8gdG0ubGVuZ3RoIDogMDtcblxuICAgIGxldCBoYXNEYXNoRGF0ZSA9IGR0ICYmIGR0WzBdID09ICctJyAmJiBkdFsxXSA9PSAnLSc7XG4gICAgbGV0IGhhc0Rhc2hUaW1lID0gdG0gJiYgdG1bMF0gPT0gJy0nO1xuXG4gICAgbGV0IG8gPSB7XG4gICAgICB5ZWFyOiBoYXNEYXNoRGF0ZSA/IG51bGwgOiBwYXJ0KGR0LCAwLCA0KSxcbiAgICAgIG1vbnRoOiBoYXNEYXNoRGF0ZSAmJiAoZHRsZW4gPT0gNCB8fCBkdGxlbiA9PSA3KSA/IHBhcnQoZHQsIDIsIDIpIDogZHRsZW4gPT0gNyA/IHBhcnQoZHQsIDUsIDIpIDogZHRsZW4gPT0gMTAgPyBwYXJ0KGR0LCA1LCAyKSA6IG51bGwsXG4gICAgICBkYXk6IGR0bGVuID09IDUgPyBwYXJ0KGR0LCAzLCAyKSA6IGR0bGVuID09IDcgJiYgaGFzRGFzaERhdGUgPyBwYXJ0KGR0LCA1LCAyKSA6IGR0bGVuID09IDEwID8gcGFydChkdCwgOCwgMikgOiBudWxsLFxuXG4gICAgICBob3VyOiBoYXNEYXNoVGltZSA/IG51bGwgOiBwYXJ0KHRtLCAwLCAyKSxcbiAgICAgIG1pbnV0ZTogaGFzRGFzaFRpbWUgJiYgdG1sZW4gPT0gMyA/IHBhcnQodG0sIDEsIDIpIDogdG1sZW4gPiA0ID8gaGFzRGFzaFRpbWUgPyBwYXJ0KHRtLCAxLCAyKSA6IHBhcnQodG0sIDMsIDIpIDogbnVsbCxcbiAgICAgIHNlY29uZDogdG1sZW4gPT0gNCA/IHBhcnQodG0sIDIsIDIpIDogdG1sZW4gPT0gNiA/IHBhcnQodG0sIDQsIDIpIDogdG1sZW4gPT0gOCA/IHBhcnQodG0sIDYsIDIpIDogbnVsbFxuICAgIH07XG5cbiAgICBpZiAoem9uZSA9PSAnWicpIHtcbiAgICAgIHpvbmUgPSBUaW1lem9uZS51dGNUaW1lem9uZTtcbiAgICB9IGVsc2UgaWYgKHpvbmUgJiYgem9uZVszXSA9PSAnOicpIHtcbiAgICAgIHpvbmUgPSBVdGNPZmZzZXQuZnJvbVN0cmluZyh6b25lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgem9uZSA9IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBWQ2FyZFRpbWUobywgem9uZSwgYUljYWxUeXBlKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5WQ2FyZFRpbWUgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhlIGRhdGEgZm9yIHRoZSB0aW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS55ZWFyICAgICAgICAgICAgICAgICAgICAgVGhlIHllYXIgZm9yIHRoaXMgZGF0ZVxuICAgKiBAcGFyYW0ge051bWJlcj19IGRhdGEubW9udGggICAgICAgICAgICAgICAgICAgIFRoZSBtb250aCBmb3IgdGhpcyBkYXRlXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS5kYXkgICAgICAgICAgICAgICAgICAgICAgVGhlIGRheSBmb3IgdGhpcyBkYXRlXG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS5ob3VyICAgICAgICAgICAgICAgICAgICAgVGhlIGhvdXIgZm9yIHRoaXMgZGF0ZVxuICAgKiBAcGFyYW0ge051bWJlcj19IGRhdGEubWludXRlICAgICAgICAgICAgICAgICAgIFRoZSBtaW51dGUgZm9yIHRoaXMgZGF0ZVxuICAgKiBAcGFyYW0ge051bWJlcj19IGRhdGEuc2Vjb25kICAgICAgICAgICAgICAgICAgIFRoZSBzZWNvbmQgZm9yIHRoaXMgZGF0ZVxuICAgKiBAcGFyYW0ge1RpbWV6b25lfFV0Y09mZnNldH0gem9uZSAgICAgICAgICAgICAgIFRoZSB0aW1lem9uZSB0byB1c2VcbiAgICogQHBhcmFtIHtTdHJpbmd9IGljYWx0eXBlICAgICAgICAgICAgICAgICAgICAgICBUaGUgdHlwZSBmb3IgdGhpcyBkYXRlL3RpbWUgb2JqZWN0XG4gICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhLCB6b25lLCBpY2FsdHlwZSkge1xuICAgIHN1cGVyKGRhdGEsIHpvbmUpO1xuICAgIHRoaXMuaWNhbHR5cGUgPSBpY2FsdHlwZSB8fCBcImRhdGUtYW5kLW9yLXRpbWVcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY2xhc3MgaWRlbnRpZmllci5cbiAgICogQGNvbnN0YW50XG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEBkZWZhdWx0IFwidmNhcmR0aW1lXCJcbiAgICovXG4gIGljYWxjbGFzcyA9IFwidmNhcmR0aW1lXCI7XG5cbiAgLyoqXG4gICAqIFRoZSB0eXBlIG5hbWUsIHRvIGJlIHVzZWQgaW4gdGhlIGpDYWwgb2JqZWN0LlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAZGVmYXVsdCBcImRhdGUtYW5kLW9yLXRpbWVcIlxuICAgKi9cbiAgaWNhbHR5cGUgPSBcImRhdGUtYW5kLW9yLXRpbWVcIjtcblxuICAvKipcbiAgICogUmV0dXJucyBhIGNsb25lIG9mIHRoZSB2Y2FyZCBkYXRlL3RpbWUgb2JqZWN0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtWQ2FyZFRpbWV9ICAgICBUaGUgY2xvbmVkIG9iamVjdFxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBWQ2FyZFRpbWUodGhpcy5fdGltZSwgdGhpcy56b25lLCB0aGlzLmljYWx0eXBlKTtcbiAgfVxuXG4gIF9ub3JtYWxpemUoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXRkb2NcbiAgICovXG4gIHV0Y09mZnNldCgpIHtcbiAgICBpZiAodGhpcy56b25lIGluc3RhbmNlb2YgVXRjT2Zmc2V0KSB7XG4gICAgICByZXR1cm4gdGhpcy56b25lLnRvU2Vjb25kcygpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gVGltZS5wcm90b3R5cGUudXRjT2Zmc2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gUkZDIDYzNTAgY29tcGxpYW50IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgb2JqZWN0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgdmNhcmQgZGF0ZS90aW1lIHN0cmluZ1xuICAgKi9cbiAgdG9JQ0FMU3RyaW5nKCkge1xuICAgIHJldHVybiBkZXNpZ24udmNhcmQudmFsdWVbdGhpcy5pY2FsdHlwZV0udG9JQ0FMKHRoaXMudG9TdHJpbmcoKSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGRhdGUvdGltZSwgaW4gakNhcmQgZm9ybVxuICAgKiAoaW5jbHVkaW5nIDogYW5kIC0gc2VwYXJhdG9ycykuXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIHRvU3RyaW5nKCkge1xuICAgIGxldCB5ID0gdGhpcy55ZWFyLCBtID0gdGhpcy5tb250aCwgZCA9IHRoaXMuZGF5O1xuICAgIGxldCBoID0gdGhpcy5ob3VyLCBtbSA9IHRoaXMubWludXRlLCBzID0gdGhpcy5zZWNvbmQ7XG5cbiAgICBsZXQgaGFzWWVhciA9IHkgIT09IG51bGwsIGhhc01vbnRoID0gbSAhPT0gbnVsbCwgaGFzRGF5ID0gZCAhPT0gbnVsbDtcbiAgICBsZXQgaGFzSG91ciA9IGggIT09IG51bGwsIGhhc01pbnV0ZSA9IG1tICE9PSBudWxsLCBoYXNTZWNvbmQgPSBzICE9PSBudWxsO1xuXG4gICAgbGV0IGRhdGVwYXJ0ID0gKGhhc1llYXIgPyBwYWQyKHkpICsgKGhhc01vbnRoIHx8IGhhc0RheSA/ICctJyA6ICcnKSA6IChoYXNNb250aCB8fCBoYXNEYXkgPyAnLS0nIDogJycpKSArXG4gICAgICAgICAgICAgICAgICAgKGhhc01vbnRoID8gcGFkMihtKSA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAgKGhhc0RheSA/ICctJyArIHBhZDIoZCkgOiAnJyk7XG4gICAgbGV0IHRpbWVwYXJ0ID0gKGhhc0hvdXIgPyBwYWQyKGgpIDogJy0nKSArIChoYXNIb3VyICYmIGhhc01pbnV0ZSA/ICc6JyA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAgKGhhc01pbnV0ZSA/IHBhZDIobW0pIDogJycpICsgKCFoYXNIb3VyICYmICFoYXNNaW51dGUgPyAnLScgOiAnJykgK1xuICAgICAgICAgICAgICAgICAgIChoYXNNaW51dGUgJiYgaGFzU2Vjb25kID8gJzonIDogJycpICtcbiAgICAgICAgICAgICAgICAgICAoaGFzU2Vjb25kID8gcGFkMihzKSA6ICcnKTtcblxuICAgIGxldCB6b25lO1xuICAgIGlmICh0aGlzLnpvbmUgPT09IFRpbWV6b25lLnV0Y1RpbWV6b25lKSB7XG4gICAgICB6b25lID0gJ1onO1xuICAgIH0gZWxzZSBpZiAodGhpcy56b25lIGluc3RhbmNlb2YgVXRjT2Zmc2V0KSB7XG4gICAgICB6b25lID0gdGhpcy56b25lLnRvU3RyaW5nKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnpvbmUgPT09IFRpbWV6b25lLmxvY2FsVGltZXpvbmUpIHtcbiAgICAgIHpvbmUgPSAnJztcbiAgICB9IGVsc2UgaWYgKHRoaXMuem9uZSBpbnN0YW5jZW9mIFRpbWV6b25lKSB7XG4gICAgICBsZXQgb2Zmc2V0ID0gVXRjT2Zmc2V0LmZyb21TZWNvbmRzKHRoaXMuem9uZS51dGNPZmZzZXQodGhpcykpO1xuICAgICAgem9uZSA9IG9mZnNldC50b1N0cmluZygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB6b25lID0gJyc7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0aGlzLmljYWx0eXBlKSB7XG4gICAgICBjYXNlIFwidGltZVwiOlxuICAgICAgICByZXR1cm4gdGltZXBhcnQgKyB6b25lO1xuICAgICAgY2FzZSBcImRhdGUtYW5kLW9yLXRpbWVcIjpcbiAgICAgIGNhc2UgXCJkYXRlLXRpbWVcIjpcbiAgICAgICAgcmV0dXJuIGRhdGVwYXJ0ICsgKHRpbWVwYXJ0ID09ICctLScgPyAnJyA6ICdUJyArIHRpbWVwYXJ0ICsgem9uZSk7XG4gICAgICBjYXNlIFwiZGF0ZVwiOlxuICAgICAgICByZXR1cm4gZGF0ZXBhcnQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKiBQb3J0aW9ucyBDb3B5cmlnaHQgKEMpIFBoaWxpcHAgS2V3aXNjaCAqL1xuXG5cbi8qKlxuICogVGhpcyBsZXRzIHR5cGVzY3JpcHQgcmVzb2x2ZSBvdXIgY3VzdG9tIHR5cGVzIGluIHRoZVxuICogZ2VuZXJhdGVkIGQudHMgZmlsZXMgKGpzZG9jIHR5cGVkZWZzIGFyZSBjb252ZXJ0ZWQgdG8gdHlwZXNjcmlwdCB0eXBlcykuXG4gKiBJZ25vcmUgcHJldmVudHMgdGhlIHR5cGVkZWZzIGZyb20gYmVpbmcgZG9jdW1lbnRlZCBtb3JlIHRoYW4gb25jZS5cbiAqXG4gKiBAaWdub3JlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS53ZWVrRGF5fSB3ZWVrRGF5XG4gKiBJbXBvcnRzIHRoZSAnd2Vla0RheScgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKi9cblxuLyoqXG4gKiBBbiBpdGVyYXRvciBmb3IgYSBzaW5nbGUgcmVjdXJyZW5jZSBydWxlLiBUaGlzIGNsYXNzIHVzdWFsbHkgZG9lc24ndCBoYXZlIHRvIGJlIGluc3RhbmNpYXRlZFxuICogZGlyZWN0bHksIHRoZSBjb252ZW5pZW5jZSBtZXRob2Qge0BsaW5rIElDQUwuUmVjdXIjaXRlcmF0b3J9IGNhbiBiZSB1c2VkLlxuICpcbiAqIEBtZW1iZXJvZiBJQ0FMXG4gKi9cbmNsYXNzIFJlY3VySXRlcmF0b3Ige1xuICBzdGF0aWMgX2luZGV4TWFwID0ge1xuICAgIFwiQllTRUNPTkRcIjogMCxcbiAgICBcIkJZTUlOVVRFXCI6IDEsXG4gICAgXCJCWUhPVVJcIjogMixcbiAgICBcIkJZREFZXCI6IDMsXG4gICAgXCJCWU1PTlRIREFZXCI6IDQsXG4gICAgXCJCWVlFQVJEQVlcIjogNSxcbiAgICBcIkJZV0VFS05PXCI6IDYsXG4gICAgXCJCWU1PTlRIXCI6IDcsXG4gICAgXCJCWVNFVFBPU1wiOiA4XG4gIH07XG5cbiAgc3RhdGljIF9leHBhbmRNYXAgPSB7XG4gICAgXCJTRUNPTkRMWVwiOiBbMSwgMSwgMSwgMSwgMSwgMSwgMSwgMV0sXG4gICAgXCJNSU5VVEVMWVwiOiBbMiwgMSwgMSwgMSwgMSwgMSwgMSwgMV0sXG4gICAgXCJIT1VSTFlcIjogWzIsIDIsIDEsIDEsIDEsIDEsIDEsIDFdLFxuICAgIFwiREFJTFlcIjogWzIsIDIsIDIsIDEsIDEsIDEsIDEsIDFdLFxuICAgIFwiV0VFS0xZXCI6IFsyLCAyLCAyLCAyLCAzLCAzLCAxLCAxXSxcbiAgICBcIk1PTlRITFlcIjogWzIsIDIsIDIsIDIsIDIsIDMsIDMsIDFdLFxuICAgIFwiWUVBUkxZXCI6IFsyLCAyLCAyLCAyLCAyLCAyLCAyLCAyXVxuICB9O1xuXG4gIHN0YXRpYyBVTktOT1dOID0gMDtcbiAgc3RhdGljIENPTlRSQUNUID0gMTtcbiAgc3RhdGljIEVYUEFORCA9IDI7XG4gIHN0YXRpYyBJTExFR0FMID0gMztcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBJQ0FMLlJlY3VySXRlcmF0b3IgaW5zdGFuY2UuIFRoZSBvcHRpb25zIG9iamVjdCBtYXkgY29udGFpbiBhZGRpdGlvbmFsIG1lbWJlcnNcbiAgICogd2hlbiByZXN1bWluZyBpdGVyYXRpb24gZnJvbSBhIHByZXZpb3VzIHJ1bi5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgICAgICAgICAgICAgICAgVGhlIGl0ZXJhdG9yIG9wdGlvbnNcbiAgICogQHBhcmFtIHtSZWN1cn0gb3B0aW9ucy5ydWxlICAgICAgICAgICAgVGhlIHJ1bGUgdG8gaXRlcmF0ZS5cbiAgICogQHBhcmFtIHtUaW1lfSBvcHRpb25zLmR0c3RhcnQgICAgICAgICAgVGhlIHN0YXJ0IGRhdGUgb2YgdGhlIGV2ZW50LlxuICAgKiBAcGFyYW0ge0Jvb2xlYW49fSBvcHRpb25zLmluaXRpYWxpemVkICBXaGVuIHRydWUsIGFzc3VtZSB0aGF0IG9wdGlvbnMgYXJlXG4gICAqICAgICAgICBmcm9tIGEgcHJldmlvdXNseSBjb25zdHJ1Y3RlZCBpdGVyYXRvci4gSW5pdGlhbGl6YXRpb24gd2lsbCBub3QgYmVcbiAgICogICAgICAgIHJlcGVhdGVkLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuZnJvbURhdGEob3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogVHJ1ZSB3aGVuIGl0ZXJhdGlvbiBpcyBmaW5pc2hlZC5cbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuICBjb21wbGV0ZWQgPSBmYWxzZTtcblxuICAvKipcbiAgICogVGhlIHJ1bGUgdGhhdCBpcyBiZWluZyBpdGVyYXRlZFxuICAgKiBAdHlwZSB7UmVjdXJ9XG4gICAqL1xuICBydWxlID0gbnVsbDtcblxuICAvKipcbiAgICogVGhlIHN0YXJ0IGRhdGUgb2YgdGhlIGV2ZW50IGJlaW5nIGl0ZXJhdGVkLlxuICAgKiBAdHlwZSB7VGltZX1cbiAgICovXG4gIGR0c3RhcnQgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbGFzdCBvY2N1cnJlbmNlIHRoYXQgd2FzIHJldHVybmVkIGZyb20gdGhlXG4gICAqIHtAbGluayBSZWN1ckl0ZXJhdG9yI25leHR9IG1ldGhvZC5cbiAgICogQHR5cGUge1RpbWV9XG4gICAqL1xuICBsYXN0ID0gbnVsbDtcblxuICAvKipcbiAgICogVGhlIHNlcXVlbmNlIG51bWJlciBmcm9tIHRoZSBvY2N1cnJlbmNlXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqL1xuICBvY2N1cnJlbmNlX251bWJlciA9IDA7XG5cbiAgLyoqXG4gICAqIFRoZSBpbmRpY2VzIHVzZWQgZm9yIHRoZSB7QGxpbmsgSUNBTC5SZWN1ckl0ZXJhdG9yI2J5X2RhdGF9IG9iamVjdC5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGJ5X2luZGljZXMgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBJZiB0cnVlLCB0aGUgaXRlcmF0b3IgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZFxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIFRoZSBpbml0aWFsaXpkIGJ5LWRhdGEuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBieV9kYXRhID0gbnVsbDtcblxuICAvKipcbiAgICogVGhlIGV4cGFuZGVkIHllYXJkYXlzXG4gICAqIEB0eXBlIHtBcnJheX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRheXMgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgaW5kZXggaW4gdGhlIHtAbGluayBJQ0FMLlJlY3VySXRlcmF0b3IjZGF5c30gYXJyYXkuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkYXlzX2luZGV4ID0gMDtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSB0aGUgcmVjdXJyZW5jZSBpdGVyYXRvciBmcm9tIHRoZSBwYXNzZWQgZGF0YSBvYmplY3QuIFRoaXNcbiAgICogbWV0aG9kIGlzIHVzdWFsbHkgbm90IGNhbGxlZCBkaXJlY3RseSwgeW91IGNhbiBpbml0aWFsaXplIHRoZSBpdGVyYXRvclxuICAgKiB0aHJvdWdoIHRoZSBjb25zdHJ1Y3Rvci5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgICAgICAgICAgICAgICAgVGhlIGl0ZXJhdG9yIG9wdGlvbnNcbiAgICogQHBhcmFtIHtSZWN1cn0gb3B0aW9ucy5ydWxlICAgICAgICAgICAgVGhlIHJ1bGUgdG8gaXRlcmF0ZS5cbiAgICogQHBhcmFtIHtUaW1lfSBvcHRpb25zLmR0c3RhcnQgICAgICAgICAgVGhlIHN0YXJ0IGRhdGUgb2YgdGhlIGV2ZW50LlxuICAgKiBAcGFyYW0ge0Jvb2xlYW49fSBvcHRpb25zLmluaXRpYWxpemVkICBXaGVuIHRydWUsIGFzc3VtZSB0aGF0IG9wdGlvbnMgYXJlXG4gICAqICAgICAgICBmcm9tIGEgcHJldmlvdXNseSBjb25zdHJ1Y3RlZCBpdGVyYXRvci4gSW5pdGlhbGl6YXRpb24gd2lsbCBub3QgYmVcbiAgICogICAgICAgIHJlcGVhdGVkLlxuICAgKi9cbiAgZnJvbURhdGEob3B0aW9ucykge1xuICAgIHRoaXMucnVsZSA9IGZvcm1hdENsYXNzVHlwZShvcHRpb25zLnJ1bGUsIFJlY3VyKTtcblxuICAgIGlmICghdGhpcy5ydWxlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2l0ZXJhdG9yIHJlcXVpcmVzIGEgKElDQUwuUmVjdXIpIHJ1bGUnKTtcbiAgICB9XG5cbiAgICB0aGlzLmR0c3RhcnQgPSBmb3JtYXRDbGFzc1R5cGUob3B0aW9ucy5kdHN0YXJ0LCBUaW1lKTtcblxuICAgIGlmICghdGhpcy5kdHN0YXJ0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2l0ZXJhdG9yIHJlcXVpcmVzIGEgKElDQUwuVGltZSkgZHRzdGFydCcpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmJ5X2RhdGEpIHtcbiAgICAgIHRoaXMuYnlfZGF0YSA9IG9wdGlvbnMuYnlfZGF0YTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ieV9kYXRhID0gY2xvbmUodGhpcy5ydWxlLnBhcnRzLCB0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5vY2N1cnJlbmNlX251bWJlcilcbiAgICAgIHRoaXMub2NjdXJyZW5jZV9udW1iZXIgPSBvcHRpb25zLm9jY3VycmVuY2VfbnVtYmVyO1xuXG4gICAgdGhpcy5kYXlzID0gb3B0aW9ucy5kYXlzIHx8IFtdO1xuICAgIGlmIChvcHRpb25zLmxhc3QpIHtcbiAgICAgIHRoaXMubGFzdCA9IGZvcm1hdENsYXNzVHlwZShvcHRpb25zLmxhc3QsIFRpbWUpO1xuICAgIH1cblxuICAgIHRoaXMuYnlfaW5kaWNlcyA9IG9wdGlvbnMuYnlfaW5kaWNlcztcblxuICAgIGlmICghdGhpcy5ieV9pbmRpY2VzKSB7XG4gICAgICB0aGlzLmJ5X2luZGljZXMgPSB7XG4gICAgICAgIFwiQllTRUNPTkRcIjogMCxcbiAgICAgICAgXCJCWU1JTlVURVwiOiAwLFxuICAgICAgICBcIkJZSE9VUlwiOiAwLFxuICAgICAgICBcIkJZREFZXCI6IDAsXG4gICAgICAgIFwiQllNT05USFwiOiAwLFxuICAgICAgICBcIkJZV0VFS05PXCI6IDAsXG4gICAgICAgIFwiQllNT05USERBWVwiOiAwXG4gICAgICB9O1xuICAgIH1cblxuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBvcHRpb25zLmluaXRpYWxpemVkIHx8IGZhbHNlO1xuXG4gICAgaWYgKCF0aGlzLmluaXRpYWxpemVkKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBJbnZhbGlkUmVjdXJyZW5jZVJ1bGVFcnJvcikge1xuICAgICAgICAgIC8vIEluaXQgbWF5IGVycm9yIGlmIHRoZXJlIGFyZSBubyBwb3NzaWJsZSByZWN1cnJlbmNlIGluc3RhbmNlcyBmcm9tXG4gICAgICAgICAgLy8gdGhlIHJ1bGUsIGJ1dCB3ZSBkb24ndCB3YW50IHRvIGJ1YmJsZSB0aGlzIGVycm9yIHVwLiBJbnN0ZWFkLCB3ZVxuICAgICAgICAgIC8vIGNyZWF0ZSBhbiBlbXB0eSBpdGVyYXRvci5cbiAgICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUHJvcGFnYXRlIG90aGVyIGVycm9ycyB0byBjb25zdW1lcnMuXG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSBpdGVyYXRvclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaW5pdCgpIHtcbiAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICB0aGlzLmxhc3QgPSB0aGlzLmR0c3RhcnQuY2xvbmUoKTtcbiAgICBsZXQgcGFydHMgPSB0aGlzLmJ5X2RhdGE7XG5cbiAgICBpZiAoXCJCWURBWVwiIGluIHBhcnRzKSB7XG4gICAgICAvLyBsaWJpY2FsIGRvZXMgdGhpcyBlYXJsaWVyIHdoZW4gdGhlIHJ1bGUgaXMgbG9hZGVkLCBidXQgd2UgcG9zdHBvbmUgdG9cbiAgICAgIC8vIG5vdyBzbyB3ZSBjYW4gcHJlc2VydmUgdGhlIG9yaWdpbmFsIG9yZGVyLlxuICAgICAgdGhpcy5zb3J0X2J5ZGF5X3J1bGVzKHBhcnRzLkJZREFZKTtcbiAgICB9XG5cbiAgICAvLyBUaGUgQllZRUFSREFZIG1heSBvbmx5IGFwcGVhciB3aXRoIEJZREFZXG4gICAgaWYgKFwiQllZRUFSREFZXCIgaW4gcGFydHMpIHtcbiAgICAgIGlmIChcIkJZTU9OVEhcIiBpbiBwYXJ0cyB8fCBcIkJZV0VFS05PXCIgaW4gcGFydHMgfHxcbiAgICAgICAgICBcIkJZTU9OVEhEQVlcIiBpbiBwYXJ0cykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEJZWUVBUkRBWSBydWxlXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEJZV0VFS05PIGFuZCBCWU1PTlRIREFZIHJ1bGUgcGFydHMgbWF5IG5vdCBib3RoIGFwcGVhclxuICAgIGlmIChcIkJZV0VFS05PXCIgaW4gcGFydHMgJiYgXCJCWU1PTlRIREFZXCIgaW4gcGFydHMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkJZV0VFS05PIGRvZXMgbm90IGZpdCB0byBCWU1PTlRIREFZXCIpO1xuICAgIH1cblxuICAgIC8vIEZvciBNT05USExZIHJlY3VycmVuY2VzIChGUkVRPU1PTlRITFkpIG5laXRoZXIgQllZRUFSREFZIG5vclxuICAgIC8vIEJZV0VFS05PIG1heSBhcHBlYXIuXG4gICAgaWYgKHRoaXMucnVsZS5mcmVxID09IFwiTU9OVEhMWVwiICYmXG4gICAgICAgIChcIkJZWUVBUkRBWVwiIGluIHBhcnRzIHx8IFwiQllXRUVLTk9cIiBpbiBwYXJ0cykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZvciBNT05USExZIHJlY3VycmVuY2VzIG5laXRoZXIgQllZRUFSREFZIG5vciBCWVdFRUtOTyBtYXkgYXBwZWFyXCIpO1xuICAgIH1cblxuICAgIC8vIEZvciBXRUVLTFkgcmVjdXJyZW5jZXMgKEZSRVE9V0VFS0xZKSBuZWl0aGVyIEJZTU9OVEhEQVkgbm9yXG4gICAgLy8gQllZRUFSREFZIG1heSBhcHBlYXIuXG4gICAgaWYgKHRoaXMucnVsZS5mcmVxID09IFwiV0VFS0xZXCIgJiZcbiAgICAgICAgKFwiQllZRUFSREFZXCIgaW4gcGFydHMgfHwgXCJCWU1PTlRIREFZXCIgaW4gcGFydHMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGb3IgV0VFS0xZIHJlY3VycmVuY2VzIG5laXRoZXIgQllNT05USERBWSBub3IgQllZRUFSREFZIG1heSBhcHBlYXJcIik7XG4gICAgfVxuXG4gICAgLy8gQllZRUFSREFZIG1heSBvbmx5IGFwcGVhciBpbiBZRUFSTFkgcnVsZXNcbiAgICBpZiAodGhpcy5ydWxlLmZyZXEgIT0gXCJZRUFSTFlcIiAmJiBcIkJZWUVBUkRBWVwiIGluIHBhcnRzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCWVlFQVJEQVkgbWF5IG9ubHkgYXBwZWFyIGluIFlFQVJMWSBydWxlc1wiKTtcbiAgICB9XG5cbiAgICB0aGlzLmxhc3Quc2Vjb25kID0gdGhpcy5zZXR1cF9kZWZhdWx0cyhcIkJZU0VDT05EXCIsIFwiU0VDT05ETFlcIiwgdGhpcy5kdHN0YXJ0LnNlY29uZCk7XG4gICAgdGhpcy5sYXN0Lm1pbnV0ZSA9IHRoaXMuc2V0dXBfZGVmYXVsdHMoXCJCWU1JTlVURVwiLCBcIk1JTlVURUxZXCIsIHRoaXMuZHRzdGFydC5taW51dGUpO1xuICAgIHRoaXMubGFzdC5ob3VyID0gdGhpcy5zZXR1cF9kZWZhdWx0cyhcIkJZSE9VUlwiLCBcIkhPVVJMWVwiLCB0aGlzLmR0c3RhcnQuaG91cik7XG4gICAgdGhpcy5sYXN0LmRheSA9IHRoaXMuc2V0dXBfZGVmYXVsdHMoXCJCWU1PTlRIREFZXCIsIFwiREFJTFlcIiwgdGhpcy5kdHN0YXJ0LmRheSk7XG4gICAgdGhpcy5sYXN0Lm1vbnRoID0gdGhpcy5zZXR1cF9kZWZhdWx0cyhcIkJZTU9OVEhcIiwgXCJNT05USExZXCIsIHRoaXMuZHRzdGFydC5tb250aCk7XG5cbiAgICBpZiAodGhpcy5ydWxlLmZyZXEgPT0gXCJXRUVLTFlcIikge1xuICAgICAgaWYgKFwiQllEQVlcIiBpbiBwYXJ0cykge1xuICAgICAgICBsZXQgWywgZG93XSA9IHRoaXMucnVsZURheU9mV2VlayhwYXJ0cy5CWURBWVswXSwgdGhpcy5ydWxlLndrc3QpO1xuICAgICAgICBsZXQgd2tkeSA9IGRvdyAtIHRoaXMubGFzdC5kYXlPZldlZWsodGhpcy5ydWxlLndrc3QpO1xuICAgICAgICBpZiAoKHRoaXMubGFzdC5kYXlPZldlZWsodGhpcy5ydWxlLndrc3QpIDwgZG93ICYmIHdrZHkgPj0gMCkgfHwgd2tkeSA8IDApIHtcbiAgICAgICAgICAvLyBJbml0aWFsIHRpbWUgaXMgYWZ0ZXIgZmlyc3QgZGF5IG9mIEJZREFZIGRhdGFcbiAgICAgICAgICB0aGlzLmxhc3QuZGF5ICs9IHdrZHk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBkYXlOYW1lID0gUmVjdXIubnVtZXJpY0RheVRvSWNhbERheSh0aGlzLmR0c3RhcnQuZGF5T2ZXZWVrKCkpO1xuICAgICAgICBwYXJ0cy5CWURBWSA9IFtkYXlOYW1lXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5ydWxlLmZyZXEgPT0gXCJZRUFSTFlcIikge1xuICAgICAgLy8gU29tZSB5ZWFybHkgcmVjdXJyZW5jZSBydWxlcyBtYXkgYmUgc3BlY2lmaWMgZW5vdWdoIHRvIG5vdCBhY3R1YWxseVxuICAgICAgLy8gb2NjdXIgb24gYSB5ZWFybHkgYmFzaXMsIGUuZy4gdGhlIDI5dGggZGF5IG9mIEZlYnJ1YXJ5IG9yIHRoZSBmaWZ0aFxuICAgICAgLy8gTW9uZGF5IG9mIGEgZ2l2ZW4gbW9udGguIFRoZSBzdGFuZGFyZCBpc24ndCBjbGVhciBvbiB0aGUgaW50ZW5kZWRcbiAgICAgIC8vIGJlaGF2aW9yIGluIHRoZXNlIGNhc2VzLCBidXQgYGxpYmljYWxgIGF0IGxlYXN0IHdpbGwgaXRlcmF0ZSB1bnRpbCBpdFxuICAgICAgLy8gZmluZHMgYSBtYXRjaGluZyB5ZWFyLlxuICAgICAgLy8gQ0FSRUZVTDogU29tZSBydWxlcyBtYXkgc3BlY2lmeSBhbiBvY2N1cnJlbmNlIHRoYXQgY2FuIG5ldmVyIGhhcHBlbixcbiAgICAgIC8vIGUuZy4gdGhlIGZpcnN0IE1vbmRheSBvZiBBcHJpbCBzbyBsb25nIGFzIGl0IGZhbGxzIG9uIHRoZSAxNXRoXG4gICAgICAvLyB0aHJvdWdoIHRoZSAyMXN0LiBEZXRlY3RpbmcgdGhlc2UgaXMgbm9uLXRyaXZpYWwsIHNvIGVuc3VyZSB0aGF0IHdlXG4gICAgICAvLyBzdG9wIGl0ZXJhdGluZyBhdCBzb21lIHBvaW50LlxuICAgICAgY29uc3QgdW50aWxZZWFyID0gdGhpcy5ydWxlLnVudGlsID8gdGhpcy5ydWxlLnVudGlsLnllYXIgOiAyMDAwMDtcbiAgICAgIHdoaWxlICh0aGlzLmxhc3QueWVhciA8PSB1bnRpbFllYXIpIHtcbiAgICAgICAgdGhpcy5leHBhbmRfeWVhcl9kYXlzKHRoaXMubGFzdC55ZWFyKTtcbiAgICAgICAgaWYgKHRoaXMuZGF5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbmNyZW1lbnRfeWVhcih0aGlzLnJ1bGUuaW50ZXJ2YWwpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5kYXlzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkUmVjdXJyZW5jZVJ1bGVFcnJvcigpO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGVyZSdzIG5vIG9jY3VycmVuY2UgaW4gdGhpcyB5ZWFyLCB0cnkgdGhlIGZvbGxvd2luZyB5ZWFycy4gVGhpc1xuICAgICAgLy8gd291bGQgb25seSBoYXBwZW4gbG9va2luZyBmb3IgZGF5IDM2NiBvciAtMzY2LlxuICAgICAgaWYgKCF0aGlzLl9uZXh0QnlZZWFyRGF5KCkgJiYgIXRoaXMubmV4dF95ZWFyKCkgJiYgIXRoaXMubmV4dF95ZWFyKCkgJiYgIXRoaXMubmV4dF95ZWFyKCkpIHtcbiAgICAgICAgLy8gVGhpcyBzaG91bGQgbm90IGJlIHBvc3NpYmxlLCBidXQganVzdCBpbiBjYXNlIGl0IGlzLCBzdG9wLlxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFJlY3VycmVuY2VSdWxlRXJyb3IoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5ydWxlLmZyZXEgPT0gXCJNT05USExZXCIpIHtcbiAgICAgIGlmICh0aGlzLmhhc19ieV9kYXRhKFwiQllEQVlcIikpIHtcbiAgICAgICAgbGV0IHRlbXBMYXN0ID0gbnVsbDtcbiAgICAgICAgbGV0IGluaXRMYXN0ID0gdGhpcy5sYXN0LmNsb25lKCk7XG4gICAgICAgIGxldCBkYXlzSW5Nb250aCA9IFRpbWUuZGF5c0luTW9udGgodGhpcy5sYXN0Lm1vbnRoLCB0aGlzLmxhc3QueWVhcik7XG5cbiAgICAgICAgLy8gQ2hlY2sgZXZlcnkgd2Vla2RheSBpbiBCWURBWSB3aXRoIHJlbGF0aXZlIGRvdyBhbmQgcG9zLlxuICAgICAgICBmb3IgKGxldCBieWRvdyBvZiB0aGlzLmJ5X2RhdGEuQllEQVkpIHtcbiAgICAgICAgICB0aGlzLmxhc3QgPSBpbml0TGFzdC5jbG9uZSgpO1xuICAgICAgICAgIGxldCBbcG9zLCBkb3ddID0gdGhpcy5ydWxlRGF5T2ZXZWVrKGJ5ZG93KTtcbiAgICAgICAgICBsZXQgZGF5T2ZNb250aCA9IHRoaXMubGFzdC5udGhXZWVrRGF5KGRvdywgcG9zKTtcblxuICAgICAgICAgIC8vIElmIHxwb3N8ID49IDYsIHRoZSBieWRheSBpcyBpbnZhbGlkIGZvciBhIG1vbnRobHkgcnVsZS5cbiAgICAgICAgICBpZiAocG9zID49IDYgfHwgcG9zIDw9IC02KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYWxmb3JtZWQgdmFsdWVzIGluIEJZREFZIHBhcnRcIik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSWYgYSBCeWRheSB3aXRoIHBvcz0rLy01IGlzIG5vdCBpbiB0aGUgY3VycmVudCBtb250aCBpdFxuICAgICAgICAgIC8vIG11c3QgYmUgc2VhcmNoZWQgaW4gdGhlIG5leHQgbW9udGhzLlxuICAgICAgICAgIGlmIChkYXlPZk1vbnRoID4gZGF5c0luTW9udGggfHwgZGF5T2ZNb250aCA8PSAwKSB7XG4gICAgICAgICAgICAvLyBTa2lwIGlmIHdlIGhhdmUgYWxyZWFkeSBmb3VuZCBhIFwibGFzdFwiIGluIHRoaXMgbW9udGguXG4gICAgICAgICAgICBpZiAodGVtcExhc3QgJiYgdGVtcExhc3QubW9udGggPT0gaW5pdExhc3QubW9udGgpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoZGF5T2ZNb250aCA+IGRheXNJbk1vbnRoIHx8IGRheU9mTW9udGggPD0gMCkge1xuICAgICAgICAgICAgICB0aGlzLmluY3JlbWVudF9tb250aCgpO1xuICAgICAgICAgICAgICBkYXlzSW5Nb250aCA9IFRpbWUuZGF5c0luTW9udGgodGhpcy5sYXN0Lm1vbnRoLCB0aGlzLmxhc3QueWVhcik7XG4gICAgICAgICAgICAgIGRheU9mTW9udGggPSB0aGlzLmxhc3QubnRoV2Vla0RheShkb3csIHBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5sYXN0LmRheSA9IGRheU9mTW9udGg7XG4gICAgICAgICAgaWYgKCF0ZW1wTGFzdCB8fCB0aGlzLmxhc3QuY29tcGFyZSh0ZW1wTGFzdCkgPCAwKSB7XG4gICAgICAgICAgICB0ZW1wTGFzdCA9IHRoaXMubGFzdC5jbG9uZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3QgPSB0ZW1wTGFzdC5jbG9uZSgpO1xuXG4gICAgICAgIC8vWFhYOiBUaGlzIGZlZWxzIGxpa2UgYSBoYWNrLCBidXQgd2UgbmVlZCB0byBpbml0aWFsaXplXG4gICAgICAgIC8vICAgICB0aGUgQllNT05USERBWSBjYXNlIGNvcnJlY3RseSBhbmQgYnlEYXlBbmRNb250aERheSBoYW5kbGVzXG4gICAgICAgIC8vICAgICB0aGlzIGNhc2UuIEl0IGFjY2VwdHMgYSBzcGVjaWFsIGZsYWcgd2hpY2ggd2lsbCBhdm9pZCBpbmNyZW1lbnRpbmdcbiAgICAgICAgLy8gICAgIHRoZSBpbml0aWFsIHZhbHVlIHdpdGhvdXQgdGhlIGZsYWcgZGF5cyB0aGF0IG1hdGNoIHRoZSBzdGFydCB0aW1lXG4gICAgICAgIC8vICAgICB3b3VsZCBiZSBtaXNzZWQuXG4gICAgICAgIGlmICh0aGlzLmhhc19ieV9kYXRhKCdCWU1PTlRIREFZJykpIHtcbiAgICAgICAgICB0aGlzLl9ieURheUFuZE1vbnRoRGF5KHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubGFzdC5kYXkgPiBkYXlzSW5Nb250aCB8fCB0aGlzLmxhc3QuZGF5ID09IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYWxmb3JtZWQgdmFsdWVzIGluIEJZREFZIHBhcnRcIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5oYXNfYnlfZGF0YShcIkJZTU9OVEhEQVlcIikpIHtcbiAgICAgICAgLy8gQ2hhbmdlIHRoZSBkYXkgdmFsdWUgc28gdGhhdCBub3JtYWxpc2F0aW9uIHdvbid0IGNoYW5nZSB0aGUgbW9udGguXG4gICAgICAgIHRoaXMubGFzdC5kYXkgPSAxO1xuXG4gICAgICAgIC8vIEdldCBhIHNvcnRlZCBsaXN0IG9mIGRheXMgaW4gdGhlIHN0YXJ0aW5nIG1vbnRoIHRoYXQgbWF0Y2ggdGhlIHJ1bGUuXG4gICAgICAgIGxldCBub3JtYWxpemVkID0gdGhpcy5ub3JtYWxpemVCeU1vbnRoRGF5UnVsZXMoXG4gICAgICAgICAgdGhpcy5sYXN0LnllYXIsXG4gICAgICAgICAgdGhpcy5sYXN0Lm1vbnRoLFxuICAgICAgICAgIHRoaXMucnVsZS5wYXJ0cy5CWU1PTlRIREFZXG4gICAgICAgICkuZmlsdGVyKGQgPT4gZCA+PSB0aGlzLmxhc3QuZGF5KTtcblxuICAgICAgICBpZiAobm9ybWFsaXplZC5sZW5ndGgpIHtcbiAgICAgICAgICAvLyBUaGVyZSdzIGF0IGxlYXN0IG9uZSB2YWxpZCBkYXksIHVzZSBpdC5cbiAgICAgICAgICB0aGlzLmxhc3QuZGF5ID0gbm9ybWFsaXplZFswXTtcbiAgICAgICAgICB0aGlzLmJ5X2RhdGEuQllNT05USERBWSA9IG5vcm1hbGl6ZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVGhlcmUncyBubyBvY2N1cnJlbmNlIGluIHRoaXMgbW9udGgsIGZpbmQgdGhlIG5leHQgdmFsaWQgbW9udGguXG4gICAgICAgICAgLy8gVGhlIGxvbmdlc3QgcG9zc2libGUgc2VxdWVuY2Ugb2Ygc2tpcHBlZCBtb250aHMgaXMgRmVicnVhcnktQXByaWwtSnVuZSxcbiAgICAgICAgICAvLyBzbyB3ZSBtaWdodCBuZWVkIHRvIGNhbGwgbmV4dF9tb250aCB1cCB0byB0aHJlZSB0aW1lcy5cbiAgICAgICAgICBpZiAoIXRoaXMubmV4dF9tb250aCgpICYmICF0aGlzLm5leHRfbW9udGgoKSAmJiAhdGhpcy5uZXh0X21vbnRoKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkUmVjdXJyZW5jZVJ1bGVFcnJvcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSB0aGUgbmV4dCBvY2N1cnJlbmNlIGZyb20gdGhlIGl0ZXJhdG9yLlxuICAgKiBAcmV0dXJuIHtUaW1lfVxuICAgKi9cbiAgbmV4dChhZ2FpbiA9IGZhbHNlKSB7XG4gICAgbGV0IGJlZm9yZSA9ICh0aGlzLmxhc3QgPyB0aGlzLmxhc3QuY2xvbmUoKSA6IG51bGwpO1xuXG4gICAgaWYgKCh0aGlzLnJ1bGUuY291bnQgJiYgdGhpcy5vY2N1cnJlbmNlX251bWJlciA+PSB0aGlzLnJ1bGUuY291bnQpIHx8XG4gICAgICAgICh0aGlzLnJ1bGUudW50aWwgJiYgdGhpcy5sYXN0LmNvbXBhcmUodGhpcy5ydWxlLnVudGlsKSA+IDApKSB7XG4gICAgICB0aGlzLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29tcGxldGVkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vY2N1cnJlbmNlX251bWJlciA9PSAwICYmIHRoaXMubGFzdC5jb21wYXJlKHRoaXMuZHRzdGFydCkgPj0gMCkge1xuICAgICAgLy8gRmlyc3Qgb2YgYWxsLCBnaXZlIHRoZSBpbnN0YW5jZSB0aGF0IHdhcyBpbml0aWFsaXplZFxuICAgICAgdGhpcy5vY2N1cnJlbmNlX251bWJlcisrO1xuICAgICAgcmV0dXJuIHRoaXMubGFzdDtcbiAgICB9XG5cbiAgICBsZXQgdmFsaWQ7XG4gICAgbGV0IGludmFsaWRfY291bnQgPSAwO1xuICAgIGRvIHtcbiAgICAgIHZhbGlkID0gMTtcblxuICAgICAgc3dpdGNoICh0aGlzLnJ1bGUuZnJlcSkge1xuICAgICAgY2FzZSBcIlNFQ09ORExZXCI6XG4gICAgICAgIHRoaXMubmV4dF9zZWNvbmQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiTUlOVVRFTFlcIjpcbiAgICAgICAgdGhpcy5uZXh0X21pbnV0ZSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJIT1VSTFlcIjpcbiAgICAgICAgdGhpcy5uZXh0X2hvdXIoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiREFJTFlcIjpcbiAgICAgICAgdGhpcy5uZXh0X2RheSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJXRUVLTFlcIjpcbiAgICAgICAgdGhpcy5uZXh0X3dlZWsoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiTU9OVEhMWVwiOlxuICAgICAgICB2YWxpZCA9IHRoaXMubmV4dF9tb250aCgpO1xuICAgICAgICBpZiAodmFsaWQpIHtcbiAgICAgICAgICBpbnZhbGlkX2NvdW50ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmICgrK2ludmFsaWRfY291bnQgPT0gMzM2KSB7XG4gICAgICAgICAgLy8gV2UndmUgYmVlbiB0aHJvdWdoIGFsbCA5MSBtb250aCB2YXJpYXRpb25zIGFuZCBub3QgZm91bmQgYSByZWN1cnJlbmNlLiBTdG9wLlxuICAgICAgICAgIC8vICgxMiBtb250aHMgYW5kIDI5LWRheSBGZWJydWFyeSDDlyA3IHN0YXJ0aW5nIGRheXMuKVxuICAgICAgICAgIHRoaXMuY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJZRUFSTFlcIjpcbiAgICAgICAgdmFsaWQgPSB0aGlzLm5leHRfeWVhcigpO1xuICAgICAgICBpZiAodmFsaWQpIHtcbiAgICAgICAgICBpbnZhbGlkX2NvdW50ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmICgrK2ludmFsaWRfY291bnQgPT0gMjgpIHtcbiAgICAgICAgICAvLyBXZSd2ZSBiZWVuIHRocm91Z2ggYWxsIDE0IHllYXIgdmFyaWF0aW9ucyBhbmQgbm90IGZvdW5kIGEgcmVjdXJyZW5jZS4gU3RvcC5cbiAgICAgICAgICAvLyAoMzY1LWRheSBhbmQgMzY2LWRheSB5ZWFycyDDlyA3IHN0YXJ0aW5nIGRheXMuKVxuICAgICAgICAgIHRoaXMuY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSB3aGlsZSAoIXRoaXMuY2hlY2tfY29udHJhY3RpbmdfcnVsZXMoKSB8fFxuICAgICAgICAgICAgIHRoaXMubGFzdC5jb21wYXJlKHRoaXMuZHRzdGFydCkgPCAwIHx8XG4gICAgICAgICAgICAgIXZhbGlkKTtcblxuICAgIGlmICh0aGlzLmxhc3QuY29tcGFyZShiZWZvcmUpID09IDApIHtcbiAgICAgIGlmIChhZ2Fpbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTYW1lIG9jY3VycmVuY2UgZm91bmQgdHdpY2UsIHByb3RlY3RpbmcgeW91IGZyb20gZGVhdGggYnkgcmVjdXJzaW9uXCIpO1xuICAgICAgfVxuICAgICAgdGhpcy5uZXh0KHRydWUpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJ1bGUudW50aWwgJiYgdGhpcy5sYXN0LmNvbXBhcmUodGhpcy5ydWxlLnVudGlsKSA+IDApIHtcbiAgICAgIHRoaXMuY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9jY3VycmVuY2VfbnVtYmVyKys7XG4gICAgICByZXR1cm4gdGhpcy5sYXN0O1xuICAgIH1cbiAgfVxuXG4gIG5leHRfc2Vjb25kKCkge1xuICAgIHJldHVybiB0aGlzLm5leHRfZ2VuZXJpYyhcIkJZU0VDT05EXCIsIFwiU0VDT05ETFlcIiwgXCJzZWNvbmRcIiwgXCJtaW51dGVcIik7XG4gIH1cblxuICBpbmNyZW1lbnRfc2Vjb25kKGluYykge1xuICAgIHJldHVybiB0aGlzLmluY3JlbWVudF9nZW5lcmljKGluYywgXCJzZWNvbmRcIiwgNjAsIFwibWludXRlXCIpO1xuICB9XG5cbiAgbmV4dF9taW51dGUoKSB7XG4gICAgcmV0dXJuIHRoaXMubmV4dF9nZW5lcmljKFwiQllNSU5VVEVcIiwgXCJNSU5VVEVMWVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1pbnV0ZVwiLCBcImhvdXJcIiwgXCJuZXh0X3NlY29uZFwiKTtcbiAgfVxuXG4gIGluY3JlbWVudF9taW51dGUoaW5jKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5jcmVtZW50X2dlbmVyaWMoaW5jLCBcIm1pbnV0ZVwiLCA2MCwgXCJob3VyXCIpO1xuICB9XG5cbiAgbmV4dF9ob3VyKCkge1xuICAgIHJldHVybiB0aGlzLm5leHRfZ2VuZXJpYyhcIkJZSE9VUlwiLCBcIkhPVVJMWVwiLCBcImhvdXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtb250aGRheVwiLCBcIm5leHRfbWludXRlXCIpO1xuICB9XG5cbiAgaW5jcmVtZW50X2hvdXIoaW5jKSB7XG4gICAgdGhpcy5pbmNyZW1lbnRfZ2VuZXJpYyhpbmMsIFwiaG91clwiLCAyNCwgXCJtb250aGRheVwiKTtcbiAgfVxuXG4gIG5leHRfZGF5KCkge1xuICAgIGxldCB0aGlzX2ZyZXEgPSAodGhpcy5ydWxlLmZyZXEgPT0gXCJEQUlMWVwiKTtcblxuICAgIGlmICh0aGlzLm5leHRfaG91cigpID09IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGlmICh0aGlzX2ZyZXEpIHtcbiAgICAgIHRoaXMuaW5jcmVtZW50X21vbnRoZGF5KHRoaXMucnVsZS5pbnRlcnZhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaW5jcmVtZW50X21vbnRoZGF5KDEpO1xuICAgIH1cblxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgbmV4dF93ZWVrKCkge1xuICAgIGxldCBlbmRfb2ZfZGF0YSA9IDA7XG5cbiAgICBpZiAodGhpcy5uZXh0X3dlZWtkYXlfYnlfd2VlaygpID09IDApIHtcbiAgICAgIHJldHVybiBlbmRfb2ZfZGF0YTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5oYXNfYnlfZGF0YShcIkJZV0VFS05PXCIpKSB7XG4gICAgICB0aGlzLmJ5X2luZGljZXMuQllXRUVLTk8rKztcblxuICAgICAgaWYgKHRoaXMuYnlfaW5kaWNlcy5CWVdFRUtOTyA9PSB0aGlzLmJ5X2RhdGEuQllXRUVLTk8ubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuYnlfaW5kaWNlcy5CWVdFRUtOTyA9IDA7XG4gICAgICAgIGVuZF9vZl9kYXRhID0gMTtcbiAgICAgIH1cblxuICAgICAgLy8gSEFDSyBzaG91bGQgYmUgZmlyc3QgbW9udGggb2YgdGhlIHllYXJcbiAgICAgIHRoaXMubGFzdC5tb250aCA9IDE7XG4gICAgICB0aGlzLmxhc3QuZGF5ID0gMTtcblxuICAgICAgbGV0IHdlZWtfbm8gPSB0aGlzLmJ5X2RhdGEuQllXRUVLTk9bdGhpcy5ieV9pbmRpY2VzLkJZV0VFS05PXTtcblxuICAgICAgdGhpcy5sYXN0LmRheSArPSA3ICogd2Vla19ubztcblxuICAgICAgaWYgKGVuZF9vZl9kYXRhKSB7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50X3llYXIoMSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEp1bXAgdG8gdGhlIG5leHQgd2Vla1xuICAgICAgdGhpcy5pbmNyZW1lbnRfbW9udGhkYXkoNyAqIHRoaXMucnVsZS5pbnRlcnZhbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVuZF9vZl9kYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZSBlYWNoIGJ5IGRheSBydWxlIGZvciBhIGdpdmVuIHllYXIvbW9udGguXG4gICAqIFRha2VzIGludG8gYWNjb3VudCBvcmRlcmluZyBhbmQgbmVnYXRpdmUgcnVsZXNcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHllYXIgICAgICAgICBDdXJyZW50IHllYXIuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBtb250aCAgICAgICAgQ3VycmVudCBtb250aC5cbiAgICogQHBhcmFtIHtBcnJheX0gIHJ1bGVzICAgICAgICBBcnJheSBvZiBydWxlcy5cbiAgICpcbiAgICogQHJldHVybiB7QXJyYXl9IHNvcnRlZCBhbmQgbm9ybWFsaXplZCBydWxlcy5cbiAgICogICAgICAgICAgICAgICAgIE5lZ2F0aXZlIHJ1bGVzIHdpbGwgYmUgZXhwYW5kZWQgdG8gdGhlaXJcbiAgICogICAgICAgICAgICAgICAgIGNvcnJlY3QgcG9zaXRpdmUgdmFsdWVzIGZvciBlYXNpZXIgcHJvY2Vzc2luZy5cbiAgICovXG4gIG5vcm1hbGl6ZUJ5TW9udGhEYXlSdWxlcyh5ZWFyLCBtb250aCwgcnVsZXMpIHtcbiAgICBsZXQgZGF5c0luTW9udGggPSBUaW1lLmRheXNJbk1vbnRoKG1vbnRoLCB5ZWFyKTtcblxuICAgIC8vIFhYWDogVGhpcyBpcyBwcm9iYWJseSBiYWQgZm9yIHBlcmZvcm1hbmNlIHRvIGFsbG9jYXRlXG4gICAgLy8gICAgICBhIG5ldyBhcnJheSBmb3IgZWFjaCBtb250aCB3ZSBzY2FuLCBpZiBwb3NzaWJsZVxuICAgIC8vICAgICAgd2Ugc2hvdWxkIHRyeSB0byBvcHRpbWl6ZSB0aGlzLi4uXG4gICAgbGV0IG5ld1J1bGVzID0gW107XG5cbiAgICBsZXQgcnVsZUlkeCA9IDA7XG4gICAgbGV0IGxlbiA9IHJ1bGVzLmxlbmd0aDtcbiAgICBsZXQgcnVsZTtcblxuICAgIGZvciAoOyBydWxlSWR4IDwgbGVuOyBydWxlSWR4KyspIHtcbiAgICAgIHJ1bGUgPSBwYXJzZUludChydWxlc1tydWxlSWR4XSwgMTApO1xuICAgICAgaWYgKGlzTmFOKHJ1bGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBCWU1PTlRIREFZIHZhbHVlJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIHRoaXMgcnVsZSBmYWxscyBvdXRzaWRlIG9mIGdpdmVuXG4gICAgICAvLyBtb250aCBkaXNjYXJkIGl0LlxuICAgICAgaWYgKE1hdGguYWJzKHJ1bGUpID4gZGF5c0luTW9udGgpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIG5lZ2F0aXZlIGNhc2VcbiAgICAgIGlmIChydWxlIDwgMCkge1xuICAgICAgICAvLyB3ZSBhZGQgKG5vdCBzdWJ0cmFjdCBpdCBpcyBhIG5lZ2F0aXZlIG51bWJlcilcbiAgICAgICAgLy8gb25lIGZyb20gdGhlIHJ1bGUgYmVjYXVzZSAxID09PSBsYXN0IGRheSBvZiBtb250aFxuICAgICAgICBydWxlID0gZGF5c0luTW9udGggKyAocnVsZSArIDEpO1xuICAgICAgfSBlbHNlIGlmIChydWxlID09PSAwKSB7XG4gICAgICAgIC8vIHNraXAgemVybzogaXQgaXMgaW52YWxpZC5cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIG9ubHkgYWRkIHVuaXF1ZSBpdGVtcy4uLlxuICAgICAgaWYgKG5ld1J1bGVzLmluZGV4T2YocnVsZSkgPT09IC0xKSB7XG4gICAgICAgIG5ld1J1bGVzLnB1c2gocnVsZSk7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICAvLyB1bmlxdWUgYW5kIHNvcnRcbiAgICByZXR1cm4gbmV3UnVsZXMuc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhIC0gYjsgfSk7XG4gIH1cblxuICAvKipcbiAgICogTk9URVM6XG4gICAqIFdlIGFyZSBnaXZlbiBhIGxpc3Qgb2YgZGF0ZXMgaW4gdGhlIG1vbnRoIChCWU1PTlRIREFZKSAoMjMsIGV0Yy4uKVxuICAgKiBBbHNvIHdlIGFyZSBnaXZlbiBhIGxpc3Qgb2YgZGF5cyAoQllEQVkpIChNTywgMlNVLCBldGMuLikgd2hlblxuICAgKiBib3RoIGNvbmRpdGlvbnMgbWF0Y2ggYSBnaXZlbiBkYXRlICh0aGlzLmxhc3QuZGF5KSBpdGVyYXRpb24gc3RvcHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Qm9vbGVhbj19IGlzSW5pdCAgICAgV2hlbiBnaXZlbiB0cnVlIHdpbGwgbm90IGluY3JlbWVudCB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgZGF5ICh0aGlzLmxhc3QpLlxuICAgKi9cbiAgX2J5RGF5QW5kTW9udGhEYXkoaXNJbml0KSB7XG4gICAgbGV0IGJ5TW9udGhEYXk7IC8vIHNldHVwIGluIGluaXRNb250aFxuICAgIGxldCBieURheSA9IHRoaXMuYnlfZGF0YS5CWURBWTtcblxuICAgIGxldCBkYXRlO1xuICAgIGxldCBkYXRlSWR4ID0gMDtcbiAgICBsZXQgZGF0ZUxlbjsgLy8gc2V0dXAgaW4gaW5pdE1vbnRoXG4gICAgbGV0IGRheUxlbiA9IGJ5RGF5Lmxlbmd0aDtcblxuICAgIC8vIHdlIGFyZSBub3QgdmFsaWQgYnkgZGVmYXVsdFxuICAgIGxldCBkYXRhSXNWYWxpZCA9IDA7XG5cbiAgICBsZXQgZGF5c0luTW9udGg7XG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgIC8vIHdlIG5lZWQgYSBjb3B5IG9mIHRoaXMsIGJlY2F1c2UgYSBEYXRlVGltZSBnZXRzIG5vcm1hbGl6ZWRcbiAgICAvLyBhdXRvbWF0aWNhbGx5IGlmIHRoZSBkYXkgaXMgb3V0IG9mIHJhbmdlLiBBdCBzb21lIHBvaW50cyB3ZVxuICAgIC8vIHNldCB0aGUgbGFzdCBkYXkgdG8gMCB0byBzdGFydCBjb3VudGluZy5cbiAgICBsZXQgbGFzdERheSA9IHRoaXMubGFzdC5kYXk7XG5cbiAgICBmdW5jdGlvbiBpbml0TW9udGgoKSB7XG4gICAgICBkYXlzSW5Nb250aCA9IFRpbWUuZGF5c0luTW9udGgoXG4gICAgICAgIHNlbGYubGFzdC5tb250aCwgc2VsZi5sYXN0LnllYXJcbiAgICAgICk7XG5cbiAgICAgIGJ5TW9udGhEYXkgPSBzZWxmLm5vcm1hbGl6ZUJ5TW9udGhEYXlSdWxlcyhcbiAgICAgICAgc2VsZi5sYXN0LnllYXIsXG4gICAgICAgIHNlbGYubGFzdC5tb250aCxcbiAgICAgICAgc2VsZi5ieV9kYXRhLkJZTU9OVEhEQVlcbiAgICAgICk7XG5cbiAgICAgIGRhdGVMZW4gPSBieU1vbnRoRGF5Lmxlbmd0aDtcblxuICAgICAgLy8gRm9yIHRoZSBjYXNlIG9mIG1vcmUgdGhhbiBvbmUgb2NjdXJyZW5jZSBpbiBvbmUgbW9udGhcbiAgICAgIC8vIHdlIGhhdmUgdG8gYmUgc3VyZSB0byBzdGFydCBzZWFyY2hpbmcgYWZ0ZXIgdGhlIGxhc3RcbiAgICAgIC8vIGZvdW5kIGRhdGUgb3IgYXQgdGhlIGxhc3QgQllNT05USERBWSwgdW5sZXNzIHdlIGFyZVxuICAgICAgLy8gaW5pdGlhbGl6aW5nIHRoZSBpdGVyYXRvciBiZWNhdXNlIGluIHRoaXMgY2FzZSB3ZSBoYXZlXG4gICAgICAvLyB0byBjb25zaWRlciB0aGUgbGFzdCBmb3VuZCBkYXRlIHRvby5cbiAgICAgIHdoaWxlIChieU1vbnRoRGF5W2RhdGVJZHhdIDw9IGxhc3REYXkgJiZcbiAgICAgICAgICAgICAhKGlzSW5pdCAmJiBieU1vbnRoRGF5W2RhdGVJZHhdID09IGxhc3REYXkpICYmXG4gICAgICAgICAgICAgZGF0ZUlkeCA8IGRhdGVMZW4gLSAxKSB7XG4gICAgICAgIGRhdGVJZHgrKztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBuZXh0TW9udGgoKSB7XG4gICAgICAvLyBzaW5jZSB0aGUgZGF5IGlzIGluY3JlbWVudGVkIGF0IHRoZSBzdGFydFxuICAgICAgLy8gb2YgdGhlIGxvb3AgYmVsb3csIHdlIG5lZWQgdG8gc3RhcnQgYXQgMFxuICAgICAgbGFzdERheSA9IDA7XG4gICAgICBzZWxmLmluY3JlbWVudF9tb250aCgpO1xuICAgICAgZGF0ZUlkeCA9IDA7XG4gICAgICBpbml0TW9udGgoKTtcbiAgICB9XG5cbiAgICBpbml0TW9udGgoKTtcblxuICAgIC8vIHNob3VsZCBjb21lIGFmdGVyIGluaXRNb250aFxuICAgIGlmIChpc0luaXQpIHtcbiAgICAgIGxhc3REYXkgLT0gMTtcbiAgICB9XG5cbiAgICAvLyBVc2UgYSBjb3VudGVyIHRvIGF2b2lkIGFuIGluZmluaXRlIGxvb3Agd2l0aCBtYWxmb3JtZWQgcnVsZXMuXG4gICAgLy8gU3RvcCBjaGVja2luZyBhZnRlciA0IHllYXJzIHNvIHdlIGNvbnNpZGVyIGFsc28gYSBsZWFwIHllYXIuXG4gICAgbGV0IG1vbnRoc0NvdW50ZXIgPSA0ODtcblxuICAgIHdoaWxlICghZGF0YUlzVmFsaWQgJiYgbW9udGhzQ291bnRlcikge1xuICAgICAgbW9udGhzQ291bnRlci0tO1xuICAgICAgLy8gaW5jcmVtZW50IHRoZSBjdXJyZW50IGRhdGUuIFRoaXMgaXMgcmVhbGx5XG4gICAgICAvLyBpbXBvcnRhbnQgb3RoZXJ3aXNlIHdlIG1heSBmYWxsIGludG8gdGhlIGluZmluaXRlXG4gICAgICAvLyBsb29wIHRyYXAuIFRoZSBpbml0aWFsIGRhdGUgdGFrZXMgY2FyZSBvZiB0aGUgY2FzZVxuICAgICAgLy8gd2hlcmUgdGhlIGN1cnJlbnQgZGF0ZSBpcyB0aGUgZGF0ZSB3ZSBhcmUgbG9va2luZ1xuICAgICAgLy8gZm9yLlxuICAgICAgZGF0ZSA9IGxhc3REYXkgKyAxO1xuXG4gICAgICBpZiAoZGF0ZSA+IGRheXNJbk1vbnRoKSB7XG4gICAgICAgIG5leHRNb250aCgpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gZmluZCBuZXh0IGRhdGVcbiAgICAgIGxldCBuZXh0ID0gYnlNb250aERheVtkYXRlSWR4KytdO1xuXG4gICAgICAvLyB0aGlzIGxvZ2ljIGlzIGRlcGVuZGVudCBvbiB0aGUgQllNT05USERBWVNcbiAgICAgIC8vIGJlaW5nIGluIG9yZGVyICh3aGljaCBpcyBkb25lIGJ5ICNub3JtYWxpemVCeU1vbnRoRGF5UnVsZXMpXG4gICAgICBpZiAobmV4dCA+PSBkYXRlKSB7XG4gICAgICAgIC8vIGlmIHRoZSBuZXh0IG1vbnRoIGRheSBpcyBpbiB0aGUgZnV0dXJlIGp1bXAgdG8gaXQuXG4gICAgICAgIGxhc3REYXkgPSBuZXh0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaW4gdGhpcyBjYXNlIHRoZSAnbmV4dCcgbW9udGhkYXkgaGFzIHBhc3RcbiAgICAgICAgLy8gd2UgbXVzdCBtb3ZlIHRvIHRoZSBtb250aC5cbiAgICAgICAgbmV4dE1vbnRoKCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBOb3cgd2UgY2FuIGxvb3AgdGhyb3VnaCB0aGUgZGF5IHJ1bGVzIHRvIHNlZVxuICAgICAgLy8gaWYgb25lIG1hdGNoZXMgdGhlIGN1cnJlbnQgbW9udGggZGF0ZS5cbiAgICAgIGZvciAobGV0IGRheUlkeCA9IDA7IGRheUlkeCA8IGRheUxlbjsgZGF5SWR4KyspIHtcbiAgICAgICAgbGV0IHBhcnRzID0gdGhpcy5ydWxlRGF5T2ZXZWVrKGJ5RGF5W2RheUlkeF0pO1xuICAgICAgICBsZXQgcG9zID0gcGFydHNbMF07XG4gICAgICAgIGxldCBkb3cgPSBwYXJ0c1sxXTtcblxuICAgICAgICB0aGlzLmxhc3QuZGF5ID0gbGFzdERheTtcbiAgICAgICAgaWYgKHRoaXMubGFzdC5pc050aFdlZWtEYXkoZG93LCBwb3MpKSB7XG4gICAgICAgICAgLy8gd2hlbiB3ZSBmaW5kIHRoZSB2YWxpZCBvbmUgd2UgY2FuIG1hcmtcbiAgICAgICAgICAvLyB0aGUgY29uZGl0aW9ucyBhcyBtZXQgYW5kIGJyZWFrIHRoZSBsb29wLlxuICAgICAgICAgIC8vIChCZWNhdXNlIHdlIGhhdmUgdGhpcyBjb25kaXRpb24gYWJvdmVcbiAgICAgICAgICAvLyAgaXQgd2lsbCBhbHNvIGJyZWFrIHRoZSBwYXJlbnQgbG9vcCkuXG4gICAgICAgICAgZGF0YUlzVmFsaWQgPSAxO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEl0IGlzIGNvbXBsZXRlbHkgcG9zc2libGUgdGhhdCB0aGUgY29tYmluYXRpb25cbiAgICAgIC8vIGNhbm5vdCBiZSBtYXRjaGVkIGluIHRoZSBjdXJyZW50IG1vbnRoLlxuICAgICAgLy8gV2hlbiB3ZSByZWFjaCB0aGUgZW5kIG9mIHBvc3NpYmxlIGNvbWJpbmF0aW9uc1xuICAgICAgLy8gaW4gdGhlIGN1cnJlbnQgbW9udGggd2UgaXRlcmF0ZSB0byB0aGUgbmV4dCBvbmUuXG4gICAgICAvLyBzaW5jZSBkYXRlSWR4IGlzIGluY3JlbWVudGVkIHJpZ2h0IGFmdGVyIGdldHRpbmdcbiAgICAgIC8vIFwibmV4dFwiLCB3ZSBkb24ndCBuZWVkIGRhdGVMZW4gLTEgaGVyZS5cbiAgICAgIGlmICghZGF0YUlzVmFsaWQgJiYgZGF0ZUlkeCA9PT0gZGF0ZUxlbikge1xuICAgICAgICBuZXh0TW9udGgoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1vbnRoc0NvdW50ZXIgPD0gMCkge1xuICAgICAgLy8gQ2hlY2tlZCA0IHllYXJzIHdpdGhvdXQgZmluZGluZyBhIEJ5ZGF5IHRoYXQgbWF0Y2hlc1xuICAgICAgLy8gYSBCeW1vbnRoZGF5LiBNYXliZSB0aGUgcnVsZSBpcyBub3QgY29ycmVjdC5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk1hbGZvcm1lZCB2YWx1ZXMgaW4gQllEQVkgY29tYmluZWQgd2l0aCBCWU1PTlRIREFZIHBhcnRzXCIpO1xuICAgIH1cblxuXG4gICAgcmV0dXJuIGRhdGFJc1ZhbGlkO1xuICB9XG5cbiAgbmV4dF9tb250aCgpIHtcbiAgICBsZXQgZGF0YV92YWxpZCA9IDE7XG5cbiAgICBpZiAodGhpcy5uZXh0X2hvdXIoKSA9PSAwKSB7XG4gICAgICByZXR1cm4gZGF0YV92YWxpZDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5oYXNfYnlfZGF0YShcIkJZREFZXCIpICYmIHRoaXMuaGFzX2J5X2RhdGEoXCJCWU1PTlRIREFZXCIpKSB7XG4gICAgICBkYXRhX3ZhbGlkID0gdGhpcy5fYnlEYXlBbmRNb250aERheSgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5oYXNfYnlfZGF0YShcIkJZREFZXCIpKSB7XG4gICAgICBsZXQgZGF5c0luTW9udGggPSBUaW1lLmRheXNJbk1vbnRoKHRoaXMubGFzdC5tb250aCwgdGhpcy5sYXN0LnllYXIpO1xuICAgICAgbGV0IHNldHBvcyA9IDA7XG4gICAgICBsZXQgc2V0cG9zX3RvdGFsID0gMDtcblxuICAgICAgaWYgKHRoaXMuaGFzX2J5X2RhdGEoXCJCWVNFVFBPU1wiKSkge1xuICAgICAgICBsZXQgbGFzdF9kYXkgPSB0aGlzLmxhc3QuZGF5O1xuICAgICAgICBmb3IgKGxldCBkYXkgPSAxOyBkYXkgPD0gZGF5c0luTW9udGg7IGRheSsrKSB7XG4gICAgICAgICAgdGhpcy5sYXN0LmRheSA9IGRheTtcbiAgICAgICAgICBpZiAodGhpcy5pc19kYXlfaW5fYnlkYXkodGhpcy5sYXN0KSkge1xuICAgICAgICAgICAgc2V0cG9zX3RvdGFsKys7XG4gICAgICAgICAgICBpZiAoZGF5IDw9IGxhc3RfZGF5KSB7XG4gICAgICAgICAgICAgIHNldHBvcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3QuZGF5ID0gbGFzdF9kYXk7XG4gICAgICB9XG5cbiAgICAgIGRhdGFfdmFsaWQgPSAwO1xuICAgICAgbGV0IGRheTtcbiAgICAgIGZvciAoZGF5ID0gdGhpcy5sYXN0LmRheSArIDE7IGRheSA8PSBkYXlzSW5Nb250aDsgZGF5KyspIHtcbiAgICAgICAgdGhpcy5sYXN0LmRheSA9IGRheTtcblxuICAgICAgICBpZiAodGhpcy5pc19kYXlfaW5fYnlkYXkodGhpcy5sYXN0KSkge1xuICAgICAgICAgIGlmICghdGhpcy5oYXNfYnlfZGF0YShcIkJZU0VUUE9TXCIpIHx8XG4gICAgICAgICAgICAgIHRoaXMuY2hlY2tfc2V0X3Bvc2l0aW9uKCsrc2V0cG9zKSB8fFxuICAgICAgICAgICAgICB0aGlzLmNoZWNrX3NldF9wb3NpdGlvbihzZXRwb3MgLSBzZXRwb3NfdG90YWwgLSAxKSkge1xuXG4gICAgICAgICAgICBkYXRhX3ZhbGlkID0gMTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZGF5ID4gZGF5c0luTW9udGgpIHtcbiAgICAgICAgdGhpcy5sYXN0LmRheSA9IDE7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50X21vbnRoKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNfZGF5X2luX2J5ZGF5KHRoaXMubGFzdCkpIHtcbiAgICAgICAgICBpZiAoIXRoaXMuaGFzX2J5X2RhdGEoXCJCWVNFVFBPU1wiKSB8fCB0aGlzLmNoZWNrX3NldF9wb3NpdGlvbigxKSkge1xuICAgICAgICAgICAgZGF0YV92YWxpZCA9IDE7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGFfdmFsaWQgPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmhhc19ieV9kYXRhKFwiQllNT05USERBWVwiKSkge1xuICAgICAgdGhpcy5ieV9pbmRpY2VzLkJZTU9OVEhEQVkrKztcblxuICAgICAgaWYgKHRoaXMuYnlfaW5kaWNlcy5CWU1PTlRIREFZID49IHRoaXMuYnlfZGF0YS5CWU1PTlRIREFZLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmJ5X2luZGljZXMuQllNT05USERBWSA9IDA7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50X21vbnRoKCk7XG4gICAgICAgIGlmICh0aGlzLmJ5X2luZGljZXMuQllNT05USERBWSA+PSB0aGlzLmJ5X2RhdGEuQllNT05USERBWS5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsZXQgZGF5c0luTW9udGggPSBUaW1lLmRheXNJbk1vbnRoKHRoaXMubGFzdC5tb250aCwgdGhpcy5sYXN0LnllYXIpO1xuICAgICAgbGV0IGRheSA9IHRoaXMuYnlfZGF0YS5CWU1PTlRIREFZW3RoaXMuYnlfaW5kaWNlcy5CWU1PTlRIREFZXTtcblxuICAgICAgaWYgKGRheSA8IDApIHtcbiAgICAgICAgZGF5ID0gZGF5c0luTW9udGggKyBkYXkgKyAxO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGF5ID4gZGF5c0luTW9udGgpIHtcbiAgICAgICAgdGhpcy5sYXN0LmRheSA9IDE7XG4gICAgICAgIGRhdGFfdmFsaWQgPSB0aGlzLmlzX2RheV9pbl9ieWRheSh0aGlzLmxhc3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sYXN0LmRheSA9IGRheTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pbmNyZW1lbnRfbW9udGgoKTtcbiAgICAgIGxldCBkYXlzSW5Nb250aCA9IFRpbWUuZGF5c0luTW9udGgodGhpcy5sYXN0Lm1vbnRoLCB0aGlzLmxhc3QueWVhcik7XG4gICAgICBpZiAodGhpcy5ieV9kYXRhLkJZTU9OVEhEQVlbMF0gPiBkYXlzSW5Nb250aCkge1xuICAgICAgICBkYXRhX3ZhbGlkID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubGFzdC5kYXkgPSB0aGlzLmJ5X2RhdGEuQllNT05USERBWVswXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YV92YWxpZDtcbiAgfVxuXG4gIG5leHRfd2Vla2RheV9ieV93ZWVrKCkge1xuICAgIGxldCBlbmRfb2ZfZGF0YSA9IDA7XG5cbiAgICBpZiAodGhpcy5uZXh0X2hvdXIoKSA9PSAwKSB7XG4gICAgICByZXR1cm4gZW5kX29mX2RhdGE7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmhhc19ieV9kYXRhKFwiQllEQVlcIikpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cblxuICAgIGZvciAoOzspIHtcbiAgICAgIGxldCB0dCA9IG5ldyBUaW1lKCk7XG4gICAgICB0aGlzLmJ5X2luZGljZXMuQllEQVkrKztcblxuICAgICAgaWYgKHRoaXMuYnlfaW5kaWNlcy5CWURBWSA9PSBPYmplY3Qua2V5cyh0aGlzLmJ5X2RhdGEuQllEQVkpLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmJ5X2luZGljZXMuQllEQVkgPSAwO1xuICAgICAgICBlbmRfb2ZfZGF0YSA9IDE7XG4gICAgICB9XG5cbiAgICAgIGxldCBjb2RlZF9kYXkgPSB0aGlzLmJ5X2RhdGEuQllEQVlbdGhpcy5ieV9pbmRpY2VzLkJZREFZXTtcbiAgICAgIGxldCBwYXJ0cyA9IHRoaXMucnVsZURheU9mV2Vlayhjb2RlZF9kYXkpO1xuICAgICAgbGV0IGRvdyA9IHBhcnRzWzFdO1xuXG4gICAgICBkb3cgLT0gdGhpcy5ydWxlLndrc3Q7XG5cbiAgICAgIGlmIChkb3cgPCAwKSB7XG4gICAgICAgIGRvdyArPSA3O1xuICAgICAgfVxuXG4gICAgICB0dC55ZWFyID0gdGhpcy5sYXN0LnllYXI7XG4gICAgICB0dC5tb250aCA9IHRoaXMubGFzdC5tb250aDtcbiAgICAgIHR0LmRheSA9IHRoaXMubGFzdC5kYXk7XG5cbiAgICAgIGxldCBzdGFydE9mV2VlayA9IHR0LnN0YXJ0RG95V2Vlayh0aGlzLnJ1bGUud2tzdCk7XG5cbiAgICAgIGlmIChkb3cgKyBzdGFydE9mV2VlayA8IDEpIHtcbiAgICAgICAgLy8gVGhlIHNlbGVjdGVkIGRhdGUgaXMgaW4gdGhlIHByZXZpb3VzIHllYXJcbiAgICAgICAgaWYgKCFlbmRfb2ZfZGF0YSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCBuZXh0ID0gVGltZS5mcm9tRGF5T2ZZZWFyKHN0YXJ0T2ZXZWVrICsgZG93LCB0aGlzLmxhc3QueWVhcik7XG5cbiAgICAgIC8qKlxuICAgICAgICogVGhlIG5vcm1hbGl6YXRpb24gaG9ycm9ycyBiZWxvdyBhcmUgZHVlIHRvXG4gICAgICAgKiB0aGUgZmFjdCB0aGF0IHdoZW4gdGhlIHllYXIvbW9udGgvZGF5IGNoYW5nZXNcbiAgICAgICAqIGl0IGNhbiBlZmZlY3QgdGhlIG90aGVyIG9wZXJhdGlvbnMgdGhhdCBjb21lIGFmdGVyLlxuICAgICAgICovXG4gICAgICB0aGlzLmxhc3QueWVhciA9IG5leHQueWVhcjtcbiAgICAgIHRoaXMubGFzdC5tb250aCA9IG5leHQubW9udGg7XG4gICAgICB0aGlzLmxhc3QuZGF5ID0gbmV4dC5kYXk7XG5cbiAgICAgIHJldHVybiBlbmRfb2ZfZGF0YTtcbiAgICB9XG4gIH1cblxuICBuZXh0X3llYXIoKSB7XG4gICAgaWYgKHRoaXMubmV4dF9ob3VyKCkgPT0gMCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF5cy5sZW5ndGggPT0gMCB8fCArK3RoaXMuZGF5c19pbmRleCA9PSB0aGlzLmRheXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLmRheXNfaW5kZXggPSAwO1xuICAgICAgdGhpcy5pbmNyZW1lbnRfeWVhcih0aGlzLnJ1bGUuaW50ZXJ2YWwpO1xuICAgICAgaWYgKHRoaXMuaGFzX2J5X2RhdGEoXCJCWU1PTlRIREFZXCIpKSB7XG4gICAgICAgIHRoaXMuYnlfZGF0YS5CWU1PTlRIREFZID0gdGhpcy5ub3JtYWxpemVCeU1vbnRoRGF5UnVsZXMoXG4gICAgICAgICAgdGhpcy5sYXN0LnllYXIsXG4gICAgICAgICAgdGhpcy5sYXN0Lm1vbnRoLFxuICAgICAgICAgIHRoaXMucnVsZS5wYXJ0cy5CWU1PTlRIREFZXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aGlzLmV4cGFuZF95ZWFyX2RheXModGhpcy5sYXN0LnllYXIpO1xuICAgICAgaWYgKHRoaXMuZGF5cy5sZW5ndGggPT0gMCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fbmV4dEJ5WWVhckRheSgpO1xuICB9XG5cbiAgX25leHRCeVllYXJEYXkoKSB7XG4gICAgbGV0IGRveSA9IHRoaXMuZGF5c1t0aGlzLmRheXNfaW5kZXhdO1xuICAgIGxldCB5ZWFyID0gdGhpcy5sYXN0LnllYXI7XG5cbiAgICBpZiAoTWF0aC5hYnMoZG95KSA9PSAzNjYgJiYgIVRpbWUuaXNMZWFwWWVhcih0aGlzLmxhc3QueWVhcikpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGlmIChkb3kgPCAxKSB7XG4gICAgICAgIC8vIFRpbWUuZnJvbURheU9mWWVhcihkb3ksIHllYXIpIGluZGV4ZXMgcmVsYXRpdmUgdG8gdGhlXG4gICAgICAgIC8vIHN0YXJ0IG9mIHRoZSBnaXZlbiB5ZWFyLiBUaGF0IGlzIGRpZmZlcmVudCBmcm9tIHRoZVxuICAgICAgICAvLyBzZW1hbnRpY3Mgb2YgQllZRUFSREFZIHdoZXJlIG5lZ2F0aXZlIGluZGV4ZXMgYXJlIGFuXG4gICAgICAgIC8vIG9mZnNldCBmcm9tIHRoZSBlbmQgb2YgdGhlIGdpdmVuIHllYXIuXG4gICAgICAgIGRveSArPSAxO1xuICAgICAgICB5ZWFyICs9IDE7XG4gICAgfVxuICAgIGxldCBuZXh0ID0gVGltZS5mcm9tRGF5T2ZZZWFyKGRveSwgeWVhcik7XG4gICAgdGhpcy5sYXN0LmRheSA9IG5leHQuZGF5O1xuICAgIHRoaXMubGFzdC5tb250aCA9IG5leHQubW9udGg7XG5cbiAgICByZXR1cm4gMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0gZG93IChlZzogJzFUVScsICctMU1PJylcbiAgICogQHBhcmFtIHt3ZWVrRGF5PX0gYVdlZWtTdGFydCBUaGUgd2VlayBzdGFydCB3ZWVrZGF5XG4gICAqIEByZXR1cm4gW3BvcywgbnVtZXJpY0Rvd10gKGVnOiBbMSwgM10pIG51bWVyaWNEb3cgaXMgcmVsYXRpdmUgdG8gYVdlZWtTdGFydFxuICAgKi9cbiAgcnVsZURheU9mV2Vlayhkb3csIGFXZWVrU3RhcnQpIHtcbiAgICBsZXQgbWF0Y2hlcyA9IGRvdy5tYXRjaCgvKFsrLV0/WzAtOV0pPyhNT3xUVXxXRXxUSHxGUnxTQXxTVSkvKTtcbiAgICBpZiAobWF0Y2hlcykge1xuICAgICAgbGV0IHBvcyA9IHBhcnNlSW50KG1hdGNoZXNbMV0gfHwgMCwgMTApO1xuICAgICAgZG93ID0gUmVjdXIuaWNhbERheVRvTnVtZXJpY0RheShtYXRjaGVzWzJdLCBhV2Vla1N0YXJ0KTtcbiAgICAgIHJldHVybiBbcG9zLCBkb3ddO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gWzAsIDBdO1xuICAgIH1cbiAgfVxuXG4gIG5leHRfZ2VuZXJpYyhhUnVsZVR5cGUsIGFJbnRlcnZhbCwgYURhdGVBdHRyLCBhRm9sbG93aW5nQXR0ciwgYVByZXZpb3VzSW5jcikge1xuICAgIGxldCBoYXNfYnlfcnVsZSA9IChhUnVsZVR5cGUgaW4gdGhpcy5ieV9kYXRhKTtcbiAgICBsZXQgdGhpc19mcmVxID0gKHRoaXMucnVsZS5mcmVxID09IGFJbnRlcnZhbCk7XG4gICAgbGV0IGVuZF9vZl9kYXRhID0gMDtcblxuICAgIGlmIChhUHJldmlvdXNJbmNyICYmIHRoaXNbYVByZXZpb3VzSW5jcl0oKSA9PSAwKSB7XG4gICAgICByZXR1cm4gZW5kX29mX2RhdGE7XG4gICAgfVxuXG4gICAgaWYgKGhhc19ieV9ydWxlKSB7XG4gICAgICB0aGlzLmJ5X2luZGljZXNbYVJ1bGVUeXBlXSsrO1xuICAgICAgbGV0IGR0YSA9IHRoaXMuYnlfZGF0YVthUnVsZVR5cGVdO1xuXG4gICAgICBpZiAodGhpcy5ieV9pbmRpY2VzW2FSdWxlVHlwZV0gPT0gZHRhLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmJ5X2luZGljZXNbYVJ1bGVUeXBlXSA9IDA7XG4gICAgICAgIGVuZF9vZl9kYXRhID0gMTtcbiAgICAgIH1cbiAgICAgIHRoaXMubGFzdFthRGF0ZUF0dHJdID0gZHRhW3RoaXMuYnlfaW5kaWNlc1thUnVsZVR5cGVdXTtcbiAgICB9IGVsc2UgaWYgKHRoaXNfZnJlcSkge1xuICAgICAgdGhpc1tcImluY3JlbWVudF9cIiArIGFEYXRlQXR0cl0odGhpcy5ydWxlLmludGVydmFsKTtcbiAgICB9XG5cbiAgICBpZiAoaGFzX2J5X3J1bGUgJiYgZW5kX29mX2RhdGEgJiYgdGhpc19mcmVxKSB7XG4gICAgICB0aGlzW1wiaW5jcmVtZW50X1wiICsgYUZvbGxvd2luZ0F0dHJdKDEpO1xuICAgIH1cblxuICAgIHJldHVybiBlbmRfb2ZfZGF0YTtcbiAgfVxuXG4gIGluY3JlbWVudF9tb250aGRheShpbmMpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluYzsgaSsrKSB7XG4gICAgICBsZXQgZGF5c0luTW9udGggPSBUaW1lLmRheXNJbk1vbnRoKHRoaXMubGFzdC5tb250aCwgdGhpcy5sYXN0LnllYXIpO1xuICAgICAgdGhpcy5sYXN0LmRheSsrO1xuXG4gICAgICBpZiAodGhpcy5sYXN0LmRheSA+IGRheXNJbk1vbnRoKSB7XG4gICAgICAgIHRoaXMubGFzdC5kYXkgLT0gZGF5c0luTW9udGg7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50X21vbnRoKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaW5jcmVtZW50X21vbnRoKCkge1xuICAgIHRoaXMubGFzdC5kYXkgPSAxO1xuICAgIGlmICh0aGlzLmhhc19ieV9kYXRhKFwiQllNT05USFwiKSkge1xuICAgICAgdGhpcy5ieV9pbmRpY2VzLkJZTU9OVEgrKztcblxuICAgICAgaWYgKHRoaXMuYnlfaW5kaWNlcy5CWU1PTlRIID09IHRoaXMuYnlfZGF0YS5CWU1PTlRILmxlbmd0aCkge1xuICAgICAgICB0aGlzLmJ5X2luZGljZXMuQllNT05USCA9IDA7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50X3llYXIoMSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMubGFzdC5tb250aCA9IHRoaXMuYnlfZGF0YS5CWU1PTlRIW3RoaXMuYnlfaW5kaWNlcy5CWU1PTlRIXTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMucnVsZS5mcmVxID09IFwiTU9OVEhMWVwiKSB7XG4gICAgICAgIHRoaXMubGFzdC5tb250aCArPSB0aGlzLnJ1bGUuaW50ZXJ2YWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxhc3QubW9udGgrKztcbiAgICAgIH1cblxuICAgICAgdGhpcy5sYXN0Lm1vbnRoLS07XG4gICAgICBsZXQgeWVhcnMgPSB0cnVuYyh0aGlzLmxhc3QubW9udGggLyAxMik7XG4gICAgICB0aGlzLmxhc3QubW9udGggJT0gMTI7XG4gICAgICB0aGlzLmxhc3QubW9udGgrKztcblxuICAgICAgaWYgKHllYXJzICE9IDApIHtcbiAgICAgICAgdGhpcy5pbmNyZW1lbnRfeWVhcih5ZWFycyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaGFzX2J5X2RhdGEoXCJCWU1PTlRIREFZXCIpKSB7XG4gICAgICB0aGlzLmJ5X2RhdGEuQllNT05USERBWSA9IHRoaXMubm9ybWFsaXplQnlNb250aERheVJ1bGVzKFxuICAgICAgICB0aGlzLmxhc3QueWVhcixcbiAgICAgICAgdGhpcy5sYXN0Lm1vbnRoLFxuICAgICAgICB0aGlzLnJ1bGUucGFydHMuQllNT05USERBWVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBpbmNyZW1lbnRfeWVhcihpbmMpIHtcbiAgICAvLyBEb24ndCBqdW1wIGludG8gdGhlIG5leHQgbW9udGggaWYgdGhpcy5sYXN0IGlzIEZlYiAyOS5cbiAgICB0aGlzLmxhc3QuZGF5ID0gMTtcbiAgICB0aGlzLmxhc3QueWVhciArPSBpbmM7XG4gIH1cblxuICBpbmNyZW1lbnRfZ2VuZXJpYyhpbmMsIGFEYXRlQXR0ciwgYUZhY3RvciwgYU5leHRJbmNyZW1lbnQpIHtcbiAgICB0aGlzLmxhc3RbYURhdGVBdHRyXSArPSBpbmM7XG4gICAgbGV0IG5leHR1bml0ID0gdHJ1bmModGhpcy5sYXN0W2FEYXRlQXR0cl0gLyBhRmFjdG9yKTtcbiAgICB0aGlzLmxhc3RbYURhdGVBdHRyXSAlPSBhRmFjdG9yO1xuICAgIGlmIChuZXh0dW5pdCAhPSAwKSB7XG4gICAgICB0aGlzW1wiaW5jcmVtZW50X1wiICsgYU5leHRJbmNyZW1lbnRdKG5leHR1bml0KTtcbiAgICB9XG4gIH1cblxuICBoYXNfYnlfZGF0YShhUnVsZVR5cGUpIHtcbiAgICByZXR1cm4gKGFSdWxlVHlwZSBpbiB0aGlzLnJ1bGUucGFydHMpO1xuICB9XG5cbiAgZXhwYW5kX3llYXJfZGF5cyhhWWVhcikge1xuICAgIGxldCB0ID0gbmV3IFRpbWUoKTtcbiAgICB0aGlzLmRheXMgPSBbXTtcblxuICAgIC8vIFdlIG5lZWQgb3VyIG93biBjb3B5IHdpdGggYSBmZXcga2V5cyBzZXRcbiAgICBsZXQgcGFydHMgPSB7fTtcbiAgICBsZXQgcnVsZXMgPSBbXCJCWURBWVwiLCBcIkJZV0VFS05PXCIsIFwiQllNT05USERBWVwiLCBcIkJZTU9OVEhcIiwgXCJCWVlFQVJEQVlcIl07XG4gICAgZm9yIChsZXQgcGFydCBvZiBydWxlcykge1xuICAgICAgaWYgKHBhcnQgaW4gdGhpcy5ydWxlLnBhcnRzKSB7XG4gICAgICAgIHBhcnRzW3BhcnRdID0gdGhpcy5ydWxlLnBhcnRzW3BhcnRdO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChcIkJZTU9OVEhcIiBpbiBwYXJ0cyAmJiBcIkJZV0VFS05PXCIgaW4gcGFydHMpIHtcbiAgICAgIGxldCB2YWxpZCA9IDE7XG4gICAgICBsZXQgdmFsaWRXZWVrcyA9IHt9O1xuICAgICAgdC55ZWFyID0gYVllYXI7XG4gICAgICB0LmlzRGF0ZSA9IHRydWU7XG5cbiAgICAgIGZvciAobGV0IG1vbnRoSWR4ID0gMDsgbW9udGhJZHggPCB0aGlzLmJ5X2RhdGEuQllNT05USC5sZW5ndGg7IG1vbnRoSWR4KyspIHtcbiAgICAgICAgbGV0IG1vbnRoID0gdGhpcy5ieV9kYXRhLkJZTU9OVEhbbW9udGhJZHhdO1xuICAgICAgICB0Lm1vbnRoID0gbW9udGg7XG4gICAgICAgIHQuZGF5ID0gMTtcbiAgICAgICAgbGV0IGZpcnN0X3dlZWsgPSB0LndlZWtOdW1iZXIodGhpcy5ydWxlLndrc3QpO1xuICAgICAgICB0LmRheSA9IFRpbWUuZGF5c0luTW9udGgobW9udGgsIGFZZWFyKTtcbiAgICAgICAgbGV0IGxhc3Rfd2VlayA9IHQud2Vla051bWJlcih0aGlzLnJ1bGUud2tzdCk7XG4gICAgICAgIGZvciAobW9udGhJZHggPSBmaXJzdF93ZWVrOyBtb250aElkeCA8IGxhc3Rfd2VlazsgbW9udGhJZHgrKykge1xuICAgICAgICAgIHZhbGlkV2Vla3NbbW9udGhJZHhdID0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCB3ZWVrSWR4ID0gMDsgd2Vla0lkeCA8IHRoaXMuYnlfZGF0YS5CWVdFRUtOTy5sZW5ndGggJiYgdmFsaWQ7IHdlZWtJZHgrKykge1xuICAgICAgICBsZXQgd2Vla25vID0gdGhpcy5ieV9kYXRhLkJZV0VFS05PW3dlZWtJZHhdO1xuICAgICAgICBpZiAod2Vla25vIDwgNTIpIHtcbiAgICAgICAgICB2YWxpZCAmPSB2YWxpZFdlZWtzW3dlZWtJZHhdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbGlkID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodmFsaWQpIHtcbiAgICAgICAgZGVsZXRlIHBhcnRzLkJZTU9OVEg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWxldGUgcGFydHMuQllXRUVLTk87XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHBhcnRDb3VudCA9IE9iamVjdC5rZXlzKHBhcnRzKS5sZW5ndGg7XG5cbiAgICBpZiAocGFydENvdW50ID09IDApIHtcbiAgICAgIGxldCB0MSA9IHRoaXMuZHRzdGFydC5jbG9uZSgpO1xuICAgICAgdDEueWVhciA9IHRoaXMubGFzdC55ZWFyO1xuICAgICAgdGhpcy5kYXlzLnB1c2godDEuZGF5T2ZZZWFyKCkpO1xuICAgIH0gZWxzZSBpZiAocGFydENvdW50ID09IDEgJiYgXCJCWU1PTlRIXCIgaW4gcGFydHMpIHtcbiAgICAgIGZvciAobGV0IG1vbnRoIG9mIHRoaXMuYnlfZGF0YS5CWU1PTlRIKSB7XG4gICAgICAgIGxldCB0MiA9IHRoaXMuZHRzdGFydC5jbG9uZSgpO1xuICAgICAgICB0Mi55ZWFyID0gYVllYXI7XG4gICAgICAgIHQyLm1vbnRoID0gbW9udGg7XG4gICAgICAgIHQyLmlzRGF0ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuZGF5cy5wdXNoKHQyLmRheU9mWWVhcigpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAxICYmIFwiQllNT05USERBWVwiIGluIHBhcnRzKSB7XG4gICAgICBmb3IgKGxldCBtb250aGRheSBvZiB0aGlzLmJ5X2RhdGEuQllNT05USERBWSkge1xuICAgICAgICBsZXQgdDMgPSB0aGlzLmR0c3RhcnQuY2xvbmUoKTtcbiAgICAgICAgaWYgKG1vbnRoZGF5IDwgMCkge1xuICAgICAgICAgIGxldCBkYXlzSW5Nb250aCA9IFRpbWUuZGF5c0luTW9udGgodDMubW9udGgsIGFZZWFyKTtcbiAgICAgICAgICBtb250aGRheSA9IG1vbnRoZGF5ICsgZGF5c0luTW9udGggKyAxO1xuICAgICAgICB9XG4gICAgICAgIHQzLmRheSA9IG1vbnRoZGF5O1xuICAgICAgICB0My55ZWFyID0gYVllYXI7XG4gICAgICAgIHQzLmlzRGF0ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuZGF5cy5wdXNoKHQzLmRheU9mWWVhcigpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAyICYmXG4gICAgICAgICAgICAgICBcIkJZTU9OVEhEQVlcIiBpbiBwYXJ0cyAmJlxuICAgICAgICAgICAgICAgXCJCWU1PTlRIXCIgaW4gcGFydHMpIHtcbiAgICAgIGZvciAobGV0IG1vbnRoIG9mIHRoaXMuYnlfZGF0YS5CWU1PTlRIKSB7XG4gICAgICAgIGxldCBkYXlzSW5Nb250aCA9IFRpbWUuZGF5c0luTW9udGgobW9udGgsIGFZZWFyKTtcbiAgICAgICAgZm9yIChsZXQgbW9udGhkYXkgb2YgdGhpcy5ieV9kYXRhLkJZTU9OVEhEQVkpIHtcbiAgICAgICAgICBpZiAobW9udGhkYXkgPCAwKSB7XG4gICAgICAgICAgICBtb250aGRheSA9IG1vbnRoZGF5ICsgZGF5c0luTW9udGggKyAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0LmRheSA9IG1vbnRoZGF5O1xuICAgICAgICAgIHQubW9udGggPSBtb250aDtcbiAgICAgICAgICB0LnllYXIgPSBhWWVhcjtcbiAgICAgICAgICB0LmlzRGF0ZSA9IHRydWU7XG5cbiAgICAgICAgICB0aGlzLmRheXMucHVzaCh0LmRheU9mWWVhcigpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocGFydENvdW50ID09IDEgJiYgXCJCWVdFRUtOT1wiIGluIHBhcnRzKSA7IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAyICYmXG4gICAgICAgICAgICAgICBcIkJZV0VFS05PXCIgaW4gcGFydHMgJiZcbiAgICAgICAgICAgICAgIFwiQllNT05USERBWVwiIGluIHBhcnRzKSA7IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAxICYmIFwiQllEQVlcIiBpbiBwYXJ0cykge1xuICAgICAgdGhpcy5kYXlzID0gdGhpcy5kYXlzLmNvbmNhdCh0aGlzLmV4cGFuZF9ieV9kYXkoYVllYXIpKTtcbiAgICB9IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAyICYmIFwiQllEQVlcIiBpbiBwYXJ0cyAmJiBcIkJZTU9OVEhcIiBpbiBwYXJ0cykge1xuICAgICAgZm9yIChsZXQgbW9udGggb2YgdGhpcy5ieV9kYXRhLkJZTU9OVEgpIHtcbiAgICAgICAgbGV0IGRheXNJbk1vbnRoID0gVGltZS5kYXlzSW5Nb250aChtb250aCwgYVllYXIpO1xuXG4gICAgICAgIHQueWVhciA9IGFZZWFyO1xuICAgICAgICB0Lm1vbnRoID0gbW9udGg7XG4gICAgICAgIHQuZGF5ID0gMTtcbiAgICAgICAgdC5pc0RhdGUgPSB0cnVlO1xuXG4gICAgICAgIGxldCBmaXJzdF9kb3cgPSB0LmRheU9mV2VlaygpO1xuICAgICAgICBsZXQgZG95X29mZnNldCA9IHQuZGF5T2ZZZWFyKCkgLSAxO1xuXG4gICAgICAgIHQuZGF5ID0gZGF5c0luTW9udGg7XG4gICAgICAgIGxldCBsYXN0X2RvdyA9IHQuZGF5T2ZXZWVrKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuaGFzX2J5X2RhdGEoXCJCWVNFVFBPU1wiKSkge1xuICAgICAgICAgIGxldCBieV9tb250aF9kYXkgPSBbXTtcbiAgICAgICAgICBmb3IgKGxldCBkYXkgPSAxOyBkYXkgPD0gZGF5c0luTW9udGg7IGRheSsrKSB7XG4gICAgICAgICAgICB0LmRheSA9IGRheTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzX2RheV9pbl9ieWRheSh0KSkge1xuICAgICAgICAgICAgICBieV9tb250aF9kYXkucHVzaChkYXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvciAobGV0IHNwSW5kZXggPSAwOyBzcEluZGV4IDwgYnlfbW9udGhfZGF5Lmxlbmd0aDsgc3BJbmRleCsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja19zZXRfcG9zaXRpb24oc3BJbmRleCArIDEpIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja19zZXRfcG9zaXRpb24oc3BJbmRleCAtIGJ5X21vbnRoX2RheS5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgIHRoaXMuZGF5cy5wdXNoKGRveV9vZmZzZXQgKyBieV9tb250aF9kYXlbc3BJbmRleF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3IgKGxldCBjb2RlZF9kYXkgb2YgdGhpcy5ieV9kYXRhLkJZREFZKSB7XG4gICAgICAgICAgICBsZXQgYnlkYXlQYXJ0cyA9IHRoaXMucnVsZURheU9mV2Vlayhjb2RlZF9kYXkpO1xuICAgICAgICAgICAgbGV0IHBvcyA9IGJ5ZGF5UGFydHNbMF07XG4gICAgICAgICAgICBsZXQgZG93ID0gYnlkYXlQYXJ0c1sxXTtcbiAgICAgICAgICAgIGxldCBtb250aF9kYXk7XG5cbiAgICAgICAgICAgIGxldCBmaXJzdF9tYXRjaGluZ19kYXkgPSAoKGRvdyArIDcgLSBmaXJzdF9kb3cpICUgNykgKyAxO1xuICAgICAgICAgICAgbGV0IGxhc3RfbWF0Y2hpbmdfZGF5ID0gZGF5c0luTW9udGggLSAoKGxhc3RfZG93ICsgNyAtIGRvdykgJSA3KTtcblxuICAgICAgICAgICAgaWYgKHBvcyA9PSAwKSB7XG4gICAgICAgICAgICAgIGZvciAobGV0IGRheSA9IGZpcnN0X21hdGNoaW5nX2RheTsgZGF5IDw9IGRheXNJbk1vbnRoOyBkYXkgKz0gNykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF5cy5wdXNoKGRveV9vZmZzZXQgKyBkYXkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBvcyA+IDApIHtcbiAgICAgICAgICAgICAgbW9udGhfZGF5ID0gZmlyc3RfbWF0Y2hpbmdfZGF5ICsgKHBvcyAtIDEpICogNztcblxuICAgICAgICAgICAgICBpZiAobW9udGhfZGF5IDw9IGRheXNJbk1vbnRoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXlzLnB1c2goZG95X29mZnNldCArIG1vbnRoX2RheSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG1vbnRoX2RheSA9IGxhc3RfbWF0Y2hpbmdfZGF5ICsgKHBvcyArIDEpICogNztcblxuICAgICAgICAgICAgICBpZiAobW9udGhfZGF5ID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF5cy5wdXNoKGRveV9vZmZzZXQgKyBtb250aF9kYXkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBSZXR1cm4gZGF0ZXMgaW4gb3JkZXIgb2Ygb2NjdXJyZW5jZSAoMSwyLDMsLi4uKSBpbnN0ZWFkXG4gICAgICAvLyBvZiBieSBncm91cHMgb2Ygd2Vla2RheXMgKDEsOCwxNSwuLi4sMiw5LDE2LC4uLikuXG4gICAgICB0aGlzLmRheXMuc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhIC0gYjsgfSk7IC8vIENvbXBhcmF0b3IgZnVuY3Rpb24gYWxsb3dzIHRvIHNvcnQgbnVtYmVycy5cbiAgICB9IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAyICYmIFwiQllEQVlcIiBpbiBwYXJ0cyAmJiBcIkJZTU9OVEhEQVlcIiBpbiBwYXJ0cykge1xuICAgICAgbGV0IGV4cGFuZGVkRGF5cyA9IHRoaXMuZXhwYW5kX2J5X2RheShhWWVhcik7XG5cbiAgICAgIGZvciAobGV0IGRheSBvZiBleHBhbmRlZERheXMpIHtcbiAgICAgICAgbGV0IHR0ID0gVGltZS5mcm9tRGF5T2ZZZWFyKGRheSwgYVllYXIpO1xuICAgICAgICBpZiAodGhpcy5ieV9kYXRhLkJZTU9OVEhEQVkuaW5kZXhPZih0dC5kYXkpID49IDApIHtcbiAgICAgICAgICB0aGlzLmRheXMucHVzaChkYXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChwYXJ0Q291bnQgPT0gMyAmJlxuICAgICAgICAgICAgICAgXCJCWURBWVwiIGluIHBhcnRzICYmXG4gICAgICAgICAgICAgICBcIkJZTU9OVEhEQVlcIiBpbiBwYXJ0cyAmJlxuICAgICAgICAgICAgICAgXCJCWU1PTlRIXCIgaW4gcGFydHMpIHtcbiAgICAgIGxldCBleHBhbmRlZERheXMgPSB0aGlzLmV4cGFuZF9ieV9kYXkoYVllYXIpO1xuXG4gICAgICBmb3IgKGxldCBkYXkgb2YgZXhwYW5kZWREYXlzKSB7XG4gICAgICAgIGxldCB0dCA9IFRpbWUuZnJvbURheU9mWWVhcihkYXksIGFZZWFyKTtcblxuICAgICAgICBpZiAodGhpcy5ieV9kYXRhLkJZTU9OVEguaW5kZXhPZih0dC5tb250aCkgPj0gMCAmJlxuICAgICAgICAgICAgdGhpcy5ieV9kYXRhLkJZTU9OVEhEQVkuaW5kZXhPZih0dC5kYXkpID49IDApIHtcbiAgICAgICAgICB0aGlzLmRheXMucHVzaChkYXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChwYXJ0Q291bnQgPT0gMiAmJiBcIkJZREFZXCIgaW4gcGFydHMgJiYgXCJCWVdFRUtOT1wiIGluIHBhcnRzKSB7XG4gICAgICBsZXQgZXhwYW5kZWREYXlzID0gdGhpcy5leHBhbmRfYnlfZGF5KGFZZWFyKTtcblxuICAgICAgZm9yIChsZXQgZGF5IG9mIGV4cGFuZGVkRGF5cykge1xuICAgICAgICBsZXQgdHQgPSBUaW1lLmZyb21EYXlPZlllYXIoZGF5LCBhWWVhcik7XG4gICAgICAgIGxldCB3ZWVrbm8gPSB0dC53ZWVrTnVtYmVyKHRoaXMucnVsZS53a3N0KTtcblxuICAgICAgICBpZiAodGhpcy5ieV9kYXRhLkJZV0VFS05PLmluZGV4T2Yod2Vla25vKSkge1xuICAgICAgICAgIHRoaXMuZGF5cy5wdXNoKGRheSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAzICYmXG4gICAgICAgICAgICAgICBcIkJZREFZXCIgaW4gcGFydHMgJiZcbiAgICAgICAgICAgICAgIFwiQllXRUVLTk9cIiBpbiBwYXJ0cyAmJlxuICAgICAgICAgICAgICAgXCJCWU1PTlRIREFZXCIgaW4gcGFydHMpIDsgZWxzZSBpZiAocGFydENvdW50ID09IDEgJiYgXCJCWVlFQVJEQVlcIiBpbiBwYXJ0cykge1xuICAgICAgdGhpcy5kYXlzID0gdGhpcy5kYXlzLmNvbmNhdCh0aGlzLmJ5X2RhdGEuQllZRUFSREFZKTtcbiAgICB9IGVsc2UgaWYgKHBhcnRDb3VudCA9PSAyICYmIFwiQllZRUFSREFZXCIgaW4gcGFydHMgJiYgXCJCWURBWVwiIGluIHBhcnRzKSB7XG4gICAgICBsZXQgZGF5c0luWWVhciA9IFRpbWUuaXNMZWFwWWVhcihhWWVhcikgPyAzNjYgOiAzNjU7XG4gICAgICBsZXQgZXhwYW5kZWREYXlzID0gbmV3IFNldCh0aGlzLmV4cGFuZF9ieV9kYXkoYVllYXIpKTtcblxuICAgICAgZm9yIChsZXQgZG95IG9mIHRoaXMuYnlfZGF0YS5CWVlFQVJEQVkpIHtcbiAgICAgICAgaWYgKGRveSA8IDApIHtcbiAgICAgICAgICBkb3kgKz0gZGF5c0luWWVhciArIDE7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXhwYW5kZWREYXlzLmhhcyhkb3kpKSB7XG4gICAgICAgICAgdGhpcy5kYXlzLnB1c2goZG95KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRheXMgPSBbXTtcbiAgICB9XG5cbiAgICBsZXQgZGF5c0luWWVhciA9IFRpbWUuaXNMZWFwWWVhcihhWWVhcikgPyAzNjYgOiAzNjU7XG4gICAgdGhpcy5kYXlzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGlmIChhIDwgMCkgYSArPSBkYXlzSW5ZZWFyICsgMTtcbiAgICAgIGlmIChiIDwgMCkgYiArPSBkYXlzSW5ZZWFyICsgMTtcbiAgICAgIHJldHVybiBhIC0gYjtcbiAgICB9KTtcblxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgZXhwYW5kX2J5X2RheShhWWVhcikge1xuXG4gICAgbGV0IGRheXNfbGlzdCA9IFtdO1xuICAgIGxldCB0bXAgPSB0aGlzLmxhc3QuY2xvbmUoKTtcblxuICAgIHRtcC55ZWFyID0gYVllYXI7XG4gICAgdG1wLm1vbnRoID0gMTtcbiAgICB0bXAuZGF5ID0gMTtcbiAgICB0bXAuaXNEYXRlID0gdHJ1ZTtcblxuICAgIGxldCBzdGFydF9kb3cgPSB0bXAuZGF5T2ZXZWVrKCk7XG5cbiAgICB0bXAubW9udGggPSAxMjtcbiAgICB0bXAuZGF5ID0gMzE7XG4gICAgdG1wLmlzRGF0ZSA9IHRydWU7XG5cbiAgICBsZXQgZW5kX2RvdyA9IHRtcC5kYXlPZldlZWsoKTtcbiAgICBsZXQgZW5kX3llYXJfZGF5ID0gdG1wLmRheU9mWWVhcigpO1xuXG4gICAgZm9yIChsZXQgZGF5IG9mIHRoaXMuYnlfZGF0YS5CWURBWSkge1xuICAgICAgbGV0IHBhcnRzID0gdGhpcy5ydWxlRGF5T2ZXZWVrKGRheSk7XG4gICAgICBsZXQgcG9zID0gcGFydHNbMF07XG4gICAgICBsZXQgZG93ID0gcGFydHNbMV07XG5cbiAgICAgIGlmIChwb3MgPT0gMCkge1xuICAgICAgICBsZXQgdG1wX3N0YXJ0X2RveSA9ICgoZG93ICsgNyAtIHN0YXJ0X2RvdykgJSA3KSArIDE7XG5cbiAgICAgICAgZm9yIChsZXQgZG95ID0gdG1wX3N0YXJ0X2RveTsgZG95IDw9IGVuZF95ZWFyX2RheTsgZG95ICs9IDcpIHtcbiAgICAgICAgICBkYXlzX2xpc3QucHVzaChkb3kpO1xuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSBpZiAocG9zID4gMCkge1xuICAgICAgICBsZXQgZmlyc3Q7XG4gICAgICAgIGlmIChkb3cgPj0gc3RhcnRfZG93KSB7XG4gICAgICAgICAgZmlyc3QgPSBkb3cgLSBzdGFydF9kb3cgKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpcnN0ID0gZG93IC0gc3RhcnRfZG93ICsgODtcbiAgICAgICAgfVxuXG4gICAgICAgIGRheXNfbGlzdC5wdXNoKGZpcnN0ICsgKHBvcyAtIDEpICogNyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgbGFzdDtcbiAgICAgICAgcG9zID0gLXBvcztcblxuICAgICAgICBpZiAoZG93IDw9IGVuZF9kb3cpIHtcbiAgICAgICAgICBsYXN0ID0gZW5kX3llYXJfZGF5IC0gZW5kX2RvdyArIGRvdztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYXN0ID0gZW5kX3llYXJfZGF5IC0gZW5kX2RvdyArIGRvdyAtIDc7XG4gICAgICAgIH1cblxuICAgICAgICBkYXlzX2xpc3QucHVzaChsYXN0IC0gKHBvcyAtIDEpICogNyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkYXlzX2xpc3Q7XG4gIH1cblxuICBpc19kYXlfaW5fYnlkYXkodHQpIHtcbiAgICBpZiAodGhpcy5ieV9kYXRhLkJZREFZKSB7XG4gICAgICBmb3IgKGxldCBkYXkgb2YgdGhpcy5ieV9kYXRhLkJZREFZKSB7XG4gICAgICAgIGxldCBwYXJ0cyA9IHRoaXMucnVsZURheU9mV2VlayhkYXkpO1xuICAgICAgICBsZXQgcG9zID0gcGFydHNbMF07XG4gICAgICAgIGxldCBkb3cgPSBwYXJ0c1sxXTtcbiAgICAgICAgbGV0IHRoaXNfZG93ID0gdHQuZGF5T2ZXZWVrKCk7XG5cbiAgICAgICAgaWYgKChwb3MgPT0gMCAmJiBkb3cgPT0gdGhpc19kb3cpIHx8XG4gICAgICAgICAgICAodHQubnRoV2Vla0RheShkb3csIHBvcykgPT0gdHQuZGF5KSkge1xuICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGdpdmVuIHZhbHVlIGlzIGluIEJZU0VUUE9TLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge051bWVyaWN9IGFQb3MgcG9zaXRpb24gdG8gY2hlY2sgZm9yLlxuICAgKiBAcmV0dXJuIHtCb29sZWFufSBmYWxzZSB1bmxlc3MgQllTRVRQT1MgcnVsZXMgZXhpc3RcbiAgICogICAgICAgICAgICAgICAgICAgYW5kIHRoZSBnaXZlbiB2YWx1ZSBpcyBwcmVzZW50IGluIHJ1bGVzLlxuICAgKi9cbiAgY2hlY2tfc2V0X3Bvc2l0aW9uKGFQb3MpIHtcbiAgICBpZiAodGhpcy5oYXNfYnlfZGF0YSgnQllTRVRQT1MnKSkge1xuICAgICAgbGV0IGlkeCA9IHRoaXMuYnlfZGF0YS5CWVNFVFBPUy5pbmRleE9mKGFQb3MpO1xuICAgICAgLy8gbmVnYXRpdmUgbnVtYmVycyBhcmUgbm90IGZhbHNlLXlcbiAgICAgIHJldHVybiBpZHggIT09IC0xO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzb3J0X2J5ZGF5X3J1bGVzKGFSdWxlcykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYVJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGk7IGorKykge1xuICAgICAgICBsZXQgb25lID0gdGhpcy5ydWxlRGF5T2ZXZWVrKGFSdWxlc1tqXSwgdGhpcy5ydWxlLndrc3QpWzFdO1xuICAgICAgICBsZXQgdHdvID0gdGhpcy5ydWxlRGF5T2ZXZWVrKGFSdWxlc1tpXSwgdGhpcy5ydWxlLndrc3QpWzFdO1xuXG4gICAgICAgIGlmIChvbmUgPiB0d28pIHtcbiAgICAgICAgICBsZXQgdG1wID0gYVJ1bGVzW2ldO1xuICAgICAgICAgIGFSdWxlc1tpXSA9IGFSdWxlc1tqXTtcbiAgICAgICAgICBhUnVsZXNbal0gPSB0bXA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjaGVja19jb250cmFjdF9yZXN0cmljdGlvbihhUnVsZVR5cGUsIHYpIHtcbiAgICBsZXQgaW5kZXhNYXBWYWx1ZSA9IFJlY3VySXRlcmF0b3IuX2luZGV4TWFwW2FSdWxlVHlwZV07XG4gICAgbGV0IHJ1bGVNYXBWYWx1ZSA9IFJlY3VySXRlcmF0b3IuX2V4cGFuZE1hcFt0aGlzLnJ1bGUuZnJlcV1baW5kZXhNYXBWYWx1ZV07XG4gICAgbGV0IHBhc3MgPSBmYWxzZTtcblxuICAgIGlmIChhUnVsZVR5cGUgaW4gdGhpcy5ieV9kYXRhICYmXG4gICAgICAgIHJ1bGVNYXBWYWx1ZSA9PSBSZWN1ckl0ZXJhdG9yLkNPTlRSQUNUKSB7XG5cbiAgICAgIGxldCBydWxlVHlwZSA9IHRoaXMuYnlfZGF0YVthUnVsZVR5cGVdO1xuXG4gICAgICBmb3IgKGxldCBieWRhdGEgb2YgcnVsZVR5cGUpIHtcbiAgICAgICAgaWYgKGJ5ZGF0YSA9PSB2KSB7XG4gICAgICAgICAgcGFzcyA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm90IGEgY29udHJhY3RpbmcgYnlydWxlIG9yIGhhcyBubyBkYXRhLCB0ZXN0IHBhc3Nlc1xuICAgICAgcGFzcyA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBwYXNzO1xuICB9XG5cbiAgY2hlY2tfY29udHJhY3RpbmdfcnVsZXMoKSB7XG4gICAgbGV0IGRvdyA9IHRoaXMubGFzdC5kYXlPZldlZWsoKTtcbiAgICBsZXQgd2Vla05vID0gdGhpcy5sYXN0LndlZWtOdW1iZXIodGhpcy5ydWxlLndrc3QpO1xuICAgIGxldCBkb3kgPSB0aGlzLmxhc3QuZGF5T2ZZZWFyKCk7XG5cbiAgICByZXR1cm4gKHRoaXMuY2hlY2tfY29udHJhY3RfcmVzdHJpY3Rpb24oXCJCWVNFQ09ORFwiLCB0aGlzLmxhc3Quc2Vjb25kKSAmJlxuICAgICAgICAgICAgdGhpcy5jaGVja19jb250cmFjdF9yZXN0cmljdGlvbihcIkJZTUlOVVRFXCIsIHRoaXMubGFzdC5taW51dGUpICYmXG4gICAgICAgICAgICB0aGlzLmNoZWNrX2NvbnRyYWN0X3Jlc3RyaWN0aW9uKFwiQllIT1VSXCIsIHRoaXMubGFzdC5ob3VyKSAmJlxuICAgICAgICAgICAgdGhpcy5jaGVja19jb250cmFjdF9yZXN0cmljdGlvbihcIkJZREFZXCIsIFJlY3VyLm51bWVyaWNEYXlUb0ljYWxEYXkoZG93KSkgJiZcbiAgICAgICAgICAgIHRoaXMuY2hlY2tfY29udHJhY3RfcmVzdHJpY3Rpb24oXCJCWVdFRUtOT1wiLCB3ZWVrTm8pICYmXG4gICAgICAgICAgICB0aGlzLmNoZWNrX2NvbnRyYWN0X3Jlc3RyaWN0aW9uKFwiQllNT05USERBWVwiLCB0aGlzLmxhc3QuZGF5KSAmJlxuICAgICAgICAgICAgdGhpcy5jaGVja19jb250cmFjdF9yZXN0cmljdGlvbihcIkJZTU9OVEhcIiwgdGhpcy5sYXN0Lm1vbnRoKSAmJlxuICAgICAgICAgICAgdGhpcy5jaGVja19jb250cmFjdF9yZXN0cmljdGlvbihcIkJZWUVBUkRBWVwiLCBkb3kpKTtcbiAgfVxuXG4gIHNldHVwX2RlZmF1bHRzKGFSdWxlVHlwZSwgcmVxLCBkZWZ0aW1lKSB7XG4gICAgbGV0IGluZGV4TWFwVmFsdWUgPSBSZWN1ckl0ZXJhdG9yLl9pbmRleE1hcFthUnVsZVR5cGVdO1xuICAgIGxldCBydWxlTWFwVmFsdWUgPSBSZWN1ckl0ZXJhdG9yLl9leHBhbmRNYXBbdGhpcy5ydWxlLmZyZXFdW2luZGV4TWFwVmFsdWVdO1xuXG4gICAgaWYgKHJ1bGVNYXBWYWx1ZSAhPSBSZWN1ckl0ZXJhdG9yLkNPTlRSQUNUKSB7XG4gICAgICBpZiAoIShhUnVsZVR5cGUgaW4gdGhpcy5ieV9kYXRhKSkge1xuICAgICAgICB0aGlzLmJ5X2RhdGFbYVJ1bGVUeXBlXSA9IFtkZWZ0aW1lXTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnJ1bGUuZnJlcSAhPSByZXEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnlfZGF0YVthUnVsZVR5cGVdWzBdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGVmdGltZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGl0ZXJhdG9yIGludG8gYSBzZXJpYWxpemUtYWJsZSBvYmplY3QuICBXaWxsIHByZXNlcnZlIGN1cnJlbnRcbiAgICogaXRlcmF0aW9uIHNlcXVlbmNlIHRvIGVuc3VyZSB0aGUgc2VhbWxlc3MgY29udGludWF0aW9uIG9mIHRoZSByZWN1cnJlbmNlXG4gICAqIHJ1bGUuXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICBsZXQgcmVzdWx0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIHJlc3VsdC5pbml0aWFsaXplZCA9IHRoaXMuaW5pdGlhbGl6ZWQ7XG4gICAgcmVzdWx0LnJ1bGUgPSB0aGlzLnJ1bGUudG9KU09OKCk7XG4gICAgcmVzdWx0LmR0c3RhcnQgPSB0aGlzLmR0c3RhcnQudG9KU09OKCk7XG4gICAgcmVzdWx0LmJ5X2RhdGEgPSB0aGlzLmJ5X2RhdGE7XG4gICAgcmVzdWx0LmRheXMgPSB0aGlzLmRheXM7XG4gICAgcmVzdWx0Lmxhc3QgPSB0aGlzLmxhc3QudG9KU09OKCk7XG4gICAgcmVzdWx0LmJ5X2luZGljZXMgPSB0aGlzLmJ5X2luZGljZXM7XG4gICAgcmVzdWx0Lm9jY3VycmVuY2VfbnVtYmVyID0gdGhpcy5vY2N1cnJlbmNlX251bWJlcjtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn1cblxuLyoqXG4gKiBBbiBlcnJvciBpbmRpY2F0aW5nIHRoYXQgYSByZWN1cnJlbmNlIHJ1bGUgaXMgaW52YWxpZCBhbmQgcHJvZHVjZXMgbm9cbiAqIG9jY3VycmVuY2VzLlxuICpcbiAqIEBleHRlbmRzIHtFcnJvcn1cbiAqIEBjbGFzc1xuICovXG5jbGFzcyBJbnZhbGlkUmVjdXJyZW5jZVJ1bGVFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoXCJSZWN1cnJlbmNlIHJ1bGUgaGFzIG5vIHZhbGlkIG9jY3VycmVuY2VzXCIpO1xuICB9XG59XG5cbi8qIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKiBQb3J0aW9ucyBDb3B5cmlnaHQgKEMpIFBoaWxpcHAgS2V3aXNjaCAqL1xuXG5cbi8qKlxuICogVGhpcyBsZXRzIHR5cGVzY3JpcHQgcmVzb2x2ZSBvdXIgY3VzdG9tIHR5cGVzIGluIHRoZVxuICogZ2VuZXJhdGVkIGQudHMgZmlsZXMgKGpzZG9jIHR5cGVkZWZzIGFyZSBjb252ZXJ0ZWQgdG8gdHlwZXNjcmlwdCB0eXBlcykuXG4gKiBJZ25vcmUgcHJldmVudHMgdGhlIHR5cGVkZWZzIGZyb20gYmVpbmcgZG9jdW1lbnRlZCBtb3JlIHRoYW4gb25jZS5cbiAqXG4gKiBAaWdub3JlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS53ZWVrRGF5fSB3ZWVrRGF5XG4gKiBJbXBvcnRzIHRoZSAnd2Vla0RheScgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS5mcmVxdWVuY3lWYWx1ZXN9IGZyZXF1ZW5jeVZhbHVlc1xuICogSW1wb3J0cyB0aGUgJ2ZyZXF1ZW5jeVZhbHVlcycgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKi9cblxuY29uc3QgVkFMSURfREFZX05BTUVTID0gL14oU1V8TU98VFV8V0V8VEh8RlJ8U0EpJC87XG5jb25zdCBWQUxJRF9CWURBWV9QQVJUID0gL14oWystXSk/KDVbMC0zXXxbMS00XVswLTldfFsxLTldKT8oU1V8TU98VFV8V0V8VEh8RlJ8U0EpJC87XG5jb25zdCBET1dfTUFQID0ge1xuICBTVTogVGltZS5TVU5EQVksXG4gIE1POiBUaW1lLk1PTkRBWSxcbiAgVFU6IFRpbWUuVFVFU0RBWSxcbiAgV0U6IFRpbWUuV0VETkVTREFZLFxuICBUSDogVGltZS5USFVSU0RBWSxcbiAgRlI6IFRpbWUuRlJJREFZLFxuICBTQTogVGltZS5TQVRVUkRBWVxufTtcblxuY29uc3QgUkVWRVJTRV9ET1dfTUFQID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKERPV19NQVApLm1hcChlbnRyeSA9PiBlbnRyeS5yZXZlcnNlKCkpKTtcblxuY29uc3QgQUxMT1dFRF9GUkVRID0gWydTRUNPTkRMWScsICdNSU5VVEVMWScsICdIT1VSTFknLFxuICAgICAgICAgICAgICAgICAgICAgICdEQUlMWScsICdXRUVLTFknLCAnTU9OVEhMWScsICdZRUFSTFknXTtcblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIFwicmVjdXJcIiB2YWx1ZSB0eXBlLCB1c2VkIGZvciBleGFtcGxlIGJ5IFJSVUxFLiBJdCBwcm92aWRlcyBtZXRob2RzIHRvXG4gKiBjYWxjdWxhdGUgb2NjdXJyZW5jZXMgYW1vbmcgb3RoZXJzLlxuICpcbiAqIEBtZW1iZXJvZiBJQ0FMXG4gKi9cbmNsYXNzIFJlY3VyIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIElDQUwuUmVjdXJ9IGluc3RhbmNlIGZyb20gdGhlIHBhc3NlZCBzdHJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgICAgICAgICBUaGUgc3RyaW5nIHRvIHBhcnNlXG4gICAqIEByZXR1cm4ge1JlY3VyfSAgICAgICAgICAgICAgICBUaGUgY3JlYXRlZCByZWN1cnJlbmNlIGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgZnJvbVN0cmluZyhzdHJpbmcpIHtcbiAgICBsZXQgZGF0YSA9IHRoaXMuX3N0cmluZ1RvRGF0YShzdHJpbmcsIGZhbHNlKTtcbiAgICByZXR1cm4gbmV3IFJlY3VyKGRhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIElDQUwuUmVjdXJ9IGluc3RhbmNlIHVzaW5nIG1lbWJlcnMgZnJvbSB0aGUgcGFzc2VkXG4gICAqIGRhdGEgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYURhdGEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbiBvYmplY3Qgd2l0aCBtZW1iZXJzIG9mIHRoZSByZWN1cnJlbmNlXG4gICAqIEBwYXJhbSB7ZnJlcXVlbmN5VmFsdWVzPX0gYURhdGEuZnJlcSAgICAgICAgICAgICAgIFRoZSBmcmVxdWVuY3kgdmFsdWVcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBhRGF0YS5pbnRlcnZhbCAgICAgICAgICAgICAgICAgICAgVGhlIElOVEVSVkFMIHZhbHVlXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGFEYXRhLndrc3QgICAgICAgICAgICAgICAgICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHZhbHVlXG4gICAqIEBwYXJhbSB7VGltZT19IGFEYXRhLnVudGlsICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBlbmQgb2YgdGhlIHJlY3VycmVuY2Ugc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gYURhdGEuY291bnQgICAgICAgICAgICAgICAgICAgICAgIFRoZSBudW1iZXIgb2Ygb2NjdXJyZW5jZXNcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGFEYXRhLmJ5c2Vjb25kICAgICAgICAgICAgVGhlIHNlY29uZHMgZm9yIHRoZSBCWVNFQ09ORCBwYXJ0XG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBhRGF0YS5ieW1pbnV0ZSAgICAgICAgICAgIFRoZSBtaW51dGVzIGZvciB0aGUgQllNSU5VVEUgcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxOdW1iZXI+PX0gYURhdGEuYnlob3VyICAgICAgICAgICAgICBUaGUgaG91cnMgZm9yIHRoZSBCWUhPVVIgcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxTdHJpbmc+PX0gYURhdGEuYnlkYXkgICAgICAgICAgICAgICBUaGUgQllEQVkgdmFsdWVzXG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBhRGF0YS5ieW1vbnRoZGF5ICAgICAgICAgIFRoZSBkYXlzIGZvciB0aGUgQllNT05USERBWSBwYXJ0XG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBhRGF0YS5ieXllYXJkYXkgICAgICAgICAgIFRoZSBkYXlzIGZvciB0aGUgQllZRUFSREFZIHBhcnRcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGFEYXRhLmJ5d2Vla25vICAgICAgICAgICAgVGhlIHdlZWtzIGZvciB0aGUgQllXRUVLTk8gcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxOdW1iZXI+PX0gYURhdGEuYnltb250aCAgICAgICAgICAgICBUaGUgbW9udGggZm9yIHRoZSBCWU1PTlRIIHBhcnRcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGFEYXRhLmJ5c2V0cG9zICAgICAgICAgICAgVGhlIHBvc2l0aW9uYWxzIGZvciB0aGUgQllTRVRQT1MgcGFydFxuICAgKi9cbiAgc3RhdGljIGZyb21EYXRhKGFEYXRhKSB7XG4gICAgcmV0dXJuIG5ldyBSZWN1cihhRGF0YSk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgYSByZWN1cnJlbmNlIHN0cmluZyB0byBhIGRhdGEgb2JqZWN0LCBzdWl0YWJsZSBmb3IgdGhlIGZyb21EYXRhXG4gICAqIG1ldGhvZC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZyAgICAgVGhlIHN0cmluZyB0byBwYXJzZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZtdEljYWwgICBJZiB0cnVlLCB0aGUgc3RyaW5nIGlzIGNvbnNpZGVyZWQgdG8gYmUgYW5cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpQ2FsZW5kYXIgc3RyaW5nXG4gICAqIEByZXR1cm4ge1JlY3VyfSAgICAgICAgICAgIFRoZSByZWN1cnJlbmNlIGluc3RhbmNlXG4gICAqL1xuICBzdGF0aWMgX3N0cmluZ1RvRGF0YShzdHJpbmcsIGZtdEljYWwpIHtcbiAgICBsZXQgZGljdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICAvLyBzcGxpdCBpcyBzbG93ZXIgaW4gRkYgYnV0IGZhc3QgZW5vdWdoLlxuICAgIC8vIHY4IGhvd2V2ZXIgdGhpcyBpcyBmYXN0ZXIgdGhlbiBtYW51YWwgc3BsaXQ/XG4gICAgbGV0IHZhbHVlcyA9IHN0cmluZy5zcGxpdCgnOycpO1xuICAgIGxldCBsZW4gPSB2YWx1ZXMubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgbGV0IHBhcnRzID0gdmFsdWVzW2ldLnNwbGl0KCc9Jyk7XG4gICAgICBsZXQgdWNuYW1lID0gcGFydHNbMF0udG9VcHBlckNhc2UoKTtcbiAgICAgIGxldCBsY25hbWUgPSBwYXJ0c1swXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgbGV0IG5hbWUgPSAoZm10SWNhbCA/IGxjbmFtZSA6IHVjbmFtZSk7XG4gICAgICBsZXQgdmFsdWUgPSBwYXJ0c1sxXTtcblxuICAgICAgaWYgKHVjbmFtZSBpbiBwYXJ0RGVzaWduKSB7XG4gICAgICAgIGxldCBwYXJ0QXJyID0gdmFsdWUuc3BsaXQoJywnKTtcbiAgICAgICAgbGV0IHBhcnRTZXQgPSBuZXcgU2V0KCk7XG5cbiAgICAgICAgZm9yIChsZXQgcGFydCBvZiBwYXJ0QXJyKSB7XG4gICAgICAgICAgcGFydFNldC5hZGQocGFydERlc2lnblt1Y25hbWVdKHBhcnQpKTtcbiAgICAgICAgfVxuICAgICAgICBwYXJ0QXJyID0gWy4uLnBhcnRTZXRdO1xuXG4gICAgICAgIGRpY3RbbmFtZV0gPSAocGFydEFyci5sZW5ndGggPT0gMSA/IHBhcnRBcnJbMF0gOiBwYXJ0QXJyKTtcbiAgICAgIH0gZWxzZSBpZiAodWNuYW1lIGluIG9wdGlvbkRlc2lnbikge1xuICAgICAgICBvcHRpb25EZXNpZ25bdWNuYW1lXSh2YWx1ZSwgZGljdCwgZm10SWNhbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBEb24ndCBzd2FsbG93IHVua25vd24gdmFsdWVzLiBKdXN0IHNldCB0aGVtIGFzIHRoZXkgYXJlLlxuICAgICAgICBkaWN0W2xjbmFtZV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGljdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGFuIGljYWwgcmVwcmVzZW50YXRpb24gb2YgYSBkYXkgKFNVLCBNTywgZXRjLi4pXG4gICAqIGludG8gYSBudW1lcmljIHZhbHVlIG9mIHRoYXQgZGF5LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nICAgICBUaGUgaUNhbGVuZGFyIGRheSBuYW1lXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGFXZWVrU3RhcnRcbiAgICogICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHdlZWtkYXksIGRlZmF1bHRzIHRvIFNVTkRBWVxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICAgICBOdW1lcmljIHZhbHVlIG9mIGdpdmVuIGRheVxuICAgKi9cbiAgc3RhdGljIGljYWxEYXlUb051bWVyaWNEYXkoc3RyaW5nLCBhV2Vla1N0YXJ0KSB7XG4gICAgLy9YWFg6IHRoaXMgaXMgaGVyZSBzbyB3ZSBjYW4gZGVhbFxuICAgIC8vICAgICB3aXRoIHBvc3NpYmx5IGludmFsaWQgc3RyaW5nIHZhbHVlcy5cbiAgICBsZXQgZmlyc3REb3cgPSBhV2Vla1N0YXJ0IHx8IFRpbWUuU1VOREFZO1xuICAgIHJldHVybiAoKERPV19NQVBbc3RyaW5nXSAtIGZpcnN0RG93ICsgNykgJSA3KSArIDE7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBhIG51bWVyaWMgZGF5IHZhbHVlIGludG8gaXRzIGljYWwgcmVwcmVzZW50YXRpb24gKFNVLCBNTywgZXRjLi4pXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBudW0gICAgICAgIE51bWVyaWMgdmFsdWUgb2YgZ2l2ZW4gZGF5XG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGFXZWVrU3RhcnRcbiAgICogICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHdlZWtkYXksIGRlZmF1bHRzIHRvIFNVTkRBWVxuICAgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgICBUaGUgSUNBTCBkYXkgdmFsdWUsIGUuZyBTVSxNTywuLi5cbiAgICovXG4gIHN0YXRpYyBudW1lcmljRGF5VG9JY2FsRGF5KG51bSwgYVdlZWtTdGFydCkge1xuICAgIC8vWFhYOiB0aGlzIGlzIGhlcmUgc28gd2UgY2FuIGRlYWwgd2l0aCBwb3NzaWJseSBpbnZhbGlkIG51bWJlciB2YWx1ZXMuXG4gICAgLy8gICAgIEFsc28sIHRoaXMgYWxsb3dzIGNvbnNpc3RlbnQgbWFwcGluZyBiZXR3ZWVuIGRheSBudW1iZXJzIGFuZCBkYXlcbiAgICAvLyAgICAgbmFtZXMgZm9yIGV4dGVybmFsIHVzZXJzLlxuICAgIGxldCBmaXJzdERvdyA9IGFXZWVrU3RhcnQgfHwgVGltZS5TVU5EQVk7XG4gICAgbGV0IGRvdyA9IChudW0gKyBmaXJzdERvdyAtIFRpbWUuU1VOREFZKTtcbiAgICBpZiAoZG93ID4gNykge1xuICAgICAgZG93IC09IDc7XG4gICAgfVxuICAgIHJldHVybiBSRVZFUlNFX0RPV19NQVBbZG93XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFJlY3VyIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbiBvYmplY3Qgd2l0aCBtZW1iZXJzIG9mIHRoZSByZWN1cnJlbmNlXG4gICAqIEBwYXJhbSB7ZnJlcXVlbmN5VmFsdWVzPX0gZGF0YS5mcmVxICAgICAgICAgICAgICAgIFRoZSBmcmVxdWVuY3kgdmFsdWVcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBkYXRhLmludGVydmFsICAgICAgICAgICAgICAgICAgICAgVGhlIElOVEVSVkFMIHZhbHVlXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGRhdGEud2tzdCAgICAgICAgICAgICAgICAgICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHZhbHVlXG4gICAqIEBwYXJhbSB7VGltZT19IGRhdGEudW50aWwgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBlbmQgb2YgdGhlIHJlY3VycmVuY2Ugc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS5jb3VudCAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBudW1iZXIgb2Ygb2NjdXJyZW5jZXNcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGRhdGEuYnlzZWNvbmQgICAgICAgICAgICAgVGhlIHNlY29uZHMgZm9yIHRoZSBCWVNFQ09ORCBwYXJ0XG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBkYXRhLmJ5bWludXRlICAgICAgICAgICAgIFRoZSBtaW51dGVzIGZvciB0aGUgQllNSU5VVEUgcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxOdW1iZXI+PX0gZGF0YS5ieWhvdXIgICAgICAgICAgICAgICBUaGUgaG91cnMgZm9yIHRoZSBCWUhPVVIgcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxTdHJpbmc+PX0gZGF0YS5ieWRheSAgICAgICAgICAgICAgICBUaGUgQllEQVkgdmFsdWVzXG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBkYXRhLmJ5bW9udGhkYXkgICAgICAgICAgIFRoZSBkYXlzIGZvciB0aGUgQllNT05USERBWSBwYXJ0XG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBkYXRhLmJ5eWVhcmRheSAgICAgICAgICAgIFRoZSBkYXlzIGZvciB0aGUgQllZRUFSREFZIHBhcnRcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGRhdGEuYnl3ZWVrbm8gICAgICAgICAgICAgVGhlIHdlZWtzIGZvciB0aGUgQllXRUVLTk8gcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxOdW1iZXI+PX0gZGF0YS5ieW1vbnRoICAgICAgICAgICAgICBUaGUgbW9udGggZm9yIHRoZSBCWU1PTlRIIHBhcnRcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGRhdGEuYnlzZXRwb3MgICAgICAgICAgICAgVGhlIHBvc2l0aW9uYWxzIGZvciB0aGUgQllTRVRQT1MgcGFydFxuICAgKi9cbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHRoaXMud3JhcHBlZEpTT2JqZWN0ID0gdGhpcztcbiAgICB0aGlzLnBhcnRzID0ge307XG5cbiAgICBpZiAoZGF0YSAmJiB0eXBlb2YoZGF0YSkgPT09ICdvYmplY3QnKSB7XG4gICAgICB0aGlzLmZyb21EYXRhKGRhdGEpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBbiBvYmplY3QgaG9sZGluZyB0aGUgQlktcGFydHMgb2YgdGhlIHJlY3VycmVuY2UgcnVsZVxuICAgKiBAbWVtYmVyb2YgSUNBTC5SZWN1clxuICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBieVBhcnRzXG4gICAqIEBwcm9wZXJ0eSB7QXJyYXkuPE51bWJlcj49fSBCWVNFQ09ORCAgICAgICAgICAgIFRoZSBzZWNvbmRzIGZvciB0aGUgQllTRUNPTkQgcGFydFxuICAgKiBAcHJvcGVydHkge0FycmF5LjxOdW1iZXI+PX0gQllNSU5VVEUgICAgICAgICAgICBUaGUgbWludXRlcyBmb3IgdGhlIEJZTUlOVVRFIHBhcnRcbiAgICogQHByb3BlcnR5IHtBcnJheS48TnVtYmVyPj19IEJZSE9VUiAgICAgICAgICAgICAgVGhlIGhvdXJzIGZvciB0aGUgQllIT1VSIHBhcnRcbiAgICogQHByb3BlcnR5IHtBcnJheS48U3RyaW5nPj19IEJZREFZICAgICAgICAgICAgICAgVGhlIEJZREFZIHZhbHVlc1xuICAgKiBAcHJvcGVydHkge0FycmF5LjxOdW1iZXI+PX0gQllNT05USERBWSAgICAgICAgICBUaGUgZGF5cyBmb3IgdGhlIEJZTU9OVEhEQVkgcGFydFxuICAgKiBAcHJvcGVydHkge0FycmF5LjxOdW1iZXI+PX0gQllZRUFSREFZICAgICAgICAgICBUaGUgZGF5cyBmb3IgdGhlIEJZWUVBUkRBWSBwYXJ0XG4gICAqIEBwcm9wZXJ0eSB7QXJyYXkuPE51bWJlcj49fSBCWVdFRUtOTyAgICAgICAgICAgIFRoZSB3ZWVrcyBmb3IgdGhlIEJZV0VFS05PIHBhcnRcbiAgICogQHByb3BlcnR5IHtBcnJheS48TnVtYmVyPj19IEJZTU9OVEggICAgICAgICAgICAgVGhlIG1vbnRoIGZvciB0aGUgQllNT05USCBwYXJ0XG4gICAqIEBwcm9wZXJ0eSB7QXJyYXkuPE51bWJlcj49fSBCWVNFVFBPUyAgICAgICAgICAgIFRoZSBwb3NpdGlvbmFscyBmb3IgdGhlIEJZU0VUUE9TIHBhcnRcbiAgICovXG5cbiAgLyoqXG4gICAqIEFuIG9iamVjdCBob2xkaW5nIHRoZSBCWS1wYXJ0cyBvZiB0aGUgcmVjdXJyZW5jZSBydWxlXG4gICAqIEB0eXBlIHtieVBhcnRzfVxuICAgKi9cbiAgcGFydHMgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgaW50ZXJ2YWwgdmFsdWUgZm9yIHRoZSByZWN1cnJlbmNlIHJ1bGUuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqL1xuICBpbnRlcnZhbCA9IDE7XG5cbiAgLyoqXG4gICAqIFRoZSB3ZWVrIHN0YXJ0IGRheVxuICAgKlxuICAgKiBAdHlwZSB7d2Vla0RheX1cbiAgICogQGRlZmF1bHQgSUNBTC5UaW1lLk1PTkRBWVxuICAgKi9cbiAgd2tzdCA9IFRpbWUuTU9OREFZO1xuXG4gIC8qKlxuICAgKiBUaGUgZW5kIG9mIHRoZSByZWN1cnJlbmNlXG4gICAqIEB0eXBlIHs/VGltZX1cbiAgICovXG4gIHVudGlsID0gbnVsbDtcblxuICAvKipcbiAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIG9jY3VycmVuY2VzXG4gICAqIEB0eXBlIHs/TnVtYmVyfVxuICAgKi9cbiAgY291bnQgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgZnJlcXVlbmN5IHZhbHVlLlxuICAgKiBAdHlwZSB7ZnJlcXVlbmN5VmFsdWVzfVxuICAgKi9cbiAgZnJlcSA9IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBjbGFzcyBpZGVudGlmaWVyLlxuICAgKiBAY29uc3RhbnRcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGRlZmF1bHQgXCJpY2FscmVjdXJcIlxuICAgKi9cbiAgaWNhbGNsYXNzID0gXCJpY2FscmVjdXJcIjtcblxuICAvKipcbiAgICogVGhlIHR5cGUgbmFtZSwgdG8gYmUgdXNlZCBpbiB0aGUgakNhbCBvYmplY3QuXG4gICAqIEBjb25zdGFudFxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAZGVmYXVsdCBcInJlY3VyXCJcbiAgICovXG4gIGljYWx0eXBlID0gXCJyZWN1clwiO1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgaXRlcmF0b3IgZm9yIHRoaXMgcmVjdXJyZW5jZSBydWxlLiBUaGUgcGFzc2VkIHN0YXJ0IGRhdGVcbiAgICogbXVzdCBiZSB0aGUgc3RhcnQgZGF0ZSBvZiB0aGUgZXZlbnQsIG5vdCB0aGUgc3RhcnQgb2YgdGhlIHJhbmdlIHRvXG4gICAqIHNlYXJjaCBpbi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogbGV0IHJlY3VyID0gY29tcC5nZXRGaXJzdFByb3BlcnR5VmFsdWUoJ3JydWxlJyk7XG4gICAqIGxldCBkdHN0YXJ0ID0gY29tcC5nZXRGaXJzdFByb3BlcnR5VmFsdWUoJ2R0c3RhcnQnKTtcbiAgICogbGV0IGl0ZXIgPSByZWN1ci5pdGVyYXRvcihkdHN0YXJ0KTtcbiAgICogZm9yIChsZXQgbmV4dCA9IGl0ZXIubmV4dCgpOyBuZXh0OyBuZXh0ID0gaXRlci5uZXh0KCkpIHtcbiAgICogICBpZiAobmV4dC5jb21wYXJlKHJhbmdlU3RhcnQpIDwgMCkge1xuICAgKiAgICAgY29udGludWU7XG4gICAqICAgfVxuICAgKiAgIGNvbnNvbGUubG9nKG5leHQudG9TdHJpbmcoKSk7XG4gICAqIH1cbiAgICpcbiAgICogQHBhcmFtIHtUaW1lfSBhU3RhcnQgICAgICAgIFRoZSBpdGVtJ3Mgc3RhcnQgZGF0ZVxuICAgKiBAcmV0dXJuIHtSZWN1ckl0ZXJhdG9yfSAgICAgVGhlIHJlY3VycmVuY2UgaXRlcmF0b3JcbiAgICovXG4gIGl0ZXJhdG9yKGFTdGFydCkge1xuICAgIHJldHVybiBuZXcgUmVjdXJJdGVyYXRvcih7XG4gICAgICBydWxlOiB0aGlzLFxuICAgICAgZHRzdGFydDogYVN0YXJ0XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGNsb25lIG9mIHRoZSByZWN1cnJlbmNlIG9iamVjdC5cbiAgICpcbiAgICogQHJldHVybiB7UmVjdXJ9ICAgICAgVGhlIGNsb25lZCBvYmplY3RcbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgUmVjdXIodGhpcy50b0pTT04oKSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSBjdXJyZW50IHJ1bGUgaXMgZmluaXRlLCBpLmUuIGhhcyBhIGNvdW50IG9yIHVudGlsIHBhcnQuXG4gICAqXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgICBUcnVlLCBpZiB0aGUgcnVsZSBpcyBmaW5pdGVcbiAgICovXG4gIGlzRmluaXRlKCkge1xuICAgIHJldHVybiAhISh0aGlzLmNvdW50IHx8IHRoaXMudW50aWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgY3VycmVudCBydWxlIGhhcyBhIGNvdW50IHBhcnQsIGFuZCBub3QgbGltaXRlZCBieSBhbiB1bnRpbFxuICAgKiBwYXJ0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgVHJ1ZSwgaWYgdGhlIHJ1bGUgaXMgYnkgY291bnRcbiAgICovXG4gIGlzQnlDb3VudCgpIHtcbiAgICByZXR1cm4gISEodGhpcy5jb3VudCAmJiAhdGhpcy51bnRpbCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIGNvbXBvbmVudCAocGFydCkgdG8gdGhlIHJlY3VycmVuY2UgcnVsZS4gVGhpcyBpcyBub3QgYSBjb21wb25lbnRcbiAgICogaW4gdGhlIHNlbnNlIG9mIHtAbGluayBJQ0FMLkNvbXBvbmVudH0sIGJ1dCBhIHBhcnQgb2YgdGhlIHJlY3VycmVuY2VcbiAgICogcnVsZSwgaS5lLiBCWU1PTlRILlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gYVR5cGUgICAgICAgICAgICBUaGUgbmFtZSBvZiB0aGUgY29tcG9uZW50IHBhcnRcbiAgICogQHBhcmFtIHtBcnJheXxTdHJpbmd9IGFWYWx1ZSAgICAgVGhlIGNvbXBvbmVudCB2YWx1ZVxuICAgKi9cbiAgYWRkQ29tcG9uZW50KGFUeXBlLCBhVmFsdWUpIHtcbiAgICBsZXQgdWNuYW1lID0gYVR5cGUudG9VcHBlckNhc2UoKTtcbiAgICBpZiAodWNuYW1lIGluIHRoaXMucGFydHMpIHtcbiAgICAgIHRoaXMucGFydHNbdWNuYW1lXS5wdXNoKGFWYWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucGFydHNbdWNuYW1lXSA9IFthVmFsdWVdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjb21wb25lbnQgdmFsdWUgZm9yIHRoZSBnaXZlbiBieS1wYXJ0LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gYVR5cGUgICAgICAgIFRoZSBjb21wb25lbnQgcGFydCBuYW1lXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFWYWx1ZXMgICAgICAgVGhlIGNvbXBvbmVudCB2YWx1ZXNcbiAgICovXG4gIHNldENvbXBvbmVudChhVHlwZSwgYVZhbHVlcykge1xuICAgIHRoaXMucGFydHNbYVR5cGUudG9VcHBlckNhc2UoKV0gPSBhVmFsdWVzLnNsaWNlKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyAoYSBjb3B5KSBvZiB0aGUgcmVxdWVzdGVkIGNvbXBvbmVudCB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFUeXBlICAgICAgICBUaGUgY29tcG9uZW50IHBhcnQgbmFtZVxuICAgKiBAcmV0dXJuIHtBcnJheX0gICAgICAgICAgICAgIFRoZSBjb21wb25lbnQgcGFydCB2YWx1ZVxuICAgKi9cbiAgZ2V0Q29tcG9uZW50KGFUeXBlKSB7XG4gICAgbGV0IHVjbmFtZSA9IGFUeXBlLnRvVXBwZXJDYXNlKCk7XG4gICAgcmV0dXJuICh1Y25hbWUgaW4gdGhpcy5wYXJ0cyA/IHRoaXMucGFydHNbdWNuYW1lXS5zbGljZSgpIDogW10pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyB0aGUgbmV4dCBvY2N1cnJlbmNlIGFmdGVyIHRoZSBnaXZlbiByZWN1cnJlbmNlIGlkLiBTZWUgdGhlXG4gICAqIGd1aWRlIG9uIHtAdHV0b3JpYWwgdGVybWlub2xvZ3l9IGZvciBtb3JlIGRldGFpbHMuXG4gICAqXG4gICAqIE5PVEU6IEN1cnJlbnRseSwgdGhpcyBtZXRob2QgaXRlcmF0ZXMgYWxsIG9jY3VycmVuY2VzIGZyb20gdGhlIHN0YXJ0XG4gICAqIGRhdGUuIEl0IHNob3VsZCBub3QgYmUgY2FsbGVkIGluIGEgbG9vcCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy4gSWYgeW91XG4gICAqIHdvdWxkIGxpa2UgdG8gZ2V0IG1vcmUgdGhhbiBvbmUgb2NjdXJyZW5jZSwgeW91IGNhbiBpdGVyYXRlIHRoZVxuICAgKiBvY2N1cnJlbmNlcyBtYW51YWxseSwgc2VlIHRoZSBleGFtcGxlIG9uIHRoZVxuICAgKiB7QGxpbmsgSUNBTC5SZWN1ciNpdGVyYXRvciBpdGVyYXRvcn0gbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0ge1RpbWV9IGFTdGFydFRpbWUgICAgICAgIFRoZSBzdGFydCBvZiB0aGUgZXZlbnQgc2VyaWVzXG4gICAqIEBwYXJhbSB7VGltZX0gYVJlY3VycmVuY2VJZCAgICAgVGhlIGRhdGUgb2YgdGhlIGxhc3Qgb2NjdXJyZW5jZVxuICAgKiBAcmV0dXJuIHtUaW1lfSAgICAgICAgICAgICAgICAgIFRoZSBuZXh0IG9jY3VycmVuY2UgYWZ0ZXJcbiAgICovXG4gIGdldE5leHRPY2N1cnJlbmNlKGFTdGFydFRpbWUsIGFSZWN1cnJlbmNlSWQpIHtcbiAgICBsZXQgaXRlciA9IHRoaXMuaXRlcmF0b3IoYVN0YXJ0VGltZSk7XG4gICAgbGV0IG5leHQ7XG5cbiAgICBkbyB7XG4gICAgICBuZXh0ID0gaXRlci5uZXh0KCk7XG4gICAgfSB3aGlsZSAobmV4dCAmJiBuZXh0LmNvbXBhcmUoYVJlY3VycmVuY2VJZCkgPD0gMCk7XG5cbiAgICBpZiAobmV4dCAmJiBhUmVjdXJyZW5jZUlkLnpvbmUpIHtcbiAgICAgIG5leHQuem9uZSA9IGFSZWN1cnJlbmNlSWQuem9uZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV4dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIHRoZSBjdXJyZW50IGluc3RhbmNlIHVzaW5nIG1lbWJlcnMgZnJvbSB0aGUgcGFzc2VkIGRhdGEgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbiBvYmplY3Qgd2l0aCBtZW1iZXJzIG9mIHRoZSByZWN1cnJlbmNlXG4gICAqIEBwYXJhbSB7ZnJlcXVlbmN5VmFsdWVzPX0gZGF0YS5mcmVxICAgICAgICAgICAgICAgIFRoZSBmcmVxdWVuY3kgdmFsdWVcbiAgICogQHBhcmFtIHtOdW1iZXI9fSBkYXRhLmludGVydmFsICAgICAgICAgICAgICAgICAgICAgVGhlIElOVEVSVkFMIHZhbHVlXG4gICAqIEBwYXJhbSB7d2Vla0RheT19IGRhdGEud2tzdCAgICAgICAgICAgICAgICAgICAgICAgIFRoZSB3ZWVrIHN0YXJ0IHZhbHVlXG4gICAqIEBwYXJhbSB7VGltZT19IGRhdGEudW50aWwgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBlbmQgb2YgdGhlIHJlY3VycmVuY2Ugc2V0XG4gICAqIEBwYXJhbSB7TnVtYmVyPX0gZGF0YS5jb3VudCAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBudW1iZXIgb2Ygb2NjdXJyZW5jZXNcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGRhdGEuYnlzZWNvbmQgICAgICAgICAgICAgVGhlIHNlY29uZHMgZm9yIHRoZSBCWVNFQ09ORCBwYXJ0XG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBkYXRhLmJ5bWludXRlICAgICAgICAgICAgIFRoZSBtaW51dGVzIGZvciB0aGUgQllNSU5VVEUgcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxOdW1iZXI+PX0gZGF0YS5ieWhvdXIgICAgICAgICAgICAgICBUaGUgaG91cnMgZm9yIHRoZSBCWUhPVVIgcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxTdHJpbmc+PX0gZGF0YS5ieWRheSAgICAgICAgICAgICAgICBUaGUgQllEQVkgdmFsdWVzXG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBkYXRhLmJ5bW9udGhkYXkgICAgICAgICAgIFRoZSBkYXlzIGZvciB0aGUgQllNT05USERBWSBwYXJ0XG4gICAqIEBwYXJhbSB7QXJyYXkuPE51bWJlcj49fSBkYXRhLmJ5eWVhcmRheSAgICAgICAgICAgIFRoZSBkYXlzIGZvciB0aGUgQllZRUFSREFZIHBhcnRcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGRhdGEuYnl3ZWVrbm8gICAgICAgICAgICAgVGhlIHdlZWtzIGZvciB0aGUgQllXRUVLTk8gcGFydFxuICAgKiBAcGFyYW0ge0FycmF5LjxOdW1iZXI+PX0gZGF0YS5ieW1vbnRoICAgICAgICAgICAgICBUaGUgbW9udGggZm9yIHRoZSBCWU1PTlRIIHBhcnRcbiAgICogQHBhcmFtIHtBcnJheS48TnVtYmVyPj19IGRhdGEuYnlzZXRwb3MgICAgICAgICAgICAgVGhlIHBvc2l0aW9uYWxzIGZvciB0aGUgQllTRVRQT1MgcGFydFxuICAgKi9cbiAgZnJvbURhdGEoZGF0YSkge1xuICAgIGZvciAobGV0IGtleSBpbiBkYXRhKSB7XG4gICAgICBsZXQgdWNrZXkgPSBrZXkudG9VcHBlckNhc2UoKTtcblxuICAgICAgaWYgKHVja2V5IGluIHBhcnREZXNpZ24pIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YVtrZXldKSkge1xuICAgICAgICAgIHRoaXMucGFydHNbdWNrZXldID0gZGF0YVtrZXldO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucGFydHNbdWNrZXldID0gW2RhdGFba2V5XV07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXNba2V5XSA9IGRhdGFba2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5pbnRlcnZhbCAmJiB0eXBlb2YgdGhpcy5pbnRlcnZhbCAhPSBcIm51bWJlclwiKSB7XG4gICAgICBvcHRpb25EZXNpZ24uSU5URVJWQUwodGhpcy5pbnRlcnZhbCwgdGhpcyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMud2tzdCAmJiB0eXBlb2YgdGhpcy53a3N0ICE9IFwibnVtYmVyXCIpIHtcbiAgICAgIHRoaXMud2tzdCA9IFJlY3VyLmljYWxEYXlUb051bWVyaWNEYXkodGhpcy53a3N0KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy51bnRpbCAmJiAhKHRoaXMudW50aWwgaW5zdGFuY2VvZiBUaW1lKSkge1xuICAgICAgdGhpcy51bnRpbCA9IFRpbWUuZnJvbVN0cmluZyh0aGlzLnVudGlsKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIGpDYWwgcmVwcmVzZW50YXRpb24gb2YgdGhpcyByZWN1cnJlbmNlIHR5cGUuXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICBsZXQgcmVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZXMuZnJlcSA9IHRoaXMuZnJlcTtcblxuICAgIGlmICh0aGlzLmNvdW50KSB7XG4gICAgICByZXMuY291bnQgPSB0aGlzLmNvdW50O1xuICAgIH1cblxuICAgIGlmICh0aGlzLmludGVydmFsID4gMSkge1xuICAgICAgcmVzLmludGVydmFsID0gdGhpcy5pbnRlcnZhbDtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBbaywga3BhcnRzXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnBhcnRzKSkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoa3BhcnRzKSAmJiBrcGFydHMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgcmVzW2sudG9Mb3dlckNhc2UoKV0gPSBrcGFydHNbMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNbay50b0xvd2VyQ2FzZSgpXSA9IGNsb25lKGtwYXJ0cyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudW50aWwpIHtcbiAgICAgIHJlcy51bnRpbCA9IHRoaXMudW50aWwudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgaWYgKCd3a3N0JyBpbiB0aGlzICYmIHRoaXMud2tzdCAhPT0gVGltZS5ERUZBVUxUX1dFRUtfU1RBUlQpIHtcbiAgICAgIHJlcy53a3N0ID0gUmVjdXIubnVtZXJpY0RheVRvSWNhbERheSh0aGlzLndrc3QpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyByZWN1cnJlbmNlIHJ1bGUuXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIHRvU3RyaW5nKCkge1xuICAgIC8vIFRPRE8gcmV0YWluIG9yZGVyXG4gICAgbGV0IHN0ciA9IFwiRlJFUT1cIiArIHRoaXMuZnJlcTtcbiAgICBpZiAodGhpcy5jb3VudCkge1xuICAgICAgc3RyICs9IFwiO0NPVU5UPVwiICsgdGhpcy5jb3VudDtcbiAgICB9XG4gICAgaWYgKHRoaXMuaW50ZXJ2YWwgPiAxKSB7XG4gICAgICBzdHIgKz0gXCI7SU5URVJWQUw9XCIgKyB0aGlzLmludGVydmFsO1xuICAgIH1cbiAgICBmb3IgKGxldCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5wYXJ0cykpIHtcbiAgICAgIHN0ciArPSBcIjtcIiArIGsgKyBcIj1cIiArIHY7XG4gICAgfVxuICAgIGlmICh0aGlzLnVudGlsKSB7XG4gICAgICBzdHIgKz0gJztVTlRJTD0nICsgdGhpcy51bnRpbC50b0lDQUxTdHJpbmcoKTtcbiAgICB9XG4gICAgaWYgKCd3a3N0JyBpbiB0aGlzICYmIHRoaXMud2tzdCAhPT0gVGltZS5ERUZBVUxUX1dFRUtfU1RBUlQpIHtcbiAgICAgIHN0ciArPSAnO1dLU1Q9JyArIFJlY3VyLm51bWVyaWNEYXlUb0ljYWxEYXkodGhpcy53a3N0KTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxufVxuXG5mdW5jdGlvbiBwYXJzZU51bWVyaWNWYWx1ZSh0eXBlLCBtaW4sIG1heCwgdmFsdWUpIHtcbiAgbGV0IHJlc3VsdCA9IHZhbHVlO1xuXG4gIGlmICh2YWx1ZVswXSA9PT0gJysnKSB7XG4gICAgcmVzdWx0ID0gdmFsdWUuc2xpY2UoMSk7XG4gIH1cblxuICByZXN1bHQgPSBzdHJpY3RQYXJzZUludChyZXN1bHQpO1xuXG4gIGlmIChtaW4gIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA8IG1pbikge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIHR5cGUgKyAnOiBpbnZhbGlkIHZhbHVlIFwiJyArIHZhbHVlICsgJ1wiIG11c3QgYmUgPiAnICsgbWluXG4gICAgKTtcbiAgfVxuXG4gIGlmIChtYXggIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA+IG1heCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIHR5cGUgKyAnOiBpbnZhbGlkIHZhbHVlIFwiJyArIHZhbHVlICsgJ1wiIG11c3QgYmUgPCAnICsgbWluXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmNvbnN0IG9wdGlvbkRlc2lnbiA9IHtcbiAgRlJFUTogZnVuY3Rpb24odmFsdWUsIGRpY3QsIGZtdEljYWwpIHtcbiAgICAvLyB5ZXMgdGhpcyBpcyBhY3R1YWxseSBlcXVhbCBvciBmYXN0ZXIgdGhlbiByZWdleC5cbiAgICAvLyB1cHNpZGUgaGVyZSBpcyB3ZSBjYW4gZW51bWVyYXRlIHRoZSB2YWxpZCB2YWx1ZXMuXG4gICAgaWYgKEFMTE9XRURfRlJFUS5pbmRleE9mKHZhbHVlKSAhPT0gLTEpIHtcbiAgICAgIGRpY3QuZnJlcSA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdpbnZhbGlkIGZyZXF1ZW5jeSBcIicgKyB2YWx1ZSArICdcIiBleHBlY3RlZDogXCInICtcbiAgICAgICAgQUxMT1dFRF9GUkVRLmpvaW4oJywgJykgKyAnXCInXG4gICAgICApO1xuICAgIH1cbiAgfSxcblxuICBDT1VOVDogZnVuY3Rpb24odmFsdWUsIGRpY3QsIGZtdEljYWwpIHtcbiAgICBkaWN0LmNvdW50ID0gc3RyaWN0UGFyc2VJbnQodmFsdWUpO1xuICB9LFxuXG4gIElOVEVSVkFMOiBmdW5jdGlvbih2YWx1ZSwgZGljdCwgZm10SWNhbCkge1xuICAgIGRpY3QuaW50ZXJ2YWwgPSBzdHJpY3RQYXJzZUludCh2YWx1ZSk7XG4gICAgaWYgKGRpY3QuaW50ZXJ2YWwgPCAxKSB7XG4gICAgICAvLyAwIG9yIG5lZ2F0aXZlIHZhbHVlcyBhcmUgbm90IGFsbG93ZWQsIHNvbWUgZW5naW5lcyBzZWVtIHRvIGdlbmVyYXRlXG4gICAgICAvLyBpdCB0aG91Z2guIEFzc3VtZSAxIGluc3RlYWQuXG4gICAgICBkaWN0LmludGVydmFsID0gMTtcbiAgICB9XG4gIH0sXG5cbiAgVU5USUw6IGZ1bmN0aW9uKHZhbHVlLCBkaWN0LCBmbXRJY2FsKSB7XG4gICAgaWYgKHZhbHVlLmxlbmd0aCA+IDEwKSB7XG4gICAgICBkaWN0LnVudGlsID0gZGVzaWduLmljYWxlbmRhci52YWx1ZVsnZGF0ZS10aW1lJ10uZnJvbUlDQUwodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaWN0LnVudGlsID0gZGVzaWduLmljYWxlbmRhci52YWx1ZS5kYXRlLmZyb21JQ0FMKHZhbHVlKTtcbiAgICB9XG4gICAgaWYgKCFmbXRJY2FsKSB7XG4gICAgICBkaWN0LnVudGlsID0gVGltZS5mcm9tU3RyaW5nKGRpY3QudW50aWwpO1xuICAgIH1cbiAgfSxcblxuICBXS1NUOiBmdW5jdGlvbih2YWx1ZSwgZGljdCwgZm10SWNhbCkge1xuICAgIGlmIChWQUxJRF9EQVlfTkFNRVMudGVzdCh2YWx1ZSkpIHtcbiAgICAgIGRpY3Qud2tzdCA9IFJlY3VyLmljYWxEYXlUb051bWVyaWNEYXkodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgV0tTVCB2YWx1ZSBcIicgKyB2YWx1ZSArICdcIicpO1xuICAgIH1cbiAgfVxufTtcblxuY29uc3QgcGFydERlc2lnbiA9IHtcbiAgQllTRUNPTkQ6IHBhcnNlTnVtZXJpY1ZhbHVlLmJpbmQodW5kZWZpbmVkLCAnQllTRUNPTkQnLCAwLCA2MCksXG4gIEJZTUlOVVRFOiBwYXJzZU51bWVyaWNWYWx1ZS5iaW5kKHVuZGVmaW5lZCwgJ0JZTUlOVVRFJywgMCwgNTkpLFxuICBCWUhPVVI6IHBhcnNlTnVtZXJpY1ZhbHVlLmJpbmQodW5kZWZpbmVkLCAnQllIT1VSJywgMCwgMjMpLFxuICBCWURBWTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoVkFMSURfQllEQVlfUEFSVC50ZXN0KHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgQllEQVkgdmFsdWUgXCInICsgdmFsdWUgKyAnXCInKTtcbiAgICB9XG4gIH0sXG4gIEJZTU9OVEhEQVk6IHBhcnNlTnVtZXJpY1ZhbHVlLmJpbmQodW5kZWZpbmVkLCAnQllNT05USERBWScsIC0zMSwgMzEpLFxuICBCWVlFQVJEQVk6IHBhcnNlTnVtZXJpY1ZhbHVlLmJpbmQodW5kZWZpbmVkLCAnQllZRUFSREFZJywgLTM2NiwgMzY2KSxcbiAgQllXRUVLTk86IHBhcnNlTnVtZXJpY1ZhbHVlLmJpbmQodW5kZWZpbmVkLCAnQllXRUVLTk8nLCAtNTMsIDUzKSxcbiAgQllNT05USDogcGFyc2VOdW1lcmljVmFsdWUuYmluZCh1bmRlZmluZWQsICdCWU1PTlRIJywgMSwgMTIpLFxuICBCWVNFVFBPUzogcGFyc2VOdW1lcmljVmFsdWUuYmluZCh1bmRlZmluZWQsICdCWVNFVFBPUycsIC0zNjYsIDM2Nilcbn07XG5cbi8qIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKiBQb3J0aW9ucyBDb3B5cmlnaHQgKEMpIFBoaWxpcHAgS2V3aXNjaCAqL1xuXG5cbi8qKlxuICogVGhpcyBsZXRzIHR5cGVzY3JpcHQgcmVzb2x2ZSBvdXIgY3VzdG9tIHR5cGVzIGluIHRoZVxuICogZ2VuZXJhdGVkIGQudHMgZmlsZXMgKGpzZG9jIHR5cGVkZWZzIGFyZSBjb252ZXJ0ZWQgdG8gdHlwZXNjcmlwdCB0eXBlcykuXG4gKiBJZ25vcmUgcHJldmVudHMgdGhlIHR5cGVkZWZzIGZyb20gYmVpbmcgZG9jdW1lbnRlZCBtb3JlIHRoYW4gb25jZS5cbiAqIEBpZ25vcmVcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL3R5cGVzLmpzXCIpLmRlc2lnblNldH0gZGVzaWduU2V0XG4gKiBJbXBvcnRzIHRoZSAnZGVzaWduU2V0JyB0eXBlIGZyb20gdGhlIFwidHlwZXMuanNcIiBtb2R1bGVcbiAqL1xuXG4vKiogQG1vZHVsZSBJQ0FMLmRlc2lnbiAqL1xuXG5jb25zdCBGUk9NX0lDQUxfTkVXTElORSA9IC9cXFxcXFxcXHxcXFxcO3xcXFxcLHxcXFxcW05uXS9nO1xuY29uc3QgVE9fSUNBTF9ORVdMSU5FID0gL1xcXFx8O3wsfFxcbi9nO1xuY29uc3QgRlJPTV9WQ0FSRF9ORVdMSU5FID0gL1xcXFxcXFxcfFxcXFwsfFxcXFxbTm5dL2c7XG5jb25zdCBUT19WQ0FSRF9ORVdMSU5FID0gL1xcXFx8LHxcXG4vZztcblxuZnVuY3Rpb24gY3JlYXRlVGV4dFR5cGUoZnJvbU5ld2xpbmUsIHRvTmV3bGluZSkge1xuICBsZXQgcmVzdWx0ID0ge1xuICAgIG1hdGNoZXM6IC8uKi8sXG5cbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlLCBzdHJ1Y3R1cmVkRXNjYXBlKSB7XG4gICAgICByZXR1cm4gcmVwbGFjZU5ld2xpbmUoYVZhbHVlLCBmcm9tTmV3bGluZSwgc3RydWN0dXJlZEVzY2FwZSk7XG4gICAgfSxcblxuICAgIHRvSUNBTDogZnVuY3Rpb24oYVZhbHVlLCBzdHJ1Y3R1cmVkRXNjYXBlKSB7XG4gICAgICBsZXQgcmVnRXggPSB0b05ld2xpbmU7XG4gICAgICBpZiAoc3RydWN0dXJlZEVzY2FwZSlcbiAgICAgICAgIHJlZ0V4ID0gbmV3IFJlZ0V4cChyZWdFeC5zb3VyY2UgKyAnfCcgKyBzdHJ1Y3R1cmVkRXNjYXBlLCByZWdFeC5mbGFncyk7XG4gICAgICByZXR1cm4gYVZhbHVlLnJlcGxhY2UocmVnRXgsIGZ1bmN0aW9uKHN0cikge1xuICAgICAgICBzd2l0Y2ggKHN0cikge1xuICAgICAgICBjYXNlIFwiXFxcXFwiOlxuICAgICAgICAgIHJldHVybiBcIlxcXFxcXFxcXCI7XG4gICAgICAgIGNhc2UgXCI7XCI6XG4gICAgICAgICAgcmV0dXJuIFwiXFxcXDtcIjtcbiAgICAgICAgY2FzZSBcIixcIjpcbiAgICAgICAgICByZXR1cm4gXCJcXFxcLFwiO1xuICAgICAgICBjYXNlIFwiXFxuXCI6XG4gICAgICAgICAgcmV0dXJuIFwiXFxcXG5cIjtcbiAgICAgICAgLyogYzggaWdub3JlIG5leHQgMiAqL1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiBzdHI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLy8gZGVmYXVsdCB0eXBlcyB1c2VkIG11bHRpcGxlIHRpbWVzXG5jb25zdCBERUZBVUxUX1RZUEVfVEVYVCA9IHsgZGVmYXVsdFR5cGU6IFwidGV4dFwiIH07XG5jb25zdCBERUZBVUxUX1RZUEVfVEVYVF9NVUxUSSA9IHsgZGVmYXVsdFR5cGU6IFwidGV4dFwiLCBtdWx0aVZhbHVlOiBcIixcIiB9O1xuY29uc3QgREVGQVVMVF9UWVBFX1RFWFRfU1RSVUNUVVJFRCA9IHsgZGVmYXVsdFR5cGU6IFwidGV4dFwiLCBzdHJ1Y3R1cmVkVmFsdWU6IFwiO1wiIH07XG5jb25zdCBERUZBVUxUX1RZUEVfSU5URUdFUiA9IHsgZGVmYXVsdFR5cGU6IFwiaW50ZWdlclwiIH07XG5jb25zdCBERUZBVUxUX1RZUEVfREFURVRJTUVfREFURSA9IHsgZGVmYXVsdFR5cGU6IFwiZGF0ZS10aW1lXCIsIGFsbG93ZWRUeXBlczogW1wiZGF0ZS10aW1lXCIsIFwiZGF0ZVwiXSB9O1xuY29uc3QgREVGQVVMVF9UWVBFX0RBVEVUSU1FID0geyBkZWZhdWx0VHlwZTogXCJkYXRlLXRpbWVcIiB9O1xuY29uc3QgREVGQVVMVF9UWVBFX1VSSSA9IHsgZGVmYXVsdFR5cGU6IFwidXJpXCIgfTtcbmNvbnN0IERFRkFVTFRfVFlQRV9VVENPRkZTRVQgPSB7IGRlZmF1bHRUeXBlOiBcInV0Yy1vZmZzZXRcIiB9O1xuY29uc3QgREVGQVVMVF9UWVBFX1JFQ1VSID0geyBkZWZhdWx0VHlwZTogXCJyZWN1clwiIH07XG5jb25zdCBERUZBVUxUX1RZUEVfREFURV9BTkRPUl9USU1FID0geyBkZWZhdWx0VHlwZTogXCJkYXRlLWFuZC1vci10aW1lXCIsIGFsbG93ZWRUeXBlczogW1wiZGF0ZS10aW1lXCIsIFwiZGF0ZVwiLCBcInRleHRcIl0gfTtcblxuZnVuY3Rpb24gcmVwbGFjZU5ld2xpbmVSZXBsYWNlKHN0cmluZykge1xuICBzd2l0Y2ggKHN0cmluZykge1xuICAgIGNhc2UgXCJcXFxcXFxcXFwiOlxuICAgICAgcmV0dXJuIFwiXFxcXFwiO1xuICAgIGNhc2UgXCJcXFxcO1wiOlxuICAgICAgcmV0dXJuIFwiO1wiO1xuICAgIGNhc2UgXCJcXFxcLFwiOlxuICAgICAgcmV0dXJuIFwiLFwiO1xuICAgIGNhc2UgXCJcXFxcblwiOlxuICAgIGNhc2UgXCJcXFxcTlwiOlxuICAgICAgcmV0dXJuIFwiXFxuXCI7XG4gICAgLyogYzggaWdub3JlIG5leHQgMiAqL1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RyaW5nO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlcGxhY2VOZXdsaW5lKHZhbHVlLCBuZXdsaW5lLCBzdHJ1Y3R1cmVkRXNjYXBlKSB7XG4gIC8vIGF2b2lkIHJlZ2V4IHdoZW4gcG9zc2libGUuXG4gIGlmICh2YWx1ZS5pbmRleE9mKCdcXFxcJykgPT09IC0xKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChzdHJ1Y3R1cmVkRXNjYXBlKVxuICAgICBuZXdsaW5lID0gbmV3IFJlZ0V4cChuZXdsaW5lLnNvdXJjZSArICd8XFxcXFxcXFwnICsgc3RydWN0dXJlZEVzY2FwZSwgbmV3bGluZS5mbGFncyk7XG4gIHJldHVybiB2YWx1ZS5yZXBsYWNlKG5ld2xpbmUsIHJlcGxhY2VOZXdsaW5lUmVwbGFjZSk7XG59XG5cbmxldCBjb21tb25Qcm9wZXJ0aWVzID0ge1xuICBcImNhdGVnb3JpZXNcIjogREVGQVVMVF9UWVBFX1RFWFRfTVVMVEksXG4gIFwidXJsXCI6IERFRkFVTFRfVFlQRV9VUkksXG4gIFwidmVyc2lvblwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJ1aWRcIjogREVGQVVMVF9UWVBFX1RFWFRcbn07XG5cbmxldCBjb21tb25WYWx1ZXMgPSB7XG4gIFwiYm9vbGVhblwiOiB7XG4gICAgdmFsdWVzOiBbXCJUUlVFXCIsIFwiRkFMU0VcIl0sXG5cbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBzd2l0Y2ggKGFWYWx1ZSkge1xuICAgICAgICBjYXNlICdUUlVFJzpcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgY2FzZSAnRkFMU0UnOlxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAvL1RPRE86IHBhcnNlciB3YXJuaW5nXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgaWYgKGFWYWx1ZSkge1xuICAgICAgICByZXR1cm4gJ1RSVUUnO1xuICAgICAgfVxuICAgICAgcmV0dXJuICdGQUxTRSc7XG4gICAgfVxuXG4gIH0sXG4gIGZsb2F0OiB7XG4gICAgbWF0Y2hlczogL15bKy1dP1xcZCtcXC5cXGQrJC8sXG5cbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBsZXQgcGFyc2VkID0gcGFyc2VGbG9hdChhVmFsdWUpO1xuICAgICAgaWYgKGlzU3RyaWN0bHlOYU4ocGFyc2VkKSkge1xuICAgICAgICAvLyBUT0RPOiBwYXJzZXIgd2FybmluZ1xuICAgICAgICByZXR1cm4gMC4wO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhcnNlZDtcbiAgICB9LFxuXG4gICAgdG9JQ0FMOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBTdHJpbmcoYVZhbHVlKTtcbiAgICB9XG4gIH0sXG4gIGludGVnZXI6IHtcbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBsZXQgcGFyc2VkID0gcGFyc2VJbnQoYVZhbHVlKTtcbiAgICAgIGlmIChpc1N0cmljdGx5TmFOKHBhcnNlZCkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGFyc2VkO1xuICAgIH0sXG5cbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIFN0cmluZyhhVmFsdWUpO1xuICAgIH1cbiAgfSxcbiAgXCJ1dGMtb2Zmc2V0XCI6IHtcbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgaWYgKGFWYWx1ZS5sZW5ndGggPCA3KSB7XG4gICAgICAgIC8vIG5vIHNlY29uZHNcbiAgICAgICAgLy8gLTA1MDBcbiAgICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCAzKSArXG4gICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNCwgNik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzZWNvbmRzXG4gICAgICAgIC8vIC0wNTAwMDBcbiAgICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCAzKSArXG4gICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNCwgNikgK1xuICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDcsIDkpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBpZiAoYVZhbHVlLmxlbmd0aCA8IDYpIHtcbiAgICAgICAgLy8gbm8gc2Vjb25kc1xuICAgICAgICAvLyAtMDU6MDBcbiAgICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCAzKSArICc6JyArXG4gICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoMywgNSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzZWNvbmRzXG4gICAgICAgIC8vIC0wNTowMDowMFxuICAgICAgICByZXR1cm4gYVZhbHVlLnNsaWNlKDAsIDMpICsgJzonICtcbiAgICAgICAgICAgICAgIGFWYWx1ZS5zbGljZSgzLCA1KSArICc6JyArXG4gICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNSwgNyk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGRlY29yYXRlOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBVdGNPZmZzZXQuZnJvbVN0cmluZyhhVmFsdWUpO1xuICAgIH0sXG5cbiAgICB1bmRlY29yYXRlOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBhVmFsdWUudG9TdHJpbmcoKTtcbiAgICB9XG4gIH1cbn07XG5cbmxldCBpY2FsUGFyYW1zID0ge1xuICAvLyBBbHRob3VnaCB0aGUgc3ludGF4IGlzIERRVU9URSB1cmkgRFFVT1RFLCBJIGRvbid0IHRoaW5rIHdlIHNob3VsZFxuICAvLyBlbmZvcmNlIGFueXRoaW5nIGFzaWRlIGZyb20gaXQgYmVpbmcgYSB2YWxpZCBjb250ZW50IGxpbmUuXG4gIC8vXG4gIC8vIEF0IGxlYXN0IHNvbWUgcGFyYW1zIHJlcXVpcmUgLSBpZiBtdWx0aSB2YWx1ZXMgYXJlIHVzZWQgLSBEUVVPVEVzXG4gIC8vIGZvciBlYWNoIG9mIGl0cyB2YWx1ZXMgLSBlLmcuIGRlbGVnYXRlZC1mcm9tPVwidXJpMVwiLFwidXJpMlwiXG4gIC8vIFRvIGluZGljYXRlIHRoaXMsIEkgaW50cm9kdWNlZCB0aGUgbmV3IGsvdiBwYWlyXG4gIC8vIG11bHRpVmFsdWVTZXBhcmF0ZURRdW90ZTogdHJ1ZVxuICAvL1xuICAvLyBcIkFMVFJFUFwiOiB7IC4uLiB9LFxuXG4gIC8vIENOIGp1c3Qgd2FudHMgYSBwYXJhbS12YWx1ZVxuICAvLyBcIkNOXCI6IHsgLi4uIH1cblxuICBcImN1dHlwZVwiOiB7XG4gICAgdmFsdWVzOiBbXCJJTkRJVklEVUFMXCIsIFwiR1JPVVBcIiwgXCJSRVNPVVJDRVwiLCBcIlJPT01cIiwgXCJVTktOT1dOXCJdLFxuICAgIGFsbG93WE5hbWU6IHRydWUsXG4gICAgYWxsb3dJYW5hVG9rZW46IHRydWVcbiAgfSxcblxuICBcImRlbGVnYXRlZC1mcm9tXCI6IHtcbiAgICB2YWx1ZVR5cGU6IFwiY2FsLWFkZHJlc3NcIixcbiAgICBtdWx0aVZhbHVlOiBcIixcIixcbiAgICBtdWx0aVZhbHVlU2VwYXJhdGVEUXVvdGU6IHRydWVcbiAgfSxcbiAgXCJkZWxlZ2F0ZWQtdG9cIjoge1xuICAgIHZhbHVlVHlwZTogXCJjYWwtYWRkcmVzc1wiLFxuICAgIG11bHRpVmFsdWU6IFwiLFwiLFxuICAgIG11bHRpVmFsdWVTZXBhcmF0ZURRdW90ZTogdHJ1ZVxuICB9LFxuICAvLyBcIkRJUlwiOiB7IC4uLiB9LCAvLyBTZWUgQUxUUkVQXG4gIFwiZW5jb2RpbmdcIjoge1xuICAgIHZhbHVlczogW1wiOEJJVFwiLCBcIkJBU0U2NFwiXVxuICB9LFxuICAvLyBcIkZNVFRZUEVcIjogeyAuLi4gfSwgLy8gU2VlIEFMVFJFUFxuICBcImZidHlwZVwiOiB7XG4gICAgdmFsdWVzOiBbXCJGUkVFXCIsIFwiQlVTWVwiLCBcIkJVU1ktVU5BVkFJTEFCTEVcIiwgXCJCVVNZLVRFTlRBVElWRVwiXSxcbiAgICBhbGxvd1hOYW1lOiB0cnVlLFxuICAgIGFsbG93SWFuYVRva2VuOiB0cnVlXG4gIH0sXG4gIC8vIFwiTEFOR1VBR0VcIjogeyAuLi4gfSwgLy8gU2VlIEFMVFJFUFxuICBcIm1lbWJlclwiOiB7XG4gICAgdmFsdWVUeXBlOiBcImNhbC1hZGRyZXNzXCIsXG4gICAgbXVsdGlWYWx1ZTogXCIsXCIsXG4gICAgbXVsdGlWYWx1ZVNlcGFyYXRlRFF1b3RlOiB0cnVlXG4gIH0sXG4gIFwicGFydHN0YXRcIjoge1xuICAgIC8vIFRPRE8gVGhlc2UgdmFsdWVzIGFyZSBhY3R1YWxseSBkaWZmZXJlbnQgcGVyLWNvbXBvbmVudFxuICAgIHZhbHVlczogW1wiTkVFRFMtQUNUSU9OXCIsIFwiQUNDRVBURURcIiwgXCJERUNMSU5FRFwiLCBcIlRFTlRBVElWRVwiLFxuICAgICAgICAgICAgIFwiREVMRUdBVEVEXCIsIFwiQ09NUExFVEVEXCIsIFwiSU4tUFJPQ0VTU1wiXSxcbiAgICBhbGxvd1hOYW1lOiB0cnVlLFxuICAgIGFsbG93SWFuYVRva2VuOiB0cnVlXG4gIH0sXG4gIFwicmFuZ2VcIjoge1xuICAgIHZhbHVlczogW1wiVEhJU0FOREZVVFVSRVwiXVxuICB9LFxuICBcInJlbGF0ZWRcIjoge1xuICAgIHZhbHVlczogW1wiU1RBUlRcIiwgXCJFTkRcIl1cbiAgfSxcbiAgXCJyZWx0eXBlXCI6IHtcbiAgICB2YWx1ZXM6IFtcIlBBUkVOVFwiLCBcIkNISUxEXCIsIFwiU0lCTElOR1wiXSxcbiAgICBhbGxvd1hOYW1lOiB0cnVlLFxuICAgIGFsbG93SWFuYVRva2VuOiB0cnVlXG4gIH0sXG4gIFwicm9sZVwiOiB7XG4gICAgdmFsdWVzOiBbXCJSRVEtUEFSVElDSVBBTlRcIiwgXCJDSEFJUlwiLFxuICAgICAgICAgICAgIFwiT1BULVBBUlRJQ0lQQU5UXCIsIFwiTk9OLVBBUlRJQ0lQQU5UXCJdLFxuICAgIGFsbG93WE5hbWU6IHRydWUsXG4gICAgYWxsb3dJYW5hVG9rZW46IHRydWVcbiAgfSxcbiAgXCJyc3ZwXCI6IHtcbiAgICB2YWx1ZXM6IFtcIlRSVUVcIiwgXCJGQUxTRVwiXVxuICB9LFxuICBcInNlbnQtYnlcIjoge1xuICAgIHZhbHVlVHlwZTogXCJjYWwtYWRkcmVzc1wiXG4gIH0sXG4gIFwidHppZFwiOiB7XG4gICAgbWF0Y2hlczogL15cXC8vXG4gIH0sXG4gIFwidmFsdWVcIjoge1xuICAgIC8vIHNpbmNlIHRoZSB2YWx1ZSBoZXJlIGlzIGEgJ3R5cGUnIGxvd2VyY2FzZSBpcyB1c2VkLlxuICAgIHZhbHVlczogW1wiYmluYXJ5XCIsIFwiYm9vbGVhblwiLCBcImNhbC1hZGRyZXNzXCIsIFwiZGF0ZVwiLCBcImRhdGUtdGltZVwiLFxuICAgICAgICAgICAgIFwiZHVyYXRpb25cIiwgXCJmbG9hdFwiLCBcImludGVnZXJcIiwgXCJwZXJpb2RcIiwgXCJyZWN1clwiLCBcInRleHRcIixcbiAgICAgICAgICAgICBcInRpbWVcIiwgXCJ1cmlcIiwgXCJ1dGMtb2Zmc2V0XCJdLFxuICAgIGFsbG93WE5hbWU6IHRydWUsXG4gICAgYWxsb3dJYW5hVG9rZW46IHRydWVcbiAgfVxufTtcblxuLy8gV2hlbiBhZGRpbmcgYSB2YWx1ZSBoZXJlLCBiZSBzdXJlIHRvIGFkZCBpdCB0byB0aGUgcGFyYW1ldGVyIHR5cGVzIVxuY29uc3QgaWNhbFZhbHVlcyA9IGV4dGVuZChjb21tb25WYWx1ZXMsIHtcbiAgdGV4dDogY3JlYXRlVGV4dFR5cGUoRlJPTV9JQ0FMX05FV0xJTkUsIFRPX0lDQUxfTkVXTElORSksXG5cbiAgdXJpOiB7XG4gICAgLy8gVE9ET1xuICAgIC8qIC4uLiAqL1xuICB9LFxuXG4gIFwiYmluYXJ5XCI6IHtcbiAgICBkZWNvcmF0ZTogZnVuY3Rpb24oYVN0cmluZykge1xuICAgICAgcmV0dXJuIEJpbmFyeS5mcm9tU3RyaW5nKGFTdHJpbmcpO1xuICAgIH0sXG5cbiAgICB1bmRlY29yYXRlOiBmdW5jdGlvbihhQmluYXJ5KSB7XG4gICAgICByZXR1cm4gYUJpbmFyeS50b1N0cmluZygpO1xuICAgIH1cbiAgfSxcbiAgXCJjYWwtYWRkcmVzc1wiOiB7XG4gICAgLy8gbmVlZHMgdG8gYmUgYW4gdXJpXG4gIH0sXG4gIFwiZGF0ZVwiOiB7XG4gICAgZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSwgYVByb3ApIHtcbiAgICAgIGlmIChkZXNpZ24uc3RyaWN0KSB7XG4gICAgICAgIHJldHVybiBUaW1lLmZyb21EYXRlU3RyaW5nKGFWYWx1ZSwgYVByb3ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFRpbWUuZnJvbVN0cmluZyhhVmFsdWUsIGFQcm9wKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogdW5kZWNvcmF0ZXMgYSB0aW1lIG9iamVjdC5cbiAgICAgKi9cbiAgICB1bmRlY29yYXRlOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBhVmFsdWUudG9TdHJpbmcoKTtcbiAgICB9LFxuXG4gICAgZnJvbUlDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgLy8gZnJvbTogMjAxMjA5MDFcbiAgICAgIC8vIHRvOiAyMDEyLTA5LTAxXG4gICAgICBpZiAoIWRlc2lnbi5zdHJpY3QgJiYgYVZhbHVlLmxlbmd0aCA+PSAxNSkge1xuICAgICAgICAvLyBUaGlzIGlzIHByb2JhYmx5IGEgZGF0ZS10aW1lLCBlLmcuIDIwMTIwOTAxVDEzMDAwMFpcbiAgICAgICAgcmV0dXJuIGljYWxWYWx1ZXNbXCJkYXRlLXRpbWVcIl0uZnJvbUlDQUwoYVZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhVmFsdWUuc2xpY2UoMCwgNCkgKyAnLScgK1xuICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDQsIDYpICsgJy0nICtcbiAgICAgICAgICAgICAgIGFWYWx1ZS5zbGljZSg2LCA4KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdG9JQ0FMOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIC8vIGZyb206IDIwMTItMDktMDFcbiAgICAgIC8vIHRvOiAyMDEyMDkwMVxuICAgICAgbGV0IGxlbiA9IGFWYWx1ZS5sZW5ndGg7XG5cbiAgICAgIGlmIChsZW4gPT0gMTApIHtcbiAgICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCA0KSArXG4gICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNSwgNykgK1xuICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDgsIDEwKTtcbiAgICAgIH0gZWxzZSBpZiAobGVuID49IDE5KSB7XG4gICAgICAgIHJldHVybiBpY2FsVmFsdWVzW1wiZGF0ZS10aW1lXCJdLnRvSUNBTChhVmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy9UT0RPOiBzZXJpYWxpemUgd2FybmluZz9cbiAgICAgICAgcmV0dXJuIGFWYWx1ZTtcbiAgICAgIH1cblxuICAgIH1cbiAgfSxcbiAgXCJkYXRlLXRpbWVcIjoge1xuICAgIGZyb21JQ0FMOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIC8vIGZyb206IDIwMTIwOTAxVDEzMDAwMFxuICAgICAgLy8gdG86IDIwMTItMDktMDFUMTM6MDA6MDBcbiAgICAgIGlmICghZGVzaWduLnN0cmljdCAmJiBhVmFsdWUubGVuZ3RoID09IDgpIHtcbiAgICAgICAgLy8gVGhpcyBpcyBwcm9iYWJseSBhIGRhdGUsIGUuZy4gMjAxMjA5MDFcbiAgICAgICAgcmV0dXJuIGljYWxWYWx1ZXMuZGF0ZS5mcm9tSUNBTChhVmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGFWYWx1ZS5zbGljZSgwLCA0KSArICctJyArXG4gICAgICAgICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNCwgNikgKyAnLScgK1xuICAgICAgICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDYsIDgpICsgJ1QnICtcbiAgICAgICAgICAgICAgICAgICAgIGFWYWx1ZS5zbGljZSg5LCAxMSkgKyAnOicgK1xuICAgICAgICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDExLCAxMykgKyAnOicgK1xuICAgICAgICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDEzLCAxNSk7XG5cbiAgICAgICAgaWYgKGFWYWx1ZVsxNV0gJiYgYVZhbHVlWzE1XSA9PT0gJ1onKSB7XG4gICAgICAgICAgcmVzdWx0ICs9ICdaJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHRvSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICAvLyBmcm9tOiAyMDEyLTA5LTAxVDEzOjAwOjAwXG4gICAgICAvLyB0bzogMjAxMjA5MDFUMTMwMDAwXG4gICAgICBsZXQgbGVuID0gYVZhbHVlLmxlbmd0aDtcblxuICAgICAgaWYgKGxlbiA9PSAxMCAmJiAhZGVzaWduLnN0cmljdCkge1xuICAgICAgICByZXR1cm4gaWNhbFZhbHVlcy5kYXRlLnRvSUNBTChhVmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChsZW4gPj0gMTkpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGFWYWx1ZS5zbGljZSgwLCA0KSArXG4gICAgICAgICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNSwgNykgK1xuICAgICAgICAgICAgICAgICAgICAgLy8gZ3JhYiB0aGUgKEREVEhIKSBzZWdtZW50XG4gICAgICAgICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoOCwgMTMpICtcbiAgICAgICAgICAgICAgICAgICAgIC8vIE1NXG4gICAgICAgICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoMTQsIDE2KSArXG4gICAgICAgICAgICAgICAgICAgICAvLyBTU1xuICAgICAgICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDE3LCAxOSk7XG5cbiAgICAgICAgaWYgKGFWYWx1ZVsxOV0gJiYgYVZhbHVlWzE5XSA9PT0gJ1onKSB7XG4gICAgICAgICAgcmVzdWx0ICs9ICdaJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVE9ETzogZXJyb3JcbiAgICAgICAgcmV0dXJuIGFWYWx1ZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSwgYVByb3ApIHtcbiAgICAgIGlmIChkZXNpZ24uc3RyaWN0KSB7XG4gICAgICAgIHJldHVybiBUaW1lLmZyb21EYXRlVGltZVN0cmluZyhhVmFsdWUsIGFQcm9wKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBUaW1lLmZyb21TdHJpbmcoYVZhbHVlLCBhUHJvcCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHVuZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIGFWYWx1ZS50b1N0cmluZygpO1xuICAgIH1cbiAgfSxcbiAgZHVyYXRpb246IHtcbiAgICBkZWNvcmF0ZTogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24uZnJvbVN0cmluZyhhVmFsdWUpO1xuICAgIH0sXG4gICAgdW5kZWNvcmF0ZTogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICByZXR1cm4gYVZhbHVlLnRvU3RyaW5nKCk7XG4gICAgfVxuICB9LFxuICBwZXJpb2Q6IHtcbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICBsZXQgcGFydHMgPSBzdHJpbmcuc3BsaXQoJy8nKTtcbiAgICAgIHBhcnRzWzBdID0gaWNhbFZhbHVlc1snZGF0ZS10aW1lJ10uZnJvbUlDQUwocGFydHNbMF0pO1xuXG4gICAgICBpZiAoIUR1cmF0aW9uLmlzVmFsdWVTdHJpbmcocGFydHNbMV0pKSB7XG4gICAgICAgIHBhcnRzWzFdID0gaWNhbFZhbHVlc1snZGF0ZS10aW1lJ10uZnJvbUlDQUwocGFydHNbMV0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGFydHM7XG4gICAgfSxcblxuICAgIHRvSUNBTDogZnVuY3Rpb24ocGFydHMpIHtcbiAgICAgIHBhcnRzID0gcGFydHMuc2xpY2UoKTtcbiAgICAgIGlmICghZGVzaWduLnN0cmljdCAmJiBwYXJ0c1swXS5sZW5ndGggPT0gMTApIHtcbiAgICAgICAgcGFydHNbMF0gPSBpY2FsVmFsdWVzLmRhdGUudG9JQ0FMKHBhcnRzWzBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnRzWzBdID0gaWNhbFZhbHVlc1snZGF0ZS10aW1lJ10udG9JQ0FMKHBhcnRzWzBdKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFEdXJhdGlvbi5pc1ZhbHVlU3RyaW5nKHBhcnRzWzFdKSkge1xuICAgICAgICBpZiAoIWRlc2lnbi5zdHJpY3QgJiYgcGFydHNbMV0ubGVuZ3RoID09IDEwKSB7XG4gICAgICAgICAgcGFydHNbMV0gPSBpY2FsVmFsdWVzLmRhdGUudG9JQ0FMKHBhcnRzWzFdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJ0c1sxXSA9IGljYWxWYWx1ZXNbJ2RhdGUtdGltZSddLnRvSUNBTChwYXJ0c1sxXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBhcnRzLmpvaW4oXCIvXCIpO1xuICAgIH0sXG5cbiAgICBkZWNvcmF0ZTogZnVuY3Rpb24oYVZhbHVlLCBhUHJvcCkge1xuICAgICAgcmV0dXJuIFBlcmlvZC5mcm9tSlNPTihhVmFsdWUsIGFQcm9wLCAhZGVzaWduLnN0cmljdCk7XG4gICAgfSxcblxuICAgIHVuZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIGFWYWx1ZS50b0pTT04oKTtcbiAgICB9XG4gIH0sXG4gIHJlY3VyOiB7XG4gICAgZnJvbUlDQUw6IGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgcmV0dXJuIFJlY3VyLl9zdHJpbmdUb0RhdGEoc3RyaW5nLCB0cnVlKTtcbiAgICB9LFxuXG4gICAgdG9JQ0FMOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBsZXQgc3RyID0gXCJcIjtcbiAgICAgIGZvciAobGV0IFtrLCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEpKSB7XG4gICAgICAgIGlmIChrID09IFwidW50aWxcIikge1xuICAgICAgICAgIGlmICh2YWwubGVuZ3RoID4gMTApIHtcbiAgICAgICAgICAgIHZhbCA9IGljYWxWYWx1ZXNbJ2RhdGUtdGltZSddLnRvSUNBTCh2YWwpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YWwgPSBpY2FsVmFsdWVzLmRhdGUudG9JQ0FMKHZhbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGsgPT0gXCJ3a3N0XCIpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHZhbCA9IFJlY3VyLm51bWVyaWNEYXlUb0ljYWxEYXkodmFsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICAgICAgdmFsID0gdmFsLmpvaW4oXCIsXCIpO1xuICAgICAgICB9XG4gICAgICAgIHN0ciArPSBrLnRvVXBwZXJDYXNlKCkgKyBcIj1cIiArIHZhbCArIFwiO1wiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0ci5zbGljZSgwLCBNYXRoLm1heCgwLCBzdHIubGVuZ3RoIC0gMSkpO1xuICAgIH0sXG5cbiAgICBkZWNvcmF0ZTogZnVuY3Rpb24gZGVjb3JhdGUoYVZhbHVlKSB7XG4gICAgICByZXR1cm4gUmVjdXIuZnJvbURhdGEoYVZhbHVlKTtcbiAgICB9LFxuXG4gICAgdW5kZWNvcmF0ZTogZnVuY3Rpb24oYVJlY3VyKSB7XG4gICAgICByZXR1cm4gYVJlY3VyLnRvSlNPTigpO1xuICAgIH1cbiAgfSxcblxuICB0aW1lOiB7XG4gICAgZnJvbUlDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgLy8gZnJvbTogTU1ISFNTKFopP1xuICAgICAgLy8gdG86IEhIOk1NOlNTKFopP1xuICAgICAgaWYgKGFWYWx1ZS5sZW5ndGggPCA2KSB7XG4gICAgICAgIC8vIFRPRE86IHBhcnNlciBleGNlcHRpb24/XG4gICAgICAgIHJldHVybiBhVmFsdWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEhIOjpNTTo6U1NaP1xuICAgICAgbGV0IHJlc3VsdCA9IGFWYWx1ZS5zbGljZSgwLCAyKSArICc6JyArXG4gICAgICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDIsIDQpICsgJzonICtcbiAgICAgICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNCwgNik7XG5cbiAgICAgIGlmIChhVmFsdWVbNl0gPT09ICdaJykge1xuICAgICAgICByZXN1bHQgKz0gJ1onO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgLy8gZnJvbTogSEg6TU06U1MoWik/XG4gICAgICAvLyB0bzogTU1ISFNTKFopP1xuICAgICAgaWYgKGFWYWx1ZS5sZW5ndGggPCA4KSB7XG4gICAgICAgIC8vVE9ETzogZXJyb3JcbiAgICAgICAgcmV0dXJuIGFWYWx1ZTtcbiAgICAgIH1cblxuICAgICAgbGV0IHJlc3VsdCA9IGFWYWx1ZS5zbGljZSgwLCAyKSArXG4gICAgICAgICAgICAgICAgICAgYVZhbHVlLnNsaWNlKDMsIDUpICtcbiAgICAgICAgICAgICAgICAgICBhVmFsdWUuc2xpY2UoNiwgOCk7XG5cbiAgICAgIGlmIChhVmFsdWVbOF0gPT09ICdaJykge1xuICAgICAgICByZXN1bHQgKz0gJ1onO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgfVxufSk7XG5cbmxldCBpY2FsUHJvcGVydGllcyA9IGV4dGVuZChjb21tb25Qcm9wZXJ0aWVzLCB7XG5cbiAgXCJhY3Rpb25cIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwiYXR0YWNoXCI6IHsgZGVmYXVsdFR5cGU6IFwidXJpXCIgfSxcbiAgXCJhdHRlbmRlZVwiOiB7IGRlZmF1bHRUeXBlOiBcImNhbC1hZGRyZXNzXCIgfSxcbiAgXCJjYWxzY2FsZVwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJjbGFzc1wiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJjb21tZW50XCI6IERFRkFVTFRfVFlQRV9URVhULFxuICBcImNvbXBsZXRlZFwiOiBERUZBVUxUX1RZUEVfREFURVRJTUUsXG4gIFwiY29udGFjdFwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJjcmVhdGVkXCI6IERFRkFVTFRfVFlQRV9EQVRFVElNRSxcbiAgXCJkZXNjcmlwdGlvblwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJkdGVuZFwiOiBERUZBVUxUX1RZUEVfREFURVRJTUVfREFURSxcbiAgXCJkdHN0YW1wXCI6IERFRkFVTFRfVFlQRV9EQVRFVElNRSxcbiAgXCJkdHN0YXJ0XCI6IERFRkFVTFRfVFlQRV9EQVRFVElNRV9EQVRFLFxuICBcImR1ZVwiOiBERUZBVUxUX1RZUEVfREFURVRJTUVfREFURSxcbiAgXCJkdXJhdGlvblwiOiB7IGRlZmF1bHRUeXBlOiBcImR1cmF0aW9uXCIgfSxcbiAgXCJleGRhdGVcIjoge1xuICAgIGRlZmF1bHRUeXBlOiBcImRhdGUtdGltZVwiLFxuICAgIGFsbG93ZWRUeXBlczogW1wiZGF0ZS10aW1lXCIsIFwiZGF0ZVwiXSxcbiAgICBtdWx0aVZhbHVlOiAnLCdcbiAgfSxcbiAgXCJleHJ1bGVcIjogREVGQVVMVF9UWVBFX1JFQ1VSLFxuICBcImZyZWVidXN5XCI6IHsgZGVmYXVsdFR5cGU6IFwicGVyaW9kXCIsIG11bHRpVmFsdWU6IFwiLFwiIH0sXG4gIFwiZ2VvXCI6IHsgZGVmYXVsdFR5cGU6IFwiZmxvYXRcIiwgc3RydWN0dXJlZFZhbHVlOiBcIjtcIiB9LFxuICBcImxhc3QtbW9kaWZpZWRcIjogREVGQVVMVF9UWVBFX0RBVEVUSU1FLFxuICBcImxvY2F0aW9uXCI6IERFRkFVTFRfVFlQRV9URVhULFxuICBcIm1ldGhvZFwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJvcmdhbml6ZXJcIjogeyBkZWZhdWx0VHlwZTogXCJjYWwtYWRkcmVzc1wiIH0sXG4gIFwicGVyY2VudC1jb21wbGV0ZVwiOiBERUZBVUxUX1RZUEVfSU5URUdFUixcbiAgXCJwcmlvcml0eVwiOiBERUZBVUxUX1RZUEVfSU5URUdFUixcbiAgXCJwcm9kaWRcIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwicmVsYXRlZC10b1wiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJyZXBlYXRcIjogREVGQVVMVF9UWVBFX0lOVEVHRVIsXG4gIFwicmRhdGVcIjoge1xuICAgIGRlZmF1bHRUeXBlOiBcImRhdGUtdGltZVwiLFxuICAgIGFsbG93ZWRUeXBlczogW1wiZGF0ZS10aW1lXCIsIFwiZGF0ZVwiLCBcInBlcmlvZFwiXSxcbiAgICBtdWx0aVZhbHVlOiAnLCcsXG4gICAgZGV0ZWN0VHlwZTogZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICBpZiAoc3RyaW5nLmluZGV4T2YoJy8nKSAhPT0gLTEpIHtcbiAgICAgICAgcmV0dXJuICdwZXJpb2QnO1xuICAgICAgfVxuICAgICAgcmV0dXJuIChzdHJpbmcuaW5kZXhPZignVCcpID09PSAtMSkgPyAnZGF0ZScgOiAnZGF0ZS10aW1lJztcbiAgICB9XG4gIH0sXG4gIFwicmVjdXJyZW5jZS1pZFwiOiBERUZBVUxUX1RZUEVfREFURVRJTUVfREFURSxcbiAgXCJyZXNvdXJjZXNcIjogREVGQVVMVF9UWVBFX1RFWFRfTVVMVEksXG4gIFwicmVxdWVzdC1zdGF0dXNcIjogREVGQVVMVF9UWVBFX1RFWFRfU1RSVUNUVVJFRCxcbiAgXCJycnVsZVwiOiBERUZBVUxUX1RZUEVfUkVDVVIsXG4gIFwic2VxdWVuY2VcIjogREVGQVVMVF9UWVBFX0lOVEVHRVIsXG4gIFwic3RhdHVzXCI6IERFRkFVTFRfVFlQRV9URVhULFxuICBcInN1bW1hcnlcIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwidHJhbnNwXCI6IERFRkFVTFRfVFlQRV9URVhULFxuICBcInRyaWdnZXJcIjogeyBkZWZhdWx0VHlwZTogXCJkdXJhdGlvblwiLCBhbGxvd2VkVHlwZXM6IFtcImR1cmF0aW9uXCIsIFwiZGF0ZS10aW1lXCJdIH0sXG4gIFwidHpvZmZzZXRmcm9tXCI6IERFRkFVTFRfVFlQRV9VVENPRkZTRVQsXG4gIFwidHpvZmZzZXR0b1wiOiBERUZBVUxUX1RZUEVfVVRDT0ZGU0VULFxuICBcInR6dXJsXCI6IERFRkFVTFRfVFlQRV9VUkksXG4gIFwidHppZFwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJ0em5hbWVcIjogREVGQVVMVF9UWVBFX1RFWFRcbn0pO1xuXG4vLyBXaGVuIGFkZGluZyBhIHZhbHVlIGhlcmUsIGJlIHN1cmUgdG8gYWRkIGl0IHRvIHRoZSBwYXJhbWV0ZXIgdHlwZXMhXG5jb25zdCB2Y2FyZFZhbHVlcyA9IGV4dGVuZChjb21tb25WYWx1ZXMsIHtcbiAgdGV4dDogY3JlYXRlVGV4dFR5cGUoRlJPTV9WQ0FSRF9ORVdMSU5FLCBUT19WQ0FSRF9ORVdMSU5FKSxcbiAgdXJpOiBjcmVhdGVUZXh0VHlwZShGUk9NX1ZDQVJEX05FV0xJTkUsIFRPX1ZDQVJEX05FV0xJTkUpLFxuXG4gIGRhdGU6IHtcbiAgICBkZWNvcmF0ZTogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICByZXR1cm4gVkNhcmRUaW1lLmZyb21EYXRlQW5kT3JUaW1lU3RyaW5nKGFWYWx1ZSwgXCJkYXRlXCIpO1xuICAgIH0sXG4gICAgdW5kZWNvcmF0ZTogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICByZXR1cm4gYVZhbHVlLnRvU3RyaW5nKCk7XG4gICAgfSxcbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBpZiAoYVZhbHVlLmxlbmd0aCA9PSA4KSB7XG4gICAgICAgIHJldHVybiBpY2FsVmFsdWVzLmRhdGUuZnJvbUlDQUwoYVZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoYVZhbHVlWzBdID09ICctJyAmJiBhVmFsdWUubGVuZ3RoID09IDYpIHtcbiAgICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCA0KSArICctJyArIGFWYWx1ZS5zbGljZSg0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhVmFsdWU7XG4gICAgICB9XG4gICAgfSxcbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgaWYgKGFWYWx1ZS5sZW5ndGggPT0gMTApIHtcbiAgICAgICAgcmV0dXJuIGljYWxWYWx1ZXMuZGF0ZS50b0lDQUwoYVZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoYVZhbHVlWzBdID09ICctJyAmJiBhVmFsdWUubGVuZ3RoID09IDcpIHtcbiAgICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCA0KSArIGFWYWx1ZS5zbGljZSg1KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhVmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHRpbWU6IHtcbiAgICBkZWNvcmF0ZTogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICByZXR1cm4gVkNhcmRUaW1lLmZyb21EYXRlQW5kT3JUaW1lU3RyaW5nKFwiVFwiICsgYVZhbHVlLCBcInRpbWVcIik7XG4gICAgfSxcbiAgICB1bmRlY29yYXRlOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBhVmFsdWUudG9TdHJpbmcoKTtcbiAgICB9LFxuICAgIGZyb21JQ0FMOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIGxldCBzcGxpdHpvbmUgPSB2Y2FyZFZhbHVlcy50aW1lLl9zcGxpdFpvbmUoYVZhbHVlLCB0cnVlKTtcbiAgICAgIGxldCB6b25lID0gc3BsaXR6b25lWzBdLCB2YWx1ZSA9IHNwbGl0em9uZVsxXTtcblxuICAgICAgLy9jb25zb2xlLmxvZyhcIlNQTElUOiBcIixzcGxpdHpvbmUpO1xuXG4gICAgICBpZiAodmFsdWUubGVuZ3RoID09IDYpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCAyKSArICc6JyArXG4gICAgICAgICAgICAgICAgdmFsdWUuc2xpY2UoMiwgNCkgKyAnOicgK1xuICAgICAgICAgICAgICAgIHZhbHVlLnNsaWNlKDQsIDYpO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZS5sZW5ndGggPT0gNCAmJiB2YWx1ZVswXSAhPSAnLScpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCAyKSArICc6JyArIHZhbHVlLnNsaWNlKDIsIDQpO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZS5sZW5ndGggPT0gNSkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDAsIDMpICsgJzonICsgdmFsdWUuc2xpY2UoMywgNSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh6b25lLmxlbmd0aCA9PSA1ICYmICh6b25lWzBdID09ICctJyB8fCB6b25lWzBdID09ICcrJykpIHtcbiAgICAgICAgem9uZSA9IHpvbmUuc2xpY2UoMCwgMykgKyAnOicgKyB6b25lLnNsaWNlKDMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsdWUgKyB6b25lO1xuICAgIH0sXG5cbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgbGV0IHNwbGl0em9uZSA9IHZjYXJkVmFsdWVzLnRpbWUuX3NwbGl0Wm9uZShhVmFsdWUpO1xuICAgICAgbGV0IHpvbmUgPSBzcGxpdHpvbmVbMF0sIHZhbHVlID0gc3BsaXR6b25lWzFdO1xuXG4gICAgICBpZiAodmFsdWUubGVuZ3RoID09IDgpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCAyKSArXG4gICAgICAgICAgICAgICAgdmFsdWUuc2xpY2UoMywgNSkgK1xuICAgICAgICAgICAgICAgIHZhbHVlLnNsaWNlKDYsIDgpO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZS5sZW5ndGggPT0gNSAmJiB2YWx1ZVswXSAhPSAnLScpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCAyKSArIHZhbHVlLnNsaWNlKDMsIDUpO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZS5sZW5ndGggPT0gNikge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDAsIDMpICsgdmFsdWUuc2xpY2UoNCwgNik7XG4gICAgICB9XG5cbiAgICAgIGlmICh6b25lLmxlbmd0aCA9PSA2ICYmICh6b25lWzBdID09ICctJyB8fCB6b25lWzBdID09ICcrJykpIHtcbiAgICAgICAgem9uZSA9IHpvbmUuc2xpY2UoMCwgMykgKyB6b25lLnNsaWNlKDQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsdWUgKyB6b25lO1xuICAgIH0sXG5cbiAgICBfc3BsaXRab25lOiBmdW5jdGlvbihhVmFsdWUsIGlzRnJvbUljYWwpIHtcbiAgICAgIGxldCBsYXN0Q2hhciA9IGFWYWx1ZS5sZW5ndGggLSAxO1xuICAgICAgbGV0IHNpZ25DaGFyID0gYVZhbHVlLmxlbmd0aCAtIChpc0Zyb21JY2FsID8gNSA6IDYpO1xuICAgICAgbGV0IHNpZ24gPSBhVmFsdWVbc2lnbkNoYXJdO1xuICAgICAgbGV0IHpvbmUsIHZhbHVlO1xuXG4gICAgICBpZiAoYVZhbHVlW2xhc3RDaGFyXSA9PSAnWicpIHtcbiAgICAgICAgem9uZSA9IGFWYWx1ZVtsYXN0Q2hhcl07XG4gICAgICAgIHZhbHVlID0gYVZhbHVlLnNsaWNlKDAsIE1hdGgubWF4KDAsIGxhc3RDaGFyKSk7XG4gICAgICB9IGVsc2UgaWYgKGFWYWx1ZS5sZW5ndGggPiA2ICYmIChzaWduID09ICctJyB8fCBzaWduID09ICcrJykpIHtcbiAgICAgICAgem9uZSA9IGFWYWx1ZS5zbGljZShzaWduQ2hhcik7XG4gICAgICAgIHZhbHVlID0gYVZhbHVlLnNsaWNlKDAsIE1hdGgubWF4KDAsIHNpZ25DaGFyKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB6b25lID0gXCJcIjtcbiAgICAgICAgdmFsdWUgPSBhVmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbem9uZSwgdmFsdWVdO1xuICAgIH1cbiAgfSxcblxuICBcImRhdGUtdGltZVwiOiB7XG4gICAgZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIFZDYXJkVGltZS5mcm9tRGF0ZUFuZE9yVGltZVN0cmluZyhhVmFsdWUsIFwiZGF0ZS10aW1lXCIpO1xuICAgIH0sXG5cbiAgICB1bmRlY29yYXRlOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBhVmFsdWUudG9TdHJpbmcoKTtcbiAgICB9LFxuXG4gICAgZnJvbUlDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIHZjYXJkVmFsdWVzWydkYXRlLWFuZC1vci10aW1lJ10uZnJvbUlDQUwoYVZhbHVlKTtcbiAgICB9LFxuXG4gICAgdG9JQ0FMOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiB2Y2FyZFZhbHVlc1snZGF0ZS1hbmQtb3ItdGltZSddLnRvSUNBTChhVmFsdWUpO1xuICAgIH1cbiAgfSxcblxuICBcImRhdGUtYW5kLW9yLXRpbWVcIjoge1xuICAgIGRlY29yYXRlOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBWQ2FyZFRpbWUuZnJvbURhdGVBbmRPclRpbWVTdHJpbmcoYVZhbHVlLCBcImRhdGUtYW5kLW9yLXRpbWVcIik7XG4gICAgfSxcblxuICAgIHVuZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIGFWYWx1ZS50b1N0cmluZygpO1xuICAgIH0sXG5cbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBsZXQgcGFydHMgPSBhVmFsdWUuc3BsaXQoJ1QnKTtcbiAgICAgIHJldHVybiAocGFydHNbMF0gPyB2Y2FyZFZhbHVlcy5kYXRlLmZyb21JQ0FMKHBhcnRzWzBdKSA6ICcnKSArXG4gICAgICAgICAgICAgKHBhcnRzWzFdID8gJ1QnICsgdmNhcmRWYWx1ZXMudGltZS5mcm9tSUNBTChwYXJ0c1sxXSkgOiAnJyk7XG4gICAgfSxcblxuICAgIHRvSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICBsZXQgcGFydHMgPSBhVmFsdWUuc3BsaXQoJ1QnKTtcbiAgICAgIHJldHVybiB2Y2FyZFZhbHVlcy5kYXRlLnRvSUNBTChwYXJ0c1swXSkgK1xuICAgICAgICAgICAgIChwYXJ0c1sxXSA/ICdUJyArIHZjYXJkVmFsdWVzLnRpbWUudG9JQ0FMKHBhcnRzWzFdKSA6ICcnKTtcblxuICAgIH1cbiAgfSxcbiAgdGltZXN0YW1wOiBpY2FsVmFsdWVzWydkYXRlLXRpbWUnXSxcbiAgXCJsYW5ndWFnZS10YWdcIjoge1xuICAgIG1hdGNoZXM6IC9eW2EtekEtWjAtOS1dKyQvIC8vIENvdWxkIGdvIHdpdGggYSBtb3JlIHN0cmljdCByZWdleCBoZXJlXG4gIH0sXG4gIFwicGhvbmUtbnVtYmVyXCI6IHtcbiAgICBmcm9tSUNBTDogZnVuY3Rpb24oYVZhbHVlKSB7XG4gICAgICByZXR1cm4gQXJyYXkuZnJvbShhVmFsdWUpLmZpbHRlcihmdW5jdGlvbihjKSB7XG4gICAgICAgICAgcmV0dXJuIGMgPT09ICdcXFxcJyA/IHVuZGVmaW5lZCA6IGM7XG4gICAgICAgIH0pLmpvaW4oJycpO1xuICAgIH0sXG4gICAgdG9JQ0FMOiBmdW5jdGlvbihhVmFsdWUpIHtcbiAgICAgIHJldHVybiBBcnJheS5mcm9tKGFWYWx1ZSkubWFwKGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgcmV0dXJuIGMgPT09ICcsJyB8fCBjID09PSBcIjtcIiA/ICdcXFxcJyArIGMgOiBjO1xuICAgICAgfSkuam9pbignJyk7XG4gICAgfVxuICB9XG59KTtcblxubGV0IHZjYXJkUGFyYW1zID0ge1xuICBcInR5cGVcIjoge1xuICAgIHZhbHVlVHlwZTogXCJ0ZXh0XCIsXG4gICAgbXVsdGlWYWx1ZTogXCIsXCJcbiAgfSxcbiAgXCJ2YWx1ZVwiOiB7XG4gICAgLy8gc2luY2UgdGhlIHZhbHVlIGhlcmUgaXMgYSAndHlwZScgbG93ZXJjYXNlIGlzIHVzZWQuXG4gICAgdmFsdWVzOiBbXCJ0ZXh0XCIsIFwidXJpXCIsIFwiZGF0ZVwiLCBcInRpbWVcIiwgXCJkYXRlLXRpbWVcIiwgXCJkYXRlLWFuZC1vci10aW1lXCIsXG4gICAgICAgICAgICAgXCJ0aW1lc3RhbXBcIiwgXCJib29sZWFuXCIsIFwiaW50ZWdlclwiLCBcImZsb2F0XCIsIFwidXRjLW9mZnNldFwiLFxuICAgICAgICAgICAgIFwibGFuZ3VhZ2UtdGFnXCJdLFxuICAgIGFsbG93WE5hbWU6IHRydWUsXG4gICAgYWxsb3dJYW5hVG9rZW46IHRydWVcbiAgfVxufTtcblxubGV0IHZjYXJkUHJvcGVydGllcyA9IGV4dGVuZChjb21tb25Qcm9wZXJ0aWVzLCB7XG4gIFwiYWRyXCI6IHsgZGVmYXVsdFR5cGU6IFwidGV4dFwiLCBzdHJ1Y3R1cmVkVmFsdWU6IFwiO1wiLCBtdWx0aVZhbHVlOiBcIixcIiB9LFxuICBcImFubml2ZXJzYXJ5XCI6IERFRkFVTFRfVFlQRV9EQVRFX0FORE9SX1RJTUUsXG4gIFwiYmRheVwiOiBERUZBVUxUX1RZUEVfREFURV9BTkRPUl9USU1FLFxuICBcImNhbGFkcnVyaVwiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcImNhbHVyaVwiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcImNsaWVudHBpZG1hcFwiOiBERUZBVUxUX1RZUEVfVEVYVF9TVFJVQ1RVUkVELFxuICBcImVtYWlsXCI6IERFRkFVTFRfVFlQRV9URVhULFxuICBcImZidXJsXCI6IERFRkFVTFRfVFlQRV9VUkksXG4gIFwiZm5cIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwiZ2VuZGVyXCI6IERFRkFVTFRfVFlQRV9URVhUX1NUUlVDVFVSRUQsXG4gIFwiZ2VvXCI6IERFRkFVTFRfVFlQRV9VUkksXG4gIFwiaW1wcFwiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcImtleVwiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcImtpbmRcIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwibGFuZ1wiOiB7IGRlZmF1bHRUeXBlOiBcImxhbmd1YWdlLXRhZ1wiIH0sXG4gIFwibG9nb1wiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcIm1lbWJlclwiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcIm5cIjogeyBkZWZhdWx0VHlwZTogXCJ0ZXh0XCIsIHN0cnVjdHVyZWRWYWx1ZTogXCI7XCIsIG11bHRpVmFsdWU6IFwiLFwiIH0sXG4gIFwibmlja25hbWVcIjogREVGQVVMVF9UWVBFX1RFWFRfTVVMVEksXG4gIFwibm90ZVwiOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgXCJvcmdcIjogeyBkZWZhdWx0VHlwZTogXCJ0ZXh0XCIsIHN0cnVjdHVyZWRWYWx1ZTogXCI7XCIgfSxcbiAgXCJwaG90b1wiOiBERUZBVUxUX1RZUEVfVVJJLFxuICBcInJlbGF0ZWRcIjogREVGQVVMVF9UWVBFX1VSSSxcbiAgXCJyZXZcIjogeyBkZWZhdWx0VHlwZTogXCJ0aW1lc3RhbXBcIiB9LFxuICBcInJvbGVcIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwic291bmRcIjogREVGQVVMVF9UWVBFX1VSSSxcbiAgXCJzb3VyY2VcIjogREVGQVVMVF9UWVBFX1VSSSxcbiAgXCJ0ZWxcIjogeyBkZWZhdWx0VHlwZTogXCJ1cmlcIiwgYWxsb3dlZFR5cGVzOiBbXCJ1cmlcIiwgXCJ0ZXh0XCJdIH0sXG4gIFwidGl0bGVcIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIFwidHpcIjogeyBkZWZhdWx0VHlwZTogXCJ0ZXh0XCIsIGFsbG93ZWRUeXBlczogW1widGV4dFwiLCBcInV0Yy1vZmZzZXRcIiwgXCJ1cmlcIl0gfSxcbiAgXCJ4bWxcIjogREVGQVVMVF9UWVBFX1RFWFRcbn0pO1xuXG5sZXQgdmNhcmQzVmFsdWVzID0gZXh0ZW5kKGNvbW1vblZhbHVlcywge1xuICBiaW5hcnk6IGljYWxWYWx1ZXMuYmluYXJ5LFxuICBkYXRlOiB2Y2FyZFZhbHVlcy5kYXRlLFxuICBcImRhdGUtdGltZVwiOiB2Y2FyZFZhbHVlc1tcImRhdGUtdGltZVwiXSxcbiAgXCJwaG9uZS1udW1iZXJcIjogdmNhcmRWYWx1ZXNbXCJwaG9uZS1udW1iZXJcIl0sXG4gIHVyaTogaWNhbFZhbHVlcy51cmksXG4gIHRleHQ6IHZjYXJkVmFsdWVzLnRleHQsXG4gIHRpbWU6IGljYWxWYWx1ZXMudGltZSxcbiAgdmNhcmQ6IGljYWxWYWx1ZXMudGV4dCxcbiAgXCJ1dGMtb2Zmc2V0XCI6IHtcbiAgICB0b0lDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCA3KTtcbiAgICB9LFxuXG4gICAgZnJvbUlDQUw6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIGFWYWx1ZS5zbGljZSgwLCA3KTtcbiAgICB9LFxuXG4gICAgZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIFV0Y09mZnNldC5mcm9tU3RyaW5nKGFWYWx1ZSk7XG4gICAgfSxcblxuICAgIHVuZGVjb3JhdGU6IGZ1bmN0aW9uKGFWYWx1ZSkge1xuICAgICAgcmV0dXJuIGFWYWx1ZS50b1N0cmluZygpO1xuICAgIH1cbiAgfVxufSk7XG5cbmxldCB2Y2FyZDNQYXJhbXMgPSB7XG4gIFwidHlwZVwiOiB7XG4gICAgdmFsdWVUeXBlOiBcInRleHRcIixcbiAgICBtdWx0aVZhbHVlOiBcIixcIlxuICB9LFxuICBcInZhbHVlXCI6IHtcbiAgICAvLyBzaW5jZSB0aGUgdmFsdWUgaGVyZSBpcyBhICd0eXBlJyBsb3dlcmNhc2UgaXMgdXNlZC5cbiAgICB2YWx1ZXM6IFtcInRleHRcIiwgXCJ1cmlcIiwgXCJkYXRlXCIsIFwiZGF0ZS10aW1lXCIsIFwicGhvbmUtbnVtYmVyXCIsIFwidGltZVwiLFxuICAgICAgICAgICAgIFwiYm9vbGVhblwiLCBcImludGVnZXJcIiwgXCJmbG9hdFwiLCBcInV0Yy1vZmZzZXRcIiwgXCJ2Y2FyZFwiLCBcImJpbmFyeVwiXSxcbiAgICBhbGxvd1hOYW1lOiB0cnVlLFxuICAgIGFsbG93SWFuYVRva2VuOiB0cnVlXG4gIH1cbn07XG5cbmxldCB2Y2FyZDNQcm9wZXJ0aWVzID0gZXh0ZW5kKGNvbW1vblByb3BlcnRpZXMsIHtcbiAgZm46IERFRkFVTFRfVFlQRV9URVhULFxuICBuOiB7IGRlZmF1bHRUeXBlOiBcInRleHRcIiwgc3RydWN0dXJlZFZhbHVlOiBcIjtcIiwgbXVsdGlWYWx1ZTogXCIsXCIgfSxcbiAgbmlja25hbWU6IERFRkFVTFRfVFlQRV9URVhUX01VTFRJLFxuICBwaG90bzogeyBkZWZhdWx0VHlwZTogXCJiaW5hcnlcIiwgYWxsb3dlZFR5cGVzOiBbXCJiaW5hcnlcIiwgXCJ1cmlcIl0gfSxcbiAgYmRheToge1xuICAgIGRlZmF1bHRUeXBlOiBcImRhdGUtdGltZVwiLFxuICAgIGFsbG93ZWRUeXBlczogW1wiZGF0ZS10aW1lXCIsIFwiZGF0ZVwiXSxcbiAgICBkZXRlY3RUeXBlOiBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICAgIHJldHVybiAoc3RyaW5nLmluZGV4T2YoJ1QnKSA9PT0gLTEpID8gJ2RhdGUnIDogJ2RhdGUtdGltZSc7XG4gICAgfVxuICB9LFxuXG4gIGFkcjogeyBkZWZhdWx0VHlwZTogXCJ0ZXh0XCIsIHN0cnVjdHVyZWRWYWx1ZTogXCI7XCIsIG11bHRpVmFsdWU6IFwiLFwiIH0sXG4gIGxhYmVsOiBERUZBVUxUX1RZUEVfVEVYVCxcblxuICB0ZWw6IHsgZGVmYXVsdFR5cGU6IFwicGhvbmUtbnVtYmVyXCIgfSxcbiAgZW1haWw6IERFRkFVTFRfVFlQRV9URVhULFxuICBtYWlsZXI6IERFRkFVTFRfVFlQRV9URVhULFxuXG4gIHR6OiB7IGRlZmF1bHRUeXBlOiBcInV0Yy1vZmZzZXRcIiwgYWxsb3dlZFR5cGVzOiBbXCJ1dGMtb2Zmc2V0XCIsIFwidGV4dFwiXSB9LFxuICBnZW86IHsgZGVmYXVsdFR5cGU6IFwiZmxvYXRcIiwgc3RydWN0dXJlZFZhbHVlOiBcIjtcIiB9LFxuXG4gIHRpdGxlOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgcm9sZTogREVGQVVMVF9UWVBFX1RFWFQsXG4gIGxvZ286IHsgZGVmYXVsdFR5cGU6IFwiYmluYXJ5XCIsIGFsbG93ZWRUeXBlczogW1wiYmluYXJ5XCIsIFwidXJpXCJdIH0sXG4gIGFnZW50OiB7IGRlZmF1bHRUeXBlOiBcInZjYXJkXCIsIGFsbG93ZWRUeXBlczogW1widmNhcmRcIiwgXCJ0ZXh0XCIsIFwidXJpXCJdIH0sXG4gIG9yZzogREVGQVVMVF9UWVBFX1RFWFRfU1RSVUNUVVJFRCxcblxuICBub3RlOiBERUZBVUxUX1RZUEVfVEVYVF9NVUxUSSxcbiAgcHJvZGlkOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAgcmV2OiB7XG4gICAgZGVmYXVsdFR5cGU6IFwiZGF0ZS10aW1lXCIsXG4gICAgYWxsb3dlZFR5cGVzOiBbXCJkYXRlLXRpbWVcIiwgXCJkYXRlXCJdLFxuICAgIGRldGVjdFR5cGU6IGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgcmV0dXJuIChzdHJpbmcuaW5kZXhPZignVCcpID09PSAtMSkgPyAnZGF0ZScgOiAnZGF0ZS10aW1lJztcbiAgICB9XG4gIH0sXG4gIFwic29ydC1zdHJpbmdcIjogREVGQVVMVF9UWVBFX1RFWFQsXG4gIHNvdW5kOiB7IGRlZmF1bHRUeXBlOiBcImJpbmFyeVwiLCBhbGxvd2VkVHlwZXM6IFtcImJpbmFyeVwiLCBcInVyaVwiXSB9LFxuXG4gIGNsYXNzOiBERUZBVUxUX1RZUEVfVEVYVCxcbiAga2V5OiB7IGRlZmF1bHRUeXBlOiBcImJpbmFyeVwiLCBhbGxvd2VkVHlwZXM6IFtcImJpbmFyeVwiLCBcInRleHRcIl0gfVxufSk7XG5cbi8qKlxuICogaUNhbGVuZGFyIGRlc2lnbiBzZXRcbiAqIEB0eXBlIHtkZXNpZ25TZXR9XG4gKi9cbmxldCBpY2FsU2V0ID0ge1xuICBuYW1lOiBcImljYWxcIixcbiAgdmFsdWU6IGljYWxWYWx1ZXMsXG4gIHBhcmFtOiBpY2FsUGFyYW1zLFxuICBwcm9wZXJ0eTogaWNhbFByb3BlcnRpZXMsXG4gIHByb3BlcnR5R3JvdXBzOiBmYWxzZVxufTtcblxuLyoqXG4gKiB2Q2FyZCA0LjAgZGVzaWduIHNldFxuICogQHR5cGUge2Rlc2lnblNldH1cbiAqL1xubGV0IHZjYXJkU2V0ID0ge1xuICBuYW1lOiBcInZjYXJkNFwiLFxuICB2YWx1ZTogdmNhcmRWYWx1ZXMsXG4gIHBhcmFtOiB2Y2FyZFBhcmFtcyxcbiAgcHJvcGVydHk6IHZjYXJkUHJvcGVydGllcyxcbiAgcHJvcGVydHlHcm91cHM6IHRydWVcbn07XG5cbi8qKlxuICogdkNhcmQgMy4wIGRlc2lnbiBzZXRcbiAqIEB0eXBlIHtkZXNpZ25TZXR9XG4gKi9cbmxldCB2Y2FyZDNTZXQgPSB7XG4gIG5hbWU6IFwidmNhcmQzXCIsXG4gIHZhbHVlOiB2Y2FyZDNWYWx1ZXMsXG4gIHBhcmFtOiB2Y2FyZDNQYXJhbXMsXG4gIHByb3BlcnR5OiB2Y2FyZDNQcm9wZXJ0aWVzLFxuICBwcm9wZXJ0eUdyb3VwczogdHJ1ZVxufTtcblxuLyoqXG4gKiBUaGUgZGVzaWduIGRhdGEsIHVzZWQgYnkgdGhlIHBhcnNlciB0byBkZXRlcm1pbmUgdHlwZXMgZm9yIHByb3BlcnRpZXMgYW5kXG4gKiBvdGhlciBtZXRhZGF0YSBuZWVkZWQgdG8gcHJvZHVjZSBjb3JyZWN0IGpDYXJkL2pDYWwgZGF0YS5cbiAqXG4gKiBAYWxpYXMgSUNBTC5kZXNpZ25cbiAqIEBleHBvcnRzIG1vZHVsZTpJQ0FMLmRlc2lnblxuICovXG5jb25zdCBkZXNpZ24gPSB7XG4gIC8qKlxuICAgKiBDYW4gYmUgc2V0IHRvIGZhbHNlIHRvIG1ha2UgdGhlIHBhcnNlciBtb3JlIGxlbmllbnQuXG4gICAqL1xuICBzdHJpY3Q6IHRydWUsXG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IHNldCBmb3IgbmV3IHByb3BlcnRpZXMgYW5kIGNvbXBvbmVudHMgaWYgbm9uZSBpcyBzcGVjaWZpZWQuXG4gICAqIEB0eXBlIHtkZXNpZ25TZXR9XG4gICAqL1xuICBkZWZhdWx0U2V0OiBpY2FsU2V0LFxuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCB0eXBlIGZvciB1bmtub3duIHByb3BlcnRpZXNcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGRlZmF1bHRUeXBlOiAndW5rbm93bicsXG5cbiAgLyoqXG4gICAqIEhvbGRzIHRoZSBkZXNpZ24gc2V0IGZvciBrbm93biB0b3AtbGV2ZWwgY29tcG9uZW50c1xuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAcHJvcGVydHkge2Rlc2lnblNldH0gdmNhcmQgICAgICAgdkNhcmQgVkNBUkRcbiAgICogQHByb3BlcnR5IHtkZXNpZ25TZXR9IHZldmVudCAgICAgIGlDYWxlbmRhciBWRVZFTlRcbiAgICogQHByb3BlcnR5IHtkZXNpZ25TZXR9IHZ0b2RvICAgICAgIGlDYWxlbmRhciBWVE9ET1xuICAgKiBAcHJvcGVydHkge2Rlc2lnblNldH0gdmpvdXJuYWwgICAgaUNhbGVuZGFyIFZKT1VSTkFMXG4gICAqIEBwcm9wZXJ0eSB7ZGVzaWduU2V0fSB2YWxhcm0gICAgICBpQ2FsZW5kYXIgVkFMQVJNXG4gICAqIEBwcm9wZXJ0eSB7ZGVzaWduU2V0fSB2dGltZXpvbmUgICBpQ2FsZW5kYXIgVlRJTUVaT05FXG4gICAqIEBwcm9wZXJ0eSB7ZGVzaWduU2V0fSBkYXlsaWdodCAgICBpQ2FsZW5kYXIgREFZTElHSFRcbiAgICogQHByb3BlcnR5IHtkZXNpZ25TZXR9IHN0YW5kYXJkICAgIGlDYWxlbmRhciBTVEFOREFSRFxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBsZXQgcHJvcGVydHlOYW1lID0gJ2ZuJztcbiAgICogbGV0IGNvbXBvbmVudERlc2lnbiA9IElDQUwuZGVzaWduLmNvbXBvbmVudHMudmNhcmQ7XG4gICAqIGxldCBwcm9wZXJ0eURldGFpbHMgPSBjb21wb25lbnREZXNpZ24ucHJvcGVydHlbcHJvcGVydHlOYW1lXTtcbiAgICogaWYgKHByb3BlcnR5RGV0YWlscy5kZWZhdWx0VHlwZSA9PSAndGV4dCcpIHtcbiAgICogICAvLyBZZXAsIHN1cmUgaXMuLi5cbiAgICogfVxuICAgKi9cbiAgY29tcG9uZW50czoge1xuICAgIHZjYXJkOiB2Y2FyZFNldCxcbiAgICB2Y2FyZDM6IHZjYXJkM1NldCxcbiAgICB2ZXZlbnQ6IGljYWxTZXQsXG4gICAgdnRvZG86IGljYWxTZXQsXG4gICAgdmpvdXJuYWw6IGljYWxTZXQsXG4gICAgdmFsYXJtOiBpY2FsU2V0LFxuICAgIHZ0aW1lem9uZTogaWNhbFNldCxcbiAgICBkYXlsaWdodDogaWNhbFNldCxcbiAgICBzdGFuZGFyZDogaWNhbFNldFxuICB9LFxuXG5cbiAgLyoqXG4gICAqIFRoZSBkZXNpZ24gc2V0IGZvciBpQ2FsZW5kYXIgKHJmYzU1NDUvcmZjNzI2NSkgY29tcG9uZW50cy5cbiAgICogQHR5cGUge2Rlc2lnblNldH1cbiAgICovXG4gIGljYWxlbmRhcjogaWNhbFNldCxcblxuICAvKipcbiAgICogVGhlIGRlc2lnbiBzZXQgZm9yIHZDYXJkIChyZmM2MzUwL3JmYzcwOTUpIGNvbXBvbmVudHMuXG4gICAqIEB0eXBlIHtkZXNpZ25TZXR9XG4gICAqL1xuICB2Y2FyZDogdmNhcmRTZXQsXG5cbiAgLyoqXG4gICAqIFRoZSBkZXNpZ24gc2V0IGZvciB2Q2FyZCAocmZjMjQyNS9yZmMyNDI2L3JmYzcwOTUpIGNvbXBvbmVudHMuXG4gICAqIEB0eXBlIHtkZXNpZ25TZXR9XG4gICAqL1xuICB2Y2FyZDM6IHZjYXJkM1NldCxcblxuICAvKipcbiAgICogR2V0cyB0aGUgZGVzaWduIHNldCBmb3IgdGhlIGdpdmVuIGNvbXBvbmVudCBuYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gY29tcG9uZW50TmFtZSAgICAgICAgVGhlIG5hbWUgb2YgdGhlIGNvbXBvbmVudFxuICAgKiBAcmV0dXJuIHtkZXNpZ25TZXR9ICAgICAgVGhlIGRlc2lnbiBzZXQgZm9yIHRoZSBjb21wb25lbnRcbiAgICovXG4gIGdldERlc2lnblNldDogZnVuY3Rpb24oY29tcG9uZW50TmFtZSkge1xuICAgIGxldCBpc0luRGVzaWduID0gY29tcG9uZW50TmFtZSAmJiBjb21wb25lbnROYW1lIGluIGRlc2lnbi5jb21wb25lbnRzO1xuICAgIHJldHVybiBpc0luRGVzaWduID8gZGVzaWduLmNvbXBvbmVudHNbY29tcG9uZW50TmFtZV0gOiBkZXNpZ24uZGVmYXVsdFNldDtcbiAgfVxufTtcblxuLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cblxuLyoqXG4gKiBUaGlzIGxldHMgdHlwZXNjcmlwdCByZXNvbHZlIG91ciBjdXN0b20gdHlwZXMgaW4gdGhlXG4gKiBnZW5lcmF0ZWQgZC50cyBmaWxlcyAoanNkb2MgdHlwZWRlZnMgYXJlIGNvbnZlcnRlZCB0byB0eXBlc2NyaXB0IHR5cGVzKS5cbiAqIElnbm9yZSBwcmV2ZW50cyB0aGUgdHlwZWRlZnMgZnJvbSBiZWluZyBkb2N1bWVudGVkIG1vcmUgdGhhbiBvbmNlLlxuICpcbiAqIEBpZ25vcmVcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL3R5cGVzLmpzXCIpLmRlc2lnblNldH0gZGVzaWduU2V0XG4gKiBJbXBvcnRzIHRoZSAnZGVzaWduU2V0JyB0eXBlIGZyb20gdGhlIFwidHlwZXMuanNcIiBtb2R1bGVcbiAqL1xuXG5jb25zdCBMSU5FX0VORElORyA9ICdcXHJcXG4nO1xuY29uc3QgREVGQVVMVF9WQUxVRV9UWVBFID0gJ3Vua25vd24nO1xuY29uc3QgUkZDNjg2OF9SRVBMQUNFX01BUCA9IHsgJ1wiJzogXCJeJ1wiLCBcIlxcblwiOiBcIl5uXCIsIFwiXlwiOiBcIl5eXCIgfTtcblxuLyoqXG4gKiBDb252ZXJ0IGEgZnVsbCBqQ2FsL2pDYXJkIGFycmF5IGludG8gYSBpQ2FsZW5kYXIvdkNhcmQgc3RyaW5nLlxuICpcbiAqIEBmdW5jdGlvbiBJQ0FMLnN0cmluZ2lmeVxuICogQHZhcmlhdGlvbiBmdW5jdGlvblxuICogQHBhcmFtIHtBcnJheX0gakNhbCAgICBUaGUgakNhbC9qQ2FyZCBkb2N1bWVudFxuICogQHJldHVybiB7U3RyaW5nfSAgICAgICBUaGUgc3RyaW5naWZpZWQgaUNhbGVuZGFyL3ZDYXJkIGRvY3VtZW50XG4gKi9cbmZ1bmN0aW9uIHN0cmluZ2lmeShqQ2FsKSB7XG4gIGlmICh0eXBlb2YgakNhbFswXSA9PSBcInN0cmluZ1wiKSB7XG4gICAgLy8gVGhpcyBpcyBhIHNpbmdsZSBjb21wb25lbnRcbiAgICBqQ2FsID0gW2pDYWxdO1xuICB9XG5cbiAgbGV0IGkgPSAwO1xuICBsZXQgbGVuID0gakNhbC5sZW5ndGg7XG4gIGxldCByZXN1bHQgPSAnJztcblxuICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgcmVzdWx0ICs9IHN0cmluZ2lmeS5jb21wb25lbnQoakNhbFtpXSkgKyBMSU5FX0VORElORztcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gakNhbCBjb21wb25lbnQgYXJyYXkgaW50byBhIElDQUwgc3RyaW5nLlxuICogUmVjdXJzaXZlIHdpbGwgcmVzb2x2ZSBzdWItY29tcG9uZW50cy5cbiAqXG4gKiBFeGFjdCBjb21wb25lbnQvcHJvcGVydHkgb3JkZXIgaXMgbm90IHNhdmVkIGFsbFxuICogcHJvcGVydGllcyB3aWxsIGNvbWUgYmVmb3JlIHN1YmNvbXBvbmVudHMuXG4gKlxuICogQGZ1bmN0aW9uIElDQUwuc3RyaW5naWZ5LmNvbXBvbmVudFxuICogQHBhcmFtIHtBcnJheX0gY29tcG9uZW50XG4gKiAgICAgICAgakNhbC9qQ2FyZCBmcmFnbWVudCBvZiBhIGNvbXBvbmVudFxuICogQHBhcmFtIHtkZXNpZ25TZXR9IGRlc2lnblNldFxuICogICAgICAgIFRoZSBkZXNpZ24gZGF0YSB0byB1c2UgZm9yIHRoaXMgY29tcG9uZW50XG4gKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgIFRoZSBpQ2FsZW5kYXIvdkNhcmQgc3RyaW5nXG4gKi9cbnN0cmluZ2lmeS5jb21wb25lbnQgPSBmdW5jdGlvbihjb21wb25lbnQsIGRlc2lnblNldCkge1xuICBsZXQgbmFtZSA9IGNvbXBvbmVudFswXS50b1VwcGVyQ2FzZSgpO1xuICBsZXQgcmVzdWx0ID0gJ0JFR0lOOicgKyBuYW1lICsgTElORV9FTkRJTkc7XG5cbiAgbGV0IHByb3BzID0gY29tcG9uZW50WzFdO1xuICBsZXQgcHJvcElkeCA9IDA7XG4gIGxldCBwcm9wTGVuID0gcHJvcHMubGVuZ3RoO1xuXG4gIGxldCBkZXNpZ25TZXROYW1lID0gY29tcG9uZW50WzBdO1xuICAvLyByZmM2MzUwIHJlcXVpcmVzIHRoYXQgaW4gdkNhcmQgNC4wIHRoZSBmaXJzdCBjb21wb25lbnQgaXMgdGhlIFZFUlNJT05cbiAgLy8gY29tcG9uZW50IHdpdGggYXMgdmFsdWUgNC4wLCBub3RlIHRoYXQgMy4wIGRvZXMgbm90IGhhdmUgdGhpcyByZXF1aXJlbWVudC5cbiAgaWYgKGRlc2lnblNldE5hbWUgPT09ICd2Y2FyZCcgJiYgY29tcG9uZW50WzFdLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAhKGNvbXBvbmVudFsxXVswXVswXSA9PT0gXCJ2ZXJzaW9uXCIgJiYgY29tcG9uZW50WzFdWzBdWzNdID09PSBcIjQuMFwiKSkge1xuICAgIGRlc2lnblNldE5hbWUgPSBcInZjYXJkM1wiO1xuICB9XG4gIGRlc2lnblNldCA9IGRlc2lnblNldCB8fCBkZXNpZ24uZ2V0RGVzaWduU2V0KGRlc2lnblNldE5hbWUpO1xuXG4gIGZvciAoOyBwcm9wSWR4IDwgcHJvcExlbjsgcHJvcElkeCsrKSB7XG4gICAgcmVzdWx0ICs9IHN0cmluZ2lmeS5wcm9wZXJ0eShwcm9wc1twcm9wSWR4XSwgZGVzaWduU2V0KSArIExJTkVfRU5ESU5HO1xuICB9XG5cbiAgLy8gSWdub3JlIHN1YmNvbXBvbmVudHMgaWYgbm9uZSBleGlzdCwgZS5nLiBpbiB2Q2FyZC5cbiAgbGV0IGNvbXBzID0gY29tcG9uZW50WzJdIHx8IFtdO1xuICBsZXQgY29tcElkeCA9IDA7XG4gIGxldCBjb21wTGVuID0gY29tcHMubGVuZ3RoO1xuXG4gIGZvciAoOyBjb21wSWR4IDwgY29tcExlbjsgY29tcElkeCsrKSB7XG4gICAgcmVzdWx0ICs9IHN0cmluZ2lmeS5jb21wb25lbnQoY29tcHNbY29tcElkeF0sIGRlc2lnblNldCkgKyBMSU5FX0VORElORztcbiAgfVxuXG4gIHJlc3VsdCArPSAnRU5EOicgKyBuYW1lO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBDb252ZXJ0cyBhIHNpbmdsZSBqQ2FsL2pDYXJkIHByb3BlcnR5IHRvIGEgaUNhbGVuZGFyL3ZDYXJkIHN0cmluZy5cbiAqXG4gKiBAZnVuY3Rpb24gSUNBTC5zdHJpbmdpZnkucHJvcGVydHlcbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BlcnR5XG4gKiAgICAgICAgakNhbC9qQ2FyZCBwcm9wZXJ0eSBhcnJheVxuICogQHBhcmFtIHtkZXNpZ25TZXR9IGRlc2lnblNldFxuICogICAgICAgIFRoZSBkZXNpZ24gZGF0YSB0byB1c2UgZm9yIHRoaXMgcHJvcGVydHlcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gbm9Gb2xkXG4gKiAgICAgICAgSWYgdHJ1ZSwgdGhlIGxpbmUgaXMgbm90IGZvbGRlZFxuICogQHJldHVybiB7U3RyaW5nfSAgICAgICBUaGUgaUNhbGVuZGFyL3ZDYXJkIHN0cmluZ1xuICovXG5zdHJpbmdpZnkucHJvcGVydHkgPSBmdW5jdGlvbihwcm9wZXJ0eSwgZGVzaWduU2V0LCBub0ZvbGQpIHtcbiAgbGV0IG5hbWUgPSBwcm9wZXJ0eVswXS50b1VwcGVyQ2FzZSgpO1xuICBsZXQganNOYW1lID0gcHJvcGVydHlbMF07XG4gIGxldCBwYXJhbXMgPSBwcm9wZXJ0eVsxXTtcblxuICBpZiAoIWRlc2lnblNldCkge1xuICAgIGRlc2lnblNldCA9IGRlc2lnbi5kZWZhdWx0U2V0O1xuICB9XG5cbiAgbGV0IGdyb3VwTmFtZSA9IHBhcmFtcy5ncm91cDtcbiAgbGV0IGxpbmU7XG4gIGlmIChkZXNpZ25TZXQucHJvcGVydHlHcm91cHMgJiYgZ3JvdXBOYW1lKSB7XG4gICAgbGluZSA9IGdyb3VwTmFtZS50b1VwcGVyQ2FzZSgpICsgXCIuXCIgKyBuYW1lO1xuICB9IGVsc2Uge1xuICAgIGxpbmUgPSBuYW1lO1xuICB9XG5cbiAgZm9yIChsZXQgW3BhcmFtTmFtZSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHBhcmFtcykpIHtcbiAgICBpZiAoZGVzaWduU2V0LnByb3BlcnR5R3JvdXBzICYmIHBhcmFtTmFtZSA9PSAnZ3JvdXAnKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBsZXQgcGFyYW1EZXNpZ24gPSBkZXNpZ25TZXQucGFyYW1bcGFyYW1OYW1lXTtcbiAgICBsZXQgbXVsdGlWYWx1ZSA9IHBhcmFtRGVzaWduICYmIHBhcmFtRGVzaWduLm11bHRpVmFsdWU7XG4gICAgaWYgKG11bHRpVmFsdWUgJiYgQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUubWFwKGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICB2YWwgPSBzdHJpbmdpZnkuX3JmYzY4NjhVbmVzY2FwZSh2YWwpO1xuICAgICAgICB2YWwgPSBzdHJpbmdpZnkucGFyYW1Qcm9wZXJ0eVZhbHVlKHZhbCwgcGFyYW1EZXNpZ24ubXVsdGlWYWx1ZVNlcGFyYXRlRFF1b3RlKTtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH0pO1xuICAgICAgdmFsdWUgPSBzdHJpbmdpZnkubXVsdGlWYWx1ZSh2YWx1ZSwgbXVsdGlWYWx1ZSwgXCJ1bmtub3duXCIsIG51bGwsIGRlc2lnblNldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlID0gc3RyaW5naWZ5Ll9yZmM2ODY4VW5lc2NhcGUodmFsdWUpO1xuICAgICAgdmFsdWUgPSBzdHJpbmdpZnkucGFyYW1Qcm9wZXJ0eVZhbHVlKHZhbHVlKTtcbiAgICB9XG5cbiAgICBsaW5lICs9ICc7JyArIHBhcmFtTmFtZS50b1VwcGVyQ2FzZSgpICsgJz0nICsgdmFsdWU7XG4gIH1cblxuICBpZiAocHJvcGVydHkubGVuZ3RoID09PSAzKSB7XG4gICAgLy8gSWYgdGhlcmUgYXJlIG5vIHZhbHVlcywgd2UgbXVzdCBhc3N1bWUgYSBibGFuayB2YWx1ZVxuICAgIHJldHVybiBsaW5lICsgJzonO1xuICB9XG5cbiAgbGV0IHZhbHVlVHlwZSA9IHByb3BlcnR5WzJdO1xuXG4gIGxldCBwcm9wRGV0YWlscztcbiAgbGV0IG11bHRpVmFsdWUgPSBmYWxzZTtcbiAgbGV0IHN0cnVjdHVyZWRWYWx1ZSA9IGZhbHNlO1xuICBsZXQgaXNEZWZhdWx0ID0gZmFsc2U7XG5cbiAgaWYgKGpzTmFtZSBpbiBkZXNpZ25TZXQucHJvcGVydHkpIHtcbiAgICBwcm9wRGV0YWlscyA9IGRlc2lnblNldC5wcm9wZXJ0eVtqc05hbWVdO1xuXG4gICAgaWYgKCdtdWx0aVZhbHVlJyBpbiBwcm9wRGV0YWlscykge1xuICAgICAgbXVsdGlWYWx1ZSA9IHByb3BEZXRhaWxzLm11bHRpVmFsdWU7XG4gICAgfVxuXG4gICAgaWYgKCgnc3RydWN0dXJlZFZhbHVlJyBpbiBwcm9wRGV0YWlscykgJiYgQXJyYXkuaXNBcnJheShwcm9wZXJ0eVszXSkpIHtcbiAgICAgIHN0cnVjdHVyZWRWYWx1ZSA9IHByb3BEZXRhaWxzLnN0cnVjdHVyZWRWYWx1ZTtcbiAgICB9XG5cbiAgICBpZiAoJ2RlZmF1bHRUeXBlJyBpbiBwcm9wRGV0YWlscykge1xuICAgICAgaWYgKHZhbHVlVHlwZSA9PT0gcHJvcERldGFpbHMuZGVmYXVsdFR5cGUpIHtcbiAgICAgICAgaXNEZWZhdWx0ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHZhbHVlVHlwZSA9PT0gREVGQVVMVF9WQUxVRV9UWVBFKSB7XG4gICAgICAgIGlzRGVmYXVsdCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmICh2YWx1ZVR5cGUgPT09IERFRkFVTFRfVkFMVUVfVFlQRSkge1xuICAgICAgaXNEZWZhdWx0ID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvLyBwdXNoIHRoZSBWQUxVRSBwcm9wZXJ0eSBpZiB0eXBlIGlzIG5vdCB0aGUgZGVmYXVsdFxuICAvLyBmb3IgdGhlIGN1cnJlbnQgcHJvcGVydHkuXG4gIGlmICghaXNEZWZhdWx0KSB7XG4gICAgLy8gdmFsdWUgd2lsbCBuZXZlciBjb250YWluIDsvOi8sIHNvIHdlIGRvbid0IGVzY2FwZSBpdCBoZXJlLlxuICAgIGxpbmUgKz0gJztWQUxVRT0nICsgdmFsdWVUeXBlLnRvVXBwZXJDYXNlKCk7XG4gIH1cblxuICBsaW5lICs9ICc6JztcblxuICBpZiAobXVsdGlWYWx1ZSAmJiBzdHJ1Y3R1cmVkVmFsdWUpIHtcbiAgICBsaW5lICs9IHN0cmluZ2lmeS5tdWx0aVZhbHVlKFxuICAgICAgcHJvcGVydHlbM10sIHN0cnVjdHVyZWRWYWx1ZSwgdmFsdWVUeXBlLCBtdWx0aVZhbHVlLCBkZXNpZ25TZXQsIHN0cnVjdHVyZWRWYWx1ZVxuICAgICk7XG4gIH0gZWxzZSBpZiAobXVsdGlWYWx1ZSkge1xuICAgIGxpbmUgKz0gc3RyaW5naWZ5Lm11bHRpVmFsdWUoXG4gICAgICBwcm9wZXJ0eS5zbGljZSgzKSwgbXVsdGlWYWx1ZSwgdmFsdWVUeXBlLCBudWxsLCBkZXNpZ25TZXQsIGZhbHNlXG4gICAgKTtcbiAgfSBlbHNlIGlmIChzdHJ1Y3R1cmVkVmFsdWUpIHtcbiAgICBsaW5lICs9IHN0cmluZ2lmeS5tdWx0aVZhbHVlKFxuICAgICAgcHJvcGVydHlbM10sIHN0cnVjdHVyZWRWYWx1ZSwgdmFsdWVUeXBlLCBudWxsLCBkZXNpZ25TZXQsIHN0cnVjdHVyZWRWYWx1ZVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgbGluZSArPSBzdHJpbmdpZnkudmFsdWUocHJvcGVydHlbM10sIHZhbHVlVHlwZSwgZGVzaWduU2V0LCBmYWxzZSk7XG4gIH1cblxuICByZXR1cm4gbm9Gb2xkID8gbGluZSA6IGZvbGRsaW5lKGxpbmUpO1xufTtcblxuLyoqXG4gKiBIYW5kbGVzIGVzY2FwaW5nIG9mIHByb3BlcnR5IHZhbHVlcyB0aGF0IG1heSBjb250YWluOlxuICpcbiAqICAgIENPTE9OICg6KSwgU0VNSUNPTE9OICg7KSwgb3IgQ09NTUEgKCwpXG4gKlxuICogSWYgYW55IG9mIHRoZSBhYm92ZSBhcmUgcHJlc2VudCB0aGUgcmVzdWx0IGlzIHdyYXBwZWRcbiAqIGluIGRvdWJsZSBxdW90ZXMuXG4gKlxuICogQGZ1bmN0aW9uIElDQUwuc3RyaW5naWZ5LnBhcmFtUHJvcGVydHlWYWx1ZVxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlICAgICAgUmF3IHByb3BlcnR5IHZhbHVlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGZvcmNlICAgICBJZiB2YWx1ZSBzaG91bGQgYmUgZXNjYXBlZCBldmVuIHdoZW4gdW5uZWNlc3NhcnlcbiAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICAgIEdpdmVuIG9yIGVzY2FwZWQgdmFsdWUgd2hlbiBuZWVkZWRcbiAqL1xuc3RyaW5naWZ5LnBhcmFtUHJvcGVydHlWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlLCBmb3JjZSkge1xuICBpZiAoIWZvcmNlICYmXG4gICAgICAodmFsdWUuaW5kZXhPZignLCcpID09PSAtMSkgJiZcbiAgICAgICh2YWx1ZS5pbmRleE9mKCc6JykgPT09IC0xKSAmJlxuICAgICAgKHZhbHVlLmluZGV4T2YoJzsnKSA9PT0gLTEpKSB7XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gJ1wiJyArIHZhbHVlICsgJ1wiJztcbn07XG5cbi8qKlxuICogQ29udmVydHMgYW4gYXJyYXkgb2YgaWNhbCB2YWx1ZXMgaW50byBhIHNpbmdsZVxuICogc3RyaW5nIGJhc2VkIG9uIGEgdHlwZSBhbmQgYSBkZWxpbWl0ZXIgdmFsdWUgKGxpa2UgXCIsXCIpLlxuICpcbiAqIEBmdW5jdGlvbiBJQ0FMLnN0cmluZ2lmeS5tdWx0aVZhbHVlXG4gKiBAcGFyYW0ge0FycmF5fSB2YWx1ZXMgICAgICBMaXN0IG9mIHZhbHVlcyB0byBjb252ZXJ0XG4gKiBAcGFyYW0ge1N0cmluZ30gZGVsaW0gICAgICBVc2VkIHRvIGpvaW4gdGhlIHZhbHVlcyAoXCIsXCIsIFwiO1wiLCBcIjpcIilcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlICAgICAgIExvd2VjYXNlIGljYWwgdmFsdWUgdHlwZVxuICogICAgICAgIChsaWtlIGJvb2xlYW4sIGRhdGUtdGltZSwgZXRjLi4pXG4gKiBAcGFyYW0gez9TdHJpbmd9IGlubmVyTXVsdGkgSWYgc2V0LCBlYWNoIHZhbHVlIHdpbGwgYWdhaW4gYmUgcHJvY2Vzc2VkXG4gKiAgICAgICAgVXNlZCBmb3Igc3RydWN0dXJlZCB2YWx1ZXNcbiAqIEBwYXJhbSB7ZGVzaWduU2V0fSBkZXNpZ25TZXRcbiAqICAgICAgICBUaGUgZGVzaWduIGRhdGEgdG8gdXNlIGZvciB0aGlzIHByb3BlcnR5XG4gKlxuICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgICAgaUNhbGVuZGFyL3ZDYXJkIHN0cmluZyBmb3IgdmFsdWVcbiAqL1xuc3RyaW5naWZ5Lm11bHRpVmFsdWUgPSBmdW5jdGlvbih2YWx1ZXMsIGRlbGltLCB0eXBlLCBpbm5lck11bHRpLCBkZXNpZ25TZXQsIHN0cnVjdHVyZWRWYWx1ZSkge1xuICBsZXQgcmVzdWx0ID0gJyc7XG4gIGxldCBsZW4gPSB2YWx1ZXMubGVuZ3RoO1xuICBsZXQgaSA9IDA7XG5cbiAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgIGlmIChpbm5lck11bHRpICYmIEFycmF5LmlzQXJyYXkodmFsdWVzW2ldKSkge1xuICAgICAgcmVzdWx0ICs9IHN0cmluZ2lmeS5tdWx0aVZhbHVlKHZhbHVlc1tpXSwgaW5uZXJNdWx0aSwgdHlwZSwgbnVsbCwgZGVzaWduU2V0LCBzdHJ1Y3R1cmVkVmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQgKz0gc3RyaW5naWZ5LnZhbHVlKHZhbHVlc1tpXSwgdHlwZSwgZGVzaWduU2V0LCBzdHJ1Y3R1cmVkVmFsdWUpO1xuICAgIH1cblxuICAgIGlmIChpICE9PSAobGVuIC0gMSkpIHtcbiAgICAgIHJlc3VsdCArPSBkZWxpbTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBQcm9jZXNzZXMgYSBzaW5nbGUgaWNhbCB2YWx1ZSBydW5zIHRoZSBhc3NvY2lhdGVkIFwidG9JQ0FMXCIgbWV0aG9kIGZyb20gdGhlXG4gKiBkZXNpZ24gdmFsdWUgdHlwZSBpZiBhdmFpbGFibGUgdG8gY29udmVydCB0aGUgdmFsdWUuXG4gKlxuICogQGZ1bmN0aW9uIElDQUwuc3RyaW5naWZ5LnZhbHVlXG4gKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IHZhbHVlICAgICAgIEEgZm9ybWF0dGVkIHZhbHVlXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAgICAgICAgICAgICAgIExvd2VyY2FzZSBpQ2FsZW5kYXIvdkNhcmQgdmFsdWUgdHlwZVxuICogIChsaWtlIGJvb2xlYW4sIGRhdGUtdGltZSwgZXRjLi4pXG4gKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgICAgICAgICAgIGlDYWxlbmRhci92Q2FyZCB2YWx1ZSBmb3Igc2luZ2xlIHZhbHVlXG4gKi9cbnN0cmluZ2lmeS52YWx1ZSA9IGZ1bmN0aW9uKHZhbHVlLCB0eXBlLCBkZXNpZ25TZXQsIHN0cnVjdHVyZWRWYWx1ZSkge1xuICBpZiAodHlwZSBpbiBkZXNpZ25TZXQudmFsdWUgJiYgJ3RvSUNBTCcgaW4gZGVzaWduU2V0LnZhbHVlW3R5cGVdKSB7XG4gICAgcmV0dXJuIGRlc2lnblNldC52YWx1ZVt0eXBlXS50b0lDQUwodmFsdWUsIHN0cnVjdHVyZWRWYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuLyoqXG4gKiBJbnRlcm5hbCBoZWxwZXIgZm9yIHJmYzY4NjguIEV4cG9zaW5nIHRoaXMgb24gSUNBTC5zdHJpbmdpZnkgc28gdGhhdFxuICogaGFja2VycyBjYW4gZGlzYWJsZSB0aGUgcmZjNjg2OCBwYXJzaW5nIGlmIHRoZSByZWFsbHkgbmVlZCB0by5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsICAgICAgICBUaGUgdmFsdWUgdG8gdW5lc2NhcGVcbiAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICAgIFRoZSBlc2NhcGVkIHZhbHVlXG4gKi9cbnN0cmluZ2lmeS5fcmZjNjg2OFVuZXNjYXBlID0gZnVuY3Rpb24odmFsKSB7XG4gIHJldHVybiB2YWwucmVwbGFjZSgvW1xcbl5cIl0vZywgZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiBSRkM2ODY4X1JFUExBQ0VfTUFQW3hdO1xuICB9KTtcbn07XG5cbi8qIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKiBQb3J0aW9ucyBDb3B5cmlnaHQgKEMpIFBoaWxpcHAgS2V3aXNjaCAqL1xuXG5jb25zdCBOQU1FX0lOREVYJDEgPSAwO1xuY29uc3QgUFJPUF9JTkRFWCA9IDE7XG5jb25zdCBUWVBFX0lOREVYID0gMjtcbmNvbnN0IFZBTFVFX0lOREVYID0gMztcblxuLyoqXG4gKiBUaGlzIGxldHMgdHlwZXNjcmlwdCByZXNvbHZlIG91ciBjdXN0b20gdHlwZXMgaW4gdGhlXG4gKiBnZW5lcmF0ZWQgZC50cyBmaWxlcyAoanNkb2MgdHlwZWRlZnMgYXJlIGNvbnZlcnRlZCB0byB0eXBlc2NyaXB0IHR5cGVzKS5cbiAqIElnbm9yZSBwcmV2ZW50cyB0aGUgdHlwZWRlZnMgZnJvbSBiZWluZyBkb2N1bWVudGVkIG1vcmUgdGhhbiBvbmNlLlxuICogQGlnbm9yZVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vdHlwZXMuanNcIikuZGVzaWduU2V0fSBkZXNpZ25TZXRcbiAqIEltcG9ydHMgdGhlICdkZXNpZ25TZXQnIHR5cGUgZnJvbSB0aGUgXCJ0eXBlcy5qc1wiIG1vZHVsZVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vdHlwZXMuanNcIikuR2VvfSBHZW9cbiAqIEltcG9ydHMgdGhlICdHZW8nIHR5cGUgZnJvbSB0aGUgXCJ0eXBlcy5qc1wiIG1vZHVsZVxuICovXG5cbi8qKlxuICogUHJvdmlkZXMgYSBsYXllciBvbiB0b3Agb2YgdGhlIHJhdyBqQ2FsIG9iamVjdCBmb3IgbWFuaXB1bGF0aW5nIGEgc2luZ2xlIHByb3BlcnR5LCB3aXRoIGl0c1xuICogcGFyYW1ldGVycyBhbmQgdmFsdWUuXG4gKlxuICogQG1lbWJlcm9mIElDQUxcbiAqL1xuY2xhc3MgUHJvcGVydHkge1xuICAvKipcbiAgICogQ3JlYXRlIGFuIHtAbGluayBJQ0FMLlByb3BlcnR5fSBieSBwYXJzaW5nIHRoZSBwYXNzZWQgaUNhbGVuZGFyIHN0cmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciAgICAgICAgICAgIFRoZSBpQ2FsZW5kYXIgc3RyaW5nIHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7ZGVzaWduU2V0PX0gZGVzaWduU2V0ICBUaGUgZGVzaWduIGRhdGEgdG8gdXNlIGZvciB0aGlzIHByb3BlcnR5XG4gICAqIEByZXR1cm4ge1Byb3BlcnR5fSAgICAgICAgICAgICBUaGUgY3JlYXRlZCBpQ2FsZW5kYXIgcHJvcGVydHlcbiAgICovXG4gIHN0YXRpYyBmcm9tU3RyaW5nKHN0ciwgZGVzaWduU2V0KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9wZXJ0eShwYXJzZS5wcm9wZXJ0eShzdHIsIGRlc2lnblNldCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5Qcm9wZXJ0eSBpbnN0YW5jZS5cbiAgICpcbiAgICogSXQgaXMgaW1wb3J0YW50IHRvIG5vdGUgdGhhdCBtdXRhdGlvbnMgZG9uZSBpbiB0aGUgd3JhcHBlciBkaXJlY3RseSBtdXRhdGUgdGhlIGpDYWwgb2JqZWN0IHVzZWRcbiAgICogdG8gaW5pdGlhbGl6ZS5cbiAgICpcbiAgICogQ2FuIGFsc28gYmUgdXNlZCB0byBjcmVhdGUgbmV3IHByb3BlcnRpZXMgYnkgcGFzc2luZyB0aGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgKGFzIGEgU3RyaW5nKS5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheXxTdHJpbmd9IGpDYWwgICAgICAgICBSYXcgakNhbCByZXByZXNlbnRhdGlvbiBPUiB0aGUgbmV3IG5hbWUgb2YgdGhlIHByb3BlcnR5XG4gICAqIEBwYXJhbSB7Q29tcG9uZW50PX0gcGFyZW50ICAgICAgICAgUGFyZW50IGNvbXBvbmVudFxuICAgKi9cbiAgY29uc3RydWN0b3IoakNhbCwgcGFyZW50KSB7XG4gICAgdGhpcy5fcGFyZW50ID0gcGFyZW50IHx8IG51bGw7XG5cbiAgICBpZiAodHlwZW9mKGpDYWwpID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gV2UgYXJlIGNyZWF0aW5nIHRoZSBwcm9wZXJ0eSBieSBuYW1lIGFuZCBuZWVkIHRvIGRldGVjdCB0aGUgdHlwZVxuICAgICAgdGhpcy5qQ2FsID0gW2pDYWwsIHt9LCBkZXNpZ24uZGVmYXVsdFR5cGVdO1xuICAgICAgdGhpcy5qQ2FsW1RZUEVfSU5ERVhdID0gdGhpcy5nZXREZWZhdWx0VHlwZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmpDYWwgPSBqQ2FsO1xuICAgIH1cbiAgICB0aGlzLl91cGRhdGVUeXBlKCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHZhbHVlIHR5cGUgZm9yIHRoaXMgcHJvcGVydHlcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCB0eXBlKCkge1xuICAgIHJldHVybiB0aGlzLmpDYWxbVFlQRV9JTkRFWF07XG4gIH1cblxuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhpcyBwcm9wZXJ0eSwgaW4gbG93ZXJjYXNlLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuakNhbFtOQU1FX0lOREVYJDFdO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBwYXJlbnQgY29tcG9uZW50IGZvciB0aGlzIHByb3BlcnR5LlxuICAgKiBAdHlwZSB7Q29tcG9uZW50fVxuICAgKi9cbiAgZ2V0IHBhcmVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFyZW50O1xuICB9XG5cbiAgc2V0IHBhcmVudChwKSB7XG4gICAgLy8gQmVmb3JlIHNldHRpbmcgdGhlIHBhcmVudCwgY2hlY2sgaWYgdGhlIGRlc2lnbiBzZXQgaGFzIGNoYW5nZWQuIElmIGl0XG4gICAgLy8gaGFzLCB3ZSBsYXRlciBuZWVkIHRvIHVwZGF0ZSB0aGUgdHlwZSBpZiBpdCB3YXMgdW5rbm93biBiZWZvcmUuXG4gICAgbGV0IGRlc2lnblNldENoYW5nZWQgPSAhdGhpcy5fcGFyZW50IHx8IChwICYmIHAuX2Rlc2lnblNldCAhPSB0aGlzLl9wYXJlbnQuX2Rlc2lnblNldCk7XG5cbiAgICB0aGlzLl9wYXJlbnQgPSBwO1xuXG4gICAgaWYgKHRoaXMudHlwZSA9PSBkZXNpZ24uZGVmYXVsdFR5cGUgJiYgZGVzaWduU2V0Q2hhbmdlZCkge1xuICAgICAgdGhpcy5qQ2FsW1RZUEVfSU5ERVhdID0gdGhpcy5nZXREZWZhdWx0VHlwZSgpO1xuICAgICAgdGhpcy5fdXBkYXRlVHlwZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZGVzaWduIHNldCBmb3IgdGhpcyBwcm9wZXJ0eSwgZS5nLiBpY2FsZW5kYXIgdnMgdmNhcmRcbiAgICpcbiAgICogQHR5cGUge2Rlc2lnblNldH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldCBfZGVzaWduU2V0KCkge1xuICAgIHJldHVybiB0aGlzLnBhcmVudCA/IHRoaXMucGFyZW50Ll9kZXNpZ25TZXQgOiBkZXNpZ24uZGVmYXVsdFNldDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSB0eXBlIG1ldGFkYXRhIGZyb20gdGhlIGN1cnJlbnQgakNhbCB0eXBlIGFuZCBkZXNpZ24gc2V0LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3VwZGF0ZVR5cGUoKSB7XG4gICAgbGV0IGRlc2lnblNldCA9IHRoaXMuX2Rlc2lnblNldDtcblxuICAgIGlmICh0aGlzLnR5cGUgaW4gZGVzaWduU2V0LnZhbHVlKSB7XG4gICAgICBpZiAoJ2RlY29yYXRlJyBpbiBkZXNpZ25TZXQudmFsdWVbdGhpcy50eXBlXSkge1xuICAgICAgICB0aGlzLmlzRGVjb3JhdGVkID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaXNEZWNvcmF0ZWQgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMubmFtZSBpbiBkZXNpZ25TZXQucHJvcGVydHkpIHtcbiAgICAgICAgdGhpcy5pc011bHRpVmFsdWUgPSAoJ211bHRpVmFsdWUnIGluIGRlc2lnblNldC5wcm9wZXJ0eVt0aGlzLm5hbWVdKTtcbiAgICAgICAgdGhpcy5pc1N0cnVjdHVyZWRWYWx1ZSA9ICgnc3RydWN0dXJlZFZhbHVlJyBpbiBkZXNpZ25TZXQucHJvcGVydHlbdGhpcy5uYW1lXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEh5ZHJhdGUgYSBzaW5nbGUgdmFsdWUuIFRoZSBhY3Qgb2YgaHlkcmF0aW5nIG1lYW5zIHR1cm5pbmcgdGhlIHJhdyBqQ2FsXG4gICAqIHZhbHVlIGludG8gYSBwb3RlbnRpYWxseSB3cmFwcGVkIG9iamVjdCwgZm9yIGV4YW1wbGUge0BsaW5rIElDQUwuVGltZX0uXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleCAgICAgICAgVGhlIGluZGV4IG9mIHRoZSB2YWx1ZSB0byBoeWRyYXRlXG4gICAqIEByZXR1cm4gez9PYmplY3R9ICAgICAgICAgICAgIFRoZSBkZWNvcmF0ZWQgdmFsdWUuXG4gICAqL1xuICBfaHlkcmF0ZVZhbHVlKGluZGV4KSB7XG4gICAgaWYgKHRoaXMuX3ZhbHVlcyAmJiB0aGlzLl92YWx1ZXNbaW5kZXhdKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdmFsdWVzW2luZGV4XTtcbiAgICB9XG5cbiAgICAvLyBmb3IgdGhlIGNhc2Ugd2hlcmUgdGhlcmUgaXMgbm8gdmFsdWUuXG4gICAgaWYgKHRoaXMuakNhbC5sZW5ndGggPD0gKFZBTFVFX0lOREVYICsgaW5kZXgpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc0RlY29yYXRlZCkge1xuICAgICAgaWYgKCF0aGlzLl92YWx1ZXMpIHtcbiAgICAgICAgdGhpcy5fdmFsdWVzID0gW107XG4gICAgICB9XG4gICAgICByZXR1cm4gKHRoaXMuX3ZhbHVlc1tpbmRleF0gPSB0aGlzLl9kZWNvcmF0ZShcbiAgICAgICAgdGhpcy5qQ2FsW1ZBTFVFX0lOREVYICsgaW5kZXhdXG4gICAgICApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuakNhbFtWQUxVRV9JTkRFWCArIGluZGV4XTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGVjb3JhdGUgYSBzaW5nbGUgdmFsdWUsIHJldHVybmluZyBpdHMgd3JhcHBlZCBvYmplY3QuIFRoaXMgaXMgdXNlZCBieVxuICAgKiB0aGUgaHlkcmF0ZSBmdW5jdGlvbiB0byBhY3R1YWxseSB3cmFwIHRoZSB2YWx1ZS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHs/fSB2YWx1ZSAgICAgICAgIFRoZSB2YWx1ZSB0byBkZWNvcmF0ZVxuICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgVGhlIGRlY29yYXRlZCB2YWx1ZVxuICAgKi9cbiAgX2RlY29yYXRlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Rlc2lnblNldC52YWx1ZVt0aGlzLnR5cGVdLmRlY29yYXRlKHZhbHVlLCB0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbmRlY29yYXRlIGEgc2luZ2xlIHZhbHVlLCByZXR1cm5pbmcgaXRzIHJhdyBqQ2FsIGRhdGEuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZSAgICAgICAgIFRoZSB2YWx1ZSB0byB1bmRlY29yYXRlXG4gICAqIEByZXR1cm4gez99ICAgICAgICAgICAgICAgICAgIFRoZSB1bmRlY29yYXRlZCB2YWx1ZVxuICAgKi9cbiAgX3VuZGVjb3JhdGUodmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5fZGVzaWduU2V0LnZhbHVlW3RoaXMudHlwZV0udW5kZWNvcmF0ZSh2YWx1ZSwgdGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWUgYXQgdGhlIGdpdmVuIGluZGV4IHdoaWxlIGFsc28gaHlkcmF0aW5nIGl0LiBUaGUgcGFzc2VkXG4gICAqIHZhbHVlIGNhbiBlaXRoZXIgYmUgYSBkZWNvcmF0ZWQgb3IgdW5kZWNvcmF0ZWQgdmFsdWUuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7P30gdmFsdWUgICAgICAgICAgICAgVGhlIHZhbHVlIHRvIHNldFxuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXggICAgICAgIFRoZSBpbmRleCB0byBzZXQgaXQgYXRcbiAgICovXG4gIF9zZXREZWNvcmF0ZWRWYWx1ZSh2YWx1ZSwgaW5kZXgpIHtcbiAgICBpZiAoIXRoaXMuX3ZhbHVlcykge1xuICAgICAgdGhpcy5fdmFsdWVzID0gW107XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZih2YWx1ZSkgPT09ICdvYmplY3QnICYmICdpY2FsdHlwZScgaW4gdmFsdWUpIHtcbiAgICAgIC8vIGRlY29yYXRlZCB2YWx1ZVxuICAgICAgdGhpcy5qQ2FsW1ZBTFVFX0lOREVYICsgaW5kZXhdID0gdGhpcy5fdW5kZWNvcmF0ZSh2YWx1ZSk7XG4gICAgICB0aGlzLl92YWx1ZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHVuZGVjb3JhdGVkIHZhbHVlXG4gICAgICB0aGlzLmpDYWxbVkFMVUVfSU5ERVggKyBpbmRleF0gPSB2YWx1ZTtcbiAgICAgIHRoaXMuX3ZhbHVlc1tpbmRleF0gPSB0aGlzLl9kZWNvcmF0ZSh2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYSBwYXJhbWV0ZXIgb24gdGhlIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gICAgICAgIG5hbWUgICBQYXJhbWV0ZXIgbmFtZSAobG93ZXJjYXNlKVxuICAgKiBAcmV0dXJuIHtBcnJheXxTdHJpbmd9ICAgICAgICBQYXJhbWV0ZXIgdmFsdWVcbiAgICovXG4gIGdldFBhcmFtZXRlcihuYW1lKSB7XG4gICAgaWYgKG5hbWUgaW4gdGhpcy5qQ2FsW1BST1BfSU5ERVhdKSB7XG4gICAgICByZXR1cm4gdGhpcy5qQ2FsW1BST1BfSU5ERVhdW25hbWVdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGZpcnN0IHBhcmFtZXRlciBvbiB0aGUgcHJvcGVydHkuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSAgICAgICAgbmFtZSAgIFBhcmFtZXRlciBuYW1lIChsb3dlcmNhc2UpXG4gICAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgIFBhcmFtZXRlciB2YWx1ZVxuICAgKi9cbiAgZ2V0Rmlyc3RQYXJhbWV0ZXIobmFtZSkge1xuICAgIGxldCBwYXJhbWV0ZXJzID0gdGhpcy5nZXRQYXJhbWV0ZXIobmFtZSk7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShwYXJhbWV0ZXJzKSkge1xuICAgICAgcmV0dXJuIHBhcmFtZXRlcnNbMF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcmFtZXRlcnM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBhIHBhcmFtZXRlciBvbiB0aGUgcHJvcGVydHkuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSAgICAgICBuYW1lICAgICBUaGUgcGFyYW1ldGVyIG5hbWVcbiAgICogQHBhcmFtIHtBcnJheXxTdHJpbmd9IHZhbHVlICAgIFRoZSBwYXJhbWV0ZXIgdmFsdWVcbiAgICovXG4gIHNldFBhcmFtZXRlcihuYW1lLCB2YWx1ZSkge1xuICAgIGxldCBsY25hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICBsY25hbWUgaW4gdGhpcy5fZGVzaWduU2V0LnBhcmFtICYmXG4gICAgICAgICdtdWx0aVZhbHVlJyBpbiB0aGlzLl9kZXNpZ25TZXQucGFyYW1bbGNuYW1lXSkge1xuICAgICAgICB2YWx1ZSA9IFt2YWx1ZV07XG4gICAgfVxuICAgIHRoaXMuakNhbFtQUk9QX0lOREVYXVtuYW1lXSA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBwYXJhbWV0ZXJcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgICAgIFRoZSBwYXJhbWV0ZXIgbmFtZVxuICAgKi9cbiAgcmVtb3ZlUGFyYW1ldGVyKG5hbWUpIHtcbiAgICBkZWxldGUgdGhpcy5qQ2FsW1BST1BfSU5ERVhdW25hbWVdO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZGVmYXVsdCB0eXBlIGJhc2VkIG9uIHRoaXMgcHJvcGVydHkncyBuYW1lLlxuICAgKlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICBUaGUgZGVmYXVsdCB0eXBlIGZvciB0aGlzIHByb3BlcnR5XG4gICAqL1xuICBnZXREZWZhdWx0VHlwZSgpIHtcbiAgICBsZXQgbmFtZSA9IHRoaXMuakNhbFtOQU1FX0lOREVYJDFdO1xuICAgIGxldCBkZXNpZ25TZXQgPSB0aGlzLl9kZXNpZ25TZXQ7XG5cbiAgICBpZiAobmFtZSBpbiBkZXNpZ25TZXQucHJvcGVydHkpIHtcbiAgICAgIGxldCBkZXRhaWxzID0gZGVzaWduU2V0LnByb3BlcnR5W25hbWVdO1xuICAgICAgaWYgKCdkZWZhdWx0VHlwZScgaW4gZGV0YWlscykge1xuICAgICAgICByZXR1cm4gZGV0YWlscy5kZWZhdWx0VHlwZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRlc2lnbi5kZWZhdWx0VHlwZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHR5cGUgb2YgcHJvcGVydHkgYW5kIGNsZWFycyBvdXQgYW55IGV4aXN0aW5nIHZhbHVlcyBvZiB0aGUgY3VycmVudFxuICAgKiB0eXBlLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAgICAgTmV3IGlDQUwgdHlwZSAoc2VlIGRlc2lnbi4qLnZhbHVlcylcbiAgICovXG4gIHJlc2V0VHlwZSh0eXBlKSB7XG4gICAgdGhpcy5yZW1vdmVBbGxWYWx1ZXMoKTtcbiAgICB0aGlzLmpDYWxbVFlQRV9JTkRFWF0gPSB0eXBlO1xuICAgIHRoaXMuX3VwZGF0ZVR5cGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyB0aGUgZmlyc3QgcHJvcGVydHkgdmFsdWUuXG4gICAqXG4gICAqIEByZXR1cm4ge0JpbmFyeSB8IER1cmF0aW9uIHwgUGVyaW9kIHxcbiAgICogUmVjdXIgfCBUaW1lIHwgVXRjT2Zmc2V0IHwgR2VvIHwgc3RyaW5nIHwgbnVsbH0gICAgICAgICBGaXJzdCBwcm9wZXJ0eSB2YWx1ZVxuICAgKi9cbiAgZ2V0Rmlyc3RWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5faHlkcmF0ZVZhbHVlKDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYWxsIHZhbHVlcyBvbiB0aGUgcHJvcGVydHkuXG4gICAqXG4gICAqIE5PVEU6IHRoaXMgY3JlYXRlcyBhbiBhcnJheSBkdXJpbmcgZWFjaCBjYWxsLlxuICAgKlxuICAgKiBAcmV0dXJuIHtBcnJheX0gICAgICAgICAgTGlzdCBvZiB2YWx1ZXNcbiAgICovXG4gIGdldFZhbHVlcygpIHtcbiAgICBsZXQgbGVuID0gdGhpcy5qQ2FsLmxlbmd0aCAtIFZBTFVFX0lOREVYO1xuXG4gICAgaWYgKGxlbiA8IDEpIHtcbiAgICAgIC8vIGl0IGlzIHBvc3NpYmxlIGZvciBhIHByb3BlcnR5IHRvIGhhdmUgbm8gdmFsdWUuXG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCByZXN1bHQgPSBbXTtcblxuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHJlc3VsdFtpXSA9IHRoaXMuX2h5ZHJhdGVWYWx1ZShpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYWxsIHZhbHVlcyBmcm9tIHRoaXMgcHJvcGVydHlcbiAgICovXG4gIHJlbW92ZUFsbFZhbHVlcygpIHtcbiAgICBpZiAodGhpcy5fdmFsdWVzKSB7XG4gICAgICB0aGlzLl92YWx1ZXMubGVuZ3RoID0gMDtcbiAgICB9XG4gICAgdGhpcy5qQ2FsLmxlbmd0aCA9IDM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWVzIG9mIHRoZSBwcm9wZXJ0eS4gIFdpbGwgb3ZlcndyaXRlIHRoZSBleGlzdGluZyB2YWx1ZXMuXG4gICAqIFRoaXMgY2FuIG9ubHkgYmUgdXNlZCBmb3IgbXVsdGktdmFsdWUgcHJvcGVydGllcy5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gdmFsdWVzICAgIEFuIGFycmF5IG9mIHZhbHVlc1xuICAgKi9cbiAgc2V0VmFsdWVzKHZhbHVlcykge1xuICAgIGlmICghdGhpcy5pc011bHRpVmFsdWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgdGhpcy5uYW1lICsgJzogZG9lcyBub3Qgbm90IHN1cHBvcnQgbXVsaXRWYWx1ZS5cXG4nICtcbiAgICAgICAgJ292ZXJyaWRlIGlzTXVsdGlWYWx1ZSdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IGxlbiA9IHZhbHVlcy5sZW5ndGg7XG4gICAgbGV0IGkgPSAwO1xuICAgIHRoaXMucmVtb3ZlQWxsVmFsdWVzKCk7XG5cbiAgICBpZiAobGVuID4gMCAmJlxuICAgICAgICB0eXBlb2YodmFsdWVzWzBdKSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgJ2ljYWx0eXBlJyBpbiB2YWx1ZXNbMF0pIHtcbiAgICAgIHRoaXMucmVzZXRUeXBlKHZhbHVlc1swXS5pY2FsdHlwZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNEZWNvcmF0ZWQpIHtcbiAgICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdGhpcy5fc2V0RGVjb3JhdGVkVmFsdWUodmFsdWVzW2ldLCBpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB0aGlzLmpDYWxbVkFMVUVfSU5ERVggKyBpXSA9IHZhbHVlc1tpXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgcHJvcGVydHkuIElmIHRoaXMgaXMgYSBtdWx0aS12YWx1ZVxuICAgKiBwcm9wZXJ0eSwgYWxsIG90aGVyIHZhbHVlcyB3aWxsIGJlIHJlbW92ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gdmFsdWUgICAgIE5ldyBwcm9wZXJ0eSB2YWx1ZS5cbiAgICovXG4gIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgdGhpcy5yZW1vdmVBbGxWYWx1ZXMoKTtcbiAgICBpZiAodHlwZW9mKHZhbHVlKSA9PT0gJ29iamVjdCcgJiYgJ2ljYWx0eXBlJyBpbiB2YWx1ZSkge1xuICAgICAgdGhpcy5yZXNldFR5cGUodmFsdWUuaWNhbHR5cGUpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzRGVjb3JhdGVkKSB7XG4gICAgICB0aGlzLl9zZXREZWNvcmF0ZWRWYWx1ZSh2YWx1ZSwgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuakNhbFtWQUxVRV9JTkRFWF0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgT2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgY29tcG9uZW50LiBUaGUgcmV0dXJuZWQgb2JqZWN0XG4gICAqIGlzIGEgbGl2ZSBqQ2FsIG9iamVjdCBhbmQgc2hvdWxkIGJlIGNsb25lZCBpZiBtb2RpZmllZC5cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB0aGlzLmpDYWw7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGNvbXBvbmVudC5cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgdG9JQ0FMU3RyaW5nKCkge1xuICAgIHJldHVybiBzdHJpbmdpZnkucHJvcGVydHkoXG4gICAgICB0aGlzLmpDYWwsIHRoaXMuX2Rlc2lnblNldCwgdHJ1ZVxuICAgICk7XG4gIH1cbn1cblxuLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cblxuLyoqXG4gKiBUaGlzIGxldHMgdHlwZXNjcmlwdCByZXNvbHZlIG91ciBjdXN0b20gdHlwZXMgaW4gdGhlXG4gKiBnZW5lcmF0ZWQgZC50cyBmaWxlcyAoanNkb2MgdHlwZWRlZnMgYXJlIGNvbnZlcnRlZCB0byB0eXBlc2NyaXB0IHR5cGVzKS5cbiAqIElnbm9yZSBwcmV2ZW50cyB0aGUgdHlwZWRlZnMgZnJvbSBiZWluZyBkb2N1bWVudGVkIG1vcmUgdGhhbiBvbmNlLlxuICogQGlnbm9yZVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vdHlwZXMuanNcIikuZGVzaWduU2V0fSBkZXNpZ25TZXRcbiAqIEltcG9ydHMgdGhlICdkZXNpZ25TZXQnIHR5cGUgZnJvbSB0aGUgXCJ0eXBlcy5qc1wiIG1vZHVsZVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vdHlwZXMuanNcIikuR2VvfSBHZW9cbiAqIEltcG9ydHMgdGhlICdHZW8nIHR5cGUgZnJvbSB0aGUgXCJ0eXBlcy5qc1wiIG1vZHVsZVxuICovXG5cbmNvbnN0IE5BTUVfSU5ERVggPSAwO1xuY29uc3QgUFJPUEVSVFlfSU5ERVggPSAxO1xuY29uc3QgQ09NUE9ORU5UX0lOREVYID0gMjtcblxuY29uc3QgUFJPUEVSVFlfTkFNRV9JTkRFWCA9IDA7XG5jb25zdCBQUk9QRVJUWV9WQUxVRV9JTkRFWCA9IDM7XG5cbi8qKlxuICogV3JhcHMgYSBqQ2FsIGNvbXBvbmVudCwgYWRkaW5nIGNvbnZlbmllbmNlIG1ldGhvZHMgdG8gYWRkLCByZW1vdmUgYW5kIHVwZGF0ZSBzdWJjb21wb25lbnRzIGFuZFxuICogcHJvcGVydGllcy5cbiAqXG4gKiBAbWVtYmVyb2YgSUNBTFxuICovXG5jbGFzcyBDb21wb25lbnQge1xuICAvKipcbiAgICogQ3JlYXRlIGFuIHtAbGluayBJQ0FMLkNvbXBvbmVudH0gYnkgcGFyc2luZyB0aGUgcGFzc2VkIGlDYWxlbmRhciBzdHJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgICAgICAgIFRoZSBpQ2FsZW5kYXIgc3RyaW5nIHRvIHBhcnNlXG4gICAqL1xuICBzdGF0aWMgZnJvbVN0cmluZyhzdHIpIHtcbiAgICByZXR1cm4gbmV3IENvbXBvbmVudChwYXJzZS5jb21wb25lbnQoc3RyKSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBDb21wb25lbnQgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl8U3RyaW5nfSBqQ2FsICAgICAgICAgUmF3IGpDYWwgY29tcG9uZW50IGRhdGEgT1IgbmFtZSBvZiBuZXdcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudFxuICAgKiBAcGFyYW0ge0NvbXBvbmVudD19IHBhcmVudCAgICAgUGFyZW50IGNvbXBvbmVudCB0byBhc3NvY2lhdGVcbiAgICovXG4gIGNvbnN0cnVjdG9yKGpDYWwsIHBhcmVudCkge1xuICAgIGlmICh0eXBlb2YoakNhbCkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBqQ2FsIHNwZWMgKG5hbWUsIHByb3BlcnRpZXMsIGNvbXBvbmVudHMpXG4gICAgICBqQ2FsID0gW2pDYWwsIFtdLCBbXV07XG4gICAgfVxuXG4gICAgLy8gbW9zdGx5IGZvciBsZWdhY3kgcmVhc29ucy5cbiAgICB0aGlzLmpDYWwgPSBqQ2FsO1xuXG4gICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQgfHwgbnVsbDtcblxuICAgIGlmICghdGhpcy5wYXJlbnQgJiYgdGhpcy5uYW1lID09PSAndmNhbGVuZGFyJykge1xuICAgICAgdGhpcy5fdGltZXpvbmVDYWNoZSA9IG5ldyBNYXAoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSHlkcmF0ZWQgcHJvcGVydGllcyBhcmUgaW5zZXJ0ZWQgaW50byB0aGUgX3Byb3BlcnRpZXMgYXJyYXkgYXQgdGhlIHNhbWVcbiAgICogcG9zaXRpb24gYXMgaW4gdGhlIGpDYWwgYXJyYXksIHNvIGl0IGlzIHBvc3NpYmxlIHRoYXQgdGhlIGFycmF5IGNvbnRhaW5zXG4gICAqIHVuZGVmaW5lZCB2YWx1ZXMgZm9yIHVuaHlkcmRhdGVkIHByb3BlcnRpZXMuIFRvIGF2b2lkIGl0ZXJhdGluZyB0aGVcbiAgICogYXJyYXkgd2hlbiBjaGVja2luZyBpZiBhbGwgcHJvcGVydGllcyBoYXZlIGJlZW4gaHlkcmF0ZWQsIHdlIHNhdmUgdGhlXG4gICAqIGNvdW50IGhlcmUuXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaHlkcmF0ZWRQcm9wZXJ0eUNvdW50ID0gMDtcblxuICAvKipcbiAgICogVGhlIHNhbWUgY291bnQgYXMgZm9yIF9oeWRyYXRlZFByb3BlcnR5Q291bnQsIGJ1dCBmb3Igc3ViY29tcG9uZW50c1xuICAgKlxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2h5ZHJhdGVkQ29tcG9uZW50Q291bnQgPSAwO1xuXG4gIC8qKlxuICAgKiBBIGNhY2hlIG9mIGh5ZHJhdGVkIHRpbWUgem9uZSBvYmplY3RzIHdoaWNoIG1heSBiZSB1c2VkIGJ5IGNvbnN1bWVycywga2V5ZWRcbiAgICogYnkgdGltZSB6b25lIElELlxuICAgKlxuICAgKiBAdHlwZSB7TWFwfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3RpbWV6b25lQ2FjaGUgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2NvbXBvbmVudHMgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Byb3BlcnRpZXMgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGlzIGNvbXBvbmVudFxuICAgKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuakNhbFtOQU1FX0lOREVYXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZGVzaWduIHNldCBmb3IgdGhpcyBjb21wb25lbnQsIGUuZy4gaWNhbGVuZGFyIHZzIHZjYXJkXG4gICAqXG4gICAqIEB0eXBlIHtkZXNpZ25TZXR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXQgX2Rlc2lnblNldCgpIHtcbiAgICBsZXQgcGFyZW50RGVzaWduID0gdGhpcy5wYXJlbnQgJiYgdGhpcy5wYXJlbnQuX2Rlc2lnblNldDtcbiAgICBpZiAoIXBhcmVudERlc2lnbiAmJiB0aGlzLm5hbWUgPT0gXCJ2Y2FyZFwiKSB7XG4gICAgICAvLyBXZSBjYW4ndCBkZWNpZGUgb24gdmNhcmQzIHZzIHZjYXJkNCBqdXN0IGJhc2VkIG9uIHRoZSBjb21wb25lbnQgbmFtZSwgdGhlIHZlcnNpb24gbnVtYmVyIGlzXG4gICAgICAvLyBpbiB0aGUgdmVyc2lvbiBwcm9wZXJ0eS4gV2UgYWxzbyBjYW4ndCB1c2UgaHlkcmF0ZWQgcHJvcGVydGllcyBoZXJlIGJlY2F1c2UgaXQgd291bGQgbGVhZFxuICAgICAgLy8gdG8gcmVjdXJzaW9uLCBidXQgdGhlIHNwZWMgc2F5cyB0aGF0IHRoZSB2ZXJzaW9uIHByb3BlcnR5IG5lZWRzIHRvIGJlIHRoZSB2ZXJ5IGZpcnN0IG9uZS5cbiAgICAgIGxldCB2ZXJzaW9uUHJvcCA9IHRoaXMuakNhbFtQUk9QRVJUWV9JTkRFWF0/LlswXTtcblxuICAgICAgaWYgKHZlcnNpb25Qcm9wICYmIHZlcnNpb25Qcm9wW1BST1BFUlRZX05BTUVfSU5ERVhdID09IFwidmVyc2lvblwiICYmIHZlcnNpb25Qcm9wW1BST1BFUlRZX1ZBTFVFX0lOREVYXSA9PSBcIjMuMFwiKSB7XG4gICAgICAgIHJldHVybiBkZXNpZ24uZ2V0RGVzaWduU2V0KFwidmNhcmQzXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwYXJlbnREZXNpZ24gfHwgZGVzaWduLmdldERlc2lnblNldCh0aGlzLm5hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaHlkcmF0ZUNvbXBvbmVudChpbmRleCkge1xuICAgIGlmICghdGhpcy5fY29tcG9uZW50cykge1xuICAgICAgdGhpcy5fY29tcG9uZW50cyA9IFtdO1xuICAgICAgdGhpcy5faHlkcmF0ZWRDb21wb25lbnRDb3VudCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2NvbXBvbmVudHNbaW5kZXhdKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29tcG9uZW50c1tpbmRleF07XG4gICAgfVxuXG4gICAgbGV0IGNvbXAgPSBuZXcgQ29tcG9uZW50KFxuICAgICAgdGhpcy5qQ2FsW0NPTVBPTkVOVF9JTkRFWF1baW5kZXhdLFxuICAgICAgdGhpc1xuICAgICk7XG5cbiAgICB0aGlzLl9oeWRyYXRlZENvbXBvbmVudENvdW50Kys7XG4gICAgcmV0dXJuICh0aGlzLl9jb21wb25lbnRzW2luZGV4XSA9IGNvbXApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaHlkcmF0ZVByb3BlcnR5KGluZGV4KSB7XG4gICAgaWYgKCF0aGlzLl9wcm9wZXJ0aWVzKSB7XG4gICAgICB0aGlzLl9wcm9wZXJ0aWVzID0gW107XG4gICAgICB0aGlzLl9oeWRyYXRlZFByb3BlcnR5Q291bnQgPSAwO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9wcm9wZXJ0aWVzW2luZGV4XSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Byb3BlcnRpZXNbaW5kZXhdO1xuICAgIH1cblxuICAgIGxldCBwcm9wID0gbmV3IFByb3BlcnR5KFxuICAgICAgdGhpcy5qQ2FsW1BST1BFUlRZX0lOREVYXVtpbmRleF0sXG4gICAgICB0aGlzXG4gICAgKTtcblxuICAgIHRoaXMuX2h5ZHJhdGVkUHJvcGVydHlDb3VudCsrO1xuICAgIHJldHVybiAodGhpcy5fcHJvcGVydGllc1tpbmRleF0gPSBwcm9wKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyBmaXJzdCBzdWIgY29tcG9uZW50LCBvcHRpb25hbGx5IGZpbHRlcmVkIGJ5IG5hbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nPX0gbmFtZSAgICAgICAgT3B0aW9uYWwgbmFtZSB0byBmaWx0ZXIgYnlcbiAgICogQHJldHVybiB7P0NvbXBvbmVudH0gICAgIFRoZSBmb3VuZCBzdWJjb21wb25lbnRcbiAgICovXG4gIGdldEZpcnN0U3ViY29tcG9uZW50KG5hbWUpIHtcbiAgICBpZiAobmFtZSkge1xuICAgICAgbGV0IGkgPSAwO1xuICAgICAgbGV0IGNvbXBzID0gdGhpcy5qQ2FsW0NPTVBPTkVOVF9JTkRFWF07XG4gICAgICBsZXQgbGVuID0gY29tcHMubGVuZ3RoO1xuXG4gICAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmIChjb21wc1tpXVtOQU1FX0lOREVYXSA9PT0gbmFtZSkge1xuICAgICAgICAgIGxldCByZXN1bHQgPSB0aGlzLl9oeWRyYXRlQ29tcG9uZW50KGkpO1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuakNhbFtDT01QT05FTlRfSU5ERVhdLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faHlkcmF0ZUNvbXBvbmVudCgwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBlbnN1cmUgd2UgcmV0dXJuIGEgdmFsdWUgKHN0cmljdCBtb2RlKVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmRzIGFsbCBzdWIgY29tcG9uZW50cywgb3B0aW9uYWxseSBmaWx0ZXJpbmcgYnkgbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmc9fSBuYW1lICAgICAgICAgICAgT3B0aW9uYWwgbmFtZSB0byBmaWx0ZXIgYnlcbiAgICogQHJldHVybiB7Q29tcG9uZW50W119ICAgICAgIFRoZSBmb3VuZCBzdWIgY29tcG9uZW50c1xuICAgKi9cbiAgZ2V0QWxsU3ViY29tcG9uZW50cyhuYW1lKSB7XG4gICAgbGV0IGpDYWxMZW4gPSB0aGlzLmpDYWxbQ09NUE9ORU5UX0lOREVYXS5sZW5ndGg7XG4gICAgbGV0IGkgPSAwO1xuXG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIGxldCBjb21wcyA9IHRoaXMuakNhbFtDT01QT05FTlRfSU5ERVhdO1xuICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuXG4gICAgICBmb3IgKDsgaSA8IGpDYWxMZW47IGkrKykge1xuICAgICAgICBpZiAobmFtZSA9PT0gY29tcHNbaV1bTkFNRV9JTkRFWF0pIHtcbiAgICAgICAgICByZXN1bHQucHVzaChcbiAgICAgICAgICAgIHRoaXMuX2h5ZHJhdGVDb21wb25lbnQoaSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXRoaXMuX2NvbXBvbmVudHMgfHxcbiAgICAgICAgICAodGhpcy5faHlkcmF0ZWRDb21wb25lbnRDb3VudCAhPT0gakNhbExlbikpIHtcbiAgICAgICAgZm9yICg7IGkgPCBqQ2FsTGVuOyBpKyspIHtcbiAgICAgICAgICB0aGlzLl9oeWRyYXRlQ29tcG9uZW50KGkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLl9jb21wb25lbnRzIHx8IFtdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgd2hlbiBhIG5hbWVkIHByb3BlcnR5IGV4aXN0cy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgICAgIFRoZSBwcm9wZXJ0eSBuYW1lXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgICBUcnVlLCB3aGVuIHByb3BlcnR5IGlzIGZvdW5kXG4gICAqL1xuICBoYXNQcm9wZXJ0eShuYW1lKSB7XG4gICAgbGV0IHByb3BzID0gdGhpcy5qQ2FsW1BST1BFUlRZX0lOREVYXTtcbiAgICBsZXQgbGVuID0gcHJvcHMubGVuZ3RoO1xuXG4gICAgbGV0IGkgPSAwO1xuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIC8vIDAgaXMgcHJvcGVydHkgbmFtZVxuICAgICAgaWYgKHByb3BzW2ldW05BTUVfSU5ERVhdID09PSBuYW1lKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyB0aGUgZmlyc3QgcHJvcGVydHksIG9wdGlvbmFsbHkgd2l0aCB0aGUgZ2l2ZW4gbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmc9fSBuYW1lICAgICAgICBMb3dlcmNhc2UgcHJvcGVydHkgbmFtZVxuICAgKiBAcmV0dXJuIHs/UHJvcGVydHl9ICAgICBUaGUgZm91bmQgcHJvcGVydHlcbiAgICovXG4gIGdldEZpcnN0UHJvcGVydHkobmFtZSkge1xuICAgIGlmIChuYW1lKSB7XG4gICAgICBsZXQgaSA9IDA7XG4gICAgICBsZXQgcHJvcHMgPSB0aGlzLmpDYWxbUFJPUEVSVFlfSU5ERVhdO1xuICAgICAgbGV0IGxlbiA9IHByb3BzLmxlbmd0aDtcblxuICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBpZiAocHJvcHNbaV1bTkFNRV9JTkRFWF0gPT09IG5hbWUpIHtcbiAgICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5faHlkcmF0ZVByb3BlcnR5KGkpO1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuakNhbFtQUk9QRVJUWV9JTkRFWF0ubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oeWRyYXRlUHJvcGVydHkoMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBmaXJzdCBwcm9wZXJ0eSdzIHZhbHVlLCBpZiBhdmFpbGFibGUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nPX0gbmFtZSAgICAgICAgICAgICAgICAgICAgTG93ZXJjYXNlIHByb3BlcnR5IG5hbWVcbiAgICogQHJldHVybiB7QmluYXJ5IHwgRHVyYXRpb24gfCBQZXJpb2QgfFxuICAgKiBSZWN1ciB8IFRpbWUgfCBVdGNPZmZzZXQgfCBHZW8gfCBzdHJpbmcgfCBudWxsfSAgICAgICAgIFRoZSBmb3VuZCBwcm9wZXJ0eSB2YWx1ZS5cbiAgICovXG4gIGdldEZpcnN0UHJvcGVydHlWYWx1ZShuYW1lKSB7XG4gICAgbGV0IHByb3AgPSB0aGlzLmdldEZpcnN0UHJvcGVydHkobmFtZSk7XG4gICAgaWYgKHByb3ApIHtcbiAgICAgIHJldHVybiBwcm9wLmdldEZpcnN0VmFsdWUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIHByb3BlcnRpZXMgaW4gdGhlIGNvbXBvbmVudCwgb3B0aW9uYWxseSBmaWx0ZXJlZCBieSBuYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZz19IG5hbWUgICAgICAgIExvd2VyY2FzZSBwcm9wZXJ0eSBuYW1lXG4gICAqIEByZXR1cm4ge1Byb3BlcnR5W119ICAgIExpc3Qgb2YgcHJvcGVydGllc1xuICAgKi9cbiAgZ2V0QWxsUHJvcGVydGllcyhuYW1lKSB7XG4gICAgbGV0IGpDYWxMZW4gPSB0aGlzLmpDYWxbUFJPUEVSVFlfSU5ERVhdLmxlbmd0aDtcbiAgICBsZXQgaSA9IDA7XG5cbiAgICBpZiAobmFtZSkge1xuICAgICAgbGV0IHByb3BzID0gdGhpcy5qQ2FsW1BST1BFUlRZX0lOREVYXTtcbiAgICAgIGxldCByZXN1bHQgPSBbXTtcblxuICAgICAgZm9yICg7IGkgPCBqQ2FsTGVuOyBpKyspIHtcbiAgICAgICAgaWYgKG5hbWUgPT09IHByb3BzW2ldW05BTUVfSU5ERVhdKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2goXG4gICAgICAgICAgICB0aGlzLl9oeWRyYXRlUHJvcGVydHkoaSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXRoaXMuX3Byb3BlcnRpZXMgfHxcbiAgICAgICAgICAodGhpcy5faHlkcmF0ZWRQcm9wZXJ0eUNvdW50ICE9PSBqQ2FsTGVuKSkge1xuICAgICAgICBmb3IgKDsgaSA8IGpDYWxMZW47IGkrKykge1xuICAgICAgICAgIHRoaXMuX2h5ZHJhdGVQcm9wZXJ0eShpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5fcHJvcGVydGllcyB8fCBbXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW1vdmVPYmplY3RCeUluZGV4KGpDYWxJbmRleCwgY2FjaGUsIGluZGV4KSB7XG4gICAgY2FjaGUgPSBjYWNoZSB8fCBbXTtcbiAgICAvLyByZW1vdmUgY2FjaGVkIHZlcnNpb25cbiAgICBpZiAoY2FjaGVbaW5kZXhdKSB7XG4gICAgICBsZXQgb2JqID0gY2FjaGVbaW5kZXhdO1xuICAgICAgaWYgKFwicGFyZW50XCIgaW4gb2JqKSB7XG4gICAgICAgICAgb2JqLnBhcmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2FjaGUuc3BsaWNlKGluZGV4LCAxKTtcblxuICAgIC8vIHJlbW92ZSBpdCBmcm9tIHRoZSBqQ2FsXG4gICAgdGhpcy5qQ2FsW2pDYWxJbmRleF0uc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3JlbW92ZU9iamVjdChqQ2FsSW5kZXgsIGNhY2hlLCBuYW1lT3JPYmplY3QpIHtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IG9iamVjdHMgPSB0aGlzLmpDYWxbakNhbEluZGV4XTtcbiAgICBsZXQgbGVuID0gb2JqZWN0cy5sZW5ndGg7XG4gICAgbGV0IGNhY2hlZCA9IHRoaXNbY2FjaGVdO1xuXG4gICAgaWYgKHR5cGVvZihuYW1lT3JPYmplY3QpID09PSAnc3RyaW5nJykge1xuICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBpZiAob2JqZWN0c1tpXVtOQU1FX0lOREVYXSA9PT0gbmFtZU9yT2JqZWN0KSB7XG4gICAgICAgICAgdGhpcy5fcmVtb3ZlT2JqZWN0QnlJbmRleChqQ2FsSW5kZXgsIGNhY2hlZCwgaSk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNhY2hlZCkge1xuICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBpZiAoY2FjaGVkW2ldICYmIGNhY2hlZFtpXSA9PT0gbmFtZU9yT2JqZWN0KSB7XG4gICAgICAgICAgdGhpcy5fcmVtb3ZlT2JqZWN0QnlJbmRleChqQ2FsSW5kZXgsIGNhY2hlZCwgaSk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW1vdmVBbGxPYmplY3RzKGpDYWxJbmRleCwgY2FjaGUsIG5hbWUpIHtcbiAgICBsZXQgY2FjaGVkID0gdGhpc1tjYWNoZV07XG5cbiAgICAvLyBVbmZvcnR1bmF0ZWx5IHdlIGhhdmUgdG8gcnVuIHRocm91Z2ggYWxsIGNoaWxkcmVuIHRvIHJlc2V0IHRoZWlyXG4gICAgLy8gcGFyZW50IHByb3BlcnR5LlxuICAgIGxldCBvYmplY3RzID0gdGhpcy5qQ2FsW2pDYWxJbmRleF07XG4gICAgbGV0IGkgPSBvYmplY3RzLmxlbmd0aCAtIDE7XG5cbiAgICAvLyBkZXNjZW5kaW5nIHNlYXJjaCByZXF1aXJlZCBiZWNhdXNlIHNwbGljZVxuICAgIC8vIGlzIHVzZWQgYW5kIHdpbGwgZWZmZWN0IHRoZSBpbmRpY2VzLlxuICAgIGZvciAoOyBpID49IDA7IGktLSkge1xuICAgICAgaWYgKCFuYW1lIHx8IG9iamVjdHNbaV1bTkFNRV9JTkRFWF0gPT09IG5hbWUpIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlT2JqZWN0QnlJbmRleChqQ2FsSW5kZXgsIGNhY2hlZCwgaSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBzaW5nbGUgc3ViIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtDb21wb25lbnR9IGNvbXBvbmVudCAgICAgICAgVGhlIGNvbXBvbmVudCB0byBhZGRcbiAgICogQHJldHVybiB7Q29tcG9uZW50fSAgICAgICAgICAgICAgICAgVGhlIHBhc3NlZCBpbiBjb21wb25lbnRcbiAgICovXG4gIGFkZFN1YmNvbXBvbmVudChjb21wb25lbnQpIHtcbiAgICBpZiAoIXRoaXMuX2NvbXBvbmVudHMpIHtcbiAgICAgIHRoaXMuX2NvbXBvbmVudHMgPSBbXTtcbiAgICAgIHRoaXMuX2h5ZHJhdGVkQ29tcG9uZW50Q291bnQgPSAwO1xuICAgIH1cblxuICAgIGlmIChjb21wb25lbnQucGFyZW50KSB7XG4gICAgICBjb21wb25lbnQucGFyZW50LnJlbW92ZVN1YmNvbXBvbmVudChjb21wb25lbnQpO1xuICAgIH1cblxuICAgIGxldCBpZHggPSB0aGlzLmpDYWxbQ09NUE9ORU5UX0lOREVYXS5wdXNoKGNvbXBvbmVudC5qQ2FsKTtcbiAgICB0aGlzLl9jb21wb25lbnRzW2lkeCAtIDFdID0gY29tcG9uZW50O1xuICAgIHRoaXMuX2h5ZHJhdGVkQ29tcG9uZW50Q291bnQrKztcbiAgICBjb21wb25lbnQucGFyZW50ID0gdGhpcztcbiAgICByZXR1cm4gY29tcG9uZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBzaW5nbGUgY29tcG9uZW50IGJ5IG5hbWUgb3IgdGhlIGluc3RhbmNlIG9mIGEgc3BlY2lmaWNcbiAgICogY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBvbmVudHxTdHJpbmd9IG5hbWVPckNvbXAgICAgTmFtZSBvZiBjb21wb25lbnQsIG9yIGNvbXBvbmVudFxuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgICAgICAgICAgICAgICAgICAgICBUcnVlIHdoZW4gY29tcCBpcyByZW1vdmVkXG4gICAqL1xuICByZW1vdmVTdWJjb21wb25lbnQobmFtZU9yQ29tcCkge1xuICAgIGxldCByZW1vdmVkID0gdGhpcy5fcmVtb3ZlT2JqZWN0KENPTVBPTkVOVF9JTkRFWCwgJ19jb21wb25lbnRzJywgbmFtZU9yQ29tcCk7XG4gICAgaWYgKHJlbW92ZWQpIHtcbiAgICAgIHRoaXMuX2h5ZHJhdGVkQ29tcG9uZW50Q291bnQtLTtcbiAgICB9XG4gICAgcmV0dXJuIHJlbW92ZWQ7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgY29tcG9uZW50cyBvciAoaWYgZ2l2ZW4pIGFsbCBjb21wb25lbnRzIGJ5IGEgcGFydGljdWxhclxuICAgKiBuYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZz19IG5hbWUgICAgICAgICAgICBMb3dlcmNhc2UgY29tcG9uZW50IG5hbWVcbiAgICovXG4gIHJlbW92ZUFsbFN1YmNvbXBvbmVudHMobmFtZSkge1xuICAgIGxldCByZW1vdmVkID0gdGhpcy5fcmVtb3ZlQWxsT2JqZWN0cyhDT01QT05FTlRfSU5ERVgsICdfY29tcG9uZW50cycsIG5hbWUpO1xuICAgIHRoaXMuX2h5ZHJhdGVkQ29tcG9uZW50Q291bnQgPSAwO1xuICAgIHJldHVybiByZW1vdmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYW4ge0BsaW5rIElDQUwuUHJvcGVydHl9IHRvIHRoZSBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UHJvcGVydHl9IHByb3BlcnR5ICAgICAgVGhlIHByb3BlcnR5IHRvIGFkZFxuICAgKiBAcmV0dXJuIHtQcm9wZXJ0eX0gICAgICAgICAgICAgIFRoZSBwYXNzZWQgaW4gcHJvcGVydHlcbiAgICovXG4gIGFkZFByb3BlcnR5KHByb3BlcnR5KSB7XG4gICAgaWYgKCEocHJvcGVydHkgaW5zdGFuY2VvZiBQcm9wZXJ0eSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ211c3QgYmUgaW5zdGFuY2Ugb2YgSUNBTC5Qcm9wZXJ0eScpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fcHJvcGVydGllcykge1xuICAgICAgdGhpcy5fcHJvcGVydGllcyA9IFtdO1xuICAgICAgdGhpcy5faHlkcmF0ZWRQcm9wZXJ0eUNvdW50ID0gMDtcbiAgICB9XG5cbiAgICBpZiAocHJvcGVydHkucGFyZW50KSB7XG4gICAgICBwcm9wZXJ0eS5wYXJlbnQucmVtb3ZlUHJvcGVydHkocHJvcGVydHkpO1xuICAgIH1cblxuICAgIGxldCBpZHggPSB0aGlzLmpDYWxbUFJPUEVSVFlfSU5ERVhdLnB1c2gocHJvcGVydHkuakNhbCk7XG4gICAgdGhpcy5fcHJvcGVydGllc1tpZHggLSAxXSA9IHByb3BlcnR5O1xuICAgIHRoaXMuX2h5ZHJhdGVkUHJvcGVydHlDb3VudCsrO1xuICAgIHByb3BlcnR5LnBhcmVudCA9IHRoaXM7XG4gICAgcmV0dXJuIHByb3BlcnR5O1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciBtZXRob2QgdG8gYWRkIGEgcHJvcGVydHkgd2l0aCBhIHZhbHVlIHRvIHRoZSBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSAgICAgICAgICAgICAgIG5hbWUgICAgICAgICBQcm9wZXJ0eSBuYW1lIHRvIGFkZFxuICAgKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ8T2JqZWN0fSB2YWx1ZSAgICAgICAgUHJvcGVydHkgdmFsdWVcbiAgICogQHJldHVybiB7UHJvcGVydHl9ICAgICAgICAgICAgICAgICAgICBUaGUgY3JlYXRlZCBwcm9wZXJ0eVxuICAgKi9cbiAgYWRkUHJvcGVydHlXaXRoVmFsdWUobmFtZSwgdmFsdWUpIHtcbiAgICBsZXQgcHJvcCA9IG5ldyBQcm9wZXJ0eShuYW1lKTtcbiAgICBwcm9wLnNldFZhbHVlKHZhbHVlKTtcblxuICAgIHRoaXMuYWRkUHJvcGVydHkocHJvcCk7XG5cbiAgICByZXR1cm4gcHJvcDtcbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgbWV0aG9kIHRoYXQgd2lsbCB1cGRhdGUgb3IgY3JlYXRlIGEgcHJvcGVydHkgb2YgdGhlIGdpdmVuIG5hbWVcbiAgICogYW5kIHNldHMgaXRzIHZhbHVlLiBJZiBtdWx0aXBsZSBwcm9wZXJ0aWVzIHdpdGggdGhlIGdpdmVuIG5hbWUgZXhpc3QsXG4gICAqIG9ubHkgdGhlIGZpcnN0IGlzIHVwZGF0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSAgICAgICAgICAgICAgIG5hbWUgICAgICAgICBQcm9wZXJ0eSBuYW1lIHRvIHVwZGF0ZVxuICAgKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ8T2JqZWN0fSB2YWx1ZSAgICAgICAgUHJvcGVydHkgdmFsdWVcbiAgICogQHJldHVybiB7UHJvcGVydHl9ICAgICAgICAgICAgICAgICAgICBUaGUgY3JlYXRlZCBwcm9wZXJ0eVxuICAgKi9cbiAgdXBkYXRlUHJvcGVydHlXaXRoVmFsdWUobmFtZSwgdmFsdWUpIHtcbiAgICBsZXQgcHJvcCA9IHRoaXMuZ2V0Rmlyc3RQcm9wZXJ0eShuYW1lKTtcblxuICAgIGlmIChwcm9wKSB7XG4gICAgICBwcm9wLnNldFZhbHVlKHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvcCA9IHRoaXMuYWRkUHJvcGVydHlXaXRoVmFsdWUobmFtZSwgdmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9wO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBzaW5nbGUgcHJvcGVydHkgYnkgbmFtZSBvciB0aGUgaW5zdGFuY2Ugb2YgdGhlIHNwZWNpZmljXG4gICAqIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xQcm9wZXJ0eX0gbmFtZU9yUHJvcCAgICAgUHJvcGVydHkgbmFtZSBvciBpbnN0YW5jZSB0byByZW1vdmVcbiAgICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgICAgICAgICAgICAgICAgICAgICAgVHJ1ZSwgd2hlbiBkZWxldGVkXG4gICAqL1xuICByZW1vdmVQcm9wZXJ0eShuYW1lT3JQcm9wKSB7XG4gICAgbGV0IHJlbW92ZWQgPSB0aGlzLl9yZW1vdmVPYmplY3QoUFJPUEVSVFlfSU5ERVgsICdfcHJvcGVydGllcycsIG5hbWVPclByb3ApO1xuICAgIGlmIChyZW1vdmVkKSB7XG4gICAgICB0aGlzLl9oeWRyYXRlZFByb3BlcnR5Q291bnQtLTtcbiAgICB9XG4gICAgcmV0dXJuIHJlbW92ZWQ7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgcHJvcGVydGllcyBhc3NvY2lhdGVkIHdpdGggdGhpcyBjb21wb25lbnQsIG9wdGlvbmFsbHlcbiAgICogZmlsdGVyZWQgYnkgbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmc9fSBuYW1lICAgICAgICBMb3dlcmNhc2UgcHJvcGVydHkgbmFtZVxuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgICAgIFRydWUsIHdoZW4gZGVsZXRlZFxuICAgKi9cbiAgcmVtb3ZlQWxsUHJvcGVydGllcyhuYW1lKSB7XG4gICAgbGV0IHJlbW92ZWQgPSB0aGlzLl9yZW1vdmVBbGxPYmplY3RzKFBST1BFUlRZX0lOREVYLCAnX3Byb3BlcnRpZXMnLCBuYW1lKTtcbiAgICB0aGlzLl9oeWRyYXRlZFByb3BlcnR5Q291bnQgPSAwO1xuICAgIHJldHVybiByZW1vdmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIE9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGNvbXBvbmVudC4gVGhlIHJldHVybmVkIG9iamVjdFxuICAgKiBpcyBhIGxpdmUgakNhbCBvYmplY3QgYW5kIHNob3VsZCBiZSBjbG9uZWQgaWYgbW9kaWZpZWQuXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy5qQ2FsO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBjb21wb25lbnQuXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiBzdHJpbmdpZnkuY29tcG9uZW50KFxuICAgICAgdGhpcy5qQ2FsLCB0aGlzLl9kZXNpZ25TZXRcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIGEgdGltZSB6b25lIGRlZmluaXRpb24gZnJvbSB0aGUgY29tcG9uZW50IHRyZWUsIGlmIGFueSBpcyBwcmVzZW50LlxuICAgKiBJZiB0aGUgdHJlZSBjb250YWlucyBubyB0aW1lIHpvbmUgZGVmaW5pdGlvbnMgb3IgdGhlIFRaSUQgY2Fubm90IGJlXG4gICAqIG1hdGNoZWQsIHJldHVybnMgbnVsbC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR6aWQgICAgIFRoZSBJRCBvZiB0aGUgdGltZSB6b25lIHRvIHJldHJpZXZlXG4gICAqIEByZXR1cm4ge1RpbWV6b25lfSAgVGhlIHRpbWUgem9uZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBJRCwgb3IgbnVsbFxuICAgKi9cbiAgZ2V0VGltZVpvbmVCeUlEKHR6aWQpIHtcbiAgICAvLyBWVElNRVpPTkUgY29tcG9uZW50cyBjYW4gb25seSBhcHBlYXIgYXMgYSBjaGlsZCBvZiB0aGUgVkNBTEVOREFSXG4gICAgLy8gY29tcG9uZW50OyB3YWxrIHRoZSB0cmVlIGlmIHdlJ3JlIG5vdCB0aGUgcm9vdC5cbiAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXRUaW1lWm9uZUJ5SUQodHppZCk7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gdGltZSB6b25lIGNhY2hlLCB3ZSBhcmUgcHJvYmFibHkgcGFyc2luZyBhbiBpbmNvbXBsZXRlXG4gICAgLy8gZmlsZSBhbmQgd2lsbCBoYXZlIG5vIHRpbWUgem9uZSBkZWZpbml0aW9ucy5cbiAgICBpZiAoIXRoaXMuX3RpbWV6b25lQ2FjaGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl90aW1lem9uZUNhY2hlLmhhcyh0emlkKSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3RpbWV6b25lQ2FjaGUuZ2V0KHR6aWQpO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSB0aW1lIHpvbmUgaXMgbm90IGFscmVhZHkgY2FjaGVkLCBoeWRyYXRlIGl0IGZyb20gdGhlXG4gICAgLy8gc3ViY29tcG9uZW50cy5cbiAgICBjb25zdCB6b25lcyA9IHRoaXMuZ2V0QWxsU3ViY29tcG9uZW50cygndnRpbWV6b25lJyk7XG4gICAgZm9yIChjb25zdCB6b25lIG9mIHpvbmVzKSB7XG4gICAgICBpZiAoem9uZS5nZXRGaXJzdFByb3BlcnR5KCd0emlkJykuZ2V0Rmlyc3RWYWx1ZSgpID09PSB0emlkKSB7XG4gICAgICAgIGNvbnN0IGh5ZHJhdGVkWm9uZSA9IG5ldyBUaW1lem9uZSh7XG4gICAgICAgICAgY29tcG9uZW50OiB6b25lLFxuICAgICAgICAgIHR6aWQ6IHR6aWQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuX3RpbWV6b25lQ2FjaGUuc2V0KHR6aWQsIGh5ZHJhdGVkWm9uZSk7XG5cbiAgICAgICAgcmV0dXJuIGh5ZHJhdGVkWm9uZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQZXIgdGhlIHN0YW5kYXJkLCB3ZSBzaG91bGQgYWx3YXlzIGhhdmUgYSB0aW1lIHpvbmUgZGVmaW5lZCBpbiBhIGZpbGVcbiAgICAvLyBmb3IgYW55IHJlZmVyZW5jZWQgVFpJRCwgYnV0IGRvbid0IGJsb3cgdXAgaWYgdGhlIGZpbGUgaXMgaW52YWxpZC5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG4vKipcbiAqIFByaW1hcnkgY2xhc3MgZm9yIGV4cGFuZGluZyByZWN1cnJpbmcgcnVsZXMuICBDYW4gdGFrZSBtdWx0aXBsZSBycnVsZXMsIHJkYXRlcywgZXhkYXRlKHMpIGFuZFxuICogaXRlcmF0ZSAoaW4gb3JkZXIpIG92ZXIgZWFjaCBuZXh0IG9jY3VycmVuY2UuXG4gKlxuICogT25jZSBpbml0aWFsaXplZCB0aGlzIGNsYXNzIGNhbiBhbHNvIGJlIHNlcmlhbGl6ZWQgc2F2ZWQgYW5kIGNvbnRpbnVlIGl0ZXJhdGlvbiBmcm9tIHRoZSBsYXN0XG4gKiBwb2ludC5cbiAqXG4gKiBOT1RFOiBpdCBpcyBpbnRlbmRlZCB0aGF0IHRoaXMgY2xhc3MgaXMgdG8gYmUgdXNlZCB3aXRoIHtAbGluayBJQ0FMLkV2ZW50fSB3aGljaCBoYW5kbGVzIHJlY3VycmVuY2VcbiAqIGV4Y2VwdGlvbnMuXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIGFzc3VtaW5nIGV2ZW50IGlzIGEgcGFyc2VkIGljYWwgY29tcG9uZW50XG4gKiB2YXIgZXZlbnQ7XG4gKlxuICogdmFyIGV4cGFuZCA9IG5ldyBJQ0FMLlJlY3VyRXhwYW5zaW9uKHtcbiAqICAgY29tcG9uZW50OiBldmVudCxcbiAqICAgZHRzdGFydDogZXZlbnQuZ2V0Rmlyc3RQcm9wZXJ0eVZhbHVlKCdkdHN0YXJ0JylcbiAqIH0pO1xuICpcbiAqIC8vIHJlbWVtYmVyIHRoZXJlIGFyZSBpbmZpbml0ZSBydWxlcyBzbyBpdCBpcyBhIGdvb2QgaWRlYSB0byBsaW1pdCB0aGUgc2NvcGUgb2YgdGhlIGl0ZXJhdGlvbnNcbiAqIC8vIHRoZW4gcmVzdW1lIGxhdGVyIG9uLlxuICpcbiAqIC8vIG5leHQgaXMgYWx3YXlzIGFuIElDQUwuVGltZSBvciBudWxsXG4gKiB2YXIgbmV4dDtcbiAqXG4gKiB3aGlsZSAoc29tZUNvbmRpdGlvbiAmJiAobmV4dCA9IGV4cGFuZC5uZXh0KCkpKSB7XG4gKiAgIC8vIGRvIHNvbWV0aGluZyB3aXRoIG5leHRcbiAqIH1cbiAqXG4gKiAvLyBzYXZlIGluc3RhbmNlIGZvciBsYXRlclxuICogdmFyIGpzb24gPSBKU09OLnN0cmluZ2lmeShleHBhbmQpO1xuICpcbiAqIC8vLi4uXG4gKlxuICogLy8gTk9URTogaWYgdGhlIGNvbXBvbmVudCdzIHByb3BlcnRpZXMgaGF2ZSBjaGFuZ2VkIHlvdSB3aWxsIG5lZWQgdG8gcmVidWlsZCB0aGUgY2xhc3MgYW5kIHN0YXJ0XG4gKiAvLyBvdmVyLiBUaGlzIG9ubHkgd29ya3Mgd2hlbiB0aGUgY29tcG9uZW50J3MgcmVjdXJyZW5jZSBpbmZvIGlzIHRoZSBzYW1lLlxuICogdmFyIGV4cGFuZCA9IG5ldyBJQ0FMLlJlY3VyRXhwYW5zaW9uKEpTT04ucGFyc2UoanNvbikpO1xuICpcbiAqIEBtZW1iZXJvZiBJQ0FMXG4gKi9cbmNsYXNzIFJlY3VyRXhwYW5zaW9uIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgSUNBTC5SZWN1ckV4cGFuc2lvbiBpbnN0YW5jZS5cbiAgICpcbiAgICogVGhlIG9wdGlvbnMgb2JqZWN0IGNhbiBiZSBmaWxsZWQgd2l0aCB0aGUgc3BlY2lmaWVkIGluaXRpYWwgdmFsdWVzLiBJdCBjYW4gYWxzbyBjb250YWluXG4gICAqIGFkZGl0aW9uYWwgbWVtYmVycywgYXMgYSByZXN1bHQgb2Ygc2VyaWFsaXppbmcgYSBwcmV2aW91cyBleHBhbnNpb24gc3RhdGUsIGFzIHNob3duIGluIHRoZVxuICAgKiBleGFtcGxlLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiAgICAgICAgUmVjdXJyZW5jZSBleHBhbnNpb24gb3B0aW9uc1xuICAgKiBAcGFyYW0ge1RpbWV9IG9wdGlvbnMuZHRzdGFydFxuICAgKiAgICAgICAgU3RhcnQgdGltZSBvZiB0aGUgZXZlbnRcbiAgICogQHBhcmFtIHtDb21wb25lbnQ9fSBvcHRpb25zLmNvbXBvbmVudFxuICAgKiAgICAgICAgQ29tcG9uZW50IGZvciBleHBhbnNpb24sIHJlcXVpcmVkIGlmIG5vdCByZXN1bWluZy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLnJ1bGVEYXRlcyA9IFtdO1xuICAgIHRoaXMuZXhEYXRlcyA9IFtdO1xuICAgIHRoaXMuZnJvbURhdGEob3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogVHJ1ZSB3aGVuIGl0ZXJhdGlvbiBpcyBmdWxseSBjb21wbGV0ZWQuXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cbiAgY29tcGxldGUgPSBmYWxzZTtcblxuICAvKipcbiAgICogQXJyYXkgb2YgcnJ1bGUgaXRlcmF0b3JzLlxuICAgKlxuICAgKiBAdHlwZSB7UmVjdXJJdGVyYXRvcltdfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcnVsZUl0ZXJhdG9ycyA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEFycmF5IG9mIHJkYXRlIGluc3RhbmNlcy5cbiAgICpcbiAgICogQHR5cGUge1RpbWVbXX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJ1bGVEYXRlcyA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEFycmF5IG9mIGV4ZGF0ZSBpbnN0YW5jZXMuXG4gICAqXG4gICAqIEB0eXBlIHtUaW1lW119XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBleERhdGVzID0gbnVsbDtcblxuICAvKipcbiAgICogQ3VycmVudCBwb3NpdGlvbiBpbiBydWxlRGF0ZXMgYXJyYXkuXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBydWxlRGF0ZUluYyA9IDA7XG5cbiAgLyoqXG4gICAqIEN1cnJlbnQgcG9zaXRpb24gaW4gZXhEYXRlcyBhcnJheVxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZXhEYXRlSW5jID0gMDtcblxuICAvKipcbiAgICogQ3VycmVudCBuZWdhdGl2ZSBkYXRlLlxuICAgKlxuICAgKiBAdHlwZSB7VGltZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGV4RGF0ZSA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEN1cnJlbnQgYWRkaXRpb25hbCBkYXRlLlxuICAgKlxuICAgKiBAdHlwZSB7VGltZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJ1bGVEYXRlID0gbnVsbDtcblxuICAvKipcbiAgICogU3RhcnQgZGF0ZSBvZiByZWN1cnJpbmcgcnVsZXMuXG4gICAqXG4gICAqIEB0eXBlIHtUaW1lfVxuICAgKi9cbiAgZHRzdGFydCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIExhc3QgZXhwYW5kZWQgdGltZVxuICAgKlxuICAgKiBAdHlwZSB7VGltZX1cbiAgICovXG4gIGxhc3QgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSByZWN1cnJlbmNlIGV4cGFuc2lvbiBmcm9tIHRoZSBkYXRhIG9iamVjdC4gVGhlIG9wdGlvbnNcbiAgICogb2JqZWN0IG1heSBhbHNvIGNvbnRhaW4gYWRkaXRpb25hbCBtZW1iZXJzLCBzZWUgdGhlXG4gICAqIHtAbGluayBJQ0FMLlJlY3VyRXhwYW5zaW9uIGNvbnN0cnVjdG9yfSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiAgICAgICAgUmVjdXJyZW5jZSBleHBhbnNpb24gb3B0aW9uc1xuICAgKiBAcGFyYW0ge1RpbWV9IG9wdGlvbnMuZHRzdGFydFxuICAgKiAgICAgICAgU3RhcnQgdGltZSBvZiB0aGUgZXZlbnRcbiAgICogQHBhcmFtIHtDb21wb25lbnQ9fSBvcHRpb25zLmNvbXBvbmVudFxuICAgKiAgICAgICAgQ29tcG9uZW50IGZvciBleHBhbnNpb24sIHJlcXVpcmVkIGlmIG5vdCByZXN1bWluZy5cbiAgICovXG4gIGZyb21EYXRhKG9wdGlvbnMpIHtcbiAgICBsZXQgc3RhcnQgPSBmb3JtYXRDbGFzc1R5cGUob3B0aW9ucy5kdHN0YXJ0LCBUaW1lKTtcblxuICAgIGlmICghc3RhcnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignLmR0c3RhcnQgKElDQUwuVGltZSkgbXVzdCBiZSBnaXZlbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmR0c3RhcnQgPSBzdGFydDtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5jb21wb25lbnQpIHtcbiAgICAgIHRoaXMuX2luaXQob3B0aW9ucy5jb21wb25lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxhc3QgPSBmb3JtYXRDbGFzc1R5cGUob3B0aW9ucy5sYXN0LCBUaW1lKSB8fCBzdGFydC5jbG9uZSgpO1xuXG4gICAgICBpZiAoIW9wdGlvbnMucnVsZUl0ZXJhdG9ycykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJy5ydWxlSXRlcmF0b3JzIG9yIC5jb21wb25lbnQgbXVzdCBiZSBnaXZlbicpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnJ1bGVJdGVyYXRvcnMgPSBvcHRpb25zLnJ1bGVJdGVyYXRvcnMubWFwKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGZvcm1hdENsYXNzVHlwZShpdGVtLCBSZWN1ckl0ZXJhdG9yKTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnJ1bGVEYXRlSW5jID0gb3B0aW9ucy5ydWxlRGF0ZUluYztcbiAgICAgIHRoaXMuZXhEYXRlSW5jID0gb3B0aW9ucy5leERhdGVJbmM7XG5cbiAgICAgIGlmIChvcHRpb25zLnJ1bGVEYXRlcykge1xuICAgICAgICB0aGlzLnJ1bGVEYXRlcyA9IG9wdGlvbnMucnVsZURhdGVzLm1hcChpdGVtID0+IGZvcm1hdENsYXNzVHlwZShpdGVtLCBUaW1lKSk7XG4gICAgICAgIHRoaXMucnVsZURhdGUgPSB0aGlzLnJ1bGVEYXRlc1t0aGlzLnJ1bGVEYXRlSW5jXTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMuZXhEYXRlcykge1xuICAgICAgICB0aGlzLmV4RGF0ZXMgPSBvcHRpb25zLmV4RGF0ZXMubWFwKGl0ZW0gPT4gZm9ybWF0Q2xhc3NUeXBlKGl0ZW0sIFRpbWUpKTtcbiAgICAgICAgdGhpcy5leERhdGUgPSB0aGlzLmV4RGF0ZXNbdGhpcy5leERhdGVJbmNdO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mKG9wdGlvbnMuY29tcGxldGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLmNvbXBsZXRlID0gb3B0aW9ucy5jb21wbGV0ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29tcGFyZSB0d28gSUNBTC5UaW1lIG9iamVjdHMuICBXaGVuIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGlzIGEgREFURSBhbmQgdGhlIGZpcnN0IHBhcmFtZXRlciBpc1xuICAgKiBEQVRFLVRJTUUsIHN0cmlwIHRoZSB0aW1lIGFuZCBjb21wYXJlIG9ubHkgdGhlIGRheXMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7VGltZX0gYSAgIFRoZSBvbmUgb2JqZWN0IHRvIGNvbXBhcmVcbiAgICogQHBhcmFtIHtUaW1lfSBiICAgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlXG4gICAqL1xuICBfY29tcGFyZV9zcGVjaWFsKGEsIGIpIHtcbiAgICBpZiAoIWEuaXNEYXRlICYmIGIuaXNEYXRlKVxuICAgICAgcmV0dXJuIG5ldyBUaW1lKHsgeWVhcjogYS55ZWFyLCBtb250aDogYS5tb250aCwgZGF5OiBhLmRheSB9KS5jb21wYXJlKGIpO1xuICAgIHJldHVybiBhLmNvbXBhcmUoYik7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgdGhlIG5leHQgb2NjdXJyZW5jZSBpbiB0aGUgc2VyaWVzLlxuICAgKiBAcmV0dXJuIHtUaW1lfVxuICAgKi9cbiAgbmV4dCgpIHtcbiAgICBsZXQgaXRlcjtcbiAgICBsZXQgbmV4dDtcbiAgICBsZXQgY29tcGFyZTtcblxuICAgIGxldCBtYXhUcmllcyA9IDUwMDtcbiAgICBsZXQgY3VycmVudFRyeSA9IDA7XG5cbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgaWYgKGN1cnJlbnRUcnkrKyA+IG1heFRyaWVzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAnbWF4IHRyaWVzIGhhdmUgb2NjdXJyZWQsIHJ1bGUgbWF5IGJlIGltcG9zc2libGUgdG8gZnVsZmlsbC4nXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIG5leHQgPSB0aGlzLnJ1bGVEYXRlO1xuICAgICAgaXRlciA9IHRoaXMuX25leHRSZWN1cnJlbmNlSXRlcih0aGlzLmxhc3QpO1xuXG4gICAgICAvLyBubyBtb3JlIG1hdGNoZXNcbiAgICAgIC8vIGJlY2F1c2Ugd2UgaW5jcmVtZW50IHRoZSBydWxlIGRheSBvciBydWxlXG4gICAgICAvLyBfYWZ0ZXJfIHdlIGNob29zZSBhIHZhbHVlIHRoaXMgc2hvdWxkIGJlXG4gICAgICAvLyB0aGUgb25seSBzcG90IHdoZXJlIHdlIG5lZWQgdG8gd29ycnkgYWJvdXQgdGhlXG4gICAgICAvLyBlbmQgb2YgZXZlbnRzLlxuICAgICAgaWYgKCFuZXh0ICYmICFpdGVyKSB7XG4gICAgICAgIC8vIHRoZXJlIGFyZSBubyBtb3JlIGl0ZXJhdG9ycyBvciByZGF0ZXNcbiAgICAgICAgdGhpcy5jb21wbGV0ZSA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICAvLyBubyBuZXh0IHJ1bGUgZGF5IG9yIHJlY3VycmVuY2UgcnVsZSBpcyBmaXJzdC5cbiAgICAgIGlmICghbmV4dCB8fCAoaXRlciAmJiBuZXh0LmNvbXBhcmUoaXRlci5sYXN0KSA+IDApKSB7XG4gICAgICAgIC8vIG11c3QgYmUgY2xvbmVkLCByZWN1ciB3aWxsIHJldXNlIHRoZSB0aW1lIGVsZW1lbnQuXG4gICAgICAgIG5leHQgPSBpdGVyLmxhc3QuY2xvbmUoKTtcbiAgICAgICAgLy8gbW92ZSB0byBuZXh0IHNvIHdlIGNhbiBjb250aW51ZVxuICAgICAgICBpdGVyLm5leHQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gaWYgdGhlIHJ1bGVEYXRlIGlzIHN0aWxsIG5leHQgaW5jcmVtZW50IGl0LlxuICAgICAgaWYgKHRoaXMucnVsZURhdGUgPT09IG5leHQpIHtcbiAgICAgICAgdGhpcy5fbmV4dFJ1bGVEYXkoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5sYXN0ID0gbmV4dDtcblxuICAgICAgLy8gY2hlY2sgdGhlIG5lZ2F0aXZlIHJ1bGVzXG4gICAgICBpZiAodGhpcy5leERhdGUpIHtcbiAgICAgICAgLy8gRVhEQVRFIGNhbiBiZSBpbiBEQVRFIGZvcm1hdCwgYnV0IERUU1RBUlQgaXMgaW4gREFURS1USU1FIGZvcm1hdFxuICAgICAgICBjb21wYXJlID0gdGhpcy5fY29tcGFyZV9zcGVjaWFsKHRoaXMubGFzdCwgdGhpcy5leERhdGUpO1xuXG4gICAgICAgIGlmIChjb21wYXJlID4gMCkge1xuICAgICAgICAgIHRoaXMuX25leHRFeERheSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgdGhlIGN1cnJlbnQgcnVsZSBpcyBleGNsdWRlZCBza2lwIGl0LlxuICAgICAgICBpZiAoY29tcGFyZSA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX25leHRFeERheSgpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vWFhYOiBUaGUgc3BlYyBzdGF0ZXMgdGhhdCBhZnRlciB3ZSByZXNvbHZlIHRoZSBmaW5hbFxuICAgICAgLy8gICAgIGxpc3Qgb2YgZGF0ZXMgd2UgZXhlY3V0ZSBleGRhdGUgdGhpcyBzZWVtcyBzb21ld2hhdCBjb3VudGVyXG4gICAgICAvLyAgICAgaW50dWl0aXZlIHRvIHdoYXQgSSBoYXZlIHNlZW4gbW9zdCBzZXJ2ZXJzIGRvIHNvIGZvciBub3dcbiAgICAgIC8vICAgICBJIGV4Y2x1ZGUgYmFzZWQgb24gdGhlIG9yaWdpbmFsIGRhdGUgbm90IHRoZSBvbmUgdGhhdCBtYXlcbiAgICAgIC8vICAgICBoYXZlIGJlZW4gbW9kaWZpZWQgYnkgdGhlIGV4Y2VwdGlvbi5cbiAgICAgIHJldHVybiB0aGlzLmxhc3Q7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIG9iamVjdCBpbnRvIGEgc2VyaWFsaXplLWFibGUgZm9ybWF0LiBUaGlzIGZvcm1hdCBjYW4gYmUgcGFzc2VkXG4gICAqIGJhY2sgaW50byB0aGUgZXhwYW5zaW9uIHRvIHJlc3VtZSBpdGVyYXRpb24uXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICBmdW5jdGlvbiB0b0pTT04oaXRlbSkge1xuICAgICAgcmV0dXJuIGl0ZW0udG9KU09OKCk7XG4gICAgfVxuXG4gICAgbGV0IHJlc3VsdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgcmVzdWx0LnJ1bGVJdGVyYXRvcnMgPSB0aGlzLnJ1bGVJdGVyYXRvcnMubWFwKHRvSlNPTik7XG5cbiAgICBpZiAodGhpcy5ydWxlRGF0ZXMpIHtcbiAgICAgIHJlc3VsdC5ydWxlRGF0ZXMgPSB0aGlzLnJ1bGVEYXRlcy5tYXAodG9KU09OKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5leERhdGVzKSB7XG4gICAgICByZXN1bHQuZXhEYXRlcyA9IHRoaXMuZXhEYXRlcy5tYXAodG9KU09OKTtcbiAgICB9XG5cbiAgICByZXN1bHQucnVsZURhdGVJbmMgPSB0aGlzLnJ1bGVEYXRlSW5jO1xuICAgIHJlc3VsdC5leERhdGVJbmMgPSB0aGlzLmV4RGF0ZUluYztcbiAgICByZXN1bHQubGFzdCA9IHRoaXMubGFzdC50b0pTT04oKTtcbiAgICByZXN1bHQuZHRzdGFydCA9IHRoaXMuZHRzdGFydC50b0pTT04oKTtcbiAgICByZXN1bHQuY29tcGxldGUgPSB0aGlzLmNvbXBsZXRlO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IGFsbCBkYXRlcyBmcm9tIHRoZSBwcm9wZXJ0aWVzIGluIHRoZSBnaXZlbiBjb21wb25lbnQuIFRoZVxuICAgKiBwcm9wZXJ0aWVzIHdpbGwgYmUgZmlsdGVyZWQgYnkgdGhlIHByb3BlcnR5IG5hbWUuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fSBjb21wb25lbnQgICAgICAgICAgICAgVGhlIGNvbXBvbmVudCB0byBzZWFyY2ggaW5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5TmFtZSAgICAgICAgICAgICBUaGUgcHJvcGVydHkgbmFtZSB0byBzZWFyY2ggZm9yXG4gICAqIEByZXR1cm4ge1RpbWVbXX0gICAgICAgICAgICAgICAgICAgICAgICAgVGhlIGV4dHJhY3RlZCBkYXRlcy5cbiAgICovXG4gIF9leHRyYWN0RGF0ZXMoY29tcG9uZW50LCBwcm9wZXJ0eU5hbWUpIHtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgbGV0IHByb3BzID0gY29tcG9uZW50LmdldEFsbFByb3BlcnRpZXMocHJvcGVydHlOYW1lKTtcblxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBwcm9wcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgZm9yIChsZXQgcHJvcCBvZiBwcm9wc1tpXS5nZXRWYWx1ZXMoKSkge1xuICAgICAgICBsZXQgaWR4ID0gYmluc2VhcmNoSW5zZXJ0KFxuICAgICAgICAgIHJlc3VsdCxcbiAgICAgICAgICBwcm9wLFxuICAgICAgICAgIChhLCBiKSA9PiBhLmNvbXBhcmUoYilcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBvcmRlcmVkIGluc2VydFxuICAgICAgICByZXN1bHQuc3BsaWNlKGlkeCwgMCwgcHJvcCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSByZWN1cnJlbmNlIGV4cGFuc2lvbi5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtDb21wb25lbnR9IGNvbXBvbmVudCAgICBUaGUgY29tcG9uZW50IHRvIGluaXRpYWxpemUgZnJvbS5cbiAgICovXG4gIF9pbml0KGNvbXBvbmVudCkge1xuICAgIHRoaXMucnVsZUl0ZXJhdG9ycyA9IFtdO1xuXG4gICAgdGhpcy5sYXN0ID0gdGhpcy5kdHN0YXJ0LmNsb25lKCk7XG5cbiAgICAvLyB0byBwcm92aWRlIGFwaSBjb25zaXN0ZW5jeSBub24tcmVjdXJyaW5nXG4gICAgLy8gZXZlbnRzIGNhbiBhbHNvIHVzZSB0aGUgaXRlcmF0b3IgdGhvdWdoIGl0IHdpbGxcbiAgICAvLyBvbmx5IHJldHVybiBhIHNpbmdsZSB0aW1lLlxuICAgIGlmICghY29tcG9uZW50Lmhhc1Byb3BlcnR5KCdyZGF0ZScpICYmXG4gICAgICAgICFjb21wb25lbnQuaGFzUHJvcGVydHkoJ3JydWxlJykgJiZcbiAgICAgICAgIWNvbXBvbmVudC5oYXNQcm9wZXJ0eSgncmVjdXJyZW5jZS1pZCcpKSB7XG4gICAgICB0aGlzLnJ1bGVEYXRlID0gdGhpcy5sYXN0LmNsb25lKCk7XG4gICAgICB0aGlzLmNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoY29tcG9uZW50Lmhhc1Byb3BlcnR5KCdyZGF0ZScpKSB7XG4gICAgICB0aGlzLnJ1bGVEYXRlcyA9IHRoaXMuX2V4dHJhY3REYXRlcyhjb21wb25lbnQsICdyZGF0ZScpO1xuXG4gICAgICAvLyBzcGVjaWFsIGhhY2sgZm9yIGNhc2VzIHdoZXJlIGZpcnN0IHJkYXRlIGlzIHByaW9yXG4gICAgICAvLyB0byB0aGUgc3RhcnQgZGF0ZS4gV2Ugb25seSBjaGVjayBmb3IgdGhlIGZpcnN0IHJkYXRlLlxuICAgICAgLy8gVGhpcyBpcyBtb3N0bHkgZm9yIGdvb2dsZSdzIGNyYXp5IHJlY3VycmluZyBkYXRlIGxvZ2ljXG4gICAgICAvLyAoY29udGFjdHMgYmlydGhkYXlzKS5cbiAgICAgIGlmICgodGhpcy5ydWxlRGF0ZXNbMF0pICYmXG4gICAgICAgICAgKHRoaXMucnVsZURhdGVzWzBdLmNvbXBhcmUodGhpcy5kdHN0YXJ0KSA8IDApKSB7XG5cbiAgICAgICAgdGhpcy5ydWxlRGF0ZUluYyA9IDA7XG4gICAgICAgIHRoaXMubGFzdCA9IHRoaXMucnVsZURhdGVzWzBdLmNsb25lKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJ1bGVEYXRlSW5jID0gYmluc2VhcmNoSW5zZXJ0KFxuICAgICAgICAgIHRoaXMucnVsZURhdGVzLFxuICAgICAgICAgIHRoaXMubGFzdCxcbiAgICAgICAgICAoYSwgYikgPT4gYS5jb21wYXJlKGIpXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucnVsZURhdGUgPSB0aGlzLnJ1bGVEYXRlc1t0aGlzLnJ1bGVEYXRlSW5jXTtcbiAgICB9XG5cbiAgICBpZiAoY29tcG9uZW50Lmhhc1Byb3BlcnR5KCdycnVsZScpKSB7XG4gICAgICBsZXQgcnVsZXMgPSBjb21wb25lbnQuZ2V0QWxsUHJvcGVydGllcygncnJ1bGUnKTtcbiAgICAgIGxldCBpID0gMDtcbiAgICAgIGxldCBsZW4gPSBydWxlcy5sZW5ndGg7XG5cbiAgICAgIGxldCBydWxlO1xuICAgICAgbGV0IGl0ZXI7XG5cbiAgICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgcnVsZSA9IHJ1bGVzW2ldLmdldEZpcnN0VmFsdWUoKTtcbiAgICAgICAgaXRlciA9IHJ1bGUuaXRlcmF0b3IodGhpcy5kdHN0YXJ0KTtcbiAgICAgICAgdGhpcy5ydWxlSXRlcmF0b3JzLnB1c2goaXRlcik7XG5cbiAgICAgICAgLy8gaW5jcmVtZW50IHRvIHRoZSBuZXh0IG9jY3VycmVuY2Ugc28gZnV0dXJlXG4gICAgICAgIC8vIGNhbGxzIHRvIG5leHQgcmV0dXJuIHRpbWVzIGJleW9uZCB0aGUgaW5pdGlhbCBpdGVyYXRpb24uXG4gICAgICAgIC8vIFhYWDogSSBmaW5kIHRoaXMgc3VzcGljaW91cyBtaWdodCBiZSBhIGJ1Zz9cbiAgICAgICAgaXRlci5uZXh0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvbXBvbmVudC5oYXNQcm9wZXJ0eSgnZXhkYXRlJykpIHtcbiAgICAgIHRoaXMuZXhEYXRlcyA9IHRoaXMuX2V4dHJhY3REYXRlcyhjb21wb25lbnQsICdleGRhdGUnKTtcbiAgICAgIC8vIGlmIHdlIGhhdmUgYSAubGFzdCBkYXkgd2UgaW5jcmVtZW50IHRoZSBpbmRleCB0byBiZXlvbmQgaXQuXG4gICAgICAvLyBXaGVuIERUU1RBUlQgaXMgaW4gREFURS1USU1FIGZvcm1hdCwgRVhEQVRFIGlzIGluIERBVEUgZm9ybWF0IGFuZCBFWERBVEUgaXNcbiAgICAgIC8vIHRoZSBkYXRlIG9mIERUU1RBUlQsIF9jb21wYXJlX3NwZWNpYWwgZmluZHMgdGhpcyBvdXQgYW5kIGNvbXBhcmVUaW1lIGZhaWxzLlxuICAgICAgdGhpcy5leERhdGVJbmMgPSBiaW5zZWFyY2hJbnNlcnQoXG4gICAgICAgIHRoaXMuZXhEYXRlcyxcbiAgICAgICAgdGhpcy5sYXN0LFxuICAgICAgICB0aGlzLl9jb21wYXJlX3NwZWNpYWxcbiAgICAgICk7XG5cbiAgICAgIHRoaXMuZXhEYXRlID0gdGhpcy5leERhdGVzW3RoaXMuZXhEYXRlSW5jXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWR2YW5jZSB0byB0aGUgbmV4dCBleGRhdGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9uZXh0RXhEYXkoKSB7XG4gICAgdGhpcy5leERhdGUgPSB0aGlzLmV4RGF0ZXNbKyt0aGlzLmV4RGF0ZUluY107XG4gIH1cblxuICAvKipcbiAgICogQWR2YW5jZSB0byB0aGUgbmV4dCBydWxlIGRhdGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9uZXh0UnVsZURheSgpIHtcbiAgICB0aGlzLnJ1bGVEYXRlID0gdGhpcy5ydWxlRGF0ZXNbKyt0aGlzLnJ1bGVEYXRlSW5jXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIGFuZCByZXR1cm4gdGhlIHJlY3VycmVuY2UgcnVsZSB3aXRoIHRoZSBtb3N0IHJlY2VudCBldmVudCBhbmRcbiAgICogcmV0dXJuIGl0LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJuIHs/UmVjdXJJdGVyYXRvcn0gICAgRm91bmQgaXRlcmF0b3IuXG4gICAqL1xuICBfbmV4dFJlY3VycmVuY2VJdGVyKCkge1xuICAgIGxldCBpdGVycyA9IHRoaXMucnVsZUl0ZXJhdG9ycztcblxuICAgIGlmIChpdGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCBsZW4gPSBpdGVycy5sZW5ndGg7XG4gICAgbGV0IGl0ZXI7XG4gICAgbGV0IGl0ZXJUaW1lO1xuICAgIGxldCBpdGVySWR4ID0gMDtcbiAgICBsZXQgY2hvc2VuSXRlcjtcblxuICAgIC8vIGxvb3AgdGhyb3VnaCBlYWNoIGl0ZXJhdG9yXG4gICAgZm9yICg7IGl0ZXJJZHggPCBsZW47IGl0ZXJJZHgrKykge1xuICAgICAgaXRlciA9IGl0ZXJzW2l0ZXJJZHhdO1xuICAgICAgaXRlclRpbWUgPSBpdGVyLmxhc3Q7XG5cbiAgICAgIC8vIGlmIGl0ZXJhdGlvbiBpcyBjb21wbGV0ZVxuICAgICAgLy8gdGhlbiB3ZSBtdXN0IGV4Y2x1ZGUgaXQgZnJvbVxuICAgICAgLy8gdGhlIHNlYXJjaCBhbmQgcmVtb3ZlIGl0LlxuICAgICAgaWYgKGl0ZXIuY29tcGxldGVkKSB7XG4gICAgICAgIGxlbi0tO1xuICAgICAgICBpZiAoaXRlcklkeCAhPT0gMCkge1xuICAgICAgICAgIGl0ZXJJZHgtLTtcbiAgICAgICAgfVxuICAgICAgICBpdGVycy5zcGxpY2UoaXRlcklkeCwgMSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBmaW5kIHRoZSBtb3N0IHJlY2VudCBwb3NzaWJsZSBjaG9pY2VcbiAgICAgIGlmICghY2hvc2VuSXRlciB8fCBjaG9zZW5JdGVyLmxhc3QuY29tcGFyZShpdGVyVGltZSkgPiAwKSB7XG4gICAgICAgIC8vIHRoYXQgaXRlcmF0b3IgaXMgc2F2ZWRcbiAgICAgICAgY2hvc2VuSXRlciA9IGl0ZXI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gdGhlIGNob3NlbiBpdGVyYXRvciBpcyByZXR1cm5lZCBidXQgbm90IG11dGF0ZWRcbiAgICAvLyB0aGlzIGl0ZXJhdG9yIGNvbnRhaW5zIHRoZSBtb3N0IHJlY2VudCBldmVudC5cbiAgICByZXR1cm4gY2hvc2VuSXRlcjtcbiAgfVxufVxuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG4vKipcbiAqIFRoaXMgbGV0cyB0eXBlc2NyaXB0IHJlc29sdmUgb3VyIGN1c3RvbSB0eXBlcyBpbiB0aGVcbiAqIGdlbmVyYXRlZCBkLnRzIGZpbGVzIChqc2RvYyB0eXBlZGVmcyBhcmUgY29udmVydGVkIHRvIHR5cGVzY3JpcHQgdHlwZXMpLlxuICogSWdub3JlIHByZXZlbnRzIHRoZSB0eXBlZGVmcyBmcm9tIGJlaW5nIGRvY3VtZW50ZWQgbW9yZSB0aGFuIG9uY2UuXG4gKiBAaWdub3JlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS5mcmVxdWVuY3lWYWx1ZXN9IGZyZXF1ZW5jeVZhbHVlc1xuICogSW1wb3J0cyB0aGUgJ2ZyZXF1ZW5jeVZhbHVlcycgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi90eXBlcy5qc1wiKS5vY2N1cnJlbmNlRGV0YWlsc30gb2NjdXJyZW5jZURldGFpbHNcbiAqIEltcG9ydHMgdGhlICdvY2N1cnJlbmNlRGV0YWlscycgdHlwZSBmcm9tIHRoZSBcInR5cGVzLmpzXCIgbW9kdWxlXG4gKi9cblxuLyoqXG4gKiBJQ0FMLmpzIGlzIG9yZ2FuaXplZCBpbnRvIG11bHRpcGxlIGxheWVycy4gVGhlIGJvdHRvbSBsYXllciBpcyBhIHJhdyBqQ2FsXG4gKiBvYmplY3QsIGZvbGxvd2VkIGJ5IHRoZSBjb21wb25lbnQvcHJvcGVydHkgbGF5ZXIuIFRoZSBoaWdoZXN0IGxldmVsIGlzIHRoZVxuICogZXZlbnQgcmVwcmVzZW50YXRpb24sIHdoaWNoIHRoaXMgY2xhc3MgaXMgcGFydCBvZi4gU2VlIHRoZVxuICoge0B0dXRvcmlhbCBsYXllcnN9IGd1aWRlIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogQG1lbWJlcm9mIElDQUxcbiAqL1xuY2xhc3MgRXZlbnQge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBJQ0FMLkV2ZW50IGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBvbmVudD19IGNvbXBvbmVudCAgICAgICAgICAgICAgVGhlIElDQUwuQ29tcG9uZW50IHRvIGJhc2UgdGhpcyBldmVudCBvblxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdICAgICAgICAgICAgICAgICAgT3B0aW9ucyBmb3IgdGhpcyBldmVudFxuICAgKiBAcGFyYW0ge0Jvb2xlYW49fSBvcHRpb25zLnN0cmljdEV4Y2VwdGlvbnMgIFdoZW4gdHJ1ZSwgd2lsbCB2ZXJpZnkgZXhjZXB0aW9ucyBhcmUgcmVsYXRlZCBieVxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVpciBVVUlEXG4gICAqIEBwYXJhbSB7QXJyYXk8Q29tcG9uZW50fEV2ZW50Pj19IG9wdGlvbnMuZXhjZXB0aW9uc1xuICAgKiAgICAgICAgICBFeGNlcHRpb25zIHRvIHRoaXMgZXZlbnQsIGVpdGhlciBhcyBjb21wb25lbnRzIG9yIGV2ZW50cy4gSWYgbm90XG4gICAqICAgICAgICAgICAgc3BlY2lmaWVkIGV4Y2VwdGlvbnMgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIHNldCBpbiByZWxhdGlvbiBvZlxuICAgKiAgICAgICAgICAgIGNvbXBvbmVudCdzIHBhcmVudFxuICAgKi9cbiAgY29uc3RydWN0b3IoY29tcG9uZW50LCBvcHRpb25zKSB7XG4gICAgaWYgKCEoY29tcG9uZW50IGluc3RhbmNlb2YgQ29tcG9uZW50KSkge1xuICAgICAgb3B0aW9ucyA9IGNvbXBvbmVudDtcbiAgICAgIGNvbXBvbmVudCA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGNvbXBvbmVudCkge1xuICAgICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY29tcG9uZW50ID0gbmV3IENvbXBvbmVudCgndmV2ZW50Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5fcmFuZ2VFeGNlcHRpb25DYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5leGNlcHRpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLnJhbmdlRXhjZXB0aW9ucyA9IFtdO1xuXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5zdHJpY3RFeGNlcHRpb25zKSB7XG4gICAgICB0aGlzLnN0cmljdEV4Y2VwdGlvbnMgPSBvcHRpb25zLnN0cmljdEV4Y2VwdGlvbnM7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5leGNlcHRpb25zKSB7XG4gICAgICBvcHRpb25zLmV4Y2VwdGlvbnMuZm9yRWFjaCh0aGlzLnJlbGF0ZUV4Y2VwdGlvbiwgdGhpcyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmNvbXBvbmVudC5wYXJlbnQgJiYgIXRoaXMuaXNSZWN1cnJlbmNlRXhjZXB0aW9uKCkpIHtcbiAgICAgIHRoaXMuY29tcG9uZW50LnBhcmVudC5nZXRBbGxTdWJjb21wb25lbnRzKCd2ZXZlbnQnKS5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5oYXNQcm9wZXJ0eSgncmVjdXJyZW5jZS1pZCcpKSB7XG4gICAgICAgICAgdGhpcy5yZWxhdGVFeGNlcHRpb24oZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG4gIH1cblxuXG4gIHN0YXRpYyBUSElTQU5ERlVUVVJFID0gJ1RISVNBTkRGVVRVUkUnO1xuXG4gIC8qKlxuICAgKiBMaXN0IG9mIHJlbGF0ZWQgZXZlbnQgZXhjZXB0aW9ucy5cbiAgICpcbiAgICogQHR5cGUge0V2ZW50W119XG4gICAqL1xuICBleGNlcHRpb25zID0gbnVsbDtcblxuICAvKipcbiAgICogV2hlbiB0cnVlLCB3aWxsIHZlcmlmeSBleGNlcHRpb25zIGFyZSByZWxhdGVkIGJ5IHRoZWlyIFVVSUQuXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cbiAgc3RyaWN0RXhjZXB0aW9ucyA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBSZWxhdGVzIGEgZ2l2ZW4gZXZlbnQgZXhjZXB0aW9uIHRvIHRoaXMgb2JqZWN0LiAgSWYgdGhlIGdpdmVuIGNvbXBvbmVudFxuICAgKiBkb2VzIG5vdCBzaGFyZSB0aGUgVUlEIG9mIHRoaXMgZXZlbnQgaXQgY2Fubm90IGJlIHJlbGF0ZWQgYW5kIHdpbGwgdGhyb3dcbiAgICogYW4gZXhjZXB0aW9uLlxuICAgKlxuICAgKiBJZiB0aGlzIGNvbXBvbmVudCBpcyBhbiBleGNlcHRpb24gaXQgY2Fubm90IGhhdmUgb3RoZXIgZXhjZXB0aW9uc1xuICAgKiByZWxhdGVkIHRvIGl0LlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBvbmVudHxFdmVudH0gb2JqICAgICAgIENvbXBvbmVudCBvciBldmVudFxuICAgKi9cbiAgcmVsYXRlRXhjZXB0aW9uKG9iaikge1xuICAgIGlmICh0aGlzLmlzUmVjdXJyZW5jZUV4Y2VwdGlvbigpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Nhbm5vdCByZWxhdGUgZXhjZXB0aW9uIHRvIGV4Y2VwdGlvbnMnKTtcbiAgICB9XG5cbiAgICBpZiAob2JqIGluc3RhbmNlb2YgQ29tcG9uZW50KSB7XG4gICAgICBvYmogPSBuZXcgRXZlbnQob2JqKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdHJpY3RFeGNlcHRpb25zICYmIG9iai51aWQgIT09IHRoaXMudWlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2F0dGVtcHRlZCB0byByZWxhdGUgdW5yZWxhdGVkIGV4Y2VwdGlvbicpO1xuICAgIH1cblxuICAgIGxldCBpZCA9IG9iai5yZWN1cnJlbmNlSWQudG9TdHJpbmcoKTtcblxuICAgIC8vIHdlIGRvbid0IHNvcnQgb3IgbWFuYWdlIGV4Y2VwdGlvbnMgZGlyZWN0bHlcbiAgICAvLyBoZXJlIHRoZSByZWN1cnJlbmNlIGV4cGFuZGVyIGhhbmRsZXMgdGhhdC5cbiAgICB0aGlzLmV4Y2VwdGlvbnNbaWRdID0gb2JqO1xuXG4gICAgLy8gaW5kZXggUkFOR0U9VEhJU0FOREZVVFVSRSBleGNlcHRpb25zIHNvIHdlIGNhblxuICAgIC8vIGxvb2sgdGhlbSB1cCBsYXRlciBpbiBnZXRPY2N1cnJlbmNlRGV0YWlscy5cbiAgICBpZiAob2JqLm1vZGlmaWVzRnV0dXJlKCkpIHtcbiAgICAgIGxldCBpdGVtID0gW1xuICAgICAgICBvYmoucmVjdXJyZW5jZUlkLnRvVW5peFRpbWUoKSwgaWRcbiAgICAgIF07XG5cbiAgICAgIC8vIHdlIGtlZXAgdGhlbSBzb3J0ZWQgc28gd2UgY2FuIGZpbmQgdGhlIG5lYXJlc3RcbiAgICAgIC8vIHZhbHVlIGxhdGVyIG9uLi4uXG4gICAgICBsZXQgaWR4ID0gYmluc2VhcmNoSW5zZXJ0KFxuICAgICAgICB0aGlzLnJhbmdlRXhjZXB0aW9ucyxcbiAgICAgICAgaXRlbSxcbiAgICAgICAgY29tcGFyZVJhbmdlRXhjZXB0aW9uXG4gICAgICApO1xuXG4gICAgICB0aGlzLnJhbmdlRXhjZXB0aW9ucy5zcGxpY2UoaWR4LCAwLCBpdGVtKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoaXMgcmVjb3JkIGlzIGFuIGV4Y2VwdGlvbiBhbmQgaGFzIHRoZSBSQU5HRT1USElTQU5ERlVUVVJFXG4gICAqIHZhbHVlLlxuICAgKlxuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgVHJ1ZSwgd2hlbiBleGNlcHRpb24gaXMgd2l0aGluIHJhbmdlXG4gICAqL1xuICBtb2RpZmllc0Z1dHVyZSgpIHtcbiAgICBpZiAoIXRoaXMuY29tcG9uZW50Lmhhc1Byb3BlcnR5KCdyZWN1cnJlbmNlLWlkJykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBsZXQgcmFuZ2UgPSB0aGlzLmNvbXBvbmVudC5nZXRGaXJzdFByb3BlcnR5KCdyZWN1cnJlbmNlLWlkJykuZ2V0UGFyYW1ldGVyKCdyYW5nZScpO1xuICAgIHJldHVybiByYW5nZSA9PT0gRXZlbnQuVEhJU0FOREZVVFVSRTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyB0aGUgcmFuZ2UgZXhjZXB0aW9uIG5lYXJlc3QgdG8gdGhlIGdpdmVuIGRhdGUuXG4gICAqXG4gICAqIEBwYXJhbSB7VGltZX0gdGltZSAgIHVzdWFsbHkgYW4gb2NjdXJyZW5jZSB0aW1lIG9mIGFuIGV2ZW50XG4gICAqIEByZXR1cm4gez9FdmVudH0gICAgIHRoZSByZWxhdGVkIGV2ZW50L2V4Y2VwdGlvbiBvciBudWxsXG4gICAqL1xuICBmaW5kUmFuZ2VFeGNlcHRpb24odGltZSkge1xuICAgIGlmICghdGhpcy5yYW5nZUV4Y2VwdGlvbnMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBsZXQgdXRjID0gdGltZS50b1VuaXhUaW1lKCk7XG4gICAgbGV0IGlkeCA9IGJpbnNlYXJjaEluc2VydChcbiAgICAgIHRoaXMucmFuZ2VFeGNlcHRpb25zLFxuICAgICAgW3V0Y10sXG4gICAgICBjb21wYXJlUmFuZ2VFeGNlcHRpb25cbiAgICApO1xuXG4gICAgaWR4IC09IDE7XG5cbiAgICAvLyBvY2N1cnMgYmVmb3JlXG4gICAgaWYgKGlkeCA8IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCByYW5nZUl0ZW0gPSB0aGlzLnJhbmdlRXhjZXB0aW9uc1tpZHhdO1xuXG4gICAgLyogYzggaWdub3JlIG5leHQgNCAqL1xuICAgIGlmICh1dGMgPCByYW5nZUl0ZW1bMF0pIHtcbiAgICAgIC8vIHNhbml0eSBjaGVjayBvbmx5XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmFuZ2VJdGVtWzFdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG9jY3VycmVuY2UgZGV0YWlscyBiYXNlZCBvbiBpdHMgc3RhcnQgdGltZS4gIElmIHRoZVxuICAgKiBvY2N1cnJlbmNlIGhhcyBhbiBleGNlcHRpb24gd2lsbCByZXR1cm4gdGhlIGRldGFpbHMgZm9yIHRoYXQgZXhjZXB0aW9uLlxuICAgKlxuICAgKiBOT1RFOiB0aGlzIG1ldGhvZCBpcyBpbnRlbmQgdG8gYmUgdXNlZCBpbiBjb25qdW5jdGlvblxuICAgKiAgICAgICB3aXRoIHRoZSB7QGxpbmsgSUNBTC5FdmVudCNpdGVyYXRvciBpdGVyYXRvcn0gbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0ge1RpbWV9IG9jY3VycmVuY2UgICAgICAgICAgICAgICB0aW1lIG9jY3VycmVuY2VcbiAgICogQHJldHVybiB7b2NjdXJyZW5jZURldGFpbHN9ICAgICAgICAgICAgSW5mb3JtYXRpb24gYWJvdXQgdGhlIG9jY3VycmVuY2VcbiAgICovXG4gIGdldE9jY3VycmVuY2VEZXRhaWxzKG9jY3VycmVuY2UpIHtcbiAgICBsZXQgaWQgPSBvY2N1cnJlbmNlLnRvU3RyaW5nKCk7XG4gICAgbGV0IHV0Y0lkID0gb2NjdXJyZW5jZS5jb252ZXJ0VG9ab25lKFRpbWV6b25lLnV0Y1RpbWV6b25lKS50b1N0cmluZygpO1xuICAgIGxldCBpdGVtO1xuICAgIGxldCByZXN1bHQgPSB7XG4gICAgICAvL1hYWDogQ2xvbmU/XG4gICAgICByZWN1cnJlbmNlSWQ6IG9jY3VycmVuY2VcbiAgICB9O1xuXG4gICAgaWYgKGlkIGluIHRoaXMuZXhjZXB0aW9ucykge1xuICAgICAgaXRlbSA9IHJlc3VsdC5pdGVtID0gdGhpcy5leGNlcHRpb25zW2lkXTtcbiAgICAgIHJlc3VsdC5zdGFydERhdGUgPSBpdGVtLnN0YXJ0RGF0ZTtcbiAgICAgIHJlc3VsdC5lbmREYXRlID0gaXRlbS5lbmREYXRlO1xuICAgICAgcmVzdWx0Lml0ZW0gPSBpdGVtO1xuICAgIH0gZWxzZSBpZiAodXRjSWQgaW4gdGhpcy5leGNlcHRpb25zKSB7XG4gICAgICBpdGVtID0gdGhpcy5leGNlcHRpb25zW3V0Y0lkXTtcbiAgICAgIHJlc3VsdC5zdGFydERhdGUgPSBpdGVtLnN0YXJ0RGF0ZTtcbiAgICAgIHJlc3VsdC5lbmREYXRlID0gaXRlbS5lbmREYXRlO1xuICAgICAgcmVzdWx0Lml0ZW0gPSBpdGVtO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyByYW5nZSBleGNlcHRpb25zIChSQU5HRT1USElTQU5ERlVUVVJFKSBoYXZlIGFcbiAgICAgIC8vIGxvd2VyIHByaW9yaXR5IHRoZW4gZGlyZWN0IGV4Y2VwdGlvbnMgYnV0XG4gICAgICAvLyBtdXN0IGJlIGFjY291bnRlZCBmb3IgZmlyc3QuIFRoZWlyIGl0ZW0gaXNcbiAgICAgIC8vIGFsd2F5cyB0aGUgZmlyc3QgZXhjZXB0aW9uIHdpdGggdGhlIHJhbmdlIHByb3AuXG4gICAgICBsZXQgcmFuZ2VFeGNlcHRpb25JZCA9IHRoaXMuZmluZFJhbmdlRXhjZXB0aW9uKFxuICAgICAgICBvY2N1cnJlbmNlXG4gICAgICApO1xuICAgICAgbGV0IGVuZDtcblxuICAgICAgaWYgKHJhbmdlRXhjZXB0aW9uSWQpIHtcbiAgICAgICAgbGV0IGV4Y2VwdGlvbiA9IHRoaXMuZXhjZXB0aW9uc1tyYW5nZUV4Y2VwdGlvbklkXTtcblxuICAgICAgICAvLyByYW5nZSBleGNlcHRpb24gbXVzdCBtb2RpZnkgc3RhbmRhcmQgdGltZVxuICAgICAgICAvLyBieSB0aGUgZGlmZmVyZW5jZSAoaWYgYW55KSBpbiBzdGFydC9lbmQgdGltZXMuXG4gICAgICAgIHJlc3VsdC5pdGVtID0gZXhjZXB0aW9uO1xuXG4gICAgICAgIGxldCBzdGFydERpZmYgPSB0aGlzLl9yYW5nZUV4Y2VwdGlvbkNhY2hlW3JhbmdlRXhjZXB0aW9uSWRdO1xuXG4gICAgICAgIGlmICghc3RhcnREaWZmKSB7XG4gICAgICAgICAgbGV0IG9yaWdpbmFsID0gZXhjZXB0aW9uLnJlY3VycmVuY2VJZC5jbG9uZSgpO1xuICAgICAgICAgIGxldCBuZXdTdGFydCA9IGV4Y2VwdGlvbi5zdGFydERhdGUuY2xvbmUoKTtcblxuICAgICAgICAgIC8vIHpvbmVzIG11c3QgYmUgc2FtZSBvdGhlcndpc2Ugc3VidHJhY3QgbWF5IGJlIGluY29ycmVjdC5cbiAgICAgICAgICBvcmlnaW5hbC56b25lID0gbmV3U3RhcnQuem9uZTtcbiAgICAgICAgICBzdGFydERpZmYgPSBuZXdTdGFydC5zdWJ0cmFjdERhdGUob3JpZ2luYWwpO1xuXG4gICAgICAgICAgdGhpcy5fcmFuZ2VFeGNlcHRpb25DYWNoZVtyYW5nZUV4Y2VwdGlvbklkXSA9IHN0YXJ0RGlmZjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzdGFydCA9IG9jY3VycmVuY2UuY2xvbmUoKTtcbiAgICAgICAgc3RhcnQuem9uZSA9IGV4Y2VwdGlvbi5zdGFydERhdGUuem9uZTtcbiAgICAgICAgc3RhcnQuYWRkRHVyYXRpb24oc3RhcnREaWZmKTtcblxuICAgICAgICBlbmQgPSBzdGFydC5jbG9uZSgpO1xuICAgICAgICBlbmQuYWRkRHVyYXRpb24oZXhjZXB0aW9uLmR1cmF0aW9uKTtcblxuICAgICAgICByZXN1bHQuc3RhcnREYXRlID0gc3RhcnQ7XG4gICAgICAgIHJlc3VsdC5lbmREYXRlID0gZW5kO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbm8gcmFuZ2UgZXhjZXB0aW9uIHN0YW5kYXJkIGV4cGFuc2lvblxuICAgICAgICBlbmQgPSBvY2N1cnJlbmNlLmNsb25lKCk7XG4gICAgICAgIGVuZC5hZGREdXJhdGlvbih0aGlzLmR1cmF0aW9uKTtcblxuICAgICAgICByZXN1bHQuZW5kRGF0ZSA9IGVuZDtcbiAgICAgICAgcmVzdWx0LnN0YXJ0RGF0ZSA9IG9jY3VycmVuY2U7XG4gICAgICAgIHJlc3VsdC5pdGVtID0gdGhpcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkcyBhIHJlY3VyIGV4cGFuc2lvbiBpbnN0YW5jZSBmb3IgYSBzcGVjaWZpYyBwb2ludCBpbiB0aW1lIChkZWZhdWx0c1xuICAgKiB0byBzdGFydERhdGUpLlxuICAgKlxuICAgKiBAcGFyYW0ge1RpbWU9fSBzdGFydFRpbWUgICAgIFN0YXJ0aW5nIHBvaW50IGZvciBleHBhbnNpb25cbiAgICogQHJldHVybiB7UmVjdXJFeHBhbnNpb259ICAgIEV4cGFuc2lvbiBvYmplY3RcbiAgICovXG4gIGl0ZXJhdG9yKHN0YXJ0VGltZSkge1xuICAgIHJldHVybiBuZXcgUmVjdXJFeHBhbnNpb24oe1xuICAgICAgY29tcG9uZW50OiB0aGlzLmNvbXBvbmVudCxcbiAgICAgIGR0c3RhcnQ6IHN0YXJ0VGltZSB8fCB0aGlzLnN0YXJ0RGF0ZVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgZXZlbnQgaXMgcmVjdXJyaW5nXG4gICAqXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgICBUcnVlLCBpZiBldmVudCBpcyByZWN1cnJpbmdcbiAgICovXG4gIGlzUmVjdXJyaW5nKCkge1xuICAgIGxldCBjb21wID0gdGhpcy5jb21wb25lbnQ7XG4gICAgcmV0dXJuIGNvbXAuaGFzUHJvcGVydHkoJ3JydWxlJykgfHwgY29tcC5oYXNQcm9wZXJ0eSgncmRhdGUnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIGV2ZW50IGRlc2NyaWJlcyBhIHJlY3VycmVuY2UgZXhjZXB0aW9uLiBTZWVcbiAgICoge0B0dXRvcmlhbCB0ZXJtaW5vbG9neX0gZm9yIGRldGFpbHMuXG4gICAqXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59ICAgIFRydWUsIGlmIHRoZSBldmVudCBkZXNjcmliZXMgYSByZWN1cnJlbmNlIGV4Y2VwdGlvblxuICAgKi9cbiAgaXNSZWN1cnJlbmNlRXhjZXB0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudC5oYXNQcm9wZXJ0eSgncmVjdXJyZW5jZS1pZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHR5cGVzIG9mIHJlY3VycmVuY2VzIHRoaXMgZXZlbnQgbWF5IGhhdmUuXG4gICAqXG4gICAqIFJldHVybmVkIGFzIGFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcG9zc2libGUga2V5czpcbiAgICpcbiAgICogICAgLSBZRUFSTFlcbiAgICogICAgLSBNT05USExZXG4gICAqICAgIC0gV0VFS0xZXG4gICAqICAgIC0gREFJTFlcbiAgICogICAgLSBNSU5VVEVMWVxuICAgKiAgICAtIFNFQ09ORExZXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdC48ZnJlcXVlbmN5VmFsdWVzLCBCb29sZWFuPn1cbiAgICogICAgICAgICAgT2JqZWN0IG9mIHJlY3VycmVuY2UgZmxhZ3NcbiAgICovXG4gIGdldFJlY3VycmVuY2VUeXBlcygpIHtcbiAgICBsZXQgcnVsZXMgPSB0aGlzLmNvbXBvbmVudC5nZXRBbGxQcm9wZXJ0aWVzKCdycnVsZScpO1xuICAgIGxldCBpID0gMDtcbiAgICBsZXQgbGVuID0gcnVsZXMubGVuZ3RoO1xuICAgIGxldCByZXN1bHQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgbGV0IHZhbHVlID0gcnVsZXNbaV0uZ2V0Rmlyc3RWYWx1ZSgpO1xuICAgICAgcmVzdWx0W3ZhbHVlLmZyZXFdID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSB1aWQgb2YgdGhpcyBldmVudFxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IHVpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZmlyc3RQcm9wKCd1aWQnKTtcbiAgfVxuXG4gIHNldCB1aWQodmFsdWUpIHtcbiAgICB0aGlzLl9zZXRQcm9wKCd1aWQnLCB2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHN0YXJ0IGRhdGVcbiAgICogQHR5cGUge1RpbWV9XG4gICAqL1xuICBnZXQgc3RhcnREYXRlKCkge1xuICAgIHJldHVybiB0aGlzLl9maXJzdFByb3AoJ2R0c3RhcnQnKTtcbiAgfVxuXG4gIHNldCBzdGFydERhdGUodmFsdWUpIHtcbiAgICB0aGlzLl9zZXRUaW1lKCdkdHN0YXJ0JywgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBlbmQgZGF0ZS4gVGhpcyBjYW4gYmUgdGhlIHJlc3VsdCBkaXJlY3RseSBmcm9tIHRoZSBwcm9wZXJ0eSwgb3IgdGhlXG4gICAqIGVuZCBkYXRlIGNhbGN1bGF0ZWQgZnJvbSBzdGFydCBkYXRlIGFuZCBkdXJhdGlvbi4gU2V0dGluZyB0aGUgcHJvcGVydHlcbiAgICogd2lsbCByZW1vdmUgYW55IGR1cmF0aW9uIHByb3BlcnRpZXMuXG4gICAqIEB0eXBlIHtUaW1lfVxuICAgKi9cbiAgZ2V0IGVuZERhdGUoKSB7XG4gICAgbGV0IGVuZERhdGUgPSB0aGlzLl9maXJzdFByb3AoJ2R0ZW5kJyk7XG4gICAgaWYgKCFlbmREYXRlKSB7XG4gICAgICAgIGxldCBkdXJhdGlvbiA9IHRoaXMuX2ZpcnN0UHJvcCgnZHVyYXRpb24nKTtcbiAgICAgICAgZW5kRGF0ZSA9IHRoaXMuc3RhcnREYXRlLmNsb25lKCk7XG4gICAgICAgIGlmIChkdXJhdGlvbikge1xuICAgICAgICAgICAgZW5kRGF0ZS5hZGREdXJhdGlvbihkdXJhdGlvbik7XG4gICAgICAgIH0gZWxzZSBpZiAoZW5kRGF0ZS5pc0RhdGUpIHtcbiAgICAgICAgICAgIGVuZERhdGUuZGF5ICs9IDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVuZERhdGU7XG4gIH1cblxuICBzZXQgZW5kRGF0ZSh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmNvbXBvbmVudC5oYXNQcm9wZXJ0eSgnZHVyYXRpb24nKSkge1xuICAgICAgdGhpcy5jb21wb25lbnQucmVtb3ZlUHJvcGVydHkoJ2R1cmF0aW9uJyk7XG4gICAgfVxuICAgIHRoaXMuX3NldFRpbWUoJ2R0ZW5kJywgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBkdXJhdGlvbi4gVGhpcyBjYW4gYmUgdGhlIHJlc3VsdCBkaXJlY3RseSBmcm9tIHRoZSBwcm9wZXJ0eSwgb3IgdGhlXG4gICAqIGR1cmF0aW9uIGNhbGN1bGF0ZWQgZnJvbSBzdGFydCBkYXRlIGFuZCBlbmQgZGF0ZS4gU2V0dGluZyB0aGUgcHJvcGVydHlcbiAgICogd2lsbCByZW1vdmUgYW55IGBkdGVuZGAgcHJvcGVydGllcy5cbiAgICogQHR5cGUge0R1cmF0aW9ufVxuICAgKi9cbiAgZ2V0IGR1cmF0aW9uKCkge1xuICAgIGxldCBkdXJhdGlvbiA9IHRoaXMuX2ZpcnN0UHJvcCgnZHVyYXRpb24nKTtcbiAgICBpZiAoIWR1cmF0aW9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbmREYXRlLnN1YnRyYWN0RGF0ZVR6KHRoaXMuc3RhcnREYXRlKTtcbiAgICB9XG4gICAgcmV0dXJuIGR1cmF0aW9uO1xuICB9XG5cbiAgc2V0IGR1cmF0aW9uKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuY29tcG9uZW50Lmhhc1Byb3BlcnR5KCdkdGVuZCcpKSB7XG4gICAgICB0aGlzLmNvbXBvbmVudC5yZW1vdmVQcm9wZXJ0eSgnZHRlbmQnKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zZXRQcm9wKCdkdXJhdGlvbicsIHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgbG9jYXRpb24gb2YgdGhlIGV2ZW50LlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IGxvY2F0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9maXJzdFByb3AoJ2xvY2F0aW9uJyk7XG4gIH1cblxuICBzZXQgbG9jYXRpb24odmFsdWUpIHtcbiAgICB0aGlzLl9zZXRQcm9wKCdsb2NhdGlvbicsIHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYXR0ZW5kZWVzIGluIHRoZSBldmVudFxuICAgKiBAdHlwZSB7UHJvcGVydHlbXX1cbiAgICovXG4gIGdldCBhdHRlbmRlZXMoKSB7XG4gICAgLy9YWFg6IFRoaXMgaXMgd2F5IGxhbWUgd2Ugc2hvdWxkIGhhdmUgYSBiZXR0ZXJcbiAgICAvLyAgICAgZGF0YSBzdHJ1Y3R1cmUgZm9yIHRoaXMgbGF0ZXIuXG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50LmdldEFsbFByb3BlcnRpZXMoJ2F0dGVuZGVlJyk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGV2ZW50IHN1bW1hcnlcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCBzdW1tYXJ5KCkge1xuICAgIHJldHVybiB0aGlzLl9maXJzdFByb3AoJ3N1bW1hcnknKTtcbiAgfVxuXG4gIHNldCBzdW1tYXJ5KHZhbHVlKSB7XG4gICAgdGhpcy5fc2V0UHJvcCgnc3VtbWFyeScsIHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZXZlbnQgZGVzY3JpcHRpb24uXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgZGVzY3JpcHRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZpcnN0UHJvcCgnZGVzY3JpcHRpb24nKTtcbiAgfVxuXG4gIHNldCBkZXNjcmlwdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuX3NldFByb3AoJ2Rlc2NyaXB0aW9uJywgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBldmVudCBjb2xvciBmcm9tIFtyZmM3OTg2XShodHRwczovL2RhdGF0cmFja2VyLmlldGYub3JnL2RvYy9odG1sL3JmYzc5ODYpXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgY29sb3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZpcnN0UHJvcCgnY29sb3InKTtcbiAgfVxuXG4gIHNldCBjb2xvcih2YWx1ZSkge1xuICAgIHRoaXMuX3NldFByb3AoJ2NvbG9yJywgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBvcmdhbml6ZXIgdmFsdWUgYXMgYW4gdXJpLiBJbiBtb3N0IGNhc2VzIHRoaXMgaXMgYSBtYWlsdG86IHVyaSwgYnV0XG4gICAqIGl0IGNhbiBhbHNvIGJlIHNvbWV0aGluZyBlbHNlLCBsaWtlIHVybjp1dWlkOi4uLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IG9yZ2FuaXplcigpIHtcbiAgICByZXR1cm4gdGhpcy5fZmlyc3RQcm9wKCdvcmdhbml6ZXInKTtcbiAgfVxuXG4gIHNldCBvcmdhbml6ZXIodmFsdWUpIHtcbiAgICB0aGlzLl9zZXRQcm9wKCdvcmdhbml6ZXInLCB2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHNlcXVlbmNlIHZhbHVlIGZvciB0aGlzIGV2ZW50LiBVc2VkIGZvciBzY2hlZHVsaW5nXG4gICAqIHNlZSB7QHR1dG9yaWFsIHRlcm1pbm9sb2d5fS5cbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGdldCBzZXF1ZW5jZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZmlyc3RQcm9wKCdzZXF1ZW5jZScpO1xuICB9XG5cbiAgc2V0IHNlcXVlbmNlKHZhbHVlKSB7XG4gICAgdGhpcy5fc2V0UHJvcCgnc2VxdWVuY2UnLCB2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHJlY3VycmVuY2UgaWQgZm9yIHRoaXMgZXZlbnQuIFNlZSB7QHR1dG9yaWFsIHRlcm1pbm9sb2d5fSBmb3IgZGV0YWlscy5cbiAgICogQHR5cGUge1RpbWV9XG4gICAqL1xuICBnZXQgcmVjdXJyZW5jZUlkKCkge1xuICAgIHJldHVybiB0aGlzLl9maXJzdFByb3AoJ3JlY3VycmVuY2UtaWQnKTtcbiAgfVxuXG4gIHNldCByZWN1cnJlbmNlSWQodmFsdWUpIHtcbiAgICB0aGlzLl9zZXRUaW1lKCdyZWN1cnJlbmNlLWlkJywgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldC91cGRhdGUgYSB0aW1lIHByb3BlcnR5J3MgdmFsdWUuXG4gICAqIFRoaXMgd2lsbCBhbHNvIHVwZGF0ZSB0aGUgVFpJRCBvZiB0aGUgcHJvcGVydHkuXG4gICAqXG4gICAqIFRPRE86IHRoaXMgbWV0aG9kIGhhbmRsZXMgdGhlIGNhc2Ugd2hlcmUgd2UgYXJlIHN3aXRjaGluZ1xuICAgKiBmcm9tIGEga25vd24gdGltZXpvbmUgdG8gYW4gaW1wbGllZCB0aW1lem9uZSAob25lIHdpdGhvdXQgVFpJRCkuXG4gICAqIFRoaXMgZG9lcyBfbm90XyBoYW5kbGUgdGhlIGNhc2Ugb2YgbW92aW5nIGJldHdlZW4gYSBrbm93blxuICAgKiAgKGJ5IFRpbWV6b25lU2VydmljZSkgdGltZXpvbmUgdG8gYW4gdW5rbm93biB0aW1lem9uZS4uLlxuICAgKlxuICAgKiBXZSB3aWxsIG5vdCBhZGQvcmVtb3ZlL3VwZGF0ZSB0aGUgVlRJTUVaT05FIHN1YmNvbXBvbmVudHNcbiAgICogIGxlYWRpbmcgdG8gaW52YWxpZCBJQ0FMIGRhdGEuLi5cbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BOYW1lICAgICBUaGUgcHJvcGVydHkgbmFtZVxuICAgKiBAcGFyYW0ge1RpbWV9IHRpbWUgICAgICAgICAgIFRoZSB0aW1lIHRvIHNldFxuICAgKi9cbiAgX3NldFRpbWUocHJvcE5hbWUsIHRpbWUpIHtcbiAgICBsZXQgcHJvcCA9IHRoaXMuY29tcG9uZW50LmdldEZpcnN0UHJvcGVydHkocHJvcE5hbWUpO1xuXG4gICAgaWYgKCFwcm9wKSB7XG4gICAgICBwcm9wID0gbmV3IFByb3BlcnR5KHByb3BOYW1lKTtcbiAgICAgIHRoaXMuY29tcG9uZW50LmFkZFByb3BlcnR5KHByb3ApO1xuICAgIH1cblxuICAgIC8vIHV0YyBhbmQgbG9jYWwgZG9uJ3QgZ2V0IGEgdHppZFxuICAgIGlmIChcbiAgICAgIHRpbWUuem9uZSA9PT0gVGltZXpvbmUubG9jYWxUaW1lem9uZSB8fFxuICAgICAgdGltZS56b25lID09PSBUaW1lem9uZS51dGNUaW1lem9uZVxuICAgICkge1xuICAgICAgLy8gcmVtb3ZlIHRoZSB0emlkXG4gICAgICBwcm9wLnJlbW92ZVBhcmFtZXRlcigndHppZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9wLnNldFBhcmFtZXRlcigndHppZCcsIHRpbWUuem9uZS50emlkKTtcbiAgICB9XG5cbiAgICBwcm9wLnNldFZhbHVlKHRpbWUpO1xuICB9XG5cbiAgX3NldFByb3AobmFtZSwgdmFsdWUpIHtcbiAgICB0aGlzLmNvbXBvbmVudC51cGRhdGVQcm9wZXJ0eVdpdGhWYWx1ZShuYW1lLCB2YWx1ZSk7XG4gIH1cblxuICBfZmlyc3RQcm9wKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5jb21wb25lbnQuZ2V0Rmlyc3RQcm9wZXJ0eVZhbHVlKG5hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBldmVudC5cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50LnRvU3RyaW5nKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY29tcGFyZVJhbmdlRXhjZXB0aW9uKGEsIGIpIHtcbiAgaWYgKGFbMF0gPiBiWzBdKSByZXR1cm4gMTtcbiAgaWYgKGJbMF0gPiBhWzBdKSByZXR1cm4gLTE7XG4gIHJldHVybiAwO1xufVxuXG4vKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICogUG9ydGlvbnMgQ29weXJpZ2h0IChDKSBQaGlsaXBwIEtld2lzY2ggKi9cblxuXG4vKipcbiAqIFRoZSBDb21wb25lbnRQYXJzZXIgaXMgdXNlZCB0byBwcm9jZXNzIGEgU3RyaW5nIG9yIGpDYWwgT2JqZWN0LFxuICogZmlyaW5nIGNhbGxiYWNrcyBmb3IgdmFyaW91cyBmb3VuZCBjb21wb25lbnRzLCBhcyB3ZWxsIGFzIGNvbXBsZXRpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciBvcHRpb25zID0ge1xuICogICAvLyB3aGVuIGZhbHNlIG5vIGV2ZW50cyB3aWxsIGJlIGVtaXR0ZWQgZm9yIHR5cGVcbiAqICAgcGFyc2VFdmVudDogdHJ1ZSxcbiAqICAgcGFyc2VUaW1lem9uZTogdHJ1ZVxuICogfTtcbiAqXG4gKiB2YXIgcGFyc2VyID0gbmV3IElDQUwuQ29tcG9uZW50UGFyc2VyKG9wdGlvbnMpO1xuICpcbiAqIHBhcnNlci5vbmV2ZW50KGV2ZW50Q29tcG9uZW50KSB7XG4gKiAgIC8vLi4uXG4gKiB9XG4gKlxuICogLy8gb250aW1lem9uZSwgZXRjLi4uXG4gKlxuICogcGFyc2VyLm9uY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAqXG4gKiB9O1xuICpcbiAqIHBhcnNlci5wcm9jZXNzKHN0cmluZ09yQ29tcG9uZW50KTtcbiAqXG4gKiBAbWVtYmVyb2YgSUNBTFxuICovXG5jbGFzcyBDb21wb25lbnRQYXJzZXIge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBJQ0FMLkNvbXBvbmVudFBhcnNlciBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zICAgICAgICAgICAgICAgICAgIENvbXBvbmVudCBwYXJzZXIgb3B0aW9uc1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMucGFyc2VFdmVudCAgICAgICAgV2hldGhlciBldmVudHMgc2hvdWxkIGJlIHBhcnNlZFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMucGFyc2VUaW1lemVvbmUgICAgV2hldGhlciB0aW1lem9uZXMgc2hvdWxkIGJlIHBhcnNlZFxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIGlmICh0eXBlb2Yob3B0aW9ucykgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKG9wdGlvbnMpKSB7XG4gICAgICB0aGlzW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV2hlbiB0cnVlLCBwYXJzZSBldmVudHNcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuICBwYXJzZUV2ZW50ID0gdHJ1ZTtcblxuICAvKipcbiAgICogV2hlbiB0cnVlLCBwYXJzZSB0aW1lem9uZXNcbiAgICpcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuICBwYXJzZVRpbWV6b25lID0gdHJ1ZTtcblxuXG4gIC8qIFNBWCBsaWtlIGV2ZW50cyBoZXJlIGZvciByZWZlcmVuY2UgKi9cblxuICAvKipcbiAgICogRmlyZWQgd2hlbiBwYXJzaW5nIGlzIGNvbXBsZXRlXG4gICAqIEBjYWxsYmFja1xuICAgKi9cbiAgb25jb21wbGV0ZSA9IC8qIGM4IGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKCkge307XG5cbiAgLyoqXG4gICAqIEZpcmVkIGlmIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgcGFyc2luZy5cbiAgICpcbiAgICogQGNhbGxiYWNrXG4gICAqIEBwYXJhbSB7RXJyb3J9IGVyciBkZXRhaWxzIG9mIGVycm9yXG4gICAqL1xuICBvbmVycm9yID0gLyogYzggaWdub3JlIG5leHQgKi8gZnVuY3Rpb24oZXJyKSB7fTtcblxuICAvKipcbiAgICogRmlyZWQgd2hlbiBhIHRvcCBsZXZlbCBjb21wb25lbnQgKFZUSU1FWk9ORSkgaXMgZm91bmRcbiAgICpcbiAgICogQGNhbGxiYWNrXG4gICAqIEBwYXJhbSB7VGltZXpvbmV9IGNvbXBvbmVudCAgICAgVGltZXpvbmUgb2JqZWN0XG4gICAqL1xuICBvbnRpbWV6b25lID0gLyogYzggaWdub3JlIG5leHQgKi8gZnVuY3Rpb24oY29tcG9uZW50KSB7fTtcblxuICAvKipcbiAgICogRmlyZWQgd2hlbiBhIHRvcCBsZXZlbCBjb21wb25lbnQgKFZFVkVOVCkgaXMgZm91bmQuXG4gICAqXG4gICAqIEBjYWxsYmFja1xuICAgKiBAcGFyYW0ge0V2ZW50fSBjb21wb25lbnQgICAgVG9wIGxldmVsIGNvbXBvbmVudFxuICAgKi9cbiAgb25ldmVudCA9IC8qIGM4IGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKGNvbXBvbmVudCkge307XG5cbiAgLyoqXG4gICAqIFByb2Nlc3MgYSBzdHJpbmcgb3IgcGFyc2UgaWNhbCBvYmplY3QuICBUaGlzIGZ1bmN0aW9uIGl0c2VsZiB3aWxsIHJldHVyblxuICAgKiBub3RoaW5nIGJ1dCB3aWxsIHN0YXJ0IHRoZSBwYXJzaW5nIHByb2Nlc3MuXG4gICAqXG4gICAqIEV2ZW50cyBtdXN0IGJlIHJlZ2lzdGVyZWQgcHJpb3IgdG8gY2FsbGluZyB0aGlzIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIHtDb21wb25lbnR8U3RyaW5nfE9iamVjdH0gaWNhbCAgICAgIFRoZSBjb21wb25lbnQgdG8gcHJvY2VzcyxcbiAgICogICAgICAgIGVpdGhlciBpbiBpdHMgZmluYWwgZm9ybSwgYXMgYSBqQ2FsIE9iamVjdCwgb3Igc3RyaW5nIHJlcHJlc2VudGF0aW9uXG4gICAqL1xuICBwcm9jZXNzKGljYWwpIHtcbiAgICAvL1RPRE86IHRoaXMgaXMgc3luYyBub3cgaW4gdGhlIGZ1dHVyZSB3ZSB3aWxsIGhhdmUgYSBpbmNyZW1lbnRhbCBwYXJzZXIuXG4gICAgaWYgKHR5cGVvZihpY2FsKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGljYWwgPSBwYXJzZShpY2FsKTtcbiAgICB9XG5cbiAgICBpZiAoIShpY2FsIGluc3RhbmNlb2YgQ29tcG9uZW50KSkge1xuICAgICAgaWNhbCA9IG5ldyBDb21wb25lbnQoaWNhbCk7XG4gICAgfVxuXG4gICAgbGV0IGNvbXBvbmVudHMgPSBpY2FsLmdldEFsbFN1YmNvbXBvbmVudHMoKTtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IGxlbiA9IGNvbXBvbmVudHMubGVuZ3RoO1xuICAgIGxldCBjb21wb25lbnQ7XG5cbiAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBjb21wb25lbnQgPSBjb21wb25lbnRzW2ldO1xuXG4gICAgICBzd2l0Y2ggKGNvbXBvbmVudC5uYW1lKSB7XG4gICAgICAgIGNhc2UgJ3Z0aW1lem9uZSc6XG4gICAgICAgICAgaWYgKHRoaXMucGFyc2VUaW1lem9uZSkge1xuICAgICAgICAgICAgbGV0IHR6aWQgPSBjb21wb25lbnQuZ2V0Rmlyc3RQcm9wZXJ0eVZhbHVlKCd0emlkJyk7XG4gICAgICAgICAgICBpZiAodHppZCkge1xuICAgICAgICAgICAgICB0aGlzLm9udGltZXpvbmUobmV3IFRpbWV6b25lKHtcbiAgICAgICAgICAgICAgICB0emlkOiB0emlkLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogY29tcG9uZW50XG4gICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3ZldmVudCc6XG4gICAgICAgICAgaWYgKHRoaXMucGFyc2VFdmVudCkge1xuICAgICAgICAgICAgdGhpcy5vbmV2ZW50KG5ldyBFdmVudChjb21wb25lbnQpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy9YWFg6IGlkZWFsbHkgd2Ugc2hvdWxkIGRvIGEgXCJuZXh0VGlja1wiIGhlcmVcbiAgICAvLyAgICAgc28gaW4gYWxsIGNhc2VzIHRoaXMgaXMgYWN0dWFsbHkgYXN5bmMuXG4gICAgdGhpcy5vbmNvbXBsZXRlKCk7XG4gIH1cbn1cblxuLyogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqIFBvcnRpb25zIENvcHlyaWdodCAoQykgUGhpbGlwcCBLZXdpc2NoICovXG5cblxuLyoqXG4gKiBUaGUgbWFpbiBJQ0FMIG1vZHVsZS4gUHJvdmlkZXMgYWNjZXNzIHRvIGV2ZXJ5dGhpbmcgZWxzZS5cbiAqXG4gKiBAYWxpYXMgSUNBTFxuICogQG5hbWVzcGFjZSBJQ0FMXG4gKiBAcHJvcGVydHkge0lDQUwuZGVzaWdufSBkZXNpZ25cbiAqIEBwcm9wZXJ0eSB7SUNBTC5oZWxwZXJzfSBoZWxwZXJzXG4gKi9cbnZhciBJQ0FMbW9kdWxlID0ge1xuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBjaGFyYWN0ZXJzIGJlZm9yZSBpQ2FsZW5kYXIgbGluZSBmb2xkaW5nIHNob3VsZCBvY2N1clxuICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgKiBAZGVmYXVsdCA3NVxuICAgKi9cbiAgZm9sZExlbmd0aDogNzUsXG5cbiAgZGVidWc6IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBUaGUgY2hhcmFjdGVyKHMpIHRvIGJlIHVzZWQgZm9yIGEgbmV3bGluZS4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgcHJvdmlkZWQgYnlcbiAgICogcmZjNTU0NS5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQGRlZmF1bHQgXCJcXHJcXG5cIlxuICAgKi9cbiAgbmV3TGluZUNoYXI6ICdcXHJcXG4nLFxuXG4gIEJpbmFyeSxcbiAgQ29tcG9uZW50LFxuICBDb21wb25lbnRQYXJzZXIsXG4gIER1cmF0aW9uLFxuICBFdmVudCxcbiAgUGVyaW9kLFxuICBQcm9wZXJ0eSxcbiAgUmVjdXIsXG4gIFJlY3VyRXhwYW5zaW9uLFxuICBSZWN1ckl0ZXJhdG9yLFxuICBUaW1lLFxuICBUaW1lem9uZSxcbiAgVGltZXpvbmVTZXJ2aWNlLFxuICBVdGNPZmZzZXQsXG4gIFZDYXJkVGltZSxcblxuICBwYXJzZSxcbiAgc3RyaW5naWZ5LFxuXG4gIGRlc2lnbixcbiAgaGVscGVyc1xufTtcblxuZXhwb3J0IHsgSUNBTG1vZHVsZSBhcyBkZWZhdWx0IH07XG4iLCIvKiAtLS0gT2JzaWRpYW4gUGx1Z2luOiBQZXJpb2RpYyBOb3RlcyBDYWxlbmRhciBWaWV3IC0tLVxuICBEZXZlbG9wZXI6IFRpbSBXaWxsaWFtc1xuICBUaGlzIHBsdWdpbiB1c2VzIGxpYnJhcnk6IGh0dHBzOi8vYXBwLnVucGtnLmNvbS9pY2FsLmpzQDIuMi4xL2ZpbGVzL2Rpc3QvaWNhbC5lczUubWluLmNqcyAoYykgMjAyNCBDaHJpcyBMYXdsZXksIE1JVCBMaWNlbnNlICBcbiovXG5cbmltcG9ydCBJQ0FMIGZyb20gJ2ljYWwuanMnO1xuXG4vLyBJbXBvcnQgbmVjZXNzYXJ5IGNvbXBvbmVudHMgZnJvbSB0aGUgT2JzaWRpYW4gQVBJLlxuY29uc3QgeyBQbHVnaW4sIEl0ZW1WaWV3LCBQbHVnaW5TZXR0aW5nVGFiLCBOb3RpY2UsIFRGaWxlLCBURm9sZGVyLCBTZXR0aW5nLCBNb2RhbCwgTWVudSwgQWJzdHJhY3RJbnB1dFN1Z2dlc3QsIG1vbWVudCwgTWFya2Rvd25SZW5kZXJlciwgc2V0SWNvbiwgUGxhdGZvcm0gfSA9IHJlcXVpcmUoXCJvYnNpZGlhblwiKTtcblxuLy8gRGVmaW5lIGEgdW5pcXVlIHR5cGUgZm9yIHRoaXMgcGx1Z2luJ3Mgdmlldy5cbmNvbnN0IFZJRVdfVFlQRV9QRVJJT0QgPSBcImNhbGVuZGFyLXBlcmlvZC13ZWVrXCI7XG5cbi8vIERlZmluZSB0aGUgZGVmYXVsdCBzZXR0aW5ncyBmb3IgdGhlIHBsdWdpbi4gVGhpcyBvYmplY3QgaXMgdXNlZCBhcyBhIGZhbGxiYWNrIGFuZCBmb3IgcmVzZXR0aW5nIGNvbmZpZ3VyYXRpb25zLlxuY29uc3QgREVGQVVMVF9TRVRUSU5HUyA9IHtcbiAgICAvLyBHZW5lcmFsIERpc3BsYXlcbiAgICBhcHBsaWVkVGhlbWU6IFwiXCIsXG4gICAgZm9udFNpemU6IFwiMTJweFwiLFxuICAgIGRheU51bWJlckZvbnRTaXplOiBcIjE1cHhcIixcbiAgICBuYXZCdXR0b25IZWlnaHQ6IFwiMjhweFwiLFxuICAgIGhlYWRlclJvd0JvbGQ6IGZhbHNlLFxuICAgIHB3Q29sdW1uQm9sZDogZmFsc2UsXG4gICAgc2hvd0NhbGVuZGFyR3JpZExpbmVzOiBmYWxzZSxcbiAgICBjYWxlbmRhckdyaWRHYXBXaWR0aDogXCIxcHhcIixcbiAgICBjb250ZW50Qm9yZGVyV2lkdGg6IFwiMXB4XCIsXG4gICAgbW9udGhDb2xvckxpZ2h0OiBcInJnYmEoNTEsIDUxLCA1MSwgMSlcIiwgLy8gRGFyayBHcmV5IGZvciBsaWdodCBtb2RlXG4gICAgbW9udGhDb2xvckRhcms6IFwicmdiYSgyNTUsIDI1NSwgMjU1LCAxKVwiLCAvLyBXaGl0ZSBmb3IgZGFyayBtb2RlXG4gICAgeWVhckNvbG9yTGlnaHQ6IFwicmdiYSgyNTUsIDAsIDAsIDEpXCIsIC8vIERhcmtlciByZWQgZm9yIGxpZ2h0IG1vZGVcbiAgICB5ZWFyQ29sb3JEYXJrOiBcInJnYmEoMjU1LCA4MCwgODAsIDEpXCIsICAvLyBCcmlnaHRlciByZWQgZm9yIGRhcmsgbW9kZVxuICAgIGN1cnJlbnRIaWdobGlnaHRMYWJlbENvbG9yTGlnaHQ6IFwicmdiYSgyNTUsIDgwLCA4MCwgMSlcIiwgLy8gQSBkaXN0aW5jdCBidXQgcmVhZGFibGUgcmVkIGZvciBsaWdodCBtb2RlXG4gICAgY3VycmVudEhpZ2hsaWdodExhYmVsQ29sb3JEYXJrOiBcInJnYmEoMjU1LCA4MCwgODAsIDEpXCIsICAvLyBBIGJyaWdodGVyIHJlZCBmb3IgZGFyayBtb2RlXG4gICAgbW9udGhUaXRsZUZvcm1hdDogXCJNTU1NIFlZWVlcIixcbiAgICBtYWluTW9udGhZZWFyVGl0bGVGb250U2l6ZTogXCIyMnB4XCIsXG4gICAgbWFpbk1vbnRoVGl0bGVCb2xkOiB0cnVlLFxuICAgIG1haW5ZZWFyVGl0bGVCb2xkOiBmYWxzZSxcbiAgICB0b2RheUhpZ2hsaWdodFNpemU6IFwiMi4yZW1cIixcbiAgICB0YWJUaXRsZUJvbGQ6IGZhbHNlLFxuICAgIHRhYkRpc3BsYXlNb2RlOiBcImljb25Pbmx5XCIsXG4gICAgbW9iaWxlVGFiRGlzcGxheU1vZGU6IFwiaWNvbk9ubHlcIixcbiAgICBjb2xsYXBzZWROb3RlR3JvdXBzOiB7fSxcbiAgICB0YWJPcmRlcjogW1wic2NyYXRjaFwiLCBcIm5vdGVzXCIsIFwidGFza3NcIiwgXCJhc3NldHNcIl0sXG4gICAgdGFiSWNvbnM6IHtcbiAgICAgICAgc2NyYXRjaDogXCJwZW5jaWxcIixcbiAgICAgICAgbm90ZXM6IFwiZmlsZXNcIixcbiAgICAgICAgdGFza3M6IFwiY2hlY2stY2lyY2xlXCIsXG4gICAgICAgIHBpbm5lZDogXCJwaW5cIixcbiAgICAgICAgYXNzZXRzOiBcImltYWdlLWZpbGVcIlxuICAgIH0sXG4gICAgYXNzZXRzTG9va2JhY2tEYXlzOiA3LFxuICAgIGFzc2V0c0RlZmF1bHRWaWV3OiAnZ3JpZCcsXG4gICAgdGFiVmlzaWJpbGl0eToge1xuICAgICAgICBzY3JhdGNoOiB0cnVlLFxuICAgICAgICBub3RlczogdHJ1ZSxcbiAgICAgICAgdGFza3M6IHRydWUsXG4gICAgICAgIGFzc2V0czogdHJ1ZSxcbiAgICB9LFxuICAgIGNhbGVuZGFyTGF5b3V0OiBcIm5vcm1hbFwiLFxuICAgIHdlZWtTdGFydERheTogXCJzdW5kYXlcIixcblxuICAgIC8vIFNjcmF0Y2hwYWRcbiAgICBmaXhlZE5vdGVGaWxlOiBcIlNjcmF0Y2hQYWQubWRcIixcbiAgICBzY3JhdGNoRm9udFNpemU6IFwiMTRweFwiLFxuICAgIHNjcmF0Y2hCb2xkOiBmYWxzZSxcbiAgICBzY3JhdGNoRm9udEZhbWlseTogXCJcIixcbiAgICBzY3JhdGNocGFkT3BlbkFjdGlvbjogXCJuZXctdGFiXCIsXG4gICAgc2NyYXRjaHBhZEhpZ2hsaWdodENvbG9yOiBcInJnYmEoMjU1LCAxNjUsIDAsIDAuNClcIixcbiAgICBzY3JhdGNocGFkOiB7XG4gICAgICAgIHNob3dQcmV2aWV3VG9nZ2xlOiB0cnVlLFxuICAgICAgICBzaG93QWRkVGFza0J1dHRvbjogdHJ1ZSxcbiAgICAgICAgdGFza0Zvcm1hdDogXCItIFsgXSAjVGFnIHwg8J+ThSB7ZnJpZGF5fVwiXG4gICAgfSxcblxuICAgIC8vIE5vdGVzIFRhYlxuICAgIGlnbm9yZUZvbGRlcnM6IFtdLFxuICAgIHBpblRhZzogXCJwaW5cIixcbiAgICBub3Rlc1ZpZXdNb2RlOiBcInJlY2VudFwiLFxuICAgIG5vdGVzRm9udFNpemU6IFwiMTRweFwiLFxuICAgIG5vdGVzQm9sZDogZmFsc2UsXG4gICAgbm90ZXNPcGVuQWN0aW9uOiBcIm5ldy10YWJcIixcbiAgICBub3Rlc0xpbmVIZWlnaHQ6IDEuMixcbiAgICBub3Rlc0xvb2tiYWNrRGF5czogNyxcbiAgICBzaG93Tm90ZVN0YXR1c0RvdHM6IHRydWUsXG4gICAgc2hvd05vdGVUb29sdGlwczogdHJ1ZSxcbiAgICBwaW5uZWROb3Rlc1NvcnRPcmRlcjogJ2EteicsIC8vIGNhbiBiZSAnYS16JyBvciAnY3VzdG9tJ1xuICAgIHBpbm5lZE5vdGVzQ3VzdG9tT3JkZXI6IFtdLCAgLy8gU3RvcmVzIGFuIGFycmF5IG9mIG5vdGUgcGF0aHMgZm9yIGN1c3RvbSBvcmRlclxuXG4gICAgLy9Bc3NldHMgXG4gICAgaGlkZGVuQXNzZXRUeXBlczogXCJiYXNlLGNhbnZhc1wiLFxuICAgIHNob3dVbnVzZWRBc3NldHNJbmRpY2F0b3I6IHRydWUsXG4gICAgYXNzZXRzT3BlbkFjdGlvbjogXCJuZXctdGFiXCIsXG5cbiAgICAvLyBDYWxlbmRhciBEb3RzICYgUG9wdXBzXG4gICAgc2hvd090aGVyTm90ZURvdDogdHJ1ZSxcbiAgICBzaG93TW9kaWZpZWRGaWxlRG90OiB0cnVlLFxuICAgIG90aGVyTm90ZUlnbm9yZUZvbGRlcnM6IFtdLFxuICAgIG90aGVyTm90ZUhvdmVyRGVsYXk6IDgwMCxcbiAgICBwb3B1cEhpZGVEZWxheTogNTAsXG4gICAgcG9wdXBHYXA6IC0yLFxuICAgIG90aGVyTm90ZVBvcHVwRm9udFNpemU6IFwiMTRweFwiLFxuICAgIGNhbGVuZGFyRG90U2l6ZTogNCxcbiAgICBzaG93QXNzZXREb3Q6IHRydWUsXG4gICAgYXNzZXREb3RDb2xvcjogXCJyZ2JhKDI1NSwgMCwgMCwgMSlcIiwgLy8gUmVkXG4gICAgY2FsZW5kYXJFdmVudERvdENvbG9yOiAncmdiYSgxNDgsIDE0OCwgMTQ4LCAxKScsIC8vIEdyZXlcblxuICAgIGFzc2V0SWdub3JlRm9sZGVyczogW10sXG5cbiAgICBzaG93UFdDb2x1bW5TZXBhcmF0b3I6IHRydWUsXG4gICAgcHdDb2x1bW5TZXBhcmF0b3JDb2xvcjogXCJyZ2JhKDEyOCwgMTI4LCAxMjgsIDAuMilcIiwgLy8gR3JleSBzZXBhcmF0b3IgbGluZVxuXG4gICAgcHdDb2x1bW5Gb250Q29sb3JMaWdodDogXCJyZ2JhKDUxLCA1MSwgNTEsIDAuNilcIiwgLy8gRGFyayBncmV5IGZvciBsaWdodCBtb2RlXG4gICAgcHdDb2x1bW5Gb250Q29sb3JEYXJrOiBcInJnYmEoMjU1LCAyNTUsIDI1NSwgMC42KVwiLCAvLyBXaGl0ZSBmb3IgZGFyayBtb2RlXG4gICAgd2Vla051bWJlckZvbnRDb2xvckxpZ2h0OiBcInJnYmEoNTEsIDUxLCA1MSwgMC42KVwiLCAvLyBEYXJrIGdyZXkgZm9yIGxpZ2h0IG1vZGVcbiAgICB3ZWVrTnVtYmVyRm9udENvbG9yRGFyazogXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNilcIiwgLy8gV2hpdGUgZm9yIGRhcmsgbW9kZVxuICAgIGRheUhlYWRlckZvbnRDb2xvckxpZ2h0OiBcInJnYmEoNTEsIDUxLCA1MSwgMC42KVwiLCAvLyBEYXJrIGdyZXkgZm9yIGxpZ2h0IG1vZGVcbiAgICBkYXlIZWFkZXJGb250Q29sb3JEYXJrOiBcInJnYmEoMjU1LCAyNTUsIDI1NSwgMC42KVwiLCAvLyBXaGl0ZSBmb3IgZGFyayBtb2RlXG5cbiAgICBkYXlDZWxsRm9udENvbG9yTGlnaHQ6IFwicmdiYSg1MSwgNTEsIDUxLCAxKVwiLCAvLyBDdXJyZW50IG1vbnRoIGRhdGVzIC0gbGlnaHRcbiAgICBkYXlDZWxsRm9udENvbG9yRGFyazogXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIDEpXCIsIC8vIEN1cnJlbnQgbW9udGggZGF0ZXMgLSBkYXJrXG4gICAgb3RoZXJNb250aEZvbnRDb2xvckxpZ2h0OiBcInJnYmEoMTUzLCAxNTMsIDE1MywgMC42KVwiLCAvLyBQcmV2aW91cy9uZXh0IG1vbnRoIGRhdGVzIC0gbGlnaHRcbiAgICBvdGhlck1vbnRoRm9udENvbG9yRGFyazogXCJyZ2JhKDE1MywgMTUzLCAxNTMsIDAuNilcIiwgLy8gUHJldmlvdXMvbmV4dCBtb250aCBkYXRlcyAtIGRhcmtcblxuICAgIC8vIFRhc2sgQ291bnQgQmFkZ2VcbiAgICB0YXNrSW5kaWNhdG9yU3R5bGU6IFwiaGVhdG1hcFwiLCAvLyAnbm9uZScsICdiYWRnZScsIG9yICdoZWF0bWFwJ1xuICAgIHRhc2tCYWRnZUZvbnRTaXplOiBcIjExcHhcIixcbiAgICB0YXNrQmFkZ2VDb2xvcjogXCJyZ2JhKDEwMCwgMTQ5LCAyMzcsIDAuNilcIiwgLy8gQ29ybmZsb3dlciBCbHVlXG4gICAgdGFza0JhZGdlRm9udENvbG9yOiBcInJnYmEoMjU1LCAyNTUsIDI1NSwgMSlcIiwgLy8gV2hpdGVcbiAgICB0YXNrSGVhdG1hcFN0YXJ0Q29sb3I6IFwicmdiYSgxMDAsIDE0OSwgMjM3LCAwLjMpXCIsIC8vIENvcm5mbG93ZXIgQmx1ZVxuICAgIHRhc2tIZWF0bWFwTWlkQ29sb3I6IFwicmdiYSgyNTUsIDEyNywgODAsIDAuNDUpXCIsICAgIC8vIENvcmFsXG4gICAgdGFza0hlYXRtYXBFbmRDb2xvcjogXCJyZ2JhKDI1NSwgNzEsIDcxLCAwLjYpXCIsICAgICAvLyBSZWRcbiAgICB0YXNrSGVhdG1hcE1pZHBvaW50OiA1LFxuICAgIHRhc2tIZWF0bWFwTWF4cG9pbnQ6IDEwLFxuICAgIHNob3dUYXNrRG90OiBmYWxzZSxcbiAgICB0YXNrRG90Q29sb3I6IFwicmdiYSgyMDAsIDEwMCwgMjAwLCAxKVwiLFxuXG4gICAgLy8gRGFpbHkgTm90ZXNcbiAgICBkYWlseU5vdGVzRm9sZGVyOiBcIkRhaWx5IE5vdGVzXCIsXG4gICAgZGFpbHlOb3RlRGF0ZUZvcm1hdDogXCJZWVlZLU1NLUREXCIsXG4gICAgZGFpbHlOb3RlVGVtcGxhdGVQYXRoOiBcIlwiLFxuICAgIGRhaWx5Tm90ZU9wZW5BY3Rpb246IFwibmV3LXRhYlwiLFxuXG4gICAgLy9wZXJpb2QgLyB3ZWVrIG51bWJlcnMgXG4gICAgc2hvd1dlZWtOdW1iZXJzOiB0cnVlLFxuICAgIHdlZWtOdW1iZXJUeXBlOiBcImNhbGVuZGFyXCIsIC8vICdwZXJpb2QnIG9yICdjYWxlbmRhcidcbiAgICB3ZWVrTnVtYmVyQ29sdW1uTGFiZWw6IFwiQ1dcIixcblxuICAgIC8vY2FsZW5kYXIgZXZlbnRzIChmcm9tIElDUykgc2V0dGluZ3NcbiAgICBpY3NVcmw6ICcnLFxuICAgIHNob3dJY3NEb3Q6IHRydWUsXG4gICAgaWNzUmVmcmVzaEludGVydmFsOiA2MCwgLy8gaW4gbWludXRlc1xuICAgIGNhbGVuZGFyRXZlbnRzUGxhY2Vob2xkZXI6ICclJUNBTEVOREFSX0VWRU5UUyUlJyxcbiAgICBjYWxlbmRhckV2ZW50c0Zvcm1hdDogJy0ge3tzdGFydFRpbWV9fSAtIHt7ZW5kVGltZX19OiB7e3N1bW1hcnl9fScsXG4gICAgY2FsZW5kYXJFdmVudEluZGljYXRvclN0eWxlOiAnZG90JywgLy8gT3B0aW9uczogJ2RvdCcsICdoZWF0bWFwJywgJ2JhZGdlJ1xuXG4gICAgLy8gRnVuY3Rpb25hbFxuICAgIGF1dG9SZWxvYWRJbnRlcnZhbDogNTAwMCxcbiAgICBzdGFydE9mUGVyaW9kMURhdGU6IFwiMjAyNS0wMy0wMlwiLFxuICAgIHNob3dQV0NvbHVtbjogZmFsc2UsXG4gICAgcHdGb3JtYXQ6IFwiUCNXI1wiLFxuICAgIGVuYWJsZVJvd0hpZ2hsaWdodDogdHJ1ZSxcbiAgICBlbmFibGVDb2x1bW5IaWdobGlnaHQ6IHRydWUsXG4gICAgZW5hYmxlUm93VG9EYXRlSGlnaGxpZ2h0OiBmYWxzZSxcbiAgICBoaWdobGlnaHRDdXJyZW50V2VlazogdHJ1ZSxcblxuICAgIC8vIENvbG9yc1xuICAgIHNlbGVjdGVkVGFiQ29sb3I6IFwicmdiYSgxMDIsIDEwMiwgMTAyLCAxKVwiLFxuICAgIHRvZGF5SGlnaGxpZ2h0Q29sb3JMaWdodDogXCJyZ2JhKDI1NSwgODAsIDgwLCAwLjQwKVwiLFxuICAgIHRvZGF5SGlnaGxpZ2h0Q29sb3JEYXJrOiBcInJnYmEoMjU1LCA4MCwgODAsIDAuNzUpXCIsXG4gICAgbm90ZXNIb3ZlckNvbG9yOiBcInJnYmEoMTcxLCAxNzEsIDE3MSwgMC4xNSlcIixcbiAgICBkYWlseU5vdGVEb3RDb2xvcjogXCJyZ2JhKDc0LCAxNDQsIDIyNiwgMSlcIixcbiAgICBub3RlQ3JlYXRlZENvbG9yOiBcInJnYmEoNzYsIDE3NSwgODAsIDEpXCIsXG4gICAgbm90ZU1vZGlmaWVkQ29sb3I6IFwicmdiYSgyNTUsIDE1MiwgMCwgMSlcIixcbiAgICByb3dIaWdobGlnaHRDb2xvckxpZ2h0OiBcInJnYmEoMTYzLCAxNjMsIDE2MywgMC4yKVwiLCAvLyBMaWdodGVyIEdyZXlcbiAgICByb3dIaWdobGlnaHRDb2xvckRhcms6IFwicmdiYSg1MSwgNTEsIDUxLCAwLjcpXCIsICAgICAvLyBEYXJrIEdyZXlcbiAgICBkYXRlQ2VsbEhvdmVyQ29sb3JMaWdodDogXCJyZ2JhKDEwNSwgMTA1LCAxMDUsIDAuNzUpXCIsICAgICAvLyBMaWdodCBHcmV5XG4gICAgZGF0ZUNlbGxIb3ZlckNvbG9yRGFyazogXCJyZ2JhKDUxLCA1MSwgNTEsIDEpXCIsXG4gICAgYXNzZXREb3RDb2xvcjogXCJyZ2JhKDI1NSwgMCwgMCwgMSlcIixcbiAgICB0b2RheUhpZ2hsaWdodFN0eWxlOiBcImNpcmNsZVwiLCAvLyAnY2VsbCcgb3IgJ2NpcmNsZSdcbiAgICB0b2RheUNpcmNsZUNvbG9yTGlnaHQ6IFwicmdiYSgyNTUsIDgwLCA4MCwgMC40MClcIixcbiAgICB0b2RheUNpcmNsZUNvbG9yRGFyazogXCJyZ2JhKDI1NSwgODAsIDgwLCAwLjc1KVwiLFxuICAgIGhpZ2hsaWdodFRvZGF5TGFiZWxzOiB0cnVlLFxuICAgIGhpZ2hsaWdodFRvZGF5UFdMYWJlbDogdHJ1ZSxcbiAgICBoaWdobGlnaHRUb2RheURheUhlYWRlcjogdHJ1ZSxcbiAgICBoaWdobGlnaHRXZWVrZW5kczogZmFsc2UsXG4gICAgd2Vla2VuZFNoYWRlQ29sb3JMaWdodDogXCJyZ2JhKDE2MywgMTYzLCAxNjMsIDAuMTUpXCIsIC8vIFN1YnRsZSBncmV5IGZvciBsaWdodCB0aGVtZVxuICAgIHdlZWtlbmRTaGFkZUNvbG9yRGFyazogXCJyZ2JhKDUxLCA1MSwgNTEsIDAuNClcIiwgLy8gU3VidGxlIGdyZXkgZm9yIGRhcmsgdGhlbWVcblxuXG4gICAgLy8gV2Vla2x5IE5vdGVzIChORVcpXG4gICAgZW5hYmxlV2Vla2x5Tm90ZXM6IHRydWUsXG4gICAgd2Vla2x5Tm90ZUZvbGRlcjogXCJXZWVrbHkgTm90ZXNcIixcbiAgICB3ZWVrbHlOb3RlRm9ybWF0OiBcIllZWVktW1ddQ1dcIiwgLy8gZS5nLiwgMjAyNS1XMzhcbiAgICB3ZWVrbHlOb3RlVGVtcGxhdGU6IFwiXCIsXG4gICAgc2hvd1dlZWtseU5vdGVEb3Q6IHRydWUsXG4gICAgd2Vla2x5Tm90ZURvdENvbG9yOiBcInJnYmEoMTI4LCAxMjgsIDEyOCwgMSlcIixcblxuICAgIC8vIFRhc2tzIFRhYiBTZXR0aW5nc1xuICAgIHRhc2tJZ25vcmVGb2xkZXJzOiBbXSxcbiAgICB0YXNrU29ydE9yZGVyOiBcImR1ZURhdGVcIixcbiAgICB0YXNrR3JvdXBCeTogXCJkYXRlXCIsXG4gICAgdGFza0RhdGVHcm91cHNUb1Nob3c6IFtcIm92ZXJkdWVcIiwgXCJ0b2RheVwiLCBcInRvbW9ycm93XCIsIFwibmV4dDdkYXlzXCIsIFwiZnV0dXJlXCJdLFxuICAgIHRhc2tUZXh0VHJ1bmNhdGU6IGZhbHNlLFxuICAgIHNob3dDb21wbGV0ZWRUYXNrc1RvZGF5OiB0cnVlLFxuICAgIHRhc2tIZWFkaW5nRm9udFNpemU6IFwiMTNweFwiLFxuICAgIHRhc2tUZXh0Rm9udFNpemU6IFwiMTRweFwiLFxuICAgIHRhc2tHcm91cEljb25zOiB7XG4gICAgICAgIG92ZXJkdWU6IFwiYWxhcm0tY2xvY2stb2ZmXCIsXG4gICAgICAgIHRvZGF5OiBcInRhcmdldFwiLFxuICAgICAgICB0b21vcnJvdzogXCJhcnJvdy1yaWdodFwiLFxuICAgICAgICBuZXh0N2RheXM6IFwiY2FsZW5kYXItZGF5c1wiLFxuICAgICAgICBmdXR1cmU6IFwidGVsZXNjb3BlXCIsXG4gICAgICAgIG5vRGF0ZTogXCJoZWxwLWNpcmNsZVwiLFxuICAgICAgICB0YWc6IFwidGFnXCJcbiAgICB9LFxuICAgIHRhc2tHcm91cENvbG9yT3ZlcmR1ZTogXCJyZ2JhKDQwLCA0MCwgNDAsIDAuMTUpXCIsXG4gICAgdGFza0dyb3VwQ29sb3JUb2RheTogXCJyZ2JhKDYwLCA2MCwgNjAsIDAuMTUpXCIsXG4gICAgdGFza0dyb3VwQ29sb3JUb21vcnJvdzogXCJyZ2JhKDgwLCA4MCwgODAsIDAuMTUpXCIsXG4gICAgdGFza0dyb3VwQ29sb3JOZXh0N0RheXM6IFwicmdiYSgxMDAsIDEwMCwgMTAwLCAwLjE1KVwiLFxuICAgIHRhc2tHcm91cENvbG9yRnV0dXJlOiBcInJnYmEoMTIwLCAxMjAsIDEyMCwgMC4xNSlcIixcbiAgICB0YXNrR3JvdXBDb2xvck5vRGF0ZTogXCJyZ2JhKDE0MCwgMTQwLCAxNDAsIDAuMTUpXCIsXG4gICAgdGFza0dyb3VwQ29sb3JUYWc6IFwicmdiYSg0MCwgNDAsIDQwLCAwLjE1KVwiLFxuICAgIHNob3dQcmV2aWV3VG9nZ2xlOiB0cnVlLFxuICAgIHNob3dBZGRUYXNrQnV0dG9uOiB0cnVlLFxuICAgIGNvbGxhcHNlZFRhc2tHcm91cHM6IHt9LFxuICAgIGNvbGxhcHNlZEFzc2V0R3JvdXBzOiB7fSxcbn07XG5cbi8vIEEgc3RyaW5nIGNvbnRhaW5pbmcgYWxsIHRoZSBDU1MgZm9yIHRoZSBwbHVnaW4uIEl0J3MgaW5qZWN0ZWQgaW50byB0aGUgZG9jdW1lbnQgaGVhZCBvbiBsb2FkLlxuY29uc3QgUExVR0lOX1NUWUxFUyA9IGBcbmJvZHkudGhlbWUtbGlnaHQge1xuICAgIC0tbW9udGgtY29sb3ItdGhlbWVkOiB2YXIoLS1tb250aC1jb2xvci1saWdodCk7XG4gICAgLS10b2RheS1jaXJjbGUtY29sb3ItdGhlbWVkOiB2YXIoLS10b2RheS1jaXJjbGUtY29sb3ItbGlnaHQpO1xuICAgIC0tdG9kYXktaGlnaGxpZ2h0LWNvbG9yLXRoZW1lZDogdmFyKC0tdG9kYXktaGlnaGxpZ2h0LWNvbG9yLWxpZ2h0KTtcbiAgICAtLWRhdGUtY2VsbC1ob3Zlci1jb2xvci10aGVtZWQ6IHZhcigtLWRhdGUtY2VsbC1ob3Zlci1jb2xvci1saWdodCk7XG4gICAgLS1wdy1jb2x1bW4tZm9udC1jb2xvci10aGVtZWQ6IHZhcigtLXB3LWNvbHVtbi1mb250LWNvbG9yLWxpZ2h0KTtcbiAgICAtLXdlZWstbnVtYmVyLWZvbnQtY29sb3ItdGhlbWVkOiB2YXIoLS13ZWVrLW51bWJlci1mb250LWNvbG9yLWxpZ2h0KTtcbiAgICAtLWRheS1oZWFkZXItZm9udC1jb2xvci10aGVtZWQ6IHZhcigtLWRheS1oZWFkZXItZm9udC1jb2xvci1saWdodCk7XG4gICAgLS1kYXktY2VsbC1mb250LWNvbG9yLXRoZW1lZDogdmFyKC0tZGF5LWNlbGwtZm9udC1jb2xvci1saWdodCk7XG4gICAgLS1vdGhlci1tb250aC1mb250LWNvbG9yLXRoZW1lZDogdmFyKC0tb3RoZXItbW9udGgtZm9udC1jb2xvci1saWdodCk7XG4gICAgLS13ZWVrZW5kLXNoYWRlLWNvbG9yLXRoZW1lZDogdmFyKC0td2Vla2VuZC1zaGFkZS1jb2xvci1saWdodCk7XG4gICAgLS1yb3ctaGlnaGxpZ2h0LWNvbG9yLXRoZW1lZDogdmFyKC0tcm93LWhpZ2hsaWdodC1jb2xvci1saWdodCk7XG4gICAgLS15ZWFyLWNvbG9yLXRoZW1lZDogdmFyKC0teWVhci1jb2xvci1saWdodCk7XG4gICAgLS1jdXJyZW50LWxhYmVsLWhpZ2hsaWdodC1jb2xvci10aGVtZWQ6IHZhcigtLWN1cnJlbnQtaGlnaGxpZ2h0LWxhYmVsLWNvbG9yLWxpZ2h0KTsgXG5cbn1cbmJvZHkudGhlbWUtZGFyayB7XG4gICAgLS1tb250aC1jb2xvci10aGVtZWQ6IHZhcigtLW1vbnRoLWNvbG9yLWRhcmspO1xuICAgIC0tdG9kYXktY2lyY2xlLWNvbG9yLXRoZW1lZDogdmFyKC0tdG9kYXktY2lyY2xlLWNvbG9yLWRhcmspO1xuICAgIC0tdG9kYXktaGlnaGxpZ2h0LWNvbG9yLXRoZW1lZDogdmFyKC0tdG9kYXktaGlnaGxpZ2h0LWNvbG9yLWRhcmspO1xuICAgIC0tZGF0ZS1jZWxsLWhvdmVyLWNvbG9yLXRoZW1lZDogdmFyKC0tZGF0ZS1jZWxsLWhvdmVyLWNvbG9yLWRhcmspO1xuICAgIC0tcHctY29sdW1uLWZvbnQtY29sb3ItdGhlbWVkOiB2YXIoLS1wdy1jb2x1bW4tZm9udC1jb2xvci1kYXJrKTtcbiAgICAtLXdlZWstbnVtYmVyLWZvbnQtY29sb3ItdGhlbWVkOiB2YXIoLS13ZWVrLW51bWJlci1mb250LWNvbG9yLWRhcmspO1xuICAgIC0tZGF5LWhlYWRlci1mb250LWNvbG9yLXRoZW1lZDogdmFyKC0tZGF5LWhlYWRlci1mb250LWNvbG9yLWRhcmspO1xuICAgIC0tZGF5LWNlbGwtZm9udC1jb2xvci10aGVtZWQ6IHZhcigtLWRheS1jZWxsLWZvbnQtY29sb3ItZGFyayk7XG4gICAgLS1vdGhlci1tb250aC1mb250LWNvbG9yLXRoZW1lZDogdmFyKC0tb3RoZXItbW9udGgtZm9udC1jb2xvci1kYXJrKTtcbiAgICAtLXdlZWtlbmQtc2hhZGUtY29sb3ItdGhlbWVkOiB2YXIoLS13ZWVrZW5kLXNoYWRlLWNvbG9yLWRhcmspO1xuICAgIC0tcm93LWhpZ2hsaWdodC1jb2xvci10aGVtZWQ6IHZhcigtLXJvdy1oaWdobGlnaHQtY29sb3ItZGFyayk7XG4gICAgLS15ZWFyLWNvbG9yLXRoZW1lZDogdmFyKC0teWVhci1jb2xvci1kYXJrKTtcbiAgICAtLWN1cnJlbnQtbGFiZWwtaGlnaGxpZ2h0LWNvbG9yLXRoZW1lZDogdmFyKC0tY3VycmVudC1oaWdobGlnaHQtbGFiZWwtY29sb3ItZGFyayk7IFxuXG59XG5cbi8qIFN0eWxlIGZvciB0aGUgXCJNb250aFwiIHBhcnQgKHVzZXMgeW91ciBleGlzdGluZyAtLW1vbnRoLWNvbG9yLXRoZW1lZCB2YXJpYWJsZSkgKi9cbi5tb250aC10aXRsZS1tb250aCB7XG4gICAgY29sb3I6IHZhcigtLW1vbnRoLWNvbG9yLXRoZW1lZCk7XG59XG5cbi8qIFN0eWxlIGZvciB0aGUgXCJZZWFyXCIgcGFydCAodXNlcyB0aGUgbmV3IHZhcmlhYmxlKSAqL1xuLm1vbnRoLXRpdGxlLXllYXIge1xuICAgIGNvbG9yOiB2YXIoLS15ZWFyLWNvbG9yLXRoZW1lZCk7XG59XG5cbi8qIDQuIEVuc3VyZSBpbmRpdmlkdWFsIGRhdGUgaG92ZXIgYXBwZWFycyBPTiBUT1Agb2Ygb3RoZXIgaGlnaGxpZ2h0cyAqL1xuLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0ZDpob3ZlciB0ZDpub3QoLnB3LWxhYmVsLWNlbGwpOm5vdCgud2Vlay1udW1iZXItY2VsbCk6aG92ZXIgLmRheS1jb250ZW50IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1kYXRlLWNlbGwtaG92ZXItY29sb3ItdGhlbWVkKSAhaW1wb3J0YW50O1xufVxuXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRkLnJvdy1ob3Zlcjpub3QoLnB3LWxhYmVsLWNlbGwpOm5vdCgud2Vlay1udW1iZXItY2VsbCkge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXJvdy1oaWdobGlnaHQtY29sb3ItdGhlbWVkKTtcbn1cblxuLyogRGF5IGhlYWRlciByb3cgZm9udCBjb2xvciAqL1xuLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0aGVhZCB0aCB7XG4gICAgY29sb3I6IHZhcigtLWRheS1oZWFkZXItZm9udC1jb2xvci10aGVtZWQpO1xufVxuXG4vKiBQZXJpb2QvV2VlayBjb2x1bW4gZm9udCBjb2xvciAqL1xuLnBlcmlvZC1jYWxlbmRhci10YWJsZSAucHctbGFiZWwtY2VsbCxcbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgLnB3LWxhYmVsLWNlbGwgLmRheS1udW1iZXIge1xuICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1wdy1jb2x1bW4tZm9udC13ZWlnaHQpO1xuICAgIGZvbnQtc2l6ZTogdmFyKC0taGVhZGVyLWZvbnQtc2l6ZSk7XG4gICAgY29sb3I6IHZhcigtLXB3LWNvbHVtbi1mb250LWNvbG9yLXRoZW1lZCk7XG59XG5cbi8qIEhpZ2hsaWdodCB0b2RheSdzIFAvVyBjb2x1bW4gd2l0aCB0b2RheSBjb2xvciAqL1xuLnBlcmlvZC1jYWxlbmRhci10YWJsZSAucHctbGFiZWwtY2VsbC50b2RheS1wdy1sYWJlbCAuZGF5LW51bWJlcixcbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgLndlZWstbnVtYmVyLWNlbGwudG9kYXktcHctbGFiZWwgLmRheS1udW1iZXIge1xuICAgIGNvbG9yOiB2YXIoLS1jdXJyZW50LWxhYmVsLWhpZ2hsaWdodC1jb2xvci10aGVtZWQpO1xuICAgIFxufVxuXG4vKiBIaWdobGlnaHQgdG9kYXkncyBkYXkgY29sdW1uIGhlYWRlciB3aXRoIHRvZGF5IGNvbG9yICovXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRoZWFkIHRoLnRvZGF5LWRheS1oZWFkZXIge1xuICAgIGNvbG9yOiB2YXIoLS1jdXJyZW50LWxhYmVsLWhpZ2hsaWdodC1jb2xvci10aGVtZWQpOyAgICBcbn1cblxuLyogV2VlayBudW1iZXIgY29sdW1uIGZvbnQgY29sb3IgKi9cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgLndlZWstbnVtYmVyLWNlbGwsXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIC53ZWVrLW51bWJlci1jZWxsIC5kYXktbnVtYmVyIHtcbiAgICBmb250LXdlaWdodDogdmFyKC0tcHctY29sdW1uLWZvbnQtd2VpZ2h0KTtcbiAgICBmb250LXNpemU6IHZhcigtLWhlYWRlci1mb250LXNpemUpO1xuICAgIGNvbG9yOiB2YXIoLS13ZWVrLW51bWJlci1mb250LWNvbG9yLXRoZW1lZCk7XG59XG5cbi8qIC0tLSBNYWluIExheW91dCAtLS0gKi9cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgaGVpZ2h0OiAxMDAlO1xuICBwYWRkaW5nLXRvcDogNnB4O1xufVxuLm1vbnRoLWhlYWRlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgcGFkZGluZzogMC4xcmVtIDAuMjVyZW07XG4gIG1hcmdpbi1ib3R0b206IDAuNXJlbTsgLyogU3BlY2lmaWMgbWFyZ2luIGZvciBzcGFjaW5nICovXG59XG4ubW9udGgtaGVhZGVyLXRpdGxlIHtcbiAgICBmb250LXNpemU6IHZhcigtLW1haW4tbW9udGgteWVhci10aXRsZS1mb250LXNpemUpO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xufVxuLm1vbnRoLXRpdGxlLW1vbnRoIHtcbiAgICBmb250LXdlaWdodDogdmFyKC0tbWFpbi1tb250aC10aXRsZS13ZWlnaHQpO1xufVxuXG4ubW9udGgtdGl0bGUteWVhciB7XG4gICAgZm9udC13ZWlnaHQ6IHZhcigtLW1haW4teWVhci10aXRsZS13ZWlnaHQpO1xufVxuXG4ubW9udGgtaGVhZGVyLW5hdiB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGdhcDogMC4yNXJlbTtcbn1cbi5tb250aC1oZWFkZXItbmF2IGJ1dHRvbiB7XG4gIGhlaWdodDogdmFyKC0tbmF2LWJ1dHRvbi1oZWlnaHQpO1xuICBtaW4taGVpZ2h0OiB2YXIoLS1uYXYtYnV0dG9uLWhlaWdodCk7XG4gIHBhZGRpbmc6IDA7IC8qIFJlbW92ZSBob3Jpem9udGFsIHBhZGRpbmcgKi9cbiAgd2lkdGg6IHZhcigtLW5hdi1idXR0b24taGVpZ2h0KTsgLyogTWFrZSB0aGUgYnV0dG9uIHNxdWFyZSAqL1xuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLyogQWNjZW50IGNvbG9yIGZvciB0aGUgbG9ja2VkIHBvcHVwIGJ1dHRvbiBvbiBkZXNrdG9wICovXG4ubW9udGgtaGVhZGVyLW5hdiBidXR0b24ucG9wdXAtbG9ja2VkIC5zdmctaWNvbiB7XG4gICAgY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG59XG5cbi8qIFNwZWNpZmljIG92ZXJyaWRlIGZvciBtb2JpbGUgdG8gZW5zdXJlIGFjY2VudCBjb2xvciBpcyBhcHBsaWVkICovXG5ib2R5LmlzLW1vYmlsZSAubW9udGgtaGVhZGVyLW5hdiBidXR0b24ucG9wdXAtbG9ja2VkIC5zdmctaWNvbiB7XG4gICAgY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG59XG5cbi8qIC0tLSBDaGV2cm9uIEJ1dHRvbiBBbmltYXRpb24gLS0tICovXG4ubW9udGgtaGVhZGVyLW5hdiBidXR0b25bYXJpYS1sYWJlbD1cIlRvZ2dsZSBjYWxlbmRhciB2aXNpYmlsaXR5XCJdIC5zdmctaWNvbiB7XG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzIGVhc2UtaW4tb3V0O1xufVxuLnBlcmlvZC1tb250aC1jb250YWluZXIuY2FsZW5kYXItY29sbGFwc2VkIC5tb250aC1oZWFkZXItbmF2IGJ1dHRvblthcmlhLWxhYmVsPVwiVG9nZ2xlIGNhbGVuZGFyIHZpc2liaWxpdHlcIl0gLnN2Zy1pY29uIHtcbiAgdHJhbnNmb3JtOiByb3RhdGUoMTgwZGVnKTtcbn1cbmJvZHkuaXMtbW9iaWxlIC5tb250aC1oZWFkZXItbmF2IGJ1dHRvbiAuc3ZnLWljb24ge1xuICB3aWR0aDogMThweDtcbiAgaGVpZ2h0OiAxOHB4O1xuICBjb2xvcjogdmFyKC0taWNvbi1jb2xvcik7XG4gIGZsZXgtc2hyaW5rOiAwO1xufVxuLyogLS0tIENhbGVuZGFyIENvbGxhcHNlIEFuaW1hdGlvbiAtLS0gKi9cbi5jYWxlbmRhci10YWJsZS13cmFwcGVyIHtcbiAgZmxleC1zaHJpbms6IDA7XG4gIG1heC1oZWlnaHQ6IDUwMHB4OyBcbiAgdHJhbnNpdGlvbjogbWF4LWhlaWdodCAwLjNzIGVhc2UtaW4tb3V0LCBtYXJnaW4tYm90dG9tIDAuM3MgZWFzZS1pbi1vdXQ7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIG1hcmdpbi1ib3R0b206IDAuNXJlbTtcbn1cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLmNhbGVuZGFyLWNvbGxhcHNlZCAuY2FsZW5kYXItdGFibGUtd3JhcHBlciB7XG4gIG1heC1oZWlnaHQ6IDA7XG4gIG1hcmdpbi1ib3R0b206IDA7XG59XG5cbi8qIC0tLSBDYWxlbmRhciBUYWJsZSAtLS0gKi9cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUge1xuICB3aWR0aDogMTAwJTtcbiAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbiAgdGFibGUtbGF5b3V0OiBmaXhlZDtcbn1cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGgsIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGQge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG4gIHBhZGRpbmc6IDA7XG4gIGZvbnQtc2l6ZTogdmFyKC0taGVhZGVyLWZvbnQtc2l6ZSk7XG59XG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRoIHtcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xufVxuXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRoIHtcbiAgZm9udC13ZWlnaHQ6IHZhcigtLWhlYWRlci1yb3ctZm9udC13ZWlnaHQpO1xuICBoZWlnaHQ6IDIuNWVtO1xufVxuLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0ZCB7XG4gY3Vyc29yOiBwb2ludGVyO1xuIG92ZXJmbG93OiB2aXNpYmxlOyBcbiBwb3NpdGlvbjogcmVsYXRpdmU7XG59XG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lcjpub3QoLmhpZGUtZ3JpZCkgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0ZCB7XG4gICAgYm9yZGVyOiB2YXIoLS1jYWxlbmRhci1ncmlkLWdhcC13aWR0aCkgc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xufVxuXG4vKiAtLS0gUm91bmRlZCBSb3cgSGlnaGxpZ2h0IC0tLSAqL1xuLnBlcmlvZC1jYWxlbmRhci10YWJsZSAuY3VycmVudC13ZWVrLXJvdyB0ZDpmaXJzdC1jaGlsZCB7XG4gICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogNnB4O1xuICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDZweDtcbn1cblxuLnBlcmlvZC1jYWxlbmRhci10YWJsZSAuY3VycmVudC13ZWVrLXJvdyB0ZDpsYXN0LWNoaWxkIHtcbiAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNnB4O1xuICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA2cHg7XG59XG5cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdGQ6bm90KC5wdy1sYWJlbC1jZWxsKTpub3QoLndlZWstbnVtYmVyLWNlbGwpOmhvdmVyIC5kYXktY29udGVudCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWRhdGUtY2VsbC1ob3Zlci1jb2xvci10aGVtZWQpO1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4xNXMgZWFzZTtcbn1cblxuYm9keSAucGVyaW9kLW1vbnRoLWNvbnRhaW5lci50b2RheS1zdHlsZS1jZWxsIC50b2RheS1jZWxsIC5kYXktY29udGVudCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRvZGF5LWhpZ2hsaWdodC1jb2xvci10aGVtZWQpO1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG59XG5cbmJvZHkgLnBlcmlvZC1tb250aC1jb250YWluZXIudG9kYXktc3R5bGUtY2VsbCAucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRib2R5IHRyLmN1cnJlbnQtd2Vlay1yb3cgdGQudG9kYXktY2VsbCAuZGF5LWNvbnRlbnQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRvZGF5LWhpZ2hsaWdodC1jb2xvci10aGVtZWQpICFpbXBvcnRhbnQ7XG59XG5cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLnRvZGF5LXN0eWxlLWNpcmNsZSAudG9kYXktY2VsbCAuZGF5LW51bWJlciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogNTAlO1xuICAgIGxlZnQ6IDUwJTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10b2RheS1jaXJjbGUtY29sb3ItdGhlbWVkKTtcbiAgICB6LWluZGV4OiAyO1xuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICB3aWR0aDogdmFyKC0tdG9kYXktaGlnaGxpZ2h0LXNpemUpO1xuICAgIGhlaWdodDogdmFyKC0tdG9kYXktaGlnaGxpZ2h0LXNpemUpO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjsgXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLnRvZGF5LXN0eWxlLW51bWJlciAudG9kYXktY2VsbCAuZGF5LW51bWJlciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogNTAlO1xuICAgIGxlZnQ6IDUwJTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10b2RheS1jaXJjbGUtY29sb3ItdGhlbWVkKTtcbiAgICBib3JkZXItcmFkaXVzOiA2cHg7IFxuICAgIHBhZGRpbmc6IDBweCAxMHB4OyAvKiBNaW5pbWFsIHBhZGRpbmcgZm9yIGEgdGlnaHQgZml0ICovXG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyOyBcbiAgICB6LWluZGV4OiAyOyAvKiBFbnN1cmVzIGl0J3MgZHJhd24gb24gdG9wIG9mIHRoZSBoZWF0bWFwICovXG59XG5cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGQgLmRheS1jb250ZW50LmhlYXRtYXAtY2VsbCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taGVhdG1hcC1jb2xvcikgIWltcG9ydGFudDtcbn1cblxuLnBlcmlvZC1jYWxlbmRhci10YWJsZSAucHctbGFiZWwtY2VsbCxcbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgLndlZWstbnVtYmVyLWNlbGwge1xuICBmb250LXdlaWdodDogdmFyKC0tcHctY29sdW1uLWZvbnQtd2VpZ2h0KTtcbiAgZm9udC1zaXplOiB2YXIoLS1oZWFkZXItZm9udC1zaXplKTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4vKiAtLS0gUGVyaW9kL1dlZWsgQ29sdW1uIFNlcGFyYXRvciBMaW5lIC0tLSAqL1xuLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0ZC5maXJzdC1kYXRlLWNvbHVtbjo6YmVmb3JlIHtcbiAgICBjb250ZW50OiAnJztcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogMDtcbiAgICB0b3A6IDA7XG4gICAgYm90dG9tOiAwO1xuICAgIHdpZHRoOiAxcHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHctc2VwYXJhdG9yLWNvbG9yKTtcbiAgICB6LWluZGV4OiAxO1xufVxuXG4ud2Vlay1kb3RzLWNvbnRhaW5lciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IDA7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cblxuLyogLS0tIENhbGVuZGFyIERvdHMgQ29sb3IgVmFyaWFibGVzIC0tLSAqL1xuLmNhbGVuZGFyLWRvdCB7XG4gICAgd2lkdGg6IHZhcigtLWNhbGVuZGFyLWRvdC1zaXplKTtcbiAgICBoZWlnaHQ6IHZhcigtLWNhbGVuZGFyLWRvdC1zaXplKTtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG59XG5cbi5pY3MtZXZlbnQtZG90IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jYWxlbmRhci1ldmVudC1kb3QtY29sb3IpO1xufVxuXG4vKiAtLS0gQ2FsZW5kYXIgTGF5b3V0IFN0eWxlcyAtLS0gKi9cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLmxheW91dC1zcGFjaW91cyAuZGF5LWNvbnRlbnQge1xuICAgIGhlaWdodDogMy44ZW07XG59XG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5sYXlvdXQtbm9ybWFsIC5kYXktY29udGVudCB7XG4gICAgaGVpZ2h0OiAzLjBlbTtcbn1cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLmxheW91dC1jb25kZW5zZWQgLmRheS1jb250ZW50IHtcbiAgICBoZWlnaHQ6IDIuOGVtOyAvKiBFdmVuIHNtYWxsZXIgaGVpZ2h0ICovXG4gICAgXG59XG5cbi8qIFRoZSB3ZWVrbHkgZG90IG5vdyBqdXN0IHNldHMgdGhlIGNvbG9yIGFuZCByZS11c2VzIC5jYWxlbmRhci1kb3QgZm9yIGl0cyBzaXplICovXG4ud2Vla2x5LW5vdGUtZG90IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS13ZWVrbHktbm90ZS1kb3QtY29sb3IpO1xufVxuXG4vKiAtLS0gQ2FsZW5kYXIgRGF5IENvbnRlbnQgJiBEb3RzIChSRUZBQ1RPUkVEKSAtLS0gKi9cbi8qIDEuIFRoZSBEYXkgQ29udGVudCBXcmFwcGVyICovXG4vKiBJdHMgT05MWSBqb2IgaXMgdG8gYmUgdGhlIHBvc2l0aW9uaW5nIGFuY2hvci4gTm8gbW9yZSBmbGV4Ym94LiAqL1xuLmRheS1jb250ZW50IHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xufVxuXG4vKiAyLiBUaGUgRGF5IE51bWJlciAqL1xuLyogV2Ugbm93IHBvc2l0aW9uIGl0IGFic29sdXRlbHkgdG8gZW5zdXJlIGl0IGlzIHBlcmZlY3RseSBjZW50ZXJlZC4gKi9cbi5kYXktbnVtYmVyIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiA1MCU7XG4gICAgbGVmdDogNTAlO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgIHotaW5kZXg6IDE7IC8qIFNpdHMgb24gdG9wIG9mIHRoZSBoaWdobGlnaHQgY2lyY2xlICovXG4gICAgZm9udC1zaXplOiB2YXIoLS1jYWxlbmRhci1kYXktbnVtYmVyLWZvbnQtc2l6ZSk7XG4gICAgY29sb3I6IHZhcigtLWRheS1jZWxsLWZvbnQtY29sb3ItdGhlbWVkKTtcbn1cblxuLyogMy4gVGhlIERvdHMgQ29udGFpbmVyICh3aXRoIGR5bmFtaWMgYm90dG9tIHBvc2l0aW9uaW5nKSAqL1xuLyogVGhlIGJhc2UgcnVsZSByZW1vdmVzIHRoZSBib3R0b20gcHJvcGVydHkuICovXG4uZG90cy1jb250YWluZXIsIC53ZWVrLWRvdHMtY29udGFpbmVyIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogNTAlO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGdhcDogM3B4O1xuICAgIHotaW5kZXg6IDI7IC8qIFNpdHMgb24gdG9wIG9mIHRoZSBkYXkgbnVtYmVyICovXG59XG5cbi8qIFRoZXNlIGxheW91dC1zcGVjaWZpYyBjbGFzc2VzIG5vdyBoYXZlIGZ1bGwgY29udHJvbCBhbmQgd2lsbCB3b3JrIGNvcnJlY3RseS4gKi9cbi5kb3RzLWNvbnRhaW5lci5sYXlvdXQtY29uZGVuc2VkLFxuLndlZWstZG90cy1jb250YWluZXIubGF5b3V0LWNvbmRlbnNlZCB7XG4gICAgdG9wOiAyNnB4OyBcbn1cblxuLmRvdHMtY29udGFpbmVyLmxheW91dC1ub3JtYWwsXG4ud2Vlay1kb3RzLWNvbnRhaW5lci5sYXlvdXQtbm9ybWFsIHtcbiAgICB0b3A6IDI4cHg7IFxufVxuXG4uZG90cy1jb250YWluZXIubGF5b3V0LXNwYWNpb3VzLFxuLndlZWstZG90cy1jb250YWluZXIubGF5b3V0LXNwYWNpb3VzIHtcbiAgICB0b3A6IDM0cHg7IFxufVxuXG4vKiA0LiBFbnN1cmUgb3RoZXIgbGF5ZXJlZCBpdGVtcyBhcmUgYWxzbyBwb3NpdGlvbmVkIGFic29sdXRlbHkgKi9cblxuXG4uYmFkZ2UtY29udGFpbmVyIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAycHg7XG4gICAgcmlnaHQ6IDJweDtcbiAgICB6LWluZGV4OiAzOyAvKiBTaXRzIGF0IHRoZSB2ZXJ5IHRvcCAqL1xufVxuXG4uZGF5LWhlYWRlci1jZWxsLCAucHctY2VsbCwgLndlZWstbnVtYmVyLWNlbGwge1xuICAgIC8qIFVzZXMgdGhlIGdlbmVyYWwgZm9udCBzaXplIGZvciBsYWJlbHMgKi9cbiAgICBmb250LXNpemU6IHZhcigtLWNhbGVuZGFyLWxhYmVsLWZvbnQtc2l6ZSk7IFxufVxuXG4uZGF5LW51bWJlci1vdGhlci1tb250aCB7XG4gICAgY29sb3I6IHZhcigtLW90aGVyLW1vbnRoLWZvbnQtY29sb3ItdGhlbWVkKSAhaW1wb3J0YW50O1xufVxuXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRoLCAucGVyaW9kLWNhbGVuZGFyLXRhYmxlIC5wdy1jZWxsLCAucGVyaW9kLWNhbGVuZGFyLXRhYmxlIC53ZWVrLW51bWJlci1jZWxsIHtcbiAgICBmb250LXNpemU6IHZhcigtLWNhbGVuZGFyLWxhYmVsLWZvbnQtc2l6ZSk7IFxufVxuXG4vKiAtLS0gQ2FsZW5kYXIgTGF5b3V0IFN0eWxlcyAtLS0gKi9cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLmxheW91dC1zcGFjaW91cyAuZG90cy1jb250YWluZXIgIHtcbiAgICBwYWRkaW5nLWJvdHRvbTogMTBweDsgLyogQ3JlYXRlcyBzcGFjZSBmcm9tIHRoZSBib3R0b20gZWRnZSAqL1xufVxuLnBlcmlvZC1tb250aC1jb250YWluZXIubGF5b3V0LXNwYWNpb3VzIC5kb3RzLWNvbnRhaW5lcjplbXB0eSB7XG4gICAgcGFkZGluZy10b3A6IHZhcigtLWNhbGVuZGFyLWRvdC1zaXplKTtcbn1cblxuLnBlcmlvZC1tb250aC1jb250YWluZXIubGF5b3V0LW5vcm1hbCAuZG90cy1jb250YWluZXIgIHtcbiAgICBwYWRkaW5nLWJvdHRvbTogNnB4OyAvKiBDcmVhdGVzIHNwYWNlIGZyb20gdGhlIGJvdHRvbSBlZGdlICovXG59XG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5sYXlvdXQtY29uZGVuc2VkIC5kb3RzLWNvbnRhaW5lciAge1xuICAgIHBhZGRpbmctYm90dG9tOiA0cHg7IC8qIENyZWF0ZXMgc3BhY2UgZnJvbSB0aGUgYm90dG9tIGVkZ2UgKi9cbn1cblxuLnRhc2stY291bnQtYmFkZ2Uge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDJweDtcbiAgICByaWdodDogM3B4O1xuICAgIHotaW5kZXg6IDM7XG4gICAgd2lkdGg6IDEuNmVtO1xuICAgIGhlaWdodDogMS42ZW07XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRhc2stYmFkZ2UtY29sb3IpO1xuICAgIGNvbG9yOiB2YXIoLS10YXNrLWJhZGdlLWZvbnQtY29sb3IpO1xuICAgIGZvbnQtc2l6ZTogdmFyKC0tdGFzay1iYWRnZS1mb250LXNpemUpO1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBsaW5lLWhlaWdodDogMTsgLyogUHJldmVudHMgdGV4dCBmcm9tIHNoaWZ0aW5nIHZlcnRpY2FsbHkgKi9cbn1cblxuLmNhbGVuZGFyLWRvdCB7XG4gIHdpZHRoOiB2YXIoLS1jYWxlbmRhci1kb3Qtc2l6ZSk7XG4gIGhlaWdodDogdmFyKC0tY2FsZW5kYXItZG90LXNpemUpO1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG59XG4ub3RoZXItbm90ZS1kb3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1vdGhlci1ub3RlLWRvdC1jb2xvcik7IH1cbi5tb2RpZmllZC1maWxlLWRvdCB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNhbGVuZGFyLW1vZGlmaWVkLWRvdC1jb2xvcik7IH1cbi5hc3NldC1kb3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1hc3NldC1kb3QtY29sb3IpOyB9XG4udGFzay1kb3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10YXNrLWRvdC1jb2xvcik7IH0gXG4ucGVyaW9kLW1vbnRoLWRhaWx5LW5vdGUtZG90IHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZGFpbHktbm90ZS1kb3QtY29sb3IsIHZhcigtLXRleHQtYWNjZW50KSk7IH1cbi5wZXJpb2QtbW9udGgtZGFpbHktbm90ZS1kb3Qtb3RoZXItbW9udGggeyBvcGFjaXR5OiAwLjQ7IH1cblxuLyogLS0tIFRhYnMgJiBTZWFyY2ggSGVhZGVyIC0tLSAqL1xuLnRhYnMtY29udGVudC13cmFwcGVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgZmxleDogMSAxIGF1dG87XG4gIG1pbi1oZWlnaHQ6IDA7XG59XG4ubm90ZS10YWItaGVhZGVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1zaHJpbms6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIG1hcmdpbi1ib3R0b206IDZweDtcbn1cbi50YWItY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cbi5ub3RlLXRhYiB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgZmxleDogMCAxIGF1dG87XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgcGFkZGluZzogMC41cmVtIDFyZW07XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHRyYW5zcGFyZW50O1xuICBmb250LXNpemU6IHZhcigtLXRhYi10aXRsZS1mb250LXNpemUpO1xuICBmb250LXdlaWdodDogdmFyKC0tdGFiLXRpdGxlLWJvbGQpO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xufVxuLm5vdGUtdGFiOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7IH1cbi5ub3RlLXRhYi5hY3RpdmUge1xuICBib3JkZXItYm90dG9tLWNvbG9yOiB2YXIoLS1zZWxlY3RlZC10YWItY29sb3IpO1xufVxuLm5vdGUtdGFiLmRyYWdnaW5nIHtcbiAgb3BhY2l0eTogMC41O1xuICBjdXJzb3I6IGdyYWJiaW5nO1xufVxuLm5vdGUtdGFiLmRyYWctb3Zlci1pbmRpY2F0b3ItYmVmb3JlOjpiZWZvcmUsXG4ubm90ZS10YWIuZHJhZy1vdmVyLWluZGljYXRvci1hZnRlcjo6YWZ0ZXIge1xuICBjb250ZW50OiAnJztcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDEwJTtcbiAgYm90dG9tOiAxMCU7XG4gIHdpZHRoOiAycHg7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNlbGVjdGVkLXRhYi1jb2xvcik7XG59XG4ubm90ZS10YWIuZHJhZy1vdmVyLWluZGljYXRvci1iZWZvcmU6OmJlZm9yZSB7IGxlZnQ6IDA7IH1cbi5ub3RlLXRhYi5kcmFnLW92ZXItaW5kaWNhdG9yLWFmdGVyOjphZnRlciB7IHJpZ2h0OiAwOyB9XG4uc2VhcmNoLXdyYXBwZXIge1xuICBmbGV4LWdyb3c6IDE7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gIHBhZGRpbmctcmlnaHQ6IDhweDtcbn1cblxuLyogLS0tIFVuaWZpZWQgU2VhcmNoIElucHV0IC0tLSAqL1xuLnBtLXNlYXJjaC1jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgd2lkdGg6IDEwMCU7XG59XG4ucG0tc2VhcmNoLWlucHV0IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1zKTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIHBhZGRpbmc6IDRweCAyOHB4IDRweCA4cHg7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBsaW5lLWhlaWdodDogdmFyKC0tbGluZS1oZWlnaHQtbm9ybWFsKTtcbn1cbi5wbS1zZWFyY2gtaW5wdXQ6Zm9jdXMge1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbn1cblxuLyogLS0tIFNjcmF0Y2hwYWQgQ29udGVudCAmIEJ1dHRvbnMgLS0tICovXG4uc2NyYXRjaHBhZC13cmFwcGVyIHtcbiAgZmxleDogMSAxIGF1dG87XG4gIGRpc3BsYXk6IGdyaWQ7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cbi5zY3JhdGNoLWNvbnRlbnQ6Zm9jdXMge1xuICAgIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50O1xuICAgIG91dGxpbmU6IG5vbmUgIWltcG9ydGFudDtcbiAgICBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7XG59XG4vKiBUaGlzIGlzIHRoZSB2aXN1YWwgY3V0b3V0ICovXG4uc2NyYXRjaHBhZC13cmFwcGVyOjpiZWZvcmUge1xuICBjb250ZW50OiAnJztcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIHJpZ2h0OiAwO1xuICB3aWR0aDogNTZweDtcbiAgaGVpZ2h0OiA2NHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gIHotaW5kZXg6IDM7XG4gIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IHZhcigtLXJhZGl1cy1tKTtcbn1cbi5zY3JhdGNocGFkLXdyYXBwZXIubWFya2Rvd24tcHJldmlldy12aWV3IHtcbiAgYWxpZ24tY29udGVudDogc3RhcnQ7IFxufVxuLnNjcmF0Y2hwYWQtd3JhcHBlci5tYXJrZG93bi1wcmV2aWV3LXZpZXcgcCB7XG4gIG1hcmdpbi1ibG9jay1zdGFydDogMCAhaW1wb3J0YW50O1xuICBtYXJnaW4tYmxvY2stZW5kOiAwLjVlbSAhaW1wb3J0YW50OyBcbn1cbi5zY3JhdGNocGFkLWFjdGlvbnMtY29udGFpbmVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDhweDtcbiAgcmlnaHQ6IDhweDtcbiAgei1pbmRleDogMTA7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGdhcDogNnB4O1xufVxuLnNjcmF0Y2hwYWQtYWN0aW9uLWJ0biB7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLXMpO1xuICBwYWRkaW5nOiA0cHg7XG4gIGxpbmUtaGVpZ2h0OiAxO1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cbi5zY3JhdGNocGFkLWFjdGlvbi1idG4gLnN2Zy1pY29uIHtcbiAgICB3aWR0aDogMTZweDtcbiAgICBoZWlnaHQ6IDE2cHg7XG59XG4uc2NyYXRjaHBhZC1hY3Rpb24tYnRuOmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xufVxuXG4vKiAtLS0gU2NyYXRjaHBhZCBUZXh0YXJlYSAmIEhpZ2hsaWdodGVyIC0tLSAqL1xuLnNjcmF0Y2gtYmFzZSB7XG4gIG1hcmdpbjogMDtcbiAgcGFkZGluZzogMC43NXJlbSAzLjVyZW0gMC41cmVtIDAuNXJlbTtcbiAgYm9yZGVyOiBub25lO1xuICBmb250LWZhbWlseTogdmFyKC0tc2NyYXRjaC1mb250LWZhbWlseSk7XG4gIGZvbnQtc2l6ZTogdmFyKC0tc2NyYXRjaC1mb250LXNpemUpO1xuICBmb250LXdlaWdodDogdmFyKC0tc2NyYXRjaC1ib2xkKTtcbiAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xuICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBncmlkLWFyZWE6IDEgLyAxO1xuICBvdmVyZmxvdzogYXV0bztcbn1cbi5zY3JhdGNoLWhpZ2hsaWdodGVyIHtcbiAgei1pbmRleDogMTtcbiAgY29sb3I6IHRyYW5zcGFyZW50O1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbn1cbi5zY3JhdGNoLWhpZ2hsaWdodGVyIG1hcmsge1xuICBjb2xvcjogdHJhbnNwYXJlbnQ7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNjcmF0Y2hwYWQtaGlnaGxpZ2h0LWNvbG9yKTtcbiAgYm9yZGVyLXJhZGl1czogM3B4O1xufVxuLnNjcmF0Y2gtY29udGVudCB7XG4gIHotaW5kZXg6IDI7XG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICByZXNpemU6IG5vbmU7XG59XG4uc2NyYXRjaC1jb250ZW50OmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcbn1cbi5zY3JhdGNoLWNvbnRlbnQ6OnNlbGVjdGlvbiB7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNjcmF0Y2hwYWQtaGlnaGxpZ2h0LWNvbG9yKSAhaW1wb3J0YW50O1xufVxuXG4vKiAtLS0gTm90ZXMgJiBUYXNrcyBMaXN0IFN0eWxlcyAtLS0gKi9cbi5ub3Rlcy1jb250YWluZXIsIC50YXNrcy1jb250YWluZXIge1xuICBvdmVyZmxvdy15OiBhdXRvO1xuICBmbGV4OiAxIDEgYXV0bztcbiAgbWluLWhlaWdodDogMDtcbiAgcGFkZGluZzogNHB4IDRweCA0OHB4O1xufVxuLm5vdGUtcm93LCAudGFzay1yb3cge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nOiA4cHg7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBvdXRsaW5lOiBub25lO1xuICB3aWR0aDogMTAwJTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuLm5vdGUtcm93IHtcbiAgZ2FwOiAxZW07XG59XG4udGFzay1yb3cge1xuICBnYXA6IDAuNWVtO1xufVxuLnRhc2stcm93IC50YXNrLXRleHQgPiBwIHtcbiAgICBtYXJnaW46IDA7XG4gICAgcGFkZGluZzogMDtcbn1cblxuI25vdGVzLWxpc3QtdmlldyAubm90ZS1yb3c6aG92ZXIsXG4jYXNzZXQtbGlzdC12aWV3IC5ub3RlLXJvdzpob3ZlcixcbiNwaW5uZWQtbm90ZXMtbGlzdCAubm90ZS1yb3c6aG92ZXIsXG4udGFza3MtY29udGFpbmVyIC50YXNrLXJvdzpob3ZlcixcbiNub3Rlcy1saXN0LXZpZXcgLm5vdGUtcm93OmZvY3VzLFxuI2Fzc2V0LWxpc3QtdmlldyAubm90ZS1yb3c6Zm9jdXMsXG4jcGlubmVkLW5vdGVzLWxpc3QgLm5vdGUtcm93OmZvY3VzLFxuLnRhc2tzLWNvbnRhaW5lciAudGFzay1yb3c6Zm9jdXMge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW5vdGVzLWhvdmVyLWNvbG9yKTtcbn1cblxuLm5vdGUtc3RhdHVzLWRvdCB7IFxuICB3aWR0aDogOHB4OyBcbiAgaGVpZ2h0OiA4cHg7IFxuICBib3JkZXItcmFkaXVzOiA1MCU7IFxuICBmbGV4LXNocmluazogMDsgXG59XG4ubm90ZS1zdGF0dXMtZG90LWNyZWF0ZWQgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1ub3RlLWNyZWF0ZWQtY29sb3IpOyB9XG4ubm90ZS1zdGF0dXMtZG90LW1vZGlmaWVkIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbm90ZS1tb2RpZmllZC1jb2xvcik7IH1cbi5ub3RlLXJvdyAubm90ZS10aXRsZS13cmFwcGVyIHsgXG4gIGRpc3BsYXk6IGZsZXg7IFxuICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgZ2FwOiA2cHg7IFxuICBmbGV4OiAxOyBcbiAgbWluLXdpZHRoOiAwOyBcbn1cbi5ub3RlLXJvdyAubm90ZS10aXRsZSB7IFxuICB3aGl0ZS1zcGFjZTogbm93cmFwOyBcbiAgb3ZlcmZsb3c6IGhpZGRlbjsgXG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyBcbiAgZm9udC1zaXplOiB2YXIoLS1ub3Rlcy1mb250LXNpemUpOyBcbiAgZm9udC13ZWlnaHQ6IHZhcigtLW5vdGVzLWJvbGQpOyBcbn1cbi5ub3RlLXJvdyAubm90ZS1tZXRhLWNvbnRhaW5lciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGdhcDogMWVtO1xuICBmbGV4LXNocmluazogMDtcbiAgbWFyZ2luLWxlZnQ6IDFlbTtcbn1cbi5ub3RlLXJvdyAubm90ZS1maWxlLXNpemUge1xuICBmb250LXNpemU6IDAuOGVtO1xuICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gIHdpZHRoOiA2NXB4O1xuICB0ZXh0LWFsaWduOiByaWdodDtcbn1cbi5ub3RlLXJvdyAubm90ZS1tb2QtZGF0ZSB7IFxuICB3aGl0ZS1zcGFjZTogbm93cmFwOyBcbiAgZm9udC1zaXplOiAwLjhlbTsgXG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgd2lkdGg6IDg1cHg7XG4gIHRleHQtYWxpZ246IHJpZ2h0IFxufVxuXG4vKiAtLS0gVGFza3MgU3BlY2lmaWMgU3R5bGVzIC0tLSAqL1xuLnRhc2stZ3JvdXAtY29udGFpbmVyIHtcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgcGFkZGluZzogOHB4O1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG59XG5cbi8qIC0tLSBUYXNrIEdyb3VwIENvbGxhcHNlIFN0eWxlcyAtLS0gKi9cbi50YXNrLWdyb3VwLWhlYWRlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgZm9udC1zaXplOiB2YXIoLS10YXNrLWhlYWRpbmctZm9udC1zaXplKTtcbn1cbi50YXNrLWdyb3VwLWhlYWRlci1jb250ZW50IHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZ2FwOiA2cHg7XG59XG4udGFzay1ncm91cC1jb2xsYXBzZS1pY29uIC5zdmctaWNvbiB7XG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzIGVhc2UtaW4tb3V0O1xufVxuLnRhc2stZ3JvdXAtY29udGFpbmVyLmlzLWNvbGxhcHNlZCAudGFzay1ncm91cC1jb2xsYXBzZS1pY29uIC5zdmctaWNvbiB7XG4gIHRyYW5zZm9ybTogcm90YXRlKC0xODBkZWcpO1xufVxuLnRhc2stbGlzdC13cmFwcGVyIHtcbiAgdHJhbnNpdGlvbjogaGVpZ2h0IDAuMzVzIGVhc2UtaW4tb3V0LCBvcGFjaXR5IDAuMzVzIGVhc2UtaW4tb3V0O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICBvcGFjaXR5OiAxO1xuICBoZWlnaHQ6IHZhcigtLXRhc2stbGlzdC1oZWlnaHQsIGF1dG8pO1xufVxuXG4udGFzay1ncm91cC1jb250YWluZXIuaXMtY29sbGFwc2VkIC50YXNrLWxpc3Qtd3JhcHBlciB7XG4gIGhlaWdodDogMDtcbiAgb3BhY2l0eTogMDtcbn1cblxuLnRhc2stZ3JvdXAtZW1wdHktbWVzc2FnZSB7XG4gIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICBwYWRkaW5nOiA0cHggMDtcbiAgZm9udC1zaXplOiAwLjllbTtcbn1cbi50YXNrLXJvdyAudGFzay10ZXh0IHtcbiAgZmxleC1ncm93OiAxO1xuICBmb250LXNpemU6IHZhcigtLXRhc2stdGV4dC1mb250LXNpemUpO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbn1cbi50YXNrLXJvdyAudGFzay10ZXh0LmNvbXBsZXRlZCB7XG4gIHRleHQtZGVjb3JhdGlvbjogbGluZS10aHJvdWdoO1xuICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG59XG4udGFza3MtY29udGFpbmVyLnNob3ctZnVsbC10ZXh0IC50YXNrLXJvdyB7XG4gIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xufVxuLnRhc2tzLWNvbnRhaW5lci5zaG93LWZ1bGwtdGV4dCAudGFzay10ZXh0IHtcbiAgd2hpdGUtc3BhY2U6IG5vcm1hbDtcbiAgd29yZC1icmVhazogYnJlYWstd29yZDtcbn1cbi50YXNrcy1jb250YWluZXIuc2hvdy1mdWxsLXRleHQgLnRhc2stcm93IC50YXNrLWNoZWNrYm94IHtcbiAgbWFyZ2luLXRvcDogMnB4O1xufVxuXG4vKiAtLS0gUG9wdXBzICYgVG9vbHRpcHMgLS0tICovXG4vKiBDb21tb24gYmFzZSBzdHlsZXMgZm9yIHBvcHVwcyAqL1xuLm90aGVyLW5vdGVzLXBvcHVwLCAuY3VzdG9tLXN1Z2dlc3Rpb24tY29udGFpbmVyIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgei1pbmRleDogMTAwO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjNGE0YTRhO1xuICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7XG4gICAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsMCwwLDAuMik7XG4gICAgbWluLXdpZHRoOiA0NTBweDtcbiAgICBtYXgtd2lkdGg6IDY1OHB4O1xufVxuXG4vKiBNYWluIHBvcHVwIHNwZWNpZmljIHN0eWxlcyAqL1xuLm90aGVyLW5vdGVzLXBvcHVwIHtcbiAgICBwYWRkaW5nOiAwO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBvdmVyZmxvdzogaGlkZGVuOyAvKiBIaWRlIG92ZXJmbG93IG9uIHRoZSBtYWluIGNvbnRhaW5lciAqL1xuICAgIG1heC1oZWlnaHQ6IDI1MHB4OyAvKiBJbmNyZWFzZWQgc2xpZ2h0bHkgZm9yIG1vYmlsZSBoZWFkZXIgKi9cbn1cblxuLyogUG9wdXAgaGVhZGVyICovXG4ucG9wdXAtaGVhZGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgZmxleC1zaHJpbms6IDA7IC8qIFByZXZlbnQgaGVhZGVyIGZyb20gc2hyaW5raW5nICovXG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGdhcDogMTBweDtcbn1cbi5wb3B1cC1oZWFkZXItdGl0bGUge1xuICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIGZsZXgtZ3JvdzogMTsgLyogQWxsb3cgdGl0bGUgdG8gdGFrZSBhdmFpbGFibGUgc3BhY2UgKi9cbiAgICBmbGV4LXNocmluazogMTsgLyogQWxsb3cgdGl0bGUgdG8gc2hyaW5rIGlmIG5lZWRlZCAqL1xuICAgIG1pbi13aWR0aDogMDsgLyogSW1wb3J0YW50IGZvciB0ZXh0LW92ZXJmbG93IHRvIHdvcmsgd2l0aCBmbGV4IGl0ZW1zICovXG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsgLyogUHJldmVudCB0aXRsZSBmcm9tIHdyYXBwaW5nICovXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjsgLyogSGlkZSBvdmVyZmxvdyAqL1xuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyAvKiBBZGQgZWxsaXBzaXMgZm9yIGxvbmcgdGl0bGVzICovXG4gICAgZm9udC1zaXplOiAtLXZhcigtLW90aGVyLW5vdGUtcG9wdXAtZm9udC1zaXplKTtcbiAgICAvKiBtYXgtd2lkdGg6IDQyMHB4OyAgKi9cbiAgICBcbn1cblxuLnBvcHVwLWNsb3NlLWJ0biB7XG4gICAgZmxleC1zaHJpbms6IDA7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIHdpZHRoOiAxNnB4O1xuICAgIGhlaWdodDogMTZweDtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgLyogRGVmYXVsdCBmb3IgREFSSyB0aGVtZTogTGlnaHQgZ3JleSBjaXJjbGUgKi9cbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjOWM5YjliOyBcbiAgICAvKiBEZWZhdWx0IGZvciBEQVJLIHRoZW1lOiBEYXJrICd4JyBpY29uICovXG4gICAgY29sb3I6ICMzODM4Mzg7IFxuICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4xcyBlYXNlLWluLW91dCwgY29sb3IgMC4xcyBlYXNlLWluLW91dDtcbn1cblxuLnBvcHVwLWNsb3NlLWJ0bjpob3ZlciB7XG4gICAgLyogSG92ZXIgZm9yIERBUksgdGhlbWU6IEV2ZW4gbGlnaHRlciBjaXJjbGUgKi9cbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1O1xufVxuXG4vKiAtLS0gTGlnaHQgVGhlbWUgT3ZlcnJpZGVzIC0tLSAqL1xuYm9keS50aGVtZS1saWdodCAucG9wdXAtY2xvc2UtYnRuIHtcbiAgICAvKiBEZWZhdWx0IGZvciBMSUdIVCB0aGVtZTogRGFyayBncmV5IGNpcmNsZSAqL1xuICAgIGJhY2tncm91bmQtY29sb3I6ICM1YzVjNWM7XG4gICAgLyogRGVmYXVsdCBmb3IgTElHSFQgdGhlbWU6IFdoaXRlICd4JyBpY29uICovXG4gICAgY29sb3I6ICNmZmZmZmY7XG59XG5cbmJvZHkudGhlbWUtbGlnaHQgLnBvcHVwLWNsb3NlLWJ0bjpob3ZlciB7XG4gICAgLyogSG92ZXIgZm9yIExJR0hUIHRoZW1lOiBFdmVuIGRhcmtlciBjaXJjbGUgKi9cbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzgzODM4O1xufVxuXG4ucG9wdXAtY2xvc2UtYnRuIC5zdmctaWNvbiB7XG4gICAgd2lkdGg6IDE0cHg7XG4gICAgaGVpZ2h0OiAxNHB4O1xufVxuXG4vKiBDb250ZW50IHdyYXBwZXIgZm9yIHNjcm9sbGluZyBhbmQgcGFkZGluZyAqL1xuLnBvcHVwLWNvbnRlbnQtd3JhcHBlciB7XG4gICAgcGFkZGluZzogOHB4O1xuICAgIG92ZXJmbG93LXk6IGF1dG87XG59XG5cbi8qIFN1Z2dlc3Rpb24gY29udGFpbmVyIHNwZWNpZmljIHN0eWxlcyAqL1xuLmN1c3RvbS1zdWdnZXN0aW9uLWNvbnRhaW5lciB7XG4gICAgei1pbmRleDogOTk5O1xuICAgIG1hcmdpbi10b3A6IDRweDtcbiAgICBwYWRkaW5nOiA4cHg7XG4gICAgbWF4LWhlaWdodDogMjAwcHg7XG4gICAgb3ZlcmZsb3cteTogYXV0bztcbn1cblxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0ge1xuICBkaXNwbGF5OiBmbGV4OyBcbiAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7IFxuICBnYXA6IDhweDsgXG4gIHBhZGRpbmc6IDhweDsgXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgY3Vyc29yOiBwb2ludGVyOyBcbiAgd2hpdGUtc3BhY2U6IG5vcm1hbDtcbiAgd29yZC1icmVhazogYnJlYWstd29yZDsgXG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyBcbiAgZm9udC1zaXplOiB2YXIoLS1vdGhlci1ub3RlLXBvcHVwLWZvbnQtc2l6ZSk7XG59XG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbTpob3ZlciB7IFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTsgXG59XG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbSAuc3ZnLWljb24ge1xuICBmbGV4LXNocmluazogMDtcbiAgd2lkdGg6IDEuMmVtO1xuICBoZWlnaHQ6IDEuMmVtO1xufVxuLm5vdGUtcm93IC5ub3RlLXN0YXR1cy1kb3QsXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbSAucG9wdXAtZmlsZS1kb3QsXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbSAucG9wdXAtYXNzZXQtdGh1bWJuYWlsIHtcbiAgICBtYXJnaW4tdG9wOiA1cHg7IFxufVxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gcCB7XG4gICAgbWFyZ2luOiAwO1xufVxuLnBvcHVwLWZpbGUtZG90IHsgXG4gIHdpZHRoOiA4cHg7IFxuICBoZWlnaHQ6IDhweDsgXG4gIGJvcmRlci1yYWRpdXM6IDUwJTsgXG4gIGZsZXgtc2hyaW5rOiAwOyBcbn1cbi5jdXN0b20tc3VnZ2VzdGlvbi1pdGVtIHsgXG4gIHBhZGRpbmc6IDhweCAxMnB4OyBcbiAgY3Vyc29yOiBwb2ludGVyOyBcbiAgZm9udC1zaXplOiB2YXIoLS1mb250LXVpLXNtYWxsKTsgXG59XG4uY3VzdG9tLXN1Z2dlc3Rpb24taXRlbTpob3ZlciB7IFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTsgXG59XG4uc2V0dGluZy1pdGVtLWNvbnRyb2wgeyBcbiAgcG9zaXRpb246IHJlbGF0aXZlOyBcbn1cbmJvZHk6aGFzKC5ub3RlLXRpdGxlLXdyYXBwZXI6aG92ZXIpIC50b29sdGlwLCBcbmJvZHk6aGFzKC5ub3RlLXRpdGxlLWNlbGw6aG92ZXIpIC50b29sdGlwLFxuYm9keTpoYXMoLnRhc2stdGV4dDpob3ZlcikgLnRvb2x0aXAge1xuICB0ZXh0LWFsaWduOiBsZWZ0OyBcbiAgcGFkZGluZzogNnB4IDEwcHg7IFxuICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7IFxuICBtYXgtd2lkdGg6IDQwMHB4OyBcbiAgdHJhbnNpdGlvbi1kZWxheTogMC41cyAhaW1wb3J0YW50OyBcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpOyBcbiAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsMCwwLDAuMik7IFxuICBib3JkZXItcmFkaXVzOiAxNXB4OyBcbiAgYm9yZGVyOiAxcHggc29saWQgIzRhNGE0YTsgXG4gIGZvbnQtc2l6ZTogdmFyKC0tb3RoZXItbm90ZS1wb3B1cC1mb250LXNpemUpOyBcbiAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTsgXG4gIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG59XG5cblxuLyogLS0tIFZlcnRpY2FsIFZpZXcgLS0tICovXG4udmVydGljYWwtY2FsZW5kYXItc2Nyb2xsZXIgeyBcbiAgZmxleDogMTsgXG4gIG92ZXJmbG93LXk6IGF1dG87IFxufVxuLnZlcnRpY2FsLW1vbnRoLXdyYXBwZXIgeyBcbiAgbWFyZ2luLWJvdHRvbTogMnJlbTsgXG59XG4udmVydGljYWwtbW9udGgtdGl0bGUge1xuICBmb250LXNpemU6IHZhcigtLW1haW4tbW9udGgteWVhci10aXRsZS1mb250LXNpemUpO1xuICBmb250LXdlaWdodDogdmFyKC0tbWFpbi1tb250aC15ZWFyLXRpdGxlLXdlaWdodCk7XG4gIHBvc2l0aW9uOiBzdGlja3k7IFxuICB0b3A6IDA7IFxuICB6LWluZGV4OiAxMDtcbiAgbWFyZ2luOiAwLjZyZW0gMDsgXG4gIGhlaWdodDogMnJlbTsgXG4gIGRpc3BsYXk6IGZsZXg7IFxuICBhbGlnbi1pdGVtczogY2VudGVyOyBcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLnRoZW1lLWxpZ2h0IC52ZXJ0aWNhbC1tb250aC10aXRsZSB7XG4gICAgY29sb3I6IHZhcigtLW1vbnRoLWNvbG9yLXRoZW1lZCk7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbn1cbi50aGVtZS1kYXJrIC52ZXJ0aWNhbC1tb250aC10aXRsZSB7XG4gICAgY29sb3I6IHZhcigtLW1vbnRoLWNvbG9yLXRoZW1lZCk7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgLyogY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTsgIEVuc3VyZSB0ZXh0IGlzIHJlYWRhYmxlICovXG59XG5cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLnZlcnRpY2FsLXZpZXctYWN0aXZlIC50YWJzLWNvbnRlbnQtd3JhcHBlciB7IGRpc3BsYXk6IG5vbmU7IH1cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyOm5vdCgudmVydGljYWwtdmlldy1hY3RpdmUpIC52ZXJ0aWNhbC1jYWxlbmRhci1zY3JvbGxlciB7IGRpc3BsYXk6IG5vbmU7IH1cblxuLyogLS0tIE1vYmlsZS1TcGVjaWZpYyBPdmVycmlkZXMgLS0tICovXG4uaXMtbW9iaWxlIC5ub3Rlcy10YWJsZSB7IFxuICB3aWR0aDogMTAwJTsgXG4gIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IFxuICB0YWJsZS1sYXlvdXQ6IGZpeGVkOyBcbn1cbi5pcy1tb2JpbGUgLm5vdGVzLXRhYmxlLXJvdyB7IFxuICBjdXJzb3I6IHBvaW50ZXI7IFxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpOyBcbn1cbi5pcy1tb2JpbGUgLm5vdGVzLXRhYmxlIC5ub3RlLXRpdGxlLWNlbGwsIC5pcy1tb2JpbGUgLm5vdGVzLXRhYmxlIC5ub3RlLWRhdGUtY2VsbCB7IFxuICBwYWRkaW5nOiAwLjZyZW0gMC41cmVtOyBcbiAgdmVydGljYWwtYWxpZ246IHRvcDsgXG59XG4uaXMtbW9iaWxlIC5ub3Rlcy10YWJsZSAubm90ZS10aXRsZS1jZWxsIHsgXG4gIGRpc3BsYXk6IGZsZXg7IFxuICBhbGlnbi1pdGVtczogY2VudGVyOyBcbiAgZ2FwOiA4cHg7IFxuICB3aGl0ZS1zcGFjZTogbm9ybWFsOyBcbiAgd29yZC1icmVhazogYnJlYWstd29yZDsgXG4gIGZvbnQtc2l6ZTogdmFyKC0tbm90ZXMtZm9udC1zaXplKTsgXG4gIGZvbnQtd2VpZ2h0OiB2YXIoLS1ub3Rlcy1ib2xkKTsgXG59XG4uaXMtbW9iaWxlIC5ub3Rlcy10YWJsZSAubm90ZS1kYXRlLWNlbGwgeyBcbiAgd2lkdGg6IDg1cHg7IFxuICB0ZXh0LWFsaWduOiByaWdodDsgXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7IFxuICBmb250LXNpemU6IDAuOGVtOyBcbiAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpOyBcbn1cbi5pcy1tb2JpbGUgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0aCwgLmlzLW1vYmlsZSAucGVyaW9kLWNhbGVuZGFyLXRhYmxlIC5wdy1sYWJlbC1jZWxsIHsgXG4gIC8qZm9udC1zaXplOiAxMnB4OyAqL1xuICBmb250LXNpemU6IGNhbGModmFyKC0tY2FsZW5kYXItbGFiZWwtZm9udC1zaXplKSAqIDAuOSk7XG4gIHBhZGRpbmc6IDA7IFxufVxuXG4uaXMtbW9iaWxlIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgLmRheS1udW1iZXIgeyBcbiAgICBmb250LXNpemU6IGNhbGModmFyKC0tY2FsZW5kYXItZGF5LW51bWJlci1mb250LXNpemUpICogMC45KTtcbn1cblxuLnBlcmlvZC1jYWxlbmRhci10YWJsZSAucHctbGFiZWwtY2VsbCAuZGF5LW51bWJlcixcbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgLndlZWstbnVtYmVyLWNlbGwgLmRheS1udW1iZXIge1xuICAgIGZvbnQtc2l6ZTogaW5oZXJpdDsgLyogSW5oZXJpdCB0aGUgY29ycmVjdCBmb250IHNpemUgZnJvbSB0aGUgcGFyZW50IGNlbGwgKi9cbn1cblxuLyogRGVmYXVsdCByb3cgaGVpZ2h0ICovXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRib2R5IHRyIHtcbiAgICBoZWlnaHQ6IDM2cHg7XG4gICAgbWluLWhlaWdodDogMzZweDtcbn1cblxuLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0ZCB7XG4gICAgbWluLWhlaWdodDogMzZweDtcbn1cblxuLyogQWRqdXN0IHJvdyBoZWlnaHQgZm9yIGNvbmRlbnNlZCBsYXlvdXQgKi9cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLmxheW91dC1jb25kZW5zZWQgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0ciB7XG4gICAgaGVpZ2h0OiAzMHB4O1xuICAgIG1pbi1oZWlnaHQ6IDMwcHg7XG59XG5cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLmxheW91dC1jb25kZW5zZWQgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0ZCB7XG4gICAgbWluLWhlaWdodDogMzBweDtcbn1cblxuLyogQWRqdXN0IHJvdyBoZWlnaHQgZm9yIHNwYWNpb3VzIGxheW91dCAqL1xuLnBlcmlvZC1tb250aC1jb250YWluZXIubGF5b3V0LXNwYWNpb3VzIC5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGJvZHkgdHIge1xuICAgIGhlaWdodDogNDBweDtcbiAgICBtaW4taGVpZ2h0OiA0MHB4O1xufVxuXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lci5sYXlvdXQtc3BhY2lvdXMgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0ZCB7XG4gICAgbWluLWhlaWdodDogNDBweDtcbn1cblxuLyogLS0tIE1pc2MgLS0tICovXG4ucGVyaW9kLW1vbnRoLWNvbnRhaW5lciAuc3ZnLWljb24ge1xuICBjb2xvcjogdmFyKC0taWNvbi1jb2xvciwgY3VycmVudENvbG9yKTtcbn1cblxuLyogLS0tIFVuaWZpZWQgY2xlYXIgYnV0dG9uIGZvciBhbGwgc2VhcmNoIGlucHV0cyAtLS0gKi9cbi5zZWFyY2gtaW5wdXQtY2xlYXItYnRuIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgcmlnaHQ6IDZweDtcbiAgICB0b3A6IDUwJTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XG4gICAgdmlzaWJpbGl0eTogaGlkZGVuO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICB3aWR0aDogMTVweDtcbiAgICBoZWlnaHQ6IDE1cHg7XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMXMgZWFzZS1pbi1vdXQ7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzljOWI5YjtcbiAgICAvKiBDb2xvciBpcyBub3cgc2V0IGRpcmVjdGx5IG9uIHRoZSBpY29uIHJ1bGUgYmVsb3cgKi9cbn1cblxuLnNlYXJjaC1pbnB1dC1jbGVhci1idG46aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7XG59XG5cbi5zZWFyY2gtaW5wdXQtY2xlYXItYnRuIC5zdmctaWNvbiB7XG4gICAgd2lkdGg6IDEzcHg7XG4gICAgaGVpZ2h0OiAxM3B4O1xuICAgIC8qIEZJWDogRm9yY2UgdGhlIGljb24gY29sb3IgdG8gYmUgZGFyayAqL1xuICAgIGNvbG9yOiAjMzgzODM4ICFpbXBvcnRhbnQ7XG59XG5cbi8qIC0tLSBMaWdodCBUaGVtZSBPdmVycmlkZXMgLS0tICovXG5ib2R5LnRoZW1lLWxpZ2h0IC5zZWFyY2gtaW5wdXQtY2xlYXItYnRuIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNWM1YzVjO1xufVxuXG5ib2R5LnRoZW1lLWxpZ2h0IC5zZWFyY2gtaW5wdXQtY2xlYXItYnRuOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzgzODM4O1xufVxuXG5ib2R5LnRoZW1lLWxpZ2h0IC5zZWFyY2gtaW5wdXQtY2xlYXItYnRuIC5zdmctaWNvbiB7XG4gICAgLyogRklYOiBGb3JjZSB0aGUgaWNvbiBjb2xvciB0byBiZSB3aGl0ZSBpbiB0aGUgbGlnaHQgdGhlbWUgKi9cbiAgICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50O1xufVxuXG4vKiAtLS0gVGFzayBIZWFkZXIgSWNvbnMgLS0tICovXG4udGFzay1ncm91cC1oZWFkZXIgLmljb24ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuLnRhc2stZ3JvdXAtaGVhZGVyIC5pY29uIC5zdmctaWNvbiB7XG4gIC8qd2lkdGg6IHZhcigtLXRhc2staGVhZGluZy1mb250LXNpemUpO1xuICBoZWlnaHQ6IHZhcigtLXRhc2staGVhZGluZy1mb250LXNpemUpO1xuKi9cbiAgfVxuXG4vKiAtLS0gVGFiIEljb25zIC0tLSAqL1xuLnRhYi1pY29uIHtcbiAgd2lkdGg6IDEuMmVtO1xuICBoZWlnaHQ6IDEuMmVtO1xufVxuLm5vdGUtdGFiIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZ2FwOiAwLjVlbTtcbn1cblxuLyogLS0tIEFzc2V0IExpc3QgU3R5bGVzIC0tLSAqL1xuLmFzc2V0LXRodW1ibmFpbCwgLnBvcHVwLWFzc2V0LXRodW1ibmFpbCB7XG4gIHdpZHRoOiAyOHB4O1xuICBoZWlnaHQ6IDI4cHg7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1zKTtcbiAgb2JqZWN0LWZpdDogY292ZXI7XG59XG4ucG9wdXAtYXNzZXQtdGh1bWJuYWlsIHtcbiAgd2lkdGg6IDIycHg7XG4gIGhlaWdodDogMjJweDtcbn1cbi5hc3NldC1pY29uLWNvbnRhaW5lciwgLmFzc2V0LXRodW1ibmFpbC1jb250YWluZXIge1xuICB3aWR0aDogMjhweDtcbiAgaGVpZ2h0OiAyOHB4O1xuICBmbGV4LXNocmluazogMDtcbiAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuLmFzc2V0LWljb24tY29udGFpbmVyIC5zdmctaWNvbiB7XG4gIHdpZHRoOiAyMHB4O1xuICBoZWlnaHQ6IDIwcHg7XG59XG4uYXNzZXQtYWN0aW9uLWljb24ge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIHdpZHRoOiAyMHB4O1xuICBoZWlnaHQ6IDIwcHg7XG4gIG1hcmdpbi1yaWdodDogNnB4O1xufVxuLmFzc2V0LWFjdGlvbi1pY29uID4gZGl2IHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnMgZWFzZS1pbi1vdXQ7XG59XG4uYXNzZXQtYWN0aW9uLWljb24gLnN2Zy1pY29uIHtcbiAgd2lkdGg6IDE2cHg7XG4gIGhlaWdodDogMTZweDtcbn1cbi5hc3NldC1hY3Rpb24taWNvbiBkaXY6bnRoLWNoaWxkKDIpIHtcbiAgb3BhY2l0eTogMDtcbn1cbi5ub3RlLXJvdzpob3ZlciAuYXNzZXQtYWN0aW9uLWljb24gZGl2Om50aC1jaGlsZCgxKSB7XG4gIG9wYWNpdHk6IDA7XG59XG4ubm90ZS1yb3c6aG92ZXIgLmFzc2V0LWFjdGlvbi1pY29uIGRpdjpudGgtY2hpbGQoMikge1xuICBvcGFjaXR5OiAxO1xufVxuLmFzc2V0LWFjdGlvbi1pY29uOmhvdmVyIC5zdmctaWNvbiB7XG4gICAgY29sb3I6IHZhcigtLXRleHQtZXJyb3IpO1xufVxuXG4vKiAtLS0gQXNzZXQgR3JpZCBTdHlsZXMgLS0tICovXG4ubm90ZS1saXN0LXdyYXBwZXIuYXNzZXRzLWdyaWQtdmlldyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgZ2FwOiAxNnB4O1xuICAgIHBhZGRpbmctdG9wOiA4cHg7XG59XG4uYXNzZXQtZ3JpZC1pdGVtIHtcbiAgICBmbGV4LWJhc2lzOiBjYWxjKDUwJSAtIDhweCk7IFxuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgcGFkZGluZzogOHB4O1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7IC8qIFRISVMgSVMgVEhFIENSSVRJQ0FMIE1JU1NJTkcgTElORSAqL1xufVxuLmFzc2V0LWdyaWQtcHJldmlldyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgYXNwZWN0LXJhdGlvOiA0IC8gMztcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjsgXG4gICAgYm9yZGVyLXJhZGl1czogOHB4OyAgXG59XG4uYXNzZXQtZ3JpZC1wcmV2aWV3IGltZyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIG9iamVjdC1maXQ6IGNvdmVyO1xufVxuLmFzc2V0LWdyaWQtbmFtZSB7XG4gICAgcGFkZGluZzogOHB4IDRweCAwOyAvKiBBZGp1c3RlZCBwYWRkaW5nICovXG4gICAgbWFyZ2luLXRvcDogOHB4OyAvKiBBZGRzIHNwYWNlIGJldHdlZW4gdGhlIGltYWdlIGFuZCB0ZXh0ICovXG4gICAgZm9udC1zaXplOiAwLjllbTtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbn1cblxuLmFzc2V0LWdyaWQtaXRlbTpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW5vdGVzLWhvdmVyLWNvbG9yKTtcbiAgYm9yZGVyLWNvbG9yOiByZ2JhKDIwMCwgMjAwLCAyMDAsIDAuNzUpOyAvKiBBIGxpZ2h0ZXIsIHNlbWktdHJhbnNwYXJlbnQgZ3JheSAqL1xufVxuXG4vKiAtLS0gU2V0dGluZ3MgVGFicyAtLS0gKi9cbi5wZXJpb2Qtc2V0dGluZ3MtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG4vKiBCYXNlIHN0eWxlIGZvciBhbGwgbmF2aWdhdGlvbiBidXR0b25zIGluIHRoZSBzZXR0aW5ncyBwYW5lbCAqL1xuLnBlcmlvZC1zZXR0aW5ncy1uYXYgYnV0dG9uIHtcbiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZS1pbi1vdXQsIGNvbG9yIDAuMnMgZWFzZS1pbi1vdXQ7XG59XG5cbi8qIEhpZ2hsaWdodCBzdHlsZSBmb3IgdGhlIGN1cnJlbnRseSBhY3RpdmUgc2V0dGluZ3MgdGFiIGJ1dHRvbiAqL1xuLnBlcmlvZC1zZXR0aW5ncy1uYXYgYnV0dG9uLmlzLWFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpOyAvKiBTdGFuZGFyZCBPYnNpZGlhbiB2YXJpYWJsZSBmb3IgY29udHJhc3QgKi9cbn1cblxuLnBlcmlvZC1zZXR0aW5ncy1jb250YWluZXIgLnNldHRpbmctaXRlbS1oZWFkaW5nIHtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xufVxuXG4ucGVyaW9kLXNldHRpbmdzLW5hdiB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBhZGRpbmctcmlnaHQ6IDEuNXJlbTtcbiAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICB3aWR0aDogMTYwcHg7XG4gIGZsZXgtc2hyaW5rOiAwO1xuICBnYXA6IDRweDtcbn1cbi5wZXJpb2Qtc2V0dGluZ3MtbmF2LWJ1dHRvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgIHBhZGRpbmc6IDAuNzVyZW0gMC41cmVtO1xuICAgICAgbWFyZ2luLWJvdHRvbTogMC4yNXJlbTtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1tKTtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIGZvbnQtc2l6ZTogdmFyKC0tZm9udC11aS1zbWFsbCk7XG59XG4ucGVyaW9kLXNldHRpbmdzLW5hdi1idXR0b246aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xufVxuLnBlcmlvZC1zZXR0aW5ncy1uYXYtYnV0dG9uLmlzLWFjdGl2ZSB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxuLnBlcmlvZC1zZXR0aW5ncy1jb250ZW50IHtcbiAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICAgIHBhZGRpbmctbGVmdDogMS41cmVtO1xuICAgICAgb3ZlcmZsb3cteTogYXV0bztcbn1cbi5wZXJpb2Qtc2V0dGluZ3MtY29udGVudCA+IDpmaXJzdC1jaGlsZCB7XG4gICAgLyogUmVtb3ZlIHRoZSBicm93c2VyJ3MgZGVmYXVsdCB0b3AgbWFyZ2luIGZyb20gdGhlIGhlYWRlciAqL1xuICAgIG1hcmdpbi10b3A6IDA7XG4gICAgXG4gICAgLyogQWRkIGEgc21hbGwgYW1vdW50IG9mIHBhZGRpbmcgdG8gdmVydGljYWxseSBhbGlnbiBpdCB3aXRoIHRoZSB0ZXh0IGluc2lkZSB0aGUgYnV0dG9ucyAqL1xuICAgIHBhZGRpbmctdG9wOiA2cHg7IFxufVxuLnBvcHVwLXNlY3Rpb24taGVhZGVyIHtcbiAgICBmb250LXNpemU6IDAuOGVtO1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgIGxldHRlci1zcGFjaW5nOiAwLjA1ZW07XG4gICAgbWFyZ2luOiAxMHB4IDhweCA0cHg7XG4gICAgcGFkZGluZzogMDtcbn1cbi5wb3B1cC1zZXBhcmF0b3Ige1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgbWFyZ2luOiA2cHggOHB4O1xufVxuLm90aGVyLW5vdGVzLXBvcHVwIC5wb3B1cC1zZWN0aW9uLWhlYWRlcjpmaXJzdC1jaGlsZCB7XG4gICAgbWFyZ2luLXRvcDogNHB4O1xufVxuLm5vdGUtZ3JvdXAtaGVhZGVyIHtcbiAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgICBsZXR0ZXItc3BhY2luZzogMC4wNWVtO1xuICAgIHBhZGRpbmc6IDEycHggNHB4IDRweDtcbn1cbi5ub3RlLXRpdGxlLXBhdGgtd3JhcHBlcixcbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC5ub3RlLXRpdGxlLXBhdGgtd3JhcHBlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIG1pbi13aWR0aDogMDsgXG59XG4ubm90ZS1yb3cgLm5vdGUtcGF0aCxcbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC5ub3RlLXBhdGgge1xuICAgIGZvbnQtc2l6ZTogMC44ZW07XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICBtYXJnaW4tdG9wOiAycHg7XG59XG5cbi8qIC0tLSBGaW5hbCAmIFVuaWZpZWQgVGFzayBTdHlsaW5nIC0tLSAqL1xuLnRhc2stY2hlY2tib3gtc3ltYm9sIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgd2lkdGg6IDEuMzVlbTtcbiAgICBoZWlnaHQ6IDEuMzVlbTtcbiAgICBmb250LXNpemU6IDFlbTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgZmxleC1zaHJpbms6IDA7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tdGV4dC1mYWludCk7XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgIHRyYW5zaXRpb246IGFsbCAwLjFzIGVhc2UtaW4tb3V0O1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG59XG4udGFzay1yb3c6aG92ZXIgLnRhc2stY2hlY2tib3gtc3ltYm9sLFxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW06aG92ZXIgLnRhc2stY2hlY2tib3gtc3ltYm9sIHtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbn1cbi50YXNrLWNoZWNrYm94LXN5bWJvbDpoYXMoLnN2Zy1pY29uKSB7XG4gICAgYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50O1xufVxuLnRhc2stY2hlY2tib3gtc3ltYm9sLmlzLWNvbXBsZXRlZCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCkgIWltcG9ydGFudDtcbn1cbi50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb24ge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBwYWRkaW5nOiAwLjFlbTtcbiAgICBmaWxsOiBjdXJyZW50Q29sb3I7XG59XG4udGFzay1jaGVja2JveC1zeW1ib2wuaXMtY29tcGxldGVkIC5zdmctaWNvbiB7XG4gICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KSAhaW1wb3J0YW50O1xufVxuXG4vKiAtLS0gTm90ZSBHcm91cCBDb2xsYXBzZSBTdHlsZXMgLS0tICovXG4ubm90ZS1ncm91cC1jb250YWluZXIge1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7IC8qIEFkZHMgYSBzdWJ0bGUsIHRoZW1lLWF3YXJlIGJvcmRlciAqL1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtbCk7IC8qIFJvdW5kcyB0aGUgY29ybmVycyBvZiB0aGUgY2FyZCAqL1xuICBwYWRkaW5nOiAwIDhweCA4cHg7IC8qIEFkZHMgc29tZSBpbnRlcm5hbCBzcGFjaW5nIGZvciB0aGUgbm90ZSBsaXN0ICovXG4gIG1hcmdpbi1ib3R0b206IDEycHg7IC8qIEluY3JlYXNlcyBzcGFjZSBiZXR3ZWVuIGNhcmRzICovXG59XG4ubm90ZS1ncm91cC1oZWFkZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gIGZvbnQtc2l6ZTogMC44NWVtO1xuICBmb250LXdlaWdodDogYm9sZDtcbiAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICBsZXR0ZXItc3BhY2luZzogMC4wNWVtO1xuICBwYWRkaW5nOiAxMnB4IDRweCA0cHg7XG59XG4ubm90ZS1ncm91cC1oZWFkZXI6aG92ZXIge1xuICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xufVxuLm5vdGUtZ3JvdXAtaGVhZGVyLWNvbnRlbnQge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBnYXA6IDZweDtcbn1cbi5ub3RlLWdyb3VwLWNvdW50IHtcbiAgZm9udC1zaXplOiAwLjllbTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIHBhZGRpbmc6IDFweCA1cHg7XG59XG4ubm90ZS1ncm91cC1jb2xsYXBzZS1pY29uIC5zdmctaWNvbiB7XG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzIGVhc2UtaW4tb3V0O1xuICB3aWR0aDogMTZweDtcbiAgaGVpZ2h0OiAxNnB4O1xufVxuLm5vdGUtZ3JvdXAtY29udGFpbmVyLmlzLWNvbGxhcHNlZCAubm90ZS1ncm91cC1jb2xsYXBzZS1pY29uIC5zdmctaWNvbiB7XG4gIHRyYW5zZm9ybTogcm90YXRlKC05MGRlZyk7XG59XG4ubm90ZS1saXN0LXdyYXBwZXIge1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB0cmFuc2l0aW9uOiBtYXgtaGVpZ2h0IDAuM3MgZWFzZS1pbi1vdXQsIG1hcmdpbi10b3AgMC4zcyBlYXNlLWluLW91dDtcbiAgbWF4LWhlaWdodDogMjAwMHB4OyAvKiBBIGxhcmdlIHZhbHVlIHRvIGFjY29tbW9kYXRlIG1hbnkgbm90ZXMgKi9cbiAgbWFyZ2luLXRvcDogNHB4O1xufVxuLm5vdGUtZ3JvdXAtY29udGFpbmVyLmlzLWNvbGxhcHNlZCAubm90ZS1saXN0LXdyYXBwZXIge1xuICBtYXgtaGVpZ2h0OiAwO1xuICBtYXJnaW4tdG9wOiAwO1xufVxuXG4vKiAtLS0gUHVsbCB0byBSZWZyZXNoIEluZGljYXRvciAtLS0gKi9cbi5wbS1yZWZyZXNoLWluZGljYXRvciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICBsZWZ0OiAwO1xuICAgIHJpZ2h0OiAwO1xuICAgIGhlaWdodDogNTBweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgY29sb3I6IHZhcigtLWljb24tY29sb3IpO1xuICAgIHotaW5kZXg6IDU7XG4gICAgb3BhY2l0eTogMDtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwcHgpIHNjYWxlKDAuNyk7XG4gICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MsIG9wYWNpdHkgMC4zcztcbn1cbi5wbS1yZWZyZXNoLWluZGljYXRvci5pcy1wdWxsaW5nIHtcbiAgICBvcGFjaXR5OiAwLjg7XG59XG4ucG0tcmVmcmVzaC1pbmRpY2F0b3IuaXMtcmVhZHkge1xuICAgIG9wYWNpdHk6IDE7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApIHNjYWxlKDEpO1xufVxuXG4ucG0tcmVmcmVzaC1pbmRpY2F0b3IuaXMtcmVmcmVzaGluZyAuc3ZnLWljb24ge1xuICAgIGFuaW1hdGlvbjogc3BpbiAxLjJzIGxpbmVhciBpbmZpbml0ZTtcbn1cbi8qIFJlLXVzZSB0aGUgc3BpbiBhbmltYXRpb24gZnJvbSB0aGUgcmVmcmVzaCBidXR0b24gKi9cbkBrZXlmcmFtZXMgc3BpbiB7XG4gICAgZnJvbSB7IHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOyB9XG4gICAgdG8geyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XG59XG4vKiAtLS0gTW9iaWxlIEtleWJvYXJkIEhhbmRsaW5nIC0tLSAqL1xuLnNjcmF0Y2gtY29udGVudC5pcy1lZGl0aW5nLW1vYmlsZSB7XG4gICAgcGFkZGluZy1ib3R0b206IDQ1dmg7IC8qIDQ1JSBvZiB0aGUgdmlzaWJsZSBzY3JlZW4gaGVpZ2h0ICovXG59XG5cbi8qIENvbG9ycyBmb3IgY3VzdG9tIGljb25zICovXG4udGFzay1yb3cgLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cIm1hcC1waW5cIl0sXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbSAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwibWFwLXBpblwiXSB7IGNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCkgIWltcG9ydGFudDsgfVxuLnRhc2stcm93IC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJmbGFtZVwiXSxcbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJmbGFtZVwiXSB7IGNvbG9yOiB2YXIoLS10ZXh0LXdhcm5pbmcpICFpbXBvcnRhbnQ7IH1cbi50YXNrLXJvdyAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwic2xhc2hcIl0sXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbSAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwic2xhc2hcIl0sXG4udGFzay1yb3cgLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cInBpZ2d5LWJhbmtcIl0sXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbSAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwicGlnZ3ktYmFua1wiXSxcbi50YXNrLXJvdyAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwidGh1bWJzLXVwXCJdLFxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cInRodW1icy11cFwiXSxcbi50YXNrLXJvdyAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwidHJvcGh5XCJdLFxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cInRyb3BoeVwiXSxcbi50YXNrLXJvdyAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwiYXJyb3ctdXBcIl0sXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbSAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwiYXJyb3ctdXBcIl0geyBjb2xvcjogdmFyKC0tdGV4dC1zdWNjZXNzKSAhaW1wb3J0YW50OyB9XG4udGFzay1yb3cgLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cInRodW1icy1kb3duXCJdLFxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cInRodW1icy1kb3duXCJdLFxuLnRhc2stcm93IC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJhcnJvdy1kb3duXCJdLFxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cImFycm93LWRvd25cIl0geyBjb2xvcjogdmFyKC0tdGV4dC1lcnJvcikgIWltcG9ydGFudDsgfVxuLnRhc2stcm93IC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJzdGFyXCJdLFxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cInN0YXJcIl0sXG4udGFzay1yb3cgLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cImxpZ2h0YnVsYlwiXSxcbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJsaWdodGJ1bGJcIl0geyBjb2xvcjogdmFyKC0tY29sb3IteWVsbG93KSAhaW1wb3J0YW50OyB9XG4udGFzay1yb3cgLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cImJvb2ttYXJrXCJdLFxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cImJvb2ttYXJrXCJdLFxuLnRhc2stcm93IC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJpbmZvXCJdLFxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cImluZm9cIl0geyBjb2xvcjogdmFyKC0tY29sb3ItYmx1ZSkgIWltcG9ydGFudDsgfVxuLnRhc2stcm93IC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJoZWxwLWNpcmNsZVwiXSxcbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJoZWxwLWNpcmNsZVwiXSB7IGNvbG9yOiB2YXIoLS1jb2xvci1jeWFuKSAhaW1wb3J0YW50OyB9XG4udGFzay1yb3cgLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cImtleVwiXSxcbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC50YXNrLWNoZWNrYm94LXN5bWJvbCAuc3ZnLWljb25bZGF0YS1sdWNpZGU9XCJrZXlcIl0geyBjb2xvcjogZ29sZGVucm9kICFpbXBvcnRhbnQ7IH1cbi50YXNrLXJvdyAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwibWludXNcIl0sXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbSAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwibWludXNcIl0sXG4udGFzay1yb3cgLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cInF1b3RlXCJdLFxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0gLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cInF1b3RlXCJdIHsgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpICFpbXBvcnRhbnQ7IH1cbi50YXNrLXJvdyAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwiYXJyb3ctcmlnaHRcIl0sXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbSAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwiYXJyb3ctcmlnaHRcIl0sXG4udGFzay1yb3cgLnRhc2stY2hlY2tib3gtc3ltYm9sIC5zdmctaWNvbltkYXRhLWx1Y2lkZT1cImFycm93LWxlZnRcIl0sXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbSAudGFzay1jaGVja2JveC1zeW1ib2wgLnN2Zy1pY29uW2RhdGEtbHVjaWRlPVwiYXJyb3ctbGVmdFwiXSB7IGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCkgIWltcG9ydGFudDsgfVxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgV0VFS0VORC9XRUVLIEhJR0hMSUdIVElORyBMT0dJQ1xuICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuLyogMS4gTmV1dHJhbGl6ZSB3ZWVrZW5kIHNoYWRlIGluc2lkZSB0aGUgY3VycmVudCB3ZWVrIHJvdyAqL1xuLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0ci5jdXJyZW50LXdlZWstcm93IHtcbiAgLS13ZWVrZW5kLXNoYWRlLWNvbG9yLXRoZW1lZDogdHJhbnNwYXJlbnQ7XG59XG5cbi8qIDIuIFJlZ3VsYXIgd2Vla2VuZCBzaGFkaW5nIGZvciBTVU5EQVktU1RBUlQgd2Vla3MgKi9cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyOm5vdCgubW9uZGF5LXN0YXJ0KS53ZWVrZW5kLXNoYWRpbmctZW5hYmxlZDpub3QoLmhhcy1wdy1jb2x1bW4pOm5vdCguaGFzLXdlZWstbnVtYmVycylcbiAgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0cjpub3QoLmN1cnJlbnQtd2Vlay1yb3cpIHRkOm50aC1jaGlsZCgxKSxcbi5wZXJpb2QtbW9udGgtY29udGFpbmVyOm5vdCgubW9uZGF5LXN0YXJ0KS53ZWVrZW5kLXNoYWRpbmctZW5hYmxlZDpub3QoLmhhcy1wdy1jb2x1bW4pOm5vdCguaGFzLXdlZWstbnVtYmVycylcbiAgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0cjpub3QoLmN1cnJlbnQtd2Vlay1yb3cpIHRkOm50aC1jaGlsZCg3KSxcbi5wZXJpb2QtbW9udGgtY29udGFpbmVyOm5vdCgubW9uZGF5LXN0YXJ0KS53ZWVrZW5kLXNoYWRpbmctZW5hYmxlZC5oYXMtcHctY29sdW1uOm5vdCguaGFzLXdlZWstbnVtYmVycylcbiAgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0cjpub3QoLmN1cnJlbnQtd2Vlay1yb3cpIHRkOm50aC1jaGlsZCgyKSxcbi5wZXJpb2QtbW9udGgtY29udGFpbmVyOm5vdCgubW9uZGF5LXN0YXJ0KS53ZWVrZW5kLXNoYWRpbmctZW5hYmxlZC5oYXMtcHctY29sdW1uOm5vdCguaGFzLXdlZWstbnVtYmVycylcbiAgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0cjpub3QoLmN1cnJlbnQtd2Vlay1yb3cpIHRkOm50aC1jaGlsZCg4KSxcbi5wZXJpb2QtbW9udGgtY29udGFpbmVyOm5vdCgubW9uZGF5LXN0YXJ0KS53ZWVrZW5kLXNoYWRpbmctZW5hYmxlZC5oYXMtd2Vlay1udW1iZXJzOm5vdCguaGFzLXB3LWNvbHVtbilcbiAgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0cjpub3QoLmN1cnJlbnQtd2Vlay1yb3cpIHRkOm50aC1jaGlsZCgyKSxcbi5wZXJpb2QtbW9udGgtY29udGFpbmVyOm5vdCgubW9uZGF5LXN0YXJ0KS53ZWVrZW5kLXNoYWRpbmctZW5hYmxlZC5oYXMtd2Vlay1udW1iZXJzOm5vdCguaGFzLXB3LWNvbHVtbilcbiAgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0cjpub3QoLmN1cnJlbnQtd2Vlay1yb3cpIHRkOm50aC1jaGlsZCg4KSxcbi5wZXJpb2QtbW9udGgtY29udGFpbmVyOm5vdCgubW9uZGF5LXN0YXJ0KS53ZWVrZW5kLXNoYWRpbmctZW5hYmxlZC5oYXMtcHctY29sdW1uLmhhcy13ZWVrLW51bWJlcnNcbiAgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0cjpub3QoLmN1cnJlbnQtd2Vlay1yb3cpIHRkOm50aC1jaGlsZCgzKSxcbi5wZXJpb2QtbW9udGgtY29udGFpbmVyOm5vdCgubW9uZGF5LXN0YXJ0KS53ZWVrZW5kLXNoYWRpbmctZW5hYmxlZC5oYXMtcHctY29sdW1uLmhhcy13ZWVrLW51bWJlcnNcbiAgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0cjpub3QoLmN1cnJlbnQtd2Vlay1yb3cpIHRkOm50aC1jaGlsZCg5KSB7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXdlZWtlbmQtc2hhZGUtY29sb3ItdGhlbWVkKTtcbn1cblxuLyogMy4gV2Vla2VuZCBzaGFkaW5nIGZvciBNT05EQVktU1RBUlQgd2Vla3MgKi9cbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLm1vbmRheS1zdGFydC53ZWVrZW5kLXNoYWRpbmctZW5hYmxlZDpub3QoLmhhcy1wdy1jb2x1bW4pOm5vdCguaGFzLXdlZWstbnVtYmVycylcbiAgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0cjpub3QoLmN1cnJlbnQtd2Vlay1yb3cpIHRkOm50aC1jaGlsZCg2KSxcbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLm1vbmRheS1zdGFydC53ZWVrZW5kLXNoYWRpbmctZW5hYmxlZDpub3QoLmhhcy1wdy1jb2x1bW4pOm5vdCguaGFzLXdlZWstbnVtYmVycylcbiAgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0cjpub3QoLmN1cnJlbnQtd2Vlay1yb3cpIHRkOm50aC1jaGlsZCg3KSxcbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLm1vbmRheS1zdGFydC53ZWVrZW5kLXNoYWRpbmctZW5hYmxlZC5oYXMtcHctY29sdW1uOm5vdCguaGFzLXdlZWstbnVtYmVycylcbiAgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0cjpub3QoLmN1cnJlbnQtd2Vlay1yb3cpIHRkOm50aC1jaGlsZCg3KSxcbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLm1vbmRheS1zdGFydC53ZWVrZW5kLXNoYWRpbmctZW5hYmxlZC5oYXMtcHctY29sdW1uOm5vdCguaGFzLXdlZWstbnVtYmVycylcbiAgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0cjpub3QoLmN1cnJlbnQtd2Vlay1yb3cpIHRkOm50aC1jaGlsZCg4KSxcbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLm1vbmRheS1zdGFydC53ZWVrZW5kLXNoYWRpbmctZW5hYmxlZC5oYXMtd2Vlay1udW1iZXJzOm5vdCguaGFzLXB3LWNvbHVtbilcbiAgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0cjpub3QoLmN1cnJlbnQtd2Vlay1yb3cpIHRkOm50aC1jaGlsZCg3KSxcbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLm1vbmRheS1zdGFydC53ZWVrZW5kLXNoYWRpbmctZW5hYmxlZC5oYXMtd2Vlay1udW1iZXJzOm5vdCguaGFzLXB3LWNvbHVtbilcbiAgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0cjpub3QoLmN1cnJlbnQtd2Vlay1yb3cpIHRkOm50aC1jaGlsZCg4KSxcbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLm1vbmRheS1zdGFydC53ZWVrZW5kLXNoYWRpbmctZW5hYmxlZC5oYXMtcHctY29sdW1uLmhhcy13ZWVrLW51bWJlcnNcbiAgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0cjpub3QoLmN1cnJlbnQtd2Vlay1yb3cpIHRkOm50aC1jaGlsZCg4KSxcbi5wZXJpb2QtbW9udGgtY29udGFpbmVyLm1vbmRheS1zdGFydC53ZWVrZW5kLXNoYWRpbmctZW5hYmxlZC5oYXMtcHctY29sdW1uLmhhcy13ZWVrLW51bWJlcnNcbiAgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0cjpub3QoLmN1cnJlbnQtd2Vlay1yb3cpIHRkOm50aC1jaGlsZCg5KSB7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXdlZWtlbmQtc2hhZGUtY29sb3ItdGhlbWVkKTtcbn1cblxuLyogNC4gTWFrZSBkYXktY29udGVudCB0cmFuc3BhcmVudCBieSBkZWZhdWx0ICovXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIC5kYXktY29udGVudCB7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7XG59XG5cbi8qIDUuIElmIGEgY2VsbCB1c2VzIGJvcmRlciBzdHlsaW5nICh0b2RheS90YXNrcyksIGtlZXAgaXRzIGJhY2tncm91bmQgdHJhbnNwYXJlbnQgKi9cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgLmRheS1jb250ZW50W3N0eWxlKj1cImJvcmRlclwiXSB7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7XG59XG5cbi8qIFRoaXMgcnVsZSBoaWdobGlnaHRzIHRoZSBoZWFkZXIgY2VsbCBpdHNlbGYgYW5kIHNob3VsZCB3b3JrIGFzIGludGVuZGVkLiAqL1xuLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0aC5jb2x1bW4taG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLXJvdy1oaWdobGlnaHQtY29sb3ItdGhlbWVkKTtcbiAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiA2cHg7XG4gICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDZweDtcbn1cblxuLyogVGhpcyBydWxlIG5vdyB0YXJnZXRzIHRoZSA8dGQ+IGVsZW1lbnQgZGlyZWN0bHksIGp1c3QgbGlrZSB0aGUgd29ya2luZyByb3cgaG92ZXIsXG4gICBpbnN0ZWFkIG9mIHRoZSAuZGF5LWNvbnRlbnQgZGl2IGluc2lkZSBpdC4gKi9cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGQuY29sdW1uLWhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1yb3ctaGlnaGxpZ2h0LWNvbG9yLXRoZW1lZCk7XG59XG5cbi8qIEVuc3VyZXMgaW5kaXZpZHVhbCBkYXRlIGhvdmVyIGlzIGFsd2F5cyBvbiB0b3AgKi9cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdGQ6bm90KC5wdy1sYWJlbC1jZWxsKTpub3QoLndlZWstbnVtYmVyLWNlbGwpOmhvdmVyIC5kYXktY29udGVudCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZGF0ZS1jZWxsLWhvdmVyLWNvbG9yLXRoZW1lZCkgIWltcG9ydGFudDtcbn1cblxuXG4vKiAxLiBCYXNlIHN0eWxlIGZvciB0aGUgcGVybWFuZW50IGN1cnJlbnQgd2VlayBoaWdobGlnaHQgKi9cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdHIuY3VycmVudC13ZWVrLXJvdyAuZGF5LWNvbnRlbnQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXJvdy1oaWdobGlnaHQtY29sb3ItdGhlbWVkKTtcbn1cblxuXG4ucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRyLmN1cnJlbnQtd2Vlay1yb3cgdGQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXJvdy1oaWdobGlnaHQtY29sb3ItdGhlbWVkKTtcbn1cbi5wZXJpb2QtY2FsZW5kYXItdGFibGUgdHIucm93LWhvdmVyOm5vdCguY3VycmVudC13ZWVrLXJvdykgdGQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXJvdy1oaWdobGlnaHQtY29sb3ItdGhlbWVkKTtcbn1cblxuLnRhYi1vcmRlci1jb250YWluZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBnYXA6IDhweDtcbiAgbWFyZ2luLXRvcDogMTBweDtcbn1cblxuLmRyYWdnYWJsZS1pdGVtIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZzogOHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeS1hbHQpO1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgY3Vyc29yOiBncmFiO1xufVxuXG4uZHJhZ2dhYmxlLWl0ZW0uZHJhZ2dpbmcge1xuICBvcGFjaXR5OiAwLjU7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xufVxuXG4uZHJhZy1oYW5kbGUge1xuICBtYXJnaW4tcmlnaHQ6IDEycHg7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbn1cblxuLnNldHRpbmctc3BhY2VyIHtcbiAgaGVpZ2h0OiAyMHB4OyAvKiBPciB1c2UgbWFyZ2luLXRvcCwgZS5nLiwgbWFyZ2luLXRvcDogMjBweDsgKi9cbn1cblxuLm5vdGUtZ3JvdXAtaGVhZGVyLWNvbnRlbnQge1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5waW5uZWQtc29ydC1pbmRpY2F0b3Ige1xuICBmb250LXNpemU6IDAuODVlbTtcbiAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICBmb250LXdlaWdodDogbm9ybWFsO1xuICBtYXJnaW4tbGVmdDogNnB4O1xuICAvKiBQcmV2ZW50cyB0aGUgaW5kaWNhdG9yIGZyb20gYmVpbmcgc2VsZWN0ZWQgYXMgdGV4dCB3aGVuIGNsaWNraW5nICovXG4gIHVzZXItc2VsZWN0OiBub25lOyBcbn1cblxuLyogSGlkZSBkcmFnIGhhbmRsZXMgYnkgZGVmYXVsdCBpbiBtYWluIFVJICovXG4ubm90ZS1yb3cgLmRyYWctaGFuZGxlIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICBjdXJzb3I6IGdyYWI7XG59XG5cbi8qIFNob3cgZHJhZyBoYW5kbGVzIHdoZW4gcmVvcmRlciBtb2RlIGlzIGFjdGl2ZSAqL1xuLnBpbm5lZC1ub3Rlcy1yZW9yZGVyLW1vZGUgLm5vdGUtcm93IC5kcmFnLWhhbmRsZSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuXG4vKiBWaXN1YWwgZmVlZGJhY2sgZHVyaW5nIGRyYWcgKi9cbi5ub3RlLXJvdy5kcmFnZ2luZyB7XG4gICAgb3BhY2l0eTogMC41O1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xufVxuXG4vKiA9PSAtLS0gVGhlbWUgU2V0dGluZ3MgVGFiIExheW91dCAtLS0gKi9cbi8qIE1haW4gY29udGFpbmVyIGZvciBlYWNoIHRhc2sgZ3JvdXAgcm93ICovXG4ucHJldmlldy10YXNrLWdyb3VwIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgLyogUHVzaGVzIHRoZSB0aXRsZSBhbmQgY291bnQgYXBhcnQgKi9cbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIHBhZGRpbmc6IDEwcHggMTRweDsgLyogQWRqdXN0IHBhZGRpbmcgdG8gbWF0Y2ggbWFpbiBVSSAqL1xuICAgIG1hcmdpbi1ib3R0b206IDhweDsgLyogU3BhY2UgYmV0d2VlbiByb3dzICovXG4gICAgYm9yZGVyLXJhZGl1czogOHB4OyAvKiBTbGlnaHRseSBtb3JlIHJvdW5kZWQgY29ybmVycyAqL1xufVxuXG4vKiBXcmFwcGVyIGZvciB0aGUgaWNvbiBhbmQgdGl0bGUgdG8ga2VlcCB0aGVtIHRvZ2V0aGVyICovXG4ucHJldmlldy10YXNrLWNvbnRlbnQtd3JhcHBlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGdhcDogMTBweDsgLyogU3BhY2UgYmV0d2VlbiB0aGUgaWNvbiBhbmQgdGhlIHRpdGxlIHRleHQgKi9cbn1cblxuLyogU3R5bGUgZm9yIHRoZSBpY29uIGl0c2VsZiAqL1xuLnByZXZpZXctdGFzay1pY29uIC5zdmctaWNvbiB7XG4gICAgd2lkdGg6IDE4cHg7IC8qIE1hdGNoIGljb24gc2l6ZSBmcm9tIG1haW4gVUkgKi9cbiAgICBoZWlnaHQ6IDE4cHg7XG4gICAgc3Ryb2tlLXdpZHRoOiAyLjI1OyAvKiBBIGdvb2QgYmFsYW5jZSBvZiBib2xkbmVzcyAqL1xufVxuXG4vKiBTdHlsZSBmb3IgdGhlIHRpdGxlIHRleHQgKGUuZy4sIFwiT3ZlcmR1ZVwiKSAqL1xuLnByZXZpZXctdGFzay10aXRsZSB7XG4gICAgZm9udC1zaXplOiB2YXIoLS10YXNrLWhlYWRpbmctZm9udC1zaXplKTtcbn1cblxuLnRoZW1lLWxpc3QtaXRlbTpmb2N1cyB7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBib3gtc2hhZG93OiAwIDAgNXB4IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgb3V0bGluZTogbm9uZTsgLyogUHJldmVudHMgdGhlIGRlZmF1bHQgYnJvd3NlciBvdXRsaW5lICovXG59XG5cbi8qIDEuIE1haW4gY29udGFpbmVyIGZvciB0aGUgZW50aXJlIFRoZW1lcyB0YWIgbGF5b3V0ICovXG4udGhlbWUtc2V0dGluZ3MtY29udGFpbmVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGdhcDogMjBweDtcbiAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsgLyogQ1JJVElDQUw6IEFsaWducyB0aGUgdG9wcyBvZiBib3RoIGNvbHVtbnMgKi9cbn1cblxuLyogMi4gTGVmdCBjb2x1bW4gY29udGFpbmluZyB0aGUgbGlzdCBvZiB0aGVtZXMgKi9cbi50aGVtZS1saXN0LWNvbnRhaW5lciB7XG4gICAgZmxleDogMTtcbn1cblxuLyogMy4gUmlnaHQgY29sdW1uIGNvbnRhaW5pbmcgdGhlIGxpdmUgcHJldmlldyAqL1xuLnRoZW1lLXByZXZpZXctd3JhcHBlciB7XG4gICAgZmxleDogMjtcbiAgICBwb3NpdGlvbjogc3RpY2t5OyAvKiBLZWVwcyBwcmV2aWV3IHZpc2libGUgb24gc2Nyb2xsICovXG4gICAgdG9wOiAyMHB4O1xuICAgIHBhZGRpbmctbGVmdDogMjBweDtcbiAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbn1cblxuLyogNC4gQWxpZ24gdGhlIHRpdGxlcyBvZiBib3RoIGNvbHVtbnMgKi9cbi50aGVtZS1saXN0LWNvbnRhaW5lciA+IGgzLFxuLnRoZW1lLXByZXZpZXctd3JhcHBlciA+IGgzIHtcbiAgICBtYXJnaW4tdG9wOiAwO1xuICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbn1cblxuLyogNS4gRml4IHRoZSBsYXJnZSBnYXAgYWJvdmUgdGhlIFwiT2N0b2JlciAyMDI1XCIgdGl0bGUgKi9cbi50aGVtZS1wcmV2aWV3LXBhbmUgLnByZXZpZXctc2VjdGlvbi1oZWFkZXIge1xuICAgIG1hcmdpbi10b3A6IDAgIWltcG9ydGFudDtcbiAgICBwYWRkaW5nLXRvcDogMCAhaW1wb3J0YW50O1xufVxuLnRoZW1lLXByZXZpZXctcGFuZSAucHJldmlldy1zZWN0aW9uLWhlYWRlciBoMyB7XG4gICAgbWFyZ2luLXRvcDogMCAhaW1wb3J0YW50O1xufVxuXG4vKiBSZWR1Y2UgdGhlIHNwYWNlIGJlbG93IHRoZSB0YXNrIGxpc3Qgd3JhcHBlciBpbiB0aGUgcHJldmlldyAqL1xuLnRoZW1lLXByZXZpZXctcGFuZSAucHJldmlldy1zZWN0aW9uLXdyYXBwZXIge1xuICBtYXJnaW4tYm90dG9tOiA4cHg7IC8qIERlZmF1bHQgaXMgbGlrZWx5IDIwcHggb3IgbW9yZSAqL1xufVxuXG4vKiBSZWR1Y2UgdGhlIHNwYWNlIGFib3ZlIHRoZSBcIkRPVCBDT0xPUiBLRVlcIiB0aXRsZSAqL1xuLnRoZW1lLXByZXZpZXctcGFuZSAucHJldmlldy1kb3Qta2V5LWNvbnRhaW5lciB7XG4gIG1hcmdpbi10b3A6IDEwcHg7IC8qIERlZmF1bHQgaXMgbGlrZWx5IDE1cHggb3IgbW9yZSAqL1xufVxuXG4vKiA2LiBHZW5lcmFsIHdyYXBwZXIgZm9yIHNlY3Rpb25zIGluc2lkZSB0aGUgcHJldmlldyAqL1xuLnByZXZpZXctc2VjdGlvbi13cmFwcGVyIHtcbiAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgYm9yZGVyLXJhZGl1czogNnB4O1xufVxuXG4vKiA3LiBORVc6IFR3by1jb2x1bW4gbGF5b3V0IGZvciB0aGUgZG90IGNvbG9yIGtleSAqL1xuLnByZXZpZXctZG90LWtleS1jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgMWZyKTsgLyogQ3JlYXRlcyB0d28gZXF1YWwgY29sdW1ucyAqL1xuICAgIGdhcDogMCAyMHB4OyAvKiAwcHggdmVydGljYWwgZ2FwLCAyMHB4IGhvcml6b250YWwgZ2FwICovXG4gICAgbWFyZ2luLXRvcDogMTVweDtcbiAgICBwYWRkaW5nLXRvcDogMDtcbiAgICBib3JkZXItdG9wOiBub25lICFpbXBvcnRhbnQ7IC8qIEV4cGxpY2l0bHkgcmVtb3ZlcyB0aGUgaG9yaXpvbnRhbCBsaW5lICovXG59XG5cbi5wcmV2aWV3LWRvdC1rZXktY29udGFpbmVyIGg1IHtcbiAgICBncmlkLWNvbHVtbjogMSAvIC0xOyAvKiBNYWtlcyB0aGUgXCJET1QgQ09MT1IgS0VZXCIgdGl0bGUgc3BhbiBib3RoIGNvbHVtbnMgKi9cbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xufVxuXG4vKiBTdHlsaW5nIGZvciB0aGUgbGlzdCBvZiB0aGVtZSBmaWxlcyAqL1xuLnRoZW1lLWxpc3QtaXRlbSB7XG4gICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjJzIGVhc2UsIGNvbG9yIDAuMnMgZWFzZTtcbn1cblxuLnRoZW1lLWxpc3QtaXRlbTpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG59XG5cbi50aGVtZS1saXN0LWl0ZW0uaXMtYWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbn1cblxuLyogLS0tIFRoZW1lIFByZXZpZXcgLS0tICovXG4vKiBUYWIgYnV0dG9ucyBmb3IgbGlnaHQvZGFyayBtb2RlICovXG4udGhlbWUtcHJldmlldy10YWJzIHsgZGlzcGxheTogZmxleDsgZ2FwOiA4cHg7IG1hcmdpbi1ib3R0b206IDEycHg7IH1cbi50aGVtZS1wcmV2aWV3LXRhYnMgYnV0dG9uIHsgcGFkZGluZzogNnB4IDEycHg7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW0pOyBjdXJzb3I6IHBvaW50ZXI7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpOyBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7IHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlOyB9XG4udGhlbWUtcHJldmlldy10YWJzIGJ1dHRvbi5pcy1hY3RpdmUgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpOyBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpOyBmb250LXdlaWdodDogNjAwOyB9XG5cbi8qIE1haW4gcHJldmlldyBwYW5lIGxheW91dCAqL1xuLnRoZW1lLXByZXZpZXctcGFuZSB7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpOyB9XG5cbi8qIElubmVyIHdyYXBwZXJzIGZvciBzZWN0aW9ucyAqL1xuLnByZXZpZXctc2VjdGlvbi13cmFwcGVyIHsgcGFkZGluZzogMTBweDsgYm9yZGVyLXJhZGl1czogNnB4OyBtYXJnaW4tYm90dG9tOiAyMHB4OyB9XG5cbi8qIENhbGVuZGFyIGxheW91dCBzdHlsZXMgKi9cbi8qXG4ucHJldmlldy1jYWxlbmRhci1ncmlkIHsgd2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IGZvbnQtc2l6ZTogMTFweDsgfVxuLnByZXZpZXctY2FsZW5kYXItZ3JpZCB0aCB7IGZvbnQtd2VpZ2h0OiA2MDA7IHBhZGRpbmctYm90dG9tOiA4cHg7IH1cbi5wcmV2aWV3LWNhbGVuZGFyLWdyaWQgdGQgeyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyB0ZXh0LWFsaWduOiBjZW50ZXI7IH1cbi5wcmV2aWV3LWRheS1jb250ZW50IHsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGdhcDogNHB4OyBwYWRkaW5nOiA0cHggMDsgYm9yZGVyLXJhZGl1czogNnB4OyBoZWlnaHQ6IDQ1cHg7IH1cbi5wcmV2aWV3LWRheS1udW1iZXIgeyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgZm9udC13ZWlnaHQ6IDUwMDsgZm9udC1zaXplOiAxM3B4OyB9XG4ucHJldmlldy1kYXktbnVtYmVyLnRvZGF5IHsgd2lkdGg6IDIuMmVtOyBoZWlnaHQ6IDIuMmVtOyBib3JkZXItcmFkaXVzOiA1MCU7IH1cbi5wcmV2aWV3LWRvdHMtY29udGFpbmVyIHsgZGlzcGxheTogZmxleDsgZ2FwOiAzcHg7IGhlaWdodDogNHB4OyB9XG4ucHJldmlldy1kb3QgeyB3aWR0aDogNHB4OyBoZWlnaHQ6IDRweDsgYm9yZGVyLXJhZGl1czogNTAlOyB9XG4qL1xuLyogQmFzZSBzdHlsZXMgZm9yIHRoZSBwcmV2aWV3IGdyaWQgY29udGFpbmVyICovXG4ucHJldmlldy1jYWxlbmRhci1ncmlkIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xuICAgIGZvbnQtc2l6ZTogMTFweDtcbn1cbi5wcmV2aWV3LWNhbGVuZGFyLWdyaWQgdGgge1xuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgcGFkZGluZy1ib3R0b206IDhweDtcbn1cbi5wcmV2aWV3LWNhbGVuZGFyLWdyaWQgdGQge1xuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGhlaWdodDogNDVweDsgLyogR2l2ZSB0aGUgY2VsbCBhIGZpeGVkIGhlaWdodCAqL1xufVxuXG4vKiBcbiAgMS4gVGhlIFByZXZpZXcgRGF5IENvbnRlbnQgV3JhcHBlclxuICBUaGlzIGlzIG5vdyB0aGUgcG9zaXRpb25pbmcgYW5jaG9yLCBqdXN0IGxpa2UgdGhlIG1haW4gY2FsZW5kYXIuXG4qL1xuLnByZXZpZXctZGF5LWNvbnRlbnQge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG59XG5cbi8qIFxuICAyLiBUaGUgUHJldmlldyBEYXkgTnVtYmVyXG4gIE5vdyB1c2VzIGFic29sdXRlIHBvc2l0aW9uaW5nIHRvIGd1YXJhbnRlZSBpdCBpcyBjZW50ZXJlZC5cbiovXG4ucHJldmlldy1kYXktbnVtYmVyIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiA1MCU7XG4gICAgbGVmdDogNTAlO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgIHotaW5kZXg6IDE7IC8qIFNpdHMgYWJvdmUgdGhlIGhpZ2hsaWdodCAqL1xuICAgIFxuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgZm9udC1zaXplOiAxM3B4O1xufVxuXG4vKiBTdHlsZSBmb3IgdGhlIFwidG9kYXlcIiBoaWdobGlnaHQgaW4gdGhlIHByZXZpZXcgKi9cbi5wcmV2aWV3LWRheS1udW1iZXIudG9kYXkge1xuICAgIHdpZHRoOiAyLjJlbTtcbiAgICBoZWlnaHQ6IDIuMmVtO1xuICAgIGJvcmRlci1yYWRpdXM6IDUwJTsgLyogT3IgNnB4IGZvciBhIHNxdWlyY2xlICovXG4gICAgXG4gICAgLyogVXNlIGZsZXggdG8gY2VudGVyIHRoZSBudW1iZXIgdGV4dCBJTlNJREUgdGhlIGhpZ2hsaWdodCAqL1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cblxuLyogXG4gIDMuIFRoZSBQcmV2aWV3IERvdHMgQ29udGFpbmVyXG4gIE5vdyB1c2VzIGFic29sdXRlIHBvc2l0aW9uaW5nIGZvciBwZXJmZWN0IGFsaWdubWVudC5cbiovXG4ucHJldmlldy1kb3RzLWNvbnRhaW5lciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IDUwJTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XG4gICAgXG4gICAgLyogXG4gICAgICBUaGlzICd0b3AnIHZhbHVlIHBvc2l0aW9ucyB0aGUgZG90cyB2ZXJ0aWNhbGx5LiBcbiAgICAgIEl0IHNob3VsZCBjb3JyZXNwb25kIHRvIHRoZSAnbm9ybWFsJyBsYXlvdXQgc2V0dGluZyBmb3IgYSBnb29kIHByZXZpZXcuXG4gICAgKi9cbiAgICB0b3A6IDMwcHg7IFxuICAgIFxuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZ2FwOiAzcHg7XG4gICAgei1pbmRleDogMjsgLyogU2l0cyBvbiB0b3Agb2YgdGhlIGhpZ2hsaWdodCAqL1xufVxuXG4vKiBTdHlsZSBmb3IgdGhlIGluZGl2aWR1YWwgZG90cyBpbiB0aGUgcHJldmlldyAqL1xuLnByZXZpZXctZG90IHtcbiAgICB3aWR0aDogNHB4O1xuICAgIGhlaWdodDogNHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbn1cblxuLyogVGFza3MgbGF5b3V0IHN0eWxlcyAqL1xuLnByZXZpZXctdGFzay1ncm91cCB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgcGFkZGluZzogOHB4IDEycHg7IGJvcmRlci1yYWRpdXM6IDZweDsgZm9udC13ZWlnaHQ6IDUwMDsgbWFyZ2luLWJvdHRvbTogNnB4OyB9XG5cbi5pcy1tb2JpbGUgLnBlcmlvZC1jYWxlbmRhci10YWJsZSB0Ym9keSB0ZC5maXJzdC1kYXRlLWNvbHVtbjo6YmVmb3JlIHtcbiAgICBkaXNwbGF5OiBub25lO1xufVxuLmlzLW1vYmlsZSAucGVyaW9kLWNhbGVuZGFyLXRhYmxlIHRib2R5IHRyIHtcbiAgICBoZWlnaHQ6IGF1dG87XG59XG5cbi5hcHBsaWVkLXRoZW1lLWluZGljYXRvciAuc2V0dGluZy1pdGVtLW5hbWUge1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCkgIWltcG9ydGFudDtcbn1cblxuLmFwcGxpZWQtdGhlbWUtaW5kaWNhdG9yIC5zZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24ge1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKSAhaW1wb3J0YW50O1xufVxuLnByZXZpZXctZG90LWtleS1jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgMWZyKTsgLyogQ3JlYXRlcyB0d28gZXF1YWwgY29sdW1ucyAqL1xuICAgIGdhcDogMCAyMHB4OyAvKiAwcHggdmVydGljYWwgZ2FwLCAyMHB4IGhvcml6b250YWwgZ2FwICovXG4gICAgbWFyZ2luLXRvcDogMTVweDtcbiAgICBwYWRkaW5nLXRvcDogMDtcbiAgICBib3JkZXItdG9wOiBub25lICFpbXBvcnRhbnQ7IC8qIEVuc3VyZXMgdGhlIGxpbmUgaXMgcmVtb3ZlZCAqL1xufVxuLnByZXZpZXctZG90LWtleS1jb250YWluZXIgaDUge1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG59XG5cbi5wcmV2aWV3LWRvdC1rZXktaXRlbSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIG1hcmdpbi1ib3R0b206IDVweDtcbn1cblxuLnByZXZpZXctZG90LWtleS1zd2F0Y2gge1xuICAgIHdpZHRoOiAxMHB4O1xuICAgIGhlaWdodDogMTBweDtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gICAgZmxleC1zaHJpbms6IDA7XG59XG5cbi8qIE9yZ2FuaXplcyB0aGUgaGVhZGVyIGludG8gYSBmbGV4aWJsZSBjb250YWluZXIgKi9cbi5wb3B1cC1oZWFkZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG5cbi8qIENyZWF0ZXMgYSB2ZXJ0aWNhbCBzdGFjayBmb3IgdGhlIHRpdGxlIGFuZCBwYXRoICovXG4ucG9wdXAtdGl0bGUtY29udGFpbmVyIHtcbiAgICBmbGV4LWdyb3c6IDE7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIG92ZXJmbG93OiBoaWRkZW47IC8qIFByZXZlbnRzIGxvbmcgdGV4dCBmcm9tIGJyZWFraW5nIHRoZSBsYXlvdXQgKi9cbiAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7IC8qIEFkZHMgc3BhY2UgYmV0d2VlbiB0aGUgdGV4dCBhbmQgdGhlIGNsb3NlIGJ1dHRvbiAqL1xufVxuXG4vKiBTdHlsZXMgdGhlIG5ldyBwYXRoIGVsZW1lbnQgKi9cbi5wb3B1cC1oZWFkZXItcGF0aCB7XG4gICAgZm9udC1zaXplOiAwLjhlbTsgLyogU21hbGxlciBmb250IGZvciB0aGUgcGF0aCAqL1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsgLyogVXNlcyB0aGUgdGhlbWUncyBtdXRlZCB0ZXh0IGNvbG9yICovXG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsgLyogUHJldmVudHMgdGhlIHBhdGggZnJvbSB3cmFwcGluZyAqL1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IC8qIEFkZHMgXCIuLi5cIiB0byB2ZXJ5IGxvbmcgcGF0aHMgKi9cbn1cblxuLyogSW4gdGhlIEZpbGUgSW5mbyBzZWN0aW9uLCBhbGxvdyB0aGUgcGF0aCB0ZXh0IHRvIHdyYXAgKi9cbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC5ub3RlLXRpdGxlLXBhdGgtd3JhcHBlciAubm90ZS1wYXRoIHtcbiAgICB3aGl0ZS1zcGFjZTogbm9ybWFsOyAvKiBBbGxvd3MgdGV4dCB0byB3cmFwICovXG4gICAgd29yZC1icmVhazogYnJlYWstYWxsOyAvKiBCcmVha3MgbG9uZyBwYXRocyB3aXRob3V0IHNwYWNlcyAqL1xufVxuXG4vKiBTdHlsZXMgdGhlIGNvbnRhaW5lciBmb3IgdGhlICdObyBiYWNrbGlua3MnIG1lc3NhZ2UgYW5kIGRlbGV0ZSBidXR0b24gKi9cbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtLWFjdGlvbnMge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnktYWx0KTsgLyogQSBzdWJ0bGUgYmFja2dyb3VuZCB0byBkaXN0aW5ndWlzaCBpdCAqL1xuICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICBtYXJnaW4tdG9wOiA0cHg7XG59XG5cbi8qXG4gKiBTdHlsZXMgdGhlIFwiRGVsZXRlIEZpbGVcIiBidXR0b24gdG8gYmUgbGVzcyBpbnRydXNpdmUuXG4gKiBJdCB1c2VzIHRoZW1lIHZhcmlhYmxlcyBmb3IgYSBjb25zaXN0ZW50IGxvb2sgYW5kIGZlZWwuXG4gKi9cbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtLWFjdGlvbnMgYnV0dG9uLm1vZC1kYW5nZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICAgIHBhZGRpbmc6IDRweCAxMHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICBtYXJnaW4tbGVmdDogMTZweDsgLyogQWRkcyBzcGFjZSBiZXR3ZWVuIHRoZSBtZXNzYWdlIGFuZCB0aGUgYnV0dG9uICovXG4gICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZS1pbi1vdXQ7XG59XG5cbi8qIEFkZHMgYSBtb3JlIHByb21pbmVudCBzdHlsZSB3aGVuIGhvdmVyaW5nIG92ZXIgdGhlIGRlbGV0ZSBidXR0b24gKi9cbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtLWFjdGlvbnMgYnV0dG9uLm1vZC1kYW5nZXI6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG59XG5cbi8qXG4gKiBTdHlsZXMgdGhlIHdyYXBwZXIgZm9yIHRoZSBpY29uIGFuZCB0aGUgXCJObyBiYWNrbGlua3NcIiB0ZXh0LlxuICogVGhpcyBlbnN1cmVzIHRoZSBpY29uIGFuZCB0ZXh0IGFyZSBhbGlnbmVkIGFuZCBzcGFjZWQgY29ycmVjdGx5LlxuICovXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbS1hY3Rpb25zID4gZGl2IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgZ2FwOiA4cHg7IC8qIEFkZHMgc3BhY2UgYmV0d2VlbiB0aGUgaWNvbiBhbmQgdGhlIHRleHQgKi9cbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7IC8qIFVzZXMgYSBtb3JlIHN1YnRsZSB0ZXh0IGNvbG9yICovXG59XG5cbi8qIEVuc3VyZXMgdGhlIGZ1bGwgZmlsZSBwYXRoIGluIHRoZSBpbmZvIHNlY3Rpb24gY2FuIHdyYXAgdG8gbXVsdGlwbGUgbGluZXMgKi9cbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIC5ub3RlLXRpdGxlLXBhdGgtd3JhcHBlciAubm90ZS1wYXRoIHtcbiAgICB3aGl0ZS1zcGFjZTogbm9ybWFsO1xuICAgIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDtcbn1cblxuLyogU3RhbmRhcmQgY2xpY2thYmxlIGN1cnNvciBmb3IgdGhlIGZpbGUgaW5mbyBzZWN0aW9uICovXG4ub3RoZXItbm90ZXMtcG9wdXAtaXRlbS5pcy1jbGlja2FibGUge1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLnBvcHVwLWFzc2V0LXRodW1ibmFpbCB7XG4gICAgd2lkdGg6IDIycHg7XG4gICAgaGVpZ2h0OiAyMnB4O1xuICAgIG9iamVjdC1maXQ6IGNvdmVyO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBtYXJnaW4tcmlnaHQ6IDhweDsgLyogQWRkcyBzcGFjZSBiZXR3ZWVuIHRodW1ibmFpbCBhbmQgdGV4dCAqL1xufVxuXG4vKiBBZGp1c3QgdGhlIG1haW4gaXRlbSBsYXlvdXQgdG8gdXNlIGZsZXhib3ggKi9cbi5vdGhlci1ub3Rlcy1wb3B1cC1pdGVtIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG5cbi8qIC0tLSBNb2JpbGUtU3BlY2lmaWMgUG9wdXAgU3R5bGVzIC0tLSAqL1xuQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA2MDBweCkge1xuXG4gICAgLm90aGVyLW5vdGVzLXBvcHVwIHtcbiAgICAgICAgLyogXG4gICAgICAgICAqIFNpemluZzpcbiAgICAgICAgICogLSBNYWtlIGl0IDkwJSBvZiB0aGUgdmlld3BvcnQgd2lkdGguXG4gICAgICAgICAqIC0gVW5zZXQgdGhlIGZpeGVkIG1pbi13aWR0aCBmcm9tIHRoZSBkZXNrdG9wIHJ1bGUuXG4gICAgICAgICAqIC0gRW5zdXJlIGl0IGRvZXNuJ3QgZ2V0IHdpZGVyIHRoYW4gNDUwcHguXG4gICAgICAgICovXG4gICAgICAgIHdpZHRoOiA5MHZ3ICFpbXBvcnRhbnQ7XG4gICAgICAgIG1pbi13aWR0aDogdW5zZXQgIWltcG9ydGFudDtcbiAgICAgICAgbWF4LXdpZHRoOiA0NTBweCAhaW1wb3J0YW50O1xuICAgICAgICBcbiAgICAgICAgLyogUG9zaXRpb25pbmc6IEZpeCBpdCB0byB0aGUgYm90dG9tIG9mIHRoZSBzY3JlZW4uICovXG4gICAgICAgIHBvc2l0aW9uOiBmaXhlZCAhaW1wb3J0YW50O1xuICAgICAgICBib3R0b206IDhweCAhaW1wb3J0YW50O1xuICAgICAgICBsZWZ0OiA1MCUgIWltcG9ydGFudDtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpICFpbXBvcnRhbnQ7XG4gICAgICAgIFxuICAgICAgICAvKiBBcHBlYXJhbmNlOiBTdHlsZSBpdCBsaWtlIGEgbW9kZXJuIG1vYmlsZSBib3R0b20gc2hlZXQuICovXG4gICAgICAgIG1heC1oZWlnaHQ6IDUwdmggIWltcG9ydGFudDsgLyogUHJldmVudHMgaXQgZnJvbSBjb3ZlcmluZyB0aGUgd2hvbGUgc2NyZWVuLiAqL1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4IDEycHggMCAwICFpbXBvcnRhbnQ7IC8qIFJvdW5kcyBvbmx5IHRoZSB0b3AgY29ybmVycy4gKi9cbiAgICAgICAgYm94LXNoYWRvdzogMCAtNHB4IDE2cHggcmdiYSgwLDAsMCwwLjIpICFpbXBvcnRhbnQ7IC8qIFNoYWRvdyB0byBsaWZ0IGl0IG9mZiB0aGUgcGFnZS4gKi9cbiAgICAgICAgXG4gICAgICAgIC8qIFJlc2V0IGFueSBkZXNrdG9wIHBvc2l0aW9uaW5nIHN0eWxlcy4gKi9cbiAgICAgICAgdG9wOiBhdXRvICFpbXBvcnRhbnQ7IFxuICAgICAgICBtYXJnaW46IDAgIWltcG9ydGFudDtcbiAgICB9XG5cbiAgICAvKiBFbnN1cmUgdGhlIHNjcm9sbGFibGUgY29udGVudCBhcmVhIGhhcyBhcHByb3ByaWF0ZSBwYWRkaW5nLiAqL1xuICAgIC5wb3B1cC1jb250ZW50LXdyYXBwZXIge1xuICAgICAgICBwYWRkaW5nOiA4cHggMTJweCAhaW1wb3J0YW50O1xuICAgIH1cbn1cblxuLm90aGVyLW5vdGVzLXBvcHVwLmlzLW1vYmlsZS1wb3B1cCB7XG4gICAgYm9yZGVyLXJhZGl1czogMTJweCAxMnB4IDAgMDsgLyogUm91bmRlZCB0b3AgY29ybmVycyAqL1xuICAgIGJveC1zaGFkb3c6IDAgLTRweCAxNnB4IHJnYmEoMCwwLDAsMC4yKTsgLyogU2hhZG93IGF0IHRoZSB0b3AgKi9cbiAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xufVxuXG4vKiAtLS0gUG9wdXAgQWN0aW9ucyAtLS0gKi9cbi5wb3B1cC1hY3Rpb25zLWZvb3RlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICAgIHBhZGRpbmc6IDRweCA4cHg7IC8qIEEgbGl0dGxlIGxlc3MgcGFkZGluZyBmb3IganVzdCBhbiBpY29uICovXG4gICAgbWFyZ2luLXRvcDogNHB4O1xuICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcbn1cblxuLnBvcHVwLWluZm8tbWVzc2FnZSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGdhcDogOHB4OyAvKiBTcGFjZSBiZXR3ZWVuIGljb24gYW5kIHRleHQgKi9cbiAgICBmb250LXNpemU6IDEycHg7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIC8qIEVuc3VyZSBpdCBhbHNvIGhhcyBubyBiYWNrZ3JvdW5kICovXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcbn1cblxuLm90aGVyLW5vdGVzLXBvcHVwLWl0ZW0ge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xufVxuXG4vKiBTdHlsZSBmb3IgdGhlIGljb24gYnV0dG9uIGl0c2VsZiAqL1xuLnBvcHVwLWFjdGlvbi1pY29uLWJ0biB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHdpZHRoOiAyOHB4O1xuICAgIGhlaWdodDogMjhweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlO1xufVxuXG4ucG9wdXAtYWN0aW9uLWljb24tYnRuIC5zdmctaWNvbiB7XG4gICAgd2lkdGg6IDE2cHg7XG4gICAgaGVpZ2h0OiAxNnB4O1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbn1cblxuLnBvcHVwLWFjdGlvbi1pY29uLWJ0bjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG59XG5cbi8qIFNwZWNpZmljIGRhbmdlciBzdGF0ZSBmb3IgZGVsZXRlICovXG4ucG9wdXAtYWN0aW9uLWljb24tYnRuLm1vZC1kYW5nZXI6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG59XG5cbi5wb3B1cC1hY3Rpb24taWNvbi1idG4ubW9kLWRhbmdlcjpob3ZlciAuc3ZnLWljb24ge1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG59XG5cbmA7XG5cbi8vID09PSBIZWxwZXIgRnVuY3Rpb25zIGFuZCBDbGFzc2VzID09PVxuLyoqXG4gKiBQYXJzZXMgYW4gXCJyZ2JhKHIsIGcsIGIsIGEpXCIgc3RyaW5nIGludG8gYW4gb2JqZWN0LlxuICogQHBhcmFtIHtzdHJpbmd9IHJnYmFTdHJpbmcgVGhlIGlucHV0IHN0cmluZy5cbiAqIEByZXR1cm5zIHt7cjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciwgYTogbnVtYmVyfSB8IG51bGx9XG4gKi9cbmZ1bmN0aW9uIHBhcnNlUmdiYVN0cmluZyhyZ2JhU3RyaW5nKSB7XG4gICAgaWYgKCFyZ2JhU3RyaW5nKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBtYXRjaCA9IHJnYmFTdHJpbmcubWF0Y2goL3JnYmE/XFwoKFxcZCspLFxccyooXFxkKyksXFxzKihcXGQrKSg/OixcXHMqKFtcXGQuXSspKT9cXCkvKTtcbiAgICBpZiAoIW1hdGNoKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4ge1xuICAgICAgICByOiBwYXJzZUludChtYXRjaFsxXSwgMTApLFxuICAgICAgICBnOiBwYXJzZUludChtYXRjaFsyXSwgMTApLFxuICAgICAgICBiOiBwYXJzZUludChtYXRjaFszXSwgMTApLFxuICAgICAgICBhOiBtYXRjaFs0XSAhPT0gdW5kZWZpbmVkID8gcGFyc2VGbG9hdChtYXRjaFs0XSkgOiAxLFxuICAgIH07XG59XG5cbi8qKlxuICogQmxlbmRzIHR3byBSR0JBIGNvbG9yIG9iamVjdHMgYmFzZWQgb24gYSBtaXggZmFjdG9yLlxuICogQHBhcmFtIHt7cixnLGIsYX19IGNvbG9yMSBUaGUgc3RhcnQgY29sb3Igb2JqZWN0LlxuICogQHBhcmFtIHt7cixnLGIsYX19IGNvbG9yMiBUaGUgZW5kIGNvbG9yIG9iamVjdC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmYWN0b3IgQSB2YWx1ZSBmcm9tIDAgKDEwMCUgY29sb3IxKSB0byAxICgxMDAlIGNvbG9yMikuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgcmVzdWx0aW5nIFwicmdiYSguLi4pXCIgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBibGVuZFJnYmFDb2xvcnMoY29sb3IxLCBjb2xvcjIsIGZhY3Rvcikge1xuICAgIGNvbnN0IHIgPSBNYXRoLnJvdW5kKGNvbG9yMS5yICogKDEgLSBmYWN0b3IpICsgY29sb3IyLnIgKiBmYWN0b3IpO1xuICAgIGNvbnN0IGcgPSBNYXRoLnJvdW5kKGNvbG9yMS5nICogKDEgLSBmYWN0b3IpICsgY29sb3IyLmcgKiBmYWN0b3IpO1xuICAgIGNvbnN0IGIgPSBNYXRoLnJvdW5kKGNvbG9yMS5iICogKDEgLSBmYWN0b3IpICsgY29sb3IyLmIgKiBmYWN0b3IpO1xuICAgIGNvbnN0IGEgPSAoY29sb3IxLmEgKiAoMSAtIGZhY3RvcikgKyBjb2xvcjIuYSAqIGZhY3RvcikudG9GaXhlZCgyKTtcbiAgICByZXR1cm4gYHJnYmEoJHtyfSwgJHtnfSwgJHtifSwgJHthfSlgO1xufVxuXG4vKipcbiAqIEEgcmV1c2FibGUgY29uZmlybWF0aW9uIG1vZGFsIGRpYWxvZy5cbiAqL1xuY2xhc3MgQ29uZmlybWF0aW9uTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgY29uc3RydWN0b3IoYXBwLCB0aXRsZSwgbWVzc2FnZSwgb25Db25maXJtLCBjb25maXJtVGV4dCA9IFwiQ29uZmlybVwiKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5vbkNvbmZpcm0gPSBvbkNvbmZpcm07XG4gICAgICAgIHRoaXMuY29uZmlybVRleHQgPSBjb25maXJtVGV4dDtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IHRoaXMudGl0bGUgfSk7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiB0aGlzLm1lc3NhZ2UgfSk7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICAgICAgICB0ZXh0OiB0aGlzLmNvbmZpcm1UZXh0LFxuICAgICAgICAgICAgY2xzOiBcIm1vZC1jdGFcIixcbiAgICAgICAgfSkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMub25Db25maXJtKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICAgICAgICB0ZXh0OiBcIkNhbmNlbFwiLFxuICAgICAgICB9KS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cbn1cblxuLyogQSBtb2RhbCBkaWFsb2cgdGhhdCBwcmVzZW50cyBtdWx0aXBsZSBhY3Rpb24gY2hvaWNlcyB0byB0aGUgdXNlciB3aGVuIGNyZWF0aW5nIGEgbmV3IGRhaWx5IG5vdGUuICovXG5jbGFzcyBBY3Rpb25DaG9pY2VNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBjb25zdHJ1Y3RvcihhcHAsIHRpdGxlLCBtZXNzYWdlLCBidXR0b25zKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5idXR0b25zID0gYnV0dG9ucztcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiB0aGlzLnRpdGxlIH0pO1xuICAgICAgICBpZiAodGhpcy5tZXNzYWdlKSB7XG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHRoaXMubWVzc2FnZSB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdtb2RhbC1idXR0b24tY29udGFpbmVyJyB9KTtcblxuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbkNvbmZpZyBvZiB0aGlzLmJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiBidXR0b25Db25maWcudGV4dCB9KTtcbiAgICAgICAgICAgIGlmIChidXR0b25Db25maWcuY2xzKSB7XG4gICAgICAgICAgICAgICAgYnRuLmFkZENsYXNzKGJ1dHRvbkNvbmZpZy5jbHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoYnV0dG9uQ29uZmlnLmFjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBidXR0b25Db25maWcuYWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBjdXN0b20gcGVyaW9kIGFuZCB3ZWVrIG51bWJlciBiYXNlZCBvbiBhIGdpdmVuIHN0YXJ0IGRhdGUuXG4gKiBBIHllYXIgaXMgZGl2aWRlZCBpbnRvIDEzIHBlcmlvZHMgb2YgNCB3ZWVrcyBlYWNoLlxuICogQHBhcmFtIHtEYXRlfSBkYXRlIC0gVGhlIGRhdGUgdG8gY2FsY3VsYXRlIGZvci5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdGFydE9mUGVyaW9kc092ZXJyaWRlIC0gVGhlIHN0YXJ0IGRhdGUgaW4gXCJZWVlZLU1NLUREXCIgZm9ybWF0IGZyb20gc2V0dGluZ3MuXG4gKiBAcmV0dXJucyB7e3BlcmlvZDogbnVtYmVyLCB3ZWVrOiBudW1iZXIsIHdlZWtTaW5jZVN0YXJ0OiBudW1iZXJ9fSBBbiBvYmplY3Qgd2l0aCB0aGUgcGVyaW9kLCB3ZWVrLCBhbmQgdG90YWwgd2Vla3Mgc2luY2Ugc3RhcnQuXG4gKi9cbmZ1bmN0aW9uIGdldFBlcmlvZFdlZWsoZGF0ZSA9IG5ldyBEYXRlKCksIHN0YXJ0T2ZQZXJpb2RzT3ZlcnJpZGUpIHtcbiAgICBjb25zdCBkZWZhdWx0U3RhcnRTdHJpbmcgPSBcIjIwMjUtMDMtMDJcIjtcbiAgICBsZXQgc3RhcnRTdHJpbmcgPSBzdGFydE9mUGVyaW9kc092ZXJyaWRlIHx8IGRlZmF1bHRTdGFydFN0cmluZztcblxuICAgIGxldCBzdGFydE1vbWVudCA9IG1vbWVudChzdGFydFN0cmluZywgXCJZWVlZLU1NLUREXCIsIHRydWUpO1xuXG4gICAgaWYgKCFzdGFydE1vbWVudC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgYFtDYWxlbmRhciBQZXJpb2QgV2VlayBOb3Rlc10gSW52YWxpZCBcIlN0YXJ0IG9mIFBlcmlvZCAxXCIgZGF0ZSBmb3JtYXQ6IFwiJHtzdGFydFN0cmluZ31cIi4gYCArXG4gICAgICAgICAgICBgSXQgbXVzdCBiZSBZWVlZLU1NLURELiBGYWxsaW5nIGJhY2sgdG8gZGVmYXVsdCBkYXRlICR7ZGVmYXVsdFN0YXJ0U3RyaW5nfS5gXG4gICAgICAgICk7XG4gICAgICAgIHN0YXJ0TW9tZW50ID0gbW9tZW50KGRlZmF1bHRTdGFydFN0cmluZywgXCJZWVlZLU1NLUREXCIsIHRydWUpO1xuICAgIH1cblxuICAgIC8vIFVzZSBtb21lbnQncyBidWlsdC1pbiBkaWZmIG1ldGhvZCB0byBjb3JyZWN0bHkgY2FsY3VsYXRlIHRoZSBudW1iZXIgb2ZcbiAgICAvLyBjYWxlbmRhciBkYXlzLiBUaGlzIGF1dG9tYXRpY2FsbHkgaGFuZGxlcyBEYXlsaWdodCBTYXZpbmcgVGltZSBhbmQgb3RoZXIgb2Zmc2V0cy5cbiAgICBjb25zdCBkYXlzU2luY2VTdGFydCA9IG1vbWVudChkYXRlKS5zdGFydE9mKCdkYXknKS5kaWZmKHN0YXJ0TW9tZW50LnN0YXJ0T2YoJ2RheScpLCAnZGF5cycpO1xuICAgIGNvbnN0IHdlZWtOdW1iZXIgPSBNYXRoLmZsb29yKGRheXNTaW5jZVN0YXJ0IC8gNyk7XG4gICAgY29uc3QgcGVyaW9kSW5kZXggPSBNYXRoLmZsb29yKHdlZWtOdW1iZXIgLyA0KTtcbiAgICBjb25zdCBwZXJpb2QgPSAoKHBlcmlvZEluZGV4ICUgMTMpICsgMTMpICUgMTMgKyAxO1xuICAgIGNvbnN0IHdlZWsgPSAoKHdlZWtOdW1iZXIgJSA0KSArIDQpICUgNCArIDE7XG5cbiAgICByZXR1cm4geyBwZXJpb2QsIHdlZWssIHdlZWtTaW5jZVN0YXJ0OiB3ZWVrTnVtYmVyICsgMSB9O1xufVxuXG4vKipcbiAqIFBhcnNlcyBhIGZpbGUncyBjb250ZW50IHRvIGZpbmQgYWxsIHRhc2tzIGFuZCB0aGVpciBtZXRhZGF0YS5cbiAqIEBwYXJhbSB7VEZpbGV9IGZpbGUgVGhlIGZpbGUgdG8gcGFyc2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gY29udGVudCBUaGUgY29udGVudCBvZiB0aGUgZmlsZS5cbiAqIEByZXR1cm5zIHtBcnJheTxvYmplY3Q+fSBBbiBhcnJheSBvZiBzdHJ1Y3R1cmVkIHRhc2sgb2JqZWN0cy5cbiAqL1xuZnVuY3Rpb24gcGFyc2VUYXNrc0Zyb21GaWxlKGZpbGUsIGNvbnRlbnQpIHtcbiAgICBjb25zdCB0YXNrcyA9IFtdO1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG5cbiAgICBjb25zdCB0YXNrUmVnZXggPSAvXlxccyooPzotfFxcZCtcXC4pXFxzKlxcWyguKVxcXVxccyooLiopLztcbiAgICBjb25zdCBkdWVEYXRlUmVnZXggPSAv8J+ThVxccyooXFxkezR9LVxcZHsyfS1cXGR7Mn0pLztcbiAgICBjb25zdCBjb21wbGV0aW9uRGF0ZVJlZ2V4ID0gL+KchVxccyooXFxkezR9LVxcZHsyfS1cXGR7Mn0pLztcbiAgICBjb25zdCB0YWdSZWdleCA9IC8jKFthLXpBLVowLTlfXFwtXFwvXSspL2c7XG5cbiAgICBsaW5lcy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2godGFza1JlZ2V4KTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0dXMgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSBtYXRjaFsyXTtcbiAgICAgICAgICAgIGNvbnN0IGlzQ29tcGxldGVkID0gc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICd4JztcblxuICAgICAgICAgICAgY29uc3QgZHVlRGF0ZU1hdGNoID0gdGV4dC5tYXRjaChkdWVEYXRlUmVnZXgpO1xuICAgICAgICAgICAgY29uc3QgZHVlRGF0ZSA9IGR1ZURhdGVNYXRjaCA/IG1vbWVudChkdWVEYXRlTWF0Y2hbMV0sIFwiWVlZWS1NTS1ERFwiKS50b0RhdGUoKSA6IG51bGw7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25EYXRlTWF0Y2ggPSB0ZXh0Lm1hdGNoKGNvbXBsZXRpb25EYXRlUmVnZXgpO1xuICAgICAgICAgICAgY29uc3QgY29tcGxldGlvbkRhdGUgPSBjb21wbGV0aW9uRGF0ZU1hdGNoID8gbW9tZW50KGNvbXBsZXRpb25EYXRlTWF0Y2hbMV0sIFwiWVlZWS1NTS1ERFwiKS50b0RhdGUoKSA6IG51bGw7XG5cbiAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSBBcnJheS5mcm9tKHRleHQubWF0Y2hBbGwodGFnUmVnZXgpKS5tYXAobSA9PiBtWzFdKTtcblxuICAgICAgICAgICAgbGV0IGRpc3BsYXlUZXh0ID0gdGV4dC50cmltKCk7XG4gICAgICAgICAgICAvLyBPcHRpb25hbGx5IGNsZWFuIHVwIHRoZSBkaXNwbGF5IHRleHRcbiAgICAgICAgICAgIGlmICghaXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5VGV4dCA9IGRpc3BsYXlUZXh0LnJlcGxhY2UoY29tcGxldGlvbkRhdGVSZWdleCwgJycpLnRyaW0oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGFza3MucHVzaCh7XG4gICAgICAgICAgICAgICAgdGV4dDogZGlzcGxheVRleHQsXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxUZXh0OiB0ZXh0LCAvLyBLZWVwIG9yaWdpbmFsIHRleHQgZm9yIG1vZGlmaWNhdGlvbnNcbiAgICAgICAgICAgICAgICBmaWxlLFxuICAgICAgICAgICAgICAgIGxpbmVOdW1iZXI6IGluZGV4LFxuICAgICAgICAgICAgICAgIGR1ZURhdGUsXG4gICAgICAgICAgICAgICAgdGFncyxcbiAgICAgICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgICAgICAgY29tcGxldGlvbkRhdGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRhc2tzO1xufVxuXG4vKipcbiAqIEZvcm1hdHMgYSBkYXRlIHRvIHNob3cgdGltZSBpZiBpdCdzIHRvZGF5LCBvdGhlcndpc2Ugc2hvd3MgdGhlIGZ1bGwgZGF0ZS5cbiAqIEBwYXJhbSB7RGF0ZX0gZGF0ZSBUaGUgZGF0ZSB0byBmb3JtYXQuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIGRhdGUgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBmb3JtYXREYXRlVGltZShkYXRlKSB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBpZiAoaXNTYW1lRGF5KGRhdGUsIG5vdykpIHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KCdISDptbScpO1xuICAgIHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KCdERC1NTS1ZWVlZJyk7XG59XG5cbi8vIFV0aWxpdHkgd3JhcHBlcnMgYXJvdW5kIG1vbWVudC5qcyBmb3IgY29uc2lzdGVudCBkYXRlIGhhbmRsaW5nLlxuZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlLCBmb3JtYXQpIHsgcmV0dXJuIG1vbWVudChkYXRlKS5mb3JtYXQoZm9ybWF0KTsgfVxuZnVuY3Rpb24gZm9ybWF0TW9udGhUaXRsZShkYXRlLCBmb3JtYXQpIHsgcmV0dXJuIG1vbWVudChkYXRlKS5mb3JtYXQoZm9ybWF0KTsgfVxuZnVuY3Rpb24gaXNTYW1lRGF5KGEsIGIpIHsgcmV0dXJuIG1vbWVudChhKS5pc1NhbWUoYiwgJ2RheScpOyB9XG5cbmNsYXNzIENvbmZpcm1hdGlvbk1vZGFsV2l0aFN0eWxlcyBleHRlbmRzIENvbmZpcm1hdGlvbk1vZGFsIHtcbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIHN1cGVyLm9uT3BlbigpO1xuXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIC8vIFN0eWxlIHRoZSBtYWluIGNvbnRlbnQgY29udGFpbmVyXG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5wYWRkaW5nID0gJzIwcHggMjRweCc7XG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcblxuICAgICAgICAvLyBTdHlsZSB0aGUgdGl0bGUgdXNpbmcgQ1NTIHZhcmlhYmxlc1xuICAgICAgICBjb25zdCB0aXRsZUVsID0gY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJ2gxLCBoMicpO1xuICAgICAgICBpZiAodGl0bGVFbCkge1xuICAgICAgICAgICAgdGl0bGVFbC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMTZweCc7XG4gICAgICAgICAgICB0aXRsZUVsLnN0eWxlLmZvbnRTaXplID0gJzEuM3JlbSc7XG4gICAgICAgICAgICAvLyBVc2UgdGhlIHByaW1hcnkgdGV4dCBjb2xvciB2YXJpYWJsZVxuICAgICAgICAgICAgdGl0bGVFbC5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW5vcm1hbCknO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3R5bGUgdGhlIG1lc3NhZ2UgcGFyYWdyYXBoIHVzaW5nIENTUyB2YXJpYWJsZXNcbiAgICAgICAgY29uc3QgbWVzc2FnZUVsID0gY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJ3AnKTtcbiAgICAgICAgaWYgKG1lc3NhZ2VFbCkge1xuICAgICAgICAgICAgbWVzc2FnZUVsLnN0eWxlLmxpbmVIZWlnaHQgPSAnMS42JztcbiAgICAgICAgICAgIG1lc3NhZ2VFbC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMjRweCc7XG4gICAgICAgICAgICBtZXNzYWdlRWwuc3R5bGUuZm9udFNpemUgPSAnMXJlbSc7XG4gICAgICAgICAgICAvLyBVc2UgdGhlIG11dGVkIHRleHQgY29sb3IgdmFyaWFibGUgZm9yIHNlY29uZGFyeSB0ZXh0XG4gICAgICAgICAgICBtZXNzYWdlRWwuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3R5bGUgdGhlIGJ1dHRvbiBjb250YWluZXJcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1idXR0b24tY29udGFpbmVyJyk7XG4gICAgICAgIGlmIChidXR0b25Db250YWluZXIpIHtcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7XG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZ2FwID0gJzEycHgnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3R5bGUgdGhlIHByaW1hcnkgY29uZmlybWF0aW9uIGJ1dHRvblxuICAgICAgICBjb25zdCBjb25maXJtQnV0dG9uID0gY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5tb2QtY3RhJyk7XG4gICAgICAgIGlmIChjb25maXJtQnV0dG9uKSB7XG4gICAgICAgICAgICBjb25maXJtQnV0dG9uLnN0eWxlLmZvbnRXZWlnaHQgPSAnNjAwJztcbiAgICAgICAgfVxuICAgIH1cblxufVxuXG4vKipcbiAqIFRoZSBtYWluIHZpZXcgY2xhc3MgZm9yIHRoZSBwbHVnaW4sIGhhbmRsaW5nIGFsbCByZW5kZXJpbmcgYW5kIHVzZXIgaW50ZXJhY3Rpb24uXG4gKi9cbmNsYXNzIFBlcmlvZE1vbnRoVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgICBjb25zdHJ1Y3RvcihsZWFmLCBwbHVnaW4pIHtcbiAgICAgICAgc3VwZXIobGVhZik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLnRoZW1lQ2hhbmdlRGVib3VuY2VUaW1lciA9IG51bGw7XG4gICAgICAgIHRoaXMuY2FsZW5kYXJIZWFkZXJSb3dFbCA9IG51bGw7XG4gICAgICAgIHRoaXMucGlubmVkU29ydE9yZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucGlubmVkTm90ZXNTb3J0T3JkZXI7XG4gICAgICAgIHRoaXMuYmx1ckFjdGl2ZUlucHV0ID0gdGhpcy5ibHVyQWN0aXZlSW5wdXQuYmluZCh0aGlzKTtcblxuICAgICAgICAvL3B1bGwgZG93biB0byBmcmVzaFxuICAgICAgICB0aGlzLnRhc2tQdWxsU3RhcnRZID0gMDtcbiAgICAgICAgdGhpcy50YXNrUHVsbERpc3RhbmNlID0gMDtcbiAgICAgICAgdGhpcy5pc1Rhc2tQdWxsaW5nID0gZmFsc2U7XG5cbiAgICAgICAgLy8gLS0tIFN0YXRlIE1hbmFnZW1lbnQgLS0tXG4gICAgICAgIHRoaXMuZGlzcGxheWVkTW9udGggPSBuZXcgRGF0ZSgpOyAvLyBUaGUgbW9udGggY3VycmVudGx5IHNob3duIGluIHRoZSBjYWxlbmRhci5cbiAgICAgICAgdGhpcy5pc1ZlcnRpY2FsVmlldyA9IGZhbHNlOyAgICAgIC8vIFRvZ2dsZXMgYmV0d2VlbiBzaW5nbGUtbW9udGggYW5kIHZlcnRpY2FsIHNjcm9sbCB2aWV3LlxuICAgICAgICB0aGlzLmlzUG9wdXBMb2NrZWQgPSBmYWxzZTsgICAgICAgLy8gVHJhY2tzIGlmIHBvcHVwcyBhcmUgZ2xvYmFsbHkgZGlzYWJsZWRcbiAgICAgICAgdGhpcy5pc0NhbGVuZGFyQ29sbGFwc2VkID0gZmFsc2U7IC8vIFRvZ2dsZXMgdGhlIHZpc2liaWxpdHkgb2YgdGhlIGNhbGVuZGFyIGdyaWQuXG4gICAgICAgIHRoaXMuY2FsZW5kYXJXYXNDb2xsYXBzZWRGb3JFZGl0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNDb2xsYXBzZVRvZ2dsZVByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1NjcmF0Y2hwYWRQcmV2aWV3ID0gZmFsc2U7IC8vIFRvZ2dsZXMgc2NyYXRjaHBhZCBiZXR3ZWVuIGVkaXQgYW5kIHByZXZpZXcgbW9kZS5cbiAgICAgICAgdGhpcy5hY3RpdmVUYWIgPSBudWxsOyAgICAgICAgICAgIC8vIFRyYWNrcyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHRhYiAoJ3NjcmF0Y2gnLCAnbm90ZXMnLCBldGMuKS5cbiAgICAgICAgdGhpcy5pc1Byb2dyYW1tYXRpY1Njcm9sbCA9IGZhbHNlOyAvLyBQcmV2ZW50cyBzY3JvbGwgZXZlbnQgbG9vcHMgZHVyaW5nIHByb2dyYW1tYXRpYyBzY3JvbGxpbmcuXG4gICAgICAgIHRoaXMuaXNEcmFnZ2luZ05vdGUgPSBmYWxzZTsgICAgICAvLyBUcmFja3MgaWYgYSBub3RlIGlzIGN1cnJlbnRseSBiZWluZyBkcmFnZ2VkIGZvciByZW9yZGVyaW5nLlxuICAgICAgICB0aGlzLmlzTW91c2VEb3duID0gZmFsc2U7ICAgICAgICAgLy8gVHJhY2tzIGlmIHRoZSBtb3VzZSBidXR0b24gaXMgY3VycmVudGx5IHByZXNzZWQuXG5cbiAgICAgICAgLy8gLS0tIFNlYXJjaCBhbmQgRGF0YSBTdGF0ZXMgLS0tXG4gICAgICAgIHRoaXMubm90ZXNWaWV3TW9kZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVzVmlld01vZGU7XG4gICAgICAgIHRoaXMubm90ZXNTZWFyY2hUZXJtID0gXCJcIjtcbiAgICAgICAgdGhpcy50YXNrc1NlYXJjaFRlcm0gPSBcIlwiO1xuICAgICAgICB0aGlzLnNjcmF0Y2hwYWRTZWFyY2hUZXJtID0gXCJcIjtcbiAgICAgICAgdGhpcy5hc3NldHNTZWFyY2hUZXJtID0gXCJcIjtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWROb3RlR3JvdXBzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29sbGFwc2VkTm90ZUdyb3VwcyB8fCB7fTtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWRUYXNrR3JvdXBzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29sbGFwc2VkVGFza0dyb3VwcyB8fCB7fTtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWRBc3NldEdyb3VwcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbGxhcHNlZEFzc2V0R3JvdXBzIHx8IHt9O1xuXG4gICAgICAgIC8vIC0tLSBDYWNoaW5nIGFuZCBEYXRhIE1hcHMgLS0tXG4gICAgICAgIC8vIFRoZXNlIG1hcHMgc3RvcmUgcHJlLXByb2Nlc3NlZCBkYXRhIHRvIGF2b2lkIHJlLXNjYW5uaW5nIHRoZSB2YXVsdCBvbiBldmVyeSByZW5kZXIuXG4gICAgICAgIHRoaXMubm90ZVRleHQgPSBcIlwiO1xuICAgICAgICB0aGlzLmFsbFRhc2tzID0gW107XG4gICAgICAgIHRoaXMuY3JlYXRlZE5vdGVzTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLm1vZGlmaWVkTm90ZXNNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuYXNzZXRDcmVhdGlvbk1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy50YXNrc0J5RGF0ZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5pY3NFdmVudHNCeURhdGUgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMucHJvY2Vzc2VkRXZlbnRTaWduYXR1cmVzID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzLnRhc2tDYWNoZSA9IG5ldyBNYXAoKTsgLy8gQ2FjaGVzIHRhc2sgY29udGVudCBvZiBmaWxlcyB0byBkZXRlY3QgY2hhbmdlcy5cbiAgICAgICAgdGhpcy5maWxlVG9UYXNrRGF0ZXMgPSBuZXcgTWFwKCk7IC8vIFRyYWNrcyB3aGljaCBkYXRlcyBhIGZpbGUgaGFzIHRhc2tzIGZvci4gPGZpbGVQYXRoLCBTZXQ8ZGF0ZUtleT4+XG4gICAgICAgIHRoaXMuaXNBc3NldHNHcmlkVmlldyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmFzc2V0c0RlZmF1bHRWaWV3ID09PSAnZ3JpZCc7XG4gICAgICAgIHRoaXMudW51c2VkQXNzZXRQYXRoc0NhY2hlID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzLmlzVW51c2VkQXNzZXRDYWNoZVZhbGlkID0gZmFsc2U7XG5cbiAgICAgICAgLy8gLS0tIFVJIGFuZCBFdmVudCBIYW5kbGluZyAtLS1cbiAgICAgICAgdGhpcy50b2RheUJ0biA9IG51bGw7XG4gICAgICAgIHRoaXMuc2NyYXRjaFdyYXBwZXJFbCA9IG51bGw7XG4gICAgICAgIHRoaXMuc2NyYXRjaHBhZFZpZXdUb2dnbGVCdG4gPSBudWxsO1xuICAgICAgICB0aGlzLmhvdmVyVGltZW91dCA9IG51bGw7XG4gICAgICAgIHRoaXMuaGlkZVRpbWVvdXQgPSBudWxsO1xuICAgICAgICB0aGlzLnBvcHVwRWwgPSBudWxsO1xuICAgICAgICB0aGlzLnRhc2tSZWZyZXNoRGVib3VuY2VUaW1lciA9IG51bGw7XG4gICAgICAgIHRoaXMubm90ZXNSZWZyZXNoRGVib3VuY2VUaW1lciA9IG51bGw7XG4gICAgICAgIHRoaXMuY2FsZW5kYXJSZWZyZXNoRGVib3VuY2VUaW1lciA9IG51bGw7XG4gICAgICAgIHRoaXMudGl0bGVVcGRhdGVUaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5leGlzdGluZ1dlZWtseU5vdGVzID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzLmRhaWx5UmVmcmVzaFRpbWVvdXQgPSBudWxsOyAvLyBUaW1lb3V0IHRvIHRyaWdnZXIgZGFpbHkgcmVmcmVzaCBhdCBtaWRuaWdodFxuICAgICAgICB0aGlzLnRoZW1lT2JzZXJ2ZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmxhc3RLbm93blRvZGF5ID0gbmV3IERhdGUoKTtcblxuICAgICAgICAvLyAtLS0gTW9iaWxlIEtleWJvYXJkIEhhbmRsaW5nIC0tLVxuICAgICAgICB0aGlzLmlzRWRpdGluZ01vYmlsZSA9IGZhbHNlO1xuXG4gICAgICAgIC8vIC0tLSBJY29uIE1hcHBpbmcgZm9yIFRhc2sgU3RhdHVzZXMgLS0tXG4gICAgICAgIC8vIE1hcHMgdGFzayBzdGF0dXMgc3ltYm9scyB0byBMdWNpZGUgaWNvbiBuYW1lcy5cbiAgICAgICAgdGhpcy50YXNrU3RhdHVzSWNvbk1hcCA9IHtcbiAgICAgICAgICAgIC8vIFN0YW5kYXJkIFRhc2tzXG4gICAgICAgICAgICAnLyc6ICdzbGFzaCcsICAgICAgIC8vIEluIFByb2dyZXNzXG4gICAgICAgICAgICAnLSc6ICdtaW51cycsICAgICAgIC8vIENhbmNlbGxlZFxuICAgICAgICAgICAgJz4nOiAnYXJyb3ctcmlnaHQnLCAvLyBGb3J3YXJkZWRcbiAgICAgICAgICAgICc8JzogJ2Fycm93LWxlZnQnLCAgLy8gU2NoZWR1bGluZ1xuICAgICAgICAgICAgLy8gRXh0ZW5kZWQgVGFza3MgZnJvbSB5b3VyIGxpc3RcbiAgICAgICAgICAgICc/JzogJ2hlbHAtY2lyY2xlJywgLy8gUXVlc3Rpb25cbiAgICAgICAgICAgICchJzogJ2ZsYW1lJywgICAgICAgLy8gSW1wb3J0YW50XG4gICAgICAgICAgICAnKic6ICdzdGFyJywgICAgICAgIC8vIFN0YXJcbiAgICAgICAgICAgICdcIic6ICdxdW90ZScsICAgICAgIC8vIFF1b3RlXG4gICAgICAgICAgICAnbCc6ICdtYXAtcGluJywgICAgIC8vIExvY2F0aW9uXG4gICAgICAgICAgICAnYic6ICdib29rbWFyaycsICAgIC8vIEJvb2ttYXJrXG4gICAgICAgICAgICAnaSc6ICdpbmZvJywgICAgICAgIC8vIEluZm9ybWF0aW9uXG4gICAgICAgICAgICAnUyc6ICdwaWdneS1iYW5rJywgIC8vIFNhdmluZ3NcbiAgICAgICAgICAgICdJJzogJ2xpZ2h0YnVsYicsICAgLy8gSWRlYVxuICAgICAgICAgICAgJ3AnOiAndGh1bWJzLXVwJywgICAvLyBQcm9zXG4gICAgICAgICAgICAnYyc6ICd0aHVtYnMtZG93bicsIC8vIENvbnNcbiAgICAgICAgICAgICdmJzogJ2ZsYW1lJywgICAgICAgLy8gRmlyZSAodXNpbmcgJ2ZsYW1lJyBhcyAnc2lyZW4nIGNhbiBiZSB0b28gc3Ryb25nKVxuICAgICAgICAgICAgJ2snOiAna2V5JywgICAgICAgICAvLyBLZXlcbiAgICAgICAgICAgICd3JzogJ3Ryb3BoeScsICAgICAgLy8gV2luXG4gICAgICAgICAgICAndSc6ICdhcnJvdy11cCcsICAgIC8vIFVwXG4gICAgICAgICAgICAnZCc6ICdhcnJvdy1kb3duJywgIC8vIERvd25cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBJbml0aWFsaXplIGEgTXV0YXRpb25PYnNlcnZlciB0byB3YXRjaCBmb3IgdGhlbWUgY2hhbmdlcy5cbiAgICAgICAgdGhpcy50aGVtZU9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuICAgICAgICAgICAgLy8gRGVib3VuY2UgdGhlIHJlLXJlbmRlciB0byBhdm9pZCBtdWx0aXBsZSBjYWxscyBkdXJpbmcgdGhlbWUgc3dpdGNoaW5nLlxuICAgICAgICAgICAgaWYgKHRoaXMudGhlbWVDaGFuZ2VEZWJvdW5jZVRpbWVyKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGhlbWVDaGFuZ2VEZWJvdW5jZVRpbWVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGhlbWVDaGFuZ2VEZWJvdW5jZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGNhbGVuZGFyIGdyaWQgZXhpc3RzLCByZS1yZW5kZXIgaXQgdG8gYXBwbHkgbmV3IHRoZW1lIGNvbG9ycy5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYWxlbmRhckJvZHlFbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgMTAwKTsgLy8gQSAxMDBtcyBkZWxheSBpcyB1c3VhbGx5IHN1ZmZpY2llbnQuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFN0YXJ0IG9ic2VydmluZyB0aGUgYGNsYXNzYCBhdHRyaWJ1dGUgb24gdGhlIGRvY3VtZW50IGJvZHkuXG4gICAgICAgIHRoaXMudGhlbWVPYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHRydWUsXG4gICAgICAgICAgICBhdHRyaWJ1dGVGaWx0ZXI6IFsnY2xhc3MnXVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdtb3VzZXVwJywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gQWx3YXlzIHJlc2V0IHRoZSBtb3VzZWRvd24gZmxhZy5cbiAgICAgICAgICAgIGlmICh0aGlzLmlzTW91c2VEb3duKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc01vdXNlRG93biA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQWxzbywgY3JpdGljYWxseSwgcmVzZXQgdGhlIGRyYWdnaW5nIGZsYWcgYXMgYSBzYWZldHkgbmV0LlxuICAgICAgICAgICAgLy8gVGhpcyBwcmV2ZW50cyB0aGUgZmxhZyBmcm9tIGdldHRpbmcgc3R1Y2sgaWYgZHJhZ2VuZCBkb2Vzbid0IGZpcmUuXG4gICAgICAgICAgICBpZiAodGhpcy5pc0RyYWdnaW5nTm90ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNEcmFnZ2luZ05vdGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX3JlbmRlclRhc2tTeW1ib2woY2hlY2tib3hFbCwgdGFzaykge1xuICAgICAgICBjaGVja2JveEVsLmVtcHR5KCk7XG4gICAgICAgIGNoZWNrYm94RWwuY2xhc3NOYW1lID0gJ3Rhc2stY2hlY2tib3gtc3ltYm9sJzsgLy8gUmVzZXQgY2xhc3Nlc1xuXG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IHRhc2suc3RhdHVzO1xuICAgICAgICBjb25zdCBpY29uTmFtZSA9IHRoaXMudGFza1N0YXR1c0ljb25NYXBbc3RhdHVzXTtcblxuICAgICAgICAvLyBDYXNlIDE6IFRhc2sgaXMgY29tcGxldGVkXG4gICAgICAgIGlmIChzdGF0dXMudG9Mb3dlckNhc2UoKSA9PT0gJ3gnKSB7XG4gICAgICAgICAgICBzZXRJY29uKGNoZWNrYm94RWwsICdjaGVjaycpO1xuICAgICAgICAgICAgY2hlY2tib3hFbC5hZGRDbGFzcygnaXMtY29tcGxldGVkJyk7XG4gICAgICAgICAgICBjaGVja2JveEVsLnN0eWxlLndpZHRoID0gJzEuMjVlbSc7XG4gICAgICAgICAgICBjaGVja2JveEVsLnN0eWxlLmhlaWdodCA9ICcxLjI1ZW0nO1xuXG4gICAgICAgICAgICBjaGVja2JveEVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpJztcbiAgICAgICAgICAgIGNoZWNrYm94RWwuc3R5bGUuYm9yZGVyID0gJ25vbmUnO1xuICAgICAgICAgICAgY2hlY2tib3hFbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNTAlJztcblxuICAgICAgICAgICAgY29uc3Qgc3ZnRWwgPSBjaGVja2JveEVsLnF1ZXJ5U2VsZWN0b3IoJy5zdmctaWNvbicpO1xuICAgICAgICAgICAgaWYgKHN2Z0VsKSB7XG4gICAgICAgICAgICAgICAgc3ZnRWwuc3R5bGUud2lkdGggPSAnNzUlJztcbiAgICAgICAgICAgICAgICBzdmdFbC5zdHlsZS5oZWlnaHQgPSAnNzUlJztcbiAgICAgICAgICAgICAgICBzdmdFbC5zdHlsZS5maWxsID0gJ25vbmUnOyAvLyBEbyBub3QgZmlsbCB0aGUgc2hhcGVcbiAgICAgICAgICAgICAgICBzdmdFbC5zdHlsZS5zdHJva2UgPSAndmFyKC0tdGV4dC1vbi1hY2NlbnQpJzsgLy8gVXNlIGhpZ2gtY29udHJhc3QgY29sb3IgZm9yIHRoZSBsaW5lXG4gICAgICAgICAgICAgICAgc3ZnRWwuc3R5bGUuc3Ryb2tlV2lkdGggPSAnM3B4JzsgLy8gTWFrZSB0aGUgbGluZSB0aGljayBhbmQgY2xlYXJcbiAgICAgICAgICAgICAgICBzdmdFbC5zdHlsZS5jb2xvciA9ICd1bnNldCc7IC8vIFVuc2V0IGNvbG9yIHRvIHByZXZlbnQgY29uZmxpY3RzXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENhc2UgMjogVGFzayBoYXMgYSBjdXN0b20gaWNvblxuICAgICAgICB9IGVsc2UgaWYgKGljb25OYW1lKSB7XG4gICAgICAgICAgICBzZXRJY29uKGNoZWNrYm94RWwsIGljb25OYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gdGhpcy5nZXRJY29uQ29sb3IoaWNvbk5hbWUpO1xuICAgICAgICAgICAgY29uc3Qgc3ZnRWwgPSBjaGVja2JveEVsLnF1ZXJ5U2VsZWN0b3IoJy5zdmctaWNvbicpO1xuICAgICAgICAgICAgaWYgKHN2Z0VsKSB7XG4gICAgICAgICAgICAgICAgc3ZnRWwuc3R5bGUuY29sb3IgPSBjb2xvcjtcbiAgICAgICAgICAgICAgICBzdmdFbC5zdHlsZS5maWxsID0gJ2N1cnJlbnRDb2xvcic7XG4gICAgICAgICAgICAgICAgc3ZnRWwuc3R5bGUuc3Ryb2tlID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hlY2tib3hFbC5zdHlsZS53aWR0aCA9ICcxLjI1ZW0nO1xuICAgICAgICAgICAgY2hlY2tib3hFbC5zdHlsZS5oZWlnaHQgPSAnMS4yNWVtJztcbiAgICAgICAgICAgIGNoZWNrYm94RWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3RyYW5zcGFyZW50JztcbiAgICAgICAgICAgIGNoZWNrYm94RWwuc3R5bGUuYm9yZGVyID0gJ25vbmUnO1xuICAgICAgICAgICAgY2hlY2tib3hFbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnMCc7XG5cbiAgICAgICAgICAgIC8vIENhc2UgMzogRGVmYXVsdCB0YXNrIChlLmcuLCBpbmNvbXBsZXRlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hlY2tib3hFbC5zZXRUZXh0KHN0YXR1cy50cmltKCkgfHwgJyAnKTtcbiAgICAgICAgICAgIGNoZWNrYm94RWwuc3R5bGUud2lkdGggPSAnMS4xNWVtJztcbiAgICAgICAgICAgIGNoZWNrYm94RWwuc3R5bGUuaGVpZ2h0ID0gJzEuMTVlbSc7XG4gICAgICAgICAgICBjaGVja2JveEVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7XG4gICAgICAgICAgICBjaGVja2JveEVsLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbm9ybWFsKSc7XG4gICAgICAgICAgICBjaGVja2JveEVsLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc1MCUnO1xuICAgICAgICAgICAgY2hlY2tib3hFbC5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIHZhcigtLXRleHQtZmFpbnQpJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGJsdXJBY3RpdmVJbnB1dCgpIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVFbCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGl0J3MgYW4gZWxlbWVudCB0aGF0IGNhbiBiZSBibHVycmVkIGJlZm9yZSBjYWxsaW5nIHRoZSBtZXRob2RcbiAgICAgICAgICAgIGlmIChhY3RpdmVFbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmIHR5cGVvZiBhY3RpdmVFbC5ibHVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlRWwuYmx1cigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICB9XG5cbiAgICBoYW5kbGVUaGVtZUNoYW5nZSgpIHtcbiAgICAgICAgLy8gVGhpcyBmdW5jdGlvbiBmb3JjZXMgYSByZS1yZW5kZXIgb2YgdGhlIGNhbGVuZGFyIGdyaWQsXG4gICAgICAgIC8vIGVuc3VyaW5nIGFsbCB0aGVtZS1kZXBlbmRlbnQgc3R5bGVzIGFyZSByZWFwcGxpZWQgY29ycmVjdGx5LlxuICAgICAgICBpZiAodGhpcy5jYWxlbmRhckJvZHlFbCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHNpbmdsZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIGNvbGxhcHNpbmcgb3IgZXhwYW5kaW5nIHRoZSBjYWxlbmRhciB2aWV3LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2hvdWxkQmVDb2xsYXBzZWQgLSBUaGUgZGVzaXJlZCBzdGF0ZS4gVHJ1ZSB0byBjb2xsYXBzZSwgZmFsc2UgdG8gZXhwYW5kLlxuICAgICAqL1xuICAgIHRvZ2dsZUNhbGVuZGFyKHNob3VsZEJlQ29sbGFwc2VkKSB7XG4gICAgICAgIC8vIElmIHRoZSBVSSBpcyBhbHJlYWR5IGluIHRoZSBkZXNpcmVkIHN0YXRlLCBkbyBub3RoaW5nLlxuICAgICAgICBpZiAodGhpcy5pc0NhbGVuZGFyQ29sbGFwc2VkID09PSBzaG91bGRCZUNvbGxhcHNlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pc0NhbGVuZGFyQ29sbGFwc2VkID0gc2hvdWxkQmVDb2xsYXBzZWQ7XG5cbiAgICAgICAgLy8gVG9nZ2xlIHRoZSBtYWluIENTUyBjbGFzcyB0aGF0IGNvbnRyb2xzIHRoZSBjb2xsYXBzZSBhbmltYXRpb24uXG4gICAgICAgIC8vIFRoZSBDU1Mgd2lsbCBhdXRvbWF0aWNhbGx5IGhhbmRsZSByb3RhdGluZyB0aGUgY2hldnJvbiBpY29uLlxuICAgICAgICBpZiAodGhpcy5jb250YWluZXJFbCAmJiB0aGlzLmNvbnRhaW5lckVsLmZpcnN0RWxlbWVudENoaWxkKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC50b2dnbGUoJ2NhbGVuZGFyLWNvbGxhcHNlZCcsIHNob3VsZEJlQ29sbGFwc2VkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldHVwUmVvcmRlck1vZGUoKSB7XG4gICAgICAgIGNvbnN0IGlzTWFjID0gUGxhdGZvcm0uaXNNYWNPUztcbiAgICAgICAgbGV0IGlzUmVvcmRlck1vZGUgPSBmYWxzZTtcblxuICAgICAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGUpID0+IHtcbiAgICAgICAgICAgIC8vIFVzZSBBbHQga2V5IChPcHRpb24gb24gTWFjKSBvciBDdHJsIGtleSAoQ29udHJvbCBvbiBXaW5kb3dzKVxuICAgICAgICAgICAgY29uc3QgaXNNb2RpZmllclByZXNzZWQgPSBpc01hYyA/IGUuYWx0S2V5IDogZS5jdHJsS2V5O1xuXG4gICAgICAgICAgICAvLyBPbmx5IGFjdGl2YXRlIGlmIHdlJ3JlIGluIHBpbm5lZCBub3RlcyB2aWV3IEFORCBjdXN0b20gc29ydCBpcyBzZWxlY3RlZFxuICAgICAgICAgICAgaWYgKGlzTW9kaWZpZXJQcmVzc2VkICYmICFpc1Jlb3JkZXJNb2RlICYmXG4gICAgICAgICAgICAgICAgdGhpcy5ub3Rlc1ZpZXdNb2RlID09PSAncGlubmVkJyAmJlxuICAgICAgICAgICAgICAgIHRoaXMucGlubmVkU29ydE9yZGVyID09PSAnY3VzdG9tJykge1xuXG4gICAgICAgICAgICAgICAgaXNSZW9yZGVyTW9kZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5hZGRDbGFzcygncGlubmVkLW5vdGVzLXJlb3JkZXItbW9kZScpO1xuICAgICAgICAgICAgICAgIC8vbmV3IE5vdGljZShgUmVvcmRlciBtb2RlIGFjdGl2ZSAoJHttb2RpZmllcktleU5hbWV9KSAtIGRyYWcgdG8gcmVhcnJhbmdlYCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzTW9kaWZpZXJQcmVzc2VkICYmICFpc1Jlb3JkZXJNb2RlICYmXG4gICAgICAgICAgICAgICAgdGhpcy5ub3Rlc1ZpZXdNb2RlID09PSAncGlubmVkJyAmJlxuICAgICAgICAgICAgICAgIHRoaXMucGlubmVkU29ydE9yZGVyICE9PSAnY3VzdG9tJykge1xuICAgICAgICAgICAgICAgIC8vIFNob3cgbWVzc2FnZSBpZiB1c2VyIHRyaWVzIHRvIGFjdGl2YXRlIHJlb3JkZXIgbW9kZSB3aGVuIG5vdCBpbiBjdXN0b20gc29ydFxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFN3aXRjaCB0byBDdXN0b20gc29ydCBvcmRlciB0byBlbmFibGUgZHJhZyByZW9yZGVyaW5nYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaGFuZGxlS2V5VXAgPSAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgd2FzTW9kaWZpZXJSZWxlYXNlZCA9IGlzTWFjID8gIWUuYWx0S2V5IDogIWUuY3RybEtleTtcblxuICAgICAgICAgICAgaWYgKHdhc01vZGlmaWVyUmVsZWFzZWQgJiYgaXNSZW9yZGVyTW9kZSkge1xuICAgICAgICAgICAgICAgIGlzUmVvcmRlck1vZGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLnJlbW92ZUNsYXNzKCdwaW5uZWQtbm90ZXMtcmVvcmRlci1tb2RlJyk7XG4gICAgICAgICAgICAgICAgLy9uZXcgTm90aWNlKCdSZW9yZGVyIG1vZGUgZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBSZWdpc3RlciB0aGUgbGlzdGVuZXJzIHVzaW5nIE9ic2lkaWFuJ3MgQVBJIGZvciBwcm9wZXIgY2xlYW51cFxuICAgICAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2tleXVwJywgaGFuZGxlS2V5VXApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICogTmF2aWdhdGVzIHRoZSBjYWxlbmRhciB0byB0aGUgY3VycmVudCBtb250aCB3aXRoIGEgc21vb3RoIHNjcm9sbCBhbmltYXRpb25cbiAgICAqIGluIHRoZSB2ZXJ0aWNhbCB2aWV3LiBJdCBmb3JjZXMgYSByZS1yZW5kZXIgdG8gZW5zdXJlIHRoZSB0YXJnZXQgZWxlbWVudFxuICAgICogZXhpc3RzIGJlZm9yZSBzY3JvbGxpbmcuXG4gICAgKi9cbiAgICBhc3luYyBnb1RvQ3VycmVudE1vbnRoKCkge1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAvLyBVc2luZyBtb21lbnQuanMgZm9yIGEgcmVsaWFibGUgbW9udGggY29tcGFyaXNvblxuICAgICAgICBjb25zdCBpc0FscmVhZHlDdXJyZW50TW9udGggPSBtb21lbnQodGhpcy5kaXNwbGF5ZWRNb250aCkuaXNTYW1lKG5vdywgJ21vbnRoJyk7XG5cbiAgICAgICAgaWYgKGlzQWxyZWFkeUN1cnJlbnRNb250aCkge1xuICAgICAgICAgICAgLy8gSWYgYWxyZWFkeSBvbiB0aGUgY3VycmVudCBtb250aCwgdG9nZ2xlIHRoZSBwb3B1cCBsb2NrLlxuICAgICAgICAgICAgdGhpcy5pc1BvcHVwTG9ja2VkID0gIXRoaXMuaXNQb3B1cExvY2tlZDtcbiAgICAgICAgICAgIHRoaXMudG9kYXlCdG4uY2xhc3NMaXN0LnRvZ2dsZSgncG9wdXAtbG9ja2VkJywgdGhpcy5pc1BvcHVwTG9ja2VkKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYENhbGVuZGFyIHBvcHVwcyAke3RoaXMuaXNQb3B1cExvY2tlZCA/ICdkaXNhYmxlZCcgOiAncmUtZW5hYmxlZCd9LmApO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVUb2RheUJ0bkFyaWFMYWJlbCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVzZXQgdGhlIGludGVybmFsIHN0YXRlIHRvIHRvZGF5J3MgZGF0ZSBmaXJzdC5cbiAgICAgICAgdGhpcy5kaXNwbGF5ZWRNb250aCA9IG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCBub3cuZ2V0TW9udGgoKSwgMSk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNWZXJ0aWNhbFZpZXcpIHtcbiAgICAgICAgICAgIC8vIFJlLXJlbmRlciB0aGUgZW50aXJlIHZpZXcgdG8gZW5zdXJlIHRoZSBjdXJyZW50IG1vbnRoIGlzIGluIHRoZSBET00uXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlcigpO1xuXG4gICAgICAgICAgICAvLyBVc2UgYSBzbWFsbCB0aW1lb3V0IHRvIHdhaXQgZm9yIHRoZSBET00gdG8gdXBkYXRlIGFmdGVyIHRoZSByZW5kZXIuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRNb250aElkID0gYG1vbnRoLSR7dGhpcy5kaXNwbGF5ZWRNb250aC5nZXRGdWxsWWVhcigpfS0ke3RoaXMuZGlzcGxheWVkTW9udGguZ2V0TW9udGgoKX1gO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEVsID0gdGhpcy52ZXJ0aWNhbFNjcm9sbGVyRWw/LnF1ZXJ5U2VsZWN0b3IoYCMke3RhcmdldE1vbnRoSWR9YCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0RWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RWwuc2Nyb2xsSW50b1ZpZXcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2s6ICdzdGFydCdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgMTAwKTsgLy8gQSAxMDBtcyBkZWxheSBpcyB1c3VhbGx5IHN1ZmZpY2llbnQgZm9yIHRoZSBET00gdG8gdXBkYXRlLlxuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBUaGUgaG9yaXpvbnRhbCB2aWV3J3MgbG9naWMgcmVtYWlucyB0aGUgc2FtZS5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2hhbmdlTW9udGgoMCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRJY29uQ29sb3IoaWNvbk5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChpY29uTmFtZSkge1xuICAgICAgICAgICAgY2FzZSAnbWFwLXBpbic6XG4gICAgICAgICAgICAgICAgcmV0dXJuICd2YXIoLS10ZXh0LWFjY2VudCknOyAvLyBSZWRcbiAgICAgICAgICAgIGNhc2UgJ2ZsYW1lJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3ZhcigtLXRleHQtd2FybmluZyknOyAvLyBPcmFuZ2VcbiAgICAgICAgICAgIGNhc2UgJ3NsYXNoJzpcbiAgICAgICAgICAgIGNhc2UgJ3BpZ2d5LWJhbmsnOlxuICAgICAgICAgICAgY2FzZSAndGh1bWJzLXVwJzpcbiAgICAgICAgICAgIGNhc2UgJ3Ryb3BoeSc6XG4gICAgICAgICAgICBjYXNlICdhcnJvdy11cCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuICd2YXIoLS10ZXh0LXN1Y2Nlc3MpJzsgLy8gR3JlZW5cbiAgICAgICAgICAgIGNhc2UgJ3RodW1icy1kb3duJzpcbiAgICAgICAgICAgIGNhc2UgJ2Fycm93LWRvd24nOlxuICAgICAgICAgICAgICAgIHJldHVybiAndmFyKC0tdGV4dC1lcnJvciknOyAvLyBNdXRlZCBSZWRcbiAgICAgICAgICAgIGNhc2UgJ3N0YXInOlxuICAgICAgICAgICAgY2FzZSAnbGlnaHRidWxiJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3ZhcigtLWNvbG9yLXllbGxvdyknOyAvLyBZZWxsb3dcbiAgICAgICAgICAgIGNhc2UgJ2Jvb2ttYXJrJzpcbiAgICAgICAgICAgIGNhc2UgJ2luZm8nOlxuICAgICAgICAgICAgICAgIHJldHVybiAndmFyKC0tY29sb3ItYmx1ZSknOyAvLyBCbHVlXG4gICAgICAgICAgICBjYXNlICdoZWxwLWNpcmNsZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuICd2YXIoLS1jb2xvci1jeWFuKSc7IC8vIEN5YW5cbiAgICAgICAgICAgIGNhc2UgJ2tleSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdnb2xkZW5yb2QnOyAvLyBHb2xkXG4gICAgICAgICAgICBjYXNlICdtaW51cyc6XG4gICAgICAgICAgICBjYXNlICdxdW90ZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuICd2YXIoLS10ZXh0LW11dGVkKSc7IC8vIEdyZXlcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICd2YXIoLS10ZXh0LW5vcm1hbCknOyAvLyBEZWZhdWx0IGNvbG9yIGZvciBhcnJvd3MsIGV0Yy5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgZm9udCBzaXplIHNldHRpbmdzIGFzIENTUyB2YXJpYWJsZXMgdG8gdGhlIHZpZXcncyByb290IGVsZW1lbnQsXG4gICAgICogYWxsb3dpbmcgYWxsIENTUyBydWxlcyB0byB1cGRhdGUgZHluYW1pY2FsbHkuXG4gICAgICovXG4gICAgYXBwbHlGb250U2V0dGluZ3MoKSB7XG4gICAgICAgIGlmICghdGhpcy5jb250YWluZXJFbCkgcmV0dXJuO1xuXG4gICAgICAgIC8vIEdldCB2YWx1ZXMgZnJvbSBzZXR0aW5ncywgcHJvdmlkaW5nIGRlZmF1bHQgZmFsbGJhY2tzLlxuICAgICAgICBjb25zdCBsYWJlbEZvbnRTaXplID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9udFNpemUgfHwgJzEycHgnO1xuICAgICAgICBjb25zdCBkYXlOdW1iZXJGb250U2l6ZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmRheU51bWJlckZvbnRTaXplIHx8ICcxNXB4JztcblxuICAgICAgICAvLyBTZXQgdGhlIENTUyB2YXJpYWJsZXMgb24gdGhlIG1haW4gY29udGFpbmVyIGVsZW1lbnQgZm9yIHRoaXMgdmlldy5cbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxlbmRhci1sYWJlbC1mb250LXNpemUnLCBsYWJlbEZvbnRTaXplKTtcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxlbmRhci1kYXktbnVtYmVyLWZvbnQtc2l6ZScsIGRheU51bWJlckZvbnRTaXplKTtcbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGVGaWxlQ2xpY2soZmlsZSwgZXZlbnQpIHtcbiAgICAgICAgLy8gVGhlIFNoaWZ0IGtleSBpcyB0aGUgdWx0aW1hdGUgb3ZlcnJpZGUuIElmIGl0J3MgcHJlc3NlZCwgYWx3YXlzIG9wZW4gaW4gYSBuZXcgbGVhZi5cbiAgICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGZpbGUucGF0aCwgJycsIHRydWUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIElmIFNoaWZ0IGlzIE5PVCBwcmVzc2VkLCBwcm9jZWVkIHdpdGggbm9ybWFsIGxvZ2ljIC0tLVxuICAgICAgICBjb25zdCBpc0Fzc2V0ID0gZmlsZS5leHRlbnNpb24udG9Mb3dlckNhc2UoKSAhPT0gJ21kJztcblxuICAgICAgICBpZiAoaXNBc3NldCkge1xuICAgICAgICAgICAgLy8gSXQncyBhbiBhc3NldCwgc28gcmVzcGVjdCB0aGUgdXNlcidzIGRlZmF1bHQgc2V0dGluZyBmb3IgYXNzZXRzLlxuICAgICAgICAgICAgY29uc3Qgb3BlbkluTmV3VGFiID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXNzZXRzT3BlbkFjdGlvbiA9PT0gJ25ldy10YWInO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChmaWxlLnBhdGgsICcnLCBvcGVuSW5OZXdUYWIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSXQncyBhIG5vdGUgZmlsZS4gSGVyZSB3ZSBtdXN0IGNoZWNrIGZvciBhbiBleGlzdGluZyBvcGVuIGxlYWYuXG4gICAgICAgICAgICBjb25zdCBtYXJrZG93bkxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXCJtYXJrZG93blwiKTtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nTGVhZiA9IG1hcmtkb3duTGVhdmVzLmZpbmQobGVhZiA9PiBsZWFmLnZpZXcuZmlsZT8ucGF0aCA9PT0gZmlsZS5wYXRoKTtcblxuICAgICAgICAgICAgaWYgKGV4aXN0aW5nTGVhZikge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBub3RlIGlzIGFscmVhZHkgb3Blbiwgc28ganVzdCBmb2N1cyBvbiB0aGF0IGxlYWYuXG4gICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYoZXhpc3RpbmdMZWFmKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIG5vdGUgaXMgbm90IG9wZW4sIHNvIHJlc3BlY3QgdGhlIHVzZXIncyBkZWZhdWx0IHNldHRpbmcgZm9yIG5vdGVzLlxuICAgICAgICAgICAgICAgIGNvbnN0IG9wZW5Jbk5ld1RhYiA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVzT3BlbkFjdGlvbiA9PT0gJ25ldy10YWInO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKG9wZW5Jbk5ld1RhYikub3BlbkZpbGUoZmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXJzIGEgc2luZ2xlIG5vdGUgaXRlbSByb3cgaW4gYSBnaXZlbiBjb250YWluZXIuXG4gICAgICogQHBhcmFtIHtURmlsZX0gZmlsZSBUaGUgbm90ZSBmaWxlIHRvIHJlbmRlci5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIgVGhlIHBhcmVudCBlbGVtZW50IHRvIGFwcGVuZCB0aGUgcm93IHRvLlxuICAgICAqL1xuICAgIHJlbmRlck5vdGVJdGVtKGZpbGUsIGNvbnRhaW5lcikge1xuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuICAgICAgICBjb25zdCBzZWFyY2hJbnB1dEVsID0gdGhpcy5ub3Rlc1NlYXJjaElucHV0RWw7XG5cbiAgICAgICAgY29uc3Qgcm93ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ25vdGUtcm93JyB9KTtcbiAgICAgICAgcm93LmRhdGFzZXQuZmlsZVBhdGggPSBmaWxlLnBhdGg7XG5cbiAgICAgICAgLy8gLS0tIEVOSEFOQ0VNRU5UOiBTZXQgbW91c2Vkb3duIGZsYWcgYW5kIGhpZGUgYW55IG9wZW4gcG9wdXAgLS0tXG4gICAgICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzTW91c2VEb3duID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaGlkZUZpbGVQb3B1cCgpOyAvLyBJbW1lZGlhdGVseSBoaWRlIGFueSB2aXNpYmxlIHBvcHVwXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBpc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgIGxldCBsb25nUHJlc3NPY2N1cnJlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBpc1Jlb3JkZXJhYmxlID0gdGhpcy5ub3Rlc1ZpZXdNb2RlID09PSAncGlubmVkJyAmJiB0aGlzLnBpbm5lZFNvcnRPcmRlciA9PT0gJ2N1c3RvbSc7XG5cbiAgICAgICAgaWYgKGlzUmVvcmRlcmFibGUpIHtcbiAgICAgICAgICAgIHJvdy5kcmFnZ2FibGUgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgZHJhZ0hhbmRsZSA9IHJvdy5jcmVhdGVEaXYoeyBjbHM6ICdkcmFnLWhhbmRsZScgfSk7XG4gICAgICAgICAgICBzZXRJY29uKGRyYWdIYW5kbGUsICdncmlwLXZlcnRpY2FsJyk7XG5cbiAgICAgICAgICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlzRHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNEcmFnZ2luZ05vdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSAnbW92ZSc7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiByb3cuYWRkQ2xhc3MoJ2RyYWdnaW5nJyksIDApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJvdy5yZW1vdmVDbGFzcygnZHJhZ2dpbmcnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzRHJhZ2dpbmdOb3RlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IGlzRHJhZ2dpbmcgPSBmYWxzZTsgfSwgNTApO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVBpbm5lZE9yZGVyKGNvbnRhaW5lcik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZHJhZ2dpbmcgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmRyYWdnaW5nJyk7XG4gICAgICAgICAgICAgICAgaWYgKGRyYWdnaW5nICYmIGRyYWdnaW5nICE9PSByb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHJvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNBZnRlciA9IGUuY2xpZW50WSA+IHJlY3QudG9wICsgcmVjdC5oZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgICAgICByb3cucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZHJhZ2dpbmcsIGlzQWZ0ZXIgPyByb3cubmV4dFNpYmxpbmcgOiByb3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGl0bGVXcmFwcGVyID0gcm93LmNyZWF0ZURpdih7IGNsczogJ25vdGUtdGl0bGUtd3JhcHBlcicgfSk7XG5cbiAgICAgICAgLy8gLS0tIFBvcHVwIGFuZCBMb25nLVByZXNzIExvZ2ljIC0tLVxuICAgICAgICBpZiAoUGxhdGZvcm0uaXNNb2JpbGUpIHtcbiAgICAgICAgICAgIGxldCB0b3VjaFRpbWVyO1xuICAgICAgICAgICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRHJhZ2dpbmdOb3RlKSByZXR1cm47XG4gICAgICAgICAgICAgICAgbG9uZ1ByZXNzT2NjdXJyZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0b3VjaFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxvbmdQcmVzc09jY3VycmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUmVvcmRlcmFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IudmlicmF0ZSkgbmF2aWdhdG9yLnZpYnJhdGUoNTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRHJhZyB0byByZW9yZGVyJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dOb3RlUG9wdXAocm93LCBmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDUwMCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWxUaW1lciA9ICgpID0+IGNsZWFyVGltZW91dCh0b3VjaFRpbWVyKTtcbiAgICAgICAgICAgICAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBjYW5jZWxUaW1lciwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBjYW5jZWxUaW1lciwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoc2V0dGluZ3Muc2hvd05vdGVUb29sdGlwcykge1xuICAgICAgICAgICAgbGV0IGhvdmVyVGltZW91dDtcbiAgICAgICAgICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRHJhZ2dpbmdOb3RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZUZpbGVQb3B1cCgpO1xuICAgICAgICAgICAgICAgIGhvdmVyVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSB0aW1lciBmaXJlcywgZG8gYSBmaW5hbCBjaGVjazogaXMgdGhlIG1vdXNlIGJ1dHRvbiBzdGlsbCBkb3duP1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdXNlciBzdGFydGVkIGEgY2xpY2svZHJhZyBvbiB0aGlzIG9yIGFub3RoZXIgZWxlbWVudCBhbmQgaXMgc3RpbGwgaG9sZGluZywgZG9uJ3Qgc2hvdyB0aGUgcG9wdXAuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTW91c2VEb3duKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Tm90ZVBvcHVwKHJvdywgZmlsZSk7XG4gICAgICAgICAgICAgICAgfSwgc2V0dGluZ3Mub3RoZXJOb3RlSG92ZXJEZWxheSk7XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGhvdmVyVGltZW91dCk7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5oaWRlRmlsZVBvcHVwKCksIHNldHRpbmdzLnBvcHVwSGlkZURlbGF5KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNldHRpbmdzLnNob3dOb3RlU3RhdHVzRG90cykge1xuICAgICAgICAgICAgY29uc3QgZG90ID0gdGl0bGVXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogJ25vdGUtc3RhdHVzLWRvdCcgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0RhaWx5Tm90ZShmaWxlKSkge1xuICAgICAgICAgICAgICAgIGRvdC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBzZXR0aW5ncy5kYWlseU5vdGVEb3RDb2xvcjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc1dlZWtseU5vdGUoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICBkb3Quc3R5bGUuYmFja2dyb3VuZENvbG9yID0gc2V0dGluZ3Mud2Vla2x5Tm90ZURvdENvbG9yO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb3QuYWRkQ2xhc3MoaXNTYW1lRGF5KG5ldyBEYXRlKGZpbGUuc3RhdC5jdGltZSksIG5ldyBEYXRlKGZpbGUuc3RhdC5tdGltZSkpID8gJ25vdGUtc3RhdHVzLWRvdC1jcmVhdGVkJyA6ICdub3RlLXN0YXR1cy1kb3QtbW9kaWZpZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRpdGxlUGF0aFdyYXBwZXIgPSB0aXRsZVdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS10aXRsZS1wYXRoLXdyYXBwZXInIH0pO1xuICAgICAgICB0aXRsZVBhdGhXcmFwcGVyLmNyZWF0ZURpdih7IHRleHQ6IGZpbGUuYmFzZW5hbWUsIGNsczogJ25vdGUtdGl0bGUnIH0pO1xuICAgICAgICBpZiAoZmlsZS5wYXJlbnQgJiYgZmlsZS5wYXJlbnQucGF0aCAhPT0gJy8nKSB7XG4gICAgICAgICAgICB0aXRsZVBhdGhXcmFwcGVyLmNyZWF0ZURpdih7IHRleHQ6IGZpbGUucGFyZW50LnBhdGgsIGNsczogJ25vdGUtcGF0aCcgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByb3cuY3JlYXRlRGl2KHsgdGV4dDogZm9ybWF0RGF0ZShuZXcgRGF0ZShmaWxlLnN0YXQubXRpbWUpLCAnREQtTU0tWVlZWScpLCBjbHM6ICdub3RlLW1vZC1kYXRlJyB9KTtcblxuICAgICAgICAvLyBUaGUgJ2Ryb3AnIGV2ZW50IGxpc3RlbmVyIHRoYXQgd2FzIGhlcmUgaGFzIGJlZW4gcmVtb3ZlZC5cbiAgICAgICAgLy8gVGhlIG5ldyBoYW5kbGVyIG9uIHRoZSBwYXJlbnQgY29udGFpbmVyIGluIGBwb3B1bGF0ZU5vdGVzYCBub3cgbWFuYWdlcyBzYXZpbmcuXG4gICAgICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICAvLyBUaGUgaXNEcmFnZ2luZyBmbGFnIGlzIG5vdyBjb3JyZWN0bHkgc2NvcGVkIGFuZCB3aWxsIHByZXZlbnQgY2xpY2tzIGFmdGVyIGEgZHJhZy5cbiAgICAgICAgICAgIGlmIChsb25nUHJlc3NPY2N1cnJlZCB8fCBpc0RyYWdnaW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5kcmFnLWhhbmRsZScpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5oYW5kbGVGaWxlQ2xpY2soZmlsZSwgZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkS2V5ZG93bkxpc3RlbmVycyhyb3csIHNlYXJjaElucHV0RWwpO1xuICAgICAgICByZXR1cm4gcm93O1xuXG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZVBpbm5lZE9yZGVyKGNvbnRhaW5lcikge1xuICAgICAgICAvLyBBZGQgdGhpcyBsaW5lIGZvciBkZWJ1Z2dpbmcuIFlvdSBzaG91bGQgc2VlIHRoaXMgbm90aWNlIHBvcCB1cC5cbiAgICAgICAgY29uc3Qgbm90ZVJvd3MgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLm5vdGUtcm93Jyk7XG4gICAgICAgIGNvbnN0IG5ld09yZGVyID0gQXJyYXkuZnJvbShub3RlUm93cykubWFwKHJvdyA9PiByb3cuZGF0YXNldC5maWxlUGF0aCk7XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSBzZXR0aW5ncyB3aXRoIHRoZSBuZXcgb3JkZXJcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucGlubmVkTm90ZXNDdXN0b21PcmRlciA9IG5ld09yZGVyO1xuXG4gICAgICAgIC8vIFNldCB0aGUgYWN0aXZlIHNvcnQgbW9kZSB0byAnY3VzdG9tJyBzaW5jZSBhIG1hbnVhbCBzb3J0IGp1c3QgaGFwcGVuZWRcbiAgICAgICAgdGhpcy5waW5uZWRTb3J0T3JkZXIgPSAnY3VzdG9tJztcblxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgICAvLyBSZWZyZXNoIHRoZSB2aWV3IHRvIGVuc3VyZSB0aGUgaGVhZGVyJ3Mgc29ydCBpbmRpY2F0b3IgaXMgdXBkYXRlZFxuICAgICAgICBhd2FpdCB0aGlzLnBvcHVsYXRlTm90ZXMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGb3JtYXRzIGEgbGlzdCBvZiBjYWxlbmRhciBldmVudHMgaW50byBhIG1hcmtkb3duIHN0cmluZyBmb3IgdGVtcGxhdGUgaW5zZXJ0aW9uLlxuICAgICAqIEBwYXJhbSB7LX0gZXZlbnRzIFxuICAgICAqIEByZXR1cm5zIFxuICAgICAqL1xuICAgIGZvcm1hdEV2ZW50c0ZvclRlbXBsYXRlKGV2ZW50cykge1xuICAgICAgICBpZiAoIWV2ZW50cyB8fCBldmVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldHJpZXZlIHRoZSB1c2VyLWRlZmluZWQgZm9ybWF0IGZyb20gc2V0dGluZ3NcbiAgICAgICAgY29uc3QgZm9ybWF0U3RyaW5nID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FsZW5kYXJFdmVudHNGb3JtYXQgfHwgJy0ge3tzdGFydFRpbWV9fSAtIHt7ZW5kVGltZX19OiB7e3N1bW1hcnl9fSc7XG5cbiAgICAgICAgLy8gU29ydCBldmVudHNcbiAgICAgICAgZXZlbnRzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGlmIChhLmlzQWxsRGF5ICYmICFiLmlzQWxsRGF5KSByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAoIWEuaXNBbGxEYXkgJiYgYi5pc0FsbERheSkgcmV0dXJuIDE7XG4gICAgICAgICAgICBpZiAoYS5pc0FsbERheSAmJiBiLmlzQWxsRGF5KSByZXR1cm4gYS5zdW1tYXJ5LmxvY2FsZUNvbXBhcmUoYi5zdW1tYXJ5KTtcbiAgICAgICAgICAgIGlmICghYS5zdGFydFRpbWUgfHwgIWIuc3RhcnRUaW1lKSByZXR1cm4gMDtcbiAgICAgICAgICAgIHJldHVybiBhLnN0YXJ0VGltZS5sb2NhbGVDb21wYXJlKGIuc3RhcnRUaW1lKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gTWFwIGVhY2ggZXZlbnQgdG8gaXRzIGZvcm1hdHRlZCBzdHJpbmdcbiAgICAgICAgY29uc3QgZXZlbnRTdHJpbmdzID0gZXZlbnRzLm1hcChldmVudCA9PiB7XG4gICAgICAgICAgICBsZXQgZmluYWxTdHJpbmc7XG5cbiAgICAgICAgICAgIGlmIChldmVudC5pc0FsbERheSkge1xuICAgICAgICAgICAgICAgIC8vIEZvciBhbGwtZGF5IGV2ZW50cywgcmVwbGFjZSB0aGUgdGltZSBwbGFjZWhvbGRlcnMgd2l0aCBcIkFsbC1kYXlcIlxuICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVnZXggbG9va3MgZm9yIHt7c3RhcnRUaW1lfX0sIG9wdGlvbmFsIHdoaXRlc3BhY2UsIGEgc2VwYXJhdG9yLCBvcHRpb25hbCB3aGl0ZXNwYWNlLCBhbmQge3tlbmRUaW1lfX1cbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lUGxhY2Vob2xkZXJSZWdleCA9IC97e1xccypzdGFydFRpbWVcXHMqfX0uKnt7XFxzKmVuZFRpbWVcXHMqfX0vO1xuXG4gICAgICAgICAgICAgICAgZmluYWxTdHJpbmcgPSBmb3JtYXRTdHJpbmcucmVwbGFjZSh0aW1lUGxhY2Vob2xkZXJSZWdleCwgJ0FsbC1kYXknKTtcblxuICAgICAgICAgICAgICAgIC8vIE5vdywgcmVwbGFjZSB0aGUgc3VtbWFyeSBhcyB1c3VhbFxuICAgICAgICAgICAgICAgIGZpbmFsU3RyaW5nID0gZmluYWxTdHJpbmcucmVwbGFjZSgve3tzdW1tYXJ5fX0vZywgZXZlbnQuc3VtbWFyeSB8fCAnJyk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRm9yIHRpbWVkIGV2ZW50cywgdXNlIHRoZSBvcmlnaW5hbCBsb2dpY1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IGV2ZW50LnN0YXJ0VGltZSB8fCAnJztcbiAgICAgICAgICAgICAgICBjb25zdCBlbmRUaW1lID0gZXZlbnQuZW5kVGltZSB8fCAnJztcblxuICAgICAgICAgICAgICAgIGZpbmFsU3RyaW5nID0gZm9ybWF0U3RyaW5nXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC97e3N0YXJ0VGltZX19L2csIHN0YXJ0VGltZSlcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL3t7ZW5kVGltZX19L2csIGVuZFRpbWUpXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC97e3N1bW1hcnl9fS9nLCBldmVudC5zdW1tYXJ5IHx8ICcnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVHJpbSBhbnkgbGVmdG92ZXIgd2hpdGVzcGFjZSBvciBkYW5nbGluZyBzZXBhcmF0b3JzXG4gICAgICAgICAgICByZXR1cm4gZmluYWxTdHJpbmcucmVwbGFjZSgvXFxzKjpcXHMqJC8sICcnKS5yZXBsYWNlKC9cXHMqLVxccyokLywgJycpLnRyaW0oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gSm9pbiB0aGUgYXJyYXkgb2YgZXZlbnQgc3RyaW5ncyB3aXRoIGEgZG91YmxlIG5ld2xpbmVcbiAgICAgICAgY29uc3QgZXZlbnRCb2R5ID0gZXZlbnRTdHJpbmdzLmpvaW4oJ1xcblxcbicpO1xuXG4gICAgICAgIC8vIENvbnN0cnVjdCB0aGUgZmluYWwgb3V0cHV0XG4gICAgICAgIHJldHVybiBldmVudEJvZHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2NoZWR1bGVzIGEgcmVmcmVzaCB0byBvY2N1ciBhdCB0aGUgbmV4dCBtaWRuaWdodC5cbiAgICAgKi9cbiAgICBzY2hlZHVsZURhaWx5UmVmcmVzaCgpIHtcbiAgICAgICAgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIHRpbWVyIHRvIGF2b2lkIGR1cGxpY2F0ZXNcbiAgICAgICAgaWYgKHRoaXMuZGFpbHlSZWZyZXNoVGltZW91dCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGFpbHlSZWZyZXNoVGltZW91dCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBub3cgPSBtb21lbnQoKTtcbiAgICAgICAgY29uc3QgZW5kT2ZEYXkgPSBtb21lbnQoKS5lbmRPZignZGF5Jyk7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBtaWxsaXNlY29uZHMgdW50aWwgdGhlIGVuZCBvZiB0b2RheSwgcGx1cyBvbmUgdG8gdGljayBvdmVyIHRvIHRoZSBuZXcgZGF5XG4gICAgICAgIGNvbnN0IG1zVW50aWxNaWRuaWdodCA9IGVuZE9mRGF5LmRpZmYobm93KSArIDE7XG5cbiAgICAgICAgdGhpcy5kYWlseVJlZnJlc2hUaW1lb3V0ID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG5cbiAgICAgICAgICAgIC8vIFJlLWNhbGN1bGF0ZSBhbGwgdGFzayBkdWUgZGF0ZXMgcmVsYXRpdmUgdG8gdGhlIG5ldyBcInRvZGF5XCJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYnVpbGRUYXNrc0J5RGF0ZU1hcCgpO1xuXG4gICAgICAgICAgICAvLyBSZS1yZW5kZXIgdGhlIGNhbGVuZGFyIHRvIHVwZGF0ZSBoZWF0bWFwcywgYmFkZ2VzLCBhbmQgdG9kYXkncyBoaWdobGlnaHRcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcblxuICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgaXMgY3VycmVudGx5IGxvb2tpbmcgYXQgdGhlIHRhc2tzIHRhYiwgcmVmcmVzaCBpdHMgdmlld1xuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlVGFiID09PSAndGFza3MnKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wb3B1bGF0ZVRhc2tzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElNUE9SVEFOVDogU2NoZWR1bGUgdGhlIG5leHQgcmVmcmVzaCBmb3IgdGhlIGZvbGxvd2luZyBkYXlcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVEYWlseVJlZnJlc2goKTtcblxuICAgICAgICB9LCBtc1VudGlsTWlkbmlnaHQpO1xuICAgIH1cblxuICAgIGhhbmRsZVZpZXdwb3J0UmVzaXplKCkge1xuICAgICAgICAvLyBUaGlzIGxvZ2ljIHNob3VsZCBvbmx5IHJ1biBvbiBtb2JpbGVcbiAgICAgICAgaWYgKCF0aGlzLmFwcC5pc01vYmlsZSkgcmV0dXJuO1xuXG4gICAgICAgIC8vIEEgdGhyZXNob2xkIG9mIDIwMHB4IGlzIGEgc2FmZSBiZXQgdG8gYXNzdW1lIHRoZSBrZXlib2FyZCBpcyBvcGVuLlxuICAgICAgICAvLyBXZSBjb21wYXJlIHRoZSB0b3RhbCB3aW5kb3cgaGVpZ2h0IHdpdGggdGhlIGN1cnJlbnRseSB2aXNpYmxlIGFyZWEncyBoZWlnaHQuXG4gICAgICAgIGNvbnN0IGtleWJvYXJkVmlzaWJsZSA9IHdpbmRvdy5pbm5lckhlaWdodCAtIHdpbmRvdy52aXN1YWxWaWV3cG9ydC5oZWlnaHQgPiAyMDA7XG5cbiAgICAgICAgLy8gVG9nZ2xlIHRoZSBjbGFzcyBvbiB0aGUgbWFpbiBwbHVnaW4gY29udGFpbmVyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LnRvZ2dsZSgna2V5Ym9hcmQtdmlzaWJsZScsIGtleWJvYXJkVmlzaWJsZSk7XG4gICAgfVxuXG4gICAgYXN5bmMgYW5pbWF0ZVRhc2tHcm91cCh0YXNrTGlzdFdyYXBwZXIsIGV4cGFuZCkge1xuICAgICAgICAvLyBDYW5jZWwgYW55IG9uZ29pbmcgYW5pbWF0aW9uIG9uIHRoaXMgZWxlbWVudFxuICAgICAgICBpZiAodGFza0xpc3RXcmFwcGVyLmFuaW1hdGlvbikge1xuICAgICAgICAgICAgdGFza0xpc3RXcmFwcGVyLmFuaW1hdGlvbi5jYW5jZWwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChleHBhbmQpIHtcbiAgICAgICAgICAgIC8vIC0tLSBFWFBBTkRJTkcgLS0tXG4gICAgICAgICAgICAvLyAxLiBNYWtlIHRoZSBlbGVtZW50IHZpc2libGUgc28gd2UgY2FuIG1lYXN1cmUgaXQuXG4gICAgICAgICAgICB0YXNrTGlzdFdyYXBwZXIuc3R5bGUuZGlzcGxheSA9ICdncmlkJztcblxuICAgICAgICAgICAgLy8gMi4gUkVBRDogR2V0IHRoZSBmdWxsLCB1bmNvbnN0cmFpbmVkIGhlaWdodCBvZiB0aGUgY29udGVudC5cbiAgICAgICAgICAgIGNvbnN0IGVuZEhlaWdodCA9IHRhc2tMaXN0V3JhcHBlci5zY3JvbGxIZWlnaHQ7XG5cbiAgICAgICAgICAgIC8vIDMuIEFOSU1BVEU6IEFuaW1hdGUgZnJvbSBhIGhlaWdodCBvZiAwIHRvIHRoZSBmdWxsIGhlaWdodC5cbiAgICAgICAgICAgIHRhc2tMaXN0V3JhcHBlci5hbmltYXRpb24gPSB0YXNrTGlzdFdyYXBwZXIuYW5pbWF0ZShbXG4gICAgICAgICAgICAgICAgeyBoZWlnaHQ6ICcwcHgnLCBvcGFjaXR5OiAwIH0sXG4gICAgICAgICAgICAgICAgeyBoZWlnaHQ6IGAke2VuZEhlaWdodH1weGAsIG9wYWNpdHk6IDEgfVxuICAgICAgICAgICAgXSwge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzNTAsXG4gICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZS1pbi1vdXQnLFxuICAgICAgICAgICAgICAgIGZpbGw6ICdmb3J3YXJkcydcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBBZnRlciB0aGUgYW5pbWF0aW9uLCBzZXQgaGVpZ2h0IHRvICdhdXRvJyB0byBhbGxvdyBjb250ZW50IHRvIHJlc2l6ZSBkeW5hbWljYWxseS5cbiAgICAgICAgICAgIHRhc2tMaXN0V3JhcHBlci5hbmltYXRpb24ub25maW5pc2ggPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGFza0xpc3RXcmFwcGVyLnN0eWxlLmhlaWdodCA9ICdhdXRvJztcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIC0tLSBDT0xMQVBTSU5HIC0tLVxuICAgICAgICAgICAgLy8gMS4gUkVBRDogR2V0IHRoZSBjdXJyZW50IGhlaWdodCBvZiB0aGUgZWxlbWVudCBiZWZvcmUgY29sbGFwc2luZy5cbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0SGVpZ2h0ID0gdGFza0xpc3RXcmFwcGVyLm9mZnNldEhlaWdodDtcblxuICAgICAgICAgICAgLy8gMi4gQU5JTUFURTogQW5pbWF0ZSBmcm9tIHRoZSBjdXJyZW50IGhlaWdodCBkb3duIHRvIDAuXG4gICAgICAgICAgICB0YXNrTGlzdFdyYXBwZXIuYW5pbWF0aW9uID0gdGFza0xpc3RXcmFwcGVyLmFuaW1hdGUoW1xuICAgICAgICAgICAgICAgIHsgaGVpZ2h0OiBgJHtzdGFydEhlaWdodH1weGAsIG9wYWNpdHk6IDEgfSxcbiAgICAgICAgICAgICAgICB7IGhlaWdodDogJzBweCcsIG9wYWNpdHk6IDAgfVxuICAgICAgICAgICAgXSwge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzNTAsXG4gICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZS1pbi1vdXQnLFxuICAgICAgICAgICAgICAgIGZpbGw6ICdmb3J3YXJkcydcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBBZnRlciB0aGUgYW5pbWF0aW9uLCBoaWRlIHRoZSBlbGVtZW50IGNvbXBsZXRlbHkuXG4gICAgICAgICAgICB0YXNrTGlzdFdyYXBwZXIuYW5pbWF0aW9uLm9uZmluaXNoID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRhc2tMaXN0V3JhcHBlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldFZpZXdUeXBlKCkgeyByZXR1cm4gVklFV19UWVBFX1BFUklPRDsgfVxuICAgIGdldERpc3BsYXlUZXh0KCkgeyByZXR1cm4gXCLwn5OFIENhbGVuZGFyIFBlcmlvZCBXZWVrIE5vdGVzXCI7IH1cbiAgICBnZXRJY29uKCkgeyByZXR1cm4gXCJjYWxlbmRhci1jaGVja1wiOyB9XG5cbiAgICBhc3luYyBidWlsZFdlZWtseU5vdGVzQ2FjaGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlV2Vla2x5Tm90ZXMpIHJldHVybjtcbiAgICAgICAgdGhpcy5leGlzdGluZ1dlZWtseU5vdGVzLmNsZWFyKCk7XG4gICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrbHlOb3RlRm9sZGVyO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XG4gICAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZm9sZGVyLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4aXN0aW5nV2Vla2x5Tm90ZXMuYWRkKGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgcmVmcmVzaEljc0V2ZW50cygpIHtcbiAgICAgICAgY29uc3QgeyByZXF1ZXN0VXJsLCBOb3RpY2UgfSA9IHJlcXVpcmUoJ29ic2lkaWFuJyk7XG5cbiAgICAgICAgLy8gVGhpcyBjaGVjayBpcyBub3cgcmVkdW5kYW50IHNpbmNlIElDQUwgaXMgYnVuZGxlZCwgYnV0IGl0J3Mgc2FmZSB0byBrZWVwLlxuICAgICAgICBpZiAoIUlDQUwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJpY2FsLmpzIGxpYnJhcnkgbm90IGJ1bmRsZWQgY29ycmVjdGx5LlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaWNzRXZlbnRzQnlEYXRlLmNsZWFyKCk7XG4gICAgICAgIHRoaXMucHJvY2Vzc2VkRXZlbnRTaWduYXR1cmVzLmNsZWFyKCk7XG5cbiAgICAgICAgY29uc3QgaWNzVXJsID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNzVXJsO1xuICAgICAgICBpZiAoIWljc1VybCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDYWxlbmRhclJlbmRlcmVkKSB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHsgdXJsOiBpY3NVcmwgfSk7XG4gICAgICAgICAgICBjb25zdCBpY2FsRGF0YSA9IHJlc3BvbnNlLnRleHQ7XG4gICAgICAgICAgICBjb25zdCBjYWxlbmRhciA9IG5ldyBJQ0FMLkNvbXBvbmVudChJQ0FMLnBhcnNlKGljYWxEYXRhKSk7XG4gICAgICAgICAgICBjb25zdCBpY2FsRW5kRGF0ZSA9IElDQUwuVGltZS5mcm9tSlNEYXRlKG1vbWVudCgpLmFkZCgyLCAneWVhcnMnKS50b0RhdGUoKSk7XG4gICAgICAgICAgICBjb25zdCBpY2FsU3RhcnREYXRlID0gSUNBTC5UaW1lLmZyb21KU0RhdGUobW9tZW50KCkuc3VidHJhY3QoMSwgJ3llYXInKS50b0RhdGUoKSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGV2ZW50cyA9IGNhbGVuZGFyLmdldEFsbFN1YmNvbXBvbmVudHMoJ3ZldmVudCcpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB2ZXZlbnQgb2YgZXZlbnRzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgSUNBTC5FdmVudCh2ZXZlbnQpO1xuXG4gICAgICAgICAgICAgICAgLy8gQWRkIGEgY2hlY2sgdG8gc2tpcCBhbnkgbnVsbCBvciB1bmRlZmluZWQgZXZlbnQgb2JqZWN0c1xuICAgICAgICAgICAgICAgIC8vIHRoYXQgcmVzdWx0IGZyb20gbWFsZm9ybWVkIGRhdGEgaW4gdGhlIElDUyBmZWVkLlxuICAgICAgICAgICAgICAgIGlmICghZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnJlY3VycmVuY2VJZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFBhcnNlZEV2ZW50KHsgaXRlbTogZXZlbnQgfSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuaXNSZWN1cnJpbmcoKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVyYXRvciA9IGV2ZW50Lml0ZXJhdG9yKCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXh0O1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKG5leHQgPSBpdGVyYXRvci5uZXh0KCkpICYmIG5leHQuY29tcGFyZShpY2FsRW5kRGF0ZSkgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQuY29tcGFyZShpY2FsU3RhcnREYXRlKSA8IDApIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvY2N1cnJlbmNlID0gZXZlbnQuZ2V0T2NjdXJyZW5jZURldGFpbHMobmV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFBhcnNlZEV2ZW50KG9jY3VycmVuY2UsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRQYXJzZWRFdmVudCh7IGl0ZW06IGV2ZW50IH0sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBDYWxlbmRhciBQZXJpb2QgV2VlayBOb3RlcyAtIElDUyBlcnJvcjogJHtlcnJvci5tZXNzYWdlfWAsIDEwMDAwKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJBIGRldGFpbGVkIElDUyBwYXJzaW5nIGVycm9yIG9jY3VycmVkOlwiLCBlcnJvcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pc0NhbGVuZGFyUmVuZGVyZWQpIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiAgQWRkcyBhIHBhcnNlZCBJQ0FMIGV2ZW50IG9jY3VycmVuY2UgdG8gdGhlIGV2ZW50cyBtYXAsIGhhbmRsaW5nIGRlLWR1cGxpY2F0aW9uLlxuICAgICAqICBUaGlzIG1ldGhvZCB1c2VzIGEgaHlicmlkIGFwcHJvYWNoIHRvIGRlLWR1cGxpY2F0aW9uOlxuICAgICAqICAtIEZvciByZWN1cnJpbmcgaW5zdGFuY2VzLCBpdCB1c2VzIGEgY29tYmluYXRpb24gb2YgVUlEIGFuZCByZWN1cnJlbmNlSWQuXG4gICAgICogIC0gRm9yIHNpbmdsZSBldmVudHMsIGl0IHVzZXMgYSBjb250ZW50LWJhc2VkIHNpZ25hdHVyZSAoc3VtbWFyeSwgc3RhcnQsIGVuZCkuICAgXG4gICAgICogXG4gICAgICogQHBhcmFtIHsqfSBvY2N1cnJlbmNlIFxuICAgICAqIEBwYXJhbSB7Kn0gaXNSZWN1cnJpbmdJbnN0YW5jZSBcbiAgICAgKiBAcmV0dXJucyBcbiAgICAgKi9cbiAgICBhZGRQYXJzZWRFdmVudChvY2N1cnJlbmNlLCBpc1JlY3VycmluZ0luc3RhbmNlKSB7XG4gICAgICAgIGNvbnN0IHsgaXRlbSB9ID0gb2NjdXJyZW5jZTtcbiAgICAgICAgaWYgKCFpdGVtKSByZXR1cm47XG5cbiAgICAgICAgaWYgKGlzUmVjdXJyaW5nSW5zdGFuY2UpIHtcbiAgICAgICAgICAgIC8vIEZvciByZWN1cnJpbmcgaW5zdGFuY2VzLCB0aGUgVUlEIGlzIHRoZSBVSUQgb2YgdGhlIHBhcmVudCBldmVudCwgYW5kIHRoZVxuICAgICAgICAgICAgLy8gcmVjdXJyZW5jZUlkIG1ha2VzIGl0IHVuaXF1ZS4gV2UgY3JlYXRlIGEgc2lnbmF0dXJlIGZyb20gYm90aC5cbiAgICAgICAgICAgIGNvbnN0IHJlY3VycmVuY2VTaWduYXR1cmUgPSBgJHtpdGVtLnVpZH06JHtvY2N1cnJlbmNlLnJlY3VycmVuY2VJZC50b1N0cmluZygpfWA7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9jZXNzZWRFdmVudFNpZ25hdHVyZXMuaGFzKHJlY3VycmVuY2VTaWduYXR1cmUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBTa2lwIGR1cGxpY2F0ZSByZWN1cnJpbmcgaW5zdGFuY2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc2VkRXZlbnRTaWduYXR1cmVzLmFkZChyZWN1cnJlbmNlU2lnbmF0dXJlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHNpbmdsZUV2ZW50U2lnbmF0dXJlID0gYCR7aXRlbS5zdW1tYXJ5fToke2l0ZW0uc3RhcnREYXRlLnRvU3RyaW5nKCl9OiR7aXRlbS5lbmREYXRlLnRvU3RyaW5nKCl9YDtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb2Nlc3NlZEV2ZW50U2lnbmF0dXJlcy5oYXMoc2luZ2xlRXZlbnRTaWduYXR1cmUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBTa2lwIGR1cGxpY2F0ZSBzaW5nbGUgZXZlbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc2VkRXZlbnRTaWduYXR1cmVzLmFkZChzaW5nbGVFdmVudFNpZ25hdHVyZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGFydE1vbWVudCA9IG1vbWVudChvY2N1cnJlbmNlLnN0YXJ0RGF0ZSA/IG9jY3VycmVuY2Uuc3RhcnREYXRlLnRvSlNEYXRlKCkgOiBpdGVtLnN0YXJ0RGF0ZS50b0pTRGF0ZSgpKTtcbiAgICAgICAgY29uc3QgZW5kTW9tZW50ID0gbW9tZW50KG9jY3VycmVuY2UuZW5kRGF0ZSA/IG9jY3VycmVuY2UuZW5kRGF0ZS50b0pTRGF0ZSgpIDogaXRlbS5lbmREYXRlLnRvSlNEYXRlKCkpO1xuXG4gICAgICAgIGNvbnN0IGlzQWxsRGF5ID0gaXRlbS5zdGFydERhdGUuaXNEYXRlO1xuICAgICAgICBpZiAoaXNBbGxEYXkpIHtcbiAgICAgICAgICAgIGVuZE1vbWVudC5zdWJ0cmFjdCgxLCAnc2Vjb25kJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBldmVudERhdGEgPSB7XG4gICAgICAgICAgICB1aWQ6IGl0ZW0udWlkLFxuICAgICAgICAgICAgc3VtbWFyeTogaXRlbS5zdW1tYXJ5LFxuICAgICAgICAgICAgaXNBbGxEYXk6IGlzQWxsRGF5LFxuICAgICAgICAgICAgc3RhcnRUaW1lOiBpc0FsbERheSA/IG51bGwgOiBzdGFydE1vbWVudC5mb3JtYXQoJ0hIOm1tJyksXG4gICAgICAgICAgICBlbmRUaW1lOiBpc0FsbERheSA/IG51bGwgOiBlbmRNb21lbnQuZm9ybWF0KCdISDptbScpXG4gICAgICAgIH07XG5cbiAgICAgICAgbGV0IGN1cnJlbnREYXkgPSBzdGFydE1vbWVudC5jbG9uZSgpLnN0YXJ0T2YoJ2RheScpO1xuICAgICAgICB3aGlsZSAoY3VycmVudERheS5pc1NhbWVPckJlZm9yZShlbmRNb21lbnQuc3RhcnRPZignZGF5JykpKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlS2V5ID0gY3VycmVudERheS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLmljc0V2ZW50c0J5RGF0ZS5oYXMoZGF0ZUtleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmljc0V2ZW50c0J5RGF0ZS5zZXQoZGF0ZUtleSwgW10pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBGaW5hbCBzaW1wbGUgY2hlY2sgdG8gcHJldmVudCBhZGRpbmcgdGhlIGV4YWN0IHNhbWUgb2JqZWN0IHR3aWNlIGluIHRoZSBsb29wXG4gICAgICAgICAgICBpZiAoIXRoaXMuaWNzRXZlbnRzQnlEYXRlLmdldChkYXRlS2V5KS5zb21lKGUgPT4gZS51aWQgPT09IGV2ZW50RGF0YS51aWQgJiYgZS5zdW1tYXJ5ID09PSBldmVudERhdGEuc3VtbWFyeSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmljc0V2ZW50c0J5RGF0ZS5nZXQoZGF0ZUtleSkucHVzaChldmVudERhdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjdXJyZW50RGF5LmFkZCgxLCAnZGF5Jyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBvcGVuV2Vla2x5Tm90ZShkYXRlSW5mbykge1xuICAgICAgICAvLyAtLS0gU3RhcnQgb2YgRGVidWdnaW5nIC0tLVxuICAgICAgICBpZiAoIWRhdGVJbmZvIHx8IHR5cGVvZiBkYXRlSW5mby55ZWFyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIldlZWtseSBOb3RlIEVycm9yOiBJbnZhbGlkIGRhdGVJbmZvIG9iamVjdCByZWNlaXZlZC5cIiwgZGF0ZUluZm8pO1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkNvdWxkIG5vdCBjcmVhdGUgd2Vla2x5IG5vdGUgZHVlIHRvIGFuIGludGVybmFsIGVycm9yLiBDaGVjayBjb25zb2xlIGZvciBkZXRhaWxzLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyAtLS0gRW5kIG9mIERlYnVnZ2luZyAtLS1cblxuICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVdlZWtseU5vdGVzKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgeyB3ZWVrbHlOb3RlRm9sZGVyLCB3ZWVrbHlOb3RlVGVtcGxhdGUsIHdlZWtseU5vdGVGb3JtYXQgfSA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuXG4gICAgICAgIC8vIDEuIENhbGN1bGF0ZSBhbGwgcG9zc2libGUgcGxhY2Vob2xkZXIgdmFsdWVzIGZyb20gdGhlIGRhdGEgb2JqZWN0XG4gICAgICAgIGNvbnN0IHB3ZWVrID0gKChkYXRlSW5mby53ZWVrU2luY2VTdGFydCAtIDEpICUgNTIpICsgMTsgLy8gQ2FsY3VsYXRlIHRoZSB3ZWVrICgxLTUyKSBpbiB0aGUgcGVyaW9kIHllYXJcbiAgICAgICAgY29uc3QgcmVwbGFjZW1lbnRzID0ge1xuICAgICAgICAgICAgWVlZWTogZGF0ZUluZm8ueWVhcixcbiAgICAgICAgICAgIE1NOiBTdHJpbmcoZGF0ZUluZm8ubW9udGggKyAxKS5wYWRTdGFydCgyLCAnMCcpLFxuICAgICAgICAgICAgUE46IFwiUFwiICsgZGF0ZUluZm8ucGVyaW9kLFxuICAgICAgICAgICAgUFc6IFwiV1wiICsgZGF0ZUluZm8ud2VlayxcbiAgICAgICAgICAgIFdLUDogU3RyaW5nKHB3ZWVrKS5wYWRTdGFydCgyLCAnMCcpLFxuICAgICAgICAgICAgV0tDOiBTdHJpbmcoZGF0ZUluZm8uY2FsZW5kYXJXZWVrKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gMi4gQnVpbGQgdGhlIGZpbGVuYW1lIGJ5IHJlcGxhY2luZyBwbGFjZWhvbGRlcnMgaW4gdGhlIGZvcm1hdCBzdHJpbmdcbiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSB3ZWVrbHlOb3RlRm9ybWF0LnJlcGxhY2UoL1lZWVl8TU18UE58UFd8V0tQfFdLQy9nLCAobWF0Y2gpID0+IHtcbiAgICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyB0aGF0IGlmIGEgdmFsdWUgaXMgc29tZWhvdyB1bmRlZmluZWQsIGl0IHdvbid0IGJyZWFrIHRoZSBmaWxlbmFtZS5cbiAgICAgICAgICAgIHJldHVybiByZXBsYWNlbWVudHNbbWF0Y2hdICE9PSB1bmRlZmluZWQgPyByZXBsYWNlbWVudHNbbWF0Y2hdIDogbWF0Y2g7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIDMuIFRoZSByZXN0IG9mIHRoZSBmaWxlIGNyZWF0aW9uL29wZW5pbmcgbG9naWMgcmVtYWlucyB0aGUgc2FtZVxuICAgICAgICBjb25zdCBwYXRoID0gYCR7d2Vla2x5Tm90ZUZvbGRlcn0vJHtmaWxlTmFtZX0ubWRgO1xuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xuXG4gICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpO1xuICAgICAgICAgICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBDb25maXJtYXRpb25Nb2RhbCh0aGlzLmFwcCxcbiAgICAgICAgICAgICAgICBcIkNyZWF0ZSB3ZWVrbHkgbm90ZT9cIixcbiAgICAgICAgICAgICAgICBgQSB3ZWVrbHkgbm90ZSBmb3IgXCIke2ZpbGVOYW1lfVwiIGRvZXMgbm90IGV4aXN0LiBXb3VsZCB5b3UgbGlrZSB0byBjcmVhdGUgaXQ/YCxcbiAgICAgICAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaWxlQ29udGVudCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh3ZWVrbHlOb3RlVGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGVtcGxhdGVGaWxlIGluc3RhbmNlb2YgVEZpbGUpIGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZCh0ZW1wbGF0ZUZpbGUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHdlZWtseU5vdGVGb2xkZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIod2Vla2x5Tm90ZUZvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdGaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHBhdGgsIGZpbGVDb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5idWlsZFdlZWtseU5vdGVzQ2FjaGUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKG5ld0ZpbGUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJZZXMsIGNyZWF0ZSBpdFwiXG4gICAgICAgICAgICApLm9wZW4oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHBvc2l0aW9uUG9wdXBGb3JNb2JpbGUodGFyZ2V0RWwpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBvcHVwRWwpIHJldHVybjtcblxuICAgICAgICBjb25zdCBtYXJnaW4gPSA4OyAvLyBBIHNtYWxsLCBjb25zaXN0ZW50IG1hcmdpbiBmb3IgbW9iaWxlIHNjcmVlbnNcblxuICAgICAgICAvLyBjaGVjayBmb3IgbGFuZHNjYXBlIG9yaWVudGF0aW9uXG4gICAgICAgIGNvbnN0IGlzTGFuZHNjYXBlID0gd2luZG93LmlubmVyV2lkdGggPiB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgIGNvbnN0IG1heEhlaWdodCA9IGlzTGFuZHNjYXBlID8gJzYwdmgnIDogJzQ1dmgnOyAvLyBBbGxvdyBtb3JlIGhlaWdodCBpbiBsYW5kc2NhcGVcblxuICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUuYm90dG9tID0gYCR7bWFyZ2lufXB4YDtcbiAgICAgICAgdGhpcy5wb3B1cEVsLnN0eWxlLmxlZnQgPSBgJHttYXJnaW59cHhgO1xuICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUucmlnaHQgPSBgJHttYXJnaW59cHhgO1xuICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUudG9wID0gJyc7IC8vIFVuc2V0IGFueSB0b3AgcHJvcGVydHlcbiAgICAgICAgdGhpcy5wb3B1cEVsLnN0eWxlLm1heEhlaWdodCA9IG1heEhlaWdodDtcbiAgICAgICAgdGhpcy5wb3B1cEVsLnN0eWxlLndpZHRoID0gYGNhbGMoMTAwJSAtICR7bWFyZ2luICogMn1weClgO1xuICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUuYm94U2l6aW5nID0gJ2JvcmRlci1ib3gnO1xuICAgIH1cblxuICAgIGdlbmVyYXRlTW9udGhHcmlkKGRhdGVGb3JNb250aCwgdGFyZ2V0Qm9keUVsKSB7XG4gICAgICAgIGNvbnN0IHsgc2V0dGluZ3MgfSA9IHRoaXMucGx1Z2luO1xuICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IHllYXIgPSBkYXRlRm9yTW9udGguZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgY29uc3QgbW9udGggPSBkYXRlRm9yTW9udGguZ2V0TW9udGgoKTtcbiAgICAgICAgY29uc3QgZmlyc3REYXlPZk1vbnRoID0gbmV3IERhdGUoeWVhciwgbW9udGgsIDEpO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBzZXR0aW5ncy5kYWlseU5vdGVzRm9sZGVyIHx8IFwiXCI7XG4gICAgICAgIGNvbnN0IGZvcm1hdCA9IHNldHRpbmdzLmRhaWx5Tm90ZURhdGVGb3JtYXQgfHwgXCJZWVlZLU1NLUREXCI7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nTm90ZXMgPSBuZXcgU2V0KHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZmlsZSA9PiAhZm9sZGVyIHx8IGZpbGUucGF0aC5zdGFydHNXaXRoKGZvbGRlciArIFwiL1wiKSkubWFwKGZpbGUgPT4gZmlsZS5iYXNlbmFtZSkpO1xuXG4gICAgICAgIC8vIFRoaXMgbmV3IGxvZ2ljIGNvcnJlY3RseSBjYWxjdWxhdGVzIHRoZSBmaXJzdCBkYXkgdG8gc2hvdyBvbiB0aGUgY2FsZW5kYXJcbiAgICAgICAgY29uc3Qgc3RhcnREYXlOdW1iZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrU3RhcnREYXkgPT09ICdtb25kYXknID8gMSA6IDA7IC8vIE1vbj0xLCBTdW49MFxuICAgICAgICBtb21lbnQudXBkYXRlTG9jYWxlKCdlbicsIHsgd2VlazogeyBkb3c6IHN0YXJ0RGF5TnVtYmVyIH0gfSk7XG5cbiAgICAgICAgbGV0IGRheU9mV2VlayA9IGZpcnN0RGF5T2ZNb250aC5nZXREYXkoKTsgLy8gSlMgc3RhbmRhcmQ6IFN1bj0wLCBNb249MS4uLlxuXG4gICAgICAgIGxldCBkaWZmID0gZGF5T2ZXZWVrIC0gc3RhcnREYXlOdW1iZXI7XG4gICAgICAgIGlmIChkaWZmIDwgMCkge1xuICAgICAgICAgICAgZGlmZiArPSA3OyAvLyBFbnN1cmUgd2UgZ28gYmFjayB0byB0aGUgcHJldmlvdXMgd2Vla1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGN1cnJlbnREYXkgPSBuZXcgRGF0ZShmaXJzdERheU9mTW9udGgpO1xuICAgICAgICBjdXJyZW50RGF5LnNldERhdGUoZmlyc3REYXlPZk1vbnRoLmdldERhdGUoKSAtIGRpZmYpO1xuXG4gICAgICAgIGNvbnN0IHJlcXVpcmVkUm93cyA9IDY7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVxdWlyZWRSb3dzOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHRhcmdldEJvZHlFbC5jcmVhdGVFbChcInRyXCIpO1xuXG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MuaGlnaGxpZ2h0Q3VycmVudFdlZWspIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b2RheU1vbWVudCA9IG1vbWVudCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0T2ZXZWVrTW9tZW50ID0gbW9tZW50KGN1cnJlbnREYXkpO1xuICAgICAgICAgICAgICAgIGlmICh0b2RheU1vbWVudC53ZWVrWWVhcigpID09PSBzdGFydE9mV2Vla01vbWVudC53ZWVrWWVhcigpICYmIHRvZGF5TW9tZW50LndlZWsoKSA9PT0gc3RhcnRPZldlZWtNb21lbnQud2VlaygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5hZGRDbGFzcygnY3VycmVudC13ZWVrLXJvdycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgd2Vla01vbWVudCA9IG1vbWVudChuZXcgRGF0ZShjdXJyZW50RGF5KSk7XG4gICAgICAgICAgICBjb25zdCBpc29XZWVrID0gd2Vla01vbWVudC5pc29XZWVrKCk7XG4gICAgICAgICAgICBjb25zdCBpc29ZZWFyID0gd2Vla01vbWVudC5pc29XZWVrWWVhcigpO1xuICAgICAgICAgICAgY29uc3QgaXNvTW9udGggPSB3ZWVrTW9tZW50Lm1vbnRoKCk7XG4gICAgICAgICAgICBjb25zdCBwZXJpb2RXZWVrRGF0YSA9IGdldFBlcmlvZFdlZWsobmV3IERhdGUoY3VycmVudERheSksIHNldHRpbmdzLnN0YXJ0T2ZQZXJpb2QxRGF0ZSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGRhdGVJbmZvRm9yV2VlayA9IHtcbiAgICAgICAgICAgICAgICB5ZWFyOiBpc29ZZWFyLFxuICAgICAgICAgICAgICAgIG1vbnRoOiBpc29Nb250aCxcbiAgICAgICAgICAgICAgICBwZXJpb2Q6IHBlcmlvZFdlZWtEYXRhLnBlcmlvZCxcbiAgICAgICAgICAgICAgICB3ZWVrOiBwZXJpb2RXZWVrRGF0YS53ZWVrLFxuICAgICAgICAgICAgICAgIGNhbGVuZGFyV2VlazogaXNvV2VlayxcbiAgICAgICAgICAgICAgICB3ZWVrU2luY2VTdGFydDogcGVyaW9kV2Vla0RhdGEud2Vla1NpbmNlU3RhcnRcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IGNsaWNrSGFuZGxlciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5XZWVrbHlOb3RlKGRhdGVJbmZvRm9yV2Vlayk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsZXQgd2Vla2x5Tm90ZUV4aXN0cyA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHNldHRpbmdzLmVuYWJsZVdlZWtseU5vdGVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHdlZWsgPSAoKGRhdGVJbmZvRm9yV2Vlay53ZWVrU2luY2VTdGFydCAtIDEpICUgNTIpICsgMTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXBsYWNlbWVudHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIFlZWVk6IGRhdGVJbmZvRm9yV2Vlay55ZWFyLFxuICAgICAgICAgICAgICAgICAgICBNTTogU3RyaW5nKGRhdGVJbmZvRm9yV2Vlay5tb250aCArIDEpLnBhZFN0YXJ0KDIsICcwJyksXG4gICAgICAgICAgICAgICAgICAgIFBOOiBcIlBcIiArIGRhdGVJbmZvRm9yV2Vlay5wZXJpb2QsXG4gICAgICAgICAgICAgICAgICAgIFBXOiBcIldcIiArIGRhdGVJbmZvRm9yV2Vlay53ZWVrLFxuICAgICAgICAgICAgICAgICAgICBXS1A6IFN0cmluZyhwd2VlaykucGFkU3RhcnQoMiwgJzAnKSxcbiAgICAgICAgICAgICAgICAgICAgV0tDOiBTdHJpbmcoZGF0ZUluZm9Gb3JXZWVrLmNhbGVuZGFyV2VlaykucGFkU3RhcnQoMiwgJzAnKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRGaWxlTmFtZSA9IHNldHRpbmdzLndlZWtseU5vdGVGb3JtYXQucmVwbGFjZSgvWVlZWXxXS1B8V0tDfE1NfFBOfFBXL2csIG1hdGNoID0+IHJlcGxhY2VtZW50c1ttYXRjaF0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkUGF0aCA9IGAke3NldHRpbmdzLndlZWtseU5vdGVGb2xkZXJ9LyR7ZXhwZWN0ZWRGaWxlTmFtZX0ubWRgO1xuICAgICAgICAgICAgICAgIHdlZWtseU5vdGVFeGlzdHMgPSB0aGlzLmV4aXN0aW5nV2Vla2x5Tm90ZXMuaGFzKGV4cGVjdGVkUGF0aCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zaG93UFdDb2x1bW4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwd0NlbGwgPSByb3cuY3JlYXRlRWwoXCJ0ZFwiLCB7IGNsczogXCJwdy1sYWJlbC1jZWxsXCIgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcHdDb250ZW50ID0gcHdDZWxsLmNyZWF0ZURpdih7IGNsczogXCJkYXktY29udGVudFwiIH0pO1xuICAgICAgICAgICAgICAgIHB3Q29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwiZGF5LW51bWJlclwiIH0pLnNldFRleHQodGhpcy5mb3JtYXRQVyhwZXJpb2RXZWVrRGF0YS5wZXJpb2QsIHBlcmlvZFdlZWtEYXRhLndlZWspKTtcblxuICAgICAgICAgICAgICAgIHB3Q2VsbC5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRUb2RheVBXTGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZCA9IDA7IGQgPCA3OyBkKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrRGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnREYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tEYXRlLnNldERhdGUoY3VycmVudERheS5nZXREYXRlKCkgKyBkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1NhbWVEYXkoY2hlY2tEYXRlLCB0b2RheSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwd0NlbGwuYWRkQ2xhc3MoXCJ0b2RheS1wdy1sYWJlbFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh3ZWVrbHlOb3RlRXhpc3RzICYmIHNldHRpbmdzLnNob3dXZWVrbHlOb3RlRG90ICYmICFzZXR0aW5ncy5zaG93V2Vla051bWJlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZG90c0NvbnRhaW5lciA9IHB3Q29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdkb3RzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGF5b3V0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FsZW5kYXJMYXlvdXQgfHwgJ25vcm1hbCc7XG4gICAgICAgICAgICAgICAgICAgIGRvdHNDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnbGF5b3V0LWNvbmRlbnNlZCcsICdsYXlvdXQtbm9ybWFsJywgJ2xheW91dC1zcGFjaW91cycpO1xuICAgICAgICAgICAgICAgICAgICBkb3RzQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoYGxheW91dC0ke2xheW91dH1gKTtcbiAgICAgICAgICAgICAgICAgICAgZG90c0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjYWxlbmRhci1kb3Qgd2Vla2x5LW5vdGUtZG90JyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHdDZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tIYW5kbGVyKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZVJvd0hvdmVyRW50ZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVSb3dIaWdobGlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdyb3ctaG92ZXInKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlUm93SG92ZXJMZWF2ZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcm93LmNsYXNzTGlzdC5yZW1vdmUoJ3Jvdy1ob3ZlcicpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBwd0NlbGwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIGhhbmRsZVJvd0hvdmVyRW50ZXIpO1xuICAgICAgICAgICAgICAgIHB3Q2VsbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgaGFuZGxlUm93SG92ZXJMZWF2ZSk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNob3dXZWVrTnVtYmVycykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdlZWtOdW0gPSBzZXR0aW5ncy53ZWVrTnVtYmVyVHlwZSA9PT0gJ3BlcmlvZCcgPyBwZXJpb2RXZWVrRGF0YS53ZWVrU2luY2VTdGFydCA6IGlzb1dlZWs7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2Vla0NlbGwgPSByb3cuY3JlYXRlRWwoXCJ0ZFwiLCB7IGNsczogXCJ3ZWVrLW51bWJlci1jZWxsXCIgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2Vla0NvbnRlbnQgPSB3ZWVrQ2VsbC5jcmVhdGVEaXYoeyBjbHM6IFwiZGF5LWNvbnRlbnRcIiB9KTtcbiAgICAgICAgICAgICAgICB3ZWVrQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwiZGF5LW51bWJlclwiIH0pLnNldFRleHQod2Vla051bS50b1N0cmluZygpKTtcblxuICAgICAgICAgICAgICAgIHdlZWtDZWxsLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodFRvZGF5UFdMYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBkID0gMDsgZCA8IDc7IGQrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hlY2tEYXRlID0gbmV3IERhdGUoY3VycmVudERheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0RhdGUuc2V0RGF0ZShjdXJyZW50RGF5LmdldERhdGUoKSArIGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzU2FtZURheShjaGVja0RhdGUsIHRvZGF5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlZWtDZWxsLmFkZENsYXNzKFwidG9kYXktcHctbGFiZWxcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAod2Vla2x5Tm90ZUV4aXN0cyAmJiBzZXR0aW5ncy5zaG93V2Vla2x5Tm90ZURvdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkb3RzQ29udGFpbmVyID0gd2Vla0NvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnZG90cy1jb250YWluZXInIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxheW91dCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNhbGVuZGFyTGF5b3V0IHx8ICdub3JtYWwnO1xuICAgICAgICAgICAgICAgICAgICBkb3RzQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2xheW91dC1jb25kZW5zZWQnLCAnbGF5b3V0LW5vcm1hbCcsICdsYXlvdXQtc3BhY2lvdXMnKTtcbiAgICAgICAgICAgICAgICAgICAgZG90c0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGBsYXlvdXQtJHtsYXlvdXR9YCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZG90c0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjYWxlbmRhci1kb3Qgd2Vla2x5LW5vdGUtZG90JyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgd2Vla0NlbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja0hhbmRsZXIpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlUm93SG92ZXJFbnRlciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVJvd0hpZ2hsaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoJ3Jvdy1ob3ZlcicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVSb3dIb3ZlckxlYXZlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByb3cuY2xhc3NMaXN0LnJlbW92ZSgncm93LWhvdmVyJyk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHdlZWtDZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBoYW5kbGVSb3dIb3ZlckVudGVyKTtcbiAgICAgICAgICAgICAgICB3ZWVrQ2VsbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgaGFuZGxlUm93SG92ZXJMZWF2ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAobGV0IGQgPSAwOyBkIDwgNzsgZCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF5RGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnREYXkpO1xuICAgICAgICAgICAgICAgIGRheURhdGUuc2V0RGF0ZShjdXJyZW50RGF5LmdldERhdGUoKSArIGQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzT3RoZXJNb250aCA9IGRheURhdGUuZ2V0TW9udGgoKSAhPT0gbW9udGg7XG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbCA9IHJvdy5jcmVhdGVFbChcInRkXCIpO1xuXG4gICAgICAgICAgICAgICAgLy8gQWRkIHNlcGFyYXRvciBjbGFzcyB0byBmaXJzdCBkYXRlIGNvbHVtblxuICAgICAgICAgICAgICAgIGlmIChkID09PSAwICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dQV0NvbHVtblNlcGFyYXRvciAmJlxuICAgICAgICAgICAgICAgICAgICAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1BXQ29sdW1uIHx8IHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dXZWVrTnVtYmVycykpIHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5hZGRDbGFzcygnZmlyc3QtZGF0ZS1jb2x1bW4nKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50RGl2ID0gY2VsbC5jcmVhdGVEaXYoXCJkYXktY29udGVudFwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXlOdW1iZXIgPSBjb250ZW50RGl2LmNyZWF0ZURpdihcImRheS1udW1iZXJcIik7XG4gICAgICAgICAgICAgICAgZGF5TnVtYmVyLnRleHRDb250ZW50ID0gZGF5RGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlS2V5ID0gbW9tZW50KGRheURhdGUpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgaWNzRXZlbnRzRm9yRGF5ID0gdGhpcy5pY3NFdmVudHNCeURhdGUuZ2V0KGRhdGVLZXkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tzRm9yRGF5ID0gdGhpcy50YXNrc0J5RGF0ZS5nZXQoZGF0ZUtleSk7XG4gICAgICAgICAgICAgICAgY29uc3QgY3JlYXRlZEZpbGVzID0gdGhpcy5jcmVhdGVkTm90ZXNNYXAuZ2V0KGRhdGVLZXkpIHx8IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vZGlmaWVkRmlsZXMgPSB0aGlzLm1vZGlmaWVkTm90ZXNNYXAuZ2V0KGRhdGVLZXkpIHx8IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFzc2V0c0NyZWF0ZWQgPSB0aGlzLmFzc2V0Q3JlYXRpb25NYXAuZ2V0KGRhdGVLZXkpIHx8IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhaWx5Tm90ZUZpbGVOYW1lID0gZm9ybWF0RGF0ZShkYXlEYXRlLCBmb3JtYXQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhaWx5Tm90ZUV4aXN0cyA9IGV4aXN0aW5nTm90ZXMuaGFzKGRhaWx5Tm90ZUZpbGVOYW1lKTtcblxuICAgICAgICAgICAgICAgIGxldCB0b3RhbFRhc2tDb3VudCA9IHRhc2tzRm9yRGF5ID8gdGFza3NGb3JEYXkubGVuZ3RoIDogMDtcbiAgICAgICAgICAgICAgICBjb25zdCBjYWxlbmRhckV2ZW50Q291bnQgPSBpY3NFdmVudHNGb3JEYXkgPyBpY3NFdmVudHNGb3JEYXkubGVuZ3RoIDogMDtcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudEluZGljYXRvclN0eWxlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FsZW5kYXJFdmVudEluZGljYXRvclN0eWxlO1xuXG4gICAgICAgICAgICAgICAgLy8gQ29uZGl0aW9uYWxseSBhZGQgY2FsZW5kYXIgZXZlbnQgY291bnQgdG8gdGhlIHRvdGFsIGNvdW50IGZvciBoZWF0bWFwL2JhZGdlXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50SW5kaWNhdG9yU3R5bGUgPT09ICdoZWF0bWFwJyB8fCBldmVudEluZGljYXRvclN0eWxlID09PSAnYmFkZ2UnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsVGFza0NvdW50ICs9IGNhbGVuZGFyRXZlbnRDb3VudDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBpc1RvZGF5ID0gaXNTYW1lRGF5KGRheURhdGUsIHRvZGF5KVxuICAgICAgICAgICAgICAgIGlmICh0b3RhbFRhc2tDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnRhc2tJbmRpY2F0b3JTdHlsZSA9PT0gJ2JhZGdlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudERpdi5jcmVhdGVEaXYoeyBjbHM6ICd0YXNrLWNvdW50LWJhZGdlJywgdGV4dDogdG90YWxUYXNrQ291bnQudG9TdHJpbmcoKSB9KTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNldHRpbmdzLnRhc2tJbmRpY2F0b3JTdHlsZSA9PT0gJ2hlYXRtYXAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaG91bGRBcHBseUhlYXRtYXAgPSAhKGlzVG9kYXkgJiYgc2V0dGluZ3MudG9kYXlIaWdobGlnaHRTdHlsZSA9PT0gJ2NlbGwnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFwcGx5SGVhdG1hcCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRDb2xvciA9IHBhcnNlUmdiYVN0cmluZyhzZXR0aW5ncy50YXNrSGVhdG1hcFN0YXJ0Q29sb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pZENvbG9yID0gcGFyc2VSZ2JhU3RyaW5nKHNldHRpbmdzLnRhc2tIZWF0bWFwTWlkQ29sb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZENvbG9yID0gcGFyc2VSZ2JhU3RyaW5nKHNldHRpbmdzLnRhc2tIZWF0bWFwRW5kQ29sb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pZFBvaW50ID0gc2V0dGluZ3MudGFza0hlYXRtYXBNaWRwb2ludDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXhQb2ludCA9IHNldHRpbmdzLnRhc2tIZWF0bWFwTWF4cG9pbnQ7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGFydENvbG9yICYmIG1pZENvbG9yICYmIGVuZENvbG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbENvbG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodG90YWxUYXNrQ291bnQgPj0gbWF4UG9pbnQpIHsgZmluYWxDb2xvciA9IHNldHRpbmdzLnRhc2tIZWF0bWFwRW5kQ29sb3I7IH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodG90YWxUYXNrQ291bnQgPj0gbWlkUG9pbnQpIHsgY29uc3QgZmFjdG9yID0gKHRvdGFsVGFza0NvdW50IC0gbWlkUG9pbnQpIC8gKG1heFBvaW50IC0gbWlkUG9pbnQpOyBmaW5hbENvbG9yID0gYmxlbmRSZ2JhQ29sb3JzKG1pZENvbG9yLCBlbmRDb2xvciwgZmFjdG9yKTsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsgY29uc3QgZGl2aXNvciA9IG1pZFBvaW50IC0gMTsgY29uc3QgZmFjdG9yID0gZGl2aXNvciA+IDAgPyAodG90YWxUYXNrQ291bnQgLSAxKSAvIGRpdmlzb3IgOiAxOyBmaW5hbENvbG9yID0gYmxlbmRSZ2JhQ29sb3JzKHN0YXJ0Q29sb3IsIG1pZENvbG9yLCBmYWN0b3IpOyB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudERpdi5jbGFzc0xpc3QuYWRkKCdoZWF0bWFwLWNlbGwnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudERpdi5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1oZWF0bWFwLWNvbG9yJywgZmluYWxDb2xvcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjcmVhdGVzIGEgYm9yZGVyIHVzaW5nIHRoZSB0aGVtZSdzIGJhY2tncm91bmQgY29sb3IsIG1ha2luZyBhIGNsZWFuIGdhcC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNJbkhpZ2hsaWdodGVkUm93ID0gc2V0dGluZ3MuaGlnaGxpZ2h0Q3VycmVudFdlZWsgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5jbGFzc0xpc3QuY29udGFpbnMoJ2N1cnJlbnQtd2Vlay1yb3cnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIHJvdyBoaWdobGlnaHQgY29sb3IgYXMgYm9yZGVyIGlmIGluIGhpZ2hsaWdodGVkIHJvd1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNJbkhpZ2hsaWdodGVkUm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBib3JkZXJDb2xvciA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd0aGVtZS1kYXJrJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNldHRpbmdzLnJvd0hpZ2hsaWdodENvbG9yRGFya1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc2V0dGluZ3Mucm93SGlnaGxpZ2h0Q29sb3JMaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnREaXYuc3R5bGUuYm9yZGVyID0gYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGVudEJvcmRlcldpZHRofSBzb2xpZCAke2JvcmRlckNvbG9yfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50RGl2LnN0eWxlLmJvcmRlciA9IGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmNvbnRlbnRCb3JkZXJXaWR0aH0gc29saWQgdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpYDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBIHNsaWdodGx5IHNtYWxsZXIgcmFkaXVzIG1ha2VzIGl0IGxvb2sgbmVhdGx5IGluc2V0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50RGl2LnN0eWxlLmJvcmRlclJhZGl1cyA9ICc4cHgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50RGl2LnN0eWxlLmJveFNpemluZyA9ICdib3JkZXItYm94JztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgaWYgKGlzT3RoZXJNb250aCkgZGF5TnVtYmVyLmFkZENsYXNzKFwiZGF5LW51bWJlci1vdGhlci1tb250aFwiKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNTYW1lRGF5KGRheURhdGUsIHRvZGF5KSkgY2VsbC5hZGRDbGFzcyhcInRvZGF5LWNlbGxcIik7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBkb3RzQ29udGFpbmVyID0gY29udGVudERpdi5jcmVhdGVEaXYoeyBjbHM6ICdkb3RzLWNvbnRhaW5lcicgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGF5b3V0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FsZW5kYXJMYXlvdXQgfHwgJ25vcm1hbCc7XG5cbiAgICAgICAgICAgICAgICAvLyBFbnN1cmUgbm8gb2xkIGxheW91dCBjbGFzc2VzIGFyZSBsaW5nZXJpbmdcbiAgICAgICAgICAgICAgICBkb3RzQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2xheW91dC1jb25kZW5zZWQnLCAnbGF5b3V0LW5vcm1hbCcsICdsYXlvdXQtc3BhY2lvdXMnKTtcblxuICAgICAgICAgICAgICAgIC8vIEFwcGx5IHRoZSBjb3JyZWN0IGNsYXNzIGJhc2VkIG9uIHRoZSBjdXJyZW50IHNldHRpbmdcbiAgICAgICAgICAgICAgICBkb3RzQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoYGxheW91dC0ke2xheW91dH1gKTtcblxuXG4gICAgICAgICAgICAgICAgaWYgKGRhaWx5Tm90ZUV4aXN0cykgeyBkb3RzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJwZXJpb2QtbW9udGgtZGFpbHktbm90ZS1kb3QgY2FsZW5kYXItZG90XCIgfSk7IH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2hvd090aGVyTm90ZURvdCAmJiBjcmVhdGVkRmlsZXMubGVuZ3RoID4gMCkgeyBkb3RzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ290aGVyLW5vdGUtZG90IGNhbGVuZGFyLWRvdCcgfSk7IH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2hvd01vZGlmaWVkRmlsZURvdCAmJiBtb2RpZmllZEZpbGVzLmxlbmd0aCA+IDApIHsgZG90c0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdtb2RpZmllZC1maWxlLWRvdCBjYWxlbmRhci1kb3QnIH0pOyB9XG5cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2hvd0Fzc2V0RG90ICYmIGFzc2V0c0NyZWF0ZWQubGVuZ3RoID4gMCkgeyBkb3RzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2Fzc2V0LWRvdCBjYWxlbmRhci1kb3QnIH0pOyB9XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNob3dUYXNrRG90ICYmIHRvdGFsVGFza0NvdW50ID4gMCkgeyBkb3RzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3Rhc2stZG90IGNhbGVuZGFyLWRvdCcgfSk7IH1cblxuXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50SW5kaWNhdG9yU3R5bGUgPT09ICdkb3QnICYmIGNhbGVuZGFyRXZlbnRDb3VudCA+IDAgfHwgc2V0dGluZ3Muc2hvd0ljc0RvdCAmJiBjYWxlbmRhckV2ZW50Q291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvdHNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2FsZW5kYXItZG90IGljcy1ldmVudC1kb3QnIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGhhc1BvcHVwQ29udGVudCA9IGRhaWx5Tm90ZUV4aXN0cyB8fCAodG90YWxUYXNrQ291bnQgPiAwKSB8fCAoY3JlYXRlZEZpbGVzLmxlbmd0aCA+IDApIHx8IChtb2RpZmllZEZpbGVzLmxlbmd0aCA+IDApIHx8IChhc3NldHNDcmVhdGVkLmxlbmd0aCA+IDApIHx8IChjYWxlbmRhckV2ZW50Q291bnQgPiAwKTtcblxuICAgICAgICAgICAgICAgIGxldCBkYXRhVG9TaG93ID0ge307XG4gICAgICAgICAgICAgICAgaWYgKGhhc1BvcHVwQ29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYWlseU5vdGVGaWxlID0gZGFpbHlOb3RlRXhpc3RzID8gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlciA/IGAke2ZvbGRlcn0vJHtkYWlseU5vdGVGaWxlTmFtZX0ubWRgIDogYCR7ZGFpbHlOb3RlRmlsZU5hbWV9Lm1kYCkgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBkYXRhVG9TaG93ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFza3M6IHRhc2tzRm9yRGF5LFxuICAgICAgICAgICAgICAgICAgICAgICAgZGFpbHk6IGRhaWx5Tm90ZUZpbGUgPyBbZGFpbHlOb3RlRmlsZV0gOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQ6IHNldHRpbmdzLnNob3dPdGhlck5vdGVEb3QgPyBjcmVhdGVkRmlsZXMgOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGlmaWVkOiBzZXR0aW5ncy5zaG93TW9kaWZpZWRGaWxlRG90ID8gbW9kaWZpZWRGaWxlcyA6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzOiBzZXR0aW5ncy5zaG93QXNzZXREb3QgPyBhc3NldHNDcmVhdGVkIDogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICBpY3M6IGljc0V2ZW50c0ZvckRheSB8fCBbXSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZXQgbG9uZ1ByZXNzT2NjdXJyZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBsZXQgdG91Y2hUaW1lciA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICBpZiAoUGxhdGZvcm0uaXNNb2JpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIE1PQklMRTogTG9uZy1wcmVzcyBmb3IgcG9wdXAsIHRhcCBmb3IgZGFpbHkgbm90ZSAtLS1cbiAgICAgICAgICAgICAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdQcmVzc09jY3VycmVkID0gZmFsc2U7IC8vIFJlc2V0IG9uIG5ldyB0b3VjaFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1BvcHVwQ29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdWNoVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9uZ1ByZXNzT2NjdXJyZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dGaWxlUG9wdXAoY2VsbCwgZGF0YVRvU2hvdywgZGF5RGF0ZSwgdHJ1ZSk7IC8vIFBhc3MgJ3RydWUnIGZvciBtb2JpbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50cyBjb250ZXh0IG1lbnUgYW5kIHRleHQgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTsgLy8gNTAwbXMgZm9yIGEgbG9uZy1wcmVzc1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWxMb25nUHJlc3MgPSAoKSA9PiBjbGVhclRpbWVvdXQodG91Y2hUaW1lcik7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBjYW5jZWxMb25nUHJlc3MpO1xuICAgICAgICAgICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGNhbmNlbExvbmdQcmVzcyk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyAtLS0gREVTS1RPUDogSG92ZXIgZm9yIHBvcHVwIC0tLVxuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzUG9wdXBDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNQb3B1cExvY2tlZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmhpZGVUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVGaWxlUG9wdXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhvdmVyVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dGaWxlUG9wdXAoY2VsbCwgZGF0YVRvU2hvdywgZGF5RGF0ZSwgZmFsc2UpOyAvLyBQYXNzICdmYWxzZScgZm9yIGRlc2t0b3BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vdGhlck5vdGVIb3ZlckRlbGF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaG92ZXJUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLmhpZGVGaWxlUG9wdXAoKSwgdGhpcy5wbHVnaW4uc2V0dGluZ3MucG9wdXBIaWRlRGVsYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyAtLS0gVU5JRklFRCBDTElDSyBIQU5ETEVSIC0tLVxuICAgICAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvbmdQcmVzc09jY3VycmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBIGxvbmctcHJlc3MganVzdCBoYXBwZW5lZCBhbmQgc2hvd2VkIGEgcG9wdXAsIHNvIGlnbm9yZSB0aGlzIHN1YnNlcXVlbnQgJ2NsaWNrJyBldmVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVGaWxlUG9wdXAoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuRGFpbHlOb3RlKGRheURhdGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVSb3dUb0RhdGVIaWdobGlnaHQpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGlnaGxpZ2h0Q29sb3IgPSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygndGhlbWUtZGFyaycpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMucGx1Z2luLnNldHRpbmdzLnJvd0hpZ2hsaWdodENvbG9yRGFya1xuICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yb3dIaWdobGlnaHRDb2xvckxpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByb3cgPSBjZWxsLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbFJvd3MgPSBBcnJheS5mcm9tKHJvdy5wYXJlbnRFbGVtZW50LmNoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm93SW5kZXggPSBhbGxSb3dzLmluZGV4T2Yocm93KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sSW5kZXggPSBBcnJheS5mcm9tKHJvdy5jaGlsZHJlbikuaW5kZXhPZihjZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFibGUgPSBjZWxsLmNsb3Nlc3QoJ3RhYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDw9IGNvbEluZGV4OyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxUb0hpZ2hsaWdodCA9IHJvdy5jaGlsZHJlbltqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsVG9IaWdobGlnaHQpIGNlbGxUb0hpZ2hsaWdodC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBoaWdobGlnaHRDb2xvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd0luZGV4OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByaW9yUm93ID0gYWxsUm93c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxUb0hpZ2hsaWdodCA9IHByaW9yUm93LmNoaWxkcmVuW2NvbEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsVG9IaWdobGlnaHQpIGNlbGxUb0hpZ2hsaWdodC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBoaWdobGlnaHRDb2xvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlclJvdyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3RoZWFkIHRyJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVyUm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyQ2VsbCA9IGhlYWRlclJvdy5jaGlsZHJlbltjb2xJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlckNlbGwpIGhlYWRlckNlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gaGlnaGxpZ2h0Q29sb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlUm93VG9EYXRlSGlnaGxpZ2h0KSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gY2VsbC5jbG9zZXN0KCd0YWJsZScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbENlbGxzID0gdGFibGUucXVlcnlTZWxlY3RvckFsbCgndGJvZHkgdGQsIHRoZWFkIHRoJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxDZWxscy5mb3JFYWNoKGMgPT4gYy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnREYXkuc2V0RGF0ZShjdXJyZW50RGF5LmdldERhdGUoKSArIDcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZHMgYWxsIG1hcmtkb3duIGZpbGVzIHRoYXQgbGluayB0byBvciBlbWJlZCB0aGUgZ2l2ZW4gYXNzZXQgZmlsZS5cbiAgICAgKiBAcGFyYW0ge1RGaWxlfSBhc3NldEZpbGUgLSBUaGUgYXNzZXQgZmlsZSB0byBmaW5kIGJhY2tsaW5rcyBmb3IuXG4gICAgICogQHJldHVybnMge1Byb21pc2U8VEZpbGVbXT59IEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIGFycmF5IG9mIG1hcmtkb3duIGZpbGVzIGxpbmtpbmcgdG8gdGhlIGFzc2V0LlxuICAgICAqL1xuICAgIGFzeW5jIGZpbmRBc3NldEJhY2tsaW5rcyhhc3NldEZpbGUpIHtcbiAgICAgICAgY29uc3QgYmFja2xpbmtzID0gW107XG4gICAgICAgIGNvbnN0IG1hcmtkb3duRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cbiAgICAgICAgZm9yIChjb25zdCBtZEZpbGUgb2YgbWFya2Rvd25GaWxlcykge1xuICAgICAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShtZEZpbGUpO1xuICAgICAgICAgICAgaWYgKCFjYWNoZSkgY29udGludWU7XG5cbiAgICAgICAgICAgIGNvbnN0IGxpbmtzQW5kRW1iZWRzID0gWy4uLihjYWNoZS5lbWJlZHMgfHwgW10pLCAuLi4oY2FjaGUubGlua3MgfHwgW10pXTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCByZWYgb2YgbGlua3NBbmRFbWJlZHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rZWRGaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChyZWYubGluaywgbWRGaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgIGlmIChsaW5rZWRGaWxlICYmIGxpbmtlZEZpbGUucGF0aCA9PT0gYXNzZXRGaWxlLnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2xpbmtzLnB1c2gobWRGaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7IC8vIE1vdmUgdG8gdGhlIG5leHQgZmlsZSBvbmNlIGEgbGluayBpcyBmb3VuZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmFja2xpbmtzO1xuICAgIH1cblxuICAgIGlzV2Vla2x5Tm90ZShmaWxlKSB7XG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlV2Vla2x5Tm90ZXMgfHwgIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQSBmaWxlIGlzIGNvbnNpZGVyZWQgYSB3ZWVrbHkgbm90ZSBpZiBpdCdzIGluc2lkZSB0aGUgc3BlY2lmaWVkIGZvbGRlci5cbiAgICAgICAgcmV0dXJuIGZpbGUucGFyZW50Py5wYXRoID09PSB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrbHlOb3RlRm9sZGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgKiBBdHRhY2hlcyB0b3VjaCBldmVudCBsaXN0ZW5lcnMgZm9yIG1vYmlsZSBzd2lwZSBnZXN0dXJlcy5cbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2FsZW5kYXJFbCBUaGUgZWxlbWVudCB0byBsaXN0ZW4gZm9yICdzd2lwZSB1cCcgb24uXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGhlYWRlckVsIFRoZSBlbGVtZW50IHRvIGxpc3RlbiBmb3IgJ3N3aXBlIGRvd24nIG9uLlxuICAgKi9cbiAgICBhdHRhY2hTd2lwZUxpc3RlbmVycyhjYWxlbmRhckVsLCBoZWFkZXJFbCkge1xuICAgICAgICBjb25zdCBzd2lwZVRocmVzaG9sZCA9IDUwO1xuICAgICAgICBsZXQgc3RhcnRZID0gMDtcbiAgICAgICAgbGV0IHN0YXJ0WCA9IDA7XG4gICAgICAgIGxldCBpc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgIGxldCBkcmFnVGFyZ2V0ID0gbnVsbDsgLy8gVG8ga25vdyB3aGljaCBlbGVtZW50IHN0YXJ0ZWQgdGhlIGRyYWdcblxuICAgICAgICBjb25zdCBoYW5kbGVEcmFnU3RhcnQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaXNEcmFnZ2luZyA9IHRydWU7XG4gICAgICAgICAgICBkcmFnVGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0OyAvLyBTdG9yZSBpZiBkcmFnIHN0YXJ0ZWQgb24gY2FsZW5kYXIgb3IgaGVhZGVyXG4gICAgICAgICAgICBzdGFydFkgPSBlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0uY2xpZW50WSA6IGUuY2xpZW50WTtcbiAgICAgICAgICAgIHN0YXJ0WCA9IGUudG91Y2hlcyA/IGUudG91Y2hlc1swXS5jbGllbnRYIDogZS5jbGllbnRYO1xuXG4gICAgICAgICAgICAvLyBBZGQgdGhlICdlbmQnIGxpc3RlbmVycyB0byB0aGUgd2luZG93IHRvIGNhdGNoIGRyYWdzIHRoYXQgZW5kIG91dHNpZGUgdGhlIGVsZW1lbnRcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgaGFuZGxlRHJhZ0VuZCwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgaGFuZGxlRHJhZ0VuZCwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZURyYWdFbmQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFpc0RyYWdnaW5nKSByZXR1cm47XG4gICAgICAgICAgICBpc0RyYWdnaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGNvbnN0IGVuZFkgPSBlLmNoYW5nZWRUb3VjaGVzID8gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZIDogZS5jbGllbnRZO1xuICAgICAgICAgICAgY29uc3QgZW5kWCA9IGUuY2hhbmdlZFRvdWNoZXMgPyBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFggOiBlLmNsaWVudFg7XG4gICAgICAgICAgICBjb25zdCBkZWx0YVkgPSBzdGFydFkgLSBlbmRZO1xuICAgICAgICAgICAgY29uc3QgZGVsdGFYID0gTWF0aC5hYnMoc3RhcnRYIC0gZW5kWCk7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGl0J3MgYSBwcmVkb21pbmFudGx5IHZlcnRpY2FsIHN3aXBlXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoZGVsdGFZKSA+IHN3aXBlVGhyZXNob2xkICYmIE1hdGguYWJzKGRlbHRhWSkgPiBkZWx0YVgpIHtcbiAgICAgICAgICAgICAgICAvLyBTd2lwZSBVcCBvbiBDYWxlbmRhciBCb2R5OiBIaWRlIENhbGVuZGFyXG4gICAgICAgICAgICAgICAgaWYgKGRyYWdUYXJnZXQgPT09IGNhbGVuZGFyRWwgJiYgZGVsdGFZID4gMCAmJiAhdGhpcy5pc0NhbGVuZGFyQ29sbGFwc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJXYXNDb2xsYXBzZWRGb3JFZGl0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQ2FsZW5kYXIodHJ1ZSk7IC8vIENvbGxhcHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFN3aXBlIERvd24gb24gSGVhZGVyOiBTaG93IENhbGVuZGFyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZHJhZ1RhcmdldCA9PT0gaGVhZGVyRWwgJiYgZGVsdGFZIDwgMCAmJiB0aGlzLmlzQ2FsZW5kYXJDb2xsYXBzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxlbmRhcldhc0NvbGxhcHNlZEZvckVkaXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVDYWxlbmRhcihmYWxzZSk7IC8vIFVzZSB0aGUgaGVscGVyXG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ibHVyQWN0aXZlSW5wdXQoKTsgICAvLyBFeHBsaWNpdGx5IGRpc21pc3MgdGhlIGtleWJvYXJkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuYXBwLmlzTW9iaWxlICYmIGRyYWdUYXJnZXQgPT09IGNhbGVuZGFyRWwgJiYgZGVsdGFZIDwgLTgwKSB7IC8vIEEgbG9uZ2VyIHN3aXBlIGRvd24gZ2VzdHVyZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVmVydGljYWxWaWV3ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTsgLy8gUmUtcmVuZGVyIHRoZSBlbnRpcmUgdmlldyB0byBzd2l0Y2ggdG8gdmVydGljYWwgbW9kZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBBdHRhY2ggc3RhcnQgbGlzdGVuZXJzIGZvciBib3RoIG1vdXNlIGFuZCB0b3VjaCB0byBib3RoIGVsZW1lbnRzXG4gICAgICAgIGNhbGVuZGFyRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlRHJhZ1N0YXJ0KTtcbiAgICAgICAgY2FsZW5kYXJFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgaGFuZGxlRHJhZ1N0YXJ0LCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgICAgIGhlYWRlckVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZURyYWdTdGFydCk7XG4gICAgICAgIGhlYWRlckVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBoYW5kbGVEcmFnU3RhcnQsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEaXNwbGF5cyBhIHBvcHVwIGxpc3Qgb2Ygbm90ZXMgdGhhdCBsaW5rIHRvIGEgc3BlY2lmaWMgYXNzZXQuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0RWwgLSBUaGUgZWxlbWVudCB0byBwb3NpdGlvbiB0aGUgcG9wdXAgcmVsYXRpdmUgdG8uXG4gICAgICogQHBhcmFtIHtURmlsZX0gYXNzZXRGaWxlIC0gVGhlIGFzc2V0IHdob3NlIGJhY2tsaW5rcyBzaG91bGQgYmUgZGlzcGxheWVkLlxuICAgICAqL1xuICAgIGFzeW5jIHNob3dCYWNrbGlua3NQb3B1cCh0YXJnZXRFbCwgYXNzZXRGaWxlKSB7XG4gICAgICAgIHRoaXMuaGlkZUZpbGVQb3B1cCgpOyAvLyBIaWRlIGFueSBvdGhlciBwb3B1cHNcbiAgICAgICAgY29uc3QgYmFja2xpbmtzID0gYXdhaXQgdGhpcy5maW5kQXNzZXRCYWNrbGlua3MoYXNzZXRGaWxlKTtcblxuICAgICAgICBpZiAoYmFja2xpbmtzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIGJhY2tsaW5rcyBmb3VuZCBmb3IgdGhpcyBhc3NldC5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBvcHVwRWwgPSBjcmVhdGVEaXYoeyBjbHM6ICdvdGhlci1ub3Rlcy1wb3B1cCcgfSk7XG5cbiAgICAgICAgLy8gQWRkIGhlYWRlciB3aXRoIGEgY2xvc2UgYnV0dG9uXG4gICAgICAgIGNvbnN0IGhlYWRlclJvdyA9IHRoaXMucG9wdXBFbC5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC1oZWFkZXInIH0pO1xuICAgICAgICBoZWFkZXJSb3cuY3JlYXRlRGl2KHsgY2xzOiAncG9wdXAtaGVhZGVyLXRpdGxlJywgdGV4dDogJ0JhY2tsaW5rcycgfSk7XG4gICAgICAgIGNvbnN0IGNsb3NlQnRuID0gaGVhZGVyUm93LmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWNsb3NlLWJ0bicgfSk7XG4gICAgICAgIHNldEljb24oY2xvc2VCdG4sICd4Jyk7XG4gICAgICAgIGhlYWRlclJvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGlkZUZpbGVQb3B1cCgpKTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBzY3JvbGxhYmxlIHdyYXBwZXIgZm9yIHRoZSBjb250ZW50XG4gICAgICAgIGNvbnN0IGNvbnRlbnRXcmFwcGVyID0gdGhpcy5wb3B1cEVsLmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWNvbnRlbnQtd3JhcHBlcicgfSk7XG5cbiAgICAgICAgYmFja2xpbmtzLmZvckVhY2gobm90ZUZpbGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXRlbUVsID0gY29udGVudFdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiAnb3RoZXItbm90ZXMtcG9wdXAtaXRlbScgfSk7XG4gICAgICAgICAgICBzZXRJY29uKGl0ZW1FbCwgJ2ZpbGUtdGV4dCcpO1xuXG4gICAgICAgICAgICBjb25zdCB0aXRsZVBhdGhXcmFwcGVyID0gaXRlbUVsLmNyZWF0ZURpdih7IGNsczogJ25vdGUtdGl0bGUtcGF0aC13cmFwcGVyJyB9KTtcbiAgICAgICAgICAgIHRpdGxlUGF0aFdyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogbm90ZUZpbGUuYmFzZW5hbWUsIGNsczogXCJub3RlLXRpdGxlXCIgfSk7XG4gICAgICAgICAgICBpZiAobm90ZUZpbGUucGFyZW50ICYmIG5vdGVGaWxlLnBhcmVudC5wYXRoICE9PSAnLycpIHtcbiAgICAgICAgICAgICAgICB0aXRsZVBhdGhXcmFwcGVyLmNyZWF0ZURpdih7IHRleHQ6IG5vdGVGaWxlLnBhcmVudC5wYXRoLCBjbHM6ICdub3RlLXBhdGgnIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpdGVtRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShub3RlRmlsZSk7XG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldExpbmUgPSAwO1xuICAgICAgICAgICAgICAgIGlmIChjYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxMaW5rcyA9IFsuLi4oY2FjaGUuZW1iZWRzIHx8IFtdKSwgLi4uKGNhY2hlLmxpbmtzIHx8IFtdKV07XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcmVmIG9mIGFsbExpbmtzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rZWRGaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChyZWYubGluaywgbm90ZUZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlua2VkRmlsZSAmJiBsaW5rZWRGaWxlLnBhdGggPT09IGFzc2V0RmlsZS5wYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TGluZSA9IHJlZi5wb3NpdGlvbi5zdGFydC5saW5lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG9wZW5Jbk5ld1RhYiA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVzT3BlbkFjdGlvbiA9PT0gJ25ldy10YWInO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihvcGVuSW5OZXdUYWIpO1xuICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYub3BlbkZpbGUobm90ZUZpbGUsIHsgZVN0YXRlOiB7IGxpbmU6IHRhcmdldExpbmUgfSB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVGaWxlUG9wdXAoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnBvcHVwRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IGNsZWFyVGltZW91dCh0aGlzLmhpZGVUaW1lb3V0KSk7XG4gICAgICAgIHRoaXMucG9wdXBFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oaWRlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5oaWRlRmlsZVBvcHVwKCksIHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcHVwSGlkZURlbGF5KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnBvcHVwRWwpO1xuXG4gICAgICAgIGNvbnN0IHBvcHVwUmVjdCA9IHRoaXMucG9wdXBFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3QgdGFyZ2V0UmVjdCA9IHRhcmdldEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCB2aWV3cG9ydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIGNvbnN0IHZpZXdwb3J0SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICBjb25zdCBtYXJnaW4gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wb3B1cEdhcDtcbiAgICAgICAgbGV0IGZpbmFsVG9wID0gdGFyZ2V0UmVjdC5ib3R0b20gKyBtYXJnaW47XG4gICAgICAgIGlmIChmaW5hbFRvcCArIHBvcHVwUmVjdC5oZWlnaHQgPiB2aWV3cG9ydEhlaWdodCkgZmluYWxUb3AgPSB0YXJnZXRSZWN0LnRvcCAtIHBvcHVwUmVjdC5oZWlnaHQgLSBtYXJnaW47XG4gICAgICAgIGlmIChmaW5hbFRvcCA8IDApIGZpbmFsVG9wID0gbWFyZ2luO1xuICAgICAgICBsZXQgZmluYWxMZWZ0ID0gdGFyZ2V0UmVjdC5sZWZ0O1xuICAgICAgICBpZiAoZmluYWxMZWZ0ICsgcG9wdXBSZWN0LndpZHRoID4gdmlld3BvcnRXaWR0aCkgZmluYWxMZWZ0ID0gdGFyZ2V0UmVjdC5yaWdodCAtIHBvcHVwUmVjdC53aWR0aDtcbiAgICAgICAgaWYgKGZpbmFsTGVmdCA8IDApIGZpbmFsTGVmdCA9IG1hcmdpbjtcblxuICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUudG9wID0gYCR7ZmluYWxUb3B9cHhgO1xuICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUubGVmdCA9IGAke2ZpbmFsTGVmdH1weGA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0cmFjdHMgYWxsIHRhc2sgbGluZXMgKGUuZy4sIFwiLSBbIF0gLi4uXCIpIGZyb20gYSBzdHJpbmcgb2YgY29udGVudC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29udGVudCAtIFRoZSBtYXJrZG93biBjb250ZW50IHRvIHBhcnNlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmdbXX0gQW4gYXJyYXkgb2Ygc3RyaW5ncywgd2hlcmUgZWFjaCBzdHJpbmcgaXMgYSB0YXNrIGxpbmUuXG4gICAgICovXG4gICAgZXh0cmFjdFRhc2tMaW5lcyhjb250ZW50KSB7XG4gICAgICAgIGNvbnN0IHRhc2tMaW5lcyA9IFtdO1xuICAgICAgICAvLyBUaGlzIHJlZ2V4IGZpbmRzIGFueSBsaW5lIHRoYXQgbG9va3MgbGlrZSBhIE1hcmtkb3duIHRhc2ssIGNvbXBsZXRlZCBvciBub3QuXG4gICAgICAgIGNvbnN0IHRhc2tSZWdleCA9IC9eXFxzKig/Oi18XFxkK1xcLilcXHMqXFxbLlxcXVxccyouKi87XG4gICAgICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgICAgICAgICAgaWYgKHRhc2tSZWdleC50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICAgICAgdGFza0xpbmVzLnB1c2gobGluZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhc2tMaW5lcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYSBmaWxlIGlzIGFuIGltYWdlIGJhc2VkIG9uIGl0cyBleHRlbnNpb24uXG4gICAgICogQHBhcmFtIHtURmlsZX0gZmlsZSBUaGUgZmlsZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZmlsZSBpcyBhIGNvbW1vbiBpbWFnZSB0eXBlLlxuICAgICAqL1xuICAgIGlzSW1hZ2VBc3NldChmaWxlKSB7XG4gICAgICAgIGNvbnN0IGltYWdlRXh0ZW5zaW9ucyA9IFsncG5nJywgJ2pwZycsICdqcGVnJywgJ2dpZicsICdzdmcnLCAnd2VicCddO1xuICAgICAgICByZXR1cm4gaW1hZ2VFeHRlbnNpb25zLmluY2x1ZGVzKGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIER5bmFtaWNhbGx5IGdlbmVyYXRlcyB0aGUgbGFiZWwgZm9yIGEgdGFiLCBpbmNsdWRpbmcgaWNvbiBhbmQvb3IgdGV4dCBiYXNlZCBvbiBzZXR0aW5ncy5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIgVGhlIEhUTUwgZWxlbWVudCB0byBwb3B1bGF0ZSB3aXRoIHRoZSBsYWJlbC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHRhYiAoZS5nLiwgJ25vdGVzJywgJ3NjcmF0Y2gnKS5cbiAgICAgKi9cbiAgICBnZXRUYWJMYWJlbChjb250YWluZXIsIGtleSkge1xuICAgICAgICBjb250YWluZXIuZW1wdHkoKTsgLy8gQ2xlYXIgcHJldmlvdXMgY29udGVudFxuXG4gICAgICAgIGNvbnN0IGlzTW9iaWxlID0gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLW1vYmlsZScpO1xuICAgICAgICBjb25zdCBkaXNwbGF5TW9kZSA9IGlzTW9iaWxlID8gdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlVGFiRGlzcGxheU1vZGUgOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJEaXNwbGF5TW9kZTtcblxuICAgICAgICBjb25zdCBpY29ucyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYkljb25zIHx8IERFRkFVTFRfU0VUVElOR1MudGFiSWNvbnM7XG4gICAgICAgIGNvbnN0IHRleHRMYWJlbHMgPSB7XG4gICAgICAgICAgICBzY3JhdGNoOiBcIlNjcmF0Y2hQYWRcIixcbiAgICAgICAgICAgIG5vdGVzOiBcIk5vdGVzXCIsXG4gICAgICAgICAgICBwaW5uZWQ6IFwiUGlubmVkXCIsXG4gICAgICAgICAgICB0YXNrczogXCJUYXNrc1wiLCAvLyBUaGlzIGlzIGEgZmFsbGJhY2tcbiAgICAgICAgICAgIGFzc2V0czogXCJBc3NldHNcIlxuICAgICAgICB9O1xuXG4gICAgICAgIGxldCBpY29uTmFtZSA9ICcnO1xuICAgICAgICBsZXQgdGV4dCA9ICcnO1xuXG4gICAgICAgIGlmIChrZXkgPT09ICdub3RlcycpIHtcbiAgICAgICAgICAgIGNvbnN0IG1vZGUgPSB0aGlzLm5vdGVzVmlld01vZGU7XG4gICAgICAgICAgICBpY29uTmFtZSA9IG1vZGUgPT09ICdwaW5uZWQnID8gaWNvbnMucGlubmVkIDogaWNvbnMubm90ZXM7XG4gICAgICAgICAgICB0ZXh0ID0gbW9kZSA9PT0gJ3Bpbm5lZCcgPyB0ZXh0TGFiZWxzLnBpbm5lZCA6IHRleHRMYWJlbHMubm90ZXM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSAndGFza3MnKSB7XG4gICAgICAgICAgICBjb25zdCBncm91cEJ5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0dyb3VwQnk7XG4gICAgICAgICAgICBpY29uTmFtZSA9IGdyb3VwQnkgPT09ICd0YWcnID8gJ2NpcmNsZS1jaGVjaycgOiBpY29ucy50YXNrcztcbiAgICAgICAgICAgIHRleHQgPSBncm91cEJ5ID09PSAndGFnJyA/IFwiVGFza3MgYnkgVGFnXCIgOiBcIlRhc2tzIGJ5IERhdGVcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09ICdhc3NldHMnKSB7XG4gICAgICAgICAgICBpY29uTmFtZSA9IHRoaXMuaXNBc3NldHNHcmlkVmlldyA/ICdpbWFnZScgOiAnZmlsZS1pbWFnZSc7XG4gICAgICAgICAgICB0ZXh0ID0gdGV4dExhYmVsc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWNvbk5hbWUgPSBpY29uc1trZXldO1xuICAgICAgICAgICAgdGV4dCA9IHRleHRMYWJlbHNba2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkaXNwbGF5TW9kZS5pbmNsdWRlcyhcImljb25cIikpIHtcbiAgICAgICAgICAgIGNvbnN0IGljb25FbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd0YWItaWNvbicgfSk7XG4gICAgICAgICAgICBzZXRJY29uKGljb25FbCwgaWNvbk5hbWUgfHwgJ2ZpbGUtcXVlc3Rpb24nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkaXNwbGF5TW9kZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwidGV4dFwiKSkge1xuICAgICAgICAgICAgY29udGFpbmVyLmNyZWF0ZVNwYW4oeyBjbHM6ICd0YWItdGV4dCcsIHRleHQ6IHRleHQgfHwgJycgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIGEgZmlsZSBpcyBhIGRhaWx5IG5vdGUgYmFzZWQgb24gaXRzIG5hbWUgZm9ybWF0IGFuZCBsb2NhdGlvbi5cbiAgICAgKiBAcGFyYW0ge1RGaWxlfSBmaWxlIFRoZSBmaWxlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBmaWxlIG1hdGNoZXMgdGhlIGRhaWx5IG5vdGUgY3JpdGVyaWEuXG4gICAgICovXG4gICAgaXNEYWlseU5vdGUoZmlsZSkge1xuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuICAgICAgICBjb25zdCBkYWlseU5vdGVGb2xkZXIgPSBzZXR0aW5ncy5kYWlseU5vdGVzRm9sZGVyO1xuICAgICAgICBjb25zdCBmb3JtYXQgPSBzZXR0aW5ncy5kYWlseU5vdGVEYXRlRm9ybWF0IHx8IFwiWVlZWS1NTS1ERFwiO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBmaWxlbmFtZSBzdHJpY3RseSBtYXRjaGVzIHRoZSBkYWlseSBub3RlIGRhdGUgZm9ybWF0LlxuICAgICAgICBjb25zdCBpc05hbWVDb3JyZWN0ID0gbW9tZW50KGZpbGUuYmFzZW5hbWUsIGZvcm1hdCwgdHJ1ZSkuaXNWYWxpZCgpO1xuICAgICAgICBpZiAoIWlzTmFtZUNvcnJlY3QpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIGEgZGFpbHkgbm90ZXMgZm9sZGVyIGlzIHNwZWNpZmllZCwgY2hlY2sgaWYgdGhlIGZpbGUgaXMgZGlyZWN0bHkgaW5zaWRlIGl0LlxuICAgICAgICBpZiAoZGFpbHlOb3RlRm9sZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gZmlsZS5wYXJlbnQ/LnBhdGggPT09IGRhaWx5Tm90ZUZvbGRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIG5vIGZvbGRlciBpcyBzZXQsIHRoZSBmaWxlIG11c3QgYmUgaW4gdGhlIHZhdWx0J3Mgcm9vdCBkaXJlY3RvcnkuXG4gICAgICAgIHJldHVybiBmaWxlLnBhcmVudD8ucGF0aCA9PT0gJy8nO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRvZ2dsZXMgdGhlIHNjcmF0Y2hwYWQgYmV0d2VlbiBlZGl0IGFuZCBwcmV2aWV3IG1vZGUgYW5kIHRyaWdnZXJzIGEgcmUtcmVuZGVyLlxuICAgICAqL1xuICAgIHRvZ2dsZVNjcmF0Y2hwYWRWaWV3KCkge1xuICAgICAgICB0aGlzLmlzU2NyYXRjaHBhZFByZXZpZXcgPSAhdGhpcy5pc1NjcmF0Y2hwYWRQcmV2aWV3O1xuICAgICAgICAvLyBUaGUgYnV0dG9uIHN0YXRlIGFuZCBjb250ZW50IHZpc2liaWxpdHkgYXJlIGhhbmRsZWQgYnkgdGhlIHJlbmRlciBtZXRob2QuXG4gICAgICAgIHRoaXMucmVuZGVyU2NyYXRjaHBhZENvbnRlbnQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzZXMgZGF0ZSBwbGFjZWhvbGRlcnMgaW4gYSBzdHJpbmcgYW5kIHJlcGxhY2VzIHRoZW0gd2l0aCBmb3JtYXR0ZWQgZGF0ZXMuXG4gICAgICogQWxzbyBoYW5kbGVzIGEgY3Vyc29yIHBvc2l0aW9uIG1hcmtlci5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZm9ybWF0U3RyaW5nIFRoZSBzdHJpbmcgY29udGFpbmluZyBwbGFjZWhvbGRlcnMgbGlrZSB7dG9kYXl9LCB7bW9uZGF5fSwge2RhdGV9KzcsIGFuZCBhIGN1cnNvciBtYXJrZXIgJ3wnLlxuICAgICAqIEByZXR1cm5zIHt7dGV4dDogc3RyaW5nLCBjdXJzb3JPZmZzZXQ6IG51bWJlcn19IFRoZSBwcm9jZXNzZWQgc3RyaW5nIGFuZCB0aGUgY2FsY3VsYXRlZCBmaW5hbCBjdXJzb3IgcG9zaXRpb24uXG4gICAgICovXG4gICAgcHJvY2Vzc0RhdGVQbGFjZWhvbGRlcnMoZm9ybWF0U3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGN1cnNvck1hcmtlciA9ICd8JztcbiAgICAgICAgbGV0IGN1cnNvck9mZnNldCA9IC0xO1xuXG4gICAgICAgIC8vIEZpbmQgdGhlIGN1cnNvciBtYXJrZXIncyBwb3NpdGlvbiBhbmQgcmVtb3ZlIGl0IGZvciBwcm9jZXNzaW5nLlxuICAgICAgICBjb25zdCBtYXJrZXJJbmRleCA9IGZvcm1hdFN0cmluZy5pbmRleE9mKGN1cnNvck1hcmtlcik7XG4gICAgICAgIGlmIChtYXJrZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIGN1cnNvck9mZnNldCA9IG1hcmtlckluZGV4O1xuICAgICAgICAgICAgZm9ybWF0U3RyaW5nID0gZm9ybWF0U3RyaW5nLnJlcGxhY2UoY3Vyc29yTWFya2VyLCAnJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQcm9jZXNzIGRhdGUgcGxhY2Vob2xkZXJzIHVzaW5nIGEgcmVnZXguXG4gICAgICAgIGNvbnN0IHByb2Nlc3NlZFRleHQgPSBmb3JtYXRTdHJpbmcucmVwbGFjZSgveyhbXn1dKyl9L2csIChtYXRjaCwgdGFnKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSBtb21lbnQoKTtcbiAgICAgICAgICAgIHRhZyA9IHRhZy50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcblxuICAgICAgICAgICAgaWYgKHRhZyA9PT0gJ3RvZGF5JykgcmV0dXJuIG5vdy5mb3JtYXQoJ1lZWVktTU0tREQnKTtcbiAgICAgICAgICAgIGlmICh0YWcgPT09ICd0b21vcnJvdycpIHJldHVybiBub3cuYWRkKDEsICdkYXknKS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcblxuICAgICAgICAgICAgY29uc3Qgd2Vla2RheXMgPSB7ICdzdW5kYXknOiAwLCAnbW9uZGF5JzogMSwgJ3R1ZXNkYXknOiAyLCAnd2VkbmVzZGF5JzogMywgJ3RodXJzZGF5JzogNCwgJ2ZyaWRheSc6IDUsICdzYXR1cmRheSc6IDYgfTtcbiAgICAgICAgICAgIGlmICh0YWcgaW4gd2Vla2RheXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXREYXkgPSB3ZWVrZGF5c1t0YWddO1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXkgPSBub3cuZGF5KCk7XG4gICAgICAgICAgICAgICAgbGV0IGRheXNUb0FkZCA9IHRhcmdldERheSAtIGN1cnJlbnREYXk7XG4gICAgICAgICAgICAgICAgaWYgKGRheXNUb0FkZCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRheXNUb0FkZCArPSA3OyAvLyBGaW5kIHRoZSAqbmV4dCogaW5zdGFuY2Ugb2YgdGhlIGRheS5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vdy5hZGQoZGF5c1RvQWRkLCAnZGF5cycpLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBkeW5hbWljRGF0ZU1hdGNoID0gdGFnLm1hdGNoKC9eZGF0ZVxccyooWystXSlcXHMqKFxcZCspLyk7XG4gICAgICAgICAgICBpZiAoZHluYW1pY0RhdGVNYXRjaCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9wZXJhdG9yID0gZHluYW1pY0RhdGVNYXRjaFsxXTtcbiAgICAgICAgICAgICAgICBjb25zdCBhbW91bnQgPSBwYXJzZUludChkeW5hbWljRGF0ZU1hdGNoWzJdLCAxMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wZXJhdG9yID09PSAnKycgPyBub3cuYWRkKGFtb3VudCwgJ2RheXMnKS5mb3JtYXQoJ1lZWVktTU0tREQnKSA6IG5vdy5zdWJ0cmFjdChhbW91bnQsICdkYXlzJykuZm9ybWF0KCdZWVlZLU1NLUREJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBtYXRjaDsgLy8gUmV0dXJuIG9yaWdpbmFsIG1hdGNoIGlmIG5vIHBsYWNlaG9sZGVyIGlzIHJlY29nbml6ZWQuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIElmIHRoZSBjdXJzb3IgbWFya2VyIHdhc24ndCBmb3VuZCwgc2V0IHRoZSBvZmZzZXQgdG8gdGhlIGVuZCBvZiB0aGUgdGV4dC5cbiAgICAgICAgaWYgKGN1cnNvck9mZnNldCA9PT0gLTEpIHtcbiAgICAgICAgICAgIGN1cnNvck9mZnNldCA9IHByb2Nlc3NlZFRleHQubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHsgdGV4dDogcHJvY2Vzc2VkVGV4dCwgY3Vyc29yT2Zmc2V0OiBjdXJzb3JPZmZzZXQgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTY2FucyB0aGUgZW50aXJlIHZhdWx0IGZvciBvcGVuIHRhc2tzIHdpdGggZHVlIGRhdGVzIChlLmcuLCDwn5OFWVlZWS1NTS1ERClcbiAgICAgKiBhbmQgcG9wdWxhdGVzIGB0aGlzLnRhc2tzQnlEYXRlYCBtYXAgZm9yIHF1aWNrIGxvb2t1cHMgYnkgdGhlIGNhbGVuZGFyIHZpZXcuXG4gICAgICovXG4gICAgYXN5bmMgYnVpbGRUYXNrc0J5RGF0ZU1hcCgpIHtcbiAgICAgICAgdGhpcy50YXNrc0J5RGF0ZS5jbGVhcigpO1xuICAgICAgICB0aGlzLmZpbGVUb1Rhc2tEYXRlcy5jbGVhcigpOyAvLyBBbHNvIGNsZWFyIHRoZSB0cmFja2luZyBtYXBcblxuICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrSWdub3JlRm9sZGVycy5zb21lKGZvbGRlciA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXIpKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlKTtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tzID0gcGFyc2VUYXNrc0Zyb21GaWxlKGZpbGUsIGNvbnRlbnQpOyAvLyBVc2UgdGhlIG5ldyBoZWxwZXJcblxuICAgICAgICAgICAgY29uc3QgZGF0ZUtleXNGb3JGaWxlID0gbmV3IFNldCgpO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGFza3MpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBvbmx5IGNhcmUgYWJvdXQgaW5jb21wbGV0ZSB0YXNrcyB3aXRoIGR1ZSBkYXRlcyBmb3IgdGhlIGNhbGVuZGFyIGdyaWRcbiAgICAgICAgICAgICAgICBpZiAodGFzay5zdGF0dXMudG9Mb3dlckNhc2UoKSAhPT0gJ3gnICYmIHRhc2suZHVlRGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlS2V5ID0gbW9tZW50KHRhc2suZHVlRGF0ZSkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnRhc2tzQnlEYXRlLmhhcyhkYXRlS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrc0J5RGF0ZS5zZXQoZGF0ZUtleSwgW10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFza3NCeURhdGUuZ2V0KGRhdGVLZXkpLnB1c2godGFzayk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGVLZXlzRm9yRmlsZS5hZGQoZGF0ZUtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGF0ZUtleXNGb3JGaWxlLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxlVG9UYXNrRGF0ZXMuc2V0KGZpbGUucGF0aCwgZGF0ZUtleXNGb3JGaWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNob3dzIGEgY29uZmlybWF0aW9uIG1vZGFsIGFuZCBoYW5kbGVzIHRoZSBwZXJtYW5lbnQgZGVsZXRpb24gb2YgYW4gYXNzZXQgZmlsZS5cbiAgICAgKiBAcGFyYW0ge1RGaWxlfSBmaWxlIC0gVGhlIGFzc2V0IGZpbGUgdG8gZGVsZXRlLlxuICAgICAqL1xuICAgIGFzeW5jIGhhbmRsZURlbGV0ZUFzc2V0KGZpbGUpIHtcbiAgICAgICAgbmV3IENvbmZpcm1hdGlvbk1vZGFsKFxuICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICBcIkNvbmZpcm0gRGVsZXRpb25cIixcbiAgICAgICAgICAgIGBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcGVybWFuZW50bHkgZGVsZXRlIFwiJHtmaWxlLm5hbWV9XCI/IFRoaXMgYWN0aW9uIGNhbm5vdCBiZSB1bmRvbmUuYCxcbiAgICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC50cmFzaChmaWxlLCB0cnVlKTsgLy8gYHRydWVgIGZvciBwZXJtYW5lbnQgZGVsZXRpb24uXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYERlbGV0ZWQgYXNzZXQ6ICR7ZmlsZS5uYW1lfWApO1xuICAgICAgICAgICAgICAgICAgICAvLyBSZWZyZXNoIGRhdGEgbWFwcyBhbmQgVUkgY29tcG9uZW50cyB0aGF0IGRlcGVuZCBvbiBhc3NldCBkYXRhLlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkQXNzZXRDcmVhdGlvbk1hcCgpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkVGFza3NCeURhdGVNYXAoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZUFzc2V0cygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yIGRlbGV0aW5nIGZpbGU6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAsIFwiWWVzLCBkZWxldGVcIikub3BlbigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgdGhlIGNvbnRlbnQgb2YgdGhlIHNjcmF0Y2hwYWQsIHN3aXRjaGluZyBiZXR3ZWVuIGFuIGVkaXRvciB0ZXh0YXJlYVxuICAgICAqIGFuZCBhIHJlbmRlcmVkIE1hcmtkb3duIHByZXZpZXcgYmFzZWQgb24gdGhlIGN1cnJlbnQgdmlldyBtb2RlLlxuICAgICAqL1xuICAgIGFzeW5jIHJlbmRlclNjcmF0Y2hwYWRDb250ZW50KCkge1xuICAgICAgICBpZiAoIXRoaXMuc2NyYXRjaFdyYXBwZXJFbCkgcmV0dXJuO1xuXG4gICAgICAgIC8vIFByZXNlcnZlIGZvY3VzIG9uIHRoZSB0ZXh0YXJlYSBhY3Jvc3MgcmUtcmVuZGVycy5cbiAgICAgICAgY29uc3Qgd2FzRm9jdXNlZCA9IHRoaXMubm90ZVRleHRhcmVhID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXG4gICAgICAgIHRoaXMuc2NyYXRjaFdyYXBwZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhIGNvbnRhaW5lciBmb3IgYWN0aW9uIGJ1dHRvbnMgKFByZXZpZXcsIEFkZCBUYXNrKS5cbiAgICAgICAgY29uc3QgYWN0aW9uc0NvbnRhaW5lciA9IHRoaXMuc2NyYXRjaFdyYXBwZXJFbC5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgY2xzOiBcInNjcmF0Y2hwYWQtYWN0aW9ucy1jb250YWluZXJcIlxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBPbmx5IHNob3cgdGhlIFByZXZpZXcvRWRpdCB0b2dnbGUgYnV0dG9uIGlmIGVuYWJsZWQgaW4gc2V0dGluZ3MuXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNocGFkPy5zaG93UHJldmlld1RvZ2dsZSkge1xuICAgICAgICAgICAgdGhpcy5zY3JhdGNocGFkVmlld1RvZ2dsZUJ0biA9IGFjdGlvbnNDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgICAgIGNsczogXCJzY3JhdGNocGFkLWFjdGlvbi1idG5cIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNjcmF0Y2hwYWRWaWV3VG9nZ2xlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnRvZ2dsZVNjcmF0Y2hwYWRWaWV3KCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gT25seSBzaG93IHRoZSBBZGQgVGFzayBidXR0b24gaWYgZW5hYmxlZCBpbiBzZXR0aW5ncy5cbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQ/LnNob3dBZGRUYXNrQnV0dG9uKSB7XG4gICAgICAgICAgICB0aGlzLmFkZFRhc2tCdG4gPSBhY3Rpb25zQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICAgICAgICBjbHM6IFwic2NyYXRjaHBhZC1hY3Rpb24tYnRuXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2V0SWNvbih0aGlzLmFkZFRhc2tCdG4sIFwicGx1c1wiKTtcbiAgICAgICAgICAgIHRoaXMuYWRkVGFza0J0bi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiQWRkIG5ldyB0YXNrXCIpO1xuICAgICAgICAgICAgdGhpcy5hZGRUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmFkZE5ld1Rhc2tUb1NjcmF0Y2hwYWQoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pc1NjcmF0Y2hwYWRQcmV2aWV3ICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQ/LnNob3dQcmV2aWV3VG9nZ2xlKSB7XG4gICAgICAgICAgICAvLyAtLS0gQ09ORklHVVJFIFVJIEZPUiBQUkVWSUVXIE1PREUgLS0tXG4gICAgICAgICAgICBpZiAodGhpcy5zY3JhdGNocGFkVmlld1RvZ2dsZUJ0bikge1xuICAgICAgICAgICAgICAgIHNldEljb24odGhpcy5zY3JhdGNocGFkVmlld1RvZ2dsZUJ0biwgXCJlZGl0XCIpOyAvLyBTd2l0Y2ggdG8gRWRpdCBpY29uXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JhdGNocGFkVmlld1RvZ2dsZUJ0bi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiRWRpdCBtb2RlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWRkVGFza0J0bikgdGhpcy5hZGRUYXNrQnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgIC8vIERpc2FibGUgc2VhcmNoIGNvbnRyb2xzIGluIHByZXZpZXcgbW9kZS5cbiAgICAgICAgICAgIGlmICh0aGlzLnNjcmF0Y2hwYWRTZWFyY2hJbnB1dEVsKSB0aGlzLnNjcmF0Y2hwYWRTZWFyY2hJbnB1dEVsLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNjcmF0Y2hwYWRTZWFyY2hDb250cm9sc0VsKSB7XG4gICAgICAgICAgICAgICAgQXJyYXkuZnJvbSh0aGlzLnNjcmF0Y2hwYWRTZWFyY2hDb250cm9sc0VsLmNoaWxkcmVuKS5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkLm1hdGNoZXMoJ2J1dHRvbicpKSBjaGlsZC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJlbmRlciB0aGUgY29udGVudCBhcyBNYXJrZG93bi5cbiAgICAgICAgICAgIHRoaXMuc2NyYXRjaFdyYXBwZXJFbC5hZGRDbGFzcyhcIm1hcmtkb3duLXByZXZpZXctdmlld1wiKTtcbiAgICAgICAgICAgIGNvbnN0IG1hcmtkb3duQ29udGVudCA9IGF3YWl0IHRoaXMubG9hZE5vdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5wbHVnaW4uc2V0dGluZ3MuZml4ZWROb3RlRmlsZSk7XG4gICAgICAgICAgICBpZiAoZmlsZSkge1xuICAgICAgICAgICAgICAgIE1hcmtkb3duUmVuZGVyZXIucmVuZGVyKHRoaXMuYXBwLCBtYXJrZG93bkNvbnRlbnQsIHRoaXMuc2NyYXRjaFdyYXBwZXJFbCwgZmlsZS5wYXRoLCB0aGlzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gLS0tIENPTkZJR1VSRSBVSSBGT1IgRURJVCBNT0RFIC0tLVxuICAgICAgICAgICAgaWYgKHRoaXMuc2NyYXRjaHBhZFZpZXdUb2dnbGVCdG4pIHtcbiAgICAgICAgICAgICAgICBzZXRJY29uKHRoaXMuc2NyYXRjaHBhZFZpZXdUb2dnbGVCdG4sIFwiZXllXCIpOyAvLyBTd2l0Y2ggdG8gUHJldmlldyBpY29uXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JhdGNocGFkVmlld1RvZ2dsZUJ0bi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiUHJldmlldyBtb2RlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWRkVGFza0J0bikgdGhpcy5hZGRUYXNrQnRuLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgICAgICAgICAvLyBFbmFibGUgc2VhcmNoIGNvbnRyb2xzIGluIGVkaXQgbW9kZS5cbiAgICAgICAgICAgIGlmICh0aGlzLnNjcmF0Y2hwYWRTZWFyY2hJbnB1dEVsKSB0aGlzLnNjcmF0Y2hwYWRTZWFyY2hJbnB1dEVsLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodGhpcy5zY3JhdGNocGFkU2VhcmNoQ29udHJvbHNFbCkge1xuICAgICAgICAgICAgICAgIEFycmF5LmZyb20odGhpcy5zY3JhdGNocGFkU2VhcmNoQ29udHJvbHNFbC5jaGlsZHJlbikuZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5tYXRjaGVzKCdidXR0b24nKSkgY2hpbGQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5zY3JhdGNoV3JhcHBlckVsLnJlbW92ZUNsYXNzKFwibWFya2Rvd24tcHJldmlldy12aWV3XCIpO1xuICAgICAgICAgICAgLy8gVGhlIGhpZ2hsaWdodGVyIGlzIGEgZGl2IHRoYXQgc2l0cyBiZWhpbmQgdGhlIHRleHRhcmVhIHRvIHNob3cgc2VhcmNoIG1hdGNoZXMuXG4gICAgICAgICAgICB0aGlzLnNjcmF0Y2hIaWdobGlnaHRlckVsID0gdGhpcy5zY3JhdGNoV3JhcHBlckVsLmNyZWF0ZURpdih7IGNsczogXCJzY3JhdGNoLWJhc2Ugc2NyYXRjaC1oaWdobGlnaHRlclwiIH0pO1xuICAgICAgICAgICAgdGhpcy5ub3RlVGV4dGFyZWEgPSB0aGlzLnNjcmF0Y2hXcmFwcGVyRWwuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzY3JhdGNoLWJhc2Ugc2NyYXRjaC1jb250ZW50XCIgfSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmFwcC5pc01vYmlsZSkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RlVGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJXYXNDb2xsYXBzZWRGb3JFZGl0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVDYWxlbmRhcih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RlVGV4dGFyZWEuY2xhc3NMaXN0LmFkZCgnaXMtZWRpdGluZy1tb2JpbGUnKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHRoaXMubm90ZVRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZS5yZWxhdGVkVGFyZ2V0ID09PSB0aGlzLmNvbGxhcHNlQnRuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGVUZXh0YXJlYS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1lZGl0aW5nLW1vYmlsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCBhdXRvLWV4cGFuZCBpZiBuZWVkZWQuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbGVuZGFyV2FzQ29sbGFwc2VkRm9yRWRpdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxlbmRhcldhc0NvbGxhcHNlZEZvckVkaXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQ2FsZW5kYXIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90ZVRleHRhcmVhLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWVkaXRpbmctbW9iaWxlJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMubm90ZVRleHRhcmVhLnZhbHVlID0gdGhpcy5ub3RlVGV4dDtcbiAgICAgICAgICAgIGlmICh3YXNGb2N1c2VkKSB0aGlzLm5vdGVUZXh0YXJlYS5mb2N1cygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTY3JhdGNocGFkSGlnaGxpZ2h0cygpO1xuXG5cbiAgICAgICAgICAgIC8vIFNhdmUgY29udGVudCBvbiBpbnB1dC5cbiAgICAgICAgICAgIHRoaXMubm90ZVRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RlVGV4dCA9IHRoaXMubm90ZVRleHRhcmVhLnZhbHVlO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUZpeGVkTm90ZSh0aGlzLm5vdGVUZXh0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNjcmF0Y2hwYWRTZWFyY2hDb3VudCgpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2NyYXRjaHBhZEhpZ2hsaWdodHMoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBTeW5jaHJvbml6ZSBzY3JvbGwgcG9zaXRpb24gYmV0d2VlbiB0ZXh0YXJlYSBhbmQgaGlnaGxpZ2h0ZXIuXG4gICAgICAgICAgICB0aGlzLm5vdGVUZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2NyYXRjaEhpZ2hsaWdodGVyRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JhdGNoSGlnaGxpZ2h0ZXJFbC5zY3JvbGxUb3AgPSB0aGlzLm5vdGVUZXh0YXJlYS5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NyYXRjaEhpZ2hsaWdodGVyRWwuc2Nyb2xsTGVmdCA9IHRoaXMubm90ZVRleHRhcmVhLnNjcm9sbExlZnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiB0aGUgdmlldyBpcyBmaXJzdCBvcGVuZWQuIEl0IGxvYWRzIGFsbCBpbml0aWFsIGRhdGEgYW5kIHJlZ2lzdGVyc1xuICAgICAqIGV2ZW50IGxpc3RlbmVycyBmb3IgZmlsZSBjaGFuZ2VzIGFuZCBhdXRvLXJlbG9hZGluZy5cbiAgICAgKi9cbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIC8vIC0tLSBMb2FkIGFsbCBpbml0aWFsIGRhdGEgLS0tXG4gICAgICAgIGF3YWl0IHRoaXMuYnVpbGRDcmVhdGVkTm90ZXNNYXAoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5idWlsZE1vZGlmaWVkTm90ZXNNYXAoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5idWlsZEFzc2V0Q3JlYXRpb25NYXAoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5idWlsZFRhc2tzQnlEYXRlTWFwKCk7XG4gICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaEljc0V2ZW50cygpO1xuICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkV2Vla2x5Tm90ZXNDYWNoZSgpO1xuICAgICAgICB0aGlzLm5vdGVUZXh0ID0gYXdhaXQgdGhpcy5sb2FkTm90ZSgpO1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB0aGlzLnNldHVwUmVvcmRlck1vZGUoKTtcblxuICAgICAgICAvLyAtLS0gUmVnaXN0ZXIgZXZlbnRzIGFuZCBpbnRlcnZhbHMgLS0tXG4gICAgICAgIGNvbnN0IGludGVydmFsTXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvUmVsb2FkSW50ZXJ2YWwgfHwgNTAwMDtcbiAgICAgICAgdGhpcy5yZWdpc3RlckludGVydmFsKHNldEludGVydmFsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSB0aGlzLm5vdGVUZXh0YXJlYSkgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3QgbGF0ZXN0ID0gYXdhaXQgdGhpcy5sb2FkTm90ZSgpO1xuICAgICAgICAgICAgaWYgKGxhdGVzdCAhPT0gdGhpcy5ub3RlVGV4dCAmJiB0aGlzLm5vdGVUZXh0YXJlYSkge1xuICAgICAgICAgICAgICAgIHRoaXMubm90ZVRleHQgPSBsYXRlc3Q7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RlVGV4dGFyZWEudmFsdWUgPSBsYXRlc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGludGVydmFsTXMpKTtcblxuICAgICAgICAvLyBUaGlzIGxpc3RlbmVyIGNoZWNrcyB0aGUgZGF0ZSB3aGVuIHRoZSBhcHAgd2luZG93IGdldHMgZm9jdXMuXG4gICAgICAgIC8vIFRoaXMgc29sdmVzIGEgJ3N0YWxlIGRhdGUgaGlnaGxpZ2h0IGFmdGVyIGEgZGV2aWNlIHNsZWVwJyBpc3N1ZS5cbiAgICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KHdpbmRvdywgJ2ZvY3VzJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIC8vIE9ubHkgcHJvY2VlZCBpZiB0aGUgZGF5IGhhcyBhY3R1YWxseSBjaGFuZ2VkLlxuICAgICAgICAgICAgaWYgKCFpc1NhbWVEYXkobm93LCB0aGlzLmxhc3RLbm93blRvZGF5KSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiV2luZG93IGZvY3VzIGRldGVjdGVkOiBEYXkgaGFzIGNoYW5nZWQuIFJlZnJlc2hpbmcgY2FsZW5kYXIuXCIpO1xuXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIG91ciB0cmFja2VyIHRvIHRoZSBuZXcgZGF0ZS5cbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RLbm93blRvZGF5ID0gbm93O1xuXG4gICAgICAgICAgICAgICAgLy8gRWZmaWNpZW50bHkgcmUtcmVuZGVyIGp1c3QgdGhlIGNhbGVuZGFyIGdyaWQuXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8vIFVzZSBtZXRhZGF0YUNhY2hlIGZvciBtb2RpZmljYXRpb25zIC0gaXQncyBtb3JlIGVmZmljaWVudFxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAubWV0YWRhdGFDYWNoZS5vbignY2hhbmdlZCcsIGFzeW5jIChmaWxlKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1dlZWtseU5vdGUoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4aXN0aW5nV2Vla2x5Tm90ZXMuYWRkKGZpbGUucGF0aCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEluY3JlbWVudGFsbHkgdXBkYXRlIG1hcHNcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRmlsZUZyb21NYXBzKGZpbGUucGF0aCk7XG4gICAgICAgICAgICB0aGlzLmFkZEZpbGVUb01hcHMoZmlsZSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVRhc2tzRm9yRmlsZShmaWxlKTtcblxuICAgICAgICAgICAgLy8gVHJpZ2dlciBhIHRhcmdldGVkIFVJIHJlZnJlc2hcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFVJKGZpbGUpO1xuICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gVmF1bHQgZXZlbnQgZm9yIG5ldyBmaWxlc1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAudmF1bHQub24oXCJjcmVhdGVcIiwgYXN5bmMgKGZpbGUpID0+IHtcbiAgICAgICAgICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzV2Vla2x5Tm90ZShmaWxlKSkgdGhpcy5leGlzdGluZ1dlZWtseU5vdGVzLmFkZChmaWxlLnBhdGgpO1xuXG4gICAgICAgICAgICBpZiAoZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5tZCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRGaWxlVG9NYXBzKGZpbGUpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlVGFza3NGb3JGaWxlKGZpbGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEZpbGVUb0Fzc2V0TWFwKGZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVUkoZmlsZSk7XG4gICAgICAgIH0pKTtcblxuICAgICAgICAvLyBBZGQgYSBnbG9iYWwgbGlzdGVuZXIgdG8gYmx1ciBpbnB1dHMgd2hlbiB0YXBwaW5nIG91dHNpZGUuXG4gICAgICAgIC8vIFVzZXMgJ21vdXNlZG93bicgYW5kIHRoZSAnY2FwdHVyZTogdHJ1ZScgcGhhc2UgZm9yIG1vYmlsZSByZWxpYWJpbGl0eS5cbiAgICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KHRoaXMuY29udGFpbmVyRWwsICdtb3VzZWRvd24nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUVsID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcblxuICAgICAgICAgICAgLy8gU2FmZWx5IGNoZWNrIGlmIHRoZSBjbGlja2VkIHRhcmdldCBpcyBhIHZhbGlkIEhUTUwgZWxlbWVudC5cbiAgICAgICAgICAgIC8vIElmIG5vdCwgZG8gbm90aGluZy4gVGhpcyBwcmV2ZW50cyB0aGUgZXJyb3JzIHlvdSBzYXcgYmVmb3JlLlxuICAgICAgICAgICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBEZWZpbmUgdGhlIGxpc3Qgb2YgaW5wdXRzIHRoaXMgYmVoYXZpb3IgYXBwbGllcyB0by5cbiAgICAgICAgICAgIGNvbnN0IGZvY3VzYWJsZUlucHV0cyA9IFtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGVzU2VhcmNoSW5wdXRFbCxcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2tzU2VhcmNoSW5wdXRFbCxcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2V0c1NlYXJjaElucHV0RWwsXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JhdGNocGFkU2VhcmNoSW5wdXRFbCxcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGVUZXh0YXJlYVxuICAgICAgICAgICAgXS5maWx0ZXIoQm9vbGVhbik7IC8vIFJlbW92ZXMgYW55IG5vbi1leGlzdGVudCBlbGVtZW50c1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBvbmUgb2Ygb3VyIGlucHV0cyBjdXJyZW50bHkgaGFzIGZvY3VzLlxuICAgICAgICAgICAgY29uc3QgaXNJbnB1dEZvY3VzZWQgPSBmb2N1c2FibGVJbnB1dHMuaW5jbHVkZXMoYWN0aXZlRWwpO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgdGFwIG9jY3VycmVkIG9uIG9uZSBvZiB0aGUgaW5wdXRzIHRoZW1zZWx2ZXMuXG4gICAgICAgICAgICBjb25zdCBjbGlja2VkT25JbnB1dCA9IGZvY3VzYWJsZUlucHV0cy5zb21lKGlucHV0ID0+IGlucHV0LmNvbnRhaW5zKHRhcmdldCkpO1xuXG4gICAgICAgICAgICAvLyBJZiBhbiBpbnB1dCBpcyBmb2N1c2VkLCBidXQgdGhlIHRhcCB3YXMgKm91dHNpZGUqIG9mIGl0LCBibHVyIHRoZSBpbnB1dC5cbiAgICAgICAgICAgIGlmIChpc0lucHV0Rm9jdXNlZCAmJiAhY2xpY2tlZE9uSW5wdXQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHJlLXVzZXMgdGhlIHNhbWUgaGVscGVyIGZ1bmN0aW9uIGZyb20gdGhlIHN3aXBlIGZpeC5cbiAgICAgICAgICAgICAgICB0aGlzLmJsdXJBY3RpdmVJbnB1dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0cnVlKTsgLy8gJ3RydWUnIGVuYWJsZXMgdGhlIGNhcHR1cmUgcGhhc2UsIHdoaWNoIGlzIGNydWNpYWwgZm9yIHJlbGlhYmlsaXR5LlxuXG5cbiAgICAgICAgLy8gVmF1bHQgZXZlbnQgZm9yIGRlbGV0ZWQgZmlsZXNcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKFwiZGVsZXRlXCIsIGFzeW5jIChmaWxlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSByZXR1cm47XG4gICAgICAgICAgICBpZiAodGhpcy5leGlzdGluZ1dlZWtseU5vdGVzLmhhcyhmaWxlLnBhdGgpKSB0aGlzLmV4aXN0aW5nV2Vla2x5Tm90ZXMuZGVsZXRlKGZpbGUucGF0aCk7XG5cbiAgICAgICAgICAgIGlmIChmaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLm1kJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZpbGVGcm9tTWFwcyhmaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgIC8vIEFsc28gcmVtb3ZlIHRhc2tzIGZyb20gdGhlIGRlbGV0ZWQgZmlsZVxuICAgICAgICAgICAgICAgIGNvbnN0IG9sZERhdGVLZXlzID0gdGhpcy5maWxlVG9UYXNrRGF0ZXMuZ2V0KGZpbGUucGF0aCkgfHwgbmV3IFNldCgpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGF0ZUtleSBvZiBvbGREYXRlS2V5cykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXNrcyA9IHRoaXMudGFza3NCeURhdGUuZ2V0KGRhdGVLZXkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFza3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZyA9IHRhc2tzLmZpbHRlcih0ID0+IHQuZmlsZS5wYXRoICE9PSBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZy5sZW5ndGggPiAwKSB0aGlzLnRhc2tzQnlEYXRlLnNldChkYXRlS2V5LCByZW1haW5pbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB0aGlzLnRhc2tzQnlEYXRlLmRlbGV0ZShkYXRlS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmZpbGVUb1Rhc2tEYXRlcy5kZWxldGUoZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGaWxlRnJvbUFzc2V0TWFwKGZpbGUucGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hVSShmaWxlKTtcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIFZhdWx0IGV2ZW50IGZvciByZW5hbWVkIGZpbGVzXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC52YXVsdC5vbihcInJlbmFtZVwiLCBhc3luYyAoZmlsZSwgb2xkUGF0aCkgPT4ge1xuICAgICAgICAgICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHRoaXMuZXhpc3RpbmdXZWVrbHlOb3Rlcy5oYXMob2xkUGF0aCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4aXN0aW5nV2Vla2x5Tm90ZXMuZGVsZXRlKG9sZFBhdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNXZWVrbHlOb3RlKGZpbGUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leGlzdGluZ1dlZWtseU5vdGVzLmFkZChmaWxlLnBhdGgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5tZCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGaWxlRnJvbU1hcHMob2xkUGF0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRGaWxlVG9NYXBzKGZpbGUpO1xuICAgICAgICAgICAgICAgIC8vIFJlLXBvaW50IHRhc2tzIHRvIHRoZSBuZXcgZmlsZSBwYXRoXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVUYXNrc0ZvckZpbGUoZmlsZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRmlsZUZyb21Bc3NldE1hcChvbGRQYXRoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEZpbGVUb0Fzc2V0TWFwKGZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVUkoZmlsZSk7XG4gICAgICAgIH0pKTtcblxuXG4gICAgICAgIGNvbnN0IFBVTExfVEhSRVNIT0xEID0gNzA7IC8vIEhvdyBmYXIgdGhlIHVzZXIgbmVlZHMgdG8gcHVsbCBkb3duIHRvIHRyaWdnZXIgYSByZWZyZXNoXG5cbiAgICAgICAgY29uc3QgcmVzZXRQdWxsU3R5bGVzID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50YXNrUmVmcmVzaEluZGljYXRvci5yZW1vdmVDbGFzcygnaXMtcmVhZHknLCAnaXMtcHVsbGluZycsICdpcy1yZWZyZXNoaW5nJyk7XG4gICAgICAgICAgICB0aGlzLnRhc2tzQ29udGVudEVsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKDBweClgO1xuICAgICAgICAgICAgdGhpcy50YXNrUmVmcmVzaEluZGljYXRvci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWSgtNTBweCkgc2NhbGUoMC43KWA7XG4gICAgICAgICAgICBzZXRJY29uKHRoaXMudGFza1JlZnJlc2hJbmRpY2F0b3IsICdhcnJvdy1kb3duJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KHRoaXMudGFza3NDb250ZW50RWwsICd0b3VjaHN0YXJ0JywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRhc2tzQ29udGVudEVsLnNjcm9sbFRvcCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNUYXNrUHVsbGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrUHVsbFN0YXJ0WSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuXG4gICAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudCh0aGlzLnRhc2tzQ29udGVudEVsLCAndG91Y2htb3ZlJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1Rhc2tQdWxsaW5nKSByZXR1cm47XG5cbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRZID0gZS50b3VjaGVzWzBdLmNsaWVudFk7XG4gICAgICAgICAgICAvLyBXZSBvbmx5IGNhcmUgYWJvdXQgdGhlIGRvd253YXJkIHB1bGwgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnRcbiAgICAgICAgICAgIHRoaXMudGFza1B1bGxEaXN0YW5jZSA9IE1hdGgubWF4KDAsIGN1cnJlbnRZIC0gdGhpcy50YXNrUHVsbFN0YXJ0WSk7XG5cbiAgICAgICAgICAgIC8vIE9ubHkgaW50ZXJmZXJlIGlmIHRoZSBsaXN0IGlzIHNjcm9sbGVkIHRvIHRoZSB0b3AgQU5EIHRoZSB1c2VyIGlzIHB1bGxpbmcgZG93bi5cbiAgICAgICAgICAgIGlmICh0aGlzLnRhc2tzQ29udGVudEVsLnNjcm9sbFRvcCA9PT0gMCAmJiB0aGlzLnRhc2tQdWxsRGlzdGFuY2UgPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gUHJldmVudCB0aGUgYnJvd3NlciBmcm9tIHNjcm9sbGluZyB0aGUgcGFnZVxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHB1bGxSYXRpbyA9IE1hdGgubWluKHRoaXMudGFza1B1bGxEaXN0YW5jZSwgUFVMTF9USFJFU0hPTEQpO1xuICAgICAgICAgICAgICAgIHRoaXMudGFza3NDb250ZW50RWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVkoJHtwdWxsUmF0aW99cHgpYDtcblxuICAgICAgICAgICAgICAgIHRoaXMudGFza1JlZnJlc2hJbmRpY2F0b3IuYWRkQ2xhc3MoJ2lzLXB1bGxpbmcnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2tSZWZyZXNoSW5kaWNhdG9yLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKCR7cHVsbFJhdGlvIC0gNTB9cHgpIHNjYWxlKDAuNylgO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGFza1B1bGxEaXN0YW5jZSA+IFBVTExfVEhSRVNIT0xEKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFza1JlZnJlc2hJbmRpY2F0b3IuYWRkQ2xhc3MoJ2lzLXJlYWR5Jyk7XG4gICAgICAgICAgICAgICAgICAgIHNldEljb24odGhpcy50YXNrUmVmcmVzaEluZGljYXRvciwgJ2NoZWNrJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrUmVmcmVzaEluZGljYXRvci5yZW1vdmVDbGFzcygnaXMtcmVhZHknKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0SWNvbih0aGlzLnRhc2tSZWZyZXNoSW5kaWNhdG9yLCAnYXJyb3ctZG93bicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2UndmUgc3RhcnRlZCBzY3JvbGxpbmcgZG93biB0aGUgbGlzdCwgc3RvcCB0cmFja2luZyB0aGUgcHVsbFxuICAgICAgICAgICAgICAgIHRoaXMuaXNUYXNrUHVsbGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0sIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG5cbiAgICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KHRoaXMudGFza3NDb250ZW50RWwsICd0b3VjaGVuZCcsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNUYXNrUHVsbGluZykgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5pc1Rhc2tQdWxsaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnRhc2tQdWxsRGlzdGFuY2UgPiBQVUxMX1RIUkVTSE9MRCkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5ibHVyQWN0aXZlSW5wdXQoKTtcbiAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSByZWZyZXNoXG4gICAgICAgICAgICAgICAgdGhpcy50YXNrUmVmcmVzaEluZGljYXRvci5hZGRDbGFzcygnaXMtcmVmcmVzaGluZycsICdpcy1yZWFkeScpO1xuICAgICAgICAgICAgICAgIHNldEljb24odGhpcy50YXNrUmVmcmVzaEluZGljYXRvciwgJ2xvYWRlcicpO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wb3B1bGF0ZVRhc2tzKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBSZXNldCBzdHlsZXMgYWZ0ZXIgcmVmcmVzaCBpcyBjb21wbGV0ZVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXNldFB1bGxTdHlsZXMoKTtcbiAgICAgICAgICAgICAgICB9LCAzMDApOyAvLyBTbWFsbCBkZWxheSBmb3IgdXNlciB0byBzZWUgdGhlIGVuZCBvZiB0aGUgc3BpblxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFNuYXAgYmFjayBpZiBub3QgcHVsbGVkIGZhciBlbm91Z2hcbiAgICAgICAgICAgICAgICByZXNldFB1bGxTdHlsZXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy50YXNrUHVsbERpc3RhbmNlID0gMDtcblxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZURhaWx5UmVmcmVzaCgpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRm9yY2VzIGEgZnVsbCByZWJ1aWxkIG9mIGFsbCBkYXRhIG1hcHMgYW5kIGEgY29tcGxldGUgcmUtcmVuZGVyIG9mIHRoZSB2aWV3LlxuICAgICAqIFVzZWZ1bCBhZnRlciBtYWpvciBzZXR0aW5nIGNoYW5nZXMuXG4gICAgICovXG4gICAgYXN5bmMgcmVidWlsZEFuZFJlbmRlcigpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5idWlsZENyZWF0ZWROb3Rlc01hcCgpO1xuICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkTW9kaWZpZWROb3Rlc01hcCgpO1xuICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkQXNzZXRDcmVhdGlvbk1hcCgpO1xuICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2hJY3NFdmVudHMoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5idWlsZFdlZWtseU5vdGVzQ2FjaGUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIG1vcmUgdGFyZ2V0ZWQgVUkgcmVmcmVzaCBiYXNlZCBvbiB3aGljaCBmaWxlIHdhcyBjaGFuZ2VkLFxuICAgICAqIGF2b2lkaW5nIGEgZnVsbCByZS1yZW5kZXIgd2hlbiBwb3NzaWJsZS5cbiAgICAgKiBAcGFyYW0ge1RGaWxlfSBmaWxlIFRoZSBmaWxlIHRoYXQgd2FzIGNoYW5nZWQuXG4gICAgICovXG4gICAgYXN5bmMgcmVmcmVzaFVJKGZpbGUpIHtcbiAgICAgICAgLy8gRGVib3VuY2UgY2FsZW5kYXIgcmVuZGVyIGFzIGl0J3MgdGhlIG1vc3QgY29tbW9uIHVwZGF0ZVxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jYWxlbmRhclJlZnJlc2hEZWJvdW5jZVRpbWVyKTtcbiAgICAgICAgdGhpcy5jYWxlbmRhclJlZnJlc2hEZWJvdW5jZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBJZiBpbiB2ZXJ0aWNhbCB2aWV3LCBhIGZ1bGwgcmUtcmVuZGVyIGlzIG5lZWRlZCB0byB1cGRhdGUgYWxsIHZpc2libGUgbW9udGhzLlxuICAgICAgICAgICAgaWYgKHRoaXMuaXNWZXJ0aWNhbFZpZXcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIGp1c3QgcmUtcmVuZGVyIHRoZSBzaW5nbGUgY2FsZW5kYXIgZ3JpZC5cbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDMwMCk7XG5cbiAgICAgICAgLy8gUmVmcmVzaCBhY3RpdmUgdGFiIGlmIGl0J3Mgb3BlbiBhbmQgcmVsZXZhbnRcbiAgICAgICAgc3dpdGNoICh0aGlzLmFjdGl2ZVRhYikge1xuICAgICAgICAgICAgY2FzZSAnc2NyYXRjaCc6XG4gICAgICAgICAgICAgICAgaWYgKGZpbGU/LnBhdGggPT09IHRoaXMucGx1Z2luLnNldHRpbmdzLmZpeGVkTm90ZUZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RlVGV4dCA9IGF3YWl0IHRoaXMubG9hZE5vdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubm90ZVRleHRhcmVhKSB0aGlzLm5vdGVUZXh0YXJlYS52YWx1ZSA9IHRoaXMubm90ZVRleHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbm90ZXMnOlxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLm5vdGVzUmVmcmVzaERlYm91bmNlVGltZXIpO1xuICAgICAgICAgICAgICAgIHRoaXMubm90ZXNSZWZyZXNoRGVib3VuY2VUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5wb3B1bGF0ZU5vdGVzKCksIDI1MCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd0YXNrcyc6XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGFza1JlZnJlc2hEZWJvdW5jZVRpbWVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2tSZWZyZXNoRGVib3VuY2VUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5wb3B1bGF0ZVRhc2tzKCksIDI1MCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhc3NldHMnOlxuICAgICAgICAgICAgICAgIC8vIEludmFsaWRhdGUgYXNzZXQgY2FjaGUgYW5kIHJlZnJlc2hcbiAgICAgICAgICAgICAgICB0aGlzLmlzVW51c2VkQXNzZXRDYWNoZVZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZUFzc2V0cygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlVGFza3NGb3JGaWxlKGZpbGUpIHtcbiAgICAgICAgaWYgKCFmaWxlIHx8ICEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB8fCAhZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5tZCcpKSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIERvIG5vdGhpbmcgaWYgaXQncyBub3QgYSBtYXJrZG93biBmaWxlXG4gICAgICAgIH1cblxuICAgICAgICAvLyAxLiBFZmZpY2llbnRseSByZW1vdmUgYWxsIG9sZCB0YXNrcyBmcm9tIHRoaXMgZmlsZVxuICAgICAgICBjb25zdCBvbGREYXRlS2V5cyA9IHRoaXMuZmlsZVRvVGFza0RhdGVzLmdldChmaWxlLnBhdGgpIHx8IG5ldyBTZXQoKTtcbiAgICAgICAgZm9yIChjb25zdCBkYXRlS2V5IG9mIG9sZERhdGVLZXlzKSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrc09uRGF0ZSA9IHRoaXMudGFza3NCeURhdGUuZ2V0KGRhdGVLZXkpO1xuICAgICAgICAgICAgaWYgKHRhc2tzT25EYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nVGFza3MgPSB0YXNrc09uRGF0ZS5maWx0ZXIodGFzayA9PiB0YXNrLmZpbGUucGF0aCAhPT0gZmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICBpZiAocmVtYWluaW5nVGFza3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tzQnlEYXRlLnNldChkYXRlS2V5LCByZW1haW5pbmdUYXNrcyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrc0J5RGF0ZS5kZWxldGUoZGF0ZUtleSk7IC8vIENsZWFuIHVwIGVtcHR5IGRhdGUgZW50cmllc1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZpbGVUb1Rhc2tEYXRlcy5kZWxldGUoZmlsZS5wYXRoKTtcblxuICAgICAgICAvLyAyLiBSZS1wcm9jZXNzIHRoZSBzaW5nbGUgZmlsZSBhbmQgYWRkIGl0cyBuZXcgdGFza3NcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tJZ25vcmVGb2xkZXJzLnNvbWUoZm9sZGVyID0+IGZpbGUucGF0aC5zdGFydHNXaXRoKGZvbGRlcikpKSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIERvbid0IHJlLWFkZCBpZiBpdCdzIGluIGFuIGlnbm9yZWQgZm9sZGVyXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlKTtcbiAgICAgICAgY29uc3QgdGFza3MgPSBwYXJzZVRhc2tzRnJvbUZpbGUoZmlsZSwgY29udGVudCk7XG4gICAgICAgIGNvbnN0IG5ld0RhdGVLZXlzID0gbmV3IFNldCgpO1xuXG4gICAgICAgIGZvciAoY29uc3QgdGFzayBvZiB0YXNrcykge1xuICAgICAgICAgICAgaWYgKHRhc2suc3RhdHVzLnRvTG93ZXJDYXNlKCkgIT09ICd4JyAmJiB0YXNrLmR1ZURhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlS2V5ID0gbW9tZW50KHRhc2suZHVlRGF0ZSkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudGFza3NCeURhdGUuaGFzKGRhdGVLZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFza3NCeURhdGUuc2V0KGRhdGVLZXksIFtdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrc0J5RGF0ZS5nZXQoZGF0ZUtleSkucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICBuZXdEYXRlS2V5cy5hZGQoZGF0ZUtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV3RGF0ZUtleXMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuZmlsZVRvVGFza0RhdGVzLnNldChmaWxlLnBhdGgsIG5ld0RhdGVLZXlzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGhpZ2hsaWdodGVyIGRpdiB3aXRoIDxtYXJrPiB0YWdzIHRvIHNob3cgc2VhcmNoIHRlcm0gbWF0Y2hlcy5cbiAgICAgKi9cbiAgICB1cGRhdGVTY3JhdGNocGFkSGlnaGxpZ2h0cygpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNjcmF0Y2hIaWdobGlnaHRlckVsIHx8ICF0aGlzLm5vdGVUZXh0YXJlYSkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLm5vdGVUZXh0YXJlYS52YWx1ZTtcbiAgICAgICAgY29uc3QgdGVybSA9IHRoaXMuc2NyYXRjaHBhZFNlYXJjaFRlcm07XG5cbiAgICAgICAgaWYgKCF0ZXJtKSB7XG4gICAgICAgICAgICB0aGlzLnNjcmF0Y2hIaWdobGlnaHRlckVsLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2FuaXRpemUgdGV4dCB0byBwcmV2ZW50IEhUTUwgaW5qZWN0aW9uIGJlZm9yZSBpbnNlcnRpbmcgaXQgaW50byB0aGUgaGlnaGxpZ2h0ZXIuXG4gICAgICAgIGNvbnN0IHNhbml0aXplZFRleHQgPSB0ZXh0XG4gICAgICAgICAgICAucmVwbGFjZSgvJi9nLCBcIiZhbXA7XCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvPC9nLCBcIiZsdDtcIilcbiAgICAgICAgICAgIC5yZXBsYWNlKC8+L2csIFwiJmd0O1wiKTtcblxuICAgICAgICBjb25zdCBlc2NhcGVkVGVybSA9IHRlcm0ucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKTtcbiAgICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGVzY2FwZWRUZXJtLCAnZ2knKTtcblxuICAgICAgICBjb25zdCBoaWdobGlnaHRlZEh0bWwgPSBzYW5pdGl6ZWRUZXh0LnJlcGxhY2UocmVnZXgsIChtYXRjaCkgPT4gYDxtYXJrPiR7bWF0Y2h9PC9tYXJrPmApO1xuICAgICAgICB0aGlzLnNjcmF0Y2hIaWdobGlnaHRlckVsLmlubmVySFRNTCA9IGhpZ2hsaWdodGVkSHRtbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb3VudHMgYW5kIGRpc3BsYXlzIHRoZSBudW1iZXIgb2Ygc2VhcmNoIG1hdGNoZXMgaW4gdGhlIHNjcmF0Y2hwYWQuXG4gICAgICovXG4gICAgdXBkYXRlU2NyYXRjaHBhZFNlYXJjaENvdW50KCkge1xuICAgICAgICBpZiAoIXRoaXMuc2NyYXRjaHBhZFNlYXJjaENvdW50RWwgfHwgIXRoaXMubm90ZVRleHRhcmVhKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgdGVybSA9IHRoaXMuc2NyYXRjaHBhZFNlYXJjaFRlcm07XG4gICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLm5vdGVUZXh0YXJlYS52YWx1ZTtcbiAgICAgICAgbGV0IG1hdGNoQ291bnQgPSAwO1xuXG4gICAgICAgIGlmICh0ZXJtKSB7XG4gICAgICAgICAgICBjb25zdCBlc2NhcGVkVGVybSA9IHRlcm0ucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKTtcbiAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChlc2NhcGVkVGVybSwgJ2dpJyk7XG4gICAgICAgICAgICBtYXRjaENvdW50ID0gKHRleHQubWF0Y2gocmVnZXgpIHx8IFtdKS5sZW5ndGg7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNjcmF0Y2hwYWRTZWFyY2hDb3VudEVsLnNldFRleHQoYCgke21hdGNoQ291bnR9KWApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBhIGZpbGUgcGF0aCBzaG91bGQgYmUgaWdub3JlZCBiYXNlZCBvbiB1c2VyIHNldHRpbmdzLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlUGF0aCBUaGUgcGF0aCBvZiB0aGUgZmlsZSB0byBjaGVjay5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2V0dGluZ0tleSBUaGUga2V5IGZvciB0aGUgaWdub3JlIGxpc3QgaW4gdGhlIHBsdWdpbiBzZXR0aW5ncy5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgcGF0aCBzaG91bGQgYmUgaWdub3JlZC5cbiAgICAgKi9cbiAgICBpc1BhdGhJZ25vcmVkKGZpbGVQYXRoLCBzZXR0aW5nS2V5ID0gJ290aGVyTm90ZUlnbm9yZUZvbGRlcnMnKSB7XG4gICAgICAgIC8vIE5vcm1hbGl6ZSBmb2xkZXIgcGF0aHMgdG8gZW5kIHdpdGggYSBzbGFzaCBmb3IgY29uc2lzdGVudCBtYXRjaGluZy5cbiAgICAgICAgY29uc3QgaWdub3JlRm9sZGVycyA9ICh0aGlzLnBsdWdpbi5zZXR0aW5nc1tzZXR0aW5nS2V5XSB8fCBbXSkubWFwKGYgPT4gZi50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCcvJykgPyBmLnRvTG93ZXJDYXNlKCkgOiBmLnRvTG93ZXJDYXNlKCkgKyAnLycpO1xuICAgICAgICBjb25zdCBkYWlseU5vdGVGb2xkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYWlseU5vdGVzRm9sZGVyO1xuICAgICAgICBjb25zdCBmaWxlUGF0aExvd2VyID0gZmlsZVBhdGgudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAvLyBBbHdheXMgaWdub3JlIGZpbGVzIGluc2lkZSB0aGUgZGFpbHkgbm90ZXMgZm9sZGVyIGZvciBcIm90aGVyIG5vdGVcIiBjYWxjdWxhdGlvbnMuXG4gICAgICAgIGlmIChkYWlseU5vdGVGb2xkZXIgJiYgZmlsZVBhdGhMb3dlci5zdGFydHNXaXRoKGRhaWx5Tm90ZUZvbGRlci50b0xvd2VyQ2FzZSgpICsgXCIvXCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaWdub3JlRm9sZGVycy5zb21lKGZvbGRlciA9PiBmb2xkZXIgJiYgZmlsZVBhdGhMb3dlci5zdGFydHNXaXRoKGZvbGRlcikpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBmaWxlIHRvIHRoZSBjcmVhdGVkTm90ZXNNYXAgYW5kIG1vZGlmaWVkTm90ZXNNYXAuXG4gICAgICogQHBhcmFtIHtURmlsZX0gZmlsZSBUaGUgZmlsZSB0byBhZGQuXG4gICAgICovXG4gICAgYWRkRmlsZVRvTWFwcyhmaWxlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUGF0aElnbm9yZWQoZmlsZS5wYXRoKSkgcmV0dXJuO1xuXG4gICAgICAgIC8vIEFkZCB0byBjcmVhdGVkTm90ZXNNYXAuXG4gICAgICAgIGNvbnN0IGNkYXRlID0gbmV3IERhdGUoZmlsZS5zdGF0LmN0aW1lKTtcbiAgICAgICAgY29uc3QgY2RhdGVLZXkgPSBtb21lbnQoY2RhdGUpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG4gICAgICAgIGlmICghdGhpcy5jcmVhdGVkTm90ZXNNYXAuaGFzKGNkYXRlS2V5KSkge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVkTm90ZXNNYXAuc2V0KGNkYXRlS2V5LCBbXSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3JlYXRlZEZpbGVzID0gdGhpcy5jcmVhdGVkTm90ZXNNYXAuZ2V0KGNkYXRlS2V5KTtcbiAgICAgICAgaWYgKCFjcmVhdGVkRmlsZXMuc29tZShmID0+IGYucGF0aCA9PT0gZmlsZS5wYXRoKSkge1xuICAgICAgICAgICAgY3JlYXRlZEZpbGVzLnB1c2goZmlsZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgdG8gbW9kaWZpZWROb3Rlc01hcCBpZiBtb2RpZmllZCBkYXRlIGlzIG9uIGEgZGlmZmVyZW50IGRheSB0aGFuIGNyZWF0aW9uIGRhdGUuXG4gICAgICAgIGNvbnN0IG1kYXRlID0gbmV3IERhdGUoZmlsZS5zdGF0Lm10aW1lKTtcbiAgICAgICAgaWYgKCFpc1NhbWVEYXkoY2RhdGUsIG1kYXRlKSkge1xuICAgICAgICAgICAgY29uc3QgbWRhdGVLZXkgPSBtb21lbnQobWRhdGUpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG4gICAgICAgICAgICBpZiAoIXRoaXMubW9kaWZpZWROb3Rlc01hcC5oYXMobWRhdGVLZXkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb2RpZmllZE5vdGVzTWFwLnNldChtZGF0ZUtleSwgW10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbW9kaWZpZWRGaWxlcyA9IHRoaXMubW9kaWZpZWROb3Rlc01hcC5nZXQobWRhdGVLZXkpO1xuICAgICAgICAgICAgaWYgKCFtb2RpZmllZEZpbGVzLnNvbWUoZiA9PiBmLnBhdGggPT09IGZpbGUucGF0aCkpIHtcbiAgICAgICAgICAgICAgICBtb2RpZmllZEZpbGVzLnB1c2goZmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgZmlsZSBmcm9tIGFsbCBpbnRlcm5hbCBub3RlIGRhdGEgbWFwcyBieSBpdHMgcGF0aC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZVBhdGggVGhlIHBhdGggb2YgdGhlIGZpbGUgdG8gcmVtb3ZlLlxuICAgICAqL1xuICAgIHJlbW92ZUZpbGVGcm9tTWFwcyhmaWxlUGF0aCkge1xuICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggbWFwcyBhbmQgcmVtb3ZlIGFueSBlbnRyaWVzIHdpdGggdGhlIGdpdmVuIGZpbGUgcGF0aC5cbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBmaWxlc10gb2YgdGhpcy5jcmVhdGVkTm90ZXNNYXAuZW50cmllcygpKSB7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkRmlsZXMgPSBmaWxlcy5maWx0ZXIoZiA9PiBmLnBhdGggIT09IGZpbGVQYXRoKTtcbiAgICAgICAgICAgIGlmICh1cGRhdGVkRmlsZXMubGVuZ3RoIDwgZmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHVwZGF0ZWRGaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVkTm90ZXNNYXAuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVkTm90ZXNNYXAuc2V0KGtleSwgdXBkYXRlZEZpbGVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBmaWxlc10gb2YgdGhpcy5tb2RpZmllZE5vdGVzTWFwLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlZEZpbGVzID0gZmlsZXMuZmlsdGVyKGYgPT4gZi5wYXRoICE9PSBmaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAodXBkYXRlZEZpbGVzLmxlbmd0aCA8IGZpbGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICh1cGRhdGVkRmlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9kaWZpZWROb3Rlc01hcC5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGlmaWVkTm90ZXNNYXAuc2V0KGtleSwgdXBkYXRlZEZpbGVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGb3JtYXRzIGEgZmlsZSBzaXplIGluIGJ5dGVzIGludG8gYSBodW1hbi1yZWFkYWJsZSBzdHJpbmcgKEIsIEtCLCBNQiwgR0IpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBieXRlcyBUaGUgZmlsZSBzaXplIGluIGJ5dGVzLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgZmlsZSBzaXplLlxuICAgICAqL1xuICAgIGZvcm1hdEZpbGVTaXplKGJ5dGVzKSB7XG4gICAgICAgIGlmIChieXRlcyA9PT0gMCkgcmV0dXJuICcwIEInO1xuICAgICAgICBjb25zdCBrID0gMTAyNDtcbiAgICAgICAgY29uc3Qgc2l6ZXMgPSBbJ0InLCAnS0InLCAnTUInLCAnR0InXTtcbiAgICAgICAgY29uc3QgaSA9IE1hdGguZmxvb3IoTWF0aC5sb2coYnl0ZXMpIC8gTWF0aC5sb2coaykpO1xuICAgICAgICBjb25zdCBmaXhlZCA9IGkgPCAyID8gMCA6IDE7XG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KChieXRlcyAvIE1hdGgucG93KGssIGkpKS50b0ZpeGVkKGZpeGVkKSkgKyAnICcgKyBzaXplc1tpXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IHRhc2sgdG8gdGhlIHNjcmF0Y2hwYWQgbm90ZSB1c2luZyB0aGUgZm9ybWF0IGRlZmluZWQgaW4gc2V0dGluZ3MuXG4gICAgICovXG4gICAgYXN5bmMgYWRkTmV3VGFza1RvU2NyYXRjaHBhZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNTY3JhdGNocGFkUHJldmlldyB8fCAhdGhpcy5ub3RlVGV4dGFyZWEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRhc2tGb3JtYXRTZXR0aW5nID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaHBhZD8udGFza0Zvcm1hdCB8fCBcIi0gWyBdIFwiO1xuICAgICAgICBjb25zdCBwcm9jZXNzZWQgPSB0aGlzLnByb2Nlc3NEYXRlUGxhY2Vob2xkZXJzKHRhc2tGb3JtYXRTZXR0aW5nKTtcbiAgICAgICAgY29uc3QgdGV4dFRvSW5zZXJ0ID0gcHJvY2Vzc2VkLnRleHQ7XG4gICAgICAgIGNvbnN0IHRhID0gdGhpcy5ub3RlVGV4dGFyZWE7XG5cbiAgICAgICAgLy8gMS4gQ2FwdHVyZSBjdXJyZW50IHN0YXRlXG4gICAgICAgIGNvbnN0IHNlbGVjdGlvblN0YXJ0ID0gdGEuc2VsZWN0aW9uU3RhcnQ7XG4gICAgICAgIGNvbnN0IHRleHRCZWZvcmVDdXJzb3IgPSB0YS52YWx1ZS5zdWJzdHJpbmcoMCwgc2VsZWN0aW9uU3RhcnQpO1xuICAgICAgICBjb25zdCB0ZXh0QWZ0ZXJDdXJzb3IgPSB0YS52YWx1ZS5zdWJzdHJpbmcoc2VsZWN0aW9uU3RhcnQpO1xuXG4gICAgICAgIC8vIDIuIFByZXBhcmUgbmV3IHRleHQgYW5kIHVwZGF0ZSB0aGUgdmFsdWVcbiAgICAgICAgY29uc3QgbmVlZHNMZWFkaW5nTmV3bGluZSA9IHRleHRCZWZvcmVDdXJzb3IubGVuZ3RoID4gMCAmJiAhdGV4dEJlZm9yZUN1cnNvci5lbmRzV2l0aChcIlxcblwiKTtcbiAgICAgICAgY29uc3QgZmluYWxJbnNlcnRpb25UZXh0ID0gbmVlZHNMZWFkaW5nTmV3bGluZSA/IFwiXFxuXCIgKyB0ZXh0VG9JbnNlcnQgOiB0ZXh0VG9JbnNlcnQ7XG4gICAgICAgIGNvbnN0IG5ld1RleHQgPSB0ZXh0QmVmb3JlQ3Vyc29yICsgZmluYWxJbnNlcnRpb25UZXh0ICsgdGV4dEFmdGVyQ3Vyc29yO1xuICAgICAgICB0YS52YWx1ZSA9IG5ld1RleHQ7XG5cbiAgICAgICAgLy8gMy4gU2V0IHRoZSBuZXcgY3Vyc29yIHBvc2l0aW9uXG4gICAgICAgIGNvbnN0IG5ld0N1cnNvclBvc2l0aW9uID0gc2VsZWN0aW9uU3RhcnQgKyBmaW5hbEluc2VydGlvblRleHQubGVuZ3RoIC0gKHRleHRUb0luc2VydC5sZW5ndGggLSBwcm9jZXNzZWQuY3Vyc29yT2Zmc2V0KTtcbiAgICAgICAgdGEuc2V0U2VsZWN0aW9uUmFuZ2UobmV3Q3Vyc29yUG9zaXRpb24sIG5ld0N1cnNvclBvc2l0aW9uKTtcblxuICAgICAgICAvLyA0LiBHaXZlIHRoZSB0ZXh0YXJlYSBmb2N1c1xuICAgICAgICB0YS5mb2N1cygpO1xuXG4gICAgICAgIC8vIDUuIFNhdmUgdGhlIG5ldyBjb250ZW50IGltbWVkaWF0ZWx5XG4gICAgICAgIHRoaXMubm90ZVRleHQgPSBuZXdUZXh0O1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVGaXhlZE5vdGUodGhpcy5ub3RlVGV4dCk7XG4gICAgICAgIHRoaXMudXBkYXRlU2NyYXRjaHBhZFNlYXJjaENvdW50KCk7XG4gICAgICAgIHRoaXMudXBkYXRlU2NyYXRjaHBhZEhpZ2hsaWdodHMoKTtcblxuICAgICAgICAvLyA2LiBVc2UgYW4gYXdhaXRlZCBQcm9taXNlIHdpdGggYSBsb25nZXIgZGVsYXkgdG8gZW5zdXJlIHRoaXMgcnVucyBMQVNULlxuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTApKTsgLy8gNTBtcyBkZWxheVxuXG4gICAgICAgIGNvbnN0IGxpbmVIZWlnaHQgPSBwYXJzZUZsb2F0KGdldENvbXB1dGVkU3R5bGUodGEpLmxpbmVIZWlnaHQpIHx8IDIwO1xuICAgICAgICBjb25zdCBsaW5lc1RvQ2FyZXQgPSB0YS52YWx1ZS5zbGljZSgwLCBuZXdDdXJzb3JQb3NpdGlvbikuc3BsaXQoXCJcXG5cIikubGVuZ3RoO1xuICAgICAgICBjb25zdCB0YXJnZXRTY3JvbGxUb3AgPSAobGluZXNUb0NhcmV0IC0gMSkgKiBsaW5lSGVpZ2h0O1xuXG4gICAgICAgIC8vIERpcmVjdGx5IHNldCB0aGUgc2Nyb2xsIHBvc2l0aW9uIGFzIHRoZSBmaW5hbCBhY3Rpb24uXG4gICAgICAgIHRhLnNjcm9sbFRvcCA9IHRhcmdldFNjcm9sbFRvcDtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFNjYW5zIGFsbCBNYXJrZG93biBmaWxlcyBpbiB0aGUgdmF1bHQgdG8gYnVpbGQgdGhlIGluaXRpYWwgYGNyZWF0ZWROb3Rlc01hcGAuXG4gICAgICovXG4gICAgYXN5bmMgYnVpbGRDcmVhdGVkTm90ZXNNYXAoKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlZE5vdGVzTWFwLmNsZWFyKCk7XG4gICAgICAgIGNvbnN0IGFsbE5vdGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgYWxsTm90ZXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUGF0aElnbm9yZWQoZmlsZS5wYXRoKSkgY29udGludWU7XG5cbiAgICAgICAgICAgIGNvbnN0IGNkYXRlID0gbmV3IERhdGUoZmlsZS5zdGF0LmN0aW1lKTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGVLZXkgPSBtb21lbnQoY2RhdGUpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY3JlYXRlZE5vdGVzTWFwLmhhcyhkYXRlS2V5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlZE5vdGVzTWFwLnNldChkYXRlS2V5LCBbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZWROb3Rlc01hcC5nZXQoZGF0ZUtleSkucHVzaChmaWxlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNjYW5zIGFsbCBNYXJrZG93biBmaWxlcyBpbiB0aGUgdmF1bHQgdG8gYnVpbGQgdGhlIGluaXRpYWwgYG1vZGlmaWVkTm90ZXNNYXBgLlxuICAgICAqL1xuICAgIGFzeW5jIGJ1aWxkTW9kaWZpZWROb3Rlc01hcCgpIHtcbiAgICAgICAgdGhpcy5tb2RpZmllZE5vdGVzTWFwLmNsZWFyKCk7XG4gICAgICAgIGNvbnN0IGFsbE5vdGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgYWxsTm90ZXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUGF0aElnbm9yZWQoZmlsZS5wYXRoKSkgY29udGludWU7XG5cbiAgICAgICAgICAgIGNvbnN0IGNkYXRlID0gbmV3IERhdGUoZmlsZS5zdGF0LmN0aW1lKTtcbiAgICAgICAgICAgIGNvbnN0IG1kYXRlID0gbmV3IERhdGUoZmlsZS5zdGF0Lm10aW1lKTtcbiAgICAgICAgICAgIGlmICghaXNTYW1lRGF5KGNkYXRlLCBtZGF0ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlS2V5ID0gbW9tZW50KG1kYXRlKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5tb2RpZmllZE5vdGVzTWFwLmhhcyhkYXRlS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGlmaWVkTm90ZXNNYXAuc2V0KGRhdGVLZXksIFtdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLm1vZGlmaWVkTm90ZXNNYXAuZ2V0KGRhdGVLZXkpLnNvbWUoZiA9PiBmLnBhdGggPT09IGZpbGUucGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RpZmllZE5vdGVzTWFwLmdldChkYXRlS2V5KS5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNjYW5zIGFsbCBub24tTWFya2Rvd24gZmlsZXMgaW4gdGhlIHZhdWx0IHRvIGJ1aWxkIHRoZSBgYXNzZXRDcmVhdGlvbk1hcGAuXG4gICAgICovXG4gICAgYXN5bmMgYnVpbGRBc3NldENyZWF0aW9uTWFwKCkge1xuICAgICAgICB0aGlzLmFzc2V0Q3JlYXRpb25NYXAuY2xlYXIoKTtcbiAgICAgICAgY29uc3QgYWxsRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpO1xuICAgICAgICBjb25zdCBpZ25vcmVGb2xkZXJzID0gKHRoaXMucGx1Z2luLnNldHRpbmdzLmFzc2V0SWdub3JlRm9sZGVycyB8fCBbXSkubWFwKGYgPT4gZi50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCcvJykgPyBmLnRvTG93ZXJDYXNlKCkgOiBmLnRvTG93ZXJDYXNlKCkgKyAnLycpO1xuICAgICAgICBjb25zdCBoaWRkZW5UeXBlcyA9ICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWRkZW5Bc3NldFR5cGVzIHx8IFwiXCIpXG4gICAgICAgICAgICAuc3BsaXQoJywnKVxuICAgICAgICAgICAgLm1hcChleHQgPT4gZXh0LnRyaW0oKS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgLmZpbHRlcihleHQgPT4gZXh0Lmxlbmd0aCA+IDApO1xuXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBhbGxGaWxlcykge1xuICAgICAgICAgICAgaWYgKGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCcubWQnKSkgY29udGludWU7XG4gICAgICAgICAgICBpZiAoaGlkZGVuVHlwZXMuaW5jbHVkZXMoZmlsZS5leHRlbnNpb24udG9Mb3dlckNhc2UoKSkpIGNvbnRpbnVlOyAvLyBGaWx0ZXIgYnkgZXh0ZW5zaW9uXG5cbiAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoTG93ZXIgPSBmaWxlLnBhdGgudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGlmIChpZ25vcmVGb2xkZXJzLnNvbWUoZm9sZGVyID0+IGZvbGRlciAmJiBmaWxlUGF0aExvd2VyLnN0YXJ0c1dpdGgoZm9sZGVyKSkpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBjb25zdCBjZGF0ZSA9IG5ldyBEYXRlKGZpbGUuc3RhdC5jdGltZSk7XG4gICAgICAgICAgICBjb25zdCBkYXRlS2V5ID0gbW9tZW50KGNkYXRlKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFzc2V0Q3JlYXRpb25NYXAuaGFzKGRhdGVLZXkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NldENyZWF0aW9uTWFwLnNldChkYXRlS2V5LCBbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFzc2V0Q3JlYXRpb25NYXAuZ2V0KGRhdGVLZXkpLnB1c2goZmlsZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaW5kcyBhbGwgYXNzZXQgZmlsZXMgaW4gdGhlIHZhdWx0IHRoYXQgYXJlIG5vdCBsaW5rZWQgdG8gZnJvbSBhbnkgTWFya2Rvd24gZmlsZS5cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxTZXQ8c3RyaW5nPj59IEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgU2V0IG9mIHVudXNlZCBhc3NldCBwYXRocy5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRVbnVzZWRBc3NldFBhdGhzKCkge1xuICAgICAgICBjb25zdCBhbGxNYXJrZG93bkZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBjb25zdCByZWZlcmVuY2VkQXNzZXRQYXRocyA9IG5ldyBTZXQoKTtcblxuICAgICAgICBmb3IgKGNvbnN0IG1kRmlsZSBvZiBhbGxNYXJrZG93bkZpbGVzKSB7XG4gICAgICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKG1kRmlsZSk7XG4gICAgICAgICAgICBpZiAoIWNhY2hlKSBjb250aW51ZTtcblxuICAgICAgICAgICAgY29uc3QgbGlua3NBbmRFbWJlZHMgPSBbLi4uKGNhY2hlLmVtYmVkcyB8fCBbXSksIC4uLihjYWNoZS5saW5rcyB8fCBbXSldO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlZiBvZiBsaW5rc0FuZEVtYmVkcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtlZEZpbGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHJlZi5saW5rLCBtZEZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgaWYgKGxpbmtlZEZpbGUgJiYgIWxpbmtlZEZpbGUucGF0aC50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCcubWQnKSkge1xuICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VkQXNzZXRQYXRocy5hZGQobGlua2VkRmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWxsQXNzZXRQYXRocyA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKClcbiAgICAgICAgICAgIC5maWx0ZXIoZmlsZSA9PiAhZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5tZCcpKVxuICAgICAgICAgICAgLm1hcChmaWxlID0+IGZpbGUucGF0aCk7XG5cbiAgICAgICAgY29uc3QgdW51c2VkQXNzZXRQYXRocyA9IG5ldyBTZXQoYWxsQXNzZXRQYXRocy5maWx0ZXIoYXNzZXRQYXRoID0+ICFyZWZlcmVuY2VkQXNzZXRQYXRocy5oYXMoYXNzZXRQYXRoKSkpO1xuICAgICAgICByZXR1cm4gdW51c2VkQXNzZXRQYXRocztcbiAgICB9XG5cbiAgICBfY3JlYXRlQmFja2xpbmtJdGVtKGNvbnRhaW5lciwgbm90ZUZpbGUsIGFzc2V0RmlsZSkge1xuICAgICAgICBjb25zdCBpdGVtRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnb3RoZXItbm90ZXMtcG9wdXAtaXRlbScgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNJbWFnZUFzc2V0KG5vdGVGaWxlKSkge1xuICAgICAgICAgICAgY29uc3QgdGh1bWJuYWlsID0gaXRlbUVsLmNyZWF0ZUVsKCdpbWcnLCB7IGNsczogJ3BvcHVwLWFzc2V0LXRodW1ibmFpbCcgfSk7XG4gICAgICAgICAgICB0aHVtYm5haWwuc3JjID0gdGhpcy5hcHAudmF1bHQuZ2V0UmVzb3VyY2VQYXRoKG5vdGVGaWxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldEljb24oaXRlbUVsLCAnZmlsZS10ZXh0Jyk7IC8vIEZhbGxiYWNrIHRvIGEgZ2VuZXJpYyBpY29uXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0aXRsZVBhdGhXcmFwcGVyID0gaXRlbUVsLmNyZWF0ZURpdih7IGNsczogJ25vdGUtdGl0bGUtcGF0aC13cmFwcGVyJyB9KTtcbiAgICAgICAgdGl0bGVQYXRoV3JhcHBlci5jcmVhdGVEaXYoeyB0ZXh0OiBub3RlRmlsZS5iYXNlbmFtZSwgY2xzOiAnbm90ZS10aXRsZScgfSk7XG4gICAgICAgIGlmIChub3RlRmlsZS5wYXJlbnQgJiYgbm90ZUZpbGUucGFyZW50LnBhdGggIT09ICcvJykge1xuICAgICAgICAgICAgdGl0bGVQYXRoV3JhcHBlci5jcmVhdGVEaXYoeyB0ZXh0OiBub3RlRmlsZS5wYXJlbnQucGF0aCwgY2xzOiAnbm90ZS1wYXRoJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGl0ZW1FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHNwZWNpZmljIGxpbmUgd2hlcmUgdGhlIGFzc2V0IGlzIG1lbnRpb25lZFxuICAgICAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShub3RlRmlsZSk7XG4gICAgICAgICAgICBsZXQgdGFyZ2V0TGluZSA9IDA7XG4gICAgICAgICAgICBpZiAoY2FjaGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhbGxMaW5rcyA9IFsuLi4oY2FjaGUuZW1iZWRzIHx8IFtdKSwgLi4uKGNhY2hlLmxpbmtzIHx8IFtdKV07XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCByZWYgb2YgYWxsTGlua3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlua2VkRmlsZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QocmVmLmxpbmssIG5vdGVGaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGlua2VkRmlsZSAmJiBsaW5rZWRGaWxlLnBhdGggPT09IGFzc2V0RmlsZS5wYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRMaW5lID0gcmVmLnBvc2l0aW9uLnN0YXJ0LmxpbmU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgb3BlbkluTmV3VGFiID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZXNPcGVuQWN0aW9uID09PSAnbmV3LXRhYic7XG4gICAgICAgICAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYob3BlbkluTmV3VGFiKTtcbiAgICAgICAgICAgIGF3YWl0IGxlYWYub3BlbkZpbGUobm90ZUZpbGUsIHsgZVN0YXRlOiB7IGxpbmU6IHRhcmdldExpbmUgfSB9KTsgLy8gT3BlbiBhbmQgc2Nyb2xsIHRvIHRoZSBsaW5lXG4gICAgICAgICAgICB0aGlzLmhpZGVGaWxlUG9wdXAoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaXNJbWFnZUFzc2V0KGZpbGUpIHtcbiAgICAgICAgY29uc3QgaW1hZ2VFeHRlbnNpb25zID0gWydqcGcnLCAnanBlZycsICdwbmcnLCAnZ2lmJywgJ2JtcCcsICdzdmcnXTtcbiAgICAgICAgcmV0dXJuIGltYWdlRXh0ZW5zaW9ucy5pbmNsdWRlcyhmaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaG93Tm90ZVBvcHVwKHRhcmdldEVsLCBub3RlRmlsZSkge1xuICAgICAgICB0aGlzLmhpZGVGaWxlUG9wdXAoKTsgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIHBvcHVwc1xuXG4gICAgICAgIHRoaXMucG9wdXBFbCA9IGNyZWF0ZURpdih7IGNsczogJ290aGVyLW5vdGVzLXBvcHVwJyB9KTtcblxuICAgICAgICAvLyAtLS0gMS4gSGVhZGVyIHdpdGggTm90ZSBCYXNlbmFtZSBhbmQgUGF0aCAtLS1cbiAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gdGhpcy5wb3B1cEVsLmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWhlYWRlcicgfSk7XG4gICAgICAgIGhlYWRlclJvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGlkZUZpbGVQb3B1cCgpKTtcblxuICAgICAgICBjb25zdCB0aXRsZUNvbnRhaW5lciA9IGhlYWRlclJvdy5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC10aXRsZS1jb250YWluZXInIH0pO1xuICAgICAgICAvLyBVc2UgLmJhc2VuYW1lIHRvIHNob3cgbmFtZSB3aXRob3V0IC5tZCBleHRlbnNpb25cbiAgICAgICAgdGl0bGVDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogbm90ZUZpbGUuYmFzZW5hbWUsIGNsczogJ3BvcHVwLWhlYWRlci10aXRsZScgfSk7XG4gICAgICAgIC8vdGl0bGVDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogbm90ZUZpbGUucGF0aCwgY2xzOiAncG9wdXAtaGVhZGVyLXBhdGgnIH0pO1xuXG4gICAgICAgIGNvbnN0IGNsb3NlQnRuID0gaGVhZGVyUm93LmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWNsb3NlLWJ0bicgfSk7XG4gICAgICAgIHNldEljb24oY2xvc2VCdG4sICd4Jyk7XG4gICAgICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oaWRlRmlsZVBvcHVwKCkpO1xuXG4gICAgICAgIGNvbnN0IGNvbnRlbnRXcmFwcGVyID0gdGhpcy5wb3B1cEVsLmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWNvbnRlbnQtd3JhcHBlcicgfSk7XG5cbiAgICAgICAgLy8gLS0tIDIuIEZpbGUgRGV0YWlscyBTZWN0aW9uIC0tLVxuICAgICAgICBjb250ZW50V3JhcHBlci5jcmVhdGVFbCgnaDYnLCB7IHRleHQ6ICdEZXRhaWxzJywgY2xzOiAncG9wdXAtc2VjdGlvbi1oZWFkZXInIH0pO1xuICAgICAgICBjb25zdCBpbmZvQ29udGFpbmVyID0gY29udGVudFdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiAnb3RoZXItbm90ZXMtcG9wdXAtaXRlbSBpcy1jbGlja2FibGUnIH0pO1xuICAgICAgICBpbmZvQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb3BlbkluTmV3VGFiID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZXNPcGVuQWN0aW9uID09PSAnbmV3LXRhYic7XG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihvcGVuSW5OZXdUYWIpLm9wZW5GaWxlKG5vdGVGaWxlKTtcbiAgICAgICAgICAgIHRoaXMuaGlkZUZpbGVQb3B1cCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzZXRJY29uKGluZm9Db250YWluZXIsICdpbmZvJyk7XG4gICAgICAgIGNvbnN0IGluZm9XcmFwcGVyID0gaW5mb0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLXRpdGxlLXBhdGgtd3JhcHBlcicgfSk7XG5cbiAgICAgICAgY29uc3Qgc2l6ZSA9IHRoaXMuZm9ybWF0RmlsZVNpemUgPyB0aGlzLmZvcm1hdEZpbGVTaXplKG5vdGVGaWxlLnN0YXQuc2l6ZSkgOiAnTi9BJztcbiAgICAgICAgY29uc3QgY3JlYXRlZCA9IHRoaXMuZm9ybWF0RGF0ZVRpbWUgPyB0aGlzLmZvcm1hdERhdGVUaW1lKG5ldyBEYXRlKG5vdGVGaWxlLnN0YXQuY3RpbWUpKSA6ICdOL0EnO1xuICAgICAgICBjb25zdCBtb2RpZmllZCA9IHRoaXMuZm9ybWF0RGF0ZVRpbWUgPyB0aGlzLmZvcm1hdERhdGVUaW1lKG5ldyBEYXRlKG5vdGVGaWxlLnN0YXQubXRpbWUpKSA6ICdOL0EnO1xuXG4gICAgICAgIGluZm9XcmFwcGVyLmNyZWF0ZURpdih7IHRleHQ6IGBDcmVhdGVkOiAke2NyZWF0ZWR9YCwgY2xzOiAnbm90ZS1wYXRoJyB9KTtcbiAgICAgICAgaW5mb1dyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogYE1vZGlmaWVkOiAke21vZGlmaWVkfWAsIGNsczogJ25vdGUtcGF0aCcgfSk7XG4gICAgICAgIGluZm9XcmFwcGVyLmNyZWF0ZURpdih7IHRleHQ6IGBTaXplOiAke3NpemV9YCwgY2xzOiAnbm90ZS1wYXRoJyB9KTtcbiAgICAgICAgaW5mb1dyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogYFBhdGg6ICR7bm90ZUZpbGUucGF0aH1gLCBjbHM6ICdub3RlLXBhdGgnIH0pO1xuXG4gICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUobm90ZUZpbGUpO1xuICAgICAgICBsZXQgdGFnc1RleHQgPSAnTm8gdGFncyc7IC8vIEluaXRpYWxpemUgd2l0aCB0aGUgZGVmYXVsdCB2YWx1ZVxuXG4gICAgICAgIGlmIChjYWNoZSAmJiBjYWNoZS50YWdzICYmIGNhY2hlLnRhZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgdGFnU3RyaW5ncyA9IGNhY2hlLnRhZ3MubWFwKHQgPT4gdC50YWcpO1xuICAgICAgICAgICAgLy8gVXNlIGEgU2V0IHRvIGdldCB1bmlxdWUgdmFsdWVzLCB0aGVuIHNvcnQgYWxwaGFiZXRpY2FsbHlcbiAgICAgICAgICAgIGNvbnN0IHVuaXF1ZVRhZ3MgPSBbLi4ubmV3IFNldCh0YWdTdHJpbmdzKV0uc29ydCgpO1xuICAgICAgICAgICAgdGFnc1RleHQgPSB1bmlxdWVUYWdzLmpvaW4oJywgJyk7XG4gICAgICAgIH1cbiAgICAgICAgaW5mb1dyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogYFRhZ3M6ICR7dGFnc1RleHR9YCwgY2xzOiAnbm90ZS1wYXRoJyB9KTtcblxuICAgICAgICBjb250ZW50V3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC1zZXBhcmF0b3InIH0pO1xuICAgICAgICBjb25zdCBmb290ZXIgPSB0aGlzLnBvcHVwRWwuY3JlYXRlRGl2KHsgY2xzOiAncG9wdXAtYWN0aW9ucy1mb290ZXInIH0pO1xuXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGZvb3Rlci5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC1hY3Rpb24taWNvbi1idG4gbW9kLWRhbmdlcicgfSk7XG4gICAgICAgIHNldEljb24oZGVsZXRlQnRuLCAndHJhc2gtMicpOyAvLyBVc2UgdGhlIEx1Y2lkZSAndHJhc2gtMicgaWNvblxuICAgICAgICBkZWxldGVCdG4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0RlbGV0ZSBGaWxlJyk7IC8vIEZvciBhY2Nlc3NpYmlsaXR5XG5cbiAgICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oaWRlRmlsZVBvcHVwKCk7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZURlbGV0ZUZpbGUobm90ZUZpbGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyAtLS0gMy4gTGlua2VkIEFzc2V0cyBTZWN0aW9uIC0tLVxuICAgICAgICBjb25zdCBsaW5rZWRBc3NldHMgPSBbXTtcbiAgICAgICAgaWYgKGNhY2hlKSB7XG4gICAgICAgICAgICBjb25zdCBhbGxMaW5rcyA9IFsuLi4oY2FjaGUuZW1iZWRzIHx8IFtdKSwgLi4uKGNhY2hlLmxpbmtzIHx8IFtdKV07XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlZiBvZiBhbGxMaW5rcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtlZEZpbGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHJlZi5saW5rLCBub3RlRmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICBpZiAobGlua2VkRmlsZSAmJiAhbGlua2VkRmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5tZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbGlua2VkQXNzZXRzLnNvbWUoYXNzZXQgPT4gYXNzZXQucGF0aCA9PT0gbGlua2VkRmlsZS5wYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlua2VkQXNzZXRzLnB1c2gobGlua2VkRmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGlua2VkQXNzZXRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbnRXcmFwcGVyLmNyZWF0ZUVsKCdoNicsIHsgdGV4dDogJ0Fzc2V0cyBpbiBOb3RlJywgY2xzOiAncG9wdXAtc2VjdGlvbi1oZWFkZXInIH0pO1xuICAgICAgICAgICAgbGlua2VkQXNzZXRzLmZvckVhY2goYXNzZXRGaWxlID0+IHtcbiAgICAgICAgICAgICAgICAvLyBBc3N1bWluZyB5b3UgaGF2ZSBhIGhlbHBlciBsaWtlIF9jcmVhdGVCYWNrbGlua0l0ZW0gdGhhdCBzaG93cyBhIHByZXZpZXdcbiAgICAgICAgICAgICAgICB0aGlzLl9jcmVhdGVBc3NldExpc3RJdGVtKGNvbnRlbnRXcmFwcGVyLCBhc3NldEZpbGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAtLS0gNC4gRmluYWxpemUgYW5kIERpc3BsYXkgLS0tXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5wb3B1cEVsKTtcbiAgICAgICAgaWYgKHRoaXMucG9zaXRpb25Qb3B1cCkge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvblBvcHVwKHRhcmdldEVsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucG9wdXBFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4gY2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVvdXQpKTtcbiAgICAgICAgdGhpcy5wb3B1cEVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhpZGVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLmhpZGVGaWxlUG9wdXAoKSwgdGhpcy5wbHVnaW4uc2V0dGluZ3MucG9wdXBIaWRlRGVsYXkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwb3NpdGlvblBvcHVwKHRhcmdldEVsKSB7XG4gICAgICAgIGlmICghdGhpcy5wb3B1cEVsKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgcG9wdXBSZWN0ID0gdGhpcy5wb3B1cEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCB0YXJnZXRSZWN0ID0gdGFyZ2V0RWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IHZpZXdwb3J0V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgY29uc3Qgdmlld3BvcnRIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgIGNvbnN0IG1hcmdpbiA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcHVwR2FwO1xuICAgICAgICBsZXQgZmluYWxUb3AgPSB0YXJnZXRSZWN0LmJvdHRvbSArIG1hcmdpbjtcblxuICAgICAgICAvLyBTdGFuZGFyZCBvdmVyZmxvdyBjaGVjayAoa2VlcCB0aGlzKVxuICAgICAgICBpZiAoZmluYWxUb3AgKyBwb3B1cFJlY3QuaGVpZ2h0ID4gdmlld3BvcnRIZWlnaHQpIHtcbiAgICAgICAgICAgIGZpbmFsVG9wID0gdGFyZ2V0UmVjdC50b3AgLSBwb3B1cFJlY3QuaGVpZ2h0IC0gbWFyZ2luO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTW9iaWxlLXNwZWNpZmljIGxvZ2ljIHRvIGZvcmNlIHRvIGJvdHRvbSBoYWxmXG4gICAgICAgIGlmIChQbGF0Zm9ybS5pc01vYmlsZSkge1xuICAgICAgICAgICAgY29uc3Qgdmlld3BvcnRNaWRwb2ludCA9IHZpZXdwb3J0SGVpZ2h0IC8gMjtcbiAgICAgICAgICAgIGlmIChmaW5hbFRvcCA8IHZpZXdwb3J0TWlkcG9pbnQpIHtcbiAgICAgICAgICAgICAgICBmaW5hbFRvcCA9IHZpZXdwb3J0TWlkcG9pbnQ7IC8vIEZvcmNlIGl0IHRvIHN0YXJ0IGF0IHRoZSBoYWxmd2F5IG1hcmtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEVuc3VyZSBpdCBkb2Vzbid0IGdvIG9mZiB0aGUgdG9wIG9mIHRoZSBzY3JlZW4gYWZ0ZXIgdGhlIG1vYmlsZSBhZGp1c3RtZW50XG4gICAgICAgIGlmIChmaW5hbFRvcCA8IDApIHtcbiAgICAgICAgICAgIGZpbmFsVG9wID0gbWFyZ2luO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRqdXN0IGxlZnQgcG9zaXRpb24gYXMgYmVmb3JlXG4gICAgICAgIGxldCBmaW5hbExlZnQgPSB0YXJnZXRSZWN0LmxlZnQ7XG4gICAgICAgIGlmIChmaW5hbExlZnQgKyBwb3B1cFJlY3Qud2lkdGggPiB2aWV3cG9ydFdpZHRoKSB7XG4gICAgICAgICAgICBmaW5hbExlZnQgPSB0YXJnZXRSZWN0LnJpZ2h0IC0gcG9wdXBSZWN0LndpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaW5hbExlZnQgPCAwKSB7XG4gICAgICAgICAgICBmaW5hbExlZnQgPSBtYXJnaW47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUudG9wID0gYCR7ZmluYWxUb3B9cHhgO1xuICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUubGVmdCA9IGAke2ZpbmFsTGVmdH1weGA7XG4gICAgfVxuXG5cbiAgICBfY3JlYXRlQXNzZXRMaXN0SXRlbShjb250YWluZXIsIGFzc2V0RmlsZSkge1xuICAgICAgICBjb25zdCBpdGVtRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnb3RoZXItbm90ZXMtcG9wdXAtaXRlbSBpcy1jbGlja2FibGUnIH0pO1xuXG4gICAgICAgIC8vIFNob3cgYSB0aHVtYm5haWwgcHJldmlldyBpZiBpdCdzIGFuIGltYWdlIGFzc2V0XG4gICAgICAgIGlmICh0aGlzLmlzSW1hZ2VBc3NldChhc3NldEZpbGUpKSB7XG4gICAgICAgICAgICBjb25zdCB0aHVtYm5haWwgPSBpdGVtRWwuY3JlYXRlRWwoJ2ltZycsIHsgY2xzOiAncG9wdXAtYXNzZXQtdGh1bWJuYWlsJyB9KTtcbiAgICAgICAgICAgIHRodW1ibmFpbC5zcmMgPSB0aGlzLmFwcC52YXVsdC5nZXRSZXNvdXJjZVBhdGgoYXNzZXRGaWxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldEljb24oaXRlbUVsLCAnZmlsZS10ZXh0Jyk7IC8vIEZhbGxiYWNrIGljb24gZm9yIG5vbi1pbWFnZSBmaWxlc1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGlzcGxheSB0aGUgYXNzZXQncyBuYW1lIGFuZCBwYXJlbnQgZm9sZGVyIHBhdGhcbiAgICAgICAgY29uc3QgdGl0bGVQYXRoV3JhcHBlciA9IGl0ZW1FbC5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLXRpdGxlLXBhdGgtd3JhcHBlcicgfSk7XG4gICAgICAgIHRpdGxlUGF0aFdyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogYXNzZXRGaWxlLmJhc2VuYW1lLCBjbHM6ICdub3RlLXRpdGxlJyB9KTtcbiAgICAgICAgaWYgKGFzc2V0RmlsZS5wYXJlbnQgJiYgYXNzZXRGaWxlLnBhcmVudC5wYXRoICE9PSAnLycpIHtcbiAgICAgICAgICAgIHRpdGxlUGF0aFdyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogYXNzZXRGaWxlLnBhcmVudC5wYXRoLCBjbHM6ICdub3RlLXBhdGgnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIGEgY2xpY2sgbGlzdGVuZXIgdG8gb3BlbiB0aGUgYXNzZXQgZmlsZVxuICAgICAgICBpdGVtRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvcGVuSW5OZXdUYWIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hc3NldHNPcGVuQWN0aW9uID09PSAnbmV3LXRhYic7XG4gICAgICAgICAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYob3BlbkluTmV3VGFiKTtcbiAgICAgICAgICAgIGF3YWl0IGxlYWYub3BlbkZpbGUoYXNzZXRGaWxlKTtcbiAgICAgICAgICAgIHRoaXMuaGlkZUZpbGVQb3B1cCgpOyAvLyBDbG9zZSB0aGUgcG9wdXAgYWZ0ZXIgY2xpY2tpbmdcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2hvd0Fzc2V0UG9wdXAodGFyZ2V0RWwsIGFzc2V0RmlsZSkge1xuICAgICAgICB0aGlzLmhpZGVGaWxlUG9wdXAoKTtcbiAgICAgICAgY29uc3QgYmFja2xpbmtzID0gYXdhaXQgdGhpcy5maW5kQXNzZXRCYWNrbGlua3MoYXNzZXRGaWxlKTtcbiAgICAgICAgdGhpcy5wb3B1cEVsID0gY3JlYXRlRGl2KHsgY2xzOiAnb3RoZXItbm90ZXMtcG9wdXAnIH0pO1xuXG4gICAgICAgIC8vIC0tLSAxLiBIZWFkZXIgLS0tXG4gICAgICAgIGNvbnN0IGhlYWRlclJvdyA9IHRoaXMucG9wdXBFbC5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC1oZWFkZXInIH0pO1xuICAgICAgICBjb25zdCB0aXRsZUNvbnRhaW5lciA9IGhlYWRlclJvdy5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC10aXRsZS1jb250YWluZXInIH0pO1xuICAgICAgICB0aXRsZUNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBhc3NldEZpbGUubmFtZSwgY2xzOiAncG9wdXAtaGVhZGVyLXRpdGxlJyB9KTtcbiAgICAgICAgY29uc3QgY2xvc2VCdG4gPSBoZWFkZXJSb3cuY3JlYXRlRGl2KHsgY2xzOiAncG9wdXAtY2xvc2UtYnRuJyB9KTtcbiAgICAgICAgc2V0SWNvbihjbG9zZUJ0biwgJ3gnKTtcbiAgICAgICAgaGVhZGVyUm93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oaWRlRmlsZVBvcHVwKCkpO1xuXG4gICAgICAgIGNvbnN0IGNvbnRlbnRXcmFwcGVyID0gdGhpcy5wb3B1cEVsLmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWNvbnRlbnQtd3JhcHBlcicgfSk7XG5cbiAgICAgICAgLy8gLS0tIDIuIEFzc2V0IERldGFpbHMgJiBQcmV2aWV3IC0tLVxuICAgICAgICBjb250ZW50V3JhcHBlci5jcmVhdGVFbCgnaDYnLCB7IHRleHQ6ICdEZXRhaWxzJywgY2xzOiAncG9wdXAtc2VjdGlvbi1oZWFkZXInIH0pO1xuICAgICAgICBjb25zdCBpbmZvQ29udGFpbmVyID0gY29udGVudFdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiAnb3RoZXItbm90ZXMtcG9wdXAtaXRlbScgfSk7XG4gICAgICAgIGluZm9Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVGaWxlQ2xpY2soYXNzZXRGaWxlLCBlKTtcbiAgICAgICAgICAgIHRoaXMuaGlkZUZpbGVQb3B1cCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5pc0ltYWdlQXNzZXQoYXNzZXRGaWxlKSkge1xuICAgICAgICAgICAgY29uc3QgdGh1bWJuYWlsID0gaW5mb0NvbnRhaW5lci5jcmVhdGVFbCgnaW1nJywgeyBjbHM6ICdwb3B1cC1hc3NldC10aHVtYm5haWwnIH0pO1xuICAgICAgICAgICAgdGh1bWJuYWlsLnNyYyA9IHRoaXMuYXBwLnZhdWx0LmdldFJlc291cmNlUGF0aChhc3NldEZpbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0SWNvbihpbmZvQ29udGFpbmVyLCAnZmlsZS1xdWVzdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZm9XcmFwcGVyID0gaW5mb0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLXRpdGxlLXBhdGgtd3JhcHBlcicgfSk7XG4gICAgICAgIGluZm9XcmFwcGVyLmNyZWF0ZURpdih7IHRleHQ6IGBNb2RpZmllZDogJHt0aGlzLmZvcm1hdERhdGVUaW1lKG5ldyBEYXRlKGFzc2V0RmlsZS5zdGF0Lm10aW1lKSl9YCwgY2xzOiAnbm90ZS1wYXRoJyB9KTtcbiAgICAgICAgaW5mb1dyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogYFNpemU6ICR7dGhpcy5mb3JtYXRGaWxlU2l6ZShhc3NldEZpbGUuc3RhdC5zaXplKX1gLCBjbHM6ICdub3RlLXBhdGgnIH0pO1xuICAgICAgICBpbmZvV3JhcHBlci5jcmVhdGVEaXYoeyB0ZXh0OiBgUGF0aDogJHthc3NldEZpbGUucGF0aH1gLCBjbHM6ICdub3RlLXBhdGgnIH0pO1xuXG4gICAgICAgIC8vIC0tLSAzLiBCYWNrbGlua3MgU2VjdGlvbiAtLS1cbiAgICAgICAgaWYgKGJhY2tsaW5rcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW50V3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC1zZXBhcmF0b3InIH0pO1xuICAgICAgICAgICAgY29udGVudFdyYXBwZXIuY3JlYXRlRWwoJ2g2JywgeyB0ZXh0OiBgVXNlZCBpbiAke2JhY2tsaW5rcy5sZW5ndGh9IG5vdGUocylgLCBjbHM6ICdwb3B1cC1zZWN0aW9uLWhlYWRlcicgfSk7XG4gICAgICAgICAgICBiYWNrbGlua3MuZm9yRWFjaChub3RlRmlsZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY3JlYXRlQmFja2xpbmtJdGVtKGNvbnRlbnRXcmFwcGVyLCBub3RlRmlsZSwgYXNzZXRGaWxlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIDQuIEFjdGlvbnMgU2VjdGlvbiAtLS1cbiAgICAgICAgY29uc3QgZm9vdGVyID0gdGhpcy5wb3B1cEVsLmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWFjdGlvbnMtZm9vdGVyJyB9KTtcblxuICAgICAgICBpZiAoYmFja2xpbmtzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgLy8gTkVXOiBVc2UgYSBkZWRpY2F0ZWQgY2xhc3MgZm9yIHRoZSBpbmZvIG1lc3NhZ2UgZm9yIGVhc3kgc3R5bGluZ1xuICAgICAgICAgICAgY29uc3QgaW5mb01lc3NhZ2UgPSBmb290ZXIuY3JlYXRlRGl2KHsgY2xzOiAncG9wdXAtaW5mby1tZXNzYWdlJyB9KTtcbiAgICAgICAgICAgIHNldEljb24oaW5mb01lc3NhZ2UsICdpbmZvJyk7XG4gICAgICAgICAgICBpbmZvTWVzc2FnZS5jcmVhdGVTcGFuKHsgdGV4dDogJ05vdCB1c2VkIGluIGFueSBub3Rlcy4nIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhpcyBzcGFjZXIgcHVzaGVzIHRoZSBkZWxldGUgYnV0dG9uIHRvIHRoZSBmYXIgcmlnaHRcbiAgICAgICAgZm9vdGVyLmNyZWF0ZURpdih7IHN0eWxlOiAnZmxleC1ncm93OiAxOycgfSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBpY29uIGJ1dHRvblxuICAgICAgICBjb25zdCBkZWxldGVCdG4gPSBmb290ZXIuY3JlYXRlRGl2KHsgY2xzOiAncG9wdXAtYWN0aW9uLWljb24tYnRuIG1vZC1kYW5nZXInIH0pO1xuICAgICAgICBzZXRJY29uKGRlbGV0ZUJ0biwgJ3RyYXNoLTInKTtcbiAgICAgICAgZGVsZXRlQnRuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdEZWxldGUgQXNzZXQnKTtcblxuICAgICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhpZGVGaWxlUG9wdXAoKTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRGVsZXRlRmlsZShhc3NldEZpbGUpO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8vIC0tLSA1LiBGaW5hbGl6ZSBhbmQgRGlzcGxheSAtLS1cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnBvcHVwRWwpO1xuICAgICAgICB0aGlzLnBvc2l0aW9uUG9wdXAodGFyZ2V0RWwpO1xuICAgICAgICB0aGlzLnBvcHVwRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IGNsZWFyVGltZW91dCh0aGlzLmhpZGVUaW1lb3V0KSk7XG4gICAgICAgIHRoaXMucG9wdXBFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oaWRlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5oaWRlRmlsZVBvcHVwKCksIHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcHVwSGlkZURlbGF5KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2hvd3MgYSBjb25maXJtYXRpb24gbW9kYWwgYW5kIGhhbmRsZXMgdGhlIHBlcm1hbmVudCBkZWxldGlvbiBvZiBhbnkgZmlsZS5cbiAgICAgKiBBZnRlciBkZWxldGlvbiwgaXQgcmVmcmVzaGVzIHRoZSBub3RlcyBhbmQgYXNzZXRzIHRhYnMuXG4gICAgICogQHBhcmFtIHtURmlsZX0gZmlsZSAtIFRoZSBmaWxlIChub3RlIG9yIGFzc2V0KSB0byBkZWxldGUuXG4gICAgICovXG4gICAgYXN5bmMgaGFuZGxlRGVsZXRlRmlsZShmaWxlKSB7XG4gICAgICAgIG5ldyBDb25maXJtYXRpb25Nb2RhbChcbiAgICAgICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAgICAgJ0NvbmZpcm0gRGVsZXRpb24nLFxuICAgICAgICAgICAgYEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBwZXJtYW5lbnRseSBkZWxldGUgXCIke2ZpbGUubmFtZX1cIj8gVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZS5gLFxuICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LnRyYXNoKGZpbGUsIHRydWUpOyAvLyB0cnVlIGZvciBwZXJtYW5lbnQgZGVsZXRpb25cbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRGVsZXRlZDogJHtmaWxlLm5hbWV9YCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVmcmVzaCBhbGwgcmVsZXZhbnQgdmlld3NcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZU5vdGVzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9wdWxhdGVBc3NldHMoKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBBbHNvIHJlZnJlc2ggdGhlIGNhbGVuZGFyIHRvIHJlbW92ZSBhbnkgZG90cyBhc3NvY2lhdGVkIHdpdGggdGhlIGZpbGVcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xuXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yIGRlbGV0aW5nIGZpbGU6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkdXJpbmcgZmlsZSBkZWxldGlvbjpcIiwgZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ1llcywgZGVsZXRlJ1xuICAgICAgICApLm9wZW4oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGb3JtYXRzIGEgZGF0ZSB0byBzaG93IHRpbWUgaWYgaXQncyB0b2RheSwgb3RoZXJ3aXNlIHNob3dzIHRoZSBmdWxsIGRhdGUuXG4gICAgICogQHBhcmFtIHtEYXRlfSBkYXRlIFRoZSBkYXRlIHRvIGZvcm1hdC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIGRhdGUgc3RyaW5nLlxuICAgICAqL1xuICAgIGZvcm1hdERhdGVUaW1lKGRhdGUpIHtcbiAgICAgICAgaWYgKCFkYXRlKSByZXR1cm4gJ04vQSc7XG4gICAgICAgIC8vIEVuc3VyZSB5b3UgYXJlIHVzaW5nIHRoZSBtb21lbnQuanMgbGlicmFyeSBpbnN0YW5jZSBhdmFpbGFibGUgaW4gT2JzaWRpYW5cbiAgICAgICAgY29uc3QgbW9tZW50RGF0ZSA9IG1vbWVudChkYXRlKTtcbiAgICAgICAgaWYgKG1vbWVudERhdGUuaXNTYW1lKG5ldyBEYXRlKCksICdkYXknKSkge1xuICAgICAgICAgICAgcmV0dXJuIG1vbWVudERhdGUuZm9ybWF0KCdISDptbScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtb21lbnREYXRlLmZvcm1hdCgnREQtTU0tWVlZWScpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZvcm1hdHMgZmlsZSBzaXplIGluIGJ5dGVzIGludG8gYSBodW1hbi1yZWFkYWJsZSBzdHJpbmcgKEtCLCBNQiwgZXRjLikuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGJ5dGVzIFRoZSBzaXplIG9mIHRoZSBmaWxlIGluIGJ5dGVzLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgZmlsZSBzaXplIHN0cmluZy5cbiAgICAgKi9cbiAgICBmb3JtYXRGaWxlU2l6ZShieXRlcykge1xuICAgICAgICBpZiAoYnl0ZXMgPT09IHVuZGVmaW5lZCB8fCBieXRlcyA9PT0gbnVsbCkgcmV0dXJuICdOL0EnO1xuICAgICAgICBpZiAoYnl0ZXMgPT09IDApIHJldHVybiAnMCBCJztcblxuICAgICAgICBjb25zdCB1bml0cyA9IFsnQicsICdLQicsICdNQicsICdHQicsICdUQiddO1xuICAgICAgICBjb25zdCBpID0gTWF0aC5mbG9vcihNYXRoLmxvZyhieXRlcykgLyBNYXRoLmxvZygxMDI0KSk7XG5cbiAgICAgICAgcmV0dXJuIGAke3BhcnNlRmxvYXQoKGJ5dGVzIC8gTWF0aC5wb3coMTAyNCwgaSkpLnRvRml4ZWQoMikpfSAke3VuaXRzW2ldfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyB0aGUgbGlzdCBvZiByZWNlbnQgYXNzZXRzIGluIHRoZSBcIkFzc2V0c1wiIHRhYi5cbiAgICAgKi9cbiAgICBhc3luYyBwb3B1bGF0ZUFzc2V0cygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmFzc2V0c0NvbnRlbnRFbCkgcmV0dXJuO1xuICAgICAgICB0aGlzLmFzc2V0c0NvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG4gICAgICAgIGxldCB1bnVzZWRBc3NldFBhdGhzID0gbmV3IFNldCgpO1xuICAgICAgICBpZiAoc2V0dGluZ3Muc2hvd1VudXNlZEFzc2V0c0luZGljYXRvcikge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVW51c2VkQXNzZXRDYWNoZVZhbGlkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bnVzZWRBc3NldFBhdGhzQ2FjaGUgPSBhd2FpdCB0aGlzLmdldFVudXNlZEFzc2V0UGF0aHMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVW51c2VkQXNzZXRDYWNoZVZhbGlkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVudXNlZEFzc2V0UGF0aHMgPSB0aGlzLnVudXNlZEFzc2V0UGF0aHNDYWNoZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjdXRvZmYgPSBtb21lbnQoKS5zdGFydE9mKCdkYXknKS5zdWJ0cmFjdChzZXR0aW5ncy5hc3NldHNMb29rYmFja0RheXMgLSAxLCAnZGF5cycpLnZhbHVlT2YoKTtcbiAgICAgICAgY29uc3QgaWdub3JlRm9sZGVycyA9IChzZXR0aW5ncy5hc3NldElnbm9yZUZvbGRlcnMgfHwgW10pLm1hcChmID0+IGYudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLycpID8gZi50b0xvd2VyQ2FzZSgpIDogZi50b0xvd2VyQ2FzZSgpICsgJy8nKTtcbiAgICAgICAgY29uc3QgaGlkZGVuVHlwZXMgPSAoc2V0dGluZ3MuaGlkZGVuQXNzZXRUeXBlcyB8fCBcIlwiKS5zcGxpdCgnLCcpLm1hcChleHQgPT4gZXh0LnRyaW0oKS50b0xvd2VyQ2FzZSgpKS5maWx0ZXIoZXh0ID0+IGV4dC5sZW5ndGggPiAwKTtcblxuICAgICAgICBjb25zdCBhbGxBc3NldHMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpXG4gICAgICAgICAgICAuZmlsdGVyKGZpbGUgPT5cbiAgICAgICAgICAgICAgICAhZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5tZCcpICYmXG4gICAgICAgICAgICAgICAgIWhpZGRlblR5cGVzLmluY2x1ZGVzKGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkpICYmXG4gICAgICAgICAgICAgICAgIWlnbm9yZUZvbGRlcnMuc29tZShmID0+IGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoZikpICYmXG4gICAgICAgICAgICAgICAgKGZpbGUuc3RhdC5tdGltZSA+PSBjdXRvZmYgfHwgZmlsZS5zdGF0LmN0aW1lID49IGN1dG9mZilcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLnN0YXQubXRpbWUgLSBhLnN0YXQubXRpbWUpO1xuXG4gICAgICAgIGNvbnN0IHNlYXJjaFRlcm0gPSB0aGlzLmFzc2V0c1NlYXJjaFRlcm0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgZmlsdGVyZWRBc3NldHMgPSBzZWFyY2hUZXJtID8gYWxsQXNzZXRzLmZpbHRlcihmaWxlID0+IGZpbGUubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0pKSA6IGFsbEFzc2V0cztcbiAgICAgICAgY29uc3Qgc2VhcmNoSW5wdXRFbCA9IHRoaXMuYXNzZXRzU2VhcmNoSW5wdXRFbDtcblxuICAgICAgICBjb25zdCBncm91cHMgPSB7IHRvZGF5OiBbXSwgeWVzdGVyZGF5OiBbXSwgdGhpc1dlZWs6IFtdLCBsYXN0V2VlazogW10sIHRoaXNNb250aDogW10sIG9sZGVyOiBbXSB9O1xuICAgICAgICBjb25zdCBub3cgPSBtb21lbnQoKTtcbiAgICAgICAgZmlsdGVyZWRBc3NldHMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1vZFRpbWUgPSBtb21lbnQoZmlsZS5zdGF0Lm10aW1lKTtcbiAgICAgICAgICAgIGlmIChtb2RUaW1lLmlzU2FtZShub3csICdkYXknKSkgZ3JvdXBzLnRvZGF5LnB1c2goZmlsZSk7XG4gICAgICAgICAgICBlbHNlIGlmIChtb2RUaW1lLmlzU2FtZShub3cuY2xvbmUoKS5zdWJ0cmFjdCgxLCAnZGF5JyksICdkYXknKSkgZ3JvdXBzLnllc3RlcmRheS5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgZWxzZSBpZiAobW9kVGltZS5pc1NhbWUobm93LCAnd2VlaycpKSBncm91cHMudGhpc1dlZWsucHVzaChmaWxlKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKG1vZFRpbWUuaXNTYW1lKG5vdy5jbG9uZSgpLnN1YnRyYWN0KDEsICd3ZWVrJyksICd3ZWVrJykpIGdyb3Vwcy5sYXN0V2Vlay5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgZWxzZSBpZiAobW9kVGltZS5pc1NhbWUobm93LCAnbW9udGgnKSkgZ3JvdXBzLnRoaXNNb250aC5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgZWxzZSBncm91cHMub2xkZXIucHVzaChmaWxlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgZ3JvdXBPcmRlciA9IFtcbiAgICAgICAgICAgIHsga2V5OiAndG9kYXknLCBsYWJlbDogJ1RvZGF5JyB9LCB7IGtleTogJ3llc3RlcmRheScsIGxhYmVsOiAnWWVzdGVyZGF5JyB9LFxuICAgICAgICAgICAgeyBrZXk6ICd0aGlzV2VlaycsIGxhYmVsOiAnVGhpcyBXZWVrJyB9LCB7IGtleTogJ2xhc3RXZWVrJywgbGFiZWw6ICdMYXN0IFdlZWsnIH0sXG4gICAgICAgICAgICB7IGtleTogJ3RoaXNNb250aCcsIGxhYmVsOiAnVGhpcyBNb250aCcgfSwgeyBrZXk6ICdvbGRlcicsIGxhYmVsOiAnT2xkZXInIH0sXG4gICAgICAgIF07XG5cbiAgICAgICAgaWYgKGZpbHRlcmVkQXNzZXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5hc3NldHNDb250ZW50RWwuY3JlYXRlRGl2KHsgdGV4dDogJ05vIGFzc2V0cyBmb3VuZCcsIGNsczogJ3Rhc2stZ3JvdXAtZW1wdHktbWVzc2FnZScgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBncm91cE9yZGVyLmZvckVhY2goZ3JvdXBJbmZvID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFzc2V0c0luR3JvdXAgPSBncm91cHNbZ3JvdXBJbmZvLmtleV07XG4gICAgICAgICAgICBpZiAoYXNzZXRzSW5Hcm91cC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBDb250YWluZXIgPSB0aGlzLmFzc2V0c0NvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLWdyb3VwLWNvbnRhaW5lcicgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNDb2xsYXBzZWQgPSB0aGlzLmNvbGxhcHNlZEFzc2V0R3JvdXBzW2dyb3VwSW5mby5rZXldO1xuICAgICAgICAgICAgICAgIGlmIChpc0NvbGxhcHNlZCkgZ3JvdXBDb250YWluZXIuYWRkQ2xhc3MoJ2lzLWNvbGxhcHNlZCcpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1oZWFkZXInIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlckNvbnRlbnQgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1oZWFkZXItY29udGVudCcgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29sbGFwc2VJY29uID0gaGVhZGVyQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLWdyb3VwLWNvbGxhcHNlLWljb24nIH0pO1xuICAgICAgICAgICAgICAgIHNldEljb24oY29sbGFwc2VJY29uLCAnY2hldnJvbi1kb3duJyk7XG4gICAgICAgICAgICAgICAgaGVhZGVyQ29udGVudC5jcmVhdGVTcGFuKHsgdGV4dDogZ3JvdXBJbmZvLmxhYmVsIH0pO1xuICAgICAgICAgICAgICAgIGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLWdyb3VwLWNvdW50JywgdGV4dDogYXNzZXRzSW5Hcm91cC5sZW5ndGggfSk7XG5cblxuICAgICAgICAgICAgICAgIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVG9nZ2xlIHRoZSBjb2xsYXBzZWQgc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNDdXJyZW50bHlDb2xsYXBzZWQgPSBncm91cENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdpcy1jb2xsYXBzZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgYW5kIHNhdmUgdGhlIHN0YXRlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VkQXNzZXRHcm91cHNbZ3JvdXBJbmZvLmtleV0gPSBpc0N1cnJlbnRseUNvbGxhcHNlZDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBsaXN0V3JhcHBlciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ25vdGUtbGlzdC13cmFwcGVyJyB9KTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQXNzZXRzR3JpZFZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgbGlzdFdyYXBwZXIuYWRkQ2xhc3MoJ2Fzc2V0cy1ncmlkLXZpZXcnKTtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRzSW5Hcm91cC5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBzaW5nbGUgJ2l0ZW0nIHdpbGwgYmUgZWl0aGVyIGEgZ3JpZCBib3ggb3IgYSBsaXN0IHJvdy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmlzQXNzZXRzR3JpZFZpZXdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGxpc3RXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogJ2Fzc2V0LWdyaWQtaXRlbScgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGxpc3RXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogJ25vdGUtcm93JyB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIDEuIFNFVFVQIEVWRU5UIExJU1RFTkVSUyAoZm9yIHRoZSBlbnRpcmUgaXRlbSkgLS0tXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbG9uZ1ByZXNzT2NjdXJyZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFBsYXRmb3JtLmlzTW9iaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTW9iaWxlOiBUb3VjaC1hbmQtaG9sZCBmb3IgcG9wdXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG91Y2hUaW1lcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25nUHJlc3NPY2N1cnJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3VjaFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25nUHJlc3NPY2N1cnJlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dBc3NldFBvcHVwKGl0ZW0sIGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLnNob3dBc3NldEdyaWRQb3B1cChpdGVtLCBmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWxUaW1lciA9ICgpID0+IGNsZWFyVGltZW91dCh0b3VjaFRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgY2FuY2VsVGltZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgY2FuY2VsVGltZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEZXNrdG9wOiBIb3ZlciBmb3IgcG9wdXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmhpZGVUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlRmlsZVBvcHVwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Fzc2V0UG9wdXAoaXRlbSwgZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMuc2hvd0Fzc2V0R3JpZFBvcHVwKGl0ZW0sIGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vdGhlck5vdGVIb3ZlckRlbGF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlRmlsZVBvcHVwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcHVwSGlkZURlbGF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIDIuIFNFVFVQIFRIRSBQUklNQVJZIENMSUNLIEFDVElPTiAodGhlIG9ubHkgY2xpY2sgbGlzdGVuZXIpIC0tLVxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvbmdQcmVzc09jY3VycmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gQSBsb25nIHByZXNzIGp1c3QgaGFwcGVuZWQsIHNvIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgb3BlbiB0aGUgYXNzZXQgZmlsZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUZpbGVDbGljayhmaWxlLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0gMy4gQlVJTEQgVEhFIElURU0nUyBWSVNVQUwgQ09OVEVOVCAod2l0aG91dCBhbnkgbmV3IGxpc3RlbmVycykgLS0tXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0Fzc2V0c0dyaWRWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlldyA9IGl0ZW0uY3JlYXRlRGl2KCdhc3NldC1ncmlkLXByZXZpZXcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0ltYWdlQXNzZXQoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGh1bWJuYWlsID0gcHJldmlldy5jcmVhdGVFbCgnaW1nJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRodW1ibmFpbC5zcmMgPSB0aGlzLmFwcC52YXVsdC5nZXRSZXNvdXJjZVBhdGgoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SWNvbihwcmV2aWV3LCAnZmlsZS1xdWVzdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNyZWF0ZURpdih7IHRleHQ6IGZpbGUubmFtZSwgY2xzOiAnYXNzZXQtZ3JpZC1uYW1lJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIExpc3QgVmlld1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlV3JhcHBlciA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS10aXRsZS13cmFwcGVyJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpY29uQ29udGFpbmVyID0gdGl0bGVXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogJ2Fzc2V0LWljb24tY29udGFpbmVyJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0ltYWdlQXNzZXQoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGh1bWJuYWlsID0gaWNvbkNvbnRhaW5lci5jcmVhdGVFbCgnaW1nJywgeyBjbHM6ICdhc3NldC10aHVtYm5haWwnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWwuc3JjID0gdGhpcy5hcHAudmF1bHQuZ2V0UmVzb3VyY2VQYXRoKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEljb24oaWNvbkNvbnRhaW5lciwgJ2ZpbGUtdGV4dCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aXRsZUVsID0gdGl0bGVXcmFwcGVyLmNyZWF0ZURpdih7IHRleHQ6IGZpbGUubmFtZSwgY2xzOiAnbm90ZS10aXRsZScgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGVFbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFDb250YWluZXIgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogJ25vdGUtbWV0YS1jb250YWluZXInIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFDb250YWluZXIuY3JlYXRlU3Bhbih7IHRleHQ6IHRoaXMuZm9ybWF0RmlsZVNpemUoZmlsZS5zdGF0LnNpemUpLCBjbHM6ICdub3RlLWZpbGUtc2l6ZScgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YUNvbnRhaW5lci5jcmVhdGVTcGFuKHsgdGV4dDogZm9ybWF0RGF0ZVRpbWUobmV3IERhdGUoZmlsZS5zdGF0Lm10aW1lKSksIGNsczogJ25vdGUtbW9kLWRhdGUnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RXcmFwcGVyLnJlbW92ZUNsYXNzKCdhc3NldHMtZ3JpZC12aWV3Jyk7XG4gICAgICAgICAgICAgICAgICAgIGFzc2V0c0luR3JvdXAuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvdyA9IGxpc3RXcmFwcGVyLmNyZWF0ZURpdihcIm5vdGUtcm93XCIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbG9uZ1ByZXNzT2NjdXJyZWQgPSBmYWxzZTsgLy8gRmxhZyB0byB0cmFjayBpZiBhIGxvbmcgcHJlc3MgaGFwcGVuZWRcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFBsYXRmb3JtLmlzTW9iaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRvdWNoVGltZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25nUHJlc3NPY2N1cnJlZCA9IGZhbHNlOyAvLyBSZXNldCB0aGUgZmxhZyBvbiBlYWNoIG5ldyB0b3VjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3VjaFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25nUHJlc3NPY2N1cnJlZCA9IHRydWU7IC8vIFNldCB0aGUgZmxhZzogYSBsb25nIHByZXNzIHdhcyBzdWNjZXNzZnVsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dOb3RlUG9wdXAocm93LCBmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTsgLy8gU3RhbmRhcmQgNTAwbXMgbG9uZy1wcmVzcyBkdXJhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FuY2VsVGltZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0b3VjaFRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgY2FuY2VsVGltZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBjYW5jZWxUaW1lcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2V0dGluZ3Muc2hvd05vdGVUb29sdGlwcykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmhpZGVUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlRmlsZVBvcHVwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdCA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zaG93QXNzZXRHcmlkUG9wdXAocm93LCBmaWxlKSwgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3RoZXJOb3RlSG92ZXJEZWxheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2hvd0Fzc2V0UG9wdXAocm93LCBmaWxlKSwgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3RoZXJOb3RlSG92ZXJEZWxheSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLmhpZGVGaWxlUG9wdXAoKSwgdGhpcy5wbHVnaW4uc2V0dGluZ3MucG9wdXBIaWRlRGVsYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVW51c2VkID0gdW51c2VkQXNzZXRQYXRocy5oYXMoZmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlV3JhcHBlciA9IHJvdy5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLXRpdGxlLXdyYXBwZXInIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWNvbkNvbnRhaW5lciA9IHRpdGxlV3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6ICdhc3NldC1pY29uLWNvbnRhaW5lcicgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0ltYWdlQXNzZXQoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aHVtYm5haWwgPSBpY29uQ29udGFpbmVyLmNyZWF0ZUVsKCdpbWcnLCB7IGNsczogJ2Fzc2V0LXRodW1ibmFpbCcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlsLnNyYyA9IHRoaXMuYXBwLnZhdWx0LmdldFJlc291cmNlUGF0aChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIENMSUNLIElDT04gVE8gT1BFTiBBU1NFVCAtLS1cbiAgICAgICAgICAgICAgICAgICAgICAgIGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7IC8vIFByZXZlbnRzIHRoZSByb3cncyBjbGljayBsaXN0ZW5lciBmcm9tIGFsc28gZmlyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVGaWxlQ2xpY2soZmlsZSwgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVW51c2VkICYmIHNldHRpbmdzLnNob3dVbnVzZWRBc3NldHNJbmRpY2F0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3Rpb25JY29uQ29udGFpbmVyID0gdGl0bGVXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogJ2Fzc2V0LWFjdGlvbi1pY29uJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1bmxpbmtJY29uID0gYWN0aW9uSWNvbkNvbnRhaW5lci5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJY29uKHVubGlua0ljb24sICd1bmxpbmsnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWxldGVJY29uID0gYWN0aW9uSWNvbkNvbnRhaW5lci5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJY29uKGRlbGV0ZUljb24sICd0cmFzaCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZURlbGV0ZUZpbGUoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlRWwgPSB0aXRsZVdyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogZmlsZS5uYW1lLCBjbHM6IFwibm90ZS10aXRsZVwiIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0YUNvbnRhaW5lciA9IHJvdy5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLW1ldGEtY29udGFpbmVyJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFDb250YWluZXIuY3JlYXRlU3Bhbih7IHRleHQ6IHRoaXMuZm9ybWF0RmlsZVNpemUoZmlsZS5zdGF0LnNpemUpLCBjbHM6IFwibm90ZS1maWxlLXNpemVcIiB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFDb250YWluZXIuY3JlYXRlU3Bhbih7IHRleHQ6IGZvcm1hdERhdGVUaW1lKG5ldyBEYXRlKGZpbGUuc3RhdC5tdGltZSkpLCBjbHM6IFwibm90ZS1tb2QtZGF0ZVwiIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0gQ0xJQ0sgUk9XIFRPIEZJTkQgTk9URShTKSAtLS1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhY2tsaW5rcyA9IGF3YWl0IHRoaXMuZmluZEFzc2V0QmFja2xpbmtzKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiYWNrbGlua3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlJ3Mgb25seSBvbmUgYmFja2xpbmssIGZpbmQgaXRzIGxpbmUgbnVtYmVyIGFuZCBzY3JvbGwgdG8gaXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGVGaWxlID0gYmFja2xpbmtzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKG5vdGVGaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRhcmdldExpbmUgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbExpbmtzID0gWy4uLihjYWNoZS5lbWJlZHMgfHwgW10pLCAuLi4oY2FjaGUubGlua3MgfHwgW10pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcmVmIG9mIGFsbExpbmtzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlua2VkRmlsZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QocmVmLmxpbmssIG5vdGVGaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rZWRGaWxlICYmIGxpbmtlZEZpbGUucGF0aCA9PT0gZmlsZS5wYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldExpbmUgPSByZWYucG9zaXRpb24uc3RhcnQubGluZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wZW5Jbk5ld1RhYiA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVzT3BlbkFjdGlvbiA9PT0gJ25ldy10YWInO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYob3BlbkluTmV3VGFiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbGVhZi5vcGVuRmlsZShub3RlRmlsZSwgeyBlU3RhdGU6IHsgbGluZTogdGFyZ2V0TGluZSB9IH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChiYWNrbGlua3MubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dCYWNrbGlua3NQb3B1cChyb3csIGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJUaGlzIGFzc2V0IGlzIG5vdCB1c2VkIGluIGFueSBub3Rlcy5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkS2V5ZG93bkxpc3RlbmVycyhyb3csIHNlYXJjaElucHV0RWwpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGZpbmFsLCBvcmRlcmVkIGxpc3Qgb2YgdGFicyB0byBkaXNwbGF5LCBjb21iaW5pbmcgdXNlci1kZWZpbmVkIG9yZGVyXG4gICAgICogd2l0aCB0aGUgZnVsbCBsaXN0IG9mIHBvc3NpYmxlIHRhYnMgdG8gZW5zdXJlIG5vbmUgYXJlIG1pc3NpbmcuXG4gICAgICogQHJldHVybnMge3N0cmluZ1tdfSBBbiBhcnJheSBvZiB0YWIga2V5cyBpbiB0aGUgY29ycmVjdCBvcmRlci5cbiAgICAgKi9cbiAgICBnZXRGaW5hbFRhYk9yZGVyKCkge1xuICAgICAgICBjb25zdCBhbGxQb3NzaWJsZVRhYnMgPSBPYmplY3Qua2V5cyh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJWaXNpYmlsaXR5KTtcbiAgICAgICAgY29uc3QgdXNlclRhYk9yZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiT3JkZXIgfHwgYWxsUG9zc2libGVUYWJzO1xuICAgICAgICAvLyBVc2UgYSBTZXQgdG8gbWVyZ2UgdGhlIHVzZXIncyBvcmRlciB3aXRoIGFsbCBwb3NzaWJsZSB0YWJzLCBlbnN1cmluZyBubyBkdXBsaWNhdGVzIGFuZCB0aGF0IG5ldyB0YWJzIGFyZSBhcHBlbmRlZC5cbiAgICAgICAgY29uc3QgZmluYWxUYWJPcmRlciA9IFsuLi5uZXcgU2V0KFsuLi51c2VyVGFiT3JkZXIsIC4uLmFsbFBvc3NpYmxlVGFic10pXTtcbiAgICAgICAgcmV0dXJuIGZpbmFsVGFiT3JkZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5vbi1NYXJrZG93biBmaWxlIHRvIHRoZSBgYXNzZXRDcmVhdGlvbk1hcGAuXG4gICAgICogQHBhcmFtIHtURmlsZX0gZmlsZSBUaGUgYXNzZXQgZmlsZSB0byBhZGQuXG4gICAgICovXG4gICAgYWRkRmlsZVRvQXNzZXRNYXAoZmlsZSkge1xuICAgICAgICBpZiAoZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5tZCcpKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgaWdub3JlRm9sZGVycyA9ICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hc3NldElnbm9yZUZvbGRlcnMgfHwgW10pLm1hcChmID0+IGYudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLycpID8gZi50b0xvd2VyQ2FzZSgpIDogZi50b0xvd2VyQ2FzZSgpICsgJy8nKTtcbiAgICAgICAgY29uc3QgZmlsZVBhdGhMb3dlciA9IGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAoaWdub3JlRm9sZGVycy5zb21lKGZvbGRlciA9PiBmb2xkZXIgJiYgZmlsZVBhdGhMb3dlci5zdGFydHNXaXRoKGZvbGRlcikpKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgY2RhdGUgPSBuZXcgRGF0ZShmaWxlLnN0YXQuY3RpbWUpO1xuICAgICAgICBjb25zdCBkYXRlS2V5ID0gbW9tZW50KGNkYXRlKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xuICAgICAgICBpZiAoIXRoaXMuYXNzZXRDcmVhdGlvbk1hcC5oYXMoZGF0ZUtleSkpIHtcbiAgICAgICAgICAgIHRoaXMuYXNzZXRDcmVhdGlvbk1hcC5zZXQoZGF0ZUtleSwgW10pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFzc2V0cyA9IHRoaXMuYXNzZXRDcmVhdGlvbk1hcC5nZXQoZGF0ZUtleSk7XG4gICAgICAgIGlmICghYXNzZXRzLnNvbWUoZiA9PiBmLnBhdGggPT09IGZpbGUucGF0aCkpIHtcbiAgICAgICAgICAgIGFzc2V0cy5wdXNoKGZpbGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIG5vbi1NYXJrZG93biBmaWxlIGZyb20gdGhlIGBhc3NldENyZWF0aW9uTWFwYCBieSBpdHMgcGF0aC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZVBhdGggVGhlIHBhdGggb2YgdGhlIGFzc2V0IGZpbGUgdG8gcmVtb3ZlLlxuICAgICAqL1xuICAgIHJlbW92ZUZpbGVGcm9tQXNzZXRNYXAoZmlsZVBhdGgpIHtcbiAgICAgICAgaWYgKGZpbGVQYXRoLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5tZCcpKSByZXR1cm47XG5cbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBmaWxlc10gb2YgdGhpcy5hc3NldENyZWF0aW9uTWFwLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlZEZpbGVzID0gZmlsZXMuZmlsdGVyKGYgPT4gZi5wYXRoICE9PSBmaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAodXBkYXRlZEZpbGVzLmxlbmd0aCA8IGZpbGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICh1cGRhdGVkRmlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXRDcmVhdGlvbk1hcC5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2V0Q3JlYXRpb25NYXAuc2V0KGtleSwgdXBkYXRlZEZpbGVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGhvdmVyIGV2ZW50IGxpc3RlbmVycyB0byB0YWJsZSBoZWFkZXJzIHRvIGhpZ2hsaWdodCB0aGUgZW50aXJlIGNvbHVtbi5cbiAgICAgKiBUaGlzIHZlcnNpb24gZml4ZXMgdHdvIGJ1Z3M6XG4gICAgICogMS4gQSByYWNlIGNvbmRpdGlvbiBvbiBpbml0aWFsIGxvYWQgYnkgcXVlcnlpbmcgZm9yIHJvd3MgaW5zaWRlIHRoZSBldmVudCBsaXN0ZW5lci5cbiAgICAgKiAyLiBBIHN0YXRlIGNvbmZsaWN0IGJ5IGludGVsbGlnZW50bHkgcmVzdG9yaW5nIHRoZSBjdXJyZW50IHdlZWsgaGlnaGxpZ2h0IG9uIG1vdXNlbGVhdmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0hUTUxUYWJsZVJvd0VsZW1lbnR9IGhlYWRlclJvdyBUaGUgPHRyPiBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIGhlYWRlciBjZWxscy5cbiAgICAgKiBAcGFyYW0ge0hUTUxUYWJsZVNlY3Rpb25FbGVtZW50fSB0YWJsZUJvZHkgVGhlIDx0Ym9keT4gZWxlbWVudCBvZiB0aGUgY2FsZW5kYXIgdGFibGUuXG4gICAgICovXG4gICAgYWRkQ29sdW1uSGlnaGxpZ2h0aW5nKGhlYWRlclJvdywgdGFibGVCb2R5KSB7XG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQ29sdW1uSGlnaGxpZ2h0KSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgaGVhZGVyQ2VsbHMgPSBoZWFkZXJSb3cucXVlcnlTZWxlY3RvckFsbChcInRoXCIpO1xuICAgICAgICBjb25zdCBoaWdobGlnaHRDb2xvciA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd0aGVtZS1kYXJrJylcbiAgICAgICAgICAgID8gdGhpcy5wbHVnaW4uc2V0dGluZ3Mucm93SGlnaGxpZ2h0Q29sb3JEYXJrXG4gICAgICAgICAgICA6IHRoaXMucGx1Z2luLnNldHRpbmdzLnJvd0hpZ2hsaWdodENvbG9yTGlnaHQ7XG5cbiAgICAgICAgaGVhZGVyQ2VsbHMuZm9yRWFjaCgodGgsIGNvbEluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoLnRleHRDb250ZW50LnRyaW0oKSkgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvd3MgPSB0YWJsZUJvZHkucXVlcnlTZWxlY3RvckFsbCgndHInKTtcbiAgICAgICAgICAgICAgICB0aC5jbGFzc0xpc3QuYWRkKCdjb2x1bW4taG92ZXInKTtcbiAgICAgICAgICAgICAgICByb3dzLmZvckVhY2gocm93ID0+IHJvdy5jaGlsZHJlbltjb2xJbmRleF0/LmNsYXNzTGlzdC5hZGQoJ2NvbHVtbi1ob3ZlcicpKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvd3MgPSB0YWJsZUJvZHkucXVlcnlTZWxlY3RvckFsbCgndHInKTtcbiAgICAgICAgICAgICAgICB0aC5jbGFzc0xpc3QucmVtb3ZlKCdjb2x1bW4taG92ZXInKTtcbiAgICAgICAgICAgICAgICByb3dzLmZvckVhY2gocm93ID0+IHJvdy5jaGlsZHJlbltjb2xJbmRleF0/LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbHVtbi1ob3ZlcicpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFBvcHVsYXRlcyBhIGdpdmVuIEhUTUwgZWxlbWVudCB3aXRoIHRoZSBzdHlsZWQgbW9udGggYW5kIHllYXIgdGl0bGUsXG4gICAgICogcmVzcGVjdGluZyBhbGwgdXNlciBzZXR0aW5ncy4gVGhpcyBpcyB0aGUgc2luZ2xlIHNvdXJjZSBvZiB0cnV0aCBmb3IgYWxsIHRpdGxlcy5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXRFbCBUaGUgZWxlbWVudCB0byBwb3B1bGF0ZS5cbiAgICAgKiBAcGFyYW0ge0RhdGV9IGRhdGUgVGhlIGRhdGUgdG8gZGlzcGxheS5cbiAgICAgKi9cbiAgICBwb3B1bGF0ZVN0eWxlZFRpdGxlKHRhcmdldEVsLCBkYXRlKSB7XG4gICAgICAgIGlmICghdGFyZ2V0RWwpIHJldHVybjtcblxuICAgICAgICB0YXJnZXRFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnN0IGZvcm1hdCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm1vbnRoVGl0bGVGb3JtYXQgfHwgXCJNTU1NIFlZWVlcIjtcbiAgICAgICAgY29uc3QgZm9ybWF0UGFydHMgPSBmb3JtYXQuc3BsaXQoJyAnKTtcblxuICAgICAgICBmb3JtYXRQYXJ0cy5mb3JFYWNoKChwYXJ0LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNZZWFyID0gL1tZeV0vLnRlc3QocGFydCk7XG5cbiAgICAgICAgICAgIHRhcmdldEVsLmNyZWF0ZVNwYW4oe1xuICAgICAgICAgICAgICAgIGNsczogaXNZZWFyID8gJ21vbnRoLXRpdGxlLXllYXInIDogJ21vbnRoLXRpdGxlLW1vbnRoJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBtb21lbnQoZGF0ZSkuZm9ybWF0KHBhcnQpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBub3QgdGhlIGxhc3QgcGFydCwgYXBwZW5kIGEgTk9OLUJSRUFLSU5HIHNwYWNlLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgb25seSByZWxpYWJsZSB3YXkgdG8gZW5zdXJlIGEgc3BhY2UgaXMgcmVuZGVyZWQgaW4gYSBmbGV4IGNvbnRhaW5lci5cbiAgICAgICAgICAgIGlmIChpbmRleCA8IGZvcm1hdFBhcnRzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRFbC5hcHBlbmRUZXh0KCdcXHUwMEEwJyk7IC8vIFRoaXMgaXMgdGhlIHVuaWNvZGUgZm9yIGEgbm9uLWJyZWFraW5nIHNwYWNlICgmbmJzcDspXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogRm9ybWF0cyB0aGUgcGVyaW9kIGFuZCB3ZWVrIG51bWJlcnMgYWNjb3JkaW5nIHRvIHRoZSB1c2VyJ3MgcHJlZmVyZW5jZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGVyaW9kIFRoZSBwZXJpb2QgbnVtYmVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3ZWVrIFRoZSB3ZWVrIG51bWJlci5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIHN0cmluZy5cbiAgICAgKi9cbiAgICBmb3JtYXRQVyhwZXJpb2QsIHdlZWspIHsgcmV0dXJuIHRoaXMucGx1Z2luLnNldHRpbmdzLnB3Rm9ybWF0LnJlcGxhY2UoJyMnLCBwZXJpb2QpLnJlcGxhY2UoJyMnLCB3ZWVrKTsgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyB0aGUgaW5maW5pdGUtc2Nyb2xsaW5nIHZlcnRpY2FsIGNhbGVuZGFyIHZpZXcuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIFRoZSBwYXJlbnQgZWxlbWVudCB0byByZW5kZXIgaW50by5cbiAgICAgKi9cbiAgICByZW5kZXJWZXJ0aWNhbENhbGVuZGFyKGNvbnRhaW5lcikge1xuICAgICAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyPy5kaXNjb25uZWN0KCk7XG5cbiAgICAgICAgLy8gRklYIDE6IFRoZSB2YXJpYWJsZSBpcyBub3cgYSBjbGFzcyBwcm9wZXJ0eSBgdGhpcy52ZXJ0aWNhbFNjcm9sbGVyRWxgXG4gICAgICAgIHRoaXMudmVydGljYWxTY3JvbGxlckVsID0gY29udGFpbmVyLmNyZWF0ZURpdihcInZlcnRpY2FsLWNhbGVuZGFyLXNjcm9sbGVyXCIpO1xuXG4gICAgICAgIGNvbnN0IGluaXRpYWxNb250aElkID0gYG1vbnRoLSR7dGhpcy5kaXNwbGF5ZWRNb250aC5nZXRGdWxsWWVhcigpfS0ke3RoaXMuZGlzcGxheWVkTW9udGguZ2V0TW9udGgoKX1gO1xuICAgICAgICBjb25zdCBudW1Nb250aHNBZnRlciA9IDEyO1xuICAgICAgICBmb3IgKGxldCBpID0gLTY7IGkgPD0gbnVtTW9udGhzQWZ0ZXI7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgbW9udGhEYXRlID0gbmV3IERhdGUodGhpcy5kaXNwbGF5ZWRNb250aC5nZXRGdWxsWWVhcigpLCB0aGlzLmRpc3BsYXllZE1vbnRoLmdldE1vbnRoKCkgKyBpLCAxKTtcblxuICAgICAgICAgICAgLy8gRklYIDI6IFVzZSB0aGUgbmV3IGNsYXNzIHByb3BlcnR5IGhlcmVcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoV3JhcHBlciA9IHRoaXMudmVydGljYWxTY3JvbGxlckVsLmNyZWF0ZURpdih7IGNsczogXCJ2ZXJ0aWNhbC1tb250aC13cmFwcGVyXCIgfSk7XG5cbiAgICAgICAgICAgIG1vbnRoV3JhcHBlci5pZCA9IGBtb250aC0ke21vbnRoRGF0ZS5nZXRGdWxsWWVhcigpfS0ke21vbnRoRGF0ZS5nZXRNb250aCgpfWA7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgbW9udGggdGl0bGUgaGVhZGluZyBmb3IgdGhlIHZlcnRpY2FsIGxpc3QuXG4gICAgICAgICAgICBjb25zdCBtb250aFRpdGxlRWwgPSBtb250aFdyYXBwZXIuY3JlYXRlRWwoXCJoM1wiLCB7XG4gICAgICAgICAgICAgICAgY2xzOiBcInZlcnRpY2FsLW1vbnRoLXRpdGxlXCIsXG4gICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBpbml0aWFsIHRleHQgdXNpbmcgdGhlIHNpbXBsZSBmb3JtYXR0ZXIuXG4gICAgICAgICAgICAgICAgdGV4dDogZm9ybWF0TW9udGhUaXRsZShtb250aERhdGUsIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vbnRoVGl0bGVGb3JtYXQpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG1vbnRoVGl0bGVFbC5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcblxuICAgICAgICAgICAgbGV0IGhvdmVyVGltZW91dDtcblxuICAgICAgICAgICAgbW9udGhUaXRsZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQWZ0ZXIgNDAwbXMsIHVzZSBvdXIgbmV3IGhlbHBlciB0byBidWlsZCB0aGUgcGVyZmVjdGx5IGNvbnNpc3RlbnQsIHN0eWxlZCB0aXRsZS5cbiAgICAgICAgICAgICAgICBob3ZlclRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZVN0eWxlZFRpdGxlKG1vbnRoVGl0bGVFbCwgbW9udGhEYXRlKTtcbiAgICAgICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG1vbnRoVGl0bGVFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChob3ZlclRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIC8vIE9uIGxlYXZlLCByZXZlcnQgYmFjayB0byB0aGUgc2ltcGxlIHRleHQgZm9ybWF0LlxuICAgICAgICAgICAgICAgIG1vbnRoVGl0bGVFbC5lbXB0eSgpO1xuICAgICAgICAgICAgICAgIG1vbnRoVGl0bGVFbC5zZXRUZXh0KGZvcm1hdE1vbnRoVGl0bGUobW9udGhEYXRlLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb250aFRpdGxlRm9ybWF0KSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbW9udGhUaXRsZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIENsaWNrIGxvZ2ljIHJlbWFpbnMgdGhlIHNhbWUuXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5ZWRNb250aCA9IG1vbnRoRGF0ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVmVydGljYWxWaWV3ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCB0YWJsZSA9IG1vbnRoV3JhcHBlci5jcmVhdGVFbChcInRhYmxlXCIsIHsgY2xzOiBcInBlcmlvZC1jYWxlbmRhci10YWJsZVwiIH0pO1xuICAgICAgICAgICAgY29uc3QgdGhlYWQgPSB0YWJsZS5jcmVhdGVFbChcInRoZWFkXCIpO1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gdGhlYWQuY3JlYXRlRWwoXCJ0clwiKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dQV0NvbHVtbikge1xuICAgICAgICAgICAgICAgIGhlYWRlclJvdy5jcmVhdGVFbChcInRoXCIsIHsgdGV4dDogXCIgXCIgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1dlZWtOdW1iZXJzKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUm93LmNyZWF0ZUVsKFwidGhcIiwgeyB0ZXh0OiB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrTnVtYmVyQ29sdW1uTGFiZWwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzdGFydERheU9mZnNldCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtTdGFydERheSA9PT0gJ21vbmRheScgPyAxIDogMDtcbiAgICAgICAgICAgIGZvciAobGV0IGQgPSAwOyBkIDwgNzsgZCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF5SW5kZXggPSAoZCArIHN0YXJ0RGF5T2Zmc2V0KSAlIDc7XG4gICAgICAgICAgICAgICAgaGVhZGVyUm93LmNyZWF0ZUVsKFwidGhcIiwgeyB0ZXh0OiBtb21lbnQoKS5kYXkoZGF5SW5kZXgpLmZvcm1hdChcImRkZFwiKS50b1VwcGVyQ2FzZSgpIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgdG9kYXkncyBoZWFkZXIgaGlnaGxpZ2h0XG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0VG9kYXlEYXlIZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1vbnRoRGF0ZS5nZXRGdWxsWWVhcigpID09PSB0b2RheS5nZXRGdWxsWWVhcigpICYmIG1vbnRoRGF0ZS5nZXRNb250aCgpID09PSB0b2RheS5nZXRNb250aCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvZGF5SGVhZGVySW5kZXggPSBBcnJheS5mcm9tKGhlYWRlclJvdy5jaGlsZHJlbikuZmluZEluZGV4KHRoID0+IHRoLnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCkgPT09IG1vbWVudCh0b2RheSkuZm9ybWF0KFwiZGRkXCIpLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9kYXlIZWFkZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlclJvdy5jaGlsZHJlblt0b2RheUhlYWRlckluZGV4XS5hZGRDbGFzcyhcInRvZGF5LWRheS1oZWFkZXJcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHRib2R5ID0gdGFibGUuY3JlYXRlRWwoXCJ0Ym9keVwiKTtcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aEdyaWQobW9udGhEYXRlLCB0Ym9keSk7XG4gICAgICAgICAgICB0aGlzLmFkZENvbHVtbkhpZ2hsaWdodGluZyhoZWFkZXJSb3csIHRib2R5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFmdGVyIHRoZSBsYXlvdXQgaXMgcmVhZHksIHNjcm9sbCB0aGUgaW5pdGlhbCBtb250aCBpbnRvIHZpZXcuXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcbiAgICAgICAgICAgIC8vIFNFVCBGTEFHIGJlZm9yZSBzY3JvbGxpbmdcbiAgICAgICAgICAgIHRoaXMuaXNQcm9ncmFtbWF0aWNTY3JvbGwgPSB0cnVlO1xuXG4gICAgICAgICAgICBjb25zdCBpbml0aWFsRWwgPSB0aGlzLnZlcnRpY2FsU2Nyb2xsZXJFbC5xdWVyeVNlbGVjdG9yKGAjJHtpbml0aWFsTW9udGhJZH1gKTtcbiAgICAgICAgICAgIGlmIChpbml0aWFsRWwpIHtcbiAgICAgICAgICAgICAgICBpbml0aWFsRWwuc2Nyb2xsSW50b1ZpZXcoeyBibG9jazogJ3N0YXJ0JyB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ0xFQVIgRkxBRyBhZnRlciBzY3JvbGwgY29tcGxldGVzXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzUHJvZ3JhbW1hdGljU2Nyb2xsID0gZmFsc2U7XG4gICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBVc2UgYSBzY3JvbGwgbGlzdGVuZXIgdG8gdXBkYXRlIHRoZSBtYWluIGhlYWRlciB0aXRsZS5cbiAgICAgICAgdGhpcy52ZXJ0aWNhbFNjcm9sbGVyRWwuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xuXG4gICAgICAgICAgICAvLyBpZiBwcm9ncmFtbWF0aWMgc2Nyb2xsIGlzIGluIHByb2dyZXNzLCBkbyBub3RoaW5nXG4gICAgICAgICAgICBpZiAodGhpcy5pc1Byb2dyYW1tYXRpY1Njcm9sbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGl0bGVVcGRhdGVUaW1lb3V0KTtcbiAgICAgICAgICAgIHRoaXMudGl0bGVVcGRhdGVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHRvcG1vc3RWaXNpYmxlTW9udGggPSBudWxsO1xuICAgICAgICAgICAgICAgIGxldCBzbWFsbGVzdFRvcFZhbHVlID0gSW5maW5pdHk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBzY3JvbGxlclRvcCA9IHRoaXMudmVydGljYWxTY3JvbGxlckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcbiAgICAgICAgICAgICAgICBjb25zdCBtb250aEVsZW1lbnRzID0gdGhpcy52ZXJ0aWNhbFNjcm9sbGVyRWwucXVlcnlTZWxlY3RvckFsbCgnLnZlcnRpY2FsLW1vbnRoLXdyYXBwZXInKTtcblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbW9udGhFbCBvZiBtb250aEVsZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vbnRoVG9wID0gbW9udGhFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb250aFRvcCA+PSBzY3JvbGxlclRvcCAmJiBtb250aFRvcCA8IHNtYWxsZXN0VG9wVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtYWxsZXN0VG9wVmFsdWUgPSBtb250aFRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcG1vc3RWaXNpYmxlTW9udGggPSBtb250aEVsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0b3Btb3N0VmlzaWJsZU1vbnRoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFtfLCB5ZWFyLCBtb250aF0gPSB0b3Btb3N0VmlzaWJsZU1vbnRoLmlkLnNwbGl0KCctJykubWFwKE51bWJlcik7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpc3BsYXllZE1vbnRoLmdldEZ1bGxZZWFyKCkgIT09IHllYXIgfHwgdGhpcy5kaXNwbGF5ZWRNb250aC5nZXRNb250aCgpICE9PSBtb250aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5ZWRNb250aCA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTW9udGhUaXRsZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUb2RheUJ0bkFyaWFMYWJlbCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgb25jbG9zZSgpIHtcbiAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcj8uZGlzY29ubmVjdCgpO1xuICAgICAgICBpZiAodGhpcy5kYWlseVJlZnJlc2hUaW1lb3V0KSBjbGVhclRpbWVvdXQodGhpcy5kYWlseVJlZnJlc2hUaW1lb3V0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAqIEEgaGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIHN0YW5kYXJkaXplZCBzZWFyY2ggaW5wdXQgd2l0aCBhIGNsZWFyIGJ1dHRvbi5cbiAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lciBUaGUgcGFyZW50IGVsZW1lbnQuXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gcGxhY2Vob2xkZXIgVGhlIHBsYWNlaG9sZGVyIHRleHQgZm9yIHRoZSBpbnB1dC5cbiAgICAqIEBwYXJhbSB7KHRlcm06IHN0cmluZykgPT4gdm9pZH0gb25JbnB1dCBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gdG8gZXhlY3V0ZSBvbiBpbnB1dC5cbiAgICAqIEByZXR1cm5zIHtIVE1MSW5wdXRFbGVtZW50fSBUaGUgY3JlYXRlZCBpbnB1dCBlbGVtZW50LlxuICAgICovXG4gICAgc2V0dXBTZWFyY2hJbnB1dChjb250YWluZXIsIHBsYWNlaG9sZGVyLCBvbklucHV0KSB7XG4gICAgICAgIGNvbnN0IGlucHV0RWwgPSBjb250YWluZXIuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBwbGFjZWhvbGRlcixcbiAgICAgICAgICAgIGNsczogXCJwbS1zZWFyY2gtaW5wdXRcIiAvLyBVc2UgYSBjb25zaXN0ZW50IGNsYXNzXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgY2xlYXIgYnV0dG9uIGluc2lkZSB0aGlzIGZ1bmN0aW9uXG4gICAgICAgIGNvbnN0IGNsZWFyQnV0dG9uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzZWFyY2gtaW5wdXQtY2xlYXItYnRuXCIgfSk7XG4gICAgICAgIHNldEljb24oY2xlYXJCdXR0b24sIFwieFwiKTtcblxuICAgICAgICBjbGVhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHdhc0ZvY3VzZWQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBpbnB1dEVsO1xuXG4gICAgICAgICAgICBpbnB1dEVsLnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgIGlucHV0RWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2lucHV0JykpO1xuXG4gICAgICAgICAgICBpZiAod2FzRm9jdXNlZCkge1xuICAgICAgICAgICAgICAgIGlucHV0RWwuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRlcm0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgIGNsZWFyQnV0dG9uLnN0eWxlLnZpc2liaWxpdHkgPSB0ZXJtID8gJ3Zpc2libGUnIDogJ2hpZGRlbic7XG4gICAgICAgICAgICBvbklucHV0KHRlcm0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGlucHV0RWwudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgICAgIGlucHV0RWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2lucHV0JykpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0Fycm93RG93bicpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudEVsID0gdGhpcy5hY3RpdmVUYWIgPT09ICdub3RlcycgPyB0aGlzLm5vdGVzQ29udGVudEVsIDogdGhpcy50YXNrc0NvbnRlbnRFbDtcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdEl0ZW0gPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcignLm5vdGUtcm93LCAudGFzay1yb3cnKTtcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RJdGVtKSBmaXJzdEl0ZW0uZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMuYXBwLmlzTW9iaWxlKSB7XG4gICAgICAgICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJXYXNDb2xsYXBzZWRGb3JFZGl0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGNhbGwgaGFuZGxlcyBzdGF0ZSwgY2xhc3MsIEFORCBpY29uLlxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQ2FsZW5kYXIodHJ1ZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IHJhY2UgY29uZGl0aW9uXG4gICAgICAgICAgICAgICAgaWYgKGUucmVsYXRlZFRhcmdldCA9PT0gdGhpcy5jb2xsYXBzZUJ0bikgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCBwcm9jZWVkIHdpdGggYXV0by1leHBhbnNpb24gbG9naWMuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FsZW5kYXJXYXNDb2xsYXBzZWRGb3JFZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJXYXNDb2xsYXBzZWRGb3JFZGl0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQ2FsZW5kYXIoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnB1dEVsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdXAgdGhlIHRhYiBjb250YWluZXIsIGNyZWF0aW5nIGRyYWdnYWJsZSB0YWJzIHdpdGggY2xpY2sgYW5kIGRvdWJsZS1jbGljayBiZWhhdmlvcnMuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFiQ29udGFpbmVyIFRoZSBwYXJlbnQgZWxlbWVudCBmb3IgdGhlIHRhYnMuXG4gICAgICogQHBhcmFtIHsodGFiOiBzdHJpbmcpID0+IHZvaWR9IHN3aXRjaFRhYnMgVGhlIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiBhIHRhYiBpcyBjbGlja2VkLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywgSFRNTEVsZW1lbnQ+fSBBIG1hcCBvZiB0YWIga2V5cyB0byB0aGVpciBjb3JyZXNwb25kaW5nIEhUTUwgZWxlbWVudHMuXG4gICAgICovXG4gICAgc2V0dXBEcmFnZ2FibGVUYWJzKHRhYkNvbnRhaW5lciwgc3dpdGNoVGFicykge1xuICAgICAgICB0YWJDb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgY29uc3QgdGFiT3JkZXIgPSB0aGlzLmdldEZpbmFsVGFiT3JkZXIoKVxuICAgICAgICAgICAgLmZpbHRlcihrZXkgPT4gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiVmlzaWJpbGl0eVtrZXldKTtcblxuICAgICAgICBjb25zdCB0YWJFbGVtZW50cyA9IHt9O1xuICAgICAgICBjb25zdCB0b29sdGlwTGFiZWxzID0ge1xuICAgICAgICAgICAgc2NyYXRjaDogXCJTY3JhdGNoUGFkXCIsXG4gICAgICAgICAgICBub3RlczogXCJSZWNlbnQgTm90ZXNcIixcbiAgICAgICAgICAgIHBpbm5lZDogXCJQaW5uZWQgTm90ZXNcIixcbiAgICAgICAgICAgIHRhc2tzOiBcIlRhc2tzXCIsXG4gICAgICAgICAgICBhc3NldHM6IFwiQXNzZXRzXCJcbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB0YWJPcmRlcikge1xuICAgICAgICAgICAgY29uc3QgdGFiRWwgPSB0YWJDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcIm5vdGUtdGFiXCIgfSk7XG4gICAgICAgICAgICB0aGlzLmdldFRhYkxhYmVsKHRhYkVsLCBrZXkpO1xuICAgICAgICAgICAgdGFiRWwuZGF0YXNldC50YWJLZXkgPSBrZXk7XG5cbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxUb29sdGlwID0ga2V5ID09PSAnbm90ZXMnXG4gICAgICAgICAgICAgICAgPyAodGhpcy5ub3Rlc1ZpZXdNb2RlID09PSAncGlubmVkJyA/IHRvb2x0aXBMYWJlbHMucGlubmVkIDogdG9vbHRpcExhYmVscy5ub3RlcylcbiAgICAgICAgICAgICAgICA6IHRvb2x0aXBMYWJlbHNba2V5XTtcbiAgICAgICAgICAgIHRhYkVsLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGluaXRpYWxUb29sdGlwKTtcblxuICAgICAgICAgICAgdGFiRWxlbWVudHNba2V5XSA9IHRhYkVsO1xuXG4gICAgICAgICAgICB0YWJFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBzZWNvbmQgY2xpY2sgb24gYW4gYWxyZWFkeSBhY3RpdmUgdGFiLCB3aGljaCB0cmlnZ2VycyBhIHNwZWNpYWwgYWN0aW9uLlxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSAnc2NyYXRjaCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3BlblNjcmF0Y2hwYWRGaWxlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAndGFza3MnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50R3JvdXBCeSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tHcm91cEJ5O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3R3JvdXBCeSA9IGN1cnJlbnRHcm91cEJ5ID09PSAnZGF0ZScgPyAndGFnJyA6ICdkYXRlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tHcm91cEJ5ID0gbmV3R3JvdXBCeTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRUYWJMYWJlbCh0YWJFbCwgJ3Rhc2tzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBvcHVsYXRlVGFza3MoKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2Fzc2V0cycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNBc3NldHNHcmlkVmlldyA9ICF0aGlzLmlzQXNzZXRzR3JpZFZpZXc7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFRhYkxhYmVsKHRhYkVsLCAnYXNzZXRzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBvcHVsYXRlQXNzZXRzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQXNzZXRzR3JpZFZpZXcgPyAnZ3JpZCcgOiAnbGlzdCc7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnbm90ZXMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGVzVmlld01vZGUgPSB0aGlzLm5vdGVzVmlld01vZGUgPT09ICdyZWNlbnQnID8gJ3Bpbm5lZCcgOiAncmVjZW50JztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVzVmlld01vZGUgPSB0aGlzLm5vdGVzVmlld01vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VGFiTGFiZWwodGFiRWwsICdub3RlcycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VG9vbHRpcCA9IHRoaXMubm90ZXNWaWV3TW9kZSA9PT0gJ3Bpbm5lZCcgPyB0b29sdGlwTGFiZWxzLnBpbm5lZCA6IHRvb2x0aXBMYWJlbHMubm90ZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJFbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBuZXdUb29sdGlwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wb3B1bGF0ZU5vdGVzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgZmlyc3QgY2xpY2ssIGp1c3Qgc3dpdGNoIHRvIHRoZSB0YWIuXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaFRhYnMoa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGFiRWwuZHJhZ2dhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRhYkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIGtleSk7XG4gICAgICAgICAgICAgICAgZS5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9ICdtb3ZlJztcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRhYkVsLmNsYXNzTGlzdC5hZGQoJ2RyYWdnaW5nJyksIDApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRhYkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCAoKSA9PiB0YWJFbC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnZ2luZycpKTtcblxuICAgICAgICAgICAgdGFiRWwuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0FmdGVyID0gZS5jbGllbnRYID4gcmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDI7XG5cbiAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyLWluZGljYXRvci1iZWZvcmUnLCAnZHJhZy1vdmVyLWluZGljYXRvci1hZnRlcicpO1xuICAgICAgICAgICAgICAgIGlmIChpc0FmdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdkcmFnLW92ZXItaW5kaWNhdG9yLWFmdGVyJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2RyYWctb3Zlci1pbmRpY2F0b3ItYmVmb3JlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRhYkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWctb3Zlci1pbmRpY2F0b3ItYmVmb3JlJywgJ2RyYWctb3Zlci1pbmRpY2F0b3ItYWZ0ZXInKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0YWJFbC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWctb3Zlci1pbmRpY2F0b3ItYmVmb3JlJywgJ2RyYWctb3Zlci1pbmRpY2F0b3ItYWZ0ZXInKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGRyYWdnZWRLZXkgPSBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0S2V5ID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudGFiS2V5O1xuICAgICAgICAgICAgICAgIGlmIChkcmFnZ2VkS2V5ID09PSB0YXJnZXRLZXkpIHJldHVybjtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNBZnRlciA9IGUuY2xpZW50WCA+IHJlY3QubGVmdCArIHJlY3Qud2lkdGggLyAyO1xuXG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRPcmRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYk9yZGVyO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld09yZGVyID0gY3VycmVudE9yZGVyLmZpbHRlcihrID0+IGsgIT09IGRyYWdnZWRLZXkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEluZGV4ID0gbmV3T3JkZXIuaW5kZXhPZih0YXJnZXRLZXkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzQWZ0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3T3JkZXIuc3BsaWNlKHRhcmdldEluZGV4ICsgMSwgMCwgZHJhZ2dlZEtleSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3T3JkZXIuc3BsaWNlKHRhcmdldEluZGV4LCAwLCBkcmFnZ2VkS2V5KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJPcmRlciA9IG5ld09yZGVyO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcblxuICAgICAgICAgICAgICAgIG5ld09yZGVyLmZvckVhY2goayA9PiB0YWJDb250YWluZXIuYXBwZW5kQ2hpbGQodGFiRWxlbWVudHNba10pKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YWJFbGVtZW50cztcbiAgICB9XG5cbiAgICB1cGRhdGVEYXlIZWFkZXJIaWdobGlnaHQoKSB7XG4gICAgICAgIC8vIDEuIElmIHRoZSBoZWFkZXIgcm93IGRvZXNuJ3QgZXhpc3QgeWV0LCBkbyBub3RoaW5nLlxuICAgICAgICBpZiAoIXRoaXMuY2FsZW5kYXJIZWFkZXJSb3dFbCkgcmV0dXJuO1xuXG4gICAgICAgIC8vIDIuIEdldCBhbGwgdGhlIGhlYWRlciBjZWxscyAoJ3RoJyBlbGVtZW50cykuXG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0aGlzLmNhbGVuZGFySGVhZGVyUm93RWwucXVlcnlTZWxlY3RvckFsbCgndGgnKTtcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAgIC8vIDMuIElNUE9SVEFOVDogUmVtb3ZlIHRoZSBoaWdobGlnaHQgZnJvbSBldmVyeSBoZWFkZXIgZmlyc3QgdG8gcmVzZXQgdGhlbS5cbiAgICAgICAgaGVhZGVycy5mb3JFYWNoKHRoID0+IHRoLmNsYXNzTGlzdC5yZW1vdmUoJ3RvZGF5LWRheS1oZWFkZXInKSk7XG5cbiAgICAgICAgLy8gNC4gSWYgdGhlIHVzZXIgaGFzIHRoaXMgZmVhdHVyZSB0dXJuZWQgb2ZmIGluIHNldHRpbmdzLCBzdG9wIGhlcmUuXG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0VG9kYXlEYXlIZWFkZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDUuIENoZWNrIGlmIHRoZSBtb250aC95ZWFyIGJlaW5nIGRpc3BsYXllZCBpcyB0aGUgYWN0dWFsIGN1cnJlbnQgbW9udGgveWVhci5cbiAgICAgICAgY29uc3QgaXNDdXJyZW50TW9udGggPSB0aGlzLmRpc3BsYXllZE1vbnRoLmdldEZ1bGxZZWFyKCkgPT09IHRvZGF5LmdldEZ1bGxZZWFyKCkgJiZcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheWVkTW9udGguZ2V0TW9udGgoKSA9PT0gdG9kYXkuZ2V0TW9udGgoKTtcblxuICAgICAgICAvLyA2LiBPbmx5IGlmIGl0IElTIHRoZSBjdXJyZW50IG1vbnRoLCBhcHBseSB0aGUgaGlnaGxpZ2h0LlxuICAgICAgICBpZiAoaXNDdXJyZW50TW9udGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvZGF5RGF5T2ZXZWVrID0gdG9kYXkuZ2V0RGF5KCk7IC8vIFN1bmRheT0wLCBNb25kYXk9MS4uLlxuICAgICAgICAgICAgY29uc3Qgd2Vla1N0YXJ0c09uTW9uZGF5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla1N0YXJ0RGF5ID09PSAnbW9uZGF5JztcblxuICAgICAgICAgICAgbGV0IHRvZGF5Q29sdW1uSW5kZXg7XG4gICAgICAgICAgICBpZiAod2Vla1N0YXJ0c09uTW9uZGF5KSB7XG4gICAgICAgICAgICAgICAgdG9kYXlDb2x1bW5JbmRleCA9ICh0b2RheURheU9mV2VlayA9PT0gMCkgPyA2IDogdG9kYXlEYXlPZldlZWsgLSAxOyAvLyBNb249MCwgVHVlPTEuLlN1bj02XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRvZGF5Q29sdW1uSW5kZXggPSB0b2RheURheU9mV2VlazsgLy8gU3VuPTAsIE1vbj0xLi4uXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFjY291bnQgZm9yIHRoZSBleHRyYSBjb2x1bW5zIHlvdSBtaWdodCBoYXZlIChQVywgV2Vla05yKVxuICAgICAgICAgICAgbGV0IG9mZnNldCA9IDA7XG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1BXQ29sdW1uKSBvZmZzZXQrKztcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93V2Vla051bWJlcnMpIG9mZnNldCsrO1xuXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRUaCA9IGhlYWRlcnNbdG9kYXlDb2x1bW5JbmRleCArIG9mZnNldF07XG4gICAgICAgICAgICBpZiAodGFyZ2V0VGgpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRUaC5jbGFzc0xpc3QuYWRkKCd0b2RheS1kYXktaGVhZGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbWFpbiByZW5kZXIgZnVuY3Rpb24gZm9yIHRoZSBlbnRpcmUgdmlldy4gSXQgYnVpbGRzIHRoZSBET00gZnJvbSBzY3JhdGNoLlxuICAgICAqL1xuICAgIHJlbmRlcigpIHtcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBmaXJzdCB2aXNpYmxlIHRhYiB0byBiZSB0aGUgZGVmYXVsdCBhY3RpdmUgdGFiLlxuICAgICAgICBjb25zdCBmaW5hbFRhYk9yZGVyID0gdGhpcy5nZXRGaW5hbFRhYk9yZGVyKCk7XG4gICAgICAgIGNvbnN0IHZpc2libGVUYWJzID0gZmluYWxUYWJPcmRlci5maWx0ZXIoa2V5ID0+IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYlZpc2liaWxpdHlba2V5XSk7XG5cbiAgICAgICAgLy8gT25seSByZXNldCB0aGUgYWN0aXZlIHRhYiBpZiBpdCdzIG5vdCBzZXQgb3IgaGFzIGJlY29tZSBpbnZpc2libGVcbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZVRhYiB8fCAhdmlzaWJsZVRhYnMuaW5jbHVkZXModGhpcy5hY3RpdmVUYWIpKSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYiA9IHZpc2libGVUYWJzWzBdIHx8IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KFwicGVyaW9kLW1vbnRoLWNvbnRhaW5lclwiKTtcbiAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKGBsYXlvdXQtJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckxheW91dH1gKTtcbiAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKGB0b2RheS1zdHlsZS0ke3RoaXMucGx1Z2luLnNldHRpbmdzLnRvZGF5SGlnaGxpZ2h0U3R5bGV9YCk7XG4gICAgICAgIGNvbnRhaW5lci50b2dnbGVDbGFzcyhcImhpZGUtZ3JpZFwiLCAhdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0NhbGVuZGFyR3JpZExpbmVzKTtcbiAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJjYWxlbmRhci1jb2xsYXBzZWRcIiwgdGhpcy5pc0NhbGVuZGFyQ29sbGFwc2VkKTtcbiAgICAgICAgY29udGFpbmVyLnRvZ2dsZUNsYXNzKFwidmVydGljYWwtdmlldy1hY3RpdmVcIiwgdGhpcy5pc1ZlcnRpY2FsVmlldyk7XG4gICAgICAgIGNvbnRhaW5lci50b2dnbGVDbGFzcygnbW9uZGF5LXN0YXJ0JywgdGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla1N0YXJ0RGF5ID09PSAnbW9uZGF5Jyk7XG5cbiAgICAgICAgLy8gQWRkIHdlZWtlbmQgc2hhZGluZyBjbGFzc2VzXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRXZWVrZW5kcykge1xuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKCd3ZWVrZW5kLXNoYWRpbmctZW5hYmxlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dQV0NvbHVtbikge1xuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKCdoYXMtcHctY29sdW1uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1dlZWtOdW1iZXJzKSB7XG4gICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoJ2hhcy13ZWVrLW51bWJlcnMnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLSBIZWFkZXIgYW5kIE5hdmlnYXRpb24gLS0tXG4gICAgICAgIGNvbnN0IGhlYWRlckRpdiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoXCJtb250aC1oZWFkZXJcIik7XG5cbiAgICAgICAgdGhpcy5tb250aE5hbWVFbCA9IGhlYWRlckRpdi5jcmVhdGVEaXYoeyBjbHM6IFwibW9udGgtaGVhZGVyLXRpdGxlXCIgfSk7XG4gICAgICAgIHRoaXMudXBkYXRlTW9udGhUaXRsZSgpO1xuICAgICAgICB0aGlzLm1vbnRoTmFtZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gU0VUIFRIRSBGTEFHIGJlZm9yZSBzd2l0Y2hpbmcgdmlld3NcbiAgICAgICAgICAgIHRoaXMuaXNQcm9ncmFtbWF0aWNTY3JvbGwgPSB0cnVlO1xuXG4gICAgICAgICAgICB0aGlzLmlzVmVydGljYWxWaWV3ID0gIXRoaXMuaXNWZXJ0aWNhbFZpZXc7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuXG4gICAgICAgICAgICAvLyBDTEVBUiBUSEUgRkxBRyBhZnRlciByZW5kZXIgYW5kIGluaXRpYWwgc2Nyb2xsIGNvbXBsZXRlXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzUHJvZ3JhbW1hdGljU2Nyb2xsID0gZmFsc2U7XG4gICAgICAgICAgICB9LCA4MDApOyAgLy8gTG9uZ2VyIGRlbGF5IGZvciBpbml0aWFsIHZpZXcgcmVuZGVyIG9uIG1vYmlsZVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbmF2RGl2ID0gaGVhZGVyRGl2LmNyZWF0ZURpdih7IGNsczogXCJtb250aC1oZWFkZXItbmF2XCIgfSk7XG5cbiAgICAgICAgY29uc3QgYmFja0J0biA9IG5hdkRpdi5jcmVhdGVFbChcImJ1dHRvblwiKTtcbiAgICAgICAgYmFja0J0bi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiUHJldmlvdXMgbW9udGhcIik7XG4gICAgICAgIHNldEljb24oYmFja0J0biwgXCJjaGV2cm9uLWxlZnRcIik7XG4gICAgICAgIGJhY2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1ZlcnRpY2FsVmlldykge1xuICAgICAgICAgICAgICAgIC8vIFNFVCBGTEFHXG4gICAgICAgICAgICAgICAgdGhpcy5pc1Byb2dyYW1tYXRpY1Njcm9sbCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXllZE1vbnRoLnNldE1vbnRoKHRoaXMuZGlzcGxheWVkTW9udGguZ2V0TW9udGgoKSAtIDEsIDEpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0TW9udGhJZCA9IGBtb250aC0ke3RoaXMuZGlzcGxheWVkTW9udGguZ2V0RnVsbFllYXIoKX0tJHt0aGlzLmRpc3BsYXllZE1vbnRoLmdldE1vbnRoKCl9YDtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRFbCA9IHRoaXMudmVydGljYWxTY3JvbGxlckVsPy5xdWVyeVNlbGVjdG9yKGAjJHt0YXJnZXRNb250aElkfWApO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldEVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEVsLnNjcm9sbEludG9WaWV3KHsgYmxvY2s6ICdzdGFydCcsIGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNb250aFRpdGxlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVG9kYXlCdG5BcmlhTGFiZWwoKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDTEVBUiBGTEFHXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1Byb2dyYW1tYXRpY1Njcm9sbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VNb250aCgtMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBTdG9yZSByZWZlcmVuY2UgYW5kIGFkZCBuZXcgZXZlbnQgbGlzdGVuZXIgZm9yIHRoZSBcIlRvZGF5XCIgYnV0dG9uXG4gICAgICAgIGNvbnN0IHRvZGF5QnRuID0gbmF2RGl2LmNyZWF0ZUVsKCdidXR0b24nKTtcbiAgICAgICAgdGhpcy50b2RheUJ0biA9IHRvZGF5QnRuO1xuICAgICAgICBzZXRJY29uKHRvZGF5QnRuLCAnY2FsZW5kYXItY2xvY2snKTtcblxuICAgICAgICAvLyBBcHBseSBpbml0aWFsIHN0eWxlIGFuZCBBUklBIGxhYmVsIG9uIHJlbmRlclxuICAgICAgICBpZiAodGhpcy5pc1BvcHVwTG9ja2VkKSB7XG4gICAgICAgICAgICB0aGlzLnRvZGF5QnRuLmNsYXNzTGlzdC5hZGQoJ3BvcHVwLWxvY2tlZCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlVG9kYXlCdG5BcmlhTGFiZWwoKTtcblxuICAgICAgICB0b2RheUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblxuICAgICAgICAgICAgdGhpcy5nb1RvQ3VycmVudE1vbnRoKCk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRW5zdXJlIHRoZSBidXR0b24gc3R5bGUgaXMgY29ycmVjdCBvbiByZS1yZW5kZXJcbiAgICAgICAgaWYgKHRoaXMuaXNQb3B1cExvY2tlZCkge1xuICAgICAgICAgICAgdGhpcy50b2RheUJ0bi5jbGFzc0xpc3QuYWRkKCdwb3B1cC1sb2NrZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZvcndhcmRCdG4gPSBuYXZEaXYuY3JlYXRlRWwoXCJidXR0b25cIik7XG4gICAgICAgIGZvcndhcmRCdG4uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBcIk5leHQgbW9udGhcIik7XG4gICAgICAgIHNldEljb24oZm9yd2FyZEJ0biwgXCJjaGV2cm9uLXJpZ2h0XCIpO1xuICAgICAgICBmb3J3YXJkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNWZXJ0aWNhbFZpZXcpIHtcbiAgICAgICAgICAgICAgICAvLyBTRVQgRkxBR1xuICAgICAgICAgICAgICAgIHRoaXMuaXNQcm9ncmFtbWF0aWNTY3JvbGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheWVkTW9udGguc2V0TW9udGgodGhpcy5kaXNwbGF5ZWRNb250aC5nZXRNb250aCgpICsgMSwgMSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRNb250aElkID0gYG1vbnRoLSR7dGhpcy5kaXNwbGF5ZWRNb250aC5nZXRGdWxsWWVhcigpfS0ke3RoaXMuZGlzcGxheWVkTW9udGguZ2V0TW9udGgoKX1gO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEVsID0gdGhpcy52ZXJ0aWNhbFNjcm9sbGVyRWw/LnF1ZXJ5U2VsZWN0b3IoYCMke3RhcmdldE1vbnRoSWR9YCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0RWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RWwuc2Nyb2xsSW50b1ZpZXcoeyBibG9jazogJ3N0YXJ0JywgYmVoYXZpb3I6ICdzbW9vdGgnIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1vbnRoVGl0bGUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUb2RheUJ0bkFyaWFMYWJlbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIENMRUFSIEZMQUdcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUHJvZ3JhbW1hdGljU2Nyb2xsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZU1vbnRoKDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjb2xsYXBzZUJ0biA9IG5hdkRpdi5jcmVhdGVFbChcImJ1dHRvblwiKTtcbiAgICAgICAgdGhpcy5jb2xsYXBzZUJ0biA9IGNvbGxhcHNlQnRuO1xuICAgICAgICBjb2xsYXBzZUJ0bi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiVG9nZ2xlIGNhbGVuZGFyIHZpc2liaWxpdHlcIik7XG5cbiAgICAgICAgLy9zZXRJY29uKHRoaXMuY29sbGFwc2VCdG4sIHRoaXMuaXNDYWxlbmRhckNvbGxhcHNlZCA/IFwiY2hldnJvbi11cFwiIDogXCJjaGV2cm9uLWRvd25cIik7XG4gICAgICAgIHNldEljb24odGhpcy5jb2xsYXBzZUJ0biwgJ2NoZXZyb24tZG93bicpO1xuXG5cbiAgICAgICAgdGhpcy5jb2xsYXBzZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBtYW51YWwgdXNlciBhY3Rpb24sIHNvIHJlc2V0IHRoZSBcImVkaXRpbmdcIiBmbGFnLlxuICAgICAgICAgICAgdGhpcy5jYWxlbmRhcldhc0NvbGxhcHNlZEZvckVkaXRpbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgLy8gVXNlIHRoZSBoZWxwZXIgdG8gdG9nZ2xlIHRvIHRoZSBvcHBvc2l0ZSBvZiB0aGUgY3VycmVudCBzdGF0ZS5cbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQ2FsZW5kYXIoIXRoaXMuaXNDYWxlbmRhckNvbGxhcHNlZCk7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSByZXN1bHQgb2YgdGhlIHRvZ2dsZSBpcyB0aGF0IHRoZSBjYWxlbmRhciBpcyBub3cgZXhwYW5kZWQsXG4gICAgICAgICAgICAvLyBkaXNtaXNzIGFueSBhY3RpdmUga2V5Ym9hcmQuXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDYWxlbmRhckNvbGxhcHNlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYmx1ckFjdGl2ZUlucHV0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIC0tLSBDYWxlbmRhciBSZW5kZXJpbmcgKFZlcnRpY2FsIG9yIEhvcml6b250YWwpIC0tLVxuICAgICAgICBpZiAodGhpcy5pc1ZlcnRpY2FsVmlldykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJWZXJ0aWNhbENhbGVuZGFyKGNvbnRhaW5lcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0YWJsZVdyYXBwZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcImNhbGVuZGFyLXRhYmxlLXdyYXBwZXJcIiB9KTtcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gdGFibGVXcmFwcGVyLmNyZWF0ZUVsKFwidGFibGVcIiwgeyBjbHM6IFwicGVyaW9kLWNhbGVuZGFyLXRhYmxlXCIgfSk7XG4gICAgICAgICAgICB0aGlzLmF0dGFjaFN3aXBlTGlzdGVuZXJzKHRhYmxlV3JhcHBlciwgaGVhZGVyRGl2KTtcbiAgICAgICAgICAgIGNvbnN0IHRoZWFkID0gdGFibGUuY3JlYXRlRWwoJ3RoZWFkJyk7XG4gICAgICAgICAgICB0aGlzLmNhbGVuZGFySGVhZGVyUm93RWwgPSB0aGVhZC5jcmVhdGVFbCgndHInKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dQV0NvbHVtbikge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJIZWFkZXJSb3dFbC5jcmVhdGVFbCgndGgnLCB7IHRleHQ6ICcnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dXZWVrTnVtYmVycykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJIZWFkZXJSb3dFbC5jcmVhdGVFbCgndGgnLCB7IHRleHQ6IHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtOdW1iZXJDb2x1bW5MYWJlbCB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc3RhcnREYXlPZmZzZXQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrU3RhcnREYXkgPT09ICdtb25kYXknID8gMSA6IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBkID0gMDsgZCA8IDc7IGQrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRheUluZGV4ID0gKGQgKyBzdGFydERheU9mZnNldCkgJSA3O1xuICAgICAgICAgICAgICAgIC8vIE5vdGU6IFRoZSBoaWdobGlnaHRpbmcgbG9naWMgaGFzIGJlZW4gY29tcGxldGVseSByZW1vdmVkIGZyb20gdGhpcyBsb29wXG4gICAgICAgICAgICAgICAgdGhpcy5jYWxlbmRhckhlYWRlclJvd0VsLmNyZWF0ZUVsKCd0aCcsIHsgdGV4dDogbW9tZW50KCkuZGF5KGRheUluZGV4KS5mb3JtYXQoJ2RkZCcpLnRvVXBwZXJDYXNlKCkgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJCb2R5RWwgPSB0YWJsZS5jcmVhdGVFbChcInRib2R5XCIpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJDYWxlbmRhcigpO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRDb2x1bW5IaWdobGlnaHRpbmcodGhpcy5jYWxlbmRhckhlYWRlclJvd0VsLCB0aGlzLmNhbGVuZGFyQm9keUVsKTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgLy8gQWRkIHRoaXMgbGluZSByaWdodCBoZXJlIHRvIHNldCB0aGUgaGlnaGxpZ2h0IGNvcnJlY3RseSBvbiB0aGUgZmlyc3QgbG9hZFxuICAgICAgICAgICAgdGhpcy51cGRhdGVEYXlIZWFkZXJIaWdobGlnaHQoKTtcblxuICAgICAgICAgICAgLy8gLS0tIFRhYnMgYW5kIENvbnRlbnQgUGFuZWxzIC0tLVxuICAgICAgICAgICAgY29uc3QgdGFiV3JhcHBlciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoXCJ0YWJzLWNvbnRlbnQtd3JhcHBlclwiKTtcbiAgICAgICAgICAgIGNvbnN0IGFyZVRhYnNWaXNpYmxlID0gT2JqZWN0LnZhbHVlcyh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJWaXNpYmlsaXR5KS5zb21lKHZpc2libGUgPT4gdmlzaWJsZSk7XG4gICAgICAgICAgICBpZiAoIWFyZVRhYnNWaXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgdGFiV3JhcHBlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoXCJ0YWJzLWFyZS12aXNpYmxlXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB0YWJIZWFkZXIgPSB0YWJXcmFwcGVyLmNyZWF0ZURpdihcIm5vdGUtdGFiLWhlYWRlclwiKTtcbiAgICAgICAgICAgIGNvbnN0IHRhYkNvbnRhaW5lciA9IHRhYkhlYWRlci5jcmVhdGVEaXYoXCJ0YWItY29udGFpbmVyXCIpO1xuICAgICAgICAgICAgY29uc3Qgc2VhcmNoV3JhcHBlciA9IHRhYkhlYWRlci5jcmVhdGVEaXYoXCJzZWFyY2gtd3JhcHBlclwiKTtcblxuICAgICAgICAgICAgY29uc3Qgc2NyYXRjaHBhZFNlYXJjaENvbnRhaW5lciA9IHNlYXJjaFdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiBcInBtLXNlYXJjaC1jb250YWluZXJcIiB9KTtcbiAgICAgICAgICAgIGNvbnN0IG5vdGVzU2VhcmNoQ29udGFpbmVyID0gc2VhcmNoV3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6IFwicG0tc2VhcmNoLWNvbnRhaW5lclwiIH0pO1xuICAgICAgICAgICAgY29uc3QgYXNzZXRzU2VhcmNoQ29udGFpbmVyID0gc2VhcmNoV3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6IFwicG0tc2VhcmNoLWNvbnRhaW5lclwiIH0pO1xuICAgICAgICAgICAgY29uc3QgdGFza3NTZWFyY2hDb250YWluZXIgPSBzZWFyY2hXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogXCJwbS1zZWFyY2gtY29udGFpbmVyXCIgfSk7XG5cbiAgICAgICAgICAgIC8vIC0tIENPTlRFTlQgUEFORUxTIC0tXG4gICAgICAgICAgICB0aGlzLnNjcmF0Y2hXcmFwcGVyRWwgPSB0YWJXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogXCJzY3JhdGNocGFkLXdyYXBwZXJcIiB9KTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyU2NyYXRjaHBhZENvbnRlbnQoKTtcblxuICAgICAgICAgICAgdGhpcy5ub3Rlc0NvbnRlbnRFbCA9IHRhYldyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiBcIm5vdGVzLWNvbnRhaW5lclwiIH0pO1xuICAgICAgICAgICAgdGhpcy5hc3NldHNDb250ZW50RWwgPSB0YWJXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogXCJub3Rlcy1jb250YWluZXJcIiB9KTtcbiAgICAgICAgICAgIHRoaXMudGFza3NDb250ZW50RWwgPSB0YWJXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogXCJ0YXNrcy1jb250YWluZXJcIiB9KTtcblxuICAgICAgICAgICAgdGhpcy50YXNrUmVmcmVzaEluZGljYXRvciA9IHRhYldyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiAncG0tcmVmcmVzaC1pbmRpY2F0b3InIH0pO1xuICAgICAgICAgICAgc2V0SWNvbih0aGlzLnRhc2tSZWZyZXNoSW5kaWNhdG9yLCAnYXJyb3ctZG93bicpO1xuXG4gICAgICAgICAgICAvLyBGdW5jdGlvbiB0byBoYW5kbGUgc3dpdGNoaW5nIGJldHdlZW4gdGFicy5cbiAgICAgICAgICAgIGNvbnN0IHN3aXRjaFRhYnMgPSAodGFiKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVUYWIgPSB0YWI7XG4gICAgICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyh0YWJFbGVtZW50cykuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSk7XG4gICAgICAgICAgICAgICAgaWYgKHRhYkVsZW1lbnRzW3RhYl0pIHRhYkVsZW1lbnRzW3RhYl0uYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG5cbiAgICAgICAgICAgICAgICAvLyBUb2dnbGUgdmlzaWJpbGl0eSBvZiBjb250ZW50IHBhbmVscyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBzZWFyY2ggYmFycy5cbiAgICAgICAgICAgICAgICB0aGlzLnNjcmF0Y2hXcmFwcGVyRWwuc3R5bGUuZGlzcGxheSA9ICh0YWIgPT09IFwic2NyYXRjaFwiKSA/IFwiZ3JpZFwiIDogXCJub25lXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3Rlc0NvbnRlbnRFbC5zdHlsZS5kaXNwbGF5ID0gKHRhYiA9PT0gXCJub3Rlc1wiKSA/IFwiYmxvY2tcIiA6IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIHRoaXMuYXNzZXRzQ29udGVudEVsLnN0eWxlLmRpc3BsYXkgPSAodGFiID09PSBcImFzc2V0c1wiKSA/IFwiXCIgOiBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2tzQ29udGVudEVsLnN0eWxlLmRpc3BsYXkgPSAodGFiID09PSBcInRhc2tzXCIpID8gXCJibG9ja1wiIDogXCJub25lXCI7XG5cbiAgICAgICAgICAgICAgICBzY3JhdGNocGFkU2VhcmNoQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAodGFiID09PSBcInNjcmF0Y2hcIikgPyBcImZsZXhcIiA6IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIG5vdGVzU2VhcmNoQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAodGFiID09PSBcIm5vdGVzXCIpID8gXCJmbGV4XCIgOiBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICBhc3NldHNTZWFyY2hDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICh0YWIgPT09IFwiYXNzZXRzXCIpID8gXCJmbGV4XCIgOiBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB0YXNrc1NlYXJjaENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gKHRhYiA9PT0gXCJ0YXNrc1wiKSA/IFwiZmxleFwiIDogXCJub25lXCI7XG5cbiAgICAgICAgICAgICAgICAvLyBQb3B1bGF0ZSB0aGUgY29udGVudCBvZiB0aGUgbmV3bHkgYWN0aXZhdGVkIHRhYi5cbiAgICAgICAgICAgICAgICBpZiAodGFiID09PSBcIm5vdGVzXCIpIHRoaXMucG9wdWxhdGVOb3RlcygpO1xuICAgICAgICAgICAgICAgIGlmICh0YWIgPT09IFwiYXNzZXRzXCIpIHRoaXMucG9wdWxhdGVBc3NldHMoKTtcbiAgICAgICAgICAgICAgICBpZiAodGFiID09PSBcInRhc2tzXCIpIHRoaXMucG9wdWxhdGVUYXNrcygpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgdGFiRWxlbWVudHMgPSB0aGlzLnNldHVwRHJhZ2dhYmxlVGFicyh0YWJDb250YWluZXIsIHN3aXRjaFRhYnMpO1xuXG4gICAgICAgICAgICAvLyAtLSBTRUFSQ0ggTE9HSUMgLS1cbiAgICAgICAgICAgIHRoaXMuc2NyYXRjaHBhZFNlYXJjaElucHV0RWwgPSB0aGlzLnNldHVwU2VhcmNoSW5wdXQoc2NyYXRjaHBhZFNlYXJjaENvbnRhaW5lciwgXCJTZWFyY2ggU2NyYXRjaFBhZC4uLlwiLCAodGVybSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2NyYXRjaHBhZFNlYXJjaFRlcm0gPSB0ZXJtO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2NyYXRjaHBhZEhpZ2hsaWdodHMoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgbG9naWMgYnVnIGZyb20gdGhlIG9yaWdpbmFsIGNvZGU7IHRoaXMgbmVlZHMgdG8gYmUgaW5zaWRlIHRoZSBcImVsc2VcIiBibG9jayBvZiB0aGUgcHJldmlldyBtb2RlXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNTY3JhdGNocGFkUHJldmlldykge1xuICAgICAgICAgICAgICAgIHRoaXMubm90ZVRleHRhcmVhLnZhbHVlID0gdGhpcy5ub3RlVGV4dDtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGVUZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGVUZXh0ID0gdGhpcy5ub3RlVGV4dGFyZWEudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUZpeGVkTm90ZSh0aGlzLm5vdGVUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTY3JhdGNocGFkSGlnaGxpZ2h0cygpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RlVGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zY3JhdGNoSGlnaGxpZ2h0ZXJFbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JhdGNoSGlnaGxpZ2h0ZXJFbC5zY3JvbGxUb3AgPSB0aGlzLm5vdGVUZXh0YXJlYS5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcmF0Y2hIaWdobGlnaHRlckVsLnNjcm9sbExlZnQgPSB0aGlzLm5vdGVUZXh0YXJlYS5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG5vdGVzUGxhY2Vob2xkZXIgPSB0aGlzLm5vdGVzVmlld01vZGUgPT09ICdwaW5uZWQnID8gJ0ZpbHRlciBub3Rlcy4uLicgOiAnRmlsdGVyIG5vdGVzLi4uJztcbiAgICAgICAgICAgIHRoaXMubm90ZXNTZWFyY2hJbnB1dEVsID0gdGhpcy5zZXR1cFNlYXJjaElucHV0KG5vdGVzU2VhcmNoQ29udGFpbmVyLCBub3Rlc1BsYWNlaG9sZGVyLCAodGVybSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubm90ZXNTZWFyY2hUZXJtID0gdGVybTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVsYXRlTm90ZXMoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmFzc2V0c1NlYXJjaElucHV0RWwgPSB0aGlzLnNldHVwU2VhcmNoSW5wdXQoYXNzZXRzU2VhcmNoQ29udGFpbmVyLCBcIkZpbHRlciBhc3NldHMuLi5cIiwgKHRlcm0pID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzc2V0c1NlYXJjaFRlcm0gPSB0ZXJtO1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdWxhdGVBc3NldHMoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnRhc2tzU2VhcmNoSW5wdXRFbCA9IHRoaXMuc2V0dXBTZWFyY2hJbnB1dCh0YXNrc1NlYXJjaENvbnRhaW5lciwgXCJGaWx0ZXIgdGFza3MuLi5cIiwgKHRlcm0pID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2tzU2VhcmNoVGVybSA9IHRlcm07XG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZVRhc2tzKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy51cGRhdGVTY3JhdGNocGFkU2VhcmNoQ291bnQoKTtcbiAgICAgICAgICAgIHN3aXRjaFRhYnModGhpcy5hY3RpdmVUYWIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXBwbHlGb250U2V0dGluZ3MoKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbmRzIGFuZCBoaWdobGlnaHRzIHRoZSBuZXh0IG9yIHByZXZpb3VzIG9jY3VycmVuY2Ugb2YgdGhlIHNlYXJjaCB0ZXJtIGluIHRoZSBzY3JhdGNocGFkIHRleHRhcmVhLlxuICAgICAqIEBwYXJhbSB7J25leHQnIHwgJ3ByZXYnfSBkaXJlY3Rpb24gVGhlIGRpcmVjdGlvbiB0byBzZWFyY2guXG4gICAgICovXG4gICAgaGlnaGxpZ2h0SW5TY3JhdGNocGFkKGRpcmVjdGlvbiA9ICduZXh0Jykge1xuICAgICAgICB0aGlzLm5vdGVUZXh0YXJlYS5mb2N1cygpO1xuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5ub3RlVGV4dGFyZWEudmFsdWU7XG4gICAgICAgIGNvbnN0IHRlcm0gPSB0aGlzLnNjcmF0Y2hwYWRTZWFyY2hUZXJtO1xuICAgICAgICBpZiAoIXRlcm0pIHJldHVybjtcblxuICAgICAgICBjb25zdCBsb3dlclRleHQgPSB0ZXh0LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IGxvd2VyVGVybSA9IHRlcm0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgbGV0IG1hdGNoSW5kZXggPSAtMTtcblxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnbmV4dCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlYXJjaEZyb20gPSB0aGlzLm5vdGVUZXh0YXJlYS5zZWxlY3Rpb25FbmQ7XG4gICAgICAgICAgICBtYXRjaEluZGV4ID0gbG93ZXJUZXh0LmluZGV4T2YobG93ZXJUZXJtLCBzZWFyY2hGcm9tKTtcbiAgICAgICAgICAgIGlmIChtYXRjaEluZGV4ID09PSAtMSkgeyAvLyBXcmFwIGFyb3VuZCB0byB0aGUgc3RhcnQgaWYgbm8gbWF0Y2ggaXMgZm91bmQuXG4gICAgICAgICAgICAgICAgbWF0Y2hJbmRleCA9IGxvd2VyVGV4dC5pbmRleE9mKGxvd2VyVGVybSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7IC8vICdwcmV2J1xuICAgICAgICAgICAgY29uc3Qgc2VhcmNoRnJvbSA9IHRoaXMubm90ZVRleHRhcmVhLnNlbGVjdGlvblN0YXJ0ID4gMCA/IHRoaXMubm90ZVRleHRhcmVhLnNlbGVjdGlvblN0YXJ0IC0gMSA6IHRleHQubGVuZ3RoO1xuICAgICAgICAgICAgbWF0Y2hJbmRleCA9IGxvd2VyVGV4dC5sYXN0SW5kZXhPZihsb3dlclRlcm0sIHNlYXJjaEZyb20pO1xuICAgICAgICAgICAgaWYgKG1hdGNoSW5kZXggPT09IC0xKSB7IC8vIFdyYXAgYXJvdW5kIHRvIHRoZSBlbmQuXG4gICAgICAgICAgICAgICAgbWF0Y2hJbmRleCA9IGxvd2VyVGV4dC5sYXN0SW5kZXhPZihsb3dlclRlcm0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1hdGNoSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAvLyBTZWxlY3QgdGhlIGZvdW5kIHRleHQgYW5kIHNjcm9sbCBpdCBpbnRvIHZpZXcuXG4gICAgICAgICAgICB0aGlzLm5vdGVUZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZShtYXRjaEluZGV4LCBtYXRjaEluZGV4ICsgdGVybS5sZW5ndGgpO1xuICAgICAgICAgICAgY29uc3QgbGluZUhlaWdodCA9IHBhcnNlRmxvYXQoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLm5vdGVUZXh0YXJlYSkubGluZUhlaWdodCk7XG4gICAgICAgICAgICBjb25zdCBsaW5lcyA9IHRleHQuc3Vic3RyaW5nKDAsIG1hdGNoSW5kZXgpLnNwbGl0KCdcXG4nKS5sZW5ndGg7XG4gICAgICAgICAgICB0aGlzLm5vdGVUZXh0YXJlYS5zY3JvbGxUb3AgPSAobGluZXMgLSAxKSAqIGxpbmVIZWlnaHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gbWF0Y2hlcyBmb3VuZFwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciB0byByZS1yZW5kZXIganVzdCB0aGUgY2FsZW5kYXIgZ3JpZC5cbiAgICAgKi9cbiAgICByZW5kZXJDYWxlbmRhcigpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FsZW5kYXJCb2R5RWwpIHtcbiAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJCb2R5RWwuZW1wdHkoKTtcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aEdyaWQodGhpcy5kaXNwbGF5ZWRNb250aCwgdGhpcy5jYWxlbmRhckJvZHlFbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93cyBhIHBvcHVwIGxpc3RpbmcgYWxsIG5vdGVzLCB0YXNrcywgYW5kIGFzc2V0cyBhc3NvY2lhdGVkIHdpdGggYSBzcGVjaWZpYyBkYXkuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0RWwgVGhlIGNhbGVuZGFyIGRheSBlbGVtZW50IHRvIHBvc2l0aW9uIHRoZSBwb3B1cCBuZWFyLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhQnlUeXBlIEFuIG9iamVjdCBjb250YWluaW5nIGFycmF5cyBvZiBpdGVtcyB0byBkaXNwbGF5LCBrZXllZCBieSB0eXBlLlxuICAgICAqIEBwYXJhbSB7RGF0ZX0gZGF0ZSBUaGUgZGF0ZSBmb3Igd2hpY2ggdGhlIHBvcHVwIGlzIGJlaW5nIHNob3duLlxuICAgICAqL1xuICAgIHNob3dGaWxlUG9wdXAodGFyZ2V0RWwsIGRhdGFCeVR5cGUsIGRhdGUsIGlzTW9iaWxlID0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5oaWRlRmlsZVBvcHVwKCk7XG4gICAgICAgIHRoaXMucG9wdXBFbCA9IGNyZWF0ZURpdih7IGNsczogJ290aGVyLW5vdGVzLXBvcHVwJyB9KTtcbiAgICAgICAgY29uc3QgeyBzZXR0aW5ncyB9ID0gdGhpcy5wbHVnaW47XG5cbiAgICAgICAgaWYgKGlzTW9iaWxlKSB7XG4gICAgICAgICAgICB0aGlzLnBvcHVwRWwuYWRkQ2xhc3MoJ2lzLW1vYmlsZS1wb3B1cCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIGhlYWRlciB3aXRoIGEgY2xvc2UgYnV0dG9uIGFuZCBkeW5hbWljIGRhdGUgdGl0bGVcbiAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gdGhpcy5wb3B1cEVsLmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWhlYWRlcicgfSk7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBtb21lbnQoZGF0ZSkuZm9ybWF0KFwiZGRkZCwgRCBNTU1NIFlZWVlcIik7XG4gICAgICAgIGhlYWRlclJvdy5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC1oZWFkZXItdGl0bGUnLCB0ZXh0OiBmb3JtYXR0ZWREYXRlIH0pO1xuICAgICAgICBjb25zdCBjbG9zZUJ0biA9IGhlYWRlclJvdy5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC1jbG9zZS1idG4nIH0pO1xuICAgICAgICBzZXRJY29uKGNsb3NlQnRuLCAneCcpO1xuICAgICAgICAvLyBNYWtlIHRoZSBlbnRpcmUgaGVhZGVyIHJvdyBjbGlja2FibGUgdG8gY2xvc2UgdGhlIHBvcHVwXG4gICAgICAgIGhlYWRlclJvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuaGlkZUZpbGVQb3B1cCgpKTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBzY3JvbGxhYmxlIHdyYXBwZXIgZm9yIHRoZSBjb250ZW50XG4gICAgICAgIGNvbnN0IGNvbnRlbnRXcmFwcGVyID0gdGhpcy5wb3B1cEVsLmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLWNvbnRlbnQtd3JhcHBlcicgfSk7XG5cbiAgICAgICAgaWYgKGRhdGFCeVR5cGUuaWNzICYmIGRhdGFCeVR5cGUuaWNzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbnRXcmFwcGVyLmNyZWF0ZUVsKCdoNicsIHsgdGV4dDogXCJDYWxlbmRhciBFdmVudHNcIiwgY2xzOiBcInBvcHVwLXNlY3Rpb24taGVhZGVyXCIgfSk7XG5cbiAgICAgICAgICAgIGRhdGFCeVR5cGUuaWNzLmZvckVhY2goZXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1FbCA9IGNvbnRlbnRXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogXCJvdGhlci1ub3Rlcy1wb3B1cC1pdGVtXCIgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBpY29uRWwgPSBpdGVtRWwuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1pY29uJyB9KTtcbiAgICAgICAgICAgICAgICBzZXRJY29uKGljb25FbCwgJ2NhbGVuZGFyJyk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0aXRsZVdyYXBwZXIgPSBpdGVtRWwuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS10aXRsZS13cmFwcGVyJyB9KTtcbiAgICAgICAgICAgICAgICB0aXRsZVdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS10aXRsZScgfSkuc2V0VGV4dChldmVudC5zdW1tYXJ5KTtcblxuICAgICAgICAgICAgICAgIGlmICghZXZlbnQuaXNBbGxEYXkgJiYgZXZlbnQuc3RhcnRUaW1lICYmIGV2ZW50LmVuZFRpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZVN0cmluZyA9IGAke2V2ZW50LnN0YXJ0VGltZX0gLSAke2V2ZW50LmVuZFRpbWV9YDtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGVXcmFwcGVyLmNyZWF0ZURpdih7IHRleHQ6IHRpbWVTdHJpbmcsIGNsczogJ25vdGUtcGF0aCcgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGhhc090aGVyQ29udGVudCA9IChkYXRhQnlUeXBlLnRhc2tzICYmIGRhdGFCeVR5cGUudGFza3MubGVuZ3RoID4gMCkgfHwgKGRhdGFCeVR5cGUuZGFpbHkgJiYgZGF0YUJ5VHlwZS5kYWlseS5sZW5ndGggPiAwKTtcbiAgICAgICAgICAgIGlmIChoYXNPdGhlckNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50V3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6IFwicG9wdXAtc2VwYXJhdG9yXCIgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhZGRGaWxlVG9MaXN0ID0gKGNvbnRhaW5lciwgZmlsZSwgdHlwZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXRlbUVsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ290aGVyLW5vdGVzLXBvcHVwLWl0ZW0nIH0pO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdhc3NldCcgJiYgdGhpcy5pc0ltYWdlQXNzZXQoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0aHVtYm5haWwgPSBpdGVtRWwuY3JlYXRlRWwoJ2ltZycsIHsgY2xzOiAncG9wdXAtYXNzZXQtdGh1bWJuYWlsJyB9KTtcbiAgICAgICAgICAgICAgICB0aHVtYm5haWwuc3JjID0gdGhpcy5hcHAudmF1bHQuZ2V0UmVzb3VyY2VQYXRoKGZpbGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGRvdCA9IGl0ZW1FbC5jcmVhdGVEaXYoeyBjbHM6ICdwb3B1cC1maWxlLWRvdCcgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdkYWlseScpIGRvdC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBzZXR0aW5ncy5kYWlseU5vdGVEb3RDb2xvcjtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnY3JlYXRlZCcpIGRvdC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBzZXR0aW5ncy5ub3RlQ3JlYXRlZENvbG9yO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdtb2RpZmllZCcpIGRvdC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBzZXR0aW5ncy5ub3RlTW9kaWZpZWRDb2xvcjtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnYXNzZXQnKSBkb3Quc3R5bGUuYmFja2dyb3VuZENvbG9yID0gc2V0dGluZ3MuYXNzZXREb3RDb2xvcjtcblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdGl0bGVQYXRoV3JhcHBlciA9IGl0ZW1FbC5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLXRpdGxlLXBhdGgtd3JhcHBlcicgfSk7XG4gICAgICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCcubWQnKSA/IGZpbGUuYmFzZW5hbWUgOiBmaWxlLm5hbWU7XG4gICAgICAgICAgICB0aXRsZVBhdGhXcmFwcGVyLmNyZWF0ZURpdih7IHRleHQ6IGRpc3BsYXlOYW1lLCBjbHM6IFwibm90ZS10aXRsZVwiIH0pO1xuICAgICAgICAgICAgaWYgKGZpbGUucGFyZW50ICYmIGZpbGUucGFyZW50LnBhdGggIT09ICcvJykge1xuICAgICAgICAgICAgICAgIHRpdGxlUGF0aFdyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogZmlsZS5wYXJlbnQucGF0aCwgY2xzOiAnbm90ZS1wYXRoJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGl0ZW1FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGZpbGUucGF0aCwgXCJcIiwgc2V0dGluZ3Mubm90ZXNPcGVuQWN0aW9uID09PSAnbmV3LXRhYicpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZUZpbGVQb3B1cCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYWRkVGFza1RvTGlzdCA9IChjb250YWluZXIsIHRhc2spID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1FbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdvdGhlci1ub3Rlcy1wb3B1cC1pdGVtJyB9KTtcbiAgICAgICAgICAgIGl0ZW1FbC5kYXRhc2V0LnRhc2tTdGF0dXMgPSB0YXNrLnN0YXR1cztcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gaXRlbUVsLmNyZWF0ZURpdih7IGNsczogJ3Rhc2stY2hlY2tib3gtc3ltYm9sJyB9KTtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlclRhc2tTeW1ib2woY2hlY2tib3gsIHRhc2spO1xuICAgICAgICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy50b2dnbGVUYXNrQ29tcGxldGlvbih0YXNrKTtcbiAgICAgICAgICAgICAgICB0YXNrLnN0YXR1cyA9ICh0YXNrLnN0YXR1cy50b0xvd2VyQ2FzZSgpID09PSAneCcpID8gJyAnIDogJ3gnO1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlclRhc2tTeW1ib2woY2hlY2tib3gsIHRhc2spO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYnVpbGRUYXNrc0J5RGF0ZU1hcCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FsZW5kYXIoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgdGV4dFNwYW4gPSBpdGVtRWwuY3JlYXRlU3Bhbih7IGNsczogJ3Rhc2stdGV4dCcgfSk7XG4gICAgICAgICAgICBNYXJrZG93blJlbmRlcmVyLnJlbmRlcih0aGlzLmFwcCwgdGFzay50ZXh0LCB0ZXh0U3BhbiwgdGFzay5maWxlLnBhdGgsIHRoaXMpO1xuICAgICAgICAgICAgaXRlbUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQodGFzay5maWxlLnBhdGgsICcnLCBmYWxzZSwgeyBlU3RhdGU6IHsgbGluZTogdGFzay5saW5lTnVtYmVyIH0gfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlRmlsZVBvcHVwKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBhbGxGaWxlcyA9IFsuLi4oZGF0YUJ5VHlwZS5kYWlseSB8fCBbXSksIC4uLihkYXRhQnlUeXBlLmNyZWF0ZWQgfHwgW10pLCAuLi4oZGF0YUJ5VHlwZS5tb2RpZmllZCB8fCBbXSksIC4uLihkYXRhQnlUeXBlLmFzc2V0cyB8fCBbXSldO1xuICAgICAgICBjb25zdCBoYXNUYXNrcyA9IGRhdGFCeVR5cGUudGFza3MgJiYgZGF0YUJ5VHlwZS50YXNrcy5sZW5ndGggPiAwO1xuICAgICAgICBjb25zdCBoYXNGaWxlcyA9IGFsbEZpbGVzLmxlbmd0aCA+IDA7XG5cbiAgICAgICAgaWYgKGhhc1Rhc2tzKSB7XG4gICAgICAgICAgICBjb250ZW50V3JhcHBlci5jcmVhdGVFbCgnaDYnLCB7IHRleHQ6ICdUYXNrcycsIGNsczogJ3BvcHVwLXNlY3Rpb24taGVhZGVyJyB9KTtcbiAgICAgICAgICAgIGRhdGFCeVR5cGUudGFza3MuZm9yRWFjaCh0YXNrID0+IGFkZFRhc2tUb0xpc3QoY29udGVudFdyYXBwZXIsIHRhc2spKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzVGFza3MgJiYgaGFzRmlsZXMpIHtcbiAgICAgICAgICAgIGNvbnRlbnRXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogJ3BvcHVwLXNlcGFyYXRvcicgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc0ZpbGVzKSB7XG4gICAgICAgICAgICBjb250ZW50V3JhcHBlci5jcmVhdGVFbCgnaDYnLCB7IHRleHQ6ICdOb3RlcyAmIEFzc2V0cycsIGNsczogJ3BvcHVwLXNlY3Rpb24taGVhZGVyJyB9KTtcbiAgICAgICAgICAgIChkYXRhQnlUeXBlLmRhaWx5IHx8IFtdKS5mb3JFYWNoKGZpbGUgPT4gYWRkRmlsZVRvTGlzdChjb250ZW50V3JhcHBlciwgZmlsZSwgJ2RhaWx5JykpO1xuICAgICAgICAgICAgKGRhdGFCeVR5cGUuY3JlYXRlZCB8fCBbXSkuZm9yRWFjaChmaWxlID0+IGFkZEZpbGVUb0xpc3QoY29udGVudFdyYXBwZXIsIGZpbGUsICdjcmVhdGVkJykpO1xuICAgICAgICAgICAgKGRhdGFCeVR5cGUubW9kaWZpZWQgfHwgW10pLmZvckVhY2goZmlsZSA9PiBhZGRGaWxlVG9MaXN0KGNvbnRlbnRXcmFwcGVyLCBmaWxlLCAnbW9kaWZpZWQnKSk7XG4gICAgICAgICAgICAoZGF0YUJ5VHlwZS5hc3NldHMgfHwgW10pLmZvckVhY2goZmlsZSA9PiBhZGRGaWxlVG9MaXN0KGNvbnRlbnRXcmFwcGVyLCBmaWxlLCAnYXNzZXQnKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRlbnRXcmFwcGVyLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgICAgICAgdGhpcy5oaWRlRmlsZVBvcHVwKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBvcHVwRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IGNsZWFyVGltZW91dCh0aGlzLmhpZGVUaW1lb3V0KSk7XG4gICAgICAgIHRoaXMucG9wdXBFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oaWRlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5oaWRlRmlsZVBvcHVwKCksIHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcHVwSGlkZURlbGF5KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnBvcHVwRWwpO1xuXG4gICAgICAgIGlmIChpc01vYmlsZSkge1xuICAgICAgICAgICAgY29uc3QgbWFyZ2luID0gODtcbiAgICAgICAgICAgIHRoaXMucG9wdXBFbC5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gICAgICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUuYm90dG9tID0gYCR7bWFyZ2lufXB4YDtcbiAgICAgICAgICAgIHRoaXMucG9wdXBFbC5zdHlsZS5sZWZ0ID0gYCR7bWFyZ2lufXB4YDtcbiAgICAgICAgICAgIHRoaXMucG9wdXBFbC5zdHlsZS53aWR0aCA9IGBjYWxjKDEwMCUgLSAke21hcmdpbiAqIDJ9cHgpYDtcbiAgICAgICAgICAgIHRoaXMucG9wdXBFbC5zdHlsZS5tYXhIZWlnaHQgPSAnNDV2aCc7XG4gICAgICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUuYm94U2l6aW5nID0gJ2JvcmRlci1ib3gnO1xuICAgICAgICAgICAgdGhpcy5wb3B1cEVsLnN0eWxlLnRvcCA9ICcnOyAvLyBVbnNldCBhbnkgcHJldmlvdXMgJ3RvcCcgdmFsdWVcbiAgICAgICAgICAgIHRoaXMucG9wdXBFbC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBwb3B1cFJlY3QgPSB0aGlzLnBvcHVwRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRSZWN0ID0gdGFyZ2V0RWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBjb25zdCB2aWV3cG9ydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgICAgICBjb25zdCB2aWV3cG9ydEhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgICAgIGNvbnN0IG1hcmdpbiA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcHVwR2FwO1xuICAgICAgICAgICAgbGV0IGZpbmFsVG9wID0gdGFyZ2V0UmVjdC5ib3R0b20gKyBtYXJnaW47XG4gICAgICAgICAgICBpZiAoZmluYWxUb3AgKyBwb3B1cFJlY3QuaGVpZ2h0ID4gdmlld3BvcnRIZWlnaHQpIGZpbmFsVG9wID0gdGFyZ2V0UmVjdC50b3AgLSBwb3B1cFJlY3QuaGVpZ2h0IC0gbWFyZ2luO1xuICAgICAgICAgICAgaWYgKGZpbmFsVG9wIDwgbWFyZ2luKSBmaW5hbFRvcCA9IG1hcmdpbjtcbiAgICAgICAgICAgIGxldCBmaW5hbExlZnQgPSB0YXJnZXRSZWN0LmxlZnQ7XG4gICAgICAgICAgICBpZiAoZmluYWxMZWZ0ICsgcG9wdXBSZWN0LndpZHRoID4gdmlld3BvcnRXaWR0aCAtIG1hcmdpbikgZmluYWxMZWZ0ID0gdGFyZ2V0UmVjdC5yaWdodCAtIHBvcHVwUmVjdC53aWR0aDtcbiAgICAgICAgICAgIGlmIChmaW5hbExlZnQgPCBtYXJnaW4pIGZpbmFsTGVmdCA9IG1hcmdpbjtcbiAgICAgICAgICAgIHRoaXMucG9wdXBFbC5zdHlsZS50b3AgPSBgJHtmaW5hbFRvcH1weGA7XG4gICAgICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUubGVmdCA9IGAke2ZpbmFsTGVmdH1weGA7XG4gICAgICAgICAgICB0aGlzLnBvcHVwRWwuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhpZGVzIGFuZCBkZXN0cm95cyB0aGUgZmlsZSBwb3B1cCBlbGVtZW50LlxuICAgICAqL1xuICAgIGhpZGVGaWxlUG9wdXAoKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmhvdmVyVGltZW91dCk7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmhpZGVUaW1lb3V0KTtcbiAgICAgICAgaWYgKHRoaXMucG9wdXBFbCkge1xuICAgICAgICAgICAgdGhpcy5wb3B1cEVsLnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5wb3B1cEVsID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudGFza1JlZnJlc2hEZWJvdW5jZVRpbWVyID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudGFza0NhY2hlID0gbmV3IE1hcCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlTW9udGhUaXRsZSgpIHtcbiAgICAgICAgdGhpcy5wb3B1bGF0ZVN0eWxlZFRpdGxlKHRoaXMubW9udGhOYW1lRWwsIHRoaXMuZGlzcGxheWVkTW9udGgpO1xuICAgIH1cblxuICAgIGNoYW5nZU1vbnRoKG9mZnNldCwgdG9Ub2RheSA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0b1RvZGF5KSB7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXllZE1vbnRoID0gbmV3IERhdGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheWVkTW9udGguc2V0TW9udGgodGhpcy5kaXNwbGF5ZWRNb250aC5nZXRNb250aCgpICsgb2Zmc2V0LCAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudXBkYXRlTW9udGhUaXRsZSgpO1xuICAgICAgICB0aGlzLnJlbmRlckNhbGVuZGFyKCk7XG4gICAgICAgIHRoaXMudXBkYXRlVG9kYXlCdG5BcmlhTGFiZWwoKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZURheUhlYWRlckhpZ2hsaWdodCgpO1xuICAgIH1cblxuICAgIHVwZGF0ZVRvZGF5QnRuQXJpYUxhYmVsKCkge1xuICAgICAgICBpZiAoIXRoaXMudG9kYXlCdG4pIHJldHVybjtcblxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCBpc0N1cnJlbnRNb250aCA9IHRoaXMuZGlzcGxheWVkTW9udGguZ2V0RnVsbFllYXIoKSA9PT0gbm93LmdldEZ1bGxZZWFyKCkgJiYgdGhpcy5kaXNwbGF5ZWRNb250aC5nZXRNb250aCgpID09PSBub3cuZ2V0TW9udGgoKTtcblxuICAgICAgICBpZiAodGhpcy5pc1BvcHVwTG9ja2VkKSB7XG4gICAgICAgICAgICAvLyBJZiBwb3B1cHMgYXJlIGxvY2tlZCAoYWNjZW50IG9uKSwgdGhlIG9ubHkgYWN0aW9uIGlzIHRvIGVuYWJsZSB0aGVtLlxuICAgICAgICAgICAgdGhpcy50b2RheUJ0bi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnVGFwIHRvIGVuYWJsZSBjYWxlbmRhciBwb3B1cHMnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIElmIHBvcHVwcyBhcmUgdW5sb2NrZWQgKGFjY2VudCBvZmYpLi4uXG4gICAgICAgICAgICBpZiAoaXNDdXJyZW50TW9udGgpIHtcbiAgICAgICAgICAgICAgICAvLyAuLi5hbmQgd2UncmUgb24gdGhlIGN1cnJlbnQgbW9udGgsIHRoZSBuZXh0IGFjdGlvbiBpcyB0byBkaXNhYmxlIHRoZW0uXG4gICAgICAgICAgICAgICAgdGhpcy50b2RheUJ0bi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnVGFwIHRvIGRpc2FibGUgY2FsZW5kYXIgcG9wdXBzJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIC4uLmFuZCB3ZSdyZSBvbiBhIGRpZmZlcmVudCBtb250aCwgdGhlIGFjdGlvbiBpcyB0byBuYXZpZ2F0ZS5cbiAgICAgICAgICAgICAgICB0aGlzLnRvZGF5QnRuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdHbyB0byB0b2RheScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBrZXlib2FyZCBldmVudCBsaXN0ZW5lcnMgdG8gYSByb3cgZWxlbWVudCBmb3IgbGlzdCBuYXZpZ2F0aW9uLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHJvdyBUaGUgcm93IGVsZW1lbnQgKGUuZy4sIGEgYC5ub3RlLXJvd2Agb3IgYC50YXNrLXJvd2ApLlxuICAgICAqIEBwYXJhbSB7SFRNTElucHV0RWxlbWVudH0gc2VhcmNoSW5wdXRFbCBUaGUgc2VhcmNoIGlucHV0IGFzc29jaWF0ZWQgd2l0aCB0aGUgbGlzdC5cbiAgICAgKi9cbiAgICBhZGRLZXlkb3duTGlzdGVuZXJzKHJvdywgc2VhcmNoSW5wdXRFbCkge1xuICAgICAgICByb3cuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIC0xKTsgLy8gTWFrZSB0aGUgcm93IGZvY3VzYWJsZS5cbiAgICAgICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHJvdy5jbGljaygpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGUua2V5ICE9PSAnQXJyb3dEb3duJyAmJiBlLmtleSAhPT0gJ0Fycm93VXAnKSByZXR1cm47XG5cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcm93LmNsb3Nlc3QoJy5ub3Rlcy1jb250YWluZXIsIC50YXNrcy1jb250YWluZXInKTtcbiAgICAgICAgICAgIGlmICghY29udGFpbmVyKSByZXR1cm47XG5cbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbShjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLm5vdGUtcm93LCAudGFzay1yb3cnKSk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SW5kZXggPSBpdGVtcy5pbmRleE9mKHJvdyk7XG5cbiAgICAgICAgICAgIGxldCBuZXh0SW5kZXggPSBlLmtleSA9PT0gJ0Fycm93RG93bicgPyBjdXJyZW50SW5kZXggKyAxIDogY3VycmVudEluZGV4IC0gMTtcblxuICAgICAgICAgICAgaWYgKG5leHRJbmRleCA+PSAwICYmIG5leHRJbmRleCA8IGl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGl0ZW1zW25leHRJbmRleF0uZm9jdXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd1VwJyAmJiBzZWFyY2hJbnB1dEVsKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgYXQgdGhlIHRvcCBvZiB0aGUgbGlzdCwgZm9jdXMgdGhlIHNlYXJjaCBpbnB1dC5cbiAgICAgICAgICAgICAgICBzZWFyY2hJbnB1dEVsLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBvcHVsYXRlcyB0aGUgXCJOb3Rlc1wiIHRhYiB3aXRoIGVpdGhlciByZWNlbnQgb3IgcGlubmVkIG5vdGVzLlxuICAgICAqL1xuICAgIGFzeW5jIHBvcHVsYXRlTm90ZXMoKSB7XG4gICAgICAgIGlmICghdGhpcy5ub3Rlc0NvbnRlbnRFbCkgcmV0dXJuO1xuICAgICAgICB0aGlzLm5vdGVzQ29udGVudEVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcbiAgICAgICAgbGV0IG5vdGVzVG9TaG93ID0gW107XG5cbiAgICAgICAgLy8gLS0tIDEuIEZJTFRFUiBBTkQgU09SVCBOT1RFUyAtLS1cbiAgICAgICAgaWYgKHRoaXMubm90ZXNWaWV3TW9kZSA9PT0gJ3Bpbm5lZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHBpblZhbHVlID0gc2V0dGluZ3MucGluVGFnLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBub3Rlc1RvU2hvdyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZmlsZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgICAgICBpZiAoIWNhY2hlKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBpZiAoY2FjaGUudGFncz8uc29tZSh0YWcgPT4gdGFnLnRhZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBpblZhbHVlKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBjYWNoZS5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZnJvbnRtYXR0ZXJba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocGluVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUuc29tZShpdGVtID0+IHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJyAmJiBpdGVtLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocGluVmFsdWUpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5waW5uZWRTb3J0T3JkZXIgPT09ICd6LWEnKSB7XG4gICAgICAgICAgICAgICAgbm90ZXNUb1Nob3cuc29ydCgoYSwgYikgPT4gYi5iYXNlbmFtZS5sb2NhbGVDb21wYXJlKGEuYmFzZW5hbWUpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5waW5uZWRTb3J0T3JkZXIgPT09ICdjdXN0b20nKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VzdG9tT3JkZXIgPSBzZXR0aW5ncy5waW5uZWROb3Rlc0N1c3RvbU9yZGVyO1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgcm9idXN0IHNvcnQgaGFuZGxlcyBuZXcgaXRlbXMgbm90IHlldCBpbiB0aGUgY3VzdG9tIG9yZGVyIGFycmF5LlxuICAgICAgICAgICAgICAgIG5vdGVzVG9TaG93LnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXhBID0gY3VzdG9tT3JkZXIuaW5kZXhPZihhLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleEIgPSBjdXN0b21PcmRlci5pbmRleE9mKGIucGF0aCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgYm90aCBpdGVtcyBhcmUgaW4gdGhlIGN1c3RvbSBvcmRlciwgc29ydCBieSB0aGVpciBwb3NpdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4QSAhPT0gLTEgJiYgaW5kZXhCICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4QSAtIGluZGV4QjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBvbmx5IEEgaXMgaW4gdGhlIG9yZGVyLCBpdCBjb21lcyBmaXJzdC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4QSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBvbmx5IEIgaXMgaW4gdGhlIG9yZGVyLCBpdCBjb21lcyBmaXJzdC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4QiAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIG5laXRoZXIgaXMgaW4gdGhlIG9yZGVyIChlLmcuLCBuZXcgcGlubmVkIG5vdGVzKSwgc29ydCB0aGVtIGFscGhhYmV0aWNhbGx5LlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5iYXNlbmFtZS5sb2NhbGVDb21wYXJlKGIuYmFzZW5hbWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHsgLy8gYS16XG4gICAgICAgICAgICAgICAgbm90ZXNUb1Nob3cuc29ydCgoYSwgYikgPT4gYS5iYXNlbmFtZS5sb2NhbGVDb21wYXJlKGIuYmFzZW5hbWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHsgLy8gcmVjZW50IG5vdGVzIG1vZGVcbiAgICAgICAgICAgIGNvbnN0IGN1dG9mZiA9IG1vbWVudCgpLnN1YnRyYWN0KHNldHRpbmdzLm5vdGVzTG9va2JhY2tEYXlzLCAnZGF5cycpLnZhbHVlT2YoKTtcbiAgICAgICAgICAgIG5vdGVzVG9TaG93ID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAgICAgICAgICAgLmZpbHRlcihmaWxlID0+ICFzZXR0aW5ncy5pZ25vcmVGb2xkZXJzLnNvbWUoZiA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aChmKSkgJiYgKGZpbGUuc3RhdC5tdGltZSA+PSBjdXRvZmYgfHwgZmlsZS5zdGF0LmN0aW1lID49IGN1dG9mZikpXG4gICAgICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGIuc3RhdC5tdGltZSAtIGEuc3RhdC5tdGltZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAtLS0gMi4gQVBQTFkgU0VBUkNIIFRFUk0gLS0tXG4gICAgICAgIGNvbnN0IHNlYXJjaFRlcm0gPSB0aGlzLm5vdGVzU2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIGNvbnN0IGZpbHRlcmVkTm90ZXMgPSBzZWFyY2hUZXJtID9cbiAgICAgICAgICAgIG5vdGVzVG9TaG93LmZpbHRlcihmaWxlID0+IGZpbGUuYmFzZW5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXJtKSkgOlxuICAgICAgICAgICAgbm90ZXNUb1Nob3c7XG5cbiAgICAgICAgaWYgKGZpbHRlcmVkTm90ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5ub3Rlc1ZpZXdNb2RlID09PSAncGlubmVkJyA/ICdObyBwaW5uZWQgbm90ZXMgZm91bmQuJyA6ICdObyByZWNlbnQgbm90ZXMgZm91bmQuJztcbiAgICAgICAgICAgIHRoaXMubm90ZXNDb250ZW50RWwuY3JlYXRlRGl2KHsgdGV4dDogbWVzc2FnZSwgY2xzOiAndGFzay1ncm91cC1lbXB0eS1tZXNzYWdlJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLSAzLiBSRU5ERVIgVEhFIFZJRVcgLS0tXG4gICAgICAgIGlmICh0aGlzLm5vdGVzVmlld01vZGUgPT09ICdwaW5uZWQnKSB7XG4gICAgICAgICAgICBjb25zdCBncm91cENvbnRhaW5lciA9IHRoaXMubm90ZXNDb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1jb250YWluZXInIH0pO1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1oZWFkZXInIH0pO1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyQ29udGVudCA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLWdyb3VwLWhlYWRlci1jb250ZW50JywgYXR0cjogeyAnYXJpYS1saXZlJzogJ3BvbGl0ZScgfSB9KTtcbiAgICAgICAgICAgIHNldEljb24oaGVhZGVyQ29udGVudCwgc2V0dGluZ3MudGFiSWNvbnMucGlubmVkIHx8ICdwaW4nKTtcbiAgICAgICAgICAgIGhlYWRlckNvbnRlbnQuY3JlYXRlU3Bhbih7IHRleHQ6ICdQaW5uZWQgTm90ZXMnIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBzb3J0SW5kaWNhdG9yID0gaGVhZGVyQ29udGVudC5jcmVhdGVTcGFuKHsgY2xzOiAncGlubmVkLXNvcnQtaW5kaWNhdG9yJyB9KTtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVNvcnRWaXN1YWxzID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBpbm5lZFNvcnRPcmRlciA9PT0gJ3otYScpIHtcbiAgICAgICAgICAgICAgICAgICAgc29ydEluZGljYXRvci5zZXRUZXh0KCdaLUEnKTtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyQ29udGVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnQ3VycmVudCBzb3J0OiBaLUEuIENsaWNrIGZvciBDdXN0b20gc29ydC4nKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGlubmVkU29ydE9yZGVyID09PSAnY3VzdG9tJykge1xuICAgICAgICAgICAgICAgICAgICBzb3J0SW5kaWNhdG9yLnNldFRleHQoJ0N1c3RvbScpO1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJDb250ZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdDdXJyZW50IHNvcnQ6IEN1c3RvbS4gQ2xpY2sgZm9yIEEtWiBzb3J0LicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIGEtelxuICAgICAgICAgICAgICAgICAgICBzb3J0SW5kaWNhdG9yLnNldFRleHQoJ0EtWicpO1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJDb250ZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdDdXJyZW50IHNvcnQ6IEEtWi4gQ2xpY2sgZm9yIFotQSBzb3J0LicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB1cGRhdGVTb3J0VmlzdWFscygpO1xuXG4gICAgICAgICAgICBoZWFkZXJDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBpbm5lZFNvcnRPcmRlciA9PT0gJ2EteicpIHRoaXMucGlubmVkU29ydE9yZGVyID0gJ3otYSc7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5waW5uZWRTb3J0T3JkZXIgPT09ICd6LWEnKSB0aGlzLnBpbm5lZFNvcnRPcmRlciA9ICdjdXN0b20nO1xuICAgICAgICAgICAgICAgIGVsc2UgdGhpcy5waW5uZWRTb3J0T3JkZXIgPSAnYS16JztcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVsYXRlTm90ZXMoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1jb3VudCcsIHRleHQ6IGZpbHRlcmVkTm90ZXMubGVuZ3RoLnRvU3RyaW5nKCkgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGxpc3RXcmFwcGVyID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1saXN0LXdyYXBwZXInIH0pO1xuXG4gICAgICAgICAgICBsaXN0V3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlUGlubmVkT3JkZXIobGlzdFdyYXBwZXIpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZpbHRlcmVkTm90ZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck5vdGVJdGVtKGZpbGUsIGxpc3RXcmFwcGVyKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBncm91cHMgPSB7IHRvZGF5OiBbXSwgeWVzdGVyZGF5OiBbXSwgdGhpc1dlZWs6IFtdLCBsYXN0V2VlazogW10sIHRoaXNNb250aDogW10sIG9sZGVyOiBbXSB9O1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gbW9tZW50KCk7XG5cbiAgICAgICAgICAgIGZpbHRlcmVkTm90ZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RUaW1lID0gbW9tZW50KGZpbGUuc3RhdC5tdGltZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1vZFRpbWUuaXNTYW1lKG5vdywgJ2RheScpKSBncm91cHMudG9kYXkucHVzaChmaWxlKTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtb2RUaW1lLmlzU2FtZShub3cuY2xvbmUoKS5zdWJ0cmFjdCgxLCAnZGF5JyksICdkYXknKSkgZ3JvdXBzLnllc3RlcmRheS5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1vZFRpbWUuaXNTYW1lKG5vdywgJ3dlZWsnKSkgZ3JvdXBzLnRoaXNXZWVrLnB1c2goZmlsZSk7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobW9kVGltZS5pc1NhbWUobm93LmNsb25lKCkuc3VidHJhY3QoMSwgJ3dlZWsnKSwgJ3dlZWsnKSkgZ3JvdXBzLmxhc3RXZWVrLnB1c2goZmlsZSk7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobW9kVGltZS5pc1NhbWUobm93LCAnbW9udGgnKSkgZ3JvdXBzLnRoaXNNb250aC5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgICAgIGVsc2UgZ3JvdXBzLm9sZGVyLnB1c2goZmlsZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgZ3JvdXBPcmRlciA9IFtcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RvZGF5JywgbGFiZWw6ICdUb2RheScgfSxcbiAgICAgICAgICAgICAgICB7IGtleTogJ3llc3RlcmRheScsIGxhYmVsOiAnWWVzdGVyZGF5JyB9LFxuICAgICAgICAgICAgICAgIHsga2V5OiAndGhpc1dlZWsnLCBsYWJlbDogJ1RoaXMgV2VlaycgfSxcbiAgICAgICAgICAgICAgICB7IGtleTogJ2xhc3RXZWVrJywgbGFiZWw6ICdMYXN0IFdlZWsnIH0sXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0aGlzTW9udGgnLCBsYWJlbDogJ1RoaXMgTW9udGgnIH0sXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdvbGRlcicsIGxhYmVsOiAnT2xkZXInIH0sXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICBncm91cE9yZGVyLmZvckVhY2goZ3JvdXBJbmZvID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBub3Rlc0luR3JvdXAgPSBncm91cHNbZ3JvdXBJbmZvLmtleV07XG4gICAgICAgICAgICAgICAgaWYgKG5vdGVzSW5Hcm91cC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwQ29udGFpbmVyID0gdGhpcy5ub3Rlc0NvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLWdyb3VwLWNvbnRhaW5lcicgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQ29sbGFwc2VkID0gdGhpcy5jb2xsYXBzZWROb3RlR3JvdXBzW2dyb3VwSW5mby5rZXldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNDb2xsYXBzZWQpIGdyb3VwQ29udGFpbmVyLmFkZENsYXNzKCdpcy1jb2xsYXBzZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXIgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLWdyb3VwLWhlYWRlcicgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlckNvbnRlbnQgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1oZWFkZXItY29udGVudCcgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbGxhcHNlSWNvbiA9IGhlYWRlckNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1jb2xsYXBzZS1pY29uJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgc2V0SWNvbihjb2xsYXBzZUljb24sICdjaGV2cm9uLWRvd24nKTtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyQ29udGVudC5jcmVhdGVTcGFuKHsgdGV4dDogZ3JvdXBJbmZvLmxhYmVsIH0pO1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS1ncm91cC1jb3VudCcsIHRleHQ6IG5vdGVzSW5Hcm91cC5sZW5ndGgudG9TdHJpbmcoKSB9KTtcblxuICAgICAgICAgICAgICAgICAgICBoZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50bHlDb2xsYXBzZWQgPSBncm91cENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdpcy1jb2xsYXBzZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VkTm90ZUdyb3Vwc1tncm91cEluZm8ua2V5XSA9IGN1cnJlbnRseUNvbGxhcHNlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaXN0V3JhcHBlciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ25vdGUtbGlzdC13cmFwcGVyJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgbm90ZXNJbkdyb3VwLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck5vdGVJdGVtKGZpbGUsIGxpc3RXcmFwcGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTY2FucyB0aGUgdmF1bHQgZm9yIHRhc2tzLCBmaWx0ZXJzIGFuZCBzb3J0cyB0aGVtLCBhbmQgcG9wdWxhdGVzIHRoZSBcIlRhc2tzXCIgdGFiLlxuICAgICAqL1xuICAgIGFzeW5jIHBvcHVsYXRlVGFza3MoKSB7XG4gICAgICAgIGlmICghdGhpcy50YXNrc0NvbnRlbnRFbCkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG4gICAgICAgIHRoaXMudGFza3NDb250ZW50RWwudG9nZ2xlQ2xhc3MoJ3Nob3ctZnVsbC10ZXh0JywgIXNldHRpbmdzLnRhc2tUZXh0VHJ1bmNhdGUpO1xuXG4gICAgICAgIGlmICh0aGlzLnRhc2tDYWNoZSkgeyB0aGlzLnRhc2tDYWNoZS5jbGVhcigpOyB9IGVsc2UgeyB0aGlzLnRhc2tDYWNoZSA9IG5ldyBNYXAoKTsgfVxuXG4gICAgICAgIGNvbnN0IHRhc2tJZ25vcmVGb2xkZXJzID0gKHNldHRpbmdzLnRhc2tJZ25vcmVGb2xkZXJzIHx8IFtdKS5tYXAoZiA9PiBmLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy8nKSA/IGYudG9Mb3dlckNhc2UoKSA6IGYudG9Mb3dlckNhc2UoKSArICcvJyk7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcihmaWxlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoTG93ZXIgPSBmaWxlLnBhdGgudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHJldHVybiAhdGFza0lnbm9yZUZvbGRlcnMuc29tZShmb2xkZXIgPT4gZm9sZGVyICYmIGZpbGVQYXRoTG93ZXIuc3RhcnRzV2l0aChmb2xkZXIpKTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICBsZXQgYWxsVGFza3MgPSBbXTtcbiAgICAgICAgY29uc3QgdGFza1JlZ2V4ID0gL15cXHMqKD86LXxcXGQrXFwuKVxccypcXFsoLilcXF1cXHMqKC4qKS87XG4gICAgICAgIGNvbnN0IGR1ZURhdGVSZWdleCA9IC/wn5OFXFxzKihcXGR7NH0tXFxkezJ9LVxcZHsyfSkvO1xuICAgICAgICBjb25zdCBjb21wbGV0aW9uRGF0ZVJlZ2V4ID0gL+KchVxccyooXFxkezR9LVxcZHsyfS1cXGR7Mn0pLztcbiAgICAgICAgY29uc3QgdGFnUmVnZXggPSAvIyhbYS16QS1aMC05X1xcLVxcL10rKS9nO1xuXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQoZmlsZSk7XG4gICAgICAgICAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuXG4gICAgICAgICAgICB0aGlzLnRhc2tDYWNoZS5zZXQoZmlsZS5wYXRoLCB0aGlzLmV4dHJhY3RUYXNrTGluZXMoY29udGVudCkpO1xuXG4gICAgICAgICAgICBsaW5lcy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gbGluZS5tYXRjaCh0YXNrUmVnZXgpO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGF0dXMgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IG1hdGNoWzJdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0NvbXBsZXRlZCA9IHN0YXR1cy50b0xvd2VyQ2FzZSgpID09PSAneCc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb25EYXRlTWF0Y2ggPSB0ZXh0Lm1hdGNoKGNvbXBsZXRpb25EYXRlUmVnZXgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uRGF0ZSA9IGNvbXBsZXRpb25EYXRlTWF0Y2ggPyBtb21lbnQoY29tcGxldGlvbkRhdGVNYXRjaFsxXSwgXCJZWVlZLU1NLUREXCIpLnRvRGF0ZSgpIDogbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNDb21wbGV0ZWQgJiYgIShzZXR0aW5ncy5zaG93Q29tcGxldGVkVGFza3NUb2RheSAmJiBjb21wbGV0aW9uRGF0ZSAmJiBpc1NhbWVEYXkoY29tcGxldGlvbkRhdGUsIG5ldyBEYXRlKCkpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHVlRGF0ZU1hdGNoID0gdGV4dC5tYXRjaChkdWVEYXRlUmVnZXgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkdWVEYXRlID0gZHVlRGF0ZU1hdGNoID8gbW9tZW50KGR1ZURhdGVNYXRjaFsxXSwgXCJZWVlZLU1NLUREXCIpLnRvRGF0ZSgpIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFncyA9IEFycmF5LmZyb20odGV4dC5tYXRjaEFsbCh0YWdSZWdleCkpLm1hcChtID0+IG1bMV0pO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZGlzcGxheVRleHQgPSB0ZXh0LnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheVRleHQgPSBkaXNwbGF5VGV4dC5yZXBsYWNlKGNvbXBsZXRpb25EYXRlUmVnZXgsICcnKS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYWxsVGFza3MucHVzaCh7IHRleHQ6IGRpc3BsYXlUZXh0LCBmaWxlLCBsaW5lTnVtYmVyOiBpbmRleCwgZHVlRGF0ZSwgdGFncywgc3RhdHVzLCBjb21wbGV0aW9uRGF0ZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNlYXJjaFRlcm0gPSB0aGlzLnRhc2tzU2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBsZXQgZmlsdGVyZWRUYXNrcyA9IGFsbFRhc2tzLmZpbHRlcih0YXNrID0+ICFzZWFyY2hUZXJtIHx8IHRhc2sudGV4dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0pKTtcblxuICAgICAgICBmaWx0ZXJlZFRhc2tzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy50YXNrU29ydE9yZGVyID09PSAnYS16JykgcmV0dXJuIGEudGV4dC5sb2NhbGVDb21wYXJlKGIudGV4dCk7XG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MudGFza1NvcnRPcmRlciA9PT0gJ3otYScpIHJldHVybiBiLnRleHQubG9jYWxlQ29tcGFyZShhLnRleHQpO1xuICAgICAgICAgICAgaWYgKGEuZHVlRGF0ZSAmJiBiLmR1ZURhdGUpIHJldHVybiBhLmR1ZURhdGUgLSBiLmR1ZURhdGU7XG4gICAgICAgICAgICByZXR1cm4gYS5kdWVEYXRlID8gLTEgOiAoYi5kdWVEYXRlID8gMSA6IGEudGV4dC5sb2NhbGVDb21wYXJlKGIudGV4dCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyAyLiBNQVAgRVhJU1RJTkcgRE9NIEdST1VQU1xuICAgICAgICBjb25zdCBleGlzdGluZ0dyb3VwcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy50YXNrc0NvbnRlbnRFbC5xdWVyeVNlbGVjdG9yQWxsKCcudGFzay1ncm91cC1jb250YWluZXInKS5mb3JFYWNoKGdyb3VwRWwgPT4ge1xuICAgICAgICAgICAgaWYgKGdyb3VwRWwuZGF0YXNldC5ncm91cEtleSkge1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nR3JvdXBzLnNldChncm91cEVsLmRhdGFzZXQuZ3JvdXBLZXksIGdyb3VwRWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyAzLiBHRVQgTkVXIEdST1VQIERBVEFcbiAgICAgICAgY29uc3QgbmV3R3JvdXBEYXRhID0gc2V0dGluZ3MudGFza0dyb3VwQnkgPT09ICd0YWcnXG4gICAgICAgICAgICA/IHRoaXMuZ3JvdXBUYXNrc0J5VGFnKGZpbHRlcmVkVGFza3MpXG4gICAgICAgICAgICA6IHRoaXMuZ3JvdXBUYXNrc0J5RGF0ZShmaWx0ZXJlZFRhc2tzKTtcblxuICAgICAgICBjb25zdCBncm91cE9yZGVyID0gT2JqZWN0LmtleXMobmV3R3JvdXBEYXRhKTtcblxuICAgICAgICAvLyA0LiBSRUNPTkNJTEUgR1JPVVBTXG4gICAgICAgIGxldCBsYXN0RWxlbWVudCA9IG51bGw7XG4gICAgICAgIGdyb3VwT3JkZXIuZm9yRWFjaChncm91cEtleSA9PiB7XG4gICAgICAgICAgICBjb25zdCBncm91cERhdGEgPSBuZXdHcm91cERhdGFbZ3JvdXBLZXldO1xuICAgICAgICAgICAgbGV0IGdyb3VwRWwgPSBleGlzdGluZ0dyb3Vwcy5nZXQoZ3JvdXBLZXkpO1xuXG4gICAgICAgICAgICBpZiAoZ3JvdXBFbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlckNvbnRlbnQgPSBncm91cEVsLnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWdyb3VwLWhlYWRlci1jb250ZW50IHNwYW46bGFzdC1jaGlsZCcpO1xuICAgICAgICAgICAgICAgIGlmIChoZWFkZXJDb250ZW50KSBoZWFkZXJDb250ZW50LnRleHRDb250ZW50ID0gYCR7Z3JvdXBEYXRhLnRpdGxlfSAoJHtncm91cERhdGEudGFza3MubGVuZ3RofSlgO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5yZWNvbmNpbGVUYXNrTGlzdChncm91cEVsLnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWxpc3Qtd3JhcHBlcicpLCBncm91cERhdGEudGFza3MpO1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nR3JvdXBzLmRlbGV0ZShncm91cEtleSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGdyb3VwRWwgPSB0aGlzLnJlbmRlclRhc2tHcm91cChncm91cEtleSwgZ3JvdXBEYXRhKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGxhc3RFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgbGFzdEVsZW1lbnQuYWZ0ZXIoZ3JvdXBFbCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudGFza3NDb250ZW50RWwucHJlcGVuZChncm91cEVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxhc3RFbGVtZW50ID0gZ3JvdXBFbDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gNS4gUkVNT1ZFIE9MRCBHUk9VUFNcbiAgICAgICAgZXhpc3RpbmdHcm91cHMuZm9yRWFjaChncm91cEVsID0+IGdyb3VwRWwucmVtb3ZlKCkpO1xuXG4gICAgICAgIGlmICh0aGlzLnRhc2tzQ29udGVudEVsLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgLy8gQ2xlYXIgYW55IG9sZCBtZXNzYWdlIGFuZCBhZGQgYSBuZXcgb25lXG4gICAgICAgICAgICB0aGlzLnRhc2tzQ29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gc2VhcmNoVGVybSA/ICdObyB0YXNrcyBtYXRjaCB5b3VyIHNlYXJjaCB0ZXJtLicgOiAnTm8gdGFza3MgZm91bmQnO1xuICAgICAgICAgICAgdGhpcy50YXNrc0NvbnRlbnRFbC5jcmVhdGVEaXYoeyB0ZXh0OiBtZXNzYWdlLCBjbHM6ICd0YXNrLWdyb3VwLWVtcHR5LW1lc3NhZ2UnIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIGFueSBcIm5vIHRhc2tzXCIgbWVzc2FnZSBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgIGNvbnN0IGVtcHR5TWVzc2FnZSA9IHRoaXMudGFza3NDb250ZW50RWwucXVlcnlTZWxlY3RvcignLnRhc2stZ3JvdXAtZW1wdHktbWVzc2FnZScpO1xuICAgICAgICAgICAgaWYgKGVtcHR5TWVzc2FnZSkgZW1wdHlNZXNzYWdlLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0VGFza0tleSh0YXNrKSB7XG4gICAgICAgIHJldHVybiBgJHt0YXNrLmZpbGUucGF0aH06JHt0YXNrLmxpbmVOdW1iZXJ9YDtcbiAgICB9XG5cbiAgICB1cGRhdGVUYXNrSXRlbSh0YXNrUm93RWwsIHRhc2spIHtcbiAgICAgICAgaWYgKHRhc2tSb3dFbC5kYXRhc2V0LnRhc2tTdGF0dXMgIT09IHRhc2suc3RhdHVzKSB7XG4gICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IHRhc2tSb3dFbC5xdWVyeVNlbGVjdG9yKCcudGFzay1jaGVja2JveC1zeW1ib2wnKTtcbiAgICAgICAgICAgIGlmIChjaGVja2JveCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlclRhc2tTeW1ib2woY2hlY2tib3gsIHRhc2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFza1Jvd0VsLmRhdGFzZXQudGFza1N0YXR1cyA9IHRhc2suc3RhdHVzO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGV4dEVsID0gdGFza1Jvd0VsLnF1ZXJ5U2VsZWN0b3IoJy50YXNrLXRleHQnKTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdUZXh0ID0gdGV4dEVsID8gdGV4dEVsLnRleHRDb250ZW50IDogJyc7XG4gICAgICAgIGlmICh0ZXh0RWwgJiYgZXhpc3RpbmdUZXh0ICE9PSB0YXNrLnRleHQpIHtcbiAgICAgICAgICAgIHRleHRFbC5lbXB0eSgpO1xuICAgICAgICAgICAgTWFya2Rvd25SZW5kZXJlci5yZW5kZXIodGhpcy5hcHAsIHRhc2sudGV4dCwgdGV4dEVsLCB0YXNrLmZpbGUucGF0aCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBncm91cFRhc2tzQnlEYXRlKHRhc2tzKSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG4gICAgICAgIGNvbnN0IG5vdyA9IG1vbWVudCgpLnN0YXJ0T2YoJ2RheScpO1xuICAgICAgICBjb25zdCBncm91cHNEYXRhID0geyBvdmVyZHVlOiBbXSwgdG9kYXk6IFtdLCB0b21vcnJvdzogW10sIG5leHQ3ZGF5czogW10sIGZ1dHVyZTogW10sIG5vRGF0ZTogW10gfTtcblxuICAgICAgICB0YXNrcy5mb3JFYWNoKHRhc2sgPT4ge1xuICAgICAgICAgICAgaWYgKCF0YXNrLmR1ZURhdGUpIHsgZ3JvdXBzRGF0YS5ub0RhdGUucHVzaCh0YXNrKTsgcmV0dXJuOyB9XG4gICAgICAgICAgICBjb25zdCBkdWUgPSBtb21lbnQodGFzay5kdWVEYXRlKS5zdGFydE9mKCdkYXknKTtcbiAgICAgICAgICAgIGlmIChkdWUuaXNCZWZvcmUobm93KSkgZ3JvdXBzRGF0YS5vdmVyZHVlLnB1c2godGFzayk7XG4gICAgICAgICAgICBlbHNlIGlmIChkdWUuaXNTYW1lKG5vdykpIGdyb3Vwc0RhdGEudG9kYXkucHVzaCh0YXNrKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGR1ZS5pc1NhbWUobm93LmNsb25lKCkuYWRkKDEsICdkYXknKSkpIGdyb3Vwc0RhdGEudG9tb3Jyb3cucHVzaCh0YXNrKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGR1ZS5pc1NhbWVPckJlZm9yZShub3cuY2xvbmUoKS5hZGQoNywgJ2RheXMnKSkpIGdyb3Vwc0RhdGEubmV4dDdkYXlzLnB1c2godGFzayk7XG4gICAgICAgICAgICBlbHNlIGdyb3Vwc0RhdGEuZnV0dXJlLnB1c2godGFzayk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGljb25zID0gc2V0dGluZ3MudGFza0dyb3VwSWNvbnMgfHwgREVGQVVMVF9TRVRUSU5HUy50YXNrR3JvdXBJY29ucztcbiAgICAgICAgY29uc3QgZ3JvdXBPcmRlciA9IFtcbiAgICAgICAgICAgIHsga2V5OiAnb3ZlcmR1ZScsIHRpdGxlOiAnT3ZlcmR1ZScsIGljb246IGljb25zLm92ZXJkdWUsIGNvbG9yOiBzZXR0aW5ncy50YXNrR3JvdXBDb2xvck92ZXJkdWUgfSxcbiAgICAgICAgICAgIHsga2V5OiAndG9kYXknLCB0aXRsZTogJ1RvZGF5JywgaWNvbjogaWNvbnMudG9kYXksIGNvbG9yOiBzZXR0aW5ncy50YXNrR3JvdXBDb2xvclRvZGF5IH0sXG4gICAgICAgICAgICB7IGtleTogJ3RvbW9ycm93JywgdGl0bGU6ICdUb21vcnJvdycsIGljb246IGljb25zLnRvbW9ycm93LCBjb2xvcjogc2V0dGluZ3MudGFza0dyb3VwQ29sb3JUb21vcnJvdyB9LFxuICAgICAgICAgICAgeyBrZXk6ICduZXh0N2RheXMnLCB0aXRsZTogJ05leHQgNyBEYXlzJywgaWNvbjogaWNvbnMubmV4dDdkYXlzLCBjb2xvcjogc2V0dGluZ3MudGFza0dyb3VwQ29sb3JOZXh0N0RheXMgfSxcbiAgICAgICAgICAgIHsga2V5OiAnZnV0dXJlJywgdGl0bGU6ICdGdXR1cmUnLCBpY29uOiBpY29ucy5mdXR1cmUsIGNvbG9yOiBzZXR0aW5ncy50YXNrR3JvdXBDb2xvckZ1dHVyZSB9LFxuICAgICAgICAgICAgeyBrZXk6ICdub0RhdGUnLCB0aXRsZTogJ05vIER1ZSBEYXRlJywgaWNvbjogaWNvbnMubm9EYXRlLCBjb2xvcjogc2V0dGluZ3MudGFza0dyb3VwQ29sb3JOb0RhdGUgfVxuICAgICAgICBdO1xuXG4gICAgICAgIGNvbnN0IGZpbmFsR3JvdXBzID0ge307XG4gICAgICAgIGdyb3VwT3JkZXIuZm9yRWFjaChnID0+IHtcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy50YXNrRGF0ZUdyb3Vwc1RvU2hvdy5pbmNsdWRlcyhnLmtleSkgfHwgZy5rZXkgPT09ICdub0RhdGUnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdyb3Vwc0RhdGFbZy5rZXldLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZmluYWxHcm91cHNbZy5rZXldID0geyAuLi5nLCB0YXNrczogZ3JvdXBzRGF0YVtnLmtleV0gfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmluYWxHcm91cHM7XG4gICAgfVxuXG4gICAgZ3JvdXBUYXNrc0J5VGFnKHRhc2tzKSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG4gICAgICAgIGNvbnN0IGdyb3VwZWRCeVRhZyA9IHRhc2tzLnJlZHVjZSgoYWNjLCB0YXNrKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YWdzID0gdGFzay50YWdzLmxlbmd0aCA+IDAgPyB0YXNrLnRhZ3MgOiBbJyN1bnRhZ2dlZCddO1xuICAgICAgICAgICAgdGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gdGFnLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFhY2Nba2V5XSkgYWNjW2tleV0gPSB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0YWcsXG4gICAgICAgICAgICAgICAgICAgIGljb246IHNldHRpbmdzLnRhc2tHcm91cEljb25zPy50YWcgfHwgJ3RhZycsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBzZXR0aW5ncy50YXNrR3JvdXBDb2xvclRhZyxcbiAgICAgICAgICAgICAgICAgICAgdGFza3M6IFtdXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhY2Nba2V5XS50YXNrcy5wdXNoKHRhc2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB7fSk7XG5cbiAgICAgICAgLy8gU29ydCBncm91cHMgYWxwaGFiZXRpY2FsbHkgYnkgdGFnIG5hbWVcbiAgICAgICAgY29uc3Qgc29ydGVkS2V5cyA9IE9iamVjdC5rZXlzKGdyb3VwZWRCeVRhZykuc29ydCgoYSwgYikgPT4gYS5sb2NhbGVDb21wYXJlKGIpKTtcbiAgICAgICAgY29uc3Qgc29ydGVkR3JvdXBzID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHNvcnRlZEtleXMpIHtcbiAgICAgICAgICAgIHNvcnRlZEdyb3Vwc1trZXldID0gZ3JvdXBlZEJ5VGFnW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNvcnRlZEdyb3VwcztcbiAgICB9XG5cbiAgICByZW5kZXJUYXNrR3JvdXAoa2V5LCBncm91cERhdGEpIHtcbiAgICAgICAgY29uc3QgZ3JvdXBDb250YWluZXIgPSBjcmVhdGVEaXYoeyBjbHM6ICd0YXNrLWdyb3VwLWNvbnRhaW5lcicsIGF0dHI6IHsgc3R5bGU6IGBiYWNrZ3JvdW5kLWNvbG9yOiAke2dyb3VwRGF0YS5jb2xvcn1gIH0gfSk7XG4gICAgICAgIGdyb3VwQ29udGFpbmVyLmRhdGFzZXQuZ3JvdXBLZXkgPSBrZXk7XG5cbiAgICAgICAgY29uc3QgaXNDb2xsYXBzZWQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb2xsYXBzZWRUYXNrR3JvdXBzW2tleV07XG4gICAgICAgIGlmIChpc0NvbGxhcHNlZCkgZ3JvdXBDb250YWluZXIuYWRkQ2xhc3MoJ2lzLWNvbGxhcHNlZCcpO1xuXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3Rhc2stZ3JvdXAtaGVhZGVyJyB9KTtcblxuICAgICAgICBoZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBGaW5kIHRoZSB3cmFwcGVyIGVsZW1lbnQgZm9yIHRoZSBsaXN0XG4gICAgICAgICAgICBjb25zdCB0YXNrTGlzdFdyYXBwZXIgPSBncm91cENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudGFzay1saXN0LXdyYXBwZXInKTtcbiAgICAgICAgICAgIGlmICghdGFza0xpc3RXcmFwcGVyKSByZXR1cm47XG5cbiAgICAgICAgICAgIC8vIENoZWNrIHRoZSBjdXJyZW50IHN0YXRlXG4gICAgICAgICAgICBjb25zdCBpc0N1cnJlbnRseUNvbGxhcHNlZCA9IGdyb3VwQ29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnaXMtY29sbGFwc2VkJyk7XG5cbiAgICAgICAgICAgIGlmIChpc0N1cnJlbnRseUNvbGxhcHNlZCkge1xuICAgICAgICAgICAgICAgIC8vIC0tLSBFWFBBTkRJTkcgLS0tXG4gICAgICAgICAgICAgICAgLy8gMS4gU2V0IHRoZSBDU1MgdmFyaWFibGUgdG8gdGhlIGVsZW1lbnQncyBmdWxsIHNjcm9sbCBoZWlnaHQuXG4gICAgICAgICAgICAgICAgLy8gICAgVGhpcyBnaXZlcyB0aGUgJ2hlaWdodCcgcHJvcGVydHkgYSBzcGVjaWZpYyB2YWx1ZSB0byBhbmltYXRlICp0byouXG4gICAgICAgICAgICAgICAgY29uc3Qgc2Nyb2xsSGVpZ2h0ID0gdGFza0xpc3RXcmFwcGVyLnNjcm9sbEhlaWdodDtcbiAgICAgICAgICAgICAgICB0YXNrTGlzdFdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tdGFzay1saXN0LWhlaWdodCcsIGAke3Njcm9sbEhlaWdodH1weGApO1xuXG4gICAgICAgICAgICAgICAgLy8gMi4gUmVtb3ZlIHRoZSBjbGFzcyB0byB0cmlnZ2VyIHRoZSB0cmFuc2l0aW9uLlxuICAgICAgICAgICAgICAgIGdyb3VwQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWNvbGxhcHNlZCcpO1xuXG4gICAgICAgICAgICAgICAgLy8gQWZ0ZXIgdGhlIGFuaW1hdGlvbiwgcmVtb3ZlIHRoZSBleHBsaWNpdCBoZWlnaHQgdG8gYWxsb3cgZm9yIGR5bmFtaWMgY29udGVudC5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGFza0xpc3RXcmFwcGVyLnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLXRhc2stbGlzdC1oZWlnaHQnKTtcbiAgICAgICAgICAgICAgICB9LCAzNTApOyAvLyBNYXRjaCB0aGlzIHRvIHlvdXIgQ1NTIHRyYW5zaXRpb24gZHVyYXRpb25cblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyAtLS0gQ09MTEFQU0lORyAtLS1cbiAgICAgICAgICAgICAgICAvLyAxLiBTZXQgdGhlIENTUyB2YXJpYWJsZSB0byB0aGUgZWxlbWVudCdzIGN1cnJlbnQgcmVuZGVyZWQgaGVpZ2h0LlxuICAgICAgICAgICAgICAgIC8vICAgIFRoaXMgZ2l2ZXMgdGhlICdoZWlnaHQnIHByb3BlcnR5IGEgc3BlY2lmaWMgdmFsdWUgdG8gYW5pbWF0ZSAqZnJvbSouXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEhlaWdodCA9IHRhc2tMaXN0V3JhcHBlci5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgdGFza0xpc3RXcmFwcGVyLnN0eWxlLnNldFByb3BlcnR5KCctLXRhc2stbGlzdC1oZWlnaHQnLCBgJHtjdXJyZW50SGVpZ2h0fXB4YCk7XG5cbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgbWljcm8tZGVsYXkgdG8gZW5zdXJlIHRoZSBicm93c2VyIHJlZ2lzdGVycyB0aGUgc3RhcnRpbmcgaGVpZ2h0XG4gICAgICAgICAgICAgICAgLy8gYmVmb3JlIGJlaW5nIHRvbGQgdG8gdHJhbnNpdGlvbiB0byAwLiBUaGlzIGlzIHRoZSBrZXkgdG8gZml4aW5nIHRoZSBcImluc3RhbnQgY29sbGFwc2VcIi5cbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyAyLiBBZGQgdGhlIGNsYXNzIHRvIHRyaWdnZXIgdGhlIHRyYW5zaXRpb24gdG8gaGVpZ2h0OiAwLlxuICAgICAgICAgICAgICAgICAgICBncm91cENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdpcy1jb2xsYXBzZWQnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVXBkYXRlIGFuZCBzYXZlIHRoZSBzdGF0ZVxuICAgICAgICAgICAgdGhpcy5jb2xsYXBzZWRUYXNrR3JvdXBzW2tleV0gPSAhaXNDdXJyZW50bHlDb2xsYXBzZWQ7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfSk7XG4gICAgICAgXG4gICAgICAgIGNvbnN0IGhlYWRlckNvbnRlbnQgPSBoZWFkZXIuY3JlYXRlU3Bhbih7IGNsczogJ3Rhc2stZ3JvdXAtaGVhZGVyLWNvbnRlbnQnIH0pO1xuICAgICAgICBjb25zdCBpY29uRWwgPSBoZWFkZXJDb250ZW50LmNyZWF0ZVNwYW4oeyBjbHM6ICdpY29uJyB9KTtcbiAgICAgICAgc2V0SWNvbihpY29uRWwsIGdyb3VwRGF0YS5pY29uKTtcbiAgICAgICAgaGVhZGVyQ29udGVudC5jcmVhdGVTcGFuKHsgdGV4dDogYCR7Z3JvdXBEYXRhLnRpdGxlfSAoJHtncm91cERhdGEudGFza3MubGVuZ3RofSlgIH0pO1xuXG4gICAgICAgIGNvbnN0IGNvbGxhcHNlSWNvbiA9IGhlYWRlci5jcmVhdGVTcGFuKHsgY2xzOiAndGFzay1ncm91cC1jb2xsYXBzZS1pY29uJyB9KTtcbiAgICAgICAgc2V0SWNvbihjb2xsYXBzZUljb24sICdjaGV2cm9uLWRvd24nKTtcblxuICAgICAgICBjb25zdCB0YXNrTGlzdFdyYXBwZXIgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoJ3Rhc2stbGlzdC13cmFwcGVyJyk7XG4gICAgICAgIGdyb3VwRGF0YS50YXNrcy5mb3JFYWNoKHRhc2sgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFza0VsID0gdGhpcy5yZW5kZXJUYXNrSXRlbSh0YXNrKTsgLy8gVXNlIHRoZSBtb2RpZmllZCByZW5kZXJUYXNrSXRlbVxuICAgICAgICAgICAgdGFza0xpc3RXcmFwcGVyLmFwcGVuZENoaWxkKHRhc2tFbCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBncm91cENvbnRhaW5lcjtcbiAgICB9XG5cbiAgICByZWNvbmNpbGVUYXNrTGlzdChsaXN0V3JhcHBlckVsLCBuZXdUYXNrcykge1xuICAgICAgICBjb25zdCBleGlzdGluZ1Rhc2tSb3dzID0gbmV3IE1hcCgpO1xuICAgICAgICBsaXN0V3JhcHBlckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrLXJvdycpLmZvckVhY2gocm93ID0+IHtcbiAgICAgICAgICAgIGlmIChyb3cuZGF0YXNldC5rZXkpIHtcbiAgICAgICAgICAgICAgICBleGlzdGluZ1Rhc2tSb3dzLnNldChyb3cuZGF0YXNldC5rZXksIHJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBsYXN0RWxlbWVudCA9IG51bGw7XG4gICAgICAgIG5ld1Rhc2tzLmZvckVhY2godGFzayA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXNrS2V5ID0gdGhpcy5nZXRUYXNrS2V5KHRhc2spO1xuICAgICAgICAgICAgbGV0IHRhc2tFbCA9IGV4aXN0aW5nVGFza1Jvd3MuZ2V0KHRhc2tLZXkpO1xuXG4gICAgICAgICAgICBpZiAodGFza0VsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUYXNrSXRlbSh0YXNrRWwsIHRhc2spO1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nVGFza1Jvd3MuZGVsZXRlKHRhc2tLZXkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXNrRWwgPSB0aGlzLnJlbmRlclRhc2tJdGVtKHRhc2spO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBFbnN1cmUgdGhlIGVsZW1lbnQgaXMgaW4gdGhlIGNvcnJlY3QgcG9zaXRpb25cbiAgICAgICAgICAgIGlmIChsYXN0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50LmFmdGVyKHRhc2tFbCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxpc3RXcmFwcGVyRWwucHJlcGVuZCh0YXNrRWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGFzdEVsZW1lbnQgPSB0YXNrRWw7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV4aXN0aW5nVGFza1Jvd3MuZm9yRWFjaChyb3cgPT4gcm93LnJlbW92ZSgpKTtcbiAgICB9XG5cblxuICAgIHJlbmRlclRhc2tzQnlUYWcodGFza3MsIHNldHRpbmdzKSB7IC8vIFJlY2VpdmVzICdzZXR0aW5ncycgYXMgYW4gYXJndW1lbnRcbiAgICAgICAgLy8gVGhlIGR1cGxpY2F0ZSBkZWNsYXJhdGlvbiB0aGF0IGNhdXNlZCB0aGUgZXJyb3IgaGFzIGJlZW4gcmVtb3ZlZC5cbiAgICAgICAgdGFza3MgPSB0YXNrcy5maWx0ZXIodGFzayA9PiB7XG4gICAgICAgICAgICBjb25zdCBpc0NvbXBsZXRlZCA9IHRhc2suc3RhdHVzICYmIHRhc2suc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICd4JztcbiAgICAgICAgICAgIGlmICghaXNDb21wbGV0ZWQpIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdzLnNob3dDb21wbGV0ZWRUYXNrc1RvZGF5ICYmIHRhc2suY29tcGxldGlvbkRhdGUgJiYgaXNTYW1lRGF5KHRhc2suY29tcGxldGlvbkRhdGUsIG5ldyBEYXRlKCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBncm91cGVkQnlUYWcgPSB0YXNrcy5yZWR1Y2UoKGFjYywgdGFzaykgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFncyA9IHRhc2sudGFncy5sZW5ndGggPiAwID8gdGFzay50YWdzIDogWycjdW50YWdnZWQnXTtcbiAgICAgICAgICAgIHRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghYWNjW3RhZ10pIGFjY1t0YWddID0gW107XG4gICAgICAgICAgICAgICAgYWNjW3RhZ10ucHVzaCh0YXNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30pO1xuXG4gICAgICAgIE9iamVjdC5rZXlzKGdyb3VwZWRCeVRhZykuc29ydCgpLmZvckVhY2godGFnID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tzSW5Hcm91cCA9IGdyb3VwZWRCeVRhZ1t0YWddO1xuXG4gICAgICAgICAgICBjb25zdCBncm91cENvbnRhaW5lciA9IHRoaXMudGFza3NDb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAndGFzay1ncm91cC1jb250YWluZXInLCBhdHRyOiB7IHN0eWxlOiBgYmFja2dyb3VuZC1jb2xvcjogJHtzZXR0aW5ncy50YXNrR3JvdXBDb2xvclRhZ31gIH0gfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGlzQ29sbGFwc2VkID0gdGhpcy5jb2xsYXBzZWRUYXNrR3JvdXBzW3RhZ107XG4gICAgICAgICAgICBpZiAoaXNDb2xsYXBzZWQpIGdyb3VwQ29udGFpbmVyLmFkZENsYXNzKCdpcy1jb2xsYXBzZWQnKTtcblxuICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAndGFzay1ncm91cC1oZWFkZXInIH0pO1xuXG4gICAgICAgICAgICBoZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgd3JhcHBlciBlbGVtZW50IGZvciB0aGUgbGlzdFxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tMaXN0V3JhcHBlciA9IGdyb3VwQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWxpc3Qtd3JhcHBlcicpO1xuICAgICAgICAgICAgICAgIGlmICghdGFza0xpc3RXcmFwcGVyKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAvLyBDaGVjayB0aGUgY3VycmVudCBzdGF0ZVxuICAgICAgICAgICAgICAgIGNvbnN0IGlzQ3VycmVudGx5Q29sbGFwc2VkID0gZ3JvdXBDb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1jb2xsYXBzZWQnKTtcblxuICAgICAgICAgICAgICAgIGlmIChpc0N1cnJlbnRseUNvbGxhcHNlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyAtLS0gRVhQQU5ESU5HIC0tLVxuICAgICAgICAgICAgICAgICAgICAvLyAxLiBTZXQgdGhlIENTUyB2YXJpYWJsZSB0byB0aGUgZWxlbWVudCdzIGZ1bGwgc2Nyb2xsIGhlaWdodC5cbiAgICAgICAgICAgICAgICAgICAgLy8gICAgVGhpcyBnaXZlcyB0aGUgJ2hlaWdodCcgcHJvcGVydHkgYSBzcGVjaWZpYyB2YWx1ZSB0byBhbmltYXRlICp0byouXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjcm9sbEhlaWdodCA9IHRhc2tMaXN0V3JhcHBlci5zY3JvbGxIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tMaXN0V3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS10YXNrLWxpc3QtaGVpZ2h0JywgYCR7c2Nyb2xsSGVpZ2h0fXB4YCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gMi4gUmVtb3ZlIHRoZSBjbGFzcyB0byB0cmlnZ2VyIHRoZSB0cmFuc2l0aW9uLlxuICAgICAgICAgICAgICAgICAgICBncm91cENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdpcy1jb2xsYXBzZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBBZnRlciB0aGUgYW5pbWF0aW9uLCByZW1vdmUgdGhlIGV4cGxpY2l0IGhlaWdodCB0byBhbGxvdyBmb3IgZHluYW1pYyBjb250ZW50LlxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tMaXN0V3JhcHBlci5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS10YXNrLWxpc3QtaGVpZ2h0Jyk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDM1MCk7IC8vIE1hdGNoIHRoaXMgdG8geW91ciBDU1MgdHJhbnNpdGlvbiBkdXJhdGlvblxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIENPTExBUFNJTkcgLS0tXG4gICAgICAgICAgICAgICAgICAgIC8vIDEuIFNldCB0aGUgQ1NTIHZhcmlhYmxlIHRvIHRoZSBlbGVtZW50J3MgY3VycmVudCByZW5kZXJlZCBoZWlnaHQuXG4gICAgICAgICAgICAgICAgICAgIC8vICAgIFRoaXMgZ2l2ZXMgdGhlICdoZWlnaHQnIHByb3BlcnR5IGEgc3BlY2lmaWMgdmFsdWUgdG8gYW5pbWF0ZSAqZnJvbSouXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRIZWlnaHQgPSB0YXNrTGlzdFdyYXBwZXIub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB0YXNrTGlzdFdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tdGFzay1saXN0LWhlaWdodCcsIGAke2N1cnJlbnRIZWlnaHR9cHhgKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgbWljcm8tZGVsYXkgdG8gZW5zdXJlIHRoZSBicm93c2VyIHJlZ2lzdGVycyB0aGUgc3RhcnRpbmcgaGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgIC8vIGJlZm9yZSBiZWluZyB0b2xkIHRvIHRyYW5zaXRpb24gdG8gMC4gVGhpcyBpcyB0aGUga2V5IHRvIGZpeGluZyB0aGUgXCJpbnN0YW50IGNvbGxhcHNlXCIuXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAyLiBBZGQgdGhlIGNsYXNzIHRvIHRyaWdnZXIgdGhlIHRyYW5zaXRpb24gdG8gaGVpZ2h0OiAwLlxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaXMtY29sbGFwc2VkJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBhbmQgc2F2ZSB0aGUgc3RhdGVcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlZFRhc2tHcm91cHNbdGFnXSA9ICFpc0N1cnJlbnRseUNvbGxhcHNlZDtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBoZWFkZXJDb250ZW50ID0gaGVhZGVyLmNyZWF0ZVNwYW4oeyBjbHM6ICd0YXNrLWdyb3VwLWhlYWRlci1jb250ZW50JyB9KTtcbiAgICAgICAgICAgIGNvbnN0IHRhZ0ljb25OYW1lID0gc2V0dGluZ3MudGFza0dyb3VwSWNvbnM/LnRhZyB8fCAndGFnJztcbiAgICAgICAgICAgIGNvbnN0IGljb25FbCA9IGhlYWRlckNvbnRlbnQuY3JlYXRlU3Bhbih7IGNsczogJ2ljb24nIH0pO1xuICAgICAgICAgICAgc2V0SWNvbihpY29uRWwsIHRhZ0ljb25OYW1lKTtcbiAgICAgICAgICAgIGhlYWRlckNvbnRlbnQuY3JlYXRlU3Bhbih7IHRleHQ6IGAke3RhZ30gKCR7dGFza3NJbkdyb3VwLmxlbmd0aH0pYCB9KTtcblxuICAgICAgICAgICAgY29uc3QgY29sbGFwc2VJY29uID0gaGVhZGVyLmNyZWF0ZVNwYW4oeyBjbHM6ICd0YXNrLWdyb3VwLWNvbGxhcHNlLWljb24nIH0pO1xuICAgICAgICAgICAgc2V0SWNvbihjb2xsYXBzZUljb24sICdjaGV2cm9uLWRvd24nKTtcblxuICAgICAgICAgICAgY29uc3QgdGFza0xpc3RXcmFwcGVyID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KCd0YXNrLWxpc3Qtd3JhcHBlcicpO1xuXG4gICAgICAgICAgICBpZiAodGFza3NJbkdyb3VwLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0YXNrc0luR3JvdXAuZm9yRWFjaCh0YXNrID0+IHRoaXMucmVuZGVyVGFza0l0ZW0odGFzaywgdGFza0xpc3RXcmFwcGVyKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhc2tMaXN0V3JhcHBlci5jcmVhdGVEaXYoeyB0ZXh0OiAnTm8gdGFza3Mgd2l0aCB0aGlzIHRhZy4nLCBjbHM6ICd0YXNrLWdyb3VwLWVtcHR5LW1lc3NhZ2UnIH0pO1xuICAgICAgICAgICAgICAgIGdyb3VwQ29udGFpbmVyLmFkZENsYXNzKCdpcy1jb2xsYXBzZWQnKTtcbiAgICAgICAgICAgICAgICB0YXNrTGlzdFdyYXBwZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRhc2tzLmxlbmd0aCA9PT0gMCkgdGhpcy50YXNrc0NvbnRlbnRFbC5jcmVhdGVEaXYoeyB0ZXh0OiAnTm8gdGFza3MgZm91bmQnLCBjbHM6ICd0YXNrLWdyb3VwLWVtcHR5LW1lc3NhZ2UnIH0pO1xuICAgIH1cblxuICAgIHJlbmRlclRhc2tzQnlEYXRlKHRhc2tzLCBzZXR0aW5ncykgeyAvLyBSZWNlaXZlcyAnc2V0dGluZ3MnIGFzIGFuIGFyZ3VtZW50XG4gICAgICAgIC8vIFRoZSBkdXBsaWNhdGUgZGVjbGFyYXRpb24gdGhhdCBjYXVzZWQgdGhlIGVycm9yIGhhcyBiZWVuIHJlbW92ZWQuXG4gICAgICAgIGNvbnN0IG5vdyA9IG1vbWVudCgpLnN0YXJ0T2YoJ2RheScpO1xuICAgICAgICBsZXQgZ3JvdXBzID0geyBvdmVyZHVlOiBbXSwgdG9kYXk6IFtdLCB0b21vcnJvdzogW10sIG5leHQ3ZGF5czogW10sIGZ1dHVyZTogW10sIG5vRGF0ZTogW10gfTtcblxuICAgICAgICB0YXNrcy5mb3JFYWNoKHRhc2sgPT4ge1xuICAgICAgICAgICAgaWYgKCF0YXNrLmR1ZURhdGUpIHtcbiAgICAgICAgICAgICAgICBncm91cHMubm9EYXRlLnB1c2godGFzayk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZHVlID0gbW9tZW50KHRhc2suZHVlRGF0ZSkuc3RhcnRPZignZGF5Jyk7XG4gICAgICAgICAgICBpZiAoZHVlLmlzQmVmb3JlKG5vdykpIGdyb3Vwcy5vdmVyZHVlLnB1c2godGFzayk7XG4gICAgICAgICAgICBlbHNlIGlmIChkdWUuaXNTYW1lKG5vdykpIGdyb3Vwcy50b2RheS5wdXNoKHRhc2spO1xuICAgICAgICAgICAgZWxzZSBpZiAoZHVlLmlzU2FtZShub3cuY2xvbmUoKS5hZGQoMSwgJ2RheScpKSkgZ3JvdXBzLnRvbW9ycm93LnB1c2godGFzayk7XG4gICAgICAgICAgICBlbHNlIGlmIChkdWUuaXNTYW1lT3JCZWZvcmUobm93LmNsb25lKCkuYWRkKDcsICdkYXlzJykpKSBncm91cHMubmV4dDdkYXlzLnB1c2godGFzayk7XG4gICAgICAgICAgICBlbHNlIGdyb3Vwcy5mdXR1cmUucHVzaCh0YXNrKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZm9yIChjb25zdCBncm91cEtleSBpbiBncm91cHMpIHtcbiAgICAgICAgICAgIGdyb3Vwc1tncm91cEtleV0gPSBncm91cHNbZ3JvdXBLZXldLmZpbHRlcih0YXNrID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0NvbXBsZXRlZCA9IHRhc2suc3RhdHVzICYmIHRhc2suc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICd4JztcbiAgICAgICAgICAgICAgICBpZiAoIWlzQ29tcGxldGVkKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0dGluZ3Muc2hvd0NvbXBsZXRlZFRhc2tzVG9kYXkgJiYgdGFzay5jb21wbGV0aW9uRGF0ZSAmJiBpc1NhbWVEYXkodGFzay5jb21wbGV0aW9uRGF0ZSwgbmV3IERhdGUoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGljb25zID0gc2V0dGluZ3MudGFza0dyb3VwSWNvbnMgfHwgREVGQVVMVF9TRVRUSU5HUy50YXNrR3JvdXBJY29ucztcbiAgICAgICAgY29uc3QgZ3JvdXBPcmRlciA9IFtcbiAgICAgICAgICAgIHsga2V5OiAnb3ZlcmR1ZScsIHRpdGxlOiAnT3ZlcmR1ZScsIGljb246IGljb25zLm92ZXJkdWUsIGNvbG9yOiBzZXR0aW5ncy50YXNrR3JvdXBDb2xvck92ZXJkdWUgfSxcbiAgICAgICAgICAgIHsga2V5OiAndG9kYXknLCB0aXRsZTogJ1RvZGF5JywgaWNvbjogaWNvbnMudG9kYXksIGNvbG9yOiBzZXR0aW5ncy50YXNrR3JvdXBDb2xvclRvZGF5IH0sXG4gICAgICAgICAgICB7IGtleTogJ3RvbW9ycm93JywgdGl0bGU6ICdUb21vcnJvdycsIGljb246IGljb25zLnRvbW9ycm93LCBjb2xvcjogc2V0dGluZ3MudGFza0dyb3VwQ29sb3JUb21vcnJvdyB9LFxuICAgICAgICAgICAgeyBrZXk6ICduZXh0N2RheXMnLCB0aXRsZTogJ05leHQgNyBEYXlzJywgaWNvbjogaWNvbnMubmV4dDdkYXlzLCBjb2xvcjogc2V0dGluZ3MudGFza0dyb3VwQ29sb3JOZXh0N0RheXMgfSxcbiAgICAgICAgICAgIHsga2V5OiAnZnV0dXJlJywgdGl0bGU6ICdGdXR1cmUnLCBpY29uOiBpY29ucy5mdXR1cmUsIGNvbG9yOiBzZXR0aW5ncy50YXNrR3JvdXBDb2xvckZ1dHVyZSB9LFxuICAgICAgICAgICAgeyBrZXk6ICdub0RhdGUnLCB0aXRsZTogJ05vIER1ZSBEYXRlJywgaWNvbjogaWNvbnMubm9EYXRlLCBjb2xvcjogc2V0dGluZ3MudGFza0dyb3VwQ29sb3JOb0RhdGUgfVxuICAgICAgICBdO1xuXG4gICAgICAgIGxldCB0b3RhbFRhc2tzUmVuZGVyZWQgPSAwO1xuICAgICAgICBncm91cE9yZGVyLmZvckVhY2goZyA9PiB7XG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MudGFza0RhdGVHcm91cHNUb1Nob3cuaW5jbHVkZXMoZy5rZXkpIHx8IGcua2V5ID09PSAnbm9EYXRlJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tzSW5Hcm91cCA9IGdyb3Vwc1tnLmtleV07XG4gICAgICAgICAgICAgICAgdG90YWxUYXNrc1JlbmRlcmVkICs9IHRhc2tzSW5Hcm91cC5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBncm91cENvbnRhaW5lciA9IHRoaXMudGFza3NDb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAndGFzay1ncm91cC1jb250YWluZXInLCBhdHRyOiB7IHN0eWxlOiBgYmFja2dyb3VuZC1jb2xvcjogJHtnLmNvbG9yfWAgfSB9KTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGlzQ29sbGFwc2VkID0gdGhpcy5jb2xsYXBzZWRUYXNrR3JvdXBzW2cua2V5XTtcbiAgICAgICAgICAgICAgICBpZiAoaXNDb2xsYXBzZWQpIGdyb3VwQ29udGFpbmVyLmFkZENsYXNzKCdpcy1jb2xsYXBzZWQnKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3Rhc2stZ3JvdXAtaGVhZGVyJyB9KTtcblxuICAgICAgICAgICAgICAgIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgd3JhcHBlciBlbGVtZW50IGZvciB0aGUgbGlzdFxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXNrTGlzdFdyYXBwZXIgPSBncm91cENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudGFzay1saXN0LXdyYXBwZXInKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXNrTGlzdFdyYXBwZXIpIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB0aGUgY3VycmVudCBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0N1cnJlbnRseUNvbGxhcHNlZCA9IGdyb3VwQ29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnaXMtY29sbGFwc2VkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ3VycmVudGx5Q29sbGFwc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0gRVhQQU5ESU5HIC0tLVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMS4gU2V0IHRoZSBDU1MgdmFyaWFibGUgdG8gdGhlIGVsZW1lbnQncyBmdWxsIHNjcm9sbCBoZWlnaHQuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICBUaGlzIGdpdmVzIHRoZSAnaGVpZ2h0JyBwcm9wZXJ0eSBhIHNwZWNpZmljIHZhbHVlIHRvIGFuaW1hdGUgKnRvKi5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjcm9sbEhlaWdodCA9IHRhc2tMaXN0V3JhcHBlci5zY3JvbGxIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrTGlzdFdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tdGFzay1saXN0LWhlaWdodCcsIGAke3Njcm9sbEhlaWdodH1weGApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAyLiBSZW1vdmUgdGhlIGNsYXNzIHRvIHRyaWdnZXIgdGhlIHRyYW5zaXRpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdpcy1jb2xsYXBzZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWZ0ZXIgdGhlIGFuaW1hdGlvbiwgcmVtb3ZlIHRoZSBleHBsaWNpdCBoZWlnaHQgdG8gYWxsb3cgZm9yIGR5bmFtaWMgY29udGVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tMaXN0V3JhcHBlci5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS10YXNrLWxpc3QtaGVpZ2h0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAzNTApOyAvLyBNYXRjaCB0aGlzIHRvIHlvdXIgQ1NTIHRyYW5zaXRpb24gZHVyYXRpb25cblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIENPTExBUFNJTkcgLS0tXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAxLiBTZXQgdGhlIENTUyB2YXJpYWJsZSB0byB0aGUgZWxlbWVudCdzIGN1cnJlbnQgcmVuZGVyZWQgaGVpZ2h0LlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgVGhpcyBnaXZlcyB0aGUgJ2hlaWdodCcgcHJvcGVydHkgYSBzcGVjaWZpYyB2YWx1ZSB0byBhbmltYXRlICpmcm9tKi5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRIZWlnaHQgPSB0YXNrTGlzdFdyYXBwZXIub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFza0xpc3RXcmFwcGVyLnN0eWxlLnNldFByb3BlcnR5KCctLXRhc2stbGlzdC1oZWlnaHQnLCBgJHtjdXJyZW50SGVpZ2h0fXB4YCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBtaWNyby1kZWxheSB0byBlbnN1cmUgdGhlIGJyb3dzZXIgcmVnaXN0ZXJzIHRoZSBzdGFydGluZyBoZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJlZm9yZSBiZWluZyB0b2xkIHRvIHRyYW5zaXRpb24gdG8gMC4gVGhpcyBpcyB0aGUga2V5IHRvIGZpeGluZyB0aGUgXCJpbnN0YW50IGNvbGxhcHNlXCIuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDIuIEFkZCB0aGUgY2xhc3MgdG8gdHJpZ2dlciB0aGUgdHJhbnNpdGlvbiB0byBoZWlnaHQ6IDAuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaXMtY29sbGFwc2VkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBhbmQgc2F2ZSB0aGUgc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZWRUYXNrR3JvdXBzW2cua2V5XSA9ICFpc0N1cnJlbnRseUNvbGxhcHNlZDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJDb250ZW50ID0gaGVhZGVyLmNyZWF0ZVNwYW4oeyBjbHM6ICd0YXNrLWdyb3VwLWhlYWRlci1jb250ZW50JyB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBpY29uRWwgPSBoZWFkZXJDb250ZW50LmNyZWF0ZVNwYW4oeyBjbHM6ICdpY29uJyB9KTtcbiAgICAgICAgICAgICAgICBzZXRJY29uKGljb25FbCwgZy5pY29uKTtcbiAgICAgICAgICAgICAgICBoZWFkZXJDb250ZW50LmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHtnLnRpdGxlfSAoJHt0YXNrc0luR3JvdXAubGVuZ3RofSlgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY29sbGFwc2VJY29uID0gaGVhZGVyLmNyZWF0ZVNwYW4oeyBjbHM6ICd0YXNrLWdyb3VwLWNvbGxhcHNlLWljb24nIH0pO1xuICAgICAgICAgICAgICAgIHNldEljb24oY29sbGFwc2VJY29uLCAnY2hldnJvbi1kb3duJyk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrTGlzdFdyYXBwZXIgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoJ3Rhc2stbGlzdC13cmFwcGVyJyk7XG4gICAgICAgICAgICAgICAgaWYgKHRhc2tzSW5Hcm91cC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tzSW5Hcm91cC5mb3JFYWNoKHRhc2sgPT4gdGhpcy5yZW5kZXJUYXNrSXRlbSh0YXNrLCB0YXNrTGlzdFdyYXBwZXIpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0YXNrTGlzdFdyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogYE5vICR7Zy50aXRsZS50b0xvd2VyQ2FzZSgpfSB0YXNrcy5gLCBjbHM6ICd0YXNrLWdyb3VwLWVtcHR5LW1lc3NhZ2UnIH0pO1xuICAgICAgICAgICAgICAgICAgICBncm91cENvbnRhaW5lci5hZGRDbGFzcygnaXMtY29sbGFwc2VkJyk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tMaXN0V3JhcHBlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRvdGFsVGFza3NSZW5kZXJlZCA9PT0gMCAmJiB0aGlzLnRhc2tzU2VhcmNoVGVybSkge1xuICAgICAgICAgICAgdGhpcy50YXNrc0NvbnRlbnRFbC5jcmVhdGVEaXYoeyB0ZXh0OiAnTm8gdGFza3MgbWF0Y2ggeW91ciBzZWFyY2ggdGVybS4nLCBjbHM6ICd0YXNrLWdyb3VwLWVtcHR5LW1lc3NhZ2UnIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyBhIHNpbmdsZSB0YXNrIGl0ZW0gcm93IGluIGEgdGFzayBncm91cC5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gdGFzayBUaGUgdGFzayBvYmplY3QuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIFRoZSBwYXJlbnQgY29udGFpbmVyIGZvciB0aGUgdGFzayByb3cuXG4gICAgICovXG4gICAgcmVuZGVyVGFza0l0ZW0odGFzaykge1xuICAgICAgICBjb25zdCB0YXNrUm93ID0gY3JlYXRlRGl2KHsgY2xzOiAndGFzay1yb3cnIH0pO1xuICAgICAgICB0YXNrUm93LmRhdGFzZXQua2V5ID0gdGhpcy5nZXRUYXNrS2V5KHRhc2spO1xuICAgICAgICB0YXNrUm93LmRhdGFzZXQudGFza1N0YXR1cyA9IHRhc2suc3RhdHVzO1xuICAgICAgICBjb25zdCBzZWFyY2hJbnB1dEVsID0gdGhpcy50YXNrc1NlYXJjaElucHV0RWw7XG5cbiAgICAgICAgY29uc3QgY2hlY2tib3ggPSB0YXNrUm93LmNyZWF0ZURpdih7IGNsczogJ3Rhc2stY2hlY2tib3gtc3ltYm9sJyB9KTtcbiAgICAgICAgdGhpcy5fcmVuZGVyVGFza1N5bWJvbChjaGVja2JveCwgdGFzayk7XG4gICAgICAgIGNvbnN0IHRleHRFbCA9IHRhc2tSb3cuY3JlYXRlU3Bhbih7IGNsczogJ3Rhc2stdGV4dCcgfSk7XG5cbiAgICAgICAgLy8gT24gaW5pdGlhbCByZW5kZXIsIGNoZWNrIGlmIHRoZSB0YXNrIGlzIGFscmVhZHkgY29tcGxldGVkIGFuZCBhcHBseSB0aGUgc3R5bGUuXG4gICAgICAgIGlmICh0YXNrLnN0YXR1cy50b0xvd2VyQ2FzZSgpID09PSAneCcpIHtcbiAgICAgICAgICAgIHRleHRFbC5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgIC8vIERldGVybWluZSB0aGUgc3RhdGUgKmJlZm9yZSogdGhlIGNoYW5nZSBpcyBtYWRlXG4gICAgICAgICAgICBjb25zdCB3YXNDb21wbGV0ZWQgPSB0YXNrLnN0YXR1cy50b0xvd2VyQ2FzZSgpID09PSAneCc7XG5cbiAgICAgICAgICAgIC8vIE1vZGlmeSB0aGUgZmlsZS4gVGhpcyBhbHNvIHRyaWdnZXJzIHRoZSBiYWNrZ3JvdW5kIGZpbGUgd2F0Y2hlclxuICAgICAgICAgICAgLy8gd2hpY2ggd2lsbCBjb3JyZWN0bHkgcmVmcmVzaCB0aGUgZW50aXJlIHRhc2sgbGlzdCBhZnRlciBhIHNob3J0IGRlbGF5LlxuICAgICAgICAgICAgYXdhaXQgdGhpcy50b2dnbGVUYXNrQ29tcGxldGlvbih0YXNrKTtcblxuICAgICAgICAgICAgLy8gLS0tIFByb3ZpZGUgSW5zdGFudCBVSSBGZWVkYmFjayAtLS1cbiAgICAgICAgICAgIC8vIFdlIHVwZGF0ZSB0aGUgbG9jYWwgdGFzayBvYmplY3QgYW5kIHRoZSBET00gaW1tZWRpYXRlbHkgc28gdGhlIHVzZXJcbiAgICAgICAgICAgIC8vIHNlZXMgdGhlIGNoYW5nZSB3aXRob3V0IHdhaXRpbmcgZm9yIHRoZSBmaWxlIHdhdGNoZXIgdG8gZmluaXNoLlxuXG4gICAgICAgICAgICBpZiAod2FzQ29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgaXQgV0FTIGNvbXBsZXRlZCwgaXRzIG5ldyBzdGF0ZSBpcyBJTkNPTVBMRVRFXG4gICAgICAgICAgICAgICAgdGFzay5zdGF0dXMgPSAnICc7XG4gICAgICAgICAgICAgICAgdGV4dEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlZCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBpdCB3YXMgTk9UIGNvbXBsZXRlZCwgaXRzIG5ldyBzdGF0ZSBpcyBDT01QTEVURVxuICAgICAgICAgICAgICAgIHRhc2suc3RhdHVzID0gJ3gnO1xuICAgICAgICAgICAgICAgIHRleHRFbC5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZWQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRmluYWxseSwgcmUtcmVuZGVyIHRoZSBjaGVja2JveCBzeW1ib2wgaXRzZWxmIHVzaW5nIHRoZSBuZXcgc3RhdHVzXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJUYXNrU3ltYm9sKGNoZWNrYm94LCB0YXNrKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgTWFya2Rvd25SZW5kZXJlci5yZW5kZXIodGhpcy5hcHAsIHRhc2sudGV4dCwgdGV4dEVsLCB0YXNrLmZpbGUucGF0aCwgdGhpcyk7XG5cbiAgICAgICAgdGFza1Jvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQodGFzay5maWxlLnBhdGgsICcnLCBmYWxzZSwgeyBlU3RhdGU6IHsgbGluZTogdGFzay5saW5lTnVtYmVyIH0gfSkpO1xuICAgICAgICB0aGlzLmFkZEtleWRvd25MaXN0ZW5lcnModGFza1Jvdywgc2VhcmNoSW5wdXRFbCk7XG5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza1RleHRUcnVuY2F0ZSAmJiB0ZXh0RWwuc2Nyb2xsV2lkdGggPiB0ZXh0RWwuY2xpZW50V2lkdGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29sdGlwVGV4dCA9IGBUYXNrOiAke3Rhc2sudGV4dH1cXG5cXG5GaWxlOiAke3Rhc2suZmlsZS5wYXRofVxcbkR1ZTogJHt0YXNrLmR1ZURhdGUgPyBtb21lbnQodGFzay5kdWVEYXRlKS5mb3JtYXQoJ1lZWVktTU0tREQnKSA6ICdOb25lJ31cXG5UYWdzOiAke3Rhc2sudGFncy5sZW5ndGggPiAwID8gdGFzay50YWdzLm1hcCh0ID0+ICcjJyArIHQpLmpvaW4oJyAnKSA6ICdOb25lJ31gO1xuICAgICAgICAgICAgICAgIHRleHRFbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCB0b29sdGlwVGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDApO1xuXG4gICAgICAgIHJldHVybiB0YXNrUm93O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRvZ2dsZXMgdGhlIGNvbXBsZXRpb24gc3RhdGUgb2YgYSB0YXNrIGJ5IG1vZGlmeWluZyB0aGUgc291cmNlIE1hcmtkb3duIGZpbGUuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHRhc2sgVGhlIHRhc2sgb2JqZWN0IHRvIHRvZ2dsZS5cbiAgICAgKi9cbiAgICBhc3luYyB0b2dnbGVUYXNrQ29tcGxldGlvbih0YXNrKSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKHRhc2suZmlsZSk7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgICAgIGxldCBsaW5lID0gbGluZXNbdGFzay5saW5lTnVtYmVyXTtcblxuICAgICAgICBjb25zdCBjb21wbGV0aW9uRGF0ZVJlZ2V4ID0gL1xccyrinIVcXHMqXFxkezR9LVxcZHsyfS1cXGR7Mn0vO1xuICAgICAgICBjb25zdCB0b2RheSA9IG1vbWVudCgpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG4gICAgICAgIGNvbnN0IGlzQ29tcGxldGVkID0gdGFzay5zdGF0dXMudG9Mb3dlckNhc2UoKSA9PT0gJ3gnO1xuXG4gICAgICAgIC8vIEZpbmQgdGhlIHRhc2sgbWFya2VyIFsuXSBhbmQgcmVwbGFjZSB0aGUgY2hhcmFjdGVyIGluc2lkZVxuICAgICAgICBjb25zdCB0YXNrTWFya2VyUmVnZXggPSAvXFxbLlxcXS87XG5cbiAgICAgICAgaWYgKGlzQ29tcGxldGVkKSB7XG4gICAgICAgICAgICAvLyBNYXJrIGFzIGluY29tcGxldGU6IFt4XSAtPiBbIF0gYW5kIHJlbW92ZSBjb21wbGV0aW9uIGRhdGVcbiAgICAgICAgICAgIGxldCBuZXdMaW5lID0gbGluZS5yZXBsYWNlKHRhc2tNYXJrZXJSZWdleCwgJ1sgXScpO1xuICAgICAgICAgICAgbGluZXNbdGFzay5saW5lTnVtYmVyXSA9IG5ld0xpbmUucmVwbGFjZShjb21wbGV0aW9uRGF0ZVJlZ2V4LCAnJykudHJpbSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gTWFyayBhcyBjb21wbGV0ZTogWyBdIG9yIFsvXSBvciBbLV0gLT4gW3hdIGFuZCBhZGQgY29tcGxldGlvbiBkYXRlXG4gICAgICAgICAgICBsZXQgbmV3TGluZSA9IGxpbmUucmVwbGFjZSh0YXNrTWFya2VyUmVnZXgsICdbeF0nKTtcbiAgICAgICAgICAgIG5ld0xpbmUgPSBuZXdMaW5lLnJlcGxhY2UoY29tcGxldGlvbkRhdGVSZWdleCwgJycpOyAvLyBSZW1vdmUgYW55IG9sZCBvbmUgZmlyc3RcbiAgICAgICAgICAgIGxpbmVzW3Rhc2subGluZU51bWJlcl0gPSBgJHtuZXdMaW5lfSDinIUgJHt0b2RheX1gO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeSh0YXNrLmZpbGUsIGxpbmVzLmpvaW4oJ1xcbicpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGFuIGV4aXN0aW5nIHRhc2sgcm93IGluIHRoZSBET00gd2l0aCBuZXcgZGF0YS5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXNrUm93RWwgVGhlIC50YXNrLXJvdyBlbGVtZW50IHRvIHVwZGF0ZS5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gdGFzayBUaGUgbmV3IHRhc2sgb2JqZWN0IHdpdGggdXBkYXRlZCBkYXRhLlxuICAgICAqL1xuICAgIHVwZGF0ZVRhc2tJdGVtKHRhc2tSb3dFbCwgdGFzaykge1xuICAgICAgICAvLyBPbmx5IHVwZGF0ZSBpZiB0aGUgdGV4dCBjb250ZW50IGhhcyBjaGFuZ2VkXG4gICAgICAgIGNvbnN0IHRleHRFbCA9IHRhc2tSb3dFbC5xdWVyeVNlbGVjdG9yKCcudGFzay10ZXh0Jyk7XG5cbiAgICAgICAgLy8gT25seSB1cGRhdGUgaWYgdGhlIHN0YXR1cyBoYXMgY2hhbmdlZFxuICAgICAgICBpZiAodGFza1Jvd0VsLmRhdGFzZXQudGFza1N0YXR1cyAhPT0gdGFzay5zdGF0dXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gdGFza1Jvd0VsLnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWNoZWNrYm94LXN5bWJvbCcpO1xuICAgICAgICAgICAgaWYgKGNoZWNrYm94KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyVGFza1N5bWJvbChjaGVja2JveCwgdGFzayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YXNrUm93RWwuZGF0YXNldC50YXNrU3RhdHVzID0gdGFzay5zdGF0dXM7XG5cbiAgICAgICAgICAgIGlmICh0ZXh0RWwpIHtcbiAgICAgICAgICAgICAgICBpZiAodGFzay5zdGF0dXMudG9Mb3dlckNhc2UoKSA9PT0gJ3gnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRFbC5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZWQnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0RWwuY2xhc3NMaXN0LnJlbW92ZSgnY29tcGxldGVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQSBzaW1wbGUgY2hlY2sgdG8gc2VlIGlmIHRoZSByZW5kZXJlZCBIVE1MIG1pZ2h0IGJlIGRpZmZlcmVudFxuICAgICAgICBpZiAodGV4dEVsICYmIHRleHRFbC50ZXh0Q29udGVudCAhPT0gdGFzay50ZXh0KSB7XG4gICAgICAgICAgICB0ZXh0RWwuZW1wdHkoKTsgLy8gQ2xlYXIgZXhpc3RpbmcgcmVuZGVyZWQgbWFya2Rvd25cbiAgICAgICAgICAgIE1hcmtkb3duUmVuZGVyZXIucmVuZGVyKHRoaXMuYXBwLCB0YXNrLnRleHQsIHRleHRFbCwgdGFzay5maWxlLnBhdGgsIHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3BlbnMgdGhlIHNjcmF0Y2hwYWQgbm90ZSBpbiBhIG5ldyBvciBjdXJyZW50IHRhYi5cbiAgICAgKi9cbiAgICBhc3luYyBvcGVuU2NyYXRjaHBhZEZpbGUoKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5maXhlZE5vdGVGaWxlO1xuXG4gICAgICAgIGlmICh0aGlzLmFwcC5pc01vYmlsZSkge1xuICAgICAgICAgICAgbGV0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XG4gICAgICAgICAgICBpZiAoIWZpbGUpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBmaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHBhdGgsICcnKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRmFpbGVkIHRvIGNyZWF0ZSBzY3JhdGNocGFkIGZpbGUuJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBgdHJ1ZWAgYXJndW1lbnQgZm9yY2VzIGEgbmV3IGxlYWYsIHdoaWNoIHJlbGlhYmx5IGJyaW5ncyB0aGUgbm90ZSB0byB0aGUgZnJvbnQgb24gbW9iaWxlLlxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdTY3JhdGNocGFkIHBhdGggaXMgaW52YWxpZCBvciBjb3VsZCBub3QgYmUgY3JlYXRlZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpcnN0LCB0cnkgdG8gZmluZCBhbiBhbHJlYWR5IG9wZW4gbGVhZiBmb3IgdGhpcyBmaWxlLlxuICAgICAgICBsZXQgdGFyZ2V0TGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXCJtYXJrZG93blwiKS5maW5kKGxlYWYgPT4gbGVhZi52aWV3LmZpbGU/LnBhdGggPT09IHBhdGgpO1xuICAgICAgICBpZiAodGFyZ2V0TGVhZikgeyB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZih0YXJnZXRMZWFmKTsgcmV0dXJuOyB9XG5cbiAgICAgICAgbGV0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XG4gICAgICAgIC8vIElmIHRoZSBmaWxlIGRvZXNuJ3QgZXhpc3QsIGNyZWF0ZSBpdC5cbiAgICAgICAgaWYgKCFmaWxlKSBmaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHBhdGgsIFwiXCIpLmNhdGNoKCgpID0+IG5ldyBOb3RpY2UoYEZhaWxlZCB0byBjcmVhdGUgc2NyYXRjaHBhZDogJHtwYXRofWApKTtcblxuICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNocGFkT3BlbkFjdGlvbiA9PT0gJ25ldy10YWInKS5vcGVuRmlsZShmaWxlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTYXZlcyB0ZXh0IGNvbnRlbnQgdG8gdGhlIHNjcmF0Y2hwYWQgbm90ZSBmaWxlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IHRvIHNhdmUuXG4gICAgICovXG4gICAgYXN5bmMgc2F2ZUZpeGVkTm90ZSh0ZXh0KSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5maXhlZE5vdGVGaWxlO1xuICAgICAgICBjb25zdCBmb2xkZXJQYXRoID0gcGF0aC5zdWJzdHJpbmcoMCwgcGF0aC5sYXN0SW5kZXhPZihcIi9cIikpO1xuICAgICAgICAvLyBDcmVhdGUgcGFyZW50IGZvbGRlciBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuICAgICAgICBpZiAoZm9sZGVyUGF0aCAmJiAhdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclBhdGgpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyUGF0aCkuY2F0Y2goZXJyID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhdGluZyBmb2xkZXI6XCIsIGVycikpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xuICAgICAgICBpZiAoIWZpbGUpIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShwYXRoLCB0ZXh0KTtcbiAgICAgICAgZWxzZSBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgdGV4dCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZHMgdGhlIGNvbnRlbnQgb2YgdGhlIHNjcmF0Y2hwYWQgbm90ZSBmaWxlLlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IFRoZSBjb250ZW50IG9mIHRoZSBub3RlLCBvciBhbiBlbXB0eSBzdHJpbmcgaWYgaXQgZG9lc24ndCBleGlzdC5cbiAgICAgKi9cbiAgICBhc3luYyBsb2FkTm90ZSgpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZpeGVkTm90ZUZpbGU7XG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHJldHVybiBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPcGVucyBhIGRhaWx5IG5vdGUgZm9yIGEgZ2l2ZW4gZGF0ZSwgY3JlYXRpbmcgaXQgZnJvbSBhIHRlbXBsYXRlIGlmIGl0IGRvZXNuJ3QgZXhpc3QuXG4gICAgICogQHBhcmFtIHtEYXRlfSBkYXRlIFRoZSBkYXRlIGZvciB0aGUgZGFpbHkgbm90ZS5cbiAgICAgKi9cbiAgICBhc3luYyBvcGVuRGFpbHlOb3RlKGRhdGUpIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgZGFpbHlOb3Rlc0ZvbGRlcixcbiAgICAgICAgICAgIGRhaWx5Tm90ZURhdGVGb3JtYXQsXG4gICAgICAgICAgICBkYWlseU5vdGVUZW1wbGF0ZVBhdGgsXG4gICAgICAgICAgICBkYWlseU5vdGVPcGVuQWN0aW9uXG4gICAgICAgIH0gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBmb3JtYXREYXRlKGRhdGUsIGRhaWx5Tm90ZURhdGVGb3JtYXQpO1xuICAgICAgICBjb25zdCBwYXRoID0gZGFpbHlOb3Rlc0ZvbGRlciA/IGAke2RhaWx5Tm90ZXNGb2xkZXJ9LyR7ZmlsZW5hbWV9Lm1kYCA6IGAke2ZpbGVuYW1lfS5tZGA7XG5cbiAgICAgICAgbGV0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XG4gICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgICAvLyBGaWxlIGFscmVhZHkgZXhpc3RzLCBqdXN0IG9wZW4gaXRcbiAgICAgICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihkYWlseU5vdGVPcGVuQWN0aW9uID09PSAnbmV3LXRhYicpO1xuICAgICAgICAgICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyAtLS0gRmlsZSBkb2VzIE5PVCBleGlzdCwgcHJvY2VlZCB3aXRoIGNyZWF0aW9uIC0tLVxuXG4gICAgICAgIC8vIFRoaXMgaW5uZXIgZnVuY3Rpb24gaXMgbm93IHVwZGF0ZWQgdG8gaGFuZGxlIFRlbXBsYXRlciBjb3JyZWN0bHlcbiAgICAgICAgY29uc3QgY3JlYXRlTm90ZSA9IGFzeW5jIChpbmNsdWRlRXZlbnRzID0gZmFsc2UpID0+IHtcblxuICAgICAgICAgICAgbGV0IHRlbXBsYXRlQ29udGVudCA9IFwiXCI7XG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZUZpbGUgPSBkYWlseU5vdGVUZW1wbGF0ZVBhdGggPyB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZGFpbHlOb3RlVGVtcGxhdGVQYXRoKSA6IG51bGw7XG5cbiAgICAgICAgICAgIGlmICh0ZW1wbGF0ZUZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQodGVtcGxhdGVGaWxlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBUZW1wbGF0ZSBmaWxlIG5vdCBmb3VuZCBhdDogJHtkYWlseU5vdGVUZW1wbGF0ZVBhdGh9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgbm90ZSB3aXRoIHRoZSBwbGFjZWhvbGRlciBmaXJzdFxuICAgICAgICAgICAgY29uc3QgbmV3RmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShwYXRoLCB0ZW1wbGF0ZUNvbnRlbnQpO1xuXG4gICAgICAgICAgICAvLyBPcGVuIHRoZSBub3RlXG4gICAgICAgICAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZGFpbHlOb3RlT3BlbkFjdGlvbiA9PT0gXCJuZXctdGFiXCIpO1xuICAgICAgICAgICAgYXdhaXQgbGVhZi5vcGVuRmlsZShuZXdGaWxlKTtcblxuICAgICAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckV2ZW50c1BsYWNlaG9sZGVyIHx8ICclJUNBTEVOREFSX0VWRU5UUyUlJztcblxuICAgICAgICAgICAgLy8gSWYgaW5jbHVkaW5nIGV2ZW50cywgcHJvY2VlZCB3aXRoIGluamVjdGlvblxuICAgICAgICAgICAgaWYgKGluY2x1ZGVFdmVudHMpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwKSk7IC8vIERlbGF5XG5cbiAgICAgICAgICAgICAgICAvLyAxLiBDaGVjayBmb3IgZXZlbnRzIGluIHRoZSBtYXBcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlS2V5ID0gbW9tZW50KGRhdGUpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnRzRm9yRGF5ID0gdGhpcy5pY3NFdmVudHNCeURhdGUuZ2V0KGRhdGVLZXkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50c0ZvckRheSAmJiBldmVudHNGb3JEYXkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyAyLiBGb3JtYXQgdGhlIGV2ZW50cyBpbnRvIGEgc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50Q29udGVudCA9IHRoaXMuZm9ybWF0RXZlbnRzRm9yVGVtcGxhdGUoZXZlbnRzRm9yRGF5KSB8fCBcIlwiO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIDMuIFJlYWQgdGhlIGZpbGUgKmFmdGVyKiBUZW1wbGF0ZXIgaGFzIHJ1blxuICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudENvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKG5ld0ZpbGUpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIDQuIFJlcGxhY2UgcGxhY2Vob2xkZXIgYW5kIHNhdmVcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb250ZW50LmluY2x1ZGVzKHBsYWNlaG9sZGVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmluYWxDb250ZW50ID0gY3VycmVudENvbnRlbnQucmVwbGFjZShwbGFjZWhvbGRlciwgZXZlbnRDb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShuZXdGaWxlLCBmaW5hbENvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgUGxhY2Vob2xkZXIgXCIke3BsYWNlaG9sZGVyfVwiIG5vdCBmb3VuZCBpbiB0aGUgbm90ZSBhZnRlciBjcmVhdGlvbi4gVGVtcGxhdGVyIG1pZ2h0IGJlIHJlbW92aW5nIGl0LmApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiTm8gZXZlbnRzIGZvdW5kIGZvciB0aGlzIGRhdGUsIHNvIG5vdGhpbmcgdG8gaW5qZWN0LlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBMb2dpYyBmb3IgcmVtb3ZpbmcgcGxhY2Vob2xkZXIgd2hlbiBpbmNsdWRlRXZlbnRzIGlzIGZhbHNlIGNhbiBiZSBhZGRlZCBoZXJlIGlmIG5lZWRlZFxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDIwMCkpO1xuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50Q29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQobmV3RmlsZSk7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb250ZW50LmluY2x1ZGVzKHBsYWNlaG9sZGVyKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5hbENvbnRlbnQgPSBjdXJyZW50Q29udGVudC5yZXBsYWNlKHBsYWNlaG9sZGVyLCBcIlwiKS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShuZXdGaWxlLCBmaW5hbENvbnRlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBoYXNUZW1wbGF0ZSA9ICEhZGFpbHlOb3RlVGVtcGxhdGVQYXRoICYmIGRhaWx5Tm90ZVRlbXBsYXRlUGF0aC5sZW5ndGggPiAwO1xuICAgICAgICAvLyBUaGUgcmVzdCBvZiB5b3VyIGV4aXN0aW5nIGxvZ2ljIHJlbWFpbnMgdW5jaGFuZ2VkLlxuICAgICAgICBjb25zdCBkYXRlS2V5ID0gbW9tZW50KGRhdGUpLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuICAgICAgICBjb25zdCBldmVudHNGb3JEYXkgPSB0aGlzLmljc0V2ZW50c0J5RGF0ZS5nZXQoZGF0ZUtleSk7XG4gICAgICAgIGNvbnN0IGZyaWVuZGx5RGF0ZSA9IGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKHVuZGVmaW5lZCwge1xuICAgICAgICAgICAgd2Vla2RheTogJ2xvbmcnLFxuICAgICAgICAgICAgeWVhcjogJ251bWVyaWMnLFxuICAgICAgICAgICAgbW9udGg6ICdsb25nJyxcbiAgICAgICAgICAgIGRheTogJ251bWVyaWMnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChldmVudHNGb3JEYXkgJiYgZXZlbnRzRm9yRGF5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIC0tLSBDYXNlIDE6IEV2ZW50cyBleGlzdCBmb3IgdGhlIHNlbGVjdGVkIGRheSAtLS1cbiAgICAgICAgICAgIG5ldyBBY3Rpb25DaG9pY2VNb2RhbCh0aGlzLmFwcCxcbiAgICAgICAgICAgICAgICBgQ3JlYXRlIGRhaWx5IG5vdGUgZm9yICR7ZnJpZW5kbHlEYXRlfT9gLFxuICAgICAgICAgICAgICAgIFwiVGhpcyBkYXkgaGFzIGNhbGVuZGFyIGV2ZW50cy4gSG93IHdvdWxkIHlvdSBsaWtlIHRvIHByb2NlZWQ/XCIsXG4gICAgICAgICAgICAgICAgW3tcbiAgICAgICAgICAgICAgICAgICAgLy8gQnV0dG9uIDE6IEFsd2F5cyBpbmNsdWRlcyBldmVudHNcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogaGFzVGVtcGxhdGUgPyAnQ3JlYXRlIHdpdGggRXZlbnRzICYgVGVtcGxhdGUnIDogJ0NyZWF0ZSB3aXRoIEV2ZW50cycsXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ21vZC1jdGEnLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IGNyZWF0ZU5vdGUodHJ1ZSlcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEJ1dHRvbiAyOiBFeGNsdWRlcyBldmVudHNcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogaGFzVGVtcGxhdGUgPyAnQ3JlYXRlIGZyb20gVGVtcGxhdGUgT25seScgOiAnQ3JlYXRlIEJsYW5rIE5vdGUnLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IGNyZWF0ZU5vdGUoZmFsc2UpXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnQ2FuY2VsJyxcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7IH1cbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgKS5vcGVuKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyAtLS0gQ2FzZSAyOiBObyBldmVudHMgZXhpc3QgZm9yIHRoZSBzZWxlY3RlZCBkYXkgLS0tXG4gICAgICAgICAgICBuZXcgQWN0aW9uQ2hvaWNlTW9kYWwodGhpcy5hcHAsXG4gICAgICAgICAgICAgICAgJ0NyZWF0ZSBkYWlseSBub3RlPycsXG4gICAgICAgICAgICAgICAgYEEgZGFpbHkgbm90ZSBmb3IgJHtmcmllbmRseURhdGV9IGRvZXMgbm90IGV4aXN0LiBXb3VsZCB5b3UgbGlrZSB0byBjcmVhdGUgaXQ/YCxcbiAgICAgICAgICAgICAgICBbe1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgbWFpbiBhY3Rpb24gYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGhhc1RlbXBsYXRlID8gJ0NyZWF0ZSBmcm9tIFRlbXBsYXRlJyA6ICdDcmVhdGUgQmxhbmsgTm90ZScsXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ21vZC1jdGEnLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IGNyZWF0ZU5vdGUoZmFsc2UpIC8vIE5vIGV2ZW50cyB0byBpbmNsdWRlLCBzbyBhbHdheXMgZmFsc2VcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdDYW5jZWwnLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHsgfVxuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICApLm9wZW4oKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG4vKipcbiAqIFRoZSBtYWluIHBsdWdpbiBjbGFzcyB0aGF0IHJlZ2lzdGVycyB0aGUgdmlldyBhbmQgc2V0dGluZ3MgdGFiLlxuICovXG5jbGFzcyBQZXJpb2RNb250aFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cbiAgICB0aGVtZU9ic2VydmVyID0gbnVsbDtcbiAgICB0aGVtZUNoYW5nZURlYm91bmNlVGltZXIgPSBudWxsO1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgICAgICAgdGhpcy5hZGRTdHlsZSgpO1xuICAgICAgICB0aGlzLnVwZGF0ZVN0eWxlcygpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyVmlldyhWSUVXX1RZUEVfUEVSSU9ELCBsZWFmID0+IG5ldyBQZXJpb2RNb250aFZpZXcobGVhZiwgdGhpcykpO1xuICAgICAgICB0aGlzLmFkZFJpYmJvbkljb24oXCJjYWxlbmRhci1jaGVja1wiLCBcIk9wZW4gQ2FsZW5kYXIgUGVyaW9kIFdlZWsgTm90ZXNcIiwgKCkgPT4gdGhpcy5hY3RpdmF0ZVZpZXcoKSk7XG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7IGlkOiBcIm9wZW4tcGVyaW9kLW1vbnRoLXZpZXdcIiwgbmFtZTogXCJPcGVuIENhbGVuZGFyIFBlcmlvZCBXZWVrIE5vdGVzXCIsIGNhbGxiYWNrOiAoKSA9PiB0aGlzLmFjdGl2YXRlVmlldygpIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLnJlc2V0SWNzUmVmcmVzaEludGVydmFsKCk7XG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgUGVyaW9kU2V0dGluZ3NUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuICAgICAgICB0aGlzLnRoZW1lT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aGVtZUNoYW5nZURlYm91bmNlVGltZXIpO1xuICAgICAgICAgICAgdGhpcy50aGVtZUNoYW5nZURlYm91bmNlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN0eWxlcygpO1xuICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy50aGVtZU9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwgeyBhdHRyaWJ1dGVzOiB0cnVlLCBhdHRyaWJ1dGVGaWx0ZXI6IFsnY2xhc3MnXSB9KTtcblxuICAgICAgICB0aGlzLmljc1JlZnJlc2hJbnRlcnZhbElkID0gbnVsbDtcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZVZpZXcoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluamVjdHMgdGhlIHBsdWdpbidzIENTUyBpbnRvIHRoZSBkb2N1bWVudCBoZWFkLlxuICAgICAqL1xuICAgIGFkZFN0eWxlKCkge1xuICAgICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgc3R5bGVFbC5pZCA9ICdwZXJpb2QtbW9udGgtcGx1Z2luLXN0eWxlcyc7XG4gICAgICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBQTFVHSU5fU1RZTEVTO1xuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBDU1MgY3VzdG9tIHByb3BlcnRpZXMgKHZhcmlhYmxlcykgYmFzZWQgb24gdGhlIGN1cnJlbnQgcGx1Z2luIHNldHRpbmdzLlxuICAgICAqL1xuICAgIHVwZGF0ZVN0eWxlcygpIHtcbiAgICAgICAgY29uc3Qgc3R5bGVQcm9wcyA9IHtcbiAgICAgICAgICAgICctLWhlYWRlci1mb250LXNpemUnOiB0aGlzLnNldHRpbmdzLmZvbnRTaXplLFxuICAgICAgICAgICAgJy0tZGF5LW51bWJlci1mb250LXNpemUnOiB0aGlzLnNldHRpbmdzLmRheU51bWJlckZvbnRTaXplLFxuICAgICAgICAgICAgJy0taGVhZGVyLXJvdy1mb250LXdlaWdodCc6IHRoaXMuc2V0dGluZ3MuaGVhZGVyUm93Qm9sZCA/ICdib2xkJyA6ICdub3JtYWwnLFxuICAgICAgICAgICAgJy0tcHctY29sdW1uLWZvbnQtd2VpZ2h0JzogdGhpcy5zZXR0aW5ncy5wd0NvbHVtbkJvbGQgPyAnYm9sZCcgOiAnbm9ybWFsJyxcbiAgICAgICAgICAgICctLW1vbnRoLWNvbG9yLWxpZ2h0JzogdGhpcy5zZXR0aW5ncy5tb250aENvbG9yTGlnaHQsXG4gICAgICAgICAgICAnLS1tb250aC1jb2xvci1kYXJrJzogdGhpcy5zZXR0aW5ncy5tb250aENvbG9yRGFyayxcbiAgICAgICAgICAgICctLXllYXItY29sb3ItbGlnaHQnOiB0aGlzLnNldHRpbmdzLnllYXJDb2xvckxpZ2h0LFxuICAgICAgICAgICAgJy0teWVhci1jb2xvci1kYXJrJzogdGhpcy5zZXR0aW5ncy55ZWFyQ29sb3JEYXJrLFxuICAgICAgICAgICAgJy0tY3VycmVudC1oaWdobGlnaHQtbGFiZWwtY29sb3ItbGlnaHQnOiB0aGlzLnNldHRpbmdzLmN1cnJlbnRIaWdobGlnaHRMYWJlbENvbG9yTGlnaHQsXG4gICAgICAgICAgICAnLS1jdXJyZW50LWhpZ2hsaWdodC1sYWJlbC1jb2xvci1kYXJrJzogdGhpcy5zZXR0aW5ncy5jdXJyZW50SGlnaGxpZ2h0TGFiZWxDb2xvckRhcmssXG4gICAgICAgICAgICAnLS1wdy1zZXBhcmF0b3ItY29sb3InOiB0aGlzLnNldHRpbmdzLnB3Q29sdW1uU2VwYXJhdG9yQ29sb3IsXG4gICAgICAgICAgICAnLS1wdy1jb2x1bW4tZm9udC1jb2xvci1saWdodCc6IHRoaXMuc2V0dGluZ3MucHdDb2x1bW5Gb250Q29sb3JMaWdodCxcbiAgICAgICAgICAgICctLXB3LWNvbHVtbi1mb250LWNvbG9yLWRhcmsnOiB0aGlzLnNldHRpbmdzLnB3Q29sdW1uRm9udENvbG9yRGFyayxcbiAgICAgICAgICAgICctLXdlZWstbnVtYmVyLWZvbnQtY29sb3ItbGlnaHQnOiB0aGlzLnNldHRpbmdzLndlZWtOdW1iZXJGb250Q29sb3JMaWdodCxcbiAgICAgICAgICAgICctLXdlZWstbnVtYmVyLWZvbnQtY29sb3ItZGFyayc6IHRoaXMuc2V0dGluZ3Mud2Vla051bWJlckZvbnRDb2xvckRhcmssXG4gICAgICAgICAgICAnLS1kYXktaGVhZGVyLWZvbnQtY29sb3ItbGlnaHQnOiB0aGlzLnNldHRpbmdzLmRheUhlYWRlckZvbnRDb2xvckxpZ2h0LFxuICAgICAgICAgICAgJy0tZGF5LWhlYWRlci1mb250LWNvbG9yLWRhcmsnOiB0aGlzLnNldHRpbmdzLmRheUhlYWRlckZvbnRDb2xvckRhcmssXG4gICAgICAgICAgICAnLS1kYXktY2VsbC1mb250LWNvbG9yLWxpZ2h0JzogdGhpcy5zZXR0aW5ncy5kYXlDZWxsRm9udENvbG9yTGlnaHQsXG4gICAgICAgICAgICAnLS1kYXktY2VsbC1mb250LWNvbG9yLWRhcmsnOiB0aGlzLnNldHRpbmdzLmRheUNlbGxGb250Q29sb3JEYXJrLFxuICAgICAgICAgICAgJy0tb3RoZXItbW9udGgtZm9udC1jb2xvci1saWdodCc6IHRoaXMuc2V0dGluZ3Mub3RoZXJNb250aEZvbnRDb2xvckxpZ2h0LFxuICAgICAgICAgICAgJy0tb3RoZXItbW9udGgtZm9udC1jb2xvci1kYXJrJzogdGhpcy5zZXR0aW5ncy5vdGhlck1vbnRoRm9udENvbG9yRGFyayxcbiAgICAgICAgICAgICctLXNjcmF0Y2gtZm9udC1mYW1pbHknOiB0aGlzLnNldHRpbmdzLnNjcmF0Y2hGb250RmFtaWx5LFxuICAgICAgICAgICAgJy0tc2NyYXRjaC1mb250LXNpemUnOiB0aGlzLnNldHRpbmdzLnNjcmF0Y2hGb250U2l6ZSxcbiAgICAgICAgICAgICctLXNjcmF0Y2gtYm9sZCc6IHRoaXMuc2V0dGluZ3Muc2NyYXRjaEJvbGQgPyAnYm9sZCcgOiAnbm9ybWFsJyxcbiAgICAgICAgICAgICctLW5vdGVzLWZvbnQtc2l6ZSc6IHRoaXMuc2V0dGluZ3Mubm90ZXNGb250U2l6ZSxcbiAgICAgICAgICAgICctLW5vdGVzLWJvbGQnOiB0aGlzLnNldHRpbmdzLm5vdGVzQm9sZCA/ICdib2xkJyA6ICdub3JtYWwnLFxuICAgICAgICAgICAgJy0tdGFiLXRpdGxlLWZvbnQtc2l6ZSc6IHRoaXMuc2V0dGluZ3MudGFiVGl0bGVGb250U2l6ZSxcbiAgICAgICAgICAgICctLXRhYi10aXRsZS1ib2xkJzogdGhpcy5zZXR0aW5ncy50YWJUaXRsZUJvbGQgPyAnYm9sZCcgOiAnbm9ybWFsJyxcbiAgICAgICAgICAgICctLW5vdGVzLWxpbmUtaGVpZ2h0JzogdGhpcy5zZXR0aW5ncy5ub3Rlc0xpbmVIZWlnaHQsXG4gICAgICAgICAgICAnLS1zZWxlY3RlZC10YWItY29sb3InOiB0aGlzLnNldHRpbmdzLnNlbGVjdGVkVGFiQ29sb3IsXG4gICAgICAgICAgICAnLS10b2RheS1oaWdobGlnaHQtY29sb3ItbGlnaHQnOiB0aGlzLnNldHRpbmdzLnRvZGF5SGlnaGxpZ2h0Q29sb3JMaWdodCxcbiAgICAgICAgICAgICctLXRvZGF5LWhpZ2hsaWdodC1jb2xvci1kYXJrJzogdGhpcy5zZXR0aW5ncy50b2RheUhpZ2hsaWdodENvbG9yRGFyayxcbiAgICAgICAgICAgICctLW5vdGVzLWhvdmVyLWNvbG9yJzogdGhpcy5zZXR0aW5ncy5ub3Rlc0hvdmVyQ29sb3IsXG4gICAgICAgICAgICAnLS1kYWlseS1ub3RlLWRvdC1jb2xvcic6IHRoaXMuc2V0dGluZ3MuZGFpbHlOb3RlRG90Q29sb3IsXG4gICAgICAgICAgICAnLS1ub3RlLWNyZWF0ZWQtY29sb3InOiB0aGlzLnNldHRpbmdzLm5vdGVDcmVhdGVkQ29sb3IsXG4gICAgICAgICAgICAnLS1ub3RlLW1vZGlmaWVkLWNvbG9yJzogdGhpcy5zZXR0aW5ncy5ub3RlTW9kaWZpZWRDb2xvcixcbiAgICAgICAgICAgICctLW90aGVyLW5vdGUtZG90LWNvbG9yJzogdGhpcy5zZXR0aW5ncy5ub3RlQ3JlYXRlZENvbG9yLFxuICAgICAgICAgICAgJy0tY2FsZW5kYXItZ3JpZC1nYXAtd2lkdGgnOiB0aGlzLnNldHRpbmdzLmNhbGVuZGFyR3JpZEdhcFdpZHRoLFxuICAgICAgICAgICAgJy0tY2FsZW5kYXItbW9kaWZpZWQtZG90LWNvbG9yJzogdGhpcy5zZXR0aW5ncy5ub3RlTW9kaWZpZWRDb2xvcixcbiAgICAgICAgICAgICctLW90aGVyLW5vdGUtcG9wdXAtZm9udC1zaXplJzogdGhpcy5zZXR0aW5ncy5vdGhlck5vdGVQb3B1cEZvbnRTaXplLFxuICAgICAgICAgICAgJy0tY2FsZW5kYXItZG90LXNpemUnOiB0aGlzLnNldHRpbmdzLmNhbGVuZGFyRG90U2l6ZSArICdweCcsXG4gICAgICAgICAgICAnLS1uYXYtYnV0dG9uLWhlaWdodCc6IHRoaXMuc2V0dGluZ3MubmF2QnV0dG9uSGVpZ2h0LFxuICAgICAgICAgICAgJy0tZGF0ZS1jZWxsLWhvdmVyLWNvbG9yLWxpZ2h0JzogdGhpcy5zZXR0aW5ncy5kYXRlQ2VsbEhvdmVyQ29sb3JMaWdodCxcbiAgICAgICAgICAgICctLWRhdGUtY2VsbC1ob3Zlci1jb2xvci1kYXJrJzogdGhpcy5zZXR0aW5ncy5kYXRlQ2VsbEhvdmVyQ29sb3JEYXJrLFxuICAgICAgICAgICAgJy0tbWFpbi1tb250aC15ZWFyLXRpdGxlLWZvbnQtc2l6ZSc6IHRoaXMuc2V0dGluZ3MubWFpbk1vbnRoWWVhclRpdGxlRm9udFNpemUsXG4gICAgICAgICAgICAnLS1tYWluLW1vbnRoLXRpdGxlLXdlaWdodCc6IHRoaXMuc2V0dGluZ3MubWFpbk1vbnRoVGl0bGVCb2xkID8gJ2JvbGQnIDogJ25vcm1hbCcsXG4gICAgICAgICAgICAnLS1tYWluLXllYXItdGl0bGUtd2VpZ2h0JzogdGhpcy5zZXR0aW5ncy5tYWluWWVhclRpdGxlQm9sZCA/ICdib2xkJyA6ICdub3JtYWwnLFxuICAgICAgICAgICAgJy0tdG9kYXktaGlnaGxpZ2h0LXNpemUnOiB0aGlzLnNldHRpbmdzLnRvZGF5SGlnaGxpZ2h0U2l6ZSxcbiAgICAgICAgICAgICctLXRhc2staGVhZGluZy1mb250LXNpemUnOiB0aGlzLnNldHRpbmdzLnRhc2tIZWFkaW5nRm9udFNpemUsXG4gICAgICAgICAgICAnLS10YXNrLXRleHQtZm9udC1zaXplJzogdGhpcy5zZXR0aW5ncy50YXNrVGV4dEZvbnRTaXplLFxuICAgICAgICAgICAgJy0tc2NyYXRjaHBhZC1oaWdobGlnaHQtY29sb3InOiB0aGlzLnNldHRpbmdzLnNjcmF0Y2hwYWRIaWdobGlnaHRDb2xvcixcbiAgICAgICAgICAgICctLWFzc2V0LWRvdC1jb2xvcic6IHRoaXMuc2V0dGluZ3MuYXNzZXREb3RDb2xvcixcbiAgICAgICAgICAgICctLWNhbGVuZGFyLWV2ZW50LWRvdC1jb2xvcic6IHRoaXMuc2V0dGluZ3MuY2FsZW5kYXJFdmVudERvdENvbG9yLFxuICAgICAgICAgICAgJy0tdGFzay1kb3QtY29sb3InOiB0aGlzLnNldHRpbmdzLnRhc2tEb3RDb2xvcixcbiAgICAgICAgICAgICctLXRhc2stYmFkZ2UtY29sb3InOiB0aGlzLnNldHRpbmdzLnRhc2tCYWRnZUNvbG9yLFxuICAgICAgICAgICAgJy0tdGFzay1iYWRnZS1mb250LWNvbG9yJzogdGhpcy5zZXR0aW5ncy50YXNrQmFkZ2VGb250Q29sb3IsXG4gICAgICAgICAgICAnLS10YXNrLWJhZGdlLWZvbnQtc2l6ZSc6IHRoaXMuc2V0dGluZ3MudGFza0JhZGdlRm9udFNpemUsXG4gICAgICAgICAgICAnLS10b2RheS1jaXJjbGUtY29sb3ItbGlnaHQnOiB0aGlzLnNldHRpbmdzLnRvZGF5Q2lyY2xlQ29sb3JMaWdodCxcbiAgICAgICAgICAgICctLXRvZGF5LWNpcmNsZS1jb2xvci1kYXJrJzogdGhpcy5zZXR0aW5ncy50b2RheUNpcmNsZUNvbG9yRGFyayxcbiAgICAgICAgICAgICctLXdlZWtseS1ub3RlLWRvdC1jb2xvcic6IHRoaXMuc2V0dGluZ3Mud2Vla2x5Tm90ZURvdENvbG9yLFxuICAgICAgICAgICAgJy0td2Vla2VuZC1zaGFkZS1jb2xvci1saWdodCc6IHRoaXMuc2V0dGluZ3Mud2Vla2VuZFNoYWRlQ29sb3JMaWdodCxcbiAgICAgICAgICAgICctLXdlZWtlbmQtc2hhZGUtY29sb3ItZGFyayc6IHRoaXMuc2V0dGluZ3Mud2Vla2VuZFNoYWRlQ29sb3JEYXJrLFxuICAgICAgICAgICAgJy0td2Vla2x5LW5vdGUtZG90LWNvbG9yJzogdGhpcy5zZXR0aW5ncy53ZWVrbHlOb3RlRG90Q29sb3IsXG4gICAgICAgICAgICAnLS1yb3ctaGlnaGxpZ2h0LWNvbG9yLWxpZ2h0JzogdGhpcy5zZXR0aW5ncy5yb3dIaWdobGlnaHRDb2xvckxpZ2h0LFxuICAgICAgICAgICAgJy0tcm93LWhpZ2hsaWdodC1jb2xvci1kYXJrJzogdGhpcy5zZXR0aW5ncy5yb3dIaWdobGlnaHRDb2xvckRhcmssXG5cbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzdHlsZVByb3BzKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoa2V5LCBzdHlsZVByb3BzW2tleV0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3BlbnMgdGhlIHBsdWdpbiB2aWV3IGluIGEgbmV3IGxlYWYgb3IgcmV2ZWFscyBpdCBpZiBpdCdzIGFscmVhZHkgb3Blbi5cbiAgICAgKi9cbiAgICBhc3luYyBhY3RpdmF0ZVZpZXcoKSB7XG4gICAgICAgIGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1BFUklPRCk7XG4gICAgICAgIGlmIChsZWF2ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYobGVhdmVzWzBdKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG4gICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHsgdHlwZTogVklFV19UWVBFX1BFUklPRCwgYWN0aXZlOiB0cnVlIH0pO1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcbiAgICB9XG5cbiAgICBhc3luYyByZXNldEljc1JlZnJlc2hJbnRlcnZhbCgpIHtcbiAgICAgICAgLy8gSWYgdGhlcmUncyBhbiBvbGQgaW50ZXJ2YWwgcnVubmluZywgY2xlYXIgaXQgZmlyc3RcbiAgICAgICAgaWYgKHRoaXMuaWNzUmVmcmVzaEludGVydmFsSWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuaWNzUmVmcmVzaEludGVydmFsSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaW50ZXJ2YWxNaW51dGVzID0gdGhpcy5zZXR0aW5ncy5pY3NSZWZyZXNoSW50ZXJ2YWw7XG5cbiAgICAgICAgaWYgKGludGVydmFsTWludXRlcyA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGludGVydmFsTWlsbGlzZWNvbmRzID0gaW50ZXJ2YWxNaW51dGVzICogNjAgKiAxMDAwO1xuXG4gICAgICAgICAgICB0aGlzLmljc1JlZnJlc2hJbnRlcnZhbElkID0gdGhpcy5yZWdpc3RlckludGVydmFsKFxuICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBQZXJpb2RpYyBOb3RlczogQXV0b21hdGljYWxseSByZWZyZXNoaW5nIElDUyBmZWVkIChpbnRlcnZhbDogJHtpbnRlcnZhbE1pbnV0ZXN9IG1pbnV0ZXMpLmApO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gZmluZCB0aGUgdmlldyB0byBjYWxsIGl0cyByZWZyZXNoIG1ldGhvZFxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2aWV3cyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1BFUklPRCk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbGVhZiBvZiB2aWV3cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlYWYudmlldyAmJiBsZWFmLnZpZXcucmVmcmVzaEljc0V2ZW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYudmlldy5yZWZyZXNoSWNzRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBpbnRlcnZhbE1pbGxpc2Vjb25kcylcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIG9udW5sb2FkKCkge1xuICAgICAgICAvLyBDbGVhbiB1cCB3aGVuIHRoZSBwbHVnaW4gaXMgZGlzYWJsZWQuXG4gICAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGVyaW9kLW1vbnRoLXBsdWdpbi1zdHlsZXMnKTtcbiAgICAgICAgaWYgKHN0eWxlRWwpIHN0eWxlRWwucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1BFUklPRCkuZm9yRWFjaChsZWFmID0+IGxlYWYuZGV0YWNoKCkpO1xuXG4gICAgICAgIGlmICh0aGlzLnRoZW1lT2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRoaXMudGhlbWVPYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIH1cblxuICAgIH1cbn1cblxuLyoqXG4gKiBUaGUgc2V0dGluZ3MgdGFiIGNsYXNzIGZvciB0aGUgcGx1Z2luLCByZXNwb25zaWJsZSBmb3IgYnVpbGRpbmcgdGhlIHNldHRpbmdzIFVJLlxuICovXG5jbGFzcyBQZXJpb2RTZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIGNvbnN0cnVjdG9yKGFwcCwgcGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuYWN0aXZlVGFiID0gJ2dlbmVyYWwnO1xuICAgICAgICB0aGlzLmFjdGl2ZVByZXZpZXdNb2RlID0gbnVsbDtcbiAgICAgICAgdGhpcy5zY3JvbGxQb3NpdGlvbiA9IDA7XG4gICAgICAgIHRoaXMuY29sb3JDbGlwYm9hcmQgPSBudWxsO1xuICAgICAgICB0aGlzLnNlbGVjdGVkVGhlbWVGaWxlID0gbnVsbDtcbiAgICAgICAgdGhpcy5jdXJyZW50VGhlbWVEZWZhdWx0cyA9IHsgLi4uREVGQVVMVF9TRVRUSU5HUyB9O1xuICAgIH1cblxuICAgIHJlZnJlc2hEaXNwbGF5KCkge1xuICAgICAgICBpZiAodGhpcy5jb250ZW50RWwpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsUG9zaXRpb24gPSB0aGlzLmNvbnRlbnRFbC5zY3JvbGxUb3A7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgfVxuXG4gICAgYXN5bmMgbG9hZEN1cnJlbnRUaGVtZURlZmF1bHRzKCkge1xuICAgICAgICAvLyBJZiBhIHRoZW1lIGlzIGFjdGl2ZSwgdHJ5IHRvIGxvYWQgaXRzIHNldHRpbmdzXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcHBsaWVkVGhlbWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHRoZW1lTmFtZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmFwcGxpZWRUaGVtZTtcbiAgICAgICAgICAgIGNvbnN0IHRoZW1lUGF0aCA9IGAke3RoaXMucGx1Z2luLm1hbmlmZXN0LmRpcn0vdGhlbWVzLyR7dGhlbWVOYW1lfS5qc29uYDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHRoZW1lUGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQodGhlbWVQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGhlbWVTZXR0aW5ncyA9IEpTT04ucGFyc2UoZmlsZUNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBNZXJnZSB0aGVtZSBzZXR0aW5ncyBvdmVyIGJhc2UgZGVmYXVsdHMgdG8gZ2V0IHRoZSBmaW5hbCBkZWZhdWx0c1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRUaGVtZURlZmF1bHRzID0geyAuLi5ERUZBVUxUX1NFVFRJTkdTLCAuLi50aGVtZVNldHRpbmdzIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHRoZW1lIGZpbGUgaXMgbWlzc2luZywgZmFsbCBiYWNrIHRvIGJhc2UgZGVmYXVsdHNcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBBcHBsaWVkIHRoZW1lIGZpbGUgXCIke3RoZW1lTmFtZX0uanNvblwiIG5vdCBmb3VuZC4gVXNpbmcgYmFzZSBkZWZhdWx0cy5gKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50VGhlbWVEZWZhdWx0cyA9IHsgLi4uREVGQVVMVF9TRVRUSU5HUyB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbG9hZGluZyB0aGVtZSBkZWZhdWx0czpcIiwgZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50VGhlbWVEZWZhdWx0cyA9IHsgLi4uREVGQVVMVF9TRVRUSU5HUyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgbm8gdGhlbWUgaXMgYWN0aXZlLCB0aGUgZGVmYXVsdHMgYXJlIGp1c3QgdGhlIGJhc2UgZGVmYXVsdHNcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFRoZW1lRGVmYXVsdHMgPSB7IC4uLkRFRkFVTFRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGhpZGUoKSB7XG4gICAgICAgIC8vIFRoaXMgZnVuY3Rpb24gcnVucyBhdXRvbWF0aWNhbGx5IHdoZW4gdGhlIHVzZXIgY2xvc2VzIHRoZSBzZXR0aW5ncyB0YWIuXG4gICAgICAgIC8vIEdldCBhbGwgb3BlbiB2aWV3cyBvZiB5b3VyIGNhbGVuZGFyIHR5cGVcbiAgICAgICAgY29uc3Qgdmlld3MgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9QRVJJT0QpO1xuXG4gICAgICAgIGlmICh2aWV3cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBUZWxsIGVhY2ggb3BlbiBjYWxlbmRhciB2aWV3IHRvIHJlLXJlbmRlciBpdHNlbGZcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGVhZiBvZiB2aWV3cykge1xuICAgICAgICAgICAgICAgIGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBQZXJpb2RNb250aFZpZXcpIHsgLy8gQXNzdW1pbmcgeW91ciB2aWV3IGNsYXNzIGlzIFBlcmlvZE1vbnRoVmlld1xuICAgICAgICAgICAgICAgICAgICAvLyBDYWxsaW5nIHJlbmRlckNhbGVuZGFyKCkgd2lsbCByZWRyYXcgdGhlIHZpZXcgd2l0aCB0aGUgbGF0ZXN0IHNldHRpbmdzXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYudmlldy5yZW5kZXJDYWxlbmRhcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgaGVscGVyIGZ1bmN0aW9uIHRvIHNhdmUgc2V0dGluZ3MgYW5kIHRyaWdnZXIgYSBmdWxsIFVJIHJlZnJlc2ggaW4gYW55IG9wZW4gdmlld3MuXG4gICAgICovXG4gICAgYXN5bmMgc2F2ZUFuZFVwZGF0ZSgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgICB0aGlzLnBsdWdpbi51cGRhdGVTdHlsZXMoKTtcbiAgICAgICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1BFUklPRCkuZm9yRWFjaChsZWFmID0+IHtcbiAgICAgICAgICAgIGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBQZXJpb2RNb250aFZpZXcpIHtcbiAgICAgICAgICAgICAgICBsZWFmLnZpZXcucmVidWlsZEFuZFJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYW4gcmdiYSgpIHN0cmluZyBpbnRvIGEgaGV4IGNvbG9yIGFuZCBhbiBhbHBoYSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmdiYVN0cmluZyBUaGUgaW5wdXQgc3RyaW5nIChlLmcuLCBcInJnYmEoMjU1LCAxNjUsIDAsIDAuNClcIikuXG4gICAgICogQHJldHVybnMge3tjb2xvcjogc3RyaW5nLCBhbHBoYTogbnVtYmVyfX1cbiAgICAgKi9cbiAgICBwYXJzZVJnYmEocmdiYVN0cmluZykge1xuICAgICAgICBpZiAoIXJnYmFTdHJpbmcpIHJldHVybiB7IGNvbG9yOiAnIzAwMDAwMCcsIGFscGhhOiAxIH07XG4gICAgICAgIGNvbnN0IG1hdGNoID0gcmdiYVN0cmluZy5tYXRjaCgvcmdiYT9cXCgoXFxkKyksXFxzKihcXGQrKSxcXHMqKFxcZCspKD86LFxccyooW1xcZC5dKykpP1xcKS8pO1xuICAgICAgICBpZiAoIW1hdGNoKSByZXR1cm4geyBjb2xvcjogJyMwMDAwMDAnLCBhbHBoYTogMSB9O1xuICAgICAgICBjb25zdCB0b0hleCA9IChjKSA9PiAoJzAnICsgcGFyc2VJbnQoYywgMTApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpO1xuICAgICAgICBjb25zdCBjb2xvciA9IGAjJHt0b0hleChtYXRjaFsxXSl9JHt0b0hleChtYXRjaFsyXSl9JHt0b0hleChtYXRjaFszXSl9YDtcbiAgICAgICAgY29uc3QgYWxwaGEgPSBtYXRjaFs0XSAhPT0gdW5kZWZpbmVkID8gcGFyc2VGbG9hdChtYXRjaFs0XSkgOiAxO1xuICAgICAgICByZXR1cm4geyBjb2xvciwgYWxwaGEgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCdWlsZHMgYW4gcmdiYSgpIHN0cmluZyBmcm9tIGEgaGV4IGNvbG9yIGFuZCBhbiBhbHBoYSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaGV4IFRoZSBoZXggY29sb3Igc3RyaW5nIChlLmcuLCBcIiNmZmE1MDBcIikuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFscGhhIFRoZSBhbHBoYSB2YWx1ZSAoMCB0byAxKS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgcmdiYSBzdHJpbmcuXG4gICAgICovXG4gICAgYnVpbGRSZ2JhKGhleCwgYWxwaGEpIHtcbiAgICAgICAgY29uc3QgciA9IHBhcnNlSW50KGhleC5zbGljZSgxLCAzKSwgMTYpO1xuICAgICAgICBjb25zdCBnID0gcGFyc2VJbnQoaGV4LnNsaWNlKDMsIDUpLCAxNik7XG4gICAgICAgIGNvbnN0IGIgPSBwYXJzZUludChoZXguc2xpY2UoNSwgNyksIDE2KTtcbiAgICAgICAgcmV0dXJuIGByZ2JhKCR7cn0sICR7Z30sICR7Yn0sICR7YWxwaGEudG9GaXhlZCgyKX0pYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY3VzdG9tIHNldHRpbmcgY29tcG9uZW50IHdpdGggYSBjb2xvciBwaWNrZXIgYW5kIGFuIGFscGhhIHNsaWRlci5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgc2V0dGluZyBuYW1lLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkZXNjIFRoZSBzZXR0aW5nIGRlc2NyaXB0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzZXR0aW5nS2V5IFRoZSBrZXkgaW4gdGhlIHNldHRpbmdzIG9iamVjdCB0byBtb2RpZnkuXG4gICAgICovXG4gICAgY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgbmFtZSwgZGVzYywgc2V0dGluZ0tleSkge1xuICAgICAgICBjb25zdCBzZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShuYW1lKVxuICAgICAgICAgICAgLnNldERlc2MoZGVzYyk7XG5cbiAgICAgICAgbGV0IGNvbG9yUGlja2VyO1xuICAgICAgICBsZXQgc2xpZGVyO1xuXG4gICAgICAgIGNvbnN0IGluaXRpYWxWYWx1ZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzW3NldHRpbmdLZXldIHx8IERFRkFVTFRfU0VUVElOR1Nbc2V0dGluZ0tleV07XG4gICAgICAgIGNvbnN0IHsgY29sb3I6IGluaXRpYWxDb2xvciwgYWxwaGE6IGluaXRpYWxBbHBoYSB9ID0gdGhpcy5wYXJzZVJnYmEoaW5pdGlhbFZhbHVlKTtcblxuICAgICAgICBzZXR0aW5nLmFkZENvbG9yUGlja2VyKHBpY2tlciA9PiB7XG4gICAgICAgICAgICBjb2xvclBpY2tlciA9IHBpY2tlcjtcbiAgICAgICAgICAgIHBpY2tlclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShpbml0aWFsQ29sb3IpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIChuZXdDb2xvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50QWxwaGEgPSBzbGlkZXIgPyBzbGlkZXIuZ2V0VmFsdWUoKSA6IDE7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1JnYmEgPSB0aGlzLmJ1aWxkUmdiYShuZXdDb2xvciwgY3VycmVudEFscGhhKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Nbc2V0dGluZ0tleV0gPSBuZXdSZ2JhO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGlja2VyLmNvbG9yRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpY2tlci5jb2xvckVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG5ld1JnYmE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNldHRpbmcuYWRkU2xpZGVyKHNsaWRlckNvbXBvbmVudCA9PiB7XG4gICAgICAgICAgICBzbGlkZXIgPSBzbGlkZXJDb21wb25lbnQ7XG4gICAgICAgICAgICBzbGlkZXJcbiAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDAsIDEsIDAuMDUpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKGluaXRpYWxBbHBoYSlcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAobmV3QWxwaGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudENvbG9yID0gY29sb3JQaWNrZXIgPyBjb2xvclBpY2tlci5nZXRWYWx1ZSgpIDogJyMwMDAwMDAnO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdSZ2JhID0gdGhpcy5idWlsZFJnYmEoY3VycmVudENvbG9yLCBuZXdBbHBoYSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzW3NldHRpbmdLZXldID0gbmV3UmdiYTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbG9yUGlja2VyICYmIGNvbG9yUGlja2VyLmNvbG9yRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yUGlja2VyLmNvbG9yRWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gbmV3UmdiYTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2V0IHRoZSBpbml0aWFsIGNvbG9yIHN3YXRjaCBjb3JyZWN0bHlcbiAgICAgICAgaWYgKGNvbG9yUGlja2VyICYmIGNvbG9yUGlja2VyLmNvbG9yRWwpIHtcbiAgICAgICAgICAgIGNvbG9yUGlja2VyLmNvbG9yRWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gaW5pdGlhbFZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIE5FVyBDT1BZIEFORCBQQVNURSBCVVRUT05TIC0tLVxuICAgICAgICBzZXR0aW5nLmFkZEV4dHJhQnV0dG9uKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0SWNvbihcImNvcHlcIilcbiAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcChcIkNvcHkgY29sb3IgYW5kIHRyYW5zcGFyZW5jeVwiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xvckNsaXBib2FyZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzW3NldHRpbmdLZXldO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBzZXR0aW5nLmFkZEV4dHJhQnV0dG9uKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0SWNvbihcInBhc3RlXCIpXG4gICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoXCJQYXN0ZSBjb2xvciBhbmQgdHJhbnNwYXJlbmN5XCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY29sb3JDbGlwYm9hcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDbGlwYm9hcmQgaXMgZW1wdHkuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Nbc2V0dGluZ0tleV0gPSB0aGlzLmNvbG9yQ2xpcGJvYXJkO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgY29sb3IsIGFscGhhIH0gPSB0aGlzLnBhcnNlUmdiYSh0aGlzLmNvbG9yQ2xpcGJvYXJkKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sb3JQaWNrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yUGlja2VyLnNldFZhbHVlKGNvbG9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2xvclBpY2tlci5jb2xvckVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JQaWNrZXIuY29sb3JFbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmNvbG9yQ2xpcGJvYXJkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzbGlkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlci5zZXRWYWx1ZShhbHBoYSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2V0dGluZy5hZGRFeHRyYUJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgYnV0dG9uXG4gICAgICAgICAgICAgICAgLnNldEljb24oJ3JvdGF0ZS1jY3cnKVxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdSZXNldCB0byBkZWZhdWx0JylcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IHRoaXMuY3VycmVudFRoZW1lRGVmYXVsdHNbc2V0dGluZ0tleV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzW3NldHRpbmdLZXldID0gZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGNvbG9yLCBhbHBoYSB9ID0gdGhpcy5wYXJzZVJnYmEoZGVmYXVsdFZhbHVlKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sb3JQaWNrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yUGlja2VyLnNldFZhbHVlKGNvbG9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2xvclBpY2tlci5jb2xvckVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JQaWNrZXIuY29sb3JFbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNsaWRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVyLnNldFZhbHVlKGFscGhhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2ltcGxlIHBhdGggc3VnZ2VzdGlvbiBwb3B1cCBmb3IgYSB0ZXh0IGlucHV0IGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtIVE1MSW5wdXRFbGVtZW50fSBpbnB1dEVsIFRoZSBpbnB1dCBlbGVtZW50IHRvIGF0dGFjaCB0aGUgc3VnZ2VzdGVyIHRvLlxuICAgICAqIEBwYXJhbSB7KHF1ZXJ5OiBzdHJpbmcpID0+IHN0cmluZ1tdfSBnZXRTdWdnZXN0aW9ucyBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGxpc3Qgb2Ygc3VnZ2VzdGlvbiBzdHJpbmdzIGJhc2VkIG9uIGEgcXVlcnkuXG4gICAgICovXG4gICAgY3JlYXRlUGF0aFN1Z2dlc3RlcihpbnB1dEVsLCBnZXRTdWdnZXN0aW9ucykge1xuICAgICAgICBjb25zdCBzdWdnZXN0aW9uRWwgPSBjcmVhdGVEaXYoeyBjbHM6ICdjdXN0b20tc3VnZ2VzdGlvbi1jb250YWluZXInIH0pO1xuICAgICAgICBzdWdnZXN0aW9uRWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgaW5wdXRFbC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHN1Z2dlc3Rpb25FbCk7XG4gICAgICAgIGNvbnN0IHNob3dTdWdnZXN0aW9ucyA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5ID0gaW5wdXRFbC52YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbnMgPSBnZXRTdWdnZXN0aW9ucyhxdWVyeSk7XG4gICAgICAgICAgICBzdWdnZXN0aW9uRWwuZW1wdHkoKTtcbiAgICAgICAgICAgIGlmIChzdWdnZXN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBzdWdnZXN0aW9uRWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdWdnZXN0aW9uRWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBzdWdnZXN0aW9ucy5zbGljZSgwLCAxMCkuZm9yRWFjaChwYXRoID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gc3VnZ2VzdGlvbkVsLmNyZWF0ZURpdih7IGNsczogJ2N1c3RvbS1zdWdnZXN0aW9uLWl0ZW0nLCB0ZXh0OiBwYXRoIH0pO1xuICAgICAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBpbnB1dEVsLnZhbHVlID0gcGF0aDtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRFbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnKSk7XG4gICAgICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb25FbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBzaG93U3VnZ2VzdGlvbnMpO1xuICAgICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgc2hvd1N1Z2dlc3Rpb25zKTtcbiAgICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4gc2V0VGltZW91dCgoKSA9PiB7IHN1Z2dlc3Rpb25FbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyB9LCAxNTApKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2V0dGluZ3Mgc2VjdGlvbiBmb3IgbWFuYWdpbmcgYSBsaXN0IG9mIGlnbm9yZWQgZm9sZGVyIHBhdGhzLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lckVsIFRoZSBwYXJlbnQgY29udGFpbmVyIGZvciB0aGlzIHNldHRpbmcgc2VjdGlvbi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgaGVhZGluZyBuYW1lIGZvciB0aGUgc2VjdGlvbi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGVzYyBUaGUgZGVzY3JpcHRpb24gZm9yIHRoZSBzZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzZXR0aW5nS2V5IFRoZSBrZXkgaW4gdGhlIHNldHRpbmdzIG9iamVjdCBmb3IgdGhlIGlnbm9yZWQgZm9sZGVyIGFycmF5LlxuICAgICAqL1xuICAgIGNyZWF0ZUlnbm9yZWRGb2xkZXJMaXN0KGNvbnRhaW5lckVsLCBuYW1lLCBkZXNjLCBzZXR0aW5nS2V5KSB7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKG5hbWUpLnNldERlc2MoZGVzYykuc2V0SGVhZGluZygpO1xuICAgICAgICBjb25zdCBpZ25vcmVkRm9sZGVycyA9IHRoaXMucGx1Z2luLnNldHRpbmdzW3NldHRpbmdLZXldO1xuICAgICAgICBpZiAoaWdub3JlZEZvbGRlcnMgJiYgaWdub3JlZEZvbGRlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWdub3JlZEZvbGRlcnMuZm9yRWFjaCgoZm9sZGVyLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKGZvbGRlcikuYWRkQnV0dG9uKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRJY29uKFwidHJhc2hcIikuc2V0VG9vbHRpcChcIlJlbW92ZSBmb2xkZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5nc1tzZXR0aW5nS2V5XS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaERpc3BsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ05vIGZvbGRlcnMgYXJlIGJlaW5nIGlnbm9yZWQuJywgY2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhZGRTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpO1xuICAgICAgICBsZXQgdGV4dElucHV0O1xuICAgICAgICBhZGRTZXR0aW5nLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICB0ZXh0SW5wdXQgPSB0ZXh0O1xuICAgICAgICAgICAgY29uc3QgZ2V0Rm9sZGVycyA9IChxdWVyeSkgPT4gdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKS5maWx0ZXIoZiA9PiBmIGluc3RhbmNlb2YgVEZvbGRlciAmJiAoIXF1ZXJ5IHx8IGYucGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSkpLm1hcChmID0+IGYucGF0aCk7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVBhdGhTdWdnZXN0ZXIodGV4dC5pbnB1dEVsLCBnZXRGb2xkZXJzKTtcbiAgICAgICAgICAgIHRleHQuc2V0UGxhY2Vob2xkZXIoXCJFbnRlciBmb2xkZXIgcGF0aCB0byBpZ25vcmUuLi5cIik7XG4gICAgICAgIH0pLmFkZEJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoXCJBZGRcIikuc2V0VG9vbHRpcChcIkFkZCB0aGlzIGZvbGRlciB0byB0aGUgaWdub3JlIGxpc3RcIilcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0ZvbGRlciA9IHRleHRJbnB1dC5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3Rm9sZGVyICYmICF0aGlzLnBsdWdpbi5zZXR0aW5nc1tzZXR0aW5nS2V5XS5pbmNsdWRlcyhuZXdGb2xkZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5nc1tzZXR0aW5nS2V5XS5wdXNoKG5ld0ZvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaERpc3BsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBkaXNwbGF5KCkge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZEN1cnJlbnRUaGVtZURlZmF1bHRzKCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBtYWluIHR3by1jb2x1bW4gbGF5b3V0XG4gICAgICAgIGNvbnN0IHNldHRpbmdzQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiAncGVyaW9kLXNldHRpbmdzLWNvbnRhaW5lcicgfSk7XG4gICAgICAgIGNvbnN0IG5hdkVsID0gc2V0dGluZ3NDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncGVyaW9kLXNldHRpbmdzLW5hdicgfSk7XG4gICAgICAgIHRoaXMuY29udGVudEVsID0gc2V0dGluZ3NDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncGVyaW9kLXNldHRpbmdzLWNvbnRlbnQnIH0pOyAvLyBBc3NpZ24gY29udGVudCBhcmVhIHRvIHRoaXMuY29udGVudEVsXG5cbiAgICAgICAgY29uc3QgdGFicyA9IHtcbiAgICAgICAgICAgIGdlbmVyYWw6IFwiR2VuZXJhbCBEaXNwbGF5XCIsXG4gICAgICAgICAgICBmdW5jdGlvbmFsOiBcIkNhbGVuZGFyIEZ1bmN0aW9uYWxcIixcbiAgICAgICAgICAgIHBvcHVwOiBcIlBvcHVwIENvbnRyb2xzXCIsXG4gICAgICAgICAgICBkb3RzOiBcIkRvdCBJbmRpY2F0b3JzXCIsXG4gICAgICAgICAgICB3ZWVrbHlOb3RlczogXCJXZWVrbHkgTm90ZXNcIixcbiAgICAgICAgICAgIHRhc2tzSW5kaWNhdG9yOiBcIlRhc2sgSW5kaWNhdG9yc1wiLFxuICAgICAgICAgICAgdGFiczogXCJHZW5lcmFsIFRhYlwiLFxuICAgICAgICAgICAgc2NyYXRjaHBhZDogXCJTY3JhdGNoUGFkIFRhYlwiLFxuICAgICAgICAgICAgbm90ZXM6IFwiTm90ZXMgVGFiXCIsXG4gICAgICAgICAgICBwaW5uZWQ6ICdQaW5uZWQgTm90ZXMgVGFiJyxcbiAgICAgICAgICAgIGFzc2V0czogXCJBc3NldHMgVGFiXCIsXG4gICAgICAgICAgICB0YXNrczogXCJUYXNrcyBUYWJcIixcbiAgICAgICAgICAgIHRoZW1lczogXCJUaGVtZXNcIixcbiAgICAgICAgICAgIGltcG9ydEV4cG9ydDogXCJJbXBvcnQgLyBFeHBvcnRcIixcbiAgICAgICAgICAgIHN0YXJ0SGVyZTogXCJIZWxwXCIsXG4gICAgICAgICAgICBhYm91dDogXCJBYm91dFwiXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBuYXZpZ2F0aW9uIGJ1dHRvbnMgb24gdGhlIGxlZnRcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBsYWJlbF0gb2YgT2JqZWN0LmVudHJpZXModGFicykpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IG5hdkVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6IGxhYmVsIH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlVGFiID09PSBrZXkpIHtcbiAgICAgICAgICAgICAgICBidXR0b24uYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlVGFiID0ga2V5O1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpOyAvLyBSZS1yZW5kZXIgdGhlIHdob2xlIHRhYiBvbiBjbGlja1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBOb3csIHJlbmRlciB0aGUgY29udGVudCBmb3IgdGhlIGFjdGl2ZSB0YWIgaW50byB0aGlzLmNvbnRlbnRFbFxuICAgICAgICB0aGlzLnJlbmRlckNvbnRlbnRGb3JBY3RpdmVUYWIoKTtcbiAgICB9XG5cbiAgICAvLyBGdW5jdGlvbiB0byByZW5kZXIgdGhlIGRyYWdnYWJsZSBsaXN0IG9mIHBpbm5lZCBub3Rlc1xuICAgIGFzeW5jIHJlbmRlckRyYWdnYWJsZVBpbm5lZE5vdGVzKGNvbnRhaW5lcikge1xuICAgICAgICBjb250YWluZXIuZW1wdHkoKTtcblxuICAgICAgICBjb25zdCBwaW5WYWx1ZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnBpblRhZy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBhbGxNYXJrZG93bkZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuXG4gICAgICAgIC8vIEZpbHRlciBmb3IgcGlubmVkIG5vdGVzICh1c2luZyB5b3VyIGV4aXN0aW5nIGxvZ2ljKVxuICAgICAgICBjb25zdCBwaW5uZWROb3RlcyA9IGFsbE1hcmtkb3duRmlsZXMuZmlsdGVyKGZpbGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgIGlmICghY2FjaGUpIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgdGFnc1xuICAgICAgICAgICAgY29uc3QgaGFzUGluVGFnID0gY2FjaGUudGFncz8uc29tZSh0YWcgPT4gdGFnLnRhZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBpblZhbHVlKSk7XG4gICAgICAgICAgICBpZiAoaGFzUGluVGFnKSByZXR1cm4gdHJ1ZTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgZnJvbnRtYXR0ZXJcbiAgICAgICAgICAgIGNvbnN0IGZyb250bWF0dGVyID0gY2FjaGUuZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBpZiAoZnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBmcm9udG1hdHRlcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGZyb250bWF0dGVyW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocGluVmFsdWUpKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLnNvbWUoaXRlbSA9PiB0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycgJiYgaXRlbS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBpblZhbHVlKSkpIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY3VzdG9tT3JkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5waW5uZWROb3Rlc0N1c3RvbU9yZGVyIHx8IFtdO1xuXG4gICAgICAgIC8vIFNvcnQgdGhlIG5vdGVzIGJhc2VkIG9uIHRoZSBzYXZlZCBjdXN0b20gb3JkZXIsIHdpdGggYSBmYWxsYmFjayBmb3IgbmV3IG5vdGVzXG4gICAgICAgIHBpbm5lZE5vdGVzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4QSA9IGN1c3RvbU9yZGVyLmluZGV4T2YoYS5wYXRoKTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4QiA9IGN1c3RvbU9yZGVyLmluZGV4T2YoYi5wYXRoKTtcblxuICAgICAgICAgICAgaWYgKGluZGV4QSA9PT0gLTEgJiYgaW5kZXhCID09PSAtMSkgcmV0dXJuIGEuYmFzZW5hbWUubG9jYWxlQ29tcGFyZShiLmJhc2VuYW1lKTtcbiAgICAgICAgICAgIGlmIChpbmRleEEgPT09IC0xKSByZXR1cm4gMTtcbiAgICAgICAgICAgIGlmIChpbmRleEIgPT09IC0xKSByZXR1cm4gLTE7XG4gICAgICAgICAgICByZXR1cm4gaW5kZXhBIC0gaW5kZXhCO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDcmVhdGUgZHJhZ2dhYmxlIGVsZW1lbnRzXG4gICAgICAgIHBpbm5lZE5vdGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpdGVtRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZHJhZ2dhYmxlLWl0ZW0nIH0pO1xuICAgICAgICAgICAgaXRlbUVsLmRyYWdnYWJsZSA9IHRydWU7XG4gICAgICAgICAgICBpdGVtRWwuZGF0YXNldC5maWxlUGF0aCA9IGZpbGUucGF0aDtcblxuICAgICAgICAgICAgY29uc3QgaGFuZGxlID0gaXRlbUVsLmNyZWF0ZURpdih7IGNsczogJ2RyYWctaGFuZGxlJyB9KTtcbiAgICAgICAgICAgIHNldEljb24oaGFuZGxlLCAnZ3JpcC12ZXJ0aWNhbCcpO1xuICAgICAgICAgICAgaXRlbUVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiBmaWxlLmJhc2VuYW1lIH0pO1xuXG4gICAgICAgICAgICAvLyBEcmFnLWFuZC1Ecm9wIEV2ZW50IExpc3RlbmVyc1xuICAgICAgICAgICAgaXRlbUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgaXRlbUVsLmNsYXNzTGlzdC5hZGQoJ2RyYWdnaW5nJyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaXRlbUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaXRlbUVsLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWdnaW5nJyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaXRlbUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZHJhZ2dpbmdJdGVtID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5kcmFnZ2luZycpO1xuICAgICAgICAgICAgICAgIGlmIChkcmFnZ2luZ0l0ZW0gJiYgZHJhZ2dpbmdJdGVtICE9PSBpdGVtRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IGl0ZW1FbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNBZnRlciA9IGUuY2xpZW50WSA+IHJlY3QudG9wICsgcmVjdC5oZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBZnRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUVsLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGRyYWdnaW5nSXRlbSwgaXRlbUVsLm5leHRTaWJsaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1FbC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkcmFnZ2luZ0l0ZW0sIGl0ZW1FbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2F2ZSB0aGUgbmV3IG9yZGVyIG9uIGRyb3AgKGJ5IGxpc3RlbmluZyBvbiB0aGUgY29udGFpbmVyKVxuICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld09yZGVyID0gQXJyYXkuZnJvbShjb250YWluZXIuY2hpbGRyZW4pLm1hcChjaGlsZCA9PiBjaGlsZC5kYXRhc2V0LmZpbGVQYXRoKTtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnBpbm5lZE5vdGVzQ3VzdG9tT3JkZXIgPSBuZXdPcmRlcjtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnQ3VzdG9tIHBpbm5lZCBvcmRlciBzYXZlZCEnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyQ29udGVudEZvckFjdGl2ZVRhYigpIHtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgc3dpdGNoICh0aGlzLmFjdGl2ZVRhYikge1xuICAgICAgICAgICAgY2FzZSAnZ2VuZXJhbCc6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJHZW5lcmFsU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uYWwnOlxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRnVuY3Rpb25hbFNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdwb3B1cCc6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJQb3B1cFNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdkb3RzJzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckRvdHNTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnd2Vla2x5Tm90ZXMnOlxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyV2Vla2x5Tm90ZXNTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndGFza3NJbmRpY2F0b3InOlxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyVGFza0luZGljYXRvclNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd0YWJzJzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclRhYnNTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnc2NyYXRjaHBhZCc6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTY3JhdGNocGFkU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ25vdGVzJzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck5vdGVzU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3Bpbm5lZCc6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJQaW5uZWROb3Rlc1NldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhc3NldHMnOlxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQXNzZXRzU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3Rhc2tzJzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclRhc2tzU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3RoZW1lcyc6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJUaGVtZXNTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnaW1wb3J0RXhwb3J0JzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckltcG9ydEV4cG9ydFRhYigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnc3RhcnRIZXJlJzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclN0YXJ0SGVyZVRhYigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYWJvdXQnOlxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQWJvdXRUYWIoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIC0tLSBSRU5ERVIgTUVUSE9EUyBGT1IgRUFDSCBUQUIgLS0tXG4gICAgcmVuZGVyR2VuZXJhbFNldHRpbmdzKCkge1xuICAgICAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGVudEVsO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkdlbmVyYWwgRGlzcGxheSBTZXR0aW5nc1wiIH0pO1xuXG4gICAgICAgIC8vIC0tLSBUaXRsZXMgJiBIZWFkZXJzIFNlY3Rpb24gLS0tXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiVGl0bGVzICYgSGVhZGVyc1wiKS5zZXRIZWFkaW5nKCk7XG4gICAgICAgIGNvbnN0IG1vbnRoVGl0bGVTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJNb250aCB0aXRsZSBmb3JtYXRcIik7XG4gICAgICAgIG1vbnRoVGl0bGVTZXR0aW5nLmRlc2NFbC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICBTZXQgdGhlIGZvcm1hdCBmb3IgdGhlIGNhbGVuZGFyJ3MgbW9udGggdGl0bGUuIFVzZXMgPGEgaHJlZj1cImh0dHBzOi8vbW9tZW50anMuY29tL2RvY3MvIy9kaXNwbGF5aW5nL2Zvcm1hdC9cIj5tb21lbnQuanM8L2E+IGZvcm1hdCBzdHJpbmdzLCBlLmcuXG4gICAgICAgICAgICA8YnI+PGNvZGU+WVlZWTwvY29kZT46IDQtZGlnaXQgeWVhciAoZS5nLiwgMjAyNSlcbiAgICAgICAgICAgIDxicj48Y29kZT5ZWTwvY29kZT46IDItZGlnaXQgeWVhciAoZS5nLiwgMjUpXG4gICAgICAgICAgICA8YnI+PGNvZGU+TU1NTTwvY29kZT46IEZ1bGwgbW9udGggbmFtZSAoZS5nLiwgU2VwdGVtYmVyKVxuICAgICAgICAgICAgPGJyPjxjb2RlPk1NTTwvY29kZT46IFNob3J0IG1vbnRoIG5hbWUgKGUuZy4sIFNlcClcbiAgICAgICAgICAgIDxicj48Y29kZT5NTTwvY29kZT46IDItZGlnaXQgbW9udGggKGUuZy4sIDA5KVxuICAgICAgICAgICAgPGJyPjxjb2RlPk08L2NvZGU+OiBNb250aCBudW1iZXIgKGUuZy4sIDkpXG4gICAgICAgIGA7XG5cbiAgICAgICAgbW9udGhUaXRsZVNldHRpbmcuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0UGxhY2Vob2xkZXIoXCJNTU1NIFlZWVlcIikuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9udGhUaXRsZUZvcm1hdCkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLm1vbnRoVGl0bGVGb3JtYXQgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJNb250aCB0aXRsZSBmb250IHNpemVcIikuc2V0RGVzYyhcIkZvbnQgc2l6ZSBmb3IgdGhlIG1haW4gJ01vbnRoIFllYXInIHRpdGxlIGF0IHRoZSB0b3Agb2YgdGhlIGNhbGVuZGFyLiBEZWZhdWx0IGlzIDIycHguXCIpLmFkZFRleHQodGV4dCA9PiB0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1haW5Nb250aFllYXJUaXRsZUZvbnRTaXplKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLm1haW5Nb250aFllYXJUaXRsZUZvbnRTaXplID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkJvbGQgbW9udGggaW4gdGl0bGVcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiVG9nZ2xlcyBib2xkIGZvbnQgd2VpZ2h0IGZvciB0aGUgbW9udGggcGFydCBvZiB0aGUgdGl0bGUuXCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYWluTW9udGhUaXRsZUJvbGQpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1haW5Nb250aFRpdGxlQm9sZCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIk1vbnRoIFRpdGxlIENvbG9yIChMaWdodCBNb2RlKVwiLCBcIkNvbG9yIGZvciB0aGUgbWFpbiAnTW9udGgnIHRpdGxlIGluIGxpZ2h0IG1vZGUuXCIsIFwibW9udGhDb2xvckxpZ2h0XCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiTW9udGggVGl0bGUgQ29sb3IgKERhcmsgTW9kZSlcIiwgXCJDb2xvciBmb3IgdGhlIG1haW4gJ01vbnRoJyB0aXRsZSBpbiBkYXJrIG1vZGUuXCIsIFwibW9udGhDb2xvckRhcmtcIik7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkJvbGQgeWVhciBpbiB0aXRsZVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJUb2dnbGVzIGJvbGQgZm9udCB3ZWlnaHQgZm9yIHRoZSB5ZWFyIHBhcnQgb2YgdGhlIHRpdGxlLlwiKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubWFpblllYXJUaXRsZUJvbGQpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1haW5ZZWFyVGl0bGVCb2xkID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoXG4gICAgICAgICAgICBjb250YWluZXJFbCxcbiAgICAgICAgICAgICdZZWFyIFRpdGxlIENvbG9yIChMaWdodCBNb2RlKScsXG4gICAgICAgICAgICAnQ29sb3IgZm9yIHRoZSB5ZWFyIHRleHQgaW4gdGhlIG1haW4gdGl0bGUgaW4gbGlnaHQgbW9kZS4nLFxuICAgICAgICAgICAgJ3llYXJDb2xvckxpZ2h0J1xuICAgICAgICApO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoXG4gICAgICAgICAgICBjb250YWluZXJFbCxcbiAgICAgICAgICAgICdZZWFyIFRpdGxlIENvbG9yIChEYXJrIE1vZGUpJyxcbiAgICAgICAgICAgICdDb2xvciBmb3IgdGhlIHllYXIgdGV4dCBpbiB0aGUgbWFpbiB0aXRsZSBpbiBkYXJrIG1vZGUuJyxcbiAgICAgICAgICAgICd5ZWFyQ29sb3JEYXJrJ1xuICAgICAgICApO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiTmF2aWdhdGlvbiBidXR0b25zIGhlaWdodFwiKS5zZXREZXNjKFwiRGVmYXVsdCBpcyAyOHB4LlwiKS5hZGRUZXh0KHRleHQgPT4gdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5uYXZCdXR0b25IZWlnaHQpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MubmF2QnV0dG9uSGVpZ2h0ID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiQm9sZCBjYWxlbmRhciBoZWFkZXJcIikuc2V0RGVzYyhcIlRvZ2dsZXMgYm9sZCBmb250IHdlaWdodCBmb3IgdGhlIGRheSBuYW1lcyByb3cgKE1vbiwgVHVlLCBldGMuKS5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGVhZGVyUm93Qm9sZCkub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oZWFkZXJSb3dCb2xkID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJEYXkgaGVhZGVyIHJvdyBmb250IGNvbG9yIChMaWdodCBNb2RlKVwiLCBcIlRleHQgY29sb3IgZm9yIHRoZSBkYXkgbmFtZXMgKFN1biwgTW9uLCBUdWUsIGV0Yy4pIGluIGxpZ2h0IHRoZW1lLlwiLCBcImRheUhlYWRlckZvbnRDb2xvckxpZ2h0XCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiRGF5IGhlYWRlciByb3cgZm9udCBjb2xvciAoRGFyayBNb2RlKVwiLCBcIlRleHQgY29sb3IgZm9yIHRoZSBkYXkgbmFtZXMgKFN1biwgTW9uLCBUdWUsIGV0Yy4pIGluIGRhcmsgdGhlbWUuXCIsIFwiZGF5SGVhZGVyRm9udENvbG9yRGFya1wiKTtcblxuICAgICAgICAvLyAtLS0gQ2FsZW5kYXIgR3JpZCBTZWN0aW9uIC0tLVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkNhbGVuZGFyIEdyaWRcIikuc2V0SGVhZGluZygpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJDYWxlbmRhciBncmlkIGxheW91dFwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJDaG9vc2UgYmV0d2VlbiBhIHNwYWNpb3VzLCBub3JtYWwgb3IgY29uZGVuc2VkIGxheW91dCBmb3IgdGhlIGNhbGVuZGFyIGdyaWQuXCIpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdzcGFjaW91cycsICdTcGFjaW91cycpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignbm9ybWFsJywgJ05vcm1hbCcpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY29uZGVuc2VkJywgJ0NvbmRlbnNlZCcpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNhbGVuZGFyTGF5b3V0KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FsZW5kYXJMYXlvdXQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0NhbGVuZGFyIGdyaWQgbGFiZWxzIGZvbnQgc2l6ZScpXG4gICAgICAgICAgICAuc2V0RGVzYygnRm9udCBzaXplIGZvciBjYWxlbmRhciBkYXkgbGFibGVzIGFuZCB3ZWVrLCBwZXJpb2Qvd2VlayBjb2x1bW5zLiBEZWZhdWx0IGlzIDEycHguJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb250U2l6ZSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbnRTaXplID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJDYWxlbmRhciBncmlkIGRheSBudW1iZXJzIGZvbnQgc2l6ZVwiKS5zZXREZXNjKFwiRm9udCBzaXplIGZvciB0aGUgZGF5IG51bWJlcnMgaW4gdGhlIGNhbGVuZGFyIGdyaWQuIERlZmF1bHQgaXMgMTVweC5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGF5TnVtYmVyRm9udFNpemUpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGF5TnVtYmVyRm9udFNpemUgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIkRhdGUgY2VsbCBmb250IGNvbG9yIChMaWdodCBNb2RlKVwiLCBcIlRleHQgY29sb3IgZm9yIHRoZSBkYXRlIG51bWJlcnMgaW4gbGlnaHQgdGhlbWUuXCIsIFwiZGF5Q2VsbEZvbnRDb2xvckxpZ2h0XCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiRGF0ZSBjZWxsIGZvbnQgY29sb3IgKERhcmsgTW9kZSlcIiwgXCJUZXh0IGNvbG9yIGZvciB0aGUgZGF0ZSBudW1iZXJzIGluIGRhcmsgdGhlbWUuXCIsIFwiZGF5Q2VsbEZvbnRDb2xvckRhcmtcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJPdGhlciBtb250aCBkYXRlIGZvbnQgY29sb3IgKExpZ2h0IE1vZGUpXCIsIFwiVGV4dCBjb2xvciBmb3IgZGF0ZXMgb3V0c2lkZSB0aGUgY3VycmVudCBtb250aCBpbiBsaWdodCB0aGVtZS5cIiwgXCJvdGhlck1vbnRoRm9udENvbG9yTGlnaHRcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJPdGhlciBtb250aCBkYXRlIGZvbnQgY29sb3IgKERhcmsgTW9kZSlcIiwgXCJUZXh0IGNvbG9yIGZvciBkYXRlcyBvdXRzaWRlIHRoZSBjdXJyZW50IG1vbnRoIGluIGRhcmsgdGhlbWUuXCIsIFwib3RoZXJNb250aEZvbnRDb2xvckRhcmtcIik7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJTaG93IGNhbGVuZGFyIGdyaWQgbGluZXNcIikuc2V0RGVzYyhcIlRvZ2dsZXMgdGhlIHZpc2liaWxpdHkgb2YgYm9yZGVyIGxpbmVzIGFyb3VuZCBlYWNoIGRhdGUgY2VsbC5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0NhbGVuZGFyR3JpZExpbmVzKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dDYWxlbmRhckdyaWRMaW5lcyA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQ2FsZW5kYXIgZ3JpZCBnYXAgd2lkdGhcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiV2lkdGggb2YgdGhlIGdhcC9ib3JkZXIgYmV0d2VlbiBjYWxlbmRhciBjZWxscy4gVGhlIGdyaWQgbGluZXMgc2V0dGluZyBhYm92ZSBuZWVkcyB0byBiZSB0b2dnbGVkIG9uLiAoZS5nLiwgMXB4LCAycHgsIDAuNXB4KS4gRGVmYXVsdCBpcyAxcHguXCIpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCIxcHhcIilcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FsZW5kYXJHcmlkR2FwV2lkdGgpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckdyaWRHYXBXaWR0aCA9IHZhbHVlIHx8IFwiMXB4XCI7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyAtLS0gQ29ycmVjdGVkIER5bmFtaWMgXCJUb2RheSdzIGRhdGUgc3R5bGVcIiBTZWN0aW9uIC0tLVxuICAgICAgICBjb25zdCB0b2RheVN0eWxlU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJUb2RheSdzIGRhdGUgc3R5bGVcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiQ2hvb3NlIGhvdyB0byBpbmRpY2F0ZSB0aGUgY3VycmVudCBkYXkgb24gdGhlIGNhbGVuZGFyLlwiKTtcblxuICAgICAgICBjb25zdCB0b2RheUhpZ2hsaWdodFNpemVTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlRvZGF5IGNpcmNsZSBoaWdobGlnaHQgc2l6ZVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJBZGp1c3QgdGhlIHNpemUgb2YgdGhlICd0b2RheScgaGlnaGxpZ2h0IGNpcmNsZS5cIilcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMS41LCAzLjQsIDAuMSkgLy8gTWluIHNpemUsIE1heCBzaXplLCBTdGVwIGluY3JlbWVudFxuXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBwYXJ0IGlzIGNvcnJlY3Q6IEl0IGdpdmVzIHRoZSBzbGlkZXIgdGhlIG51bWJlciBpdCBuZWVkcy5cbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUocGFyc2VGbG9hdCh0aGlzLnBsdWdpbi5zZXR0aW5ncy50b2RheUhpZ2hsaWdodFNpemUpKVxuXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKCkgLy8gU2hvd3MgdGhlIGN1cnJlbnQgdmFsdWUgYXMgeW91IHNsaWRlXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRvZGF5SGlnaGxpZ2h0U2l6ZSA9IGAke3ZhbHVlfWVtYDtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9QRVJJT0QpLmZvckVhY2gobGVhZiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVhZi52aWV3IGluc3RhbmNlb2YgQ2FsZW5kYXJQZXJpb2RXZWVrVmlldykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYWYudmlldy5jb250YWluZXJFbC5zdHlsZS5zZXRQcm9wZXJ0eShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJy0tdG9kYXktaGlnaGxpZ2h0LXNpemUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50b2RheUhpZ2hsaWdodFNpemUgLy8gTm93IHVzaW5nIHRoZSBjb3JyZWN0IHZhbHVlIGZyb20gc2V0dGluZ3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgY29uc3QgaGlnaGxpZ2h0T3B0aW9uc0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuICAgICAgICBjb25zdCByZW5kZXJIaWdobGlnaHRPcHRpb25zID0gKHN0eWxlKSA9PiB7XG4gICAgICAgICAgICBoaWdobGlnaHRPcHRpb25zQ29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICAgICAgICAgIGlmIChzdHlsZSA9PT0gJ2NlbGwnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGhpZ2hsaWdodE9wdGlvbnNDb250YWluZXIsIFwiVG9kYXkncyBEYXRlIENlbGwgSGlnaGxpZ2h0IChMaWdodCBNb2RlKVwiLCBcIkJhY2tncm91bmQgY29sb3IgZm9yIHRoZSBjdXJyZW50IGRheSdzIGNlbGwgaW4gbGlnaHQgbW9kZS5cIiwgXCJ0b2RheUhpZ2hsaWdodENvbG9yTGlnaHRcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGhpZ2hsaWdodE9wdGlvbnNDb250YWluZXIsIFwiVG9kYXkncyBEYXRlIENlbGwgSGlnaGxpZ2h0IChEYXJrIE1vZGUpXCIsIFwiQmFja2dyb3VuZCBjb2xvciBmb3IgdGhlIGN1cnJlbnQgZGF5J3MgY2VsbCBpbiBkYXJrIG1vZGUuXCIsIFwidG9kYXlIaWdobGlnaHRDb2xvckRhcmtcIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0eWxlID09PSAnY2lyY2xlJyB8fCBzdHlsZSA9PT0gJ251bWJlcicpIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhoaWdobGlnaHRPcHRpb25zQ29udGFpbmVyLCBcIlRvZGF5J3MgRGF0ZSBIaWdobGlnaHQgQ29sb3IgKExpZ2h0IE1vZGUpXCIsIFwiQ29udHJvbHMgdGhlIGhpZ2hsaWdodCBmb3IgQ2lyY2xlL1NxdWFyZSBzdHlsZXMgaW4gbGlnaHQgbW9kZS5cIiwgXCJ0b2RheUNpcmNsZUNvbG9yTGlnaHRcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGhpZ2hsaWdodE9wdGlvbnNDb250YWluZXIsIFwiVG9kYXkncyBEYXRlIEhpZ2hsaWdodCBDb2xvciAoRGFyayBNb2RlKVwiLCBcIkNvbnRyb2xzIHRoZSBoaWdobGlnaHQgZm9yIENpcmNsZS9TcXVhcmUgc3R5bGVzIGluIGRhcmsgbW9kZS5cIiwgXCJ0b2RheUNpcmNsZUNvbG9yRGFya1wiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0eWxlID09PSAnY2lyY2xlJykge1xuXG4gICAgICAgICAgICAgICAgdG9kYXlIaWdobGlnaHRTaXplU2V0dGluZy5zZXR0aW5nRWwuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b2RheUhpZ2hsaWdodFNpemVTZXR0aW5nLnNldHRpbmdFbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdG9kYXlTdHlsZVNldHRpbmcuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdub25lJywgJ09mZiAoTm8gSGlnaGxpZ2h0KScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2VsbCcsICdIaWdobGlnaHQgQ2VsbCcpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignY2lyY2xlJywgJ0NpcmNsZSBBcm91bmQgRGF0ZScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignbnVtYmVyJywgJ1NxdWFyZSBBcm91bmQgRGF0ZScpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRvZGF5SGlnaGxpZ2h0U3R5bGUpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50b2RheUhpZ2hsaWdodFN0eWxlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICByZW5kZXJIaWdobGlnaHRPcHRpb25zKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVuZGVySGlnaGxpZ2h0T3B0aW9ucyh0aGlzLnBsdWdpbi5zZXR0aW5ncy50b2RheUhpZ2hsaWdodFN0eWxlKTtcbiAgICAgICAgLy8gLS0tIEVuZCBvZiBDb3JyZWN0ZWQgU2VjdGlvbiAtLS1cblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkhpZ2hsaWdodCB0b2RheSdzIGRheSBoZWFkZXJcIikuc2V0RGVzYyhcIkNvbG9ycyB0aGUgZGF5IGNvbHVtbiBoZWFkZXIgKFN1biwgTW9uLCBldGMuKSBjb250YWluaW5nIHRvZGF5LlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRUb2RheURheUhlYWRlcikub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRUb2RheURheUhlYWRlciA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkhpZ2hsaWdodCB0b2RheSdzIFAvVyBvciB3ZWVrIG51bWJlclwiKS5zZXREZXNjKFwiQ29sb3JzIHRoZSBQZXJpb2QvV2VlayBvciBDYWxlbmRhciBXZWVrIG51bWJlciBmb3IgdGhlIGN1cnJlbnQgd2Vlay5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0VG9kYXlQV0xhYmVsKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodFRvZGF5UFdMYWJlbCA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuXG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhcbiAgICAgICAgICAgIGNvbnRhaW5lckVsLFxuICAgICAgICAgICAgXCJDdXJyZW50IERheSAvIFdlZWsgTGFiZWwgSGlnaGxpZ2h0IChMaWdodCBNb2RlKVwiLFxuICAgICAgICAgICAgXCJDb2xvciBmb3IgdGhlIGN1cnJlbnQgZGF5J3MgbGFiZWxzLCAoZS5nLiBTVU4sIE1PTikgYW5kIHBlcmlvZCB3ZWVrIC8gY2FsZW5kYXIgd2VlayBsYWJlbHMgaW4gbGlnaHQgbW9kZS5cIixcbiAgICAgICAgICAgIFwiY3VycmVudEhpZ2hsaWdodExhYmVsQ29sb3JMaWdodFwiXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKFxuICAgICAgICAgICAgY29udGFpbmVyRWwsXG4gICAgICAgICAgICBcIkN1cnJlbnQgRGF5IC8gV2VlayBMYWJlbCBIaWdobGlnaHQgKERhcmsgTW9kZSlcIixcbiAgICAgICAgICAgIFwiQ29sb3IgZm9yIHRoZSBjdXJyZW50IGRheSdzIGxhYmVscywgKGUuZy4gU1VOLCBNT04pIGFuZCBwZXJpb2Qgd2VlayAvIGNhbGVuZGFyIHdlZWsgbGFiZWxzIGluIGRhcmsgbW9kZS5cIixcbiAgICAgICAgICAgIFwiY3VycmVudEhpZ2hsaWdodExhYmVsQ29sb3JEYXJrXCJcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiRGF0ZSBDZWxsIEhvdmVyIENvbG9yIChMaWdodCBNb2RlKVwiLCBcIkJhY2tncm91bmQgY29sb3Igd2hlbiBob3ZlcmluZyBvdmVyIGEgZGF0ZSBjZWxsIGluIGxpZ2h0IG1vZGUuXCIsIFwiZGF0ZUNlbGxIb3ZlckNvbG9yTGlnaHRcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJEYXRlIENlbGwgSG92ZXIgQ29sb3IgKERhcmsgTW9kZSlcIiwgXCJCYWNrZ3JvdW5kIGNvbG9yIHdoZW4gaG92ZXJpbmcgb3ZlciBhIGRhdGUgY2VsbCBpbiBkYXJrIG1vZGUuXCIsIFwiZGF0ZUNlbGxIb3ZlckNvbG9yRGFya1wiKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJCb2xkIFBlcmlvZC9XZWVrIGNvbHVtblwiKS5zZXREZXNjKFwiVG9nZ2xlcyBib2xkIGZvbnQgd2VpZ2h0IGZvciB0aGUgUGVyaW9kL1dlZWsgY29sdW1uLlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wd0NvbHVtbkJvbGQpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHdDb2x1bW5Cb2xkID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiU2hvdyBQL1cgc2VwYXJhdG9yIGxpbmVcIikuc2V0RGVzYyhcIkRpc3BsYXkgYSB2ZXJ0aWNhbCBsaW5lIGJldHdlZW4gdGhlIHdlZWsgY29sdW1ucyBhbmQgdGhlIGRhdGUgZ3JpZC5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1BXQ29sdW1uU2VwYXJhdG9yKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dQV0NvbHVtblNlcGFyYXRvciA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiUC9XIHNlcGFyYXRvciBsaW5lIGNvbG9yXCIsIFwiQ29sb3Igb2YgdGhlIHZlcnRpY2FsIHNlcGFyYXRvciBsaW5lLlwiLCBcInB3Q29sdW1uU2VwYXJhdG9yQ29sb3JcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJQZXJpb2QvV2VlayBjb2x1bW4gZm9udCBjb2xvciAoTGlnaHQgTW9kZSlcIiwgXCJUZXh0IGNvbG9yIGZvciB0aGUgUGVyaW9kL1dlZWsgY29sdW1uIGluIGxpZ2h0IHRoZW1lLlwiLCBcInB3Q29sdW1uRm9udENvbG9yTGlnaHRcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJQZXJpb2QvV2VlayBjb2x1bW4gZm9udCBjb2xvciAoRGFyayBNb2RlKVwiLCBcIlRleHQgY29sb3IgZm9yIHRoZSBQZXJpb2QvV2VlayBjb2x1bW4gaW4gZGFyayB0aGVtZS5cIiwgXCJwd0NvbHVtbkZvbnRDb2xvckRhcmtcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJXZWVrIG51bWJlciBjb2x1bW4gZm9udCBjb2xvciAoTGlnaHQgTW9kZSlcIiwgXCJUZXh0IGNvbG9yIGZvciB0aGUgd2VlayBudW1iZXIgY29sdW1uIGluIGxpZ2h0IHRoZW1lLlwiLCBcIndlZWtOdW1iZXJGb250Q29sb3JMaWdodFwiKTtcbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIldlZWsgbnVtYmVyIGNvbHVtbiBmb250IGNvbG9yIChEYXJrIE1vZGUpXCIsIFwiVGV4dCBjb2xvciBmb3IgdGhlIHdlZWsgbnVtYmVyIGNvbHVtbiBpbiBkYXJrIHRoZW1lLlwiLCBcIndlZWtOdW1iZXJGb250Q29sb3JEYXJrXCIpO1xuICAgIH1cblxuICAgIHJlbmRlckZ1bmN0aW9uYWxTZXR0aW5ncygpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyRWwgPSB0aGlzLmNvbnRlbnRFbDtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiQ2FsZW5kYXIgRnVuY3Rpb25hbCBTZXR0aW5nc1wiIH0pO1xuXG4gICAgICAgIC8vIC0tLSBQZXJpb2QvV2VlayBTeXN0ZW0gU2VjdGlvbiAtLS1cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJQZXJpb2QvV2VlayBTeXN0ZW1cIikuc2V0SGVhZGluZygpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJXZWVrIHN0YXJ0cyBvblwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJDaG9vc2Ugd2hldGhlciB0aGUgY2FsZW5kYXIgd2VlayBzdGFydHMgb24gU3VuZGF5IG9yIE1vbmRheS5cIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ21vbmRheScsICdNb25kYXknKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ3N1bmRheScsICdTdW5kYXknKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrU3RhcnREYXkpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrU3RhcnREYXkgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlZnJlc2ggdGhlIHNldHRpbmdzIHRhYiB0byBzaG93IHRoZSB1cGRhdGVkIHZhbGlkYXRpb24gbWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hEaXNwbGF5KCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIGNvbnN0IHJlcXVpcmVkRGF5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla1N0YXJ0RGF5ID09PSAnbW9uZGF5JyA/IDEgOiAwOyAvLyBNb25kYXkgaXMgMSwgU3VuZGF5IGlzIDBcbiAgICAgICAgY29uc3QgcmVxdWlyZWREYXlOYW1lID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla1N0YXJ0RGF5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla1N0YXJ0RGF5LnNsaWNlKDEpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJTdGFydCBvZiBQZXJpb2QgMSBXZWVrIDFcIilcbiAgICAgICAgICAgIC5zZXREZXNjKGBUaGUgZGF0ZSBmb3IgdGhlIHN0YXJ0IG9mIFAxVzEuIFRoaXMgZGF0ZSBNVVNUIGJlIGEgJHtyZXF1aXJlZERheU5hbWV9IHRvIG1hdGNoIHlvdXIgJ1dlZWsgc3RhcnRzIG9uJyBzZXR0aW5nLmApIC8vIER5bmFtaWMgZGVzY3JpcHRpb25cbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC50eXBlID0gXCJkYXRlXCI7XG4gICAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGFydE9mUGVyaW9kMURhdGUpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZERhdGUgPSBtb21lbnQodmFsdWUsIFwiWVlZWS1NTS1ERFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZERhdGUuZGF5KCkgIT09IHJlcXVpcmVkRGF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6IFRoZSBzdGFydCBkYXRlIG11c3QgYmUgYSAke3JlcXVpcmVkRGF5TmFtZX0uYCwgNTAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBEbyBub3Qgc2F2ZSB0aGUgaW52YWxpZCBkYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGFydE9mUGVyaW9kMURhdGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiUGVyaW9kL1dlZWsgZm9ybWF0XCIpLnNldERlc2MoXCJDaG9vc2UgdGhlIGRpc3BsYXkgZm9ybWF0IGZvciB0aGUgUC9XIGNvbHVtbi5cIikuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd24uYWRkT3B0aW9uKFwiUCNXI1wiLCBcIlAjVyNcIikuYWRkT3B0aW9uKFwiUCMgVyNcIiwgXCJQIyBXI1wiKS5hZGRPcHRpb24oXCIjIFcjXCIsIFwiIyBXI1wiKS5hZGRPcHRpb24oXCJwI3cjXCIsIFwicCNwI1wiKS5hZGRPcHRpb24oXCJwIyB3I1wiLCBcInAjIHcjXCIpLmFkZE9wdGlvbihcIiMgdyNcIiwgXCIjIHcjXCIpLmFkZE9wdGlvbihcIiMtI1wiLCBcIiMtI1wiKS5hZGRPcHRpb24oXCIjIC0gI1wiLCBcIiMgLSAjXCIpLmFkZE9wdGlvbihcIiMvI1wiLCBcIiMvI1wiKS5hZGRPcHRpb24oXCIjIC8gI1wiLCBcIiMgLyAjXCIpLmFkZE9wdGlvbihcIiMsI1wiLCBcIiMsI1wiKS5hZGRPcHRpb24oXCIjLCAjXCIsIFwiIywgI1wiKS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wd0Zvcm1hdCkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnB3Rm9ybWF0ID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJTaG93IFBlcmlvZC9XZWVrIGNvbHVtblwiKS5zZXREZXNjKFwiU2hvdyBvciBoaWRlIHRoZSBQZXJpb2QvV2VlayBjb2x1bW4gb24gdGhlIGxlZnQgc2lkZSBvZiB0aGUgY2FsZW5kYXIuXCIpLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dQV0NvbHVtbikub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93UFdDb2x1bW4gPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcblxuICAgICAgICAvLyAtLS0gV2VlayBOdW1iZXJzIFNlY3Rpb24gLS0tXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiV2VlayBOdW1iZXJzXCIpLnNldEhlYWRpbmcoKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2hvdyB3ZWVrIG51bWJlciBjb2x1bW5cIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiRGlzcGxheSBhIGNvbHVtbiBmb3Igd2VlayBudW1iZXJzIG9uIHRoZSBsZWZ0IHNpZGUgb2YgdGhlIGNhbGVuZGFyLlwiKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dXZWVrTnVtYmVycylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dXZWVrTnVtYmVycyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIldlZWsgbnVtYmVyIHR5cGVcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiQ2hvb3NlIHdoaWNoIHdlZWsgbnVtYmVyaW5nIHN5c3RlbSB0byB1c2UuXCIpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdwZXJpb2QnLCAnUGVyaW9kIFN5c3RlbSBXZWVrJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjYWxlbmRhcicsICdDYWxlbmRhciBZZWFyIFdlZWsgKElTTyknKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrTnVtYmVyVHlwZSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtOdW1iZXJUeXBlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiV2VlayBudW1iZXIgY29sdW1uIGxhYmVsXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlRoZSB0ZXh0IHRvIGRpc3BsYXkgYXQgdGhlIHRvcCBvZiB0aGUgd2VlayBudW1iZXIgY29sdW1uLlwiKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtOdW1iZXJDb2x1bW5MYWJlbClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtOdW1iZXJDb2x1bW5MYWJlbCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gLS0tIERhaWx5IE5vdGVzIFNlY3Rpb24gLS0tXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiRGFpbHkgTm90ZXNcIikuc2V0SGVhZGluZygpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkRhaWx5IE5vdGVzIGZvbGRlclwiKS5zZXREZXNjKFwiU3BlY2lmeSB0aGUgZm9sZGVyIHdoZXJlIHlvdXIgZGFpbHkgbm90ZXMgYXJlIHN0b3JlZCBhbmQgY3JlYXRlZC5cIikuYWRkVGV4dCh0ZXh0ID0+IHsgdGhpcy5jcmVhdGVQYXRoU3VnZ2VzdGVyKHRleHQuaW5wdXRFbCwgKHEpID0+IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkuZmlsdGVyKGYgPT4gZiBpbnN0YW5jZW9mIFRGb2xkZXIgJiYgKCFxIHx8IGYucGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHEpKSkubWFwKGYgPT4gZi5wYXRoKSk7IHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGFpbHlOb3Rlc0ZvbGRlcikub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYWlseU5vdGVzRm9sZGVyID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KTsgfSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiRGFpbHkgTm90ZSBvcGVuIGJlaGF2aW9yXCIpLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duLmFkZE9wdGlvbignbmV3LXRhYicsICdPcGVuIGluIGEgbmV3IHRhYicpLmFkZE9wdGlvbignY3VycmVudC10YWInLCAnT3BlbiBpbiB0aGUgY3VycmVudCB0YWInKS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYWlseU5vdGVPcGVuQWN0aW9uKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGFpbHlOb3RlT3BlbkFjdGlvbiA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkRhaWx5IG5vdGUgdGVtcGxhdGVcIikuc2V0RGVzYyhcIlBhdGggdG8gYSB0ZW1wbGF0ZSBmaWxlIHRvIHVzZSB3aGVuIGNyZWF0aW5nIGEgbmV3IGRhaWx5IG5vdGUuXCIpLmFkZFRleHQodGV4dCA9PiB7IHRoaXMuY3JlYXRlUGF0aFN1Z2dlc3Rlcih0ZXh0LmlucHV0RWwsIChxKSA9PiB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGYgPT4gIXEgfHwgZi5wYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocSkpLm1hcChmID0+IGYucGF0aCkpOyB0ZXh0LnNldFBsYWNlaG9sZGVyKFwiRXhhbXBsZTogVGVtcGxhdGVzL0RhaWx5Lm1kXCIpLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRhaWx5Tm90ZVRlbXBsYXRlUGF0aCkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLmRhaWx5Tm90ZVRlbXBsYXRlUGF0aCA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSk7IH0pO1xuXG4gICAgICAgIC8vIC0tLSBHcmlkIEhpZ2hsaWdodGluZyBTZWN0aW9uIC0tLVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkdyaWQgSGlnaGxpZ2h0aW5nXCIpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJFbmFibGUgcm93IGhpZ2hsaWdodFwiKS5zZXREZXNjKFwiSGlnaGxpZ2h0cyB0aGUgZW50aXJlIHdlZWsncyByb3cgd2hlbiBob3ZlcmluZyBvdmVyIHRoZSBQL1cgbGFiZWwuXCIpLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVJvd0hpZ2hsaWdodCkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVJvd0hpZ2hsaWdodCA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkVuYWJsZSBjb2x1bW4gaGlnaGxpZ2h0XCIpLnNldERlc2MoXCJIaWdobGlnaHRzIHRoZSBlbnRpcmUgZGF5J3MgY29sdW1uIHdoZW4gaG92ZXJpbmcgb3ZlciB0aGUgZGF5IG5hbWUgKGUuZy4sIE1vbikuXCIpLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNvbHVtbkhpZ2hsaWdodCkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNvbHVtbkhpZ2hsaWdodCA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkVuYWJsZSBjb21wbGV4IGdyaWQgaGlnaGxpZ2h0XCIpLnNldERlc2MoXCJXaGVuIGhvdmVyaW5nIGEgZGF0ZSwgaGlnaGxpZ2h0cyBhbGwgY2VsbHMgaW4gaXRzIHJvdyBhbmQgY29sdW1uIHVwIHRvIHRoYXQgZGF0ZS5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlUm93VG9EYXRlSGlnaGxpZ2h0KS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlUm93VG9EYXRlSGlnaGxpZ2h0ID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkFsd2F5cyBoaWdobGlnaHQgY3VycmVudCB3ZWVrXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIktlZXBzIHRoZSBlbnRpcmUgcm93IGZvciB0aGUgY3VycmVudCB3ZWVrIHBlcm1hbmVudGx5IGhpZ2hsaWdodGVkLlwiKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodEN1cnJlbnRXZWVrKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0Q3VycmVudFdlZWsgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG5cbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIkdyaWQgSGlnaGxpZ2h0IENvbG9yIChMaWdodCBNb2RlKVwiLCBcIkNvbG9yIGZvciByb3cvY29sdW1uIGhpZ2hsaWdodGluZyBvbiBob3ZlciBpbiBsaWdodCBtb2RlLlwiLCBcInJvd0hpZ2hsaWdodENvbG9yTGlnaHRcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJHcmlkIEhpZ2hsaWdodCBDb2xvciAoRGFyayBNb2RlKVwiLCBcIkNvbG9yIGZvciByb3cvY29sdW1uIGhpZ2hsaWdodGluZyBvbiBob3ZlciBpbiBkYXJrIG1vZGUuXCIsIFwicm93SGlnaGxpZ2h0Q29sb3JEYXJrXCIpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJIaWdobGlnaHQgd2Vla2VuZHNcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiU2hhZGUgU2F0dXJkYXkgYW5kIFN1bmRheSBjb2x1bW5zIHdpdGggYSBzdWJ0bGUgYmFja2dyb3VuZCBjb2xvci5cIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRXZWVrZW5kcylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodFdlZWtlbmRzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoXG4gICAgICAgICAgICBjb250YWluZXJFbCxcbiAgICAgICAgICAgIFwiV2Vla2VuZCBzaGFkZSBjb2xvciAoTGlnaHQgTW9kZSlcIixcbiAgICAgICAgICAgIFwiQmFja2dyb3VuZCBjb2xvciBmb3IgU2F0dXJkYXkgYW5kIFN1bmRheSBjb2x1bW5zIGluIGxpZ2h0IHRoZW1lLlwiLFxuICAgICAgICAgICAgXCJ3ZWVrZW5kU2hhZGVDb2xvckxpZ2h0XCJcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoXG4gICAgICAgICAgICBjb250YWluZXJFbCxcbiAgICAgICAgICAgIFwiV2Vla2VuZCBzaGFkZSBjb2xvciAoRGFyayBNb2RlKVwiLFxuICAgICAgICAgICAgXCJCYWNrZ3JvdW5kIGNvbG9yIGZvciBTYXR1cmRheSBhbmQgU3VuZGF5IGNvbHVtbnMgaW4gZGFyayB0aGVtZS5cIixcbiAgICAgICAgICAgIFwid2Vla2VuZFNoYWRlQ29sb3JEYXJrXCJcbiAgICAgICAgKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkludGVncmF0ZSBFeHRlcm5hbCBDYWxlbmRhciBFdmVudHNcIikuc2V0SGVhZGluZygpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0V4dGVybmFsIGNhbGVuZGFyIFVSTCAoLmljcyknKVxuICAgICAgICAgICAgLnNldERlc2MoJ0ludGVncmF0ZSBhbiBleHRlcm5hbCAuaWNzIGZlZWQgY2FsZW5kYXIgVVJMIChlLmcuLCBmcm9tIEdvb2dsZSBDYWxlbmRhciB1c2luZyB0aGUgXFwnU2VjcmV0IGFkZHJlc3MgaW4gaUNhbCBmb3JtYXRcXCcgb3IgXFwnUHVibGljIGFkZHJlc3MgaW4gaUNhbCBGb3JtYXRcXCcpIHRvIGluZGljYXRlIGV2ZW50cyBhcyBkb3RzIGluIHRoZSBjYWxlbmRhciBncmlkIGFuZCBldmVudCBkZXRhaWxzIGluIHRoZSBkYXRlIHBvcHVwIGJveC4nKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2h0dHBzOi8vY2FsZW5kYXIuZ29vZ2xlLmNvbS9jYWxlbmRhci9pY2FsLy4uLi9iYXNpYy5pY3MnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNzVXJsKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY3NVcmwgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUubWluV2lkdGggPSBcIjMwMHB4XCI7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnN0eWxlLnJlc2l6ZSA9IFwidmVydGljYWxcIjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc2V0dGluZ0VsLnN0eWxlLmFsaWduSXRlbXMgPSBcImZsZXgtc3RhcnRcIjtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdBdXRvLXJlZnJlc2ggSW50ZXJ2YWwnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0hvdyBvZnRlbiB0aGUgZXh0ZXJuYWwgY2FsZW5kYXIgVVJMIHNob3VsZCBiZSBhdXRvbWF0aWNhbGx5IHJlZnJlc2hlZCBpbiB0aGUgYmFja2dyb3VuZC4nKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcbiAgICAgICAgICAgICAgICBkcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCcxNScsICcxNSBtaW51dGVzJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignMzAnLCAnMzAgbWludXRlcycpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJzYwJywgJzEgaG91cicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJzE4MCcsICczIGhvdXJzJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignMzYwJywgJzYgaG91cnMnKVxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCc3MjAnLCAnMTIgaG91cnMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNzUmVmcmVzaEludGVydmFsLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmljc1JlZnJlc2hJbnRlcnZhbCA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsbCBhIG1ldGhvZCBvbiB0aGUgbWFpbiBwbHVnaW4gdG8gcmVzZXQgdGhlIHRpbWVyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5yZXNldEljc1JlZnJlc2hJbnRlcnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0NhbGVuZGFyIEV2ZW50IEluZGljYXRvcicpXG4gICAgICAgICAgICAuc2V0RGVzYygnQ2hvb3NlIGhvdyB0byBkaXNwbGF5IGV4dGVybmFsIGNhbGVuZGFyIGV2ZW50cyBvbiB0aGUgY2FsZW5kYXIgZ3JpZC4gXCJEb3RcIiBzaG93cyBhIHNlcGFyYXRlIGNvbG9yZWQgZG90LCB3aGlsZSBcIkhlYXRtYXBcIiBhbmQgXCJCYWRnZVwiIHdpbGwgYWRkIHRoZSBldmVudCBjb3VudCB0byB0aGUgZXhpc3RpbmcgdGFzayBpbmRpY2F0b3JzLiBJZiB5b3Ugc2VsZWN0IFwiSGVhdG1hcFwiIG9yIFwiQmFkZ2VcIiwgZW5zdXJlIHRoYXQgdGhlIGNvcnJlc3BvbmRpbmcgdGFzayBpbmRpY2F0b3Igb3B0aW9uIGlzIGFsc28gZW5hYmxlZCBpbiB0aGUgXCJUYXNrIEluZGljYXRvcnNcIiBzZXR0aW5ncyB0YWIuIFNldHRpbmdzIHdpbGwgYmUgYXBwbGllZCBhZnRlciBjbG9zaW5nIHRoZSBzZXR0aW5ncyB3aW5kb3cuJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2RvdCcsICdEb3QgT25seScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignaGVhdG1hcCcsICdBZGQgdG8gSGVhdG1hcCcpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignYmFkZ2UnLCAnQWRkIHRvIFRhc2sgQmFkZ2UnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckV2ZW50SW5kaWNhdG9yU3R5bGUgfHwgJ2RvdCcpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBTdGVwIDE6IFNhdmUgdGhlIG5ldyB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckV2ZW50SW5kaWNhdG9yU3R5bGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0NhbGVuZGFyIEV2ZW50cyBQbGFjZWhvbGRlcicpXG4gICAgICAgICAgICAuc2V0RGVzYygnVGhlIHBsYWNlaG9sZGVyIHRleHQgdG8gdXNlIGluIHlvdXIgZGFpbHkgbm90ZSB0ZW1wbGF0ZS4gVGhlIHBsdWdpbiB3aWxsIHJlcGxhY2UgdGhpcyB0ZXh0IHdpdGggY2FsZW5kYXIgZXZlbnRzLicpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignJSVDQUxFTkRBUl9FVkVOVFMlJScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckV2ZW50c1BsYWNlaG9sZGVyKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckV2ZW50c1BsYWNlaG9sZGVyID0gdmFsdWUudHJpbSgpIHx8ICclJUNBTEVOREFSX0VWRU5UUyUlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgbWluaW11bSB3aWR0aCBmb3IgdGhlIHRleHQgaW5wdXQgZmllbGRcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUubWluV2lkdGggPSBcIjMwMHB4XCI7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnN0eWxlLnJlc2l6ZSA9IFwidmVydGljYWxcIjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc2V0dGluZ0VsLnN0eWxlLmFsaWduSXRlbXMgPSBcImZsZXgtc3RhcnRcIjtcblxuXG4gICAgICAgIGNvbnN0IGNhbGVuZGFyRm9ybWF0U2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0NhbGVuZGFyIEV2ZW50IEZvcm1hdCcpXG4gICAgICAgICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJy0ge3tzdGFydFRpbWV9fSAtIHt7ZW5kVGltZX19OiB7e3N1bW1hcnl9fScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckV2ZW50c0Zvcm1hdClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FsZW5kYXJFdmVudHNGb3JtYXQgPSB2YWx1ZSB8fCAnLSB7e3N0YXJ0VGltZX19IC0ge3tlbmRUaW1lfX06IHt7c3VtbWFyeX19JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIEFwcGx5IHN0eWxlcyB0byB0aGUgdGV4dGFyZWEgZWxlbWVudFxuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS5taW5XaWR0aCA9IFwiMzAwcHhcIjtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUubWluSGVpZ2h0ID0gXCIxMDBweFwiO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS5yZXNpemUgPSBcInZlcnRpY2FsXCI7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBkZXNjRWwgPSBjYWxlbmRhckZvcm1hdFNldHRpbmcuZGVzY0VsO1xuICAgICAgICBkZXNjRWwuYXBwZW5kVGV4dCgnQ3VzdG9taXplIHRoZSBmb3JtYXQgZm9yIGVhY2ggY2FsZW5kYXIgZXZlbnQuIFVzZSB0aGVzZSBwbGFjZWhvbGRlcnM6Jyk7XG5cbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXJMaXN0ID0gZGVzY0VsLmNyZWF0ZUVsKCd1bCcpO1xuXG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVycyA9IFtcbiAgICAgICAgICAgIHsgY29kZTogJ3t7c3VtbWFyeX19JywgdGV4dDogJ1RoZSBldmVudCB0aXRsZScgfSxcbiAgICAgICAgICAgIHsgY29kZTogJ3t7c3RhcnRUaW1lfX0nLCB0ZXh0OiAnVGhlIGV2ZW50IHN0YXJ0IHRpbWUgKG9yIFwiQWxsLWRheVwiKScgfSxcbiAgICAgICAgICAgIHsgY29kZTogJ3t7ZW5kVGltZX19JywgdGV4dDogJ1RoZSBldmVudCBlbmQgdGltZScgfVxuICAgICAgICBdO1xuXG4gICAgICAgIHBsYWNlaG9sZGVycy5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHBsYWNlaG9sZGVyTGlzdC5jcmVhdGVFbCgnbGknKTtcbiAgICAgICAgICAgIGl0ZW0uY3JlYXRlRWwoJ2NvZGUnLCB7IHRleHQ6IHAuY29kZSB9KTtcbiAgICAgICAgICAgIGl0ZW0uYXBwZW5kVGV4dChgICR7cC50ZXh0fWApO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBbGlnbiB0aGUgZW50aXJlIHNldHRpbmcgcm93IHRvIHRoZSB0b3BcbiAgICAgICAgY2FsZW5kYXJGb3JtYXRTZXR0aW5nLnNldHRpbmdFbC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJmbGV4LXN0YXJ0XCI7XG5cbiAgICB9XG5cbiAgICByZW5kZXJQb3B1cFNldHRpbmdzKCkge1xuXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWw7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIlBvcHVwIENvbnRyb2xzXCIgfSk7XG5cbiAgICAgICAgLy8gLS0tIFBvcHVwcyBTZWN0aW9uIC0tLVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlBvcHVwIGhvdmVyIGRlbGF5XCIpLnNldERlc2MoXCJIb3cgbG9uZyB0byB3YWl0IGJlZm9yZSBzaG93aW5nIHRoZSBub3RlIGxpc3QgcG9wdXAgb24gaG92ZXIuIERlZmF1bHQgaXMgODAwLlwiKS5hZGRUZXh0KHRleHQgPT4gdGV4dC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3RoZXJOb3RlSG92ZXJEZWxheSkpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vdGhlck5vdGVIb3ZlckRlbGF5ID0gTnVtYmVyKHZhbHVlKSB8fCAxMDA7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiUG9wdXAgaGlkZSBkZWxheVwiKS5zZXREZXNjKFwiSG93IGxvbmcgdG8gd2FpdCBiZWZvcmUgaGlkaW5nIHRoZSBwb3B1cCBhZnRlciB0aGUgbW91c2UgbGVhdmVzLiBEZWZhdWx0IGlzIDUwLlwiKS5hZGRUZXh0KHRleHQgPT4gdGV4dC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MucG9wdXBIaWRlRGVsYXkpKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MucG9wdXBIaWRlRGVsYXkgPSBOdW1iZXIodmFsdWUpIHx8IDEwMDsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJQb3B1cCBnYXBcIikuc2V0RGVzYyhcIlRoZSBnYXAgKGluIHBpeGVscykgYmV0d2VlbiBhIGNhbGVuZGFyIGRheSBhbmQgaXRzIHBvcHVwIGxpc3QuIENhbiBiZSBuZWdhdGl2ZS4gRGVmYXVsdCBpcyAtMi5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcHVwR2FwKSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcHVwR2FwID0gTnVtYmVyKHZhbHVlKSB8fCAtMjsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJQb3B1cCBmb250IHNpemVcIikuc2V0RGVzYyhcIlRoZSBmb250IHNpemUgZm9yIHRoZSBub3RlIG5hbWVzIGluc2lkZSB0aGUgY2FsZW5kYXIgcG9wdXAuIERlZmF1bHQgaXMgMTRweC5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3RoZXJOb3RlUG9wdXBGb250U2l6ZSkub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vdGhlck5vdGVQb3B1cEZvbnRTaXplID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG5cbiAgICB9XG5cbiAgICByZW5kZXJEb3RzU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWw7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkRvdCBJbmRpY2F0b3JzXCIgfSk7XG4gICAgICAgIC8vIC0tLSBEb3QgRnVuY3Rpb25hbGl0eSBTZWN0aW9uIC0tLVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkNhbGVuZGFyIEZ1bmN0aW9uYWxpdHkgJiBTdHlsZVwiKS5zZXRIZWFkaW5nKCk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiU2hvdyBkb3QgZm9yIGNyZWF0ZWQgbm90ZXNcIikuc2V0RGVzYyhcIlNob3cgYSBkb3Qgb24gZGF5cyB3aGVyZSBhbnkgbm90ZSAodGhhdCBpcyBub3QgYSBkYWlseSBub3RlKSB3YXMgY3JlYXRlZC5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd090aGVyTm90ZURvdCkub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93T3RoZXJOb3RlRG90ID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiU2hvdyBkb3QgZm9yIG1vZGlmaWVkIG5vdGVzXCIpLnNldERlc2MoXCJTaG93IGEgZG90IG9uIGRheXMgd2hlcmUgYW55IG5vdGUgKHRoYXQgaXMgbm90IGEgZGFpbHkgbm90ZSkgd2FzIG1vZGlmaWVkLlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93TW9kaWZpZWRGaWxlRG90KS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dNb2RpZmllZEZpbGVEb3QgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlNob3cgZG90IGZvciBuZXcgYXNzZXRzXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlNob3cgYSBkb3Qgb24gZGF5cyB3aGVyZSBhbiBhc3NldCAoaW1hZ2UsIFBERiwgZXRjLikgd2FzIGFkZGVkIHRvIHRoZSB2YXVsdC5cIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93QXNzZXREb3QpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93QXNzZXREb3QgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1Nob3cgZG90IGZvciBleHRlcm5hbCBpY3MgY2FsZW5kYXIgZXZlbnRzJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdTaG93IGEgZG90IG9uIGRheXMgdGhhdCBoYXZlIGEgY2FsZW5kYXJkIGV2ZW50IGZyb20gYW4gZXh0ZXJuYWwgY2FsZW5kYXIgc291cmNlLCBlLmcuIEdvb2dsZSBDYWxlbmRhci4nKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dJY3NEb3QpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93SWNzRG90ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkNhbGVuZGFyIGRvdCBzaXplXCIpLnNldERlc2MoXCJUaGUgc2l6ZSAoaW4gcGl4ZWxzKSBvZiB0aGUgY29sb3JlZCBkb3RzIHRoYXQgYXBwZWFyIHVuZGVyIGNhbGVuZGFyIGRheXMuIERlZmF1bHQgaXMgNC5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLmNhbGVuZGFyRG90U2l6ZSkpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhckRvdFNpemUgPSBOdW1iZXIodmFsdWUpIHx8IDQ7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG5cbiAgICAgICAgLy8gLS0tIERvdCBDb2xvcnMgU2VjdGlvbiAtLS1cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJEb3QgQ29sb3JzXCIpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIkRhaWx5IE5vdGVcIiwgXCJVc2VkIGZvciBkYWlseSBub3Rlcy5cIiwgXCJkYWlseU5vdGVEb3RDb2xvclwiKTtcbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIkNyZWF0ZWQgTm90ZVwiLCBcIlVzZXMgdGhlIGNyZWF0ZWQgZmlsZSBkYXRlIGZvciBub3Rlcywgbm90IHVzZWQgZm9yIERhaWx5IC8gV2Vla2x5IE5vdGVzLlwiLCBcIm5vdGVDcmVhdGVkQ29sb3JcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJNb2RpZmllZCBOb3RlXCIsIFwiVXNlcyB0aGUgbW9kaWZpZWQgZmlsZSBkYXRlIGZvciBub3Rlcywgbm90IHVzZWQgZm9yIERhaWx5IC8gV2Vla2x5IE5vdGVzLlwiLCBcIm5vdGVNb2RpZmllZENvbG9yXCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiQXNzZXQgTm90ZVwiLCBcIlVzZXMgdGhlIGNyZWF0ZWQgZmlsZSBkYXRlIGZvciBuZXdseSBhZGRlZCBhc3NldHMuXCIsIFwiYXNzZXREb3RDb2xvclwiKTtcbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCAnQ2FsZW5kYXIgRXZlbnQnLCAnVXNlZCBmb3IgZXZlbnRzIGZyb20geW91ciBpQ2FsLy5pY3MgZmVlZC4nLCAnY2FsZW5kYXJFdmVudERvdENvbG9yJyk7XG4gICAgICAgIHRoaXMuY3JlYXRlSWdub3JlZEZvbGRlckxpc3QoY29udGFpbmVyRWwsIFwiSWdub3JlIGZvbGRlcnMgZm9yIG5vdGUgZG90c1wiLCBcIkZpbGVzIGluIHRoZXNlIGZvbGRlcnMgd2lsbCBub3QgY3JlYXRlICdjcmVhdGVkJyBvciAnbW9kaWZpZWQnIGRvdHMgb24gdGhlIGNhbGVuZGFyIGdyaWQgb3IgbGlzdHMuXCIsICdvdGhlck5vdGVJZ25vcmVGb2xkZXJzJyk7XG4gICAgICAgIHRoaXMuY3JlYXRlSWdub3JlZEZvbGRlckxpc3QoY29udGFpbmVyRWwsIFwiSWdub3JlIGZvbGRlcnMgZm9yIGFzc2V0IGRvdHNcIiwgXCJBc3NldHMgaW4gdGhlc2UgZm9sZGVycyB3aWxsIG5vdCBjcmVhdGUgZG90cyBvbiB0aGUgY2FsZW5kYXIgYW5kIGxpc3RzLlwiLCAnYXNzZXRJZ25vcmVGb2xkZXJzJyk7XG5cbiAgICB9XG5cbiAgICByZW5kZXJXZWVrbHlOb3Rlc1NldHRpbmdzKCkge1xuICAgICAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGVudEVsO1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJXZWVrbHkgTm90ZXMgU2V0dGluZ3NcIiB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiRW5hYmxlIFdlZWtseSBOb3Rlc1wiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJFbmFibGUgY2xpY2tpbmcgb24gd2VlayBudW1iZXJzIHRvIG9wZW4vY3JlYXRlIHdlZWtseSBub3RlcyBhbmQgc2hvdyB0aGUgZG90IGluZGljYXRvci5cIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVXZWVrbHlOb3RlcylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVdlZWtseU5vdGVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiV2Vla2x5IE5vdGUgRm9sZGVyXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlRoZSBmb2xkZXIgd2hlcmUgeW91ciB3ZWVrbHkgbm90ZXMgYXJlIHN0b3JlZC4gSXQgd2lsbCBiZSBjcmVhdGVkIGlmIGl0IGRvZXNuJ3QgZXhpc3QuXCIpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVBhdGhTdWdnZXN0ZXIodGV4dC5pbnB1dEVsLCAocSkgPT4gdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKS5maWx0ZXIoZiA9PiBmIGluc3RhbmNlb2YgVEZvbGRlciAmJiAoIXEgfHwgZi5wYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocSkpKS5tYXAoZiA9PiBmLnBhdGgpKTtcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtseU5vdGVGb2xkZXIpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrbHlOb3RlRm9sZGVyID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBJbiB0aGUgUGVyaW9kU2V0dGluZ3NUYWIgY2xhc3MsIGluc2lkZSByZW5kZXJXZWVrbHlOb3Rlc1NldHRpbmdzKClcbiAgICAgICAgY29uc3Qgd2Vla2x5Rm9ybWF0U2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiV2Vla2x5IE5vdGUgRm9ybWF0XCIpO1xuICAgICAgICB3ZWVrbHlGb3JtYXRTZXR0aW5nLmRlc2NFbC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICBTZXQgdGhlIGZpbGVuYW1lIGZvcm1hdCBmb3Igd2Vla2x5IG5vdGVzIHVzaW5nIGRvdHMsIGh5cGhlbnMsIG9yIG90aGVyIHNlcGFyYXRvcnMuXG4gICAgICAgICAgICA8YnI+VGhlIGZvbGxvd2luZyBwbGFjZWhvbGRlcnMgd2lsbCBiZSByZXBsYWNlZCBhdXRvbWF0aWNhbGx5OlxuICAgICAgICAgICAgPGJyPjxjb2RlPllZWVk8L2NvZGU+IC0gVGhlIDQtZGlnaXQgeWVhciAoZS5nLiwgMjAyNSlcbiAgICAgICAgICAgIDxicj48Y29kZT5NTTwvY29kZT4gLSBUaGUgMi1kaWdpdCBtb250aCAoZS5nLiwgMDgpXG4gICAgICAgICAgICA8YnI+PGNvZGU+UE48L2NvZGU+IC0gVGhlIFBlcmlvZCBOdW1iZXIgd2l0aCBhICdQJyBwcmVmaXggKGUuZy4sIFA4KVxuICAgICAgICAgICAgPGJyPjxjb2RlPlBXPC9jb2RlPiAtIFRoZSB3ZWVrIG51bWJlciB3aXRoaW4gdGhlIHBlcmlvZCB3aXRoIGEgJ1cnIHByZWZpeCAoZS5nLiwgVzIpXG4gICAgICAgICAgICA8YnI+PGNvZGU+V0tQPC9jb2RlPiAtIFRoZSB3ZWVrIG51bWJlciAoMS01Mikgd2l0aGluIHlvdXIgY3VzdG9tIHBlcmlvZCB5ZWFyXG4gICAgICAgICAgICA8YnI+PGNvZGU+V0tDPC9jb2RlPiAtIFRoZSBzdGFuZGFyZCBJU08gY2FsZW5kYXIgd2VlayBudW1iZXIgKDEtNTMpXG4gICAgICAgICAgICA8YnI+PGJyPjxiPkV4YW1wbGVzOjwvYj5cbiAgICAgICAgICAgIDxicj5Gb3JtYXQ6IDxjb2RlPllZWVktTU0tUE5QVzwvY29kZT4g4oaSIEZpbGVuYW1lOiA8Y29kZT4yMDI1LTA4LVA4VzIubWQ8L2NvZGU+XG4gICAgICAgICAgICA8YnI+Rm9ybWF0OiA8Y29kZT5ZWVlZLU1NLVdLUDwvY29kZT4g4oaSIEZpbGVuYW1lOiA8Y29kZT4yMDI1LTA4LTMwLm1kPC9jb2RlPlxuICAgICAgICAgICAgPGJyPkZvcm1hdDogPGNvZGU+WVlZWS1NTS1XV0tDPC9jb2RlPiDihpIgRmlsZW5hbWU6IDxjb2RlPjIwMjUtMDgtVzM4Lm1kPC9jb2RlPlxuICAgICAgICBgO1xuICAgICAgICB3ZWVrbHlGb3JtYXRTZXR0aW5nLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla2x5Tm90ZUZvcm1hdClcbiAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWVrbHlOb3RlRm9ybWF0ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIldlZWtseSBub3RlIHRlbXBsYXRlXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlBhdGggdG8gYSB0ZW1wbGF0ZSBmaWxlIHRvIHVzZSB3aGVuIGNyZWF0aW5nIGEgbmV3IHdlZWtseSBub3RlLlwiKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVQYXRoU3VnZ2VzdGVyKHRleHQuaW5wdXRFbCwgKHEpID0+IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZiA9PiAhcSB8fCBmLnBhdGgudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSkubWFwKGYgPT4gZi5wYXRoKSk7XG4gICAgICAgICAgICAgICAgdGV4dC5zZXRQbGFjZWhvbGRlcihcIkV4YW1wbGU6IFRlbXBsYXRlcy9XZWVrbHkubWRcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLndlZWtseU5vdGVUZW1wbGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mud2Vla2x5Tm90ZVRlbXBsYXRlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkRvdCBJbmRpY2F0b3JcIikuc2V0SGVhZGluZygpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJTaG93IGRvdCBmb3Igd2Vla2x5IG5vdGVzXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlNob3cgYSBkb3QgaW4gdGhlIHdlZWsgbnVtYmVyIGNvbHVtbiBpZiBhIG5vdGUgZm9yIHRoYXQgd2VlayBleGlzdHMuXCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1dlZWtseU5vdGVEb3QpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93V2Vla2x5Tm90ZURvdCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIldlZWtseSBOb3RlIERvdCBDb2xvclwiLCBcIlRoZSBjb2xvciBvZiB0aGUgZG90IGZvciBleGlzdGluZyB3ZWVrbHkgbm90ZXMuXCIsIFwid2Vla2x5Tm90ZURvdENvbG9yXCIpO1xuICAgIH1cblxuICAgIHJlbmRlclRhc2tJbmRpY2F0b3JTZXR0aW5ncygpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyRWwgPSB0aGlzLmNvbnRlbnRFbDtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiQ2FsZW5kYXIgVGFzayBJbmRpY2F0b3JzXCIgfSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJUYXNrIGluZGljYXRvciBzdHlsZVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJDaG9vc2UgaG93IHRvIGluZGljYXRlIGRheXMgd2l0aCB0YXNrcyBvbiB0aGUgY2FsZW5kYXIgZ3JpZC5cIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ25vbmUnLCAnTm9uZScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignYmFkZ2UnLCAnTnVtYmVyIEJhZGdlJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdoZWF0bWFwJywgJ0NlbGwgQ29sb3IgSGVhdG1hcCcpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tJbmRpY2F0b3JTdHlsZSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tJbmRpY2F0b3JTdHlsZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgcmUtcmVuZGVyIHRoZSBzZXR0aW5ncyBkaXNwbGF5IHRvIHNob3cvaGlkZSByZWxldmFudCBvcHRpb25zXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaERpc3BsYXkoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlNob3cgZG90IGZvciB0YXNrc1wiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJTaG93IGEgc2luZ2xlIGRvdCBvbiBkYXlzIHdpdGggdGFza3MuIFRoaXMgY2FuIGJlIHVzZWQgd2l0aCBvciBpbnN0ZWFkIG9mIHRoZSBoZWF0bWFwL2JhZGdlLlwiKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUYXNrRG90KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rhc2tEb3QgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJUYXNrIERvdCBDb2xvclwiLCBcIlRoZSBjb2xvciBvZiB0aGUgZG90IGluZGljYXRpbmcgYSBkYXkgaGFzIHRhc2tzLlwiLCBcInRhc2tEb3RDb2xvclwiKTtcblxuICAgICAgICAvLyBPbmx5IHNob3cgdGhlIGJhZGdlL2hlYXRtYXAgc2V0dGluZ3MgaWYgdGhleSBhcmUgcmVsZXZhbnRcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tJbmRpY2F0b3JTdHlsZSA9PT0gJ2JhZGdlJykge1xuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJUYXNrIGJhZGdlIGZvbnQgc2l6ZVwiKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiVGhlIGZvbnQgc2l6ZSBmb3IgdGhlIG51bWJlciBpbnNpZGUgdGhlIHRhc2sgYmFkZ2UuIERlZmF1bHQgaXMgMTFweC5cIilcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tCYWRnZUZvbnRTaXplKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrQmFkZ2VGb250U2l6ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIlRhc2sgYmFkZ2UgY29sb3JcIiwgXCJUaGUgYmFja2dyb3VuZCBjb2xvciBvZiB0aGUgdGFzayBjb3VudCBiYWRnZS5cIiwgXCJ0YXNrQmFkZ2VDb2xvclwiKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJUYXNrIGJhZGdlIGZvbnQgY29sb3JcIiwgXCJUaGUgY29sb3Igb2YgdGhlIG51bWJlciBpbnNpZGUgdGhlIHRhc2sgY291bnQgYmFkZ2UuXCIsIFwidGFza0JhZGdlRm9udENvbG9yXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tJbmRpY2F0b3JTdHlsZSA9PT0gJ2hlYXRtYXAnKSB7XG5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiSGVhdG1hcCBjb250ZW50IGJvcmRlciB3aWR0aFwiKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiV2lkdGggb2YgdGhlIGJvcmRlciBhcm91bmQgdGhlIGRheSBoZWF0bWFwIGNvbnRlbnQgYXJlYSAoZS5nLiwgMXB4LCAycHgsIDNweCkuIENyZWF0ZXMgdmlzdWFsIHNlcGFyYXRpb24gaW5zaWRlIGNlbGxzLiBEZWZhdWx0IGlzIDFweC5cIilcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiMXB4XCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250ZW50Qm9yZGVyV2lkdGgpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnRlbnRCb3JkZXJXaWR0aCA9IHZhbHVlIHx8IFwiMXB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0NvbmZpZ3VyZSB0aGUgc3RhcnQsIG1pZGRsZSwgYW5kIGVuZCBwb2ludHMgb2YgdGhlIGR5bmFtaWMgY29sb3IgZ3JhZGllbnQuIENvbG9ycyB3aWxsIGJlIGJsZW5kZWQgc21vb3RobHkgYmV0d2VlbiB0aGVzZSBwb2ludHMuJywgY2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyB9KTtcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJHcmFkaWVudCBNaWRwb2ludFwiKS5zZXREZXNjKFwiVGhlIG51bWJlciBvZiB0YXNrcyB0aGF0IHNob3VsZCBoYXZlIHRoZSBleGFjdCAnTWlkJyBjb2xvci4gRGVmYXVsdCBpcyA1LlwiKS5hZGRUZXh0KHRleHQgPT4gdGV4dC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0hlYXRtYXBNaWRwb2ludCkpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrSGVhdG1hcE1pZHBvaW50ID0gTnVtYmVyKHZhbHVlKSB8fCA1OyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJHcmFkaWVudCBNYXhwb2ludFwiKS5zZXREZXNjKFwiVGhlIG51bWJlciBvZiB0YXNrcyB0aGF0IHNob3VsZCBoYXZlIHRoZSBleGFjdCAnRW5kJyBjb2xvci4gQW55IGRheSB3aXRoIG1vcmUgdGFza3Mgd2lsbCBhbHNvIHVzZSB0aGUgZW5kIGNvbG9yLiBEZWZhdWx0IGlzIDEwLlwiKS5hZGRUZXh0KHRleHQgPT4gdGV4dC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0hlYXRtYXBNYXhwb2ludCkpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrSGVhdG1hcE1heHBvaW50ID0gTnVtYmVyKHZhbHVlKSB8fCAxMDsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcblxuICAgICAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIkhlYXRtYXA6IFN0YXJ0IENvbG9yICgxIFRhc2spXCIsIFwiVGhlIGNvbG9yIGZvciBkYXlzIHdpdGggMSB0YXNrLlwiLCBcInRhc2tIZWF0bWFwU3RhcnRDb2xvclwiKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJIZWF0bWFwOiBNaWQgQ29sb3JcIiwgXCJUaGUgY29sb3IgZm9yIGRheXMgbWVldGluZyB0aGUgJ01pZHBvaW50JyB0YXNrIGNvdW50LlwiLCBcInRhc2tIZWF0bWFwTWlkQ29sb3JcIik7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiSGVhdG1hcDogRW5kIENvbG9yXCIsIFwiVGhlIGNvbG9yIGZvciBkYXlzIG1lZXRpbmcgdGhlICdNYXhwb2ludCcgdGFzayBjb3VudC5cIiwgXCJ0YXNrSGVhdG1hcEVuZENvbG9yXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyRHJhZ2dhYmxlVGFicyhjb250YWluZXIpIHtcbiAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7IC8vIENsZWFyIHRoZSBjb250YWluZXIgZmlyc3RcblxuICAgICAgICAvLyBEZWZpbmUgbGFiZWxzIGZvciB5b3VyIHRhYnNcbiAgICAgICAgY29uc3QgdGFiTGFiZWxzID0ge1xuICAgICAgICAgICAgc2NyYXRjaDogJ1NjcmF0Y2hQYWQnLFxuICAgICAgICAgICAgbm90ZXM6ICdOb3RlcycsXG4gICAgICAgICAgICB0YXNrczogJ1Rhc2tzJyxcbiAgICAgICAgICAgIGFzc2V0czogJ0Fzc2V0cydcbiAgICAgICAgICAgIC8vIEFkZCBvdGhlciB0YWJzIGlmIHlvdSBoYXZlIHRoZW1cbiAgICAgICAgfTtcblxuICAgICAgICBsZXQgZHJhZ2dlZEl0ZW0gPSBudWxsOyAvLyBUbyBrZWVwIHRyYWNrIG9mIHRoZSBpdGVtIGJlaW5nIGRyYWdnZWRcblxuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJPcmRlci5mb3JFYWNoKChrZXksIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZXR0aW5nSXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2RyYWdnYWJsZS1pdGVtJyk7XG4gICAgICAgICAgICBzZXR0aW5nSXRlbS5kcmFnZ2FibGUgPSB0cnVlO1xuICAgICAgICAgICAgc2V0dGluZ0l0ZW0uZGF0YXNldC50YWJLZXkgPSBrZXk7XG5cbiAgICAgICAgICAgIC8vIEFkZCBhIGRyYWcgaGFuZGxlIGljb25cbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZSA9IHNldHRpbmdJdGVtLmNyZWF0ZURpdignZHJhZy1oYW5kbGUnKTtcbiAgICAgICAgICAgIHNldEljb24oaGFuZGxlLCAnZ3JpcC12ZXJ0aWNhbCcpO1xuXG4gICAgICAgICAgICAvLyBBZGQgdGhlIHRhYidzIG5hbWVcbiAgICAgICAgICAgIHNldHRpbmdJdGVtLmNyZWF0ZVNwYW4oeyB0ZXh0OiB0YWJMYWJlbHNba2V5XSB8fCBrZXkgfSk7XG5cbiAgICAgICAgICAgIC8vIC0tLSBEcmFnIGFuZCBEcm9wIEV2ZW50IExpc3RlbmVycyAtLS1cblxuICAgICAgICAgICAgc2V0dGluZ0l0ZW0uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBkcmFnZ2VkSXRlbSA9IHNldHRpbmdJdGVtO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc2V0dGluZ0l0ZW0uYWRkQ2xhc3MoJ2RyYWdnaW5nJyksIDApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHNldHRpbmdJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGRyYWdnZWRJdGVtPy5yZW1vdmVDbGFzcygnZHJhZ2dpbmcnKTtcbiAgICAgICAgICAgICAgICBkcmFnZ2VkSXRlbSA9IG51bGw7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgc2V0dGluZ0l0ZW0uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkcmFnZ2luZ0l0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHJhZ2dpbmcnKTtcbiAgICAgICAgICAgICAgICBpZiAoZHJhZ2dpbmdJdGVtICYmIGRyYWdnaW5nSXRlbSAhPT0gc2V0dGluZ0l0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBib3VuZGluZyBib3ggb2YgdGhlIGl0ZW0gd2UncmUgZHJhZ2dpbmcgb3ZlclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gc2V0dGluZ0l0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlIGFyZSBpbiB0aGUgdG9wIG9yIGJvdHRvbSBoYWxmIG9mIHRoZSBpdGVtXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQWZ0ZXIgPSBlLmNsaWVudFkgPiByZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMjtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBZnRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5zZXJ0IHRoZSBkcmFnZ2VkIGl0ZW0gYWZ0ZXIgdGhlIGN1cnJlbnQgb25lXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nSXRlbS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkcmFnZ2luZ0l0ZW0sIHNldHRpbmdJdGVtLm5leHRTaWJsaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluc2VydCB0aGUgZHJhZ2dlZCBpdGVtIGJlZm9yZSB0aGUgY3VycmVudCBvbmVcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdJdGVtLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGRyYWdnaW5nSXRlbSwgc2V0dGluZ0l0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHNldHRpbmdJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdPcmRlciA9IEFycmF5LmZyb20oY29udGFpbmVyLmNoaWxkcmVuKS5tYXAoY2hpbGQgPT4gY2hpbGQuZGF0YXNldC50YWJLZXkpO1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYk9yZGVyID0gbmV3T3JkZXI7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnVGFiIG9yZGVyIHNhdmVkIScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlclRhYnNTZXR0aW5ncygpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyRWwgPSB0aGlzLmNvbnRlbnRFbDtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiR2VuZXJhbCBUYWIgU2V0dGluZ3NcIiB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiRGVza3RvcCB0YWIgZGlzcGxheSBzdHlsZVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJDaG9vc2UgaG93IHRhYiBuYW1lcyBhcmUgZGlzcGxheWVkIGluIHRoZSBkZXNrdG9wIGNsaWVudC5cIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ3RleHQnLCAnVGV4dCBPbmx5JylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdpY29uQW5kVGV4dCcsICdJY29uIGFuZCBUZXh0JylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdpY29uT25seScsICdJY29uIE9ubHknKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJEaXNwbGF5TW9kZSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYkRpc3BsYXlNb2RlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiTW9iaWxlIHRhYiBkaXNwbGF5IHN0eWxlXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkNob29zZSBhIGRpZmZlcmVudCwgb2Z0ZW4gbW9yZSBjb21wYWN0LCBkaXNwbGF5IHN0eWxlIGZvciBzbWFsbGVyIG1vYmlsZSAvIHRhYmxldCBzY3JlZW5zLlwiKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbigndGV4dCcsICdUZXh0IE9ubHknKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2ljb25BbmRUZXh0JywgJ0ljb24gYW5kIFRleHQnKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2ljb25Pbmx5JywgJ0ljb24gT25seScpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZVRhYkRpc3BsYXlNb2RlKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlVGFiRGlzcGxheU1vZGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiVGFiIHRpdGxlIGZvbnQgc2l6ZVwiKS5zZXREZXNjKFwiRm9udCBzaXplIGZvciB0aGUgdGFiIHRpdGxlcyAoU2NyYXRjaFBhZCwgTm90ZXMsIFRhc2tzKS4gRGVmYXVsdCBpcyAxNXB4LlwiKS5hZGRUZXh0KHRleHQgPT4gdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJUaXRsZUZvbnRTaXplKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYlRpdGxlRm9udFNpemUgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJCb2xkIHRhYiB0aXRsZXNcIikuc2V0RGVzYyhcIlRvZ2dsZXMgYm9sZCBmb250IHdlaWdodCBmb3IgdGhlIHRhYiB0aXRsZXMuXCIpLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYlRpdGxlQm9sZCkub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJUaXRsZUJvbGQgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcblxuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiQWN0aXZlIFRhYiBJbmRpY2F0b3JcIiwgXCJVbmRlcmxpbmUgY29sb3IgZm9yIHRoZSBhY3RpdmUgdGFiLlwiLCBcInNlbGVjdGVkVGFiQ29sb3JcIik7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRGl2KCdzZXR0aW5nLXNwYWNlcicpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1RhYiBPcmRlcicpXG4gICAgICAgICAgICAuc2V0RGVzYygnRHJhZyBhbmQgZHJvcCB0aGUgdGFicyB0byBzZXQgdGhlaXIgZGlzcGxheSBvcmRlci4nKTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBjb250YWluZXIgZm9yIG91ciBkcmFnZ2FibGUgbGlzdFxuICAgICAgICBjb25zdCB0YWJPcmRlckNvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigndGFiLW9yZGVyLWNvbnRhaW5lcicpO1xuICAgICAgICB0aGlzLnJlbmRlckRyYWdnYWJsZVRhYnModGFiT3JkZXJDb250YWluZXIpO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZURpdignc2V0dGluZy1zcGFjZXInKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlRhYiBWaXNpYmlsaXR5XCIpLnNldEhlYWRpbmcoKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2hvdyBUYXNrcyB0YWJcIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJWaXNpYmlsaXR5LnRhc2tzKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiVmlzaWJpbGl0eS50YXNrcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlNob3cgU2NyYXRjaFBhZCB0YWJcIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJWaXNpYmlsaXR5LnNjcmF0Y2gpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJWaXNpYmlsaXR5LnNjcmF0Y2ggPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2hvdyBOb3RlcyB0YWJcIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJWaXNpYmlsaXR5Lm5vdGVzKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiVmlzaWJpbGl0eS5ub3RlcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlNob3cgQXNzZXRzIHRhYlwiKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYlZpc2liaWxpdHkuYXNzZXRzKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiVmlzaWJpbGl0eS5hc3NldHMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1RhYiBJY29ucycgfSk7XG4gICAgICAgIGNvbnN0IHRhYkljb25TZXR0aW5ncyA9IFtcbiAgICAgICAgICAgIHsga2V5OiAnc2NyYXRjaCcsIG5hbWU6ICdTY3JhdGNoUGFkIHRhYiBpY29uJyB9LFxuICAgICAgICAgICAgeyBrZXk6ICdub3RlcycsIG5hbWU6ICdOb3RlcyB0YWIgaWNvbicgfSxcbiAgICAgICAgICAgIHsga2V5OiAndGFza3MnLCBuYW1lOiAnVGFza3MgdGFiIGljb24nIH0sXG4gICAgICAgICAgICB7IGtleTogJ3Bpbm5lZCcsIG5hbWU6ICdQaW5uZWQgVmlldyB0YWIgaWNvbicgfSxcbiAgICAgICAgICAgIHsga2V5OiAnYXNzZXRzJywgbmFtZTogJ0Fzc2V0cyBWaWV3IHRhYiBpY29uJyB9XG4gICAgICAgIF07XG5cbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGVhY2ggdGFiIGljb24gc2V0dGluZyB0byBjcmVhdGUgaXRzIGlucHV0IGZpZWxkIGFuZCByZXNldCBidXR0b25cbiAgICAgICAgdGFiSWNvblNldHRpbmdzLmZvckVhY2gocyA9PiB7XG4gICAgICAgICAgICBsZXQgdGV4dENvbXBvbmVudDsgLy8gVmFyaWFibGUgdG8gaG9sZCB0aGUgdGV4dCBjb21wb25lbnQgcmVmZXJlbmNlXG5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgICAgIC5zZXROYW1lKHMubmFtZSlcbiAgICAgICAgICAgICAgICAuc2V0RGVzYygnRW50ZXIgYW55IEx1Y2lkZSBpY29uIG5hbWUuJylcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dENvbXBvbmVudCA9IHRleHQ7IC8vIFN0b3JlIHRoZSB0ZXh0IGNvbXBvbmVudCBzbyB0aGUgYnV0dG9uIGNhbiBhY2Nlc3MgaXRcbiAgICAgICAgICAgICAgICAgICAgdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYkljb25zW3Mua2V5XSB8fCBERUZBVUxUX1NFVFRJTkdTLnRhYkljb25zW3Mua2V5XSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJJY29uc1tzLmtleV0gPSB2YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgICAgICAgICBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCdyb3RhdGUtY2N3JykgLy8gQSBmaXR0aW5nIGljb24gZm9yIFwicmVzZXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoJ1Jlc2V0IHRvIGRlZmF1bHQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDEuIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgdGhpcyBzcGVjaWZpYyBrZXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnN0IGRlZmF1bHRWYWx1ZSA9IERFRkFVTFRfU0VUVElOR1MudGFiSWNvbnNbcy5rZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IHRoaXMuY3VycmVudFRoZW1lRGVmYXVsdHMudGFiSWNvbnNbcy5rZXldO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMi4gVXBkYXRlIHRoZSBzZXR0aW5nIGluIHRoZSBwbHVnaW4ncyBkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiSWNvbnNbcy5rZXldID0gZGVmYXVsdFZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMy4gVmlzdWFsbHkgdXBkYXRlIHRoZSB0ZXh0IGJveCB0byBzaG93IHRoZSBkZWZhdWx0IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRleHRDb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENvbXBvbmVudC5zZXRWYWx1ZShkZWZhdWx0VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDQuIFNhdmUgdGhlIHNldHRpbmcgYW5kIHVwZGF0ZSB0aGUgcGx1Z2luIHZpZXdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGAnJHtzLm5hbWV9JyByZXNldCB0byBkZWZhdWx0LmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1Jlc2V0IEFsbCBUYWIgSWNvbnMnKVxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdSZXNldHMgYWxsIHRhYiBpY29ucyB0byB0aGVpciBvcmlnaW5hbCB2YWx1ZXMnKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29uZmlybSB3aXRoIHRoZSB1c2VyIGJlZm9yZSByZXNldHRpbmcgYWxsXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcmVzZXQgYWxsIHRhYiBpY29ucz8nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiSWNvbnMgPSB7IC4uLkRFRkFVTFRfU0VUVElOR1MudGFiSWNvbnMgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQWxsIHRhYiBpY29ucyBoYXZlIGJlZW4gcmVzZXQuJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlZnJlc2ggdGhlIHNldHRpbmdzIGRpc3BsYXkgdG8gc2hvdyB0aGUgY2hhbmdlc1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGlzcGxheSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgfVxuXG4gICAgcmVuZGVyU2NyYXRjaHBhZFNldHRpbmdzKCkge1xuICAgICAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGVudEVsO1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJTY3JhdGNoUGFkIFRhYiBTZXR0aW5nc1wiIH0pO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkZ1bmN0aW9uYWxpdHlcIikuc2V0SGVhZGluZygpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlNjcmF0Y2hQYWQgdGFiIGNsaWNrIGFjdGlvblwiKS5zZXREZXNjKFwiV2hhdCB0byBkbyB3aGVuIHRoZSBTY3JhdGNoUGFkIHRhYiBpcyBjbGlja2VkIHdoaWxlIGl0J3MgYWxyZWFkeSBhY3RpdmUuXCIpLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duLmFkZE9wdGlvbignbmV3LXRhYicsICdPcGVuIGluIGEgbmV3IHRhYicpLmFkZE9wdGlvbignY3VycmVudC10YWInLCAnT3BlbiBpbiB0aGUgY3VycmVudCB0YWInKS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNocGFkT3BlbkFjdGlvbikub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWRPcGVuQWN0aW9uID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiU2NyYXRjaFBhZCBub3RlIHBhdGhcIikuc2V0RGVzYyhcIlRoZSBmdWxsIHBhdGggdG8gdGhlIG5vdGUgdGhhdCB0aGUgU2NyYXRjaFBhZCB0YWIgd2lsbCByZWFkIGZyb20gYW5kIHdyaXRlIHRvLlwiKS5hZGRUZXh0KHRleHQgPT4geyB0aGlzLmNyZWF0ZVBhdGhTdWdnZXN0ZXIodGV4dC5pbnB1dEVsLCAocSkgPT4gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcihmID0+ICFxIHx8IGYucGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHEpKS5tYXAoZiA9PiBmLnBhdGgpKTsgdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5maXhlZE5vdGVGaWxlKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLmZpeGVkTm90ZUZpbGUgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pOyB9KTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJTaG93IHByZXZpZXcvZWRpdCBidXR0b25cIikuc2V0RGVzYyhcIlNob3cgdGhlIGJ1dHRvbiB0byB0b2dnbGUgYmV0d2VlbiBwbGFpbiB0ZXh0IGVkaXRpbmcgYW5kIGEgcmVuZGVyZWQgTWFya2Rvd24gcHJldmlldy5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaHBhZD8uc2hvd1ByZXZpZXdUb2dnbGUgPz8gZmFsc2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQpIHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQgPSB7fTsgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaHBhZC5zaG93UHJldmlld1RvZ2dsZSA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlNob3cgJysgVGFzaycgYnV0dG9uXCIpLnNldERlc2MoXCJTaG93IHRoZSBidXR0b24gaW4gdGhlIHNjcmF0Y2hwYWQgYXJlYSB0byBxdWlja2x5IGFkZCBhIG5ldyB0YXNrLlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNocGFkPy5zaG93QWRkVGFza0J1dHRvbiA/PyB0cnVlKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNocGFkKSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNocGFkID0ge307IHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQuc2hvd0FkZFRhc2tCdXR0b24gPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcblxuICAgICAgICBjb25zdCB0YXNrVGl0bGVTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJUYXNrIENyZWF0aW9uIEZvcm1hdFwiKTtcbiAgICAgICAgdGFza1RpdGxlU2V0dGluZy5kZXNjRWwuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgICAgIFVzZSB0aGUgZm9sbG93aW5nIHRvIGluc2VydCBhcyBwbGFjZWhvbGRlcnMgZm9yIHRoZSB0YXNrIGNyZWF0aW9uIGRhdGU6XG4gICAgICAgICAgICAgICAgPGJyPjxjb2RlPnt0b2RheX08L2NvZGU+LCA8Y29kZT57dG9tb3Jyb3d9PC9jb2RlPlxuICAgICAgICAgICAgICAgIDxicj48Y29kZT57bW9uZGF5fTwvY29kZT4sIDxjb2RlPnt0dWVzZGF5fTwvY29kZT4sIGV0Yy4gZm9yIHRoZSBuZXh0IHVwY29taW5nIGRheS5cbiAgICAgICAgICAgICAgICA8YnI+PGNvZGU+e2RhdGV9Kzc8L2NvZGU+IG9yIDxjb2RlPntkYXRlfS0zPC9jb2RlPiBmb3IgZGF0ZXMgaW4gdGhlIGZ1dHVyZSBvciBwYXN0LlxuICAgICAgICAgICAgICAgIDxicj5cbiAgICAgICAgICAgICAgICA8YnI+VXNlIDxjb2RlPnw8L2NvZGU+IHRvIHNldCB0aGUgZmluYWwgY3Vyc29yIHBvc2l0aW9uLlxuICAgICAgICAgICAgYDtcblxuICAgICAgICB0YXNrVGl0bGVTZXR0aW5nLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCItIFsgXSBcIilcbiAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNocGFkPy50YXNrRm9ybWF0IHx8IFwiLSBbIF0gXCIpXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNocGFkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hwYWQgPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaHBhZC50YXNrRm9ybWF0ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJBcHBlYXJhbmNlXCIpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJTY3JhdGNoUGFkIGZvbnQgc2l6ZVwiKS5zZXREZXNjKFwiRm9udCBzaXplIGZvciB0aGUgdGV4dCBpbnNpZGUgdGhlIFNjcmF0Y2hQYWQgZWRpdG9yLiBEZWZhdWx0IGlzIDE0cHguXCIpLmFkZFRleHQodGV4dCA9PiB0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNjcmF0Y2hGb250U2l6ZSkub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNoRm9udFNpemUgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJCb2xkIFNjcmF0Y2hQYWQgdGV4dFwiKS5zZXREZXNjKFwiVG9nZ2xlcyBib2xkIGZvbnQgd2VpZ2h0IGZvciB0aGUgdGV4dCBpbiB0aGUgU2NyYXRjaFBhZC5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaEJvbGQpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaEJvbGQgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJTY3JhdGNoUGFkIGZvbnQgZmFtaWx5XCIpLnNldERlc2MoXCJFeGFtcGxlczogbW9ub3NwYWNlLCBBcmlhbCwgJ0NvdXJpZXIgTmV3Jy4gTGVhdmUgYmxhbmsgdG8gdXNlIHRoZSBlZGl0b3IgZGVmYXVsdC5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NyYXRjaEZvbnRGYW1pbHkpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY3JhdGNoRm9udEZhbWlseSA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiU2VhcmNoIGhpZ2hsaWdodCBjb2xvclwiLCBcIlRoZSBiYWNrZ3JvdW5kIGNvbG9yIGZvciB0aGUgc2VsZWN0ZWQgc2VhcmNoIHJlc3VsdCBpbiB0aGUgU2NyYXRjaFBhZC5cIiwgXCJzY3JhdGNocGFkSGlnaGxpZ2h0Q29sb3JcIik7XG5cbiAgICB9XG5cbiAgICByZW5kZXJOb3Rlc1NldHRpbmdzKCkge1xuICAgICAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGVudEVsO1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJOb3RlcyBUYWIgU2V0dGluZ3NcIiB9KTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJGdW5jdGlvbmFsaXR5XCIpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJOb3RlcyB0YWIgb3BlbiBiZWhhdmlvclwiKS5zZXREZXNjKFwiQ2hvb3NlIGhvdyB0byBvcGVuIG5vdGVzIHdoZW4gY2xpY2tlZCBmcm9tIHRoZSBub3RlcyBsaXN0LlwiKS5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93bi5hZGRPcHRpb24oJ25ldy10YWInLCAnT3BlbiBpbiBhIG5ldyB0YWInKS5hZGRPcHRpb24oJ2N1cnJlbnQtdGFiJywgJ09wZW4gaW4gdGhlIGN1cnJlbnQgdGFiJykuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZXNPcGVuQWN0aW9uKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZXNPcGVuQWN0aW9uID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiTm90ZXMgbG9va2JhY2sgZGF5c1wiKS5zZXREZXNjKFwiSG93IG1hbnkgZGF5cyBiYWNrIHRoZSBOb3RlcyB0YWIgc2hvdWxkIGxvb2sgZm9yIGNyZWF0ZWQgb3IgbW9kaWZpZWQgbm90ZXMuIERlZmF1bHQgaXMgNy5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVzTG9va2JhY2tEYXlzKSkub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub3Rlc0xvb2tiYWNrRGF5cyA9IE51bWJlcih2YWx1ZSkgfHwgNzsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkFwcGVhcmFuY2VcIikuc2V0SGVhZGluZygpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlNob3cgbm90ZSBzdGF0dXMgZG90c1wiKS5zZXREZXNjKFwiU2hvdyBhIGNvbG9yZWQgZG90IG5leHQgdG8gZWFjaCBub3RlLCBpbmRpY2F0aW5nIGlmIGl0IHdhcyByZWNlbnRseSBjcmVhdGVkIG9yIG1vZGlmaWVkLlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Tm90ZVN0YXR1c0RvdHMpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd05vdGVTdGF0dXNEb3RzID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiU2hvdyBub3RlIHRvb2x0aXBzXCIpLnNldERlc2MoXCJTaG93IGEgZGV0YWlsZWQgdG9vbHRpcCBvbiBob3ZlciwgY29udGFpbmluZyBub3RlIHBhdGgsIGRhdGVzLCBzaXplLCBhbmQgdGFncy5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd05vdGVUb29sdGlwcykub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Tm90ZVRvb2x0aXBzID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiTm90ZXMgbGlzdCBmb250IHNpemVcIikuc2V0RGVzYyhcIkZvbnQgc2l6ZSBmb3Igbm90ZSB0aXRsZXMgaW4gdGhlIGxpc3QuIERlZmF1bHQgaXMgMTRweC5cIikuYWRkVGV4dCh0ZXh0ID0+IHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZXNGb250U2l6ZSkub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub3Rlc0ZvbnRTaXplID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiQm9sZCBub3RlIHRpdGxlc1wiKS5zZXREZXNjKFwiVG9nZ2xlcyBib2xkIGZvbnQgd2VpZ2h0IGZvciBub3RlIHRpdGxlcyBpbiB0aGUgbGlzdC5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZXNCb2xkKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVzQm9sZCA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiTm90ZS9UYXNrIEhvdmVyIENvbG9yXCIsIFwiQmFja2dyb3VuZCBjb2xvciB3aGVuIGhvdmVyaW5nIGEgbm90ZSBvciB0YXNrIGluIGEgbGlzdC5cIiwgXCJub3Rlc0hvdmVyQ29sb3JcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlSWdub3JlZEZvbGRlckxpc3QoY29udGFpbmVyRWwsIFwiSWdub3JlIGZvbGRlcnMgaW4gTm90ZXMgdGFiXCIsIFwiRmlsZXMgaW4gdGhlc2UgZm9sZGVycyB3aWxsIG5vdCBhcHBlYXIgaW4gdGhlICdOb3RlcycgbGlzdC5cIiwgJ2lnbm9yZUZvbGRlcnMnKTtcblxuICAgIH1cblxuICAgIHJlbmRlclBpbm5lZE5vdGVzU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWw7IC8vIEFsbCBzZXR0aW5ncyB3aWxsIGJlIHJlbmRlcmVkIGludG8gdGhpcyBlbGVtZW50XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMScsIHsgdGV4dDogJ1Bpbm5lZCBOb3RlcyBTZXR0aW5ncycgfSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKCdGdW5jdGlvbmFsaXR5Jykuc2V0SGVhZGluZygpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiUGlubmVkIG5vdGVzIHRhZ1wiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJUaGUgdGFnIHRvIHVzZSBmb3IgcGlubmVkIG5vdGVzLCBlbnRlciBpbiB0aGUgdGV4dCBib3ggd2l0aG91dCB0aGUgJyMnLiBGb3Igbm90ZXMgdG8gYXBwZWFyIGluIHRoZSBwaW5uZWQgdGFiLCAoYWNjZXNzZWQgd2l0aCBhbm90aGVyIGNsaWNrIG9uIHRoZSBub3RlcyB0YWIgaWNvbiBvbmNlIGl0IGhhcyBmb2N1cyksIGFuZCBpZiB5b3Ugc2V0ICdwaW4nIGFzIHRoZSB0YWcgbmFtZSwgdGhlbiBpbiB5b3VyIG5vdGVzIGFkZCAjcGluIGluIHRoZSBib2R5IG9yIHByb3BlcnRpZXMgdGFnIHNlY3Rpb24uIERlZmF1bHQgaXMgJ3BpbicuXCIpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucGluVGFnKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucGluVGFnID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZSgnU29ydCBPcmRlcicpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRGVmYXVsdCBzb3J0IG9yZGVyJylcbiAgICAgICAgICAgIC5zZXREZXNjKFwiQ2hvb3NlIHRoZSBkZWZhdWx0IHNvcnQgb3JkZXIgZm9yIHBpbm5lZCBub3RlcyB3aGVuIHRoZSBwbHVnaW4gaXMgbG9hZGVkLiBUbyBjaGFuZ2UgdGhlIG9yZGVyIGNsaWNrIG9uIHRoZSBQSU5ORUQgTk9URVMgdGl0bGUgaW4gdGhlIG1haW4gdmlldy5cIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2EteicsICdBLVogKERlZmF1bHQpJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCd6LWEnLCAnWi1BJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjdXN0b20nLCAnQ3VzdG9tIE9yZGVyJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucGlubmVkTm90ZXNTb3J0T3JkZXIpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5waW5uZWROb3Rlc1NvcnRPcmRlciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgY29uc3QgaXNNYWMgPSBQbGF0Zm9ybS5pc01hY09TO1xuICAgICAgICBjb25zdCBtb2RpZmllcktleSA9IGlzTWFjID8gJ09wdGlvbiAo4oylKScgOiAnQ3RybCc7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnSG93IHRvIGNoYW5nZSB0aGUgc29ydCBvcmRlciBpbiB0aGUgbWFpbiB2aWV3JylcbiAgICAgICAgICAgIC5zZXREZXNjKGBDbGljayB0aGUgXCJQSU5ORUQgTk9URVNcIiBoZWFkZXIgaW4gdGhlIG1haW4gdmlldyB0byBjeWNsZSBiZXR3ZWVuIEEtWiwgWi1BLCBhbmQgQ3VzdG9tIHNvcnQgb3JkZXJzLlxcblxcbldoZW4gaW4gQ3VzdG9tIG9yZGVyLCBob2xkICR7bW9kaWZpZXJLZXl9IGFuZCBkcmFnIG5vdGVzIHRvIHJlb3JkZXIgdGhlbS5gKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdTZXQgQ3VzdG9tIE9yZGVyJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdEcmFnIGFuZCBkcm9wIHRoZSBub3RlcyBiZWxvdyB0byBzZXQgeW91ciBwcmVmZXJyZWQgbWFudWFsIG9yZGVyLicpO1xuXG4gICAgICAgIGNvbnN0IGRyYWdnYWJsZUNvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigncGlubmVkLW5vdGVzLW9yZGVyLWNvbnRhaW5lcicpO1xuICAgICAgICB0aGlzLnJlbmRlckRyYWdnYWJsZVBpbm5lZE5vdGVzKGRyYWdnYWJsZUNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgcmVuZGVyQXNzZXRzU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWw7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkFzc2V0cyBUYWIgU2V0dGluZ3NcIiB9KTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkFzc2V0IG9wZW4gYmVoYXZpb3JcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiQ2hvb3NlIGhvdyB0byBvcGVuIGFzc2V0cyB3aGVuIGNsaWNrZWQgZnJvbSB0aGUgQXNzZXRzIGxpc3QuXCIpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCduZXctdGFiJywgJ09wZW4gaW4gYSBuZXcgdGFiJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjdXJyZW50LXRhYicsICdPcGVuIGluIHRoZSBjdXJyZW50IHRhYicpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFzc2V0c09wZW5BY3Rpb24pXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hc3NldHNPcGVuQWN0aW9uID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdEZWZhdWx0IGFzc2V0cyB2aWV3JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdDaG9vc2UgdGhlIGRlZmF1bHQgbGF5b3V0IGZvciB0aGUgYXNzZXRzIHRhYi4nKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignbGlzdCcsICdMaXN0JylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdncmlkJywgJ0dyaWQnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hc3NldHNEZWZhdWx0VmlldylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFzc2V0c0RlZmF1bHRWaWV3ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQXNzZXRzIGxvb2tiYWNrIGRheXNcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiSG93IG1hbnkgZGF5cyBiYWNrIHRoZSBBc3NldHMgdGFiIHNob3VsZCBsb29rIGZvciBjcmVhdGVkIG9yIG1vZGlmaWVkIG5vdGVzLiBEZWZhdWx0IGlzIDcuXCIpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLmFzc2V0c0xvb2tiYWNrRGF5cykpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXNzZXRzTG9va2JhY2tEYXlzID0gTnVtYmVyKHZhbHVlKSB8fCA3O1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkhpZGRlbiBhc3NldCBmaWxlIHR5cGVzXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkEgY29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgZmlsZSBleHRlbnNpb25zIHRvIGhpZGUgZnJvbSB0aGUgQXNzZXRzIHRhYiBhbmQgY2FsZW5kYXIgZG90cyAoZS5nLiwganBnLHBkZix6aXApLiBEZWZhdWx0IGlzIGJhc2UsY2FudmFzLlwiKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiZS5nLiwganBnLHBkZix6aXBcIilcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZGVuQXNzZXRUeXBlcylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGRlbkFzc2V0VHlwZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiU2hvdyBpbmRpY2F0b3IgZm9yIHVudXNlZCBhc3NldHNcIikuc2V0RGVzYyhcIkFuIGljb24gd2lsbCBhcHBlYXIgbmV4dCB0byBhc3NldHMgdGhhdCBhcmUgbm90IGxpbmtlZCBvciBlbWJlZGRlZCBpbiBhbnkgbm90ZSwgYWxsb3dpbmcgZm9yIGVhc2llciBkZXRlY3Rpb24gdG8gZGVsZXRlLlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VW51c2VkQXNzZXRzSW5kaWNhdG9yKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1VudXNlZEFzc2V0c0luZGljYXRvciA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuXG4gICAgfVxuXG4gICAgcmVuZGVyVGFza3NTZXR0aW5ncygpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyRWwgPSB0aGlzLmNvbnRlbnRFbDtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiVGFza3MgVGFiIFNldHRpbmdzXCIgfSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiRGlzcGxheSAmIFNvcnRpbmdcIikuc2V0SGVhZGluZygpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlRhc2sgZ3JvdXAgaGVhZGluZyBmb250IHNpemVcIikuc2V0RGVzYyhcIlRoZSBmb250IHNpemUgZm9yIHRoZSBkYXRlL3RhZyBncm91cCBoZWFkaW5ncyAoZS5nLiwgJ092ZXJkdWUnLCAnVG9kYXknKS4gRGVmYXVsdCBpcyAxM3B4LlwiKS5hZGRUZXh0KHRleHQgPT4gdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrSGVhZGluZ0ZvbnRTaXplKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tIZWFkaW5nRm9udFNpemUgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJUYXNrIHRleHQgZm9udCBzaXplXCIpLnNldERlc2MoXCJUaGUgZm9udCBzaXplIGZvciB0aGUgaW5kaXZpZHVhbCB0YXNrIGl0ZW1zIGluIHRoZSBsaXN0LiBEZWZhdWx0IGlzIDE0cHguXCIpLmFkZFRleHQodGV4dCA9PiB0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tUZXh0Rm9udFNpemUpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza1RleHRGb250U2l6ZSA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlRydW5jYXRlIGxvbmcgdGFzayB0ZXh0XCIpLnNldERlc2MoXCJJZiBlbmFibGVkLCBsb25nIHRhc2tzIHdpbGwgYmUgc2hvcnRlbmVkIHdpdGggJy4uLicuIElmIGRpc2FibGVkLCB0aGV5IHdpbGwgd3JhcCB0byBtdWx0aXBsZSBsaW5lcy5cIikuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza1RleHRUcnVuY2F0ZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tUZXh0VHJ1bmNhdGUgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJTaG93IGNvbXBsZXRlZCB0YXNrcyBmb3IgVG9kYXlcIikuc2V0RGVzYyhcIklmIGVuYWJsZWQsIHRhc2tzIHRoYXQgeW91IG1hcmtlZCBhcyBjb21wbGV0ZSB0b2RheSB3aWxsIGFwcGVhciBpbiB0aGUgbGlzdHMgKHJlZ2FyZGxlc3Mgb2YgdGhlaXIgZHVlIGRhdGUpLlwiKS5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Q29tcGxldGVkVGFza3NUb2RheSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dDb21wbGV0ZWRUYXNrc1RvZGF5ID0gdmFsdWU7IGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiVGFzayBzb3J0IG9yZGVyXCIpLnNldERlc2MoXCJUaGUgZGVmYXVsdCBvcmRlciBmb3IgdGFza3Mgd2l0aGluIGVhY2ggZ3JvdXAuXCIpLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duLmFkZE9wdGlvbignZHVlRGF0ZScsICdCeSBEdWUgRGF0ZSAoZWFybGllc3QgZmlyc3QpJykuYWRkT3B0aW9uKCdhLXonLCAnQS1aJykuYWRkT3B0aW9uKCd6LWEnLCAnWi1BJykuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza1NvcnRPcmRlcikub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tTb3J0T3JkZXIgPSB2YWx1ZTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJHcm91cCB0YXNrcyBieVwiKS5zZXREZXNjKFwiQ2hvb3NlIGhvdyB0byBncm91cCB0YXNrcyBpbiB0aGUgdmlldy4gU2Vjb25kLWNsaWNraW5nIHRoZSBUYXNrcyB0YWIgd2lsbCBhbHNvIHRvZ2dsZSB0aGlzLlwiKS5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93bi5hZGRPcHRpb24oJ2RhdGUnLCAnRGF0ZSAoT3ZlcmR1ZSwgVG9kYXksIGV0Yy4pJykuYWRkT3B0aW9uKCd0YWcnLCAnVGFnJykuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0dyb3VwQnkpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrR3JvdXBCeSA9IHZhbHVlOyBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTsgdGhpcy5yZWZyZXNoRGlzcGxheSgpOyB9KSk7XG5cbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tHcm91cEJ5ID09PSAnZGF0ZScpIHtcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiRGF0ZSBHcm91cHMgdG8gU2hvd1wiKS5zZXRIZWFkaW5nKCk7XG4gICAgICAgICAgICBjb25zdCBkYXRlR3JvdXBzID0gW3sga2V5OiAnb3ZlcmR1ZScsIG5hbWU6ICdPdmVyZHVlJyB9LCB7IGtleTogJ3RvZGF5JywgbmFtZTogJ1RvZGF5JyB9LCB7IGtleTogJ3RvbW9ycm93JywgbmFtZTogJ1RvbW9ycm93JyB9LCB7IGtleTogJ25leHQ3ZGF5cycsIG5hbWU6ICdOZXh0IDcgRGF5cycgfSwgeyBrZXk6ICdmdXR1cmUnLCBuYW1lOiAnRnV0dXJlJyB9LF07XG4gICAgICAgICAgICBkYXRlR3JvdXBzLmZvckVhY2goZyA9PiB7IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKGcubmFtZSkuYWRkVG9nZ2xlKHQgPT4gdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrRGF0ZUdyb3Vwc1RvU2hvdy5pbmNsdWRlcyhnLmtleSkpLm9uQ2hhbmdlKGFzeW5jIHYgPT4geyBjb25zdCBncm91cHMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrRGF0ZUdyb3Vwc1RvU2hvdzsgaWYgKHYgJiYgIWdyb3Vwcy5pbmNsdWRlcyhnLmtleSkpIGdyb3Vwcy5wdXNoKGcua2V5KTsgZWxzZSBpZiAoIXYpIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tEYXRlR3JvdXBzVG9TaG93ID0gZ3JvdXBzLmZpbHRlcihpID0+IGkgIT09IGcua2V5KTsgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7IH0pKTsgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkNvbnRlbnQgJiBBcHBlYXJhbmNlXCIpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgdGhpcy5jcmVhdGVJZ25vcmVkRm9sZGVyTGlzdChjb250YWluZXJFbCwgXCJFeGNsdWRlIGZvbGRlcnMgZnJvbSBUYXNrIHNlYXJjaFwiLCBcIlRhc2tzIGluIHRoZXNlIGZvbGRlcnMgd2lsbCBub3QgYXBwZWFyIGluIHRoZSAnVGFza3MnIGxpc3QuXCIsICd0YXNrSWdub3JlRm9sZGVycycpO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1Rhc2sgR3JvdXAgSWNvbnMnIH0pO1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0N1c3RvbWl6ZSB0aGUgaWNvbiBkaXNwbGF5ZWQgbmV4dCB0byBlYWNoIHRhc2sgZ3JvdXAgaGVhZGVyLicsIGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicgfSk7XG5cbiAgICAgICAgY29uc3QgdGFza0dyb3VwSWNvblNldHRpbmdzID0gW1xuICAgICAgICAgICAgeyBrZXk6ICdvdmVyZHVlJywgbmFtZTogJ092ZXJkdWUgaWNvbicgfSxcbiAgICAgICAgICAgIHsga2V5OiAndG9kYXknLCBuYW1lOiAnVG9kYXkgaWNvbicgfSxcbiAgICAgICAgICAgIHsga2V5OiAndG9tb3Jyb3cnLCBuYW1lOiAnVG9tb3Jyb3cgaWNvbicgfSxcbiAgICAgICAgICAgIHsga2V5OiAnbmV4dDdkYXlzJywgbmFtZTogJ05leHQgNyBEYXlzIGljb24nIH0sXG4gICAgICAgICAgICB7IGtleTogJ2Z1dHVyZScsIG5hbWU6ICdGdXR1cmUgaWNvbicgfSxcbiAgICAgICAgICAgIHsga2V5OiAnbm9EYXRlJywgbmFtZTogJ05vIER1ZSBEYXRlIGljb24nIH0sXG4gICAgICAgICAgICB7IGtleTogJ3RhZycsIG5hbWU6ICdUYWcgR3JvdXAgaWNvbicgfVxuICAgICAgICBdO1xuXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCB0aGUgc2V0dGluZ3MgdG8gY3JlYXRlIGVhY2ggaW5wdXQgZmllbGQgYW5kIGl0cyByZXNldCBidXR0b25cbiAgICAgICAgdGFza0dyb3VwSWNvblNldHRpbmdzLmZvckVhY2gocyA9PiB7XG4gICAgICAgICAgICBsZXQgdGV4dENvbXBvbmVudDsgLy8gVGhpcyB3aWxsIGhvbGQgYSByZWZlcmVuY2UgdG8gdGhlIHRleHQgaW5wdXRcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUocy5uYW1lKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFbnRlciBhbnkgTHVjaWRlIGljb24gbmFtZS4nKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0Q29tcG9uZW50ID0gdGV4dDsgLy8gU3RvcmUgdGhlIHJlZmVyZW5jZVxuICAgICAgICAgICAgICAgICAgICB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0dyb3VwSWNvbnNbcy5rZXldIHx8IERFRkFVTFRfU0VUVElOR1MudGFza0dyb3VwSWNvbnNbcy5rZXldKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tHcm91cEljb25zW3Mua2V5XSA9IHZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oJ3JvdGF0ZS1jY3cnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoJ1Jlc2V0IHRvIGRlZmF1bHQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IHRoaXMuY3VycmVudFRoZW1lRGVmYXVsdHMudGFiSWNvbnNbcy5rZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tHcm91cEljb25zW3Mua2V5XSA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGV4dENvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Q29tcG9uZW50LnNldFZhbHVlKGRlZmF1bHRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQW5kVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgJyR7cy5uYW1lfScgcmVzZXQgdG8gZGVmYXVsdC5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdSZXNldCBBbGwgVGFzayBHcm91cCBJY29ucycpXG4gICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoJ1Jlc2V0cyBhbGwgdGFzayBncm91cCBpY29ucyB0byB0aGVpciBvcmlnaW5hbCB2YWx1ZXMnKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byByZXNldCBhbGwgdGFzayBncm91cCBpY29ucz8nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0dyb3VwSWNvbnMgPSB7IC4uLkRFRkFVTFRfU0VUVElOR1MudGFza0dyb3VwSWNvbnMgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuZFVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQWxsIHRhc2sgZ3JvdXAgaWNvbnMgaGF2ZSBiZWVuIHJlc2V0LicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGlzcGxheSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiVGFzayBHcm91cCBCYWNrZ3JvdW5kc1wiKS5zZXRIZWFkaW5nKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJPdmVyZHVlXCIsIFwiQmFja2dyb3VuZCBjb2xvciBmb3IgdGhlICdPdmVyZHVlJyB0YXNrIGdyb3VwLlwiLCBcInRhc2tHcm91cENvbG9yT3ZlcmR1ZVwiKTtcbiAgICAgICAgdGhpcy5jcmVhdGVSZ2JhQ29sb3JTZXR0aW5nKGNvbnRhaW5lckVsLCBcIlRvZGF5XCIsIFwiQmFja2dyb3VuZCBjb2xvciBmb3IgdGhlICdUb2RheScgdGFzayBncm91cC5cIiwgXCJ0YXNrR3JvdXBDb2xvclRvZGF5XCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiVG9tb3Jyb3dcIiwgXCJCYWNrZ3JvdW5kIGNvbG9yIGZvciB0aGUgJ1RvbW9ycm93JyB0YXNrIGdyb3VwLlwiLCBcInRhc2tHcm91cENvbG9yVG9tb3Jyb3dcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJOZXh0IDcgRGF5c1wiLCBcIkJhY2tncm91bmQgY29sb3IgZm9yIHRoZSAnTmV4dCA3IERheXMnIHRhc2sgZ3JvdXAuXCIsIFwidGFza0dyb3VwQ29sb3JOZXh0N0RheXNcIik7XG4gICAgICAgIHRoaXMuY3JlYXRlUmdiYUNvbG9yU2V0dGluZyhjb250YWluZXJFbCwgXCJGdXR1cmVcIiwgXCJCYWNrZ3JvdW5kIGNvbG9yIGZvciAnRnV0dXJlJyB0YXNrIGdyb3VwLlwiLCBcInRhc2tHcm91cENvbG9yRnV0dXJlXCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiTm8gRHVlIERhdGVcIiwgXCJCYWNrZ3JvdW5kIGNvbG9yIGZvciB0aGUgJ05vIER1ZSBEYXRlJyB0YXNrIGdyb3VwLlwiLCBcInRhc2tHcm91cENvbG9yTm9EYXRlXCIpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJnYmFDb2xvclNldHRpbmcoY29udGFpbmVyRWwsIFwiVGFnXCIsIFwiQmFja2dyb3VuZCBjb2xvciBmb3IgdGFzayBncm91cHMgd2hlbiBncm91cGVkIGJ5IHRhZy5cIiwgXCJ0YXNrR3JvdXBDb2xvclRhZ1wiKTtcbiAgICB9XG5cblxuICAgIGFzeW5jIHJlbmRlclRoZW1lc1NldHRpbmdzKCkge1xuICAgICAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGVudEVsO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpOyAvLyBDbGVhciBwcmV2aW91cyBjb250ZW50IHRvIHByZXZlbnQgZHVwbGljYXRpbmcgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1RoZW1lIE1hbmFnZW1lbnQnIH0pO1xuXG4gICAgICAgIC8vIERpc3BsYXkgYW4gaW5kaWNhdG9yIGlmIGEgdGhlbWUgaXMgY3VycmVudGx5IGFwcGxpZWRcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmFwcGxpZWRUaGVtZSkge1xuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoJ0N1cnJlbnRseSBBcHBsaWVkIFRoZW1lOiAnICsgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBwbGllZFRoZW1lKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKGBUaGUgYXBwZWFyYW5jZSBzZXR0aW5ncyBmcm9tIHRoZSBcIiR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBwbGllZFRoZW1lfVwiIHRoZW1lIGFyZSBjdXJyZW50bHkgYWN0aXZlLmApXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT5cbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnQ2xlYXInKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoJ0NsZWFyIHRoaXMgaW5kaWNhdG9yLiBUaGlzIGRvZXMgbm90IGNoYW5nZSB5b3VyIHNldHRpbmdzLicpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBwbGllZFRoZW1lID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7IC8vIFJlLXJlbmRlciB0aGUgZW50aXJlIHNldHRpbmdzIHRhYlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0FwcGxpZWQgdGhlbWUgaW5kaWNhdG9yIGNsZWFyZWQuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAuc2V0dGluZ0VsLmFkZENsYXNzKCdhcHBsaWVkLXRoZW1lLWluZGljYXRvcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmluZCB0aGVtZSBmaWxlcyBpbiB0aGUgcGx1Z2luJ3MgXCJ0aGVtZXNcIiBkaXJlY3RvcnlcbiAgICAgICAgY29uc3QgdGhlbWVzRm9sZGVyUGF0aCA9IHRoaXMucGx1Z2luLm1hbmlmZXN0LmRpciArICcvVGhlbWVzJztcbiAgICAgICAgY29uc3QgdGhlbWVGaWxlcyA9IGF3YWl0IHRoaXMuZ2V0VGhlbWVGaWxlcyh0aGVtZXNGb2xkZXJQYXRoKTtcblxuICAgICAgICBpZiAoIXRoZW1lRmlsZXMpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnVGhlIFRoZW1lcyBmb2xkZXIgY291bGQgbm90IGJlIGZvdW5kIGluIHRoZSBwbHVnaW4gZGlyZWN0b3J5LicgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhlbWVGaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnTm8gdGhlbWUgZmlsZXMgKC5qc29uKSB3ZXJlIGZvdW5kIGluIHRoZSBUaGVtZXMgZm9sZGVyLicgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgdGhlIG1haW4gdHdvLWNvbHVtbiBsYXlvdXRcbiAgICAgICAgY29uc3QgbWFpbkNvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ3RoZW1lLXNldHRpbmdzLWNvbnRhaW5lcicgfSk7XG4gICAgICAgIGNvbnN0IGxpc3RDb250YWluZXIgPSBtYWluQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3RoZW1lLWxpc3QtY29udGFpbmVyJyB9KTtcbiAgICAgICAgdGhpcy5wcmV2aWV3Q29udGFpbmVyID0gbWFpbkNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd0aGVtZS1wcmV2aWV3LXdyYXBwZXInIH0pO1xuXG4gICAgICAgIGxpc3RDb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQXZhaWxhYmxlIFRoZW1lcycgfSk7XG5cbiAgICAgICAgLy8gU29ydCB0aGUgdGhlbWUgZmlsZXMgYWxwaGFiZXRpY2FsbHkgYmVmb3JlIHJlbmRlcmluZy5cbiAgICAgICAgdGhlbWVGaWxlcy5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhIGxpc3QgaXRlbSBmb3IgZWFjaCB0aGVtZSBmaWxlXG4gICAgICAgIHRoZW1lRmlsZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRoZW1lTmFtZSA9IGZpbGUuc3BsaXQoJy8nKS5wb3AoKS5yZXBsYWNlKCcuanNvbicsICcnKTtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1FbCA9IGxpc3RDb250YWluZXIuY3JlYXRlRGl2KHsgdGV4dDogdGhlbWVOYW1lLCBjbHM6ICd0aGVtZS1saXN0LWl0ZW0nIH0pO1xuXG4gICAgICAgICAgICBpZiAodGhlbWVOYW1lID09PSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcHBsaWVkVGhlbWUpIHtcbiAgICAgICAgICAgICAgICBpdGVtRWwuY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCBhIGNsaWNrIGxpc3RlbmVyIHRvIGVhY2ggdGhlbWUgaXRlbSB0byByZW5kZXIgaXRzIHByZXZpZXdcbiAgICAgICAgICAgIGl0ZW1FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBBcnJheS5mcm9tKGxpc3RDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnRoZW1lLWxpc3QtaXRlbScpKS5mb3JFYWNoKGNoaWxkID0+IGNoaWxkLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpKTtcbiAgICAgICAgICAgICAgICBpdGVtRWwuY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRoZW1lRmlsZSA9IHsgbmFtZTogZmlsZSB9O1xuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRoZW1lU2V0dGluZ3MgPSBKU09OLnBhcnNlKGZpbGVDb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJUaGVtZVByZXZpZXcodGhlbWVTZXR0aW5ncywgdGhlbWVOYW1lKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yIHJlYWRpbmcgdGhlbWUgZmlsZTogJHt0aGVtZU5hbWV9YCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RoZW1lIGZpbGUgcmVhZCBlcnJvcjonLCBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdGhlbWVJdGVtcyA9IEFycmF5LmZyb20obGlzdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcudGhlbWUtbGlzdC1pdGVtJykpO1xuICAgICAgICBsZXQgZm9jdXNlZEluZGV4ID0gLTE7XG5cbiAgICAgICAgaWYgKHRoZW1lSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBpbml0aWFsIGl0ZW0gdG8gZm9jdXMgb24gKHRoZSBhY3RpdmUgdGhlbWUsIG9yIHRoZSBmaXJzdCBvbmUpXG4gICAgICAgICAgICBjb25zdCBpbml0aWFsbHlBY3RpdmVJbmRleCA9IHRoZW1lSXRlbXMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWFjdGl2ZScpKTtcbiAgICAgICAgICAgIGZvY3VzZWRJbmRleCA9IChpbml0aWFsbHlBY3RpdmVJbmRleCAhPT0gLTEpID8gaW5pdGlhbGx5QWN0aXZlSW5kZXggOiAwO1xuXG4gICAgICAgICAgICAvLyBTZXQgdGFiaW5kZXggdG8gbWFuYWdlIGZvY3VzOiAnMCcgZm9yIHRoZSBmb2N1c2FibGUgaXRlbSwgJy0xJyBmb3IgdGhlIHJlc3RcbiAgICAgICAgICAgIHRoZW1lSXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBpdGVtLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCBpbmRleCA9PT0gZm9jdXNlZEluZGV4ID8gJzAnIDogJy0xJyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhlbWVJdGVtc1tmb2N1c2VkSW5kZXhdLmZvY3VzKCk7XG5cbiAgICAgICAgICAgIC8vIExvYWQgdGhlIGluaXRpYWwgcHJldmlldyBpZiB0aGUgcGFuZSBpcyBlbXB0eVxuICAgICAgICAgICAgaWYgKCF0aGlzLnByZXZpZXdDb250YWluZXIuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICAgICAgICAgICAgdGhlbWVJdGVtc1tmb2N1c2VkSW5kZXhdLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIC0tLSBHTE9CQUwgS0VZQk9BUkQgTkFWSUdBVElPTiAtLS1cbiAgICAgICAgICAgIC8vIEF0dGFjaCBhIHNpbmdsZSwgcGVyc2lzdGVudCBsaXN0ZW5lciB0byB0aGUgc2V0dGluZ3MgdGFiJ3Mgcm9vdCBjb250YWluZXIuXG4gICAgICAgICAgICAvLyBUaGlzIGNhcHR1cmVzIGFycm93IGtleXMgcmVnYXJkbGVzcyBvZiB3aGF0IHNwZWNpZmljIGVsZW1lbnQgaGFzIGZvY3VzLlxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5vbmtleWRvd24gPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIElnbm9yZSBrZXkgcHJlc3NlcyBpZiB0aGUgdXNlciBpcyB0eXBpbmcgaW4gYW4gaW5wdXQgZmllbGRcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudGFnTmFtZSA9PT0gJ0lOUFVUJyB8fCBlLnRhcmdldC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBlLmtleTtcbiAgICAgICAgICAgICAgICBpZiAoIVsnQXJyb3dVcCcsICdBcnJvd0Rvd24nLCAnQXJyb3dMZWZ0JywgJ0Fycm93UmlnaHQnXS5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgVXAvRG93biBmb3IgdGhlbWUgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ0Fycm93VXAnIHx8IGtleSA9PT0gJ0Fycm93RG93bicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhlbWVJdGVtc1tmb2N1c2VkSW5kZXhdLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ0Fycm93RG93bicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzZWRJbmRleCA9IChmb2N1c2VkSW5kZXggKyAxKSAlIHRoZW1lSXRlbXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNlZEluZGV4ID0gKGZvY3VzZWRJbmRleCAtIDEgKyB0aGVtZUl0ZW1zLmxlbmd0aCkgJSB0aGVtZUl0ZW1zLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdJdGVtID0gdGhlbWVJdGVtc1tmb2N1c2VkSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBuZXdJdGVtLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgICAgICAgICAgICAgICAgICBuZXdJdGVtLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIG5ld0l0ZW0uY2xpY2soKTsgLy8gQ2xpY2sgdG8gbG9hZCBwcmV2aWV3IGluc3RhbnRseVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBMZWZ0L1JpZ2h0IGZvciBsaWdodC9kYXJrIG1vZGUgdG9nZ2xlXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdBcnJvd0xlZnQnIHx8IGtleSA9PT0gJ0Fycm93UmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgYnV0dG9ucyBieSB0aGVpciBkYXRhLW1vZGUgYXR0cmlidXRlIGluc2lkZSB0aGUgcHJldmlldyBjb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlnaHRCdXR0b24gPSB0aGlzLnByZXZpZXdDb250YWluZXIucXVlcnlTZWxlY3RvcignYnV0dG9uW2RhdGEtbW9kZT1cImxpZ2h0XCJdJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhcmtCdXR0b24gPSB0aGlzLnByZXZpZXdDb250YWluZXIucXVlcnlTZWxlY3RvcignYnV0dG9uW2RhdGEtbW9kZT1cImRhcmtcIl0nKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobGlnaHRCdXR0b24gJiYgZGFya0J1dHRvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xpY2sgdGhlIGJ1dHRvbiB0aGF0IGlzIE5PVCBjdXJyZW50bHkgYWN0aXZlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRCdXR0b24gPSBsaWdodEJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWFjdGl2ZScpID8gZGFya0J1dHRvbiA6IGxpZ2h0QnV0dG9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJJbml0aWFsUHJldmlldygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0VGhlbWVGaWxlcyh0aGVtZXNGb2xkZXJQYXRoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIWF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHRoZW1lc0ZvbGRlclBhdGgpKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGxpc3QgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmxpc3QodGhlbWVzRm9sZGVyUGF0aCk7XG4gICAgICAgICAgICByZXR1cm4gbGlzdC5maWxlcy5maWx0ZXIoZmlsZSA9PiBmaWxlLmVuZHNXaXRoKCcuanNvbicpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFjY2Vzc2luZyB0aGVtZXMgZm9sZGVyOlwiLCBlKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVySW5pdGlhbFByZXZpZXcoKSB7XG4gICAgICAgIGlmICghdGhpcy5wcmV2aWV3Q29udGFpbmVyKSByZXR1cm47XG4gICAgICAgIHRoaXMucHJldmlld0NvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICB0aGlzLnByZXZpZXdDb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVGhlbWUgUHJldmlldycgfSk7XG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gdGhpcy5wcmV2aWV3Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3RoZW1lLXByZXZpZXctcGxhY2Vob2xkZXInIH0pO1xuICAgICAgICBwbGFjZWhvbGRlci5zZXRUZXh0KCdTZWxlY3QgYSB0aGVtZSB0byBzZWUgYSBwcmV2aWV3IGFuZCBhcHBseSBpdC4nKTtcbiAgICB9XG5cbiAgICByZW5kZXJUaGVtZVByZXZpZXcoc2V0dGluZ3MsIGZpbGVOYW1lKSB7XG4gICAgICAgIGlmICghdGhpcy5wcmV2aWV3Q29udGFpbmVyKSByZXR1cm47XG4gICAgICAgIHRoaXMucHJldmlld0NvbnRhaW5lci5lbXB0eSgpO1xuXG4gICAgICAgIHRoaXMucHJldmlld0NvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdMaXZlIFRoZW1lIFByZXZpZXcnIH0pO1xuXG4gICAgICAgIGNvbnN0IHRhYkNvbnRhaW5lciA9IHRoaXMucHJldmlld0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd0aGVtZS1wcmV2aWV3LXRhYnMnIH0pO1xuICAgICAgICBjb25zdCBsaWdodFRhYkJ0biA9IHRhYkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnTGlnaHQgTW9kZScgfSk7XG4gICAgICAgIGxpZ2h0VGFiQnRuLnNldEF0dHJpYnV0ZSgnZGF0YS1tb2RlJywgJ2xpZ2h0Jyk7XG5cbiAgICAgICAgY29uc3QgZGFya1RhYkJ0biA9IHRhYkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnRGFyayBNb2RlJyB9KTtcbiAgICAgICAgZGFya1RhYkJ0bi5zZXRBdHRyaWJ1dGUoJ2RhdGEtbW9kZScsICdkYXJrJyk7XG5cbiAgICAgICAgY29uc3QgcHJldmlld0NvbnRlbnQgPSB0aGlzLnByZXZpZXdDb250YWluZXIuY3JlYXRlRGl2KCk7XG5cbiAgICAgICAgY29uc3QgcmVuZGVyID0gKG1vZGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlUHJldmlld01vZGUgPSBtb2RlO1xuICAgICAgICAgICAgcHJldmlld0NvbnRlbnQuZW1wdHkoKTtcbiAgICAgICAgICAgIHByZXZpZXdDb250ZW50LmNsYXNzTmFtZSA9ICcnO1xuICAgICAgICAgICAgcHJldmlld0NvbnRlbnQuYWRkQ2xhc3MoJ3RoZW1lLXByZXZpZXctcGFuZScpO1xuXG4gICAgICAgICAgICBpZiAobW9kZSA9PT0gJ2xpZ2h0Jykge1xuICAgICAgICAgICAgICAgIHByZXZpZXdDb250ZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHNldHRpbmdzLmJhY2tncm91bmRDb2xvckxpZ2h0IHx8ICcjZmZmZmZmJztcbiAgICAgICAgICAgICAgICBwcmV2aWV3Q29udGVudC5zdHlsZS5jb2xvciA9IHNldHRpbmdzLnRleHRDb2xvckxpZ2h0IHx8ICcjMDAwMDAwJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJldmlld0NvbnRlbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gc2V0dGluZ3MuYmFja2dyb3VuZENvbG9yRGFyayB8fCAnIzFlMWUxZSc7XG4gICAgICAgICAgICAgICAgcHJldmlld0NvbnRlbnQuc3R5bGUuY29sb3IgPSBzZXR0aW5ncy50ZXh0Q29sb3JEYXJrIHx8ICcjZGRkZGRkJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jcmVhdGVDb21wcmVoZW5zaXZlUHJldmlldyhwcmV2aWV3Q29udGVudCwgc2V0dGluZ3MsIG1vZGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGxpZ2h0VGFiQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgZGFya1RhYkJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgICAgIGxpZ2h0VGFiQnRuLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAgICAgcmVuZGVyKCdsaWdodCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBkYXJrVGFiQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgbGlnaHRUYWJCdG4uY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJyk7XG4gICAgICAgICAgICBkYXJrVGFiQnRuLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAgICAgcmVuZGVyKCdkYXJrJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHByZXZpZXcgbW9kZSBiYXNlZCBvbiBhcHAgYXBwZWFyYW5jZSBPTkxZIGlmIGl0IGhhc24ndCBiZWVuIHNldCB5ZXQuXG4gICAgICAgIGlmICghdGhpcy5hY3RpdmVQcmV2aWV3TW9kZSkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVQcmV2aWV3TW9kZSA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd0aGVtZS1kYXJrJykgPyAnZGFyaycgOiAnbGlnaHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVHJpZ2dlciB0aGUgY2xpY2sgb24gdGhlIGNvcnJlY3QgYnV0dG9uIGJhc2VkIG9uIHRoZSAqc3RvcmVkKiBwcmV2aWV3IG1vZGUuXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZVByZXZpZXdNb2RlID09PSAnZGFyaycpIHtcbiAgICAgICAgICAgIGRhcmtUYWJCdG4uY2xpY2soKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxpZ2h0VGFiQnRuLmNsaWNrKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpbml0aWFsTW9kZSA9IHRoaXMuYWN0aXZlUHJldmlld01vZGUgfHwgKGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd0aGVtZS1kYXJrJykgPyAnZGFyaycgOiAnbGlnaHQnKTtcbiAgICAgICAgaWYgKGluaXRpYWxNb2RlID09PSAnbGlnaHQnKSB7XG4gICAgICAgICAgICBsaWdodFRhYkJ0bi5jbGljaygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGFya1RhYkJ0bi5jbGljaygpO1xuICAgICAgICB9XG5cbiAgICAgICAgbmV3IFNldHRpbmcodGhpcy5wcmV2aWV3Q29udGFpbmVyKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJBcHBseSB0aGlzIHRoZW1lXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlRoaXMgd2lsbCBvdmVyd3JpdGUgeW91ciBjdXJyZW50IGFwcGVhcmFuY2Ugc2V0dGluZ3Mgd2l0aCB0aGUgcHJldmlld2VkIHZhbHVlcy5cIilcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IHtcbiAgICAgICAgICAgICAgICBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJBcHBseVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKCkgLy8gTWFrZXMgdGhlIGJ1dHRvbiBtb3JlIHByb21pbmVudCwgaW5kaWNhdGluZyBhIHByaW1hcnkgYWN0aW9uXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDEuIEFwcGx5IHRoZSBzZXR0aW5ncyBmcm9tIHRoZSBwcmV2aWV3ZWQgdGhlbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHNldHRpbmdzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzW2tleV0gPSBzZXR0aW5nc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMi4gU2F2ZSB0aGUgbmFtZSBvZiB0aGUgYXBwbGllZCB0aGVtZSBmaWxlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcHBsaWVkVGhlbWUgPSBmaWxlTmFtZS5yZXBsYWNlKC9cXC5qc29uJC8sICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiQXBwbGllZCB0aGVtZSBzZXR0aW5nczpcIiwgZmlsZU5hbWUsIHNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMy4gU2F2ZSB0aGUgbmV3IHNldHRpbmdzIHRvIGRpc2sgYW5kIHVwZGF0ZSB0aGUgbGl2ZSBzdHlsZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udXBkYXRlU3R5bGVzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDQuIEZvcmNlIHRoZSBlbnRpcmUgc2V0dGluZ3MgdGFiIHRvIHJlLXJlbmRlciBmcm9tIHNjcmF0Y2hcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaERpc3BsYXkoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnVGhlbWUgYXBwbGllZCBzdWNjZXNzZnVsbHkhJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDUuIEZvcmNlIGFueSBvcGVuIGNhbGVuZGFyIHZpZXdzIHRvIHVwZGF0ZSB3aXRoIHRoZSBuZXcgdGhlbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdjYWxlbmRhci1wZXJpb2Qtd2VlaycpWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlYWYgJiYgbGVhZi52aWV3IGluc3RhbmNlb2YgUGVyaW9kTW9udGhWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbGVhZi52aWV3LnJlbmRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgZ2V0UHJldmlld0NvbG9yKHRoZW1lU2V0dGluZ3MsIGtleSkge1xuICAgICAgICAvLyAxLiBQcmlvcml0aXplIHRoZSBjb2xvciBmcm9tIHRoZSBsb2FkZWQgdGhlbWUgZmlsZVxuICAgICAgICBpZiAodGhlbWVTZXR0aW5ncyAmJiB0aGVtZVNldHRpbmdzW2tleV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoZW1lU2V0dGluZ3Nba2V5XTtcbiAgICAgICAgfVxuICAgICAgICAvLyAyLiBGYWxsYmFjayB0byB0aGUgbGl2ZSBwbHVnaW4gc2V0dGluZ3MgaWYgdGhlIGtleSBpcyBtaXNzaW5nIGluIHRoZSB0aGVtZVxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3Nba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wbHVnaW4uc2V0dGluZ3Nba2V5XTtcbiAgICAgICAgfVxuICAgICAgICAvLyAzLiBQcm92aWRlIGEgc2FmZSBkZWZhdWx0IGlmIHRoZSBzZXR0aW5nIGlzIGRlZmluZWQgbm93aGVyZVxuICAgICAgICAvLyBUaGlzIGlzIGEgZmFsbGJhY2sgZm9yIG9sZGVyIHRoZW1lcyB0aGF0IG1pZ2h0IG5vdCBoYXZlIGFsbCBrZXlzXG4gICAgICAgIGlmIChrZXkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnbGlnaHQnKSkge1xuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDAsIDAsIDAsIDEpJzsgLy8gRGVmYXVsdCB0byBibGFjayBmb3IgbGlnaHQgbW9kZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAncmdiYSgyNTUsIDI1NSwgMjU1LCAxKSc7IC8vIERlZmF1bHQgdG8gd2hpdGUgZm9yIGRhcmsgbW9kZVxuICAgIH1cblxuXG4gICAgY3JlYXRlQ29tcHJlaGVuc2l2ZVByZXZpZXcoY29udGFpbmVyLCBzZXR0aW5ncywgbW9kZSkge1xuICAgICAgICBjb25zdCBpc0xpZ2h0ID0gbW9kZSA9PT0gJ2xpZ2h0JztcbiAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKGB0aGVtZS1wcmV2aWV3LXBhbmUtJHttb2RlfWApO1xuXG4gICAgICAgIC8vIC0tLSBDYWxlbmRhciBHcmlkIFByZXZpZXcgLS0tXG4gICAgICAgIGNvbnN0IGNhbGVuZGFyR3JpZEhlYWRlciA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdwcmV2aWV3LXNlY3Rpb24taGVhZGVyJyB9KTtcblxuICAgICAgICAvLyAtLS0gTW9udGggYW5kIFllYXIgVGl0bGUgUHJldmlldyAtLS1cbiAgICAgICAgY29uc3QgbW9udGhUaXRsZUNvbnRhaW5lciA9IGNhbGVuZGFyR3JpZEhlYWRlci5jcmVhdGVFbCgnaDMnKTtcbiAgICAgICAgbW9udGhUaXRsZUNvbnRhaW5lci5zdHlsZS5mb250U2l6ZSA9IHRoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCAnbWFpbk1vbnRoWWVhclRpdGxlRm9udFNpemUnLCAnMjJweCcpO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhIHNwYW4gZm9yIHRoZSBNT05USCBwYXJ0IG9mIHRoZSB0aXRsZVxuICAgICAgICBjb25zdCBtb250aFNwYW4gPSBtb250aFRpdGxlQ29udGFpbmVyLmNyZWF0ZVNwYW4oe1xuICAgICAgICAgICAgdGV4dDogbW9tZW50KG5ldyBEYXRlKCkpLmZvcm1hdCgnTU1NTScpXG4gICAgICAgIH0pO1xuICAgICAgICBtb250aFNwYW4uc3R5bGUuY29sb3IgPSB0aGlzLmdldFByZXZpZXdDb2xvcihzZXR0aW5ncywgaXNMaWdodCA/ICdtb250aENvbG9yTGlnaHQnIDogJ21vbnRoQ29sb3JEYXJrJyk7XG4gICAgICAgIG1vbnRoU3Bhbi5zdHlsZS5mb250V2VpZ2h0ID0gdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsICdtYWluTW9udGhUaXRsZUJvbGQnLCBmYWxzZSkgPyAnYm9sZCcgOiAnbm9ybWFsJztcblxuICAgICAgICAvLyBDcmVhdGUgYSBzcGFuIGZvciB0aGUgWUVBUiBwYXJ0IG9mIHRoZSB0aXRsZVxuICAgICAgICBjb25zdCB5ZWFyU3BhbiA9IG1vbnRoVGl0bGVDb250YWluZXIuY3JlYXRlU3Bhbih7XG4gICAgICAgICAgICB0ZXh0OiBgICR7bW9tZW50KG5ldyBEYXRlKCkpLmZvcm1hdCgnWVlZWScpfWAgLy8gTm90ZSB0aGUgbGVhZGluZyBzcGFjZVxuICAgICAgICB9KTtcbiAgICAgICAgeWVhclNwYW4uc3R5bGUuY29sb3IgPSB0aGlzLmdldFByZXZpZXdDb2xvcihzZXR0aW5ncywgaXNMaWdodCA/ICd5ZWFyQ29sb3JMaWdodCcgOiAneWVhckNvbG9yRGFyaycpO1xuICAgICAgICB5ZWFyU3Bhbi5zdHlsZS5mb250V2VpZ2h0ID0gdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsICdtYWluWWVhclRpdGxlQm9sZCcsIGZhbHNlKSA/ICdib2xkJyA6ICdub3JtYWwnO1xuXG4gICAgICAgIC8vIC0tLSBDYWxlbmRhciBHcmlkIFByZXZpZXcgLS0tXG4gICAgICAgIGNvbnN0IGNhbGVuZGFyV3JhcHBlciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IGBwcmV2aWV3LXNlY3Rpb24td3JhcHBlciAke21vZGV9YCB9KTtcbiAgICAgICAgY2FsZW5kYXJXcmFwcGVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGlzTGlnaHQgPyAoc2V0dGluZ3MuYmFja2dyb3VuZENvbG9yTGlnaHQgfHwgJyNmNWY1ZjUnKSA6IChzZXR0aW5ncy5iYWNrZ3JvdW5kQ29sb3JEYXJrIHx8ICcjMmEyYTJhJyk7XG5cbiAgICAgICAgY29uc3QgdGFibGUgPSBjYWxlbmRhcldyYXBwZXIuY3JlYXRlRWwoJ3RhYmxlJywgeyBjbHM6ICdwcmV2aWV3LWNhbGVuZGFyLWdyaWQnIH0pO1xuXG4gICAgICAgIC8vIC0tLSBUYWJsZSBIZWFkZXIgKHRoZWFkKSAtLS1cbiAgICAgICAgY29uc3QgdGhlYWQgPSB0YWJsZS5jcmVhdGVFbCgndGhlYWQnKTtcbiAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gdGhlYWQuY3JlYXRlRWwoJ3RyJyk7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBbJ0NXJywgJ1NVTicsICdNT04nLCAnVFVFJywgJ1dFRCcsICdUSFUnLCAnRlJJJywgJ1NBVCddO1xuXG4gICAgICAgIGhlYWRlcnMuZm9yRWFjaChoZWFkZXJUZXh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRoID0gaGVhZGVyUm93LmNyZWF0ZUVsKCd0aCcsIHsgdGV4dDogaGVhZGVyVGV4dCB9KTtcblxuICAgICAgICAgICAgLy8gQWx3YXlzIHVzZSB0aGUgc3RhbmRhcmQgZGF5IGhlYWRlciBmb250IGNvbG9yIGZvciB0aGUgQ1cgaGVhZGVyIHRleHRcbiAgICAgICAgICAgIGlmIChoZWFkZXJUZXh0ID09PSAnQ1cnKSB7XG4gICAgICAgICAgICAgICAgdGguc3R5bGUuY29sb3IgPSB0aGlzLmdldFByZXZpZXdDb2xvcihzZXR0aW5ncywgaXNMaWdodCA/ICdkYXlIZWFkZXJGb250Q29sb3JMaWdodCcgOiAnZGF5SGVhZGVyRm9udENvbG9yRGFyaycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRm9yIHRoZSBTQVQgaGVhZGVyLCBjaGVjayBpZiBpdCBzaG91bGQgYmUgaGlnaGxpZ2h0ZWRcbiAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRlclRleHQgPT09ICdTQVQnICYmIHRoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCAnaGlnaGxpZ2h0VG9kYXlMYWJlbHMnLCB0cnVlKSAmJiB0aGlzLmdldFByZXZpZXdDb2xvcihzZXR0aW5ncywgJ2hpZ2hsaWdodFRvZGF5RGF5SGVhZGVyJywgdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aC5zdHlsZS5jb2xvciA9IHRoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCBpc0xpZ2h0ID8gJ3RvZGF5Q2lyY2xlQ29sb3JMaWdodCcgOiAndG9kYXlDaXJjbGVDb2xvckRhcmsnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZvciBhbGwgb3RoZXIgaGVhZGVycywgdXNlIHRoZSBzdGFuZGFyZCBkYXkgY29sb3JcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoLnN0eWxlLmNvbG9yID0gdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsIGlzTGlnaHQgPyAnZGF5SGVhZGVyRm9udENvbG9yTGlnaHQnIDogJ2RheUhlYWRlckZvbnRDb2xvckRhcmsnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gLS0tIFRhYmxlIEJvZHkgKHRib2R5KSAtLS1cbiAgICAgICAgY29uc3QgdGJvZHkgPSB0YWJsZS5jcmVhdGVFbCgndGJvZHknKTtcbiAgICAgICAgY29uc3QgYm9keVJvdyA9IHRib2R5LmNyZWF0ZUVsKCd0cicpO1xuXG4gICAgICAgIC8vIC0tLSAxLiBEZWZpbmUgQWxsIERvdCBDb2xvcnMgLS0tXG4gICAgICAgIGNvbnN0IGRheURvdENvbG9ycyA9IFtcbiAgICAgICAgICAgIHRoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCAnZGFpbHlOb3RlRG90Q29sb3InLCAnIzRhOTBlMicpLFxuICAgICAgICAgICAgdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsICdub3RlQ3JlYXRlZENvbG9yJywgJyM0Y2FmNTAnKSxcbiAgICAgICAgICAgIHRoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCAnbm90ZU1vZGlmaWVkQ29sb3InLCAnI2ZmOTgwMCcpLFxuICAgICAgICAgICAgdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsICdhc3NldERvdENvbG9yJywgJyNmZjAwMDAnKSxcbiAgICAgICAgICAgIHRoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCAnY2FsZW5kYXJFdmVudERvdENvbG9yJywgJyNjODY0YzgnKSxcbiAgICAgICAgICAgIHRoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCAndGFza0RvdENvbG9yJywgJyM4MDEyOEQnKVxuICAgICAgICBdO1xuXG4gICAgICAgIC8vIC0tLSAyLiBDcmVhdGUgdGhlICdDVycgY2VsbCAoVGhpcyB3YXMgdGhlIG1pc3NpbmcgcGFydCkgLS0tXG4gICAgICAgIGNvbnN0IGN3Q2VsbCA9IGJvZHlSb3cuY3JlYXRlRWwoJ3RkJyk7XG4gICAgICAgIGNvbnN0IGN3Q29udGVudCA9IGN3Q2VsbC5jcmVhdGVEaXYoeyBjbHM6ICdwcmV2aWV3LWRheS1jb250ZW50JyB9KTtcbiAgICAgICAgY29uc3QgY3dOdW1iZXIgPSBjd0NvbnRlbnQuY3JlYXRlRGl2KHsgdGV4dDogJzQyJywgY2xzOiAncHJldmlldy1kYXktbnVtYmVyJyB9KTtcblxuICAgICAgICAvLyBTdHlsZSB0aGUgd2VlayBudW1iZXIgYmFzZWQgb24gdGhlbWUgc2V0dGluZ3NcbiAgICAgICAgaWYgKHRoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCAnaGlnaGxpZ2h0VG9kYXlMYWJlbHMnLCB0cnVlKSAmJiB0aGlzLmdldFByZXZpZXdDb2xvcihzZXR0aW5ncywgJ2hpZ2hsaWdodFRvZGF5UFdMYWJlbCcsIHRydWUpKSB7XG4gICAgICAgICAgICBjd051bWJlci5zdHlsZS5jb2xvciA9IHRoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCBpc0xpZ2h0ID8gJ3RvZGF5Q2lyY2xlQ29sb3JMaWdodCcgOiAndG9kYXlDaXJjbGVDb2xvckRhcmsnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN3TnVtYmVyLnN0eWxlLmNvbG9yID0gdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsIGlzTGlnaHQgPyAnd2Vla051bWJlckZvbnRDb2xvckxpZ2h0JyA6ICd3ZWVrTnVtYmVyRm9udENvbG9yRGFyaycpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIHRoZSBleGNsdXNpdmUgd2Vla2x5IG5vdGUgZG90IHRvIHRoZSBDVyBjb2x1bW5cbiAgICAgICAgaWYgKHRoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCAnc2hvd1dlZWtseU5vdGVEb3QnLCB0cnVlKSkge1xuICAgICAgICAgICAgY29uc3Qgd2Vla2x5RG90c0NvbnRhaW5lciA9IGN3Q29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdwcmV2aWV3LWRvdHMtY29udGFpbmVyJyB9KTtcbiAgICAgICAgICAgIGNvbnN0IHdlZWtseU5vdGVEb3QgPSB3ZWVrbHlEb3RzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3ByZXZpZXctZG90JyB9KTtcbiAgICAgICAgICAgIHdlZWtseU5vdGVEb3Quc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsICd3ZWVrbHlOb3RlRG90Q29sb3InLCAnI2EwNzNmMCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIDMuIENyZWF0ZSB0aGUgRGF5IENlbGxzIChTdW5kYXkgdG8gU2F0dXJkYXkpIC0tLVxuICAgICAgICBjb25zdCBkb3REaXN0cmlidXRpb24gPSBuZXcgTWFwKFtcbiAgICAgICAgICAgIFs1LCBbZGF5RG90Q29sb3JzWzFdXV0sXG4gICAgICAgICAgICBbNiwgZGF5RG90Q29sb3JzXSxcbiAgICAgICAgICAgIFs3LCBbZGF5RG90Q29sb3JzWzJdXV0sXG4gICAgICAgICAgICBbOCwgW2RheURvdENvbG9yc1swXSwgZGF5RG90Q29sb3JzWzFdXV0sXG4gICAgICAgICAgICBbOSwgW2RheURvdENvbG9yc1sxXSwgZGF5RG90Q29sb3JzWzJdLCBkYXlEb3RDb2xvcnNbM11dXSxcbiAgICAgICAgICAgIFsxMCwgW2RheURvdENvbG9yc1szXSwgZGF5RG90Q29sb3JzWzRdXV0sXG4gICAgICAgICAgICBbMTEsIFtkYXlEb3RDb2xvcnNbMV0sIGRheURvdENvbG9yc1syXV1dXG4gICAgICAgIF0pO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSA1OyBpIDw9IDExOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHRkID0gYm9keVJvdy5jcmVhdGVFbCgndGQnKTtcbiAgICAgICAgICAgIGNvbnN0IGRheUNvbnRlbnQgPSB0ZC5jcmVhdGVEaXYoeyBjbHM6ICdwcmV2aWV3LWRheS1jb250ZW50JyB9KTtcbiAgICAgICAgICAgIGNvbnN0IGRheU51bWJlciA9IGRheUNvbnRlbnQuY3JlYXRlRGl2KHsgdGV4dDogaS50b1N0cmluZygpLCBjbHM6ICdwcmV2aWV3LWRheS1udW1iZXInIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBkb3RzVG9TaG93ID0gZG90RGlzdHJpYnV0aW9uLmdldChpKTtcbiAgICAgICAgICAgIGlmIChkb3RzVG9TaG93ICYmIGRvdHNUb1Nob3cubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRvdHNDb250YWluZXIgPSBkYXlDb250ZW50LmNyZWF0ZURpdih7IGNsczogJ3ByZXZpZXctZG90cy1jb250YWluZXInIH0pO1xuICAgICAgICAgICAgICAgIGRvdHNUb1Nob3cuZm9yRWFjaChjb2xvciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRvdCA9IGRvdHNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncHJldmlldy1kb3QnIH0pO1xuICAgICAgICAgICAgICAgICAgICBkb3Quc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3I7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpID09PSAxMSkge1xuICAgICAgICAgICAgICAgIGRheU51bWJlci5hZGRDbGFzcygndG9kYXknKTtcbiAgICAgICAgICAgICAgICBkYXlOdW1iZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsIGlzTGlnaHQgPyAndG9kYXlDaXJjbGVDb2xvckxpZ2h0JyA6ICd0b2RheUNpcmNsZUNvbG9yRGFyaycpO1xuICAgICAgICAgICAgICAgIGRheU51bWJlci5zdHlsZS5jb2xvciA9IHRoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCBpc0xpZ2h0ID8gJ3RvZGF5Q2lyY2xlVGV4dENvbG9yTGlnaHQnIDogJ3RvZGF5Q2lyY2xlVGV4dENvbG9yRGFyaycsICcjMDAwMDAwJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRheU51bWJlci5zdHlsZS5jb2xvciA9IHRoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCBpc0xpZ2h0ID8gJ2RheUNlbGxGb250Q29sb3JMaWdodCcgOiAnZGF5Q2VsbEZvbnRDb2xvckRhcmsnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRhc2tzV3JhcHBlciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IGBwcmV2aWV3LXNlY3Rpb24td3JhcHBlciAke21vZGV9YCB9KTtcbiAgICAgICAgdGFza3NXcmFwcGVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGlzTGlnaHQgPyAoc2V0dGluZ3MuYmFja2dyb3VuZENvbG9yTGlnaHQgfHwgJyNmNWY1ZjUnKSA6IChzZXR0aW5ncy5iYWNrZ3JvdW5kQ29sb3JEYXJrIHx8ICcjMmEyYTJhJyk7XG5cbiAgICAgICAgY29uc3QgdGFza0dyb3VwcyA9IFtcbiAgICAgICAgICAgIHsgbmFtZTogXCJPdmVyZHVlXCIsIGNvbG9yS2V5OiBcInRhc2tHcm91cENvbG9yT3ZlcmR1ZVwiLCBjb3VudDogMiwgaWNvbjogXCJhbGFybS1jbG9jay1vZmZcIiB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcIlRvZGF5XCIsIGNvbG9yS2V5OiBcInRhc2tHcm91cENvbG9yVG9kYXlcIiwgY291bnQ6IDMsIGljb246IFwidGFyZ2V0XCIgfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJUb21vcnJvd1wiLCBjb2xvcktleTogXCJ0YXNrR3JvdXBDb2xvclRvbW9ycm93XCIsIGNvdW50OiAxLCBpY29uOiBcImNhbGVuZGFyLWRheXNcIiB9LCAvLyBcIlRvbW9ycm93XCIgbWFwcyB0byBcIk5leHQgNyBEYXlzXCIgaWNvblxuICAgICAgICAgICAgeyBuYW1lOiBcIkZ1dHVyZVwiLCBjb2xvcktleTogXCJ0YXNrR3JvdXBDb2xvckZ1dHVyZVwiLCBjb3VudDogNSwgaWNvbjogXCJ0ZWxlc2NvcGVcIiB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcIk5vIERhdGVcIiwgY29sb3JLZXk6IFwidGFza0dyb3VwQ29sb3JOb0RhdGVcIiwgY291bnQ6IDQsIGljb246IFwiaGVscC1jaXJjbGVcIiB9XG4gICAgICAgIF07XG5cblxuICAgICAgICB0YXNrR3JvdXBzLmZvckVhY2goZ3JvdXAgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFza0dyb3VwRWwgPSB0YXNrc1dyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiAncHJldmlldy10YXNrLWdyb3VwJyB9KTtcbiAgICAgICAgICAgIHRhc2tHcm91cEVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCBncm91cC5jb2xvcktleSk7XG5cbiAgICAgICAgICAgIC8vIFRoaXMgd3JhcHBlciBrZWVwcyB0aGUgaWNvbiBhbmQgdGl0bGUgdG9nZXRoZXIgb24gdGhlIGxlZnRcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRXcmFwcGVyID0gdGFza0dyb3VwRWwuY3JlYXRlRGl2KHsgY2xzOiAncHJldmlldy10YXNrLWNvbnRlbnQtd3JhcHBlcicgfSk7XG5cbiAgICAgICAgICAgIC8vIEFkZCB0aGUgZ3JvdXAncyBtYWluIGljb24gKGUuZy4sIHRhcmdldCwgdGVsZXNjb3BlKVxuICAgICAgICAgICAgY29uc3QgaWNvbkVsID0gY29udGVudFdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiAncHJldmlldy10YXNrLWljb24nIH0pO1xuICAgICAgICAgICAgc2V0SWNvbihpY29uRWwsIGdyb3VwLmljb24pO1xuXG4gICAgICAgICAgICAvLyBUaGUgdGV4dCBub3cgYmVjb21lcyBcIk92ZXJkdWUgKDIpXCIsIFwiVG9kYXkgKDMpXCIsIGV0Yy5cbiAgICAgICAgICAgIGNvbnN0IHRpdGxlU3BhbiA9IGNvbnRlbnRXcmFwcGVyLmNyZWF0ZVNwYW4oe1xuICAgICAgICAgICAgICAgIHRleHQ6IGAke2dyb3VwLm5hbWV9ICgke2dyb3VwLmNvdW50fSlgLFxuICAgICAgICAgICAgICAgIGNsczogJ3ByZXZpZXctdGFzay10aXRsZSdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBjb2xsYXBzZUljb25FbCA9IHRhc2tHcm91cEVsLmNyZWF0ZURpdih7IGNsczogJ3ByZXZpZXctY29sbGFwc2UtaWNvbicgfSk7XG4gICAgICAgICAgICBzZXRJY29uKGNvbGxhcHNlSWNvbkVsLCAnY2hldnJvbi11cCcpOyBcblxuICAgICAgICAgICAgLy8gU2V0IHRoZSB0ZXh0IGNvbG9yIGZvciBhbGwgZWxlbWVudHMgaW5zaWRlIHRoZSBncm91cFxuICAgICAgICAgICAgY29uc3QgdGV4dENvbG9yID0gdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsIGlzTGlnaHQgPyAndGFza0dyb3VwVGV4dENvbG9yTGlnaHQnIDogJ3Rhc2tHcm91cFRleHRDb2xvckRhcmsnKTtcbiAgICAgICAgICAgIGNvbnRlbnRXcmFwcGVyLnN0eWxlLmNvbG9yID0gdGV4dENvbG9yO1xuICAgICAgICAgICAgY29sbGFwc2VJY29uRWwuc3R5bGUuY29sb3IgPSB0ZXh0Q29sb3I7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy8gLS0tIDMuIENyZWF0ZSB0aGUgRG90IENvbG9yIEtleSAtLS1cbiAgICAgICAgY29uc3Qga2V5Q29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3ByZXZpZXctZG90LWtleS1jb250YWluZXInIH0pO1xuICAgICAgICBrZXlDb250YWluZXIuY3JlYXRlRWwoJ2g1JywgeyB0ZXh0OiAnQ2FsZW5kYXIgR3JpZCBEb3QgQ29sb3IgS2V5JyB9KTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBtYXBwaW5nIG9mIHRoZSBkb3QgY29sb3JzIHRvIHRoZWlyIG5hbWVzXG4gICAgICAgIGNvbnN0IGRvdEtleU1hcCA9IG5ldyBNYXAoW1xuICAgICAgICAgICAgW3RoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCAnd2Vla2x5Tm90ZURvdENvbG9yJywgJyNhMDczZjAnKSwgJ1dlZWtseSBOb3RlJ10sXG4gICAgICAgICAgICBbdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsICdkYWlseU5vdGVEb3RDb2xvcicsICcjNGE5MGUyJyksICdEYWlseSBOb3RlJ10sXG4gICAgICAgICAgICBbdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsICdub3RlQ3JlYXRlZENvbG9yJywgJyM0Y2FmNTAnKSwgJ0NyZWF0ZWQgTm90ZSddLFxuICAgICAgICAgICAgW3RoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCAnbm90ZU1vZGlmaWVkQ29sb3InLCAnI2ZmOTgwMCcpLCAnTW9kaWZpZWQgTm90ZSddLFxuICAgICAgICAgICAgW3RoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCAnYXNzZXREb3RDb2xvcicsICcjZmYwMDAwJyksICdBc3NldCddLFxuICAgICAgICAgICAgW3RoaXMuZ2V0UHJldmlld0NvbG9yKHNldHRpbmdzLCAnY2FsZW5kYXJFdmVudERvdENvbG9yJywgJyNjODY0YzgnKSwgJ0V2ZW50J10sXG4gICAgICAgICAgICBbdGhpcy5nZXRQcmV2aWV3Q29sb3Ioc2V0dGluZ3MsICd0YXNrRG90Q29sb3InLCAnIzgwMTI4RCcpLCAnVGFzayddXG4gICAgICAgIF0pO1xuXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCB0aGUgbWFwIGFuZCBjcmVhdGUgYSBrZXkgaXRlbSBmb3IgZWFjaCBkb3QgdHlwZVxuICAgICAgICBmb3IgKGNvbnN0IFtjb2xvciwgbmFtZV0gb2YgZG90S2V5TWFwLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3Qga2V5SXRlbSA9IGtleUNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdwcmV2aWV3LWRvdC1rZXktaXRlbScgfSk7XG4gICAgICAgICAgICBjb25zdCBrZXlEb3QgPSBrZXlJdGVtLmNyZWF0ZURpdih7IGNsczogJ3ByZXZpZXctZG90LWtleS1zd2F0Y2gnIH0pO1xuICAgICAgICAgICAga2V5RG90LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yO1xuICAgICAgICAgICAga2V5SXRlbS5jcmVhdGVTcGFuKHsgdGV4dDogbmFtZSB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlckltcG9ydEV4cG9ydFRhYigpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyRWwgPSB0aGlzLmNvbnRlbnRFbDtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiSW1wb3J0ICYgRXhwb3J0IFNldHRpbmdzXCIgfSk7XG5cbiAgICAgICAgLy8gLS0tIEVYUE9SVCAtLS1cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkV4cG9ydCBTZXR0aW5nc1wiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJTYXZlIHlvdXIgcGx1Z2luIHNldHRpbmdzIHRvIGEgSlNPTiBmaWxlLiBUd28gb3B0aW9uczogYWxsIHBsdWdpbiBzZXR0aW5ncyBvciB0aGVtZSBzZXR0aW5zIG9ubHkuIFRoaXMgaXMgdXNlZnVsIGZvciBiYWNraW5nIHVwIGFsbCB5b3VyIHNldHRpbmdzIG9yIHNoYXJpbmcgeW91ciB0aGVtZSBjb25maWd1cmF0aW9uIHdpdGggb3RoZXJzLlwiKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkV4cG9ydCBBbGwgU2V0dGluZ3NcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJzYXZlXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKFwiU2F2ZSBhbGwgcGx1Z2luIHNldHRpbmdzIHRvIGEgZmlsZVwiKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLmhhbmRsZUV4cG9ydCgnYWxsJykpO1xuXG4gICAgICAgICAgICAgICAgYnV0dG9uLmJ1dHRvbkVsLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICAgICAgYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiRXhwb3J0IFRoZW1lIE9ubHlcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJwYWxldHRlXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKFwiU2F2ZSBvbmx5IGNvbG9ycywgZm9udHMsIGFuZCBzaXplcyB0byBhIHRoZW1lIGZpbGVcIilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5oYW5kbGVFeHBvcnQoJ3RoZW1lJykpO1xuXG4gICAgICAgICAgICAgICAgYnV0dG9uLmJ1dHRvbkVsLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIC0tLSBJTVBPUlQgLS0tXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJJbXBvcnQgU2V0dGluZ3NcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiTG9hZCBzZXR0aW5ncyBmcm9tIGEgSlNPTiBmaWxlLiBUaGlzIHdpbGwgb3ZlcndyaXRlIHlvdXIgY3VycmVudCBzZXR0aW5ncyBhZnRlciBjb25maXJtYXRpb24uXCIpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICAgICAgYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiSW1wb3J0IGZyb20gRmlsZVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcInVwbG9hZFwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcChcIkxvYWQgc2V0dGluZ3MgZnJvbSBhIC5qc29uIGZpbGVcIilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZUlucHV0ID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaWxlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdDogJy5qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6ICdkaXNwbGF5OiBub25lOydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVJbXBvcnQoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVJbnB1dC5jbGljaygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGJ1dHRvbi5idXR0b25FbC5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSBleHBvcnQgZnVuY3Rpb25hbGl0eS5cbiAgICAgKiBAcGFyYW0geydhbGwnIHwgJ3RoZW1lJ30gdHlwZSBUaGUgdHlwZSBvZiBleHBvcnQgdG8gcGVyZm9ybS5cbiAgICAgKi9cbiAgICBoYW5kbGVFeHBvcnQodHlwZSkge1xuICAgICAgICBsZXQgc2V0dGluZ3NUb0V4cG9ydDtcbiAgICAgICAgbGV0IGZpbGVOYW1lO1xuXG4gICAgICAgIGlmICh0eXBlID09PSAndGhlbWUnKSB7XG4gICAgICAgICAgICBjb25zdCB0aGVtZUtleXMgPSBbXG4gICAgICAgICAgICAgICAgLy8gR2VuZXJhbCBhcHBlYXJhbmNlIHNldHRpbmdzXG4gICAgICAgICAgICAgICAgXCJmb250U2l6ZVwiLFxuICAgICAgICAgICAgICAgIFwiZGF5TnVtYmVyRm9udFNpemVcIixcbiAgICAgICAgICAgICAgICBcIm5hdkJ1dHRvbkhlaWdodFwiLFxuICAgICAgICAgICAgICAgIFwiaGVhZGVyUm93Qm9sZFwiLFxuICAgICAgICAgICAgICAgIFwicHdDb2x1bW5Cb2xkXCIsXG4gICAgICAgICAgICAgICAgXCJwd0NvbHVtblNlcGFyYXRvckNvbG9yXCIsXG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgYWxsIHRoZSBmb250IGNvbG9yIHNldHRpbmdzXG4gICAgICAgICAgICAgICAgXCJwd0NvbHVtbkZvbnRDb2xvckxpZ2h0XCIsXG4gICAgICAgICAgICAgICAgXCJwd0NvbHVtbkZvbnRDb2xvckRhcmtcIixcbiAgICAgICAgICAgICAgICBcIndlZWtOdW1iZXJGb250Q29sb3JMaWdodFwiLFxuICAgICAgICAgICAgICAgIFwid2Vla051bWJlckZvbnRDb2xvckRhcmtcIixcbiAgICAgICAgICAgICAgICBcImRheUhlYWRlckZvbnRDb2xvckxpZ2h0XCIsXG4gICAgICAgICAgICAgICAgXCJkYXlIZWFkZXJGb250Q29sb3JEYXJrXCIsXG4gICAgICAgICAgICAgICAgXCJkYXlDZWxsRm9udENvbG9yTGlnaHRcIixcbiAgICAgICAgICAgICAgICBcImRheUNlbGxGb250Q29sb3JEYXJrXCIsXG4gICAgICAgICAgICAgICAgXCJvdGhlck1vbnRoRm9udENvbG9yTGlnaHRcIixcbiAgICAgICAgICAgICAgICBcIm90aGVyTW9udGhGb250Q29sb3JEYXJrXCIsXG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGhpZ2hsaWdodCB0b2dnbGVzXG4gICAgICAgICAgICAgICAgXCJoaWdobGlnaHRUb2RheURheUhlYWRlclwiLFxuICAgICAgICAgICAgICAgIFwiaGlnaGxpZ2h0VG9kYXlQV0xhYmVsXCIsXG4gICAgICAgICAgICAgICAgXCJ0b2RheUhpZ2hsaWdodFNpemVcIixcblxuICAgICAgICAgICAgICAgIFwiY3VycmVudEhpZ2hsaWdodExhYmVsQ29sb3JMaWdodFwiLFxuICAgICAgICAgICAgICAgIFwiY3VycmVudEhpZ2hsaWdodExhYmVsQ29sb3JEYXJrXCIsXG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgYWxsIHRoZSBoaWdobGlnaHQgY29sb3Igc2V0dGluZ3NcbiAgICAgICAgICAgICAgICBcIm1vbnRoQ29sb3JMaWdodFwiLFxuICAgICAgICAgICAgICAgIFwibW9udGhDb2xvckRhcmtcIixcbiAgICAgICAgICAgICAgICBcInllYXJDb2xvckxpZ2h0XCIsXG4gICAgICAgICAgICAgICAgXCJ5ZWFyQ29sb3JEYXJrXCIsXG5cbiAgICAgICAgICAgICAgICBcIm1haW5Nb250aFllYXJUaXRsZUZvbnRTaXplXCIsXG4gICAgICAgICAgICAgICAgXCJtYWluTW9udGhUaXRsZUJvbGRcIixcbiAgICAgICAgICAgICAgICBcIm1haW5ZZWFyVGl0bGVCb2xkXCIsXG5cbiAgICAgICAgICAgICAgICAvLyBPdGhlciBzZXR0aW5nc1xuICAgICAgICAgICAgICAgIFwidGFiVGl0bGVGb250U2l6ZVwiLFxuICAgICAgICAgICAgICAgIFwidGFiVGl0bGVCb2xkXCIsXG4gICAgICAgICAgICAgICAgXCJzZWxlY3RlZFRhYkNvbG9yXCIsXG4gICAgICAgICAgICAgICAgXCJ0b2RheUhpZ2hsaWdodENvbG9yTGlnaHRcIixcbiAgICAgICAgICAgICAgICBcInRvZGF5SGlnaGxpZ2h0Q29sb3JEYXJrXCIsXG4gICAgICAgICAgICAgICAgXCJub3Rlc0hvdmVyQ29sb3JcIixcbiAgICAgICAgICAgICAgICBcImRhaWx5Tm90ZURvdENvbG9yXCIsXG4gICAgICAgICAgICAgICAgXCJub3RlQ3JlYXRlZENvbG9yXCIsXG4gICAgICAgICAgICAgICAgXCJub3RlTW9kaWZpZWRDb2xvclwiLFxuICAgICAgICAgICAgICAgIFwicm93SGlnaGxpZ2h0Q29sb3JMaWdodFwiLFxuICAgICAgICAgICAgICAgIFwicm93SGlnaGxpZ2h0Q29sb3JEYXJrXCIsXG4gICAgICAgICAgICAgICAgJ3dlZWtlbmRTaGFkZUNvbG9yTGlnaHQnLFxuICAgICAgICAgICAgICAgICd3ZWVrZW5kU2hhZGVDb2xvckRhcmsnLFxuICAgICAgICAgICAgICAgIFwiZGF0ZUNlbGxIb3ZlckNvbG9yTGlnaHRcIixcbiAgICAgICAgICAgICAgICBcImRhdGVDZWxsSG92ZXJDb2xvckRhcmtcIixcbiAgICAgICAgICAgICAgICBcImFzc2V0RG90Q29sb3JcIixcbiAgICAgICAgICAgICAgICBcImNhbGVuZGFyRXZlbnREb3RDb2xvclwiLFxuICAgICAgICAgICAgICAgIFwidG9kYXlIaWdobGlnaHRTdHlsZVwiLFxuICAgICAgICAgICAgICAgIFwidG9kYXlDaXJjbGVDb2xvckxpZ2h0XCIsXG4gICAgICAgICAgICAgICAgXCJ0b2RheUNpcmNsZUNvbG9yRGFya1wiLFxuICAgICAgICAgICAgICAgIFwid2Vla2x5Tm90ZURvdENvbG9yXCIsXG4gICAgICAgICAgICAgICAgXCJzY3JhdGNoRm9udFNpemVcIixcbiAgICAgICAgICAgICAgICBcInNjcmF0Y2hCb2xkXCIsXG4gICAgICAgICAgICAgICAgXCJzY3JhdGNoRm9udEZhbWlseVwiLFxuICAgICAgICAgICAgICAgIFwic2NyYXRjaHBhZEhpZ2hsaWdodENvbG9yXCIsXG4gICAgICAgICAgICAgICAgXCJub3Rlc0ZvbnRTaXplXCIsXG4gICAgICAgICAgICAgICAgXCJub3Rlc0JvbGRcIixcbiAgICAgICAgICAgICAgICBcIm5vdGVzTGluZUhlaWdodFwiLFxuICAgICAgICAgICAgICAgIFwic2hvd05vdGVTdGF0dXNEb3RzXCIsXG4gICAgICAgICAgICAgICAgXCJvdGhlck5vdGVQb3B1cEZvbnRTaXplXCIsXG4gICAgICAgICAgICAgICAgXCJjYWxlbmRhckRvdFNpemVcIixcbiAgICAgICAgICAgICAgICAvLyBUYXNrIHNldHRpbmdzXG4gICAgICAgICAgICAgICAgXCJ0YXNrSW5kaWNhdG9yU3R5bGVcIixcbiAgICAgICAgICAgICAgICBcInRhc2tEb3RDb2xvclwiLFxuICAgICAgICAgICAgICAgIFwidGFza0JhZGdlRm9udFNpemVcIixcbiAgICAgICAgICAgICAgICBcInRhc2tCYWRnZUNvbG9yXCIsXG4gICAgICAgICAgICAgICAgXCJ0YXNrQmFkZ2VGb250Q29sb3JcIixcbiAgICAgICAgICAgICAgICBcInRhc2tIZWF0bWFwU3RhcnRDb2xvclwiLFxuICAgICAgICAgICAgICAgIFwidGFza0hlYXRtYXBNaWRDb2xvclwiLFxuICAgICAgICAgICAgICAgIFwidGFza0hlYXRtYXBFbmRDb2xvclwiLFxuICAgICAgICAgICAgICAgIFwidGFza0hlYWRpbmdGb250U2l6ZVwiLFxuICAgICAgICAgICAgICAgIFwidGFza1RleHRGb250U2l6ZVwiLFxuICAgICAgICAgICAgICAgIFwidGFza0dyb3VwQ29sb3JPdmVyZHVlXCIsXG4gICAgICAgICAgICAgICAgXCJ0YXNrR3JvdXBDb2xvclRvZGF5XCIsXG4gICAgICAgICAgICAgICAgXCJ0YXNrR3JvdXBDb2xvclRvbW9ycm93XCIsXG4gICAgICAgICAgICAgICAgXCJ0YXNrR3JvdXBDb2xvck5leHQ3RGF5c1wiLFxuICAgICAgICAgICAgICAgIFwidGFza0dyb3VwQ29sb3JGdXR1cmVcIixcbiAgICAgICAgICAgICAgICBcInRhc2tHcm91cENvbG9yTm9EYXRlXCIsXG4gICAgICAgICAgICAgICAgXCJ0YXNrR3JvdXBDb2xvclRhZ1wiXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgc2V0dGluZ3NUb0V4cG9ydCA9IHt9O1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdGhlbWVLZXlzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NUb0V4cG9ydFtrZXldID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Nba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBBZGQgdGhlIHRoZW1lLXNwZWNpZmljIGlkZW50aWZpZXJcbiAgICAgICAgICAgIHNldHRpbmdzVG9FeHBvcnQuX19leHBvcnRUeXBlID0gXCJ0aGVtZVwiO1xuICAgICAgICAgICAgZmlsZU5hbWUgPSBgY2FsZW5kYXItcGVyaW9kLXdlZWstbm90ZXMtdGhlbWUuanNvbmA7XG5cbiAgICAgICAgfSBlbHNlIHsgLy8gJ2FsbCdcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIGNvcHkgdG8gYXZvaWQgbW9kaWZ5aW5nIHRoZSBsaXZlIHNldHRpbmdzIG9iamVjdFxuICAgICAgICAgICAgc2V0dGluZ3NUb0V4cG9ydCA9IHsgLi4udGhpcy5wbHVnaW4uc2V0dGluZ3MgfTtcbiAgICAgICAgICAgIC8vIEFkZCB0aGUgJ2FsbCcgc2V0dGluZ3MgaWRlbnRpZmllclxuICAgICAgICAgICAgc2V0dGluZ3NUb0V4cG9ydC5fX2V4cG9ydFR5cGUgPSBcImFsbFwiO1xuICAgICAgICAgICAgZmlsZU5hbWUgPSBgY2FsZW5kYXItcGVyaW9kLXdlZWstbm90ZXMtc2V0dGluZ3MuanNvbmA7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5zdHJpbmdpZnkoc2V0dGluZ3NUb0V4cG9ydCwgbnVsbCwgMik7XG4gICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbZGF0YV0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nIH0pO1xuICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICBhLmhyZWYgPSB1cmw7XG4gICAgICAgIGEuZG93bmxvYWQgPSBmaWxlTmFtZTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTtcbiAgICAgICAgYS5jbGljaygpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpO1xuICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG5cbiAgICAgICAgbmV3IE5vdGljZShgJHt0eXBlID09PSAndGhlbWUnID8gJ1RoZW1lJyA6ICdBbGwnfSBzZXR0aW5ncyBleHBvcnRlZC5gKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSBpbXBvcnQgZnVuY3Rpb25hbGl0eS5cbiAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgVGhlIEpTT04gZmlsZSBzZWxlY3RlZCBieSB0aGUgdXNlci5cbiAgICAgKi9cbiAgICBoYW5kbGVJbXBvcnQoZmlsZSkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICByZWFkZXIub25sb2FkID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGltcG9ydGVkU2V0dGluZ3MgPSBKU09OLnBhcnNlKGV2ZW50LnRhcmdldC5yZXN1bHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cG9ydFR5cGUgPSBpbXBvcnRlZFNldHRpbmdzLl9fZXhwb3J0VHlwZTtcblxuICAgICAgICAgICAgICAgIC8vIERlZmluZSBkZWZhdWx0L2ZhbGxiYWNrIG1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgbGV0IHRpdGxlID0gJ092ZXJ3cml0ZSBTZXR0aW5ncz8nO1xuICAgICAgICAgICAgICAgIGxldCBtZXNzYWdlID0gJ1RoaXMgYXBwZWFycyB0byBiZSBhbiBvbGRlciBzZXR0aW5ncyBmaWxlLiBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gaW1wb3J0IGl0PyBZb3VyIGN1cnJlbnQgY29uZmlndXJhdGlvbiB3aWxsIGJlIG92ZXJ3cml0dGVuLic7XG4gICAgICAgICAgICAgICAgbGV0IGNvbmZpcm1UZXh0ID0gJ0ltcG9ydCc7XG5cbiAgICAgICAgICAgICAgICAvLyBDdXN0b21pemUgbWVzc2FnZXMgYmFzZWQgb24gdGhlIGV4cG9ydCB0eXBlXG4gICAgICAgICAgICAgICAgaWYgKGV4cG9ydFR5cGUgPT09ICd0aGVtZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSAnSW1wb3J0IFRoZW1lIFNldHRpbmdzPyc7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAnWW91IGFyZSBhYm91dCB0byBpbXBvcnQgYSB0aGVtZSBmaWxlLiBUaGlzIHdpbGwgb3ZlcndyaXRlIG9ubHkgeW91ciBjdXJyZW50IGFwcGVhcmFuY2Ugc2V0dGluZ3MgKGNvbG9ycywgZm9udHMsIGV0Yy4pLic7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpcm1UZXh0ID0gJ0ltcG9ydCBUaGVtZSc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChleHBvcnRUeXBlID09PSAnYWxsJykge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZSA9ICdJbXBvcnQgQWxsIFNldHRpbmdzPyc7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAnWW91IGFyZSBhYm91dCB0byBpbXBvcnQgYSBmdWxsIHNldHRpbmdzIGZpbGUuIFRoaXMgd2lsbCBvdmVyd3JpdGUgeW91ciBFTlRJUkUgY3VycmVudCBjb25maWd1cmF0aW9uIGZvciB0aGlzIHBsdWdpbi4nO1xuICAgICAgICAgICAgICAgICAgICBjb25maXJtVGV4dCA9ICdJbXBvcnQgQWxsJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBCYXNpYyB2YWxpZGF0aW9uIGZvciBvbGQgZmlsZXMgd2l0aG91dCBhbiBpZGVudGlmaWVyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaW1wb3J0ZWRTZXR0aW5ncy5oYXNPd25Qcm9wZXJ0eSgnZm9udFNpemUnKSAmJiAhaW1wb3J0ZWRTZXR0aW5ncy5oYXNPd25Qcm9wZXJ0eSgnZml4ZWROb3RlRmlsZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdFcnJvcjogVGhpcyBkb2VzIG5vdCBhcHBlYXIgdG8gYmUgYSB2YWxpZCBzZXR0aW5ncyBmaWxlLicsIDUwMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBpZGVudGlmaWVyIGJlZm9yZSBtZXJnaW5nIHNvIGl0J3Mgbm90IHNhdmVkIGludG8gdGhlIHBsdWdpbidzIGRhdGFcbiAgICAgICAgICAgICAgICBpZiAoZXhwb3J0VHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgaW1wb3J0ZWRTZXR0aW5ncy5fX2V4cG9ydFR5cGU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU2hvdyB0aGUgY29uZmlybWF0aW9uIG1vZGFsIHdpdGggdGhlIGFwcHJvcHJpYXRlIG1lc3NhZ2VcbiAgICAgICAgICAgICAgICBuZXcgQ29uZmlybWF0aW9uTW9kYWxXaXRoU3R5bGVzKHRoaXMuYXBwLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnBsdWdpbi5zZXR0aW5ncywgaW1wb3J0ZWRTZXR0aW5ncyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHBvcnRUeXBlID09PSAndGhlbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBwbGllZFRoZW1lID0gZmlsZS5uYW1lLnJlcGxhY2UoL1xcLmpzb24kLywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbmRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaERpc3BsYXkoKTsgLy8gUmUtcmVuZGVyIHRoZSBzZXR0aW5ncyB0YWJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1NldHRpbmdzIGltcG9ydGVkIHN1Y2Nlc3NmdWxseSEnKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlybVRleHQgLy8gVXNlIHRoZSBjdXN0b21pemVkIGJ1dHRvbiB0ZXh0XG4gICAgICAgICAgICAgICAgKS5vcGVuKCk7XG5cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdFcnJvcjogQ291bGQgbm90IHBhcnNlIHRoZSBKU09OIGZpbGUuIEVuc3VyZSBpdCBpcyBub3QgY29ycnVwdGVkLicsIDUwMDApO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gcGFyc2Ugc2V0dGluZ3MgSlNPTjpcIiwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpO1xuICAgIH1cblxuICAgIHJlbmRlckFib3V0VGFiKCkge1xuICAgICAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGVudEVsO1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJBYm91dCBDYWxlbmRhciBQZXJpb2QgV2VlayBOb3Rlc1wiIH0pO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XG4gICAgICAgICAgICB0ZXh0OiBcIlRoaXMgcGx1Z2luIHByb3ZpZGVzIHR3byBjb21wcmVoZW5zaXZlIGNhbGVuZGFyIHZpZXdzIHRvZ2V0aGVyIHdpdGggYW4gaW50ZWdyYXRlZCBwYW5lbCBjb250YWluaW5nIGEgc2NyYXRjaHBhZCBhcmVhLCBub3RlcywgdGFza3MsIGFuZCBhc3NldHMuXCJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlN1cHBvcnQgdGhlIERldmVsb3BlclwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJJZiB5b3UgZmluZCB0aGlzIHBsdWdpbiB1c2VmdWwsIHBsZWFzZSBjb25zaWRlciBzdXBwb3J0aW5nIGl0cyBkZXZlbG9wbWVudC4gSXQncyBncmVhdGx5IGFwcHJlY2lhdGVkIVwiKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIuKYlSBCdXkgTWUgYSBDb2ZmZWVcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoXCJodHRwczovL2J1eW1lYWNvZmZlZS5jb20vZmlrdGVcIilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRvIHJlcGxhY2UgXCJ5b3VyLXVzZXJuYW1lXCIgd2l0aCB5b3VyIGFjdHVhbCB1c2VybmFtZSFcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKFwiaHR0cHM6Ly9idXltZWFjb2ZmZWUuY29tL2Zpa3RlXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIG1ha2VzIHRoZSBidXR0b24gbW9yZSBwcm9taW5lbnRcbiAgICAgICAgICAgICAgICBidXR0b24uYnV0dG9uRWwuYWRkQ2xhc3MoJ21vZC1jdGEnKTtcbiAgICAgICAgICAgICAgICBidXR0b24uYnV0dG9uRWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNGRkREMDAnO1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5idXR0b25FbC5zdHlsZS5jb2xvciA9ICcjMDAwMDAwJztcbiAgICAgICAgICAgICAgICBidXR0b24uYnV0dG9uRWwuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgcmVuZGVyU3RhcnRIZXJlVGFiKCkge1xuICAgICAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGVudEVsO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIC8vIFdlIGFyZSBzZXR0aW5nIHRoZSBIVE1MIGRpcmVjdGx5IHRvIGJ5cGFzcyB0aGUgTWFya2Rvd25SZW5kZXJlciBhbmQgYXZvaWQgcGx1Z2luIGNvbmZsaWN0cy5cbiAgICAgICAgY29udGFpbmVyRWwuaW5uZXJIVE1MID0gYFxuICAgICAgICA8aDI+8J+agCBRdWljayBTdGFydDogSW5pdGlhbCBTZXR1cDwvaDI+XG4gICAgICAgIDxocj5cbiAgICAgICAgPHA+V2VsY29tZSwgdG8gZ2V0IHRoZSBtb3N0IG91dCBvZiB0aGlzIHBsdWdpbiwgaXQncyByZWNvbW1lbmRlZCB0byBjb25maWd1cmUgYSBmZXcga2V5IHNldHRpbmdzIHRvIG1hdGNoIHlvdXIgd29ya2Zsb3cuPC9wPlxuICAgICAgICA8aHI+XG4gICAgICAgIDxoMz4xLiBTZXQgVXAgWW91ciBTY3JhdGNocGFkIE5vdGU8L2gzPlxuICAgICAgICA8cD5UaGUgPHN0cm9uZz5TY3JhdGNocGFkPC9zdHJvbmc+IHRhYiBuZWVkcyB0byBwb2ludCB0byBhIG5vdGUgZmlsZSBpbiB5b3VyIHZhdWx0LiBCeSBkZWZhdWx0LCBpdCBsb29rcyBmb3IgPGNvZGU+U2NyYXRjaFBhZC5tZDwvY29kZT4gaW4geW91ciB2YXVsdCdzIHJvb3QuPC9wPlxuICAgICAgICA8dWw+XG4gICAgICAgICAgICA8bGk+PHN0cm9uZz5HbyB0bzo8L3N0cm9uZz4gXCJTY3JhdGNoUGFkIFRhYlwiIOKGkiBcIlNjcmF0Y2hQYWdlIG5vdGUgcGF0aFwiPjwvbGk+XG4gICAgICAgICAgICA8bGk+PHN0cm9uZz5BY3Rpb246PC9zdHJvbmc+IFNldCB0aGUgPHN0cm9uZz5TY3JhdGNoUGFkIG5vdGUgcGF0aDwvc3Ryb25nPiB0byBhbnkgbm90ZSB5b3UgcHJlZmVyLiBJZiBpdCBkb2Vzbid0IGV4aXN0LCB0aGUgcGx1Z2luIHdpbGwgY3JlYXRlIGl0IGZvciB5b3UuPC9saT5cbiAgICAgICAgPC91bD5cbiAgICAgICAgPGhyPlxuICAgICAgICA8aDM+Mi4gQ29uZmlndXJlIFlvdXIgRGFpbHkgTm90ZXM8L2gzPlxuICAgICAgICA8cD5Gb3IgY2FsZW5kYXIgYW5kIGxpc3QgZG90cyBhbmQgY2xpY2stdG8tb3BlbiBmZWF0dXJlcyB0byB3b3JrLCB0aGUgcGx1Z2luIG5lZWRzIHRvIGtub3cgd2hlcmUgeW91ciBkYWlseSBub3RlcyBhcmUuPC9wPlxuICAgICAgICA8dWw+XG4gICAgICAgICAgICA8bGk+PHN0cm9uZz5HbyB0bzo8L3N0cm9uZz4gXCJDYWxlbmRhciBGdW5jdGlvbmFsXCIg4oaSIFwiRGFpbHkgTm90ZXNcIjwvbGk+XG4gICAgICAgICAgICA8bGk+PHN0cm9uZz5BY3Rpb246PC9zdHJvbmc+IFNldCB5b3VyIDxzdHJvbmc+RGFpbHkgTm90ZXMgZm9sZGVyPC9zdHJvbmc+IGFuZCA8c3Ryb25nPkRhaWx5IG5vdGUgZm9ybWF0PC9zdHJvbmc+IHRvIG1hdGNoIHlvdXIgZXhpc3Rpbmcgc2V0dXAgKGUuZy4sIFlZWVktTU0tREQpLjwvbGk+XG4gICAgICAgIDwvdWw+XG4gICAgICAgIDxocj5cbiAgICAgICAgPGgzPjMuIERlZmluZSBZb3VyIFRhc2sgRm9ybWF0PC9oMz5cbiAgICAgICAgPHA+Rm9yIHRoZSBwbHVnaW4gdG8gcmVjb2duaXNlIHlvdXIgdGFzayBkdWUgZGF0ZXMsIHRoZXkgPHN0cm9uZz5tdXN0PC9zdHJvbmc+IHVzZSB0aGUgPGNvZGU+8J+ThTwvY29kZT4gZW1vamkgZm9yIGR1ZSBkYXRlcy4gRG93bmxvYWQgdGhlIFRhc2tzIHBsdWdpbiBmb3IgaW1wcm92ZWQgY29tcGF0aWJpbGl0eS4gVGhlIGZvbGxvd2luZyBleGFtcGxlcyBzaG93IHRoZSBmb3JtYXQgb2YgdGFza3MgdG8gYmUgdXNlZDo8L3A+XG4gICAgICAgIDxwPjxzdHJvbmc+RHVlIERhdGVzOjwvc3Ryb25nPjwvcD5cbiAgICAgICAgPHByZT4tIFsgXSBNeSB0YXNrIHdpdGggYSBkdWUgZGF0ZSDwn5OFIDIwMjUtMTAtMjY8L3ByZT5cbiAgICAgICAgPHByZT4tIFsgXSBSZXZpZXcgcHJvamVjdCBub3RlcyAjd29yayDwn5OFIDIwMjUtMTEtMDE8L2NvZGU+PC9wcmU+XG4gICAgICAgIDxwPjxzdHJvbmc+Q29tcGxldGlvbiBEYXRlczo8L3N0cm9uZz48L3A+XG4gICAgICAgIDxwcmU+LSBbeF0gTXkgY29tcGxldGVkIHRhc2sg8J+ThSAyMDI1LTEwLTI2IOKchSAyMDI1LTA5LTE5PC9wcmU+XG4gICAgICAgIDxwPk5PVEU6IElmIHlvdSBkbyBub3QgdXNlIHRoaXMgVGFzayBmb3JtYXQgdGhlbiB5b3UgY2FuIHRvZ2dsZSBvZmYgdGhlIFRhc2tzIFRhYiBpbiB0aGUgXCJHZW5lcmFsIFRhYlwiIOKGkiBcIlRhYiBWaXNpYmlsaXR5XCIgc2VjdGlvbi48L3A+XG4gICAgICAgIDxocj5cbiAgICAgICAgPGgzPjQuIChPcHRpb25hbCkgU2V0IFlvdXIgUGVyaW9kL1dlZWsgU3RhcnQgRGF0ZTwvaDM+XG4gICAgICAgIDxwPklmIHlvdSBwbGFuIHRvIHVzZSB0aGUgY3VzdG9tIFBlcmlvZC9XZWVrIGNhbGVuZGFyIHN5c3RlbSAoZS5nLiwgXCJQN1c0XCIpLCB5b3Ugc2hvdWxkIHNldCBpdHMgc3RhcnRpbmcgZGF0ZS4gVGhlIHBlcmlvZC93ZWVrIGNhbGVuZGFyIHN5c3RlbSwgdXNlZCBieSBzb21lIGNvbXBhbmllcyBmb3IgZmluYW5jaWFsIHllYXIgdHJhY2tpbmcsIGFzc3VtZXMgMTMgcGVyaW9kcyB3aXRoIDQgd2Vla3MgaW4gZWFjaCBwZXJpb2QuPC9wPlxuICAgICAgICA8dWw+XG4gICAgICAgICAgICA8bGk+PHN0cm9uZz5HbyB0bzo8L3N0cm9uZz4gXCJDYWxlbmRhciBGdW5jdGlvbmFsXCIg4oaSIFwiUGVyaW9kL1dlZWsgU3lzdGVtXCI8L2xpPlxuICAgICAgICAgICAgPGxpPjxzdHJvbmc+QWN0aW9uOjwvc3Ryb25nPiBTZXQgdGhlIDxzdHJvbmc+U3RhcnQgb2YgUGVyaW9kIDEgV2VlayAxPC9zdHJvbmc+IHRvIHRoZSBTdW5kYXkgZGF0ZSBvZiB5b3VyIGNob2ljZS48L2xpPlxuICAgICAgICA8L3VsPlxuICAgIGA7XG4gICAgfVxuXG59XG5leHBvcnQgZGVmYXVsdCBQZXJpb2RNb250aFBsdWdpbjsiXSwibmFtZXMiOlsiRXZlbnQiLCJJQ0FMIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLE1BQU0sQ0FBQztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsT0FBTyxVQUFVLENBQUMsT0FBTyxFQUFFO0FBQzdCLElBQUksT0FBTyxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUM7QUFDOUIsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxXQUFXLENBQUMsTUFBTSxFQUFFO0FBQ3RCLElBQUksSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNO0FBQ3ZCLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsUUFBUSxHQUFHLFFBQVE7O0FBRXJCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLFdBQVcsR0FB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QUFDLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO0FBQ3ZGLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sU0FBUyxTQUFTLElBQUksQ0FBQztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsT0FBTyx1QkFBdUIsQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFFO0FBQ3BELElBQUksU0FBUyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDM0IsTUFBTSxPQUFPLENBQUMsR0FBRyxjQUFjLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSTtBQUN6RCxJQUFJO0FBQ0osSUFBSSxJQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQztBQUNqQyxJQUFJLElBQUksRUFBRSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUNyQyxJQUFJLElBQUksU0FBUyxHQUFHLEdBQUcsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUU7QUFDdEUsSUFBSSxJQUFJLElBQUksR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUM7O0FBRTlDLElBQUksSUFBSSxLQUFLLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxNQUFNLEdBQUcsQ0FBQztBQUNsQyxJQUFJLElBQUksS0FBSyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsTUFBTSxHQUFHLENBQUM7O0FBRWxDLElBQUksSUFBSSxXQUFXLEdBQUcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUc7QUFDeEQsSUFBSSxJQUFJLFdBQVcsR0FBRyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUc7O0FBRXhDLElBQUksSUFBSSxDQUFDLEdBQUc7QUFDWixNQUFNLElBQUksRUFBRSxXQUFXLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUMvQyxNQUFNLEtBQUssRUFBRSxXQUFXLEtBQUssS0FBSyxJQUFJLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUk7QUFDM0ksTUFBTSxHQUFHLEVBQUUsS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLLElBQUksQ0FBQyxJQUFJLFdBQVcsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUk7O0FBRXpILE1BQU0sSUFBSSxFQUFFLFdBQVcsR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQy9DLE1BQU0sTUFBTSxFQUFFLFdBQVcsSUFBSSxLQUFLLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUssR0FBRyxDQUFDLEdBQUcsV0FBVyxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUk7QUFDM0gsTUFBTSxNQUFNLEVBQUUsS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUc7QUFDeEcsS0FBSzs7QUFFTCxJQUFJLElBQUksSUFBSSxJQUFJLEdBQUcsRUFBRTtBQUNyQixNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsV0FBVztBQUNqQyxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxFQUFFO0FBQ3ZDLE1BQU0sSUFBSSxHQUFHLFNBQVMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDO0FBQ3ZDLElBQUksQ0FBQyxNQUFNO0FBQ1gsTUFBTSxJQUFJLEdBQUcsSUFBSTtBQUNqQixJQUFJOztBQUVKLElBQUksT0FBTyxJQUFJLFNBQVMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLFNBQVMsQ0FBQztBQUM1QyxFQUFFOzs7QUFHRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsV0FBVyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFO0FBQ3BDLElBQUksS0FBSyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUM7QUFDckIsSUFBSSxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsSUFBSSxr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SUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLFVBQVUsRUFBRSxVQUFVLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDdkYsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLFVBQVUsRUFBRSxVQUFVLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDdkYsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7QUFDL0UsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLFlBQVksRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUM7QUFDaEYsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLFNBQVMsRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUM7O0FBRW5GLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxRQUFRLEVBQUU7QUFDcEMsTUFBTSxJQUFJLE9BQU8sSUFBSSxLQUFLLEVBQUU7QUFDNUIsUUFBUSxJQUFJLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0FBQ3hFLFFBQVEsSUFBSSxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0FBQzVELFFBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUks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SyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3JELE1BQU0sQ0FBQyxNQUFNLElBQUksS0FBSyxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7QUFDcEMsUUFBUSxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3JELE1BQU07O0FBRU4sTUFBTSxJQUFJLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxFQUFFO0FBQ2xFLFFBQVEsSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQy9DLE1BQU07O0FBRU4sTUFBTSxPQUFPLEtBQUssR0FBRyxJQUFJO0FBQ3pCLElBQUksQ0FBQzs7QUFFTCxJQUFJLFVBQVUsRUFBRSxTQUFTLE1BQU0sRUFBRSxVQUFVLEVBQUU7QUFDN0MsTUFBTSxJQUFJLFFBQVEsR0FBRyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUM7QUFDdEMsTUFBTSxJQUFJLFFBQVEsR0FBRyxNQUFNLENBQUMsTUFBTSxJQUFJLFVBQVUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3pELE1BQU0sSUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQztBQUNqQyxNQUFNLElBQUksSUFBSSxFQUFFLEtBQUs7O0FBRXJCLE1BQU0sSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksR0FBRyxFQUFFO0FBQ25DLFFBQVEsSUFBSSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUM7QUFDL0IsUUFBUSxLQUFLLEdBQUcsTUFBTSxD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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGVBQWUsQ0FBQyxVQUFVLEVBQUU7QUFDckMsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFLE9BQU8sSUFBSTtBQUNoQyxJQUFJLE1BQU0sS0FBSyxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsbURBQW1ELENBQUM7QUFDdkYsSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLE9BQU8sSUFBSTtBQUMzQixJQUFJLE9BQU87QUFDWCxRQUFRLENBQUMsRUFBRSxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQUNqQyxRQUFRLENBQUMsRUFBRSxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQUNqQyxRQUFRLENBQUMsRUFBRSxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQUNqQyxRQUFRLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssU0FBUyxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO0FBQzVELEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsZUFBZSxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ2pELElBQUksTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQztBQUNyRSxJQUFJLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUM7QUFDckUsSUFBSSxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDO0FBQ3JFLElBQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBQ3RFLElBQUksT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3pDOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU0saUJBQWlCLFNBQVMsS0FBSyxDQUFDO0FBQ3RDLElBQUksV0FBVyxDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxXQUFXLEdBQUcsU0FBUyxFQUFFO0FBQ3pFLFFBQVEsS0FBSyxDQUFDLEdBQUcsQ0FBQztBQUNsQixRQUFRLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSztBQUMxQixRQUFRLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTztBQUM5QixRQUFRLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUztB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QW1ELENBQUM7QUFDM0YsUUFBUSxJQUFJLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUU7QUFDekQsUUFBUSxNQUFNLEtBQUssR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxRQUFRLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDO0FBQzNFLFFBQVEsTUFBTSxLQUFLLEdBQUcsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0UsUUFBUSxNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssU0FBUyxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO0FBQ3ZFLFFBQVEsT0FBTyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDL0IsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLFNBQVMsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFO0FBQzFCLFFBQVEsTUFBTSxDQUFDLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQUMvQyxRQUFRLE1BQU0sQ0FBQyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDL0MsUUFBUSxNQUFNLENBQUMsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxD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
